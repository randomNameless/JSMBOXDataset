<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>app.c0df3d2de94ec5eb.html</title>
</head>
<body>

<script>
"use strict";(self.webpackMelodyContour=self.webpackMelodyContour||[]).push([[773],{13781:function(e,t,n){n(28594),n(35666);var a=n(20745),r=n(67294),l=n(45697),i=n.n(l),s=n(8177),o=n(73727),c=function(e){let{children:t,style:n="gray"}=e;return r.createElement("span",{className:`badge-label badge-label--${n}`},t)};const u=(()=>{const e=(()=>{if("undefined"==typeof window)return!1;try{const e="ls-test";return localStorage.setItem(e,e),localStorage.getItem(e),localStorage.removeItem(e),!0}catch{return!1}})();return{set:(t,n)=>{if(e)try{localStorage.setItem(t,n)}catch{}},get:t=>{if(!e)return null;try{return localStorage.getItem(t)}catch{return null}},remove:t=>{if(e)try{localStorage.removeItem(t)}catch{}}}})();var d=function(e,t){const[n,a]=(0,r.useState)(t);return(0,r.useEffect)((()=>{const t=u.get(e);if(t)try{a(JSON.parse(t))}catch{}}),[e]),[n,t=>{try{const r=t instanceof Function?t(n):t;a(r),u.set(e,JSON.stringify(r))}catch(e){console.warn(e)}}]};function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m.apply(this,arguments)}function p(e){let{selected:t,id:n,url:a,searchParams:l,isLink:i,iconUrl:u,label:g,displayLabel:h,onClick:f,items:b,isSeparator:E,onDisplayLabelUpdate:v,highlightKey:y}=e;const _=(0,s.TH)(),[w,k]=d(`navigation-item-highlight__${y}`,y&&y.length>0);y&&t&&w&&k(!1);const N=()=>{const e=Object.fromEntries(Object.entries({...Object.fromEntries(new URLSearchParams(_.search)),...l??{}}).filter((e=>{let[,t]=e;return null!=t})));return new URLSearchParams(e).toString()},T=i?e=>{let{children:t}=e;return r.createElement(o.rU,{to:{pathname:a??_.pathname,search:N()},onClick:f},t)}:e=>{let{children:t}=e;return r.createElement("a",{href:(a??_.pathname??"#")+(l?"?"+N():""),onClick:f},t)};return E?r.createElement("li",{className:"separator"}):r.createElement("li",{className:"navigation-item"+(t?" navigation-item--selected":"")+(w?" navigation-item--highlight":""),key:`${a}-${g}`,onMouseOver:()=>w&&k(!1)},r.createElement(T,null,u&&r.createElement("img",{alt:h??g,src:u}),h??g),b&&b.length>0&&r.createElement("ul",null,b.map(((e,t)=>r.createElement(p,m({key:t},e,{onClick:e=>{if(n&&v){const a=(t=e?.currentTarget?.text,("+"===t?.charAt(0)?t.substr(1,t.length-1):t)??g);v(n,a)}var t;f?.(e)}}))))),w&&r.createElement("div",{className:"navigation-item__badge"},r.createElement(c,null,trans("global.new")+"!")))}const g={selected:i().bool,id:i().oneOfType([i().string,i().number]),url:i().string,searchParams:i().object,isLink:i().bool,iconUrl:i().string,label:i().string,onClick:i().func,isSeparator:i().bool,onDisplayLabelUpdate:i().func,highlightKey:i().string};p.propTypes={...g,items:i().arrayOf(i().shape(g))};var h=p;function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f.apply(this,arguments)}function b(e){let{items:t,updateTopLevelDisplayLabel:n,endLinks:a}=e;const l=(e=>{const t=Math.floor(1e6*Math.random());return(0,r.useLayoutEffect)((()=>{$(`#${t}`).smartmenus({showOnClick:!0,mainMenuSubOffsetX:-1,mainMenuSubOffsetY:-1,subMenusSubOffsetX:10,subMenusSubOffsetY:0,subMenusMaxWidth:"800px"})}),[t,...e]),t})([t,(0,s.TH)()]);return r.createElement("div",{className:"navigation"},r.createElement("ul",{id:l,className:"sm sm-black filter-bar-menu"},t.map(((e,t)=>r.createElement(h,f({key:t},e,{onDisplayLabelUpdate:n})))),a?.map(((e,t)=>r.createElement("li",{key:t,className:"navigation__end-link"},e)))))}b.propTypes={items:i().array,updateTopLevelDisplayLabel:i().func,endLinks:i().array};var E=b,v=function(e){const[t,n]=(0,r.useState)(e?"loading":"idle");return(0,r.useEffect)((()=>{if(!e)return void n("idle");const t=document.querySelector(`script[src="${e}"]`);function a(e){const t="load"===e.type?"ready":"error";this.setAttribute("data-status",t),n(t)}if(t){const e=t.getAttribute("data-status");return e&&"ready"!==e?("loading"!==e&&"error"!==e||n(e),t.addEventListener("load",a),t.addEventListener("error",a),()=>{t&&(t.removeEventListener("load",a),t.removeEventListener("error",a))}):void n("ready")}const r=Object.assign(document.createElement("script"),{src:e,async:!0});return r.dataset.status="loading",document.head.appendChild(r),r.addEventListener("load",a),r.addEventListener("error",a),()=>{r&&(r.removeEventListener("load",a),r.removeEventListener("error",a))}}),[e]),t};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},y.apply(this,arguments)}function _(e,t,n){const[a,l]=(0,r.useState)(0);return(0,r.useLayoutEffect)((()=>{const a=()=>{if(!e.current?.clientWidth)return;if(n)return void l(n);if(window.innerWidth>=708&&window.innerWidth<=1100)return void l(355);const a=e.current.clientWidth,r=9/16;if("video"===t)return void l(a*r);const i=window.innerWidth>=708,s=screen.availHeight>screen.availWidth;l(i?(a-340)*r:s?a*r*3:a*r*2)};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}}),[n,t,e]),a}const w=r.forwardRef(((e,t)=>{let{id:n,height:a,hasBorder:l,children:i}=e;return r.createElement("div",{ref:t,className:"stream "+(l?"":"stream--no-border"),id:n,style:{height:a+"px"}},i)}));function k(e){let{channel:t,fixedHeight:n,hasBorder:a=!0,id:l="stream",autoplay:i}=e;const s=r.createRef(),o=_(s,"video",n);return r.createElement(w,{id:l,height:o,ref:s,hasBorder:a},r.createElement("iframe",{width:"100%",height:"100%",src:`https://open.douyu.com/tpl/h5/chain2/RPGLOGS/${t}`,frameBorder:"0",allow:"fullscreen;"+(i?" autoplay;":"")}))}function N(e){let{channel:t,fixedHeight:n,layout:a="video",hasBorder:l=!0,id:i="stream",autoplay:s}=e,o=v("https://embed.twitch.tv/embed/v1.js"),c=(0,r.useRef)();const u=r.createRef();(0,r.useEffect)((()=>{if(t){if(c.current)return c.current.setChannel(t);if("function"!=typeof window?.Twitch?.Embed||"ready"!==o)return;c.current=new window.Twitch.Embed(i,{width:"100%",height:"100%",channel:t,layout:a,autoplay:s,muted:!0})}else u.current.querySelector("iframe")?.remove(),c.current=null}),[t,i,a,u,o,s]);const d=_(u,a,n);return r.createElement(w,{height:d,ref:u,id:i,hasBorder:l})}w.displayName="StreamContainer",w.propTypes={id:i().string.isRequired,height:i().number.isRequired,hasBorder:i().bool,children:i().oneOfType([i().node,i().arrayOf(i().node)])};const T=e=>{let{fallbackMessage:t}=e;return r.createElement(w,{id:"stream",hasBorder:!0,height:250},t&&r.createElement("div",{className:"stream__fallback-message"},r.createElement("span",null,t)))};T.propTypes={fallbackMessage:i().node};const C={channel:i().string,fixedHeight:i().number,layout:i().oneOf(["video","video-with-chat"]),hasBorder:i().bool,id:i().string,autoplay:i().bool};N.propTypes=C,k.propTypes=C;const S=e=>{let{source:t,channel:n,autoplay:a=!0,...l}=e;return n?"douyu"===t?r.createElement(k,y({autoplay:a,channel:n},l)):r.createElement(N,y({autoplay:a,channel:n},l)):r.createElement(T,l)};S.propTypes={...C,fallbackMessage:i().node,source:i().oneOf(["twitch","douyu"]),autoplay:i().bool};var I=S;function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x.apply(this,arguments)}var P=(0,r.forwardRef)((function(e,t){let{className:n,href:a,openInNewTab:l,children:i,disableDefaultLinkUnstyling:s,setRel:o=!0,...c}=e;return r.createElement("a",x({ref:t,className:`${s?"":"unstyled-link"} ${n??""}`},c,{href:a,target:l?"_blank":void 0,rel:o&&l?"noopener noreferrer":void 0}),i)})),R=function(e){let{href:t,children:n,className:a,openInNewTab:l,fallbackButton:i,disableDefaultLinkUnstyling:s,Wrapper:o=r.Fragment,setRel:c=!0}=e;return r.createElement(o,null,t?r.createElement(P,{href:t,className:a,openInNewTab:l,disableDefaultLinkUnstyling:s,setRel:c},n):i?r.createElement("button",{className:a,onClick:i.onClick,disabled:i.isDisabled},n):r.createElement(r.Fragment,null,n))};const A={name:"v1",bodyStyle:"v1",headingStyle:"v1",primaryButtonStyles:["primary"],secondaryButtonStyles:["menu"],warningButtonStyles:["warning"],tableStyle:"report",horizontalRuleColor:"lighter-gray",inputTextStyle:"light",selectStyles:[],tileStyle:"tile",toggleSelectStyle:"menu",tabbedSelectStyle:"default",iconStyle:"v1",name:"v2",bodyStyle:"v2",headingStyle:"v2",tableStyle:"dark-gray-striped",horizontalRuleColor:"light-gray",selectStyles:["menu"]},L=(0,r.createContext)(A);var O=()=>(0,r.useContext)(L)??A;function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},z.apply(this,arguments)}var F=function(e){let{children:t,onClick:n,disabled:a=!1,className:l,type:i="button",title:s,tabIndex:o,styles:c,...u}=e;const d=O();return c=c??d.primaryButtonStyles,r.createElement("button",z({title:s,type:i,className:`react-button ${c.filter((e=>void 0!==e)).map((e=>`react-button--style-${e}`)).join(" ")} ${l||""}`,onClick:n,disabled:a,tabIndex:o},u),t)};function M(e){let{children:t,asSpan:n}=e;return n?r.createElement("span",{className:"screen-reader-only"},t):r.createElement("div",{className:"screen-reader-only"},t)}M.propTypes={children:i().node.isRequired,asSpan:i().bool};var D=M;function U(e){let{children:t,className:n="",gap:a="smaller",style:l={}}=e;return r.createElement("div",{className:`horizontal-content horizontal-content--${a} ${n}`,style:l},t)}var B=n(24975),V=n(30724),q=n.n(V),j=n(10043),H=n.n(j);function G(e){let{color:t}=e;const n=O();return t=t??n.horizontalRuleColor,r.createElement("hr",{className:`horizontal-rule horizontal-rule--color-${t}`})}G.propTypes={color:i().oneOf(["light-gray","lighter-gray"])};var W=G;const K=(0,r.createContext)(null),Z=e=>{let{game:t,children:n}=e;return r.createElement(K.Provider,{value:t},n)};var Y=()=>(0,r.useContext)(K);function J(e,t){let{warcraft:n,retailWarcraft:a,classicWarcraft:r,vanillaWarcraft:l,sodWarcraft:i,ff:s,eso:o,swtor:c}=e;return!(!n||0!==t.id)||!(!a||0!==t.id||1!==t.area)||!(!r||0!==t.id||2!==t.area)||!(!l||0!==t.id||3!==t.area)||!(!i||0!==t.id||3!==t.area||3!==t.season)||!(!s||2!==t.id)||!(!o||4!==t.id)||!(!c||5!==t.id)||void 0}function X(e){return J(e,Y())?r.createElement(r.Fragment,null,e.children):null}X.propTypes={children:i().node.isRequired,warcraft:i().bool,retailWarcraft:i().bool,classicWarcraft:i().bool,vanillaWarcraft:i().bool,sodWarcraft:i().bool,ff:i().bool,eso:i().bool,swtor:i().bool},X.compileCondition=(e,t)=>J(e,t.pageViewModels.game);var Q=X;const ee=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],te=["b","strong","i","em","u","ul","ol","li","p","h1","h2","h3","h4","h5","h6","a","img","code","pre","hr","dl","dt","dd","span"];var ne=n(14702),ae=function e(t){if(!Array.isArray(t.props.children))return;const n=[];for(let a=0;a<t.props.children.length;a++){let r=t.props.children[a];if(r.props?.children&&e(r),a===t.props.children.length-1){n.push(r);break}if("function"!=typeof r.type){n.push(r);continue}const l=t.props.children[a+1];"p"===l.type||"p"===l.type?.name||l.type?.name?.startsWith("Paragraph")?" "===l.props.children?.[0]?.charAt?.(0)?(r.key&&(r={...r,key:l.props.children.length.toString()}),l.props.children.unshift(r),n.push(l),a++):n.push(r):n.push(r)}t.props.children.splice(0,t.props.children.length),n.forEach((e=>t.props.children.push(e)))},re=n(74855),le=n.n(re);const ie=["incorrect_password"];function se(e){let{children:t,className:n,showCopyButton:a=!0}=e;return r.createElement("div",{className:`error-box ${n||""}`},"string"==typeof t&&!ie.includes(t)&&a?r.createElement(r.Fragment,null,t,r.createElement(le(),{text:t},r.createElement(F,{className:"error-box__copy-button",styles:["link"]},r.createElement("span",null,trans("global.copy"))))):t)}const oe="https://assets.rpglogs.com";function ce(e){let{src:t,alt:n,width:a,height:l,includeMargin:i=!0}=e;return t?.startsWith?.(oe)?!n?.length>0?r.createElement(se,null,r.createElement("p",null,"Every ",r.createElement("code",null,"<Image>")," must specify an ",r.createElement("code",null,"alt")," ","property that describes the image.")):r.createElement("div",{className:"enhanced-markdown-image "+(i?"enhanced-markdown-image--include-margin":"")},r.createElement("img",{src:t,alt:n,width:a,height:l})):r.createElement(se,null,r.createElement("p",null,"Every ",r.createElement("code",null,"<Image>")," must specify a ",r.createElement("code",null,"src")," ","property that starts with ",r.createElement("code",null,oe),"."))}ce.propTypes={src:i().string.isRequired,alt:i().string.isRequired,width:i().oneOfType([i().string,i().number]),height:i().oneOfType([i().string,i().number]),includeMargin:i().bool};var ue=ce;function de(e){return r.createElement("span",{className:`zmdi zmdi-${e.type}`})}de.propTypes={type:i().string.isRequired};function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},me.apply(this,arguments)}function pe(e){let{style:t,cssStyle:n,className:a,children:l,...i}=e;const s=O();return t=t||s.bodyStyle,a=`${a?a+" ":""}body body--style-${t}`,r.createElement("div",me({className:a,style:n},i),l)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ge.apply(this,arguments)}function he(e){return r.createElement(In,ge({style:"flat"},e),r.createElement(pe,null,e.children))}he.propTypes={children:i().node.isRequired};var fe=he;function be(e){let{children:t}=e;const n=`support@${Y().lowercaseName}logs.com`;return r.createElement("a",{href:`mailto:${n}`},t??n)}be.propTypes={children:i().node};var Ee=be,ve=n(18029),ye=n.n(ve);function _e(){const e={};return["Pet","NPC","Boss","Primary","DeathKnight","DemonHunter","Druid","Evoker","Hunter","Mage","Monk","Paladin","Priest","Rogue","Shaman","Warlock","Warrior","Legendary","Astounding","Magnificent","Epic","Rare","Uncommon","Common","CommonWhite","Exploit","Banned","Kill","Wipe","Estimate","Physical","Holy","Fire","Nature","Frost","Shadow","Chromatic","Arcane","Chaos","Alliance","Horde","Arcanist","Archer","Astrologian","Bard","BlackMage","BlueMage","Conjurer","Dancer","DarkKnight","Dragoon","Gladiator","Gunbreaker","Lancer","LimitBreak","Machinist","Marauder","Ninja","Pictomancer","Pugilist","Reaper","RedMage","Sage","Samurai","Scholar","Summoner","Thaumaturge","Viper","WhiteMage","Earth","Air","RDPS","ADPS","CDPS","DragonKnight","Templar","Sorcerer","Warden","Necromancer","Nightblade","Werewolf","SithSorcerer","JediSage","SithAssassin","JediShadow","SithJuggernaut","JediGuardian","SithMarauder","JediSentinel","Operative","Scoundrel","Sniper","Gunslinger","Powertech","Vanguard","Mercenary","Commando"].forEach((t=>{var n;e[t]=(n=t,e=>{let{children:t}=e;return r.createElement(ke,{type:n},t??ye()(n))})})),e.AllStyles=Ne,e}function we(e){switch(e){case"Artifact":return"artifact";case"Legendary":return"legendary";case"Astounding":return"astounding";case"Magnificent":return"magnificent";case"Epic":return"epic";case"Rare":return"rare";case"Uncommon":return"uncommon";case"Common":return"common";case"CommonWhite":return"common-white";case"Exploit":return"exploit-fg";case"Banned":return"banned-fg";case"Kill":return"kill";case"Wipe":return"wipe";case"Estimate":return"estimate";case"Physical":return"school-1";case"Holy":return"school-2";case"Fire":return"school-4";case"Nature":return"school-8";case"Frost":return"school-16";case"Shadow":return"school-32";case"Shadowflame":return"school-36";case"Chromatic":return"school-62";case"Arcane":return"school-64";case"Chaos":return"school-127";case"Earth":return"school-128";case"Air":return"school-512";case"Limit Break":return"school-256";case"Primary":return"primary";case"RDPS":return"rdps";case"ADPS":return"adps";case"CDPS":return"cdps";case"Alliance":return"faction-0";case"Horde":return"faction-1";case"Intellect":return"stat-intellect";case"Strength":return"stat-strength";case"Agility":return"stat-agility";case"Versatility":return"stat-versatility";case"Crit":return"stat-crit";case"Mastery":return"stat-mastery";case"Haste":return"stat-haste";default:return e}}function ke(e){let{type:t,children:n}=e;const a=we(t);return r.createElement("span",{className:"do-not-change-color-on-hover "+a},n)}function Ne(){return r.createElement(hn,{markdown:["Pet","NPC","Boss","Primary","DeathKnight","DemonHunter","Druid","Evoker","Hunter","Mage","Monk","Paladin","Priest","Rogue","Shaman","Warlock","Warrior","Legendary","Astounding","Magnificent","Epic","Rare","Uncommon","Common","CommonWhite","Exploit","Banned","Kill","Wipe","Estimate","Physical","Holy","Fire","Nature","Frost","Shadow","Chromatic","Arcane","Chaos","Alliance","Horde","Arcanist","Archer","Astrologian","Bard","BlackMage","BlueMage","Conjurer","Dancer","DarkKnight","Dragoon","Gladiator","Gunbreaker","Lancer","LimitBreak","Machinist","Marauder","Ninja","Pictomancer","Pugilist","Reaper","RedMage","Sage","Samurai","Scholar","Summoner","Thaumaturge","Viper","WhiteMage","Earth","Air","RDPS","ADPS","CDPS","DragonKnight","Templar","Sorcerer","Warden","Necromancer","Nightblade","Werewolf","SithSorcerer","JediSage","SithAssassin","JediShadow","SithJuggernaut","JediGuardian","SithMarauder","JediSentinel","Operative","Scoundrel","Sniper","Gunslinger","Powertech","Vanguard","Mercenary","Commando"].map((e=>`<${e}>`)).join(", ")})}ke.propTypes={type:i().string.isRequired,children:i().node.isRequired};var Te=ke,Ce=n(35082),Se=n(66037),Ie=n(85983),xe=n(58463);function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pe.apply(this,arguments)}function Re(e){let{children:t,content:n,defaultOpen:a=!1,tooltipClassName:l="",triggerProps:i,placementOptions:s,interactiveTrigger:o,allowHover:c,zIndex:u,offsetOptions:d=5}=e;const[m,p]=(0,r.useState)(a),g=(0,r.useRef)(null),{x:h,y:f,reference:b,floating:E,strategy:v,context:y,middlewareData:_,placement:w}=(0,Ce.YF)({open:m,placement:"bottom",onOpenChange:p,whileElementsMounted:Se.Me,middleware:[(0,Ie.cv)(d),(0,Se.X5)(s),(0,Se.uY)(),(0,xe.x7)({element:g})]}),k=(0,Ce.XI)(y,{move:!1,handleClose:c?(0,Ce.xp)():void 0}),N=(0,Ce.KK)(y),T=(0,Ce.bQ)(y),C=(0,Ce.qs)(y,{role:"tooltip"}),{getReferenceProps:S,getFloatingProps:I}=(0,Ce.NI)([k,N,T,C]),{x:x,y:P}=_.arrow??{},[R]=w.split("-"),A=Ae[R],L=o?"button":"span";return r.createElement(r.Fragment,null,r.createElement(L,S({type:o?"button":void 0,...i,className:["tooltip--trigger",i?.className].filter(Boolean).join(" "),ref:b}),t),r.createElement(Ce.ll,{id:"tooltip-portal"},m&&r.createElement(r.Fragment,null,r.createElement("div",Pe({className:`tooltip--body ${l}`,ref:E,style:{position:v,top:f??0,left:h??0,zIndex:u}},I()),n,r.createElement("span",{"aria-hidden":!0,className:"tooltip--arrow",ref:g,"data-side":A,style:{left:x?`${x}px`:"",top:P?`${P}px`:"",right:"",bottom:"",[A]:"-0.5rem"}})))))}const Ae={top:"bottom",right:"left",bottom:"top",left:"right"},Le={icon:{size:20,rounded:!0,bordered:!1},actor:{size:20,rounded:!0,bordered:!1},ability:{size:20,rounded:!0,bordered:!1},encounter:{size:20,rounded:!0,bordered:!1},item:{size:20,rounded:!1,bordered:!0}},$e=(0,r.createContext)(Le),Oe=50;var ze=()=>(0,r.useContext)($e);function Fe(e){const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{n(!0)}),[]),t?r.createElement(Me,e):r.createElement("span",{className:e.className,style:{display:"inline-block",...e.cssStyle,width:`${e.size}px`,height:`${e.size}px`}})}function Me(e){let{className:t="",src:n,alt:a="",size:l,rounded:i,bordered:s,sprite:o=!1,forceHeight:c=!1,cssStyle:u={},tooltip:d,children:m,isRtl:p,style:g}=e;const h=ze().icon;i=i??h.rounded,s=s??h.bordered,l=l??h.size;const f=Y(),b=O();g=g??b.iconStyle;const E=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{E.current?.style.setProperty("--size",`${l}`)}),[l]);const v=!n?.startsWith("http")&&!n?.startsWith("/");n&&v&&(n=`${f?.assetServerBaseUrl}/img/${f?.lowercaseName}/abilities/${n}`);const y=(0,r.useMemo)((()=>r.createElement("span",{className:`icon ${s?" icon--bordered":""} ${c?" icon--force-height":""} ${p?"icon--rtl":""} ${m?"":"icon--childless"} icon--style-${g}`,ref:E},n&&r.createElement("img",{className:`${t} icon__image`+(i?" icon__image--rounded":"")+(o?" icon__image--sprite":"")+(m?" icon__image--with-label":""),src:n,alt:a,style:u,loading:"lazy"}),m?r.createElement("span",{className:`icon__label ${l&&l>=30?"icon__label--large":""} ${n?"":"icon__label--no-image"}`},m):null)),[s,c,p,m,g,t,i,o,n,a,u,l]);return v&&!f?null:d?r.createElement(Re,d,y):y}function De(e){let{type:t,size:n,rounded:a,bordered:l,forceHeight:i=!1,alt:s,tooltip:o,useSecondarySprites:c=!1,children:u,className:d}=e;const m=ze().actor;a=a??m.rounded,l=l??m.bordered,n=n??m.size;const p=Y();return p?n&&n>36&&p.actorsLargeIconsPath?r.createElement(Fe,{className:d,src:`${p.actorsLargeIconsPath}/${t}.jpg`,alt:s??t.split("-").join(" "),bordered:l,rounded:a,forceHeight:i,size:n,tooltip:o},u):r.createElement(Fe,{className:`actor-sprite-${t}${c?"-secondary":""} ${d??""}`,src:c?p.actorsSecondarySprite:p.actorsSprite,alt:s??t.split("-").join(" "),bordered:l,rounded:a,forceHeight:i,size:n,sprite:!0,tooltip:o},u):null}const Ue=(0,r.createContext)({lazyLoad:!0}),Be=e=>{let{value:t,children:n}=e;return r.createElement(Ue.Provider,{value:t},n)};var Ve=()=>(0,r.useContext)(Ue),qe=n(1216);function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},je.apply(this,arguments)}function He(e){const t=Ve().lazyLoad,n=!0!==e.type&&e.type?e.type:"";let a=r.createElement(De,je({},e,{type:n}));if(e.children){const t=n.split("-")[0];a=r.createElement("span",{className:"enhanced-markdown-actor-icon",style:{display:"inline-block"}},r.createElement(De,je({},e,{type:n}),r.createElement(Te,{type:t},e.children)))}const l=r.createElement("span",{className:"enhanced-markdown-actor-icon"},a);return t?r.createElement(qe.ZP,{style:{display:"inline-block"}},l):l}function Ge(){return{Up:()=>r.createElement(We,{direction:"up"}),Down:()=>r.createElement(We,{direction:"down"}),Left:()=>r.createElement(We,{direction:"left"}),Right:()=>r.createElement(We,{direction:"right"})}}function We(e){let{direction:t}=e;switch(t){case"up":return" ↑ ";case"down":return" ↓ ";case"left":return" ← ";case"right":return" → ";default:return null}}We.propTypes={direction:i().oneOf(["up","down","left","right"])};var Ke=We;function Ze(e){let{children:t}=e;return r.createElement("div",{className:"enhanced-markdown-center"},t)}Ze.propTypes={children:i().node.isRequired};var Ye=Ze,Je=function(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()};function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xe.apply(this,arguments)}function Qe(e){let{level:t,style:n,styleLevel:a,cssStyle:l,className:i,children:s,as:o,...c}=e;const u=o||et[t],d=O();return n=n??d.headingStyle,i=`${i?i+" ":""}heading heading--level-${a??t} ${tt(n)}`,r.createElement(u,Xe({className:i,style:l},c),s)}const et={1:e=>r.createElement("h1",e),2:e=>r.createElement("h2",e),3:e=>r.createElement("h3",e),4:e=>r.createElement("h4",e),5:e=>r.createElement("h5",e),6:e=>r.createElement("h6",e)},tt=e=>"v3-with-header-margin"===e?"heading--style-v3 heading--with-margin":`heading--style-${e}`;function nt(){return nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nt.apply(this,arguments)}function at(e){const t=e?.split?.(" ");if(!t?.[0])return null;const n=t[0];if(![...n].every((e=>"#"===e)))return{text:e};const a=t.slice(1).join(" ").split("&lt;").join("<").split("&gt;").join(">");return{level:n.length,text:a,id:Je(a)}}function rt(e){let{headerLevel:t,id:n,children:a}=e;const l={id:n,className:"enhanced-markdown-collapse__header"};return r.createElement(Qe,nt({level:Math.min(t+1,6)},l),a)}function lt(e){let{header:t,isCollapsed:n=!0,children:a}=e;const[l,i]=(0,r.useState)(n),s=at(t);return s?s.level?r.createElement(r.Fragment,null,r.createElement(rt,{headerLevel:s.level,id:s.id},r.createElement("button",{className:"enhanced-markdown-collapse__button "+(l?"":"enhanced-markdown-collapse__button--down"),onClick:()=>i((e=>!e))},"›"),r.createElement("span",{className:"enhanced-markdown-collapse__header-text",onClick:()=>i((e=>!e))},s.text)),l?r.createElement("div",{style:{display:"none"}},a):a):r.createElement(fe,{padding:"narrow"},r.createElement("details",{open:!l},r.createElement("summary",null,t),a)):r.createElement(se,null,r.createElement("p",null,r.createElement("code",null,"header")," must be in a valid format. For example:"," ",r.createElement("code",null,"## This is my header")," or ",r.createElement("code",null,"This is my header"),"."))}rt.propTypes={headerLevel:i().number.isRequired,id:i().string,children:i().node.isRequired},lt.propTypes={header:i().string.isRequired,isCollapsed:i().bool,children:i().node.isRequired},lt.getHeading=e=>{const t=at(e.header);return t?.level?t:null};var it=lt;function st(e){let{children:t}=e;const n=`https://www.${Y().lowercaseName}logs.com/join-discord`;return r.createElement("a",{href:n,target:"_blank",rel:"noreferrer noopener"},t??"Discord")}st.propTypes={children:i().node};var ot=st;var ct=function e(t,n){n&&Array.isArray(t.props.children)&&function(t,n){if(!t)return;const a=[],r={pageViewModels:{game:n}},l=Array.isArray(t)?t:[t];l.forEach((t=>{const n=t?.type?.compileCondition;n&&"function"==typeof n&&!n(t.props,r)||a.push(t),t.props?.children&&e(t,r)})),l.splice(0,l.length),a.forEach((e=>l.push(e)))}(t.props.children,n.pageViewModels?.game)};function ut(e){let{slug:t}=e;return t&&!0!==t?`~{snippet:${t}}~`:null}ut.propTypes={slug:i().string.isRequired};var dt=ut;const mt=e=>{let{src:t,width:n="100%",height:a="400px",scrolling:l="no"}=e;return r.createElement("div",{className:"enhanced-markdown-iframe"},r.createElement("iframe",{loading:"lazy",src:t,width:n,height:a,scrolling:l,frameBorder:"0",style:{overflow:"auto"}}))};mt.propTypes={src:i().string,width:i().string,height:i().string,scrolling:i().string};var pt=mt,gt=n(94184),ht=n.n(gt);function ft(e){let{purple:t}=e;return r.createElement("div",{className:ht()("enhanced-markdown-divider",{"enhanced-markdown-divider--purple":t})})}ft.propTypes={purple:i().bool};var bt=ft;function Et(e){let{children:t}=e;const n=Y(),a="https://twitter.com/"+(["warcraft","ff"].includes(n.lowercaseName)?`${n.lowercaseName}logs`:`logs${n.lowercaseName}`);return r.createElement("a",{href:a,target:"_blank",rel:"noreferrer noopener"},t??"Twitter")}Et.propTypes={children:i().node};var vt=Et;function yt(e){let{children:t}=e;const n=(0,r.useRef)(null),a="ready"===v("https://assets.rpglogs.com/libs/prism/prism.min.js");return function(e){const[t,n]=(0,r.useState)(e?"loading":"idle");(0,r.useEffect)((()=>{if(!e)return void n("idle");let t=document.querySelector(`link[href="${e}"]`);if(t)n(t.getAttribute("data-status"));else{t=document.createElement("link"),t.href=e,t.async=!0,t.rel="stylesheet",t.setAttribute("data-status","loading"),document.body.appendChild(t);const n=e=>{t.setAttribute("data-status","load"===e.type?"ready":"error")};t.addEventListener("load",n),t.addEventListener("error",n)}const a=e=>{n("load"===e.type?"ready":"error")};return t.addEventListener("load",a),t.addEventListener("error",a),()=>{t&&(t.removeEventListener("load",a),t.removeEventListener("error",a))}}),[e])}("https://assets.rpglogs.com/libs/prism/themes/vscode.min.css?v=3"),(0,r.useEffect)((()=>{if(a&&n.current){const e=n.current.querySelector("code");e&&window.Prism.highlightElement(e)}}),[a]),r.createElement("pre",{ref:n},t)}var _t=n(46780);function wt(e){let{label:t,inline:n=!1,fontSize:a=36}=e;return r.createElement("div",{className:"loading-spinner",style:{display:n?"inline-block":"block"}},t&&r.createElement("p",null,t),r.createElement("div",{className:"loading-spinner__icon zmdi zmdi-spinner zmdi-hc-spin",style:{fontSize:a}}))}wt.propTypes={label:i().string,inline:i().bool,fontSize:i().number};var kt=wt;function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nt.apply(this,arguments)}const Tt=e=>{let{height:t=250,timeoutDuration:n=200}=e;const a=function(e,t,n){const[a,l]=(0,r.useState)(0===t&&n?n:e);return(0,r.useEffect)((()=>{if(t>0){const e=setTimeout((()=>{l(n)}),t);return()=>clearTimeout(e)}}),[n,t]),a}(!1,n,!0);return r.createElement("div",{className:"async-with-spinner-and-error-box__pending",style:{minHeight:t+"px"}},a&&r.createElement(kt,{label:trans("reports.loading_data")}))},Ct=e=>{let{height:t}=e;return r.createElement("div",{className:"async-with-spinner-and-error-box__error",style:{minHeight:t+"px"}},r.createElement(se,null,trans("global.generic_load_error")))};var St=function(e){let{promiseFn:t,params:n,pendingOrRejectedHeight:a=250,lazyChildren:l,LoadingState:i,initialRenderDelayWhileLoading:s}=e;return r.createElement(_t.ZP,Nt({promiseFn:t},n),r.createElement(_t.ZP.Pending,null,void 0===i?()=>r.createElement(Tt,{height:a,timeoutDuration:s}):i),r.createElement(_t.ZP.Rejected,null,r.createElement(Ct,{height:a})),r.createElement(_t.ZP.Fulfilled,null,(e=>l(e))))};const It=(0,r.createContext)([]);const xt={isIdle:!0,isSuccess:void 0,isNotModified:void 0,isLoading:void 0,isError:void 0},Pt={isIdle:void 0,isSuccess:!0,isNotModified:void 0,isLoading:void 0,isError:void 0};function Rt(e,t){switch(t.type){case"FETCH_INIT":return{...e,status:{isLoading:!0}};case"FETCH_SUCCESS":return{...e,data:t.payload,status:Pt};case"FETCH_NOT_MODIFIED":return{...e,data:e.data,status:{isSuccess:!0,isNotModified:!0}};case"FETCH_FAILURE":{let n=trans("global.error_but_try_again");return 401!==t.status&&403!==t.status||(n=trans("global.not_authorized")),400===t.status&&t.payload?.message&&(n=t.payload.message),{...e,status:{isError:!0,errorMessage:n}}}case"FETCH_RESET":return{data:t.data,status:xt};default:throw new Error}}const At=n.g.document?.head.querySelector('meta[name="csrf-token"]')?.content,Lt=i().shape({isIdle:i().bool,isLoading:i().bool,isSuccess:i().bool,isError:i().bool,errorMessage:i().string});var $t=function(e,t){const n=(0,r.useRef)(e),a=(0,r.useRef)(null),[l,i]=(0,r.useState)(0),[s,o]=(0,r.useReducer)(Rt,{data:t,status:xt});return(0,r.useEffect)((()=>{if(!n.current)return;const e=n.current;let t=!1;return(async()=>{o({type:"FETCH_INIT"});const n=new Headers("string"!=typeof e?e.headers:void 0);At&&n.append("X-CSRF-TOKEN",At),"string"!=typeof e&&e.body&&n.append("Content-Type","application/json"),a.current&&n.append("X-Content-Hash",a.current);let r=null;const l={headers:n};if("object"==typeof e?(r=e.url,l.method=e.method??(e.body?"post":"get"),l.credentials=e.credentials??"same-origin",l.signal=e.signal,e.body&&(l.body=JSON.stringify(e.body))):r=e,!r)return;let i=null;try{if(i=await fetch(r,l),t)return;if(i.ok)a.current=i.headers?.get("X-Content-Hash"),o({type:"FETCH_SUCCESS",payload:204===i.status?void 0:await i.json(),status:i.status});else if(304===i.status)o({type:"FETCH_NOT_MODIFIED",status:i.status});else{let e;try{e=await i.json()}catch(t){e=void 0}o({type:"FETCH_FAILURE",payload:e,status:i.status})}}catch(e){if(t)return;if(e instanceof Error&&i){const t=i.bodyUsed?"":await(i.text?.());let n=`Original exception: ${e.message}`;t&&(n+=`\n\nResponse body:\n\n${t}`),console.error(new Error(n))}o({type:"FETCH_FAILURE"})}})().catch(console.error),()=>{t=!0}}),[l]),[s,(0,r.useCallback)((e=>{n.current=e,i((e=>e+1))}),[]),(0,r.useCallback)((e=>{o({type:"FETCH_RESET",data:e??t})}),[t])]},Ot=function(e){let{url:t,lazyChildren:n,onHttpSuccess:a,pendingOrRejectedHeight:l,LoadingState:i,initialRenderDelayWhileLoading:s}=e;const o=(0,r.useContext)(It),c=o?.find((e=>e.originalUrl===t))?.signedUrl,u=function(e,t){return(0,r.useCallback)((async(n,a)=>{let{signal:r}=a;if(!e)return;const l=await fetch(e,{signal:r});if(!l.ok)throw new Error(l.statusText);const i=204===l.status?void 0:await l.json();return t?.(i),i}),[t,e])}(c||t,a);return r.createElement(St,{pendingOrRejectedHeight:l,promiseFn:u,lazyChildren:n,LoadingState:i,initialRenderDelayWhileLoading:s})};function zt(){return zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zt.apply(this,arguments)}const Ft=(e,t)=>e.startsWith("http")||!t?e:`${t.assetServerBaseUrl}/img/${t.lowercaseName}/abilities/${e}`;function Mt(e){let{id:t,icon:n,size:a,rounded:l,bordered:i,forceHeight:s=!1,alt:o="",children:c,tooltip:u,isRtl:d}=e;const m=ze().ability;l=l??m.rounded,i=i??m.bordered,a=a??m.size;const p=Y();v(p?.tooltipLibraryPath);const g=n?Ft(n,p):void 0;return r.createElement(Dt,{id:t,game:p},r.createElement(Fe,{src:g,size:a,rounded:l,bordered:i,forceHeight:s,alt:o,isRtl:d,tooltip:u||(!p||p.tooltipLibraryPath?void 0:{content:r.createElement(Ot,{pendingOrRejectedHeight:84,initialRenderDelayWhileLoading:0,url:p.abilityTooltipEndpoint.split("{id}").join(t.toString()),lazyChildren:e=>e?r.createElement(Ut,zt({},e,{iconImageUrl:e.iconImageUrl??n,game:p})):null})})},c))}function Dt(e){let{id:t,children:n,game:a}=e;if(t&&a){const e="ff"===a.lowercaseName&&"number"==typeof t&&t>1e6?`${a.buffExternalSitePath}${t}`:`${a.abilityExternalSitePath}${t}`;return r.createElement("a",{className:"ability-icon",href:e,target:"_blank",rel:"nofollow noreferrer"},n)}return r.createElement("span",{className:"ability-icon"},n)}function Ut(e){let{description:t,iconImageUrl:n,title:a,game:l}=e;return r.createElement("table",{className:"ability-icon__tooltip"},r.createElement("tbody",null,r.createElement("tr",null,n&&r.createElement("td",null,r.createElement("img",{className:"ability-icon__tooltip--icon",src:Ft(n,l)})),r.createElement("td",null,r.createElement("div",{className:"estimate"},a),t&&r.createElement("table",{className:"ability-icon__tooltip--description"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:"ability-icon__tooltip--description__content",dangerouslySetInnerHTML:{__html:t}}))))))))}const Bt={1:"Physical",2:"Holy",4:"Fire",8:"Nature",16:"Frost",32:"Shadow",36:"Shadowflame",64:"Arcane",124:"Chaos",125:"Chaos",126:"Chaos",127:"Chaos",128:"Earth",256:"Limit Break",512:"Air",1024:"Limit Break"},Vt=e=>{if(!e)return"Physical";if("number"==typeof e)return Bt[e]??"Physical";const t=Number.parseInt(e);return Number.isNaN(t)?e:Bt[t]??"Physical"};function qt(e){let{id:t,icon:n,children:a,type:l,rounded:i=!1,isRtl:s=!1}=e;const o=Ve().lazyLoad,c=r.createElement("span",{className:"enhanced-markdown-ability-icon"},r.createElement(Mt,{id:t,icon:n,rounded:i,isRtl:s},a&&r.createElement("span",{className:we(Vt(l))},a)));return o?r.createElement(qe.ZP,{style:{display:"inline-block"}},c):r.createElement(r.Fragment,null,c)}function jt(e,t){if(e.startsWith("http")||!t)return e;const n=`${t.assetServerBaseUrl}/img/${t.lowercaseName}/abilities/${e}`;return e.includes("png")||e.includes("jpg")?n:`${n}.${t.encounterIconExtension}`}function Ht(e){let{id:t,icon:n,extraInfo:a,size:l,rounded:i,bordered:s,forceHeight:o=!1,alt:c,tooltip:u,children:d,isRtl:m}=e;const p=ze().item;i=i??p.rounded,s=s??p.bordered,l=l??p.size;const g=Y();return v(g?.tooltipLibraryPath),r.createElement(Gt,{id:t,extraInfo:a,game:g},r.createElement(Fe,{src:n?jt(n,g):void 0,size:l,rounded:i,bordered:s,forceHeight:o,alt:c,tooltip:u,isRtl:m},d))}function Gt(e){let{id:t,game:n,children:a,extraInfo:l=""}=e;return t&&n?.abilityExternalSitePath?r.createElement("a",{href:`${n.itemExternalSitePath}${t}`,target:"_blank",rel:l||"nofollow"},a):r.createElement(r.Fragment,null,a)}const Wt={1:"CommonWhite",2:"Uncommon",3:"Rare",4:"Epic",5:"Legendary",6:"Artifact"},Kt=e=>{if(!e)return"CommonWhite";if("number"==typeof e)return Wt[e]??"CommonWhite";const t=Number.parseInt(e);return Number.isNaN(t)?e:Wt[t]??"CommonWhite"};function Zt(e){let{id:t,icon:n,size:a,children:l,extraInfo:i,bordered:s,rounded:o,type:c,isRtl:u}=e;const d=Ve().lazyLoad,m=r.createElement("span",{className:"enhanced-markdown-item-icon"},r.createElement(Ht,{id:Number(t),icon:n,size:a,extraInfo:i,rounded:o,bordered:s,isRtl:u},l&&r.createElement("span",{className:we(Kt(c))},l)));return d?r.createElement(qe.ZP,{style:{display:"inline-block"}},m):m}function Yt(e){let{id:t,size:n,rounded:a,bordered:l,forceHeight:i=!1,alt:s="",tooltip:o,children:c,className:u}=e;const d=ze().encounter;a=a??d.rounded,l=l??d.bordered,n=n??d.size;const m=Y();return r.createElement("span",{className:"encounter-icon"},m&&r.createElement(Fe,{src:`${m.assetServerBaseUrl}/img/${m.lowercaseName}/bosses/${t}-icon.${m.encounterIconExtension??"jpg"}`,size:n,rounded:a,bordered:l,forceHeight:i,alt:s,tooltip:o,className:u},c&&r.createElement("span",{className:"do-not-change-color-on-hover Boss"},c)))}function Jt(e){let{id:t,children:n,bordered:a,rounded:l}=e;const i=Ve().lazyLoad,s=r.createElement("span",{className:"enhanced-markdown-encounter-icon"},r.createElement(Yt,{id:t,rounded:l,bordered:a},n));return i?r.createElement(qe.ZP,{style:{display:"inline-block"}},s):s}function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xt.apply(this,arguments)}function Qt(e){let{type:t,percent:n,height:a=16,tooltipProps:l,opacity:i=null}=e;const s=null!==i?r.createElement("div",{className:"bar__big-bar"},r.createElement("div",{className:`${we(Vt(t))}-bg`,style:{width:`${n}%`,height:`${a}px`,opacity:i}}),i<1?r.createElement("div",{className:`bar__small-bar ${we(Vt(t))}-bg`,style:{left:0,width:`${n}%`,opacity:1-i}}):null):r.createElement("div",{className:`bar ${we(Vt(t))}-bg`,style:{width:`${n}%`,height:`${a}px`}});return l?r.createElement(Re,Xt({},l,{placementOptions:{alignment:"start"}}),s):s}function en(e){let{percent:t,type:n,label:a}=e;return r.createElement(Qt,{percent:t,type:n,tooltipProps:a?{content:a}:void 0})}function tn(e){let{src:t,bordered:n,rounded:a,children:l,size:i}=e;const s=Ve().lazyLoad,o=r.createElement("span",{className:"enhanced-markdown-icon"},r.createElement(Fe,{src:t,rounded:a,bordered:n,size:i},l));return s?r.createElement(qe.ZP,{style:{display:"inline-block"}},o):o}function nn(e){let{code:t,src:n}=e;if(!t&&!n)return null;const a=n??"https://www.youtube.com/embed/"+t;return r.createElement("div",{className:"youtube-embed"},r.createElement("iframe",{loading:"lazy",src:a,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))}nn.propTypes={code:i().string,src:i().string};var an=nn;function rn(e){let{id:t,children:n}=e;const a=Y();if(v(a?.tooltipLibraryPath),!a?.itemSetExternalSitePath)return r.createElement(r.Fragment,null,n);const l=`${a.itemSetExternalSitePath}${t}`;return r.createElement("a",{className:"school-1",href:l,target:"_blank",rel:"nofollow noreferrer"},n)}function ln(e){let{id:t,stats:n,enchants:a,icon:l,gems:i,children:s,type:o,subLabel:c,side:u="left",extraInfo:d,isAbility:m}=e;const p=a&&a.length>0?a[0]:null,g=p||i||n,h=m?Mt:Ht;return r.createElement("div",{className:`gear-icon gear-icon--${u}`},r.createElement("div",{className:"gear-icon__icon"},r.createElement(h,{id:t,icon:l,size:Oe,extraInfo:d})),s&&!((Array.isArray(s)||"string"==typeof s)&&0===s.length)&&r.createElement("div",{className:"gear-icon__item "+(g?"gear-icon__item--has-meta":"")},r.createElement("div",{className:"gear-icon__item-name"},r.createElement("div",{className:"gear-icon__item-name-icon"},r.createElement(Ht,{id:t,icon:l,extraInfo:d,size:28})),r.createElement(sn,{isAbility:m,id:t,extraInfo:d,type:o},s)),c&&r.createElement("div",{className:"gear-icon__item-sublabel"},c),g?r.createElement("div",{className:"gear-icon__item-meta"},p&&i?r.createElement("div",{className:"gear-icon__item-meta__multitype"},i.map(((e,t)=>r.createElement(Ht,{id:e.id,icon:e.icon,key:t}))),r.createElement(Ht,{id:p.id,icon:p.icon,isRtl:"right"===u},1===i.length?r.createElement("span",{className:we(Kt(p.type))},p.name):void 0)):null,i&&!p?r.createElement("div",{className:"gear-icon__item-meta__gems"},i.map(((e,t)=>r.createElement(Ht,{id:e.id,icon:e.icon,key:t},1===i.length?r.createElement("span",{className:we(Kt(e.type))},e.name):void 0)))):null,p&&!i?r.createElement("div",{className:"gear-icon__item-meta__enchant"},r.createElement(Ht,{id:p.id,icon:p.icon},r.createElement("span",{className:we(Kt(p.type))},p.name))):null,n?r.createElement("div",{className:"gear-icon__item-meta__stats"},n.map(((e,t)=>r.createElement(r.Fragment,{key:t},r.createElement("span",{className:e.class},e.name),t===n.length-1?null:" / ")))):null):null))}function sn(e){let{type:t,children:n,id:a,extraInfo:l,isAbility:i}=e;const s=Y();if(!s?.itemExternalSitePath)return r.createElement("span",{className:we(Kt(t))},n);const o={target:"_blank",rel:l??"noreferrer",href:`${i?s.abilityExternalSitePath:s.itemExternalSitePath}${a}`,className:we(Kt(t))};if(Array.isArray(n)&&n.length>1){const[e,t]=n;return r.createElement("span",null,e,r.createElement("a",o,t))}return r.createElement("a",o,n)}function on(e){let{stats:t,enchants:n,gems:a,children:l,id:i,icon:s,size:o,extraInfo:c,rounded:u,bordered:d,type:m,subLabel:p,side:g,isAbility:h}=e;const f=Ve().lazyLoad;let b,E,v;if(t)try{b=JSON.parse(t)}catch{}if(a)try{E=JSON.parse(a)}catch{}if(n)try{v=JSON.parse(n)}catch{}const y=r.createElement("span",{className:"enhanced-markdown-gear-icon"},r.createElement(ln,{id:i,icon:s,size:o,extraInfo:c,rounded:u,bordered:d,stats:b,enchants:v,gems:E,type:m,side:g,isAbility:h,subLabel:p},l));return f?r.createElement(qe.ZP,{style:{display:"inline-block"}},y):y}function cn(e){let{content:t,children:n,width:a}=e;const l=(0,r.useMemo)((()=>{let e=r.createElement(r.Fragment,null,t);return t.includes("&lt;")&&(e=r.createElement(hn,{markdown:t.split("&lt;").join("<").split("&gt;").join(">")})),e}),[t]);return r.createElement(Re,{content:r.createElement("div",{style:{width:a?parseInt(a):void 0}},l),zIndex:2},n)}function un(e){let{children:t,_style:n}=e;return r.createElement(c,{style:n??"level-1"},t)}function dn(){return dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dn.apply(this,arguments)}const mn={h1:e=>r.createElement(Qe,dn({level:2},e)),h2:e=>r.createElement(Qe,dn({level:3},e)),h3:e=>r.createElement(Qe,dn({level:4},e)),h4:e=>r.createElement(Qe,dn({level:5},e)),h5:e=>r.createElement(Qe,dn({level:6},e)),h6:e=>r.createElement(Qe,dn({level:6},e)),hr:W,pre:function(e){let{children:t}=e;return r.createElement(qe.ZP,{placeholder:r.createElement("pre",null,t)},r.createElement(yt,null,t))},CodeTitle:function(e){let{children:t}=e;return r.createElement("div",{className:"enhanced-markdown-code-title"},t)},Divider:bt,Center:Ye,SiteTitle:function(){return Y().siteTitle},GameName:function(){return Y().fullName},SupportEmailLink:Ee,DiscordInviteLink:ot,TwitterLink:vt,Icon:de,If:Q,Iframe:pt,Image:ue,img:ue,DescriptionList:e=>r.createElement("dl",e),Term:e=>r.createElement("dt",e),Description:e=>r.createElement("dd",e),Tile:fe,Styled:Te,ActorIcon:He,Arrow:Ke,Collapse:it,Snippet:dt,AbilityIcon:qt,ItemIcon:Zt,EncounterIcon:Jt,Bar:en,ImageIcon:tn,Video:function(e){let{url:t}=e;const n=t.split("?"),a=new URLSearchParams(n.length>1?n[1]:n[0]).get("v");return a?r.createElement(an,{code:a}):r.createElement(se,null,'Invalid URL specified (must include "v=").')},ItemSet:function(e){return r.createElement(rn,e)},GearIcon:on,Tooltip:cn,BadgeLabel:un,WowheadLogoIcon:function(){const e=Y();if(!e)return null;const t=`${e.assetServerBaseUrl}/img/wowhead-logo-thumbnail.png`;return r.createElement("img",{className:"wowhead-logo-icon",src:t,alt:"",width:20,height:20,loading:"lazy"})},..._e(),...Ge()};var pn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;t=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?t:{...mn,...t};const a=Object.keys(t).map((e=>e.toLowerCase())),l={overrides:{...t},namedCodesToUnicode:{zwj:"‍"}};ee.filter((e=>!te.includes(e))).forEach((t=>{l.overrides[t]=e=>{let{children:t}=e;return t},a.includes(t.toLowerCase())||(e=e.replace(new RegExp(`<\\s*${t} `,"ig"),`&lt;${t} `).replace(new RegExp(`<\\/?\\s*${t}\\s*>`,"ig"),`&lt;${t}&gt;`))})),l.wrapper=r.Fragment;const i=(0,ne.n)(e,l);return ct(i,n),ae(i),i};function gn(e){let{markdown:t,overrides:n,wrapped:a=!0,onlyUsePassedOverrides:l=!1}=e;const i=(0,r.useMemo)((()=>pn(t,n,void 0,l)),[t,l,n]);return a?r.createElement(pe,{className:"enhanced-markdown"},i):i}gn.propTypes={markdown:i().string.isRequired,overrides:i().object,wrapped:i().bool,onlyUsePassedOverrides:i().bool};var hn=gn;function fn(){if("undefined"==typeof window)return!1;try{return window.self!==window.top}catch(e){return!0}}function bn(){return bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bn.apply(this,arguments)}function En(e){let{restricted:t=!0,openLinksExternally:n=!0,styles:a=[],children:l,before:i,after:s,className:o,enhanced:c=!1,enhancedOverrides:u}=e;const d=!fn(),m={thematicBreak:()=>r.createElement(W,null)};return n&&(m.link=e=>r.createElement("a",bn({href:e.href},d?{target:"_blank",rel:"noopener noreferrer"}:{}),e.children)),m.heading=e=>r.createElement(Qe,{level:t&&1===e.level?2:e.level},e.children),r.createElement("div",{className:`markdown ${o||""} ${a.map((e=>`markdown--styles-${e}`)).join(" ")}`},i,r.createElement(pe,{className:"markdown__content"},c?r.createElement(hn,{markdown:l,wrapped:!1,overrides:u}):r.createElement(q(),{plugins:[H()],disallowedTypes:t?["html","image","imageReference"]:[],renderers:m},l)),s)}En.propTypes={restricted:l.bool,openLinksExternally:l.bool,children:l.node,before:l.node,after:l.node,styles:l.arrayOf(l.string),className:l.string,enhanced:l.bool,enhancedOverrides:l.object};var vn=En;const yn=e=>{let{children:t,...n}=e;return r.createElement(B.SV,{beforeCapture:e=>{e.setTag("location","TileErrorBoundary"),e.setExtra("isReactError",!0)},fallback:r.createElement(In,n,r.createElement(vn,null,trans("global.something_went_wrong_tile")))},t)};yn.propTypes={children:i().node};var _n=yn;function wn(){return wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wn.apply(this,arguments)}function kn(e){let{Wrapper:t=r.Fragment,children:n,...a}=e;return r.createElement(t,null,r.createElement("a",a,n))}function Nn(e){let{Wrapper:t,href:n,children:a,...l}=e;return r.createElement(t,wn({},l,{href:n}),a)}var Tn=function(e){let{href:t,openInNewTab:n=!1,styles:a,className:l,onClick:i,Wrapper:s=r.Fragment,children:o,wrapperInheritsProps:c}=e;const u=O();a=a??u.primaryButtonStyles;const d=(0,r.useRef)(null);n=n&&!fn(),t||(a=[...a.filter((e=>"disabled"!==e)),"disabled"]);const m={className:ht()("link-button react-button",a.map((e=>`react-button--style-${e}`)),l),href:t,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,onClick:i,onKeyPress:e=>{" "===e.key&&(d.current?.click(),e.preventDefault())}};return c&&m.href?r.createElement(Nn,wn({},m,{Wrapper:s,href:m.href}),o):r.createElement(kn,m,o)};function Cn(){return Cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cn.apply(this,arguments)}const Sn=r.forwardRef((function(e,t){const{padding:n="regular",title:a,titleClassName:l="",titleUrl:i,subtitle:s,subtitleClassName:o="",subtitleUrl:c,actions:u,collapsible:d,initiallyCollapsed:m,children:p,className:g,contentClassName:h="",cssStyle:f,contentCssStyle:b,required:E,backgroundImage:v,fullHeight:y,onHeaderMouseDown:_=(()=>null)}=e,w=O(),k=e.style??w.tileStyle,N="tile"===k?"":"react-tile--"+k,T=E?"react-tile--required-glow":"",C=`${h} react-tile__content--${n}`,[S,I]=(0,r.useState)(m),x=()=>{d&&I(!S)},P=r.createElement("div",{className:`react-tile ${N} ${T} ${g||""} ${v?"react-tile--with-background-image":""}`,style:{...y?{height:"100%"}:{},...f},ref:t},v&&r.createElement("div",{className:"react-tile__background-image",style:{backgroundImage:(v.url?[v.url]:v.urls)?.map((e=>`url('${e}')`)).join(", "),...v.style}}),v?.overlayStyle&&r.createElement("div",{className:"react-tile__background-image-overlay",style:v.overlayStyle}),(a||u)&&r.createElement("div",{className:`react-tile__header ${n?`react-tile__header--padding-${n}`:""} ${d?"react-tile__header--collapsible":""} ${S?"react-tile__header--collapsed":""}`,onClick:x,onMouseDownCapture:_},r.createElement("div",{className:"react-tile__header-left",style:u?{}:{width:"100%"}},d&&r.createElement(F,{styles:["unstyled"],onClick:x,className:"react-tile__collapse-icon-button"},r.createElement("span",{className:`react-tile__collapse-icon  ${S?"react-tile__collapse-icon--collapsed":""} ${s?"react-tile__collapse-icon--with-subtitle":""} zmdi zmdi-chevron-up`}),r.createElement(D,null,trans("global.toggle_visibility"))),r.createElement("div",{style:u?{}:{width:"100%"}},a&&r.createElement(R,{href:i},r.createElement("div",{className:`react-tile__title ${l} ${s?"react-tile__title--with-subtitle":""}`,style:u?{}:{width:"100%"}},a,E?` (${trans("global.required")})`:"")),s&&r.createElement(R,{href:c},r.createElement("div",{className:`react-tile__subtitle ${o}`},s)))),u&&r.createElement(U,{gap:"small"},u.map((e=>{const t=e.href?"button"===e.style?Tn:"a":"button";return r.createElement(t,{key:`${e.icon}${e.label}`,onClick:e.onClick,className:"react-tile__action"+(e.disabled?" react-tile__action--disabled":"")+(void 0!==e.style?` react-tile__action--${e.style}`:" react-tile__action--regular"),href:e.disabled?void 0:e.href,disabled:e.disabled},e.icon&&r.createElement("span",{className:`zmdi zmdi-${e.icon} ${e.spinning?"zmdi-hc-spin":""}`}),e.label&&r.createElement("span",{className:"react-tile__action-label"},e.label))})))),r.createElement("div",{hidden:S,className:"react-tile__content "+C,style:{...y?{height:"100%",boxSizing:"border-box"}:{},...b}},p));return r.createElement(_n,Cn({},e,{actions:[]}),P)}));var In=Sn;function xn(){return xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xn.apply(this,arguments)}var Pn=r.forwardRef((function(e,t){let{children:n,className:a="",position:l="center",gap:i="content-padding",style:s={},...o}=e;return r.createElement("div",xn({className:`vertical-content ${a} ${l?`vertical-content--position-${l}`:""} ${i?`vertical-content--gap-${i}`:""}`,style:s,ref:t},o),n)})),Rn="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;const An={};function Ln(e){let{url:t,fallbackUrl:n,isCustom:a,size:l,logoImgClassName:i,logoImgAltText:s,logoVerticalOffsetInPx:o=0,className:c}=e;const u=(0,r.useRef)(null),[d,m]=(0,r.useState)(!1);return Rn((()=>{l?u.current?.style.setProperty("--size",l.toString()):u.current?.style.removeProperty("--size")}),[u,l]),(0,r.useEffect)((()=>{if(a&&!(t in An)){let e=!0;return fetch(t,{method:"HEAD"}).then((n=>{e&&(m(n.redirected),An[t]=n.ok)})).catch(console.error),()=>{e=!1}}}),[a,t]),r.createElement("img",{ref:u,className:`${i||"guild-logo"} ${a&&!d?"guild-logo--custom":"guild-logo--non-custom"} ${c||""}`,src:d||!1===An[t]?n:t,alt:s||"Guild logo",onError:()=>m(!0),style:{transform:"translateY("+o+"px)"}})}function $n(e){let{amount:t,total:n,label:a}=e;a??=`${t}/${n}`;const l=t/n,i=l>=.88?"mostly-full":l>=.34?"partially-full":"barely-full";return r.createElement("div",{className:"zone-progress-bar"},r.createElement("div",{className:"zone-progress-bar__background"}),r.createElement("div",{className:`zone-progress-bar__fill zone-progress-bar__fill--${i}`,style:{width:100*t/n+"%"}}),r.createElement("div",{className:"zone-progress-bar__label"},a))}$n.propTypes={amount:i().number.isRequired,total:i().number.isRequired,label:i().string};var On=$n,zn={id:i().number.isRequired,name:i().string.isRequired,faction:i().number.isRequired,logo:i().shape(Ln.propTypes).isRequired,serverName:i().string,regionShortName:i().string,lastUpdated:i().string,zoneMetrics:i().arrayOf(i().shape({name:i().string.isRequired,bar:i().shape(On.propTypes),ranks:i().arrayOf(i().arrayOf(i().shape({label:i().string.isRequired,value:i().string.isRequired,cssClassName:i().string,icon:i().string,zoneTitle:i().string})))})),schedule:i().exact({numberOfTimeRanges:i().number,totalDuration:i().number}),specsAndPriorities:i().arrayOf(i().exact({fullType:i().string,priorityLabel:i().string})),language:i().string,activities:i().arrayOf(i().string),description:i().string,contactInformationText:i().string};function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fn.apply(this,arguments)}function Mn(e){return r.createElement(In,Fn({},e,{style:"sub-tile"}))}function Dn(e){let{isCombinedZone:t,children:n}=e;return t?r.createElement("div",{className:"recruitment-guild-search-result-zone-metrics-tile__container"},n):r.createElement(Pn,null,n)}function Un(e){let{zone:t}=e;return r.createElement(Mn,{title:t?.ranks?.length<2?t.name:null,padding:"narrow",className:"recruitment-guild-search-result-zone-metrics-tile"+(t?.ranks?.length>1?" recruitment-guild-search-result-zone-metrics-tile--combined-zone":"")},r.createElement(Dn,{isCombinedZone:t?.ranks?.length>1},t.bar&&r.createElement(On,t.bar),t.ranks.map(((e,t)=>r.createElement("div",{className:"recruitment-guild-search-result-zone-metrics-tile__ranks",key:`zones-${t}`,style:{gridTemplateColumns:Array(e.length).fill("auto").join(" ")}},e[0]?.zoneTitle&&r.createElement("div",{className:"recruitment-guild-search-result-zone-metrics-tile__zone-name"},e[0].zoneTitle),e.map((e=>r.createElement("div",{key:e.label,className:"recruitment-guild-search-result-zone-metrics-tile__rank"},r.createElement("div",null,e.icon&&r.createElement(r.Fragment,null,r.createElement("span",{className:"zmdi zmdi-run"})," "),r.createElement("span",null,e.label)),r.createElement("span",{className:"recruitment-guild-search-result-zone-metrics-tile__rank-value "+e.cssClassName},e.value)))))))))}Dn.propTypes={isCombinedZone:i().bool.isRequired,children:i().node},Un.propTypes={zone:i().shape({name:i().string.isRequired,bar:i().shape(On.propTypes),ranks:i().arrayOf(i().arrayOf(i().shape({label:i().string.isRequired,value:i().string.isRequired,cssClassName:i().string,icon:i().string,zoneTitle:i().string})))})};var Bn=Un;function Vn(e){let{name:t,faction:n,serverName:a,regionShortName:l}=e;return r.createElement(U,{className:"guild-name-server-region-title",gap:"content-padding"},r.createElement("div",{className:`guild-name-server-region-title__name faction-${n}`},t),r.createElement(U,{gap:"content-padding"},r.createElement("div",{className:"guild-name-server-region-title__server"},a),r.createElement("div",{className:"guild-name-server-region-title__region"},l)))}Vn.propTypes={name:i().string.isRequired,faction:i().number.isRequired,serverName:i().string,regionShortName:i().string};var qn=Vn,jn=function(e){const[t,n]=(0,r.useState)((()=>{const{width:t,height:n}=e.current?e.current.getBoundingClientRect():{width:0,height:0};return{width:t,height:n}})),a=(0,r.useRef)(null);return(0,r.useLayoutEffect)((()=>{if(!e.current)return;const t=e=>{let{width:t,height:r}=e;a.current||(a.current=requestAnimationFrame((()=>{n((e=>e.height!==r||e.width!==t?{height:r,width:t}:e)),a.current=null})))};if("function"==typeof ResizeObserver){const n=new ResizeObserver((e=>{0!==e.length&&t(e[0].target.getBoundingClientRect())}));return n.observe(e.current),()=>{n.disconnect(),a.current&&cancelAnimationFrame(a.current)}}const r=()=>{e.current&&t(e.current.getBoundingClientRect())};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),a.current&&cancelAnimationFrame(a.current)}}),[e]),t},Hn=function(e){return e.length>1?e.slice(0,-1).join(", ")+" & "+e[e.length-1]:e.join(", ")};function Gn(e){let{markdown:t,doNotCollapseIfCharacterCountLessThan:n,WrapperWhenShown:a=(e=>{let{children:t}=e;return r.createElement(r.Fragment,null,t)})}=e;const l=t?.trim().split("\n"),i=l?.[0],s=!!n&&t.length<n,[o,c]=(0,r.useState)(s);return t?.length&&t?.length>0?r.createElement("div",{className:"collapsible-markdown"},r.createElement("div",{className:"collapsible-markdown__text "+(o?"collapsible-markdown__text--full-description":"collapsible-markdown__text--only-leading-paragraph"),onClick:()=>{o||c(!o)}},o?r.createElement(a,null,r.createElement(vn,null,t)):i),!s&&r.createElement("div",{className:"collapsible-markdown__control  "+(o?"collapsible-markdown__control--full-description":"collapsible-markdown__control--only-leading-paragraph")},r.createElement(F,{styles:["link"],onClick:()=>c(!o)},o?trans("global.collapse")+"...":trans("global.read_more")))):null}Gn.propTypes={markdown:i().string.isRequired,doNotCollapseIfCharacterCountLessThan:i().number,WrapperWhenShown:i().func};var Wn=Gn;const Kn={days:i().arrayOf(i().exact({dayName:i().string,timeRanges:i().arrayOf(i().exact({startTime:i().number,duration:i().number}))}))};var Zn=function(e){let t=Math.floor(e/60),n=e-60*t;return t<10&&(t="0"+t),n<10&&(n="0"+n),`${t}:${n}`},Yn=function(e){if(void 0===e)return;let t=Math.floor(e/60),n=e-60*t;return 0===n?trans("schedule.x_hours",{x:t}):(n<10&&(n="0"+n),trans("schedule.hours_and_minutes",{hours:t,minutes:n}))};function Jn(e){let{days:t}=e;return r.createElement("div",{className:"schedule-columns"},t.map((e=>r.createElement("div",{className:"schedule-columns__day",key:e.dayName},r.createElement("div",{className:"schedule-columns__day-name"},e.dayName),r.createElement("div",{className:"schedule-columns__time-ranges"},e.timeRanges.map(((e,t)=>r.createElement("div",{key:t,className:"schedule-columns__time-range"},r.createElement("span",{className:"schedule-columns__time-range-start-label"},trans("schedule.start")),r.createElement("div",{className:"schedule-columns__time-range-start-container"},r.createElement("span",{className:"schedule-columns__time-range-start"},Zn(e.startTime))),r.createElement("span",{className:"schedule-columns__time-range-duration-label"},trans("reports.duration")),r.createElement("div",{className:"schedule-columns__time-range-duration-container"},r.createElement("span",{className:"schedule-columns__time-range-duration"},Yn(e.duration)))))))))))}Jn.propTypes={...Kn};var Xn=Jn;function Qn(e){let{children:t}=e;return r.createElement("table",{className:"dark-striped-table"},t)}Qn.propTypes={children:i().node.isRequired};var ea=Qn;function ta(e){let{days:t}=e;const n=[];return t.forEach((e=>{e.timeRanges.forEach((t=>{n.push({dayName:e.dayName,startTime:t.startTime,duration:t.duration})}))})),r.createElement("div",{className:"schedule-table"},r.createElement(ea,null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Day"),r.createElement("th",null,"Start"),r.createElement("th",null,"Duration"))),r.createElement("tbody",null,n.map(((e,t)=>r.createElement("tr",{key:t},r.createElement("td",null,e.dayName),r.createElement("td",null,Zn(e.startTime)),r.createElement("td",null,Yn(e.duration))))))))}ta.propTypes={...Kn};var na=ta,aa=n(80424);const ra=["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Tripoli","Africa/Tunis","Africa/Windhoek","America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Bahia","America/Bahia_Banderas","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Costa_Rica","America/Creston","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Fort_Nelson","America/Fortaleza","America/Glace_Bay","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Inuvik","America/Iqaluit","America/Jamaica","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Kralendijk","America/La_Paz","America/Lima","America/Los_Angeles","America/Lower_Princes","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Menominee","America/Merida","America/Metlakatla","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Nome","America/Noronha","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Nuuk","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Punta_Arenas","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Sitka","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/Syowa","Antarctica/Troll","Antarctica/Vostok","Arctic/Longyearbyen","Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Atyrau","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Barnaul","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Chita","Asia/Choibalsan","Asia/Colombo","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Famagusta","Asia/Gaza","Asia/Hebron","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kathmandu","Asia/Khandyga","Asia/Kolkata","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qostanay","Asia/Qyzylorda","Asia/Riyadh","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Srednekolymsk","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Thimphu","Asia/Tokyo","Asia/Tomsk","Asia/Ulaanbaatar","Asia/Urumqi","Asia/Ust-Nera","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yangon","Asia/Yekaterinburg","Asia/Yerevan","Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faroe","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/St_Helena","Atlantic/Stanley","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/Perth","Australia/Sydney","Europe/Amsterdam","Europe/Andorra","Europe/Astrakhan","Europe/Athens","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Busingen","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Kirov","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Saratov","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Ulyanovsk","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich","Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion","Pacific/Apia","Pacific/Auckland","Pacific/Bougainville","Pacific/Chatham","Pacific/Chuuk","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Pohnpei","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Wake","Pacific/Wallis","UTC"],la=(0,aa.Z)().filter((e=>ra.includes(e.name))).map((e=>({...e,getShortenedName:()=>(e=>{const t=e.split("-");return e.startsWith("-")?"-"+t[1].trim():t[0].trim()})(e.currentTimeFormat)})));function ia(e){let t=la.find((t=>t.name===e||t.group.includes(e)));return t||(t=la.find((e=>"GMT"===e.abbreviation))),t}function sa(){let e=u.get("currentUserTimeZoneName");return e||(e=Intl?.DateTimeFormat()?.resolvedOptions()?.timeZone),"Asia/Calcutta"===e&&(e="Asia/Kolkata"),ia(e)}const oa=(0,r.createContext)(),ca=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(sa());return(0,r.useEffect)((()=>{n?.name&&u.set("currentUserTimeZoneName",n.name)}),[n]),r.createElement(oa.Provider,{value:[n,a]},t)};ca.propTypes={children:i().node};var ua=()=>(0,r.useContext)(oa),da=function(){return[trans("schedule.monday_abbr"),trans("schedule.tuesday_abbr"),trans("schedule.wednesday_abbr"),trans("schedule.thursday_abbr"),trans("schedule.friday_abbr"),trans("schedule.saturday_abbr"),trans("schedule.sunday_abbr")]},ma=n(14504);function pa(e){let{displayLabel:t,editingLabel:n,timeZones:a,value:l,onChange:i,disabled:s=!1}=e;const[o,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)([]);(0,r.useEffect)((()=>{d(a.map((e=>({value:e.name,label:`${e.currentTimeFormat} (${e.abbreviation})`}))))}),[a]);const[m,p]=(0,r.useState)();return(0,r.useEffect)((()=>{const e=u.find((e=>e.value===l?.name));p(e)}),[u,l]),(0,r.useEffect)((()=>{m&&m?.value!==l?.name&&i(ia(m.value))}),[i,m,l]),r.createElement("div",{className:"time-zone-selector"},o&&!s?r.createElement(r.Fragment,null,r.createElement("label",{htmlFor:"time-zone",className:"time-zone-selector__label"},n,":"),r.createElement("div",{className:"time-zone-selector__select"},r.createElement(ma.ZP,{name:"time-zone",value:m,onChange:p,options:u,menuPortalTarget:document.body,isDisabled:s,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})),r.createElement(F,{onClick:()=>c(!1)},trans("global.done"))):r.createElement(r.Fragment,null,r.createElement("span",null,t," ",r.createElement(F,{disabled:s,onClick:()=>c(!0),styles:["link"]},trans("schedule.change_time_zone"),"."))))}pa.propTypes={displayLabel:i().string,editingLabel:i().string,timeZones:i().arrayOf(i().shape({name:i().string.isRequired})),value:i().shape({name:i().string.isRequired}),onChange:i().func,disabled:i().bool};var ga=pa;function ha(e){let{displayLabel:t}=e;const[n,a]=ua();return t??=trans("schedule.current_time_zone_is_set",{timeZone:n?.getShortenedName()}),r.createElement(ga,{displayLabel:t,editingLabel:trans("schedule.set_preferred_time_zone"),timeZones:la,value:n,onChange:a})}ha.propTypes={displayLabel:i().string};var fa=ha,ba=function(){return[trans("schedule.monday_initial"),trans("schedule.tuesday_initial"),trans("schedule.wednesday_initial"),trans("schedule.thursday_initial"),trans("schedule.friday_initial"),trans("schedule.saturday_initial"),trans("schedule.sunday_initial")]};const Ea=10080;function va(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[n,a]=(0,r.useState)([]),[l]=ua();return(0,r.useLayoutEffect)((()=>{if(!l||!e?.timeRanges?.length)return;const n=e.timeRanges.map((e=>({startTime:(e.startTime+l.currentTimeOffsetInMinutes+Ea)%Ea,duration:e.duration}))).sort(((e,t)=>e.startTime-t.startTime)),r=da(),i=ba(),s=r.map(((e,t)=>({dayName:e,dayInitial:i[t],timeRanges:n.filter((e=>e.startTime>=1440*t&&e.startTime<1440*(t+1))).map((e=>({startTime:e.startTime-1440*t,duration:e.duration})))}))).filter((e=>t||e.timeRanges.length));a(s)}),[t,e,l]),n}function ya(e){let{schedule:t,label:n,showUserTimeZoneSelector:a}=e;const[l]=ua(),i=va(t),s=ia(t.timeZoneName).getShortenedName(),o=(0,r.useRef)(),c=jn(o);return r.createElement(Pn,{className:"schedule"},n&&r.createElement(vn,null,n),a&&r.createElement(fa,{displayLabel:`${trans("schedule.schedule_time_zone_is_set",{timeZone:s})} ${trans("schedule.current_time_zone_is_set",{timeZone:l.getShortenedName()})}`}),r.createElement("div",{ref:o},r.createElement("div",{hidden:c.width<600},r.createElement(Xn,{days:i})),r.createElement("div",{hidden:c.width>=600},r.createElement(na,{days:i}))))}ya.propTypes={schedule:i().exact({timeZoneName:i().string.isRequired,timeRanges:i().arrayOf(i().exact({startTime:i().number,relativeStartTime:i().number,duration:i().number}))}),label:i().string,showUserTimeZoneSelector:i().bool};var _a=ya;function wa(e){let{schedule:t}=e;const n=va(t,!0);return r.createElement("div",{className:"schedule-boxes"},n.map(((e,t)=>e.timeRanges.length>0?r.createElement(Re,{key:t,content:r.createElement(Pn,{gap:"tiny"},r.createElement(vn,null,`**${moment.weekdays(t+1)}**`),e.timeRanges.map(((e,t)=>r.createElement("span",{key:t},Zn(e.startTime)," (",Yn(e.duration),")")))),triggerProps:{className:"schedule-boxes__box "+(e.timeRanges.length?"schedule-boxes__box--available":"")}},e.dayInitial):r.createElement("div",{key:t,className:"schedule-boxes__box "+(e.timeRanges.length?"schedule-boxes__box--available":"")},e.dayInitial))))}wa.propTypes={schedule:i().object};var ka=wa;function Na(e){let{forwardedRef:t,href:n,Icon:a,Title:l,tilesStyle:i,Tiles:s,languages:o,activities:c,buttonLabel:u,description:d,contactInformationText:m,lastUpdated:p,schedulePreferences:g=null,schedule:h=null}=e;return r.createElement("div",{ref:t,className:"recruitment-search-result"},r.createElement(P,{href:n,openInNewTab:!0,tabIndex:-1},r.createElement("div",{className:"recruitment-search-result__top"},r.createElement("div",{className:"recruitment-search-result__logo"},r.createElement(a,null)),r.createElement("div",{className:"recruitment-search-result__title-and-tiles"},r.createElement("div",{className:"recruitment-search-result__title"},r.createElement(l,null),r.createElement("div",{className:"recruitment-search-result__last-updated"},p&&r.createElement(vn,null,`*${trans("global.last_updated_label")}: ${moment(p).fromNow()}*`))),r.createElement("div",{className:"recruitment-search-result__tiles",style:i},r.createElement(s,null))))),r.createElement("div",{className:"recruitment-search-result__bottom"},r.createElement("div",{className:"recruitment-search-result__more-info"},r.createElement(P,{href:n,openInNewTab:!0,tabIndex:-1},r.createElement("div",{className:"recruitment-search-result__main-recruitment-info"},""!==g&&h?r.createElement("div",{className:"recruitment-search-result__availability"},r.createElement("div",null,r.createElement("strong",null,`${trans("schedule.availability")}: `),g),r.createElement(ka,{schedule:h})):null,r.createElement("div",{className:"recruitment-search-result__language-and-activities"},r.createElement("div",{className:"recruitment-search-result__language"},r.createElement("strong",null,1===o.length?trans("recruitment.language"):trans("recruitment.languages"),":")," ",Hn(o)),c?.length>0&&r.createElement("div",{className:"recruitment-search-result__activities"},r.createElement("strong",null,trans("recruitment.activities"),":")," ",Hn(c))),m?.length>0&&r.createElement("div",{className:"recruitment-search-result__contact-information"},r.createElement("strong",null,trans("recruitment.contact"),":")," ",m))),r.createElement(Wn,{markdown:d,WrapperWhenShown:e=>{let{children:t}=e;return r.createElement(Mn,null,t)}})),r.createElement("div",{className:"recruitment-search-result__view-guild"},r.createElement(P,{href:n,openInNewTab:!0,tabIndex:-1},r.createElement("div",null)),r.createElement("div",null,r.createElement(Tn,{href:n,openInNewTab:!0},u)))))}Na.propTypes={forwardedRef:i().object,href:i().string.isRequired,Icon:i().func.isRequired,Title:i().func.isRequired,tilesStyle:i().object,Tiles:i().func.isRequired,languages:i().arrayOf(i().string).isRequired,activities:i().arrayOf(i().string),buttonLabel:i().string.isRequired,description:i().string,contactInformationText:i().string,lastUpdated:i().string,schedulePreferences:i().string,schedule:i().object};var Ta=Na;function Ca(e){let{schedule:t}=e;return r.createElement(Mn,{title:trans("schedule.schedule"),padding:"narrow",className:"recruitment-guild-search-result-schedule-tile"},r.createElement("ul",{className:"recruitment-guild-search-result-schedule-tile__list"},r.createElement("li",null,trans("schedule.x_times_a_week",{x:t.numberOfTimeRanges})),r.createElement("li",null,trans("schedule.x_total",{x:Yn(t.totalDuration)}))))}Ca.propTypes={schedule:i().exact({numberOfTimeRanges:i().number,totalDuration:i().number})};var Sa=Ca;function Ia(e){let{specsAndLabels:t}=e;return r.createElement(Mn,{title:trans("recruitment.recruitment"),padding:"narrow",className:"recruitment-guild-search-result-recruitment-tile"},t.slice(0,2).map((e=>r.createElement(U,{key:e.fullType},r.createElement(De,{type:e.fullType},r.createElement("span",{className:"recruitment-guild-search-result-recruitment-tile__spec-priority"},e.label))))),t.length>2&&r.createElement("div",{className:"recruitment-guild-search-result-recruitment-tile__more-specs"},"+",t.length-2," more..."))}Ia.propTypes={specsAndLabels:i().arrayOf(i().exact({fullType:i().string,priorityLabel:i().string}))};var xa=Ia;function Pa(){return Pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pa.apply(this,arguments)}const Ra=(0,r.forwardRef)(((e,t)=>{let{id:n,name:a,faction:l,logo:i,serverName:s,regionShortName:o,zoneMetrics:c,schedule:u,specsAndLabels:d,language:m,activities:p,description:g,contactInformationText:h,lastUpdated:f}=e;const b=(0,r.useRef)(),E=jn(t??b),[v,y]=(0,r.useState)(E.width<900);(0,r.useEffect)((()=>{y(E.width<900)}),[E]);const[_,w]=(0,r.useState)(E.width<600);(0,r.useEffect)((()=>{w(E.width<600)}),[E]);const[k,N]=(0,r.useState)(0);return(0,r.useLayoutEffect)((()=>{N(_?1:v?c?.length??0:(c?.length??0)+(u?1:0)+(d?.length?1:0))}),[_,v,c,u,d]),r.createElement(Ta,{forwardedRef:t??b,href:`/guild/id/${n}`,activities:p,languages:[m],description:g,contactInformationText:h,lastUpdated:f,buttonLabel:trans("guilds.view_guild"),Icon:()=>r.createElement(Ln,Pa({},i,{size:140})),Tiles:()=>r.createElement(r.Fragment,null,c.map((e=>r.createElement(Bn,{key:e.name,zone:e}))),u&&(!v||!c?.length)&&r.createElement(Sa,{schedule:u}),d?.length>0&&!v&&r.createElement(xa,{specsAndLabels:d})),tilesStyle:{gridTemplateColumns:Array(k).fill("auto").join(" ")},Title:()=>r.createElement(qn,{name:a,serverName:s,regionShortName:o,faction:l})})}));Ra.propTypes=zn;var Aa=Ra;function La(e){let{imageUrl:t,content:n,pageUrl:a,isGuildLookingForPlayersEnabled:l}=e;return r.createElement("div",{className:`recruitment-entry-point-tile__content ${t?"recruitment-entry-point-tile__content--with-image":""} ${l?"recruitment-entry-point-tile__content--small-gap":""}`},t&&r.createElement("div",{className:"recruitment-entry-point-tile__image-container"},r.createElement(P,{href:a,tabIndex:-1},r.createElement("img",{className:"recruitment-entry-point-tile__image",src:t,alt:trans("recruitment.recruitment")}))),r.createElement("div",{className:"recruitment-entry-point-tile__content-and-buttons"},n,r.createElement(U,{className:"recruitment-entry-point-tile__buttons",gap:"large"},r.createElement(Tn,{href:a},trans("global.get_started")))))}function $a(e){let{playerLookingForGuildImageUrl:t,playerLookingForGuildBackgroundImageUrl:n,isGuildLookingForPlayersEnabled:a,guildLookingForPlayersImageUrl:l,guildLookingForPlayersBackgroundImageUrl:i,featuredGuildSearchResults:s}=e;const[o,c]=(0,r.useState)(),[u,m]=d("RecruitmentEntryPointTile.isHighlighted",!0);return r.createElement(In,{className:"recruitment-entry-point-tile "+(u&&a?"react-tile--highlight-glow":""),title:trans("recruitment.recruitment"),titleUrl:"/recruitment",padding:"narrow"},r.createElement("div",{onMouseEnter:u&&a?()=>m(!1):void 0},r.createElement(Pn,null,r.createElement("div",{className:"recruitment-entry-point-tile__sub-tiles "+(a?"recruitment-entry-point-tile__sub-tiles--two-column":"")},r.createElement(Mn,{title:trans("recruitment.im_a_player_looking_for_a_guild"),titleUrl:"/recruitment/player-looking-for-guilds",backgroundImage:n?{url:n,style:{filter:"blur(6px) brightness(0.85) contrast(1) saturate(1.5)"}}:void 0},r.createElement(La,{imageUrl:t,content:r.createElement(Pn,{gap:a?"none":"content-padding"},r.createElement(P,{href:"/recruitment/player-looking-for-guilds",tabIndex:-1},r.createElement(pe,null,trans(a?"recruitment.you_can_search_for_guilds_by_criteria_short":"recruitment.you_can_search_for_guilds_by_criteria")," ",r.createElement("span",{className:"recruitment-entry-point-tile__featured-guilds-label"},trans("recruitment.look_at_featured_guilds_of_the_day"),":"))),s?.length>1&&r.createElement("div",{className:"recruitment-entry-point-tile__featured-guilds"},r.createElement("div",{className:"recruitment-entry-point-tile__featured-guild-buttons"},s.map((e=>r.createElement(F,{key:e.id,className:`faction-${e.faction} recruitment-entry-point-tile__featured-guild-button`,onClick:()=>c(e),styles:["unstyled"]},e.name)))))),pageUrl:"/recruitment/player-looking-for-guilds",isGuildLookingForPlayersEnabled:a})),a&&r.createElement(Mn,{title:trans("recruitment.we_are_a_guild_looking_for_players"),titleUrl:"/recruitment/guild-looking-for-players",backgroundImage:i?{url:i,style:{filter:"blur(6px) brightness(0.85) contrast(1) saturate(1.5)"}}:void 0},r.createElement(La,{imageUrl:l,content:r.createElement(Pn,null,r.createElement(P,{href:"/recruitment/guild-looking-for-players",tabIndex:-1},r.createElement(vn,null,trans("recruitment.you_can_search_for_players_by_criteria")))),pageUrl:"/recruitment/guild-looking-for-players",isGuildLookingForPlayersEnabled:a}))),o&&r.createElement(Mn,{title:trans("recruitment.previewing_name",{name:o.name}),actions:[{icon:"close",label:trans("global.close"),onClick:()=>c()}]},r.createElement(Aa,o)))))}La.propTypes={imageUrl:i().string,content:i().node.isRequired,pageUrl:i().string.isRequired,isGuildLookingForPlayersEnabled:i().bool.isRequired},$a.propTypes={playerLookingForGuildImageUrl:i().string,playerLookingForGuildBackgroundImageUrl:i().string,isGuildLookingForPlayersEnabled:i().bool.isRequired,guildLookingForPlayersImageUrl:i().string,guildLookingForPlayersBackgroundImageUrl:i().string,featuredGuildSearchResults:i().arrayOf(i().shape(zn))};var Oa=$a;function za(e,t,n){const a=new URLSearchParams(e).get(t);return!a&&n?n:a}var Fa=function(e,t){const n=(0,s.TH)(),[a,l]=(0,r.useState)(za(n.search,e,t));return(0,r.useEffect)((()=>{const r=za(n.search,e,t);a!==r&&l(r)}),[t,e,n,a]),a};const Ma=(0,r.createContext)(null),Da=e=>{let{zoneId:t,competitionId:n,difficulty:a,guildId:l,guildIds:i,children:s,synchronized:o,onLoad:c,refreshOnlyWhenVisible:u=!1}=e;const[d,m]=(0,r.useState)(null),[p,g]=(0,r.useState)(""),[h,f]=(0,r.useState)(null),b=(()=>{const[e,t]=(0,r.useState)("hidden"!==document.visibilityState),n=(0,r.useCallback)((()=>{t("hidden"!==document.visibilityState)}),[]);return(0,r.useEffect)((()=>(document.addEventListener("visibilitychange",n),()=>document.removeEventListener("visibilitychange",n))),[n]),e})(),{url:E,urlKey:v,refreshInterval:y}=(e=>{let{competitionId:t,zoneId:n,difficulty:a,guildId:r,guildIds:l,guildHashes:i}=e;const s=Fa("region"),o=Fa("subregion"),c=Fa("server"),u=Fa("difficulty"),d=Fa("size"),m=Fa("guild"),p=Fa("guilds"),g=Fa("competition"),h=Fa("skipCache"),f=Fa("disableGuestMode"),b=Fa("refreshInterval"),E=new URLSearchParams;Object.entries({region:s,subregion:o,server:c,difficulty:a??u,size:d,guild:r??m,guilds:l?.join(",")??p,competition:t??g,skipCache:h,disableGuestMode:f,refreshInterval:b}).forEach((e=>{let[t,n]=e;n&&E.append(t,`${n}`)}));const v=E.toString();i.length&&E.append("guildHashes",i);const y=E.toString(),_=`/zone/race/content/${t?"latest":n}`;return{url:`${_}${y?`?${y}`:""}`,urlKey:`${_}?${v}`,refreshInterval:b?1e3*Number(b):null}})({zoneId:t,competitionId:n,difficulty:a,guildId:l,guildIds:i,guildHashes:p}),_=y??6e4,[{data:w,status:k},N]=$t(),[T,C]=(0,r.useState)(!0);(0,r.useEffect)((()=>{C(!0),N({url:E,headers:{Accept:"application/json"}})}),[N,v]),(0,r.useEffect)((()=>{if(u&&!b)return;const e=setTimeout((()=>{N({url:E,headers:{Accept:"application/json"}})}),((e,t,n)=>{if(null===e)return t;const a=Date.now(),r=Math.max(e,a+1)-a;return n?(Math.round(a/t)+1)*t-a:r})(h,_,o));return()=>clearTimeout(e)}),[N,u,o,b,h,E,_]),(0,r.useEffect)((()=>{d&&g(d.guilds.map((e=>e.reportTimestampsUsedHash)).filter((e=>void 0!==e)).sort(((e,t)=>e.localeCompare(t))).join(",")||"")}),[d]),(0,r.useEffect)((()=>{(k.isSuccess||k.isError||k.isIdle)&&(k.isSuccess&&!k.isNotModified&&w&&m((e=>(e=>{let{current:t,updated:n}=e;return t?{...n,guilds:(a=t.guilds,r=n.guilds,r.map((e=>{if(e.isFullUpdate)return e;const t=a.find((t=>t.id===e.id));return t?{...e,encounters:t.encounters}:(console.error(`Received partial update for a guild, ${e.id}, we don't have existing data for.`),null)})).filter((e=>null!=e)))}:n;var a,r})({current:e,updated:w}))),c?.())}),[k,w,c]),(0,r.useEffect)((()=>{(k.isSuccess||k.isError)&&(C(!1),f(Date.now()+_))}),[k,_]);const S={progressRace:d,progressRaceStatus:k,isLoadingNewProgressRaceParameters:T,timeBetweenProgressRaceRefreshes:_,timeUntilNextUpdate:h};return r.createElement(Ma.Provider,{value:S},s)},Ua=()=>{const e=(0,r.useContext)(Ma);if(null===e)throw new Error("useProgressRace must be used within a ProgressRaceContext");return e};var Ba=Ua;const Va=e=>{const{progressRace:t}=Ua();return t?.encounters?.find((t=>t.id===e))??null};function qa(e,t){return`linear-gradient(180deg, ${e} 0%, ${e} 50%, ${t} 50%, ${t} 100%)`}var ja=function(e){let t,n,{backgroundImageUrl:a,logoImageUrl:l,logoIsRounded:i,isSlim:s,isFloating:o,faction:c,textPartOne:u,textPartTwo:d,textPartOneTopColor:m,textPartOneBottomColor:p,textPartTwoTopColor:g,textPartTwoBottomColor:h,href:f,logoImageFallbackUrl:b,partTwoOverflowCutUnder380px:E="",isFooterSize:v=!1,logoVerticalOffsetInPx:y=0}=e;m?.length&&p?.length&&(t=qa(m,p)),g?.length&&h?.length&&(n=qa(g,h));let _=r.createElement("span",null,d);return d&&E?.length>0&&(_=r.createElement(r.Fragment,null,r.createElement("span",null,d?.replaceAll(E,"")),r.createElement("span",{className:"header-title__text-two--responsive"},E))),r.createElement(R,{href:f},r.createElement("div",{className:`header-title ${s?"header-title--slim":""} ${o?"header-title--floating":""} ${o||a?"":"header-title--no-border"} ${v?"header-title--footer":""}`,style:!o&&a?{backgroundImage:`url(${a})`}:{}},r.createElement(U,{className:`header-title__content ${void 0!==c?`header-title__content--faction-${c}`:""} ${o?"header-title__content--floating":""}`,gap:s?"tiny":o||v?"small":"large"},r.createElement("div",{className:"header-title__logo"},r.createElement(Ln,{url:l??"",fallbackUrl:b??l??"",isCustom:i,logoVerticalOffsetInPx:y??0,logoImgClassName:`header-title__logo-image ${s?"header-title__logo-image--slim":""} ${o?"header-title__logo-image--floating":""}\n              ${!v&&!o||u&&u.length>0||d&&d.length>0?"":"header-title__logo-image--footer-image-only"}`})),r.createElement("div",{className:`header-title__text ${s?"header-title__text--slim":""} ${o?"header-title__text--floating":""}`},r.createElement(U,{className:"header-title__text-top",gap:"small"},r.createElement("div",{className:"header-title__text-one",style:t?{background:t,backgroundClip:"text",WebkitBackgroundClip:"text"}:{}},u," ",r.createElement("span",{className:"header-title__text-two "+(u&&u.length>0?"":" header-title__text-two--with-padding"),style:n?{background:n,backgroundClip:"text",WebkitBackgroundClip:"text"}:{}},_)))))))};const Ha={position:"absolute",inset:0};function Ga(e){let{backgroundImageUrl:t,height:n}=e;return r.createElement(In,{backgroundImage:{url:t,style:{filter:"blur(3px) contrast(1.2) brightness(0.8)",backgroundPosition:"center"}},className:"race-is-near-tile",contentCssStyle:Ha,cssStyle:{height:n}},r.createElement(Pn,{className:"race-is-near-tile__content"},r.createElement("div",{className:"race-is-near-tile__race-title"},r.createElement("span",{className:"race-is-near-tile__race-title-text"},trans("progress-race.race_is_near"))),r.createElement("div",{className:"race-is-near-tile__subtitle"},r.createElement("span",{className:"race-is-near-tile__subtitle-line"},trans("progress-race.progress_data_will_show_here")),r.createElement("span",{className:"race-is-near-tile__subtitle-line"},trans("progress-race.when_a_guild_first_logs")))))}Ga.propTypes={backgroundImageUrl:i().string.isRequired,height:i().number};var Wa=Ga;const Ka={758387:"1024"};function Za(e){return void 0!==Ka[e]}Object.freeze(Ka);var Ya=function(e){return e.map((e=>e.players)).reduce(((e,t)=>e.concat(t)),[])},Ja=function(e){const t=Ya(e).filter((e=>e.itemLevel));return 0===t.length?null:Math.round(10*t.reduce(((e,t)=>e+t.itemLevel),0)/t.length)/10};const Xa=(0,r.createContext)(null);var Qa=()=>(0,r.useContext)(Xa);function er(e){let{name:t,server:n,type:a,fullType:l,itemLevel:i}=e;const s=Qa(),o=n&&s?.shortName?`/character/${s.shortName}/${n}/${t}`:void 0;return r.createElement(R,{href:o},r.createElement("div",{className:"composition-player-name"},r.createElement("div",{className:"composition-player-name__icon"},r.createElement(De,{type:l,alt:l},r.createElement(U,null,r.createElement("span",{className:a},t),r.createElement("div",{className:"composition-player-name__item-level"},i&&r.createElement(c,null,i)))))))}er.propTypes={name:i().string.isRequired,server:i().string,type:i().string.isRequired,fullType:i().string.isRequired,itemLevel:i().number};var tr=er,nr=function(e,t){const n=[];for(let a=0;a<e.length;a+=t)n.push(e.slice(a,a+t));return n};function ar(){return ar=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ar.apply(this,arguments)}function rr(e){let{name:t,maxNumberOfColumns:n=1,players:a}=e;const l=a.length,i=l>10?Math.max(10,Math.ceil(l/n)):10,s=nr(a,i);return r.createElement("div",{className:"composition-players-in-role"},r.createElement("div",{className:"composition-players-in-role__role"},r.createElement("span",null,t),r.createElement(c,null,a.length)),r.createElement("div",{className:"composition-players-in-role__columns"},s.map(((e,t)=>r.createElement("div",{key:t,className:"composition-players-in-role__players"},e.map((e=>r.createElement(tr,ar({key:`${e.name}-${e.server}`},e)))))))))}rr.propTypes={name:i().string.isRequired,maxNumberOfColumns:i().number,players:i().arrayOf(i().shape({name:i().string.isRequired,server:i().string}))};var lr=rr;function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ir.apply(this,arguments)}function sr(e){let{roles:t}=e;return r.createElement("div",{className:"composition"},t.map((e=>r.createElement(lr,ir({key:e.name},e)))))}sr.propTypes={roles:i().arrayOf(i().shape({name:i().string.isRequired}))};var or=sr;const cr=i().arrayOf(i().exact({reportCode:i().string,fightId:i().number,reportIsPrivate:i().bool,startTime:i().number,endTime:i().number,duration:i().number,fightPercentage:i().number,bestPercentForDisplay:i().string,lastPhase:i().shape({number:i().number,isIntermission:i().bool,index:i().number})})),ur=i().shape({id:i().number.isRequired,name:i().string.isRequired,shortName:i().string.isRequired,backgroundImageUrl:i().string.isRequired,isKilled:i().bool,showStats:i().bool,bestPercent:i().number,bestPercentForDisplay:i().string,pullCount:i().number,composition:i().shape(or.propTypes),perPull:cr,bestPhaseIndex:i().number}),dr=i().arrayOf(ur),mr=i().shape({id:i().number.isRequired,name:i().string.isRequired,faction:i().number,logoImageUrl:i().string.isRequired,logoImageIsCustom:i().bool.isRequired,logoImageFallbackUrl:i().string.isRequired,streamChannel:i().string,rank:i().number,killedCount:i().number.isRequired,rankCssClass:i().string.isRequired,encounters:dr,currentEncounterId:i().number,reportTimestampsUsedHash:i().string.isRequired,isFullUpdate:i().bool.isRequired}),pr=i().shape({index:i().number,name:i().string,isIntermission:i().bool}),gr=i().shape({id:i().number,phases:i().arrayOf(pr)}),hr=i().shape({type:i().string.isRequired,timestamp:i().number.isRequired,guildId:i().number,encounterId:i().number.isRequired,pullCount:i().number,rank:i().number,rankCssClass:i().string.isRequired,finishedTheRaceOnThisEncounter:i().bool.isRequired}),fr=i().shape({type:i().string.isRequired,timestamp:i().number.isRequired,body:i().string.isRequired,pinned:i().bool,guildIds:i().arrayOf(i().number).isRequired,encounterIds:i().arrayOf(i().number).isRequired}),br=i().shape({id:i().number,name:i().string.isRequired,nameCssClass:i().string,logoImageUrl:i().string,logoImageIsCustom:i().bool,logoImageFallbackUrl:i().string.isRequired,streamChannel:i().string,isInRace:i().bool}),Er=i().shape({id:i().number.isRequired,name:i().string.isRequired,iconUrl:i().string.isRequired}),vr=i().shape({lines:i().arrayOf(i().oneOfType([hr,fr])).isRequired,guilds:i().arrayOf(br),encounters:i().arrayOf(Er)}),yr={rank:i().number,rankCssClass:i().string.isRequired,guildId:i().number,guildName:i().string.isRequired,guildNameCssClass:i().string.isRequired,guildLogoImageUrl:i().string,guildLogoImageIsCustom:i().bool,isStreaming:i().bool.isRequired,twitchIconImageUrl:i().string.isRequired,bosses:i().arrayOf(i().shape({encounterId:i().number.isRequired,iconImageUrl:i().string.isRequired,isKilled:i().bool.isRequired})),currentBossName:i().string.isRequired,showStats:i().bool.isRequired,currentBossPercent:i().number,currentBossPercentForDisplay:i().string,currentBossPulls:i().number,backgroundImageUrl:i().string.isRequired,backgroundImageFallbackUrl:i().string,transparentImageUrl:i().string,killedCount:i().number.isRequired,composition:i().shape(or.propTypes),baseSize:i().number,showNoPullsText:i().bool,showNoStatsText:i().bool,guildLogoImageFallbackUrl:i().string,progressSuffix:i().string};let _r=function(e){return e[e.Latest=0]="Latest",e[e.Best=1]="Best",e}({});const wr={DefaultIcons:"defaultIcons",IconsAsBackground:"iconsAsBackground"};Object.freeze(wr);const kr={NoIcons:"noIcons",IconOfLastDefeatedEncounter:"iconOfLastDefeatedEncounter",IconOfCurrentEncounter:"iconOfCurrentEncounter",IconsOfAllDefeatedEncounters:"iconsOfAllDefeatedEncounters",IconsOfAllDefeatedEncountersAndCurrentEncounter:"iconsOfAllDefeatedEncountersAndCurrentEncounter"};Object.freeze(kr);const Nr={v1:"v1",v2:"v2"};function Tr(e){let{guilds:t,numberOfGuilds:n=10,guildIdToHighlight:a,isStyled:l=!0,includeHeader:i=!0,includeGuildLogo:s=!0,encounterIconFormat:o=kr.IconsOfAllDefeatedEncountersAndCurrentEncounter,guildIconFormat:c=wr.DefaultIcons,showPullCountOnEncounterIcons:u=!1,includePullsColumn:d=!0,includeBestPercentColumn:m=!0,includeGearColumn:p=!0,showExtraDataOnSeparateRow:g=!1,style:h=Nr.v1}=e;const f=o!==kr.NoIcons,b=e=>{let{currentEncounter:t}=e;return r.createElement(r.Fragment,null,d&&r.createElement(Rr,{showLabel:g,showStats:t.showStats,currentBossPulls:t.pullCount}),m&&r.createElement(Ar,{showStats:t.showStats,currentBossPercent:t.bestPercent,currentBossPercentForDisplay:t.bestPercentForDisplay}),p&&r.createElement(Lr,{showStats:t.showStats,composition:t.composition}))};return b.propTypes={currentEncounter:ur},r.createElement("div",{className:"progress-race-leaderboard"+(h!==Nr.v1?` progress-race-leaderboard--${h}`:"")},r.createElement("table",{className:"progress-race-leaderboard__table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{title:trans("rankings.rank")}),r.createElement("th",{title:trans("global.guild")}),r.createElement("th",{title:trans("global.progress")}),f&&r.createElement("th",{className:"progress-race-leaderboard__encounters-header",title:trans("global.encounters")}),!g&&r.createElement(r.Fragment,null,d&&r.createElement("th",{title:trans("progress-race.number_of_pulls"),className:l?"artifact":""},i?trans("progress-race.pulls"):""),m&&r.createElement("th",{title:trans("progress-race.best"),className:l?"artifact":""},i?trans("progress-race.best"):""),p&&r.createElement("th",{title:trans("gameterms-warcraft.gear"),className:l?"artifact":""},i?trans("gameterms-warcraft.gear"):"")))),r.createElement("tbody",null,t.slice(0,n).map((e=>{const t=e.encounters.sort(((e,t)=>(t.killedAtTimestamp??0)-(e.killedAtTimestamp??0)))[0],n=e.encounters.find((t=>t.id===e.currentEncounterId)),i=c===wr.IconsAsBackground?{"--guild-background-url":`url(${e.logoImageUrl??e.guildLogoImageFallbackUrl})`}:{};return r.createElement(r.Fragment,{key:e.id},r.createElement("tr",{className:e.id===a?"progress-race-leaderboard__row--is-highlighted ":"",style:i},r.createElement(Cr,{rank:e.rank,rankCssClass:e.rankCssClass+(c===wr.IconsAsBackground?" progress-race-leaderboard__row--guild-icon-background ":""),isStyled:l}),r.createElement(Sr,{includeGuildLogo:s,guildLogoImageUrl:e.logoImageUrl,guildLogoImageFallbackUrl:e.logoImageFallbackUrl,guildLogoImageIsCustom:e.logoImageIsCustom,guildName:e.name,guildNameCssClass:e.nameCssClass,isStyled:l,encounterIconFormat:o,guildIconFormat:c}),r.createElement(Ir,{killedCount:e.killedCount,totalNumberOfEncounters:e.encounters.length}),f&&r.createElement(Pr,{encounters:e.encounters,lastDefeatedEncounter:t,currentEncounter:n,encounterIconFormat:o,showPullCountOnEncounterIcons:u}),!g&&r.createElement(b,{currentEncounter:n})),g&&r.createElement("tr",null,r.createElement("td",{colSpan:100},r.createElement("table",{width:"100%"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement(b,{currentEncounter:n})))))))})))))}function Cr(e){let{rank:t,rankCssClass:n,isStyled:a}=e;return r.createElement("td",{className:`progress-race-leaderboard__rank ${a?n:""}`},t)}function Sr(e){let{includeGuildLogo:t,guildLogoImageUrl:n,guildLogoImageIsCustom:a,guildName:l,guildNameCssClass:i,isStyled:s,encounterIconFormat:o,guildIconFormat:c,guildLogoImageFallbackUrl:u=null}=e;const d=[kr.IconsOfAllDefeatedEncounters,kr.IconsOfAllDefeatedEncountersAndCurrentEncounter].includes(o)?"shrink":"grow";return r.createElement("td",{className:`progress-race-leaderboard__name ${s?i:""} progress-race-leaderboard__name--${d}`},r.createElement(U,{style:{alignItems:"center"}},t&&c===wr.DefaultIcons&&r.createElement(Ln,{url:n,fallbackUrl:u??n,isCustom:a,size:36}),r.createElement("span",null,l)))}function Ir(e){let{killedCount:t,totalNumberOfEncounters:n}=e;return r.createElement("td",{className:"progress-race-leaderboard__progress"},t,"/",n)}function xr(e){return{id:e.id,name:e.name,url:e.iconImageUrl,grayscale:!e.isKilled,pullCount:e.pullCount}}function Pr(e){let{encounterIconFormat:t,encounters:n,lastDefeatedEncounter:a,currentEncounter:l,showPullCountOnEncounterIcons:i}=e,s=[],o="shrink";switch(t){case kr.IconOfLastDefeatedEncounter:s=[xr(a)];break;case kr.IconOfCurrentEncounter:s=[xr(l)];break;case kr.IconsOfAllDefeatedEncounters:o="grow",s=n.filter((e=>e.isKilled)).sort(((e,t)=>e.killedAtTimestamp-t.killedAtTimestamp)).map(xr);break;case kr.IconsOfAllDefeatedEncountersAndCurrentEncounter:o="grow",s=n.filter((e=>e.isKilled||e.id===l.id)).sort(((e,t)=>(e.killedAtTimestamp??Number.MAX_VALUE)-(t.killedAtTimestamp??Number.MAX_VALUE))).map(xr)}return r.createElement("td",{className:`progress-race-leaderboard__encounters progress-race-leaderboard__encounters--${o}`},r.createElement(U,null,s.map((e=>r.createElement("div",{key:e.id,className:"progress-race-leaderboard__encounter-icon-container"},r.createElement("img",{alt:e.name,className:"progress-race-leaderboard__encounter-icon "+(e.grayscale?"progress-race-leaderboard__encounter-icon--grayscale":""),src:e.url}),i&&(e.pullCount??0)>0&&r.createElement("span",{className:"progress-race-leaderboard__encounter-icon-label"},e.pullCount))))))}function Rr(e){let{showLabel:t=!1,showStats:n,currentBossPulls:a}=e;return r.createElement("td",{className:"progress-race-leaderboard__pulls"},n&&0!==a?(t?`${trans("progress-race.pulls")}: `:"")+a:"")}function Ar(e){let{showLabel:t=!1,showStats:n,currentBossPercent:a,currentBossPercentForDisplay:l}=e;return r.createElement("td",{className:"progress-race-leaderboard__best-percent"},n&&0!==a?(t?`${trans("progress-race.best")}: `:"")+l:"")}function Lr(e){let{showStats:t,composition:n}=e;const a=Ja(n?.roles??[]);return r.createElement("td",{className:"progress-race-leaderboard__gear"},t&&a?r.createElement(c,null,a.toFixed("1")):"")}Tr.propTypes={guilds:i().arrayOf(mr),numberOfGuilds:i().number.isRequired,guildIdToHighlight:i().number,isStyled:i().bool,includeHeader:i().bool,includeGuildLogo:i().bool,encounterIconFormat:i().oneOf(Object.values(kr)),guildIconFormat:i().oneOf(Object.values(wr)),showPullCountOnEncounterIcons:i().bool,includePullsColumn:i().bool,includeBestPercentColumn:i().bool,includeGearColumn:i().bool,showExtraDataOnSeparateRow:i().bool,style:i().oneOf(Object.values(Nr))},Cr.propTypes={rank:i().number.isRequired,rankCssClass:i().string,isStyled:i().bool},Sr.propTypes={includeGuildLogo:i().bool,guildLogoImageUrl:i().string,guildLogoImageIsCustom:i().bool,guildName:i().string.isRequired,guildNameCssClass:i().string,isStyled:i().bool,encounterIconFormat:Tr.propTypes.encounterIconFormat,guildIconFormat:Tr.propTypes.guildIconFormat,guildLogoImageFallbackUrl:i().string},Ir.propTypes={killedCount:i().number.isRequired,totalNumberOfEncounters:i().number.isRequired},Pr.propTypes={encounterIconFormat:Tr.propTypes.encounterIconFormat,encounters:dr,lastDefeatedEncounter:ur,currentEncounter:ur,showPullCountOnEncounterIcons:Tr.propTypes.showPullCountOnEncounterIcons},Rr.propTypes={showLabel:i().bool,showStats:i().bool,currentBossPulls:i().number},Ar.propTypes={showLabel:i().bool,showStats:i().bool,currentBossPercent:i().number,currentBossPercentForDisplay:i().string},Lr.propTypes={showStats:i().bool,composition:i().shape(or.propTypes)};var $r=Tr;function Or(e){let{guildId:t,backgroundImageUrl:n,logoImageUrl:a,logoImageFallbackUrl:l,isRounded:i,guildFaction:s,title:o,streamChannel:c,autoplay:u,isFallbackGuild:d,competitionId:m}=e;const p=t&&Za(t)?"douyu":"twitch";return r.createElement(Mn,{className:"progress-race-summary-tile__stream",padding:"none",contentCssStyle:{overflowX:"initial"}},r.createElement(ja,{backgroundImageUrl:n,logoImageUrl:a,logoImageFallbackUrl:l,logoIsRounded:i,faction:s,isSlim:!0,textPartOne:"",textPartTwo:o,href:d?void 0:`/zone/race/latest/guild/${t}${1===m?"":`?competition=${m}`}`,logoVerticalOffsetInPx:0}),r.createElement(I,{autoplay:u,channel:c,source:p,hasBorder:!1}))}var zr=function(){const{progressRace:e}=Ba(),t=(0,s.TH)(),{zoneIdLabel:n}=(0,s.UO)(),[a,l]=(0,r.useState)([]),[i,c]=(0,r.useState)();return(0,r.useEffect)((()=>{if(0===e?.guilds?.length)return l([]);const t=e?.guilds[0].currentEncounterId;c(t);const n=Date.now()-36e5,a=e?.guilds.filter((e=>e.streamChannel&&e.currentEncounterId===Number(t))).map((e=>({...e,currentEncounter:e.encounters.find((t=>t.id===e.currentEncounterId))}))).filter((e=>!e.currentEncounter.isKilled&&null!==e.currentEncounter.bestPercent&&e.currentEncounter?.perPull[e.currentEncounter?.perPull.length-1]?.endTime>n&&e.currentEncounter.showStats)).sort(((e,t)=>e.currentEncounter.bestPercent-t.currentEncounter.bestPercent)).slice(0,2);if(2!==a?.length)return l([]);l(a)}),[e]),2!==a?.length?null:r.createElement(Mn,{padding:"narrow",className:"progress-race-head-to-head-notification-tile"},n?r.createElement(o.rU,{to:{pathname:`/zone/race/${n??"latest"}/encounter/${i}`,search:t.search},className:"progress-race-head-to-head-notification-tile__link"}):r.createElement("a",{href:`/zone/race/${n??"latest"}/encounter/${i}`,className:"progress-race-head-to-head-notification-tile__link"}),r.createElement(U,{className:"progress-race-head-to-head-notification-tile__content"},a[0]?.logoImageUrl&&a[1]?.logoImageUrl&&r.createElement("div",{className:"progress-race-head-to-head-notification-tile__logos"},r.createElement(Ln,{size:32,url:a[0].logoImageUrl,fallbackUrl:a[0].logoImageFallbackUrl,forceHeight:!0,isCustom:a[0].logoImageIsCustom}),r.createElement("div",{className:"progress-race-head-to-head-notification-tile__logos__versus"},trans("progress-race.versus_abbreviation")),r.createElement(Ln,{size:32,url:a[1].logoImageUrl,fallbackUrl:a[1].logoImageFallbackUrl,forceHeight:!0,isCustom:a[1].logoImageIsCustom})),r.createElement("div",{className:"progress-race-head-to-head-notification-tile__text"},r.createElement(o.rU,{to:{pathname:`/zone/race/${n??"latest"}/encounter/${i}`,search:t.search}},trans("progress-race.watch_head_to_head_encounter_text",{guildNameOne:`${a[0].name} (${a[0].currentEncounter.bestPercentForDisplay})`,guildNameTwo:`${a[1].name} (${a[1].currentEncounter.bestPercentForDisplay})`,encounterName:a[0].currentEncounter.name})))))};function Fr(){return Fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fr.apply(this,arguments)}function Mr(e){let{openInNewTab:t=!1,...n}=e;return r.createElement("a",Fr({},n,{className:`link-overlay ${n.className?n.className:""}`,target:t?"_blank":void 0,rel:t?"noopener noreferrer":void 0}))}Mr.propTypes={openInNewTab:i().bool,className:i().string,href:i().string};var Dr=Mr;function Ur(e,t,n){let a="https://www.wipefest.gg/report/"+e;return t&&(a+="/fight/"+t,n&&(a+="?ignore=true&deathThreshold="+n)),a}function Br(e){let{reportCode:t,fightId:n,cutoff:a}=e;return t?r.createElement(Mn,{className:"view-report-on-wipefest-tile",padding:"narrow"},r.createElement("div",{className:"view-report-on-wipefest-tile__content"},r.createElement(Dr,{href:Ur(t,n,a),target:"_blank",rel:"noreferrer noopener"}),r.createElement(U,{style:{justifyContent:"space-between",alignItems:"center"}},r.createElement("img",{src:"https://cdn.wipefest.gg/images/logo/logo-circle-30.png",alt:"Wipefest logo",className:"view-report-on-wipefest-tile__wipefest-logo"}),r.createElement(vn,{openLinksExternally:!0},`[${trans("reports.view_on_wipefest")}.](${Ur(t,n,a)})`),r.createElement("img",{src:"https://cdn.wipefest.gg/images/logo/logo-circle-30.png",alt:"Wipefest logo",className:"view-report-on-wipefest-tile__wipefest-logo"})))):null}Br.propTypes={reportCode:i().string,fightId:i().number,cutoff:i().number};var Vr=Br;function qr(e){let{tile:t,stream:n,markdown:a}=e;return r.createElement("div",{className:"stream-and-markdown-tile"},r.createElement(In,t,r.createElement("div",{className:"stream-and-markdown-tile__content"},r.createElement(I,n),r.createElement(vn,a))))}qr.propTypes={tile:i().exact(In.propTypes),stream:i().exact(I.propTypes),markdown:i().exact(vn.propTypes)};var jr=qr;function Hr(e){let{children:t,openLinksExternally:n=!0,href:a}=e;const l=a?e=>{let{children:t}=e;return r.createElement(P,{openInNewTab:n,href:a},t)}:e=>{let{children:t}=e;return r.createElement(r.Fragment,null,t)};return r.createElement("div",{className:"thin-banner"},r.createElement(l,null,t))}Hr.propTypes={children:i().node.isRequired,openLinksExternally:i().bool,href:i().string};var Gr=Hr;function Wr(e){let{markdown:t,openLinksExternally:n=!0,href:a}=e;return r.createElement("div",{className:"thin-banner-with-markdown"},r.createElement(Gr,{openLinksExternally:n,href:a},r.createElement(vn,{openLinksExternally:n},t)))}Wr.propTypes={markdown:i().string.isRequired,openLinksExternally:i().bool,href:i().string};var Kr=Wr,Zr=n(63764);function Yr(){return Yr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yr.apply(this,arguments)}function Jr(e){const{onLoad:t}=e,n=(0,Zr.Ik)();return(0,r.useEffect)((()=>{n&&t?.(n)}),[n,t]),r.createElement("div",{className:"code-editor"},r.createElement(Zr.ZP,Yr({height:"100%",theme:"vs-dark",defaultLanguage:"javascript"},e,{overrideServices:{storageService:{get(){},getBoolean(e){return"expandSuggestionDocs"===e},remove(){},store(){},onWillSaveState(){},onDidChangeStorage(){}},...e.overrideServices??{}}})))}Jr.propTypes={onLoad:i().func,overrideServices:i().object};var Xr=Jr;function Qr(e){let{codeErrors:t}=e;return r.createElement("div",{className:"code-editor-error-box__code-errors"},r.createElement(Pn,null,r.createElement(vn,null,"> "+trans("report-components.there_are_problems_with_your_code")),r.createElement(ea,null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{"aria-label":trans("report-components.line_and_position")}),r.createElement("th",null,trans("report-components.problem")))),r.createElement("tbody",null,t.map(((e,t)=>r.createElement("tr",{key:t},r.createElement("td",null,trans("report-components.line"),": ",e.startLineNumber,r.createElement("br",null),trans("report-components.position"),": ",e.startColumn),r.createElement("td",null,e.message))))))))}Qr.propTypes={codeErrors:i().array};var el=Qr,tl="export namespace RpgLogs {\n  export interface ReportGroup {\n    /**\n     * The version of the parser that was used to parse the log file for this report.\n     */\n    logVersion: number;\n\n    /**\n     * The game version of reports in the report group. For World of Warcraft, 1 = Retail, 2 = Vanilla, 3 = TBC, and 4 = Wrath.\n     * For other games, this will just be 1.\n     */\n    gameVersion: number;\n\n    /**\n     * The language of the reports in the report group. Null if no language could be determined.\n     */\n    language: string | null;\n\n    /**\n     * The set of actors that were seen in this report group. This includes all players, pets and NPCs.\n     */\n    actors: Actor[];\n\n    /**\n     * The set of abilities that were seen in this report group.\n     */\n    abilities: Ability[];\n\n    /**\n     * All of the fights in the report group.\n     */\n    allFights: Fight[];\n\n    /**\n     * The set of fights that matches the report UI's filters for start time, end time, what encounters\n     * to allow, and whether or not to show trash, kills or wipes only.\n     */\n    fights: Fight[];\n\n    /**\n     * All the reports loaded in this group.\n     */\n    reports: Report[];\n\n    /**\n     * Obtain the damage done totals for actors or abilities.\n     */\n    damageDoneEntries(\n      callback?: (event: AnyEvent) => boolean,\n      options?: number,\n      viewType?: 'source' | 'target' | 'ability'\n    ): DamageHealingOrCastAmounts;\n\n    /**\n     * Obtain the damage taken totals for actors or abilities.\n     */\n    damageTakenEntries(\n      callback?: (event: AnyEvent) => boolean,\n      options?: number,\n      viewType?: 'source' | 'target' | 'ability'\n    ): DamageHealingOrCastAmounts;\n\n    /**\n     * Obtain the damage done totals for actors or abilities.\n     */\n    healingDoneEntries(\n      callback?: (event: AnyEvent) => boolean,\n      options?: number,\n      viewType?: 'source' | 'target' | 'ability'\n    ): DamageHealingOrCastAmounts;\n\n    /**\n     * Obtain the damage done totals for actors or abilities.\n     */\n    castsEntries(\n      callback?: (event: AnyEvent) => boolean,\n      options?: int,\n      viewType?: 'source' | 'target' | 'ability'\n    ): DamageHealingOrCastAmounts;\n  }\n\n  export interface Report {\n    /**\n     * The version of the parser that was used to parse the log file for this report.\n     */\n    logVersion: number;\n\n    /**\n     * The game version of the report. For World of Warcraft, 1 = Retail, 2 = Vanilla, 3 = TBC, and 4 = Wrath.\n     * For other games, this will just be 1.\n     */\n    gameVersion: number;\n\n    /**\n     * The language of the report. Null if no language could be determined.\n     */\n    language: string | null;\n\n    /**\n     * The number of segments used by the report. Will increase as more fights get uploaded.\n     */\n    segments: number;\n\n    /**\n     * The set of actors that were seen in this report. This includes all players, pets and NPCs.\n     */\n    actors: Actor[];\n\n    /**\n     * The set of abilities that were seen in this report.\n     */\n    abilities: Ability[];\n\n    /**\n     * All of the fights in the report.\n     */\n    fights: Fight[];\n\n    /**\n     * All complete raids in the report. These include entire runs of instances in situations where those\n     * runs are supported (e.g., Serpentshrine Cavern, Sanctum of Domination, Naxxramas, etc.)\n     */\n    completeRaids: CompleteRaid[];\n  }\n\n  /**\n   * Every report contains zero or more fights. Fights can be encounters or trash.\n   * An entire dungeon is considered one Fight as well, but you can access individual dungeon pulls within the Fight if needed.\n   * The Fight interface provides information such as the encounter id, the fight length, and the fight difficulty.\n   * Events that occurred during the fight are accessible from the events property, as well as other accessors that enable the fetching\n   * of specific categories of events.\n   */\n  export interface Fight {\n    /**\n     * The id of the fight within its containing report group.\n     */\n    id: number;\n\n    /**\n     * The id of the fight within its containing report.\n     */\n    idInReport: number;\n\n    /**\n     * The report that the fight belongs to.\n     */\n    report: Report;\n\n    /**\n     * The encounter id of the fight. Trash fights just have an encounter id of 0.\n     */\n    encounterId: number;\n\n    /**\n     * The encounter size (number of players).\n     */\n    size: number;\n\n    /**\n     * The encounter difficulty.\n     */\n    difficulty: number;\n\n    /**\n     * Whether or not a fight with an encounter id was a kill.\n     */\n    isKill: boolean;\n\n    /**\n     * A localized name for the fight. For encounters, it will be the encounter name, and for trash fights, it will\n     * be the name of the NPC with the most hit points that was involved in the fight.\n     */\n    name: string;\n\n    /**\n     * The start time of the fight. This is an offset relative to the start of the report, not an absolute time.\n     * This offset is in milliseconds.\n     */\n    startTime: number;\n\n    /**\n     * The end time of the fight. This is an offset relative to the start of the report, not an absolute time.\n     * This offset is in milliseconds.\n     */\n    endTime: number;\n\n    /**\n     * Combatant info events respecting the user's filters. These are cached, so this is faster than trying to find them on your own.\n     */\n    combatantInfoEvents: CombatantInfoEvent[];\n\n    /**\n     * All combatant info events. These are cached, so this is faster than trying to find them on your own.\n     */\n    allCombatantInfoEvents: CombatantInfoEvent[];\n\n    /**\n     * Death events of friendly players respecting the user's filters. These are cached, so this is faster than trying to find them on your own.\n     */\n    friendlyPlayerDeathEvents: DeathEvent[];\n\n    /**\n     * Death events of all friendly players. These are cached, so this is faster than trying to find them on your own.\n     */\n    allFriendlyPlayerDeathEvents: DeathEvent[];\n\n    /**\n     * Death events of enemies respecting the user's filters. These are cached, so this is faster than trying to find them on your own.\n     * For PvE content, the deaths are limited to NPCs. For supported PvP content, the deaths are of enemy players.\n     */\n    enemyDeathEvents: DeathEvent[];\n\n    /**\n     * Death events of enemies. These are cached, so this is faster than trying to find them on your own.\n     * For PvE content, the deaths are limited to NPCs. For supported PvP content, the deaths are of enemy players.\n     */\n    allEnemyDeathEvents: DeathEvent[];\n\n    /**\n     * All of the events in this fight.\n     */\n    allEvents: AnyEvent[];\n\n    /**\n     * The events of the fight respecting the user's filters.\n     */\n    events: AnyEvent[];\n\n    /**\n     * This method will obtain a cached subset of events matching the specified category and disposition.\n     * The events will be filtered to the user's current event filters (e.g., phase, death cutoff, start/end time).\n     * @param category - The category of events to fetch\n     * @param disposition  - The disposition of the actors to check. A value of \"neutral\" will be treated like \"enemy\".\n     * @returns The cached event set. Use this method to quickly retrieve a subset of events.\n     */\n    eventsByCategoryAndDisposition(\n      category: EventCategory,\n      disposition: ActorDisposition\n    ): AnyEvent[];\n\n    /**\n     * This method will obtain a cached subset of events matching the specified category and disposition.\n     * @param category - The category of events to fetch\n     * @param disposition  - The disposition of the actors to check. A value of \"neutral\" will be treated like \"enemy\".\n     * @returns The cached event set. Use this method to quickly retrieve a subset of events.\n     */\n    allEventsByCategoryAndDisposition(\n      category: EventCategory,\n      disposition: ActorDisposition\n    ): AnyEvent[];\n\n    /**\n     * Helper function to obtain the phase an event occurs in.\n     * @param event - The event whose timestamp will be checked against the phase transitions.\n     * @returns The phase the event occurs in, or null if the fight has no phases.\n     */\n    phaseForEvent(event: AnyEvent): number | null;\n\n    /**\n     * The phase names for all possible phases.\n     */\n    phaseNames: Array<string> | null;\n\n    /**\n     * The phase transitions. Each entry in the array contains all of the start/end bands for that specific phase.\n     */\n    phaseTransitions: Array<Array<Band>> | null;\n\n    /**\n     * For fights where downtime is supported and used to shrink the total time over which damage dealt is considered,\n     * this will contain an array of the start/end bands for every chunk of downtime.\n     */\n    downtimeTransitions: Array<Band> | null;\n\n    /**\n     * Whether or not an actor is a friendly participant.\n     * @param actor - The actor to check.\n     * @returns Whether or not the actor is a friendly participant\n     */\n    isFriendlyParticipant(actor: Actor): boolean;\n\n    /**\n     * Whether or not an actor is an enemy participant.\n     * @param actor - The actor to check.\n     * @returns Whether or not the actor is an enemy participant\n     */\n    isEnemyParticipant(actor: Actor): boolean;\n\n    /**\n     * All the friendly participants in the fight.\n     */\n    friendlyParticipants: Array<Actor>;\n\n    /**\n     * All the enemy participants in the fight.\n     */\n    enemyParticipants: Array<Actor>;\n\n    /**\n     * The maps used by the fight.\n     */\n    maps: Map;\n\n    /**\n     * The zone used by the fight.\n     */\n    zone: Zone | null;\n\n    /**\n     * The bounding box for the fight in coordinates.\n     */\n    minX: number;\n    maxX: number;\n    minY: number;\n    maxY: number;\n\n    /**\n     * For dungeons, individual pulls are stored and can be accessed.\n     */\n    dungeonPulls: Array<DungeonPull>;\n\n    /**\n     * The world markers used by this fight.\n     */\n    worldMarkers: Array<WorldMarker>;\n\n    /**\n     * Whether or not this event should be excluded from damage rankings.\n     * @param event - The event to check.\n     * @returns Whether or not the event counts as part of damage done ranks.\n     */\n    isEventExcludedFromDamageRankings(event: AnyEvent): boolean;\n\n    /**\n     * Get the set of damage events and amounts that represent the damage healed by this event.\n     * The amount are distinct from the events themselves so that you can see when a heal only partially\n     * healed some of the damage.\n     * @param event - The event to check\n     * @returns - An array of events and the amount of damage healed for each event.\n     */\n    damageEventsForHealingEvent(event: AnyEvent): Array<EventAndAmount> | null;\n\n    /**\n     * Get the set of healing events and amounts that represent the heals that were done for this damage.\n     * The amount are distinct from the events themselves so that you can see when a heal only partially\n     * healed some of the damage.\n     * @param event - The event to check\n     * @returns - An array of events and the amount of damage healed for each event.\n     */\n    healingEventsForDamageEvent(event: AnyEvent): Array<EventAndAmount> | null;\n\n    /**\n     * Get the set of events that occurred prior to a specified player death.\n     * @param event - The death event to check\n     * @returns - An array of events going back to the last overheal the player received.\n     */\n    eventsPriorToDeath(event: DeathEvent): Array<AnyEvent>;\n\n    /**\n     * The item level for a given actor.\n     * @param actor - The player to fetch the item level for.\n     * @returns - The item level of the actor\n     */\n    itemLevelForPlayer(actor: Actor): number;\n\n    /**\n     * The spec for a given actor.\n     * @param actor - The player to fetch the spec for.\n     * @returns - The spec of the actor\n     */\n    specForPlayer(actor: Actor): number;\n\n    /**\n     * The role that an actor played in a specific fight.\n     * @param actor\n     * @returns The role of the actor, or their subType if unknown.\n     */\n    roleForPlayer(\n      actor: Actor\n    ): 'Tank' | 'Healer' | 'Melee' | 'Ranged' | string;\n\n    /**\n     * The instance count for a given actor.\n     * @param actor - The actor to fetch the group count for.\n     * @returns - The instance count of the actor\n     */\n    instanceCountForNpc(actor: Actor): number;\n\n    /**\n     * The instance group count for a given actor.\n     * @param actor - The actor to fetch the group count for.\n     * @returns - The group count of the actor\n     */\n    instanceGroupCountForNpc(actor: Actor): number;\n  }\n\n  export type WorldMarker = {\n    /**\n     * The map game id that the marker was placed on.\n     */\n    mapId: number;\n\n    /**\n     * The x position of the marker.\n     */\n    x: number;\n\n    /**\n     * The y position of the marker.\n     */\n    y: number;\n\n    /**\n     * The icon id that represents which marker it is.\n     */\n    icon: number;\n\n    /**\n     * When the marker was placed.\n     */\n    startTime: number;\n\n    /**\n     * When the marker was removed.\n     */\n    endTime: number;\n  };\n\n  export type EventAndAmount = {\n    event: AnyEvent;\n    amount: number;\n  };\n\n  export interface DungeonPull {\n    /**\n     * The id of the pull.\n     */\n    id: number;\n\n    /**\n     * The fight that the pull belongs to.\n     */\n    fight: Fight;\n\n    /**\n     * The encounter id of the fight. Trash fights just have an encounter id of 0.\n     */\n    encounterId: number;\n\n    /**\n     * Whether or not a fight with an encounter id was a kill.\n     */\n    isKill: boolean;\n\n    /**\n     * The start time of the fight. This is an offset relative to the start of the report, not an absolute time.\n     * This offset is in milliseconds.\n     */\n    startTime: number;\n\n    /**\n     * The end time of the fight. This is an offset relative to the start of the report, not an absolute time.\n     * This offset is in milliseconds.\n     */\n    endTime: number;\n\n    /**\n     * All of the events in this pull.\n     */\n    allEvents: AnyEvent[];\n\n    /**\n     * The events of the pull respecting the user's filters.\n     */\n    events: AnyEvent[];\n\n    /**\n     * All the enemy participants in the pull, as well as their instance and instance group ranges.\n     */\n    enemies: Array<DungeonPullEnemy>;\n\n    /**\n     * The maps used by the pull.\n     */\n    maps: Map;\n\n    /**\n     * The bounding box for the pull in coordinates.\n     */\n    minX: number;\n    maxX: number;\n    minY: number;\n    maxY: number;\n  }\n\n  export type DungeonPullEnemy = {\n    /**\n     * The actor involved in the pull.\n     */\n    actor: Actor;\n\n    /**\n     * The minimum instance number of the actor that occurs in the pull.\n     */\n    minInstanceId: number;\n\n    /**\n     * The minimum instance number of the actor that occurs in the pull.\n     */\n    maxInstanceId: number;\n\n    /**\n     * The minimum instance group number of the actor that occurs in the pull.\n     */\n    minInstanceGroupId: number;\n\n    /**\n     * The minimum instance group number of the actor that occurs in the pull.\n     */\n    maxInstanceGroupId: number;\n  };\n\n  type ActorType = 'Player' | 'Pet' | 'NPC';\n\n  export interface Actor {\n    /**\n     * The id of the actor.\n     */\n    id: number;\n\n    /**\n     * The id of the actor within its containing report.\n     */\n    idInReport: number;\n\n    /**\n     * The game id of the actor.\n     */\n    gameId: number;\n\n    /**\n     * The name of the actor in the user's desired language.\n     */\n    name: string;\n\n    /**\n     * The type of the actor. This will be Player, Pet or NPC.\n     */\n    type: ActorType;\n\n    /**\n     * The subType of the actor. This will be the job (for FF) or class (for other games) of players. NPCs can be \"Boss\" or \"NPC\".\n     */\n    subType: string;\n  }\n\n  export interface ActorInstance {\n    /**\n     * The actor for this specific instance.\n     */\n    actor: Actor;\n\n    /**\n     * The instance id of the specific actor instance.\n     */\n    instanceId: number;\n  }\n\n  export interface Ability {\n    /**\n     * The game id of the ability.\n     */\n    id: number;\n\n    /**\n     * The name of the ability in the user's desired language.\n     */\n    name: string;\n\n    /**\n     * The type of the ability. This represents the spell school (in WoW) or damage type in most other games.\n     */\n    type: number;\n\n    /**\n     * The icon of the ability.\n     */\n    icon: string | null;\n\n    /**\n     * If the ability is always excluded from damage done or healing done, this field will bet set to true.\n     * For example, in World of Warcraft, Brewmaster Stagger absorbs should not count as healing done.\n     */\n    isExcludedFromDamageAndHealing: boolean;\n\n    /**\n     * Whether or not the ability is off gcd.\n     */\n    isOffGcd: boolean;\n\n    /**\n     * Whether or not the ability is a melee attack. In FF, this is typically called \"Attack\".\n     */\n    isMelee: boolean;\n  }\n\n  export interface ResourceData {\n    /**\n     * The unit's current hit points.\n     */\n    hitPoints: number;\n\n    /**\n     * The unit's maximum hit points.\n     */\n    maxHitPoints: number;\n\n    /**\n     * The unit's x position.\n     */\n    x: number;\n\n    /**\n     * The unit's y position.\n     */\n    y: number;\n\n    /**\n     * The unit's facing. Null for games that do not support facing.\n     */\n    facing: number | null;\n  }\n\n  export type CompleteRaid = {\n    raidId: number;\n    fights: Fight[];\n  };\n\n  export type Map = {\n    id: number;\n    name: string | null;\n    file: string | null;\n  };\n\n  export type Zone = {\n    /**\n     * The game id of the zone.\n     */\n    id: number;\n\n    /**\n     * The name of the zone. Null if the zone name is not supported.\n     */\n    name: string | null;\n\n    /**\n     * The difficulty of the zone. Null if zone difficulty is not supported by the game.\n     */\n    difficulty: number | null;\n\n    /**\n     * The size of the zone. Null if zone size is not supported by the game.\n     */\n    size: number | null;\n  };\n\n  export interface Event {\n    /**\n     * The time offset of the event in milliseconds from the start of the report.\n     */\n    timestamp: number;\n\n    /**\n     * The source actor. Null if no source is set.\n     */\n    source: Actor | null;\n\n    /**\n     * The instance id of the source.\n     */\n    sourceInstanceId: number;\n\n    /**\n     * The raw disposition of the source. Use the isFriendlyParticipant and isEnemyParticipant methods to obtain\n     * the overall single disposition for this actor. This field should be used with caution as it could flip if the\n     * logger or the unit get mind controlled.\n     */\n    sourceDisposition: ActorDisposition;\n\n    /**\n     * The raid marker on this source unit. 0 if no raid marker is set.\n     */\n    sourceRaidMarker: number;\n\n    /**\n     * Resource data for the source. Null if no resource information is available.\n     */\n    sourceResources: ResourceData | null;\n\n    /**\n     * The target actor. Null if no target is set.\n     */\n    target: Actor | null;\n\n    /**\n     * The instance id of the target.\n     */\n    targetInstanceId: number;\n\n    /**\n     * The raw disposition of the target. Use the isFriendlyParticipant and isEnemyParticipant methods on Fight to obtain\n     * the overall single disposition for this actor. This field should be used with caution as it could flip if the\n     * logger or the unit get mind controlled.\n     */\n    targetDisposition: ActorDisposition;\n\n    /**\n     * The raid marker on this source unit. 0 if no raid marker is set.\n     */\n    targetRaidMarker: number;\n\n    /**\n     * Resource data for the target. Null if no resource information is available.\n     */\n    targetResources: ResourceData | null;\n\n    /**\n     * The ability used by the source on the target. Null if no ability is set.\n     */\n    ability: Ability | null;\n  }\n\n  export type Band = {\n    startTime: number;\n    endTime: number;\n  };\n\n  export interface AbsorbedEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'absorbed';\n\n    /**\n     * The attacking actor. Null if no attacker is set.\n     */\n    attacker: Actor | null;\n\n    /**\n     * The attacking ability used. Null if the ability is not known.\n     */\n    attackerAbility: Ability | null;\n\n    /**\n     * The instance id of the attacker.\n     */\n    attackerInstanceId: number;\n\n    /**\n     * The raw disposition of the attacker. Use the isFriendlyParticipant and isEnemyParticipant methods to obtain\n     * the overall single disposition for this actor. This field should be used with caution as it could flip if the\n     * logger or the unit get mind controlled.\n     */\n    attackerDisposition: ActorDisposition;\n\n    /**\n     * The raid marker on the attacking unit. 0 if no raid marker is set.\n     */\n    attackerRaidMarker: number;\n\n    /**\n     * The amount of damage absorbed.\n     */\n    amount: number;\n\n    /**\n     * The amount of effective damage done for this event.\n     */\n    effectiveDamage: number;\n\n    /**\n     * The amount of absorbed damage done for this event.\n     */\n    absorbedDamage: number;\n\n    /**\n     * The amount of effective healing done by the event.\n     */\n    effectiveHealing: number;\n\n    /**\n     * The amount of healing done via absorbs for this event.\n     */\n    absorbedHealing: number;\n  }\n\n  export interface HealAbsorbedEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'healabsorbed';\n\n    /**\n     * The healing actor. Null if no healer is set.\n     */\n    healer: Actor | null;\n\n    /**\n     * The healing ability used. Null if the ability is not known.\n     */\n    healerAbility: Ability | null;\n\n    /**\n     * The instance id of the healer.\n     */\n    healerInstanceId: number;\n\n    /**\n     * The raw disposition of the healer. Use the isFriendlyParticipant and isEnemyParticipant methods to obtain\n     * the overall single disposition for this actor. This field should be used with caution as it could flip if the\n     * logger or the unit get mind controlled.\n     */\n    healerDisposition: ActorDisposition;\n\n    /**\n     * The raid marker on the healing unit. 0 if no raid marker is set.\n     */\n    healerRaidMarker: number;\n\n    /**\n     * The amount of damage absorbed.\n     */\n    amount: number;\n  }\n\n  export interface BeginCastEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'begincast';\n\n    /**\n     * For games that support including the duration in the begin cast event, it will appear here.\n     * Currently, the only game that supports this field is FFXIV. It will be 0 for all other games.\n     */\n    duration: number;\n\n    /**\n     * Whether or not the cast is a melee swing/auto-attack.\n     */\n    isMelee: boolean;\n\n    /**\n     * Whether or not the cast is fake, i.e., not the result of a user action, but just made up by the game.\n     */\n    isFake: boolean;\n  }\n\n  export interface CastEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'cast';\n\n    /**\n     * Whether or not the cast is a melee swing/auto-attack.\n     */\n    isMelee: boolean;\n\n    /**\n     * Whether or not the cast is fake, i.e., not the result of a user action, but just made up by the game.\n     */\n    isFake: boolean;\n  }\n\n  export type CombatantInfoAura = {\n    /**\n     * The actor responsible for applying the aura to the player.\n     */\n    source: Actor;\n\n    /**\n     * The game id of the applied aura.\n     */\n    abilityGameId: number;\n\n    /**\n     * An icon for the aura if one exists.\n     */\n    icon: string | null;\n\n    /**\n     * The name of the ability if it can be determined.\n     */\n    name: string | null;\n\n    /**\n     * The number of initial stacks. Not all games support this.\n     */\n    stacks: number;\n  };\n\n  export interface CombatantInfoEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'combatantinfo';\n\n    /**\n     * A set of auras that are present on the player when combat begins.\n     */\n    auras: Array<CombatantInfoAura>;\n  }\n\n  export interface DeathEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'death';\n\n    /**\n     * If it can be determined for the death, this field will tell you which actor killed the target.\n     */\n    killer: Actor | null;\n\n    /**\n     * If it can be determined for the death, this field will tell you which ability was used to kill the target.\n     */\n    killingAbility: Ability | null;\n\n    /**\n     * The instance id of the killing actor.\n     */\n    killerInstanceId: number | null;\n\n    /**\n     * Feign boolean. For World of Warcraft hunter feigns, will be set to true if this death was a feign.\n     */\n    isFeign: boolean;\n\n    /**\n     * If there was an earlier death save ability that kept the target alive, the ability will be indicated here.\n     */\n    deathSaveAbility: Ability | null;\n\n    /**\n     * If there was an earlier death save, the time the save happened will be indicated here.\n     */\n    deathSaveTime: number | null;\n  }\n\n  export interface ApplyOrRefreshEvent extends Event {\n    /**\n     * For FFXIV and SWTOR, the ability that applied the aura. Null in other games.\n     */\n    appliedByAbility: Ability | null;\n\n    /**\n     * Extra numeric info that FFXIV sends along with some buff events (e.g., with Medicated). 0 for all other games.\n     */\n    extraInfo: number;\n\n    /**\n     * For games with duration support, the duration of the buff/debuff when applied. Currently only FF supports this.\n     */\n    duration: number;\n\n    /**\n     * The absorb strength of an applied shield.\n     */\n    absorb: number;\n  }\n\n  export type ApplyBuffOrDebuffEvent = ApplyOrRefreshEvent;\n\n  export interface ApplyBuffOrDebuffStackEvent extends Event {\n    /**\n     * The stack count.\n     */\n    stacks: number;\n  }\n\n  export interface RefreshBuffOrDebuffEvent extends ApplyOrRefreshEvent {\n    /**\n     * The amount absorbed by the shield.\n     */\n    absorbed: number;\n\n    /**\n     * The amount of effective healing done by the event.\n     */\n    effectiveHealing: number;\n\n    /**\n     * The amount of healing done via absorbs for this event.\n     */\n    absorbedHealing: number;\n  }\n\n  export interface RemoveBuffOrDebuffEvent extends Event {\n    /**\n     * For FFXIV and SWTOR, the ability that applied the aura. Null in other games.\n     */\n    appliedByAbility: Ability | null;\n\n    /**\n     * The absorb strength remaining an the applied shield.\n     */\n    absorb: number;\n\n    /**\n     * The amount absorbed by the shield.\n     */\n    absorbed: number;\n\n    /**\n     * The amount of effective healing done by the event.\n     */\n    effectiveHealing: number;\n\n    /**\n     * The amount of healing done via absorbs for this event.\n     */\n    absorbedHealing: number;\n\n    /**\n     * The amount of overheal.\n     */\n    overheal: number;\n  }\n\n  export interface RemoveBuffOrDebuffStackEvent extends Event {\n    /**\n     * The stack count.\n     */\n    stacks: number;\n  }\n\n  export interface ApplyDebuffEvent extends ApplyBuffOrDebuffEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'applydebuff';\n  }\n\n  export interface ApplyBuffEvent extends ApplyBuffOrDebuffEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'applybuff';\n  }\n\n  export interface ApplyBuffStackEvent extends ApplyBuffOrDebuffStackEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'applybuffstack';\n  }\n\n  export interface ApplyDebuffStackEvent extends ApplyBuffOrDebuffStackEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'applydebuffstack';\n  }\n\n  export interface RefreshBuffEvent extends RefreshBuffOrDebuffEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'refreshbuff';\n  }\n\n  export interface RefreshDebuffEvent extends RefreshBuffOrDebuffEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'refreshdebuff';\n  }\n\n  export interface RemoveDebuffEvent extends RemoveBuffOrDebuffEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'removedebuff';\n  }\n\n  export interface RemoveBuffEvent extends RemoveBuffOrDebuffEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'removebuff';\n  }\n\n  export interface RemoveBuffStackEvent extends RemoveBuffOrDebuffStackEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'removebuffstack';\n  }\n\n  export interface RemoveDebuffStackEvent extends RemoveBuffOrDebuffStackEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'removedebuffstack';\n  }\n\n  export interface SpellStoppedEvent extends Event {\n    /**\n     * The ability that was interrupted, stolen, etc.\n     */\n    stoppedAbility: Ability;\n\n    /**\n     * If the ability was a buff or debuff that was dispelled, purged or stolen, this boolean\n     * indicates if it was a buff vs a debuff.\n     */\n    isBuff: boolean;\n  }\n\n  export interface DamageEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'damage';\n\n    /**\n     * The amount of damage done excluding absorbs and overkill.\n     */\n    amount: number;\n\n    /**\n     * The amount absorbed by the shield.\n     */\n    absorbed: number;\n\n    /**\n     * The amount of mitigated damage. Excludes absorbs, but does include mitigation from blocking, armor and damage reductions.\n     */\n    mitigated: number;\n\n    /**\n     * The raw unmitigated damage. Not supported by every game.\n     */\n    unmitigatedAmount: number;\n\n    /**\n     * The amount of effective damage done by the event.\n     */\n    effectiveDamage: number;\n\n    /**\n     * The amount of damage absorbed for this event.\n     */\n    absorbedDamage: number;\n\n    /**\n     * The amount of effective healing done by the event.\n     */\n    effectiveHealing: number;\n\n    /**\n     * The amount of healing done via absorbs for this event.\n     */\n    absorbedHealing: number;\n\n    /**\n     * The amount of overkill, null if no overkill exists.\n     */\n    overkill: number | null;\n\n    /**\n     * Whether or not the event was a miss.\n     */\n    isMiss: boolean;\n\n    /**\n     * Whether or not the event is a tick (DoT).\n     */\n    isTick: boolean;\n\n    /**\n     * Whether or not the event is a critical hit.\n     */\n    isCriticalHit: number;\n\n    /**\n     * If the event was changed to be attributed to a supporting actor, the original supported actor\n     * will be included here.\n     */\n    supportedActor: Actor | null;\n\n    /**\n     * Whether the damage needs to also be subtracted from the supportedActor.\n     */\n    subtractsFromSupportedActor: boolean;\n  }\n\n  export interface HealingEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'heal';\n\n    /**\n     * The amount of healing done excluding absorbs and overheal.\n     */\n    amount: number;\n\n    /**\n     * The amount absorbed by the shield.\n     */\n    absorbed: number;\n\n    /**\n     * The amount of effective healing done by the event.\n     */\n    effectiveHealing: number;\n\n    /**\n     * The amount of healing done via absorbs for this event.\n     */\n    absorbedHealing: number;\n\n    /**\n     * The amount of overheal.\n     */\n    overheal: number;\n\n    /**\n     * Whether or not the event was a miss.\n     */\n    isMiss: boolean;\n\n    /**\n     * Whether or not the event is a tick (DoT).\n     */\n    isTick: boolean;\n\n    /**\n     * Whether or not the event is a critical hit.\n     */\n    isCriticalHit: number;\n\n    /**\n     * The hit type of the event.\n     */\n    hitType: HealingHitType;\n\n    /**\n     * If the event was changed to be attributed to a supporting actor, the original supported actor\n     * will be included here.\n     */\n    supportedActor: Actor | null;\n\n    /**\n     * Whether the healing needs to also be subtracted from the supportedActor.\n     */\n    subtractsFromSupportedActor: boolean;\n  }\n\n  export type HealingHitType = 'miss' | 'hit' | 'criticalHit';\n\n  export interface InterruptEvent extends SpellStoppedEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'interrupt';\n  }\n\n  export interface DispelEvent extends SpellStoppedEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'dispel';\n\n    /**\n     * The number of stacks removed by the dispel.\n     */\n    stacks: number;\n  }\n\n  export interface EncounterEvent extends Event {\n    encounterId: number;\n    originalEncounterId: number;\n    encounterName: string;\n    encounterSize: number;\n    encounterDifficulty: number;\n  }\n\n  export type AbstractEncounterStartEvent = EncounterEvent;\n\n  export interface AbstractEncounterEndEvent extends EncounterEvent {\n    isKill: boolean;\n  }\n\n  export interface EncounterStartEvent extends AbstractEncounterStartEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'encounterstart';\n  }\n\n  export interface EncounterEndEvent extends AbstractEncounterEndEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'encounterend';\n  }\n\n  export interface DungeonStartEvent extends AbstractEncounterStartEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'dungeonstart';\n\n    keystoneLevel: number;\n    affixes: Array<number>;\n  }\n\n  export interface DungeonEndEvent extends AbstractEncounterEndEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'dungeonend';\n\n    medal: number;\n    completionTime: number;\n    rating: number;\n  }\n\n  export interface DungeonEncounterStartEvent\n    extends AbstractEncounterStartEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'dungeonencounterstart';\n  }\n\n  export interface DungeonEncounterEndEvent extends AbstractEncounterEndEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'dungeonencounterend';\n  }\n\n  export interface AbstractResourceChangeEvent extends Event {\n    resourceChange: number;\n    resourceChangeType: number;\n    otherResourceChange: number;\n    maxResourceAmount: number;\n    waste: number | null;\n  }\n\n  export interface ResourceChangeEvent extends AbstractResourceChangeEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'resourcechange';\n  }\n\n  export interface PlayerEnterCombatEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'playerentercombat';\n\n    /**\n     * The logging player.\n     */\n    player: Actor | null;\n  }\n\n  export interface PlayerExitCombatEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'playerexitcombat';\n\n    /**\n     * The logging player.\n     */\n    player: Actor | null;\n  }\n\n  export interface MapChangeEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'mapchange';\n\n    /**\n     * The game id of the map\n     */\n    mapId: number;\n\n    /**\n     * The name of the map\n     */\n    mapName: string | null;\n\n    /**\n     * The file name of the map image.\n     */\n    mapFile: string | null;\n  }\n\n  export interface ZoneChangeEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'zonechange';\n\n    /**\n     * The game id of the zone\n     */\n    zoneId: number;\n\n    /**\n     * The name of the zone.\n     */\n    zoneName: string | null;\n\n    /**\n     * The difficulty level of the zone. Not set in all games.\n     */\n    zoneDifficulty: number;\n\n    /**\n     * The size of the zone. Not set in all games.\n     */\n    zoneSize: number;\n  }\n\n  export interface WorldMarkerPlacedEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'worldmarkerplaced';\n\n    /**\n     * The map game id that the marker was placed on.\n     */\n    mapId: number;\n\n    /**\n     * The x position of the marker.\n     */\n    x: number;\n\n    /**\n     * The y position of the marker.\n     */\n    y: number;\n\n    /**\n     * The icon id that represents which marker it is.\n     */\n    icon: number;\n  }\n\n  export interface WorldMarkerRemovedEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'worldmarkerremoved';\n\n    /**\n     * The icon id that represents which marker is being removed.\n     */\n    icon: number;\n  }\n\n  export interface InstakillEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'instakill';\n  }\n\n  export interface ResurrectEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'resurrect';\n  }\n\n  export interface UnknownEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'unknown';\n  }\n\n  export interface WipeCalledEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'wipecalled';\n  }\n\n  export type CoreEvent =\n    | AbsorbedEvent\n    | ApplyBuffEvent\n    | ApplyBuffStackEvent\n    | ApplyDebuffEvent\n    | ApplyDebuffStackEvent\n    | BeginCastEvent\n    | CastEvent\n    | CombatantInfoEvent\n    | DamageEvent\n    | DeathEvent\n    | DispelEvent\n    | DungeonStartEvent\n    | DungeonEndEvent\n    | DungeonEncounterStartEvent\n    | DungeonEncounterEndEvent\n    | EncounterStartEvent\n    | EncounterEndEvent\n    | HealingEvent\n    | HealAbsorbedEvent\n    | InstakillEvent\n    | InterruptEvent\n    | MapChangeEvent\n    | PlayerEnterCombatEvent\n    | PlayerExitCombatEvent\n    | RefreshBuffEvent\n    | RefreshDebuffEvent\n    | RemoveBuffEvent\n    | RemoveBuffStackEvent\n    | RemoveDebuffEvent\n    | RemoveDebuffStackEvent\n    | ResourceChangeEvent\n    | ResurrectEvent\n    | UnknownEvent\n    | WipeCalledEvent\n    | WorldMarkerPlacedEvent\n    | WorldMarkerRemovedEvent\n    | ZoneChangeEvent;\n\n  export type EventCategory =\n    | 'damage'\n    | 'healing'\n    | 'casts'\n    | 'aurasGained'\n    | 'aurasCast'\n    | 'interrupts'\n    | 'resourceGain'\n    | 'dispels'\n    | 'deathsAndResurrects'\n    | 'summons'\n    | 'combatResurrects'\n    | 'externalHealingRequired'\n    | 'healingAbsorbed'\n    | 'deathSave'\n    | 'aggro'\n    | 'threat'\n    | 'calculatedDamage'\n    | 'calculatedHealing';\n\n  export type ActorDisposition = 'friendly' | 'enemy' | 'neutral';\n\n  export type FightFilters = {\n    /**\n     * The start time of the filter. Fights that end before this start time will not be included.\n     */\n    startTime: number;\n\n    /**\n     * The end time of the filter. Fights that begin after this end time will not be included.\n     */\n    endTime: number;\n\n    /**\n     * The encounter to filter to. 0 if all fights should be included. If set to a specific boss, only pulls of that boss will be matched.\n     */\n    encounterId: number;\n\n    /**\n     * The kill type.\n     */\n    killType: 'all' | 'encounters' | 'trash' | 'kills' | 'wipes';\n\n    /**\n     * The difficulty to filter to. If set to a value other than 0, only fights matching the specified difficulty will be matched.\n     */\n    difficulty: number;\n\n    /**\n     * A set of specific fight ids to match on. Exists on top of the other filters, so only fights in this list can be matched.\n     */\n    fightIds: number[] | null;\n\n    /**\n     * Test if a fight matches these filters.\n     * @param fight - The fight to check.\n     * @returns Whether or not the fight matches the filters.\n     */\n    matches(fight: Fight): boolean;\n  };\n\n  export type EventFilters = {\n    /**\n     * The start time of the filter. Events that occur before this start time will not be included.\n     */\n    startTime: number;\n\n    /**\n     * The end time of the filter. Events that occur after this end time will not be included.\n     */\n    endTime: number;\n\n    /**\n     * The number of player deaths after which events should be ignored.\n     */\n    deathsCutoff: number;\n\n    /**\n     * The phase to filter to.\n     */\n    phase: number;\n\n    /**\n     * The report id of an actor to filter to. Equivalent in behavior to the Summary pane events view in reports.\n     */\n    actorId: number;\n\n    /**\n     * The instance id of an actor to filter to. Equivalent in behavior to the Summary pane events view in reports.\n     */\n    actorInstanceId: number;\n\n    /**\n     * The class of an actor to filter to. Equivalent in behavior to the Summary pane events view in reports.\n     */\n    actorClass: string;\n\n    /**\n     * Test if an event matches these filters.\n     * @param event - The event to check against the filters.\n     * @param fight - The fight that the event belongs to.\n     * @returns Whether or not the event matches the filters.\n     */\n    matches(event: AnyEvent, fight: Fight): boolean;\n  };\n\n  export type Styles = {\n    /**\n     * Get the CSS color for a given actor subtype.\n     * @param type - The actor subtype whose color should be retrieved\n     * @returns The color to use for the subtype in charts and tables.\n     */\n    getColorForActorType(type: string): string;\n\n    /**\n     * Get the CSS color for a given ability type.\n     * @param type - The ability type whose color should be retrieved\n     * @returns The color to use for the type in charts and tables.\n     */\n    getColorForAbilityType(type: number): string;\n  };\n\n  export type DamageHealingOrCastAmount = {\n    entry: Actor | Ability | ActorInstance;\n    total: number;\n  };\n\n  export type DamageHealingOrCastAmounts = {\n    totalTime: number;\n    damageDowntime: number;\n    entries: Array<DamageHealingOrCastAmount>;\n  };\n\n  export type Component =\n    | JsonTreeComponent\n    | EnhancedMarkdownComponent\n    | ChartComponent\n    | TableComponent;\n\n  export type JsonTreeComponent = {\n    component: 'JsonTree';\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    props: object;\n  };\n\n  export type EnhancedMarkdownComponent = {\n    component: 'EnhancedMarkdown';\n    props: {\n      content: string;\n    };\n  };\n\n  export interface ChartComponent {\n    component: 'Chart';\n    /**\n     * Options for a chart. Internally, this uses Highcharts. Only some common properties have full typing,\n     * other types may be incomplete or absent. Consult the highcharts documentation for complete details\n     * on the possible options.\n     *\n     * Note that functions as part of a component return value are not supported due to serialization and\n     * security requirements.\n     *\n     * @see <a>https://api.highcharts.com/highcharts/</a>\n     */\n    props: RpgLogs.ChartComponentProps;\n  }\n\n  export type TableComponent = {\n    component: 'Table';\n    props: {\n      columns: Record<string, TableColumn>;\n      data: readonly Record<string, unknown>[];\n    };\n  };\n\n  type TableColumn = {\n    header: string;\n    width?: number;\n    maxWidth?: number;\n    minWidth?: number;\n    noWrap?: boolean;\n    textAlign?: 'left' | 'center' | 'right';\n    columns?: Record<string, TableColumn>;\n  };\n}\n\ndeclare global {\n  /**\n   * The current API version. Used to see if a report component is out of date.\n   */\n  const apiVersion: string;\n\n  /**\n   * The current report group.\n   */\n  const reportGroup: RpgLogs.ReportGroup;\n\n  /**\n   * The translated language. Null if no language is set. This is only set if the user is forcing all logs to be translated to a specific language.\n   */\n  const translatedLanguage: string | null;\n\n  /**\n   * Whether or not player names should be anonymized. You will not have access to the real names of the players if this is set.\n   */\n  const anonymizePlayerNames: boolean;\n\n  /**\n   * The filters in effect for the fight.\n   */\n  const fightFilters: RpgLogs.FightFilters;\n\n  /**\n   * The filters in effect for the fight.\n   */\n  const eventFilters: RpgLogs.EventFilters;\n\n  /**\n   * The styles object that can be used to obtain actor and ability colors for charts and tables.\n   */\n  const styles: RpgLogs.Styles;\n\n  /**\n   *\n   * @param params - The parameters to pass to getComponent.\n   * @returns The component that will be used.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  let getComponent: (params?: any) => RpgLogs.Component;\n\n  /**\n   * The pinMatchesFightEvent function returns true for script pins that match the passed in event.\n   */\n  let pinMatchesFightEvent: (\n    event: RpgLogs.AnyEvent,\n    fight: RpgLogs.Fight\n  ) => boolean;\n\n  /**\n   * The initializePinForFight function lets you initialize fight-specific data before doing a new loop through a fight's events.\n   * You should discard any previous fight data.\n   */\n  let initializePinForFight: (fight: RpgLogs.Fight) => void;\n}\n",nl="export namespace Highcharts {\n  type NYI = unknown;\n  // the T here is purely for documentation, not actually used\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface Unsupported<T = unknown> {\n    _: never;\n  }\n\n  /**\n   * A field where Highcharts supports HTML, but we do not. Tokens will be escaped.\n   * This will eventually be converted to Markdown, but that is NYI.\n   *\n   * Unfortunately, I can't get this docstring to show in Monaco, so it is duplicated on the text field.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-interface\n  interface Html extends string {} // see https://www.highcharts.com/docs/chart-concepts/security\n  type Css = NYI;\n  type GradientColorObject = { stops: Array<[number, color]> } & (\n    | {\n        linearGradient: { x1: number; x2: number; y1: number; y2: number };\n      }\n    | { radialGradient: { cx: number; cy: number; r: number } }\n  );\n\n  type Color = string | GradientColorObject;\n  enum DashStyle {\n    Dash = 'Dash',\n    DashDot = 'DashDot',\n    Dot = 'Dot',\n    LongDash = 'LongDash',\n    LongDashDot = 'LongDashDot',\n    LongDashDotDot = 'LongDashDotDot',\n    ShortDash = 'ShortDash',\n    ShortDashDot = 'ShortDashDot',\n    ShortDashDotDot = 'ShortDashDotDot',\n    ShortDot = 'ShortDot',\n    Solid = 'Solid',\n  }\n\n  enum LinecapStyle {\n    Butt = 'butt',\n    Round = 'round',\n    Square = 'square',\n  }\n\n  namespace Series {\n    /**\n     * requires modules/boost, which we may not have?\n     */\n    type BoostProps = {\n      boostBlending?: string;\n      boostThreshold?: number;\n    };\n\n    type AnimationProps = {\n      animation?: boolean;\n      animationLimit?: number;\n    };\n\n    type Data1D = number[];\n    type Data2D = Array<[number, number]>;\n    type DataNamed = Array<{\n      x?: number;\n      y?: number;\n      name?: string;\n      color?: Color;\n      [otherKey: string]: unknown;\n    }>;\n\n    type DataLabelOptions = NYI;\n    type DataSortingOptions = {\n      enabled?: boolean;\n      matchByName?: boolean;\n      sortKey?: string;\n    };\n\n    type ScatterJitterOptions = {\n      x: number;\n      y: number;\n    };\n\n    type ScatterLabelOptions = NYI;\n    type ScatterMarkerOptions = {\n      enabled?: boolean;\n      enabledThreshold?: number;\n      fillColor?: Color;\n      height?: number;\n      lineColor?: Color;\n      lineWidth?: number;\n      radius?: number;\n      symbol?: string;\n      width?: number;\n      states?: NYI;\n    };\n\n    type OmitDisallowed<T> = Omit<\n      T,\n      | 'animationLimit'\n      | 'cursor'\n      | 'dragDrop'\n      | 'events'\n      | 'pointDescriptionFormatter'\n      | 'turboThreshold'\n      | keyof BoostProps\n    >;\n\n    type CommonProps = AnimationProps &\n      BoostProps & {\n        accessibility?: NYI;\n        allowPointSelect?: boolean;\n        className?: string;\n        clip?: boolean;\n        color?: Color;\n        colorAxis?: number | string | boolean;\n        colorIndex?: number;\n        colorKey?: string;\n        crisp?: boolean;\n        cropThreshold?: number;\n        cursor?: string;\n        custom?: Record<string, unknown>;\n        dashStyle?: DashStyle;\n        data: Data1D | Data2D | DataNamed;\n        dataAsColumns?: boolean;\n        dataLabels?: DataLabelOptions;\n        dataSorting?: DataSortingOptions;\n        description?: string;\n        dragDrop?: NYI;\n        enableMouseTracking?: boolean;\n        events?: NYI;\n        getExtremesFromAll?: boolean;\n        id?: string;\n        includeInDataExport?: boolean;\n        index?: number;\n        keys?: string[];\n        label?: ScatterLabelOptions;\n        legendIndex?: number;\n        linecap?: LinecapStyle | string;\n        lineWidth?: number;\n        linkedTo?: string;\n        marker?: ScatterMarkerOptions;\n        name?: string;\n        negativeColor?: Color;\n        onPoint?: NYI;\n        opacity?: number;\n        point?: NYI;\n        pointDescriptionFormatter?: NYI;\n        pointInterval?: number;\n        pointIntervalUnit?: string;\n        pointPlacement?: 'on' | 'between' | number;\n        pointStart?: number;\n        relativeXValue?: boolean;\n        selected?: boolean;\n        shadow?: NYI;\n        showCheckbox?: boolean;\n        showInLegend?: boolean;\n        skipKeyboardNavigation?: boolean;\n        softThreshold?: boolean;\n        stack?: number | string;\n        stacking?: 'normal' | 'percent';\n        states?: NYI;\n        step?: 'left' | 'center' | 'right';\n        stickyTracking?: boolean;\n        threshold?: number | null;\n        tooltip?: NYI;\n        turboThreshold?: number;\n        visible?: boolean;\n        xAxis?: number | string;\n        yAxis?: number | string;\n        zIndex?: number;\n        zoneAxis?: 'x' | 'y' | 'z';\n        zones?: NYI;\n      };\n\n    type BaseSeries<T extends string> = OmitDisallowed<CommonProps> & {\n      type: T;\n    };\n\n    /**\n     * @see https://api.highcharts.com/highcharts/series.scatter\n     */\n    export type Scatter = BaseSeries<'scatter'> &\n      Partial<{\n        cluster: NYI;\n        jitter: ScatterJitterOptions;\n      }>;\n\n    /**\n     * @see https://api.highcharts.com/highcharts/series.line\n     */\n    export type Line = BaseSeries<'line'> &\n      Partial<{\n        connectEnds: boolean;\n        connectNulls: boolean;\n        findNearestPointBy: string;\n      }>;\n\n    /**\n     * @see https://api.highcharts.com/highcharts/series.bar\n     */\n    export type Bar = BaseSeries<'bar'> & {\n      borderColor: Color;\n      borderRadius: number;\n      borderWidth: number;\n      centerInCategory: boolean;\n      edgeColor: Color;\n      edgeWidth: number;\n      findNearestPointBy: string;\n      grouping: boolean;\n      groupPadding: number;\n      groupZPadding: number;\n      pointRange: number | null;\n      depth: number;\n    };\n\n    // sometimes any is justified, man\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    type ExtendedSeries<T extends BaseSeries<any>, Key> = Omit<T, 'type'> & {\n      type: Key;\n    };\n\n    /**\n     * @see https://api.highcharts.com/highcharts/series.histogram\n     */\n    export type Histogram = ExtendedSeries<Bar, 'histogram'> &\n      Partial<{\n        /**\n         * The number of bins to use.\n         *\n         * The Highchart docs indicate that you can use a function for this, but that is not supported\n         * within a report component.\n         */\n        binsNumber: 'square-root' | 'sturges' | 'rice' | number;\n        binWidth: number;\n        connectEnds: boolean;\n        connectNulls: boolean;\n      }>;\n\n    /**\n     * @see https://api.highcharts.com/highcharts/series.boxplot\n     */\n    export type BoxPlot = BaseSeries<'boxplot'> &\n      Partial<{\n        boxDashStyle: DashStyle;\n        centerInCategory: boolean;\n        colorByPoint: boolean;\n        colors: Color[];\n        connectEnds: boolean;\n        connectNulls: boolean;\n        depth: number;\n        edgeColor: Color;\n        edgeWidth: number;\n        fillColor: Color;\n        grouping: boolean;\n        groupPadding: number;\n        medianColor: Color;\n        medianDashStyle: DashStyle;\n        medianWidth: number | null;\n        minPointLength: number;\n        pointRange: number | null;\n        stemDashStyle: DashStyle;\n        stemWidth: number;\n        whiskerColor: Color;\n        whiskerDashStyle: DashStyle;\n        whiskerLength: number;\n        whiskerWidth: number;\n      }>;\n\n    type KnownSeries = Scatter | Line | Histogram | Bar | BoxPlot;\n    type UnknownSeries = BaseSeries<unknown>;\n\n    /**\n     * @see https://api.highcharts.com/highcharts/series\n     */\n    export type Any = KnownSeries | UnknownSeries;\n  }\n\n  type AsOptions<T> = Omit<T, 'data'>;\n\n  type TextOptions = Partial<{\n    align: 'left' | 'center' | 'right';\n    floating: boolean;\n    margin: number;\n    /**\n     * Text to display.\n     *\n     * Note that while Highcharts supports HTML, we do not. HTML-like tokens will be escaped.\n     * This will eventually be converted to Markdown, but that is NYI.\n     *\n     * This note applies to all fields labeled with the `Html` type.\n     */\n    text: Html;\n    verticalAlign: 'top' | 'middle' | 'bottom';\n    x: number;\n    y: number;\n    useHTML: boolean;\n    style: Css;\n  }>;\n\n  type TooltipOptions = Partial<{\n    animation: boolean;\n    backgroundColor: Color;\n    borderColor: Color;\n    borderRadius: number;\n    borderWidth: number;\n    className: Unsupported;\n    dateTimeLabelFormats: NYI;\n    distance: number;\n    enabled: boolean;\n    followPointer: boolean;\n    followTouchMove: boolean;\n    clusterFormat: Html;\n    footerFormat: Html;\n    formatter: Unsupported;\n    headerFormat: Html;\n    headerShape: NYI;\n    hideDelay: number;\n    nullFormat: Html;\n    nullFormatter: Unsupported;\n    outside: boolean;\n    padding: number;\n    pointFormat: Html;\n    positioner: Unsupported;\n    shadow: boolean | NYI;\n    shape: 'callout' | 'circle' | 'square';\n    shared: boolean;\n    snap: number;\n    split: boolean;\n    stickOnContact: boolean;\n    style: Css;\n    useHTML: boolean;\n    valueDecimals: number | undefined;\n    valuePrefix: string;\n    valueSuffix: string;\n    xDateFormat: string;\n  }>;\n\n  type AxisOptions = Partial<{\n    accessibility: NYI;\n    alignTicks: boolean;\n    allowDecimals: boolean;\n    alternateGridColor: Color;\n    angle: number;\n    breaks: NYI;\n    categories: string[];\n    ceiling: number;\n    className: Unsupported;\n    crosshair: NYI;\n    dateTimeLabelFormats: NYI;\n    endOnTick: boolean;\n    events: Unsupported;\n    floor: number;\n    gridLineColor: Color;\n    gridLineDashStyle: DashStyle;\n    gridLineInterpolation: 'circle' | 'polygon';\n    gridLineWidth: number;\n    gridZIndex: number;\n    height: number | string;\n    id: string;\n    labels: NYI;\n    left: number | string;\n    lineColor: Color;\n    lineWidth: number;\n    linkedTo: number;\n    margin: number;\n    max: number | null;\n    maxPadding: number;\n    min: number | null;\n    minorGridLineColor: Color;\n    minorGridLineDashStyle: DashStyle;\n    minorGridLineWidth: number;\n    minorTickColor: Color;\n    minorTickInterval: number | string | null;\n    minorTickLength: number;\n    minorTickPosition: string;\n    minorTicks: boolean;\n    minorTickWidth: number;\n    minPadding: number;\n    minRange: number;\n    minTickInterval: number;\n    offset: number;\n    opposite: boolean;\n    pane: number;\n    panningEnabled: boolean;\n    plotBands: NYI;\n    plotLines: NYI;\n    reversed: boolean;\n    reversedStacks: boolean;\n    showEmpty: boolean;\n    showFirstLabel: boolean;\n    showLastLabel: boolean;\n    softMax: number;\n    softMin: number;\n    startOfWeek: number;\n    startOnTick: boolean;\n    tickAmount: number;\n    tickColor: Color;\n    tickInterval: number;\n    tickLength: number;\n    tickmarkPlacement: string;\n    tickPixelInterval: number;\n    tickPosition: string;\n    tickPositioner: Unsupported;\n    tickPositions: number[];\n    tickWidth: number | undefined;\n    title: NYI;\n    top: number | string;\n    type: 'linear' | 'logarithmic' | 'datetime' | 'category';\n    uniqueNames: boolean;\n    units: NYI;\n    visible: boolean;\n    width: number | string;\n    zIndex: number;\n    zoomEnabled: boolean;\n  }>;\n\n  type ChartOptions = NYI;\n\n  export type Options = {\n    plotOptions?: {\n      [Key in Series.Any['type']]: AsOptions<\n        Extract<Series.Any, { type: Key }>\n      >;\n    };\n    colors?: Color[];\n    series: Series.Any[];\n    caption?: TextOptions;\n    title?: TextOptions;\n    subtitle?: TextOptions;\n    tooltip?: TooltipOptions;\n    xAxis?: AxisOptions;\n    yAxis?: AxisOptions;\n    zAxis?: AxisOptions;\n    colorAxis?: NYI; // does not really share axis options with the x/y/z axes\n    colors?: Color[];\n    chart?: ChartOptions;\n    annotations?: NYI[];\n    legend?: NYI;\n    labels?: NYI;\n    pane?: NYI;\n    time?: NYI;\n  };\n}\n\nexport namespace RpgLogs {\n  // this lint is disabled because interfaces show the new name in the Monaco editor, but type aliases do not\n  // eslint-disable-next-line @typescript-eslint/no-empty-interface\n  export interface ChartComponentProps extends Highcharts.Options {}\n}\n";const al={warcraft:"export namespace RpgLogs {\n  export interface Fight {\n    /**\n     * The season of Classic the fight belongs to. For example, Season of Mastery will have a season id of 1.\n     */\n    classicSeasonId: number | null;\n\n    /**\n     * If the fight is a keystone dungeon, then this field contains the keystone level. Null otherwise.\n     */\n    keystoneDungeonLevel: number | null;\n\n    /**\n     * If the fight is a keystone dungeon, then this field contains the official completion time. Null otherwise.\n     */\n    keystoneDungeonTime: number | null;\n\n    /**\n     * If the fight is a keystone dungeon, then this field contains the set of affixes in effect. Null otherwise.\n     */\n    keystoneDungeonAffixes: Array<number> | null;\n\n    /**\n     * If the fight is a tower run (e.g., Torghast), then this field contains the layer number. Null otherwise.\n     */\n    towerLayer: number | null;\n\n    /**\n     * Whether or not the fight had classic world buffs on any player (Vanilla only)\n     */\n    hasClassicWorldBuffs: boolean;\n  }\n\n  export interface Ability {\n    /**\n     * Whether or not the ability is the stagger absorb that happens when a Brewmaster takes damage.\n     */\n    isStaggerAbsorb: boolean;\n\n    /**\n     * Whether or not the ability is the deferred stagger damage that happens after a Brewmaster took an earlier hit.\n     */\n    isStaggerDmaage: boolean;\n  }\n\n  export interface ResourceData {\n    /**\n     * The current attack power of the actor.\n     */\n    attackPower: number;\n\n    /**\n     * The current spell power of the actor.\n     */\n    spellPower: number;\n\n    /**\n     * The current item level of the actor.\n     */\n    itemLevel: number;\n\n    /**\n     * Only for Mists of Pandaria Logs, the resolve of a tank actor. Null for other expansions.\n     */\n    resolve: number | null;\n\n    /**\n     * The current armor of the actor. Does not exist in older logs.\n     */\n    armor: number | null;\n\n    /**\n     * The current absorb shield on the actor. Does not exist in older logs.\n     */\n    absorb: number | null;\n\n    /**\n     * The map id that the logging unit is on (not the unit represented by the resources). Not present in older logs.\n     */\n    mapId: number | null;\n\n    resourceAmount: number;\n    resourceCap: number;\n    resourceCost: number;\n    resourceType: number;\n    additionalResources: ClassResource | null;\n    /**\n     * Percent of avoidance at the time of this event. E.g. 1962 = 19.62%\n     */\n    avoidance: number | null;\n    /**\n     * Percent of versatility at the time of this event. E.g. 1962 = 19.62%\n     */\n    versatility: number | null;\n  }\n\n  export interface ClassResource {\n    resourceAmount: number;\n    resourceCap: number;\n    resourceCost: number;\n    resourceType: number;\n    next: ClassResource;\n  }\n\n  export type CombatantInfoStats = {\n    strength: number;\n    agility: number;\n    stamina: number;\n    intellect: number;\n    spirit: number;\n\n    dodge: number;\n    parry: number;\n    block: number;\n    armor: number;\n    critMelee: number;\n    critRanged: number;\n    critSpell: number;\n    hasteMelee: number;\n    hasteRanged: number;\n    hasteSpell: number;\n\n    // Retail\n    speed: number;\n    leech: number;\n    avoidance: number;\n    mastery: number;\n    versatilityDamageDone: number;\n    versatilityHealingDone: number;\n    versatilityDamageReduction: number;\n\n    // TBC\n    hitMelee: number;\n    hitRanged: number;\n    hitSpell: number;\n    expertise: number;\n    resilienceCritTaken: number;\n    resilienceDamageTaken: number;\n  };\n\n  export type CombatantInfoCustomPower = {\n    spellId: number;\n    traitId: number;\n    rank: number | null;\n    slot: number | null;\n    icon: string | null;\n    isMajor: boolean;\n  };\n\n  export type CombatantInfoGem = {\n    id: number;\n    itemLevel: number;\n  };\n\n  export type CombatantInfoGear = {\n    id: number;\n    itemLevel: number;\n    icon: string | null;\n    name: string;\n    quality: number;\n    permanentEnchant: number;\n    temporaryEnchant: number;\n    onUseEnchant: number;\n    gems: Array<CombatantInfoGem> | null;\n  };\n\n  export type CombatantInfoShadowlandsLegendary = {\n    effectId: number;\n    effectIcon: string | null;\n  };\n\n  export type TalentTreeNode = {\n    id: number;\n    spellId: number;\n    nodeId: number;\n    rank: number;\n    icon?: string;\n  };\n\n  export type ExpansionType =\n    | 'unknown'\n    | 'vanilla'\n    | 'tbc'\n    | 'wrath'\n    | 'legion'\n    | 'bfa'\n    | 'shadowlands'\n    | 'dragonflight';\n\n  export interface CombatantInfoEvent extends Event {\n    /**\n     * The expansion that the combatant info event is for.\n     */\n    expansion: ExpansionType;\n\n    /**\n     * Whether the player is horde or alliance. In older expansions, this will be unset.\n     */\n    factionId: number | null;\n\n    /**\n     * The Blizzard spec id for the player.\n     */\n    specId: number;\n\n    /**\n     * For Shadowlands only, the covenant of the player.\n     */\n    covenantId: number;\n\n    /**\n     * For Shadowlands only, the soulbind of the player.\n     */\n    soulbindId: number;\n\n    /**\n     * For Classic expansions only, an array of 3 numbers representing the points spent in talents.\n     */\n    talentPoints: Array<number>;\n\n    /**\n     * For Legion, BFA and Shadowlands only, an array of 7 numbers representing the choices on each talent row.\n     */\n    talentRows: Array<number>;\n\n    /**\n     * For Dragonflight only, an array of talent tree node objects representing the chosen path in the talent tree.\n     */\n    talentTree: Array<TalentTreeNode>;\n\n    /**\n     * For all retail expansions, the set of chosen PvP talents.\n     */\n    pvpTalents: Array<number>;\n\n    /**\n     * Stats for the player, including all primary and secondary stats.\n     */\n    stats: CombatantInfoStats;\n\n    /**\n     * Gear worn by the player\n     */\n    gear: Array<CombatantInfoGear & CombatantInfoShadowlandsLegendary>;\n\n    /**\n     * The primary borrowed power for a given expansion.\n     * Artifacts in Legion, Azerite Powers in BfA, Soulbinds in Shadowlands.\n     */\n    primaryCustomPowerSet: Array<CombatantInfoCustomPower> | null;\n\n    /**\n     * The secondary borrowed power for a given expansion.\n     * Heart Essences in BfA 8.2+, Conduits in Shadowlands.\n     */\n    secondaryCustomPowerSet: Array<CombatantInfoCustomPower> | null;\n\n    /**\n     * The tertiary borrowed power for a given expansion.\n     * Anima Powers in Shadowlands.\n     */\n    tertiaryCustomPowerSet: Array<CombatantInfoCustomPower> | null;\n  }\n\n  export type DamageHitType =\n    | 'miss'\n    | 'hit'\n    | 'criticalHit'\n    | 'absorbedHit'\n    | 'blockedHit'\n    | 'blockedCriticalHit'\n    | 'glancingBlow'\n    | 'dodge'\n    | 'parry'\n    | 'deflect'\n    | 'immune'\n    | 'misfire'\n    | 'reflect'\n    | 'evade'\n    | 'resist'\n    | 'crushingBlow'\n    | 'partialResistedHit'\n    | 'partialResistedCriticalHit'\n    | 'unknown';\n\n  export interface DamageEvent extends Event {\n    /**\n     * The hit type of the event.\n     */\n    hitType: DamageHitType;\n\n    /**\n     * The amount of damage blocked.\n     */\n    blocked: number;\n\n    /**\n     * For partial resists, the amount of damage resisted.\n     */\n    resisted: number;\n\n    /**\n     * Whether or not the event was a crushing blow.\n     */\n    isCrushingBlow: boolean;\n\n    /**\n     * Whether or not the event was a glancing blow.\n     */\n    isGlancingBlow: boolean;\n\n    /**\n     * Whether or not the event was a multistrike\n     */\n    isMultiStrike: boolean;\n\n    /**\n     * Whether or not the event was an AoE\n     */\n    isAoE: boolean;\n  }\n\n  export interface HealingEvent extends Event {\n    /**\n     * Whether or not the event was a multistrike\n     */\n    isMultiStrike: boolean;\n  }\n\n  export interface CreateEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'create';\n  }\n\n  export interface DestroyEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'destroy';\n  }\n\n  export interface ExtraAttacksEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'extraattacks';\n\n    /**\n     * The nunber of extra attacks granted to the target by the ability (e.g., Windfury).\n     */\n    extraAttacks: number;\n  }\n\n  export interface DrainEvent extends AbstractResourceChangeEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'drain';\n  }\n\n  export interface LeechEvent extends AbstractResourceChangeEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'leech';\n  }\n\n  export interface AuraBrokenEvent extends SpellStoppedEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'aurabroken';\n  }\n\n  export interface SpellstealEvent extends SpellStoppedEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'spellsteal';\n  }\n\n  export interface SummonEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'summon';\n  }\n\n  export interface TowerStartEvent extends AbstractEncounterStartEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'towerstart';\n\n    layer: number;\n  }\n\n  export interface TowerEndEvent extends AbstractEncounterEndEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'towerend';\n\n    layer: number;\n    rating: number;\n  }\n\n  export interface ArenaMatchStartEvent extends AbstractEncounterStartEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'arenamatchstart';\n\n    /**\n     * The PvP season the match is occurring in.\n     */\n    pvpSeason: number;\n\n    /**\n     * Whether or not the match is rated.\n     */\n    isRated: boolean;\n  }\n\n  export interface ArenaMatchEndEvent extends AbstractEncounterEndEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'arenamatchend';\n\n    /**\n     * Which team was the victor.\n     */\n    winner: number;\n\n    /**\n     * The first team's MMR.\n     */\n    team1MMR: number;\n\n    /**\n     * The second team's MMR.\n     */\n    team2MMR: number;\n  }\n\n  export interface EmpowerStartEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'empowerstart';\n  }\n\n  export interface EmpowerEndEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'empowerend';\n\n    /**\n     * The empowerment level that the spell was successfully released at.\n     */\n    empowermentLevel: number;\n  }\n\n  export type AnyEvent =\n    | CoreEvent\n    | AuraBrokenEvent\n    | CreateEvent\n    | DestroyEvent\n    | DrainEvent\n    | ExtraAttacksEvent\n    | LeechEvent\n    | SpellstealEvent\n    | SummonEvent\n    | TowerStartEvent\n    | TowerEndEvent\n    | ArenaMatchStartEvent\n    | ArenaMatchEndEvent\n    | EmpowerStartEvent\n    | EmpowerEndEvent;\n}\n",ff:"export namespace RpgLogs {\n  export interface Fight {\n    /**\n     * Whether a player involved in the fight had the Echo buff.\n     */\n    hasEcho: boolean;\n\n    /**\n     * The combat time used for speed run rankings and dps rankings. Only set as of 6.4 or later.\n     */\n    combatTime: number;\n\n    /**\n     * Whether the party is a standard composition, defined as 2 tanks, 2 healers, and no more than 2 of a specific job.\n     */\n    isStandardComposition: boolean;\n\n    /**\n     * If deobfuscation of head markers is supported, this offset will be non-zero and can be added to the marker id\n     * of a head marker event to get the true head marker number.\n     */\n    headMarkerOffset: number;\n\n    /**\n     * Returns whether or not a calculated damage or healing event is a ghost action, i.e.,\n     * it has no corresponding direct damage or healing event.\n     * @param event - The event to check.\n     * @returns Whether or not the event is a ghost action.\n     */\n    isUnpairedCalculationEvent(event: Event): boolean;\n\n    /**\n     * The level for a given actor.\n     * @param actor - The player to fetch the level for.\n     * @returns - The level of the actor\n     */\n    levelForPlayer(actor: Actor): number;\n\n    /**\n     * Obtain all events entrained by a given cast, e.g., all damage, healing, DoTs and HoTs, caused by the cast.\n     * @param castEvent - The cast to fetch the events for.\n     * @returns - An array of events\n     */\n    eventsForCast(castEvent: CastEvent): Event[];\n  }\n\n  export interface Ability {\n    /**\n     * Whether or not the ability is the combined DoT/HoT tick ability used to represent combined ticks on a unit.\n     */\n    isSimulatedCompositeTick: boolean;\n  }\n\n  export interface ResourceData {\n    /**\n     * The current MP of the actor.\n     */\n    magicPoints: number;\n\n    /**\n     * The maximum MP of the actor.\n     */\n    maxMagicPoints: number;\n\n    /**\n     * The current TP of the actor. Only used in older expansions.\n     */\n    tacticalPoints: number;\n\n    /**\n     * The maximum TP of the actor. Only used in older expansions.\n     */\n    maxTacticalPoints: number;\n\n    /**\n     * The strength of the absorb shield on the actor. Represented as a percentage of the actor's health.\n     */\n    absorb: number;\n  }\n\n  export type CombatantInfoStats = {\n    strength: number;\n    dexterity: number;\n    vitality: number;\n    intelligence: number;\n    mind: number;\n    piety: number;\n    attack: number;\n    directHit: number;\n    criticalHit: number;\n    attackMagicPotency: number;\n    healMagicPotency: number;\n    determination: number;\n    skillSpeed: number;\n    spellSpeed: number;\n    tenacity: number;\n  };\n\n  export interface CombatantInfoEvent extends Event {\n    /**\n     * The synced level of the player for this fight.\n     */\n    level: number;\n\n    /**\n     * A set of stats for the player. Only the logging player's stats are included.\n     */\n    stats: CombatantInfoStats | null;\n  }\n\n  export type DamageHitType =\n    | 'hit'\n    | 'criticalHit'\n    | 'blockedHit'\n    | 'blockedCriticalHit'\n    | 'dodge'\n    | 'invulnerable'\n    | 'resist'\n    | 'parriedHit'\n    | 'parriedCriticalHit'\n    | 'unknown';\n\n  export interface DamageEvent extends Event {\n    /**\n     * The hit type of the event.\n     */\n    hitType: DamageHitType;\n\n    /**\n     * The amount of damage blocked or parried.\n     */\n    blocked: number;\n\n    /**\n     * Whether or not the event was a direct hit.\n     */\n    isDirectHit: boolean;\n\n    /**\n     * The packet id to connect a direct damage event and a calculated damage event.\n     */\n    packetId: number;\n\n    /**\n     * For combos, the percentage bonus damage logged.\n     */\n    bonusPercent: number;\n\n    /**\n     * The damage or healing multiplier for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    multiplierTotalFromStatusEffects: number;\n\n    /**\n     * The additive critical hit buff for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    criticalHitTotalFromStatusEffects: number;\n\n    /**\n     * The additive direct hit buff for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    directHitTotalFromStatusEffects: number;\n\n    /**\n     * The set of critical hit status effects in effect.\n     */\n    criticalHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of direct hit status effects in effect.\n     */\n    directHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of multiplicative status effects in effect.\n     */\n    multiplierStatusEffects: StatusEffectInfo[];\n  }\n\n  export interface HealingEvent extends Event {\n    /**\n     * The damage or healing multiplier for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    multiplierTotalFromStatusEffects: number;\n\n    /**\n     * The additive critical hit buff for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    criticalHitTotalFromStatusEffects: number;\n\n    /**\n     * The additive direct hit buff for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    directHitTotalFromStatusEffects: number;\n\n    /**\n     * The set of critical hit status effects in effect.\n     */\n    criticalHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of direct hit status effects in effect.\n     */\n    directHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of multiplicative status effects in effect.\n     */\n    multiplierStatusEffects: StatusEffectInfo[];\n  }\n\n  export interface CalculatedDamageEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'calculateddamage';\n\n    /**\n     * The amount of damage done excluding absorbs and overkill.\n     */\n    amount: number;\n\n    /**\n     * The amount absorbed by the shield.\n     */\n    absorbed: number;\n\n    /**\n     * The amount of mitigated damage. Excludes absorbs, but does include mitigation from blocking, armor and damage reductions.\n     */\n    mitigated: number;\n\n    /**\n     * The raw unmitigated damage. Not supported by every game.\n     */\n    unmitigatedAmount: number;\n\n    /**\n     * The amount of overkill, null if no overkill exists.\n     */\n    overkill: number | null;\n\n    /**\n     * Whether or not the event was a miss.\n     */\n    isMiss: boolean;\n\n    /**\n     * Whether or not the event is a critical hit.\n     */\n    isCriticalHit: number;\n\n    /**\n     * The hit type of the event.\n     */\n    hitType: DamageHitType;\n\n    /**\n     * The amount of damage blocked or parried.\n     */\n    blocked: number;\n\n    /**\n     * Whether or not the event was a direct hit.\n     */\n    isDirectHit: boolean;\n\n    /**\n     * The packet id to connect a direct damage event and a calculated damage event.\n     */\n    packetId: number;\n\n    /**\n     * The damage or healing multiplier for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    multiplierTotalFromStatusEffects: number;\n\n    /**\n     * The additive critical hit buff for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    criticalHitTotalFromStatusEffects: number;\n\n    /**\n     * The additive direct hit buff for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    directHitTotalFromStatusEffects: number;\n\n    /**\n     * The set of critical hit status effects in effect.\n     */\n    criticalHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of direct hit status effects in effect.\n     */\n    directHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of multiplicative status effects in effect.\n     */\n    multiplierStatusEffects: StatusEffectInfo[];\n\n    /**\n     * For combos, the percentage bonus damage logged.\n     */\n    bonusPercent: number;\n  }\n\n  export interface CalculatedHealingEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'calculatedheal';\n\n    /**\n     * The amount of damage done excluding absorbs and overheal.\n     */\n    amount: number;\n\n    /**\n     * The amount absorbed by the shield.\n     */\n    absorbed: number;\n\n    /**\n     * The amount of overheal.\n     */\n    overheal: number;\n\n    /**\n     * Whether or not the event is a critical hit.\n     */\n    isCriticalHit: number;\n\n    /**\n     * The hit type of the event.\n     */\n    hitType: HealingHitType;\n\n    /**\n     * The damage or healing multiplier for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    multiplierTotalFromStatusEffects: number;\n\n    /**\n     * The additive critical hit buff for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    criticalHitTotalFromStatusEffects: number;\n\n    /**\n     * The additive direct hit buff for the event, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    directHitTotalFromStatusEffects: number;\n\n    /**\n     * The set of critical hit status effects in effect.\n     */\n    criticalHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of direct hit status effects in effect.\n     */\n    directHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of multiplicative status effects in effect.\n     */\n    multiplierStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The packet id to connect a direct damage event and a calculated damage event.\n     */\n    packetId: number;\n  }\n\n  export type StatusEffectInfo = {\n    /**\n     * The source actor that applied the status effect.\n     */\n    source: Actor;\n\n    /**\n     * The target actor that received the status effect.\n     */\n    target: Actor;\n\n    /**\n     * The status effect ability.\n     */\n    ability: Ability;\n\n    /**\n     * The amount of the effect (additive for crit/direct hit and multiplicative for healing/damage multipliers).\n     */\n    amount: number;\n  };\n\n  export interface SimulatedTickEvent extends Event {\n    /**\n     * The expected amount of the tick (before crit and dh are factored in). This is as close to the guessed amount as we can get based off the low\n     * byte of supplied tick information.\n     */\n    expectedAmount: number;\n\n    /**\n     * The actual finalized amount of the tick including expected crit and direct hit bonus damage.\n     */\n    finalizedAmount: number;\n\n    /**\n     * The amount we guessed for the tick amount (before crit and dh are factored in) based off the potency of the tick and how much damage/healing\n     * we believe the actor does per point of potency.\n     */\n    guessAmount: number;\n\n    /**\n     * The expected crit rate for the actor. Based off the supplied low byte of crit rate in the tick.\n     */\n    expectedCritRate: number;\n\n    /**\n     * The damage or healing multiplier for the tick, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    multiplierTotalFromStatusEffects: number;\n\n    /**\n     * The additive critical hit buff for the tick, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    criticalHitTotalFromStatusEffects: number;\n\n    /**\n     * The additive direct hit buff for the tick, e.g., 1.1 if the player has a 10% buff applied.\n     */\n    directHitTotalFromStatusEffects: number;\n\n    /**\n     * The set of critical hit status effects in effect.\n     */\n    criticalHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of direct hit status effects in effect.\n     */\n    directHitStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The set of multiplicative status effects in effect.\n     */\n    multiplierStatusEffects: StatusEffectInfo[];\n\n    /**\n     * The estimated direct hit percentage for the actor. This is not supplied in the tick itself, so has to just be estimated from\n     * normal damage/healing.\n     */\n    directHitPercentage: number;\n\n    /**\n     * The actor's potency ratio, i.e., how much damage or healing we believe they do per point of potency.\n     */\n    actorPotencyRatio: number;\n\n    /**\n     * Whether or not the event is simulated. Returns true.\n     */\n    isSimulated: number;\n\n    /**\n     * Whether or not the event is a tick. Returns true.\n     */\n    isTick: number;\n\n    /**\n     * For DoT/HoT ticks on invulnerable targets, this will be set. Examples of this include E7S and Ruby Weapon II.\n     */\n    isInvulnerable: number;\n  }\n\n  export interface SimulatedDamageTickEvent extends SimulatedTickEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'damage';\n\n    /**\n     * The amount of damage done excluding absorbs and overkill.\n     */\n    amount: number;\n\n    /**\n     * The amount absorbed by the shield.\n     */\n    absorbed: number;\n\n    /**\n     * The amount of mitigated damage. Excludes absorbs, but does include mitigation from blocking, armor and damage reductions.\n     */\n    mitigated: number;\n\n    /**\n     * The raw unmitigated damage. Not supported by every game.\n     */\n    unmitigatedAmount: number;\n\n    /**\n     * The amount of effective damage done by the event.\n     */\n    effectiveDamage: number;\n\n    /**\n     * The amount of damage absorbed for this event.\n     */\n    absorbedDamage: number;\n\n    /**\n     * The amount of effective healing done by the event.\n     */\n    effectiveHealing: number;\n\n    /**\n     * The amount of healing done via absorbs for this event.\n     */\n    absorbedHealing: number;\n\n    /**\n     * The amount of overkill, null if no overkill exists.\n     */\n    overkill: number | null;\n\n    /**\n     * Whether or not the event was a miss.\n     */\n    isMiss: boolean;\n\n    /**\n     * Whether or not the event is a tick (DoT).\n     */\n    isTick: boolean;\n\n    /**\n     * The hit type of the event.\n     */\n    hitType: DamageHitType;\n  }\n\n  export interface SimulatedHealingTickEvent extends SimulatedTickEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'heal';\n\n    /**\n     * The amount of damage done excluding absorbs and overheal.\n     */\n    amount: number;\n\n    /**\n     * The amount of effective healing done by the event.\n     */\n    effectiveHealing: number;\n\n    /**\n     * The amount of healing done via absorbs for this event.\n     */\n    absorbedHealing: number;\n\n    /**\n     * The amount of overheal.\n     */\n    overheal: number;\n\n    /**\n     * Whether or not the event is a tick (DoT).\n     */\n    isTick: boolean;\n\n    /**\n     * The hit type of the event.\n     */\n    hitType: HealingHitType;\n  }\n\n  export interface InstanceSealUpdateEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'instancesealupdate';\n\n    /**\n     * The game id of the place whose sealed status is updating.\n     */\n    placeId: number;\n\n    /**\n     * The name of the place being sealed or unsealed.\n     */\n    placeName: string;\n\n    /**\n     * The seal type is 1 for 15 seconds to seal going up, 2 for now sealed, and 3 for no longer sealed.\n     */\n    sealType: number;\n  }\n\n  export interface LimitBreakUpdateEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'limitbreakupdate';\n\n    /**\n     * The current limit break value.\n     */\n    value: number;\n\n    /**\n     * How many bars the limit break gauge has.\n     */\n    bars: number;\n  }\n\n  export interface TargetabilityUpdateEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'targetabilityupdate';\n\n    /**\n     * Whether or not the enemy is now targetable.\n     */\n    isTargetable: boolean;\n  }\n\n  export interface HeadMarkerEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'headmarker';\n\n    /**\n     * The obfuscated head marker id that was placed on the actor.\n     */\n    markerId: number;\n  }\n\n  export interface TetherEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'tether';\n\n    /**\n     * The tether id that connects the source and target.\n     */\n    tetherId: number;\n  }\n\n  export interface GaugeUpdateEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'gaugeupdate';\n\n    /**\n     * The gauge id.\n     */\n    gaugeId: number;\n\n    data1: string;\n    data2: string;\n    data3: string;\n    data4: string;\n  }\n\n  export interface ChecksumMismatchEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'checksummismatch';\n  }\n\n  export type AnyEvent =\n    | CoreEvent\n    | CalculatedDamageEvent\n    | CalculatedHealingEvent\n    | ChecksumMismatchEvent\n    | InstanceSealUpdateEvent\n    | LimitBreakUpdateEvent\n    | SimulatedDamageTickEvent\n    | SimulatedHealingTickEvent\n    | TargetabilityUpdateEvent\n    | HeadMarkerEvent\n    | TetherEvent\n    | GaugeUpdateEvent;\n\n  export type DamageHealingOrCastAmount = {\n    totalRDHPS: number;\n  };\n}\n",eso:"export namespace RpgLogs {\n  export interface Fight {\n    /**\n     * The ending score for the entire trial.\n     */\n    trialScore: number;\n\n    /**\n     * The time (in milliseconds) that the trial took.\n     */\n    trialTime: number;\n  }\n\n  export interface ResourceData {\n    /**\n     * The current magicka of the actor.\n     */\n    magicka: number;\n\n    /**\n     * The max magicka of the actor.\n     */\n    maxMagicka: number;\n\n    /**\n     * The current stamina of the actor.\n     */\n    stamina: number;\n\n    /**\n     * The max stamina of the actor.\n     */\n    maxStamina: number;\n\n    /**\n     * The current progress towards ultimate of the actor.\n     */\n    ultimate: number;\n\n    /**\n     * The max ultimate of the actor.\n     */\n    maxUltimate: number;\n\n    /**\n     * The current werewolf resource of the actor.\n     */\n    werewolf: number;\n\n    /**\n     * The max werewolf resource of the actor.\n     */\n    maxWerewolf: number;\n\n    /**\n     * The champion points of a player.\n     */\n    championPoints: number;\n\n    /**\n     * The current absorb shield strength on an actor.\n     */\n    absorb: number;\n  }\n\n  export interface CombatantInfoGear {\n    id: number;\n    type: number;\n    championPoints: number;\n    icon: string | null;\n    quality: number;\n    trait: number;\n    setId: number;\n    enchantType: number;\n    enchantQuality: number;\n  }\n\n  export interface CombatantInfoEvent extends Event {\n    actionBars: Array<number>;\n    gear: Array<CombatantInfoGear>;\n  }\n\n  export interface ReflectDamageEvent extends DamageEvent {\n    /**\n     * The type of the event.\n     */\n    type: 'reflect';\n\n    /**\n     * The ability that was reflected. Note this event is not supported by all games that have reflects, since\n     * it depends on the game actually communicating the reflected ability in a reflect log line.\n     */\n    reflectedAbility: Ability;\n  }\n\n  export type DamageHitType =\n    | 'miss'\n    | 'hit'\n    | 'criticalHit'\n    | 'absorbedHit'\n    | 'blockedHit'\n    | 'blockedCriticalHit'\n    | 'dodge'\n    | 'parry'\n    | 'deflect'\n    | 'immune'\n    | 'misfire'\n    | 'reflect'\n    | 'evade'\n    | 'resist'\n    | 'unknown';\n\n  export interface DamageEvent extends Event {\n    /**\n     * The hit type of the event.\n     */\n    hitType: DamageHitType;\n\n    /**\n     * The amount of damage blocked.\n     */\n    blocked: number;\n  }\n\n  export interface TrialEndEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'trialend';\n\n    /**\n     * The game id of the trial.\n     */\n    trialId: number;\n\n    /**\n     * The completion time.\n     */\n    completionTime: number;\n\n    /**\n     * Whether or not the trial succeeded.\n     */\n    success: boolean;\n\n    /**\n     * The score.\n     */\n    score: number;\n  }\n\n  export type AnyEvent = CoreEvent | TrialEndEvent | ReflectDamageEvent;\n}\n",swtor:"export namespace RpgLogs {\n  export interface CombatantInfoEvent extends Event {\n    /**\n     * The established combat style for the player.\n     */\n    combatStyleId: string | null;\n\n    /**\n     * The established discipline for the player.\n     */\n    disciplineId: string | null;\n  }\n\n  export type DamageHitType =\n    | 'miss'\n    | 'hit'\n    | 'criticalHit'\n    | 'absorbedHit'\n    | 'shieldedHit'\n    | 'shieldedCriticalHit'\n    | 'dodge'\n    | 'parry'\n    | 'deflect'\n    | 'immune'\n    | 'misfire'\n    | 'reflect'\n    | 'evade'\n    | 'resist'\n    | 'unknown';\n\n  export interface DamageEvent extends Event {\n    /**\n     * The hit type of the event.\n     */\n    hitType: DamageHitType;\n\n    /**\n     * The amount of damage shielded.\n     */\n    shielded: number;\n\n    /**\n     * The amount of threat done by the event.\n     */\n    threat: number;\n  }\n\n  export interface HealingEvent extends Event {\n    /**\n     * The amount of threat done by the event.\n     */\n    threat: number;\n  }\n\n  export interface TauntEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'taunt';\n  }\n\n  export interface ModifyThreatEvent extends Event {\n    /**\n     * The type of the event.\n     */\n    type: 'modifythreat';\n\n    /**\n     * The threat change amount.\n     */\n    threat: number;\n  }\n\n  export type AnyEvent = CoreEvent | TauntEvent | ModifyThreatEvent;\n}\n",wildstar:"export namespace RpgLogs {\n  export type DamageHitType =\n    | 'miss'\n    | 'hit'\n    | 'criticalHit'\n    | 'absorbedHit'\n    | 'vulnerabieHit'\n    | 'vulnerableCriticalHit'\n    | 'glancingBlow'\n    | 'dodge'\n    | 'parry'\n    | 'deflect'\n    | 'immune'\n    | 'misfire'\n    | 'reflect'\n    | 'evade'\n    | 'resist'\n    | 'unknown';\n\n  export interface DamageEvent extends Event {\n    /**\n     * The hit type of the event.\n     */\n    hitType: DamageHitType;\n\n    /**\n     * The amount of damage shielded.\n     */\n    shielded: number;\n\n    /**\n     * Whether or not the event was a direct hit.\n     */\n    isMultiHit: boolean;\n  }\n}\n"};function rl(){const e=Y();return(0,r.useCallback)((t=>{const n=t;n.__wclSetupComplete||e&&(n.languages.typescript.javascriptDefaults.setCompilerOptions({target:n.languages.typescript.ScriptTarget.ESNext,lib:["es2021"],allowNonTsExtensions:!0,allowJs:!0}),n.languages.typescript.javascriptDefaults.addExtraLib(function(e){return[tl,nl,al[e.lowercaseName]??""].join("\n\n")}(e)),n.__wclSetupComplete=!0)}),[e])}function ll(e){let{onMount:t,defaultValue:n}=e;const a=(0,r.useRef)(null),[l,i]=(0,r.useState)(),s=rl();return r.createElement("div",{className:"script-pin-editor"},r.createElement("div",{className:"script-pin-editor__code-editor-box"},r.createElement(Xr,{defaultValue:n,onMount:e=>{a.current=e,t(e)},onValidate:e=>i(e.filter((e=>!/'(event|fight)' is declared but its value is never read/.test(e.message))).filter((e=>e.severity>1))),onLoad:s})),l?.length>0&&r.createElement("div",{className:"script-pin-editor__code-error-box"},r.createElement(el,{codeErrors:l})))}ll.propTypes={defaultValue:i().string,onMount:i().func};var il=ll;function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sl.apply(this,arguments)}function ol(e){let{tile:t,image:n,markdown:a}=e;return r.createElement("div",{className:"image-and-markdown-tile"},r.createElement(In,t,r.createElement("div",{className:"image-and-markdown-tile__content"},r.createElement("img",sl({className:"image-and-markdown-tile__image"},n)),r.createElement(vn,a))))}ol.propTypes={tile:i().exact(In.propTypes),image:i().object,markdown:i().exact(vn.propTypes)};var cl=ol;const ul=e=>{let{subtitle:t,info:n,isFullWidth:a}=e;const l="character-profile-recruitment-tile__subtitle-and-info"+(a?"--full-width":"");return r.createElement("div",{className:l},r.createElement("dt",{className:"character-profile-recruitment-tile__subtitle"},t),r.createElement("dd",{className:"character-profile-recruitment-tile__info"},n))};function dl(e){let{content:t,largeLink:n}=e;return r.createElement(Pn,{className:"content-and-large-link"},t&&r.createElement("div",{className:"content-and-large-link__content"},t),n&&r.createElement("div",{className:"content-and-large-link__large-link"},n))}dl.propTypes={content:i().node,largeLink:i().node};var ml=dl;const pl=(e,t,n)=>e||t<=n?r.createElement("div",{title:e||"",className:"zmdi zmdi-check"}):"-",gl=e=>{let t="ff-progress-race-summary-tile__race-table-entry";e.rank%2==0&&(t+=" ff-progress-race-summary-tile__race-table-entry--even");const n=[e.fourthTurnKillDatetime,e.thirdTurnKillDatetime,e.secondTurnKillDatetime,e.firstTurnKillDatetime].filter((e=>e)).length;let a="ff-progress-race-summary-tile__rank ";return a+=1===e.rank?"artifact":"astounding",r.createElement("div",{className:t,key:e.name},r.createElement("div",{className:a},e.rank),r.createElement("div",null,e.name),r.createElement("div",null,e.region),r.createElement("div",null,pl(e.firstTurnKillDatetime,1,n)),r.createElement("div",null,pl(e.secondTurnKillDatetime,2,n)),r.createElement("div",null,pl(e.thirdTurnKillDatetime,3,n)),r.createElement("div",null,pl(e.fourthTurnKillDatetime,4,n)),r.createElement("div",null,(l=e.twitch)?r.createElement("a",{href:`https://www.twitch.tv/${l}`,target:"_blank",rel:"noreferrer",className:"ff-progress-race-summary-tile__twitch-link"},r.createElement("img",{width:15,height:15,alt:"Twitch",src:"https://assets.rpglogs.com/img/social/twitch.png"})):null));var l},hl=e=>`/zone/ff-race/content/${e}`;function fl(e){let{zoneId:t,featuredStream:n,firstTurnAcronym:a,secondTurnAcronym:l,thirdTurnAcronym:i,fourthTurnAcronym:s}=e;const[{data:o,status:c},u]=$t(),[d,m]=(0,r.useState)([]),[p,g]=(0,r.useState)(0);return(0,r.useEffect)((()=>{u(hl(t))}),[u,t]),(0,r.useEffect)((()=>{const e=setInterval((()=>{u(hl(t))}),6e4);return g(60),()=>clearInterval(e)}),[u,o,c,g,t]),(0,r.useEffect)((()=>{const e=setInterval((()=>g(p-1||0)),1e3);return()=>clearInterval(e)})),(0,r.useEffect)((()=>{o&&o.guilds&&m(o.guilds.slice(0,10))}),[o,m]),r.createElement(In,{title:`${trans(`zone-ff.zone_${t}`)} ${trans("progress-race.world_race")}`,className:"ff-progress-race-summary-tile"},r.createElement(ml,{content:r.createElement("div",{className:"ff-progress-race-summary-tile__container"},r.createElement(I,{autoplay:!1,channel:n,id:"stream"}),r.createElement("div",{className:"ff-progress-race-summary-tile__race-info"},r.createElement("div",{className:"ff-progress-race-summary-tile__race-table"},c.isLoading?r.createElement("div",{className:"ff-progress-race-summary-tile__loading-spinner"},r.createElement(kt,null)):null,r.createElement("div",{className:"ff-progress-race-summary-tile__race-table-entry ff-progress-race-summary-tile__race-table-entry--header"},r.createElement("div",null,"#"),r.createElement("div",null,trans("progress-race.team_name")),r.createElement("div",null,trans("global.region")),r.createElement("div",null,a),r.createElement("div",null,l),r.createElement("div",null,i),r.createElement("div",null,s)),d.length?d.map(gl):r.createElement("div",{className:"ff-progress-race-summary-tile__race-table-no-entries"},c.isLoading?null:r.createElement(vn,null,`${trans("progress-race.mogtalk_no_registered_kills_so_far")}.`)),c.isLoading?null:r.createElement("div",{className:"ff-progress-race-summary-tile__update-timer"},`${trans("progress-race.refreshing_race_data",{seconds:p})}..`)),r.createElement("div",{className:"ff-progress-race-summary-tile__powered-by"},r.createElement(vn,null,`**${trans("progress-race.powered_by")}** `),r.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://twitch.tv/mogtalk"},r.createElement("img",{src:"https://assets.rpglogs.com/img/ff/mogtalkicon.png",alt:"Mogtalk",className:"ff-progress-race-summary-tile__mogtalk-icon"})))))}))}fl.propTypes={zoneId:i().number,featuredStream:i().string,firstTurnAcronym:i().string,secondTurnAcronym:i().string,thirdTurnAcronym:i().string,fourthTurnAcronym:i().string};var bl=fl,El=i().shape({id:i().number.isRequired,name:i().string.isRequired,serverId:i().number.isRequired});function vl(e){let{characterId:t,disabled:n,doFetch:a}=e;return r.createElement(F,{onClick:()=>a({url:`/character/recruitmentRefreshLastUpdated/${t}`,method:"POST"}),styles:["link"],disabled:n},trans("global.yes"))}vl.propTypes={characterId:i().number.isRequired,disabled:i().bool,doFetch:i().func};var yl=vl;function _l(e){let{characterId:t,disabled:n,doFetch:a}=e;return r.createElement(F,{onClick:()=>a({url:`/character/recruitmentVisibility/${t}`,method:"POST",body:{visibility:1}}),styles:["link"],disabled:n},trans("global.no"))}_l.propTypes={characterId:i().number.isRequired,disabled:i().bool,doFetch:i().func};var wl=_l;function kl(e){let{characters:t}=e;const[n,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)(t),[{status:s},o]=$t();return(0,r.useEffect)((()=>{s.isSuccess&&i((e=>e.slice(1)))}),[s]),n?null:0===l.length?r.createElement(Gr,null,r.createElement("div",{className:"stale-recruitment-characters-notification"},r.createElement(vn,{openLinksExternally:!1},trans("recruitment.thanks_you_can_update_your_recruitment_profile_at_any_time")),r.createElement(F,{styles:["link"],onClick:()=>a(!0)},trans("global.close")))):r.createElement(Gr,null,r.createElement("div",{className:"stale-recruitment-characters-notification"},r.createElement(vn,{enhanced:!0},trans("recruitment.is_character_still_looking_for_a_guild",{characterName:`<Styled type="${l[0].cssClassName}">${l[0].name}</Styled>`})),r.createElement("div",{className:"stale-recruitment-characters-notification__actions"},r.createElement(yl,{characterId:l[0].id,disabled:s.isLoading,doFetch:o}),r.createElement(wl,{characterId:l[0].id,disabled:s.isLoading,doFetch:o})),s.errorMessage&&r.createElement("div",{className:"stale-recruitment-characters-notification__error"},s.errorMessage)))}kl.propTypes={characters:i().arrayOf(El)};var Nl=kl;function Tl(e){let{disabled:t,doFetch:n,url:a,label:l}=e;return r.createElement(F,{onClick:()=>n({url:a,method:"post"}),styles:["link"],disabled:t},l)}function Cl(e){let{children:t,icon:n,contentAnchor:a}=e;return r.createElement("div",{className:"hover-box"},r.createElement("div",{className:"hover-box__activator"},r.createElement("div",{className:"hover-box__icon"},n),r.createElement("div",{className:`hover-box__content hover-box__content--anchor-${a}`},t)))}Cl.propTypes={children:i().node,icon:i().node.isRequired,contentAnchor:i().oneOf(["left","right"]).isRequired};var Sl=Cl,Il={iconUrl:i().string.isRequired,codes:i().arrayOf(i().shape({imageUrl:i().string.isRequired,localizedName:i().string.isRequired}))};const xl=e=>-1===(e.hash??"").indexOf("view=replay");function Pl(e){let{iconUrl:t,codes:n}=e;const a=(0,s.TH)(),[l,i]=(0,r.useState)(xl(a));if((0,r.useEffect)((()=>{i(xl(a))}),[a]),!l||0===n.length)return null;const o=r.createElement("img",{src:t});return r.createElement("div",{className:"wechat-qr-codes"},r.createElement(Sl,{icon:o,contentAnchor:"right"},r.createElement("div",{className:"wechat-qr-codes__content"},n.map(((e,t)=>r.createElement("div",{key:t},r.createElement("img",{width:215,src:e.imageUrl,alt:e.localizedName}),r.createElement("p",null,e.localizedName)))))))}Pl.propTypes=Il;var Rl=Pl,Al=e=>{let{subscriptionStatus:t,tier:n}=e;const a="subscription-tier"+(t===n.subscriptionStatus?" subscription-tier--current":"");return r.createElement("div",{className:a},t===n.subscriptionStatus&&r.createElement("div",{className:"subscription-tier__is-current-badge"},trans("accounts.your_current_plan")),r.createElement("h3",{className:`subscription-tier__header ${n.cssClassName}`},n.iconUrl&&r.createElement("img",{alt:"",src:n.iconUrl}),n.name),r.createElement("ul",{className:"subscription-tier__feature-list"},n.features.map(((e,t)=>r.createElement("li",{key:t,className:e.isHighlighted?"subscription-tier__feature--is-highlighted":""},r.createElement("span",null,r.createElement(hn,{markdown:e.description,wrapped:!1})))))),r.createElement("div",{className:"subscription-tier__price"},n.costLabel))},Ll=e=>{let{subscriptionStatus:t,tiers:n}=e;const a=nr(n,3);return r.createElement("div",{className:"subscription-tiers"},a.map(((e,n)=>r.createElement("div",{key:n,className:"subscription-tiers__container"},e?.map((e=>r.createElement(Al,{key:e.subscriptionStatus,subscriptionStatus:t,tier:e})))))))};const $l=e=>{let{analyticsComponentName:t,eventName:n,value:a,isInteraction:r,extraParameters:l}=e;console.log(`[analytics] ${t}.${n}`+(a?` => ${a}`:""),Object.fromEntries(Object.entries({isInteraction:r,...l}).filter((e=>{let[,t]=e;return void 0!==t}))))};function Ol(e){let{analyticsComponentName:t,eventName:n,label:a,value:r,isInteraction:l=!0,extraParameters:i={}}=e,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"==typeof window)return;const o=`${t}_${n}`;if(o.length>40&&console.warn(`Analytics event name gets truncated at 40 characters ("${o}")`),window.localStorage.getItem("log.analytics.sendEvent")&&($l({analyticsComponentName:t,eventName:n,label:a,value:r,isInteraction:l,extraParameters:i}),i.debug_mode=!0),s)return void 0===window.dataLayer&&(window.dataLayer=[]),void window.dataLayer.push({event:o,event_category:t,event_label:a,value:r,non_interaction:!l,...i,site_title:window.gameSiteTitle});try{window.gtag("event",o,{event_category:t,event_label:a,value:r,non_interaction:!l,...i,site_title:window.gameSiteTitle})}catch{}}function zl(){Ol({analyticsComponentName:"SubscriptionTiers",eventName:"Subscribe"})}var Fl=e=>{let{tiers:t,patreonUrl:n,siteTitle:a,subscriptionStatus:l,weChatQRCode:i}=e;return r.createElement(Pn,{gap:"content-padding",className:"subscription-tiers-call-to-action"},r.createElement("p",{className:"subscription-tiers-call-to-action__text"},trans("accounts.subscribe_call_to_action_text_below_button",{siteTitle:a})),r.createElement(Ll,{subscriptionStatus:l,tiers:t}),i&&r.createElement(In,null,r.createElement("div",{className:"subscription-tiers-call-to-action__wechat-tile"},r.createElement("img",{width:215,height:215,src:i.imageUrl}),r.createElement("div",{className:"subscription-tiers-call-to-action__wechat-localized-name"},i.localizedName))),r.createElement(Tn,{openInNewTab:!0,href:n,onClick:fn()?e=>{e.preventDefault();try{window.top?.postMessage({type:"openPatreon",url:n},"*"),zl()}catch{}}:zl},trans(l?"accounts.upgrade":"accounts.subscribe")))};const Ml=r.createContext({user:null,setUser:()=>{},lazyLoadUser:!1,userStatus:xt});var Dl=()=>{const e=(0,r.useContext)(Ml);if(void 0===e)throw new Error("useUser must be used within an UserProvider");return e};const Ul=e=>{let{subscriptionTiersCallToAction:t,subscriptionStatus:n}=e;const a=Fa("subscriptionRefreshError"),{user:l}=Dl();return r.createElement(Pn,{className:"user-subscription-status-tile"},a?.length&&r.createElement(se,null,r.createElement("div",{className:"user-subscription-status-tile__subscription-error"},r.createElement("h3",null,trans("global.something_went_wrong")),r.createElement("div",null,a))),r.createElement(Fl,t),r.createElement("h2",null,trans("accounts.subscription_help_title")),r.createElement("p",{className:"user-subscription-status-tile__texts"},trans("accounts.subscription_status",{status:n?trans("accounts.subscription_status_subscribed").toUpperCase():trans("accounts.subscription_status_unsubscribed").toUpperCase()}),!!n&&r.createElement("span",{className:n?.cssClassName}," ","(",n?.tierName,")")),!!n?.isLegacyTier&&r.createElement("div",{className:"user-subscription-status-tile__centered-element"},r.createElement("p",null,trans("accounts.subscription_tier_benefits",{tier:n?.tierName})),r.createElement("ul",{style:{padding:0,listStyle:"inside"}},n?.tierFeatures?.map(((e,t)=>r.createElement("li",{key:t},e))))),r.createElement("div",{className:"user-subscription-status-tile__footer-help"},r.createElement("b",null,trans("accounts.subscription_help_subtitle")),r.createElement("div",null,l?.isAdmin&&r.createElement(se,{showCopyButton:!1},'DO NOT CLICK THE "REFRESH" LINK IF YOU ARE LOGGED INTO THE LOGS@WARCRAFTLOGS.COM PATREON. OTHERWISE YOU WILL BREAK THE PATREON SYNC JOB AS IT WILL REVOKE THE TOKEN THAT THE JOB USES.'),r.createElement(vn,{openLinksExternally:!1},trans("accounts.subscription_help_refresh_status",{link:"/patreon/connect"}))),r.createElement("div",{style:{marginTop:"8px"}},r.createElement(vn,{enhanced:!0},trans("accounts.subscription_help_refresh_email_contact")))))};Ul.propTypes={subscriptionTiersCallToAction:i().shape({tiers:i().arrayOf(i().shape({id:i().number,name:i().string,costLabel:i().string,featureDescriptions:i().arrayOf(i().string)})),patreonUrl:i().string,siteTitle:i().string}),subscriptionStatus:i().shape({tierId:i().number,tierName:i().string,tierFeatures:i().arrayOf(i().string),isLegacyTier:i().bool,cssClassName:i().string})};var Bl=Ul;class Vl{constructor(e){this.editableValue=e,this.editableValue=e}build(){return this.editableValue}withTileActions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const[t,n]=(0,r.useState)(void 0),a=this.editableValue.isBeingEdited,l=this.editableValue.status;return(0,r.useEffect)((()=>{e()?n([{icon:this.editableValue.isBeingEdited?"close":"edit",label:this.editableValue.isBeingEdited?trans("global.cancel"):trans("global.edit"),onClick:this.editableValue.isBeingEdited?this.editableValue.cancelEdit:this.editableValue.beginEdit,disabled:!!this.editableValue.status.isLoading}]):n([])}),[e,a,l]),this.editableValue={...this.editableValue,tileActions:t},this}withHttpSave(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const n=this.editableValue.pendingValue,a=(0,r.useCallback)((()=>{this.editableValue.doFetch({method:"post",url:e,body:t(n)})}),[e,t,n]);return this.editableValue={...this.editableValue,save:a},this}}var ql=()=>({new:(e,t)=>new Vl(function(e){let{alwaysEditable:t,onBeginEdit:n,onCancelEdit:a,onHttpSuccess:l,onEndEdit:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[s,o]=(0,r.useState)(e),[c,u]=(0,r.useState)(e),[d,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!!t),[{status:h,data:f},b,E]=$t(),v=(0,r.useCallback)((e=>{u("function"==typeof e?t=>e(t):e),m(!0)}),[u,m]),y=()=>{u(s),m(!1)};return(0,r.useEffect)((()=>{h.isSuccess&&(l?.(f,c),o(c),m(!1),t||(g(!1),i?.()),E())}),[t,f,a,l,i,h,c,E]),(0,r.useEffect)((()=>{u(s)}),[s]),{value:s,isBeingEdited:p,pendingValue:c,setPendingValue:v,resetPendingValue:y,hasPendingChanges:d,beginEdit:()=>{g(!0),n?.()},cancelEdit:()=>{t||g(!1),i?.(),a?.(s),y()},doFetch:b,status:h,setValue:o}}(e,t)),from:e=>new Vl(e)});const jl=r.createContext(),Hl=e=>{let{children:t,character:n={}}=e;const[a,l]=r.useState(n),i={character:a,mergeCharacter:e=>l({...a,...e}),setCharacter:l};return r.createElement(jl.Provider,{value:i},t)};Hl.propTypes={children:i().node.isRequired,character:i().object.isRequired};var Gl=()=>{const e=r.useContext(jl);if(void 0===e)throw new Error("useCharacter must be used within a CharacterContextProvider");return e};const Wl=(0,r.createContext)(void 0),Kl=e=>{let{children:t,guildId:n}=e;return r.createElement(Wl.Provider,{value:n},t)};Kl.propTypes={children:i().node,guildId:i().number};var Zl=()=>(0,r.useContext)(Wl);let Yl=function(e){return e.Character="character",e.Guild="guild",e}({});const Jl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ql().new(e,n).withHttpSave(function(e){return`/${e.type}/banner/${e.id}`}(t),(e=>({bannerId:e?.id||null}))).build()},Xl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jl(e,{type:Yl.Guild,id:Zl()},t)};function Ql(e){let{tierName:t}=e;return r.createElement(vn,null,t?trans("accounts.your_current_plan_does_not_have_access_to_this_feature",{tierName:t}):trans("accounts.you_must_be_subscribed_to_access_this_feature"))}Ql.propTypes={tierName:i().string};var ei=Ql,ti=function(e){let{save:t,saveText:n=trans("global.save_changes"),cancel:a,cancelText:l=trans("global.cancel"),status:i,hasPendingChanges:s=!0,isValid:o=!0,glowSaveButtonWhenPendingChanges:c=!1}=e;const u=(0,r.useRef)(null),d=jn(u),[m,p]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{p(d.width<480)}),[d,p]),m&&n===trans("global.save_changes")&&(n=trans("global.save")),r.createElement(Pn,{className:"save-changes-or-cancel-buttons"},r.createElement("div",{className:"save-changes-or-cancel-buttons__buttons",ref:u},t&&r.createElement(F,{onClick:t,disabled:i?.isLoading||!s||!o,styles:c&&s?["primary","highlight-glow"]:void 0},n),a&&r.createElement(F,{styles:["warning"],onClick:a,disabled:i?.isLoading},l)),i?.isError&&r.createElement(se,null,i.errorMessage))};function ni(e){let{label:t,images:n,imageGridClassName:a="",pendingValue:l,setPendingValue:i,save:s,cancelEdit:o,hasPendingChanges:c,status:u,disabled:d}=e;return r.createElement(Pn,{className:"editable-image-picker"},r.createElement("div",{className:"editable-image-picker__label-and-buttons"},r.createElement(vn,null,t),r.createElement(ti,{save:s,cancel:o,hasPendingChanges:!d&&c,status:u})),r.createElement("div",{className:`editable-image-picker__grid ${a}`},n.map((e=>r.createElement("button",{key:e.id,className:"editable-image-picker__grid-cell "+(l?.id===e.id?"editable-image-picker__grid-cell--selected":""),style:{backgroundImage:`url('${e.url}')`},onClick:()=>i(l?.id===e.id?null:e),disabled:u.isLoading},r.createElement(D,null,e.id))))))}ni.propTypes={label:i().string.isRequired,images:i().arrayOf(i().exact({id:i().number,url:i().string})).isRequired,imageGridClassName:i().string.isRequired,pendingValue:i().exact({id:i().number,url:i().string}),setPendingValue:i().func,save:i().func,cancelEdit:i().func,hasPendingChanges:i().bool,status:i().object,disabled:i().bool};var ai=ni;function ri(){return ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ri.apply(this,arguments)}function li(e){let{isEnabled:t,currentTierName:n,subscriptionTiersCallToAction:a,bannerImages:l,editableBanner:i,onBannerChange:s}=e;return r.createElement(Pn,null,!t&&r.createElement(r.Fragment,null,r.createElement(ei,{tierName:n}),r.createElement(Fl,a)),r.createElement(ai,ri({label:(t?trans("banners.select_a_banner"):trans("banners.preview_a_banner"))+":",images:l,imageGridClassName:"character-profile-customize-tile__banner-grid"},i,{save:t?i.save:void 0,setPendingValue:e=>{i.setPendingValue(e),s?.(e??void 0),window.scrollTo(0,0)},disabled:!t})))}var ii=e=>{let{className:t,onChange:n,type:a="text",style:l,cssStyle:i={},...s}=e;const o=O();l=l??o.inputTextStyle;const c={...s,type:a,className:`input-text ${t??"input-text--default"} input-text--style-${l}`,onChange:e=>{n?.({name:e.target.name,value:"number"===a?parseInt(e.target.value):e.target.value,event:e})},style:i};return r.createElement("input",c)},si=n(79123);function oi(e){let{src:t,collapsed:n=3}=e;return["string","number","boolean"].includes(typeof t)&&(t={result:t}),r.createElement("div",{className:"json-tree"},r.createElement(si.ZP,{src:t,displayDataTypes:!1,collapsed:n}))}oi.propTypes={src:i().oneOfType([i().object,i().array,i().string,i().number,i().bool]).isRequired,collapsed:i().number};var ci=oi;function ui(){return ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ui.apply(this,arguments)}function di(e){let{children:t}=e;return r.createElement(r.Fragment,null,t)}function mi(e){let{option:t,value:n,onChange:a=(()=>null),style:l,isDisabled:i,OptionWrapper:s=di,wrapperInheritsProps:o,transformLabel:c,isVertical:u=!1}=e;const d=i||t.isDisabled,m=(0,r.useMemo)((()=>function(e){let{children:n,...a}=e;return r.createElement(s,ui({option:t},a),n)}),[s,t]),p=r.createElement(r.Fragment,null,r.createElement("span",{className:"tabbed-select__bullet-point"},"•"),t.iconUrl?.length&&r.createElement("img",{className:"tabbed-select__tab-icon",src:t.iconUrl,alt:""}),r.createElement("span",{className:ht()({"tabbed-select__tab-label":!0,"tabbed-select__tab-label--selected":t.value===n?.value})},c?c(t):t.label,t.badgeLabel&&r.createElement("div",{className:"tabbed-select__tab-badge-label"},t.badgeLabel)),t.isExternalLink&&r.createElement("i",{className:"zmdi zmdi-open-in-new"})),g=`tabbed-select__tab tabbed-select__tab--${l} ${t.value===n?.value?`tabbed-select__tab--selected tabbed-select__tab--${l}-selected`:""} ${t.isHighlighted?`tabbed-select__tab--highlighted tabbed-select__tab--${l}-highlighted`:""} ${u?`tabbed-selected__tab--vertical tabbed-select__tab--${l}-vertical`:""}`,h=o&&t.url?t.url:void 0,f=o&&t.url?g:void 0;return t.url?r.createElement(m,{href:h,className:f},o?p:r.createElement(P,{href:t.url,disableDefaultLinkUnstyling:!0,className:g},p)):r.createElement(m,{href:h,className:f},r.createElement("button",{className:g,onClick:t.url?void 0:()=>!d&&t.value!==n?.value&&a(t),disabled:d},p))}var pi=function(e){let{value:t,options:n,onChange:a=(()=>null),isDisabled:l=!1,style:i,backgroundColorLevel:s=0,OptionWrapper:o=di,className:c,wrapperInheritsProps:u,transformLabel:d,isVertical:m=!1}=e;const p=O();return i=i??p.tabbedSelectStyle,r.createElement("div",{className:`tabbed-select tabbed-select--${i} ${s?`tabbed-select--level-${s}`:""} ${n.length<=3&&!m?"tabbed-select--short":""} ${c||""} ${m?`tabbed-select--vertical tabbed-select--${i}-vertical`:""}`},n.map((e=>r.createElement(mi,{key:e.value,option:e,value:t,onChange:a,style:i,isDisabled:l,OptionWrapper:o,wrapperInheritsProps:u,transformLabel:d,isVertical:m}))))},gi=function(e){let{options:t=[],value:n,onChange:a,isDisabled:l=!1,style:i,slim:s=!1}=e;const o=O();return i=i??o.toggleSelectStyle,"menu"!==i?r.createElement(pi,{value:n,options:t,onChange:a,isDisabled:l,style:i}):r.createElement("div",{className:"toggle-select "+(s?"toggle-select--slim":"")},t.map((e=>r.createElement(F,{key:String(e.value),className:"toggle-select__option",styles:["menu",n?.value===e.value?"menu-selected":void 0,s?"slim":void 0],onClick:()=>a?.(e),disabled:l},e.label))))},hi=n(96486),fi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[n,a]=(0,r.useState)(e);return[n,(0,r.useMemo)((()=>(0,hi.debounce)((e=>a(e)),t)),[t])]};function bi(e){let{json:t}=e;const n=Y();if(!n?.baseUrl.includes("warcraft"))return null;const a=Object.values([...(t?.characters??[]).map((e=>e.region)),...(t?.guilds??[]).map((e=>e.region))].reduce(((e,t)=>(t.id in e||(e[t.id]=t),e)),{}));return 0===a.length?null:r.createElement(Pn,null,r.createElement(Qe,{level:4},"Test Battle.Net Import"),r.createElement(U,null,a.map((e=>r.createElement(Tn,{key:e.id,openInNewTab:!0,href:`/admin/test-bnet-import/${t.id}/${e.id}/0`},e.name)))))}var Ei=n(74300);function vi(e){let{valueToCopy:t,label:n=trans("global.copy"),onCopy:a}=e;const[l,i]=(0,r.useState)();(0,r.useLayoutEffect)((()=>{i(n??trans("global.copy"))}),[n]);const[s,o]=(0,r.useState)();return r.createElement(Ei.CopyToClipboard,{text:t,onCopy:()=>{s&&clearTimeout(s),i(trans("global.copied")+"!"),o(setTimeout((()=>{i(trans("global.copy"))}),2e3)),a?.()}},r.createElement(F,null,r.createElement(U,{style:{justifyContent:"center"}},r.createElement("span",null,l),r.createElement("span",{className:"zmdi zmdi-copy"}))))}vi.propTypes={valueToCopy:i().string.isRequired,label:i().string,onCopy:i().func};var yi=vi;function _i(e){let{valueToCopy:t,onCopy:n,inputTextStyle:a}=e;return r.createElement(Ei.CopyToClipboard,{text:t,onCopy:n},r.createElement("div",{className:"copy-to-clipboard-text-box"},r.createElement(ii,{disabled:!0,value:t,style:a})))}_i.propTypes={valueToCopy:i().string.isRequired,onCopy:i().func,inputTextStyle:i().object};var wi=_i;function ki(e){let{valueToCopy:t,inputTextStyle:n}=e;const[a,l]=(0,r.useState)(trans("global.copy")),[i,s]=(0,r.useState)(),o=()=>{i&&clearTimeout(i),l(trans("global.copied")+"!"),s(setTimeout((()=>{l(trans("global.copy"))}),2e3))};return r.createElement("div",{className:"copy-to-clipboard-text-box-and-button"},r.createElement(wi,{valueToCopy:t,inputTextStyle:n,onCopy:o}),r.createElement(yi,{valueToCopy:t,label:a,onCopy:o}))}ki.propTypes={valueToCopy:i().string.isRequired,inputTextStyle:i().object};var Ni=ki;function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ti.apply(this,arguments)}var Ci=function(e){let{cssStyle:t,clampDescriptionLinesTo:n,wrapTitle:a=!0,itemCssStyle:l,items:i,ariaLabel:s}=e;const o=!fn();return r.createElement("ul",{className:"icon-list",style:t,"aria-label":s},i.map((e=>r.createElement("li",{key:e.url+e.title.name,className:"icon-list__item"+(e.highlight?" icon-list__item--highlight":""),style:l,onMouseEnter:e.onHover},r.createElement("a",Ti({className:"icon-list__item-link",href:e.url},e.openInNewTab&&o?{target:"_blank",rel:"noopener noreferrer"}:{}),"image"===e.icon?.type?r.createElement("img",{className:"icon-list__item-icon"+(e.icon.hasBorder?" icon-list__item-icon--border":""),src:e.icon.src,alt:e.title.name,style:{width:e.icon?.width,height:e.icon?.height}}):r.createElement("div",{className:"icon-list__item-icon "+(e.icon.hasBorder?"icon-list__item-icon--border ":""),style:{width:e.icon?.width}},r.createElement("i",{className:"zmdi zmdi-"+e.icon.src,style:{fontSize:e.icon?.height}})),r.createElement("div",{className:"icon-list__item-text "+(a?"":"icon-list__item-text--no-wrap-title")},r.createElement("span",{className:"icon-list__item-title"+(e.title.color?` icon-list__item-title--color-${e.title.color}`:"")+(e.title.size?` icon-list__item-title--size-${e.title.size}`:"")+(a?"":" icon-list__item-title--no-wrap-title")},e.title.name),r.createElement("span",{className:"icon-list__item-description "+(n?"icon-list__item-description--line-clamp":""),style:{WebkitLineClamp:n}},e.description)),e.badgeLabel&&r.createElement("div",{className:"icon-list__item-badge"},r.createElement(c,null,e.badgeLabel.children)))))))},Si=function(e){let{url:t,imageUrl:n,title:a,timestamp:l}=e;return r.createElement("div",{className:"featured-article__container"},r.createElement("div",{className:"featured-article__article-preview"},r.createElement(Dr,{href:t}),r.createElement("div",{className:"featured-article__article-preview-image",style:{backgroundImage:`url('${n}')`}}),r.createElement("div",{className:"featured-article__article-preview-title"},r.createElement(vn,{enhanced:!0},a),r.createElement("div",{className:"featured-article__article-info-container"},r.createElement("div",{className:"featured-article__latest-news-label"},trans("global.latest_news")),r.createElement("div",{className:"featured-article__article-preview-published-at"},moment(l).fromNow())))))},Ii=n(97762),xi=function(e,t){return(0,Ii.uS)(r.createElement(Z,{game:t},r.createElement(hn,{markdown:e,overrides:{p:{component:e=>{let{children:t}=e;return r.createElement(r.Fragment,null,t)}},span:{component:e=>{let{children:t}=e;return r.createElement(r.Fragment,null,t)}},Styled:{component:e=>{let{children:t}=e;return r.createElement(r.Fragment,null,t)}},ImageIcon:{component:e=>{let{children:t}=e;return r.createElement(r.Fragment,null,t)}}},wrapped:!1}))).replace(/&#x([a-fA-F0-9]+);/g,((e,t)=>String.fromCharCode(parseInt(t,16)))).replace(/&amp;/g,"&").replace(/&zwj;/g,"").trim()};function Pi(){return Pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pi.apply(this,arguments)}function Ri(e){let{isUpdating:t}=e;const[{status:n},a]=$t(),l=Zl();return r.createElement("button",{className:"update-guild-button",disabled:!n.isIdle||t,onClick:()=>a(`/guild/update/${l}`)},n.isIdle&&!t&&r.createElement(r.Fragment,null,r.createElement("i",{className:"zmdi zmdi-refresh","aria-hidden":"true"})," ",r.createElement("span",null,window.trans("global.update"))),n.isLoading&&r.createElement(kt,{fontSize:16}),(n.isSuccess||t)&&window.trans("global.in_queue"),n.isError&&window.trans("global.update_failed"))}Ri.propTypes={isUpdating:i().bool};var Ai=Ri;function Li(e){let{childGuilds:t}=e;const n=Y(),[a,l]=(0,r.useState)([]);return(0,r.useEffect)((()=>{l([{selected:!0,label:trans(`guilds.all_${n.lowercaseName}_custom`),items:t.map((e=>({label:e.name,url:`/guild/id/${e.id}`})))}])}),[t,n]),t.length>0?r.createElement("div",{className:"child-guilds"},r.createElement(E,{items:a})):null}Li.propTypes={childGuilds:i().arrayOf(i().exact({id:i().number.isRequired,name:i().string.isRequired}))};var $i=Li;const Oi=r.createContext();var zi=()=>(0,r.useContext)(Oi);function Fi(e){let{width:t="full",children:n,className:a}=e;return r.createElement("div",{className:`content content--${t}-width ${a}`},n)}Fi.propTypes={width:i().oneOf(["full","medium","narrow"]),children:i().node.isRequired,className:i().string};var Mi=Fi;function Di(e){let{onClick:t}=e;return r.createElement("button",{className:"customize-button",onClick:t},r.createElement("i",{className:"zmdi zmdi-brush","aria-hidden":"true"})," ",r.createElement("span",null,trans("global.customize")))}function Ui(e,t){return e?.guilds.find((e=>e.id===t))?.isRecruit||e?.isAdmin}function Bi(e,t){return e?.guilds?.find((e=>e.id===t))?.isOfficer||e?.isAdmin}function Vi(e){return e?.guilds?.filter((e=>e.isOfficer)).length>0}function qi(e,t){return e?.guilds.find((e=>e.id===t))?.isGuildMaster||e?.isAdmin}function ji(e){let{onSuccessfulSave:t,onBannerChange:n,onCancel:a,banner:l}=e;const i=Zl(),s=Xl(l??null,{alwaysEditable:!0,onHttpSuccess:t,onCancelEdit:a});return r.createElement(In,{className:"guild-customize-tile"},r.createElement(Ot,{url:`/guild/customize-options/${i}`,lazyChildren:e=>{let{bannerImages:t,subscriptionTiersCallToAction:a,currentTierName:l,featureEnabled:i}=e;return r.createElement(li,{isEnabled:i,currentTierName:l,subscriptionTiersCallToAction:a,bannerImages:t,editableBanner:s,onBannerChange:n})}}))}function Hi(e){let{guildLogo:t,guildFaction:n,guildServerId:a,guildServerName:l,guildName:i,guildRegionName:s,guildTypeName:o,parentGuild:c,childGuilds:u,isUpdating:d,banner:m}=e;i=zi()??i,s=Qa()?.shortName??s;const p=Zl(),[g,h]=(0,r.useState)(!1),[f,b]=(0,r.useState)(m),{user:E}=Dl(),v=Bi(E,p);return r.createElement(r.Fragment,null,r.createElement("div",{"data-testid":"guild-header",className:"guild-header "+(f?"guild-header--with-banner":""),style:f?{backgroundImage:`url('${f.url}')`}:void 0},r.createElement("div",{className:"guild-header__content"},r.createElement("div",{className:"guild-header__infobox"},r.createElement(Ln,t),r.createElement("div",{className:"guild-header__title"},r.createElement("div",{className:`guild-header__name faction-${n}`},i),a&&r.createElement("div",{className:"guild-header__region-and-server"},r.createElement("a",{href:`/server/id/${a}`},s," - ",l)),u.length>0?r.createElement("div",{className:"guild-header__child-guilds"},r.createElement($i,{childGuilds:u})):r.createElement("div",{className:"guild-header__type-and-parent-guild"},r.createElement("span",{className:"guild-header__type"},o),c&&r.createElement("span",{className:"guild-header__parent-guild"},r.createElement("a",{className:`faction-${c.faction}`,href:`/guild/id/${c.id}`},c.name))))),r.createElement("div",null),r.createElement("div",{className:"guild-header__links"},r.createElement(r.Fragment,null,r.createElement("div",{className:"guild-header__related-links"}),r.createElement("div",{className:"guild-header__customize-container"},p&&v&&"Personal Logs"!==o?r.createElement(Di,{onClick:()=>h(!g)}):null,null!==d&&r.createElement(Ai,{isUpdating:d})))))),g&&r.createElement(Mi,null,r.createElement(ji,{onBannerChange:b,onSuccessfulSave:()=>h(!1),banner:f,onCancel:e=>{b(e??void 0),h(!1)}})))}function Gi(e){let{items:t,relatedLinks:n}=e;return r.createElement(E,{items:t,endLinks:n.map((e=>r.createElement("a",{key:e.url,className:"guild-navigation__related-link",href:e.url,target:"_blank",rel:"noopener noreferrer"},e.iconUrl&&r.createElement("img",{className:"guild-navigation__related-link-icon",src:e.iconUrl,alt:e.iconAlt}),r.createElement("span",{className:"guild-navigation__related-link-text"},e.text))))})}function Wi(e){return e>0&&e<1?1:e<0&&e>-1?-1:Math.round(e)}var Ki=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"seconds";const n=((new Date).getTime()-e.getTime())/1e3,a=n/31536e3,r=n/2592e3,l=n/86400,i=new Intl.RelativeTimeFormat(globalThis.window?.locale??"en");if(l>=320||l<=-320||"years"===t)return i.format(-Wi(a),"year");if(l>=26&&l<=319||l<=-26&&l>=-319||"months"===t)return i.format(-Wi(r),"month");const s=n/3600;if(s>=22&&l<=624||s<=-22&&l>=-624||"days"===t)return i.format(-Wi(l),"day");const o=n/60;return o>=45&&o<=1320||o<=-45&&o>=-1320||"hours"===t?i.format(-Wi(s),"hour"):n>=45&&n<=2700||n<=-45&&n>=-2640||"minutes"===t?i.format(-Wi(o),"minute"):i.format(-Wi(n),"second")},Zi=function(e){let{href:t,target:n="_blank",rel:a="noreferrer",title:l,timestamp:i,thumbnailUrl:s}=e;const o=r.createElement(r.Fragment,null,r.createElement("img",{src:s,className:"tiny-article-preview__image",alt:""}),r.createElement("div",{className:"tiny-article-preview__texts"},r.createElement("div",{className:"tiny-article-preview__texts-title"},l),r.createElement("div",{className:"tiny-article-preview__texts-date"},Ki(new Date(i)))));return t?r.createElement("a",{className:"tiny-article-preview__wrapper",href:t,target:n,rel:a},o):r.createElement("span",{className:"tiny-article-preview__wrapper"},o)},Yi=function(e){let{url:t,kind:n}=e;const a=Y(),l=a?.assetServerBaseUrl+"/img/logo_"+n+".svg?v=3";return r.createElement("a",{href:t,className:"social-icon__kind-"+n+" social-icon__wrapper",target:"_blank",rel:"noreferrer"},r.createElement("img",{src:l,alt:n+"'s Icon Logo"}))},Ji=function(e){let{listTitle:t,links:n}=e;return n&&0!==n.length?r.createElement("div",{className:"footer-links-list__wrapper"},r.createElement("div",{className:"footer-links-list__title"},t),r.createElement("div",{className:"footer-links-list__links"},n.map((e=>r.createElement("a",{key:e.title,className:"footer-links-list__link",href:e.url,target:e.openInNewTab?"_blank":void 0,rel:"noreferrer"},r.createElement("div",{className:"footer-links-list__link-text"},e.title),e.iconType?"image"===e.iconType?r.createElement("img",{src:e.iconSrc,className:"footer-links-list__link-icon"}):r.createElement("i",{className:"zmdi zmdi-"+e.iconSrc+" footer-links-list__link-icon-glyph"}):null))))):r.createElement(r.Fragment,null)},Xi=n(39978),Qi=n(38109),es=function(e){let{isExpanded:t,labels:n,style:a="default",className:l="",shouldIgnoreAccessiblity:i=!1,isInteractiveElement:s=!0}=e;const o=s?"button":"div";return r.createElement(o,{className:`expand-indicator__wrapper expand-indicator--${a} ${t?"expand-indicator--expanded":""} ${l}`,tabIndex:!s||i?-1:void 0},r.createElement("i",{className:"expand-indicator__icon zmdi zmdi-caret-down","aria-hidden":!0}),r.createElement(D,null,n?t?n.accessibilityCollapse:n.accessibilityExpand:t?trans("global.accessibilityExpand"):trans("global.accessibilityCollapse")))},ts=n(60887),ns=n(32339),as=n(45587),rs=n(24285);function ls(){return ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ls.apply(this,arguments)}const is=e=>{let{className:t=""}=e;return r.createElement("i",{className:`link-select__dropdown-icon zmdi zmdi-caret-down ${t}`})},ss=(e,t)=>{let n=t.selectStyles;if(Array.isArray(e.styles)&&e.styles?.length?n=e.styles:e.style&&(n=[e.style]),!n?.length)return{menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}};const a=e.valueLabel;if(n.includes("header-search"))return{className:`menu-select menu-select--async menu-select--header-search ${cs(n,"header-search")}`,classNamePrefix:"menu-select",isSearchable:!0,isClearable:!1};if(n.includes("menu")){const t=Boolean(e.async);return{className:`menu-select${t?" menu-select--async":""}${Boolean(e.slim)?" menu-select--slim":""}${e.maxMenuHeight?"":" menu-select--no-max-height"} ${e.isMulti?"menu-select--multi":""} ${e.isMulti&&e.isSortable?"menu-select__multi-value--sortable":""} ${cs(n,"menu")}`,classNamePrefix:"menu-select",isSearchable:t,isClearable:t}}if(n.includes("large-link")||n.includes("link")){let t=`link-select ${cs(n,["large-link","link"])}`;return n.includes("large-link")&&(t+=" link-select--large"),{isClearable:!1,className:t,classNamePrefix:"link-select",components:{DropdownIndicator:e=>r.createElement(Xi.c.DropdownIndicator,e,r.createElement(is,null)),...e.components}}}return n.includes("dropdown")?{isClearable:!1,className:`dropdown-select ${cs(n,"dropdown")}`+(e.defaultLevel?" dropdown-select--level-"+e.defaultLevel:"")+(e.borderLevel?" dropdown-select--border-level-"+e.borderLevel:"")+(e.isCompact?" dropdown-select--compact":""),classNamePrefix:"dropdown-select",isSearchable:!1,components:{DropdownIndicator:e=>r.createElement(Xi.c.DropdownIndicator,e,r.createElement("span",{tabIndex:-1},r.createElement(es,{isExpanded:e.selectProps.menuIsOpen??!1,shouldIgnoreAccessiblity:!0}))),SingleValue:e=>r.createElement(Xi.c.SingleValue,e,a?r.createElement("div",{className:"dropdown-select__single-value-subtitle"},a):null,r.createElement("div",{className:"dropdown-select__single-value-title"},e.children))}}:{}},os={lazyLoad:!1};function cs(e,t){const n=Array.isArray(t)?t:[t];return e.filter((e=>!n.includes(e))).map((e=>`select--style-${e}`)).join(" ")}function us(e){"Enter"!==e.key&&" "!==e.key||document.querySelector(".menu-select__option--is-focused")?.closest("a")?.click()}const ds=e=>{let{children:t}=e;return r.createElement(r.Fragment,null,t)};function ms(e){const t=e.data.Wrapper??ds;return r.createElement(t,{option:e.data},r.createElement(R,{href:e.data.url},r.createElement(Xi.c.Option,e,e.data.usesEnhancedMarkdown?r.createElement(hn,{markdown:e.data.label,wrapped:!1}):e.children)))}function ps(e){return r.createElement(Xi.c.SingleValue,e,r.createElement(hn,{markdown:e.data.selectedLabel??e.data.label,wrapped:!1}))}function gs(e,t){let n={};if(e&&t&&"value"in t&&"label"in t){const a=e.find((e=>e.value===t?.value));a&&"label"in a&&a.label!==t.label&&(n={value:a})}return n}function hs(e){const t={...e.innerProps,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()}},{attributes:n,listeners:a,setNodeRef:l,transform:i,transition:s}=(0,as.nB)({id:e.data.value}),o={transform:rs.ux.Translate.toString(i),transition:s};return r.createElement("div",ls({style:o,ref:l},n,a),r.createElement(Xi.c.MultiValue,ls({},e,{className:"menu-multi-select__multi-value--sortable",innerProps:t}),e.children))}function fs(e){return r.createElement(Xi.c.MultiValueRemove,ls({},e,{innerProps:{onPointerDown:e=>e.stopPropagation(),...e.innerProps}}),e.children)}var bs=function(e){const t=O(),[n,a]=(0,r.useState)(!1),l=(0,r.useRef)(null),i=(0,r.useCallback)((()=>{l.current&&clearTimeout(l.current),l.current=setTimeout((()=>{a(!1)}),200)}),[]);let s={...e,...ss(e,t)};e.className&&(s={...s,className:`${s.className} ${e.className}`});const o={usesEnhancedMarkdown:e.usesEnhancedMarkdown,Wrapper:e.OptionWrapper},c=e.options?.some((e=>e.url||e.options?.some((e=>e.url))));let u={...s,components:{...s.components??{},Option:s.components?.Option??ms,SingleValue:s.components?.SingleValue??(o.usesEnhancedMarkdown?ps:Xi.c.SingleValue),MultiValue:e.isMulti&&e.isSortable?hs:Xi.c.MultiValue,MultiValueRemove:e.isMulti&&e.isSortable?fs:Xi.c.MultiValueRemove},...c?{menuIsOpen:n,onMenuOpen:()=>{e.onMenuOpen?.(),a(!0)},onMenuClose:()=>{e.onMenuClose?.(),i()}}:{},options:e.options?.map((e=>e.options?{...e,options:e.options.map((e=>({...e,...o})))}:{...e,...o})),onKeyDown:c?us:void 0,...gs(e.options,e.value),closeMenuOnSelect:e.isMulti};if(!u.isClearable&&!u.defaultValue&&!u.value){const e=u.options?.[0];if(e){const t="options"in e;u={...u,defaultValue:t?e.options[0]:e}}}const d=e.async?r.createElement(Qi.ZP,u):r.createElement(ma.ZP,u),{onChange:m,value:p}=e,g=(0,r.useCallback)((e=>{const{active:t,over:n}=e;if(t&&n&&p&&m){const e=p.findIndex((e=>e.value===t.id))??0,a=p.findIndex((e=>e.value===n.id))??0,r=p.map((e=>e));m((0,as.Rp)(r,e,a),{action:"select-option",option:void 0})}}),[m,p]);return r.createElement(Be,{value:os},e.isMulti&&e.isSortable?r.createElement(ts.LB,{modifiers:[ns.F4],onDragEnd:g,collisionDetection:ts.pE},r.createElement(as.Fo,{items:p?.map((e=>e.value)),strategy:as.U2},d)):d)};const Es=e=>moment(e).format("YYYY-MM-DD");var vs=e=>{let{value:t,min:n,max:a,defaultDate:l,onChange:i,style:s,...o}=e;l=l??new Date;const[c,u]=(0,r.useState)(!1),d={...o,type:"date",value:Es(t),min:n?Es(n):void 0,max:a?Es(a):void 0,defaultValue:l&&!t?Es(l):void 0,className:"",onChange:e=>{var t;i?.({name:e.name,value:""===e.value?l??new Date:(t=e.value,moment(t,"YYYY-MM-DD").toDate()),event:e.event}),""!==e.value||c||(e.event.target.value=Es(l)),u(!1)},onKeyDown:()=>{u(!0)},onBlur:e=>{""===e.target.value&&(e.target.value=Es(l)),u(!1)}},m=[];return"link"===s&&m.push("date-picker--link"),(n||a)&&m.push("date-picker--with-min-max"),"chrome"in window&&m.push("date-picker--chrome"),/Android/i.test(navigator.userAgent)&&m.push("date-picker--android"),r.createElement("div",{className:`date-picker ${m.join(" ")}`},r.createElement(ii,d))};var ys=function(e,t){return function(e,t){return"string"!=typeof(n=e)||isNaN(n)||isNaN(parseFloat(n))?t:Number(e);var n}(Fa(e),t)};function _s(){return _s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_s.apply(this,arguments)}var ws=function(e){let{zonesByExpansions:t,selectedZoneId:n,onChange:a,...l}=e;return r.createElement(bs,_s({style:"link",options:1===t.length?t[0].options:t,formatGroupLabel:e=>e.expansionName,value:t.flatMap((e=>e.options)).find((e=>e.value===n))??t[0].options[0],blurInputOnSelect:!0,menuPortalTarget:document.body,maxMenuHeight:400,onChange:e=>a((e??t[0].options[0]).value)},l))};function ks(){return ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ks.apply(this,arguments)}var Ns=function(e){let{difficulties:t,selectedDifficulty:n,onChange:a,...l}=e;return r.createElement(bs,ks({style:"link",options:t,value:n,isSearchable:!1,onChange:e=>a(e??t[0]),menuPortalTarget:document.body},l))};function Ts(){return Ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ts.apply(this,arguments)}var Cs=function(e){let{sizes:t,selectedSize:n,onChange:a,...l}=e;return r.createElement(bs,Ts({style:"link",options:t,value:n,isSearchable:!1,onChange:e=>a(e??t[0]),menuPortalTarget:document.body},l))};const Ss="/subscribe?featureIdsToHighlight=mra",Is=new Date;Is.setHours(0,0,0,0);const xs=new Date(Is.getTime()-12096e5),Ps={background:"linear-gradient(to right, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0.2) 20%, rgba(0, 0, 0, 0.2) 30%, rgba(0, 0, 0, 1) 60%, rgba(0, 0, 0, 1)), radial-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.5) 60%, rgba(0, 0, 0, 1) 80%)"};function Rs(e,t,n,a,r,l,i,s){const o=i.getTime()+864e5,c=`/reports/${e}/${t}`,u={mraZone:n.toString(),mraEncounter:a?.toString(),mraDifficulty:r.toString(),mraStartDate:l.getTime().toString(),mraEndDate:o.toString()};s&&(u.mraSize=s.toString());const d=new URLSearchParams(u);return d.delete(a?"mraZone":"mraEncounter"),`${c}?${d}`}const As="MRAEntryPoint";function Ls(){Ol({analyticsComponentName:As,eventName:"Subscribe"})}function $s(e){return e.length>1?e[0]:null}var Os=function(e){let{reportsOwner:t,reportsOwnerId:n,backgroundImageUrl:a,fallbackBackgroundImageUrl:l,zoneId:i,zoneStartTime:s,zonesByExpansions:o,encounters:c,difficulties:u,sizesByDifficulty:d,featuredImageUrl:m,isEnabled:p}=e;const[{data:g,status:h},f]=$t(),b=(0,r.useRef)(!0),E=g?.backgroundImageUrl??a,v=new Date(1e3*(g?.zoneStartTime??s)),y=g?.difficulties??u,_=g?.sizesByDifficulty??d,w=g?.encounters??c,[k,N]=(0,r.useState)(i),[T,C]=(0,r.useState)(xs),[S,I]=(0,r.useState)(Is),[x,P]=(0,r.useState)(w[0]),[R,A]=(0,r.useState)(y[0]),L=(_.find((e=>e.difficulty===R.value))??_[0]).options,[$,O]=(0,r.useState)($s(L)),z=(0,r.useCallback)((e=>{A(e),O($s((_.find((t=>t.difficulty===e.value))??_[0]).options))}),[_]);(0,r.useEffect)((()=>{b.current?b.current=!1:p&&f(`/reports/mra-options?zone=${k}`)}),[f,k,p]),(0,r.useEffect)((()=>{h.isSuccess&&g&&(P(g.encounters[0]),z(g.difficulties[0]))}),[g,h,z]);const F=ys("startDate"),M=ys("endDate"),D=ys("encounter"),U=ys("difficulty");return(0,r.useEffect)((()=>{F&&C(new Date(F)),M&&I(new Date(M)),D&&P(w.find((e=>e.value===D))??w[0]),U&&z(y.find((e=>e.value===U))??y[0]);const e=new URL(window.location.toString());e.hash="",e.search="",window.history.replaceState(null,"",e)}),[]),r.createElement(In,{className:"mra-entry-point-tile",backgroundImage:{urls:[E,l],overlayStyle:Ps},padding:"narrow"},r.createElement("div",{className:"mra-entry-point-tile__content"},p?r.createElement(Pn,{gap:"large",className:"mra-entry-point-tile__form"},r.createElement(Pn,{gap:"tiny"},r.createElement("div",{className:"mra-entry-point-tile__form-input mra-entry-point-tile__zone-selector"},r.createElement(ws,{style:"large-link",zonesByExpansions:o,selectedZoneId:k,onChange:N})),h.isError&&r.createElement(se,null,h.errorMessage),r.createElement("div",{className:"mra-entry-point-tile__title"},trans("features.mra")),r.createElement("div",{className:"mra-entry-point-tile__description"},trans("reports.mra_description"))),r.createElement(Pn,{gap:"small"},r.createElement("div",{className:"mra-entry-point-tile__form-input"},r.createElement("img",{className:"mra-entry-point-tile__selected-encounter-icon",src:x.iconUrl,alt:`${x.label} icon`}),r.createElement(bs,{style:"large-link",options:w,value:x,onChange:e=>P(e??w[0]),isSearchable:!1,isDisabled:h.isLoading,menuPortalTarget:document.body,maxMenuHeight:500})),y.length>1&&r.createElement("div",{className:"mra-entry-point-tile__form-input"},r.createElement("span",{className:"mra-entry-point-tile__form-input-label"},trans("reports.aggregate_all_reports_for")," "),r.createElement(Ns,{difficulties:y,selectedDifficulty:R,onChange:z})),L.length>1&&$&&r.createElement("div",{className:"mra-entry-point-tile__form-input"},r.createElement("span",{className:"mra-entry-point-tile__form-input-label"},trans("reports.for_group_sizes_of")," "),r.createElement(Cs,{sizes:L,selectedSize:$,onChange:O})),r.createElement("div",{className:"mra-entry-point-tile__form-input"},r.createElement("span",{className:"mra-entry-point-tile__form-input-label"},trans("reports.reports_start_day")," "),r.createElement(vs,{style:"link",defaultDate:xs,value:T,min:v,max:Is,onChange:e=>C(e.value),disabled:h.isLoading})),r.createElement("div",{className:"mra-entry-point-tile__form-input"},r.createElement("span",{className:"mra-entry-point-tile__form-input-label"},trans("reports.reports_end_day")," "),r.createElement(vs,{style:"link",defaultDate:Is,value:S,min:v,max:Is,onChange:e=>I(e.value),disabled:h.isLoading})),r.createElement("div",{className:"mra-entry-point-tile__disclaimer"},"(",trans("reports.we_will_automatically_filter_out_duplicated_pulls"),")")),r.createElement("div",null,r.createElement(Tn,{href:h.isLoading?void 0:Rs(t,n,k,x.value,R.value,T,S,$?.value),openInNewTab:!0,styles:h.isLoading?["primary","disabled"]:["primary"],onClick:()=>function(e,t,n,a,r,l,i){const s={filter_1:e,zone_id:t,encounter_id:n,difficulty:a,duration:Math.ceil((l.getTime()-r.getTime())/6048e5)};i&&(s.size=i),Ol({analyticsComponentName:As,eventName:"AnalyzeAllPulls",extraParameters:s})}(t,k,x.value,R.value,T,S,$?.value)},trans("reports.analyze_all_pulls")))):r.createElement(Pn,{gap:"large",className:"mra-entry-point-tile__form"},r.createElement(Pn,{gap:"tiny"},r.createElement("div",{className:"mra-entry-point-tile__title"},trans("features.mra")),r.createElement("div",{className:"mra-entry-point-tile__description"},r.createElement(vn,null,`${trans("reports.mra_description")}\n\n${trans("reports.mra_howto")}\n\n${trans("reports.mra_subscriber_only",{link:Ss})}`))),r.createElement("div",null,r.createElement(Tn,{href:Ss,openInNewTab:!0,styles:["primary"],onClick:Ls},trans("reports.mra_subscribe")))),r.createElement("div",{className:"mra-entry-point-tile__featured-image-container"},r.createElement("img",{className:"mra-entry-point-tile__featured-image",src:m,alt:"Screenshot of multiple reports being analyzed together."}))))};const zs=r.createContext({game:!1,account:!1});var Fs=()=>(0,r.useContext)(zs),Ms=function(e){let{title:t,url:n,icon:a,style:l="default"}=e;const i=Y();return r.createElement("a",{className:`header-link-item header-link-item--${l}`,href:i?.baseUrl+n,onClick:e=>e.stopPropagation()},r.createElement("i",{className:"header-link-item__icon zmdi zmdi-"+a}),t)};function Ds(){return Ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ds.apply(this,arguments)}var Us=function(e){let{title:t,artworkBackgroundUrl:n,links:a,hasChildren:l,isExpanded:i=!1,onClickExpand:s,titleClassName:o,defaultLevel:c=0,extraDescriptionString:u=null,className:d,contentTypeName:m,labels:p,titleLinkUrl:g}=e;const h=Y(),f=a.filter((e=>e.title.length)),[b]=f;return r.createElement("div",{className:`header-section-header header-section-header--${c} ${i?"header-section-header--expanded":""} ${l?" header-section-header--clickable":""} ${d??""} header-section-header--${m}`,onClick:"characters"!==m?s:void 0,role:"button"},r.createElement("div",{className:`header-section-header__background header-section-header__background--${h?.lowercaseName??"unknown"} ${m?.length?"header-section-header__background--"+m:""}`,style:n?.length?{backgroundImage:`url(${n})`}:void 0}),r.createElement("div",{className:"header-section-header__user-select-catch"}),r.createElement("div",{className:"header-section-header__top"},r.createElement("div",{className:"header-section-header__content-wrp"},r.createElement("div",{className:`header-section-header__content-title ${o??""}`},g?.length||b?r.createElement("a",{href:h?.baseUrl+(g?.length?g:b.url),onClick:e=>{e.stopPropagation()}},t):t),r.createElement("div",{className:"header-section-header__content-actions"},f.map((e=>r.createElement(Ms,Ds({key:e.title},e))))),u?.length?r.createElement("div",{className:"header-section-header__extra-text"},u):null),l&&s&&"characters"!==m?r.createElement("div",{className:"header-section-header__dropdown-wrapper"},r.createElement(es,{isExpanded:i,labels:p})):null),f.length>0&&r.createElement("div",{className:"header-section-header__mobile-bottom"},f.map((e=>r.createElement(Ms,Ds({key:e.title},e,{style:"mobile-column"}))))))};function Bs(){return r.createElement("i",{className:"zmdi zmdi-open-in-new external-link-icon"})}function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vs.apply(this,arguments)}function qs(e,t){if(e){if(e.includes("archon"))return e;if(t)return`${t.baseUrl}${e}`}}function js(e){let{iconFallbackUrl:t,iconUrl:n,title:a}=e;const[l,i]=(0,r.useState)(!1);return r.createElement("img",{src:l&&t?t:n,alt:a,className:"header-section-item__img",loading:"lazy",onError:()=>{i(!0)}})}function Hs(e){let{bossLinks:t}=e;return r.createElement(r.Fragment,null,t.map((e=>e.title?.length>0?r.createElement(Ms,Vs({key:e.title},e)):null)))}function Gs(e){let{name:t,character:n}=e;return r.createElement("div",{className:"header-section-item__character-title"},r.createElement("div",null,t),r.createElement("div",{className:"header-section-item__character-title-server"},"(",n.characterServerName,")"))}function Ws(e){let{character:t}=e;return r.createElement("div",{className:`header-section-item__character ${t.characterClassName??""}`},t.specIcons?t.specIcons.map((e=>r.createElement(De,{size:16,type:e.name,key:e.id}))):r.createElement(r.Fragment,null," ",t.description,r.createElement(Ks,{character:t})))}function Ks(e){let{character:t}=e;return t.secondDescription&&t.secondCharacterClassName?r.createElement("span",{className:t.secondCharacterClassName}," ","/ ",t.secondDescription):null}function Zs(e){let{report:t}=e;return r.createElement("div",{className:"header-section-item__report"},t.creator," - (",t.visibility,") -"," ",Ki(new Date(1e3*Number.parseInt(t.creationDate))))}var Ys=function(e){let{title:t,iconUrl:n,type:a,labels:l,bossLinks:i,character:s,report:o,linkUrl:c,isLastInList:u=!1,isFirstInList:d=!1,defaultLevel:m=0,desktopOnlyLinkUrl:p,backgroundImageUrl:g,subTitle:h,linkLabel:f,iconFallbackUrl:b}=e;const E=Y(),[v,y]=(0,r.useState)(!1);return r.createElement("li",{className:"header-section-item__li "+(p?"header-section-item__li--with-desktop-link":"")},r.createElement(R,{href:qs(c,E),className:"header-section-item__link",openInNewTab:!c?.startsWith("/"),setRel:"archon"!==a},r.createElement("div",{className:`header-section-item__outer-wrapper header-section-item__outer-wrapper--with-tree ${v?" header-section-item--expanded":""} ${u?" header-section-item__outer-wrapper--last":""} ${d?"header-section-item__outer-wrapper--first":""} ${d&&u?"header-section-item__outer-wrapper--unique":""} ${i?.length?"header-section-item--expandable":""}`},r.createElement("div",{className:`header-section-item header-section-item--level-${m} header-section-item--${a} ${g?"header-section-item--with-bg-image":""}`,style:g?{"--bg-image":`url(${g})`}:void 0,onClick:()=>{i?.length&&y(!v)}},p?.length?r.createElement("a",{href:E?.baseUrl+p,className:"header-section-item__background-link"}):null,n?r.createElement("div",{className:n.startsWith("http")||n.startsWith("/")?"header-section-item__img-wrapper":"header-section-item__icon-wrapper"},n.startsWith("http")||n.startsWith("/")?r.createElement(js,{iconUrl:n,iconFallbackUrl:b,title:t}):r.createElement("i",{className:"header-section-item__icon zmdi zmdi-"+n})):null,r.createElement("div",{className:"header-section-item__content-wrp"},r.createElement("div",{className:"header-section-item__content-title"},"character"===a&&s.characterServerName?r.createElement(Gs,{character:s,name:t}):t),h?r.createElement("div",{className:"header-section-item__content-subtitle"},h):null,"archon"===a&&f?r.createElement("div",{className:"header-section-item__content-pseudo-link"},r.createElement("span",null,f),r.createElement(Bs,null)):null,r.createElement("div",{className:"header-section-item__content-actions"},"boss"===a?r.createElement(Hs,{bossLinks:i}):"character"===a?r.createElement(Ws,{character:s}):"report"===a?r.createElement(Zs,{report:o}):null),(i?.length??0)>0&&r.createElement(es,{isExpanded:v,style:"compact",labels:l}))),"boss"===a?r.createElement("div",{className:"header-section-item__mobile-actions-outer-wrapper"},r.createElement("div",{className:"header-section-item__mobile-actions-wrapper"},r.createElement("div",{className:"header-section-item__mobile-actions"},i.map((e=>e.title?.length?r.createElement(Ms,Vs({key:e.title},e,{style:"mobile"})):null))))):null)))};function Js(){return Js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Js.apply(this,arguments)}const Xs="header-menu-open-sections";function Qs(e){let{onClick:t,currentlyShowingMore:n,labels:a}=e;return r.createElement("li",{className:"header-menu-sections-panel__section-items-toggle-more"},r.createElement("button",{type:"button",onClick:t,className:"header-menu-sections-panel__section-items-toggle-more-button"},r.createElement("div",{className:"header-menu-sections-panel__section-items-toggle-more-button-title"},n?a.showLess:a.showMore),r.createElement(es,{isExpanded:n,style:"compact",className:"header-menu-sections-panel__section-items-toggle-more-button-indicator",labels:a,isInteractiveElement:!1})))}var eo=function(e){let{model:t,labels:n,hasSiblingSections:a=!1}=e;const[l,i]=(0,r.useState)((()=>{const e=u.get(Xs);if(e)try{return JSON.parse(e)}catch{}return t.sections&&1===t.sections.length&&t.sections[0].header?{[t.sections[0].header.id]:{expanded:!0,showMore:!1}}:{}}));(0,r.useEffect)((()=>{u.set(Xs,JSON.stringify(l))}),[l]);const s=!a&&1===t.sections.length;return r.createElement("div",{className:"header-menu-sections-panel"},t.sections.map((e=>{const t=(e=>{let{header:t}=e;return t?`${t.id}--${t.title.split(" ").join("-").toLowerCase()}`:""})(e),a=t in l?l[t]:null,o=s||(a?a.expanded:e.isExpanded??!1),c=e.children??[],u=c.length>0&&"report"===c[0].type,d=u&&c.length>4,m=!u||a&&a.showMore?c:c.slice(0,4);return r.createElement("div",{key:t,className:"header-menu-sections-panel__section-wrapper "+(o?"header-menu-sections-panel__section--expanded":"")},e.header?r.createElement(Us,Js({},e.header,{hasChildren:!s&&c.length>0,onClickExpand:s?void 0:()=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;i((n=>e in n?{...n,[e]:{...n[e],expanded:!n[e].expanded}}:{...n,[e]:{expanded:!t||!t.isExpanded,showMore:!1}}))}(t,e)},isExpanded:o,labels:n})):null,o&&r.createElement("ul",{className:"header-menu-sections-panel__section-items"},m.map(((e,t)=>0===e.title.length?null:r.createElement(Ys,Js({},e,{key:e.linkUrl??e.title,isFirstInList:0===t,isLastInList:m.length-1===t,labels:n})))),d&&r.createElement(Qs,{onClick:()=>(e=>{i((t=>e in t?{...t,[e]:{...t[e],showMore:!t[e].showMore}}:{...t,[e]:{expanded:!0,showMore:!0}}))})(t),currentlyShowingMore:!!a&&a.showMore,labels:n})))})))},to=function(e){let{contents:t,activeContentId:n="",onActiveContentChange:a,onActiveExpansionChange:l,labels:i,defaultExpansionsPerContent:s,siteSelect:o}=e;const c=Y(),u=o?{...o,options:o.options.map((e=>({...e,label:e.longLabel})))}:null,d=(0,r.useContext)(zs),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[E,v]=(0,r.useState)(),[y,_]=(0,r.useState)(),[w,k]=(0,r.useState)(),[N,T]=(0,r.useState)([]),[C,S]=(0,r.useState)();(0,r.useEffect)((()=>{if(!t?.length)return;const e=t.find((e=>e.id===n))??t[0];v(e),t.length}),[t,n,v]);const I=(0,r.useMemo)((()=>t.length<2?[]:t.map((e=>({value:e.id,label:e.title})))),[t]);(0,r.useEffect)((()=>{const e=N.find((e=>e.value===w?.id));e&&S(e)}),[w,N,S]),(0,r.useEffect)((()=>{if(!E)return;const e=I.find((e=>e.value===E.id));e&&_(e);const t=E.expansions.filter((e=>e.panel?.sections?.length>0)).map((e=>({value:e.id,label:e.title})));if(t&&T(t),s[E.id]){const e=E.expansions.find((e=>e.id===s[E.id]));e&&k(e)}else k(E.expansions[0])}),[E,s,I,_,T,k]);const x=e=>{if(e&&t?.length){const n=t.find((t=>t.id===e?.value));v(n??t[0]),a&&n&&a(n)}};return c?r.createElement("div",{className:"header-menu-content "+((N?.length??1)<2?"header-menu-content--no-expansion":"")},u&&r.createElement(bs,{className:"header-menu-content__site-select",style:"dropdown",async:!1,options:u.options,value:u.options.find((e=>e.area===c.area&&e.season===c.season))??u.options[0],valueLabel:i.siteSelectLabel,onMenuOpen:()=>p(!0),onMenuClose:()=>p(!1)}),r.createElement("div",{className:"header-menu-content__content-type-picker"},t.length>2&&I.length&&r.createElement(bs,{style:"dropdown",async:!1,options:I,value:y,onChange:x,valueLabel:i.contentTypeSelectLabel,onMenuOpen:()=>h(!0),onMenuClose:()=>h(!1)}),2===t.length&&y&&r.createElement(pi,{options:I,value:y,onChange:x,style:"bubble"})),d.game||"admin-tools"===n||"archon"===n?r.createElement(r.Fragment,null,r.createElement("div",{className:"header-menu-content__expansion-picker"},!E||!E.expansions.length||(N?.length??1)<2?null:r.createElement(bs,{style:"dropdown",async:!1,options:N,value:C,valueLabel:i.expansionSelectLabel,onChange:e=>{if(!t?.length||!E?.expansions?.length)return;const n=E.expansions.find((t=>t.id===e?.value))??t[0].expansions[0];k(n),l?.(n,E)},onMenuOpen:()=>b(!0),onMenuClose:()=>b(!1)})),r.createElement("div",{className:"header-menu-content__panel "+(m||f||g?"header-menu-content__panel--menuOpen":"")},w&&r.createElement(eo,{model:w.panel,labels:i}))):r.createElement("div",{className:"header-menu-content__data-loading"},r.createElement(kt,null))):null},no=function(e){let{size:t=64,hasTitle:n=!1,alt:a}=e;const l=Y();return l?r.createElement("img",{className:"site-logo",src:n?l.headerLogoUrl:l.siteLogoImageUrl,alt:a??l.siteTitle,style:{width:n?void 0:t,height:n?t:63*t/64}}):null},ao=function(e){let{availableLanguages:t}=e;const[n,a]=(0,r.useState)(!1);(0,r.useEffect)((()=>(n&&document.addEventListener("mousedown",l),function(){document.removeEventListener("mousedown",l)})),[n]);const l=e=>{const t=e?.target;t instanceof Element&&("header-language-picker-element"===t.id||t.closest("#header-language-picker-element")||a(!1))};return r.createElement("div",{className:"header-language-picker",id:"header-language-picker-element",onClick:e=>{e.stopPropagation(),a((e=>!e))},onFocus:()=>a(!0),onBlur:()=>a(!1)},r.createElement("div",{className:"header-language-picker__wrapper "+(n?"header-language-picker__wrapper--opened":"")},r.createElement("span",{className:"header-language-picker__language-icon zmdi zmdi-translate","aria-hidden":"true"}),r.createElement("span",{className:"header-language-picker__language-title"},"Language"),r.createElement("i",{className:"header-language-picker__caret zmdi zmdi-caret-down","aria-hidden":"true"})),r.createElement("ul",{className:"header-language-picker__dropdown "+(n?"header-language-picker__dropdown--opened":"")},t?.length?t.map((e=>r.createElement("li",{key:e.title},r.createElement("a",{className:"header-language-picker__dropdown-item",rel:"alternate",hrefLang:e.languageTag,href:"//"+e.linkUrl+window.location.pathname+window.location.search+window.location.hash},e.title)))):null))};function ro(){return ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ro.apply(this,arguments)}function lo(e){let{onSearchInputChange:t,searchValue:n,doFetch:a,onChange:l,style:i="default",...s}=e;const o=(0,r.useRef)(null),c=(0,r.useRef)(""),u=function(e){const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}(n),[d,m]=(0,r.useState)({}),[p,g]=(0,r.useState)([]),[h,f]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=()=>{h?f(!1):g((e=>0===e.length?e:[]))},t=e;document.addEventListener("click",t);const n=t=>{"Escape"===t.key&&e()};return window.addEventListener("keydown",n),()=>{document.removeEventListener("click",t),window.removeEventListener("keydown",n)}}),[h,n]),r.createElement(bs,ro({openMenuOnClick:!1,noOptionsMessage:()=>trans("desktop-client.no_search_results"),loadingMessage:()=>trans("desktop-client.loading")},s,{async:!0,style:"default"===i?"menu":i,inputValue:n,onInputChange:(e,n)=>{"input-blur"!==n.action&&"menu-close"!==n.action?(t(e),""===e&&g([])):t((e=>""===e?e:u))},cacheOptions:!1,loadOptions:async e=>{c.current=e,o.current?.abort();let t=d[e];if(!t){if(await new Promise((e=>setTimeout(e,300))),c.current!==e)return[];o.current=new AbortController,t=await a(e,o.current?.signal),o.current?.signal.aborted||m((n=>({...n,[e]:t})))}return t=t??[],g(t),t},onFocus:()=>{f(!0),0===p.length&&n&&g(d[n]??[])},menuIsOpen:p.length>0,defaultOptions:p,onChange:(e,n)=>{l(e,n),t(e?.name?.trim()),g([])}}))}function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},io.apply(this,arguments)}function so(e){return r.createElement(oo,io({},e,{style:"header-search"}))}function oo(e){let{isFocused:t,isDisabled:n,innerRef:a,isSelected:l,innerProps:i,cx:s,data:o,style:c="default"}=e;const u=o;return r.createElement(R,{href:u.wrapInLink?u.value:void 0},r.createElement("div",io({ref:a,className:`${s({option:!0,"option--is-disabled":n,"option--is-focused":t,"option--is-selected":l},"search-select-autocomplete-option")} search-select-autocomplete-option--${c}`},i),r.createElement("div",{className:"search-select-autocomplete-option__left-wrapper"},r.createElement("span",{className:`search-select-autocomplete-option__actor-class ${u.labelClass}`},u.label?.length?u.label:u.name,u.id?r.createElement(r.Fragment,null," - ",u.id):null),u.hidden&&r.createElement("span",null," (Hidden)")),r.createElement("div",{className:"search-select-autocomplete-option__right-wrapper"},r.createElement("span",{className:"search-select-autocomplete-option__server",title:u.server},u.server),r.createElement("span",{className:"search-select-autocomplete-option__type"},u.type))))}var co=function(e){let{urlFormatter:t,onSearchTermOrLinkChange:n,labelPlaceholder:a=null,buttonLabel:l=null,hasSearchPageLinkButton:i=!1,resultsTransformer:s=(e=>e),style:o="default"}=e;const[c,u]=(0,r.useState)("");return r.createElement("div",{className:"search-select"},r.createElement(lo,{onSearchInputChange:u,onChange:e=>{e&&n({kind:"link",value:e.value})},searchValue:c,doFetch:async(e,n)=>{if(e.length<=1)return[];try{const a=await fetch(t(e),{signal:n}),r=await a.json();let l=[];return r.length&&(l=r.map((e=>({...e,name:e.value,value:e.link})))),s(l)}catch(e){return[]}},placeholder:a??trans("desktop-client.search_placeholder"),components:"default"===o?{Option:oo}:{Option:so},style:o}),i?r.createElement(Tn,{className:"search-select__button",href:`/search/?term=${c}`,styles:c?.length?["primary","search"]:["primary","search","search-disabled"]},r.createElement("span",{className:"zmdi zmdi-search"}),r.createElement(D,null,l??trans("global.search"))):r.createElement(F,{className:"search-select__button",type:"submit",styles:["unstyled","icon"],"aria-label":trans("desktop-client.search"),disabled:!c?.length,onClick:()=>{n({kind:"term",value:c})}},r.createElement("span",{className:"zmdi zmdi-search","aria-hidden":!0}),r.createElement(D,null,l??trans("global.search"))))};function uo(e){let{labels:t}=e;const n=(()=>{const e=Y(),t=`${e?.baseUrl}/search/autocomplete?term=:term`;return e=>t.replace(":term",e)})();return r.createElement("div",{className:"header-search-select"},r.createElement("label",null,r.createElement(D,null,t.searchBarPlaceholder),r.createElement(co,{onSearchTermOrLinkChange:e=>{e&&"link"===e.kind&&e.value?.length&&(window.location.href=e.value)},style:"header-search",urlFormatter:n,labelPlaceholder:t.searchBarPlaceholder,hasSearchPageLinkButton:!0,buttonLabel:t.searchLabel,resultsTransformer:e=>e.map((e=>({...e,wrapInLink:!0})))})))}function mo(e){let{linkUrl:t,iconUrl:n,text:a,responsiveText:l,artworkUrl:i,backgroundUrl:s}=e;const o=Y();return r.createElement("a",{href:o?.baseUrl+t,className:"header-top-bar__button-link "+(i?.length?"header-top-bar__button-link__large-padding":""),style:s?{backgroundImage:`url(${s})`}:void 0},i?.length&&r.createElement("img",{src:i,alt:"",className:"header-top-bar__button-artwork"}),(n?.length??0)>0&&r.createElement("img",{src:n,alt:"",className:"header-top-bar__button-icon"}),r.createElement("span",{className:"header-top-bar__button-link-full"},a),r.createElement("span",{className:"header-top-bar__button-link-responsive"},l))}var po=function(e){let{streamsCount:t,headerLinks:n,availableLanguages:a,backgroundArtworkUrl:l,labels:i,pollsCount:s,currentActiveRaceLink:o,currentActiveRaceBackgroundImageUrl:c,currentActiveRaceArtworkImageUrl:u}=e;const d=Y();return r.createElement("div",{className:"header-top-bar"},r.createElement("div",{className:"header-top-bar__background",style:{backgroundImage:`url('${l}')`}}),r.createElement("div",{className:"header-top-bar__inner-wrapper"},r.createElement("a",{className:"header-top-bar__game-logo",href:d?.baseUrl},r.createElement(no,{size:34})),r.createElement(uo,{labels:i}),t>0&&d&&r.createElement(mo,{linkUrl:"/streams",iconUrl:`${d.assetServerBaseUrl}/img/social/twitch.png`,responsiveText:t.toString(),text:o?.length?t.toString():i.streamsCountLabel}),s>0&&r.createElement(mo,{linkUrl:"/",responsiveText:i.pollsCountLabel,text:i.pollsCountLabel}),o?.length&&r.createElement(mo,{linkUrl:o,text:i.followTheRaceLabel,backgroundUrl:c??void 0,artworkUrl:u??void 0,responsiveText:i.followTheRaceLabel}),r.createElement("div",{className:"header-top-bar__links"},n.length>1&&n.map((e=>r.createElement("a",{key:e.title,href:e.url.startsWith("http")?e.url:d?.baseUrl+e.url,className:"header-top-bar__links--item"},e.title)))),r.createElement("div",{className:"header-top-bar__spacer"}),a.length>0&&r.createElement(ao,{availableLanguages:a})))};const go=e=>`badge-${e}`;var ho=function(e){let{gameContents:t,onOpenGameContent:n,onOpenCharacters:a,onOpenGuilds:l,onMouseEnter:i,labels:s}=e;const o=Y(),{user:c,lazyLoadUser:d,userStatus:m}=Dl(),p=d&&Boolean(m.isIdle||m.isLoading),[g,h]=(0,r.useState)({});return(0,r.useEffect)((()=>{t&&h(t.contents.reduce(((e,t)=>(e[t.id]=!!t.hasBadge&&(e=>{const t=go(e),n=u.get(t);if(n){const e=Number.parseInt(n);return Date.now()-e>13824e5&&(u.remove(t),!0)}return!0})(t.id),e)),{}))}),[t]),r.createElement("div",{className:"header-bottom-bar"},r.createElement("div",{className:"header-bottom-bar__left"},t?.contents?.map((e=>r.createElement("button",{key:e.id,className:`header-bottom-bar__item header-bottom-bar__item--${e.id} ${o?.lowercaseName??""}`,onClick:t=>{var a;e.hasBadge&&g[e.id]&&(a=e.id,u.set(go(a),`${Date.now()}`),h((t=>({...t,[e.id]:!1})))),n(e,t.currentTarget.getBoundingClientRect()?.x??0)},type:"button",onMouseEnter:t=>i("content",e,t.currentTarget.getBoundingClientRect()?.x??0)},e.buttonIconUrl?r.createElement("img",{className:"header-bottom-bar__item-button-icon",src:e.buttonIconUrl}):null,e.title,r.createElement("i",{className:"header-bottom-bar__item-icon zmdi zmdi-caret-down","aria-hidden":!0}),e.hasBadge&&g[e.id]&&r.createElement("div",{className:"header-bottom-bar__item-new-badge"},s.badgeLabel))))??null),r.createElement("div",{className:"header-bottom-bar__right"},c?r.createElement(r.Fragment,null,r.createElement("button",{className:`header-bottom-bar__item header-bottom-bar__item--guilds ${o?.lowercaseName??""}`,onClick:l,type:"button",onMouseEnter:()=>i("guilds",null,null)},s.guildsLabel,r.createElement("i",{className:"header-bottom-bar__item-icon zmdi zmdi-caret-down","aria-hidden":!0})),r.createElement("button",{className:`header-bottom-bar__item header-bottom-bar__item--characters ${o?.lowercaseName??""}`,onClick:a,type:"button",onMouseEnter:()=>i("characters",null,null)},r.createElement("img",{className:"header-bottom-bar__item-image",src:c.thumbnail||`${o?.assetServerBaseUrl}/img/common/profile.png`,alt:""}),c.userName??s.charactersLabel,r.createElement("i",{className:"header-bottom-bar__item-icon zmdi zmdi-caret-down","aria-hidden":!0}))):p?null:r.createElement(r.Fragment,null,r.createElement("a",{className:"header-bottom-bar__item header-bottom-bar__item--sign-in",href:`${o?.baseUrl}/register`},r.createElement("i",{className:"header-bottom-bar__item-icon header-bottom-bar__item-icon--sign-in zmdi zmdi-account","aria-hidden":!0}),s.signupLabel),r.createElement("a",{className:"header-bottom-bar__item header-bottom-bar__item--sign-in",href:`${o?.baseUrl}/login`},r.createElement("i",{className:"header-bottom-bar__item-icon header-bottom-bar__item-icon--sign-in zmdi zmdi-sign-in","aria-hidden":!0}),s.loginLabel))))};function fo(e){let{isCharacterMenuOpen:t,onCharactersMenuClick:n,labels:a}=e;const l=Y(),{user:i,lazyLoadUser:s,userStatus:o}=Dl();return s&&Boolean(o.isIdle||o.isLoading)||!i?r.createElement(Eo,{labels:a}):r.createElement("button",{className:"header-mobile-bar__characters header-mobile-bar__menu-btn "+(t?"header-mobile-bar__characters--opened":""),onClick:n},r.createElement("img",{className:"header-mobile-bar__characters-image",src:i.thumbnail||`${l?.assetServerBaseUrl}/img/common/profile.png`,alt:""}))}const bo="header-not-logged-in-element";function Eo(e){let{labels:t}=e;const n=Y(),[a,l]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(a)return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}}),[a]);const i=e=>{const t=e?.target;t instanceof Element&&(t.id===bo||t.closest(`#${bo}`)||l(!1))};return r.createElement("div",{className:"header-mobile-bar__not-logged-wrapper",id:bo,onClick:e=>{e.stopPropagation(),l((e=>!e))},onFocus:()=>l(!0),onBlur:()=>l(!1)},r.createElement("div",{className:"zmdi zmdi-account-circle"}),r.createElement("ul",{className:"header-mobile-bar__not-logged-dropdown "+(a?"header-mobile-bar__not-logged-dropdown--opened":"")},r.createElement("li",null,r.createElement("a",{className:"header-mobile-bar__not-logged-dropdown-item",href:`${n?.baseUrl}/login`},r.createElement("span",{className:"zmdi zmdi-sign-in","aria-hidden":"true"}),t.loginLabel)),r.createElement("li",null,r.createElement("a",{className:"header-mobile-bar__not-logged-dropdown-item",href:`${n?.baseUrl}/register`},r.createElement("span",{className:"zmdi zmdi-account","aria-hidden":"true"}),t.signupLabel))))}var vo=function(e){let{availableLanguages:t,onContentMenuClick:n,onCharactersMenuClick:a,isContentMenuOpen:l,isCharacterMenuOpen:i,labels:s}=e;const o=Y(),[c,u]=(0,r.useState)(!1);return r.createElement("div",{className:"header-mobile-bar"},r.createElement("div",{className:"header-mobile-bar__left"},r.createElement("button",{className:"header-mobile-bar__menu header-mobile-bar__menu-btn "+(l?"header-mobile-bar__menu--opened":""),onClick:()=>{u(!1),n()}},r.createElement("div",{className:"header-mobile-bar__menu-bar"}),r.createElement("div",{className:"header-mobile-bar__menu-bar"}),r.createElement("div",{className:"header-mobile-bar__menu-bar"}),r.createElement(D,null,s.menuLabel)),r.createElement("button",{className:"header-mobile-bar__search",onClick:()=>u(!c)},r.createElement("span",{className:"zmdi zmdi-search header-mobile-bar__search-icon","aria-hidden":"true"}),r.createElement(D,null,s.searchLabel))),r.createElement("a",{className:"header-mobile-bar__game-logo",href:o?.baseUrl},r.createElement(no,{size:33})),r.createElement("div",{className:"header-mobile-bar__right"},t?r.createElement(ao,{availableLanguages:t}):null,r.createElement(fo,{isCharacterMenuOpen:i,onCharactersMenuClick:()=>{u(!1),a()},labels:s})),r.createElement("div",{className:"header-mobile-bar__search-wrapper "+(c?"header-mobile-bar__search-wrapper--visible":"")},r.createElement("div",{onClick:e=>e.stopPropagation()},r.createElement(uo,{labels:s}))))};function yo(e){let{labels:t,links:n}=e;const a=Y();return a?r.createElement(Us,{artworkBackgroundUrl:`${a.assetServerBaseUrl}/img/${a.lowercaseName}/not-found.jpg`,hasChildren:!1,id:"header-menu-user-no-characters",links:n,title:t.noCharactersTitle,extraDescriptionString:t.noCharactersDescription,titleClassName:null,titleLinkUrl:null,onClickExpand:()=>{window.location.href=a?.articlesBaseUrl+"/help/characters"},className:"header-section-header--clickable header-section-header--empty-character",labels:t}):r.createElement(r.Fragment,null)}var _o=function(e){let{charactersPanel:t,personalLogsPanel:n,updateCharactersUrl:a,labels:l,csrfToken:i,logoutUrl:s,shouldHideCharactersPanel:o=!1}=e;const c=Y(),u=Fs(),d=t&&!o;return r.createElement("div",{className:"header-menu-characters"},u.account?r.createElement(r.Fragment,null,n&&r.createElement(eo,{model:n,labels:l,hasSiblingSections:d}),r.createElement("div",{className:"header-menu-characters__action-panel"},a&&r.createElement(r.Fragment,null,r.createElement("a",{href:c?.baseUrl+a,className:"header-menu-characters__action-btn"},l.updateCharactersLabel),r.createElement("div",{className:"header-menu-characters__action-separator"},l.orSeparator)),r.createElement("form",{method:"POST",action:s},r.createElement("input",{type:"hidden",name:"_token",value:i}),r.createElement("button",{type:"submit",className:"header-menu-characters__action-btn"},l.logoutLabel))),d&&r.createElement(r.Fragment,null,t.sections[0].children?.length?r.createElement(eo,{model:t,labels:l}):r.createElement(yo,{links:t.sections[0].header?.links??[],labels:l}))):r.createElement("div",{className:"header-menu-content__data-loading"},r.createElement(kt,null)))};function wo(e){let{labels:t}=e;const n=Y();return n?r.createElement(Us,{artworkBackgroundUrl:`${n.assetServerBaseUrl}/img/${n.lowercaseName}/not-found.jpg`,hasChildren:!1,id:"header-menu-user-no-guilds",links:[],title:t.noGuildTitle,extraDescriptionString:t.noGuildDescription,titleClassName:null,titleLinkUrl:null,onClickExpand:()=>{window.location.href=n?.articlesBaseUrl+"/help/guilds"},className:"header-section-header--clickable header-section-header--no-guild",labels:t}):r.createElement(r.Fragment,null)}var ko=function(e){let{guildsPanel:t,labels:n}=e;const a=Y(),l=Fs();return r.createElement("div",{className:"header-menu-characters"},l.account?t?.sections?.length?r.createElement(eo,{model:t,labels:n}):r.createElement(wo,{labels:n}):r.createElement("div",{className:"header-menu-content__data-loading"},r.createElement(kt,null)),r.createElement("div",{className:"header-menu-characters__action-panel"},r.createElement("a",{href:`${a?.baseUrl}/guild/create`,className:"header-menu-characters__action-btn"},n.createAGuildLabel),r.createElement("div",{className:"header-menu-characters__action-separator"},n.orSeparator),r.createElement("a",{href:`${a?.baseUrl}/guild/join`,className:"header-menu-characters__action-btn"},n.joinAGuildLabel)))};function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},No.apply(this,arguments)}var To=function(e){let{characters:t,guilds:n,onGuildChange:a,onCharactersChange:l,activeSection:i="guilds",labels:s}=e;const o={value:"guilds",label:s.guildsLabel},c={value:"characters",label:s.charactersLabel},u=[o,c];return r.createElement("div",{className:"header-menu-user"},r.createElement("div",{className:"header-menu-user__content-type-picker"},r.createElement(pi,{options:u,value:"guilds"===i?o:c,onChange:e=>{"guilds"===e.value&&"guilds"!==i?a():"characters"===e.value&&"characters"!==i&&l()},style:"bubble"})),"guilds"===i?r.createElement(ko,No({},n,{labels:s})):t?r.createElement(_o,No({},t,{labels:s})):null)};function Co(e){let{options:t}=e;const n=Y();if(!n)return null;const a=t.find((e=>e.area===n.area&&e.season===n.season))??t[0];return r.createElement("nav",{className:"site-select"},r.createElement("ul",{className:"site-select__options"},t.map((e=>r.createElement("li",{key:e.value,className:ht()({"site-select__option":!0,"site-select__option--active":e.value===a.value})},r.createElement("a",{href:e.url},r.createElement("img",{src:e.iconUrl,alt:"",loading:"lazy"})," ",r.createElement("span",null,e.label)))))))}function So(){return So=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},So.apply(this,arguments)}var Io=n(69968),xo=n.n(Io);const Po=()=>{try{return crypto.randomUUID()}catch{return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>{const t=Number.parseInt(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))}},Ro=(new Intl.NumberFormat).formatToParts(1234.5),Ao=["#aaeeee","#f45b5b","#90ee7e","#DDDF00","#7E4DB1","#7798BF","#777777","#ff0066","#55BF3B","#DF5353","#058DC7","#50B432","#ED561B","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],Lo=[[170,238,238],[244,91,91],[144,238,126],[221,223,0],[126,77,177],[119,152,191],[119,119,119],[255,0,102],[85,191,59],[223,83,83],[5,141,199],[80,180,50],[237,86,27],[36,203,229],[100,229,114],[255,150,85],[255,242,99],[106,249,196]],$o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lo[0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lo[5],a=0;return[`rgba(${t.join(",")})`,...Array.from({length:e},(()=>(a+=1/e,`rgb(${[Math.round(n[0]*a+(1-a)*t[0]),Math.round(n[1]*a+(1-a)*t[1]),Math.round(n[2]*a+(1-a)*t[2])].join(",")})`)))]};var Oo={lang:{thousandsSep:Ro.find((e=>"group"===e.type))?.value??",",decimalPoint:Ro.find((e=>"decimal"===e.type))?.value??"."},colors:Ao,chart:{backgroundColor:"#141414",borderWidth:1,borderRadius:0,borderColor:"#333",plotShadow:!1,spacingTop:5,plotBorderWidth:0,zoomType:"x",style:{fontFamily:"Avenir, Arial, sans-serif"}},title:{style:{color:"#e1f2f5",font:"17px Avenir, Arial, sans-serif"}},subtitle:{style:{color:"rgb(174, 187, 192)",font:"14px Avenir, Arial, sans-serif"},y:38},xAxis:{ordinal:!1,gridLineWidth:0,lineColor:"#333",tickColor:"#333",labels:{style:{color:"#e1f2f5",fontWeight:"normal",fontSize:"13px"}},title:{style:{color:"#e1f2f5",font:"bold 15px Avenir, Arial, sans-serif"}}},yAxis:{alternateGridColor:void 0,minorTickInterval:null,gridLineColor:"rgba(255, 255, 255, .1)",lineWidth:0,tickWidth:0,labels:{style:{color:"#e1f2f5",fontWeight:"normal",fontSize:"13px"}},title:{style:{color:"#e1f2f5",font:"bold 15px Avenir, Arial, sans-serif"}}},legend:{itemStyle:{color:"#c2c7d0",fontSize:"15px"},itemHoverStyle:{color:"#e1f2f5"},itemHiddenStyle:{color:"#666"},maxHeight:60,navigation:{activeColor:"#333",inactiveColor:"#141414",arrowSize:11,style:{color:"#e1f2f5",fontSize:"15px"}}},tooltip:{backgroundColor:"#202020",borderWidth:5,borderColor:"rgba(33%, 33%, 33%, 0.8)",borderRadius:2,style:{color:"#e1f2f5"}},plotOptions:{series:{turboThreshold:0,marker:{enabled:!1}},bar:{dataLabels:{style:{fontSize:"12px",color:"#e1f2f5",textOutline:"1.5px solid #222"},y:-1}},line:{dataLabels:{color:"#e1f2f5"},marker:{lineColor:"#333"}},pie:{dataLabels:{color:"#e1f2f5",style:{color:"#e1f2f5",fontWeight:"normal",fontSize:"14px"}}},spline:{marker:{lineColor:"#333"}},scatter:{marker:{lineColor:"#333"}},candlestick:{lineColor:"fff"}},exporting:{buttons:{exportButton:{symbolFill:"#e1f2f5"},printButton:{symbolFill:"#e1f2f5"}}},rangeSelector:{buttonTheme:{fill:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#888"],[.6,"#555"]]},stroke:"#747474",style:{color:"#e1f2f5",fontWeight:"normal"},states:{hover:{fill:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#BBB"],[.6,"#888"]]},stroke:"#747474",style:{color:"white"}},select:{fill:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.1,"#000"],[.3,"#333"]]},stroke:"#747474",style:{color:"#e1f2f5"}}}},inputStyle:{backgroundColor:"#141414",color:"#e1f2f5",fontSize:"small",borderColor:"#4d4d4d"},labelStyle:{color:"#ff"}},navigator:{handles:{backgroundColor:"#141414",borderColor:"#d6d6d6"},outlineColor:"#4d4d4d",maskFill:"rgba(16, 16, 16, 0.5)",series:{color:"#808a9c",lineColor:"rgba(16,16,16,0.0)"}},scrollbar:{barBackgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#888"],[.6,"#555"]]},barBorderColor:"#747474",buttonArrowColor:"#d6d6d6",buttonBackgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#888"],[.6,"#555"]]},buttonBorderColor:"#747474",rifleColor:"#d6d6d6",trackBackgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#000"],[1,"#333"]]},trackBorderColor:"#747474"},drilldown:{activeDataLabelStyle:{color:"#e1f2f5",fontWeight:"normal",textOutline:"none",textDecoration:"none"}}},zo=n(78840),Fo=n.n(zo),Mo=n(74525),Do=n.n(Mo),Uo=n(43864),Bo=n.n(Uo),Vo=n(44814),qo=n.n(Vo),jo=n(75708),Ho=n.n(jo);function Go(e){let{options:t,lazyLoad:n=!0,theme:a=Oo}=e;const l="undefined"==typeof window?null:r.createElement(Wo,{options:t,theme:a});return n?r.createElement(qe.ZP,{height:200,offset:50},l):r.createElement(r.Fragment,null,l)}function Wo(e){let{options:t,theme:n}=e;const a=(0,r.useRef)(null),l=(0,r.useRef)(null),{width:i}=jn(l),[s,o]=(0,r.useState)(0);(0,r.useEffect)((()=>{null!==a.current&&0!==i&&i!==s&&(o(i),a.current.chart.reflow())}),[s,i]);const c=(0,r.useMemo)((()=>(0,hi.merge)((0,hi.cloneDeep)(n),{title:{text:t?.title?.text??""},credits:{enabled:!1}},t)),[t,n]);return r.createElement("div",{ref:l},function(e){return Boolean("timeLapse"in e&&e.timeLapse.dataPointKey&&e.timeLapse.dataInterval&&e.timeLapse.visualInterval)}(c)?r.createElement(Ko,{chartRef:a,options:c}):r.createElement(Ho(),{options:c,highcharts:Fo(),ref:a}))}function Ko(e){let{options:t,chartRef:n}=e;const[a,l]=(0,r.useState)(t);return function(e,t){const n=e.timeLapse;(0,r.useLayoutEffect)((()=>{if(!n)return;const a=e.series.filter((e=>e.data.length>0));let r=a.map((e=>e.data[0][n.dataPointKey])).reduce(((e,t)=>Math.min(e,t)));const l=a.map((e=>e.data[e.data.length-1][n.dataPointKey])).reduce(((e,t)=>Math.max(e,t))),i=a.flatMap((e=>e.data)),s=i.reduce(((e,t)=>Math.min(e,t.x)),Number.MAX_SAFE_INTEGER),o=i.reduce(((e,t)=>Math.max(e,t.x)),Number.MIN_SAFE_INTEGER),c=i.reduce(((e,t)=>Math.min(e,t.y)),Number.MAX_SAFE_INTEGER),u=o-s,d=i.reduce(((e,t)=>Math.max(e,t.y)),Number.MIN_SAFE_INTEGER)-c,m=Math.max(u,d),p=s+u/2,g=c+d/2,h=p-m/2,f=p+m/2,b=g-m/2,E=g+m/2;t((e=>({...e,xAxis:{...e.xAxis??{},min:h,max:f},yAxis:{...e.yAxis??{},min:b,max:E},series:e.series.map((e=>({...e,data:[]})))})));let v=setTimeout((function a(){let i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const s=performance.now();t((t=>(t.series.forEach(((a,l)=>{if(a.isTrailSeries)return void(a.data=t.series[a.relatedSeriesIndex].data.filter((e=>e[n.dataPointKey]>r-n.trailSeries.dataInterval)));if(a.isCurrentDataPointSeries)return void(a.data=t.series[a.relatedSeriesIndex].data.slice(-1));const i=e.series[l].data;a.data=i.filter((e=>e[n.dataPointKey]<=r))})),i&&(n.trailSeries||n.currentDataPointSeries)&&(t.series=t.series.concat(...n.trailSeries?t.series.map(((e,t)=>({...e,...n.trailSeries,isTrailSeries:!0,relatedSeriesIndex:t,data:[]}))):[],...n.currentDataPointSeries?t.series.map(((e,t)=>({...n.currentDataPointSeries,isCurrentDataPointSeries:!0,relatedSeriesIndex:t,data:e.data.slice(-1),marker:{...n.currentDataPointSeries.marker??{},fillColor:e.color??"white"}}))):[])),{...t})));const o=performance.now()-s;r+=n.dataInterval,r<l?v=setTimeout((()=>a(!1)),Math.max(1,n.visualInterval-o)):t((e=>({...e,series:e.series.filter((e=>!e.isTrailSeries&&!e.isCurrentDataPointSeries))})))}),n.initialDelay??0);return()=>clearTimeout(v)}),[e.series,t,n])}(t,l),r.createElement(Ho(),{options:a,highcharts:Fo(),ref:n})}"undefined"!=typeof window&&(Do()(Fo()),Bo()(Fo()),qo()(Fo()));var Zo=n(79521);const Yo={hiddenColumns:[],setHiddenColumns:()=>{}},Jo=(0,r.createContext)(Yo);function Xo(e){return r.createElement(no,e)}function Qo(){return Qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qo.apply(this,arguments)}function ec(e){let t=qt,n=He,a=Zt,l=Jt,i=tn,s=on;return"report"===e&&(t=e=>r.createElement(qt,Qo({rounded:!1},e)),n=e=>r.createElement(He,Qo({rounded:!1,bordered:!0},e)),a=e=>r.createElement(Zt,Qo({rounded:!1,bordered:!0},e)),l=e=>r.createElement(Jt,Qo({rounded:!1,bordered:!0},e)),i=e=>r.createElement(tn,Qo({rounded:!1,bordered:!0},e)),s=e=>r.createElement(on,Qo({rounded:!1,bordered:!0},e))),{Center:Ye,Icon:de,Styled:Te,Bar:en,AbilityIcon:t,ActorIcon:n,..._e(),ItemIcon:a,EncounterIcon:l,ImageIcon:i,GearIcon:s,Arrow:Ke,Tooltip:cn,BadgeLabel:un,SiteLogo:Xo,HorizontalContent:U,...Ge()}}function tc(e,t){return t?{width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth,...e&&t.sorting?{cursor:"pointer",userSelect:"none"}:{}}:{}}function nc(e){let t={...e};return Object.values(e).forEach((e=>{e.columns&&(t={...t,...nc(e.columns)})})),t}const ac=(e,t,n)=>{const a=e.original[n],r=t.original[n];return"string"==typeof a&&"string"==typeof r?a.localeCompare(r):"number"==typeof a&&"number"==typeof r?a-r:0};function rc(e){return Object.entries(e).map((e=>{let[t,n]=e;return{id:t,accessor:n.accessorFn??t,Header:n.header,width:n.width,maxWidth:n.maxWidth,minWidth:n.minWidth,sortDescFirst:"desc"===n.sorting?.initialDirection,sortType:ac,columns:n.columns?rc(n.columns):void 0}}))}const lc=()=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 17 24",fill:"#808080",style:{marginLeft:8,marginBottom:-1}},r.createElement("path",{d:"M8.5 0L0 9H17L8.5 0Z"}),r.createElement("path",{d:"M8.5 24L17 15L7.86805e-07 15L8.5 24Z"})),ic=()=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"9",viewBox:"0 0 17 9",fill:"#DEDEDE",style:{marginLeft:8,marginBottom:2}},r.createElement("path",{d:"M8.5 9L17 1.90735e-06L7.86805e-07 4.21161e-07L8.5 9Z"})),sc=()=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"9",viewBox:"0 0 17 9",fill:"#DEDEDE",style:{marginLeft:8,marginBottom:2}},r.createElement("path",{d:"M8.5 0L0 9H17L8.5 0Z"}));var oc=function(e){let{style:t,columns:n,data:a,enhancedMarkdownEnabled:l=!1,truncate:i,sorting:s,onRowClick:o,wrapperStyle:c={}}=e;const{hiddenColumns:u}=(0,r.useContext)(Jo)??Yo,d=(0,r.useMemo)((()=>Object.fromEntries(Object.entries(n).filter((e=>{let[,t]=e;return t})).map((e=>{let[t,n]=e;return[t,{...n,sorting:s&&n?.sorting}]})))),[n,s]),m=(0,r.useMemo)((()=>nc(d)),[d]),p=(0,r.useMemo)((()=>rc(d)),[d]),[g,h]=(0,r.useState)(!1),f=(0,r.useMemo)((()=>({hiddenColumns:u,...s?{sortBy:[{id:s.initialColumn,desc:"desc"===m[s.initialColumn].sorting?.initialDirection}]}:{}})),[m,u,s]),{getTableProps:b,getTableBodyProps:E,headerGroups:v,rows:y,prepareRow:_,setHiddenColumns:w}=(0,Zo.useTable)({columns:p,data:a,initialState:f,disableSortRemove:!0},Zo.useSortBy);(0,r.useEffect)((()=>{w(u)}),[u,w]);const k=O();let N;switch(t=t??k.tableStyle,t){case"dark-gray-striped":N="dark-gray-striped-table";break;case"dark-blue-striped":N="dark-striped-table";break;case"report":N="react-table react-table--report";break;case"v2":N="react-table react-table--v2";break;case"v2-bordered":N="react-table react-table--v2 react-table--v2--bordered"}const T=(0,r.useMemo)((()=>function(e){let{children:n}=e;const a=n?.props?.value?.toString()??(n?.filter?.(Boolean)??n)?.toString?.();return a?r.createElement(hn,{markdown:a,wrapped:!1,overrides:ec(t),onlyUsePassedOverrides:!0}):null}),[t]),C=(0,r.useMemo)((()=>l?T:r.Fragment),[T,l]),S=(0,r.useMemo)((()=>({lazyLoad:!1})),[]),I=s?.showControls??!0;return r.createElement(Be,{value:S},r.createElement("div",{className:"react-table__wrapper",style:c},r.createElement("div",{className:"react-table__overflow-wrapper"},r.createElement("table",Qo({className:N},b({role:void 0})),Object.values(d).some((e=>e.header))&&r.createElement("thead",null,v.map((e=>r.createElement("tr",e.getHeaderGroupProps({role:void 0}),e.headers.map((e=>{const t=m[e.id];return r.createElement("th",Qo({},e.getHeaderProps({...t?.sorting?e.getSortByToggleProps():void 0,role:void 0}),{className:t?.noWrap?"react-table__cell--no-wrap":void 0,style:{...e.getHeaderProps().style,...tc(!0,t),textAlign:t?.textAlign??"center"},title:t?.title}),r.createElement(C,null,e.render("Header"),t?.sorting&&I?e.isSorted?e.isSortedDesc?r.createElement(ic,null):r.createElement(sc,null):r.createElement("span",null,r.createElement(lc,null)):null))})))))),r.createElement("tbody",E({role:void 0}),y.map(((e,t)=>{const n=Boolean(i?.limit&&!g&&t>=i.limit);return _(e),r.createElement("tr",Qo({},e.getRowProps({role:void 0}),{hidden:n,onClick:o?()=>o(e.original):void 0,className:o?"react-table__row--selectable":""}),e.cells.map((e=>{const t=m[e.column.id],n=e.getCellProps([{role:void 0,className:t?.noWrap?"react-table__cell--no-wrap":void 0}]);return r.createElement("td",Qo({},n,{style:{...n.style,...tc(!1,t),textAlign:t?.textAlign??"left"}}),r.createElement(C,null,e.render("Cell")))})))}))))),i?.limit&&a.length>i.limit&&r.createElement(F,{onClick:()=>h(!g),styles:i.showMoreButton.styles},g?trans("global.show-less"):trans("global.show-more"))))},cc=function(e){let{error:t}=e;return r.createElement("div",{className:"report-component-error"},r.createElement(hn,{markdown:`\n# ${trans("global.error")} (${t.target}: ${t.code})\n\n<DescriptionList>\n${t.details.map((e=>`\n<Term>${e.code}</Term>\n<Description>${e.message}</Description>\n`)).join("\n")}\n</DescriptionList>\n`}))};const uc=e=>{let{children:t}=e;return r.createElement(B.SV,{beforeCapture:e=>{e.setTag("location","ReportComponentErrorBoundary"),e.setExtra("isReactError",!0)},fallback:r.createElement("div",{style:{padding:"1rem"}},r.createElement(cc,{error:{target:"render",code:500,details:[{code:"Render",message:"An error occurred while attempting to render this component."}]}}))},t)},dc=Object.fromEntries(Object.entries(mn).filter((e=>{let[t]=e;return!["SiteTitle","GameName","SupportEmailLink","DiscordInviteLink","TwitterLink","If","Iframe","Image","Snippet"].includes(t)}))),mc={...Oo,chart:{...Oo.chart,borderWidth:0,animation:!1},plotOptions:{...Oo.plotOptions,series:{...Oo.plotOptions?.series??{},animation:!1,borderWidth:0},bar:{...Oo.plotOptions?.bar??{},pointPadding:0}}};var pc=function(e){let{data:t,height:n}=e;if(!t)return r.createElement(uc,null,r.createElement(ci,{src:{result:null}}));if(t.component){const e=function(e){switch(e){case"JsonTree":return e=>r.createElement(ci,{src:e});case"EnhancedMarkdown":return e=>r.createElement("div",{style:{padding:4}},r.createElement(hn,{markdown:null!==e.content&&void 0!==e.content?e.content.toString():"No content provided.",overrides:dc,onlyUsePassedOverrides:!0}));case"Chart":return e=>r.createElement(Go,{options:e,theme:mc,lazyLoad:!1});case"Table":return e=>{const t=(0,r.useMemo)((()=>e.columns),[e.columns]),n=(0,r.useMemo)((()=>e.data),[e.data]);return r.createElement(oc,{style:"report",columns:t,data:n,enhancedMarkdownEnabled:!0})};default:return}}(t.component);if(n&&"Chart"===t.component&&(t.props.chart||(t.props.chart={}),t.props.chart.height=n),e)return r.createElement(uc,null,r.createElement(e,t.props))}return r.createElement(uc,null,r.createElement(ci,{src:t}))};const gc=r.createContext({}),hc=e=>{let{children:t}=e;const[n,a]=(0,r.useState)({}),[l,i]=(0,r.useState)({}),[o,c]=(0,r.useState)({}),u=(0,s.TH)();return(0,r.useEffect)((()=>{window.reportsCacheOnChangeHandlers?.push(((e,t,n,r)=>{if(0===e)switch(n){case"fightSegmentStartTime":a((e=>({...e,fightSegmentStartTime:r})));break;case"fightSegmentEndTime":a((e=>({...e,fightSegmentEndTime:r})));break;case"fightsTable":a((e=>({...e,fightsTable:r})));break;case"filterFightsString":a((e=>({...e,filterFightsString:r})));break;case"filterFightsArray":a((e=>({...e,filterFightsArray:r})));break;case"filterSource":a((e=>({...e,filterSource:r})));break;case"filterSourceInstance":a((e=>({...e,filterSourceInstance:r})))}})),window.reportEventFiltersOnChangeHandlers?.push(((e,t)=>{switch(e){case"fightPhase":i((e=>({...e,fightPhase:t})));break;case"fightCutoff":i((e=>({...e,fightCutoff:t})))}}))}),[]),(0,r.useEffect)((()=>{const e=new URLSearchParams(u.hash.slice(1)),t=u.pathname.slice(9),a=n.fightSegmentStartTime,r=n.fightSegmentEndTime,i=e.get("source")?.split(",")[0]?.split("."),s=i?parseInt(i[0]):0,o=i&&i.length>1?parseInt(i[1]):0,d=n.filterFightsString;c({reportCode:t,startTime:a,endTime:r,cutoff:l.fightCutoff??0,encounterId:fc(e.get("boss"),n.filterFightsString&&n.filterFightsArray?.length?n.fightsTable?.[n.filterFightsArray[0]]?.boss??-1:-1),wipes:e.get("wipes")??"0",fights:d,difficultyId:fc(e.get("difficulty"),n.filterFightsString&&n.filterFightsArray?.length?n.fightsTable?.[n.filterFightsArray[0]]?.difficulty??-1:-1),source:s,sourceInstance:o,sourceClass:e.get("sourceclass")??"Any",hostilityType:fc(e.get("hostility"),0),phase:l.fightPhase??0})}),[u,n,l]),r.createElement(gc.Provider,{value:o},t)};function fc(e,t){return e?parseInt(e):t}hc.propTypes={children:i().node};var bc=()=>(0,r.useContext)(gc);const Ec="getComponent = () => {\n  return {\n    component: 'EnhancedMarkdown',\n    props: {\n      content: 'Hello world!'\n    }\n  }\n}";function vc(e){let{id:t,script:n,save:a,saveText:l,cancel:i}=e;const{reportCode:s,fights:o,startTime:c,endTime:u,cutoff:d,encounterId:m,wipes:p,difficultyId:g,source:h,sourceInstance:f,sourceClass:b,hostilityType:E,phase:v}=bc(),y=(0,r.useRef)(null),[{data:_,status:w},k]=$t(),[N,T]=(0,r.useState)(),[C,S]=(0,r.useState)(!1),I=rl();return r.createElement("div",{className:"report-component-sandbox"},r.createElement(Pn,{className:"report-component-sandbox__column"},r.createElement(Xr,{defaultValue:n??Ec,onMount:e=>{y.current=e},onLoad:I,onValidate:e=>T(e.filter((e=>e.severity>1))),onChange:()=>S(!0)}),r.createElement("div",{className:"report-component-sandbox__buttons"},r.createElement(F,{disabled:w.isLoading||N?.length>0,onClick:()=>{k({url:`/reports/evaluate-component-script/${s}/${o}/${c}/${u}/${d}/${m}/${p}/${g}/${h}/${f}/${b}/${E}/${v}?id=${t}`,body:{script:y.current.getValue()}})}},trans("report-components.run")))),r.createElement(Pn,{className:"report-component-sandbox__column",style:{justifyContent:"space-between"}},N?.length>0?r.createElement(el,{codeErrors:N}):w.isLoading?r.createElement("div",{className:"report-component-sandbox__loading"},r.createElement(kt,null)):_?.error?r.createElement(cc,{error:_.error}):void 0!==_?.result?r.createElement("div",{className:"report-component-sandbox__result"},r.createElement(pc,{data:_.result})):r.createElement("div",{className:"report-component-sandbox__no-result"},trans("report-components.your_component_will_show_here")),r.createElement(U,{style:{justifyContent:"flex-end"}},r.createElement(Pn,{style:{alignItems:"flex-end"}},r.createElement(ti,{save:()=>a(y.current.getValue()),saveText:l??trans("reports.save_component"),cancel:i,status:w,hasPendingChanges:C,isValid:0===(N?.length??0)}),r.createElement(vn,null,trans("reports.remember_to_save_dashboard_to_finish_saving_component"))))))}vc.propTypes={id:i().string.isRequired,script:i().string,save:i().func,saveText:i().string,cancel:i().func};var yc=vc;const _c=[wc(0),wc(1),wc(2),wc(3),wc(4)];function wc(e){return{i:`default-damage-taken-cell-${e}`,w:1,h:3,component:{script:`\ngetComponent = () => {\n  const damageEvents = reportGroup.fights[0]\n    .eventsByCategoryAndDisposition('damage', 'enemy');\n\n  // This picks the Xth most damaging ability.\n  // To choose your own ability, replace this line with:\n  // const damageAbility = damageEvents.find(x => x.ability.id === 123123);\n  const damageAbility = getMostDamagingAbility(damageEvents, ${e});\n\n  const series = [];\n\n  damageEvents.forEach(event => {\n    if (event.ability.id !== damageAbility.id ||\n      event.target.type !== 'Player')\n      return;\n\n    const targetName = event.target.name;\n    const damageAmount = event.amount + event.absorbed;\n\n    const playerSeries = series.find(x => x.name === targetName);\n    if (playerSeries) {\n      playerSeries.y += damageAmount;\n    } else {\n      series.push({\n        name: targetName,\n        y: damageAmount,\n        dataLabels: [targetName],\n        color: styles.getColorForActorType(event.target.subType)\n      })\n    }\n  });\n\n  series.sort((x, y) => y.y - x.y);\n\n  return {\n    component: 'Chart',\n    props: {\n      chart: {\n        type: 'bar'\n      },\n      title: {\n        text: \`Damage Taken From\n          <span style="color: \${styles.getColorForAbilityType(\n            damageAbility.type\n          )}">\n            \${damageAbility.name}\n          </span>\`\n      },\n      xAxis: {\n        type: 'category',\n      },\n      yAxis: {\n        title: {\n          text: ''\n        }\n      },\n      plotOptions: {\n        series: {\n          dataLabels: {\n            enabled: true,\n            inside: true,\n            align: 'right',\n          }\n        }\n      },\n      series: [\n        {\n          name: damageAbility.name,\n          data: series\n        }\n      ],\n      legend: {\n        enabled: false\n      }\n    }\n  };\n}\n\nfunction getMostDamagingAbility(damageEvents, index = 0) {\n  const playerCountsByAbilityId = damageEvents.reduce((counts, event) => {\n    if (event.ability.id === 1) // Ignore Melee\n      return counts;\n\n    if (counts[event.ability.id] === undefined)\n      counts[event.ability.id] = 0;\n\n    counts[event.ability.id] += event.amount + event.absorbed;\n\n    return counts;\n  }, {});\n\n  const abilityId = parseInt(Object.entries(playerCountsByAbilityId)\n    .sort((x, y) => y[1] - x[1])\n    [index][0]);\n\n  return damageEvents.find(x => x.ability.id === abilityId).ability;\n}\n`}}}function kc(e,t){const n=e/t;return n<.4?"green":n<.6?"orange":"red"}var Nc=function(e){let{id:t,script:n,height:a,showDuration:l=!1}=e;const{reportCode:i,fights:s,startTime:o,endTime:u,cutoff:d,encounterId:m,wipes:p,difficultyId:g,source:h,sourceInstance:f,sourceClass:b,hostilityType:E,phase:v}=bc(),[{data:y,status:_},w]=$t();return(0,r.useEffect)((()=>{w({url:`/reports/evaluate-component-script/${i}/${s}/${o}/${u}/${d}/${m}/${p}/${g}/${h}/${f}/${b}/${E}/${v}?id=${t}`,body:{script:n}})}),[n,d,g,w,m,u,s,E,i,h,b,f,o,p,t,v]),_.isIdle?r.createElement("div",{className:"report-component-from-script report-component-from-script__no-result"},trans("report-components.your_component_will_show_here")):_.isLoading?r.createElement("div",{className:"report-component-from-script report-component-from-script__loading"},r.createElement(kt,null)):_.isError?r.createElement(se,null,_.errorMessage):y&&"error"in y?r.createElement(cc,{error:y.error}):r.createElement("div",{className:"report-component-from-script"},r.createElement("div",{className:"report-component-from-script__result"},void 0!==y?.result&&r.createElement(pc,{data:y.result,height:a}),l&&y?.executionStats?.elapsedCpuTime&&r.createElement("div",{className:"report-component-from-script__duration"},r.createElement(c,{style:kc(y.executionStats.elapsedCpuTime,y.executionStats.maxCpuTime)},trans("global.x_milliseconds",{x:Math.ceil(y.executionStats.elapsedCpuTime/1e6).toString()})))))},Tc=n(26961);function Cc(e){return(0,Tc.compressToBase64)(e)}function Sc(e){return(0,Tc.decompressFromBase64)(e)??""}var Ic=r.forwardRef((function(e,t){let{onChange:n=(()=>null),defaultValue:a="",disabled:l=!1,maxLength:i,showRemainingCharacters:s=!0,fullHeight:o,resizeable:c=!0,containerClass:u="",textareaClass:d=""}=e;const[m,p]=(0,r.useState)(a);return r.createElement("div",{className:`textarea ${u} ${o?"textarea--full-height":""}`},r.createElement("textarea",{ref:t,className:`textarea__input ${d} ${c?"":"textarea__input--not-resizeable"} ${o?"textarea__input--full-height":""}`,onChange:e=>{p(e.target.value),n(e)},defaultValue:a,disabled:l,maxLength:i}),i&&s&&r.createElement("div",{className:"textarea__characters-remaining"},m.length,"/",i))}));function xc(e){return JSON.parse(e.startsWith("{")?e:Sc(e))}var Pc=function(e){let{onPreview:t,onCancel:n}=e;const[a,l]=(0,r.useState)(""),[i,s]=(0,r.useState)(!1),o=(0,r.useRef)(null);return(0,r.useEffect)((()=>{o.current?.focus()}),[o]),(0,r.useEffect)((()=>{const e=function(e){let t;try{if(t=xc(e),!t.title||t.title.length<$c||t.title.length>Oc)return null;if(!t.layout||t.layout.length>zc||t.layout.some((e=>t.layout.some((t=>e!==t&&e.i===t.i)))))return null;for(let e=0;e<t.layout.length;e++){const n=t.layout[e];if(!n.i?.length||n.x<0||n.y<0||n.w<1||n.h<1||!n.component?.script?.length)return null}}catch(e){return null}return t}(a);s(null!==e)}),[a]),r.createElement(In,{title:trans("reports.import_dashboard"),actions:[{label:trans("global.cancel"),icon:"close",onClick:n}]},r.createElement(Pn,null,r.createElement(vn,null,trans("reports.importing_dashboard_intro")),r.createElement(Ic,{defaultValue:a,onChange:e=>l(e.target.value),ref:o}),a.length>0&&!i&&r.createElement(se,null,trans("reports.dashboard_import_string_invalid")),r.createElement(ti,{save:()=>t(xc(a)),saveText:trans("global.preview"),cancel:n,hasPendingChanges:""!==a,isValid:i}),r.createElement(U,{style:{justifyContent:"center"}},r.createElement(vn,null,trans("reports.remember_to_save_dashboard_to_finish_importing")))))};function Rc(e){return JSON.parse(e.startsWith("{")?e:Sc(e))}function Ac(e){let t;try{if(t=Rc(e),!t.i||t.x||t.y||t.w<1||t.h<1||!t.component?.script?.length)return null}catch(e){return null}return t}var Lc=function(e){let{onContinue:t,onCancel:n}=e;const[a,l]=(0,r.useState)(""),[i,s]=(0,r.useState)(!1),o=(0,r.useRef)(null);return(0,r.useEffect)((()=>{o.current?.focus()}),[o]),(0,r.useEffect)((()=>{const e=Ac(a);s(null!==e)}),[a]),r.createElement(In,{title:trans("reports.import_component"),actions:[{label:trans("global.cancel"),icon:"close",onClick:n}]},r.createElement(Pn,null,r.createElement(vn,null,trans("reports.importing_component_intro")),r.createElement(Ic,{defaultValue:a,onChange:e=>l(e.target.value),ref:o}),a.length>0&&!i&&r.createElement(se,null,trans("reports.component_import_string_invalid")),r.createElement(ti,{save:()=>t({...Rc(a),x:0,y:0}),saveText:trans("global.continue"),cancel:n,hasPendingChanges:""!==a,isValid:i}),r.createElement(U,{style:{justifyContent:"center"}},r.createElement(vn,null,trans("reports.remember_to_save_dashboard_to_finish_importing")))))};const $c=3,Oc=100,zc=20,Fc=3;function Mc(e){let{isBeingEdited:t,pendingValue:n,updateTitle:a,size:l}=e;return t?r.createElement(ii,{value:n.title,onChange:e=>{e.value.length<=Oc&&a(e.value)},cssStyle:{width:Math.min(500,l.width-150),...n.title.length<$c?{border:"2px solid red"}:{}}}):r.createElement(r.Fragment,null,n.title)}function Dc(e){let{cell:t}=e;const[n,a]=(0,r.useState)("export"),[l,i]=(0,r.useState)(),s="export"===n?trans("global.export"):trans("global.copied")+"!";return r.createElement(F,{styles:["menu"],onClick:async()=>{await navigator.clipboard.writeText(Cc(JSON.stringify({i:t.i,w:t.w,h:t.h,component:t.component}))),a("copied"),l&&clearTimeout(l),i(setTimeout((()=>a("export")),5e3))}},s)}function Uc(e){let{onConfirm:t}=e;const[n,a]=(0,r.useState)("remove"),[l,i]=(0,r.useState)(),s="remove"===n?trans("global.remove"):trans("global.are_you_sure");return r.createElement(F,{styles:["menu"],onClick:()=>{if("remove"===n)return a("confirm"),l&&clearTimeout(l),void i(setTimeout((()=>a("remove")),5e3));a("remove"),t()}},s)}const Bc=(0,n(64529).ZP)()((e=>({class:{step:0},spec:{step:0},hero:{step:0},set:(t,n)=>{e((e=>({...e,[t]:{step:n}})))}}))),Vc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Number.parseFloat(getComputedStyle(t).getPropertyValue(e))},qc=function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.documentElement).style.setProperty(t,e.toString())},jc={read:e=>Vc(jc.property,e),write:(e,t)=>qc(e,jc.property,t),property:"--talent-tree-inline-steps-class"},Hc={read:e=>Vc(Hc.property,e),write:(e,t)=>qc(e,Hc.property,t),property:"--talent-tree-inline-steps-spec"},Gc={class:jc,spec:Hc,hero:null},Wc=(e,t)=>(Math.floor(1e3*e)/10).toFixed(t);function Kc(e){let{percent:t,largeText:n=!1}=e;const a=lu(t);return r.createElement("div",{className:`talent-tree-percentage_badge talent-tree-percentage_badge--${a} ${n?"talent-tree-percentage_badge--large-text":""}`},r.createElement("span",{className:"talent-tree-percentage_badge__value--1-decimal"},Wc(t,1)),r.createElement("span",{className:"talent-tree-percentage_badge__value--0-decimals"},Wc(t,0)),"%")}function Zc(e,t,n,a,r){return`${r}${e}?def=${t}&rank=${n>0?n:1}${a?`&spellModifier=${a}`:""}`}function Yc(e){let{node:t,entry:n,spellModifierId:a}=e;const l=Y(),{pointsInvested:i}=t,{spellId:s,definitionId:o,icon:c,name:u}=n,d=t.entry?.id===n.id,m=!!t.heatMapPercent,p=iu(t,n),g=lu(p);return r.createElement("a",{className:`talent-tree-node talent-tree-node-active ${d||m?"":"talent-tree-node--inactive"} ${m?`talent-tree-node--${g} talent-tree-node-active--${g}`:""}`,target:"_blank",rel:"noreferrer",href:Zc(s,o,i,a,l?.abilityExternalSitePath),onClick:e=>e.stopPropagation()},r.createElement("img",{src:`${l?.assetServerBaseUrl}/img/warcraft/abilities/${c}.jpg`,alt:u,loading:"lazy"}),m?r.createElement(Kc,{percent:p}):null)}function Jc(e){let{amount:t}=e;return r.createElement("span",{className:"talent-tree-node-multiple-points","aria-hidden":!0},t)}function Xc(e){let{renderMultiplePointsIndicator:t=!0,entry:n,node:a,spellModifierId:l}=e;const i=Y(),{node:{maxRanks:s},pointsInvested:o,heatMapPercent:c}=a,{spellId:u,definitionId:d,icon:m,name:p}=n,g=a.entry?.id===n.id,h=!!c,f=iu(a,n),b=lu(f),E=u?"a":"span";return r.createElement(E,{className:`talent-tree-node talent-tree-node-passive ${g||h?"":"talent-tree-node--inactive"} ${h?`talent-tree-node--${b} talent-tree-node-passive--${b}`:""}`,target:"_blank",rel:"noreferrer",href:u?Zc(u,d,o,l,i?.abilityExternalSitePath):"",onClick:u?e=>e.stopPropagation():void 0},r.createElement("img",{src:m.startsWith("http")?m:`${i?.assetServerBaseUrl}/img/warcraft/abilities/${m}.jpg`,alt:p,loading:"lazy"}),h?r.createElement(Kc,{percent:f}):null,t&&s>1&&o>=1?r.createElement(Jc,{amount:o}):null)}let Qc=function(e){return e.Single="single",e.Choice="choice",e.SubTreeChoice="subtree",e}({}),eu=function(e){return e.ClassTree="class",e.SpecTree="spec",e.HeroTree="hero",e}({}),tu=function(e){return e.Active="active",e.Passive="passive",e}({});function nu(e){let{showChoices:t,tooltipClassName:n,node:a,spellModifierId:l}=e;const i=Y(),{entry:s,heatMapPercent:o,node:{abilities:c}}=a,u=!!o,d=a.node.treeType!==eu.HeroTree&&u,m=!s||d?o?.values.reduce(((e,t)=>e+t),0)??0:iu(a,s),p=lu(m);if(!s)return r.createElement("span",{className:"talent-tree-node talent-tree-node-choice talent-tree-node--inactive "+(u?`talent-tree-node--${p}`:"")},r.createElement(ru,{node:a,active:t,className:n,tooltipTriggerClassName:"talent-tree-node-choice__tooltip-trigger--inactive",isDisplayingPercent:null!==o,spellModifierId:l},c.map((e=>{const n=r.createElement("img",{key:e.spellId,src:`${i?.assetServerBaseUrl}/img/warcraft/abilities/${e.icon}.jpg`,alt:e.name,loading:"lazy"});return t?n:r.createElement("a",{target:"_blank",rel:"noreferrer",href:Zc(e.spellId,e.definitionId,a.pointsInvested,l,i?.abilityExternalSitePath),key:e.spellId},n)}))),u?r.createElement(Kc,{percent:m}):null,r.createElement("div",{className:"talent-tree-node-choice__overlay"}));const g=o?"span":"a";return r.createElement(g,{className:"talent-tree-node talent-tree-node-choice talent-tree-node-choice--selected "+(u?`talent-tree-node--${p}`:""),target:o?void 0:"_blank",rel:o?void 0:"noreferrer",href:o?void 0:Zc(s.spellId,s.definitionId,a.pointsInvested,l,i?.abilityExternalSitePath),onClick:e=>e.stopPropagation()},r.createElement(ru,{node:a,active:t,className:n,tooltipTriggerClassName:"talent-tree-node-choice__tooltip-trigger--active",isDisplayingPercent:null!==o,spellModifierId:l},r.createElement(r.Fragment,null,r.createElement("img",{src:`${i?.assetServerBaseUrl}/img/warcraft/abilities/${s.icon}.jpg`,alt:s.name,loading:"lazy"}),u?r.createElement(Kc,{percent:m}):null)),r.createElement("div",{className:"talent-tree-node-choice__overlay "+(u?`talent-tree-node-choice__overlay--${p}`:"")}))}const au={[tu.Active]:Yc,[tu.Passive]:Xc};function ru(e){let{active:t,children:n,tooltipTriggerClassName:a,node:l,className:i,isDisplayingPercent:s,spellModifierId:o,nodeComponent:c}=e;return t?r.createElement(Re,{triggerProps:{className:a},tooltipClassName:"talent-tree-node-choice__tooltip",allowHover:!0,placementOptions:{allowedPlacements:["top"]},content:r.createElement("div",{className:`talent-tree-node-choice__tooltip--body ${i} ${s?"talent-tree-node-choice__tooltip--body-heatmap":""}`},l.node.abilities.map((e=>{const t=c??au[e.type];return r.createElement(t,{node:l,entry:e,key:e.spellId,spellModifierId:o})})))},n):r.createElement("span",{className:a},n)}function lu(e){return(e*=100)>=95?"artifact":e>=90?"legendary":e>=60?"epic":e>=35?"rare":e>=20?"uncommon":"common"}function iu(e,t){if(!e.heatMapPercent)return 0;for(let n=0;n<=e.node.abilities.length;n++)if(e.node.abilities[n].id===t.id){const t=e.heatMapPercent.values[n];if(e.heatMapPercent.values.length>1){const n=e.heatMapPercent.values.reduce(((e,t)=>e+t),0);return 0===n?0:t/n}return t}return 0}function su(e){let{node:t,showChoices:n,tooltipClassName:a,renderMultiplePointsIndicator:l,spellModifierId:i}=e;if(t.node.type===Qc.Choice)return r.createElement(nu,{node:t,showChoices:n??!0,tooltipClassName:a,spellModifierId:i});const s=(o=t).entry??o.node.abilities[0];var o;return s.type===tu.Active?r.createElement(Yc,{node:t,entry:s,spellModifierId:i}):r.createElement(Xc,{node:t,entry:s,renderMultiplePointsIndicator:l,spellModifierId:i})}var ou=(0,r.memo)(su),cu=n(76248);const uu=(0,r.createContext)({}),du=e=>{let{children:t,preloaded:n}=e;return r.createElement(uu.Provider,{value:n},t)},mu=e=>{const t=(0,r.useContext)(uu),n=Y()?.baseUrl,[a,l]=$t(),i=e?`${e.className}_${e.specName}_${e.changeSetId}`:"none",s=t[i];if((0,r.useEffect)((()=>{e&&!s&&l(`${n}/talent-tree/blueprint/${e.className}/${e.specName}/${e.changeSetId}`)}),[n,s,e,l]),e)return a.status.isSuccess&&a.data?(s||(t[i]=a.data),a.data):t[i]};function pu(e,t,n,a,r,l,i){const s=[],o={};for(const[e,t]of r.selectedNodes){const n=a[e];if(n)if(i){let a=o[n.nodeId];a||(a={node:n,pointsInvested:0,heatMapPercent:{values:n.abilities.map((()=>0))}},o[n.nodeId]=a);const r=n.abilities.findIndex((t=>t.id===e));a.heatMapPercent&&(a.heatMapPercent.values[r]=t??0)}else o[n.nodeId]={node:n,entry:n.abilities.find((t=>t.id===e)),pointsInvested:t??1}}if(l)for(const e of Object.values(a))o[e.nodeId]||(o[e.nodeId]={node:e,pointsInvested:0,heatMapPercent:i?{values:e.abilities.map((()=>0))}:void 0});for(const e of Object.values(o)){let t=s[e.node.row];if(t||(t=[],s[e.node.row]=t),i){let t,n=0;for(let a=0;a<e.node.abilities.length;a++){const r=e.heatMapPercent?.values[a]??0;r>n&&(t=e.node.abilities[a],n=r)}e.entry=t}t.push(e)}return{iconClassName:e,artwork:t,tree:s,heroTree:n}}const gu=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=mu(e.changeSet),{classTree:l,specTree:i,heroTree:s}=(e=>(0,r.useMemo)((()=>{if(!e)return{};const t={[eu.ClassTree]:{},[eu.SpecTree]:{},[eu.HeroTree]:{}},n="treeType"in(a=e.changeSet.allNodes)[0]?a:a.map((e=>"treeType"in e?e:{...e,treeType:e.isClassTreeNode?eu.ClassTree:eu.SpecTree}));var a;for(const e of n){const n=t[e.treeType];for(const t of e.abilities)n[t.id]=e}return{classTree:t[eu.ClassTree],specTree:t[eu.SpecTree],heroTree:t[eu.HeroTree]}}),[e]))(a);return(0,r.useMemo)((()=>{if(!(a&&l&&i&&s))return;const r=e.heroSpecId?a.heroTrees?.find((t=>t.id===e.heroSpecId)):null;return{spellModifierId:a.spellModifierId,classTree:pu(a.classIcon,a.classBackgroundUrl,null,l,e,t,n),specTree:pu(a.specIcon,a.specBackgroundUrl,null,i,e,t,n),heroTree:pu("","",r??null,s,e,!1,n)}}),[e,t,n,l,i,s,a])};var hu=mu;function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fu.apply(this,arguments)}const bu=2,Eu="--max-translate-x";function vu(e){return Number.parseInt(getComputedStyle(e).getPropertyValue(Eu))}function yu(e){return vu(e)/16*-1}function _u(e){let{tree:{dehydratedBuild:t},kind:n,transparent:a,compact:l,toggleRow:i,isPreview:s,toggleLabel:o,toggleLabelAbbrev:c}=e;const u=gu(t,!1),d="class"===n?u?.classTree:"spec"===n?u?.specTree:u?.heroTree,m=(0,r.useRef)(null),p=(0,r.useRef)(null),g=(0,r.useRef)(null),h=(0,r.useRef)(null),[f,b]=(0,r.useState)(!1),[E,v]=(0,r.useState)({leftDisabled:!1,rightDisabled:!0}),[y,_]=Bc((e=>[e[n].step,e.set]),cu.Z),w=(0,r.useCallback)((e=>{const t=Gc[n];if(!m.current||!t)return;const a=m.current,r=e||t.read(a),l=yu(a);v((e=>{const t={...e,leftDisabled:"start"===r||"number"==typeof r&&r>=l,rightDisabled:"end"===r||0===r};return t.leftDisabled!==e.leftDisabled||t.rightDisabled!==e.rightDisabled?t:e}))}),[n]);(0,r.useLayoutEffect)((()=>{if("hero"===n||!f)return;function e(){const e=Gc[n];if(!e||!m.current||!p.current)return;const t=p.current.clientWidth,a=g.current?g.current.clientWidth:0,r=m.current.clientWidth;if(0===t||0===r)return;const i=t-r-2*a;if(Number.isNaN(i))return;if(m.current.style.setProperty(Eu,`${i}px`),s&&h.current){const e=window.innerWidth<1024;h.current.style.setProperty("transform",`translateX(${i-16*(e?4:10.5)}px)`)}if(l)return;const o=yu(m.current),c="start"===y?o:"end"===y?0:Math.min(y,o);Number.isNaN(c)||(e.write(c,m.current),w(y))}e();const t=(0,hi.throttle)(e,1e3);return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[n,w,y,f,l,s]),(0,r.useLayoutEffect)((function(){if(!p.current||f)return;const{top:e,left:t,bottom:n,right:a}=p.current.getBoundingClientRect();if(e>=0&&t>=0&&n<=1.2*(window.innerHeight||document.documentElement.clientHeight)&&a<=1.2*(window.innerWidth||document.documentElement.clientWidth))return void b(!0);const r=new IntersectionObserver((e=>{!f&&e[0].isIntersecting&&b(!0)}),{rootMargin:"20% 0px 20% 0px"});return r.observe(p.current),()=>{r.disconnect()}}),[f]);const k=(0,r.useMemo)((()=>{const e={renderMultiplePointsIndicator:!1},t={showChoices:!1};if(!d)return null;let a=d.tree;"hero"===n?a=function(e){return e.map((e=>e.filter((e=>e.node.type===Qc.Choice))))}(d.tree):l&&(a=function(e){return e.map(((t,n)=>n<3?[]:n+1===e.length?t:t.filter((e=>e.entry&&(e.entry?.type===tu.Active||e.node.type===Qc.Choice))))).filter((e=>e.length>0))}(d.tree));const p=d.heroTree?.icon?r.createElement("div",{className:"talent-tree-inline__hero-icon--wrapper"},r.createElement("img",{src:d.heroTree.icon,title:d.heroTree.name,alt:d.heroTree.name})):null;return r.createElement("div",{className:"talent-tree-inline--tree-container "+(s?"talent-tree-inline--tree-container--preview":"")},p,r.createElement("div",{className:"talent-tree-inline--tree-container__row-container",ref:m,"data-kind":n},a.map(((n,a)=>0===n.length?null:r.createElement("div",{key:a,className:"talent-tree-inline--row"},n.map((n=>n.node.type===Qc.Choice?r.createElement(ou,fu({node:n,spellModifierId:u?.spellModifierId??0},t,{key:n.node.abilities.map((e=>e.id)).join("-")})):r.createElement(ou,fu({node:n,spellModifierId:u?.spellModifierId??0},n.entry?.type===tu.Passive?e:null,{key:`${n.node.nodeId}`})))))))),s&&"hero"!==n?r.createElement("button",{ref:h,type:"button",onClick:i,className:"talent-tree-inline--row-expander"},r.createElement("span",{className:"talent-tree-inline--row-expander__label--short"},c),r.createElement("span",{className:"talent-tree-inline--row-expander__label--long"},o)):null)}),[d,n,l,s,i,o,c,u?.spellModifierId]),N=(0,r.useCallback)((e=>{const t=Gc[n];if(!t||!m.current)return;const a=m.current,{start:r,end:l,step:i}=function(e,t,n){const a=t.read(n),r=function(e){return Number.parseInt(getComputedStyle(e).getPropertyValue("transform").replace("matrix(1, 0, 0, 1, ","").replace(", 0)",""))}(n),l=16*bu;if("left"===e)return r+l>-l?{step:a+r/16*-1,start:!0,end:!1}:{step:a+bu,start:!1,end:!1};const i=vu(n);return r-l<=i?{step:a-(i-r)/16*-1,start:!1,end:!0}:Number.isInteger(a)?{step:a-bu,start:!1,end:!1}:{step:a-(a%bu+bu),start:!1,end:!1}}(e,t,a);_(n,l?"end":r?"start":i)}),[n,_]);return r.createElement("div",{className:`talent-tree-inline ${a?"talent-tree-inline--transparent":""} ${l?"talent-tree-inline--compact":""} ${s?"talent-tree-inline--preview":""}`,ref:p},f?r.createElement(r.Fragment,null,"hero"===n||l||s?null:r.createElement(wu,{direction:"left",disabled:E.leftDisabled,onClick:N,ref:g,transparent:a}),k,"hero"===n||l||s?null:r.createElement(wu,{direction:"right",disabled:E.rightDisabled,onClick:N,transparent:a})):null)}const wu=(0,r.forwardRef)(((e,t)=>{let{disabled:n,direction:a,onClick:l,transparent:i}=e;return r.createElement("button",{className:"talent-tree-inline__button "+(i?"talent-tree-inline__button--transparent":""),"data-direction":a,type:"button",disabled:n,onClick:()=>{l(a)},ref:t},r.createElement("svg",{width:"13",height:"9",viewBox:"0 0 13 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M.455272 4.11727 4.5312.690807c.32526-.273436.82174-.0422.82174.382723V2.5c0 .27614.22386.5.5.5H12.5c.2761 0 .5.22386.5.5v2c0 .27614-.2239.5-.5.5H5.85294c-.27614 0-.5.22386-.5.5v1.42647c0 .42492-.49648.65616-.82174.38272L.455271 4.88273c-.237674-.19981-.237674-.56565.000001-.76546Z"})))})),ku=(e,t,n,a)=>{let r="https://www.wipefest.gg/report/"+e;return t&&(r+="/fight/"+t,n&&(r+="?ignore=true&deathThreshold="+Math.min(5,n))),a&&(r+=`${t&&n?"&":"?"}gameVersion=${a}`),r};var Nu=e=>{const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const a=window.matchMedia(e);a.matches!==t&&n(a.matches);const r=()=>n(a.matches);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)}),[t,e]),t};function Tu(){return Tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tu.apply(this,arguments)}function Cu(e){const{width:t,leftOffset:n}=e.flatMap((e=>e)).reduce(((e,t)=>{let{node:{posX:n}}=t;return n>e.width&&(e.width=n),n<e.leftOffset&&(e.leftOffset=n),e}),{width:0,leftOffset:1/0});return{width:t-n,leftOffset:n}}function Su(e){let{tree:t,expanded:n,rows:a,width:l,leftOffset:i,minWidthLarge:s}=e;const o=t.reduce(((e,t)=>(t.forEach((t=>{e[t.node.nodeId]={row:t.node.row,posX:t.node.posX}})),e)),{});return r.createElement("svg",{className:"talent-tree__implementation__svg",xmlns:"http://www.w3.org/2000/svg"},t.map(((e,t)=>!n&&t>(s?1:2)?null:r.createElement(r.Fragment,{key:t},e.flatMap((e=>e.node.childNodes.filter((e=>void 0!==o[e])).map(((t,n)=>{const{row:s,posX:c}=o[t],u=(e.node.posX-i)/l*100,d=e.node.row/a*100,m=(c-i)/l*100,p=s/a*100;return r.createElement("line",{key:`${t}-${e.node.row}-${e.node.posX}-${n}`,x1:`${u}%`,y1:`${d}%`,x2:`${m}%`,y2:`${p}%`})}))))))))}function Iu(e){let{tree:t,expanded:n,minWidthLarge:a,spellModifierId:l,leftOffset:i,treeWidth:s}=e;return r.createElement("div",{className:"talent-tree__implementation__nodes"},t.map(((e,t)=>!n&&t>(a?2:3)?null:r.createElement(r.Fragment,{key:t},e.map((e=>r.createElement("div",{key:e.node.nodeId,className:"talent-tree__implementation__nodes--item",style:{"--row":e.node.row,"--posX":(e.node.posX-i)/s*100+"%"}},e.node.type===Qc.Choice?r.createElement(ou,{node:e,showChoices:!0,tooltipClassName:"talent-tree__implementation__choice-tooltip",key:`${e.node.nodeId}-entry`,spellModifierId:l}):r.createElement(ou,{node:e,key:`${e.node.nodeId}-entry`,spellModifierId:l}))))))))}const xu=400;function Pu(e){let{tree:t,artwork:n,kind:a,expanded:l,minWidthLarge:i,labels:s,iconClassName:o,descriptionClassName:c,exportCode:u,isDisplayingPercent:d,spellModifierId:m}=e;const p=t[t.length-1][0].node.row,g=Cu(t);return r.createElement("div",{"data-kind":a,className:`talent-tree__container talent-tree__container--${a}`,style:{"--rows":p,"--min-cols":g.width/xu}},r.createElement("div",{className:"talent-tree__container--height-limiter","data-expanded":l,"data-kind":a,"data-exportable":null!==u},r.createElement("div",{className:`talent-tree__artwork talent-tree__artwork--${a}`,style:{backgroundImage:`url(${n})`}}),r.createElement(Ru,{iconClassName:o,kind:a,labels:s,descriptionClassName:c}),r.createElement("div",{className:`talent-tree__implementation ${l?"talent-tree__implementation--expanded":""} ${d?"talent-tree__implementation--heat-map":""}`,"data-expanded":l},r.createElement(Su,Tu({tree:t,expanded:l,rows:p},g,{minWidthLarge:i})),r.createElement(Iu,{tree:t,expanded:l,minWidthLarge:i,leftOffset:g.leftOffset,treeWidth:g.width,spellModifierId:m}))))}function Ru(e){let{iconClassName:t,kind:n,labels:a,descriptionClassName:l}=e;const i=Y();return r.createElement("div",{className:"talent-tree__description "+("class"===n?"talent-tree__description--class":"talent-tree__description--spec")},r.createElement("div",{className:"talent-tree__description__icon"},r.createElement("img",{className:`sprite ${t}`,src:i?.actorsSprite,loading:"lazy",alt:""})),r.createElement("span",{className:"talent-tree__description__label"},r.createElement("span",{className:`talent-tree__description__label--kind ${l}`},"class"===n?a.class:a.spec),r.createElement("span",{className:"talent-tree__description__label--generic"},a.talents)))}function Au(){return Au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Au.apply(this,arguments)}const Lu=e=>{let{treeName:t}=e;return r.createElement(r.Fragment,null,t)};function $u(e){let{tree:t,compact:n,expanded:a,minWidthLarge:l,spellModifierId:i,isDisplayingPercent:s,blueprint:o,descriptionClassName:c,heroSpecId:u,heroTreeOnly:d,HeroTitle:m=Lu}=e;const{blueprint:p,subTreeNode:g,heroTreeId:h,selectHeroTree:f}=function(e,t,n){const a=(0,r.useMemo)((()=>t.flat().find((e=>"subtree"===e.node.type))),[t]),l=(0,r.useMemo)((()=>e||a?.entry?.heroTreeId),[e,a]);let[i,s]=(0,r.useState)(e??void 0);(0,r.useEffect)((()=>{s(l),i=l}),[t,e]);const o=(0,r.useMemo)((()=>n.heroTrees?.find((e=>e.id===i))),[i,n]);return{subTreeNode:(0,r.useMemo)((()=>a?{...a,entry:a?.node.abilities.find((e=>e.heroTreeId===i))}:void 0),[a,i]),heroTreeId:i,selectHeroTree:s,blueprint:o}}(u,t,o),b=!l||d,E=n||s,[v,y,_]=(0,r.useMemo)((()=>{let e,n=function(e,t){return t?e.map((e=>e.filter((e=>e.node.heroTreeId===t)))):e}(t,h);return E?(n=function(e,t){const n=e.flatMap((e=>e.filter((e=>e.node.type===Qc.Choice))));return t?[n.map(((e,t)=>({...e,node:{...e.node,posX:50*t,row:.5}})))]:n.map(((e,t)=>[{...e,node:{...e.node,posX:0,row:t}}]))}(n,b),e=b?{width:50*(n.at(-1)?.length??1),leftOffset:-25}:{width:2,leftOffset:-1}):(n=function(e){return e.map((e=>e.filter((e=>"subtree"!==e.node.type)).map((e=>({...e,node:{...e.node,row:e.node.row-1}})))))}(n),e=Cu(n)),[e,n,n.map((e=>e.length)).reduce(((e,t)=>e+t),0)]}),[E,t,b,h]),w=b?1:y.at(-1)?.at(0)?.node.row??1;if(!p||!g)return r.createElement("div",null);const k=g.node.abilities.find((e=>e.heroTreeId===h)),N=k?iu(g,k):0,T=lu(N);return r.createElement("div",{className:"talent-tree__container talent-tree__container--hero",style:{"--rows":w,"--talent-count":_}},!d&&r.createElement("div",{className:"talent-tree__hero-spacer"}),r.createElement("div",{className:"talent-tree__container--height-limiter","data-kind":"hero"},r.createElement("div",{className:`talent-tree__hero-title do-not-change-color-on-hover ${c} ${b?"talent-tree__hero-title--horizontal":""} ${0===_?"talent-tree__hero-title--no-nodes":""}`},m&&r.createElement(m,{treeId:h,treeName:p.name.replace("-","‑")})),r.createElement("div",{className:"talent-tree__hero-icon"},r.createElement(ru,{node:g,active:!!a&&!!s&&!d,className:"talent-tree__implementation__hero-tooltip",tooltipTriggerClassName:"",isDisplayingPercent:!!s,spellModifierId:i,nodeComponent:e=>r.createElement(Ou,Au({},e,{onClick:e=>f(e.heroTreeId)}))},r.createElement("div",{className:"talent-tree__hero-icon--wrapper "+(s?`talent-tree__hero-icon--rarity-${T}`:"")},r.createElement("img",{src:p.icon,alt:p.name})),s?r.createElement(Kc,{percent:N,largeText:!0}):null)),_>0&&r.createElement("div",{className:`talent-tree__hero-container ${n||s?"talent-tree__hero-container--compact":""}\n          ${b?"talent-tree__hero-container--horizontal":""}\n          `},r.createElement("div",{className:`talent-tree__implementation ${a?"talent-tree__implementation--expanded":""} ${s?"talent-tree__implementation--heat-map":""}`,"data-expanded":a},!E&&r.createElement(Su,{minWidthLarge:!!l,tree:y,expanded:!!a,rows:w,leftOffset:v.leftOffset,width:v.width}),r.createElement(Iu,{tree:y,expanded:!!a,minWidthLarge:!!l,leftOffset:v.leftOffset,treeWidth:v.width,spellModifierId:i})))))}function Ou(e){let{node:t,entry:n,spellModifierId:a,onClick:l}=e;return r.createElement("div",{onClick:e=>{e.preventDefault(),l(n)}},r.createElement(Xc,{node:t,entry:n,spellModifierId:a}))}function zu(){return zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zu.apply(this,arguments)}function Fu(e){let{exportCodeParams:t,defaultExpanded:n=!1,forceVerticalLayout:a,isDisplayingPercent:l,hasToggleButton:i=!0,isLatestRevision:s,dehydratedBuild:o,isCompact:c=!1,heroTreeOnly:u=!1,HeroTitle:d}=e;const m=hu(o.changeSet),p=gu(o,!0,l),[g,h]=(0,r.useState)(n),f=Nu("(min-width: 1024px)")&&!a,b=Nu("(min-width: 1400px)")&&!a,{exportCode:E,loadExportCode:v}=function(e){const[{data:t,status:n},a]=$t();let l;e&&"for-rankings"===e.kind&&(l=`/talent-tree/export-code/${e.kind}/${e.zoneId}/${e.rankingId}/${e.changeSetId}`);const i=(0,r.useMemo)((()=>{if(void 0!==l){const e=l;return()=>a(e)}return()=>{}}),[l,a]);return"pre-loaded"===e?.kind?{exportCode:e.exportCode,loadExportCode:()=>{}}:!e||n?.isError?{exportCode:null,loadExportCode:()=>{}}:{exportCode:t,loadExportCode:i}}(t);if((0,r.useEffect)((()=>v()),[v]),!p||!m)return r.createElement("div",null);const{classTree:y,specTree:_,heroTree:w}=p,{labels:k}=m;return r.createElement(r.Fragment,null,r.createElement("div",{className:`talent-tree ${l?"talent-tree--wide":""} ${c?"talent-tree--compact":""}`},r.createElement("div",{className:`talent-tree--container ${g?"":"talent-tree--container--collapsed"}\n           ${u?"":a?"talent-tree--container--vertical-layout":"talent-tree--container--default-layout"}\n          `},!u&&r.createElement(Pu,zu({},y,{expanded:g,kind:"class",minWidthLarge:f,labels:k,descriptionClassName:o.changeSet.className,exportCode:E,isDisplayingPercent:l,spellModifierId:m.spellModifierId})),w?r.createElement($u,zu({},w,{icon:w.artwork,compact:c||!b,isDisplayingPercent:l,spellModifierId:m.spellModifierId,expanded:g,minWidthLarge:f,blueprint:m,heroSpecId:o.heroSpecId,descriptionClassName:o.changeSet.className,heroTreeOnly:u,HeroTitle:d})):r.createElement("div",null),u||!g&&!f?null:r.createElement(Pu,zu({},_,{expanded:g,kind:"spec",minWidthLarge:f,labels:k,descriptionClassName:o.changeSet.className,exportCode:E,isDisplayingPercent:l,spellModifierId:m.spellModifierId}))),l&&c?null:r.createElement(Mu,{labels:k,toggleExpanded:()=>h((e=>!e)),exportCode:E,expanded:g,isDisplayingPercent:l??!1,hasToggleButton:i,isLatestRevision:s})))}function Mu(e){let{labels:t,toggleExpanded:n,exportCode:a,expanded:l,isDisplayingPercent:i,hasToggleButton:s,isLatestRevision:o}=e;const c=Y(),u=!i&&l&&null===a,[d,m]=(0,r.useState)(!1===o);return u?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"talent-tree__interactions-export "+(i?"talent-tree__interactions-export--heat-map":"")},null===a||i?null:r.createElement(r.Fragment,null,r.createElement(Bu,{exportCode:a},t.export),r.createElement(Uu,{exportCode:a},t.edit)),i&&c?d?r.createElement("div",{className:"talent-tree__interactions-export__outdated-revision"},r.createElement("div",null,r.createElement("svg",{className:"talent-tree__interactions-export__outdated-revision--icon",width:"24",height:"20",viewBox:"0 0 24 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M11.0063 1.04976C11.4408 0.2972 12.527 0.2972 12.9615 1.04976L22.5979 17.7405C23.0324 18.4931 22.4893 19.4338 21.6203 19.4338H2.3475C1.47851 19.4338 0.935398 18.4931 1.36989 17.7405L11.0063 1.04976Z",fill:"#FFBA69",stroke:"#F06212",strokeWidth:"0.967581"}),r.createElement("g",{filter:"url(#filter0_d_562_220374)"},r.createElement("path",{d:"M10.1797 5.59737H13.4679V8.12215L12.8329 13.1944H10.7995L10.1797 8.12215V5.59737ZM10.293 13.9654H13.3621V16.6792H10.293V13.9654Z",fill:"white"})),r.createElement("defs",null,r.createElement("filter",{id:"filter0_d_562_220374",x:"8.24446",y:"4.95236",width:"7.15859",height:"14.9521",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},r.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),r.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),r.createElement("feOffset",{dy:"1.29011"}),r.createElement("feGaussianBlur",{stdDeviation:"0.967581"}),r.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),r.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),r.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_562_220374"}),r.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_562_220374",result:"shape"}))))),r.createElement("div",null,r.createElement("div",{className:"talent-tree__interactions-export__outdated-revision--title-container"},r.createElement("span",{className:"talent-tree__interactions-export__outdated-revision--title"},t.outdatedRevisionTitle),r.createElement("button",{type:"button",onClick:()=>{m(!1)},"aria-label":t.close},"X")),r.createElement("div",{className:"talent-tree__interactions-export__outdated-revision--subtitle"},t.outdatedRevisionSubtitle))):r.createElement(r.Fragment,null,r.createElement("div",{className:"talent-tree__interactions-export__percent-wrapper"},r.createElement("img",{className:"talent-tree__interactions-export__percent-image",src:c.siteLogoImageUrl,alt:""}),r.createElement("div",null,r.createElement("div",{className:"talent-tree__interactions-export__percent-title"},t.heatmapTitle),r.createElement("div",{className:"talent-tree__interactions-export__percent-subtitle"},t.heatmapSubtitle))),r.createElement("div",{className:"talent-tree__interactions-export__percent-disclaimer"},t.heatmapDisclaimer)):null),s?r.createElement("div",null,r.createElement(Du,{expanded:l,onClick:n},l?t.showLess:t.showMore)):null)}function Du(e){let{onClick:t,children:n,expanded:a}=e;return r.createElement("button",{type:"button",className:"talent-tree__interactions-show-more "+(a?"talent-tree__interactions-show-more--expanded":""),onClick:t},n)}function Uu(e){let{exportCode:t,children:n}=e;return r.createElement("a",{href:t?`https://www.wowhead.com/talent-calc/blizzard/${t}`:void 0,target:"_blank",rel:"noreferrer",className:"talent-tree__interactions-export__external-link"},r.createElement("span",null,n),r.createElement("i",{className:"zmdi zmdi-edit"}))}function Bu(e){let{exportCode:t,children:n}=e;const[a,l]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(a){const e=setTimeout((()=>{l(!1)}),1500);return()=>{clearTimeout(e)}}}),[a]);const i=(0,r.useMemo)((()=>t?()=>{navigator.clipboard.writeText(t).then((()=>{l(!0)})).catch((()=>{const e=Object.assign(document.createElement("input"),{value:t});document.body.append(e),e.select(),e.setSelectionRange(0,99999);try{document.execCommand("copy"),l(!0)}catch{alert("Copying failed.")}finally{e.remove()}}))}:void 0),[t]);return r.createElement("button",{className:"talent-tree__interactions-export__copy-button "+(a?"talent-tree__interactions-export__copy-button--copied":""),onClick:i},r.createElement("span",null,n),r.createElement("i",{className:"zmdi zmdi-"+(a?"check":"copy")}))}const Vu="user_notifications";const qu=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.info("[Playwire]",...t)},ju=async e=>{if(window.ramp){qu("display",e);try{await(window.ramp.addUnits?.([e])),await(window.ramp.displayUnits?.())}catch(e){qu("Failed to display",e)}}},Hu=async e=>{window.ramp&&(qu("destroy",e.type),Object.entries(window.ramp.settings?.slots??{}).map((e=>{let[t,n]=e;return{slotName:t,slot:n}})).filter((t=>{let{slotName:n,slot:a}=t;return n===e.type||a.type===e.type||a.element?.parentElement?.id===e.selectorId})).forEach((e=>{let{slotName:t}=e;return window.ramp.destroyUnits?.(t)})))},Gu=(0,r.createContext)({destroy:async()=>{},display:async()=>{},isLoading:!1,isAvailable:!1,isEnabled:!1}),Wu=e=>{let{usePlaywireScript:t,forcePath:n,userProfile:a,children:l}=e;const{scriptStatus:i,onRampReady:s}=t(),[o,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(!1),m=(0,r.useRef)(!1),p=!o&&u;return(0,r.useEffect)((()=>{m.current||(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.info("[Playwire]",...t)}("Init",{forcePath:n,userProfile:a}),window.ramp=window.ramp||{},window.ramp.que=window.ramp.que||[],window.ramp.passiveMode=!0,window.ramp.forcePath=n??void 0,window.ramp.up=a??void 0,window.ramp.que.push((()=>{c(!1),d(!0),s()})),m.current=!0)}),[s,n,a]),(0,r.useEffect)((()=>{switch(i){case"ready":setTimeout((()=>{c(!1)}),3e3);break;case"error":c(!1),d(!1)}}),[i]),r.createElement(Gu.Provider,{value:{isEnabled:p,isLoading:o,isAvailable:u,display:ju,destroy:Hu}},l)};var Ku=()=>(0,r.useContext)(Gu),Zu=n(36808),Yu=n.n(Zu);const Ju=(Xu="page-changed",e=>{const t=t=>(e=>{if("loading"!==document.readyState)return e(new Event("DOMContentLoaded"));document.addEventListener("DOMContentLoaded",e)})((()=>e(t)));return window.addEventListener(Xu,t),()=>{window.removeEventListener(Xu,t)}});var Xu,Qu=n(79429);const ed={blocked:0,fallback:1,house:2,blockThrough:3,direct:4,video:5},td=(e,t)=>e&&t<=2.5,nd=(0,r.createContext)(void 0),ad=(new Date).getTime(),rd={pageViews:0,direct:0,video:0,blocked:0,blockThrough:0,house:0,fallback:0,hasAdBlockCapability:!1,isAdLiteEligible:!1,lastResetAt:ad,lastChangeAt:ad,recent:[]},ld={expires:(0,Qu.Z)(ad,1)};var id=()=>{const e=(0,r.useContext)(nd);if(void 0===e)throw new Error("useAdBlockMetrics must be used within an AdBlockMetricsContextProvider");return e},sd=e=>{const[t,n]=(0,r.useState)(Date.now());return(0,r.useEffect)((()=>Ju((()=>{n((t=>Date.now()<t+1e3*e?t:Date.now()))})))),t},od=()=>{const[e,t]=(0,r.useState)(window.location.pathname.startsWith("/reports/")&&window.location.hash.includes("replay"));return(0,r.useEffect)((()=>Ju((e=>{t(e instanceof CustomEvent&&!1===e.detail?.allowAds)}))),[]),e};const cd=e=>{let{id:t,adPlacementLocation:n,adPlacementPlaywireType:a,adPlacementPlaywirePathType:l,minimumRefreshThresholdSeconds:i=0,fallback:s=null,className:o=""}=e;const{increment:c,isAdLiteEligible:u}=id(),{isAvailable:d,isLoading:m,display:p,destroy:g}=Ku(),h=od(),f=(0,r.useRef)(null),{width:b}=jn(f),E=sd(i),v=0===b;return(0,r.useEffect)((()=>{if(!d||v||h)return;if(u&&"cornerVideo"===n)return;const e=["bottom_rail","flex_leaderboard","trendi_video","corner_ad_video"].includes(a)?void 0:t;let r=null;return p({selectorId:e,type:a}).then((()=>{if(void 0===e)return void("trendi_video"===a&&window.PageOS?.BUS?.on("trendi_video_ad_started",(()=>c("video"))));const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const n=f.current;if(!n)return void console.error("Ad Placement Not Found?");if(e>5){const e=null!==n.querySelector("a");return c(e?"house":"blocked")}const a=n.querySelector("iframe");if(null!==a){const e=n.querySelector(".upo-label");return a.src.includes(".btloader.com")||null!==e?c("blockThrough"):c("direct")}r=setTimeout((()=>t(++e)),2e3)};r&&clearTimeout(r),r=setTimeout(t,2e3)})).catch(console.error),()=>{r&&(clearTimeout(r),r=null),"trendi_video"!==a&&window.PageOS?.BUS?.off("trendi_video_ad_started",(()=>c("video"))),g({selectorId:e,type:a}).catch(console.error)}}),[t,n,a,d,v,h,E,g,p,c,u]),r.createElement("span",{ref:f,className:`a52596fdd-playwire a52596fdd-playwire__type--${a} a52596fdd-playwire__path--${l??"none"} ${o}`},r.createElement("span",{id:t,"data-pw-desk":a}),!m&&!d&&s)},ud=e=>{let{adPlacementGoogleSlotId:t,adPlacementGooglePublisherId:n,adPlacementGoogleType:a}=e;const l=a.includes("-responsive");return(0,r.useEffect)((()=>{window.adsbygoogle=window.adsbygoogle||[];try{window.adsbygoogle.push({})}catch(e){}}),[]),r.createElement("ins",{className:ht()(["adsbygoogle","a52596fdd-google",`a52596fdd-google__${a}`]),"data-ad-client":n,"data-ad-slot":t,"data-ad-format":l?"auto":void 0})},dd=(0,r.createContext)({isLoading:!0,isAvailable:!1,isEnabled:!1,display:async()=>({remove:()=>{}})});window.__VM=window.__VM||[],window.__VM.push((function(e,t){console.log("[Venatus]","Ready"),t.Config.setBreakPoint("desktop","min-width:600px"),t.Config.setBreakPoint("mobile","max-width:600px")}));const md=()=>r.useContext(dd),pd=e=>{let{adPlacementLocation:t,adPlacementVenatusType:n,adPlacementVenatusTypeForMobile:a,fallback:l,minimumRefreshThresholdSeconds:i,className:s=""}=e;const{isAvailable:o,isLoading:c,display:u}=md(),d=(0,r.useRef)(null),m=od(),{width:p}=jn(d),g=0===p,h=(0,r.useRef)(null),f=sd(i);return(0,r.useEffect)((()=>{if(!o||g||m)return;const e=h.current||Promise.resolve();return h.current=e.then((()=>(console.log("[Venatus]","Displaying Ad",n),u(`${t}-${n}`,n,a)))),()=>{h.current?.then((e=>{try{console.log("[Venatus]","Removing Ad",n),e.remove()}catch(e){}}))}}),[a,n,t,u,m,f,o,g]),r.createElement("span",{ref:d,className:`a52596fdd-venatus a52596fdd-venatus__type--${n} ${s}`},r.createElement("span",{id:`${t}-${n}`}),!c&&!o&&l)},gd=e=>{let{adPlacementFallbackType:t,siteTitle:n,headerImageUrl:a,backgroundImageUrl:l,href:i}=e;const{increment:s}=id(),[o,c]=r.useState(!0);return(0,r.useEffect)((()=>{o&&(c(!1),s("fallback"))}),[o]),r.createElement("div",{className:"a52596fdd-fallback"},r.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:`a52596fdd-fallback__layout a52596fdd-fallback__layout--${t}`,style:{backgroundImage:"url("+l+")"}},r.createElement("img",{src:a,alt:n+" Logo",className:"a52596fdd-fallback__site-logo"}),r.createElement("div",{className:"a52596fdd-fallback__content"},r.createElement("div",null,r.createElement("span",{className:"a52596fdd-fallback__greeting"},"HEY THERE."),r.createElement("div",{className:"a52596fdd-fallback__remain-free"},"We all want ",n," to remain ",r.createElement("b",null,"free"),".")),r.createElement("div",{className:"a52596fdd-fallback__work-hard"},"We work hard to offer you the best possible experience."),r.createElement("div",null,"Help us by"," ",r.createElement("span",{className:"a52596fdd-fallback__linkish"},"disabling your Adblock")," ","or supporting us on"," ",r.createElement("span",{className:"a52596fdd-fallback__linkish"},"Patreon"),"."),r.createElement("div",{className:"a52596fdd-fallback__thank-you"},"Thank you for your help and support!"),r.createElement("div",{className:"a52596fdd-fallback__view-more"},r.createElement("span",{className:"a52596fdd-fallback__linkish"},"View All Subscriber Perks")))))},hd=(e,t)=>!!t&&("playwire"===e?t.classList.contains("pw-corner-ad-video")||"tyche_trendi_video_container"===t.id:"venatus"===e&&"vm-aniview"===t.id),fd=(e,t)=>!!t&&("playwire"===e?"hidden"!==t.style.visibility&&!t.classList.contains("pw-hide"):"venatus"===e&&"hidden"!==t.style.visibility);function bd(){return r.createElement(r.Fragment,null,r.createElement("svg",{width:"12",height:"12",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M6 6L26 26",stroke:"#DEDEDE",strokeWidth:"3",strokeLinecap:"round"}),r.createElement("path",{d:"M26 6L6 26",stroke:"#DEDEDE",strokeWidth:"3",strokeLinecap:"round"})))}const Ed=e=>{let{children:t,isCornerVideoVisible:n,onHideStateChange:a}=e;const[l,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),c=(0,r.useRef)(null),{height:u}=jn(c);return(0,r.useEffect)((()=>{a&&a(l)}),[a,l]),(0,r.useEffect)((()=>{o(u>25)}),[u]),(0,r.useEffect)((()=>{const e=setTimeout((()=>{o(!0)}),3e3);return()=>{clearTimeout(e)}}),[]),(0,r.useEffect)((()=>{const e=e=>{e instanceof CustomEvent&&!1===e.detail.allowAds?i(!0):i(!1),o(!0)};return window.addEventListener("page-changed",e),()=>{window.removeEventListener("page-changed",e)}}),[]),l?null:r.createElement("div",{className:"a52596fdd-with-close-button"},r.createElement("div",{className:ht()(["a52596fdd-with-close-button__controls",{"a52596fdd-with-close-button__controls--with-corner-video":n}])},s&&r.createElement(F,{styles:["unstyled"],onClick:()=>i(!0)},r.createElement(D,null,"Close Ad"),r.createElement(bd,null))),r.createElement("div",{ref:c},t))},vd=e=>{let{className:t="",adProvider:n,children:a,rightChild:l}=e;const{isCornerVideoVisible:i}=(e=>{const t="playwire"===e||"venatus"===e,[n,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)(void 0);return(0,r.useEffect)((()=>{if(!t)return;if(!l)return void a(!1);const n=new MutationObserver((t=>{for(const n of t)"attributes"===n.type&&a(fd(e,l))}));return n.observe(l,{attributes:!0,attributeFilter:["class","style"]}),()=>{n.disconnect()}}),[t,l,e]),(0,r.useEffect)((()=>{if(!t)return;const n=new MutationObserver((t=>{for(const n of t)"childList"===n.type&&(n.addedNodes.forEach((t=>{const n=t;if(hd(e,n)){const t="venatus"===e?n.children[0]?.children[0]:n;void 0!==t&&(i(t),a(fd(e,t)))}})),n.removedNodes.forEach((t=>{hd(e,t)&&(i(void 0),a(!1))})))}));return n.observe(document.body,{childList:!0}),()=>{n.disconnect()}}),[e,t]),{isCornerVideoVisible:n}})(n),[s,o]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(()=>{let e=document.getElementById("corner-video-override-style");return e||(e=document.createElement("style"),e.id="corner-video-override-style",document.head.appendChild(e)),e})().innerHTML=i&&!s?"\n@media (max-width: 1350px) {\n  #tyche_trendi_video_container, .pw-corner-ad-video, #aniplayer_AV640b942b4b2885b2210486d4, #aniplayer_AV628cea111877d7079e246e54 {\n    bottom: 95px !important;\n  }\n}\n      ".trim():""}),[s,i]),r.createElement("div",{className:ht()(["a52596fdd-sticky-footer",`a52596fdd-sticky-footer--${n}`,`${t}`],{"a52596fdd-sticky-footer--with-corner-video":i,"a52596fdd-sticky-footer--with-only-right-child":l})},r.createElement("div",null),r.createElement("div",null),r.createElement("div",{className:"a52596fdd-sticky-footer__children"},r.createElement(Ed,{onHideStateChange:o,isCornerVideoVisible:i},a)),r.createElement("div",null),r.createElement("div",null,l))},yd=(0,r.createContext)({isLoading:!0,isAvailable:!1,isEnabled:!1,display:async()=>Promise.resolve()}),_d=async(e,t)=>{console.log("[Nitro]","display",e,t),await(window.nitroAds?.createAd(e,t))},wd={stickyFooter:[[970,90],[728,90],[320,100],[320,50]],sideRailNarrow:[[160,600]],sideRailWide:[[300,600],[300,250],[160,600]],characterGear:[[336,280],[300,250]],cornerVideo:[[1,1]]},kd=e=>{let{adPlacementLocation:t,fallback:n,demo:a,minimumRefreshThresholdSeconds:l,className:i=""}=e;const{isAvailable:s,isLoading:o,display:c}=r.useContext(yd),u=(0,r.useRef)(null),d=od(),{width:m}=jn(u),p=0===m,[g,h]=(0,r.useState)([]),f=sd(l);return(0,r.useEffect)((()=>{const e="stickyFooter"===t?.7:1;h(wd[t]?.filter((t=>{let[n]=t;return n*e<=m}))??[])}),[t,h,m]),(0,r.useEffect)((()=>{if(!s||p||d||0===g.length)return;const e="cornerVideo"===t?{format:"floating",demo:a}:{format:"display",sizes:g,refreshTime:30,demo:a};setTimeout((()=>{c(t,e).catch(console.error)}),0)}),[a,t,c,d,g.length,f,s,p]),r.createElement("span",{ref:u,className:ht()(["a52596fdd",`a52596fdd--${t}`,"a52596fdd-nitro",`a52596fdd-nitro--${t}`,i,{"a52596fdd--no-background":"cornerVideo"===t}])},p?null:r.createElement("div",{key:`${t}-${f}`,id:t}),o||s?null:n)};function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nd.apply(this,arguments)}var Td=e=>{const t=(e=>{const t=e.adPlacementFallbackViewModel?r.createElement(gd,e.adPlacementFallbackViewModel):null;switch(e.adProvider){case"playwire":return e.adPlacementPlaywireViewModel?r.createElement(cd,Nd({},e.adPlacementPlaywireViewModel,{fallback:t})):null;case"google":return e.adPlacementGoogleViewModel?r.createElement(ud,e.adPlacementGoogleViewModel):null;case"venatus":return e.adPlacementVenatusViewModel?r.createElement(pd,Nd({},e.adPlacementVenatusViewModel,{fallback:t})):null;case"nitro":return e.adPlacementNitroViewModel?r.createElement(kd,Nd({},e.adPlacementNitroViewModel,{fallback:t})):null;default:return null}})(e);if(!t)return null;const n=r.createElement("div",{className:`a52596fdd a52596fdd--${e.adPlacementLocation}`},t),a="nitro"===e.adProvider&&e.adPlacementNitroViewModel?r.createElement(Ed,{isCornerVideoVisible:!1},r.createElement(kd,{id:"cornerVideo",adPlacementLocation:"cornerVideo",demo:e.adPlacementNitroViewModel.demo,minimumRefreshThresholdSeconds:e.adPlacementNitroViewModel.minimumRefreshThresholdSeconds})):null;return"stickyFooter"===e.adPlacementLocation?r.createElement(vd,{adProvider:e.adProvider,rightChild:a},n):n};const Cd={createdAt:{header:"Created At",textAlign:"center"},guild:{header:"Guild",textAlign:"center"},user:{header:"User",textAlign:"center"},reason:{header:"Reason",textAlign:"center"},clear:{header:"Clear",textAlign:"center"},deleteUser:{header:"Delete",textAlign:"center"}};function Sd(e){let{fontSize:t=62,includeMargin:n=!0,href:a}=e;return r.createElement("div",{className:"archon-title "+(n?"archon-title--include-margin":"")},r.createElement("div",{className:"archon-title-text",style:{fontSize:t}},a?r.createElement("a",{href:a},"Archon"):r.createElement("span",null,"Archon")))}function Id(e){let{data:t,side:n}=e;return r.createElement(r.Fragment,null,r.createElement("a",{target:"_blank",href:t.href,onClick:xd,onAuxClick:xd,className:`builds-banner__${n} ${t.imageUrl.includes("spec")?`builds-banner__${n}--blurred`:""}`,style:{"--bg":`url(${t.imageUrl})`}},r.createElement("div",{className:`builds-banner__${n}-content`},r.createElement("div",{className:"builds-banner__title"},r.createElement(hn,{markdown:t.title,wrapped:!1})),r.createElement("span",{className:`builds-banner__${n}-content-subtitle`},r.createElement(hn,{markdown:t.subTitle,wrapped:!1})),r.createElement("div",null,r.createElement("span",{className:`builds-banner__${n}-link`},t.label,r.createElement(Bs,null))))))}function xd(e){const t=e.target.closest?.("a")?.href;Ol({analyticsComponentName:"BuildsBanner",eventName:"Click",extraParameters:{previous_value:window.location.href,new_value:t}})}var Pd=function(e){return e.Discord="discord",e}(Pd||{}),Rd=n(73935);const Ad=(0,r.createContext)({});const Ld=(0,r.createContext)(void 0),$d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.info("[PlaywireCoreSite]",...t)},Od=e=>{let{publisherId:t,siteId:n,googleAnalyticsTag:a,children:l}=e;const{increment:i}=id(),s=v(`https://cdn.intergient.com/${t}/${n}/ramp.js`);(0,r.useEffect)((()=>{"error"===s&&i("blocked")}),[n,t,i,s]);const o=(0,r.useCallback)((()=>{const e=window.location.pathname+window.location.search;window.ramp.processPage?.(e,window.ramp.getUnits?.()||[]).then((()=>$d("Process Page Triggered",{googleAnalyticsTag:a,path:e})))}),[a]);return(0,r.useEffect)((()=>Ju((()=>{$d("Page Changed"),o()}))),[o]),r.createElement(Ld.Provider,{value:{scriptStatus:s,onRampReady:()=>{window.onGoogleAnalyticsFirstPageView?.then((()=>{window.gtag("config",a,{send_page_view:!1}),window.gtag("event","ramp_js",{send_to:a,pageview_id:Date.now().toString()}),$d("Google Analytics Configured"),$d("Initial Page View Sent as part of loading Ramp")}))}}},l)};var zd=()=>{const e=(0,r.useContext)(Ld);if(void 0===e)throw new Error("usePlaywireScript must be used within a PlaywireScript Context");return e};function Fd(){return Fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fd.apply(this,arguments)}window._pageViewModels||=[],window._mountedComponents||=[];const Md={Game:Z,User:e=>{let{children:t,value:n,lazyLoad:a=!1,lazyLoadBaseUrl:l=null}=e;const i=Y(),[s,o]=(0,r.useState)(n),[{data:c,status:u},d]=$t(),m={user:s,setUser:o,lazyLoadUser:a,userStatus:n?Pt:u};return(0,r.useEffect)((()=>{a&&null===s&&u.isIdle&&d({url:`${l??i?.baseUrl}/user`,credentials:"include"})}),[d,i?.baseUrl,a,l,s,u.isIdle]),(0,r.useEffect)((()=>{!s&&c&&o(c)}),[s,c]),r.createElement(Ml.Provider,{value:m},t)},GuildId:Kl,Character:Hl,ProgressRace:Da,ReportFilters:hc,UserTimeZone:ca,TalentTreeBlueprint:du,PlaywireAds:e=>{let{siteId:t,publisherId:n,googleAnalyticsTag:a,forcePath:l,userProfile:i,children:s}=e;return r.createElement(Od,{siteId:t,publisherId:n,googleAnalyticsTag:a},r.createElement(Wu,{usePlaywireScript:zd,forcePath:l,userProfile:i},s))},VenatusAds:e=>{let{children:t,siteId:n}=e;const a=v(`https://hb.vntsm.com/v4/live/vms/sites/${n}/index.js`),l={isLoading:"loading"===a,isAvailable:"ready"===a,isEnabled:"ready"===a,display:async(e,t,n)=>new Promise((a=>window.__VM.push(((r,l)=>{if(n)return a(l.Config.buildPlacement((e=>{e.add(t),e.addDefaultOrUnique(n).setBreakPoint("mobile")})).display(e));a(l.Config.get(t).display(e))}))))};return r.createElement(dd.Provider,{value:l},t)},NitroAds:e=>{let{children:t,siteId:n,userToken:a}=e;const l=v(`https://s.nitropay.com/ads-${n}.js`),[i,s]=r.useState(!0);(0,r.useEffect)((()=>{"ready"===l&&(console.log("[Nitro]","Ready"),s("ready"!==l),a&&window.nitroAds?.addUserToken(a.email,a.encoding))}),[l,a]);const o={isLoading:i,isAvailable:!i&&void 0!==window.nitroAds?.createAd,isEnabled:"ready"===l,display:_d};return r.createElement(yd.Provider,{value:o},t)},AdPlacements:e=>{let{children:t,adPlacements:n={}}=e;return r.createElement(Ad.Provider,{value:n},t)},AdBlockMetrics:e=>{let{cookieName:t,children:n}=e;const[a,l]=function(e,t,n){const[a,l]=(0,r.useState)((()=>(()=>{const n=Yu().get(e);try{return{...t,...n?JSON.parse(n):{}}}catch(n){return Yu().remove(e),t}})()));return[a,(0,r.useCallback)((t=>{l((a=>{const r=t instanceof Function?t(a):t;return Yu().set(e,JSON.stringify(r),n),r}))}),[e,n])]}(t,rd,ld),i=a.recent.length<40?5:a.recent.reduce(((e,t)=>e+t),0)/a.recent.length;(0,r.useEffect)((()=>{5!==i&&(new Date).getTime()-a.lastChangeAt>3e5&&l((e=>{const t=e.hasAdBlockCapability||(e=>e<=3.2)(i);return{...e,hasAdBlockCapability:t,isAdLiteEligible:td(t,i),lastChangeAt:(new Date).getTime()}}))}),[a.lastChangeAt,i,l]),(0,r.useEffect)((()=>(l((e=>({...e,pageViews:e.pageViews+1}))),Ju((()=>{l((e=>({...e,pageViews:e.pageViews+1})))})))),[l]);const s=(0,r.useCallback)((e=>{l((t=>({...t,[e]:t[e]+1,..."pageViews"!==e?{recent:[ed[e],...t.recent].slice(0,40)}:{}})))}),[l]),o=(0,r.useCallback)((()=>{l(rd)}),[l]);return r.createElement(nd.Provider,{value:{...a,score:i,increment:s,reset:o}},n)}};let Dd=window._pageViewModels.filter((e=>Array.isArray(e))).map((e=>{let[t,n]=e;return Md[t]?{contextName:t,Provider:Md[t],props:n}:null})).filter((e=>null!==e));const Ud=e=>{let{children:t,providers:n}=e;return r.createElement(r.Fragment,null,n.reduceRight(((e,t)=>{let{contextName:n,Provider:a,props:l}=t;return r.createElement(a,Fd({key:n},l),e)}),t))};window.attachWithPortals=e=>{if(e.context){const t=Object.entries(e.context).map((t=>{let[n,a]=t;return Md[n]?Dd.find((e=>e.contextName===n))?(console.warn(`Context provider value for '${n}' already configured, should be able to remove from '${e.key}'.`),null):{contextName:n,Provider:Md[n],props:a}:(console.error(`Context provider '${n}' is not configured while rendering '${e.key}'.`),null)})).filter((e=>null!==e)),{ComponentType:n,props:a,key:l}=e;e.ComponentType=function(){return r.createElement(Ud,{providers:t},r.createElement(n,Fd({key:l},a)))}}Vd(e)},window.detachWithPortals=e=>{window._mountedComponents=window._mountedComponents.filter((t=>{let{key:n}=t;return n!==e})),Bd()};let Bd=()=>{};const Vd=e=>{window._mountedComponents=window._mountedComponents.filter((t=>{let{key:n}=t;return n!==e.key})),window._mountedComponents.push(e),Bd()},qd=()=>{const[,e]=(0,r.useState)(0);return Bd=()=>e((e=>e+1)),r.createElement(r.Fragment,null,window._mountedComponents.map((e=>{let{key:t,ComponentType:n,props:a,element:l}=e;return(0,Rd.createPortal)(r.createElement(n,Fd({key:t},a)),l,t)})))};let jd=()=>{};window.setContextProvider=(e,t)=>{const n=Md[e];if(!n)return void console.error(`Context provider '${e}' is not configured while setting props.`);const a=Dd.find((t=>t.contextName===e));a&&(Dd=Dd.filter((t=>t.contextName!==e))),Dd.push({contextName:e,Provider:n,props:t}),jd()};const Hd=()=>{const[,e]=(0,r.useState)(0);return jd=()=>e((e=>e+1)),r.createElement(Ud,{providers:Dd},r.createElement(qd,null))};var Gd=n(80888);function Wd(e){return r.createElement(Gd.Z,e)}var Kd=function(e){let{timestamp:t,dateStyle:n,timeStyle:a,locales:l}=e;const i=new Intl.DateTimeFormat(l??[],{dateStyle:n,timeStyle:a}).format(t?new Date(t):new Date);return r.createElement(r.Fragment,null,i)},Zd=n(77982),Yd=n(7069),Jd=n(88330),Xd=n(63500),Qd=n(77349),em=n(24993);const tm=e=>{let{label:t,children:n}=e;return r.createElement("div",{style:{backgroundColor:"#222",borderRadius:"5px",padding:"5px 15px",display:"grid",flexGrow:1,gridTemplateColumns:"160px 1fr",alignItems:"center",marginTop:"1rem",gap:"1rem"}},r.createElement("h3",null,t),r.createElement("div",null,n))},nm=e=>{let{label:t,value:n,setValue:a,isDisabled:l}=e;return r.createElement(tm,{label:t},r.createElement(U,{gap:"small"},r.createElement("input",{type:"number",step:1,disabled:l,value:n,onChange:e=>a(e.currentTarget.valueAsNumber)}),r.createElement(F,{disabled:l,styles:["primary","link"],onClick:()=>a(0)},"Reset")))},am=e=>{let{label:t,timestamp:n,setTimestamp:a,isDisabled:l}=e;return r.createElement(tm,{label:t},r.createElement(Pn,{gap:"small"},r.createElement(U,{gap:"small"},r.createElement("input",{type:"number",step:1,disabled:l,value:n,onChange:e=>a(e.currentTarget.valueAsNumber)}),r.createElement(F,{disabled:l,styles:["primary","link"],onClick:()=>a(Math.round((new Date).getTime()/1e3))},"Reset to Now")),r.createElement(U,null,r.createElement(F,{styles:["slim","warning"],disabled:l,onClick:()=>a((0,Zd.Z)(new Date(1e3*n),1).getTime()/1e3)},r.createElement("i",{className:"zmdi zmdi-minus"})," Week"),r.createElement(F,{styles:["slim","warning"],disabled:l,onClick:()=>a((0,Yd.Z)(new Date(1e3*n),1).getTime()/1e3)},r.createElement("i",{className:"zmdi zmdi-minus"})," Day"),r.createElement(F,{styles:["slim","warning"],disabled:l,onClick:()=>a((0,Jd.Z)(new Date(1e3*n),1).getTime()/1e3)},r.createElement("i",{className:"zmdi zmdi-minus"})," Hour")),r.createElement(U,null,r.createElement(F,{styles:["slim","primary"],disabled:l,onClick:()=>a((0,Xd.Z)(new Date(1e3*n),1).getTime()/1e3)},r.createElement("i",{className:"zmdi zmdi-plus"})," Week"),r.createElement(F,{styles:["slim","primary"],disabled:l,onClick:()=>a((0,Qd.Z)(new Date(1e3*n),1).getTime()/1e3)},r.createElement("i",{className:"zmdi zmdi-plus"})," Day"),r.createElement(F,{styles:["slim","primary"],disabled:l,onClick:()=>a((0,em.Z)(new Date(1e3*n),1).getTime()/1e3)},r.createElement("i",{className:"zmdi zmdi-plus"})," Hour")),r.createElement("div",null,new Date(1e3*n).toUTCString()),r.createElement("div",null,r.createElement(Kd,{timestamp:n?1e3*n:1,dateStyle:"long",timeStyle:"long"}))))},rm=[{value:"disabled",label:"Ignored"},{value:"include",label:"Include Reports With Last Export"},{value:"exclude",label:"Exclude Reports With Last Export"}],lm={Header:function(e){let{initialData:t}=e;const n=Y(),[a,l]=(0,r.useState)(null),[i,s]=(0,r.useState)(""),[o,c]=(0,r.useState)(null),[u,d]=(0,r.useState)({}),[{data:m,status:p},g]=$t(),h=m?.guilds??t?.guilds??[],f=m?m.isLoggedIn?m.characters:null:t?.characters??null,[{data:b,status:E},v]=$t(),y=b&&b.length>0?{contents:b,activeContentId:b[0].id}:t.gameContents,_=(0,r.useMemo)((()=>({game:Boolean(b?.length),account:Boolean(m?.guilds||m?.characters)})),[m,b]),w=t.topBar;if((0,r.useEffect)((function(){null!==t?.characters&&!1===m?.isLoggedIn&&a&&l(null)}),[t,m,a]),(0,r.useEffect)((()=>{if(!a)return;switch(document.getElementsByTagName("body")?.[0]?.classList.add("header-is-open"),a){case"characters":case"guilds":_.account||p.isLoading||g({url:`${n?.baseUrl}/user-sidebar/v2/`,credentials:"include"});break;case"content":_.game||E.isLoading||v(`${n?.baseUrl}/zone-sidebar/v2/`)}const e=e=>{"Escape"===e.key&&l(null)},t=e=>{const t=e?.target;t instanceof Element&&(t.classList.contains("header-bottom-bar__item")||t.closest(".header-bottom-bar__item")||t.classList.contains("header-mobile-bar__menu-btn")||t.closest(".header-mobile-bar__menu-btn")||t.classList.contains("header__menu-wrapper")||t.closest(".header__menu-wrapper")||t.classList.toString().includes("dropdown-select")||l(null))};return document.addEventListener("mousedown",t),document.addEventListener("keyup",e),()=>{document.removeEventListener("keyup",e),document.removeEventListener("mousedown",t),document.getElementsByTagName("body")?.[0]?.classList.remove("header-is-open")}}),[a,_,p,E,v,g,n?.baseUrl]),!w||!y)return r.createElement("header",{className:"header__wrapper"});const k=t.labels,N=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l((n=>("characters"===n||t&&"guilds"===n)&&e?null:"characters"))},T=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];l((t=>"guilds"===t&&e?null:"guilds"))},C=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;c(n&&n>=0?n:null);const r="content"===a;if(e){const n="content"===a&&i===e.id;t&&l(n?null:"content");const r=n&&!t?"":e.id;s(r)}else!r&&y?.contents?.length>0&&s(y.contents[0].id),l(r?null:"content")};return r.createElement("header",{className:"header__wrapper"},r.createElement("div",{className:"header__background-fader "+(null!=a?"header__background-fader--visible":"")}),r.createElement("div",{className:"header__desktop"},t.siteSelect&&r.createElement(Co,t.siteSelect),r.createElement(po,So({},w,{labels:k})),r.createElement(ho,{gameContents:y,onOpenCharacters:N,onOpenGuilds:T,onOpenGameContent:(e,t)=>C(e,!0,t),onMouseEnter:(e,t,r)=>{if(a){if("guilds"===e&&"guilds"!==a)T(!1);else if("characters"===e&&"characters"!==a)N(!1);else if("content"===e&&t){const e=y.contents.find((e=>e.id==t.id));!e||"content"===a&&i===e.id||C(e,!0,r??-1)}}else switch(e){case"characters":case"guilds":_.account||p.isLoading||g({url:`${n?.baseUrl}/user-sidebar/v2/`,credentials:"include"})}},labels:k})),r.createElement("div",{className:"header__mobile"},r.createElement(vo,{availableLanguages:w.availableLanguages,isContentMenuOpen:"content"===a,isCharacterMenuOpen:"characters"===a||"guilds"===a,onCharactersMenuClick:()=>N(!0,!0),onContentMenuClick:C,labels:k})),a?r.createElement(zs.Provider,{value:_},"content"===a?r.createElement("div",{className:"header__menu-wrapper header__menu-wrapper--content",style:{left:o??0}},r.createElement(to,{contents:y.contents,activeContentId:i,onActiveContentChange:e=>C(e,!1),onActiveExpansionChange:(e,t)=>{t?.id?.length&&e?.id?.length&&(u[t.id]=e.id,d({...u}))},labels:k,defaultExpansionsPerContent:u,siteSelect:t.siteSelect})):r.createElement("div",{className:"header__menu-wrapper header__menu-wrapper--user"},r.createElement(To,{characters:f,guilds:h,activeSection:a,onCharactersChange:()=>N(!1),onGuildChange:()=>T(!1),labels:k}))):null)},Navigation:E,GuildNavigation:Gi,Stream:I,HeaderMenuSectionsPanel:eo,RecruitmentEntryPointTile:Oa,ProgressRaceSummaryTile:function(e){let{competitionId:t,title:n,partneredGuilds:a,fallbackGuild:l,gameViewModel:i,backgroundImageUrl:s,priorityStream:o,shouldAutoplayStream:c}=e;const{progressRace:u,progressRaceStatus:d}=Ba(),m="/zone/race/latest"+(1===t?"":`?competition=${t}`),[p,g]=(0,r.useState)();(0,r.useEffect)((()=>{if(!u||p)return;let e=a?.length>0?a:u.guilds.slice(0,5).filter((e=>e.streamChannel));e.length||(e=u.guilds.slice(0,10).filter((e=>e.streamChannel))),e.length||(e=u.guilds.filter((e=>e.streamChannel))),!l||!l?.isStreaming&&e.length||e.push(l),e.length&&g(e[Math.floor(Math.random()*e.length)])}),[p,u,a,l]);const h=!(u||d.isError);return r.createElement(Z,{game:i},r.createElement("div",{className:"progress-race-summary-tile"},r.createElement(In,{title:n,titleUrl:m,padding:"narrow"},h&&r.createElement(Mn,{className:"progress-race-summary-tile__loading"},r.createElement(kt,{label:trans("reports.loading_data")})),d.isError&&!u&&r.createElement(se,null,d.errorMessage),u&&!h&&r.createElement("div",{className:"progress-race-summary-tile__content"},r.createElement("div",{className:"progress-race-summary-tile__stream-and-progress-line "+(o||p?"":"progress-race-summary-tile__stream-and-progress-line--single-column")},o?r.createElement(Or,{backgroundImageUrl:s,logoImageUrl:o.iconImageUrl,logoImageFallbackUrl:o.iconImageUrl,isRounded:!1,guildFaction:0,title:o.title,streamChannel:o.channel,autoplay:c,isFallbackGuild:!0,competitionId:t}):p&&r.createElement(Or,{guildId:p.id,backgroundImageUrl:s,logoImageUrl:p.logoImageUrl,logoImageFallbackUrl:"logoImageFallbackUrl"in p?p.logoImageFallbackUrl:p.logoImageUrl,isRounded:p.logoImageIsCustom,guildFaction:p.faction,title:p.name,streamChannel:p.streamChannel,autoplay:c,isFallbackGuild:!!l&&p.id===l.id,competitionId:t}),u.guilds.length>0?r.createElement("div",{className:"progress-race-summary-tile__progress-line-and-tiles "+(p||o?"":"progress-race-summary-tile__progress-line-and-tiles--no-stream")},r.createElement("a",{href:m},r.createElement($r,{numberOfGuilds:10,guilds:u.guilds,includeGearColumn:!1,encounterIconFormat:"iconOfCurrentEncounter",guildIconFormat:"iconsAsBackground",style:"v2"}))):r.createElement(Wa,{backgroundImageUrl:s,height:"100%"})),r.createElement("a",{className:"progress-race-summary-tile__text",href:m},trans("progress-race.follow_the_race_detail"))))))},ProgressRaceHeadToHeadNotificationTile:zr,ViewReportOnWipefestTile:Vr,StreamAndMarkdownTile:jr,ImageAndMarkdownTile:cl,ThinBanner:Gr,ThinBannerWithMarkdown:Kr,ReportComponentDashboard:function(e){let{initialDashboard:t}=e;const n=(0,r.useRef)(null),a=jn(n),l=Y(),{isBeingEdited:i,pendingValue:s,setPendingValue:o,save:u,tileActions:d,status:m,hasPendingChanges:p,beginEdit:g,updateLayout:h,removeCell:f,addCell:b,updateTitle:E}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ql().new(e,t).withTileActions((0,r.useCallback)((()=>!0),[])).withHttpSave("/reports/save-component-dashboard",(e=>e)).build(),{pendingValue:a,setPendingValue:l}=n,i=(0,r.useCallback)((e=>l((t=>({...t,layout:e.map((e=>({...t.layout.find((t=>t.i===e.i))??{component:{script:""}},...e})))})))),[l]),s=(0,r.useRef)(0),o=(0,r.useCallback)((e=>{l((t=>{if(t.layout.length===zc)return t;0===t.layout.length&&(s.current=0);const n={i:!e?.i||t.layout.some((t=>t.i===e?.i))?Po():e.i,x:e?.x??s.current,y:0,w:e?.w??1,h:e?.h??2,component:e?.component??{script:Ec}};return s.current=(s.current+1)%Fc,{...t,layout:[n,...t.layout]}}))}),[l]),c=(0,r.useRef)(0),u=(0,r.useCallback)((()=>{const e=_c[c.current];c.current=(c.current+1)%_c.length,o(e)}),[o]),d=(0,r.useCallback)((e=>{const t=a.layout.filter((t=>t!==e));i(t)}),[a.layout,i]),m=(0,r.useCallback)((e=>l((t=>({...t,title:e})))),[l]);return{...n,updateLayout:i,removeCell:d,addCell:o,addExampleCell:u,updateTitle:m}}(t);var v;v=p,(0,r.useEffect)((()=>{const e=e=>{if(v){const t="You have unsaved changes. Continue?";return e.returnValue=t,t}};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[v]);const y=(0,r.useRef)(i);(0,r.useEffect)((()=>{i&&!y.current&&0===s.layout.length&&b(),y.current=i}),[b,i,s.layout.length]);const[_,w]=(0,r.useState)(!1),[k,N]=(0,r.useState)(!1),[T,C]=(0,r.useState)(!1),[S,I]=(0,r.useState)();(0,r.useEffect)((()=>()=>{S&&clearTimeout(S)}),[S]),(0,r.useEffect)((()=>{C(!1)}),[s]);const[x,P]=(0,r.useState)(),R=(0,r.useMemo)((()=>s?.layout.map((e=>r.createElement("div",{key:e.i,className:"report-component-dashboard__cell "+(i?"report-component-dashboard__cell--is-being-edited":"")},r.createElement(Nc,{id:e.i,script:e.component.script,height:160*e.h+10*(e.h-1),showDuration:i}),i&&r.createElement(r.Fragment,null,r.createElement("div",{className:"report-component-dashboard__cell-overlay"}),r.createElement("div",{className:"report-component-dashboard__cell-buttons"},r.createElement(Dc,{cell:e}),r.createElement(F,{styles:["menu"],onClick:()=>P(e)},trans("global.edit")),r.createElement(Uc,{onConfirm:()=>f(e)}))))))),[i,s?.layout,f]),A=!(_||k||x);return(0,r.useEffect)((()=>{const e=e=>{if(!A||!i||0===a.width)return;const t=e.clipboardData?.getData?.("Text");if(!t)return;const n=Ac(t);n&&(e.preventDefault(),e.stopPropagation(),b(n))};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)}),[b,i,A,a.width]),r.createElement(Pn,{gap:"small"},r.createElement(In,null,r.createElement(vn,{className:"report-component-dashboard__help"},trans("reports.report_components_alpha_help",{articlesBaseUrl:l?.articlesBaseUrl??""}))),_&&r.createElement(Lc,{onContinue:e=>{w(!1),g(),b(e)},onCancel:()=>w(!1)}),k&&r.createElement(Pc,{onPreview:e=>{N(!1),g(),o(e)},onCancel:()=>N(!1)}),x&&r.createElement(In,{title:trans("reports.editing_component"),className:"report-component-dashboard__cell-edited",actions:[{label:trans("global.cancel"),icon:"close",onClick:()=>P(void 0)}]},r.createElement(yc,{id:x.i,script:x.component.script,save:e=>{h(s.layout.map((t=>t.i===x.i?{...x,component:{...x.component,script:e}}:t))),P(void 0)},saveText:trans("global.continue"),cancel:()=>P(void 0)})),r.createElement(In,{cssStyle:A?void 0:{visibility:"hidden",height:0},className:"report-component-dashboard "+(i?"report-component-dashboard--is-being-edited":""),title:r.createElement(Mc,{isBeingEdited:i,pendingValue:s,updateTitle:E,size:a}),titleClassName:"report-component-dashboard__title "+(i?"report-component-dashboard__title--is-being-edited":""),padding:"narrow",actions:[{label:trans("global.import_all"),icon:"download",onClick:()=>N(!0),disabled:m.isLoading},...s.layout.length>0?[{label:T?trans("global.copied")+"!":trans("global.export_all"),icon:T?"check":"copy",onClick:()=>{navigator.clipboard.writeText(Cc(JSON.stringify(s))).then((()=>{C(!0),S&&clearTimeout(S),I(setTimeout((()=>C(!1)),5e3))}))},disabled:m.isLoading}]:[],...d??[]],ref:n},r.createElement(Pn,null,!i&&0===s.layout.length&&r.createElement("div",{className:"report-component-dashboard__empty"},trans("reports.are_you_ready_to_build_dashboard")," ",r.createElement(F,{styles:["link"],onClick:g},trans("global.lets_go"))),i&&r.createElement("div",{className:"report-component-dashboard__buttons"},r.createElement("div",{className:"report-component-dashboard__component-buttons"},r.createElement(F,{onClick:()=>b(),disabled:s.layout.length>=zc},trans("global.new")),r.createElement(F,{onClick:()=>w(!0),disabled:s.layout.length>=zc},trans("global.import")),r.createElement(c,null,r.createElement(vn,null,`(${s.layout.length}/${zc})`))),r.createElement(ti,{save:u,saveText:trans("reports.save_dashboard"),glowSaveButtonWhenPendingChanges:!0,status:m,hasPendingChanges:p,isValid:$c<=s.title.length&&s.title.length<=Oc})),s.layout.length>0&&a.width>0&&r.createElement(xo(),{className:"layout",layout:s.layout,containerPadding:[0,0],cols:Fc,rowHeight:160,width:a.width-28,isDraggable:i,isResizable:i,onDragStop:h,onResizeStop:h,useCSSTransforms:!0},R))))},ScriptPinEditor:il,CharacterProfileRecruitmentTile:function(e){let{userOwnsCharacter:t,isListed:n,isValid:a,specSummary:l,factions:i,servers:s,activities:o,languages:c,schedulePreferences:u,schedule:d,description:m,lastUpdated:p,contactInformationText:g,transferUsesSubregion:h,subregionLabels:f}=e;const b=(0,r.createRef)(),E=jn(b);return r.createElement("div",{ref:b,className:"character-profile-recruitment-tile"},r.createElement("div",{className:"character-profile-recruitment-tile__title"},r.createElement("div",{className:"character-profile-recruitment-tile__title-left"},r.createElement(P,{href:"/recruitment"},r.createElement("span",null,trans("recruitment.looking_for_a_guild_title"),": "),r.createElement("span",{className:"character-profile-recruitment-tile__lfg-value"},n&&a?trans("global.yes"):trans("global.no")))),r.createElement(U,{className:"character-profile-recruitment-tile__title-right",gap:"content-padding"},r.createElement("span",null,p&&r.createElement(r.Fragment,null,r.createElement("span",null,trans("character.last_update"))," ",r.createElement("span",{className:"character-profile-recruitment-tile__last-updated-value"},moment(p).fromNow()))),t&&r.createElement("a",{className:"character-profile-recruitment-tile__update-link",href:"/recruitment/player-looking-for-guilds"},trans("global.update")))),n&&r.createElement(Pn,{className:"character-profile-recruitment-tile__content",gap:"smaller"},!a&&r.createElement(vn,{openLinksExternally:!1},`${trans("recruitment.tile_will_not_show_and_character_will_not_show_in_search_results_because_invalid")}. [${trans("global.update")}](/recruitment/player-looking-for-guilds)`),!a&&r.createElement(W,null),l&&r.createElement(vn,{enhanced:!0},l),r.createElement("dl",{className:"character-profile-recruitment-tile__infos "+(E.width>400?"character-profile-recruitment-tile__infos--two-columns":"")},i&&r.createElement(ul,{subtitle:trans("global.factions"),info:i}),r.createElement(ul,{subtitle:h?f?.plural??trans("global.servers"):trans("global.servers"),info:s}),r.createElement(ul,{subtitle:trans("recruitment.activities"),info:o}),r.createElement(ul,{subtitle:trans("recruitment.languages"),info:c}),r.createElement(ul,{subtitle:trans("schedule.schedule_preferences"),info:u}),r.createElement(ul,{subtitle:trans("schedule.availability"),info:d?r.createElement(ka,{schedule:d}):trans("global.not_set")}),g&&r.createElement(ul,{subtitle:trans("recruitment.contact_information"),info:g,isFullWidth:!0})),r.createElement(Wn,{markdown:m,doNotCollapseIfCharacterCountLessThan:120})))},StaleRecruitmentCharactersNotification:Nl,StaleRecruitmentGuildsNotification:function(e){let{guilds:t}=e;const[n,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)(t),[{status:s},o]=$t();return(0,r.useEffect)((()=>{s.isSuccess&&i((e=>e.slice(1)))}),[s]),n?null:0===l.length?r.createElement(Gr,null,r.createElement("div",{className:"stale-recruitment-guilds-notification"},r.createElement(vn,{openLinksExternally:!1},trans("recruitment.thanks_you_can_update_your_guild_recruitment_profile_at_any_time")),r.createElement(F,{styles:["link"],onClick:()=>a(!0)},trans("global.close")))):r.createElement(Gr,null,r.createElement("div",{className:"stale-recruitment-guilds-notification"},r.createElement(vn,{enhanced:!0},trans("recruitment.is_guild_still_looking_for_players",{guildName:`<Styled type="${l[0].cssClassName}">${l[0].name}</Styled>`})),r.createElement("div",{className:"stale-recruitment-guilds-notification__actions"},r.createElement(Tl,{url:`/guild/refresh-recruitment-updated-at/${l[0].id}`,label:trans("global.yes"),disabled:s.isLoading,doFetch:o}),r.createElement(Tl,{url:`/guild/stop-recruiting/${l[0].id}`,label:trans("global.no"),disabled:s.isLoading,doFetch:o})),s.isError&&s.errorMessage&&r.createElement("div",{className:"stale-recruitment-guilds-notification__error"},s.errorMessage)))},FFProgressRaceSummaryTile:bl,WeChatQRCodes:Rl,UserSubscriptionStatusTile:Bl,CharacterProfileCustomizeTile:function(e){let{onBannerChange:t,onSuccessfulSave:n,onCancel:a}=e;const{character:l}=Gl(),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jl(e,{type:Yl.Character,id:Gl()?.character?.id},t)}(null,{alwaysEditable:!0,onHttpSuccess:()=>n?.(),onCancelEdit:()=>a?.()}),[s,o]=(0,r.useState)(!0),c=(0,r.useCallback)((e=>{let{bannerId:t,bannerImages:n}=e;const a=n.find((e=>e.id===t));a&&i.setValue(a),o(!1)}),[i.setValue]);return r.createElement(In,{className:"character-profile-customize-tile "+(i.pendingValue||s?"":"character-profile-customize-tile--no-banner-selected")},r.createElement(Ot,{url:`/character/customize-options/${l.id}`,onHttpSuccess:c,lazyChildren:e=>{let{bannerImages:n,subscriptionTiersCallToAction:a,currentTierName:l,featureEnabled:s}=e;return r.createElement(li,{isEnabled:s,bannerImages:n,currentTierName:l,subscriptionTiersCallToAction:a,onBannerChange:t,editableBanner:i})}}))},SubscriptionTiersCallToAction:Fl,RetailSepulcherWelcomeBackTile:function(){const e=Y(),[t,n]=d("RetailSepulcherWelcomeBackTile.show",!0);return t?r.createElement(In,{actions:[{label:trans("global.dismiss"),icon:"close",onClick:()=>n(!1)}],backgroundImage:{url:`${e.assetServerBaseUrl}/img/warcraft/zereth-mortis.jpg`,style:{filter:"blur(3px) contrast(1.2) brightness(0.8)",backgroundPosition:"center"}},className:"retail-sepulcher-welcome-back-tile"},r.createElement(Dr,{href:`${e.articlesBaseUrl}/news/warcraft-logs-sepulcher-of-the-first-ones-update`}),r.createElement(Pn,{className:"retail-sepulcher-welcome-back-tile__content"},r.createElement("div",{className:"retail-sepulcher-welcome-back-tile__welcome-back"},r.createElement("span",{className:"retail-sepulcher-welcome-back-tile__welcome"},trans("global.welcome_back").split(" ")[0])," ",trans("global.welcome_back").split(" ").slice(1).join(" "),"."),r.createElement("div",null,r.createElement("img",{className:"retail-sepulcher-welcome-back-tile__logo",src:`${e.assetServerBaseUrl}/img/warcraft/logo-flat-white.png`,alt:"Warcraft Logs logo"})),r.createElement("div",{className:"retail-sepulcher-welcome-back-tile__returning-user"},trans("global.returning_user_question")),r.createElement("div",{className:"retail-sepulcher-welcome-back-tile__check-out"},trans("global.check_out_what_you_may_have_missed"),"."))):null},GetUserInformationAdminForm:function(e){let{urlPath:t}=e;const n=[{label:"User ID",value:"userId",type:"number"},{label:"User Name",value:"userName",type:"text"},{label:"Email Address",value:"emailAddress",type:"text"}],[a,l]=(0,r.useState)(n[0]),[i,s]=fi(void 0,500),o=`${t}?${new URLSearchParams(void 0!==i?{key:a.value,value:String(i)}:void 0).toString()}`;return r.createElement("div",{className:"get-user-information-admin-form"},r.createElement(Pn,null,r.createElement(U,null,r.createElement(gi,{options:n,value:a,onChange:l}),r.createElement(ii,{type:a.type,onChange:e=>{let{value:t}=e;return s(t)}})),!!i&&r.createElement(Ot,{url:o,lazyChildren:e=>r.createElement(r.Fragment,null,r.createElement(bi,{json:e}),r.createElement(ci,{src:e,collapsed:5}))})))},SuspiciousGuildsAdminForm:function(e){let{rows:t}=e;const n=t.map((e=>{const t=new URLSearchParams;return t.set("email",e.userEmailAddress),t.set("deleteCharactersAndGuilds","true"),{createdAt:e.timestamp?Ki(new Date(e.timestamp)):"",guild:`[${e.guildName}](/guild/id/${e.guildId})`,user:`[${e.userName}](/user/reports-list/${e.userId})`,reason:e.reason,clear:`[Clear](/admin/clear-suspicious-guild?guildId=${e.guildId}&userId=${e.userId})`,deleteUser:`[Delete User + Characters + Guilds](/admin/checkdeleteaccount?${t.toString()})`}}));return r.createElement(oc,{style:"report",columns:Cd,data:n,enhancedMarkdownEnabled:!0})},MarkdownAndCopyToClipboardTextBoxAndButton:function(e){let{markdown:t,valueToCopy:n,inputTextStyle:a}=e;return r.createElement(U,{style:{alignItems:"center"}},r.createElement(vn,null,t),r.createElement(Ni,{valueToCopy:n,inputTextStyle:a}))},WelcomeTile:function(e){let{twitter:t,discordInviteUrl:n,highlightedFeatures:a,latestArticles:l}=e;const i=Y(),{user:s}=Dl(),o=(0,r.useRef)(null),c=jn(o),[d,m]=(0,r.useState)(!0);if(!i)return null;const p=l[0],g=l.find((e=>e.isPinned)),h=p,f=c.width>=1200?[...p&&!h?[p]:[],...g&&g!==p?[g]:[],...l.filter((e=>e!==p&&e!==g))].slice(0,5):[],b=c.width<800||0===l.length?"welcome-tile__articles-container--single-column":c.width<1200||!h?"welcome-tile__articles-container--two-columns":"welcome-tile__articles-container--three-columns",E=c.width>=800;return r.createElement("div",{ref:o,className:"welcome-tile"},r.createElement(In,{title:r.createElement("div",{className:"welcome-tile__title-container"},`${E?trans("global.welcome_to",{siteTitle:i.siteTitle}):trans("global.welcome")}!`,r.createElement("div",{className:"welcome-tile__social-icons-container"},r.createElement("a",{href:`https://twitter.com/${t}`},r.createElement("img",{src:"https://assets.rpglogs.com/img/social/twitter.png",alt:"Twitter",width:24,height:24})),r.createElement("a",{href:n},r.createElement("img",{src:"https://assets.rpglogs.com/img/social/discord.png",alt:"Discord",width:24,height:24})))),padding:"narrow",actions:s?[{icon:"settings",label:trans("global.settings"),href:"/profile"}]:[{icon:"account-circle",label:trans("global.signup"),href:"/register"},{icon:"sign-in",label:trans("global.login"),href:"/login"}]},r.createElement("div",null,r.createElement("div",{className:"welcome-tile__welcome-message-container"},trans(`global.welcome_${i.lowercaseName}`)),r.createElement("div",{className:`welcome-tile__articles-container ${b}`},r.createElement(Mn,{padding:"narrow"},r.createElement(Ci,{ariaLabel:"Features",items:a.map((e=>{const t=(e=>{if(!e.highlighted)return!1;if(!e.highlightedLocalStorageKey)return!0;try{return JSON.parse(u.get(e.highlightedLocalStorageKey)||"")}catch{return!0}})(e);return{icon:{type:e.iconType,src:e.iconSrc,width:"40px",height:"40px"},url:e.url,title:{name:e.title,size:"large",color:"white"},description:E?e.subtitle:null,highlight:t,openInNewTab:e.openInNewTab,badgeLabel:t?{children:`${trans("global.new")}!`}:void 0,onHover:e.highlightedLocalStorageKey&&t?()=>{u.set(e.highlightedLocalStorageKey||"",JSON.stringify(!1)),m(!d)}:void 0}})),clampDescriptionLinesTo:1,cssStyle:{display:"grid",gridTemplateColumns:"1fr 1fr",gridRowGap:"0.75rem"},itemCssStyle:{display:"flex"}})),h?r.createElement(Mn,{contentCssStyle:{padding:0,height:"100%"}},r.createElement(Si,Pi({},h,{timestamp:"string"==typeof h.timestamp?Number.parseInt(h.timestamp):h.timestamp,title:xi(h.title,i)}))):null,f.length>0?r.createElement(Mn,{contentCssStyle:{padding:"0.5rem",height:"calc(100% - 1rem)"}},r.createElement(Ci,{ariaLabel:"Recent Articles",items:f.map((e=>({icon:{type:"image",src:e.thumbnailUrl,width:"65px",height:"36px"},url:e.url,title:{name:xi(e.title,i),color:"white"},description:r.createElement(r.Fragment,null,e===p?"✨ ":"",e!==p&&e===g?"📌 ":"",moment(e.timestamp).fromNow())}))),wrapTitle:E,cssStyle:{display:"flex",flexDirection:"column",alignItems:"space-around",height:"100%",justifyContent:"space-around"},itemCssStyle:{display:"flex",flexGrow:1}})):null))))},SubscriptionMessageTile:()=>r.createElement(In,null,r.createElement("div",{className:"subscription-message-tile"},r.createElement("a",{href:"https://www.patreon.com/bePatron?u=674353",target:"_blank",rel:"noreferrer"},trans("accounts.subscribe_support_caption"))," ",trans("accounts.subscribe_support_details"))),GuildHeader:Hi,Footer:function(e){let{headerTitle:t,backgroundImageUrl:n,privacyPolicyUrl:a,careersUrl:l,latestArticles:i,toolLinks:s,raidLinks:o,ourWebsiteLinks:c,resourceLinks:u,copyrightText:d,twitterUrl:m,discordUrl:p,patreonUrl:g,pageWidth:h,extraSpaceUnderLogo:f,labels:b}=e;const{latestArticle:E,latestPinnedArticleTimestamp:v}=function(e){const t="string"==typeof e?JSON.parse(e):e;if(!t)return{latestArticle:null,latestPinnedArticleTimestamp:0};const[n]=t;return n?{latestArticle:n,latestPinnedArticleTimestamp:"string"==typeof n.timestamp?parseFloat(n.timestamp):n.timestamp}:{latestArticle:null,latestPinnedArticleTimestamp:0}}(i);return r.createElement("footer",{className:"footer footer--"+h},r.createElement(qe.ZP,{height:410,offset:300,style:{width:"100%"}},r.createElement("div",{className:"footer__background-image",style:{backgroundImage:"url("+n+")"}}),r.createElement("div",{className:"footer__top-part__wrapper"},r.createElement("div",{className:"footer__left-part__left"},r.createElement(ja,t),r.createElement("div",{className:"footer__left-part__links",style:{marginTop:f}},r.createElement("a",{href:"/help/contact"},b.contactUsText)," -"," ",r.createElement("a",{href:a},b.privacyPolicyText)," -"," ",r.createElement("a",{href:l},b.careersText)),r.createElement("div",{className:"footer__left-part__social-link"},r.createElement(Yi,{url:"https://twitter.com/"+m,kind:"twitter"}),r.createElement(Yi,{url:p,kind:"discord"}),r.createElement(Yi,{url:g,kind:"patreon"})),E?r.createElement("div",{className:"footer__left-part__article-wrapper"},r.createElement("a",{className:"footer__left-part__article-section-name",href:E.url},b.latestArticleText),r.createElement(Zi,{href:E.url,thumbnailUrl:E.thumbnailUrl,title:E.title,timestamp:v})):null),r.createElement("div",{className:"footer__right-part__links-wrapper"},r.createElement(Ji,{links:u,listTitle:b.resourcesListLabel}),r.createElement(Ji,{links:c,listTitle:b.websitesListLabel}),r.createElement(Ji,{links:o,listTitle:b.latestRaidListLabel}),r.createElement(Ji,{links:s,listTitle:b.toolsListLabel}))),r.createElement("div",{className:"footer__bottom-part"},d)))},MRAEntryPointTile:Os,MRACallToActionBanner:function(e){let{backgroundImageUrl:t,fallbackBackgroundImageUrl:n,featuredImageUrl:a,analyzeUrl:l}=e;return r.createElement("a",{href:l},r.createElement(In,{className:"mra-cta-banner",backgroundImage:{urls:[t,n],overlayStyle:Ps},padding:"narrow",contentCssStyle:{display:"grid",justifyContent:"center"}},r.createElement("div",{className:"mra-cta-banner__content"},r.createElement("div",{className:"mra-cta-banner__featured-image"},r.createElement("img",{src:a,alt:"Screenshot of multiple reports being analyzed together."})),r.createElement("div",{className:"mra-cta-banner__text-content"},r.createElement("div",{className:"mra-cta-banner__title"},trans("features.mra")),r.createElement("div",{className:"mra-cta-banner__description"},trans("reports.mra_description")),r.createElement("div",{className:"mra-cta-banner__action"},r.createElement(F,null,trans("reports.analyze_all_pulls")))))))},TalentTreeInline:_u,WipefestCallToAction:function(e){let{panelBackgroundUrl:t,reportCode:n,fightId:a,cutoff:l,isReportPrivate:i,isComingSoon:s,assetWipefestProductUrl:o,assetWipefestPrivateReportUrl:c,gameVersion:u}=e;return Y()?r.createElement("div",{className:"wipefest-cta__wrapper"},r.createElement("div",{className:"wipefest-cta__background",style:t?.length?{backgroundImage:`url(${t})`}:void 0}),r.createElement("div",{className:"wipefest-cta__content"},s?r.createElement("div",{className:"wipefest-cta__coming-soon"},trans("global.coming_soon")):r.createElement("div",{className:"wipefest-cta__title"},r.createElement("img",{src:"https://cdn.wipefest.gg/images/logo/logo-circle-30.png",alt:""}),r.createElement("div",null,"wipefest.gg")),r.createElement("div",{className:"wipefest-cta__subtitle"},trans("reports.wipefest_cta_subtitle")),r.createElement("div",{className:"wipefest-cta__text"},r.createElement(vn,null,trans("reports.wipefest_cta_text"))),s?null:i?r.createElement("div",{className:"wipefest-cta__report-private"},r.createElement("img",{className:"wipefest-cta__report-private-asset",src:c}),r.createElement("div",{className:"wipefest-cta__report-private-title"},trans("reports.wipefest_cta_report_private_title")),r.createElement("div",{className:"wipefest-cta__report-private-text"},r.createElement(vn,null,trans("reports.wipefest_cta_report_private_text")))):r.createElement(Tn,{href:ku(n,a,l,u),openInNewTab:!0,styles:["gradient-rounded"],className:"wipefest-cta__button"},trans("reports.wipefest_cta_button_title"))),r.createElement("img",{className:"wipefest-cta__ad-image",src:o,alt:""})):null},TalentTreeFull:Fu,Markdown:vn,UserNotifications:function(e){let{notifications:t}=e;const[n,a]=(0,r.useState)((()=>{try{const e=u.get(Vu);if(!e)return t;const n=new Set(JSON.parse(e));return t.filter((e=>!n.has(e.id)))}catch{return t}}));if(0===n.length)return null;const l=n[0];return r.createElement(Gr,null,r.createElement("div",{className:"user-notifications"},r.createElement(vn,{enhanced:!0,openLinksExternally:!0},l.markdown),r.createElement("div",{className:"user-notifications__actions"},r.createElement(F,{onClick:()=>{a((e=>e.slice(1))),(e=>{try{const t=u.get(Vu);u.set(Vu,JSON.stringify(t?[...JSON.parse(t),e]:[e]))}catch{}})(l.id)},styles:["link"]},trans("global.dismiss")))))},AdPlacement:Td,BuildsBanner:function(e){let{game:t,archonLogoUrl:n,left:a,right:l,renderContext:i}=e;return r.createElement(Z,{game:t},r.createElement("div",{className:`builds-banner builds-banner--${i}`},r.createElement(Id,{data:a,side:"left"}),r.createElement("a",{className:"builds-banner__center",href:`https://www.archon.gg/${t.archonGameSlug}`,target:"_blank",onClick:xd,onAuxClick:xd},r.createElement("img",{src:n,alt:""}),r.createElement(Sd,{fontSize:24,includeMargin:!1})),r.createElement(Id,{data:l,side:"right"})))},DiscordIntegrationTile:function(e){let{siteTitle:t,userConnections:n}=e;const a=Fa("discordIntegrationError"),l=Fa("discordIntegrationMessage"),i=n.find((e=>e.provider===Pd.Discord));return r.createElement(Pn,{className:"discord-integration-tile"},r.createElement("p",null,trans("accounts.discord_integration_description",{siteTitle:t})),r.createElement("div",{className:"discord-integration-tile__discord-section"},a?.length&&r.createElement(se,null,r.createElement("div",{className:"discord-integration-tile__integration-error"},r.createElement("h3",null,trans("global.something_went_wrong")),r.createElement("div",null,a))),l?.length&&r.createElement("div",{className:"discord-integration-tile__success-box"},r.createElement(hn,{markdown:l})),i?r.createElement("div",{className:"discord-integration-tile__linked-discord-container"},r.createElement("img",{width:40,height:40,src:i.avatar}),r.createElement("div",null,i.nickname),r.createElement(Tn,{href:"/oauth/discord/delete",styles:["primary"],className:"discord-integration-tile__disconnect-discord-button"},trans("accounts.disconnect"))):r.createElement(Tn,{styles:["primary"],href:"/oauth/discord/redirect",className:"discord-integration-tile__discord-button"},r.createElement("img",{src:"https://assets.rpglogs.com/img/social/discord.png",alt:"Discord",width:24,height:24}),r.createElement("div",null,trans("accounts.connect_with_discord")))))},AlchemicalSocietyCallToAction:function(e){let{featureImageUrl:t,subscribeButtonOnClick:n,featureDescriptionText:a,featureImageWidth:l}=e;const i=Y();return r.createElement("div",{className:"alchemical-society-call-to-action"},r.createElement("div",{className:"alchemical-society-call-to-action__container"},r.createElement("div",null,r.createElement("img",{className:"alchemical-society-call-to-action__logo",src:`${i?.assetServerBaseUrl}/img/subscriber/alchemical-society-with-decoration.png`,width:120,height:120,alt:""})),r.createElement("div",{className:"alchemical-society-call-to-action__text-container"},r.createElement(hn,{markdown:`\n${trans("accounts.become_an_alchemist_to_access")}\n\n${trans("accounts.alchemical_society_feature_cta_description")}\n\n${trans("accounts.alchemical_society_subscribe_cta")}\n`})),n?r.createElement(F,{onClick:n},trans("accounts.subscribe")):r.createElement(Tn,{openInNewTab:!0,href:"https://www.patreon.com/join/warcraftlogs"},trans("accounts.subscribe"))),t||a?r.createElement("div",{className:"alchemical-society-call-to-action__feature-container"},r.createElement("div",{className:"alchemical-society-call-to-action__feature-info"},t?r.createElement("img",{src:t,width:l,alt:""}):null,a?r.createElement("div",null,r.createElement(hn,{markdown:a})):null)):null)},AdminRecrawl:e=>{let{expansionsWithZonesAndEncounters:t,regions:n}=e;const a=Y(),l=t.map((e=>({value:e.expansionId,label:e.expansion}))),[i,s]=(0,r.useState)(l[0]??null),o=(0,r.useMemo)((()=>t.find((e=>e.expansionId===i.value))?.zones??[]),[t,i]),[c,u]=d("admin-recrawl.sessionId",Math.random().toString(36).substring(2)),[m,p]=d("admin-recrawl.zones",[]),[g,h]=d("admin-recrawl.encounters",[]),[f,b]=d("admin-recrawl.game-zone-id",0),[E,v]=d("admin-recrawl.is-kill",!0),[y,_]=d("admin-recrawl.include-private",!1),[w,k]=d("admin-recrawl.regions",[]),[N,T]=d("admin-recrawl.difficulties",[]),[C,S]=d("admin-recrawl.skipExport",!0),[I,x]=d("admin-recrawl.changeLogOptions",{type:"disabled",afterTimestamp:0,beforeTimestamp:0});(0,r.useEffect)((()=>{h([])}),[i]);const[P,R]=d("admin-recrawl.reportsAfter",Math.round((0,Zd.Z)(new Date,5).getTime()/1e3)),[A,L]=d("admin-recrawl.reportsBefore",Math.round((new Date).getTime()/1e3)),[$,O]=(0,r.useState)(void 0);(0,r.useEffect)((()=>{O((e=>({id:c,firstReportId:0,cursorReportId:e?.cursorReportId??0,lastReportId:0,expectedTotalReports:0,successCount:0,failedCount:0,difficulties:N,isKill:E,includePrivate:y,sizes:[],gameZoneId:f,regionIds:w.filter((e=>n.find((t=>t.id===e)))),zoneIds:[...m,...o.filter((e=>e.encounters.some((e=>g.includes(e.encounter_id))))).map((e=>e.zone.id))].filter(((e,t,n)=>n.indexOf(e)==t)),encounterIds:[...g,...o.filter((e=>m.includes(e.zone.id))).flatMap((e=>e.encounters.map((e=>e.encounter_id))))].filter(((e,t,n)=>n.indexOf(e)==t)),reportsAfter:P,reportsBefore:A,skipExport:C,stepProgressCount:0,averageProgress:0,queryTime:0,changeLogFilterType:I?.type,changeLogAfterTimestamp:I?.afterTimestamp,changeLogBeforeTimestamp:I?.beforeTimestamp})))}),[I?.afterTimestamp,I?.beforeTimestamp,I?.type,f,y,E,n,P,A,N,g,w,m,c,C,o]);const[{data:z,status:M},D,B]=$t(void 0),[V,q]=(0,r.useState)(!1),[{data:j,status:H},G,W]=$t(void 0);(0,r.useEffect)((()=>{B(),W()}),[c,$,B,W]),(0,r.useEffect)((()=>{void 0!==j&&V&&(j.cursorReportId>j.lastReportId?q(!1):G({url:"/admin/recrawl-process",method:"post",body:j,credentials:"include"}))}),[G,j]);const[K,Z]=(0,r.useState)(!1),J=!0===H.isLoading||V,X=[...new Set(o.flatMap((e=>e.difficulties.map((e=>e.id)))))].map((e=>o.flatMap((e=>e.difficulties)).find((t=>t.id===e)))).filter((e=>void 0!==e)).sort(((e,t)=>e.id-t.id));return r.createElement("div",null,r.createElement(Pn,null,r.createElement("h2",null,"Re-crawl Reports for ",a?.fullName),r.createElement(U,null,r.createElement(bs,{options:l,value:i,onChange:e=>e?s(e):null,isDisabled:J})),r.createElement(Pn,null,r.createElement("h3",null,"Encounters (Default None)"),o?o.map((e=>{let{zone:t,encounters:n}=e;return r.createElement("div",{key:t.id},r.createElement("h3",null,r.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem"}},r.createElement(Wd,{checked:m.includes(t.id),disabled:J,onChange:e=>{e.currentTarget.checked?p([...m,t.id]):p(m.filter((e=>e!==t.id)))}}),t.name)),r.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginLeft:"2rem"}},n.map((e=>r.createElement(U,{key:e.id},r.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem"}},r.createElement(Wd,{checked:g.includes(e.encounter_id)||m.includes(t.id),disabled:J||m.includes(t.id),onChange:t=>{t.currentTarget.checked?h([...g,e.encounter_id]):h(g.filter((t=>t!==e.encounter_id)))}}),r.createElement("span",null,e.name)))))))})):null),r.createElement(U,{gap:"large"},r.createElement(am,{label:"Reports After",timestamp:P,setTimestamp:R,isDisabled:J}),r.createElement(am,{label:"Reports Before",timestamp:A,setTimestamp:L,isDisabled:J}))),r.createElement(tm,{label:"Region (Default All)"},r.createElement(U,{gap:"content-padding"},n.map((e=>r.createElement("label",{key:e.id,style:{display:"flex",alignItems:"center",gap:"0.25rem"}},r.createElement(Wd,{checked:w.includes(e.id),disabled:J,onChange:t=>k(t.currentTarget.checked?[...w,e.id]:w.filter((t=>t!==e.id)))}),r.createElement("span",null,e.name)))))),r.createElement(tm,{label:"Difficulty (Default All)"},r.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"1em"}},X.map((e=>{let{id:t,name:n}=e;return r.createElement("label",{key:t,style:{display:"flex",alignItems:"center",gap:"0.25rem"}},r.createElement(Wd,{checked:N.includes(t),disabled:J,onChange:e=>T(e.currentTarget.checked?[...N,t]:N.filter((e=>e!==t)))}),r.createElement("span",null,n," (",t,")"))})))),r.createElement(nm,{label:"Game Zone ID",value:f,setValue:b,isDisabled:J}),r.createElement(nm,{label:"Cursor Override",value:$?.cursorReportId??z?.cursorReportId??0,setValue:e=>{O({...$,cursorReportId:e})},isDisabled:J}),r.createElement(tm,{label:"Changelog Filter"},r.createElement(Pn,null,r.createElement(bs,{options:rm,value:rm.find((e=>e.value===I.type)),isDisabled:V,onChange:e=>{e&&x({...I,type:e.value})}})),r.createElement(Pn,null,"disabled"===I.type?null:r.createElement(r.Fragment,null,r.createElement(am,{label:"Last Export After",isDisabled:V,timestamp:I.afterTimestamp,setTimestamp:e=>x({...I,afterTimestamp:e})}),r.createElement(am,{label:"Last Export Before",isDisabled:V,timestamp:I.beforeTimestamp,setTimestamp:e=>x({...I,beforeTimestamp:e})})))),r.createElement(tm,{label:"Only Kills"},r.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem"}},r.createElement(Wd,{checked:E,disabled:J,onChange:e=>v(e.currentTarget.checked)}))),r.createElement(tm,{label:"Include Private Reports"},r.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem"}},r.createElement(Wd,{checked:y,disabled:J,onChange:e=>_(e.currentTarget.checked)}))),r.createElement(tm,{label:"Skip Export"},r.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem"}},r.createElement(Wd,{checked:C,disabled:J,onChange:e=>S(e.currentTarget.checked)}))),r.createElement(tm,{label:"Show Debug"},r.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem"}},r.createElement(Wd,{checked:K,disabled:J,onChange:e=>Z(e.currentTarget.checked)}))),K?r.createElement("pre",null,JSON.stringify($,null,2)):null,K?r.createElement(tm,{label:"Session ID"},r.createElement("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem"}},r.createElement(F,{disabled:J,onClick:()=>u(Math.random().toString(36).substring(2))},"Reset"))):null,r.createElement("div",null,r.createElement("h3",null,"Estimate"),r.createElement(F,{disabled:M.isLoading||V||0===$?.zoneIds.length||0===$?.encounterIds.length,onClick:()=>D({url:"/admin/recrawl-prepare",method:"post",body:$,credentials:"include"}),style:{display:"flex",alignItems:"center",gap:"1rem"}},r.createElement("span",{className:`zmdi ${M.isLoading?"zmdi-refresh":"zmdi-play"} ${M.isLoading?"zmdi-hc-spin":""}`}),"Estimate"),r.createElement("dl",null,r.createElement("dt",null,"Reports to Process"),r.createElement("dd",null,z?z.expectedTotalReports:"---"),r.createElement("dt",null,"Query Time (ms)"),r.createElement("dd",null,z?z.queryTime:"---")),K?r.createElement("div",null,r.createElement("pre",null,JSON.stringify(z,null,2)),r.createElement("code",null,z?.debug?.query??"")):null),r.createElement("h3",null,"Process"),r.createElement(U,null,r.createElement(F,{disabled:null==j&&void 0===z||H.isLoading||V,onClick:()=>{q(!0),G({url:"/admin/recrawl-process",method:"post",body:j??z,credentials:"include"})},style:{display:"flex",alignItems:"center",gap:"1rem"}},r.createElement("span",{className:`zmdi ${V?"zmdi-refresh":"zmdi-play"} ${V&&H.isLoading?"zmdi-hc-spin":""}`}),"Start"),r.createElement(F,{disabled:!V,onClick:()=>q(!1)},"Stop"),r.createElement(F,{disabled:V,onClick:()=>{q(!1),W()}},"Reset")),r.createElement("progress",{style:{width:"100%"},value:j?j.successCount+j.failedCount:0,max:j?.expectedTotalReports??100}),r.createElement("table",{style:{width:"100%"}},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Export Success"),r.createElement("th",null,"Export Failed"),r.createElement("th",null,"Last Report ID"),r.createElement("th",null,"Last Progress"),r.createElement("th",null,"Average Progress"),r.createElement("th",null,"Total Processed"),r.createElement("th",null,"Last Query Time (ms)"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:{textAlign:"center"}},j?j.successCount:"---"),r.createElement("td",{style:{textAlign:"center"}},j?j.failedCount:"---"),r.createElement("td",{style:{textAlign:"center"}},j?j.cursorReportId:"---"),r.createElement("td",{style:{textAlign:"center"}},j?j.stepProgressCount:"---"),r.createElement("td",{style:{textAlign:"center"}},j?j.averageProgress:"---"),r.createElement("td",{style:{textAlign:"center"}},j?j.successCount+j.failedCount:"---"),r.createElement("td",{style:{textAlign:"center"}},j?j.queryTime:"---")))),K?r.createElement("pre",null,JSON.stringify(j,null,2)):null)}};let im=null;var sm=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!n.g.document)return;const u=()=>{document.querySelectorAll(e).forEach(((n,c)=>{if("string"==typeof t&&!(t=lm[t]))return void console.error(`Component type "${t}" not found in componentTypeMap.`);if(!l){const e=n.dataset.propsKey;e&&(l=window[e])}const u=`${e}-${c}`;if(!im){const e=document.createElement("div");e.id="attach-with-portals-root",document.body.prepend(e),im=(0,a.s)(e);let t=(0,r.createElement)(Hd),n=(0,r.createElement)(s||o.VK,null,t);im.render(n)}null!==n?window.attachWithPortals({key:u,element:n,ComponentType:t,props:l,context:i}):console.error(`Element not found for selector ${e}`)}))};return c&&"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{u()})):u(),()=>{document.querySelectorAll(e).forEach(((t,n)=>{null!==t&&window.detachWithPortals(`${e}-${n}`)}))}},om=n(27923),cm=n(49501),um="https://7179b9a9ce164f589c5164e28aae2880:9bef7bf206ee49f0ac96acc0eb765fb0@sentry.io/609878",dm="8d2ab09f4f8c6eba5a46e579ddca7157d4c451cc",mm="production";n(94301),om.S({dsn:um,release:dm,environment:mm,allowUrls:[/^https?:\/\/assets\.rpglogs\.com/i,/^https?:\/\/(([a-z.\-_]+)\.)?warcraftlogs\.com/,/^https?:\/\/(([a-z.\-_]+)\.)?fflogs\.com/i,/^https?:\/\/(([a-z.\-_]+)\.)?esologs\.com/i,/^https?:\/\/(([a-z.\-_]+)\.)?swtorlogs\.com/i],beforeSend(e){return e.extra?.isReactError?e:null},denyUrls:[/extensions\//i,/^chrome:\/\//i,/127\.0\.0\.1/i,/prebid.js/i]}),window.attachToDom=sm,window.sentry=cm,window.analytics={sendEvent:Ol};const pm=(0,r.createContext)(),gm=e=>{let{children:t}=e;const{user:n}=Dl(),[a,l]=(0,r.useState)((()=>{const e=u.get("currentUserCharacterId");return(e?n?.characters?.find((t=>t.id===parseInt(e))):null)??n?.characters?.[0]})());return(0,r.useEffect)((()=>{a?.id&&u.set("currentUserCharacterId",a.id)}),[a]),r.createElement(pm.Provider,{value:{character:a,setCharacter:l}},t)};gm.propTypes={children:i().node};var hm=()=>(0,r.useContext)(pm);const fm=e=>{let{children:t}=e;return r.createElement(B.SV,{beforeCapture:e=>{e.setTag("location","PageErrorBoundary"),e.setExtra("isReactError",!0)},fallback:r.createElement(In,{title:trans("global.page_error")},r.createElement(vn,null,trans("global.something_went_wrong_page")))},t)};fm.propTypes={children:i().node};var bm=fm;const Em=r.createContext(),vm=e=>{let{children:t}=e;const{user:n}=Dl(),[a,l]=(0,r.useState)((()=>{let e=u.get("currentUserGuildId"),t=e?n?.guilds?.find((t=>t.id===parseInt(e))):null;return t||(t=Vi(n)?n?.guilds?.filter((e=>e.isOfficer))?.[0]:n?.guilds?.[0]),t}));return(0,r.useEffect)((()=>{a?.id&&u.set("currentUserGuildId",a.id)}),[a]),r.createElement(Em.Provider,{value:{guild:a,setGuild:l}},t)};vm.propTypes={children:i().node};var ym=()=>(0,r.useContext)(Em);function _m(e){let{signedUrls:t,children:n}=e;return r.createElement(bm,null,r.createElement(It.Provider,{value:t},r.createElement(gm,null,r.createElement(vm,null,r.createElement(ca,null,n)))))}_m.propTypes={signedUrls:i().arrayOf(i().exact({originalUrl:i().string,signedUrl:i().string})),children:i().node.isRequired};var wm=_m;const km=e=>{let{averageItemLevel:t}=e;return t?r.createElement(c,null,r.createElement(vn,null,(n="round",a=t,l=-1,void 0===l||0==+l?Math[n](a):(a=+a,l=+l,isNaN(a)||"number"!=typeof l||l%1!=0?NaN:(a=a.toString().split("e"),+((a=(a=Math[n](+(a[0]+"e"+(a[1]?+a[1]-l:-l)))).toString().split("e"))[0]+"e"+(a[1]?+a[1]+l:l))))).toString())):null;var n,a,l},Nm=e=>{let{player:t,size:n,enableStreamIndicators:a,tooltip:l}=e;return r.createElement("div",{className:"compact-composition__actor-icon-for-player"},r.createElement(De,{type:t.fullType,bordered:!0,forceHeight:!0,alt:`${t.name} (${t.itemLevel})`,size:n,tooltip:l}),a&&t.streamChannel&&r.createElement("div",{className:"compact-composition-tooltip__player-icon__streaming-indicator"}))},Tm=e=>{let{player:t,enableTooltip:n,changeStreamHandler:a,size:l,enableStreamIndicators:i}=e;const s=(0,r.useMemo)((()=>n?{tooltipClassName:"compact-composition-tooltip",content:r.createElement(U,{gap:"tiny"},t.streamChannel&&r.createElement("div",{className:"compact-composition-tooltip__player-name"},trans("progress-race.watch")),r.createElement("div",{className:`${t.type} compact-composition-tooltip__player-name`},t.name),t.itemLevel&&r.createElement(c,null,t.itemLevel)),interactiveTrigger:Boolean(i&&t.streamChannel),triggerProps:{className:"compact-composition-tooltip__player-icon",onClick:()=>{t.streamChannel&&a?.(t.streamChannel)}}}:void 0),[a,i,n,t]);return r.createElement(Nm,{enableStreamIndicators:i,player:t,size:l,tooltip:s})},Cm=e=>{let{players:t,enableTooltips:n,changeStreamHandler:a,iconSize:l,enableStreamIndicators:i}=e;return r.createElement("div",{className:"compact-composition__evenly-spaced-players"},t.map((e=>r.createElement(Tm,{key:`${e.name}-${e.server}`,player:e,enableTooltip:n,changeStreamHandler:a,size:l,enableStreamIndicators:i}))))},Sm=e=>{let{roles:t,enableTooltips:n,align:a,averageItemLevel:l,guildAndCoachComponent:i,changeStreamHandler:s,iconSize:o,enableStreamIndicators:c}=e;return r.createElement(U,{gap:"content-padding",style:"right"===a?{justifyContent:"flex-end"}:{}},r.createElement(km,{averageItemLevel:l}),i,t.map((e=>r.createElement(U,{key:e.name,className:"compact-composition__role",gap:"small"},r.createElement(vn,{className:"compact-composition__role-label"},e.name+":"),r.createElement(U,{gap:"smaller",className:"compact-composition__role-players"},e.players.map((e=>r.createElement(Tm,{key:`${e.name}-${e.server}`,player:e,enableTooltip:n,changeStreamHandler:s,size:o,enableStreamIndicators:c}))))))))},Im=e=>{let{players:t,enableTooltips:n,iconSize:a,changeStreamHandler:l,enableStreamIndicators:i}=e;return r.createElement("div",{className:"compact-composition__bottom-row",style:{gridTemplateColumns:`minmax(${t.length*a}px, ${t.length*(a+10)}px)`}},r.createElement(Cm,{players:t,enableTooltips:n,changeStreamHandler:l,iconSize:a,enableStreamIndicators:i}))},xm=e=>{let{roles:t,enableTooltips:n,averageItemLevel:a,guildAndCoachComponent:l,changeStreamHandler:i,iconSize:s,breakThirdRoleIntoAnotherRow:o,enableStreamIndicators:c}=e;return r.createElement("div",{className:"compact-composition__two-rows"},r.createElement("div",{className:"compact-composition__top-row",style:{gridTemplateColumns:(a?"auto auto ":"")+(l?`minmax(${2*s}px, ${2*(s+10)}px) auto `:"")+`minmax(${t[0].players.length*s}px, ${t[0].players.length*(s+10)}px) auto minmax(${t[1].players.length*s}px, ${t[1].players.length*(s+10)}px)`}},a&&r.createElement(r.Fragment,null,r.createElement("div",{className:"compact-composition__item-level"},r.createElement(km,{averageItemLevel:a})),r.createElement("div",{className:"compact-composition__separator"})),!!l&&r.createElement(r.Fragment,null,l,r.createElement("div",{className:"compact-composition__separator"})),r.createElement(Cm,{players:t[0].players,enableTooltips:n,changeStreamHandler:i,iconSize:s,enableStreamIndicators:c}),r.createElement("div",{className:"compact-composition__separator"}),r.createElement(Cm,{players:t[1].players,enableTooltips:n,changeStreamHandler:i,iconSize:s,enableStreamIndicators:c})),o?r.createElement(r.Fragment,null,r.createElement(Im,{players:t[2].players.slice(0,t[2].players.length/2),enableTooltips:n,changeStreamHandler:i,iconSize:s,enableStreamIndicators:c}),r.createElement(Im,{players:t[2].players.slice(t[2].players.length/2,t[2].players.length),enableTooltips:n,changeStreamHandler:i,iconSize:s,enableStreamIndicators:c})):r.createElement(Im,{players:t[2].players,enableTooltips:n,changeStreamHandler:i,iconSize:s,enableStreamIndicators:c}))};var Pm=function(e){let{roles:t,enableTooltips:n=!0,enableStreamIndicators:a=!1,changeStreamHandler:l,guildAndCoachComponent:i,align:s="left",iconSize:o=20}=e;const c=Ja(t)??void 0,u=(0,r.useRef)(null),d=jn(u),m=80+80*t.length+(o+12)*Ya(t).length,p=e=>{a&&"function"==typeof l&&l(e)};return r.createElement("div",{ref:u,className:`compact-composition ${i?"compact-composition--with-guild-and-coach-streams":""} ${a?"compact-composition--show-stream-indicators":""}`},d.width>=m&&r.createElement(qe.ZP,{height:35,offset:100},r.createElement(Sm,{roles:t,enableTooltips:n,align:s,averageItemLevel:c,changeStreamHandler:p,guildAndCoachComponent:i,iconSize:o,enableStreamIndicators:a})),d.width<m&&t.length>2&&r.createElement(qe.ZP,{height:70,offset:100},r.createElement(xm,{align:s,roles:t,enableTooltips:n,averageItemLevel:c,changeStreamHandler:p,guildAndCoachComponent:i,iconSize:o,breakThirdRoleIntoAnotherRow:t[2].players.length*(o+12)>d.width,enableStreamIndicators:a})))};function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rm.apply(this,arguments)}const Am=e=>{let{guildLogoImageUrl:t,guildLogoImageFallbackUrl:n,guildLogoImageIsCustom:a}=e;return r.createElement("div",{className:"guild-progress-tile__guild-icon"},r.createElement(Ln,{url:t,fallbackUrl:n,isCustom:a}))};Am.propTypes={guildLogoImageUrl:yr.guildLogoImageUrl,guildLogoImageFallbackUrl:yr.guildLogoImageFallbackUrl,guildLogoImageIsCustom:yr.guildLogoImageIsCustom};const Lm=e=>{let{guildName:t,guildNameCssClass:n}=e;return r.createElement("div",{className:"guild-progress-tile__guild-name"},t,r.createElement("div",{className:`guild-progress-tile__guild-name-border ${n}`}))};Lm.propTypes={guildName:yr.guildName,guildNameCssClass:yr.guildNameCssClass};const $m=e=>{let{rank:t,rankCssClass:n}=e;return r.createElement("div",{className:"guild-progress-tile__rank"},r.createElement("span",{className:n},t))};$m.propTypes={rank:yr.rank,rankCssClass:yr.rankCssClass};const Om=e=>{let{url:t,children:n,asLink:a=!1,...l}=e;const i=(0,s.TH)();return a?r.createElement("a",Rm({href:t},l),n):r.createElement(o.rU,Rm({to:{pathname:t,search:i.search}},l),n)};Om.propTypes={url:i().string,asLink:i().bool,children:i().node};const zm=e=>{let{killedCount:t,bosses:n,isStreaming:a,twitchIconImageUrl:l,progressSuffix:i}=e;return r.createElement("div",{className:"guild-progress-tile__progress-container"},a&&r.createElement("div",{className:"guild-progress-tile__now-live-button"},r.createElement("div",{className:"guild-progress-tile__twitch-icon"},r.createElement("img",{src:l,alt:"Twitch icon"})),r.createElement("div",{className:"guild-progress-tile__now-live"},trans("progress-race.now_live"))),r.createElement("div",{className:"guild-progress-tile__progress"},r.createElement("div",{className:"guild-progress-tile__progress-title"},trans("global.progress")),t," / ",n.length,i?r.createElement("span",{className:"guild-progress-tile__difficulty_abbreviation"},` ${i}`):null))};zm.propTypes={killedCount:yr.killedCount,bosses:yr.bosses,isStreaming:yr.isStreaming,twitchIconImageUrl:yr.twitchIconImageUrl,progressSuffix:yr.progressSuffix};const Fm=e=>{let{currentBossName:t}=e;return r.createElement("div",{className:"guild-progress-tile__boss-name"},t)};Fm.propTypes={currentBossName:yr.currentBossName};const Mm=()=>r.createElement("div",{className:"guild-progress-tile__no-logged-progress-pulls"},trans("progress-race.no_logged_progress_pulls")),Dm=e=>{let{currentBossPercent:t,currentBossPercentForDisplay:n}=e;return r.createElement("div",{className:"guild-progress-tile__best-percent"},0===t?trans("progress-race.complete"):r.createElement(r.Fragment,null,trans("progress-race.best"),": ",n))};Dm.propTypes={currentBossPercent:yr.currentBossPercent,currentBossPercentForDisplay:yr.currentBossPercentForDisplay};const Um=e=>{let{currentBossPulls:t}=e;return r.createElement("div",{className:"guild-progress-tile__pulls"},trans("progress-race.pulls"),": ",t)};Um.propTypes={currentBossPulls:yr.currentBossPulls};const Bm=()=>r.createElement("div",{className:"guild-progress-tile__no-public-stats"},trans("progress-race.no_public_stats")),Vm=e=>{let{showStats:t,currentBossPulls:n,currentBossPercent:a,currentBossPercentForDisplay:l,showNoPullsText:i,showNoStatsText:s}=e;return t?0===n?i&&r.createElement(Mm,null):r.createElement(r.Fragment,null,r.createElement(Dm,{currentBossPercent:a,currentBossPercentForDisplay:l})," ",r.createElement(Um,{currentBossPulls:n})):s&&r.createElement(Bm,null)};function qm(e){let{rank:t,rankCssClass:n,guildId:a,guildName:l,guildNameCssClass:i,guildLogoImageUrl:o,guildLogoImageIsCustom:c,isStreaming:u,twitchIconImageUrl:d,bosses:m,currentBossName:p,showStats:g,currentBossPercent:h,currentBossPercentForDisplay:f,currentBossPulls:b,backgroundImageUrl:E,backgroundImageFallbackUrl:v,transparentImageUrl:y,killedCount:_,composition:w,baseSize:k,showNoPullsText:N=!0,showNoStatsText:T=!0,guildLogoImageFallbackUrl:C=null,progressSuffix:S="",zoneIdLabel:I,competitionId:x,isTransparent:P,showTopLeft:R=!0,showTopRight:A=!0,showBottomLeft:L=!0,showBottomRight:$=!0}=e;const{zoneIdLabel:O}=(0,s.UO)(),z=`/zone/race/${I??O}/guild/${a}${x?`?competition=${x}`:""}`,F=[];P?F.push(y):(F.push(E),E!==v&&F.push(v));const M={className:"guild-progress-tile "+(P?"guild-progress-tile--transparent":"guild-progress-tile--not-transparent"),style:{backgroundImage:F.map((e=>`url(${e})`))}},D=r.createRef();return(0,r.useEffect)((()=>{k&&D.current.style.setProperty("--guild-progress-tile-base-size",k+"px")}),[D,k]),r.createElement("div",null,r.createElement(Om,Rm({url:z},M,{asLink:void 0!==I}),r.createElement("div",{ref:D,className:"guild-progress-tile__container guild-progress-tile__container"+(P?"--transparent":"--not-transparent")},r.createElement("div",{className:"guild-progress-tile__top"},r.createElement("div",{className:"guild-progress-tile__top-left",style:{visibility:R?void 0:"hidden"}},(!!o||!!C)&&r.createElement(Am,{guildLogoImageUrl:o,guildLogoImageFallbackUrl:C??o,guildLogoImageIsCustom:c}),r.createElement(Lm,{guildName:l,guildNameCssClass:i})),r.createElement("div",{className:"guild-progress-tile__top-right",style:{visibility:A?void 0:"hidden"}},t?r.createElement($m,{rank:t,rankCssClass:n}):r.createElement("div",{className:"guild-progress-tile__site-logo"},r.createElement(no,{size:Math.min(64,64*k/25)})))),r.createElement("div",{className:"guild-progress-tile__bottom"},r.createElement("div",{className:"guild-progress-tile__bottom-left",style:{visibility:L?void 0:"hidden"}},r.createElement(zm,{killedCount:_,bosses:m,isStreaming:u,twitchIconImageUrl:d,progressSuffix:S})),r.createElement("div",{className:"guild-progress-tile__bottom-right",style:{visibility:$?void 0:"hidden"}},p?.length>0&&r.createElement(Fm,{currentBossName:p}),r.createElement(Vm,{showStats:g,currentBossPulls:b,currentBossPercent:h,currentBossPercentForDisplay:f,showNoPullsText:N,showNoStatsText:T}))))),w&&r.createElement(Mn,{className:"guild-progress-tile__composition",padding:"narrow",cssStyle:{borderTop:0}},r.createElement(Pm,{roles:w.roles})))}Vm.propTypes={showStats:yr.showStats,currentBossPulls:yr.currentBossPulls,currentBossPercent:yr.currentBossPercent,currentBossPercentForDisplay:yr.currentBossPercentForDisplay,showNoPullsText:yr.showNoPullsText,showNoStatsText:yr.showNoStatsText},qm.propTypes={...yr,zoneIdLabel:i().string,competitionId:i().number,isTransparent:i().bool,showTopLeft:i().bool,showTopRight:i().bool,showBottomLeft:i().bool,showBottomRight:i().bool};var jm=qm;function Hm(e){let{messageKey:t,replacements:n,messageTransformer:a}=e;const l=trans(t),i=l.match(/:[a-zA-Z]+/g)??[],s=[];let o="";for(let e=0;e<l.length;e++){o+=l.charAt(e);const t=i.find((e=>o.includes(e)));if(t){const e=o.length-t.length,r=[o.substr(0,e),o.substr(e)];r[0]&&s.push(a?a(r[0]):r[0]),s.push(n[r[1].substr(1)]),o=""}}return o.length&&s.push(a?a(o):o),r.createElement(r.Fragment,null,s.map(((e,t)=>r.createElement(r.Fragment,{key:t},e))))}Hm.propTypes={messageKey:i().string.isRequired,replacements:i().object,messageTransformer:i().func};var Gm=Hm,Wm=function(){return r.createElement("span",{className:"streaming-now-indicator"})};function Km(e){let{children:t,to:n,className:a,style:l,enable:i,asLink:s}=e;return i?s?r.createElement("a",{href:n.pathname+(n.search?"?"+n.search:"")},t):r.createElement(o.rU,{to:n,className:a,style:l},t):r.createElement("span",{className:a,style:l},t)}Km.propTypes={children:i().node,to:i().object,className:i().string,style:i().object,enable:i().bool,asLink:i().bool};var Zm=Km;function Ym(e){let{lines:t,guilds:n,encounters:a,enableLinks:l=!0,linksShouldBeRouteLinks:o=!0,showViewMoreButton:c=!0,showPinIcons:u=!0,zoneIdLabel:d,initialMaxUpdatesToShow:m=7}=e;const{zoneIdLabel:p}=(0,s.UO)(),g=(0,s.TH)(),[h,f]=(0,r.useState)(m),b=n.map((e=>{const t=e.streamChannel?r.createElement(Wm,null):null,n=t=>{let{children:n}=t;return e.isInRace?r.createElement(Zm,{to:{pathname:`/zone/race/${d??p}/guild/${e.id}`,search:g.search},enable:l,asLink:!o},n):l?r.createElement("a",{href:`/guild/progress/${e.id}`},n):n};return n.propTypes={children:i().node},{id:e.id,component:r.createElement(n,null,r.createElement("span",{className:e.nameCssClass},r.createElement(Ln,{url:e.logoImageUrl,fallbackUrl:e.logoImageFallbackUrl,alt:`${e.name} logo`,logoImgClassName:"latest-progress-updates__line-image",isCustom:e.logoImageIsCustom})," ",e.name,t))}})),E=a.map((e=>({id:e.id,component:r.createElement(Zm,{to:{pathname:`/zone/race/${d??p}/encounter/${e.id}`,search:g.search},enable:l,asLink:!o},r.createElement("span",null,r.createElement("img",{src:e.iconUrl,alt:`${e.name} icon`,className:"latest-progress-updates__line-image latest-progress-updates__line-image--encounter-icon"})," ",r.createElement("span",{className:"latest-progress-updates__line-encounter-name"},e.name)))})));return r.createElement("div",{className:"latest-progress-updates"},r.createElement("div",{className:"latest-progress-updates__lines"},t.slice(0,h).map(((e,n)=>{const a=new Date(e.timestamp);let l;switch(e.type){case"guildDefeatsEncounter":l=()=>r.createElement(Jm,{line:e,index:n,guildComponents:b,encounterComponents:E});break;case"custom":l=()=>r.createElement(Xm,{line:e,index:n,guildComponents:b,encounterComponents:E});break;default:l=null}return r.createElement(r.Fragment,{key:`${e.guildId}-${e.timestamp}`},e.pinned&&0===n&&t.length>0?r.createElement("div",{className:"latest-progress-updates__pinned-line"},u&&r.createElement("div",null,"📌"),r.createElement(l,null),u&&r.createElement("div",null,"📌")):r.createElement(r.Fragment,null,r.createElement("div",{className:"latest-progress-updates__line-timestamp"},moment(a).format("ll LT")),r.createElement(l,null)))}))),c&&h!==Number.MAX_VALUE&&h<t.length&&r.createElement("div",{className:"latest-progress-updates__view-more"},r.createElement(F,{onClick:()=>f(Number.MAX_VALUE),styles:["link"]},trans("rankings.view_more"))))}Ym.propTypes={...vr.lines,...vr.guilds,...vr.encounters,enableLinks:i().bool,linksShouldBeRouteLinks:i().bool,showViewMoreButton:i().bool,showPinIcons:i().bool,initialMaxUpdatesToShow:i().number};const Jm=e=>{let{line:t,index:n,guildComponents:a,encounterComponents:l}=e;const i=a.find((e=>e.id===t.guildId));if(!i)return null;const s=i.component,o=l.find((e=>e.id===t.encounterId)).component,c=t.pullCount,u=r.createElement("span",{className:`latest-progress-updates__line-rank ${t.rankCssClass}`},t.rank);let d="guild_defeats_encounter";return c&&(d="guild_defeats_encounter_after_pull_count"),u&&t.finishedTheRaceOnThisEncounter&&(d="guild_defeats_encounter_and_finishes_race"),u&&c&&t.finishedTheRaceOnThisEncounter&&(d="guild_defeats_encounter_after_pull_count_and_finishes_race"),r.createElement("div",{className:t.pinned&&0===n?"":"latest-progress-updates__line"},r.createElement(Gm,{messageKey:`progress-race.${d}`,replacements:{guild:s,encounter:o,pullCount:c,rank:u}}))};Jm.propTypes={line:hr,index:i().number.isRequired,guildComponents:i().arrayOf(i().exact({id:i().number,component:i().node})),encounterComponents:i().arrayOf(i().exact({id:i().number,component:i().node}))};const Xm=e=>{let{line:t,index:n,guildComponents:a,encounterComponents:l}=e;const i={Guild:function(e){let{id:t,name:n}=e;return a.find((e=>e.id===parseInt(t)))?.component??n??null},Encounter:function(e){let{id:t,name:n}=e;return l.find((e=>e.id===parseInt(t)))?.component??n??null}};return r.createElement("div",{className:t.pinned&&0===n?"":"latest-progress-updates__line"},r.createElement(vn,{enhanced:!0,enhancedOverrides:i},t.body))};Xm.propTypes={line:i().object,index:i().number.isRequired,guildComponents:i().arrayOf(i().exact({id:i().number,component:i().node})),encounterComponents:i().arrayOf(i().exact({id:i().number,component:i().node}))};var Qm=Ym;function ep(e){let{pubName:t,widgetNumber:n,fixed:a=!1}=e;return(0,r.useEffect)((()=>{const e=document.createElement("script");e.id="lre-player-widget",e.src="https://player.anyclip.com/anyclip-widget/lre-widget/prod/v1/src/lre.js",e.setAttribute("pubname",t),e.setAttribute("widgetname",`0011r0000294FlV_${n}`);const a=document.getElementById("ac-lre-player-ph");1===a.childElementCount&&a.append(e)}),[t,n]),r.createElement("div",{className:"any-clip "+(a?"any-clip--fixed":"")},r.createElement("div",{id:"ac-lre-player-ph",className:"anyclip-video"},r.createElement("div",{id:"ac-lre-player"})))}ep.propTypes={pubName:i().string.isRequired,widgetNumber:i().number.isRequired,fixed:i().bool.isRequired};var tp=ep;function np(e,t){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.useEffect;const[a,l]=(0,r.useState)(t(e));return n((()=>{l(t(e))}),[t,e]),[a,l]}(e,t,r.useLayoutEffect)}function ap(e){let{height:t,scrollbarOptions:n,children:a}=e;n={theme:"light-thin",scrollButtons:{enable:!0},scrollInertia:60,normalizeWheelDelta:!0,...n};const l=(0,r.createRef)();return(0,r.useEffect)((()=>{t&&$(l.current).mCustomScrollbar(n)}),[l,t,n]),r.createElement("div",{ref:l,className:"scrollable-content",style:{height:t}},a)}ap.propTypes={height:i().number,scrollbarOptions:i().object,children:i().node};var rp=ap;function lp(){return lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lp.apply(this,arguments)}function ip(e){let{latestProgressUpdates:t,anyClip:n,enableLinks:a=!0,guildId:l,encounterId:i,heightOverride:s,initialMaxUpdatesToShow:o=7}=e;const[c,u]=(0,r.useState)(t.lines),[d]=np(null,(0,r.useCallback)((()=>c.find((e=>e.pinned))),[c])),m=s??206,[p,g]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(!p)return void u(t.lines);let e=[...t.lines];l&&(e=e.filter((e=>e.guildId===l||e.guildIds?.includes(l)))),i&&(e=e.filter((e=>e.encounterId===i||e.encounterIds?.includes(i)))),u(e)}),[p,t,l,i]),r.createElement("div",{className:"latest-progress-updates-tile "+(n?"latest-progress-updates-tile--with-ad":"")},r.createElement(In,{title:trans("progress-race.latest_updates"),padding:"narrow",className:"latest-progress-updates-tile__latest-updates-content",actions:l||i?[{icon:p?"check-circle":"circle-o",label:l?trans("progress-race.show_guild_updates_only"):trans("progress-race.show_encounter_updates_only"),onClick:()=>g((e=>!e))}]:[]},r.createElement(r.Fragment,null,d&&r.createElement(Qm,lp({},t,{lines:[d],enableLinks:a})),r.createElement(rp,{height:d?m-36:m},r.createElement(Qm,lp({},t,{lines:c.filter(((e,t)=>0!==t||e!==d)).map((e=>({...e,pinned:!1}))),enableLinks:a,initialMaxUpdatesToShow:o}))))),n&&r.createElement(tp,n))}ip.propTypes={latestProgressUpdates:vr.isRequired,anyClip:i().object,enableLinks:i().bool,guildId:i().number,encounterId:i().number,heightOverride:i().number,initialMaxUpdatesToShow:i().number};var sp=ip;const op=r.createContext(),cp=e=>{let{children:t,navigation:n}=e;const[a,l]=(0,r.useState)(n);return r.createElement(op.Provider,{value:{navigation:a,setNavigation:l,updateTopLevelNavigationDisplayLabel:(e,t)=>{if(!e)return;const a=n.items.find((t=>t.id===e));a?.displayLabel!==t&&(a.displayLabel=t,l({...n}))},resetTopLevelNavigationDisplayLabel:e=>{if(!e)return;const t=n.items.find((t=>t.id===e));t?.displayLabel!==t?.label&&(t.displayLabel=t.label,l({...n}))}}},t)};cp.propTypes={children:i().node,navigation:i().shape(E.propTypes).isRequired};var up=()=>{const e=(0,r.useContext)(op);if(void 0===e)throw new Error("useNavigation must be used within a NavigationContext");return e};function dp(e){let{encounterNumber:t,numberOfEncounters:n}=e;return r.createElement(r.Fragment,null,r.createElement("span",{className:"progress-line__label-x"},t),r.createElement("span",{className:"progress-line__label-out-of-y"},"/",n))}function mp(e){let{phase:t,sizePerCell:n}=e;const a=n>120;return r.createElement("div",{className:"progress-line__phase-label-container "+(n<160?"progress-line__phase-label-container--small":"")},a?r.createElement(r.Fragment,null,r.createElement("span",{className:"progress-line__label-x"},t.fullPhaseLabel),n>150?r.createElement("span",{className:"progress-line__phase-name-label"},t.name):null):r.createElement(Re,{tooltipClassName:"progress-line-tooltip",content:r.createElement("div",{className:"progress-line-tooltip__phase-label-container"},r.createElement("span",null,t.fullPhaseLabel),r.createElement("span",null,t.name))},r.createElement("span",{className:"progress-line__label-x"},t.shortPhaseLabel)))}function pp(e){let{sizePerCell:t}=e;return r.createElement("div",{className:"progress-line__killed-label "+(t<160?"progress-line__killed-label--small":"")},r.createElement("span",{className:"progress-line__label-x"},trans("progress-race.complete")))}const gp=e=>{let{guild:t,zoneIdLabel:n,zoneIdLabelParam:a,competitionId:l}=e;return r.createElement("div",{className:"progress-line__guild"},r.createElement(Om,{url:`/zone/race/${n??a}/guild/${t.id}${l?`?competition=${l}`:""}`,asLink:void 0!==n,className:"progress-line__guild-link"},t.rank&&r.createElement("div",{className:"progress-line__guild-link-rank"},r.createElement("span",{className:t.rankCssClass},t.rank),"."),r.createElement("span",{className:`progress-line__guild-link-name faction-${t.faction}`},t.name,t.streamChannel?r.createElement(Wm,null):"")))};var hp=function(e){let{guilds:t,maximumNumberOfCells:n,zoneIdLabel:a,competitionId:l,encounters:i}=e;const o=(0,r.useRef)(null),c=jn(o),{zoneIdLabel:u}=(0,s.UO)(),d=t.at(0)?.encounters.at(0)?.id,m=(0,r.useMemo)((()=>i?i.find((e=>e.id===d)):void 0),[d,i]);if(!t?.[0]?.encounters?.length)return null;const p=t[0].encounters.length;let g=p,h=[];const f=p>1||!i||!i.some((e=>e.id===t[0].encounters[0].id&&e.phases?.length>0));let b,E,v=0;if(f){b=t[0].encounters.map(((e,t)=>r.createElement(dp,{encounterNumber:t+1,numberOfEncounters:p,key:t})));const e=t.some((e=>0===e.killedCount));e&&b.unshift(r.createElement(dp,{encounterNumber:0,numberOfEncounters:p,key:-1})),v=Math.max(...t.map((e=>e.killedCount)))+Number(e),g+=Number(e),E=function(e,t){return Object.fromEntries(e.map((e=>[e.id,e.killedCount+Number(t)])))}(t,e)}else{h=m?function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,a=0;return e.map((e=>{const r=e.isIntermission?++a:++n;return{...e,fullPhaseLabel:`${trans("global."+(e.isIntermission?"intermission":"phase"))} ${r}`,shortPhaseLabel:`${e.isIntermission?t?"i":"I":"P"}${r}`}}))}(m.phases):[];const e=h.length;E=function(e,t){return Object.fromEntries(e.map((e=>[e.id,e.encounters[0].isKilled?t.length+1:Math.min((e.encounters[0].bestPhaseIndex??0)+1,t.length)])))}(t,h);const a=t.some((e=>e.encounters[0].isKilled));g=a?e+1:e;const l=c.width/(n||g);v=a?g:Math.min(e,Math.max(...t.map((e=>(e.encounters[0].bestPhaseIndex??0)+1)))),b=[...h.map(((e,t)=>r.createElement(mp,{key:t,phase:e,sizePerCell:l}))),a?r.createElement(pp,{key:e,sizePerCell:l}):null]}const y=n?Math.max(0,v-n):0,_=(n?Math.min(g,v):g)-1;return r.createElement("div",{className:"progress-line",ref:o},r.createElement("div",{className:"progress-line__grid",style:{gridTemplateColumns:`repeat(${_-y+1}, minmax(0, 1fr))`}},b.map(((e,t)=>t>=y&&t<=_&&r.createElement("div",{key:t,className:"progress-line__label\n                  "+(v<t+1?"progress-line__label--not-reached":"")},e))),b.map(((e,t)=>t>=y&&t<=_&&r.createElement("div",{key:t,className:`progress-line__cell ${v<t+1?"progress-line__cell--not-reached":""} ${0===t?"progress-line__cell--first":""} ${t+1===g?"progress-line__cell--last":""}`}))),b.map(((e,n)=>n>=y&&n<=_&&r.createElement("div",{key:n,className:"progress-line__guilds"},t.filter((e=>E[e.id]===n+1)).map((e=>r.createElement(gp,{key:e.id,guild:e,competitionId:l,zoneIdLabel:a,zoneIdLabelParam:u}))))))),r.createElement("div",{className:"progress-line__list"},t.map((e=>r.createElement(r.Fragment,{key:e.id},r.createElement(gp,{guild:e,competitionId:l,zoneIdLabel:a,zoneIdLabelParam:u}),r.createElement("div",{className:"progress-line__list-label"},((e,t,n,a)=>{if(e)return`${t.killedCount}/${n}`;{if(t.killedCount>0)return trans("progress-race.complete");const e=t.encounters[0]?.bestPercentForDisplay,n=t.encounters[0].bestPhaseIndex;return e||a.find((e=>n===e.index))?.shortPhaseLabel}})(f,e,p,h)))))))};function fp(e){let{backgroundImageUrl:t,guilds:n,maximumNumberOfCells:a,zoneIdLabel:l,competitionId:i,encounters:s}=e;return r.createElement("div",{className:"progress-line-tile",style:{backgroundImage:`url('${t}')`}},r.createElement(hp,{zoneIdLabel:l,competitionId:i,guilds:n,maximumNumberOfCells:a,encounters:s}))}fp.propTypes={backgroundImageUrl:i().string.isRequired,guilds:i().arrayOf(mr),maximumNumberOfCells:i().number,zoneIdLabel:i().string,competitionId:i().number,encounters:i().arrayOf(gr)};var bp=fp;function Ep(e){let{children:t,className:n=""}=e;return r.createElement("table",{className:`dark-gray-striped-table ${n}`},t)}Ep.propTypes={children:i().node.isRequired,className:i().string};var vp=Ep;function yp(e,t,n){if(!e.isKilled||!e.perPull)return null;if(0===e.perPull.length)return"hidden";if("duration"===n){const t=e.perPull[e.perPull.length-1]?.duration;return t??null}if("timeSinceFirstFightStart"===n){const n=t.encounters.flatMap((e=>e.perPull??[]));if(0===n.length)return null;const a=n.sort(((e,t)=>e.startTime-t.startTime))[0].startTime,r=e.perPull[e.perPull.length-1]?.endTime;return r?r-a:null}return null}function _p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null===e?null:"hidden"===e?r.createElement("em",null,"Hidden"):function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&e>0?"+":"",n=Math.floor(e/1e3),a=Math.floor(n/60),r=n-60*a;if(a<60)return`${t}${a}:${1===r.toString().length?"0":""}${r}`;const l=Math.floor(a/60),i=a-60*l;return`${t}${l}:${1===i.toString().length?"0":""}${i}:${1===r.toString().length?"0":""}${r}`}(e,t)}var wp=function(e){let{guilds:t,style:n="default",metric:a="duration",encounterOrder:l=null,includeDifference:i=!1,includeDifferenceEncounterIcons:s=!1,highlightLastKilledEncounter:o=!1,fullHeight:c=!1}=e,u=function(e){const[t,n]=(0,r.useState)(e);return(0,r.useEffect)((()=>{t!==e&&n(e.map(function(e){return t=>{const n=e.find((e=>e.id===t.id));return n?{...t,killedCount:Math.max(t.killedCount,n.killedCount),encounters:t.encounters.map((e=>{const t=n.encounters.find((t=>t.id===e.id));if(!t)return e;let a=e.perPull;return a?t.perPull&&a.length<t.perPull.length&&(a=t.perPull):a=t.perPull,{...e,isKilled:e.isKilled||t.isKilled,pullCount:Math.max(e.pullCount,t.pullCount),killedAtTimestamp:e.killedAtTimestamp??t.killedAtTimestamp,bestPercent:Math.min(e.bestPercent,t.bestPercent),perPull:a}}))}:t}}(t)))}),[e]),t}(t);if(!u.length)return null;l&&(u=u.map((e=>({...e,encounters:e.encounters.sort(((e,t)=>l.indexOf(e.id)-l.indexOf(t.id)))}))));const d=`calc(100% / ${u[0].encounters.length+1})`,m=1===u.length;return r.createElement(vp,{className:`encounter-progress-duration-table encounter-progress-duration-table--${n} ${c?"encounter-progress-duration-table--full-height":""}`},r.createElement("thead",null,r.createElement("tr",null,!m&&r.createElement("th",{className:"encounter-progress-duration-table__site-logo"},r.createElement(no,{size:48})),u[0].encounters.map((e=>r.createElement("th",{key:e.id,className:"encounter-progress-duration-table__encounter-header",style:{backgroundImage:`url('${e.transparentImageUrl}')`,width:d,height:m?"48px":void 0}},r.createElement("span",{className:"encounter-progress-duration-table__encounter-name"},e.shortName)))))),r.createElement("tbody",null,u.map((e=>r.createElement("tr",{key:e.id,className:"encounter-progress-duration-table__table-row"},!m&&r.createElement("td",{className:"encounter-progress-duration-table__guild-cell"},r.createElement("div",{className:"encounter-progress-duration-table__guild-logo"},r.createElement(Ln,{size:48,url:e.logoImageUrl,fallbackUrl:e.logoImageFallbackUrl,isCustom:e.logoImageIsCustom})),r.createElement(Qe,{level:4,className:"encounter-progress-duration-table__guild-name"},e.name)),e.encounters.map((t=>r.createElement("td",{key:t.id,className:"encounter-progress-duration-table__duration"},r.createElement("div",{className:ht()({"encounter-progress-duration-table__duration-content":!0,"encounter-progress-duration-table__duration-content--highlight":o&&null!==t.killedAtTimestamp&&t.killedAtTimestamp===e.lastKillTime})},r.createElement("div",{className:"encounter-progress-duration-table__value"},_p(yp(t,e,a))),i?function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.killedAtTimestamp)return null;const l=t.encounters.filter((t=>t.killedAtTimestamp&&t.killedAtTimestamp<(e.killedAtTimestamp??0))).sort(((e,t)=>(t.killedAtTimestamp??0)-(e.killedAtTimestamp??0)))[0];if(!l)return null;const i=yp(e,t,n),s=yp(l,t,n);if(null===i||"hidden"===i||null===s||"hidden"===s)return null;const o=i-s;return r.createElement(r.Fragment,null,a&&r.createElement("div",{className:"encounter-progress-duration-table__prev-and-current-icons"},r.createElement(Yt,{id:l.id,bordered:!0,rounded:!1})," ","→ ",r.createElement(Yt,{id:e.id,bordered:!0,rounded:!1})),r.createElement("div",{className:"encounter-progress-duration-table__difference"},_p(o,!0)))}(t,e,a,s):null)))))))))};function kp(e){let{guilds:t}=e;return r.createElement(In,{padding:"narrow",className:"encounter-progress-duration-table-tile"},r.createElement(wp,{guilds:t,metric:"timeSinceFirstFightStart",includeDifference:!0,encounterOrder:[1030,1032,1028,1029,1035,1034,1027,1024,1023,1022,1025,1026]}))}var Np=e=>{let{className:t="",position:n="default",children:a}=e;return r.createElement("div",{className:`react-sidebar react-sidebar__${n} ${t}`},a)},Tp=function(e){let{children:t}=e;const n=(0,r.useRef)(null),a=(0,r.useContext)(Ad),{isAvailable:l}=Ku(),{isAvailable:i}=md(),s=l||i;return r.createElement("div",{className:"content-and-ads"+(s?" content-and-ads--with-ads":"")},r.createElement("div",{className:"content-and-ads__content"},t),s&&r.createElement(Np,{className:"content-and-ads__ads",position:"sticky"},r.createElement("div",{ref:n},r.createElement(Pn,null,void 0!==a.sideRailWide?r.createElement(Td,a.sideRailWide):null))))},Cp=function(e,t,n,a){const{progressRace:l,progressRaceStatus:i}=Ba(),[{data:s,status:o},c]=$t();t=ys("timeMachineCompetition",t);const u=new URLSearchParams({competition:e.toString()});l&&(u.set("difficulty",l.difficulty.toString()),u.set("size",l.size.toString())),n&&u.set("startingRank",n.toString()),a&&u.set("numberOfGuilds",a.toString());const d=l&&t?`/zone/race/content/${l.zoneId}/time-machine/${t}?${u.toString()}`:null;return(0,r.useEffect)((()=>{d&&i.isSuccess&&c(d)}),[c,d,i]),{timeMachine:s,timeMachineStatus:o.isIdle&&i.isLoading?i:o}};function Sp(){return Sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sp.apply(this,arguments)}function Ip(e){let{title:t,guilds:n,numberOfEncounters:a,openLinksExternally:l}=e;return r.createElement("div",{className:"time-machine-competition-summary__before"},r.createElement("div",{className:"time-machine-competition-summary__before-title"},t),n.map(((e,t)=>r.createElement(Pp,Sp({key:e.id},e,{currentEncounter:{...e.currentEncounter,previousPullCount:null,previousBestPercentForDisplay:null},numberOfEncounters:a,isFirst:0===t,enableTooltips:!1,openLinksExternally:l})))))}function xp(e){let{title:t,guilds:n,numberOfEncounters:a,enableTooltips:l,openLinksExternally:i,lastTimePeriodLabel:s}=e;const o=a>1;return r.createElement("div",{className:"time-machine-competition-summary__now"},r.createElement("div",{className:"time-machine-competition-summary__now-title "+(o?"":"time-machine-competition-summary__now-title--with-bottom-margin")},t),r.createElement("div",{className:"time-machine-competition-summary__guilds-and-recent-kills "+(o?"":"time-machine-competition-summary__guilds-and-recent-kills--single-column")},r.createElement("div",null),o&&r.createElement("div",{className:"time-machine-competition-summary__recent-kills-title"},trans("progress-race.recent_kills")),n.map(((e,t)=>r.createElement(r.Fragment,{key:e.id},r.createElement(Pp,Sp({},e,{numberOfEncounters:a,isFirst:0===t,enableTooltips:l,openLinksExternally:i,lastTimePeriodLabel:s})),o&&r.createElement(Rp,{recentKills:e.recentKills,enableTooltips:l,openLinksExternally:i,lastTimePeriodLabel:s}))))))}function Pp(e){let{id:t,rank:n,previousRank:a,killedCount:l,name:i,currentEncounter:s,numberOfEncounters:o,isFirst:c,enableTooltips:u,openLinksExternally:d,lastTimePeriodLabel:m}=e;const{shortName:p,bestPercentForDisplay:g,previousBestPercentForDisplay:h,pullCount:f,previousPullCount:b,backgroundImageUrl:E,backgroundImageFallbackUrl:v,transparentImageUrl:y}=s,_=[E,v].map((e=>`url(${e})`)).join(", ");let w=null;if(null===a)w="++";else if(void 0!==a&&a!==n){const e=a-n;w=`${e>0?"+":""}${e}`}let k=trans("progress-race.hiding_stats");g&&f&&(k=`${g} (${f})`);const N=r.createElement("div",{style:{position:"relative"}},r.createElement(Dr,{href:`/zone/race/latest/guild/${t}`,openInNewTab:d}),r.createElement("div",{className:"time-machine-competition-summary__guild "+(c?"time-machine-competition-summary__guild--first":""),style:{backgroundImage:_}},r.createElement("div",{className:"time-machine-competition-summary__guild-background-overlay"}),r.createElement("div",{className:"time-machine-competition-summary__guild-content"},r.createElement("div",{className:"time-machine-competition-summary__guild-rank-and-name"},r.createElement("div",{className:"time-machine-competition-summary__guild-rank"},"#",n," - ",l,"/",o),r.createElement("div",{className:"time-machine-competition-summary__guild-name"},w&&r.createElement(r.Fragment,null,r.createElement("span",{className:"time-machine-competition-summary__rank-difference "+(w.includes("-")?"time-machine-competition-summary__rank-difference--negative":"time-machine-competition-summary__rank-difference--positive")},w)," "),i)),r.createElement("div",{className:"time-machine-competition-summary__guild-encounter"},r.createElement("div",{className:"time-machine-competition-summary__guild-encounter-name"},l===o?trans("progress-race.complete"):s.shortName),r.createElement("div",{className:"time-machine-competition-summary__guild-encounter-stats"},k)))));return u&&m&&g&&f?r.createElement(Re,{content:r.createElement(Lp,{title:p,subtitle:m,bestPercentForDisplay:g,previousBestPercentForDisplay:h,previousPullCount:b,pullCount:f,transparentImageUrl:y}),tooltipClassName:"time-machine-competition-summary__tooltip"},N):N}function Rp(e){let{recentKills:t,enableTooltips:n,openLinksExternally:a,lastTimePeriodLabel:l}=e;return r.createElement("div",{className:"time-machine-competition-summary__recent-kills"},t.map((e=>r.createElement(Ap,Sp({key:e.id},e,{enableTooltips:n,openLinksExternally:a,lastTimePeriodLabel:l})))))}function Ap(e){let{id:t,shortName:n,previousBestPercentForDisplay:a,pullCount:l,previousPullCount:i,transparentImageUrl:s,iconImageUrl:o,enableTooltips:c,openLinksExternally:u,lastTimePeriodLabel:d}=e;const m=r.createElement("div",{style:{position:"relative"}},r.createElement(Dr,{href:`/zone/race/latest/encounter/${t}`,openInNewTab:u}),r.createElement("div",{className:"time-machine-competition-summary__recent-kill "+(l?"":"time-machine-competition-summary__recent-kill--no-pulls")},r.createElement(Fe,{src:o,rounded:!0,bordered:!0,size:32}),r.createElement("div",{className:"time-machine-competition-summary__recent-kill-pulls-container"},l&&r.createElement("div",{className:"time-machine-competition-summary__recent-kill-pulls"},l))));return c&&l?r.createElement(Re,{content:r.createElement(Lp,{title:n,subtitle:d,bestPercentForDisplay:null,previousBestPercentForDisplay:a,previousPullCount:i,pullCount:l,transparentImageUrl:s}),tooltipClassName:"time-machine-competition-summary__tooltip"},m):m}function Lp(e){let{title:t,subtitle:n,bestPercentForDisplay:a,previousBestPercentForDisplay:l,pullCount:i,previousPullCount:s,transparentImageUrl:o}=e;return r.createElement("div",{className:"time-machine-competition-summary__tooltip-content",style:{backgroundImage:`url(${o})`}},r.createElement("div",{className:"time-machine-competition-summary__tooltip-overlay"}),r.createElement("div",{className:"time-machine-competition-summary__tooltip-title"},t),r.createElement("div",{className:"time-machine-competition-summary__tooltip-subtitle"},n),i&&r.createElement(r.Fragment,null,r.createElement("div",{className:"time-machine-competition-summary__tooltip-best-percent"},l??"100%"," → ",a??"0%"),r.createElement("div",{className:"time-machine-competition-summary__tooltip-best-percent-label"},l===a?trans("progress-race.best_percent"):trans("progress-race.new_best_percent")),r.createElement("div",{className:"time-machine-competition-summary__tooltip-pull-count-difference"},s??0," → ",i??0),r.createElement("div",{className:"time-machine-competition-summary__tooltip-pull-count-difference-label"},(i??0)-(s??0)," ",trans("progress-race.new_pulls"))))}var $p=function(e){let{title:t,subtitle:n,lastTimePeriodLabel:a,before:l,now:i,numberOfEncounters:s,enableTooltips:o=!0,openLinksExternally:c=!1}=e;const u=(0,r.useRef)(null),{width:d}=jn(u),m=0!==d&&d<=650,p=0!==d&&d<=300;return n=m?a:n,r.createElement("div",{ref:u,className:`time-machine-competition-summary ${m?"time-machine-competition-summary--single-column":""} ${p?"time-machine-competition-summary--very-narrow":""}`},r.createElement("div",{className:"time-machine-competition-summary__content"},r.createElement("div",{className:"time-machine-competition-summary__header-and-before"},r.createElement("div",{className:"time-machine-competition-summary__header"},r.createElement("div",{className:"time-machine-competition-summary__title"},r.createElement(P,{href:"/zone/race/latest",openInNewTab:c},t)),r.createElement("div",{className:"time-machine-competition-summary__subtitle"},n)),r.createElement(Ip,Sp({},l,{numberOfEncounters:s,openLinksExternally:c}))),r.createElement(xp,Sp({},i,{numberOfEncounters:s,enableTooltips:o,lastTimePeriodLabel:a,openLinksExternally:c}))))};function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Op.apply(this,arguments)}const zp=(e,t)=>{const n=e.guilds.find((e=>e.id===t.guildId));return n.encounters.find((e=>e.id===n.currentEncounterId)).composition};function Fp(e){let{anyClip:t,headerTitle:n,backgroundImageUrl:a,competitionId:l,timeMachineCompetitionId:i}=e;const{progressRace:s,progressRaceStatus:o,isLoadingNewProgressRaceParameters:c}=Ba(),{navigation:u,updateTopLevelNavigationDisplayLabel:d,resetTopLevelNavigationDisplayLabel:m}=up(),{timeMachine:p}=Cp(l,i);return(0,r.useEffect)((()=>{m("encounters")})),r.createElement(wm,null,r.createElement("div",{className:"progress-race-overall-page"},r.createElement(Pn,{gap:"small"},r.createElement(ja,n),r.createElement(Mi,null,o.isLoading&&c&&r.createElement(In,null,r.createElement(kt,{label:trans("reports.loading_data")})),o.isError&&r.createElement(se,null,o.errorMessage),!(o.isLoading&&c)&&s&&r.createElement(Pn,{gap:"small"},r.createElement(E,Op({},u,{updateTopLevelDisplayLabel:d})),r.createElement(Tp,{adsEnabled:Boolean(void 0!==window.ramp)},r.createElement(Pn,{gap:"small"},s.guilds.length>0?r.createElement(r.Fragment,null,r.createElement(zr,null),r.createElement(bp,{backgroundImageUrl:a,guilds:s.guilds.slice(0,10),encounters:s.encounters}),s.latestProgressUpdates&&r.createElement("div",{className:"progress-race-overall-page__latest-updates-container"},r.createElement("div",{className:"progress-race-overall-page__progress-updates-container"},r.createElement(sp,{latestProgressUpdates:s.latestProgressUpdates,anyClip:t,heightOverride:400,initialMaxUpdatesToShow:10})),p?r.createElement("div",{className:"progress-race-overall-page__time-machine-container",style:{backgroundImage:`url(${a})`}},r.createElement($p,p)):null),s.useEncounterProgressDurationTable&&r.createElement(kp,{guilds:s.guilds}),r.createElement(In,{title:trans("progress-race.a_closer_look")},r.createElement("div",{className:"progress-race-overall-page__a-closer-look"},s.guildProgressTiles.map((e=>r.createElement(jm,Op({key:e.rank},e,{composition:zp(s,e)}))))))):r.createElement(Wa,{backgroundImageUrl:a}))))))))}Fp.propTypes={anyClip:i().object,headerTitle:i().shape(ja.propTypes).isRequired,backgroundImageUrl:i().string.isRequired,competitionId:i().number.isRequired,timeMachineCompetitionId:i().number};var Mp=Fp;function Dp(e){let{rank:t,rankCssClass:n,killedCount:a,totalEncounters:l}=e;return r.createElement("div",{className:"guild-position"},t?r.createElement("div",{className:`guild-position__rank ${n}`},t):r.createElement(no,{size:44}),r.createElement("div",{className:"guild-position__progress"},a,"/",l))}Dp.propTypes={rank:i().number,rankCssClass:i().string.isRequired,killedCount:i().number.isRequired,totalEncounters:i().number.isRequired};var Up=Dp;function Bp(e){let{backgroundImageUrl:t,backgroundImageFallbackUrl:n,name:a,showStats:l,pullCount:i,isKilled:s,bestPercent:o,bestPercentForDisplay:c,difficultyName:u}=e,d="",m="",p="";return l?0===i?d=trans("progress-race.no_logged_progress_pulls"):(p=trans("progress-race.pulls")+": "+i,m=0===o?trans("progress-race.complete"):`${trans("progress-race.best")}: ${c}`):d=trans("progress-race.no_public_stats"),r.createElement("div",{className:"guild-progress-encounter-pulls "+(s||o<100?"":"guild-progress-encounter-pulls--not-yet-progressed"),style:{backgroundImage:[`url('${t}')`,n&&n!==t?`url('${n}')`:""].filter((e=>e.length))}},r.createElement("div",{className:"guild-progress-encounter-pulls__title"},a,u&&r.createElement("div",{className:"guild-progress-encounter-pulls__difficulty"},"(",u,")")),r.createElement("div",{className:"guild-progress-encounter-pulls__stats"},r.createElement("div",{className:"guild-progress-encounter-pulls__message"},d),r.createElement("div",{className:"guild-progress-encounter-pulls__best-percent"},m),r.createElement("div",{className:"guild-progress-encounter-pulls__pull-count"},p)))}Bp.propTypes={backgroundImageUrl:i().string.isRequired,backgroundImageFallbackUrl:i().string,name:i().string.isRequired,showStats:i().bool,pullCount:i().number,isKilled:i().bool,bestPercent:i().number,bestPercentForDisplay:i().string,difficultyName:i().string};var Vp=Bp,qp=i().shape({title:i().string,channel:i().string,iconImageUrl:i().string});const jp=e=>{let{channel:t,iconImageUrl:n,changeStreamHandler:a}=e;const l=e=>{let{iconImageUrl:t,channel:n}=e;return r.createElement(r.Fragment,null,r.createElement(Fe,{src:t,alt:`Watch ${n}`,bordered:!0,rounded:!0,size:20}),r.createElement("div",{className:"guild-and-coach-stream-icons__stream-icon__streaming-indicator"}))};return r.createElement(Re,{triggerProps:{className:"guild-and-coach-stream-icons__stream-icon guild-and-coach-stream-icons__stream-icon--link",onClick:()=>{a(t)}},content:r.createElement(r.Fragment,null,trans("progress-race.watch"),r.createElement("img",{className:"guild-and-coach-stream-icons__stream-icon__twitch-logo",src:"https://assets.rpglogs.com/img/social/twitch.png",alt:`${trans("progress-race.watch")} ${t}`}),r.createElement("span",{className:"guild-and-coach-stream-icons__stream-icon__channel_name"},t))},r.createElement(l,{iconImageUrl:n,channel:t}))};jp.propTypes={channel:i().string.isRequired,iconImageUrl:i().string.isRequired,name:i().string,changeStreamHandler:i().func.isRequired};const Hp=e=>{let{guildIsStreaming:t,guildStreamChannel:n,guildLogoUrl:a,coach:l,changeStreamHandler:i,priorityStream:s}=e;return t||l||s?r.createElement("div",{className:"guild-and-coach-stream-icons compact-composition__evenly-spaced-players",style:{gridTemplateColumns:(t&&"1fr ")+(l&&"1fr")}},s&&r.createElement(jp,{iconImageUrl:s.iconImageUrl,channel:s.channel,changeStreamHandler:i}),t&&r.createElement(jp,{iconImageUrl:a,channel:n,changeStreamHandler:i}),l&&r.createElement(jp,{iconImageUrl:l.logoImageUrl,channel:l.streamChannel,changeStreamHandler:i})):null};Hp.propTypes={guildIsStreaming:i().bool,guildLogoUrl:i().string,guildStreamChannel:i().string,coach:i().object,changeStreamHandler:i().func,priorityStream:qp};var Gp=Hp;function Wp(){return Wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wp.apply(this,arguments)}const Kp=(e,t)=>e.some((e=>e.players.some(t))),Zp=e=>null!==e.singleCustomPower,Yp=e=>null!==e.singleSecondaryCustomPower,Jp=e=>!!e.talents&&e.talents.length>0,Xp=e=>e.customPowers.length>0,Qp=e=>e.secondaryCustomPowers.length>0,eg=e=>!!e.setGearItems&&e.setGearItems.length>0,tg=e=>e.gearItems.length>0,ng=e=>e.effectGearItems.length>0,ag=e=>!!e.talentTree;function rg(e){let{player:t,baseUrl:n,includeSpecText:a,includeCustomPowers:l,includeEffectGear:i,includeGear:s,includeItemLevel:o,includeSecondaryCustomPowers:u,includeSetGear:d,includeSetGearThresholds:m,includeSingleCustomPowers:p,includeSingleSecondaryCustomPowers:g,includeTalents:h,setGearThresholds:f,showTalentsAsNumbers:b,talentKind:E,isEmbedded:v,onExpand:y,hasTalentsExpanded:_,toggleTalentsLabel:w,toggleTalentsLabelAbbrev:k}=e;const N=function(e,t){const n=Y(),a=Qa();return n&&a?`${e}/character/${a.shortName}/${t.server}/${t.name}`.toLowerCase():null}(n,t);return r.createElement(r.Fragment,null,r.createElement("tr",null,r.createElement("td",{className:"detailed-composition__actor-icon"},r.createElement(De,{type:t.fullType})),r.createElement("td",{className:`detailed-composition__name ${t.type}`},N?r.createElement("a",{className:t.type,target:"_blank",href:N,rel:"noreferrer"},t.name):t.name),a&&r.createElement("td",{className:"detailed-composition__spec"},r.createElement("span",{className:"detailed-composition__spec-text"},t.fullType.split("-").map((e=>e.split(/(?=[A-Z])/).join(" "))).map(((e,t)=>1===t?`(${e})`:e)).join(" "))),o&&r.createElement("td",{className:"detailed-composition__item-level"},r.createElement(c,null,t.itemLevel)),(p||g)&&r.createElement("td",{className:"detailed-composition__single-custom-powers"},r.createElement(U,{gap:"tiny"},p&&t.singleCustomPower?.icon&&r.createElement(Mt,{id:0,icon:t.singleCustomPower.icon,rounded:!1,bordered:!0,size:24,tooltip:{content:t.singleCustomPower.name}}),g&&t.singleSecondaryCustomPower?.icon&&r.createElement(Mt,{id:0,icon:t.singleSecondaryCustomPower.icon,rounded:!1,bordered:!0,size:24,tooltip:{content:t.singleSecondaryCustomPower.name}}))),h&&"modern"===E?r.createElement(r.Fragment,null,v?r.createElement("td",{className:"detailed-composition__talent-tree"},r.createElement(ig,{player:t,kind:"class"})):null,r.createElement("td",{className:"detailed-composition__talent-tree "+(v?"":"detailed-composition__talent-tree--wide")},r.createElement(ig,{player:t,kind:"spec",isPreview:!v,toggleLabel:w,toggleRow:v?void 0:y,toggleLabelAbbrev:k}))):r.createElement("td",{className:"detailed-composition__talents"},r.createElement(U,{gap:"tiny"},t.talents&&(b?r.createElement(hn,{markdown:t.talents.map((e=>null===e.id?null:e.id>0?e.id:`<Common>${e.id}</Common>`)).filter(Boolean).join("<Common>&nbsp;/&nbsp;</Common>")}):t.talents.map((e=>null!==e.id&&e.icon?r.createElement(Mt,{key:e.id,icon:e.icon,id:e.id,size:24}):null))))),l&&r.createElement("td",{className:"detailed-composition__custom-powers"},r.createElement(U,{gap:"tiny"},t.customPowers&&t.customPowers.map((e=>{let{id:t,icon:n}=e;return t&&n?r.createElement(Mt,{key:t,icon:n,id:t,size:24}):null})))),u&&r.createElement("td",{className:"detailed-composition__secondary-custom-powers"},r.createElement(U,{gap:"tiny"},t.secondaryCustomPowers&&t.secondaryCustomPowers.map((e=>{let{id:t,icon:n}=e;return t&&n?r.createElement(Mt,{key:t,id:t,icon:n,size:24}):null})))),d&&r.createElement("td",{className:"detailed-composition__set-gear"},r.createElement(sg,{player:t})),m&&f&&f.map((e=>r.createElement("td",{key:e,className:"detailed-composition__set-gear-threshold"},t.setGearItems&&t.setGearItems.length>=e&&r.createElement("span",{className:"zmdi zmdi-check zmdi-hc-border-circle detailed-composition__set-gear-threshold-tick"},r.createElement(D,null,trans("global.yes")))))),s&&r.createElement("td",{className:"detailed-composition__gear"},r.createElement(og,{player:t})),i&&r.createElement("td",{className:"detailed-composition__effect-gear"},r.createElement(cg,{player:t}))),r.createElement("tr",{className:"detailed-composition__gear-overview"},r.createElement("td",{colSpan:6},r.createElement(U,{gap:"content-padding"},h&&"modern"===E?r.createElement(r.Fragment,null,v?r.createElement(ig,{player:t,kind:"class",compact:!0}):null,r.createElement(ig,{player:t,kind:"spec",compact:!0,isPreview:!v,toggleLabel:w,toggleRow:v?void 0:y}),r.createElement(og,{player:t}),r.createElement(sg,{player:t}),r.createElement(cg,{player:t})):r.createElement(r.Fragment,null,r.createElement(sg,{player:t}),r.createElement(og,{player:t}),r.createElement(cg,{player:t}))))),_?r.createElement(lg,{player:t}):null)}function lg(e){let{player:t}=e;return t.talentTree?r.createElement("tr",null,r.createElement("td",{colSpan:9,className:"detailed-composition__talent-tree-full"},r.createElement(Fu,Wp({},t.talentTree,{defaultExpanded:!0,hasToggleButton:!1})))):null}const ig=e=>{let{player:t,compact:n,kind:a,isPreview:l,toggleRow:i,toggleLabel:s,toggleLabelAbbrev:o}=e;return t.talentTree?r.createElement(_u,{kind:a,compact:n,tree:t.talentTree,transparent:!0,isPreview:l,toggleRow:i,toggleLabel:s,toggleLabelAbbrev:o}):null},sg=e=>{let{player:t}=e;return r.createElement(U,{gap:"tiny"},t.setGearItems&&t.setGearItems.map((e=>r.createElement(Ht,Wp({key:e.slot},e,{size:24})))))},og=e=>{let{player:t}=e;return r.createElement(U,{gap:"tiny"},t.gearItems&&t.gearItems.map((e=>r.createElement(Ht,Wp({key:e.slot},e,{size:24})))))},cg=e=>{let{player:t}=e;return r.createElement(U,{gap:"tiny"},t.effectGearItems&&t.effectGearItems.map((e=>{let{slot:t,effectIcon:n,effectId:a}=e;return a&&n?r.createElement(Mt,{key:t,id:a,icon:n,size:24,rounded:!1,bordered:!0}):null})))};var ug=function(e){let{roles:t,labels:n,setGearThresholds:a,baseUrl:l,includeHeader:i=!0,includeSpecText:s=!0,includeItemLevel:o=!0,includeSingleCustomPowers:u=!0,includeSingleSecondaryCustomPowers:d=!0,includeTalents:m=!0,includeCustomPowers:p=!0,includeSecondaryCustomPowers:g=!0,includeSetGear:h=!0,includeSetGearThresholds:f=!0,includeGear:b=!0,includeEffectGear:E=!0,isEmbedded:v=!1,showTalentsAsNumbers:y=!1,preloadedTalentBlueprints:_}=e;u&&=Kp(t,Zp),d&&=Kp(t,Yp);const w=m&&Kp(t,ag);m&&=w||Kp(t,Jp),p&&=Kp(t,Xp),g&&=Kp(t,Qp),h&&=Kp(t,eg),f&&=Kp(t,eg),b&&=Kp(t,tg),E&&=Kp(t,ng);const k=w?"modern":"legacy",N=s?1:2,[T,C]=(0,r.useState)(null);return r.createElement(du,{preloaded:_??{}},r.createElement("div",{className:"detailed-composition"+(v?" detailed-composition--embedded":"")},r.createElement(vp,{className:"detailed-composition__table"},t.map(((e,_)=>{const w=Ja([e]);return r.createElement(r.Fragment,{key:e.name},i&&r.createElement("thead",null,r.createElement("tr",null,s&&r.createElement("th",{colSpan:2}),r.createElement("th",{className:"detailed-composition__role-header",colSpan:N},r.createElement(U,{gap:"small"},r.createElement("span",null,e.name),w&&o&&r.createElement(c,{style:"dark-gray"},w))),o&&r.createElement("th",{className:"detailed-composition__fill-cell"}),(u||d)&&r.createElement("th",null),m&&"modern"===k?r.createElement(r.Fragment,null,v?r.createElement("th",{className:"detailed-composition__talent-tree-header"},r.createElement("span",null,n.classTree)):null,r.createElement("th",{className:"detailed-composition__talent-tree-header"},r.createElement("span",null,v?n.specTree:n.talents))):r.createElement("th",{className:"detailed-composition__talents-header"},n.talents),p&&r.createElement("th",{className:"detailed-composition__custom-powers-header"},n.customPowers),g&&r.createElement("th",{className:"detailed-composition__secondary-custom-powers-header"},n.secondaryCustomPowers),h&&r.createElement("th",{className:"detailed-composition__set-gear-header"},n.setGear),f&&a&&a.map((e=>r.createElement("th",{key:e,className:"detailed-composition__set-gear-threshold-header"},r.createElement("span",{className:"detailed-composition__set-gear-threshold-header-amount"},e)," ",trans("gameterms.set_gear_pieces_abbreviation")))),b&&r.createElement("th",{className:"detailed-composition__gear-header"},n.gear),E&&r.createElement("th",{className:"detailed-composition__effect-gear-header"},n.effectGear))),r.createElement("tbody",null,e.players.map((e=>{const t=T===e;return r.createElement(rg,{player:e,baseUrl:l,includeItemLevel:o,includeSingleCustomPowers:u,includeSingleSecondaryCustomPowers:d,includeTalents:m,talentKind:k,showTalentsAsNumbers:y,includeCustomPowers:p,includeSecondaryCustomPowers:g,includeSetGear:h,includeSetGearThresholds:f,setGearThresholds:a,includeGear:b,includeEffectGear:E,includeSpecText:s,key:`${e.name}-${e.server}`,onExpand:()=>{C((t=>null!==t&&t===e?null:e))},hasTalentsExpanded:t,isEmbedded:v,toggleTalentsLabel:t?n.collapseTalentTree:n.expandTalentTree,toggleTalentsLabelAbbrev:n.talents})})),i&&_<t?.length-1&&r.createElement("tr",{className:"detailed-composition__spacer-row"},r.createElement("td",{colSpan:100}))))})))))},dg=function(e,t){const{progressRace:n}=Ba(),[a,l]=(0,r.useState)();return(0,r.useEffect)((()=>{const a=n?.guilds?.find((t=>t.id===e)),r=a?.encounters?.find((e=>e.id===(t??a?.currentEncounterId)))?.perPull;if(!r?.length)return void l(null);const i=new URLSearchParams({competitionId:n.competitionId.toString(),guildId:e.toString(),difficulty:n.difficulty.toString(),size:n.size.toString(),encounterId:String(t??a?.currentEncounterId),kind:_r.Latest.toString()});l(`/reports/detailed-composition?${i.toString()}`)}),[t,e,n]),a};function mg(){return mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mg.apply(this,arguments)}var pg=function(e){let{guildId:t,encounterId:n,includeHeader:a=!0,includeSpecText:l=!0,includeItemLevel:i=!0,includeSingleCustomPowers:s=!1,includeSingleSecondaryCustomPowers:o=!1,includeTalents:c=!0,includeCustomPowers:u=!1,includeSecondaryCustomPowers:d=!1,includeSetGear:m=!0,includeSetGearThresholds:p=!0,includeGear:g=!0,includeEffectGear:h=!0,isEmbedded:f=!1}=e;const b=dg(t,n);return b?r.createElement(Ot,{url:b,lazyChildren:e=>r.createElement(Xa.Provider,{value:e.region},r.createElement(ug,mg({},e,{includeHeader:a,includeSpecText:l,includeItemLevel:i,includeSingleCustomPowers:s,includeSingleSecondaryCustomPowers:o,includeTalents:c,includeCustomPowers:u,includeSecondaryCustomPowers:d,includeSetGear:m,includeSetGearThresholds:p,includeGear:g,includeEffectGear:h,isEmbedded:f})))}):null};let gg=function(e){return e.Pull="pull",e.Time="time",e}({});const hg={[gg.Pull]:{label:trans("global.pull"),type:"linear",getValue:(e,t)=>t+1},[gg.Time]:{label:trans("rankings.date"),type:"datetime",getValue:e=>e.startTime}},fg=e=>`${e.isIntermission?"I":"P"}${e.number}`,bg=(e,t)=>Object.values(e.reduce(((e,n,a)=>{if(!n.lastPhase)return e;if(n.lastPhase.index in e)return e;const r=fg(n.lastPhase);if("P1"===r)return e;const l="pull"===t?a+1:n.startTime;return e[n.lastPhase.index]={x:l,label:r},e}),{}));var Eg=function(e){let{perPull:t,userCanViewPrivateGuildReports:n=!1,height:a=250,xAxis:l=gg.Pull,title:i,subtitle:s,showPhaseProgressionLines:o=!1,theme:c}=e;const u=hg[l],d=(0,r.useCallback)((e=>e?.reportCode&&e?.fightId&&(n||!e.reportIsPrivate)),[n]),m=t.reduce(((e,t,n)=>{const a=e.length?e[e.length-1].y:Number.MAX_VALUE;return e.push({x:u.getValue(t,n),y:t.fightPercentage<a?t.fightPercentage:a}),e}),[]),p="pull"===l?[{type:"line",name:`${trans("global.fight")} %`,color:Ao[5],data:t.map(((e,t)=>{const n=function(e){switch(e){case"artifact":case"artifact-bg":return"rgb(229, 204, 128)";case"legendary":case"legendary-bg":return"rgb(255, 128, 0)";case"astounding":case"astounding-bg":return"rgb(226, 104, 168)";case"magnificent":return"rgb(190, 130, 0)";case"epic":case"epic-bg":return"rgb(163, 53, 238)";case"rare":case"rare-bg":return"rgb(0, 112, 255)";case"uncommon":return"rgb(30, 255, 0)";case"common":return"#666";case"uncommon-bg":return"rgb(15, 128, 0)";case"common-bg":return"#cccccc"}}(function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"-bg":"";return e>=75?"common"+t:e>=50?"uncommon"+t:e>=25?"rare"+t:e>=10?"epic"+t:e>=1?"legendary"+t:e>0?"astounding"+t:"artifact"+t}(e.fightPercentage));return{x:t+1,y:e.fightPercentage,color:n,marker:{enabled:e.fightPercentage<50,fillColor:n}}})),cursor:"pointer",events:{click:e=>{const n=t[e.point.index];if(d(n)){const e=(a=n.reportCode,r=n.fightId,`https://${window.location.host}/reports/${a}#fight=${r}`);try{window.open(e)}catch{window.location.href=e}}var a,r}}}]:[],g=(0,hi.merge)({title:void 0!==i?i:{text:trans("progress-race.fight_percentage_per_pull")},subtitle:void 0!==s?s:"pull"===l?{text:`${trans("progress-race.select_a_point_to_go_to_report")}${n?"":` (${trans("progress-race.if_visible_to_you")})`}`}:void 0,chart:{height:a},xAxis:{title:{text:u.label},min:Math.min(...m.map((e=>e.x))),type:u.type,minTickInterval:1,plotLines:o?bg(t,l).map((e=>({label:{text:e.label,rotation:0,verticalAlign:"bottom",y:-5,style:{color:"#e1f2f5"}},value:e.x,dashStyle:"Dash"}))):[]},yAxis:{title:{text:"%",rotation:0},min:0,max:100},legend:{enabled:!1},tooltip:{useHTML:!0,headerFormat:`${u.label}: {point.key}<br />`},series:[{type:"line",name:`${trans("progress-race.best")} %`,color:Ao[1],data:m.map((e=>({...e,marker:{enabled:!1}}))),enableMouseTracking:"time"===l},...p]},c);return r.createElement("div",{className:"fight-percentage-per-pull-chart"},r.createElement(Go,{options:g}))},vg=function(e){let{series:t,startTime:n,endTime:a,height:l=250,theme:i}=e;const s=(0,hi.merge)({xAxis:{type:"datetime",crosshair:!0,min:0,max:a-n,dateTimeLabelFormats:{day:"%M:%S",millisecond:"%M:%S.%L",second:"%M:%S",minute:"%M:%S",hour:"%H:%M"}},title:void 0,chart:{height:l,zoomType:void 0},yAxis:{min:0,title:{text:trans("reports.per_second_amount")}},tooltip:{followPointer:!0,shared:!0,useHTML:!0,pointFormat:"<span style='font-size:10px'><span style='color:{series.color}'>{series.name}</span>: <b>{point.y}</b><br/></span>",valueDecimals:1,xDateFormat:"%M:%S"},series:t.map((e=>({data:e.data,type:"spline",pointInterval:e.pointInterval,name:e.name})))},i);return r.createElement(Go,{options:s})};function yg(e){let{width:t,height:n,children:a}=e;return r.createElement("div",{className:"centered-content-tile",style:{width:t,height:n}},a)}yg.propTypes={width:i().oneOfType([i().number,i().string]),height:i().oneOfType([i().number,i().string]),children:i().node};var _g=yg;function wg(){return wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wg.apply(this,arguments)}var kg=function(e){let{guildId:t,encounterId:n,view:a,height:l=250,theme:i}=e;const{progressRace:s}=Ba(),[o,c]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if(!s)return;const e=s.guilds.find((e=>e.id===t));if(!e)return;const r=e.encounters?.find((t=>t.id===(n||e.currentEncounterId)));if(!r)return c(null);const l="best"===a?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,t)=>t.fightPercentage<=e.fightPercentage?t:e),e[0])}(r.perPull):function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e[e.length-1]}(r.perPull);if(!l)return c(null);const i=new URLSearchParams({competitionId:s.competitionId.toString(),guildId:t.toString(),encounterId:String(n||e.currentEncounterId),difficulty:s.difficulty.toString(),size:s.size.toString(),kind:("best"===a?_r.Best:_r.Latest).toString()});c(`/reports/fight-summary-chart?${i.toString()}`)}),[n,t,s,a]),o?r.createElement(Ot,{url:o,pendingOrRejectedHeight:l,lazyChildren:e=>r.createElement(vg,wg({},e,{theme:i,height:l}))}):s?r.createElement(_g,{height:isFinite(l)?l:void 0},r.createElement(vn,null,trans("global.no_data_found")+".")):null};function Ng(e){let{guildId:t,encounterId:n,userCanViewPrivateGuildReports:a=!1,shouldShowFightSummaryCharts:l=!0}=e;const{progressRace:i}=Ba(),[s,o]=(0,r.useState)(),[c,u]=(0,r.useState)(),[d,m]=(0,r.useState)([]),p=Va(n);return(0,r.useEffect)((()=>{if(!i)return;const e=i?.guilds?.find((e=>e.id===t)),a=e?.encounters?.find((t=>t.id===(n??e?.currentEncounterId)));if(!a)return;u(a.perPull);const r=[{label:trans("progress-race.fight_percentage_per_pull_label"),value:"fight-percentage-per-pull",isApplicable:a.perPull.length>1},{label:`${trans("reports.summary")} (${trans("progress-race.last_pull")})`,value:"last-pull",isApplicable:l&&!a.isKilled},{label:`${trans("reports.summary")} (${a.isKilled?trans("reports.kill"):trans("progress-race.best_pull")})`,value:"best-pull",isApplicable:l}].filter((e=>e.isApplicable));m(r),void 0===s&&o(r[0])}),[n,t,l,i,s]),r.createElement(Pn,null,r.createElement(gi,{value:s,options:d,onChange:o}),"fight-percentage-per-pull"===s?.value&&r.createElement(Eg,{perPull:c,userCanViewPrivateGuildReports:a,title:null,subtitle:null,showPhaseProgressionLines:p?.showPhaseProgressionLinesInFightPercentagePerPullChart??!1}),"last-pull"===s?.value&&r.createElement(kg,{guildId:t,encounterId:n,view:"last"}),"best-pull"===s?.value&&r.createElement(kg,{guildId:t,encounterId:n,view:"best"}))}Ng.propTypes={guildId:i().number.isRequired,encounterId:i().number,userCanViewPrivateGuildReports:i().bool,shouldShowFightSummaryCharts:i().bool};var Tg=Ng;function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cg.apply(this,arguments)}const Sg=(e,t)=>e.isKilled===t.isKilled&&e.pullCount===t.pullCount&&e.bestPercentForDisplay===t.bestPercentForDisplay&&e.title===t.title&&e.guildId===t.guildId&&e.encounterId===t.encounterId&&e.showStats===t.showStats&&e.hasDetailedCompositionExpanded===t.hasDetailedCompositionExpanded&&(e.composition?e.composition.roles.reduce(((e,t)=>`${e}-${t.players.map((e=>`${e.name}.${e.server}`)).join("-")}`),""):null)===(t.composition?t.composition.roles.reduce(((e,t)=>`${e}-${t.players.map((e=>`${e.name}.${e.server}`)).join("-")}`),""):null),Ig=(e,t,n,a,r)=>{const l=new URLSearchParams({zone:`${a}`,encounter:`${e}`,difficulty:`${r}`,startDate:`${n[0].startTime}`,endDate:`${n[n.length-1].endTime}`});return{label:trans("reports.analyze_all_pulls"),disabled:!1,style:"button",href:`/guild/analyze/${t}?${l.toString()}`}},xg=(0,r.memo)((e=>{let{guildId:t,zoneId:n,encounterId:a,difficulty:l,iconImageUrl:i,iconAltText:s,iconIsRounded:o,iconHasBorder:c=!0,title:u,showStats:d,pullCount:m,isKilled:p,bestPercentForDisplay:g,composition:h,perPull:f,userCanViewPrivateGuildReports:b=!1,iconImageFallbackUrl:E=null,youtubeEmbedUrl:v=null,hasDetailedCompositionExpanded:y,changeActiveDetailedComposition:_,showAnalyzeAllPullsButton:w=!1,shouldShowFightSummaryCharts:k=!0,guild:N}=e,T="",C="";d?0===m?T=trans("progress-race.no_logged_progress_pulls"):(C=trans("progress-race.pulls")+": "+m,T=p?trans("progress-race.complete"):`${trans("progress-race.best")}: ${g}`):T=trans("progress-race.no_public_stats");const S=w&&d&&f.length?[Ig(a,t,f,n,l)]:[];return r.createElement(In,{title:u,actions:S},r.createElement("div",{className:"guild-progress-encounter-tile"},r.createElement("div",{className:"guild-progress-encounter-tile__row-one"},r.createElement("div",{className:`guild-progress-encounter-tile__icon guild-progress-encounter-tile__icon--${p?"complete":0===m?"not-yet-progressed":"in-progress"} ${o?"guild-progress-encounter-tile__icon--rounded":""} ${c?"":"guild-progress-encounter-tile__icon--no-border"}`},r.createElement(Ln,{url:i,fallbackUrl:E??i,isCustom:o,logoImgAltText:s})),r.createElement("div",{className:"guild-progress-encounter-tile__stats"},r.createElement("div",{className:"guild-progress-encounter-tile__message"},r.createElement(vn,null,T)),r.createElement("div",{className:"guild-progress-encounter-tile__pull-count"},r.createElement(vn,null,C)),r.createElement("div",{className:"guild-progress-encounter-tile__composition"},d&&h&&r.createElement(Pg,{hasDetailedCompositionExpanded:y,changeActiveDetailedComposition:_,composition:h})))),d&&h&&r.createElement("div",{className:"guild-progress-encounter-tile__row-two"},r.createElement(Pg,{hasDetailedCompositionExpanded:y,changeActiveDetailedComposition:_,composition:h})),h&&y&&r.createElement(Xa.Provider,{value:N.region},r.createElement(pg,{guildId:t,encounterId:a})),d&&((f?.length??0)>0||!!v)&&r.createElement("div",{className:"guild-progress-encounter-tile__row-three"},r.createElement("div",{className:"guild-progress-encounter-tile__chart"},d&&m?r.createElement(Tg,{guildId:t,encounterId:a,userCanViewPrivateGuildReports:b,shouldShowFightSummaryCharts:k}):r.createElement("div",{className:"guild-progress-encounter-tile__chart--fallback-message"},1===m?trans("guilds.guild_progress_one_shot_no_chart"):trans("guilds.guild_progress_no_linked_pull_for_progress"))),!!v&&r.createElement("div",{className:"guild-progress-encounter-tile__video"},r.createElement(an,{src:v})))))}),Sg);xg.displayName="GuildProgressEncounterTile";const Pg=e=>{let{changeActiveDetailedComposition:t,hasDetailedCompositionExpanded:n,composition:a}=e;return r.createElement(U,{gap:"content-padding",style:{justifyContent:"space-between",alignItems:"center"}},r.createElement(Pm,Cg({},a,{align:"right"})),a&&a.supportsCombatantInfo&&r.createElement("div",{className:"guild-progress-encounter-tile__show-detailed-composition"},r.createElement(F,{onClick:t},n?trans("global.hide_details"):trans("global.show_details"))))};var Rg=xg;const Ag=e=>e/36e5,Lg=(e,t,n,a,r,l)=>{const i=((e,t)=>e>=10&&e/t>=.1)(r,l)?`${r} pulls`:null;return()=>0===e||t&&a?t?i?`${t} - ${i}`:t:i:i?`${n} - ${i}`:n};var $g=function(e){let{encounters:t,title:n,subtitle:a,height:l,theme:i}=e;const s=(e=>{const t=e.flatMap(((e,t)=>(e.perPull??[]).map((n=>({...n,encounterIndex:t,encounterId:e.id}))))).sort(((e,t)=>e.startTime-t.startTime));if(0===t.length)return[];const n=Object.fromEntries(e.map((e=>[e.id,e.splitEncounterProgressByDurationChartBarsIntoPhases]))),a=Object.fromEntries(Object.entries(t.reduce(((e,t)=>n[t.encounterId]&&t.lastPhase?((!(t.encounterIndex in e)||t.lastPhase.index>e[t.encounterIndex])&&(e[t.encounterIndex]=t.lastPhase.index),e):e),{})).map((e=>{let[t,n]=e;return[t,$o(n)]}))),r=((e,t)=>e.reduce(((e,n)=>{const a=t[n.encounterId],r=e[e.length-1];if(0===e.length||r&&r.encounterIndex!==n.encounterIndex){const t=a&&n.lastPhase?{phaseIndex:n.lastPhase.index,phaseName:fg(n.lastPhase)}:{phaseIndex:null,phaseName:null};return e.concat({duration:n.duration,fightPercentage:n.fightPercentage,encounterIndex:n.encounterIndex,bestPercentForDisplay:n.bestPercentForDisplay,pullCount:1,...t})}return a&&n.lastPhase&&null!==r.phaseIndex&&r.phaseIndex<n.lastPhase.index?e.concat({duration:n.duration,fightPercentage:n.fightPercentage,encounterIndex:n.encounterIndex,phaseIndex:n.lastPhase.index,phaseName:fg(n.lastPhase),bestPercentForDisplay:n.bestPercentForDisplay,pullCount:1}):(r.fightPercentage>n.fightPercentage&&(r.fightPercentage=n.fightPercentage,r.bestPercentForDisplay=n.bestPercentForDisplay),r.duration+=n.duration,r.pullCount+=1,e)}),[]))(t,n);return r.map(((e,t)=>((e,t,n,a)=>{const r=n.reduce(((e,n,a)=>a<t?e+n.duration:e),0),l=n.reduce(((t,n)=>n.encounterIndex===e.encounterIndex?t+n.pullCount:t),0),i=Ag(r),s=i+Ag(e.duration),o=n[t+1],c=o&&(0===o.fightPercentage||o.encounterIndex===e.encounterIndex&&(o?.phaseIndex??-1)>(e.phaseIndex??-1)),u=null===e.phaseIndex?{partialFill:{amount:Number.parseFloat((e.fightPercentage/100).toFixed(3))}}:{color:a[e.encounterIndex][e.phaseIndex]};return{dataLabels:{enabled:!0,formatter:Lg(e.fightPercentage,e.phaseName,e.bestPercentForDisplay,c,e.pullCount,l)},x:Number.parseFloat(i.toFixed(2)),x2:Number.parseFloat(s.toFixed(2)),y:e.encounterIndex,...u}})(e,t,r,a)))})(t);if(0===s.length)return null;const o=(0,hi.merge)({chart:{type:"xrange",height:l??Math.max(25*t.length,254)},title:void 0!==n?n:{text:trans("progress-race.progress_duration_by_encounter")},subtitle:void 0!==a?n:{text:trans("progress-race.in_hours_of_active_fight_time")},yAxis:{title:{text:""},categories:t.map((e=>e.name)),reversed:!0},legend:{enabled:!1},series:[{type:"xrange",name:trans("global.encounter"),colors:[Ao[0]],pointWidth:15,borderWidth:0,data:s}]},i);return r.createElement("div",{className:"encounter-progress-duration-chart"},r.createElement(Go,{options:o}))};function Og(e){let{content:t,anyClip:n}=e;return r.createElement("div",{className:"content-and-any-clip "+(n?"content-and-any-clip--with-ad":"")},t,n&&r.createElement(tp,n))}Og.propTypes={content:i().node.isRequired,anyClip:i().object};var zg=Og;const Fg="data-scroll-id";function Mg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const[t,n]=(0,r.useState)(e);return(0,r.useEffect)((()=>{if("number"==typeof t)try{const e=document.querySelector(`[${Fg}="${t}"]`);if(e){const{y:t}=e.getBoundingClientRect(),n=window.scrollY+t-75;window.scrollTo({behavior:"smooth",top:n})}}catch{}}),[t]),(0,r.useMemo)((()=>[t,e=>{n((t=>t===e?null:e))}]),[t])}const Dg=new Map,Ug=(e,t)=>Dg.get(e)||(Dg.set(e,t),t);function Bg(){return Bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bg.apply(this,arguments)}function Vg(e){let{zoneIdLabel:t,zoneId:n,difficulty:a,guildId:l,anyClip:i,anyClipPosition:c,enableLinks:u=!0,showNavigation:d=!0,showLatestProgressUpdates:m=!0,priorityStream:p}=e;const{user:g}=Dl(),h=(0,s.TH)(),{progressRace:f,progressRaceStatus:b}=Ba(),E=f?.guilds?.find((e=>e.id===parseInt(l))),[v,y]=(0,r.useState)(E);(0,r.useLayoutEffect)((()=>{if(!f)return void y(void 0);const e=f.guilds.find((e=>e.id===l));l!==v?.id&&C(e?.streamChannel),y(e)}),[l,f,v?.id]);const[_,w]=(0,r.useState)(),[k,N]=(0,r.useState)(!1),[T,C]=(0,r.useState)(v?.streamChannel),[S,x]=(0,r.useState)("twitch");(0,r.useEffect)((()=>{w(v?.encounters?.find((e=>e.id===v.currentEncounterId))?.composition),void 0===T&&C(v?.streamChannel)}),[v,T]);const P=(0,r.useMemo)((()=>{return v?.encounters?(e=[...v.encounters]).sort(((t,n)=>{const a=e.indexOf(t),r=e.indexOf(n),l=!t.isKilled&&t.pullCount,i=!n.isKilled&&n.pullCount;return l||i?l&&i?t.bestPercent<n.bestPercent?1:-1:i?1:-1:t.isKilled||n.isKilled?t.isKilled&&n.isKilled?t.killedAtTimestamp<n.killedAtTimestamp?1:-1:n.isKilled?1:-1:a>r?1:-1})):[];var e}),[v]);!function(e,t,n){(0,r.useEffect)((()=>{Za(e?.id)&&(t(Ka[e?.id]),n("douyu"))}),[e,t,n])}(v,C,x);const[R,A]=Mg();return r.createElement(Pn,{className:"progress-race-guild-content"},f&&v&&r.createElement(Pn,null,r.createElement(Pn,{gap:"smaller"},r.createElement("div",{className:"progress-race-guild-content__guild-nav-and-position "+(d?"progress-race-guild-content__guild-nav-and-position--with-navigation":"")},d&&r.createElement("div",null,r.createElement("ul",{className:"sm sm-black filter-bar-menu"},r.createElement("li",null,r.createElement(o.rU,{className:"progress-race-guild-content__back-to-race-summary",to:{pathname:`/zone/race/${t}`,search:h.search}},r.createElement("span",null,trans("progress-race.race_summary")),r.createElement("span",{className:"zmdi zmdi-chevron-left"}))),r.createElement("li",null,r.createElement("a",{href:`/guild/id/${v.id}`},trans("progress-race.view_guild_profile"))))),r.createElement("div",{className:"progress-race-guild-content__guild-position"},r.createElement(Up,{rank:v.rank,rankCssClass:v.rankCssClass,killedCount:v.killedCount,totalEncounters:v.encounters.length}))),r.createElement("div",{className:"progress-race-guild-content__sidebar-and-stream"},r.createElement("div",{className:"progress-race-guild-content__stream-sidebar "+(d?"progress-race-guild-content__stream-sidebar--with-navigation":"")},d&&r.createElement("div",{className:"progress-race-guild-content__stream-sidebar-nav"},r.createElement("ul",{className:"sm sm-black filter-bar-menu"},r.createElement("li",null,r.createElement(o.rU,{className:"progress-race-guild-content__back-to-race-summary",to:{pathname:`/zone/race/${t}`,search:h.search}},r.createElement("span",null,trans("progress-race.race_summary")),r.createElement("span",{className:"zmdi zmdi-chevron-left"}))),r.createElement("li",null,r.createElement("a",{href:`/guild/id/${v.id}`},trans("progress-race.view_guild_profile"))))),r.createElement("div",{className:"progress-race-guild-content__guild-position"},r.createElement(Up,{rank:v.rank,rankCssClass:v.rankCssClass,killedCount:v.killedCount,totalEncounters:v.encounters.length})),r.createElement("div",{className:"progress-race-guild-content__stream-sidebar-stats"},r.createElement(Vp,Bg({},v.encounters.find((e=>e.id===v.currentEncounterId)),{difficultyName:f.difficultyName})))),r.createElement(Pn,{className:"progress-race-guild-content__stream",gap:"smaller"},r.createElement(I,{source:S,channel:T,setStreamChannel:C,fallbackMessage:trans("progress-race.guild_not_streaming"),layout:"video-with-chat"}),_&&r.createElement(In,{padding:"narrow"},r.createElement(U,{gap:"content-padding",style:{justifyContent:"space-between",alignItems:"center"}},r.createElement(Pm,Bg({changeStreamHandler:C,enableStreamIndicators:!0,guildAndCoachComponent:v?.guildIsStreaming||v?.coach||p?r.createElement(Gp,{guildIsStreaming:v?.guildIsStreaming,guildLogoUrl:v?.logoImageUrl,guildStreamChannel:v?.streamChannel,coach:v?.coach,changeStreamHandler:C,priorityStream:p}):null},_)),_&&_.supportsCombatantInfo&&r.createElement("div",{className:"progress-race-guild-content__show-detailed-composition"},r.createElement(F,{onClick:()=>N((e=>!e))},k?trans("global.hide_details"):trans("global.show_details"))))))),_&&k&&r.createElement(In,{padding:"narrow"},r.createElement(pg,{guildId:l}))),r.createElement(Tp,null,r.createElement(Pn,null,m&&f.latestProgressUpdates&&r.createElement(sp,{latestProgressUpdates:f.latestProgressUpdates,anyClip:"latestProgressUpdates"===c?i:void 0,enableLinks:u,guildId:l}),f.useEncounterProgressDurationTable&&r.createElement(kp,{guilds:[v]}),r.createElement(zg,{content:r.createElement($g,{encounters:v.encounters.map((e=>({...e,splitEncounterProgressByDurationChartBarsIntoPhases:f.encounters.find((t=>t.id===e.id))?.splitEncounterProgressByDurationChartBarsIntoPhases??!1})))}),anyClip:"encounterProgressDurationChart"===c?i:void 0}),r.createElement(Pn,{className:"progress-race-guild-content__encounters"},P?.map(((e,l)=>{const i=Ug([l,t,h.search?h.search:"search",e.killedAtTimestamp??"undefeated",e.id,String(u)].join("-"),r.createElement(qg,{difficultyName:f.difficultyName,enableLinks:u,index:l,encounter:e,zoneIdLabel:t}));return r.createElement("div",{key:e.name,className:"progress-race-guild-content__encounter"},r.createElement(Rg,Bg({zoneId:n,difficulty:a,guild:v},e,{guildId:v.id,encounterId:e.id,title:i,iconAltText:e.name,userCanViewPrivateGuildReports:Ui(g,v.id),youtubeEmbedUrl:e?.youtubeEmbedUrl,hasDetailedCompositionExpanded:R===l,changeActiveDetailedComposition:()=>{A(l)}})))})))))),f&&!v&&r.createElement(In,{title:trans("global.no_data_found")},r.createElement(vn,null,trans("guilds.no_progress_data"))),!f&&b.isLoading&&r.createElement(In,null,r.createElement(kt,{label:trans("reports.loading_data")})),b.isError&&r.createElement(se,null,b.errorMessage))}function qg(e){let{encounter:t,enableLinks:n,difficultyName:a,zoneIdLabel:l,index:i}=e;return r.createElement(Zm,{to:{pathname:`/zone/race/${l}/encounter/${t.id}`,search:location.search},enable:n},r.createElement("span",{className:"progress-race-guild-content__encounter-name",[Fg]:i},t.name,a?" "+a:"")," ",r.createElement("span",{className:"progress-race-guild-content__encounter-timestamp"},t.killedAtTimestamp&&moment(new Date(t.killedAtTimestamp)).format("ll LT")))}Vg.propTypes={zoneIdLabel:i().string,zoneId:i().number,difficulty:i().number,guildId:i().number.isRequired,anyClip:i().object,anyClipPosition:i().oneOf(["latestProgressUpdates","encounterProgressDurationChart"]),enableLinks:i().bool,showNavigation:i().bool,showLatestProgressUpdates:i().bool,difficultyName:i().string,priorityStream:qp,useEncounterProgressDurationTable:i().bool},qg.propTypes={encounter:i().object.isRequired,enableLinks:i().bool.isRequired,difficultyName:i().string,zoneIdLabel:i().string.isRequired,index:i().number.isRequired};var jg=Vg;function Hg(){return Hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hg.apply(this,arguments)}function Gg(e){let{anyClip:t,headerTitle:n,priorityStream:a}=e;const{zoneIdLabel:l,guildId:i}=(0,s.UO)(),{progressRace:o}=Ba(),c=o?.guilds?.find((e=>e.id===parseInt(i))),[u,d]=(0,r.useState)(c);return(0,r.useEffect)((()=>{if(!o)return void d(void 0);const e=o.guilds.find((e=>e.id===parseInt(i)));d(e)}),[i,o]),r.createElement(wm,null,r.createElement("div",{className:"progress-race-guild-page"},r.createElement(Pn,null,u?r.createElement(ja,Hg({},n,{logoImageUrl:u.logoImageUrl,logoImageFallbackUrl:u.logoImageFallbackUrl,logoIsRounded:u.logoImageIsCustom,faction:u.faction,isSlim:!0,textPartOne:"",textPartTwo:u.name,href:`/guild/id/${u.id}`})):r.createElement(ja,n),r.createElement(Mi,null,r.createElement(jg,{zoneIdLabel:l,guildId:Number(i),anyClip:t,anyClipPosition:"latestProgressUpdates",priorityStream:a})))))}Gg.propTypes={anyClip:i().object,headerTitle:i().shape(ja.propTypes),priorityStream:qp};var Wg=Gg,Kg={id:i().number.isRequired,area:i().number.isRequired,season:i().number.isRequired,locales:i().arrayOf(i().string),fullName:i().string.isRequired,lowercaseName:i().string.isRequired,siteTitle:i().string.isRequired,siteLogoImageUrl:i().string.isRequired,headerLogoUrl:i().string.isRequired,baseUrl:i().string.isRequired,archonGameSlug:i().string,actorsSprite:i().string.isRequired,actorsSecondarySprite:i().string.isRequired,actorsLargeIconsPath:i().string,articlesBaseUrl:i().string.isRequired,assetServerBaseUrl:i().string.isRequired,abilityExternalSitePath:i().string.isRequired,buffExternalSitePath:i().string.isRequired,itemExternalSitePath:i().string.isRequired,itemSetExternalSitePath:i().string.isRequired,npcExternalSitePath:i().string.isRequired,tooltipLibraryPath:i().string,abilityTooltipEndpoint:i().string.isRequired,encounterIconExtension:i().string,headerTextPartOneTopColor:i().string.isRequired,headerTextPartOneBottomColor:i().string.isRequired,headerTextPartTwoTopColor:i().string.isRequired,headerTextPartTwoBottomColor:i().string.isRequired},Zg={id:i().number.isRequired,name:i().string.isRequired},Yg={id:i().number.isRequired,name:i().string.isRequired,rank:i().number.isRequired,guildLogo:i().shape({url:i().string,isCustom:i().bool,fallbackUrl:i().string}),faction:i().number,isRecruit:i().bool.isRequired,isOfficer:i().bool.isRequired,isGuildMaster:i().bool.isRequired,server:i().shape(Zg),region:i().shape({id:i().number.isRequired,name:i().string.isRequired,shortName:i().string.isRequired})},Jg={id:i().number.isRequired,userName:i().string,emailAddress:i().string,isAdmin:i().bool.isRequired,guilds:i().arrayOf(i().exact(Yg)).isRequired,characters:i().arrayOf(i().shape({id:i().number.isRequired,name:i().string.isRequired,server:i().shape(Zg),region:i().shape({id:i().number.isRequired,name:i().string.isRequired,shortName:i().string.isRequired})}))},Xg=(0,s.EN)((e=>{let{history:t}=e;return(0,r.useEffect)((()=>{const e=t.listen((()=>{window.scrollTo(0,0)}));return()=>{e()}}),[t]),null})),Qg=function(e){let{encounterId:t,guilds:n,title:a,subtitle:l,height:i,theme:s}=e;const o=n.reduce(((e,n)=>{const a=n.encounters.find((e=>e.id===t));return a&&a.perPull&&0!==a.perPull.length?(e[n.name]=a.perPull,e):e}),{}),c=Object.keys(o);if(0===c.length)return null;const u=Object.values(o).map(((e,t)=>{const n=e[0],a=e[e.length-1],r=[...e].sort(((e,t)=>e.fightPercentage-t.fightPercentage))[0];return{x:n.startTime,x2:a.endTime,y:t,partialFill:r.fightPercentage>0?Math.ceil(10*r.fightPercentage)/1e3:void 0}})),d=(0,hi.merge)({chart:{type:"xrange",height:i},title:void 0!==a?a:{text:trans("progress-race.progress_time_by_guild")},subtitle:void 0!==l?l:{text:trans("progress-race.showing_data_for_public_logging_or_competition_mode_enabled_guilds")},xAxis:{type:"datetime"},yAxis:{title:{text:""},categories:c,reversed:!0},legend:{enabled:!1},series:[{name:trans("global.guild"),colors:[Ao[0]],pointWidth:10,borderWidth:0,data:u,dataLabels:{enabled:!0}}]},s);return r.createElement("div",{className:"encounter-progress-time-chart"},r.createElement(Go,{options:d}))};function eh(){return eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},eh.apply(this,arguments)}function th(e){let{anyClip:t,headerTitle:n,backgroundImageUrl:a}=e;const{user:l}=Dl(),{progressRace:i,progressRaceStatus:c,isLoadingNewProgressRaceParameters:u}=Ba(),{navigation:d,updateTopLevelNavigationDisplayLabel:m}=up(),{zoneIdLabel:p,encounterId:g}=(0,s.UO)(),h=Boolean(Fa("alwaysShowHeadToHead",!1)),f=(0,s.TH)(),[b,v]=(0,r.useState)([null,null]),[y,_]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=i?.guilds?.[0]?.encounters?.find((e=>e.id===Number(g)))?.name;e&&m("encounters",e)}));const[w,k]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=Date.now()-36e5,t=i?.guilds.filter((e=>e.streamChannel&&e.currentEncounterId===Number(g))).map((e=>({...e,currentEncounter:e.encounters.find((t=>t.id===e.currentEncounterId))}))).filter((t=>!t.currentEncounter.isKilled&&t.currentEncounter.showStats&&(h||null!==t.currentEncounter.bestPercent&&t.currentEncounter?.perPull[t.currentEncounter?.perPull.length-1]?.endTime>e))).sort(((e,t)=>e.currentEncounter.bestPercent-t.currentEncounter.bestPercent)).slice(0,2)||[];2===w.length&&2===t.length&&t.some((e=>!w.find((t=>t.id===e.id))))&&_(!0);const n=2===w.length?i?.guilds.filter((e=>e.id===w[0].id||e.id===w[1].id)).map((e=>({...e,currentEncounter:e.encounters.find((t=>t.id===e.currentEncounterId))}))).sort(((e,t)=>e.currentEncounter.bestPercent-t.currentEncounter.bestPercent)):t;JSON.stringify(n.map((e=>e.reportTimestampsUsedHash)))!==JSON.stringify(w.map((e=>e.reportTimestampsUsedHash)))&&(n&&2===n.length&&n.forEach(((e,t)=>{e.id!==w?.[t]?.id&&v((n=>(n[t]=e.streamChannel,n)))})),k(n))}),[i,g,w,h]);const N=(0,r.useCallback)((()=>i?.guilds?.map((e=>e.encounters.map((t=>({...t,guild:e}))))).reduce(((e,t)=>e.concat(t)),[]).filter((e=>e.id===Number(g))).sort(((e,t)=>(e?.killedAtTimestamp??Number.MAX_VALUE)-(t?.killedAtTimestamp??Number.MAX_VALUE)))),[i,g]),[T,C]=(0,r.useState)(N());(0,r.useEffect)((()=>{C(N())}),[N]);const[S,x]=Mg();return r.createElement(wm,null,r.createElement("div",{className:"progress-race-encounter-page"},r.createElement(Pn,null,T?.length>0?r.createElement(ja,eh({},n,{logoImageUrl:T[0].iconImageUrl,logoIsRounded:!0,textPartOne:"",textPartTwo:T[0].name})):r.createElement(ja,n),r.createElement(Mi,null,c.isLoading&&u&&r.createElement(In,null,r.createElement(kt,{label:trans("reports.loading_data")})),c.isError&&r.createElement(se,null,c.errorMessage),!(c.isLoading&&u)&&r.createElement(Pn,null,r.createElement(E,eh({},d,{updateTopLevelDisplayLabel:m})),y?r.createElement(zr,null):null,T?.length>0?r.createElement(r.Fragment,null,2===w.length&&r.createElement(r.Fragment,null,r.createElement("div",{className:"progress-race-encounter-page__featured-streams"},w.map(((e,t)=>{const n=e=>{((e,t)=>{const n=[...b];n[e]=t,v(n)})(t,e)};return r.createElement(In,{key:e.id,title:r.createElement(o.rU,{to:{pathname:`/zone/race/${p}/guild/${e.id}`,search:f.search}},e.rank&&r.createElement(r.Fragment,null,r.createElement("span",{className:e.rankCssClass},e.rank,".")," "),r.createElement("span",{className:e.nameCssClass},e.name),e.streamChannel&&r.createElement(Wm,null)," ",r.createElement("span",{className:"progress-race-encounter-page__featured-stream-subtext"},`${trans("progress-race.pulls")}: ${e.currentEncounter.pullCount}, ${trans("progress-race.best")}: ${e.currentEncounter.bestPercentForDisplay}\n                                          `)),padding:"none"},r.createElement(I,{id:`progress-race-encounter-page__featured-stream-${e.id}`,channel:b[t],fallbackMessage:trans("progress-race.guild_not_streaming"),hasBorder:!1}),r.createElement("div",{className:"progress-race-encounter-page__stream-composition"},r.createElement(Pm,eh({changeStreamHandler:n,enableStreamIndicators:!0,guildAndCoachComponent:e?.guildIsStreaming||e?.coach?r.createElement(Gp,{guildIsStreaming:e?.guildIsStreaming,guildLogoUrl:e?.logoImageUrl,guildStreamChannel:e?.streamChannel,coach:e?.coach,changeStreamHandler:n}):null},e?.encounters?.find((t=>t.id===e.currentEncounterId))?.composition))))}))),r.createElement("div",{className:"progress-race-encounter-page__featured-streams-description"},r.createElement(vn,null,trans("progress-race.featured_encounter_streams_description",{guildNameOne:w[0].name,guildNameTwo:w[1].name,encounterName:w[0].currentEncounter.name})))),r.createElement(Tp,{adsEnabled:Boolean(void 0!==window.ramp)},r.createElement(Pn,{className:"progress-race-encounter-page__content"},i.latestProgressUpdates&&r.createElement(sp,{latestProgressUpdates:i.latestProgressUpdates,anyClip:t,encounterId:Number(g)}),r.createElement(Qg,{encounterId:Number(g),guilds:i.guilds}),T.map(((e,t)=>{const n=Ug([t,p,f.search?f.search:"search",e.killedAtTimestamp??"undefeated",e.id,e.guild.name,String(e.guild.streamChannel),e.guild.rank,e.guild.nameCssClass].join("-"),r.createElement(nh,{encounter:e,index:t,zoneIdLabel:p}));return r.createElement(Rg,eh({key:t},e,{guildId:e.guild.id,encounterId:e.id,title:n,iconImageUrl:e.guild.logoImageUrl,iconImageFallbackUrl:e.guild.logoImageFallbackUrl,iconAltText:e.guild.name,iconIsRounded:e.guild.logoImageIsCustom,iconHasBorder:!1,userCanViewPrivateGuildReports:Ui(l,e.guild.id),hasDetailedCompositionExpanded:S===t,changeActiveDetailedComposition:()=>{x(t)}}))}))))):r.createElement(Wa,{backgroundImageUrl:a}))))))}function nh(e){let{encounter:t,zoneIdLabel:n,index:a}=e;return r.createElement(o.rU,{to:{pathname:`/zone/race/${n}/guild/${t.guild.id}`,search:location.search},[Fg]:a},t.guild.rank&&r.createElement(r.Fragment,null,r.createElement("span",{className:t.guild.rankCssClass},t.guild.rank,".")," "),r.createElement("span",{className:t.guild.nameCssClass},t.guild.name),t.guild.streamChannel&&r.createElement(Wm,null)," ",r.createElement("span",{className:"progress-race-encounter-page__encounter-timestamp"},t.killedAtTimestamp&&moment(new Date(t.killedAtTimestamp)).format("ll LT")))}th.propTypes={anyClip:i().object,headerTitle:i().shape(ja.propTypes),backgroundImageUrl:i().string.isRequired},nh.propTypes={encounter:i().object.isRequired,zoneIdLabel:i().string.isRequired,index:i().number.isRequired};var ah=th;function rh(e){let{children:t}=e;return r.createElement("div",{className:"bottom-sticky-notice"},r.createElement("div",{className:"bottom-sticky-notice__content"},t))}rh.propTypes={children:i().node.isRequired};var lh=rh,ih=function(){const{progressRaceStatus:e,timeBetweenProgressRaceRefreshes:t}=Ba(),[n,a]=(0,r.useState)(0);return(0,r.useEffect)((()=>{e.isSuccess&&a(t)}),[e,t]),(0,r.useEffect)((()=>{const e=setTimeout((()=>a((e=>Math.max(0,e-1e3)))),1e3);return()=>clearTimeout(e)}),[n]),r.createElement(lh,null,trans("progress-race.data_is_live"),"."," ",e.isLoading?r.createElement(r.Fragment,null," ",r.createElement(kt,{inline:!0,fontSize:15})," "):"("+5*Math.ceil(n/5e3)+"...)")},sh=function(){(()=>{const e=(0,s.TH)(),[t,n]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t?window.gtag&&window.gtag("event","page_view",{page_title:document.title,page_path:e.pathname+e.search}):n(!0)}),[e])})(),(()=>{const e=(0,s.TH)(),[t,n]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t?window.dispatchEvent(new Event("page-changed")):n(!0)}),[e])})()};function oh(e){let{game:t,user:n,anyClip:a,zoneId:l,headerTitle:i,navigation:o,backgroundImageUrl:c,priorityStream:u,competitionId:d,timeMachineCompetitionId:m}=e;return sh(),r.createElement(Da,{zoneId:l,refreshOnlyWhenVisible:!0},r.createElement(cp,{navigation:o},r.createElement(Xg,null),r.createElement(s.rs,null,r.createElement(s.AW,{path:"/zone/race/:zoneIdLabel/encounter/:encounterId(\\d+)"},r.createElement(ah,{game:t,user:n,anyClip:a,headerTitle:i,backgroundImageUrl:c})),r.createElement(s.AW,{path:"/zone/race/:zoneIdLabel/guild/:guildId(\\d+)"},r.createElement(Wg,{game:t,user:n,anyClip:a,headerTitle:i,priorityStream:u})),r.createElement(s.AW,{path:"/zone/race/:zoneIdLabel"},r.createElement(Mp,{game:t,user:n,anyClip:a,headerTitle:i,backgroundImageUrl:c,competitionId:d,timeMachineCompetitionId:m}))),r.createElement(ih,null)))}function ch(e){let{value:t,isBeingEdited:n,setPendingValue:a,hasPendingChanges:l,save:i,cancelEdit:s,status:o,anyClip:c,defaultContent:u}=e;const d=o.isLoading;return r.createElement(Pn,{className:"editable-description"},n?r.createElement(r.Fragment,null,r.createElement(vn,{openLinksExternally:!1},"> "+trans("global.description_supports_markdown")),r.createElement(Ic,{onChange:e=>a(e.target.value),defaultValue:t,disabled:d,maxLength:5e3}),r.createElement(ti,{save:i,cancel:s,status:o,hasPendingChanges:l})):u&&!t?.length?r.createElement("div",null,c&&r.createElement("div",{className:"editable-description__any-clip"},r.createElement(tp,c)),r.createElement("div",null,u)):r.createElement(vn,{before:c&&r.createElement("div",{className:"editable-description__any-clip"},r.createElement(tp,c))},t))}oh.propTypes={game:i().exact(Kg).isRequired,user:i().exact(Jg),anyClip:i().object,zoneId:i().number.isRequired,headerTitle:i().shape(ja.propTypes).isRequired,navigation:i().shape(E.propTypes).isRequired,backgroundImageUrl:i().string.isRequired,priorityStream:qp,competitionId:i().number.isRequired,timeMachineCompetitionId:i().number},sm(".progress-race-page-container",oh),ch.propTypes={value:i().string.isRequired,isBeingEdited:i().bool,setPendingValue:i().func.isRequired,hasPendingChanges:i().bool,save:i().func.isRequired,cancelEdit:i().func.isRequired,status:Lt.isRequired,anyClip:i().object,defaultContent:i().node};var uh=ch;const dh=r.createContext();const mh=r.createContext({}),ph=e=>{let{children:t}=e;const{guild:n}=ym(),[{data:a,status:l},i]=$t();(0,r.useEffect)((()=>{n?.id&&i(`/guild/recruitmentSettings/${n.id}`)}),[n,i]);const[s,o]=(0,r.useState)();(0,r.useEffect)((()=>{o(a)}),[a]);const c=(0,r.useCallback)((e=>{o((t=>({...t,...e})))}),[]);return r.createElement(mh.Provider,{value:{guildRecruitmentSettings:s,setGuildRecruitmentSettings:o,mergeGuildRecruitmentSettings:c,guildRecruitmentSettingsStatus:l}},r.createElement(Wl.Provider,{value:s?.id},r.createElement(Oi.Provider,{value:s?.name},r.createElement(dh.Provider,{value:s?.faction},t))))};ph.propTypes={children:i().node};var gh=()=>(0,r.useContext)(mh),hh=(e,t)=>{const{user:n}=Dl();let a=Zl();const{guild:l}=ym();return a||(a=l.id),ql().new(e,t).withTileActions((0,r.useCallback)((()=>Bi(n,a)),[n,a])).build()};function fh(e){let{guildDescription:t,anyClip:n,style:a="tile"}=e;const l=zi(),i=(0,r.useContext)(dh),{value:s,isBeingEdited:o,setPendingValue:c,hasPendingChanges:u,tileActions:d=[],cancelEdit:m,save:p,status:g}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Zl();const{guildRecruitmentSettings:a,mergeGuildRecruitmentSettings:l}=gh();t.onHttpSuccess=(0,r.useCallback)(((e,t)=>{l?.({description:t})}),[l]);const i=(0,r.useCallback)((()=>a?.description??e),[a,e]),s=ql().from(hh(i(),t)).withHttpSave(`/guild/description/${n}`,(e=>({description:e}))).build(),o=s.setValue;return(0,r.useEffect)((()=>{o(i())}),[i,o]),s}(t);return r.createElement(In,{title:l,titleClassName:`faction-${i}`,actions:d,style:a},r.createElement(uh,{value:s,isBeingEdited:o,setPendingValue:c,hasPendingChanges:u,cancelEdit:m,save:p,status:g,anyClip:n}))}fh.propTypes={guildDescription:i().string,anyClip:i().object,style:i().string};var bh=fh;function Eh(e){let{reports:t}=e;const n=t.map((e=>{const t=[e.userName];return e.isPrivate&&t.push(`(${trans("global.private")})`),t.push(moment(1e3*e.createdAt).fromNow()),{url:"/reports/"+e.code,icon:{type:"image",src:e.iconUrl,hasBorder:!0},title:{name:e.description},description:t.join(" - ")}}));return r.createElement(Ci,{items:n})}Eh.propTypes={reports:i().arrayOf(i().shape({iconUrl:i().string,code:i().string,description:i().string,userName:i().string,isPrivate:i().bool,createdAt:i().number}))};var vh=Eh;function yh(){return yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yh.apply(this,arguments)}var _h=function(e){let{url:t,children:n,openInNewTab:a=!1}=e,l={};return a&&(l={...l,target:"_blank",rel:"noopener noreferrer"}),r.createElement("a",yh({className:"large-link",href:t},l),n)};function wh(e){let{reports:t}=e;const n=`/guild/reports-list/${Zl()}`;return r.createElement("div",{className:"guild-recent-reports-tile"},r.createElement(In,{title:trans("guilds.recent_reports"),titleUrl:n,padding:"narrow"},r.createElement(ml,{content:r.createElement(Mn,{padding:"narrow"},r.createElement(vh,{reports:t})),largeLink:r.createElement(_h,{url:n},trans("guilds.view_all_reports"))})))}wh.propTypes={reports:i().array};var kh=wh;function Nh(e){let{metrics:t,showTabs:n}=e;const[a,l]=(0,r.useState)(t?.length?t[0]:void 0),i=t.map((e=>e.name));return r.createElement("div",{className:"guild-rankings-summary-box"},n&&r.createElement("div",{className:"guild-rankings-summary-box__tabs"},i.map((e=>r.createElement("div",{key:e,className:"guild-rankings-summary-box__tab "+(e===a.name?"guild-rankings-summary-box__tab--selected":""),onClick:()=>l(t.find((t=>t.name===e)))},e)))),a.bar&&r.createElement("div",{className:"guild-rankings-summary-box__bar"},r.createElement(On,a.bar)),r.createElement("div",{className:"guild-rankings-summary-box__ranks "+(a.bar?"":"guild-rankings-summary-box__ranks--no-bar")+(a.ranks.length>1?"guild-rankings-summary-box__ranks--combined-zone":"")},a.ranks.map(((e,t)=>r.createElement("div",{key:`guild-rankings-summary-box-${t}`,className:"guild-rankings-summary-box__ranks-container"},e.title?r.createElement("div",{className:"guild-rankings-summary-box__title"},e.title):null,r.createElement("div",{className:"guild-rankings-summary-box__main-rank"},r.createElement("span",{className:"guild-rankings-summary-box__main-rank-label"},e.mainRank.label),r.createElement("span",{className:"guild-rankings-summary-box__main-rank-value "+e.mainRank.rankCssClass},e.mainRank.rank)),r.createElement("div",{className:"guild-rankings-summary-box__other-ranks"},e.otherRanks.map((e=>r.createElement("div",{key:e.label,className:"guild-rankings-summary-box__other-rank"},r.createElement("span",{className:"guild-rankings-summary-box__other-rank-value "+e.rankCssClass},e.rank),r.createElement("span",{className:"guild-rankings-summary-box__other-rank-label"},e.label))))))))))}const Th=i().exact({label:i().string.isRequired,rank:i().string.isRequired,rankCssClass:i().string});Nh.propTypes={metrics:i().arrayOf(i().shape({title:i().string,bar:i().object,ranks:i().arrayOf(i().shape({name:i().string,mainRank:Th.isRequired,otherRanks:i().arrayOf(Th).isRequired}).isRequired).isRequired})),showTabs:i().bool.isRequired};var Ch=Nh;function Sh(e){let{rankings:t}=e;return r.createElement("div",{className:"guild-rankings-summary-boxes"},t.map((e=>r.createElement("div",{key:e.zoneName,className:"guild-rankings-summary-boxes__box"},r.createElement("div",{className:"guild-rankings-summary-boxes__box-title"},e.zoneName),r.createElement(Ch,{metrics:e.metrics,showTabs:t.some((e=>e.metrics.length>1))})))))}Sh.propTypes={rankings:i().arrayOf(i().exact({zoneName:i().string,metrics:i().array}))};var Ih=Sh;function xh(e){let{guildRankingsTileTitle:t,guildRankingsLinkIsVisible:n}=e;const a=Zl(),l=`/guild/rankings/${a}/latest`;return r.createElement("div",{className:"guild-rankings-tile"},r.createElement(In,{title:t,titleUrl:l,padding:"narrow"},r.createElement(ml,{content:r.createElement(Ot,{url:`/guild/rankingsSummary/${a}`,lazyChildren:e=>e.length?r.createElement(Ih,{rankings:e}):r.createElement(vn,null,trans("guilds.no_ranks_available"))}),largeLink:n?r.createElement(_h,{url:l},trans("rankings.view_all_rankings")):null})))}xh.propTypes={guildRankingsTileTitle:i().string.isRequired,guildRankingsLinkIsVisible:i().bool.isRequired};var Ph=xh;function Rh(e){let{guildStreamChannel:t}=e;const n=`/guild/streams/${Zl()}`;return r.createElement("div",{className:"guild-stream-tile"},r.createElement(In,{title:trans("global.now_streaming")+"!",titleUrl:n},r.createElement(ml,{content:r.createElement(I,{channel:t}),largeLink:r.createElement(_h,{url:n},trans("streams.view_all_streams"))})))}Rh.propTypes={guildStreamChannel:i().string.isRequired};var Ah=Rh,Lh=function(){const e=Zl(),t=`/guild/characters/${e}`,n=zi(),{user:a}=Dl(),l=Bi(a,e);return r.createElement("div",{className:"guild-composition-tile"},r.createElement(In,{title:trans("rankings.composition"),titleUrl:t},r.createElement(ml,{content:r.createElement("div",{className:"guild-composition-tile__content"},r.createElement(Ot,{url:`/guild/composition/${e}`,lazyChildren:t=>t?r.createElement(r.Fragment,null,r.createElement(vn,null,trans("guilds.based_on_recent_reports",{guildName:n})),r.createElement(Mn,null,r.createElement(or,t)),l&&r.createElement(vn,{openLinksExternally:!1},trans("guilds.try_teams_if_composition_incorrect",{guildId:e}))):r.createElement(r.Fragment,null,r.createElement(vn,null,trans("guilds.no_reports_for_composition",{guildName:n})),l&&r.createElement(vn,{openLinksExternally:!1},trans("guilds.enable_competition_mode_for_composition",{guildId:e})))})),largeLink:r.createElement(_h,{url:t},trans("guilds.view_all_characters"))})))};const $h=/(\d{1,2}):(\d{2})/;function Oh(e){const t=$h.exec(e);if(!t)return;const[,n,a]=t,r=parseInt(n),l=parseInt(a);return 0<=r&&r<24&&0<=l&&l<60?{hours:r,minutes:l,totalMinutes:60*r+l}:void 0}function zh(e){let{id:t,name:n,value:a,onChange:l=(()=>{}),onValidityChange:i=(()=>{}),className:s="",disabled:o=!1,placeholder:c="00:00"}=e;const[u,d]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),g=(0,r.useCallback)(((e,t)=>{p(void 0!==t),t?(d(e),l(t)):""===e&&d("")}),[p,d,l]),h=(0,r.useCallback)((e=>{if(e===u)return;const t=Oh(e);g(e,t)}),[u,g]);return(0,r.useEffect)((()=>{const e="number"==typeof a?Zn(a):a,t=Oh(e);t&&g(e,t)}),[a,g]),(0,r.useEffect)((()=>{i(m)}),[m,i]),r.createElement("input",{id:t,name:n,onChange:e=>h(e.target.value),className:`time-input ${m?"time-input--state-valid":"time-input--state-invalid"} ${s}`,type:"time",disabled:o,placeholder:c,value:u})}zh.propTypes={id:i().string,name:i().string,value:i().oneOfType([i().string,i().number]),onChange:i().func,onValidityChange:i().func,className:i().string,disabled:i().bool,placeholder:i().string};var Fh=zh;function Mh(e){let{id:t="duration",value:n,onChange:a,maxHours:l=99,maxMinutes:i=59,disabled:s=!1}=e;const[o,c]=(0,r.useState)(0),[u,d]=(0,r.useState)(0),m=(0,r.useCallback)((e=>{const t=(l?Math.min(e,l):e)||0;c(t)}),[l]),p=(0,r.useCallback)((e=>{const t=(i?Math.min(e,i):e)||0;d(t)}),[i]);(0,r.useEffect)((()=>{a({hours:o,minutes:u,totalMinutes:60*o+u})}),[o,u,a]),(0,r.useEffect)((()=>{n&&(m(Math.floor(n/60)),p(n%60))}),[m,p,n]);const g=t+"-hours",h=t+"-minutes";return r.createElement("div",{className:"duration-input"},r.createElement(D,null,r.createElement("label",{htmlFor:g},trans("global.hours"))),r.createElement(ii,{id:g,type:"number",value:o,min:0,max:l,onChange:e=>m(e.value),disabled:s}),r.createElement("span",null,trans("global.hours_abbr"))," ",r.createElement(D,null,r.createElement("label",{htmlFor:h},trans("global.minutes"))),r.createElement(ii,{id:h,type:"number",value:u,min:0,max:i,onChange:e=>p(e.value),disabled:s}),r.createElement("span",null,trans("global.minutes_abbr")))}Mh.propTypes={id:i().string,value:i().number,onChange:i().func.isRequired,maxHours:i().number,maxMinutes:i().number,disabled:i().bool};var Dh=Mh,Uh=i().shape({value:i().oneOfType([i().string,i().number]),label:i().string.isRequired,url:i().string}),Bh=i().shape({items:i().arrayOf(Uh).isRequired,selectedItem:Uh});function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vh.apply(this,arguments)}function qh(e,t){return e.find((e=>e.value===t))?.label}function jh(e,t,n){return e?t?.map((e=>n.find((t=>t.value===e))))??[]:n.find((e=>e.value===t))??n[0]}function Hh(e){return r.createElement(ma.ZP,Vh({menuPortalTarget:document.body,styles:{input:e=>({...e,paddingBottom:3,paddingTop:3}),menuPortal:e=>({...e,zIndex:9999,color:"black"}),multiValueRemove:e=>({...e,color:"#222"}),valueContainer:t=>e.slim?{...t,paddingTop:0,paddingBottom:0}:t}},e))}function Gh(e){let{label:t,notSetLabel:n,items:a,isMulti:l,value:i,isBeingEdited:s,pendingValue:o,setPendingValue:c,hasPendingChanges:u,save:d,cancelEdit:m,status:p,slim:g,afterLabel:h}=e;const f=function(e,t,n,a){const l=(e,t,n,a)=>(e?n.length?n?.map((e=>qh(t,e))).join(", "):null:qh(t,n))??a??trans("global.not_set"),i=l(e,t,n,a),[s,o]=(0,r.useState)(i);return(0,r.useEffect)((()=>{o(l(e,t,n,a))}),[e,t,a,n]),s}(l,a,i,n);return r.createElement("div",{className:"editable-select"},r.createElement("div",{hidden:s},r.createElement(vn,null,f)),r.createElement("div",{hidden:!s},r.createElement(Pn,null,t&&r.createElement(U,null,r.createElement(vn,null,t),h),r.createElement(Hh,{isMulti:l,options:a,value:jh(l,o,a),onChange:e=>{c(l?e.map((e=>e.value)):e.value)},isDisabled:p?.isLoading,slim:g}),d&&m&&r.createElement(ti,{save:d,cancel:m,status:p,hasPendingChanges:u}))))}Hh.propTypes={...ma.ZP.propTypes,slim:i().bool},Gh.propTypes={label:i().string,...Bh.items,...Bh.selectedItem,isMulti:i().bool,value:i().oneOfType([i().string,i().number,i().arrayOf(i().string),i().arrayOf(i().number)]),isBeingEdited:i().bool.isRequired,setPendingValue:i().func.isRequired,hasPendingChanges:i().bool,save:i().func,cancelEdit:i().func,status:Lt,afterLabel:i().node,slim:i().bool};var Wh=Gh;const Kh=da(),Zh=10080;function Yh(e){let{schedule:t,setPendingValue:n,cancelEdit:a,save:l,status:i}=e;const[s,o]=(0,r.useState)(t?.timeZoneName?ia(t.timeZoneName):sa()),[c,u]=(0,r.useState)([]),[d,m]=(0,r.useState)(!1),p=Kh.map(((e,t)=>({value:t,label:e}))),[g,h]=(0,r.useState)(!1),[f,b]=(0,r.useState)(),[E,v]=(0,r.useState)([]),[y,_]=(0,r.useState)("20:00"),[w,k]=(0,r.useState)(0),[N,T]=(0,r.useState)(!1),[C,S]=(0,r.useState)(0),[I,x]=(0,r.useState)(0),[P,R]=(0,r.useState)(null);return function(e,t){(0,r.useEffect)((()=>{t(e?.timeZoneName?ia(e.timeZoneName):sa())}),[e,t])}(t,o),function(e,t){(0,r.useEffect)((()=>{e((e=>e.map((e=>({...e,startTime:(e.relativeStartTime-t.currentTimeOffsetInMinutes+Zh)%Zh})))))}),[e,t])}(u,s),function(e,t){(0,r.useEffect)((()=>{e?.timeRanges?.length&&t(e.timeRanges.map((e=>{const t=Math.floor(e.relativeStartTime/1440)%7,n=Kh[t],a=e.relativeStartTime-24*t*60;return{dayName:n,startTime:e.startTime,relativeStartTime:e.relativeStartTime,displayStartTime:a,duration:e.duration}})).sort(((e,t)=>e.relativeStartTime-t.relativeStartTime)))}),[e,t])}(t,u),function(e,t,n){(0,r.useEffect)((()=>{e({timeZoneName:t.name,timeRanges:n.map((e=>({startTime:e.startTime,relativeStartTime:e.relativeStartTime,duration:e.duration})))})}),[t,n,e])}(n,s,c),function(e,t){(0,r.useEffect)((()=>{t(e?null:trans("schedule.start_time_invalid"))}),[e,t])}(N,R),r.createElement(Pn,{className:"editable-schedule-table"},r.createElement(ga,{displayLabel:trans("schedule.schedule_editing_time_zone",{selectedTimeZoneName:s.getShortenedName()}),editingLabel:trans("schedule.set_time_zone_for_schedule"),timeZones:la,value:s,onChange:e=>{o(e),m(!0)},disabled:i.isLoading}),!g&&!f&&r.createElement(r.Fragment,null,r.createElement(ea,null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,trans("schedule.day")),r.createElement("th",null,trans("schedule.start")),r.createElement("th",null,trans("reports.duration")),r.createElement("th",{"aria-label":trans("schedule.add_or_remove")}))),r.createElement("tbody",null,c.length>0&&r.createElement(r.Fragment,null,r.createElement("tr",null,r.createElement("td",{colSpan:4},r.createElement("strong",null,trans("schedule.remove_time")))),c.map(((e,t)=>r.createElement("tr",{key:t},r.createElement("td",null,e.dayName),r.createElement("td",null,Zn(e.displayStartTime)),r.createElement("td",null,Zn(e.duration)),r.createElement("td",{className:"editable-schedule-table__actions-cell"},r.createElement("div",{className:"editable-schedule-table__actions-container"},r.createElement("div",{className:"editable-schedule-table__edit-action"},r.createElement(F,{onClick:()=>(e=>{const t=p.find((t=>t.label===e.dayName));v([t]),_(e.relativeStartTime-24*t.value*60),S(e.duration),b(e)})(e),styles:["unstyled","icon"],disabled:i.isLoading},r.createElement("span",{className:"zmdi zmdi-edit"},r.createElement(D,null,trans("global.edit"))))),r.createElement("div",{className:"editable-schedule-table__remove-action"},r.createElement(F,{onClick:()=>{return e=t,u(c.filter(((t,n)=>n!==e))),void m(!0);var e},styles:["unstyled","icon","color-red"],disabled:i.isLoading},r.createElement("span",{className:"zmdi zmdi-close"},r.createElement(D,null,trans("global.delete"))))))))))),!g&&!f&&r.createElement("tr",null,r.createElement("td",{colSpan:4},r.createElement(F,{onClick:()=>{v([]),h(!0)},disabled:i.isLoading},trans("schedule.add_time")))))),r.createElement(ti,{save:l,cancel:a,status:i,hasPendingChanges:d})),r.createElement("div",{hidden:!g&&!f},r.createElement(Mn,null,r.createElement(Pn,null,r.createElement("div",{className:"editable-schedule-table__add-time-range-controls"},r.createElement("div",{className:"editable-schedule-table__label-and-control"},r.createElement("label",{htmlFor:"day"},trans("schedule.day")),f?r.createElement(ma.ZP,{name:"day",value:E[0],onChange:e=>v([e]),options:p,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}}):r.createElement(Wh,{name:"day",isMulti:!0,isBeingEdited:!0,items:p,status:i,value:[],pendingValue:E.map((e=>e.value)),setPendingValue:e=>{v(e.map((e=>p[e])))},slim:!0})),r.createElement("div",{className:"editable-schedule-table__label-and-control"},r.createElement("label",{htmlFor:"start-time"},trans("schedule.start")),r.createElement(Fh,{id:"start-time",value:y,onChange:e=>{_(void 0),k(e.totalMinutes)},onValidityChange:e=>T(e)})),r.createElement("div",{className:"editable-schedule-table__label-and-control"},r.createElement("label",{htmlFor:"duration"},trans("reports.duration")),r.createElement(Dh,{value:C,maxHours:23,onChange:e=>x(e.totalMinutes)}))),r.createElement("div",{className:"editable-schedule-table__validation-error"},P?r.createElement("span",null,P):r.createElement("span",{className:"zmdi zmdi-check editable-schedule-table__validation-tick"})),r.createElement("div",{className:"editable-schedule-table__buttons"},r.createElement(F,{onClick:()=>{let e=[...c,...E.map((e=>{const t=24*e.value*60+w;return{dayName:Kh[e.value],startTime:(t-s.currentTimeOffsetInMinutes+Zh)%Zh,relativeStartTime:t,displayStartTime:w,duration:I}}))];f&&(e=e.filter((e=>e!==f))),u(e.sort(((e,t)=>e.relativeStartTime-t.relativeStartTime))),m(!0),h(!1),b(void 0)},disabled:!N||i.isLoading},f?trans("global.update"):trans("global.add")),r.createElement(F,{onClick:()=>{h(!1),b(void 0)},styles:["warning"]},trans("global.cancel")))))))}Yh.propTypes={schedule:i().object,setPendingValue:i().func.isRequired,cancelEdit:i().func.isRequired,save:i().func.isRequired,status:Lt.isRequired};var Jh=Yh;function Xh(e){let{guildSchedule:t,style:n="tile",showLinkToCalendar:a=!0,required:l}=e;const i=Zl(),{user:s}=Dl(),o=Bi(s,i),c=`/guild/calendar/${i}`,{value:u,isBeingEdited:d,setPendingValue:m,tileActions:p,beginEdit:g,cancelEdit:h,save:f,status:b}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{guildRecruitmentSettings:a,mergeGuildRecruitmentSettings:l}=gh();t.onHttpSuccess=(0,r.useCallback)(((e,t)=>{l?.({schedule:t})}),[l]);const i=(0,r.useCallback)((()=>a?.schedule??e),[a,e]),s=ql().from(hh(i(),t)).withHttpSave(`/guild/schedule/${n}`,(e=>({schedule:e}))).build(),o=s.setValue;return(0,r.useEffect)((()=>{o(i())}),[i,o]),s}(t),E=zi(),v=Yn(u?.timeRanges.map((e=>e.duration)).reduce(((e,t)=>e+t),0)),y=u?.timeRanges.length;return r.createElement("div",{className:"guild-schedule-tile"},r.createElement(In,{title:trans("schedule.schedule"),titleUrl:c,actions:p,style:n,required:l&&!u?.timeRanges?.length},r.createElement(ml,{content:d?r.createElement(Jh,{schedule:u,setPendingValue:m,cancelEdit:h,save:f,status:b}):u?.timeRanges?.length?r.createElement(_a,{schedule:u,label:trans("schedule.raid_week_summary",{guildName:E,totalDuration:v,numberOfRaids:y}),showUserTimeZoneSelector:!0}):r.createElement(r.Fragment,null,r.createElement(fa,null),r.createElement(vn,{styles:["inline"]},trans("schedule.no_schedule"))," ",o&&r.createElement(F,{onClick:g,styles:["link"]},trans("schedule.add_schedule"),".")),largeLink:a&&r.createElement(_h,{url:c},trans("guilds.view_calendar"))})))}Xh.propTypes={guildSchedule:i().object,style:i().string,showLinkToCalendar:i().bool,required:i().bool};var Qh=Xh,ef=i().exact({id:i().number,roleId:i().number,priorityValue:i().number,categoryName:i().string,specName:i().string,fullType:i().string,cssClassName:i().string}),tf={allCategoryName:i().string.isRequired,roles:i().arrayOf(Uh),priorities:i().arrayOf(Uh),recruitmentSpots:i().arrayOf(i().shape({order:i().number.isRequired,description:i().string.isRequired,quantity:i().number.isRequired,specsAndPriorities:i().arrayOf(ef)})),defaultSpecsAndPriorities:i().arrayOf(ef)};function nf(e){let{roles:t,priorities:n,specsAndPriorities:a,updateSpecsAndPriorities:l,status:i,saveAndCancelButtonsComponent:s=null}=e;const o=[{label:trans("recruitment.everything"),value:-1},...t],c=o[0],[u,d]=(0,r.useState)(c),m=n[0],[p,g]=(0,r.useState)(m),h=(0,r.createRef)(),f=jn(h),[b]=np(!1,(0,r.useCallback)((()=>f.width<600),[f]));return r.createElement("div",{ref:h},r.createElement(Pn,{className:"editable-specs-and-priorities"},r.createElement("div",{className:"editable-specs-and-priorities__bulk-update-container"},r.createElement("div",null,r.createElement(vn,null,"#### "+trans("recruitment.bulk_update"))),r.createElement("form",{name:"bulk-update",className:"editable-specs-and-priorities__bulk-update"},r.createElement(D,null,r.createElement("label",{htmlFor:"bulk-update-role"},trans("recruitment.bulk_update_role_label"))),r.createElement(ma.ZP,{name:"bulk-update-role",inputId:"bulk-update-role",options:o,defaultValue:u,onChange:d,isDisabled:i.isLoading,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}}),r.createElement(D,null,r.createElement("label",{htmlFor:"bulk-update-priority"},trans("recruitment.bulk_update_priority_label"))),r.createElement(ma.ZP,{name:"bulk-update-priority",inputId:"bulk-update-priority",options:n,defaultValue:p,onChange:g,isDisabled:i.isLoading,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}}),r.createElement("div",null),r.createElement("div",{className:"editable-specs-and-priorities__bulk-update-button"},r.createElement(F,{onClick:()=>{l(a.map((e=>({...e,priorityValue:e.roleId===u.value||-1===u.value?p.value:e.priorityValue}))))},disabled:i.isLoading},trans("global.update"))))),s,r.createElement("div",{className:"editable-specs-and-priorities__categories "+(b?"":"editable-specs-and-priorities__categories--multi-column")},a.map((e=>e.categoryName)).filter(((e,t,n)=>n.indexOf(e)===t)).map((e=>r.createElement("div",{className:"editable-specs-and-priorities__category",key:e},r.createElement(vn,{styles:b?["keep-top-margin"]:[]},"#### "+e),a.filter((t=>t.categoryName===e)).map((e=>r.createElement("div",{key:e.id,className:"editable-specs-and-priorities__spec"},r.createElement(De,{type:e.fullType},r.createElement("span",{className:e.cssClassName},e.specName+": ")),r.createElement("div",null),r.createElement(D,null,r.createElement("label",{htmlFor:`${e.id}-priority`},trans("recruitment.update_spec_priority_label",{specName:e.specName}))),r.createElement(ma.ZP,{name:`${e.id}-priority`,inputId:`${e.id}-priority`,value:n.find((t=>t.value===e.priorityValue)),options:n,onChange:t=>((e,t)=>{l(a.map((n=>({...n,priorityValue:n.id===e?t.value:n.priorityValue}))))})(e.id,t),isDisabled:i.isLoading,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})))))))),s))}nf.propTypes={roles:i().arrayOf(Uh),priorities:i().arrayOf(Uh),specsAndPriorities:i().arrayOf(ef),updateSpecsAndPriorities:i().func.isRequired,status:Lt.isRequired,saveAndCancelButtonsComponent:i().node};var af=nf;function rf(e){let{allCategoryName:t,priorities:n,specsAndPriorities:a}=e;const[l,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1),[d,m]=(0,r.useState)(void 0),p=(0,r.createRef)(),g=jn(p),[h,f]=(0,r.useState)(!0);return function(e,t,n){(0,r.useEffect)((()=>{n(0!==e.width&&e.width<400)}),[n,e])}(g,0,f),function(e,t,n){(0,r.useEffect)((()=>{e?(t(!1),n(!0)):(t(!0),n(!1))}),[e,t,n])}(h,u,o),function(e,t,n,a){(0,r.useEffect)((()=>{const r=e.map((e=>({priorityValue:e.value,numberOfSpecs:t.filter((t=>t.priorityValue===e.value)).length}))).sort(((e,t)=>t.priorityValue-e.priorityValue)),l=[];let i=0;for(let e=0;e<r.length;e++){const{numberOfSpecs:t,priorityValue:a}=r[e];if(i>0){if(0===a)break;if(!n&&i+t>10)break}i+=t,l.push(a)}a(t.filter((e=>l.includes(e.priorityValue))))}),[t,n,e,a])}(n,a,c,i),function(e,t,n){(0,r.useEffect)((()=>{t.length&&(t.every((e=>e.priorityValue===t[0].priorityValue))?n(e.find((e=>e.value===t[0].priorityValue))):n(void 0))}),[e,n,t])}(n,a,m),function(e,t,n,a){(0,r.useEffect)((()=>{if(!n){const n=t.map((e=>e.id)),r=e.filter((e=>!n.includes(e.id))).every((e=>0===e.priorityValue));a(!r)}}),[n,a,e,t])}(a,l,c,o),r.createElement("div",{ref:p},r.createElement(Pn,{className:"specs-and-priorities"},d?r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(vn,null,"#### "+t),r.createElement("div",{className:"specs-and-priorities__spec"},r.createElement("em",null,d.label)))):r.createElement(r.Fragment,null,r.createElement("div",{className:"specs-and-priorities__categories "+(h?"":"specs-and-priorities__categories--multi-column")},l.map((e=>e.categoryName)).filter(((e,t,n)=>n.indexOf(e)===t)).map(((e,t)=>r.createElement("div",{className:"specs-and-priorities__category",key:e},r.createElement(vn,{styles:0!==t&&h?["keep-top-margin"]:[]},"#### "+e),l.filter((t=>t.categoryName===e)).map((e=>r.createElement("div",{className:"specs-and-priorities__spec",key:e.fullType},r.createElement(De,{type:e.fullType},r.createElement("span",{className:e.cssClassName},e.specName+": "),r.createElement("em",null,n.find((t=>t.value===e.priorityValue)).label))))))))),s&&r.createElement("div",{className:"specs-and-priorities__show-or-hide-button"},r.createElement(F,{onClick:()=>u(!c),styles:["link"]},c?trans("recruitment.hide_lower_priority"):trans("recruitment.show_lower_priority"))))))}rf.propTypes={allCategoryName:i().string.isRequired,priorities:i().arrayOf(Uh),specsAndPriorities:i().arrayOf(ef)};var lf=rf;function sf(e){let{roles:t,priorities:n,specsAndPriorities:a,updateSpecsAndPriorities:l,status:i,isBeingEdited:s=!1}=e;const o=(0,r.createRef)(),c=jn(o),[u,d]=(0,r.useState)(!0),m=(0,r.useMemo)((()=>Math.min(...n.map((e=>e.value)))),[n]),p=(0,r.useMemo)((()=>Math.max(...n.map((e=>e.value)))),[n]),g=t.map((e=>{const t=a.filter((t=>t.roleId===e.value)).sort(((e,t)=>e.id-t.id));return{...e,roleSelected:t.every((e=>e.priorityValue>m)),specs:t}}));return(0,r.useEffect)((()=>{d(c.width<750)}),[d,c]),r.createElement("div",{ref:o},s?r.createElement("div",{className:"recruitment-spot-icon-specs-selector "+(u?"":"recruitment-spot-icon-specs-selector--multi-column")},g.map((e=>((e,t,n,a,l,i)=>r.createElement("div",{className:"recruitment-spot-icon-specs-selector__role-container",key:e.value},r.createElement("div",{className:"recruitment-spot-icon-specs-selector__role-label-container"},r.createElement(F,{styles:["link"],className:`recruitment-spot-icon-specs-selector__spec-icon recruitment-spot-icon-specs-selector__spec-icon--editable ${e.roleSelected?"recruitment-spot-icon-specs-selector__selected-spec-icon":""} ${i?"recruitment-spot-icon-specs-selector__disabled-spec-icon":""}`,onClick:()=>{return!i&&(r=e.value,s=e.roleSelected?a:l,void n(t.map((e=>({...e,priorityValue:e.roleId===r?s:e.priorityValue})))));var r,s},disabled:i},r.createElement(De,{type:`Role-${e.value}`,rounded:!1,useSecondarySprites:!0,size:32})),r.createElement("div",{className:"recruitment-spot-icon-specs-selector__role-label"},r.createElement(vn,null,`#### ${e.label}`))),r.createElement("div",{className:"recruitment-spot-icon-specs-selector__spec-icons-container"},e.specs.map((e=>r.createElement(F,{styles:["unstyled"],className:`recruitment-spot-icon-specs-selector__spec-icon recruitment-spot-icon-specs-selector__spec-icon--editable ${0!==e.priorityValue?"recruitment-spot-icon-specs-selector__selected-spec-icon":""} ${i?"recruitment-spot-icon-specs-selector__disabled-spec-icon":""}`,key:e.id,onClick:()=>{return!i&&(r=e.id,s=e.priorityValue===a?l:a,void n(t.map((e=>({...e,priorityValue:e.id===r?s:e.priorityValue})))));var r,s},disabled:i},r.createElement("div",null,r.createElement(De,{type:e.fullType,rounded:!1,size:32,useSecondarySprites:!0,tooltip:i?null:{id:`${e.id}`,content:e.specName}}))))))))(e,a,l,m,p,i.isLoading)))):((e,t,n)=>r.createElement("div",{className:"recruitment-spot-icon-specs-selector__spec-display-container "+(n?"recruitment-spot-icon-specs-selector__spec-display-container--single-column":"")},e.filter((e=>e.specs.some((e=>e.priorityValue>t)))).map((e=>r.createElement("div",{key:e.value,className:"recruitment-spot-icon-specs-selector__role-display-container"},r.createElement("div",{className:"recruitment-spot-icon-specs-selector__role-label-display"},r.createElement(vn,null,`#### ${e.label}`)),r.createElement("div",{className:"recruitment-spot-icon-specs-selector__spec-icons-container"},e.specs.filter((e=>e.priorityValue>t)).map((e=>r.createElement("div",{className:"recruitment-spot-icon-specs-selector__spec-icon",key:e.id},r.createElement(De,{type:e.fullType,rounded:!1,size:32,useSecondarySprites:!0,tooltip:{id:`${e.id}`,content:e.specName}}))))))))))(g,m,u))}sf.propTypes={roles:i().arrayOf(Uh),priorities:i().arrayOf(Uh),specsAndPriorities:i().arrayOf(ef),updateSpecsAndPriorities:i().func.isRequired,status:Lt.isRequired,isBeingEdited:i().bool};var of=sf;function cf(e,t){return t?`<Styled type="${t}">${e}</Styled>`:e}function uf(e,t){return`<ActorIcon rounded="${!(arguments.length>2&&void 0!==arguments[2])||arguments[2]}" useSecondarySprites="${arguments.length>3&&void 0!==arguments[3]&&arguments[3]}" type="${e}">${t}</ActorIcon>`}function df(e){let{roles:t,priorities:n,specsAndPriorities:a,updateSpecsAndPriorities:l,status:i,isBeingEdited:s=!1}=e;const o=(0,r.createRef)(),c=jn(o),[u,d]=(0,r.useState)(!0),m=(0,r.useMemo)((()=>Math.min(...n.map((e=>e.value)))),[n]),p=(0,r.useMemo)((()=>Math.max(...n.map((e=>e.value)))),[n]),g=t.map((e=>{const t=a.filter((t=>t.roleId===e.value)).sort(((e,t)=>e.id-t.id));return{...e,specs:t,options:t.map((e=>({value:e.id,label:e.specName}))),selectedOptions:t.filter((e=>e.priorityValue>m)).map((e=>({value:e.id,label:e.specName})))}}));return(0,r.useEffect)((()=>{d(c.width<750)}),[d,c]),r.createElement("div",{ref:o},r.createElement("div",{className:"recruitment-spot-specs-multi-selector "+(u?"":"recruitment-spot-specs-multi-selector--multi-column")},s?g.map((e=>((e,t,n,a,l,i)=>r.createElement("div",{className:"recruitment-spot-specs-multi-selector__role-container",key:e.value},r.createElement("div",null,r.createElement(vn,null,`#### ${e.label}`)),r.createElement("div",null,r.createElement(ma.ZP,{isMulti:!0,defaultValue:e.selectedOptions,options:e.options,menuPortalTarget:document.body,onChange:r=>((e,r)=>{const i=r.map((e=>e.value));n(t.map((t=>{const n=t.roleId===e,r=n&&i.includes(t.id)?l:a;return{...t,priorityValue:n?r:t.priorityValue}})))})(e.value,r),styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"}),multiValueRemove:e=>({...e,color:"#222"})},isDisabled:i}))))(e,a,l,m,p,i.isLoading))):((e,t)=>r.createElement(r.Fragment,null,e.filter((e=>e.specs.some((e=>e.priorityValue>t)))).map((e=>r.createElement("div",{key:e.value},r.createElement("div",null,r.createElement(vn,null,`#### ${e.label}`)),r.createElement("div",null,r.createElement(vn,{enhanced:!0,styles:["inline"]},Hn(e.specs.filter((e=>e.priorityValue>t)).map((e=>uf(e.fullType,e.specName,!1,!0)))))))))))(g,m)))}df.propTypes={roles:i().arrayOf(Uh),priorities:i().arrayOf(Uh),specsAndPriorities:i().arrayOf(ef),updateSpecsAndPriorities:i().func.isRequired,status:Lt.isRequired,isBeingEdited:i().bool};var mf=df;const pf=(e,t,n,a,l,i)=>{const s=0===e;return t?r.createElement("div",{className:"editable-recruitment-spot__quantity"},r.createElement("div",{className:"editable-recruitment-spot__quantity-label"},r.createElement(vn,null,`#### ${trans("global.quantity")}:`)),r.createElement("div",{className:"editable-recruitment-spot__quantity-input"},r.createElement(ii,{type:"number",value:s?"":e,onChange:e=>n(e.value),onFocus:()=>i(!0),onBlur:()=>i(!1),disabled:a.isLoading||s&&!l})),r.createElement("label",{className:"editable-recruitment-spot__any-amount-label"},r.createElement("input",{type:"checkbox",checked:s,onChange:e=>{e.persist(),n(e.target.checked?0:1)}})," ",trans("recruitment.any_amount"))):e>1||s?r.createElement("div",{className:"editable-recruitment-spot__quantity-view-message"},trans(e>1?"recruitment.n_spots_available":"recruitment.multiple_spots_available",{quantity:e})):null},gf=(e,t,n,a)=>r.createElement(ti,{save:e,cancel:t,status:n,hasPendingChanges:a});function hf(e){let{spotIndex:t,roles:n,priorities:a,description:l,quantity:i,spotLabel:s,specsAndPriorities:o,updateRecruitmentSpot:c,deleteRecruitmentSpot:u,allCategoryName:d,save:m,cancelEdit:p,status:g,hasPendingChanges:h,usesSpecPriority:f,defaultIsBeingEdited:b=!1,userIsOfficer:E=!1}=e;const[v,y]=(0,r.useState)(b),[_,w]=(0,r.useState)(!1),[k,N]=(0,r.useState)(!1),T=(0,r.useRef)(!1),C=Nu("(pointer: coarse)"),S=()=>{v&&p(),y(!v)},I=_||!E?[]:[{icon:v?"close":"edit",label:v?trans("global.cancel"):trans("global.edit"),onClick:S,disabled:g.isLoading},...v?[]:[{icon:"delete",label:trans("global.delete"),onClick:()=>w(!0),disabled:g.isLoading}]],x=e=>{const n=e>=0||isNaN(e)?e||0:1;c(t,l,n,o)},P=e=>{c(t,l,i,e)},R=()=>{T.current=!0,m()};return(0,r.useEffect)((()=>{T&&g.isSuccess&&(T.current=!1,y(!1))}),[g]),r.createElement(Mn,{title:r.createElement(vn,null,`### ${s}`),actions:I,className:"editable-recruitment-spot",contentCssStyle:{overflow:"visible"}},_?((e,t,n)=>r.createElement("div",{className:"editable-recruitment-spot__delete-box"},r.createElement("div",{className:"editable-recruitment-spot__delete-confirmation-box"},r.createElement("div",{className:"editable-recruitment-spot__delete-confirmation-box-label"},trans("recruitment.are_you_sure_delete_spot")),r.createElement("div",{className:"editable-recruitment-spot__delete-confirmation-box-buttons"},r.createElement(F,{onClick:()=>t(e)},trans("global.yes")),r.createElement(F,{onClick:()=>n(!1),styles:["warning"]},trans("global.no"))))))(t,u,w):null,((e,t,n,a)=>t||e?r.createElement("div",{className:"editable-recruitment-spot__description"},t?r.createElement(r.Fragment,null,r.createElement(vn,null,`#### ${trans("global.description")}:`),r.createElement(Ic,{defaultValue:e,maxLength:500,showRemainingCharacters:!1,resizeable:!1,textareaClass:"editable-recruitment-spot__textarea-container",onChange:e=>{e.persist(),n(e)},disabled:a.isLoading})):r.createElement("span",null,e)):null)(l,v,(0,hi.debounce)((e=>{c(t,e.target.value,i,o)}),500),g),v?pf(i,v,x,g,k,N):null,f?((e,t,n,a,l,i,s,o)=>l?r.createElement("div",{className:"editable-recruitment-spot__editable-specs"},r.createElement(vn,null,`#### ${trans("recruitment.specs")}:`),r.createElement(af,{roles:t,priorities:n,specsAndPriorities:e,updateSpecsAndPriorities:i,status:s,saveAndCancelButtonsComponent:o})):r.createElement("div",{className:"editable-recruitment-spot__specs-view"},r.createElement(lf,{allCategoryName:a,priorities:n,specsAndPriorities:e})))(o,n,a,d,v,P,g,gf(R,S,g,h)):((e,t,n,a,l,i,s,o,c,u,d)=>r.createElement(r.Fragment,null,r.createElement("div",{className:l?"editable-recruitment-spot__editable-specs":""},d?r.createElement(mf,{roles:t,priorities:n,specsAndPriorities:e,updateSpecsAndPriorities:i,status:s,isBeingEdited:l}):r.createElement(of,{roles:t,priorities:n,specsAndPriorities:e,updateSpecsAndPriorities:i,status:s,isBeingEdited:l})),l?gf(o,c,s,u):null))(o,n,a,0,v,P,g,R,S,h,C),v?null:pf(i,v,x,g))}hf.propTypes={spotIndex:i().number.isRequired,roles:i().arrayOf(Uh),priorities:i().arrayOf(Uh),description:i().string,quantity:i().number.isRequired,spotLabel:i().string.isRequired,specsAndPriorities:i().arrayOf(ef),updateRecruitmentSpot:i().func.isRequired,deleteRecruitmentSpot:i().func.isRequired,allCategoryName:i().string.isRequired,cancelEdit:i().func.isRequired,save:i().func.isRequired,status:Lt.isRequired,hasPendingChanges:i().bool.isRequired,isLoading:i().bool,defaultIsBeingEdited:i().bool,userIsOfficer:i().bool,usesSpecPriority:i().bool};var ff=hf;function bf(e){let{allCategoryName:t,roles:n,priorities:a,recruitmentSpots:l,defaultSpecsAndPriorities:i=[],style:s="tile",padding:o,required:c,usesSpecPriority:u}=e;const d=(0,r.useRef)(!1),m=zi(),p=Zl(),{user:g}=Dl(),h=Bi(g,p),f=(0,r.useRef)(null),{value:b,isBeingEdited:E,pendingValue:v,setPendingValue:y,hasPendingChanges:_,cancelEdit:w,save:k,status:N}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{guildRecruitmentSettings:a,mergeGuildRecruitmentSettings:l}=gh();t.onHttpSuccess=(0,r.useCallback)(((e,t)=>{l?.({recruitmentSpots:t})}),[l]);const i=(0,r.useCallback)((()=>a?.recruitmentSpots??e??[]),[a,e]),s=ql().from(hh(i(),t)).withHttpSave(`/guild/recruitmentSpots/${n}`,(e=>({recruitmentSpots:e}))).build(),o=s.setValue;return(0,r.useEffect)((()=>{o(i())}),[i,o]),s}(l||[]),T=(e,t,n,a)=>{y([...v.filter((t=>t.order!==e)),{order:e,description:t,quantity:n,specsAndPriorities:a}].sort(((e,t)=>e.order-t.order)))},C=(e,t,n,a)=>{f.current={order:e,description:t,quantity:n,specsAndPriorities:a},T(e,t,n,a)},S=()=>{w()},I=e=>{d.current=!0,y(v.filter((t=>t.order!==e&&t.order!==f.current?.order)))};(v.length===b.length||f.current&&!v.find((e=>e.order===f.current.order)))&&(f.current=null);const x=b.length>0,P=!!f.current;let R=0;return d.current&&(d.current=!1,k()),r.createElement("div",{className:"guild-specs-and-priorities-tile"},r.createElement(In,{title:trans("recruitment.recruitment"),titleUrl:"/recruitment/guild-looking-for-players",padding:o||(x||E?"narrow":"regular"),style:s,required:c&&!x},r.createElement(Pn,null,r.createElement(vn,null,trans(x?"recruitment.guild_is_recruiting":"recruitment.guild_is_not_recruiting",{guildName:m})),v.map((e=>{const l=`${trans("recruitment.spot_singular")} ${++R}`,s=f.current?.order===e.order;return r.createElement("div",{key:e.order,className:"guild-specs-and-priorities-tile__spot-container"},r.createElement(ff,{updateRecruitmentSpot:s?C:T,deleteRecruitmentSpot:I,spotLabel:l,spotIndex:e.order,allCategoryName:t,quantity:e.quantity,specsAndPriorities:e.specsAndPriorities.length?e.specsAndPriorities:i,description:e.description,priorities:a,roles:n,save:k,cancelEdit:s?S:w,status:N,hasPendingChanges:_,defaultIsBeingEdited:!b.find((t=>t.order===e.order)),userIsOfficer:h,usesSpecPriority:u}))})),h?r.createElement("div",{className:"guild-specs-and-priorities-tile__add-spot-button-container"},r.createElement(F,{disabled:P||N.isLoading,onClick:()=>{if(v.length!==b.length)return;const e=Math.max(Math.max.apply(null,v.map((e=>e.order)))+1,0);f.current={order:e,description:"",quantity:1,specsAndPriorities:[]},T(e,"",1,[])}},trans("recruitment.add_spot"))):null)))}bf.propTypes={...tf,style:i().string,required:i().bool,usesSpecPriority:i().bool};var Ef=bf,vf={allCategoryName:i().string.isRequired,roles:i().arrayOf(Uh),priorities:i().arrayOf(Uh),specsAndPriorities:i().arrayOf(ef)},yf=i().shape({items:i().arrayOf(Uh).isRequired,selectedItems:i().arrayOf(Uh).isRequired});function _f(){return _f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_f.apply(this,arguments)}function wf(e){let{items:t,selectedItems:n,onBeginEdit:a,onEndEdit:l,padding:i="regular",style:s="tile"}=e;const[o]=np(n,(0,r.useCallback)((e=>e?.map((e=>e.value))),[])),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{guildRecruitmentSettings:a,mergeGuildRecruitmentSettings:l}=gh();t.onHttpSuccess=(0,r.useCallback)(((e,t)=>{l?.({activityIds:t})}),[l]);const i=(0,r.useCallback)((()=>a?.activityIds??e??[]),[a,e]),s=ql().from(hh(i(),t)).withHttpSave(`/guild/activities/${n}`,(e=>({activityIds:e}))).build(),o=s.setValue;return(0,r.useEffect)((()=>{o(i())}),[i,o]),s}(o,{onBeginEdit:a,onEndEdit:l}),u=zi();return r.createElement("div",{className:"guild-activities-tile"},r.createElement(In,{title:trans("recruitment.activities"),actions:c.tileActions,padding:i,style:s},r.createElement(Wh,_f({label:trans("recruitment.editing_guild_activities_description",{guildName:u}),notSetLabel:trans("global.any"),items:t,isMulti:!0},c))))}wf.propTypes={...yf.items,...yf.selectedItems,onBeginEdit:i().func,onEndEdit:i().func,padding:i().string,style:i().string};var kf=wf;function Nf(){return Nf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nf.apply(this,arguments)}function Tf(e){let{items:t,selectedItem:n,onBeginEdit:a,onEndEdit:l,padding:i="regular",style:s="tile",required:o}=e;const[c]=np(n,(0,r.useCallback)((e=>e?.value),[])),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{guildRecruitmentSettings:a,mergeGuildRecruitmentSettings:l}=gh();t.onHttpSuccess=(0,r.useCallback)(((e,t)=>{l?.({languageCode:t})}),[l]);const i=(0,r.useCallback)((()=>a?.languageCode??e),[a,e]),s=ql().from(hh(i(),t)).withHttpSave(`/guild/language/${n}`,(e=>({languageCode:e}))).build(),o=s.setValue;return(0,r.useEffect)((()=>{o(i())}),[i,o]),s}(c,{onBeginEdit:a,onEndEdit:l}),d=zi();return r.createElement("div",{className:"guild-language-tile"},r.createElement(In,{title:trans("recruitment.language"),actions:u.tileActions,padding:i,style:s,required:o&&!u.value},r.createElement(Wh,Nf({label:trans("recruitment.editing_guild_language_description",{guildName:d}),items:t},u))))}Tf.propTypes={...Bh.items,...Bh.selectedItem,onBeginEdit:i().func,onEndEdit:i().func,padding:i().string,style:i().string,required:i().bool};var Cf=Tf;function Sf(){return Sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sf.apply(this,arguments)}function If(e){let{guildActivities:t,guildLanguage:n}=e;const[a,l]=(0,r.useState)(!0),[i,s]=(0,r.useState)(!0);return r.createElement("div",{className:"guild-activities-and-language-tiles "+(a&&i?"":" guild-activities-and-language-tiles--single")},r.createElement("div",{hidden:!a},r.createElement(kf,Sf({},t,{onBeginEdit:(0,r.useCallback)((()=>s(!1)),[]),onEndEdit:(0,r.useCallback)((()=>s(!0)),[]),padding:"narrow"}))),r.createElement("div",{hidden:!i},r.createElement(Cf,Sf({},n,{onBeginEdit:(0,r.useCallback)((()=>l(!1)),[]),onEndEdit:(0,r.useCallback)((()=>l(!0)),[]),padding:"narrow"}))))}If.propTypes={guildActivities:yf,guildLanguage:Bh};var xf=If;function Pf(e){let{value:t,pendingValue:n,isBeingEdited:a,setPendingValue:l,hasPendingChanges:i,save:s,cancelEdit:o,status:c,defaultContent:u,maxLength:d,showRemainingCharacters:m=!0,displayValueAsMarkdown:p=!0,transformValueForDisplay:g}=e;const h=c.isLoading,f=g?g(t):t;return r.createElement(Pn,{className:"editable-input-text"},a?r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(ii,{onChange:e=>l(e.value),defaultValue:t,disabled:h,className:"input-text--full-width",maxLength:d}),d&&m&&r.createElement("div",{className:"editable-input-text__characters-remaining"},n?.length??0,"/",d)),r.createElement(ti,{save:s,cancel:o,status:c,hasPendingChanges:i})):u&&!t?.length?r.createElement("div",null,u):r.createElement("div",{className:"editable-input-text__display-value"},p?r.createElement(vn,null,f):f))}Pf.propTypes={value:i().string,pendingValue:i().string,isBeingEdited:i().bool,setPendingValue:i().func.isRequired,hasPendingChanges:i().bool,save:i().func,cancelEdit:i().func,status:Lt.isRequired,defaultContent:i().node,maxLength:i().number,showRemainingCharacters:i().bool,displayValueAsMarkdown:i().bool,transformValueForDisplay:i().func};var Rf=Pf,Af=function(e){let{contactInformationText:t,style:n,showRequired:a=!0,defaultMessageWhenEmpty:l=null}=e;const{value:i,pendingValue:s,isBeingEdited:o,setPendingValue:c,hasPendingChanges:u,tileActions:d=[],cancelEdit:m,save:p,status:g}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{guildRecruitmentSettings:a,mergeGuildRecruitmentSettings:l}=gh();t.onHttpSuccess=(0,r.useCallback)(((e,t)=>{l?.({contactInformation:t})}),[l]);const i=(0,r.useCallback)((()=>a?.contactInformation??(e.text?e:{})),[a,e]),s=ql().from(hh(i(),t)).withHttpSave(`/guild/recruitmentContactInformation/${n}`,(e=>e)).build(),o=s.setValue;return(0,r.useEffect)((()=>{o(i())}),[i,o]),s}(t);return r.createElement(In,{title:trans("recruitment.contact_information"),style:n,actions:d,required:a&&!i?.text?.length},r.createElement(Rf,{value:i?.text,pendingValue:s?.text,isBeingEdited:o,setPendingValue:e=>c({...s,text:e}),hasPendingChanges:u,cancelEdit:m,save:p,status:g,maxLength:200,defaultContent:r.createElement(Pn,{position:"left",gap:"smaller"},r.createElement(vn,null,l||trans("recruitment.no_contact_info_has_been_set"))),displayValueAsMarkdown:!0}))};function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lf.apply(this,arguments)}function $f(e){let{signedUrls:t,anyClip:n,guildId:a,guildName:l,guildFaction:i,guildRegion:s,guildHeader:o,navigation:c,guildDescription:u,guildSchedule:d,guildRankingsTileTitle:m,guildRankingsLinkIsVisible:p,guildSpecsAndPriorities:g,guildActivities:h,guildLanguage:f,guildRecentReports:b,guildStreamChannel:E,usesSpecPriority:v,guildContactInformationText:y}=e;const _=(0,r.useMemo)((()=>({text:y})),[y]);return r.createElement(wm,{signedUrls:t},r.createElement("div",{className:"guild-profile-page"},r.createElement(Wl.Provider,{value:a},r.createElement(Oi.Provider,{value:l},r.createElement(dh.Provider,{value:i},r.createElement(Xa.Provider,{value:s},r.createElement(Hi,o),r.createElement(Mi,null,r.createElement(Gi,Lf({},c,{relatedLinks:o.relatedLinks})),r.createElement("div",{className:"guild-profile-page__content"},r.createElement("div",{className:"guild-profile-page__column"},r.createElement(bh,{guildFaction:i,guildDescription:u,anyClip:n}),r.createElement(Af,{contactInformationText:_,style:"tile",showRequired:!1}),r.createElement(Qh,{guildSchedule:d}),r.createElement(Lh,null)),r.createElement("div",{className:"guild-profile-page__column"},r.createElement(Ph,{guildRankingsTileTitle:m,guildRankingsLinkIsVisible:p}),r.createElement(Ef,Lf({},g,{usesSpecPriority:v})),r.createElement(xf,{guildActivities:h,guildLanguage:f}),b.length>0&&r.createElement(kh,{reports:b}),E&&r.createElement(Ah,{guildStreamChannel:E}))))))))))}$f.propTypes={signedUrls:i().array.isRequired,anyClip:i().object,guildId:i().number.isRequired,guildName:i().string.isRequired,guildFaction:i().number,guildRegion:i().exact({id:i().number,name:i().string,shortName:i().string}),guildHeader:i().object,navigation:i().object,guildDescription:i().string,guildSchedule:i().object,guildRankingsTileTitle:i().string.isRequired,guildRankingsLinkIsVisible:i().bool.isRequired,guildSpecsAndPriorities:i().shape(vf),guildActivities:yf,guildLanguage:Bh,guildRecentReports:i().array,guildStreamChannel:i().string,usesSpecPriority:i().bool,banner:i().exact({id:i().number.isRequired,url:i().string.isRequired}),guildContactInformationText:i().string},sm(".guild-profile-page-container",$f);var Of=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,s.k6)(),a=(0,s.TH)(),l=ys("zone",e),i=ys("difficulty"),o=ys("competition"),[c,u]=(0,r.useState)({zoneId:l,difficulty:i});return(0,r.useEffect)((()=>{const e=new URLSearchParams({zone:c.zoneId});c.difficulty&&e.set("difficulty",c.difficulty.toString()),o&&e.set("competition",o.toString());const r={pathname:a.pathname,search:e.toString()};t?n.replace(r):n.push(r)}),[c,n,a.pathname,o,t]),{zoneId:l,difficulty:i,competitionId:o,setZoneFilters:u}};function zf(e){let{zoneId:t,difficulty:n,competitionId:a,guildId:l,onChange:i,emitChangeForInitialDefaultDifficulty:s=!1}=e;const[o,c]=(0,r.useState)(n),u=`/zone/${t}/difficulties`,d=new URLSearchParams({guild:l.toString()});return a&&d.set("competition",a.toString()),r.createElement(Ot,{url:`${u}?${d.toString()}`,onHttpSuccess:(0,r.useCallback)((e=>{let{difficulties:t,difficulty:n}=e;c(n),s&&i(t.find((e=>e.value===n))??t[0])}),[s,i]),lazyChildren:e=>{let{difficulties:t}=e;return t.length>1&&r.createElement(r.Fragment,null,r.createElement(vn,null,trans("global.difficulty")+": "),r.createElement(Ns,{difficulties:t,selectedDifficulty:t.find((e=>e.value===(n??o))),onChange:i}))},LoadingState:()=>r.createElement(kt,{fontSize:24})})}var Ff=function(e){let{zonesByExpansions:t,zoneId:n,difficulty:a,competitionId:l,guildId:i,onChange:s,emitChangeForInitialDefaultDifficulty:o=!1}=e;return r.createElement("div",{className:"zone-filters"},r.createElement("div",{className:"zone-filters__container"},r.createElement("div",{className:"zone-filters__filter"},r.createElement(vn,null,trans("global.zone")+": "),r.createElement(ws,{zonesByExpansions:t,selectedZoneId:n,onChange:e=>{s({zoneId:e,difficulty:null,difficultyName:null})}})),r.createElement("div",{className:"zone-filters__filter"},r.createElement(zf,{zoneId:n,difficulty:a,competitionId:l,guildId:i,onChange:(0,r.useCallback)((e=>{s({difficulty:e.value,difficultyName:e.label})}),[s]),emitChangeForInitialDefaultDifficulty:o}))))},Mf=function(e){return r.createElement(Mn,{padding:"narrow",className:"zone-filters-tile"},r.createElement(Ff,e))};function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Df.apply(this,arguments)}function Uf(e){let{anyClip:t,guildId:n,guildName:a,guildRegion:l,guildHeader:i,navigation:s,zoneId:o,zonesByExpansions:c}=e;const{zoneId:u,difficulty:d,competitionId:m,setZoneFilters:p}=Of(o),[g,h]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{h(!0)}),[u,d]),r.createElement(wm,null,r.createElement(Da,{zoneId:u,difficulty:d,guildId:n,onLoad:(0,r.useCallback)((()=>h(!1)),[]),refreshOnlyWhenVisible:!0},r.createElement(Wl.Provider,{value:n},r.createElement(Oi.Provider,{value:a},r.createElement(Xa.Provider,{value:l},r.createElement("div",{className:"guild-progress-page"},r.createElement(Hi,i),r.createElement(Mi,null,r.createElement(Pn,{gap:"small"},r.createElement("div",null,r.createElement(Gi,Df({},s,{relatedLinks:i.relatedLinks})),r.createElement(Mf,{zonesByExpansions:c,zoneId:u,difficulty:d,competitionId:m,guildId:n,onChange:(0,r.useCallback)((e=>p((t=>({...t,...e})))),[p])})),g?r.createElement(In,null,r.createElement(kt,{label:trans("reports.loading_data")})):r.createElement(jg,{zoneId:u,zoneIdLabel:u.toString(),difficulty:d,guildId:n,enableLinks:!1,showNavigation:!1,showLatestProgressUpdates:!1,anyClip:t,anyClipPosition:"encounterProgressDurationChart"})))),r.createElement(ih,null))))))}Uf.propTypes={anyClip:i().object,guildId:i().number.isRequired,guildName:i().string.isRequired,guildRegion:i().exact({id:i().number,name:i().string,shortName:i().string}),guildHeader:i().object,navigation:i().object,zoneId:i().number.isRequired,difficulty:i().number,zonesByExpansions:i().array},sm(".guild-progress-page-container",Uf);var Bf=function(e){let{competitionId:t,difficulty:n,guildId:a,guildIds:r,encounterId:l,color:i,xAxis:s,view:o,...c}=e;const u=new URLSearchParams;return t&&t>1?u.set("competition",t.toString()):n&&u.set("difficulty",n.toString()),a&&u.set("guild",a.toString()),r&&u.set("guilds",r.join(",")),l&&u.set("encounter",l.toString()),i&&u.set("color",i.toString()),s&&u.set("xAxis",s),o&&u.set("view",o),Object.entries(c).forEach((e=>{let[t,n]=e;void 0!==n&&u.set(t,Array.isArray(n)?n.join(","):`${n}`)})),u.toString()};function Vf(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l}=e;return r.createElement(Pn,null,r.createElement(vn,null,trans("embeds.real_time_guild_progress_widget_url_label")+":"),r.createElement(Ni,{valueToCopy:`${window.location.protocol}//${window.location.host}/embed/guild-progress-tile/${n}?${Bf({competitionId:a,guildId:t,difficulty:l})}`}),r.createElement(vn,null,`\n${trans("embeds.widget_can_be_used_in_obs")}:\n\n1. ${trans("embeds.instruction_add_browser_source")}\n2. ${trans("embeds.instruction_copy_above_url_for_source")}\n3. ${trans("embeds.instruction_set_source_width_and_height",{width:850,height:450})}\n4. ${trans("embeds.instruction_click_ok")}\n5. ${trans("embeds.instruction_resize_using_edges_and_corners")}\n`))}Vf.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired};var qf=Vf,jf=function(){return ys("guild")};function Hf(e,t){return"true"===e||"false"!==e&&t}var Gf=function(e,t){const n=Fa(e),[a,l]=(0,r.useState)(Hf(n,t));return(0,r.useLayoutEffect)((()=>{l(Hf(n,t))}),[t,n]),a};function Wf(){return Wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wf.apply(this,arguments)}function Kf(e){let{guildId:t,isTransparent:n,showTopLeft:a,showTopRight:l,showBottomLeft:i,showBottomRight:s}=e;const{progressRace:o,isLoadingNewProgressRaceParameters:c}=Ba(),u=(0,r.useRef)(),d=jn(u);return r.createElement("div",{ref:u,className:"guild-progress-tile-embed"},!o&&c&&r.createElement(_g,{height:450*d.width/850},r.createElement(kt,null)),o?.guildProgressTiles?.length>0&&r.createElement("div",{className:"guild-progress-tile-embed__content"},r.createElement(Dr,{href:`/guild/progress/${t}`}),r.createElement(jm,Wf({},o.guildProgressTiles[0],{baseSize:50*d.width/850,isStreaming:!1,showNoPullsText:!1,showNoStatsText:!1,composition:null,progressSuffix:o.difficultyAbbreviation,isTransparent:n,showTopLeft:a,showTopRight:l,showBottomLeft:i,showBottomRight:s}))),0===o?.guildProgressTiles?.length&&r.createElement(_g,{height:450*d.width/850},r.createElement(vn,null,trans("global.no_data_found")+".")))}function Zf(e){let{game:t,zoneId:n}=e;const a=jf(),l=Gf("isTransparent",!1),i=Gf("showTopLeft",!0),s=Gf("showTopRight",!0),o=Gf("showBottomLeft",!0),c=Gf("showBottomRight",!0);return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(Kf,{guildId:a,isTransparent:l,showTopLeft:i,showTopRight:s,showBottomLeft:o,showBottomRight:c})))}function Yf(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l}=e;return r.createElement(In,{title:trans("embeds.guild_progress_tile_embed_name"),className:"guild-progress-tile-embed-instructions-tile",padding:"narrow"},r.createElement("div",{className:"guild-progress-tile-embed-instructions-tile__content"},r.createElement(Mn,{title:trans("global.preview")},r.createElement("div",{className:"guild-progress-tile-embed-instructions-tile__preview"},r.createElement(Kf,{guildId:t}))),r.createElement(Mn,{title:trans("global.instructions")},r.createElement(qf,{guildId:t,zoneId:n,competitionId:a,difficulty:l}))))}Kf.propTypes={guildId:i().number.isRequired,isTransparent:i().bool,showTopLeft:i().bool,showTopRight:i().bool,showBottomLeft:i().bool,showBottomRight:i().bool},Zf.propTypes={game:i().exact(Kg),zoneId:i().number.isRequired},sm(".guild-progress-tile-embed-container",Zf),Yf.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired};var Jf=Yf;function Xf(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l}=e;return r.createElement(Pn,null,r.createElement(vn,null,trans("embeds.real_time_guild_progress_widget_url_label")+":"),r.createElement(Ni,{valueToCopy:`${window.location.protocol}//${window.location.host}/embed/guild-progress-encounter-pulls/${n}?${Bf({competitionId:a,guildId:t,difficulty:l})}`}),r.createElement(vn,null,`\n${trans("embeds.widget_can_be_used_in_obs")}:\n\n1. ${trans("embeds.instruction_add_browser_source")}\n2. ${trans("embeds.instruction_copy_above_url_for_source")}\n3. ${trans("embeds.instruction_set_source_width_and_height_as_desired_with_specific_example",{width:200,height:700})}\n4. ${trans("embeds.instruction_click_ok")}\n5. ${trans("embeds.instruction_resize_using_edges_and_corners")}\n`))}Xf.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired};var Qf=Xf;function eb(e){let{guildId:t}=e;const{progressRace:n,progressRaceStatus:a}=Ba(),[l,i]=(0,r.useState)();return(0,r.useLayoutEffect)((()=>{n?.guilds?.[0]?.encounters?.length&&i(n.guilds[0].encounters?.find((e=>e.id===n.guilds[0].currentEncounterId)))}),[n]),r.createElement("div",{className:"guild-progress-encounter-pulls-embed"},!l&&a.isLoading&&r.createElement(_g,null,r.createElement(kt,null)),l&&r.createElement("div",{className:"guild-progress-encounter-pulls-embed__content"},r.createElement(Dr,{href:`/guild/progress/${t}`}),r.createElement(Vp,l)),!l&&!a.isLoading&&r.createElement(_g,null,r.createElement(vn,null,trans("global.no_data_found")+".")))}function tb(e){let{game:t,zoneId:n}=e;const a=jf();return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(eb,{guildId:a})))}function nb(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l}=e;return r.createElement(In,{title:trans("embeds.guild_progress_encounter_pulls_embed_name"),className:"guild-progress-encounter-pulls-embed-instructions-tile",padding:"narrow"},r.createElement("div",{className:"guild-progress-encounter-pulls-embed-instructions-tile__content"},r.createElement(Mn,{title:trans("global.preview")},r.createElement("div",{className:"guild-progress-encounter-pulls-embed-instructions-tile__preview-container"},r.createElement("div",{className:"guild-progress-encounter-pulls-embed-instructions-tile__preview"},r.createElement(eb,{guildId:t})))),r.createElement(Mn,{title:trans("global.instructions")},r.createElement(Qf,{guildId:t,zoneId:n,competitionId:a,difficulty:l}))))}eb.propTypes={guildId:i().number.isRequired},tb.propTypes={game:i().exact(Kg),zoneId:i().number.isRequired},sm(".guild-progress-encounter-pulls-embed-container",tb),nb.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired};var ab=nb;function rb(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l}=e;return r.createElement(Pn,null,r.createElement(vn,null,trans("embeds.real_time_guild_progress_widget_url_label")+":"),r.createElement(Ni,{valueToCopy:`${window.location.protocol}//${window.location.host}/embed/guild-progress-composition/${n}?${Bf({competitionId:a,guildId:t,difficulty:l})}`}),r.createElement(vn,null,`\n${trans("embeds.widget_can_be_used_in_obs")}:\n\n1. ${trans("embeds.instruction_add_browser_source")}\n2. ${trans("embeds.instruction_copy_above_url_for_source")}\n3. ${trans("embeds.instruction_set_source_width_and_height_as_desired_with_specific_examples_listed_after")}\n    1. ${trans("embeds.instruction_x_width_and_y_height",{width:1920,height:80})}\n    2. ${trans("embeds.instruction_x_width_and_y_height",{width:960,height:130})}\n    3. ${trans("embeds.instruction_x_width_and_y_height",{width:600,height:180})}\n4. ${trans("embeds.instruction_click_ok")}\n5. ${trans("embeds.instruction_resize_using_edges_and_corners")}\n`))}rb.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired};var lb=rb;function ib(e){let{guildId:t}=e;const{progressRace:n,progressRaceStatus:a}=Ba(),[l,i]=(0,r.useState)();return(0,r.useLayoutEffect)((()=>{n?.guilds?.[0]&&i(n.guilds[0].encounters?.find((e=>e.id===n.guilds[0].currentEncounterId))?.composition)}),[n]),r.createElement("div",{className:"guild-progress-composition-embed"},!l&&a.isLoading&&r.createElement(_g,{width:"100%",height:"100%"},r.createElement(kt,null)),l&&r.createElement("div",{className:"guild-progress-composition-embed__content"},r.createElement(Dr,{href:`/guild/progress/${t}`}),r.createElement(Pm,{roles:l.roles,iconSize:36})),!l&&!a.isLoading&&r.createElement(_g,{width:"100%",height:"100%"},r.createElement(vn,null,trans("global.no_data_found")+".")))}function sb(e){let{game:t,zoneId:n}=e;const a=jf();return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(ib,{guildId:a})))}function ob(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l}=e;return r.createElement(In,{title:trans("embeds.guild_progress_composition_embed_name"),className:"guild-progress-composition-embed-instructions-tile",padding:"narrow"},r.createElement("div",{className:"guild-progress-composition-embed-instructions-tile__content"},r.createElement(Pn,null,r.createElement(Mn,{title:trans("global.preview")+" (1920 x 80)"},r.createElement("div",{style:{width:1920,height:80},className:"guild-progress-composition-embed-instructions-tile__preview"},r.createElement(ib,{guildId:t}))),r.createElement(Mn,{title:trans("global.preview")+" (960 x 130)"},r.createElement("div",{style:{width:960,height:130},className:"guild-progress-composition-embed-instructions-tile__preview"},r.createElement(ib,{guildId:t}))),r.createElement(Mn,{title:trans("global.preview")+" (600 x 180)"},r.createElement("div",{style:{width:600,height:180},className:"guild-progress-composition-embed-instructions-tile__preview"},r.createElement(ib,{guildId:t})))),r.createElement(Mn,{title:trans("global.instructions")},r.createElement(lb,{guildId:t,zoneId:n,competitionId:a,difficulty:l}))))}ib.propTypes={guildId:i().number.isRequired},sb.propTypes={game:i().exact(Kg),zoneId:i().number.isRequired},sm(".guild-progress-composition-embed-container",sb),ob.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired};var cb=ob;function ub(e){let{title:t,subtitle:n}=e;return r.createElement("div",{className:"race-in-review-embed-header"},r.createElement("div",{className:"race-in-review-embed-header__title"},t),r.createElement("div",{className:"race-in-review-embed-header__subtitle"},n))}ub.propTypes={title:i().node,subtitle:i().node};var db=ub,mb=function(e){let{color:t="#517fa5",guildLogoImageUrl:n,guildLogoImageIsCustom:a,raceInReviewLogoImageUrl:l,guildLogoImageFallbackUrl:i=null}=e;return r.createElement("div",{className:"race-in-review-embed-footer"},n&&r.createElement("div",{className:"race-in-review-embed-footer__guild-logo"},r.createElement(Ln,{url:n,fallbackUrl:i??n,isCustom:a,size:32})),r.createElement("div",{className:"race-in-review-embed-footer__strip",style:{background:`linear-gradient(90deg, ${t} 0%, rgba(0,0,0,0.15) 100%)`}}),r.createElement("a",{href:"/zone/race/latest",target:"_blank"},r.createElement("img",{className:"race-in-review-embed-footer__race-in-review",src:l,alt:trans("progress-race.race_in_review")})))},pb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[t,n]=fi(0,300);(0,r.useEffect)((()=>{const e=()=>n((e=>e+1));return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}));const a=(0,r.useRef)(),l=(0,r.useRef)(),i=(0,r.useRef)(),[s,o]=(0,r.useState)();return(0,r.useLayoutEffect)((()=>{const e=a.current?.getBoundingClientRect().height,t=l.current?.getBoundingClientRect().height,n=i.current?.getBoundingClientRect().height;o(e-t-n)}),[a,l,i,t,...e]),{containerRef:a,topRef:l,bottomRef:i,height:s}},gb=function(e){let{perPullByGuilds:t,height:n=350,xAxis:a="pull",title:l,theme:i}=e;const s=hg[a],o=t.map((e=>({guildName:e.guildName,bestPercentages:e.perPull.reduce(((e,t,n)=>{const a=e.length>0?e[e.length-1].y:Number.MAX_VALUE;return e.push({x:s.getValue(t,n),y:t.fightPercentage<a?t.fightPercentage:a}),e}),[])}))),c=(0,hi.merge)({title:void 0!==l?l:{text:trans("progress-race.best_fight_percentage_per_pull")},chart:{height:n},plotOptions:{series:{turboThreshold:0,marker:{enabled:!1}}},xAxis:{title:{text:s.label},min:Math.min(...o.map((e=>e.bestPercentages)).reduce(((e,t)=>e.concat(t)),[]).map((e=>e.x))),type:s.type},yAxis:{title:{text:"%",rotation:0},min:0,max:100},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0,showInLegend:!1},tooltip:{useHTML:!0,headerFormat:`${s.label}: {point.key}<br />`},series:o.map((e=>({name:e.guildName,data:e.bestPercentages})))},i);return r.createElement("div",{className:"fight-best-percentage-per-pull-by-guilds-chart"},r.createElement(Go,{options:c}))};function hb(){const e=Fa("chartTheme",null);if(e)try{const t=JSON.parse(e);return delete t.data,t}catch{return}}function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fb.apply(this,arguments)}const bb=(e,t)=>{if(t)return t;const n=e.find((e=>e.currentEncounterId));return n?.currentEncounterId?n.currentEncounterId:null},Eb=(e,t)=>e[0]?.encounters.find((e=>e.id===t))??null;function vb(e){let{encounterId:t,color:n,xAxis:a,zoneId:l,competitionId:i,difficulty:s,onUrlChange:o,raceInReviewEmbedFooter:c,theme:u}=e;const{progressRace:d,progressRaceStatus:m}=Ba(),p=Va(t),g=(0,r.useMemo)((()=>d?.guilds??[]),[d?.guilds]),h=bb(g,t),f=h?Eb(g,h):null,b=f?g.map((e=>({guildName:e.name,perPull:e.encounters.find((e=>e.id===h))?.perPull??[]}))):[];(0,r.useEffect)((()=>{g.length&&o?.(`${window.location.protocol}//${window.location.host}/embed/fight-percentage-per-pull-chart/${l}?${Bf({competitionId:i,difficulty:s,guildIds:g.map((e=>e.id)),encounterId:t,color:n,xAxis:a})}`)}),[o,s,t,n,g,a,l,i]);const{containerRef:E,topRef:v,bottomRef:y,height:_}=pb([b]);return r.createElement("div",{ref:E,className:"fight-percentage-per-pull-chart-embed"},!b&&m.isLoading&&r.createElement(_g,{height:"100%"},r.createElement(kt,null)),b&&f&&r.createElement("div",{className:"fight-percentage-per-pull-chart-embed__content"},r.createElement("div",{ref:v},r.createElement(db,{title:f.name,subtitle:r.createElement(r.Fragment,null,b.length>1?null:r.createElement(r.Fragment,null,r.createElement("a",{href:`/guild/id/${g[0].id}`,target:"_blank",rel:"noreferrer"},r.createElement("span",{style:{color:n}},`<${b[0].guildName}>`))," "),r.createElement("span",null,b.length>1?trans("progress-race.best_fight_percentage_per_pull"):trans("progress-race.fight_percentage_per_pull")))})),_&&b.length>1?r.createElement(gb,{perPullByGuilds:b,height:_,xAxis:a,theme:u,title:null}):_&&b[0].perPull.length>0?r.createElement(Eg,{perPull:b[0].perPull,height:_,xAxis:a,showPhaseProgressionLines:p?.showPhaseProgressionLinesInFightPercentagePerPullChart??!1,theme:u,title:null,subtitle:null}):r.createElement(_g,{height:_&&isFinite(_)?_:void 0},r.createElement(vn,null,trans("global.no_data_found")+".")),r.createElement("div",{ref:y},r.createElement(mb,fb({color:n},b.length>1?null:{guildLogoImageUrl:g[0].logoImageUrl,guildLogoImageFallbackUrl:g[0].logoImageFallbackUrl,guildLogoImageIsCustom:g[0].logoImageIsCustom},c)))))}function yb(e){let{game:t,zoneId:n,competitionId:a,difficulty:l,raceInReviewEmbedFooter:i}=e;a=ys("competition",a),l=ys("difficulty",l);const s=ys("encounter"),o=Fa("color"),c=Fa("xAxis",gg.Pull),u=hb();return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(vb,{zoneId:n,competitionId:a,difficulty:l,encounterId:s,color:o,xAxis:c,raceInReviewEmbedFooter:i,theme:u})))}function _b(e){let{url:t}=e;return r.createElement(Pn,null,r.createElement(vn,null,trans("embeds.real_time_guild_progress_widget_url_label")+":"),r.createElement(Ni,{valueToCopy:t}),r.createElement(vn,null,`\n${trans("embeds.widget_can_be_used_in_obs")}:\n\n1. ${trans("embeds.instruction_add_browser_source")}\n2. ${trans("embeds.instruction_copy_above_url_for_source")}\n3. ${trans("embeds.instruction_set_source_width_and_height_as_desired_with_specific_examples_listed_after")}\n    1. ${trans("embeds.instruction_x_width_and_y_height",{width:860,height:480})}\n    2. ${trans("embeds.instruction_x_width_and_y_height",{width:400,height:300})}\n4. ${trans("embeds.instruction_click_ok")}\n5. ${trans("embeds.instruction_resize_using_edges_and_corners")}\n`))}yb.propTypes={game:i().exact(Kg),zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired,raceInReviewEmbedFooter:i().object},sm(".fight-percentage-per-pull-chart-embed-container",yb),_b.propTypes={url:i().string.isRequired};var wb=_b;function kb(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l,raceInReviewEmbedFooter:i}=e;const[s,o]=(0,r.useState)(""),[c,u]=fi("#517fa5",300),[d,m]=(0,r.useState)(),{progressRace:p,progressRaceStatus:g}=Ba(),[h,f]=(0,r.useState)([]),b=(E=hg,Object.keys(E).map((e=>({label:E[e].label,value:e}))));var E;const[v,y]=(0,r.useState)(b[0].value);return(0,r.useEffect)((()=>{if(!p?.guilds?.[0]?.encounters?.length)return;let e=[{value:0,label:trans("embeds.latest_encounter_option")}];p.guilds[0].encounters.forEach((t=>{e.push({value:t.id,label:t.name})})),f(e)}),[p]),r.createElement(In,{title:trans("progress-race.fight_percentage_per_pull"),className:"fight-percentage-per-pull-chart-embed-instructions-tile",padding:"narrow"},r.createElement("div",{className:"fight-percentage-per-pull-chart-embed-instructions-tile__content"},r.createElement(Pn,null,r.createElement(Mn,{title:trans("global.encounter")},r.createElement(Wh,{items:h??[],value:[],pendingValue:d,isMulti:!1,isBeingEdited:!0,hasPendingChanges:!0,setPendingValue:m,status:g})),r.createElement(Mn,{title:trans("global.accent_color")},r.createElement("input",{type:"color",value:c,onChange:e=>u(e.target.value)})),r.createElement(Mn,{title:trans("global.x_axis")},r.createElement(Wh,{items:b,pendingValue:v,isMulti:!1,isBeingEdited:!0,hasPendingChanges:!0,setPendingValue:y,status:g})),r.createElement(Mn,{title:trans("global.preview")},r.createElement("div",{className:"fight-percentage-per-pull-chart-embed-instructions-tile__preview"},r.createElement(vb,{guildId:t,zoneId:n,competitionId:a,difficulty:l,encounterId:d,color:c,xAxis:v,onUrlChange:o,raceInReviewEmbedFooter:i})))),r.createElement(Mn,{title:trans("global.instructions")},r.createElement(wb,{url:s}))))}kb.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired,raceInReviewEmbedFooter:i().object};var Nb=kb;function Tb(){return Tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tb.apply(this,arguments)}function Cb(e){let{color:t,zoneId:n,competitionId:a,difficulty:l,onUrlChange:i,raceInReviewEmbedFooter:s,theme:o}=e;const{progressRace:c,progressRaceStatus:u}=Ba();a=ys("competition",a),l=ys("difficulty",l);const d=c?c.guilds[0]:null,m=c?c.encounters:null,p=d?d.encounters:null;(0,r.useEffect)((()=>{d&&i&&i(`${window.location.protocol}//${window.location.host}/embed/encounter-progress-duration-chart/${n}?${Bf({competitionId:a,guildId:d.id,difficulty:l,color:t})}`)}),[i,l,t,d,n,a]);const{containerRef:g,topRef:h,bottomRef:f,height:b}=pb([d]);return r.createElement("div",{ref:g,className:"encounter-progress-duration-chart-embed"},!p&&u.isLoading&&r.createElement(_g,{height:"100%"},r.createElement(kt,null)),p&&d&&r.createElement("div",{className:"encounter-progress-duration-chart-embed__content"},r.createElement("div",{ref:h},r.createElement(db,{title:trans("progress-race.progress_duration_by_encounter"),subtitle:r.createElement("a",{href:`/guild/id/${d.id}`,target:"_blank",rel:"noreferrer"},r.createElement("span",{style:{color:t}},`<${d.name}>`))})),b&&r.createElement($g,{height:b,encounters:p.map((e=>{const t=m?m.find((t=>t.id===e.id)):null;return{...e,splitEncounterProgressByDurationChartBarsIntoPhases:!!t&&t.splitEncounterProgressByDurationChartBarsIntoPhases}})),theme:o,title:null,subtitle:null}),r.createElement("div",{ref:f},r.createElement(mb,Tb({color:t,guildLogoImageUrl:d.logoImageUrl,guildLogoImageFallbackUrl:d.logoImageFallbackUrl,guildLogoImageIsCustom:d.logoImageIsCustom},s)))),!p&&!u.isLoading&&r.createElement(_g,{height:"100%"},r.createElement(vn,null,trans("global.no_data_found")+".")))}function Sb(e){let{url:t}=e;return r.createElement(Pn,null,r.createElement(vn,null,trans("embeds.real_time_guild_progress_widget_url_label")+":"),r.createElement(Ni,{valueToCopy:t}),r.createElement(vn,null,`\n${trans("embeds.widget_can_be_used_in_obs")}:\n\n1. ${trans("embeds.instruction_add_browser_source")}\n2. ${trans("embeds.instruction_copy_above_url_for_source")}\n3. ${trans("embeds.instruction_set_source_width_and_height_as_desired_with_specific_examples_listed_after")}\n    1. ${trans("embeds.instruction_x_width_and_y_height",{width:860,height:480})}\n    2. ${trans("embeds.instruction_x_width_and_y_height",{width:400,height:300})}\n4. ${trans("embeds.instruction_click_ok")}\n5. ${trans("embeds.instruction_resize_using_edges_and_corners")}\n`))}sm(".encounter-progress-duration-chart-embed-container",(function(e){let{game:t,zoneId:n,competitionId:a,difficulty:l,raceInReviewEmbedFooter:i}=e;const s=Fa("color"),o=hb();return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(Cb,{zoneId:n,competitionId:a,difficulty:l,color:s,raceInReviewEmbedFooter:i,theme:o})))})),Sb.propTypes={url:i().string.isRequired};var Ib=Sb;function xb(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l,raceInReviewEmbedFooter:i}=e;const[s,o]=(0,r.useState)(""),[c,u]=fi("#517fa5",300);return r.createElement(In,{title:trans("progress-race.progress_duration_by_encounter"),className:"fight-percentage-per-pull-chart-embed-instructions-tile",padding:"narrow"},r.createElement("div",{className:"fight-percentage-per-pull-chart-embed-instructions-tile__content"},r.createElement(Pn,null,r.createElement(Mn,{title:trans("global.accent_color")},r.createElement("input",{type:"color",value:c,onChange:e=>u(e.target.value)})),r.createElement(Mn,{title:trans("global.preview")},r.createElement("div",{className:"fight-percentage-per-pull-chart-embed-instructions-tile__preview"},r.createElement(Cb,{guildId:t,zoneId:n,competitionId:a,difficulty:l,color:c,onUrlChange:o,raceInReviewEmbedFooter:i})))),r.createElement(Mn,{title:trans("global.instructions")},r.createElement(Ib,{url:s}))))}xb.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired,raceInReviewEmbedFooter:i().object};var Pb=xb;function Rb(e){let{roles:t=[],setGearThresholds:n}=e;const a=Math.max(...n),l=Array.from(Array(a)).map(((e,t)=>t+1)),i=[...t,{name:trans("gameterms.entire_raid"),players:t.map((e=>e.players)).reduce(((e,t)=>e.concat(t)),[])}];return r.createElement("div",{className:"composition-set-gear"},r.createElement(vp,{className:"composition-set-gear"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"composition-set-gear__top-left"},r.createElement(no,{size:32})),r.createElement("th",null,trans("gameterms-warcraft.item_level_abbreviation")),l.map((e=>r.createElement("th",{key:e},r.createElement("span",{className:"composition-set-gear__set-gear-threshold-header-amount"},e)," ",trans("gameterms.set_gear_pieces_abbreviation")))))),r.createElement("tbody",null,i.map((e=>r.createElement("tr",{key:e.name},r.createElement("td",{className:"composition-set-gear__role"},e.name),r.createElement("td",{className:"composition-set-gear__item-level"},r.createElement(c,null,Ja([e]))),l.map((t=>r.createElement("td",{key:t,className:"composition-set-gear__set-gear-count"},e.players.filter((e=>e.setGearItems.length>=t)).length||"-")))))))))}Rb.propTypes={roles:or.propTypes.roles,setGearThresholds:i().array};var Ab=Rb;function Lb(e){let{guildId:t,encounterId:n}=e;const a=dg(t,n);return a?r.createElement(Ot,{url:a,lazyChildren:e=>r.createElement(Ab,e)}):null}Lb.propTypes={guildId:i().number.isRequired,encounterId:i().number};var $b=Lb;function Ob(e){let{guildId:t}=e;const n=ys("encounter");return r.createElement($b,{guildId:t,encounterId:n})}function zb(e){let{game:t,zoneId:n}=e;const a=jf();return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(Ob,{guildId:a})))}function Fb(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l}=e;return r.createElement(Pn,null,r.createElement(vn,null,trans("embeds.real_time_guild_progress_widget_url_label")+":"),r.createElement(Ni,{valueToCopy:`${window.location.protocol}//${window.location.host}/embed/guild-progress-composition-set-gear/${n}?${Bf({competitionId:a,guildId:t,difficulty:l})}`}),r.createElement(vn,null,`\n${trans("embeds.widget_can_be_used_in_obs")}:\n\n1. ${trans("embeds.instruction_add_browser_source")}\n2. ${trans("embeds.instruction_copy_above_url_for_source")}\n3. ${trans("embeds.instruction_set_source_width_and_height_as_desired_with_specific_example",{width:600,height:240})}\n4. ${trans("embeds.instruction_click_ok")}\n5. ${trans("embeds.instruction_resize_using_edges_and_corners")}\n`))}Ob.propTypes={guildId:i().number.isRequired},zb.propTypes={game:i().exact(Kg),zoneId:i().number.isRequired},sm(".guild-progress-composition-set-gear-embed-container",zb),Fb.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired};var Mb=Fb;function Db(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l}=e;return r.createElement(In,{title:trans("embeds.guild_progress_composition_set_gear_embed_name"),className:"guild-progress-composition-set-gear-embed-instructions-tile",padding:"narrow"},r.createElement("div",{className:"guild-progress-composition-set-gear-embed-instructions-tile__content"},r.createElement(Mn,{title:trans("global.preview")},r.createElement(Ob,{guildId:t})),r.createElement(Mn,{title:trans("global.instructions")},r.createElement(Mb,{guildId:t,zoneId:n,competitionId:a,difficulty:l}))))}Db.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired};var Ub=Db;function Bb(){return Bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bb.apply(this,arguments)}const Vb=e=>{let{children:t}=e;return r.createElement("div",{className:"latest-progress-updates-tile-embed"},t)};function qb(){const{progressRace:e,progressRaceStatus:t}=Ba(),n=e?.latestProgressUpdates;return!n&&t?.isLoading?r.createElement(Vb,null,r.createElement(_g,{width:"100%",height:"100%"},r.createElement(kt,null))):n&&0!==(n?.lines?.length??0)?r.createElement(Vb,null,r.createElement(Qm,Bb({},n,{enableLinks:!1,showViewMoreButton:!1}))):r.createElement(Vb,null,r.createElement(_g,{width:"100%",height:"100%"},r.createElement(vn,null,trans("global.no_data_found")+".")))}function jb(e){let{game:t,zoneId:n}=e;return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(qb,null)))}function Hb(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l}=e;return r.createElement(Pn,null,r.createElement(vn,null,trans("embeds.real_time_guild_progress_widget_url_label")+":"),r.createElement(Ni,{valueToCopy:`${window.location.protocol}//${window.location.host}/embed/latest-progress-updates-tile/${n}?${Bf({competitionId:a,guildId:t,difficulty:l})}`}),r.createElement(vn,null,`\n${trans("embeds.widget_can_be_used_in_obs")}:\n\n1. ${trans("embeds.instruction_add_browser_source")}\n2. ${trans("embeds.instruction_copy_above_url_for_source")}\n3. ${trans("embeds.instruction_set_source_width_and_height",{width:700,height:250})}\n4. ${trans("embeds.instruction_click_ok")}\n5. ${trans("embeds.instruction_resize_using_edges_and_corners")}\n`))}function Gb(e){return r.createElement(In,{title:trans("progress-race.latest_updates"),className:"latest-progress-updates-tile-embed-instructions-tile",padding:"narrow"},r.createElement("div",{className:"latest-progress-updates-tile-embed-instructions-tile__content"},r.createElement(Mn,{title:trans("global.preview")},r.createElement("div",{className:"latest-progress-updates-tile-embed-instructions-tile__preview"},r.createElement(qb,null))),r.createElement(Mn,{title:trans("global.instructions")},r.createElement(Hb,e))))}function Wb(e){let{url:t}=e;return r.createElement(Pn,null,r.createElement(vn,null,trans("embeds.real_time_guild_progress_widget_url_label")+":"),r.createElement(Ni,{valueToCopy:t}),r.createElement(vn,null,`\n${trans("embeds.widget_can_be_used_in_obs")}:\n\n1. ${trans("embeds.instruction_add_browser_source")}\n2. ${trans("embeds.instruction_copy_above_url_for_source")}\n3. ${trans("embeds.instruction_set_source_width_and_height_as_desired_with_specific_examples_listed_after")}\n    1. ${trans("embeds.instruction_x_width_and_y_height",{width:1e3,height:450})}\n    2. ${trans("embeds.instruction_x_width_and_y_height",{width:960,height:540})}\n4. ${trans("embeds.instruction_click_ok")}\n5. ${trans("embeds.instruction_resize_using_edges_and_corners")}\n`))}Vb.propTypes={children:i().node.isRequired},jb.propTypes={zoneId:i().number.isRequired,game:i().exact(Kg).isRequired},sm(".latest-progress-updates-tile-embed-container",jb),Hb.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired},Gb.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired},Wb.propTypes={url:i().string.isRequired};var Kb=Wb;function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zb.apply(this,arguments)}function Yb(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l,encounterId:i,view:s,color:o,onUrlChange:c,raceInReviewEmbedFooter:u,theme:d}=e;const{progressRace:m,progressRaceStatus:p}=Ba();a=ys("competition",a),l=ys("difficulty",l);const g=function(e,t){return e?.guilds.length&&t?e.guilds.find((e=>e.id===t))??null:null}(m,t),h=function(e,t){return e?t?e.encounters.find((e=>e.id===t))??null:e.currentEncounterId?e.encounters.find((t=>t.id===e.currentEncounterId))??null:null:null}(g,i);(0,r.useEffect)((()=>{c?.(`${window.location.protocol}//${window.location.host}/embed/progress-race-fight-summary-chart/${n}?${Bf({competitionId:a,guildId:t,difficulty:l,encounterId:i,view:s,color:o})}`)}),[t,i,c,o,s,l,n,a]);const{containerRef:f,topRef:b,bottomRef:E,height:v}=pb([h]);return r.createElement("div",{ref:f,className:"progress-race-fight-summary-chart-embed"},!h&&p.isLoading&&r.createElement(_g,{height:"100%"},r.createElement(kt,null)),h&&g&&r.createElement("div",{className:"progress-race-fight-summary-chart-embed__content"},r.createElement("div",{ref:b},r.createElement(db,{title:h.name,subtitle:r.createElement(r.Fragment,null,r.createElement("a",{href:`/guild/id/${t}`,target:"_blank",rel:"noreferrer"},r.createElement("span",{style:{color:o}},`<${g.name}>`))," ",r.createElement("span",null,`${trans("reports.fight_summary")} (${h.isKilled?trans("reports.kill"):"best"===s?trans("progress-race.best_pull"):trans("progress-race.last_pull")})`))})),r.createElement(kg,{guildId:t,encounterId:i,view:s,height:v,theme:d}),r.createElement("div",{ref:E},g&&r.createElement(mb,Zb({color:o,guildLogoImageUrl:g.logoImageUrl,guildLogoImageFallbackUrl:g.logoImageFallbackUrl,guildLogoImageIsCustom:g.logoImageIsCustom},u)))),!h&&!p.isLoading&&r.createElement(_g,{height:"100%"},r.createElement(vn,null,trans("global.no_data_found")+".")))}sm(".progress-race-fight-summary-chart-embed-container",(function(e){let{game:t,zoneId:n,competitionId:a,raceInReviewEmbedFooter:l}=e;const i=jf(),s=ys("encounter"),o=ys("difficulty"),c=Fa("color"),u=Fa("view","best"),d=hb();return r.createElement(Da,{zoneId:n,guildId:i},r.createElement(Z,{game:t},r.createElement(Yb,{zoneId:n,competitionId:a,guildId:i,encounterId:s,difficulty:o,view:u,color:c,raceInReviewEmbedFooter:l,theme:d})))}));const Jb=[{label:trans("progress-race.best_pull_label"),value:"best"},{label:trans("progress-race.last_pull_label"),value:"last"}];function Xb(e){let{guildId:t,zoneId:n,competitionId:a,difficulty:l,raceInReviewEmbedFooter:i}=e;const[s,o]=(0,r.useState)(""),[c,u]=fi("#517fa5",300),[d,m]=(0,r.useState)(),{progressRace:p,progressRaceStatus:g}=Ba(),[h,f]=(0,r.useState)([]),[b,E]=(0,r.useState)(Jb[0].value);return(0,r.useEffect)((()=>{if(!p?.guilds?.[0]?.encounters?.length)return;let e=[{value:0,label:trans("embeds.latest_encounter_option")}];p.guilds[0].encounters.forEach((t=>{e.push({value:t.id,label:t.name})})),f(e)}),[p]),r.createElement(In,{title:trans("reports.fight_summary"),className:"progress-race-fight-summary-chart-embed-instructions-tile",padding:"narrow"},r.createElement("div",{className:"progress-race-fight-summary-chart-embed-instructions-tile__content"},r.createElement(Pn,null,r.createElement(Mn,{title:trans("global.encounter")},r.createElement(Wh,{items:h??[],pendingValue:d,isMulti:!1,isBeingEdited:!0,hasPendingChanges:!0,setPendingValue:m,status:g})),r.createElement(Mn,{title:trans("progress-race.pull_to_show_title")},r.createElement(Wh,{label:trans("progress-race.pull_to_show_label"),items:Jb,pendingValue:b,isMulti:!1,isBeingEdited:!0,hasPendingChanges:!0,setPendingValue:E,status:g})),r.createElement(Mn,{title:trans("global.accent_color")},r.createElement("input",{type:"color",value:c,onChange:e=>u(e.target.value)})),r.createElement(Mn,{title:trans("global.preview")},r.createElement("div",{className:"progress-race-fight-summary-chart-embed-instructions-tile__preview"},r.createElement(Yb,{view:b,guildId:t,zoneId:n,competitionId:a,difficulty:l,encounterId:d,color:c,onUrlChange:o,raceInReviewEmbedFooter:i})))),r.createElement(Mn,{title:trans("global.instructions")},r.createElement(Kb,{url:s}))))}Xb.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired,raceInReviewEmbedFooter:i().object};var Qb=Xb;function eE(e){let{guildId:t,encounterId:n,includeHeader:a=!0,includeSpecText:l=!0,includeItemLevel:i=!0,includeSingleCustomPowers:s=!0,includeSingleSecondaryCustomPowers:o=!0,includeTalents:c=!0,includeCustomPowers:u=!0,includeSecondaryCustomPowers:d=!0,includeSetGear:m=!0,includeSetGearThresholds:p=!0,includeGear:g=!0,includeEffectGear:h=!0}=e;const f=ys("encounter",n),b=Gf("includeHeader",a),E=Gf("includeSpecText",l),v=Gf("includeItemLevel",i),y=Gf("includeSingleCustomPowers",s),_=Gf("includeSingleSecondaryCustomPowers",o),w=Gf("includeTalents",c),k=Gf("includeCustomPowers",u),N=Gf("includeSecondaryCustomPowers",d),T=Gf("includeSetGear",m),C=Gf("includeSetGearThresholds",p),S=Gf("includeGear",g),I=Gf("includeEffectGear",h);return r.createElement(pg,{guildId:t,encounterId:f,includeHeader:b,includeSpecText:E,includeItemLevel:v,includeSingleCustomPowers:y,includeSingleSecondaryCustomPowers:_,includeTalents:w,includeCustomPowers:k,includeSecondaryCustomPowers:N,includeSetGear:T,includeSetGearThresholds:C,includeGear:S,includeEffectGear:I,isEmbedded:!0})}function tE(e){let{game:t,zoneId:n}=e;const a=jf();return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(eE,{guildId:a})))}function nE(e){let{url:t}=e;return r.createElement(Pn,null,r.createElement(vn,null,trans("embeds.real_time_guild_progress_widget_url_label")+":"),r.createElement(Ni,{valueToCopy:t}),r.createElement(vn,null,`\n${trans("embeds.widget_can_be_used_in_obs")}:\n\n1. ${trans("embeds.instruction_add_browser_source")}\n2. ${trans("embeds.instruction_copy_above_url_for_source")}\n3. ${trans("embeds.instruction_set_source_width_and_height_as_desired_with_specific_examples_listed_after")}\n    1. ${trans("embeds.instruction_x_width_and_y_height",{width:1920,height:1080})}\n    2. ${trans("embeds.instruction_x_width_and_y_height",{width:540,height:1080})}\n4. ${trans("embeds.instruction_click_ok")}\n5. ${trans("embeds.instruction_resize_using_edges_and_corners")}\n`))}eE.propTypes={guildId:i().number.isRequired,encounterId:i().number,includeHeader:i().bool,includeSpecText:i().bool,includeItemLevel:i().bool,includeSingleCustomPowers:i().bool,includeSingleSecondaryCustomPowers:i().bool,includeTalents:i().bool,includeCustomPowers:i().bool,includeSecondaryCustomPowers:i().bool,includeSetGear:i().bool,includeSetGearThresholds:i().bool,includeGear:i().bool,includeEffectGear:i().bool},tE.propTypes={game:i().exact(Kg),zoneId:i().number.isRequired},sm(".guild-progress-detailed-composition-embed-container",tE),nE.propTypes={url:i().string.isRequired};var aE=nE;const rE=e=>{let{guildId:t,zoneId:n,competitionId:a,difficulty:l,compositionLabels:i}=e;const s=(e=>[{value:"includeHeader",label:trans("embeds.include_header")},{value:"includeSpecText",label:trans("embeds.include_spec_text")},{value:"includeItemLevel",label:trans("embeds.include_item_level")},{value:"includeSingleCustomPowers",label:e?.singleCustomPower},{value:"includeSingleSecondaryCustomPowers",label:e?.singleSecondaryCustomPower},{value:"includeTalents",label:e?.talents},{value:"includeCustomPowers",label:e?.customPowers},{value:"includeSecondaryCustomPowers",label:e?.secondaryCustomPowers},{value:"includeSetGear",label:e?.setGear},{value:"includeSetGearThresholds",label:trans("embeds.include_set_gear_thresholds")},{value:"includeGear",label:e?.gear},{value:"includeEffectGear",label:e?.effectGear}])(i),[o,c]=(0,r.useState)(),[u,d]=(0,r.useState)(s.map((e=>e.value))),[m,p]=(0,r.useState)({}),{progressRace:g,progressRaceStatus:h}=Ba(),[f,b]=(0,r.useState)([]),E=function(e,t,n,a,r,l){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];const s=e.filter((e=>!i[e.value])).map((e=>e.value)).reduce(((e,t)=>({...e,[t]:!1})),{});return`${window.location.protocol}//${window.location.host}/embed/guild-progress-detailed-composition/${n}?${Bf({competitionId:a,guildId:t,difficulty:r,encounterId:l,...s})}`}(s,t,n,a,l,o,m);return(0,r.useEffect)((()=>{if(!g?.guilds?.[0]?.encounters?.length)return;let e=[{value:void 0,label:trans("embeds.latest_encounter_option")}];g.guilds[0].encounters.forEach((t=>{e.push({value:t.id,label:t.name})})),b(e)}),[g]),(0,r.useEffect)((()=>{p(u.reduce(((e,t)=>({...e,[t]:!0})),{}))}),[u]),r.createElement(In,{title:trans("embeds.detailed_composition_tile_title"),className:"guild-progress-race-detailed-composition-embed-instructions-tile",padding:"narrow"},r.createElement("div",{className:"guild-progress-race-detailed-composition-embed-instructions-tile__content"},r.createElement("div",{className:"guild-progress-race-detailed-composition-embed-instructions-tile__options"},r.createElement(Mn,{title:trans("global.encounter")},r.createElement(Wh,{items:f??[],pendingValue:o,isMulti:!1,isBeingEdited:!0,hasPendingChanges:!0,setPendingValue:c,status:h})),r.createElement(Mn,{title:trans("global.options")},r.createElement(Wh,{items:s??[],value:u,pendingValue:u,isMulti:!0,isBeingEdited:!0,hasPendingChanges:!1,setPendingValue:d}))),r.createElement(Mn,{title:trans("global.instructions")},r.createElement(aE,{url:E})),r.createElement("div",{className:"guild-progress-race-detailed-composition-embed-instructions-tile__preview-container"},r.createElement(Mn,{title:trans("global.preview")},r.createElement("div",{className:"guild-progress-race-detailed-composition-embed-instructions-tile__preview-wrapper"},r.createElement("div",{className:"guild-progress-race-detailed-composition-embed-instructions-tile__preview"},r.createElement(eE,{guildId:t,encounterId:o,includeHeader:!!m?.includeHeader,includeSpecText:!!m?.includeSpecText,includeItemLevel:!!m?.includeItemLevel,includeSingleCustomPowers:!!m?.includeSingleCustomPowers,includeSingleSecondaryCustomPowers:!!m?.includeSingleSecondaryCustomPowers,includeTalents:!!m?.includeTalents,includeCustomPowers:!!m?.includeCustomPowers,includeSecondaryCustomPowers:!!m?.includeSecondaryCustomPowers,includeSetGear:!!m?.includeSetGear,includeSetGearThresholds:!!m?.includeSetGearThresholds,includeGear:!!m?.includeGear,includeEffectGear:!!m?.includeEffectGear})))))))};rE.propTypes={guildId:i().number.isRequired,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired,compositionLabels:i().object};var lE=rE;function iE(){return iE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},iE.apply(this,arguments)}function sE(e){let{guildId:t,guildName:n,guildRegion:a,guildHeader:l,navigation:i,zoneId:s,competitionId:o,zonesByExpansions:c,raceInReviewEmbedFooter:u,compositionLabels:d,shouldShowFightSummaryCharts:m}=e;const{zoneId:p,difficulty:g,competitionId:h,setZoneFilters:f}=Of(s,!0),[b,E]=(0,r.useState)(!0);(0,r.useEffect)((()=>{E(!0)}),[p,g]);const v={guildId:t,zoneId:p,competitionId:h??o,difficulty:g};return r.createElement(wm,null,r.createElement(Da,{zoneId:p,difficulty:g,guildId:t,onLoad:(0,r.useCallback)((()=>E(!1)),[]),refreshOnlyWhenVisible:!0},r.createElement(Wl.Provider,{value:t},r.createElement(Oi.Provider,{value:n},r.createElement(Xa.Provider,{value:a},r.createElement("div",{className:"guild-widgets-page"},r.createElement(Hi,l),r.createElement(Mi,null,r.createElement(Pn,{gap:"small"},r.createElement("div",null,r.createElement(Gi,iE({},i,{relatedLinks:l.relatedLinks})),r.createElement(Mf,{zonesByExpansions:c,zoneId:p,difficulty:g,competitionId:h,guildId:t,onChange:(0,r.useCallback)((e=>f((t=>({...t,...e})))),[f]),emitChangeForInitialDefaultDifficulty:!0})),b||!g?r.createElement(In,null,r.createElement(kt,{label:trans("reports.loading_data")})):r.createElement(r.Fragment,null,r.createElement(Jf,v),r.createElement(ab,v),r.createElement(Nb,iE({},v,{raceInReviewEmbedFooter:u})),m?r.createElement(Qb,iE({},v,{raceInReviewEmbedFooter:u})):null,r.createElement(Pb,iE({},v,{raceInReviewEmbedFooter:u})),r.createElement(Gb,v),r.createElement(cb,v),d&&r.createElement(Ub,v),d&&r.createElement(lE,iE({},v,{compositionLabels:d})))))),r.createElement(ih,null))))))}sE.propTypes={guildId:i().number.isRequired,guildName:i().string.isRequired,guildRegion:i().exact({id:i().number,name:i().string,shortName:i().string}),guildHeader:i().object,navigation:i().object,zoneId:i().number.isRequired,competitionId:i().number.isRequired,difficulty:i().number.isRequired,zonesByExpansions:i().array,raceInReviewEmbedFooter:i().object,compositionLabels:i().object,shouldShowFightSummaryCharts:i().bool},sm(".guild-widgets-page-container",sE);var oE={id:i().number.isRequired,name:i().string.isRequired,shortName:i().string.isRequired},cE={id:i().number.isRequired,name:i().string.isRequired,lowercaseName:i().string.isRequired,faction:i().number.isRequired,region:i().exact(oE).isRequired,server:i().exact({id:i().number.isRequired,name:i().string.isRequired}).isRequired,url:i().string.isRequired,description:i().string.isRequired,rank:i().number.isRequired,joinCode:i().string.isRequired,battlenet:i().number.isRequired,battleMemberImport:i().number.isRequired,officerRank:i().number.isRequired,memberRank:i().number.isRequired,recruitRank:i().number.isRequired,type:i().number.isRequired,parentGuildId:i().number.isRequired};const uE=r.createContext(),dE=e=>{let{children:t,value:n={}}=e;const[a,l]=r.useState(n),i={guild:a,mergeGuild:e=>l({...a,...e}),setGuild:l};return r.createElement(uE.Provider,{value:i},r.createElement(Wl.Provider,{value:a?.id},r.createElement(Oi.Provider,{value:a?.name},r.createElement(Xa.Provider,{value:a?.region},t))))};dE.propTypes={children:i().node.isRequired,value:i().exact(cE)};var mE=()=>{const e=r.useContext(uE);if(void 0===e)throw new Error("useGuild must be used within a GuildProvider");return e},pE=e=>{let{type:t="label-top",styles:n=[],label:a,control:l}=e;const i=n?n.map((e=>`form-element--${e} `)):null;return r.createElement("div",{className:`form-element form-element--${t} ${i}`},r.createElement("div",{className:"form-element__label"},a),r.createElement("div",{className:"form-element__control"},l))};const gE=e=>{let{wrapperClassName:t,options:n,value:a,valueFromOptions:l,onChange:i,isDisabled:s,...o}=e;const c=t??"react-select__wrapper",u=o?.className??"react-select--default",d={menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})},...o,options:n,className:u,classNamePrefix:"react-select",value:void 0!==l?(e=>n.find((t=>t.value===e)))(l)||null:a,onChange:(e,t)=>{i({...e,name:t?.name})},isDisabled:s};return r.createElement("div",{className:c},r.createElement(ma.ZP,d))};gE.propTypes={wrapperClassName:i().string,options:i().arrayOf(i().shape({label:i().oneOfType([i().string,i().number]),value:i().oneOfType([i().string,i().number])})).isRequired,value:i().oneOfType([i().string,i().number]),valueFromOptions:i().oneOfType([i().string,i().number]),className:i().string,onChange:i().func,isDisabled:i().bool};var hE=gE,fE=e=>{let{show:t,showSpinner:n=!0,minimumTimeToShow:a=1e3}=e;const[l,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(!t)return void i(!1);const e=setTimeout((()=>{i(t)}),a);return()=>clearTimeout(e)}),[a,t]),t&&l?r.createElement("div",{className:"loading-overlay__container","data-testid":"loading-overlay"},n&&r.createElement("div",{className:"loading-overlay__icon-wrapper"},r.createElement("i",{className:"loading-overlay__icon zmdi zmdi-spinner zmdi-hc-spin"}))):null},bE=()=>{const{setGuild:e}=mE();return{updateGuildFromHttpResponse:t=>{const n=t?.overrideViewModels?.guildViewModel;n&&e(n)}}};const EE=r.createContext(),vE=e=>{let{children:t,value:n={}}=e;const[a,l]=r.useState(n),i={guildHeader:a,setGuildHeader:l};return r.createElement(EE.Provider,{value:i},t)};vE.propTypes={children:i().node.isRequired,value:i().object};var yE=()=>{const e=r.useContext(EE);if(void 0===e)throw new Error("useGuildHeader must be used within a GuildHeaderProvider");return e},_E=()=>{const{setGuildHeader:e}=yE();return{updateGuildHeaderFromHttpResponse:t=>{const n=t?.overrideViewModels?.guildHeaderViewModel;n&&e(n)}}};function wE(){return wE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wE.apply(this,arguments)}const kE=e=>{let{name:t,value:n,...a}=e;return r.createElement("input",wE({type:"hidden",name:t,value:n},a))};kE.propTypes={name:i().string,value:i().oneOfType([i().string,i().number])};var NE=kE;const TE=e=>{let{factions:t,prefixForLocalizedGuildType:n,showCustomGuildsUI:a}=e;const{guild:l}=mE(),{user:i}=Dl(),s=Bi(i,l.id),o={name:l?.name,type:l?.type,faction:l?.faction,rank:l?.rank},{pendingValue:c,setPendingValue:u,hasPendingChanges:d,resetPendingValue:m,save:p,status:g}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{updateGuildFromHttpResponse:a}=bE(),{updateGuildHeaderFromHttpResponse:r}=_E();return t?.onHttpSuccess||(t.onHttpSuccess=e=>{r(e),a(e)}),ql().from(hh(e,t)).withHttpSave(`/guild/information/${n}`,(e=>e)).build()}(o),h=!s,f=e=>{let{name:t,value:n}=e;const a={...c};a[t]=n,"regionId"===t&&(alert(trans("guilds.region_change_warning")),a.serverId=null),"serverId"===t&&alert(trans("guilds.server_change_warning")),u(a)};return r.createElement(In,{title:trans("guilds.edit_guild_caption")},r.createElement(pE,{styles:["constrain-width"],label:r.createElement("label",{htmlFor:"guild-information-name"},trans("guilds.name_label")),control:r.createElement(ii,{type:"text",className:"input-text--full-width",id:"guild-information-name",name:"name",value:c.name,disabled:h,onChange:f})}),a?r.createElement(pE,{styles:["constrain-width"],label:r.createElement("label",{htmlFor:"guild-information-type"},trans("guilds.type_label")),control:r.createElement(hE,{id:"guild-information-type",name:"type",valueFromOptions:c.type,isDisabled:h,onChange:f,options:[{value:0,label:trans("guilds."+n+"_guild")},{value:1,label:trans("guilds."+n+"_custom")}]})}):r.createElement(NE,{name:"type",value:c.type||1}),r.createElement(pE,{styles:["constrain-width"],label:r.createElement("label",{htmlFor:"guild-information-faction"},trans("guilds.faction")),control:r.createElement(hE,{id:"guild-information-faction",name:"faction",valueFromOptions:c.faction,isDisabled:h,onChange:f,options:t.map(((e,t)=>({value:t,label:e})))})}),r.createElement(pE,{styles:["constrain-width"],label:r.createElement("label",{htmlFor:"guild-information-default-rank"},r.createElement(Re,{content:r.createElement("div",null,trans("guilds.ranks_explanation"))},trans("guilds.default_rank_label"),r.createElement("span",null,r.createElement("a",{className:"guild-edit-information-tile__fake-link","data-tip":!0,"data-for":"guild-ranks-explanation"},trans("guilds.whats_this_link"))))),control:r.createElement(hE,{name:"rank",id:"guild-information-default-rank",disabled:h,onChange:f,valueFromOptions:c.rank,options:[{label:trans("guilds.applicant"),value:0},{label:trans("guilds.recruit"),value:1},{label:trans("guilds.member"),value:2},{label:trans("guilds.officer"),value:3}]})}),r.createElement(ti,{save:p,cancel:d?m:null,status:g,hasPendingChanges:d}),r.createElement(fE,{show:g.isLoading}))};TE.propTypes={factions:i().arrayOf(i().string).isRequired,prefixForLocalizedGuildType:i().string.isRequired,showCustomGuildsUI:i().bool.isRequired};var CE=TE,SE=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{updateGuildHeaderFromHttpResponse:a}=_E();return t?.onHttpSuccess||(t.onHttpSuccess=e=>{a(e),t?.setIconState&&t.setIconState(e)}),ql().from(hh(e,t)).withHttpSave(`/guild/settings/${n}`,(e=>e)).build()};const IE=e=>{let{twitter:t,twitch:n,youtube:a,icon:l,useIcon:i,assetServer:s}=e;const{user:o}=Dl(),c=Bi(o,Zl()),u={twitter:t,twitch:n,youtube:a,icon:l,useIcon:i},{pendingValue:d,setPendingValue:m,hasPendingChanges:p,resetPendingValue:g,save:h,status:f}=SE(u,{setIconState:e=>{const t=e?.overrideViewModels?.guildSettingsViewModel;t.icon&&m({...d,icon:t.icon})}}),b=!c,E=e=>{let{name:t,value:n}=e;const a={...d};a[t]=n,m(a)};return r.createElement(In,{title:trans("guilds.social_integration_title")},r.createElement("div",{className:"guild-social-integration-tile"},r.createElement("p",null,trans("guilds.social_inform")),r.createElement(pE,{label:r.createElement("label",{htmlFor:"twitter"},r.createElement("img",{className:"guild-social-integration-tile__social-icon",src:`${s}/img/social/twitter.png`})," ",trans("accounts.twitter_profile")),control:r.createElement(ii,{type:"text",id:"twitter",name:"twitter",value:d.twitter,size:"36",onChange:E,disabled:b})}),r.createElement(pE,{label:r.createElement("label",{htmlFor:"twitch"},r.createElement("img",{className:"guild-social-integration-tile__social-icon",src:`${s}/img/social/twitch.png`})," ",trans("accounts.twitch_channel")),control:r.createElement(ii,{type:"text",id:"twitch",name:"twitch",value:d.twitch,size:"36",onChange:E,disabled:b})}),r.createElement(pE,{label:r.createElement("label",{htmlFor:"youtube"},r.createElement("img",{className:"guild-social-integration-tile__social-icon",src:`${s}/img/social/youtube.png`})," ",trans("accounts.youtube_channel")),control:r.createElement(ii,{type:"text",id:"youtube",name:"youtube",value:d.youtube,size:"36",onChange:E,disabled:b})}),d.icon?r.createElement(r.Fragment,null,r.createElement("span",{className:"guild-social-integration-tile__twitter-icon"},r.createElement(Ln,{url:d.icon,isCustom:!0})),r.createElement("div",{className:"guild-social-integration-tile__icon-label"},r.createElement("input",{type:"checkbox",id:"use_icon",name:"useIcon",checked:d.useIcon,onChange:e=>{const t={...d};t[e.target.name]=e.target.checked,m(t)},disabled:b}),r.createElement("label",{htmlFor:"use_icon"},trans("guilds.guild_icon_use_this_image")))):r.createElement("div",null,trans("guilds.guild_icon_no_custom_icon_set")),r.createElement("div",{className:"guild-social-integration-tile__save-button"},c&&r.createElement(ti,{save:h,cancel:p?g:null,hasPendingChanges:p,status:f})),r.createElement(fE,{show:f.isLoading})))};IE.propTypes={twitter:i().string,twitch:i().string,youtube:i().string,icon:i().string,useIcon:i().bool,assetServer:i().string.isRequired};var xE=IE;const PE=e=>{let{discord:t,articlesBaseUrlForArea:n}=e;const{user:a}=Dl(),l=Bi(a,Zl()),i={discord:t},{pendingValue:s,setPendingValue:o,hasPendingChanges:c,resetPendingValue:u,save:d,status:m}=SE(i),p=!l;return r.createElement(In,{title:trans("guilds.discord_webhook_title")},r.createElement(Pn,null,r.createElement("p",null,trans("guilds.discord_webhook_inform")+" ",r.createElement("a",{href:`${n}/help/how-to-set-up-a-webhook`,target:"_blank",rel:"noreferrer"},trans("guilds.discord_webhook_inform_help_link"))),r.createElement(pE,{label:r.createElement("label",{htmlFor:"discord"},"Discord Webhook"),control:r.createElement(ii,{type:"text",id:"discord",name:"discord",size:"32",defaultValue:t,disabled:p,onChange:e=>{let{name:t,value:n}=e;const a={...s};a[t]=n,o(a)},className:"input-text--full-width"})}),l&&r.createElement(ti,{save:d,cancel:c?u:null,hasPendingChanges:c,status:m})),r.createElement(fE,{show:m.isLoading}))};PE.propTypes={discord:i().string,articlesBaseUrlForArea:i().string.isRequired};var RE=PE;const AE={0:trans("guilds.applicant"),1:trans("guilds.recruit"),2:trans("guilds.member"),3:trans("guilds.officer"),4:trans("guilds.guildmaster")};const LE=e=>{let{regionHasUserOwnedCharacters:t}=e;const{guild:n}=mE(),{user:a}=Dl(),l=function(e,t){return e?.guilds.some((e=>e.id===t))||e?.isAdmin}(a,n.id),i=Bi(a,n.id),s=a?.isAdmin||!1,o={battlenet:n.battlenet},{value:c,pendingValue:u,setPendingValue:d,status:m,save:p}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{updateGuildFromHttpResponse:a}=bE();return t?.onHttpSuccess||(t.onHttpSuccess=e=>{a(e)}),ql().from(hh(e,t)).withHttpSave(`/guild/management-style/${n}`,(0,r.useCallback)((e=>e),[])).build()}(o),g=t&&!!n.battleMemberImport,h=l||s;return(0,r.useEffect)((()=>{u.battlenet!==c.battlenet&&p()}),[u.battlenet,c.battlenet,p]),t?r.createElement(In,{title:trans("guilds.roster_management_style_title")},r.createElement(Pn,null,n.battlenet?r.createElement(r.Fragment,null,r.createElement("p",{dangerouslySetInnerHTML:{__html:trans("guilds.automatic_management_desc")}}),i&&r.createElement(r.Fragment,null,r.createElement("p",{dangerouslySetInnerHTML:{__html:trans("guilds.manual_management_change_desc")}}),r.createElement(ti,{save:()=>{d({battlenet:0})},saveText:trans("guilds.change_to_manual_button"),status:m}))):r.createElement(r.Fragment,null,r.createElement("p",{dangerouslySetInnerHTML:{__html:trans("guilds.manual_management_desc")}}),1!=n.type&&r.createElement(r.Fragment,null,r.createElement("p",{dangerouslySetInnerHTML:{__html:trans("guilds.manual_management_desc2")}}),i&&r.createElement(r.Fragment,null,r.createElement("p",{dangerouslySetInnerHTML:{__html:trans("guilds.automatic_management_change_desc")}}),r.createElement(ti,{save:()=>{g?h?d({battlenet:1}):alert(trans("guilds.auto_switch_no_characters_error")):alert(trans("guilds.auto_switch_no_roster_error"))},saveText:trans("guilds.change_to_automatic_button"),status:m,hasPendingChanges:g&&h}),!g&&r.createElement("em",{dangerouslySetInnerHTML:{__html:trans("guilds.auto_switch_no_roster_error")}}),!h&&r.createElement("em",{dangerouslySetInnerHTML:{__html:trans("guilds.auto_switch_no_characters_error")}}))))),r.createElement(fE,{show:m.isLoading})):null};LE.propTypes={regionHasUserOwnedCharacters:i().bool.isRequired};var $E=LE,OE=()=>{const{setUser:e}=Dl();return{updateUserFromHttpResponse:t=>{const n=t?.overrideViewModels?.user;n&&e(n)}}};const zE=r.createContext(),FE=e=>{let{children:t,value:n={}}=e;const[a,l]=r.useState(n),i={guildUsers:a,setGuildUsers:l};return r.createElement(zE.Provider,{value:i},t)};FE.propTypes={children:i().node.isRequired,value:i().array};var ME=()=>{const e=r.useContext(zE);if(void 0===e)throw new Error("useGuildUsers must be used within a GuildUsersProvider");return e},DE=()=>{const{setGuildUsers:e}=ME();return{updateGuildUsersFromHttpResponse:t=>{const n=t?.overrideViewModels?.guildUsers;n&&e(n)}}};const UE=e=>0===parseInt(e)||""===e||isNaN(e)?"":e,BE=e=>0===parseInt(e)||""===e||isNaN(e)?1:e;var VE=()=>{const{guild:e}=mE(),{user:t}=Dl(),n=Bi(t,e.id),a={recruitRank:UE(e.recruitRank),memberRank:UE(e.memberRank),officerRank:BE(e.officerRank)},{setPendingValue:l,pendingValue:i,hasPendingChanges:s,resetPendingValue:o,save:c,status:u}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{updateUserFromHttpResponse:a}=OE(),{updateGuildUsersFromHttpResponse:r}=DE();return t?.onHttpSuccess||(t.onHttpSuccess=e=>{a(e),r(e)}),ql().from(hh(e,t)).withHttpSave(`/guild/rank-cutoffs/${n}`,(e=>e)).build()}(a),d=e=>{let{name:t,value:n}=e;const a={...i};a[t]=UE(n),l(a)};return r.createElement(In,{title:trans("guilds.rank_cutoffs_title")},r.createElement(Pn,null,r.createElement("p",null,trans("guilds.rank_cutoffs_explanation")),r.createElement("div",{className:"guild-settings__rank-cutoffs"},r.createElement("div",{className:"guild-settings__rank-cutoffs__column"},r.createElement(pE,{type:"label-left",label:r.createElement("label",{htmlFor:"roster-rank-officer"},trans("guilds.officer_rank")),control:r.createElement(ii,{type:"number",id:"roster-rank-officer",name:"officerRank",min:0,max:9,value:i.officerRank,onChange:e=>{let{name:t,value:n}=e;const a={...i};a[t]=BE(n),l(a)}})})),r.createElement("div",{className:"guild-settings__rank-cutoffs__column"},r.createElement(pE,{type:"label-left",label:r.createElement("label",{htmlFor:"roster-rank-member"},trans("guilds.member_rank")),control:r.createElement(ii,{type:"number",id:"roster-rank-member",name:"memberRank",min:0,max:9,value:i.memberRank,onChange:d})})),r.createElement("div",{className:"guild-settings__rank-cutoffs__column"},r.createElement(pE,{type:"label-left",label:r.createElement("label",{htmlFor:"roster-rank-recruit"},trans("guilds.recruit_rank")),control:r.createElement(ii,{type:"number",id:"roster-rank-recruit",name:"recruitRank",min:0,max:9,value:i.recruitRank,onChange:d})}))),n&&r.createElement(ti,{save:c,cancel:s?o:null,hasPendingChanges:s,saveText:trans("guilds.change_rank_cutoffs_button"),status:u})),r.createElement(fE,{show:u.isLoading}))};const qE=e=>{let{stealthMode:t,competitionMode:n}=e;const a=Zl(),{user:l}=Dl(),i=Bi(l,a),s={stealthMode:t,competitionMode:n},{pendingValue:o,setPendingValue:c,hasPendingChanges:u,resetPendingValue:d,status:m,save:p}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl();return ql().from(hh(e,t)).withHttpSave(`/guild/report-visibility/${n}`,(e=>e)).build()}(s),g=!i;return r.createElement(In,{title:trans("guilds.report_visibility_title")},r.createElement(Pn,null,r.createElement("div",{className:"guild-report-visibility-tile__content"},r.createElement("div",{className:"guild-report-visibility-tile__column"},r.createElement("div",null,r.createElement("h3",null,trans("guilds.stealth_mode_label")),r.createElement("span",{className:"guild-report-visibility-tile__toggle"},r.createElement(Wd,{id:"stealth-mode",checked:o.stealthMode,onChange:e=>{c({...o,stealthMode:e.target.checked})},disabled:g}))),r.createElement("p",null,trans("guilds.stealth_mode_description"))),r.createElement("div",{className:"guild-report-visibility-tile__column"},r.createElement("div",null,r.createElement("h3",null,trans("guilds.competition_mode_label")),r.createElement("span",{className:"guild-report-visibility-tile__toggle"},r.createElement(Wd,{id:"competition-mode",checked:o.competitionMode,onChange:e=>{c({...o,competitionMode:e.target.checked})},disabled:g}))),r.createElement("p",null,trans("guilds.competition_mode_description")))),i&&r.createElement(ti,{save:p,cancel:u?d:null,status:m,hasPendingChanges:u})),r.createElement(fE,{show:m.isLoading}))};qE.propTypes={stealthMode:i().bool.isRequired,competitionMode:i().bool.isRequired};var jE=qE,HE=()=>r.createElement("input",{type:"hidden",name:"_token",value:document.head.querySelector('meta[name="csrf-token"]')?.content}),GE=()=>{const{user:e}=Dl(),t=Zl(),[n,a]=(0,r.useState)(!1);return r.createElement(In,{title:trans("guilds.leave_guild")},r.createElement("form",{method:"POST",action:`/guild/leave/${t}/${e.id}`,onSubmit:e=>{if(!confirm(trans("guilds.leave_confirm")))return e.preventDefault(),void a(!1);a(!0)}},r.createElement(Pn,null,r.createElement("p",null,trans("guilds.leave_confirm")),r.createElement("div",{className:"leave-guild-tile__submit-button"},r.createElement(F,{type:"submit",styles:["warning"],onClick:()=>{},disabled:n},trans("guilds.leave_guild")))),r.createElement(HE,null)))},WE=()=>{const{user:e}=Dl(),t=Zl(),n=qi(e,t),[a,l]=(0,r.useState)(!n);return r.createElement(In,{title:trans("guilds.delete_guild")},r.createElement("form",{method:"POST",action:`/guild/delete/${t}`,onSubmit:e=>{if(!confirm(trans("guilds.deletion_confirm")))return e.preventDefault(),void l(!n);l(!0)}},r.createElement(Pn,null,r.createElement("p",null,trans("guilds.deletion_confirm")),r.createElement("div",{className:"delete-guild-tile__submit-button"},r.createElement(F,{type:"submit",disabled:a,styles:["warning"],onClick:()=>{}},trans("guilds.delete_guild")))),r.createElement(HE,null)))};const KE=(e,t,n)=>{const a=e.findIndex(t);return-1!==a&&(e.splice(a,1,n),e)};const ZE=(e,t)=>e.rank<t.rank?1:e.rank>t.rank?-1:e.name>t.name?1:e.name<t.name?-1:void 0,YE=e=>{let{guildUsers:t,regionHasUserOwnedCharacters:n}=e;const{user:a}=Dl(),{guild:l}=mE(),i=Bi(a,l.id),[s,o]=(0,r.useState)(),c=a.isAdmin?99:a?.guilds.find((e=>e.id===l.id))?.rank;t.sort(ZE);const{setValue:u,pendingValue:d,setPendingValue:m,hasPendingChanges:p,resetPendingValue:g,save:h,status:f}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{updateUserFromHttpResponse:a}=OE(),{updateGuildUsersFromHttpResponse:r}=DE();return t?.onHttpSuccess||(t.onHttpSuccess=e=>{a(e),r(e)}),ql().from(hh(e,t)).withHttpSave(`/guild/user-management/${n}`,(e=>({users:e}))).build()}(t);(0,r.useEffect)((()=>{m(t),u(t)}),[t,m,u]);const b=(0,r.useRef)();(0,r.useEffect)((()=>(b.current&&clearTimeout(b.current),b.current=setTimeout((()=>{o(null),b.current=null}),2e3),()=>clearTimeout(b.current))),[s]);const E=e=>{if(!window.confirm(trans("accounts.promote_confirm",{username:e.name})))return;if(3!==e.rank)return void console.error("Cannot promote a non-officer to GM");const t=d.findIndex((e=>4===e.rank)),n=-1!==t;if(n&&d[t]?.id===e.id)return void console.error("User is already GM");let a=[...d];n&&(a=KE(a,(e=>e.id===d[t].id),{...d[t],rank:3,flag:"changed"}));const r=KE([...a],(t=>t.id===e.id),{...e,rank:4,flag:"changed"});r.sort(ZE),o({id:e.id,ts:Date.now()}),m(r)},v=(e,t)=>{if(t<0||t>4)return;const n=d.findIndex((t=>t.id===e.id));if(-1===n)return;const a=KE([...d],(t=>t.id===e.id),{...e,rank:t,flag:"changed"});a.sort(ZE),m(a),o({id:e.id,ts:Date.now()})},y=e=>{v(e,e.rank+1)},_=d.filter((e=>"deleted"!==e.flag));return r.createElement(In,{title:trans("guilds.user_management_title")},r.createElement("div",{className:"guild-user-management-tile__wrapper"},r.createElement(Pn,null,r.createElement(ea,null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,trans("global.name")),r.createElement("th",null,trans("guilds.rank")),0==l.battlenet&&r.createElement("th",null,trans("global.commands")),n&&r.createElement("th",null,trans("global.characters")))),r.createElement("tbody",null,_.map(((e,t)=>r.createElement("tr",{key:e.id+e.name,className:`r${e.rank} guild-user-management-tile__row ${s?.id===e.id?"guild-user-management-tile__row--active":""}`,tabIndex:t},r.createElement("td",{"data-label":trans("global.name")},e.name),r.createElement("td",{"data-label":trans("guilds.rank")},AE[e.rank]??""),0==l.battlenet&&r.createElement("td",{"data-label":trans("global.commands"),className:"guild-user-management-tile__commands"},c>=3&&(e=>{if(c<3)return null;let t=null,n=null,a=null;const l=c>=4&&3===e.rank?E:y;return e.rank<4&&(e.rank+1<c||c>=4)&&(t=r.createElement(F,{title:"Promote",styles:["unstyled","icon"],onClick:()=>{l(e)}},r.createElement("i",{className:"zmdi zmdi-chevron-up"}))),e.rank<c&&(e.rank>0&&(n=r.createElement(F,{title:"Demote",styles:["unstyled","icon"],onClick:()=>{var t;v(t=e,t.rank-1)}},r.createElement("i",{className:"zmdi zmdi-chevron-down"}))),a=r.createElement(F,{title:"Kick",styles:["unstyled","icon","color-red"],onClick:()=>{(e=>{if(!window.confirm(trans("accounts.kick_confirm",{username:e.name})))return;const t=d.findIndex((t=>t.id===e.id));if(-1===t)return;const n=[...d];n.splice(t,1,{...e,flag:"deleted"}),m(n)})(e)}},r.createElement("i",{className:"zmdi zmdi-close"}))),r.createElement(r.Fragment,null,t,n,a)})(e)),n&&r.createElement("td",{"data-label":trans("global.characters"),className:"guild-user-management-tile__characters"},e.characters&&e.characters.map((e=>r.createElement(r.Fragment,{key:e.name},r.createElement("a",{className:e.className,href:`/character/id/${e.id}`,target:"_blank",rel:"noreferrer"},e.name)," "))))))))),i&&0==l.battlenet&&r.createElement(ti,{save:()=>{h()},cancel:p?g:null,hasPendingChanges:p,status:f}))),r.createElement(fE,{show:f.isLoading}))};YE.propTypes={guildUsers:i().array,regionHasUserOwnedCharacters:i().bool.isRequired};var JE=YE;const XE=e=>{let{currentTag:t,save:n,closeForm:a}=e;const[l,i]=(0,r.useState)(t?.name??""),s=()=>{n({...t,name:l}),a()};return r.createElement(Mn,null,r.createElement("div",{className:"report-tags-form__wrapper"},r.createElement(Pn,null,r.createElement("div",{className:"report-tags-form__form-element"},r.createElement(pE,{type:"label-top",label:r.createElement("label",null,trans("global.name")),control:r.createElement(ii,{value:l,className:"input-text--full-width",onChange:e=>{let{value:t}=e;i(t)},onKeyPress:e=>{13===e.charCode&&s()},maxLength:100})})),r.createElement(ti,{save:s,saveText:t?.name?trans("global.edit"):trans("global.add"),cancel:()=>{i(""),a()}}))))};XE.propTypes={currentTag:i().object,save:i().func.isRequired,closeForm:i().func.isRequired};var QE=XE;const ev=e=>{let{tags:t,isOfficer:n,setCurrentTag:a,showForm:l,deleteHandler:i,submitHandler:s,cancelHandler:o,status:c,hasPendingChanges:u}=e;return r.createElement(r.Fragment,null,r.createElement("p",null,trans("guilds.report_tags_table_caption")),r.createElement("div",{className:"report-tag-table__container"},r.createElement(Pn,null,r.createElement(ea,null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,trans("global.name")),r.createElement("th",null,trans("global.commands")))),r.createElement("tbody",null,t.map((e=>r.createElement("tr",{key:e.id},r.createElement("td",{className:"report-tags-table__body__name"},e.name),r.createElement("td",{className:"report-tags-table__body__commands"},n&&r.createElement(r.Fragment,null,r.createElement(F,{title:trans("global.edit"),styles:["unstyled","icon"],onClick:()=>{(e=>{a(e),l()})(e)}},r.createElement("i",{className:"zmdi zmdi-edit"})),r.createElement(F,{title:trans("global.delete"),styles:["unstyled","icon","color-red"],onClick:()=>{(e=>{i(e)})(e)}},r.createElement("i",{className:"zmdi zmdi-close"}))))))),n&&r.createElement("tr",null,r.createElement("td",{colSpan:2,className:"report-tags-table__create-button"},r.createElement(ti,{save:l,saveText:trans("guilds.create_report_tag_caption")}))))),n&&r.createElement(ti,{save:s,cancel:u?o:null,status:c,hasPendingChanges:u}))))};ev.propTypes={tags:i().array.isRequired,isOfficer:i().bool.isRequired,showForm:i().func.isRequired,setCurrentTag:i().func.isRequired,deleteHandler:i().func.isRequired,submitHandler:i().func.isRequired,cancelHandler:i().func.isRequired,status:i().object,hasPendingChanges:i().bool.isRequired};var tv=ev;const nv=e=>{let{tags:t}=e;const n=Zl(),{user:a}=Dl(),l=Bi(a,n),{pendingValue:i,setPendingValue:s,hasPendingChanges:o,resetPendingValue:c,save:u,status:d}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl();return ql().from(hh(e,t)).withHttpSave(`/guild/report-tags/${n}`,(e=>({tags:e}))).build()}(t),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(),f=i.filter((e=>"delete"!==e?.flag));return r.createElement(In,{title:trans("guilds.report_tags_title")},r.createElement(Pn,null,r.createElement("p",null,trans("guilds.report_tags_intro")),m?r.createElement(QE,{currentTag:g,save:e=>{const t=i.findIndex((t=>t.id===e.id));if(-1!==t){const n=[...i],a="new"===e?.flag?"new":"edit";return n.splice(t,1,{...e,flag:a}),s(n),void h()}const n=[...i,{...e,id:Date.now(),flag:"new"}];s(n)},closeForm:()=>{p(!1),h()}}):r.createElement(tv,{isOfficer:l,tags:f,showForm:()=>{p(!0)},setCurrentTag:h,deleteHandler:e=>{const t=i.findIndex((t=>t.id===e.id));if(-1===t)return;const n=[...i];n.splice(t,1,{...e,flag:"delete"}),s(n),h()},submitHandler:u,cancelHandler:c,hasPendingChanges:o,status:d})),r.createElement(fE,{show:d.isLoading}))};nv.propTypes={tags:i().array.isRequired};var av=nv;const rv=e=>{let{regionHasUserEditableCharacterProfiles:t}=e;const n=Y(),{guild:a}=mE(),{user:l}=Dl(),i=Bi(l,a.id),{save:s,status:o}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{mergeGuild:a}=mE();return t?.onHttpSuccess||(t.onHttpSuccess=e=>{const t=e?.overrideState?.joinCode;a({joinCode:t})}),ql().from(hh(e,t)).withHttpSave(`/guild/regenerate-join-code/${n}`,(e=>e)).build()}(a.joinCode),c=()=>a.id+"/"+a.joinCode;return r.createElement(In,{title:trans("guilds.auto_join_link_title")},r.createElement(Pn,null,r.createElement("p",null,trans("guilds.autojoin_code_label")," ",r.createElement(Ni,{valueToCopy:c()})),r.createElement("p",null,trans("guilds.autojoin_url_label")," ",r.createElement(Ni,{valueToCopy:window.location.origin+"/guild/autojoin/"+c()})),t&&r.createElement("p",null,trans("guilds.auto_join_instructions",{siteName:n.siteTitle})),r.createElement("p",null,trans("guilds.auto_join_code_reuse_warning")),i&&r.createElement("div",null,r.createElement(ti,{save:s,saveText:trans("guilds.generate_join_code_label"),status:o}))),r.createElement(fE,{show:o.isLoading}))};rv.propTypes={regionHasUserEditableCharacterProfiles:i().bool.isRequired};var lv=rv,iv={id:i().number.isRequired,name:i().string.isRequired,serverName:i().string.isRequired};const sv=e=>{let{parentGuild:t,potentialParentGuilds:n}=e;const a=Zl(),{user:l}=Dl(),i=Bi(l,a),[s,o]=(0,r.useState)(!1),c={parentGuild:t?.id||0},{pendingValue:u,setPendingValue:d,hasPendingChanges:m,save:p,status:g}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{updateGuildFromHttpResponse:a}=bE(),{updateGuildHeaderFromHttpResponse:r}=_E();return t?.onHttpSuccess||(t.onHttpSuccess=e=>{a(e),r(e)}),ql().from(hh(e,t)).withHttpSave(`/guild/parent-guild/${n}`,(e=>e)).build()}(c),h=()=>{o(!s)};return(0,r.useEffect)((()=>{g.isSuccess&&o(!1)}),[g]),r.createElement(In,{title:trans("guilds.parent_guild_title")},r.createElement(Pn,null,r.createElement("p",null,trans("guilds.parent_guild_table_caption")),!s&&r.createElement(r.Fragment,null,r.createElement("p",null,trans("guilds.parent_guild_label")," ",r.createElement("strong",null,(e=>{if(e===t?.id)return`${t.name} (${t.server.name})`;const a=n.find((t=>t.id===e));return a?`${a.name} (${a.serverName})`:"None"})(u.parentGuild))),i&&n&&r.createElement(ti,{save:h,saveText:trans("accounts.change"),status:g})),i&&s&&n&&r.createElement(Mn,null,r.createElement(Pn,null,r.createElement(pE,{label:r.createElement("label",{htmlFor:"discord"},trans("guilds.set_parent_guild")),control:r.createElement(hE,{name:"parentGuild",onChange:e=>{d({parentGuild:e.value})},valueFromOptions:u?.parentGuild||0,options:[{value:0,label:trans("reports.none")},...n.map((e=>({label:`${e.name} (${e.serverName})`,value:e.id})))]})}),r.createElement(ti,{save:e=>{e.preventDefault(),p()},cancel:h,hasPendingChanges:m,status:g})))),r.createElement(fE,{show:g.isLoading}))};sv.propTypes={parentGuild:i().exact(cE),potentialParentGuilds:i().arrayOf(i().exact(iv))};var ov=sv;function cv(){return cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cv.apply(this,arguments)}const uv=e=>{let{items:t,style:n}=e;const a=`navigation-stacked ${n&&`navigation-stacked--${n}`}`;return r.createElement("div",{className:a},r.createElement("ul",null,t.map((e=>r.createElement(h,cv({key:`${e.id}-${e.url}-${e.label}`},e))))))};uv.propTypes={style:i().string,items:i().arrayOf(i().shape({id:i().string,url:i().string,label:i().string.isRequired}))};var dv=uv;const mv=e=>{let{childGuilds:t,potentialChildGuilds:n}=e;const a=Zl(),{user:l}=Dl(),i=Bi(l,a),[s,o]=(0,r.useState)([]),{pendingValue:c,setPendingValue:u,resetPendingValue:d,hasPendingChanges:m,save:p,status:g}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{setGuildHeader:a}=yE();return t.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a((e=>({...e,childGuilds:t})))}),[a]),ql().from(hh(e,t)).withHttpSave(`/guild/edit-child-guilds/${n}`,(e=>({childGuildIds:e.map((e=>e.id))}))).build()}(t,{alwaysEditable:!0});return r.createElement(In,{title:trans("guilds.child_guilds_title"),className:"guild-child-guilds-tile"},r.createElement(Pn,null,r.createElement(vn,null,`${trans("guilds.child_guilds_intro")}\n        \n${trans("guilds.child_guilds_table_caption")}`),r.createElement("div",{className:"guild-child-guilds-tile__table-container"},r.createElement(Pn,null,r.createElement(ea,null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,trans("global.name")),r.createElement("th",null,trans("global.commands")))),r.createElement("tbody",null,c?.map((e=>r.createElement("tr",{key:e.id},r.createElement("td",{className:"guild-child-guilds-tile__table-name-cell"},e.name),r.createElement("td",{className:"guild-child-guilds-tile__table-commands-cell"},i&&r.createElement(F,{onClick:()=>{(e=>{const t=c.findIndex((t=>t.id===e.id));if(-1===t)return;const n=[...c];n.splice(t,1),u(n)})(e)},title:trans("global.delete"),styles:["unstyled","icon","color-red"]},r.createElement("i",{className:"zmdi zmdi-close"})))))),i&&n?.length>0&&r.createElement("tr",null,r.createElement("td",{colSpan:2},r.createElement("div",{className:"guild-child-guilds-tile__add-teams-container"},r.createElement(Wh,{className:"guild-child-guilds-tile__add-teams-select",items:n?.map((e=>({label:e.name,value:e}))),isMulti:!0,isBeingEdited:!0,hasPendingChanges:!0,value:[],status:g,pendingValue:s,setPendingValue:o}),r.createElement(F,{onClick:()=>{(()=>{if(!s.length)return;const e=[...c];for(const t of s)-1===c.findIndex((e=>e.id===t.id))&&e.push(t);o([]),u(e)})()},disabled:g.isLoading},"Add")))))),i&&r.createElement(ti,{save:p,cancel:m?d:null,status:g,hasPendingChanges:m})))))};mv.propTypes={childGuilds:i().array.isRequired,potentialChildGuilds:i().array.isRequired};var pv=mv;function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gv.apply(this,arguments)}function hv(e){let{guild:t,guildSettings:n,guildRegion:a,guildHeader:l,navigation:i,factions:s,regions:o,hashedRegionsWithServers:c,parentGuild:u,potentialParentGuilds:d,guildUsers:m,reportTags:p,childGuilds:g,potentialChildGuilds:h,regionHasUserOwnedCharacters:f,prefixForLocalizedGuildType:b,showCustomGuildsUI:E,assetServer:v,regionHasUserEditableCharacterProfiles:y,articlesBaseUrlForArea:_}=e;return r.createElement(wm,null,r.createElement(dE,{value:t},r.createElement(vE,{value:l},r.createElement(FE,{value:m},r.createElement(fv,{guild:t,guildSettings:n,guildRegion:a,guildHeader:l,navigation:i,factions:s,regions:o,hashedRegionsWithServers:c,parentGuild:u,potentialParentGuilds:d,guildUsers:m,reportTags:p,childGuilds:g,potentialChildGuilds:h,regionHasUserOwnedCharacters:f,prefixForLocalizedGuildType:b,showCustomGuildsUI:E,assetServer:v,regionHasUserEditableCharacterProfiles:y,articlesBaseUrlForArea:_})))))}hv.propTypes={guild:i().exact(cE).isRequired,guildSettings:i().object,guildRegion:i().exact(oE).isRequired,guildHeader:i().object.isRequired,navigation:i().object.isRequired,factions:i().array.isRequired,parentGuild:i().exact(cE),potentialParentGuilds:i().arrayOf(i().exact(iv)),guildUsers:i().array,reportTags:i().array,childGuilds:i().array,potentialChildGuilds:i().array,regionHasUserOwnedCharacters:i().bool.isRequired,prefixForLocalizedGuildType:i().string.isRequired,showCustomGuildsUI:i().bool.isRequired,assetServer:i().string.isRequired,regionHasUserEditableCharacterProfiles:i().bool.isRequired,articlesBaseUrlForArea:i().string.isRequired};const fv=e=>{let{guildSettings:t,navigation:n,factions:a,parentGuild:l,potentialParentGuilds:i,reportTags:s,childGuilds:o,potentialChildGuilds:c,regionHasUserOwnedCharacters:u,prefixForLocalizedGuildType:d,showCustomGuildsUI:m,assetServer:p,regionHasUserEditableCharacterProfiles:g,articlesBaseUrlForArea:h}=e;const{guild:f}=mE(),{guildHeader:b}=yE(),{user:E}=Dl(),{guildUsers:v}=ME(),y=Bi(E,f.id),_=qi(E,f.id),w=[{title:trans("guilds.edit_guild_caption"),visibility:y,menu:"main",render:r.createElement(CE,{factions:a,prefixForLocalizedGuildType:d,showCustomGuildsUI:m})},{title:trans("guilds.roster_management_style_title"),visibility:u||E?.isAdmin,menu:"main",render:r.createElement($E,{regionHasUserOwnedCharacters:u})},{title:trans("guilds.auto_join_link_title"),visibility:0===f.battlenet,menu:"main",render:r.createElement(lv,{regionHasUserEditableCharacterProfiles:g})},{title:trans("guilds.rank_cutoffs_title"),visibility:1===f.battlenet,menu:"main",render:r.createElement(VE,null)},{title:trans("guilds.parent_guild_title"),visibility:1===f.type,menu:"main",render:r.createElement(ov,{parentGuild:l,potentialParentGuilds:i})},{title:trans("guilds.report_visibility_title"),visibility:!0,menu:"main",render:r.createElement(jE,{stealthMode:!!t?.stealthMode,competitionMode:!!t?.competitionMode})},{title:trans("guilds.report_tags_title"),visibility:!0,menu:"main",render:r.createElement(av,{tags:s})},{title:trans("guilds.child_guilds_title"),visibility:y&&1!==f.type,menu:"main",render:r.createElement(pv,{childGuilds:o,potentialChildGuilds:c})},{title:trans("guilds.user_management_title"),visibility:!0,menu:"main",render:r.createElement(JE,{guildUsers:v,regionHasUserOwnedCharacters:u})},{title:trans("guilds.social_integration_title"),visibility:y,menu:"main",render:r.createElement(xE,{twitter:t?.twitter,twitch:t?.twitch,youtube:t?.youtube,icon:t?.icon,useIcon:t?.useIcon,assetServer:p})},{title:trans("guilds.discord_webhook_title"),visibility:y,menu:"main",render:r.createElement(RE,{discord:t?.discord,articlesBaseUrlForArea:h})},{title:trans("guilds.leave_guild"),visibility:!0,menu:"destructive",render:r.createElement(GE,null)},{title:trans("guilds.delete_guild"),visibility:_,menu:"destructive",render:r.createElement(WE,null)}],k=e=>`guild-settings-${e.toLowerCase().split(" ").join("-")}`,N=e=>w.filter((t=>t.menu===e&&t.visibility)).map((e=>({id:`navigation-${e.title}`,href:"",label:e.title,onClick:t=>{var n;t.preventDefault(),n=`[name="${k(e.title)}"]`,document.querySelector(n).scrollIntoView({behavior:"smooth"})}}))),T=N("main"),C=N("destructive");return r.createElement("div",{className:"guild-settings-page"},r.createElement(Hi,b),r.createElement(Mi,null,r.createElement(Gi,gv({},n,{relatedLinks:b.relatedLinks})),r.createElement("div",{className:"guild-settings-page__content"},r.createElement("div",{className:"guild-settings-page__column"},r.createElement("div",{className:"nav-stacked-container"},r.createElement(dv,{items:T}),r.createElement(dv,{style:"danger",items:C}))),r.createElement("div",{className:"guild-settings-page__column guild-settings-page__tiles"},w.map(((e,t)=>{if(e.visibility)return r.createElement(r.Fragment,{key:t},r.createElement("a",{className:"guild-settings-page__scroll-target",name:k(e.title)}),e.render)}))))))};fv.propTypes=hv.propTypes,sm(".guild-settings-page-container",hv);var bv={id:i().number.isRequired,name:i().string.isRequired,shortName:i().string.isRequired};const Ev=e=>{let{guildHeader:t,guildRegion:n,navigation:a,game:l,errorMessage:i}=e;return r.createElement(Oi.Provider,{value:t.guildName},r.createElement(Xa.Provider,{value:n},r.createElement(K.Provider,{value:l},r.createElement(Hi,t),r.createElement(Mi,null,r.createElement(E,a),r.createElement("div",{className:"guild-settings-page-error-page"},r.createElement(In,{title:trans("global.access_denied")},r.createElement(vn,null,i)))))))};function vv(e){let{openLinksExternally:t=!1,markdown:n}=e;return r.createElement("div",{className:"markdown-page"},r.createElement(Mi,{width:"narrow"},r.createElement(vn,{restricted:!1,openLinksExternally:t},n)))}Ev.propTypes={navigation:i().object.isRequired,guildHeader:i().object.isRequired,guildRegion:i().shape(bv).isRequired,game:i().shape(Kg).isRequired,errorMessage:i().string.isRequired},sm(".guild-settings-page-error-page-container",Ev),vv.propTypes={openLinksExternally:i().bool,markdown:i().string},sm(".markdown-page-container",vv);var yv=i().shape({top:i().number,left:i().number,bottom:i().number,right:i().number});function _v(e){let{children:t,removeTopMargin:n,removeBottomMargin:a}=e;return r.createElement("h1",{className:`page-title ${n?"page-title--no-top-margin":""} ${a?"page-title--no-bottom-margin":""}`},t)}_v.propTypes={children:i().node.isRequired,removeTopMargin:i().bool,removeBottomMargin:i().bool};var wv=_v;function kv(e){let{title:t,removeTopMargin:n,removeBottomMargin:a,imageUrl:l,imagePosition:i,imageAlt:s}=e;return r.createElement("div",{className:"page-title-and-image "+(l?"page-title-and-image--with-image":"")},r.createElement(wv,{removeTopMargin:n,removeBottomMargin:a},t),l&&r.createElement("div",{className:"page-title-and-image__image-container"},r.createElement("img",{className:"page-title-and-image__image",src:l,alt:s,style:i})))}kv.propTypes={title:i().string.isRequired,removeTopMargin:i().bool,removeBottomMargin:i().bool,imageUrl:i().string,imagePosition:yv,imageAlt:i().string};var Nv=kv,Tv=e=>{(0,r.useEffect)((()=>{if(!e)return;const t="react-body-background-image";let n=document.getElementById(t);return n||(n=document.createElement("div"),n.setAttribute("id",t),n.style.backgroundPosition="center",n.style.backgroundAttachment="fixed",n.style.backgroundSize="cover",n.style.position="absolute",n.style.top="0",n.style.bottom="0",n.style.left="0",n.style.right="0",n.style.zIndex="-1",document.body.prepend(n)),n.style.backgroundImage=`url(${e})`,()=>{document.getElementById(t)?.remove()}}),[e])};function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cv.apply(this,arguments)}function Sv(e){let{anyClip:t,titleImageUrl:n,titleImagePosition:a,playerLookingForGuildImageUrl:l,isGuildLookingForPlayersEnabled:i,guildLookingForPlayersImageUrl:s,randomGuildSearchResults:o,backgroundImageUrl:c}=e;const u=Y(),d=i?e=>{let{children:t}=e;return r.createElement(P,{href:"/recruitment/guild-looking-for-players"},t)}:e=>{let{children:t}=e;return r.createElement("div",{className:"recruitment-page__tile--disabled"},t)};return Tv(c),r.createElement(wm,null,r.createElement("div",{className:"recruitment-page"},r.createElement(Mi,{width:"narrow"},r.createElement(Nv,{title:trans("recruitment.welcome_to_recruitment",{siteTitle:u.siteTitle}),imageUrl:n,imagePosition:a,imageAlt:"NPC"}),r.createElement(Pn,null,r.createElement(In,{title:trans("recruitment.how_can_we_help_you")},r.createElement(Pn,null,r.createElement(P,{href:"/recruitment/player-looking-for-guilds"},r.createElement(Mn,null,r.createElement("div",{className:"recruitment-page__option "+(l?"recruitment-page__option--with-image":"")},l&&r.createElement("div",{className:"recruitment-page__option-image-container"},r.createElement("img",{className:"recruitment-page__option-image",src:l,alt:"Player"})),r.createElement("div",{className:"recruitment-page__option-text"},trans("recruitment.im_a_player_looking_for_a_guild"))))),r.createElement(vn,{className:"recruitment-page__help"},`[${trans("recruitment.tell_me_more_about_how_to_find_a_guild")}](${u.articlesBaseUrl}/help/recruitment-help-player-looking-for-guild)`),r.createElement(d,null,r.createElement(Mn,null,!i&&r.createElement("div",{className:"recruitment-page__option-coming-soon-container"},r.createElement("div",{className:"recruitment-page__option-coming-soon"},trans("global.coming_soon"),"!")),r.createElement("div",{className:"recruitment-page__option "+(s?"recruitment-page__option--with-image":"")},s&&r.createElement("div",{className:"recruitment-page__option-image-container"},r.createElement("img",{className:"recruitment-page__option-image",src:s,alt:"Guild"})),r.createElement("div",{className:"recruitment-page__option-text"},trans("recruitment.we_are_a_guild_looking_for_players"))))),r.createElement(vn,{className:"recruitment-page__help"},`[${trans("recruitment.tell_me_more_about_how_to_find_players_for_my_guild")}](${u.articlesBaseUrl}/help/recruitment-help-guild-looking-for-player)`),r.createElement("div",{className:"recruitment-page__content-and-ad "+(t?"recruitment-page__content-and-ad--with-ad":"")},r.createElement(Mn,null,r.createElement(vn,null,"> "+trans("recruitment.log_in_and_claim_character_to_search_for_guilds")+"\n\n > "+trans("recruitment.fill_in_guild_profile_page_to_appear_in_search_results"))),t&&r.createElement("div",{className:"recruitment-page__any-clip"},r.createElement(tp,t))))),o?.length>1&&r.createElement(In,{title:trans("recruitment.find_guilds_like_these")+"!"},r.createElement(Pn,null,o.map(((e,t)=>r.createElement(Aa,Cv({key:t},e))))))))))}function Iv(e){let{displayLabel:t="",editingLabel:n,disabled:a=!1}=e;const{user:l}=Dl(),{character:i,setCharacter:s}=hm(),[o,c]=(0,r.useState)(!1);if(!l?.characters?.length)return r.createElement("div",{className:"character-selector"},r.createElement(vn,null,trans("character.no_user_characters")));n??=trans("character.select_character_to_use");const u=l.characters.map((e=>({value:e.id,label:`${e.name} (${e.server.name} - ${e.region.shortName})`}))),d=u.find((e=>e.value===i?.id))??u[0];return r.createElement("div",{className:"character-selector"},o&&!a?r.createElement(r.Fragment,null,r.createElement("label",{htmlFor:"character",className:"character-selector__label"},n,":"),r.createElement("div",{className:"character-selector__select"},r.createElement(ma.ZP,{name:"character",defaultValue:d,onChange:e=>{const t=l.characters.find((t=>t.id===e.value));s(t)},options:u,menuPortalTarget:document.body,isDisabled:a,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})),r.createElement(F,{onClick:()=>c(!1)},trans("global.done"))):r.createElement(r.Fragment,null,r.createElement("span",null,r.createElement(vn,{enhanced:!0,styles:["inline"]},t)," ",u.length>1&&r.createElement(F,{disabled:a,onClick:()=>{l.characters.length&&!i&&s(l.characters[0]),c(!0)},styles:["link"]},i?trans("character.change_character"):trans("character.set_a_character"),"."))))}Sv.propTypes={anyClip:i().object,titleImageUrl:i().string,titleImagePosition:yv,playerLookingForGuildImageUrl:i().string,isGuildLookingForPlayersEnabled:i().bool.isRequired,guildLookingForPlayersImageUrl:i().string,randomGuildSearchResults:i().arrayOf(i().shape(zn)),backgroundImageUrl:i().string},sm(".recruitment-page-container",Sv),Iv.propTypes={displayLabel:i().string,editingLabel:i().string,disabled:i().bool};var xv=Iv,Pv=i().shape({id:i().number.isRequired,classId:i().number.isRequired,className:i().string.isRequired,specName:i().string.isRequired,fullType:i().string.isRequired,cssClassName:i().string.isRequired,faction:i().number});function Rv(e){let{displayLabel:t="",editingLabel:n,specs:a=[],initialSpecs:l,beginEdit:i,isBeingEdited:s,save:o,status:c,pendingValue:u,setPendingValue:d}=e;const m=Y();n??=transForGame("recruitment.select_specs_to_use",m.lowercaseName);const p=a.map((e=>({value:e.id,label:e.specName}))),g=l?l.map((e=>p.find((t=>t.value===e?.id)))):[p[0]],[h,f]=(0,r.useState)(g);return(0,r.useEffect)((()=>{if(!h)return;const e=h.map((e=>a.find((t=>t.id===e.value))));d(e)}),[h,d,a]),r.createElement("div",{className:"spec-selector"},s?r.createElement(Pn,null,r.createElement("div",{className:"spec-selector__controls"},r.createElement("label",{htmlFor:"spec",className:"spec-selector__label"},n,":"),r.createElement("div",{className:"spec-selector__select"},r.createElement(ma.ZP,{name:"spec",inputId:"spec",isMulti:!0,defaultValue:g,onChange:f,options:p,menuPortalTarget:document.body,isDisabled:c.isLoading,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"}),multiValueRemove:e=>({...e,color:"#222"})}})),r.createElement(F,{onClick:o,disabled:c.isLoading||!u},trans("global.done"))),c.isError&&r.createElement(se,null,c.errorMessage)):r.createElement(r.Fragment,null,r.createElement("span",null,r.createElement(vn,{enhanced:!0,styles:["inline"]},t)," ",r.createElement(F,{disabled:c.isLoading,onClick:i,styles:["link",...l?.length?[]:["required-border"]]},l?.length?transForGame("recruitment.change_specs",m.lowercaseName):transForGame("recruitment.set_specs",m.lowercaseName),"."))))}Rv.propTypes={displayLabel:i().string,editingLabel:i().string,disabled:i().bool,specs:i().arrayOf(Pv),initialSpecs:i().arrayOf(Pv),beginEdit:i().func,isBeingEdited:i().bool,save:i().func,status:Lt,pendingValue:i().arrayOf(Pv),setPendingValue:i().func};var Av=Rv,Lv=(e,t)=>{const{user:n}=Dl(),{character:a}=hm();return ql().new(e,t).withTileActions((0,r.useCallback)((()=>function(e,t){return e?.characters.find((e=>e.id===t))||e?.isAdmin}(n,a?.id)),[n,a])).build()};const $v=r.createContext(null),Ov=e=>{let{children:t}=e;const{character:n}=hm(),[{data:a,status:l},i]=$t();(0,r.useEffect)((()=>{n?.id&&i(`/character/recruitmentSettings/${n.id}`)}),[n,i]);const[s,o]=(0,r.useState)(void 0);(0,r.useEffect)((()=>{o(a)}),[a]);const c=(0,r.useCallback)((e=>{o((t=>({...t,...e})))}),[]);return r.createElement($v.Provider,{value:{characterRecruitmentSettings:s,setCharacterRecruitmentSettings:o,mergeCharacterRecruitmentSettings:c,characterRecruitmentSettingsStatus:l}},t)};var zv=()=>(0,r.useContext)($v);function Fv(e){return e?.specIds?.length?e.specIds.map((t=>e.possibleSpecs.find((e=>e.id===t)))).filter(Boolean):[]}var Mv=function(){const e=Y(),{character:t}=hm(),{characterRecruitmentSettings:n}=zv(),{value:a,isBeingEdited:l,pendingValue:i,setPendingValue:s,beginEdit:o,save:c,status:u}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({specIds:t.map((e=>e.id))})}),[a]);const l=Fv(n),i=ql().from(Lv(l,e)).withHttpSave(`/character/recruitmentSpecs/${t.id}`,(e=>({specIds:e.map((e=>e.id))}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(Fv(n))}),[n,s]),i}();return r.createElement("div",{className:"editable-character-recruitment-spec"},r.createElement(Av,{displayLabel:a?.length?trans("recruitment.character_mostly_plays_as",{characterName:cf(t.name,t.cssClassName),specName:Hn(a.map((e=>uf(e.fullType,e.specName))))}):`${transForGame("recruitment.no_specs",e.lowercaseName)} (${trans("global.required")}).`,specs:n?.possibleSpecs,initialSpecs:a,isBeingEdited:l,beginEdit:o,pendingValue:i,setPendingValue:s,save:c,status:u}))};function Dv(e){let{style:t,anyClip:n}=e;const{character:a}=hm(),{value:l,isBeingEdited:i,setPendingValue:s,hasPendingChanges:o,tileActions:c=[],beginEdit:u,cancelEdit:d,save:m,status:p}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({description:t})}),[a]);const l=(0,r.useCallback)((()=>n?.description??""),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentDescription/${t.id}`,(e=>({description:e}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("global.about_subject",{subject:a.name}),style:t,actions:c},r.createElement(uh,{value:l,isBeingEdited:i,setPendingValue:s,hasPendingChanges:o,cancelEdit:d,save:m,status:p,anyClip:n,defaultContent:r.createElement(Pn,{position:"left",gap:"smaller"},r.createElement(vn,null,trans("recruitment.use_description_to_tell_guilds_about_yourself")),r.createElement(F,{onClick:u,styles:["link"]},trans("global.edit")))}))}Dv.propTypes={style:i().string,anyClip:i().object};var Uv=Dv;function Bv(e){let{disabled:t=!1,visibilities:n=[]}=e;const{value:a,isBeingEdited:l,setPendingValue:i,beginEdit:s,save:o,status:c}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({visibility:t})}),[a]);const l=(0,r.useCallback)((()=>n?.visibility??0),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentVisibility/${t.id}`,(e=>({visibility:e}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}(),u=n,d=u.find((e=>e.value===a))??u[0];return r.createElement("div",{className:"visibility-selector"},l&&!t?r.createElement(r.Fragment,null,r.createElement("label",{htmlFor:"visibility",className:"visibility-selector__label"},trans("recruitment.select_visibility_to_use"),":"),r.createElement("div",{className:"visibility-selector__select"},r.createElement(ma.ZP,{name:"visibility",defaultValue:d,onChange:e=>{i(e.value)},options:u,menuPortalTarget:document.body,isDisabled:t,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})),r.createElement(F,{onClick:o,disabled:c.isLoading},trans("global.done"))):r.createElement(r.Fragment,null,r.createElement("span",null,`${1===a?trans("recruitment.do_not_list_character_in_recruitment"):trans("recruitment.list_character_in_recruitment")}. `,r.createElement(F,{disabled:t,onClick:s,styles:["link"]},trans("recruitment.change_your_visibility"),"."))))}Bv.propTypes={disabled:i().bool,visibilities:i().arrayOf(Uh)};var Vv=Bv,qv=function(){const{user:e}=Dl();return r.createElement("div",{className:"claimed-characters"},e?r.createElement(Pn,null,e.characters?.length>0?r.createElement(vn,{openLinksExternally:!1},`\n${trans("accounts.you_have_claimed_x_max_level_characters",{x:e.characters.length})}:\n\n*${Hn(e.characters.map((e=>`[${e.name}](/character/id/${e.id}) (${e.server.name} - ${e.region.shortName})`)))}.*\n\n[${trans("accounts.claim_characters_from_user_settings")}](/profile).\n              `):r.createElement(vn,{openLinksExternally:!1},`\n${trans("accounts.you_have_not_claimed_max_level_characters")}.\n\n[${trans("accounts.claim_characters_from_user_settings")}](/profile).\n              `)):r.createElement(vn,{openLinksExternally:!1},`\n${trans("accounts.you_are_not_logged_in")}\n\n[${trans("accounts.log_in_to_see_claimed_characters")}](/login).\n          `))};const jv=e=>{let{className:t,src:n,alt:a,size:l=64,rounded:i=!1,bordered:s=!1,style:o={}}=e;const c=hm(),u=c?.character,d=r.createRef();return(0,r.useEffect)((()=>{d?.current?.style.setProperty("--size",l)}),[d,l]),""===n?null:(n=n||u?.thumbnail,n?r.createElement("img",{ref:d,className:`${t??""} character-thumbnail`+(i?" character-thumbnail--rounded":"")+(s?" character-thumbnail--bordered":""),src:n,alt:a,style:o,onLoad:e=>e.target.style.display="block",onError:e=>e.target.style.display="none"}):null)};jv.propTypes={className:i().string,src:i().string,alt:i().string,size:i().number,rounded:i().bool,bordered:i().bool,style:i().object};var Hv=jv;function Gv(e){let{style:t}=e;const{value:n,pendingValue:a,isBeingEdited:l,setPendingValue:i,hasPendingChanges:s,tileActions:o=[],beginEdit:c,cancelEdit:u,save:d,status:m}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({contactInformation:t})}),[a]);const l=(0,r.useCallback)((()=>n?.contactInformation??{}),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentContactInformation/${t.id}`,(e=>e)).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("recruitment.contact_information"),style:t,actions:o,required:!n?.text?.length},r.createElement(Rf,{value:n?.text,pendingValue:a?.text,isBeingEdited:l,setPendingValue:e=>i({...a,text:e}),hasPendingChanges:s,cancelEdit:u,save:d,status:m,maxLength:50,defaultContent:r.createElement(Pn,{position:"left",gap:"smaller"},r.createElement(vn,null,trans("recruitment.how_should_guilds_get_in_touch_with_you")),r.createElement(F,{onClick:c,styles:["link"]},trans("global.edit"))),displayValueAsMarkdown:!0}))}Gv.propTypes={style:i().string};var Wv=Gv;function Kv(e){let{recruitmentVisibilities:t=[]}=e;const{user:n}=Dl(),{character:a}=hm(),{characterRecruitmentSettingsStatus:l}=zv();return r.createElement("div",{className:"character-recruitment-profile-tile"},r.createElement(In,{title:"1. "+trans("recruitment.update_your_profile"),subtitle:trans("recruitment.update_your_profile_subtitle")},n?.characters?.length>0?r.createElement(r.Fragment,null,r.createElement("div",{className:"character-recruitment-profile-tile__character-select"},r.createElement("div",{className:"character-recruitment-profile-tile__character-select__thumbnail"},r.createElement(Hv,{rounded:!0})),r.createElement("div",{className:"character-recruitment-profile-tile__character-select__input"},r.createElement(xv,{displayLabel:a?trans("recruitment.character_is_looking_for_a_guild",{characterName:cf(a.name,a.cssClassName)}):trans("character.no_character_selected")}),l.isSuccess&&r.createElement("div",null,r.createElement(Mv,null),r.createElement(Vv,{visibilities:t})))),l.isLoading&&r.createElement(kt,null),l.isSuccess&&r.createElement(Pn,null,r.createElement(Uv,{style:"sub-tile"}),r.createElement(Wv,{style:"sub-tile"})),l.isError&&r.createElement(se,null,l.errorMessage)):r.createElement(qv,null)))}Kv.propTypes={recruitmentVisibilities:i().arrayOf(Uh)};var Zv=Kv;function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yv.apply(this,arguments)}function Jv(e){let{activities:t,style:n}=e;const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({activityIds:t})}),[a]);const l=(0,r.useCallback)((()=>n?.activityIds??[]),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentActivities/${t.id}`,(e=>({activityIds:e}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("recruitment.activities"),actions:a.tileActions,style:n},r.createElement(Wh,Yv({label:trans("recruitment.editing_character_activities_description"),notSetLabel:trans("global.any"),items:t,isMulti:!0},a)))}Jv.propTypes={activities:i().arrayOf(Uh).isRequired,style:i().string};var Xv=Jv;function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qv.apply(this,arguments)}function ey(e){let{languages:t,style:n}=e;const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({languageCodes:t})}),[a]);const l=(0,r.useCallback)((()=>n?.languageCodes??[]),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentLanguages/${t.id}`,(e=>({languageCodes:e}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("recruitment.languages"),actions:a.tileActions,style:n,required:!a.value.length},r.createElement(Wh,Qv({label:trans("recruitment.editing_character_language_description"),items:t,isMulti:!0},a)))}ey.propTypes={languages:i().arrayOf(Uh).isRequired,style:i().string};var ty=ey;function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ny.apply(this,arguments)}function ay(e){let{factions:t,style:n}=e;const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({factionIds:t})}),[a]);const l=(0,r.useCallback)((()=>n?.factionIds??[]),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentFactions/${t.id}`,(e=>({factionIds:e}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("global.factions"),actions:a.tileActions,style:n},r.createElement(Wh,ny({label:trans("recruitment.editing_character_factions_description"),notSetLabel:trans("global.any"),items:t,isMulti:!0},a)))}ay.propTypes={factions:i().arrayOf(Uh).isRequired,style:i().string};var ry=ay;function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ly.apply(this,arguments)}function iy(e){let{style:t}=e;const{characterRecruitmentSettings:n}=zv(),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({serverIds:t})}),[a]);const l=(0,r.useCallback)((()=>n?.serverIds??[]),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentServers/${t.id}`,(e=>({serverIds:e}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("global.servers"),actions:a.tileActions,style:t},r.createElement(Wh,ly({label:trans("recruitment.editing_character_servers_description"),notSetLabel:trans("global.any"),items:n?.possibleServers??[],isMulti:!0},a)))}iy.propTypes={style:i().string};var sy=iy,oy=i().shape({zoneId:i().number.isRequired,localizedName:i().string.isRequired,encounterCount:i().number.isRequired,difficultyOptions:i().arrayOf(Uh)});function cy(e){return isNaN(e)?0:e}function uy(e){return/^[0-9]*$/.test(e)}var dy=function(e,t){const[n,a]=(0,r.useState)(e??{min:0,max:0}),l=e=>{a(e),t&&t(e)};return{interval:n,setInterval:a,updateMin:e=>{const t=cy(e.value);uy(t)&&l({...n,minValue:t})},updateMax:e=>{const t=cy(e.value);uy(t)&&l({...n,maxValue:t})},updateMinAndMax:(e,t)=>{uy(e=cy(e))&&uy(t=cy(t))&&l({...n,minValue:e,maxValue:t})},updateExtraValue:(e,t)=>{l({...n,[e]:t})}}};const my=i().shape({summaryUnrestricted:i().string.isRequired,summarySingleValue:i().string.isRequired,summaryInterval:i().string.isRequired}),py=i().shape({noRestrictions:i().string.isRequired,maxValueSet:i().string.isRequired,minValueSet:i().string.isRequired,minMaxValueSet:i().string.isRequired}),gy=i().shape({noRestrictions:i().string.isRequired,maxValueSet:i().string.isRequired,minValueSet:i().string.isRequired,minMaxValueSet:i().string.isRequired}),hy=i().shape({progressFilter:my.isRequired,rankFilter:py.isRequired,scoreFilter:gy.isRequired});var fy=n(57381);function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},by.apply(this,arguments)}const Ey=(0,r.forwardRef)(((e,t)=>{const{value:n,max:a,displayValueMap:l,...i}=e,s=r.useRef(null),o=jn(s);return r.createElement("div",{className:"slider__handle-container",ref:s},o.width>0?r.createElement("div",{className:"slider__tooltip-container",style:{left:n/a*o?.width}},r.createElement("div",{className:"slider__tooltip"},l?.(n)??n)):null,r.createElement(fy.ZP.Handle,by({value:n},i,{dragging:void 0,ref:t})))}));function vy(e){let{min:t,max:n,defaultValue:a,value:l,onChange:i,disabled:s,marks:o,displayValueMap:c}=e;const u=a?.length||l?.length?fy.ZP.Range:fy.ZP;return r.createElement("div",{className:"slider"},r.createElement(u,by({min:t,max:n,defaultValue:a},void 0===l?{}:{value:l},{onChange:i,disabled:s,handle:e=>r.createElement(Ey,by({},e,{key:e.index,displayValueMap:c})),marks:o,allowCross:!1,pushable:!0})))}Ey.propTypes={value:i().number,max:i().number,displayValueMap:i().func},vy.propTypes={min:i().number.isRequired,max:i().number.isRequired,defaultValue:i().oneOfType([i().number,i().arrayOf(i().number)]),value:i().oneOfType([i().number,i().arrayOf(i().number)]),onChange:i().func,disabled:i().bool,marks:i().object,displayValueMap:i().func};var yy=vy;const _y=[0,10,20,50,100,200,300,400,500,600,700,800,1e3,1500,2e3,2500,3e3,4e3,5e3,7500,1e4,15e3,2e4,25e3,0],wy={0:"1",4:"100",8:"500",12:"1000",16:"3000",20:"10000",24:trans("global.any")},ky=_y.length-1;function Ny(e,t){let n=0===e?0:_y.findIndex((t=>t>=e));-1===n&&(n=0);let a=0===t?ky:_y.findIndex((e=>e>=t));return-1===a&&(a=ky),[n,a]}function Ty(e){let{minRank:t,maxRank:n,scopeId:a,scopeOptions:l=[],onChange:i,disabled:s,scopeLabel:o,isBeingEdited:c=!1,filterLabel:u,filterMessages:d}=e;const m=l.find((e=>e.value===a))??l[0],{setInterval:p,updateMinAndMax:g,updateExtraValue:h}=dy({minValue:t,maxValue:n,scope:a},i);return(0,r.useEffect)((()=>{c||p({minValue:t,maxValue:n,scope:a})}),[c,t,n,a,p]),r.createElement(r.Fragment,null,r.createElement("div",{className:"zone-rank-filter__header"},r.createElement("span",{className:"zone-rank-filter__filter-name"},u)),c?r.createElement("div",{className:"zone-rank-filter"},r.createElement("div",{className:"zone-rank-filter__field zone-rank-filter__field--scope"},r.createElement("label",{htmlFor:"scope-input",className:"zone-rank-filter__field-label"},o||trans("recruitment.rank_scope"),":"),r.createElement(ma.ZP,{className:"zone-rank-filter__select-field",name:"scope",inputId:"scope",isMulti:!1,defaultValue:m,options:l,isDisabled:s,onChange:e=>{h("scope",e.value)},menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})),r.createElement("div",{className:"zone-rank-filter__slider"},r.createElement(yy,{min:0,max:ky,defaultValue:Ny(t,n),onChange:e=>g(_y[e[0]],_y[e[1]]),disabled:s,marks:wy,displayValueMap:e=>0===e?"1":e===ky?trans("global.any"):_y[e]}))):r.createElement("div",{className:"zone-rank-filter__summary"},r.createElement(vn,null,(()=>{const e=l.find((e=>e.value===a))?.label;return t||n?!t&&n?`${trans(d.maxValueSet,{maxValue:n,scopeLabel:e})}.`:t&&!n?`${trans(d.minValueSet,{minValue:t,scopeLabel:e})}.`:t&&n?`${trans(d.minMaxValueSet,{minValue:t,maxValue:n,scopeLabel:e})}.`:void 0:`${trans(d.noRestrictions)}.`})())))}Ty.propTypes={minRank:i().oneOfType([i().number,i().oneOf([""])]),maxRank:i().oneOfType([i().number,i().oneOf([""])]),scopeId:i().number,scopeOptions:i().arrayOf(Uh),onChange:i().func,disabled:i().bool,scopeLabel:i().string,isBeingEdited:i().bool,filterLabel:i().string,filterMessages:py.isRequired};var Cy=Ty;function Sy(e){let{minDifficulty:t,minEncounter:n,maxDifficulty:a,maxEncounter:l,sizes:i,difficultyOptions:s=[],sizeOptions:o=[],encounterCount:c,onChange:u,disabled:d,maximumLabel:m,minimumLabel:p,isBeingEdited:g=!1,filterLabel:h,filterMessages:f}=e;const b=(0,r.useMemo)((()=>Array.from(Array((c??0)+1).keys()).map((e=>({value:e,label:`${e}/${c}`})))),[c]),E=(0,r.useCallback)((()=>({minDifficulty:s.find((e=>e.value===t))??s[0],minEncounter:b.find((e=>e.value===n))??b[0],maxDifficulty:s.find((e=>e.value===a))??s[s.length-1],maxEncounter:b.find((e=>e.value===l))??b[b.length-1],sizes:i?i?.map((e=>o.find((t=>e===t.value)))).filter((e=>e)):o})),[t,a,n,l,i,s,b,o]),[v,y]=(0,r.useState)(E()),_=(e,t)=>{const n=t(e);y({...v,minDifficulty:s.find((e=>n.minDifficultyValue===e.value)),maxDifficulty:s.find((e=>n.maxDifficultyValue===e.value)),minEncounter:b.find((e=>n.minEncounterValue===e.value)),maxEncounter:b.find((e=>n.maxEncounterValue===e.value)),sizes:o.filter((e=>n.sizesValue.some((t=>t===e.value))))}),u&&u({minDifficulty:n.minDifficultyValue,minEncounter:n.minEncounterValue,maxDifficulty:n.maxDifficultyValue,maxEncounter:n.maxEncounterValue,sizes:n.sizesValue})},w=e=>{const t=e=e.value,n=Math.max(v.maxDifficulty.value,t);return{minDifficultyValue:t,maxDifficultyValue:n,minEncounterValue:t===n?Math.min(v.minEncounter.value,v.maxEncounter.value):v.minEncounter.value,maxEncounterValue:v.maxEncounter.value,sizesValue:v.sizes.map((e=>e.value))}},k=e=>{const t=e=e.value,n=Math.min(v.minDifficulty.value,t),a=n===t?Math.max(v.minEncounter.value,v.maxEncounter.value):v.maxEncounter.value;return{minDifficultyValue:n,maxDifficultyValue:t,minEncounterValue:v.minEncounter.value,maxEncounterValue:a,sizesValue:v.sizes.map((e=>e.value))}},N=e=>{e=e.value;const t={minDifficultyValue:v.minDifficulty.value,maxDifficultyValue:v.maxDifficulty.value,minEncounterValue:e,maxEncounterValue:v.maxEncounter.value,sizesValue:v.sizes.map((e=>e.value))};return t.minDifficultyValue===t.maxDifficultyValue?{...t,maxEncounterValue:Math.max(t.minEncounterValue,t.maxEncounterValue)}:t},T=e=>{e=e.value;const t={minDifficultyValue:v.minDifficulty.value,maxDifficultyValue:v.maxDifficulty.value,minEncounterValue:v.minEncounter.value,maxEncounterValue:e,sizesValue:v.sizes.map((e=>e.value))};return t.minDifficultyValue===t.maxDifficultyValue?{...t,minEncounterValue:Math.min(t.minEncounterValue,t.maxEncounterValue)}:t},C=e=>{const t=e.map((e=>e.value));return{minDifficultyValue:v.minDifficulty.value,maxDifficultyValue:v.maxDifficulty.value,minEncounterValue:v.minEncounter.value,maxEncounterValue:v.maxEncounter.value,sizesValue:t}};return(0,r.useEffect)((()=>{g||y(E())}),[g,E]),r.createElement(r.Fragment,null,r.createElement("div",{className:"zone-progress-filter__header"},r.createElement("span",{className:"zone-progress-filter__filter-name"},h),g?r.createElement("span",{className:"zone-progress-filter__any-progress-link"},r.createElement(F,{styles:["link"],onClick:()=>{if(!s.length&&!b.length)return;const e={minDifficulty:s[0],minEncounter:b[0],maxDifficulty:s[s.length-1],maxEncounter:b[b.length-1],sizes:o};y(e),u&&u({minDifficulty:e.minDifficulty.value,minEncounter:e.minEncounter.value,maxDifficulty:e.maxDifficulty.value,maxEncounter:e.maxEncounter.value,sizes:o.map((e=>e.value))})}},trans("recruitment.any_progress"))):null),g?r.createElement("div",{className:"zone-progress-filter"},r.createElement("div",{className:"zone-progress-filter__field"},r.createElement("label",{htmlFor:"min-input",className:"zone-progress-filter__field-label"},p||trans("global.minimum"),":"),r.createElement(ma.ZP,{name:"scope",inputId:"scope",isMulti:!1,value:v.minDifficulty,onChange:e=>_(e,w),options:s,isDisabled:d,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}}),r.createElement(ma.ZP,{name:"scope",inputId:"scope",isMulti:!1,value:v.minEncounter,onChange:e=>_(e,N),options:b,isDisabled:d,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})),r.createElement("div",{className:"zone-progress-filter__field"},r.createElement("label",{htmlFor:"max-input",className:"zone-progress-filter__field-label"},m||trans("global.maximum"),":"),r.createElement(ma.ZP,{name:"scope",inputId:"scope",isMulti:!1,value:v.maxDifficulty,onChange:e=>_(e,k),options:s,isDisabled:d,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}}),r.createElement(ma.ZP,{name:"scope",inputId:"scope",isMulti:!1,value:v.maxEncounter,onChange:e=>_(e,T),options:b,isDisabled:d,menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})),o.length>1?r.createElement("div",{className:"zone-progress-filter__field"},r.createElement("label",{htmlFor:"raid-size",className:"zone-progress-filter__field-label"},m||trans("global.size"),":"),r.createElement(ma.ZP,{name:"raid-size",inputId:"raid-size",isMulti:!0,value:v.sizes,onChange:e=>_(e,C),options:o,isDisabled:d,menuPortalTarget:document.body,className:"zone-progress-filter__field--full-width",styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})):null):r.createElement("div",{className:"zone-progress-filter__summary"},r.createElement(vn,null,(()=>{if(n===b[0]?.value&&l===b[b.length-1]?.value&&t===s[0]?.value&&a===s[s.length-1]?.value&&(!i||i.length===o.length))return`${trans(f.summaryUnrestricted)}.`;const e=E(),r=o.length>1&&i.length!==o.length?`, ${trans("recruitment.for_sizes")} ${i.join(", ")}`:"";return`${n===l&&t===a?trans(f.summarySingleValue,{encounterProgress:e.minEncounter.value,difficulty:e.minDifficulty.label,encounterCount:c}):trans(f.summaryInterval,{minEncounter:e.minEncounter.value,maxEncounter:e.maxEncounter.value,minDifficulty:e.minDifficulty.label,maxDifficulty:e.maxDifficulty.label,encounterCount:c})}${r.toLowerCase()}.`})())))}Sy.propTypes={minDifficulty:i().number,minEncounter:i().number,maxDifficulty:i().number,maxEncounter:i().number,sizes:i().arrayOf(i().number),difficultyOptions:i().arrayOf(Uh),sizeOptions:i().arrayOf(Uh),encounterCount:i().number,onChange:i().func,disabled:i().bool,minimumLabel:i().string,maximumLabel:i().string,isBeingEdited:i().bool,filterLabel:i().string,filterMessages:my.isRequired};var Iy=Sy;function xy(e){let{minScore:t,maxScore:n,onChange:a,disabled:l,maximumLabel:i,minimumLabel:s,isBeingEdited:o=!1,filterLabel:c,filterMessages:u}=e;const{setInterval:d,updateMin:m,updateMax:p}=dy({minValue:t,maxValue:n},a);return(0,r.useEffect)((()=>{o||d({minValue:t,maxValue:n})}),[o,t,n,d]),r.createElement(r.Fragment,null,r.createElement("div",{className:"zone-score-filter__header"},r.createElement("span",{className:"zone-score-filter__filter-name"},c)),o?r.createElement("div",{className:"zone-score-filter"},r.createElement("div",{className:"zone-score-filter__field"},r.createElement("label",{htmlFor:"min-input",className:"zone-score-filter__field-label"},s||trans("global.minimum"),":"),r.createElement(ii,{id:"min-input",type:"number",defaultValue:t||"",min:1,onChange:m,disabled:l,className:"zone-score-filter__text-field"})),r.createElement("div",{className:"zone-score-filter__field"},r.createElement("label",{htmlFor:"max-input",className:"zone-score-filter__field-label"},i||trans("global.maximum"),":"),r.createElement(ii,{id:"max-input",type:"number",defaultValue:n||"",min:1,onChange:p,disabled:l,className:"zone-score-filter__text-field"}))):r.createElement("div",{className:"zone-score-filter__summary"},r.createElement(vn,null,(()=>{const e=c.toLowerCase();return t||n?!t&&n?`${trans(u.maxValueSet,{maxValue:n,scoreMetric:e})}.`:t&&!n?`${trans(u.minValueSet,{minValue:t,scoreMetric:e})}.`:t&&n?`${trans(u.minMaxValueSet,{minValue:t,maxValue:n,scoreMetric:e})}.`:void 0:`${trans(u.noRestrictions,{scoreMetric:e})}.`})())))}xy.propTypes={minScore:i().oneOfType([i().number,i().oneOf([""])]),maxScore:i().oneOfType([i().number,i().oneOf([""])]),onChange:i().func,disabled:i().bool,minimumLabel:i().string,maximumLabel:i().string,isBeingEdited:i().bool,filterLabel:i().string,filterMessages:gy.isRequired};var Py=xy;function Ry(e){let{minRank:t,maxRank:n,encounterId:a,encounterLabel:l,onChange:i,filterMessages:s,isBeingEdited:o=!1,disabled:c=!1}=e;const{updateMinAndMax:u}=dy({minValue:t,maxValue:n,encounterId:a},i);return o?r.createElement("div",{className:"zone-speed-clear-rank-filter-slider"},r.createElement("div",{className:"zone-speed-clear-rank-filter-slider__encounter-label"},l),r.createElement(yy,{min:0,max:ky,defaultValue:Ny(t,n),onChange:e=>u(_y[e[0]],_y[e[1]]),disabled:c,marks:wy,displayValueMap:e=>0===e?"1":e===ky?trans("global.any"):_y[e]})):r.createElement("div",{className:"zone-speed-clear-rank-filter-slider zone-speed-clear-rank-filter-slider__summary"},r.createElement(vn,null,t||n?!t&&n?`**${l}**: ${trans(s.maxValueSet,{maxValue:n})}.`:t&&!n?`**${l}**: ${trans(s.minValueSet,{minValue:t})}.`:t&&n?`**${l}**: ${trans(s.minMaxValueSet,{minValue:t,maxValue:n})}.`:void 0:`**${l}**: ${trans(s.noRestrictions)}.`))}Ry.propTypes={minRank:i().number,maxRank:i().number,encounterId:i().number,encounterLabel:i().string,onChange:i().func,filterMessages:py.isRequired,isBeingEdited:i().bool,disabled:i().bool};var Ay=Ry;function Ly(e){let{encounters:t,filterValues:n,scopeId:a,difficulty:l,sizes:i,scopeOptions:s=[],sizeOptions:o=[],difficultyOptions:c=[],onChange:u,disabled:d,isBeingEdited:m=!1,filterLabel:p,filterMessages:g}=e;const h=s.find((e=>e.value===a))??s[0],f=c.find((e=>e.value===l))??c[0];let b=o.filter((e=>i?.some((t=>e.value===t))));b=b.length?b:o;const[E,v]=(0,r.useState)(h.value),[y,_]=(0,r.useState)(f.value),[w,k]=(0,r.useState)(b.map((e=>e.value))),N=e=>{u([...n.filter((t=>t.encounterId!==e.encounterId)).map((e=>({...e,scope:E,difficulty:y,sizes:w}))),{...e,scope:E,difficulty:y,sizes:w}])};return r.createElement(r.Fragment,null,r.createElement("div",{className:"zone-speed-clear-rank-filter__header"},r.createElement("span",{className:"zone-speed-clear-rank-filter__filter-name"},p)),r.createElement("div",{className:"zone-speed-clear-rank-filter "+(m?"zone-speed-clear-rank-filter__grid":"")},m?r.createElement(r.Fragment,null,r.createElement("div",{className:"zone-speed-clear-rank-filter__field zone-speed-clear-rank-filter__field--scope"},r.createElement("label",{htmlFor:"scope-input",className:"zone-speed-clear-rank-filter__field-label"},trans("recruitment.rank_scope"),":"),r.createElement(ma.ZP,{className:"zone-speed-clear-rank-filter__select-field",name:"scope",inputId:"scope",isMulti:!1,defaultValue:h,options:s,isDisabled:d,onChange:e=>{v(e.value),u(n.map((t=>({...t,difficulty:y,sizes:w,scope:e.value}))))},menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})),c.length>1?r.createElement("div",{className:"zone-speed-clear-rank-filter__field zone-speed-clear-rank-filter__field--difficulty"},r.createElement("label",{htmlFor:"difficulty-input",className:"zone-speed-clear-rank-filter__field-label"},trans("global.difficulty"),":"),r.createElement(ma.ZP,{className:"zone-speed-clear-rank-filter__select-field",name:"difficulty",inputId:"difficulty",isMulti:!1,defaultValue:f,options:c,isDisabled:d,onChange:e=>{_(e.value),u(n.map((t=>({...t,scope:E,sizes:w,difficulty:e.value}))))},menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})):null,o.length>1?r.createElement("div",{className:"zone-speed-clear-rank-filter__field zone-speed-clear-rank-filter__field--size"},r.createElement("label",{htmlFor:"size-input",className:"zone-speed-clear-rank-filter__field-label"},trans("global.size"),":"),r.createElement(ma.ZP,{className:"zone-speed-clear-rank-filter__select-field",name:"size",inputId:"size",isMulti:!0,defaultValue:b,options:o,isDisabled:d,onChange:e=>{const t=e.map((e=>e.value));k(t),u(n.map((e=>({...e,scope:E,difficulty:y,sizes:t}))))},menuPortalTarget:document.body,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})):null):r.createElement("div",{className:"zone-speed-clear-rank-filter__scope-summary"},`${trans("recruitment.character_speed_clear_rank_filter_scope_summary",{scopeLabel:h.label})}:`),r.createElement("div",{className:"zone-speed-clear-rank-filter__field zone-speed-clear-rank-filter__field--slider"},t.map((e=>{const t=n.find((t=>t.encounterId===e.encounterId));return t?r.createElement(Ay,{key:e.encounterId,minRank:t.minValue,maxRank:t.maxValue,encounterId:e.encounterId,encounterLabel:e.name,onChange:N,isBeingEdited:m,filterMessages:g,disabled:d}):null})))))}Ly.propTypes={encounters:i().arrayOf(i().shape({encounterId:i().number,name:i().string})),filterValues:i().arrayOf(i().shape({encounterId:i().number,filter:i().number,minValue:i().number,maxValue:i().number})),difficulty:i().number,scopeId:i().number,sizes:i().arrayOf(i().number),scopeOptions:i().arrayOf(Uh),sizeOptions:i().arrayOf(Uh),difficultyOptions:i().arrayOf(Uh),onChange:i().func,disabled:i().bool,isBeingEdited:i().bool,filterLabel:i().string,filterMessages:py.isRequired};var $y=Ly;function Oy(e){let{zones:t,zoneFilters:n,scopeOptions:a=[],disabled:l=!1,value:i,isBeingEdited:s,save:o,setPendingValue:c,pendingValue:u,hasPendingChanges:d,cancelEdit:m,status:p,filterMessages:g}=e;const h=(e,t,n,a)=>{let r=Array.isArray(n)?n:[n];r=r.map((e=>({...e,filter:t})));const l=u.find((t=>t.zoneId===e))??{zoneId:e,rankFilters:[],progressFilters:[],scoreFilters:[],speedClearRankFilters:[]};c([...u.filter((t=>t.zoneId!==e)),{...l,[a]:[...l[a].filter((e=>e.filter!==t)),...r]}])};return r.createElement(r.Fragment,null,r.createElement("div",{className:"character-recruitment-zone-filters"},t?.map((e=>r.createElement("div",{key:e.zoneId,className:"character-recruitment-zone-filters__zone-filter-container"},r.createElement("div",{className:"character-recruitment-zone-filters__zone-name"},e.localizedName),n?.map((t=>r.createElement("div",{key:`${e.zoneId}-${t.value}`},((e,t)=>{switch(t.value){case 1:return((e,t)=>{const n=i?.find((t=>t.zoneId===e.zoneId))?.progressFilters?.find((e=>e.filter===t.value))??{minDifficulty:e.difficulties[0]?.value,maxDifficulty:e.difficulties[e.difficulties.length-1]?.value,minEncounter:0,maxEncounter:e.encounterCount,sizes:e.sizes.map((e=>e.value))};return r.createElement(Iy,{minDifficulty:n?.minDifficulty,minEncounter:n?.minEncounter,maxDifficulty:n?.maxDifficulty,maxEncounter:n?.maxEncounter,sizes:n?.sizes,encounterCount:e.encounterCount,difficultyOptions:e.difficulties,sizeOptions:e.sizes,onChange:n=>((e,t,n)=>{h(e,t,n,"progressFilters")})(e.zoneId,t.value,n),disabled:p.isLoading,isBeingEdited:s,filterLabel:t.label,filterMessages:g.progressFilter})})(e,t);case 3:case 2:return((e,t)=>{const n=i?.find((t=>t.zoneId===e.zoneId))?.rankFilters?.find((e=>e.filter===t.value))??{minValue:0,maxValue:0,scope:a[0]?.value};return r.createElement(Cy,{minRank:n.minValue,maxRank:n.maxValue,scopeId:n.scope,scopeOptions:a,onChange:n=>((e,t,n)=>{h(e,t,n,"rankFilters")})(e.zoneId,t.value,n),disabled:p.isLoading,isBeingEdited:s,filterLabel:t.label,filterMessages:g.rankFilter})})(e,t);case 5:return((e,t)=>{const n=i?.find((t=>t.zoneId===e.zoneId))?.scoreFilters?.find((e=>e.filter===t.value))??{minValue:0,maxValue:0};return r.createElement(Py,{minScore:n.minValue,maxScore:n.maxValue,onChange:n=>((e,t,n)=>{h(e,t,n,"scoreFilters")})(e.zoneId,t.value,n),disabled:p.isLoading,isBeingEdited:s,filterLabel:t.label,filterMessages:g.scoreFilter})})(e,t);case 4:return((e,t)=>{const n=e.completeRaid[0]?.raidId;if(!n)return null;const l=e.completeRaid.map((r=>u?.find((e=>e.zoneId===n))?.speedClearRankFilters?.find((e=>e.filter===t.value&&e.encounterId===r.encounterId))??{minValue:0,maxValue:0,scope:a[0]?.value,difficulty:e.difficulties[0]?.value,sizes:e.sizes.map((e=>e.value)),encounterId:r.encounterId})).sort(((e,t)=>e.encounterId-t.encounterId));return r.createElement($y,{encounters:e.completeRaid,filterValues:l,scopeId:l[0].scope,difficulty:l[0].difficulty,sizes:l[0].sizes,scopeOptions:a,difficultyOptions:e.difficulties,sizeOptions:e.sizes,onChange:e=>((e,t,n)=>{h(e,t,n,"speedClearRankFilters")})(n,t.value,e),disabled:p.isLoading,isBeingEdited:s,filterLabel:t.label,filterMessages:g.speedClearRankFilter})})(e,t);default:return null}})(e,t)))))))),s&&!l?r.createElement("div",{className:"character-recruitment-zone-filters__buttons-container"},r.createElement(ti,{save:o,cancel:m,status:p,hasPendingChanges:d})):null)}Oy.propTypes={zones:i().arrayOf(oy).isRequired,zoneFilters:i().arrayOf(Uh).isRequired,scopeOptions:i().arrayOf(Uh),disabled:i().bool,value:i().array.isRequired,isBeingEdited:i().bool,save:i().func.isRequired,setPendingValue:i().func.isRequired,pendingValue:i().array.isRequired,hasPendingChanges:i().bool,cancelEdit:i().func.isRequired,status:Lt.isRequired,filterMessages:hy.isRequired};var zy=Oy;const Fy={progressFilter:{summaryUnrestricted:"recruitment.character_zone_progress_filter_summary_unrestricted",summarySingleValue:"recruitment.character_zone_progress_filter_summary_single_value",summaryInterval:"recruitment.character_zone_progress_filter_summary"},rankFilter:{noRestrictions:"recruitment.character_no_rank_filter_restrictions",maxValueSet:"recruitment.character_rank_filter_max_value_set",minValueSet:"recruitment.character_rank_filter_min_value_set",minMaxValueSet:"recruitment.character_rank_filter_min_max_values_set"},scoreFilter:{noRestrictions:"recruitment.character_no_score_filter_restrictions",maxValueSet:"recruitment.character_score_filter_max_value_set",minValueSet:"recruitment.character_score_filter_min_value_set",minMaxValueSet:"recruitment.character_score_filter_min_max_values_set"},speedClearRankFilter:{noRestrictions:"recruitment.character_no_rank_filter_restrictions",maxValueSet:"recruitment.character_speed_clear_rank_filter_max_value_set",minValueSet:"recruitment.character_speed_clear_rank_filter_min_value_set",minMaxValueSet:"recruitment.character_speed_clear_rank_filter_min_max_values_set"}},My={progressFilter:{summaryUnrestricted:"recruitment.guild_zone_progress_filter_summary_unrestricted",summarySingleValue:"recruitment.guild_zone_progress_filter_summary_single_value",summaryInterval:"recruitment.guild_zone_progress_filter_summary"},rankFilter:{noRestrictions:"recruitment.guild_no_rank_filter_restrictions",maxValueSet:"recruitment.guild_rank_filter_max_value_set",minValueSet:"recruitment.guild_rank_filter_min_value_set",minMaxValueSet:"recruitment.guild_rank_filter_min_max_values_set"},scoreFilter:{noRestrictions:"recruitment.guild_no_score_filter_restrictions",maxValueSet:"recruitment.guild_score_filter_max_value_set",minValueSet:"recruitment.guild_score_filter_min_value_set",minMaxValueSet:"recruitment.guild_score_filter_min_max_values_set"}};function Dy(e){let{zones:t,zoneFilters:n,scopeOptions:a=[],disabled:l=!1,style:i}=e;const{tileActions:s,value:o,isBeingEdited:c,save:u,setPendingValue:d,pendingValue:m,hasPendingChanges:p,cancelEdit:g,status:h}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({zoneFilterValues:t})}),[a]);const l=(0,r.useCallback)((()=>n?.zoneFilterValues??[]),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentZoneFilters/${t.id}`,(e=>({zoneFilterValues:e}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("global.zones"),actions:s,style:i},r.createElement(zy,{zones:t,zoneFilters:n,value:o,isBeingEdited:c,setPendingValue:d,pendingValue:m,hasPendingChanges:p,save:u,cancelEdit:g,status:h,scopeOptions:a,disabled:l,filterMessages:Fy}))}Dy.propTypes={zones:i().arrayOf(oy).isRequired,zoneFilters:i().arrayOf(Uh).isRequired,scopeOptions:i().arrayOf(Uh),disabled:i().bool,style:i().string};var Uy=Dy;function By(e,t){return t?.possibleServers?.filter((t=>{let{subregion:n}=t;return void 0!==n&&e?.includes(n)})).map((e=>{let{value:t}=e;return t}))??[]}var Vy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv()??{},l=(0,r.useMemo)((()=>Array.from(n?.serverIds?.reduce(((e,t)=>{const a=n.possibleServers?.find((e=>{let{value:n}=e;return n===t}))?.subregion;return a?e.add(a):e}),new Set)??[])),[n]);e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a?.({serverIds:By(t,n)})}),[n,a]);const i=ql().from(Lv(l,e)).withHttpSave(`/character/recruitmentServers/${t.id}`,(e=>({serverIds:By(e,n)}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l)}),[s,l]),i};function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qy.apply(this,arguments)}function jy(e){let{style:t}=e;const{character:n}=hm(),a=Vy(),{characterRecruitmentSettings:l}=zv()??{},{tileActions:i}=a,s=(0,r.useMemo)((()=>function(e,t){const n=e?.region.id,a=t.possibleServers?.find((t=>t.value===e?.server.id))?.subregion,r=e=>e.region===n?-1:e.region??0,l=e=>e.value===a?-1:e.value;return t.possibleSubregions?.slice().sort(((e,t)=>r(e)===r(t)?l(e)-l(t):r(e)-r(t))).map((e=>{let{label:n,region:r,value:l}=e;return{label:`${n} (${t.possibleRegions?.find((e=>{let{value:t}=e;return t===r}))?.label})${l===a?` - ${trans("recruitment.current_data_center")}`:""}`,value:l}}))??[]}(n,l??{})),[n,l]);return r.createElement(In,{title:l?.subregionLabels?.singular,actions:i,style:t},r.createElement(Wh,qy({label:l?.subregionLabels?.editingDescription,notSetLabel:trans("global.any"),isMulti:!0,items:s},a)))}function Hy(e){let{factions:t,activities:n,languages:a,zoneFilters:l,zoneFilterScopes:i}=e;const{characterRecruitmentSettings:s,characterRecruitmentSettingsStatus:o}=zv()??{};return s?r.createElement("div",{className:"character-recruitment-criteria-tile"},r.createElement(In,{title:"2. "+trans("recruitment.set_your_criteria"),subtitle:trans("recruitment.set_your_criteria_subtitle")},o?.isLoading&&r.createElement(kt,null),o?.isSuccess&&r.createElement(Pn,null,(t?.length>0||(s?.possibleServers?.length??0)>0)&&r.createElement("div",{className:"character-recruitment-criteria-tile__factions-and-servers"},t?.length>0&&r.createElement(ry,{factions:t,style:"sub-tile"}),s?.possibleServers?.length&&(s?.transferUsesSubregion?r.createElement(jy,{style:"sub-tile"}):r.createElement(sy,{style:"sub-tile"}))),r.createElement("div",{className:"character-recruitment-criteria-tile__activities-and-language"},r.createElement(Xv,{activities:n,style:"sub-tile"}),r.createElement(ty,{languages:a,style:"sub-tile"})),l?.length>0?r.createElement("div",{className:"character-recruitment-criteria-tile__zone-filters"},r.createElement(Uy,{zoneFilters:l,zones:s?.possibleZones??[],scopeOptions:i,style:"sub-tile"})):null))):null}var Gy=n(11358),Wy=n.n(Gy);function Ky(e){const[t,n]=(0,r.useState)(e.initialPage??0),a={marginPagesDisplayed:1,previousLabel:r.createElement(F,{onClick:()=>{},tabIndex:-1},trans("global.previous")),previousAriaLabel:trans("global.previous"),nextLabel:r.createElement(F,{onClick:()=>{},tabIndex:-1},trans("global.next")),nextAriaLabel:trans("global.next"),breakClassName:"paginate__break",breakLinkClassName:"paginate__break-link",containerClassName:"paginate__container",pageClassName:"paginate__page",pageLinkClassName:"paginate__page-link "+(e.disabled?"paginate__page-link--disabled":""),activeClassName:"paginate__active",activeLinkClassName:"paginate__active-link",previousClassName:"paginate__previous "+(e.disabled?"paginate__disabled":""),nextClassName:"paginate__next "+(e.disabled?"paginate__disabled":""),previousLinkClassName:"paginate__previous-link",nextLinkClassName:"paginate__next-link",disabledClassName:"paginate__disabled",...e,onPageChange:t=>{n(t.selected),e.onPageChange?.(t)}};return r.createElement("div",{className:"paginate"},e.disabled&&r.createElement("div",{className:"paginate__disabled-overlay"}),r.createElement(Wy(),a),r.createElement(vn,{className:"paginate__total-pages"},trans("global.x_of_y_pages",{x:t+1,y:e.pageCount})))}Ky.propTypes={initialPage:i().number,pageCount:i().number.isRequired,pageRangeDisplayed:i().number,marginPagesDisplayed:i().number,breakLabel:i().node,disableInitialCallback:i().bool,pageLabelBuilder:i().func,eventListener:i().string,onPageChange:i().func,onPageActive:i().func,disabled:i().bool};var Zy=Ky;function Yy(e){let{validationResults:t}=e;return r.createElement("div",{className:"recruitment-settings-validator"},t.map(((e,t)=>r.createElement(r.Fragment,{key:t},r.createElement("div",{className:"recruitment-settings-validator__icon recruitment-settings-validator__icon--"+(e.isValid?"valid":"invalid")},r.createElement("span",{className:"zmdi zmdi-"+(e.isValid?"check":"close")})),r.createElement("div",{className:"recruitment-settings-validator__message"},e.message)))))}Yy.propTypes={validationResults:i().arrayOf(i().exact({isValid:i().bool,message:i().string}))};var Jy=Yy;function Xy(e){let{onValidityChange:t=(()=>{})}=e;const n=Y(),{characterRecruitmentSettings:a}=zv(),l=function(e,t){if(!t)return[];const n=[];return t.contactInformation?.text?.length>0?n.push({isValid:!0,message:transForGame("recruitment.contact_information_is_set",e.lowercaseName)}):n.push({isValid:!1,message:transForGame("recruitment.contact_information_must_be_set",e.lowercaseName)}),t.specIds?.length>0?n.push({isValid:!0,message:transForGame("recruitment.spec_is_set",e.lowercaseName)}):n.push({isValid:!1,message:transForGame("recruitment.spec_must_be_set",e.lowercaseName)}),t.languageCodes?.length>0?n.push({isValid:!0,message:trans("recruitment.language_is_set")}):n.push({isValid:!1,message:trans("recruitment.language_must_be_set")}),t.schedule?.timeRanges?.length>0?n.push({isValid:!0,message:trans("schedule.availability_is_set")}):n.push({isValid:!1,message:trans("schedule.availability_must_be_set")}),n}(n,a);return(0,r.useEffect)((()=>{t(l.every((e=>e.isValid)))})),r.createElement(Jy,{validationResults:l})}Xy.propTypes={onValidityChange:i().func};var Qy=Xy;function e_(){return e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},e_.apply(this,arguments)}var t_=function(){const{characterRecruitmentSettings:e,characterRecruitmentSettingsStatus:t}=zv(),{character:n}=hm(),[{data:a,status:l},i,s]=$t();(0,r.useEffect)((()=>{s(),p([])}),[e,n,s]);const[o,c]=(0,r.useState)(0),[u,d]=(0,r.useState)(),[m,p]=(0,r.useState)([]),g=(0,r.useRef)(!0);(0,r.useEffect)((()=>{l.isSuccess&&(p(a.results),d(Math.ceil(a.count/10)))}),[a,o,l]),(0,r.useLayoutEffect)((()=>{m.length&&g.current?g.current=!1:h.current?.scrollIntoView({behavior:"smooth",block:"center"})}),[m]);const h=(0,r.useRef)(),f=e=>{c(e.selected),i({url:`/recruitment/guilds-for-character/${n.id}`,body:{page:e.selected+1}})},[b,E]=(0,r.useState)();if(!e)return null;const v=a&&`\n> ${1===a.length?trans("recruitment.found_1_guild_that_matches"):trans("recruitment.found_x_guilds_that_match",{x:a.count})} ${trans("recruitment.every_result_shown_matches_filters")}\n`;return r.createElement("div",{className:"character-recruitment-search-results-tile"},r.createElement(In,{title:"4. "+trans("recruitment.find_your_new_guild"),subtitle:trans("recruitment.find_your_new_guild_subtitle")},t.isLoading&&r.createElement(kt,null),t.isSuccess&&r.createElement(Pn,null,!m.length&&!l.isSuccess&&r.createElement(r.Fragment,null,r.createElement(vn,null,trans("recruitment.set_basic_criteria")),r.createElement(Qy,{onValidityChange:E}),r.createElement("div",{className:"character-recruitment-search-results-tile__search-button"},r.createElement(F,{onClick:()=>f({selected:0}),disabled:l.isLoading||!b},l.isLoading?trans("global.searching")+"...":trans("global.search")))),l.isError&&r.createElement(se,null,l.errorMessage),a&&r.createElement(r.Fragment,null,r.createElement(vn,null,v),u>1&&r.createElement(Mn,null,r.createElement(Zy,{pageCount:u,forcePage:o,onPageChange:f,disabled:l.isLoading})),r.createElement("div",{className:"character-recruitment-search-results-tile__results"},l.isLoading&&r.createElement("div",{className:"character-recruitment-search-results-tile__results-loading-indicator"}),m.map(((e,t)=>r.createElement(Aa,e_({key:e.id,ref:0===t?h:void 0},e))))),u>1&&r.createElement(Mn,null,r.createElement(Zy,{pageCount:u,forcePage:o,onPageChange:f}))))))};function n_(e){let{style:t}=e;const{character:n}=hm(),{value:a,isBeingEdited:l,setPendingValue:i,beginEdit:s,cancelEdit:o,tileActions:c,save:u,status:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({schedule:t})}),[a]);const l=(0,r.useCallback)((()=>n?.schedule??{timeZoneName:sa()?.name,timeRanges:[]}),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentSchedule/${t.id}`,(e=>({schedule:e}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("schedule.availability"),actions:c,style:t,required:!a.timeRanges.length},l?r.createElement(Jh,{schedule:a,setPendingValue:i,cancelEdit:o,save:u,status:d}):a?.timeRanges?.length?r.createElement(_a,{schedule:a,label:trans("schedule.character_schedule",{characterName:n.name})}):r.createElement(Pn,null,r.createElement(vn,{styles:["inline"]},trans("schedule.no_character_schedule",{schedulePreferences:trans("schedule.schedule_preferences")})),r.createElement(F,{onClick:s,styles:["link"]},trans("schedule.set_availability"))))}n_.propTypes={style:i().string};var a_=n_,r_=i().shape({minimumNumberOfTimeRanges:i().number,maximumNumberOfTimeRanges:i().number,maximumTimeRangeDuration:i().number,minimumTotalDuration:i().number,maximumTotalDuration:i().number});function l_(e){let{value:t,isBeingEdited:n,setPendingValue:a,hasPendingChanges:l,save:i,beginEdit:s,cancelEdit:o,status:c}=e;const{character:u}=hm(),d=t?.minimumNumberOfTimeRanges||t?.maximumNumberOfTimeRanges||t?.maximumTimeRangeDuration||t?.minimumTotalDuration||t?.maximumTotalDuration,m=(0,r.useCallback)((e=>{a((t=>({...t,minimumNumberOfTimeRanges:e.value||void 0})))}),[a]),p=(0,r.useCallback)((e=>{a((t=>({...t,maximumNumberOfTimeRanges:e.value||void 0})))}),[a]),g=(0,r.useCallback)((e=>{a((t=>({...t,maximumTimeRangeDuration:e.totalMinutes||void 0})))}),[a]),h=(0,r.useCallback)((e=>{a((t=>({...t,minimumTotalDuration:e.totalMinutes||void 0})))}),[a]),f=(0,r.useCallback)((e=>{a((t=>({...t,maximumTotalDuration:e.totalMinutes||void 0})))}),[a]);return r.createElement("div",{className:"editable-schedule-preferences"},n?r.createElement(Pn,null,r.createElement(vn,null,"> "+trans("schedule.preferences_can_be_blank")),r.createElement("div",null,r.createElement(pE,{label:r.createElement("label",{htmlFor:"minimum-number-of-time-ranges"},trans("schedule.minimum_time_ranges_per_week"),":"),control:r.createElement(ii,{type:"number",id:"minimum-number-of-time-ranges",defaultValue:t?.minimumNumberOfTimeRanges||void 0,min:1,max:7,disabled:c.isLoading,onChange:m})}),r.createElement(pE,{label:r.createElement("label",{htmlFor:"maximum-number-of-time-ranges"},trans("schedule.maximum_time_ranges_per_week"),":"),control:r.createElement(ii,{type:"number",id:"maximum-number-of-time-ranges",defaultValue:t?.maximumNumberOfTimeRanges||void 0,min:1,max:7,disabled:c.isLoading,onChange:p})}),r.createElement(pE,{label:r.createElement(r.Fragment,null,trans("schedule.maximum_time_range_duration"),":"),control:r.createElement(Dh,{id:"maximum-time-range-duration",value:t?.maximumTimeRangeDuration||void 0,disabled:c.isLoading,onChange:g})}),r.createElement(pE,{label:r.createElement(r.Fragment,null,trans("schedule.minimum_total_duration"),":"),control:r.createElement(Dh,{id:"minimum-total-duration",value:t?.minimumTotalDuration||void 0,disabled:c.isLoading,onChange:h})}),r.createElement(pE,{label:r.createElement(r.Fragment,null,trans("schedule.maximum_total_duration"),":"),control:r.createElement(Dh,{id:"maximum-total-duration",value:t?.maximumTotalDuration||void 0,disabled:c.isLoading,onChange:f})})),r.createElement(ti,{save:i,cancel:o,hasPendingChanges:l,status:c})):d?r.createElement("div",{className:"editable-schedule-preferences__display-values"},r.createElement("div",null,trans("schedule.minimum_time_ranges_per_week"),":"),r.createElement("div",{className:"editable-schedule-preferences__display-value"},t.minimumNumberOfTimeRanges||trans("global.not_set")),r.createElement("div",null,trans("schedule.maximum_time_ranges_per_week"),":"),r.createElement("div",{className:"editable-schedule-preferences__display-value"},t.maximumNumberOfTimeRanges||trans("global.not_set")),r.createElement("div",null,trans("schedule.maximum_time_range_duration"),":"),r.createElement("div",{className:"editable-schedule-preferences__display-value"},t.maximumTimeRangeDuration?Yn(t.maximumTimeRangeDuration):trans("global.not_set")),r.createElement("div",null,trans("schedule.minimum_total_duration"),":"),r.createElement("div",{className:"editable-schedule-preferences__display-value"},t.minimumTotalDuration?Yn(t.minimumTotalDuration):trans("global.not_set")),r.createElement("div",null,trans("schedule.maximum_total_duration"),":"),r.createElement("div",{className:"editable-schedule-preferences__display-value"},t.maximumTotalDuration?Yn(t.maximumTotalDuration):trans("global.not_set"))):r.createElement(Pn,null,r.createElement(vn,null,trans("schedule.no_schedule_preferences",{characterName:u.name})),r.createElement(F,{onClick:s,styles:["link"]},trans("schedule.edit_schedule_preferences_if_not_right"))))}l_.propTypes={value:r_,isBeingEdited:i().bool.isRequired,pendingValue:r_,setPendingValue:i().func.isRequired,hasPendingChanges:i().bool.isRequired,save:i().func.isRequired,beginEdit:i().func.isRequired,cancelEdit:i().func.isRequired,status:Lt};var i_=l_;function s_(e){let{style:t}=e;const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{character:t}=hm(),{characterRecruitmentSettings:n,mergeCharacterRecruitmentSettings:a}=zv();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a({schedulePreferences:t})}),[a]);const l=(0,r.useCallback)((()=>n?.schedulePreferences),[n]),i=ql().from(Lv(l(),e)).withHttpSave(`/character/recruitmentSchedulePreferences/${t.id}`,(e=>e)).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("schedule.schedule_preferences"),actions:n.tileActions,style:t},r.createElement(i_,n))}s_.propTypes={style:i().string};var o_=s_,c_=function(){const{characterRecruitmentSettings:e,characterRecruitmentSettingsStatus:t}=zv();return e?r.createElement("div",{className:"character-recruitment-availability-and-preferences-tile"},r.createElement(In,{title:"3. "+trans("recruitment.set_your_availability"),subtitle:trans("recruitment.set_your_availability_subtitle")},t.isLoading&&r.createElement(kt,null),t.isSuccess&&r.createElement(Pn,null,r.createElement(o_,{style:"sub-tile"}),r.createElement(a_,{style:"sub-tile"})))):null};function u_(){return u_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u_.apply(this,arguments)}function d_(e){let{anyClip:t,titleImageUrl:n,titleImagePosition:a,factions:l,activities:i,languages:s,recruitmentVisibilities:o,zoneFilters:c,zoneFilterScopes:u,backgroundImageUrl:d}=e;const m=Y();Tv(d);const p=`\n[${trans("recruitment.tell_me_more_about_how_to_find_a_guild")}](${m.articlesBaseUrl}/help/recruitment-help-player-looking-for-guild)\n\n\n[<Icon type="long-arrow-left" /> ${trans("recruitment.recruitment")}](/recruitment)\n`;return r.createElement(wm,null,r.createElement(Ov,null,r.createElement(Mi,{width:"narrow"},r.createElement(Nv,{title:trans("recruitment.lets_find_the_perfect_guild"),imageUrl:n,imagePosition:a?{...a,top:a.top+45}:void 0,imageAlt:"NPC",removeBottomMargin:!0}),r.createElement(Pn,null,r.createElement(vn,{enhanced:!0},p),r.createElement(Zv,{anyClip:t,recruitmentVisibilities:o}),r.createElement(Hy,{factions:l,activities:i,languages:s,zoneFilters:c,zoneFilterScopes:u}),r.createElement(c_,null),r.createElement(t_,null)))),t&&r.createElement(tp,u_({},t,{fixed:!0})))}function m_(e){let{title:t,backgroundImageUrl:n,isSlim:a=!1}=e;return r.createElement("div",{className:"article-title "+(a?"article-title--slim":"")},r.createElement("div",{className:"article-title__image-container"},r.createElement("img",{className:"article-title__image",src:n,alt:"Decorative background for title"})),r.createElement("div",{className:"article-title__fade "+(a?"article-title__fade--slim":"")}),t&&r.createElement("h1",{className:"article-title__text"},t))}d_.propTypes={anyClip:i().object,titleImageUrl:i().string,titleImagePosition:yv,factions:i().arrayOf(Uh).isRequired,activities:i().arrayOf(Uh).isRequired,languages:i().arrayOf(Uh).isRequired,recruitmentVisibilities:i().arrayOf(Uh).isRequired,zoneFilters:i().arrayOf(Uh).isRequired,zoneFilterScopes:i().arrayOf(Uh).isRequired,backgroundImageUrl:i().string},sm(".player-looking-for-guilds-page-container",d_),m_.propTypes={title:i().string,backgroundImageUrl:i().string.isRequired,isSlim:i().bool};var p_=m_;function g_(){return g_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g_.apply(this,arguments)}function h_(e){const t=Y();return e.href.startsWith("/")?r.createElement("a",g_({},e,{href:t.articlesBaseUrl+e.href})):e.href.startsWith("../")?r.createElement("a",g_({},e,{href:e.href.substring(2)})):r.createElement("a",g_({},e,{target:"_blank",rel:"noopener noreferrer"}))}function f_(e){let{articleTitleBackgroundImageUrl:t}=e;const n=Y(),[a,l]=(0,r.useState)(u.get("articlePreviewPageTitle")??""),[i,s]=(0,r.useState)(u.get("articlePreviewPageBody")??"");(0,r.useEffect)((()=>{u.set("articlePreviewPageTitle",a),u.set("articlePreviewPageBody",i)}),[a,i]);const[o,c]=(0,r.useState)(!0),[d,m]=(0,r.useState)(!0),[p,g]=(0,r.useState)(2);return(0,r.useEffect)((()=>{let e=0;o&&e++,d&&e++,g(e)}),[o,d]),r.createElement(wm,null,r.createElement("div",{className:"article-preview-page"},r.createElement(Mi,null,r.createElement(Pn,null,r.createElement(In,null,r.createElement(Pn,null,r.createElement(vn,null,trans("cms.article_preview_page_explanation",{enhancedMarkdownArticleUrl:n.articlesBaseUrl+"/help/enhanced-markdown"})),r.createElement(U,{style:{alignItems:"center"}},r.createElement(vn,null,trans("cms.choose_view_option")+":"),r.createElement(F,{onClick:()=>{c(!0),m(!0)},disabled:o&&d},trans("cms.side_by_side")),r.createElement(F,{onClick:()=>{c(!0),m(!1)},disabled:o&&!d},trans("cms.editor_only")),r.createElement(F,{onClick:()=>{c(!1),m(!0)},disabled:!o&&d},trans("cms.preview_only"))))),r.createElement("div",{className:"article-preview-page__editor-and-preview",style:{gridTemplateColumns:2===p?"1fr 1fr":"1fr"}},o&&r.createElement(Pn,{className:"article-preview-page__editor"},r.createElement(ii,{defaultValue:a,onChange:e=>l(e.value)}),r.createElement(Ic,{defaultValue:i,onChange:e=>s(e.target.value),fullHeight:!0,resizeable:!1})),d&&r.createElement("div",{className:"article-preview-page__preview"},r.createElement(Pn,null,r.createElement(p_,{title:xi(a,n),backgroundImageUrl:t}),r.createElement("section",null,r.createElement("div",null,r.createElement(In,{style:"flat"},r.createElement(Be,{value:{lazyLoad:!1}},r.createElement(hn,{markdown:i,overrides:{a:{component:h_},Ability:e=>{let{id:t,type:n}=e;return r.createElement(qt,{id:t,icon:"inv_misc_questionmark.jpg",type:n},t)}}}))))))))))))}function b_(e){let{displayLabel:t="",editingLabel:n,disabled:a=!1,onlyShowGuildsUserIsAnOfficerIn:l=!1}=e;const{user:i}=Dl(),{guild:s,setGuild:o}=ym(),[c,u]=(0,r.useState)(!1);if(l&&!Vi(i))return r.createElement("div",{className:"guild-selector"},r.createElement(vn,null,trans("guilds.no_officer_user_guilds")));n??=trans("guilds.select_guild_to_use");const d=i.guilds.filter((e=>!l||e.isOfficer)).map((e=>({value:e.id,label:`${e.name} (${e.server.name} - ${e.region.shortName})`}))),m=d.find((e=>e.value===s?.id))??d[0];return r.createElement("div",{className:"guild-selector"},c&&!a?r.createElement(r.Fragment,null,r.createElement("label",{htmlFor:"guild",className:"guild-selector__label"},n,":"),r.createElement("div",{className:"guild-selector__select"},r.createElement(ma.ZP,{name:"guild",defaultValue:m,onChange:e=>{const t=i.guilds.find((t=>t.id===e.value));o(t)},options:d,menuPortalTarget:document.body,isDisabled:a,styles:{menuPortal:e=>({...e,zIndex:9999,color:"black"})}})),r.createElement(F,{onClick:()=>u(!1)},trans("global.done"))):r.createElement(r.Fragment,null,r.createElement("span",null,t," ",d.length>1&&r.createElement(F,{disabled:a,onClick:()=>{i.guilds.length&&!s&&o(i.guilds[0]),u(!0)},styles:["link"]},s?trans("guilds.change_guild"):trans("guilds.set_a_guild"),"."))))}h_.propTypes={href:i().string.isRequired},f_.propTypes={articleTitleBackgroundImageUrl:i().string.isRequired},sm(".article-preview-page-container",f_),b_.propTypes={displayLabel:i().string,editingLabel:i().string,disabled:i().bool,onlyShowGuildsUserIsAnOfficerIn:i().bool};var E_=b_,v_=function(){const{user:e}=Dl();return r.createElement("div",{className:"joined-guilds"},!e&&r.createElement(vn,{openLinksExternally:!1},`\n${trans("accounts.you_are_not_logged_in")}\n\n[${trans("accounts.log_in_to_see_joined_guilds")}](/login).\n          `),e&&0===e.guilds.length&&r.createElement(vn,{openLinksExternally:!1},`\n${trans("accounts.you_have_not_joined_any_guilds")}.\n\n${trans("accounts.ask_your_guild_to_let_you_join")}.\n              `),e&&e.guilds.length>0&&r.createElement(vn,{openLinksExternally:!1},`\n${trans("accounts.you_have_joined_x_guilds",{x:e.guilds.length})}:\n\n${e.guilds.map((e=>`* [${e.name}](/guild/id/${e.id}) (${e.server.name} - ${e.region.shortName}): *${AE[e.rank]}*`)).join("\n")}\n    \n${trans("accounts.ask_other_guilds_to_let_you_join")}.\n              `))},y_=function(){const{user:e}=Dl(),{guild:t}=ym(),{guildRecruitmentSettings:n,guildRecruitmentSettingsStatus:a}=gh();return r.createElement("div",{className:"guild-recruitment-profile-tile"},r.createElement(In,{title:"1. "+trans("recruitment.update_your_profile"),subtitle:trans("recruitment.update_your_guild_profile_subtitle")},e?.guilds?.length>0?r.createElement(r.Fragment,null,r.createElement(E_,{displayLabel:t?trans("recruitment.guild_is_looking_for_players",{guildName:`${t.name} (${t.server.name} - ${t.region.shortName})`}):trans("guilds.no_guild_selected")}),r.createElement(r.Fragment,null,a.isLoading&&r.createElement(kt,null),a.isSuccess&&n&&r.createElement(Pn,null,!Bi(e,t?.id)&&r.createElement(vn,null,"> "+trans("recruitment.only_officers_can_edit_recruitment_information")),r.createElement(bh,{style:"sub-tile"}),r.createElement(Af,{style:"sub-tile",defaultMessageWhenEmpty:trans("recruitment.how_should_players_get_in_touch_with_you")})),a.isError&&r.createElement(se,null,a.errorMessage))):r.createElement(v_,null)))};function __(e){let{zones:t,zoneFilters:n,scopeOptions:a=[],disabled:l=!1,style:i}=e;const{tileActions:s,value:o,isBeingEdited:c,save:u,setPendingValue:d,pendingValue:m,hasPendingChanges:p,cancelEdit:g,status:h}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Zl();const{guildRecruitmentSettings:n,mergeGuildRecruitmentSettings:a}=gh();e.onHttpSuccess=(0,r.useCallback)(((e,t)=>{a?.({zoneFilterValues:t})}),[a]);const l=(0,r.useCallback)((()=>n?.zoneFilterValues??[]),[n]),i=ql().from(hh(l(),e)).withHttpSave(`/guild/recruitmentZoneFilters/${t}`,(e=>({zoneFilterValues:e}))).build(),s=i.setValue;return(0,r.useEffect)((()=>{s(l())}),[l,s]),i}();return r.createElement(In,{title:trans("global.zones"),actions:s,style:i},r.createElement(zy,{zones:t,zoneFilters:n,value:o,isBeingEdited:c,setPendingValue:d,pendingValue:m,hasPendingChanges:p,save:u,cancelEdit:g,status:h,scopeOptions:a,disabled:l,filterMessages:My}))}__.propTypes={zones:i().arrayOf(oy).isRequired,zoneFilters:i().arrayOf(Uh).isRequired,scopeOptions:i().arrayOf(Uh),disabled:i().bool,style:i().string};var w_=__;const k_=e=>`\`${e}\``;var N_=function(e){let{webhook:t,style:n}=e;const{value:a,pendingValue:l,isBeingEdited:i,setPendingValue:s,hasPendingChanges:o,tileActions:c=[],cancelEdit:u,save:d,status:m}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Zl(),{guildRecruitmentSettings:a,mergeGuildRecruitmentSettings:l}=gh();t.onHttpSuccess=(0,r.useCallback)(((e,t)=>{l?.({webhook:t})}),[l]);const i=(0,r.useCallback)((()=>a?.webhook??(e.url?e:{})),[a,e]),s=ql().from(hh(i(),t)).withHttpSave(`/guild/recruitmentWebhook/${n}`,(e=>e)).build(),o=s.setValue;return(0,r.useEffect)((()=>{o(i())}),[i,o]),s}(t);return r.createElement(In,{title:trans("guilds.discord_webhook_title"),style:n,actions:c},r.createElement(Pn,null,r.createElement(vn,null,trans("recruitment.set_a_webhook_to_watch_players")),r.createElement(Rf,{value:a?.url,pendingValue:l?.url,isBeingEdited:i,setPendingValue:e=>s({...l,url:e}),hasPendingChanges:o,cancelEdit:u,save:d,status:m,maxLength:200,defaultContent:r.createElement(Pn,{position:"left",gap:"smaller"},r.createElement(vn,null,trans("recruitment.no_webhook_set"))),displayValueAsMarkdown:!0,transformValueForDisplay:k_})))};function T_(){return T_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},T_.apply(this,arguments)}function C_(e){let{activities:t,languages:n,specsAndPriorities:a,zoneFilters:l,zoneFilterScopes:i,usesSpecPriority:s}=e;const{guildRecruitmentSettings:o,guildRecruitmentSettingsStatus:c}=gh();return o?r.createElement("div",{className:"guild-recruitment-criteria-tile"},r.createElement(In,{title:"2. "+trans("recruitment.set_your_criteria"),subtitle:trans("recruitment.set_your_guild_criteria_subtitle")},c.isLoading&&r.createElement(kt,null),c.isSuccess&&r.createElement(Pn,null,r.createElement("div",{className:"guild-recruitment-criteria-tile__activities-and-language"},r.createElement(kf,{items:t,style:"sub-tile"}),r.createElement(Cf,{items:n,style:"sub-tile",required:!0})),r.createElement("div",{className:"guild-recruitment-criteria-tile__zone-filters"},r.createElement(w_,{zoneFilters:l,zones:o.possibleZones,scopeOptions:i,style:"sub-tile"})),r.createElement(Qh,{style:"sub-tile",showLinkToCalendar:!1,required:!0}),r.createElement(Ef,T_({},a,{recruitmentSpots:o.recruitmentSpots,defaultSpecsAndPriorities:o.defaultSpecsAndPriorities,style:"sub-tile",padding:"regular",required:!0,usesSpecPriority:s})),o.webhook&&r.createElement(N_,{webhook:o.webhook,style:"sub-tile"})))):null}C_.propTypes={activities:i().arrayOf(Uh).isRequired,languages:i().arrayOf(Uh).isRequired,specsAndPriorities:i().shape({allCategoryName:vf.allCategoryName,roles:vf.roles,priorities:vf.priorities}),zoneFilters:i().arrayOf(Uh).isRequired,zoneFilterScopes:i().arrayOf(Uh).isRequired,usesSpecPriority:i().bool.isRequired};var S_=C_;const I_=r.createContext(),x_=e=>{let{children:t,initialRecruitmentSortMetricId:n,initialRecruitmentSortOptionId:a}=e;const[l,i]=d("RecruitmentCharacterSearchFiltersProvider.specIds",[]),[s,o]=d("RecruitmentCharacterSearchFiltersProvider.recruitmentSortMetricId",n),[c,u]=d("RecruitmentCharacterSearchFiltersProvider.recruitmentSortOptionId",a);return r.createElement(I_.Provider,{value:{specIds:l,setSpecIds:i,recruitmentSortMetricId:s,setRecruitmentSortMetricId:o,recruitmentSortOptionId:c,setRecruitmentSortOptionId:u}},t)};x_.propTypes={children:i().node,initialRecruitmentSortMetricId:i().number,initialRecruitmentSortOptionId:i().number};var P_=()=>{const e=r.useContext(I_);if(void 0===e)throw new Error("useRecruitmentCharacterSearchFilters must be used within a RecruitmentCharacterSearchFiltersProvider");return e};function R_(e){let{onValidityChange:t=(()=>{})}=e;Y();const{guildRecruitmentSettings:n}=gh(),a=function(e,t){if(!t)return[];const n=[];return""!==t.contactInformation?.text?n.push({isValid:!0,message:trans("recruitment.contact_info_is_set")}):n.push({isValid:!1,message:trans("recruitment.contact_info_must_be_set")}),t.languageCode?n.push({isValid:!0,message:trans("recruitment.language_is_set")}):n.push({isValid:!1,message:trans("recruitment.language_must_be_set")}),t.schedule?.timeRanges?.length>0?n.push({isValid:!0,message:trans("schedule.schedule_is_set")}):n.push({isValid:!1,message:trans("schedule.schedule_must_be_set")}),t.recruitmentSpots?.length>0?n.push({isValid:!0,message:trans("recruitment.recruitment_is_set")}):n.push({isValid:!1,message:trans("recruitment.recruitment_must_be_set")}),n}(0,n);return(0,r.useEffect)((()=>{t(a.every((e=>e.isValid)))})),r.createElement(Jy,{validationResults:a})}R_.propTypes={onValidityChange:i().func};var A_=R_,L_=()=>r.createElement("i",{className:"zmdi zmdi-check zmdi-hc-border-circle green-check-icon"});function $_(e){let{name:t,nameCssClass:n,factionName:a,serverName:l,factionTooltipText:i,serverTooltipText:s,regionShortName:o}=e;return r.createElement(U,{className:"character-name-faction-server-region-title",gap:"content-padding"},r.createElement("div",{className:`character-name-faction-server-region-title__name ${n}`},t),r.createElement(U,{gap:"content-padding"},a&&r.createElement("div",{className:"character-name-faction-server-region-title__faction"},a," ",!!i&&r.createElement(Re,{triggerProps:{style:{marginTop:"-3px"}},content:r.createElement("span",{className:"character-name-faction-server-region-title__tooltip"},i)},r.createElement(L_,null))),r.createElement("div",{className:"character-name-faction-server-region-title__server"},l," ",!!s&&r.createElement(Re,{triggerProps:{style:{marginTop:"-3px"}},content:r.createElement("span",{className:"character-name-faction-server-region-title__tooltip"},s)},r.createElement(L_,null))),r.createElement("div",{className:"character-name-faction-server-region-title__region"},o)))}$_.propTypes={name:i().string.isRequired,nameCssClass:i().string,factionName:i().string,serverName:i().string,factionTooltipText:i().string,serverTooltipText:i().string,regionShortName:i().string};var O_=$_;function z_(e){let{characterId:t,name:n,bar:a,progressLastKillTime:l,metrics:i}=e;return r.createElement(Mn,{padding:"narrow"},r.createElement("div",{className:"recruitment-character-search-result-zone-metrics-tile"},r.createElement("div",{className:"recruitment-character-search-result-zone-metrics-tile__name"},n),r.createElement("div",{className:"recruitment-character-search-result-zone-metrics-tile__bar"},a&&r.createElement(On,{amount:a.amount,total:a.total,label:a.label+(l?" ("+moment(l).fromNow()+")":"")})),r.createElement("div",{className:"recruitment-character-search-result-zone-metrics-tile__metrics"},i.some((e=>e.includedPrivateLogs))&&r.createElement("span",{className:"recruitment-character-search-result-zone-metrics-tile__private-metric-label"},"(",trans("global.private"),")"),i.slice(0,6).map((e=>r.createElement(U,{key:e.specFullType,className:"recruitment-character-search-result-zone-metrics-tile__metric"},r.createElement(De,{type:e.specFullType,bordered:!0,alt:e.label,tooltip:{id:`${t}-${n}-${e.specFullType}`,content:e.label}},r.createElement("span",{className:e.cssClassName},e.value))))))))}z_.propTypes={characterId:i().number.isRequired,name:i().string.isRequired,bar:i().shape(On.propTypes),progressLastKillTime:i().string,metrics:i().arrayOf(i().shape({label:i().string,specFullType:i().string,value:i().string.isRequired,cssClassName:i().string,includedPrivateLogs:i().bool}))};var F_=z_;function M_(){return M_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},M_.apply(this,arguments)}const D_=(0,r.forwardRef)(((e,t)=>{let{id:n,name:a,nameCssClass:l,thumbnail:i,factionName:s,serverName:o,factionTooltipText:c,serverTooltipText:u,regionShortName:d,characterPageFilter:m,activities:p,languages:g,zoneMetrics:h,description:f,contactInformationText:b,lastUpdated:E,schedulePreferences:v,schedule:y}=e;return r.createElement(Ta,{forwardedRef:t,href:`/character/id/${n}${m}`,activities:p,languages:g,description:f,contactInformationText:b,lastUpdated:E,schedulePreferences:v,schedule:y,buttonLabel:trans("character.view_player"),Icon:()=>r.createElement(Hv,{src:i,rounded:!0}),Tiles:()=>r.createElement(r.Fragment,null,h.map((e=>r.createElement(F_,M_({key:e.name,characterId:n},e))))),Title:()=>r.createElement(O_,{name:a,nameCssClass:l,factionName:s,serverName:o,factionTooltipText:c,serverTooltipText:u,regionShortName:d})})}));D_.propTypes={id:i().number.isRequired,name:i().string.isRequired,nameCssClass:i().string,thumbnail:i().string.isRequired,factionName:i().string,serverName:i().string,factionTooltipText:i().string,serverTooltipText:i().string,regionShortName:i().string,characterPageFilter:i().string,activities:i().arrayOf(i().string),languages:i().arrayOf(i().string),zoneMetrics:i().arrayOf(i().shape(F_.propTypes)),description:i().string,contactInformationText:i().string,lastUpdated:i().string,schedulePreferences:i().string,schedule:i().object};var U_=D_;function B_(e){let{status:t}=e;const{guildRecruitmentSettings:n}=gh(),{specIds:a,setSpecIds:l}=P_(),[i,s]=(0,r.useState)([]);return(0,r.useEffect)((()=>{if(!n)return;const e=n.recruitmentSpots.flatMap((e=>e.specsAndPriorities.filter((e=>e.priorityValue>0)))).filter(((e,t,n)=>n.findIndex((t=>t.id===e.id))===t)).sort(((e,t)=>e.roleId-t.roleId)).map((e=>({value:e.id,label:`${e.categoryName} (${e.specName})`})));s(e)}),[n]),n?(a?.length>0&&i?.length>0&&0===a.filter((e=>i.some((t=>t.value===e)))).length&&l([]),r.createElement(Wh,{label:trans("recruitment.filter_results_to")+":",items:i,value:[],pendingValue:a,isMulti:!0,isBeingEdited:!0,hasPendingChanges:!0,setPendingValue:l,status:t})):null}B_.propTypes={status:Lt};var V_=B_;const q_="\n### What metric should I use?\n\n#### Best historical percent\n\nThis is the big number on the character page. It takes the best percentile a player had on each encounter, and then averages them. This indicates how well a player could potentially perform when everything is in their favor (mechanics, externals, procs, etc), and shows a player in their best light.\n\n#### Median historical percent\n\nThis takes the player's median percentile for each encounter, and then averages them. This indicates how well a player typically performs, and is a good measure of their consistency.\n\n#### All star percent\n\nWhile historical percents are locked in and don't change, all star rankings are updated every day. Players with high all star percents have performed well recently on every encounter they have killed. This is a good measure of how well a player can perform right now.\n\n*Private logs are included when calculating each of these metrics.*\n";function j_(){return r.createElement(Re,{content:r.createElement(vn,null,q_)},r.createElement("span",{id:"metric-description__help-icon",className:"zmdi zmdi-help","aria-hidden":!0}),r.createElement(D,null,trans("help")))}function H_(e){let{status:t,recruitmentSortMetrics:n}=e;const{recruitmentSortMetricId:a,setRecruitmentSortMetricId:l}=P_();return r.createElement(Wh,{label:trans("recruitment.metric_to_use")+":",items:n,pendingValue:a,isMulti:!1,isBeingEdited:!0,hasPendingChanges:!0,setPendingValue:l,status:t,afterLabel:r.createElement(j_,null)})}H_.propTypes={status:Lt,recruitmentSortMetrics:i().arrayOf(Uh).isRequired};var G_=H_;function W_(e){let{status:t,recruitmentSortOptions:n}=e;const{recruitmentSortOptionId:a,setRecruitmentSortOptionId:l}=P_();return r.createElement(Wh,{label:trans("global.sort_by_label")+":",items:n,pendingValue:a,isMulti:!1,isBeingEdited:!0,hasPendingChanges:!0,setPendingValue:l,status:t})}W_.propTypes={status:Lt,recruitmentSortOptions:i().arrayOf(Uh).isRequired};var K_=W_;function Z_(e){let{status:t,onSearch:n,recruitmentSortMetrics:a,recruitmentSortOptions:l}=e;return r.createElement(Mn,null,r.createElement("div",{className:"guild-recruitment-search-filters"},r.createElement("div",{className:"guild-recruitment-search-filters__filter"},r.createElement(V_,{status:t})),r.createElement("div",{className:"guild-recruitment-search-filters__filter"},r.createElement(G_,{status:t,recruitmentSortMetrics:a})),r.createElement("div",{className:"guild-recruitment-search-filters__filter"},r.createElement(K_,{status:t,recruitmentSortOptions:l})),r.createElement("div",{className:"guild-recruitment-search-filters__button"},r.createElement(F,{onClick:()=>n(),disabled:t.isLoading},t.isLoading?trans("global.searching")+"...":trans("global.search")))))}Z_.propTypes={status:Lt,onSearch:i().func.isRequired,recruitmentSortMetrics:i().arrayOf(Uh).isRequired,recruitmentSortOptions:i().arrayOf(Uh).isRequired};var Y_=Z_;function J_(){return J_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},J_.apply(this,arguments)}function X_(e){let{recruitmentSortMetrics:t,recruitmentSortOptions:n}=e;const{guildRecruitmentSettings:a,guildRecruitmentSettingsStatus:l}=gh(),{specIds:i,recruitmentSortMetricId:s,recruitmentSortOptionId:o}=P_(),{guild:c}=ym(),[{data:u,status:d},m,p]=$t(),[{data:g,status:h},f,b]=$t(),E={isIdle:d.isIdle&&h.isIdle,isLoading:d.isLoading||h.isLoading,isError:d.isError||h.isError,errorMessage:d.errorMessage||h.errorMessage,isSuccess:d.isSuccess&&h.isSuccess};(0,r.useEffect)((()=>{p(),b()}),[a,i,s,o,c,p,b]);const[v,y]=(0,r.useState)(0),[_,w]=(0,r.useState)(1),[k,N]=(0,r.useState)([]),[T,C]=(0,r.useState)(!0);(0,r.useEffect)((()=>{d.isSuccess&&N(u.results)}),[u,v,d]),(0,r.useEffect)((()=>{h.isSuccess&&w(Math.ceil(g.count/10))}),[g,v,h]),(0,r.useEffect)((()=>{var e;g&&(e=g.count,Ol({analyticsComponentName:Q_,eventName:"SearchResults",isInteraction:!1,extraParameters:{count:e}}))}),[g]),(0,r.useLayoutEffect)((()=>{k.length&&T?C(!1):S.current?.scrollIntoView({behavior:"smooth",block:"center"})}),[k]);const S=(0,r.useRef)(),I=e=>{y(e.selected),function(e){Ol({analyticsComponentName:Q_,eventName:"Paginate",extraParameters:{page_number:e}})}(e.selected);const t={page:e.selected+1,specIds:i,recruitmentSortMetricId:s,recruitmentSortOptionId:o};m({url:`/recruitment/characters-for-guild/${c.id}/results`,body:t}),f({url:`/recruitment/characters-for-guild/${c.id}/count`,body:t})},[x,P]=(0,r.useState)();if(!a)return null;const R=g&&`\n> ${1===g.count?trans("recruitment.found_1_player_that_matches"):trans("recruitment.found_x_players_that_match",{x:g.count})} ${trans("recruitment.every_result_shown_matches_filters")}\n`;return r.createElement("div",{className:"guild-recruitment-search-results-tile"},r.createElement(In,{title:"3. "+trans("recruitment.find_your_new_players"),subtitle:trans("recruitment.find_your_new_players_subtitle")},l.isLoading&&r.createElement(kt,null),l.isSuccess&&r.createElement(Pn,null,r.createElement("div",{style:{display:x?"none":"block"}},r.createElement(Pn,null,r.createElement(vn,null,trans("recruitment.set_basic_criteria")),r.createElement(A_,{onValidityChange:P}),r.createElement("div",{className:"guild-recruitment-search-results-tile__search-button"},r.createElement(F,{disabled:!0},trans("global.search"))))),x&&r.createElement("div",{style:{marginTop:0}},r.createElement(Y_,{recruitmentSortMetrics:t,recruitmentSortOptions:n,status:E,onSearch:()=>{I({selected:0}),function(e,t,n){Ol({analyticsComponentName:Q_,eventName:"Search",extraParameters:{filter_1:e.length>0,filter_2:t,filter_3:n}})}(i,s,o)}})),E.isError&&r.createElement(se,null,E.errorMessage),u&&g&&r.createElement(r.Fragment,null,r.createElement(vn,null,R),_>1&&r.createElement(Mn,null,r.createElement(Zy,{pageCount:_,forcePage:v,onPageChange:I,disabled:E.isLoading})),r.createElement("div",{className:"guild-recruitment-search-results-tile__results"},E.isLoading&&r.createElement("div",{className:"guild-recruitment-search-results-tile__results-loading-indicator"}),k.map(((e,t)=>r.createElement(U_,J_({key:e.id,ref:0===t?S:void 0},e))))),_>1&&r.createElement(Mn,null,r.createElement(Zy,{pageCount:_,forcePage:v,onPageChange:I,disabled:E.isLoading}))),!(u&&g)&&x&&r.createElement("div",{style:{height:600}}))))}X_.propTypes={recruitmentSortMetrics:i().arrayOf(Uh).isRequired,recruitmentSortOptions:i().arrayOf(Uh).isRequired};const Q_="GuildRecruitment";var ew=X_;function tw(){return tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tw.apply(this,arguments)}function nw(e){let{anyClip:t,titleImageUrl:n,titleImagePosition:a,activities:l,languages:i,specsAndPriorities:s,zoneFilters:o,zoneFilterScopes:c,recruitmentSortMetrics:u,recruitmentSortOptions:d,backgroundImageUrl:m,usesSpecPriority:p}=e;const g=Y();Tv(m);const h=`\n[${trans("recruitment.tell_me_more_about_how_to_find_players_for_my_guild")}](${g.articlesBaseUrl}/help/recruitment-help-guild-looking-for-player)\n\n\n[<Icon type="long-arrow-left" /> ${trans("recruitment.recruitment")}](/recruitment)\n`;return r.createElement(wm,null,r.createElement(ph,null,r.createElement(Mi,{width:"narrow"},r.createElement(Nv,{title:trans("recruitment.lets_find_the_perfect_players"),imageUrl:n,imagePosition:a?{...a,top:a.top+45}:void 0,imageAlt:"NPC",removeBottomMargin:!0}),r.createElement(Pn,null,r.createElement(vn,{enhanced:!0},h),r.createElement(y_,{anyClip:t}),r.createElement(S_,{activities:l,languages:i,specsAndPriorities:s,zoneFilters:o,zoneFilterScopes:c,usesSpecPriority:p}),r.createElement(x_,{initialRecruitmentSortMetricId:u[0].value,initialRecruitmentSortOptionId:d[0].value},r.createElement(ew,{recruitmentSortMetrics:u,recruitmentSortOptions:d}))))),t&&r.createElement(tp,tw({},t,{fixed:!0})))}function aw(e){let{subscriptionTiersCallToAction:t,bannerImages:n}=e;const a=Y();return r.createElement(wm,null,r.createElement(Mi,null,r.createElement(wv,null,trans("accounts.subscribe_to_site",{siteTitle:a.siteTitle})),r.createElement(Pn,null,r.createElement(In,{title:trans("accounts.subscription_tiers")},r.createElement(Fl,t)),n.length>0&&r.createElement(In,{title:trans("features.new_feature",{featureName:trans("features.custom_character_banner")}),subtitle:trans("features.custom_character_banner_description")},r.createElement(Pn,null,r.createElement(vn,null,`[${trans("accounts.learn_more_about_our_new_features_and_subscription_changes")}](${a.articlesBaseUrl+"/news/new-banner-feature-and-storage-subscription-changes"})`),n.map((e=>r.createElement("img",{key:e.id,src:e.url,alt:trans("features.custom_character_banner")+" "+e.id}))))))))}nw.propTypes={anyClip:i().object,titleImageUrl:i().string,titleImagePosition:yv,activities:i().arrayOf(Uh).isRequired,languages:i().arrayOf(Uh).isRequired,specsAndPriorities:S_.propTypes.specsAndPriorities,zoneFilters:i().arrayOf(Uh).isRequired,zoneFilterScopes:i().arrayOf(Uh).isRequired,recruitmentSortMetrics:i().arrayOf(Uh).isRequired,recruitmentSortOptions:i().arrayOf(Uh).isRequired,backgroundImageUrl:i().string,usesSpecPriority:i().bool},sm(".guild-looking-for-players-page-container",nw),aw.propTypes={subscriptionTiersCallToAction:i().object.isRequired,bannerImages:ai.propTypes.images},sm(".subscribe-page-container",aw);var rw=function(e){let{joinCode:t}=e;const[n,a]=(0,r.useState)(""),[{status:l,data:i},s,o]=$t(),c=Zl(),u=Y();return(0,r.useEffect)((()=>{!l.isLoading&&i?.userCharacter&&a("")}),[i,l]),u?r.createElement(In,{title:trans("guilds.auto_join_without_an_account_title"),className:"guild-auto-join-without-an-account-tile"},r.createElement(U,null,r.createElement(Pn,null,r.createElement("ol",{className:"guild-auto-join-without-an-account-tile__steps"},r.createElement("li",null,r.createElement("p",null,trans("accounts.lodestone_code_message")),r.createElement(Ni,{valueToCopy:`${c}/${t}`})),r.createElement("li",null,r.createElement("p",null,trans("accounts.lodestone_character_url")),r.createElement(Pn,null,r.createElement(ii,{disabled:!!l?.isLoading,value:n,onChange:e=>{a(e.value.toString())}}),r.createElement(F,{disabled:l.isLoading||!n?.length,onClick:()=>{n?.length&&(o(),s({body:{characterProfileUrl:n},url:`/guild/add-character-using-code-from-character-profile-url/${c}`}))}},l.isLoading?r.createElement(kt,null):trans("guilds.check_character_profile"))))),!l.isLoading&&l.isError&&r.createElement(se,null,l.errorMessage),!l.isLoading&&i?.userCharacter&&r.createElement(U,{className:"guild-auto-join-without-an-account-tile__join-success"},r.createElement(Hv,{src:i.userCharacter.thumbnail}),r.createElement("p",null,`${trans("guilds.join_success_caption")}: `,r.createElement("a",{href:`/character/id/${i.userCharacter.id}`},`${i.userCharacter.name} - ${i.userCharacter.server.name} (${i.userCharacter.region.shortName})`)))),r.createElement("div",{className:"guild-auto-join-without-an-account-tile__or-login"},trans("accounts.already_have_an_account_on_site",{siteTitle:u.siteTitle})," ",r.createElement("a",{href:"/login"},trans("global.login"))))):null};function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lw.apply(this,arguments)}sm(".guild-auto-join-without-an-account-page-container",(function(e){let{guildId:t,guildName:n,guildFaction:a,guildHeader:l,guildRegion:i,joinCode:s}=e;return r.createElement(wm,null,r.createElement(Wl.Provider,{value:t},r.createElement(Oi.Provider,{value:n},r.createElement(dh.Provider,{value:a},r.createElement(Xa.Provider,{value:i},r.createElement(Hi,l),r.createElement(Mi,{width:"narrow"},r.createElement(Pn,null,r.createElement(rw,{joinCode:s}))))))))})),sm(".guild-analyze-page-container",(function(e){let{guildId:t,guildName:n,guildFaction:a,guildHeader:l,guildRegion:i,navigation:s,mraEntryPointTileViewModel:o}=e;return r.createElement(wm,null,r.createElement(Wl.Provider,{value:t},r.createElement(Oi.Provider,{value:n},r.createElement(dh.Provider,{value:a},r.createElement(Xa.Provider,{value:i},r.createElement(Hi,l),r.createElement(Mi,null,r.createElement(Pn,{gap:"small"},r.createElement(Gi,lw({},s,{relatedLinks:l?.relatedLinks})),r.createElement(Os,o))))))))}));const iw={encounterName:e=>e.name,encounterPulls:e=>e.pullCount,encounterBestPercent:e=>e.bestPercentForDisplay,encounterSummary:e=>r.createElement(r.Fragment,null,r.createElement("div",null,iw.encounterName(e)),r.createElement("div",null,trans("progress-race.best"),":"," ",iw.encounterBestPercent(e)),r.createElement("div",null,trans("progress-race.pulls"),":"," ",iw.encounterPulls(e)))},sw=e=>{let{children:t,className:n}=e;return r.createElement("div",{className:`guild-progress-text-embed ${n||""}`},t)};function ow(e){let{format:t}=e;const{progressRace:n,progressRaceStatus:a}=Ba(),[l,i]=(0,r.useState)();return(0,r.useEffect)((()=>{const e=n?.guilds?.[0]?.encounters?.find((e=>e.id===n.guilds[0].currentEncounterId));e&&i(e)}),[n]),function(e){return e in iw}(t)?!l&&a.isLoading?r.createElement(sw,null,r.createElement(kt,null)):l?r.createElement(sw,{className:t},iw[t](l)):r.createElement(sw,null,r.createElement(vn,null,trans("global.no_data_found")+".")):r.createElement(sw,null,"Invalid format: ",t)}function cw(e){let{game:t,zoneId:n}=e;const a=Fa("format");return r.createElement(Da,{zoneId:n,synchronized:!0},r.createElement(Z,{game:t},r.createElement(ow,{format:a})))}function uw(e){let{zoneId:t}=e;const{progressRace:n,isLoadingNewProgressRaceParameters:a}=Ba(),l=ys("numberOfGuilds",20),i=ys("guildToHighlight"),s=Gf("isStyled",!0),o=Gf("includeHeader",!0),c=Gf("includeGuildLogo",!1),u=Fa("encounterIconFormat"),d=Gf("showPullCountOnEncounterIcons",!1),m=Gf("includePullsColumn",!0),p=Gf("includeBestPercentColumn",!0),g=Gf("includeGearColumn",!0),h=Gf("showExtraDataOnSeparateRow",!1),f=Gf("isInsideTile",!0),b=()=>r.createElement("div",null,r.createElement(Dr,{href:`/zone/race/${t}`}),r.createElement($r,{guilds:n.guilds,numberOfGuilds:l,guildIdToHighlight:i,isStyled:s,includeGuildLogo:c,encounterIconFormat:u,showPullCountOnEncounterIcons:d,includePullsColumn:m,includeBestPercentColumn:p,includeGearColumn:g,showExtraDataOnSeparateRow:h,includeHeader:o}));return r.createElement("div",{className:"progress-race-leaderboard-embed"},!n&&a&&r.createElement(_g,{height:450},r.createElement(kt,null)),n?.guilds?.length>0&&(n?.guilds?.length??0)>0&&(f?r.createElement(In,{padding:"narrow"},r.createElement(b,null)):r.createElement(b,null)),0===n?.guilds?.length&&!((n?.guilds?.length??0)>0)&&r.createElement(_g,{height:450},r.createElement(vn,null,trans("global.no_data_found")+".")))}function dw(e){let{game:t,zoneId:n}=e;return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(uw,{zoneId:n})))}function mw(){return mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mw.apply(this,arguments)}function pw(e){let{color:t,encounterId:n,raceInReviewEmbedFooter:a,theme:l}=e;const{progressRace:i,progressRaceStatus:s}=Ba(),o=function(e,t){return t||!e?.guilds?.[0]?.encounters?.length?null:e.guilds[0].currentEncounterId}(i,n),c=function(e,t){return e?.guilds?.[0]?.encounters?.length?e.guilds[0].encounters?.find((e=>e.id===t)):null}(i,o),{containerRef:u,topRef:d,bottomRef:m,height:p}=pb([c]);return r.createElement("div",{ref:u,className:"encounter-progress-time-chart-embed"},!c&&s.isLoading&&r.createElement(_g,{height:"100%"},r.createElement(kt,null)),c&&r.createElement("div",{className:"encounter-progress-time-chart-embed__content"},r.createElement("div",{ref:d},r.createElement(db,{title:c.name,subtitle:trans("progress-race.progress_time_by_guild")})),i&&p&&r.createElement(Qg,{encounterId:Number(o),guilds:i.guilds,height:p,theme:l,title:null,subtitle:null}),r.createElement("div",{ref:m},r.createElement(mb,mw({color:t},a)))),!c&&!s.isLoading&&r.createElement(_g,{height:"100%"},r.createElement(vn,null,trans("global.no_data_found")+".")))}function gw(){const{progressRace:e}=Ba(),t=Fa("metric","duration"),n=Fa("encounterOrder",null),a=null===n?null:n.split(",").map(Number),l="true"===Fa("includeDifference","false"),i="true"===Fa("includeDifferenceEncounterIcons","false"),s="true"===Fa("highlightLastKilledEncounter","false"),o="true"===Fa("fullHeight","false");return e?r.createElement(wp,{guilds:e.guilds,style:"embed",metric:t,encounterOrder:a,includeDifference:l,includeDifferenceEncounterIcons:i,highlightLastKilledEncounter:s,fullHeight:o}):null}function hw(e){let{game:t,zoneId:n}=e;return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(gw,null)))}function fw(e){let{guild:{logoImageUrl:t,name:n,logoImageFallbackUrl:a,logoImageIsCustom:l}}=e;return r.createElement("div",{className:"detailed-composition-grid__guild-name-container"},r.createElement(Ln,{size:54,url:t,fallbackUrl:a,isCustom:l,className:"detailed-composition-grid__guild-logo"}),r.createElement("span",{className:"detailed-composition-grid__guild-name"},n))}function bw(e){let{composition:t}=e;const n=t.roles.flatMap((e=>e.players.map((e=>e.itemLevel)).filter((e=>null!==e)))),a=n.reduce(((e,t)=>e+t),0)/(n.length||1);return r.createElement(c,{style:"dark-gray"},r.createElement("span",{className:"detailed-composition-grid__overall-ilvl"},a.toFixed(1)))}function Ew(e){let{color:t,fraction:n}=e;return r.createElement("div",{className:"detailed-composition-grid__progress-bar-container"},r.createElement("div",{className:"detailed-composition-grid__progress-bar",style:{"--color":t,width:100*n+"%"}}))}function vw(e,t){let n=e;return n||(n=Math.round(t.reduce(((e,t)=>e+t.itemLevel),0)/t.length)),n}function yw(e){let{player:{fullType:t,type:n,name:a,...l},significantItemLevelThreshold:i}=e;const{itemLevel:s,gearItems:o}=function(e){let{itemLevel:t,gearItems:n}=e;const[a,l]=(0,r.useState)({itemLevel:vw(t,n),gearItems:n});return(0,r.useEffect)((()=>{n&&n.length>0&&a.gearItems!==n&&l({itemLevel:vw(t,n),gearItems:n})}),[t,n]),a}(l),c=o.length,u=o.filter((e=>e.itemLevel>=(i??0))).length,d=null!==i&&(o?.length??0)>0;return r.createElement("td",{className:"detailed-composition-grid__character-cell"},r.createElement("div",{className:"detailed-composition-grid__character-cell__name-group"},t?r.createElement(De,{type:t},r.createElement("span",{className:`do-not-change-color-on-hover ${n}`},a)):r.createElement("span",{className:`do-not-change-color-on-hover ${n}`},a)),r.createElement("dl",{className:"detailed-composition-grid__character-cell__text-data"},r.createElement("dt",null,trans("gameterms-warcraft.ilvl")),r.createElement("dd",null,Number.isNaN(s)?"-":s),d&&r.createElement(r.Fragment,null,r.createElement("dt",null,trans("progress-race.gear_upgrades_label")),r.createElement("dd",null,c>0?r.createElement(r.Fragment,null,u," / ",c):null))),d&&r.createElement(Ew,{fraction:c>0?u/c:0}))}sw.propTypes={children:i().node.isRequired,className:i().string},ow.propTypes={format:i().oneOf(["encounterName","encounterPulls","encounterBestPercent","encounterSummary"]).isRequired},cw.propTypes={game:i().exact(Kg),zoneId:i().number.isRequired},sm(".guild-progress-text-embed-container",cw),uw.propTypes={zoneId:i().number.isRequired},dw.propTypes={game:i().exact(Kg),zoneId:i().number.isRequired},sm(".progress-race-leaderboard-embed-container",dw),sm(".encounter-progress-time-chart-embed-container",(function(e){let{game:t,zoneId:n,raceInReviewEmbedFooter:a}=e;const l=ys("encounter"),i=Fa("color"),s=hb();return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(pw,{color:i,encounterId:l,raceInReviewEmbedFooter:a,theme:s})))})),hw.propTypes={game:i().exact(Kg),zoneId:i().number.isRequired},sm(".encounter-progress-duration-table-embed-container",hw);const _w=(e,t)=>e.roles.findIndex((e=>e.players.includes(t)));function ww(e){let{columns:t,guild:n,composition:a,maxRows:l,style:i="default",playerOrder:s}=e;const o=(0,r.useMemo)((()=>{if(s){const e=a.roles.flatMap((e=>e.players)).reduce(((e,t)=>(e[t.name]=t,e)),{});return s.map((t=>e[t]??{name:t,gearItems:[]}))}return a.roles.flatMap((e=>e.players)).sort(((e,t)=>(t.itemLevel??0)-(e.itemLevel??0))).slice(0,l*t).sort(((e,t)=>_w(a,e)-_w(a,t)))}),[s,a,t,l]),c=[];for(let e=0;e<Math.min(l,o.length/t);e++)c.push(o.slice(e*t,(e+1)*t));return r.createElement(vp,{className:`detailed-composition-grid__table detailed-composition-grid--${i}`},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null),r.createElement("th",{colSpan:t-2},r.createElement(fw,{guild:n})),r.createElement("th",null,r.createElement(bw,{composition:a})))),r.createElement("tbody",null,c.map(((e,t)=>r.createElement("tr",{key:t},e.map(((e,t)=>r.createElement(yw,{key:t,player:e,significantItemLevelThreshold:a.significantItemLevelThreshold}))))))))}const kw=e=>{let{composition:t,guild:n,columns:a,maxRows:l,style:i,playerOrder:s}=e;return t?.roles?.length&&n?r.createElement(ww,{composition:t,guild:n,columns:a??5,maxRows:l??2,style:i,playerOrder:s}):null};function Nw(e){let{guildId:t,zoneId:n,columns:a,maxRows:l,difficulty:i,competitionId:s,style:o="default"}=e;const{progressRace:c,timeUntilNextUpdate:u}=Ba(),d=c?.guilds.find((e=>e.id===t)),m=`/zone/race/content/${n}/guild/${t}/detailed-composition?competition=${s}&difficulty=${i}`,[p,g]=(0,r.useState)(void 0),[h,f]=(0,r.useState)(!1),[{data:b,status:E},v]=$t();(0,r.useEffect)((()=>{v(m)}),[v,m,u]),(0,r.useEffect)((()=>{E.isSuccess&&(f(!1),g(b)),E.isError&&(console.error(E.errorMessage),f(!0))}),[E,b]);const y=Fa("players",void 0),_=(0,r.useMemo)((()=>y?.split(",")),[y]);return d?p?h?null:r.createElement(kw,{composition:p,guild:d,style:o,maxRows:l,columns:a,playerOrder:_}):r.createElement(Tt,{height:250}):null}function Tw(e){let{guildId:t,zoneId:n}=e;const a=ys("difficulty"),l=ys("competition",1);return console.log({guildId:t,zoneId:n,difficulty:a,competitionId:l}),r.createElement(Nw,{guildId:t,zoneId:n,difficulty:a,competitionId:l,style:"embed"})}function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cw.apply(this,arguments)}function Sw(e){let{competitionId:t,timeMachineCompetitionId:n,raceInReviewEmbedFooter:a}=e;t=ys("competition",t),n=ys("timeMachineCompetition",n);const l=ys("startingRank"),i=ys("numberOfGuilds"),s=ys("zoom",1),{timeMachine:o,timeMachineStatus:c}=Cp(t,n,l,i),u=(0,r.useRef)(null),{width:d}=jn(u);return r.createElement("div",{ref:u,className:"time-machine-competition-summary-embed",style:{zoom:s}},!o&&c.isLoading&&r.createElement(_g,{height:"100%"},r.createElement(kt,null)),!o&&c.isError&&r.createElement(_g,{height:"100%"},r.createElement(vn,null,trans("global.no_data_found")+".")),o&&r.createElement(Pn,{gap:"smaller",style:{alignItems:"center"}},r.createElement("div",{style:{width:"100%"}},r.createElement($p,Cw({},o,{enableTooltips:1===s,openLinksExternally:!0}))),r.createElement("a",{href:"/",target:"_blank",rel:"nofollow noreferrer"},r.createElement("img",{src:a.raceInReviewLogoImageUrl,alt:trans("progress-race.race_in_review"),style:{height:0===d||d>650?48:32,width:"auto"}}))))}function Iw(){return Iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Iw.apply(this,arguments)}function xw(e){const t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n<10?`0${n}`:`${n}`}`}let Pw;sm(".guild-progress-detailed-composition-grid-embed-container",(function(e){let{game:t,zoneId:n}=e;const a=jf();return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(Tw,{guildId:a,zoneId:n})))})),sm(".time-machine-competition-summary-embed-container",(function(e){let{game:t,zoneId:n,competitionId:a,timeMachineCompetitionId:l,raceInReviewEmbedFooter:i}=e;return r.createElement(Da,{zoneId:n},r.createElement(Z,{game:t},r.createElement(Sw,{competitionId:a,timeMachineCompetitionId:l,raceInReviewEmbedFooter:i})))}));var Rw=function(e){return e.BloodlustTimer="BloodlustTimer",e.BattleRez="BattleRez",e.DeathsCount="DeathsCount",e.CombatTime="CombatTime",e.PhaseCounter="PhaseCounter",e.BossResources="BossResources",e.BossResource="BossResource",e.BestPull="BestPull",e.PullCount="PullCount",e.PhaseIndicator="PhaseIndicator",e.BossHP="BossHP",e.Branding="Branding",e}(Rw||{});const Aw=e=>{let t=0;return e.map((e=>(t+=Number(!e.isIntermission),{...e,fullPhaseLabel:`${trans("global."+(e.isIntermission?"intermission":"phase"))} ${t}`,shortPhaseLabel:`P${t+(e.isIntermission?.5:0)}`})))};function Lw(e){let{liveFightData:t,progressRace:n,progressRaceEncounter:a}=e;const l=Fa("layout"),i="horizontal"===l?l:"vertical",s=Fa("widget"),o=s?(c=s,Object.values(Rw).find((e=>e===c))):void 0;var c;const[u,d]=(0,r.useState)(void 0),m=Y(),[p,g]=(0,r.useState)({pullCountToDisplay:n?.pullCount??0,lastReceivedStartTime:0});(0,r.useMemo)((()=>{if(t?.inProgress){if(t?.startTime&&p.lastReceivedStartTime!==t?.startTime){g({lastReceivedStartTime:t.startTime??0,pullCountToDisplay:(n?.pullCount??0)+1});const e=t?.endTime??(new Date).getTime()/1e3,a=(new Date).getTime()/1e3,r=e-a;Pw&&clearInterval(Pw),Pw=setInterval((()=>{const n=(new Date).getTime()/1e3+r;d(xw(n-(t?.startTime??e)))}),1e3)}}else Pw&&clearInterval(Pw)}),[t?.startTime,t?.endTime,t?.inProgress,n?.pullCount,p,d,g]);const h=a?.shouldShowPhaseInPercentDisplay?t?.encounter.bossPercentage??100:t?.encounter.fightPercentage??100,f=(0,r.useMemo)((()=>a?Aw(a.phases):[]),[a]),b=(0,r.useMemo)((()=>f.filter((e=>!e.isIntermission)).length),[f]);let E=n?.bestPercent?`${n?.bestPercent.toFixed(1)}%`:"100%";if((t?.encounter.fightPercentage??100)<(n?.bestPercent??100)){const e=t&&f.length>t.currentPhaseIndex?f[t.currentPhaseIndex].shortPhaseLabel:"";E=a?.shouldShowPhaseInPercentDisplay?`${t?.encounter.bossPercentage.toFixed(1)??"100"}% ${e}`:`${t?.encounter.fightPercentage.toFixed(1)??"100"}%`}const v={title:"HP",value:h,absoluteValue:t?.encounter.health??1,type:"health"};let y;t&&t?.encounter.resource>=0&&(y={title:"Energy",value:t.encounter.resource/100,absoluteValue:100*t.encounter.resource,type:"resource"});const _=!1===t?.inProgress,w=!t,k=t?.currentPhaseIndex??0;return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),r.createElement("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),r.createElement("link",{href:"https://fonts.googleapis.com/css2?family=Passion+One&family=Roboto+Condensed:wght@400;700&display=swap",rel:"stylesheet"}),"vertical"===i?r.createElement(r.Fragment,null,r.createElement("div",{className:"live-fight-data__vertical-wrapper"},void 0===o||o===Rw.BloodlustTimer?r.createElement(Ow,{game:m,liveFightData:t,layout:i}):null,void 0===o||o===Rw.BattleRez?r.createElement(zw,{title:"BREZ",value:Math.floor(t?.combatRezzesAvailable??2).toString(),iconUrl:`${m?.assetServerBaseUrl}/img/warcraft/abilities/spell_nature_reincarnation.jpg`,layout:i,state:_||w?"inactive":0===t?.combatRezzesAvailable?"used":void 0}):null,void 0===o||o===Rw.DeathsCount?r.createElement(zw,{title:"DEATHS",value:Math.floor(t?.deathsCount??0).toString(),iconUrl:`${m?.assetServerBaseUrl}/img/warcraft/abilities/ability_rogue_feigndeath.jpg`,layout:i,state:_||w?"inactive":0===t?.combatRezzesAvailable?"used":void 0}):null,void 0===o||o===Rw.CombatTime?r.createElement(zw,{title:"COMBAT",value:u??"0:00",layout:i,state:_||w?"inactive":void 0}):null,void 0===o||o===Rw.PhaseCounter?f.length>0&&r.createElement(zw,{title:"PHASE",value:t&&f.at(t.currentPhaseIndex)?f[t.currentPhaseIndex].shortPhaseLabel.slice(1):String((t?.currentPhaseIndex??0)+1),layout:i,subtitle:`OUT OF ${b}`,state:_||w?"inactive":void 0}):null,void 0===o||o===Rw.BossResources?r.createElement(Mw,{healthBar:v,resourceBar:y,layout:i,displayedTitle:"Boss",state:_||w?"inactive":"active"}):null,void 0===o||o===Rw.BestPull?r.createElement(zw,{title:"BEST %",value:E,layout:i,state:_?"inactive":void 0,isValueSmallFont:!0,valueStyle:{whiteSpace:"nowrap"},isValueTinyFont:a?.shouldShowPhaseInPercentDisplay??!1}):null,void 0===o||o===Rw.PullCount?r.createElement(zw,{title:"# PULLS",value:p.pullCountToDisplay.toString(),layout:i,state:_?"inactive":void 0}):null,void 0===o||o===Rw.Branding?r.createElement("div",{className:"live-fight-data__branding"},r.createElement(no,{size:35}),r.createElement("div",null,m?.siteTitle.toUpperCase())):null)):r.createElement("div",{className:"live-fight-data__horizontal-wrapper"},void 0===o||o===Rw.BossResources||o===Rw.CombatTime||o===Rw.BestPull||o===Rw.PullCount||o===Rw.PhaseIndicator||o===Rw.BossHP||o===Rw.BossResource?r.createElement("div",{className:"live-fight-data__horizontal-left-panel"},void 0===o||o===Rw.BossResources||o===Rw.CombatTime||o===Rw.BestPull||o===Rw.PullCount?r.createElement("div",{className:"live-fight-data__horizontal-top-values"},void 0===o||o===Rw.BossResources?r.createElement(zw,{title:"BOSS HP",value:(N=h,N.toFixed(1)+"%"),layout:i,state:_||w?"inactive":void 0}):null,void 0===o||o===Rw.CombatTime?r.createElement(zw,{title:"COMBAT",value:u??"0:00",layout:i,state:_||w?"inactive":void 0}):null,void 0===o||o===Rw.BestPull?r.createElement(zw,{title:"BEST PULL",value:E,layout:i,state:_?"inactive":void 0}):null,void 0===o||o===Rw.PullCount?r.createElement(zw,{title:"# PULLS",value:p.pullCountToDisplay.toString(),layout:i,state:_?"inactive":void 0}):null):null,void 0===o||o===Rw.PhaseIndicator?r.createElement("div",{className:"live-fight-data__horizontal-phase-indicators "+(_||w?"live-fight-data__horizontal-phase-indicators--inactive":"")},f.map(((e,t)=>r.createElement(Fw,{key:t.toString()+e.name,index:t,totalPhaseCount:f.length,state:t<k?"past":t===k?"active":"upcoming",title:e.shortPhaseLabel})))):null,void 0===o||o===Rw.BossHP?r.createElement("div",{className:"live-fight-data__horizontal-hp-bar"},r.createElement(Mw,{healthBar:v,layout:i,displayedTitle:n?.encounterName??"Boss",state:_||w?"inactive":"active"})):null,o===Rw.BossResource?r.createElement("div",{className:"live-fight-data__horizontal-boss-resource-bar"},r.createElement(Mw,{resourceBar:y,layout:i,state:_||w?"inactive":"active"})):null):null,void 0===o||o===Rw.BloodlustTimer||o===Rw.BattleRez||o===Rw.DeathsCount?r.createElement("div",{className:"live-fight-data__horizontal-right-panel"},void 0===o||o===Rw.BloodlustTimer?r.createElement(Ow,{liveFightData:t,game:m,layout:"horizontal-stacked"}):null,void 0===o||o===Rw.BattleRez?r.createElement(zw,{title:"BREZ",value:Math.floor(t?.combatRezzesAvailable??2).toString(),iconUrl:`${m?.assetServerBaseUrl}/img/warcraft/abilities/spell_nature_reincarnation.jpg`,layout:"horizontal-stacked",state:_||w?"inactive":0===t?.combatRezzesAvailable?"used":void 0}):null,void 0===o||o===Rw.DeathsCount?r.createElement(zw,{title:"DEATHS",value:Math.floor(t?.deathsCount??0).toString(),iconUrl:`${m?.assetServerBaseUrl}/img/warcraft/abilities/ability_rogue_feigndeath.jpg`,layout:"horizontal-stacked",state:_||w?"inactive":0===t?.combatRezzesAvailable?"used":void 0}):null):null)));var N}const $w={duration:40,cooldown:600};function Ow(e){let{layout:t,liveFightData:n,game:a}=e;const[l,i]=(0,r.useState)({iconClassName:"ready",iconTimerLabel:void 0,iconTimerLabelRaw:void 0});return(0,r.useEffect)((()=>{if(!n||!n.inProgress||0===n.heroisms.length)return void i({iconClassName:"ready",iconTimerLabel:void 0,iconTimerLabelRaw:void 0});const e=n.heroisms[n.heroisms.length-1],t=n.startTime+e.timestamp,a=n.endTime;if(t>a)return;const r=n.startTime+e.timestamp+$w.duration;if(a>=t&&a<=r){const e=r-a;return void i({iconClassName:"active",iconTimerLabel:e,iconTimerLabelRaw:e})}const l=n.startTime+e.timestamp+$w.cooldown-a;i(l>=0?{iconClassName:"on-cooldown",iconTimerLabel:xw(l),iconTimerLabelRaw:l}:{iconClassName:"ready",iconTimerLabel:void 0,iconTimerLabelRaw:void 0})}),[n]),r.createElement(zw,Iw({layout:t,value:"",title:"BL",iconUrl:`${a?.assetServerBaseUrl}/img/warcraft/abilities/spell_nature_bloodlust.jpg`},l))}function zw(e){let{title:t,longTitle:n,iconUrl:a,value:l,subtitle:i,state:s,layout:o,isValueSmallFont:c,isValueTinyFont:u,valueStyle:d,iconClassName:m="",iconTimerLabel:p,iconTimerLabelRaw:g}=e;const h="horizontal"===o&&n?.length?n:t,f=void 0!==p,b=a?.length,E=f?r.createElement("div",{className:"live-fight-data_timer-icon-container"},b?r.createElement("img",{className:"live-fight-data__icon "+(m?`live-fight-data__icon--${m}`:""),src:a,alt:""}):null,r.createElement("span",{className:`live-fight-data__icon-timer live-fight-data__icon-timer--${m}`,"data-timer":g},p)):b?r.createElement("img",{className:"live-fight-data__icon "+(m?`live-fight-data__icon--${m}`:""),src:a,alt:""}):null,v="horizontal-stacked"!==o?r.createElement(r.Fragment,null,r.createElement("div",{className:"live-fight-data__title"},h),E,l&&r.createElement("div",{className:`live-fight-data__value ${c?"live-fight-data__value--small":""} ${u?"live-fight-data__value--tiny":""} ${a?.length&&"horizontal"!==o?"":"live-fight-data__value--no-image"}`,style:d},l),i?.length&&"horizontal"!==o?r.createElement("div",{className:"live-fight-data__subtitle"},i):null):r.createElement(r.Fragment,null,E,r.createElement("div",{className:"live-fight-data__horizontal-stack-wrapper"},r.createElement("div",{className:"live-fight-data__title"},h),r.createElement("div",{className:"live-fight-data__value"},l)));return r.createElement("div",{className:`live-fight-data__wrapper live-fight-data--${o} ${s?"live-fight-data--"+s:""}`},v)}function Fw(e){let{index:t,title:n,totalPhaseCount:a,state:l}=e,i=0;if(1===a)i=3;else if(0===t)i=0;else if(t===a-1)i=6;else switch(a){case 3:i=3;break;case 4:i=2*t;break;case 5:i=t+1;break;case 7:case 6:i=t}return r.createElement("div",{className:`live-fight-data__phase-indicator__wrapper live-fight-data__phase-indicator--phase-${i}  live-fight-data__phase-indicator--state-${l}`},r.createElement("svg",{viewBox:"0 0 12 30",height:"100%"},r.createElement("path",{d:"M0 0 L12 15 L0 30 L12 30 L12 0 Z",className:"live-fight-data__phase-indicator__side-fill"}),r.createElement("path",{d:"M12 1 L1 1 L12 15 L1 29 L12 29",className:"live-fight-data__phase-indicator__side-stroke"})),r.createElement("div",{className:"live-fight-data__phase-indicator__content"},n),r.createElement("svg",{viewBox:"0 0 12 30",height:"100%"},r.createElement("path",{d:"M0 0 L12 15 L0 30 Z",className:"live-fight-data__phase-indicator__side-fill"}),r.createElement("path",{d:"M1 1 L12 14 L1 29",className:"live-fight-data__phase-indicator__side-stroke"})))}function Mw(e){let{displayedTitle:t,layout:n,healthBar:a,resourceBar:l,state:i}=e;const s="vertical"===n;return r.createElement("div",{className:`live-fight-data__bars__wrapper live-fight-data__bars--${n} live-fight-data__bars--${i}`},t&&r.createElement("div",{className:"live-fight-data__title live-fight-data__bars__title"},t),r.createElement("div",{className:"live-fight-data__bars__inner"},a&&r.createElement(Dw,Iw({},a,{layout:n})),l&&r.createElement(Dw,Iw({},l,{layout:n}))),a&&s&&r.createElement(r.Fragment,null,r.createElement("div",{className:"live-fight-data__bars__health-title"},Math.trunc(a.value),"%"),r.createElement("div",{className:"live-fight-data__bars__health-absolute"},(o=a.absoluteValue)>=1e9?`${(o/1e9).toFixed(2)}B`:o>=1e6?`${(o/1e6).toFixed(1)}M`:`${(o/1e3).toFixed(1)}K`)));var o}function Dw(e){let{title:t,value:n,type:a,layout:l}=e;const i="vertical"===l;return r.createElement("div",{className:`live-fight-data__bar__wrapper live-fight-data__bar--${l}`},i&&r.createElement("div",{className:"live-fight-data__bar__title"},t),r.createElement("div",{className:"live-fight-data__bar__bar-outer"},r.createElement("div",{className:`live-fight-data__bar__bar-inner live-fight-data__bar__bar-inner--${a}`,style:i?{transform:`scaleY(${n/100})`}:{transform:`scaleX(${n/100})`}})))}function Uw(){const e="false"!==Fa("testMode","false"),t=Fa("webSocketUrl"),[n,a]=(0,r.useState)(null),{progressRace:l}=Ba(),i=l?.guilds[0],s=i?.encounters.find((e=>e.id===n?.encounter.id)),o=Va(n?.encounter.id),c=(0,r.useCallback)((e=>{"set-live-fight-data"===e.data.type&&a(e.data.data)}),[]);return(0,r.useEffect)((()=>(window.addEventListener("message",c),()=>window.removeEventListener("message",c))),[c]),(0,r.useEffect)((()=>{if(t){const e=new WebSocket(t);return e.onmessage=e=>{a(JSON.parse(e.data))},()=>{e.close()}}}),[t]),r.createElement("div",{className:"live-fight-data-embed"},r.createElement("link",{href:"https://echo-backoffice-hidden-39209.vercel.app/rwf-widgets.css",rel:"stylesheet"}),r.createElement(Lw,{liveFightData:e?Bw:n,progressRace:e?Vw:s?{encounterName:s.name,pullCount:s.pullCount,bestPercent:s.bestPercent,bestPercentForDisplay:s.bestPercentForDisplay}:null,progressRaceEncounter:e?qw:o}))}sm(".live-fight-data-embed-container",(function(e){let{zoneId:t,game:n}=e;return r.createElement(Z,{game:n},r.createElement(Da,{zoneId:t},r.createElement(Uw,null)))}));const Bw=(e=>{const t=Math.floor(1e3*Math.random())/10,n=Math.floor(1e4*Math.random()),a=Math.floor(1e3*Math.random())/10;return e.encounter={id:2685,health:666907640*t,resource:n,bossPercentage:t,fightPercentage:a},e.currentPhaseIndex=Math.floor(4*Math.random()),e.combatRezzesAvailable=Math.floor(3*Math.random()),e.heroisms=[{timestamp:Math.floor(541*Math.random())}],e})({startTime:Math.round((new Date).getTime()/1e3)+2,endTime:Math.round((new Date).getTime()/1e3)+360,inProgress:!0,encounter:{id:2685,health:666907640,resource:60,bossPercentage:78,fightPercentage:55},currentPhaseIndex:2,deathsCount:2,combatRezzesAvailable:1,heroisms:[{timestamp:3}]}),Vw=(()=>{const e=Math.floor(101*Math.random());return{encounterName:"Test Encounter",pullCount:Math.floor(258*Math.random()),bestPercent:e,bestPercentForDisplay:`${Math.max(.4,e-4)}%`}})(),qw={id:2786,phases:[{index:0,name:"Moonkin of the Flame",isIntermission:!1},{index:1,name:"Fly Free",isIntermission:!0},{index:2,name:"Tree of the Flame",isIntermission:!1},{index:3,name:"Fly Free Pt 2",isIntermission:!0},{index:4,name:"Archdruid of the Flame",isIntermission:!1}],showPhaseProgressionLinesInFightPercentagePerPullChart:!1,splitEncounterProgressByDurationChartBarsIntoPhases:!1,shouldShowPhaseInPercentDisplay:!0}},48046:function(e,t,n){e.exports=n.p+"js/global/googleAnalytics.ad8fa776381e2af4.js"},75921:function(e,t,n){e.exports=n.p+"js/lang/lang-it.cfb4da76cae9c263.js"},15514:function(e,t,n){e.exports=n.p+"js/lang/lang-ja.9c0a3f21653ca40e.js"},96046:function(e,t,n){e.exports=n.p+"js/lang/lang-ko.28e4eb98ff2304ed.js"},65391:function(e,t,n){e.exports=n.p+"js/lang/lang-ru.cca85a0dc6b1a612.js"},32129:function(e,t,n){e.exports=n.p+"js/lang/lang-tw.83d1e701b8972c03.js"},86272:function(e,t,n){e.exports=n.p+"js/parser-warcraft.78476c4bb107736e.js"},57842:function(e,t,n){e.exports=n.p+"js/parser-ff.bcbab7fecf1fc201.js"},16777:function(e,t,n){e.exports=n.p+"js/parser-eso.2ee98a2eb7103e38.js"},38946:function(e,t,n){e.exports=n.p+"js/parser-swtor.bc51d0abf3267898.js"},17019:function(e,t,n){e.exports=n.p+"js/log-parsers/parser-eso.2bd04f50250f3666.js"},70895:function(e,t,n){e.exports=n.p+"js/global.e2d50f007647660c.js"},76009:function(e,t,n){e.exports=n.p+"js/log-parsers/parser-ff.93f237dddff640b2.js"},83507:function(e,t,n){e.exports=n.p+"js/log-parsers/parser-swtor.c2246209822681dd.js"},78209:function(e,t,n){e.exports=n.p+"js/report.d5886b85be246af7.js"},12273:function(e,t,n){e.exports=n.p+"js/lang/js-localization.d7f7ef8a2c8848e7.js"},15571:function(e,t,n){e.exports=n.p+"js/lang/lang-br.9e0bb659d197e7de.js"},23119:function(e,t,n){e.exports=n.p+"js/lang/lang-cn.21b7ae6bbe3067bb.js"},16598:function(e,t,n){e.exports=n.p+"js/lang/lang-de.41b58292ef86225f.js"},41824:function(e,t,n){e.exports=n.p+"js/lang/lang-en.a208e8d62ef28e0b.js"},28295:function(e,t,n){e.exports=n.p+"js/lang/lang-es.bd123feea47f32d4.js"},54466:function(e,t,n){e.exports=n.p+"js/lang/lang-fr.0606736b08dcd4fe.js"}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[898],(function(){return t(13781),t(70895),t(78209),t(12273),t(15571),t(23119),t(16598),t(41824),t(28295),t(54466),t(75921),t(15514),t(96046),t(65391),t(32129),t(86272),t(57842),t(16777),t(38946),t(17019),t(76009),t(83507),t(48046)})),e.O()}]);
//# sourceMappingURL=app.c0df3d2de94ec5eb.js.map
</script>

</body>
</html>
