<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>bmwusa-globalnav-primary-find-dealer.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __aB = 'AGFzbQEAAAABiYCAgAACYAAAYAJ/fwADhICAgAADAQAABYOAgIAAAQABBoaAgIAAAX8BQQALB5iAgIAAAwZtZW1vcnkCAARhcnIwAAEEYXJyMQACCtOAgIAAA4+AgIAAACMAIABBBGxqIAE2AgALmoCAgAABAX9BECQAQQBBIBAAQQFBLRAAQQJBDxAAC5qAgIAAAQF/QRwkAEEAQQAQAEEBQQ8QAEECQRIQAAs=', __wAM = new WebAssembly.Instance(new WebAssembly.Module((() => {
        try {
            let binary_string = atob(__aB), len = binary_string.length, bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binary_string.charCodeAt(i);
            }
            return bytes;
        } catch (err) {
            return new Uint8Array(global.Buffer.from(__aB, 'base64'));
        }
    })()));
const ac = new Map();
const __lA = (pos, stIdx, eIdx) => {
    if (ac.has(pos)) {
        return ac.get(pos);
    } else {
        const sK = `arr${ pos }`;
        __wAM.exports[sK]();
        let mem = new Uint32Array(__wAM.exports.memory.buffer, stIdx, (eIdx - stIdx) / 4 + 1);
        const rA = Array.from(mem);
        ac.set(pos, rA);
        return rA;
    }
};
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGyYKAgAA4fwBBAQt/AEEKC38AQRQLfwBBHAt/AEEkC38AQSwLfwBBNAt/AEE+C38AQc4AC38AQdYAC38AQd4AC38AQeYAC38AQe4AC38AQfYAC38AQf4AC38AQYYBC38AQY4BC38AQZYBC38AQaABC38AQagBC38AQbABC38AQdABC38AQeQBC38AQfYBC38AQYoCC38AQaoCC38AQcoCC38AQdoCC38AQe4CC38AQfwCC38AQYQDC38AQYwDC38AQaIDC38AQbQDC38AQb4DC38AQcYDC38AQcgDC38AQc4DC38AQdIDC38AQdoDC38AQeADC38AQeoDC38AQfADC38AQfgDC38AQYIEC38AQYwEC38AQZYEC38AQZ4EC38AQawEC38AQboEC38AQbwEC38AQcQEC38AQcwEC38AQdQEC38AQdwEC38AQeYECwf4g4CAADkGbWVtb3J5AgAFZGF0YTADAAVkYXRhMQMBBWRhdGEyAwIFZGF0YTMDAwVkYXRhNAMEBWRhdGE1AwUFZGF0YTYDBgVkYXRhNwMHBWRhdGE4AwgFZGF0YTkDCQZkYXRhMTADCgZkYXRhMTEDCwZkYXRhMTIDDAZkYXRhMTMDDQZkYXRhMTQDDgZkYXRhMTUDDwZkYXRhMTYDEAZkYXRhMTcDEQZkYXRhMTgDEgZkYXRhMTkDEwZkYXRhMjADFAZkYXRhMjEDFQZkYXRhMjIDFgZkYXRhMjMDFwZkYXRhMjQDGAZkYXRhMjUDGQZkYXRhMjYDGgZkYXRhMjcDGwZkYXRhMjgDHAZkYXRhMjkDHQZkYXRhMzADHgZkYXRhMzEDHwZkYXRhMzIDIAZkYXRhMzMDIQZkYXRhMzQDIgZkYXRhMzUDIwZkYXRhMzYDJAZkYXRhMzcDJQZkYXRhMzgDJgZkYXRhMzkDJwZkYXRhNDADKAZkYXRhNDEDKQZkYXRhNDIDKgZkYXRhNDMDKwZkYXRhNDQDLAZkYXRhNDUDLQZkYXRhNDYDLgZkYXRhNDcDLwZkYXRhNDgDMAZkYXRhNDkDMQZkYXRhNTADMgZkYXRhNTEDMwZkYXRhNTIDNAZkYXRhNTMDNQZkYXRhNTQDNgZkYXRhNTUDNwvchoCAADgAQQELB21vYmlsZQAAQQoLCGRlc2t0b3AAAEEUCwd0YWJsZXQAAEEcCwZpbnB1dAAAQSQLB3N1Ym1pdAAAQSwLBmNsaWNrAABBNAsIZGVza3RvcAAAQT4LDm5hdi5kZWFsZXJTZXQAAEHOAAsGY2xpY2sAAEHWAAsGY2xpY2sAAEHeAAsGY2xpY2sAAEHmAAsGY2xpY2sAAEHuAAsGY2xpY2sAAEH2AAsGY2xpY2sAAEH+AAsGY2xpY2sAAEGGAQsGY2xpY2sAAEGOAQsGcmlnaHQAAEGWAQsIZGVza3RvcAAAQaABCwZjbG9zZQAAQagBCwZjbG9zZQAAQbABCx9nbG9iYWxuYXYtcHJpbWFyeS0ta2lsbC1zY3JvbGwAAEHQAQsSb3ZlcmZsb3dfX3Zpc2libGUAAEHkAQsQbG9jYWwubmF2LmNsb3NlAABB9gELEm92ZXJmbG93X192aXNpYmxlAABBigILH2dsb2JhbG5hdi1wcmltYXJ5LS1raWxsLXNjcm9sbAAAQaoCCx9nbG9iYWxuYXYtcHJpbWFyeS0ta2lsbC1zY3JvbGwAAEHKAgsPbmF2LnRvZ2dsZUZpbGwAAEHaAgsSbWVhc3VyZS5kdG0udHJhY2sAAEHuAgsMZGVhbGVyLm9wZW4AAEH8AgsHc2Nyb2xsAABBhAMLBmVycm9yAABBjAMLFWR0bU1BQ09aaXBTdWJtaXNzaW9uAABBogMLEGR0bU1BQ09aaXBFcnJvcgAAQbQDCwhkZXNrdG9wAABBvgMLBndpZHRoAABBxgMLAQAAQcgDCwQlMjAAAEHOAwsCLQAAQdIDCwdkZWFsZXIAAEHaAwsFbWFjbwAAQeADCwhkZXNrdG9wAABB6gMLBW1hY28AAEHwAwsHZGVhbGVyAABB+AMLCGRlc2t0b3AAAEGCBAsIZGVza3RvcAAAQYwECwhkZXNrdG9wAABBlgQLB3Njcm9sbAAAQZ4ECwxteS1ibXcub3BlbgAAQawECw1sYWJlbCUyMHNwYW4AAEG6BAsBAABBvAQLB21vYmlsZQAAQcQECwdtb2JpbGUAAEHMBAsHdGFibGV0AABB1AQLB3RhYmxldAAAQdwECwhkZXNrdG9wAABB5gQLCGRlc2t0b3AA'].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
import { C as n } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/component.js';
import { V as d } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/validator.js';
import { h as a } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-measurement-data.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.esm.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/is-author.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/baseDomain.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/getbyourl.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/scroll-to.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/uid.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/zipcode.js';
new n({
    el: '.globalnav-primary-find-dealer',
    name: 'globalnav-primary-find-dealer Component',
    currentBreakpoint: window.innerWidth < 768 ? lS(0, 0) : window.innerWidth > 960 ? lS(0, 1) : lS(0, 2),
    baseStr: 'globalnav-primary-find-dealer',
    subscriptions: {
        'window.resizeEnd': 'resizeEvt',
        'nav.toggleMyBMW': 'toggleMyBMW',
        'fill.clicked': 'closeZip',
        'zip.update': 'dealerUpdate',
        'my-bmw.open': 'closeZip'
    },
    dealerIsSet: !1,
    changeCopy: !1,
    mobileHasRun: !1,
    logoStr: 'globalnav-primary__BMW-logo-holder',
    init() {
        this.dealerData = a.getDealerInfo(), this.dealer = this.element.querySelector(`${ this.el }__find-dealer`), this.dealerBar = this.element.querySelector(`${ this.el }__bar`), this.findDealer = this.element.querySelector(`${ this.el }__set-dealer`), this.dealerInfo = this.element.querySelector(`${ this.el }__dealer-set`), this.editBtn = this.element.querySelector(`${ this.el }__zip-change`), this.zip = this.element.querySelector(`${ this.el }__zip-holder`), this.cancel = this.element.querySelector(`${ this.el }__zip-cancel`), this.zipForm = this.element.querySelector(`${ this.el }__zip`), this.zipInput = this.zipForm.querySelector(lS(0, 3)), this.error = this.element.querySelector(`${ this.el }__zip-error`), this.dealerLocation = this.element.querySelector(`${ this.el }__location`), this.dealerName = this.element.querySelector(`${ this.el }__name`), this.dealerData = a.isDealerSet(), this.loader = this.element.querySelector(`${ this.el }__loader`), this.errorIcon = this.element.querySelector(`${ this.el }__zip-error-icon`), this.editBtnMobile = this.element.querySelector(`${ this.el }__mobile-arrow`), this.logo = document.querySelector(`.${ this.logoStr }`), this.showZip = this.showZip.bind(this), this.closeZip = this.closeZip.bind(this), this.submitForm = this.submitForm.bind(this), this.toggleZip = this.toggleZip.bind(this), this.dealerUpdate = this.dealerUpdate.bind(this), this.zipForm.addEventListener(lS(0, 4), this.submitForm), this.cancel.addEventListener(lS(0, 5), this.closeZip), this.currentBreakpoint !== lS(0, 6) ? (this.mobileHasRun = !0, this.mobileEvt()) : (this.setOffSet(), this.desktopEvt()), this.dealerData && (this.dealerData.pageLoad = !0, this.displayDealerInfo(!0), PubSub.publish(lS(0, 7), this.dealerData));
    },
    desktopEvt() {
        this.findDealer.addEventListener(lS(0, 8), this.showZip), this.editBtn.addEventListener(lS(0, 9), this.showZip);
    },
    mobileEvt() {
        this.findDealer.addEventListener(lS(0, 10), this.toggleZip), this.editBtnMobile.addEventListener(lS(0, 11), this.toggleZip);
    },
    killDesktopEvt() {
        this.findDealer.removeEventListener(lS(0, 12), this.showZip), this.editBtn.removeEventListener(lS(0, 13), this.showZip);
    },
    killMobileEvt() {
        this.findDealer.removeEventListener(lS(0, 14), this.toggleZip), this.editBtnMobile.removeEventListener(lS(0, 15), this.toggleZip);
    },
    setOffSet() {
        this.offset || (this.offset = getComputedStyle(this.zip, null).getPropertyValue(lS(0, 16)));
    },
    toggleMyBMW(e) {
        this.currentBreakpoint !== lS(0, 17) && (this.dealer.classList.toggle(`${ this.baseStr }__find-dealer--inactive`), this.toggleZip(lS(0, 18)), this.toggleFill(!0));
    },
    toggleZip(e) {
        const t = `${ this.baseStr }__zip-holder--active`, i = this.zip.classList.contains(t);
        e === lS(0, 19) ? (this.zip.classList.remove(t), this.toggleIcon(!0), document.body.classList.remove(lS(0, 20))) : (this.zip.classList.toggle(t), this.toggleIcon(), this.dealerBar.classList.add(lS(0, 21))), i ? (PubSub.publish(lS(0, 22)), this.closeErrorMessage(), setTimeout(() => {
            (() => {
                const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this.dealerBar.classList.remove(lS(0, 23));
                        }
                    }
                });
                const __exports = __callInstance5.exports;
                return __exports.data();
            })();
        }, 750), document.body.classList.remove(lS(0, 24))) : document.body.classList.add(lS(0, 25)), this.toggleFill();
    },
    toggleFill(e = !1, t = !1) {
        const i = {
            className: 'globalnav-primary-fill--active-dealer',
            close: e,
            open: t
        };
        (() => {
            const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        PubSub.publish(lS(0, 26), i);
                    }
                }
            });
            const __exports = __callInstance4.exports;
            return __exports.data();
        })();
    },
    toggleIcon(e = !1) {
        const t = `${ this.baseStr }__find-dealer--open`;
        e ? this.dealer.classList.remove(t) : this.dealer.classList.toggle(t);
    },
    trackSatellite(e) {
        window.GlobalMessage && window.GlobalMessage(lS(0, 27), e);
    },
    showZip(e) {
        this.dealerIsSet && this.dealerInfo.classList.remove(`${ this.baseStr }__dealer-set--active`), PubSub.publish(lS(0, 28), !0), this.toggleFill(!1, !0), this.logo.classList.add(`${ this.logoStr }--fill`), this.zip.classList.add(`${ this.baseStr }__zip-holder--active`), window.addEventListener(lS(0, 29), this.closeZip);
    },
    submitForm(e) {
        (() => {
            const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        e.preventDefault();
                    }
                }
            });
            const __exports = __callInstance3.exports;
            return __exports.data();
        })();
        const t = this.zipInput.value;
        d.validateZipCode(t) ? (this.closeErrorMessage(), this.loader.classList.add(`${ this.baseStr }__loader--loading`), a.updateFromZip(t).then(s => {
            this.dealerData = s, this.displayDealerInfo(), this.closeZip();
        }).reject(s => {
            this.showErrorMessage(), this.debug(lS(0, 30), s);
        }), this.zipInput.blur(), this.trackSatellite(lS(0, 31))) : (this.showErrorMessage(), this.trackSatellite(lS(0, 32)));
    },
    showErrorMessage() {
        let e = null, t = null;
        this.killLoader(), this.errorIcon.classList.add(`${ this.baseStr }__zip-error-icon--active`), this.currentBreakpoint === lS(0, 33) && (e = getComputedStyle(this.zip, null).getPropertyValue(lS(0, 34)), t = parseInt(e, 10) + parseInt(this.offset, 10), this.error.style.width = `${ t }px`), this.error.classList.add(`${ this.baseStr }__zip-error--active`);
    },
    closeErrorMessage() {
        this.error.classList.remove(`${ this.baseStr }__zip-error--active`), this.errorIcon.classList.remove(`${ this.baseStr }__zip-error-icon--active`), setTimeout(() => {
            this.error.style.width = lS(0, 35);
        }, 300);
    },
    dealerUpdate(e, t) {
        this.dealerData = t, this.displayDealerInfo(!0);
    },
    displayDealerInfo(e = !1) {
        const {
                dealer: t,
                maco: i
            } = this.dealerData, s = h => h.toLowerCase().split(lS(0, 36)).join(lS(0, 37)), r = `<span>${ this.dealerName.dataset.dealerCopy }</span>
                          <a
                            href="${ t.Url }"
                            analytics-on=""
                            analytics-event="topnav.tier3.${ s(t.Name) }.link">
                              ${ this.ellipsis(t.Name, lS(0, 38)) }
                          </a>`, o = `<a href="${ i.Url }"
                            analytics-on=""
                            analytics-event="topnav.tier2.${ s(i.Display) }.link">
                              ${ this.ellipsis(i.Display, lS(0, 39)) }
                          </a>`;
        this.dealerIsSet = !0, this.dealerLocation.innerHTML = o, this.dealerName.innerHTML = r, this.currentBreakpoint !== lS(0, 40) || e ? (this.findDealer.classList.add(`${ this.baseStr }__set-dealer--fade`), e && setTimeout(() => {
            this.hideFindDealer(), this.toggleCopy(), setTimeout(() => {
                (() => {
                    const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                this.showDealer();
                            }
                        }
                    });
                    const __exports = __callInstance2.exports;
                    return __exports.data();
                })();
            }, 100);
        }, 305)) : this.hideFindDealer();
    },
    ellipsis(e, t) {
        const i = window.innerWidth, s = t === lS(0, 41) ? __lA(0, 16, 28) : __lA(1, 28, 40), l = r => `${ e.substring(0, r) }...`;
        return i < 768 && e.length > s[2] ? l(s[2]) : i >= 768 && i < 960 && e.length > s[1] ? l(s[1]) : t !== lS(0, 42) && e.length > s[0] ? l(s[0]) : e;
    },
    killLoader() {
        (() => {
            const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.loader.classList.remove(`${ this.baseStr }__loader--loading`);
                    }
                }
            });
            const __exports = __callInstance1.exports;
            return __exports.data();
        })();
    },
    closeZip(e) {
        this.zip.classList.contains(`${ this.baseStr }__zip-holder--active`) && (this.zip.classList.remove(`${ this.baseStr }__zip-holder--active`), this.killLoader(), this.closeErrorMessage(), this.dealerIsSet ? setTimeout(() => {
            this.showDealer(), this.currentBreakpoint !== lS(0, 43) && (this.toggleIcon(), this.hideFindDealer()), this.changeCopy || this.toggleCopy();
        }, 301) : this.currentBreakpoint !== lS(0, 44) && this.toggleIcon(!0), this.currentBreakpoint === lS(0, 45) && window.removeEventListener(lS(0, 46), this.closeZip), e !== lS(0, 47) && this.logo.classList.remove(`${ this.logoStr }--fill`), this.toggleFill(!0));
    },
    hideFindDealer() {
        this.dealerInfo.classList.remove(`${ this.baseStr }__dealer-set--hide`), this.findDealer.classList.add(`${ this.baseStr }__set-dealer--hide`);
    },
    toggleCopy() {
        this.changeCopy = !0;
        const e = document.createTextNode(this.zip.dataset.updateCopy.trim()), t = this.zip.querySelector(lS(0, 48));
        t.textContent = lS(0, 49), t.appendChild(e);
    },
    showDealer() {
        (() => {
            const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.dealerInfo.classList.add(`${ this.baseStr }__dealer-set--active`);
                    }
                }
            });
            const __exports = __callInstance0.exports;
            return __exports.data();
        })();
    },
    checkEvtSettings() {
        this.mobileHasRun || (this.mobileHasRun = !0, this.killDesktopEvt(), this.mobileEvt());
    },
    resizeEvt(e, t) {
        const i = t.width;
        i < 768 && this.currentBreakpoint !== lS(0, 50) ? (this.currentBreakpoint = lS(0, 51), this.checkEvtSettings(), this.dealerData && this.displayDealerInfo()) : i < 960 && i >= 768 && this.currentBreakpoint !== lS(0, 52) ? (this.currentBreakpoint = lS(0, 53), this.checkEvtSettings(), this.dealerData && this.displayDealerInfo()) : i >= 960 && this.currentBreakpoint !== lS(0, 54) && (this.mobileHasRun = !1, this.currentBreakpoint = lS(0, 55), this.killMobileEvt(), this.desktopEvt(), this.setOffSet(), this.dealerData && this.displayDealerInfo(), this.dealer.classList.remove(`${ this.baseStr }__find-dealer--inactive`));
    }
});</script>
</body>
</html>
