<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tip.html</title>
</head>
<body>

<script>
define("ii/widget/tip",[],function(){"use strict";function l(e){if(i.getLength()){var t=i.get();t&&t.isVisible&&($(e.target).closest(s).length||t.close())}}var e="ttip",t=LMDA.Utils.getEventsNamesMap(e),n={disabled:"ii-blocked",container:e,wrapper:e+"__wrapper",arrow:e+"__arrow",content:e+"__content",btnClose:e+"__close",visible:e+"_visible",contentInfo:e+"__content_info",contentError:e+"__content_error"},r=['<div class="',n.container,'">','<div class="',n.wrapper,'">','<div class="',n.arrow,'"></div>','<div class="',n.content,'" data-easter="ðŸ°"></div>',"</div>","</div>"].join(""),i=new LMDA.Utils.ModalsStack,s=$(r).hide().attr("tabindex","-1").appendTo(LMDA.$body||"body").on(t.click,'[data-action="close"]',function(e){return e.preventDefault(),i.get().close()}),o=s.find([".",n.content].join("")),u=s.find([".",n.arrow].join("")),a=s.find([".",n.wrapper].join("")),f=s.get(0);return LMDA.$document.on(t.keydown,function(e){e.keyCode===27&&i.getLength()&&i.get().close()}),LMDA.$window.on([t.resize,t.scroll].join(" "),function(){i.getLength()&&i.get().updatePosition()}),LMDA.Events.on(LMDA.Events.CLOSE_TOOLTIPS,function(){i.getLength()&&i.get().close()}),LMDA.Views.BaseView.extend({defaults:{evt:t,cn:{hidden:"ttip_hidden",visible:"ttip_visible"},cnArrowDirections:{top:"ttip__arrow_t",right:"ttip__arrow_r",bottom:"ttip__arrow_b",left:"ttip__arrow_l"},arrow:{size:12},offset:10,place:"top",zIndex:null,preset:null},initialize:function(){return this.init&&this.init(),this},init:function(){var e=this;return this.o.offset+=this.o.arrow.size*.5,this.isMouseHovered=!1,this.isVisible=!1,this.isDisabled=!1,this.currentPosition=null,this.CN_ARROW_DIRECTIONS=[this.o.cnArrowDirections.top,this.o.cnArrowDirections.right,this.o.cnArrowDirections.bottom,this.o.cnArrowDirections.left].join(" "),s.on(this.o.evt.mouseenter,function(){e.isMouseHovered=!0,e.trigger("mouseenter")}).on(this.o.evt.mouseleave,function(){e.isMouseHovered=!1,e.trigger("mouseleave")}),this},updatePosition:function(){return this.isVisible&&this.setPosition(),this},setContent:function(t,r){return this.isDisabled&&this.enable(),this.trigger("beforeRender",this,o),s.removeClass().addClass([n.container,e+"_"+this.o.preset].join(" ")),o.removeClass().addClass([n.content,r||""].join(" ")).html(t),this.tipBounds=LMDA.Utils.getHiddenElementSizes(s),this.trigger("afterRender",this,o),this},close:function(){return this.isVisible?(LMDA.$document.off(t.click,l),this.options.permanent!==!0&&i.pop(),this.trigger("beforeClose"),s.hide().removeClass().addClass(n.container),o.html(""),this.isMouseHovered=!1,this.isVisible=!1,this.trigger("close"),this):this},open:function(e,r){if(!e)return;e=e.get?e.get(0):e;if(e.offsetWidth===0&&e.offsetHeight===0)return;this.currentTarget=e,this.currentPosition=r;if(this.isVisible)return this._offOutsideClick&&this._offOutsideClick(s,this.close,this),this.updatePosition(),this._onOutsideClick&&this._onOutsideClick(s,this.close,this),this;this.isVisible=!0;if(i.getLength()){var u=this,a=i.get();if(a!==this)return a.once("close",function(){u.open.apply(u,arguments)}),a.close(),this}return this.options.permanent!==!0&&i.push(this),LMDA.$document.off(t.click,l),window.setTimeout(function(){LMDA.$document.on(t.click,l)},0),this.trigger("beforeOpen",o),this.setPosition(),s.css("z-index",this.o.zIndex||LMDA.Utils.pageManager.currentZindex+10).show().addClass(n.visible),this.trigger("open",o),this},show:function(e,t,n){return this.setContent(t),this.open(e||this.elTrigger,n)},error:function(e,t,r){this.setContent(t,n.contentError);if(e){var i=$(e),s=this;this.once("open",function(){s.once("close",function(){i.removeClass("is_invalid")}),i.addClass("is_invalid").one("blur.Tooltip",function(){s.close()})})}return this.open(e||this.elTrigger,r)},info:function(e,t,r){return this.setContent(t,n.contentInfo),this.open(e||this.elTrigger,r)},bindHover:function(e){function a(){r&&window.clearTimeout(r);if(n)return;n=!0,e.cb?e.cb(u):u(e.content)}function f(o){r=window.setTimeout(function(){t.isMouseHovered?(n=!1,t.once("mouseleave",function(){t.close(),s.removeClass(i)})):(n=!1,t.close(),s.removeClass(i))},e.msDelayHide)}e.msDelayHide=e.msDelayHide||100;var t=this,n=!1,r=null,i="i_hovered",s=e.element,o=s.get(0),u=function(n){if(!n)return!1;var r=_.isFunction(n)?n():n;s.addClass(i),t.setContent(r),t.open(o,e.place)};return s.off([this.o.evt.mouseenter,this.o.evt.mouseleave].join(" ")).on(this.o.evt.mouseenter,a).on(this.o.evt.mouseleave,f),this},invertPosition:function(e){switch(e[0]){case"top":e[0]="bottom";break;case"bottom":e[0]="top"}return e},setPosition:function(){if(!this.isVisible||_.isEmpty(this.tipBounds))return this;var e=LMDA.Utils.getElementBounds(this.currentTarget),t=LMDA.Utils.getViewportBounds(),n=this.currentPosition.split("-"),r=this.suggestByBounds(e,this.currentPosition);if(r.top-t.top<0||t.bottom-r.bottom<0)n=this.invertPosition(n),r=this.suggestByBounds(e,n.join("-"));var i="";switch(n[0]){case"top":i=this.o.cnArrowDirections.bottom;break;case"left":i=this.o.cnArrowDirections.right;break;case"right":i=this.o.cnArrowDirections.left;break;case"bottom":i=this.o.cnArrowDirections.top}u.removeClass(this.CN_ARROW_DIRECTIONS).addClass(i);var o={left:"",top:""};switch(n[1]){case"top":o.top=this.o.arrow.size*2;break;case"bottom":o.top=this.tipBounds.height-this.o.arrow.size*2;break;case"left":o.left=this.o.arrow.size*2;break;case"right":o.left=this.tipBounds.width-this.o.arrow.size*2;break;default:}return u.css(o),s.css({left:r.left,top:r.top}),this},suggestByBounds:function(e,t){var n=e.left,r=e.top;switch(t){case"top":n+=e.hWidth-this.tipBounds.hWidth,r-=this.tipBounds.height;break;case"top-right":n+=e.width-this.tipBounds.width,r-=this.tipBounds.height;break;case"top-left":r-=this.tipBounds.height;break;case"bottom":n+=e.hWidth-this.tipBounds.hWidth,r+=e.height;break;case"bottom-right":n+=e.width-this.tipBounds.width+this.o.offset,r+=e.height;break;case"bottom-left":n-=this.o.offset,r+=e.height;break;case"right":n+=e.width,r+=e.hHeight-this.tipBounds.hHeight;break;case"right-top":n+=e.width,r-=this.o.offset;break;case"right-bottom":n+=e.width,r+=e.height-this.tipBounds.height+this.o.offset;break;case"left":n-=this.tipBounds.width,r+=e.hHeight-this.tipBounds.hHeight;break;case"left-top":n-=this.tipBounds.width,r-=this.o.offset;break;case"left-bottom":n-=this.tipBounds.width,r+=e.height-this.tipBounds.height+this.o.offset}return{left:n,top:r,right:n+this.tipBounds.width,bottom:r+this.tipBounds.height}},enable:function(){return o.removeClass(n.disabled),this.isDisabled=!1,this},disable:function(){return this.isDisabled=!0,o.addClass(n.disabled),this}})});
</script>

</body>
</html>
