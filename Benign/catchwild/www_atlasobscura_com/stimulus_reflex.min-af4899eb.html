<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stimulus_reflex.min-af4899eb.html</title>
</head>
<body>

<script>
import{C as Tt}from"./index-c8557f21.js";var qe=11;function Ct(e,t){var n=t.attributes,r,o,i,s,m;if(!(t.nodeType===qe||e.nodeType===qe)){for(var h=n.length-1;h>=0;h--)r=n[h],o=r.name,i=r.namespaceURI,s=r.value,i?(o=r.localName||o,m=e.getAttributeNS(i,o),m!==s&&(r.prefix==="xmlns"&&(o=r.name),e.setAttributeNS(i,o,s))):(m=e.getAttribute(o),m!==s&&e.setAttribute(o,s));for(var g=e.attributes,b=g.length-1;b>=0;b--)r=g[b],o=r.name,i=r.namespaceURI,i?(o=r.localName||o,t.hasAttributeNS(i,o)||e.removeAttributeNS(i,o)):t.hasAttribute(o)||e.removeAttribute(o)}}var me,$t="http://www.w3.org/1999/xhtml",R=typeof document>"u"?void 0:document,Rt=!!R&&"content"in R.createElement("template"),It=!!R&&R.createRange&&"createContextualFragment"in R.createRange();function Ot(e){var t=R.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function Lt(e){me||(me=R.createRange(),me.selectNode(R.body));var t=me.createContextualFragment(e);return t.childNodes[0]}function kt(e){var t=R.createElement("body");return t.innerHTML=e,t.childNodes[0]}function Nt(e){return e=e.trim(),Rt?Ot(e):It?Lt(e):kt(e)}function he(e,t){var n=e.nodeName,r=t.nodeName,o,i;return n===r?!0:(o=n.charCodeAt(0),i=r.charCodeAt(0),o<=90&&i>=97?n===r.toUpperCase():i<=90&&o>=97?r===n.toUpperCase():!1)}function _t(e,t){return!t||t===$t?R.createElement(e):R.createElementNS(t,e)}function Dt(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}function Re(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var We={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();r==="OPTGROUP"&&(n=n.parentNode,r=n&&n.nodeName.toUpperCase()),r==="SELECT"&&!n.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}Re(e,t,"selected")},INPUT:function(e,t){Re(e,t,"checked"),Re(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var o=r.nodeValue;if(o==n||!n&&o==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n=-1,r=0,o=e.firstChild,i,s;o;)if(s=o.nodeName&&o.nodeName.toUpperCase(),s==="OPTGROUP")i=o,o=i.firstChild;else{if(s==="OPTION"){if(o.hasAttribute("selected")){n=r;break}r++}o=o.nextSibling,!o&&i&&(o=i.nextSibling,i=null)}e.selectedIndex=n}}},Z=1,Ve=11,Be=3,Xe=8;function U(){}function Pt(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Mt(e){return function(n,r,o){if(o||(o={}),typeof r=="string")if(n.nodeName==="#document"||n.nodeName==="HTML"||n.nodeName==="BODY"){var i=r;r=R.createElement("html"),r.innerHTML=i}else r=Nt(r);else r.nodeType===Ve&&(r=r.firstElementChild);var s=o.getNodeKey||Pt,m=o.onBeforeNodeAdded||U,h=o.onNodeAdded||U,g=o.onBeforeElUpdated||U,b=o.onElUpdated||U,v=o.onBeforeNodeDiscarded||U,x=o.onNodeDiscarded||U,C=o.onBeforeElChildrenUpdated||U,k=o.skipFromChildren||U,H=o.addChild||function(a,l){return a.appendChild(l)},F=o.childrenOnly===!0,N=Object.create(null),B=[];function O(a){B.push(a)}function ae(a,l){if(a.nodeType===Z)for(var S=a.firstChild;S;){var f=void 0;l&&(f=s(S))?O(f):(x(S),S.firstChild&&ae(S,l)),S=S.nextSibling}}function P(a,l,S){v(a)!==!1&&(l&&l.removeChild(a),x(a),ae(a,S))}function z(a){if(a.nodeType===Z||a.nodeType===Ve)for(var l=a.firstChild;l;){var S=s(l);S&&(N[S]=l),z(l),l=l.nextSibling}}z(n);function Y(a){h(a);for(var l=a.firstChild;l;){var S=l.nextSibling,f=s(l);if(f){var y=N[f];y&&he(l,y)?(l.parentNode.replaceChild(y,l),ce(y,l)):Y(l)}else Y(l);l=S}}function St(a,l,S){for(;l;){var f=l.nextSibling;(S=s(l))?O(S):P(l,a,!0),l=f}}function ce(a,l,S){var f=s(l);f&&delete N[f],!(!S&&(g(a,l)===!1||(e(a,l),b(a),C(a,l)===!1)))&&(a.nodeName!=="TEXTAREA"?At(a,l):We.TEXTAREA(a,l))}function At(a,l){var S=k(a,l),f=l.firstChild,y=a.firstChild,X,_,G,de,M;e:for(;f;){for(de=f.nextSibling,X=s(f);!S&&y;){if(G=y.nextSibling,f.isSameNode&&f.isSameNode(y)){f=de,y=G;continue e}_=s(y);var fe=y.nodeType,j=void 0;if(fe===f.nodeType&&(fe===Z?(X?X!==_&&((M=N[X])?G===M?j=!1:(a.insertBefore(M,y),_?O(_):P(y,a,!0),y=M,_=s(y)):j=!1):_&&(j=!1),j=j!==!1&&he(y,f),j&&ce(y,f)):(fe===Be||fe==Xe)&&(j=!0,y.nodeValue!==f.nodeValue&&(y.nodeValue=f.nodeValue))),j){f=de,y=G;continue e}_?O(_):P(y,a,!0),y=G}if(X&&(M=N[X])&&he(M,f))S||H(a,M),ce(M,f);else{var $e=m(f);$e!==!1&&($e&&(f=$e),f.actualize&&(f=f.actualize(a.ownerDocument||R)),H(a,f),Y(f))}f=de,y=G}St(a,y,_);var ze=We[a.nodeName];ze&&ze(a,l)}var T=n,ue=T.nodeType,Fe=r.nodeType;if(!F){if(ue===Z)Fe===Z?he(n,r)||(x(n),T=Dt(n,_t(r.nodeName,r.namespaceURI))):T=r;else if(ue===Be||ue===Xe){if(Fe===ue)return T.nodeValue!==r.nodeValue&&(T.nodeValue=r.nodeValue),T;T=r}}if(T===r)x(n);else{if(r.isSameNode&&r.isSameNode(T))return;if(ce(T,r,F),B)for(var Te=0,Et=B.length;Te<Et;Te++){var Ce=N[B[Te]];Ce&&P(Ce,Ce.parentNode,!1)}}return!F&&T!==n&&n.parentNode&&(T.actualize&&(T=T.actualize(n.ownerDocument||R)),n.parentNode.replaceChild(T,n)),T}}var at=Mt(Ct),jt="5.0.0-pre9";const Ut={INPUT:!0,TEXTAREA:!0,SELECT:!0},Ht={INPUT:!0,TEXTAREA:!0,OPTION:!0},Ft={"datetime-local":!0,"select-multiple":!0,"select-one":!0,color:!0,date:!0,datetime:!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,textarea:!0,time:!0,url:!0,week:!0};let Ge;var le={get element(){return Ge},set(e){Ge=e}};const zt=e=>Ut[e.tagName]&&Ft[e.type],I=e=>{const t=(e&&e.nodeType===Node.ELEMENT_NODE?e:document.querySelector(e))||le.element;t&&t.focus&&t.focus()},K=(e,t,n={})=>{const r=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e.dispatchEvent(r),window.jQuery&&window.jQuery(e).trigger(t,n)},qt=e=>document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,Wt=e=>{const t=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),n=[];for(let r=0;r<t.snapshotLength;r++)n.push(t.snapshotItem(r));return n},Qe=e=>Array(e).flat(),A=(e,t)=>{Array.from(e.selectAll?e.element:[e.element]).forEach(t)},ct=e=>e.split("").map((t,n)=>t.toUpperCase()===t?`${n!==0?"-":""}${t.toLowerCase()}`:t).join(""),c=(e,t)=>!e.cancel&&(e.delay?setTimeout(t,e.delay):t(),!0),u=(e,t)=>K(e,`cable-ready:before-${ct(t.operation)}`,t),d=(e,t)=>K(e,`cable-ready:after-${ct(t.operation)}`,t);function Vt(e,t){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}function Bt(e){if(!e.ok)throw Error(e.statusText);return e}async function ut(e,t){try{const n=await fetch(e,{headers:{"X-REQUESTED-WITH":"XmlHttpRequest",...t}});return n==null?void 0:(Bt(n),n)}catch{console.error(`Could not fetch ${e}`)}}const dt=e=>(t,n)=>!ft.map(r=>typeof r!="function"||r(e,t,n)).includes(!1),Xt=e=>t=>{mt.forEach(n=>{typeof n=="function"&&n(e,t)})},Gt=(e,t,n)=>!(!Ht[t.tagName]&&t.isEqualNode(n)),Qt=(e,t,n)=>t!==le.element||!t.isContentEditable,Jt=(e,t,n)=>{const{permanentAttributeName:r}=e;if(!r)return!0;const o=t.closest(`[${r}]`);if(!o&&t===le.element&&zt(t)){const i={value:!0};return Array.from(n.attributes).forEach(s=>{i[s.name]||t.setAttribute(s.name,s.value)}),!1}return!o},ft=[Gt,Jt,Qt],mt=[];var Kt={append:e=>{A(e,t=>{u(t,e),c(e,()=>{const{html:n,focusSelector:r}=e;t.insertAdjacentHTML("beforeend",n||""),I(r)}),d(t,e)})},graft:e=>{A(e,t=>{u(t,e),c(e,()=>{const{parent:n,focusSelector:r}=e,o=document.querySelector(n);o&&(o.appendChild(t),I(r))}),d(t,e)})},innerHtml:e=>{A(e,t=>{u(t,e),c(e,()=>{const{html:n,focusSelector:r}=e;t.innerHTML=n||"",I(r)}),d(t,e)})},insertAdjacentHtml:e=>{A(e,t=>{u(t,e),c(e,()=>{const{html:n,position:r,focusSelector:o}=e;t.insertAdjacentHTML(r||"beforeend",n||""),I(o)}),d(t,e)})},insertAdjacentText:e=>{A(e,t=>{u(t,e),c(e,()=>{const{text:n,position:r,focusSelector:o}=e;t.insertAdjacentText(r||"beforeend",n||""),I(o)}),d(t,e)})},morph:e=>{A(e,t=>{const{html:n}=e,r=document.createElement("template");r.innerHTML=String(n).trim(),e.content=r.content;const o=t.parentElement,i=Array.from(o.children).indexOf(t);u(t,e),c(e,()=>{const{childrenOnly:s,focusSelector:m}=e;at(t,s?r.content:r.innerHTML,{childrenOnly:!!s,onBeforeElUpdated:dt(e),onElUpdated:Xt(e)}),I(m)}),d(o.children[i],e)})},outerHtml:e=>{A(e,t=>{const n=t.parentElement,r=Array.from(n.children).indexOf(t);u(t,e),c(e,()=>{const{html:o,focusSelector:i}=e;t.outerHTML=o||"",I(i)}),d(n.children[r],e)})},prepend:e=>{A(e,t=>{u(t,e),c(e,()=>{const{html:n,focusSelector:r}=e;t.insertAdjacentHTML("afterbegin",n||""),I(r)}),d(t,e)})},remove:e=>{A(e,t=>{u(t,e),c(e,()=>{const{focusSelector:n}=e;t.remove(),I(n)}),d(document,e)})},replace:e=>{A(e,t=>{const n=t.parentElement,r=Array.from(n.children).indexOf(t);u(t,e),c(e,()=>{const{html:o,focusSelector:i}=e;t.outerHTML=o||"",I(i)}),d(n.children[r],e)})},textContent:e=>{A(e,t=>{u(t,e),c(e,()=>{const{text:n,focusSelector:r}=e;t.textContent=n??"",I(r)}),d(t,e)})},addCssClass:e=>{A(e,t=>{u(t,e),c(e,()=>{const{name:n}=e;t.classList.add(...Qe(n||""))}),d(t,e)})},removeAttribute:e=>{A(e,t=>{u(t,e),c(e,()=>{const{name:n}=e;t.removeAttribute(n)}),d(t,e)})},removeCssClass:e=>{A(e,t=>{u(t,e),c(e,()=>{const{name:n}=e;t.classList.remove(...Qe(n))}),d(t,e)})},setAttribute:e=>{A(e,t=>{u(t,e),c(e,()=>{const{name:n,value:r}=e;t.setAttribute(n,r||"")}),d(t,e)})},setDatasetProperty:e=>{A(e,t=>{u(t,e),c(e,()=>{const{name:n,value:r}=e;t.dataset[n]=r||""}),d(t,e)})},setProperty:e=>{A(e,t=>{u(t,e),c(e,()=>{const{name:n,value:r}=e;n in t&&(t[n]=r||"")}),d(t,e)})},setStyle:e=>{A(e,t=>{u(t,e),c(e,()=>{const{name:n,value:r}=e;t.style[n]=r||""}),d(t,e)})},setStyles:e=>{A(e,t=>{u(t,e),c(e,()=>{const{styles:n}=e;for(let[r,o]of Object.entries(n))t.style[r]=o||""}),d(t,e)})},setValue:e=>{A(e,t=>{u(t,e),c(e,()=>{const{value:n}=e;t.value=n||""}),d(t,e)})},dispatchEvent:e=>{A(e,t=>{u(t,e),c(e,()=>{const{name:n,detail:r}=e;K(t,n,r)}),d(t,e)})},invokeMethod:e=>{A(e,t=>{u(t,e),c(e,()=>{let n;const{element:r,receiver:o,method:i,args:s}=e,m=i.split(".");switch(o){case"window":n=window;break;case"document":n=document;break;default:n=r}let h=n;const g=m.reduce((b,v)=>(h=b,b[v]||{}),n);g instanceof Function?g.apply(h,s||[]):console.warn(`CableReady invoke_method operation failed due to missing '${i}' method for:`,n)}),d(t,e)})},setMeta:e=>{u(document,e),c(e,()=>{const{name:t,content:n}=e;let r=document.head.querySelector(`meta[name='${t}']`);r||(r=document.createElement("meta"),r.name=t,document.head.appendChild(r)),r.content=n}),d(document,e)},clearStorage:e=>{u(document,e),c(e,()=>{const{type:t}=e;(t==="session"?sessionStorage:localStorage).clear()}),d(document,e)},go:e=>{u(window,e),c(e,()=>{const{delta:t}=e;history.go(t)}),d(window,e)},pushState:e=>{u(window,e),c(e,()=>{const{state:t,title:n,url:r}=e;history.pushState(t||{},n||"",r)}),d(window,e)},redirectTo:e=>{u(window,e),c(e,()=>{let{url:t,action:n,turbo:r}=e;n=n||"advance",r===void 0&&(r=!0),r?(window.Turbo&&window.Turbo.visit(t,{action:n}),window.Turbolinks&&window.Turbolinks.visit(t,{action:n}),window.Turbo||window.Turbolinks||(window.location.href=t)):window.location.href=t}),d(window,e)},reload:e=>{u(window,e),c(e,()=>{window.location.reload()}),d(window,e)},removeStorageItem:e=>{u(document,e),c(e,()=>{const{key:t,type:n}=e;(n==="session"?sessionStorage:localStorage).removeItem(t)}),d(document,e)},replaceState:e=>{u(window,e),c(e,()=>{const{state:t,title:n,url:r}=e;history.replaceState(t||{},n||"",r)}),d(window,e)},scrollIntoView:e=>{const{element:t}=e;u(t,e),c(e,()=>{t.scrollIntoView(e)}),d(t,e)},setCookie:e=>{u(document,e),c(e,()=>{const{cookie:t}=e;document.cookie=t||""}),d(document,e)},setFocus:e=>{const{element:t}=e;u(t,e),c(e,()=>{I(t)}),d(t,e)},setStorageItem:e=>{u(document,e),c(e,()=>{const{key:t,value:n,type:r}=e;(r==="session"?sessionStorage:localStorage).setItem(t,n||"")}),d(document,e)},consoleLog:e=>{u(document,e),c(e,()=>{const{message:t,level:n}=e;n&&["warn","info","error"].includes(n)?console[n](t||""):console.log(t||"")}),d(document,e)},consoleTable:e=>{u(document,e),c(e,()=>{const{data:t,columns:n}=e;console.table(t,n||[])}),d(document,e)},notification:e=>{u(document,e),c(e,()=>{const{title:t,options:n}=e;Notification.requestPermission().then(r=>{e.permission=r,r==="granted"&&new Notification(t||"",n)})}),d(document,e)}};let ke=Kt;const Je=e=>{ke={...ke,...e}};var Ne={get all(){return ke}};const _e=(e,t={emitMissingElementWarnings:!0})=>{const n={};e.forEach(r=>{r.batch&&(n[r.batch]=n[r.batch]?++n[r.batch]:1)}),e.forEach(r=>{const o=r.operation;try{if(r.selector?r.xpath?r.element=r.selectAll?Wt(r.selector):qt(r.selector):r.element=r.selectAll?document.querySelectorAll(r.selector):document.querySelector(r.selector):r.element=document,r.element||t.emitMissingElementWarnings){le.set(document.activeElement);const i=Ne.all[o];i?(i(r),r.batch&&--n[r.batch]==0&&K(document,"cable-ready:batch-complete",{batch:r.batch})):console.error(`CableReady couldn't find the "${o}" operation. Make sure you use the camelized form when calling an operation method.`)}}catch(i){r.element?(console.error(`CableReady detected an error in ${o||"operation"}: ${i.message}. If you need to support older browsers make sure you've included the corresponding polyfills. https://docs.stimulusreflex.com/setup#polyfills-for-ie11.`),console.error(i)):console.warn(`CableReady ${o||"operation"} failed due to missing DOM element for selector: '${r.selector}'`)}})};let ye;const Ke=[25,50,75,100,200,250,500,800,1e3,2e3],ht=async(e=0)=>{if(ye)return ye;if(e>=Ke.length)throw new Error("Couldn't obtain a Action Cable consumer within 5s");var t;return await(t=Ke[e],new Promise(n=>setTimeout(n,t))),await ht(e+1)};var ie={setConsumer(e){ye=e},get consumer(){return ye},getConsumer:async()=>await ht()};let pt=class extends HTMLElement{disconnectedCallback(){this.channel&&this.channel.unsubscribe()}createSubscription(t,n,r){this.channel=t.subscriptions.create({channel:n,identifier:this.identifier},{received:r})}get preview(){return document.documentElement.hasAttribute("data-turbolinks-preview")||document.documentElement.hasAttribute("data-turbo-preview")}get identifier(){return this.getAttribute("identifier")}},Yt=class extends pt{async connectedCallback(){if(this.preview)return;const t=await ie.getConsumer();t?this.createSubscription(t,"CableReady::Stream",this.performOperations):console.error("The `stream_from` helper cannot connect without an ActionCable consumer.\nPlease run `rails generate cable_ready:helpers` to fix this.")}performOperations(t){t.cableReady&&_e(t.operations)}},Zt=class extends pt{constructor(){super(),this.attachShadow({mode:"open"}).innerHTML=`
<style>
  :host {
    display: block;
  }
</style>
<slot></slot>
`}async connectedCallback(){if(this.preview)return;this.update=Vt(this.update.bind(this),this.debounce);const t=await ie.getConsumer();t?this.createSubscription(t,"CableReady::Stream",this.update):console.error("The `updates-for` helper cannot connect without an ActionCable consumer.\nPlease run `rails generate cable_ready:helpers` to fix this.")}async update(t){const n=Array.from(document.querySelectorAll(this.query),o=>new en(o));if(n[0].element!==this)return;le.set(document.activeElement),this.html={};const r=[...new Set(n.map(o=>o.url))];await Promise.all(r.map(async o=>{if(!this.html.hasOwnProperty(o)){const i=await ut(o,{"X-Cable-Ready":"update"});this.html[o]=await i.text()}})),this.index={},n.forEach(o=>{this.index.hasOwnProperty(o.url)?this.index[o.url]++:this.index[o.url]=0,o.process(t,this.html,this.index)})}get query(){return`updates-for[identifier="${this.identifier}"]`}get identifier(){return this.getAttribute("identifier")}get debounce(){return this.hasAttribute("debounce")?parseInt(this.getAttribute("debounce")):20}},en=class{constructor(t){this.element=t}async process(t,n,r){if(!this.shouldUpdate(t))return;const o=r[this.url],i=document.createElement("template");this.element.setAttribute("updating","updating"),i.innerHTML=String(n[this.url]).trim(),await this.resolveTurboFrames(i.content);const s=i.content.querySelectorAll(this.query);if(s.length<=o)return void console.warn(`Update aborted due to insufficient number of elements. The offending url is ${this.url}.`);const m={element:this.element,html:s[o],permanentAttributeName:"data-ignore-updates"};K(this.element,"cable-ready:before-update",m),at(this.element,s[o],{childrenOnly:!0,onBeforeElUpdated:dt(m),onElUpdated:h=>{this.element.removeAttribute("updating"),K(this.element,"cable-ready:after-update",m),I(m.focusSelector)}})}async resolveTurboFrames(t){const n=[...t.querySelectorAll('turbo-frame[src]:not([loading="lazy"])')];return Promise.all(n.map(r=>new Promise(async o=>{const i=await ut(r.getAttribute("src"),{"Turbo-Frame":r.id,"X-Cable-Ready":"update"}),s=document.createElement("template");s.innerHTML=await i.text(),await this.resolveTurboFrames(s.content),t.querySelector(`turbo-frame#${r.id}`).innerHTML=String(s.content.querySelector(`turbo-frame#${r.id}`).innerHTML).trim(),o()})))}shouldUpdate(t){return!this.ignoresInnerUpdates&&this.hasChangesSelectedForUpdate(t)}hasChangesSelectedForUpdate(t){const n=this.element.getAttribute("only");return!(n&&t.changed&&!n.split(" ").some(r=>t.changed.includes(r)))}get ignoresInnerUpdates(){return this.element.hasAttribute("ignore-inner-updates")&&this.element.hasAttribute("performing-inner-update")}get url(){return this.element.hasAttribute("url")?this.element.getAttribute("url"):location.href}get identifier(){return this.element.identifier}get query(){return this.element.query}};const De=e=>{const t=e&&e.parentElement&&e.parentElement.closest("updates-for");t&&(t.setAttribute("performing-inner-update",""),De(t))},Pe=e=>{const t=e&&e.parentElement&&e.parentElement.closest("updates-for");t&&(t.removeAttribute("performing-inner-update"),Pe(t))},q={perform:_e,performAsync:(e,t={emitMissingElementWarnings:!0})=>new Promise((n,r)=>{try{n(_e(e,t))}catch(o){r(o)}}),shouldMorphCallbacks:ft,didMorphCallbacks:mt,initialize:(e={})=>{const{consumer:t}=e;document.addEventListener("stimulus-reflex:before",n=>{De(n.detail.element)}),document.addEventListener("stimulus-reflex:after",n=>{setTimeout(()=>{Pe(n.detail.element)})}),document.addEventListener("turbo:submit-start",n=>{De(n.target)}),document.addEventListener("turbo:submit-end",n=>{setTimeout(()=>{Pe(n.target)})}),t?ie.setConsumer(t):console.error("CableReady requires a reference to your Action Cable `consumer` for its helpers to function.\nEnsure that you have imported the `CableReady` package as well as `consumer` from your `channels` folder, then call `CableReady.initialize({ consumer })`."),customElements.get("stream-from")||customElements.define("stream-from",Yt),customElements.get("updates-for")||customElements.define("updates-for",Zt)},addOperation:(e,t)=>{const n={};n[e]=t,Je(n)},addOperations:e=>{Je(e)},version:jt,cable:ie,get DOMOperations(){return console.warn("DEPRECATED: Please use `CableReady.operations` instead of `CableReady.DOMOperations`"),Ne.all},get operations(){return Ne.all},get consumer(){return ie.consumer}};window.CableReady=q;var be={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0},w={log(...e){this.enabled&&(e.push(Date.now()),be.logger.log("[ActionCable]",...e))}};const oe=()=>new Date().getTime(),pe=e=>(oe()-e)/1e3;class je{constructor(t){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=t,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=oe(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),w.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=oe(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),w.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=oe()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,w.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=oe(),w.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){const{staleThreshold:t,reconnectionBackoffRate:n}=this.constructor,r=Math.pow(1+n,Math.min(this.reconnectAttempts,10)),i=(this.reconnectAttempts===0?1:n)*Math.random();return t*1e3*r*(1+i)}reconnectIfStale(){this.connectionIsStale()&&(w.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${pe(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?w.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${pe(this.disconnectedAt)} s`):(w.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return pe(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&pe(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(w.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}}je.staleThreshold=6;je.reconnectionBackoffRate=.15;var gt={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]};const{message_types:ee,protocols:Me}=gt,tn=Me.slice(0,Me.length-1),Ye=[].indexOf;class Ue{constructor(t){this.open=this.open.bind(this),this.consumer=t,this.subscriptions=this.consumer.subscriptions,this.monitor=new je(this),this.disconnected=!0}send(t){return this.isOpen()?(this.webSocket.send(JSON.stringify(t)),!0):!1}open(){if(this.isActive())return w.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{const t=[...Me,...this.consumer.subprotocols||[]];return w.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${t}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new be.WebSocket(this.consumer.url,t),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:t}={allowReconnect:!0}){if(t||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(w.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(t){w.log("Failed to reopen WebSocket",t)}finally{w.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return Ye.call(tn,this.getProtocol())>=0}isState(...t){return Ye.call(t,this.getState())>=0}getState(){if(this.webSocket){for(let t in be.WebSocket)if(be.WebSocket[t]===this.webSocket.readyState)return t.toLowerCase()}return null}installEventHandlers(){for(let t in this.events){const n=this.events[t].bind(this);this.webSocket[`on${t}`]=n}}uninstallEventHandlers(){for(let t in this.events)this.webSocket[`on${t}`]=function(){}}}Ue.reopenDelay=500;Ue.prototype.events={message(e){if(!this.isProtocolSupported())return;const{identifier:t,message:n,reason:r,reconnect:o,type:i}=JSON.parse(e.data);switch(i){case ee.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case ee.disconnect:return w.log(`Disconnecting. Reason: ${r}`),this.close({allowReconnect:o});case ee.ping:return this.monitor.recordPing();case ee.confirmation:return this.subscriptions.confirmSubscription(t),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(t,"connected",{reconnected:!0})):this.subscriptions.notify(t,"connected",{reconnected:!1});case ee.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",n)}},open(){if(w.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return w.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(e){if(w.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){w.log("WebSocket onerror event")}};const nn=function(e,t){if(t!=null)for(let n in t){const r=t[n];e[n]=r}return e};class rn{constructor(t,n={},r){this.consumer=t,this.identifier=JSON.stringify(n),nn(this,r)}perform(t,n={}){return n.action=t,this.send(n)}send(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}class on{constructor(t){this.subscriptions=t,this.pendingSubscriptions=[]}guarantee(t){this.pendingSubscriptions.indexOf(t)==-1?(w.log(`SubscriptionGuarantor guaranteeing ${t.identifier}`),this.pendingSubscriptions.push(t)):w.log(`SubscriptionGuarantor already guaranteeing ${t.identifier}`),this.startGuaranteeing()}forget(t){w.log(`SubscriptionGuarantor forgetting ${t.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(n=>n!==t)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(t=>{w.log(`SubscriptionGuarantor resubscribing ${t.identifier}`),this.subscriptions.subscribe(t)})},500)}}class sn{constructor(t){this.consumer=t,this.guarantor=new on(this),this.subscriptions=[]}create(t,n){const r=t,o=typeof r=="object"?r:{channel:r},i=new rn(this.consumer,o,n);return this.add(i)}add(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.subscribe(t),t}remove(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t}reject(t){return this.findAll(t).map(n=>(this.forget(n),this.notify(n,"rejected"),n))}forget(t){return this.guarantor.forget(t),this.subscriptions=this.subscriptions.filter(n=>n!==t),t}findAll(t){return this.subscriptions.filter(n=>n.identifier===t)}reload(){return this.subscriptions.map(t=>this.subscribe(t))}notifyAll(t,...n){return this.subscriptions.map(r=>this.notify(r,t,...n))}notify(t,n,...r){let o;return typeof t=="string"?o=this.findAll(t):o=[t],o.map(i=>typeof i[n]=="function"?i[n](...r):void 0)}subscribe(t){this.sendCommand(t,"subscribe")&&this.guarantor.guarantee(t)}confirmSubscription(t){w.log(`Subscription confirmed ${t}`),this.findAll(t).map(n=>this.guarantor.forget(n))}sendCommand(t,n){const{identifier:r}=t;return this.consumer.send({command:n,identifier:r})}}class ln{constructor(t){this._url=t,this.subscriptions=new sn(this),this.connection=new Ue(this),this.subprotocols=[]}get url(){return an(this._url)}send(t){return this.connection.send(t)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(t){this.subprotocols=[...this.subprotocols,t]}}function an(e){if(typeof e=="function"&&(e=e()),e&&!/^wss?:/i.test(e)){const t=document.createElement("a");return t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href}else return e}function cn(e=un("url")||gt.default_mount_path){return new ln(e)}function un(e){const t=document.head.querySelector(`meta[name='action-cable-${e}']`);if(t)return t.getAttribute("content")}let Ze={};var xe={get app(){return Ze},set(e){Ze=e}};const dn={reflexAttribute:"data-reflex",reflexPermanentAttribute:"data-reflex-permanent",reflexRootAttribute:"data-reflex-root",reflexSuppressLoggingAttribute:"data-reflex-suppress-logging",reflexDatasetAttribute:"data-reflex-dataset",reflexDatasetAllAttribute:"data-reflex-dataset-all",reflexSerializeFormAttribute:"data-reflex-serialize-form",reflexFormSelectorAttribute:"data-reflex-form-selector",reflexIncludeInnerHtmlAttribute:"data-reflex-include-inner-html",reflexIncludeTextContentAttribute:"data-reflex-include-text-content"};let Ie={};var p={set(e){Ie={...dn,...e.schema};for(const t in Ie)Object.defineProperty(this,t.slice(0,-9),{get:()=>Ie[t]})}};let te=!1;var $={get enabled(){return te},get disabled(){return!te},get value(){return te},set(e){te=!!e},set debug(e){te=!!e}};const Ae=e=>e.cloned?"CLONED":`in ${new Date-e.timestamp}ms`,fn=e=>e.totalOperations>1?` ${e.completedOperations}/${e.totalOperations}`:"";var mn=e=>{$.disabled||e.data.suppressLogging||console.log(`↑ stimulus ↑ ${e.target}`,{reflexId:e.reflexId,args:e.data.args,controller:e.controller.identifier,element:e.element,controllerElement:e.controller.element})},bt=e=>{if($.disabled||e.data.suppressLogging)return;const t={reflexId:e.reflexId,morph:e.morph,payload:e.payload};e.operation!=="dispatch_event"&&(t.operation=e.operation),console.log(`↓ reflex ↓ ${e.target} → ${e.selector||"∞"}${fn(e)} ${Ae(e)}`,t)},hn=e=>{$.disabled||e.data.suppressLogging||console.log(`↓ reflex ↓ ${e.target} ${Ae(e)} %cHALTED`,"color: #ffa500;",{reflexId:e.reflexId,payload:e.payload})},pn=e=>{$.disabled||e.data.suppressLogging||console.log(`↓ reflex ↓ ${e.target} ${Ae(e)} %cFORBIDDEN`,"color: #BF40BF;",{reflexId:e.reflexId,payload:e.payload})},gn=e=>{$.disabled||e.data.suppressLogging||console.log(`↓ reflex ↓ ${e.target} ${Ae(e)} %cERROR: ${e.error}`,"color: #f00;",{reflexId:e.reflexId,payload:e.payload})};let ne=!0;var W={get enabled(){return ne},get disabled(){return!ne},get value(){return ne},set(e){ne=!!e},set deprecate(e){ne=!!e}};class vt{constructor(t,n){this.data=t.valueOf(),this.controller=n,this.element=t.reflexElement,this.reflexId=t.reflexId,this.error=null,this.payload=null,this.stage="created",this.warned=!1,this.target=t.target,this.action=t.target.split("#")[1],this.selector=null,this.morph=null,this.operation=null,this.timestamp=new Date,this.cloned=!1}get getPromise(){const t=new Promise((n,r)=>{this.promise={resolve:n,reject:r,data:this.data}});return t.reflexId=this.reflexId,$.enabled&&t.catch(()=>{}),t}}const yt=()=>{const e=window.crypto||window.msCrypto;return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^e.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))},ge=(e,t=!0)=>typeof e!="string"?"":(e=e.replace(/[\s_](.)/g,n=>n.toUpperCase()).replace(/[\s_]/g,"").replace(/^(.)/,n=>n.toLowerCase()),t&&(e=e.substr(0,1).toUpperCase()+e.substr(1)),e),Ee=(e,t)=>{document.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!1,detail:t})),window.jQuery&&window.jQuery(document).trigger(e,t)},we=e=>{if(e.id!=="")return"//*[@id='"+e.id+"']";if(e===document.body)return"/html/body";if(e.nodeName==="HTML")return"/html";let t=0;const n=e&&e.parentNode?e.parentNode.childNodes:[];for(var r=0;r<n.length;r++){const o=n[r];if(o===e)return`${we(e.parentNode)}/${e.tagName.toLowerCase()}[${t+1}]`;o.nodeType===1&&o.tagName===e.tagName&&t++}},et=e=>document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,Q=(e,t=!1)=>{const n=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=[];for(let o=0;o<n.snapshotLength;o++)r.push(n.snapshotItem(o));return t?r.reverse():r},tt=(e=[])=>{const t=e.filter(n=>n&&String(n).length).map(n=>n.trim()).join(" ").trim();return t.length?t:null},se=e=>e&&e.length?e.split(" ").filter(t=>t.trim().length):[],bn=e=>{let t=Array.from(e.attributes).reduce((n,r)=>(n[r.name]=r.value,n),{});if(t.checked=!!e.checked,t.selected=!!e.selected,t.tag_name=e.tagName,e.tagName.match(/select/i)||(n=>!!["checkbox","radio"].includes(n.type)&&document.querySelectorAll(`input[type="${n.type}"][name="${n.name}"]`).length>1)(e)){const n=(r=>Array.from(r.querySelectorAll("option:checked")).concat(Array.from(document.querySelectorAll(`input[type="${r.type}"][name="${r.name}"]`)).filter(o=>o.checked)).map(o=>o.value))(e);t.values=n,t.value=n.join(",")}else t.value=e.value;return t},nt=(e,t)=>{if(!t||t.length===0)return[];let n=[e];const r=we(e);return t.forEach(o=>{try{switch(o){case"combined":W.enabled&&console.warn("In the next version of StimulusReflex, the 'combined' option to data-reflex-dataset will become 'ancestors'."),n=[...n,...Q(`${r}/ancestor::*`,!0)];break;case"ancestors":n=[...n,...Q(`${r}/ancestor::*`,!0)];break;case"parent":n=[...n,...Q(`${r}/parent::*`)];break;case"siblings":n=[...n,...Q(`${r}/preceding-sibling::*|${r}/following-sibling::*`)];break;case"children":n=[...n,...Q(`${r}/child::*`)];break;case"descendants":n=[...n,...Q(`${r}/descendant::*`)];break;default:n=[...n,...document.querySelectorAll(o)]}}catch(i){$.enabled&&console.error(i)}}),n},Oe=e=>{let t={};return e&&e.attributes&&Array.from(e.attributes).forEach(n=>{n.name.startsWith("data-")&&(t[n.name]=n.value)}),t};let Le=!1;var xt={get disabled(){return!Le},set(e){Le=e,W.enabled&&!Le&&document.addEventListener("DOMContentLoaded",()=>console.warn(`Deprecation warning: the next version of StimulusReflex will standardize isolation mode, and the isolate option will be removed.
Please update your applications to assume that every tab will be isolated. Use CableReady operations to broadcast updates to other tabs and users.`),{once:!0})}};const vn=["created","before","delivered","queued","after","finalized","success","error","halted","forbidden"];let rt;const E=new Proxy({},{get:function(e,t){return vn.includes(t)?Object.fromEntries(Object.entries(e).filter(([n,r])=>r.stage===t)):t==="last"?rt:t==="all"?e:Reflect.get(...arguments)},set:function(e,t,n){return e[t]=n,rt=n,!0}}),D=(e,t)=>{const n=e.controller[["before","after","finalize"].includes(t)?`${t}${ge(e.action)}`:`${ge(e.action,!1)}${ge(t)}`],r=e.controller[["before","after","finalize"].includes(t)?`${t}Reflex`:`reflex${ge(t)}`];typeof n=="function"&&n.call(e.controller,e.element,e.target,e.error,e.reflexId,e.payload),typeof r=="function"&&r.call(e.controller,e.element,e.target,e.error,e.reflexId,e.payload)},L=(e,t)=>{if(!e.controller.element.parentElement)return void($.enabled&&!e.warned&&(console.warn(`StimulusReflex was not able execute callbacks or emit events for "${t}" or later life-cycle stages for this Reflex. The StimulusReflex Controller Element is no longer present in the DOM. Could you move the StimulusReflex Controller to an element higher in your DOM?`),e.warned=!0));e.stage=t;const n=`stimulus-reflex:${t}`,r=`${n}:${e.action}`,o={reflex:e.target,controller:e.controller,reflexId:e.reflexId,element:e.element,payload:e.payload},i={bubbles:!0,cancelable:!1,detail:o};e.controller.element.dispatchEvent(new CustomEvent(n,i)),e.controller.element.dispatchEvent(new CustomEvent(r,i)),window.jQuery&&(window.jQuery(e.controller.element).trigger(n,o),window.jQuery(e.controller.element).trigger(r,o))};document.addEventListener("stimulus-reflex:before",e=>D(E[e.detail.reflexId],"before"),!0),document.addEventListener("stimulus-reflex:queued",e=>D(E[e.detail.reflexId],"queued"),!0),document.addEventListener("stimulus-reflex:delivered",e=>D(E[e.detail.reflexId],"delivered"),!0),document.addEventListener("stimulus-reflex:success",e=>{const t=E[e.detail.reflexId];D(t,"success"),L(t,"after")},!0),document.addEventListener("stimulus-reflex:nothing",e=>L(E[e.detail.reflexId],"success"),!0),document.addEventListener("stimulus-reflex:error",e=>{const t=E[e.detail.reflexId];D(t,"error"),L(t,"after")},!0),document.addEventListener("stimulus-reflex:halted",e=>D(E[e.detail.reflexId],"halted"),!0),document.addEventListener("stimulus-reflex:forbidden",e=>D(E[e.detail.reflexId],"forbidden"),!0),document.addEventListener("stimulus-reflex:after",e=>D(E[e.detail.reflexId],"after"),!0),document.addEventListener("stimulus-reflex:finalize",e=>D(E[e.detail.reflexId],"finalize"),!0);const yn=(e,t)=>se(t.getAttribute(p.controller)).reduce((n,r)=>{const o=e.getControllerForElementAndIdentifier(t,r);return o&&o.StimulusReflex&&n.push(o),n},[]),xn=e=>{if(!e.cableReady)return;if(e.version.replace(".pre","-pre")!==q.version)return void($.enabled&&console.error(`Reflex failed due to cable_ready gem/NPM package version mismatch. Package versions must match exactly.
Note that if you are using pre-release builds, gems use the "x.y.z.preN" version format, while NPM packages use "x.y.z-preN".

cable_ready gem: ${e.version}
cable_ready NPM: ${q.version}`));let t,n=[];for(let r=e.operations.length-1;r>=0;r--)e.operations[r].stimulusReflex&&(n.push(e.operations[r]),e.operations.splice(r,1));if(n.some(r=>r.stimulusReflex.url!==location.href)&&$.enabled)console.error("Reflex failed due to mismatched URL.");else if(n.length&&(t=n[0].stimulusReflex,t.payload=n[0].payload),t){const{reflexId:r,payload:o}=t;let i;if(!E[r]&&xt.disabled){const s=et(t.xpathController),m=et(t.xpathElement);s.reflexController=s.reflexController||{},s.reflexData=s.reflexData||{},s.reflexError=s.reflexError||{};const h=xe.app.getControllerForElementAndIdentifier(s,t.reflexController);s.reflexController[r]=h,s.reflexData[r]=t,i=new vt(t,h),E[r]=i,i.cloned=!0,i.element=m,h.lastReflex=i,L(i,"before"),i.getPromise}else i=E[r];i&&(i.payload=o,i.totalOperations=n.length,i.pendingOperations=n.length,i.completedOperations=0,i.piggybackOperations=e.operations,q.perform(n))}else e.operations.length&&E[e.operations[0].reflexId]&&q.perform(e.operations)},wt=((e,t=250)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{n=null,e(...r)},t)}})(()=>{document.querySelectorAll(`[${p.reflex}]`).forEach(e=>{const t=se(e.getAttribute(p.controller)),n=se(e.getAttribute(p.reflex)),r=se(e.getAttribute(p.action));n.forEach(s=>{const m=((g,b)=>b.find(v=>{if(v.identifier)return(x=>{const C=x.match(/(?:.*->)?(.*?)(?:Reflex)?#/);return C?C[1]:""})(g).replace(/([a-z0–9])([A-Z])/g,"$1-$2").replace(/(::)/g,"--").toLowerCase()===v.identifier})||b[0])(s,((g,b)=>{let v=[];for(;b;)v=v.concat(yn(g,b)),b=b.parentElement;return v})(xe.app,e));let h;m?(h=`${s.split("->")[0]}->${m.identifier}#__perform`,r.includes(h)||r.push(h)):(h=`${s.split("->")[0]}->stimulus-reflex#__perform`,t.includes("stimulus-reflex")||t.push("stimulus-reflex"),r.includes(h)||r.push(h))});const o=tt(t),i=tt(r);o&&e.getAttribute(p.controller)!=o&&e.setAttribute(p.controller,o),i&&e.getAttribute(p.action)!=i&&e.setAttribute(p.action,i)}),Ee("stimulus-reflex:ready")},20);class wn{constructor(t,n,r,o,i,s,m,h,g){this.options=t,this.reflexElement=n,this.controllerElement=r,this.reflexController=o,this.permanentAttributeName=i,this.target=s,this.args=m,this.url=h,this.tabId=g}get attrs(){return this._attrs=this._attrs||this.options.attrs||bn(this.reflexElement),this._attrs}get reflexId(){return this._reflexId=this._reflexId||this.options.reflexId||yt(),this._reflexId}get selectors(){return this._selectors=this._selectors||this.options.selectors||(t=>{let n=[];for(;n.length===0&&t;){let r=t.getAttribute(p.reflexRoot);if(r){r.length===0&&t.id&&(r=`#${t.id}`);const o=r.split(",").filter(i=>i.trim().length);$.enabled&&o.length===0&&console.error(`No value found for ${p.reflexRoot}. Add an #id to the element or provide a value for ${p.reflexRoot}.`,t),n=n.concat(o.filter(i=>document.querySelector(i)))}t=t.parentElement?t.parentElement.closest(`[${p.reflexRoot}]`):null}return n})(this.reflexElement),typeof this._selectors=="string"?[this._selectors]:this._selectors}get resolveLate(){return this.options.resolveLate||!1}get dataset(){return this._dataset=this._dataset||(t=>{const n=t.attributes[p.reflexDataset],r=t.attributes[p.reflexDatasetAll],o=n&&n.value.split(" ")||[],i=r&&r.value.split(" ")||[],s=nt(t,o),m=nt(t,i),h=s.reduce((b,v)=>({...Oe(v),...b}),{}),g={dataset:{...Oe(t),...h},datasetAll:{}};return m.forEach(b=>{const v=Oe(b);Object.keys(v).forEach(x=>{const C=v[x];g.datasetAll[x]&&Array.isArray(g.datasetAll[x])?g.datasetAll[x].push(C):g.datasetAll[x]=[C]})}),g})(this.reflexElement),this._dataset}get innerHTML(){return this.includeInnerHtml?this.reflexElement.innerHTML:""}get textContent(){return this.includeTextContent?this.reflexElement.textContent:""}get xpathController(){return we(this.controllerElement)}get xpathElement(){return we(this.reflexElement)}get formSelector(){const t=this.reflexElement.attributes[p.reflexFormSelector]?this.reflexElement.attributes[p.reflexFormSelector].value:void 0;return this.options.formSelector||t}get includeInnerHtml(){const t=this.reflexElement.attributes[p.reflexIncludeInnerHtml]||!1;return!(!this.options.includeInnerHTML&&!t)&&t.value!=="false"}get includeTextContent(){const t=this.reflexElement.attributes[p.reflexIncludeTextContent]||!1;return!(!this.options.includeTextContent&&!t)&&t.value!=="false"}get suppressLogging(){return this.options.suppressLogging||this.reflexElement.attributes[p.reflexSuppressLogging]||!1}valueOf(){return{attrs:this.attrs,dataset:this.dataset,selectors:this.selectors,reflexId:this.reflexId,resolveLate:this.resolveLate,suppressLogging:this.suppressLogging,xpathController:this.xpathController,xpathElement:this.xpathElement,inner_html:this.innerHTML,text_content:this.textContent,formSelector:this.formSelector,reflexController:this.reflexController,permanentAttributeName:this.permanentAttributeName,target:this.target,args:this.args,url:this.url,tabId:this.tabId,version:"3.5.0-pre9"}}}let ot={};var Se={get plugin(){return ot},set(e){ot=e}};let re,it,ve,V;const Sn=()=>{V=!0,J(),Ee("stimulus-reflex:connected"),Object.values(E.queued).forEach(e=>{ve.send(e.data),L(e,"delivered")})},An=()=>{V=!1,J(),Ee("stimulus-reflex:rejected"),Debug.enabled&&console.warn("Channel subscription was rejected.")},En=e=>{V=!1,J(),Ee("stimulus-reflex:disconnected",e)},J=()=>{const e=document.body.classList;e.contains("stimulus-reflex-connected")||e.contains("stimulus-reflex-disconnected")?V?e.replace("stimulus-reflex-disconnected","stimulus-reflex-connected"):e.replace("stimulus-reflex-connected","stimulus-reflex-disconnected"):e.add(V?"stimulus-reflex-connected":"stimulus-reflex-disconnected")};var Tn={subscribe:e=>{if(ve)return;re=re||e.application.consumer||cn();const{channel:t}=e.StimulusReflex,n={channel:t,...it},r=JSON.stringify(n);ve=re.subscriptions.findAll(r)[0]||re.subscriptions.create(n,{received:xn,connected:Sn,rejected:An,disconnected:En})},deliver:e=>{V?(ve.send(e.data),L(e,"delivered")):L(e,"queued")},initialize:(e,t)=>{re=e,it=t,document.addEventListener("DOMContentLoaded",()=>{V=!1,J(),W.enabled&&e&&console.warn(`Deprecation warning: the next version of StimulusReflex will obtain a reference to consumer via the Stimulus application object.
Please add 'application.consumer = consumer' to your index.js after your Stimulus application has been established, and remove the consumer key from your StimulusReflex initialize() options object.`)}),document.addEventListener("turbolinks:load",J),document.addEventListener("turbo:load",J)}};const st=e=>{const{stimulusReflex:t}=e.detail||{};if(!t)return;const n=E[t.reflexId];n.pendingOperations--,n.pendingOperations>0||(t.resolveLate||setTimeout(()=>n.promise.resolve({element:n.element,event:e,data:n.data,payload:n.payload,reflexId:n.reflexId,toString:()=>""})),setTimeout(()=>L(n,"success")))},lt=e=>{const{stimulusReflex:t}=e.detail||{};if(!t)return;const n=E[t.reflexId];n.completedOperations++,n.selector=e.detail.selector,n.morph=e.detail.stimulusReflex.morph,n.operation=e.type.split(":")[1].split("-").slice(1).join("_"),bt(n),n.completedOperations<n.totalOperations||(t.resolveLate&&setTimeout(()=>n.promise.resolve({element:n.element,event:e,data:n.data,payload:n.payload,reflexId:n.reflexId,toString:()=>""})),setTimeout(()=>L(n,"finalize")),n.piggybackOperations.length&&q.perform(n.piggybackOperations))},Cn=(e,t)=>{bt(e),setTimeout(()=>e.promise.resolve({data:e.data,element:e.element,event:t,payload:e.payload,reflexId:e.reflexId,toString:()=>""}))},$n=(e,t)=>{hn(e),setTimeout(()=>e.promise.resolve({data:e.data,element:e.element,event:t,payload:e.payload,reflexId:e.reflexId,toString:()=>""}))},Rn=(e,t)=>{pn(e),setTimeout(()=>e.promise.resolve({data:e.data,element:e.element,event:t,payload:e.payload,reflexId:e.reflexId,toString:()=>""}))},In=(e,t)=>{gn(e),setTimeout(()=>e.promise.reject({data:e.data,element:e.element,event:t,payload:e.payload,reflexId:e.reflexId,error:e.error,toString:()=>e.error}))};class On extends Tt{constructor(...t){super(...t),He(this)}}const Ln=yt(),kn=(e,{controller:t,consumer:n,debug:r,params:o,isolate:i,deprecate:s,transport:m}={})=>(Se.set(m||Tn),Se.plugin.initialize(n,o),xt.set(!!i),xe.set(e),p.set(e),xe.app.register("stimulus-reflex",t||On),$.set(!!r),s!==void 0&&W.set(s),new MutationObserver(wt).observe(document.documentElement,{attributeFilter:[p.reflex,p.action],childList:!0,subtree:!0}),E),He=(e,t={})=>{e.StimulusReflex={...t,channel:"StimulusReflex::Channel"},Se.plugin.subscribe(e),Object.assign(e,{stimulate(){const n=location.href,r=this.element,o=Array.from(arguments),i=o.shift()||"StimulusReflex::Reflex#default_reflex",s=((x,C)=>x[0]&&x[0].nodeType===Node.ELEMENT_NODE?x.shift():C)(o,r);if((m=s).type==="number"&&m.validity&&m.validity.badInput)return void($.enabled&&console.warn("Reflex aborted: invalid numeric input"));var m;const h=(x=>{const C={};if(x[0]&&typeof x[0]=="object"&&Object.keys(x[0]).filter(k=>["attrs","selectors","reflexId","resolveLate","serializeForm","suppressLogging","includeInnerHTML","includeTextContent"].includes(k)).length){const k=x.shift();Object.keys(k).forEach(H=>C[H]=k[H])}return C})(o),g=new wn(h,s,r,this.identifier,p.reflexPermanent,i,o,n,Ln),b=g.reflexId;r.reflexController=r.reflexController||{},r.reflexData=r.reflexData||{},r.reflexError=r.reflexError||{},r.reflexController[b]=this,r.reflexData[b]=g.valueOf();const v=new vt(g,this);return E[b]=v,this.lastReflex=v,L(v,"before"),setTimeout(()=>{const{params:x}=r.reflexData[b]||{},C=s.attributes[p.reflexSerializeForm];C&&(h.serializeForm=C.value!=="false");const k=s.closest(g.formSelector)||document.querySelector(g.formSelector)||s.closest("form");W.enabled&&h.serializeForm===void 0&&k&&console.warn(`Deprecation warning: the next version of StimulusReflex will not serialize forms by default.
Please set ${p.reflexSerializeForm}="true" on your Reflex Controller Element or pass { serializeForm: true } as an option to stimulate.`);const H=h.serializeForm===!1?"":((F,N={})=>{if(!F)return"";const B=N.w||window,{element:O}=N,ae=new B.FormData(F),P=Array.from(ae,Y=>Y.map(encodeURIComponent).join("=")),z=F.querySelector("input[type=submit]");return O&&O.name&&O.nodeName==="INPUT"&&O.type==="submit"?P.push(`${encodeURIComponent(O.name)}=${encodeURIComponent(O.value)}`):z&&z.name&&P.push(`${encodeURIComponent(z.name)}=${encodeURIComponent(z.value)}`),Array.from(P).join("&")})(k,{element:s});v.data={...g.valueOf(),params:x,formData:H},r.reflexData[b]=v.data,Se.plugin.deliver(v)}),mn(v),v.getPromise},__perform(n){let r,o=n.target;for(;o&&!r;)r=o.getAttribute(p.reflex),r&&r.trim().length||(o=o.parentElement);const i=se(r).find(s=>s.split("->")[0]===n.type);i&&(n.preventDefault(),n.stopPropagation(),this.stimulate(i.split("->")[1],o))}}),e.reflexes||Object.defineProperty(e,"reflexes",{get(){return new Proxy(E,{get:(function(n,r){return r==="last"?this.lastReflex:Object.fromEntries(Object.entries(n[r]).filter(([o,i])=>i.controller===this))}).bind(this)})}})},Nn=(e,t={})=>{He(e,t)};document.addEventListener("cable-ready:after-dispatch-event",e=>{const{stimulusReflex:t,name:n}=e.detail||{},r=n.split("-")[2],o={nothing:Cn,halted:$n,forbidden:Rn,error:In};if(!t||!Object.keys(o).includes(r))return;const i=E[t.reflexId];i.completedOperations++,i.pendingOperations--,i.selector=e.detail.selector,i.morph=e.detail.stimulusReflex.morph,i.operation=e.type.split(":")[1].split("-").slice(1).join("_"),r==="error"&&(i.error=e.detail.error),o[r](i,e),setTimeout(()=>L(i,r)),i.piggybackOperations.length&&q.perform(i.piggybackOperations)}),document.addEventListener("cable-ready:before-inner-html",st),document.addEventListener("cable-ready:before-morph",st),document.addEventListener("cable-ready:after-inner-html",lt),document.addEventListener("cable-ready:after-morph",lt),window.addEventListener("load",wt);const _n={...Object.freeze({__proto__:null,initialize:kn,register:He,useReflex:Nn}),get debug(){return $.value},set debug(e){$.set(!!e)},get deprecate(){return W.value},set deprecate(e){W.set(!!e)}};window.StimulusReflex=_n;export{_n as u};
//# sourceMappingURL=stimulus_reflex.min-af4899eb.js.map

</script>

</body>
</html>
