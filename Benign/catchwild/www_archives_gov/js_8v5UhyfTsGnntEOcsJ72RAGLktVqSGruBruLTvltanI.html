<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js_8v5UhyfTsGnntEOcsJ72RAGLktVqSGruBruLTvltanI.html</title>
</head>
<body>

<script>
(function($) {
    $(document).ready(function() {
        /*
         * Add pdf notice if a link on the page is to a pdf
         */
        if ($("a[href$='.pdf']").length) {
            var pdfNotice = "<div id=\"pdfNotice\">      <p>        PDF files require the <a href=\"http://www.adobe.com/reader/\">free Adobe Reader.</a><br>        More information on Adobe Acrobat PDF files is available on our <a href=\"/global-pages/accessibility/\">Accessibility page</a>.      </p>    </div>";
            $("#main-col").append(pdfNotice);
        }
        /* 
         * Add help icon for description text
         */
        $(".description").prev().prev().append('<i class="fa-2x fa fa-question-circle hover-help" title="Click for help"></i>');
        $(".description").each(function() {
            $(this).appendTo($(this).prev().prev());
        });
        $(".description").hide();
        $(".hover-help").click(function() {
            $(this).next().toggle()
        });
        /*
         * Force download for download links
         */
        $("a.download-photo").each(function() {
            $(this).attr('download', '');
        });
        /*
         * Add external link icon
         */
         
        (function(){
          //trusted domain name regular expression
          /*
          var trustedDomains = [
            'twitter\.com',
            'youtube\.com',
            'youtu\.be',
            'recordsofrights\.org',
            'presidentialtimeline\.org',
            'nationalarchivesstore\.org',
            'bush41\.org',
            'nara\.learn\.com',
            'bush41\.org',
            'bushlibrary\.tamu\.edu',
            'fdrlibrary\.marist\.edu',
            'georgewbushlibrary\.smu\.edu',
            'lbjlibrary\.org',
            'trumanlibrary\.org',
            'fdrlibrary\.org',
            'archivesfoundation\.org',
            'jfklibrary\.org',
            'Myarchivesstore\.org',
            'docsteach\.org',
            'digitalvaults\.org',
            'jfk50\.org',
            'reagan\.utexas\.edu',
            'clinton\.presidentiallibraries\.us',
            'fdrlibrary\.org',
            'us11\.campaign-archive.?\.com',                        
            'lbjlibrary\.net',
            'github\.io$',
            'github\.com$'
          ];
          */
           
          regexIndexOf = function(arry, str) {
            if (typeof str === 'undefined' || !str){
              return -1;
            }
            for(i=0;i<arry.length;i++){
              var regex = new RegExp(arry[i]);
              if(str.match(regex))
                return i;
            }
            return -1;
          }
          
          
          localabsolutelink = new RegExp('^http?://' + location.host,'i');
          $("a[href^='http://'],a[href^='https://']").each(function() {
              var htmlContentLink = $(this).html();              
              var url = $(this).attr('href');                            
              if ( url.search(localabsolutelink) == -1 ) {                  
                  var hostname = $('<a>').prop('href', url).prop('hostname'); 
                  //console.log(hostname + ': ' + regexIndexOf(Drupal.settings.archives_ui.trustedDomains,hostname));                  
                  if (hostname.substring(hostname.length - 4) != '.gov' && ! $(this).hasClass('trusted')) {
                    if ($(this).has('img').length > 0) {                        
                    }
                    else if (regexIndexOf(Drupal.settings.archives_ui.trustedDomains,hostname) >= 0) {
                        // do not show the exit link for these sites                          

                    } else {                          
                        //We have a link to an external non-government site so add the external link icon
                        $(this).html(htmlContentLink + ' <i class="fa fa-external-link" title="Our website includes links to many other federal agencies and, in some cases, we link to private organizations. Reference or links to any specific commercial products, service, or company does not constitute endorsement or recommendation by the U.S. Government or the National Archives. When you leave our website, you are subject to that site\'s privacy policy. We are not responsible for the content, information quality, security or Section 508 compliance (accessibility) of other websites."></i>');
                    }
                  }
              }
          });
          /*
           * Add pdf notice if a link on the page is to a pdf
           * /
          $("a[href$='.pdf']").each(function(){
            $(this).addClass('pdf');
           });
           */
        })();

    });
})(jQuery);;
(function ($) {
  Drupal.behaviors.argentina = {
    attach: function(context) {
      
      $('#argentina-form').keydown(function(event){
        if(event.keyCode == 13) {
          event.preventDefault();          
          $("#argentina-form").submit();
        }
      });
      
      /*

      $("#argentina-form").keyup(function(e){ 
          
          var code = e.which; 
          if(code==13){
            console.log('here');
            e.preventDefault();
            return FALSE;
          }
          if(code==32||code==13||code==188||code==186){
              $("#argentina-form #edit-submit").submit();
          } 
          return false;
      });
      */
      
  	}
  };
}(jQuery));


;
(function ($) {

  $(document).ready(function () {
    height=$(this).height();
    width=$(this).width();
    /*
    if( $("#digobj_pect .perCirc .perCircStat").length > 0){
      var pct = parseFloat($("#digobj_pect .perCirc .perCircStat").text());
      var deg= 360/100*pct;
      var $percirc=$("#digobj_pect .perCirc");
      $percirc.css('background-image','linear-gradient(' + (90 + deg) + 'deg, transparent 50%, #ccc 50%), linear-gradient(90deg, #ccc 50%, transparent 50%)')
    }
    */
    /*
    $(".findingaidvideo").fancybox({
      afterShow:function(){
        $video=$( $(this).attr('href') + ' video');
        $video.css('min-width',width-100);
        $video.css('max-width',width-50);
        $video[0].play();
      },
      afterClose:function(){ $video=$( $(this).attr('href') + ' video'); $video[0].pause(); },
    });
    */
  /*
   $(".findingaidvideo").fancybox({      
      fitToView	: true,      
      afterShow:function(){
        $video=$( $(this).attr('href') + ' video');      
        $video.css('min-width',width-100);
        $video.css('max-width',width-50);
        $video[0].play();
      },
    afterClose:function(){ $video=$( $(this).attr('href') + ' video'); $video[0].pause(); },
  });
  */
        
    $(".findingaidpopcontent").fancybox({    
      maxWidth	: 800,
      maxHeight	: 600,
      fitToView	: true,
      width		: '80%',
      height		: '80%',
      autoSize	: false,
      closeClick	: false,
      openEffect	: 'none',
      closeEffect	: 'none'
    });
    
    /*
    $('.findingaidvideo').colorbox({
      inline:true,
      onComplete:function(){ $( $(this).attr('href') + ' video')[0].play();  },
      onCleanup:function(){ $( $(this).attr('href') + ' video')[0].pause(); },
      width:800,
      height:600
    });
    */
   
    $(".handle").on('click', function() {
        $(".fa-container").toggleClass("show-percent show-int");
		$(".toggle-text").toggleText('Show number of scans online', 'Show percentage of digitized records');
    });
	
	$.fn.extend({
        toggleText: function(a, b){
            return this.text(this.text() == b ? a : b);
        }
    });
        
    if(typeof $.tooltip === 'function'){
      $('[data-toggle="tooltip"]').tooltip();
    }
	
	
    $("#searchInput").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $(".explorer-rg-tile").filter(function() {
            $(this).toggle($(this).find("div.explorer-rg-tile-title").children("span").text().toLowerCase().indexOf(value) > -1);
        });
    });


  });
  
  
}(jQuery));

;
(function ($) {  
  Drupal.behaviors.nara_catalog = {
    attach: function(context) {
      
      $(document.body, context).once('nara-catalog-api',function(){
        $( "<div style='clear:both;margin-bottom:5px;'></div>" ).insertAfter( ".nara-catalog-api-call" );
        $('.nara-catalog-api-call').each(function(){
          
          var rows = 6;
          var $this=$(this);
          
          var $query = $(this).attr('data-query');
          console.log($query);
          $query = $query.replace(/f\.fileFormat=application(.*?)pdf/,'f.fileFormat=application_pdf');
          var $preferred = $(this).attr('data-preferred');
          var $type = $(this).attr('data-type');
          var rows = $(this).attr('data-rows')?$(this).attr('data-rows'):6;
          var id=hashCode($query);
          console.log(id);
          var preferred_array=[];
          
          
          var $ul = $("<ul>",{'class':($type=='list')?'fileul':'imageul'});
          var $loading_icon = $("<div>",{class:'loading-icon'});
          $this.empty();
          $ul.appendTo($this);      
          $loading_icon.appendTo($this);
          
          $preferred = $preferred?$preferred.replace(/[^0-9,]/g, ''):null;
          //preferred images          
          if($preferred){
            $loading_icon.show();
            preferred_array = $preferred.split(',');
            $.getJSON( "/catalog/api/naIds=" + $preferred , function( data ) {                            
              var tmp_data={};
              for (var i in data['data']) {
                indx=preferred_array.indexOf(data['data'][i]['naId']);
                data['data'][i]['weight'] = (indx == -1)?'9999999999':indx;
                tmp_data[data['data'][i]['naId']] = data['data'][i];                
              }              
              var tmp_data= sortProperties(tmp_data,'weight',true);              
              
              var sorted_data = [];
              for(var i in tmp_data){
                sorted_data.push(tmp_data[i][1]);
              }              
              data['data'] = sorted_data;
              loadInitalItems(data);
              $loading_icon.hide();
            });
            
            $(".fancybox" + id).fancybox({
              beforeLoad:function(){
                //console.log(this.element.parent().find('.caption'));//.getElementsByClassName("caption"));
                this.tpl.wrap='<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div>' + this.element.parent().find('.caption').html() + '</div></div></div>';
              },                
              helpers:  {
                  title : {
                      type : 'inside',
                      position: 'bottom'
                  }
              }
            });
          }
          
          
          if($query){
            $loading_icon.show();
            $.getJSON( "/catalog/api/" + $query + '&rows='+rows, function( data ) {              
              /*
              console.log(data['stat']);
              console.log('start');
              console.log(data); 
              */
                                         
              
              var offset = loadInitalItems(data);
              //var offset = parseInt(data['stat']['offset']);
              
                $(".fancybox" + id).fancybox({
                  beforeShow: function () {                  
                  var imgAlt = $(this.element).find("img").attr("alt");
                  var dataAlt = $(this.element).data("alt");
                  if (imgAlt) {
                    $(".fancybox-image").attr("alt", imgAlt);
                  }else if (dataAlt) {
                    $(".fancybox-image").attr("alt", dataAlt);
                  }
                },
                beforeLoad:function(){
                  //console.log(this.element.parent().find('.caption'));//.getElementsByClassName("caption"));
                  this.tpl.wrap='<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div>' + this.element.parent().find('.caption').html() + '</div></div></div>';
                },                
                helpers:  {
                    title : {
                        type : 'inside',
                        position: 'bottom'
                    }
                }
              });
              
              $loading_icon.hide();
              //console.log(data['stat']); 
              
              //$.getJSON( "/catalog/api/" + $query + '&offset=' + (parseInt(offset) + parseInt(rows) ) + '&rows=' + rows, function( data ) {                                
              console.log('offseta: ' + offset);
              $.getJSON( "/catalog/api/" + $query + '&offset=' + offset  + '&rows=' + rows, function( data ) {                                
                //console.log(data['stat']);
                var $button = $('<button>',{class:'btn btn-default bt-load-more'}).text('Load more');
                
                // load more
                $button.click(function(){
                  /*
                  console.log('click offset: ' + $query + (offset+1) );
                  console.log("/catalog/api/" + $query + '&offset=' + (offset + 20));
                  */
                  $loading_icon.show();
                  $button.toggle();
                  //console.log('query: ' + "/catalog/api/" + $query + '&offset=' + (parseInt(offset) +rows) + '&rows=' + rows);
                  console.log('result id: ' + id + ' - click offset: ' + parseInt(offset));
                  var q= "/catalog/api/" + $query + '&offset=' + parseInt(offset) + '&rows=' + rows;
                  
                  $.getJSON(q , function( data ) {                                  
                    //console.log(data);
                    
                    $.each( data['data'], function( key, values ) {                      
                      if(preferred_array.indexOf(values['naId']) == -1){
                        var $caption;
                        var $content;
                        var $a;
                        var $li = $("<li>",{class:($type=='list')?'filelist':'imagelist'});                                
                        
                        var $img = $("<img>",{src:values['path'],alt:values['title'],title:values['title']});
                        
                        var $original_image = $("<img>",{src:values['path_org'],alt:values['title'],title:values['title'],style:'width:100%;max-width:800px'});
                        
                        
                        
                        if($type == 'list'){
                          $content= $("<div>",{class:'filecontent'});
                          $a = $("<a>",{'href':values['path_org'],'class':'fancybox'+id, 'rel':'group'+id,'data-alt':values['title'] });
                          $desc=$("<div>",{class:'filedesc'}).html("<div><b><a class='' target='_blank' href='" + values['pdf'] + "'>" + values['title'] + '</a></b>' + 
                                  (values['description']? '<br>' + values['description']:'') + '<br>' +
                                  (typeof values['collectionIdentifier'] == 'undefined' ? '':'From Collection: ' + values['collectionIdentifier'] + '<br>' + values['seriesTitle'] + '<br>') +
                                  "<a target='_blank' href='https://catalog.archives.gov/id/" + values['naId'] + "'>View in Online Catalog</a><br>(NAID: " + values['naId'] + ")</div>");
                                  
                                $caption=$("<div>",{class:'caption',style:'display:none'}).html("<div><b>" + values['title'] + '</b>' + 
                                  (values['description']? '<br>' + values['description']:'')  + " <a target='_blank' href='https://catalog.archives.gov/id/" + values['naId'] + "'>View in Online Catalog</a><br>(NAID: " + values['naId'] + ")</div>");
                          $content.append($desc);
                        }
                        else{
                          $content= $("<div>",{style:'display:none', id:'content-'+values['naId'],class:'imagecontent'});
                          $a = $("<a>",{'href':'#content-'+values['naId'],'class':'fancybox'+id, 'rel':'group'+id, });                
                          $caption=$("<div>",{class:'caption',style:'display:none'}).html("<div><b>" + values['title'] + '</b>' + 
                            (values['description']? '<br>' + values['description']:'') + " <a target='_blank' href='https://catalog.archives.gov/id/" + values['naId'] + "'>View in Online Catalog</a><br>(NAID: " + values['naId'] + ")</div>");
                            
                          $content.append($original_image);
                        }
                        
                        
                        
                        $content.append($caption);
                        
                        $a.append($img);
                        $li.append($a);
                        $li.append($content);
                        $ul.append($li);
                        /*
                        $a.fancybox({
                          beforeShow: function () {                        
                            var imgAlt = $(this.element).find("img").attr("alt");
                            var dataAlt = $(this.element).data("alt");
                            if (imgAlt) {
                              $(".fancybox-image").attr("alt", imgAlt);
                            }else if (dataAlt) {
                              $(".fancybox-image").attr("alt", dataAlt);
                            }
                          },
                          beforeLoad:function(){
                            //console.log(this.element.parent().find('.caption'));//.getElementsByClassName("caption"));
                            this.tpl.wrap='<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div>' + this.element.parent().find('.caption').html() + '</div></div></div>';
                          },                
                          helpers:  {
                              title : {
                                  type : 'inside',
                                  position: 'bottom'
                              }
                          }
                        });
                        */
                      }
                    });                                  
                    $(".fancybox" + id).fancybox({
                        beforeShow: function () {                  
                        var imgAlt = $(this.element).find("img").attr("alt");
                        var dataAlt = $(this.element).data("alt");
                        if (imgAlt) {
                          $(".fancybox-image").attr("alt", imgAlt);
                        }else if (dataAlt) {
                          $(".fancybox-image").attr("alt", dataAlt);
                        }
                      },
                      beforeLoad:function(){
                        //console.log(this.element.parent().find('.caption'));//.getElementsByClassName("caption"));
                        this.tpl.wrap='<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div>' + this.element.parent().find('.caption').html() + '</div></div></div>';
                      },                
                      helpers:  {
                          title : {
                              type : 'inside',
                              position: 'bottom'
                          }
                      }
                    });
                    
                    offset = parseInt(data['stat']['offset']) + getNumber(data['stat']['rows']);
                    console.log('New rows loaded: ' + getNumber(data['stat']['rows']));
                    
                    // disable button
                    //console.log('raw total: ' + data['stat']['raw-total'] + ' rows: ' + data['stat']['rows'] + ' (' + getNumber(data['stat']['rows']) + ') offset: ' + data['stat']['offset']);
                    
                    $loading_icon.show();
                    $.getJSON( "/catalog/api/" + $query + '&offset=' + (parseInt(offset) + parseInt(rows)) + "&rows="+rows, function( data ) {
                      if(getNumber(data['stat']['rows']) > 0){
                      //if( data['stat']['total'] > 0){
                        //$button.hide();                        
                        $button.toggle();                        
                      }
                      console.log("Result stat:");
                      console.log(data['stat']);
                      console.log('More prefetched rows: ' + getNumber(data['stat']['rows']));
                      $loading_icon.hide();
                    });
                    
                  });
                  
                });
                
                
                console.log('debug');
                /*
                console.log(data['stat']['offset'] + data['stat']['rows']);
                console.log(data['stat']['raw-total']);
                console.log(data['stat']['total']);                
                
                console.log('offset: ' + offset + ' rows:' + getNumber(data['stat']['rows']));
                */
                console.log(data);
                if(getNumber(data['stat']['rows']) > 0){
                //if(data['stat']['total'] > 0){
                  var $div=$('<div>',{class:'loadmore'});
                  $div.append($button);
                  $div.appendTo($this);                  
                }                  
              });
              
              
              
              
              
              
            });
            
            
            
            
          }
          
          function loadInitalItems(data){
            console.log(data);            
            console.log($ul.children('li').length);
            max=rows - $ul.children('li').length;
            i=0;
            lastnum=-1;
            $.each( data['data'], function( key, values ) {                                 
              if(typeof values['num'] === 'undefined' || (preferred_array.indexOf(values['naId']) == -1 && i < max)){
                i++;
                lastnum = values['num'];
                var $caption;
                var $content;
                var $a;
                var $li = $("<li>",{class:($type=='list')?'filelist':'imagelist'});                                
                
                var $img = $("<img>",{src:values['path'],alt:values['title'],title:values['title']});
                
                var $original_image = $("<img>",{src:values['path_org'],alt:values['title'],title:values['title'],style:'width:100%;max-width:800px'});
                
                
                if($type == 'list'){
                  $content= $("<div>",{class:'filecontent'});
                  $a = $("<a>",{'href':values['path_org'],'class':'fancybox'+id, 'rel':'group'+id, 'data-alt':values['title']});
                  $desc=$("<div>",{class:'filedesc'}).html("<div><b><a class='' target='_blank' href='" + values['pdf'] + "'>" + values['title'] + '</a></b>' + 
                          (values['description']? '<br>' + values['description']:'')  + '<br>' +
                          (typeof values['collectionIdentifier'] == 'undefined' ? '':'From Collection: ' + values['collectionIdentifier'] + '<br>' + values['seriesTitle'] + '<br>') +
                          
                          "<a target='_blank' href='https://catalog.archives.gov/id/" + values['naId'] + "'>View in Online Catalog</a><br>(NAID: " + values['naId'] + ")</div>");
                          
                        $caption=$("<div>",{class:'caption',style:'display:none'}).html("<div><b>" + values['title'] + '</b>' + 
                          (values['description']? '<br>' + values['description']:'')  + " <a target='_blank' href='https://catalog.archives.gov/id/" + values['naId'] + "'>View in Online Catalog</a><br>(NAID: " + values['naId'] + ")</div>");
                  $content.append($desc);
                }
                else{
                  $content= $("<div>",{style:'display:none', id:'content-'+values['naId'],class:'imagecontent'});
                  $a = $("<a>",{'href':'#content-'+values['naId'],'class':'fancybox'+id, 'rel':'group'+id, });                
                  $caption=$("<div>",{class:'caption',style:'display:none'}).html("<div><b>" + values['title'] + '</b>' + 
                    (values['description']? '<br>' + values['description']:'')  + " <a target='_blank' href='https://catalog.archives.gov/id/" + values['naId'] + "'>View in Online Catalog</a><br>(NAID: " + values['naId'] + ")</div>");
                    
                  $content.append($original_image);
                }
                
                
                
                $content.append($caption);
                
                $a.append($img);
                $li.append($a);
                $li.append($content);
                $ul.append($li);                 
              }
            });
            
            if(lastnum >=0){
              return ++lastnum;
            }
            return 0;
          }
        });
      });
    
      function getNumber(x) {
        var parsed = parseInt(x);
        if (isNaN(parsed)) { return 0 }
        return parsed;
      }
      
      /**
       * Sort object properties (only own properties will be sorted).
       * @param {object} obj object to sort properties
       * @param {string|int} sortedBy 1 - sort object properties by specific value.
       * @param {bool} isNumericSort true - sort object properties as numeric value, false - sort as string value.
       * @param {bool} reverse false - reverse sorting.
       * @returns {Array} array of items in [[key,value],[key,value],...] format.
       */
      function sortProperties(obj, sortedBy, isNumericSort, reverse) {
          sortedBy = sortedBy || 1; // by default first key
          isNumericSort = isNumericSort || false; // by default text sort
          reverse = reverse || false; // by default no reverse

          var reversed = (reverse) ? -1 : 1;

          var sortable = [];
          for (var key in obj) {
              if (obj.hasOwnProperty(key)) {
                  sortable.push([key, obj[key]]);
              }
          }
          if (isNumericSort)
              sortable.sort(function (a, b) {
                  return reversed * (a[1][sortedBy] - b[1][sortedBy]);
              });
          else
              sortable.sort(function (a, b) {
                  var x = a[1][sortedBy].toLowerCase(),
                      y = b[1][sortedBy].toLowerCase();
                  return x < y ? reversed * -1 : x > y ? reversed : 0;
              });
          return sortable; // array in format [ [ key1, val1 ], [ key2, val2 ], ... ]
      }
      
      function hashCode(s){
        return Math.abs(s.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0));              
      }
      
  	}
  };
}(jQuery));;
function drawImage(document_id) {
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
 // ctx.clearRect(0, 0, 600px, 600px);
  
  canvas.height = 1200;
  canvas.width = 990;
  const img = document.querySelector('img.active');  
  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

 
  var font =  document.querySelector('input[name="penmanship"]:checked').value;
   ctx.font = "36px " + font;
  
  var text = document.getElementById('custom-text').value;
   
  if (document_id == 2) {
   x = canvas.width/10;
   y = canvas.height - canvas.height/3.5;
  }
  else if (document_id == 1) {
   x = canvas.width/10;
   y = canvas.height - canvas.height/8;
  }
  else if (document_id == 3) {
   x = canvas.width/2.5;
   y = canvas.height - canvas.height/16;
   }
   ctx.fillText(text, x, y);
   url = canvas.toDataURL();
   canvas.toBlob(function(blob){
     const anchor = document.getElementById('dlink'); 
     anchor.href = URL.createObjectURL(blob);
   });

return url;
}

(function ($) {
  var document_id = 1;
  $(document).ready(function() {
    
    
    $(".box").on('click', function() { 
       $(".box").removeClass("active");
       $(".box").children("img").removeClass("active");
       $(this).addClass("active"); 
       $(this).children("img").addClass("active");
       if ($("#billofrights").hasClass("active")) {
         $(".custom-text").text("Bill of Rights");
         document_id = 3;
         $(".independence-text").addClass("custom-hide");
       }
       else if ($("#constitution").hasClass("active")) {
         $(".custom-text").text("Constitution");
         document_id = 2;
         $(".independence-text").addClass("custom-hide");
         $(".constitution-text").removeClass("custom-hide");
       }
       else { 
         $(".custom-text").text("Declaration of Independence");
         $(".independence-text").removeClass("custom-hide");
         $(".constitution-text").addClass("custom-hide");
         document_id = 1;  
       }
    });

    $("button").on('click', function() {
       $(".download-link").html('<button><a id="dlink" download>Download this image</a></button>');
       var img_url = drawImage(document_id);
       $("#canvas").addClass("canvas-full-width");
       //$(".download-link").html('<button><a href="' + img_url + '" download>Download this image</a></button>');
    });


  })
}(jQuery));
;
(function ($) {
  Drupal.behaviors.user_alert_get_message = {
    attach: function(context) {
      $.ajax({
        type: 'GET',
        url: Drupal.settings.basePath + Drupal.settings.pathPrefix + Drupal.settings.user_alert.url_prefix + 'js/user-alert/get-message',
        data: {
          path: Drupal.settings.user_alert.current_path
        },
        success: function(response) {
          // Add to Col-B

          /*
          $('#sidebar #alert-block').remove();
          $('<div id="alert-block"><div class="block-user-alert-holder"></div></div>').prependTo('#sidebar');
          */
          //if(! $('#sidebar').length && ! $('.page-admin').length && ! $('.page-node-edit').length && ! $('.front').length){
          if( ! $('.page-admin').length && ! $('.page-node-edit').length && ! $('.front').length){

            $('<div id="alert-block"><div class="block-user-alert-holder"></div></div>').prependTo('#block-system-main');

          }

          var response_data = response[1].data;

          if (response_data.length > 1) {
            $('#alert-block').html('<div class="block-user-alert-holder">' + response_data + '</div>');
            if($('.jPanelMenu #block-system-main').length > 0){
                $('.block-user-alert-holder').detach().prependTo('#block-system-main');
            }
          }
          if ($('.front .block-user-alert-holder .replace-all').length > 0) {
            // We are on the homepage and need to remove elements.
//            $('#home-nav, #mega-footer, .view-display-id-ticker').remove();
          }


        },
      });

      $('body').delegate('div.user-alert-close a', 'click', function() {
        id = $(this).attr('rel');
        $.ajax({
          type: 'GET',
          data: 'message=' + id,
          url: Drupal.settings.basePath + Drupal.settings.user_alert.url_prefix + 'js/user-alert/close-message',
          success: function(response) {
            $('#user-alert-' + id).fadeOut('slow');
          }
        });
      });
  	}
  };
}(jQuery));
;

</script>

</body>
</html>
