<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>integration-indusind.html</title>
</head>
<body>

<script>
//Update Js on 21st Sep 2022;
var dateTime = new Date().getTime();
// https://indusind-dev2.active.ai/morfeuswebsdk/libs/websdk/images/default/widget.png
var srcWebSdk =
  "https://chatbot-api.indusind.com/libs/websdk/sdk.js?version=" + dateTime;

var cb = document.createElement("script");
cb.type = "text/javascript";
cb.async = true;
cb.id = "webSdk";
cb.src = srcWebSdk;
var scr = document.getElementsByTagName("script")[0];
scr.parentNode.insertBefore(cb, scr);

//show chatbot Icon
createChatbotElements();

function createChatbotElements() {
  var div_defChatButtonContainer = document.createElement("div");
  div_defChatButtonContainer.id = "defChatButtonContainer";
  div_defChatButtonContainer.className = "chatbot-icon-container";
  document.body.appendChild(div_defChatButtonContainer);

  div_defChatButtonContainer.addEventListener("click", function (event) {
    $("#defChatButtonContainer").hide();
    deployBot();
  });

  var div_chatbot_button = document.createElement("div");
  div_chatbot_button.className += "chat-button-container";
  div_defChatButtonContainer.appendChild(div_chatbot_button);

  var buttons_container = document.createElement("div");
  buttons_container.className += "buttons-container";
  //div_chatbot_button.appendChild(buttons_container); //Commented by LR

  var text = ["Deposits", "Account balance", "How can I help you ?"];
  var buttonClassName = ["Button-deposite", "Button-account", "Button-help"];
  for (var i = 0; i < text.length; i += 1) {
    var button = document.createElement("button");
    button.className = buttonClassName[i];
    button.innerHTML = text[i];
    buttons_container.appendChild(button);
  }

  var chat_icon_container = document.createElement("div");
  chat_icon_container.className += "chat-icon-container";
  div_chatbot_button.appendChild(chat_icon_container);

  var chat_icon = document.createElement("img");
  chat_icon.src =
    "https://chatbot-api.indusind.com/libs/websdk/images/default/widget2.png";
  chat_icon_container.appendChild(chat_icon);
}
var hostname = "https://chatbot-api.indusind.com";
function deployBot() {
  var customerId = "";
  var appSessionToken = "";
  var initAndShow = "1";
  var showInWebview = "0";

  var endpointUrl = "https://chatbot.indusind.com/morfeus/v1/channels";

  var desktop = {
    chatWindowHeight: "90%",
    chatWindowWidth: "27%",
    chatWindowRight: "20px",
    chatWindowBottom: "20px",
    webviewSize: "full",
  };

  var initParam = {
    customerId: customerId,
    desktop: desktop,
    initAndShow: initAndShow,
    showInWebview: showInWebview,
    endpointUrl: endpointUrl,
    botId: "100w53412209293",
    webviewDomain: "https://chatbot.indusind.com",
    domain: "https://chatbot-api.indusind.com",
    baseSdkPath: "https://chatbot-api.indusind.com/libs/websdk/",
    botName: "indusind",
    apiKey: "1234567",
    dualMode: "0",
    debugMode: "0",
    timeout: 1000 * 60 * 15,
    idleTimeout: 1000 * 60 * 15,
    minimizedState: true,
    quickTags: {
      enable: true,
      overrideDefaultTags: true,
      tags: [],
    },
    autoSuggestConfig: {
      enabled: true,
      noOfLetters: 2,
      enableSearchRequest: true,
    },
    sdkType: "w",
    reinitiateMessage:
      "Looks like something went wrong. Reinitializing the chat window.",
    locationBlockedMsg:
      "IndusAssist needs permission to access your location. Please update your browser settings or click on" +
      " Select Different Location.",
    unLinkifyEmail: true,
    focusOnQuery: true,
    errStatusMsg:
      "I'm experiencing some difficulty in processing due to some issue. Could you please try again?",
    sseConfig: {
      enabled: true,
    },
  };
  setTimeout(function () {
    websdk.initialize(initParam);
  }, 3000);
}

</script>

</body>
</html>
