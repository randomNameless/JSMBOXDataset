<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>educator.min.ACSHASHc328ad43291a4d6d35d18cb33d42e751.html</title>
</head>
<body>

<script>
/*! algoliasearch-lite.umd.js | 4.12.1 | Â© Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).algoliasearch=t()}(this,(function(){"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e){var t,r="algoliasearch-client-js-".concat(e.key),n=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(n().getItem(r)||"{}")};return{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var r=JSON.stringify(e),n=a()[r];return Promise.all([n||t(),void 0!==n])})).then((function(e){var t=o(e,2),n=t[0],a=t[1];return Promise.all([n,a||r.miss(n)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var o=a();return o[JSON.stringify(e)]=t,n().setItem(r,JSON.stringify(o)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=a();delete t[JSON.stringify(e)],n().setItem(r,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){n().removeItem(r)}))}}}function i(e){var t=a(e.caches),r=t.shift();return void 0===r?{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},n=t();return n.then((function(e){return Promise.all([e,r.miss(e)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(e,n,o).catch((function(){return i({caches:t}).get(e,n,o)}))},set:function(e,n){return r.set(e,n).catch((function(){return i({caches:t}).set(e,n)}))},delete:function(e){return r.delete(e).catch((function(){return i({caches:t}).delete(e)}))},clear:function(){return r.clear().catch((function(){return i({caches:t}).clear()}))}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(r);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var u=n(),i=o&&o.miss||function(){return Promise.resolve()};return u.then((function(e){return i(e)})).then((function(){return u}))},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function l(e,t){return t?(Object.keys(t).forEach((function(r){e[r]=t[r](e)})),e):e}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0;return e.replace(/%s/g,(function(){return encodeURIComponent(r[o++])}))}var h={WithinQueryParameters:0,WithinHeaders:1};function d(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach((function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(n[e]=r[e])})),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var m={Read:1,Write:2,Any:3},p=1,v=2,y=3;function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return r(r({},e),{},{status:t,lastUpdate:Date.now()})}function b(e){return"string"==typeof e?{protocol:"https",url:e,accept:m.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||m.Any}}var O="GET",P="POST";function q(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(g(t))}))}))).then((function(e){var r=e.filter((function(e){return function(e){return e.status===p||Date.now()-e.lastUpdate>12e4}(e)})),n=e.filter((function(e){return function(e){return e.status===y&&Date.now()-e.lastUpdate<=12e4}(e)})),o=[].concat(a(r),a(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:o.length>0?o.map((function(e){return b(e)})):t}}))}function w(e,t,n,o){var u=[],i=function(e,t){if(e.method===O||void 0===e.data&&void 0===t.data)return;var n=Array.isArray(e.data)?e.data:r(r({},e.data),t.data);return JSON.stringify(n)}(n,o),s=function(e,t){var n=r(r({},e.headers),t.headers),o={};return Object.keys(n).forEach((function(e){var t=n[e];o[e.toLowerCase()]=t})),o}(e,o),c=n.method,l=n.method!==O?{}:r(r({},n.data),o.data),f=r(r(r({"x-algolia-agent":e.userAgent.value},e.queryParameters),l),o.queryParameters),h=0,d=function t(r,a){var l=r.pop();if(void 0===l)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:A(u)};var d={data:i,headers:s,method:c,url:S(l,n.path,f),connectTimeout:a(h,e.timeouts.connect),responseTimeout:a(h,o.timeout)},m=function(e){var t={request:d,response:e,host:l,triesLeft:r.length};return u.push(t),t},p={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(n){var o=m(n);return n.isTimedOut&&h++,Promise.all([e.logger.info("Retryable failure",x(o)),e.hostsCache.set(l,g(l,n.isTimedOut?y:v))]).then((function(){return t(r,a)}))},onFail:function(e){throw m(e),function(e,t){var r=e.content,n=e.status,o=r;try{o=JSON.parse(r).message}catch(e){}return function(e,t,r){return{name:"ApiError",message:e,status:t,transporterStackTrace:r}}(o,n,t)}(e,A(u))}};return e.requester.send(d).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,r=e.status;return!t&&0==~~r}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,p)}))};return q(e.hostsCache,t).then((function(e){return d(a(e.statelessHosts).reverse(),e.getTimeout)}))}function j(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(e){var r="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===t.value.indexOf(r)&&(t.value="".concat(t.value).concat(r)),t}};return t}function S(e,t,r){var n=T(r),o="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t);return n.length&&(o+="?".concat(n)),o}function T(e){return Object.keys(e).map((function(t){return f("%s=%s",t,(r=e[t],"[object Object]"===Object.prototype.toString.call(r)||"[object Array]"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join("&")}function A(e){return e.map((function(e){return x(e)}))}function x(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return r(r({},e),{},{request:r(r({},e.request),{},{headers:r(r({},e.request.headers),t)})})}var N=function(e){var t=e.appId,n=function(e,t,r){var n={"x-algolia-api-key":r,"x-algolia-application-id":t};return{headers:function(){return e===h.WithinHeaders?n:{}},queryParameters:function(){return e===h.WithinQueryParameters?n:{}}}}(void 0!==e.authMode?e.authMode:h.WithinHeaders,t,e.apiKey),a=function(e){var t=e.hostsCache,r=e.logger,n=e.requester,a=e.requestsCache,u=e.responsesCache,i=e.timeouts,s=e.userAgent,c=e.hosts,l=e.queryParameters,f={hostsCache:t,logger:r,requester:n,requestsCache:a,responsesCache:u,timeouts:i,userAgent:s,headers:e.headers,queryParameters:l,hosts:c.map((function(e){return b(e)})),read:function(e,t){var r=d(t,f.timeouts.read),n=function(){return w(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Read)})),e,r)};if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return n();var a={request:e,mappedRequestOptions:r,transporter:{queryParameters:f.queryParameters,headers:f.headers}};return f.responsesCache.get(a,(function(){return f.requestsCache.get(a,(function(){return f.requestsCache.set(a,n()).then((function(e){return Promise.all([f.requestsCache.delete(a),e])}),(function(e){return Promise.all([f.requestsCache.delete(a),Promise.reject(e)])})).then((function(e){var t=o(e,2);t[0];return t[1]}))}))}),{miss:function(e){return f.responsesCache.set(a,e)}})},write:function(e,t){return w(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Write)})),e,d(t,f.timeouts.write))}};return f}(r(r({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:m.Read},{url:"".concat(t,".algolia.net"),accept:m.Write}].concat(c([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:r(r(r({},n.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return l({transporter:a,appId:t,addAlgoliaAgent:function(e,t){a.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then((function(){}))}},e.methods)},C=function(e){return function(t,r){return t.method===O?e.transporter.read(t,r):e.transporter.write(t,r)}},k=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return l(n,r.methods)}},J=function(e){return function(t,n){var o=t.map((function(e){return r(r({},e),{},{params:T(e.params||{})})}));return e.transporter.read({method:P,path:"1/indexes/*/queries",data:{requests:o},cacheable:!0},n)}},E=function(e){return function(t,o){return Promise.all(t.map((function(t){var a=t.params,u=a.facetName,i=a.facetQuery,s=n(a,["facetName","facetQuery"]);return k(e)(t.indexName,{methods:{searchForFacetValues:R}}).searchForFacetValues(u,i,r(r({},o),s))})))}},I=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n)}},F=function(e){return function(t,r){return e.transporter.read({method:P,path:f("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},r)}},R=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},D=1,W=2,H=3;function Q(e,t,n){var o,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return r.setRequestHeader(t,e.headers[t])}));var n,o=function(e,n){return setTimeout((function(){r.abort(),t({status:0,content:n,isTimedOut:!0})}),1e3*e)},a=o(e.connectTimeout,"Connection timeout");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===n&&(clearTimeout(a),n=o(e.responseTimeout,"Socket timeout"))},r.onerror=function(){0===r.status&&(clearTimeout(a),clearTimeout(n),t({content:r.responseText||"Network request failed",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(a),clearTimeout(n),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))}},logger:(o=H,{debug:function(e,t){return D>=o&&console.debug(e,t),Promise.resolve()},info:function(e,t){return W>=o&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:s(),requestsCache:s({serializable:!1}),hostsCache:i({caches:[u({key:"".concat("4.12.1","-").concat(e)}),s()]}),userAgent:j("4.12.1").add({segment:"Browser",version:"lite"}),authMode:h.WithinQueryParameters};return N(r(r(r({},a),n),{},{methods:{search:J,searchForFacetValues:E,multipleQueries:J,multipleSearchForFacetValues:E,customRequest:C,initIndex:function(e){return function(t){return k(e)(t,{methods:{search:F,searchForFacetValues:R,findAnswers:I}})}}}}))}return Q.version="4.12.1",Q}));

/*! InstantSearch.js 4.39.0 | Â© Algolia, Inc. and contributors; MIT License | https://github.com/algolia/instantsearch.js */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).instantsearch=t()}(this,function(){"use strict";function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){k(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(r);if(i){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?j(e):t}(this,e)}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function u(e,t){if(e===t)return e;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&"__proto__"!==n){var r=t[n],i=e[n];void 0!==i&&void 0===r||(c(i)&&c(r)?e[n]=u(i,r):e[n]="object"==typeof(a=r)&&null!==a?u(Array.isArray(a)?[]:{},a):a)}var a;return e}var m=function(e){c(e)||(e={});for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];c(r)&&u(e,r)}return e},p=function(){return Array.prototype.slice.call(arguments).reduceRight(function(t,n){return Object.keys(Object(n)).forEach(function(e){void 0!==n[e]&&(void 0!==t[e]&&delete t[e],t[e]=n[e])}),t},{})};var l=function(n,r){return n.filter(function(e,t){return-1<r.indexOf(e)&&n.indexOf(e)===t})},g=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]};var d=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")};var v=function(e,t){if(null===e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i};var y=function(e){return e&&0<Object.keys(e).length},t=function(e){return null!==e&&/^[a-zA-Z0-9_-]{1,64}$/.test(e)},b={addRefinement:function(e,t,n){if(b.isRefined(e,t,n))return e;var r=""+n,i=e[t]?e[t].concat(r):[r],a={};return a[t]=i,p({},a,e)},removeRefinement:function(e,n,t){if(void 0===t)return b.clearRefinement(e,function(e,t){return n===t});var r=""+t;return b.clearRefinement(e,function(e,t){return n===t&&r===e})},toggleRefinement:function(e,t,n){if(void 0===n)throw new Error("toggleRefinement should be used with a value");return b.isRefined(e,t,n)?b.removeRefinement(e,t,n):b.addRefinement(e,t,n)},clearRefinement:function(i,a,s){if(void 0===a)return y(i)?{}:i;if("string"==typeof a)return v(i,[a]);if("function"==typeof a){var o=!1,e=Object.keys(i).reduce(function(e,t){var n=i[t]||[],r=n.filter(function(e){return!a(e,t,s)});return r.length!==n.length&&(o=!0),e[t]=r,e},{});return o?e:i}},isRefined:function(e,t,n){var r=!!e[t]&&0<e[t].length;if(void 0===n||!r)return r;var i=""+n;return-1!==e[t].indexOf(i)}},R=b;function S(e,n){return Array.isArray(e)&&Array.isArray(n)?e.length===n.length&&e.every(function(e,t){return S(n[t],e)}):e===n}function w(e){var r=e?w._parseNumbers(e):{};void 0===r.userToken||t(r.userToken)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=r.facets||[],this.disjunctiveFacets=r.disjunctiveFacets||[],this.hierarchicalFacets=r.hierarchicalFacets||[],this.facetsRefinements=r.facetsRefinements||{},this.facetsExcludes=r.facetsExcludes||{},this.disjunctiveFacetsRefinements=r.disjunctiveFacetsRefinements||{},this.numericRefinements=r.numericRefinements||{},this.tagRefinements=r.tagRefinements||[],this.hierarchicalFacetsRefinements=r.hierarchicalFacetsRefinements||{};var i=this;Object.keys(r).forEach(function(e){var t=-1!==w.PARAMETERS.indexOf(e),n=void 0!==r[e];!t&&n&&(i[e]=r[e])})}w.PARAMETERS=Object.keys(new w),w._parseNumbers=function(i){if(i instanceof w)return i;var r={};if(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach(function(e){var t=i[e];if("string"==typeof t){var n=parseFloat(t);r[e]=isNaN(n)?t:n}}),Array.isArray(i.insideBoundingBox)&&(r.insideBoundingBox=i.insideBoundingBox.map(function(e){return Array.isArray(e)?e.map(function(e){return parseFloat(e)}):e})),i.numericRefinements){var a={};Object.keys(i.numericRefinements).forEach(function(n){var r=i.numericRefinements[n]||{};a[n]={},Object.keys(r).forEach(function(e){var t=r[e].map(function(e){return Array.isArray(e)?e.map(function(e){return"string"==typeof e?parseFloat(e):e}):"string"==typeof e?parseFloat(e):e});a[n][e]=t})}),r.numericRefinements=a}return m({},i,r)},w.make=function(e){var n=new w(e);return(e.hierarchicalFacets||[]).forEach(function(e){if(e.rootPath){var t=n.getHierarchicalRefinement(e.name);0<t.length&&0!==t[0].indexOf(e.rootPath)&&(n=n.clearRefinements(e.name)),0===(t=n.getHierarchicalRefinement(e.name)).length&&(n=n.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}}),n},w.validate=function(e,t){var n=t||{};return e.tagFilters&&n.tagRefinements&&0<n.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&n.numericRefinements&&y(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):y(e.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},w.prototype={constructor:w,clearRefinements:function(e){var t={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:R.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:R.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:R.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:R.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return t.numericRefinements===this.numericRefinements&&t.facetsRefinements===this.facetsRefinements&&t.facetsExcludes===this.facetsExcludes&&t.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&t.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(t)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,n){var r=d(n);if(this.isNumericRefined(e,t,r))return this;var i=m({},this.numericRefinements);return i[e]=m({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(r)):i[e][t]=[r],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(n,r,i){return void 0!==i?this.isNumericRefined(n,r,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n&&e.op===r&&S(e.val,d(i))})}):this:void 0!==r?this.isNumericRefined(n,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n&&e.op===r})}):this:this.isNumericRefined(n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(s){if(void 0===s)return y(this.numericRefinements)?{}:this.numericRefinements;if("string"==typeof s)return v(this.numericRefinements,[s]);if("function"==typeof s){var o=!1,t=this.numericRefinements,e=Object.keys(t).reduce(function(e,r){var i=t[r],a={};return i=i||{},Object.keys(i).forEach(function(t){var e=i[t]||[],n=[];e.forEach(function(e){s({val:e,op:t},r,"numeric")||n.push(e)}),n.length!==e.length&&(o=!0),a[t]=n}),e[r]=a,e},{});return o?e:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:R.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:R.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return R.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:R.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:R.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return R.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:R.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return R.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:R.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var e={tagRefinements:this.tagRefinements.filter(function(e){return e!==t})};return this.setQueryParameters(e)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:R.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:R.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:R.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r={};return void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+n))?-1===t.indexOf(n)?r[e]=[]:r[e]=[t.slice(0,t.lastIndexOf(n))]:r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:p({},r,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var n={};return n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:p({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:p({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<this.disjunctiveFacets.indexOf(e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<this.facets.indexOf(e)},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&R.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&R.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&R.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))return!1;var n=this.getHierarchicalRefinement(e);return t?-1!==n.indexOf(t):0<n.length},isNumericRefined:function(e,t,n){if(void 0===n&&void 0===t)return!!this.numericRefinements[e];var r=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t];if(void 0===n||!r)return r;var i=d(n),a=void 0!==function(e,t){return g(e,function(e){return S(e,t)})}(this.numericRefinements[e][t],i);return r&&a},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var t=this,e=l(Object.keys(this.numericRefinements).filter(function(e){return 0<Object.keys(t.numericRefinements[e]).length}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(e){return 0<t.disjunctiveFacetsRefinements[e].length}).concat(e).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){var t=this;return l(this.hierarchicalFacets.map(function(e){return e.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(e){return 0<t.hierarchicalFacetsRefinements[e].length}))},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return-1===t.indexOf(e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var n=this.managedParameters,r={},i=this;return Object.keys(this).forEach(function(e){var t=i[e];-1===n.indexOf(e)&&void 0!==t&&(r[e]=t)}),r},setQueryParameter:function(e,t){if(this[e]===t)return this;var n={};return n[e]=t,this.setQueryParameters(n)},setQueryParameters:function(e){if(!e)return this;var t=w.validate(this,e);if(t)throw t;var n=this,i=w._parseNumbers(e),r=Object.keys(this).reduce(function(e,t){return e[t]=n[t],e},{}),a=Object.keys(i).reduce(function(e,t){var n=void 0!==e[t],r=void 0!==i[t];return n&&!r?v(e,[t]):(r&&(e[t]=i[t]),e)},r);return new this.constructor(a)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(t){return g(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e));return t.split(n).map(function(e){return e.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var _=w;function N(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=void 0!==t,a=null===t;if(!a&&t<e||r&&i||!n)return 1;if(!r&&e<t||a&&n||!i)return-1}return 0}function x(e){return Array.isArray(e)?e.filter(Boolean):[]}function I(e,t){if(!Array.isArray(e))return-1;for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function F(e,t){var i=(t||[]).map(function(e){return e.split(":")});return e.reduce(function(e,t){var n=t.split(":"),r=g(i,function(e){return e[0]===n[0]});return 1<n.length||!r?(e[0].push(n[0]),e[1].push(n[1])):(e[0].push(r[0]),e[1].push(r[1])),e},[[],[]])}var T=function(e,n,i){if(!Array.isArray(e))return[];Array.isArray(i)||(i=[]);var t=e.map(function(t,e){return{criteria:n.map(function(e){return t[e]}),index:e,value:t}});return t.sort(function(e,t){for(var n=-1;++n<e.criteria.length;){var r=N(e.criteria[n],t.criteria[n]);if(r)return n>=i.length?r:"desc"===i[n]?-r:r}return e.index-t.index}),t.map(function(e){return e.value})},A=function(d){return function(e,t){var n=d.hierarchicalFacets[t],r=d.hierarchicalFacetsRefinements[n.name]&&d.hierarchicalFacetsRefinements[n.name][0]||"",i=d._getHierarchicalFacetSeparator(n),a=d._getHierarchicalRootPath(n),s=d._getHierarchicalShowParentLevel(n),o=F(d._getHierarchicalFacetSortBy(n)),c=e.every(function(e){return e.exhaustive}),u=function(o,c,u,l,d){return function(e,n,t){var r=e;if(0<t){var i=0;for(r=e;i<t;){var a=r&&Array.isArray(r.data)?r.data:[];r=g(a,function(e){return e.isRefined}),i++}}if(r){var s=Object.keys(n.data).map(function(e){return[e,n.data[e]]}).filter(function(e){return function(e,t,n,r,i,a){return(!i||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(r)||i&&e.split(r).length-i.split(r).length==1||-1===e.indexOf(r)&&-1===n.indexOf(r)||0===n.indexOf(e)||0===e.indexOf(t+r)&&(a||0===e.indexOf(n)))}(e[0],r.path||u,d,c,u,l)});r.data=T(s.map(function(e){var t=e[0];return function(e,t,n,r,i){var a=t.split(n);return{name:a[a.length-1].trim(),path:t,count:e,isRefined:r===t||0===r.indexOf(t+n),exhaustive:i,data:null}}(e[1],t,c,d,n.exhaustive)}),o[0],o[1])}return e}}(o,i,a,s,r),l=e;return a&&(l=e.slice(a.split(i).length)),l.reduce(u,{name:d.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,exhaustive:c,data:null})}};function H(e){var n={};return e.forEach(function(e,t){n[e]=t}),n}function B(e,t,n){t&&t[n]&&(e.stats=t[n])}function U(l,n){var c=n[0];this._rawResults=n;var d=this;Object.keys(c).forEach(function(e){d[e]=c[e]}),this.processingTimeMS=n.reduce(function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=l.hierarchicalFacets.map(function(){return[]}),this.facets=[];var e=l.getRefinedDisjunctiveFacets(),u=H(l.facets),h=H(l.disjunctiveFacets),r=1,f=c.facets||{};Object.keys(f).forEach(function(e){var t=f[e],n=function(e,t){return g(e,function(e){return-1<(e.attributes||[]).indexOf(t)})}(l.hierarchicalFacets,e);if(n){var r=n.attributes.indexOf(e),i=I(l.hierarchicalFacets,function(e){return e.name===n.name});d.hierarchicalFacets[i][r]={attribute:e,data:t,exhaustive:c.exhaustiveFacetsCount}}else{var a,s=-1!==l.disjunctiveFacets.indexOf(e),o=-1!==l.facets.indexOf(e);s&&(a=h[e],d.disjunctiveFacets[a]={name:e,data:t,exhaustive:c.exhaustiveFacetsCount},B(d.disjunctiveFacets[a],c.facets_stats,e)),o&&(a=u[e],d.facets[a]={name:e,data:t,exhaustive:c.exhaustiveFacetsCount},B(d.facets[a],c.facets_stats,e))}}),this.hierarchicalFacets=x(this.hierarchicalFacets),e.forEach(function(e){var a=n[r],s=a&&a.facets?a.facets:{},o=l.getHierarchicalFacetByName(e);Object.keys(s).forEach(function(t){var n,e=s[t];if(o){n=I(l.hierarchicalFacets,function(e){return e.name===o.name});var r=I(d.hierarchicalFacets[n],function(e){return e.attribute===t});if(-1===r)return;d.hierarchicalFacets[n][r].data=m({},d.hierarchicalFacets[n][r].data,e)}else{n=h[t];var i=c.facets&&c.facets[t]||{};d.disjunctiveFacets[n]={name:t,data:p({},e,i),exhaustive:a.exhaustiveFacetsCount},B(d.disjunctiveFacets[n],a.facets_stats,t),l.disjunctiveFacetsRefinements[t]&&l.disjunctiveFacetsRefinements[t].forEach(function(e){!d.disjunctiveFacets[n].data[e]&&-1<l.disjunctiveFacetsRefinements[t].indexOf(e)&&(d.disjunctiveFacets[n].data[e]=0)})}}),r++}),l.getRefinedHierarchicalFacets().forEach(function(e){var s=l.getHierarchicalFacetByName(e),o=l._getHierarchicalFacetSeparator(s),c=l.getHierarchicalRefinement(e);if(!(0===c.length||c[0].split(o).length<2)){var t=n[r],u=t&&t.facets?t.facets:{};Object.keys(u).forEach(function(t){var e=u[t],n=I(l.hierarchicalFacets,function(e){return e.name===s.name}),r=I(d.hierarchicalFacets[n],function(e){return e.attribute===t});if(-1!==r){var i={};if(0<c.length){var a=c[0].split(o)[0];i[a]=d.hierarchicalFacets[n][r].data[a]}d.hierarchicalFacets[n][r].data=p(i,e,d.hierarchicalFacets[n][r].data)}}),r++}}),Object.keys(l.facetsExcludes).forEach(function(t){var e=l.facetsExcludes[t],n=u[t];d.facets[n]={name:t,data:c.facets[t],exhaustive:c.exhaustiveFacetsCount},e.forEach(function(e){d.facets[n]=d.facets[n]||{name:t},d.facets[n].data=d.facets[n].data||{},d.facets[n].data[e]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(A(l)),this.facets=x(this.facets),this.disjunctiveFacets=x(this.disjunctiveFacets),this._state=l}function q(e,t){var n=g(e,function(e){return e.name===t});return n&&n.stats}function Q(e,t,n,r,i){var a=g(i,function(e){return e.name===n}),s=a&&a.data&&a.data[r]?a.data[r]:0,o=a&&a.exhaustive||!1;return{type:t,attributeName:n,name:r,count:s,exhaustive:o}}U.prototype.getFacetByName=function(t){function e(e){return e.name===t}return g(this.facets,e)||g(this.disjunctiveFacets,e)||g(this.hierarchicalFacets,e)},U.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],U.prototype.getFacetValues=function(e,t){var n=function(t,n){function e(e){return e.name===n}if(t._state.isConjunctiveFacet(n)){var r=g(t.facets,e);return r?Object.keys(r.data).map(function(e){return{name:e,count:r.data[e],isRefined:t._state.isFacetRefined(n,e),isExcluded:t._state.isExcludeRefined(n,e)}}):[]}if(t._state.isDisjunctiveFacet(n)){var i=g(t.disjunctiveFacets,e);return i?Object.keys(i.data).map(function(e){return{name:e,count:i.data[e],isRefined:t._state.isDisjunctiveFacetRefined(n,e)}}):[]}if(t._state.isHierarchicalFacet(n))return g(t.hierarchicalFacets,e)}(this,e);if(n){var r,i=p({},t,{sortBy:U.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),a=this;if(Array.isArray(n))r=[e];else r=a._state.getHierarchicalFacetByName(n.name).attributes;return function t(n,e,r,i){if(i=i||0,Array.isArray(e))return n(e,r[i]);if(!e.data||0===e.data.length)return e;var a=e.data.map(function(e){return t(n,e,r,i+1)}),s=n(a,r[i]);return p({data:s},e)}(function(e,t){if(i.facetOrdering){var n=function(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}(a,t);if(Boolean(n))return function(e,t){var n=[],r=[],i=(t.order||[]).reduce(function(e,t,n){return e[t]=n,e},{});e.forEach(function(e){var t=e.path||e.name;void 0!==i[t]?n[i[t]]=e:r.push(e)}),n=n.filter(function(e){return e});var a,s=t.sortRemainingBy;return"hidden"===s?n:(a="alpha"===s?[["path","name"],["asc","asc"]]:[["count"],["desc"]],n.concat(T(r,a[0],a[1])))}(e,n)}if(Array.isArray(i.sortBy)){var r=F(i.sortBy,U.DEFAULT_SORT);return T(e,r[0],r[1])}if("function"==typeof i.sortBy)return function(e,t){return t.sort(e)}(i.sortBy,e);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},n,r)}},U.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?q(this.facets,e):this._state.isDisjunctiveFacet(e)?q(this.disjunctiveFacets,e):void 0},U.prototype.getRefinements=function(){var r=this._state,n=this,i=[];return Object.keys(r.facetsRefinements).forEach(function(t){r.facetsRefinements[t].forEach(function(e){i.push(Q(r,"facet",t,e,n.facets))})}),Object.keys(r.facetsExcludes).forEach(function(t){r.facetsExcludes[t].forEach(function(e){i.push(Q(r,"exclude",t,e,n.facets))})}),Object.keys(r.disjunctiveFacetsRefinements).forEach(function(t){r.disjunctiveFacetsRefinements[t].forEach(function(e){i.push(Q(r,"disjunctive",t,e,n.disjunctiveFacets))})}),Object.keys(r.hierarchicalFacetsRefinements).forEach(function(t){r.hierarchicalFacetsRefinements[t].forEach(function(e){i.push(function(e,t,n,r){var i=e.getHierarchicalFacetByName(t),a=e._getHierarchicalFacetSeparator(i),s=n.split(a),o=g(r,function(e){return e.name===t}),c=s.reduce(function(e,t){var n=e&&g(e.data,function(e){return e.name===t});return void 0!==n?n:e},o),u=c&&c.count||0,l=c&&c.exhaustive||!1,d=c&&c.path||"";return{type:"hierarchical",attributeName:t,name:d,count:u,exhaustive:l}}(r,t,e,n.hierarchicalFacets))})}),Object.keys(r.numericRefinements).forEach(function(n){var e=r.numericRefinements[n];Object.keys(e).forEach(function(t){e[t].forEach(function(e){i.push({type:"numeric",attributeName:n,name:e,numericValue:e,operator:t})})})}),r.tagRefinements.forEach(function(e){i.push({type:"tag",attributeName:"_tags",name:e})}),i};var $=U;function V(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var e=V;function K(e){return"function"==typeof e}function z(e){return"object"==typeof e&&null!==e}function J(e){return void 0===e}V.prototype._events=void 0,V.prototype._maxListeners=void 0,V.defaultMaxListeners=10,V.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},V.prototype.emit=function(e){var t,n,r,i,a,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||z(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var o=new Error('Uncaught, unspecified "error" event. ('+t+")");throw o.context=t,o}if(J(n=this._events[e]))return!1;if(K(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(z(n))for(i=Array.prototype.slice.call(arguments,1),r=(s=n.slice()).length,a=0;a<r;a++)s[a].apply(this,i);return!0},V.prototype.on=V.prototype.addListener=function(e,t){var n;if(!K(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,K(t.listener)?t.listener:t),this._events[e]?z(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,z(this._events[e])&&!this._events[e].warned&&(n=J(this._maxListeners)?V.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},V.prototype.once=function(e,t){if(!K(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},V.prototype.removeListener=function(e,t){var n,r,i,a;if(!K(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||K(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(z(n)){for(a=i;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},V.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(K(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},V.prototype.listeners=function(e){return this._events&&this._events[e]?K(this._events[e])?[this._events[e]]:this._events[e].slice():[]},V.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(K(t))return 1;if(t)return t.length}return 0},V.listenerCount=function(e,t){return e.listenerCount(t)};var Y=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function X(e,t){this.main=e,this.fn=t,this.lastResults=null}Y(X,e),X.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},X.prototype.getModifiedState=function(e){return this.fn(e)};var G=X,Z={_getQueries:function(i,a){var s=[];return s.push({indexName:i,params:Z._getHitsSearchParams(a)}),a.getRefinedDisjunctiveFacets().forEach(function(e){s.push({indexName:i,params:Z._getDisjunctiveFacetSearchParams(a,e)})}),a.getRefinedHierarchicalFacets().forEach(function(e){var t=a.getHierarchicalFacetByName(e),n=a.getHierarchicalRefinement(e),r=a._getHierarchicalFacetSeparator(t);0<n.length&&1<n[0].split(r).length&&s.push({indexName:i,params:Z._getDisjunctiveFacetSearchParams(a,e,!0)})}),s},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(Z._getHitsHierarchicalFacetsAttributes(e)),n=Z._getFacetFilters(e),r=Z._getNumericFilters(e),i=Z._getTagFilters(e),a={facets:-1<t.indexOf("*")?["*"]:t,tagFilters:i};return 0<n.length&&(a.facetFilters=n),0<r.length&&(a.numericFilters=r),m({},e.getQueryParams(),a)},_getDisjunctiveFacetSearchParams:function(e,t,n){var r=Z._getFacetFilters(e,t,n),i=Z._getNumericFilters(e,t),a={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],tagFilters:Z._getTagFilters(e),analytics:!1,clickAnalytics:!1},s=e.getHierarchicalFacetByName(t);return a.facets=s?Z._getDisjunctiveHierarchicalFacetAttribute(e,s,n):t,0<i.length&&(a.numericFilters=i),0<r.length&&(a.facetFilters=r),m({},e.getQueryParams(),a)},_getNumericFilters:function(e,i){if(e.numericFilters)return e.numericFilters;var a=[];return Object.keys(e.numericRefinements).forEach(function(r){var t=e.numericRefinements[r]||{};Object.keys(t).forEach(function(n){var e=t[n]||[];i!==r&&e.forEach(function(e){if(Array.isArray(e)){var t=e.map(function(e){return r+n+e});a.push(t)}else a.push(r+n+e)})})}),a},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(o,c,u){var l=[],e=o.facetsRefinements||{};Object.keys(e).forEach(function(t){(e[t]||[]).forEach(function(e){l.push(t+":"+e)})});var n=o.facetsExcludes||{};Object.keys(n).forEach(function(t){(n[t]||[]).forEach(function(e){l.push(t+":-"+e)})});var r=o.disjunctiveFacetsRefinements||{};Object.keys(r).forEach(function(t){var e=r[t]||[];if(t!==c&&e&&0!==e.length){var n=[];e.forEach(function(e){n.push(t+":"+e)}),l.push(n)}});var d=o.hierarchicalFacetsRefinements||{};return Object.keys(d).forEach(function(e){var t=(d[e]||[])[0];if(void 0!==t){var n,r,i=o.getHierarchicalFacetByName(e),a=o._getHierarchicalFacetSeparator(i),s=o._getHierarchicalRootPath(i);if(c===e){if(-1===t.indexOf(a)||!s&&!0===u||s&&s.split(a).length===t.split(a).length)return;t=s?(r=s.split(a).length-1,s):(r=t.split(a).length-2,t.slice(0,t.lastIndexOf(a))),n=i.attributes[r]}else r=t.split(a).length-1,n=i.attributes[r];n&&l.push([n+":"+t])}}),l},_getHitsHierarchicalFacetsAttributes:function(s){return s.hierarchicalFacets.reduce(function(e,t){var n=s.getHierarchicalRefinement(t.name)[0];if(!n)return e.push(t.attributes[0]),e;var r=s._getHierarchicalFacetSeparator(t),i=n.split(r).length,a=t.attributes.slice(0,i+1);return e.concat(a)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,n){var r=e._getHierarchicalFacetSeparator(t);if(!0===n){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(r).length),[t.attributes[a]]}var s=(e.getHierarchicalRefinement(t.name)[0]||"").split(r).length-1;return t.attributes.slice(0,1+s)},getSearchForFacetQuery:function(e,t,n,r){var i=r.isDisjunctiveFacet(e)?r.clearRefinements(e):r,a={facetQuery:t,facetName:e};return"number"==typeof n&&(a.maxFacetHits=n),m({},Z._getHitsSearchParams(i),a)}},ee=Z,te="3.7.0";function ne(e,t,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.7.0)"),this.setClient(e);var r=n||{};r.index=t,this.state=_.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function re(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function ie(){return this.state.page}Y(ne,e),ne.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},ne.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},ne.prototype.getQuery=function(){var e=this.state;return ee._getHitsSearchParams(e)},ne.prototype.searchOnce=function(e,t){var n=e?this.state.setQueryParameters(e):this.state,r=ee._getQueries(n.index,n),i=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),!t)return this.client.search(r).then(function(e){return i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),{content:new $(n,e.results),state:n,_originalResponse:e}},function(e){throw i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),e});this.client.search(r).then(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(null,new $(n,e.results),n)}).catch(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(e,null,n)})},ne.prototype.findAnswers=function(e){var t=this.state,n=this.derivedHelpers[0];if(!n)return Promise.resolve([]);var r=n.getModifiedState(t),i=m({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:v(ee._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),a="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if("function"!=typeof this.client.initIndex)throw new Error(a);var s=this.client.initIndex(r.index);if("function"!=typeof s.findAnswers)throw new Error(a);return s.findAnswers(r.query,e.queryLanguages,i)},ne.prototype.searchForFacetValues=function(t,e,n,r){var i="function"==typeof this.client.searchForFacetValues;if(!i&&"function"!=typeof this.client.initIndex)throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var a=this.state.setQueryParameters(r||{}),s=a.isDisjunctiveFacet(t),o=ee.getSearchForFacetQuery(t,e,n,a);this._currentNbQueries++;var c=this;return this.emit("searchForFacetValues",{state:a,facet:t,query:e}),(i?this.client.searchForFacetValues([{indexName:a.index,params:o}]):this.client.initIndex(a.index).searchForFacetValues(o)).then(function(e){return c._currentNbQueries--,0===c._currentNbQueries&&c.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits.forEach(function(e){e.isRefined=s?a.isDisjunctiveFacetRefined(t,e.value):a.isFacetRefined(t,e.value)}),e},function(e){throw c._currentNbQueries--,0===c._currentNbQueries&&c.emit("searchQueueEmpty"),e})},ne.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},ne.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},ne.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},ne.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},ne.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},ne.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},ne.prototype.addNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,n),isPageReset:!0}),this},ne.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},ne.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},ne.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},ne.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},ne.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},ne.prototype.removeNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,n),isPageReset:!0}),this},ne.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},ne.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},ne.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},ne.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},ne.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},ne.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},ne.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},ne.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},ne.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},ne.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},ne.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},ne.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},ne.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},ne.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},ne.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},ne.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},ne.prototype.setCurrentPage=re,ne.prototype.setPage=re,ne.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},ne.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},ne.prototype.setState=function(e){return this._change({state:_.make(e),isPageReset:!1}),this},ne.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new _(e),this},ne.prototype.hasRefinements=function(e){return!!y(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},ne.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},ne.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},ne.prototype.hasTag=function(e){return this.state.isTagRefined(e)},ne.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},ne.prototype.getIndex=function(){return this.state.index},ne.prototype.getCurrentPage=ie,ne.prototype.getPage=ie,ne.prototype.getTags=function(){return this.state.tagRefinements},ne.prototype.getRefinements=function(e){var n=[];if(this.state.isConjunctiveFacet(e))this.state.getConjunctiveRefinements(e).forEach(function(e){n.push({value:e,type:"conjunctive"})}),this.state.getExcludeRefinements(e).forEach(function(e){n.push({value:e,type:"exclude"})});else if(this.state.isDisjunctiveFacet(e)){this.state.getDisjunctiveRefinements(e).forEach(function(e){n.push({value:e,type:"disjunctive"})})}var r=this.state.getNumericRefinements(e);return Object.keys(r).forEach(function(e){var t=r[e];n.push({value:t,operator:e,type:"numeric"})}),n},ne.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},ne.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},ne.prototype._search=function(e){var r=this.state,i=[],t=[];e.onlyWithDerivedHelpers||(t=ee._getQueries(r.index,r),i.push({state:r,queriesCount:t.length,helper:this}),this.emit("search",{state:r,results:this.lastResults}));var n=this.derivedHelpers.map(function(e){var t=e.getModifiedState(r),n=ee._getQueries(t.index,t);return i.push({state:t,queriesCount:n.length,helper:e}),e.emit("search",{state:t,results:e.lastResults}),n}),a=Array.prototype.concat.apply(t,n),s=this._queryId++;this._currentNbQueries++;try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,i,s)).catch(this._dispatchAlgoliaError.bind(this,s))}catch(e){this.emit("error",{error:e})}},ne.prototype._dispatchAlgoliaResponse=function(e,t,n){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var s=n.results.slice();e.forEach(function(e){var t=e.state,n=e.queriesCount,r=e.helper,i=s.splice(0,n),a=r.lastResults=new $(t,i);r.emit("result",{results:a,state:t})})}},ne.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},ne.prototype.containsRefinement=function(e,t,n,r){return e||0!==t.length||0!==n.length||0!==r.length},ne.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},ne.prototype._change=function(e){var t=e.state,n=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:n}))},ne.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},ne.prototype.setClient=function(e){return this.client===e||("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.7.0)"),this.client=e),this},ne.prototype.getClient=function(){return this.client},ne.prototype.derive=function(e){var t=new G(this,e);return this.derivedHelpers.push(t),t},ne.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(-1===t)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)},ne.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var ae=ne;function se(e,t,n){return new ae(e,t,n)}se.version=te,se.AlgoliaSearchHelper=ae,se.SearchParameters=_,se.SearchResults=$;var oe=se;function ce(r){function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null===i&&(i=ue.then(function(){i=null,a?a=!1:r.apply(void 0,t)}))}var i=null,a=!1;return e.wait=function(){if(null===i)throw new Error("The deferred function should be called before calling `wait()`");return i},e.cancel=function(){null!==i&&(a=!0)},e}var ue=Promise.resolve();function le(e){var t="string"==typeof e,n=t?document.querySelector(e):e;if(function(e){return e instanceof HTMLElement||Boolean(e)&&0<e.nodeType}(n))return n;var r="Container must be `string` or `HTMLElement`.";throw t&&(r+=" Unable to find ".concat(e)),new Error(r)}function de(e){return 1===e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}function he(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}function fe(e){var t=e.defaultTemplates,n=e.templates;return W({templatesConfig:e.templatesConfig},function(a,e){var s=1<arguments.length&&void 0!==e?e:{};return he([].concat(P(Object.keys(a||{})),P(Object.keys(s)))).reduce(function(e,t){var n=a?a[t]:void 0,r=s[t],i=void 0!==r&&r!==n;return e.templates[t]=i?r:n,e.useCustomCompileOptions[t]=i,e},{templates:{},useCustomCompileOptions:{}})}(t,n))}function me(e,t){return e(t={exports:{}},t.exports),t.exports}var pe=me(function(e,t){!function(R){var S=/\S/,t=/\"/g,n=/\n/g,r=/\r/g,i=/\\/g,a=/\u2028/,s=/\u2029/;function w(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function _(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function P(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}R.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},R.scan=function(e,t){var n,r,i,a,s,o=e.length,c=0,u=null,l=null,d="",h=[],f=!1,m=0,p=0,g="{{",v="}}";function y(){0<d.length&&(h.push({tag:"_t",text:new String(d)}),d="")}function b(e,t){if(y(),e&&function(){for(var e=!0,t=p;t<h.length;t++)if(!(e=R.tags[h[t].tag]<R.tags._v||"_t"==h[t].tag&&null===h[t].text.match(S)))return!1;return e}())for(var n,r=p;r<h.length;r++)h[r].text&&((n=h[r+1])&&">"==n.tag&&(n.indent=h[r].text.toString()),h.splice(r,1));else t||h.push({tag:"\n"});f=!1,p=h.length}for(t&&(t=t.split(" "),g=t[0],v=t[1]),m=0;m<o;m++)0==c?P(g,e,m)?(--m,y(),c=1):"\n"==e.charAt(m)?b(f):d+=e.charAt(m):1==c?(m+=g.length-1,c="="==(u=(l=R.tags[e.charAt(m+1)])?e.charAt(m+1):"_v")?(r=m,void 0,i="="+v,a=(n=e).indexOf(i,r),s=_(n.substring(n.indexOf("=",r)+1,a)).split(" "),g=s[0],v=s[s.length-1],m=a+i.length-1,0):(l&&m++,2),f=m):P(v,e,m)?(h.push({tag:u,n:_(d),otag:g,ctag:v,i:"/"==u?f-g.length:m+v.length}),d="",m+=v.length-1,c=0,"{"==u&&("}}"==v?m++:w(h[h.length-1]))):d+=e.charAt(m);return b(f,!0),h};var u={_t:!0,"\n":!0,$:!0,"/":!0};function l(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function d(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}function o(e){var t=[];for(var n in e.partials)t.push('"'+h(n)+'":{name:"'+h(e.partials[n].name)+'", '+o(e.partials[n])+"}");return"partials: {"+t.join(",")+"}, subs: "+function(e){var t=[];for(var n in e)t.push('"'+h(n)+'": function(c,p,t,i) {'+e[n]+"}");return"{ "+t.join(",")+" }"}(e.subs)}R.stringify=function(e,t,n){return"{code: function (c,p,i) { "+R.wrapMain(e.code)+" },"+o(e)+"}"};var c=0;function h(e){return e.replace(i,"\\\\").replace(t,'\\"').replace(n,"\\n").replace(r,"\\r").replace(a,"\\u2028").replace(s,"\\u2029")}function f(e){return~e.indexOf(".")?"d":"f"}function m(e,t){var n="<"+(t.prefix||"")+e.n+c++;return t.partials[n]={name:e.n,partials:{}},t.code+='t.b(t.rp("'+h(n)+'",c,p,"'+(e.indent||"")+'"));',n}function e(e,t){t.code+="t.b(t.t(t."+f(e.n)+'("'+h(e.n)+'",c,p,0)));'}function p(e){return"t.b("+e+");"}R.generate=function(e,t,n){c=0;var r={code:"",subs:{},partials:{}};return R.walk(e,r),n.asString?this.stringify(r,t,n):this.makeTemplate(r,t,n)},R.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"},R.template=R.Template,R.makeTemplate=function(e,t,n){var r=this.makePartials(e);return r.code=new Function("c","p","i",this.wrapMain(e.code)),new this.template(r,t,this,n)},R.makePartials=function(e){var t,n={subs:{},partials:e.partials,name:e.name};for(t in n.partials)n.partials[t]=this.makePartials(n.partials[t]);for(t in e.subs)n.subs[t]=new Function("c","p","t","i",e.subs[t]);return n},R.codegen={"#":function(e,t){t.code+="if(t.s(t."+f(e.n)+'("'+h(e.n)+'",c,p,1),c,p,0,'+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){t.rs(c,p,function(c,p,t){',R.walk(e.nodes,t),t.code+="});c.pop();}"},"^":function(e,t){t.code+="if(!t.s(t."+f(e.n)+'("'+h(e.n)+'",c,p,1),c,p,1,0,0,"")){',R.walk(e.nodes,t),t.code+="};"},">":m,"<":function(e,t){var n={partials:{},code:"",subs:{},inPartial:!0};R.walk(e.nodes,n);var r=t.partials[m(e,t)];r.subs=n.subs,r.partials=n.partials},$:function(e,t){var n={subs:{},code:"",partials:t.partials,prefix:e.n};R.walk(e.nodes,n),t.subs[e.n]=n.code,t.inPartial||(t.code+='t.sub("'+h(e.n)+'",c,p,i);')},"\n":function(e,t){t.code+=p('"\\n"'+(e.last?"":" + i"))},_v:function(e,t){t.code+="t.b(t.v(t."+f(e.n)+'("'+h(e.n)+'",c,p,0)));'},_t:function(e,t){t.code+=p('"'+h(e.text)+'"')},"{":e,"&":e},R.walk=function(e,t){for(var n,r=0,i=e.length;r<i;r++)(n=R.codegen[e[r].tag])&&n(e[r],t);return t},R.parse=function(e,t,n){return function e(t,n,r,i){var a,s=[],o=null,c=null;for(a=r[r.length-1];0<t.length;){if(c=t.shift(),a&&"<"==a.tag&&!(c.tag in u))throw new Error("Illegal content in < super tag.");if(R.tags[c.tag]<=R.tags.$||l(c,i))r.push(c),c.nodes=e(t,c.tag,r,i);else{if("/"==c.tag){if(0===r.length)throw new Error("Closing tag without opener: /"+c.n);if(o=r.pop(),c.n!=o.n&&!d(c.n,o.n,i))throw new Error("Nesting error: "+o.n+" vs. "+c.n);return o.end=c.i,s}"\n"==c.tag&&(c.last=0==t.length||"\n"==t[0].tag)}s.push(c)}if(0<r.length)throw new Error("missing closing tag: "+r.pop().n);return s}(e,0,[],(n=n||{}).sectionTags||[])},R.cache={},R.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda,t.delimiters,!!t.modelGet].join("||")},R.compile=function(e,t){t=t||{};var n=R.cacheKey(e,t),r=this.cache[n];if(r){var i=r.partials;for(var a in i)delete i[a].instance;return r}return r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r}}(t)}),ge=me(function(e,t){!function(e){function l(e,t,n){var r;return t&&"object"==typeof t&&(void 0!==t[e]?r=t[e]:n&&t.get&&"function"==typeof t.get&&(r=t.get(e))),r}e.Template=function(e,t,n,r){e=e||{},this.r=e.code||this.r,this.c=n,this.options=r||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(e,t,n){return""},v:function(e){return e=o(e),s.test(e)?e.replace(t,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(i,"&#39;").replace(a,"&quot;"):e},t:o,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var n=this.partials[e],r=t[n.name];if(n.instance&&n.base==r)return n.instance;if("string"==typeof r){if(!this.c)throw new Error("No compiler available.");r=this.c.compile(r,this.options)}if(!r)return null;if(this.partials[e].base=r,n.subs){for(key in t.stackText||(t.stackText={}),n.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);r=function(e,t,n,r,i,a){function s(){}function o(){}var c;o.prototype=(s.prototype=e).subs;var u=new s;for(c in u.subs=new o,u.subsText={},u.buf="",r=r||{},u.stackSubs=r,u.subsText=a,t)r[c]||(r[c]=t[c]);for(c in r)u.subs[c]=r[c];for(c in i=i||{},u.stackPartials=i,n)i[c]||(i[c]=n[c]);for(c in i)u.partials[c]=i[c];return u}(r,n.subs,n.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=r},rp:function(e,t,n,r){var i=this.ep(e,n);return i?i.ri(t,n,r):""},rs:function(e,t,n){var r=e[e.length-1];if(d(r))for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop();else n(e,t,this)},s:function(e,t,n,r,i,a,s){var o;return(!d(e)||0!==e.length)&&("function"==typeof e&&(e=this.ms(e,t,n,r,i,a,s)),o=!!e,!r&&o&&t&&t.push("object"==typeof e?e:t[t.length-1]),o)},d:function(e,t,n,r){var i,a=e.split("."),s=this.f(a[0],t,n,r),o=this.options.modelGet,c=null;if("."===e&&d(t[t.length-2]))s=t[t.length-1];else for(var u=1;u<a.length;u++)s=void 0!==(i=l(a[u],s,o))?(c=s,i):"";return!(r&&!s)&&(r||"function"!=typeof s||(t.push(c),s=this.mv(s,t,n),t.pop()),s)},f:function(e,t,n,r){for(var i=!1,a=!1,s=this.options.modelGet,o=t.length-1;0<=o;o--)if(void 0!==(i=l(e,t[o],s))){a=!0;break}return a?(r||"function"!=typeof i||(i=this.mv(i,t,n)),i):!r&&""},ls:function(e,t,n,r,i){var a=this.options.delimiters;return this.options.delimiters=i,this.b(this.ct(o(e.call(t,r)),t,n)),this.options.delimiters=a,!1},ct:function(e,t,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,n,r,i,a,s){var o,c=t[t.length-1],u=e.call(c);return"function"==typeof u?!!r||(o=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(u,c,n,o.substring(i,a),s)):u},mv:function(e,t,n){var r=t[t.length-1],i=e.call(r);return"function"==typeof i?this.ct(o(i.call(r)),r,n):i},sub:function(e,t,n,r){var i=this.subs[e];i&&(this.activeSub=e,i(t,n,this,r),this.activeSub=!1)}};var t=/&/g,n=/</g,r=/>/g,i=/\'/g,a=/\"/g,s=/[&<>\"\']/;function o(e){return String(null==e?"":e)}var d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(t)});pe.Template=ge.Template,pe.template=pe.Template;var ve=pe;function ye(e){var t=e.templates,n=e.templateKey,r=e.compileOptions,i=e.helpers,a=e.data,s=e.bindEvent,o=t[n];if("string"!=typeof o&&"function"!=typeof o)throw new Error("Template must be 'string' or 'function', was '".concat(h(o),"' (key: ").concat(n,")"));if("function"==typeof o)return o(a,s);var c=function(e,t,n){var r=0<arguments.length&&void 0!==e?e:{},i=1<arguments.length?t:void 0,a=2<arguments.length?n:void 0;return Object.keys(r).reduce(function(e,n){return W(W({},e),{},k({},n,function(){var t=this;return function(e){return r[n].call(a,e,function(e){return ve.compile(e,i).render(t)})}}))},{})}(i,r,a);return ve.compile(o,r).render(W(W({},a),{},{helpers:c})).replace(/[ \n\r\t\f\xA0]+/g,function(e){return e.replace(/(^|\xA0+)[^\xA0]+/g,"$1 ")}).trim()}function be(e,t){for(var n,r=0;r<e.length;r++)if(t(n=e[r],r,e))return n}function Re(e){return String(e).replace(/^\\-/,"-")}function Se(i,e,a,s,t){var o,n={type:e,attribute:a,name:s},c=be(4<arguments.length&&void 0!==t?t:[],function(e){return e.name===a});"hierarchical"===e?function(){for(var e=i.getHierarchicalFacetByName(a),n=s.split(e.separator),t=function(t){c=c&&c.data&&be(Object.keys(c.data).map(function(t){return function(e){return t[e]}}(c.data)),function(e){return e.name===n[t]})},r=0;void 0!==c&&r<n.length;++r)t(r);o=c&&c.count}():o=c&&c.data&&c.data[n.name];var r=c&&c.exhaustive;return void 0!==o&&(n.count=o),void 0!==r&&(n.exhaustive=r),n}function we(n,r,e){var t=2<arguments.length&&void 0!==e&&e,a=[],i=r.facetsRefinements,s=void 0===i?{}:i,o=r.facetsExcludes,c=void 0===o?{}:o,u=r.disjunctiveFacetsRefinements,l=void 0===u?{}:u,d=r.hierarchicalFacetsRefinements,h=void 0===d?{}:d,f=r.numericRefinements,m=void 0===f?{}:f,p=r.tagRefinements,g=void 0===p?[]:p;return Object.keys(s).forEach(function(t){s[t].forEach(function(e){a.push(Se(r,"facet",t,e,n.facets))})}),Object.keys(c).forEach(function(t){c[t].forEach(function(e){a.push({type:"exclude",attribute:t,name:e,exclude:!0})})}),Object.keys(l).forEach(function(t){l[t].forEach(function(e){a.push(Se(r,"disjunctive",t,Re(e),n.disjunctiveFacets))})}),Object.keys(h).forEach(function(t){h[t].forEach(function(e){a.push(Se(r,"hierarchical",t,e,n.hierarchicalFacets))})}),Object.keys(m).forEach(function(r){var i=m[r];Object.keys(i).forEach(function(e){var t=e,n=i[t];(Array.isArray(n)?n:[n]).forEach(function(e){a.push({type:"numeric",attribute:r,name:"".concat(e),numericValue:e,operator:t})})})}),g.forEach(function(e){a.push({type:"tag",attribute:"_tags",name:e})}),t&&r.query&&r.query.trim()&&a.push({attribute:"query",type:"query",name:r.query,query:r.query}),a}function _e(e){var t=e.helper,n=e.attributesToClear,r=void 0===n?[]:n,i=t.state.setPage(0);return i=r.reduce(function(e,t){return i.isNumericRefined(t)?e.removeNumericRefinement(t):i.isHierarchicalFacet(t)?e.removeHierarchicalFacetRefinement(t):i.isDisjunctiveFacet(t)?e.removeDisjunctiveFacetRefinement(t):i.isConjunctiveFacet(t)?e.removeFacetRefinement(t):e},i),-1!==r.indexOf("query")&&(i=i.setQuery("")),i}function Pe(e){return"number"==typeof e&&e<0&&(e=String(e).replace(/^-/,"\\-")),e}function Ne(e,t){if(void 0===e||"function"!=typeof e)throw new Error("The render function is not valid (received type ".concat(function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e),").\n\n").concat(t))}function xe(){}function Ie(e,t){return e}function Fe(e,t){return(Array.isArray(t)?t:t.split(".")).reduce(function(e,t){return e&&e[t]},e)}function Te(e){return"number"==typeof e&&isFinite(e)}function Ce(e){if(!function(e){return"object"===h(e)&&null!==e}(e)||"[object Object]"!==function(e){return null===e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ee(e){var t=e.start,n=void 0===t?0:t,r=e.end,i=e.step,a=void 0===i?1:i,s=0===a?1:a,o=Math.round((r-n)/s);return P(Array(o)).map(function(e,t){return n+t*s})}function ke(e){return e!==Object(e)}function Le(e,t){if(e===t)return!0;if(ke(e)||ke(t)||"function"==typeof e||"function"==typeof t)return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(!(i in t))return!1;if(!Le(e[i],t[i]))return!1}return!0}var Me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},je=/[&<>"']/g,Oe=RegExp(je.source);var Ae={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},He=/&(amp|quot|lt|gt|#39);/g,We=RegExp(He.source);var De={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},Be={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function Ue(e){return function(e){return e&&Oe.test(e)?e.replace(je,function(e){return Me[e]}):e}(e).replace(new RegExp(De.highlightPreTag,"g"),Be.highlightPreTag).replace(new RegExp(De.highlightPostTag,"g"),Be.highlightPostTag)}function qe(n){return Ce(n)&&"string"!=typeof n.value?Object.keys(n).reduce(function(e,t){return W(W({},e),{},k({},t,qe(n[t])))},{}):Array.isArray(n)?n.map(qe):W(W({},n),{},{value:Ue(n.value)})}function Qe(e){return void 0===e.__escaped&&((e=e.map(function(e){var t=f({},e);return t._highlightResult&&(t._highlightResult=qe(t._highlightResult)),t._snippetResult&&(t._snippetResult=qe(t._snippetResult)),t})).__escaped=!0),e}function $e(e){var t=Be.highlightPreTag,n=Be.highlightPostTag;return e.map(function(e){return e.isHighlighted?t+e.value+n:e.value}).join("")}function Ve(e){var n=Be.highlightPostTag,t=Be.highlightPreTag,r=e.split(t),i=r.shift(),a=i?[{value:i,isHighlighted:!1}]:[];return r.forEach(function(e){var t=e.split(n);a.push({value:t[0],isHighlighted:!0}),""!==t[1]&&a.push({value:t[1],isHighlighted:!1})}),a}var Ke=new RegExp(/\w/i);function ze(e,t){var n,r,i=e[t],a=(null===(n=e[t+1])||void 0===n?void 0:n.isHighlighted)||!0,s=(null===(r=e[t-1])||void 0===r?void 0:r.isHighlighted)||!0;return Ke.test(function(e){return e&&We.test(e)?e.replace(He,function(e){return Ae[e]}):e}(i.value))||s!==a?i.isHighlighted:s}function Je(n){return n.some(function(e){return e.isHighlighted})?n.map(function(e,t){return W(W({},e),{},{isHighlighted:!ze(n,t)})}):n.map(function(e){return W(W({},e),{},{isHighlighted:!1})})}function Ye(e,t){return e.setQueryParameters({hierarchicalFacets:t.hierarchicalFacets.reduce(function(e,t){var n=function(e,t){if(!Array.isArray(e))return-1;for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e,function(e){return e.name===t.name});if(-1===n)return e.concat(t);var r=e.slice();return r.splice(n,1,t),r},e.hierarchicalFacets)})}function Xe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){var n=function(e,t){return e.setQueryParameters({hierarchicalFacetsRefinements:W(W({},e.hierarchicalFacetsRefinements),t.hierarchicalFacetsRefinements)})}(e,t);return function(e,t){t.facets,t.disjunctiveFacets,t.facetsRefinements,t.facetsExcludes,t.disjunctiveFacetsRefinements,t.numericRefinements,t.tagRefinements,t.hierarchicalFacets,t.hierarchicalFacetsRefinements,t.ruleContexts;var n=M(t,["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"]);return e.setQueryParameters(n)}(function(e,t){return t.facets.reduce(function(e,t){return e.addFacet(t)},e)}(function(e,t){var n=he([].concat(e.ruleContexts).concat(t.ruleContexts).filter(Boolean));return 0<n.length?e.setQueryParameters({ruleContexts:n}):e}(function(e,t){return t.disjunctiveFacets.reduce(function(e,t){return e.addDisjunctiveFacet(t)},e)}(function(e,t){return e.setQueryParameters({facetsRefinements:W(W({},e.facetsRefinements),t.facetsRefinements)})}(function(e,t){return e.setQueryParameters({facetsExcludes:W(W({},e.facetsExcludes),t.facetsExcludes)})}(function(e,t){return e.setQueryParameters({disjunctiveFacetsRefinements:W(W({},e.disjunctiveFacetsRefinements),t.disjunctiveFacetsRefinements)})}(function(e,t){return e.setQueryParameters({numericRefinements:W(W({},e.numericRefinements),t.numericRefinements)})}(function(e,t){return t.tagRefinements.reduce(function(e,t){return e.addTagRefinement(t)},e)}(Ye(n,t),t),t),t),t),t),t),t),t),t)})}function Ge(e){return Array.isArray(e)?e:[e]}function Ze(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return function(e){var t=e.name,n=e.connector;return["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",void 0!==n&&n?"#connector":""].join("")}(e)}).join(", ");return function(e){return[e,"See documentation: ".concat(r)].filter(Boolean).join("\n\n")}}var et=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/;function tt(e){return Array.isArray(e)?function(e){var t=D(e,1)[0],n=D(t=void 0===t?[void 0,void 0,void 0,void 0]:t,4),r=n[0],i=n[1],a=n[2],s=n[3];if(!(r&&i&&a&&s))throw new Error('Invalid value for "insideBoundingBox" parameter: ['.concat(e,"]"));return{northEast:{lat:r,lng:i},southWest:{lat:a,lng:s}}}(e):function(e){var t=D(e.split(",").map(parseFloat),4),n=t[0],r=t[1],i=t[2],a=t[3];if(!(n&&r&&i&&a))throw new Error('Invalid value for "insideBoundingBox" parameter: "'.concat(e,'"'));return{northEast:{lat:n,lng:r},southWest:{lat:i,lng:a}}}(e)}function nt(e,n,r){return e.map(function(e,t){return W(W({},e),{},{__position:r*n+t+1})})}function rt(e,t){return t?e.map(function(e){return W(W({},e),{},{__queryID:t})}):e}function it(e){var o=e.instantSearchInstance,c=e.helper,u=e.attribute,l=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],s=void 0===a?"Filter Applied":a;1===t.length&&"object"===h(t[0])?o.sendEventToInsights(t[0]):"click"!==r||2!==t.length&&3!==t.length||function(e,t,n){return e.state.isHierarchicalFacet(t)?e.state.isHierarchicalFacetRefined(t,n):e.state.isConjunctiveFacet(t)?e.state.isFacetRefined(t,n):e.state.isDisjunctiveFacetRefined(t,n)}(c,u,i)||o.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:l,eventType:r,payload:{eventName:s,index:c.getIndex(),filters:["".concat(u,":").concat(i)]},attribute:u})}}function at(e){return btoa(encodeURIComponent(JSON.stringify(e)))}function st(e){return JSON.parse(decodeURIComponent(atob(e)))}function ot(e){var n=e.index,r=e.widgetType,t=(e.methodName,e.args);if(1===t.length&&"object"===h(t[0]))return[t[0]];var i=t[0],a=t[1],s=t[2];if(!a)return[];if(("click"===i||"conversion"===i)&&!s)return[];var o=Array.isArray(a)?function(e){return e.slice()}(a):[a];if(0===o.length)return[];var c=o[0].__queryID,u=function(e,t){for(var n=1<arguments.length&&void 0!==t?t:20,r=[],i=0;i<Math.ceil(e.length/n);i++)r.push(e.slice(i*n,(i+1)*n));return r}(o),l=u.map(function(e){return e.map(function(e){return e.objectID})}),d=u.map(function(e){return e.map(function(e){return e.__position})});return"view"===i?u.map(function(e,t){return{insightsMethod:"viewedObjectIDs",widgetType:r,eventType:i,payload:{eventName:s||"Hits Viewed",index:n,objectIDs:l[t]},hits:e}}):"click"===i?u.map(function(e,t){return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:r,eventType:i,payload:{eventName:s,index:n,queryID:c,objectIDs:l[t],positions:d[t]},hits:e}}):"conversion"===i?u.map(function(e,t){return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:r,eventType:i,payload:{eventName:s,index:n,queryID:c,objectIDs:l[t]},hits:e}}):[]}function ct(e){var r=e.instantSearchInstance,i=e.index,a=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ot({widgetType:a,index:i,methodName:"sendEvent",args:t}).forEach(function(e){return r.sendEventToInsights(e)})}}function ut(e){var i=e.index,a=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=ot({widgetType:a,index:i,methodName:"bindEvent",args:t});return r.length?"data-insights-event=".concat(at(r)):""}}function lt(e,n){if(!e)return null;var r=e.numericRefinements[n],i=[];return Object.keys(r).filter(function(e){return Array.isArray(r[e])&&0<r[e].length}).forEach(function(t){r[t].forEach(function(e){i.push("".concat(n).concat(t).concat(e))})}),i}function dt(r,i){var a=null;return function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return new Promise(function(e,t){a&&clearTimeout(a),a=setTimeout(function(){a=null,Promise.resolve(r.apply(void 0,n)).then(e).catch(t)},i)})}}function ht(e,t){var n,r=null===(n=e.getWidgetRenderState)||void 0===n?void 0:n.call(e,t),i=null;if(r&&r.widgetParams){var a=r.widgetParams;a.attribute?i=a.attribute:Array.isArray(a.attributes)&&(i=a.attributes[0])}if("string"!=typeof i)throw new Error("Could not find the attribute of the widget:\n\n".concat(JSON.stringify(e),"\n\nPlease check whether the widget's getWidgetRenderState returns widgetParams.attribute correctly."));return i}function ft(e,t){var n=(1<arguments.length&&void 0!==t?t:{fallback:function(){}}).fallback;return"undefined"==typeof window?n():e({window:window})}var mt=Ze({name:"index-widget"});function pt(e){return"ais.index"===e.$$type}function gt(e,t){var n=t.state,r=t.isPageReset,i=t._uiState;n!==e.state&&(e.state=n,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:r,_uiState:i}))}function vt(e,n,t){var r=2<arguments.length&&void 0!==t?t:{};return e.reduce(function(e,t){return pt(t)?e:t.getWidgetUiState||t.getWidgetState?t.getWidgetUiState?t.getWidgetUiState(e,n):t.getWidgetState(e,n):e},r)}function yt(e,t){var n=t.initialSearchParameters,r=M(t,["initialSearchParameters"]);return e.filter(function(e){return!pt(e)}).reduce(function(e,t){return t.getWidgetSearchParameters?t.getWidgetSearchParameters(e,r):e},n)}function bt(e){if(void 0===e||void 0===e.indexName)throw new Error(mt("The `indexName` option is required."));var l=e.indexName,t=e.indexId,d=void 0===t?l:t,h=[],f={},m=null,p=null,g=null,v=null;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return l},getIndexId:function(){return d},getHelper:function(){return g},getResults:function(){return v&&v.lastResults},getScopedResults:function(){var e=this.getParent();return function n(e){return e.filter(pt).reduce(function(e,t){return e.concat.apply(e,[{indexId:t.getIndexId(),results:t.getResults(),helper:t.getHelper()}].concat(P(n(t.getWidgets()))))},[])}(e?e.getWidgets():[this])},getParent:function(){return p},createURL:function(e){return m._createURL(k({},d,vt(h,{searchParameters:e,helper:g})))},getWidgets:function(){return h},addWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(mt("The `addWidgets` method expects an array of widgets."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(mt("The widget definition expects a `render` and/or an `init` method."));return h=h.concat(e),m&&Boolean(e.length)&&(gt(g,{state:yt(h,{uiState:f,initialSearchParameters:g.state}),_uiState:f}),e.forEach(function(e){e.getRenderState&&Rt({renderState:e.getRenderState(m.renderState[t.getIndexId()]||{},{uiState:m._initialUiState,helper:t.getHelper(),parent:t,instantSearchInstance:m,state:g.state,renderState:m.renderState,templatesConfig:m.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:m._isSearchStalled}}),instantSearchInstance:m,parent:t})}),e.forEach(function(e){e.init&&e.init({helper:g,parent:t,uiState:m._initialUiState,instantSearchInstance:m,state:g.state,renderState:m.renderState,templatesConfig:m.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:m._isSearchStalled}})}),m.scheduleSearch()),this},removeWidgets:function(t){var n=this;if(!Array.isArray(t))throw new Error(mt("The `removeWidgets` method expects an array of widgets."));if(t.some(function(e){return"function"!=typeof e.dispose}))throw new Error(mt("The widget definition expects a `dispose` method."));if(h=h.filter(function(e){return-1===t.indexOf(e)}),m&&Boolean(t.length)){var e=t.reduce(function(e,t){return t.dispose({helper:g,state:e,parent:n})||e},g.state);f=vt(h,{searchParameters:e,helper:g}),g.setState(yt(h,{uiState:f,initialSearchParameters:e})),h.length&&m.scheduleSearch()}return this},init:function(e){var t,n=this,r=e.instantSearchInstance,i=e.parent,a=e.uiState;if(null===g){m=r,p=i,f=a[d]||{};var s=r.mainHelper,o=yt(h,{uiState:f,initialSearchParameters:new oe.SearchParameters({index:l})});(g=oe({},o.index,o)).search=function(){return r.onStateChange?(r.onStateChange({uiState:r.mainIndex.getWidgetUiState({}),setUiState:r.setUiState.bind(r)}),s):s.search()},g.searchWithoutTriggeringOnStateChange=function(){return s.search()},g.searchForFacetValues=function(e,t,n,r){var i=g.state.setQueryParameters(r);return s.searchForFacetValues(e,t,n,i)},v=s.derive(function(){return Xe.apply(void 0,P(function(e){for(var t=e.getParent(),n=[e.getHelper().state];null!==t;)n=[t.getHelper().state].concat(n),t=t.getParent();return n}(n)))});var c=null===(t=r._initialResults)||void 0===t?void 0:t[this.getIndexId()];if(c){var u=new oe.SearchResults(new oe.SearchParameters(c.state),c.results);v.lastResults=u,g.lastResults=u}g.on("change",function(e){e.isPageReset&&!function n(e){var t=e.filter(pt);0!==t.length&&t.forEach(function(e){var t=e.getHelper();gt(t,{state:t.state.resetPage(),isPageReset:!0}),n(e.getWidgets())})}(h)}),v.on("search",function(){r.scheduleStalledRender()}),v.on("result",function(e){var t=e.results;r.scheduleRender(),g.lastResults=t}),h.forEach(function(e){e.getRenderState&&Rt({renderState:e.getRenderState(r.renderState[n.getIndexId()]||{},{uiState:a,helper:g,parent:n,instantSearchInstance:r,state:g.state,renderState:r.renderState,templatesConfig:r.templatesConfig,createURL:n.createURL,scopedResults:[],searchMetadata:{isSearchStalled:r._isSearchStalled}}),instantSearchInstance:r,parent:n})}),h.forEach(function(e){e.init&&e.init({uiState:a,helper:g,parent:n,instantSearchInstance:r,state:g.state,renderState:r.renderState,templatesConfig:r.templatesConfig,createURL:n.createURL,scopedResults:[],searchMetadata:{isSearchStalled:r._isSearchStalled}})}),g.on("change",function(e){var t=e.state,n=e._uiState;f=vt(h,{searchParameters:t,helper:g},n||{}),r.onStateChange||r.onInternalStateChange()}),c&&r.scheduleRender()}},render:function(e){var t=this,n=e.instantSearchInstance;this.getResults()&&(h.forEach(function(e){e.getRenderState&&Rt({renderState:e.getRenderState(n.renderState[t.getIndexId()]||{},{helper:t.getHelper(),parent:t,instantSearchInstance:n,results:t.getResults(),scopedResults:t.getScopedResults(),state:t.getResults()._state,renderState:n.renderState,templatesConfig:n.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:n._isSearchStalled}}),instantSearchInstance:n,parent:t})}),h.forEach(function(e){e.render&&e.render({helper:g,parent:t,instantSearchInstance:n,results:t.getResults(),scopedResults:t.getScopedResults(),state:t.getResults()._state,renderState:n.renderState,templatesConfig:n.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:n._isSearchStalled}})}))},dispose:function(){var t=this;h.forEach(function(e){e.dispose&&e.dispose({helper:g,state:g.state,parent:t})}),p=m=null,g.removeAllListeners(),g=null,v.detach(),v=null},getWidgetUiState:function(e){return h.filter(pt).reduce(function(e,t){return t.getWidgetUiState(e)},W(W({},e),{},k({},this.getIndexId(),f)))},getWidgetState:function(e){return this.getWidgetUiState(e)},getWidgetSearchParameters:function(e,t){var n=t.uiState;return yt(h,{uiState:n,initialSearchParameters:e})},refreshUiState:function(){f=vt(h,{searchParameters:this.getHelper().state,helper:this.getHelper()},f)}}}function Rt(e){var t=e.renderState,n=e.instantSearchInstance,r=e.parent,i=r?r.getIndexId():n.mainIndex.getIndexId();n.renderState=W(W({},n.renderState),{},k({},i,W(W({},n.renderState[i]),t)))}function St(a){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.descendantName,n=e.modifierName,r=t?"-".concat(t):"",i=n?"--".concat(n):"";return"".concat("ais","-").concat(a).concat(r).concat(i)}}var wt=St("Highlight");function _t(e){var t=e.attribute,n=e.highlightedTagName,r=void 0===n?"mark":n,i=e.hit,a=e.cssClasses,s=void 0===a?{}:a,o=(Fe(i._highlightResult,t)||{}).value,c=void 0===o?"":o,u=wt({descendantName:"highlighted"})+(s.highlighted?" ".concat(s.highlighted):"");return c.replace(new RegExp(Be.highlightPreTag,"g"),"<".concat(r,' class="').concat(u,'">')).replace(new RegExp(Be.highlightPostTag,"g"),"</".concat(r,">"))}var Pt=St("ReverseHighlight");function Nt(e){var t=e.attribute,n=e.highlightedTagName,r=void 0===n?"mark":n,i=e.hit,a=e.cssClasses,s=void 0===a?{}:a,o=(Fe(i._highlightResult,t)||{}).value,c=void 0===o?"":o,u=Pt({descendantName:"highlighted"})+(s.highlighted?" ".concat(s.highlighted):"");return $e(Je(Ve(c))).replace(new RegExp(Be.highlightPreTag,"g"),"<".concat(r,' class="').concat(u,'">')).replace(new RegExp(Be.highlightPostTag,"g"),"</".concat(r,">"))}var xt=St("Snippet");function It(e){var t=e.attribute,n=e.highlightedTagName,r=void 0===n?"mark":n,i=e.hit,a=e.cssClasses,s=void 0===a?{}:a,o=(Fe(i._snippetResult,t)||{}).value,c=void 0===o?"":o,u=xt({descendantName:"highlighted"})+(s.highlighted?" ".concat(s.highlighted):"");return c.replace(new RegExp(Be.highlightPreTag,"g"),"<".concat(r,' class="').concat(u,'">')).replace(new RegExp(Be.highlightPostTag,"g"),"</".concat(r,">"))}var Ft=St("ReverseSnippet");function Tt(e){var t=e.attribute,n=e.highlightedTagName,r=void 0===n?"mark":n,i=e.hit,a=e.cssClasses,s=void 0===a?{}:a,o=(Fe(i._snippetResult,t)||{}).value,c=void 0===o?"":o,u=Ft({descendantName:"highlighted"})+(s.highlighted?" ".concat(s.highlighted):"");return $e(Je(Ve(c))).replace(new RegExp(Be.highlightPreTag,"g"),"<".concat(r,' class="').concat(u,'">')).replace(new RegExp(Be.highlightPostTag,"g"),"</".concat(r,">"))}function Ct(e,t){return function(e){var t,n=e.method,r=e.payload;if("object"!==h(r))throw new Error("The insights helper expects the payload to be an object.");try{t=at(r)}catch(e){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(n,'" data-insights-payload="').concat(t,'"')}({method:e,payload:t})}function Et(){return function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}}("_ALGOLIA")}function kt(e){e.configure;return M(e,["configure"])}function Lt(){return{stateToRoute:function(n){return Object.keys(n).reduce(function(e,t){return W(W({},e),{},k({},t,kt(n[t])))},{})},routeToState:function(e){var n=0<arguments.length&&void 0!==e?e:{};return Object.keys(n).reduce(function(e,t){return W(W({},e),{},k({},t,kt(n[t])))},{})}}}function Mt(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n}function jt(e,t){Xt.apply(e,Yt(t)?t:[t])}function Ot(e,t,n,r,i,a,s,o,c,u,l,d,h,f){var m=e;if("function"==typeof s?m=s(t,m):m instanceof Date?m=u(m):"comma"===n&&Yt(m)&&(m=Kt.maybeMap(m,function(e){return e instanceof Date?u(e):e})),null===m){if(r)return a&&!h?a(t,en.encoder,f,"key",l):t;m=""}if(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}(m)||Kt.isBuffer(m))return a?[d(h?t:a(t,en.encoder,f,"key",l))+"="+d(a(m,en.encoder,f,"value",l))]:[d(t)+"="+d(String(m))];var p,g=[];if(void 0===m)return g;if("comma"===n&&Yt(m))p=[{value:0<m.length?m.join(",")||null:void 0}];else if(Yt(s))p=s;else{var v=Object.keys(m);p=o?v.sort(o):v}for(var y=0;y<p.length;++y){var b=p[y],R="object"==typeof b&&void 0!==b.value?b.value:m[b];if(!i||null!==R){var S=Yt(m)?"function"==typeof n?n(t,b):t:t+(c?"."+b:"["+b+"]");jt(g,Ot(R,S,n,r,i,a,s,o,c,u,l,d,h,f))}}return g}function At(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e}function Ht(e,t,n,r){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=0<n.depth&&/(\[[^[\]]*])/.exec(i),o=s?i.slice(0,s.index):i,c=[];if(o){if(!n.plainObjects&&tn.call(Object.prototype,o)&&!n.allowPrototypes)return;c.push(o)}for(var u=0;0<n.depth&&null!==(s=a.exec(i))&&u<n.depth;){if(u+=1,!n.plainObjects&&tn.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+i.slice(s.index)+"]"),function(e,t,n,r){for(var i=r?t:At(t,n),a=e.length-1;0<=a;--a){var s,o=e[a];if("[]"===o&&n.parseArrays)s=[].concat(i);else{s=n.plainObjects?Object.create(null):{};var c="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,u=parseInt(c,10);n.parseArrays||""!==c?!isNaN(u)&&o!==c&&String(u)===c&&0<=u&&n.parseArrays&&u<=n.arrayLimit?(s=[])[u]=i:s[c]=i:s={0:i}}i=s}return i}(c,t,n,r)}}function Wt(e){e&&(window.document.title=e)}var Dt=String.prototype.replace,Bt=/%20/g,Ut="RFC3986",qt={default:Ut,formatters:{RFC1738:function(e){return Dt.call(e,Bt,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:Ut},Qt=Object.prototype.hasOwnProperty,$t=Array.isArray,Vt=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Kt={arrayToObject:Mt,assign:function(e,n){return Object.keys(n).reduce(function(e,t){return e[t]=n[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],s=Object.keys(a),o=0;o<s.length;++o){var c=s[o],u=a[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:a,prop:c}),n.push(u))}return function(e){for(;1<e.length;){var t=e.pop(),n=t.obj[t.prop];if($t(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n,r,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var s="",o=0;o<a.length;++o){var c=a.charCodeAt(o);45===c||46===c||95===c||126===c||48<=c&&c<=57||65<=c&&c<=90||97<=c&&c<=122||i===qt.RFC1738&&(40===c||41===c)?s+=a.charAt(o):c<128?s+=Vt[c]:c<2048?s+=Vt[192|c>>6]+Vt[128|63&c]:c<55296||57344<=c?s+=Vt[224|c>>12]+Vt[128|c>>6&63]+Vt[128|63&c]:(o+=1,c=65536+((1023&c)<<10|1023&a.charCodeAt(o)),s+=Vt[240|c>>18]+Vt[128|c>>12&63]+Vt[128|c>>6&63]+Vt[128|63&c])}return s},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if($t(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function r(i,a,s){if(!a)return i;if("object"!=typeof a){if($t(i))i.push(a);else{if(!i||"object"!=typeof i)return[i,a];(s&&(s.plainObjects||s.allowPrototypes)||!Qt.call(Object.prototype,a))&&(i[a]=!0)}return i}if(!i||"object"!=typeof i)return[i].concat(a);var e=i;return $t(i)&&!$t(a)&&(e=Mt(i,s)),$t(i)&&$t(a)?(a.forEach(function(e,t){if(Qt.call(i,t)){var n=i[t];n&&"object"==typeof n&&e&&"object"==typeof e?i[t]=r(n,e,s):i.push(e)}else i[t]=e}),i):Object.keys(a).reduce(function(e,t){var n=a[t];return Qt.call(e,t)?e[t]=r(e[t],n,s):e[t]=n,e},e)}},zt=Object.prototype.hasOwnProperty,Jt={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Yt=Array.isArray,Xt=Array.prototype.push,Gt=Date.prototype.toISOString,Zt=qt.default,en={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Kt.encode,encodeValuesOnly:!1,format:Zt,formatter:qt.formatters[Zt],indices:!1,serializeDate:function(e){return Gt.call(e)},skipNulls:!1,strictNullHandling:!1},tn=Object.prototype.hasOwnProperty,nn=Array.isArray,rn={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Kt.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},an={formats:qt,parse:function(e,t){var n=function(e){if(!e)return rn;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?rn.charset:e.charset;return{allowDots:void 0===e.allowDots?rn.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:rn.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:rn.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:rn.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:rn.comma,decoder:"function"==typeof e.decoder?e.decoder:rn.decoder,delimiter:"string"==typeof e.delimiter||Kt.isRegExp(e.delimiter)?e.delimiter:rn.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:rn.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:rn.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:rn.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:rn.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:rn.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){var n,r={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,s=i.split(t.delimiter,a),o=-1,c=t.charset;if(t.charsetSentinel)for(n=0;n<s.length;++n)0===s[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===s[n]?c="utf-8":"utf8=%26%2310003%3B"===s[n]&&(c="iso-8859-1"),o=n,n=s.length);for(n=0;n<s.length;++n)if(n!==o){var u,l,d=s[n],h=d.indexOf("]="),f=-1===h?d.indexOf("="):h+1;(l=-1===f?(u=t.decoder(d,rn.decoder,c,"key"),t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,f),rn.decoder,c,"key"),Kt.maybeMap(At(d.slice(f+1),t),function(e){return t.decoder(e,rn.decoder,c,"value")})))&&t.interpretNumericEntities&&"iso-8859-1"===c&&(l=l.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),-1<d.indexOf("[]=")&&(l=nn(l)?[l]:l),tn.call(r,u)?r[u]=Kt.combine(r[u],l):r[u]=l}return r}(e,n):e,i=n.plainObjects?Object.create(null):{},a=Object.keys(r),s=0;s<a.length;++s){var o=a[s],c=Ht(o,r[o],n,"string"==typeof e);i=Kt.merge(i,c,n)}return Kt.compact(i)},stringify:function(e,t){var n,r=e,i=function(e){if(!e)return en;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||en.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=qt.default;if(void 0!==e.format){if(!zt.call(qt.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=qt.formatters[n],i=en.filter;return"function"!=typeof e.filter&&!Yt(e.filter)||(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:en.addQueryPrefix,allowDots:void 0===e.allowDots?en.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:en.charsetSentinel,delimiter:void 0===e.delimiter?en.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:en.encode,encoder:"function"==typeof e.encoder?e.encoder:en.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:en.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:en.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:en.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:en.strictNullHandling}}(t);"function"==typeof i.filter?r=(0,i.filter)("",r):Yt(i.filter)&&(n=i.filter);var a,s=[];if("object"!=typeof r||null===r)return"";a=t&&t.arrayFormat in Jt?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var o=Jt[a];n=n||Object.keys(r),i.sort&&n.sort(i.sort);for(var c=0;c<n.length;++c){var u=n[c];i.skipNulls&&null===r[u]||jt(s,Ot(r[u],u,o,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset))}var l=s.join(i.delimiter),d=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),0<l.length?d+l:""}},sn=function(){function c(e){var r=this,t=e.windowTitle,n=e.writeDelay,i=void 0===n?400:n,a=e.createURL,s=e.parseURL,o=e.getLocation;C(this,c),k(this,"windowTitle",void 0),k(this,"writeDelay",void 0),k(this,"_createURL",void 0),k(this,"parseURL",void 0),k(this,"getLocation",void 0),k(this,"writeTimer",void 0),k(this,"shouldPushState",!0),k(this,"isDisposed",!1),k(this,"latestAcknowledgedHistory",0),this.windowTitle=t,this.writeTimer=void 0,this.writeDelay=i,this._createURL=a,this.parseURL=s,this.getLocation=o,ft(function(e){var t=e.window,n=r.windowTitle&&r.windowTitle(r.read());Wt(n),r.latestAcknowledgedHistory=t.history.length})}return E(c,[{key:"read",value:function(){return this.parseURL({qsModule:an,location:this.getLocation()})}},{key:"write",value:function(i){var a=this;ft(function(e){var t=e.window,n=a.createURL(i),r=a.windowTitle&&a.windowTitle(i);a.writeTimer&&clearTimeout(a.writeTimer),a.writeTimer=setTimeout(function(){Wt(r);var e=!a.isDisposed||a.latestAcknowledgedHistory===t.history.length;a.shouldPushState&&e&&(t.history.pushState(i,r||"",n),a.latestAcknowledgedHistory=t.history.length),a.shouldPushState=!0,a.writeTimer=void 0},a.writeDelay)})}},{key:"onUpdate",value:function(n){var r=this;this._onPopState=function(e){r.writeTimer&&(clearTimeout(r.writeTimer),r.writeTimer=void 0),r.shouldPushState=!1;var t=e.state;n(t||r.read())},ft(function(e){e.window.addEventListener("popstate",r._onPopState)})}},{key:"createURL",value:function(e){return this._createURL({qsModule:an,routeState:e,location:this.getLocation()})}},{key:"dispose",value:function(){var n=this;this.isDisposed=!0,ft(function(e){var t=e.window;n._onPopState&&t.removeEventListener("popstate",n._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this.write({})}}]),c}();function on(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.createURL,n=void 0===t?function(e){var t=e.qsModule,n=e.routeState,r=e.location,i=r.protocol,a=r.hostname,s=r.port,o=void 0===s?"":s,c=r.pathname,u=r.hash,l=t.stringify(n),d=""===o?"":":".concat(o);return l?"".concat(i,"//").concat(a).concat(d).concat(c,"?").concat(l).concat(u):"".concat(i,"//").concat(a).concat(d).concat(c).concat(u)}:t,r=e.parseURL,i=void 0===r?function(e){var t=e.qsModule,n=e.location;return t.parse(n.search.slice(1),{arrayLimit:99})}:r,a=e.writeDelay,s=void 0===a?400:a,o=e.windowTitle,c=e.getLocation;return new sn({createURL:n,parseURL:i,writeDelay:s,windowTitle:o,getLocation:void 0===c?function(){return ft(function(e){return e.window.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:c})}function cn(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.router,a=void 0===n?on():n,r=t.stateMapping,s=void 0===r?Lt():r;return function(e){var r=e.instantSearchInstance;r._createURL=function(n){var e=Object.keys(n).reduce(function(e,t){return W(W({},e),{},k({},t,n[t]))},r.mainIndex.getWidgetUiState({})),t=s.stateToRoute(e);return a.createURL(t)};var i=void 0,t=r._initialUiState;return{onStateChange:function(e){var t=e.uiState,n=s.stateToRoute(t);void 0!==i&&Le(i,n)||(a.write(n),i=n)},subscribe:function(){r._initialUiState=W(W({},t),s.routeToState(a.read())),a.onUpdate(function(e){r.setUiState(s.routeToState(e))})},unsubscribe:function(){a.dispose()}}}}function un(){return ft(function(e){var t,n;return-1<(null===(t=e.window.navigator)||void 0===t?void 0:null===(n=t.userAgent)||void 0===n?void 0:n.indexOf("Algolia Crawler"))},{fallback:function(){return!1}})}function ln(){return function(e){var t=e.instantSearchInstance,n={widgets:[]},r=document.createElement("meta"),i=document.querySelector("head");return r.name="instantsearch:widgets",{onStateChange:function(){},subscribe:function(){setTimeout(function(){var e=t.client;n.ua=e.transporter&&e.transporter.userAgent?e.transporter.userAgent.value:e._ua,function i(e,a,s){var t=a.mainIndex,o={instantSearchInstance:a,parent:t,scopedResults:[],state:t.getHelper().state,helper:t.getHelper(),createURL:t.createURL,uiState:a._initialUiState,renderState:a.renderState,templatesConfig:a.templatesConfig,searchMetadata:{isSearchStalled:a._isSearchStalled}};e.forEach(function(e){var t={};if(e.getWidgetRenderState){var n=e.getWidgetRenderState(o);n&&n.widgetParams&&(t=n.widgetParams)}var r=Object.keys(t).filter(function(e){return void 0!==t[e]});s.widgets.push({type:e.$$type,widgetType:e.$$widgetType,params:r}),"ais.index"===e.$$type&&i(e.getWidgets(),a,s)})}(t.mainIndex.getWidgets(),t,n),r.content=JSON.stringify(n),i.appendChild(r)},0)},unsubscribe:function(){r.remove()}}}}var dn=Ze({name:"instantsearch"});function hn(){return"#"}function fn(i,e){var h=1<arguments.length&&void 0!==e?e:xe;return Ne(i,pn()),function(a){var e=a||{},t=e.includedAttributes,s=void 0===t?[]:t,n=e.excludedAttributes,o=void 0===n?["query"]:n,r=e.transformItems,c=void 0===r?function(e){return e}:r;if(a&&a.includedAttributes&&a.excludedAttributes)throw new Error(pn("The options `includedAttributes` and `excludedAttributes` cannot be used together."));function u(){return d.refine()}function l(){return d.createURL()}var d={refine:xe,createURL:function(){return""},attributesToClear:[]};return{$$type:"ais.clearRefinements",init:function(e){var t=e.instantSearchInstance;i(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;i(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){h()},getRenderState:function(e,t){return W(W({},e),{},{clearRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.createURL,n=e.scopedResults,r=e.results;d.attributesToClear=n.reduce(function(e,t){return e.concat(function(e){var t=e.scopedResult,n=e.includedAttributes,r=e.excludedAttributes,i=e.transformItems,a=e.results,s=-1!==n.indexOf("query")||-1===r.indexOf("query");return{helper:t.helper,items:i(he(we(t.results,t.helper.state,s).map(function(e){return e.attribute}).filter(function(e){return 0===n.length||-1!==n.indexOf(e)}).filter(function(e){return"query"===e&&s||-1===r.indexOf(e)})),{results:a})}}({scopedResult:t,includedAttributes:s,excludedAttributes:o,transformItems:c,results:r}))},[]),d.refine=function(){d.attributesToClear.forEach(function(e){var t=e.helper,n=e.items;t.setState(_e({helper:t,attributesToClear:n})).search()})},d.createURL=function(){return t(Xe.apply(void 0,P(d.attributesToClear.map(function(e){return _e({helper:e.helper,attributesToClear:e.items})}))))};var i=d.attributesToClear.some(function(e){return 0<e.items.length});return{canRefine:i,hasRefinements:i,refine:u,createURL:l,widgetParams:a}}}}}var mn=function(){L(R,e);var b=O(R);function R(e){var n;C(this,R),k(j(n=b.call(this)),"client",void 0),k(j(n),"indexName",void 0),k(j(n),"insightsClient",void 0),k(j(n),"onStateChange",null),k(j(n),"helper",void 0),k(j(n),"mainHelper",void 0),k(j(n),"mainIndex",void 0),k(j(n),"started",void 0),k(j(n),"templatesConfig",void 0),k(j(n),"renderState",{}),k(j(n),"_stalledSearchDelay",void 0),k(j(n),"_searchStalledTimer",void 0),k(j(n),"_isSearchStalled",void 0),k(j(n),"_initialUiState",void 0),k(j(n),"_initialResults",void 0),k(j(n),"_createURL",void 0),k(j(n),"_searchFunction",void 0),k(j(n),"_mainHelperSearch",void 0),k(j(n),"middleware",[]),k(j(n),"sendEventToInsights",void 0),k(j(n),"scheduleSearch",ce(function(){n.started&&n.mainHelper.search()})),k(j(n),"scheduleRender",ce(function(){n.mainHelper.hasPendingRequests()||(clearTimeout(n._searchStalledTimer),n._searchStalledTimer=null,n._isSearchStalled=!1),n.mainIndex.render({instantSearchInstance:j(n)}),n.emit("render")})),k(j(n),"onInternalStateChange",ce(function(){var t=n.mainIndex.getWidgetUiState({});n.middleware.forEach(function(e){e.instance.onStateChange({uiState:t})})}));var t=e.indexName,r=void 0===t?null:t,i=e.numberLocale,a=e.initialUiState,s=void 0===a?{}:a,o=e.routing,c=void 0===o?null:o,u=e.searchFunction,l=e.stalledSearchDelay,d=void 0===l?200:l,h=e.searchClient,f=void 0===h?null:h,m=e.insightsClient,p=void 0===m?null:m,g=e.onStateChange,v=void 0===g?null:g;if(null===r)throw new Error(dn("The `indexName` option is required."));if(null===f)throw new Error(dn("The `searchClient` option is required."));if("function"!=typeof f.search)throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if("function"==typeof f.addAlgoliaAgent&&f.addAlgoliaAgent("instantsearch.js (".concat("4.39.0",")")),p&&"function"!=typeof p)throw new Error(dn("The `insightsClient` option should be a function."));if(n.client=f,n.insightsClient=p,n.indexName=r,n.helper=null,n.mainHelper=null,n.mainIndex=bt({indexName:r}),n.onStateChange=v,n.started=!1,n.templatesConfig={helpers:function(e){var n=e.numberLocale;return{formatNumber:function(e,t){return Number(t(e)).toLocaleString(n)},highlight:function(e,t){try{return t(_t(W(W({},JSON.parse(e)),{},{hit:this})))}catch(e){throw new Error('\nThe highlight helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}},reverseHighlight:function(e,t){try{return t(Nt(W(W({},JSON.parse(e)),{},{hit:this})))}catch(e){throw new Error('\n  The reverseHighlight helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}},snippet:function(e,t){try{return t(It(W(W({},JSON.parse(e)),{},{hit:this})))}catch(e){throw new Error('\nThe snippet helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}},reverseSnippet:function(e,t){try{return t(Tt(W(W({},JSON.parse(e)),{},{hit:this})))}catch(e){throw new Error('\n  The reverseSnippet helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}},insights:function(e,t){try{var n=JSON.parse(e),r=n.method,i=n.payload;return t(Ct(r,W({objectIDs:[this.objectID]},i)))}catch(e){throw new Error('\nThe insights helper expects a JSON object of the format:\n{ "method": "method-name", "payload": { "eventName": "name of the event" } }')}}}}({numberLocale:i}),compileOptions:{}},n._stalledSearchDelay=d,n._searchStalledTimer=null,n._isSearchStalled=!1,n._createURL=hn,n._initialUiState=s,n._initialResults=null,u&&(n._searchFunction=u),n.sendEventToInsights=xe,c){var y="boolean"==typeof c?void 0:c;n.use(cn(y))}return un()&&n.use(ln()),n}return E(R,[{key:"use",value:function(){for(var n=this,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.map(function(e){var t=W({subscribe:xe,unsubscribe:xe,onStateChange:xe},e({instantSearchInstance:n}));return n.middleware.push({creator:e,instance:t}),t});return this.started&&i.forEach(function(e){e.subscribe()}),this}},{key:"unuse",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.middleware.filter(function(e){return t.includes(e.creator)}).forEach(function(e){return e.instance.unsubscribe()}),this.middleware=this.middleware.filter(function(e){return!t.includes(e.creator)}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(e){return this.addWidgets([e])}},{key:"addWidgets",value:function(e){if(!Array.isArray(e))throw new Error(dn("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(dn("The widget definition expects a `render` and/or an `init` method."));return this.mainIndex.addWidgets(e),this}},{key:"removeWidget",value:function(e){return this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){if(!Array.isArray(e))throw new Error(dn("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));if(e.some(function(e){return"function"!=typeof e.dispose}))throw new Error(dn("The widget definition expects a `dispose` method."));return this.mainIndex.removeWidgets(e),this}},{key:"start",value:function(){var r=this;if(this.started)throw new Error(dn("The `start` method has already been called once."));var t=this.mainHelper||oe(this.client,this.indexName);if(t.search=function(){return t.searchOnlyWithDerivedHelpers()},this._searchFunction){var i={search:function(){return new Promise(xe)}};this._mainHelperSearch=t.search.bind(t),t.search=function(){var n=r.mainIndex.getHelper(),e=oe(i,n.state.index,n.state);return e.once("search",function(e){var t=e.state;n.overrideStateWithoutTriggeringChangeEvent(t),r._mainHelperSearch()}),e.on("change",function(e){var t=e.state;n.setState(t)}),r._searchFunction(e),t}}if(t.on("error",function(e){var t=e.error;t.error=t,r.emit("error",t)}),this.mainHelper=t,this.middleware.forEach(function(e){e.instance.subscribe()}),this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this._initialResults){var e=this.scheduleSearch;this.scheduleSearch=ce(xe),ce(function(){r.scheduleSearch=e})()}else this.scheduleSearch();this.helper=this.mainIndex.getHelper(),this.started=!0}},{key:"dispose",value:function(){this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),this.mainHelper.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(e){e.instance.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var e=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){e._isSearchStalled=!0,e.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(e){if(!this.mainHelper)throw new Error(dn("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var r="function"==typeof e?e(this.mainIndex.getWidgetUiState({})):e;!function e(t){var n=r[t.getIndexId()]||{};t.getHelper().setState(t.getWidgetSearchParameters(t.getHelper().state,{uiState:n})),t.getWidgets().filter(pt).forEach(e)}(this.mainIndex),this.scheduleSearch(),this.onInternalStateChange()}},{key:"getUiState",value:function(){return this.started&&this.mainIndex.refreshUiState(),this.mainIndex.getWidgetUiState({})}},{key:"createURL",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};if(!this.started)throw new Error(dn("The `start` method needs to be called before `createURL`."));return this._createURL(t)}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(dn("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}]),R}(),pn=Ze({name:"clear-refinements",connector:!0});function gn(r,e){var i=1<arguments.length&&void 0!==e?e:xe;return Ne(r,vn()),function(s){if((s||{}).includedAttributes&&(s||{}).excludedAttributes)throw new Error(vn("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var e=s||{},o=e.includedAttributes,t=e.excludedAttributes,c=void 0===t?["query"]:t,n=e.transformItems,u=void 0===n?function(e){return e}:n;return{$$type:"ais.currentRefinements",init:function(e){var t=e.instantSearchInstance;r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){i()},getRenderState:function(e,t){return W(W({},e),{},{currentRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var n=e.results,t=e.scopedResults,r=e.createURL,i=e.helper;var a=n?t.reduce(function(e,t){return e.concat(u(yn({results:t.results,helper:t.helper,includedAttributes:o,excludedAttributes:c}),{results:n}))},[]):u(yn({results:{},helper:i,includedAttributes:o,excludedAttributes:c}),{results:n});return{items:a,canRefine:0<a.length,refine:function(e){return Rn(i,e)},createURL:function(e){return r(bn(i.state,e))},widgetParams:s}}}}}var vn=Ze({name:"current-refinements",connector:!0});function yn(e){var t=e.results,n=e.helper,r=e.includedAttributes,i=e.excludedAttributes,a=-1!==(r||[]).indexOf("query")||-1===(i||[]).indexOf("query"),s=r?function(e){return-1!==r.indexOf(e.attribute)}:function(e){return-1===i.indexOf(e.attribute)},o=we(t,n.state,a).map(Sn).filter(s);return o.reduce(function(e,t){return[].concat(P(e.filter(function(e){return e.attribute!==t.attribute})),[{indexName:n.state.index,attribute:t.attribute,label:t.attribute,refinements:o.filter(function(e){return e.attribute===t.attribute}).sort(function(e,t){return"numeric"===e.type?e.value-t.value:0}),refine:function(e){return Rn(n,e)}}])},[])}function bn(e,t){switch(t.type){case"facet":return e.removeFacetRefinement(t.attribute,String(t.value));case"disjunctive":return e.removeDisjunctiveFacetRefinement(t.attribute,String(t.value));case"hierarchical":return e.removeHierarchicalFacetRefinement(t.attribute);case"exclude":return e.removeExcludeRefinement(t.attribute,String(t.value));case"numeric":return e.removeNumericRefinement(t.attribute,t.operator,String(t.value));case"tag":return e.removeTagRefinement(String(t.value));case"query":return e.setQueryParameter("query","");default:return e}}function Rn(e,t){e.setState(bn(e.state,t)).search()}function Sn(e){var t="numeric"===e.type?Number(e.name):e.name,n=e.operator?"".concat(function(e){switch(e){case">=":return"â¥";case"<=":return"â¤";default:return e}}(e.operator)," ").concat(e.name):e.name,r={attribute:e.attribute,type:e.type,value:t,label:n};return void 0!==e.operator&&(r.operator=e.operator),void 0!==e.count&&(r.count=e.count),void 0!==e.exhaustive&&(r.exhaustive=e.exhaustive),r}function wn(x,e){var I=1<arguments.length&&void 0!==e?e:xe;return Ne(x,Nn()),function(d){var e=d||{},c=e.attributes,t=e.separator,u=void 0===t?" > ":t,n=e.rootPath,l=void 0===n?null:n,r=e.showParentLevel,h=void 0===r||r,i=e.limit,f=void 0===i?10:i,a=e.showMore,m=void 0!==a&&a,s=e.showMoreLimit,p=void 0===s?20:s,o=e.sortBy,g=void 0===o?xn:o,v=e.transformItems,y=void 0===v?function(e){return e}:v;if(!c||!Array.isArray(c)||0===c.length)throw new Error(Nn("The `attributes` option expects an array of strings."));if(!0===m&&p<=f)throw new Error(Nn("The `showMoreLimit` option must be greater than `limit`."));var b,R,S=D(c,1)[0],w=function(){};function _(){w()}var P=!1;function N(){return P?p:f}return{$$type:"ais.hierarchicalMenu",init:function(e){var t=e.instantSearchInstance;x(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;w=function(e,t){return function(){P=!P,t.render(e)}}(e,this),x(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return I(),t.removeHierarchicalFacet(S).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return W(W({},e),{},{hierarchicalMenu:W(W({},e.hierarchicalMenu),{},k({},S,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.results,n=e.state,r=e.createURL,i=e.instantSearchInstance,a=e.helper,s=[],o=!1;if(b=b||it({instantSearchInstance:i,helper:a,attribute:S,widgetType:this.$$type}),R=R||function(e){b("click",e),a.toggleFacetRefinement(S,e).search()},t){var c=t.getFacetValues(S,{sortBy:g,facetOrdering:g===xn}),u=c&&!Array.isArray(c)&&c.data?c.data:[],l=(n.maxValuesPerFacet||0)>N()?u.length<=N():u.length<N();o=m&&(P||!l),s=y(function a(e){return e.slice(0,N()).map(function(e){var t=e.name,n=e.path,r=e.data,i=W(W({},M(e,["name","path","data"])),{},{label:t,value:n,data:null});return Array.isArray(r)&&(i.data=a(r)),i})}(u),{results:t})}return{items:s,refine:R,canRefine:0<s.length,createURL:function(e){return r(n.resetPage().toggleFacetRefinement(S,e))},sendEvent:b,widgetParams:d,isShowingMore:P,toggleShowMore:_,canToggleShowMore:o}},getWidgetUiState:function(e,t){var n=t.searchParameters.getHierarchicalFacetBreadcrumb(S);return n.length?W(W({},e),{},{hierarchicalMenu:W(W({},e.hierarchicalMenu),{},k({},S,n))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.hierarchicalMenu&&n.hierarchicalMenu[S];if(e.isHierarchicalFacet(S))e.getHierarchicalFacetByName(S);var i=e.removeHierarchicalFacet(S).addHierarchicalFacet({name:S,attributes:c,separator:u,rootPath:l,showParentLevel:h}),a=i.maxValuesPerFacet||0,s=Math.max(a,m?p:f),o=i.setQueryParameter("maxValuesPerFacet",s);return r?o.addHierarchicalFacetRefinement(S,r.join(u)):o.setQueryParameters({hierarchicalFacetsRefinements:W(W({},o.hierarchicalFacetsRefinements),{},k({},S,[]))})}}}}function _n(r,e){var i=1<arguments.length&&void 0!==e?e:xe;return Ne(r,In()),function(a){var s,o,e=a||{},t=e.escapeHTML,c=void 0===t||t,n=e.transformItems,u=void 0===n?function(e){return e}:n;return{$$type:"ais.hits",init:function(e){r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=this.getWidgetRenderState(e);t.sendEvent("view",t.hits),r(W(W({},t),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return W(W({},e),{},{hits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,n=e.helper,r=e.instantSearchInstance;if(s=s||ct({instantSearchInstance:r,index:n.getIndex(),widgetType:this.$$type}),o=o||ut({index:n.getIndex(),widgetType:this.$$type}),!t)return{hits:[],results:void 0,sendEvent:s,bindEvent:o,widgetParams:a};c&&0<t.hits.length&&(t.hits=Qe(t.hits));var i=rt(nt(t.hits,t.page,t.hitsPerPage),t.queryID);return{hits:u(i,{results:t}),results:t,sendEvent:s,bindEvent:o,widgetParams:a}},dispose:function(e){var t=e.state;return i(),c?t.setQueryParameters(Object.keys(De).reduce(function(e,t){return W(W({},e),{},k({},t,void 0))},{})):t},getWidgetSearchParameters:function(e){return c?e.setQueryParameters(De):e}}}}function Pn(e){var t=e.method,n=e.results,r=e.hits,i=e.objectIDs,a=n.index,s=function(n,e){return e.map(function(t){var e=be(n,function(e){return e.objectID===t});if(void 0===e)throw new Error('Could not find objectID "'.concat(t,'" passed to `clickedObjectIDsAfterSearch` in the returned hits. This is necessary to infer the absolute position and the query ID.'));return e})}(r,i),o=function(e){var t=he(e.map(function(e){return e.__queryID}));if(1<t.length)throw new Error("Insights currently allows a single `queryID`. The `objectIDs` provided map to multiple `queryID`s.");var n=t[0];if("string"!=typeof n)throw new Error("Could not infer `queryID`. Ensure InstantSearch `clickAnalytics: true` was added with the Configure widget.\n\nSee: https://alg.li/lNiZZ7");return n}(s);switch(t){case"clickedObjectIDsAfterSearch":return{index:a,queryID:o,objectIDs:i,positions:function(e){return e.map(function(e){return e.__position})}(s)};case"convertedObjectIDsAfterSearch":return{index:a,queryID:o,objectIDs:i};default:throw new Error('Unsupported method passed to insights: "'.concat(t,'".'))}}var Nn=Ze({name:"hierarchical-menu",connector:!0}),xn=["name:asc"],In=Ze({name:"hits",connector:!0});function Fn(t){return function(s,e){return t(function(e,t){var n=e.results,r=e.hits,i=e.instantSearchInstance;if(n&&r&&i){var a=function(o,c,u){return function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0];if(!o){var a=Ze({name:"instantsearch"});throw new Error(a("The `insightsClient` option has not been provided to `instantsearch`."))}if(!Array.isArray(i.objectIDs))throw new TypeError("Expected `objectIDs` to be an array.");var s=Pn({method:e,results:c,hits:u,objectIDs:i.objectIDs});o(e,W(W({},s),i))}}(i.insightsClient,n,r);return s(W(W({},e),{},{insights:a}),t)}return s(e,t)},e)}}var Tn,Cn,En,kn,Ln,Mn,jn={},On=[],An=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Hn(e,t){for(var n in t)e[n]=t[n];return e}function Wn(e){var t=e.parentNode;t&&t.removeChild(e)}function Dn(e,t,n){var r,i,a,s={};for(a in t)"key"==a?r=t[a]:"ref"==a?i=t[a]:s[a]=t[a];if(2<arguments.length&&(s.children=3<arguments.length?Tn.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return Bn(e,s,r,i,null)}function Bn(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++En:i};return null==i&&null!=Cn.vnode&&Cn.vnode(a),a}function Un(e){return e.children}function qn(e,t){this.props=e,this.context=t}function Qn(e,t){if(null==t)return e.__?Qn(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Qn(e):null}function $n(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return $n(e)}}function Vn(e){(!e.__d&&(e.__d=!0)&&kn.push(e)&&!Kn.__r++||Mn!==Cn.debounceRendering)&&((Mn=Cn.debounceRendering)||Ln)(Kn)}function Kn(){for(var e;Kn.__r=kn.length;)e=kn.sort(function(e,t){return e.__v.__b-t.__v.__b}),kn=[],e.some(function(e){var t,n,r,i,a,s;e.__d&&(a=(i=(t=e).__v).__e,(s=t.__P)&&(n=[],(r=Hn({},i)).__v=i.__v+1,tr(s,i,r,t.__n,void 0!==s.ownerSVGElement,null!=i.__h?[a]:null,n,null==a?Qn(i):a,i.__h),nr(n,i),i.__e!=a&&$n(i)))})}function zn(e,t,n,r,i,a,s,o,c,u){var l,d,h,f,m,p,g,v=r&&r.__k||On,y=v.length;for(n.__k=[],l=0;l<t.length;l++)if(null!=(f=n.__k[l]=null==(f=t[l])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?Bn(null,f,null,null,f):Array.isArray(f)?Bn(Un,{children:f},null,null,null):0<f.__b?Bn(f.type,f.props,f.key,null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(h=v[l])||h&&f.key==h.key&&f.type===h.type)v[l]=void 0;else for(d=0;d<y;d++){if((h=v[d])&&f.key==h.key&&f.type===h.type){v[d]=void 0;break}h=null}tr(e,f,h=h||jn,i,a,s,o,c,u),m=f.__e,(d=f.ref)&&h.ref!=d&&(g=g||[],h.ref&&g.push(h.ref,null,f),g.push(d,f.__c||m,f)),null!=m?(null==p&&(p=m),"function"==typeof f.type&&f.__k===h.__k?f.__d=c=Jn(f,c,e):c=Yn(e,f,h,v,m,c),"function"==typeof n.type&&(n.__d=c)):c&&h.__e==c&&c.parentNode!=e&&(c=Qn(h))}for(n.__e=p,l=y;l--;)null!=v[l]&&("function"==typeof n.type&&null!=v[l].__e&&v[l].__e==n.__d&&(n.__d=Qn(r,l+1)),ir(v[l],v[l]));if(g)for(l=0;l<g.length;l++)rr(g[l],g[++l],g[++l])}function Jn(e,t,n){for(var r,i=e.__k,a=0;i&&a<i.length;a++)(r=i[a])&&(r.__=e,t="function"==typeof r.type?Jn(r,t,n):Yn(n,r,r,i,r.__e,t));return t}function Yn(e,t,n,r,i,a){var s,o,c;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(null==n||i!=a||null==i.parentNode)e:if(null==a||a.parentNode!==e)e.appendChild(i),s=null;else{for(o=a,c=0;(o=o.nextSibling)&&c<r.length;c+=2)if(o==i)break e;e.insertBefore(i,a),s=a}return void 0!==s?s:i.nextSibling}function Xn(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||An.test(t)?n:n+"px"}function Gn(e,t,n,r,i){var a;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Xn(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Xn(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r||e.addEventListener(t,a?er:Zn,a):e.removeEventListener(t,a?er:Zn,a);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function Zn(e){this.l[e.type+!1](Cn.event?Cn.event(e):e)}function er(e){this.l[e.type+!0](Cn.event?Cn.event(e):e)}function tr(e,t,n,r,i,a,s,o,c){var u,l,d,h,f,m,p,g,v,y,b,R=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(c=n.__h,o=t.__e=n.__e,t.__h=null,a=[o]),(u=Cn.__b)&&u(t);try{e:if("function"==typeof R){if(g=t.props,v=(u=R.contextType)&&r[u.__c],y=u?v?v.props.value:u.__:r,n.__c?p=(l=t.__c=n.__c).__=l.__E:("prototype"in R&&R.prototype.render?t.__c=l=new R(g,y):(t.__c=l=new qn(g,y),l.constructor=R,l.render=ar),v&&v.sub(l),l.props=g,l.state||(l.state={}),l.context=y,l.__n=r,d=l.__d=!0,l.__h=[]),null==l.__s&&(l.__s=l.state),null!=R.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=Hn({},l.__s)),Hn(l.__s,R.getDerivedStateFromProps(g,l.__s))),h=l.props,f=l.state,d)null==R.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(null==R.getDerivedStateFromProps&&g!==h&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(g,y),!l.__e&&null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(g,l.__s,y)||t.__v===n.__v){l.props=g,l.state=l.__s,t.__v!==n.__v&&(l.__d=!1),(l.__v=t).__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),l.__h.length&&s.push(l);break e}null!=l.componentWillUpdate&&l.componentWillUpdate(g,l.__s,y),null!=l.componentDidUpdate&&l.__h.push(function(){l.componentDidUpdate(h,f,m)})}l.context=y,l.props=g,l.state=l.__s,(u=Cn.__r)&&u(t),l.__d=!1,l.__v=t,l.__P=e,u=l.render(l.props,l.state,l.context),l.state=l.__s,null!=l.getChildContext&&(r=Hn(Hn({},r),l.getChildContext())),d||null==l.getSnapshotBeforeUpdate||(m=l.getSnapshotBeforeUpdate(h,f)),b=null!=u&&u.type===Un&&null==u.key?u.props.children:u,zn(e,Array.isArray(b)?b:[b],t,n,r,i,a,s,o,c),l.base=t.__e,t.__h=null,l.__h.length&&s.push(l),p&&(l.__E=l.__=null),l.__e=!1}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,i,a,s,o){var c,u,l,d=n.props,h=t.props,f=t.type,m=0;if("svg"===f&&(i=!0),null!=a)for(;m<a.length;m++)if((c=a[m])&&"setAttribute"in c==!!f&&(f?c.localName===f:3===c.nodeType)){e=c,a[m]=null;break}if(null==e){if(null===f)return document.createTextNode(h);e=i?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,h.is&&h),a=null,o=!1}if(null===f)d===h||o&&e.data===h||(e.data=h);else{if(a=a&&Tn.call(e.childNodes),u=(d=n.props||jn).dangerouslySetInnerHTML,l=h.dangerouslySetInnerHTML,!o){if(null!=a)for(d={},m=0;m<e.attributes.length;m++)d[e.attributes[m].name]=e.attributes[m].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===e.innerHTML)||(e.innerHTML=l&&l.__html||""))}if(function(e,t,n,r,i){var a;for(a in n)"children"===a||"key"===a||a in t||Gn(e,a,null,n[a],r);for(a in t)i&&"function"!=typeof t[a]||"children"===a||"key"===a||"value"===a||"checked"===a||n[a]===t[a]||Gn(e,a,t[a],n[a],r)}(e,h,d,i,o),l)t.__k=[];else if(m=t.props.children,zn(e,Array.isArray(m)?m:[m],t,n,r,i&&"foreignObject"!==f,a,s,a?a[0]:n.__k&&Qn(n,0),o),null!=a)for(m=a.length;m--;)null!=a[m]&&Wn(a[m]);o||("value"in h&&void 0!==(m=h.value)&&(m!==d.value||m!==e.value||"progress"===f&&!m)&&Gn(e,"value",m,d.value,!1),"checked"in h&&void 0!==(m=h.checked)&&m!==e.checked&&Gn(e,"checked",m,d.checked,!1))}return e}(n.__e,t,n,r,i,a,s,c);(u=Cn.diffed)&&u(t)}catch(e){t.__v=null,!c&&null==a||(t.__e=o,t.__h=!!c,a[a.indexOf(o)]=null),Cn.__e(e,t,n)}}function nr(e,t){Cn.__c&&Cn.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){Cn.__e(e,t.__v)}})}function rr(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Cn.__e(e,n)}}function ir(e,t,n){var r,i;if(Cn.unmount&&Cn.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||rr(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Cn.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&ir(r[i],t,"function"!=typeof e.type);n||null==e.__e||Wn(e.__e),e.__e=e.__d=void 0}function ar(e,t,n){return this.constructor(e,n)}function sr(e,t,n){var r,i,a;Cn.__&&Cn.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,a=[],tr(t,e=(!r&&n||t).__k=Dn(Un,null,[e]),i||jn,jn,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?Tn.call(t.childNodes):null,a,!r&&n?n:i?i.__e:t.firstChild,r),nr(a,e)}Tn=On.slice,Cn={__e:function(e,t){for(var n,r,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e}},En=0,qn.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Hn({},this.state),"function"==typeof e&&(e=e(Hn({},n),this.props)),e&&Hn(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),Vn(this))},qn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Vn(this))},qn.prototype.render=Un,kn=[],Ln="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Kn.__r=0;function or(e,t,n){for(var r=e;r&&!n(r);){if(r===t)return null;r=r.parentElement}return r}function cr(e){return function(s){return Dn("div",{onClick:function(e){if(s.sendEvent){var t=or(e.target,e.currentTarget,function(e){return e.hasAttribute("data-insights-event")});if(t)(function(e){var t=e.getAttribute("data-insights-event");if("string"!=typeof t)throw new Error("The insights middleware expects `data-insights-event` to be a base64-encoded JSON string.");try{return st(t)}catch(e){throw new Error("The insights middleware was unable to parse `data-insights-event`.")}})(t).forEach(function(e){return s.sendEvent(e)})}var n=or(e.target,e.currentTarget,function(e){return function(e){return e.hasAttribute("data-insights-method")}(e)});if(n){var r=function(e){var t=e.getAttribute("data-insights-method"),n=e.getAttribute("data-insights-payload");if("string"!=typeof n)throw new Error("The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.");try{return{method:t,payload:st(n)}}catch(e){throw new Error("The insights helper was unable to parse `data-insights-payload`.")}}(n),i=r.method,a=r.payload;s.insights(i,a)}}},Dn(e,s))}}function ur(l,e){var d=1<arguments.length&&void 0!==e?e:xe;return Ne(l,dr()),function(a){var e=a||{},t=e.items,n=e.transformItems,s=void 0===n?function(e){return e}:n;if(!Array.isArray(t))throw new Error(dr("The `items` option expects an array of objects."));var o=t,r=o.filter(function(e){return!0===e.default});if(0===r.length)throw new Error(dr("A default value must be specified in `items`."));if(1<r.length)throw new Error(dr("More than one default value is specified in `items`."));var i=r[0],c=function(t){return function(e){return e||0===e?t.setQueryParameter("hitsPerPage",e).search():t.setQueryParameter("hitsPerPage",void 0).search()}},u=function(e){var t=e.state,n=e.createURL;return function(e){return n(t.resetPage().setQueryParameter("hitsPerPage",e||0===e?e:void 0))}};return{$$type:"ais.hitsPerPage",init:function(e){var t=e.state,n=e.instantSearchInstance;o.some(function(e){return Number(t.hitsPerPage)===Number(e.value)})||(o=[{value:"",label:""}].concat(P(o))),l(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:n}),!0)},render:function(e){var t=e.instantSearchInstance;l(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return d(),t.setQueryParameter("hitsPerPage",void 0)},getRenderState:function(e,t){return W(W({},e),{},{hitsPerPage:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.state,n=e.results,r=e.createURL,i=e.helper;return{items:s(function(e){var t=e.hitsPerPage;return o.map(function(e){return W(W({},e),{},{isRefined:Number(e.value)===Number(t)})})}(t),{results:n}),refine:c(i),createURL:u({state:t,createURL:r}),hasNoResults:!n||0===n.nbHits,widgetParams:a}},getWidgetUiState:function(e,t){var n=t.searchParameters.hitsPerPage;return void 0===n||n===i.value?e:W(W({},e),{},{hitsPerPage:n})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return e.setQueryParameters({hitsPerPage:n.hitsPerPage||i.value})}}}}var lr=Fn(_n),dr=Ze({name:"hits-per-page",connector:!0}),hr=Ze({name:"infinite-hits",connector:!0});function fr(e){var t=e||{};t.page;return M(t,["page"])}function mr(i,e){var a=1<arguments.length&&void 0!==e?e:xe;return Ne(i,hr()),function(m){function p(e,t){var n=e.page,r=void 0===n?0:n,i=Object.keys(t).map(Number);return 0===i.length?r:Math.min.apply(Math,[r].concat(P(i)))}function g(e,t){var n=e.page,r=void 0===n?0:n,i=Object.keys(t).map(Number);return 0===i.length?r:Math.max.apply(Math,[r].concat(P(i)))}var v,y,b,R,e=m||{},t=e.escapeHTML,S=void 0===t||t,n=e.transformItems,w=void 0===n?function(e){return e}:n,r=e.cache,_=void 0===r?function(){var r=null,i=null;return{read:function(e){var t=e.state;return Le(i,fr(t))?r:null},write:function(e){var t=e.state,n=e.hits;i=fr(t),r=n}}}():r;return{$$type:"ais.infiniteHits",init:function(e){i(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){var t=e.instantSearchInstance,n=this.getWidgetRenderState(e);b("view",n.currentPageHits),i(W(W({},n),{},{instantSearchInstance:t}),!1)},getRenderState:function(e,t){return W(W({},e),{},{infiniteHits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,n=e.results,r=e.helper,i=e.state,a=e.instantSearchInstance,s=[],o=_.read({state:i})||{};if(n){var c=i.page,u=void 0===c?0:c;S&&0<n.hits.length&&(n.hits=Qe(n.hits));var l=rt(nt(n.hits,n.page,n.hitsPerPage),n.queryID),d=w(l,{results:n});void 0===o[u]&&(o[u]=d,_.write({state:i,hits:o})),s=d,t=0===p(i,o)}else v=function(e){return function(){e.overrideStateWithoutTriggeringChangeEvent(W(W({},e.state),{},{page:p(e.state,_.read({state:e.state})||{})-1})).searchWithoutTriggeringOnStateChange()}}(r),y=function(e){return function(){e.setPage(g(e.state,_.read({state:e.state})||{})+1).search()}}(r),b=ct({instantSearchInstance:a,index:r.getIndex(),widgetType:this.$$type}),R=ut({index:r.getIndex(),widgetType:this.$$type}),t=void 0===i.page||0===p(i,o);var h=function(n){return Object.keys(n).map(Number).sort(function(e,t){return e-t}).reduce(function(e,t){return e.concat(n[t])},[])}(o),f=!n||n.nbPages<=g(i,o)+1;return{hits:h,currentPageHits:s,sendEvent:b,bindEvent:R,results:n,showPrevious:v,showMore:y,isFirstPage:t,isLastPage:f,widgetParams:m}},dispose:function(e){var t=e.state;a();var n=t.setQueryParameter("page",void 0);return S?n.setQueryParameters(Object.keys(De).reduce(function(e,t){return W(W({},e),{},k({},t,void 0))},{})):n},getWidgetUiState:function(e,t){var n=t.searchParameters.page||0;return n?W(W({},e),{},{page:n+1}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=e;S&&(r=e.setQueryParameters(De));var i=n.page?n.page-1:0;return r.setQueryParameter("page",i)}}}}function pr(s,e){var o=1<arguments.length&&void 0!==e?e:xe;return Ne(s,yr()),function(u){var l,d,h,e=u||{},f=e.attribute,t=e.limit,c=void 0===t?10:t,n=e.showMore,m=void 0!==n&&n,r=e.showMoreLimit,p=void 0===r?20:r,i=e.sortBy,g=void 0===i?br:i,a=e.transformItems,v=void 0===a?function(e){return e}:a;if(!f)throw new Error(yr("The `attribute` option is required."));if(!0===m&&p<=c)throw new Error(yr("The `showMoreLimit` option must be greater than `limit`."));var y=!1,b=function(){};function R(){b()}function S(){return y?p:c}return{$$type:"ais.menu",init:function(e){var t=e.instantSearchInstance;s(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;s(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return o(),t.removeHierarchicalFacet(f).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return W(W({},e),{},{menu:W(W({},e.menu),{},k({},f,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.results,n=e.createURL,r=e.instantSearchInstance,i=e.helper,a=[],s=!1;if(l=l||it({instantSearchInstance:r,helper:i,attribute:f,widgetType:this.$$type}),d=d||function(e){return n(i.state.resetPage().toggleFacetRefinement(f,e))},h=h||function(e){var t=D(i.getHierarchicalFacetBreadcrumb(f),1)[0];l("click",e||t),i.toggleFacetRefinement(f,e||t).search()},e.results&&(b=function(e,t){return function(){y=!y,t.render(e)}}(e,this)),t){var o=t.getFacetValues(f,{sortBy:g,facetOrdering:g===br}),c=o&&!Array.isArray(o)&&o.data?o.data:[];s=m&&(y||c.length>S()),a=v(c.slice(0,S()).map(function(e){var t=e.name,n=e.path;return W(W({},M(e,["name","path"])),{},{label:t,value:n})}),{results:t})}return{items:a,createURL:d,refine:h,sendEvent:l,canRefine:0<a.length,widgetParams:u,isShowingMore:y,toggleShowMore:R,canToggleShowMore:s}},getWidgetUiState:function(e,t){var n=D(t.searchParameters.getHierarchicalFacetBreadcrumb(f),1)[0];return n?W(W({},e),{},{menu:W(W({},e.menu),{},k({},f,n))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.menu&&n.menu[f],i=e.removeHierarchicalFacet(f).addHierarchicalFacet({name:f,attributes:[f]}),a=i.maxValuesPerFacet||0,s=Math.max(a,m?p:c),o=i.setQueryParameter("maxValuesPerFacet",s);return r?o.addHierarchicalFacetRefinement(f,r):o.setQueryParameters({hierarchicalFacetsRefinements:W(W({},o.hierarchicalFacetsRefinements),{},k({},f,[]))})}}}}function gr(i,e){var a=1<arguments.length&&void 0!==e?e:xe;return Ne(i,Rr()),function(s){var e=s||{},t=e.attribute,u=void 0===t?"":t,n=e.items,o=void 0===n?[]:n,r=e.transformItems,c=void 0===r?function(e){return e}:r;if(""===u)throw new Error(Rr("The `attribute` option is required."));if(!o||0===o.length)throw new Error(Rr("The `items` option expects an array of objects."));var l={};return{$$type:Sr,init:function(e){var t=e.instantSearchInstance;i(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;i(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return a(),t.clearRefinements(u)},getWidgetUiState:function(e,t){var n=t.searchParameters.getNumericRefinements(u),r=n["="]&&n["="][0];if(r||0===r)return W(W({},e),{},{numericMenu:W(W({},e.numericMenu),{},k({},u,"".concat(n["="])))});var i=n[">="]&&n[">="][0]||"",a=n["<="]&&n["<="][0]||"";return""===i&&""===a?e:W(W({},e),{},{numericMenu:W(W({},e.numericMenu),{},k({},u,"".concat(i,":").concat(a)))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.numericMenu&&n.numericMenu[u],i=e.clearRefinements(u);if(!r)return i.setQueryParameters({numericRefinements:W(W({},i.numericRefinements),{},k({},u,{}))});if(-1===r.indexOf(":"))return i.addNumericRefinement(u,"=",Number(r));var a=D(r.split(":").map(parseFloat),2),s=a[0],o=a[1],c=Te(s)?i.addNumericRefinement(u,">=",s):i;return Te(o)?c.addNumericRefinement(u,"<=",o):c},getRenderState:function(e,t){return W(W({},e),{},{numericMenu:W(W({},e.numericMenu),{},k({},u,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.results,n=e.state,r=e.instantSearchInstance,i=e.helper,a=e.createURL;return l.refine||(l.refine=function(e){var t=_r(i.state,u,e);l.sendEvent("click",e),i.setState(t).search()}),l.createURL||(l.createURL=function(t){return function(e){return a(_r(t,u,e))}}),l.sendEvent||(l.sendEvent=function(e){var c=e.instantSearchInstance,u=e.helper,l=e.attribute;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1!==t.length){var r=t[0],i=t[1],a=t[2],s=void 0===a?"Filter Applied":a;if("click"===r){var o=lt(_r(u.state,l,i),l);o&&0<o.length&&c.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:Sr,eventType:r,payload:{eventName:s,index:u.getIndex(),filters:o},attribute:l})}}else c.sendEventToInsights(t[0])}}({instantSearchInstance:r,helper:i,attribute:u})),{createURL:l.createURL(n),items:c(function(i){return o.map(function(e){var t=e.start,n=e.end,r=e.label;return{label:r,value:encodeURI(JSON.stringify({start:t,end:n})),isRefined:wr(i,u,{start:t,end:n,label:r})}})}(n),{results:t}),hasNoResults:!t||0===t.nbHits,refine:l.refine,sendEvent:l.sendEvent,widgetParams:s}}}}}var vr=Fn(mr),yr=Ze({name:"menu",connector:!0}),br=["isRefined","name:asc"],Rr=Ze({name:"numeric-menu",connector:!0}),Sr="ais.numericMenu";function wr(e,t,n){var r=e.getNumericRefinements(t);return void 0!==n.start&&void 0!==n.end?n.start===n.end?Pr(r,"=",n.start):Pr(r,">=",n.start)&&Pr(r,"<=",n.end):void 0!==n.start?Pr(r,">=",n.start):void 0!==n.end?Pr(r,"<=",n.end):void 0===n.start&&void 0===n.end&&Object.keys(r).every(function(e){return 0===(r[e]||[]).length})}function _r(e,t,n){var r=e,i=JSON.parse(decodeURI(n)),a=r.getNumericRefinements(t);if(void 0===i.start&&void 0===i.end)return r.removeNumericRefinement(t);if(wr(r,t,i)||(r=r.removeNumericRefinement(t)),void 0!==i.start&&void 0!==i.end){if(i.start>i.end)throw new Error("option.start should be > to option.end");if(i.start===i.end)return r=Pr(a,"=",i.start)?r.removeNumericRefinement(t,"=",i.start):r.addNumericRefinement(t,"=",i.start)}return void 0!==i.start&&(Pr(a,">=",i.start)&&(r=r.removeNumericRefinement(t,">=",i.start)),r=r.addNumericRefinement(t,">=",i.start)),void 0!==i.end&&(Pr(a,"<=",i.end)&&(r=r.removeNumericRefinement(t,"<=",i.end)),r=r.addNumericRefinement(t,"<=",i.end)),"number"==typeof r.page&&(r.page=0),r}function Pr(e,t,n){return void 0!==e[t]&&e[t].includes(n)}function Nr(n,e){var r=1<arguments.length&&void 0!==e?e:xe;return Ne(n,Ir()),function(o){var e=o||{},c=e.totalPages,t=e.padding,u=new xr({currentPage:0,total:0,padding:void 0===t?3:t}),l={};return{$$type:"ais.pagination",init:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return r(),t.setQueryParameter("page",void 0)},getWidgetUiState:function(e,t){var n=t.searchParameters.page||0;return n?W(W({},e),{},{page:n+1}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.page?n.page-1:0;return e.setQueryParameter("page",r)},getWidgetRenderState:function(e){var t=e.results,n=e.helper,r=e.state,i=e.createURL;l.refine||(l.refine=function(e){n.setPage(e),n.search()}),l.createURL||(l.createURL=function(t){return function(e){return i(t.setPage(e))}});var a=r.page||0,s=function(e){var t=e.nbPages;return void 0!==c?Math.min(c,t):t}(t||{nbPages:0});return u.currentPage=a,u.total=s,{createURL:l.createURL(r),refine:l.refine,canRefine:1<s,currentRefinement:a,nbHits:(null==t?void 0:t.nbHits)||0,nbPages:s,pages:t?u.pages():[],isFirstPage:u.isFirstPage(),isLastPage:u.isLastPage(),widgetParams:o}},getRenderState:function(e,t){return W(W({},e),{},{pagination:this.getWidgetRenderState(t)})}}}}var xr=function(){function t(e){C(this,t),k(this,"currentPage",void 0),k(this,"total",void 0),k(this,"padding",void 0),this.currentPage=e.currentPage,this.total=e.total,this.padding=e.padding}return E(t,[{key:"pages",value:function(){var e=this.total,t=this.currentPage,n=this.padding;if(0===e)return[0];var r=this.nbPagesDisplayed(n,e);if(r===e)return Ee({end:e});var i=this.calculatePaddingLeft(t,n,e,r);return Ee({start:t-i,end:t+(r-i)})}},{key:"nbPagesDisplayed",value:function(e,t){return Math.min(2*e+1,t)}},{key:"calculatePaddingLeft",value:function(e,t,n,r){return e<=t?e:n-t<=e?r-(n-e):t}},{key:"isLastPage",value:function(){return this.currentPage===this.total-1||0===this.total}},{key:"isFirstPage",value:function(){return 0===this.currentPage}}]),t}(),Ir=Ze({name:"pagination",connector:!0}),Fr=Ze({name:"range-input",connector:!0},{name:"range-slider",connector:!0}),Tr="ais.range";function Cr(e){var t=e.min,n=e.max,r=e.precision,i=Math.pow(10,r);return{min:t?Math.floor(t*i)/i:t,max:n?Math.ceil(n*i)/i:n}}function Er(r,e){var i=1<arguments.length&&void 0!==e?e:xe;return Ne(r,Fr()),function(o){var e=o||{},t=e.attribute,w=void 0===t?"":t,_=e.min,P=e.max,n=e.precision,N=void 0===n?0:n;if(!w)throw new Error(Fr("The `attribute` option is required."));if(Te(_)&&Te(P)&&P<_)throw new Error(Fr("The `max` option can't be lower than `min`."));function f(e,t,n,r){var i,a,s=e.state,o=t.min,c=t.max,u=D(s.getNumericRefinement(w,">=")||[],1)[0],l=D(s.getNumericRefinement(w,"<=")||[],1)[0],d=void 0===n||""===n,h=void 0===r||""===r,f=Cr({min:d?void 0:parseFloat(n),max:h?void 0:parseFloat(r),precision:N}),m=f.min,p=f.max;i=Te(_)||o!==m?Te(_)&&d?_:m:void 0,a=Te(P)||c!==p?Te(P)&&h?P:p:void 0;var g=void 0===i,v=Te(o)&&o<=i,y=g||Te(i)&&(!Te(o)||v),b=void 0===a,R=Te(a)&&a<=c,S=b||Te(a)&&(!Te(c)||R);return(u!==i||l!==a)&&y&&S?(s=s.removeNumericRefinement(w),Te(i)&&(s=s.addNumericRefinement(w,">=",i)),Te(a)&&(s=s.addNumericRefinement(w,"<=",a)),s.resetPage()):null}function m(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:"Filter Applied",a=lt(e,w);a&&0<a.length&&t.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:Tr,eventType:"click",payload:{eventName:i,index:n.getIndex(),filters:a},attribute:w})}var c={from:function(e){return e.toLocaleString()},to:function(e){return function(e){return Number(Number(e).toFixed(N))}(e).toLocaleString()}};function u(i,a,s){return function(){var e=D(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[void 0,void 0],2),t=e[0],n=e[1],r=f(a,s,t,n);r&&(m(r,i,a),a.setState(r).search())}}return{$$type:Tr,init:function(e){r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return W(W({},e),{},{range:W(W({},e.range),{},k({},w,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.results,n=e.helper,r=e.instantSearchInstance,i=be(t&&t.disjunctiveFacets||[],function(e){return e.name===w}),a=function(e){return Cr({min:Te(_)?_:Te(e.min)?e.min:0,max:Te(P)?P:Te(e.max)?e.max:0,precision:N})}(i&&i.stats||{min:void 0,max:void 0}),s=function(e){var t=D(e.getNumericRefinement(w,">=")||[],1)[0],n=D(e.getNumericRefinement(w,"<=")||[],1)[0];return[Te(t)?t:-1/0,Te(n)?n:1/0]}(n);return{refine:u(r,n,t?a:{min:void 0,max:void 0}),canRefine:a.min!==a.max,format:c,range:a,sendEvent:function(l,d,h){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1!==t.length){var r=t[0],i=t[1],a=t[2];if("click"===r){var s=D(i,2),o=s[0],c=s[1],u=f(d,h,o,c);m(u,l,d,a)}}else l.sendEventToInsights(t[0])}}(r,n,a),widgetParams:W(W({},o),{},{precision:N}),start:s}},dispose:function(e){var t=e.state;return i(),t.removeDisjunctiveFacet(w).removeNumericRefinement(w)},getWidgetUiState:function(e,t){var n=t.searchParameters.getNumericRefinements(w),r=n[">="],i=void 0===r?[]:r,a=n["<="],s=void 0===a?[]:a;return 0===i.length&&0===s.length?e:W(W({},e),{},{range:W(W({},e.range),{},k({},w,"".concat(i,":").concat(s)))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=e.addDisjunctiveFacet(w).setQueryParameters({numericRefinements:W(W({},e.numericRefinements),{},k({},w,{}))});Te(_)&&(r=r.addNumericRefinement(w,">=",_)),Te(P)&&(r=r.addNumericRefinement(w,"<=",P));var i=n.range&&n.range[w];if(!i||-1===i.indexOf(":"))return r;var a=D(i.split(":").map(parseFloat),2),s=a[0],o=a[1];return Te(s)&&(!Te(_)||_<s)&&(r=(r=r.removeNumericRefinement(w,">=")).addNumericRefinement(w,">=",s)),Te(o)&&(!Te(P)||o<P)&&(r=(r=r.removeNumericRefinement(w,"<=")).addNumericRefinement(w,"<=",o)),r}}}}function kr(u,e){var l=1<arguments.length&&void 0!==e?e:xe;return Ne(u,Dr()),function(f){var e=f||{},m=e.attribute,t=e.operator,d=void 0===t?"or":t,n=e.limit,p=void 0===n?10:n,r=e.showMore,g=void 0!==r&&r,i=e.showMoreLimit,h=void 0===i?20:i,a=e.sortBy,v=void 0===a?Br:a,s=e.escapeFacetValues,o=void 0===s||s,c=e.transformItems,y=void 0===c?function(e){return e}:c;if(!m)throw new Error(Dr("The `attribute` option is required."));if(!/^(and|or)$/.test(d))throw new Error(Dr('The `operator` must one of: `"and"`, `"or"` (got "'.concat(d,'").')));if(!0===g&&h<=p)throw new Error(Dr("`showMoreLimit` should be greater than `limit`."));function b(e){var t=e.name;return W(W({},M(e,["name"])),{},{label:t,value:t,highlighted:t})}var R,S,w,_=[],P=!0,N=!1,x=function(){};function I(){x()}function F(){return N?h:p}function T(n,s){return function(a){return function(e){var r=a.instantSearchInstance,i=a.results;if(""===e&&_)u(W(W({},s.getWidgetRenderState(W(W({},a),{},{results:R}))),{},{instantSearchInstance:r}),!1);else{var t={highlightPreTag:o?De.highlightPreTag:Be.highlightPreTag,highlightPostTag:o?De.highlightPostTag:Be.highlightPostTag};n.searchForFacetValues(m,e,Math.min(F(),100),t).then(function(e){var t=o?function(e){return e.map(function(e){return W(W({},e),{},{highlighted:Ue(e.highlighted)})})}(e.facetHits):e.facetHits,n=y(t.map(function(e){var t=e.value;return W(W({},M(e,["value"])),{},{value:t,label:t})}),{results:i});u(W(W({},s.getWidgetRenderState(W(W({},a),{},{results:R}))),{},{items:n,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:r}),!1)})}}}}var C=function(){return function(){}};return{$$type:"ais.refinementList",init:function(e){u(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){u(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},getRenderState:function(e,t){return W(W({},e),{},{refinementList:W(W({},e.refinementList),{},k({},m,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.results,n=e.state,r=e.createURL,i=e.instantSearchInstance,a=e.helper,s=[],o=[];if(w&&S&&C||(w=it({instantSearchInstance:i,helper:a,attribute:m,widgetType:this.$$type}),S=function(e){w("click",e),a.toggleFacetRefinement(m,e).search()},C=T(a,this)),t){var c=t.getFacetValues(m,{sortBy:v,facetOrdering:v===Br});o=c&&Array.isArray(c)?c:[],s=y(o.slice(0,F()).map(b),{results:t});var u=n.maxValuesPerFacet,l=F();P=l<u?o.length<=l:o.length<l,R=t,_=s,e.results&&(x=function(e,t){return function(){N=!N,t.render(e)}}(e,this))}var d=C&&C(e),h=N&&_.length>p||g&&!P;return{createURL:function(e){return r(n.resetPage().toggleFacetRefinement(m,e))},items:s,refine:S,searchForItems:d,isFromSearch:!1,canRefine:0<s.length,widgetParams:f,isShowingMore:N,canToggleShowMore:h,toggleShowMore:I,sendEvent:w,hasExhaustiveItems:P}},dispose:function(e){var t=e.state;l();var n=t.setQueryParameter("maxValuesPerFacet",void 0);return"and"===d?n.removeFacet(m):n.removeDisjunctiveFacet(m)},getWidgetUiState:function(e,t){var n=t.searchParameters,r="or"===d?n.getDisjunctiveRefinements(m):n.getConjunctiveRefinements(m);return r.length?W(W({},e),{},{refinementList:W(W({},e.refinementList),{},k({},m,r))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r="or"===d,i=n.refinementList&&n.refinementList[m],a=e.clearRefinements(m),s=r?a.addDisjunctiveFacet(m):a.addFacet(m),o=s.maxValuesPerFacet||0,c=Math.max(o,g?h:p),u=s.setQueryParameter("maxValuesPerFacet",c);if(i)return i.reduce(function(e,t){return r?e.addDisjunctiveFacetRefinement(m,t):e.addFacetRefinement(m,t)},u);var l=r?"disjunctiveFacetsRefinements":"facetsRefinements";return u.setQueryParameters(k({},l,W(W({},u[l]),{},k({},m,[]))))}}}}function Lr(e,t){return t(e)}function Mr(n,e){var r=1<arguments.length&&void 0!==e?e:xe;return Ne(n,Ur()),function(i){var a,s,e=(i||{}).queryHook,o=void 0===e?Lr:e;return{$$type:"ais.searchBox",init:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return r(),t.setQueryParameter("query",void 0)},getRenderState:function(e,t){return W(W({},e),{},{searchBox:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.helper,n=e.searchMetadata,r=e.state;return a||(a=function(e){o(e,function(e){return t.setQuery(e).search()})},s=function(){t.setQuery("").search()}),{query:r.query||"",refine:a,clear:s,widgetParams:i,isSearchStalled:n.isSearchStalled}},getWidgetUiState:function(e,t){var n=t.searchParameters.query||"";return""===n||e&&e.query===n?e:W(W({},e),{},{query:n})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return e.setQueryParameter("query",n.query||"")}}}}function jr(i,e){var n=1<arguments.length&&void 0!==e?e:xe;Ne(i,qr());var c={};return function(a){var e=a||{},s=e.items,t=e.transformItems,o=void 0===t?function(e){return e}:t;if(!Array.isArray(s))throw new Error(qr("The `items` option expects an array of objects."));return{$$type:"ais.sortBy",init:function(e){var t=e.instantSearchInstance,n=this.getWidgetRenderState(e),r=n.currentRefinement;be(s,function(e){return e.value===r});i(W(W({},n),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;i(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return n(),c.initialIndex?t.setIndex(c.initialIndex):t},getRenderState:function(e,t){return W(W({},e),{},{sortBy:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,n=e.helper,r=e.state,i=e.parent;return!c.initialIndex&&i&&(c.initialIndex=i.getIndexName()),c.setIndex||(c.setIndex=function(e){n.setIndex(e).search()}),{currentRefinement:r.index,options:o(s,{results:t}),refine:c.setIndex,hasNoResults:!t||0===t.nbHits,widgetParams:a}},getWidgetUiState:function(e,t){var n=t.searchParameters.index;return W(W({},e),{},{sortBy:n!==c.initialIndex?n:void 0})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return e.setQueryParameter("index",n.sortBy||c.initialIndex||e.index)}}}}function Or(n,e){var i=1<arguments.length&&void 0!==e?e:xe;return Ne(n,Qr()),function(d){var h,e=d||{},f=e.attribute,t=e.max,m=void 0===t?5:t;if(!f)throw new Error(Qr("The `attribute` option is required."));function p(e){var t,n=e.getNumericRefinements(f);if(null!==(t=n[">="])&&void 0!==t&&t.length)return n[">="][0]}function r(e,t){var n=p(e)===Number(t),r=e.resetPage().removeNumericRefinement(f);return n?r:r.addNumericRefinement(f,"<=",m).addNumericRefinement(f,">=",Number(t))}var g=function(e){return function(e,t){h("click",t),e.setState(r(e.state,t)).search()}.bind(null,e)},v=function(e){var t=e.state,n=e.createURL;return function(e){return n(r(t,e))}};return{$$type:$r,init:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},getRenderState:function(e,t){return W(W({},e),{},{ratingMenu:W(W({},e.ratingMenu),{},k({},f,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.helper,n=e.results,r=e.state,i=e.instantSearchInstance,a=e.createURL,s=[];if(h=h||function(e){var o=e.instantSearchInstance,c=e.helper,u=e.getRefinedStar,l=e.attribute;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1!==t.length){var r=t[0],i=t[1],a=t[2],s=void 0===a?"Filter Applied":a;if("click"===r)u()===Number(i)||o.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:$r,eventType:r,payload:{eventName:s,index:c.getIndex(),filters:["".concat(l,">=").concat(i)]},attribute:l})}else o.sendEventToInsights(t[0])}}({instantSearchInstance:i,helper:t,getRefinedStar:function(){return p(t.state)},attribute:f}),n)for(var o=n.getFacetValues(f,{}),c=(o.length,function(e){var r=0;e.forEach(function(e){var t=D(e.name.split("."),2)[1],n=void 0===t?"":t;r=Math.max(r,n.length)})}(o),p(r)),u=function(n){var e=c===n,t=o.filter(function(e){return Number(e.name)>=n&&Number(e.name)<=m}).map(function(e){return e.count}).reduce(function(e,t){return e+t},0);if(c&&!e&&0===t)return"continue";var r=P(new Array(Math.floor(m/1))).map(function(e,t){return 1*t<n});s.push({stars:r,name:String(n),label:String(n),value:String(n),count:t,isRefined:e})},l=1;l<m;l+=1)u(l);return{items:s=s.reverse(),hasNoResults:!n||0===n.nbHits,canRefine:0<s.length,refine:g(t),sendEvent:h,createURL:v({state:r,createURL:a}),widgetParams:d}},dispose:function(e){var t=e.state;return i(),t.removeNumericRefinement(f)},getWidgetUiState:function(e,t){var n=t.searchParameters,r=p(n);return"number"!=typeof r?e:W(W({},e),{},{ratingMenu:W(W({},e.ratingMenu),{},k({},f,r))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.ratingMenu&&n.ratingMenu[f],i=e.clearRefinements(f).addDisjunctiveFacet(f);return r?i.addNumericRefinement(f,"<=",m).addNumericRefinement(f,">=",r):i.setQueryParameters({numericRefinements:W(W({},i.numericRefinements),{},k({},f,{}))})}}}}function Ar(n,e){var t=1<arguments.length&&void 0!==e?e:xe;return Ne(n,Vr()),function(r){return{$$type:"ais.stats",init:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(){t()},getRenderState:function(e,t){return W(W({},e),{},{stats:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,n=e.state;return t?{hitsPerPage:t.hitsPerPage,nbHits:t.nbHits,nbSortedHits:t.nbSortedHits,areHitsSorted:void 0!==t.appliedRelevancyStrictness&&0<t.appliedRelevancyStrictness&&t.nbSortedHits!==t.nbHits,nbPages:t.nbPages,page:t.page,processingTimeMS:t.processingTimeMS,query:t.query,widgetParams:r}:{hitsPerPage:n.hitsPerPage,nbHits:0,nbSortedHits:void 0,areHitsSorted:!1,nbPages:0,page:n.page||0,processingTimeMS:-1,query:n.query||"",widgetParams:r}}}}}function Hr(i,e){var a=1<arguments.length&&void 0!==e?e:xe;return Ne(i,Kr()),function(m){var e=m||{},p=e.attribute,t=e.on,n=void 0===t||t,r=e.off;if(!p)throw new Error(Kr("The `attribute` option is required."));var g,v=void 0!==r,y=Ge(n).map(Pe),b=v?Ge(r).map(Pe):void 0,R=function(n,e){var r=e.state,i=e.createURL;return function(){r=r.resetPage();var e=n?y:b;e&&e.forEach(function(e){r=r.removeDisjunctiveFacetRefinement(p,e)});var t=n?b:y;return t&&t.forEach(function(e){r=r.addDisjunctiveFacetRefinement(p,e)}),i(r)}};return{$$type:zr,init:function(e){var t=e.instantSearchInstance;i(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;i(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return a(),t.removeDisjunctiveFacet(p)},getRenderState:function(e,t){return W(W({},e),{},{toggleRefinement:W(W({},e.toggleRefinement),{},k({},p,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.state,n=e.helper,r=e.results,i=e.createURL,a=e.instantSearchInstance,s=r?y.every(function(e){return t.isDisjunctiveFacetRefined(p,e)}):y.every(function(e){return t.isDisjunctiveFacetRefined(p,e)}),o={isRefined:s,count:0},c={isRefined:v&&!s,count:0};if(r){var u=Ge(b||!1),l=r.getFacetValues(p,{})||[],d=y.map(function(t){return be(l,function(e){return e.name===Re(t)})}).filter(function(e){return void 0!==e}),h=v?u.map(function(t){return be(l,function(e){return e.name===Re(t)})}).filter(function(e){return void 0!==e}):[];o={isRefined:!!d.length&&d.every(function(e){return e.isRefined}),count:d.reduce(function(e,t){return e+t.count},0)||null},c={isRefined:!!h.length&&h.every(function(e){return e.isRefined}),count:h.reduce(function(e,t){return e+t.count},0)||l.reduce(function(e,t){return e+t.count},0)}}g=g||function(e){var o=e.instantSearchInstance,c=e.helper,u=e.attribute,l=e.on;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1!==t.length){var r=t[0],i=t[1],a=t[2],s=void 0===a?"Filter Applied":a;"click"===r&&void 0!==l&&(i||o.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:zr,eventType:r,payload:{eventName:s,index:c.getIndex(),filters:l.map(function(e){return"".concat(u,":").concat(e)})},attribute:u}))}else o.sendEventToInsights(t[0])}}({instantSearchInstance:a,attribute:p,on:y,helper:n});var f=s?c:o;return{value:{name:p,isRefined:s,count:r?f.count:null,onFacetValue:o,offFacetValue:c},createURL:R(s,{state:t,createURL:i}),sendEvent:g,canRefine:Boolean(r?f.count:null),refine:function(t){return function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefined:!1}).isRefined;e?(y.forEach(function(e){return t.removeDisjunctiveFacetRefinement(p,e)}),v&&b.forEach(function(e){return t.addDisjunctiveFacetRefinement(p,e)})):(g("click",e),v&&b.forEach(function(e){return t.removeDisjunctiveFacetRefinement(p,e)}),y.forEach(function(e){return t.addDisjunctiveFacetRefinement(p,e)})),t.search()}}(n),widgetParams:m}},getWidgetUiState:function(e,t){var n=t.searchParameters,r=y&&y.every(function(e){return n.isDisjunctiveFacetRefined(p,e)});return r?W(W({},e),{},{toggle:W(W({},e.toggle),{},k({},p,r))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=e.clearRefinements(p).addDisjunctiveFacet(p);return Boolean(n.toggle&&n.toggle[p])?(y&&y.forEach(function(e){r=r.addDisjunctiveFacetRefinement(p,e)}),r):v?(b&&b.forEach(function(e){r=r.addDisjunctiveFacetRefinement(p,e)}),r):r.setQueryParameters({disjunctiveFacetsRefinements:W(W({},e.disjunctiveFacetsRefinements),{},k({},p,[]))})}}}}function Wr(d,e){var h=1<arguments.length&&void 0!==e?e:xe;Ne(d,Jr());var f={};return function(s){var e=s||{},t=e.attributes,n=e.separator,r=void 0===n?" > ":n,i=e.rootPath,a=void 0===i?null:i,o=e.transformItems,c=void 0===o?function(e){return e}:o;if(!t||!Array.isArray(t)||0===t.length)throw new Error(Jr("The `attributes` option expects an array of strings."));var u=D(t,1)[0];function l(e,t){if(t)return e.resetPage().toggleFacetRefinement(u,t);var n=e.getHierarchicalFacetBreadcrumb(u);return 0===n.length?e:e.resetPage().toggleFacetRefinement(u,n[0])}return{$$type:"ais.breadcrumb",init:function(e){d(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(e){d(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(){h()},getRenderState:function(e,t){return W(W({},e),{},{breadcrumb:W(W({},e.breadcrumb),{},k({},u,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.helper,n=e.createURL,r=e.results,i=e.state;var a=function(){if(!r||0===i.hierarchicalFacets.length)return[];var e=D(i.hierarchicalFacets,1)[0].name,t=r.getFacetValues(e,{}),n=Array.isArray(t.data)?t.data:[];return c(function(n){return n.map(function(e,t){return{label:e.label,value:t+1===n.length?null:n[t+1].value}})}(function n(e){return e.reduce(function(e,t){return t.isRefined&&(e.push({label:t.name,value:t.path}),Array.isArray(t.data)&&(e=e.concat(n(t.data)))),e},[])}(n)),{results:r})}();return f.createURL||(f.createURL=function(e){return n(l(t.state,e))}),f.refine||(f.refine=function(e){t.setState(l(t.state,e)).search()}),{canRefine:0<a.length,createURL:f.createURL,items:a,refine:f.refine,widgetParams:s}},getWidgetSearchParameters:function(e){if(e.isHierarchicalFacet(u)){e.getHierarchicalFacetByName(u);return e}return e.addHierarchicalFacet({name:u,attributes:t,separator:r,rootPath:a})}}}}var Dr=Ze({name:"refinement-list",connector:!0}),Br=["isRefined","count:desc","name:asc"],Ur=Ze({name:"search-box",connector:!0}),qr=Ze({name:"sort-by",connector:!0}),Qr=Ze({name:"rating-menu",connector:!0}),$r="ais.ratingMenu",Vr=Ze({name:"stats",connector:!0}),Kr=Ze({name:"toggle-refinement",connector:!0}),zr="ais.toggleRefinement",Jr=Ze({name:"breadcrumb",connector:!0});var Yr=Ze({name:"geo-search",connector:!0});function Xr(e){return e.insideBoundingBox||""}function Gr(e,t){return e.setQueryParameter("insideBoundingBox",t)}function Zr(v,e){var i=1<arguments.length&&void 0!==e?e:xe;return Ne(v,Yr()),function(s){function o(e){return e.aroundLatLng?function(e){var t=e.match(et);if(!t)throw new Error('Invalid value for "aroundLatLng" parameter: "'.concat(e,'"'));return{lat:parseFloat(t[1]),lng:parseFloat(t[2])}}(e.aroundLatLng):void 0}function c(){return g.internalToggleRefineOnMapMove()}function u(e,t){return function(){g.isRefineOnMapMove=!g.isRefineOnMapMove,t(e)}}function l(){return g.isRefineOnMapMove}function d(){return g.internalSetMapMoveSinceLastRefine()}function h(t,n){return function(){var e=!0!==g.hasMapMoveSinceLastRefine;g.hasMapMoveSinceLastRefine=!0,e&&n(t)}}function f(){return g.hasMapMoveSinceLastRefine}var m,e=s||{},t=e.enableRefineOnMapMove,n=void 0===t||t,r=e.transformItems,p=void 0===r?function(e){return e}:r,g={isRefineOnMapMove:n,hasMapMoveSinceLastRefine:!1,lastRefinePosition:"",lastRefineBoundingBox:"",internalToggleRefineOnMapMove:xe,internalSetMapMoveSinceLastRefine:xe};return{$$type:ti,init:function(e){var t=e.instantSearchInstance;g.internalToggleRefineOnMapMove=u(e,xe),g.internalSetMapMoveSinceLastRefine=h(e,xe),v(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.helper,n=e.instantSearchInstance,r=t.state,i=Boolean(r.aroundLatLng)&&Boolean(g.lastRefinePosition)&&r.aroundLatLng!==g.lastRefinePosition,a=!r.insideBoundingBox&&Boolean(g.lastRefineBoundingBox)&&r.insideBoundingBox!==g.lastRefineBoundingBox;(i||a)&&(g.hasMapMoveSinceLastRefine=!1),g.lastRefinePosition=r.aroundLatLng||"",g.lastRefineBoundingBox=Xr(r),g.internalToggleRefineOnMapMove=u(e,this.render.bind(this)),g.internalSetMapMoveSinceLastRefine=h(e,this.render.bind(this));var s=this.getWidgetRenderState(e);m("view",s.items),v(W(W({},s),{},{instantSearchInstance:n}),!1)},getWidgetRenderState:function(e){var t=e.helper,n=e.results,r=e.instantSearchInstance,i=t.state,a=n?p(n.hits.filter(function(e){return e._geoloc}),{results:n}):[];return m=m||ct({instantSearchInstance:r,index:t.getIndex(),widgetType:ti}),{items:a,position:o(i),currentRefinement:function(e){return e.insideBoundingBox&&tt(e.insideBoundingBox)}(i),refine:function(i){return function(e){var t=e.northEast,n=e.southWest,r=[t.lat,t.lng,n.lat,n.lng].join();i.setState(Gr(i.state,r).resetPage()).search(),g.hasMapMoveSinceLastRefine=!1,g.lastRefineBoundingBox=r}}(t),sendEvent:m,clearMapRefinement:function(e){return function(){e.setQueryParameter("insideBoundingBox",void 0).search()}}(t),isRefinedWithMap:function(e){return function(){return Boolean(e.insideBoundingBox)}}(i),toggleRefineOnMapMove:c,isRefineOnMapMove:l,setMapMoveSinceLastRefine:d,hasMapMoveSinceLastRefine:f,widgetParams:s}},getRenderState:function(e,t){return W(W({},e),{},{geoSearch:this.getWidgetRenderState(t)})},dispose:function(e){var t=e.state;return i(),t.setQueryParameter("insideBoundingBox",void 0)},getWidgetUiState:function(e,t){var n=Xr(t.searchParameters);return!n||e&&e.geoSearch&&e.geoSearch.boundingBox===n?e:W(W({},e),{},{geoSearch:{boundingBox:n}})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return n&&n.geoSearch?Gr(e,n.geoSearch.boundingBox):e.setQueryParameter("insideBoundingBox",void 0)}}}}function ei(r,e){var i=1<arguments.length&&void 0!==e?e:xe;Ne(r,ni());var a="https://www.algolia.com/?utm_source=instantsearch.js&utm_medium=website&"+"utm_content=".concat(ft(function(e){var t;return(null===(t=e.window.location)||void 0===t?void 0:t.hostname)||""},{fallback:function(){return""}}),"&")+"utm_campaign=poweredby";return function(e){var t=(e||{}).url,n=void 0===t?a:t;return{$$type:"ais.poweredBy",init:function(e){var t=e.instantSearchInstance;r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},getRenderState:function(e,t){return W(W({},e),{},{poweredBy:this.getWidgetRenderState(t)})},getWidgetRenderState:function(){return{url:n,widgetParams:e}},dispose:function(){i()}}}}var ti="ais.geoSearch",ni=Ze({name:"powered-by",connector:!0}),ri=Ze({name:"configure",connector:!0});function ii(e,t){return e.setQueryParameters(Object.keys(t.searchParameters).reduce(function(e,t){return W(W({},e),{},k({},t,void 0))},{}))}function ai(e,t){var r=0<arguments.length&&void 0!==e?e:xe,a=1<arguments.length&&void 0!==t?t:xe;return function(i){if(!i||!Ce(i.searchParameters))throw new Error(ri("The `searchParameters` option expects an object."));var n={};return{$$type:"ais.configure",init:function(e){var t=e.instantSearchInstance;r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return a(),ii(t,i)},getRenderState:function(e,t){var n,r=this.getWidgetRenderState(t);return W(W({},e),{},{configure:W(W({},r),{},{widgetParams:W(W({},r.widgetParams),{},{searchParameters:Xe(new oe.SearchParameters(null===(n=e.configure)||void 0===n?void 0:n.widgetParams.searchParameters),new oe.SearchParameters(r.widgetParams.searchParameters)).getQueryParams()})})})},getWidgetRenderState:function(e){var t=e.helper;return n.refine||(n.refine=function(r){return function(e){var t=ii(r.state,i),n=Xe(t,new oe.SearchParameters(e));i.searchParameters=e,r.setState(n).search()}}(t)),{refine:n.refine,widgetParams:i}},getWidgetSearchParameters:function(e,t){var n=t.uiState;return Xe(e,new oe.SearchParameters(W(W({},n.configure),i.searchParameters)))},getWidgetUiState:function(e){return W(W({},e),{},{configure:W(W({},e.configure),i.searchParameters)})}}}}var si=Ze({name:"configure-related-items",connector:!0});function oi(e){var t=e.attributeName,n=e.attributeValue,r=e.attributeScore;return"".concat(t,":").concat(n,"<score=").concat(r||1,">")}function ci(c,u){return function(e){var t=e||{},a=t.hit,s=t.matchingPatterns,n=t.transformSearchParameters,r=void 0===n?function(e){return e}:n;if(!a)throw new Error(si("The `hit` option is required."));if(!s)throw new Error(si("The `matchingPatterns` option is required."));var i=Object.keys(s).reduce(function(e,t){var n=s[t],r=Fe(a,t),i=n.score;return Array.isArray(r)?[].concat(P(e),[r.map(function(e){return oi({attributeName:t,attributeValue:e,attributeScore:i})})]):"string"==typeof r?[].concat(P(e),[oi({attributeName:t,attributeValue:r,attributeScore:i})]):e},[]),o=W({},r(new oe.SearchParameters({sumOrFiltersScores:!0,facetFilters:["objectID:-".concat(a.objectID)],optionalFilters:i})));return W(W({},ai(c,u)({searchParameters:o})),{},{$$type:"ais.configureRelatedItems"})}}var ui=Ze({name:"autocomplete",connector:!0}),li=Ze({name:"query-rules",connector:!0});function di(e){var t=this.helper,n=this.initialRuleContexts,r=this.trackedFilters,i=this.transformRuleContexts,a=e.state,s=a.ruleContexts||[],o=function(e){var i=e.helper,a=e.sharedHelperState,s=e.trackedFilters;return Object.keys(s).reduce(function(e,t){var n=we(i.lastResults||{},a,!0).filter(function(e){return e.attribute===t}).map(function(e){return e.numericValue||e.name}),r=(0,s[t])(n);return[].concat(P(e),P(n.filter(function(e){return r.includes(e)}).map(function(e){return function(e){return e.replace(/[^a-z0-9-_]+/gi,"_")}("ais-".concat(t,"-").concat(e))})))},[])}({helper:t,sharedHelperState:a,trackedFilters:r}),c=i([].concat(P(n),P(o))).slice(0,10);Le(s,c)||t.overrideStateWithoutTriggeringChangeEvent(W(W({},a),{},{ruleContexts:c}))}function hi(d,e){var h=1<arguments.length&&void 0!==e?e:xe;return Ne(d,li()),function(i){var e=i||{},t=e.trackedFilters,a=void 0===t?{}:t,n=e.transformRuleContexts,s=void 0===n?function(e){return e}:n,r=e.transformItems,o=void 0===r?function(e){return e}:r;Object.keys(a).forEach(function(e){if("function"!=typeof a[e])throw new Error(li("'The \"".concat(e,'" filter value in the `trackedFilters` option expects a function.')))});var c,u=0<Object.keys(a).length,l=[];return{$$type:"ais.queryRules",init:function(e){var t=e.helper,n=e.state,r=e.instantSearchInstance;l=n.ruleContexts||[],c=di.bind({helper:t,initialRuleContexts:l,trackedFilters:a,transformRuleContexts:s}),u&&((function(e){return[e.disjunctiveFacetsRefinements,e.facetsRefinements,e.hierarchicalFacetsRefinements,e.numericRefinements].some(function(e){return Boolean(e&&0<Object.keys(e).length)})}(n)||Boolean(i.transformRuleContexts))&&c({state:n}),t.on("change",c)),d(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:r}),!0)},render:function(e){var t=e.instantSearchInstance;d(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},getWidgetRenderState:function(e){var t=e.results,n=(t||{}).userData;return{items:o(void 0===n?[]:n,{results:t}),widgetParams:i}},getRenderState:function(e,t){return W(W({},e),{},{queryRules:this.getWidgetRenderState(t)})},dispose:function(e){var t=e.helper,n=e.state;return h(),u?(t.removeListener("change",c),n.setQueryParameter("ruleContexts",l)):n}}}}function fi(e){function t(e){return{status:e,transcript:"",isSpeechFinal:!1,errorCode:void 0}}function n(e){var t=0<arguments.length&&void 0!==e?e:{};p=W(W({},p),t),f()}function r(e){n(t(0<arguments.length&&void 0!==e?e:"initial"))}function i(){n({status:"waiting"})}function a(e){n({status:"error",errorCode:e.error})}function s(e){n({status:"recognizing",transcript:e.results[0]&&e.results[0][0]&&e.results[0][0].transcript||"",isSpeechFinal:e.results[0]&&e.results[0].isFinal}),l&&p.transcript&&h(p.transcript)}function o(){p.errorCode||!p.transcript||l||h(p.transcript),"error"!==p.status&&n({status:"finished"})}function c(){u&&(u.stop(),u.removeEventListener("start",i),u.removeEventListener("error",a),u.removeEventListener("result",s),u.removeEventListener("end",o),u=void 0)}var u,l=e.searchAsYouSpeak,d=e.language,h=e.onQueryChange,f=e.onStateChange,m=window.webkitSpeechRecognition||window.SpeechRecognition,p=t("initial");return{getState:function(){return p},isBrowserSupported:function(){return Boolean(m)},isListening:function(){return"askingPermission"===p.status||"waiting"===p.status||"recognizing"===p.status},startListening:function(){(u=new m)&&(r("askingPermission"),u.interimResults=!0,d&&(u.lang=d),u.addEventListener("start",i),u.addEventListener("error",a),u.addEventListener("result",s),u.addEventListener("end",o),u.start())},stopListening:function(){c(),r("finished")},dispose:c}}function mi(p,e){var a=1<arguments.length&&void 0!==e?e:xe;return Ne(p,pi()),function(l){var e=l.searchAsYouSpeak,d=void 0!==e&&e,h=l.language,f=l.additionalQueryParameters,t=l.createVoiceSearchHelper,m=void 0===t?fi:t;return{$$type:"ais.voiceSearch",init:function(e){var t=e.instantSearchInstance;p(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;p(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},getRenderState:function(e,t){return W(W({},e),{},{voiceSearch:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=this,n=e.helper,r=e.instantSearchInstance;this._refine||(this._refine=function(e){if(e!==n.state.query){var t=h?[h.split("-")[0]]:void 0;n.setQueryParameter("queryLanguages",t),"function"==typeof f&&n.setState(n.state.setQueryParameters(W({ignorePlurals:!0,removeStopWords:!0,optionalWords:e},f({query:e})))),n.setQuery(e).search()}}),this._voiceSearchHelper||(this._voiceSearchHelper=m({searchAsYouSpeak:d,language:h,onQueryChange:function(e){return t._refine(e)},onStateChange:function(){p(W(W({},t.getWidgetRenderState(e)),{},{instantSearchInstance:r}),!1)}}));var i=this._voiceSearchHelper,a=i.isBrowserSupported,s=i.isListening,o=i.startListening,c=i.stopListening,u=i.getState;return{isBrowserSupported:a(),isListening:s(),toggleListening:function(){a()&&(s()?c():o())},voiceListeningState:u(),widgetParams:l}},dispose:function(e){var t=e.state;this._voiceSearchHelper.dispose(),a();var n=t;if("function"==typeof f){var r=f({query:""}),i=r?Object.keys(r).reduce(function(e,t){return e[t]=void 0,e},{}):{};n=t.setQueryParameters(W({queryLanguages:void 0,ignorePlurals:void 0,removeStopWords:void 0,optionalWords:void 0},i))}return n.setQueryParameter("query",void 0)},getWidgetUiState:function(e,t){var n=t.searchParameters.query||"";return n?W(W({},e),{},{query:n}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState;return e.setQueryParameter("query",n.query||"")}}}}var pi=Ze({name:"voice-search",connector:!0});function gi(b,e){var R=1<arguments.length&&void 0!==e?e:xe;return Ne(b,bi()),function(e){var t=e||{},i=t.queryLanguages,a=t.attributesForPrediction,n=t.nbHits,s=void 0===n?1:n,r=t.renderDebounceTime,o=void 0===r?100:r,c=t.searchDebounceTime,u=void 0===c?100:c,l=t.escapeHTML,d=void 0===l||l,h=t.extraParameters,f=void 0===h?{}:h;if(!i||0===i.length)throw new Error(bi("The `queryLanguages` expects an array of strings."));var m,p=function(){var n=-1,r=-1,i=void 0;return function(e){var t=++n;return Promise.resolve(e).then(function(e){return i&&t<r?i:(r=t,i=e)})}}(),g=[],v=!1,y=dt(b,o);return{$$type:"ais.answers",init:function(e){var t=e.state,n=e.instantSearchInstance.client.initIndex(t.index);if(!function(e){return"function"==typeof e.findAnswers}(n))throw new Error(bi("`algoliasearch` >= 4.8.0 required."));m=dt(n.findAnswers,u),b(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:e.instantSearchInstance}),!0)},render:function(n){var r=this,e=n.state.query;if(!e)return v=!(g=[]),void b(W(W({},this.getWidgetRenderState(n)),{},{instantSearchInstance:n.instantSearchInstance}),!1);g=[],v=!0,b(W(W({},this.getWidgetRenderState(n)),{},{instantSearchInstance:n.instantSearchInstance}),!1),p(m(e,i,W(W({},f),{},{nbHits:s,attributesForPrediction:a}))).then(function(e){if(e){d&&0<e.hits.length&&(e.hits=Qe(e.hits));var t=rt(nt(e.hits,0,s),e.queryID);g=t,v=!1,y(W(W({},r.getWidgetRenderState(n)),{},{instantSearchInstance:n.instantSearchInstance}),!1)}})},getRenderState:function(e,t){return W(W({},e),{},{answers:this.getWidgetRenderState(t)})},getWidgetRenderState:function(){return{hits:g,isLoading:v,widgetParams:e}},dispose:function(e){var t=e.state;return R(),t},getWidgetSearchParameters:function(e){return e}}}}function vi(e,t){var n=0<arguments.length&&void 0!==e?e:xe,r=1<arguments.length&&void 0!==t?t:xe;return function(a){var s={};return{$$type:"ais.relevantSort",init:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance;n(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!1)},dispose:function(e){var t=e.state;return r(),t.setQueryParameter("relevancyStrictness",void 0)},getRenderState:function(e,t){return W(W({},e),{},{relevantSort:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,n=e.helper;s.refine||(s.refine=function(e){n.setQueryParameter("relevancyStrictness",e).search()});var r=(t||{}).appliedRelevancyStrictness,i=void 0!==r;return{isRelevantSorted:void 0!==r&&0<r,isVirtualReplica:i,canRefine:i,refine:s.refine,widgetParams:a}},getWidgetSearchParameters:function(e,t){var n,r=t.uiState;return e.setQueryParameter("relevancyStrictness",null!==(n=r.relevantSort)&&void 0!==n?n:e.relevancyStrictness)},getWidgetUiState:function(e,t){var n=t.searchParameters;return W(W({},e),{},{relevantSort:n.relevancyStrictness||e.relevantSort})}}}}function yi(d,e){var s=1<arguments.length&&void 0!==e?e:xe;return Ne(d,Ri()),function(o){var e=o.widgets,t=o.maxValuesPerFacet,n=void 0===t?20:t,r=o.facets,i=void 0===r?["*"]:r,a=o.transformItems,c=void 0===a?function(e){return e}:a,u=o.fallbackWidget;if(!(e&&Array.isArray(e)&&e.every(function(e){return"object"===h(e)})))throw new Error(Ri("The `widgets` option expects an array of widgets."));if(!(Array.isArray(i)&&i.length<=1)||"*"!==i[0]&&void 0!==i[0])throw new Error(Ri('The `facets` option only accepts [] or ["*"], you passed '.concat(JSON.stringify(i))));var l=new Map;return{$$type:"ais.dynamicWidgets",init:function(n){e.forEach(function(e){var t=ht(e,n);l.set(t,{widget:e,isMounted:!1})}),d(W(W({},this.getWidgetRenderState(n)),{},{instantSearchInstance:n.instantSearchInstance}),!0)},render:function(e){var t=e.parent,a=this.getWidgetRenderState(e),s=[],o=[];u&&a.attributesToRender.forEach(function(e){if(!l.has(e)){var t=u({attribute:e});l.set(e,{widget:t,isMounted:!1})}}),l.forEach(function(e,t){var n=e.widget,r=e.isMounted,i=-1<a.attributesToRender.indexOf(t);!r&&i?(o.push(n),l.set(t,{widget:n,isMounted:!0})):r&&!i&&(s.push(n),l.set(t,{widget:n,isMounted:!1}))}),t.addWidgets(o),setTimeout(function(){return t.removeWidgets(s)},0),d(W(W({},a),{},{instantSearchInstance:e.instantSearchInstance}),!1)},dispose:function(e){var t=e.parent,n=[];l.forEach(function(e){var t=e.widget;e.isMounted&&n.push(t)}),t.removeWidgets(n),s()},getWidgetSearchParameters:function(e){return i.reduce(function(e,t){return e.addFacet(t)},e.setQueryParameters({maxValuesPerFacet:Math.max(n||0,e.maxValuesPerFacet||0)}))},getRenderState:function(e,t){return W(W({},e),{},{dynamicWidgets:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,n,r,i,a=e.results;e.state;if(!a)return{attributesToRender:[],widgetParams:o};var s=c(null!==(t=null===(n=a.renderingContent)||void 0===n?void 0:null===(r=n.facetOrdering)||void 0===r?void 0:null===(i=r.facets)||void 0===i?void 0:i.order)&&void 0!==t?t:[],{results:a});if(!Array.isArray(s))throw new Error(Ri("The `transformItems` option expects a function that returns an Array."));return{attributesToRender:s,widgetParams:o}}}}}var bi=Ze({name:"answers",connector:!0}),Ri=Ze({name:"dynamic-widgets",connector:!0}),Si=Ie(yi),wi=Object.freeze({__proto__:null,connectDynamicWidgets:yi,EXPERIMENTAL_connectDynamicWidgets:Si,connectClearRefinements:fn,connectCurrentRefinements:gn,connectHierarchicalMenu:wn,connectHits:_n,connectHitsWithInsights:lr,connectHitsPerPage:ur,connectInfiniteHits:mr,connectInfiniteHitsWithInsights:vr,connectMenu:pr,connectNumericMenu:gr,connectPagination:Nr,connectRange:Er,connectRefinementList:kr,connectSearchBox:Mr,connectSortBy:jr,connectRatingMenu:Or,connectStats:Ar,connectToggleRefinement:Hr,connectBreadcrumb:Wr,connectGeoSearch:Zr,connectPoweredBy:ei,connectConfigure:ai,EXPERIMENTAL_connectConfigureRelatedItems:ci,connectAutocomplete:function(r,e){var i=1<arguments.length&&void 0!==e?e:xe;return Ne(r,ui()),function(o){var e=(o||{}).escapeHTML,c=void 0===e||e,u={};return{$$type:"ais.autocomplete",init:function(e){var t=e.instantSearchInstance;r(W(W({},this.getWidgetRenderState(e)),{},{instantSearchInstance:t}),!0)},render:function(e){var t=e.instantSearchInstance,n=this.getWidgetRenderState(e);n.indices.forEach(function(e){(0,e.sendEvent)("view",e.hits)}),r(W(W({},n),{},{instantSearchInstance:t}),!1)},getRenderState:function(e,t){return W(W({},e),{},{autocomplete:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var n=this,t=e.helper,r=e.state,i=e.scopedResults,a=e.instantSearchInstance;u.refine||(u.refine=function(e){t.setQuery(e).search()});var s=i.map(function(e){e.results.hits=c?Qe(e.results.hits):e.results.hits;var t=ct({instantSearchInstance:a,index:e.results.index,widgetType:n.$$type});return{indexId:e.indexId,indexName:e.results.index,hits:e.results.hits,results:e.results,sendEvent:t}});return{currentRefinement:r.query||"",indices:s,refine:u.refine,widgetParams:o}},getWidgetUiState:function(e,t){var n=t.searchParameters.query||"";return""===n||e&&e.query===n?e:W(W({},e),{},{query:n})},getWidgetSearchParameters:function(e,t){var n={query:t.uiState.query||""};return c?e.setQueryParameters(W(W({},n),De)):e.setQueryParameters(n)},dispose:function(e){var t=e.state;i();var n=t.setQueryParameter("query",void 0);return c?n.setQueryParameters(Object.keys(De).reduce(function(e,t){return W(W({},e),{},k({},t,void 0))},{})):n}}}},connectQueryRules:hi,connectVoiceSearch:mi,EXPERIMENTAL_connectAnswers:gi,connectRelevantSort:vi}),_i=Ze({name:"analytics"}),Pi=me(function(e){function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"==r||"number"==r)e.push(n);else if(Array.isArray(n)&&n.length){var i=s.apply(null,n);i&&e.push(i)}else if("object"==r)for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}var o;o={}.hasOwnProperty,e.exports?(s.default=s,e.exports=s):window.classNames=s}),Ni=function(){L(t,qn);var e=O(t);function t(){return C(this,t),e.apply(this,arguments)}return E(t,[{key:"shouldComponentUpdate",value:function(e){return!Le(this.props.data,e.data)||this.props.templateKey!==e.templateKey||!Le(this.props.rootProps,e.rootProps)}},{key:"render",value:function(){var e=this.props.rootTagName,t=this.props.useCustomCompileOptions[this.props.templateKey]?this.props.templatesConfig.compileOptions:{},n=ye({templates:this.props.templates,templateKey:this.props.templateKey,compileOptions:t,helpers:this.props.templatesConfig.helpers,data:this.props.data,bindEvent:this.props.bindEvent});return null===n?null:Dn(e,f({},this.props.rootProps,{dangerouslySetInnerHTML:{__html:n}}))}}]),t}();k(Ni,"defaultProps",{data:{},rootTagName:"div",useCustomCompileOptions:{},templates:{},templatesConfig:{}});function xi(e){var r=e.items,i=e.cssClasses,a=e.templateProps,s=e.createURL,o=e.refine;return Dn("div",{className:Pi(i.root,k({},i.noRefinementRoot,0===r.length))},Dn("ul",{className:i.list},Dn("li",{className:Pi(i.item,k({},i.selectedItem,0===r.length))},Dn(Ni,f({},a,{templateKey:"home",rootTagName:"a",rootProps:{className:i.link,href:s(void 0),onClick:function(e){e.preventDefault(),o(void 0)}}}))),r.map(function(t,e){var n=e===r.length-1;return Dn("li",{key:t.label+e,className:Pi(i.item,k({},i.selectedItem,n))},Dn(Ni,f({},a,{templateKey:"separator",rootTagName:"span",rootProps:{className:i.separator,"aria-hidden":!0}})),n?t.label:Dn("a",{className:i.link,href:s(t.value),onClick:function(e){e.preventDefault(),o(t.value)}},t.label))})))}function Ii(e){var t=e.hasRefinements,n=e.refine,r=e.cssClasses,i=e.templateProps;return Dn("div",{className:r.root},Dn(Ni,f({},i,{templateKey:"resetLabel",rootTagName:"button",rootProps:{className:Pi(r.button,k({},r.disabledButton,!t)),onClick:n,disabled:!t},data:{hasRefinements:t}})))}function Fi(e){var t=e.items,n=e.cssClasses;return Dn("div",{className:n.root},Dn("ul",{className:n.list},t.map(function(t,e){return Dn("li",{key:"".concat(t.indexName,"-").concat(t.attribute,"-").concat(e),className:n.item},Dn("span",{className:n.label},function(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}(t.label),":"),t.refinements.map(function(e){return Dn("span",{key:function(e){var t=e.attribute,n=e.value;return[t,e.type,n,e.operator].map(function(e){return e}).filter(Boolean).join(":")}(e),className:n.category},Dn("span",{className:n.categoryLabel},"query"===e.attribute?Dn("q",null,e.label):e.label),Dn("button",{className:n.delete,onClick:function(t){return function(e){de(e)||(e.preventDefault(),t())}}(t.refine.bind(null,e))},"â"))}))})))}function Ti(e,t){var n=e.items,r=e.widgetParams;if(!t){var i=r,a=i.container,s=i.cssClasses;sr(Dn(Fi,{cssClasses:s,items:n}),a)}}function Ci(e){var t=e.hits,n=e.isLoading,r=e.cssClasses,i=e.templateProps;return Dn("div",{className:Pi(r.root,k({},r.emptyRoot,0===t.length))},Dn(Ni,f({},i,{templateKey:"header",rootProps:{className:r.header},data:{hits:t,isLoading:n}})),n?Dn(Ni,f({},i,{templateKey:"loader",rootProps:{className:r.loader}})):Dn("ul",{className:r.list},t.map(function(e,t){return Dn(Ni,f({},i,{templateKey:"item",rootTagName:"li",rootProps:{className:r.item},key:e.objectID,data:W(W({},e),{},{__hitIndex:t})}))})))}var Ei={home:"Home",separator:">"},ki=Ze({name:"breadcrumb"}),Li=St("Breadcrumb"),Mi={resetLabel:"Clear refinements"},ji=Ze({name:"clear-refinements"}),Oi=St("ClearRefinements"),Ai=Ze({name:"current-refinements"}),Hi=St("CurrentRefinements"),Wi={header:"",loader:"",item:function(e){return JSON.stringify(e)}},Di=Ze({name:"answers"}),Bi=St("Answers"),Ui=Ze({name:"dynamic-widgets"}),qi=St("DynamicWidgets");function Qi(e){var t=document.createElement("div");return t.className=qi({descendantName:"widget"}),e.appendChild(t),t}function $i(e){var t=e||{},n=t.container,r=t.widgets,i=t.fallbackWidget,a=M(t,["container","widgets","fallbackWidget"]);if(!n)throw new Error(Ui("The `container` option is required."));if(!(r&&Array.isArray(r)&&r.every(function(e){return"function"==typeof e})))throw new Error(Ui("The `widgets` option expects an array of callbacks."));var s=le(n),o=document.createElement("div");o.className=qi();var c=new Map,u=[],l=yi(function(e,t){var n=e.attributesToRender;t&&s.appendChild(o),n.forEach(function(e){if(c.has(e)){var t=c.get(e);o.appendChild(t)}})},function(){s.removeChild(o)})(W(W({},a),{},{widgets:u,fallbackWidget:"function"==typeof i?function(e){var t=e.attribute,n=Qi(o);return c.set(t,n),i({attribute:t,container:n})}:void 0}));return W(W({},l),{},{init:function(i){r.forEach(function(e){var t=Qi(o),n=e(t),r=ht(n,i);c.set(r,t),u.push(n)}),l.init(i)},$$widgetType:"ais.dynamicWidgets"})}function Vi(e){var t=e.className,n=e.disabled,r=void 0!==n&&n;return Dn("button",{className:t,onClick:e.onClick,disabled:r},e.children)}function Ki(e){var t=e.classNameLabel,n=e.classNameInput,r=e.checked,i=e.onToggle,a=e.children;return Dn("label",{className:t},Dn("input",{className:n,type:"checkbox",checked:r,onChange:i}),a)}function zi(e){var t=e.cssClasses,n=e.enableRefine,r=e.enableRefineControl,i=e.enableClearMapRefinement,a=e.isRefineOnMapMove,s=e.isRefinedWithMap,o=e.hasMapMoveSinceLastRefine,c=e.onRefineToggle,u=e.onRefineClick,l=e.onClearClick,d=e.templateProps;return Dn(Un,null,n&&Dn("div",null,r&&Dn("div",{className:t.control},a||!o?Dn(Ki,{classNameLabel:Pi(t.label,k({},t.selectedLabel,a)),classNameInput:t.input,checked:a,onToggle:c},Dn(Ni,f({},d,{templateKey:"toggle",rootTagName:"span"}))):Dn(Vi,{className:t.redo,disabled:!o,onClick:u},Dn(Ni,f({},d,{templateKey:"redo",rootTagName:"span"})))),!r&&!a&&Dn("div",{className:t.control},Dn(Vi,{className:Pi(t.redo,k({},t.disabledRedo,!o)),disabled:!o,onClick:u},Dn(Ni,f({},d,{templateKey:"redo",rootTagName:"span"})))),i&&s&&Dn(Vi,{className:t.reset,onClick:l},Dn(Ni,f({},d,{templateKey:"reset",rootTagName:"span"})))))}function Ji(e){var t=e.refine,n=e.mapInstance;return t({northEast:n.getBounds().getNorthEast().toJSON(),southWest:n.getBounds().getSouthWest().toJSON()})}function Yi(e,t){e.isUserInteraction=!1,t(),e.isUserInteraction=!0}function Xi(e,t){var n=e.items,r=e.position,i=e.currentRefinement,a=e.refine,s=e.clearMapRefinement,o=e.toggleRefineOnMapMove,c=e.isRefineOnMapMove,u=e.setMapMoveSinceLastRefine,l=e.hasMapMoveSinceLastRefine,d=e.isRefinedWithMap,h=e.widgetParams,f=e.instantSearchInstance,m=h.container,p=h.googleReference,g=h.cssClasses,v=h.templates,y=h.initialZoom,b=h.initialPosition,R=h.enableRefine,S=h.enableClearMapRefinement,w=h.enableRefineControl,_=h.mapOptions,P=h.createMarker,N=h.markerOptions,x=h.renderState;if(t){x.isUserInteraction=!0,x.isPendingRefine=!1,x.markers=[];var I=document.createElement("div");I.className=g.root,m.appendChild(I);var F=document.createElement("div");F.className=g.map,I.appendChild(F);var T=document.createElement("div");T.className=g.tree,I.appendChild(T),x.mapInstance=new p.maps.Map(F,W({mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1,clickableIcons:!1,zoomControlOptions:{position:p.maps.ControlPosition.LEFT_TOP}},_));return p.maps.event.addListenerOnce(x.mapInstance,"idle",function(){function e(){x.isUserInteraction&&R&&(u(),c()&&(x.isPendingRefine=!0))}x.mapInstance.addListener("center_changed",e),x.mapInstance.addListener("zoom_changed",e),x.mapInstance.addListener("dragstart",e),x.mapInstance.addListener("idle",function(){x.isUserInteraction&&x.isPendingRefine&&(x.isPendingRefine=!1,Ji({mapInstance:x.mapInstance,refine:a}))})}),void(x.templateProps=fe({templatesConfig:f.templatesConfig,templates:v}))}var C=n.map(function(e){return e.objectID}),E=D(function(e,a){return e.reduce(function(e,t){var n=D(e,2),r=n[0],i=n[1];return a.includes(t.__id)?[r.concat(t),i]:[r,i.concat(t)]},[[],[]])}(x.markers,C),2),k=E[0],L=E[1],M=k.map(function(e){return e.__id}),j=n.filter(function(e){return!M.includes(e.objectID)});L.forEach(function(e){return e.setMap(null)}),x.markers=k.concat(j.map(function(n){var r=P({map:x.mapInstance,item:n});return Object.keys(N.events).forEach(function(t){r.addListener(t,function(e){N.events[t]({map:x.mapInstance,event:e,item:n,marker:r})})}),r}));var O=!l(),A=i?0:null,H=!i&&Boolean(x.markers.length)?function(e,t){var n=t.reduce(function(e,t){return e.extend(t.getPosition())},new e.maps.LatLngBounds);return{northEast:n.getNorthEast().toJSON(),southWest:n.getSouthWest().toJSON()}}(p,x.markers):i;H&&O?Yi(x,function(){x.mapInstance.fitBounds(new p.maps.LatLngBounds(H.southWest,H.northEast),A)}):O&&Yi(x,function(){x.mapInstance.setCenter(r||b),x.mapInstance.setZoom(y)}),sr(Dn(zi,{cssClasses:g,enableRefine:R,enableRefineControl:w,enableClearMapRefinement:S,isRefineOnMapMove:c(),isRefinedWithMap:d(),hasMapMoveSinceLastRefine:l(),onRefineToggle:o,onRefineClick:function(){return Ji({mapInstance:x.mapInstance,refine:a})},onClearClick:s,templateProps:x.templateProps}),m.querySelector(".".concat(g.tree)))}var Gi={HTMLMarker:"<p>Your custom HTML Marker</p>",reset:"Clear the map refinement",toggle:"Search as I move the map",redo:"Redo search here"},Zi=Ze({name:"geo-search"}),ea=St("GeoSearch");function ta(e){var t=e.className,n=e.handleClick,r=e.facetValueToRefine,i=e.isRefined,a=e.templateProps,s=e.templateKey,o=e.templateData,c=e.subItems;return Dn("li",{className:t,onClick:function(e){n({facetValueToRefine:r,isRefined:i,originalEvent:e})}},Dn(Ni,f({},a,{templateKey:s,data:o})),c)}var na={query:"",showSubmit:!0,showReset:!0,showLoadingIndicator:!0,autofocus:!1,searchAsYouType:!0,isSearchStalled:!1,disabled:!1,onChange:xe,onSubmit:xe,onReset:xe,refine:xe},ra=function(){L(i,qn);var r=O(i);function i(){var s;C(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k(j(s=r.call.apply(r,[this].concat(t))),"state",{query:s.props.query,focused:!1}),k(j(s),"input",{current:null}),k(j(s),"onInput",function(e){var t=s.props,n=t.searchAsYouType,r=t.refine,i=t.onChange,a=e.target.value;n&&r(a),s.setState({query:a}),i(e)}),k(j(s),"onSubmit",function(e){var t=s.props,n=t.searchAsYouType,r=t.refine,i=t.onSubmit;return e.preventDefault(),e.stopPropagation(),s.input.current&&s.input.current.blur(),n||r(s.state.query),i(e),!1}),k(j(s),"onReset",function(e){var t=s.props,n=t.refine,r=t.onReset;s.input.current&&s.input.current.focus(),n(""),s.setState({query:""}),r(e)}),k(j(s),"onBlur",function(){s.setState({focused:!1})}),k(j(s),"onFocus",function(){s.setState({focused:!0})}),s}return E(i,[{key:"resetInput",value:function(){this.setState({query:""})}},{key:"componentWillReceiveProps",value:function(e){this.state.focused||e.query===this.state.query||this.setState({query:e.query})}},{key:"render",value:function(){var e=this.props,t=e.cssClasses,n=e.placeholder,r=e.autofocus,i=e.showSubmit,a=e.showReset,s=e.showLoadingIndicator,o=e.templates,c=e.isSearchStalled;return Dn("div",{className:t.root},Dn("form",{action:"",role:"search",className:t.form,noValidate:!0,onSubmit:this.onSubmit,onReset:this.onReset},Dn("input",{ref:this.input,value:this.state.query,disabled:this.props.disabled,className:t.input,type:"search",placeholder:n,autoFocus:r,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",maxLength:512,onInput:this.onInput,onBlur:this.onBlur,onFocus:this.onFocus}),Dn(Ni,{templateKey:"submit",rootTagName:"button",rootProps:{className:t.submit,type:"submit",title:"Submit the search query.",hidden:!i},templates:o,data:{cssClasses:t}}),Dn(Ni,{templateKey:"reset",rootTagName:"button",rootProps:{className:t.reset,type:"reset",title:"Clear the search query.",hidden:!(a&&this.state.query.trim()&&!c)},templates:o,data:{cssClasses:t}}),s&&Dn(Ni,{templateKey:"loadingIndicator",rootTagName:"span",rootProps:{className:t.loadingIndicator,hidden:!c},templates:o,data:{cssClasses:t}})))}}]),i}();k(ra,"defaultProps",na);function ia(e){return void 0!==e.data}var aa=function(){L(u,qn);var n=O(u);function u(e){var t;return C(this,u),k(j(t=n.call(this,e)),"searchBox",{current:null}),t.handleItemClick=t.handleItemClick.bind(j(t)),t}return E(u,[{key:"shouldComponentUpdate",value:function(e){return!Le(this.props.facetValues,e.facetValues)}},{key:"refine",value:function(e){this.props.toggleRefinement(e)}},{key:"_generateFacetItem",value:function(e){var t,n;if(ia(e)&&Array.isArray(e.data)&&0<e.data.length){var r=this.props.cssClasses,i=(r.root,M(r,["root"]));n=Dn(u,f({},this.props,{cssClasses:i,depth:this.props.depth+1,facetValues:e.data,showMore:!1,className:this.props.cssClasses.childList}))}var a=this.props.createURL(e.value),s=W(W({},e),{},{url:a,attribute:this.props.attribute,cssClasses:this.props.cssClasses,isFromSearch:this.props.isFromSearch}),o=e.value;void 0!==e.isRefined&&(o+="/".concat(e.isRefined)),void 0!==e.count&&(o+="/".concat(e.count));var c=Pi(this.props.cssClasses.item,(k(t={},this.props.cssClasses.selectedItem,e.isRefined),k(t,this.props.cssClasses.disabledItem,!e.count),k(t,this.props.cssClasses.parentItem,ia(e)&&Array.isArray(e.data)&&0<e.data.length),t));return Dn(ta,{templateKey:"item",key:o,facetValueToRefine:e.value,handleClick:this.handleItemClick,isRefined:e.isRefined,className:c,subItems:n,templateData:s,templateProps:this.props.templateProps})}},{key:"handleItemClick",value:function(e){var t=e.facetValueToRefine,n=e.isRefined,r=e.originalEvent;if(!de(r)&&r.target instanceof HTMLElement&&r.target.parentNode instanceof HTMLElement&&(!n||!r.target.parentNode.querySelector('input[type="radio"]:checked')))if("INPUT"!==r.target.tagName){for(var i=r.target;i!==r.currentTarget;){if("LABEL"===i.tagName&&(i.querySelector('input[type="checkbox"]')||i.querySelector('input[type="radio"]')))return;"A"===i.tagName&&i.href&&r.preventDefault(),i=i.parentNode}r.stopPropagation(),this.refine(t)}else this.refine(t)}},{key:"componentWillReceiveProps",value:function(e){this.searchBox.current&&!e.isFromSearch&&this.searchBox.current.resetInput()}},{key:"refineFirstValue",value:function(){var e=this.props.facetValues&&this.props.facetValues[0];if(e){var t=e.value;this.props.toggleRefinement(t)}}},{key:"render",value:function(){var t=this,e=Pi(this.props.cssClasses.showMore,k({},this.props.cssClasses.disabledShowMore,!(!0===this.props.showMore&&this.props.canToggleShowMore))),n=!0===this.props.showMore&&Dn(Ni,f({},this.props.templateProps,{templateKey:"showMoreText",rootTagName:"button",rootProps:{className:e,disabled:!this.props.canToggleShowMore,onClick:this.props.toggleShowMore},data:{isShowingMore:this.props.isShowingMore}})),r=!0!==this.props.searchIsAlwaysActive&&!(this.props.isFromSearch||!this.props.hasExhaustiveItems),i=this.props.searchFacetValues&&Dn("div",{className:this.props.cssClasses.searchBox},Dn(ra,{ref:this.searchBox,placeholder:this.props.searchPlaceholder,disabled:r,cssClasses:this.props.cssClasses.searchable,templates:this.props.searchBoxTemplateProps.templates,onChange:function(e){return t.props.searchFacetValues(e.target.value)},onReset:function(){return t.props.searchFacetValues("")},onSubmit:function(){return t.refineFirstValue()},searchAsYouType:!1})),a=this.props.facetValues&&0<this.props.facetValues.length&&Dn("ul",{className:this.props.cssClasses.list},this.props.facetValues.map(this._generateFacetItem,this)),s=this.props.searchFacetValues&&this.props.isFromSearch&&(!this.props.facetValues||0===this.props.facetValues.length)&&Dn(Ni,f({},this.props.templateProps,{templateKey:"searchableNoResults",rootProps:{className:this.props.cssClasses.noResults}}));return Dn("div",{className:Pi(this.props.cssClasses.root,k({},this.props.cssClasses.noRefinementRoot,!this.props.facetValues||0===this.props.facetValues.length),this.props.className)},this.props.children,i,a,s,n)}}]),u}();k(aa,"defaultProps",{cssClasses:{},depth:0});var sa={item:'<a class="{{cssClasses.link}}" href="{{url}}"><span class="{{cssClasses.label}}">{{label}}</span><span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span></a>',showMoreText:"\n    {{#isShowingMore}}\n      Show less\n    {{/isShowingMore}}\n    {{^isShowingMore}}\n      Show more\n    {{/isShowingMore}}\n  "},oa=Ze({name:"hierarchical-menu"}),ca=St("HierarchicalMenu"),ua={empty:"No results",item:function(e){return JSON.stringify(e,null,2)}},la=Ze({name:"hits"}),da=St("Hits"),ha=cr(function(e){var t=e.results,n=e.hits,r=e.bindEvent,i=e.cssClasses,a=e.templateProps;return 0===t.hits.length?Dn(Ni,f({},a,{templateKey:"empty",rootProps:{className:Pi(i.root,i.emptyRoot)},data:t})):Dn("div",{className:i.root},Dn("ol",{className:i.list},n.map(function(e,t){return Dn(Ni,f({},a,{templateKey:"item",rootTagName:"li",rootProps:{className:i.item},key:e.objectID,data:W(W({},e),{},{__hitIndex:t}),bindEvent:r}))})))});function fa(e){var t=e.currentValue,n=e.options,r=e.cssClasses,i=e.setValue;return Dn("select",{className:Pi(r.select),onChange:function(e){return i(e.target.value)},value:"".concat(t)},n.map(function(e){return Dn("option",{className:Pi(r.option),key:e.label+e.value,value:"".concat(e.value)},e.label)}))}var ma=Ze({name:"hits-per-page"}),pa=St("HitsPerPage"),ga={empty:"No results",showPreviousText:"Show previous results",showMoreText:"Show more results",item:function(e){return JSON.stringify(e,null,2)}},va=Ze({name:"infinite-hits"}),ya=St("InfiniteHits"),ba=cr(function(e){var t=e.results,n=e.hits,r=e.bindEvent,i=e.hasShowPrevious,a=e.showPrevious,s=e.showMore,o=e.isFirstPage,c=e.isLastPage,u=e.cssClasses,l=e.templateProps;return 0===t.hits.length?Dn(Ni,f({},l,{templateKey:"empty",rootProps:{className:Pi(u.root,u.emptyRoot)},data:t})):Dn("div",{className:u.root},i&&Dn(Ni,f({},l,{templateKey:"showPreviousText",rootTagName:"button",rootProps:{className:Pi(u.loadPrevious,k({},u.disabledLoadPrevious,o)),disabled:o,onClick:a}})),Dn("ol",{className:u.list},n.map(function(e,t){return Dn(Ni,f({},l,{templateKey:"item",rootTagName:"li",rootProps:{className:u.item},key:e.objectID,data:W(W({},e),{},{__hitIndex:t}),bindEvent:r}))})),Dn(Ni,f({},l,{templateKey:"showMoreText",rootTagName:"button",rootProps:{className:Pi(u.loadMore,k({},u.disabledLoadMore,c)),disabled:c,onClick:s}})))}),Ra={item:'<a class="{{cssClasses.link}}" href="{{url}}"><span class="{{cssClasses.label}}">{{label}}</span><span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span></a>',showMoreText:"\n    {{#isShowingMore}}\n      Show less\n    {{/isShowingMore}}\n    {{^isShowingMore}}\n      Show more\n    {{/isShowingMore}}\n  "},Sa=Ze({name:"menu"}),wa=St("Menu");function _a(e){var t=e.cssClasses,n=e.templateProps,r=e.items,i=e.refine,a=(be(r,function(e){return e.isRefined})||{value:""}).value;return Dn("div",{className:Pi(t.root,k({},t.noRefinementRoot,0===r.length))},Dn("select",{className:t.select,value:a,onChange:function(e){i(e.target.value)}},Dn(Ni,f({},n,{templateKey:"defaultOption",rootTagName:"option",rootProps:{value:"",className:t.option}})),r.map(function(e){return Dn(Ni,f({},n,{templateKey:"item",rootTagName:"option",rootProps:{value:e.value,className:t.option},key:e.value,data:e}))})))}var Pa={item:"{{label}} ({{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}})",defaultOption:"See all"},Na=Ze({name:"menu-select"}),xa=St("MenuSelect"),Ia={item:'<label class="{{cssClasses.label}}">\n  <input type="radio" class="{{cssClasses.radio}}" name="{{attribute}}"{{#isRefined}} checked{{/isRefined}} />\n  <span class="{{cssClasses.labelText}}">{{label}}</span>\n</label>'},Fa=Ze({name:"numeric-menu"}),Ta=St("NumericMenu");function Ca(n){function t(t){return function(e){de(e)||(e.preventDefault(),n.setCurrentPage(t))}}return Dn("div",{className:Pi(n.cssClasses.root,k({},n.cssClasses.noRefinementRoot,n.nbPages<=1))},Dn("ul",{className:n.cssClasses.list},n.showFirst&&Dn(Ea,{ariaLabel:"First",className:n.cssClasses.firstPageItem,isDisabled:n.isFirstPage,label:n.templates.first,pageNumber:0,createURL:n.createURL,cssClasses:n.cssClasses,createClickHandler:t}),n.showPrevious&&Dn(Ea,{ariaLabel:"Previous",className:n.cssClasses.previousPageItem,isDisabled:n.isFirstPage,label:n.templates.previous,pageNumber:n.currentPage-1,createURL:n.createURL,cssClasses:n.cssClasses,createClickHandler:t}),n.pages.map(function(e){return Dn(Ea,{key:e,ariaLabel:"".concat(e+1),className:n.cssClasses.pageItem,isSelected:e===n.currentPage,label:"".concat(e+1),pageNumber:e,createURL:n.createURL,cssClasses:n.cssClasses,createClickHandler:t})}),n.showNext&&Dn(Ea,{ariaLabel:"Next",className:n.cssClasses.nextPageItem,isDisabled:n.isLastPage,label:n.templates.next,pageNumber:n.currentPage+1,createURL:n.createURL,cssClasses:n.cssClasses,createClickHandler:t}),n.showLast&&Dn(Ea,{ariaLabel:"Last",className:n.cssClasses.lastPageItem,isDisabled:n.isLastPage,label:n.templates.last,pageNumber:n.nbPages-1,createURL:n.createURL,cssClasses:n.cssClasses,createClickHandler:t})))}function Ea(e){var t=e.label,n=e.ariaLabel,r=e.pageNumber,i=e.className,a=e.isDisabled,s=void 0!==a&&a,o=e.isSelected,c=void 0!==o&&o,u=e.cssClasses,l=e.createURL,d=e.createClickHandler;return Dn("li",{className:Pi(u.item,i,s&&u.disabledItem,c&&u.selectedItem)},s?Dn("span",{className:u.link,dangerouslySetInnerHTML:{__html:t}}):Dn("a",{className:u.link,"aria-label":n,href:l(r),onClick:d(r),dangerouslySetInnerHTML:{__html:t}}))}var ka,La,Ma,ja=St("Pagination"),Oa=Ze({name:"pagination"}),Aa={previous:"â¹",next:"âº",first:"Â«",last:"Â»"},Ha=0,Wa=[],Da=Cn.__b,Ba=Cn.__r,Ua=Cn.diffed,qa=Cn.__c,Qa=Cn.unmount;function $a(e,t){Cn.__h&&Cn.__h(La,e,Ha||t),Ha=0;var n=La.__H||(La.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Va(e){return Ha=1,function(e,t,n){var r=$a(ka++,2);return r.t=e,r.__c||(r.__=[n?n(t):Za(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=La),r.__}(Za,e)}function Ka(e){return Ha=5,function(e,t){var n=$a(ka++,7);return Ga(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}(function(){return{current:e}},[])}function za(){var t;for(Wa.sort(function(e,t){return e.__v.__b-t.__v.__b});t=Wa.pop();)if(t.__P)try{t.__H.__h.forEach(Ya),t.__H.__h.forEach(Xa),t.__H.__h=[]}catch(e){t.__H.__h=[],Cn.__e(e,t.__v)}}Cn.__b=function(e){La=null,Da&&Da(e)},Cn.__r=function(e){Ba&&Ba(e),ka=0;var t=(La=e.__c).__H;t&&(t.__h.forEach(Ya),t.__h.forEach(Xa),t.__h=[])},Cn.diffed=function(e){Ua&&Ua(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==Wa.push(t)&&Ma===Cn.requestAnimationFrame||((Ma=Cn.requestAnimationFrame)||function(e){function t(){clearTimeout(r),Ja&&cancelAnimationFrame(n),setTimeout(e)}var n,r=setTimeout(t,100);Ja&&(n=requestAnimationFrame(t))})(za)),La=null},Cn.__c=function(e,n){n.some(function(t){try{t.__h.forEach(Ya),t.__h=t.__h.filter(function(e){return!e.__||Xa(e)})}catch(e){n.some(function(e){e.__h&&(e.__h=[])}),n=[],Cn.__e(e,t.__v)}}),qa&&qa(e,n)},Cn.unmount=function(e){Qa&&Qa(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{Ya(e)}catch(e){t=e}}),t&&Cn.__e(t,n.__v))};var Ja="function"==typeof requestAnimationFrame;function Ya(e){var t=La,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),La=t}function Xa(e){var t=La;e.__c=e.__(),La=t}function Ga(n,e){return!n||n.length!==e.length||e.some(function(e,t){return e!==n[t]})}function Za(e,t){return"function"==typeof t?t(e):t}function es(t){var e,n=D(Va(t.isCollapsed),2),r=n[0],i=n[1],a=D(Va(!1),2),s=a[0],o=a[1],c=Ka(null);return function(e,t){var n=$a(ka++,3);!Cn.__s&&Ga(n.__H,t)&&(n.__=e,n.__H=t,La.__H.__h.push(n))}(function(){var e=c.current;if(e)return e.appendChild(t.bodyElement),function(){e.removeChild(t.bodyElement)}},[c,t.bodyElement]),s||t.isCollapsed===r||i(t.isCollapsed),Dn("div",{className:Pi(t.cssClasses.root,(e={},k(e,t.cssClasses.noRefinementRoot,t.hidden),k(e,t.cssClasses.collapsibleRoot,t.collapsible),k(e,t.cssClasses.collapsedRoot,r),e)),hidden:t.hidden},t.templates.header&&Dn("div",{className:t.cssClasses.header},Dn(Ni,{templates:t.templates,templateKey:"header",rootTagName:"span",data:t.data}),t.collapsible&&Dn("button",{className:t.cssClasses.collapseButton,"aria-expanded":!r,onClick:function(e){e.preventDefault(),o(!0),i(function(e){return!e})}},Dn(Ni,{templates:t.templates,templateKey:"collapseButtonText",rootTagName:"span",data:{collapsed:r}}))),Dn("div",{className:t.cssClasses.body,ref:c}),t.templates.footer&&Dn(Ni,{templates:t.templates,templateKey:"footer",rootProps:{className:t.cssClasses.footer},data:t.data}))}function ts(e){var t=e.url,n=e.theme,r=e.cssClasses;return Dn("div",{className:r.root},Dn("a",{href:t,target:"_blank",className:r.link,"aria-label":"Search by Algolia",rel:"noopener noreferrer"},Dn("svg",{height:"1.2em",className:r.logo,viewBox:"0 0 168 24",style:{width:"auto"}},Dn("path",{fill:"dark"===n?"#FFF":"#5D6494",d:"M6.97 6.68V8.3a4.47 4.47 0 00-2.42-.67 2.2 2.2 0 00-1.38.4c-.34.26-.5.6-.5 1.02 0 .43.16.77.49 1.03.33.25.83.53 1.51.83a7.04 7.04 0 011.9 1.08c.34.24.58.54.73.89.15.34.23.74.23 1.18 0 .95-.33 1.7-1 2.24a4 4 0 01-2.6.81 5.71 5.71 0 01-2.94-.68v-1.71c.84.63 1.81.94 2.92.94.58 0 1.05-.14 1.39-.4.34-.28.5-.65.5-1.13 0-.29-.1-.55-.3-.8a2.2 2.2 0 00-.65-.53 23.03 23.03 0 00-1.64-.78 13.67 13.67 0 01-1.11-.64c-.12-.1-.28-.22-.46-.4a1.72 1.72 0 01-.39-.5 4.46 4.46 0 01-.22-.6c-.07-.23-.1-.48-.1-.75 0-.91.33-1.63 1-2.17a4 4 0 012.57-.8c.97 0 1.8.18 2.47.52zm7.47 5.7v-.3a2.26 2.26 0 00-.5-1.44c-.3-.35-.74-.53-1.32-.53-.53 0-.99.2-1.37.58a2.9 2.9 0 00-.72 1.68h3.91zm1 2.79v1.4c-.6.34-1.38.51-2.36.51a4.02 4.02 0 01-3-1.13 4.04 4.04 0 01-1.11-2.97c0-1.3.34-2.32 1.02-3.06a3.38 3.38 0 012.6-1.1c1.03 0 1.85.32 2.46.96.6.64.9 1.57.9 2.78 0 .33-.03.68-.09 1.04h-5.31c.1.7.4 1.24.89 1.61.49.38 1.1.56 1.85.56.86 0 1.58-.2 2.15-.6zm6.61-1.78h-1.21c-.6 0-1.05.12-1.35.36-.3.23-.46.53-.46.89 0 .37.12.66.36.88.23.2.57.32 1.02.32.5 0 .9-.15 1.2-.43.3-.28.44-.65.44-1.1v-.92zm-4.07-2.55V9.33a4.96 4.96 0 012.5-.55c2.1 0 3.17 1.03 3.17 3.08V17H22.1v-.96c-.42.68-1.15 1.02-2.19 1.02-.76 0-1.38-.22-1.84-.66-.46-.44-.7-1-.7-1.68 0-.78.3-1.38.88-1.81.59-.43 1.4-.65 2.46-.65h1.34v-.46c0-.55-.13-.97-.4-1.25-.26-.29-.7-.43-1.32-.43-.86 0-1.65.24-2.35.72zm9.34-1.93v1.42c.39-1 1.1-1.5 2.12-1.5.15 0 .31.02.5.05v1.53c-.23-.1-.48-.14-.76-.14-.54 0-.99.24-1.34.71a2.8 2.8 0 00-.52 1.71V17h-1.57V8.91h1.57zm5 4.09a3 3 0 00.76 2.01c.47.53 1.14.8 2 .8.64 0 1.24-.18 1.8-.53v1.4c-.53.32-1.2.48-2 .48a3.98 3.98 0 01-4.17-4.18c0-1.16.38-2.15 1.14-2.98a4 4 0 013.1-1.23c.7 0 1.34.15 1.92.44v1.44a3.24 3.24 0 00-1.77-.5A2.65 2.65 0 0032.33 13zm7.92-7.28v4.58c.46-1 1.3-1.5 2.5-1.5.8 0 1.42.24 1.9.73.48.5.72 1.17.72 2.05V17H43.8v-5.1c0-.56-.14-.99-.43-1.29-.28-.3-.65-.45-1.1-.45-.54 0-1 .2-1.42.6-.4.4-.61 1.02-.61 1.85V17h-1.56V5.72h1.56zM55.2 15.74c.6 0 1.1-.25 1.5-.76.4-.5.6-1.16.6-1.95 0-.92-.2-1.62-.6-2.12-.4-.5-.92-.74-1.55-.74-.56 0-1.05.22-1.5.67-.44.45-.66 1.13-.66 2.06 0 .96.22 1.67.64 2.14.43.47.95.7 1.57.7zM53 5.72v4.42a2.74 2.74 0 012.43-1.34c1.03 0 1.86.38 2.51 1.15.65.76.97 1.78.97 3.05 0 1.13-.3 2.1-.92 2.9-.62.81-1.47 1.21-2.54 1.21s-1.9-.45-2.46-1.34V17h-1.58V5.72H53zm9.9 11.1l-3.22-7.9h1.74l1 2.62 1.26 3.42c.1-.32.48-1.46 1.15-3.42l.91-2.63h1.66l-2.92 7.87c-.78 2.07-1.96 3.1-3.56 3.1-.28 0-.53-.02-.73-.07v-1.34c.17.04.35.06.54.06 1.03 0 1.76-.57 2.17-1.7z"}),as,ss,Dn("path",{fill:"dark"===n?"#FFF":"#5468FF",d:"M120.92 18.8c-4.38.02-4.38-3.54-4.38-4.1V1.36l2.67-.42v13.25c0 .32 0 2.36 1.71 2.37v2.24zm-10.84-2.18c.82 0 1.43-.04 1.85-.12v-2.72a5.48 5.48 0 00-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.11-.44.28-.58.49a.93.93 0 00-.22.65c0 .63.22 1 .61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.62.11 2.23.33.6.22 1.09.53 1.44.92.36.4.61.92.76 1.48.16.56.23 1.17.23 1.85v6.87a21.69 21.69 0 01-4.68.5c-.69 0-1.32-.07-1.9-.2a4 4 0 01-1.46-.63 3.3 3.3 0 01-.96-1.13 4.3 4.3 0 01-.34-1.8 3.13 3.13 0 011.43-2.63c.45-.3.95-.5 1.54-.62a8.8 8.8 0 013.79.05v-.44c0-.3-.04-.6-.11-.87a1.78 1.78 0 00-1.1-1.22 3.2 3.2 0 00-1.15-.2 9.75 9.75 0 00-2.95.46l-.33-2.19a11.43 11.43 0 013.56-.53zm52.84 9.63c.82 0 1.43-.05 1.85-.13V13.7a5.42 5.42 0 00-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.12-.44.28-.58.5a.93.93 0 00-.22.65c0 .63.22.99.61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.63.11 2.23.33.6.22 1.1.53 1.45.92.35.39.6.92.76 1.48.15.56.23 1.18.23 1.85v6.88c-.41.08-1.03.19-1.87.31-.83.12-1.77.18-2.81.18-.7 0-1.33-.06-1.9-.2a4 4 0 01-1.47-.63c-.4-.3-.72-.67-.95-1.13a4.3 4.3 0 01-.34-1.8c0-.66.13-1.08.38-1.53.26-.45.61-.82 1.05-1.1.44-.3.95-.5 1.53-.62a8.8 8.8 0 013.8.05v-.43c0-.31-.04-.6-.12-.88-.07-.28-.2-.52-.38-.73a1.78 1.78 0 00-.73-.5c-.3-.1-.68-.2-1.14-.2a9.85 9.85 0 00-2.95.47l-.32-2.19a11.63 11.63 0 013.55-.53zm-8.03-1.27a1.62 1.62 0 000-3.24 1.62 1.62 0 100 3.24zm1.35 13.22h-2.7V7.27l2.7-.42V18.8zm-4.72 0c-4.38.02-4.38-3.54-4.38-4.1l-.01-13.34 2.67-.42v13.25c0 .32 0 2.36 1.72 2.37v2.24zm-8.7-5.9a4.7 4.7 0 00-.74-2.79 2.4 2.4 0 00-2.07-1 2.4 2.4 0 00-2.06 1 4.7 4.7 0 00-.74 2.8c0 1.16.25 1.94.74 2.62a2.4 2.4 0 002.07 1.02c.88 0 1.57-.34 2.07-1.02a4.2 4.2 0 00.73-2.63zm2.74 0a6.46 6.46 0 01-1.52 4.23c-.49.53-1.07.94-1.76 1.22-.68.29-1.73.45-2.26.45a6.6 6.6 0 01-2.25-.45 5.1 5.1 0 01-2.88-3.13 7.3 7.3 0 01-.01-4.84 5.13 5.13 0 012.9-3.1 5.67 5.67 0 012.22-.42c.81 0 1.56.14 2.24.42.69.29 1.28.69 1.75 1.22.49.52.87 1.15 1.14 1.89a7 7 0 01.43 2.5zm-20.14 0c0 1.11.25 2.36.74 2.88.5.52 1.13.78 1.91.78a4.07 4.07 0 002.12-.6V9.33c-.19-.04-.99-.2-1.76-.23a2.67 2.67 0 00-2.23 1 4.73 4.73 0 00-.78 2.8zm7.44 5.27c0 1.82-.46 3.16-1.4 4-.94.85-2.37 1.27-4.3 1.27-.7 0-2.17-.13-3.34-.4l.43-2.11c.98.2 2.27.26 2.95.26 1.08 0 1.84-.22 2.3-.66.46-.43.68-1.08.68-1.94v-.44a5.2 5.2 0 01-2.54.6 5.6 5.6 0 01-2.01-.36 4.2 4.2 0 01-2.58-2.71 9.88 9.88 0 01.02-5.35 4.92 4.92 0 012.93-2.96 6.6 6.6 0 012.43-.46 19.64 19.64 0 014.43.66v10.6z"}))))}function ns(e){var t=e.cssClasses,n=e.templates,r=e.items;return Dn(Ni,{templateKey:"default",templates:n,rootProps:{className:t.root},data:{items:r}})}var rs=Ze({name:"panel"}),is=St("Panel"),as=Dn("path",{fill:"#5468FF",d:"M78.99.94h16.6a2.97 2.97 0 012.96 2.96v16.6a2.97 2.97 0 01-2.97 2.96h-16.6a2.97 2.97 0 01-2.96-2.96V3.9A2.96 2.96 0 0179 .94"}),ss=Dn("path",{fill:"#FFF",d:"M89.63 5.97v-.78a.98.98 0 00-.98-.97h-2.28a.98.98 0 00-.97.97V6c0 .09.08.15.17.13a7.13 7.13 0 013.9-.02c.08.02.16-.04.16-.13m-6.25 1L83 6.6a.98.98 0 00-1.38 0l-.46.46a.97.97 0 000 1.38l.38.39c.06.06.15.04.2-.02a7.49 7.49 0 011.63-1.62c.07-.04.08-.14.02-.2m4.16 2.45v3.34c0 .1.1.17.2.12l2.97-1.54c.06-.03.08-.12.05-.18a3.7 3.7 0 00-3.08-1.87c-.07 0-.14.06-.14.13m0 8.05a4.49 4.49 0 110-8.98 4.49 4.49 0 010 8.98m0-10.85a6.37 6.37 0 100 12.74 6.37 6.37 0 000-12.74"}),os=St("PoweredBy"),cs=Ze({name:"powered-by"}),us=Ze({name:"query-rule-context"}),ls={default:function(e){var t=e.items;return JSON.stringify(t,null,2)}},ds=Ze({name:"query-rule-custom-data"}),hs=St("QueryRuleCustomData"),fs=function(){L(a,qn);var i=O(a);function a(){var r;C(this,a);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k(j(r=i.call.apply(i,[this].concat(t))),"state",{min:r.props.values.min,max:r.props.values.max}),k(j(r),"onInput",function(n){return function(e){var t=e.currentTarget.value;r.setState(k({},n,Number(t)))}}),k(j(r),"onSubmit",function(e){e.preventDefault(),r.props.refine([r.state.min,r.state.max])}),r}return E(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({min:e.values.min,max:e.values.max})}},{key:"render",value:function(){var e=this.state,t=e.min,n=e.max,r=this.props,i=r.min,a=r.max,s=r.step,o=r.cssClasses,c=r.templateProps,u=!(!i||!a)&&a<=i,l=Boolean(t||n);return Dn("div",{className:Pi(o.root,k({},o.noRefinement,!l))},Dn("form",{className:o.form,onSubmit:this.onSubmit},Dn("label",{className:o.label},Dn("input",{className:Pi(o.input,o.inputMin),type:"number",min:i,max:a,step:s,value:null!=t?t:"",onInput:this.onInput("min"),placeholder:null==i?void 0:i.toString(),disabled:u})),Dn(Ni,f({},c,{templateKey:"separatorText",rootTagName:"span",rootProps:{className:o.separator}})),Dn("label",{className:o.label},Dn("input",{className:Pi(o.input,o.inputMax),type:"number",min:i,max:a,step:s,value:null!=n?n:"",onInput:this.onInput("max"),placeholder:null==a?void 0:a.toString(),disabled:u})),Dn(Ni,f({},c,{templateKey:"submitText",rootTagName:"button",rootProps:{type:"submit",className:o.submit,disabled:u}}))))}}]),a}(),ms=Ze({name:"range-input"}),ps=St("RangeInput"),gs={separatorText:"to",submitText:"Go"},vs=40,ys=35,bs=27,Rs=36,Ss=37,ws=34,_s=33,Ps=39,Ns=38,xs=100;function Is(e,t,n){return(e-t)/(n-t)*100}function Fs(e,t,n){var r=e/100;return 0===e?t:100===e?n:Math.round((n-t)*r+t)}function Ts(e){return["rheostat","vertical"===e.orientation?"rheostat-vertical":"rheostat-horizontal"].concat(e.className.split(" ")).join(" ")}function Cs(e){return Number(e.currentTarget.getAttribute("data-handle-key"))}function Es(e){e.stopPropagation(),e.preventDefault()}var ks=Dn("div",{className:"rheostat-background"}),Ls=function(){L(r,qn);var n=O(r);function r(e){var t;return C(this,r),k(j(t=n.call(this,e)),"state",{className:Ts(t.props),handlePos:t.props.values.map(function(e){return Is(e,t.props.min,t.props.max)}),handleDimensions:0,mousePos:null,sliderBox:{},slidingIndex:null,values:t.props.values}),k(j(t),"rheostat",{current:null}),t.getPublicState=t.getPublicState.bind(j(t)),t.getSliderBoundingBox=t.getSliderBoundingBox.bind(j(t)),t.getProgressStyle=t.getProgressStyle.bind(j(t)),t.getMinValue=t.getMinValue.bind(j(t)),t.getMaxValue=t.getMaxValue.bind(j(t)),t.getHandleDimensions=t.getHandleDimensions.bind(j(t)),t.getClosestSnapPoint=t.getClosestSnapPoint.bind(j(t)),t.getSnapPosition=t.getSnapPosition.bind(j(t)),t.getNextPositionForKey=t.getNextPositionForKey.bind(j(t)),t.getNextState=t.getNextState.bind(j(t)),t.handleClick=t.handleClick.bind(j(t)),t.getClosestHandle=t.getClosestHandle.bind(j(t)),t.setStartSlide=t.setStartSlide.bind(j(t)),t.startMouseSlide=t.startMouseSlide.bind(j(t)),t.startTouchSlide=t.startTouchSlide.bind(j(t)),t.handleMouseSlide=t.handleMouseSlide.bind(j(t)),t.handleTouchSlide=t.handleTouchSlide.bind(j(t)),t.handleSlide=t.handleSlide.bind(j(t)),t.endSlide=t.endSlide.bind(j(t)),t.handleKeydown=t.handleKeydown.bind(j(t)),t.validatePosition=t.validatePosition.bind(j(t)),t.validateValues=t.validateValues.bind(j(t)),t.canMove=t.canMove.bind(j(t)),t.fireChangeEvent=t.fireChangeEvent.bind(j(t)),t.slideTo=t.slideTo.bind(j(t)),t.updateNewValues=t.updateNewValues.bind(j(t)),t}return E(r,[{key:"componentWillReceiveProps",value:function(n){var e=this.props,t=e.className,r=e.disabled,i=e.min,a=e.max,s=e.orientation,o=this.state,c=o.values,u=o.slidingIndex,l=n.min!==i||n.max!==a,d=c.length!==n.values.length||c.some(function(e,t){return n.values[t]!==e}),h=n.className!==t||n.orientation!==s,f=n.disabled&&!r;h&&this.setState({className:Ts(n)}),(l||d)&&this.updateNewValues(n),f&&null!==u&&this.endSlide()}},{key:"getPublicState",value:function(){var e=this.props,t=e.min;return{max:e.max,min:t,values:this.state.values}}},{key:"getSliderBoundingBox",value:function(){var e=this.rheostat.current,t=e.getBoundingClientRect();return{height:t.height||e.clientHeight,left:t.left,top:t.top,width:t.width||e.clientWidth}}},{key:"getProgressStyle",value:function(e){var t=this.state.handlePos,n=t[e];if(0===e)return"vertical"===this.props.orientation?{height:"".concat(n,"%"),top:0}:{left:0,width:"".concat(n,"%")};var r=t[e-1],i=n-r;return"vertical"===this.props.orientation?{height:"".concat(i,"%"),top:"".concat(r,"%")}:{left:"".concat(r,"%"),width:"".concat(i,"%")}}},{key:"getMinValue",value:function(e){return this.state.values[e-1]?Math.max(this.props.min,this.state.values[e-1]):this.props.min}},{key:"getMaxValue",value:function(e){return this.state.values[e+1]?Math.min(this.props.max,this.state.values[e+1]):this.props.max}},{key:"getHandleDimensions",value:function(e,t){var n=e.currentTarget||null;return n?"vertical"===this.props.orientation?n.clientHeight/t.height*xs/2:n.clientWidth/t.width*xs/2:0}},{key:"getClosestSnapPoint",value:function(n){return this.props.snapPoints.length?this.props.snapPoints.reduce(function(e,t){return Math.abs(e-n)<Math.abs(t-n)?e:t}):n}},{key:"getSnapPosition",value:function(e){if(!this.props.snap)return e;var t=this.props,n=t.max,r=t.min,i=Fs(e,r,n);return Is(this.getClosestSnapPoint(i),r,n)}},{key:"getNextPositionForKey",value:function(e,t){var n,r=this.state,i=r.handlePos,a=r.values,s=this.props,o=s.max,c=s.min,u=s.snapPoints,l=this.props.snap,d=a[e],h=i[e],f=h,m=1;100<=o?h=Math.round(h):m=100/(o-c);var p=null;l&&(p=u.indexOf(this.getClosestSnapPoint(a[e])));var g=(k(n={},Ss,function(e){return-1*e}),k(n,Ps,function(e){return e}),k(n,Ns,function(e){return e}),k(n,vs,function(e){return-1*e}),k(n,ws,function(e){return 1<e?-e:-10*e}),k(n,_s,function(e){return 1<e?e:10*e}),n);if(Object.prototype.hasOwnProperty.call(g,t))h+=g[t](m),l&&p&&(f<h?p<u.length-1&&(d=u[p+1]):0<p&&(d=u[p-1]));else if(t===Rs)h=0,l&&(d=u[0]);else{if(t!==ys)return null;h=xs,l&&(d=u[u.length-1])}return l?Is(d,c,o):h}},{key:"getNextState",value:function(n,e){var t=this.state.handlePos,r=this.props,i=r.max,a=r.min,s=this.validatePosition(n,e),o=t.map(function(e,t){return t===n?s:e});return{handlePos:o,values:o.map(function(e){return Fs(e,a,i)})}}},{key:"getClosestHandle",value:function(r){var i=this.state.handlePos;return i.reduce(function(e,t,n){return Math.abs(i[n]-r)<Math.abs(i[e]-r)?n:e},0)}},{key:"setStartSlide",value:function(e,t,n){var r=this.getSliderBoundingBox();this.setState({handleDimensions:this.getHandleDimensions(e,r),mousePos:{x:t,y:n},sliderBox:r,slidingIndex:Cs(e)})}},{key:"startMouseSlide",value:function(e){this.setStartSlide(e,e.clientX,e.clientY),document.addEventListener("mousemove",this.handleMouseSlide,!1),document.addEventListener("mouseup",this.endSlide,!1),Es(e)}},{key:"startTouchSlide",value:function(e){if(!(1<e.changedTouches.length)){var t=e.changedTouches[0];this.setStartSlide(e,t.clientX,t.clientY),document.addEventListener("touchmove",this.handleTouchSlide,!1),document.addEventListener("touchend",this.endSlide,!1),this.props.onSliderDragStart&&this.props.onSliderDragStart(),Es(e)}}},{key:"handleMouseSlide",value:function(e){null!==this.state.slidingIndex&&(this.handleSlide(e.clientX,e.clientY),Es(e))}},{key:"handleTouchSlide",value:function(e){if(null!==this.state.slidingIndex)if(1<e.changedTouches.length)this.endSlide();else{var t=e.changedTouches[0];this.handleSlide(t.clientX,t.clientY),Es(e)}}},{key:"handleSlide",value:function(e,t){var n=this.state,r=n.slidingIndex,i=n.sliderBox,a="vertical"===this.props.orientation?(t-i.top)/i.height*xs:(e-i.left)/i.width*xs;this.slideTo(r,a),this.canMove(r,a)&&(this.setState({mousePos:{x:e,y:t}}),this.props.onSliderDragMove&&this.props.onSliderDragMove())}},{key:"endSlide",value:function(){var e=this,t=this.state.slidingIndex;if(this.setState({slidingIndex:null}),document.removeEventListener("mouseup",this.endSlide,!1),document.removeEventListener("touchend",this.endSlide,!1),document.removeEventListener("touchmove",this.handleTouchSlide,!1),document.removeEventListener("mousemove",this.handleMouseSlide,!1),this.props.onSliderDragEnd&&this.props.onSliderDragEnd(),this.props.snap){var n=this.getSnapPosition(this.state.handlePos[t]);this.slideTo(t,n,function(){return e.fireChangeEvent()})}else this.fireChangeEvent()}},{key:"handleClick",value:function(e){var t=this;if(!e.target.getAttribute("data-handle-key")){var n=this.getSliderBoundingBox(),r=("vertical"===this.props.orientation?(e.clientY-n.top)/n.height:(e.clientX-n.left)/n.width)*xs,i=this.getClosestHandle(r),a=this.getSnapPosition(r);this.slideTo(i,a,function(){return t.fireChangeEvent()}),this.props.onClick&&this.props.onClick()}}},{key:"handleKeydown",value:function(e){var t=this,n=Cs(e);if(e.keyCode!==bs){var r=this.getNextPositionForKey(n,e.keyCode);null!==r&&(this.canMove(n,r)&&(this.slideTo(n,r,function(){return t.fireChangeEvent()}),this.props.onKeyPress&&this.props.onKeyPress()),Es(e))}else e.currentTarget.blur()}},{key:"validatePosition",value:function(e,t){var n=this.state,r=n.handlePos,i=n.handleDimensions;return Math.max(Math.min(t,void 0!==r[e+1]?r[e+1]-i:xs),void 0!==r[e-1]?r[e-1]+i:0)}},{key:"validateValues",value:function(e,t){var n=t||this.props,i=n.max,a=n.min;return e.map(function(e,t,n){var r=Math.max(Math.min(e,i),a);return n.length&&r<n[t-1]?n[t-1]:r})}},{key:"canMove",value:function(e,t){var n=this.state,r=n.handlePos,i=n.handleDimensions;return!(t<0)&&(!(xs<t)&&(!((void 0!==r[e+1]?r[e+1]-i:1/0)<t)&&!(t<(void 0!==r[e-1]?r[e-1]+i:-1/0))))}},{key:"fireChangeEvent",value:function(){var e=this.props.onChange;e&&e(this.getPublicState())}},{key:"slideTo",value:function(e,t,n){var r=this,i=this.getNextState(e,t);this.setState(i,function(){var e=r.props.onValuesUpdated;e&&e(r.getPublicState()),n&&n()})}},{key:"updateNewValues",value:function(e){var t=this;if(null===this.state.slidingIndex){var n=e.max,r=e.min,i=e.values,a=this.validateValues(i,e);this.setState({handlePos:a.map(function(e){return Is(e,r,n)}),values:a},function(){return t.fireChangeEvent()})}}},{key:"render",value:function(){var r=this,e=this.props,t=e.children,i=e.disabled,a=e.handle,s=e.max,o=e.min,c=e.orientation,u=e.pitComponent,n=e.pitPoints,l=e.progressBar,d=this.state,h=d.className,f=d.handlePos,m=d.values;return Dn("div",{className:h,ref:this.rheostat,onClick:i?void 0:this.handleClick,style:{position:"relative"}},ks,f.map(function(e,t){var n="vertical"===c?{top:"".concat(e,"%"),position:"absolute"}:{left:"".concat(e,"%"),position:"absolute"};return Dn(a,{"aria-valuemax":r.getMaxValue(t),"aria-valuemin":r.getMinValue(t),"aria-valuenow":m[t],"aria-disabled":i,"data-handle-key":t,className:"rheostat-handle",key:"handle-".concat(t),onClick:Es,onKeyDown:i?void 0:r.handleKeydown,onMouseDown:i?void 0:r.startMouseSlide,onTouchStart:i?void 0:r.startTouchSlide,role:"slider",style:n,tabIndex:0})}),f.map(function(e,t,n){return 0===t&&1<n.length?null:Dn(l,{className:"rheostat-progress",key:"progress-bar-".concat(t),style:r.getProgressStyle(t)})}),u&&n.map(function(e){var t=Is(e,o,s),n="vertical"===c?{top:"".concat(t,"%"),position:"absolute"}:{left:"".concat(t,"%"),position:"absolute"};return Dn(u,{key:"pit-".concat(e),style:n},e)}),t)}}]),r}();k(Ls,"defaultProps",{className:"",children:null,disabled:!1,handle:function(e){return Dn("button",f({},e,{type:"button"}))},max:xs,min:0,onClick:null,onChange:null,onKeyPress:null,onSliderDragEnd:null,onSliderDragMove:null,onSliderDragStart:null,onValuesUpdated:null,orientation:"horizontal",pitComponent:null,pitPoints:[],progressBar:"div",snap:!1,snapPoints:[],values:[0]});function Ms(e){var t=e.style,n=e.children,r=Math.round(parseFloat(t.left)),i=[0,50,100].includes(r),a=n,s=Math.round(100*parseInt(a,10))/100;return Dn("div",{style:W(W({},t),{},{marginLeft:100===r?"-2px":0}),className:Pi("rheostat-marker","rheostat-marker-horizontal",{"rheostat-marker-large":i})},i&&Dn("div",{className:"rheostat-value"},s))}function js(e){var t=e.cssClasses,n=e.templates,r=e.isRelevantSorted,i=e.isVirtualReplica,a=e.refine;return i?Dn("div",{className:t.root},Dn(Ni,{templateKey:"text",templates:n,rootProps:{className:t.text},data:{isRelevantSorted:r}}),Dn("button",{type:"button",className:t.button,onClick:function(){a(r?0:void 0)}},Dn(Ni,{rootTagName:"span",templateKey:"button",templates:n,data:{isRelevantSorted:r}}))):null}function Os(e){var t=e.nbHits,n=e.nbSortedHits,r=e.cssClasses,i=e.templateProps,a=M(e,["nbHits","nbSortedHits","cssClasses","templateProps"]);return Dn("div",{className:Pi(r.root)},Dn(Ni,f({},i,{templateKey:"text",rootTagName:"span",rootProps:{className:r.text},data:W({hasManySortedResults:n&&1<n,hasNoSortedResults:0===n,hasOneSortedResults:1===n,hasManyResults:1<t,hasNoResults:0===t,hasOneResult:1===t,nbHits:t,nbSortedHits:n,cssClasses:r},a)})))}function As(e){var t=e.currentRefinement,n=e.refine,r=e.cssClasses,i=e.templateProps;return Dn("div",{className:r.root},Dn("label",{className:r.label},Dn("input",{className:r.checkbox,type:"checkbox",checked:t.isRefined,onChange:function(e){return n({isRefined:!e.target.checked})}}),Dn(Ni,f({},i,{rootTagName:"span",rootProps:{className:r.labelText},templateKey:"labelText",data:t}))))}function Hs(e){var t=e.cssClasses,n=e.isBrowserSupported,r=e.isListening,i=e.toggleListening,a=e.voiceListeningState,s=e.templates,o=a.status,c=a.transcript,u=a.isSpeechFinal,l=a.errorCode;return Dn("div",{className:t.root},Dn(Ni,{templateKey:"buttonText",rootTagName:"button",rootProps:{className:t.button,type:"button",title:"Search by voice".concat(n?"":" (not supported on this browser)"),onClick:function(e){e.currentTarget instanceof HTMLElement&&e.currentTarget.blur(),i()},disabled:!n},data:{status:o,errorCode:l,isListening:r,transcript:c,isSpeechFinal:u,isBrowserSupported:n},templates:s}),Dn(Ni,{templateKey:"status",rootProps:{className:t.status},data:{status:o,errorCode:l,isListening:r,transcript:c,isSpeechFinal:u,isBrowserSupported:n},templates:s}))}var Ws=function(){L(a,qn);var i=O(a);function a(){var n;C(this,a);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k(j(n=i.call.apply(i,[this].concat(t))),"handleChange",function(e){var t=e.values;n.isDisabled||n.props.refine(t)}),k(j(n),"createHandleComponent",function(r){return function(e){var t=Math.round(100*parseFloat(e["aria-valuenow"]))/100,n="object"===h(r)&&r.format?r.format(t):t;return Dn("div",f({},e,{className:Pi(e.className,{"rheostat-handle-lower":0===e["data-handle-key"],"rheostat-handle-upper":1===e["data-handle-key"]})}),r&&Dn("div",{className:"rheostat-tooltip"},n))}}),n}return E(a,[{key:"isDisabled",get:function(){return this.props.min>=this.props.max}},{key:"computeDefaultPitPoints",value:function(e){var t=e.min,n=e.max,r=(n-t)/34;return[t].concat(P(Ee({end:33}).map(function(e){return t+r*(e+1)})),[n])}},{key:"computeSnapPoints",value:function(e){var t=e.min,n=e.max,r=e.step;if(r)return[].concat(P(Ee({start:t,end:n,step:r})),[n])}},{key:"render",value:function(){var e=this.props,t=e.tooltips,n=e.step,r=e.pips,i=e.values,a=e.cssClasses,s=this.isDisabled?{min:this.props.min,max:this.props.max+.001}:this.props,o=s.min,c=s.max,u=this.computeSnapPoints({min:o,max:c,step:n}),l=!1===r?[]:this.computeDefaultPitPoints({min:o,max:c});return Dn("div",{className:Pi(a.root,k({},a.disabledRoot,this.isDisabled))},Dn(Ls,{handle:this.createHandleComponent(t),onChange:this.handleChange,min:o,max:c,pitComponent:Ms,pitPoints:l,snap:!0,snapPoints:u,values:this.isDisabled?[o,c]:i,disabled:this.isDisabled}))}}]),a}(),Ds=Ze({name:"range-slider"}),Bs=St("RangeSlider"),Us={item:'{{#count}}<a class="{{cssClasses.link}}" aria-label="{{value}} & up" href="{{url}}">{{/count}}{{^count}}<div class="{{cssClasses.link}}" aria-label="{{value}} & up" disabled>{{/count}}\n  {{#stars}}<svg class="{{cssClasses.starIcon}} {{#.}}{{cssClasses.fullStarIcon}}{{/.}}{{^.}}{{cssClasses.emptyStarIcon}}{{/.}}" aria-hidden="true" width="24" height="24">\n    {{#.}}<use xlink:href="#ais-RatingMenu-starSymbol"></use>{{/.}}{{^.}}<use xlink:href="#ais-RatingMenu-starEmptySymbol"></use>{{/.}}\n  </svg>{{/stars}}\n  <span class="{{cssClasses.label}}">& Up</span>\n  {{#count}}<span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span>{{/count}}\n{{#count}}</a>{{/count}}{{^count}}</div>{{/count}}'},qs=Ze({name:"rating-menu"}),Qs=St("RatingMenu"),$s=Dn("path",{d:"M12 .288l2.833 8.718h9.167l-7.417 5.389 2.833 8.718-7.416-5.388-7.417 5.388 2.833-8.718-7.416-5.389h9.167z"}),Vs=Dn("path",{d:"M12 6.76l1.379 4.246h4.465l-3.612 2.625 1.379 4.246-3.611-2.625-3.612 2.625 1.379-4.246-3.612-2.625h4.465l1.38-4.246zm0-6.472l-2.833 8.718h-9.167l7.416 5.389-2.833 8.718 7.417-5.388 7.416 5.388-2.833-8.718 7.417-5.389h-9.167l-2.833-8.718z"}),Ks={reset:'\n<svg class="{{cssClasses.resetIcon}}" viewBox="0 0 20 20" width="10" height="10">\n  <path d="M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"></path>\n</svg>\n  ',submit:'\n<svg class="{{cssClasses.submitIcon}}" width="10" height="10" viewBox="0 0 40 40">\n  <path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path>\n</svg>\n  ',loadingIndicator:'\n<svg class="{{cssClasses.loadingIcon}}" width="16" height="16" viewBox="0 0 38 38" stroke="#444">\n  <g fill="none" fillRule="evenodd">\n    <g transform="translate(1 1)" strokeWidth="2">\n      <circle strokeOpacity=".5" cx="18" cy="18" r="18" />\n      <path d="M36 18c0-9.94-8.06-18-18-18">\n        <animateTransform\n          attributeName="transform"\n          type="rotate"\n          from="0 18 18"\n          to="360 18 18"\n          dur="1s"\n          repeatCount="indefinite"\n        />\n      </path>\n    </g>\n  </g>\n</svg>\n  '},zs={item:'<label class="{{cssClasses.label}}">\n  <input type="checkbox"\n         class="{{cssClasses.checkbox}}"\n         value="{{value}}"\n         {{#isRefined}}checked{{/isRefined}} />\n  <span class="{{cssClasses.labelText}}">{{#isFromSearch}}{{{highlighted}}}{{/isFromSearch}}{{^isFromSearch}}{{highlighted}}{{/isFromSearch}}</span>\n  <span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span>\n</label>',showMoreText:"\n    {{#isShowingMore}}\n      Show less\n    {{/isShowingMore}}\n    {{^isShowingMore}}\n      Show more\n    {{/isShowingMore}}\n    ",searchableNoResults:"No results"},Js=Ze({name:"refinement-list"}),Ys=St("RefinementList"),Xs=St("SearchBox"),Gs={text:"",button:function(e){return e.isRelevantSorted?"See all results":"See relevant results"}},Zs=Ze({name:"relevant-sort"}),eo=St("RelevantSort"),to=Ze({name:"search-box"}),no=St("SearchBox"),ro=Ze({name:"sort-by"}),io=St("SortBy"),ao=Ze({name:"stats"}),so=St("Stats"),oo={text:"\n    {{#areHitsSorted}}\n      {{#hasNoSortedResults}}No relevant results{{/hasNoSortedResults}}\n      {{#hasOneSortedResults}}1 relevant result{{/hasOneSortedResults}}\n      {{#hasManySortedResults}}{{#helpers.formatNumber}}{{nbSortedHits}}{{/helpers.formatNumber}} relevant results{{/hasManySortedResults}}\n      sorted out of {{#helpers.formatNumber}}{{nbHits}}{{/helpers.formatNumber}}\n    {{/areHitsSorted}}\n    {{^areHitsSorted}}\n      {{#hasNoResults}}No results{{/hasNoResults}}\n      {{#hasOneResult}}1 result{{/hasOneResult}}\n      {{#hasManyResults}}{{#helpers.formatNumber}}{{nbHits}}{{/helpers.formatNumber}} results{{/hasManyResults}}\n    {{/areHitsSorted}}\n    found in {{processingTimeMS}}ms"},co={labelText:"{{name}}"},uo=Ze({name:"toggle-refinement"}),lo=St("ToggleRefinement"),ho={buttonText:function(e){var t=e.status,n=e.errorCode,r=e.isListening;return'<svg\n       width="16"\n       height="16"\n       viewBox="0 0 24 24"\n       fill="none"\n       stroke="currentColor"\n       stroke-width="2"\n       stroke-linecap="round"\n       stroke-linejoin="round"\n     >\n       '.concat(function(e,t,n){return"error"===e&&"not-allowed"===t?'<line x1="1" y1="1" x2="23" y2="23"></line>\n            <path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path>\n            <path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path>\n            <line x1="12" y1="19" x2="12" y2="23"></line>\n            <line x1="8" y1="23" x2="16" y2="23"></line>':'<path\n            d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"\n            fill="'.concat(n?"currentColor":"none",'">\n          </path>\n          <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>\n          <line x1="12" y1="19" x2="12" y2="23"></line>\n          <line x1="8" y1="23" x2="16" y2="23"></line>')}(t,n,r),"\n     </svg>")},status:"<p>{{transcript}}</p>"},fo=Ze({name:"voice-search"}),mo=St("VoiceSearch"),po=Ie($i),go=Object.freeze({__proto__:null,dynamicWidgets:$i,EXPERIMENTAL_dynamicWidgets:po,analytics:function(e){var t=e||{},s=t.pushFunction,n=t.delay,r=void 0===n?3e3:n,i=t.triggerOnUIInteraction,a=void 0!==i&&i,o=t.pushInitialSearch,c=void 0===o||o,u=t.pushPagination,l=void 0!==u&&u;if(!s)throw new Error(_i("The `pushFunction` option is required."));function d(e){if(null!==e){var t=[],n=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n].join("+");t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(n),"_").concat(encodeURIComponent(r)))}return t.join("&")}(W(W(W({},e.state.disjunctiveFacetsRefinements),e.state.facetsRefinements),e.state.hierarchicalFacetsRefinements)),r=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(r.hasOwnProperty(">=")&&r.hasOwnProperty("<="))r[">="]&&r[">="][0]===r["<="]&&r["<="][0]?t.push("".concat(n,"=").concat(n,"_").concat(r[">="])):t.push("".concat(n,"=").concat(n,"_").concat(r[">="],"to").concat(r["<="]));else if(r.hasOwnProperty(">="))t.push("".concat(n,"=").concat(n,"_from").concat(r[">="]));else if(r.hasOwnProperty("<="))t.push("".concat(n,"=").concat(n,"_to").concat(r["<="]));else if(r.hasOwnProperty("=")){var i=[];for(var a in r["="])r["="].hasOwnProperty(a)&&i.push(r["="][a]);t.push("".concat(n,"=").concat(n,"_").concat(i.join("-")))}}return t.join("&")}(e.state.numericRefinements);""!==n&&t.push(n),""!==r&&t.push(r);var i=t.join("&"),a="Query: ".concat(e.state.query||"",", ").concat(i);!0===l&&(a+=", Page: ".concat(e.state.page||0)),m!==a&&(s(i,e.state,e.results),m=a)}}var h,f=null,m="",p=!0;!0===c&&(p=!1);function g(){d(f)}function v(){d(f)}return{$$type:"ais.analytics",$$widgetType:"ais.analytics",init:function(){!0===a&&(document.addEventListener("click",g),window.addEventListener("beforeunload",v))},render:function(e){var t=e.results,n=e.state;!0!==p?(f={results:t,state:n},h&&clearTimeout(h),h=window.setTimeout(function(){return d(f)},r)):p=!1},dispose:function(){!0===a&&(document.removeEventListener("click",g),window.removeEventListener("beforeunload",v))},getRenderState:function(e,t){return W(W({},e),{},{analytics:this.getWidgetRenderState(t)})},getWidgetRenderState:function(){return{widgetParams:e}}}},breadcrumb:function(e){var t=e||{},n=t.container,r=t.attributes,i=t.separator,a=t.rootPath,s=t.transformItems,o=t.templates,c=void 0===o?{}:o,u=t.cssClasses,l=void 0===u?{}:u;if(!n)throw new Error(ki("The `container` option is required."));var d=le(n),h={root:Pi(Li(),l.root),noRefinementRoot:Pi(Li({modifierName:"noRefinement"}),l.noRefinementRoot),list:Pi(Li({descendantName:"list"}),l.list),item:Pi(Li({descendantName:"item"}),l.item),selectedItem:Pi(Li({descendantName:"item",modifierName:"selected"}),l.selectedItem),separator:Pi(Li({descendantName:"separator"}),l.separator),link:Pi(Li({descendantName:"link"}),l.link)},f=function(e){var o=e.containerNode,c=e.cssClasses,u=e.renderState,l=e.templates;return function(e,t){var n=e.canRefine,r=e.createURL,i=e.instantSearchInstance,a=e.items,s=e.refine;t?u.templateProps=fe({defaultTemplates:Ei,templatesConfig:i.templatesConfig,templates:l}):sr(Dn(xi,{canRefine:n,cssClasses:c,createURL:r,items:a,refine:s,templateProps:u.templateProps}),o)}}({containerNode:d,cssClasses:h,renderState:{},templates:c});return W(W({},Wr(f,function(){return sr(null,d)})({attributes:r,separator:i,rootPath:a,transformItems:s})),{},{$$widgetType:"ais.breadcrumb"})},clearRefinements:function(e){var t=e||{},n=t.container,r=t.templates,i=void 0===r?{}:r,a=t.includedAttributes,s=t.excludedAttributes,o=t.transformItems,c=t.cssClasses,u=void 0===c?{}:c;if(!n)throw new Error(ji("The `container` option is required."));var l=le(n),d={root:Pi(Oi(),u.root),button:Pi(Oi({descendantName:"button"}),u.button),disabledButton:Pi(Oi({descendantName:"button",modifierName:"disabled"}),u.disabledButton)},h=function(e){var a=e.containerNode,s=e.cssClasses,o=e.renderState,c=e.templates;return function(e,t){var n=e.refine,r=e.hasRefinements,i=e.instantSearchInstance;t?o.templateProps=fe({defaultTemplates:Mi,templatesConfig:i.templatesConfig,templates:c}):sr(Dn(Ii,{refine:n,cssClasses:s,hasRefinements:r,templateProps:o.templateProps}),a)}}({containerNode:l,cssClasses:d,renderState:{},templates:i});return W(W({},fn(h,function(){return sr(null,l)})({includedAttributes:a,excludedAttributes:s,transformItems:o})),{},{$$widgetType:"ais.clearRefinements"})},configure:function(e){return W(W({},ai(xe)({searchParameters:e})),{},{$$widgetType:"ais.configure"})},currentRefinements:function(e){var t=e||{},n=t.container,r=t.includedAttributes,i=t.excludedAttributes,a=t.cssClasses,s=void 0===a?{}:a,o=t.transformItems;if(!n)throw new Error(Ai("The `container` option is required."));var c=le(n),u={root:Pi(Hi(),s.root),list:Pi(Hi({descendantName:"list"}),s.list),item:Pi(Hi({descendantName:"item"}),s.item),label:Pi(Hi({descendantName:"label"}),s.label),category:Pi(Hi({descendantName:"category"}),s.category),categoryLabel:Pi(Hi({descendantName:"categoryLabel"}),s.categoryLabel),delete:Pi(Hi({descendantName:"delete"}),s.delete)};return W(W({},gn(Ti,function(){return sr(null,c)})({container:c,cssClasses:u,includedAttributes:r,excludedAttributes:i,transformItems:o})),{},{$$widgetType:"ais.currentRefinements"})},EXPERIMENTAL_answers:function(e){var t=e||{},n=t.container,r=t.attributesForPrediction,i=t.queryLanguages,a=t.nbHits,s=t.searchDebounceTime,o=t.renderDebounceTime,c=t.escapeHTML,u=t.extraParameters,l=t.templates,d=void 0===l?{}:l,h=t.cssClasses,f=void 0===h?{}:h;if(!n)throw new Error(Di("The `container` option is required."));var m=le(n),p={root:Pi(Bi(),f.root),emptyRoot:Pi(Bi({modifierName:"empty"}),f.emptyRoot),header:Pi(Bi({descendantName:"header"}),f.header),loader:Pi(Bi({descendantName:"loader"}),f.loader),list:Pi(Bi({descendantName:"list"}),f.list),item:Pi(Bi({descendantName:"item"}),f.item)},g=function(e){var a=e.containerNode,s=e.cssClasses,o=e.renderState,c=e.templates;return function(e,t){var n=e.hits,r=e.isLoading,i=e.instantSearchInstance;t?o.templateProps=fe({defaultTemplates:Wi,templatesConfig:i.templatesConfig,templates:c}):sr(Dn(Ci,{cssClasses:s,hits:n,isLoading:r,templateProps:o.templateProps}),a)}}({containerNode:m,cssClasses:p,templates:d,renderState:{}});return W(W({},gi(g,function(){return sr(null,m)})({attributesForPrediction:r,queryLanguages:i,nbHits:a,searchDebounceTime:s,renderDebounceTime:o,escapeHTML:c,extraParameters:u})),{},{$$widgetType:"ais.answers"})},EXPERIMENTAL_configureRelatedItems:function(e){return W(W({},ci(xe)(e)),{},{$$widgetType:"ais.configureRelatedItems"})},geoSearch:function(e){var t=e||{},n=t.initialZoom,r=void 0===n?1:n,i=t.initialPosition,a=void 0===i?{lat:0,lng:0}:i,s=t.templates,o=void 0===s?{}:s,c=t.cssClasses,u=void 0===c?{}:c,l=t.builtInMarker,d=void 0===l?{}:l,h=t.customHTMLMarker,f=t.enableRefine,m=void 0===f||f,p=t.enableClearMapRefinement,g=void 0===p||p,v=t.enableRefineControl,y=void 0===v||v,b=t.container,R=t.googleReference,S=M(t,["initialZoom","initialPosition","templates","cssClasses","builtInMarker","customHTMLMarker","enableRefine","enableClearMapRefinement","enableRefineControl","container","googleReference"]);if(!b)throw new Error(Zi("The `container` option is required."));if(!R)throw new Error(Zi("The `googleReference` option is required."));var w=le(b),_={root:Pi(ea(),u.root),tree:ea({descendantName:"tree"}),map:Pi(ea({descendantName:"map"}),u.map),control:Pi(ea({descendantName:"control"}),u.control),label:Pi(ea({descendantName:"label"}),u.label),selectedLabel:Pi(ea({descendantName:"label",modifierName:"selected"}),u.selectedLabel),input:Pi(ea({descendantName:"input"}),u.input),redo:Pi(ea({descendantName:"redo"}),u.redo),disabledRedo:Pi(ea({descendantName:"redo",modifierName:"disabled"}),u.disabledRedo),reset:Pi(ea({descendantName:"reset"}),u.reset)},P=W(W({},Gi),o),N=W(W({},{createOptions:function(){return{}},events:{}}),d),x=(Boolean(h)||Boolean(o.HTMLMarker))&&W(W({},{createOptions:function(){return{}},events:{}}),h),I=function(d){return function(){L(l,d.maps.OverlayView);var u=O(l);function l(e){var t,n=e.__id,r=e.position,i=e.map,a=e.template,s=e.className,o=e.anchor,c=void 0===o?{x:0,y:0}:o;return C(this,l),k(j(t=u.call(this)),"__id",void 0),k(j(t),"anchor",void 0),k(j(t),"offset",void 0),k(j(t),"listeners",void 0),k(j(t),"latLng",void 0),k(j(t),"element",void 0),t.__id=n,t.anchor=c,t.listeners={},t.latLng=new d.maps.LatLng(r),t.element=document.createElement("div"),t.element.className=s,t.element.style.position="absolute",t.element.innerHTML=a,t.setMap(i),t}return E(l,[{key:"onAdd",value:function(){this.getPanes().overlayMouseTarget.appendChild(this.element);var e=this.element.getBoundingClientRect();this.offset={x:this.anchor.x+e.width/2,y:this.anchor.y+e.height},this.element.style.width="".concat(e.width,"px")}},{key:"draw",value:function(){var e=this.getProjection().fromLatLngToDivPixel(this.latLng);this.element.style.left="".concat(Math.round(e.x-this.offset.x),"px"),this.element.style.top="".concat(Math.round(e.y-this.offset.y),"px"),this.element.style.zIndex=String(parseInt(this.element.style.top,10))}},{key:"onRemove",value:function(){var t=this;this.element&&(this.element.parentNode.removeChild(this.element),Object.keys(this.listeners).forEach(function(e){t.element.removeEventListener(e,t.listeners[e])}),delete this.element,delete this.listeners)}},{key:"addListener",value:function(e,t){this.listeners[e]=t;var n=this.element;return n.addEventListener(e,t),{remove:function(){return n.removeEventListener(e,t)}}}},{key:"getPosition",value:function(){return this.latLng}}]),l}()}(R),F=x?function(e){var t=e.item,n=M(e,["item"]);return new I(W(W(W({},x.createOptions(t)),n),{},{__id:t.objectID,position:t._geoloc,className:Pi(ea({descendantName:"marker"})),template:ye({templateKey:"HTMLMarker",templates:P,data:t})}))}:function(e){var t=e.item,n=M(e,["item"]);return new R.maps.Marker(W(W(W({},N.createOptions(t)),n),{},{__id:t.objectID,position:t._geoloc}))},T=x||N;return W(W({},Zr(Xi,function(){return sr(null,w)})(W(W({},S),{},{renderState:{},container:w,googleReference:R,initialZoom:r,initialPosition:a,templates:P,cssClasses:_,createMarker:F,markerOptions:T,enableRefine:m,enableClearMapRefinement:g,enableRefineControl:y}))),{},{$$widgetType:"ais.geoSearch"})},hierarchicalMenu:function(e){var t=e||{},n=t.container,r=t.attributes,i=t.separator,a=t.rootPath,s=t.showParentLevel,o=t.limit,c=t.showMore,u=void 0!==c&&c,l=t.showMoreLimit,d=t.sortBy,h=t.transformItems,f=t.templates,m=void 0===f?{}:f,p=t.cssClasses,g=void 0===p?{}:p;if(!n)throw new Error(oa("The `container` option is required."));var v=le(n),y=function(e){var u=e.cssClasses,l=e.containerNode,d=e.showMore,h=e.templates,f=e.renderState;return function(e,t){var n=e.createURL,r=e.items,i=e.refine,a=e.instantSearchInstance,s=e.isShowingMore,o=e.toggleShowMore,c=e.canToggleShowMore;t?f.templateProps=fe({defaultTemplates:sa,templatesConfig:a.templatesConfig,templates:h}):sr(Dn(aa,{createURL:n,cssClasses:u,facetValues:r,templateProps:f.templateProps,toggleRefinement:i,showMore:d,toggleShowMore:o,isShowingMore:s,canToggleShowMore:c}),l)}}({cssClasses:{root:Pi(ca(),g.root),noRefinementRoot:Pi(ca({modifierName:"noRefinement"}),g.noRefinementRoot),list:Pi(ca({descendantName:"list"}),g.list),childList:Pi(ca({descendantName:"list",modifierName:"child"}),g.childList),item:Pi(ca({descendantName:"item"}),g.item),selectedItem:Pi(ca({descendantName:"item",modifierName:"selected"}),g.selectedItem),parentItem:Pi(ca({descendantName:"item",modifierName:"parent"}),g.parentItem),link:Pi(ca({descendantName:"link"}),g.link),label:Pi(ca({descendantName:"label"}),g.label),count:Pi(ca({descendantName:"count"}),g.count),showMore:Pi(ca({descendantName:"showMore"}),g.showMore),disabledShowMore:Pi(ca({descendantName:"showMore",modifierName:"disabled"}),g.disabledShowMore)},containerNode:v,templates:m,showMore:u,renderState:{}});return W(W({},wn(y,function(){return sr(null,v)})({attributes:r,separator:i,rootPath:a,showParentLevel:s,limit:o,showMore:u,showMoreLimit:l,sortBy:d,transformItems:h})),{},{$$widgetType:"ais.hierarchicalMenu"})},hits:function(e){var t=e||{},n=t.container,r=t.escapeHTML,i=t.transformItems,a=t.templates,s=void 0===a?{}:a,o=t.cssClasses,c=void 0===o?{}:o;if(!n)throw new Error(la("The `container` option is required."));var u=le(n),l={root:Pi(da(),c.root),emptyRoot:Pi(da({modifierName:"empty"}),c.emptyRoot),list:Pi(da({descendantName:"list"}),c.list),item:Pi(da({descendantName:"item"}),c.item)},d=function(e){var o=e.renderState,c=e.cssClasses,u=e.containerNode,l=e.templates;return function(e,t){var n=e.hits,r=e.results,i=e.instantSearchInstance,a=e.insights,s=e.bindEvent;t?o.templateProps=fe({defaultTemplates:ua,templatesConfig:i.templatesConfig,templates:l}):sr(Dn(ha,{cssClasses:c,hits:n,results:r,templateProps:o.templateProps,insights:a,sendEvent:function(e){i.sendEventToInsights(e)},bindEvent:s}),u)}}({containerNode:u,cssClasses:l,renderState:{},templates:s});return W(W({},Fn(_n)(d,function(){return sr(null,u)})({escapeHTML:r,transformItems:i})),{},{$$widgetType:"ais.hits"})},hitsPerPage:function(e){var t=e||{},n=t.container,r=t.items,i=t.cssClasses,a=void 0===i?{}:i,s=t.transformItems;if(!n)throw new Error(ma("The `container` option is required."));var o=le(n),c={root:Pi(pa(),a.root),select:Pi(pa({descendantName:"select"}),a.select),option:Pi(pa({descendantName:"option"}),a.option)},u=function(e){var a=e.containerNode,s=e.cssClasses;return function(e,t){var n=e.items,r=e.refine;if(!t){var i=(be(n,function(e){return e.isRefined})||{}).value;sr(Dn("div",{className:s.root},Dn(fa,{cssClasses:s,currentValue:i,options:n,setValue:r})),a)}}}({containerNode:o,cssClasses:c});return W(W({},ur(u,function(){return sr(null,o)})({items:r,transformItems:s})),{},{$$widgetType:"ais.hitsPerPage"})},index:bt,infiniteHits:function(e){var t=e||{},n=t.container,r=t.escapeHTML,i=t.transformItems,a=t.templates,s=void 0===a?{}:a,o=t.cssClasses,c=void 0===o?{}:o,u=t.showPrevious,l=t.cache;if(!n)throw new Error(va("The `container` option is required."));var d=le(n),h={root:Pi(ya(),c.root),emptyRoot:Pi(ya({modifierName:"empty"}),c.emptyRoot),item:Pi(ya({descendantName:"item"}),c.item),list:Pi(ya({descendantName:"list"}),c.list),loadPrevious:Pi(ya({descendantName:"loadPrevious"}),c.loadPrevious),disabledLoadPrevious:Pi(ya({descendantName:"loadPrevious",modifierName:"disabled"}),c.disabledLoadPrevious),loadMore:Pi(ya({descendantName:"loadMore"}),c.loadMore),disabledLoadMore:Pi(ya({descendantName:"loadMore",modifierName:"disabled"}),c.disabledLoadMore)},f=function(e){var d=e.containerNode,h=e.cssClasses,f=e.renderState,m=e.templates,p=e.showPrevious;return function(e,t){var n=e.hits,r=e.results,i=e.showMore,a=e.showPrevious,s=e.isFirstPage,o=e.isLastPage,c=e.instantSearchInstance,u=e.insights,l=e.bindEvent;t?f.templateProps=fe({defaultTemplates:ga,templatesConfig:c.templatesConfig,templates:m}):sr(Dn(ba,{cssClasses:h,hits:n,results:r,hasShowPrevious:p,showPrevious:a,showMore:i,templateProps:f.templateProps,isFirstPage:s,isLastPage:o,insights:u,sendEvent:function(e){c.sendEventToInsights(e)},bindEvent:l}),d)}}({containerNode:d,cssClasses:h,templates:s,showPrevious:u,renderState:{}});return W(W({},Fn(mr)(f,function(){return sr(null,d)})({escapeHTML:r,transformItems:i,showPrevious:u,cache:l})),{},{$$widgetType:"ais.infiniteHits"})},menu:function(e){var t=e||{},n=t.container,r=t.attribute,i=t.sortBy,a=t.limit,s=t.showMore,o=t.showMoreLimit,c=t.cssClasses,u=void 0===c?{}:c,l=t.templates,d=void 0===l?{}:l,h=t.transformItems;if(!n)throw new Error(Sa("The `container` option is required."));var f=le(n),m={root:Pi(wa(),u.root),noRefinementRoot:Pi(wa({modifierName:"noRefinement"}),u.noRefinementRoot),list:Pi(wa({descendantName:"list"}),u.list),item:Pi(wa({descendantName:"item"}),u.item),selectedItem:Pi(wa({descendantName:"item",modifierName:"selected"}),u.selectedItem),link:Pi(wa({descendantName:"link"}),u.link),label:Pi(wa({descendantName:"label"}),u.label),count:Pi(wa({descendantName:"count"}),u.count),showMore:Pi(wa({descendantName:"showMore"}),u.showMore),disabledShowMore:Pi(wa({descendantName:"showMore",modifierName:"disabled"}),u.disabledShowMore)},p=function(e){var l=e.containerNode,d=e.cssClasses,h=e.renderState,f=e.templates,m=e.showMore;return function(e,t){var n=e.refine,r=e.items,i=e.createURL,a=e.instantSearchInstance,s=e.isShowingMore,o=e.toggleShowMore,c=e.canToggleShowMore;if(t)h.templateProps=fe({defaultTemplates:Ra,templatesConfig:a.templatesConfig,templates:f});else{var u=r.map(function(e){return W(W({},e),{},{url:i(e.value)})});sr(Dn(aa,{createURL:i,cssClasses:d,facetValues:u,showMore:m,templateProps:h.templateProps,toggleRefinement:n,toggleShowMore:o,isShowingMore:s,canToggleShowMore:c}),l)}}}({containerNode:f,cssClasses:m,renderState:{},templates:d,showMore:s});return W(W({},pr(p,function(){return sr(null,f)})({attribute:r,limit:a,showMore:s,showMoreLimit:o,sortBy:i,transformItems:h})),{},{$$widgetType:"ais.menu"})},menuSelect:function(e){var t=e||{},n=t.container,r=t.attribute,i=t.sortBy,a=void 0===i?["name:asc"]:i,s=t.limit,o=void 0===s?10:s,c=t.cssClasses,u=void 0===c?{}:c,l=t.templates,d=void 0===l?{}:l,h=t.transformItems;if(!n)throw new Error(Na("The `container` option is required."));var f=le(n),m={root:Pi(xa(),u.root),noRefinementRoot:Pi(xa({modifierName:"noRefinement"}),u.noRefinementRoot),select:Pi(xa({descendantName:"select"}),u.select),option:Pi(xa({descendantName:"option"}),u.option)},p=function(e){var a=e.containerNode,s=e.cssClasses,o=e.renderState,c=e.templates;return function(e,t){var n=e.refine,r=e.items,i=e.instantSearchInstance;t?o.templateProps=fe({defaultTemplates:Pa,templatesConfig:i.templatesConfig,templates:c}):sr(Dn(_a,{cssClasses:s,items:r,refine:n,templateProps:o.templateProps}),a)}}({containerNode:f,cssClasses:m,renderState:{},templates:d});return W(W({},pr(p,function(){return sr(null,f)})({attribute:r,limit:o,sortBy:a,transformItems:h})),{},{$$widgetType:"ais.menuSelect"})},numericMenu:function(e){var t=e||{},n=t.container,r=t.attribute,i=t.items,a=t.cssClasses,s=void 0===a?{}:a,o=t.templates,c=void 0===o?{}:o,u=t.transformItems;if(!n)throw new Error(Fa("The `container` option is required."));var l=le(n),d={root:Pi(Ta(),s.root),noRefinementRoot:Pi(Ta({modifierName:"noRefinement"}),s.noRefinementRoot),list:Pi(Ta({descendantName:"list"}),s.list),item:Pi(Ta({descendantName:"item"}),s.item),selectedItem:Pi(Ta({descendantName:"item",modifierName:"selected"}),s.selectedItem),label:Pi(Ta({descendantName:"label"}),s.label),radio:Pi(Ta({descendantName:"radio"}),s.radio),labelText:Pi(Ta({descendantName:"labelText"}),s.labelText)},h=function(e){var s=e.containerNode,o=e.attribute,c=e.cssClasses,u=e.renderState,l=e.templates;return function(e,t){var n=e.createURL,r=e.instantSearchInstance,i=e.refine,a=e.items;t?u.templateProps=fe({defaultTemplates:Ia,templatesConfig:r.templatesConfig,templates:l}):sr(Dn(aa,{createURL:n,cssClasses:c,facetValues:a,templateProps:u.templateProps,toggleRefinement:i,attribute:o}),s)}}({containerNode:l,attribute:r,cssClasses:d,renderState:{},templates:c});return W(W({},gr(h,function(){return sr(null,l)})({attribute:r,items:i,transformItems:u})),{},{$$widgetType:"ais.numericMenu"})},pagination:function(e){var t=e||{},n=t.container,r=t.templates,i=void 0===r?{}:r,a=t.cssClasses,s=void 0===a?{}:a,o=t.totalPages,c=t.padding,u=t.showFirst,l=void 0===u||u,d=t.showLast,h=void 0===d||d,f=t.showPrevious,m=void 0===f||f,p=t.showNext,g=void 0===p||p,v=t.scrollTo,y=void 0===v?"body":v;if(!n)throw new Error(Oa("The `container` option is required."));var b=le(n),R=!0===y?"body":y,S=!1!==R&&le(R),w={root:Pi(ja(),s.root),noRefinementRoot:Pi(ja({modifierName:"noRefinement"}),s.noRefinementRoot),list:Pi(ja({descendantName:"list"}),s.list),item:Pi(ja({descendantName:"item"}),s.item),firstPageItem:Pi(ja({descendantName:"item",modifierName:"firstPage"}),s.firstPageItem),lastPageItem:Pi(ja({descendantName:"item",modifierName:"lastPage"}),s.lastPageItem),previousPageItem:Pi(ja({descendantName:"item",modifierName:"previousPage"}),s.previousPageItem),nextPageItem:Pi(ja({descendantName:"item",modifierName:"nextPage"}),s.nextPageItem),pageItem:Pi(ja({descendantName:"item",modifierName:"page"}),s.pageItem),selectedItem:Pi(ja({descendantName:"item",modifierName:"selected"}),s.selectedItem),disabledItem:Pi(ja({descendantName:"item",modifierName:"disabled"}),s.disabledItem),link:Pi(ja({descendantName:"link"}),s.link)},_=W(W({},Aa),i),P=function(e){var u=e.containerNode,l=e.cssClasses,d=e.templates,h=e.showFirst,f=e.showLast,m=e.showPrevious,p=e.showNext,g=e.scrollToNode;return function(e,t){var n=e.createURL,r=e.currentRefinement,i=e.nbPages,a=e.pages,s=e.isFirstPage,o=e.isLastPage,c=e.refine;if(!t){sr(Dn(Ca,{createURL:n,cssClasses:l,currentPage:r,templates:d,nbPages:i,pages:a,isFirstPage:s,isLastPage:o,setCurrentPage:function(e){c(e),!1!==g&&g.scrollIntoView()},showFirst:h,showLast:f,showPrevious:m,showNext:p}),u)}}}({containerNode:b,cssClasses:w,templates:_,showFirst:l,showLast:h,showPrevious:m,showNext:g,scrollToNode:S});return W(W({},Nr(P,function(){return sr(null,b)})({totalPages:o,padding:c})),{},{$$widgetType:"ais.pagination"})},panel:function(e){var t=e||{},n=t.templates,r=void 0===n?{}:n,i=t.hidden,c=void 0===i?function(){return!1}:i,a=t.collapsed,s=t.cssClasses,o=void 0===s?{}:s,u=document.createElement("div"),l=Boolean(a),d="function"==typeof a?a:function(){return!1},h={root:Pi(is(),o.root),noRefinementRoot:Pi(is({modifierName:"noRefinement"}),o.noRefinementRoot),collapsibleRoot:Pi(is({modifierName:"collapsible"}),o.collapsibleRoot),collapsedRoot:Pi(is({modifierName:"collapsed"}),o.collapsedRoot),collapseButton:Pi(is({descendantName:"collapseButton"}),o.collapseButton),collapseIcon:Pi(is({descendantName:"collapseIcon"}),o.collapseIcon),body:Pi(is({descendantName:"body"}),o.body),header:Pi(is({descendantName:"header"}),o.header),footer:Pi(is({descendantName:"footer"}),o.footer)};return function(t){return function(e){if(!e||!e.container)throw new Error(rs("The `container` option is required in the widget within the panel."));var i=le(e.container),s=function(e){var a=e.containerNode,s=e.bodyContainerNode,o=e.cssClasses,c=e.templates;return function(e){var t=e.options,n=e.hidden,r=e.collapsible,i=e.collapsed;sr(Dn(es,{cssClasses:o,hidden:n,collapsible:r,isCollapsed:i,templates:c,data:t,bodyElement:s}),a)}}({containerNode:i,bodyContainerNode:u,cssClasses:h,templates:W(W({},{header:"",footer:"",collapseButtonText:function(e){var t=e.collapsed;return'<svg\n          class="'.concat(h.collapseIcon,'"\n          width="1em"\n          height="1em"\n          viewBox="0 0 500 500"\n        >\n        <path d="').concat(t?"M100 250l300-150v300z":"M250 400l150-300H100z",'" fill="currentColor" />\n        </svg>')}}),r)}),o=t(W(W({},e),{},{container:u}));return W(W({},o),{},{init:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0],a=W(W({},o.getWidgetRenderState?o.getWidgetRenderState(i):{}),i);s({options:a,hidden:!0,collapsible:l,collapsed:!1}),"function"==typeof o.init&&(r=o.init).call.apply(r,[this].concat(t))},render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0],a=W(W({},o.getWidgetRenderState?o.getWidgetRenderState(i):{}),i);s({options:a,hidden:Boolean(c(a)),collapsible:l,collapsed:Boolean(d(a))}),"function"==typeof o.render&&(r=o.render).call.apply(r,[this].concat(t))},dispose:function(){if(sr(null,i),"function"==typeof o.dispose){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.dispose).call.apply(e,[this].concat(n))}}})}}},places:function(e){var t=e||{},n=t.placesReference,r=t.defaultPosition,o=void 0===r?[]:r,i=M(t,["placesReference","defaultPosition"]);if("function"!=typeof n)throw new Error("The `placesReference` option requires a valid Places.js reference.");var c=n(i),u={query:"",initialLatLngViaIP:void 0,isInitialLatLngViaIPSet:!1};return{$$type:"ais.places",$$widgetType:"ais.places",init:function(e){var s=e.helper;c.on("change",function(e){var t=e.suggestion,n=t.value,r=t.latlng,i=r.lat,a=r.lng;u.query=n,s.setQueryParameter("insideBoundingBox",void 0).setQueryParameter("aroundLatLngViaIP",!1).setQueryParameter("aroundLatLng","".concat(i,",").concat(a)).search()}),c.on("clear",function(){u.query="",s.setQueryParameter("insideBoundingBox",void 0),1<o.length?s.setQueryParameter("aroundLatLngViaIP",!1).setQueryParameter("aroundLatLng",o.join(",")):s.setQueryParameter("aroundLatLngViaIP",u.initialLatLngViaIP).setQueryParameter("aroundLatLng",void 0),s.search()})},getWidgetUiState:function(e,t){var n=t.searchParameters.aroundLatLng||o.join(",");if(n!==o.join(",")||u.query)return W(W({},e),{},{places:{query:u.query,position:n}});e.places;return M(e,["places"])},getWidgetSearchParameters:function(e,t){var n=t.uiState.places||{},r=n.query,i=void 0===r?"":r,a=n.position,s=void 0===a?o.join(","):a;return u.query=i,u.isInitialLatLngViaIPSet||(u.isInitialLatLngViaIPSet=!0,u.initialLatLngViaIP=e.aroundLatLngViaIP),c.setVal(i),c.close(),e.setQueryParameter("insideBoundingBox",void 0).setQueryParameter("aroundLatLngViaIP",!1).setQueryParameter("aroundLatLng",s||void 0)},getRenderState:function(e,t){return W(W({},e),{},{places:this.getWidgetRenderState(t)})},getWidgetRenderState:function(){return{widgetParams:e}}}},poweredBy:function(e){var t=e||{},n=t.container,r=t.cssClasses,i=void 0===r?{}:r,a=t.theme,s=void 0===a?"light":a;if(!n)throw new Error(cs("The `container` option is required."));var o=le(n),c={root:Pi(os(),os({modifierName:"dark"===s?"dark":"light"}),i.root),link:Pi(os({descendantName:"link"}),i.link),logo:Pi(os({descendantName:"logo"}),i.logo)},u=function(e){var a=e.containerNode,s=e.cssClasses;return function(e,t){var n=e.url,r=e.widgetParams;if(t){var i=r.theme;sr(Dn(ts,{cssClasses:s,url:n,theme:void 0===i?"light":i}),a)}else;}}({containerNode:o,cssClasses:c});return W(W({},ei(u,function(){return sr(null,o)})({theme:s})),{},{$$widgetType:"ais.poweredBy"})},queryRuleContext:function(e){var t=0<arguments.length&&void 0!==e?e:{};if(!t.trackedFilters)throw new Error(us("The `trackedFilters` option is required."));return W(W({},hi(xe)(t)),{},{$$widgetType:"ais.queryRuleContext"})},queryRuleCustomData:function(e){var t=e||{},n=t.container,r=t.cssClasses,i=void 0===r?{}:r,a=t.templates,s=void 0===a?{}:a,o=t.transformItems,c=void 0===o?function(e){return e}:o;if(!n)throw new Error(ds("The `container` option is required."));var u={root:Pi(hs(),i.root)},l=le(n),d=W(W({},ls),s),h=function(e){var n=e.containerNode,r=e.cssClasses,i=e.templates;return function(e){var t=e.items;sr(Dn(ns,{cssClasses:r,templates:i,items:t}),n)}}({containerNode:l,cssClasses:u,renderState:{},templates:d});return W(W({},hi(h,function(){sr(null,l)})({transformItems:c})),{},{$$widgetType:"ais.queryRuleCustomData"})},rangeInput:function(e){var t=e||{},n=t.container,r=t.attribute,i=t.min,a=t.max,s=t.precision,o=void 0===s?0:s,c=t.cssClasses,u=void 0===c?{}:c,l=t.templates,d=void 0===l?{}:l;if(!n)throw new Error(ms("The `container` option is required."));var h=le(n),f={root:Pi(ps(),u.root),noRefinement:Pi(ps({modifierName:"noRefinement"})),form:Pi(ps({descendantName:"form"}),u.form),label:Pi(ps({descendantName:"label"}),u.label),input:Pi(ps({descendantName:"input"}),u.input),inputMin:Pi(ps({descendantName:"input",modifierName:"min"}),u.inputMin),inputMax:Pi(ps({descendantName:"input",modifierName:"max"}),u.inputMax),separator:Pi(ps({descendantName:"separator"}),u.separator),submit:Pi(ps({descendantName:"submit"}),u.submit)},m=function(e){var f=e.containerNode,m=e.cssClasses,p=e.renderState,g=e.templates;return function(e,t){var n=e.refine,r=e.range,i=e.start,a=e.widgetParams,s=e.instantSearchInstance;if(t)p.templateProps=fe({defaultTemplates:gs,templatesConfig:s.templatesConfig,templates:g});else{var o=r.min,c=r.max,u=D(i,2),l=u[0],d=u[1],h=1/Math.pow(10,a.precision||0);sr(Dn(fs,{min:o,max:c,step:h,values:{min:l!==-1/0&&l!==o?l:void 0,max:d!==1/0&&d!==c?d:void 0},cssClasses:m,refine:n,templateProps:p.templateProps}),f)}}}({containerNode:h,cssClasses:f,templates:d,renderState:{}});return W(W({},Er(m,function(){return sr(null,h)})({attribute:r,min:i,max:a,precision:o})),{},{$$type:"ais.rangeInput",$$widgetType:"ais.rangeInput"})},rangeSlider:function(e){var t=e||{},n=t.container,r=t.attribute,i=t.min,a=t.max,s=t.cssClasses,o=void 0===s?{}:s,c=t.step,u=t.pips,l=void 0===u||u,d=t.precision,h=void 0===d?0:d,f=t.tooltips,m=void 0===f||f;if(!n)throw new Error(Ds("The `container` option is required."));var p=le(n),g={root:Pi(Bs(),o.root),disabledRoot:Pi(Bs({modifierName:"disabled"}),o.disabledRoot)},v=function(e){var h=e.containerNode,f=e.cssClasses,m=e.pips,p=e.step,g=e.tooltips;return function(e,t){var n=e.refine,r=e.range,i=e.start;if(!t){var a=r.min,s=r.max,o=D(i,2),c=o[0],u=o[1],l=c===-1/0?a:c,d=u===1/0?s:u;sr(Dn(Ws,{cssClasses:f,refine:n,min:a,max:s,values:[s<l?s:l,d<a?a:d],tooltips:g,step:p,pips:m}),h)}}}({containerNode:p,step:c,pips:l,tooltips:m,cssClasses:g});return W(W({},Er(v,function(){return sr(null,p)})({attribute:r,min:i,max:a,precision:h})),{},{$$type:"ais.rangeSlider",$$widgetType:"ais.rangeSlider"})},ratingMenu:function(e){var t=e||{},n=t.container,r=t.attribute,i=t.max,a=void 0===i?5:i,s=t.cssClasses,o=void 0===s?{}:s,c=t.templates,u=void 0===c?{}:c;if(!n)throw new Error(qs("The `container` option is required."));var l=le(n),d={root:Pi(Qs(),o.root),noRefinementRoot:Pi(Qs({modifierName:"noRefinement"}),o.noRefinementRoot),list:Pi(Qs({descendantName:"list"}),o.list),item:Pi(Qs({descendantName:"item"}),o.item),selectedItem:Pi(Qs({descendantName:"item",modifierName:"selected"}),o.selectedItem),disabledItem:Pi(Qs({descendantName:"item",modifierName:"disabled"}),o.disabledItem),link:Pi(Qs({descendantName:"link"}),o.link),starIcon:Pi(Qs({descendantName:"starIcon"}),o.starIcon),fullStarIcon:Pi(Qs({descendantName:"starIcon",modifierName:"full"}),o.fullStarIcon),emptyStarIcon:Pi(Qs({descendantName:"starIcon",modifierName:"empty"}),o.emptyStarIcon),label:Pi(Qs({descendantName:"label"}),o.label),count:Pi(Qs({descendantName:"count"}),o.count)},h=function(e){var s=e.containerNode,o=e.cssClasses,c=e.templates,u=e.renderState;return function(e,t){var n=e.refine,r=e.items,i=e.createURL,a=e.instantSearchInstance;t?u.templateProps=fe({defaultTemplates:Us,templatesConfig:a.templatesConfig,templates:c}):sr(Dn(aa,{createURL:i,cssClasses:o,facetValues:r,templateProps:u.templateProps,toggleRefinement:n},Dn("svg",{style:"display:none;"},Dn("symbol",{id:Qs({descendantName:"starSymbol"}),viewBox:"0 0 24 24"},$s),Dn("symbol",{id:Qs({descendantName:"starEmptySymbol"}),viewBox:"0 0 24 24"},Vs))),s)}}({containerNode:l,cssClasses:d,renderState:{},templates:u});return W(W({},Or(h,function(){return sr(null,l)})({attribute:r,max:a})),{},{$$widgetType:"ais.ratingMenu"})},refinementList:function(e){var t=e||{},n=t.container,r=t.attribute,i=t.operator,a=t.sortBy,s=t.limit,o=t.showMore,c=t.showMoreLimit,u=t.searchable,l=void 0!==u&&u,d=t.searchablePlaceholder,h=void 0===d?"Search...":d,f=t.searchableEscapeFacetValues,m=void 0===f||f,p=t.searchableIsAlwaysActive,g=void 0===p||p,v=t.cssClasses,y=void 0===v?{}:v,b=t.templates,R=void 0===b?{}:b,S=t.transformItems;if(!n)throw new Error(Js("The `container` option is required."));var w=!!l&&Boolean(m),_=le(n),P={root:Pi(Ys(),y.root),noRefinementRoot:Pi(Ys({modifierName:"noRefinement"}),y.noRefinementRoot),list:Pi(Ys({descendantName:"list"}),y.list),item:Pi(Ys({descendantName:"item"}),y.item),selectedItem:Pi(Ys({descendantName:"item",modifierName:"selected"}),y.selectedItem),searchBox:Pi(Ys({descendantName:"searchBox"}),y.searchBox),label:Pi(Ys({descendantName:"label"}),y.label),checkbox:Pi(Ys({descendantName:"checkbox"}),y.checkbox),labelText:Pi(Ys({descendantName:"labelText"}),y.labelText),count:Pi(Ys({descendantName:"count"}),y.count),noResults:Pi(Ys({descendantName:"noResults"}),y.noResults),showMore:Pi(Ys({descendantName:"showMore"}),y.showMore),disabledShowMore:Pi(Ys({descendantName:"showMore",modifierName:"disabled"}),y.disabledShowMore),searchable:{root:Pi(Xs(),y.searchableRoot),form:Pi(Xs({descendantName:"form"}),y.searchableForm),input:Pi(Xs({descendantName:"input"}),y.searchableInput),submit:Pi(Xs({descendantName:"submit"}),y.searchableSubmit),submitIcon:Pi(Xs({descendantName:"submitIcon"}),y.searchableSubmitIcon),reset:Pi(Xs({descendantName:"reset"}),y.searchableReset),resetIcon:Pi(Xs({descendantName:"resetIcon"}),y.searchableResetIcon),loadingIndicator:Pi(Xs({descendantName:"loadingIndicator"}),y.searchableLoadingIndicator),loadingIcon:Pi(Xs({descendantName:"loadingIcon"}),y.searchableLoadingIcon)}},N=function(e){var h=e.containerNode,f=e.cssClasses,m=e.templates,p=e.searchBoxTemplates,g=e.renderState,v=e.showMore,y=e.searchable,b=e.searchablePlaceholder,R=e.searchableIsAlwaysActive;return function(e,t){var n=e.refine,r=e.items,i=e.createURL,a=e.searchForItems,s=e.isFromSearch,o=e.instantSearchInstance,c=e.toggleShowMore,u=e.isShowingMore,l=e.hasExhaustiveItems,d=e.canToggleShowMore;if(t)return g.templateProps=fe({defaultTemplates:zs,templatesConfig:o.templatesConfig,templates:m}),void(g.searchBoxTemplateProps=fe({defaultTemplates:Ks,templatesConfig:o.templatesConfig,templates:p}));sr(Dn(aa,{createURL:i,cssClasses:f,facetValues:r,templateProps:g.templateProps,searchBoxTemplateProps:g.searchBoxTemplateProps,toggleRefinement:n,searchFacetValues:y?a:void 0,searchPlaceholder:b,searchIsAlwaysActive:R,isFromSearch:s,showMore:v&&!s&&0<r.length,toggleShowMore:c,isShowingMore:u,hasExhaustiveItems:l,canToggleShowMore:d}),h)}}({containerNode:_,cssClasses:P,templates:R,searchBoxTemplates:{submit:R.searchableSubmit,reset:R.searchableReset,loadingIndicator:R.searchableLoadingIndicator},renderState:{},searchable:l,searchablePlaceholder:h,searchableIsAlwaysActive:g,showMore:o});return W(W({},kr(N,function(){return sr(null,_)})({attribute:r,operator:i,limit:s,showMore:o,showMoreLimit:c,sortBy:a,escapeFacetValues:w,transformItems:S})),{},{$$widgetType:"ais.refinementList"})},relevantSort:function(e){var t=e.container,n=e.templates,r=void 0===n?{}:n,i=e.cssClasses,a=void 0===i?{}:i;if(!t)throw new Error(Zs("The `container` option is required."));var s=le(t),o={root:Pi(eo(),a.root),text:Pi(eo({descendantName:"text"}),a.text),button:Pi(eo({descendantName:"button"}),a.button)},c=W(W({},Gs),r),u=function(e){var i=e.containerNode,a=e.cssClasses,s=e.templates;return function(e){var t=e.isRelevantSorted,n=e.isVirtualReplica,r=e.refine;sr(Dn(js,{cssClasses:a,templates:s,isRelevantSorted:t,isVirtualReplica:n,refine:r}),i)}}({containerNode:s,cssClasses:o,renderState:{},templates:c});return W(W({},vi(u,function(){sr(null,s)})({})),{},{$$widgetType:"ais.relevantSort"})},searchBox:function(e){var t=e||{},n=t.container,r=t.placeholder,i=void 0===r?"":r,a=t.cssClasses,s=void 0===a?{}:a,o=t.autofocus,c=void 0!==o&&o,u=t.searchAsYouType,l=void 0===u||u,d=t.showReset,h=void 0===d||d,f=t.showSubmit,m=void 0===f||f,p=t.showLoadingIndicator,g=void 0===p||p,v=t.queryHook,y=t.templates,b=void 0===y?{}:y;if(!n)throw new Error(to("The `container` option is required."));var R=le(n),S={root:Pi(no(),s.root),form:Pi(no({descendantName:"form"}),s.form),input:Pi(no({descendantName:"input"}),s.input),submit:Pi(no({descendantName:"submit"}),s.submit),submitIcon:Pi(no({descendantName:"submitIcon"}),s.submitIcon),reset:Pi(no({descendantName:"reset"}),s.reset),resetIcon:Pi(no({descendantName:"resetIcon"}),s.resetIcon),loadingIndicator:Pi(no({descendantName:"loadingIndicator"}),s.loadingIndicator),loadingIcon:Pi(no({descendantName:"loadingIcon"}),s.loadingIcon)},w=W(W({},Ks),b),_=function(e){var i=e.containerNode,a=e.cssClasses,s=e.placeholder,o=e.templates,c=e.autofocus,u=e.searchAsYouType,l=e.showReset,d=e.showSubmit,h=e.showLoadingIndicator;return function(e){var t=e.refine,n=e.query,r=e.isSearchStalled;sr(Dn(ra,{query:n,placeholder:s,autofocus:c,refine:t,searchAsYouType:u,templates:o,showSubmit:d,showReset:l,showLoadingIndicator:h,isSearchStalled:r,cssClasses:a}),i)}}({containerNode:R,cssClasses:S,placeholder:i,templates:w,autofocus:c,searchAsYouType:l,showReset:h,showSubmit:m,showLoadingIndicator:g});return W(W({},Mr(_,function(){return sr(null,R)})({queryHook:v})),{},{$$widgetType:"ais.searchBox"})},sortBy:function(e){var t=e||{},n=t.container,r=t.items,i=t.cssClasses,a=void 0===i?{}:i,s=t.transformItems;if(!n)throw new Error(ro("The `container` option is required."));var o=le(n),c={root:Pi(io(),a.root),select:Pi(io({descendantName:"select"}),a.select),option:Pi(io({descendantName:"option"}),a.option)},u=function(e){var a=e.containerNode,s=e.cssClasses;return function(e,t){var n=e.currentRefinement,r=e.options,i=e.refine;t||sr(Dn("div",{className:s.root},Dn(fa,{cssClasses:s,currentValue:n,options:r,setValue:i})),a)}}({containerNode:o,cssClasses:c});return W(W({},jr(u,function(){return sr(null,o)})({container:o,items:r,transformItems:s})),{},{$$widgetType:"ais.sortBy"})},stats:function(e){var t=e||{},n=t.container,r=t.cssClasses,i=void 0===r?{}:r,a=t.templates,s=void 0===a?{}:a;if(!n)throw new Error(ao("The `container` option is required."));var o=le(n),c={root:Pi(so(),i.root),text:Pi(so({descendantName:"text"}),i.text)},u=function(e){var d=e.renderState,h=e.cssClasses,f=e.containerNode,m=e.templates;return function(e,t){var n=e.hitsPerPage,r=e.nbHits,i=e.nbSortedHits,a=e.areHitsSorted,s=e.nbPages,o=e.page,c=e.processingTimeMS,u=e.query,l=e.instantSearchInstance;t?d.templateProps=fe({defaultTemplates:oo,templatesConfig:l.templatesConfig,templates:m}):sr(Dn(Os,{cssClasses:h,hitsPerPage:n,nbHits:r,nbSortedHits:i,areHitsSorted:a,nbPages:s,page:o,processingTimeMS:c,query:u,templateProps:d.templateProps}),f)}}({containerNode:o,cssClasses:c,templates:s,renderState:{}});return W(W({},Ar(u,function(){return sr(null,o)})({})),{},{$$widgetType:"ais.stats"})},toggleRefinement:function(e){var t=e||{},n=t.container,r=t.attribute,i=t.cssClasses,a=void 0===i?{}:i,s=t.templates,o=void 0===s?{}:s,c=t.on,u=void 0===c||c,l=t.off;if(!n)throw new Error(uo("The `container` option is required."));var d=le(n),h={root:Pi(lo(),a.root),label:Pi(lo({descendantName:"label"}),a.label),checkbox:Pi(lo({descendantName:"checkbox"}),a.checkbox),labelText:Pi(lo({descendantName:"labelText"}),a.labelText)},f=function(e){var a=e.containerNode,s=e.cssClasses,o=e.renderState,c=e.templates;return function(e,t){var n=e.value,r=e.refine,i=e.instantSearchInstance;t?o.templateProps=fe({defaultTemplates:co,templatesConfig:i.templatesConfig,templates:c}):sr(Dn(As,{cssClasses:s,currentRefinement:n,templateProps:o.templateProps,refine:r}),a)}}({containerNode:d,cssClasses:h,renderState:{},templates:o});return W(W({},Hr(f,function(){return sr(null,d)})({attribute:r,on:u,off:l})),{},{$$widgetType:"ais.toggleRefinement"})},voiceSearch:function(e){var t=e||{},n=t.container,r=t.cssClasses,i=void 0===r?{}:r,a=t.templates,s=void 0===a?{}:a,o=t.searchAsYouSpeak,c=void 0!==o&&o,u=t.language,l=t.additionalQueryParameters,d=t.createVoiceSearchHelper;if(!n)throw new Error(fo("The `container` option is required."));var h=le(n),f={root:Pi(mo(),i.root),button:Pi(mo({descendantName:"button"}),i.button),status:Pi(mo({descendantName:"status"}),i.status)},m=W(W({},ho),s),p=function(e){var a=e.containerNode,s=e.cssClasses,o=e.templates;return function(e){var t=e.isBrowserSupported,n=e.isListening,r=e.toggleListening,i=e.voiceListeningState;sr(Dn(Hs,{cssClasses:s,templates:o,isBrowserSupported:t,isListening:n,toggleListening:r,voiceListeningState:i}),a)}}({containerNode:h,cssClasses:f,templates:m});return W(W({},mi(p,function(){return sr(null,h)})({container:h,cssClasses:f,templates:m,searchAsYouSpeak:c,language:u,additionalQueryParameters:l,createVoiceSearchHelper:d})),{},{$$widgetType:"ais.voiceSearch"})}}),vo=Object.freeze({__proto__:null,createInsightsMiddleware:function(e){var t=e||{},d=t.insightsClient,h=t.insightsInitParams,f=t.onEvent;if(null!==d&&!d)throw new Error("The `insightsClient` option is required. To disable, set it to `null`.");var m=Boolean(d),p=null===d?xe:d;return function(e){var n=e.instantSearchInstance,t=D(function(e){if(e.transporter){var t=e.transporter,n=t.headers,r=t.queryParameters,i="x-algolia-application-id",a="x-algolia-api-key";return[n[i]||r[i],n[a]||r[a]]}return[e.applicationID,e.apiKey]}(n.client),2),r=t[0],i=t[1],a=void 0,s=void 0;if(Array.isArray(p.queue)){var o=D(be(p.queue.slice().reverse(),function(e){return"setUserToken"===D(e,1)[0]})||[],2);a=o[1]}p("getUserToken",null,function(e,t){s=t}),p("init",W({appId:r,apiKey:i},h));var c,u,l=ai(xe);return{onStateChange:function(){},subscribe:function(){p("addAlgoliaAgent","insights-middleware"),c=l({searchParameters:{clickAnalytics:!0}}),n.addWidgets([c]);function e(e){u&&n.removeWidgets([u]),u=l({searchParameters:{userToken:e}}),n.addWidgets([u])}var t=Et();m&&t&&e(t),s?p("setUserToken",s):a&&p("setUserToken",a),p("onUserTokenChange",e,{immediate:!0}),n.sendEventToInsights=function(e){if(f)f(e,d);else if(e.insightsMethod){Boolean(n.renderState[n.indexName].configure.widgetParams.searchParameters.userToken)&&p(e.insightsMethod,e.payload)}}},unsubscribe:function(){p("onUserTokenChange",void 0),n.removeWidgets([c,u]),u=c=void 0,n.sendEventToInsights=xe}}}},createRouterMiddleware:cn,isMetadataEnabled:un,createMetadataMiddleware:ln}),yo=Object.freeze({__proto__:null,history:on});function bo(e){e.configure;return M(e,["configure"])}var Ro=Object.freeze({__proto__:null,simple:Lt,singleIndex:function(t){return{stateToRoute:function(e){return bo(e[t]||{})},routeToState:function(e){return k({},t,bo(0<arguments.length&&void 0!==e?e:{}))}}}});function So(e){var t=e||{};t.page;return M(t,["page"])}var wo="ais.infiniteHits";function _o(e){return new mn(e)}return _o.version="4.39.0",_o.connectors=wi,_o.widgets=go,_o.middlewares=vo,_o.routers=yo,_o.stateMappings=Ro,_o.createInfiniteHitsSessionStorageCache=function(){return{read:function(e){var t=e.state,n=ft(function(e){return e.window.sessionStorage});if(!n)return null;try{var r=JSON.parse(n.getItem(wo));return r&&Le(r.state,So(t))?r.hits:null}catch(e){if(e instanceof SyntaxError)try{n.removeItem(wo)}catch(e){}return null}},write:function(e){var t=e.state,n=e.hits,r=ft(function(e){return e.window.sessionStorage});if(r)try{r.setItem(wo,JSON.stringify({state:So(t),hits:n}))}catch(e){}}}},_o.highlight=_t,_o.reverseHighlight=Nt,_o.snippet=It,_o.reverseSnippet=Tt,_o.insights=Ct,_o});
//# sourceMappingURL=instantsearch.production.min.js.map

/*!
 * 
 * Algolia search implementation.
 * Ownership of Pearson Plc.
 *
 * Generated on Tue Nov 12 2024 08:13:54 GMT+0000 (Coordinated Universal Time)
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/algolia-common.js":
/*!*******************************!*\
  !*** ./src/algolia-common.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   algoliaConfig: () => (/* reexport safe */ _get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig),
/* harmony export */   getFeatureFlag: () => (/* binding */ getFeatureFlag),
/* harmony export */   search: () => (/* binding */ search)
/* harmony export */ });
/* harmony import */ var _get_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./get-config */ "./src/get-config.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./algolia-utils */ "./src/algolia-utils.js");
/* harmony import */ var _search_routing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./search-routing */ "./src/search-routing.js");
/** @module algolia-common */




const searchClient = algoliasearch(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'algolia-application-id'), _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'algolia-api-key'));
_search_routing__WEBPACK_IMPORTED_MODULE_2__["default"].indexName = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'algolia-index-name');
_search_routing__WEBPACK_IMPORTED_MODULE_2__["default"].routeStateDefaultValues = (0,_get_config__WEBPACK_IMPORTED_MODULE_0__.getDefaultValues)(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig);
const search = instantsearch({
  indexName: _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'algolia-index-name'),
  searchClient,
  searchParameters: {
    hitsPerPage: 5,
    attributesToSnippet: ['description:24'],
    snippetEllipsisText: ' [...]'
  },
  routing: _search_routing__WEBPACK_IMPORTED_MODULE_2__["default"]
});
search.addWidgets([instantsearch.widgets.configure({
  clickAnalytics: true
})]);

/**
 * getSiteId
 * @description composes normalized site-Id
 * @returns {string}
 */
const getSiteId = () => {
  const rawSiteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'site-name');
  const currentLocale = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getNormalizedLocale();
  const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.normalizeSiteName(rawSiteName);
  return currentLocale === 'us' ? siteName : "".concat(siteName).concat(currentLocale);
};

/**
 * getFeatureContext
 * @description Generates context pobject for Feature-toggle request
 * @returns {object} context
 */
const getFeatureContext = () => {
  const userId = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getPiUserId();
  const locale = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getLocale();
  const siteId = getSiteId();
  return {
    kind: 'user',
    key: userId || 'anonymous',
    siteUid: siteId,
    storeUid: siteId,
    locale: "en-".concat(locale),
    country: locale,
    anonymous: !userId
  };
};

/**
 * getFeatureFlag
 * @description An abstraction function to get Feature-flag value from the provider
 * @param {string} name feature-flag name
 * @param {boolean} defaultValue to be returned if something wrong
 * @param {object} contextAddition additional context to be assigned to the base one
 * @returns {boolean} feature-flag value
 * @async
 */
const getFeatureFlag = async (name, defaultValue, contextAddition) => {
  var _window;
  const {
    featureToggle
  } = (_window = window) === null || _window === void 0 ? void 0 : _window.DMCP;
  if (!featureToggle) return defaultValue;
  const baseContext = getFeatureContext();
  const context = contextAddition ? {
    ..._algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.baseContext,
    ...contextAddition
  } : baseContext;
  return featureToggle === null || featureToggle === void 0 ? void 0 : featureToggle.getValue(name, defaultValue, context);
};


/***/ }),

/***/ "./src/algolia-utils.js":
/*!******************************!*\
  !*** ./src/algolia-utils.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   utils: () => (/* binding */ utils)
/* harmony export */ });
function _objectEntries(obj) {
  var entries = [];
  var keys = Object.keys(obj);
  for (var k = 0; k < keys.length; k++) entries.push([keys[k], obj[keys[k]]]);
  return entries;
}
/* eslint-disable no-console */
/** @module utils */
const siteNameToSiteId = {
  educator: 'learner'
};
const localeToSite = {
  us: 'us',
  ca: 'ca',
  gb: 'uk'
};

// common helper functions, extend here
const utils = {
  returnConfigProperty(obj, key, defaultValue) {
    // eslint-disable-next-line no-var
    var res = '';
    if (obj && Object.getOwnPropertyNames(obj).length !== 0 && Object.prototype.hasOwnProperty.call(obj, key)) {
      res = obj[key];
    } else if (defaultValue) {
      console.error("Missing ".concat(key, " from config! Using default value instead - ").concat(defaultValue, "."));
      res = defaultValue;
    } else {
      console.error("Missing ".concat(key, " from config!"));
      res = undefined;
    }
    return res;
  },
  elementExists(el) {
    if (el === undefined) {
      return false;
    }
    return document.body.contains(document.querySelector(el));
  },
  getWidgetContainer(widgetConfig) {
    let key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'container';
    const containerName = this.returnConfigProperty(widgetConfig, key);
    return this.getContainerNode(containerName);
  },
  getContainerNode(selectorOrHTMLElement) {
    const isSelectorString = typeof selectorOrHTMLElement === 'string';
    const elem = isSelectorString ? document.querySelector(selectorOrHTMLElement) : selectorOrHTMLElement;
    const isDomElement = elem instanceof HTMLElement || Boolean(elem) && elem.nodeType > 0;
    if (isDomElement) {
      return elem;
    }
    let errorMessage = 'Container must be `string` or `HTMLElement`.';
    if (isSelectorString) {
      errorMessage += " Unable to find ".concat(selectorOrHTMLElement);
    }
    console.error(errorMessage);
    return null;
  },
  // TODO: use URLSearchParams to parse query
  getQueryObject() {
    let query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;
    return query.replace('?', '').split('&').reduce((acc, curr) => {
      const [key, value] = decodeURIComponent(curr).replace(/\+/g, ' ').split('=') || [];
      return {
        ...acc,
        [key]: value
      };
    }, {});
  },
  getCategorySlug(names) {
    let result = '';
    // TODO: Array.map and Array.join()
    names === null || names === void 0 ? void 0 : names.forEach(name => {
      result += "/".concat(this.encodeName(name));
    });
    return result;
  },
  encodeName(name) {
    return name.split(' ').map(encodeURIComponent).join('+');
  },
  decodeName(name) {
    return name.split('+').map(decodeURIComponent).join(' ');
  },
  removePageNumberFromUrl(url) {
    const urlWithoutPageNumber = url.match(/\?page=([0-9]+)&/) ? url.replace(/page=([0-9]+)&/, '') : url.replace(/(\?|&)?page=([0-9]+)/, '');
    window.location.href = urlWithoutPageNumber;
  },
  applyCategoryURL(cat) {
    const cut = cat !== undefined ? cat : '';
    const url = window.location.toString();
    const baseSearchUrlEndIndex = url.indexOf('.html') + '.html'.length;
    const newUrl = "".concat(url.substring(0, baseSearchUrlEndIndex)).concat(cut).concat(window.location.search);
    this.removePageNumberFromUrl(newUrl);
  },
  /**
   * getURLParamValue
   * @description finds the URL parametr by name and returnes it's value
   * @param {sting} paramName - name of the parameter value of which we need to get
   * @returns {string|undefined} parametr's value if found, or undefined if not
   */
  getURLParamValue(paramName) {
    var _list$find;
    if (!paramName) return undefined;
    const {
      location
    } = window;
    const {
      _list = []
    } = new URLSearchParams((location === null || location === void 0 ? void 0 : location.search) || '');
    if (!_list.length) return undefined;
    return (_list$find = _list.find(_ref => {
      let {
        name
      } = _ref;
      return name === paramName;
    })) === null || _list$find === void 0 ? void 0 : _list$find.value;
  },
  XssHtmlSanitizer(str) {
    const decoder = document.createElement('div');
    decoder.textContent = str;
    return decoder.innerHTML;
  },
  // TODO: we can use fetch()
  ajaxGet(url, callback) {
    let async = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
    // compatible with IE7+, Firefox, Chrome, Opera, Safari
    const xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = () => {
      if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
        if (xmlhttp.getResponseHeader('content-type').indexOf('text/html') >= 0) {
          callback(xmlhttp.responseText);
        } else {
          callback(JSON.parse(xmlhttp.responseText));
        }
      }
    };
    xmlhttp.open('GET', url, async);
    xmlhttp.send();
  },
  // TODO: we can use fetch()
  ajaxPost(url, callback, errorCallback, params, headersParams) {
    let async = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;
    const http = new XMLHttpRequest();
    http.open('POST', url, async);
    // Send the proper header information along with the request
    http.setRequestHeader('Content-type', 'application/json');
    _objectEntries(headersParams).forEach(_ref2 => {
      let [key, value] = _ref2;
      http.setRequestHeader(key, value);
    });
    http.onreadystatechange = () => {
      // Call a function when the state changes to finished.
      if (http.readyState === 4) {
        if (http.status === 200) {
          if (http.getResponseHeader('content-type').indexOf('text/html') >= 0) {
            callback(http.responseText);
          } else {
            callback(JSON.parse(http.responseText));
          }
        } else {
          errorCallback(http.responseText);
        }
      }
    };
    http.send(JSON.stringify(params));
  },
  isTabletOrMobile() {
    // returns true for mobile or tablet, false for desktop
    return window.innerWidth <= 768 || navigator.userAgent.indexOf('Mobi') > -1;
  },
  documentReady(fn) {
    // see if DOM is already available
    if (document.readyState === 'complete' || document.readyState === 'interactive') {
      // call on next available tick
      setTimeout(fn, 1);
    } else {
      document.addEventListener('DOMContentLoaded', fn);
    }
  },
  getPageName(url) {
    let pageName = false;
    if (url) {
      const urlArr = url.match(/[^/\\&?]+?.html(?=([?&].*$|$))/);
      if (urlArr && Array.isArray(urlArr)) {
        // eslint-disable-next-line prefer-destructuring
        pageName = urlArr[0];
      }
    }
    return pageName;
  },
  removePreloader() {
    if (utils.elementExists('.par-main') && document.querySelector('.par-main').classList.contains('js-preloader')) {
      document.querySelector('.par-main').classList.remove('js-preloader');
    }
  },
  // Method to search and replace urls on the page
  replaceUrls(stringToReplace, replaceWith) {
    const anchors = document.getElementsByTagName('a');
    console.info("anchors.length: ".concat(anchors.length));
    for (let i = 0; i < anchors.length; i++) {
      anchors[i].href = anchors[i].href.replace(stringToReplace, replaceWith);
    }
  },
  applyFocus(selector) {
    const element = document.querySelector(selector);
    if (element) {
      element.firstElementChild.focus();
    }
  },
  // TODO: It can crash on parsing
  getItemLocalStorage(key) {
    if (localStorage.getItem(key)) {
      return JSON.parse(localStorage.getItem(key));
    }
    return [];
  },
  setItemLocalStorage(key, value) {
    localStorage.setItem(key, value);
  },
  existsInLocalStorage(key) {
    return Object.prototype.hasOwnProperty.call(localStorage, key);
  },
  removeFromLocalStorage(key) {
    // TODO: no need to check if node exists
    if (this.getItemLocalStorage(key)) {
      localStorage.removeItem(key);
    }
  },
  generateUniqueID() {
    return Math.floor(Math.random() * Date.now());
  },
  // Method returns decoded last element of current path
  getLastPathElement() {
    let lastPathEl = '';
    const {
      location = {}
    } = window;
    const {
      pathname = null
    } = location;
    if (pathname && pathname.length > 0) {
      // remove slash at the end of the path
      const validPath = pathname.replace(/(.*[^/])[/]*$/, '$1');
      // get last element of current path, replace slash unicode char with replacement string
      lastPathEl = validPath.substring(validPath.lastIndexOf('/') + 1).replace(/U\+002F/g, '%2F');
    }
    return this.decodeName(lastPathEl);
  },
  appendChildElement(parent, child) {
    parent.appendChild(child);
  },
  getSecondParent(child) {
    return child.parentElement.parentElement;
  },
  getSiteSyncedSibling(sitename, aisWidget, statsContainer) {
    if (sitename === 'educator') {
      return utils.getWidgetContainer(statsContainer, 'stats-selector');
    }
    return aisWidget.container;
  },
  isSearchOrPLPPage() {
    var _dataLayer$pageInfoKe;
    const dataLayer = window.dataLayer || [];
    const pageInfoKey = Object.keys(dataLayer).find(key => typeof dataLayer[key].pageInfo !== 'undefined');
    const pageCategory = (_dataLayer$pageInfoKe = dataLayer[pageInfoKey]) === null || _dataLayer$pageInfoKe === void 0 ? void 0 : _dataLayer$pageInfoKe.pageInfo.pageCategory;
    return pageCategory === 'Search Results Page' || pageCategory === 'Product List';
  },
  getCookie(name) {
    const cookie = {};
    document.cookie.split(';').forEach(el => {
      const [key, value] = el.split('=');
      cookie[key.trim()] = value;
    });
    return cookie[name] ? decodeURIComponent(cookie[name]) : null;
  },
  existsInCookies(name) {
    return this.getCookie(name) !== null;
  },
  transformConfigurationSearchUrl(configurationSearchUrl) {
    const allowedPageSelectors = ['.content-data.'];
    const selector = allowedPageSelectors.find(sel => window.location.href.includes(sel));
    if (selector) {
      return configurationSearchUrl.replace('.html', "".concat(selector, "html"));
    }
    return configurationSearchUrl;
  },
  getDaysBeforeSubscriptionExpires() {
    // expirationTime global variable defined in gtm
    // TODO: It's a potential critical exception
    // Has to be const { expirationTime } = window;
    return expirationTime;
  },
  addFacetLabel(container, facet, label) {
    let labelForFacet = facet;
    if (labelForFacet.startsWith('.')) {
      labelForFacet = labelForFacet.replace('.', '');
    }
    container.insertAdjacentHTML('beforebegin', "<h2 class=\"facet-title\">".concat(label, "</h2>"));
  },
  fromEntries(iterable) {
    return [...iterable].reduce((obj, _ref3) => {
      let [key, val] = _ref3;
      // eslint-disable-next-line no-param-reassign
      obj[key] = val;
      return obj;
    }, {});
  },
  // TODO: seems like function name is incorrect: no JSON parsing inside
  getValueFromJsonObjectsArray(jsonObjectsArray, key) {
    let value = '';
    if (jsonObjectsArray != null && jsonObjectsArray.length > 0) {
      jsonObjectsArray.forEach(element => {
        if (element[key] !== undefined) {
          value = element[key];
        }
      });
    }
    return value;
  },
  handleFilterLabel(facetConfig, defaultLabel) {
    const container = this.getContainerNode(facetConfig.container);
    if (!(container !== null && container !== void 0 && container.parentElement.querySelector('.facet-title'))) {
      const facetLabel = this.returnConfigProperty(facetConfig, 'container');
      const filterLabel = this.returnConfigProperty(facetConfig, 'filter-label', defaultLabel);
      this.addFacetLabel(container, facetLabel, filterLabel);
    }
  },
  getSwitchIdTitleQueryParam() {
    return this.getQueryObject().switchtitleid ? "switchtitleid=".concat(this.getQueryObject().switchtitleid) : '';
  },
  /**
   * sanitizeStr
   * @description replaces ">" and "<" characters in the provided
   *              string, to corresponding charcodes (sanitizes string
   *              from script injections)
   * @param {string} text - string to sanitize
   * @returns sanitized string
   */
  sanitizeStr() {
    let text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    return text.replace(/(<)/g, '&#60;').replace(/(>)/g, '&#62;');
  },
  /**
   * getLocaleFromCookie
   * @returns {string} locale value stored in cookie
   */
  getLocaleFromCookie() {
    return utils.getCookie('geotargetchosenlocale');
  },
  /**
   * getLocaleSubst
   * @description gets the matches of 'store' and locale substring in current the URL
   * @returns {array} matches in URL
   */
  getLocaleSubst() {
    const {
      location
    } = window;
    const {
      pathname
    } = location;
    return pathname.match(/^(\/store)?\/en-([a-zA-Z-]{2,2})[/.]/);
  },
  /**
   * isHybris
   * @description checks by URL if the current page is on Hybris
   * @returns {boolean}
   */
  isHybris() {
    const match = utils.getLocaleSubst();
    return !!match && match[1] === '/store';
  },
  /**
   * getLocaleFromURL
   * @returns {string} Locale value from the current URL
   */
  getLocaleFromURL() {
    const match = utils.getLocaleSubst();
    return match && match[2].toLowerCase();
  },
  /**
   * getLocale
   * @returns {string} Locale from URL or Cookie node
   */
  getLocale() {
    return (utils.getLocaleFromURL() || utils.getLocaleFromCookie() || '').toLowerCase();
  },
  /**
   * normalizeSiteName
   * @description replaces "educator" with "learner" value
   * @param {string} name - site name to normalize
   * @returns {string} Normalized SiteName
   */
  normalizeSiteName(name) {
    return siteNameToSiteId[name] || name;
  },
  /**
   * getNormalizedLocale
   * @description replaces "gb" with "uk"
   * @returns {string} normalized locale, us by default
   */
  getNormalizedLocale() {
    return localeToSite[utils.getLocale()] || 'us';
  },
  /**
   * getPiUserId
   * @description gets user-id from piSession
   * @returns {string | null}
   */
  getPiUserId() {
    const {
      piSession
    } = window;
    if (!piSession) return null;
    return piSession.userId();
  }
};


/***/ }),

/***/ "./src/analytics.js":
/*!**************************!*\
  !*** ./src/analytics.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleDataLayerAnalytics: () => (/* binding */ handleDataLayerAnalytics),
/* harmony export */   setAnalyticsToken: () => (/* binding */ setAnalyticsToken)
/* harmony export */ });
/* harmony import */ var _user_info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./user-info */ "./src/user-info.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./algolia-utils */ "./src/algolia-utils.js");
/* eslint-disable no-param-reassign */
/** @module analytics */


const initialAnalyticsData = [];
const setAnalyticsToken = search => {
  search.on('render', () => {
    (0,_user_info__WEBPACK_IMPORTED_MODULE_0__.getUserToken)().then(token => {
      setAnalyticsTokenAttribute(token);
    }).catch(error => {
      // eslint-disable-next-line no-console
      console.error("".concat(error));
    });
  });
};
const setAnalyticsTokenAttribute = userToken => {
  document.querySelectorAll('[data-search-objectid]').forEach(el => {
    el.setAttribute('data-search-usertoken', userToken);
  });
};
const setInitialAnalyticsData = (query, currentTab, numberOfHits) => {
  initialAnalyticsData.push({
    searchTerm: query || '',
    resultTab: currentTab,
    resultCount: numberOfHits
  });
};
const updateAnalyticsEvent = (dataLayerSearchEvent, currentTab, numberOfHits) => {
  dataLayerSearchEvent.resultTab = currentTab;
  dataLayerSearchEvent.resultCount = numberOfHits;
};
const pushAnalyticsEventInDataLayer = (query, currentTab, numberOfHits) => {
  window.dataLayer.push({
    event: 'searchResults',
    searchTerm: query || '',
    resultTab: currentTab,
    resultCount: numberOfHits
  });
};
const handleDataLayerAnalytics = (currentTab, numberOfHits) => {
  window.dataLayer = window.dataLayer || [];
  const dataLayerSearchEvent = window.dataLayer.find(element => element.event === 'searchResults');
  const currentTabInitialState = initialAnalyticsData.find(element => element.resultTab === currentTab);
  const query = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getQueryObject().aq;
  if (!dataLayerSearchEvent) {
    pushAnalyticsEventInDataLayer(query, currentTab, numberOfHits);
  } else if (currentTabInitialState) {
    updateAnalyticsEvent(dataLayerSearchEvent, currentTabInitialState.resultTab, currentTabInitialState.resultCount);
  } else {
    updateAnalyticsEvent(dataLayerSearchEvent, currentTab, numberOfHits);
    setInitialAnalyticsData(query, currentTab, numberOfHits);
  }
};


/***/ }),

/***/ "./src/educator/auto-suggest-educator.js":
/*!***********************************************!*\
  !*** ./src/educator/auto-suggest-educator.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../widgets/autosuggest/auto-suggest */ "./src/widgets/autosuggest/auto-suggest.js");
/* harmony import */ var _widgets_autosuggest_redirect_isbn13__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../widgets/autosuggest/redirect-isbn13 */ "./src/widgets/autosuggest/redirect-isbn13.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/* harmony import */ var _templates_educator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./templates-educator */ "./src/educator/templates-educator.js");
/* harmony import */ var _algolia_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../algolia-common */ "./src/algolia-common.js");
/* harmony import */ var _widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../widgets/autosuggest/recent-search */ "./src/widgets/autosuggest/recent-search.js");
/* harmony import */ var _analytics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../analytics */ "./src/analytics.js");
/* eslint-disable no-param-reassign */
/* eslint-disable no-underscore-dangle */
/** @module auto-suggest-educator */








let initialQuery = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getQueryObject().aq;
const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_4__.algoliaConfig.config, 'site-name');
const isAnz = siteName === 'anz';
const instanceParamsJSON = (_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer === null || _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer === void 0 ? void 0 : _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer.getAttribute('data-fp-attributes')) || '{}';
const onSelectHandler = query => {
  if ((0,_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.canRedirectToPDP)(query)) {
    const hit = _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.suggestions.renderState[_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.indexName].hits.hits[0];
    const linkUrlPrefix = _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig['link-url-prefix'];
    const productUrl = "".concat(linkUrlPrefix).concat((0,_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.getRedirectUrl)(query, hit));
    openPDP(productUrl, hit.isbn13);
  } else if ((0,_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.isValidAccessCode)(query)) {
    const redeemPageUrl = _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig['redeem-page-url'];
    const redeemRedirectPageUrl = "".concat(redeemPageUrl, "?accessCode=").concat((0,_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.isValidAccessCode)(query));
    window.location.href = redeemRedirectPageUrl;
  } else if (query.length >= _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig.minLength) {
    const url = generateSearchUrl(query);
    const searchQueryMaxLength = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_4__.algoliaConfig.search, 'query-max-length');
    if (searchQueryMaxLength && query.length > searchQueryMaxLength) {
      const limitedQuery = query.substring(0, searchQueryMaxLength);
      const limitedUrl = generateSearchUrl(limitedQuery);
      (0,_widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_5__.setRecentSearches)(limitedQuery, limitedUrl);
    } else {
      (0,_widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_5__.setRecentSearches)(query, url);
    }
    window.location.href = url;
  }
};
const onRenderHandler = (query, indices, nbHits) => {
  var _indices$;
  const queryLength = document.querySelector('.search-box-input').value.trim().length;
  const hasRecents = queryLength === 0 && ((0,_widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_5__.hasRecentSearches)() || query === (0,_widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_5__.getRecentlyViewed)());
  _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer.querySelector('#algoliaAutosuggest').classList.toggle('recent-searches', hasRecents);
  const html = hasRecents ? renderRecents(indices) : renderSearchResults(query, indices, nbHits);
  if (((_indices$ = indices[0]) === null || _indices$ === void 0 ? void 0 : _indices$.results.query) === initialQuery) {
    initialQuery = null;
  }
  return html;
};
const renderRecents = indices => {
  // Recent searches
  let html = (0,_widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_5__.hasRecentSearches)() ? _templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.recentSearch.recentSearchGroup((0,_widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_5__.getRecentSearches)().map(_templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.recentSearch.recentSearch).join(''), 'RECENT SEARCHES') : '';
  // Recently viewed
  if ((0,_widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_5__.hasRecentlyViewed)()) {
    var _getRecentlyViewed;
    const list = (_getRecentlyViewed = (0,_widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_5__.getRecentlyViewed)()) === null || _getRecentlyViewed === void 0 ? void 0 : _getRecentlyViewed.split(' ').map(recentCookie => {
      var _indices$2, _indices$2$hits;
      return (_indices$2 = indices[0]) === null || _indices$2 === void 0 ? void 0 : (_indices$2$hits = _indices$2.hits) === null || _indices$2$hits === void 0 ? void 0 : _indices$2$hits.find(hit => recentCookie === hit.isbn13[0]);
    }).filter(e => e).map(_templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.recentSearch.recentlyViewed).join('');
    html += _templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.recentSearch.recentSearchGroup(list, 'RECENTLY VIEWED');
  }
  // Clear history button
  if (html.length > 0) {
    var _document$querySelect;
    html = _templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.recentSearch.clearHistory() + html;
    (_document$querySelect = document.querySelector('.close-recents-btn')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.classList.remove('hide');
    if (_algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.isTabletOrMobile()) {
      var _document$querySelect2;
      (_document$querySelect2 = document.querySelector('.search-box-close-icon')) === null || _document$querySelect2 === void 0 ? void 0 : _document$querySelect2.classList.add('hide');
    }
  }
  return html;
};
const renderSearchResults = (query, indices, nbHits) => {
  var _indices$5, _indices$5$hits, _indices$6, _indices$6$hits, _indices$7, _indices$7$hits;
  const searchButton = document.querySelector('.search-box-icon');
  const clearQueryButton = document.querySelector('.search-close-btn');
  if ((0,_widgets_autosuggest_redirect_isbn13__WEBPACK_IMPORTED_MODULE_1__.isISBN13)(query) || initialQuery) {
    var _indices$3, _indices$4;
    if (((_indices$3 = indices[0]) === null || _indices$3 === void 0 ? void 0 : _indices$3.results.query) === initialQuery || ((_indices$4 = indices[1]) === null || _indices$4 === void 0 ? void 0 : _indices$4.results.query) === initialQuery) {
      searchButton.classList.add('hide');
      clearQueryButton.classList.add('show');
      initialQuery = null;
    }
    return '';
  }
  // Fix for Algolia. If there are more than one indices returned, queryId will not be set
  // inside hit, but information exists within the indices result.
  let counter = 0;
  const setQueryIDAndPosition = (hit, queryID) => {
    if (!hit.__queryID) {
      hit.__queryID = queryID;
      hit.__position = ++counter;
    }
    return hit;
  };
  let instanceParams = {};
  try {
    if (instanceParamsJSON) {
      instanceParams = JSON.parse(instanceParamsJSON);
    }
  } catch (error) {
    // do nothing
  }
  const {
    productsTitle = 'PRODUCTS',
    suggestedTitle = 'SUGGESTED SEARCHES'
  } = instanceParams;
  const redirectsListHTML = indices === null || indices === void 0 ? void 0 : (_indices$5 = indices[2]) === null || _indices$5 === void 0 ? void 0 : (_indices$5$hits = _indices$5.hits) === null || _indices$5$hits === void 0 ? void 0 : _indices$5$hits.map(hit => setQueryIDAndPosition(hit, indices[1].results.queryID)).map(_templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.autosuggest.hits[2]).join('');
  const pagesHTML = redirectsListHTML ? _templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.autosuggest.group(redirectsListHTML, suggestedTitle, 'as-goup_redirects') : '';
  const productsListHTML = "".concat(indices === null || indices === void 0 ? void 0 : (_indices$6 = indices[1]) === null || _indices$6 === void 0 ? void 0 : (_indices$6$hits = _indices$6.hits) === null || _indices$6$hits === void 0 ? void 0 : _indices$6$hits.map(hit => setQueryIDAndPosition(hit, indices[1].results.queryID)).map(_templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.autosuggest.hits[1]).join(''), "\n      ").concat(indices === null || indices === void 0 ? void 0 : (_indices$7 = indices[0]) === null || _indices$7 === void 0 ? void 0 : (_indices$7$hits = _indices$7.hits) === null || _indices$7$hits === void 0 ? void 0 : _indices$7$hits.map(hit => setQueryIDAndPosition(hit, indices[0].results.queryID)).map(_templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.autosuggest.hits[0]).join(''));
  const productsHTML = productsListHTML.trim() ? _templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.autosuggest.group(productsListHTML, productsTitle, 'as-goup_products') : '';
  let html = "".concat(pagesHTML).concat(productsHTML);
  if (html.length > 0) {
    html += _templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.autosuggest.footer(query, indices, nbHits);
  }
  return html;
};
const onRefineHandler = query => {
  _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.suggestions.helper.setQueryParameter('filters', !(0,_widgets_autosuggest_redirect_isbn13__WEBPACK_IMPORTED_MODULE_1__.isISBN13)(query) ? '(isShownInDropDownFlag:"true" AND isAllProductsAreUnavailable:"false")' : '');
};
const generateSearchUrl = query => {
  const searchPageUrl = _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig[isAnz ? 'search-result-url' : 'search-url'];
  if (query === '') {
    return "".concat(searchPageUrl);
  }
  return "".concat(searchPageUrl, "?").concat(isAnz ? 'query' : 'aq', "=").concat(encodeURIComponent(query));
};
if (_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer) {
  const widgets = [instantsearch.widgets.configure({
    hitsPerPage: _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig.autocomplete.maxResults,
    filters: '(isShownInDropDownFlag:"true" AND isAllProductsAreUnavailable:"false")',
    clickAnalytics: true,
    optionalWords: ''
  }), (0,_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.customAutocomplete)({
    container: _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer,
    onSelect: onSelectHandler,
    onRender: onRenderHandler,
    onRefine: onRefineHandler,
    generateSearchUrl,
    ariaLabel: 'autocomplete results',
    escapeHTML: _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig.escapeHTML,
    autoFocus: false,
    minLength: _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig.minLength
  }), instantsearch.widgets.index({
    indexName: _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig['category-index-name']
  }).addWidgets([instantsearch.widgets.configure({
    filters: '',
    hitsPerPage: _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig.autocomplete.maxCategories,
    clickAnalytics: true
  })])];
  _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig['redirect-index-name'] && widgets.push(instantsearch.widgets.index({
    indexName: _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig['redirect-index-name']
  }).addWidgets([instantsearch.widgets.configure({
    filters: '',
    hitsPerPage: (_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig === null || _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig === void 0 ? void 0 : _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig.maxRedirects) || 3,
    clickAnalytics: false
  })]));
  _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.suggestions.addWidgets(widgets);
  _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.suggestions.start();
  (0,_analytics__WEBPACK_IMPORTED_MODULE_6__.setAnalyticsToken)(_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.suggestions);

  // Set initial state
  if (initialQuery && initialQuery.trim().length > 0) {
    _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer.querySelector('input').value = initialQuery;
    _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.suggestions.setUiState({
      [_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.indexName]: {
        query: decodeURIComponent(initialQuery)
      },
      [_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestConfig['category-index-name']]: {
        query: decodeURIComponent(initialQuery)
      }
    });
  }
  const searchElement = _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer.querySelector('.search-box');
  if (searchElement) {
    // append search buttons for mobile
    _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer.insertAdjacentHTML('beforeend', _templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.searchButtonMobile);
    searchElement.insertAdjacentHTML('afterbegin', _templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.closeSearchButtonMobile);
    searchElement.insertAdjacentHTML('beforeend', _templates_educator__WEBPACK_IMPORTED_MODULE_3__.templates.closeRecentHistoryBtn);
    _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.autoSuggestContainer.querySelector('.close-recents-btn').addEventListener('click', _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_0__.closeAutoSuggest);
  }
}

/***/ }),

/***/ "./src/educator/templates-educator.js":
/*!********************************************!*\
  !*** ./src/educator/templates-educator.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   templates: () => (/* binding */ templates)
/* harmony export */ });
/* harmony import */ var _algolia_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../algolia-common */ "./src/algolia-common.js");
/* harmony import */ var _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../widgets/autosuggest/auto-suggest */ "./src/widgets/autosuggest/auto-suggest.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/* harmony import */ var _hit_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hit-utils */ "./src/hit-utils.js");
function _objectValues(obj) {
  var values = [];
  var keys = Object.keys(obj);
  for (var k = 0; k < keys.length; k++) values.push(obj[keys[k]]);
  return values;
}
/* eslint-disable no-underscore-dangle */




const currency = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.hits, 'currency-symbol');
const renderResultCount = (query, indices, nbHits) => {
  if (!indices.length || !indices[0].hits.length) return '';
  const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'site-name');
  const linkUrlPrefix = _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_1__.autoSuggestConfig['link-url-prefix'];
  const searchUrl = siteName === 'anz' ? "".concat(_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_1__.autoSuggestConfig['search-result-url'], "?query=").concat(encodeURIComponent(query)) : "".concat(_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_1__.autoSuggestConfig['search-url'], "?aq=").concat(encodeURIComponent(query));
  return "<div class=\"ui-menu-item__result-wrap\">\n    <a\n      href=\"".concat(nbHits === 1 ? "".concat(linkUrlPrefix).concat(indices[0].hits[0].url) : searchUrl, "\"\n      tabindex=\"-1\"\n      id=\"search-as_all-results\"\n      class=\"ui-menu-item__found-and-view autosuggest-selectable\"\n    >\n      <span>").concat(nbHits, " ").concat(nbHits !== 1 ? 'items' : 'item', " found </span>\n      <span>").concat(nbHits !== 1 ? 'view all' : 'view', "</span>\n    </a>\n  </div>");
};
const customRefinementList = (items, widgetParams) => "\n  <div class='ais-Panel'>\n    <div class='ais-Panel-header'>\n      <span id='".concat(widgetParams.attribute, "'>").concat(widgetParams.label, "</span>\n    </div>\n  </div>\n  <div class='ais-Panel-body'>\n    <div>\n      <div class='ais-RefinementsList'>\n        <div class='ais-RefinementsList-list' role='group' aria-labelledby='").concat(widgetParams.attribute, "'>\n          ").concat(items.map(item => "\n                <div class='ais-RefinementList-item ".concat(item.isRefined ? 'ais-RefinementList-item--selected' : '', "' data-value=\"").concat(item.value, "\">\n                  <div>\n                    <label class='ais-RefinementList-label'>\n                      <input type=\"checkbox\" class=\"ais-RefinementList-checkbox\" value=\"").concat(item.value, "\"\n                        ").concat(item.isRefined ? 'checked' : '', ">\n                      <span class=\"ais-RefinementList-labelText\">").concat(item.value, "</span>\n                      <span class=\"ais-RefinementList-count\">(").concat(item.count, ")</span>\n                    </label>\n                  </div>\n                </div>\n              ")).join(''), "\n        </div>\n      </div>\n    </div>\n  </div>");
const renderCategoryItem = (hit, index) => {
  var _hit$url, _hit$categoryPath;
  const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'site-name');
  const categoryPath = siteName === 'anz' ? _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getCategorySlug((_hit$url = hit.url) === null || _hit$url === void 0 ? void 0 : _hit$url.substring(1).split('/')) : _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getCategorySlug((_hit$categoryPath = hit.categoryPath) === null || _hit$categoryPath === void 0 ? void 0 : _hit$categoryPath.split(' > ')).replaceAll('%2F', 'U+002F');
  const url = "".concat(_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_1__.autoSuggestConfig['search-url']).concat(categoryPath);
  const indexName = _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_1__.autoSuggestConfig['category-index-name'];
  const analyticsAttributes = "data-search-queryid=\"".concat(hit.__queryID, "\" \n    data-search-objectid=\"").concat(hit.objectID, "\" data-search-position=\"").concat(hit.__position, "\"\n    data-search-indexname=\"").concat(indexName, "\"");
  return "<li class=\"ui-menu-item\" tabindex=\"-1\">\n    <a\n      href=\"".concat(url, "\"\n      id=\"search-as_c_").concat(index, "\"\n      tabindex=\"-1\"\n      class=\"search-subject ui-menu-item autosuggest-selectable\" aria-details=\"Press enter to see ").concat(hit.name, "\" \n      ").concat(analyticsAttributes, "\n    >\n      <p class=\"search-subject__title\">\n        <span>").concat(instantsearch.highlight({
    attribute: 'name',
    hit
  }), "</span>\n      </p>\n    </a>\n  </li>");
};

/**
 * renderAutoSuggestListGroup
 * @description template of a sublist in the Autosuggest (groped items) with a heading
 * @param {string} content - HTML with subotions to be inserted into the group
 * @param {string} title - Title of the options-group
 * @param {string} className - specific class-name to be added to the UL element
 * @returns {string} - li element with the heading and the sublist
 */
const renderAutoSuggestListGroup = function () {
  let content = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  let title = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  let className = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
  return "\n  ".concat(title ? "<h2 class=\"search-subject_group__heading\">".concat(title, "</h2>") : '', "\n  <ul class=\"search-subject_group__wrapper ").concat(className, "\" aria-label=\"").concat(title, "\">\n    ").concat(content, "\n  </ul>\n");
};

/**
 * renderRedirectItem
 * @description template for the redirect option in autoSuggest
 * @param {object} hit - autosuggest-hit data
 * @returns {string} - HTML with the Redirect-option
 */
const renderRedirectItem = (hit, index) => {
  var _hit$_highlightResult, _hit$_highlightResult2, _hit$_highlightResult3, _matched$;
  const matched = hit === null || hit === void 0 ? void 0 : (_hit$_highlightResult = hit._highlightResult) === null || _hit$_highlightResult === void 0 ? void 0 : (_hit$_highlightResult2 = _hit$_highlightResult.keywords) === null || _hit$_highlightResult2 === void 0 ? void 0 : (_hit$_highlightResult3 = _hit$_highlightResult2.filter(item => item.matchLevel === 'full')) === null || _hit$_highlightResult3 === void 0 ? void 0 : _hit$_highlightResult3.sort((a, b) => ((b === null || b === void 0 ? void 0 : b.fullyHighlighted) || false) - ((a === null || a === void 0 ? void 0 : a.fullyHighlighted) || false));
  return matched && (_matched$ = matched[0]) !== null && _matched$ !== void 0 && _matched$.value ? "<li class=\"ui-menu-item\" tabindex=\"-1\">\n    <a\n      href=\"".concat(hit === null || hit === void 0 ? void 0 : hit.redirect_url, "\"\n      tabindex=\"-1\"\n      id=\"search-as_r_").concat(index, "\"\n      class=\"search-subject ui-menu-item autosuggest-selectable\" aria-details=\"Press enter to see ").concat(hit.name, "\"\n    >\n      <p class=\"search-subject__title\">\n        <span>\n          \u201C").concat(matched[0].value, "\u201D\n        </span>&nbsp;<span class=\"screenreader\">go to</span><span class=\"search-subject__pagename\">").concat(hit.name, "</span>\n      </p>\n    </a>\n  </li>") : '';
};
const renderAutoSuggestHitItem = (hit, index) => {
  const isMultipleISBN = Array.isArray(hit.isbn13) && hit.isbn13.length > 1;
  const price = parseFloat(hit.lowestProgramPriceValue).toFixed(2);
  const discountedPrice = parseFloat(hit.lowestDiscountedProgramPriceValue).toFixed(2);
  const indexName = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'algolia-index-name');
  const analyticsAttributes = "data-search-queryid=\"".concat(hit.__queryID, "\"\n    data-search-objectid=\"").concat(hit.objectID, "\" data-search-position=\"").concat(hit.__position, "\"\n    data-search-indexname=\"").concat(indexName, "\"");
  const url = "".concat(_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_1__.autoSuggestConfig['link-url-prefix']);
  const imageUrlPrefix = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.hits, 'picture-url-prefix');
  const elem = "<li class=\"ui-menu-item\" tabindex=\"-1\">\n            <a href=\"".concat(url).concat(hit.url, "\"\n              tabindex=\"-1\"\n              id=\"search-as_h_").concat(index, "\"\n              class=\"search-product ui-menu-item autosuggest-selectable\"\n              aria-details=\"Press enter to see ").concat(hit.name, "\"\n              ").concat(analyticsAttributes, "\n              onclick=\"openPDP('").concat(url).concat(hit.url, "', '").concat(hit.isbn13[0], "');\"\n            >\n            <div class=\"search-product__image\"> \t   \n              <img src=\"").concat(imageUrlPrefix).concat(hit.smallThumbnail, "\"\n                alt=\"\"> \t\n            </div> \t\n            <div class=\"search-product__content\"> \t     \n              <p class=\"search-product__title\">\n                ").concat(instantsearch.highlight({
    attribute: 'name',
    hit
  }), "\n              </p> \t    \n              <p class=\"search-product__author\">").concat(instantsearch.highlight({
    attribute: 'authorsAggregated',
    hit
  }), "</p>\n                <div class=\"search-product__footer\">\n                  <div class=\"search-product__isbn\">\n                    ").concat(isMultipleISBN ? 'Multiple ISBNs available' : "ISBN-13: ".concat(hit.isbn13), "\n                  </div>\n                  <div>\n                    ").concat(price !== discountedPrice ? "<div class=\"search-product__old-price\" \n                          aria-label=\"".concat(currency).concat(price).concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getAriaMoSuffix(hit), "\">\n                          ").concat(currency).concat(price, " ").concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getMoSuffix(hit), "</div>") : "", "\n                    <div aria-label=\"").concat(currency).concat(discountedPrice).concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getAriaMoSuffix(hit), "\" \n                    class=\"search-product__price\">\n                    ").concat(isMultipleISBN ? "from ".concat(currency).concat(discountedPrice, " ").concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getMoSuffix(hit)) : "for ".concat(currency).concat(discountedPrice, " ").concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getMoSuffix(hit)), "\n                    </div>\t\t\n                  </div>\t\t\n                </div>  \t\n            </div>\n          </a>\n        </li>");
  return elem;
};
const renderHitItem = hit => {
  const baseUrl = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.hits, 'picture-url-prefix');
  const linkUrlPrefix = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.hits, 'link-url-prefix');
  const indexName = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'algolia-index-name');
  const analyticsAttributes = "data-search-queryid=\"".concat(hit.__queryID, "\" \n    data-search-objectid=\"").concat(hit.objectID, "\" data-search-position=\"").concat(hit.__position, "\"\n    data-search-indexname=\"").concat(indexName, "\"");
  const defaultThumbnail = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.hits, 'image-placeholder');
  const price = parseFloat(hit.lowestProgramPriceValue).toFixed(2);
  const discountedPrice = parseFloat(hit.lowestDiscountedProgramPriceValue).toFixed(2);
  const programImage = hit.smallThumbnail;
  const title = hit.name.replaceAll(/'/g, "\\'");
  const availableIsbns = [];
  Object.keys(hit.productAvailability).forEach(key => {
    if (hit.productAvailability[key] === true) {
      availableIsbns.push(key);
    }
  });
  let platforms = '';
  if (hit.platformId) {
    platforms = new Set(_objectValues(hit.platformId));
    platforms = [...platforms];
    if (platforms.length > 5) {
      platforms = platforms.slice(0, 5);
    }
    platforms = platforms.join(' | ');
  }
  let imgSrcUrl = '';
  switch (programImage) {
    case '':
    case undefined:
      imgSrcUrl = defaultThumbnail;
      break;
    default:
      imgSrcUrl = baseUrl + programImage;
  }
  const noOfAvailableIsbns = hit.availableOptions;
  const availableProdContent = noOfAvailableIsbns > 1 ? {
    product_card_isbn: 'Multiple ISBNs available',
    data_products_isbn13_attr: availableIsbns,
    product_card_label1: noOfAvailableIsbns,
    product_card_label2: 'options from'
  } : {
    product_card_isbn: "ISBN-13:&nbsp;".concat(availableIsbns),
    data_products_isbn13_attr: '',
    product_card_label1: hit.mainFormats,
    product_card_label2: 'for'
  };
  const editionId = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.generateUniqueID();
  const authorsId = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.generateUniqueID();
  const isbnId = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.generateUniqueID();
  const oldPriceId = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.generateUniqueID();
  const newPriceId = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.generateUniqueID();
  const optionsId = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.generateUniqueID();
  return "\n            <article class=\"programItem\" data-publication_date=\"".concat(hit.publicationDate, "\"\n            <a href=\"").concat(linkUrlPrefix).concat(hit.url, "\" \n            onclick=\"openPDP('").concat(linkUrlPrefix).concat(hit.url, "', '").concat(hit.isbn13[0], "');\">      \n            <a class=\"programItem__image\" ").concat(analyticsAttributes, " >\n                <figure>\n                  <img alt=\"\" src=\"").concat(imgSrcUrl, "\" />\n                </figure>\n              </a>\n              <div class=\"programItem__details\">\n                <div>\n                    <p class=\"programItem__title\">\n                    <a href=\"").concat(linkUrlPrefix).concat(hit.url, "\" ").concat(analyticsAttributes, "\n                    onclick=\"openPDP('").concat(linkUrlPrefix).concat(hit.url, "', '").concat(hit.isbn13[0], "');\"\n                    aria-describedby=\"").concat(editionId, " ").concat(authorsId, "\n                    ").concat(isbnId, " ").concat(optionsId, " ").concat(oldPriceId, " ").concat(newPriceId, "\">\n                    ").concat(hit.name, " </a> \n                    </p>\n                    <p class=\"programItem__edition\" id=\"").concat(editionId, "\">\n                    ").concat(hit.programEdition ? "".concat(hit.programEdition, " Edition") : '', "</p>\n                    <p class=\"programItem__author\" id=\"").concat(authorsId, "\">\n                    ").concat(hit.authorsAggregated ? hit.authorsAggregated : '', "</p>\n                </div>\n                <div class=\"programItem__options\">\n                  <div>\n                    <p class=\"programItem__isbn\" id=\"").concat(isbnId, "\">").concat(availableProdContent.product_card_isbn, "</p>\n                  </div>\n                  <p class=\"programItem__price\">\n                    <a ").concat(analyticsAttributes, " aria-describedby=\"").concat(optionsId, "_label\">\n                      <strong id=\"").concat(optionsId, "\"\n                      ").concat(availableProdContent.data_products_isbn13_attr ? "data-products-isbn13=\"[".concat(availableProdContent.data_products_isbn13_attr, "]\"") : '', ">\n                      ").concat(availableProdContent.product_card_label1, " ").concat(availableProdContent.product_card_label2, "\n                      </strong>\n                      ").concat(price === discountedPrice ? "<strong id=\"".concat(optionsId, "_label\">\n                            ").concat(currency).concat(price).concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getMoSuffix(hit), "</strong>") : "<samp class=\"programItem__clipped\" id=\"".concat(optionsId, "_label\"> \n                              <del>\n                                <span aria-hidden=\"true\">\n                                  ").concat(currency).concat(price).concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getMoSuffix(hit), "\n                                </span>\n                                <span class=\"screenreader\" id=\"").concat(oldPriceId, "\">\n                                  Old Price: ").concat(currency).concat(price).concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getAriaMoSuffix(hit), "\n                                </span>\n                              </del>\n                              <ins>\n                                <strong aria-hidden=\"true\">\n                                  ").concat(currency).concat(discountedPrice).concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getMoSuffix(hit), "\n                                </strong>\n                                <span class=\"screenreader\" id=\"").concat(newPriceId, "\">\n                                  New Price: ").concat(currency).concat(discountedPrice).concat(_hit_utils__WEBPACK_IMPORTED_MODULE_3__.hitUtils.getAriaMoSuffix(hit), "\n                                </span>\n                              </ins>\n                            </samp>"), "\n                    </a>\n                  </p>\n                </div>\n              </div>\n              </a>\n            </article>\n          ");
};
const refinementFacetTemplate = "<label class=\"{{cssClasses.label}}\">\n  <input type=\"checkbox\" class=\"{{cssClasses.checkbox}}\" value=\"{{label}}\" {{#isRefined}}checked=\"true\"{{/isRefined}}>\n  <span class=\"{{cssClasses.labelText}}\">{{label}}</span>\n  <span class=\"{{cssClasses.count}}\">({{count}})</span>\n</label>";
const searchButtonMobile = "\n  <button class=\"userNav__search\" aria-label=\"Search\" aria-controls=\"headerSearch\"></button>\n";
const closeSearchButtonMobile = "<button class=\"closeBtn\"></button>";
const closeRecentHistoryBtn = "<button class=\"close-recents-btn hide\" aria-label=\"Close recent searches\"></button>";
window.clearSearchHistory = function clearSearchHistory() {
  const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'site-name');
  document.cookie = "".concat(siteName, "-recent-searches=; Max-Age=0; path=/");
  document.cookie = "".concat(siteName, "-recently-viewed=; Max-Age=0; path=/");
  (0,_widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_1__.closeAutoSuggest)();
};
const renderRecentSearchGroup = function () {
  let content = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  let title = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  let className = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
  const elem = "\n    <h2 class=\"search-subject_group__heading ui-menu-item__recent-search-text\">".concat(title, "</h2>\n    <ul class=\"search-subject_group__wrapper ").concat(className, "\" role=\"group\">\n      ").concat(content, "\n    </ul>");
  return elem;
};

// This button has to have a role="link", because with "button" role,
// it allows the screen-reader to intercept user-events, and by that screen-reader
// disrupts the keyboard navigation within the auto-suggest
const renderClearHistory = () => {
  const elem = "<button\n      role=\"link\"\n      id=\"search-as_ch\"\n      class=\"ui-menu-item__clear-history autosuggest-selectable\"\n      tabindex=\"-1\"\n      onclick=\"clearSearchHistory();\n    \">\n      Clear history\n    </button>";
  return elem;
};
const renderRecentlyViewed = (recentlyViewed, index) => {
  const linkUrlPrefix = _widgets_autosuggest_auto_suggest__WEBPACK_IMPORTED_MODULE_1__.autoSuggestConfig['link-url-prefix'];
  const imageUrlPrefix = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.hits, 'picture-url-prefix');
  const elem = "<li class=\"ui-menu-item__recently-viewed\">\n          <a href=\"".concat(linkUrlPrefix).concat(recentlyViewed.url, "\"\n            id=\"search-as_rv_").concat(index, "\"\n            class=\"ui-menu-item autosuggest-selectable\"\n            tabindex=\"-1\"\n            aria-details=\"Press enter to see ").concat(recentlyViewed.title, "\"\n          >\n            <div class=\"search-product__image\">      \n              <img src='").concat(imageUrlPrefix).concat(recentlyViewed.smallThumbnail, "' alt=\"\">   \n            </div>       \n            <div class=\"search-product__details\">\n            <p class=\"search-product__title\">").concat(recentlyViewed.name, "</p> \n            <p class=\"search-product__author\">").concat(recentlyViewed.authorsAggregated, "</p>\n            </div>\n        </a>\n      </li>");
  return elem;
};
const renderRecentSearches = (recentSearch, index) => {
  const elem = "<li class=\"ui-menu-item__recent-searches\">\n          <a href=\"".concat(recentSearch.url, "\"\n            tabindex=\"-1\"\n            id=\"search-as_rs_").concat(index, "\"\n            class=\"ui-menu-item__recent-searches_link autosuggest-selectable\"\n          >       \n            <p class=\"recent-search__title\">").concat(_algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.sanitizeStr(recentSearch.query), "</p> \n        </a>\n      </li>");
  return elem;
};
const bannerHitsContainer = () => {
  const secondHit = document.querySelector('.ais-Hits-list>li:nth-child(2)');
  const fourthHit = document.querySelector('.ais-Hits-list>li:nth-child(4)');
  if (secondHit) {
    secondHit.insertAdjacentHTML('afterend', "<li class=\"ais-Hits-item list-banner hidden\">\n        <aside aria-label=\"advertisement\">\n          <span class=\"screenreader\">advertisement starts</span>\n            <div class='banner-content'></div>\n          <span class=\"screenreader\">advertisement ends</span>\n        </aside>\n      </li>");
  }
  if (fourthHit) {
    fourthHit.insertAdjacentHTML('afterend', "<li class=\"ais-Hits-item grid-banner hidden\">\n        <aside aria-label=\"advertisement\">\n          <span class=\"screenreader\">advertisement starts</span>\n            <div class='banner-content'></div>\n          <span class=\"screenreader\">advertisement ends</span>\n        </aside>\n      </li>");
  }
};
const templates = {
  autosuggest: {
    hits: [renderAutoSuggestHitItem, renderCategoryItem, renderRedirectItem],
    group: renderAutoSuggestListGroup,
    footer: renderResultCount
  },
  plp: {
    hits: renderHitItem,
    refinementFacetTemplate,
    marketingBanner: bannerHitsContainer,
    customRefinementList
  },
  searchButtonMobile,
  closeSearchButtonMobile,
  closeRecentHistoryBtn,
  recentSearch: {
    clearHistory: renderClearHistory,
    recentSearch: renderRecentSearches,
    recentSearchGroup: renderRecentSearchGroup,
    recentlyViewed: renderRecentlyViewed
  }
};

/***/ }),

/***/ "./src/get-config.js":
/*!***************************!*\
  !*** ./src/get-config.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   algoliaConfig: () => (/* binding */ algoliaConfig),
/* harmony export */   getDefaultValues: () => (/* binding */ getDefaultValues)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./algolia-utils */ "./src/algolia-utils.js");
/* eslint-disable no-console */
/** @module getConfig
 * Get JSON configuration
 */

const pathKey = 'algolia-config-path';
const gp = typeof globalProperties !== 'undefined' && typeof globalProperties.globalProperties === 'object' ? globalProperties.globalProperties : [];
const configPath = typeof algoliaConfigPath !== 'undefined' ? algoliaConfigPath : getGlobalPropertiesKey(pathKey)[pathKey];
// eslint-disable-next-line import/no-mutable-exports
let algoliaConfig;
function getGlobalPropertiesKey(param) {
  let result;
  if (gp.length > 0 && param) {
    result = gp.find(obj => obj[pathKey]);
  }
  return result;
}
_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.ajaxGet(configPath, data => {
  algoliaConfig = data;
}, false);
const getDefaultValues = configuration => ({
  query: '',
  page: 1,
  category: '',
  price: '',
  sortBy: _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(configuration.config, 'algolia-index-name'),
  hitsPerPage: _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(configuration.pagination, 'default-results-per-page', 25)
});

// console.log('algoliaConfig:', algoliaConfig);


/***/ }),

/***/ "./src/hit-utils.js":
/*!**************************!*\
  !*** ./src/hit-utils.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   hitUtils: () => (/* binding */ hitUtils)
/* harmony export */ });
const hitUtils = {
  getMoSuffix: hit => hit.isMojoEnabled ? '/mo' : '',
  getAriaMoSuffix: hit => hit.isMojoEnabled ? ' per month' : ''
};


/***/ }),

/***/ "./src/init.js":
/*!*********************!*\
  !*** ./src/init.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./algolia-utils */ "./src/algolia-utils.js");
/** @module init */



//
_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.documentReady(() => {
  printAriaLive();
  const allowedPageSelectors = ['search.standalone.html', 'search.content-data.html'];
  const pageName = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getPageName(window.location.href);
  // console.log(`pageName : ${pageName}`);
  if (pageName && allowedPageSelectors.includes(pageName)) {
    // TODO: Move 'search.html' into global configuration
    _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.replaceUrls('search.html', pageName);
  }
});
const printAriaLive = () => {
  let main = document.querySelector('main');
  if (main == null) {
    main = document.createElement('div');
    window.document.body.insertBefore(main, window.document.body.firstChild);
  }
  main.insertAdjacentHTML('beforeend', "<div aria-live='assertive' style='position: absolute; color: transparent; bottom: 26px;' \n    id='accessibility__announcement'></div>");
};

/***/ }),

/***/ "./src/plp-view-switcher.js":
/*!**********************************!*\
  !*** ./src/plp-view-switcher.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addViewSwitcher: () => (/* binding */ addViewSwitcher)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./algolia-utils */ "./src/algolia-utils.js");
/** @module plp-view-switcher */


let siteName;
let searchSection;
let defaultView;
const addViewSwitcher = (container, algoliaConfig) => {
  siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.config, 'site-name');
  searchSection = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.config, 'search-section');
  defaultView = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig['plp-view-switcher'], 'default-view');

  // Create <form>
  const viewSwitchForm = document.createElement('form');
  viewSwitchForm.classList.add('view-switcher__form');

  // Create fieldset
  const viewSwitchFieldset = document.createElement('fieldset');
  viewSwitchFieldset.classList.add('view-switcher__fieldset');

  // Create legend
  const viewSwitchLegend = document.createElement('legend');
  viewSwitchLegend.textContent = 'Search results view switcher';
  viewSwitchLegend.classList.add('view-switcher__legend');

  // Create listView radio
  const listViewControl = document.createElement('input');
  listViewControl.setAttribute('type', 'radio');
  listViewControl.setAttribute('name', 'viewSwitchControl');
  listViewControl.classList.add('listViewRadio', 'view-switcher__control');
  listViewControl.setAttribute('id', 'listViewRadio');
  listViewControl.setAttribute('aria-label', 'View as list');

  // Create gridView radio
  const gridViewControl = document.createElement('input');
  gridViewControl.setAttribute('type', 'radio');
  gridViewControl.setAttribute('name', 'viewSwitchControl');
  gridViewControl.classList.add('gridViewRadio', 'view-switcher__control');
  gridViewControl.setAttribute('id', 'gridViewRadio');
  gridViewControl.setAttribute('aria-label', 'View as grid');

  // Append elements to form
  viewSwitchForm.appendChild(viewSwitchFieldset);
  viewSwitchFieldset.appendChild(viewSwitchLegend);
  viewSwitchFieldset.appendChild(listViewControl);
  viewSwitchFieldset.appendChild(gridViewControl);

  // Append the form to existing container
  container.appendChild(viewSwitchForm);
  const initalPLPView = localStorage.getItem("".concat(siteName, "-plp-view")) ? localStorage.getItem("".concat(siteName, "-plp-view")) : defaultView;
  handlePLPView(initalPLPView);
  setInitialRadioState();
  gridViewControl.addEventListener('click', () => handlePLPView('grid'));
  listViewControl.addEventListener('click', () => handlePLPView('list'));
  return {
    listViewControl,
    gridViewControl
  };
};
const handlePLPView = newView => {
  const currentView = localStorage.getItem("".concat(siteName, "-plp-view"));
  if (!currentView) {
    localStorage.setItem("".concat(siteName, "-plp-view"), defaultView);
    return;
  }
  const searchSectionElement = document.querySelector(searchSection);
  if (newView === currentView) {
    const isViewApplied = searchSectionElement.classList.contains("".concat(newView, "-view"));
    if (newView !== defaultView && !isViewApplied) {
      searchSectionElement.classList.add("".concat(newView, "-view"));
    }
    return;
  }
  if (newView === defaultView) {
    searchSectionElement.classList.remove("".concat(currentView, "-view"));
  } else {
    searchSectionElement.classList.add("".concat(newView, "-view"));
  }
  localStorage.setItem("".concat(siteName, "-plp-view"), newView);
};
const setInitialRadioState = () => {
  const viewFieldset = document.querySelector('.view-switcher__fieldset');
  const viewRadioControls = viewFieldset.querySelectorAll('.view-switcher__control');
  const resultsView = localStorage.getItem("".concat(siteName, "-plp-view"));
  if (viewRadioControls) {
    if (resultsView) {
      viewRadioControls.forEach(radio => {
        // Set checked state for control whose class matches view
        if (radio.classList.contains("".concat(resultsView, "ViewRadio"))) {
          radio.setAttribute('checked', 'true');
        }
      });
    }
  }
};


/***/ }),

/***/ "./src/search-routing.js":
/*!*******************************!*\
  !*** ./src/search-routing.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _get_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./get-config */ "./src/get-config.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./algolia-utils */ "./src/algolia-utils.js");
function _objectEntries(obj) {
  var entries = [];
  var keys = Object.keys(obj);
  for (var k = 0; k < keys.length; k++) entries.push([keys[k], obj[keys[k]]]);
  return entries;
}
/* global instantsearch */


function getCategoryName(slug) {
  return slug.split('/').map(cat => cat.replace(/U\+002F/g, '%2F')).map(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.decodeName);
}
const getSortIndex = sortKey => {
  let sortIndex;
  _objectEntries(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.sorting).forEach(_ref => {
    let [key, value] = _ref;
    if (key && key === sortKey) {
      sortIndex = value['algolia-index-name'];
    }
  });
  return sortIndex;
};
const getSortKey = index => {
  let sortKey;
  _objectEntries(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.sorting).forEach(_ref2 => {
    let [key, value] = _ref2;
    if (value['algolia-index-name'] && value['algolia-index-name'] === index) {
      sortKey = key;
    }
  });
  return sortKey;
};
const router = instantsearch.routers.history({
  windowTitle(_ref3) {
    let {
      category,
      query
    } = _ref3;
    if (!_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.isSearchOrPLPPage()) {
      return window.document.title;
    }
    const queryTitle = query ? "Results for \"".concat(query, "\"") : _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.search, 'title', 'Search');
    if (category && category.length > 0 && category[0].length > 0) {
      let categoryTitle = "".concat(category.join(', '));
      if (query) {
        categoryTitle = "".concat(categoryTitle, " \u2013 ").concat(queryTitle);
      } else if (_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'site-name') === 'pearsonplus') {
        categoryTitle += " ".concat(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.search, 'category-title', categoryTitle));
      }
      return "".concat(categoryTitle);
    }
    return queryTitle;
  },
  createURL(_ref4) {
    let {
      qsModule,
      routeState,
      location
    } = _ref4;
    const urlParts = location.href.match(/^(.*?)\/search(.content-data)?.html/);
    const searchPath = location.href.match(/search(.content-data)?.html/)[0];
    const baseUrl = "".concat(urlParts ? urlParts[1] : '', "/");
    const categoryPath = routeState.category ? "".concat(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getCategorySlug(routeState.category).replace(/%2F/g, 'U+002F')) : '';
    const queryParameters = {};
    const query = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getQueryObject().aq;
    if (query || query === '') {
      queryParameters.aq = query;
    }
    if (routeState.page && routeState.page !== searchRouting.routeStateDefaultValues.page) {
      queryParameters.page = routeState.page;
    }
    if (routeState.hitsPerPage && routeState.hitsPerPage !== searchRouting.routeStateDefaultValues.hitsPerPage) {
      queryParameters.hitsPerPage = routeState.hitsPerPage;
    }
    if (routeState.subFormats) {
      queryParameters.subFormats = routeState.subFormats.map(encodeURIComponent);
    }
    if (routeState.priceRange) {
      queryParameters.priceRange = routeState.priceRange.map(encodeURIComponent);
    }
    if (routeState.newEditions) {
      queryParameters.newEditions = routeState.newEditions.map(encodeURIComponent);
    }
    if (routeState.sortBy && routeState.sortBy !== getSortKey(searchRouting.routeStateDefaultValues.sortBy)) {
      queryParameters.sortBy = routeState.sortBy;
    }
    if (_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'site-name') === 'pearsonplus' && _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getSwitchIdTitleQueryParam()) {
      queryParameters.switchtitleid = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getQueryObject().switchtitleid;
    }
    const queryString = qsModule.stringify(queryParameters, {
      addQueryPrefix: true,
      arrayFormat: 'repeat'
    });
    return "".concat(baseUrl).concat(searchPath).concat(categoryPath).concat(queryString);
  },
  parseURL(_ref5) {
    let {
      qsModule,
      location
    } = _ref5;
    const pathnameMatches = location.pathname.match(/search(.content-data)?.html\/(.*?)\/?$/);
    const category = getCategoryName(pathnameMatches && pathnameMatches[pathnameMatches.length - 1] || '');
    const {
      aq = '',
      page,
      hitsPerPage,
      sortBy,
      subFormats = [],
      priceRange = [],
      newEditions = []
    } = qsModule.parse(location.search.slice(1));

    // `qs` does not return an array when there's a single value.
    const allSubFormats = Array.isArray(subFormats) ? subFormats : [subFormats].filter(Boolean);
    const allPriceRange = Array.isArray(priceRange) ? priceRange : [priceRange].filter(Boolean);
    const allNewEditions = Array.isArray(newEditions) ? newEditions : [newEditions].filter(Boolean);
    return {
      query: decodeURIComponent(aq),
      page,
      hitsPerPage,
      sortBy,
      subFormats: allSubFormats.map(decodeURIComponent),
      priceRange: allPriceRange.map(decodeURIComponent),
      newEditions: allNewEditions.map(decodeURIComponent),
      category
    };
  }
});
const stateMapping = {
  stateToRoute(uiState) {
    // if(uiState['stg2-learneruk-program-index'].hierarchicalMenu) {
    // } else {
    //   console.log('11 stateToRoute');
    // }

    // refer to uiState docs for details: https://www.algolia.com/doc/api-reference/widgets/ui-state/js/
    const currentState = uiState[searchRouting.indexName]; // uiState[indexName];
    return {
      query: currentState && currentState.query,
      page: currentState && currentState.page,
      hitsPerPage: currentState && currentState.hitsPerPage,
      sortBy: currentState && getSortKey(currentState.sortBy),
      subFormats: currentState.refinementList && currentState.refinementList.subFormats,
      priceRange: currentState && currentState.refinementList && currentState.refinementList.priceGroup,
      newEditions: currentState && currentState.refinementList && currentState.refinementList.newEditions,
      category: currentState && currentState.hierarchicalMenu && currentState.hierarchicalMenu['categoriesHierarchical.lvl0']
    };
  },
  routeToState(routeState) {
    // console.log('22 routeState');
    // refer to uiState docs for details: https://www.algolia.com/doc/api-reference/widgets/ui-state/js/
    return {
      [searchRouting.indexName]: {
        query: routeState.query,
        page: routeState.page,
        hitsPerPage: routeState.hitsPerPage,
        sortBy: getSortIndex(routeState.sortBy),
        // menu: {
        //   category: routeState.categories,
        // },
        refinementList: {
          subFormats: routeState.subFormats,
          priceGroup: routeState.priceRange,
          newEditions: routeState.newEditions
        },
        hierarchicalMenu: {
          'categoriesHierarchical.lvl0': routeState.category
        }
      }
    };
  }
};
const searchRouting = {
  router,
  stateMapping
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (searchRouting);

/***/ }),

/***/ "./src/user-info.js":
/*!**************************!*\
  !*** ./src/user-info.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSessionInfo: () => (/* binding */ getSessionInfo),
/* harmony export */   getUserToken: () => (/* binding */ getUserToken)
/* harmony export */ });
/** @module user-info */
const getSessionInfo = () => new Promise((res, rej) => {
  const {
    piSession
  } = window;
  if (!piSession) {
    rej(new Error("piSession isn't on window"));
  }
  if (window.isPiSessionUsageNotPossible) {
    rej(new Error('Hybris: piSession not initialized'));
    return;
  }
  piSession.getToken((status, piSessionToken) => {
    const piid = piSession.userId();
    if (status === piSession.TimedOut) {
      piSession.getToken((_, token) => {
        if (token && piid) {
          res({
            piid,
            piSessionToken
          });
        } else {
          rej(new Error("user isn't logged in"));
        }
      });
    }
    if (piSessionToken && piid) {
      res({
        piid,
        piSessionToken,
        status
      });
    } else {
      rej(new Error("user isn't logged in"));
    }
  }, 20);
});
const checkIfAnalyticsLoaded = () => new Promise((res, rej) => {
  let retryCounter = 0;
  const maxCounter = 10;
  const isLoaded = () => {
    if (retryCounter++ > maxCounter) {
      rej(new Error('Timeout. Google analytics not injected!'));
      return;
    }
    if (window.ga && window.ga.loaded) {
      res(window.ga.getAll()[0].get('clientId'));
      return;
    }
    setTimeout(isLoaded, 100);
  };
  isLoaded();
});
let userToken = null;
const getUserToken = () => new Promise((res, rej) => {
  if (userToken) {
    res(userToken);
  } else {
    getSessionInfo().then(() => {
      // autheticated user - IES Session ID
      const {
        piSession
      } = window;
      userToken = piSession.getContextId();
      res(userToken);
    }).catch(() => {
      checkIfAnalyticsLoaded().then(gaToken => {
        userToken = gaToken;
        res(userToken);
      }).catch(() => {
        rej(new Error('Token not found. Google analytics and piSession are not available!'));
      });
    });
  }
});

/***/ }),

/***/ "./src/widgets/autosuggest/auto-suggest.js":
/*!*************************************************!*\
  !*** ./src/widgets/autosuggest/auto-suggest.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   autoSuggestConfig: () => (/* binding */ autoSuggestConfig),
/* harmony export */   autoSuggestContainer: () => (/* binding */ autoSuggestContainer),
/* harmony export */   canRedirectToPDP: () => (/* binding */ canRedirectToPDP),
/* harmony export */   closeAutoSuggest: () => (/* binding */ closeAutoSuggest),
/* harmony export */   customAutocomplete: () => (/* binding */ customAutocomplete),
/* harmony export */   getRedirectUrl: () => (/* binding */ getRedirectUrl),
/* harmony export */   indexName: () => (/* binding */ indexName),
/* harmony export */   isValidAccessCode: () => (/* binding */ isValidAccessCode),
/* harmony export */   openAutoSuggest: () => (/* binding */ openAutoSuggest),
/* harmony export */   suggestions: () => (/* binding */ suggestions)
/* harmony export */ });
/* harmony import */ var _get_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../get-config */ "./src/get-config.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../algolia-utils */ "./src/algolia-utils.js");
/* harmony import */ var _redirect_isbn13__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./redirect-isbn13 */ "./src/widgets/autosuggest/redirect-isbn13.js");
/* harmony import */ var _recent_search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./recent-search */ "./src/widgets/autosuggest/recent-search.js");
/** @module auto-suggest */





const autoSuggestConfig = _get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig['auto-suggest'];
const indexName = _get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config['algolia-index-name'];
const autoSuggestContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getContainerNode(autoSuggestConfig.container);
const debounceDelay = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(autoSuggestConfig, 'debounceDelay', 0);
let debounceTimer;
const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'site-name');
const suggestionsClient = algoliasearch(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'algolia-application-id'), _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(_get_config__WEBPACK_IMPORTED_MODULE_0__.algoliaConfig.config, 'algolia-api-key'));
let autocompleteContainer = null;
let focusableElelemtns = {
  renderId: 0,
  list: []
};
let renderId = 0;
const searchFunction = helper => {
  clearTimeout(debounceTimer);
  if (!canPerformSearch()) {
    return;
  }
  if (debounceDelay === 0) {
    helper.search();
  } else {
    debounceTimer = setTimeout(() => helper.search(), debounceDelay);
  }
};
const canPerformSearch = () => {
  const queryLength = autoSuggestContainer.querySelector('input').value.trim().length;
  const isRecentsSearch = queryLength === 0 && suggestions.helper.getQuery().query === (0,_recent_search__WEBPACK_IMPORTED_MODULE_3__.getRecentlyViewed)();
  return queryLength >= autoSuggestConfig.minLength || isRecentsSearch;
};
const suggestions = instantsearch({
  indexName,
  searchClient: suggestionsClient,
  searchFunction
});
suggestions.addWidgets([instantsearch.widgets.configure({
  clickAnalytics: true
})]);
const createPromise = () => {
  let resolver;
  let reject;
  return {
    promise: new Promise((res, rej) => {
      resolver = res;
      reject = rej;
    }),
    resolver,
    reject
  };
};
let {
  promise,
  resolver,
  reject
} = {};

/**
 * clearPromise
 * @description clears promise
 */
const clearPromise = () => {
  ({
    promise,
    resolver,
    reject
  } = {});
};
const incrementRenderId = () => {
  renderId += 1;
};
const focusableSelector = '[role="option"], .autosuggest-selectable';
const getFocusableElements = () => {
  if (focusableElelemtns.renderId === renderId) {
    return focusableElelemtns.list;
  }
  if (!autocompleteContainer) return [];
  focusableElelemtns = [...(autocompleteContainer.querySelectorAll(focusableSelector) || [])].map((el, index) => ({
    el,
    index,
    active: el.id === autocompleteContainer.getAttribute('aria-activedescendant'),
    focus: () => {
      autocompleteContainer.setAttribute('aria-activedescendant', el.id);
      el.classList.add('search-as_focussed-option');
    }
  }));
  return focusableElelemtns;
};
const focusPrev = () => {
  if (document.activeElement !== autocompleteContainer) {
    autocompleteContainer && autocompleteContainer.focus();
  }
  const set = getFocusableElements();
  if (!set.length) return;
  const activeItem = set.find(item => item.active);
  if (!activeItem) {
    set[set.length - 1].focus();
    return;
  }
  activeItem.el.classList.remove('search-as_focussed-option');
  activeItem.active = false;
  activeItem.index === 0 ? set[set.length - 1].focus() : set[activeItem.index - 1].focus();
};
const focusNext = () => {
  if (document.activeElement !== autocompleteContainer) {
    autocompleteContainer && autocompleteContainer.focus();
  }
  const set = getFocusableElements();
  if (!set.length) return;
  const activeItem = set.find(item => item.active);
  if (!activeItem) {
    set[0].focus();
    return;
  }
  activeItem.el.classList.remove('search-as_focussed-option');
  activeItem.active = false;
  activeItem.index === set.length - 1 ? set[0].focus() : set[activeItem.index + 1].focus();
};
const handleArrowKey = function () {
  let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  const {
    keyCode = 0,
    target
  } = e;
  const targetKeys = [38, 40, 27];
  if (targetKeys.includes(keyCode) && autoSuggestContainer.contains(target)) {
    switch (keyCode) {
      case 38:
        e.preventDefault();
        focusPrev(target);
        break;
      case 40:
        e.preventDefault();
        focusNext(target);
        break;
      case 27:
        document.activeElement !== autoSuggestContainer.querySelector('input') && closeAutoSuggest(true);
        break;
      default:
        break;
    }
  }
};
const asKeyHandler = function () {
  let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  const {
    keyCode
  } = e;
  if (keyCode === 13) {
    const set = getFocusableElements();
    const active = set.find(item => item.active);
    active.el.click();
  }
};
const subscribeOnArrowKeys = () => {
  document.addEventListener('keydown', handleArrowKey);
};
const unsubscribeFromArrowKeys = () => {
  document.removeEventListener('keydown', handleArrowKey);
};
const openAutoSuggest = () => {
  if (siteName === 'pearsonplus') {
    autoSuggestContainer.querySelector('#algoliaAutosuggest').style.display = '';
  } else {
    autoSuggestContainer.querySelector('ul').style.display = '';
  }
  autoSuggestContainer.querySelector('input').classList.add('ui-autocomplete-open');
  autoSuggestContainer.querySelector('input').setAttribute('aria-expanded', 'true');
  subscribeOnArrowKeys();
};
const closeAutoSuggest = function () {
  let focusOnSearchButton = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
  if (siteName === 'pearsonplus') {
    autoSuggestContainer.querySelector('#algoliaAutosuggest').style.display = 'none';
  } else {
    autoSuggestContainer.querySelector('ul').style.display = 'none';
  }
  autoSuggestContainer.querySelector('input').classList.remove('ui-autocomplete-open');
  autoSuggestContainer.querySelector('input').setAttribute('aria-expanded', 'false');
  if (siteName === 'pearsonplus' || siteName === 'educator') {
    var _document$querySelect;
    (_document$querySelect = document.querySelector('.close-recents-btn')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.classList.add('hide');
    if (focusOnSearchButton) {
      const searchButton = autoSuggestContainer.querySelector('.search-box-icon');
      searchButton && searchButton.focus();
    }
  }
  unsubscribeFromArrowKeys();
};

// Handle click on page
document.addEventListener('click', event => {
  if (!autoSuggestContainer.contains(event.target)) {
    closeAutoSuggest();
  }
});

// Remove focus from input field when browser window is not active
const onVisibilityFocusChange = event => {
  const input = autoSuggestContainer.querySelector('input');
  if (event.type === 'visibilitychange' && document.hidden || document.activeElement === input) {
    input.blur();
  }
};
document.addEventListener('visibilitychange', onVisibilityFocusChange);
window.addEventListener('pagehide', onVisibilityFocusChange);
window.addEventListener('blur', onVisibilityFocusChange);

// Create the render function
const renderAutocomplete = (renderOptions, isFirstRender) => {
  incrementRenderId();
  const {
    indices,
    currentRefinement,
    refine,
    widgetParams
  } = renderOptions;
  const {
    container,
    onRefine,
    onSelect,
    onFirstRender,
    onRender,
    generateSearchUrl,
    isSwitchTitleId
  } = widgetParams;
  autocompleteContainer = isFirstRender ? document.createElement('ul') : container.querySelector('ul');
  const refineQuery = query => {
    if (reject) {
      reject('error');
    }
    if (query.length >= autoSuggestConfig.minLength) {
      if (onRefine) {
        onRefine(query);
      }
      ({
        promise,
        resolver,
        reject
      } = createPromise());
      promise.catch(() => {});
      refine(query);
    } else {
      closeAutoSuggest();
    }
  };
  const selectHandler = event => {
    const query = container.querySelector('input').value.trim();
    if (query.length === 0) {
      window.location.href = generateSearchUrl(query);
      return false;
    }
    if (promise) {
      promise.then(aq => {
        // cleaning promise when resolved
        clearPromise();
        if (aq === query) {
          const hasRedirectRule = suggestions.renderState[indexName].queryRules.items.length === 1;
          if (hasRedirectRule) {
            window.location.href = suggestions.renderState[indexName].queryRules.items[0].redirect_url;
          } else {
            onSelect === null || onSelect === void 0 ? void 0 : onSelect(query, event, isSwitchTitleId);
          }
        } else {
          refineQuery(query);
          selectHandler();
        }
      });
    }
    return false;
  };
  if (isFirstRender) {
    var _container$querySelec;
    autocompleteContainer.classList.add('ui-menu', 'ui-widget', 'ui-widget-content', 'ui-autocomplete', 'ui-front');
    autocompleteContainer.setAttribute('id', 'algoliaAutosuggest');

    // Required for a11y
    autocompleteContainer.setAttribute('tabindex', '0');
    autocompleteContainer.setAttribute('aria-activedescendant', 'search-as_option_0');
    autocompleteContainer.setAttribute('role', 'listbox');
    autocompleteContainer.setAttribute('aria-label', 'Search results');
    autocompleteContainer.addEventListener('keyup', asKeyHandler.bind(undefined));
    container.appendChild(autocompleteContainer);
    (_container$querySelec = container.querySelector('.ais-SearchBox-submit')) === null || _container$querySelec === void 0 ? void 0 : _container$querySelec.setAttribute('aria-label', 'Submit the search query');
    const input = container.querySelector('input');
    // Required for a11y
    input.setAttribute('role', 'combobox');
    input.setAttribute('aria-label', autoSuggestConfig['search-box'].placeholder);
    input.setAttribute('aria-haspopup', 'listbox');
    input.setAttribute('aria-expanded', 'false');
    input.setAttribute('aria-autocomplete', 'list');
    input.setAttribute('aria-controls', 'algoliaAutosuggest');
    input.setAttribute('aria-activedescendant', '');
    input.setAttribute('data-ais-min-length', autoSuggestConfig.minLength);
    // Required for a11y
    input.addEventListener('input', event => {
      event.preventDefault();
      refineQuery(event.currentTarget.value.trim());
      return false;
    });
    const autosuggestEvent = event => {
      suggestions.helper.setQueryParameter('optionalWords', '');
      const query = input.value.trim();
      if (query.length >= autoSuggestConfig.minLength) {
        event.preventDefault();
        refineQuery(query);
      } else if (query.length === 0) {
        const recentlyViewed = (0,_recent_search__WEBPACK_IMPORTED_MODULE_3__.getRecentlyViewed)();
        if (recentlyViewed.length > 0) {
          // perform search for recently viewed products
          suggestions.helper.setQueryParameter('optionalWords', recentlyViewed);
          refineQuery(recentlyViewed);
        } else if ((0,_recent_search__WEBPACK_IMPORTED_MODULE_3__.hasRecentSearches)()) {
          // show recent searches
          const templateHTML = onRender('', [], 0);
          if (templateHTML.length > 0) {
            autocompleteContainer.innerHTML = templateHTML;
            openAutoSuggest();
          }
        }
      }
    };
    input.addEventListener('focus', event => autosuggestEvent(event));
    input.addEventListener('keydown', event => {
      if (event.keyCode === 40) {
        event.preventDefault();
      }
      if (event.key === 'Enter') {
        event.preventDefault();
        selectHandler(event);
      }
    });
    container.querySelector('button[type="submit"]').addEventListener('click', event => {
      event.preventDefault();
      const isSubmitted = widgetParams.submitHandler && widgetParams.submitHandler(event);
      if (!isSubmitted) {
        selectHandler(event);
      }
      return false;
    });
    container.addEventListener('focusout', event => {
      if (!container.contains(event.relatedTarget)) {
        closeAutoSuggest();
      }
    });
    onFirstRender === null || onFirstRender === void 0 ? void 0 : onFirstRender(widgetParams);
    closeAutoSuggest();
    return;
  }
  if (resolver && currentRefinement === suggestions.helper.lastResults.query) {
    resolver(currentRefinement);
  }
  if (currentRefinement && currentRefinement.trim().length >= autoSuggestConfig.minLength) {
    const {
      nbHits
    } = suggestions.renderState[indexName].stats;
    const templateHTML = onRender(currentRefinement, indices, nbHits);
    if (templateHTML.length > 0) {
      autocompleteContainer.innerHTML = templateHTML;
      openAutoSuggest();
      return;
    }
  }
  onRender(currentRefinement, [], 0);
  closeAutoSuggest();
};

// Create custom widgets
const customAutocomplete = instantsearch.connectors.connectAutocomplete(renderAutocomplete);
const customHits = instantsearch.connectors.connectHits(() => null);
const customStats = instantsearch.connectors.connectStats(() => null);
const customQueryRuleCustomData = instantsearch.connectors.connectQueryRules(() => null);
const getRedirectUrl = (query, hit, isSwitchTitleId) => {
  let redirectUrl = hit.url;
  if ((0,_redirect_isbn13__WEBPACK_IMPORTED_MODULE_2__.isISBN13)(query)) {
    const isbnField = Array.isArray(hit.isbn13sToProductUrls) ? hit.isbn13sToProductUrls.filter(isbnprop => isbnprop.indexOf(query) !== -1)[0] : hit.isbn13sToProductUrls;
    if (isbnField) {
      redirectUrl = isSwitchTitleId && _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getSwitchIdTitleQueryParam() && _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.isSearchOrPLPPage() ? "".concat(isbnField.split(' ')[1], "?").concat(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getSwitchIdTitleQueryParam()) : isbnField.split(' ')[1];
    } else {
      redirectUrl = isSwitchTitleId && _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getSwitchIdTitleQueryParam() && _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.isSearchOrPLPPage() ? "".concat(hit.url, "?").concat(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getSwitchIdTitleQueryParam()) : hit.url;
    }
  }
  return redirectUrl;
};
const canRedirectToPDP = query => {
  const {
    nbHits
  } = suggestions.renderState[indexName].stats;
  return nbHits === 1 || nbHits > 0 && (0,_redirect_isbn13__WEBPACK_IMPORTED_MODULE_2__.isISBN13)(query);
};
const isValidAccessCode = query => {
  var _query$match;
  const regExAccessCode = new RegExp('(([a-zA-Z\\d]){4}(-)){5}(([a-zA-Z\\d]){4})');
  return query.match(regExAccessCode) ? (_query$match = query.match(regExAccessCode)) === null || _query$match === void 0 ? void 0 : _query$match[0] : false;
};
if (autoSuggestContainer) {
  suggestions.addWidgets([instantsearch.widgets.searchBox({
    container: autoSuggestContainer,
    placeholder: autoSuggestConfig['search-box'].placeholder,
    cssClasses: {
      root: 'search-box',
      form: 'headerSearch',
      input: 'search-box-input',
      submit: 'search-box-icon',
      reset: 'search-close-btn'
    }
  }), customQueryRuleCustomData({
    container: autoSuggestContainer,
    transformItems(items) {
      return items.filter(item => typeof item.redirect_url !== 'undefined');
    }
  }), customHits({
    container: autoSuggestContainer
  }), customStats({
    container: autoSuggestContainer
  })]);

  // Fix Safari caching issue
  window.onpageshow = event => {
    if (event.persisted) {
      if (suggestions.helper.getQuery() && suggestions.helper.getQuery().query !== decodeURIComponent(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getQueryObject().aq)) {
        window.location.reload();
      }
    }
  };
}


/***/ }),

/***/ "./src/widgets/autosuggest/recent-search.js":
/*!**************************************************!*\
  !*** ./src/widgets/autosuggest/recent-search.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRecentSearches: () => (/* binding */ getRecentSearches),
/* harmony export */   getRecentlyViewed: () => (/* binding */ getRecentlyViewed),
/* harmony export */   hasRecentSearches: () => (/* binding */ hasRecentSearches),
/* harmony export */   hasRecentlyViewed: () => (/* binding */ hasRecentlyViewed),
/* harmony export */   setRecentSearches: () => (/* binding */ setRecentSearches),
/* harmony export */   setRecentlyViewed: () => (/* binding */ setRecentlyViewed)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../algolia-utils */ "./src/algolia-utils.js");
/* harmony import */ var _algolia_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../algolia-common */ "./src/algolia-common.js");


const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig.config, 'site-name');
function addToAutoSuggestHistory(arr, obj, name) {
  const found = arr.some(el => name === 'recent-searches' ? el.url === obj.url : el.isbn13 === obj.isbn13);
  if (!found) {
    if (arr.length === _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig['auto-suggest'], name)) {
      arr.pop();
    }
    arr.unshift(obj);
  }
}
const hasRecentlyViewed = () => {
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.existsInCookies("".concat(siteName, "-recently-viewed"))) {
    // only isbn13 cookies
    const arr = JSON.parse(window.atob(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getCookie("".concat(siteName, "-recently-viewed")))).filter(el => el.isbn13);
    if (arr.length > 0) {
      return true;
    }
    // clear prev stored cookies
    storeHistoryData('', "".concat(siteName, "-recently-viewed"));
  }
  return false;
};
const setRecentlyViewed = isbn13 => {
  const recentlyViewed = hasRecentlyViewed() ? JSON.parse(window.atob(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getCookie("".concat(siteName, "-recently-viewed")))) : [];
  const product = {
    isbn13
  };
  addToAutoSuggestHistory(recentlyViewed, product, 'recently-viewed');
  const name = "".concat(siteName, "-recently-viewed");
  storeHistoryData(recentlyViewed, name);
};
const getRecentlyViewed = () => hasRecentlyViewed() ? JSON.parse(window.atob(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getCookie("".concat(siteName, "-recently-viewed")))).reduce((a, b) => "".concat(a, " ").concat(b.isbn13), '').trim() : '';
const hasRecentSearches = () => _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.existsInCookies("".concat(siteName, "-recent-searches"));
const setRecentSearches = (searchQuery, searchUrl) => {
  const recentSearches = hasRecentSearches() ? JSON.parse(window.atob(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getCookie("".concat(siteName, "-recent-searches")))) : [];
  const recentSearch = {
    query: searchQuery,
    url: searchUrl
  };
  addToAutoSuggestHistory(recentSearches, recentSearch, 'recent-searches');
  const name = "".concat(siteName, "-recent-searches");
  storeHistoryData(recentSearches, name);
};
const getRecentSearches = () => hasRecentSearches() ? JSON.parse(window.atob(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getCookie("".concat(siteName, "-recent-searches")))) : [];
const storeHistoryData = (recentData, dataName) => {
  const maxAge = recentData.length > 0 ? 365 * 24 * 60 * 60 : 0;
  if (siteName === 'pearsonplus') {
    document.cookie = "".concat(dataName, "=").concat(window.btoa(JSON.stringify(recentData)), "; Max-Age=").concat(maxAge, "; domain=pearson.com; path=/");
  } else if (siteName === 'educator') {
    document.cookie = "".concat(dataName, "=").concat(window.btoa(JSON.stringify(recentData)), "; Max-Age=").concat(maxAge, "; path=/");
  }
};


/***/ }),

/***/ "./src/widgets/autosuggest/redirect-isbn13.js":
/*!****************************************************!*\
  !*** ./src/widgets/autosuggest/redirect-isbn13.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isISBN13: () => (/* binding */ isISBN13)
/* harmony export */ });
/**
 * ISBN13 validation
 */

const isISBN13 = query => {
  const isbn13String = '^(?:ISBN(?:-1[03])?:? )?(?=[0-9X]{10}$|' + '(?=(?:[0-9]+[- ]){3})[- 0-9X]{13}$|' + '97[89][0-9]{10}$|(?=(?:[0-9]+[- ]){4})[- 0-9]{17}$)' + '(?:97[89][- ]?)?[0-9]{1,5}[- ]?[0-9]+[- ]?[0-9]+[- ]?[0-9X]$';
  const regex = new RegExp(isbn13String);
  if (!regex.test(query)) {
    return false;
  }

  // Remove non ISBN digits, then split into an array
  const chars = query.replace(/[- ]|^ISBN(?:-1[03])?:?/g, '').split('');
  // Remove the final ISBN digit from `chars`, and assign it to `last`
  const last = parseInt(chars.pop(), 10);
  const sum = chars.map(char => parseInt(char, 10)).reduce((acc, val, i) => acc + (i % 2 * 2 + 1) * val);
  let check = 10 - sum % 10;
  if (check === 10) {
    check = 0;
  }
  return check === last;
};

/***/ }),

/***/ "./src/widgets/breadcrumb.js":
/*!***********************************!*\
  !*** ./src/widgets/breadcrumb.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createBreadcrumb: () => (/* binding */ createBreadcrumb)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/** @module breadcrumb */


// Breadcrumb - https://www.algolia.com/doc/api-reference/widgets/breadcrumb/js/

const createBreadcrumb = (search, algoliaConfig) => {
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.elementExists(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.breadcrumb, 'selector'))) {
    // Create the custom widget
    const customBreadcrumb = instantsearch.connectors.connectBreadcrumb(renderBreadcrumb);
    const breadcrumbContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getWidgetContainer(algoliaConfig.breadcrumb, 'selector');
    if (breadcrumbContainer) {
      search.addWidgets([customBreadcrumb({
        container: breadcrumbContainer,
        attributes: ['categoriesHierarchical.lvl0', 'categoriesHierarchical.lvl1', 'categoriesHierarchical.lvl2'],
        cssClasses: {
          root: 'c-breadcrumb',
          list: ['c-breadcrumb__list', 'c-breadcrumb__sub-class']
        },
        algoliaConfig
      })]);
    }
  }
};
const renderBreadcrumb = (renderOptions, isFirstRender) => {
  const {
    items,
    createURL,
    widgetParams
  } = renderOptions;
  const {
    algoliaConfig
  } = widgetParams;
  const homePageUrl = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.breadcrumb, 'home-page-url');
  const homePageLabel = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.breadcrumb, 'home-page-label');
  const query = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getQueryObject().aq;
  widgetParams.container.innerHTML = "\n      ".concat(typeof query === 'undefined' && items.length > 0 ? "<nav class=\"breadcrumb section breadcrumb--algolia\" aria-label=\"breadcrumb\">  \n          <ul class=\"show-children--all\">\n          <li><a href=\"".concat(homePageUrl, "\">").concat(homePageLabel, "</a></li>\n          ").concat(items.map(item => renderBreadcrumbItem({
    item,
    createURL
  })).join(''), "\n            </ul>\n            </nav>\n            ") : "", "\n  ");
};

// Create the render function
const renderBreadcrumbItem = _ref => {
  let {
    item,
    createURL
  } = _ref;
  return "\n  <li>\n    ".concat(item.value ? "<a href=\"".concat(createURL(item.value), "\">\n            ").concat(item.label, "\n          </a>") : "<p class=\"active\">".concat(item.label, "</p>"), "\n  </li>");
};


/***/ }),

/***/ "./src/widgets/count-selector.js":
/*!***************************************!*\
  !*** ./src/widgets/count-selector.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createCountSelector: () => (/* binding */ createCountSelector)
/* harmony export */ });
/* harmony import */ var _get_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../get-config */ "./src/get-config.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/** @module count-selector */




// result count stats
const createCountSelector = (search, algoliaConfig) => {
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.elementExists(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.pagination, 'count-selector'))) {
    const countSelectorContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getWidgetContainer(algoliaConfig.pagination, 'count-selector');
    const hitsPerPage = {
      items: [],
      container: countSelectorContainer,
      algoliaConfig
    };
    const resultsPerPage = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.pagination, 'results-per-page').map(Number);
    const defaultResultsPerPage = (0,_get_config__WEBPACK_IMPORTED_MODULE_0__.getDefaultValues)(algoliaConfig).hitsPerPage;
    const index = resultsPerPage.indexOf(defaultResultsPerPage) !== -1 ? resultsPerPage.indexOf(defaultResultsPerPage) : 0;
    resultsPerPage.forEach(item => {
      hitsPerPage.items.push({
        label: item,
        value: item
      });
    });
    hitsPerPage.items[index].default = true;
    const customHitsPerPage = instantsearch.connectors.connectHitsPerPage(renderHitsPerPage);
    search.addWidgets([customHitsPerPage(hitsPerPage)]);
  }
};
const renderHitsPerPage = (renderOptions, isFirstRender) => {
  const {
    items,
    hasNoResults,
    refine,
    widgetParams
  } = renderOptions;
  const {
    algoliaConfig
  } = widgetParams;
  const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.config, 'site-name');
  const countsLabel = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.pagination, 'counts-per-page-label');
  if (isFirstRender) {
    const selectId = 'countsPerPage';
    const select = document.createElement('select');
    select.setAttribute('id', selectId);
    select.setAttribute('name', selectId);
    if (siteName === 'educator') {
      select.classList.add('input', 'form-control');
    } else {
      select.classList.add('input');
    }
    const label = document.createElement('label');
    label.setAttribute('for', selectId);
    label.insertAdjacentHTML('beforeend', countsLabel);
    select.addEventListener('change', event => {
      refine(event.target.value);
    });
    widgetParams.container.appendChild(label);
    widgetParams.container.appendChild(select);
    widgetParams.container.classList.add('c-dropdown', 'c-dropdown--inline');
    return;
  }
  const select = widgetParams.container.querySelector('select');
  select.innerHTML = "\n      ".concat(items.map(item => "\n            <option\n              value=\"".concat(item.value, "\"\n              ").concat(item.isRefined ? 'selected="selected"' : '', "\n            >\n            ").concat(item.label, "\n          </option>\n          ")).join(''), "\n  ");
};


/***/ }),

/***/ "./src/widgets/facets/category-facet.js":
/*!**********************************************!*\
  !*** ./src/widgets/facets/category-facet.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   refinementCategoriesWithPanel: () => (/* binding */ refinementCategoriesWithPanel)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../algolia-utils */ "./src/algolia-utils.js");
/* harmony import */ var _hierarchical_menu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hierarchical-menu */ "./src/widgets/facets/hierarchical-menu.js");
/** @module category-facet */


const refinementCategoriesWithPanel = instantsearch.widgets.panel({
  hidden(options) {
    const {
      results
    } = options;
    const {
      displayFilterLabel
    } = options.widgetParams;
    if (results && results.hierarchicalFacets[0] && results.hierarchicalFacets[0].data) {
      let menuData = results.hierarchicalFacets[0].data;
      while (menuData.filter(item => item.isRefined).length > 0) {
        const elem = menuData.filter(item => item.isRefined)[0];
        menuData = elem.data != null ? elem.data : [];
      }
      if (menuData.length > 0 && displayFilterLabel) {
        const facetConfig = options.widgetParams.categoryFacetConfig;
        _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.handleFilterLabel(facetConfig, 'Show results by');
      }
      return menuData.length === 0;
    }
    return true;
  },
  templates: {
    header(options) {
      const indexName = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(options.widgetParams.algoliaConfig.config, 'algolia-index-name');
      const categoryLabels = options.widgetParams.labels;
      if (options.widgetParams.search.renderState[indexName] && options.widgetParams.search.helper) {
        const hierarchicalFacetsRefinements = options.widgetParams.search.helper.state.hierarchicalFacetsRefinements[options.widgetParams.attributes[0]];
        if (hierarchicalFacetsRefinements[0] && categoryLabels) {
          switch (hierarchicalFacetsRefinements[0].split(' > ').length) {
            case 1:
              return categoryLabels[1];
            case 2:
              return categoryLabels[2];
            default:
              return '';
          }
        }
        return categoryLabels[0];
      }
      return '';
    }
  },
  collapsed: true
})(_hierarchical_menu__WEBPACK_IMPORTED_MODULE_1__.customHierarchicalMenu);


/***/ }),

/***/ "./src/widgets/facets/hierarchical-menu.js":
/*!*************************************************!*\
  !*** ./src/widgets/facets/hierarchical-menu.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   customHierarchicalMenu: () => (/* binding */ customHierarchicalMenu)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../algolia-utils */ "./src/algolia-utils.js");
/** @module hierarchical-menu */

const renderHierarchicalCategoryList = _ref => {
  let {
    items,
    createURL
  } = _ref;
  return "<nav aria-label=\"subjects\">\n    <ul class=\"ais-HierarchicalMenu-list\">\n      ".concat(items.map(item => {
    const url = createURL(item.path);
    return "<li class=\"ais-HierarchicalMenu-item\">\n          ".concat(url.match(/\?page=([0-9]+)&/) ? "<a href=\"".concat(url.replace(/page=([0-9]+)&/, ''), "\"") : "<a href=\"".concat(url.replace(/(\?|&)?page=([0-9]+)/, ''), "\""), " \n            data-value=\"").concat(item.path, "\" class=\"ais-HierarchicalMenu-link\">\n              ").concat(item.name, " <strong>(").concat(item.count, ")</strong>\n            </a>\n          </li>");
  }).join(''), "\n    </ul>\n  </nav>");
};
const renderHierarchicalMenu = (renderOptions, isFirstRender) => {
  const {
    refine,
    createURL,
    isShowingMore,
    toggleShowMore,
    widgetParams
  } = renderOptions;
  const {
    algoliaConfig
  } = widgetParams;
  if (isFirstRender) {
    const list = document.createElement('div');
    const button = document.createElement('button');
    button.classList.add('ais-HierarchicalMenu-showMore');
    button.addEventListener('click', () => {
      toggleShowMore();
    });
    widgetParams.container.appendChild(list);
    widgetParams.container.appendChild(button);
    const descriptionElement = document.createElement('p');
    descriptionElement.classList.add('visuallyHidden');
    descriptionElement.setAttribute('id', 'description');
    descriptionElement.textContent = "More subjects options will be revealed above";
    widgetParams.container.appendChild(descriptionElement);
    return;
  }
  const menuData = renderOptions.instantSearchInstance.helper && renderOptions.instantSearchInstance.helper.lastResults && renderOptions.instantSearchInstance.helper.lastResults.hierarchicalFacets[0].data;
  let data = menuData && menuData.length > 0 ? menuData : [];
  while (data.filter(item => item.isRefined).length > 0) {
    const elem = data.filter(item => item.isRefined)[0];
    data = elem.data != null ? elem.data : [];
  }
  data = data.sort((a, b) => a.name.toLowerCase().localeCompare(b.name.toLowerCase()));
  const menuLength = data.length;
  if (!isShowingMore) {
    data = data.slice(0, widgetParams.limit);
  }
  const children = renderHierarchicalCategoryList({
    items: data,
    createURL
  });
  widgetParams.container.querySelector('div').innerHTML = children;
  const showMoreButton = widgetParams.container.querySelector('button');
  const showMoreLabel = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.facets, 'show_more_label', 'Show more +');
  const showLessLabel = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.facets, 'show_less_label', 'Show less -');
  showMoreButton.textContent = isShowingMore ? showLessLabel : showMoreLabel;
  showMoreButton.style.display = widgetParams.limit < menuLength ? '' : 'none';
  if (isShowingMore) {
    showMoreButton.setAttribute('aria-label', "Show less subjects options");
    showMoreButton.removeAttribute('aria-describedby');
  } else {
    showMoreButton.setAttribute('aria-label', "Show more subjects options");
    showMoreButton.setAttribute('aria-describedby', 'description');
  }
};
const customHierarchicalMenu = instantsearch.connectors.connectHierarchicalMenu(renderHierarchicalMenu);

/***/ }),

/***/ "./src/widgets/hits.js":
/*!*****************************!*\
  !*** ./src/widgets/hits.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createHits: () => (/* binding */ createHits)
/* harmony export */ });
/* harmony import */ var _user_info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../user-info */ "./src/user-info.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/* harmony import */ var _taxonomy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./taxonomy */ "./src/widgets/taxonomy.js");
/** @module hits */




const createHits = (search, hitsOptions) => {
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.elementExists(hitsOptions.container)) {
    const containerNode = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getContainerNode(hitsOptions.container);
    const hitsInitOptions = {
      container: containerNode,
      template: hitsOptions.template,
      onRender: hitsOptions.onRender !== undefined ? hitsOptions.onRender : {
        init: null,
        displayResults,
        displayNoResults
      },
      cssClasses: hitsOptions.cssClasses !== undefined ? hitsOptions.cssClasses : {}
    };
    const customHits = instantsearch.connectors.connectHits(renderHits);
    search.addWidgets([customHits(hitsInitOptions)]);
  }
};
const renderHits = (renderOptions, isFirstRender) => {
  const {
    widgetParams,
    hits
  } = renderOptions;
  if (isFirstRender) {
    var _widgetParams$onRende, _widgetParams$onRende2;
    widgetParams.container.classList.add('ais-Hits');
    (_widgetParams$onRende = (_widgetParams$onRende2 = widgetParams.onRender).init) === null || _widgetParams$onRende === void 0 ? void 0 : _widgetParams$onRende.call(_widgetParams$onRende2, widgetParams.container);
    if (widgetParams.infiniteScrollSelector) {
      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            var _lastRenderArgs$widge;
            const lastInfiniteScrollSelector = (_lastRenderArgs$widge = lastRenderArgs.widgetParams) === null || _lastRenderArgs$widge === void 0 ? void 0 : _lastRenderArgs$widge.infiniteScrollSelector;
            if (!lastRenderArgs.isLastPage && (lastInfiniteScrollSelector === null || lastInfiniteScrollSelector === void 0 ? void 0 : lastInfiniteScrollSelector.getAttribute('show-more')) === 'disabled') {
              lastInfiniteScrollSelector.removeAttribute('show-more');
            }
            if (entry.target.getAttribute('show-more') !== 'disabled') {
              showMore();
            }
            if (lastRenderArgs.isLastPage && lastRenderArgs.results) {
              lastInfiniteScrollSelector.setAttribute('show-more', 'disabled');
              lastRenderArgs = {};
            }
          }
        });
      });
      observer.observe(widgetParams.infiniteScrollSelector);
    }
    return;
  }
  widgetParams.container.innerHTML = "\n  <ol class=\"ais-Hits-list ".concat(widgetParams.cssClasses.list ? widgetParams.cssClasses.list : '', "\">\n  ").concat(hits.map(item => "<li class=\"ais-Hits-item ".concat(widgetParams.cssClasses.item ? widgetParams.cssClasses.item : '', "\">").concat(widgetParams.template(item), "</li>")).join(''), "  </ol>\n  ");
  if (hits.length > 0) {
    var _widgetParams$onRende3, _widgetParams$onRende4;
    (_widgetParams$onRende3 = (_widgetParams$onRende4 = widgetParams.onRender).displayResults) === null || _widgetParams$onRende3 === void 0 ? void 0 : _widgetParams$onRende3.call(_widgetParams$onRende4, widgetParams.container, hits);
  } else {
    var _widgetParams$onRende5, _widgetParams$onRende6;
    (_widgetParams$onRende5 = (_widgetParams$onRende6 = widgetParams.onRender).displayNoResults) === null || _widgetParams$onRende5 === void 0 ? void 0 : _widgetParams$onRende5.call(_widgetParams$onRende6, widgetParams.container);
  }
  toggleResultVisibility(hits.length > 0);
};
const displayResults = (container, hits) => {
  const query = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getQueryObject().aq;
  if (!_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.elementExists('.querySearchField')) {
    return;
  }
  const querySearchField = document.querySelector('.querySearchField');
  if (query !== undefined && query.length > 0) {
    const q = decodeURIComponent(query);
    if (!querySearchField.textContent.endsWith("\u201C".concat(q, "\u201D"))) {
      querySearchField.textContent = querySearchField.textContent.replace('{query}', q);
    }
  } else {
    const searchResultsHeader = document.querySelector('.searchResultsHeader');
    searchResultsHeader.classList.toggle('hidden', _taxonomy__WEBPACK_IMPORTED_MODULE_2__.hasHierarchicalFacetsRefinements);
    if (!_taxonomy__WEBPACK_IMPORTED_MODULE_2__.hasHierarchicalFacetsRefinements) {
      querySearchField.textContent = querySearchField.textContent.replace('{query}', '');
    }
  }
};
const displayNoResults = () => {
  const query = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getQueryObject().aq;
  const decodedQuery = decodeURIComponent(query);
  const noResultsQueryLabel = document.querySelector('.no-results-query');
  if (noResultsQueryLabel && !noResultsQueryLabel.textContent.endsWith("\"".concat(decodedQuery, "\""))) {
    noResultsQueryLabel.textContent = noResultsQueryLabel.textContent.replace('{query}', decodedQuery);
  }
};
const toggleResultVisibility = hasResult => {
  const noSearchResults = document.querySelector('.noSearchResults');
  noSearchResults === null || noSearchResults === void 0 ? void 0 : noSearchResults.classList.toggle('hidden', hasResult);
  const searchResults = document.querySelector('.searchResults');
  searchResults === null || searchResults === void 0 ? void 0 : searchResults.classList.toggle('hidden', !hasResult);
};


/***/ }),

/***/ "./src/widgets/marketing-banner.js":
/*!*****************************************!*\
  !*** ./src/widgets/marketing-banner.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createMarketingBanner: () => (/* binding */ createMarketingBanner),
/* harmony export */   hitsBannerReposition: () => (/* binding */ hitsBannerReposition)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/** @module marketing-banner */


let hitsCount;
const hitsBannerReposition = algoliaConfig => {
  const gridMinimumHits = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.banner, 'grid-minimum-hits');
  const listMinimumHits = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.banner, 'list-minimum-hits');
  const listBanner = document.querySelector('.list-banner');
  const gridBanner = document.querySelector('.grid-banner');
  const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.config, 'site-name');
  const isGrid = localStorage.getItem("".concat(siteName, "-plp-view")) === 'grid';
  if (!listBanner.hasChildNodes() || !gridBanner.hasChildNodes()) {
    return;
  }
  if (isGrid) {
    listBanner.classList.toggle('hidden', isGrid);
    if (hitsCount >= gridMinimumHits) {
      gridBanner.classList.toggle('hidden', !isGrid);
    }
  } else {
    gridBanner.classList.toggle('hidden', !isGrid);
    if (hitsCount >= listMinimumHits) {
      listBanner.classList.toggle('hidden', isGrid);
    }
  }
};
const getDefaultMarketingBanner = (userData, params, defaultBanners) => {
  const hierarchicalFacetsRefinements = params.helper.state.hierarchicalFacetsRefinements['categoriesHierarchical.lvl0'];
  if (hierarchicalFacetsRefinements[0]) {
    switch (hierarchicalFacetsRefinements[0].split(' > ').length) {
      case 1:
        return _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getValueFromJsonObjectsArray(userData, defaultBanners.subjectBanner);
      case 2:
        return _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getValueFromJsonObjectsArray(userData, defaultBanners.categoryBanner);
      case 3:
        return _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getValueFromJsonObjectsArray(userData, defaultBanners.topicBanner);
      default:
    }
  }
  return null;
};
const createMarketingBanner = (search, algoliaConfig) => {
  const bannerContainer = document.querySelector(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.banner, 'bottom-container'));
  const domainUrl = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.banner, 'embed-page-url');
  const defaultHitsBanners = {
    subjectBanner: 'subject_banner_url',
    categoryBanner: 'category_banner_url',
    topicBanner: 'topic_banner_url'
  };
  const defaultBottomBanners = {
    subjectBanner: 'subject_bottom_banner_url',
    categoryBanner: 'category_bottom_banner_url',
    topicBanner: 'topic_bottom_banner_url'
  };
  if (bannerContainer) {
    search.addWidgets([{
      render(params) {
        const {
          results
        } = params;
        hitsCount = results.hits.length;
        if (results.userData && results.userData.length > 0) {
          const {
            userData
          } = results;
          let hitsBanner = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getValueFromJsonObjectsArray(userData, 'banner_url');
          if (hitsBanner === undefined || hitsBanner.length === 0) {
            hitsBanner = getDefaultMarketingBanner(userData, params, defaultHitsBanners);
          }
          if (hitsBanner) {
            const hitsBannerUrl = domainUrl + hitsBanner.replace('html', 'fragment.html');
            _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.ajaxGet(hitsBannerUrl, data => {
              const gridBanner = document.querySelector('.grid-banner .banner-content');
              const listBanner = document.querySelector('.list-banner .banner-content');
              if (gridBanner) {
                gridBanner.innerHTML = data;
              }
              if (listBanner) {
                listBanner.innerHTML = data;
              }
              hitsBannerReposition(algoliaConfig);
            });
          }
          let bottomBanner = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getValueFromJsonObjectsArray(userData, 'bottom_banner_url');
          if (bottomBanner === undefined || bottomBanner.length === 0) {
            bottomBanner = getDefaultMarketingBanner(userData, params, defaultBottomBanners);
          }
          if (bottomBanner) {
            const bottomBannerUrl = domainUrl + bottomBanner.replace('html', 'fragment.html');
            _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.ajaxGet(bottomBannerUrl, data => {
              bannerContainer.innerHTML = data;
            });
          }
        }
      }
    }]);
  }
};


/***/ }),

/***/ "./src/widgets/pagination.js":
/*!***********************************!*\
  !*** ./src/widgets/pagination.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createPagination: () => (/* binding */ createPagination)
/* harmony export */ });
/* harmony import */ var _get_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../get-config */ "./src/get-config.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/* eslint-disable prefer-const */
/** @module pagination */



let defaultValues;
const createPagination = (search, algoliaConfig) => {
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.elementExists(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.pagination, 'pagination-selector')) && _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.elementExists(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.pagination, 'stats-selector')) && _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.elementExists(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.pagination, 'scroll-to-selector'))) {
    defaultValues = (0,_get_config__WEBPACK_IMPORTED_MODULE_0__.getDefaultValues)(algoliaConfig);
    const statsContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getWidgetContainer(algoliaConfig.pagination, 'stats-selector');
    const paginationContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getWidgetContainer(algoliaConfig.pagination, 'pagination-selector');
    let nbHits;
    search.addWidgets([{
      render(params) {
        const {
          results
        } = params;
        if (results.hits.length === 0) {
          statsContainer.innerHTML = 'No results';
        } else {
          const {
            hitsPerPage
          } = results;
          const currentPage = results.page;
          nbHits = results.nbHits;
          const fromDocument = hitsPerPage * currentPage + 1;
          const toDocument = hitsPerPage * (currentPage + 1);
          const labelOf = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.pagination, 'label_of');
          const labelResults = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.pagination, 'label_results');
          statsContainer.setAttribute('role', 'status');
          statsContainer.setAttribute('aria-live', 'assertive');
          statsContainer.setAttribute('tabindex', '0');
          statsContainer.innerHTML = "<p class=\"a-search__count\">\n            <strong>".concat(fromDocument, " - ").concat(toDocument <= nbHits ? toDocument : nbHits, "</strong>\n            ").concat(labelOf, " <span>").concat(nbHits, "</span> ").concat(labelResults, "</p>");
        }
      }
    }]);

    // Create the custom widget
    const customPagination = instantsearch.connectors.connectPagination(renderPagination);

    // Instantiate the custom widget
    search.addWidgets([customPagination({
      container: paginationContainer,
      padding: 1,
      algoliaConfig
    })]);
  }
};

// Create the render function
const renderPagination = renderOptions => {
  const {
    currentRefinement,
    nbPages,
    nbHits,
    isFirstPage,
    isLastPage,
    refine,
    createURL,
    widgetParams
  } = renderOptions;
  const {
    container,
    algoliaConfig
  } = widgetParams;
  const mobilePagination = "".concat(currentRefinement + 1, " of ").concat(nbPages);
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.elementExists(_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.pagination, 'count-selector'))) {
    const countSelectorContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getWidgetContainer(algoliaConfig.pagination, 'count-selector');
    if (nbHits <= defaultValues.hitsPerPage) {
      if (!countSelectorContainer.classList.contains('hide')) {
        countSelectorContainer.classList.add('hide');
      }
    } else {
      countSelectorContainer.classList.remove('hide');
    }
  }
  if (nbPages === 1) {
    container.innerHTML = '';
  } else {
    container.innerHTML = "\n  <div class=\"ais-Pagination\">\n    <nav aria-label=\"Search Pagination\">\n    <ul class=\"ais-Pagination-list\" data-current-page=\"".concat(currentRefinement + 1, " of ").concat(nbPages, "\">\n    ").concat(!isFirstPage ? "\n          <li class=\"ais-Pagination-item ais-Pagination-item--previousPage\">\n            <a class=\"ais-Pagination-link ais-Pagination-link--previousPage\"\n              href=\"".concat(createURL(currentRefinement - 1), "\"\n              data-value=\"").concat(currentRefinement - 1, "\"\n              aria-label=\"Previous page\"\n            >\n            <span aria-hidden=\"true\"></span>\n            </a>\n          </li>\n          ") : "<li class=\"ais-Pagination-item ais-Pagination-item--previousPage ais-Pagination-item--disabled\">\n        <a class=\"ais-Pagination-link ais-Pagination-link--previousPage ais-Pagination-link--disabled\"\n              data-href=\"".concat(createURL(currentRefinement), "\"\n              data-value=\"").concat(currentRefinement, "\"\n              aria-label=\"Previous page\"\n              aria-disabled=\"true\"\n              role=\"link\"\n            >\n            <span aria-hidden=\"true\"></span>\n          </a>\n      </li>"), "\n    ").concat(paginationTemplate(renderOptions), "\n    ", "<li class=\"ais-Pagination-item ais-Pagination-item--of\">".concat(mobilePagination, "</li>"), "\n        ").concat(!isLastPage ? "\n              <li class=\"ais-Pagination-item ais-Pagination-item--nextPage\">\n                <a class=\"ais-Pagination-link ais-Pagination-link--nextPage\"\n                  href=\"".concat(createURL(currentRefinement + 1), "\"\n                  data-value=\"").concat(currentRefinement + 1, "\"\n                  aria-label=\"Next page\"\n                >\n                <span aria-hidden=\"true\"></span>\n                </a>\n              </li>\n              ") : "<li class=\"ais-Pagination-item ais-Pagination-item--nextPage ais-Pagination-item--disabled\">\n            <a class=\"ais-Pagination-link ais-Pagination-link--nextPage ais-Pagination-link--disabled\"\n              data-href=\"".concat(createURL(currentRefinement), "\"\n              data-value=\"").concat(currentRefinement, "\"\n              aria-label=\"Next page\"\n              aria-disabled=\"true\"\n              role=\"link\"\n            >\n            <span aria-hidden=\"true\"></span>\n          </a>\n        </li>"), "\n    </ul>\n    </nav>\n  </div>\n  ");
    [...container.querySelectorAll('a')].forEach(element => {
      element.addEventListener('click', event => {
        if (!element.className.includes('disabled')) {
          if (_algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.returnConfigProperty(algoliaConfig.config, 'site-name') !== 'pearsonplus') {
            const scrollTo = _algolia_utils__WEBPACK_IMPORTED_MODULE_1__.utils.getWidgetContainer(algoliaConfig.pagination, 'scroll-to-selector');
            scrollTo.scrollIntoView();
          } else {
            sessionStorage.setItem('focus', 'first_card');
          }
        } else {
          event.preventDefault();
          return false;
        }
        event.preventDefault();
        refine(event.currentTarget.dataset.value);
        return true;
      });
    });
  }
};
const paginationTemplate = renderOptions => {
  const {
    currentRefinement,
    nbPages,
    createURL,
    widgetParams
  } = renderOptions;
  const delta = currentRefinement === 0 || currentRefinement === nbPages - 1 ? widgetParams.padding + 1 : widgetParams.padding;
  const pageArr = createPaginationArray(currentRefinement + 1, nbPages, delta);
  return "\n  ".concat(pageArr.map(page => "".concat(page === '...' ? "<li class=\"ais-Pagination-item ais-Pagination-item--page\"><span class=\"d-block\">...</span></li>" : "".concat(page === currentRefinement + 1 ? "<li class=\"ais-Pagination-item ais-Pagination-item--page ais-Pagination-item--selected\">\n            <a class=\"ais-Pagination-link ais-Pagination-link--disabled\"\n            aria-current=\"page\"" : "<li class=\"ais-Pagination-item ais-Pagination-item--page\">\n                  <a class=\"ais-Pagination-link\"", " \n              href=\"").concat(createURL(page - 1), "\"\n              data-value=\"").concat(page - 1, "\"\n              aria-label=\"Go to Page ").concat(page, "\"\n              >\n              ").concat(page, "\n            </a>\n          </li>"))).join(''), "\n  ");
};
const createPaginationArray = function (currentPage, pageCount) {
  let delta = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;
  const separate = (a, b) => [a, ...({
    0: [],
    1: [b],
    2: [a + 1, b]
  }[b - a] || ['...', b])];
  return Array(delta * 2 + 1).fill().map((_, index) => currentPage - delta + index).filter(page => page > 0 && page <= pageCount).flatMap((page, index, _ref) => {
    let {
      length
    } = _ref;
    if (!index) return separate(1, page);
    if (index === length - 1) return separate(page, pageCount);
    return [page];
  });
};


/***/ }),

/***/ "./src/widgets/refinement-list.js":
/*!****************************************!*\
  !*** ./src/widgets/refinement-list.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   customCurrentRefinements: () => (/* binding */ customCurrentRefinements)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/** @module Pearson.com custom refinement */


// Create the render function
const createDataAttributes = refinement => Object.keys(refinement).map(key => "data-".concat(key, "=\"").concat(refinement[key], "\"")).join(' ');
const appliedCategoryDataAttr = (value, index, array) => {
  let url = '';
  if (index > 0) {
    array.slice(0, index).forEach(name => {
      url += "/".concat(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.encodeName(name).replace(/%2F/g, 'U+002F'));
    });
  }
  return "data-label=\"".concat(value, "\" \n  data-type=\"hierarchical\" \n  data-value=\"").concat(value, "\" \n  data-url-mod=\"").concat(url, "\"\n  aria-label=\"Remove ").concat(value, " filter\"");
};
function indexOfCurrentRefinement(item) {
  const orderArr = ['subFormats', 'categoriesHierarchical.lvl0', 'priceGroup', 'newEditions'];
  return orderArr.indexOf(item.attribute);
}
function sortCurrentRefinements(items) {
  const sortedItems = new Array(items.length).fill(null);
  items.forEach(element => {
    sortedItems.splice(indexOfCurrentRefinement(element), 1, element);
  });
  return sortedItems;
}
const reOrder = refinement => {
  // empty refinement fix / categoriesHierarchical.lvl0
  if (refinement && refinement.value === '') {
    // console.warn('refinement empty--> ', refinement);
    return '';
  }
  if (refinement.label && refinement.label.indexOf(' > ') !== -1) {
    return refinement.label.split(' > ').map((val, index, array) => "<li class=\"ais-CustomRefinements-category\">\n            ".concat(val.trim(), "\n            <button ").concat(appliedCategoryDataAttr(val, index, array), " class=\"ais-CustomRefinements-delete\"></button>\n          </li>")).join('');
  }
  return "<li class=\"ais-CustomRefinements-category\">\n    ".concat(refinement.label, "\n    <button ").concat(createDataAttributes(refinement), " aria-label='Remove ").concat(refinement.label, " filter' class=\"ais-CustomRefinements-delete\"></button>\n  </li>");
};
const sortPerSelection = (items, container) => {
  const appliedFilters = container.querySelectorAll('button');
  const appliedFiltersValues = [...appliedFilters].map(el => el.getAttribute('data-value'));
  const refinedItems = items.reduce((acc, itemsPerAttribute) => acc.concat(itemsPerAttribute.refinements), []);
  refinedItems.sort((a, b) => appliedFiltersValues.indexOf(a.value) !== -1 ? appliedFiltersValues.indexOf(a.value) - appliedFiltersValues.indexOf(b.value) : 0);
  return refinedItems;
};
const renderListItem = (item, itemsExtracted) => {
  if (item !== null) {
    return "\n      ".concat(!itemsExtracted ? item.refinements.map(reOrder).join('') : reOrder(item), "\n ");
  }
  return null;
};
const renderListItemMobile = item => {
  if (item !== null) {
    return "\n      ".concat(item.refinements.map(reOrder).join(''), "\n    ");
  }
  return null;
};
const renderCurrentRefinements = renderOptions => {
  const {
    items,
    widgetParams
  } = renderOptions;
  const {
    algoliaConfig,
    sortAsSelected
  } = widgetParams;
  const appliedFiltersLabel = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig['current-refinements'], 'label', 'Applied Filters');
  widgetParams.container.innerHTML = "\n    <h2 class=\"ais-CustomRefinements-title\">".concat(appliedFiltersLabel, "</h2>\n    <ul class=\"ais-CustomRefinements-list\">\n      ").concat(!sortAsSelected ? sortCurrentRefinements(items).map(el => renderListItem(el, false)).join('') : sortPerSelection(items, widgetParams.container).map(el => renderListItem(el, true)).join(''), "\n    </ul>\n  ");
  const mobileFilterSection = document.querySelector('.syncedFilterSection');
  const syncedAppliedFilterSection = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig['current-refinements'], 'synced-applied-filter-section', false);
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.isTabletOrMobile() && syncedAppliedFilterSection) {
    mobileFilterSection.innerHTML = "\n    <label for=\"ais-CustomRefinements-list async\">".concat(appliedFiltersLabel, "</label>\n    <ul class=\"ais-CustomRefinements-list async row\">\n    ").concat(sortCurrentRefinements(items).map(renderListItemMobile).join(''), "\n    </ul>\n  ");
  }

  // Show / hide applied filters based on number of results
  let refinementExists = false;
  if (items.length === 1 && items[0].refinements) {
    items[0].refinements.forEach(refinement => {
      refinementExists = refinementExists || refinement.value;
    });
  } else if (items.length > 1) {
    refinementExists = true;
  }
  if (refinementExists) {
    widgetParams.container.classList.remove('hide');
    mobileFilterSection.classList.remove('hide');
  } else {
    mobileFilterSection.classList.add('hide');
    widgetParams.container.classList.add('hide');
  }
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.isTabletOrMobile()) {
    mobileFilterSection.querySelectorAll('button').forEach(element => {
      element.addEventListener('click', event => {
        removeFilter(event, renderOptions, element);
      });
    });
  }
  [...widgetParams.container.querySelectorAll('button')].forEach(element => {
    element.addEventListener('click', event => {
      removeFilter(event, renderOptions, element);
    });
    element.addEventListener('keydown', event => {
      if (event.key === 'Enter') {
        event.preventDefault();
        removeFilter(event, renderOptions, element);
      }
    });
  });
};
function removeFilter(event, renderOptions, element) {
  const categoryName = element.attributes['data-value'].nodeValue;
  document.getElementById('accessibility__announcement').textContent = "".concat(categoryName, " filter has been removed");
  const item = Object.keys(event.currentTarget.dataset).reduce((acc, key) => ({
    ...acc,
    [key]: event.currentTarget.dataset[key]
  }), {});
  const delay = event.type === 'keydown' ? 3000 : 0;
  announcementDelay(item, renderOptions, delay);
}
const announcementDelay = (item, renderOptions, delay) => {
  const {
    search,
    algoliaConfig
  } = renderOptions.widgetParams;
  if (item.type === 'hierarchical') {
    setTimeout(() => {
      _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.applyCategoryURL(item.urlMod);
    }, delay);
  } else {
    setTimeout(() => {
      if (_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getQueryObject().page) {
        _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.removePageNumberFromUrl(renderOptions.createURL(item));
      } else {
        const currentState = search.getUiState();
        if (currentState[algoliaConfig.config['algolia-index-name']].page > 0) {
          currentState[algoliaConfig.config['algolia-index-name']].page = 0;
          search.setUiState(currentState);
        }
        renderOptions.refine(item);
      }
    }, delay);
  }
};

// Create the custom widget
const customCurrentRefinements = instantsearch.connectors.connectCurrentRefinements(renderCurrentRefinements);

/***/ }),

/***/ "./src/widgets/sorting.js":
/*!********************************!*\
  !*** ./src/widgets/sorting.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createSorting: () => (/* binding */ createSorting)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
function _objectEntries(obj) {
  var entries = [];
  var keys = Object.keys(obj);
  for (var k = 0; k < keys.length; k++) entries.push([keys[k], obj[keys[k]]]);
  return entries;
}
/** @module sorting */


const createSorting = (search, algoliaConfig) => {
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.elementExists(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.sorting, 'sorting-selector'))) {
    const sortContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getWidgetContainer(algoliaConfig.sorting, 'sorting-selector');
    const sortByData = {
      items: [],
      container: sortContainer,
      algoliaConfig
    };

    // Create the custom widget
    const customSortBy = instantsearch.connectors.connectSortBy(renderSortBy);

    // iterate though sorting from config and add items
    _objectEntries(algoliaConfig.sorting).forEach(_ref => {
      let [key, value] = _ref;
      if (value['algolia-index-name'] && value.text) {
        sortByData.items.push({
          value: value['algolia-index-name'],
          label: value.text
        });
      }
    });

    // Instantiate the custom widget
    search.addWidgets([customSortBy(sortByData)]);
  }
};

// Create the render function
function renderSortBy(renderOptions, isFirstRender) {
  const {
    options,
    currentRefinement,
    hasNoResults,
    refine,
    widgetParams
  } = renderOptions;
  const {
    algoliaConfig
  } = widgetParams;
  const siteName = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.config, 'site-name');
  const sortLabel = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.sorting, 'sorting-label');
  const isPP = siteName === 'pearsonplus';
  let filterOpen = false;
  if (isFirstRender) {
    const selectId = 'sort-by';
    const select = createSortDropdown(selectId, siteName, refine);

    // create and add label
    const label = document.createElement('label');
    label.setAttribute('for', selectId);
    label.insertAdjacentHTML('beforeend', sortLabel);
    widgetParams.container.appendChild(label);
    if (select) {
      widgetParams.container.appendChild(select);
    }
    widgetParams.container.classList.add('c-dropdown', 'c-dropdown--inline');

    // Add filter mobile button
    const mobileFiltersButtonLabel = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.facets, 'mobile-filters-button-label', 'Filter by');
    const filterButton = document.createElement('BUTTON');
    filterButton.classList.add('a-search__filters');
    filterButton.innerText = mobileFiltersButtonLabel;
    widgetParams.container.parentElement.appendChild(filterButton);
    // Close filters button tablet/mobile
    const closeFiltersBtn = document.querySelector('.close-filters-button');
    // Add filterSection mobile
    const filterSection = document.createElement('div');
    filterSection.classList.add('syncedFilterSection');
    // Get statsContainer for educator or filter-button/sort-by container for other sites
    const siteSyncedSibling = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getSiteSyncedSibling(siteName, widgetParams, algoliaConfig.pagination);
    // Get second parent for element - synced filters "col-" parent
    const syncedParent = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getSecondParent(siteSyncedSibling);
    // Append synced filters to parent element
    _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.appendChildElement(syncedParent, filterSection);
    // Tablet/mobile prevent body scroll on open filters
    const toggleBodyScroll = () => {
      document.body.classList.toggle('preventScroll');
    };
    const activeSection = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getContainerNode(algoliaConfig.config['search-section']);
    const resultsSection = activeSection.querySelector('.searchResults-section');
    const filterColumn = resultsSection && resultsSection.querySelector('.col-md-3.col-12');
    const handleBackgroundClick = e => {
      if (filterColumn && !filterColumn.contains(e.target) && filterColumn !== e.target) {
        closeFilters();
      }
    };
    const listenBackgroundClick = () => {
      setTimeout(() => {
        activeSection.addEventListener('mousedown', handleBackgroundClick);
      }, 0);
    };
    const unlistenBackgroundClick = () => {
      activeSection.removeEventListener('mousedown', handleBackgroundClick);
    };
    const openFilters = () => {
      if (filterOpen) return;
      const searchFilters = activeSection.querySelector('.a-search__filters');
      searchFilters && searchFilters.classList.toggle('isActive');
      activeSection.classList.add('filters--open');
      filterOpen = true;
      if (!isPP) {
        toggleBodyScroll();
      }
      listenBackgroundClick();
    };
    const closeFilters = () => {
      if (!filterOpen) return;
      const searchFilters = activeSection.querySelector('.a-search__filters');
      searchFilters && searchFilters.classList.toggle('isActive');
      activeSection.classList.remove('filters--open');
      filterOpen = false;
      if (!isPP) {
        toggleBodyScroll();
      }
      unlistenBackgroundClick();
    };
    const toggleFilters = () => {
      filterOpen ? closeFilters() : openFilters();
    };
    filterButton.addEventListener('click', toggleFilters);
    if (activeSection.querySelector('.filter-content a')) {
      activeSection.querySelector('.filter-content a').onclick = event => {
        event.preventDefault();
        closeFilters();
      };
    }

    // Close filters button tablet/mobile - Educator
    if (siteName === 'educator') {
      closeFiltersBtn.addEventListener('click', closeFilters);
    }
  }
  const select = widgetParams.container.querySelector('#sort-by');
  if (select) {
    select.disabled = hasNoResults;
    if (siteName === 'assessments') {
      // Extract currently selected sorting option
      const currentlySelected = options.filter(option => option.value === currentRefinement);
      select.innerHTML = "\n        <p class=\"sort-by__label\" role=\"button\" tabindex=\"0\" id=\"dropdown__selected\">".concat(currentlySelected[0].label, "</p>\n        <ul class=\"sort-by__dropdown\" role=\"list\">\n          ").concat(options.map(option => "\n                <li\n                  class=\"sort-by__items\"\n                  id=\"".concat(option.value, "\"\n                  ").concat(option.value === currentRefinement ? 'data-selected="true"' : '', "\n                  tabindex=\"0\"\n                >\n                  ").concat(option.label, "\n                </li>\n              ")).join(''), "\n        </ul>\n      ");
    } else {
      select.innerHTML = "\n        ".concat(options.map(option => "\n              <option\n                value=\"".concat(option.value, "\"\n                ").concat(option.value === currentRefinement ? 'selected' : '', "\n              >\n                ").concat(option.label, "\n              </option>\n            ")).join(''), "\n      ");
    }
  }
}


/**
 * @name filterClickedElement
 * @description Filters for click event target and triggers specific action
 * @param {Object} event Click Event Object
 * @param {Function} refineFunc Function to trigger Algolia refine
 */
function filterClickedElement(event, refineFunc) {
  // If dropdown label is clicked
  if (event.target.classList.contains('sort-by__label')) {
    // Attach class to root element ( class used for opening/closing of dropdown )
    event.target.parentElement.parentElement.classList.toggle('isOpen');
  }
  // In case dropdown item is clicked
  if (event.target.classList.contains('sort-by__items')) {
    // Remove opening/closing CSS class from root element
    document.querySelector('.c-dropdown.isOpen').classList.remove('isOpen');
    // And trigger Algolias refine function
    refineFunc(event.target.id);
  }
}

/**
 * @name closeDropdown
 * @description Closes dropdown element on losing focus
 * @param {Object} event Click Event Object
 */
function closeDropdown(event) {
  if (!event.target.classList.contains('sort-by__label') && !event.target.classList.contains('sort-by__items')) {
    if (document.querySelector('.c-dropdown.isOpen')) {
      document.querySelector('.c-dropdown.isOpen').classList.remove('isOpen');
    }
  }
}

/**
 * @name createSortDropdown
 * @description Creation of the dropdown component
 * @param {String} id ID to for dropdown element
 * @param {Object} siteName Current site name that Algolia search belongs to
 * ( used for differentiating which dropdown type we need )
 * @param {refine} refineFunc Algolias refine function used to sort differently results after dropdown change
 */
function createSortDropdown(id, siteName, refineFunc) {
  if (siteName !== undefined) {
    let selectElement;
    if (siteName === 'assessments') {
      selectElement = document.createElement('div');
    } else {
      selectElement = document.createElement('select');
    }
    selectElement.setAttribute('id', id);
    selectElement.setAttribute('name', id);
    if (siteName === 'educator') {
      selectElement.classList.add('input', 'form-control');
    } else {
      selectElement.classList.add('input');
    }
    if (siteName === 'assessments') {
      // In case of Assessments website we use these events since dropdown is of different structure ( DIV not Select )
      // Attach click event to label and list items ( dropdown items )
      selectElement.addEventListener('click', event => filterClickedElement(event, refineFunc));
      // If dropdown loses the focus, close it
      document.addEventListener('click', event => closeDropdown(event));
    } else {
      // In case of other websites we use regular Select box for refine button
      selectElement.addEventListener('change', event => refineFunc(event.target.value));
    }
    return selectElement;
  }
  return null;
}

/***/ }),

/***/ "./src/widgets/taxonomy.js":
/*!*********************************!*\
  !*** ./src/widgets/taxonomy.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createTaxonomy: () => (/* binding */ createTaxonomy),
/* harmony export */   hasHierarchicalFacetsRefinements: () => (/* binding */ hasHierarchicalFacetsRefinements)
/* harmony export */ });
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/** @module taxonomy */

function getCategoryDescription(hits, hierarchicalFacetsRefinements) {
  let description = '';
  const {
    categoryDescriptions
  } = hits[0];
  categoryDescriptions.forEach(categoryDescription => {
    if (categoryDescription[hierarchicalFacetsRefinements]) {
      description = categoryDescription[hierarchicalFacetsRefinements];
    }
  });
  return description;
}
function extractCurrentCategory(hierarchicalFacetsRefinements) {
  const splittedCategories = hierarchicalFacetsRefinements[0].split(' > ');
  return splittedCategories[splittedCategories.length - 1];
}

// eslint-disable-next-line import/no-mutable-exports
let hasHierarchicalFacetsRefinements;
const createTaxonomy = (search, algoliaConfig) => {
  if (_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.elementExists(_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.taxonomy, 'container'))) {
    const taxonomyContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getWidgetContainer(algoliaConfig.taxonomy);

    // category and description
    search.addWidgets([{
      render(params) {
        const {
          results
        } = params;
        const query = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.getQueryObject().aq;
        let template = '';
        if (results.hits.length > 0 && (query === undefined || query.length === 0)) {
          let categoryNameSelector = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.taxonomy, 'category-name-selector', '.a-search__header');
          categoryNameSelector = categoryNameSelector.replace('.', '');
          const hierarchicalFacetsRefinements = params.helper.state.hierarchicalFacetsRefinements['categoriesHierarchical.lvl0'];
          hasHierarchicalFacetsRefinements = hierarchicalFacetsRefinements && hierarchicalFacetsRefinements.length > 0 && hierarchicalFacetsRefinements[0] !== '';
          if (hasHierarchicalFacetsRefinements) {
            template += "<div\n                class=\"".concat(categoryNameSelector, " active-category\">\n              <h1 tabindex=\"0\" style=\"outline: 0 !important\">\n                ").concat(extractCurrentCategory(hierarchicalFacetsRefinements), "\n              </h1>");
            if (_algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.returnConfigProperty(algoliaConfig.taxonomy, 'display-description', false)) {
              template += "<p>\n                ".concat(getCategoryDescription(params.helper.lastResults.hits, hierarchicalFacetsRefinements), "\n                </p>");
            }
            template += '</div>';
          }
        }
        taxonomyContainer.innerHTML = _algolia_utils__WEBPACK_IMPORTED_MODULE_0__.utils.XssHtmlSanitizer('');
        taxonomyContainer.insertAdjacentHTML('beforeend', template);
      }
    }]);
  }
};


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!******************************************!*\
  !*** ./src/educator/algolia-educator.js ***!
  \******************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _init__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../init */ "./src/init.js");
/* harmony import */ var _algolia_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../algolia-common */ "./src/algolia-common.js");
/* harmony import */ var _algolia_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../algolia-utils */ "./src/algolia-utils.js");
/* harmony import */ var _widgets_hits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../widgets/hits */ "./src/widgets/hits.js");
/* harmony import */ var _widgets_facets_category_facet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../widgets/facets/category-facet */ "./src/widgets/facets/category-facet.js");
/* harmony import */ var _widgets_sorting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../widgets/sorting */ "./src/widgets/sorting.js");
/* harmony import */ var _widgets_pagination__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../widgets/pagination */ "./src/widgets/pagination.js");
/* harmony import */ var _widgets_count_selector__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../widgets/count-selector */ "./src/widgets/count-selector.js");
/* harmony import */ var _widgets_breadcrumb__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../widgets/breadcrumb */ "./src/widgets/breadcrumb.js");
/* harmony import */ var _widgets_taxonomy__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../widgets/taxonomy */ "./src/widgets/taxonomy.js");
/* harmony import */ var _widgets_refinement_list__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../widgets/refinement-list */ "./src/widgets/refinement-list.js");
/* harmony import */ var _auto_suggest_educator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./auto-suggest-educator */ "./src/educator/auto-suggest-educator.js");
/* harmony import */ var _templates_educator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./templates-educator */ "./src/educator/templates-educator.js");
/* harmony import */ var _plp_view_switcher__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../plp-view-switcher */ "./src/plp-view-switcher.js");
/* harmony import */ var _widgets_marketing_banner__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../widgets/marketing-banner */ "./src/widgets/marketing-banner.js");
/* harmony import */ var _widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../widgets/autosuggest/recent-search */ "./src/widgets/autosuggest/recent-search.js");
/* harmony import */ var _analytics__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../analytics */ "./src/analytics.js");
/* eslint-disable no-underscore-dangle */
/* eslint-disable max-len */
/** @module educator */

/* eslint-disable no-nested-ternary */

















const formatsFacetConfig = _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig.facets.facet_1;
const categoryFacetConfig = _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig.facets.facet_2;
const priceFacetConfig = _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig.facets.facet_3;
const editionsFacetConfig = _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig.facets.facet_4;
const currentRefinementsConfig = _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig['current-refinements'];
const categoryNameSelector = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig.taxonomy, 'category-name-selector', '.a-search__header');
function displayResults(items) {
  _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.removePreloader();
  const querySearchResults = document.querySelector('.querySearchResults');
  if (querySearchResults) {
    const query = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getQueryObject().aq;
    const noQueryHeader = document.querySelector('.noQueryHeader');
    if (query === undefined || query.length === 0) {
      querySearchResults.classList.add('hide');
      const taxonomyHeader = document.querySelector(categoryNameSelector);
      if (taxonomyHeader && taxonomyHeader.hasChildNodes()) {
        noQueryHeader.classList.add('hide');
      }
    } else {
      noQueryHeader.classList.add('hide');
      const q = decodeURIComponent(query);
      if (!querySearchResults.children[0].textContent.endsWith("\u201C".concat(q, "\u201D"))) {
        querySearchResults.children[0].textContent = querySearchResults.children[0].textContent.replace('{query}', q);
      }
    }
  }
  toggleResultVisibility(true);
}
function displayNoResults() {
  _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.removePreloader();
  const noResultsMessage = document.querySelector('.programList__msg');
  if (noResultsMessage) {
    const url = window.location.href.replace(/pearsonplus\/search(.content-data)?.html/, 'search.html');
    noResultsMessage.querySelector('a').href = url;
  }
  const query = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getQueryObject().aq;
  const queryNoSearchResults = document.querySelector('.queryNoSearchResults');
  let decodedQuery;
  if (typeof query !== 'undefined') {
    decodedQuery = decodeURIComponent(query);
  } else {
    decodedQuery = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getLastPathElement();
  }
  if (queryNoSearchResults && !queryNoSearchResults.children[0].textContent.endsWith("\u201C".concat(decodedQuery, "\u201D"))) {
    queryNoSearchResults.children[0].textContent = queryNoSearchResults.children[0].textContent.replace('{query}', decodedQuery);
  }
  toggleResultVisibility(false);
}
const toggleResultVisibility = hasResult => {
  const noSearchResults = document.querySelector('.noSearchResults');
  noSearchResults === null || noSearchResults === void 0 ? void 0 : noSearchResults.classList.toggle('hide', hasResult);
  const searchResults = document.querySelector('.searchResults');
  searchResults === null || searchResults === void 0 ? void 0 : searchResults.classList.toggle('hide', !hasResult);
};

// All widgets that will be used for search
const widgets = [];
(0,_widgets_breadcrumb__WEBPACK_IMPORTED_MODULE_8__.createBreadcrumb)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.search, _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig);
(0,_widgets_taxonomy__WEBPACK_IMPORTED_MODULE_9__.createTaxonomy)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.search, _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig);
(0,_widgets_pagination__WEBPACK_IMPORTED_MODULE_6__.createPagination)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.search, _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig);
(0,_widgets_count_selector__WEBPACK_IMPORTED_MODULE_7__.createCountSelector)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.search, _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig);
(0,_widgets_marketing_banner__WEBPACK_IMPORTED_MODULE_14__.createMarketingBanner)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.search, _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig);
(0,_widgets_sorting__WEBPACK_IMPORTED_MODULE_5__.createSorting)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.search, _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig);
const hitsInitOptions = {
  container: _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig.hits, 'selector'),
  template: _templates_educator__WEBPACK_IMPORTED_MODULE_12__.templates.plp.hits,
  onRender: {
    displayNoResults
  }
};
const plpSwitcherConfig = _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig['plp-view-switcher'];
if (_algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.elementExists(plpSwitcherConfig.container)) {
  const viewSwitcherContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getWidgetContainer(plpSwitcherConfig, 'container');
  hitsInitOptions.onRender.init = () => {
    const {
      listViewControl,
      gridViewControl
    } = (0,_plp_view_switcher__WEBPACK_IMPORTED_MODULE_13__.addViewSwitcher)(viewSwitcherContainer, _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig);
    listViewControl.addEventListener('click', () => {
      (0,_widgets_marketing_banner__WEBPACK_IMPORTED_MODULE_14__.hitsBannerReposition)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig);
    });
    gridViewControl.addEventListener('click', () => {
      (0,_widgets_marketing_banner__WEBPACK_IMPORTED_MODULE_14__.hitsBannerReposition)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig);
    });
  };
}
hitsInitOptions.onRender.displayResults = () => {
  displayResults();
  _templates_educator__WEBPACK_IMPORTED_MODULE_12__.templates.plp.marketingBanner();
};
(0,_widgets_hits__WEBPACK_IMPORTED_MODULE_3__.createHits)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.search, hitsInitOptions);
const renderRefinementList = (renderOptions, isFirstRender) => {
  var _widgetParams$contain;
  const {
    items,
    refine,
    isShowingMore,
    toggleShowMore,
    canToggleShowMore,
    widgetParams,
    instantSearchInstance
  } = renderOptions;
  if (isFirstRender) {
    const button = document.createElement('button');
    button.classList.add('ais-RefinementList-showMore');
    const refinementListWrapper = document.createElement('div');
    button.addEventListener('click', () => {
      toggleShowMore();
    });
    const descriptionElement = document.createElement('p');
    descriptionElement.classList.add('visuallyHidden');
    descriptionElement.setAttribute('id', 'description');
    descriptionElement.textContent = "More subjects options will be revealed above";
    widgetParams.container.appendChild(refinementListWrapper);
    widgetParams.container.appendChild(button);
    widgetParams.container.appendChild(descriptionElement);
  }
  widgetParams.container.querySelector('div').innerHTML = _templates_educator__WEBPACK_IMPORTED_MODULE_12__.templates.plp.customRefinementList(items, widgetParams);
  [...widgetParams.container.querySelectorAll('.ais-RefinementList-item')].forEach(element => {
    element.addEventListener('click', event => {
      event.preventDefault();
      refine(event.currentTarget.dataset.value);
    });
  });
  (_widgetParams$contain = widgetParams.container.querySelector('.ais-Panel-clearRefinements')) === null || _widgetParams$contain === void 0 ? void 0 : _widgetParams$contain.addEventListener('click', () => {
    instantSearchInstance.helper.clearRefinements().search();
  });
  const showMoreLabel = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig.facets, 'show_more_label', 'Show more +');
  const showLessLabel = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig.facets, 'show_less_label', 'Show less -');
  const showMoreButton = widgetParams.container.querySelector('.ais-RefinementList-showMore');
  showMoreButton.textContent = isShowingMore ? showLessLabel : showMoreLabel;
  if (isShowingMore) {
    showMoreButton.setAttribute('aria-label', "Show less ".concat(widgetParams.label, " options"));
    showMoreButton.removeAttribute('aria-describedby');
  } else {
    showMoreButton.setAttribute('aria-label', "Show more ".concat(widgetParams.label, " options"));
    showMoreButton.setAttribute('aria-describedby', 'description');
  }
  showMoreButton.style.display = !canToggleShowMore ? 'none' : '';
};
const customRefinementList = instantsearch.connectors.connectRefinementList(renderRefinementList);
if (_algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.elementExists(formatsFacetConfig.container)) {
  const formatsContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getContainerNode(formatsFacetConfig.container);
  widgets.push(customRefinementList({
    container: formatsContainer,
    attribute: 'subFormats',
    autoHideContainer: false,
    limit: 5,
    showMore: true,
    sortBy: ['count:desc'],
    label: formatsFacetConfig.text
  }));
}
if (_algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.elementExists(priceFacetConfig.container)) {
  const priceContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getContainerNode(priceFacetConfig.container);
  widgets.push(customRefinementList({
    container: priceContainer,
    attribute: 'priceGroup',
    autoHideContainer: false,
    limit: 5,
    showMore: true,
    label: priceFacetConfig.text
  }));
}
if (_algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.elementExists(editionsFacetConfig.container)) {
  const editionContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getContainerNode(editionsFacetConfig.container);
  widgets.push(customRefinementList({
    container: editionContainer,
    attribute: 'newEditions',
    autoHideContainer: false,
    limit: 5,
    showMore: true,
    sortBy: ['count:desc'],
    label: editionsFacetConfig.text
  }));
}
if (_algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.elementExists(currentRefinementsConfig.container)) {
  const refinementsContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getContainerNode(currentRefinementsConfig.container);
  const refinementsWidget = (0,_widgets_refinement_list__WEBPACK_IMPORTED_MODULE_10__.customCurrentRefinements)({
    container: refinementsContainer,
    search: _algolia_common__WEBPACK_IMPORTED_MODULE_1__.search,
    algoliaConfig: _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig
  });
  widgets.push(refinementsWidget);
}

// Category facet
if (_algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.elementExists(categoryFacetConfig.container)) {
  const categoryContainer = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.getContainerNode(categoryFacetConfig.container);
  const categoryText = _algolia_utils__WEBPACK_IMPORTED_MODULE_2__.utils.returnConfigProperty(categoryFacetConfig, 'text');
  categoryContainer.insertAdjacentHTML('beforebegin', "<div class=\"close-filters-section\">\n      <button class=\"close-filters-button\"></button>\n    </div>");
  const refinementCategoryData = {
    container: categoryContainer,
    attributes: ['categoriesHierarchical.lvl0', 'categoriesHierarchical.lvl1', 'categoriesHierarchical.lvl2'],
    labels: categoryText,
    limit: 5,
    showMore: true,
    showMoreLimit: 50,
    search: _algolia_common__WEBPACK_IMPORTED_MODULE_1__.search,
    algoliaConfig: _algolia_common__WEBPACK_IMPORTED_MODULE_1__.algoliaConfig,
    categoryFacetConfig,
    displayFilterLabel: true
  };
  widgets.push((0,_widgets_facets_category_facet__WEBPACK_IMPORTED_MODULE_4__.refinementCategoriesWithPanel)(refinementCategoryData));
}
if (widgets.length > 0) {
  const filterWidget = instantsearch.widgets.configure({
    filters: '(isShownOnPLPFlag:"true" AND isAllProductsAreUnavailable:"false")'
  });
  widgets.push(filterWidget);
  const customSearchBox = instantsearch.connectors.connectSearchBox(() => null);
  widgets.push(customSearchBox({}));
  _algolia_common__WEBPACK_IMPORTED_MODULE_1__.search.addWidgets(widgets);
  _algolia_common__WEBPACK_IMPORTED_MODULE_1__.search.start();
  (0,_analytics__WEBPACK_IMPORTED_MODULE_16__.setAnalyticsToken)(_algolia_common__WEBPACK_IMPORTED_MODULE_1__.search);
}
const algoliaStartEvent = new Event('algoliaStart');
document.dispatchEvent(algoliaStartEvent);
window.openPDP = function openPDP(url, isbn13) {
  (0,_widgets_autosuggest_recent_search__WEBPACK_IMPORTED_MODULE_15__.setRecentlyViewed)(isbn13);
  window.location.href = url;
};

// Add global variable to check if algolia is available on the page
window.isAlgoliaAvailable = true;
})();

/******/ })()
;
//# sourceMappingURL=educator.js.map

</script>

</body>
</html>
