<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R.api.top-1.8.0.min.html</title>
</head>
<body>

<script>
if(Rmodules && typeof Rmodules.define === 'function') { Rmodules.define('R.api.top', '1.8.0', ['R^1', 'R.api^1'], [], function(R, RapiModule, undefined) {
/*
 R.api.top-1.8.0.js
 Copyright (c) 2023 Rakuten.Inc
 Date: 2023-01-16 11:34:11
*/

!function(a,b){"use strict";var c=a.$,d="https://g01.api.bookmark.rakuten.co.jp",e={Status:{SUCCESS:0,EMPTY:1,NOT_LOGGED:2}};return e.loadBookmarkItems=function(b){var f,g=c.Deferred(),h=c.extend({mock_id:"BOOKMARK",limit:20},b);return f=a.extendApiSettings({url:a.coalesce(h.url,d),data:{param2:h.limit}},h),a.requestData(f).fail(g.reject).done(function(b){var c,d,f,h=[];if(b&&-1!==a.find(e.Status,function(a){return a===b.code})){if(b.items)for(c=0,d=b.items.length;d>c;c++)f=new a.Item(b.items[c]),
h.push(f);g.resolve(h,b.code)}else g.reject(b)}),g.promise()},a.api.bookmark=e,a.api.bookmark}(R),function(a,b){"use strict";var c=a.$,d={1:1,2:2},e={1:"//recommend.api.rakuten.co.jp/ichiba/ranking/items.json",2:"//grp03.api.rp.rakuten.co.jp/geap/v1/ichiba/rcmd/recommend_ichiba.json"},f=["Success","NotFound"],g={1:{ICHIBA_TOP:"1",STEP5:"34"},2:{ICHIBA_TOP:"00-00-000-001",STEP5:"00-00-000-034"}};a.api.inShopRanking={Encoding:{UTF_8:"utf-8",EUC_JP:"euc-jp"},ServiceId:{ICHIBA_TOP:"ICHIBA_TOP",STEP5:"STEP5"
}},a.api.inShopRanking.ResponseData=function(b){if(this.shops=[],b.shops){var c,d=b.shops,e=d.length;for(c=0;e>c;c++)this.shops.push(new a.api.inShopRanking.Shops(d[c]))}},a.api.inShopRanking.Shops=function(b){var c,d,e=b.items||b.item;for(this.items=[],c=0,d=e.length;d>c;c++)this.items.push(new a.Item(e[c]));b.tracking_tag&&(this.rtg=b.tracking_tag)},a.api.inShopRanking.getServiceId=function(a,b){return g[a][b]},a.api.inShopRanking.loadItems=function(b,g){var h,i,j=c.Deferred(),k=c.extend({mock_id:"SHOP_RANKING",
version:d[1]},b);if(!k.sid)throw"required options.sid not set";if(!(k.version in d))throw"required version is not valid or unspecified";return i=e[k.version],k.sid=a.api.inShopRanking.getServiceId(k.version,k.sid),h=a.extendApiSettings({url:i,data:{sid:k.sid,topn:k.max_items}},k),k.version===d[1]?h.data.shop_ids=g:k.version===d[2]&&(h.data.shop_id=g,h.traditional=!0,a.isArray(g)&&(h.data.groupby="shop_id")),k.encoding&&(h.data.encoding=k.encoding),a.requestData(h).fail(j.reject).done(function(b){
var c,e=!1;!b||k.version!==d[1]||0!==b.code&&1!==b.code?b&&k.version===d[2]?(a.isArray(g)||(e=0===b.item.length,b=[b]),-1!=f.indexOf(b[0].status)?(c=e?{}:{shops:b},j.resolve(new a.api.inShopRanking.ResponseData(c))):j.reject(b)):j.reject(b):j.resolve(new a.api.inShopRanking.ResponseData(b))}),j.promise()}}(R),function(a,b){"use strict";var c=a.$,d="//ashiato.rakuten.co.jp/rms/sd/ashiato/vc",e="//browsing.history.api.prod.jp.local/rms/sd/ashiato/bvc",f={Action:{SHOW:6,DELETE:7},Type:{ITEM:1,SEARCH_KEYWORD:2,
MERCHANT:3,PRODUCT:4,GENRE:5,ITEM_PRODUCT:14},Encoding:{UTF_8:1,EUC_JP:2},ServiceId:{ICHIBA_TOP:1,WS_IZA:20010049},DisplayOrder:{PRICE_ASC:1,PRICE_DESC:2,BROWSING_TIME_DESC:5,BROWSING_TIME_ASC:6,AFFILIATE_RATE_ASC:7,AFFILIATE_RATE_DESC:8,REVIEW_NUMBER_ASC:9,REVIEW_NUMBER_DESC:10,BROWSING_TIME_EARLIER_DESC:51,BROWSING_TIME_EARLIER_ASC:61,BROWSING_TIME_LATER_DESC:52,BROWSING_TIME_LATER_ASC:62},Category:{ALL:0,SHOPPING_AVAILABLE:1,GROUP_BUY:2,RAKUTEN_AUCTION_BC_CC:3,PRESENT:4,CATALOG_REQUEST:5,RAKUTEN_AUCTION:6,
RAKUTEN_BOOKS:7,ICHIBA_MERCHANT:8,NORMAL_ITEM:9},ApiErrorHandleType:{ICHIBA_AND_API:1,ONLY_ICHIBA:2,ONLY_API:3,ICHIBA_OR_API:4}};return f.loadItems=function(b){var g,h=c.Deferred(),i=c.extend({mock_id:"BROWSING_HISTORY_LOAD_ITEMS",encoding:f.Encoding.EUC_JP,outputPage:1,genres:[],order:f.DisplayOrder.BROWSING_TIME_DESC,category:f.Category.ALL,apiErrorHandleType:f.ApiErrorHandleType.ICHIBA_AND_API,nameMaxLength:50,secure:!1,internal:!1},b);if(!i.sid)throw"options.sid required";return g=a.extendApiSettings({
url:i.internal?e:d,data:{act:f.Action.SHOW,k:f.Type.ITEM,sid:i.sid,c:i.encoding,p:i.outputPage,s:i.order,e:i.category,es:i.apiErrorHandleType,"in":i.nameMaxLength,secure:i.secure}},i),i.internal&&i.easyId&&(g.data.eid=i.easyId),i.genres.length>0&&(g.url=a.addSerializedArrayToUrl(g.url,"g",i.genres)),i.browsingTime&&i.order>50&&(g.d=a.Date(i.browsingTime).getNumericFormat({longYear:!1,seconds:!0})),a.requestData(g).fail(function(a){h.reject(a)}).done(function(b){var c,d,e,f=[];if(b&&0===b.code){for(c=0,
d=b.items.length;d>c;c++)e=b.items[c],f.push(new a.Item(e));h.resolve(f)}else b&&1===b.code?h.resolve(f):h.reject(b)}),h.promise()},f.loadSearchKeyWords=function(b){var g,h=c.Deferred(),i=c.extend({mock_id:"BROWSING_HISTORY_LOAD_SEARCH_KEYWORDS",encoding:f.Encoding.EUC_JP,outputPage:1,internal:!1,order:f.DisplayOrder.BROWSING_TIME_DESC,category:f.Category.ALL,apiErrorHandleType:f.ApiErrorHandleType.ICHIBA_AND_API},b);if(!i.sid)throw"options.sid required";return g=a.extendApiSettings({url:i.internal?e:d,
data:{act:f.Action.SHOW,k:f.Type.SEARCH_KEYWORD,sid:i.sid,c:i.encoding,p:i.outputPage,s:i.order,e:i.category}},i),i.internal&&i.easyId&&(g.data.eid=i.easyId),a.requestData(g).fail(function(a){h.reject(a)}).done(function(b){var c,d,e,f=[];if(b&&0===b.code){for(c=0,d=b.searchs.length;d>c;c++)e=b.searchs[c],f.push(new a.SearchKeyword(e));h.resolve(f)}else b&&1===b.code?h.resolve(f):h.reject(b)}),h.promise()},f.loadMerchants=function(b){var g,h=c.Deferred(),i=c.extend({mock_id:"BROWSING_HISTORY_LOAD_MERCHANTS",
encoding:f.Encoding.EUC_JP,outputPage:1,internal:!1,order:f.DisplayOrder.BROWSING_TIME_DESC,category:f.Category.ALL,apiErrorHandleType:f.ApiErrorHandleType.ICHIBA_AND_API},b);if(!i.sid)throw"options.sid required";return g=a.extendApiSettings({url:i.internal?e:d,data:{act:f.Action.SHOW,k:f.Type.MERCHANT,sid:i.sid,c:i.encoding,p:i.outputPage,s:i.order,e:i.category,es:i.apiErrorHandleType}},i),i.internal&&i.easyId&&(g.data.eid=i.easyId),a.requestData(g).fail(function(a){h.reject(a)}).done(function(b){
var c,d,e,f=[];if(b&&0===b.code){for(c=0,d=b.shops.length;d>c;c++)e=b.shops[c],f.push(new a.Shop(e));h.resolve(f)}else b&&1===b.code?h.resolve(f):h.reject(b)}),h.promise()},f.loadProducts=function(b){var g,h=c.Deferred(),i=c.extend({mock_id:"BROWSING_HISTORY_LOAD_PRODUCTS",encoding:f.Encoding.EUC_JP,outputPage:1,internal:!1,order:f.DisplayOrder.BROWSING_TIME_DESC},b);if(!i.sid)throw"options.sid required";return g=a.extendApiSettings({url:i.internal?e:d,data:{act:f.Action.SHOW,k:f.Type.PRODUCT,sid:i.sid,
c:i.encoding,p:i.outputPage,s:i.order,e:f.Category.ALL}},i),i.internal&&i.easyId&&(g.data.eid=i.easyId),a.requestData(g).fail(function(a){h.reject(a)}).done(function(b){var c,d,e,f=[];if(b&&0===b.code){for(c=0,d=b.products.length;d>c;c++)e=b.products[c],f.push(new a.Product(e));h.resolve(f)}else b&&1===b.code?h.resolve(f):h.reject(b)}),h.promise()},f.loadItemProducts=function(b){var g,h=c.Deferred(),i=c.extend({mock_id:"BROWSING_HISTORY_LOAD_ITEM_PRODUCTS",encoding:f.Encoding.EUC_JP,outputPage:1,
internal:!1,order:f.DisplayOrder.BROWSING_TIME_DESC},b);if(!i.sid)throw"options.sid required";return g=a.extendApiSettings({url:i.internal?e:d,data:{act:f.Action.SHOW,k:f.Type.ITEM_PRODUCT,sid:i.sid,c:i.encoding,p:i.outputPage,s:i.order,e:f.Category.ALL}},i),i.internal&&i.easyId&&(g.data.eid=i.easyId),a.requestData(g).fail(function(a){h.reject(a)}).done(function(b){var c,d,e,f=[];if(b&&0===b.code){for(c=0,d=b.itemproducts.length;d>c;c++)e=b.itemproducts[c],f.push(new a.Product(e));h.resolve(f)}else b&&1===b.code?h.resolve(f):h.reject(b);
}),h.promise()},f.remove=function(b){function g(a,b){return a+":"+b.getItemId()+":"+b.getShopId()+":"+b.getShopUrl()}function h(a,b){return a+":"+b.getHash()}function i(a,b){return a+":"+b.getShopUrl()}function j(a,b){return a+":"+b.getRanCode()}var k,l,m,n,o,p,q,r=c.Deferred(),s=c.extend({mock_id:"BROWSING_HISTORY_REMOVE",elements:[],secure:!1,internal:!1},b),t=[];if(!s.sid)throw"options.sid required";if(0!==s.elements.length){for(k=s.elements[0],k instanceof a.Item?(m=g,n=f.Type.ITEM):k instanceof a.SearchKeyword?(m=h,
n=f.Type.SEARCH_KEYWORD):k instanceof a.Merchant?(m=i,n=f.Type.MERCHANT):k instanceof a.Product&&(m=j,n=f.Type.PRODUCT),p=0,q=s.elements.length;q>p;p++)try{l=m(s.sid,s.elements[p]),t.push(l)}catch(u){}return o=a.extendApiSettings({url:a.addSerializedArrayToUrl(s.internal?e:d,"ih",t),data:{act:f.Action.REMOVE,k:n,sid:s.sid}},s),s.internal&&s.easyId&&(o.data.eid=s.easyId),a.requestData(o).fail(function(a){r.reject(a)}).done(function(a){a&&0===a.code?r.resolve():r.reject(a)}),r.promise()}},a.api.browsingHistory=f,
a.api.browsingHistory}(R),function(a,b){"use strict";var c=a.$,d="https://grp03.api.rp.rakuten.co.jp/geap/v1/ichiba/rcmd/recommend_shop.json";a.api.shopRecommendation={ServiceId:{PC:"00-00-000-007",SP:"00-00-000-006",STEP5:"00-00-000-030",STEP5_ITEMS:"00-00-000-038"},Encoding:{UTF_8:"utf-8",EUC_JP:"euc-jp"}},a.api.shopRecommendation.loadRecommendedShops=function(b,e){var f,g=c.Deferred(),h=c.extend({mock_id:"SHOP_RECOMMEND"},b);if(!h.sid)throw"required options.sid not set";return f=a.extendApiSettings({
url:d,data:{sid:h.sid,shop_id:e}},h),h.encoding&&(f.data.encoding=h.encoding),a.requestData(f).fail(g.reject).done(function(b){var c,d,e,f=[];if(!b||"Success"!==b.status&&"NotFound"!==b.status)g.reject(b);else{for(c=0,d=b.item.length;d>c;c++)e=new a.Shop(b.item[c]),f.push(e);g.resolve(f)}}),g.promise()},a.api.shopRecommendation.loadRecommendShopItems=function(b,e){var f,g=c.Deferred(),h=c.extend({mock_id:"SHOP_RECOMMEND"},b);if(!h.sid)throw"required options.sid not set";return f=a.extendApiSettings({
url:d,data:{sid:h.sid,shop_id:e}},h),h.encoding&&(f.data.encoding=h.encoding),a.requestData(f).fail(g.reject).done(function(b){var c,d,e,f=[];if(!b||"Success"!==b.status&&"NotFound"!==b.status)g.reject(b);else{for(c=0,d=b.item.length;d>c;c++)e=new a.Item(b.item[c]),f.push(e);g.resolve({items:f,trackingTag:b.tracking_tag,itemCount:b.item_count})}}),g.promise()}}(R),function(a,b){"use strict";function c(b){var c,d,e,f=b.items,g=[];for(c=0,d=f.length;d>c;c++)e=new a.Coupon(f[c]),g.push(e);return g}var d=a.$,e="//api.coupon.rakuten.co.jp/",f="//couponad.marketplace.rakuten.co.jp/api/v1/userSearch/coupon.jsonp",g="//couponad.marketplace.rakuten.co.jp/api/v1/keywordSearch/coupon.jsonp",h={
SUCCESS:1,ERROR:2,MAINTAINANCE:9},i={OK:"ok",NO_DATA:"ok"};a.api.coupon={ServiceId:{ICHIBA_TOP:"001-001",ICHIBA_SEARCH:"001-002",COUPON:"001-003",ICHIBA_GENRE_TOP:"001-004",ICHIBA_EVENT_PAGE:"001-005",SP_APP:"001-006"}},a.api.coupon.ResponseData=function(a){this._data={countLimited:a.res.countLimited}},a.api.coupon.ResponseData.prototype.getCountLimited=function(){return this._data.countLimited},a.api.coupon.getSystemCouponCount=function(b){var c=d.Deferred(),f=a.extendApiSettings({url:e+"getSystemCouponCount"
},b);return a.requestData(f).fail(c.reject).done(function(b){b&&b.code==h.SUCCESS?c.resolve(new a.api.coupon.ResponseData(b)):c.reject(b)}),c.promise()},a.api.coupon.loadRecommendedCouponsForUserSearch=function(b){var e,g=d.Deferred(),h=d.extend({mockid:"COUPON_RECOMMENDATION"},b);if(!h.sid)throw"required options.sid is not set";return e=a.extendApiSettings({url:f,data:{sid:h.sid,sk:h.sk}},h),h.encoding&&(e.data.encoding=h.encoding),a.requestData(e).fail(g.reject).done(function(a){!a||a.status!==i.OK&&a.status!==i.NO_DATA?g.reject(a):g.resolve(c(a));
}),g.promise()},a.api.coupon.loadRecommendedCouponsForKeywordSearch=function(b){var e,f=d.Deferred(),h=d.extend({mockid:"COUPON_RECOMMENDATION"},b);if(!h.sid)throw"required options.sid is not set";if(!h.query)throw"required option query is not set";return e=a.extendApiSettings({url:g,data:{sid:h.sid,query:h.query}},h),h.encoding&&(e.data.encoding=h.encoding),a.requestData(e).fail(f.reject).done(function(a){!a||a.status!==i.OK&&a.status!==i.NO_DATA?f.reject(a):f.resolve(c(a))}),f.promise()}}(R),function(a,b){
"use strict";var c=a.$,d="https://api.r10s.jp/clientinfo";a.api.clientInfo={},a.api.clientInfo.ResponseData=function(a){this._data={countryCode:a.country_code.toLowerCase(),ip:a.ip,location:a.location}},a.api.clientInfo.ResponseData.prototype.getCountryCode=function(){return this._data.countryCode},a.api.clientInfo.ResponseData.prototype.getIp=function(){return this._data.ip},a.api.clientInfo.ResponseData.prototype.getLocation=function(){return this._data.location},a.api.clientInfo.loadClientInfo=function(b){
var e=c.Deferred(),f=a.extendApiSettings({url:d,cacheTtl:60},b);return a.requestData(f).fail(e.reject).done(function(b){b&&b.country_code?e.resolve(new a.api.clientInfo.ResponseData(b)):e.reject(b)}),e.promise()}}(R),function(a,b){"use strict";var c=a.$,d="https://app.rakuten.co.jp/engine/zapi/MemberInformation/GetLimitedTimePointWithRz/20170109";a.api.limitedPoint={},a.api.limitedPoint.ResponseData=function(a){this._data={total:a.termPointTotal,originalData:a.termPointInfo,structuredData:{}};for(var b,c=a.termPointInfo,d=0;c.length>d;d++)b=c[d].termEnd.substring(0,10),
this._data.structuredData[b]=(0|this._data.structuredData[b])+c[d].termPoint},a.api.limitedPoint.ResponseData.prototype.getTotal=function(){return this._data.total},a.api.limitedPoint.ResponseData.prototype.getOriginalData=function(){return this._data.originalData},a.api.limitedPoint.ResponseData.prototype.getLimitedPoint=function(a){return this._data.structuredData[a]||0},a.api.limitedPoint.loadLimitedPointInfo=function(b){var e=c.Deferred();if(!a.user.isLogged(b.mockUserLogged))return e.reject(),
e.promise();var f=""!==b.applicationId?{applicationId:b.applicationId}:{},g=a.extendApiSettings({url:d,data:f,cacheTtl:60},b);return a.requestData(g).fail(e.reject).done(function(b){b&&a.isArray(b.termPointInfo)?e.resolve(new a.api.limitedPoint.ResponseData(b)):e.reject(b)}),e.promise()}}(R),function(a,b){"use strict";var c=a.$,d="//api.ppf.rakuten.co.jp/v1/get/";a.api.ppfBanner={StatusCode:{SUCCESS:91,NO_DATA:92,MAINTENANCE:81,ERROR:11,PARAMETER_ERROR:21},TargetPage:{PC_TOP:2,SP_TOP:4},DeviceType:{
PC:"pc",SP:"sp",SPI:"spi",TABI:"tabi",TABA:"taba",SPIA:"spia",SPAA:"spaa",TABIA:"tabia",TABAA:"tabaa"},ChannelType:{WEB:"web",MAIL:"mail"}};var e={source_id:2,device_type:a.api.ppfBanner.DeviceType.PC,channel_type:a.api.ppfBanner.ChannelType.WEB};a.api.ppfBanner.ResponseData=function(b){this._data={statusCode:b.s,revision:b.r};var d,e,f={},g=b.c||[];c.each(g,function(b,g){f[g.i]=[],d=g.c||[],c.each(d,function(b,c){e=a.getUrlParams(c.l),f[g.i].push({landingUrl:c.l,bannerUrl:c.b,altString:c.a,offerId:e.ppo,
contentId:e.ppc})})}),this._data.items=f},a.api.ppfBanner.ResponseData.prototype.getStatusCode=function(){return this._data.statusCode},a.api.ppfBanner.ResponseData.prototype.getRevision=function(){return this._data.revision},a.api.ppfBanner.ResponseData.prototype.getItems=function(a){return this._data.items[a]||[]},a.api.ppfBanner.ResponseData.prototype.getTargetId=function(){return this._data.targetId},a.api.ppfBanner.loadBannerItems=function(b,f){var g=c.Deferred(),h={};for(var i in e)h[i]=f&&f.hasOwnProperty(i)?f[i]:e[i];
var j=a.extendApiSettings({url:d,data:h},b||{});return a.requestData(j).fail(g.reject).done(function(b){return b&&b.s===a.api.ppfBanner.StatusCode.SUCCESS?g.resolve(new a.api.ppfBanner.ResponseData(b)):g.reject(b)}),g.promise()}}(R);
//# sourceMappingURL=R.api.top-1.8.0.min.js.map
return RapiModule; });}
</script>

</body>
</html>
