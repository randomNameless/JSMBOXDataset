<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8.5.5.0.html</title>
</head>
<body>

<script>
(window.mutinyWpJsonp=window.mutinyWpJsonp||[]).push([[8],{92:function(e,t,n){"use strict";n.r(t),n.d(t,"attachEvents",(function(){return L}));var r=n(1),o=n(4),i=n(56),a=n(0);var s=class{constructor(e,t){this.record=e,this.exporter=t,this.attached=!1,this.logger=new r.a("dom-event")}setup(){!this.attached&&this.shouldAttach()&&(this.attach(),this.attached=!0)}teardown(){if(this.logger.info("Attempting to tear down DomEvent",this.record),this.detach())return this.logger.info(`Removed ${this.record.listener_type} event listener from ${this.record.selector}`),void(this.attached=!1);this.logger.debug("Could not detach DOM event "+this.record)}isAttached(){return this.attached}};var c=class extends s{constructor(e,t,n){super(e,t),this.record=e,this.exporter=t,this.logger=new r.a("dom-event"),this.element=n||(e.selector?document.querySelector(e.selector):null)}attach(){var e;const t=this.listenerType();this.shouldAttach()&&!this.attached&&(null===(e=this.getElement())||void 0===e||e.addEventListener(t,this.listener.bind(this)),this.attached=!0)}shouldAttach(){return!!this.getElement()||(this.logger.info("Attempted to attach listener but could not find target element",this.record),!1)}listenerType(){return this.record.listener_type}detach(){return this.element?(this.element.removeEventListener(this.record.listener_type,this.listener),!0):(this.logger.error("No element to remove listener from",this.record,this.element),!1)}getElement(){return this.isOriginalRendered()?this.element:this.record.selector?(this.element=document.querySelector(this.record.selector),this.element):void 0}isOriginalRendered(){return!!this.element&&(!(this.element instanceof HTMLElement)||document.contains(this.element))}},d=n(35);var u=class extends c{constructor(e,t,n){super(e,t,n),this.record=e}listener(e){const{conversion_configuration_id:t}=this.record;this.exporter.track(d.a.Conversion,{conversionConfigurationId:t,formData:{}})}};var l=class extends c{constructor(e,t,n,r){super(e,t,r),this.record=e,this.userData=n}listener(e){const{value:t}=e.target;this.userData.set(this.record.data.store_key,t)}shouldAttach(){return!0}};const h=e=>e.data.event&&"calendly.event_scheduled"===e.data.event;var f,v=class extends u{constructor(e,t){super(e,t,window),this.record=e}listener(e){e instanceof MessageEvent&&h(e)&&super.listener(e)}listenerType(){return"message"}};!function(e){e.Ready="ready",e.EmailCaptured="emailCapture",e.PhoneCaptured="phoneCapture",e.MeetingBooked="scheduling:meetingBooked"}(f||(f={}));var m=n(10),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const w=e=>!!(null==e?void 0:e.on);const g=()=>p(void 0,void 0,void 0,(function*(){if(w(window.drift))return window.drift;const e=yield Object(m.b)(window,"drift");return yield Object(m.b)(e,"on"),function(e){if(!w(e))throw new Error("Expected the Drift client to be initialized but it is not")}(window.drift),window.drift}));var y=n(46),b=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const k=e=>b(void 0,void 0,void 0,(function*(){const t=yield g();t.on(f.EmailCaptured,Object(y.a)(e,f.EmailCaptured)),t.on(f.PhoneCaptured,Object(y.a)(e,f.PhoneCaptured)),t.on(f.MeetingBooked,Object(y.a)(e,f.MeetingBooked))})),C=e=>k((e=>(t,n)=>{switch(t){case f.EmailCaptured:e.track(d.a.Conversion,{formData:Object.assign(Object.assign({},n),{name:"[Drift] Email Captured"})});break;case f.PhoneCaptured:e.track(d.a.Conversion,{formData:Object.assign(Object.assign({},n),{name:"[Drift] Phone Captured"})});break;case f.MeetingBooked:e.track(d.a.Conversion,{formData:Object.assign(Object.assign({},n),{name:"[Drift] Meeting Booked"})})}})(e));class x extends s{constructor(e,t){super(e,t),this.record=e}attach(){k(this.listener.bind(this))}shouldAttach(){return!0}detach(){return!0}listener(e,t){this.attached&&this.exporter.track(d.a.Conversion,{conversionConfigurationId:this.record.conversion_configuration_id,formData:t})}isOriginalRendered(){return!0}}function O(e){return"hsFormCallback"===e.data.type&&"onFormSubmit"===e.data.eventName}class E extends u{constructor(e,t){super(e,t,window),this.record=e}listener(e){e instanceof MessageEvent&&O(e)&&super.listener(e)}listenerType(){return"message"}}var D=class extends s{constructor(e,t){super(e,t),this.record=e}attach(){const{conversion_configuration_id:e}=this.record;this.exporter.track(d.a.Conversion,{conversionConfigurationId:e,formData:{}})}shouldAttach(){return Object(o.e)(this.record,window.location)}detach(){return!0}isOriginalRendered(){return!0}};var _=(e,t,n)=>{if(e.event_type===a.i.Data)return new l(e,n,t);if((e=>e.event_type===a.i.Conversion)(e)){const{listener_type:t}=e;switch(t){case a.p.PageView:return new D(e,n);case a.p.Click:return new u(e,n);case a.p.Calendly:return new v(e,n);case a.p.Drift:return new x(e,n);case a.p.Hubspot:return new E(e,n);default:return new u(e,n)}}throw new Error(`Unknown DOMUpdate type '${e}'`)},j=n(38),M=n(7);function A(e,t,n,r){const{tracked_domains:i}=e;return!!i&&Object(M.b)(i,e=>{const{_mv:i}=Object(o.g)(n);return t.includes(e)&&!window.location.href.includes(e)&&i!==r})}var R=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const P=e=>"function"==typeof(null==e?void 0:e.whenReady);function F(){return R(this,void 0,void 0,(function*(){if(P(window.MktoForms2))return window.MktoForms2;const e=yield Object(m.b)(window,"MktoForms2");return yield Object(m.b)(e,"whenReady"),function(e){if(!P(e)||"function"!=typeof(null==e?void 0:e.whenReady))throw new Error("Expected the MktoForms2 client to be initialized but it is not")}(window.MktoForms2),window.MktoForms2}))}var S=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const L=(e,t)=>{const n=new r.a("entry"),a=Object(o.b)(e.dom_events,t.preview);var s;a.length>0?n.info("DOM Events:",a):n.info("No DOM Events to attach"),e.config.track_calendly&&(s=t.exporter,window.addEventListener("message",e=>{if(h(e)){const{hostname:e,pathname:t}=window.location;s.track(d.a.Conversion,{formData:{name:`[Calendly] Meeting Booked (${e}${t})`}})}})),e.config.track_drift&&C(t.exporter),e.config.track_hubspot&&function(e){window.addEventListener("message",t=>{O(t)&&e.track(d.a.Conversion,{formData:{name:"[HubSpot] Form Submitted"}})})}(t.exporter),function(e){window.addEventListener("message",t=>{var n,r;if(O(t)){const o=null===(r=null===(n=t.data)||void 0===n?void 0:n.data)||void 0===r?void 0:r.find(e=>{var t,n;return"email"===(null===(n=null===(t=null==e?void 0:e.name)||void 0===t?void 0:t.toLowerCase)||void 0===n?void 0:n.call(t).trim())});(null==o?void 0:o.value)&&e.apiClient.identify(null,{email:o.value})}})}(t.exporter),function(e){S(this,void 0,void 0,(function*(){(yield F()).whenReady(t=>{t.onSuccess(t=>{const n=Object.fromEntries(Object.entries(t).map(([e,t])=>{var n;return[null===(n=null==e?void 0:e.toLowerCase)||void 0===n?void 0:n.call(e).trim(),t]}));(null==n?void 0:n.email)&&e.apiClient.identify(null,{email:n.email})})})}))}(t.exporter);const c=new i.a(!1,[],a.map(e=>_(e,t.userDataStore.getWriteableStore(),t.exporter)),t,"event-renderer");c.onRender(()=>function(e,t){const n=new r.a("cross-domain-tracker"),{tracked_domains:i}=e.config;n.info("Checking to attach for",i),i&&(n.info("Queuing timeout",i),setTimeout(()=>{n.info("Attaching cross domain tracker");for(const r of Array.prototype.slice.call(document.querySelectorAll("a")))A(e.config,r.href,r.search,t)&&(n.info("Adding param to",r),r.href=Object(o.a)(r.href,j.k,t))},0))}(e,t.visitorToken)),c.renderAsync()}}}]);
</script>

</body>
</html>
