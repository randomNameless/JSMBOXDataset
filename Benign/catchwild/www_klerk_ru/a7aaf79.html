<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>a7aaf79.html</title>
</head>
<body>

<script>
(window.webpackJsonp=window.webpackJsonp||[]).push([[25,209,1526],{1092:function(t,e,r){"use strict";r.r(e);var n=r(9),o=r(0),c={__name:"Subscribe",setup:function(t){var e,r=[{id:0,caption1:"Подпишись на вечернюю рассылку",caption2:"с главными новостями за день",title:"Ночной бухгалтер",type:"night"},{id:1,caption1:"Подпишись на утреннюю рассылку",caption2:"⏤ получай только важные новости и статьи",title:"Утренний бухгалтер",type:"morning"},{id:2,caption1:"Подпишись на рассылку",caption2:"и узнавай о скидках заранее",title:"Ножницы скидок",type:"discount"},{id:3,caption1:"Подпишись на рассылку с подборкой",caption2:"лучших бесплатных вебинаров для бухгалтеров",title:"Чемодан вебинаров",type:"webinars"}],c=Object(n.d)(),l=c.$auth,f=c.$store,d=f.getters,h=Object(o.ref)((null===(e=l.user)||void 0===e?void 0:e.email)||""),m=Object(o.computed)((function(){return d["links/getSideMaterialCounter"]})),y=Object(o.computed)((function(){return r[Math.floor(Math.random()*r.length)]})),v=Object(o.computed)((function(){var t,e=(null===(t=m.value)||void 0===t?void 0:t.mailSubscriptions)||0;return new Intl.NumberFormat("ru").format(e)}));return{__sfc:!0,SUBSCRIBES:r,$auth:l,$store:f,getters:d,email:h,counter:m,subscribe:y,formattedCountOfSubscribes:v}}},l=r(59),component=Object(l.a)(c,(function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("form",{staticClass:"flex flex-col tab:flex-row gap-4 tab-l:items-center font-sans",on:{submit:function(t){t.preventDefault()}}},[e("h3",{staticClass:"flex flex-col text-text-3 text-white font-sans font-normal whitespace-nowrap"},[e("span",[t._v(t._s(r.subscribe.caption1))]),t._v(" "),e("span",{staticClass:"block phone-ms:whitespace-nowrap whitespace-normal"},[t._v(t._s(r.subscribe.caption2))])]),t._v(" "),e("BaseMailSubscribeInput",{staticClass:"w-full tab-l:mr-2",attrs:{type:r.subscribe.type,email:r.email,"color-mode":"dark"}}),t._v(" "),e("div",{staticClass:"flex gap-2 items-center whitespace-nowrap"},[e("span",{staticClass:"text-text-1 text-white"},[t._v("\n      "+t._s(r.formattedCountOfSubscribes)+"\n    ")]),t._v(" "),e("span",{staticClass:"text-comment-1 text-white"},[t._v("уже подписаны")])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BaseMailSubscribeInput:r(750).default})},604:function(t,e,r){"use strict";r.r(e);r(15),r(16),r(23),r(24),r(13),r(5),r(14);var n=r(3);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}r(64);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d={$attrs:{},$listeners:{}},h={theme:"error"};var m={name:"UiInputWithValidation",inheritAttrs:!1,props:{messages:{type:Object,default:function(){return{}}},forceError:{type:[String,null],default:null},title:{type:String,default:""},messageProps:{type:Object,default:function(){return{}}},preset:{type:String,default:""},inputClasses:{type:String,default:""},rootInputClass:{type:String,default:""}},data:function(){return{MESSAGE_PROPS_DEFAULT:h,errorMessage:""}},computed:{presets:function(){var t=this;return{base:{$attrs:{},$listeners:{input:function(){return t.clearError()},blur:function(){return t.checkValidity()},"on-clear":function(){return t.asyncCheckValidity()}}},default:{$attrs:{},$listeners:{mounted:function(){return t.asyncCheckValidity()},input:function(){return t.clearError()},blur:function(){return t.checkValidity()},"on-clear":function(){return t.asyncCheckValidity()}}},"default-without-mounted":{$attrs:{},$listeners:{input:function(){return t.clearError()},blur:function(){return t.checkValidity()},focus:function(){return t.clearError()},"on-clear":function(){return t.asyncCheckValidity()}}},"default-without-focus":{$attrs:{},$listeners:{input:function(){return t.clearError()},blur:function(){return t.checkValidity()},"on-clear":function(){return t.asyncCheckValidity()}}},realtime:{$attrs:{},$listeners:{mounted:function(){return t.asyncCheckValidity()},input:function(){return t.checkValidity()},"on-clear":function(){return t.asyncCheckValidity()}}},"input-clear":{$attrs:{},$listeners:{input:function(){return t.clearError()},"on-clear":function(){return t.clearError()}}},"blur-clear":{$attrs:{},$listeners:{blur:function(){return t.clearError()},"on-clear":function(){return t.clearError()}}},"focus-clear":{$attrs:{},$listeners:{focus:function(){return t.clearError()},"on-clear":function(){return t.clearError()}}}}},selectedPreset:function(){return f(f({},d),this.presets[this.preset])},hasError:function(){return this.$slots.errorMessage||this.forceError||this.errorMessage},inputSlots:function(){return Object.keys(this.$slots).filter((function(slot){return"errorMessage"!==slot}))}},mounted:function(){var t=this.$listeners.mounted,e=this.selectedPreset.$listeners.mounted,r=t||e||null;r&&r()},methods:{asyncCheckValidity:function(){var t=this;setTimeout((function(){return t.checkValidity()}))},checkValidity:function(){var t,e,r,n=null===(t=this.$refs)||void 0===t||null===(e=t.input)||void 0===e||null===(r=e.$refs)||void 0===r?void 0:r.input;return n?(this.errorMessage="",n.checkValidity()):null},clearError:function(){this.errorMessage=""},onInvalid:function(t){var e,r,n,o=null===(e=this.$refs)||void 0===e||null===(r=e.input)||void 0===r||null===(n=r.$refs)||void 0===n?void 0:n.input;if(o){var c=function(t){var e=(null==t?void 0:t.validity)||{},r=[];for(var n in e)e[n]&&"valid"!==n&&r.push(n);return r}(o),l=c.length?c[0]:null,f=this.messages[l]||o.validationMessage||"";t.message=this.errorMessage=f,t.errors=c,t.error=l,this.$emit("invalid",t)}},focus:function(){var t,e,r,n;null===(t=this.$refs)||void 0===t||null===(e=t.input)||void 0===e||null===(r=e.$refs)||void 0===r||null===(n=r.input)||void 0===n||n.focus()}}},y=r(59),component=Object(y.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col gap-y-2"},[e("UiInput",t._g(t._b({ref:"input",class:t.rootInputClass,attrs:{classes:t.inputClasses,title:t.title||""},on:{invalid:t.onInvalid}},"UiInput",c(c(c({},t.selectedPreset.$attrs),t.$attrs),t.hasError?{theme:"error"}:{}),!1),c(c({},t.selectedPreset.$listeners),t.$listeners)),[t._l(t.inputSlots,(function(slot){return t._t(slot,null,{slot:slot})}))],2),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.hasError?e("UiMessage",t._b({staticClass:"text-comment-1"},"UiMessage",c(c({},t.MESSAGE_PROPS_DEFAULT),t.messageProps),!1),[t.$slots.errorMessage?[t._t("errorMessage")]:e("span",{domProps:{innerHTML:t._s(t.forceError||t.errorMessage)}})],2):t._e()],1),t._v(" "),t._t("helpText",null,{hasError:t.hasError})],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiInput:r(602).default,UiMessage:r(333).default})},750:function(t,e,r){"use strict";r.r(e);var n=r(1),o=(r(17),r(48),r(75),{night:0,morning:1,discount:2,webinars:3,razboryLaws:10,job:11}),c={name:"BaseMailSubscribeInput",props:{type:{type:String,default:"morning",validator:function(t){return["morning","night","webinars","discount","razboryLaws","job"].includes(t)}},email:{type:String,default:""},buttonStyle:{type:String,default:"clean",validator:function(t){return["clean","dark"].includes(t)}},buttonText:{type:String,default:"Подписаться"},inputTheme:{type:String,default:"light"},paddRight:{type:Number,default:0},colorMode:{type:String,default:"light"}},data:function(){return{email_:this.email,error:"",success:"",isFetching:!1}},computed:{buttonProps:function(){return this.isFetching?{props:{theme:"clean",iconLeft:"fa-solid fa-spinner",iconLeftClasses:"text-sub-title text-grey-400 animate-spin"}}:this.success?{}:this.buttonStyleMap},buttonStyleMap:function(){var t={clean:{text:this.buttonText,props:{theme:"clean",class:"text-blue-600 hover:text-blue-400 text-text-3 py-2 pr-3 -mr-3",type:"button"},handlers:{click:this.subscribe}},dark:{text:this.buttonText,props:{theme:"dark",size:"sm",class:"text-text-3 mr-0.5 h-full",type:"button"},handlers:{click:this.subscribe}}};return t[this.buttonStyle]}},methods:{resetStatus:function(){this.error&&(this.error=""),this.success&&(this.success=""),this.$refs.email.clearError()},subscribe:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.email.checkValidity()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.isFetching=!0,e.next=7,t.$axios.$get("/v4/subscribe/mailing",{params:{email:t.email_,list:o[t.type]}});case 7:r=e.sent,n=r.status,t.success=1===n?"Мы&nbsp;проверили, вы&nbsp;уже получаете письма от&nbsp;&laquo;Клерка&raquo;, все хорошо":"Спасибо, вы&nbsp;успешно подписаны",t.$emit("subscribe"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),t.error="Что-то пошло не&nbsp;так, попробуйте ещё раз";case 16:return e.prev=16,t.isFetching=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})))()}}},l=r(59),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col gap-y-2"},[e("UiInputWithValidation",{ref:"email",attrs:{theme:t.error?"error":t.success?"success":t.inputTheme,size:"sm",styles:"fill",type:"email",placeholder:"Введите e–mail","is-clearable":!t.success&&!t.isFetching,"button-right-props":t.buttonProps,disabled:t.success||t.isFetching,autocomplete:"email",pattern:"[a-zA-Z0-9._\\-]+@[a-zA-Z0-9._\\-]+\\.[a-zA-Z0-9_\\-]+",messages:{valueMissing:"Поле обязательно для заполнения",typeMismatch:"Введите корректный email адрес!",patternMismatch:"Введите корректный email адрес!"},"icon-right-props":{class:t.success&&"dark"===t.colorMode?"text-green-600":void 0},"padd-right":t.paddRight,required:""},on:{"on-clear":t.resetStatus,input:t.resetStatus,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.subscribe.apply(null,arguments)}},model:{value:t.email_,callback:function(e){t.email_=e},expression:"email_"}}),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.error||t.success?e("UiMessage",{staticClass:"text-comment-1",attrs:{theme:t.error?"error":"success","color-mode":t.colorMode}},[e("span",{domProps:{innerHTML:t._s(t.error||t.success)}})]):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiInputWithValidation:r(604).default,UiMessage:r(333).default})}}]);
</script>

</body>
</html>
