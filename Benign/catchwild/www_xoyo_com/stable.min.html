<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stable.min.html</title>
</head>
<body>

<script>
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("XOYOErrorReport",[],e):"object"==typeof exports?exports.XOYOErrorReport=e():t.XOYOErrorReport=e()}(this,function(){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";var o=this&&this.__assign||Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};e.__esModule=!0,r(1);var n=r(3),i=r(4),a=function(){function t(){}return t.init=function(e){void 0===e&&(e={});var r={detailedErrors:!1,upperReportLimit:t.DEFAULT_UPPER_REPORT_LIMIT,remoteLogging:!0,projectType:void 0,remoteSettings:{remoteUrl:null,additionalParams:null,successCallback:null,errorCallback:null}};if(t.userConfig=o({},r,e),t.reportCounter=0,"undefined"==typeof t.userConfig.projectType)throw new Error("请标识 projectType 作为项目类型");if("undefined"==typeof t.userConfig.remoteSettings.remoteUrl)throw new Error("请标识远程提交URL");window.addEventListener?window.addEventListener("error",t.onErrorListener):window.onerror=function(e,r,o){t.onErrorListener({type:"error",filename:r,message:e,lineno:o})},window.onunhandledrejection=function(e){var r=String(e.reason&&e.reason.stack)||"",o=r.match(/\((.*?)\)/)[1]||"",n=o.match(/(.*):((\d+):(\d+))$/),i=n[1],a=n[3],u=n[4];return t.onErrorListener({type:"unhandledrejection",message:String(e.reason),error:e.reason,filename:i,lineno:a,colno:u}),!0}},t.onErrorListener=function(e){var r=t.userConfig,o=t.detailedErrorHandler;if(r.detailedErrors&&o(e),r.remoteLogging){if(t.isExceedReportLimit())return void console.error("xoyo-error-report: reached upper report limit");t.updateReportCounter(),t.remoteLoggingHandler(e,r.remoteSettings)}},t.isExceedReportLimit=function(){return t.reportCounter>=t.userConfig.upperReportLimit},t.updateReportCounter=function(){t.reportCounter++},t.detailedErrorHandler=function(e){var r=t.getErrorData(e),o=["%cType: %c"+r.type,"%cError: %c"+r.error,"%cStackTrace: %c"+r.stackTrace,"%cPath: %c"+r.path,"%cLine: %c"+r.line,"%cColumn: %c"+r.column,"%cDate: %c"+r.datetime].join("\n");window.chrome?console.log(o,"font-weight: bold;","color: #e74c3c;","font-weight: bold;","font-weight: normal; color: #e74c3c;","font-weight: bold;","font-weight: normal; color: #e74c3c;","font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal; color: #3498db;"):console.error(o.replace(/%c/gi,""))},t.getErrorData=function(e){var r=(new Date).toString();return{project_type:t.userConfig.projectType,type:e.type,path:e.filename,filename:e.filename,line:e.lineno,column:e.colno,error:e.message,stack_trace:e.error?e.error.stack.toString().replace(/(\r\n|\n|\r)/gm,""):"",date_time:r,user_agent:navigator.userAgent||window.navigator.userAgent}},t.remoteLoggingHandler=function(e,r){var a=r.remoteUrl,u=r.additionalParams,c=r.successCallback,l=r.errorCallback;if(!a)throw"请提供远程 URL 地址";if(u&&"object"!=typeof u)throw"additionalParams 类型必须为对象";a=i["default"](a);var s=t.getErrorData(e),f=o({request_id:n["default"].generate()},s,u);this.httpPost(a,JSON.stringify(f),c,l)},t.httpPost=function(t,e,r,o){var n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("Content-type","application/json"),n.send(e),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(n.readyState==XMLHttpRequest.DONE?r&&r():o&&o("远程日志提交失败"))}},t.getScriptAttrs=function(){if(void 0===t.scriptAttrs){var e=document.getElementById("xoyo-error-report"),r=e.getAttribute("remote-url"),o=e.getAttribute("project-type"),n=parseInt(e.getAttribute("upper-report-limit"))||t.DEFAULT_UPPER_REPORT_LIMIT;r&&o?t.scriptAttrs={projectType:o,upperReportLimit:n,remoteSettings:{remoteUrl:r}}:t.scriptAttrs=null}return t.scriptAttrs},t.DEFAULT_UPPER_REPORT_LIMIT=10,t}(),u=a.getScriptAttrs();u&&a.init(u),t.exports=t.exports["default"]=a},function(t,e,r){"use strict";e.__esModule=!0,r(2)},function(module,exports){window.JSON=window.JSON||{parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var t=Object.prototype.toString,e=Object.prototype.hasOwnProperty,r=Array.isArray||function(e){return"[object Array]"===t.call(e)},o={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},n=function(t){return o[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},i=/[\\"\u0000-\u001F\u2028\u2029]/g;return function a(o){if(null==o)return"null";if("number"==typeof o)return isFinite(o)?o.toString():"null";if("boolean"==typeof o)return o.toString();if("object"==typeof o){if("function"==typeof o.toJSON)return a(o.toJSON());if(r(o)){for(var u="[",c=0;c<o.length;c++)u+=(c?", ":"")+a(o[c]);return u+"]"}if("[object Object]"===t.call(o)){var l=[];for(var s in o)e.call(o,s)&&l.push(a(s)+": "+a(o[s]));return"{"+l.join(", ")+"}"}}return'"'+o.toString().replace(i,n)+'"'}}()}},function(t,e){"use strict";e.__esModule=!0;var r=function(){function t(){}return t.generate=function(){var e=t.getRandomInt,r=t.hexAligner;return r(e(32),8)+"-"+r(e(16),4)+"-"+r(16384|e(12),4)+"-"+r(32768|e(14),4)+"-"+r(e(48),12)},t.getRandomInt=function(t){if(t<0||t>53)return NaN;var e=0|1073741824*Math.random();return t>30?e+1073741824*(0|Math.random()*(1<<t-30)):e>>>30-t},t.hexAligner=function(t,e){for(var r=t.toString(16),o=e-r.length,n="0";o>0;o>>>=1,n+=n)1&o&&(r=n+r);return r},t}();e["default"]=r},function(t,e){"use strict";function r(t){if(0===t.indexOf("@"))return t.slice(1);var e=t.split(/^https?:/);return 2===e.length?e[1]:t}e.__esModule=!0,e["default"]=r}])});
//# sourceMappingURL=stable.min.js.map
</script>

</body>
</html>
