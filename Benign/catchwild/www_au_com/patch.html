<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>patch.html</title>
</head>
<body>

<script>
(function($) {
    'use strict';
    
    $(function(){

        /* 製品比較リストのモーダルが閉じない不具合のパッチ */
        var $productDetailModal = $('#product-detail.modal.modalElem.modal-basic.modal-fadeOnly');
        if ($productDetailModal.size() > 0){
            var $productDetailModals = $('#product-detail.modal,#addCartAlert.modal')
            $productDetailModals.on('click', function() {
                var $addCartAlertModalOpen = $productDetailModal.find('#addCartAlert.modal.in');
                if ($addCartAlertModalOpen.size() > 0) {
                    $addCartAlertModalOpen.find('.modal-close').click();
                }
            });
        }
        
        /* 製品比較リスト追加ボタン ガラケー向けのパッチ */
        var path = location.pathname;
        if ((/mobile\/product\/featurephone\/.*/).test(location.pathname)) {
            var $targetHref = $('.productComparisonRegistForDetailV2 a[href="/mobile/product/comparison/"]');
            $targetHref.attr('href', '/mobile/product/comparison_fp/');
        }

        setTimeout(function () {
            $('html').attr('style', 'visibility: visible;');
        }, 3000);

    });

})(jQuery);
</script>

</body>
</html>
