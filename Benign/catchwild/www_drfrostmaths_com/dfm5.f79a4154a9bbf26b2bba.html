<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dfm5.f79a4154a9bbf26b2bba.html</title>
</head>
<body>

<script>
/*! For license information please see dfm5.f79a4154a9bbf26b2bba.js.LICENSE.txt */
!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="145a2cbd-9148-4d77-b087-f9142e8955e7",t._sentryDebugIdIdentifier="sentry-dbid-145a2cbd-9148-4d77-b087-f9142e8955e7")}catch(t){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"75432b83bc80b0627ee0eb78a3f799c9ba374d4a"},(()=>{var t,e,n,r={2967:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});const i="production"},2220:(t,e,n)=>{"use strict";n.d(e,{T:()=>i});const i="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},2531:(t,e,n)=>{"use strict";n.d(e,{jB:()=>u,lG:()=>l,lb:()=>c});var i=n(6341),r=n(690),s=n(7412),o=n(3816),a=n(2220);function l(){return(0,i.BY)("globalEventProcessors",(()=>[]))}function c(t){l().push(t)}function u(t,e,n,i=0){return new r.T2(((r,l)=>{const c=t[i];if(null===e||"function"!=typeof c)r(e);else{const d=c({...e},n);a.T&&c.id&&null===d&&s.vF.log(`Event processor "${c.id}" dropped event`),(0,o.Qg)(d)?d.then((e=>u(t,e,n,i+1).then(r))).then(null,l):u(t,d,n,i+1).then(r).then(null,l)}}))}},3741:(t,e,n)=>{"use strict";n.d(e,{Cp:()=>l,J0:()=>m,J5:()=>y,KU:()=>p,ZQ:()=>u,o:()=>d,o5:()=>f,r:()=>c,v4:()=>h});var i=n(6341),r=n(2967),s=n(6641),o=n(7058),a=n(9475);function l(t,e){return(0,s.BF)().captureException(t,(0,a.li)(e))}function c(t,e){return(0,s.BF)().captureEvent(t,e)}function u(t,e){(0,s.BF)().addBreadcrumb(t,e)}function d(t,e){(0,s.BF)().setContext(t,e)}function h(...t){const e=(0,s.BF)();if(2===t.length){const[n,i]=t;return n?e.withScope((()=>(e.getStackTop().scope=n,i(n)))):e.withScope(i)}return e.withScope(t[0])}function p(){return(0,s.BF)().getClient()}function f(){return(0,s.BF)().getScope()}function m(t){const e=p(),n=(0,s.rm)(),a=f(),{release:l,environment:c=r.U}=e&&e.getOptions()||{},{userAgent:u}=i.OW.navigator||{},d=(0,o.fj)({release:l,environment:c,user:a.getUser()||n.getUser(),...u&&{userAgent:u},...t}),h=n.getSession();return h&&"ok"===h.status&&(0,o.qO)(h,{status:"exited"}),g(),n.setSession(d),a.setSession(d),d}function g(){const t=(0,s.rm)(),e=f(),n=e.getSession()||t.getSession();n&&(0,o.Vu)(n),v(),t.setSession(),e.setSession()}function v(){const t=(0,s.rm)(),e=f(),n=p(),i=e.getSession()||t.getSession();i&&n&&n.captureSession&&n.captureSession(i)}function y(t=!1){t?g():v()}},6641:(t,e,n)=>{"use strict";n.d(e,{BF:()=>y,EU:()=>g,rm:()=>_});var i=n(3816),r=n(6936),s=n(9297),o=n(7412),a=n(6341),l=n(2967),c=n(2220),u=n(2486),d=n(7058),h=n(7986);const p=parseFloat(h.M),f=100;class m{constructor(t,e,n,i=p){let r,s;this._version=i,e?r=e:(r=new u.HG,r.setClient(t)),n?s=n:(s=new u.HG,s.setClient(t)),this._stack=[{scope:r}],t&&this.bindClient(t),this._isolationScope=s}isOlderThan(t){return this._version<t}bindClient(t){const e=this.getStackTop();e.client=t,e.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(t){const e=this.pushScope();let n;try{n=t(e)}catch(t){throw this.popScope(),t}return(0,i.Qg)(n)?n.then((t=>(this.popScope(),t)),(t=>{throw this.popScope(),t})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,e){const n=this._lastEventId=e&&e.event_id?e.event_id:(0,r.eJ)(),i=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:i,...e,event_id:n}),n}captureMessage(t,e,n){const i=this._lastEventId=n&&n.event_id?n.event_id:(0,r.eJ)(),s=new Error(t);return this.getScope().captureMessage(t,e,{originalException:t,syntheticException:s,...n,event_id:i}),i}captureEvent(t,e){const n=e&&e.event_id?e.event_id:(0,r.eJ)();return t.type||(this._lastEventId=n),this.getScope().captureEvent(t,{...e,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,e){const{scope:n,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:a=f}=i.getOptions&&i.getOptions()||{};if(a<=0)return;const l={timestamp:(0,s.lu)(),...t},c=r?(0,o.pq)((()=>r(l,e))):l;null!==c&&(i.emit&&i.emit("beforeAddBreadcrumb",c,e),n.addBreadcrumb(c,a))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,e){this.getScope().setTag(t,e),this.getIsolationScope().setTag(t,e)}setExtra(t,e){this.getScope().setExtra(t,e),this.getIsolationScope().setExtra(t,e)}setContext(t,e){this.getScope().setContext(t,e),this.getIsolationScope().setContext(t,e)}configureScope(t){const{scope:e,client:n}=this.getStackTop();n&&t(e)}run(t){const e=v(this);try{t(this)}finally{v(e)}}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return c.T&&o.vF.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,e){const n=this._callExtensionMethod("startTransaction",t,e);return c.T&&!n&&(this.getClient()?o.vF.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):o.vF.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop().scope,e=t.getSession();e&&(0,d.Vu)(e),this._sendSessionUpdate(),t.setSession()}startSession(t){const{scope:e,client:n}=this.getStackTop(),{release:i,environment:r=l.U}=n&&n.getOptions()||{},{userAgent:s}=a.OW.navigator||{},o=(0,d.fj)({release:i,environment:r,user:e.getUser(),...s&&{userAgent:s},...t}),c=e.getSession&&e.getSession();return c&&"ok"===c.status&&(0,d.qO)(c,{status:"exited"}),this.endSession(),e.setSession(o),o}shouldSendDefaultPii(){const t=this.getClient(),e=t&&t.getOptions();return Boolean(e&&e.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:e}=this.getStackTop(),n=t.getSession();n&&e&&e.captureSession&&e.captureSession(n)}_callExtensionMethod(t,...e){const n=g().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[t])return n.extensions[t].apply(this,e);c.T&&o.vF.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function g(){return a.OW.__SENTRY__=a.OW.__SENTRY__||{extensions:{},hub:void 0},a.OW}function v(t){const e=g(),n=b(e);return w(e,t),n}function y(){const t=g();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return function(t=g()){return e=t,!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)&&!b(t).isOlderThan(p)||w(t,new m),b(t);var e}(t)}function _(){return y().getIsolationScope()}function b(t){return(0,a.BY)("hub",(()=>new m),t)}function w(t,e){return!!t&&((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0)}},2486:(t,e,n)=>{"use strict";n.d(e,{HG:()=>d,m6:()=>h});var i=n(3816),r=n(9297),s=n(6936),o=n(7412),a=n(2531),l=n(7058),c=n(1535);let u;class d{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=p()}static clone(t){return t?t.clone():new d}clone(){const t=new d;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&(0,l.qO)(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const e="function"==typeof t?t(this):t;if(e instanceof d){const t=e.getScopeData();this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&Object.keys(t.user).length&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint.length&&(this._fingerprint=t.fingerprint),e.getRequestSession()&&(this._requestSession=e.getRequestSession()),t.propagationContext&&(this._propagationContext=t.propagationContext)}else if((0,i.Qd)(e)){const e=t;this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=p(),this}addBreadcrumb(t,e){const n="number"==typeof e?e:100;if(n<=0)return this;const i={timestamp:(0,r.lu)(),...t},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>n?s.slice(-n):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:e,_contexts:n,_tags:i,_extra:r,_user:s,_level:o,_fingerprint:a,_eventProcessors:l,_propagationContext:c,_sdkProcessingMetadata:u,_transactionName:d,_span:h}=this;return{breadcrumbs:t,attachments:e,contexts:n,tags:i,extra:r,user:s,level:o,fingerprint:a||[],eventProcessors:l,propagationContext:c,sdkProcessingMetadata:u,transactionName:d,span:h}}applyToEvent(t,e={},n=[]){(0,c.e2)(t,this.getScopeData());const i=[...n,...(0,a.lG)(),...this._eventProcessors];return(0,a.jB)(i,t,e)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,e){const n=e&&e.event_id?e.event_id:(0,s.eJ)();if(!this._client)return o.vF.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...e,event_id:n},this),n}captureMessage(t,e,n){const i=n&&n.event_id?n.event_id:(0,s.eJ)();if(!this._client)return o.vF.warn("No client configured on scope - will not capture message!"),i;const r=new Error(t);return this._client.captureMessage(t,e,{originalException:t,syntheticException:r,...n,event_id:i},this),i}captureEvent(t,e){const n=e&&e.event_id?e.event_id:(0,s.eJ)();return this._client?(this._client.captureEvent(t,{...e,event_id:n},this),n):(o.vF.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((t=>{t(this)})),this._notifyingListeners=!1)}}function h(){return u||(u=new d),u}function p(){return{traceId:(0,s.eJ)(),spanId:(0,s.eJ)().substring(16)}}},7058:(t,e,n)=>{"use strict";n.d(e,{Vu:()=>l,fj:()=>o,qO:()=>a});var i=n(9297),r=n(6936),s=n(8411);function o(t){const e=(0,i.zf)(),n={sid:(0,r.eJ)(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return(0,s.Ce)({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(n)};return t&&a(n,t),n}function a(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||(0,i.zf)(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:(0,r.eJ)()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function l(t,e){let n={};e?n={status:e}:"ok"===t.status&&(n={status:"exited"}),a(t,n)}},5452:(t,e,n)=>{"use strict";n.d(e,{k:()=>c,l:()=>l});var i=n(8411),r=n(2967),s=n(3741),o=n(4636),a=n(3445);function l(t,e,n){const s=e.getOptions(),{publicKey:o}=e.getDsn()||{},{segment:a}=n&&n.getUser()||{},l=(0,i.Ce)({environment:s.environment||r.U,release:s.release,user_segment:a,public_key:o,trace_id:t});return e.emit&&e.emit("createDsc",l),l}function c(t){const e=(0,s.KU)();if(!e)return{};const n=l((0,a.et)(t).trace_id||"",e,(0,s.o5)()),i=(0,o.z)(t);if(!i)return n;const r=i&&i._frozenDynamicSamplingContext;if(r)return r;const{sampleRate:c,source:u}=i.metadata;null!=c&&(n.sample_rate=`${c}`);const d=(0,a.et)(i);return u&&"url"!==u&&(n.transaction=d.description),n.sampled=String((0,a.pK)(i)),e.emit&&e.emit("createDsc",n),n}},1535:(t,e,n)=>{"use strict";n.d(e,{Rg:()=>c,e2:()=>l});var i=n(8411),r=n(6936),s=n(5452),o=n(4636),a=n(3445);function l(t,e){const{fingerprint:n,span:l,breadcrumbs:c,sdkProcessingMetadata:u}=e;!function(t,e){const{extra:n,tags:r,user:s,contexts:o,level:a,transactionName:l}=e,c=(0,i.Ce)(n);c&&Object.keys(c).length&&(t.extra={...c,...t.extra});const u=(0,i.Ce)(r);u&&Object.keys(u).length&&(t.tags={...u,...t.tags});const d=(0,i.Ce)(s);d&&Object.keys(d).length&&(t.user={...d,...t.user});const h=(0,i.Ce)(o);h&&Object.keys(h).length&&(t.contexts={...h,...t.contexts}),a&&(t.level=a),l&&(t.transaction=l)}(t,e),l&&function(t,e){t.contexts={trace:(0,a.kX)(e),...t.contexts};const n=(0,o.z)(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:(0,s.k)(e),...t.sdkProcessingMetadata};const i=(0,a.et)(n).description;i&&(t.tags={transaction:i,...t.tags})}}(t,l),function(t,e){t.fingerprint=t.fingerprint?(0,r.k9)(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}(t,n),function(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}(t,c),function(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}(t,u)}function c(t,e){const{extra:n,tags:i,user:r,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:d,attachments:h,propagationContext:p,transactionName:f,span:m}=e;u(t,"extra",n),u(t,"tags",i),u(t,"user",r),u(t,"contexts",s),u(t,"sdkProcessingMetadata",a),o&&(t.level=o),f&&(t.transactionName=f),m&&(t.span=m),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),h.length&&(t.attachments=[...t.attachments,...h]),t.propagationContext={...t.propagationContext,...p}}function u(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[e][i]=n[i])}}},4636:(t,e,n)=>{"use strict";function i(t){return t.transaction}n.d(e,{z:()=>i})},9475:(t,e,n)=>{"use strict";n.d(e,{li:()=>m,mG:()=>p});var i=n(6936),r=n(9297),s=n(9653),o=n(6341),a=n(2181),l=n(2967),c=n(2531),u=n(2486),d=n(1535),h=n(3445);function p(t,e,n,p,m,g){const{normalizeDepth:v=3,normalizeMaxBreadth:y=1e3}=t,_={...e,event_id:e.event_id||n.event_id||(0,i.eJ)(),timestamp:e.timestamp||(0,r.lu)()},b=n.integrations||t.integrations.map((t=>t.name));!function(t,e){const{environment:n,release:i,dist:r,maxValueLength:o=250}=e;"environment"in t||(t.environment="environment"in e?n:l.U),void 0===t.release&&void 0!==i&&(t.release=i),void 0===t.dist&&void 0!==r&&(t.dist=r),t.message&&(t.message=(0,s.xv)(t.message,o));const a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=(0,s.xv)(a.value,o));const c=t.request;c&&c.url&&(c.url=(0,s.xv)(c.url,o))}(_,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(_,b),void 0===e.type&&function(t,e){const n=o.OW._sentryDebugIds;if(!n)return;let i;const r=f.get(e);r?i=r:(i=new Map,f.set(e,i));const s=Object.keys(n).reduce(((t,r)=>{let s;const o=i.get(r);o?s=o:(s=e(r),i.set(r,s));for(let e=s.length-1;e>=0;e--){const i=s[e];if(i.filename){t[i.filename]=n[r];break}}return t}),{});try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.filename&&(t.debug_id=s[t.filename])}))}))}catch(t){}}(_,t.stackParser);const w=function(t,e){if(!e)return t;const n=t?t.clone():new u.HG;return n.update(e),n}(p,n.captureContext);n.mechanism&&(0,i.M6)(_,n.mechanism);const k=m&&m.getEventProcessors?m.getEventProcessors():[],x=(0,u.m6)().getScopeData();if(g){const t=g.getScopeData();(0,d.Rg)(x,t)}if(w){const t=w.getScopeData();(0,d.Rg)(x,t)}const S=[...n.attachments||[],...x.attachments];S.length&&(n.attachments=S),(0,d.e2)(_,x);const T=[...k,...(0,c.lG)(),...x.eventProcessors];return(0,c.jB)(T,_,n).then((t=>(t&&function(t){const e={};try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.debug_id&&(t.abs_path?e[t.abs_path]=t.debug_id:t.filename&&(e[t.filename]=t.debug_id),delete t.debug_id)}))}))}catch(t){}if(0===Object.keys(e).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.keys(e).forEach((t=>{n.push({type:"sourcemap",code_file:t,debug_id:e[t]})}))}(t),"number"==typeof v&&v>0?function(t,e,n){if(!t)return null;const i={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>({...t,...t.data&&{data:(0,a.S8)(t.data,e,n)}})))},...t.user&&{user:(0,a.S8)(t.user,e,n)},...t.contexts&&{contexts:(0,a.S8)(t.contexts,e,n)},...t.extra&&{extra:(0,a.S8)(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&i.contexts&&(i.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(i.contexts.trace.data=(0,a.S8)(t.contexts.trace.data,e,n))),t.spans&&(i.spans=t.spans.map((t=>{const i=(0,h.et)(t).data;return i&&(t.data=(0,a.S8)(i,e,n)),t}))),i}(t,v,y):t)))}const f=new WeakMap;function m(t){if(t)return function(t){return t instanceof u.HG||"function"==typeof t}(t)||function(t){return Object.keys(t).some((t=>g.includes(t)))}(t)?{captureContext:t}:t}const g=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"]},3445:(t,e,n)=>{"use strict";n.d(e,{CC:()=>o,Qh:()=>c,aO:()=>a,cI:()=>u,et:()=>h,kX:()=>l,pK:()=>p});var i=n(8411),r=n(6524),s=n(9297);const o=0,a=1;function l(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:o,status:a,tags:l,origin:c}=h(t);return(0,i.Ce)({data:r,op:s,parent_span_id:o,span_id:e,status:a,tags:l,trace_id:n,origin:c})}function c(t){const{traceId:e,spanId:n}=t.spanContext(),i=p(t);return(0,r.TC)(e,n,i)}function u(t){return"number"==typeof t?d(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?d(t.getTime()):(0,s.zf)()}function d(t){return t>9999999999?t/1e3:t}function h(t){return function(t){return"function"==typeof t.getSpanJSON}(t)?t.getSpanJSON():"function"==typeof t.toJSON?t.toJSON():{}}function p(t){const{traceFlags:e}=t.spanContext();return Boolean(e&a)}},7986:(t,e,n)=>{"use strict";n.d(e,{M:()=>i});const i="7.113.0"},5584:(t,e,n)=>{"use strict";n.d(e,{De:()=>d,hF:()=>o,yD:()=>u});var i=n(5644),r=n(3816),s=n(7412);const o="baggage",a="sentry-",l=/^sentry-/,c=8192;function u(t){if(!(0,r.Kg)(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce(((t,e)=>{const n=h(e);for(const e of Object.keys(n))t[e]=n[e];return t}),{});else{if(!t)return;e=h(t)}const n=Object.entries(e).reduce(((t,[e,n])=>(e.match(l)&&(t[e.slice(a.length)]=n),t)),{});return Object.keys(n).length>0?n:void 0}function d(t){if(t)return function(t){if(0!==Object.keys(t).length)return Object.entries(t).reduce(((t,[e,n],r)=>{const o=`${encodeURIComponent(e)}=${encodeURIComponent(n)}`,a=0===r?o:`${t},${o}`;return a.length>c?(i.T&&s.vF.warn(`Not adding key: ${e} with val: ${n} to baggage header due to exceeding baggage size limits.`),t):a}),"")}(Object.entries(t).reduce(((t,[e,n])=>(n&&(t[`${a}${e}`]=n),t)),{}))}function h(t){return t.split(",").map((t=>t.split("=").map((t=>decodeURIComponent(t.trim()))))).reduce(((t,[e,n])=>(t[e]=n,t)),{})}},9766:(t,e,n)=>{"use strict";n.d(e,{$N:()=>l,Hd:()=>o,NX:()=>c,xE:()=>u});var i=n(3816);const r=(0,n(6341).VZ)(),s=80;function o(t,e={}){if(!t)return"<unknown>";try{let n=t;const i=5,r=[];let o=0,l=0;const c=" > ",u=c.length;let d;const h=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||s;for(;n&&o++<i&&(d=a(n,h),!("html"===d||o>1&&l+r.length*u+d.length>=p));)r.push(d),l+=d.length,n=n.parentNode;return r.reverse().join(c)}catch(t){return"<unknown>"}}function a(t,e){const n=t,s=[];let o,a,l,c,u;if(!n||!n.tagName)return"";if(r.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;s.push(n.tagName.toLowerCase());const d=e&&e.length?e.filter((t=>n.getAttribute(t))).map((t=>[t,n.getAttribute(t)])):null;if(d&&d.length)d.forEach((t=>{s.push(`[${t[0]}="${t[1]}"]`)}));else if(n.id&&s.push(`#${n.id}`),o=n.className,o&&(0,i.Kg)(o))for(a=o.split(/\s+/),u=0;u<a.length;u++)s.push(`.${a[u]}`);const h=["aria-label","type","name","title","alt"];for(u=0;u<h.length;u++)l=h[u],c=n.getAttribute(l),c&&s.push(`[${l}="${c}"]`);return s.join("")}function l(){try{return r.document.location.href}catch(t){return""}}function c(t){return r.document&&r.document.querySelector?r.document.querySelector(t):null}function u(t){if(!r.HTMLElement)return null;let e=t;for(let t=0;t<5;t++){if(!e)return null;if(e instanceof HTMLElement&&e.dataset.sentryComponent)return e.dataset.sentryComponent;e=e.parentNode}return null}},5644:(t,e,n)=>{"use strict";n.d(e,{T:()=>i});const i="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},8341:(t,e,n)=>{"use strict";function i(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function r(){return"npm"}n.d(e,{Z:()=>i,e:()=>r})},3816:(t,e,n)=>{"use strict";n.d(e,{BD:()=>a,Kg:()=>c,L2:()=>b,NF:()=>u,Qd:()=>h,Qg:()=>g,T2:()=>o,W6:()=>l,bJ:()=>r,gd:()=>m,mE:()=>v,sO:()=>d,tH:()=>_,vq:()=>f,xH:()=>p,yr:()=>y});const i=Object.prototype.toString;function r(t){switch(i.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return _(t,Error)}}function s(t,e){return i.call(t)===`[object ${e}]`}function o(t){return s(t,"ErrorEvent")}function a(t){return s(t,"DOMError")}function l(t){return s(t,"DOMException")}function c(t){return s(t,"String")}function u(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function d(t){return null===t||u(t)||"object"!=typeof t&&"function"!=typeof t}function h(t){return s(t,"Object")}function p(t){return"undefined"!=typeof Event&&_(t,Event)}function f(t){return"undefined"!=typeof Element&&_(t,Element)}function m(t){return s(t,"RegExp")}function g(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function v(t){return h(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function y(t){return"number"==typeof t&&t!=t}function _(t,e){try{return t instanceof e}catch(t){return!1}}function b(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t._isVue)}},7412:(t,e,n)=>{"use strict";n.d(e,{Ow:()=>s,Z9:()=>o,pq:()=>a,vF:()=>l});var i=n(5644),r=n(6341);const s=["debug","info","warn","error","log","assert","trace"],o={};function a(t){if(!("console"in r.OW))return t();const e=r.OW.console,n={},i=Object.keys(o);i.forEach((t=>{const i=o[t];n[t]=e[t],e[t]=i}));try{return t()}finally{i.forEach((t=>{e[t]=n[t]}))}}const l=function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return i.T?s.forEach((n=>{e[n]=(...e)=>{t&&a((()=>{r.OW.console[n](`Sentry Logger [${n}]:`,...e)}))}})):s.forEach((t=>{e[t]=()=>{}})),e}()},6936:(t,e,n)=>{"use strict";n.d(e,{$X:()=>a,GR:()=>u,M6:()=>c,eJ:()=>s,gO:()=>l,k9:()=>d});var i=n(8411),r=n(6341);function s(){const t=r.OW,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(t){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(t=>(t^(15&n())>>t/4).toString(16)))}function o(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function a(t){const{message:e,event_id:n}=t;if(e)return e;const i=o(t);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function l(t,e,n){const i=t.exception=t.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{};s.value||(s.value=e||""),s.type||(s.type=n||"Error")}function c(t,e){const n=o(t);if(!n)return;const i=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...i,...e},e&&"data"in e){const t={...i&&i.data,...e.data};n.mechanism.data=t}}function u(t){if(t&&t.__sentry_captured__)return!0;try{(0,i.my)(t,"__sentry_captured__",!0)}catch(t){}return!1}function d(t){return Array.isArray(t)?t:[t]}},6284:(t,e,n)=>{"use strict";n.d(e,{wD:()=>r});var i=n(8341);function r(){return!(0,i.Z)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}t=n.hmd(t)},2181:(t,e,n)=>{"use strict";n.d(e,{S8:()=>o,cd:()=>a});var i=n(3816),r=n(8411),s=n(3917);function o(t,e=100,n=1/0){try{return l("",t,e,n)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function a(t,e=3,n=102400){const i=o(t,e);return r=i,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(r))>n?a(t,e-1,n):i;var r}function l(t,e,o=1/0,a=1/0,c=function(){const t="function"==typeof WeakSet,e=t?new WeakSet:[];return[function(n){if(t)return!!e.has(n)||(e.add(n),!1);for(let t=0;t<e.length;t++)if(e[t]===n)return!0;return e.push(n),!1},function(n){if(t)e.delete(n);else for(let t=0;t<e.length;t++)if(e[t]===n){e.splice(t,1);break}}]}()){const[u,d]=c;if(null==e||["number","boolean","string"].includes(typeof e)&&!(0,i.yr)(e))return e;const h=function(t,e){try{if("domain"===t&&e&&"object"==typeof e&&e._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if(void 0!==n.g&&e===n.g)return"[Global]";if("undefined"!=typeof window&&e===window)return"[Window]";if("undefined"!=typeof document&&e===document)return"[Document]";if((0,i.L2)(e))return"[VueViewModel]";if((0,i.mE)(e))return"[SyntheticEvent]";if("number"==typeof e&&e!=e)return"[NaN]";if("function"==typeof e)return`[Function: ${(0,s.qQ)(e)}]`;if("symbol"==typeof e)return`[${String(e)}]`;if("bigint"==typeof e)return`[BigInt: ${String(e)}]`;const r=function(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(t){return`**non-serializable** (${t})`}}(t,e);if(!h.startsWith("[object "))return h;if(e.__sentry_skip_normalization__)return e;const p="number"==typeof e.__sentry_override_normalization_depth__?e.__sentry_override_normalization_depth__:o;if(0===p)return h.replace("object ","");if(u(e))return"[Circular ~]";const f=e;if(f&&"function"==typeof f.toJSON)try{return l("",f.toJSON(),p-1,a,c)}catch(t){}const m=Array.isArray(e)?[]:{};let g=0;const v=(0,r.W4)(e);for(const t in v){if(!Object.prototype.hasOwnProperty.call(v,t))continue;if(g>=a){m[t]="[MaxProperties ~]";break}const e=v[t];m[t]=l(t,e,p-1,a,c),g++}return d(e),m}},8411:(t,e,n)=>{"use strict";n.d(e,{Ce:()=>v,GS:()=>l,HF:()=>g,W4:()=>p,my:()=>c,pO:()=>u,sp:()=>d,u4:()=>h});var i=n(9766),r=n(5644),s=n(3816),o=n(7412),a=n(9653);function l(t,e,n){if(!(e in t))return;const i=t[e],r=n(i);"function"==typeof r&&u(r,i),t[e]=r}function c(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch(n){r.T&&o.vF.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function u(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,c(t,"__sentry_original__",e)}catch(t){}}function d(t){return t.__sentry_original__}function h(t){return Object.keys(t).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&")}function p(t){if((0,s.bJ)(t))return{message:t.message,name:t.name,stack:t.stack,...m(t)};if((0,s.xH)(t)){const e={type:t.type,target:f(t.target),currentTarget:f(t.currentTarget),...m(t)};return"undefined"!=typeof CustomEvent&&(0,s.tH)(t,CustomEvent)&&(e.detail=t.detail),e}return t}function f(t){try{return(0,s.vq)(t)?(0,i.Hd)(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}}function m(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function g(t,e=40){const n=Object.keys(p(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return(0,a.xv)(n[0],e);for(let t=n.length;t>0;t--){const i=n.slice(0,t).join(", ");if(!(i.length>e))return t===n.length?i:(0,a.xv)(i,e)}return""}function v(t){return y(t,new Map)}function y(t,e){if(function(t){if(!(0,s.Qd)(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||"Object"===e}catch(t){return!0}}(t)){const n=e.get(t);if(void 0!==n)return n;const i={};e.set(t,i);for(const n of Object.keys(t))void 0!==t[n]&&(i[n]=y(t[n],e));return i}if(Array.isArray(t)){const n=e.get(t);if(void 0!==n)return n;const i=[];return e.set(t,i),t.forEach((t=>{i.push(y(t,e))})),i}return t}},3917:(t,e,n)=>{"use strict";n.d(e,{gd:()=>o,qQ:()=>c,vk:()=>a});const i=50,r=/\(error: (.*)\)/,s=/captureMessage|captureException/;function o(...t){const e=t.sort(((t,e)=>t[0]-e[0])).map((t=>t[1]));return(t,n=0)=>{const o=[],a=t.split("\n");for(let t=n;t<a.length;t++){const n=a[t];if(n.length>1024)continue;const s=r.test(n)?n.replace(r,"$1"):n;if(!s.match(/\S*Error: /)){for(const t of e){const e=t(s);if(e){o.push(e);break}}if(o.length>=i)break}}return function(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop(),e.reverse(),s.test(e[e.length-1].function||"")&&(e.pop(),s.test(e[e.length-1].function||"")&&e.pop()),e.slice(0,i).map((t=>({...t,filename:t.filename||e[e.length-1].filename,function:t.function||"?"})))}(o)}}function a(t){return Array.isArray(t)?o(...t):t}const l="<anonymous>";function c(t){try{return t&&"function"==typeof t&&t.name||l}catch(t){return l}}},9653:(t,e,n)=>{"use strict";n.d(e,{Xr:()=>o,gt:()=>s,xv:()=>r});var i=n(3816);function r(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.slice(0,e)}...`}function s(t,e){if(!Array.isArray(t))return"";const n=[];for(let e=0;e<t.length;e++){const r=t[e];try{(0,i.L2)(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function o(t,e=[],n=!1){return e.some((e=>function(t,e,n=!1){return!!(0,i.Kg)(t)&&((0,i.gd)(e)?e.test(t):!!(0,i.Kg)(e)&&(n?t===e:t.includes(e)))}(t,e,n)))}},690:(t,e,n)=>{"use strict";n.d(e,{T2:()=>a,XW:()=>s,xg:()=>o});var i,r=n(3816);function s(t){return new a((e=>{e(t)}))}function o(t){return new a(((e,n)=>{n(t)}))}!function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"}(i||(i={}));class a{constructor(t){a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),this._state=i.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}then(t,e){return new a(((n,i)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(t){i(t)}else n(e)},t=>{if(e)try{n(e(t))}catch(t){i(t)}else i(t)}]),this._executeHandlers()}))}catch(t){return this.then((t=>t),t)}finally(t){return new a(((e,n)=>{let i,r;return this.then((e=>{r=!1,i=e,t&&t()}),(e=>{r=!0,i=e,t&&t()})).then((()=>{r?n(i):e(i)}))}))}__init(){this._resolve=t=>{this._setResult(i.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(i.REJECTED,t)}}__init3(){this._setResult=(t,e)=>{this._state===i.PENDING&&((0,r.Qg)(e)?e.then(this._resolve,this._reject):(this._state=t,this._value=e,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===i.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach((t=>{t[0]||(this._state===i.RESOLVED&&t[1](this._value),this._state===i.REJECTED&&t[2](this._value),t[0]=!0)}))}}}},9297:(t,e,n)=>{"use strict";n.d(e,{k3:()=>l,lu:()=>s,zf:()=>o});var i=n(6341);const r=1e3;function s(){return Date.now()/r}const o=function(){const{performance:t}=i.OW;if(!t||!t.now)return s;const e=Date.now()-t.now(),n=null==t.timeOrigin?e:t.timeOrigin;return()=>(n+t.now())/r}();let a;const l=(()=>{const{performance:t}=i.OW;if(!t||!t.now)return void(a="none");const e=36e5,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,o=s<e,l=t.timing&&t.timing.navigationStart,c="number"==typeof l?Math.abs(l+n-r):e;return o||c<e?s<=c?(a="timeOrigin",t.timeOrigin):(a="navigationStart",l):(a="dateNow",r)})()},6524:(t,e,n)=>{"use strict";n.d(e,{TC:()=>a,kM:()=>o});var i=n(5584),r=n(6936);const s=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function o(t,e){const n=function(t){if(!t)return;const e=t.match(s);if(!e)return;let n;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}(t),o=(0,i.yD)(e),{traceId:a,parentSpanId:l,parentSampled:c}=n||{};return n?{traceId:a||(0,r.eJ)(),parentSpanId:l||(0,r.eJ)().substring(16),spanId:(0,r.eJ)().substring(16),sampled:c,dsc:o||{}}:{traceId:a||(0,r.eJ)(),spanId:(0,r.eJ)().substring(16)}}function a(t=(0,r.eJ)(),e=(0,r.eJ)().substring(16),n){let i="";return void 0!==n&&(i=n?"-1":"-0"),`${t}-${e}${i}`}},6341:(t,e,n)=>{"use strict";function i(t){return t&&t.Math==Math?t:void 0}n.d(e,{BY:()=>o,OW:()=>r,VZ:()=>s});const r="object"==typeof globalThis&&i(globalThis)||"object"==typeof window&&i(window)||"object"==typeof self&&i(self)||"object"==typeof n.g&&i(n.g)||function(){return this}()||{};function s(){return r}function o(t,e,n){const i=n||r,s=i.__SENTRY__=i.__SENTRY__||{};return s[t]||(s[t]=e())}},4656:(t,e,n)=>{"use strict";function i(t){$("body").css("padding-bottom","0px"),s=t,t.offset().top+t.outerHeight()>$(document).height()-200&&$("body").css("padding-bottom",50+t.offset().top+t.outerHeight()-($(document).height()-200)+"px"),$("#virtual-keyboard").fadeIn(200),$(window).resize(),t.offset().top+t.outerHeight()-$(window).scrollTop()>$(window).height()-200&&$(window).scrollTop(t.offset().top+t.outerHeight()-$(window).height()+200+20)}function r(t){t?$("#virtual-keyboard").hide():$("#virtual-keyboard").fadeOut(200),$("body").css("padding-bottom","0px")}n.d(e,{V:()=>i,k:()=>r}),n(2528),jQuery.fn.algebraicInput=function(t,e){var n=$(this);if(t&&"handlers"!==t){if("latex"===t&&!e&&""!==e)return n.data("mathField").latex();"latex"!==t||!e&&""!==e?"reflow"===t?n.data("mathField").reflow():"focus"===t?n.data("mathField").focus():"insert"===t?n.data("mathField").write(e):"command"===t?n.data("mathField").cmd(e):"keystroke"===t&&n.data("mathField").keystroke(e):n.data("mathField").latex(e)}else{var s=MathQuill.getInterface(2),o={spaceBehavesLikeTab:!0,leftRightIntoCmdGoes:"up",restrictMismatchedBrackets:!0,sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"=<>",substituteTextarea:function(){var t=null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/i),e=null!==navigator.userAgent.match(/Android/i);if(t||e)return $("<span tabindex=0 style='display:inline-block;height:1px;width:1px'>")[0];var i=$("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true>");return i.keydown((function(t){i.select(),n.algebraicInput("keystroke","None")})),i.blur((function(){r(!0)})),i[0]},autoSubscriptNumerals:!0,autoCommands:"pi theta sqrt sum",autoOperatorNames:"sin cos tan sec cot cosec csc sinh cosh tanh sech coth cosech arcsin arccos arctan ln log"};"handlers"===t&&(o.handlers=e);var a=s.MathField(n[0],o);n.data("mathField",a),n.click((function(){i(n)}))}};var s,o=[{txt:"7",latex:"7"},{txt:"8",latex:"8"},{txt:"9",latex:"9"},{txt:"\\square/\\square",command:"\\frac"},{txt:"\\frac{\\square}{\\square}",command:"\\frac"},{txt:"4",latex:"4"},{txt:"5",latex:"5"},{txt:"6",latex:"6"},{txt:"\\times",latex:"\\times"},{txt:"1",latex:"1"},{txt:"2",latex:"2"},{txt:"3",latex:"3"},{txt:"-",latex:"-"},{txt:"0",latex:"0"},{txt:".",latex:"."},{txt:"=",latex:"="},{txt:"+",latex:"+"}],a=[{txt:"x",latex:"x"},{txt:"y",latex:"y"},{txt:"e",latex:"e"},{txt:"\\pi",latex:"\\pi"},{txt:"\\sqrt{\\square}",command:"\\sqrt"},{txt:"\\sqrt[n]{\\square}",latex:"\\sqrt[n]{}"},{txt:"a^2",latex:"^2"},{txt:"a^\\square",command:"^"},{txt:"<",latex:"<"},{txt:">",latex:">"},{txt:"\\leq",latex:"\\leq"},{txt:"\\geq",latex:"\\geq"},{txt:"(",command:"("},{txt:")",command:")"},{txt:"!",latex:"!"},{txt:"\\theta",latex:"\\theta"}],l=[{txt:"a",latex:"a"},{txt:"b",latex:"b"},{txt:"c",latex:"c"},{txt:"d",latex:"d"},{txt:"e",latex:"e"},{txt:"f",latex:"f"},{txt:"g",latex:"g"},{txt:"h",latex:"h"},{txt:"i",latex:"i"},{txt:"j",latex:"j"},{txt:"k",latex:"k"},{txt:"l",latex:"l"},{txt:"m",latex:"m"},{txt:"n",latex:"n"},{txt:"o",latex:"o"},{txt:"p",latex:"p"},{txt:"q",latex:"q"},{txt:"r",latex:"r"},{txt:"s",latex:"s"},{txt:"t",latex:"t"},{txt:"u",latex:"u"},{txt:"v",latex:"v"},{txt:"w",latex:"w"},{txt:"x",latex:"x"},{txt:"y",latex:"y"},{txt:"z",latex:"z"},{txt:"\\alpha",latex:"\\alpha"},{txt:"\\delta",latex:"\\delta"},{txt:"\\theta",latex:"\\theta"},{txt:"\\lambda",latex:"\\lambda"},{txt:"\\mu",latex:"\\mu"},{txt:"\\omega",latex:"\\omega"}],c=[{txt:"\\sin",latex:"\\sin"},{txt:"\\cos",latex:"\\cos"},{txt:"\\tan",latex:"\\tan"},{txt:"\\sin^{-1}",latex:"\\sin^{-1}"},{txt:"\\cos^{-1}",latex:"\\cos^{-1}"},{txt:"\\tan^{-1}",latex:"\\tan^{-1}"},{txt:"\\cosec",latex:"\\cosec"},{txt:"\\sec",latex:"\\sec"},{txt:"\\cot",latex:"\\cot"},{txt:"\\sinh",latex:"\\sinh"},{txt:"\\cosh",latex:"\\cosh"},{txt:"\\tanh",latex:"\\tanh"},{txt:"\\ln",latex:"\\ln"},{txt:"\\log_a",latex:"\\log_a"},{txt:"\\int",latex:"\\int"},{txt:"\\int^a_b",latex:"\\int^a_b"},{txt:"\\Sigma^a_b",latex:"\\Sigma^a_b"},{txt:"|\\square|",command:"|"}],u=[{txt:"\\pm",latex:"\\pm"},{txt:"\\neq",latex:"\\neq"},{txt:"\\infty",latex:"\\infty"},{txt:"\\therefore",latex:"\\therefore"},{txt:"^{\\circ}",latex:"^{\\circ}"},{txt:"\\angle",latex:"\\angle"},{txt:"\\square",latex:"\\square"},{txt:"\\in",latex:"\\in"},{txt:"\\notin",latex:"\\notin"},{txt:"\\subset",latex:"\\subset"},{txt:"\\subseteq",latex:"\\subseteq"},{txt:"\\cap",latex:"\\cap"},{txt:"\\cup",latex:"\\cup"},{txt:"\\emptyset",latex:"\\empty"},{txt:"\\mathbb{N}",latex:"\\Naturals"},{txt:"\\mathbb{Z}",latex:"\\Integers"},{txt:"\\mathbb{Q}",latex:"\\Rationals"},{txt:"\\mathbb{R}",latex:"\\Reals"},{txt:"\\mathbb{C}",latex:"\\Complex"},{txt:"\\equiv",latex:"\\equiv"},{txt:"\\propto",latex:"\\propto"},{txt:"\\approx",latex:"\\approx"},{txt:"\\wedge",latex:"\\wedge"},{txt:"\\vee",latex:"\\vee"},{txt:"\\oplus",latex:"\\oplus"},{txt:"\\otimes",latex:"\\otimes"},{txt:",",latex:","}];$(document).ready((function(){$("body").append("<div id='virtual-keyboard'><div id='keyboard-container'><div id='keyboard-main' class='keyboard'><div id='keyboard-button-section-lessmain' class='keyboard-button-section'></div><div id='keyboard-button-section-main' class='keyboard-button-section'></div></div><div id='keyboard-abc' class='keyboard'><div id='keyboard-button-section-letters' class='keyboard-button-section'></div></div><div id='keyboard-funcs' class='keyboard'><div id='keyboard-button-section-funcs' class='keyboard-button-section'></div></div><div id='keyboard-symbs' class='keyboard'><div id='keyboard-button-section-symbs' class='keyboard-button-section'></div></div><div id='keyboard-button-section-actions' class='keyboard-button-section'></div><div id='keyboard-button-section-tabs' class='keyboard-button-section'></div></div></div>"),$(".keyboard").hide(),$.each(o,(function(t,e){$("#keyboard-button-section-main").append("<span><button type='button'>$$"+e.txt+"$$</button></span>"),"\\square/\\square"===e.txt&&$("#keyboard-button-section-main").children().last().attr("id","keyboard-frac-button"),"\\frac{\\square}{\\square}"===e.txt&&$("#keyboard-button-section-main").children().last().attr("id","keyboard-div-button"),$("#keyboard-button-section-main").children().last().click((function(){h(e)}))})),$.each(a,(function(t,e){$("#keyboard-button-section-lessmain").append("<span><button type='button'>$$"+e.txt+"$$</button></span>"),$("#keyboard-button-section-lessmain").children().last().click((function(){h(e)}))})),$.each(l,(function(t,e){$("#keyboard-button-section-letters").append("<span><button type='button'>$$"+e.txt+"$$</button></span>"),$("#keyboard-button-section-letters").children().last().click((function(){h(d?{latex:e.latex.toUpperCase()}:e)}))})),$.each(c,(function(t,e){$("#keyboard-button-section-funcs").append("<span><button type='button'>$$"+e.txt+"$$</button></span>"),$("#keyboard-button-section-funcs").children().last().click((function(){h(e)}))})),$.each(u,(function(t,e){$("#keyboard-button-section-symbs").append("<span><button type='button'>$$"+e.txt+"$$</button></span>"),$("#keyboard-button-section-symbs").children().last().click((function(){h(e)}))})),$("#keyboard-button-section-actions").append("<span><button type='button'><img src='/homework/img/backspace.png'></button></span>"),$("#keyboard-button-section-actions").children().last().click((function(){s.algebraicInput("keystroke","Backspace")})),$("#keyboard-button-section-actions").append("<span><button type='button'><img src='/homework/img/left.png'></button></span>"),$("#keyboard-button-section-actions").children().last().click((function(){s.algebraicInput("keystroke","Left")})),$("#keyboard-button-section-actions").append("<span><button type='button'><img src='/homework/img/right.png'></button></span>"),$("#keyboard-button-section-actions").children().last().click((function(){s.algebraicInput("keystroke","Right")})),$("#keyboard-button-section-actions").append("<span><button type='button'><img src='/homework/img/enter.png'></button></span>"),$("#keyboard-button-section-actions").children().last().click((function(){s.algebraicInput("keystroke","Enter"),r()})),$("#keyboard-button-section-letters").prepend("<span><button type='button'><img src='/homework/img/ShiftKey.png'></button></span>"),$("#keyboard-button-section-letters").children().first().click((function(){d=!d,$("#keyboard-button-section-letters .mjx-char").each((function(){var t=$(this).html();t.match(/^[A-Za-z]$/)&&$(this).html(d?t.toUpperCase():t.toLowerCase())}))})),$("#keyboard-button-section-tabs").append("<span><button type='button' id='button-main-tab'>Main</button></span>"),$("#button-main-tab").click((function(){$(".keyboard").hide(),$("#keyboard-button-section-tabs button").removeClass("selected"),$("#button-main-tab").addClass("selected"),$("#keyboard-main").show()})),$("#keyboard-button-section-tabs").append("<span><button type='button' id='button-abc-tab'>ABC</button></span>"),$("#button-abc-tab").click((function(){$(".keyboard").hide(),$("#keyboard-abc").show(),$("#keyboard-button-section-tabs button").removeClass("selected"),$("#button-abc-tab").addClass("selected")})),$("#button-main-tab").click(),$("#keyboard-button-section-tabs").append("<span><button type='button' id='button-funcs-tab'>Funcs</button></span>"),$("#button-funcs-tab").click((function(){$(".keyboard").hide(),$("#keyboard-funcs").show(),$("#keyboard-button-section-tabs button").removeClass("selected"),$("#button-funcs-tab").addClass("selected")})),$("#keyboard-button-section-tabs").append("<span><button type='button' id='button-symbs-tab'>Symbs</button></span>"),$("#button-symbs-tab").click((function(){$(".keyboard").hide(),$("#keyboard-symbs").show(),$("#keyboard-button-section-tabs button").removeClass("selected"),$("#button-symbs-tab").addClass("selected")})),$("#virtual-keyboard").mousedown(p),$(window).resize(),$(document).click((function(t){$(t.target).closest("#virtual-keyboard").length||$(t.target).closest(".mq-editable-field").length||r()}))}));var d=!1;function h(t){t.latex?s.algebraicInput("insert",t.latex):s.algebraicInput("command",t.command)}function p(t){t.preventDefault(),t.stopPropagation()}$(window).resize((function(){var t=$("#virtual-keyboard");t.is(":visible")?(t.css("top",$(window).height()-t.outerHeight()+"px"),t.outerWidth($(window).width())):(t.css("top",$(window).height()-200+"px"),t.outerWidth($(window).width()))}))},2187:(t,e,n)=>{"use strict";n.d(e,{c:()=>h});var i,r,s=n(4692),o=n.n(s);function a(t,e){t.parent().find(".canvas-message").remove(),t.before("<div class='canvas-message' style='height:31px'>"+e+"</div>"),t.prev().show()}function l(t,e){if(!t)return t;var n=e.xaxis.to-e.xaxis.from,i=e.yaxis.to-e.yaxis.from;if("axis"===e.mode)return{x:(t.x-e.xaxis.from)/n,y:1-(t.y-e.yaxis.from)/i};if("graph"===e.mode){var r=null!=e.xaxis.values&&""!=o().trim(e.xaxis.values);return r&&e.xaxis.values.split(","),{x:r?m+t.x*(1-m-g):m+(t.x-e.xaxis.from)/n*(1-m-g),y:1-(v+(t.y-e.yaxis.from)/i*(1-y-v))}}}function c(t,e){var n=e.xaxis.to-e.xaxis.from,i=e.yaxis.to-e.yaxis.from;if("axis"===e.mode)return{x:parseFloat(e.xaxis.from)+t.x*n,y:parseFloat(e.yaxis.from)+(1-t.y)*i};if("graph"===e.mode){var r=null!=e.xaxis.values&&""!=o().trim(e.xaxis.values);return r&&e.xaxis.values.split(","),{x:r?(t.x-m)/(1-m-g):parseFloat(e.xaxis.from)+n*(t.x-m)/(1-m-g),y:parseFloat(e.yaxis.from)+i*(1-t.y-v)/(1-y-v)}}}function u(t,e){if(!t||!t.x||!t.y)return t;var n=e.data("grid");if(n&&"axis"==n.mode){var i=1/(n.xaxis.to-n.xaxis.from),r=1/(n.yaxis.to-n.yaxis.from),s=t.x/i,o=t.y/r;return{x:(s=Math.round(2*s)/2)*i,y:(o=Math.round(2*o)/2)*r}}return t}function d(t,e,n){if("polygon"==e.type)return function(t,e){for(var n=t.x,i=t.y,r=!1,s=0,o=e.length-1;s<e.length;o=s++){var a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>i!=u>i&&n<(c-a)*(i-l)/(u-l)+a&&(r=!r)}return r}(t,e.points);if("point"==e.type)return k(t,e.points[0],n);if("line"==e.type||"multiline"==e.type){for(var i=0;i<e.points.length-1;i++)if(h(t,e.points[i],e.points[i+1])<7)return!0;return!1}return"rectangle"==e.type&&t.x>=e.points[0].x&&t.x<=e.points[1].x&&t.y>=e.points[0].y&&t.y<=e.points[1].y}function h(t,e,n){var i,r,s=t.x,o=t.y,a=e.x,l=e.y,c=n.x,u=n.y,d=c-a,h=u-l,p=d*d+h*h,f=-1;0!=p&&(f=((s-a)*d+(o-l)*h)/p),f<0?(i=a,r=l):f>1?(i=c,r=u):(i=a+f*d,r=l+f*h);var m=s-i,g=o-r;return Math.sqrt(m*m+g*g)}window.$=window.jQuery=o(),jQuery.fn.dfmCanvas=function(t,e){var n=o()(this);if("startDrawing"==t){if(n.data("readOnly"))return;n.addClass("drawMode"),n.data("editMode")&&(n.addClass("highlight"),i=setInterval((function(){n.toggleClass("highlight")}),1e3)),n.data("readOnly")||("multiline"===e?a(n,"Click/Press each point of your line."):"rectangle"==e?a(n,"Drag across the screen to draw your rectangle."):"line"===e?a(n,"Drag across the screen to draw your line."):"polygon"===e&&a(n,"Click/Press each point of your polygon.")),n.data("tempShape",{points:[],type:e,v:2}),n.data("editMode")||n.removeData("answerShape"),n.dfmCanvas("redraw")}else if("finishDrawing"==t){if(n.data("readOnly"))return;r=!0,n.data("editMode")?(dfmDialog("Do you want this shape you've just drawn to be the answer shape? (i.e. that students have to draw)",[{label:"Yes",action:function(){n.data("answerShape",n.data("tempShape")),n.data("type",n.data("tempShape").type),n.removeData("tempShape"),r=!1,n.dfmCanvas("redraw"),T(n)}},{label:"No",action:function(){n.data("nonAnswerShapes").push(n.data("tempShape")),n.removeData("tempShape"),r=!1,n.dfmCanvas("redraw"),T(n)}}]),n.removeClass("drawMode"),n.removeClass("highlight"),clearInterval(i),T(n),a(n,"You can delete shapes by clicking on them.")):(n.data("answerShape",n.data("tempShape")),n.removeData("tempShape"),r=!1,n.dfmCanvas("redraw"),T(n),a(n,"You may now redraw your shape if you wish."))}else if("cancelDrawing"==t){if(r)return;n.removeClass("drawMode"),n.data("editMode")&&(n.removeClass("highlight"),clearInterval(i),n.removeData("tempShape"),n.dfmCanvas("redraw"),T(n))}else if("redraw"==t)n.is(":visible")&&function(t){var e=t.width(),n=t.height(),i=t[0].getContext("2d");if(i.clearRect(0,0,e,n),i.fillStyle="#ffffff",i.fillRect(0,0,e,n),t.data("grid")){var r=t.data("grid");if("axis"==r.mode){i.beginPath(),i.strokeStyle=r.color?r.color:"#bbbbbb",i.lineWidth=1;for(var s=r.xaxis.to-r.xaxis.from,a=r.yaxis.to-r.yaxis.from,c=e/s,u=n/a,d=0;d<e;)i.moveTo(d,0),i.lineTo(d,n),d+=c;for(d=n;d>=0;)i.moveTo(0,d),i.lineTo(e,d),d-=u;i.stroke(),i.beginPath(),i.strokeStyle="#000000",i.lineWidth=1,i.moveTo(0,r.yaxis.to*u),i.lineTo(e,r.yaxis.to*u),i.moveTo((0-r.xaxis.from)*c,0),i.lineTo((0-r.xaxis.from)*c,n),i.stroke(),i.fillStyle="#000000",i.font="15px Arial";var h=i.measureText("x").width;i.fillText("x",e-h-5,r.yaxis.to*u+12),h=i.measureText("y").width,i.fillText("y",0-r.xaxis.from*c-h-3,10),i.font="13px Arial",i.fillStyle="#000000";for(var b=r.xaxis.from;b<r.xaxis.to;b++)h=i.measureText(b+"").width,0!=b&&i.fillText(b+"",(b-r.xaxis.from)*c-h/2,r.yaxis.to*u+12);for(var w=r.yaxis.from;w<r.yaxis.to;w++)h=i.measureText(w+"").width,0!=w&&(u>=15||w%2==0)&&i.fillText(w+"",0-r.xaxis.from*c-h-3,4+n-(w-r.yaxis.from)*u)}else if("graph"==r.mode){var k=r.xaxis.to-r.xaxis.from,T=r.yaxis.to-r.yaxis.from,C=x(k/p),E=x(T/f);i.beginPath(),i.strokeStyle=r.color?r.color:"#bbbbbb",i.lineWidth=1;var I,D=null!=r.xaxis.values&&""!=o().trim(r.xaxis.values);if(D&&(I=r.xaxis.values.split(",")),s=D?I.length:Math.ceil(k/C),a=Math.ceil(T/E),c=(e-g*e-m*e)/s,u=(n-y*n-v*n)/a,D)for(d=0;d<I.length;d++){var O=m*e+c*d;i.beginPath(),i.lineWidth=2,i.moveTo(O+.2*c,n-(v+.05)*n),i.lineTo(O+.2*c,n-v*n),i.moveTo(O+.8*c,n-(v+.05)*n),i.lineTo(O+.8*c,n-v*n),i.stroke(),i.lineWidth=1}else for(d=m*e;d<e-g*e+2;)i.moveTo(d,y*n),i.lineTo(d,n-v*n),d+=c;for(d=n-v*n;d>=y*n-2;)i.moveTo(m*e,d),i.lineTo(e-g*e,d),d-=u;if(i.stroke(),i.beginPath(),i.strokeStyle="#000000",i.lineWidth=1,i.moveTo(m*e,y*n),i.lineTo(m*e,n-v*n),i.moveTo(m*e,n-v*n),i.lineTo(e-g*e,n-v*n),i.stroke(),i.fillStyle="#000000",i.font=(e>460?13:Math.round(15*e/460))+"px Arial",D)for(d=0;d<I.length;d++){var M=o().trim(I[d]);h=i.measureText(M).width,O=m*e+c*(d+.5),i.fillText(M,O-h/2,n-v*n+13)}else if("numeric"===r.xaxis.type)for(b=parseInt(r.xaxis.from);b<=parseFloat(r.xaxis.to);)b=_(b),h=i.measureText(b+"").width,i.fillText(b+"",(b-r.xaxis.from)/C*c+m*e-h/2,n-v*n+13),b+=C;if("none"!==r.yaxis.type)for(w=parseInt(r.yaxis.from);w<=parseFloat(r.yaxis.to);)w=_(w),h=i.measureText(w+"").width,i.fillText(w+"",m*e-h-4,n-v*n-(w-r.yaxis.from)/E*u+5),w+=E;i.fillStyle="#000000";var A=r.xaxis.label,P=r.yaxis.label;h=i.measureText(A).width,i.fillText(A,e/2-h/2,n-6),i.save(),h=i.measureText(P).width,i.translate(12,n/2),i.rotate(-Math.PI/2),i.fillText(P,0-h/2,0),i.restore()}}t.data("nonAnswerShapes")&&o().each(t.data("nonAnswerShapes"),(function(r,s){if("polygon"==s.type){S(s,t,r);for(var o=0,a=0,c=0;c<s.points.length-1;c++)o+=s.points[c].x,a+=s.points[c].y;var u=o/(s.points.length-1),d=a/(s.points.length-1);i.fillStyle="#eee",i.font="19px Arial";var h=String.fromCharCode("A".charCodeAt(0)+r),p=i.measureText(h).width,f=l({x:u,y:d},t.data("grid"));i.fillText(h,f.x*e-p/2,f.y*n)}else S(s,t,r)})),t.data("answerShape")&&S(t.data("answerShape"),t,-1),t.data("tempShape")&&S(t.data("tempShape"),t,-1)}(n);else if("setNonAnswerShapes"==t)n.data("nonAnswerShapes",e),n.dfmCanvas("redraw");else if("setAnswerShape"==t)n.data("answerShape",e),n.dfmCanvas("redraw");else if("setGrid"==t)e.v=2,n.data("grid",e),n.dfmCanvas("redraw"),T(n);else{if("getAnswerData"==t){var s={data:{}};return n.data("answerShape")&&(s.correctAnswer=n.data("answerShape")),n.data("nonAnswerShapes")&&(s.data.nonAnswerShapes=n.data("nonAnswerShapes")),n.data("grid")&&(s.data.grid=n.data("grid")),s.data.type=n.data("type"),s}if(!e){var h=t;if(n.data("nonAnswerShapes",[]),n.removeData("answerShape"),n.addClass("dfmCanvas"),h.answerData&&h.answerData.grid&&2!=h.answerData.grid.v){if(h.answerData.nonAnswerShapes)for(var b=0;b<h.answerData.nonAnswerShapes.length;b++)for(var w=0;w<h.answerData.nonAnswerShapes[b].points.length;w++)h.answerData.nonAnswerShapes[b].points[w]=c(h.answerData.nonAnswerShapes[b].points[w],h.answerData.grid);h.answerData.grid.v=2}if(h.answer&&2!=h.answer.v){if(h.answer.points)for(w=0;w<h.answer.points.length;w++)h.answer.points[w]=c(h.answer.points[w],h.answerData.grid);h.answer.v=2}h.answerData&&(h.answerData.nonAnswerShapes&&n.data("nonAnswerShapes",h.answerData.nonAnswerShapes),h.answerData.grid&&(h.answerData.v=2,n.data("grid",h.answerData.grid)),n.data("type",h.answerData.type));var C=parseInt(n.css("borderLeftWidth"),10);h.listeners&&n.data("listeners",h.listeners),h.editMode?n.data("editMode",!0):n.data("editMode",!1),h.readOnly?n.data("readOnly",!0):n.data("readOnly",!1),n.data("editMode")&&(n.parent().find(".dfm-canvas-buttons").remove(),n.before("<div class='dfm-canvas-buttons'><input type='button' value='Insert Grid'> <input type='button' value='Draw Shape'></div>"),function(t,e){t.click((function(){dfmDialog("<style>.vex-custom-field-wrapper { margin: 1em 0; } label.menu-inline {  display: inline-block; margin-bottom: .2em; } input.menu-inline {  display: inline-block; width: 60px!important; } .tg { display: none; }</style><div id='gridmenu' style='margin-top:10px'>   <ul>      <li><a href='#tabs-axis'>Coordinate Axes</a></li>      <li><a href='#tabs-graph'>Graph</a></li>   </ul>   <div id='tabs-axis'>      <div class='vex-custom-field-wrapper'>         <label for='x-from'>Horizontal Axis</label>         <div class='vex-custom-input-wrapper'>            From: <input name='x-from' type='text' value='-7' class='menu-inline' style='width:50px'/>             To: <input name='x-to' type='text' value='7' class='menu-inline' style='width:50px'/>           </div>      </div>      <div class='vex-custom-field-wrapper'>         <label for='y-from'>Vertical Axis</label>         <div class='vex-custom-input-wrapper'>            From: <input name='y-from' type='text' value='-3' class='menu-inline' style='width:50px'/>             To: <input name='y-to' type='text' value='6' class='menu-inline' style='width:50px'/>         </div>      </div>   </div>   <div id='tabs-graph'>      <div class='vex-custom-input-wrapper'>         <hr/>         <strong>Horizontal Axis</strong><br/>         Axis Label: <input name='x-label-g' type='text'/> Type: <select name='x-gridtype'><option value='numeric'>Numeric</option><option value='categorical'>Categorical</option><option value='none'>Hide Values</option></select>         <div id='tabs-graph-categorical' class='tg'>            <label for='x-categoricalvalues'>Values (comma separated):</label> <input name='x-categoricalvalues' type='text'>         </div>         <div id='tabs-graph-numeric' class='tg'>            From: <input name='x-from-g' type='text' value='0' class='menu-inline' style='width:50px'/>             To: <input name='x-to-g' type='text' value='20' class='menu-inline' style='width:50px'/>          </div>         <hr/>         <strong>Vertical Axis</strong><br/>         Axis Label: <input name='y-label-g' type='text'/><br>         Type: <select name='y-gridtype'><option value='numeric'>Numeric</option><option value='none'>Hide Values</option></select><br>         From: <input name='y-from-g' type='text' value='0' class='menu-inline' style='width:50px'/>          To: <input name='y-to-g' type='text' value='20' class='menu-inline' style='width:50px'/>       </div>   </div></div>",[{label:"OK",action:function(){var t={"x-from":o()("input[name=x-from]").val(),"x-to":o()("input[name=x-to]").val(),"y-from":o()("input[name=y-from]").val(),"y-to":o()("input[name=y-to]").val(),"x-label-g":o()("input[name=x-label-g]").val(),"x-gridtype":o()("select[name=x-gridtype]").val(),"x-from-g":o()("input[name=x-from-g]").val(),"x-to-g":o()("input[name=x-to-g]").val(),"y-label-g":o()("input[name=y-label-g]").val(),"y-gridtype":o()("select[name=y-gridtype]").val(),"y-from-g":o()("input[name=y-from-g]").val(),"y-to-g":o()("input[name=y-to-g]").val(),"x-categoricalvalues":o()("input[name=x-categoricalvalues]").val()},n={},i="selected"===o()("#gridmenu li").first().attr("class")?"axis":"graph";n.xaxis={},n.yaxis={},n.mode=i,"axis"==i?(n.xaxis.from=t["x-from"],n.xaxis.to=t["x-to"],n.yaxis.from=t["y-from"],n.yaxis.to=t["y-to"]):(n.xaxis.label=t["x-label-g"],n.xaxis.type=t["x-gridtype"],"categorical"===n.xaxis.type?n.xaxis.values=t["x-categoricalvalues"]:"numeric"===n.xaxis.type&&(n.xaxis.from=t["x-from-g"],n.xaxis.to=t["x-to-g"]),n.yaxis.type=t["y-gridtype"],n.yaxis.label=t["y-label-g"],n.yaxis.from=t["y-from-g"],n.yaxis.to=t["y-to-g"]),e.dfmCanvas("setGrid",n)}}]),o()("#gridmenu").dfmTabs(),o()("select[name='x-gridtype']").change((function(){o()(".tg").hide(),o()("#tabs-graph-"+o()("select[name='x-gridtype']").val()).show()})),o()("select[name='x-gridtype']").change()}))}(n.prev().children(":nth-child(1)"),n),function(t,e){t.click((function(){var t="Select a shape type.<br><br>";dfmDialog(t+="<input type='radio' name='shape-selector-type' value='point' id='sst-point'> <label for='sst-point'>Point</label><br/><input type='radio' name='shape-selector-type' value='line' id='sst-line'> <label for='sst-line'>Line</label><br/><input type='radio' name='shape-selector-type' value='multiline' id='sst-multiline'> <label for='sst-multiline'>Multi-Line</label><br/><input type='radio' name='shape-selector-type' value='polygon' id='sst-polygon'> <label for='sst-polygon'>Polygon</label><br/><input type='radio' name='shape-selector-type' value='rectangle' id='sst-rectangle'> <label for='sst-rectangle'>Rectangle</label><br><br>",[{label:"Add",action:function(){var t=o()("input[name=shape-selector-type]:checked").val();e.dfmCanvas("startDrawing",t)}}])}))}(n.prev().children(":nth-child(2)"),n)),h.answer&&(n.data("answerShape",h.answer),n.data("editMode")&&a(n,"You can delete shapes by clicking on them.")),h.readOnly||(h.editMode?a(n,"Use the buttons above to draw answer/non-answer shapes and to add a grid."):a(n,"Draw your shape in the space below."));var I=null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/i),D=null!==navigator.userAgent.match(/Android/i),O=I||D;n.data("readOnly")||O&&("line"===n.data("type")||"rectangle"===n.data("type"))||n.unbind("mousedown").mousedown((function(t){var e={x:1*(t.clientX+o()(window).scrollLeft()-o()(this).offset().left-C)/o()(this).width(),y:1*(t.clientY+o()(window).scrollTop()-o()(this).offset().top-C)/o()(this).height()};if(e=c(e=u(e,n),n.data("grid")),console.log("P: "+JSON.stringify(e)),n.data("tempShape")||n.data("editMode")||!n.data("answerShape")||(n.removeData("answerShape"),n.data("tempShape",{points:[],type:n.data("type")}),n.dfmCanvas("redraw"),T(n)),!n.data("tempShape")&&n.data("editMode")){var i=-1;return o().each(n.data("nonAnswerShapes"),(function(t,r){d(e,r,n)&&(i=t)})),i>=0&&(n.data("nonAnswerShapes").splice(i,1),n.dfmCanvas("redraw"),T(n)),void(n.data("answerShape")&&d(e,n.data("answerShape"),n)&&(n.removeData("answerShape"),n.dfmCanvas("redraw"),T(n)))}if(n.data("tempShape")){var r=n.data("tempShape").type,s=n.data("tempShape").points;if("polygon"===r&&s.length>=1&&k(e,s[0],n))return n.data("tempShape").points.push(s[0]),void n.dfmCanvas("finishDrawing");var l=!1;if(s.length>=1&&(l=k(e,s[s.length-1],n)),l?"polygon"!==r&&n.dfmCanvas("finishDrawing"):n.data("tempShape").points.push(e),n.dfmCanvas("redraw"),"line"===r&&2==s.length&&n.dfmCanvas("finishDrawing"),"rectangle"===r&&2==s.length){var h=Math.min(s[0].x,s[1].x),p=Math.max(s[0].x,s[1].x),f=Math.min(s[0].y,s[1].y),m=Math.max(s[0].y,s[1].y);n.data("tempShape").points=[{x:h,y:f},{x:p,y:m}],n.dfmCanvas("finishDrawing")}"point"===r&&1==s.length&&n.dfmCanvas("finishDrawing"),"multiline"===r&&1==s.length&&(a(n,"<button id='cancel-button' class='medium-black-button'>Cancel</button> <button id='finish-button' class='medium-black-button'>Finish Drawing</button>"),n.prev().find("#finish-button").click((function(){n.data("tempShape").tempPoint=void 0,n.dfmCanvas("finishDrawing")})),n.prev().find("#cancel-button").click((function(t){t.preventDefault(),n.dfmCanvas("startDrawing",r)}))),"polygon"===r&&1==s.length&&(a(n,"<button id='cancel-button' class='medium-black-button'>Cancel</button>"),n.prev().find("#cancel-button").click((function(t){t.preventDefault(),n.dfmCanvas("startDrawing",r)})))}})),n.data("readOnly")||!O||"line"!=n.data("type")&&"rectangle"!=n.data("type")||n[0].addEventListener("touchstart",(function(t){t.preventDefault();var e=t.changedTouches,i={x:1*(e[0].clientX+o()(window).scrollLeft()-o()(this).offset().left-C)/o()(this).width(),y:1*(e[0].clientY+o()(window).scrollTop()-o()(this).offset().top-C)/o()(this).height()};if(i=c(i=u(i,n),n.data("grid")),n.data("tempShape")||n.data("editMode")||!n.data("answerShape")||(n.removeData("answerShape"),n.data("tempShape",{points:[],type:n.data("type")}),n.dfmCanvas("redraw"),T(n)),!n.data("tempShape")&&n.data("editMode")){var r=-1;return o().each(n.data("nonAnswerShapes"),(function(t,e){d(i,e,n)&&(r=t)})),r>=0&&(n.data("nonAnswerShapes").splice(r,1),n.dfmCanvas("redraw"),T(n)),void(n.data("answerShape")&&d(i,n.data("answerShape"),n)&&(n.removeData("answerShape"),n.dfmCanvas("redraw"),T(n)))}if(n.data("tempShape")){var s=n.data("tempShape").type,l=n.data("tempShape").points;if("polygon"===s&&l.length>=1&&k(i,l[0],n))return n.data("tempShape").points.push(l[0]),void n.dfmCanvas("finishDrawing");var h=!1;if(l.length>=1&&(h=k(i,l[l.length-1],n)),h?"polygon"!==s&&n.dfmCanvas("finishDrawing"):n.data("tempShape").points.push(i),n.dfmCanvas("redraw"),"line"===s&&2==l.length&&n.dfmCanvas("finishDrawing"),"rectangle"===s&&2==l.length){var p=Math.min(l[0].x,l[1].x),f=Math.max(l[0].x,l[1].x),m=Math.min(l[0].y,l[1].y),g=Math.max(l[0].y,l[1].y);n.data("tempShape").points=[{x:p,y:m},{x:f,y:g}],n.dfmCanvas("finishDrawing")}"point"===s&&1==l.length&&n.dfmCanvas("finishDrawing"),"multiline"===s&&1==l.length&&(a(n,"<button id='cancel-button' class='medium-black-button'>Cancel Drawing</button> <button id='finish-button' class='medium-black-button'>Finish Drawing</button>"),n.prev().find("#finish-button").click((function(){n.data("tempShape").tempPoint=void 0,n.dfmCanvas("finishDrawing")})),n.prev().find("#cancel-button").click((function(t){t.preventDefault(),n.dfmCanvas("startDrawing",s)}))),"polygon"===s&&1==l.length&&(a(n,"<button id='cancel-button' class='medium-black-button'>Cancel Drawing</button>"),n.prev().find("#cancel-button").click((function(t){t.preventDefault(),n.dfmCanvas("startDrawing",s)})))}}),!1),n.data("readOnly")||!O||"line"!==n.data("type")&&"rectangle"!==n.data("type")||n[0].addEventListener("touchmove",(function(t){t.preventDefault();var e=t.changedTouches;if(n.data("tempShape")){n.data("tempShape").type;var i=1*(e[0].clientX+o()(window).scrollLeft()-o()(this).offset().left-C)/o()(this).width(),r=1*(e[0].clientY+o()(window).scrollTop()-o()(this).offset().top-C)/o()(this).height();n.data("tempShape").tempPoint=c(u({x:i,y:r},n),n.data("grid")),n.dfmCanvas("redraw")}}),!1),n.data("readOnly")||!O||"line"!==n.data("type")&&"rectangle"!==n.data("type")||n[0].addEventListener("touchend",(function(t){t.preventDefault();var e=t.changedTouches,i=c(u({x:1*(e[0].clientX+o()(window).scrollLeft()-o()(this).offset().left-C)/o()(this).width(),y:1*(e[0].clientY+o()(window).scrollTop()-o()(this).offset().top-C)/o()(this).height()},n),n.data("grid")),r=n.data("tempShape").points;if(!k(i,r[0],n)&&(n.data("tempShape").points.push(i),2==r.length)){if("rectangle"===n.data("type")){var s=Math.min(r[0].x,r[1].x),a=Math.max(r[0].x,r[1].x),l=Math.min(r[0].y,r[1].y),d=Math.max(r[0].y,r[1].y);n.data("tempShape").points=[{x:s,y:l},{x:a,y:d}]}n.dfmCanvas("finishDrawing")}}),!1),n.mouseup((function(t){if(t.preventDefault(),n.data("tempShape")&&("rectangle"==n.data("tempShape").type||"line"==n.data("tempShape").type)){var e={x:1*(t.clientX+o()(window).scrollLeft()-o()(this).offset().left-C)/o()(this).width(),y:1*(t.clientY+o()(window).scrollTop()-o()(this).offset().top-C)/o()(this).height()};e=c(e=u(e,n),n.data("grid"));var i=n.data("tempShape").points;if(!k(e,i[0],n)&&(n.data("tempShape").points.push(e),2==i.length)){if("rectangle"==n.data("tempShape").type){var r=Math.min(i[0].x,i[1].x),s=Math.max(i[0].x,i[1].x),a=Math.min(i[0].y,i[1].y),l=Math.max(i[0].y,i[1].y);n.data("tempShape").points=[{x:r,y:a},{x:s,y:l}]}n.dfmCanvas("finishDrawing")}}})),n.data("readOnly")||n.mousemove((function(t){if(n.data("tempShape")){n.data("tempShape").type;var e=1*(t.clientX+o()(window).scrollLeft()-o()(this).offset().left-C)/o()(this).width(),i=1*(t.clientY+o()(window).scrollTop()-o()(this).offset().top-C)/o()(this).height();n.data("tempShape").tempPoint=c(u({x:e,y:i},n),n.data("grid")),n.dfmCanvas("redraw")}})),n.data("readOnly")||n.mouseout((function(t){n.data("tempShape")&&(n.data("tempShape").tempPoint=void 0),n.dfmCanvas("redraw")})),n.dfmCanvas("redraw"),E(),n.data("editMode")||n.data("readOnly")||n.dfmCanvas("startDrawing",n.data("type"))}}};var p=12,f=8,m=.08,g=.08,v=.12,y=.04;function _(t){return Math.round(1e3*t)/1e3}var b=5,w=["rgb(112,172,71)","rgb(91,154,213)","rgb(253,191,0)","rgb(237,125,50)"];function k(t,e,n){var i=Math.abs((t.x-e.x)*n.width()),r=Math.abs((t.y-e.y)*n.height());return i<=15&&r<=15}function x(t){for(var e=Math.floor(Math.log(t)/Math.log(10)),n=t/Math.pow(10,e),i=[1,2,5,10],r=-1,s=1e5,o=0;o<i.length;o++){var a=Math.abs(n-i[o]);a>=0&&a<s&&(r=i[o],s=a)}return r*Math.pow(10,e)}function S(t,e,n){var i=e[0].getContext("2d"),r=e.width(),s=e.height(),a=t.points,c=t.tempPoint;if(i.lineCap="round",i.lineWidth=1,-1==n?(i.strokeStyle="#000000",i.fillStyle="#000000"):t.color?(i.strokeStyle=t.color,i.fillStyle=t.color):(i.strokeStyle=w[n%w.length],i.fillStyle=w[n%w.length]),0!=a.length){if("rectangle"==t.type){var u=l(a[0],e.data("grid")),d=l(2==a.length?a[1]:c,e.data("grid"));if(1==a.length&&i.fillRect(u.x*r-b/2,u.y*s-b/2,b,b),!d)return;var h=Math.min(u.x,d.x),p=Math.min(u.y,d.y),f=Math.abs(d.x-u.x),m=Math.abs(d.y-u.y);return i.fillRect(h*r,p*s,f*r,m*s),i.strokeStyle="#000000",i.fillStyle="#000000",i.rect(h*r,p*s,f*r,m*s),void i.stroke()}i.beginPath();var g=l(a[0],e.data("grid"));if(i.moveTo(g.x*r,g.y*s),o().each(a,(function(n,o){var a=(o=l(o,e.data("grid"))).x*r,c=o.y*s,u=1;"point"==t.type&&(u=2),!0!==t.nodots&&i.fillRect(a-b*u/2,c-b*u/2,b*u,b*u),i.lineTo(a,c)})),c){k(c,a[0],e)&&(c=a[0]);var v=l(c,e.data("grid"));i.lineTo(v.x*r,v.y*s)}i.stroke(),a.length>=2&&(k(a[0],a[a.length-1],e)||c&&k(a[0],c,e))&&(i.closePath(),"polygon"==t.type&&i.fill())}}function T(t){t.data("listeners")&&o().each(t.data("listeners"),(function(t,e){e()}))}o()(window).resize((function(){E()}));var C=1.4;function E(){o()("canvas.dfmCanvas").each((function(){var t=o()(this);if(t.is(":visible")){t.attr("width","1px"),t.attr("height","1px");var e=t.parent().width()-20;e>600&&(e=600),t.attr("width",e+"px");var n=e/C;t.attr("height",n+"px"),t.data("redrawTimer")&&clearTimeout(t.data("redrawTimer")),t.data("redrawTimer",setTimeout((function(){t.dfmCanvas("redraw")}),100))}})),o()("canvas.dfmProgressLineGraph").each((function(){var t=o()(this);if(t.is(":visible")){t.attr("width","1px");var e=t.parent().width()-20;e>600&&(e=600),t.attr("width",e+"px"),t.data("redrawTimer")&&clearTimeout(t.data("redrawTimer")),t.data("redrawTimer",setTimeout((function(){t.dfmProgressLineGraph("redraw")}),100))}}))}},9586:(t,e,n)=>{"use strict";n.d(e,{N$:()=>C,S5:()=>E,ZR:()=>w,cI:()=>U});var r=n(3264),s=n.n(r),o=n(3104),a=n(3411),l=n(2187),c=0;jQuery.fn.dfmWhiteboard=function(t,e){if(null!=e){l=$(this);var n=$(this).data("core"),i=$(this).data("control");if(c=$(this).data("options"),"giveControl"===t)e?($(this).addClass("control"),$(this).mousedown((function(t){b(l,t)})),$(this).mousemove((function(t){x(l,t)})),$(this).mouseup((function(t){S(l,t)})),$(this).mouseout((function(t){$(this).data("control").currentStroke&&S($(this),t)})),$(this)[0].addEventListener("touchstart",(function(t){b(l,t)})),$(this)[0].addEventListener("touchmove",(function(t){x(l,t)})),$(this)[0].addEventListener("touchend",(function(t){S(l,t)})),$(this)[0].addEventListener("mousewheel",(function(t){t.preventDefault(),i.zoom||(i.zoom=1);var e=t.ctrlKey,n=t.wheelDelta>=1,r=Math.abs(t.wheelDelta)<=40,s=null!=t.wheelDeltaX&&0!=t.wheelDeltaX;if(e){var o=k(t,l,null,!0),a=i.zoom;n?i.zoom+=i.zoom<1?.03:.1:(i.zoom-=i.zoom<1?.03:.1,i.zoom<.3&&(i.zoom=.3));var c=a/i.zoom;i.offset.x=o.x-(o.x-i.offset.x)*c,i.offset.y=o.y-(o.y-i.offset.y)*c}else console.log(JSON.stringify(t.wheelDelta+" "+t.wheelDeltaX+" "+t.wheelDeltaY)),n?s?i.offset.x-=.025/(i.zoom*r?10:1):i.offset.y-=.02/(i.zoom*r?10:1):s?i.offset.x+=.025/(i.zoom*r?10:1):i.offset.y+=.02/(i.zoom*r?10:1);I(l)}))):($(this).removeClass("control"),$(this).css("cursor","default"),$(this).unbind(),$(document).unbind("keydown"),$(document).unbind("keypress"));else if("instantiateMenu"===t||"reinstantiateMenu"===t){var r=e;l.data("menu",r),console.log(r.attr("id"));var s="<div class='colours'><ul>",o=["#000","#ff0","#00f","#0f0","#aaa","#f00","#f80","#a0f"];for(f=0;f<o.length;f++)s+="<li><a style='background-color:"+o[f]+"' rel='"+o[f]+"' href='#' "+(0==f?"class='colour-default'":"")+"></a></li>";s+="</ul></div>",s+="<div class='buttons'>",c.master&&(s+="<button class='paint-button button-tab'><img src='/homework/img/whiteboard-64.png' style='width:24px;height:24px' name='Paint'></button>",s+="<button class='view-button button-tab'><img src='/assets/whiteboard/view.png' name='View Student Whiteboards'><span class='notification-number' id='connected-number'>0</span></button>"),s+="<button class='pen-button mode-button'><img src='/images/draw_icon.svg'></button>",s+="<button class='straightline-button mode-button'><img src='/assets/whiteboard/straightline.png'></button>",s+="<button class='circle-button mode-button'><img src='/images/circle_icon.svg'></button>",s+="<button class='arc-button mode-button'><img src='/assets/whiteboard/arc.png'></button>",s+="<span class='erase-button-super button-menu'>",s+="<button class='erase-button mode-button'><img src='/images/eraser_icon.svg' name='Erase'></button>",s+="<ul class='erase-menu'>",s+="<li><a href='#'><img src='/assets/whiteboard/rubber.png'> Rubber</a></li>",s+="<li><a href='#'><img src='/assets/whiteboard/bin.png'> Clear All</a></li>",s+="<li><a href='#'><img src='/assets/whiteboard/bin.png'> Clear All (excl images)</a></li>",c.teacher&&(s+="<li><a href='#'><img src='/assets/whiteboard/bin.png'> Clear All for All</a></li>"),s+="</ul>",s+="</span>",s+="<span class='grid-button-super button-menu'>",s+="<button class='grid-button'><img src='/assets/whiteboard/grid.png' name='Grids'></button>",s+="<ul class='grid-menu'>",s+="<li><a href='#'><img src='/assets/whiteboard/grid-none.png'> None</a></li>",s+="<li><a href='#'><img src='/assets/whiteboard/grid-lines.png'> Grid Lines (L)</a></li>",s+="<li><a href='#'><img src='/assets/whiteboard/grid-linessmall.png'> Grid Lines (S)</a></li>",s+="<li><a href='#'><img src='/assets/whiteboard/grid-dots.png'> Grid Dots</a></li>",s+="<li><a href='#'><img src='/assets/whiteboard/grid-isometric.png'> Isometric (H)</a></li>",s+="<li><a href='#'><img src='/assets/whiteboard/grid-isometric2.png'> Isometric (V)</a></li>",s+="</ul>",s+="</span>",c.allowImageUpload&&(s+="<button class='uploadimage-button mode-button'><img src='/assets/whiteboard/uploadimage.png'></button>",s+="<input type='file' class='image-file-upload' style='display:none'>"),c.teacher&&(s+="<button class='question-button'><img src='/assets/whiteboard/book.png' name='Load Question/Worksheet'></button>"),s+="<button class='text-button mode-button'><img src='/assets/whiteboard/text.png'></button>",s+="<button class='equation-button mode-button' id='equation-button'><img src='/assets/whiteboard/textlatex.png'></button>",s+="<button class='fullscreen-button'><img src='/assets/whiteboard/fullscreen.png' name='Fullscreen'></button>",c.allowColorInvert&&(s+="<button class='colorinvert-button mode-button'><img src='/assets/whiteboard/darkmode.png'></button>"),c.admin&&(s+="<button id='showadmin-button' class='admin-button'>::</button>",s+="<button id='bounding-button' class='admin-button'>BoundingBox</button>",s+="<button id='curve-button' class='admin-button'>BezierCurve</button>",s+="<button id='load-button' class='admin-button'>Load</button>",s+="<button id='save-button' class='admin-button'>Save</button>",s+="<button id='saveas-button' class='admin-button'>Save As</button>",s+="<button id='preview-button' class='admin-button'>Preview</button>",s+="<span id='label' class='admin-button'></span>"),s+="</div>",r.html(s),c.admin&&($(".admin-button").hide(),$("#showadmin-button").show()),$(".button-tab").hide(),r.find(".erase-menu").find("a").eq(0).mousedown((function(){v(l,"erase")})),r.find(".erase-menu").find("a").eq(1).mousedown((function(){w(l,0)})),r.find(".erase-menu").find("a").eq(2).mousedown((function(){w(l,1)})),r.find(".erase-menu").find("a").eq(3).mousedown((function(){w(l,2)})),r.find(".grid-menu").find("a").eq(0).mousedown((function(){m(l,"none")})),r.find(".grid-menu").find("a").eq(1).mousedown((function(){m(l,"grid")})),r.find(".grid-menu").find("a").eq(2).mousedown((function(){m(l,"gridsmall")})),r.find(".grid-menu").find("a").eq(3).mousedown((function(){m(l,"dots")})),r.find(".grid-menu").find("a").eq(4).mousedown((function(){m(l,"isometric")})),r.find(".grid-menu").find("a").eq(5).mousedown((function(){m(l,"isometric2")})),r.find(".uploadimage-button").mousedown((function(){r.find(".image-file-upload").trigger("click")})),r.find(".image-file-upload").change((function(t){var e,n;e=t.target.files,(n=new FormData).append("file",e[0]),$.ajax({url:"/util-uploadwhiteboardpic.php",type:"POST",contentType:!1,dataType:"json",processData:!1,cache:!1,data:n,success:function(t){t.img?C($("#whiteboard"),t.img,void 0,!0):(0,a.iM)("Error: <strong>"+t.error+"</strong>")},error:function(t,e,n){(0,a.iM)("There was an error: "+t.responseText+" "+n)}}),$(".image-file-upload").val("")})),r.find(".colours li a").mousedown((function(){i.currentColour=$(this).attr("rel");var t=$(this).attr("rel").substr(1);l.data("control").colorInvert&&"000"==t&&(t="fff"),l.css("cursor","url(/assets/whiteboard/cursor"+t+".cur) 6 6, auto"),r.find(".colours li a").removeClass("selected"),$(this).addClass("selected"),"erase"===i.drawMode&&(i.drawMode="straightline.png"==r.find(".drawmode-button img").attr("src")?"straightline":"pen")})),r.find(".colour-default").mousedown(),r.find(".colorinvert-button").mousedown((function(){!function(t){var e=t.data("control");t.data("control").colorInvert?($("html").removeClass("inverted"),"#000"==e.currentColour&&t.css("cursor","url(/assets/whiteboard/cursor000.cur) 6 6, auto")):($("html").addClass("inverted"),"#000"==e.currentColour&&t.css("cursor","url(/assets/whiteboard/cursorfff.cur) 6 6, auto")),t.data("control").colorInvert=!t.data("control").colorInvert;var n=t.data("core").img;n&&"/images/qimg"==n.substr(0,12)&&(t.data("control").colorInvert?C(t,n.replace(".png","-inverted.png"),void 0,!1):C(t,n.replace("-inverted",""),void 0,!1)),I(t)}(l)})),r.find(".undo-button").mousedown((function(){!function(t){t.data("core").strokes.pop(),I(t),t.data("control").transmit&&t.data("control").transmit("delete",t)}(l)})),r.find(".fullscreen-button").mousedown(R),r.find(".clear-button").mousedown((function(){w(l)})),r.find(".require-login").length>0&&r.find(".require-login").mousedown(changeRequireLogin),r.find(".view-button").mousedown((function(){W("view")})),r.find(".paint-button").mousedown((function(){W("paint")})),r.find(".connect-button").mousedown((function(){W("connect")})),r.find(".rubber-button").mousedown((function(){n.drawMode="erase"})),r.find(".pen-button").mousedown((function(){v(l,"pen")})),r.find(".straightline-button").mousedown((function(){v(l,"straightline")})),r.find(".circle-button").mousedown((function(){v(l,"circle")})),r.find(".arc-button").mousedown((function(){v(l,"arc")})),r.find(".text-button").mousedown((function(){v(l,"text")})),r.find(".equation-button").mousedown((function(){v(l,"equation")})),$("#curve-button").mousedown((function(){v(l,"curve")})),$("#bounding-button").mousedown((function(){v(l,"bounding")})),$("#save-button").mousedown((function(){save(!1)})),$("#saveas-button").mousedown((function(){save(!0)})),$("#load-button").mousedown((function(){load(l)})),$("#preview-button").mousedown((function(){preview(l)})),r.find("#showadmin-button").mousedown((function(){$(".admin-button").show(),$(this).hide()})),r.find(".grid-button-super").mouseover((function(){r.find(".grid-menu").toggle();var t=r.find(".grid-button").offset().left;t+r.find(".grid-menu").outerWidth()>$(document).width()&&(t=$(document).width()-r.find(".grid-menu").outerWidth()),r.find(".grid-menu").offset({left:t,top:r.find(".grid-button").offset().top+r.find(".grid-button").outerHeight()-1})})),r.find(".grid-button-super").mouseout((function(){r.find(".grid-menu").hide()})),r.find(".drawmode-button-super").mouseover((function(){r.find(".drawmode-menu").toggle(),r.find(".drawmode-menu").offset({left:r.find(".drawmode-button").offset().left,top:r.find(".drawmode-button").offset().top+r.find(".drawmode-button").outerHeight()-1})})),r.find(".drawmode-button-super").mouseout((function(){r.find(".drawmode-menu").hide()})),r.find(".erase-button-super").mouseover((function(){r.find(".erase-menu").toggle();var t=r.find(".erase-button").offset().left;t+r.find(".erase-menu").outerWidth()>$(document).width()&&(t=$(document).width()-r.find(".erase-menu").outerWidth()),r.find(".erase-menu").offset({left:t,top:r.find(".erase-button").offset().top+r.find(".erase-button").outerHeight()-1})})),r.find(".erase-button-super").mouseout((function(){r.find(".erase-menu").hide()})),r.find(".question-button").mousedown((function(){a.ob.user?V((function(t){K(t)})):(0,a.iM)("You must be logged in with a teacher account in order to use this feature. <a href='../login.php?url=whiteboard'>Click here to login.</a>")})),"instantiateMenu"===t&&r.find(".paint-button").click(),document.addEventListener&&(document.addEventListener("webkitfullscreenchange",L,!1),document.addEventListener("mozfullscreenchange",L,!1),document.addEventListener("fullscreenchange",L,!1),document.addEventListener("MSFullscreenChange",L,!1)),$(document).unbind("keydown"),$(document).unbind("keypress"),$(document).mousedown((function(t){t.target})),v(l,"pen")}}else{var l,c;if(console.log("[WhiteboardConstruct] "+$(this).attr("id")),(l=$(this)).addClass("dfmWhiteboard"),(c={}).admin=!(!t||!t.admin)&&t.admin,c.control=!(!t||!t.control)&&t.control,c.master=!(!t||!t.master)&&t.master,c.teacher=!(!t||!t.teacher)&&t.teacher,c.resize=!(!t||!t.resize)&&t.resize,c.crop=!(!t||!t.crop)&&t.crop,c.allowImageUpload=!0,!t||!0!==t.allowImageUpload&&!1!==t.allowImageUpload||(c.allowImageUpload=t.allowImageUpload),c.allowColorInvert=!(!t||!t.allowColorInvert)&&t.allowColorInvert,c.fixTextSize=!(!t||!t.fixTextSize)&&t.fixTextSize,l.data("options",c),console.log("Set options to "+JSON.stringify(c)),l.data("core",{width:l.attr("width"),height:l.attr("height"),strokes:[],teacherStrokes:[],grid:"dots"}),l.data("control",{zoom:1,offset:{x:0,y:0},colorInvert:!1,currentStroke:void 0,currentTextBox:void 0,transmit:t&&t.transmit?t.transmit:null,drawMode:"paint",currentColour:"#000",isStroking:!1,touchedStart1:null,touchedStart2:null,touchZoomStart:void 0}),c.control&&$(this).dfmWhiteboard("giveControl",!0),t&&t.core){if(t.uncompress&&(l.data("core").strokes=function(t){if(!t)return t;for(var e=0;e<t.length;e++)t[e].points=Y(t[e].points);return t}(t.core.strokes)),t.crop){var d=function(t,e){var n=t.data("control"),i=t[0].getContext("2d"),r=1e7,s=-1e6,o=1e7,a=-1e6,l=(t.data("options").fixTextSize?30*n.zoom:Math.round(t.attr("width")*n.zoom/40))+"px Georgia";return i.font=l,$.each(e.strokes,(function(e,l){$.each(l.points,(function(e,c){var u=0;"text"===l.type&&(i.measureText(l.text).width,t.attr("width"),u=30*n.zoom/t.attr("width")),"equation"===l.type&&(l.imgScale,u=Math.max(.1,.4*l.imgScale)),c.y<r&&(r=c.y),c.x<o&&(o=c.x),c.y+u>s&&(s=c.y+u),c.x>a&&(a=c.x)}))})),console.log("MINY: "+r+" MAXY: "+s),$.each(e.strokes,(function(t,e){$.each(e.points,(function(t,e){e.y-=r-u}))})),a>1&&$.each(e.strokes,(function(t,e){$.each(e.points,(function(t,e){e.x/=a,e.y/=a}))})),{whiteboard:e,height:s-r+u}}(l,l.data("core"));l.data("core",d.whiteboard),l.data("core").height=d.height*l.data("core").width,l.attr("height",l.data("core").height)}t.core.grid&&(l.data("core").grid=t.core.grid),t.core.img&&C(l,t.core.img,t.core.imgScale);for(var h=0,f=0;f<l.data("core").strokes.length;f++){var g=l.data("core").strokes[f];"equation"==g.type&&(h++,p(g,(function(){0==--h&&I(l)})))}0==h&&I(l)}}};var u=.02;function d(t){var e=t.data("control");e.currentTextBox.text=$("#dummy-text-input").val(),$("#dummy-text-input").remove(),""!=$.trim(e.currentTextBox.text)&&t.data("core").strokes.push(e.currentTextBox),e.transmit&&e.transmit("stroke",t,e.currentTextBox),e.currentTextBox=void 0,I(t)}var h=1;function p(t,e){var n=h++;$("body").append("<span id='latex-to-imagify-"+n+"' style='visibility:hidden'></span>");var i=document.querySelector("#latex-to-imagify-"+n),r=s().getMetricsFor(i,!0),o=s().tex2svg(t.latex?t.latex:"",r);i.appendChild(o),$("#dummy-equation-input").remove(),closeKeyboard(!0),console.log("[GeneratingEquationImage] "+$("#latex-to-imagify-"+n).find("svg").length);var a=$("#latex-to-imagify-"+n).find("svg")[0],l=(new XMLSerializer).serializeToString(a),c=(a.getBoundingClientRect(),document.createElement("img"));c.setAttribute("src","data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(l)))),c.onload=function(){console.log("[EquationImageLoaded]"),$("#latex-to-imagify-"+n).remove(),t.imgLoaded=c,e&&e()}}function f(t){var e=t.data("control"),n=$("#dummy-equation-input").algebraicInput("latex");console.log("[Latex] "+n),e.currentEquationBox.latex=n;var i=t.attr("width")*e.zoom;console.log("[W] "+$("#dummy-equation-input").outerWidth()+" "+i),e.currentEquationBox.imgScale=$("#dummy-equation-input").outerWidth()/i,p(e.currentEquationBox,(function(){console.log("[AddingEquationStroke] "+JSON.stringify(e.currentEquationBox)),""!=$.trim(e.currentEquationBox.latex)&&t.data("core").strokes.push(e.currentEquationBox),e.transmit&&e.transmit("stroke",t,e.currentEquationBox),e.currentEquationBox=void 0,I(t)}))}function m(t,e){console.log("Grid: "+e),t.data("core").currentTextBox&&d(t),t.data("core").grid=e,t.data("menu").find(".grid-menu").hide(),I(t),t.data("control").transmit&&t.data("control").transmit("grid",t,e)}var g=!1;function v(t,e){t.data("control").currentTextBox&&d(t),$(".mode-button").removeClass("selected");var n=t.data("menu");n&&(n.find("."+e+"-button").addClass("selected"),n.find("."+e+"-button").blur()),t.data("control").drawMode=e;var i=t.data("control").currentColour.substr(1);t.data("control").colorInvert&&"000"==i&&(i="fff"),"pen"!=e&&"straightline"!=e&&"circle"!=e&&"arc"!=e&&"curve"!=e||t.css("cursor","url(/assets/whiteboard/cursor"+i+".cur) 6 6, auto"),console.log("C: "+i),"erase"===e&&t.css("cursor","url(/assets/whiteboard/cursor-erase.cur) 6 6, auto"),n.find(".drawmode-menu").hide(),n.find(".erase-menu").hide(),"arc"!==e||g||(g=!0,(0,a.iM)("To draw an arc, click the centre first, then drag your mouse <strong>clockwise</strong> between the two ends of the arc.")),"text"===e||"equation"===e?t.addClass("text"):t.removeClass("text"),t.data("control").currentStroke&&"curve"==t.data("control").currentStroke.type&&(console.log("[EndingCurve]"),t.data("control").currentStroke.points.splice(-1),t.data("core").strokes.push(t.data("control").currentStroke),t.data("control").currentStroke=void 0,t.data("control").isStroking=!1,I(t))}function y(t,e){for(var n=k(e,t,null,!0),i=[],r=t.data("core"),s=t.data("control"),o=[],a=0;a<r.strokes.length;a++){var c=r.strokes[a].points;if("circle"===r.strokes[a].type){var u=Math.sqrt(Math.pow(c[0].x-c[1].x,2)+Math.pow(c[0].y-c[1].y,2)),d=Math.sqrt(Math.pow(c[0].x-n.x,2)+Math.pow(c[0].y-n.y,2));Math.abs(u-d)<.005&&(i.push(a),o.push(r.strokes[a].id))}else if("arc"===r.strokes[a].type){var h=r.strokes[a].arcCentre,p=(u=Math.sqrt(Math.pow(c[0].x-h.x,2)+Math.pow(c[0].y-h.y,2)),d=Math.sqrt(Math.pow(h.x-n.x,2)+Math.pow(h.y-n.y,2)),180*Math.atan2(n.y-h.y,n.x-h.x)/Math.PI),f=180*Math.atan2(c[0].y-h.y,c[0].x-h.x)/Math.PI,m=180*Math.atan2(c[1].y-h.y,c[1].x-h.x)/Math.PI,g=p>=f&&p<=m||p>=f&&m<0||p<=m&&f>0||f<0&&m<0&&(p>=f||p<=m);Math.abs(u-d)<.005&&g&&(i.push(a),o.push(r.strokes[a].id))}else if("equation"===r.strokes[a].type){var v=c[0].x,y=c[0].y,_=c[0].x+r.strokes[a].imgScale,b=.4;r.strokes[a].imgLoaded&&(b=r.strokes[a].imgLoaded.naturalHeight/r.strokes[a].imgLoaded.naturalWidth),T=c[0].y+r.strokes[a].imgScale*b,n.x>=v&&n.x<=_&&n.y>=y&&n.y<=T&&(i.push(a),o.push(r.strokes[a].id))}else if("text"===r.strokes[a].type){Math.round(r.width*s.zoom/40);var w=t[0].getContext("2d").measureText(r.strokes[a].text).width,x=30*s.zoom,S=$(window).width()/$(document).width()*(1/r.width)*(1/s.zoom),T=(v=c[0].x-5*S,_=c[0].x+(w+5)*S,y=c[0].y-(x+15)*S,c[0].y+15*S);n.x>=v&&n.x<=_&&n.y>=y&&n.y<=T&&(i.push(a),o.push(r.strokes[a].id))}else for(var C=0;C<c.length-1;C++)if((d=(0,l.c)(n,c[C],c[C+1]))<.005){i.push(a),o.push(r.strokes[a].id);break}}var E=[];for(a=0;a<r.strokes.length;a++)-1==$.inArray(a,i)&&E.push(r.strokes[a]);if(r.strokes=E,i.length>0&&I(t),t.data("control").transmit&&i.length>0)for(a=0;a<o.length;a++)t.data("control").transmit("delete",t,o[a])}var _=void 0;function b(t,e){console.log("[StartDraw]");var n=t.data("control"),i=t.data("core");if(e.preventDefault?e.preventDefault():e.returnValue=!1,n.isStroking=!0,"erase"===n.drawMode)return y(t,e);if(e.touches&&2==e.touches.length){if(n.touchedStart1=k(e,t,0,!1),n.touchedStart2=k(e,t,1,!1),n.touchedStart1.x>n.touchedStart2.x){var r=n.touchedStart1;n.touchedStart1=n.touchedStart2,n.touchedStart2=r}return n.touchPosStart=n.offset,void(n.touchZoomStart=n.zoom)}if(!n.currentStroke){var o="normal";"circle"!==n.drawMode&&"arc"!==n.drawMode&&"bounding"!==n.drawMode&&"curve"!==n.drawMode||(o=n.drawMode),n.currentStroke={color:n.currentColour,points:[],id:(a.ob.user&&a.ob.user.id?a.ob.user.id+"-":"")+Math.floor(1e13*Math.random()),type:o}}var l=k(e,t);if(n.currentEquationBox||"equation"!==n.drawMode)if(n.currentEquationBox&&"equation"===n.drawMode)f(t);else if(n.currentTextBox||"text"!==n.drawMode){if(n.currentTextBox&&"text"===n.drawMode){Math.round(i.width*n.zoom/40);var c=t[0].getContext("2d").measureText(n.currentTextBox.text).width,u=30*n.zoom,h=$(window).width()/$(document).width()*(1/i.width)*(1/n.zoom),p=n.currentTextBox.points[0].x-5*h,m=n.currentTextBox.points[0].x+(c+5)*h,g=n.currentTextBox.points[0].y-(u+15)*h,v=n.currentTextBox.points[0].y+15*h;l.x>=p&&l.x<=m&&l.y>=g&&l.y<=v||d(t)}}else{var _;n.currentTextBox={type:"text",points:[l],text:"",color:n.currentColour},$("body").append("<input id='dummy-text-input' style='position: absolute; z-index: 2;' type='text'>"),(_=e.touches?{left:e.touches[0].clientX,top:e.touches[0].clientY}:{left:e.clientX,top:e.clientY}).top-=.5*$("#dummy-text-input").outerHeight(),$("#dummy-text-input").offset(_),$("#dummy-text-input").change((function(){d(t)})),$("#dummy-text-input").focus()}else n.currentEquationBox={type:"equation",points:[l],latex:"",color:n.currentColour,imgLoaded:null},$("body").append("<span id='dummy-equation-input' style='position:absolute;font-size:40px'></span>"),(_=e.touches?{left:e.touches[0].clientX,top:e.touches[0].clientY}:{left:e.clientX,top:e.clientY}).top-=.5*$("#dummy-equation-input").outerHeight(),$("#dummy-equation-input").offset(_),$("#dummy-equation-input").algebraicInput("handlers",{enter:function(){f(t)}}),s().typeset(),$("#dummy-equation-input").algebraicInput("focus"),setTimeout((function(){showKeyboard($("#dummy-equation-input"))}),500);"arc"!=n.drawMode||n.currentStroke.arcCentre?n.currentStroke.points.push(l):n.currentStroke.arcCentre=l,I(t)}function w(t,e){e||(e=0),console.log("[ClearStrokes] "+t.attr("id")+" mode="+e);var n=t.data("core");n.strokes=[],2==e&&(n.teacherStrokes=[]),1==e||t.data("wb")||t.data("w")||a.ob.user&&"student"==a.ob.user.type||(n.img=void 0,n.imgLoaded=void 0),I(t),t.data("control").transmit&&t.data("control").transmit("clear"+e,t),$(".erase-menu").hide()}function k(t,e,n,i){var r,s,o=e,a=(e.data("core"),e.data("control"));return n||(n=0),!1!==i&&(i=!0),t.touches?(r=(t.touches[n].clientX+$(window).scrollLeft()-o.offset().left-c)/o.width(),s=(t.touches[n].clientY+$(window).scrollTop()-o.offset().top-c)/o.width()):(r=(t.clientX+$(window).scrollLeft()-o.offset().left-c)/o.width(),s=(t.clientY+$(window).scrollTop()-o.offset().top-c)/o.width()),i&&(r=r/a.zoom+a.offset.x,s=s/a.zoom+a.offset.y),{x:r=Number(Number.parseFloat(r).toPrecision(7)),y:s=Number(Number.parseFloat(s).toPrecision(7))}}function x(t,e){try{var n=t.data("control");if(t.data("core"),e.preventDefault(),"text"===n.drawMode||"equation"===n.drawMode)return;if("erase"===n.drawMode&&n.isStroking)return y(t,e);if(n.currentStroke&&"arc"===n.currentStroke.type&&n.currentStroke.arcCentre&&0==n.currentStroke.points.length)return;if(n.touchedStart1){var i=k(e,t,0,!1),r=k(e,t,1,!1);if(i.x>r.x){var s=i;i=r,r=s}var o=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2))/Math.sqrt(Math.pow(n.touchedStart2.x-n.touchedStart1.x,2)+Math.pow(n.touchedStart2.y-n.touchedStart1.y,2));return n.zoom=n.zoom*o,n.offset.x,n.offset.x-=i.x-n.touchedStart1.x,n.offset.y-=i.y-n.touchedStart1.y,n.touchedStart1=i,n.touchedStart2=r,n.touchPosStart=n.offset,n.touchZoomStart=n.zoom,void I(t)}if(!n.isStroking)return;"straightline"===n.drawMode||"circle"===n.drawMode||"arc"===n.drawMode||"text"===n.drawMode||"bounding"===n.drawMode?n.currentStroke.points.splice(1):"curve"===n.drawMode&&n.currentStroke.points.length>=2&&n.currentStroke.points.splice(-1),n.currentStroke.points.push(k(e,t)),I(t)}catch(t){$("#label").html(t.message)}}function S(t,e){console.log("[EndDraw]");var n=t.data("control"),i=t.data("core");if(e&&e.preventDefault(),!n.currentStroke||"curve"!==n.currentStroke.type)if(n.currentStroke&&n.currentStroke.arcCentre&&0==n.currentStroke.points.length)console.log("Not ending arc draw");else{if(n.touchedStart1)return n.touchedStart1=null,n.touchedStart2=null,n.touchZoomStart=null,void(n.touchPosStart=null);n.isStroking=!1,n.currentStroke&&("text"===n.currentStroke.type&&(n.currentStroke.id=prompt("Enter id number.")),e.touches&&e.touches.length>=1&&n.currentStroke.points.push(k(e,t)),n.currentStroke.points.length>1&&("bounding"===n.drawMode?(i.bounding=n.currentStroke,console.log("[BoundingBox] "+JSON.stringify(i.bounding))):i.strokes.push(n.currentStroke)));var r=n.currentStroke;n.currentStroke=void 0,I(t),t.data("control").transmit&&"erase"!==n.drawMode&&t.data("control").transmit("stroke",t,r)}}function T(t,e,n,i){var r=e/t,s=i/n,o=0,a=0;return r>s?(e=i,t=i/r,o=0):r<s&&(t=n,e=n*r,a=0),{w:t,h:e,xOffset:o,yOffset:a}}function C(t,e,n,i,r){var s=t.data("core");s.img=e;var o=new Image;e&&(o.onload=function(){s.imgLoaded=o,n?s.imgScale=n:o.naturalHeight/o.naturalWidth>s.height/s.width?s.imgScale=s.height/(s.width*o.naturalHeight/o.naturalWidth):s.imgScale=1,s.imgInvert=r,I(t),i&&t.data("control").transmit&&t.data("control").transmit("image",t,{scale:s.imgScale,img:e})},o.src=e)}function E(t,e){var n=t.data("core");n.img=void 0,n.imgInvert=void 0,n.imgScale=1;var i=new Image;i.onload=function(){n.imgLoaded=i,I(t)},i.src=e}function I(t){var e=t.data("core"),n=t.data("control");n||(n={}),n.zoom||(n.zoom=1),n.offset.x||(n.offset.x=0),n.offset.y||(n.offset.y=0);var i=t[0].getContext("2d"),r=t.attr("width"),s=t.attr("height"),o=t.data("control").colorInvert;if(i.fillStyle=o?"#000":"#fff",i.fillRect(0,0,r,s),i.lineCap="round",e.bounding&&(console.log("Drawing bounding box!"),A(e.bounding,t,r,s,n.zoom,n.offset.x,n.offset.y)),function(t,e,n,i,r,s,o){var a=e.attr("width"),l=e.attr("height"),c=e.data("control").colorInvert||e.data("control").colorInvertSub,u=e[0].getContext("2d"),d=T(n,i,a,l);a=d.w,l=d.h;var h=d.xOffset,p=d.yOffset;if(u.strokeStyle=c?"#aaa":"#ddd",u.fillStyle=c?"#aaa":"#ddd","grid"==t||"gridsmall"==t){u.lineWidth=1;for(var f=0;f<=1;f+="grid"==t?D:O)u.beginPath(),u.moveTo(r*((f-s)*a+h),r*((0-o)*a+p)),u.lineTo(r*((f-s)*a+h),r*((l/a-o)*a+p)),u.stroke();for(var m=0;m<=l/a;m+="grid"==t?D:O)u.beginPath(),u.moveTo(r*((0-s)*a+h),r*((m-o)*a+p)),u.lineTo(r*((1-s)*a+h),r*((m-o)*a+p)),u.stroke()}else if("dots"==t)for(u.lineWidth=1,f=0;f<=1;f+=D)for(m=0;m<=2;m+=D)u.beginPath(),u.arc(r*((f-s)*a+h),r*((m-o)*a+p),a/1400*3*r,0,2*Math.PI),u.stroke(),u.fill();else if("isometric"==t){u.lineWidth=1;var g=0;for(m=0;m<=2;m+=D*Math.sqrt(3)/2){for(f=0;f<=1;f+=D)u.beginPath(),u.arc(r*((f-s)*a+h+(g%2==0?0:D*a/2)),r*((m-o)*a+p),a/1400*3*r,0,2*Math.PI),u.stroke(),u.fill();g++}}else if("isometric2"==t)for(u.lineWidth=1,g=0,m=0;m<=2;m+=.5*D){for(f=0;f<=1;f+=D*Math.sqrt(3))u.beginPath(),u.arc(r*((f-s)*a+h+(g%2==0?0:D*a*Math.sqrt(3)/2)),r*((m-o)*a+p),a/1400*3*r,0,2*Math.PI),u.stroke(),u.fill();g++}}(e.grid,t,r,s,n.zoom,n.offset.x,n.offset.y),e.imgLoaded){n.zoom||(n.zoom=1),n.offset.x||(n.offset.x=0),n.offset.y||(n.offset.y=0);var a=T(r,s,r,s);i.drawImage(e.imgLoaded,n.zoom*(-n.offset.x*a.w+a.xOffset),n.zoom*(-n.offset.y*a.w+a.yOffset),n.zoom*e.imgScale*a.w,n.zoom*e.imgScale*a.w*(e.imgLoaded.naturalHeight/e.imgLoaded.naturalWidth))}$.each(e.teacherStrokes,(function(e,i){A(i,t,r,s,n.zoom,n.offset.x,n.offset.y)})),$.each(e.strokes,(function(e,i){A(i,t,r,s,n.zoom,n.offset.x,n.offset.y)})),_&&(r=t.attr("width"),s=t.attr("height"),(i=t[0].getContext("2d")).strokeStyle="#ff0",i.fillStyle="#ff0",i.beginPath(),i.arc(1*(_.x*r+0),1*(_.y*r+0),5,0,2*Math.PI),i.stroke(),i.fill()),n.currentStroke&&A(n.currentStroke,t,r,s,n.zoom,n.offset.x,n.offset.y),n.currentTextBox&&M(n.currentTextBox,t,r,s,n.zoom,n.offset.x,n.offset.y)}var D=.05,O=.025;function M(t,e,n,i,r,s,o,a){r||(r=1),s||(s=0),o||(o=0);var l=e.attr("width"),c=e.attr("height"),u=e.data("control").colorInvert||e.data("control").colorInvertSub,d=e[0].getContext("2d"),h=T(n,i,l,c);l=h.w,c=h.h;var p=h.xOffset,f=h.yOffset,m=(e.data("options").fixTextSize?30*r:Math.round(l*r/40))+"px Georgia",g=(d.measureText(t.text).width,30*r),v=r*((t.points[0].x-s)*l+p),y=r*((t.points[0].y-o)*l+f)+g/2;d.strokeStyle=u&&"#000"==t.color?"#fff":t.color,d.fillStyle=u&&"#000"==t.color?"#fff":t.color,d.font=m,d.fillText(t.text,v,y)}function A(t,e,n,i,r,s,o){e||(e="#whiteboard"),r||(r=1),s||(s=0),o||(o=0);var a=$(e).attr("width"),l=$(e).attr("height");if(t&&0!=t.points.length){var c=t.points,u=$(e)[0].getContext("2d"),d=T(n,i,a,l);a=d.w,l=d.h;var h,p=d.xOffset,f=d.yOffset;if(u.strokeStyle=($(e).data("control").colorInvert||$(e).data("control").colorInvertSub)&&"#000"==t.color?function(t){for(var e="#",n=1;n<=3;n++)"f"==t.charAt(n)?e+="0":"e"==t.charAt(n)?e+="1":"d"==t.charAt(n)?e+="2":"c"==t.charAt(n)?e+="3":"b"==t.charAt(n)?e+="4":"a"==t.charAt(n)?e+="5":"9"==t.charAt(n)?e+="6":"8"==t.charAt(n)?e+="7":"7"==t.charAt(n)?e+="8":"6"==t.charAt(n)?e+="9":"5"==t.charAt(n)?e+="a":"4"==t.charAt(n)?e+="b":"3"==t.charAt(n)?e+="c":"2"==t.charAt(n)?e+="d":"1"==t.charAt(n)?e+="e":"0"==t.charAt(n)&&(e+="f");return e}(t.color):t.color,"text"===t.type)M(t,e,a,l,r,s,o);else if("equation"===t.type){if(t.imgLoaded){var m=T(a,l,a,l),g=r*((c[0].x-s)*a+p),v=r*((c[0].y-o)*a+f);t.imgScale||(t.imgScale=1);try{u.drawImage(t.imgLoaded,g,v,r*t.imgScale*m.w,r*t.imgScale*m.w*(t.imgLoaded.naturalHeight/t.imgLoaded.naturalWidth))}catch(t){}}}else{for(var y=1;y<c.length;y++){var _=Math.sqrt(Math.pow(c[y].x-c[y-1].x,2)+Math.pow(c[y].y-c[y-1].y,2)),b=Math.max(3,Math.min(10,Math.min(a/1400,1)*Math.max(1,Math.pow(130*_,1.4)))+1);if(h&&(b>h+1&&(b=h+1),b<h-1&&(b=h-1)),u.lineWidth=r*(2==c.length?6:b),u.beginPath(),"circle"===t.type){g=r*((c[y-1].x-s)*a+p),v=r*((c[y-1].y-o)*a+f);var w=r*((c[y].x-s)*a+p),k=r*((c[y].y-o)*a+f),x=Math.sqrt(Math.pow(g-w,2)+Math.pow(v-k,2));u.arc(g,v,x,0,2*Math.PI)}else if("arc"===t.type){g=r*((t.arcCentre.x-s)*a+p),v=r*((t.arcCentre.y-o)*a+f);var S=r*((c[y-1].x-s)*a+p),C=r*((c[y-1].y-o)*a+f),E=r*((c[y].x-s)*a+p),I=r*((c[y].y-o)*a+f),D=(x=Math.sqrt(Math.pow(g-S,2)+Math.pow(v-C,2)),Math.atan2(C-v,S-g)),O=Math.atan2(I-v,E-g);u.arc(g,v,x,D,O)}else"bounding"===t.type?(u.strokeStyle="#eee",S=r*((c[y-1].x-s)*a+p),C=r*((c[y-1].y-o)*a+f),E=r*((c[y].x-s)*a+p),I=r*((c[y].y-o)*a+f),u.rect(Math.min(S,E),Math.min(C,I),Math.abs(S-E),Math.abs(C-I))):"curve"!==t.type&&(u.moveTo(r*((c[y-1].x-s)*a+p),r*((c[y-1].y-o)*a+f)),u.lineTo(r*((c[y].x-s)*a+p),r*((c[y].y-o)*a+f)));u.stroke(),h=b}if("curve"===t.type){console.log("[DrawingBezierCurve] "+c.length);var A=[];u.lineWidth=1,$.each(c,(function(t,e){A.push({x:r*((e.x-s)*a+p),y:r*((e.y-o)*a+f)})})),u.drawCurve(A,.5,!1,100,!1),u.stroke()}}}}var P=!1;function R(){var t;P?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(t=document.documentElement).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),P=!P,$(window).resize()}function L(){document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(P=!1)}var N,F,q,j,H,z,B=!1;function W(t){if(console.log("[SetTab] "+t),$(".button-tab").removeClass("selected"),$("."+t+"-button").addClass("selected"),$("."+t+"-button").blur(),"paint"===t)$("#view-whiteboards").hide(),$("#whiteboard").show(),$("#connect-whiteboards").hide();else if("view"===t){if($("#view-whiteboards").show(),$("#whiteboard").hide(),$("#connect-whiteboards").hide(),alertedView&&!B){B=!0;var e=(0,o.A)();e.setOptions({showStepNumbers:!1,showBullets:!1,exitOnOverlayClick:!0,steps:[{element:"#view-whiteboards ul",intro:"Clicking on a view will allow you to see it full-screen. Clicking again closes it.",position:"top",highlightClass:"menu-highlight"}]}),e.start()}}else"connect"===t&&($("#connect-whiteboards").show(),$("#whiteboard").hide(),$("#view-whiteboards").hide());$(window).resize()}function U(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++){var i={color:t[n].color};i.points=Q(t[n].points),t[n].type&&(i.type=t[n].type),t[n].text&&(i.text=t[n].text),t[n].arcCentre&&(i.arcCentre=t[n].arcCentre),t[n].latex&&(i.latex=t[n].latex),t[n].imgScale&&(i.imgScale=t[n].imgScale),e.push(i)}return e}function Q(t){for(var e=[],n=0;n<t.length;n++)e.push(Number(t[n].x).toFixed(5)+","+Number(t[n].y).toFixed(5));return e.join("|")}function Y(t){for(var e=t.split("|"),n=0;n<e.length;n++)e[n]={x:Number(e[n].split(",")[0]),y:Number(e[n].split(",")[1])};return e}function V(t){$.ui.dialog.prototype._focusTable=function(){};var e="<div>";e+="<input type='hidden' id='worksheet-selector' value='1'> ",X&&(e+="<a href='javascript:closeWorksheet()' class='dfm-directoryselector'>Close Worksheet</a>"),X?e+="<h2>"+currentWorksheetTitle+"</h2>":(e+="<input type='hidden' name='browse-topics'>",e+="<input type='hidden' id='browse-author'> ",e+="<select name='browse-difficulty' style='padding:4px 8px 4px 8px;border-radius:5px;margin-left:10px'><option value=''>Difficulty: All</option><option value='1'>Difficulty: 1</option><option value='2'>Difficulty: 2</option><option value='3'>Difficulty: 3</option><option value='4'>Difficulty: 4</option></select>",e+=" <input type='text' style='width:130px;margin-left:10px;background-color:#fff;border:1px solid rgb(169,169,169);border-radius:5px;padding:5px 8px 5px 8px' name='keywords' placeholder='filter by keywords'>"),e+="</div>",e+="<br><div id='question-selector'><ul></ul></div><div id='question-selector-display'></div>",(0,a.W7)(e,[{label:"Use this question",action:function(){q?(t(q),N=q,q=void 0):(0,a.iM)("No question selected.")}}]),a.ob.user&&"parent"==a.ob.user.type&&$("#question-selector-display").html("<p style='margin:20px;background-color:red;color:#fff;padding:10px;border-radius:5px'>Exam questions from exam boards (e.g. Edexcel, AQA) are only available to teacher accounts, due to license restrictions.</p>"),$("#message-"+messageCounter).css("min-width","800px"),$("#worksheet-selector").dfmWorksheetSelector({callback:function(t){var e,n;console.log("W: "+JSON.stringify(t)),e=t.id,n=t.title,X=e,currentWorksheetTitle=n,V((function(t){console.log("[SelectedQ] "+JSON.stringify(t)),K(t)}))}}),$("#browse-author").dfmExamBoardSelector({callback:function(){G(),H=$("#browse-author").val()},light:!0}),$("#browse-author").dfmExamBoardSelector("val","allexam"),$("input[name=browse-topics]").dfmSkillDescriptorSelector({skillDescriptors,defaultMessage:"Filter by topic.",message:"Select a topic to filter by.",singleChoice:!0,listener:function(){G();var t=(F=$("input[name=browse-topics]").val())?F.substr(1):void 0;$("#browse-author").dfmExamBoardSelector("setSkillFilter",t)}}),F&&($("input[name=browse-topics]").dfmSkillDescriptorSelector("setValue",F),$("#browse-author").dfmExamBoardSelector("setSkillFilter",F.substr(1))),j&&$("select[name=browse-difficulty]").val(j),H&&$("#browse-author").dfmExamBoardSelector("val",H),z&&$("input[name=keywords]").val(z),$("select[name=browse-difficulty]").change((function(){G(),j=$(this).val()})),$("select[name=browse-author]").change((function(){G(),H=$(this).val()})),$("input[name=browse-topics]").closest(".vex-content").css("width","750px"),$("input[name=browse-topics]").next().find("span").css("display","inline-block"),$("input[name=browse-topics]").next().find("span").css("font-size","16px"),$("input[name=browse-topics]").next().css("display","inline-block"),$("input[name=browse-topics]").next().css("width","auto"),$("input[name=browse-topics]").next().css("vertical-align","middle"),$("input[name=browse-topics]").next().css("margin-right","10px"),$("input[name=keywords]").dfmWaitingInput((function(){G(),z=$("input[name=keywords]").val()})),G(),setTimeout((function(){$("input[name=keywords]").blur()}),30)}function G(){var t=$("input[name=browse-topics]").val(),e=$("select[name=browse-difficulty]").val(),n=$("input[name=keywords]").dfmInputWithDefaultMessage("val"),i=$("#browse-author").val(),r=[];n&&r.push("text="+n),t&&r.push("skills="+t),e&&r.push("difficulty="+e),X&&r.push("wid="+X),i&&r.push("courses="+$.map(i.split(","),(function(t){return 2==t.split("-").length?t.split("-")[1]:t})));var o="/util-getmatchingquestions.php?"+r.join("&");console.log("URL: "+o),$.ajax({url:o,type:"GET",contentType:!1,processData:!1,cache:!1,success:function(t){if($("#num-questions").html(t.count),$("#question-selector ul").empty(),$.each(t.summaries,(function(t,e){var n=[];$.each(e.skills,(function(t,e){n.push(dfmSkillDescriptorSelector_findName(e,skillDescriptors))})),e.permid&&n.push(dfmSkillDescriptorSelector_findName("k"+e.permid,skillDescriptors,!0));var i="<li  id='qinfo-"+$.escapeSelector("Q"+e.id)+"' ><a href='#' >";i+="<h1>"+replaceMathsTags(e.content)+"</h1>",e.permid||(i+="<h2><strong>Difficulty:</strong> <span class='difficulty-bar'>"+e.difficulty+"</span></h2>"),i+="<h2><strong>Author:</strong> "+e.author+"</h2>",i+="<h2><strong>Skills:</strong> "+n.join(" ")+"</h2>",i+="</a></li>",$("#question-selector ul").append(i),$("#question-selector ul").children().last().data("summary",e),$("#question-selector ul").children().last().click((function(){var t=$(this).data("summary"),n=e.permid?"/util-loadquestion.php?permid="+e.permid+"&params="+encodeURIComponent(JSON.stringify(e.params)):"/util-loadquestion.php?qid="+e.id;console.log(n),$.ajax({url:n,success:function(e){e.wid=t.wid,e.qnum=t.qnum,dfm_generateQuestionContent($("#question-selector-display"),e,(function(){return!1})),$("#question-selector-display").find("input[type=submit]").hide(),s().typeset(),q=e},error:function(t,e,n){(0,a.iM)("An error occurred: <strong>"+t.responseText+"</strong>")}})}))})),0==t.count&&$("#question-selector ul").append("<li>Sorry, but there are no questions which match your criteria.</li>"),$(".difficulty-bar").each((function(){$(this).dfmLevelBar()})),$(".difficulty-bar").dfmLevelBar("giveColour"),s().typeset(),N){console.log(JSON.stringify(N));var e=$("#qinfo-"+$.escapeSelector("Q"+N.id)),n=$("#question-selector");e.offset()&&n.offset()&&setTimeout((function(){n.animate({scrollTop:e.offset().top-n.offset().top+n.scrollTop()})}),300)}},error:function(t,e,n){(0,a.iM)("An error occurred: <strong>"+t.responseText+"</strong>")}})}$(window).resize((function(){$(".dfmWhiteboard").each((function(){$(this).data("options").resize&&function(t){var e=t.data("core");t.attr("width","1px"),t.attr("height","1px"),$("#view-whiteboards > ul").outerHeight(1);var n=t.parent().width()-3,i=$(window).height()-3-$("#menu").outerHeight();if(n=400,i=$(window).height()-6-$("#doquestion-whiteboard-actionbutton").outerHeight(),t.attr("width",n),t.css("width",n+"px"),t.attr("height",i),t.css("height",i+"px"),e.width=n,e.height=i,$("#view-whiteboards > ul").outerHeight(i-$("#connect-box").outerHeight()-50),I(t),$("#view-whiteboards").find(".expandedView").length>0){var r=$("#view-whiteboards").find(".expandedView").data("user"),s=r.uid;n=$(window).width()-10,i=$(window).height()-50-$("#view-"+s+" h1").outerHeight(),$("#view-"+s+" canvas").attr("width",n),$("#view-"+s+" canvas").css("width",n+"px"),$("#view-"+s+" canvas").attr("height",i),$("#view-"+s+" canvas").css("height",i+"px"),I($("#whiteboard-"+r.uid))}}($(this))}))}));var X=void 0;function K(t){if(t.img){var e=$("#whiteboard").data("control").colorInvert&&t.invertimg?t.invertimg:t.img;console.log("Img to use: "+e),C($("#whiteboard"),e,void 0,!0)}else setTimeout((function(){t.permid?generateKeySkillImages(t,$("#whiteboard").data("control").colorInvert,(function(t){console.log("Img to use: "+t),C($("#whiteboard"),t,void 0,!0)})):(0,a.iM)("Sorry, but this question appears to not be generated as an image for use on the DFM Whiteboard.<br><br>If the question is from one your worksheets, open the worksheet from the Worksheets interface and resave it; this will cause image versions of any Key Skill questions to be regenerated.<br><br><strong>Note that you may need to wait up to 10 minutes before Key Skill questions saved in a worksheet become available in the DFM Whiteboard.</strong>")}),400)}function J(t,e){for(t.moveTo(e[0],e[1]),i=2;i<e.length-1;i+=2)t.lineTo(e[i],e[i+1])}"undefined"!=CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawCurve=function(t,e,n,i,r){!function(t,e,n,i,r,s){if(s=s||!1,t.beginPath(),J(t,function(t,e,n,i){for(var r=[],s=0;s<t.length;s++)r.push(t[s].x),r.push(t[s].y);e=void 0!==e?e:.5,n=n||!1,i=i||16;var o,a,l,c,u,d,h,p,f,m,g,v,y=[],_=[];for(y=(t=r).slice(0),n?(y.unshift(t[t.length-1]),y.unshift(t[t.length-2]),y.unshift(t[t.length-1]),y.unshift(t[t.length-2]),y.push(t[0]),y.push(t[1])):(y.unshift(t[1]),y.unshift(t[0]),y.push(t[t.length-2]),y.push(t[t.length-1])),s=2;s<y.length-4;s+=2)for(v=0;v<=i;v++)l=(y[s+2]-y[s-2])*e,c=(y[s+4]-y[s])*e,u=(y[s+3]-y[s-1])*e,d=(y[s+5]-y[s+1])*e,g=v/i,h=2*Math.pow(g,3)-3*Math.pow(g,2)+1,p=-2*Math.pow(g,3)+3*Math.pow(g,2),f=Math.pow(g,3)-2*Math.pow(g,2)+g,m=Math.pow(g,3)-Math.pow(g,2),o=h*y[s]+p*y[s+2]+f*l+m*c,a=h*y[s+1]+p*y[s+3]+f*u+m*d,_.push(o),_.push(a);return _}(e,n,i,r)),s){t.stroke(),t.beginPath();for(var o=0;o<e.length-1;o+=2)t.rect(e[o]-2,e[o+1]-2,4,4)}}(this,t,e,n,i,r)})},3411:(t,e,n)=>{"use strict";n.d(e,{HB:()=>Zl,ob:()=>Xa,Y9:()=>_l,TI:()=>Rl,MQ:()=>Ic,iM:()=>Ka,Ng:()=>Ja,SX:()=>vl,W7:()=>gl,Ii:()=>Za,pN:()=>Kl,rg:()=>Xl,lL:()=>Tc,wL:()=>bc,ET:()=>Dl,fU:()=>gc,Dj:()=>mc,Kt:()=>Nl,G$:()=>Rc,Q0:()=>Pc,jt:()=>xc,z5:()=>fl,pu:()=>il,cn:()=>nl,x0:()=>el,eC:()=>rl,iy:()=>fc,tK:()=>Fc,a9:()=>sl,lo:()=>hc,qC:()=>pc,xI:()=>xl,cc:()=>_c,ok:()=>ml,bk:()=>Yl,Yg:()=>Lc,$4:()=>Nc,_D:()=>jl,Mg:()=>Ql,T_:()=>Ul});var i=n(7412),r=n(6936),s=n(9653),o=n(2220),a=n(2531),l=n(6641);const c=[];function u(t){const e=t.defaultIntegrations||[],n=t.integrations;let i;e.forEach((t=>{t.isDefaultInstance=!0})),i=Array.isArray(n)?[...e,...n]:"function"==typeof n?(0,r.k9)(n(e)):e;const s=function(t){const e={};return t.forEach((t=>{const{name:n}=t,i=e[n];i&&!i.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)})),Object.keys(e).map((t=>e[t]))}(i),o=function(t,e){for(let e=0;e<t.length;e++)if(!0==("Debug"===t[e].name))return e;return-1}(s);if(-1!==o){const[t]=s.splice(o,1);s.push(t)}return s}function h(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function p(t,e,n){if(n[e.name])o.T&&i.vF.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,-1===c.indexOf(e.name)&&(e.setupOnce(a.lb,l.BF),c.push(e.name)),e.setup&&"function"==typeof e.setup&&e.setup(t),t.on&&"function"==typeof e.preprocessEvent){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",((e,i)=>n(e,i,t)))}if(t.addEventProcessor&&"function"==typeof e.processEvent){const n=e.processEvent.bind(e),i=Object.assign(((e,i)=>n(e,i,t)),{id:e.name});t.addEventProcessor(i)}o.T&&i.vF.log(`Integration installed: ${e.name}`)}}function f(t,e){return Object.assign((function(...t){return e(...t)}),{id:t})}const m=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],g=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],v="InboundFilters",y=(t={})=>({name:v,setupOnce(){},processEvent(e,n,a){const l=a.getOptions(),c=function(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:m],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:g],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(t,l);return function(t,e){return e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t)?(o.T&&i.vF.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${(0,r.$X)(t)}`),!0):function(t,e){return!(t.type||!e||!e.length)&&function(t){const e=[];let n;t.message&&e.push(t.message);try{n=t.exception.values[t.exception.values.length-1]}catch(t){}return n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`)),o.T&&0===e.length&&i.vF.error(`Could not extract message for event ${(0,r.$X)(t)}`),e}(t).some((t=>(0,s.Xr)(t,e)))}(t,e.ignoreErrors)?(o.T&&i.vF.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${(0,r.$X)(t)}`),!0):function(t,e){if("transaction"!==t.type||!e||!e.length)return!1;const n=t.transaction;return!!n&&(0,s.Xr)(n,e)}(t,e.ignoreTransactions)?(o.T&&i.vF.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${(0,r.$X)(t)}`),!0):function(t,e){if(!e||!e.length)return!1;const n=_(t);return!!n&&(0,s.Xr)(n,e)}(t,e.denyUrls)?(o.T&&i.vF.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${(0,r.$X)(t)}.\nUrl: ${_(t)}`),!0):!function(t,e){if(!e||!e.length)return!0;const n=_(t);return!n||(0,s.Xr)(n,e)}(t,e.allowUrls)&&(o.T&&i.vF.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${(0,r.$X)(t)}.\nUrl: ${_(t)}`),!0)}(e,c)?null:e}});function _(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(e):null}catch(e){return o.T&&i.vF.error(`Cannot extract url for event ${(0,r.$X)(t)}`),null}}f(v,y);var b=n(8411),w=n(3741);let k;const x="FunctionToString",S=new WeakMap,T=()=>({name:x,setupOnce(){k=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=(0,b.sp)(this),n=S.has((0,w.KU)())&&void 0!==e?e:this;return k.apply(n,t)}}catch(t){}},setup(t){S.set(t,!0)}});f(x,T);var C=n(3917),E=n(5644),I=n(6341);const D=(0,I.VZ)();function O(){if(!("fetch"in D))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(t){return!1}}function M(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}const A=(0,I.VZ)(),P={},R={};function L(t,e){P[t]=P[t]||[],P[t].push(e)}function N(t,e){R[t]||(e(),R[t]=!0)}function F(t,e){const n=t&&P[t];if(n)for(const r of n)try{r(e)}catch(e){E.T&&i.vF.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${(0,C.qQ)(r)}\nError:`,e)}}const q=I.OW;let $;function H(t){const e="history";L(e,t),N(e,z)}function z(){if(!function(){const t=A.chrome,e=t&&t.app&&t.app.runtime,n="history"in A&&!!A.history.pushState&&!!A.history.replaceState;return!e&&n}())return;const t=q.onpopstate;function e(t){return function(...e){const n=e.length>2?e[2]:void 0;if(n){const t=$,e=String(n);$=e,F("history",{from:t,to:e})}return t.apply(this,e)}}q.onpopstate=function(...e){const n=q.location.href,i=$;if($=n,F("history",{from:i,to:n}),t)try{return t.apply(this,e)}catch(t){}},(0,b.GS)(q.history,"pushState",e),(0,b.GS)(q.history,"replaceState",e)}const B=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function W(t,e=!1){const{host:n,path:i,pass:r,port:s,projectId:o,protocol:a,publicKey:l}=t;return`${a}://${l}${e&&r?`:${r}`:""}@${n}${s?`:${s}`:""}/${i?`${i}/`:i}${o}`}function U(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}var Q=n(3816),Y=n(690),V=n(2181);function G(t,e=[]){return[t,e]}function X(t,e){const[n,i]=t;return[n,[...i,e]]}function K(t,e){const n=t[1];for(const t of n)if(e(t,t[0].type))return!0;return!1}function J(t,e){return(e||new TextEncoder).encode(t)}function Z(t,e){const[n,i]=t;let r=JSON.stringify(n);function s(t){"string"==typeof r?r="string"==typeof t?r+t:[J(r,e),t]:r.push("string"==typeof t?J(t,e):t)}for(const t of i){const[e,n]=t;if(s(`\n${JSON.stringify(e)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let t;try{t=JSON.stringify(n)}catch(e){t=JSON.stringify((0,V.S8)(n))}s(t)}}return"string"==typeof r?r:function(t){const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);let i=0;for(const e of t)n.set(e,i),i+=e.length;return n}(r)}function tt(t,e){const n="string"==typeof t.data?J(t.data,e):t.data;return[(0,b.Ce)({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const et={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function nt(t){return et[t]}function it(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function rt(t,e,n,i){const r=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&i&&{dsn:W(i)},...r&&{trace:(0,b.Ce)({...r})}}}class st extends Error{constructor(t,e="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}var ot=n(7058),at=n(5452),lt=n(9475);const ct="Not capturing exception because it's already been captured.";class ut{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=function(t){const e="string"==typeof t?function(t){const e=B.exec(t);if(!e)return void(0,i.pq)((()=>{console.error(`Invalid Sentry Dsn: ${t}`)}));const[n,r,s="",o,a="",l]=e.slice(1);let c="",u=l;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const t=u.match(/^\d+/);t&&(u=t[0])}return U({host:o,pass:s,path:c,projectId:u,port:a,protocol:n,publicKey:r})}(t):U(t);if(e&&function(t){if(!E.T)return!0;const{port:e,projectId:n,protocol:r}=t;return!(["protocol","publicKey","host","projectId"].find((e=>!t[e]&&(i.vF.error(`Invalid Sentry Dsn: ${e} missing`),!0)))||(n.match(/^\d+$/)?function(t){return"http"===t||"https"===t}(r)?e&&isNaN(parseInt(e,10))&&(i.vF.error(`Invalid Sentry Dsn: Invalid port ${e}`),1):(i.vF.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(i.vF.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(e))return e}(t.dsn):o.T&&i.vF.warn("No DSN provided, client will not send events."),this._dsn){const e=function(t,e={}){const n="string"==typeof e?e:e.tunnel,i="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${function(t){return`${function(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){return(0,b.u4)({sentry_key:t.publicKey,sentry_version:"7",...e&&{sentry_client:`${e.name}/${e.version}`}})}(t,i)}`}(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,n){if((0,r.GR)(t))return void(o.T&&i.vF.log(ct));let s=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,n))).then((t=>{s=t}))),s}captureMessage(t,e,n,i){let r=n&&n.event_id;const s=(0,Q.NF)(t)?t:String(t),o=(0,Q.sO)(t)?this.eventFromMessage(s,e,n):this.eventFromException(t,n);return this._process(o.then((t=>this._captureEvent(t,n,i))).then((t=>{r=t}))),r}captureEvent(t,e,n){if(e&&e.originalException&&(0,r.GR)(e.originalException))return void(o.T&&i.vF.log(ct));let s=e&&e.event_id;const a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,e,a||n).then((t=>{s=t}))),s}captureSession(t){"string"!=typeof t.release?o.T&&i.vF.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),(0,ot.qO)(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then((n=>e.flush(t).then((t=>n&&t))))):(0,Y.XW)(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),t)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return o.T&&i.vF.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const e=this._integrations[t.name];p(this,t,this._integrations),e||h(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=function(t,e,n,i){const r=it(n),s=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,n&&n.sdk);const o=rt(t,r,i,e);return delete t.sdkProcessingMetadata,G(o,[[{type:s},t]])}(t,this._dsn,this._options._metadata,this._options.tunnel);for(const t of e.attachments||[])n=X(n,tt(t,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(n);i&&i.then((e=>this.emit("afterSendEvent",t,e)),null)}sendSession(t){const e=function(t,e,n,i){const r=it(n);return G({sent_at:(new Date).toISOString(),...r&&{sdk:r},...!!i&&e&&{dsn:W(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const n=`${t}:${e}`;o.T&&i.vF.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(t){o.T&&i.vF.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const e=function(t,e,n,i){const r={sent_at:(new Date).toISOString()};n&&n.sdk&&(r.sdk={name:n.sdk.name,version:n.sdk.version}),i&&e&&(r.dsn=W(e));const s=function(t){const e=function(t){let e="";for(const n of t){const t=Object.entries(n.tags),i=t.length>0?`|#${t.map((([t,e])=>`${t}:${e}`)).join(",")}`:"";e+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${i}|T${n.timestamp}\n`}return e}(t);return[{type:"statsd",length:e.length},e]}(t);return G(r,[s])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}on(t,e){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e)}emit(t,...e){this._hooks[t]&&this._hooks[t].forEach((t=>t(...e)))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(t,e){const n={};return e.forEach((e=>{e&&p(t,e,n)})),n}(this,t),h(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,e){let n=!1,i=!1;const r=e.exception&&e.exception.values;if(r){i=!0;for(const t of r){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const s="ok"===t.status;(s&&0===t.errors||s&&n)&&((0,ot.qO)(t,{...n&&{status:"crashed"},errors:t.errors||Number(i||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Y.T2((e=>{let n=0;const i=setInterval((()=>{0==this._numProcessing?(clearInterval(i),e(!0)):(n+=1,t&&n>=t&&(clearInterval(i),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,i=(0,l.rm)()){const r=this.getOptions(),s=Object.keys(this._integrations);return!e.integrations&&s.length>0&&(e.integrations=s),this.emit("preprocessEvent",t,e),(0,lt.mG)(r,t,e,n,this,i).then((t=>{if(null===t)return t;const e={...i.getPropagationContext(),...n?n.getPropagationContext():void 0};if((!t.contexts||!t.contexts.trace)&&e){const{traceId:i,spanId:r,parentSpanId:s,dsc:o}=e;t.contexts={trace:{trace_id:i,span_id:r,parent_span_id:s},...t.contexts};const a=o||(0,at.l)(i,this,n);t.sdkProcessingMetadata={dynamicSamplingContext:a,...t.sdkProcessingMetadata}}return t}))}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then((t=>t.event_id),(t=>{if(o.T){const e=t;"log"===e.logLevel?i.vF.log(e.message):i.vF.warn(e)}}))}_processEvent(t,e,n){const i=this.getOptions(),{sampleRate:r}=i,s=ht(t),o=dt(t),a=t.type||"error",l=`before send for type \`${a}\``;if(o&&"number"==typeof r&&Math.random()>r)return this.recordDroppedEvent("sample_rate","error",t),(0,Y.xg)(new st(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"));const c="replay_event"===a?"replay":a,u=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,e,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",c,t),new st("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return n;const r=function(t,e,n){const{beforeSend:i,beforeSendTransaction:r}=t;return dt(e)&&i?i(e,n):ht(e)&&r?r(e,n):e}(i,n,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if((0,Q.Qg)(t))return t.then((t=>{if(!(0,Q.Qd)(t)&&null!==t)throw new st(n);return t}),(t=>{throw new st(`${e} rejected with ${t}`)}));if(!(0,Q.Qd)(t)&&null!==t)throw new st(n);return t}(r,l)})).then((i=>{if(null===i)throw this.recordDroppedEvent("before_send",c,t),new st(`${l} returned \`null\`, will not send event.`,"log");const r=n&&n.getSession();!s&&r&&this._updateSessionFromEvent(r,i);const o=i.transaction_info;if(s&&o&&i.transaction!==t.transaction){const t="custom";i.transaction_info={...o,source:t}}return this.sendEvent(i,e),i})).then(null,(t=>{if(t instanceof st)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new st(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,(t=>{o.T&&i.vF.error("Error while sending event:",t)}));o.T&&i.vF.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[n,i]=e.split(":");return{reason:n,category:i,quantity:t[e]}}))}}function dt(t){return void 0===t.type}function ht(t){return"transaction"===t.type}var pt=n(7986),ft=n(8341),mt=n(9297);const gt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function vt(t,e){const n=_t(t,e),i={type:e&&e.name,value:wt(e)};return n.length&&(i.stacktrace={frames:n}),void 0===i.type&&""===i.value&&(i.value="Unrecoverable error caught"),i}function yt(t,e){return{exception:{values:[vt(t,e)]}}}function _t(t,e){const n=e.stacktrace||e.stack||"",i=function(t){if(t){if("number"==typeof t.framesToPop)return t.framesToPop;if(bt.test(t.message))return 1}return 0}(e);try{return t(n,i)}catch(t){}return[]}const bt=/Minified React error #\d+;/i;function wt(t){const e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function kt(t,e,n,i,s){let o;if((0,Q.T2)(e)&&e.error)return yt(t,e.error);if((0,Q.BD)(e)||(0,Q.W6)(e)){const s=e;if("stack"in e)o=yt(t,e);else{const e=s.name||((0,Q.BD)(s)?"DOMError":"DOMException"),a=s.message?`${e}: ${s.message}`:e;o=xt(t,a,n,i),(0,r.gO)(o,a)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}return(0,Q.bJ)(e)?yt(t,e):(0,Q.Qd)(e)||(0,Q.xH)(e)?(o=function(t,e,n,i){const r=(0,w.KU)(),s=r&&r.getOptions().normalizeDepth,o={exception:{values:[{type:(0,Q.xH)(e)?e.constructor.name:i?"UnhandledRejection":"Error",value:St(e,{isUnhandledRejection:i})}]},extra:{__serialized__:(0,V.cd)(e,s)}};if(n){const e=_t(t,n);e.length&&(o.exception.values[0].stacktrace={frames:e})}return o}(t,e,n,s),(0,r.M6)(o,{synthetic:!0}),o):(o=xt(t,e,n,i),(0,r.gO)(o,`${e}`,void 0),(0,r.M6)(o,{synthetic:!0}),o)}function xt(t,e,n,i){const r={};if(i&&n){const i=_t(t,n);i.length&&(r.exception={values:[{value:e,stacktrace:{frames:i}}]})}if((0,Q.NF)(e)){const{__sentry_template_string__:t,__sentry_template_values__:n}=e;return r.logentry={message:t,params:n},r}return r.message=e,r}function St(t,{isUnhandledRejection:e}){const n=(0,b.HF)(t),i=e?"promise rejection":"exception";return(0,Q.T2)(t)?`Event \`ErrorEvent\` captured as ${i} with message \`${t.message}\``:(0,Q.xH)(t)?`Event \`${function(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch(t){}}(t)}\` (type=${t.type}) captured as ${i}`:`Object captured as ${i} with keys: ${n}`}const Tt=I.OW;let Ct=0;function Et(){return Ct>0}function It(t,e={},n){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return e;if((0,b.sp)(t))return t}catch(e){return t}const i=function(){const i=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const r=i.map((t=>It(t,e)));return t.apply(this,r)}catch(t){throw Ct++,setTimeout((()=>{Ct--})),(0,w.v4)((n=>{n.addEventProcessor((t=>(e.mechanism&&((0,r.gO)(t,void 0,void 0),(0,r.M6)(t,e.mechanism)),t.extra={...t.extra,arguments:i},t))),(0,w.Cp)(t)})),t}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}catch(t){}(0,b.pO)(i,t),(0,b.my)(t,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:()=>t.name})}catch(t){}return i}class Dt extends ut{constructor(t){!function(t,e,n=[e],i="npm"){const r=t._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${e}`,packages:n.map((t=>({name:`${i}:@sentry/${t}`,version:pt.M}))),version:pt.M}),t._metadata=r}(t,"browser",["browser"],Tt.SENTRY_SDK_SOURCE||(0,ft.e)()),super(t),t.sendClientReports&&Tt.document&&Tt.document.addEventListener("visibilitychange",(()=>{"hidden"===Tt.document.visibilityState&&this._flushOutcomes()}))}eventFromException(t,e){return function(t,e,n,i){const s=kt(t,e,n&&n.syntheticException||void 0,i);return(0,r.M6)(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),(0,Y.XW)(s)}(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",n){return function(t,e,n="info",i,r){const s=xt(t,e,i&&i.syntheticException||void 0,r);return s.level=n,i&&i.event_id&&(s.event_id=i.event_id),(0,Y.XW)(s)}(this._options.stackParser,t,e,n,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled())return void(gt&&i.vF.warn("SDK not enabled, will not capture user feedback."));const e=function(t,{metadata:e,tunnel:n,dsn:i}){const r={event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!i&&{dsn:W(i)}},s=function(t){return[{type:"user_report"},t]}(t);return G(r,[s])}(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(e)}_prepareEvent(t,e,n){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,n)}_flushOutcomes(){const t=this._clearOutcomes();if(0===t.length)return void(gt&&i.vF.log("No outcomes to send"));if(!this._dsn)return void(gt&&i.vF.log("No dsn provided, will not send outcomes"));gt&&i.vF.log("Sending outcomes:",t);const e=(n=t,G((r=this._options.tunnel&&W(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:(0,mt.lu)(),discarded_events:n}]]));var n,r;this._sendEnvelope(e)}}function Ot(){"console"in I.OW&&i.Ow.forEach((function(t){t in I.OW.console&&(0,b.GS)(I.OW.console,t,(function(e){return i.Z9[t]=e,function(...e){F("console",{args:e,level:t});const n=i.Z9[t];n&&n.apply(I.OW.console,e)}}))}))}const Mt=I.OW,At=1e3;let Pt,Rt,Lt;function Nt(t){L("dom",t),N("dom",Ft)}function Ft(){if(!Mt.document)return;const t=F.bind(null,"dom"),e=qt(t,!0);Mt.document.addEventListener("click",e,!1),Mt.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((e=>{const n=Mt[e]&&Mt[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&((0,b.GS)(n,"addEventListener",(function(e){return function(n,i,r){if("click"===n||"keypress"==n)try{const i=this,s=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},o=s[n]=s[n]||{refCount:0};if(!o.handler){const i=qt(t);o.handler=i,e.call(this,n,i,r)}o.refCount++}catch(t){}return e.call(this,n,i,r)}})),(0,b.GS)(n,"removeEventListener",(function(t){return function(e,n,i){if("click"===e||"keypress"==e)try{const n=this,r=n.__sentry_instrumentation_handlers__||{},s=r[e];s&&(s.refCount--,s.refCount<=0&&(t.call(this,e,s.handler,i),s.handler=void 0,delete r[e]),0===Object.keys(r).length&&delete n.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,i)}})))}))}function qt(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const i=function(t){try{return t.target}catch(t){return null}}(n);if(function(t,e){return"keypress"===t&&(!e||!e.tagName||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.isContentEditable)}(n.type,i))return;(0,b.my)(n,"_sentryCaptured",!0),i&&!i._sentryId&&(0,b.my)(i,"_sentryId",(0,r.eJ)());const s="keypress"===n.type?"input":n.type;(function(t){if(t.type!==Rt)return!1;try{if(!t.target||t.target._sentryId!==Lt)return!1}catch(t){}return!0})(n)||(t({event:n,name:s,global:e}),Rt=n.type,Lt=i?i._sentryId:void 0),clearTimeout(Pt),Pt=Mt.setTimeout((()=>{Lt=void 0,Rt=void 0}),At)}}const jt=I.OW,$t="__sentry_xhr_v3__";function Ht(t){L("xhr",t),N("xhr",zt)}function zt(){if(!jt.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;(0,b.GS)(t,"open",(function(t){return function(...e){const n=Date.now(),i=(0,Q.Kg)(e[0])?e[0].toUpperCase():void 0,r=function(t){if((0,Q.Kg)(t))return t;try{return t.toString()}catch(t){}}(e[1]);if(!i||!r)return t.apply(this,e);this[$t]={method:i,url:r,request_headers:{}},"POST"===i&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const s=()=>{const t=this[$t];if(t&&4===this.readyState){try{t.status_code=this.status}catch(t){}F("xhr",{args:[i,r],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?(0,b.GS)(this,"onreadystatechange",(function(t){return function(...e){return s(),t.apply(this,e)}})):this.addEventListener("readystatechange",s),(0,b.GS)(this,"setRequestHeader",(function(t){return function(...e){const[n,i]=e,r=this[$t];return r&&(0,Q.Kg)(n)&&(0,Q.Kg)(i)&&(r.request_headers[n.toLowerCase()]=i),t.apply(this,e)}})),t.apply(this,e)}})),(0,b.GS)(t,"send",(function(t){return function(...e){const n=this[$t];return n?(void 0!==e[0]&&(n.body=e[0]),F("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),t.apply(this,e)):t.apply(this,e)}}))}function Bt(t){const e="fetch";L(e,t),N(e,Wt)}function Wt(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!O())return!1;if(M(D.fetch))return!0;let t=!1;const e=D.document;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=M(n.contentWindow.fetch)),e.head.removeChild(n)}catch(t){E.T&&i.vF.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return t})()&&(0,b.GS)(I.OW,"fetch",(function(t){return function(...e){const{method:n,url:i}=function(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,n]=t;return{url:Qt(e),method:Ut(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:Qt(e),method:Ut(e,"method")?String(e.method).toUpperCase():"GET"}}(e),r={args:e,fetchData:{method:n,url:i},startTimestamp:Date.now()};return F("fetch",{...r}),t.apply(I.OW,e).then((t=>(F("fetch",{...r,endTimestamp:Date.now(),response:t}),t)),(t=>{throw F("fetch",{...r,endTimestamp:Date.now(),error:t}),t}))}}))}function Ut(t,e){return!!t&&"object"==typeof t&&!!t[e]}function Qt(t){return"string"==typeof t?t:t?Ut(t,"url")?t.url:t.toString?t.toString():"":""}var Yt=n(9766);const Vt=["fatal","error","warning","log","info","debug"];function Gt(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",i=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:i,relative:e[5]+n+i}}const Xt="Breadcrumbs",Kt=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:Xt,setupOnce(){},setup(t){e.console&&function(t){const e="console";L(e,t),N(e,Ot)}(function(t){return function(e){if((0,w.KU)()!==t)return;const n={category:"console",data:{arguments:e.args,logger:"console"},level:(i=e.level,"warn"===i?"warning":Vt.includes(i)?i:"log"),message:(0,s.gt)(e.args," ")};var i;if("assert"===e.level){if(!1!==e.args[0])return;n.message=`Assertion failed: ${(0,s.gt)(e.args.slice(1)," ")||"console.assert"}`,n.data.arguments=e.args.slice(1)}(0,w.ZQ)(n,{input:e.args,level:e.level})}}(t)),e.dom&&Nt(function(t,e){return function(n){if((0,w.KU)()!==t)return;let r,s,o="object"==typeof e?e.serializeAttribute:void 0,a="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;a&&a>1024&&(gt&&i.vF.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=1024),"string"==typeof o&&(o=[o]);try{const t=n.event,e=function(t){return!!t&&!!t.target}(t)?t.target:t;r=(0,Yt.Hd)(e,{keyAttrs:o,maxStringLength:a}),s=(0,Yt.xE)(e)}catch(t){r="<unknown>"}if(0===r.length)return;const l={category:`ui.${n.name}`,message:r};s&&(l.data={"ui.component_name":s}),(0,w.ZQ)(l,{event:n.event,name:n.name,global:n.global})}}(t,e.dom)),e.xhr&&Ht(function(t){return function(e){if((0,w.KU)()!==t)return;const{startTimestamp:n,endTimestamp:i}=e,r=e.xhr[$t];if(!n||!i||!r)return;const{method:s,url:o,status_code:a,body:l}=r,c={method:s,url:o,status_code:a},u={xhr:e.xhr,input:l,startTimestamp:n,endTimestamp:i};(0,w.ZQ)({category:"xhr",data:c,type:"http"},u)}}(t)),e.fetch&&Bt(function(t){return function(e){if((0,w.KU)()!==t)return;const{startTimestamp:n,endTimestamp:i}=e;if(i&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){const t=e.fetchData,r={data:e.error,input:e.args,startTimestamp:n,endTimestamp:i};(0,w.ZQ)({category:"fetch",data:t,level:"error",type:"http"},r)}else{const t=e.response,r={...e.fetchData,status_code:t&&t.status},s={input:e.args,response:t,startTimestamp:n,endTimestamp:i};(0,w.ZQ)({category:"fetch",data:r,type:"http"},s)}}}(t)),e.history&&H(function(t){return function(e){if((0,w.KU)()!==t)return;let n=e.from,i=e.to;const r=Gt(Tt.location.href);let s=n?Gt(n):void 0;const o=Gt(i);s&&s.path||(s=r),r.protocol===o.protocol&&r.host===o.host&&(i=o.relative),r.protocol===s.protocol&&r.host===s.host&&(n=s.relative),(0,w.ZQ)({category:"navigation",data:{from:n,to:i}})}}(t)),e.sentry&&t.on&&t.on("beforeSendEvent",function(t){return function(e){(0,w.KU)()===t&&(0,w.ZQ)({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:(0,r.$X)(e)},{event:e})}}(t))}}};f(Xt,Kt);const Jt="Dedupe",Zt=()=>{let t;return{name:Jt,setupOnce(){},processEvent(e){if(e.type)return e;try{if(function(t,e){return!!e&&(!!function(t,e){const n=t.message,i=e.message;return!(!n&&!i)&&(!(n&&!i||!n&&i)&&(n===i&&(!!ee(t,e)&&!!te(t,e))))}(t,e)||!!function(t,e){const n=ne(e),i=ne(t);return!(!n||!i)&&(n.type===i.type&&n.value===i.value&&(!!ee(t,e)&&!!te(t,e)))}(t,e))}(e,t))return gt&&i.vF.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){}return t=e}}};function te(t,e){let n=ie(t),i=ie(e);if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;if(i.length!==n.length)return!1;for(let t=0;t<i.length;t++){const e=i[t],r=n[t];if(e.filename!==r.filename||e.lineno!==r.lineno||e.colno!==r.colno||e.function!==r.function)return!1}return!0}function ee(t,e){let n=t.fingerprint,i=e.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;try{return!(n.join("")!==i.join(""))}catch(t){return!1}}function ne(t){return t.exception&&t.exception.values&&t.exception.values[0]}function ie(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}}f(Jt,Zt);let re=null;function se(t){const e="error";L(e,t),N(e,oe)}function oe(){re=I.OW.onerror,I.OW.onerror=function(t,e,n,i,r){return F("error",{column:i,error:r,line:n,msg:t,url:e}),!(!re||re.__SENTRY_LOADER__)&&re.apply(this,arguments)},I.OW.onerror.__SENTRY_INSTRUMENTED__=!0}let ae=null;function le(t){const e="unhandledrejection";L(e,t),N(e,ce)}function ce(){ae=I.OW.onunhandledrejection,I.OW.onunhandledrejection=function(t){return F("unhandledrejection",t),!(ae&&!ae.__SENTRY_LOADER__)||ae.apply(this,arguments)},I.OW.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ue="GlobalHandlers",de=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:ue,setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(function(t){se((e=>{const{stackParser:n,attachStacktrace:i}=fe();if((0,w.KU)()!==t||Et())return;const{msg:r,url:s,line:o,column:a,error:l}=e,c=void 0===l&&(0,Q.Kg)(r)?function(t,e,n,i){let r=(0,Q.T2)(t)?t.message:t,s="Error";const o=r.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);o&&(s=o[1],r=o[2]);return he({exception:{values:[{type:s,value:r}]}},e,n,i)}(r,s,o,a):he(kt(n,l||r,void 0,i,!1),s,o,a);c.level="error",(0,w.r)(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})}))}(t),pe("onerror")),e.onunhandledrejection&&(function(t){le((e=>{const{stackParser:n,attachStacktrace:i}=fe();if((0,w.KU)()!==t||Et())return;const r=function(t){if((0,Q.sO)(t))return t;const e=t;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return t}(e),s=(0,Q.sO)(r)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(r)}`}]}}:kt(n,r,void 0,i,!0);s.level="error",(0,w.r)(s,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(t),pe("onunhandledrejection"))}}};function he(t,e,n,i){const r=t.exception=t.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(i,10))?void 0:i,u=isNaN(parseInt(n,10))?void 0:n,d=(0,Q.Kg)(e)&&e.length>0?e:(0,Yt.$N)();return 0===l.length&&l.push({colno:c,filename:d,function:"?",in_app:!0,lineno:u}),t}function pe(t){gt&&i.vF.log(`Global Handler attached: ${t}`)}function fe(){const t=(0,w.KU)();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}f(ue,de);const me="HttpContext",ge=()=>({name:me,setupOnce(){},preprocessEvent(t){if(!Tt.navigator&&!Tt.location&&!Tt.document)return;const e=t.request&&t.request.url||Tt.location&&Tt.location.href,{referrer:n}=Tt.document||{},{userAgent:i}=Tt.navigator||{},r={...t.request&&t.request.headers,...n&&{Referer:n},...i&&{"User-Agent":i}},s={...t.request,...e&&{url:e},headers:r};t.request=s}});function ve(t,e,n=250,i,r,o,a){if(!(o.exception&&o.exception.values&&a&&(0,Q.tH)(a.originalException,Error)))return;const l=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,u;l&&(o.exception.values=(c=ye(t,e,r,a.originalException,i,o.exception.values,l,0),u=n,c.map((t=>(t.value&&(t.value=(0,s.xv)(t.value,u)),t)))))}function ye(t,e,n,i,r,s,o,a){if(s.length>=n+1)return s;let l=[...s];if((0,Q.tH)(i[r],Error)){_e(o,a);const s=t(e,i[r]),c=l.length;be(s,r,c,a),l=ye(t,e,n,i[r],r,[s,...l],s,c)}return Array.isArray(i.errors)&&i.errors.forEach(((i,s)=>{if((0,Q.tH)(i,Error)){_e(o,a);const c=t(e,i),u=l.length;be(c,`errors[${s}]`,u,a),l=ye(t,e,n,i,r,[c,...l],c,u)}})),l}function _e(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,..."AggregateError"===t.type&&{is_exception_group:!0},exception_id:e}}function be(t,e,n,i){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:i}}f(me,ge);const we="LinkedErrors",ke=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:we,setupOnce(){},preprocessEvent(t,i,r){const s=r.getOptions();ve(vt,s.stackParser,s.maxValueLength,n,e,t,i)}}},xe=(f(we,ke),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"]),Se="TryCatch",Te=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:Se,setupOnce(){e.setTimeout&&(0,b.GS)(Tt,"setTimeout",Ce),e.setInterval&&(0,b.GS)(Tt,"setInterval",Ce),e.requestAnimationFrame&&(0,b.GS)(Tt,"requestAnimationFrame",Ee),e.XMLHttpRequest&&"XMLHttpRequest"in Tt&&(0,b.GS)(XMLHttpRequest.prototype,"send",Ie);const t=e.eventTarget;t&&(Array.isArray(t)?t:xe).forEach(De)}}};function Ce(t){return function(...e){const n=e[0];return e[0]=It(n,{mechanism:{data:{function:(0,C.qQ)(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Ee(t){return function(e){return t.apply(this,[It(e,{mechanism:{data:{function:"requestAnimationFrame",handler:(0,C.qQ)(t)},handled:!1,type:"instrument"}})])}}function Ie(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((t=>{t in n&&"function"==typeof n[t]&&(0,b.GS)(n,t,(function(e){const n={mechanism:{data:{function:t,handler:(0,C.qQ)(e)},handled:!1,type:"instrument"}},i=(0,b.sp)(e);return i&&(n.mechanism.data.handler=(0,C.qQ)(i)),It(e,n)}))})),t.apply(this,e)}}function De(t){const e=Tt,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&((0,b.GS)(n,"addEventListener",(function(e){return function(n,i,r){try{"function"==typeof i.handleEvent&&(i.handleEvent=It(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:(0,C.qQ)(i),target:t},handled:!1,type:"instrument"}}))}catch(t){}return e.apply(this,[n,It(i,{mechanism:{data:{function:"addEventListener",handler:(0,C.qQ)(i),target:t},handled:!1,type:"instrument"}}),r])}})),(0,b.GS)(n,"removeEventListener",(function(t){return function(e,n,i){const r=n;try{const n=r&&r.__sentry_wrapped__;n&&t.call(this,e,n,i)}catch(t){}return t.call(this,e,r,i)}})))}f(Se,Te);const Oe="?";function Me(t,e,n,i){const r={filename:t,function:e,in_app:!0};return void 0!==n&&(r.lineno=n),void 0!==i&&(r.colno=i),r}const Ae=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Pe=/\((\S*)(?::(\d+))(?::(\d+))\)/,Re=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Le=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ne=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Fe=[[30,t=>{const e=Ae.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){const t=Pe.exec(e[2]);t&&(e[2]=t[1],e[3]=t[2],e[4]=t[3])}const[t,n]=je(e[1]||Oe,e[2]);return Me(n,t,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],[50,t=>{const e=Re.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const t=Le.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}let t=e[3],n=e[1]||Oe;return[n,t]=je(n,t),Me(t,n,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}],[40,t=>{const e=Ne.exec(t);return e?Me(e[2],e[1]||Oe,+e[3],e[4]?+e[4]:void 0):void 0}]],qe=(0,C.gd)(...Fe),je=(t,e)=>{const n=-1!==t.indexOf("safari-extension"),i=-1!==t.indexOf("safari-web-extension");return n||i?[-1!==t.indexOf("@")?t.split("@")[0]:Oe,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};const $e=6e4;function He(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}function ze(t,{statusCode:e,headers:n},i=Date.now()){const r={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const t of s.trim().split(",")){const[e,n,,,s]=t.split(":",5),o=parseInt(e,10),a=1e3*(isNaN(o)?60:o);if(n)for(const t of n.split(";"))"metric_bucket"===t&&s&&!s.split(";").includes("custom")||(r[t]=i+a);else r.all=i+a}else o?r.all=i+function(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;const i=Date.parse(`${t}`);return isNaN(i)?$e:i-e}(o,i):429===e&&(r.all=i+6e4);return r}const Be=30;function We(t,e,n=function(t){const e=[];function n(t){return e.splice(e.indexOf(t),1)[0]}return{$:e,add:function(i){if(!(void 0===t||e.length<t))return(0,Y.xg)(new st("Not adding Promise because buffer limit was reached."));const r=i();return-1===e.indexOf(r)&&e.push(r),r.then((()=>n(r))).then(null,(()=>n(r).then(null,(()=>{})))),r},drain:function(t){return new Y.T2(((n,i)=>{let r=e.length;if(!r)return n(!0);const s=setTimeout((()=>{t&&t>0&&n(!1)}),t);e.forEach((t=>{(0,Y.XW)(t).then((()=>{--r||(clearTimeout(s),n(!0))}),i)}))}))}}}(t.bufferSize||Be)){let r={};function s(s){const a=[];if(K(s,((e,n)=>{const i=nt(n);if(He(r,i)){const r=Ue(e,n);t.recordDroppedEvent("ratelimit_backoff",i,r)}else a.push(e)})),0===a.length)return(0,Y.XW)();const l=G(s[0],a),c=e=>{K(l,((n,i)=>{const r=Ue(n,i);t.recordDroppedEvent(e,nt(i),r)}))};return n.add((()=>e({body:Z(l,t.textEncoder)}).then((t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&o.T&&i.vF.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),r=ze(r,t),t)),(t=>{throw c("network_error"),t})))).then((t=>t),(t=>{if(t instanceof st)return o.T&&i.vF.error("Skipped sending event because buffer is full."),c("queue_overflow"),(0,Y.XW)();throw t}))}return s.__sentry__baseTransport__=!0,{send:s,flush:t=>n.drain(t)}}function Ue(t,e){if("event"===e||"transaction"===e)return Array.isArray(t)?t[1]:void 0}let Qe;function Ye(t,e=function(){if(Qe)return Qe;if(M(Tt.fetch))return Qe=Tt.fetch.bind(Tt);const t=Tt.document;let e=Tt.fetch;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const i=n.contentWindow;i&&i.fetch&&(e=i.fetch),t.head.removeChild(n)}catch(t){gt&&i.vF.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return Qe=e.bind(Tt)}()){let n=0,r=0;return We(t,(function(i){const s=i.body.length;n+=s,r++;const o={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,o).then((t=>(n-=s,r--,{statusCode:t.status,headers:{"x-sentry-rate-limits":t.headers.get("X-Sentry-Rate-Limits"),"retry-after":t.headers.get("Retry-After")}})))}catch(t){return Qe=void 0,n-=s,r--,(0,Y.xg)(t)}}))}function Ve(t){return We(t,(function(e){return new Y.T2(((n,i)=>{const r=new XMLHttpRequest;r.onerror=i,r.onreadystatechange=()=>{4===r.readyState&&n({statusCode:r.status,headers:{"x-sentry-rate-limits":r.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":r.getResponseHeader("Retry-After")}})},r.open("POST",t.url);for(const e in t.headers)Object.prototype.hasOwnProperty.call(t.headers,e)&&r.setRequestHeader(e,t.headers[e]);r.send(e.body)}))}))}const Ge=[y(),T(),Te(),Kt(),de(),ke(),Zt(),ge()];var Xe=n(3445);let Ke;function Je(t){const e=function(t){return Ke?Ke.get(t):void 0}(t);if(!e)return;const n={};for(const[,[t,i]]of e)n[t]||(n[t]=[]),n[t].push((0,b.Ce)(i));return n}const Ze="sentry.source",tn="sentry.sample_rate",en="sentry.op",nn="sentry.origin";var rn,sn=n(4636);function on(t,e){t.setTag("http.status_code",String(e)),t.setData("http.response.status_code",e);const n=function(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(e);"unknown_error"!==n&&t.setStatus(n)}!function(t){t.Ok="ok",t.DeadlineExceeded="deadline_exceeded",t.Unauthenticated="unauthenticated",t.PermissionDenied="permission_denied",t.NotFound="not_found",t.ResourceExhausted="resource_exhausted",t.InvalidArgument="invalid_argument",t.Unimplemented="unimplemented",t.Unavailable="unavailable",t.InternalError="internal_error",t.UnknownError="unknown_error",t.Cancelled="cancelled",t.AlreadyExists="already_exists",t.FailedPrecondition="failed_precondition",t.Aborted="aborted",t.OutOfRange="out_of_range",t.DataLoss="data_loss"}(rn||(rn={}));class an{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class ln{constructor(t={}){this._traceId=t.traceId||(0,r.eJ)(),this._spanId=t.spanId||(0,r.eJ)().substring(16),this._startTime=t.startTimestamp||(0,mt.zf)(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this.instrumenter=t.instrumenter||"sentry",this._attributes={},this.setAttributes({[nn]:t.origin||"manual",[en]:t.op,...t.attributes}),this._name=t.name||t.description,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.status&&(this._status=t.status),t.endTimestamp&&(this._endTime=t.endTimestamp),void 0!==t.exclusiveTime&&(this._exclusiveTime=t.exclusiveTime),this._measurements=t.measurements?{...t.measurements}:{}}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}set parentSpanId(t){this._parentSpanId=t}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}get startTimestamp(){return this._startTime}set startTimestamp(t){this._startTime=t}get endTimestamp(){return this._endTime}set endTimestamp(t){this._endTime=t}get status(){return this._status}set status(t){this._status=t}get op(){return this._attributes[en]}set op(t){this.setAttribute(en,t)}get origin(){return this._attributes[nn]}set origin(t){this.setAttribute(nn,t)}spanContext(){const{_spanId:t,_traceId:e,_sampled:n}=this;return{spanId:t,traceId:e,traceFlags:n?Xe.aO:Xe.CC}}startChild(t){const e=new ln({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});e.spanRecorder=this.spanRecorder,e.spanRecorder&&e.spanRecorder.add(e);const n=(0,sn.z)(this);if(e.transaction=n,o.T&&n){const r=`[Tracing] Starting '${t&&t.op||"< unknown op >"}' span on transaction '${(0,Xe.et)(e).description||"< unknown name >"}' (${n.spanContext().spanId}).`;i.vF.log(r),this._logMessage=r}return e}setTag(t,e){return this.tags={...this.tags,[t]:e},this}setData(t,e){return this.data={...this.data,[t]:e},this}setAttribute(t,e){void 0===e?delete this._attributes[t]:this._attributes[t]=e}setAttributes(t){Object.keys(t).forEach((e=>this.setAttribute(e,t[e])))}setStatus(t){return this._status=t,this}setHttpStatus(t){return on(this,t),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return"ok"===this._status}finish(t){return this.end(t)}end(t){if(this._endTime)return;const e=(0,sn.z)(this);if(o.T&&e&&e.spanContext().spanId!==this._spanId){const t=this._logMessage;t&&i.vF.log(t.replace("Starting","Finishing"))}this._endTime=(0,Xe.cI)(t)}toTraceparent(){return(0,Xe.Qh)(this)}toContext(){return(0,b.Ce)({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this._endTime=t.endTimestamp,this.op=t.op,this._parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this._startTime=t.startTimestamp||this._startTime,this._status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return(0,Xe.kX)(this)}getSpanJSON(){return(0,b.Ce)({data:this._getData(),description:this._name,op:this._attributes[en],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[nn],_metrics_summary:Je(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:e}=this,n=Object.keys(t).length>0,i=Object.keys(e).length>0;if(n||i)return n&&i?{...t,...e}:n?t:e}}function cn(t){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const e=(0,w.KU)(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function un(t){if(!cn())return;const e=function(t){if(t.startTime){const e={...t};return e.startTimestamp=(0,Xe.cI)(t.startTime),delete e.startTime,e}return t}(t),n=(0,l.BF)(),i=t.scope?t.scope.getSpan():(0,w.o5)().getSpan();if(t.onlyIfParent&&!i)return;const r=(t.scope||(0,w.o5)()).clone();return function(t,{parentSpan:e,spanContext:n,forceTransaction:i,scope:r}){if(!cn())return;const s=(0,l.rm)();let o;if(e&&!i)o=e.startChild(n);else if(e){const i=(0,at.k)(e),{traceId:r,spanId:s}=e.spanContext(),a=(0,Xe.pK)(e);o=t.startTransaction({traceId:r,parentSpanId:s,parentSampled:a,...n,metadata:{dynamicSamplingContext:i,...n.metadata}})}else{const{traceId:e,dsc:i,parentSpanId:a,sampled:l}={...s.getPropagationContext(),...r.getPropagationContext()};o=t.startTransaction({traceId:e,parentSpanId:a,parentSampled:l,...n,metadata:{dynamicSamplingContext:i,...n.metadata}})}return r.setSpan(o),function(t,e,n){t&&((0,b.my)(t,hn,n),(0,b.my)(t,dn,e))}(o,r,s),o}(n,{parentSpan:i,spanContext:e,forceTransaction:t.forceTransaction,scope:r})}const dn="_sentryScope",hn="_sentryIsolationScope";class pn extends ln{constructor(t,e){super(t),this._contexts={},this._hub=e||(0,l.BF)(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Ze]&&{source:this._attributes[Ze]},...this._attributes[tn]&&{sampleRate:this._attributes[tn]}}}set metadata(t){this._metadata=t}setName(t,e="custom"){this._name=t,this.setAttribute(Ze,e)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new an(t)),this.spanRecorder.add(this)}setContext(t,e){null===e?delete this._contexts[t]:this._contexts[t]=e}setMeasurement(t,e,n=""){this._measurements[t]={value:e,unit:n}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const e=(0,Xe.cI)(t),n=this._finishTransaction(e);if(n)return this._hub.captureEvent(n)}toContext(){const t=super.toContext();return(0,b.Ce)({...t,name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return(0,at.k)(this)}setHub(t){this._hub=t}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(t){if(void 0!==this._endTime)return;this._name||(o.T&&i.vF.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const e=this._hub.getClient();if(e&&e.emit&&e.emit("finishTransaction",this),!0!==this._sampled)return o.T&&i.vF.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(e&&e.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((t=>t!==this&&(0,Xe.et)(t).timestamp)):[];if(this._trimEnd&&n.length>0){const t=n.map((t=>(0,Xe.et)(t).timestamp)).filter(Boolean);this._endTime=t.reduce(((t,e)=>t>e?t:e))}const{scope:r,isolationScope:s}={scope:this[dn],isolationScope:this[hn]};const{metadata:a}=this,{source:l}=a,c={contexts:{...this._contexts,trace:(0,Xe.kX)(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...a,capturedSpanScope:r,capturedSpanIsolationScope:s,...(0,b.Ce)({dynamicSamplingContext:(0,at.k)(this)})},_metrics_summary:Je(this),...l&&{transaction_info:{source:l}}};return Object.keys(this._measurements).length>0&&(o.T&&i.vF.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),o.T&&i.vF.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const fn={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},mn=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class gn extends an{constructor(t,e,n,i){super(i),this._pushActivity=t,this._popActivity=e,this.transactionSpanId=n}add(t){if(t.spanContext().spanId!==this.transactionSpanId){const e=t.end;t.end=(...n)=>(this._popActivity(t.spanContext().spanId),e.apply(t,n)),void 0===(0,Xe.et)(t).timestamp&&this._pushActivity(t.spanContext().spanId)}super.add(t)}}class vn extends pn{constructor(t,e,n=fn.idleTimeout,r=fn.finalTimeout,s=fn.heartbeatInterval,a=!1,l=!1){super(t,e),this._idleHub=e,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=s,this._onScope=a,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=mn[4],this._autoFinishAllowed=!l,a&&(o.T&&i.vF.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),e.getScope().setSpan(this)),l||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=mn[3],this.end())}),this._finalTimeout)}end(t){const e=(0,Xe.cI)(t);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){o.T&&i.vF.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);for(const t of this._beforeFinishCallbacks)t(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter((t=>{if(t.spanContext().spanId===this.spanContext().spanId)return!0;(0,Xe.et)(t).timestamp||(t.setStatus("cancelled"),t.end(e),o.T&&i.vF.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));const{start_timestamp:n,timestamp:r}=(0,Xe.et)(t),s=n&&n<e,a=(this._finalTimeout+this._idleTimeout)/1e3,l=r&&n&&r-n<a;if(o.T){const e=JSON.stringify(t,void 0,2);s?l||i.vF.log("[Tracing] discarding Span since it finished after Transaction final timeout",e):i.vF.log("[Tracing] discarding Span since it happened after Transaction was finished",e)}return s&&l})),o.T&&i.vF.log("[Tracing] flushing IdleTransaction")}else o.T&&i.vF.log("[Tracing] No active IdleTransaction");if(this._onScope){const t=this._idleHub.getScope();t.getTransaction()===this&&t.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const e=t=>{this._finished||this._pushActivity(t)},n=t=>{this._finished||this._popActivity(t)};this.spanRecorder=new gn(e,n,this.spanContext().spanId,t),o.T&&i.vF.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:e}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===e,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=mn[5],this.end(t)))}setFinishReason(t){this._finishReason=t}sendAutoFinishSignal(){this._autoFinishAllowed||(o.T&&i.vF.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=mn[1],this.end(t))}),this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),o.T&&i.vF.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,o.T&&i.vF.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(o.T&&i.vF.log(`[Tracing] popActivity ${t}`),delete this.activities[t],o.T&&i.vF.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const t=(0,mt.zf)();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=mn[5],this.end(t)):this._restartIdleTimeout(t+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?this._autoFinishAllowed&&(o.T&&i.vF.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=mn[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){o.T&&i.vF.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function yn(t){return(t||(0,l.BF)()).getScope().getTransaction()}let _n=!1;function bn(){const t=yn();if(t){const e="internal_error";o.T&&i.vF.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}function wn(t,e,n){if(!cn(e))return t.sampled=!1,t;if(void 0!==t.sampled)return t.setAttribute(tn,Number(t.sampled)),t;let r;return"function"==typeof e.tracesSampler?(r=e.tracesSampler(n),t.setAttribute(tn,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==e.tracesSampleRate?(r=e.tracesSampleRate,t.setAttribute(tn,Number(r))):(r=1,t.setAttribute(tn,r)),kn(r)?r?(t.sampled=Math.random()<r,t.sampled?(o.T&&i.vF.log(`[Tracing] starting ${t.op} transaction - ${(0,Xe.et)(t).description}`),t):(o.T&&i.vF.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),t)):(o.T&&i.vF.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(o.T&&i.vF.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function kn(t){return(0,Q.yr)(t)||"number"!=typeof t&&"boolean"!=typeof t?(o.T&&i.vF.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):!(t<0||t>1)||(o.T&&i.vF.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1)}function xn(){const t=this.getScope().getSpan();return t?{"sentry-trace":(0,Xe.Qh)(t)}:{}}function Sn(t,e){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",a=t.instrumenter||"sentry";s!==a&&(o.T&&i.vF.error(`A transaction was started with instrumenter=\`${a}\`, but the SDK is configured with the \`${s}\` instrumenter.\nThe transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),t.sampled=!1);let l=new pn(t,this);return l=wn(l,r,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...e}),l.isRecording()&&l.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",l),l}function Tn(t,e,n,i,r,s,o,a=!1){const l=t.getClient(),c=l&&l.getOptions()||{};let u=new vn(e,t,n,i,o,r,a);return u=wn(u,c,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...s}),u.isRecording()&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),l&&l.emit&&l.emit("startTransaction",u),u}bn.tag="sentry_tracingErrorCallback";var Cn=n(6524);const En="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,In=I.OW,Dn=(t,e,n)=>{let i,r;return s=>{e.value>=0&&(s||n)&&(r=e.value-(i||0),(r||void 0===i)&&(i=e.value,e.delta=r,t(e)))}},On=()=>In.__WEB_VITALS_POLYFILL__?In.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const t=In.performance.timing,e=In.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==e?"back_forward":1===e?"reload":"navigate"};for(const e in t)"navigationStart"!==e&&"toJSON"!==e&&(n[e]=Math.max(t[e]-t.navigationStart,0));return n})()):In.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Mn=()=>{const t=On();return t&&t.activationStart||0},An=(t,e)=>{const n=On();let i="navigate";return n&&(i=In.document&&In.document.prerendering||Mn()>0?"prerender":n.type.replace(/_/g,"-")),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},Pn=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const i=new PerformanceObserver((t=>{e(t.getEntries())}));return i.observe(Object.assign({type:t,buffered:!0},n||{})),i}}catch(t){}},Rn=(t,e)=>{const n=i=>{"pagehide"!==i.type&&"hidden"!==In.document.visibilityState||(t(i),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};In.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},Ln=t=>{const e=An("CLS",0);let n,i=0,r=[];const s=t=>{t.forEach((t=>{if(!t.hadRecentInput){const s=r[0],o=r[r.length-1];i&&0!==r.length&&t.startTime-o.startTime<1e3&&t.startTime-s.startTime<5e3?(i+=t.value,r.push(t)):(i=t.value,r=[t]),i>e.value&&(e.value=i,e.entries=r,n&&n())}}))},o=Pn("layout-shift",s);if(o){n=Dn(t,e);const i=()=>{s(o.takeRecords()),n(!0)};return Rn(i),i}};let Nn=-1;const Fn=()=>(Nn<0&&(In.document&&In.document.visibilityState&&(Nn="hidden"!==In.document.visibilityState||In.document.prerendering?1/0:0),Rn((({timeStamp:t})=>{Nn=t}),!0)),{get firstHiddenTime(){return Nn}}),qn=t=>{const e=Fn(),n=An("FID");let i;const r=t=>{t.startTime<e.firstHiddenTime&&(n.value=t.processingStart-t.startTime,n.entries.push(t),i(!0))},s=t=>{t.forEach(r)},o=Pn("first-input",s);i=Dn(t,n),o&&Rn((()=>{s(o.takeRecords()),o.disconnect()}),!0)};let jn=0,$n=1/0,Hn=0;const zn=t=>{t.forEach((t=>{t.interactionId&&($n=Math.min($n,t.interactionId),Hn=Math.max(Hn,t.interactionId),jn=Hn?(Hn-$n)/7+1:0)}))};let Bn;const Wn=()=>{"interactionCount"in performance||Bn||(Bn=Pn("event",zn,{type:"event",buffered:!0,durationThreshold:0}))},Un=()=>Bn?jn:performance.interactionCount||0,Qn=[],Yn={},Vn=t=>{const e=Qn[Qn.length-1],n=Yn[t.interactionId];if(n||Qn.length<10||t.duration>e.latency){if(n)n.entries.push(t),n.latency=Math.max(n.latency,t.duration);else{const e={id:t.interactionId,latency:t.duration,entries:[t]};Yn[e.id]=e,Qn.push(e)}Qn.sort(((t,e)=>e.latency-t.latency)),Qn.splice(10).forEach((t=>{delete Yn[t.id]}))}},Gn=(t,e)=>{e=e||{},Wn();const n=An("INP");let i;const r=t=>{t.forEach((t=>{t.interactionId&&Vn(t),"first-input"===t.entryType&&!Qn.some((e=>e.entries.some((e=>t.duration===e.duration&&t.startTime===e.startTime))))&&Vn(t)}));const e=(()=>{const t=Math.min(Qn.length-1,Math.floor(Un()/50));return Qn[t]})();e&&e.latency!==n.value&&(n.value=e.latency,n.entries=e.entries,i())},s=Pn("event",r,{durationThreshold:e.durationThreshold||40});i=Dn(t,n,e.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Rn((()=>{r(s.takeRecords()),n.value<0&&Un()>0&&(n.value=0,n.entries=[]),i(!0)})))},Xn={},Kn=t=>{const e=Fn(),n=An("LCP");let i;const r=t=>{const r=t[t.length-1];if(r){const t=Math.max(r.startTime-Mn(),0);t<e.firstHiddenTime&&(n.value=t,n.entries=[r],i())}},s=Pn("largest-contentful-paint",r);if(s){i=Dn(t,n);const e=()=>{Xn[n.id]||(r(s.takeRecords()),s.disconnect(),Xn[n.id]=!0,i(!0))};return["keydown","click"].forEach((t=>{In.document&&addEventListener(t,e,{once:!0,capture:!0})})),Rn(e,!0),e}},Jn=t=>{In.document&&(In.document.prerendering?addEventListener("prerenderingchange",(()=>Jn(t)),!0):"complete"!==In.document.readyState?addEventListener("load",(()=>Jn(t)),!0):setTimeout(t,0))},Zn=(t,e)=>{e=e||{};const n=An("TTFB"),i=Dn(t,n,e.reportAllChanges);Jn((()=>{const t=On();if(t){if(n.value=Math.max(t.responseStart-Mn(),0),n.value<0||n.value>performance.now())return;n.entries=[t],i(!0)}}))},ti={},ei={};let ni,ii,ri,si,oi;function ai(t,e=!1){return mi("lcp",t,hi,ri,e)}function li(t,e){return gi(t,e),ei[t]||(function(t){const e={};"event"===t&&(e.durationThreshold=0),Pn(t,(e=>{ci(t,{entries:e})}),e)}(t),ei[t]=!0),vi(t,e)}function ci(t,e){const n=ti[t];if(n&&n.length)for(const r of n)try{r(e)}catch(e){En&&i.vF.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${(0,C.qQ)(r)}\nError:`,e)}}function ui(){return Ln((t=>{ci("cls",{metric:t}),ni=t}))}function di(){return qn((t=>{ci("fid",{metric:t}),ii=t}))}function hi(){return Kn((t=>{ci("lcp",{metric:t}),ri=t}))}function pi(){return Zn((t=>{ci("ttfb",{metric:t}),si=t}))}function fi(){return Gn((t=>{ci("inp",{metric:t}),oi=t}))}function mi(t,e,n,i,r=!1){let s;return gi(t,e),ei[t]||(s=n(),ei[t]=!0),i&&e({metric:i}),vi(t,e,r?s:void 0)}function gi(t,e){ti[t]=ti[t]||[],ti[t].push(e)}function vi(t,e,n){return()=>{n&&n();const i=ti[t];if(!i)return;const r=i.indexOf(e);-1!==r&&i.splice(r,1)}}function yi(t){return[{type:"span"},t]}function _i(t){return"number"==typeof t&&isFinite(t)}function bi(t,{startTimestamp:e,...n}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...n})}const wi=2147483647;function ki(t){return t/1e3}function xi(){return In&&In.addEventListener&&In.performance}let Si,Ti,Ci=0,Ei={};function Ii(){const t=xi();if(t&&mt.k3){t.mark&&In.performance.mark("sentry-tracing-init");const e=mi("fid",(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const n=ki(mt.k3),r=ki(e.startTime);En&&i.vF.log("[Measurements] Adding FID"),Ei.fid={value:t.value,unit:"millisecond"},Ei["mark.fid"]={value:n+r,unit:"second"}}),di,ii),n=function(t,e=!1){return mi("cls",t,ui,ni,e)}((({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(En&&i.vF.log("[Measurements] Adding CLS"),Ei.cls={value:t.value,unit:""},Ti=e)}),!0),r=ai((({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(En&&i.vF.log("[Measurements] Adding LCP"),Ei.lcp={value:t.value,unit:"millisecond"},Si=e)}),!0),s=mi("ttfb",(({metric:t})=>{t.entries[t.entries.length-1]&&(En&&i.vF.log("[Measurements] Adding TTFB"),Ei.ttfb={value:t.value,unit:"millisecond"})}),pi,si);return()=>{e(),n(),r(),s()}}return()=>{}}const Di={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Oi(t,e,n,i,r,s){const o=s?e[s]:e[`${n}End`],a=e[`${n}Start`];a&&o&&bi(t,{op:"browser",origin:"auto.browser.browser.metrics",description:r||n,startTimestamp:i+ki(a),endTimestamp:i+ki(o)})}function Mi(t,e,n,i){const r=e[n];null!=r&&r<wi&&(t[i]=r)}var Ai=n(5584);const Pi=["localhost",/^\/(?!\/)/],Ri={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Pi,tracePropagationTargets:Pi};function Li(t){const{traceFetch:e,traceXHR:n,tracePropagationTargets:i,tracingOrigins:r,shouldCreateSpanForRequest:o,enableHTTPTimings:a}={traceFetch:Ri.traceFetch,traceXHR:Ri.traceXHR,...t},c="function"==typeof o?o:t=>!0,u=t=>function(t,e){return(0,s.Xr)(t,e||Pi)}(t,i||r),d={};e&&Bt((t=>{const e=function(t,e,n,i,r="auto.http.browser"){if(!cn()||!t.fetchData)return;const s=e(t.fetchData.url);if(t.endTimestamp&&s){const e=t.fetchData.__span;if(!e)return;const n=i[e];return void(n&&(function(t,e){if(e.response){on(t,e.response.status);const n=e.response&&e.response.headers&&e.response.headers.get("content-length");if(n){const e=parseInt(n);e>0&&t.setAttribute("http.response_content_length",e)}}else e.error&&t.setStatus("internal_error");t.end()}(n,t),delete i[e]))}const o=(0,w.o5)(),a=(0,w.KU)(),{method:c,url:u}=t.fetchData,d=function(t){try{return new URL(t).href}catch(t){return}}(u),h=d?Gt(d).host:void 0,p=s?un({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,"http.url":d,"server.address":h,[nn]:r},op:"http.client"}):void 0;if(p&&(t.fetchData.__span=p.spanContext().spanId,i[p.spanContext().spanId]=p),n(t.fetchData.url)&&a){const e=t.args[0];t.args[1]=t.args[1]||{};const n=t.args[1];n.headers=function(t,e,n,i,r){const s=r||n.getSpan(),o=(0,l.rm)(),{traceId:a,spanId:c,sampled:u,dsc:d}={...o.getPropagationContext(),...n.getPropagationContext()},h=s?(0,Xe.Qh)(s):(0,Cn.TC)(a,c,u),p=(0,Ai.De)(d||(s?(0,at.k)(s):(0,at.l)(a,e,n))),f=i.headers||("undefined"!=typeof Request&&(0,Q.tH)(t,Request)?t.headers:void 0);if(f){if("undefined"!=typeof Headers&&(0,Q.tH)(f,Headers)){const t=new Headers(f);return t.append("sentry-trace",h),p&&t.append(Ai.hF,p),t}if(Array.isArray(f)){const t=[...f,["sentry-trace",h]];return p&&t.push([Ai.hF,p]),t}{const t="baggage"in f?f.baggage:void 0,e=[];return Array.isArray(t)?e.push(...t):t&&e.push(t),p&&e.push(p),{...f,"sentry-trace":h,baggage:e.length>0?e.join(","):void 0}}}return{"sentry-trace":h,baggage:p}}(e,a,o,n,p)}return p}(t,c,u,d);if(e){const n=qi(t.fetchData.url),i=n?Gt(n).host:void 0;e.setAttributes({"http.url":n,"server.address":i})}a&&e&&Ni(e)})),n&&Ht((t=>{const e=function(t,e,n,i){const r=t.xhr,s=r&&r[$t];if(!cn()||!r||r.__sentry_own_request__||!s)return;const o=e(s.url);if(t.endTimestamp&&o){const t=r.__sentry_xhr_span_id__;if(!t)return;const e=i[t];return void(e&&void 0!==s.status_code&&(on(e,s.status_code),e.end(),delete i[t]))}const a=(0,w.o5)(),c=(0,l.rm)(),u=qi(s.url),d=u?Gt(u).host:void 0,h=o?un({name:`${s.method} ${s.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":s.method,"http.url":u,url:s.url,"server.address":d,[nn]:"auto.http.browser"},op:"http.client"}):void 0;h&&(r.__sentry_xhr_span_id__=h.spanContext().spanId,i[r.__sentry_xhr_span_id__]=h);const p=(0,w.KU)();if(r.setRequestHeader&&n(s.url)&&p){const{traceId:t,spanId:e,sampled:n,dsc:i}={...c.getPropagationContext(),...a.getPropagationContext()};!function(t,e,n){try{t.setRequestHeader("sentry-trace",e),n&&t.setRequestHeader(Ai.hF,n)}catch(t){}}(r,h?(0,Xe.Qh)(h):(0,Cn.TC)(t,e,n),(0,Ai.De)(i||(h?(0,at.k)(h):(0,at.l)(t,p,a))))}return h}(t,c,u,d);a&&e&&Ni(e)}))}function Ni(t){const{url:e}=(0,Xe.et)(t).data||{};if(!e||"string"!=typeof e)return;const n=li("resource",(({entries:i})=>{i.forEach((i=>{if(function(t){return"resource"===t.entryType&&"initiatorType"in t&&"string"==typeof t.nextHopProtocol&&("fetch"===t.initiatorType||"xmlhttprequest"===t.initiatorType)}(i)&&i.name.endsWith(e)){const e=function(t){const{name:e,version:n}=function(t){let e="unknown",n="unknown",i="";for(const r of t){if("/"===r){[e,n]=t.split("/");break}if(!isNaN(Number(r))){e="h"===i?"http":i,n=t.split(i)[1];break}i+=r}return i===t&&(e=i),{name:e,version:n}}(t.nextHopProtocol),i=[];return i.push(["network.protocol.version",n],["network.protocol.name",e]),mt.k3?[...i,["http.request.redirect_start",Fi(t.redirectStart)],["http.request.fetch_start",Fi(t.fetchStart)],["http.request.domain_lookup_start",Fi(t.domainLookupStart)],["http.request.domain_lookup_end",Fi(t.domainLookupEnd)],["http.request.connect_start",Fi(t.connectStart)],["http.request.secure_connection_start",Fi(t.secureConnectionStart)],["http.request.connection_end",Fi(t.connectEnd)],["http.request.request_start",Fi(t.requestStart)],["http.request.response_start",Fi(t.responseStart)],["http.request.response_end",Fi(t.responseEnd)]]:i}(i);e.forEach((e=>t.setAttribute(...e))),setTimeout(n)}}))}))}function Fi(t=0){return((mt.k3||performance.timeOrigin)+t)/1e3}function qi(t){try{return new URL(t,In.location.origin).href}catch(t){return}}const ji={...fn,markBackgroundTransactions:!0,routingInstrumentation:function(t,e=!0,n=!0){if(!In||!In.location)return void(En&&i.vF.warn("Could not initialize routing instrumentation due to invalid location"));let r,s=In.location.href;e&&(r=t({name:In.location.pathname,startTimestamp:mt.k3?mt.k3/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&H((({to:e,from:n})=>{void 0===n&&s&&-1!==s.indexOf(e)?s=void 0:n!==e&&(s=void 0,r&&(En&&i.vF.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=t({name:In.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Ri};function $i(t){const e=(0,Yt.NX)(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}function Hi(t){const e=t.attributes&&t.attributes[Ze],n=t.data&&t.data[Ze],i=t.metadata&&t.metadata.source;return e||n||i}function zi(t){let e,n=t[0],i=1;for(;i<t.length;){const r=t[i],s=t[i+1];if(i+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(e=n,n=s(n)):"call"!==r&&"optionalCall"!==r||(n=s(((...t)=>n.call(e,...t))),e=void 0)}return n}function Bi(t){return"/"===t[t.length-1]?t.slice(0,-1):t}var Wi=n(6284);function Ui(){return"undefined"!=typeof window&&(!(0,Wi.wD)()||void 0!==I.OW.process&&"renderer"===I.OW.process.type)}const Qi=I.OW,Yi="sentryReplaySession",Vi="replay_event",Gi="Unable to send Replay",Xi=15e4,Ki=5e3,Ji=2e7;function Zi(t){let e,n=t[0],i=1;for(;i<t.length;){const r=t[i],s=t[i+1];if(i+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(e=n,n=s(n)):"call"!==r&&"optionalCall"!==r||(n=s(((...t)=>n.call(e,...t))),e=void 0)}return n}var tr;function er(t){const e=Zi([t,"optionalAccess",t=>t.host]);return Boolean(Zi([e,"optionalAccess",t=>t.shadowRoot])===t)}function nr(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function ir(t){try{const n=t.rules||t.cssRules;return n?((e=Array.from(n,rr).join("")).includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e):null}catch(t){return null}var e}function rr(t){let e;if(function(t){return"styleSheet"in t}(t))try{e=ir(t.styleSheet)||function(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return""===t.layerName?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}(t)}catch(t){}else if(function(t){return"selectorText"in t}(t)&&t.selectorText.includes(":"))return t.cssText.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2");return e||t.cssText}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(tr||(tr={}));class sr{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;return()=>-1,null!=(e=Zi([this,"access",t=>t.getMeta,"call",e=>e(t),"optionalAccess",t=>t.id]))?e:-1;var e}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach((t=>this.removeNodeFromMap(t)))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){const n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)}replace(t,e){const n=this.getNode(t);if(n){const t=this.nodeMetaMap.get(n);t&&this.nodeMetaMap.set(e,t)}this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function or({maskInputOptions:t,tagName:e,type:n}){return"OPTION"===e&&(e="SELECT"),Boolean(t[e.toLowerCase()]||n&&t[n]||"password"===n||"INPUT"===e&&!n&&t.text)}function ar({isMasked:t,element:e,value:n,maskInputFn:i}){let r=n||"";return t?(i&&(r=i(r,e)),"*".repeat(r.length)):r}function lr(t){return t.toLowerCase()}function cr(t){return t.toUpperCase()}const ur="__rrweb_original__";function dr(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?lr(e):null}function hr(t,e,n){return"INPUT"!==e||"radio"!==n&&"checkbox"!==n?t.value:t.getAttribute("value")||""}let pr=1;const fr=new RegExp("[^a-z0-9-_:]"),mr=-2;function gr(){return pr++}let vr,yr;const _r=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,br=/^(?:[a-z+]+:)?\/\//i,wr=/^www\..*/i,kr=/^(data:)([^,]*),(.*)/i;function xr(t,e){return(t||"").replace(_r,((t,n,i,r,s,o)=>{const a=i||s||o,l=n||r||"";if(!a)return t;if(br.test(a)||wr.test(a))return`url(${l}${a}${l})`;if(kr.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${function(t){let e="";return e=t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0],e=e.split("?")[0],e}(e)+a}${l})`;const c=e.split("/"),u=a.split("/");c.pop();for(const t of u)"."!==t&&(".."===t?c.pop():c.push(t));return`url(${l}${c.join("/")}${l})`}))}const Sr=/^[^ \t\n\r\u000c]+/,Tr=/^[, \t\n\r\u000c]+/;function Cr(t,e){if(!e||""===e.trim())return e;const n=t.createElement("a");return n.href=e,n.href}function Er(){const t=document.createElement("a");return t.href="",t.href}function Ir(t,e,n,i,r,s){return i?"src"===n||"href"===n&&("use"!==e||"#"!==i[0])||"xlink:href"===n&&"#"!==i[0]?Cr(t,i):"background"!==n||"table"!==e&&"td"!==e&&"th"!==e?"srcset"===n?function(t,e){if(""===e.trim())return e;let n=0;function i(t){let i;const r=t.exec(e.substring(n));return r?(i=r[0],n+=i.length,i):""}const r=[];for(;i(Tr),!(n>=e.length);){let s=i(Sr);if(","===s.slice(-1))s=Cr(t,s.substring(0,s.length-1)),r.push(s);else{let i="";s=Cr(t,s);let o=!1;for(;;){const t=e.charAt(n);if(""===t){r.push((s+i).trim());break}if(o)")"===t&&(o=!1);else{if(","===t){n+=1,r.push((s+i).trim());break}"("===t&&(o=!0)}i+=t,n+=1}}}return r.join(", ")}(t,i):"style"===n?xr(i,Er()):"object"===e&&"data"===n?Cr(t,i):"function"==typeof s?s(n,i,r):i:Cr(t,i):i}function Dr(t,e,n){return("video"===t||"audio"===t)&&"autoplay"===e}function Or(t,e,n=1/0,i=0){return t?t.nodeType!==t.ELEMENT_NODE||i>n?-1:e(t)?i:Or(t.parentNode,e,n,i+1):-1}function Mr(t,e){return n=>{const i=n;if(null===i)return!1;try{if(t)if("string"==typeof t){if(i.matches(`.${t}`))return!0}else if(function(t,e){for(let n=t.classList.length;n--;){const i=t.classList[n];if(e.test(i))return!0}return!1}(i,t))return!0;return!(!e||!i.matches(e))}catch(t){return!1}}}function Ar(t,e,n,i,r,s){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(null===o)return!1;if("INPUT"===o.tagName){const t=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(t))return!0}let a=-1,l=-1;if(s){if(l=Or(o,Mr(i,r)),l<0)return!0;a=Or(o,Mr(e,n),l>=0?l:1/0)}else{if(a=Or(o,Mr(e,n)),a<0)return!1;l=Or(o,Mr(i,r),a>=0?a:1/0)}return a>=0?!(l>=0)||a<=l:!(l>=0||!s)}catch(t){}return!!s}function Pr(t){return null==t?"":t.toLowerCase()}function Rr(t,e){const{doc:n,mirror:i,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:h=!1,inlineStylesheet:p=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:y,dataURLOptions:_={},inlineImages:b=!1,recordCanvas:w=!1,onSerialize:k,onIframeLoad:x,iframeLoadTimeout:S=5e3,onStylesheetLoad:T,stylesheetLoadTimeout:C=5e3,keepIframeSrcFn:E=(()=>!1),newlyAddedElement:I=!1}=e;let{preserveWhiteSpace:D=!0}=e;const O=function(t,e){const{doc:n,mirror:i,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:v={},inlineImages:y,recordCanvas:_,keepIframeSrcFn:b,newlyAddedElement:w=!1}=e,k=function(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return 1===n?void 0:n}(n,i);switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:tr.Document,childNodes:[],compatMode:t.compatMode}:{type:tr.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:tr.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:k};case t.ELEMENT_NODE:return function(t,e){const{doc:n,blockClass:i,blockSelector:r,unblockSelector:s,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:d,recordCanvas:h,keepIframeSrcFn:p,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:v,unmaskTextClass:y,maskTextSelector:_,unmaskTextSelector:b}=e,w=function(t,e,n,i){try{if(i&&t.matches(i))return!1;if("string"==typeof e){if(t.classList.contains(e))return!0}else for(let n=t.classList.length;n--;){const i=t.classList[n];if(e.test(i))return!0}if(n)return t.matches(n)}catch(t){}return!1}(t,i,r,s),k=function(t){if(t instanceof HTMLFormElement)return"form";const e=lr(t.tagName);return fr.test(e)?"div":e}(t);let x={};const S=t.attributes.length;for(let e=0;e<S;e++){const i=t.attributes[e];i.name&&!Dr(k,i.name,i.value)&&(x[i.name]=Ir(n,k,lr(i.name),i.value,t,l))}if("link"===k&&o){const e=Array.from(n.styleSheets).find((e=>e.href===t.href));let i=null;e&&(i=ir(e)),i&&(delete x.rel,delete x.href,x._cssText=xr(i,e.href))}if("style"===k&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const e=ir(t.sheet);e&&(x._cssText=xr(e,Er()))}if("input"===k||"textarea"===k||"select"===k||"option"===k){const e=t,n=dr(e),i=hr(e,cr(k),n),r=e.checked;if("submit"!==n&&"button"!==n&&i){const t=Ar(e,v,_,y,b,or({type:n,tagName:cr(k),maskInputOptions:a}));x.value=ar({isMasked:t,element:e,value:i,maskInputFn:c})}r&&(x.checked=r)}if("option"===k&&(t.selected&&!a.select?x.selected=!0:delete x.selected),"canvas"===k&&h)if("2d"===t.__context)(function(t){const e=t.getContext("2d");if(!e)return!0;for(let n=0;n<t.width;n+=50)for(let i=0;i<t.height;i+=50){const r=e.getImageData,s=ur in r?r[ur]:r;if(new Uint32Array(s.call(e,n,i,Math.min(50,t.width-n),Math.min(50,t.height-i)).data.buffer).some((t=>0!==t)))return!1}return!0})(t)||(x.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){const e=t.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=t.width,n.height=t.height,e!==n.toDataURL(u.type,u.quality)&&(x.rr_dataURL=e)}if("img"===k&&d){vr||(vr=n.createElement("canvas"),yr=vr.getContext("2d"));const e=t,i=e.crossOrigin;e.crossOrigin="anonymous";const r=()=>{e.removeEventListener("load",r);try{vr.width=e.naturalWidth,vr.height=e.naturalHeight,yr.drawImage(e,0,0),x.rr_dataURL=vr.toDataURL(u.type,u.quality)}catch(t){console.warn(`Cannot inline img src=${e.currentSrc}! Error: ${t}`)}i?x.crossOrigin=i:e.removeAttribute("crossorigin")};e.complete&&0!==e.naturalWidth?r():e.addEventListener("load",r)}if("audio"!==k&&"video"!==k||(x.rr_mediaState=t.paused?"paused":"played",x.rr_mediaCurrentTime=t.currentTime),f||(t.scrollLeft&&(x.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(x.rr_scrollTop=t.scrollTop)),w){const{width:e,height:n}=t.getBoundingClientRect();x={class:x.class,rr_width:`${e}px`,rr_height:`${n}px`}}let T;"iframe"!==k||p(x.src)||(t.contentDocument||(x.rr_src=x.src),delete x.src);try{customElements.get(k)&&(T=!0)}catch(t){}return{type:tr.Element,tagName:k,attributes:x,childNodes:[],isSVG:(C=t,Boolean("svg"===C.tagName||C.ownerSVGElement)||void 0),needBlock:w,rootId:m,isCustom:T};var C}(t,{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:l,maskInputOptions:f,maskInputFn:g,dataURLOptions:v,inlineImages:y,recordCanvas:_,keepIframeSrcFn:b,newlyAddedElement:w,rootId:k,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h});case t.TEXT_NODE:return function(t,e){const{maskAllText:n,maskTextClass:i,unmaskTextClass:r,maskTextSelector:s,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:l,maskInputFn:c,rootId:u}=e,d=t.parentNode&&t.parentNode.tagName;let h=t.textContent;const p="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(p&&h){try{t.nextSibling||t.previousSibling||Zi([t,"access",t=>t.parentNode,"access",t=>t.sheet,"optionalAccess",t=>t.cssRules])&&(h=ir(t.parentNode.sheet))}catch(e){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${e}`,t)}h=xr(h,Er())}f&&(h="SCRIPT_PLACEHOLDER");const g=Ar(t,i,s,r,o,n);return p||f||m||!h||!g||(h=a?a(h,t.parentElement):h.replace(/[\S]/g,"*")),m&&h&&(l.textarea||g)&&(h=c?c(h,t.parentNode):h.replace(/[\S]/g,"*")),"OPTION"===d&&h&&(h=ar({isMasked:Ar(t,i,s,r,o,or({type:null,tagName:d,maskInputOptions:l})),element:t,value:h,maskInputFn:c})),{type:tr.Text,textContent:h||"",isStyle:p,rootId:u}}(t,{maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:k});case t.CDATA_SECTION_NODE:return{type:tr.CDATA,textContent:"",rootId:k};case t.COMMENT_NODE:return{type:tr.Comment,textContent:t.textContent||"",rootId:k};default:return!1}}(t,{doc:n,mirror:i,blockClass:r,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,dataURLOptions:_,inlineImages:b,recordCanvas:w,keepIframeSrcFn:E,newlyAddedElement:I});if(!O)return console.warn(t,"not serialized"),null;let M;M=i.hasNode(t)?i.getId(t):!function(t,e){if(e.comment&&t.type===tr.Comment)return!0;if(t.type===tr.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(Pr(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Pr(t.attributes.name)||"icon"===Pr(t.attributes.rel)||"apple-touch-icon"===Pr(t.attributes.rel)||"shortcut icon"===Pr(t.attributes.rel))))return!0;if("meta"===t.tagName){if(e.headMetaDescKeywords&&Pr(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Pr(t.attributes.property).match(/^(og|twitter|fb):/)||Pr(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===Pr(t.attributes.name)))return!0;if(e.headMetaRobots&&("robots"===Pr(t.attributes.name)||"googlebot"===Pr(t.attributes.name)||"bingbot"===Pr(t.attributes.name)))return!0;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(e.headMetaAuthorship&&("author"===Pr(t.attributes.name)||"generator"===Pr(t.attributes.name)||"framework"===Pr(t.attributes.name)||"publisher"===Pr(t.attributes.name)||"progid"===Pr(t.attributes.name)||Pr(t.attributes.property).match(/^article:/)||Pr(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&("google-site-verification"===Pr(t.attributes.name)||"yandex-verification"===Pr(t.attributes.name)||"csrf-token"===Pr(t.attributes.name)||"p:domain_verify"===Pr(t.attributes.name)||"verify-v1"===Pr(t.attributes.name)||"verification"===Pr(t.attributes.name)||"shopify-checkout-api-token"===Pr(t.attributes.name)))return!0}}return!1}(O,y)&&(D||O.type!==tr.Text||O.isStyle||O.textContent.replace(/^\s+|\s+$/gm,"").length)?gr():mr;const A=Object.assign(O,{id:M});if(i.add(t,A),M===mr)return null;k&&k(t);let P=!h;if(A.type===tr.Element){P=P&&!A.needBlock,delete A.needBlock;const e=t.shadowRoot;e&&nr(e)&&(A.isShadowHost=!0)}if((A.type===tr.Document||A.type===tr.Element)&&P){y.headWhitespace&&A.type===tr.Element&&"head"===A.tagName&&(D=!1);const e={doc:n,mirror:i,blockClass:r,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:h,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:y,dataURLOptions:_,inlineImages:b,recordCanvas:w,preserveWhiteSpace:D,onSerialize:k,onIframeLoad:x,iframeLoadTimeout:S,onStylesheetLoad:T,stylesheetLoadTimeout:C,keepIframeSrcFn:E};for(const n of Array.from(t.childNodes)){const t=Rr(n,e);t&&A.childNodes.push(t)}if(function(t){return t.nodeType===t.ELEMENT_NODE}(t)&&t.shadowRoot)for(const n of Array.from(t.shadowRoot.childNodes)){const i=Rr(n,e);i&&(nr(t.shadowRoot)&&(i.isShadow=!0),A.childNodes.push(i))}}return t.parentNode&&er(t.parentNode)&&nr(t.parentNode)&&(A.isShadow=!0),A.type===tr.Element&&"iframe"===A.tagName&&function(t,e,n){const i=t.contentWindow;if(!i)return;let r,s=!1;try{r=i.document.readyState}catch(t){return}if("complete"!==r){const i=setTimeout((()=>{s||(e(),s=!0)}),n);return void t.addEventListener("load",(()=>{clearTimeout(i),s=!0,e()}))}const o="about:blank";if(i.location.href!==o||t.src===o||""===t.src)return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}(t,(()=>{const e=t.contentDocument;if(e&&x){const n=Rr(e,{doc:e,mirror:i,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:y,dataURLOptions:_,inlineImages:b,recordCanvas:w,preserveWhiteSpace:D,onSerialize:k,onIframeLoad:x,iframeLoadTimeout:S,onStylesheetLoad:T,stylesheetLoadTimeout:C,keepIframeSrcFn:E});n&&x(t,n)}}),S),A.type===tr.Element&&"link"===A.tagName&&"stylesheet"===A.attributes.rel&&function(t,e,n){let i,r=!1;try{i=t.sheet}catch(t){return}if(i)return;const s=setTimeout((()=>{r||(e(),r=!0)}),n);t.addEventListener("load",(()=>{clearTimeout(s),r=!0,e()}))}(t,(()=>{if(T){const e=Rr(t,{doc:n,mirror:i,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:y,dataURLOptions:_,inlineImages:b,recordCanvas:w,preserveWhiteSpace:D,onSerialize:k,onIframeLoad:x,iframeLoadTimeout:S,onStylesheetLoad:T,stylesheetLoadTimeout:C,keepIframeSrcFn:E});e&&T(t,e)}}),C),A}function Lr(t){let e,n=t[0],i=1;for(;i<t.length;){const r=t[i],s=t[i+1];if(i+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(e=n,n=s(n)):"call"!==r&&"optionalCall"!==r||(n=s(((...t)=>n.call(e,...t))),e=void 0)}return n}function Nr(t,e,n=document){const i={capture:!0,passive:!0};return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e,i)}const Fr="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let qr={map:{},getId:()=>(console.error(Fr),-1),getNode:()=>(console.error(Fr),null),removeNodeFromMap(){console.error(Fr)},has:()=>(console.error(Fr),!1),reset(){console.error(Fr)}};function jr(t,e,n={}){let i=null,r=0;return function(...s){const o=Date.now();r||!1!==n.leading||(r=o);const a=e-(o-r),l=this;a<=0||a>e?(i&&(function(...t){rs("clearTimeout")(...t)}(i),i=null),r=o,t.apply(l,s)):i||!1===n.trailing||(i=ss((()=>{r=!1===n.leading?0:Date.now(),i=null,t.apply(l,s)}),a))}}function $r(t,e,n,i,r=window){const s=r.Object.getOwnPropertyDescriptor(t,e);return r.Object.defineProperty(t,e,i?n:{set(t){ss((()=>{n.set.call(this,t)}),0),s&&s.set&&s.set.call(this,t)}}),()=>$r(t,e,s||{},!0)}function Hr(t,e,n){try{if(!(e in t))return()=>{};const i=t[e],r=n(i);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:i}})),t[e]=r,()=>{t[e]=i}}catch(t){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(qr=new Proxy(qr,{get:(t,e,n)=>("map"===e&&console.error(Fr),Reflect.get(t,e,n))}));let zr=Date.now;function Br(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:void 0!==t.pageXOffset?t.pageXOffset:Lr([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollLeft])||Lr([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollLeft])||Lr([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollLeft])||0,top:e.scrollingElement?e.scrollingElement.scrollTop:void 0!==t.pageYOffset?t.pageYOffset:Lr([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollTop])||Lr([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollTop])||Lr([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollTop])||0}}function Wr(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ur(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Qr(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}function Yr(t,e,n,i,r){if(!t)return!1;const s=Qr(t);if(!s)return!1;const o=Mr(e,n);if(!r){const t=i&&s.matches(i);return o(s)&&!t}const a=Or(s,o);let l=-1;return!(a<0)&&(i&&(l=Or(s,Mr(null,i))),a>-1&&l<0||a<l)}function Vr(t,e){return e.getId(t)===mr}function Gr(t,e){if(er(t))return!1;const n=e.getId(t);return!e.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||Gr(t.parentNode,e))}function Xr(t){return Boolean(t.changedTouches)}function Kr(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))}function Jr(t,e){return Boolean("LINK"===t.nodeName&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&"stylesheet"===t.getAttribute("rel")&&e.getMeta(t))}function Zr(t){return Boolean(Lr([t,"optionalAccess",t=>t.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(zr=()=>(new Date).getTime());class ts{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return()=>-1,null!=(e=this.styleIDMap.get(t))?e:-1;var e}has(t){return this.styleIDMap.has(t)}add(t,e){if(this.has(t))return this.getId(t);let n;return n=void 0===e?this.id++:e,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function es(t){let e=null;return Lr([t,"access",t=>t.getRootNode,"optionalCall",t=>t(),"optionalAccess",t=>t.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function ns(t){const e=t.ownerDocument;return!!e&&(e.contains(t)||function(t){const e=t.ownerDocument;if(!e)return!1;const n=function(t){let e,n=t;for(;e=es(n);)n=e;return n}(t);return e.contains(n)}(t))}const is={};function rs(t){const e=is[t];if(e)return e;const n=window.document;let i=window[t];if(n&&"function"==typeof n.createElement)try{const e=n.createElement("iframe");e.hidden=!0,n.head.appendChild(e);const r=e.contentWindow;r&&r[t]&&(i=r[t]),n.head.removeChild(e)}catch(t){}return is[t]=i.bind(window)}function ss(...t){return rs("setTimeout")(...t)}var os=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(os||{}),as=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(as||{}),ls=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(ls||{}),cs=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(cs||{});function us(t){let e,n=t[0],i=1;for(;i<t.length;){const r=t[i],s=t[i+1];if(i+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(e=n,n=s(n)):"call"!==r&&"optionalCall"!==r||(n=s(((...t)=>n.call(e,...t))),e=void 0)}return n}function ds(t){return"__ln"in t}class hs{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let e=this.head;for(let n=0;n<t;n++)e=us([e,"optionalAccess",t=>t.next])||null;return e}addNode(t){const e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&ds(t.previousSibling)){const n=t.previousSibling.__ln.next;e.next=n,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,n&&(n.previous=e)}else if(t.nextSibling&&ds(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;e.previous=n,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,n&&(n.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;null===e.next&&(this.tail=e),this.length++}removeNode(t){const e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next?e.next.previous=e.previous:this.tail=e.previous):(this.head=e.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const ps=(t,e)=>`${t}@${e}`;class fs{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],e=new Set,n=new hs,i=t=>{let e=t,n=mr;for(;n===mr;)e=e&&e.nextSibling,n=e&&this.mirror.getId(e);return n},r=r=>{if(!r.parentNode||!ns(r))return;const s=er(r.parentNode)?this.mirror.getId(es(r)):this.mirror.getId(r.parentNode),o=i(r);if(-1===s||-1===o)return n.addNode(r);const a=Rr(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:t=>{Kr(t,this.mirror)&&this.iframeManager.addIframe(t),Jr(t,this.mirror)&&this.stylesheetManager.trackLinkElement(t),Zr(r)&&this.shadowDomManager.addShadowRoot(r.shadowRoot,this.doc)},onIframeLoad:(t,e)=>{this.iframeManager.attachIframe(t,e),this.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{this.stylesheetManager.attachLinkElement(t,e)}});a&&(t.push({parentId:s,nextId:o,node:a}),e.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const t of this.movedSet)gs(this.removes,t,this.mirror)&&!this.movedSet.has(t.parentNode)||r(t);for(const t of this.addedSet)ys(this.droppedSet,t)||gs(this.removes,t,this.mirror)?ys(this.movedSet,t)?r(t):this.droppedSet.add(t):r(t);let s=null;for(;n.length;){let t=null;if(s){const e=this.mirror.getId(s.value.parentNode),n=i(s.value);-1!==e&&-1!==n&&(t=s)}if(!t){let e=n.tail;for(;e;){const n=e;if(e=e.previous,n){const e=this.mirror.getId(n.value.parentNode);if(-1===i(n.value))continue;if(-1!==e){t=n;break}{const e=n.value;if(e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const i=e.parentNode.host;if(-1!==this.mirror.getId(i)){t=n;break}}}}}}if(!t){for(;n.head;)n.removeNode(n.head.value);break}s=t.previous,n.removeNode(t.value),r(t.value)}const o={texts:this.texts.map((t=>({id:this.mirror.getId(t.node),value:t.value}))).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),attributes:this.attributes.map((t=>{const{attributes:e}=t;if("string"==typeof e.style){const n=JSON.stringify(t.styleDiff),i=JSON.stringify(t._unchangedStyles);n.length<e.style.length&&(n+i).split("var(").length===e.style.split("var(").length&&(e.style=t.styleDiff)}return{id:this.mirror.getId(t.node),attributes:e}})).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),removes:this.removes,adds:t};(o.texts.length||o.attributes.length||o.removes.length||o.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(o))},this.processMutation=t=>{if(!Vr(t.target,this.mirror))switch(t.type){case"characterData":{const e=t.target.textContent;Yr(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||e===t.oldValue||this.texts.push({value:Ar(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&e?this.maskTextFn?this.maskTextFn(e,Qr(t.target)):e.replace(/[\S]/g,"*"):e,node:t.target});break}case"attributes":{const e=t.target;let n=t.attributeName,i=t.target.getAttribute(n);if("value"===n){const n=dr(e),r=e.tagName;i=hr(e,r,n);const s=or({maskInputOptions:this.maskInputOptions,tagName:r,type:n});i=ar({isMasked:Ar(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,s),element:e,value:i,maskInputFn:this.maskInputFn})}if(Yr(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===t.oldValue)return;let r=this.attributeMap.get(t.target);if("IFRAME"===e.tagName&&"src"===n&&!this.keepIframeSrcFn(i)){if(e.contentDocument)return;n="rr_src"}if(r||(r={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(t.target,r)),"type"===n&&"INPUT"===e.tagName&&"password"===(t.oldValue||"").toLowerCase()&&e.setAttribute("data-rr-is-password","true"),!Dr(e.tagName,n)&&(r.attributes[n]=Ir(this.doc,lr(e.tagName),lr(n),i,e,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");t.oldValue&&n.setAttribute("style",t.oldValue);for(const t of Array.from(e.style)){const i=e.style.getPropertyValue(t),s=e.style.getPropertyPriority(t);i!==n.style.getPropertyValue(t)||s!==n.style.getPropertyPriority(t)?r.styleDiff[t]=""===s?i:[i,s]:r._unchangedStyles[t]=[i,s]}for(const t of Array.from(n.style))""===e.style.getPropertyValue(t)&&(r.styleDiff[t]=!1)}break}case"childList":if(Yr(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach((e=>this.genAdds(e,t.target))),t.removedNodes.forEach((e=>{const n=this.mirror.getId(e),i=er(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Yr(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Vr(e,this.mirror)||!function(t,e){return-1!==e.getId(t)}(e,this.mirror)||(this.addedSet.has(e)?(ms(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(t.target)&&-1===n||Gr(t.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[ps(n,i)]?ms(this.movedSet,e):this.removes.push({parentId:i,id:n,isShadow:!(!er(t.target)||!nr(t.target))||void 0})),this.mapRemoves.push(e))}))}},this.genAdds=(t,e)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!this.addedSet.has(t)&&!this.movedSet.has(t)){if(this.mirror.hasNode(t)){if(Vr(t,this.mirror))return;this.movedSet.add(t);let n=null;e&&this.mirror.hasNode(e)&&(n=this.mirror.getId(e)),n&&-1!==n&&(this.movedMap[ps(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Yr(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach((t=>this.genAdds(t))),Zr(t)&&t.shadowRoot.childNodes.forEach((e=>{this.processedNodeManager.add(e,this),this.genAdds(e,t)})))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((e=>{this[e]=t[e]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ms(t,e){t.delete(e),e.childNodes.forEach((e=>ms(t,e)))}function gs(t,e,n){return 0!==t.length&&vs(t,e,n)}function vs(t,e,n){const{parentNode:i}=e;if(!i)return!1;const r=n.getId(i);return!!t.some((t=>t.id===r))||vs(t,i,n)}function ys(t,e){return 0!==t.size&&_s(t,e)}function _s(t,e){const{parentNode:n}=e;return!!n&&(!!t.has(n)||_s(t,n))}let bs;function ws(t){bs=t}function ks(){bs=void 0}const xs=t=>bs?(...e)=>{try{return t(...e)}catch(t){if(bs&&!0===bs(t))return()=>{};throw t}}:t;function Ss(t){let e,n=t[0],i=1;for(;i<t.length;){const r=t[i],s=t[i+1];if(i+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(e=n,n=s(n)):"call"!==r&&"optionalCall"!==r||(n=s(((...t)=>n.call(e,...t))),e=void 0)}return n}const Ts=[];function Cs(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch(t){}return t&&t.target}function Es(t,e){const n=new fs;Ts.push(n),n.init(t);let i=window.MutationObserver||window.__rrMutationObserver;const r=Ss([window,"optionalAccess",t=>t.Zone,"optionalAccess",t=>t.__symbol__,"optionalCall",t=>t("MutationObserver")]);r&&window[r]&&(i=window[r]);const s=new i(xs((e=>{t.onMutation&&!1===t.onMutation(e)||n.processMutations.bind(n)(e)})));return s.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Is({scrollCb:t,doc:e,mirror:n,blockClass:i,blockSelector:r,unblockSelector:s,sampling:o}){return Nr("scroll",xs(jr(xs((o=>{const a=Cs(o);if(!a||Yr(a,i,r,s,!0))return;const l=n.getId(a);if(a===e&&e.defaultView){const n=Br(e.defaultView);t({id:l,x:n.left,y:n.top})}else t({id:l,x:a.scrollLeft,y:a.scrollTop})})),o.scroll||100)),e)}const Ds=["INPUT","TEXTAREA","SELECT"],Os=new WeakMap;function Ms({inputCb:t,doc:e,mirror:n,blockClass:i,blockSelector:r,unblockSelector:s,ignoreClass:o,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:d,maskTextClass:h,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:m}){function g(t){let n=Cs(t);const u=t.isTrusted,g=n&&cr(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||Ds.indexOf(g)<0||Yr(n,i,r,s,!0))return;const y=n;if(y.classList.contains(o)||a&&y.matches(a))return;const _=dr(n);let b=hr(y,g,_),w=!1;const k=or({maskInputOptions:l,tagName:g,type:_}),x=Ar(n,h,f,p,m,k);"radio"!==_&&"checkbox"!==_||(w=n.checked),b=ar({isMasked:x,element:n,value:b,maskInputFn:c}),v(n,d?{text:b,isChecked:w,userTriggered:u}:{text:b,isChecked:w});const S=n.name;"radio"===_&&S&&w&&e.querySelectorAll(`input[type="radio"][name="${S}"]`).forEach((t=>{if(t!==n){const e=ar({isMasked:x,element:t,value:hr(t,g,_),maskInputFn:c});v(t,d?{text:e,isChecked:!w,userTriggered:!1}:{text:e,isChecked:!w})}}))}function v(e,i){const r=Os.get(e);if(!r||r.text!==i.text||r.isChecked!==i.isChecked){Os.set(e,i);const r=n.getId(e);xs(t)({...i,id:r})}}const y=("last"===u.input?["change"]:["input","change"]).map((t=>Nr(t,xs(g),e))),_=e.defaultView;if(!_)return()=>{y.forEach((t=>t()))};const b=_.Object.getOwnPropertyDescriptor(_.HTMLInputElement.prototype,"value"),w=[[_.HTMLInputElement.prototype,"value"],[_.HTMLInputElement.prototype,"checked"],[_.HTMLSelectElement.prototype,"value"],[_.HTMLTextAreaElement.prototype,"value"],[_.HTMLSelectElement.prototype,"selectedIndex"],[_.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&y.push(...w.map((t=>$r(t[0],t[1],{set(){xs(g)({target:this,isTrusted:!1})}},!1,_)))),xs((()=>{y.forEach((t=>t()))}))}function As(t){return function(t,e){if(Ns("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||Ns("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||Ns("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||Ns("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){const n=Array.from(t.parentRule.cssRules).indexOf(t);e.unshift(n)}else if(t.parentStyleSheet){const n=Array.from(t.parentStyleSheet.cssRules).indexOf(t);e.unshift(n)}return e}(t,[])}function Ps(t,e,n){let i,r;return t?(t.ownerNode?i=e.getId(t.ownerNode):r=n.getId(t),{styleId:r,id:i}):{}}function Rs({mirror:t,stylesheetManager:e},n){let i=null;i="#document"===n.nodeName?t.getId(n):t.getId(n.host);const r="#document"===n.nodeName?Ss([n,"access",t=>t.defaultView,"optionalAccess",t=>t.Document]):Ss([n,"access",t=>t.ownerDocument,"optionalAccess",t=>t.defaultView,"optionalAccess",t=>t.ShadowRoot]),s=Ss([r,"optionalAccess",t=>t.prototype])?Object.getOwnPropertyDescriptor(Ss([r,"optionalAccess",t=>t.prototype]),"adoptedStyleSheets"):void 0;return null!==i&&-1!==i&&r&&s?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return Ss([s,"access",t=>t.get,"optionalAccess",t=>t.call,"call",t=>t(this)])},set(t){const n=Ss([s,"access",t=>t.set,"optionalAccess",t=>t.call,"call",e=>e(this,t)]);if(null!==i&&-1!==i)try{e.adoptStyleSheets(t,i)}catch(t){}return n}}),xs((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))):()=>{}}function Ls(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};const i=Es(t,t.doc),r=function({mousemoveCb:t,sampling:e,doc:n,mirror:i}){if(!1===e.mousemove)return()=>{};const r="number"==typeof e.mousemove?e.mousemove:50,s="number"==typeof e.mousemoveCallback?e.mousemoveCallback:500;let o,a=[];const l=jr(xs((e=>{const n=Date.now()-o;t(a.map((t=>(t.timeOffset-=n,t))),e),a=[],o=null})),s),c=xs(jr(xs((t=>{const e=Cs(t),{clientX:n,clientY:r}=Xr(t)?t.changedTouches[0]:t;o||(o=zr()),a.push({x:n,y:r,id:i.getId(e),timeOffset:zr()-o}),l("undefined"!=typeof DragEvent&&t instanceof DragEvent?as.Drag:t instanceof MouseEvent?as.MouseMove:as.TouchMove)})),r,{trailing:!1})),u=[Nr("mousemove",c,n),Nr("touchmove",c,n),Nr("drag",c,n)];return xs((()=>{u.forEach((t=>t()))}))}(t),s=function({mouseInteractionCb:t,doc:e,mirror:n,blockClass:i,blockSelector:r,unblockSelector:s,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,l=[];let c=null;return Object.keys(ls).filter((t=>Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==a[t])).forEach((o=>{let a=lr(o);const u=(e=>o=>{const a=Cs(o);if(Yr(a,i,r,s,!0))return;let l=null,u=e;if("pointerType"in o){switch(o.pointerType){case"mouse":l=cs.Mouse;break;case"touch":l=cs.Touch;break;case"pen":l=cs.Pen}l===cs.Touch?ls[e]===ls.MouseDown?u="TouchStart":ls[e]===ls.MouseUp&&(u="TouchEnd"):cs.Pen}else Xr(o)&&(l=cs.Touch);null!==l?(c=l,(u.startsWith("Touch")&&l===cs.Touch||u.startsWith("Mouse")&&l===cs.Mouse)&&(l=null)):ls[e]===ls.Click&&(l=c,c=null);const d=Xr(o)?o.changedTouches[0]:o;if(!d)return;const h=n.getId(a),{clientX:p,clientY:f}=d;xs(t)({type:ls[u],id:h,x:p,y:f,...null!==l&&{pointerType:l}})})(o);if(window.PointerEvent)switch(ls[o]){case ls.MouseDown:case ls.MouseUp:a=a.replace("mouse","pointer");break;case ls.TouchStart:case ls.TouchEnd:return}l.push(Nr(a,u,e))})),xs((()=>{l.forEach((t=>t()))}))}(t),o=Is(t),a=function({viewportResizeCb:t},{win:e}){let n=-1,i=-1;return Nr("resize",xs(jr(xs((()=>{const e=Wr(),r=Ur();n===e&&i===r||(t({width:Number(r),height:Number(e)}),n=e,i=r)})),200)),e)}(t,{win:n}),l=Ms(t),c=function({mediaInteractionCb:t,blockClass:e,blockSelector:n,unblockSelector:i,mirror:r,sampling:s,doc:o}){const a=xs((o=>jr(xs((s=>{const a=Cs(s);if(!a||Yr(a,e,n,i,!0))return;const{currentTime:l,volume:c,muted:u,playbackRate:d}=a;t({type:o,id:r.getId(a),currentTime:l,volume:c,muted:u,playbackRate:d})})),s.media||500))),l=[Nr("play",a(0),o),Nr("pause",a(1),o),Nr("seeked",a(2),o),Nr("volumechange",a(3),o),Nr("ratechange",a(4),o)];return xs((()=>{l.forEach((t=>t()))}))}(t),u=function({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:i}){if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return()=>{};const r=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(r,{apply:xs(((i,r,s)=>{const[o,a]=s,{id:l,styleId:c}=Ps(r,e,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&t({id:l,styleId:c,adds:[{rule:o,index:a}]}),i.apply(r,s)}))});const s=i.CSSStyleSheet.prototype.deleteRule;let o,a;i.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:xs(((i,r,s)=>{const[o]=s,{id:a,styleId:l}=Ps(r,e,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&t({id:a,styleId:l,removes:[{index:o}]}),i.apply(r,s)}))}),i.CSSStyleSheet.prototype.replace&&(o=i.CSSStyleSheet.prototype.replace,i.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:xs(((i,r,s)=>{const[o]=s,{id:a,styleId:l}=Ps(r,e,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&t({id:a,styleId:l,replace:o}),i.apply(r,s)}))})),i.CSSStyleSheet.prototype.replaceSync&&(a=i.CSSStyleSheet.prototype.replaceSync,i.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:xs(((i,r,s)=>{const[o]=s,{id:a,styleId:l}=Ps(r,e,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&t({id:a,styleId:l,replaceSync:o}),i.apply(r,s)}))}));const l={};Fs("CSSGroupingRule")?l.CSSGroupingRule=i.CSSGroupingRule:(Fs("CSSMediaRule")&&(l.CSSMediaRule=i.CSSMediaRule),Fs("CSSConditionRule")&&(l.CSSConditionRule=i.CSSConditionRule),Fs("CSSSupportsRule")&&(l.CSSSupportsRule=i.CSSSupportsRule));const c={};return Object.entries(l).forEach((([i,r])=>{c[i]={insertRule:r.prototype.insertRule,deleteRule:r.prototype.deleteRule},r.prototype.insertRule=new Proxy(c[i].insertRule,{apply:xs(((i,r,s)=>{const[o,a]=s,{id:l,styleId:c}=Ps(r.parentStyleSheet,e,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&t({id:l,styleId:c,adds:[{rule:o,index:[...As(r),a||0]}]}),i.apply(r,s)}))}),r.prototype.deleteRule=new Proxy(c[i].deleteRule,{apply:xs(((i,r,s)=>{const[o]=s,{id:a,styleId:l}=Ps(r.parentStyleSheet,e,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&t({id:a,styleId:l,removes:[{index:[...As(r),o]}]}),i.apply(r,s)}))})})),xs((()=>{i.CSSStyleSheet.prototype.insertRule=r,i.CSSStyleSheet.prototype.deleteRule=s,o&&(i.CSSStyleSheet.prototype.replace=o),a&&(i.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach((([t,e])=>{e.prototype.insertRule=c[t].insertRule,e.prototype.deleteRule=c[t].deleteRule}))}))}(t,{win:n}),d=Rs(t,t.doc),h=function({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:i},{win:r}){const s=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:xs(((r,o,a)=>{const[l,c,u]=a;if(n.has(l))return s.apply(o,[l,c,u]);const{id:d,styleId:h}=Ps(Ss([o,"access",t=>t.parentRule,"optionalAccess",t=>t.parentStyleSheet]),e,i.styleMirror);return(d&&-1!==d||h&&-1!==h)&&t({id:d,styleId:h,set:{property:l,value:c,priority:u},index:As(o.parentRule)}),r.apply(o,a)}))});const o=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:xs(((r,s,a)=>{const[l]=a;if(n.has(l))return o.apply(s,[l]);const{id:c,styleId:u}=Ps(Ss([s,"access",t=>t.parentRule,"optionalAccess",t=>t.parentStyleSheet]),e,i.styleMirror);return(c&&-1!==c||u&&-1!==u)&&t({id:c,styleId:u,remove:{property:l},index:As(s.parentRule)}),r.apply(s,a)}))}),xs((()=>{r.CSSStyleDeclaration.prototype.setProperty=s,r.CSSStyleDeclaration.prototype.removeProperty=o}))}(t,{win:n}),p=t.collectFonts?function({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const i=[],r=new WeakMap,s=n.FontFace;n.FontFace=function(t,e,n){const i=new s(t,e,n);return r.set(i,{family:t,buffer:"string"!=typeof e,descriptors:n,fontSource:"string"==typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),i};const o=Hr(e.fonts,"add",(function(e){return function(n){return ss(xs((()=>{const e=r.get(n);e&&(t(e),r.delete(n))})),0),e.apply(this,[n])}}));return i.push((()=>{n.FontFace=s})),i.push(o),xs((()=>{i.forEach((t=>t()))}))}(t):()=>{},f=function(t){const{doc:e,mirror:n,blockClass:i,blockSelector:r,unblockSelector:s,selectionCb:o}=t;let a=!0;const l=xs((()=>{const t=e.getSelection();if(!t||a&&Ss([t,"optionalAccess",t=>t.isCollapsed]))return;a=t.isCollapsed||!1;const l=[],c=t.rangeCount||0;for(let e=0;e<c;e++){const o=t.getRangeAt(e),{startContainer:a,startOffset:c,endContainer:u,endOffset:d}=o;Yr(a,i,r,s,!0)||Yr(u,i,r,s,!0)||l.push({start:n.getId(a),startOffset:c,end:n.getId(u),endOffset:d})}o({ranges:l})}));return l(),Nr("selectionchange",l)}(t),m=function({doc:t,customElementCb:e}){const n=t.defaultView;return n&&n.customElements?Hr(n.customElements,"define",(function(t){return function(n,i,r){try{e({define:{name:n}})}catch(t){}return t.apply(this,[n,i,r])}})):()=>{}}(t),g=[];for(const e of t.plugins)g.push(e.observer(e.callback,n,e.options));return xs((()=>{Ts.forEach((t=>t.reset())),i.disconnect(),r(),s(),o(),a(),l(),c(),u(),d(),h(),p(),f(),m(),g.forEach((t=>t()))}))}function Ns(t){return void 0!==window[t]}function Fs(t){return Boolean(void 0!==window[t]&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class qs{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,e,n,i){const r=n||this.getIdToRemoteIdMap(t),s=i||this.getRemoteIdToIdMap(t);let o=r.get(e);return o||(o=this.generateIdFn(),r.set(e,o),s.set(o,e)),o}getIds(t,e){const n=this.getIdToRemoteIdMap(t),i=this.getRemoteIdToIdMap(t);return e.map((e=>this.getId(t,e,n,i)))}getRemoteId(t,e,n){const i=n||this.getRemoteIdToIdMap(t);if("number"!=typeof e)return e;return i.get(e)||-1}getRemoteIds(t,e){const n=this.getRemoteIdToIdMap(t);return e.map((e=>this.getRemoteId(t,e,n)))}reset(t){if(!t)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let e=this.iframeIdToRemoteIdMap.get(t);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(t,e)),e}getRemoteIdToIdMap(t){let e=this.iframeRemoteIdToIdMap.get(t);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(t,e)),e}}function js(t){let e,n=t[0],i=1;for(;i<t.length;){const r=t[i],s=t[i+1];if(i+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(e=n,n=s(n)):"call"!==r&&"optionalCall"!==r||(n=s(((...t)=>n.call(e,...t))),e=void 0)}return n}class $s{constructor(){this.crossOriginIframeMirror=new qs(gr),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Hs{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new qs(gr),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new qs(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,e){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),js([this,"access",t=>t.loadListener,"optionalCall",e=>e(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const e=t;if("rrweb"!==e.data.type||e.origin!==e.data.origin)return;if(!t.source)return;const n=this.crossOriginIframeMap.get(t.source);if(!n)return;const i=this.transformCrossOriginEvent(n,e.data.event);i&&this.wrappedEmit(i,e.data.isCheckout)}transformCrossOriginEvent(t,e){switch(e.type){case os.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(e.data.node,t);const n=e.data.node.id;return this.crossOriginIframeRootIdMap.set(t,n),this.patchRootIdOnNode(e.data.node,n),{timestamp:e.timestamp,type:os.IncrementalSnapshot,data:{source:as.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case os.Meta:case os.Load:case os.DomContentLoaded:return!1;case os.Plugin:return e;case os.Custom:return this.replaceIds(e.data.payload,t,["id","parentId","previousId","nextId"]),e;case os.IncrementalSnapshot:switch(e.data.source){case as.Mutation:return e.data.adds.forEach((e=>{this.replaceIds(e,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(e.node,t);const n=this.crossOriginIframeRootIdMap.get(t);n&&this.patchRootIdOnNode(e.node,n)})),e.data.removes.forEach((e=>{this.replaceIds(e,t,["parentId","id"])})),e.data.attributes.forEach((e=>{this.replaceIds(e,t,["id"])})),e.data.texts.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case as.Drag:case as.TouchMove:case as.MouseMove:return e.data.positions.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case as.ViewportResize:return!1;case as.MediaInteraction:case as.MouseInteraction:case as.Scroll:case as.CanvasMutation:case as.Input:return this.replaceIds(e.data,t,["id"]),e;case as.StyleSheetRule:case as.StyleDeclaration:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleId"]),e;case as.Font:return e;case as.Selection:return e.data.ranges.forEach((e=>{this.replaceIds(e,t,["start","end"])})),e;case as.AdoptedStyleSheet:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleIds"]),js([e,"access",t=>t.data,"access",t=>t.styles,"optionalAccess",t=>t.forEach,"call",e=>e((e=>{this.replaceStyleIds(e,t,["styleId"])}))]),e}}return!1}replace(t,e,n,i){for(const r of i)(Array.isArray(e[r])||"number"==typeof e[r])&&(Array.isArray(e[r])?e[r]=t.getIds(n,e[r]):e[r]=t.getId(n,e[r]));return e}replaceIds(t,e,n){return this.replace(this.crossOriginIframeMirror,t,e,n)}replaceStyleIds(t,e,n){return this.replace(this.crossOriginIframeStyleMirror,t,e,n)}replaceIdOnNode(t,e){this.replaceIds(t,e,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach((t=>{this.replaceIdOnNode(t,e)}))}patchRootIdOnNode(t,e){t.type===tr.Document||t.rootId||(t.rootId=e),"childNodes"in t&&t.childNodes.forEach((t=>{this.patchRootIdOnNode(t,e)}))}}class zs{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Bs{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,e){if(!nr(t))return;if(this.shadowDoms.has(t))return;this.shadowDoms.add(t);const n=Es({...this.bypassOptions,doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Is({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),ss((()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Rs({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))}),0)}observeAttachShadow(t){t.contentWindow&&t.contentDocument&&this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,e){const n=this;this.restoreHandlers.push(Hr(t.prototype,"attachShadow",(function(t){return function(i){const r=t.call(this,i);return this.shadowRoot&&ns(this)&&n.addShadowRoot(this.shadowRoot,e),r}})))}reset(){this.restoreHandlers.forEach((t=>{try{t()}catch(t){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Ws{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Us{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new ts,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,e){"_cssText"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,e){if(0===t.length)return;const n={id:e,styleIds:[]},i=[];for(const e of t){let t;this.styleMirror.has(e)?t=this.styleMirror.getId(e):(t=this.styleMirror.add(e),i.push({styleId:t,rules:Array.from(e.rules||CSSRule,((t,e)=>({rule:rr(t),index:e})))})),n.styleIds.push(t)}i.length>0&&(n.styles=i),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Qs{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...t){rs("requestAnimationFrame")(...t)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(t,e){const n=this.nodeMap.get(t);return n&&Array.from(n).some((t=>t!==e))}add(t,e){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(e))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Ys,Vs;const Gs=new sr;function Xs(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:i,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:h=null,unmaskTextSelector:p=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:v,maskAttributeFn:y,maskInputFn:_,maskTextFn:b,maxCanvasSize:w=null,packFn:k,sampling:x={},dataURLOptions:S={},mousemoveWait:T,recordCanvas:C=!1,recordCrossOriginIframes:E=!1,recordAfter:I=("DOMContentLoaded"===t.recordAfter?t.recordAfter:"load"),userTriggeredOnInput:D=!1,collectFonts:O=!1,inlineImages:M=!1,plugins:A,keepIframeSrcFn:P=(()=>!1),ignoreCSSAttributes:R=new Set([]),errorHandler:L,onMutation:N,getCanvasManager:F}=t;ws(L);const q=!E||window.parent===window;let j=!1;if(!q)try{window.parent.document&&(j=!1)}catch(t){j=!0}if(q&&!e)throw new Error("emit function is required");void 0!==T&&void 0===x.mousemove&&(x.mousemove=T),Gs.reset();const $=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},H=!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===v,headMetaDescKeywords:"all"===v}:v||{};let z;!function(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let e=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})}();let B=0;const W=t=>{for(const e of A||[])e.eventProcessor&&(t=e.eventProcessor(t));return k&&!j&&(t=k(t)),t};Ys=(t,r)=>{const s=t;if(s.timestamp=zr(),!zi([Ts,"access",t=>t[0],"optionalAccess",t=>t.isFrozen,"call",t=>t()])||s.type===os.FullSnapshot||s.type===os.IncrementalSnapshot&&s.data.source===as.Mutation||Ts.forEach((t=>t.unfreeze())),q)zi([e,"optionalCall",t=>t(W(s),r)]);else if(j){const t={type:"rrweb",event:W(s),origin:window.location.origin,isCheckout:r};window.parent.postMessage(t,"*")}if(s.type===os.FullSnapshot)z=s,B=0;else if(s.type===os.IncrementalSnapshot){if(s.data.source===as.Mutation&&s.data.isAttachIframe)return;B++;const t=i&&B>=i,e=n&&z&&s.timestamp-z.timestamp>n;(t||e)&&Z(!0)}};const U=t=>{Ys({type:os.IncrementalSnapshot,data:{source:as.Mutation,...t}})},Q=t=>Ys({type:os.IncrementalSnapshot,data:{source:as.Scroll,...t}}),Y=t=>Ys({type:os.IncrementalSnapshot,data:{source:as.CanvasMutation,...t}}),V=new Us({mutationCb:U,adoptedStyleSheetCb:t=>Ys({type:os.IncrementalSnapshot,data:{source:as.AdoptedStyleSheet,...t}})}),G="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new $s:new Hs({mirror:Gs,mutationCb:U,stylesheetManager:V,recordCrossOriginIframes:E,wrappedEmit:Ys});for(const t of A||[])t.getMirror&&t.getMirror({nodeMirror:Gs,crossOriginIframeMirror:G.crossOriginIframeMirror,crossOriginIframeStyleMirror:G.crossOriginIframeStyleMirror});const X=new Qs,K=function(t,e){try{return t?t(e):new Ws}catch(t){return console.warn("Unable to initialize CanvasManager"),new Ws}}(F,{mirror:Gs,win:window,mutationCb:t=>Ys({type:os.IncrementalSnapshot,data:{source:as.CanvasMutation,...t}}),recordCanvas:C,blockClass:r,blockSelector:s,unblockSelector:o,maxCanvasSize:w,sampling:x.canvas,dataURLOptions:S,errorHandler:L}),J="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new zs:new Bs({mutationCb:U,scrollCb:Q,bypassOptions:{onMutation:N,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:$,dataURLOptions:S,maskAttributeFn:y,maskTextFn:b,maskInputFn:_,recordCanvas:C,inlineImages:M,sampling:x,slimDOMOptions:H,iframeManager:G,stylesheetManager:V,canvasManager:K,keepIframeSrcFn:P,processedNodeManager:X},mirror:Gs}),Z=(t=!1)=>{Ys({type:os.Meta,data:{href:window.location.href,width:Ur(),height:Wr()}},t),V.reset(),J.init(),Ts.forEach((t=>t.lock()));const e=function(t,e){const{mirror:n=new sr,blockClass:i="rr-block",blockSelector:r=null,unblockSelector:s=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:h=!1,recordCanvas:p=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOM:y=!1,dataURLOptions:_,preserveWhiteSpace:b,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:x,onStylesheetLoad:S,stylesheetLoadTimeout:T,keepIframeSrcFn:C=(()=>!1)}=e||{};return Rr(t,{doc:t,mirror:n,blockClass:i,blockSelector:r,unblockSelector:s,maskAllText:o,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===y,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===y?{}:y,dataURLOptions:_,inlineImages:h,recordCanvas:p,preserveWhiteSpace:b,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:x,onStylesheetLoad:S,stylesheetLoadTimeout:T,keepIframeSrcFn:C,newlyAddedElement:!1})}(document,{mirror:Gs,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskAllInputs:$,maskAttributeFn:y,maskInputFn:_,maskTextFn:b,slimDOM:H,dataURLOptions:S,recordCanvas:C,inlineImages:M,onSerialize:t=>{Kr(t,Gs)&&G.addIframe(t),Jr(t,Gs)&&V.trackLinkElement(t),Zr(t)&&J.addShadowRoot(t.shadowRoot,document)},onIframeLoad:(t,e)=>{G.attachIframe(t,e),J.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{V.attachLinkElement(t,e)},keepIframeSrcFn:P});if(!e)return console.warn("Failed to snapshot the document");Ys({type:os.FullSnapshot,data:{node:e,initialOffset:Br(window)}}),Ts.forEach((t=>t.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&V.adoptStyleSheets(document.adoptedStyleSheets,Gs.getId(document))};Vs=Z;try{const t=[],e=t=>xs(Ls)({onMutation:N,mutationCb:U,mousemoveCb:(t,e)=>Ys({type:os.IncrementalSnapshot,data:{source:e,positions:t}}),mouseInteractionCb:t=>Ys({type:os.IncrementalSnapshot,data:{source:as.MouseInteraction,...t}}),scrollCb:Q,viewportResizeCb:t=>Ys({type:os.IncrementalSnapshot,data:{source:as.ViewportResize,...t}}),inputCb:t=>Ys({type:os.IncrementalSnapshot,data:{source:as.Input,...t}}),mediaInteractionCb:t=>Ys({type:os.IncrementalSnapshot,data:{source:as.MediaInteraction,...t}}),styleSheetRuleCb:t=>Ys({type:os.IncrementalSnapshot,data:{source:as.StyleSheetRule,...t}}),styleDeclarationCb:t=>Ys({type:os.IncrementalSnapshot,data:{source:as.StyleDeclaration,...t}}),canvasMutationCb:Y,fontCb:t=>Ys({type:os.IncrementalSnapshot,data:{source:as.Font,...t}}),selectionCb:t=>{Ys({type:os.IncrementalSnapshot,data:{source:as.Selection,...t}})},customElementCb:t=>{Ys({type:os.IncrementalSnapshot,data:{source:as.CustomElement,...t}})},blockClass:r,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,maskInputOptions:$,inlineStylesheet:f,sampling:x,recordCanvas:C,inlineImages:M,userTriggeredOnInput:D,collectFonts:O,doc:t,maskAttributeFn:y,maskInputFn:_,maskTextFn:b,keepIframeSrcFn:P,blockSelector:s,unblockSelector:o,slimDOMOptions:H,dataURLOptions:S,mirror:Gs,iframeManager:G,stylesheetManager:V,shadowDomManager:J,processedNodeManager:X,canvasManager:K,ignoreCSSAttributes:R,plugins:zi([A,"optionalAccess",t=>t.filter,"call",t=>t((t=>t.observer)),"optionalAccess",t=>t.map,"call",t=>t((t=>({observer:t.observer,options:t.options,callback:e=>Ys({type:os.Plugin,data:{plugin:t.name,payload:e}})})))])||[]},{});G.addLoadListener((n=>{try{t.push(e(n.contentDocument))}catch(t){console.warn(t)}}));const n=()=>{Z(),t.push(e(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(t.push(Nr("DOMContentLoaded",(()=>{Ys({type:os.DomContentLoaded,data:{}}),"DOMContentLoaded"===I&&n()}))),t.push(Nr("load",(()=>{Ys({type:os.Load,data:{}}),"load"===I&&n()}),window))),()=>{t.forEach((t=>t())),X.destroy(),Vs=void 0,ks()}}catch(t){console.warn(t)}}Xs.mirror=Gs,Xs.takeFullSnapshot=function(t){if(!Vs)throw new Error("please take full snapshot after start recording");Vs(t)};const Ks=3;function Js(t){return t>9999999999?t:1e3*t}function Zs(t){return t>9999999999?t/1e3:t}function to(t,e){"sentry.transaction"!==e.category&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate((()=>(t.throttledAddEvent({type:os.Custom,timestamp:1e3*(e.timestamp||0),data:{tag:"breadcrumb",payload:(0,V.S8)(e,10,1e3)}}),"console"===e.category))))}const eo="button,a";function no(t){return t.closest(eo)||t}function io(t){const e=ro(t);return e&&e instanceof Element?no(e):e}function ro(t){return function(t){return"object"==typeof t&&!!t&&"target"in t}(t)?t.target:t}let so;class oo{constructor(t,e,n=to){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=e.timeout/1e3,this._threshold=e.threshold/1e3,this._scollTimeout=e.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=e.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const t=(e=()=>{this._lastMutation=lo()},so||(so=[],(0,b.GS)(Qi,"open",(function(t){return function(...e){if(so)try{so.forEach((t=>t()))}catch(t){}return t.apply(Qi,e)}}))),so.push(e),()=>{const t=so?so.indexOf(e):-1;t>-1&&so.splice(t,1)});var e;this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,e){if(function(t,e){return!ao.includes(t.tagName)||("INPUT"===t.tagName&&!["submit","button"].includes(t.getAttribute("type")||"")||(!("A"!==t.tagName||!(t.hasAttribute("download")||t.hasAttribute("target")&&"_self"!==t.getAttribute("target")))||!(!e||!t.matches(e))))}(e,this._ignoreSelector)||!function(t){return!(!t.data||"number"!=typeof t.data.nodeId||!t.timestamp)}(t))return;const n={timestamp:Zs(t.timestamp),clickBreadcrumb:t,clickCount:0,node:e};this._clicks.some((t=>t.node===n.node&&Math.abs(t.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Zs(t)}registerScroll(t=Date.now()){this._lastScroll=Zs(t)}registerClick(t){const e=no(t);this._handleMultiClick(e)}_handleMultiClick(t){this._getClicks(t).forEach((t=>{t.clickCount++}))}_getClicks(t){return this._clicks.filter((e=>e.node===t))}_checkClicks(){const t=[],e=lo();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=e&&t.push(n)}));for(const e of t){const t=this._clicks.indexOf(e);t>-1&&(this._generateBreadcrumbs(e),this._clicks.splice(t,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const e=this._replay,n=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,i=t.mutationAfter&&t.mutationAfter<=this._threshold,r=!n&&!i,{clickCount:s,clickBreadcrumb:o}=t;if(r){const n=1e3*Math.min(t.mutationAfter||this._timeout,this._timeout),i=n<1e3*this._timeout?"mutation":"timeout",r={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.slowClickDetected",data:{...o.data,url:Qi.location.href,route:e.getCurrentRoute(),timeAfterClickMs:n,endReason:i,clickCount:s||1}};this._addBreadcrumbEvent(e,r)}else if(s>1){const t={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.multiClick",data:{...o.data,url:Qi.location.href,route:e.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(e,t)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const ao=["A","BUTTON","INPUT"];function lo(){return Date.now()/1e3}function co(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var uo;!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(uo||(uo={}));const ho=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function po(t){const e={};for(const n in t)if(ho.has(n)){let i=n;"data-testid"!==n&&"data-test-id"!==n||(i="testId"),e[i]=t[n]}return e}function fo(t,e){const n=Xs.mirror.getId(t),i=n&&Xs.mirror.getNode(n),r=i&&Xs.mirror.getMeta(i),s=r&&function(t){return t.type===uo.Element}(r)?r:null;return{message:e,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map((t=>t.type===uo.Text&&t.textContent)).filter(Boolean).map((t=>t.trim())).join(""),attributes:po(s.attributes)}}:{}}}const mo={resource:function(t){const{entryType:e,initiatorType:n,name:i,responseEnd:r,startTime:s,decodedBodySize:o,encodedBodySize:a,responseStatus:l,transferSize:c}=t;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${e}.${n}`,start:vo(s),end:vo(r),name:i,data:{size:c,statusCode:l,decodedBodySize:o,encodedBodySize:a}}},paint:function(t){const{duration:e,entryType:n,name:i,startTime:r}=t,s=vo(r);return{type:n,name:i,start:s,end:s+e,data:void 0}},navigation:function(t){const{entryType:e,name:n,decodedBodySize:i,duration:r,domComplete:s,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:d,redirectCount:h,startTime:p,transferSize:f,type:m}=t;return 0===r?null:{type:`${e}.${m}`,start:vo(p),end:vo(s),name:n,data:{size:f,decodedBodySize:i,encodedBodySize:o,duration:r,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:d,domComplete:s,redirectCount:h}}}};function go(t){return mo[t.entryType]?mo[t.entryType](t):null}function vo(t){return((mt.k3||Qi.performance.timeOrigin)+t)/1e3}const yo="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function _o(t,e){yo&&(i.vF.info(t),e&&wo(t))}function bo(t,e){yo&&(i.vF.info(t),e&&setTimeout((()=>{wo(t)}),0))}function wo(t){(0,w.ZQ)({category:"console",data:{logger:"replay"},level:"info",message:t},{level:"info"})}class ko extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class xo{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const e=JSON.stringify(t).length;if(this._totalSize+=e,this._totalSize>Ji)throw new ko;this.events.push(t)}finish(){return new Promise((t=>{const e=this.events;this.clear(),t(JSON.stringify(e))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map((t=>t.timestamp)).sort()[0];return t?Js(t):null}}class So{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((t,e)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?t():e()}),{once:!0}),this._worker.addEventListener("error",(t=>{e(t)}),{once:!0})}))),this._ensureReadyPromise}destroy(){_o("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,e){const n=this._getAndIncrementId();return new Promise(((r,s)=>{const o=({data:e})=>{const a=e;if(a.method===t&&a.id===n){if(this._worker.removeEventListener("message",o),!a.success)return yo&&i.vF.error("[Replay]",a.response),void s(new Error("Error in compression worker"));r(a.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:n,method:t,arg:e})}))}_getAndIncrementId(){return this._id++}}class To{constructor(t){this._worker=new So(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const e=Js(t.timestamp);(!this._earliestTimestamp||e<this._earliestTimestamp)&&(this._earliestTimestamp=e);const n=JSON.stringify(t);return this._totalSize+=n.length,this._totalSize>Ji?Promise.reject(new ko):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(t=>{yo&&i.vF.warn('[Replay] Sending "clear" message to worker failed',t)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class Co{constructor(t){this._fallback=new xo,this._compression=new To(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){return void _o("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:e}=this._fallback,n=[];for(const e of t)n.push(this._compression.addEvent(e));this._compression.hasCheckout=e,this._used=this._compression;try{await Promise.all(n)}catch(t){yo&&i.vF.warn("[Replay] Failed to add events when switching buffers.",t)}}}function Eo(){try{return"sessionStorage"in Qi&&!!Qi.sessionStorage}catch(t){return!1}}function Io(t){return void 0!==t&&Math.random()<t}function Do(t){const e=Date.now();return{id:t.id||(0,r.eJ)(),started:t.started||e,lastActivity:t.lastActivity||e,segmentId:t.segmentId||0,sampled:t.sampled,previousSessionId:t.previousSessionId}}function Oo(t){if(Eo())try{Qi.sessionStorage.setItem(Yi,JSON.stringify(t))}catch(t){}}function Mo({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:i}={}){const r=function(t,e){return Io(t)?"session":!!e&&"buffer"}(t,e),s=Do({sampled:r,previousSessionId:i});return n&&Oo(s),s}function Ao(t,e,n=+new Date){return null===t||void 0===e||e<0||0!==e&&t+e<=n}function Po(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:i=Date.now()}){return Ao(t.started,e,i)||Ao(t.lastActivity,n,i)}function Ro(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!!Po(t,{sessionIdleExpire:e,maxReplayDuration:n})&&("buffer"!==t.sampled||0!==t.segmentId)}function Lo({traceInternals:t,sessionIdleExpire:e,maxReplayDuration:n,previousSessionId:i},r){const s=r.stickySession&&function(t){if(!Eo())return null;try{const e=Qi.sessionStorage.getItem(Yi);if(!e)return null;const n=JSON.parse(e);return bo("[Replay] Loading existing session",t),Do(n)}catch(t){return null}}(t);return s?Ro(s,{sessionIdleExpire:e,maxReplayDuration:n})?(bo("[Replay] Session in sessionStorage is expired, creating new one..."),Mo(r,{previousSessionId:s.id})):s:(bo("[Replay] Creating new session",t),Mo(r,{previousSessionId:i}))}function No(t,e,n){return!!qo(t,e)&&(Fo(t,e,n),!0)}async function Fo(t,e,n){if(!t.eventBuffer)return null;try{n&&"buffer"===t.recordingMode&&t.eventBuffer.clear(),n&&(t.eventBuffer.hasCheckout=!0);const r=function(t,e){try{if("function"==typeof e&&function(t){return t.type===os.Custom}(t))return e(t)}catch(t){return yo&&i.vF.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",t),null}return t}(e,t.getOptions().beforeAddRecordingEvent);if(!r)return;return await t.eventBuffer.addEvent(r)}catch(e){const n=e&&e instanceof ko?"addEventSizeExceeded":"addEvent";yo&&i.vF.error(e),await t.stop({reason:n});const r=(0,w.KU)();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function qo(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=Js(e.timestamp);return!(n+t.timeouts.sessionIdlePause<Date.now()||n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration&&(_o(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,t.getOptions()._experiments.traceInternals),1))}function jo(t){return!t.type}function $o(t){return"transaction"===t.type}function Ho(t){return"feedback"===t.type}function zo(t){const e=function(){const t=(0,w.KU)();if(!t)return!1;const e=t.getTransport();return e&&e.send.__sentry__baseTransport__||!1}();return(n,i)=>{if(!t.isEnabled()||!jo(n)&&!$o(n))return;const r=i&&i.statusCode;e&&(!r||r<200||r>=300)||($o(n)?function(t,e){const n=t.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(e.contexts.trace.trace_id)}(t,n):function(t,e){const n=t.getContext();if(e.event_id&&n.errorIds.size<100&&n.errorIds.add(e.event_id),"buffer"!==t.recordingMode||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:i}=t.getOptions();("function"!=typeof i||i(e))&&setTimeout((()=>{t.sendBufferedReplayOrFlush()}))}(t,n))}}function Bo(t,e){return e.map((({type:e,start:n,end:i,name:r,data:s})=>{const o=t.throttledAddEvent({type:os.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:e,description:r,startTimestamp:n,endTimestamp:i,data:s}}});return"string"==typeof o?Promise.resolve(null):o}))}function Wo(t,e){t.isEnabled()&&null!==e&&(function(t,e){return(!yo||!t.getOptions()._experiments.traceInternals)&&function(t,e){const n=e&&function(t){return void 0!==t.getClient}(e)?e.getClient():e,i=n&&n.getDsn(),r=n&&n.getOptions().tunnel;return function(t,e){return!!e&&t.includes(e.host)}(t,i)||function(t,e){return!!e&&Bi(t)===Bi(e)}(t,r)}(e,(0,w.KU)())}(t,e.name)||t.addUpdate((()=>(Bo(t,[e]),!0))))}function Uo(t,e){if(t)try{if("string"==typeof t)return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=Zo(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch(t){}}function Qo(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function Yo(t){try{if("string"==typeof t)return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[Zo(t)];if(!t)return[void 0]}catch(e){return yo&&i.vF.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return yo&&i.vF.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Vo(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const n={...t._meta},i=n.warnings||[];return n.warnings=[...i,e],t._meta=n,t}function Go(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:i,url:r,method:s,statusCode:o,request:a,response:l}=e;return{type:t,start:n/1e3,end:i/1e3,name:r,data:(0,b.Ce)({method:s,statusCode:o,request:a,response:l})}}function Xo(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function Ko(t,e,n){if(!e&&0===Object.keys(t).length)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const i={headers:t,size:e},{body:r,warnings:s}=function(t){if(!t||"string"!=typeof t)return{body:t};const e=t.length>Xi,n=function(t){const e=t[0],n=t[t.length-1];return"["===e&&"]"===n||"{"===e&&"}"===n}(t);if(e){const e=t.slice(0,Xi);return n?{body:e,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${e}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(t)}}catch(t){}return{body:t}}(n);return i.body=r,s&&s.length>0&&(i._meta={warnings:s}),i}function Jo(t,e){return Object.keys(t).reduce(((n,i)=>{const r=i.toLowerCase();return e.includes(r)&&t[i]&&(n[r]=t[i]),n}),{})}function Zo(t){return new URLSearchParams(t).toString()}function ta(t,e){const n=function(t,e=Qi.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(Qi.location.origin))return t;const n=new URL(t,e);if(n.origin!==new URL(e).origin)return t;const i=n.href;return!t.endsWith("/")&&i.endsWith("/")?i.slice(0,-1):i}(t);return(0,s.Xr)(n,e)}function ea(t=[]){if(2===t.length&&"object"==typeof t[1])return t[1].body}function na(t,e){const n={};return e.forEach((e=>{t.get(e)&&(n[e]=t.get(e))})),n}function ia(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?na(n,e):Array.isArray(n)?{}:Jo(n,e):{}}function ra(t){const e=(0,w.KU)();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:o,networkRequestHeaders:a,networkResponseHeaders:l}=t.getOptions(),c={replay:t,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:o,networkRequestHeaders:a,networkResponseHeaders:l};e&&e.on?e.on("beforeAddBreadcrumb",((t,e)=>function(t,e,n){if(e.data)try{(function(t){return"xhr"===t.category})(e)&&function(t){return t&&t.xhr}(n)&&(function(t,e,n){const{xhr:i,input:r}=e;if(!i)return;const s=Uo(r,n.textEncoder),o=i.getResponseHeader("content-length")?Qo(i.getResponseHeader("content-length")):function(t,e,n){try{return Uo("json"===e&&t&&"object"==typeof t?JSON.stringify(t):t,n)}catch(t){return}}(i.response,i.responseType,n.textEncoder);void 0!==s&&(t.data.request_body_size=s),void 0!==o&&(t.data.response_body_size=o)}(e,n,t),async function(t,e,n){try{const r=function(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:a,xhr:l}=e,{url:c,method:u,status_code:d=0,request_body_size:h,response_body_size:p}=t.data;if(!c)return null;if(!l||!ta(c,n.networkDetailAllowUrls)||ta(c,n.networkDetailDenyUrls))return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:Xo(h),response:Xo(p)};const f=l[$t],m=f?Jo(f.request_headers,n.networkRequestHeaders):{},g=Jo(function(t){const e=t.getAllResponseHeaders();return e?e.split("\r\n").reduce(((t,e)=>{const[n,i]=e.split(": ");return t[n.toLowerCase()]=i,t}),{}):{}}(l),n.networkResponseHeaders),[v,y]=n.networkCaptureBodies?Yo(a):[void 0],[_,b]=n.networkCaptureBodies?function(t){const e=[];try{return[t.responseText]}catch(t){e.push(t)}try{return function(t,e){try{if("string"==typeof t)return[t];if(t instanceof Document)return[t.body.outerHTML];if("json"===e&&t&&"object"==typeof t)return[JSON.stringify(t)];if(!t)return[void 0]}catch(e){return yo&&i.vF.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return yo&&i.vF.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}(t.response,t.responseType)}catch(t){e.push(t)}return yo&&i.vF.warn("[Replay] Failed to get xhr response body",...e),[void 0]}(l):[void 0],w=Ko(m,h,v),k=Ko(g,p,_);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:y?Vo(w,y):w,response:b?Vo(k,b):k}}(t,e,n),s=Go("resource.xhr",r);Wo(n.replay,s)}catch(t){yo&&i.vF.error("[Replay] Failed to capture xhr breadcrumb",t)}}(e,n,t)),function(t){return"fetch"===t.category}(e)&&function(t){return t&&t.response}(n)&&(function(t,e,n){const{input:i,response:r}=e,s=Uo(i?ea(i):void 0,n.textEncoder),o=r?Qo(r.headers.get("content-length")):void 0;void 0!==s&&(t.data.request_body_size=s),void 0!==o&&(t.data.response_body_size=o)}(e,n,t),async function(t,e,n){try{const r=await async function(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=e,{url:a,method:l,status_code:c=0,request_body_size:u,response_body_size:d}=t.data,h=ta(a,n.networkDetailAllowUrls)&&!ta(a,n.networkDetailDenyUrls),p=h?function({networkCaptureBodies:t,networkRequestHeaders:e},n,i){const r=n?(o=e,1===(s=n).length&&"string"!=typeof s[0]?ia(s[0],o):2===s.length?ia(s[1],o):{}):{};var s,o;if(!t)return Ko(r,i,void 0);const a=ea(n),[l,c]=Yo(a),u=Ko(r,i,l);return c?Vo(u,c):u}(n,e.input,u):Xo(u),f=await async function(t,{networkCaptureBodies:e,textEncoder:n,networkResponseHeaders:r},s,o){if(!t&&void 0!==o)return Xo(o);const a=s?na(s.headers,r):{};if(!s||!e&&void 0!==o)return Ko(a,o,void 0);const[l,c]=await async function(t){const e=function(t){try{return t.clone()}catch(t){yo&&i.vF.warn("[Replay] Failed to clone response body",t)}}(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{const t=await function(t){return new Promise(((e,n)=>{const i=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(t){return await t.text()})(t).then((t=>e(t)),(t=>n(t))).finally((()=>clearTimeout(i)))}))}(e);return[t]}catch(t){return yo&&i.vF.warn("[Replay] Failed to get text body from response",t),[void 0,"BODY_PARSE_ERROR"]}}(s),u=function(t,{networkCaptureBodies:e,textEncoder:n,responseBodySize:r,captureDetails:s,headers:o}){try{const i=t&&t.length&&void 0===r?Uo(t,n):r;return s?Ko(o,i,e?t:void 0):Xo(i)}catch(t){return yo&&i.vF.warn("[Replay] Failed to serialize response body",t),Ko(o,r,void 0)}}(l,{networkCaptureBodies:e,textEncoder:n,responseBodySize:o,captureDetails:t,headers:a});return c?Vo(u,c):u}(h,n,e.response,d);return{startTimestamp:s,endTimestamp:o,url:a,method:l,statusCode:c,request:p,response:f}}(t,e,n),s=Go("resource.fetch",r);Wo(n.replay,s)}catch(t){yo&&i.vF.error("[Replay] Failed to capture fetch breadcrumb",t)}}(e,n,t))}catch(t){yo&&i.vF.warn("Error when enriching network breadcrumb")}}(c,t,e))):(Bt(function(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{startTimestamp:e,endTimestamp:n,fetchData:i,response:r}=t;if(!n)return null;const{method:s,url:o}=i;return{type:"resource.fetch",start:e/1e3,end:n/1e3,name:o,data:{method:s,statusCode:r?r.status:void 0}}}(e);Wo(t,n)}}(t)),Ht(function(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{startTimestamp:e,endTimestamp:n,xhr:i}=t,r=i[$t];if(!e||!n||!r)return null;const{method:s,url:o,status_code:a}=r;return void 0===o?null:{type:"resource.xhr",name:o,start:e/1e3,end:n/1e3,data:{method:s,statusCode:a}}}(e);Wo(t,n)}}(t)))}catch(t){}}let sa=null;function oa(t){const e=(0,w.o5)(),n=(0,w.KU)();e.addScopeListener((t=>e=>{if(!t.isEnabled())return;const n=function(t){const e=t.getLastBreadcrumb&&t.getLastBreadcrumb();return sa!==e&&e?(sa=e,!e.category||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:"console"===e.category?function(t){const e=t.data&&t.data.arguments;if(!Array.isArray(e)||0===e.length)return co(t);let n=!1;const i=e.map((t=>{if(!t)return t;if("string"==typeof t)return t.length>Ki?(n=!0,`${t.slice(0,Ki)}`):t;if("object"==typeof t)try{const e=(0,V.S8)(t,7);return JSON.stringify(e).length>Ki?(n=!0,`${JSON.stringify(e,null,2).slice(0,Ki)}`):e}catch(t){}return t}));return co({...t,data:{...t.data,arguments:i,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e):co(e)):null}(e);n&&to(t,n)})(t)),Nt((t=>e=>{if(!t.isEnabled())return;const n=function(t){const{target:e,message:n}=function(t){const e="click"===t.name;let n,i=null;try{i=e?io(t.event):ro(t.event),n=(0,Yt.Hd)(i,{maxStringLength:200})||"<unknown>"}catch(t){n="<unknown>"}return{target:i,message:n}}(t);return co({category:`ui.${t.name}`,...fo(e,n)})}(e);if(!n)return;const i="click"===e.name,r=i?e.event:void 0;!(i&&t.clickDetector&&r&&r.target)||r.altKey||r.metaKey||r.ctrlKey||r.shiftKey||function(t,e,n){t.handleClick(e,n)}(t.clickDetector,n,io(e.event)),to(t,n)})(t)),H(function(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{from:e,to:n}=t,i=Date.now()/1e3;return{type:"navigation.push",start:i,end:i,name:n,data:{previous:e}}}(e);null!==n&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate((()=>(Bo(t,[n]),!1))))}}(t)),ra(t);const r=function(t,e=!1){const n=e?zo(t):void 0;return Object.assign(((e,r)=>{if(!t.isEnabled())return e;if(function(t){return"replay_event"===t.type}(e))return delete e.breadcrumbs,e;if(!jo(e)&&!$o(e)&&!Ho(e))return e;if(!t.checkAndHandleExpiredSession())return e;if(Ho(e))return t.flush(),e.contexts.feedback.replay_id=t.getSessionId(),function(t,e){t.triggerUserActivity(),t.addUpdate((()=>!e.timestamp||(t.throttledAddEvent({type:os.Custom,timestamp:1e3*e.timestamp,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1)))}(t,e),e;if(function(t,e){return!(t.type||!t.exception||!t.exception.values||!t.exception.values.length||!e.originalException||!e.originalException.__rrweb__)}(e,r)&&!t.getOptions()._experiments.captureExceptions)return yo&&i.vF.log("[Replay] Ignoring error from rrweb internals",e),null;const s=function(t,e){return"buffer"===t.recordingMode&&e.message!==Gi&&!(!e.exception||e.type)&&Io(t.getOptions().errorSampleRate)}(t,e);return(s||"session"===t.recordingMode)&&(e.tags={...e.tags,replayId:t.getSessionId()}),n&&n(e,{statusCode:200}),e}),{id:"Replay"})}(t,!aa(n));n&&n.addEventProcessor?n.addEventProcessor(r):function(t){const e=(0,w.KU)();e&&e.addEventProcessor&&e.addEventProcessor(t)}(r),aa(n)&&(n.on("beforeSendEvent",function(t){return e=>{t.isEnabled()&&jo(e)&&function(t,e){const n=e.exception&&e.exception.values&&e.exception.values[0].value;"string"==typeof n&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&to(t,co({category:"replay.hydrate-error"}))}(t,e)}}(t)),n.on("afterSendEvent",zo(t)),n.on("createDsc",(e=>{const n=t.getSessionId();n&&t.isEnabled()&&"session"===t.recordingMode&&t.checkAndHandleExpiredSession()&&(e.replay_id=n)})),n.on("startTransaction",(e=>{t.lastTransaction=e})),n.on("finishTransaction",(e=>{t.lastTransaction=e})),n.on("beforeSendFeedback",((e,n)=>{const i=t.getSessionId();n&&n.includeReplay&&t.isEnabled()&&i&&e.contexts&&e.contexts.feedback&&(e.contexts.feedback.replay_id=i)})))}function aa(t){return!(!t||!t.on)}function la(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:i}=t,r=Date.now()/1e3;return{type:"memory",name:"memory",start:r,end:r,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:i}}}}function ca(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession())return void(yo&&i.vF.warn("[Replay] Received replay event after session expired."));const s=r||!e;e=!0,t.clickDetector&&function(t,e){try{if(!function(t){return t.type===Ks}(e))return;const{source:n}=e.data;if(n===as.Mutation&&t.registerMutation(e.timestamp),n===as.Scroll&&t.registerScroll(e.timestamp),function(t){return t.data.source===as.MouseInteraction}(e)){const{type:n,id:i}=e.data,r=Xs.mirror.getNode(i);r instanceof HTMLElement&&n===ls.Click&&t.registerClick(r)}}catch(t){}}(t.clickDetector,n),t.addUpdate((()=>{if("buffer"===t.recordingMode&&s&&t.setInitialState(),!No(t,n,s))return!0;if(!s)return!1;if(function(t,e){e&&t.session&&0===t.session.segmentId&&No(t,function(t){const e=t.getOptions();return{type:os.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:!!t.eventBuffer&&"worker"===t.eventBuffer.type,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}(t),!1)}(t,s),t.session&&t.session.previousSessionId)return!0;if("buffer"===t.recordingMode&&t.session&&t.eventBuffer){const e=t.eventBuffer.getEarliestTimestamp();e&&(_o(`[Replay] Updating session start time to earliest event in buffer to ${new Date(e)}`,t.getOptions()._experiments.traceInternals),t.session.started=e,t.getOptions().stickySession&&Oo(t.session))}return"session"===t.recordingMode&&t.flush(),!0}))}}class ua extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class da extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function ha(t,e={count:0,interval:5e3}){const{recordingData:n,options:i}=t;if(n.length)try{return await async function({recordingData:t,replayId:e,segmentId:n,eventContext:i,timestamp:r,session:s}){const o=function({recordingData:t,headers:e}){let n;const i=`${JSON.stringify(e)}\n`;if("string"==typeof t)n=`${i}${t}`;else{const e=(new TextEncoder).encode(i);n=new Uint8Array(e.length+t.length),n.set(e),n.set(t,e.length)}return n}({recordingData:t,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=i,h=(0,w.KU)(),p=(0,w.o5)(),f=h&&h.getTransport(),m=h&&h.getDsn();if(!(h&&f&&m&&s.sampled))return;const g={type:Vi,replay_start_timestamp:d/1e3,timestamp:r/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:e,segment_id:n,replay_type:s.sampled},v=await async function({client:t,scope:e,replayId:n,event:i}){const r={event_id:n,integrations:"object"!=typeof t._integrations||null===t._integrations||Array.isArray(t._integrations)?void 0:Object.keys(t._integrations)};t.emit&&t.emit("preprocessEvent",i,r);const s=await(0,lt.mG)(t.getOptions(),i,r,e,t,(0,l.rm)());if(!s)return null;s.platform=s.platform||"javascript";const o=t.getSdkMetadata&&t.getSdkMetadata(),{name:a,version:c}=o&&o.sdk||{};return s.sdk={...s.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},s}({scope:p,client:h,replayId:e,event:g});if(!v)return h.recordDroppedEvent("event_processor","replay",g),void _o("An event processor returned `null`, will not send event.");delete v.sdkProcessingMetadata;const y=function(t,e,n,i){return G(rt(t,it(t),i,n),[[{type:"replay_event"},t],[{type:"replay_recording",length:"string"==typeof e?(new TextEncoder).encode(e).length:e.length},e]])}(v,o,m,h.getOptions().tunnel);let _;try{_=await f.send(y)}catch(t){const e=new Error(Gi);try{e.cause=t}catch(t){}throw e}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new ua(_.statusCode);const b=ze({},_);if(He(b,"replay"))throw new da(b);return _}(t),!0}catch(n){if(n instanceof ua||n instanceof da)throw n;if((0,w.o)("Replays",{_retryCount:e.count}),yo&&i._experiments&&i._experiments.captureExceptions&&(0,w.Cp)(n),e.count>=3){const t=new Error(`${Gi} - max retries exceeded`);try{t.cause=n}catch(t){}throw t}return e.interval*=++e.count,new Promise(((n,i)=>{setTimeout((async()=>{try{await ha(t,e),n(!0)}catch(t){i(t)}}),e.interval)}))}}const pa="__THROTTLED";class fa{constructor({options:t,recordingOptions:e}){fa.prototype.__init.call(this),fa.prototype.__init2.call(this),fa.prototype.__init3.call(this),fa.prototype.__init4.call(this),fa.prototype.__init5.call(this),fa.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=e,this._options=t,this._debouncedFlush=function(t,e,n){let i,r,s;const o=n&&n.maxWait?Math.max(n.maxWait,e):0;function a(){return l(),i=t(),i}function l(){void 0!==r&&clearTimeout(r),void 0!==s&&clearTimeout(s),r=s=void 0}function c(){return r&&clearTimeout(r),r=setTimeout(a,e),o&&void 0===s&&(s=setTimeout(a,o)),i}return c.cancel=l,c.flush=function(){return void 0!==r||void 0!==s?a():i},c}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=function(t,e,n){const i=new Map;let r=!1;return(...s)=>{const o=Math.floor(Date.now()/1e3);if((t=>{const e=t-n;i.forEach(((t,n)=>{n<e&&i.delete(n)}))})(o),[...i.values()].reduce(((t,e)=>t+e),0)>=e){const t=r;return r=!0,t?"__SKIPPED":pa}r=!1;const a=i.get(o)||0;return i.set(o,a+1),t(...s)}}(((t,e)=>function(t,e,n){return qo(t,e)?Fo(t,e,n):Promise.resolve(null)}(this,t,e)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:i}=this.getOptions(),r=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:i?i.join(","):""}:void 0;r&&(this.clickDetector=new oo(this,r))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:e,sessionSampleRate:n}=this._options;e<=0&&n<=0||(this._initializeSessionForSampling(t),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",bo(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");bo("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const t=Lo({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");bo("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=Lo({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Xs({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:ca(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:e}={}){if(this._isEnabled){this._isEnabled=!1;try{_o("[Replay] Stopping Replay"+(e?` triggered by ${e}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,n=this,function(){if(Eo())try{Qi.sessionStorage.removeItem(Yi)}catch(t){}}(),n.session=void 0}catch(t){this._handleException(t)}}var n}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),_o("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),_o("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const e=Date.now();_o("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();t&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(e),this._updateSessionActivity(e),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const e=t();"buffer"!==this.recordingMode&&!0!==e&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Ao(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const t=`${Qi.location.pathname}${Qi.location.hash}${Qi.location.search}`,e=`${Qi.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=e,this._context.initialTimestamp=Date.now(),this._context.urls.push(e)}throttledAddEvent(t,e){const n=this._throttledAddEvent(t,e);if(n===pa){const t=co({category:"replay.throttled"});this.addUpdate((()=>!No(this,{type:5,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t,metric:!0}})))}return n}getCurrentRoute(){const t=this.lastTransaction||(0,w.o5)().getTransaction(),e=(t&&(0,Xe.et)(t).data||{})[Ze];if(t&&e&&["route","custom"].includes(e))return(0,Xe.et)(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=function({useCompression:t,workerUrl:e}){if(t&&window.Worker){const t=function(t){try{const e=t||("undefined"!=typeof __SENTRY_EXCLUDE_REPLAY_WORKER__&&__SENTRY_EXCLUDE_REPLAY_WORKER__?"":function(){const t=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(t)}());if(!e)return;_o("[Replay] Using compression worker"+(t?` from ${t}`:""));const n=new Worker(e);return new Co(n)}catch(t){_o("[Replay] Failed to create compression worker")}}(e);if(t)return t}return _o("[Replay] Using simple buffer"),new xo}({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){yo&&i.vF.error("[Replay]",t),yo&&this._options._experiments&&this._options._experiments.captureExceptions&&(0,w.Cp)(t)}_initializeSessionForSampling(t){const e=this._options.errorSampleRate>0,n=Lo({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:e});this.session=n}_checkSession(){if(!this.session)return!1;const t=this.session;return!Ro(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(t),!1)}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Qi.document.addEventListener("visibilitychange",this._handleVisibilityChange),Qi.addEventListener("blur",this._handleWindowBlur),Qi.addEventListener("focus",this._handleWindowFocus),Qi.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(oa(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=function(t){function e(e){t.performanceEntries.includes(e)||t.performanceEntries.push(e)}function n({entries:t}){t.forEach(e)}const i=[];return["navigation","paint","resource"].forEach((t=>{i.push(li(t,n))})),i.push(ai((({metric:e})=>{t.replayPerformanceEntries.push(function(t){const e=t.entries,n=e[e.length-1],i=n?n.element:void 0,r=t.value,s=vo(r);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:s,end:s,data:{value:r,size:r,nodeId:i?Xs.mirror.getId(i):void 0}}}(e))}))),()=>{i.forEach((t=>t()))}}(this)}_removeListeners(){try{Qi.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Qi.removeEventListener("blur",this._handleWindowBlur),Qi.removeEventListener("focus",this._handleWindowFocus),Qi.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{"visible"===Qi.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=co({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=co({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{!function(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=function(t){const{metaKey:e,shiftKey:n,ctrlKey:i,altKey:r,key:s,target:o}=t;if(!o||function(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable}(o)||!s)return null;const a=e||i||r,l=1===s.length;if(!a&&l)return null;const c=(0,Yt.Hd)(o,{maxStringLength:200})||"<unknown>";return co({category:"ui.keyDown",message:c,data:{...fo(o,c).data,metaKey:e,shiftKey:n,ctrlKey:i,altKey:r,key:s}})}(e);n&&to(t,n)}(this,t)}}_doChangeToBackgroundTasks(t){this.session&&(Po(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush()))}_doChangeToForegroundTasks(t){this.session&&(this.checkAndHandleExpiredSession()?t&&this._createCustomBreadcrumb(t):_o("[Replay] Document has become active, but session has expired"))}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate((()=>{this.throttledAddEvent({type:os.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})}))}_addPerformanceEntries(){const t=(e=this.performanceEntries,e.map(go).filter(Boolean)).concat(this.replayPerformanceEntries);var e;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Bo(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:e}=this;if(!t||!e)return;if(t.segmentId)return;const n=e.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(this.session&&this.eventBuffer&&t){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(t){try{return Promise.all(Bo(t,[la(Qi.performance.memory)]))}catch(t){return[]}}(this),this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const e=Date.now();if(e-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const r=await this.eventBuffer.finish();await ha({replayId:t,recordingData:r,segmentId:i,eventContext:n,session:this.session,options:this.getOptions(),timestamp:e})}catch(t){this._handleException(t),this.stop({reason:"sendReplay"});const e=(0,w.KU)();e&&e.recordDroppedEvent("send_error","replay")}}else yo&&i.vF.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession())return void(yo&&i.vF.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const e=this.session.started,n=Date.now()-e;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,s=n>this._options.maxReplayDuration+5e3;if(r||s)return _o(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const o=this.eventBuffer;if(o&&0===this.session.segmentId&&!o.hasCheckout&&_o("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(t){yo&&i.vF.error(t)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Oo(this.session)}__init6(){this._onMutationHandler=t=>{const e=t.length,n=this._options.mutationLimit,i=n&&e>n;if(e>this._options.mutationBreadcrumbLimit||i){const t=co({category:"replay.mutations",data:{count:e,limit:i}});this._createCustomBreadcrumb(t)}return!i||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function ma(t,e,n,r){const s=[...t,..."string"==typeof r?r.split(","):[],...e];return void 0!==n&&("string"==typeof n&&s.push(`.${n}`),(0,i.pq)((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),s.join(",")}const ga='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',va=["content-length","content-type","accept"];let ya=!1;class _a{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=5e3,flushMaxDelay:e=5500,minReplayDuration:n=4999,maxReplayDuration:i=36e5,stickySession:r=!0,useCompression:s=!0,workerUrl:o,_experiments:a={},sessionSampleRate:l,errorSampleRate:c,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:h=!0,mutationBreadcrumbLimit:p=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:y=[],networkCaptureBodies:_=!0,networkRequestHeaders:b=[],networkResponseHeaders:w=[],mask:k=[],maskAttributes:x=["title","placeholder"],unmask:S=[],block:T=[],unblock:C=[],ignore:E=[],maskFn:I,beforeAddRecordingEvent:D,beforeErrorSampling:O,blockClass:M,blockSelector:A,maskInputOptions:P,maskTextClass:R,maskTextSelector:L,ignoreClass:N}={}){this.name=_a.id;const F=function({mask:t,unmask:e,block:n,unblock:i,ignore:r,blockClass:s,blockSelector:o,maskTextClass:a,maskTextSelector:l,ignoreClass:c}){const u={maskTextSelector:ma(t,[".sentry-mask","[data-sentry-mask]"],a,l),unmaskTextSelector:ma(e,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:ma(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],s,o),unblockSelector:ma(i,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:ma(r,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],c)};return s instanceof RegExp&&(u.blockClass=s),a instanceof RegExp&&(u.maskTextClass=a),u}({mask:k,unmask:S,block:T,unblock:C,ignore:E,blockClass:M,blockSelector:A,maskTextClass:R,maskTextSelector:L,ignoreClass:N});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...P||{},password:!0},maskTextFn:I,maskInputFn:I,maskAttributeFn:(t,e,n)=>function({el:t,key:e,maskAttributes:n,maskAllText:i,privacyOptions:r,value:s}){return i?r.unmaskTextSelector&&t.matches(r.unmaskTextSelector)?s:n.includes(e)||"value"===e&&"INPUT"===t.tagName&&["submit","button"].includes(t.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s:s}({maskAttributes:x,maskAllText:u,privacyOptions:F,key:t,value:e,el:n}),...F,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:t=>{try{t.__rrweb__=!0}catch(t){}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:e,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(i,36e5),stickySession:r,sessionSampleRate:l,errorSampleRate:c,useCompression:s,workerUrl:o,blockAllMedia:h,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:v,networkDetailDenyUrls:y,networkCaptureBodies:_,networkRequestHeaders:ba(b),networkResponseHeaders:ba(w),beforeAddRecordingEvent:D,beforeErrorSampling:O,_experiments:a},"number"==typeof l&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${l} })`),this._initialOptions.sessionSampleRate=l),"number"==typeof c&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${c} })`),this._initialOptions.errorSampleRate=c),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${ga}`:ga),this._isInitialized&&Ui())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return ya}set _isInitialized(t){ya=t}setupOnce(){Ui()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(t){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const t=function(t){const e=(0,w.KU)(),n=e&&e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...(0,b.Ce)(t)};return n?(null==t.sessionSampleRate&&null==t.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&(0,i.pq)((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")})),"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate),"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):((0,i.pq)((()=>{console.warn("SDK client is not available.")})),r)}(this._initialOptions);this._replay=new fa({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const t=(0,w.KU)().getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(t){}}}function ba(t){return[...va,...t.map((t=>t.toLowerCase()))]}_a.__initStatic();var wa=n(5476),ka=n(3264),xa=n.n(ka),Sa=n(1996),Ta=n.n(Sa),Ca=n(4692),Ea=n.n(Ca),Ia=(n(7834),n(9139),n(3431),n(1193),n(4720),n(5285),n(2187),n(9586),n(4656)),Da=n(2444),Oa=n(8255),Ma=n(4978),Aa=n(5263),Pa=n(6543),Ra=n(3716);function La(t){return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},La(t)}var Na,Fa,qa=["locations"];function ja(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ha(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function $a(t){return function(t){if(Array.isArray(t))return za(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ha(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ha(t,e){if(t){if("string"==typeof t)return za(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?za(t,e):void 0}}function za(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ba(){Ba=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var s=e&&e.prototype instanceof v?e:v,o=Object.create(s.prototype),a=new O(i||[]);return r(o,"_invoke",{value:C(t,n,a)}),o}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function v(){}function y(){}function _(){}var b={};c(b,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(M([])));k&&k!==n&&i.call(k,o)&&(b=k);var x=_.prototype=v.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(r,s,o,a){var l=d(t[r],t,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==La(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return s=s?s.then(r,r):r()}})}function C(e,n,i){var r=h;return function(s,o){if(r===f)throw Error("Generator is already running");if(r===m){if("throw"===s)throw o;return{value:t,done:!0}}for(i.method=s,i.arg=o;;){var a=i.delegate;if(a){var l=E(a,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var c=d(e,n,i);if("normal"===c.type){if(r=i.done?m:p,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=m,i.method="throw",i.arg=c.arg)}}}function E(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var s=d(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(La(e)+" is not iterable")}return y.prototype=_,r(x,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},S(T.prototype),c(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new T(u(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(x),c(x,l,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=M,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;D(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:M(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}function Wa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ua(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wa(Object(n),!0).forEach((function(e){var i,r,s;i=t,r=e,s=n[e],r=function(t){var e=function(t,e){if("object"!=La(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=La(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==La(e)?e:e+""}(r),r in i?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qa(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,r)}function Ya(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function o(t){Qa(s,i,r,o,a,"next",t)}function a(t){Qa(s,i,r,o,a,"throw",t)}o(void 0)}))}}!function(t={}){void 0===t.defaultIntegrations&&(t.defaultIntegrations=[...Ge]),void 0===t.release&&("string"==typeof __SENTRY_RELEASE__&&(t.release=__SENTRY_RELEASE__),Tt.SENTRY_RELEASE&&Tt.SENTRY_RELEASE.id&&(t.release=Tt.SENTRY_RELEASE.id)),void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),void 0===t.sendClientReports&&(t.sendClientReports=!0);const e={...t,stackParser:(0,C.vk)(t.stackParser||qe),integrations:u(t),transport:t.transport||(O()?Ye:Ve)};(function(t,e){!0===e.debug&&(o.T?i.vF.enable():(0,i.pq)((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),(0,w.o5)().update(e.initialScope);const n=new t(e);!function(t){const e=(0,l.BF)().getStackTop();e.client=t,e.scope.setClient(t)}(n),function(t){t.init?t.init():t.setupIntegrations&&t.setupIntegrations()}(n)})(Dt,e),t.autoSessionTracking&&(void 0!==Tt.document?((0,w.J0)({ignoreDuration:!0}),(0,w.J5)(),H((({from:t,to:e})=>{void 0!==t&&t!==e&&((0,w.J0)({ignoreDuration:!0}),(0,w.J5)())}))):gt&&i.vF.warn("Session tracking in non-browser environment with @sentry/browser is not supported."))}({dsn:"https://e9a7cb90d7fe84969ed38bfd9a243f56@o4506190134116352.ingest.sentry.io/4506190138703872",environment:"production",integrations:[new class{constructor(t){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,function(){const t=(0,l.EU)();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=Sn),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=xn),_n||(_n=!0,se(bn),le(bn)))}(),En&&(this._hasSetTracePropagationTargets=!(!t||!t.tracePropagationTargets&&!t.tracingOrigins)),this.options={...ji,...t},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=Ii(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&function(t,e){if(xi()&&mt.k3){const n=function(t,e){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((t=>t.duration===n.value&&void 0!==Di[t.name])),s=(0,w.KU)();if(!r||!s)return;const o=Di[r.name],a=s.getOptions(),l=ki(mt.k3+r.startTime),c=ki(n.value),u=void 0!==r.interactionId?t[r.interactionId]:void 0;if(void 0===u)return;const{routeName:d,parentContext:h,activeTransaction:p,user:f,replayId:m}=u,g=void 0!==f?f.email||f.id||f.ip_address:void 0,v=void 0!==p?p.getProfileId():void 0,y=new ln({startTimestamp:l,endTimestamp:l+c,op:`ui.interaction.${o}`,name:(0,Yt.Hd)(r.target),attributes:{release:a.release,environment:a.environment,transaction:d,...void 0!==g&&""!==g?{user:g}:{},...void 0!==v?{profile_id:v}:{},...void 0!==m?{replay_id:m}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),_=function(t,e,n){if(!cn(e))return!1;let r;return r=void 0!==t&&"function"==typeof e.tracesSampler?e.tracesSampler({transactionContext:t,name:t.name,parentSampled:t.parentSampled,attributes:{...t.data,...t.attributes},location:In.location}):void 0!==t&&void 0!==t.sampled?t.sampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1,kn(r)?!0===r?n:!1===r?0:r*n:(En&&i.vF.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(h,a,e);if(_&&Math.random()<_){const t=y?function(t,e){const n={sent_at:(new Date).toISOString()};return e&&(n.dsn=W(e)),G(n,t.map(yi))}([y],s.getDsn()):void 0,e=s&&s.getTransport();e&&t&&e.send(t).then(null,(t=>{En&&i.vF.error("Error while sending interaction:",t)}))}},mi("inp",n,fi,oi);var n}(t,e);return()=>{n()}}}(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&li("longtask",(({entries:t})=>{for(const e of t){const t=yn();if(!t)return;const n=ki(mt.k3+e.startTime),i=ki(e.duration);t.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+i})}})),this.options._experiments.enableInteractions&&li("event",(({entries:t})=>{for(const e of t){const t=yn();if(!t)return;if("click"===e.name){const n=ki(mt.k3+e.startTime),i=ki(e.duration),r={description:(0,Yt.Hd)(e.target),op:`ui.interaction.${e.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+i},s=(0,Yt.xE)(e.target);s&&(r.attributes={"ui.component_name":s}),t.startChild(r)}}})),this._latestRoute={name:void 0,context:void 0}}setupOnce(t,e){this._getCurrentHub=e;const n=e().getClient(),r=n&&n.getOptions(),{routingInstrumentation:s,startTransactionOnLocationChange:o,startTransactionOnPageLoad:a,markBackgroundTransactions:l,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:d,enableHTTPTimings:h,_experiments:p}=this.options,f=r&&r.tracePropagationTargets,m=f||this.options.tracePropagationTargets;En&&this._hasSetTracePropagationTargets&&f&&i.vF.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),s((t=>{const n=this._createRouteTransaction(t);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,t,e),n}),a,o),l&&(In.document?In.document.addEventListener("visibilitychange",(()=>{const t=yn();if(In.document.hidden&&t){const e="cancelled",{op:n,status:r}=(0,Xe.et)(t);En&&i.vF.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.end()}})):En&&i.vF.warn("[Tracing] Could not set up background tab detection due to lack of global document")),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),Li({traceFetch:c,traceXHR:u,tracePropagationTargets:m,shouldCreateSpanForRequest:d,enableHTTPTimings:h})}_createRouteTransaction(t){if(!this._getCurrentHub)return void(En&&i.vF.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`));const e=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:s,heartbeatInterval:o}=this.options,a="pageload"===t.op;let l;if(a){const e=a?$i("sentry-trace"):"",n=a?$i("baggage"):void 0,{traceId:i,dsc:r,parentSpanId:s,sampled:o}=(0,Cn.kM)(e,n);l={traceId:i,parentSpanId:s,parentSampled:o,...t,metadata:{...t.metadata,dynamicSamplingContext:r},trimEnd:!0}}else l={trimEnd:!0,...t};const c="function"==typeof n?n(l):l,u=void 0===c?{...l,sampled:!1}:c;u.metadata=u.name!==l.name?{...u.metadata,source:"custom"}:u.metadata,this._latestRoute.name=u.name,this._latestRoute.context=u,!1===u.sampled&&En&&i.vF.log(`[Tracing] Will not send ${u.op} transaction because of beforeNavigate.`),En&&i.vF.log(`[Tracing] Starting ${u.op} transaction on scope`);const{location:d}=In,h=Tn(e,u,r,s,!0,{location:d},o,a);return a&&In.document&&(In.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(In.document.readyState)&&h.sendAutoFinishSignal()})),["interactive","complete"].includes(In.document.readyState)&&h.sendAutoFinishSignal()),h.registerBeforeFinishCallback((t=>{this._collectWebVitals(),function(t){const e=xi();if(!e||!In.performance.getEntries||!mt.k3)return;En&&i.vF.log("[Tracing] Adding & adjusting spans using Performance API");const n=ki(mt.k3),r=e.getEntries(),{op:s,start_timestamp:o}=(0,Xe.et)(t);if(r.slice(Ci).forEach((e=>{const r=ki(e.startTime),s=ki(e.duration);if(!("navigation"===t.op&&o&&n+r<o))switch(e.entryType){case"navigation":!function(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((i=>{Oi(t,e,i,n)})),Oi(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),Oi(t,e,"fetch",n,"cache","domainLookupStart"),Oi(t,e,"domainLookup",n,"DNS"),function(t,e,n){e.responseEnd&&(bi(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+ki(e.requestStart),endTimestamp:n+ki(e.responseEnd)}),bi(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+ki(e.responseStart),endTimestamp:n+ki(e.responseEnd)}))}(t,e,n)}(t,e,n);break;case"mark":case"paint":case"measure":{!function(t,e,n,i,r){const s=r+n,o=s+i;bi(t,{description:e.name,endTimestamp:o,op:e.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s})}(t,e,r,s,n);const o=Fn(),a=e.startTime<o.firstHiddenTime;"first-paint"===e.name&&a&&(En&&i.vF.log("[Measurements] Adding FP"),Ei.fp={value:e.startTime,unit:"millisecond"}),"first-contentful-paint"===e.name&&a&&(En&&i.vF.log("[Measurements] Adding FCP"),Ei.fcp={value:e.startTime,unit:"millisecond"});break}case"resource":!function(t,e,n,i,r,s){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;const o=Gt(n),a={};Mi(a,e,"transferSize","http.response_transfer_size"),Mi(a,e,"encodedBodySize","http.response_content_length"),Mi(a,e,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in e&&(a["resource.render_blocking_status"]=e.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=n.includes(In.location.origin);const l=s+i,c=l+r;bi(t,{description:n.replace(In.location.origin,""),endTimestamp:c,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:l,data:a})}(t,e,e.name,r,s,n)}})),Ci=Math.max(r.length-1,0),function(t){const e=In.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),_i(n.rtt)&&(Ei["connection.rtt"]={value:n.rtt,unit:"millisecond"})),_i(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`),_i(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}(t),"pageload"===s){!function(t){const e=On();if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(En&&i.vF.log("[Measurements] Adding TTFB Request Time"),t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Ei),["fcp","fp","lcp"].forEach((t=>{if(!Ei[t]||!o||n>=o)return;const e=Ei[t].value,r=n+ki(e),s=Math.abs(1e3*(r-o)),a=s-e;En&&i.vF.log(`[Measurements] Normalized ${t} from ${e} to ${s} (${a})`),Ei[t].value=s}));const e=Ei["mark.fid"];e&&Ei.fid&&(bi(t,{description:"first input delay",endTimestamp:e.value+ki(Ei.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:e.value}),delete Ei["mark.fid"]),"fcp"in Ei||delete Ei.cls,Object.keys(Ei).forEach((t=>{!function(t,e,n){const i=yn();i&&i.setMeasurement(t,e,n)}(t,Ei[t].value,Ei[t].unit)})),function(t){Si&&(En&&i.vF.log("[Measurements] Adding LCP Data"),Si.element&&t.setTag("lcp.element",(0,Yt.Hd)(Si.element)),Si.id&&t.setTag("lcp.id",Si.id),Si.url&&t.setTag("lcp.url",Si.url.trim().slice(0,200)),t.setTag("lcp.size",Si.size)),Ti&&Ti.sources&&(En&&i.vF.log("[Measurements] Adding CLS Data"),Ti.sources.forEach(((e,n)=>t.setTag(`cls.source.${n+1}`,(0,Yt.Hd)(e.node)))))}(t)}Si=void 0,Ti=void 0,Ei={}}(t)})),h}_registerInteractionListener(){let t;const e=()=>{const{idleTimeout:e,finalTimeout:n,heartbeatInterval:r}=this.options,s="ui.action.click",o=yn();if(o&&o.op&&["navigation","pageload"].includes(o.op))return void(En&&i.vF.warn(`[Tracing] Did not create ${s} transaction because a pageload or navigation transaction is in progress.`));if(t&&(t.setFinishReason("interactionInterrupted"),t.end(),t=void 0),!this._getCurrentHub)return void(En&&i.vF.warn(`[Tracing] Did not create ${s} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(En&&i.vF.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`));const a=this._getCurrentHub(),{location:l}=In,c={name:this._latestRoute.name,op:s,trimEnd:!0,data:{[Ze]:this._latestRoute.context?Hi(this._latestRoute.context):"url"}};t=Tn(a,c,e,n,!0,{location:l},r)};["click"].forEach((t=>{In.document&&addEventListener(t,e,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const t=({entries:t})=>{const e=(0,w.KU)(),n=void 0!==e&&void 0!==e.getIntegrationByName?e.getIntegrationByName("Replay"):void 0,i=void 0!==n?n.getReplayId():void 0,r=yn(),s=(0,w.o5)(),o=void 0!==s?s.getUser():void 0;t.forEach((t=>{if(function(t){return"duration"in t}(t)){const e=t.interactionId;if(void 0===e)return;const n=this._interactionIdToRouteNameMapping[e],s=t.duration,a=t.startTime,l=Object.keys(this._interactionIdToRouteNameMapping),c=l.length>0?l.reduce(((t,e)=>this._interactionIdToRouteNameMapping[t].duration<this._interactionIdToRouteNameMapping[e].duration?t:e)):void 0;if("first-input"===t.entryType&&l.map((t=>this._interactionIdToRouteNameMapping[t])).some((t=>t.duration===s&&t.startTime===a)))return;if(!e)return;if(n)n.duration=Math.max(n.duration,s);else if(l.length<10||void 0===c||s>this._interactionIdToRouteNameMapping[c].duration){const t=this._latestRoute.name,n=this._latestRoute.context;t&&n&&(c&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[c],this._interactionIdToRouteNameMapping[e]={routeName:t,duration:s,parentContext:n,user:o,activeTransaction:r,replayId:i,startTime:a})}}}))};li("event",t),li("first-input",t)}},new _a({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:1,replaysSessionSampleRate:.05,replaysOnErrorSampleRate:1});var Va=null===(Na=window.DFL)||void 0===Na?void 0:Na.posthogKey,Ga=null===(Fa=window.DFL)||void 0===Fa?void 0:Fa.posthogUrl;Va&&Ga?wa.Ay.init(Va,{advanced_disable_decide:!0,api_host:Ga,autocapture:!1,capture_pageleave:!1,capture_pageview:!1,persistence:"optional"===localStorage.getItem("cookie_consent")?"localStorage+cookie":"memory",person_profiles:"identified_only"}):console.log("PostHog could not be initialised as the key or URL is missing."),window.$=window.jQuery=Ea(),n(8497);var Xa={user:void 0,messageCounter:0};function Ka(t,e){return Xa.messageCounter++,60!==t.trim().charCodeAt(0)&&(t="<p>".concat(t,"</p>")),Ea()("body").append("<div id='message-"+Xa.messageCounter+"' class='modal'>"+t+"</div>"),setTimeout((function(){Ea()("#message-"+Xa.messageCounter).modal({closeExisting:!1})}),200),Ea()("#message-"+Xa.messageCounter).on(Ea().modal.AFTER_CLOSE,(function(t,n){"function"==typeof e&&e(),Ea()(this).remove()})),!1}function Ja(t,e){Ka(t,e),Ea()(".modal").addClass("dialog-inverted")}function Za(){console.log("Closing last dialog "+Xa.messageCounter),Ea()("#message-"+Xa.messageCounter).find(".close-modal").click()}function tl(){var t;return"admin"===(null===(t=Xa.user)||void 0===t?void 0:t.type)}function el(){return null!=Xa.user&&null!=Xa.user&&("teacher"==Xa.user.type||"admin"==Xa.user.type)}function nl(){return null!=Xa.user&&null!=Xa.user&&"student"==Xa.user.type}function il(){return null!=Xa.user&&null!=Xa.user&&"parent"==Xa.user.type}function rl(){return null!=Xa.user&&null!=Xa.user&&"trust"==Xa.user.type}function sl(){var t,e,n;return tl()||"ALL"===(null===(t=Xa.user)||void 0===t||null===(t=t._school)||void 0===t?void 0:t.ssorequired)||"TEACHERS"===(null===(e=Xa.user)||void 0===e||null===(e=e._school)||void 0===e?void 0:e.ssorequired)&&"teacher"===(null===(n=Xa.user)||void 0===n?void 0:n.type)}var ol="y",al="u",ll="x",cl="s",ul="w",dl="v",hl="t",pl="a";function fl(t,e){var n=t[e];if(!Xa.user)return n===pl;if("admin"==Xa.user.type)return!0;var i=Xa.user.sid===t.sid,r=null!=Xa.user._school&&null!=Xa.user._school.acid&&Xa.user._school.acid===t.acid,s="teacher"===Xa.user.type||"trust"===Xa.user.type;switch(n){case ol:return"admin"==Xa.user.type;case al:return Xa.user.uid===t.uid;case ll:return s&&i;case cl:return i;case ul:return s&&(i||r);case dl:return i||r;case hl:return s;case pl:return!0;default:return!1}}function ml(){Xa.user||(window.location="login.php?url="+window.location)}function gl(t,e,n,i,r,s){void 0===i&&(i=!1),Array.isArray(e)||(e=[e]),Xa.messageCounter++,60!==t.trim().charCodeAt(0)&&(t="<p>".concat(t,"</p>"));var o="";Ea().each(e,(function(t,e){o+='<button id="but-'.concat(Xa.messageCounter,"-").concat(t,'" ').concat(e.disabled?"disabled":""," ").concat(e.tooltip?'title="'.concat(e.tooltip,'"'):"",">").concat(e.label,"</button>")})),Ea()("body").append("<div id='message-"+Xa.messageCounter+"' class='modal'>"+t+"<div class='dialog-buttons'>"+o+"</div></div>"),n?Ea()("#message-"+Xa.messageCounter).modal({closeExisting:!1,escapeClose:!i,clickClose:!i,showClose:!0}):Ea()("#message-"+Xa.messageCounter).modal({escapeClose:!i,clickClose:!i&&!0!==r,showClose:!0}),i&&Ea()(".close-modal").hide(),Ea()("#message-"+Xa.messageCounter).data("id",Xa.messageCounter),Ea().each(e,(function(t,e){Ea()("#but-"+Xa.messageCounter+"-"+t).click((function(t){t.preventDefault();var n=Ea()(this).closest(".modal").data("id");!1!==e.action()&&Ea()("#message-"+n).find(".close-modal").click()}))})),Ea()("#message-"+Xa.messageCounter).on(Ea().modal.AFTER_CLOSE,(function(t,e){"function"==typeof s&&s(),Ea()(this).remove()}))}function vl(t,e){Xa.messageCounter++,60!==t.trim().charCodeAt(0)&&(t="<p>".concat(t,"</p>"));var n="<button id='yesbut-"+Xa.messageCounter+"'>Yes</button>";Ea()("body").append("<div id='message-"+Xa.messageCounter+"' class='modal'>"+t+"<div class='dialog-buttons'>"+n+"</div></div>"),Ea()("#message-"+Xa.messageCounter).modal({closeExisting:!1}),Ea()("#yesbut-"+Xa.messageCounter).click((function(){e(),Ea().modal.close()})),Ea()("#message-"+Xa.messageCounter).on(Ea().modal.AFTER_CLOSE,(function(t,e){Ea()(".modal").remove()}))}function yl(){Ea()("#sidemenu").empty();var t=(0,Ma.wX)("courses-only-phase-two"),e=t?"<li><a id='browse-courses-link' href='browse-courses.php'><img src='/images/book_icon.svg'>Browse Courses</a></li>":"<li><a href='courses.php'><img src='/images/book_icon.svg'>Courses</a></li>",n=t?"<li><a id='manage-courses-link' href='manage-courses.php'><img src='/images/cog_icon.svg'>Manage Courses</a></li>":"";Xa.user?(Ea()("#top-bar #logo a").attr("href","/dashboard.php"),nl()?(Ea()("#sidemenu").append("<ul><li><a href='dashboard.php'><img src='/images/home_icon.svg'>Home Dashboard</a></li></ul>"),Ea()("#sidemenu").append("<h1>Tasks & Learning</h1>"),Ea()("#sidemenu").append("   <ul><li><a id='sidemenu-startpractice' href='#'><img src='/images/pencil_icon.svg'>Practise</a></li><li><a href='progress.php?mode=tasklist'><img src='/images/pencil_icon.svg'>My Assigned Tasks</a></li><li><a href='progress.php?mode=studentprogress'><img src='/images/progress_icon.svg'>Progress Data</a></li>"+e+"</ul>"),Ea()("#sidemenu-startpractice").on("click",(function(){(0,Pa.vh)({triggerId:"vertical-nav-start-a-practice-link"}),Nc()}))):(Ea()("#sidemenu").append("<ul><li><a href='dashboard.php'><img src='/images/home_icon.svg'>Home Dashboard</a></li></ul>"),Ea()("#sidemenu").append("<h1>Tasks & Learning</h1>"),Ea()("#sidemenu").append("<ul><li><a id='sidemenu-settasklink' href='#'><img src='/images/pencil_icon.svg'>Set a Task</a></li><li><a href='downloadables.php'><img src='/images/downloadables_icon.svg'>Lesson Resources</a></li><li><a href='progress.php'><img src='/images/progress_icon.svg'>Progress Data</a></li><li><a href='explorer.php'><img src='/images/compass_icon.svg'>Question Explorer</a></li><li><a href='worksheets.php'><img src='/images/cabinet_icon.svg'>Papers & Worksheets</a></li>"+e+"</ul>"),Ea()("#sidemenu-settasklink").on("click",(function(){return(0,Pa.lC)({triggerId:"vertical-nav-set-a-task-link"}),Lc(),Pl(),!1})),Ea()("#sidemenu").append("<h1>Setup & Help</h1>"),Ea()("#sidemenu").append("<ul>"+(tl()||el()||rl()?n:"")+"<li><a href='settings.php?tab=classes'><img src='/images/cog_icon.svg'>Classes & Settings</a></li><li><a href='training.php'><img src='/images/help_icon.svg'>Help & Training</a></li></ul>")),Ea()("#sidemenu").append("<h1>Games</h1>"),Ea()("#sidemenu").append("<ul><li><a href='#' id='sidemenu-livegame'><img src='/images/phone_icon2.svg'>Live! Game</a></li></ul>"),Ea()("#sidemenu-livegame").click(Fc)):(Ea()("#sidemenu").append("<ul><li><a href='login.php'><img src='/images/home_icon.svg'>Login/Register</a></li></ul>"),Ea()("#sidemenu").append("<h1>Tasks & Learning</h1>"),Ea()("#sidemenu").append("<ul><li><a id='sidemenu-startpractice' href='#'><img src='/images/pencil_icon.svg'>Practise</a></li><li><a href='downloadables.php'><img src='/images/downloadables_icon.svg'>Lesson Resources</a></li>"+e+"</ul>"),Ea()("#sidemenu-startpractice").on("click",(function(){(0,Pa.vh)({triggerId:"vertical-nav-start-a-practice-link"}),Nc()}))),Ea()("#browse-courses-link").on("click",(function(){(0,Aa.oF)({linkUrl:"/browse-courses.php",triggerId:"vertical-nav-browse-courses-link"})})),Ea()("#manage-courses-link").on("click",(function(){(0,Aa.JV)({linkUrl:"/manage-courses.php",triggerId:"vertical-nav-manage-courses-link"})}))}function _l(t){Ea()(document).data("initialFuncs")||Ea()(document).data("initialFuncs",[]),Ea()(document).data("initialFuncs").push(t)}function bl(){return wl.apply(this,arguments)}function wl(){return(wl=Ya(Ba().mark((function t(){var e,n,i;return Ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/user/current/");case 3:if((e=t.sent).ok){t.next=9;break}return t.next=7,e.json();case 7:throw n=t.sent,new Error(n.message);case 9:return t.next=11,e.json();case 11:return i=t.sent,t.abrupt("return",i);case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0),Ka("There was an error getting the current user.");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function kl(t){if(Ea()("#account-menu").empty(),null!=t&&t.user){var e,n;n=(nl()||il())&&t.user.firstname?t.user.firstname:t.user.firstname?t.user.firstname[0]+" "+t.user.surname:t.user.surname;var i=(t.user.firstname?t.user.firstname[0]:"")+t.user.surname[0];Ea()("#account-menu").append("<li id='mainmenu-user'><a href='#'><label class='longer-name'>"+n+"</label><label class='initials'>"+i+"</label><img src='/images/chevron_down.svg'></a></li>"),t.count&&Ea()("#mainmenu-user label").append("<span id='notification-count'>"+t.count+"</span>"),Ea()("#mainmenu-user").append("<div id='account-submenu' class='submenu' style='display: none'><div id='account-submenu-notifications'><ul></ul></div><ul><li><a href='/dashboard.php' id='mainmenu-account'>My Dashboard</a></li><li><a id='mainmenu-logoff' style='cursor:pointer;'>Log Off</a></li>"+(el()?"<li><a id='mainmenu-viewasstudent' style='cursor:pointer;'>View as Student</a></li>":"")+"<li><a href='/settings.php?tab=account' id='mainmenu-account'>Account Settings</a></li>"+("admin"===(null===(e=Xa.user)||void 0===e?void 0:e.type)?"<li><a href='/admin.php'>Admin</a></li>":"")+"</ul></div>"),Ea()("#mainmenu-logoff").click((function(){Ea().ajax({url:"/api/auth/logout",context:document.body,dataType:"json",type:"GET",contentType:"application/json",success:function(t,e,n){wa.Ay.reset(),window.location="index.php"},error:function(t,e,n){var i;if("LOGOUT_NOT_LOGGED_IN"===(null===(i=t.responseJSON)||void 0===i?void 0:i.message))window.location="index.php";else{var r="There was an error logging out";Ka(r+=j.responseText?": <strong>".concat(j.responseText,"</strong>"):".")}}})})),Ea()("#mainmenu-viewasstudent").click((function(){Ea().ajax({url:"/api/class/get_school_classes?repeatUserClassGroups=true",context:document.body,dataType:"json",success:function(t,e,n){Ka("<h2>Select a Class</h2><p>This facility allows you to use a demo student account as if you were a student in the class, which includes any tasks you have set.</p><p><select id='viewasstudent'><option value=''>-</option></select></p>"),Ea().each(t.classes,(function(t,e){e.cid?Ea()("#viewasstudent").append("<option value='"+e.cid+"'>"+e.name+"</option>"):Ea()("#viewasstudent").append("<option value=''>-----</option>")})),Ea()("#viewasstudent").change((function(){var t=Ea()(this).val();Ea().ajax({url:"/api/class/loginasdemo/"+t,type:"POST",context:document.body,dataType:"json",success:function(t){window.location="dashboard.php"},error:function(t,e,n){Ka("There was an error logging on as this class' demo account:<br><br><strong>"+t.responseText+"</strong>")}})}))},error:function(t,e,n){Ka("There was an error getting the class list:<br><br><strong>"+t.responseText+"</strong>")}})})),Ea()("#account-submenu-notifications ul").empty(),Ea().each(t.notifications,(function(t,e){Ea()("#account-submenu-notifications ul").append("<li><a href='"+(e.url?e.url:"")+"'><img src='"+e.icon+"'>"+e.text+"</a></li>")})),Ea()("#account-submenu-notifications ul").children().last().addClass("last"),Ea()("#account-menu > li").mouseover((function(){console.log("mouseover"),function(t){Pl(),Ea()("#account-submenu").show();var e=Ea()("#account-submenu").outerWidth(),n=Ea()("#mainmenu-user").offset().left+Ea()("#mainmenu-user").outerWidth();Ea()("#account-submenu").offset({left:n-e})}(Ea()(this))})),Ea()("#account-menu > li").mouseout((function(){Ea()(this),Ea()("#account-submenu").hide()})),rl()&&(Ea()("#trust-schoolselection").html("<option value=''>Select a trust school</option>"),Ea().each(Xa.user._trust._schools,(function(t,e){Ea()("#trust-schoolselection").append("<option value='"+e.sid+"'>"+e.name+"</option>")})),Ea()("#trust-schoolselection").show().val(Xa.user.sid?Xa.user.sid:""),Ea()("#trust-schoolselection").change((function(){var t;t=Ea()(this).val(),Ea().ajax({url:"/api/users/updatetrustadmin/"+t,type:"PATCH",context:document.body,dataType:"json",success:function(t){location.reload()},error:function(t,e,n){Ka("There was an error getting the class list:<br><br><strong>"+t.responseText+"</strong>")}})})))}else Ea()("#account-menu").append("<li id='mainmenu-learn'><a>Learn</a></li>"),Ea()("#account-menu").append("<li id='mainmenu-pricing'><a href='/pricing.php'>Pricing</a></li>"),Ea()("#account-menu").append("<li id='mainmenu-donate'><a href='/donate.php'>Donate</a></li>"),Ea()("#account-menu").append("<li id='mainmenu-login'><a href='/login.php?url="+window.location+"'>Login</a></li>"),Ea()("#mainmenu-learn").on("click",(function(){(0,Pa.RH)({triggerId:"top-bar-learn-link"}),Pl(),Ja("<div class='dialog-options'><h1>How can we help you best?</h1><div><button id='learn-bytopic'>By Topic</button><p>Watch videos and practise either exam questions, or to become confident with specific types of questions, use our question generators.</p></div><div><button id='learn-pastpapers'>Past Papers</button><p>Practise collections of questions from different exam boards.</p></div><div><button id='learn-course'>Do a course</button><p>Work through a course, either using one of our inhouse courses, or from exam boards and educational publishers.</p></div></div>",(function(){(0,Pa.e5)({triggerId:"learn-modal-dismiss"})})),Ea()("#learn-bytopic").on("click",(function(){(0,Pa.QO)({triggerId:"learn-modal-by-topic-button"}),window.location="/explorer.php"})),Ea()("#learn-pastpapers").on("click",(function(){(0,Ra.tn)({triggerId:"learn-modal-past-papers-button"}),window.location="/worksheets.php?wdid=2"})),Ea()("#learn-course").on("click",(function(){(0,Aa.oF)({triggerId:"learn-modal-do-a-course-button"}),window.location="/browse-courses.php"}))}))}function xl(t){var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}function Sl(){Ea()("#search-results-new").hide(),Ea()("#search-results-new .dfm_TabsWrapper ul").empty(),Tl=!1}var Tl=!1,Cl=0,El=-1;function Il(t){Tl=!0,Ea()("#users-panel").hide(),Ol&&clearTimeout(Ol),Ol=setTimeout((function(){!function(t){Cl++,console.log("Started search "+Ol+" c"+Cl+": "+t);var e="/api/search/"+encodeURIComponent(t)+"/"+Cl;console.log(e),Ea().ajax({url:e,context:document.body,dataType:"json",success:function(t,e,n){var i,r;if(console.log("Received results from search "+t.counter),t.counter&&Number(t.counter)<El)console.log("[RejectedSearchResults] lastSuccess="+El+" current="+t.counter);else{El=Number(t.counter),console.log("[DisplayingSearchResults] searchReceived updated to "+El),Ea()("#search-loading").hide();var s=t.users.length+t.skills.length+t.schools.length;Ea()("#search-header span").html(s+" results"),Xa.user&&"admin"===Xa.user.type&&Ea()("#search-results-new-tab-users").click();var o=!1,a=Ea()("#search-results-new-downloadables ul");a.empty();var l=null!==(i=t.downloadables)&&void 0!==i?i:[];t.downloadables.forEach((function(t){var e=t.rid,n=void 0===e?"":e,i=t.title,r=void 0===i?"":i,s=t.description,o=void 0===s?"":s;a.append("<li><a href='/downloadables.php?rid="+n+"'><img src='/images/downloadables_icon.svg' /><h1>"+r+"</h1><h2>"+o+"</h2></a></li>")})),0===l.length?Ea()("#search-results-new-tab-downloadables").hide():(Ea()("#search-results-new-tab-downloadables").html("Downloadables ("+l.length+")").show(),o=!0);var c=Ea()("#search-results-new-skills");c.empty();var u=null!==(r=t.skills)&&void 0!==r?r:[],d=[];u.forEach((function(t){var e=t.locations,n=void 0===e?[]:e,i=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,qa);n.forEach((function(t){var e=d.find((function(e){return e.cuid===t.cuid}));e?e.skills.push(i):d.push(Ua(Ua({},t),{},{skills:[i]}))}))})),d.sort((function(t,e){return t.unitOrder-e.unitOrder})),d.sort((function(t,e){return t.moduleOrder-e.moduleOrder})),d.forEach((function(t){var e=t.cuid,n=t.unitName,i=void 0===n?"":n,r=t.moduleName,s=void 0===r?"":r,o=t.skills,a=void 0===o?[]:o;a.length&&c.append("<h2>".concat(s,"</h2><h1>").concat(i,"</h1>")),a.forEach((function(t){var n=t.skid,i=t.name,r=void 0===i?"":i,s=t.publicId,o=t.subskills,a=void 0===o?[]:o;if(a.length){a.sort((function(t,e){var n=t.letter?t.letter:"",i=e.letter?e.letter:"";return n.localeCompare(i)}));var l="unit-".concat(e,"-skill-").concat(n);c.append("<div class='skill' id='".concat(l,"'>\n                           <div>\n                              <label>").concat(s,"</label>\n                              <div>\n                                 <h2>").concat(r,"</h2>\n                                 <button class='explore-button'>\n                                    <img src='/images/compass_icon.svg'>Explore\n                                 </button>\n                              </div>\n                           </div>\n                           <ul></ul>\n                        </div>")),Ea()("#".concat(l)).on("click",(function(){return window.location="/explorer.php?cuid=".concat(e,"&skid=").concat(n)}));var u=Ea()("#".concat(l," > ul"));a.forEach((function(t){var e=t.active,n=t.letter,i=t.name,r=void 0===i?"":i;u.append("<li>\n                              <span class='".concat(e?"":"inactive","'>\n                                 <strong>").concat(s).concat(n||"","</strong> - ").concat(r,"\n                              </span>\n                           </li>"))}))}}))})),0===u.length?Ea()("#search-results-new-tab-skills").hide():(Ea()("#search-results-new-tab-skills").html("Skills (".concat(u.length,")")).show(),o=!0);var h=Ea()("#search-results-new-users ul");h.empty(),Ea().each(t.users,(function(t,e){var n,i=9==e.status?"class='deleted'":"",r=e.thumb?e.thumb:e._school&&e._school.thumb?e._school.thumb:"/homework/img/user-neutral.png",s=null!==(n=e.type)&&void 0!==n?n:"";e._school&&e._school.name?h.append("<li "+i+"><a href='#'><img src='"+r+"'>"+e.firstname+" "+e.surname+"<br><small>"+e._school.name+" ("+s+")"+(e.ctext?" - "+e.ctext:"")+"</small></a></li>"):h.append("<li "+i+"><a href='#'><img src='"+r+"'>"+e.firstname+" "+e.surname+"<br><small>"+s[0].toUpperCase()+s.substr(1)+" "+(e.ctext?" - "+e.ctext:"")+"</small></a></li>"),h.children().last().data("user",e),h.children().last().click((function(){var t=Ea()(this).data("user"),e=Boolean(t.ctext);!function(t,e,n,i,r,s){var o,a=[];"parent"!==(null===(o=Xa.user)||void 0===o?void 0:o.type)&&a.push({label:"Move Class",disabled:!s,tooltip:s?"":"User has no current class",action:function(){window.location="settings.php?tab=classes&action=move&uid=".concat(t)}}),a.push({label:"Edit Details",action:function(){Dl({uid:t,firstname:e,surname:n,email:i,title:r})}}),gl('<span style="font-size: 20px; font-weight: 600;">'.concat(e," ").concat(n,"</span>"),a)}(t.uid,t.firstname,t.surname,t.email,t.title,e)}))})),t.users&&0!=t.users.length?(Ea()("#search-results-new-tab-users").html("Users ("+t.users.length+")").show(),o=!0):Ea()("#search-results-new-tab-users").hide();var p=Ea()("#search-results-new-schools ul");p.empty(),Ea().each(t.schools,(function(t,e){var n="dashboard.php?sid="+e.id,i=e.thumb?e.thumb:"/homework/img/school.png";p.append("<li><a href='#'><img src='"+i+"'>"+e.name+"<br><small>"+e.town+" &nbsp;&nbsp; Num Students: "+e.numstudents+"</small></a>"),p.children().last().click((function(){var t="<button onclick=\"window.location='"+n+"'\">"+("admin"===Xa.user.type?"Dashboard":"Info")+"</button> ";t+="<br><br><button onclick=\"window.location='schoolsanalysis-map.php?sid="+e.sid+"'\">Stats</button> ",t+="<br><br><button onclick=\"window.location='manage-school-settings.php?sid="+e.sid+"'\">Edit School Details/Logo</button> ",t+="<br><br><button onclick=\"window.location='admin-update-subscription.php?sid="+e.sid+"'\">Update Subscription</button> ",gl("<h2>"+e.name+"</h2>"+t,[])}))})),t.schools&&0!=t.schools.length?(Ea()("#search-results-new-tab-schools").html("Schools ("+t.schools.length+")").show(),o=!0):Ea()("#search-results-new-tab-schools").hide(),o?Ea()("#search-noresults").hide():Ea()("#search-noresults").show(),xa().typeset(),Ea()("#search-results-new").show().offset({left:Ea()("#search-form input").offset().left}),Ea()("#search-header-new-type a").filter(":visible").first().click()}}})}(t),Ol=void 0}),200)}function Dl(t,e){gl("<form>"+(t.title?"<div><label>Title</label><select id='editstudent-title'><option>Mr</option><option>Ms</option><option>Miss</option><option>Mrs</option><option>Mx</option><option>M</option><option>Dr</option><option>Prof</option></select></div>":"")+"<div><label>Firstname</label><input type='text' id='editstudent-firstname'></div><div><label>Surname</label><input type='text' id='editstudent-surname'></div><div><label>Email/Username</label><input type='text' id='editstudent-email'></div></form>",[{label:"Submit",action:function(){var n=Ea()("#editstudent-firstname").val(),i=Ea()("#editstudent-surname").val(),r=Ea()("#editstudent-email").val(),s=Ea()("#editstudent-title").val();if(!n||!i||!r)return Ka("Please ensure the form details are filled in."),!1;var o={uid:t.uid,firstname:n,surname:i,email:r};s&&(o.title=s),Ea().ajax({url:"/api/user/other",type:"PATCH",contentType:!1,processData:!1,cache:!1,data:JSON.stringify(o),success:function(t){console.log("[Successfully updated student]"),e&&e(t)},error:function(t,e,n){Ka("An error occurred when trying to update this student's details: <strong>"+t.responseText+"</strong>")}})}}]),Ea()("#editstudent-firstname").val(t.firstname),Ea()("#editstudent-surname").val(t.surname),Ea()("#editstudent-email").val(t.email),Ea()("#editstudent-title").val(t.title)}Ea()(window).resize((function(){Ea()(document).width()<=660&&"Search"===Ea()("#search-form input").val()?Ea()("#search-form input").val("Search for resources"):Ea()(document).width()>660&&"Search for resources"===Ea()("#search-form input").val()&&Ea()("#search-form input").val("Click to search for resources")})),Ea()(document).ready((function(){Ea()(window).resize()}));var Ol,Ml,Al=!1;function Pl(){Al&&(Ea()("#sidemenu").animate({left:"-280"},350),Al=!1)}function Rl(t){for(var e="",n=0;n<t.length;n++)n>=1&&n<t.length-1&&(e+=", "),n>=1&&n==t.length-1&&(e+=" and "),e+=t[n];return e}function Ll(t,e){var n=Ea()("#alg-quickexpr").algebraicInput("latex");e?tinyMCE.activeEditor.execCommand("mceInsertContent",!1,"[m]"+n.replaceAll("<"," < ")+"[/m]"):(t.focus(),t.val(t.val()+"[m]"+n.replaceAll("<"," < ")+"[/m]")),(0,Ia.k)(),Ea().modal.close()}function Nl(t){if(-1===t||null==t)return"#ddd";t=1*Math.max(0,t-10);var e=Math.floor(t);return Fl(e,.9,.9)}Ea()(document).ready((function(){Ea()("#mainmenu-button").click((function(){Al?Pl():Al||(Sl(),Ea()("#sidemenu").animate({left:"0"},350),Al=!0),Ea()(window).resize()})),Ea()("#account-submenu-notifications a").last().addClass("last")})),Ea()(window).resize((function(){Ea()("#sidemenu").outerHeight(Ea()(window).height()-Ea()("#top-bar").outerHeight())})),Ea()(document).click((function(t){var e=Ea()(t.target);e.closest("#sidemenu").length||e.closest("#mainmenu-button").length||!Ea()("#sidemenu").is(":visible")||Pl()})),jQuery.fn.dfmTextarea=function(t,e){var n=Ea()(this);Ta().init({selector:"#"+n.attr("id"),menubar:!1,theme_advanced_resizing:!0,theme_advanced_resizing_use_cookie:!1,height:200,toolbar:!1,statusbar:!1,plugins:"paste",paste_data_images:!0,images_upload_url:"/api/questions/image",setup:function(n){n.on("keydown",(function(t){if(84==t.keyCode&&t.altKey&&gl("<h2>Insert a table</h2><label>Num Cols</label><input name='cols'><br><label>Num Rows</label><input name='rows'><br><br><input type='checkbox' name='addrow' checked> Add Header Row<br><input type='checkbox' name='addcol'> Add Header Col",[{label:"+Add",action:function(){var t="";if(Ea()("input[name=addrow]").is(":checked")){t="<tr>",Ea()("input[name=addcol]").is(":checked")&&(t+="<th style='min-width:20px'></th>");for(var e=0;e<Ea()("input[name=cols]").val();e++)t+="<th style='min-width:20px'></th>";t+="</tr>"}var n="";for(e=0;e<Ea()("input[name=rows]").val();e++){n+="<tr>",Ea()("input[name=addcol]").is(":checked")&&(n+="<th></th>");for(var i=0;i<Ea()("input[name=cols]").val();i++)n+="<td></td>";n+="</tr>"}tinyMCE.activeEditor.execCommand("mceInsertContent",!1,"<table><thead>"+t+"</thead><tbody>"+n+"</tbody></table>")}}]),(187==t.keyCode||61==t.keyCode)&&t.altKey){var e=Ea()(this);gl("Press the Return key when done or click the button below.<br><br><span id='alg-quickexpr' name='alg-quickexpr' style='width:200px;padding:10px'></span>",[{label:"Insert",action:function(){Ll(e,!0)}}],!0),(0,Ia.V)(Ea()("#alg-quickexpr")),Ea()("#alg-quickexpr").algebraicInput("handlers",{enter:function(){Ll(e,!0)}}),Ea()("#alg-quickexpr").algebraicInput("focus")}})),n.addShortcut("alt+m","Maths Formula","mathsinsert"),"onChange"==t&&n.on("change",e)}})},jQuery.fn.dfmInputWithInsertableMaths=function(){var t=Ea()(this);t.keydown((function(e){187!=e.keyCode&&77!=e.keyCode&&61!=e.keyCode||!e.altKey||(gl("Press the Return key when done or click the button below.<br><br><span id='alg-quickexpr' name='alg-quickexpr' style='width:200px;padding:10px'></span>",[{label:"Insert",action:function(){Ll(t,!1)}}],!0),(0,Ia.V)(Ea()("#alg-quickexpr")),Ea()("#alg-quickexpr").algebraicInput("handlers",{enter:function(){Ll(t,!1)}}),Ea()("#alg-quickexpr").algebraicInput("focus"))}))},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)},jQuery.fn.dfmWaitingInput=function(t,e){var n=Ea()(this);n.on("input",(function(){"function"==typeof e&&e(),n.data("timerId")&&clearTimeout(n.data("timerId"));var i=setTimeout((function(){t(),n.removeData("timerId")}),500);n.data("timerId",i)}))},jQuery.fn.dfmTabs=function(t,e){var n=Ea()(this);if("selectTab"==t)(i=n.data("panelContainer")).children("div.dfm_TabsWindow").children().hide(),i.children("div").children("div[id='"+e+"']").show(),n.children("ul").children("li").removeClass("selected"),n.children("div").children("ul").children("li").removeClass("selected"),n.children("ul").children("li").children("a[href='#"+e+"']").parent().addClass("selected"),n.children("div").children("ul").children("li").children("a[href='#"+e+"']").parent().addClass("selected"),n.data("listener")&&n.data("listener")();else{if("getTab"==t)return n.find("li.selected").find("a").attr("href").substr(1);if("setListener"==t)n.data("listener",e);else{n.addClass("dfm_Tabs");var i=n;t&&"string"!=typeof t&&(i=t),n.data("panelContainer",i),i.children("div").wrapAll("<div class='dfm_TabsWrapper'/>"),i.children("div").children().hide(),i.children("div").addClass("dfm_TabsWindow");var r=n.children("ul").children("li").children("a").first().attr("href").substring(1);n.children("ul").children("li").children("a").each((function(){Ea()(this).click((function(t){t.preventDefault(),n.dfmTabs("selectTab",Ea()(this).attr("href").substring(1))}))})),n.children("ul").addClass("dfm_TabsUL"),n.dfmTabs("selectTab",r)}}},jQuery.fn.dfmLevelBar=function(t,e){var n=Ea()(this);if("giveColour"!=t)if(e){if("val"==t){Ml&&(clearInterval(Ml),Ml=void 0),n.next(".dfm-levelbar-levelup").remove();var i=n.data("oldVal");e!=i&&(n.find(".selected").removeClass("selected"),setTimeout((function(){n.children(":nth-child("+e+")").addClass("selected"),setTimeout((function(){e>i&&(n.after("<span class='dfm-levelbar-levelup'>Level Up!</span>"),n.next().fadeToggle(),Ml=setInterval((function(){n.next().fadeToggle()}),1e3))}),500)}),800)),n.data("oldVal",e)}}else{t||(t=parseInt(n.html())),n.empty(),n.addClass("dfm-levelbar");for(var r=1;r<=4;r++)n.append("<span"+(r==t?" class='selected'":"")+">"+r+"</span>"),r==t&&n.data("oldVal",r)}else n.addClass("colour")},jQuery.fn.dfmAccuracyBar=function(t){var e=null,n=Ea()(this);if(""!==Ea()(this).html()&&(t=Ea()(this).html()),t.indexOf("/")>0){var i=t.split("/");e=100*parseFloat(i[0])/parseFloat(i[1])}else e=parseFloat(t),n.html(Math.round(e)+"%");n.addClass("dfm-accuracybar"),n.css("background-color",Nl(e))};var Fl=function(t,e,n){var i,r,s=[];if(0===e)i=[n,n,n];else switch(s=[n*(1-e),n*(1-e*((t/=60)-(r=Math.floor(t)))),n*(1-e*(1-(t-r)))],r){case 0:i=[n,s[2],s[0]];break;case 1:i=[s[1],n,s[0]];break;case 2:i=[s[0],n,s[2]];break;case 3:i=[s[0],s[1],n];break;case 4:i=[s[2],s[0],n];break;default:i=[n,s[0],s[1]]}return"#"+Ea().map(i,(function(t){return("0"+Math.round(255*t).toString(16)).slice(-2)})).join("")};function ql(t,e){if(-1==e||null==e||null==e||0==e)return"#ddd";var n=100*t/e;n=1*Math.max(0,n-10);var i=Math.floor(n);return Fl(i,.9,.9)}function jl(t){if(!t||0==t)return"-";var e=[[60,"seconds",1],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"Yesterday","Tomorrow"],[604800,"days",86400],[1209600,"Last week","Next week"],[2419200,"weeks",604800],[4838400,"Last month","Next month"],[29030400,"months",2419200],[58060800,"Last year","Next year"],[290304e4,"years",29030400],[580608e4,"Last century","Next century"],[580608e5,"centuries",290304e4]],n=(new Date).getTime()/1e3-t,i="ago",r=1;if(0==n)return"Just now";n<0&&(n=Math.abs(n),i="from now",r=2);for(var s,o=0;s=e[o++];)if(n<s[0])return"string"==typeof s[2]?s[r]:Math.floor(n/s[2])+" "+s[1]+" "+i;return t}function $l(t){Ea().ajax({url:"/api/class/get_school_classes?repeatUserClassGroups=true",context:document.body,dataType:"json",success:function(e,n,i){var r=e.classes;t.data("classes",r),Ea().ajax({url:"/util-studentsearch.php?uids="+t.val(),context:document.body,dataType:"json",success:function(e,n,i){t.data("selection",e.students),Wl(t,t.next())},error:function(t,e,n){Ka("There was an error retrieving these students:<br><br><strong>"+t.responseText+"</strong>")}})},error:function(t,e,n){Ka("There was an error retrieving the class list:<br><br><strong>"+t.responseText+"</strong>")}})}function Hl(t){var e=Ea()("#studentclass-selector-class").val(),n=Ea()("#studentclass-selector-search").val(),i="/util-studentsearch.php";if(e)i+="?cid="+e+"&include=1"+(Xa.user&&Xa.user.schoolid?"&sid="+Xa.user.schoolid:"");else{if(!n)return;i+="?search="+n,Ea()("#studentclass-selector-class").val("")}console.log(i),Ea().ajax({url:i,context:document.body,dataType:"json",success:function(e,n,i){Ea()(".studentclass-alldiv").show(),Ea()("#studentclass-selector-results").empty(),Ea()("input[name=studentclass-selectall]").prop("checked",!1),Ea().each(e.students,(function(e,n){Ea()("#studentclass-selector-results").append("<li><input type='checkbox' id='studentclass-selector-checkbox-"+n.id+"' name='studentclass-selector-checkbox' value='"+n.id+"'> <label for='studentclass-selector-checkbox-"+n.id+"'>"+n.surname+", "+n.firstname+(n.ctext?" "+n.ctext:"")+"</label></li>"),Ea()("#studentclass-selector-results").children().last().find("input").data("student",n),Ea()("#studentclass-selector-results").children().last().find("input").change((function(){Ea()(this).prop("checked")?function(t,e){e.data("classes");var n=e.data("selection");(function(t,e){for(var n=0;n<e.length;n++)if(e[n].id==t.id)return!0;return!1})(t,n)||n.push(t),Wl(e,Ea()("#studentclass-selector-selection"))}(n,t):Bl(n,t),0==Ea()("#studentclass-selector-results input[type=checkbox]:not(:checked)").length?Ea()("#studentclass-selectall").prop("checked",!0):Ea()("#studentclass-selectall").prop("checked",!1)})),function(t,e){for(var n=0;n<e.length;n++)if(e[n].id==t)return!0;return!1}(n.id,t.data("selection"))&&(Ea()("#studentclass-selector-results").children().last().find("input").prop("checked",!0),0==Ea()("#studentclass-selector-results input[type=checkbox]:not(:checked)").length&&Ea()("#studentclass-selectall").prop("checked",!0))}))},error:function(t,e,n){Ka("There was an error when searching for students:<br><br><strong>"+t.responseText+"</strong>")}})}function zl(t){if(0==t.classes.length&&t.ctext)return t.surname+", "+t.firstname+" "+t.ctext;if(0==t.classes.length)return t.surname+", "+t.firstname;var e=[];return Ea().each(t.classes,(function(t,n){e.push(n.name)})),t.surname+", "+t.firstname+" ("+e.join(",")+")"}function Bl(t,e){e.data("classes");for(var n=e.data("selection"),i=[],r=0;r<n.length;r++)n[r].id!=t.id&&i.push(n[r]);n=i,e.data("selection",n),Wl(e,Ea()("#studentclass-selector-selection"))}function Wl(t,e){var n=t.data("selection"),i=t.data("classes");if("UL"===e.prop("tagName")){if(0==n.length)return Ea()(".studentclass-selector-B > p").show(),void e.empty();Ea()(".studentclass-selector-B > p").hide()}else if(0==n.length)return void t.next().html("<span>Click to Select</span>");var r=[],s=[];Ea().each(n,(function(t,e){e.cid||Ea().each(e.classes,(function(t,e){-1==Ea().inArray(e.id,r)&&r.push(e.id)}))})),Ea().each(r,(function(t,e){var r=0;Ea().each(n,(function(t,n){n.cid||Ea().each(n.classes,(function(t,n){n.id==e&&r++}))})),r==function(t,e){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n].count}(i,e)&&s.push(e)}));var o=[];Ea().each(s,(function(t,e){Ea().each(n,(function(t,n){n.cid||Ea().each(n.classes,(function(t,i){if(i.id==e)return o.push(n.id),!1}))}))})),e.empty(),Ea().each(s,(function(n,r){var s=function(t,e){for(var n=0;n<t.length;n++)if(t[n].id==e)return t[n]}(i,r);"UL"===e.prop("tagName")?(e.append("<li id='studentclass-selection-c"+r+"'>All of "+s.name+" ("+s.count+") <a href='#'>&times;</a></li>"),Ea()("#studentclass-selection-c"+r+" a").click((function(){!function(t,e){e.data("classes");for(var n=e.data("selection"),i=[],r=0;r<n.length;r++){var s=!1;Ea().each(n[r].classes,(function(e,n){n.id==t.id&&(s=!0)})),s||i.push(n[r])}n=i,e.data("selection",n),Wl(e,Ea()("#studentclass-selector-selection"))}(s,t)}))):e.append("<span id='studentclass-selection-c"+r+"'>All of "+s.name+" ("+s.count+")</span>")})),t.data("fullclasses",s);for(var a=0;a<n.length;a++)-1==Ea().inArray(n[a].id,o)&&("UL"===e.prop("tagName")?(e.append("<li id='studentclass-selection-"+n[a].id+"'>"+zl(n[a])+" <a href='#'>&times;</a></li>"),Ea()("#studentclass-selection-"+n[a].id+" a").data("student",n[a]),Ea()("#studentclass-selection-"+n[a].id+" a").click((function(){Bl(Ea()(this).data("student"),t)}))):e.append("<span id='studentclass-selection-"+n[a].id+"'>"+zl(n[a])+"</span>"))}function Ul(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function Ql(t,e){return(+(Math.round(+(t+"e"+e))+"e"+-e)).toFixed(e)}jQuery.fn.dfmKSMeter=function(t,e){var n=Ea()(this);Ea()(this).html(""),Ea()(this).addClass("dfmKSMeter");for(var i=1;i<=10;i++)Ea()(this).append("<span id='"+i+"' "+(i<=t?"class='filled'":"")+"></span>");5==t&&6==e?Ea()(this).append("<label>Skill complete!</label>"):9==t&&10==e&&Ea()(this).append("<label>Master level acquired</label>"),(5==t&&6==e||9==t&&10==e)&&(Ea()(this).find("label").fadeIn(),setInterval((function(){n.find("label").fadeToggle()}),1e3)),Ea()(this).find("#6").addClass("complete"),Ea()(this).find("#10").addClass("master"),e&&setTimeout((function(){n.find("#"+e).addClass("filled")}),400)},jQuery.fn.dfmMultiAccuracyBar=function(t){var e=Ea()(this);if(""!=Ea()(this).html()){t=Ea()(this).html()?Ea()(this).html().split(","):[-1,-1,-1,-1,-1];for(var n=0;n<=4;n++)t[n]=parseFloat(t[n])}for(e.addClass("dfm-multiaccuracybar"),e.empty(),e.data("overall")&&e.append("<span class='head overall-head' style='width:40px'></span>"),n=1;n<=4;n++)e.append("<span class='head'>Lvl"+n+"</span>");for(e.append("<br>"),n=e.data("overall")?0:1;n<=4;n++){var i=-1==t[n]||null==t[n]||null==t[n]?"-":Math.round(t[n])+"%";if(e.data("numcompleted")){var r=0;if(e.data("numcompleted")[n]>0&&(r=Math.round(t[n]/100*e.data("numcompleted")[n])),0==n&&!t[0]){r=0;for(var s=1;s<=4;s++)r+=Math.round(t[s]/100*e.data("numcompleted")[s])}i=r+"/"+(e.data("max")?e.data("max")[n]:e.data("numcompleted")[n])}0==n?e.append("<span class='overall-accuracy' style='width:40px;font-size:15px'>"+i+"</span>"):e.append("<span>"+i+"</span>"),e.children().last().css("background-color",Nl(t[n])),e.data("numcompleted")&&0==e.data("numcompleted")[n]&&e.children().last().css("background-color","#ddd")}e.data("overall")&&e.css("width","166px")},jQuery.fn.dfmAccuracyBarNew=function(t){"string"==typeof t.numCompleted&&(t.numCompleted=parseInt(t.numCompleted)),"string"==typeof t.numCorrect&&(t.numCorrect=parseInt(t.numCorrect)),"number"==typeof t.numCompleted&&(t.numCompleted=[t.numCompleted]),"number"==typeof t.numCorrect&&(t.numCorrect=[t.numCorrect]);var e=Ea()(this),n=t.numCompleted.length>1;if(e.addClass(n?"dfm-multiaccuracybar":"dfm-accuracybar"),e.empty(),n){var i=t.numCompleted[0]>0&&0==t.numCompleted[1]&&0==t.numCompleted[2]&&0==t.numCompleted[3]&&0==t.numCompleted[4];if(e.append("<span class='head overall-head' style='width:40px'></span>"),!i)for(var r=1;r<=4;r++)e.append("<span class='head'>Lvl"+r+"</span>");for(e.append("<br>"),r=0;r<=(i?0:4);r++){var s="-";-1!=t.numCompleted[r]&&null!=t.numCompleted[r]&&null!=t.numCompleted[r]&&(s=t.isPercentage?0==t.numCompleted[r]?"-":Math.round(100*t.numCorrect[r]/t.numCompleted[r])+"%":t.numCorrect[r]+"/"+t.numCompleted[r]),0==r?e.append("<span class='overall-accuracy' style='width:40px;font-size:15px'>"+s+"</span>"):e.append("<span>"+s+"</span>"),e.children().last().css("background-color",ql(t.numCorrect[r],t.repressColour?0:t.numCompleted[r]))}e.css("width","166px")}else s="-",-1!=t.numCompleted[r]&&null!=t.numCompleted[0]&&null!=t.numCompleted[0]&&(s=t.isPercentage?0==t.numCompleted[0]?"-":Math.round(100*t.numCorrect[0]/t.numCompleted[0])+"%":t.numCorrect[0]+"/"+t.numCompleted[0]),e.html(s),e.css("background-color",ql(t.numCorrect[0],t.repressColour?0:t.numCompleted[0]))},jQuery.fn.dfmPointsBar=function(t,e,n){var i=100;n&&(i=parseFloat(n));var r=Ea()(this);if(e||"val"==t){if("val"==t){r.find(".added").width("0%"),r.find(".subtracted").width("0%");var s=r.data("oldValue"),o=e-s;o>0?r.find(".added").animate({width:o+"%"},{duration:1e3,step:function(t,e){r.children().last().width(r.width()*(t+s)/r.data("max"))},complete:function(){r.find(".main").animate({width:e+"%"},{duration:1e3,step:function(t,n){var i=String(Math.round(t));r.children().first().children().html(i),r.find(".added").width(r.width()*(e-t)/r.data("max")),r.children().last().children().html(i)},complete:function(){r.data("oldValue",e)}})}}):o<0&&r.find(".main").animate({width:e+"%"},{duration:1e3,step:function(t,e){r.find(".subtracted").width(r.width()*(s-t)/r.data("max"))},complete:function(){r.find(".subtracted").animate({width:"0%"},{duration:1e3,step:function(t,n){var i=String(Math.round(t+e));r.children().first().children().html(i),r.children().last().children().html(i),r.children().last().width(r.width()*(t+e)/r.data("max"))},complete:function(){r.data("oldValue",e)}})}})}}else r.addClass("dfm-pointsbar"),null==t&&(t=parseFloat(r.html())),r.empty(),r.append("<span class='dfm-pointsbar-textblack'><span>"+Math.round(t)+"</span></span>"),r.append("<span class='dfm-pointsbar-filled'><span class='main'></span><span class='added'></span><span class='subtracted'></span></span>"),r.append("<span class='dfm-pointsbar-textwhite'><span>"+Math.round(t)+"</span></span>"),r.children().first().children("span").width(r.width()),r.children().first().next().width(r.width()),r.find(".main").width(r.width()*t/i),r.children().last().children("span").width(r.width()),r.children().last().width(r.width()*t/i),r.data("oldValue",t),r.data("max",i)},jQuery.fn.dfmProgressLineGraph=function(t){var e=Ea()(this);"redraw"===t||(t&&t.reverse(),e.addClass("dfmProgressLineGraph"),e.data("past",t)),function(t){var e=t.data("past"),n=t[0].getContext("2d"),i=t.width(),r=t.height();n.fillStyle="#fff",n.fillRect(0,0,i,r);var s=[25,50,75];n.beginPath(),n.strokeStyle="rgb(181,230,29)",n.setLineDash([3,5]),n.lineWidth=1;for(var o=1;o<=3;o++)n.moveTo(0,r*(s[o-1]/100)),n.lineTo(i,r*(s[o-1]/100));for(n.stroke(),n.fillStyle="rgb(181,230,29)",n.font="20px Helvetica",o=1;o<=4;o++)n.fillText(o,5,6+(4.5-o)*r/4);if(n.lineWidth=2,n.setLineDash([1,0]),n.strokeStyle="#555",n.beginPath(),e)for(o=0;o<e.length;o++)0==o?n.moveTo(25,Math.min(r-2,r*(1-e[o].points/100))):n.lineTo(25+(i-25)*o/19,Math.min(r-2,r*(1-e[o].points/100)));n.stroke()}(e)},jQuery.fn.dfmStudentClassSelector=function(t,e){var n=Ea()(this);if("val"==t)return n.val(e),void $l(n);t&&n.data("options",t),n.data("selection",[]),n.after("<div class='dfmStudentClassSelector'></div>"),d=n.next(),d.append("<span>Click to select</span>"),n.val()&&$l(n),d.click((function(){gl("<div class='studentclass-selector-container'><div class='studentclass-selector-A'><input type='text' id='studentclass-selector-search' autocomplete='off' style='width:110px!important'> <select id='studentclass-selector-class' style='max-width:250px'><option value=''>Select class</option></select><br><div class='studentclass-alldiv'><input type='checkbox' name='studentclass-selectall' id='studentclass-selectall'> <label for='studentclass-selectall'>Select All</label></div><ul id='studentclass-selector-results'></ul></div><div class='studentclass-selector-B'><h1>Current Selection</h1><p>No current selection.</p><ul id='studentclass-selector-selection'></ul></div></div>",[{label:"OK",action:function(){!function(t){console.log("[StudentSelector] UpdateFinalSelection");var e=[];Ea().each(t.data("selection"),(function(t,n){e.push(n.id)})),t.val(e.join(",")),Wl(t,t.next()),t.data("options")&&t.data("options").callback&&t.data("options").callback()}(n)}}],!0),Ea()("#message-"+Xa.messageCounter).css("min-width","755px"),Ea()("input[name=studentclass-selectall]").change((function(){var t=Ea()(this).prop("checked");Ea()("#studentclass-selector-results input").each((function(){Ea()(this).prop("checked",t),Ea()(this).change()}))})),Ea()("#studentclass-selector-search").keydown((function(){Ea()("#studentclass-selector-class").val(""),Ea()(".studentclass-alldiv").hide(),Ea()("#studentclass-selector-results").empty()})),Ea().ajax({url:"/api/class/get_school_classes?repeatUserClassGroups=true",context:document.body,dataType:"json",success:function(t,e,i){var r,s=t.classes;n.data("classes",s),Ea().each(s,(function(t,e){if(e.isOwnClass){var n=e.name;e.initials&&(n+=" ("+e.initials+")"),Ea()("#studentclass-selector-class").append("<option value='"+e.id+"'>"+n+"</option>"),r=!0}})),r&&Ea()("#studentclass-selector-class").append("<option value=''>--------------</option>"),Ea().each(s,(function(t,e){var n=e.name;e.initials&&(n+=" ("+e.initials+")"),Ea()("#studentclass-selector-class").append("<option value='"+e.id+"'>"+n+"</option>")})),1==s.length&&"My Children"==s[0].name&&Ea()("#studentclass-selector-class").val(s[0].id).change()},error:function(t,e,n){Ka("There was an error retrieving the class list:<br><br><strong>"+t.responseText+"</strong>")}}),Ea()("#studentclass-selector-class").change((function(){Ea()(this).val(),Ea()("#studentclass-selector-search").val(""),Hl(n)})),Ea()("#studentclass-selector-search").dfmWaitingInput((function(){Hl(n)})),Wl(n,Ea()("#studentclass-selector-selection"))}))},Array.prototype.unique=function(){for(var t=this.concat(),e=0;e<t.length;++e)for(var n=e+1;n<t.length;++n)t[e]===t[n]&&t.splice(n--,1);return t};function Yl(t,e,n){gl("Describe the error that you found. <strong>Please note that this facility is for reporting mistakes on questions and will be reviewed by a member of the Dr Frost Learning staff.</strong><br><br><textarea name='message' style='width: 430px;height: 140px'></textarea>",[{label:"Send",action:function(){var i=Ea()("textarea[name=message]").val();if(""!==Ea().trim(i)){var r={qid:t,uid:Xa.user.uid,message:i};e&&(r.aaid=e,r.qnum=n),Ea().ajax({url:"/api/questions/reporterror/",type:"POST",contentType:"application/json",processData:!1,cache:!1,data:JSON.stringify(r),dataType:"json",success:function(t){Ka("Thanks. You'll be emailed after your report has been checked.")},error:function(t,e,n){var i,r;if("QUESTION_NOT_FOUND"===(null===(i=t.responseJSON)||void 0===i?void 0:i.message))Ka("The question this error is being reported on could not be found.");else if("QUESTION_LOCKED"===(null===(r=t.responseJSON)||void 0===r?void 0:r.message))Ka("Someone previously reported an error on this question and it was dealt with. We are confident this is the correct answer. If you need further assistance please contact <a href='mailto:support@drfrost.org'>support@drfrost.org</a>.");else{var s="An error occurred";Ka(s+=t.responseText?": <strong>".concat(t.responseText,"</strong>"):".")}}})}else Ka("No detail provided.")}}],!0)}function Vl(t){var e=t.data("currentDir");gl("<div id='dfm-directoryselector-current'><span></span></div><ul id='dfm-directoryselector-children'></ul>",[],!0),Ea()(".modal").css("padding","0px"),Ea()(".modal > p").hide(),Gl(t,e||1)}function Gl(t,e){t.data("currentDir",e);var n="/api/worksheets/directory/"+t.data("currentDir");console.log(n),Ea()("#worksheet-fileexplorer ul").empty(),Ea().ajax({url:n,type:"GET",context:document.body,dataType:"json",success:function(n,i,r){console.log(JSON.stringify(n)),Ea()("#dfm-directoryselector-children").empty(),Ea().each(n._children,(function(e,n){var i="directory"===n.type?"<img src='../homework/img/directory-small.png'>":"",r="db"+(n.wdid?n.wdid:n.wid);Ea()("#dfm-directoryselector-children").append("<li id='wf"+e+"-"+r+"'>"+i+n.name+"</li>"),Ea()("#wf"+e+"-"+r).data("file",n),Ea()("#wf"+e+"-"+r).click((function(){console.log("Clicked on worksheet file "+r),"directory"===Ea()(this).data("file").type?Gl(t,Ea()(this).data("file").wdid):function(t,e,n){Za(),t.data("callback")&&t.data("callback")({id:e,title:n})}(t,Ea()(this).data("file").wid,Ea()(this).data("file").name)}))})),0==n._children.length&&Ea()("#dfm-directoryselector-children").append("There are no further subdirectories. Navigate upwards above.</span>"),Ea()("#dfm-directoryselector-current span").empty(),console.log("Updating ancestors..."),Ea().each(n._ancestors,(function(e,n){Ea()("#dfm-directoryselector-current span").append("/ <a id='anc-"+n.wdid+"' href='#'>"+("ROOT"==n.name?"DFM":n.name)+"</a>"),Ea()("#anc-"+n.wdid).data("wdid",n),Ea()("#anc-"+n.wdid).click((function(){Gl(t,Ea()(this).data("wdid").wdid)}))})),Ea()("#dfm-directoryselector-current span").append("/ <a id='anc-"+e+"' href='#'>"+("ROOT"==n.name?"DFM":n.name)+"</a>"),Ea()("#anc-"+e).data("wdid",e),Ea()("#anc-"+e).click((function(){Gl(t,Ea()(this).data("wdid"))}))},error:function(t,e,n){Ea().modal.close(),Ka("There was an error retrieving this directory:<br><br><strong>"+t.responseText+"</strong>")}})}function Xl(t){var e=[];gl("<div id='dfm-directoryselector-current'><span></span></div><ul id='dfm-directoryselector-children'></ul>",[{label:"Use Selected (".concat(e.length,")"),action:function(){return t(e)}}],!0);var n={},i=function(t){Ea()("#dfm-directoryselector-current > span").empty(),t.forEach((function(e,n){var i=e.id,l=e.label,c=e.type;Ea()("#dfm-directoryselector-current > span").append("<strong style='padding: 0px 4px;'>/</strong>"),Ea()("#dfm-directoryselector-current > span").append("<a disabled id='".concat(i,"'>").concat(l,"</a>")),Ea()("#".concat(i)).on("click",(function(){if(n!==t.length-1)switch(c){case"COURSE":s(i);break;case"MODULE":o(i);break;case"UNIT":a(i);break;case"ROOT":r()}}))}))},r=function(){var t=Ya(Ba().mark((function t(){var e,r,o;return Ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Da.y_)({user:null==Xa?void 0:Xa.user});case 2:e=t.sent,r=e.flatMap((function(t){var e=t.courses;return void 0===e?[]:e})),i(o=[{id:"root",label:"Courses",type:"ROOT"}]),Ea()("#dfm-directoryselector-children").empty(),null==r||r.forEach((function(t){var e,i=t.authorName,r=t.coid,a=t.name,l=t.sid,c="course-".concat(r),u=[].concat(o,[{id:c,label:a,type:"COURSE"}]);n[c]=Ua(Ua({},t),{},{path:u}),Ea()("#dfm-directoryselector-children").append("<li id='".concat(c,"'>").concat(l===(null==Xa||null===(e=Xa.user)||void 0===e?void 0:e.sid)?"":"[".concat(i,"] ")).concat(a,"</li>")),xa().typeset(),Ea()("#".concat(c)).on("click",(function(){s(c)}))})),r&&0!==r.length||Ea()("#dfm-directoryselector-children").append("<span style='color: grey;'>No courses found<span>");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Ya(Ba().mark((function t(e){var r,s,a,l,c,u,d;return Ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n[e],s=r.coid,a=r.path,i(l=void 0===a?[]:a),t.next=4,(0,Da.E0)(s);case 4:c=t.sent,u=c.modules,d=void 0===u?[]:u,Ea()("#dfm-directoryselector-children").empty(),null==d||d.forEach((function(t){var e=t.cmid,i=t.name,r=(t.units,"module-".concat(e)),s=[].concat($a(l),[{id:r,label:i,type:"MODULE"}]);n[r]=Ua(Ua({},t),{},{path:s}),Ea()("#dfm-directoryselector-children").append("<li id='".concat(r,"'>").concat(i,"</li>")),xa().typeset(),Ea()("#".concat(r)).on("click",(function(){o(r)}))})),d&&0!==d.length||Ea()("#dfm-directoryselector-children").append("<span style='color: grey;'>No modules found<span>");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(t){var e=n[t],r=e.path,s=void 0===r?[]:r,o=e.units,l=void 0===o?[]:o;i(s),Ea()("#dfm-directoryselector-children").empty(),null==l||l.forEach((function(t){var e=t.cuid,i=t.name,r="unit-".concat(e),o=[].concat($a(s),[{id:r,label:i,type:"UNIT"}]);n[r]=Ua(Ua({},t),{},{path:o}),Ea()("#dfm-directoryselector-children").append("<li id='".concat(r,"'>").concat(i,"</li>")),xa().typeset(),Ea()("#".concat(r)).on("click",(function(){a(r)}))})),l&&0!==l.length||Ea()("#dfm-directoryselector-children").append("<span style='color: grey;'>No units found<span>")},a=function(){var t=Ya(Ba().mark((function t(r){var s,o,a,l;return Ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n[r],o=s.cuid,a=s.path,i(void 0===a?[]:a),t.next=4,(0,Oa.o)(o);case 4:l=t.sent,Ea()("#dfm-directoryselector-children").empty(),null==l||l.forEach((function(t){var n=t.rid,i=t.title,r=e.some((function(t){return t===n}));Ea()("#dfm-directoryselector-children").append("<li id='resource-".concat(n,"'><label><input ").concat(r?"checked":""," type='checkbox'>").concat(i,"</label></li>")),xa().typeset(),Ea()("#resource-".concat(n)).on("change",(function(i){e=i.target.checked?[].concat($a(e),[t]):e.filter((function(t){return t.rid!==n})),Ea()(".dialog-buttons button").html("Use Selected (".concat(e.length,")"))}))})),l&&0!==l.length||Ea()("#dfm-directoryselector-children").append("<span style='color: grey;'>No downloadables found<span>");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();r()}function Kl(t){var e="";t.title&&(e+="<h2>"+t.title+"</h2>"),t.description&&(e+="<p>"+t.description+"</p>");var n=t.multiple?"checkbox":"radio";return t.multiple&&(e+="<input type='"+n+"' value='selectall' id='dfmSelector-selectall'><label for='dfmSelector-selectall'>Select All</label><br>"),e+="<ul class='dfmSelector'>",console.log("ITEMS: ######### "+JSON.stringify(t.items)),Ea().each(t.items,(function(t,i){e+="<li><input type='"+n+"' name='dfmSelector-option' value=\""+i.val+"\" id='dfmSelector-item-"+t+"'><label for='dfmSelector-item-"+t+"'>"+i.text+"</label></li>"})),gl(e+="</ul>",[{label:"Continue",action:function(){var e=[];Ea()(".dfmSelector input:checked").each((function(){e.push(Ea()(this).val())})),t.callback(t.multiple?e:e[0])}}]),Ea()("#dfmSelector-selectall").click((function(){var t=Ea()("#dfmSelector-selectall").is(":checked");Ea()(".dfmSelector input").prop("checked",t)})),Ea()(".dfmSelector input").change((function(){var t=Ea()(".dfmSelector input:checked").length==Ea()(".dfmSelector input").length;Ea()("#dfmSelector-selectall").prop("checked",t)})),t.startSelectAll&&Ea()("#dfmSelector-selectall").click(),!1}Ea()(window).resize((function(){(Ea()(window).width()<1140&&Ea()(window).width()>875||Ea()(window).width()<=875)&&Ea()(window).width()})),jQuery.fn.dfmDesmosLine=function(t){if(0!=Ea()(this).length){var e=t.answerData,n=t.answer;console.log("Answer: "+JSON.stringify(n));var i=Ea()(this)[0],r=null==e.showGrid||e.showGrid,s=(t=r?{expressions:!1,lockViewport:!0,settingsMenu:!1,showGrid:!0,xAxisNumbers:r&&"barchart"!=e.mode,yAxisNumbers:r,xAxisArrowMode:"POSITIVE",yAxisArrowMode:"POSITIVE",xAxisLabel:e.xaxis.label?e.xaxis.label:"x",yAxisLabel:e.yaxis?e.yaxis.label?e.yaxis.label:"y":"",xAxisStep:e.xaxis.step?parseFloat(e.xaxis.step):1,yAxisStep:e.yaxis?e.yaxis.step?parseFloat(e.yaxis.step):5:1,border:!1,trace:!1}:{expressions:!1,lockViewport:!0,settingsMenu:!1,showGrid:!1,showXAxis:!1,showYAxis:!1,xAxisNumbers:!1,yAxisNumbers:!1,border:!1,trace:!1},Desmos.GraphingCalculator(i,t));if(Ea()(this).data("calculator",s),e.nonanswershapes)for(var o=0;o<e.nonanswershapes.length;o++)e.nonanswershapes[o].id="extra"+o,s.setExpression(e.nonanswershapes[o]);if("multiline"==e.mode&&(e.mode="geometric",e.closed=!1),!0===e.closed?e.submode="polygon":!1===e.closed&&(e.submode="multiline"),e.submode||(e.submode="polygon"),"geometric"===e.mode){if("polygon"==e.submode){var a=[];for(o=0;o<n.length;o++)a.push("\\left("+n[o].x+", "+n[o].y+"\\right)");s.setExpression({id:"fillC",latex:"\\operatorname{polygon}\\left("+a.join(", ")+"\\right)",color:"black",lines:!1,points:!1,fill:!0,fillOpacity:.5})}if("points"!=e.submode)for(o=1;o<e.numpoints;o++)s.setExpression({id:"line"+o,latex:"\\left("+n[o-1].x+","+n[o-1].y+"\\right), \\left("+n[o].x+","+n[o].y+"\\right)",color:"black",lines:!0,points:!1});if("polygon"==e.submode&&s.setExpression({id:"lineC",latex:"\\left("+n[n.length-1].x+", "+n[n.length-1].y+"\\right), \\left("+n[0].x+", "+n[0].y+"\\right)",color:"black",lines:!0,points:!1}),1==e.numpoints||"points"==e.submode)for(o=1;o<=e.numpoints;o++)s.setExpression({id:"singlePoint"+o,latex:"\\left("+n[o-1].x+", "+n[o-1].y+"\\right)",color:"black",points:!0})}else if("circle"===e.mode)s.setExpression({id:"v1",latex:"a="+n.centre.x,color:"black"}),s.setExpression({id:"v2",latex:"b="+n.centre.y,color:"black"}),s.setExpression({id:"a3",latex:"\\left(x-a\\right)^{2}+\\left(y-b\\right)^{2}="+n.radius+"^2",color:"black"});else if("boxplot"===e.mode)s.setExpression({id:"a1",latex:"y=2.5\\left\\{\\left["+n[0]+","+n[3]+"\\right]\\le x\\le\\left["+n[1]+","+n[4]+"\\right]\\right\\}",color:"black"}),s.setExpression({id:"a2",latex:"x=\\left["+n.join(",")+"\\right]\\left\\{1.5\\le y\\le 3.5\\right\\}",color:"black"}),s.setExpression({id:"a3",latex:"y=\\left[3.5,1.5\\right]\\left\\{"+n[1]+"\\le x\\le "+n[3]+"\\right\\}",color:"black"});else if("barchart"===e.mode){var l=0;for(o=0;o<e.bars.length;o++){e.bars[o].id="extra"+o;var c=!e.bars[o].frequency,u=c?n[l++]:e.bars[o].frequency,d=e.bars[o].color?e.bars[o].color:"blue";c&&!e.bars[o].color&&(d="black");var h=[];h.push("("+(o+.25)+",0)"),h.push("("+(o+.75)+",0)"),h.push("("+(o+.75)+","+u+")"),h.push("("+(o+.25)+","+u+")"),s.setExpression({id:"fillC"+o,latex:"\\operatorname{polygon}\\left("+h.join(", ")+"\\right)",color:d,lines:!1,points:!1,fill:!0,fillOpacity:c?.5:.8}),s.setExpression({id:"label"+o,latex:"("+(o+.5)+",-0.5)",color:d,showLabel:!0,hidden:!0,label:e.bars[o].label})}}else n[0].constructor=={}.constructor?2==n.length?(s.setExpression({id:"a1",latex:"x_1="+n[0].x,color:"#000"}),s.setExpression({id:"a2",latex:"y_1="+n[0].y,color:"#000"}),s.setExpression({id:"b1",latex:"x_2="+n[1].x,color:"#000"}),s.setExpression({id:"b2",latex:"y_2="+n[1].y,color:"#000"}),s.setExpression({id:"a3",latex:"\\left(x_1, y_1\\right)",color:"#000"}),s.setExpression({id:"b3",latex:"\\left(x_2, y_2\\right)",color:"#000"}),s.setExpression({id:"function",latex:"f\\left(x\\right)=ax + b",color:"#000"}),s.setExpression({id:"function1",latex:"a=\\frac{y_{2} - y_{1}}{x_{2} - x_{1}}",color:"#000"}),s.setExpression({id:"function2",latex:"b=\\y_{1} - a \\cdot x_{1}",color:"#000"})):3==n.length?(s.setExpression({id:"a1",latex:"x_1="+n[0].x,color:"#000"}),s.setExpression({id:"a2",latex:"y_1="+n[0].y,color:"#000"}),s.setExpression({id:"b1",latex:"x_2="+n[1].x,color:"#000"}),s.setExpression({id:"b2",latex:"y_2="+n[1].y,color:"#000"}),s.setExpression({id:"c1",latex:"x_3="+n[2].x,color:"#000"}),s.setExpression({id:"c2",latex:"y_3="+n[2].y,color:"#000"}),s.setExpression({id:"a3",latex:"\\left(x_1, y_1\\right)",color:"#000"}),s.setExpression({id:"b3",latex:"\\left(x_2, y_2\\right)",color:"#000"}),s.setExpression({id:"c3",latex:"\\left(x_3, y_3\\right)",color:"#000"}),s.setExpression({id:"function",latex:"f\\left(x\\right)=ax^{2}+bx+c",color:"#000"}),s.setExpression({id:"function1",latex:"A_{1}=-x_{1}^{2}+x_{2}^{2}",color:"#000"}),s.setExpression({id:"function2",latex:"B_{1}=-x_{1}+x_{2}",color:"#000"}),s.setExpression({id:"function3",latex:"D_{1}=-y_{1}+y_{2}",color:"#000"}),s.setExpression({id:"function4",latex:"A_{2}=-x_{2}^{2}+x_{3}^{2}",color:"#000"}),s.setExpression({id:"function5",latex:"B_{2}=-x_{2}+x_{3}",color:"#000"}),s.setExpression({id:"function6",latex:"D_{2}=-y_{2}+y_{3}",color:"#000"}),s.setExpression({id:"function7",latex:"B_{multiplier}=-\\left(\\frac{B_{2}}{B_{1}}\\right)",color:"#000"}),s.setExpression({id:"function8",latex:"A_{3}=B_{multiplier}\\cdot A_{1}+A_{2}",color:"#000"}),s.setExpression({id:"function9",latex:"D_{3}=B_{multiplier}\\cdot D_{1}+D_{2}",color:"#000"}),s.setExpression({id:"function10",latex:"a=\\frac{D_{3}}{A_{3}}",color:"#000"}),s.setExpression({id:"function11",latex:"b=\\frac{D_{1}-A_{1}\\cdot a}{B_{1}}",color:"#000"}),s.setExpression({id:"function12",latex:"c=y_{1}-ax_{1}^{2}-bx_{1}",color:"#000"})):4==n.length&&(s.setExpression({id:"a1",latex:"x_1="+n[0].x,color:"#000"}),s.setExpression({id:"a2",latex:"y_1="+n[0].y,color:"#000"}),s.setExpression({id:"b1",latex:"x_2="+n[1].x,color:"#000"}),s.setExpression({id:"b2",latex:"y_2="+n[1].y,color:"#000"}),n.length>=3&&s.setExpression({id:"c1",latex:"x_3="+n[2].x,color:"#000"}),n.length>=3&&s.setExpression({id:"c2",latex:"y_3="+n[2].y,color:"#000"}),n.length>=4&&s.setExpression({id:"d1",latex:"x_4="+n[3].x,color:"#000"}),n.length>=4&&s.setExpression({id:"d2",latex:"y_4="+n[3].y,color:"#000"}),s.setExpression({id:"a3",latex:"\\left(x_1, y_1\\right)",color:"#000"}),s.setExpression({id:"b3",latex:"\\left(x_2, y_2\\right)",color:"#000"}),s.setExpression({id:"c3",latex:"\\left(x_3, y_3\\right)",color:"#000"}),s.setExpression({id:"d3",latex:"\\left(x_4, y_4\\right)",color:"#000"}),s.setExpression({id:"function2",latex:"a\\left(x\\right)= \\left(x - x_2\\right)\\left(x - x_3\\right)\\left(x - x_4\\right)",hidden:!0}),s.setExpression({id:"function3",latex:"b\\left(x\\right)= \\left(x - x_1\\right)\\left(x - x_3\\right)\\left(x - x_4\\right)",hidden:!0}),s.setExpression({id:"function4",latex:"c\\left(x\\right)= \\left(x - x_1\\right)\\left(x - x_2\\right)\\left(x - x_4\\right)",hidden:!0}),s.setExpression({id:"function5",latex:"d\\left(x\\right)= \\left(x - x_1\\right)\\left(x - x_2\\right)\\left(x - x_3\\right)",hidden:!0}),s.setExpression({id:"function1",latex:"f\\left(x\\right)= \\left( \\left( a\\left(x\\right) \\cdot \\frac{y_1}{a\\left(x_1\\right)} \\right)  + \\left( b\\left(x\\right) \\cdot \\frac{y_2}{b\\left(x_2\\right)} \\right)  + \\left( c\\left(x\\right) \\cdot \\frac{y_3}{c\\left(x_3\\right)} \\right) + d\\left(x\\right) \\cdot \\frac{y_4}{d\\left(x_4\\right)} \\right)  ",color:"#000"})):1==e.order&&2==n.length?s.setExpression({id:"function",latex:"f\\left(x\\right)="+n[0]+"x + "+n[1],color:"#000"}):1==e.order?s.setExpression({id:"function",latex:"x="+n[2],color:"#000"}):2==e.order?s.setExpression({id:"function",latex:"f\\left(x\\right)="+n[0]+"x^2 + "+n[1]+"x + "+n[2],color:"#000"}):3==e.order&&s.setExpression({id:"function",latex:"f\\left(x\\right)="+n[0]+"x^3 + "+n[1]+"x^2 + "+n[2]+"x + "+n[3],color:"#000"});"boxplot"===e.mode?s.setMathBounds({left:parseFloat(e.xaxis.from),right:parseFloat(e.xaxis.to),bottom:-1.3,top:4}):"barchart"===e.mode?s.setMathBounds({left:-.2,right:e.bars.length+.5,bottom:parseFloat(e.yaxis.from),top:parseFloat(e.yaxis.to)}):s.setMathBounds({left:parseFloat(e.xaxis.from),right:parseFloat(e.xaxis.to),bottom:parseFloat(e.yaxis.from),top:parseFloat(e.yaxis.to)})}},jQuery.fn.dfmWorksheetSelector=function(t){console.log("[DFMWorksheetSelector] "+JSON.stringify(t));var e=Ea()(this);if(t&&"update"==t)jc(e);else if(t&&"select"==t)Vl(e);else{var n=t&&t.readOnly;t&&t.callback&&e.data("callback",t.callback),t&&t.default&&e.data("default",t.default),e.after("<span class='dfm-directoryselector'></span>"),e.data("currentDir",1),t&&t.hidden&&e.next().hide(),n||e.next().click((function(){Vl(e)})),e.next().html(t&&t.label?t.label:"Load Worksheet")}},jQuery.fn.dfmEditableText=function(t){var e=Ea()(this);t.callback&&e.data("callback",t.callback),e.after("<input class='dfmEditableText' style='display:none'><button class='dfmEditableText' style='display:none'>Update</button>"),e.addClass("dfmEditableText_clickable");var n=e.next(),i=n.next();e.click((function(t){t.stopPropagation(),e.hide(),n.show().focus(),i.show(),n.val(e.html())})),i.mousedown((function(){var t=Ea()(this).prev().val();e.html(t).show(),Ea()(this).prev().hide(),Ea()(this).hide(),e.data("callback")&&e.data("callback")(t,e)})),n.blur((function(){e.show(),i.hide(),n.hide()})),n.on("keypress",(function(t){13==t.which&&i.mousedown()}))},jQuery.fn.dfmClassSelector=function(t,e){var n=Ea()(this);if(n){if("updateValue"==t){n.next().empty();var i=n.val(),r=[];return i&&(r=i.split(",")),Ea().each(r,(function(t,e){var i,r,s,o=(i=e,r=classNameList,Ea().each(r,(function(t,e){if(e.id==i)return s=e.name,!1})),s);n.next().append("<span>"+o+"</span>")})),void(0==r.length&&n.next().append("<span>NONE</span>"))}n.data("options",t),n.after("<div class='dfmClassSelector'></div>"),d=n.next(),n.dfmClassSelector("updateValue"),d.click((function(){Kl({items:Ea().map(classNameList,(function(t){return{val:t.id,text:t.name}})),multiple:!0,callback:function(t){n.next().empty(),n.val(t.join(",")),n.dfmClassSelector("updateValue"),n.data("options").callback&&n.data("options").callback(t)}}),n.val()&&Ea().each(classNameList,(function(t,e){Ea().inArray(String(e.id),n.val().split(","))>=0&&Ea()("#dfmSelector-item-"+t).prop("checked",!0)}))}))}};var Jl,Zl=-1;function tc(t){for(var e=t.split(","),n=0;n<e.length;n++)"all"==e[n]?e[n]=0:"allexam"==e[n]?e[n]=Zl:"user"==e[n]?e[n]=-2:"me"==e[n]?e[n]=-3:e[n]=Number(e[n]);return e}function ec(t,e){t.data("sid",e.sid),t.val(e.name),t.next().empty().hide(),t.data("options")&&t.data("options").callback&&t.data("options").callback(e)}function nc(t,e,n){t.data("uid",e.id),t.val(e.firstname+" "+e.surname+(e.school?" ("+e.school.name+")":"")),t.next().empty().hide(),t.data("options")&&t.data("options").callback&&n&&t.data("options").callback(e)}function ic(t){Ka("<div id='dfmStudentSelector-tabs'><ul>"+(il()?"":"<li><a href='#dfmStudentSelector-singleclass'>Single Class</a></li>")+(il()?"":"<li><a href='#dfmStudentSelector-multipleclasses'>Multiple Classes</a></li>")+"<li><a href='#dfmStudentSelector-individuals'>Individual(s)</a></li></ul><div id='dfmStudentSelector-singleclass'><select></select></div><div id='dfmStudentSelector-multipleclasses'><ul></ul><div><button>Update</button></div></div><div id='dfmStudentSelector-individuals'><div id='dfmStudentSelector-individuals-container'><div id='dfmStudentSelector-individuals-left'><div id='dfmStudentSelector-individuals-filter'>"+(il()?"":"<select id='dfmStudentSelector-individuals-class'><option value=''>Select a class</option></select>")+"</div><ul></ul></div><div id='dfmStudentSelector-individuals-selection'><h1>Current Selection</h1><ul></ul></div></div><div><button>Update</button></div></div></div>"),Ea()("#message-"+Xa.messageCounter).css("min-width","600px"),Ea()("#dfmStudentSelector-tabs").dfmTabs(),Ea()("#dfmStudentSelector-individuals-selection ul").data("studentselection",{students:{},classes:{}}),console.log("[DATA] "+JSON.stringify(Ea()("#dfmStudentSelector-individuals-selection ul").data("studentselection"))),il()||rc(t,!0),Ea()("#dfmStudentSelector-singleclass select").change((function(){lc(t,{cids:[Number(Ea()(this).val())]}),t.data("options").onChange&&t.data("options").onChange(),Za()})),Ea()("#dfmStudentSelector-multipleclasses button").click((function(){var e=[],n=[];Ea()("#dfmStudentSelector-multipleclasses input[type=checkbox]:checked").each((function(){e.push(Number(Ea()(this).val())),n.push(Ea()(this).parent().text())})),lc(t,{cids:e}),t.data("options").onChange&&t.data("options").onChange(),Za()})),Ea()("#dfmStudentSelector-individuals button").click((function(){var e=Ea()("#dfmStudentSelector-individuals-selection ul").data("studentselection"),n=[],i=[],r=[];Ea().each(e.classes,(function(t,e){n.push(e.cid),r.push(e.name)})),Ea().each(e.students,(function(t,e){i.push(e.uid),r.push(e.firstname+" "+e.surname+" "+e.ctext)})),lc(t,{cids:n,uids:i}),t.data("options").onChange&&t.data("options").onChange(),Za()}));var e=t.val()?JSON.parse(t.val()):{};e.cids&&e.cids.length>1?e.uids&&e.uids.length>0?Ea()("#dfmStudentSelector-tabs").dfmTabs("selectTab","dfmStudentSelector-individuals"):Ea()("#dfmStudentSelector-tabs").dfmTabs("selectTab","dfmStudentSelector-multipleclasses"):e.uids&&e.uids.length>0&&Ea()("#dfmStudentSelector-tabs").dfmTabs("selectTab","dfmStudentSelector-individuals"),t.val()&&(Ea()("#dfmStudentSelector-individuals-selection ul").data("studentselection",t.data("studentselection")),ac()),il()&&sc(),Ea()(window).resize()}function rc(t,e,n){if(console.log("[PopulatingClassList]"),il()){var i=e?Ea()("#dfmStudentSelector-singleclass select"):t.next().find(".dfm_studentSelector_classdropdown");return i.empty(),void i.append("<option value=''>My Children</option>")}var r="/api/class/get_school_classes?repeatUserClassGroups=true"+(t.data("options").includeMulticlassGroups?"&includeMulticlassGroups=1":"");console.log(r),Ea().ajax({url:r,type:"GET",contentType:!1,processData:!1,cache:!1,dataType:"json",success:function(i){var r=i.classes,s=e?Ea()("#dfmStudentSelector-singleclass select"):t.next().find(".dfm_studentSelector_classdropdown"),o=e?Ea()("#dfmStudentSelector-individuals-class"):void 0,a=e?Ea()("#dfmStudentSelector-multipleclasses ul"):void 0;s.empty(),s.append("<option value=''>Select a class</option>"),Ea().each(r,(function(t,e){null==e.cid?s.append("<option disabled value=''>---------</option>"):s.append("<option value='"+e.cid+"'>"+e.name+"</option>"),a&&(e.cid?a.append("<li><label><input type='checkbox' value='"+e.cid+"'>"+e.name+"</label></li>"):a.append("<hr>")),o&&(e.cid?o.append("<option value='"+e.cid+"'>"+e.name+"</option>"):o.append("<option disabled value=''>---------</option>"))})),Ea()("#dfmStudentSelector-multipleclasses ul hr").prevAll().remove(),Ea()("#dfmStudentSelector-multipleclasses ul hr").remove(),t.data("classes",r);var l=t.val()?JSON.parse(t.val()):{};l.cids&&l.cids.length>1&&Ea().each(l.cids,(function(t,e){Ea()("#dfmStudentSelector-multipleclasses input[value="+e+"]").prop("checked",!0)})),Ea()("#dfmStudentSelector-individuals-class").change(sc),n&&n()},error:function(t,e,n){Ka("An error occurred when trying to update the class list: <strong>"+t.responseText+"</strong>")}})}function sc(){Ea().ajax({url:"/api/class/class/"+Ea()("#dfmStudentSelector-individuals-class").val(),type:"GET",contentType:!1,processData:!1,cache:!1,success:function(t){var e=t.classGrouping,n=Ea()("#dfmStudentSelector-individuals-left ul");n.data("class",e),n.empty(),n.append("<li><label><input type='checkbox' id='dfmStudentSelector-individuals-selectall'><strong>Select All</strong></label></li>"),Ea().each(e._students,(function(t,e){n.append("<li><label><input type='checkbox' class='individual-student' id='dfmStudentSelector-individual-"+e.uid+"'>"+e.surname+", "+e.firstname+"</label></li>"),Ea()("#dfmStudentSelector-individual-"+e.uid).data("student",e);var i=Ea()("#dfmStudentSelector-individuals-selection ul").data("studentselection");Ea()("#dfmStudentSelector-individual-"+e.uid).prop("checked",i.students&&i.students[e.uid])})),Ea()("#dfmStudentSelector-individuals-selectall").change((function(){Ea()(".individual-student").prop("checked",Ea()(this).is(":checked")),oc()})),Ea()(".individual-student").change(oc)},error:function(t,e,n){Ka("An error occurred when trying to get this class: <strong>"+t.responseText+"</strong>")}})}function oc(){var t=Ea()(".individual-student").length==Ea()(".individual-student:checked").length;Ea()("#dfmStudentSelector-individuals-selectall").prop("checked",t);var e=Ea()("#dfmStudentSelector-individuals-selection ul").data("studentselection"),n=Ea()("#dfmStudentSelector-individuals-left ul").data("class");if(Ea()(".individual-student").each((function(){var t=Ea()(this).data("student");Ea()(this).is(":checked")?e.students[t.uid]||(e.students[t.uid]=t):delete e.students[t.uid]})),n=Ea()("#dfmStudentSelector-individuals-left ul").data("class")){var i=!0;Ea().each(n._students,(function(t,n){e.students[n.uid]||(i=!1)})),i?(Ea().each(n._students,(function(t,n){delete e.students[n.uid]})),e.classes[n.cid]=n):delete e.classes[n.cid]}ac()}function ac(){var t=Ea()("#dfmStudentSelector-individuals-selection ul"),e=t.data("studentselection");t.empty(),Ea().each(e.classes,(function(e,n){t.append("<li>All of "+n.name+"</li>")})),Ea().each(e.students,(function(e,n){t.append("<li>"+n.surname+", "+n.firstname+" "+n.ctext+"</li>")}))}function lc(t,e){e.cids&&0!=e.cids.length||(e.cids=void 0),e.uids&&0!=e.uids.length||(e.uids=void 0),console.log(JSON.stringify(e)),t.val(JSON.stringify(e)),t.data("options").classesOnly?t.next().find(".dfm_studentSelector_classdropdown").val(e.cids[0]):function(t,e){console.log("[Lookup] "+JSON.stringify(e)),Ea().ajax({url:"/api/user/others/lookupstudents",type:"POST",contentType:!1,processData:!1,cache:!1,data:JSON.stringify(e),dataType:"json",success:function(n){n.studentselection&&Array.isArray(n.studentselection.classes)&&(n.studentselection.classes={}),n.studentselection&&Array.isArray(n.studentselection.students)&&(n.studentselection.students={}),t.data("studentselection",n.studentselection);var i=t.next().find(".dfm_studentSelector_selection"),r=t.next().find(".dfm_studentSelector_studentdropdown");i.hide(),r.hide(),n.memberclass?(r.show(),r.empty().append("<option value=''>MORE OPTIONS</option>"),Ea().each(n.memberclass._students,(function(t,e){r.append("<option value='"+e.uid+"'>"+e.surname+", "+e.firstname+"</option>")})),r.val(e.uids[0])):(i.show(),i.find("label").html(fc(n.label,40)))},error:function(t,e,n){Ka("An error occurred when trying to lookup the student selection label: <strong>"+t.responseText+"</strong>")}})}(t,e)}function cc(t,e){t.empty(),t.data("options",e),t.append("<option value=''>"+t.data("default")+"</option>"),t.append("<option value='-1' disabled>Please select</option>"),Ea().each(e,(function(e,n){Ea()("<option value='".concat(e,"'>").concat(n.label,"</option>")).appendTo(t).attr("disabled",n.disabled)}))}function uc(t,e,n){t.find("a").removeClass("selected"),Ea()("a[href='#"+e+"']").next().length>0&&(e=Ea()("a[href='#"+e+"']").next().find("a").first().attr("href").substr(1)),Ea()("a[href='#"+e+"']").addClass("selected"),t.data("options").panels.children().hide(),Ea()("#"+e).show(),t.data("options").onSelect&&!n&&t.data("options").onSelect(e)}jQuery.fn.dfmExamBoardSelector=function(t,e){var n=Ea()(this);if("val"!=t)"setSkillFilter"!=t?(t&&t.callback&&n.data("callback",t.callback),t&&t.label&&n.data("label",t.label),t&&t.showAllOptions&&n.data("showAllOptions",t.showAllOptions),n.after("<span class='dfmExamBoardSelector"+(t&&t.light?"-light":"")+"'></span>"),t&&t.hidden&&n.next().hide(),n.next().click((function(){return function(t){t.next().addClass("isLoading");var e=null!=t.data("skill");Ea().ajax({url:"/util-getexamboardselection.php"+(t.data("skill")?"?skill="+t.data("skill"):""),context:document.body,dataType:"json",success:function(n,i,r){console.log(JSON.stringify(n));var s,o,a="";a+="<div id='dfmExamBoardSelector-wrapper'>",a+="<h3>Filter by question source</h3>",a+="<ul id='dfmExamBoardSelector-ul'>",a+="<li class='dfmExamBoardSelector-type'><label><input id='ddexam' type='radio' name='dfmExamBoardSelector-selection' value='"+Zl+"'>All exam board questions</label></li>",a+="<li class='dfmExamBoardSelector-type'><label><input id='ddschool' type='radio' name='dfmExamBoardSelector-selection' value='-4'>My schools questions</label></li>",t.data("showAllOptions")&&(a+="<div class='dfmExamBoardSelector-separator'></div>",a+="<li class='dfmExamBoardSelector-type'><label><input id='ddall' type='radio' name='dfmExamBoardSelector-selection' value='0'>Any Author</label></li>",a+="<li class='dfmExamBoardSelector-type'><label><input id='dduser' type='radio' name='dfmExamBoardSelector-selection' value='-2'>User Contributed</label></li>",a+="<li class='dfmExamBoardSelector-type'><label><input id='ddme' type='radio' name='dfmExamBoardSelector-selection' value='-3'>Created by Me</label></li>"),a+="<li class='dfmExamBoardSelector-type'><input type='radio' name='dfmExamBoardSelector-selection' value='board' id='ddboard'><label for='ddboard'>Specific exam board course(s)</label></li>",a+="</ul>",a+="<div id='examBoardCourseSelection' style='display:none;'>",a+="<div class='dfmExamBoardSelector-separator'></div>",a+="<ul></ul>",a+="</div>",gl(a+="</div>",[{label:"Filter to Selected",action:function(){var e=[];Ea()("#dfmExamBoardSelector-wrapper input:checked").each((function(){"board"!=Ea()(this).val()&&e.push(Number(Ea()(this).val()))})),e[0]<0&&(e.length=1),0===e.length&&e.push(Zl),t.next().removeClass("isLoading"),t.dfmExamBoardSelector("val",e),t.data("callback")&&t.data("callback")(e)}}],!0),Ea().each(n,(function(t,n){var i=n.coid;n.boardname!=s&&Ea()("#examBoardCourseSelection ul").append("<li><h2>"+n.boardname+"</h2></li>"),s=n.boardname,Ea()("#examBoardCourseSelection ul").append("<li class='dfmExamBoardSelector-course'><label><input type='checkbox' name='dfmExamBoardSelector-selection' value='"+i+"' id='ebs"+n.coid+"'> "+n.coursename+"<br><small>"+n.count+" questions"+(e?" for this skill":"")+"</small></label></li>")})),t.val()&&((o=-1==t.val().indexOf("[")?tc(t.val()):JSON.parse(t.val()))&&o[0]>=1?(Ea()("#ddboard").prop("checked",!0),Ea().each(o,(function(t,e){Ea()("#examBoardCourseSelection ul input[value="+e+"]").prop("checked",!0)})),Ea()("#examBoardCourseSelection").css("display","block")):o&&o[0]<0?Ea()("input[name='dfmExamBoardSelector-selection'][value='"+o[0]+"']").prop("checked",!0):Ea()("input[name='dfmExamBoardSelector-selection'][value='"+Zl+"']").prop("checked",!0)),Ea()("input[name='dfmExamBoardSelector-selection']").change((function(){var t=Ea()('input[name="dfmExamBoardSelector-selection"]:checked',"#dfmExamBoardSelector-wrapper").val();Ea()("#examBoardCourseSelection").css("display","board"===t?"block":"none")})),t.next().removeClass("isLoading")},error:function(t,e,n){Ea().modal.close(),Ka("There was an error retrieving the exam board selection:<br><br><strong>"+t.responseText+"</strong>")}})}(n),!1})),n.next().html(t&&t.label?t.label:"Filter by Exam Board")):n.data("skill",e);else if("string"==typeof e&&(e=tc(e)),n.val(JSON.stringify(e)),0===e[0])n.next().html("<span>Any Author</span>");else if(e[0]===Zl)n.next().html("<span>All exam questions</span>");else if(-2===e[0])n.next().html("<span>User Contributed</span>");else if(-3===e[0])n.next().html("<span>My Questions</span>");else if(-4===e[0])n.next().html("<span>My schools questions</span>");else if(e)console.log("[CourseNameLookup] coids="+e),n.next().addClass("isLoading"),Ea().ajax({url:"/api/course/labels",context:document.body,dataType:"json",type:"POST",data:JSON.stringify({coids:e}),success:function(e,i,r){console.log(" --\x3e "+JSON.stringify(e)),n.next().html("<p>Showing questions from:<p>"),Ea().each(e.courses,(function(t,e){n.next().append("<span>"+e.schoolname+"&rarr;"+e.name+"</span>")})),0==e.courses.length&&(n.next().html(t&&t.label?t.label:"Filter by Exam Board"),n.val("")),n.next().removeClass("isLoading")},error:function(t,e,n){Ea().modal.close(),Ka("There was an error retrieving the exam board selection:<br><br><strong>"+t.responseText+"</strong>")}});else if(void 0===e)throw new Error("Attempted to set exam board to null value. Use empty string instead.")},jQuery.fn.dfmSchoolSelector=function(t,e){var n=Ea()(this);e||n.data("options",t),n.after("<ul class='dfmSchoolSelector_results'></ul>"),n.attr("autocomplete","off"),n.next().hide(),n.keyup((function(){console.log(n.val()),""!=n.val()&&(Jl&&clearTimeout(Jl),Jl=setTimeout((function(){!function(t){var e="/api/school/search/"+t.val();Ea().ajax({url:e,context:document.body,dataType:"json",success:function(e,n,i){var r=e.schools;t.next().html(""),Ea().each(r,(function(e,n){t.next().append("<li><a href='#' id='school-"+n.sid+"'><h1>"+(n.thumb?"<img src='"+n.thumb+"'>":"<img src='/images/blank.png'>")+n.name+"</h1><h2>"+n.town+"</h2></a></li>"),Ea()("#school-"+n.sid).click((function(){ec(t,Ea()(this).data("school"))})),Ea()("#school-"+n.sid).data("school",n)})),t.next().show(),t.next().offset({left:t.offset().left,top:t.next().offset().top}),t.next().outerWidth(t.outerWidth())}})}(n),Jl=void 0}),200))})),"val"==t&&function(t,e){Ea().ajax({url:"/api/school?sid="+e,context:document.body,dataType:"json",success:function(e){ec(t,e)}})}(n,e)},jQuery.fn.dfmUserSelector=function(t,e){console.log("[dfmUserSelector] options="+JSON.stringify(t)+" options2="+JSON.stringify(e));var n=Ea()(this);e||(n.data("options",t),n.after("<ul class='dfmSchoolSelector_results' style='display:none'></ul>"),n.attr("autocomplete","off"),n.next().hide(),n.keyup((function(){console.log(n.val()),""!=n.val()?(Jl&&clearTimeout(Jl),Jl=setTimeout((function(){!function(t,e){if(t.val()){var n="/utility-homeworksearch.php?restrict=users&query="+t.val();console.log(n),Ea().ajax({url:n,context:document.body,dataType:"json",success:function(e,n,i){t.next().html(""),Ea().each(e.users,(function(e,n){t.next().append("<li><a href='#' id='user-"+n.id+"'><h1>"+n.firstname+" "+n.surname+"</h1>"+(n.school?"<h2>"+n.school.name+"</h2>":"")+"</a></li>"),Ea()("#user-"+n.id).click((function(){nc(t,Ea()(this).data("user"),!0)})),Ea()("#user-"+n.id).data("user",n)})),t.next().show(),t.next().offset({left:t.offset().left,top:t.offset().top+t.outerHeight()})}})}}(n),Jl=void 0}),200)):n.next().hide()}))),"val"==t&&function(t,e){var n="/api/user/other/"+e;console.log(n),Ea().ajax({url:n,type:"GET",context:document.body,dataType:"json",success:function(e,n,i){t.next().html(""),nc(t,e,!1)}})}(n,e)},jQuery.fn.dfmChoiceSelector=function(t,e){var n=Ea()(this);if("updateValue"==t){n.next().empty();var i=n.val(),r=[];return i&&(r=i.split(",")),Ea().each(r,(function(t,e){var i,r,s,o=(i=e,r=n.data("options").choices,Ea().each(r,(function(t,e){if(e.val==i)return s=e.label,!1})),s);n.next().append("<span>"+o+"</span>")})),void(0==r.length&&n.next().append("<span>NONE</span>"))}if("getOptions"===t)return n.data("options");n.data("options",t);var s=t.disabled;n.after("<div class='dfmTeacherSelector ".concat(s?"dfmTeacherSelector--disabled":"","'></div>"));var o=n.next();n.dfmChoiceSelector("updateValue"),s?o.off("click"):o.on("click",(function(){var t="<ul class='dfmTeacherListDialog'>";n.data("options").choices&&Ea().each(n.data("options").choices,(function(e,n){t+="<li><input type='checkbox' name='teacher-checkbox-"+n.val+"' id='teacher-checkbox-"+n.val+"' value='"+n.val+"'><label for='teacher-checkbox-"+n.val+"'>"+n.label+"</label></li>"})),t+="</ul>",gl(n.data("options").message+"<br><br>"+t,[{label:"OK",action:function(){var t=[];n.next().html(""),Ea()(".dfmTeacherListDialog input[type=checkbox]:checked").each((function(){t.push(Ea()(this).val())})),n.val(t.join(",")),n.dfmChoiceSelector("updateValue"),n.data("options").onChange&&n.data("options").onChange()}}],!0);var e=n.val(),i=[];""!=e&&(i=e.split(",")),Ea().each(i,(function(t,e){Ea()("input[name=teacher-checkbox-"+e+"]").attr("checked","checked")}))}))},jQuery.fn.studentSelector=function(t,e){console.log("[StudentSelector] initialise");var n=Ea()(this);if("setValue"==t)e.uids||(e.uids=void 0),e.cids||(e.cids=void 0),n.val(JSON.stringify(e)),lc(n,e);else if("reset"===t)n.next().val("");else if("reload"===t)n.data("options").classesOnly&&rc(n,!1,e);else if(n.data("options",t),n.after("<div class='dfm_studentSelector'><select class='dfm_studentSelector_classdropdown' style='display:none'></select><select class='dfm_studentSelector_studentdropdown' style='display:none'></select><span class='dfm_studentSelector_selection' style='display:none'></span></div>"),n.data("options").classesOnly){var i=n.next().find(".dfm_studentSelector_classdropdown");i.html("<option value=''>Select a class</option>").show(),rc(n,!1,n.data("options").onLoad),i.change((function(t){if(t.target.value){var e=isNaN(t.target.value)?t.target.value:Number(t.target.value);n.val(JSON.stringify({cids:[e]}))}else n.val("");n.data("options").onChange&&n.data("options").onChange()}))}else{var r=n.next().find(".dfm_studentSelector_selection");r.show().html("<label>"+(n.data("options").defaultLabel?n.data("options").defaultLabel:"Click to choose")+"</label><span><img src='/images/chevron_down.svg'></span>"),r.click((function(){ic(n)})),n.next().find(".dfm_studentSelector_studentdropdown").change((function(){Ea()(this).val()?n.val(JSON.stringify({uids:[Number(Ea()(this).val())]})):ic(n),n.data("options").onChange&&n.data("options").onChange()}))}},jQuery.fn.actionMenu=function(t,e){var n=Ea()(this);"setOptions"==t?cc(n,e):(n.addClass("dfm_actionMenu"),t.highlightOnActive&&n.addClass("dfm_actionMenu_highlight"),n.data("default",t.default),t.options&&cc(n,t.options),n.change((function(){(0,n.data("options")[Number(Ea()(this).val())].action)(),n.val("")})))},jQuery.fn.dfmSideMenu=function(t,e,n){var i=Ea()(this);"selectTab"==t?uc(i,e,n):(i.addClass("dfmSideMenu"),i.data("options",t),t.panels.children().hide(),i.find("a").click((function(){var t=Ea()(this).attr("href").substr(1);uc(i,t)})))};var dc=[20,50,85];function hc(t){if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function pc(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function fc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80;if(!t||"string"!=typeof t)return t;if(t.length<=e)return t;for(var n=t.substr(0,e),i=n.length;(n.match(/\|\|/g)||[]).length%2==1&&i<t.length;)n+=t[i++];return n+"..."}function mc(t){var e=Math.round(t/60);return t>0&&t<30&&(e=1),e+" min"+(1==e?"":"s")}function gc(t){if(t<60)return t+" secs";var e=Math.round(t/60);return t>0&&t<30&&(e=1),e+" min"+(1==e?"":"s")}jQuery.fn.dfmMasterySlidingBar=function(t,e){var n=Ea()(this);if(!t)return n.addClass("dfmMasterySlidingBar_container"),n.empty(),void n.append("<div class='dfmMasterySlidingBar_bar'><div class='dfmMasterySlidingBar_filling'></div><div class='dfmMasterySlidingBar_threshold1'></div><div class='dfmMasterySlidingBar_threshold2'></div><div class='dfmMasterySlidingBar_threshold3'></div></div><span class='dfmMasterySlidingBar_change'></span>");if("setValue"==t){n.data("oldValue");for(var i=0;i<=3;i++)n.find(".dfmMasterySlidingBar_filling").removeClass("dfmMasterySlidingBar_filling"+i);var r=0;if(e>=dc[2]?r=3:e>=dc[1]?r=2:e>=dc[0]&&(r=1),n.find(".dfmMasterySlidingBar_filling").addClass("dfmMasterySlidingBar_filling"+r).css("width",e+"%"),void 0!==n.data("oldValue")){var s=Math.round(e-n.data("oldValue"));for(s>=0&&(s="+"+s),i=0;i<=3;i++)n.removeClass("dfmMasterySlidingBar_change"+i);n.addClass("dfmMasterySlidingBar_change"+r),n.find(".dfmMasterySlidingBar_change").html(s)}n.data("oldValue",e)}return n},jQuery.fn.dfmMasteryBar=function(){Ea()(this);var t=Number(Ea()(this).html());Ea()(this).empty(),Ea()(this).html("<div></div><div></div><div></div>"),Ea()(this).addClass("dfmMasteryBar");for(var e=dc.length-1;e>=0;e--)if(t>=dc[e]){for(var n=0;n<=e;n++)Ea()(this).children().eq(2-n).addClass("mastery-"+(e+1));return}},window.dfmTree=function(t,e,n){calculator.setExpression({id:"a1",latex:"\\left(4, 4\\right), \\left(0, 0\\right), \\left(4, -4\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a2",latex:"\\left(13, 5.5\\right), \\left(9, 4\\right), \\left(13, 2.5\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a3",latex:"\\left(13, -2.5\\right), \\left(9, -4\\right), \\left(13, -5.5\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"b1",latex:"\\left(6.5, 4\\right)",color:"black",hidden:!0,label:t[0],showLabel:!0}),calculator.setExpression({id:"b2",latex:"\\left(6.5, -4\\right)",color:"black",hidden:!0,label:t[1],showLabel:!0}),calculator.setExpression({id:"b3",latex:"\\left(15.5, 5.5\\right)",color:"black",hidden:!0,label:t[2],showLabel:!0}),calculator.setExpression({id:"b4",latex:"\\left(15.5, 2.5\\right)",color:"black",hidden:!0,label:t[3],showLabel:!0}),calculator.setExpression({id:"b5",latex:"\\left(15.5, -2.5\\right)",color:"black",hidden:!0,label:t[4],showLabel:!0}),calculator.setExpression({id:"b6",latex:"\\left(15.5, -5.5\\right)",color:"black",hidden:!0,label:t[5],showLabel:!0}),calculator.setExpression({id:"c1",latex:"\\left(2, 3.44\\right)",color:n,hidden:!0,label:"`"+e[0]+"`",showLabel:!0}),calculator.setExpression({id:"c2",latex:"\\left(2, -3.44\\right)",color:n,hidden:!0,label:"`"+e[1]+"`",showLabel:!0}),calculator.setExpression({id:"c3",latex:"\\left(11, "+(4.75+1.44)+"\\right)",color:n,hidden:!0,label:"`"+e[2]+"`",showLabel:!0}),calculator.setExpression({id:"c4",latex:"\\left(11, 1.81\\right)",color:n,hidden:!0,label:"`"+e[3]+"`",showLabel:!0}),calculator.setExpression({id:"c5",latex:"\\left(11, -1.81\\right)",color:n,hidden:!0,label:"`"+e[4]+"`",showLabel:!0}),calculator.setExpression({id:"c6",latex:"\\left(11, "+(-4.75-1.44)+"\\right)",color:n,hidden:!0,label:"`"+e[5]+"`",showLabel:!0})},window.dfmTreeNew=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(console.log("[DFMTree]"),1==i){var r=18/350*10;calculator.setExpression({id:"a1",latex:"\\frac{(x-0)^2}{3}+\\frac{(y-0)^2}{1.5}=1",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a2",latex:"\\left(1, 1\\right), \\left(7, 5\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a3",latex:"\\left(1, -1\\right), \\left(7, -5\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a4",latex:"\\frac{(x-8.75)^2}{3}+\\frac{(y-5)^2}{1.5}=1",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a5",latex:"\\frac{(x-8.75)^2}{3}+\\frac{(y+5)^2}{1.5}=1",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a6",latex:"\\left(9.75, 6\\right), \\left(17, 8\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a7",latex:"\\left(9.75, 4\\right), \\left(17, 2\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a8",latex:"\\left(9.75, -6\\right), \\left(17, -8\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a9",latex:"\\left(9.75, -4\\right), \\left(17, -2\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a10",latex:"\\frac{(x-18.75)^2}{3}+\\frac{(y-8)^2}{1.5}=1",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a11",latex:"\\frac{(x-18.75)^2}{3}+\\frac{(y-2)^2}{1.5}=1",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a12",latex:"\\frac{(x-18.75)^2}{3}+\\frac{(y+8)^2}{1.5}=1",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a13",latex:"\\frac{(x-18.75)^2}{3}+\\frac{(y+2)^2}{1.5}=1",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"b1",latex:"\\left("+(4-2*r)+", 4\\right)",color:"black",hidden:!0,label:t[0],showLabel:!0}),calculator.setExpression({id:"b2",latex:"\\left("+(4-2*r)+", -4\\right)",color:"black",hidden:!0,label:t[1],showLabel:!0}),calculator.setExpression({id:"b3",latex:"\\left("+(13-2*r)+", 8\\right)",color:"black",hidden:!0,label:t[2],showLabel:!0}),calculator.setExpression({id:"b4",latex:"\\left("+(13-3*r)+", 2\\right)",color:"black",hidden:!0,label:t[3],showLabel:!0}),calculator.setExpression({id:"b5",latex:"\\left("+(13-2*r)+", -2\\right)",color:"black",hidden:!0,label:t[2],showLabel:!0}),calculator.setExpression({id:"b6",latex:"\\left("+(13-3*r)+", -8\\right)",color:"black",hidden:!0,label:t[3],showLabel:!0}),calculator.setExpression({id:"c1",latex:"\\left(0, 0\\right)",color:n,hidden:!0,label:"`"+e[0]+"`",showLabel:!0}),calculator.setExpression({id:"c2",latex:"\\left(8.75, 5\\right)",color:n,hidden:!0,label:"`"+e[1]+"`",showLabel:!0}),calculator.setExpression({id:"c3",latex:"\\left(8.75, -5\\right)",color:n,hidden:!0,label:"`"+e[4]+"`",showLabel:!0}),calculator.setExpression({id:"c4",latex:"\\left(18.75, 8\\right)",color:n,hidden:!0,label:"`"+e[2]+"`",showLabel:!0}),calculator.setExpression({id:"c5",latex:"\\left(18.75, 2\\right)",color:n,hidden:!0,label:"`"+e[3]+"`",showLabel:!0}),calculator.setExpression({id:"c6",latex:"\\left(18.75, -2\\right)",color:n,hidden:!0,label:"`"+e[5]+"`",showLabel:!0}),calculator.setExpression({id:"c7",latex:"\\left(18.75, -8\\right)",color:n,hidden:!0,label:"`"+e[6]+"`",showLabel:!0})}else calculator.setExpression({id:"a1",latex:"\\left(4, 4\\right), \\left(0, 0\\right), \\left(4, -4\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a2",latex:"\\left(13, 5.5\\right), \\left(9, 4\\right), \\left(13, 2.5\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"a3",latex:"\\left(13, -2.5\\right), \\left(9, -4\\right), \\left(13, -5.5\\right)",color:"black",lines:!0,points:!1}),calculator.setExpression({id:"b1",latex:"\\left(6.5, 4\\right)",color:"black",hidden:!0,label:t[0],showLabel:!0}),calculator.setExpression({id:"b2",latex:"\\left(6.5, -4\\right)",color:"black",hidden:!0,label:t[1],showLabel:!0}),calculator.setExpression({id:"b3",latex:"\\left(15.5, 5.5\\right)",color:"black",hidden:!0,label:t[2],showLabel:!0}),calculator.setExpression({id:"b4",latex:"\\left(15.5, 2.5\\right)",color:"black",hidden:!0,label:t[3],showLabel:!0}),calculator.setExpression({id:"b5",latex:"\\left(15.5, -2.5\\right)",color:"black",hidden:!0,label:t[4],showLabel:!0}),calculator.setExpression({id:"b6",latex:"\\left(15.5, -5.5\\right)",color:"black",hidden:!0,label:t[5],showLabel:!0}),calculator.setExpression({id:"c1",latex:"\\left(2, 3.44\\right)",color:n,hidden:!0,label:"`"+e[0]+"`",showLabel:!0}),calculator.setExpression({id:"c2",latex:"\\left(2, -3.44\\right)",color:n,hidden:!0,label:"`"+e[1]+"`",showLabel:!0}),calculator.setExpression({id:"c3",latex:"\\left(11, "+(4.75+1.44)+"\\right)",color:n,hidden:!0,label:"`"+e[2]+"`",showLabel:!0}),calculator.setExpression({id:"c4",latex:"\\left(11, 1.81\\right)",color:n,hidden:!0,label:"`"+e[3]+"`",showLabel:!0}),calculator.setExpression({id:"c5",latex:"\\left(11, -1.81\\right)",color:n,hidden:!0,label:"`"+e[4]+"`",showLabel:!0}),calculator.setExpression({id:"c6",latex:"\\left(11, "+(-4.75-1.44)+"\\right)",color:n,hidden:!0,label:"`"+e[5]+"`",showLabel:!0})};var vc,yc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];function _c(t,e){var n=new Date(1e3*t),i=yc[n.getMonth()]+" "+n.getDate()+hc(n.getDate());if(e){var r=(n.getMinutes()<10?"0":"")+n.getMinutes();i+=" "+(n.getHours()>12?n.getHours()-12:n.getHours())+":"+r+(n.getHours()>=12?"pm":"am")}return i}function bc(t){var e=[];e.push({label:t.isPractice?"Start":"Set",action:function(){return kc(t)}}),t.task._worksheet&&t.task._worksheet.title&&(t.task._worksheet.name=t.task._worksheet.title),gl("<h1>"+(t.task.aid?"Edit Task/Recipients":t.isPractice?"Start Practice":"Set a Task")+"</h1>"+(t.notice?"<p class='notice-light'>"+t.notice+"</p>":"")+"<form><div id='setaswork'><div id='setaswork-mainoptions'></div><div id='setaswork-otheroptions'><h3>Options</h3></div></div></form>",e),Ea()(".modal").css("width","auto"),Ea()(".modal").css("max-width","none"),Ea()(".blocker").css("text-wrap","nowrap"),Ea()(".modal").css("text-wrap","wrap");var n=Ea()("#setaswork-mainoptions"),i=Ea()("#setaswork-otheroptions");t.isPractice?(n.append("<input type='hidden' id='task-recipients'>"),Ea()("#task-recipients").val(JSON.stringify(t.task.recipients))):(n.append("<div><label>Set task for:</label><input type='hidden' id='task-recipients'></div>"),Ea()("#task-recipients").studentSelector({}),t.task.recipients&&Ea()("#task-recipients").studentSelector("setValue",t.task.recipients));var r=t.task&&t.task.wid;if(r){var s=t.task._worksheet?t.task._worksheet.name:"-";n.append("<div><label class='main-label'>Worksheet:</label><span style='display:inline-block;max-width:230px;margin-bottom:10px'>"+s+"</span></div>"),n.append("<input type='hidden' id='task-wid' value='"+t.task.wid+"'>")}else{var o,a;n.append("<input type='hidden' id='task-type' value='"+t.task.type+"'>"),t.task.cdata||(t.task.cdata={}),t.task.subskills&&(t.task.cdata.ssids=[],Ea().each(t.task.subskills,(function(e,n){t.task.cdata.ssids.push(n.ssid),n.type,n.type}))),t.task.skills&&(t.task.cdata.skids=[],Ea().each(t.task.skills,(function(e,n){t.task.cdata.skids.push(n.skid)}))),n.append('\n      <div style="margin-bottom:5px">\n        <label class="main-label">Skills:</label>\n        <input type="hidden" id="task-skillselection">\n      </div>\n    '),Ea()("#task-skillselection").dfmSkillSelector("setValue",{skids:t.task.cdata.skids,ssids:t.task.cdata.ssids},!0),Ea()("#task-skillselection").after('\n        <span>(As selected)</span>\n        <a class="help-button" id="skills-label">?</a>\n      '),Ea()("#skills-label").click((function(){Ka("Editing the selected skills for this task is temporarily disabled. You will need to generate a new task to change the list.",!0)}));var l=(null===(o=t.task)||void 0===o||null===(o=o.skills)||void 0===o?void 0:o.length)>0,c=(null===(a=t.task)||void 0===a||null===(a=a.subskills)||void 0===a?void 0:a.length)>0&&t.task.subskills.every((function(t){return"e"===t.type}));!l&&c&&(n.append("<div id='task-row-difficulty'><label class='main-label'>Difficulty:</label><select id='task-difficulty'><option value='1to3'>1-3</option><option value='1to4'>1-4</option><option value='1to2'>1-2</option><option value='2to3'>2-3</option><option value='2to4'>2-4</option><option value='3to4'>3-4</option><option value='1'>1 only</option><option value='2'>2 only</option><option value='3'>3 only</option><option value='4'>4 only</option></select> <a id='h-difficulty' class='help-button'>?</a></div>"),Ea()("#h-difficulty").click((function(){Ka("Exam question difficulty varies between 1 and 4. Roughly speaking:<ul><li><strong>Difficulty 1</strong> questions are the most basic kind of a skill, often with simpler numbers/expressions and intended to test basic understanding.</li><li><strong>Difficulty 2</strong> are typical easier/medium standard exam questions.</li><li><strong>Difficulty 3</strong> involves a degree of problem solving, potentially multiple steps and potentially multiple skills.<li><strong>Difficulty 4</strong> questions are beyond usual exam difficulty with a high degree of problem solving, intended to be 'extension' questions.</li></ul>",!0)})),t.task.cdata.difficulty&&Ea()("#task-difficulty").val(t.task.cdata.difficulty),n.append("<div id='task-row-courses' style='margin-top:7px'><label class='main-label'>Author:</label><input type='hidden' id='task-courses'></div>"),Ea()("#task-courses").dfmExamBoardSelector({light:!0}),t.task.cdata.courses?Ea()("#task-courses").dfmExamBoardSelector("val",t.task.cdata.courses):Ea()("#task-courses").dfmExamBoardSelector("val",[-1]))}if(!t.isPractice){var u;n.append("<div style='margin-top: 20px'><label>Custom Label:</label><input type='text' placeholder='(optional)' id='task-label'> <a class='help-button' id='h-label'>?</a></div>"),Ea()("#h-label").click((function(){Ka("This will appear in the homework list for students, and also as a table heading in homework results. If not specified, we will create a label for you.",!0)})),t.task.label&&Ea()("#task-label").val(t.task.label),t.task.duedate?u=new Date(1e3*t.task.duedate):(u=new Date).setDate(u.getDate()+(5==u.getDay()?3:1));var d=u.getFullYear(),h=(u.getMonth()+1<=9?"0":"")+(u.getMonth()+1),p=u.getDate()+"/"+h+"/"+d;n.append("<div style='margin-top:10px'><label style='margin-bottom:0px'>Due:</label><label style='margin-bottom:2px'><input type='checkbox' id='task-noduedate'> No Due Date</label></div><div style='margin-bottom:15px'><input type='text' id='task-duedate' autocomplete='off' style='margin-left:150px;padding:5px;width:100px' value='"+p+"'><select id='task-duetime' style='padding:5px'></select></div>");for(var f=0;f<24;f++){var m=f;f<10&&(m="0"+m),Ea()("#task-duetime").append("<option value='"+m+":00:00'>"+m+":00</option>"),f>=8&&f<=16&&(Ea()("#task-duetime").append("<option value='"+m+":10:00'>"+m+":10</option>"),Ea()("#task-duetime").append("<option value='"+m+":20:00'>"+m+":20</option>")),f>=6&&f<=20&&Ea()("#task-duetime").append("<option value='"+m+":30:00'"+(9==f?" selected":"")+">"+m+":30</option>"),f>=8&&f<=16&&(Ea()("#task-duetime").append("<option value='"+m+":40:00'>"+m+":40</option>"),Ea()("#task-duetime").append("<option value='"+m+":50:00'>"+m+":50</option>"))}for(t.task.duedate&&Ea()("#task-duetime").val(wc(u.getHours())+":"+wc(u.getMinutes())+":00"),Ea()("#task-noduedate").change((function(){Ea()(this).is(":checked")?(Ea()("#task-duedate").hide(),Ea()("#task-duetime").hide()):(Ea()("#task-duedate").show(),Ea()("#task-duetime").show())})),t.task.duedate||Ea()("#task-noduedate").click(),Ea()("#task-duedate").datepicker({dateFormat:"dd/mm/yy"}),t.task.setdate?u=new Date(1e3*t.task.setdate):(u=new Date).setDate(u.getDate()+(5==u.getDay()?3:1)),d=u.getFullYear(),h=(u.getMonth()+1<=9?"0":"")+(u.getMonth()+1),p=u.getDate()+"/"+h+"/"+d,n.append("<div id='settask-schedule-row'><label>Set:</label><select id='task-schedule' style='padding:6px'><option value='0'>Immediately<option value='1'>at a specified time</select></div>"),n.append("<div style='margin-bottom:15px'><input type='text' id='task-scheduledate' style='padding:6px;margin-left:150px;width:100px' value='"+p+"'><select id='task-scheduletime' style='padding:6px'></select></div>"),f=0;f<24;f++)m=f,f<10&&(m="0"+m),Ea()("#task-scheduletime").append("<option value='"+m+":00:00'>"+m+":00"),f>=8&&f<=16&&(Ea()("#task-scheduletime").append("<option value='"+m+":10:00'>"+m+":10</option>"),Ea()("#task-scheduletime").append("<option value='"+m+":20:00'>"+m+":20</option>")),f>=6&&f<=20&&Ea()("#task-scheduletime").append("<option value='"+m+":30:00'"+(15==f?" selected":"")+">"+m+":30"),f>=8&&f<=16&&(Ea()("#task-scheduletime").append("<option value='"+m+":40:00'>"+m+":40</option>"),Ea()("#task-scheduletime").append("<option value='"+m+":50:00'>"+m+":50</option>"));Ea()("#task-scheduledate").datepicker({dateFormat:"dd/mm/yy"}),Ea()("#task-schedule").change((function(){0==Ea()(this).val()?(Ea()("#task-scheduledate").hide(),Ea()("#task-scheduletime").hide()):(Ea()("#task-scheduledate").show(),Ea()("#task-scheduletime").show())})),Ea()("#task-schedule").change(),t.task.setdate&&(t.task.setdate<(new Date).getTime()/1e3?Ea()("#settask-schedule-row").remove():(Ea()("#task-schedule").val("1").change(),Ea()("#task-scheduletime").val(wc(u.getHours())+":"+wc(u.getMinutes())+":00")))}if(r?t.isPractice||(n.append("<div id='task-type-container'></div>"),Ea()("#task-type-container").append("<div><label class='task-type-option'><input type='radio' name='task-type' id='task-type-t' value='t'><h2>Set as <strong>a Homework/Classwork</strong></h2><h3>Students get instant feedback after submitting each answer.</h3></label></div>"),Ea()("#task-type-container").append("<div><label class='task-type-option'><input type='radio' name='task-type' id='task-type-a' value='a'><h2>Set as an <strong>Assessment</strong></h2><h3>Students do not see the answers until the due date specified by you. Students can not redo the assessment unless it is set again by the teacher.</h3></label></div>"),Ea()("#task-type-"+(t.task.type?t.task.type:"t")).prop("checked",!0)):(n.append("<div id='task-type-container'></div>"),Ea()("#task-type-container").append("<div style='margin-top: 20px'><label class='task-type-option' style='width:350px'><input type='radio' name='task-cmode' id='task-cmode-fixednum' value='fixednum'><h2><strong>Fixed number</strong> of questions</h2><h3>Either the system differentiates between the subskills in your selection (giving "+(t.isPractice?"you":"them")+" harder or easier questions based on "+(t.isPractice?"your":"their")+" changing mastery), or interleaving between all the skills in your selection.</h3><div class='task-cmode-options' id='task-cmode-fixednumoptions' style='margin-left:30px;margin-top:10px;font-size:14px'><select id='task-numquestions' name='numquestions' style='padding:3px;font-size:14px'>   <option value='4'>4</option><option value='6'>6</option>   <option value='8'>8</option><option value='10' selected>10</option>   <option value='12'>12</option><option value='15'>15</option>   <option value='20'>20</option><option value='25'>25</option>   <option value='30'>30</option><option value='35'>35</option></select> questions with <select id='task-cmode-fixednumvariant' style='padding:3px;margin-left:2px;font-size:14px'><option value='differentiate'>differentiation</option><option value='interleave'>interleaving</option><option value='neither'>neither</option></select></label></div></div>"),t.task.cdata.numquestions&&Ea()("#task-numquestions").val(t.task.cdata.numquestions),Ea()("#task-type-container").append("<div><label class='task-type-option' style='width:350px'><input type='radio' name='task-cmode' id='task-cmode-accuracy' value='accuracy'><h2><strong>Accuracy</strong> required to finish</h2><h3>We'll interleave between the subskills within your selection. "+(t.isPractice?"You":"Students")+" need to achieve the required accuracy at each subskill.</h3>   <div class='task-cmode-options' id='task-cmode-accuracyoptions' style='margin-left:30px;margin-top:10px;font-size:14px'><select id='task-numcorrect' style='padding:3px;font-size:14px'><option value='2'>2<option value='3'>3<option value='4' selected>4<option value='5'>5<option value='6'>6<option value='7'>7<option value='8'>8<option value='10'>10</select>    out of the last <select id='task-outof' style='padding:3px;font-size:14px'><option value='3'>3<option value='4'>4<option value='5' selected>5<option value='6'>6<option value='7'>7<option value='8'>8<option value='10'>10<option value='12'>12</select> questions correct on each subskill, <select id='task-accuracyinterleave' style='margin-top:5px;font-size:14px;padding:3px'><option value='0'>without interleaving</option><option value='1'>with interleaving</option></select>.</div></label></div>"),t.isPractice&&Ea()("#task-type-container").append("<div><label class='task-type-option'><input type='radio' name='task-cmode' id='task-cmode-nostop' value='nostop'><h2><strong>Keep going</strong> until I say</label></div>"),Ea()("input[name=task-cmode]").change((function(){Ea()(".task-cmode-options").hide(),Ea()("#task-cmode-"+Ea()(this).val()+"options").show()})).change(),t.task.cmode?(Ea()("#task-cmode-"+t.task.cmode).prop("checked",!0).change(),t.task.cdata.numcorrect&&Ea()("#task-numcorrect").val(t.task.cdata.numcorrect),t.task.cdata.outof&&Ea()("#task-outof").val(t.task.cdata.outof),t.task.cdata.numquestions&&Ea()("#task-numcorrect").val(t.task.cdata.numquestions),t.task.cdata.interleave?Ea()("#task-cmode-fixednumvariant").val("interleave"):t.task.cdata.differentiate?Ea()("#task-cmode-fixednumvariant").val("differentiate"):Ea()("#task-cmode-fixednumvariant").val("neither"),Ea()("#task-accuracyinterleave").val(!0===t.task.cdata.interleave?"1":"0")):Ea()("#task-cmode-fixednum").prop("checked",!0).change()),t.isPractice)i.hide();else{i.append("<div><label>Warn when Wrong:</label><select id='task-givewarning'><option value='0'>No<option value='1' selected>Yes</select> &nbsp;<a id='h-warn' class='help-button'>?</a></div>"),Ea()("#h-warn").click((function(){Ka("When set to Yes, students will be warned once per question if their answer is incorrect. Excludes multiple choice questions.",!0)})),i.append("<div><label>Prevent Reattempts:</label><select id='task-preventreattempts' style='padding:6px'><option value='0'>No<option value='1' selected>Yes</select> &nbsp;<a id='h-reattempts' class='help-button'>?</a></div>"),Ea()("#h-reattempts").click((function(){Ka("When set to Yes, students can only do a homework once, without subsequently trying for an improved mark. If set to No and if the task is a <strong>fixed question task</strong>, students will not get explanation/the correct answer for incorrectly answered questions, to prevent students knowing the answers for subsequent attempts.",!0)})),i.append("<div><label>Require Working:</label><select id='task-requireworking'><option value='0' selected>No<option value='1'>Yes<option value='2'>Optional</select> &nbsp;<a id='h-working' class='help-button'>?</a></div>"),Ea()("#h-working").click((function(){Ka("When set to Yes, students must use the mini-whiteboard next to the question display to provide workings. Optional means the working will be recorded if provided.",!0)})),i.append("<div><label>Require Feedback:</label><select id='task-requirefeedback'><option value='0' selected>No<option value='1'>If incorrect<option value='2'>Always</select> &nbsp;<a id='h-feedback' class='help-button'>?</a></div>"),Ea()("#h-feedback").click((function(){Ka("After students have answered a question, they have a box in which they can leave written reflections on the question for the teacher.",!0)})),i.append("<div><label>Time Limit:</label><select id='task-timelimit'><option selected value=''>None</option></select></div>");for(var g=5;g<=80;g+=5)Ea()("#task-timelimit").append("<option value='"+60*g+"'>"+g+" mins");for(var v=90;v<=120;v+=10)Ea()("#task-timelimit").append("<option value='"+60*v+"'>"+v+" mins");r?(i.append("<div><label>Accuracy measure:</label><select "+(t.task._worksheet.allqswithmarks?"":"disabled")+" style='padding:6px;font-size:12px' id='task-accuracymeasure'><option value='0'>Each question worth the same</option><option value='1'>Use exam marking</option></select> <a class='help-button' id='h-accuracymeasure' href='#'>?</a></div>"),Ea()("#h-accuracymeasure").click((function(){Ka("Questions from exam boards have associated marks. Exam marking will use these marks. Note that this option is only available when all questions are exam questions that have a number of marks assigned to them.",!0)}))):(i.append("<div><label>Hide skill names:</label><select id='task-hideskillnames'><option value='0' selected>No<option value='1'>Yes</select> &nbsp;<a id='h-hideskillname' class='help-button'>?</a></div>"),Ea()("#h-hideskillname").click((function(){Ka("When set to Yes, students will not see the skill name of the current question at the top of the page, making it harder to identify what skill is needed. The Worked Example button will also be greyed out.",!0)}))),t.task.cdata&&(void 0!==t.task.cdata.givewarning&&Ea()("#task-givewarning").val(t.task.cdata.givewarning?"1":"0"),void 0!==t.task.cdata.preventreattempts&&Ea()("#task-preventreattempts").val(t.task.cdata.preventreattempts?1:0),void 0!==t.task.cdata.requireworking&&Ea()("#task-requireworking").val(t.task.cdata.requireworking),void 0!==t.task.cdata.requirefeedback&&Ea()("#task-requirefeedback").val(t.task.cdata.requirefeedback),void 0!==t.task.cdata.timelimit&&Ea()("#task-timelimit").val(t.task.cdata.timelimit),void 0!==t.task.cdata.hideskillnames&&Ea()("#task-hideskillnames").val(t.task.cdata.hideskillnames?1:0),void 0!==t.task.cdata.accuracymeasure&&Ea()("#task-accuracymeasure").val(t.task.cdata.accuracymeasure))}r&&t.isPractice&&kc(t),Ea()(".modal .dialog-buttons button").css("background-color","#333"),t.task.aid&&Ea()(".modal .dialog-buttons button").html("Update"),xa().typeset()}function wc(t){return(1==(t=String(t)).length?"0":"")+t}function kc(t){var e={};t.task.aid&&(e.aid=t.task.aid);var n,i=t.task&&t.task.wid;if(i)if(e.wid=Number(Ea()("#task-wid").val()),t.isPractice)e.type="c";else{var r=Ea()("input[name=task-type]:checked").val();if(e.type=r,!r)return Ka("Please select a task type.",!0),!1;var s=Ea()("#task-accuracymeasure").val();void 0!==s&&(e.accuracymeasure=s)}else if(!i){var o=Ea()("input[name=task-cmode]:checked").val();if(!o)return Ka("No completion criteria was chosen."),!1;if(e.cmode=o,Ea()("#task-row-courses").is(":visible")&&Ea()("#task-courses").val()){e.coids=JSON.parse(Ea()("#task-courses").val());var a=Array.from(Ea()("#setaswork-mainoptions").find(".dfmExamBoardSelector-light > span")).map((function(t){return t.textContent}));a.length>0&&(n=1===a.length?a[0]:a)}if(Ea()("#task-row-difficulty").is(":visible")&&Ea()("#task-difficulty").val()&&(e.difficulty=Ea()("#task-difficulty").val()),"accuracy"===o){var l=parseInt(Ea()("#task-numcorrect").val()),c=parseInt(Ea()("#task-outof").val());if(l>c)return Ka("You are requiring an accuracy greater than 100%. Please set your expectations lower.",!0),!1;e.numcorrect=l,e.outof=c,e.interleave=1==Ea()("#task-accuracyinterleave").val()}else"fixednum"==o&&(e.numquestions=Number(Ea()("#task-numquestions").val()),e.interleave="interleave"==Ea()("#task-cmode-fixednumvariant").val(),e.differentiate="differentiate"==Ea()("#task-cmode-fixednumvariant").val());var u=Ea()("#task-skillselection").val(),d=JSON.parse(u);if(!u||!(d.skids.length>0||d.ssids.length>0))return Ka("No skills or subskills were selected."),!1;if(e.skillselection=d,!(r=Ea()("#task-type").val()))return Ka("No task type was specified.",!0),!1;e.type=r}if(Ea()("#task-noduedate").is(":visible")&&!Ea()("#task-noduedate").is(":checked")){var h=xc(Ea()("#task-duedate"),Ea()("#task-duetime"));e.duedate=h}if("1"==Ea()("#task-schedule").val()){var p=xc(Ea()("#task-scheduledate"),Ea()("#task-scheduletime"));e.scheduledate=p}Ea()("#task-givewarning").is(":visible")&&(e.givewarning=1==Ea()("#task-givewarning").val()),Ea()("#task-preventreattempts").is(":visible")&&(e.preventreattempts=1==Ea()("#task-preventreattempts").val()),Ea()("#task-requireworking").is(":visible")&&(e.requireworking=Number(Ea()("#task-requireworking").val())),Ea()("#task-requirefeedback").is(":visible")&&(e.requirefeedback=Number(Ea()("#task-requirefeedback").val())),Ea()("#task-timelimit").is(":visible")&&0!=Ea()("#task-timelimit").val()&&(e.timelimit=Number(Ea()("#task-timelimit").val())),Ea()("#task-hideskillnames").is(":visible")&&(e.hideskillnames=1==Ea()("#task-hideskillnames").val()),Ea()("#task-label").val()&&(e.label=Ea()("#task-label").val());var f=Ea()("#task-recipients").val()?JSON.parse(Ea()("#task-recipients").val()):{};if(Xa.user&&!f.uids&&!f.cids)return Ka("No recipients for this task were specified."),!1;e.recipients=f,console.log(JSON.stringify(e)),console.log("POST /api/tasks/tasks"),Ea().ajax({url:"/api/tasks/tasks",type:"POST",contentType:!1,processData:!1,dataType:"json",data:JSON.stringify(e),cache:!1,success:function(e){var i=e._task;if(i&&t.posthogTriggerId)if(t.isPractice)(0,Pa.Kk)({triggerId:t.posthogTriggerId,task:i,additionalInformation:{examQuestionSource:n}});else{var r,s,o=null!==(r=e.aaids)&&void 0!==r?r:[],a=null!==(s=f.cids)&&void 0!==s?s:[];(0,Pa.sv)({triggerId:t.posthogTriggerId,task:i,additionalInformation:{examQuestionSource:n,numberOfClasses:a.length,numberOfRecipients:o.length}})}t.callback?t.callback(e):t.isPractice?window.location="do-question.php?aaid="+e.aaids[0]:window.location="progress.php?aid="+e.aid},error:function(t,e,n){Ka("An error occurred when setting the task: <strong>"+t.responseText+"</strong>")}})}function xc(t,e){"string"!=typeof t&&(t=t.val()),"string"!=typeof e&&(e=e.val());for(var n=t.split("/"),i=0;i<n.length;i++)1==n[i].length&&(n[i]="0"+n[i]);var r=n[2]+"-"+n[1]+"-"+n[0]+"T"+e,s=new Date(r);return Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds())/1e3}function Sc(t){return"dfmSkillSelector_skill"+t.skill.skid}function Tc(t){t.data("currentCourse",null),Ka('\n    <div id="dfmSkillSelector">\n      <div id="dfmSkillSelector_bycourse">\n        <select></select>\n        <div id="dfmSkillSelector_filter">\n          <label for="dfmSkillSelector_filterInput">\n            <img src="/images/search_icon.svg">\n            Filter:\n          </label>\n          <input type="search" id="dfmSkillSelector_filterInput" title="Filter the skills within this course by ID, or by text match">\n        </div>\n        <p id="dfmSkillSelector_courseModulesEmpty">You must select a course above</p>\n        <p id="dfmSkillSelector_filterEmpty">No filter results</p>\n        <p id="dfmSkillSelector_courseEmpty">This course contains no selectable skills</p>\n        <ul class="dfmSkillSelector_modules" id="dfmSkillSelector_courseModules"></ul>\n        <div id="dfmSkillSelector_footer">\n          <button id="dfmSkillSelector_useButton">Use selected</button>\n          <button id="dfmSkillSelector_clearButton">Clear</button>\n        </div>\n      </div>\n    </div>\n  ',t.data("onClose")),"function"==typeof t.data("onOpen")&&t.data("onOpen")(),Ea()("#dfmSkillSelector").addClass("isLoading"),Ea()("#dfmSkillSelector_bycourse").hide(),Ea()("#dfmSkillSelector_filter").hide(),Ea()("#dfmSkillSelector_courseModules").hide(),Ea()("#dfmSkillSelector_filterEmpty").hide(),Ea()("#dfmSkillSelector_courseEmpty").hide(),t.data("singleChoice")&&Ea()("#dfmSkillSelector").addClass("singleChoice"),t.data("selectSubskills")&&Ea()("#dfmSkillSelector").addClass("selectSubskills"),Ea()("#dfmSkillSelector_useButton").click((function(){console.log("[A]"),Mc(t)})),Ea()("#dfmSkillSelector_clearButton").click((function(){t.dfmSkillSelector("reset"),Mc(t)})),t.data("singleChoice")?Ea()("#dfmSkillSelector_useButton").hide():Ea()("#dfmSkillSelector_useButton").prop("disabled",!0),t.data("hideClearButton")&&Ea()("#dfmSkillSelector_clearButton").hide(),t.data("singleChoice")&&t.data("hideClearButton")&&Ea()("#dfmSkillSelector_footer").hide(),Ea()("#dfmSkillSelector_filterInput").dfmWaitingInput(Ya(Ba().mark((function e(){var n,i,r,s,o,a,l,c;return Ba().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ea()("#dfmSkillSelector_filterInput").val().trim(),i=Ea()("#dfmSkillSelector_bycourse select").val(),r=Ea()("#dfmSkillSelector_courseModules"),s=t.data("currentCourse"),Ea()("#dfmSkillSelector_filterEmpty").hide(),Ea()("#dfmSkillSelector_courseModules").show(),Ea()(".strand, .topic",r).show().removeClass("expanded"),Ea()(".skill, .subskill",r).show(),n&&i&&s&&(o=t.data("excludeExamPractice")?"k":"",a=t.data("selectSubskills")?1:0,0===(l=Cc(s,n,a,o)).length?(Ea()("#dfmSkillSelector_courseModules").hide(),Ea()("#dfmSkillSelector_filterEmpty").show()):(Ea()(".strand, .topic",r).hide(),l.forEach((function(t){Ea()("#dfmSkillSelector_module".concat(t.cmid),r).show().addClass("expanded"),t.cuids.forEach((function(t){Ea()("#dfmSkillSelector_unit".concat(t),r).show().find("a > h2").click()}))})),c=Boolean(t.data("selectSubskills")),Ea()(".skill",r).each((function(t,e){Ec(e,n,c)})))),Ea()("#dfmSkillSelector_courseModules").removeClass("isPending");case 10:case"end":return e.stop()}}),e)}))),(function(){Ea()("#dfmSkillSelector_courseModules").addClass("isPending")})),Ea()("#dfmSkillSelector_bycourse select").change((function(){!function(t,e){if(Ea()("#dfmSkillSelector_filter").hide(),Ea()("#dfmSkillSelector_filterInput").val(""),Ea()("#dfmSkillSelector_filterEmpty").hide(),Ea()("#dfmSkillSelector_courseEmpty").hide(),Ea()("#dfmSkillSelector_courseModules").empty(),!e)return Ea()("#dfmSkillSelector_courseModulesEmpty").show(),void Ea()("#dfmSkillSelector_courseModules").hide();Ea()("#dfmSkillSelector_courseModulesEmpty").hide(),Ea()("#dfmSkillSelector_courseModules").show(),Ea()("#dfmSkillSelector_courseModules").addClass("isLoading"),Ea().ajax({url:"/api/course/skillselector/"+e,context:document.body,dataType:"json",success:function(n,i,r){if(t.data("currentCourse",n),n.modules.length){var s,o;Ea().each(n.modules,(function(e,n){Ea()("#dfmSkillSelector_courseModules").append("<li id='dfmSkillSelector_module"+n.cmid+"' class='strand'><a href='#'><h2><img src='/images/chevron_down.svg'> "+n.name+"</h1></a><ul class='dfmSkillSelector_topics'></ul></li>"),Ea().each(n.units,(function(e,i){Ea()("#dfmSkillSelector_module"+n.cmid+" > ul").append("<li id='dfmSkillSelector_unit"+i.cuid+"' class='topic'><a href='#'><h2><img src='/images/chevron_down.svg'> "+i.name+"</h2></a><ul class='dfmSkillSelector_skills'></ul></li>"),Ea()("#dfmSkillSelector_unit"+i.cuid).data("unit",i),function(t,e){var n=Ea()("#dfmSkillSelector_unit"+e.cuid+" > ul"),i=Ea()("#dfmSkillSelector_filterInput").val().trim();n.empty(),Ea().each(e.skills,(function(e,i){!function(t,e,n){var i=n.skill;i||(i={skid:0,publicid:0,name:"Error: Missing skill for: "+JSON.stringify(n)});var r=Boolean(t.data("selectSubskills")),s=!t.data("excludeExamPractice"),o=s&&i.subskills.length||i.subskills.filter((function(t){return"k"===t.type})).length>0;i.skid&&(e.append("<li id='"+Sc(n)+"' class='skill'><a href='#'><label><input type='checkbox' class='skill-checkbox'><em>"+i.publicid+"</em><span>"+i.name+"</span></label></a>"+(r&&o?"<ul class='dfmSkillSelector_subskills'></ul>":"")+(r&&!o?"<p class='dfmSkillSelector_subskillsUnavailable'>No available subskills"+(s?" or exam questions":"")+"</p>":"")+"</li>"),Ea()("#"+Sc(n),e).data("skillNode",n),r&&o&&Ea().each(i.subskills,(function(t,r){("k"==r.type||s)&&(r.publicid=i.publicid,e.find("#"+Sc(n)+" > ul").append("<li id='dfmSkillSelector_subskill"+r.ssid+"' class='subskill'><a href='#'><label><input type='checkbox' class='subskill-checkbox'><em>"+(r.letter?r.letter:"")+"</em><span>"+r.name+"</span></label></a></li>"),e.find("#dfmSkillSelector_subskill"+r.ssid).data("subskill",r))}))),r||Ea()("#"+Sc(n)+" .skill-checkbox",e).click((function(e){if(e.stopPropagation(),console.log("Clicked skill checkbox"),t.data("skillPath",{coid:Ea()("#dfmSkillSelector_bycourse select").val(),cmid:Ea()(e.target).closest("[id^=dfmSkillSelector_module]")[0].id.replace("dfmSkillSelector_module",""),cuid:Ea()(e.target).closest("[id^=dfmSkillSelector_unit]")[0].id.replace("dfmSkillSelector_unit","")}),Ea()(this).closest("li").data("skill"),t.data("singleChoice"))console.log("[C]"),Mc(t);else{Ea()(this).closest("li").toggleClass("selected");var n=Ea()("#dfmSkillSelector input[type=checkbox]:checked").length;Ea()("#dfmSkillSelector_useButton").prop("disabled",!n),Ea()("#dfmSkillSelector_useButton").html("Use selected".concat(n?" (".concat(n,")"):""))}})),Ea()("#"+Sc(n)+" .subskill span",e).click((function(t){t.stopPropagation()})),Ea()("#"+Sc(n)+" .skill > a > label > span",e).click((function(t){t.stopPropagation()})),Ea()("#"+Sc(n)+" .subskill-checkbox",e).click((function(e){if(e.stopPropagation(),console.log("Click subskill checkbox"),t.data("skillPath",{coid:Ea()("#dfmSkillSelector_bycourse select").val(),cmid:Ea()(e.target).closest("[id^=dfmSkillSelector_module]")[0].id.replace("dfmSkillSelector_module",""),cuid:Ea()(e.target).closest("[id^=dfmSkillSelector_unit]")[0].id.replace("dfmSkillSelector_unit","")}),Ea()(this).closest("li").data("subskill"),t.data("singleChoice"))console.log("[B]"),Mc(t);else{Ea()(this).closest("li").toggleClass("selected");var n=Ea()("#dfmSkillSelector input[type=checkbox]:checked").length;Ea()("#dfmSkillSelector_useButton").prop("disabled",!n),Ea()("#dfmSkillSelector_useButton").html("Use selected".concat(n?" (".concat(n,")"):""))}}))}(t,n,{skill:i})})),i||n[0].scrollIntoView({behavior:"smooth",block:"start"})}(t,i)}))})),xa().typeset(["#dfmSkillSelector_courseModules"]),Ea()("#dfmSkillSelector_bycourse .strand > a, #dfmSkillSelector_bycourse .topic > a").click((function(t){t.stopPropagation(),console.log("CLICKED ON: "+t.target.nodeName),Ea()(this).parent().toggleClass("expanded")})),Ea()("#dfmSkillSelector_filter").show(),Ea()("#dfmSkillSelector_courseModules").removeClass("isLoading"),Ea()("#dfmSkillSelector_courseModules").show(),Ea()("#dfmSkillSelector_courseModulesEmpty").hide();var a,l=t.data("skillPath");if(null!==(s=l)&&void 0!==s&&s.useAllSkills){var c=JSON.parse(Ea()(t).val()||"null");l=function(t,e,n){var i,r={coid:t.coid},s=ja(t.modules);try{for(s.s();!(i=s.n()).done;){var o=i.value;r.cmid=o.cmid;var a,l=ja(o.units);try{for(l.s();!(a=l.n()).done;){var c=a.value;r.cuid=c.cuid;var u,d=ja(c.skills);try{for(d.s();!(u=d.n()).done;){var h=u.value;if(e&&h.skid===e)return r;if(n){var p,f=ja(h.subskills);try{for(f.s();!(p=f.n()).done;)if(p.value.ssid===n)return r}catch(t){f.e(t)}finally{f.f()}}}}catch(t){d.e(t)}finally{d.f()}}}catch(t){l.e(t)}finally{l.f()}}}catch(t){s.e(t)}finally{s.f()}return{coid:t.coid}}(t.data("currentCourse"),null==c?void 0:c.skids[0],null==c?void 0:c.ssids[0]),Ea()(t).data("skillPath",l)}null!==(o=l)&&void 0!==o&&o.coid&&parseInt(l.coid,10)===parseInt(e,10)&&null!==(a=l)&&void 0!==a&&a.cmid&&(Ea()("#dfmSkillSelector_module".concat(l.cmid))[0].scrollIntoView({behavior:"smooth",block:"start"}),Ea()("#dfmSkillSelector_module".concat(l.cmid)).addClass("expanded"),l.cuid&&(Ea()("#dfmSkillSelector_unit".concat(l.cuid))[0].scrollIntoView({behavior:"smooth",block:"start"}),Ea()("#dfmSkillSelector_unit".concat(l.cuid)).addClass("expanded")))}else Ea()("#dfmSkillSelector_courseModules").removeClass("isLoading"),Ea()("#dfmSkillSelector_courseModules").hide(),Ea()("#dfmSkillSelector_courseEmpty").show()},error:function(t,e,n){Ka("There was an error retrieving the course:<br><br><strong>"+t.responseText+"</strong>")}})}(t,Ea()(this).val())})),function(t){Oc.apply(this,arguments)}(t)}function Cc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=new RegExp(".*".concat(e,".*"),"i"),s=[];return t.modules.forEach((function(t){var o=[];t.units.forEach((function(t){t.skills.some((function(t){return"".concat(t.publicid)===e||!!r.test(t.name)||!(!n||!t.subskills.some((function(n){if(i&&n.type===i){if("".concat(t.publicid).concat(n.letter)===e)return!0;if(r.test(n.name))return!0}})))||void 0}))&&o.push(t.cuid)})),o.length&&s.push({cmid:t.cmid,cuids:$a(new Set(o))})})),s}function Ec(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new RegExp(".*".concat(e,".*"),"i"),r=!1,s=!1,o=t.querySelector("label span").textContent;if((t.querySelector("label em").textContent==e||i.test(o))&&(r=!0),!r&&n){var a=t.querySelector("a label em").textContent;t.querySelectorAll("li").forEach((function(t){var n=t.querySelector("label em").textContent,r=t.querySelector("label span").textContent;"".concat(a).concat(n)==e||i.test(r)?s=!0:t.style.display="none"}))}r||s||(t.style.display="none")}function Ic(t,e){return Dc.apply(this,arguments)}function Dc(){return(Dc=Ya(Ba().mark((function t(e,n){var i,r;return Ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Da.y_)({user:null==Xa?void 0:Xa.user});case 2:i=t.sent,e.empty(),e.append("<option disabled selected>&ndash; Select a course &ndash;</option>"),(r=i.find((function(t){return"all"===t.id})).courses[0])&&e.append('<option value="'.concat(r.coid,'">').concat(r.name,"</option>")),["school","user"].forEach((function(t){var n=i.find((function(e){return e.id===t}));null!=n&&n.courses.length&&(e.append('<optgroup label="'.concat(n.heading,'">')),n.courses.forEach((function(t){var n,i=t.sid!==(null===(n=Xa.user)||void 0===n?void 0:n.sid)?"[".concat(t.authorName,"] "):"";e.append('<option value="'.concat(t.coid,'">').concat(i).concat(t.name,"</option>"))})),e.append("</optgroup>"))})),"function"==typeof n&&e.on("change",(function(t){var e=t.target.value,r=i.flatMap((function(t){return t.courses})).find((function(t){return t.coid==e}));n(r)}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Oc(){return(Oc=Ya(Ba().mark((function t(e){var n,i,r;return Ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Ea()("#dfmSkillSelector_bycourse select"),t.next=3,Ic(n,e.data("onCourseChange"));case 3:if(Ea()("#dfmSkillSelector").removeClass("isLoading"),Ea()("#dfmSkillSelector_bycourse").show(),i=Ea()(e).data("skillPath"),JSON.parse(Ea()(e).val()||"null"),null==i||!i.coid){t.next=11;break}n.val(i.coid).change(),t.next=16;break;case 11:if(null==i||!i.useAllSkills){t.next=16;break}return t.next=14,(0,Da.JY)();case 14:r=t.sent,n.val(r.coid).change();case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mc(t){console.log("[dfmSkillSelector_buttonclick]");var e=[],n=[];Ea()(".subskill-checkbox:checked").each((function(){var t=Ea()(this).closest("li").data("subskill");t?n.push(t):console.log("[SkillSelector] Error: checkbox selected for subskill but data for subskill was missing")})),Ea()(".skill-checkbox:checked").each((function(){var t=Ea()(this).closest("li").data("skillNode").skill;console.log(" -- Skill checkbox "+t.skid+" was selected"),e.push(t)}));var i={skills:e,subskills:n};console.log("[SkillSelector] skillselection = "+JSON.stringify(i)),Ac(t,i,!0),Ea().modal.close()}function Ac(t,e,n){e.skills&&console.log("dfmSkillSelector_setValue skid count = "+e.skills.length);var i=[],r=[],s=[];Ea().each(e.subskills,(function(t,e){r.push(e.ssid),s.push(Rc(e))})),Ea().each(e.skills,(function(t,e){i.push(e.skid),s.push("<em>"+e.publicid+"</em> "+e.name)}));var o=s.join(", ").replace("Exam Practice: ","");o?t.next().find("label").html(o):t.next().find("label").html(t.data("defaultLabel")?t.data("defaultLabel"):"Click to choose");var a={skids:i,ssids:r};t.val(JSON.stringify(a)),t.data("skillselection",e),t.data("onChange")&&n&&t.data("onChange")(e),t.next().attr("title",s.join(", ").replace("<em>","").replace("</em>",""))}function Pc(t){return Rc(t)}function Rc(t){return"<em>"+t.publicid+(t.letter?t.letter:"")+"</em> "+t.name}function Lc(){Pl(),Ja("<div class='dialog-options'><h1>Set a Task</h1><div><button id='settask-bytopic'>By Topic</button><p>A mixture of past paper questions and our random question generators.</p></div><div><button id='settask-pastpapers'>Past Papers</button><p>Choose an existing paper, with the option to modify the paper first.</p></div><div><button id='settask-choosequestions'>Choose questions</button><p>Build your own selection of questions from scratch.</p></div><div><button id='settask-worksheetshome'>Your worksheets</button><p>Go to your worksheets home directory.</p></div></div>",(function(){(0,Pa.Kg)({triggerId:"set-a-task-modal-dismiss"})})),Ea()("#settask-bytopic").on("click",(function(){(0,Pa.QO)({triggerId:"set-a-task-modal-by-topic-button"}),window.location="/explorer.php"})),Ea()("#settask-pastpapers").on("click",(function(){(0,Ra.tn)({triggerId:"set-a-task-modal-past-papers-button"}),window.location="/worksheets.php?wdid=2"})),Ea()("#settask-choosequestions").on("click",(function(){(0,Pa.MR)({triggerId:"set-a-task-modal-choose-questions-button"}),window.location="/worksheets.php?wid=new"})),Ea()("#settask-worksheetshome").on("click",(function(){(0,Ra.hF)({triggerId:"set-a-task-modal-your-worksheets-button"}),window.location="/worksheets.php?wdid=home"}))}function Nc(){Pl(),Ja("<div class='dialog-options'><h1>Start a Practice</h1><div><button id='practice-bytopic'>By Topic</button><p>Practise either exam questions, or to become confident with specific types of questions, use our question generators.</p></div><div><button id='practice-pastpapers'>Past Papers</button><p>Practise collections of questions from different exam boards.</p></div>"+(Xa.user?"<div><button id='practice-cleanup'>Cleanup</button><p>Redo 4 questions you recently got incorrect.</p></div>":"")+"</div>",(function(){(0,Pa.uC)({triggerId:"start-a-practice-modal-dismiss"})})),Ea()("#practice-bytopic").on("click",(function(){(0,Pa.QO)({triggerId:"start-a-practice-modal-by-topic-button"}),window.location="/explorer.php"})),Ea()("#practice-pastpapers").on("click",(function(){(0,Ra.tn)({triggerId:"start-a-practice-modal-past-papers-button"}),window.location="/worksheets.php?wdid=2"})),Ea()("#practice-cleanup").click(qc)}function Fc(){return Pl(),Ja("<h1>Dr Frost Live!</h1><img src='/images/phone_icon2.svg' style='filter:invert(1);width:60px;float:left;margin-right:30px;margin-bottom:40px'><p>In a Live! game, students see the questions on your own screen and play along on their mobile/tablet device. To start a game, go to the <strong>Question Explorer</strong> or <strong>Papers & Worksheets</strong>, and when starting a task, choose the Live! option.</p>"),!1}function qc(){var t={type:"z",recipients:{uids:[Xa.user.uid]}};Ea().ajax({url:"/api/tasks/tasks",type:"POST",contentType:!1,processData:!1,dataType:"json",data:JSON.stringify(t),cache:!1,success:function(t){var e=t._task;if(e){var n=e.cdata.questions?Object.values(e.cdata.questions):[];e=Ua(Ua({},e),{},{cdata:Ua(Ua({},e.cdata),{},{questions:n})}),(0,Pa.Kk)({triggerId:"start-a-practice-modal-cleanup-button",task:e})}t.aaids&&t.aaids[0]?window.location="do-question.php?aaid="+t.aaids[0]:Ka("Unable to find previous task attempt.")},error:function(t,e,n){Ka("An error occurred when setting the task: <strong>"+t.responseText+"</strong>")}})}function jc(t){if(!t.val())return t.next().empty(),void t.next().html("No saved location");var e="/api/worksheets/directory/"+vc+"?directoriesOnly=1";Ea().ajax({url:e,context:document.body,dataType:"json",success:function(e,n,i){t.next().empty(),e._ancestors.push(e),Ea().each(e._ancestors,(function(e,n){t.next().append("/ <a href='#'>"+("ROOT"==n.name?"DFM":n.name)+"</a>")}))},error:function(t,e,n){Ea().modal.close(),Ka("There was an error retrieving this directory:<br><br><strong>"+t.responseText+"</strong>")}})}function $c(t,e){console.log("[DirectorySelector] wdid="+t);var n="/api/worksheets/directory/"+(vc=t)+"?directoriesOnly=1";Ea()("#worksheet-fileexplorer ul").empty(),Ea().ajax({url:n,context:document.body,dataType:"json",success:function(t,n,i){if(console.log(JSON.stringify(t)),Ea()("#dfm-directoryselector-children").empty(),Ea().each(t._children,(function(t,n){var i="db"+n.wdid;Ea()("#dfm-directoryselector-children").append("<li id='"+i+"'><img src='/homework/img/directory-small.png'>"+n.name+"</li>"),Ea()("#"+i).data("wdid",n.wdid),Ea()("#"+i).on("click",(function(){$c(Ea()(this).data("wdid"),e)}))})),0==t._children.length&&Ea()("#dfm-directoryselector-children").append("There are no further subdirectories. Click the <em>Use Current Directory</em> button to select this directory or navigate upwards above.</span>"),Ea()("#dfm-directoryselector-current span").empty(),t._ancestors||(t._ancestors=[]),t._ancestors.push(t),Ea().each(t._ancestors,(function(t,n){Ea()("#dfm-directoryselector-current span").append("/ <a href='#' id='dfmWSAncestor-"+n.wdid+"'>"+("ROOT"==n.name?"DFM":n.name)+"</a>"),Ea()("#dfmWSAncestor-"+n.wdid).data("wdid",n.wdid),Ea()("#dfmWSAncestor-"+n.wdid).click((function(){$c(Ea()(this).data("wdid"),e)}))})),e.data("checkAddPermission")){var r=fl(t,"a");Ea()(".dialog-buttons button").prop("disabled",!r)}},error:function(t,e,n){Ea().modal.close(),Ka("There was an error retrieving this directory:<br><br><strong>"+t.responseText+"</strong>")}})}jQuery.fn.dfmSkillSelector=function(t,e,n){var i=Ea()(this);if("string"!=typeof t)t.selectSubskills&&i.data("selectSubskills",t.selectSubskills),t.excludeExamPractice&&i.data("excludeExamPractice",t.excludeExamPractice),t.singleChoice&&i.data("singleChoice",t.singleChoice),t.dontAbridgeLabel&&i.data("dontAbridgeLabel",t.dontAbridgeLabel),t.defaultLabel&&i.data("defaultLabel",t.defaultLabel),t.hideClearButton&&i.data("hideClearButton",t.hideClearButton),t.onChange&&i.data("onChange",t.onChange),t.onCourseChange&&i.data("onCourseChange",t.onCourseChange),t.onClose&&i.data("onClose",t.onClose),t.onOpen&&i.data("onOpen",t.onOpen),i.after("<span class='dfm_skillSelector'><label>"+(t.defaultLabel?t.defaultLabel:"Click to choose")+"</label><span><img src='/images/chevron_down.svg'></span></span>"),i.next().click((function(){Tc(i)}));else if("reset"==t){i.val("");var r=i.data("defaultLabel")?i.data("defaultLabel"):"Click to choose";i.next().find("label").html(r),i.removeData("skillselection")}else if("setValue"==t){i.val(JSON.stringify(e));var s={lookup:e};if(!(e.skids&&0!=e.skids.length||e.ssids&&0!=e.ssids.length))return Ea()(this).dfmSkillSelector("reset"),!1;Ea().ajax({url:"/api/topic/lookup",type:"POST",contentType:!1,processData:!1,dataType:"json",data:JSON.stringify(s),cache:!1,success:function(t){console.log("[Lookup] "+JSON.stringify(t)),Ac(i,t,n)},error:function(t,e,n){Ka("An error occurred when getting the skill: <strong>data = "+JSON.stringify(s)+", "+t.responseText+"</strong>")}})}},jQuery.fn.dfmPercentageTotalMasteryBar=function(t,e){var n=Number(Ea()(this).html().split("/")[0]),i=Number(Ea()(this).html().split("/")[1]),r=100*n/i;Ea()(this).addClass("dfm_percentageTotalMasteryBar"),Ea()(this).html("<div class='bar'><div class='bar-filled'></div></div><span><span class='mastery-text'>35/350</span> Mastery</span>"),Ea()(this).find(".bar-filled").css("width",r+"%"),Ea()(this).find(".mastery-text").html(n+"/"+i),0==i&&Ea()(this).hide()},jQuery.fn.dfmDirectorySelector=function(t){console.log("[DFMDirectorySelector]");var e=Ea()(this);if(t&&"update"==t)return console.log("[DirectorySelector] Updated directory to wdid = "+e.val()),vc=e.val(),void jc(e);var n=t&&t.readOnly;t&&t.callback&&e.data("callback",t.callback),t&&t.default?e.data("default",t.default):Xa.user&&"student"!=Xa.user.type&&function(t){Ea().ajax({url:"/api/worksheets/userhomedirectory",type:"GET",contentType:!1,processData:!1,cache:!1,dataType:"json",success:function(e){t.data("default",e.wdid)},error:function(t,e,n){Ka("An error occurred when trying to get the home directory: <strong>"+t.responseText+"</strong>")}})}(e),t&&t.checkAddPermission&&e.data("checkAddPermission",!0===t.checkAddPermission),vc=e.val(),e.after("<span class='dfm-directoryselector'></span>"),n||e.next().click((function(){!function(t){var e="<div id='dfm-directoryselector-current'><span></span></div>";gl(e+="<ul id='dfm-directoryselector-children'></ul><br><br>",[{label:"Use current directory",action:function(){t.next().html(Ea()("#dfm-directoryselector-current span").html()),t.next().find("a").attr("href","#"),t.val(vc),t.data("callback")&&t.data("callback")()}}],!0),$c(vc||t.data("default"),t)}(e)})),jc(e)},Ea()(document).ready(Ya(Ba().mark((function t(){var e,n,i;return Ba().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ea()("#search-form input").keyup((function(t){if(t.keyCode>=37&&t.keyCode<=40||13==t.keyCode)return!1;var e=Ea().trim(Ea()("#search-form input").val());Tl||Ea()("#search-results .resources").empty(),""==e?Sl():Il(e)})),Ea()("#users-panel-left select").change((function(){updateUsersPanel()})),Ea()("#search-results-new").length>0&&(Ea()("#search-results-new").dfmTabs(),Ea()("#search-results-new").find("ul").next().css("background-color","#2c5857")),Ea()("#close-search-button").click(Sl),_l(yl),t.next=7,bl();case 7:i=t.sent,Xa.user=null!==(e=null==i?void 0:i.user)&&void 0!==e?e:null,Xa.featureFlags=null!==(n=null==i?void 0:i.featureFlags)&&void 0!==n?n:[],kl(i),Ea()(document).data("initialFuncs")&&Ea().each(Ea()(document).data("initialFuncs"),(function(t,e){e()})),null===localStorage.getItem("cookie_consent")&&(Ea()(".cookie-consent__container").css("display","flex"),Ea()(".cookie-consent__accept").on("click",(function(){Ea()(".cookie-consent__container").hide(),localStorage.setItem("cookie_consent","optional"),wa.Ay.set_config({persistence:"localStorage+cookie"})})),Ea()(".cookie-consent__reject").on("click",(function(){Ea()(".cookie-consent__container").hide(),localStorage.setItem("cookie_consent","required"),wa.Ay.set_config({persistence:"memory"})})));case 14:case"end":return t.stop()}}),t)}))))},2444:(t,e,n)=>{"use strict";n.d(e,{E0:()=>d,JY:()=>m,cB:()=>T,jE:()=>_,l_:()=>p,vc:()=>w,y_:()=>x});var i=n(3411),r=n(4455);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(){l=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var s=e&&e.prototype instanceof _?e:_,o=Object.create(s.prototype),a=new A(i||[]);return r(o,"_invoke",{value:I(t,n,a)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",v="completed",y={};function _(){}function b(){}function w(){}var k={};d(k,a,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(P([])));S&&S!==n&&i.call(S,a)&&(k=S);var T=w.prototype=_.prototype=Object.create(k);function C(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(r,o,a,l){var c=p(t[r],t,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,l)}))}l(c.arg)}var o;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return o=o?o.then(r,r):r()}})}function I(e,n,i){var r=f;return function(s,o){if(r===g)throw Error("Generator is already running");if(r===v){if("throw"===s)throw o;return{value:t,done:!0}}for(i.method=s,i.arg=o;;){var a=i.delegate;if(a){var l=D(a,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var c=p(e,n,i);if("normal"===c.type){if(r=i.done?v:m,c.arg===y)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=v,i.method="throw",i.arg=c.arg)}}}function D(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,D(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var s=p(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,y;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(s(e)+" is not iterable")}return b.prototype=w,r(T,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},C(E.prototype),d(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new E(h(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(T),d(T,u,"Generator"),d(T,a,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;M(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:P(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function c(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,r)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function o(t){c(s,i,r,o,a,"next",t)}function a(t){c(s,i,r,o,a,"throw",t)}o(void 0)}))}}function d(t){return h.apply(this,arguments)}function h(){return(h=u(l().mark((function t(e){var n,s,o,a,c,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/course/course/".concat(e));case 3:if((n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:throw s=t.sent,new Error(s.message);case 9:return t.next=11,n.json();case 11:return o=t.sent,t.abrupt("return",o);case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0.message),c=null!==(a=(0,r.zj)(t.t0.message))&&void 0!==a?a:"There was an error retrieving this course.",u=(0,r.P2)(c,null),(0,i.iM)('<div style="margin: 12px 0">'.concat(u,"</div>"));case 21:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function p(t){return f.apply(this,arguments)}function f(){return f=u(l().mark((function t(e){var n,s,o,a,c,u,d,h,p=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(p.length>1&&void 0!==p[1])||p[1],t.prev=1,s=n?"/api/course/explore/".concat(e):"/api/course/unit/".concat(e),t.next=5,fetch(s);case 5:if((o=t.sent).ok){t.next=11;break}return t.next=9,o.json();case 9:throw a=t.sent,new Error(a.message);case 11:return t.next=13,o.json();case 13:return c=t.sent,t.abrupt("return",c);case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0.message),d=null!==(u=(0,r.zj)(t.t0.message))&&void 0!==u?u:"There was an error retrieving this course unit.",h=(0,r.P2)(d,null),(0,i.iM)('<div style="margin: 12px 0">'.concat(h,"</div>"));case 23:case"end":return t.stop()}}),t,null,[[1,17]])}))),f.apply(this,arguments)}function m(){return g.apply(this,arguments)}function g(){return(g=u(l().mark((function t(){var e,n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/course/course/allskills/details");case 3:if((e=t.sent).ok){t.next=9;break}return t.next=7,e.json();case 7:throw n=t.sent,new Error(n.message);case 9:return t.next=11,e.json();case 11:return r=t.sent,t.abrupt("return",r);case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0.message),(0,i.iM)("There was an error retrieving the all skills course.");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function v(t){return y.apply(this,arguments)}function y(){return(y=u(l().mark((function t(e){var n,r,s,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/user/".concat(e,"/courses"));case 3:if((n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:throw r=t.sent,new Error(r.message);case 9:return t.next=11,n.json();case 11:return s=t.sent,o=s.courses,t.abrupt("return",o);case 16:t.prev=16,t.t0=t.catch(0),console.log(t.t0.message),(0,i.iM)("There was an error retrieving your user courses.");case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function _(t){return b.apply(this,arguments)}function b(){return(b=u(l().mark((function t(e){var n,r,s,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/course/school/list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sid:e})});case 3:if((n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:throw r=t.sent,new Error(r.message);case 9:return t.next=11,n.json();case 11:return s=t.sent,o=s.courses,t.abrupt("return",o);case 16:t.prev=16,t.t0=t.catch(0),console.log(t.t0.message),(0,i.iM)("There was an error retrieving your school courses.");case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function w(){return k.apply(this,arguments)}function k(){return(k=u(l().mark((function t(){var e,n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/courses/published");case 3:if((e=t.sent).ok){t.next=9;break}return t.next=7,e.json();case 7:throw n=t.sent,new Error(n.message);case 9:return t.next=11,e.json();case 11:return r=t.sent,t.abrupt("return",r);case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0.message),(0,i.iM)("There was an error retrieving the published course selection.");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function x(){return S.apply(this,arguments)}function S(){return S=u(l().mark((function t(){var e,n,i,r,s,a,c,u,d,h,p,f,g,y,b,w,k,x,S=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(i=S.length>0&&void 0!==S[0]?S[0]:{}).user,s=void 0===r?null:r,a=i.preselectedCourse,c=void 0===a?null:a,t.next=3,m();case 3:if(u=t.sent,d=u?[u]:[],!(h=null==s?void 0:s.uid)){t.next=12;break}return t.next=9,v(h);case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=[];case 13:if(p=t.t0,f=null!==(e=null==p?void 0:p.filter((function(t){return!d.some((function(e){return e.coid===t.coid}))})))&&void 0!==e?e:[],!(g=null==s?void 0:s.sid)){t.next=22;break}return t.next=19,_(g);case 19:t.t1=t.sent,t.next=23;break;case 22:t.t1=[];case 23:return y=t.t1,b=null!==(n=null==y?void 0:y.filter((function(t){var e=d.some((function(e){return e.coid===t.coid})),n=f.some((function(e){return e.coid===t.coid})),i=1===t.status||3===t.status;return!e&&!n&&i})))&&void 0!==n?n:[],w=[].concat(d,o(f),o(b)),k=c&&!w.some((function(t){return t.coid===c.coid}))?c:null,x=[{id:"current",heading:"Currently viewing",courses:k?[k]:[]},{id:"user",heading:"Your courses",courses:f},{id:"school",heading:"School courses",courses:b},{id:"all",heading:"All skills",courses:d}],t.abrupt("return",x);case 29:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}function T(t){return C.apply(this,arguments)}function C(){return(C=u(l().mark((function t(e){var n,r,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/course/course/".concat(e,"/resourcecount"));case 3:if((n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:throw r=t.sent,new Error(r.message);case 9:return t.next=11,n.json();case 11:return s=t.sent,t.abrupt("return",s);case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0.message),(0,i.iM)("There was an error retrieving the resource count for this course.");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}},8255:(t,e,n)=>{"use strict";n.d(e,{o:()=>a});var i=n(3411);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function s(){s=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var r=e&&e.prototype instanceof _?e:_,s=Object.create(r.prototype),a=new A(i||[]);return o(s,"_invoke",{value:I(t,n,a)}),s}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",v="completed",y={};function _(){}function b(){}function w(){}var k={};d(k,l,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(P([])));S&&S!==n&&i.call(S,l)&&(k=S);var T=w.prototype=_.prototype=Object.create(k);function C(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(s,o,a,l){var c=p(t[s],t,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==r(d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,l)}))}l(c.arg)}var s;o(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return s=s?s.then(r,r):r()}})}function I(e,n,i){var r=f;return function(s,o){if(r===g)throw Error("Generator is already running");if(r===v){if("throw"===s)throw o;return{value:t,done:!0}}for(i.method=s,i.arg=o;;){var a=i.delegate;if(a){var l=D(a,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var c=p(e,n,i);if("normal"===c.type){if(r=i.done?v:m,c.arg===y)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=v,i.method="throw",i.arg=c.arg)}}}function D(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,D(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var s=p(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,y;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function n(){for(;++s<e.length;)if(i.call(e,s))return n.value=e[s],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=w,o(T,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},C(E.prototype),d(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new E(h(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(T),d(T,u,"Generator"),d(T,l,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;M(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:P(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function o(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,r)}function a(t){return l.apply(this,arguments)}function l(){var t;return t=s().mark((function t(e){var n,r,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/downloadables/byunit/".concat(e));case 3:if((n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:throw r=t.sent,new Error(r.message);case 9:return t.next=11,n.json();case 11:return o=t.sent,t.abrupt("return",o);case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0.message),(0,i.iM)("There was an error retrieving resources for this unit.");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})),l=function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){o(s,i,r,a,l,"next",t)}function l(t){o(s,i,r,a,l,"throw",t)}a(void 0)}))},l.apply(this,arguments)}},4455:(t,e,n)=>{"use strict";n.d(e,{P2:()=>a,Qg:()=>l,f5:()=>o,zj:()=>s});var i={COURSE_ACCESS_DENIED:"You don't have access to this course.",COURSE_DELETED:"The course you're looking for has been deleted.",COURSE_NOT_FOUND:"The course you're looking for doesn't exist.",QGEN_FAILURE:"Our question generator failed to generate a question for you.",NO_QUESTION_GENERATOR:"We don't have a question generator available for this subskill."},r={503:"<strong>503:</strong> The service was unavailable. Please try again.",504:"<strong>504:</strong> A server timeout occurred. Please try again."},s=function(t){var e;return null!==(e=i[t])&&void 0!==e?e:null},o=function(t){var e;return null!==(e=r[t])&&void 0!==e?e:null};function a(t,e){return'<div style="display: flex; flex-direction: column; gap: 6px; text-align: left;">\n        <div style="align-items: center; display: flex; gap: 4px;">\n            <img alt="error icon" src="/images/notification_late.svg" style="width: 16px;"/>\n            <h4 style="margin: 0;">Oops! Something went wrong.</h4>\n        </div>\n        '.concat(t?'<p style="margin: 0;">'.concat(t,"</p>"):"","\n        ").concat(e?'<p style="color: gray; font-size: 12px; margin: 0; margin-top: 6px;">'.concat(e,"</p>"):"","\n    </div>")}function l(t){var e,n,i,r,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An unknown error occurred.",c=null===(e=t.responseJSON)||void 0===e?void 0:e.message;return a(null!==(n=s(c))&&void 0!==n?n:l,null!==(i=null!==(r=o(t.status))&&void 0!==r?r:t.responseText)&&void 0!==i?i:null)}},4978:(t,e,n)=>{"use strict";n.d(e,{lG:()=>d,s2:()=>c,wX:()=>l});var i=n(3411);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function s(){s=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var r=e&&e.prototype instanceof _?e:_,s=Object.create(r.prototype),a=new A(i||[]);return o(s,"_invoke",{value:I(t,n,a)}),s}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",v="completed",y={};function _(){}function b(){}function w(){}var k={};d(k,l,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(P([])));S&&S!==n&&i.call(S,l)&&(k=S);var T=w.prototype=_.prototype=Object.create(k);function C(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(s,o,a,l){var c=p(t[s],t,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==r(d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,l)}))}l(c.arg)}var s;o(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return s=s?s.then(r,r):r()}})}function I(e,n,i){var r=f;return function(s,o){if(r===g)throw Error("Generator is already running");if(r===v){if("throw"===s)throw o;return{value:t,done:!0}}for(i.method=s,i.arg=o;;){var a=i.delegate;if(a){var l=D(a,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var c=p(e,n,i);if("normal"===c.type){if(r=i.done?v:m,c.arg===y)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=v,i.method="throw",i.arg=c.arg)}}}function D(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,D(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var s=p(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,y;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function n(){for(;++s<e.length;)if(i.call(e,s))return n.value=e[s],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=w,o(T,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},C(E.prototype),d(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new E(h(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(T),d(T,u,"Generator"),d(T,l,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;M(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:P(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function o(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){o(s,i,r,a,l,"next",t)}function l(t){o(s,i,r,a,l,"throw",t)}a(void 0)}))}}function l(t){var e;return(null!==(e=null===i.ob||void 0===i.ob?void 0:i.ob.featureFlags)&&void 0!==e?e:[]).some((function(e){return e.name===t&&e.enabled}))}function c(t){return u.apply(this,arguments)}function u(){return(u=a(s().mark((function t(e){var n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/user/current/featureflag/enable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});case 3:if((n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:throw i=t.sent,new Error(i.message);case 9:return t.abrupt("return",!0);case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0.message),t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function d(t){return h.apply(this,arguments)}function h(){return(h=a(s().mark((function t(e){var n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/user/current/featureflag/disable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});case 3:if((n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:throw i=t.sent,new Error(i.message);case 9:return t.abrupt("return",!0);case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0.message),t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}},5263:(t,e,n)=>{"use strict";n.d(e,{A5:()=>l,GK:()=>_,JV:()=>h,Ll:()=>u,Sy:()=>d,UH:()=>f,_U:()=>g,b:()=>c,ib:()=>m,k:()=>v,oF:()=>p,yV:()=>y});var i=n(9745),r=n(1632);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){var i,r,o;i=t,r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(r))in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t){var e=t.linkUrl;(0,i.X)("courses_opt_in_banner_clicked",{link_url:e})}function c(){(0,i.X)("courses_opt_in_banner_closed")}function u(t){var e=t.linkUrl;(0,i.X)("courses_opt_out_banner_clicked",{link_url:e})}function d(){(0,i.X)("courses_opt_out_banner_closed")}function h(t){var e=t.linkUrl,n=t.triggerId;(0,i.X)("courses_manage_clicked",{link_url:e,trigger_id:n})}function p(t){var e=t.triggerId;(0,i.X)("courses_browse_clicked",{trigger_id:e})}function f(t){var e=t.authorName,n=t.course,s=void 0===n?{}:n,o=t.courseIsPremade,l=t.triggerId,c=t.browseCoursesContext,u=c?a(a({},(0,r.df)(c.count,c.filters)),{},{browse_courses_list_position:c.positionSelected}):{};(0,i.X)("course_viewed",a(a({trigger_id:l},(0,r.ci)(a(a({},s),{},{authorName:e,courseIsPremade:o}))),u))}function m(t){var e=t.authorName,n=t.course,s=void 0===n?{}:n,o=t.courseIsPremade,l=t.module,c=void 0===l?{}:l,u=t.triggerId,d=t.unit,h=void 0===d?{}:d;(0,i.X)("course_unit_viewed",a(a(a({trigger_id:u},(0,r.ci)(a(a({},s),{},{authorName:e,courseIsPremade:o}))),(0,r.Aw)(c)),(0,r.y2)(h)))}function g(t){var e=t.authorName,n=t.course,s=void 0===n?{}:n,o=t.triggerId;(0,i.X)("premade_course_added",a({trigger_id:o},(0,r.ci)(a(a({},s),{},{authorName:e,courseIsPremade:!0}))))}function v(t){var e=t.authorName,n=t.course,s=void 0===n?{}:n,o=t.triggerId;(0,i.X)("premade_course_removed",a({trigger_id:o},(0,r.ci)(a(a({},s),{},{authorName:e,courseIsPremade:!0}))))}function y(t){var e=t.authorName,n=t.copiedCourseId,s=t.course,o=void 0===s?{}:s,l=t.triggerId;(0,i.X)("premade_course_copied",a(a({trigger_id:l},(0,r.ci)(a(a({},o),{},{authorName:e,courseIsPremade:!0}))),{},{copied_course_id:n}))}function _(t){var e=t.count,n=t.filters,s=void 0===n?{}:n;(0,i.X)("browse_courses_left_without_selection",a({},(0,r.df)(e,s)))}},9745:(t,e,n)=>{"use strict";n.d(e,{X:()=>l,p:()=>c});var i=n(5476),r=n(1632);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){var i,r,o;i=t,r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(r))in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.Ay.capture(t,a(a({},(0,r.ED)()),e))}function c(){l("$pageview")}},1632:(t,e,n)=>{"use strict";n.d(e,{Aw:()=>p,ED:()=>d,S2:()=>b,VA:()=>g,WC:()=>w,ci:()=>h,df:()=>m,ff:()=>k,lR:()=>y,mR:()=>x,y2:()=>f,yS:()=>_,zy:()=>v});var i=n(4353),r=n.n(i),s=n(3411);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){var i,r,s;i=t,r=e,s=n[e],(r=function(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(r))in i?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(){var t,e,n,i=null!==(t=null===s.ob||void 0===s.ob?void 0:s.ob.user)&&void 0!==t?t:null;return i?{user_id:i.uid,user_status:i.status,user_type:i.type,school_id:i.sid,school_name:null!==(e=null===(n=i._school)||void 0===n?void 0:n.name)&&void 0!==e?e:""}:{user_type:"guest"}}function h(t){var e=t.authorName,n=t.coid,i=t.courseIsPremade;return{course_id:n,course_publisher:e,course_name:t.name,course_type:t.type,course_is_premade:i}}function p(t){var e=t.cmid,n=t.name,i=t.o;return{module_id:e,module_name:n,module_position:(void 0===i?0:i)+1}}function f(t){var e=t.cuid,n=t.name,i=t.o;return{unit_id:e,unit_name:n,unit_position:(void 0===i?0:i)+1}}function m(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{browse_courses_text_filter:i.text?i.text:"n/a",browse_courses_publisher_filter:null!==(e=i.publisher)&&void 0!==e&&e.length?i.publisher:"n/a",browse_courses_type_filter:null!==(n=i.type)&&void 0!==n&&n.length?i.type:"n/a",browse_courses_list_count:t}}function g(t){var e=t.wid,n=t.uid,i=t.name,r=t.questions,s=void 0===r?[]:r,o=s.length,a=s.filter((function(t){return t.qid})).length,l=s.filter((function(t){return t.ssid})).length,c=o-a-l;return{worksheet_id:e,worksheet_is_saved:!!e,worksheet_owner_id:n,worksheet_title:i,worksheet_question_type:0===o||o===c?"empty":a>0&&l>0?"mixed":a>0?"exam_only":"generated_only",worksheet_total_questions:o,worksheet_exam_questions:a,worksheet_generated_questions:l,worksheet_unselected_questions:c}}function v(t){var e=t.wtid,n=t.uid,i=t.name,r=t.includeTypeRelatedProperties,s=t.questions,o=void 0===s?[]:s,a=o.length,l={};if(r){var c=o.filter((function(t){return"e"===t.type})).length,d=o.filter((function(t){return"k"===t.type})).length,h=a-c-d;l={worksheet_template_type:0===a||a===h?"empty":c>0&&d>0?"mixed":c>0?"exam_only":"generated_only",worksheet_template_exam_questions:c,worksheet_template_generated_questions:d,worksheet_template_unselected_questions:h}}return u({worksheet_template_id:e,worksheet_template_is_saved:!!e,worksheet_template_owner_id:n,worksheet_template_title:i,worksheet_template_total_questions:a},l)}function y(t){var e=t.ssid,n=t.type,i={};return n&&(i={worksheet_template_question_subskill_type:"e"===n?"exam_practice":"question_generator"}),u({worksheet_template_question_subskill_id:e,worksheet_template_question_difficulty:t.difficulty,worksheet_template_question_calculator:t.calculator,worksheet_template_question_source:t.source},i)}function _(t){var e=t.ssid,n=t.letter,i=t.name,r=t.publicid,s=t.type,o={};return s&&(o={subskill_code:"e"===s?r:"".concat(r).concat(null!=n?n:""),subskill_type:"e"===s?"exam_practice":"question_generator"}),u({subskill_id:e,subskill_name:i},o)}function b(t){return{exam_question_id:t.qid,exam_question_author_name:t.authorName,exam_question_qualification_name:t.qualificationName}}function w(t){var e,n=t.subskill,i=void 0===n?{}:n,r=t.params,s={};return i.ssid&&(s.generated_question_subskill_id=i.ssid),i.publicid&&(s.generated_question_subskill_code="".concat(i.publicid).concat(null!==(e=i.letter)&&void 0!==e?e:"")),i.name&&(s.generated_question_subskill_name=i.name),r&&(s.generated_question_parameters=JSON.stringify(r)),s}function k(t){var e=t.skill,n=t.course,i=t.source,r=t.difficulty,s=t.keywords,o={};if(e&&(o.worksheet_exam_question_modal_filter_skill_id=e.skid,o.worksheet_exam_question_modal_filter_skill_public_id=e.publicid,o.worksheet_exam_question_modal_filter_skill_name=e.name),n){var l=h(n),c=Object.fromEntries(Object.entries(l).map((function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=e[0],i=e[1];return["".concat("worksheet_exam_question_modal_filter_skill_").concat(n),i]})));o=u(u({},o),c)}return i&&(o.worksheet_exam_question_modal_filter_source=i),r&&(o.worksheet_exam_question_modal_filter_difficulty=r),s&&(o.worksheet_exam_question_modal_filter_keywords=s),o}function x(t,e){var n,i=t.aid,s=t.creatorid,o=t.type,c=t.label,d=t.setdate,h=t.duedate,p=t.toschedule,f=t.cmode,m=t.cdata,g=t._worksheet,v=e.examQuestionSource,y=e.numberOfClasses,_=e.numberOfRecipients,b="unknown";switch(o){case"c":case"t":b=g?"fixed":"flexible",n="c"===o;break;case"kc":case"kt":b="flexible",n="kc"===o;break;case"a":b=g?"fixed":b,n=!1;break;case"z":b="cleanup",n=!0}var w,k={task_id:i,task_creator_id:s,task_is_independent_practice:n,task_label:null==c?void 0:c,task_number_of_classes:y,task_number_of_recipients:_,task_days_until_schedule_date:p&&d?r()(1e3*d).diff(r()(),"days"):void 0,task_days_until_due_date:h?r()(1e3*h).diff(r()(),"days"):void 0},x={task_type:b},S={task_settings_warn_if_wrong:null==m.givewarning?void 0:m.givewarning,task_settings_prevent_reattempts:null==m.preventreattempts?void 0:m.preventreattempts,task_settings_require_working:{0:"not_required",1:"required",2:"optional"}[m.requireworking],task_settings_feedback_required:{0:"not_required",1:"required_if_incorrect",2:"always_required"}[m.requirefeedback],task_settings_use_exam_marking:null==m.accuracymeasure?void 0:1===m.accuracymeasure,task_settings_time_limit:m.timelimit?m.timelimit/60:void 0};if("fixed"===b){var T,C=g;k=u(u({},k),{},{task_number_of_questions:C.numquestions,task_type_of_questions:{m:"mixed",e:"exam_only",k:"generated_only"}[C.mix],task_number_of_subskills:(null!==(T=C._subskills)&&void 0!==T?T:[]).length}),x=u(u({},x),{},{task_type:"fixed",task_fixed_worksheet_id:C.wid,task_fixed_worksheet_title:C.name,task_fixed_worksheet_creator_id:C.uid,task_fixed_is_assessment:"a"===o})}if("flexible"===b){var E,I,D="c"===o||"t"===o?"exam_only":"generated_only";k=u(u({},k),{},{task_number_of_questions:null==m.numquestions?void 0:m.numquestions,task_number_of_subskills:(null!==(E=m.ssids)&&void 0!==E?E:[]).length,task_number_of_skills:(null!==(I=m.skids)&&void 0!==I?I:[]).length,task_type_of_questions:D});var O,M={fixednum:"fixed_number",accuracy:"accuracy",nostop:"no_stop"}[f];"fixed_number"===M&&(O=m.differentiate?"differentiate":m.interleave?"interleave":"neither"),"accuracy"===M&&(O=m.interleave?"interleave":"neither"),x=u(u({},x),{},{task_type:"flexible",task_flexible_completion_mode:M,task_flexible_selection_mode:O}),"accuracy"===M&&m.numcorrect&&m.outof&&(x.task_flexible_accuracy_required_string="".concat(m.numcorrect," out of ").concat(m.outof),x.task_flexible_accuracy_required_proportion=(m.numcorrect/m.outof).toFixed(2)),"exam_only"===D&&(x.task_flexible_exam_question_difficulty=null==m.difficulty?void 0:m.difficulty,x.task_flexible_exam_question_source=v)}if("cleanup"===x.task_type){var A,P,R=null!==(A=m.questions)&&void 0!==A?A:[],L=R.filter((function(t){return t.ssid})),N=R.filter((function(t){return t.qid})),F=function(t){if(Array.isArray(t))return l(t)}(w=new Set(L.map((function(t){return t.ssid}))))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(w)||a(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();L.length&&N.length?P="mixed":L.length?P="generated_only":N.length&&(P="exam_only"),k=u(u({},k),{},{task_label:"Cleanup Task",task_number_of_questions:R.length,task_type_of_questions:P,task_number_of_subskills:F.length})}return u(u(u({},k),x),S)}},6543:(t,e,n)=>{"use strict";n.d(e,{Kg:()=>d,Kk:()=>v,MR:()=>m,QO:()=>f,RH:()=>u,Zi:()=>g,e5:()=>p,lC:()=>l,sv:()=>y,uC:()=>h,vh:()=>c});var i=n(9745),r=n(1632);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){var i,r,o;i=t,r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(r))in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t){var e=t.triggerId;(0,i.X)("set_a_task_modal_opened",{trigger_id:e})}function c(t){var e=t.triggerId;(0,i.X)("start_a_practice_modal_opened",{trigger_id:e})}function u(t){var e=t.triggerId;(0,i.X)("learn_modal_opened",{trigger_id:e})}function d(t){var e=t.triggerId;(0,i.X)("set_a_task_modal_closed",{trigger_id:e})}function h(t){var e=t.triggerId;(0,i.X)("start_a_practice_modal_closed",{trigger_id:e})}function p(t){var e=t.triggerId;(0,i.X)("learn_modal_closed",{trigger_id:e})}function f(t){var e=t.triggerId;(0,i.X)("task_by_topic_chosen",{trigger_id:e})}function m(t){var e=t.triggerId;(0,i.X)("task_choose_questions_chosen",{trigger_id:e})}function g(t){var e=t.triggerId,n=t.numberOfSubskills,r=t.numberOfQuestionsPerSubskill,s=t.interleave;(0,i.X)("task_fixed_questions_chosen",{trigger_id:e,number_of_subskills:n,number_of_questions_per_subskill:r,interleave:s})}function v(t){var e=t.triggerId,n=t.task,s=t.additionalInformation,o=void 0===s?{}:s;(0,i.X)("task_independent_practice_started",a({trigger_id:e},(0,r.mR)(n,o)))}function y(t){var e=t.triggerId,n=t.task,s=t.additionalInformation;(0,i.X)("task_set",a({trigger_id:e},(0,r.mR)(n,s)))}},3716:(t,e,n)=>{"use strict";n.d(e,{AD:()=>m,BL:()=>A,Cd:()=>_,EY:()=>w,O6:()=>v,Sc:()=>I,UP:()=>h,YE:()=>M,YO:()=>g,YW:()=>c,Yv:()=>l,Zg:()=>x,ab:()=>u,cc:()=>p,co:()=>S,cu:()=>T,fR:()=>O,hB:()=>R,hF:()=>L,mh:()=>E,mq:()=>k,my:()=>b,od:()=>P,rr:()=>f,s6:()=>d,tn:()=>N,vF:()=>y,w9:()=>D,wT:()=>C});var i=n(9745),r=n(1632);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){var i,r,o;i=t,r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(r))in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t){var e=t.triggerId;(0,i.X)("blank_worksheet_initiated",{trigger_id:e})}function c(t){var e=t.triggerId,n=t.worksheet,s=void 0===n?{}:n,o=t.template,l=void 0===o?{}:o;(0,i.X)("worksheet_generated_from_template",a(a({trigger_id:e},(0,r.VA)(s)),(0,r.zy)(l)))}function u(t){var e=t.triggerId,n=t.worksheet,s=void 0===n?{}:n;(0,i.X)("worksheet_opened",a({trigger_id:e},(0,r.VA)(s)))}function d(t){var e=t.triggerId,n=t.isNewWorksheet,s=t.worksheet,o=void 0===s?{}:s;(0,i.X)("worksheet_saved",a({trigger_id:e,is_new_worksheet:n},(0,r.VA)(o)))}function h(t){var e=t.triggerId,n=t.worksheet,s=void 0===n?{}:n;(0,i.X)("worksheet_exited_without_saving",a({trigger_id:e,is_new_worksheet:!s.wid},(0,r.VA)(s)))}function p(t){var e=t.triggerId,n=t.worksheet,s=void 0===n?{}:n;(0,i.X)("worksheet_downloaded",a({trigger_id:e},(0,r.VA)(s)))}function f(t){var e=t.triggerId,n=t.worksheet,s=void 0===n?{}:n;(0,i.X)("worksheet_switched_to_view_mode",a({trigger_id:e},(0,r.VA)(s)))}function m(t){var e=t.triggerId,n=t.worksheet,s=void 0===n?{}:n;(0,i.X)("worksheet_switched_to_edit_mode",a({trigger_id:e},(0,r.VA)(s)))}function g(t){var e=t.triggerId,n=t.questionNumber,s=t.worksheet,o=void 0===s?{}:s;(0,i.X)("worksheet_blank_exam_question_added",a({trigger_id:e,question_number:n},(0,r.VA)(o)))}function v(t){var e=t.triggerId,n=t.questionNumber,s=t.worksheet,o=void 0===s?{}:s,l=o.questions||[],c=Number.isInteger(n)?l[n-1]:null,u=!!c&&!!c.qid;(0,i.X)("worksheet_exam_question_modal_opened",a({trigger_id:e,question_number:n,question_already_populated:u},(0,r.VA)(o)))}function y(t){var e=t.triggerId,n=t.questionNumber,s=t.worksheet,o=void 0===s?{}:s,l=t.filters,c=void 0===l?{}:l,u=o.questions||[],d=Number.isInteger(n)?u[n-1]:null,h=!!d&&!!d.qid;(0,i.X)("worksheet_exam_question_modal_closed_without_choosing",a(a({trigger_id:e,question_number:n,question_already_populated:h},(0,r.VA)(o)),(0,r.ff)(c)))}function _(t){var e=t.triggerId,n=t.questionNumber,s=t.replacingQuestion,o=t.question,l=void 0===o?{}:o,c=t.worksheet,u=void 0===c?{}:c,d=t.filters,h=void 0===d?{}:d;(0,i.X)("worksheet_exam_question_chosen",a(a(a({trigger_id:e,question_number:n,question_already_populated:s},(0,r.S2)(l)),(0,r.VA)(u)),(0,r.ff)(h)))}function b(t){var e=t.triggerId,n=t.questionNumber,s=t.question,o=t.worksheet,l=void 0===o?{}:o,c=s?(0,r.S2)(s):{};(0,i.X)("worksheet_exam_question_removed",a(a({trigger_id:e,question_number:n,question_already_populated:!!s},c),(0,r.VA)(l)))}function w(t){var e=t.triggerId,n=t.questionNumber,s=t.worksheet,o=void 0===s?{}:s;(0,i.X)("worksheet_blank_generated_question_added",a({trigger_id:e,question_number:n},(0,r.VA)(o)))}function k(t){var e=t.triggerId,n=t.questionNumber,s=t.worksheet,o=void 0===s?{}:s,l=o.questions||[],c=Number.isInteger(n)?l[n-1]:null,u=!!c&&!!c.ssid;(0,i.X)("worksheet_generated_question_modal_opened",a({trigger_id:e,question_number:n,question_already_populated:u},(0,r.VA)(o)))}function x(t){var e=t.triggerId,n=t.questionNumber,s=t.course,o=t.subskill,l=t.worksheet,c=void 0===l?{}:l,u=c.questions||[],d=Number.isInteger(n)?u[n-1]:null,h=!!d&&!!d.ssid,p=s?(0,r.ci)(s):{},f=o?(0,r.yS)(o):{};(0,i.X)("worksheet_generated_question_modal_closed_without_choosing",a(a(a({trigger_id:e,question_number:n,question_already_populated:h},p),f),(0,r.VA)(c)))}function S(t){var e=t.triggerId,n=t.questionNumber,s=t.replacingQuestion,o=t.course,l=void 0===o?{}:o,c=t.question,u=void 0===c?{}:c,d=t.worksheet,h=void 0===d?{}:d;(0,i.X)("worksheet_generated_question_chosen",a(a(a({trigger_id:e,question_number:n,question_already_populated:s},(0,r.ci)(l)),(0,r.WC)(u)),(0,r.VA)(h)))}function T(t){var e=t.triggerId,n=t.questionNumber,s=t.question,o=void 0===s?{}:s,l=t.worksheet,c=void 0===l?{}:l;(0,i.X)("worksheet_generated_question_regenerated",a(a({trigger_id:e,question_number:n},(0,r.WC)(o)),(0,r.VA)(c)))}function C(t){var e=t.triggerId,n=t.questionNumber,s=t.question,o=void 0===s?{}:s,l=t.worksheet,c=void 0===l?{}:l;(0,i.X)("worksheet_generated_question_removed",a(a({trigger_id:e,question_number:n},(0,r.WC)(o)),(0,r.VA)(c)))}function E(t){var e=t.triggerId,n=t.template,s=t.shadowWorksheetId,o=n?(0,r.zy)(n):{};(0,i.X)("worksheet_template_initiated",a(a({trigger_id:e},o),{},{shadow_worksheet_id:s}))}function I(t){var e=t.triggerId,n=t.template,s=void 0===n?{}:n;(0,i.X)("worksheet_template_opened",a({trigger_id:e},(0,r.zy)(s)))}function D(t){var e=t.triggerId,n=t.isNewTemplate,s=t.template,o=void 0===s?{}:s;(0,i.X)("worksheet_template_saved",a({trigger_id:e,is_new_template:n},(0,r.zy)(o)))}function O(t){var e=t.triggerId,n=t.questionNumber,s=t.template,o=void 0===s?{}:s,l=o.questions||[],c=Number.isInteger(n)?l[n-1]:null,u=c?(0,r.lR)(c):{};(0,i.X)("worksheet_template_question_added",a(a({trigger_id:e,question_number:n},u),(0,r.zy)(o)))}function M(t){var e=t.triggerId,n=t.questionNumber,s=t.template,o=void 0===s?{}:s,l=o.questions||[],c=Number.isInteger(n)?l[n-1]:null,u=!!c&&!!c.ssid;(0,i.X)("worksheet_template_subskill_modal_opened",a({trigger_id:e,question_number:n,question_already_populated:u},(0,r.zy)(o)))}function A(t){var e=t.triggerId,n=t.questionNumber,s=t.course,o=t.subskill,l=t.template,c=void 0===l?{}:l,u=c.questions||[],d=Number.isInteger(n)?u[n-1]:null,h=!!d&&!!d.ssid,p=s?(0,r.ci)(s):{},f=o?(0,r.yS)(o):{};(0,i.X)("worksheet_template_subskill_modal_closed_without_choosing",a(a(a({trigger_id:e,question_number:n,question_already_populated:h},p),f),(0,r.zy)(c)))}function P(t){var e=t.triggerId,n=t.questionNumber,s=t.replacingQuestion,o=t.course,l=void 0===o?{}:o,c=t.subskill,u=void 0===c?{}:c,d=t.template,h=void 0===d?{}:d;(0,i.X)("worksheet_template_subskill_chosen",a(a(a({trigger_id:e,question_number:n,question_already_populated:s},(0,r.ci)(l)),(0,r.yS)(u)),(0,r.zy)(h)))}function R(t){var e=t.triggerId,n=t.questionNumber,s=t.question,o=t.template,l=void 0===o?{}:o,c=s?(0,r.lR)(s):{};(0,i.X)("worksheet_template_question_removed",a(a({trigger_id:e,question_number:n},c),(0,r.zy)(l)))}function L(t){var e=t.triggerId,n=t.wdid;(0,i.X)("worksheet_home_directory_viewed",{trigger_id:e,worksheet_directory_id:n})}function N(t){var e=t.triggerId;(0,i.X)("worksheets_past_papers_directory_viewed",{trigger_id:e})}},4353:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",i="second",r="minute",s="hour",o="day",a="week",l="month",c="quarter",u="year",d="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},g=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},v={s:g,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+g(i,2,"0")+":"+g(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(i,l),s=n-r<0,o=e.clone().add(i+(s?-1:1),l);return+(-(i+(n-r)/(s?r-o:o-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:u,w:a,d:o,D:d,h:s,m:r,s:i,ms:n,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",_={};_[y]=m;var b="$isDayjsObject",w=function(t){return t instanceof T||!(!t||!t[b])},k=function t(e,n,i){var r;if(!e)return y;if("string"==typeof e){var s=e.toLowerCase();_[s]&&(r=s),n&&(_[s]=n,r=s);var o=e.split("-");if(!r&&o.length>1)return t(o[0])}else{var a=e.name;_[a]=e,r=a}return!i&&r&&(y=r),r||!i&&y},x=function(t,e){if(w(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new T(n)},S=v;S.l=k,S.i=w,S.w=function(t,e){return x(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var T=function(){function m(t){this.$L=k(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[b]=!0}var g=m.prototype;return g.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(p);if(i){var r=i[2]-1||0,s=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(e)}(t),this.init()},g.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},g.$utils=function(){return S},g.isValid=function(){return!(this.$d.toString()===h)},g.isSame=function(t,e){var n=x(t);return this.startOf(e)<=n&&n<=this.endOf(e)},g.isAfter=function(t,e){return x(t)<this.startOf(e)},g.isBefore=function(t,e){return this.endOf(e)<x(t)},g.$g=function(t,e,n){return S.u(t)?this[e]:this.set(n,t)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(t,e){var n=this,c=!!S.u(e)||e,h=S.p(t),p=function(t,e){var i=S.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return c?i:i.endOf(o)},f=function(t,e){return S.w(n.toDate()[t].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case u:return c?p(1,0):p(31,11);case l:return c?p(1,g):p(0,g+1);case a:var _=this.$locale().weekStart||0,b=(m<_?m+7:m)-_;return p(c?v-b:v+(6-b),g);case o:case d:return f(y+"Hours",0);case s:return f(y+"Minutes",1);case r:return f(y+"Seconds",2);case i:return f(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(t){return this.startOf(t,!1)},g.$set=function(t,e){var a,c=S.p(t),h="set"+(this.$u?"UTC":""),p=(a={},a[o]=h+"Date",a[d]=h+"Date",a[l]=h+"Month",a[u]=h+"FullYear",a[s]=h+"Hours",a[r]=h+"Minutes",a[i]=h+"Seconds",a[n]=h+"Milliseconds",a)[c],f=c===o?this.$D+(e-this.$W):e;if(c===l||c===u){var m=this.clone().set(d,1);m.$d[p](f),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},g.set=function(t,e){return this.clone().$set(t,e)},g.get=function(t){return this[S.p(t)]()},g.add=function(n,c){var d,h=this;n=Number(n);var p=S.p(c),f=function(t){var e=x(h);return S.w(e.date(e.date()+Math.round(t*n)),h)};if(p===l)return this.set(l,this.$M+n);if(p===u)return this.set(u,this.$y+n);if(p===o)return f(1);if(p===a)return f(7);var m=(d={},d[r]=t,d[s]=e,d[i]=1e3,d)[p]||1,g=this.$d.getTime()+n*m;return S.w(g,this)},g.subtract=function(t,e){return this.add(-1*t,e)},g.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var i=t||"YYYY-MM-DDTHH:mm:ssZ",r=S.z(this),s=this.$H,o=this.$m,a=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,d=function(t,n,r,s){return t&&(t[n]||t(e,i))||r[n].slice(0,s)},p=function(t){return S.s(s%12||12,t,"0")},m=u||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(f,(function(t,i){return i||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return S.s(e.$y,4,"0");case"M":return a+1;case"MM":return S.s(a+1,2,"0");case"MMM":return d(n.monthsShort,a,c,3);case"MMMM":return d(c,a);case"D":return e.$D;case"DD":return S.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return d(n.weekdaysMin,e.$W,l,2);case"ddd":return d(n.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(s);case"HH":return S.s(s,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(s,o,!0);case"A":return m(s,o,!1);case"m":return String(o);case"mm":return S.s(o,2,"0");case"s":return String(e.$s);case"ss":return S.s(e.$s,2,"0");case"SSS":return S.s(e.$ms,3,"0");case"Z":return r}return null}(t)||r.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,d,h){var p,f=this,m=S.p(d),g=x(n),v=(g.utcOffset()-this.utcOffset())*t,y=this-g,_=function(){return S.m(f,g)};switch(m){case u:p=_()/12;break;case l:p=_();break;case c:p=_()/3;break;case a:p=(y-v)/6048e5;break;case o:p=(y-v)/864e5;break;case s:p=y/e;break;case r:p=y/t;break;case i:p=y/1e3;break;default:p=y}return h?p:S.a(p)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return _[this.$L]},g.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=k(t,e,!0);return i&&(n.$L=i),n},g.clone=function(){return S.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),C=T.prototype;return x.prototype=C,[["$ms",n],["$s",i],["$m",r],["$H",s],["$W",o],["$M",l],["$y",u],["$D",d]].forEach((function(t){C[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),x.extend=function(t,e){return t.$i||(t(e,T,x),t.$i=!0),x},x.locale=k,x.isDayjs=w,x.unix=function(t){return x(1e3*t)},x.en=_[y],x.Ls=_,x.p={},x}()},3104:(t,e,n)=>{"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))}function s(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function o(t,e,n){var i,r=((i={})[t]=e,i.path="/",i.expires=void 0,i);if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),r.expires=s.toUTCString()}var o=[];for(var l in r)o.push("".concat(l,"=").concat(r[l]));return document.cookie=o.join("; "),a(t)}function a(t){return(e={},document.cookie.split(";").forEach((function(t){var n=t.split("="),i=n[0],r=n[1];e[i.trim()]=r})),e)[t];var e}n.d(e,{A:()=>ot}),"function"==typeof SuppressedError&&SuppressedError;var l,c=(l={},function(t,e){return void 0===e&&(e="introjs-stamp"),l[e]=l[e]||0,void 0===t[e]&&(t[e]=l[e]++),t[e]}),u=new(function(){function t(){this.events_key="introjs_event"}return t.prototype._id=function(t,e,n){return t+c(e)+(n?"_".concat(c(n)):"")},t.prototype.on=function(t,e,n,i,r){var s=this._id(e,n,i),o=function(e){return n(i||t,e||window.event)};"addEventListener"in t?t.addEventListener(e,o,r):"attachEvent"in t&&t.attachEvent("on".concat(e),o),t[this.events_key]=t[this.events_key]||{},t[this.events_key][s]=o},t.prototype.off=function(t,e,n,i,r){var s=this._id(e,n,i),o=t[this.events_key]&&t[this.events_key][s];o&&("removeEventListener"in t?t.removeEventListener(e,o,r):"detachEvent"in t&&t.detachEvent("on".concat(e),o),t[this.events_key][s]=null)},t}()),d=function(t){return"function"==typeof t};function h(t,e){if(t instanceof SVGElement){var n=t.getAttribute("class")||"";n.match(e)||t.setAttribute("class","".concat(n," ").concat(e))}else if(void 0!==t.classList)for(var i=0,r=e.split(" ");i<r.length;i++){var s=r[i];t.classList.add(s)}else t.className.match(e)||(t.className+=" ".concat(e))}function p(t,e){var n="";return"currentStyle"in t?n=t.currentStyle[e]:document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(t,null).getPropertyValue(e)),n&&n.toLowerCase?n.toLowerCase():n}function f(t,e){if(t){var n=function(t){var e=window.getComputedStyle(t),n="absolute"===e.position,i=/(auto|scroll)/;if("fixed"===e.position)return document.body;for(var r=t;r=r.parentElement;)if(e=window.getComputedStyle(r),(!n||"static"!==e.position)&&i.test(e.overflow+e.overflowY+e.overflowX))return r;return document.body}(e);n!==document.body&&(n.scrollTop=e.offsetTop-n.offsetTop)}}function m(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var t=document.documentElement;return{width:t.clientWidth,height:t.clientHeight}}function g(t,e,n,i,r){var s;if("off"!==e&&t&&(s="tooltip"===e?r.getBoundingClientRect():i.getBoundingClientRect(),!function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom+80<=window.innerHeight&&e.right<=window.innerWidth}(i))){var o=m().height;s.bottom-(s.bottom-s.top)<0||i.clientHeight>o?window.scrollBy(0,s.top-(o/2-s.height/2)-n):window.scrollBy(0,s.top-(o/2-s.height/2)+n)}}function v(t){t.setAttribute("role","button"),t.tabIndex=0}function y(t){var e=t.parentElement;return!(!e||"HTML"===e.nodeName)&&("fixed"===p(t,"position")||y(e))}function _(t,e){var n=document.body,i=document.documentElement,r=window.pageYOffset||i.scrollTop||n.scrollTop,s=window.pageXOffset||i.scrollLeft||n.scrollLeft;e=e||n;var o=t.getBoundingClientRect(),a=e.getBoundingClientRect(),l=p(e,"position"),c={width:o.width,height:o.height};return"body"!==e.tagName.toLowerCase()&&"relative"===l||"sticky"===l?Object.assign(c,{top:o.top-a.top,left:o.left-a.left}):y(t)?Object.assign(c,{top:o.top,left:o.left}):Object.assign(c,{top:o.top+r,left:o.left+s})}function b(t,e){if(t instanceof SVGElement){var n=t.getAttribute("class")||"";t.setAttribute("class",n.replace(e,"").replace(/^\s+|\s+$/g,""))}else t.className=t.className.replace(e,"").replace(/^\s+|\s+$/g,"")}function w(t,e){var n="";if(t.style.cssText&&(n+=t.style.cssText),"string"==typeof e)n+=e;else for(var i in e)n+="".concat(i,":").concat(e[i],";");t.style.cssText=n}function k(t,e,n){if(n&&e){var i=_(e.element,t._targetElement),r=t._options.helperElementPadding;e.element instanceof Element&&y(e.element)?h(n,"introjs-fixedTooltip"):b(n,"introjs-fixedTooltip"),"floating"===e.position&&(r=0),w(n,{width:"".concat(i.width+r,"px"),height:"".concat(i.height+r,"px"),top:"".concat(i.top-r/2,"px"),left:"".concat(i.left-r/2,"px")})}}function x(t,e,n,i,r){return t.left+e+n.width>i.width?(r.style.left="".concat(i.width-n.width-t.left,"px"),!1):(r.style.left="".concat(e,"px"),!0)}function S(t,e,n,i){return t.left+t.width-e-n.width<0?(i.style.left="".concat(-t.left,"px"),!1):(i.style.right="".concat(e,"px"),!0)}function T(t,e){t.includes(e)&&t.splice(t.indexOf(e),1)}function C(t,e,n,i,r){if(void 0===r&&(r=!1),e){var s,o,a,l,c="";n.style.top="",n.style.right="",n.style.bottom="",n.style.left="",n.style.marginLeft="",n.style.marginTop="",i.style.display="inherit",c="string"==typeof e.tooltipClass?e.tooltipClass:t._options.tooltipClass,n.className=["introjs-tooltip",c].filter(Boolean).join(" "),n.setAttribute("role","dialog"),"floating"!==(l=e.position)&&t._options.autoPosition&&(l=function(t,e,n,i){var r=t.slice(),s=m(),o=_(n).height+10,a=_(n).width+20,l=e.getBoundingClientRect(),c="floating";if(l.bottom+o>s.height&&T(r,"bottom"),l.top-o<0&&T(r,"top"),l.right+a>s.width&&T(r,"right"),l.left-a<0&&T(r,"left"),i&&(i=i.split("-")[0]),r.length&&(c=r[0],r.includes(i)&&(c=i)),"top"===c||"bottom"===c){var u=void 0,d=[];"top"===c?(u="top-middle-aligned",d=["top-left-aligned","top-middle-aligned","top-right-aligned"]):(u="bottom-middle-aligned",d=["bottom-left-aligned","bottom-middle-aligned","bottom-right-aligned"]),c=function(t,e,n,i){var r=e/2,s=Math.min(n,window.screen.width);return s-t<e&&(T(i,"top-left-aligned"),T(i,"bottom-left-aligned")),(t<r||s-t<r)&&(T(i,"top-middle-aligned"),T(i,"bottom-middle-aligned")),t<e&&(T(i,"top-right-aligned"),T(i,"bottom-right-aligned")),i.length?i[0]:null}(l.left,a,s.width,d)||u}return c}(t._options.positionPrecedence,e.element,n,l)),o=_(e.element),s=_(n),a=m(),h(n,"introjs-".concat(l));var u=o.width/2-s.width/2;switch(l){case"top-right-aligned":i.className="introjs-arrow bottom-right";var d=0;S(o,d,s,n),n.style.bottom="".concat(o.height+20,"px");break;case"top-middle-aligned":i.className="introjs-arrow bottom-middle",r&&(u+=5),S(o,u,s,n)&&(n.style.right="",x(o,u,s,a,n)),n.style.bottom="".concat(o.height+20,"px");break;case"top-left-aligned":case"top":i.className="introjs-arrow bottom",x(o,r?0:15,s,a,n),n.style.bottom="".concat(o.height+20,"px");break;case"right":n.style.left="".concat(o.width+20,"px"),o.top+s.height>a.height?(i.className="introjs-arrow left-bottom",n.style.top="-".concat(s.height-o.height-20,"px")):i.className="introjs-arrow left";break;case"left":r||!0!==t._options.showStepNumbers||(n.style.top="15px"),o.top+s.height>a.height?(n.style.top="-".concat(s.height-o.height-20,"px"),i.className="introjs-arrow right-bottom"):i.className="introjs-arrow right",n.style.right="".concat(o.width+20,"px");break;case"floating":i.style.display="none",n.style.left="50%",n.style.top="50%",n.style.marginLeft="-".concat(s.width/2,"px"),n.style.marginTop="-".concat(s.height/2,"px");break;case"bottom-right-aligned":i.className="introjs-arrow top-right",S(o,d=0,s,n),n.style.top="".concat(o.height+20,"px");break;case"bottom-middle-aligned":i.className="introjs-arrow top-middle",r&&(u+=5),S(o,u,s,n)&&(n.style.right="",x(o,u,s,a,n)),n.style.top="".concat(o.height+20,"px");break;default:i.className="introjs-arrow top",x(o,0,s,a,n),n.style.top="".concat(o.height+20,"px")}}}function E(){for(var t=0,e=Array.from(document.querySelectorAll(".introjs-showElement"));t<e.length;t++)b(e[t],/introjs-[a-zA-Z]+/g)}function I(t,e){var n=document.createElement(t);e=e||{};var i=/^(?:role|data-|aria-)/;for(var r in e){var s=e[r];"style"===r&&"function"!=typeof s?w(n,s):"string"==typeof s&&r.match(i)?n.setAttribute(r,s):n[r]=s}return n}function D(t,e,n){if(void 0===n&&(n=!1),n){var i=e.style.opacity||"1";w(e,{opacity:"0"}),window.setTimeout((function(){w(e,{opacity:i})}),10)}t.appendChild(e)}function O(t,e){return(t+1)/e*100}function M(t,e){var n=I("div",{className:"introjs-bullets"});!1===t._options.showBullets&&(n.style.display="none");var i=I("ul");i.setAttribute("role","tablist");for(var r=function(){var e=this.getAttribute("data-step-number");null!=e&&t.goToStep(parseInt(e,10))},s=0;s<t._introItems.length;s++){var o=t._introItems[s].step,a=I("li"),l=I("a");a.setAttribute("role","presentation"),l.setAttribute("role","tab"),l.onclick=r,s===e.step-1&&(l.className="active"),v(l),l.innerHTML="&nbsp;",l.setAttribute("data-step-number",o.toString()),a.appendChild(l),i.appendChild(a)}return n.appendChild(i),n}function A(t,e,n){var i=t.querySelector(".introjs-progress .introjs-progressbar");if(i){var r=O(e,n);i.style.cssText="width:".concat(r,"%;"),i.setAttribute("aria-valuenow",r.toString())}}function P(t,e){return r(this,void 0,void 0,(function(){var n,i,o,a,l,c,u,m,y,_,b,x,S,T,P,R,L,q,j,$,H,z,B,W,U=this;return s(this,(function(Q){switch(Q.label){case 0:return d(t._introChangeCallback)?[4,t._introChangeCallback.call(t,e.element)]:[3,2];case 1:Q.sent(),Q.label=2;case 2:return n=document.querySelector(".introjs-helperLayer"),i=document.querySelector(".introjs-tooltipReferenceLayer"),o="introjs-helperLayer","string"==typeof e.highlightClass&&(o+=" ".concat(e.highlightClass)),"string"==typeof t._options.highlightClass&&(o+=" ".concat(t._options.highlightClass)),null!==n&&null!==i?(u=i.querySelector(".introjs-helperNumberLayer"),m=i.querySelector(".introjs-tooltiptext"),y=i.querySelector(".introjs-tooltip-title"),_=i.querySelector(".introjs-arrow"),b=i.querySelector(".introjs-tooltip"),c=i.querySelector(".introjs-skipbutton"),l=i.querySelector(".introjs-prevbutton"),a=i.querySelector(".introjs-nextbutton"),n.className=o,b.style.opacity="0",b.style.display="none",f(t._options.scrollToElement,e.element),k(t,e,n),k(t,e,i),E(),t._lastShowElementTimer&&window.clearTimeout(t._lastShowElementTimer),t._lastShowElementTimer=window.setTimeout((function(){null!==u&&(u.innerHTML="".concat(e.step," ").concat(t._options.stepNumbersOfLabel," ").concat(t._introItems.length)),m.innerHTML=e.intro||"",y.innerHTML=e.title||"",b.style.display="block",C(t,e,b,_),function(t,e,n){if(t){var i=e.querySelector(".introjs-bullets li > a.active"),r=e.querySelector('.introjs-bullets li > a[data-step-number="'.concat(n.step,'"]'));i&&r&&(i.className="",r.className="active")}}(t._options.showBullets,i,e),A(i,t._currentStep,t._introItems.length),b.style.opacity="1",(null!=a&&/introjs-donebutton/gi.test(a.className)||null!=a)&&a.focus(),g(t._options.scrollToElement,e.scrollTo,t._options.scrollPadding,e.element,m)}),350)):(x=I("div",{className:o}),S=I("div",{className:"introjs-tooltipReferenceLayer"}),T=I("div",{className:"introjs-arrow"}),P=I("div",{className:"introjs-tooltip"}),R=I("div",{className:"introjs-tooltiptext"}),L=I("div",{className:"introjs-tooltip-header"}),q=I("h1",{className:"introjs-tooltip-title"}),j=I("div"),w(x,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(t._options.overlayOpacity.toString(),") 0 0 0 5000px")}),f(t._options.scrollToElement,e.element),k(t,e,x),k(t,e,S),D(t._targetElement,x,!0),D(t._targetElement,S),R.innerHTML=e.intro,q.innerHTML=e.title,j.className="introjs-tooltipbuttons",!1===t._options.showButtons&&(j.style.display="none"),L.appendChild(q),P.appendChild(L),P.appendChild(R),t._options.dontShowAgain&&($=I("div",{className:"introjs-dontShowAgain"}),(H=I("input",{type:"checkbox",id:"introjs-dontShowAgain",name:"introjs-dontShowAgain"})).onchange=function(e){t.setDontShowAgain(e.target.checked)},(z=I("label",{htmlFor:"introjs-dontShowAgain"})).innerText=t._options.dontShowAgainLabel,$.appendChild(H),$.appendChild(z),P.appendChild($)),P.appendChild(M(t,e)),P.appendChild(function(t){var e=I("div");e.className="introjs-progress",!1===t._options.showProgress&&(e.style.display="none");var n=I("div",{className:"introjs-progressbar"});t._options.progressBarAdditionalClass&&(n.className+=" "+t._options.progressBarAdditionalClass);var i=O(t._currentStep,t._introItems.length);return n.setAttribute("role","progress"),n.setAttribute("aria-valuemin","0"),n.setAttribute("aria-valuemax","100"),n.setAttribute("aria-valuenow",i.toString()),n.style.cssText="width:".concat(i,"%;"),e.appendChild(n),e}(t)),B=I("div"),!0===t._options.showStepNumbers&&(B.className="introjs-helperNumberLayer",B.innerHTML="".concat(e.step," ").concat(t._options.stepNumbersOfLabel," ").concat(t._introItems.length),P.appendChild(B)),P.appendChild(T),S.appendChild(P),(a=I("a")).onclick=function(){return r(U,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t._introItems.length-1===t._currentStep?[3,2]:[4,N(t)];case 1:return e.sent(),[3,6];case 2:return/introjs-donebutton/gi.test(a.className)?d(t._introCompleteCallback)?[4,t._introCompleteCallback.call(t,t._currentStep,"done")]:[3,4]:[3,6];case 3:e.sent(),e.label=4;case 4:return[4,nt(t,t._targetElement)];case 5:e.sent(),e.label=6;case 6:return[2]}}))}))},v(a),a.innerHTML=t._options.nextLabel,(l=I("a")).onclick=function(){return r(U,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t._currentStep>0?[4,F(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},v(l),l.innerHTML=t._options.prevLabel,v(c=I("a",{className:"introjs-skipbutton"})),c.innerHTML=t._options.skipLabel,c.onclick=function(){return r(U,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t._introItems.length-1===t._currentStep&&d(t._introCompleteCallback)?[4,t._introCompleteCallback.call(t,t._currentStep,"skip")]:[3,2];case 1:e.sent(),e.label=2;case 2:return d(t._introSkipCallback)?[4,t._introSkipCallback.call(t,t._currentStep)]:[3,4];case 3:e.sent(),e.label=4;case 4:return[4,nt(t,t._targetElement)];case 5:return e.sent(),[2]}}))}))},L.appendChild(c),t._introItems.length>1&&j.appendChild(l),j.appendChild(a),P.appendChild(j),C(t,e,P,T),g(t._options.scrollToElement,e.scrollTo,t._options.scrollPadding,e.element,P)),(W=t._targetElement.querySelector(".introjs-disableInteraction"))&&W.parentNode&&W.parentNode.removeChild(W),e.disableInteraction&&function(t,e){var n=document.querySelector(".introjs-disableInteraction");null===n&&(n=I("div",{className:"introjs-disableInteraction"}),t._targetElement.appendChild(n)),k(t,e,n)}(t,e),0===t._currentStep&&t._introItems.length>1?(null!=a&&(a.className="".concat(t._options.buttonClass," introjs-nextbutton"),a.innerHTML=t._options.nextLabel),!0===t._options.hidePrev?(null!=l&&(l.className="".concat(t._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=a&&h(a,"introjs-fullbutton")):null!=l&&(l.className="".concat(t._options.buttonClass," introjs-prevbutton introjs-disabled"))):t._introItems.length-1===t._currentStep||1===t._introItems.length?(null!=l&&(l.className="".concat(t._options.buttonClass," introjs-prevbutton")),!0===t._options.hideNext?(null!=a&&(a.className="".concat(t._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=l&&h(l,"introjs-fullbutton")):null!=a&&(!0===t._options.nextToDone?(a.innerHTML=t._options.doneLabel,h(a,"".concat(t._options.buttonClass," introjs-nextbutton introjs-donebutton"))):a.className="".concat(t._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=l&&(l.className="".concat(t._options.buttonClass," introjs-prevbutton")),null!=a&&(a.className="".concat(t._options.buttonClass," introjs-nextbutton"),a.innerHTML=t._options.nextLabel)),null!=l&&l.setAttribute("role","button"),null!=a&&a.setAttribute("role","button"),null!=c&&c.setAttribute("role","button"),null!=a&&a.focus(),function(t){h(t,"introjs-showElement");var e=p(t,"position");"absolute"!==e&&"relative"!==e&&"sticky"!==e&&"fixed"!==e&&h(t,"introjs-relativePosition")}(e.element),d(t._introAfterChangeCallback)?[4,t._introAfterChangeCallback.call(t,e.element)]:[3,4];case 3:Q.sent(),Q.label=4;case 4:return[2]}}))}))}function R(t,e){return r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return t._currentStep=e-2,void 0===t._introItems?[3,2]:[4,N(t)];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function L(t,e){return r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return t._currentStepNumber=e,void 0===t._introItems?[3,2]:[4,N(t)];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function N(t){return r(this,void 0,void 0,(function(){var e,n,i;return s(this,(function(r){switch(r.label){case 0:if(t._direction="forward",void 0!==t._currentStepNumber)for(e=0;e<t._introItems.length;e++)t._introItems[e].step===t._currentStepNumber&&(t._currentStep=e-1,t._currentStepNumber=void 0);return-1===t._currentStep?t._currentStep=0:++t._currentStep,n=t._introItems[t._currentStep],i=!0,d(t._introBeforeChangeCallback)?[4,t._introBeforeChangeCallback.call(t,n&&n.element,t._currentStep,t._direction)]:[3,2];case 1:i=r.sent(),r.label=2;case 2:return!1===i?(--t._currentStep,[2,!1]):t._introItems.length<=t._currentStep?d(t._introCompleteCallback)?[4,t._introCompleteCallback.call(t,t._currentStep,"end")]:[3,4]:[3,6];case 3:r.sent(),r.label=4;case 4:return[4,nt(t,t._targetElement)];case 5:return r.sent(),[2,!1];case 6:return[4,P(t,n)];case 7:return r.sent(),[2,!0]}}))}))}function F(t){return r(this,void 0,void 0,(function(){var e,n;return s(this,(function(i){switch(i.label){case 0:return t._direction="backward",t._currentStep<=0?[2,!1]:(--t._currentStep,e=t._introItems[t._currentStep],n=!0,d(t._introBeforeChangeCallback)?[4,t._introBeforeChangeCallback.call(t,e&&e.element,t._currentStep,t._direction)]:[3,2]);case 1:n=i.sent(),i.label=2;case 2:return!1===n?(++t._currentStep,[2,!1]):[4,P(t,e)];case 3:return i.sent(),[2,!0]}}))}))}function q(t,e){return r(this,void 0,void 0,(function(){var n,i;return s(this,(function(r){switch(r.label){case 0:return null===(n=void 0===e.code?e.which:e.code)&&(n=null===e.charCode?e.keyCode:e.charCode),"Escape"!==n&&27!==n||!0!==t._options.exitOnEsc?[3,2]:[4,nt(t,t._targetElement)];case 1:return r.sent(),[3,16];case 2:return"ArrowLeft"!==n&&37!==n?[3,4]:[4,F(t)];case 3:return r.sent(),[3,16];case 4:return"ArrowRight"!==n&&39!==n?[3,6]:[4,N(t)];case 5:return r.sent(),[3,16];case 6:return"Enter"!==n&&"NumpadEnter"!==n&&13!==n?[3,16]:(i=e.target||e.srcElement)&&i.className.match("introjs-prevbutton")?[4,F(t)]:[3,8];case 7:return r.sent(),[3,15];case 8:return i&&i.className.match("introjs-skipbutton")?t._introItems.length-1===t._currentStep&&d(t._introCompleteCallback)?[4,t._introCompleteCallback.call(t,t._currentStep,"skip")]:[3,10]:[3,12];case 9:r.sent(),r.label=10;case 10:return[4,nt(t,t._targetElement)];case 11:return r.sent(),[3,15];case 12:return i&&i.getAttribute("data-step-number")?(i.click(),[3,15]):[3,13];case 13:return[4,N(t)];case 14:r.sent(),r.label=15;case 15:e.preventDefault?e.preventDefault():e.returnValue=!1,r.label=16;case 16:return[2]}}))}))}function j(t){if(null===t||"object"!==i(t)||"nodeType"in t)return t;var e={};for(var n in t)"jQuery"in window&&t[n]instanceof window.jQuery?e[n]=t[n]:e[n]=j(t[n]);return e}function $(t){var e=document.querySelector(".introjs-hints");return e?Array.from(e.querySelectorAll(t)):[]}function H(t,e){return r(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=$('.introjs-hint[data-step="'.concat(e,'"]'))[0],G(),n&&h(n,"introjs-hidehint"),d(t._hintCloseCallback)?[4,t._hintCloseCallback.call(t,e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}function z(t){return r(this,void 0,void 0,(function(){var e,n,i,r,o;return s(this,(function(s){switch(s.label){case 0:e=$(".introjs-hint"),n=0,i=e,s.label=1;case 1:return n<i.length?(r=i[n],(o=r.getAttribute("data-step"))?[4,H(t,parseInt(o,10))]:[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function B(t){return r(this,void 0,void 0,(function(){var e,n,i,r,o;return s(this,(function(s){switch(s.label){case 0:if(!(e=$(".introjs-hint"))||!e.length)return[3,1];for(n=0,i=e;n<i.length;n++)r=i[n],(o=r.getAttribute("data-step"))&&W(parseInt(o,10));return[3,3];case 1:return[4,X(t,t._targetElement)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function W(t){var e=$('.introjs-hint[data-step="'.concat(t,'"]'))[0];e&&b(e,/introjs-hidehint/g)}function U(t){var e=$('.introjs-hint[data-step="'.concat(t,'"]'))[0];e&&e.parentNode&&e.parentNode.removeChild(e)}function Q(t){return r(this,void 0,void 0,(function(){var e,n,i,r,o,a,l;return s(this,(function(s){switch(s.label){case 0:for(null===(e=document.querySelector(".introjs-hints"))&&(e=I("div",{className:"introjs-hints"})),n=function(e){return function(n){var i=n||window.event;i&&i.stopPropagation&&i.stopPropagation(),i&&null!==i.cancelBubble&&(i.cancelBubble=!0),V(t,e)}},i=0;i<t._hintItems.length;i++){if(r=t._hintItems[i],document.querySelector('.introjs-hint[data-step="'.concat(i,'"]')))return[2];v(o=I("a",{className:"introjs-hint"})),o.onclick=n(i),r.hintAnimation||h(o,"introjs-hint-no-anim"),y(r.element)&&h(o,"introjs-fixedhint"),a=I("div",{className:"introjs-hint-dot"}),l=I("div",{className:"introjs-hint-pulse"}),o.appendChild(a),o.appendChild(l),o.setAttribute("data-step",i.toString()),r.hintTargetElement=r.element,r.element=o,Y(r.hintPosition,o,r.hintTargetElement),e.appendChild(o)}return document.body.appendChild(e),d(t._hintsAddedCallback)?[4,t._hintsAddedCallback.call(t)]:[3,2];case 1:s.sent(),s.label=2;case 2:return t._options.hintAutoRefreshInterval>=0&&(t._hintsAutoRefreshFunction=(c=function(){return K(t)},p=t._options.hintAutoRefreshInterval,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window.clearTimeout(f),f=window.setTimeout((function(){c()}),p)}),u.on(window,"scroll",t._hintsAutoRefreshFunction,t,!0)),[2]}var c,p,f}))}))}function Y(t,e,n){if(void 0!==n){var i=_(n),r=20,s=20;switch(t){default:case"top-left":e.style.left="".concat(i.left,"px"),e.style.top="".concat(i.top,"px");break;case"top-right":e.style.left="".concat(i.left+i.width-r,"px"),e.style.top="".concat(i.top,"px");break;case"bottom-left":e.style.left="".concat(i.left,"px"),e.style.top="".concat(i.top+i.height-s,"px");break;case"bottom-right":e.style.left="".concat(i.left+i.width-r,"px"),e.style.top="".concat(i.top+i.height-s,"px");break;case"middle-left":e.style.left="".concat(i.left,"px"),e.style.top="".concat(i.top+(i.height-s)/2,"px");break;case"middle-right":e.style.left="".concat(i.left+i.width-r,"px"),e.style.top="".concat(i.top+(i.height-s)/2,"px");break;case"middle-middle":e.style.left="".concat(i.left+(i.width-r)/2,"px"),e.style.top="".concat(i.top+(i.height-s)/2,"px");break;case"bottom-middle":e.style.left="".concat(i.left+(i.width-r)/2,"px"),e.style.top="".concat(i.top+i.height-s,"px");break;case"top-middle":e.style.left="".concat(i.left+(i.width-r)/2,"px"),e.style.top="".concat(i.top,"px")}}}function V(t,e){return r(this,void 0,void 0,(function(){var n,i,r,o,a,l,c,u,h,p,f;return s(this,(function(s){switch(s.label){case 0:return n=document.querySelector('.introjs-hint[data-step="'.concat(e,'"]')),i=t._hintItems[e],d(t._hintClickCallback)?[4,t._hintClickCallback.call(t,n,i,e)]:[3,2];case 1:s.sent(),s.label=2;case 2:return void 0!==(r=G())&&parseInt(r,10)===e||(o=I("div",{className:"introjs-tooltip"}),a=I("div"),l=I("div"),c=I("div"),o.onclick=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},a.className="introjs-tooltiptext",(u=I("p")).innerHTML=i.hint||"",a.appendChild(u),t._options.hintShowButton&&((h=I("a")).className=t._options.buttonClass,h.setAttribute("role","button"),h.innerHTML=t._options.hintButtonLabel,h.onclick=function(){return H(t,e)},a.appendChild(h)),l.className="introjs-arrow",o.appendChild(l),o.appendChild(a),p=n.getAttribute("data-step")||"",t._currentStep=parseInt(p,10),f=t._hintItems[t._currentStep],c.className="introjs-tooltipReferenceLayer introjs-hintReference",c.setAttribute("data-step",p),k(t,f,c),c.appendChild(o),document.body.appendChild(c),C(t,f,o,l,!0)),[2]}}))}))}function G(){var t=document.querySelector(".introjs-hintReference");if(t&&t.parentNode){var e=t.getAttribute("data-step");if(!e)return;return t.parentNode.removeChild(t),e}}function X(t,e){return r(this,void 0,void 0,(function(){var n,i,r,o,a,l,c,d,h,p;return s(this,(function(s){switch(s.label){case 0:if(t._hintItems=[],t._options.hints&&t._options.hints.length>0)for(n=0,i=t._options.hints;n<i.length;n++)r=i[n],"string"==typeof(o=j(r)).element&&(o.element=document.querySelector(o.element)),o.hintPosition=o.hintPosition||t._options.hintPosition,o.hintAnimation=o.hintAnimation||t._options.hintAnimation,null!==o.element&&t._hintItems.push(o);else{if(!(a=Array.from(e.querySelectorAll("*[data-hint]")))||!a.length)return[2,!1];for(l=0,c=a;l<c.length;l++)d=c[l],h=d.getAttribute("data-hint-animation"),p=t._options.hintAnimation,h&&(p="true"===h),t._hintItems.push({element:d,hint:d.getAttribute("data-hint")||"",hintPosition:d.getAttribute("data-hint-position")||t._options.hintPosition,hintAnimation:p,tooltipClass:d.getAttribute("data-tooltip-class")||void 0,position:d.getAttribute("data-position")||t._options.tooltipPosition})}return[4,Q(t)];case 1:return s.sent(),u.on(document,"click",G,t,!1),u.on(window,"resize",K,t,!0),[2,!0]}}))}))}function K(t){for(var e=0,n=t._hintItems;e<n.length;e++){var i=n[e],r=i.hintTargetElement;Y(i.hintPosition,i.element,r)}}function J(t,e){var n=Array.from(e.querySelectorAll("*[data-intro]")),i=[];if(t._options.steps&&t._options.steps.length)for(var r=0,s=t._options.steps;r<s.length;r++){var o=j(h=s[r]);if(o.step=i.length+1,o.title=o.title||"","string"==typeof o.element&&(o.element=document.querySelector(o.element)||void 0),void 0===o.element||null===o.element){var a=document.querySelector(".introjsFloatingElement");null===a&&(a=I("div",{className:"introjsFloatingElement"}),document.body.appendChild(a)),o.element=a,o.position="floating"}o.position=o.position||t._options.tooltipPosition,o.scrollTo=o.scrollTo||t._options.scrollTo,void 0===o.disableInteraction&&(o.disableInteraction=t._options.disableInteraction),null!==o.element&&i.push(o)}else{var l=void 0;if(n.length<1)return[];for(var c=0,u=n;c<u.length;c++){var d=u[c];if((!t._options.group||d.getAttribute("data-intro-group")===t._options.group)&&"none"!==d.style.display){var h=parseInt(d.getAttribute("data-step")||"",10);l=t._options.disableInteraction,d.hasAttribute("data-disable-interaction")&&(l=!!d.getAttribute("data-disable-interaction")),h>0&&(i[h-1]={step:h,element:d,title:d.getAttribute("data-title")||"",intro:d.getAttribute("data-intro")||"",tooltipClass:d.getAttribute("data-tooltip-class")||void 0,highlightClass:d.getAttribute("data-highlight-class")||void 0,position:d.getAttribute("data-position")||t._options.tooltipPosition,scrollTo:d.getAttribute("data-scroll-to")||t._options.scrollTo,disableInteraction:l})}}for(var p=0,f=0,m=n;f<m.length;f++)if(d=m[f],(!t._options.group||d.getAttribute("data-intro-group")===t._options.group)&&null===d.getAttribute("data-step")){for(;void 0!==i[p];)p++;l=d.hasAttribute("data-disable-interaction")?!!d.getAttribute("data-disable-interaction"):t._options.disableInteraction,i[p]={element:d,title:d.getAttribute("data-title")||"",intro:d.getAttribute("data-intro")||"",step:p+1,tooltipClass:d.getAttribute("data-tooltip-class")||void 0,highlightClass:d.getAttribute("data-highlight-class")||void 0,position:d.getAttribute("data-position")||t._options.tooltipPosition,scrollTo:d.getAttribute("data-scroll-to")||t._options.scrollTo,disableInteraction:l}}}for(var g=[],v=0;v<i.length;v++)i[v]&&g.push(i[v]);return(i=g).sort((function(t,e){return t.step-e.step})),i}function Z(t,e){var n=t._currentStep;if(null!=n&&-1!=n){var i=t._introItems[n],r=document.querySelector(".introjs-tooltipReferenceLayer"),s=document.querySelector(".introjs-helperLayer"),o=document.querySelector(".introjs-disableInteraction");k(t,i,s),k(t,i,r),k(t,i,o),e&&(t._introItems=J(t,t._targetElement),function(t,e){if(t._options.showBullets){var n=document.querySelector(".introjs-bullets");n&&n.parentNode&&n.parentNode.replaceChild(M(t,e),n)}}(t,i),A(r,n,t._introItems.length));var a=document.querySelector(".introjs-arrow"),l=document.querySelector(".introjs-tooltip");return l&&a&&C(t,t._introItems[n],l,a),K(t),t}}function tt(t){Z(t)}function et(t,e){if(void 0===e&&(e=!1),t&&t.parentElement){var n=t.parentElement;e?(w(t,{opacity:"0"}),window.setTimeout((function(){try{n.removeChild(t)}catch(t){}}),500)):n.removeChild(t)}}function nt(t,e,n){return void 0===n&&(n=!1),r(this,void 0,void 0,(function(){var i,r,o,a;return s(this,(function(s){switch(s.label){case 0:return i=!0,void 0===t._introBeforeExitCallback?[3,2]:[4,t._introBeforeExitCallback.call(t,e)];case 1:i=s.sent(),s.label=2;case 2:if(!n&&!1===i)return[2];if((r=Array.from(e.querySelectorAll(".introjs-overlay")))&&r.length)for(o=0,a=r;o<a.length;o++)et(a[o]);return et(e.querySelector(".introjs-helperLayer"),!0),et(e.querySelector(".introjs-tooltipReferenceLayer")),et(e.querySelector(".introjs-disableInteraction")),et(document.querySelector(".introjsFloatingElement")),E(),u.off(window,"keydown",q,t,!0),u.off(window,"resize",tt,t,!0),d(t._introExitCallback)?[4,t._introExitCallback.call(t)]:[3,4];case 3:s.sent(),s.label=4;case 4:return t._currentStep=-1,[2]}}))}))}function it(t,e){return r(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return t.isActive()?d(t._introStartCallback)?[4,t._introStartCallback.call(t,e)]:[3,2]:[2,!1];case 1:i.sent(),i.label=2;case 2:return 0===(n=J(t,e)).length?[2,!1]:(t._introItems=n,function(t,e){var n=this,i=I("div",{className:"introjs-overlay"});w(i,{top:0,bottom:0,left:0,right:0,position:"fixed"}),e.appendChild(i),!0===t._options.exitOnOverlayClick&&(w(i,{cursor:"pointer"}),i.onclick=function(){return r(n,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,nt(t,e)];case 1:return n.sent(),[2]}}))}))})}(t,e),[4,N(t)]);case 3:i.sent(),e.addEventListener,t._options.keyboardNavigation&&u.on(window,"keydown",q,t,!0),u.on(window,"resize",tt,t,!0),i.label=4;case 4:return[2,!1]}}))}))}function rt(t,e,n){return t[e]=n,t}var st=function(){function t(t){this._currentStep=-1,this._introItems=[],this._hintItems=[],this._targetElement=t,this._options={steps:[],hints:[],isActive:!0,nextLabel:"Next",prevLabel:"Back",skipLabel:"",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,stepNumbersOfLabel:"of",keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,dontShowAgain:!1,dontShowAgainLabel:"Don't show this again",dontShowAgainCookie:"introjs-dontShowAgain",dontShowAgainCookieDays:365,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}return t.prototype.isActive=function(){return(!this._options.dontShowAgain||""===(t=a(this._options.dontShowAgainCookie))||"true"!==t)&&this._options.isActive;var t},t.prototype.clone=function(){return new t(this._targetElement)},t.prototype.setOption=function(t,e){return this._options=rt(this._options,t,e),this},t.prototype.setOptions=function(t){return this._options=function(t,e){for(var n=0,i=Object.entries(e);n<i.length;n++){var r=i[n];t=rt(t,r[0],r[1])}return t}(this._options,t),this},t.prototype.start=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,it(this,this._targetElement)];case 1:return t.sent(),[2,this]}}))}))},t.prototype.goToStep=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,R(this,t)];case 1:return e.sent(),[2,this]}}))}))},t.prototype.addStep=function(t){return this._options.steps||(this._options.steps=[]),this._options.steps.push(t),this},t.prototype.addSteps=function(t){if(!t.length)return this;for(var e=0;e<t.length;e++)this.addStep(t[e]);return this},t.prototype.goToStepNumber=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,L(this,t)];case 1:return e.sent(),[2,this]}}))}))},t.prototype.nextStep=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,N(this)];case 1:return t.sent(),[2,this]}}))}))},t.prototype.previousStep=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,F(this)];case 1:return t.sent(),[2,this]}}))}))},t.prototype.currentStep=function(){return this._currentStep},t.prototype.exit=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,nt(this,this._targetElement,t)];case 1:return e.sent(),[2,this]}}))}))},t.prototype.refresh=function(t){return Z(this,t),this},t.prototype.setDontShowAgain=function(t){return function(t,e){e?o(t._options.dontShowAgainCookie,"true",t._options.dontShowAgainCookieDays):o(t._options.dontShowAgainCookie,"",-1)}(this,t),this},t.prototype.onbeforechange=function(t){if(!d(t))throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=t,this},t.prototype.onchange=function(t){if(!d(t))throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=t,this},t.prototype.onafterchange=function(t){if(!d(t))throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=t,this},t.prototype.oncomplete=function(t){if(!d(t))throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=t,this},t.prototype.onhintsadded=function(t){if(!d(t))throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=t,this},t.prototype.onhintclick=function(t){if(!d(t))throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=t,this},t.prototype.onhintclose=function(t){if(!d(t))throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=t,this},t.prototype.onstart=function(t){if(!d(t))throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=t,this},t.prototype.onexit=function(t){if(!d(t))throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=t,this},t.prototype.onskip=function(t){if(!d(t))throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=t,this},t.prototype.onbeforeexit=function(t){if(!d(t))throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=t,this},t.prototype.addHints=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,X(this,this._targetElement)];case 1:return t.sent(),[2,this]}}))}))},t.prototype.hideHint=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,H(this,t)];case 1:return e.sent(),[2,this]}}))}))},t.prototype.hideHints=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,z(this)];case 1:return t.sent(),[2,this]}}))}))},t.prototype.showHint=function(t){return W(t),this},t.prototype.showHints=function(){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,B(this)];case 1:return t.sent(),[2,this]}}))}))},t.prototype.removeHints=function(){return function(t){for(var e=0,n=$(".introjs-hint");e<n.length;e++){var i=n[e].getAttribute("data-step");i&&U(parseInt(i,10))}u.off(document,"click",G,t,!1),u.off(window,"resize",K,t,!0),t._hintsAutoRefreshFunction&&u.off(window,"scroll",t._hintsAutoRefreshFunction,t,!0)}(this),this},t.prototype.removeHint=function(t){return U(t),this},t.prototype.showHintDialog=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,V(this,t)];case 1:return e.sent(),[2,this]}}))}))},t}(),ot=function t(e){var n;if("object"===i(e))n=new st(e);else if("string"==typeof e){var r=document.querySelector(e);if(!r)throw new Error("There is no element with given selector.");n=new st(r)}else n=new st(document.body);return t.instances[c(n,"introjs-instance")]=n,n};ot.version="7.2.0",ot.instances={}},7834:(t,e,n)=>{var i;i=function(t,e,n,i){var r=[],s=function(){return r.length?r[r.length-1]:null},o=function(){var t,e=!1;for(t=r.length-1;t>=0;t--)r[t].$blocker&&(r[t].$blocker.toggleClass("current",!e).toggleClass("behind",e),e=!0)};t.modal=function(e,n){var i,o;if(this.$body=t("body"),this.options=t.extend({},t.modal.defaults,n),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),this.$blocker=null,this.options.closeExisting)for(;t.modal.isActive();)t.modal.close();if(r.push(this),e.is("a"))if(o=e.attr("href"),this.anchor=e,/^#/.test(o)){if(this.$elm=t(o),1!==this.$elm.length)return null;this.$body.append(this.$elm),this.open()}else this.$elm=t("<div>"),this.$body.append(this.$elm),i=function(t,e){e.elm.remove()},this.showSpinner(),e.trigger(t.modal.AJAX_SEND),t.get(o).done((function(n){if(t.modal.isActive()){e.trigger(t.modal.AJAX_SUCCESS);var r=s();r.$elm.empty().append(n).on(t.modal.CLOSE,i),r.hideSpinner(),r.open(),e.trigger(t.modal.AJAX_COMPLETE)}})).fail((function(){e.trigger(t.modal.AJAX_FAIL),s().hideSpinner(),r.pop(),e.trigger(t.modal.AJAX_COMPLETE)}));else this.$elm=e,this.anchor=e,this.$body.append(this.$elm),this.open()},t.modal.prototype={constructor:t.modal,open:function(){var e=this;this.block(),this.anchor.blur(),this.options.doFade?setTimeout((function(){e.show()}),this.options.fadeDuration*this.options.fadeDelay):this.show(),t(n).off("keydown.modal").on("keydown.modal",(function(t){var e=s();27===t.which&&e.options.escapeClose&&e.close()})),this.options.clickClose&&this.$blocker.click((function(e){e.target===this&&t.modal.close()}))},close:function(){r.pop(),this.unblock(),this.hide(),t.modal.isActive()||t(n).off("keydown.modal")},block:function(){this.$elm.trigger(t.modal.BEFORE_BLOCK,[this._ctx()]),this.$body.css("overflow","hidden"),this.$blocker=t('<div class="'+this.options.blockerClass+' blocker current"></div>').appendTo(this.$body),o(),this.options.doFade&&this.$blocker.css("opacity",0).animate({opacity:1},this.options.fadeDuration),this.$elm.trigger(t.modal.BLOCK,[this._ctx()])},unblock:function(e){!e&&this.options.doFade?this.$blocker.fadeOut(this.options.fadeDuration,this.unblock.bind(this,!0)):(this.$blocker.children().appendTo(this.$body),this.$blocker.remove(),this.$blocker=null,o(),t.modal.isActive()||this.$body.css("overflow",""))},show:function(){this.$elm.trigger(t.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=t('<a href="#close-modal" rel="modal:close" class="close-modal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass).appendTo(this.$blocker),this.options.doFade?this.$elm.css({opacity:0,display:"inline-block"}).animate({opacity:1},this.options.fadeDuration):this.$elm.css("display","inline-block"),this.$elm.trigger(t.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(t.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove();var e=this;this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration,(function(){e.$elm.trigger(t.modal.AFTER_CLOSE,[e._ctx()])})):this.$elm.hide(0,(function(){e.$elm.trigger(t.modal.AFTER_CLOSE,[e._ctx()])})),this.$elm.trigger(t.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||t('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},_ctx:function(){return{elm:this.$elm,$elm:this.$elm,$blocker:this.$blocker,options:this.options,$anchor:this.anchor}}},t.modal.close=function(e){if(t.modal.isActive()){e&&e.preventDefault();var n=s();return n.close(),n.$elm}},t.modal.isActive=function(){return r.length>0},t.modal.getCurrent=s,t.modal.defaults={closeExisting:!0,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",modalClass:"modal",blockerClass:"jquery-modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1},t.modal.BEFORE_BLOCK="modal:before-block",t.modal.BLOCK="modal:block",t.modal.BEFORE_OPEN="modal:before-open",t.modal.OPEN="modal:open",t.modal.BEFORE_CLOSE="modal:before-close",t.modal.CLOSE="modal:close",t.modal.AFTER_CLOSE="modal:after-close",t.modal.AJAX_SEND="modal:ajax:send",t.modal.AJAX_SUCCESS="modal:ajax:success",t.modal.AJAX_FAIL="modal:ajax:fail",t.modal.AJAX_COMPLETE="modal:ajax:complete",t.fn.modal=function(e){return 1===this.length&&new t.modal(this,e),this},t(n).on("click.modal",'a[rel~="modal:close"]',t.modal.close),t(n).on("click.modal",'a[rel~="modal:open"]',(function(e){e.preventDefault(),t(this).modal()}))},"object"==typeof t.exports?i(n(4692),window,document):i(jQuery,window,document)},8497:()=>{!function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,n=t.ui.mouse.prototype,i=n._mouseInit,r=n._mouseDestroy;n._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,s(t,"mouseover"),s(t,"mousemove"),s(t,"mousedown"))},n._touchMove=function(t){e&&(this._touchMoved=!0,s(t,"mousemove"))},n._touchEnd=function(t){e&&(s(t,"mouseup"),s(t,"mouseout"),this._touchMoved||s(t,"click"),e=!1)},n._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),i.call(e)},n._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),r.call(e)}}function s(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}}(jQuery)},9983:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.extend(t.expr.pseudos,{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(n){return!!t.data(n,e)}})):function(e,n,i){return!!t.data(e,i[3])}})})?i.apply(e,r):i)||(t.exports=s)}()},724:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.fn.extend({disableSelection:(e="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(e+".ui-disableSelection",(function(t){t.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var e})?i.apply(e,r):i)||(t.exports=s)}()},1255:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.ui.focusable=function(e,n){var i,r,s,o,a,l=e.nodeName.toLowerCase();return"area"===l?(r=(i=e.parentNode).name,!(!e.href||!r||"map"!==i.nodeName.toLowerCase())&&(s=t("img[usemap='#"+r+"']")).length>0&&s.is(":visible")):(/^(input|select|textarea|button|object)$/.test(l)?(o=!e.disabled)&&(a=t(e).closest("fieldset")[0])&&(o=!a.disabled):o="a"===l&&e.href||n,o&&t(e).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"visible"===e}(t(e)))},t.extend(t.expr.pseudos,{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable})?i.apply(e,r):i)||(t.exports=s)}()},7687:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(865),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout((function(){var n=e.data("ui-form-reset-instances");t.each(n,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){if(this.form=this.element._form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})?i.apply(e,r):i)||(t.exports=s)}()},865:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.fn._form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)}})?i.apply(e,r):i)||(t.exports=s)}()},8045:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?i.apply(e,r):i)||(t.exports=s)}()},1897:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?i.apply(e,r):i)||(t.exports=s)}()},2420:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.fn.labels=function(){var e,n,i,r,s;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),(i=this.attr("id"))&&(s=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),n="label[for='"+t.escapeSelector(i)+"']",r=r.add(s.find(n).addBack(n))),this.pushStack(r)):this.pushStack([])}})?i.apply(e,r):i)||(t.exports=s)}()},2336:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],i=function(t){return t.ui.plugin={add:function(e,n,i){var r,s=t.ui[e].prototype;for(r in i)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([n,i[r]])},call:function(t,e,n,i){var r,s=t.plugins[e];if(s&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<s.length;r++)t.options[s[r][0]]&&s[r][1].apply(t.element,n)}}},void 0===(s=i.apply(e,r))||(t.exports=s)}()},4224:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],i=function(t){return function(){var e,n=Math.max,i=Math.abs,r=/left|center|right/,s=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=t.fn.position;function u(t,e,n){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?n/100:1)]}function d(e,n){return parseInt(t.css(e,n),10)||0}function h(t){return null!=t&&t===t.window}t.position={scrollbarWidth:function(){if(void 0!==e)return e;var n,i,r=t("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),s=r.children()[0];return t("body").append(r),n=s.offsetWidth,r.css("overflow","scroll"),n===(i=s.offsetWidth)&&(i=r[0].clientWidth),r.remove(),e=n-i},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=h(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:i||r?{left:0,top:0}:t(e).offset(),scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);var l,p,f,m,g,v,y,_,b="string"==typeof(e=t.extend({},e)).of?t(document).find(e.of):t(e.of),w=t.position.getWithinInfo(e.within),k=t.position.getScrollInfo(w),x=(e.collision||"flip").split(" "),S={};return v=9===(_=(y=b)[0]).nodeType?{width:y.width(),height:y.height(),offset:{top:0,left:0}}:h(_)?{width:y.width(),height:y.height(),offset:{top:y.scrollTop(),left:y.scrollLeft()}}:_.preventDefault?{width:0,height:0,offset:{top:_.pageY,left:_.pageX}}:{width:y.outerWidth(),height:y.outerHeight(),offset:y.offset()},b[0].preventDefault&&(e.at="left top"),p=v.width,f=v.height,m=v.offset,g=t.extend({},m),t.each(["my","at"],(function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):s.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=s.test(i[1])?i[1]:"center",t=o.exec(i[0]),n=o.exec(i[1]),S[this]=[t?t[0]:0,n?n[0]:0],e[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]})),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?g.left+=p:"center"===e.at[0]&&(g.left+=p/2),"bottom"===e.at[1]?g.top+=f:"center"===e.at[1]&&(g.top+=f/2),l=u(S.at,p,f),g.left+=l[0],g.top+=l[1],this.each((function(){var r,s,o=t(this),a=o.outerWidth(),c=o.outerHeight(),h=d(this,"marginLeft"),v=d(this,"marginTop"),y=a+h+d(this,"marginRight")+k.width,_=c+v+d(this,"marginBottom")+k.height,T=t.extend({},g),C=u(S.my,o.outerWidth(),o.outerHeight());"right"===e.my[0]?T.left-=a:"center"===e.my[0]&&(T.left-=a/2),"bottom"===e.my[1]?T.top-=c:"center"===e.my[1]&&(T.top-=c/2),T.left+=C[0],T.top+=C[1],r={marginLeft:h,marginTop:v},t.each(["left","top"],(function(n,i){t.ui.position[x[n]]&&t.ui.position[x[n]][i](T,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:c,collisionPosition:r,collisionWidth:y,collisionHeight:_,offset:[l[0]+C[0],l[1]+C[1]],my:e.my,at:e.at,within:w,elem:o})})),e.using&&(s=function(t){var r=m.left-T.left,s=r+p-a,l=m.top-T.top,u=l+f-c,d={target:{element:b,left:m.left,top:m.top,width:p,height:f},element:{element:o,left:T.left,top:T.top,width:a,height:c},horizontal:s<0?"left":r>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};p<a&&i(r+s)<p&&(d.horizontal="center"),f<c&&i(l+u)<f&&(d.vertical="middle"),n(i(r),i(s))>n(i(l),i(u))?d.important="horizontal":d.important="vertical",e.using.call(this,t,d)}),o.offset(t.extend(T,{using:s}))}))},t.ui.position={fit:{left:function(t,e){var i,r=e.within,s=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,a=t.left-e.collisionPosition.marginLeft,l=s-a,c=a+e.collisionWidth-o-s;e.collisionWidth>o?l>0&&c<=0?(i=t.left+l+e.collisionWidth-o-s,t.left+=l-i):t.left=c>0&&l<=0?s:l>c?s+o-e.collisionWidth:s:l>0?t.left+=l:c>0?t.left-=c:t.left=n(t.left-a,t.left)},top:function(t,e){var i,r=e.within,s=r.isWindow?r.scrollTop:r.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=s-a,c=a+e.collisionHeight-o-s;e.collisionHeight>o?l>0&&c<=0?(i=t.top+l+e.collisionHeight-o-s,t.top+=l-i):t.top=c>0&&l<=0?s:l>c?s+o-e.collisionHeight:s:l>0?t.top+=l:c>0?t.top-=c:t.top=n(t.top-a,t.top)}},flip:{left:function(t,e){var n,r,s=e.within,o=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,d=c+e.collisionWidth-a-l,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?((n=t.left+h+p+f+e.collisionWidth-a-o)<0||n<i(u))&&(t.left+=h+p+f):d>0&&((r=t.left-e.collisionPosition.marginLeft+h+p+f-l)>0||i(r)<d)&&(t.left+=h+p+f)},top:function(t,e){var n,r,s=e.within,o=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,d=c+e.collisionHeight-a-l,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];u<0?((r=t.top+h+p+f+e.collisionHeight-a-o)<0||r<i(u))&&(t.top+=h+p+f):d>0&&((n=t.top-e.collisionPosition.marginTop+h+p+f-l)>0||i(n)<d)&&(t.top+=h+p+f)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position},void 0===(s=i.apply(e,r))||(t.exports=s)}()},3300:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})?i.apply(e,r):i)||(t.exports=s)}()},2634:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})?i.apply(e,r):i)||(t.exports=s)}()},2299:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.fn.scrollParent=function(e){var n=this.css("position"),i="absolute"===n,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter((function(){var e=t(this);return(!i||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==n&&s.length?s:t(this[0].ownerDocument||document)}})?i.apply(e,r):i)||(t.exports=s)}()},7144:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883),n(1255)],void 0===(s="function"==typeof(i=function(t){return t.extend(t.expr.pseudos,{tabbable:function(e){var n=t.attr(e,"tabindex"),i=null!=n;return(!i||n>=0)&&t.ui.focusable(e,i)}})})?i.apply(e,r):i)||(t.exports=s)}()},5304:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],void 0===(s="function"==typeof(i=function(t){return t.fn.extend({uniqueId:(e=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++e)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}});var e})?i.apply(e,r):i)||(t.exports=s)}()},6883:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692)],void 0===(s="function"==typeof(i=function(t){return t.ui=t.ui||{},t.ui.version="1.13.3"})?i.apply(e,r):i)||(t.exports=s)}()},9139:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883)],i=function(t){var e,n=0,i=Array.prototype.hasOwnProperty,r=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(n){var i,r,s;for(s=0;null!=(r=n[s]);s++)(i=t._data(r,"events"))&&i.remove&&t(r).triggerHandler("remove");e(n)}),t.widget=function(e,n,i){var r,s,o,a={},l=e.split(".")[0],c=l+"-"+(e=e.split(".")[1]);return i||(i=n,n=t.Widget),Array.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr.pseudos[c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},r=t[l][e],s=t[l][e]=function(t,e){if(!this||!this._createWidget)return new s(t,e);arguments.length&&this._createWidget(t,e)},t.extend(s,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),(o=new n).options=t.widget.extend({},o.options),t.each(i,(function(t,e){a[t]="function"==typeof e?function(){function i(){return n.prototype[t].apply(this,arguments)}function r(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,s=this._superApply;return this._super=i,this._superApply=r,t=e.apply(this,arguments),this._super=n,this._superApply=s,t}}():e})),s.prototype=t.widget.extend(o,{widgetEventPrefix:r&&o.widgetEventPrefix||e},a,{constructor:s,namespace:l,widgetName:e,widgetFullName:c}),r?(t.each(r._childConstructors,(function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,s,n._proto)})),delete r._childConstructors):n._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var n,s,o=r.call(arguments,1),a=0,l=o.length;a<l;a++)for(n in o[a])s=o[a][n],i.call(o[a],n)&&void 0!==s&&(t.isPlainObject(s)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],s):t.widget.extend({},s):e[n]=s);return e},t.widget.bridge=function(e,n){var i=n.prototype.widgetFullName||e;t.fn[e]=function(s){var o="string"==typeof s,a=r.call(arguments,1),l=this;return o?this.length||"instance"!==s?this.each((function(){var n,r=t.data(this,i);return"instance"===s?(l=r,!1):r?"function"!=typeof r[s]||"_"===s.charAt(0)?t.error("no such method '"+s+"' for "+e+" widget instance"):(n=r[s].apply(r,a))!==r&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+s+"'")})):l=void 0:(a.length&&(s=t.widget.extend.apply(null,[s].concat(a))),this.each((function(){var e=t.data(this,i);e?(e.option(s||{}),e._init&&e._init()):t.data(this,i,new n(s,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,n){e._removeClass(n,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,s,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},i=e.split("."),e=i.shift(),i.length){for(r=o[e]=t.widget.extend({},this.options[e]),s=0;s<i.length-1;s++)r[i[s]]=r[i[s]]||{},r=r[i[s]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=n}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,r;for(n in e)r=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&r&&r.length&&(i=t(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var n=[],i=this;function r(){var n=[];e.element.each((function(e,r){t.map(i.classesElementLookup,(function(t){return t})).some((function(t){return t.is(r)}))||n.push(r)})),i._on(t(n),{remove:"_untrackClassesElement"})}function s(s,o){var a,l;for(l=0;l<s.length;l++)a=i.classesElementLookup[s[l]]||t(),e.add?(r(),a=t(t.uniqueSort(a.get().concat(e.element.get())))):a=t(a.not(e.element).get()),i.classesElementLookup[s[l]]=a,n.push(s[l]),o&&e.classes[s[l]]&&n.push(e.classes[s[l]])}return(e=t.extend({element:this.element,classes:this.options.classes||{}},e)).keys&&s(e.keys.match(/\S+/g)||[],!0),e.extra&&s(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,(function(i,r){-1!==t.inArray(e.target,r)&&(n.classesElementLookup[i]=t(r.not(e.target).get()))})),this._off(t(e.target))},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof t||null===t,s={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};return s.element.toggleClass(this._classes(s),i),this},_on:function(e,n,i){var r,s=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,(function(i,o){function a(){if(e||!0!==s.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?r.on(c,u,a):n.on(c,a)}))},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var n=this;return setTimeout((function(){return("string"==typeof t?n[t]:t).apply(n,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var r,s,o=this.options[e];if(i=i||{},(n=t.Event(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(r in s)r in n||(n[r]=s[r]);return this.element.trigger(n,i),!("function"==typeof o&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,n){t.Widget.prototype["_"+e]=function(i,r,s){var o;"string"==typeof r&&(r={effect:r});var a=r?!0===r||"number"==typeof r?n:r.effect||n:e;"number"==typeof(r=r||{})?r={duration:r}:!0===r&&(r={}),o=!t.isEmptyObject(r),r.complete=s,r.delay&&i.delay(r.delay),o&&t.effects&&t.effects.effect[a]?i[e](r):a!==e&&i[a]?i[a](r.duration,r.easing,s):i.queue((function(n){t(this)[e](),s&&s.call(i[0]),n()}))}})),t.widget},void 0===(s=i.apply(e,r))||(t.exports=s)}()},8481:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6605),n(2097),n(1897),n(9139)],i=function(t){var e;return t.widget("ui.button",{version:"1.13.3",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,n){var i="iconPosition"!==e,r=i?this.options.iconPosition:n,s="top"===r||"bottom"===r;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(r),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,n=void 0===t.icon?this.options.icon:t.icon;e||n||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.trigger("blur"))},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),t.fn.button=(e=t.fn.button,function(n){var i="string"==typeof n,r=Array.prototype.slice.call(arguments,1),s=this;return i?this.length||"instance"!==n?this.each((function(){var e,i=t(this).attr("type"),o="checkbox"!==i&&"radio"!==i?"button":"checkboxradio",a=t.data(this,"ui-"+o);return"instance"===n?(s=a,!1):a?"function"!=typeof a[n]||"_"===n.charAt(0)?t.error("no such method '"+n+"' for button widget instance"):(e=a[n].apply(a,r))!==a&&void 0!==e?(s=e&&e.jquery?s.pushStack(e.get()):e,!1):void 0:t.error("cannot call methods on button prior to initialization; attempted to call method '"+n+"'")})):s=void 0:(r.length&&(n=t.widget.extend.apply(null,[n].concat(r))),this.each((function(){var i=t(this).attr("type"),r="checkbox"!==i&&"radio"!==i?"button":"checkboxradio",s=t.data(this,"ui-"+r);if(s)s.option(n||{}),s._init&&s._init();else{if("button"===r)return void e.call(t(this),n);t(this).checkboxradio(t.extend({icon:!1},n))}}))),s}),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button},void 0===(s=i.apply(e,r))||(t.exports=s)}()},2097:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(7687),n(2420),n(9139)],void 0===(s="function"==typeof(i=function(t){return t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.13.3",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,n,i,r=this._super()||{};return this._readType(),n=this.element.labels(),this.label=t(n[n.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",(i=this.label.contents().not(this.element[0])).length&&(this.originalLabel+=i.clone().wrapAll("<div></div>").parent().html()),this.originalLabel&&(r.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(r.disabled=e),r},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,n="input[name='"+t.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(n):t(n).filter((function(){return 0===t(this)._form().length}))).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each((function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(e){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio})?i.apply(e,r):i)||(t.exports=s)}()},6605:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(9139)],void 0===(s="function"==typeof(i=function(t){var e=/ui-corner-([a-z]){2,6}/g;return t.widget("ui.controlgroup",{version:"1.13.3",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,n=[];t.each(this.options.items,(function(i,r){var s,o={};if(r)return"controlgroupLabel"===i?((s=e.element.find(r)).each((function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),e._addClass(s,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(s.get()))):void(t.fn[i]&&(o=e["_"+i+"Options"]?e["_"+i+"Options"]("middle"):{classes:{}},e.element.find(r).each((function(){var r=t(this),s=r[i]("instance"),a=t.widget.extend({},o);if("button"!==i||!r.parent(".ui-spinner").length){s||(s=r[i]()[i]("instance")),s&&(a.classes=e._resolveClassesValues(a.classes,s)),r[i](a);var l=r[i]("widget");t.data(l[0],"ui-controlgroup-data",s||r[i]("instance")),n.push(l[0])}}))))})),this.childWidgets=t(t.uniqueSort(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each((function(){var n=t(this).data("ui-controlgroup-data");n&&n[e]&&n[e]()}))},_updateCornerClass:function(t,e){var n=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,n)},_buildSimpleOptions:function(t,e){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[e]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[t],i},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(n,i){var r={};return t.each(n,(function(t){var s=i.options.classes[t]||"";s=String.prototype.trim.call(s.replace(e,"")),r[t]=(s+" "+n[t]).replace(/\s+/g," ")})),r},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var e,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],(function(t,i){var r=e[i]().data("ui-controlgroup-data");if(r&&n["_"+r.widgetName+"Options"]){var s=n["_"+r.widgetName+"Options"](1===e.length?"only":i);s.classes=n._resolveClassesValues(s.classes,r),r.element[r.widgetName](s)}else n._updateCornerClass(e[i](),i)})),this._callChildMethod("refresh"))}})})?i.apply(e,r):i)||(t.exports=s)}()},3431:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(6883),n(1897)],i=function(t){var e;function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=i(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",n,(function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",n,r)}function r(){t.datepicker._isDisabledDatepicker(e.inline?e.dpDiv.parent()[0]:e.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function s(e,n){for(var i in t.extend(e,n),n)null==n[i]&&(e[i]=n[i]);return e}return t.extend(t.ui,{datepicker:{version:"1.13.3"}}),t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return s(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var i,r,s;r="div"===(i=e.nodeName.toLowerCase())||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(s=this._newInst(t(e),r)).settings=t.extend({},n||{}),"input"===i?this._connectDatepicker(e,s):r&&this._inlineDatepicker(e,s)},_newInst:function(e,n){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]),n.trigger=t([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(n),t.data(e,"datepicker",n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var i,r,s,o=this._get(n,"appendText"),a=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=t("<span>").addClass(this._appendClass).text(o),e[a?"before":"after"](n.append)),e.off("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),"focus"!==(i=this._get(n,"showOn"))&&"both"!==i||e.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(r=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),this._get(n,"buttonImageOnly")?n.trigger=t("<img>").addClass(this._triggerClass).attr({src:s,alt:r,title:r}):(n.trigger=t("<button type='button'>").addClass(this._triggerClass),s?n.trigger.html(t("<img>").attr({src:s,alt:r,title:r})):n.trigger.text(r)),e[a?"before":"after"](n.trigger),n.trigger.on("click",(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1})))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,r,s=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(e=function(t){for(n=0,i=0,r=0;r<t.length;r++)t[r].length>n&&(n=t[r].length,i=r);return i},s.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),t.input.attr("size",this._formatDate(t,s).length)}},_inlineDatepicker:function(e,n){var i=t(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),t.data(e,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,i,r,o){var a,l,c,u,d,h=this._dialogInst;return h||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),(h=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",h)),s(h.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(n){var i,r=t(n),s=t.data(n,"datepicker");r.hasClass(this.markerClassName)&&(i=n.nodeName.toLowerCase(),t.removeData(n,"datepicker"),"input"===i?(s.append.remove(),s.trigger.remove(),r.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||r.removeClass(this.markerClassName).empty(),e===s&&(e=null,this._curInst=null))},_enableDatepicker:function(e){var n,i,r=t(e),s=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&("input"===(n=e.nodeName.toLowerCase())?(e.disabled=!1,s.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||((i=r.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var n,i,r=t(e),s=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&("input"===(n=e.nodeName.toLowerCase())?(e.disabled=!0,s.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||((i=r.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,n,i){var r,o,a,l,c=this._getInst(e);if(2===arguments.length&&"string"==typeof n)return"defaults"===n?t.extend({},t.datepicker._defaults):c?"all"===n?t.extend({},c.settings):this._get(c,n):null;r=n||{},"string"==typeof n&&((r={})[n]=i),c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),a=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),s(c.settings,r),null!==a&&void 0!==r.dateFormat&&void 0===r.minDate&&(c.settings.minDate=this._formatDate(c,a)),null!==l&&void 0!==r.dateFormat&&void 0===r.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,i,r,s=t.datepicker._getInst(e.target),o=!0,a=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),o=!1;break;case 13:return(r=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",s.dpDiv))[0]&&t.datepicker._selectDay(e.target,s.selectedMonth,s.selectedYear,r[0]),(n=t.datepicker._get(s,"onSelect"))?(i=t.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[i,s])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(s,"stepBigMonths"):-t.datepicker._get(s,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(s,"stepBigMonths"):+t.datepicker._get(s,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(s,"stepBigMonths"):-t.datepicker._get(s,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(s,"stepBigMonths"):+t.datepicker._get(s,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,i,r=t.datepicker._getInst(e.target);if(t.datepicker._get(r,"constrainInput"))return n=t.datepicker._possibleChars(t.datepicker._get(r,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||i<" "||!n||n.indexOf(i)>-1},_doKeyUp:function(e){var n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n))&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(t){}return!0},_showDatepicker:function(e){var n,i,r,o,a,l,c;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e||(n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(r=(i=t.datepicker._get(n,"beforeShow"))?i.apply(e,[e,n]):{})&&(s(n.settings,r),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each((function(){return!(o|="fixed"===t(this).css("position"))})),a={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),a=t.datepicker._checkOffset(n,a,o),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),n.inline||(l=t.datepicker._get(n,"showAnim"),c=t.datepicker._get(n,"duration"),n.dpDiv.css("z-index",function(t){for(var e,n;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?n.dpDiv.show(l,t.datepicker._get(n,"showOptions"),c):n.dpDiv[l||"show"](l?c:null),t.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),t.datepicker._curInst=n)))},_updateDatepicker:function(n){this.maxRows=4,e=n,n.dpDiv.empty().append(this._generateHTML(n)),this._attachHandlers(n);var i,s=this._getNumberOfMonths(n),o=s[1],a=n.dpDiv.find("."+this._dayOverClass+" a"),l=t.datepicker._get(n,"onUpdateDatepicker");a.length>0&&r.apply(a.get(0)),n.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&n.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",17*o+"em"),n.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),n.dpDiv[(this._get(n,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),n===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),n.yearshtml&&(i=n.yearshtml,setTimeout((function(){i===n.yearshtml&&n.yearshtml&&n.dpDiv.find("select.ui-datepicker-year").first().replaceWith(n.yearshtml),i=n.yearshtml=null}),0)),l&&l.apply(n.input?n.input[0]:null,[n])},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var r=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?r-o:0,n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=i&&n.top===e.input.offset().top+a?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+s>c&&c>s?Math.abs(s+a):0),n},_findPos:function(e){for(var n,i=this._getInst(e),r=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.pseudos.hidden(e));)e=e[r?"previousSibling":"nextSibling"];return[(n=t(e).offset()).left,n.top]},_hideDatepicker:function(e){var n,i,r,s,o=this._curInst;!o||e&&o!==t.data(e,"datepicker")||this._datepickerShowing&&(n=this._get(o,"showAnim"),i=this._get(o,"duration"),r=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[n]||t.effects[n])?o.dpDiv.hide(n,t.datepicker._get(o,"showOptions"),i,r):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,(s=this._get(o,"onClose"))&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id===t.datepicker._mainDivId||0!==n.parents("#"+t.datepicker._mainDivId).length||n.hasClass(t.datepicker.markerClassName)||n.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!n.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===i)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var r=t(e),s=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(s,n,i),this._updateDatepicker(s))},_gotoToday:function(e){var n,i=t(e),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(e,n,i){var r=t(e),s=this._getInst(r[0]);s["selected"+("M"===i?"Month":"Year")]=s["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(r)},_selectDay:function(e,n,i,r){var s,o=t(e);t(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((s=this._getInst(o[0])).selectedDay=s.currentDay=parseInt(t("a",r).attr("data-date")),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=i,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,r=t(e),s=this._getInst(r[0]);n=null!=n?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),(i=this._get(s,"onSelect"))?i.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var n,i,r,s=this._get(e,"altField");s&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),r=this.formatDate(n,i,this._getFormatConfig(e)),t(document).find(s).val(r))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?n.toString():n+""))return null;var r,s,o,a,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,_=!1,b=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},w=function(t){var e=b(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,r=new RegExp("^\\d{"+("y"===t?i:1)+","+i+"}"),s=n.substring(l).match(r);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},k=function(e,i,r){var s=-1,o=t.map(b(e)?r:i,(function(t,e){return[[e,t]]})).sort((function(t,e){return-(t[1].length-e[1].length)}));if(t.each(o,(function(t,e){var i=e[1];if(n.substr(l,i.length).toLowerCase()===i.toLowerCase())return s=e[0],l+=i.length,!1})),-1!==s)return s+1;throw"Unknown name at position "+l},x=function(){if(n.charAt(l)!==e.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<e.length;r++)if(_)"'"!==e.charAt(r)||b("'")?x():_=!1;else switch(e.charAt(r)){case"d":v=w("d");break;case"D":k("D",d,h);break;case"o":y=w("o");break;case"m":g=w("m");break;case"M":g=k("M",p,f);break;case"y":m=w("y");break;case"@":m=(a=new Date(w("@"))).getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":m=(a=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":b("'")?x():_=!0;break;default:x()}if(l<n.length&&(o=n.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=u?0:-100)),y>-1)for(g=1,v=y;!(v<=(s=this._getDaysInMonth(m,g-1)));)g++,v-=s;if((a=this._daylightSavingAdjust(new Date(m,g-1,v))).getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,a=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},c=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},u=function(t,e,n,i){return l(t)?i[e]:n[e]},d="",h=!1;if(e)for(i=0;i<t.length;i++)if(h)"'"!==t.charAt(i)||l("'")?d+=t.charAt(i):h=!1;else switch(t.charAt(i)){case"d":d+=c("d",e.getDate(),2);break;case"D":d+=u("D",e.getDay(),r,s);break;case"o":d+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",e.getMonth()+1,2);break;case"M":d+=u("M",e.getMonth(),o,a);break;case"y":d+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=t.charAt(i)}return d},_possibleChars:function(t){var e,n="",i=!1,r=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;return i&&e++,i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||r("'")?n+=t.charAt(e):i=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),s=r,o=this._getFormatConfig(t);try{s=this.parseDate(n,i,o)||r}catch(t){i=e?"":i}t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),t.currentDay=i?s.getDate():0,t.currentMonth=i?s.getMonth():0,t.currentYear=i?s.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var r=null==n||""===n?i:"string"==typeof n?function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(t){}for(var i=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=i.getFullYear(),s=i.getMonth(),o=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(n);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,s));break;case"y":case"Y":r+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,s))}l=a.exec(n)}return new Date(r,s,o)}(n):"number"==typeof n?isNaN(n)?i:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(n):new Date(n.getTime());return(r=r&&"Invalid Date"===r.toString()?i:r)&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,r=t.selectedMonth,s=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),r===t.selectedMonth&&s===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){return t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(i,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(e){var n,i,r,s,o,a,l,c,u,d,h,p,f,m,g,v,y,_,b,w,k,x,S,T,C,E,I,D,O,M,A,P,R,L,N,F,q,j,$,H=new Date,z=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),B=this._get(e,"isRTL"),W=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),Q=this._get(e,"navigationAsDateFormat"),Y=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),X=1!==Y[0]||1!==Y[1],K=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),tt=e.drawMonth-V,et=e.drawYear;if(tt<0&&(tt+=12,et--),Z)for(n=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-Y[0]*Y[1]+1,Z.getDate())),n=J&&n<J?J:n;this._daylightSavingAdjust(new Date(et,tt,1))>n;)--tt<0&&(tt=11,et--);for(e.drawMonth=tt,e.drawYear=et,i=this._get(e,"prevText"),i=Q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,tt-G,1)),this._getFormatConfig(e)):i,r=this._canAdjustMonth(e,-1,et,tt)?t("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:i}).append(t("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(B?"e":"w")).text(i))[0].outerHTML:U?"":t("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:i}).append(t("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(B?"e":"w")).text(i))[0].outerHTML,s=this._get(e,"nextText"),s=Q?this.formatDate(s,this._daylightSavingAdjust(new Date(et,tt+G,1)),this._getFormatConfig(e)):s,o=this._canAdjustMonth(e,1,et,tt)?t("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:s}).append(t("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(B?"w":"e")).text(s))[0].outerHTML:U?"":t("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:s}).append(t("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(B?"w":"e")).text(s))[0].outerHTML,a=this._get(e,"currentText"),l=this._get(e,"gotoCurrent")&&e.currentDay?K:z,a=Q?this.formatDate(a,l,this._getFormatConfig(e)):a,c="",e.inline||(c=t("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(e,"closeText"))[0].outerHTML),u="",W&&(u=t("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(B?c:"").append(this._isInRange(e,l)?t("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(a):"").append(B?"":c)[0].outerHTML),d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,h=this._get(e,"showWeek"),p=this._get(e,"dayNames"),f=this._get(e,"dayNamesMin"),m=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),v=this._get(e,"beforeShowDay"),y=this._get(e,"showOtherMonths"),_=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",x=0;x<Y[0];x++){for(S="",this.maxRows=4,T=0;T<Y[1];T++){if(C=this._daylightSavingAdjust(new Date(et,tt,e.selectedDay)),E=" ui-corner-all",I="",X){if(I+="<div class='ui-datepicker-group",Y[1]>1)switch(T){case 0:I+=" ui-datepicker-group-first",E=" ui-corner-"+(B?"right":"left");break;case Y[1]-1:I+=" ui-datepicker-group-last",E=" ui-corner-"+(B?"left":"right");break;default:I+=" ui-datepicker-group-middle",E=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+E+"'>"+(/all|left/.test(E)&&0===x?B?o:r:"")+(/all|right/.test(E)&&0===x?B?r:o:"")+this._generateMonthYearHeader(e,tt,et,J,Z,x>0||T>0,m,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",D=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",k=0;k<7;k++)D+="<th scope='col'"+((k+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[O=(k+d)%7]+"'>"+f[O]+"</span></th>";for(I+=D+"</tr></thead><tbody>",M=this._getDaysInMonth(et,tt),et===e.selectedYear&&tt===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,M)),A=(this._getFirstDayOfMonth(et,tt)-d+7)%7,P=Math.ceil((A+M)/7),R=X&&this.maxRows>P?this.maxRows:P,this.maxRows=R,L=this._daylightSavingAdjust(new Date(et,tt,1-A)),N=0;N<R;N++){for(I+="<tr>",F=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(L)+"</td>":"",k=0;k<7;k++)q=v?v.apply(e.input?e.input[0]:null,[L]):[!0,""],$=(j=L.getMonth()!==tt)&&!_||!q[0]||J&&L<J||Z&&L>Z,F+="<td class='"+((k+d+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(L.getTime()===C.getTime()&&tt===e.selectedMonth&&e._keyEvent||b.getTime()===L.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+($?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!y?"":" "+q[1]+(L.getTime()===K.getTime()?" "+this._currentClass:"")+(L.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(j&&!y||!q[2]?"":" title='"+q[2].replace(/'/g,"&#39;")+"'")+($?"":" data-handler='selectDay' data-event='click' data-month='"+L.getMonth()+"' data-year='"+L.getFullYear()+"'")+">"+(j&&!y?"&#xa0;":$?"<span class='ui-state-default'>"+L.getDate()+"</span>":"<a class='ui-state-default"+(L.getTime()===z.getTime()?" ui-state-highlight":"")+(L.getTime()===K.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#' aria-current='"+(L.getTime()===K.getTime()?"true":"false")+"' data-date='"+L.getDate()+"'>"+L.getDate()+"</a>")+"</td>",L.setDate(L.getDate()+1),L=this._daylightSavingAdjust(L);I+=F+"</tr>"}++tt>11&&(tt=0,et++),S+=I+="</tbody></table>"+(X?"</div>"+(Y[0]>0&&T===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}w+=S}return w+=u,e._keyEvent=!1,w},_generateMonthYearHeader:function(t,e,n,i,r,s,o,a){var l,c,u,d,h,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),_=this._get(t,"selectMonthLabel"),b=this._get(t,"selectYearLabel"),w="<div class='ui-datepicker-title'>",k="";if(s||!g)k+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=i&&i.getFullYear()===n,c=r&&r.getFullYear()===n,k+="<select class='ui-datepicker-month' aria-label='"+_+"' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=i.getMonth())&&(!c||u<=r.getMonth())&&(k+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+a[u]+"</option>");k+="</select>"}if(y||(w+=k+(!s&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",s||!v)w+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(t,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=i?Math.max(f,i.getFullYear()):f,m=r?Math.min(m,r.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' aria-label='"+b+"' data-handler='selectYear' data-event='change'>";f<=m;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",w+=t.yearshtml,t.yearshtml=null}return w+=this._get(t,"yearSuffix"),y&&(w+=(!s&&g&&v?"":"&#xa0;")+k),w+"</div>"},_adjustInstDate:function(t,e,n){var i=t.selectedYear+("Y"===n?e:0),r=t.selectedMonth+("M"===n?e:0),s=Math.min(t.selectedDay,this._getDaysInMonth(i,r))+("D"===n?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,r,s)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),r=n&&e<n?n:e;return i&&r>i?i:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var r=this._getNumberOfMonths(t),s=this._daylightSavingAdjust(new Date(n,i+(e<0?e:r[0]*r[1]),1));return e<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(t,s)},_isInRange:function(t,e){var n,i,r=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),o=null,a=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),o=parseInt(n[0],10),a=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=i),n[1].match(/[+\-].*/)&&(a+=i)),(!r||e.getTime()>=r.getTime())&&(!s||e.getTime()<=s.getTime())&&(!o||e.getFullYear()>=o)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each((function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)})):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new n,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.13.3",t.datepicker},void 0===(s=i.apply(e,r))||(t.exports=s)}()},1193:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(8481),n(1758),n(3662),n(8604),n(1255),n(1897),n(4224),n(3300),n(2634),n(7144),n(5304),n(6883),n(9139)],i=function(t){return t.widget("ui.dialog",{version:"1.13.3",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;n<0&&t(this).css("top",e.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){n._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,n){var i=!1,r=this.uiDialog.siblings(".ui-front:visible").map((function(){return+t(this).css("z-index")})).get(),s=Math.max.apply(null,r);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),i=!0),i&&!n&&this._trigger("focus",e),i},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){e._focusTabbable(),e._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var e=t.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()},_keepFocus:function(t){t.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.first(),r=n.last();e.target!==r[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay((function(){r.trigger("focus")})),e.preventDefault()):(this._delay((function(){i.trigger("focus")})),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(n)||Array.isArray(n)&&!n.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(n,(function(n,i){var r,s;i="function"==typeof i?{click:i,text:n}:i,i=t.extend({type:"button"},i),r=i.click,s={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,t("<button></button>",i).button(s).appendTo(e.uiButtonSet).on("click",(function(){r.apply(e.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,n=this.options;function i(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){e._addClass(t(this),"ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",n,i(r))},drag:function(t,n){e._trigger("drag",t,i(n))},stop:function(r,s){var o=s.offset.left-e.document.scrollLeft(),a=s.offset.top-e.document.scrollTop();n.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(a>=0?"+":"")+a,of:e.window},e._removeClass(t(this),"ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",r,i(s))}})},_makeResizable:function(){var e=this,n=this.options,i=n.resizable,r=this.uiDialog.css("position"),s="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";function o(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,i){e._addClass(t(this),"ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",n,o(i))},resize:function(t,n){e._trigger("resize",t,o(n))},stop:function(i,r){var s=e.uiDialog.offset(),a=s.left-e.document.scrollLeft(),l=s.top-e.document.scrollTop();n.height=e.uiDialog.height(),n.width=e.uiDialog.width(),n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:e.window},e._removeClass(t(this),"ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",i,o(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),n=t.inArray(this,e);-1!==n&&e.splice(n,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var n=this,i=!1,r={};t.each(e,(function(t,e){n._setOption(t,e),t in n.sizeRelatedOptions&&(i=!0),t in n.resizableRelatedOptions&&(r[t]=e)})),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,n){var i,r,s=this.uiDialog;"disabled"!==e&&(this._super(e,n),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((i=s.is(":data(ui-draggable)"))&&!n&&s.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((r=s.is(":data(ui-resizable)"))&&!n&&s.resizable("destroy"),r&&"string"==typeof n&&s.resizable("option","handles",n),r||!1===n||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=t.fn.jquery.substring(0,4),n=!0;this._delay((function(){n=!1})),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",function(t){if(!n){var i=this._trackingInstances()[0];i._allowInteraction(t)||(t.preventDefault(),i._focusTabbable(),"3.4."!==e&&"3.5."!==e&&"3.6."!==e||i._delay(i._restoreTabbableFocus))}}.bind(this)),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog},void 0===(s=i.apply(e,r))||(t.exports=s)}()},1758:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(3662),n(9983),n(2336),n(3300),n(2634),n(2299),n(6883),n(9139)],void 0===(s="function"==typeof(i=function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.13.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var n=this.options;return!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(n).length||t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||"function"==typeof this.options.revert&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==n._trigger("stop",e)&&n._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i="function"==typeof n.helper,r=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),Array.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options,s=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(i=(n=t(r.containment))[0])&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=r.containment:this.containment=[0,0,t(s).width()-this.helperProportions.width-this.margins.left,(t(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,s,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-o.grid[1]:r+o.grid[1]:r,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var r=t.extend({},n,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each((function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,r))}))},stop:function(e,n,i){var r=t.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,(function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,r))}))},drag:function(e,n,i){t.each(i.sortables,(function(){var r=!1,s=this;s.positionAbs=i.positionAbs,s.helperProportions=i.helperProportions,s.offset.click=i.offset.click,s._intersectsWith(s.containerCache)&&(r=!0,t.each(i.sortables,(function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&t.contains(s.element[0],this.element[0])&&(r=!1),r}))),r?(s.isOver||(s.isOver=1,i._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},e.target=s.currentItem[0],s._mouseCapture(e,!0),s._mouseStart(e,!0,!0),s.offset.click.top=i.offset.click.top,s.offset.click.left=i.offset.click.left,s.offset.parent.left-=i.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=i.offset.parent.top-s.offset.parent.top,i._trigger("toSortable",e),i.dropped=s.element,t.each(i.sortables,(function(){this.refreshPositions()})),i.currentItem=i.element,s.fromOutside=i),s.currentItem&&(s._mouseDrag(e),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",e,s._uiHash(s)),s._mouseStop(e,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(e),n.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var r=t("body"),s=i.options;r.css("cursor")&&(s._cursor=r.css("cursor")),r.css("cursor",s.cursor)},stop:function(e,n,i){var r=i.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var r=t(n.helper),s=i.options;r.css("opacity")&&(s._opacity=r.css("opacity")),r.css("opacity",s.opacity)},stop:function(e,n,i){var r=i.options;r._opacity&&t(n.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var r=i.options,s=!1,o=i.scrollParentNotHidden[0],a=i.document[0];o!==a&&"HTML"!==o.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+o.offsetHeight-e.pageY<r.scrollSensitivity?o.scrollTop=s=o.scrollTop+r.scrollSpeed:e.pageY-i.overflowOffset.top<r.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+o.offsetWidth-e.pageX<r.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+r.scrollSpeed:e.pageX-i.overflowOffset.left<r.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(a).scrollTop()<r.scrollSensitivity?s=t(a).scrollTop(t(a).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<r.scrollSensitivity&&(s=t(a).scrollTop(t(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(a).scrollLeft()<r.scrollSensitivity?s=t(a).scrollLeft(t(a).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<r.scrollSensitivity&&(s=t(a).scrollLeft(t(a).scrollLeft()+r.scrollSpeed)))),!1!==s&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var r=i.options;i.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})}))},drag:function(e,n,i){var r,s,o,a,l,c,u,d,h,p,f=i.options,m=f.snapTolerance,g=n.offset.left,v=g+i.helperProportions.width,y=n.offset.top,_=y+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)c=(l=i.snapElements[h].left-i.margins.left)+i.snapElements[h].width,d=(u=i.snapElements[h].top-i.margins.top)+i.snapElements[h].height,v<l-m||g>c+m||_<u-m||y>d+m||!t.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(r=Math.abs(u-_)<=m,s=Math.abs(d-y)<=m,o=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,r&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),s&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),o&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),p=r||s||o||a,"outer"!==f.snapMode&&(r=Math.abs(u-y)<=m,s=Math.abs(d-_)<=m,o=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,r&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),s&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),o&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(r||s||o||a||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=r||s||o||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var r,s=i.options,o=t.makeArray(t(s.stack)).sort((function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)}));o.length&&(r=parseInt(t(o[0]).css("zIndex"),10)||0,t(o).each((function(e){t(this).css("zIndex",r+e)})),this.css("zIndex",r+o.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var r=t(n.helper),s=i.options;r.css("zIndex")&&(s._zIndex=r.css("zIndex")),r.css("zIndex",s.zIndex)},stop:function(e,n,i){var r=i.options;r._zIndex&&t(n.helper).css("zIndex",r._zIndex)}}),t.ui.draggable})?i.apply(e,r):i)||(t.exports=s)}()},3662:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(8045),n(6883),n(9139)],void 0===(s="function"==typeof(i=function(t){var e=!1;return t(document).on("mouseup",(function(){e=!1})),t.widget("ui.mouse",{version:"1.13.3",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,s=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&t(n.target).closest(this.options.cancel).length;return!(r&&!s&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&t.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,n.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?i.apply(e,r):i)||(t.exports=s)}()},8604:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(3662),n(724),n(2336),n(6883),n(9139)],i=function(t){return t.widget("ui.resizable",t.ui.mouse,{version:"1.13.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;if(e[i]>0)return!0;try{e[i]=1,r=e[i]>0,e[i]=0}catch(t){}return r},_create:function(){var e,n=this.options,i=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),n.autoHide&&t(this.element).on("mouseenter",(function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())})).on("mouseleave",(function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();var e,n=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable")};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!e}},_setupHandles:function(){var e,n,i,r,s,o=this.options,a=this;if(this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this._addedHandles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)r="ui-resizable-"+(e=String.prototype.trim.call(i[n])),s=t("<div>"),this._addClass(s,"ui-resizable-handle "+r),s.css({zIndex:o.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.children(this.handles[e]).length||(this.element.append(s),this._addedHandles=this._addedHandles.add(s));this._renderAxis=function(e){var n,i,r,s;for(n in e=e||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=t(this.handles[n]),this._on(this.handles[n],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=t(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(r,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")})),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(e){var n,i,r=!1;for(n in this.handles)((i=t(this.handles[n])[0])===e.target||t.contains(i,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(e){var n,i,r,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),s.containment&&(n+=t(s.containment).scrollLeft()||0,i+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var n,i,r=this.originalMousePosition,s=this.axis,o=e.pageX-r.left||0,a=e.pageY-r.top||0,l=this._change[s];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[e,o,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var n,i,r,s,o,a,l,c=this.options,u=this;return this._helper&&(r=(i=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height,s=i?0:u.sizeDiff.width,o={width:u.helper.width()-s,height:u.helper.height()-r},a=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(o,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.helper.css(t),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px",this.helper.width(t.width)),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px",this.helper.height(t.height)),t},_updateVirtualBoundaries:function(t){var e,n,i,r,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,i=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),i>s.minHeight&&(s.minHeight=i),n<s.maxWidth&&(s.maxWidth=n),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===i&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===i&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,s=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return s&&(t.width=e.minWidth),o&&(t.height=e.minHeight),i&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),s&&c&&(t.left=a-e.minWidth),i&&c&&(t.left=a-e.maxWidth),o&&u&&(t.top=l-e.minHeight),r&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)n[e]=parseFloat(i[e])||0,n[e]+=parseFloat(r[e])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,n=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize;return{left:this.originalPosition.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).resizable("instance"),i=n.options,r=n._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),o=s&&n._hasScroll(r[0],"left")?0:n.sizeDiff.height,a=s?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-o},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};r&&r.length&&t(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,n,i,r,s,o,a,l=t(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,h=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;h&&(l.containerElement=t(h),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(h),n=[],t(["Top","Right","Left","Bottom"]).each((function(t,i){n[t]=l._num(e.css("padding"+i))})),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]},i=l.containerOffset,r=l.containerSize.height,s=l.containerSize.width,o=l._hasScroll(h,"left")?h.scrollWidth:s,a=l._hasScroll(h)?h.scrollHeight:r,l.parentData={element:h,left:i.left,top:i.top,width:o,height:a}))},resize:function(e){var n,i,r,s,o=t(this).resizable("instance"),a=o.options,l=o.containerOffset,c=o.position,u=o._aspectRatio||e.shiftKey,d={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=a.helper?l.left:0),c.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?l.top:0),r=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),r&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-l.left)),i=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-l.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),n=e.options,i=e.containerOffset,r=e.containerPosition,s=e.containerElement,o=t(e.helper),a=o.offset(),l=o.outerWidth()-e.sizeDiff.width,c=o.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(s.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:c}),e._helper&&!n.animate&&/static/.test(s.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.css("width")),height:parseFloat(e.css("height")),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,n){var i=t(this).resizable("instance"),r=i.options,s=i.originalSize,o=i.originalPosition,a={height:i.size.height-s.height||0,width:i.size.width-s.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0};t(r.alsoResize).each((function(){var e=t(this),i=t(this).data("ui-resizable-alsoresize"),r={},s=e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,(function(t,e){var n=(i[e]||0)+(a[e]||0);n&&n>=0&&(r[e]=n||null)})),e.css(r)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,n=t(this).resizable("instance"),i=n.options,r=n.size,s=n.originalSize,o=n.originalPosition,a=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,d=Math.round((r.width-s.width)/c)*c,h=Math.round((r.height-s.height)/u)*u,p=s.width+d,f=s.height+h,m=i.maxWidth&&i.maxWidth<p,g=i.maxHeight&&i.maxHeight<f,v=i.minWidth&&i.minWidth>p,y=i.minHeight&&i.minHeight>f;i.grid=l,v&&(p+=c),y&&(f+=u),m&&(p-=c),g&&(f-=u),/^(se|s|e)$/.test(a)?(n.size.width=p,n.size.height=f):/^(ne)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.top=o.top-h):/^(sw)$/.test(a)?(n.size.width=p,n.size.height=f,n.position.left=o.left-d):((f-u<=0||p-c<=0)&&(e=n._getPaddingPlusBorderDimensions(this)),f-u>0?(n.size.height=f,n.position.top=o.top-h):(f=u-e.height,n.size.height=f,n.position.top=o.top+s.height-f),p-c>0?(n.size.width=p,n.position.left=o.left-d):(p=c-e.width,n.size.width=p,n.position.left=o.left+s.width-p))}}),t.ui.resizable},void 0===(s=i.apply(e,r))||(t.exports=s)}()},4720:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(3662),n(1897),n(6883),n(9139)],i=function(t){return t.widget("ui.slider",t.ui.mouse,{version:"1.13.3",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,r=this.element.find(".ui-slider-handle"),s=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),e=r.length;e<n;e++)s.push("<span tabindex='0'></span>");this.handles=r.add(t(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:Array.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var n,i,r,s,o,a,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var n=Math.abs(i-c.values(e));(r>n||r===n&&(e===c._lastChangedValue||c.values(e)===u.min))&&(r=n,s=t(this),o=e)})),!1!==this._start(e,o)&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(s,null,"ui-state-active"),s.trigger("focus"),a=s.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-a.left-s.width()/2,top:e.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r,s;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/e)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),s=this._valueMin()+i*r,this._trimAlignValue(s)},_uiHash:function(t,e,n){var i={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==e?e:this.values(t),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var i,r=this.value(),s=this.values();this._hasMultipleValues()&&(i=this.values(e?0:1),r=this.values(e),2===this.options.values.length&&!0===this.options.range&&(n=0===e?Math.min(i,n):Math.max(i,n)),s[e]=n),n!==r&&!1!==this._trigger("slide",t,this._uiHash(e,n,s))&&(this._hasMultipleValues()?this.values(e,n):this.value(n))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var n,i,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!Array.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(n=this.options.values,i=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(i[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,e){var n,i=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(i=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=i-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step;(t=Math.round((t-e)/n)*n+e)>this.options.max&&(t-=n),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,n,i,r,s,o=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,u={};this._hasMultipleValues()?this.handles.each((function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[c?"animate":"css"](u,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:a.animate}))),e=n})):(i=this.value(),r=this._valueMin(),s=this._valueMax(),n=s!==r?(i-r)/(s-r)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},a.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},a.animate))},_handleEvents:{keydown:function(e){var n,i,r,s=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,s)))return}switch(r=this.options.step,n=i=this._hasMultipleValues()?this.values(s):this.value(),e.keyCode){case t.ui.keyCode.HOME:i=this._valueMin();break;case t.ui.keyCode.END:i=this._valueMax();break;case t.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-r)}this._slide(e,s,i)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),this._removeClass(t(e.target),null,"ui-state-active"))}}})},void 0===(s=i.apply(e,r))||(t.exports=s)}()},5285:(t,e,n)=>{var i,r,s;!function(o){"use strict";r=[n(4692),n(3662),n(9983),n(8045),n(2299),n(6883),n(9139)],i=function(t){return t.widget("ui.sortable",t.ui.mouse,{version:"1.13.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,(function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var i=null,r=!1,s=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(e),t(e.target).parents().each((function(){if(t.data(this,s.widgetName+"-item")===s)return i=t(this),!1})),t.data(e.target,s.widgetName+"-item")===s&&(i=t(e.target)),!i||this.options.handle&&!n&&(t(this.options.handle,i).find("*").addBack().each((function(){this===e.target&&(r=!0)})),!r)||(this.currentItem=i,this._removeCurrentsFromItems(),0)))},_mouseStart:function(e,n,i){var r,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.appendTo=t("parent"!==o.appendTo?o.appendTo:this.currentItem.parent()),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),t.extend(this.offset,{parent:this._getParentOffset()}),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(e),!0},_scroll:function(t){var e=this.options,n=!1;return this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+e.scrollSpeed:t.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+e.scrollSpeed:t.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(t.pageY-this.document.scrollTop()<e.scrollSensitivity?n=this.document.scrollTop(this.document.scrollTop()-e.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<e.scrollSensitivity&&(n=this.document.scrollTop(this.document.scrollTop()+e.scrollSpeed)),t.pageX-this.document.scrollLeft()<e.scrollSensitivity?n=this.document.scrollLeft(this.document.scrollLeft()-e.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<e.scrollSensitivity&&(n=this.document.scrollLeft(this.document.scrollLeft()+e.scrollSpeed))),n},_mouseDrag:function(e){var n,i,r,s,o=this.options;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),o.scroll&&!1!==this._scroll(e)&&(this._refreshItemPositions(!0),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},n=this.items.length-1;n>=0;n--)if(r=(i=this.items[n]).item[0],(s=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===s?"next":"prev"]()[0]===r||t.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],r))){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,r=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,(function(){i._clear(e)}))}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each((function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))})),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each((function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")})),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,s=t.left,o=s+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||i+c>a&&i+c<l,h="y"===this.options.axis||e+u>s&&e+u<o,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:s<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!(!i||!r)&&(e=this.dragDirection.vertical,n=this.dragDirection.horizontal,this.floating?"right"===n||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this.dragDirection.vertical,r=this.dragDirection.horizontal;return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var n,i,r,s,o=[],a=[],l=this._connectWith();if(l&&e)for(n=l.length-1;n>=0;n--)for(i=(r=t(l[n],this.document[0])).length-1;i>=0;i--)(s=t.data(r[i],this.widgetFullName))&&s!==this&&!s.options.disabled&&a.push(["function"==typeof s.options.items?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);function c(){o.push(this)}for(a.push(["function"==typeof this.options.items?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=a.length-1;n>=0;n--)a[n][0].each(c);return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,(function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0}))},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,r,s,o,a,l,c,u=this.items,d=[["function"==typeof this.options.items?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(i=(r=t(h[n],this.document[0])).length-1;i>=0;i--)(s=t.data(r[i],this.widgetFullName))&&s!==this&&!s.options.disabled&&(d.push(["function"==typeof s.options.items?s.options.items.call(s.element[0],e,{item:this.currentItem}):t(s.options.items,s.element),s]),this.containers.push(s));for(n=d.length-1;n>=0;n--)for(o=d[n][1],i=0,c=(a=d[n][0]).length;i<c;i++)(l=t(a[i])).data(this.widgetName+"-item",o),u.push({item:l,instance:o,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(e){var n,i,r,s;for(n=this.items.length-1;n>=0;n--)i=this.items[n],this.currentContainer&&i.instance!==this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=r.outerWidth(),i.height=r.outerHeight()),s=r.offset(),i.left=s.left,i.top=s.top)},refreshPositions:function(t){var e,n;if(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(t),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;e>=0;e--)n=this.containers[e].element.offset(),this.containers[e].containerCache.left=n.left,this.containers[e].containerCache.top=n.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(e){var n,i,r=(e=e||this).options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,i=e.currentItem[0].nodeName.toLowerCase(),r.placeholder={element:function(){var r=t("<"+i+">",e.document[0]);return e._addClass(r,"ui-sortable-placeholder",n||e.currentItem[0].className)._removeClass(r,"ui-sortable-helper"),"tbody"===i?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(r)):"tr"===i?e._createTrPlaceholder(e.currentItem,r):"img"===i&&r.attr("src",e.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(t,s){n&&!r.forcePlaceholderSize||(s.height()&&(!r.forcePlaceholderSize||"tbody"!==i&&"tr"!==i)||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(r.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),r.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,n){var i=this;e.children().each((function(){t("<td>&#160;</td>",i.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}))},_contactContainers:function(e){var n,i,r,s,o,a,l,c,u,d,h=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(h&&t.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(r=1e4,s=null,o=(u=h.floating||this._isFloating(this.currentItem))?"left":"top",a=u?"width":"height",d=u?"pageX":"pageY",i=this.items.length-1;i>=0;i--)t.contains(this.containers[p].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[o],c=!1,e[d]-l>this.items[i][a]/2&&(c=!0),Math.abs(e[d]-l)<r&&(r=Math.abs(e[d]-l),s=this.items[i],this.direction=c?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));s?this._rearrange(e,s,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var n=this.options,i="function"==typeof n.helper?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||this.appendTo[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),Array.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=t(r.containment)[0],n=t(r.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*i}},_generatePosition:function(e){var n,i,r=this.options,s=e.pageX,o=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((s-this.originalPageX)/r.grid[0])*r.grid[0],s=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay((function(){r===this.counter&&this.refreshPositions(!i)}))},_clear:function(t,e){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function r(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}for(this.fromOutside&&!e&&i.push((function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||i.push((function(t){this._trigger("update",t,this._uiHash())})),this!==this.currentContainer&&(e||(i.push((function(t){this._trigger("remove",t,this._uiHash())})),i.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||i.push(r("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(r("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})},void 0===(s=i.apply(e,r))||(t.exports=s)}()},4692:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,l=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},c=s.push,u=s.indexOf,d={},h=d.toString,p=d.hasOwnProperty,f=p.toString,m=f.call(Object),g={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},_=i.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var i,r,s=(n=n||_).createElement("script");if(s.text=t,e)for(i in b)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function k(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[h.call(t)]||"object":typeof t}var x="3.7.1",S=/HTML$/i,T=function(t,e){return new T.fn.init(t,e)};function C(t){var e=!!t&&"length"in t&&t.length,n=k(t);return!v(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function E(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}T.fn=T.prototype={jquery:x,constructor:T,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(t){return this.pushStack(T.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(T.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:s.sort,splice:s.splice},T.extend=T.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||v(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(c&&i&&(T.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[e],s=r&&!Array.isArray(n)?[]:r||T.isPlainObject(n)?n:{},r=!1,o[e]=T.extend(c,s,i)):void 0!==i&&(o[e]=i));return o},T.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==h.call(t)||(e=o(t))&&("function"!=typeof(n=p.call(e,"constructor")&&e.constructor)||f.call(n)!==m))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(C(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},text:function(t){var e,n="",i=0,r=t.nodeType;if(!r)for(;e=t[i++];)n+=T.text(e);return 1===r||11===r?t.textContent:9===r?t.documentElement.textContent:3===r||4===r?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(C(Object(t))?T.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!S.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,o=!n;r<s;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,o=[];if(C(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&o.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&o.push(r);return l(o)},guid:1,support:g}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=s[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){d["[object "+e+"]"]=e.toLowerCase()}));var I=s.pop,D=s.sort,O=s.splice,M="[\\x20\\t\\r\\n\\f]",A=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g");T.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var P=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}T.escapeSelector=function(t){return(t+"").replace(P,R)};var L=_,N=c;!function(){var t,e,n,r,o,l,c,d,h,f,m=N,v=T.expando,y=0,_=0,b=tt(),w=tt(),k=tt(),x=tt(),S=function(t,e){return t===e&&(o=!0),0},C="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\["+M+"*("+P+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+P+"))|)"+M+"*\\]",F=":("+P+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",q=new RegExp(M+"+","g"),j=new RegExp("^"+M+"*,"+M+"*"),$=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),H=new RegExp(M+"|>"),z=new RegExp(F),B=new RegExp("^"+P+"$"),W={ID:new RegExp("^#("+P+")"),CLASS:new RegExp("^\\.("+P+")"),TAG:new RegExp("^("+P+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+C+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},U=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,V=/[+~]/,G=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),X=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},K=function(){lt()},J=ht((function(t){return!0===t.disabled&&E(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(s=a.call(L.childNodes),L.childNodes),s[L.childNodes.length].nodeType}catch(t){m={apply:function(t,e){N.apply(t,a.call(e))},call:function(t){N.apply(t,a.call(arguments,1))}}}function Z(t,e,n,i){var r,s,o,a,c,u,p,f=e&&e.ownerDocument,y=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==y&&9!==y&&11!==y)return n;if(!i&&(lt(e),e=e||l,d)){if(11!==y&&(c=Y.exec(t)))if(r=c[1]){if(9===y){if(!(o=e.getElementById(r)))return n;if(o.id===r)return m.call(n,o),n}else if(f&&(o=f.getElementById(r))&&Z.contains(e,o)&&o.id===r)return m.call(n,o),n}else{if(c[2])return m.apply(n,e.getElementsByTagName(t)),n;if((r=c[3])&&e.getElementsByClassName)return m.apply(n,e.getElementsByClassName(r)),n}if(!(x[t+" "]||h&&h.test(t))){if(p=t,f=e,1===y&&(H.test(t)||$.test(t))){for((f=V.test(t)&&at(e.parentNode)||e)==e&&g.scope||((a=e.getAttribute("id"))?a=T.escapeSelector(a):e.setAttribute("id",a=v)),s=(u=ut(t)).length;s--;)u[s]=(a?"#"+a:":scope")+" "+dt(u[s]);p=u.join(",")}try{return m.apply(n,f.querySelectorAll(p)),n}catch(e){x(t,!0)}finally{a===v&&e.removeAttribute("id")}}}return yt(t.replace(A,"$1"),e,n,i)}function tt(){var t=[];return function n(i,r){return t.push(i+" ")>e.cacheLength&&delete n[t.shift()],n[i+" "]=r}}function et(t){return t[v]=!0,t}function nt(t){var e=l.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function it(t){return function(e){return E(e,"input")&&e.type===t}}function rt(t){return function(e){return(E(e,"input")||E(e,"button"))&&e.type===t}}function st(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&J(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ot(t){return et((function(e){return e=+e,et((function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function lt(t){var n,i=t?t.ownerDocument||t:L;return i!=l&&9===i.nodeType&&i.documentElement?(c=(l=i).documentElement,d=!T.isXMLDoc(l),f=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&L!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",K),g.getById=nt((function(t){return c.appendChild(t).id=T.expando,!l.getElementsByName||!l.getElementsByName(T.expando).length})),g.disconnectedMatch=nt((function(t){return f.call(t,"*")})),g.scope=nt((function(){return l.querySelectorAll(":scope")})),g.cssHas=nt((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),g.getById?(e.filter.ID=function(t){var e=t.replace(G,X);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(G,X);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&d){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&d)return e.getElementsByClassName(t)},h=[],nt((function(t){var e;c.appendChild(t).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||h.push("\\["+M+"*(?:value|"+C+")"),t.querySelectorAll("[id~="+v+"-]").length||h.push("~="),t.querySelectorAll("a#"+v+"+*").length||h.push(".#.+[+~]"),t.querySelectorAll(":checked").length||h.push(":checked"),(e=l.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),c.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&h.push(":enabled",":disabled"),(e=l.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||h.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")")})),g.cssHas||h.push(":has"),h=h.length&&new RegExp(h.join("|")),S=function(t,e){if(t===e)return o=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!g.sortDetached&&e.compareDocumentPosition(t)===n?t===l||t.ownerDocument==L&&Z.contains(L,t)?-1:e===l||e.ownerDocument==L&&Z.contains(L,e)?1:r?u.call(r,t)-u.call(r,e):0:4&n?-1:1)},l):l}for(t in Z.matches=function(t,e){return Z(t,null,null,e)},Z.matchesSelector=function(t,e){if(lt(t),d&&!x[e+" "]&&(!h||!h.test(e)))try{var n=f.call(t,e);if(n||g.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){x(e,!0)}return Z(e,l,null,[t]).length>0},Z.contains=function(t,e){return(t.ownerDocument||t)!=l&&lt(t),T.contains(t,e)},Z.attr=function(t,n){(t.ownerDocument||t)!=l&&lt(t);var i=e.attrHandle[n.toLowerCase()],r=i&&p.call(e.attrHandle,n.toLowerCase())?i(t,n,!d):void 0;return void 0!==r?r:t.getAttribute(n)},Z.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},T.uniqueSort=function(t){var e,n=[],i=0,s=0;if(o=!g.sortStable,r=!g.sortStable&&a.call(t,0),D.call(t,S),o){for(;e=t[s++];)e===t[s]&&(i=n.push(s));for(;i--;)O.call(t,n[i],1)}return r=null,t},T.fn.uniqueSort=function(){return this.pushStack(T.uniqueSort(a.apply(this)))},e=T.expr={cacheLength:50,createPseudo:et,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(G,X),t[3]=(t[3]||t[4]||t[5]||"").replace(G,X),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Z.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Z.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&z.test(n)&&(e=ut(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(G,X).toLowerCase();return"*"===t?function(){return!0}:function(t){return E(t,e)}},CLASS:function(t){var e=b[t+" "];return e||(e=new RegExp("(^|"+M+")"+t+"("+M+"|$)"))&&b(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=Z.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(q," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,h,p,f=s!==o?"nextSibling":"previousSibling",m=e.parentNode,g=a&&e.nodeName.toLowerCase(),_=!l&&!a,b=!1;if(m){if(s){for(;f;){for(d=e;d=d[f];)if(a?E(d,g):1===d.nodeType)return!1;p=f="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&_){for(b=(h=(c=(u=m[v]||(m[v]={}))[t]||[])[0]===y&&c[1])&&c[2],d=h&&m.childNodes[h];d=++h&&d&&d[f]||(b=h=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){u[t]=[y,h,b];break}}else if(_&&(b=h=(c=(u=e[v]||(e[v]={}))[t]||[])[0]===y&&c[1]),!1===b)for(;(d=++h&&d&&d[f]||(b=h=0)||p.pop())&&(!(a?E(d,g):1===d.nodeType)||!++b||(_&&((u=d[v]||(d[v]={}))[t]=[y,b]),d!==e)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,n){var i,r=e.pseudos[t]||e.setFilters[t.toLowerCase()]||Z.error("unsupported pseudo: "+t);return r[v]?r(n):r.length>1?(i=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var i,s=r(t,n),o=s.length;o--;)t[i=u.call(t,s[o])]=!(e[i]=s[o])})):function(t){return r(t,0,i)}):r}},pseudos:{not:et((function(t){var e=[],n=[],i=vt(t.replace(A,"$1"));return i[v]?et((function(t,e,n,r){for(var s,o=i(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))})):function(t,r,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return Z(t,e).length>0}})),contains:et((function(t){return t=t.replace(G,X),function(e){return(e.textContent||T.text(e)).indexOf(t)>-1}})),lang:et((function(t){return B.test(t||"")||Z.error("unsupported lang: "+t),t=t.replace(G,X).toLowerCase(),function(e){var n;do{if(n=d?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===c},focus:function(t){return t===function(){try{return l.activeElement}catch(t){}}()&&l.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:st(!1),disabled:st(!0),checked:function(t){return E(t,"input")&&!!t.checked||E(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return U.test(t.nodeName)},button:function(t){return E(t,"input")&&"button"===t.type||E(t,"button")},text:function(t){var e;return E(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ot((function(){return[0]})),last:ot((function(t,e){return[e-1]})),eq:ot((function(t,e,n){return[n<0?n+e:n]})),even:ot((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:ot((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:ot((function(t,e,n){var i;for(i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:ot((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=it(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=rt(t);function ct(){}function ut(t,n){var i,r,s,o,a,l,c,u=w[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=e.preFilter;a;){for(o in i&&!(r=j.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),i=!1,(r=$.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(A," ")}),a=a.slice(i.length)),e.filter)!(r=W[o].exec(a))||c[o]&&!(r=c[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?Z.error(t):w(t,l).slice(0)}function dt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function ht(t,e,n){var i=e.dir,r=e.next,s=r||i,o=n&&"parentNode"===s,a=_++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,l){var c,u,d=[y,a];if(l){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(u=e[v]||(e[v]={}),r&&E(e,r))e=e[i]||e;else{if((c=u[s])&&c[0]===y&&c[1]===a)return d[2]=c[2];if(u[s]=d,d[2]=t(e,n,l))return!0}return!1}}function pt(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function ft(t,e,n,i,r){for(var s,o=[],a=0,l=t.length,c=null!=e;a<l;a++)(s=t[a])&&(n&&!n(s,i,r)||(o.push(s),c&&e.push(a)));return o}function mt(t,e,n,i,r,s){return i&&!i[v]&&(i=mt(i)),r&&!r[v]&&(r=mt(r,s)),et((function(s,o,a,l){var c,d,h,p,f=[],g=[],v=o.length,y=s||function(t,e,n){for(var i=0,r=e.length;i<r;i++)Z(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),_=!t||!s&&e?y:ft(y,f,t,a,l);if(n?n(_,p=r||(s?t:v||i)?[]:o,a,l):p=_,i)for(c=ft(p,g),i(c,[],a,l),d=c.length;d--;)(h=c[d])&&(p[g[d]]=!(_[g[d]]=h));if(s){if(r||t){if(r){for(c=[],d=p.length;d--;)(h=p[d])&&c.push(_[d]=h);r(null,p=[],c,l)}for(d=p.length;d--;)(h=p[d])&&(c=r?u.call(s,h):f[d])>-1&&(s[c]=!(o[c]=h))}}else p=ft(p===o?p.splice(v,p.length):p),r?r(null,o,p,l):m.apply(o,p)}))}function gt(t){for(var i,r,s,o=t.length,a=e.relative[t[0].type],l=a||e.relative[" "],c=a?1:0,d=ht((function(t){return t===i}),l,!0),h=ht((function(t){return u.call(i,t)>-1}),l,!0),p=[function(t,e,r){var s=!a&&(r||e!=n)||((i=e).nodeType?d(t,e,r):h(t,e,r));return i=null,s}];c<o;c++)if(r=e.relative[t[c].type])p=[ht(pt(p),r)];else{if((r=e.filter[t[c].type].apply(null,t[c].matches))[v]){for(s=++c;s<o&&!e.relative[t[s].type];s++);return mt(c>1&&pt(p),c>1&&dt(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(A,"$1"),r,c<s&&gt(t.slice(c,s)),s<o&&gt(t=t.slice(s)),s<o&&dt(t))}p.push(r)}return pt(p)}function vt(t,i){var r,s=[],o=[],a=k[t+" "];if(!a){for(i||(i=ut(t)),r=i.length;r--;)(a=gt(i[r]))[v]?s.push(a):o.push(a);a=k(t,function(t,i){var r=i.length>0,s=t.length>0,o=function(o,a,c,u,h){var p,f,g,v=0,_="0",b=o&&[],w=[],k=n,x=o||s&&e.find.TAG("*",h),S=y+=null==k?1:Math.random()||.1,C=x.length;for(h&&(n=a==l||a||h);_!==C&&null!=(p=x[_]);_++){if(s&&p){for(f=0,a||p.ownerDocument==l||(lt(p),c=!d);g=t[f++];)if(g(p,a||l,c)){m.call(u,p);break}h&&(y=S)}r&&((p=!g&&p)&&v--,o&&b.push(p))}if(v+=_,r&&_!==v){for(f=0;g=i[f++];)g(b,w,a,c);if(o){if(v>0)for(;_--;)b[_]||w[_]||(w[_]=I.call(u));w=ft(w)}m.apply(u,w),h&&!o&&w.length>0&&v+i.length>1&&T.uniqueSort(u)}return h&&(y=S,n=k),b};return r?et(o):o}(o,s)),a.selector=t}return a}function yt(t,n,i,r){var s,o,a,l,c,u="function"==typeof t&&t,h=!r&&ut(t=u.selector||t);if(i=i||[],1===h.length){if((o=h[0]=h[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===n.nodeType&&d&&e.relative[o[1].type]){if(!(n=(e.find.ID(a.matches[0].replace(G,X),n)||[])[0]))return i;u&&(n=n.parentNode),t=t.slice(o.shift().value.length)}for(s=W.needsContext.test(t)?0:o.length;s--&&(a=o[s],!e.relative[l=a.type]);)if((c=e.find[l])&&(r=c(a.matches[0].replace(G,X),V.test(o[0].type)&&at(n.parentNode)||n))){if(o.splice(s,1),!(t=r.length&&dt(o)))return m.apply(i,r),i;break}}return(u||vt(t,h))(r,n,!d,i,!n||V.test(t)&&at(n.parentNode)||n),i}ct.prototype=e.filters=e.pseudos,e.setFilters=new ct,g.sortStable=v.split("").sort(S).join("")===v,lt(),g.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(l.createElement("fieldset"))})),T.find=Z,T.expr[":"]=T.expr.pseudos,T.unique=T.uniqueSort,Z.compile=vt,Z.select=yt,Z.setDocument=lt,Z.tokenize=ut,Z.escape=T.escapeSelector,Z.getText=T.text,Z.isXML=T.isXMLDoc,Z.selectors=T.expr,Z.support=T.support,Z.uniqueSort=T.uniqueSort}();var F=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&T(t).is(n))break;i.push(t)}return i},q=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},j=T.expr.match.needsContext,$=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function H(t,e,n){return v(e)?T.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?T.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?T.grep(t,(function(t){return u.call(e,t)>-1!==n})):T.filter(e,t,n)}T.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?T.find.matchesSelector(i,t)?[i]:[]:T.find.matches(t,T.grep(e,(function(t){return 1===t.nodeType})))},T.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(T(t).filter((function(){for(e=0;e<i;e++)if(T.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)T.find(t,r[e],n);return i>1?T.uniqueSort(n):n},filter:function(t){return this.pushStack(H(this,t||[],!1))},not:function(t){return this.pushStack(H(this,t||[],!0))},is:function(t){return!!H(this,"string"==typeof t&&j.test(t)?T(t):t||[],!1).length}});var z,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||z,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:B.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:_,!0)),$.test(i[1])&&T.isPlainObject(e))for(i in e)v(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=_.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,z=T(_);var W=/^(?:parents|prev(?:Until|All))/,U={children:!0,contents:!0,next:!0,prev:!0};function Q(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,r=this.length,s=[],o="string"!=typeof t&&T(t);if(!j.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?T.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?u.call(T(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return F(t,"parentNode")},parentsUntil:function(t,e,n){return F(t,"parentNode",n)},next:function(t){return Q(t,"nextSibling")},prev:function(t){return Q(t,"previousSibling")},nextAll:function(t){return F(t,"nextSibling")},prevAll:function(t){return F(t,"previousSibling")},nextUntil:function(t,e,n){return F(t,"nextSibling",n)},prevUntil:function(t,e,n){return F(t,"previousSibling",n)},siblings:function(t){return q((t.parentNode||{}).firstChild,t)},children:function(t){return q(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(E(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},(function(t,e){T.fn[t]=function(n,i){var r=T.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=T.filter(i,r)),this.length>1&&(U[t]||T.uniqueSort(r),W.test(t)&&r.reverse()),this.pushStack(r)}}));var Y=/[^\x20\t\r\n\f]+/g;function V(t){return t}function G(t){throw t}function X(t,e,n,i){var r;try{t&&v(r=t.promise)?r.call(t).done(e).fail(n):t&&v(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return T.each(t.match(Y)||[],(function(t,n){e[n]=!0})),e}(t):T.extend({},t);var e,n,i,r,s=[],o=[],a=-1,l=function(){for(r=r||t.once,i=e=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},c={add:function(){return s&&(n&&!e&&(a=s.length-1,o.push(n)),function e(n){T.each(n,(function(n,i){v(i)?t.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==k(i)&&e(i)}))}(arguments),n&&!e&&l()),this},remove:function(){return T.each(arguments,(function(t,e){for(var n;(n=T.inArray(e,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(t){return t?T.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||e||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},T.extend({Deferred:function(t){var e=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return T.Deferred((function(n){T.each(e,(function(e,i){var r=v(t[i[4]])&&t[i[4]];s[i[1]]((function(){var t=r&&r.apply(this,arguments);t&&v(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,r){var s=0;function o(t,e,n,r){return function(){var a=this,l=arguments,c=function(){var i,c;if(!(t<s)){if((i=n.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,v(c)?r?c.call(i,o(s,e,V,r),o(s,e,G,r)):(s++,c.call(i,o(s,e,V,r),o(s,e,G,r),o(s,e,V,e.notifyWith))):(n!==V&&(a=void 0,l=[i]),(r||e.resolveWith)(a,l))}},u=r?c:function(){try{c()}catch(i){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(i,u.error),t+1>=s&&(n!==G&&(a=void 0,l=[i]),e.rejectWith(a,l))}};t?u():(T.Deferred.getErrorHook?u.error=T.Deferred.getErrorHook():T.Deferred.getStackHook&&(u.error=T.Deferred.getStackHook()),i.setTimeout(u))}}return T.Deferred((function(i){e[0][3].add(o(0,i,v(r)?r:V,i.notifyWith)),e[1][3].add(o(0,i,v(t)?t:V)),e[2][3].add(o(0,i,v(n)?n:G))})).promise()},promise:function(t){return null!=t?T.extend(t,r):r}},s={};return T.each(e,(function(t,i){var o=i[2],a=i[5];r[i[1]]=o.add,a&&o.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=o.fireWith})),r.promise(s),t&&t.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),r=a.call(arguments),s=T.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?a.call(arguments):n,--e||s.resolveWith(i,r)}};if(e<=1&&(X(t,s.done(o(n)).resolve,s.reject,!e),"pending"===s.state()||v(r[n]&&r[n].then)))return s.then();for(;n--;)X(r[n],o(n),s.reject);return s.promise()}});var K=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&K.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){i.setTimeout((function(){throw t}))};var J=T.Deferred();function Z(){_.removeEventListener("DOMContentLoaded",Z),i.removeEventListener("load",Z),T.ready()}T.fn.ready=function(t){return J.then(t).catch((function(t){T.readyException(t)})),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==t&&--T.readyWait>0||J.resolveWith(_,[T]))}}),T.ready.then=J.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?i.setTimeout(T.ready):(_.addEventListener("DOMContentLoaded",Z),i.addEventListener("load",Z));var tt=function(t,e,n,i,r,s,o){var a=0,l=t.length,c=null==n;if("object"===k(n))for(a in r=!0,n)tt(t,e,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,v(i)||(o=!0),c&&(o?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(T(t),n)})),e))for(;a<l;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:c?e.call(t):l?e(t[0],n):s},et=/^-ms-/,nt=/-([a-z])/g;function it(t,e){return e.toUpperCase()}function rt(t){return t.replace(et,"ms-").replace(nt,it)}var st=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function ot(){this.expando=T.expando+ot.uid++}ot.uid=1,ot.prototype={cache:function(t){var e=t[this.expando];return e||(e={},st(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[rt(e)]=n;else for(i in e)r[rt(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][rt(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(rt):(e=rt(e))in i?[e]:e.match(Y)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||T.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var at=new ot,lt=new ot,ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ut=/[A-Z]/g;function dt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(ut,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ct.test(t)?JSON.parse(t):t)}(n)}catch(t){}lt.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return lt.hasData(t)||at.hasData(t)},data:function(t,e,n){return lt.access(t,e,n)},removeData:function(t,e){lt.remove(t,e)},_data:function(t,e,n){return at.access(t,e,n)},_removeData:function(t,e){at.remove(t,e)}}),T.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=lt.get(s),1===s.nodeType&&!at.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=rt(i.slice(5)),dt(s,i,r[i]));at.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){lt.set(this,t)})):tt(this,(function(e){var n;if(s&&void 0===e)return void 0!==(n=lt.get(s,t))||void 0!==(n=dt(s,t))?n:void 0;this.each((function(){lt.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){lt.remove(this,t)}))}}),T.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=at.get(t,e),n&&(!i||Array.isArray(n)?i=at.access(t,e,T.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),i=n.length,r=n.shift(),s=T._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,(function(){T.dequeue(t,e)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return at.get(t,n)||at.access(t,n,{empty:T.Callbacks("once memory").add((function(){at.remove(t,[e+"queue",n])}))})}}),T.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?T.queue(this[0],t):void 0===e?this:this.each((function(){var n=T.queue(this,t,e);T._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&T.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){T.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=T.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=at.get(s[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pt=new RegExp("^(?:([+-])=|)("+ht+")([a-z%]*)$","i"),ft=["Top","Right","Bottom","Left"],mt=_.documentElement,gt=function(t){return T.contains(t.ownerDocument,t)},vt={composed:!0};mt.getRootNode&&(gt=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(vt)===t.ownerDocument});var yt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&gt(t)&&"none"===T.css(t,"display")};function _t(t,e,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return T.css(t,e,"")},l=a(),c=n&&n[3]||(T.cssNumber[e]?"":"px"),u=t.nodeType&&(T.cssNumber[e]||"px"!==c&&+l)&&pt.exec(T.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;o--;)T.style(t,e,u+c),(1-s)*(1-(s=a()/l||.5))<=0&&(o=0),u/=s;u*=2,T.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var bt={};function wt(t){var e,n=t.ownerDocument,i=t.nodeName,r=bt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=T.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),bt[i]=r,r)}function kt(t,e){for(var n,i,r=[],s=0,o=t.length;s<o;s++)(i=t[s]).style&&(n=i.style.display,e?("none"===n&&(r[s]=at.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&yt(i)&&(r[s]=wt(i))):"none"!==n&&(r[s]="none",at.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}T.fn.extend({show:function(){return kt(this,!0)},hide:function(){return kt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){yt(this)?T(this).show():T(this).hide()}))}});var xt,St,Tt=/^(?:checkbox|radio)$/i,Ct=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Et=/^$|^module$|\/(?:java|ecma)script/i;xt=_.createDocumentFragment().appendChild(_.createElement("div")),(St=_.createElement("input")).setAttribute("type","radio"),St.setAttribute("checked","checked"),St.setAttribute("name","t"),xt.appendChild(St),g.checkClone=xt.cloneNode(!0).cloneNode(!0).lastChild.checked,xt.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!xt.cloneNode(!0).lastChild.defaultValue,xt.innerHTML="<option></option>",g.option=!!xt.lastChild;var It={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Dt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&E(t,e)?T.merge([t],n):n}function Ot(t,e){for(var n=0,i=t.length;n<i;n++)at.set(t[n],"globalEval",!e||at.get(e[n],"globalEval"))}It.tbody=It.tfoot=It.colgroup=It.caption=It.thead,It.th=It.td,g.option||(It.optgroup=It.option=[1,"<select multiple='multiple'>","</select>"]);var Mt=/<|&#?\w+;/;function At(t,e,n,i,r){for(var s,o,a,l,c,u,d=e.createDocumentFragment(),h=[],p=0,f=t.length;p<f;p++)if((s=t[p])||0===s)if("object"===k(s))T.merge(h,s.nodeType?[s]:s);else if(Mt.test(s)){for(o=o||d.appendChild(e.createElement("div")),a=(Ct.exec(s)||["",""])[1].toLowerCase(),l=It[a]||It._default,o.innerHTML=l[1]+T.htmlPrefilter(s)+l[2],u=l[0];u--;)o=o.lastChild;T.merge(h,o.childNodes),(o=d.firstChild).textContent=""}else h.push(e.createTextNode(s));for(d.textContent="",p=0;s=h[p++];)if(i&&T.inArray(s,i)>-1)r&&r.push(s);else if(c=gt(s),o=Dt(d.appendChild(s),"script"),c&&Ot(o),n)for(u=0;s=o[u++];)Et.test(s.type||"")&&n.push(s);return d}var Pt=/^([^.]*)(?:\.(.+)|)/;function Rt(){return!0}function Lt(){return!1}function Nt(t,e,n,i,r,s){var o,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)Nt(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Lt;else if(!r)return t;return 1===s&&(o=r,r=function(t){return T().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=T.guid++)),t.each((function(){T.event.add(this,e,r,i,n)}))}function Ft(t,e,n){n?(at.set(t,e,!1),T.event.add(t,e,{namespace:!1,handler:function(t){var n,i=at.get(this,e);if(1&t.isTrigger&&this[e]){if(i)(T.event.special[e]||{}).delegateType&&t.stopPropagation();else if(i=a.call(arguments),at.set(this,e,i),this[e](),n=at.get(this,e),at.set(this,e,!1),i!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else i&&(at.set(this,e,T.event.trigger(i[0],i.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Rt)}})):void 0===at.get(t,e)&&T.event.add(t,e,Rt)}T.event={global:{},add:function(t,e,n,i,r){var s,o,a,l,c,u,d,h,p,f,m,g=at.get(t);if(st(t))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&T.find.matchesSelector(mt,r),n.guid||(n.guid=T.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(Y)||[""]).length;c--;)p=m=(a=Pt.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=T.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=T.event.special[p]||{},u=T.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:f.join(".")},s),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,f,o)||t.addEventListener&&t.addEventListener(p,o)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),T.event.global[p]=!0)},remove:function(t,e,n,i,r){var s,o,a,l,c,u,d,h,p,f,m,g=at.hasData(t)&&at.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(Y)||[""]).length;c--;)if(p=m=(a=Pt.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=T.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)u=h[s],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(s,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(t,u));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,f,g.handle)||T.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)T.event.remove(t,p+e[c],n,i,!0);T.isEmptyObject(l)&&at.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,o,a=new Array(arguments.length),l=T.event.fix(t),c=(at.get(this,"events")||Object.create(null))[l.type]||[],u=T.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(o=T.event.handlers.call(this,l,c),e=0;(r=o[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(i=((T.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,i,r,s,o,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(s=[],o={},n=0;n<l;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?T(r,this).index(c)>-1:T.find(r,this,null,[c]).length),o[r]&&s.push(i);s.length&&a.push({elem:c,handlers:s})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Tt.test(e.type)&&e.click&&E(e,"input")&&Ft(e,"click",!0),!1},trigger:function(t){var e=this||t;return Tt.test(e.type)&&e.click&&E(e,"input")&&Ft(e,"click"),!0},_default:function(t){var e=t.target;return Tt.test(e.type)&&e.click&&E(e,"input")&&at.get(e,"click")||E(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Rt:Lt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Lt,isPropagationStopped:Lt,isImmediatePropagationStopped:Lt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Rt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Rt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Rt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(_.documentMode){var n=at.get(this,"handle"),i=T.event.fix(t);i.type="focusin"===t.type?"focus":"blur",i.isSimulated=!0,n(t),i.target===i.currentTarget&&n(i)}else T.event.simulate(e,t.target,T.event.fix(t))}T.event.special[t]={setup:function(){var i;if(Ft(this,t,!0),!_.documentMode)return!1;(i=at.get(this,e))||this.addEventListener(e,n),at.set(this,e,(i||0)+1)},trigger:function(){return Ft(this,t),!0},teardown:function(){var t;if(!_.documentMode)return!1;(t=at.get(this,e)-1)?at.set(this,e,t):(this.removeEventListener(e,n),at.remove(this,e))},_default:function(e){return at.get(e.target,t)},delegateType:e},T.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=_.documentMode?this:i,s=at.get(r,e);s||(_.documentMode?this.addEventListener(e,n):i.addEventListener(t,n,!0)),at.set(r,e,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=_.documentMode?this:i,s=at.get(r,e)-1;s?at.set(r,e,s):(_.documentMode?this.removeEventListener(e,n):i.removeEventListener(t,n,!0),at.remove(r,e))}}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){T.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||T.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}})),T.fn.extend({on:function(t,e,n,i){return Nt(this,t,e,n,i)},one:function(t,e,n,i){return Nt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,T(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Lt),this.each((function(){T.event.remove(this,t,n,e)}))}});var qt=/<script|<style|<link/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ht(t,e){return E(t,"table")&&E(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function zt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Bt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Wt(t,e){var n,i,r,s,o,a;if(1===e.nodeType){if(at.hasData(t)&&(a=at.get(t).events))for(r in at.remove(e,"handle events"),a)for(n=0,i=a[r].length;n<i;n++)T.event.add(e,r,a[r][n]);lt.hasData(t)&&(s=lt.access(t),o=T.extend({},s),lt.set(e,o))}}function Ut(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Tt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Qt(t,e,n,i){e=l(e);var r,s,o,a,c,u,d=0,h=t.length,p=h-1,f=e[0],m=v(f);if(m||h>1&&"string"==typeof f&&!g.checkClone&&jt.test(f))return t.each((function(r){var s=t.eq(r);m&&(e[0]=f.call(this,r,s.html())),Qt(s,e,n,i)}));if(h&&(s=(r=At(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=(o=T.map(Dt(r,"script"),zt)).length;d<h;d++)c=r,d!==p&&(c=T.clone(c,!0,!0),a&&T.merge(o,Dt(c,"script"))),n.call(t[d],c,d);if(a)for(u=o[o.length-1].ownerDocument,T.map(o,Bt),d=0;d<a;d++)c=o[d],Et.test(c.type||"")&&!at.access(c,"globalEval")&&T.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?T._evalUrl&&!c.noModule&&T._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):w(c.textContent.replace($t,""),c,u))}return t}function Yt(t,e,n){for(var i,r=e?T.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||T.cleanData(Dt(i)),i.parentNode&&(n&&gt(i)&&Ot(Dt(i,"script")),i.parentNode.removeChild(i));return t}T.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),l=gt(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(o=Dt(a),i=0,r=(s=Dt(t)).length;i<r;i++)Ut(s[i],o[i]);if(e)if(n)for(s=s||Dt(t),o=o||Dt(a),i=0,r=s.length;i<r;i++)Wt(s[i],o[i]);else Wt(t,a);return(o=Dt(a,"script")).length>0&&Ot(o,!l&&Dt(t,"script")),a},cleanData:function(t){for(var e,n,i,r=T.event.special,s=0;void 0!==(n=t[s]);s++)if(st(n)){if(e=n[at.expando]){if(e.events)for(i in e.events)r[i]?T.event.remove(n,i):T.removeEvent(n,i,e.handle);n[at.expando]=void 0}n[lt.expando]&&(n[lt.expando]=void 0)}}}),T.fn.extend({detach:function(t){return Yt(this,t,!0)},remove:function(t){return Yt(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Qt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ht(this,t).appendChild(t)}))},prepend:function(){return Qt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ht(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Qt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Qt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(Dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return T.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!qt.test(t)&&!It[(Ct.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(Dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Qt(this,arguments,(function(e){var n=this.parentNode;T.inArray(this,t)<0&&(T.cleanData(Dt(this)),n&&n.replaceChild(e,this))}),t)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){T.fn[t]=function(t){for(var n,i=[],r=T(t),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),T(r[o])[e](n),c.apply(i,n.get());return this.pushStack(i)}}));var Vt=new RegExp("^("+ht+")(?!px)[a-z%]+$","i"),Gt=/^--/,Xt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Kt=function(t,e,n){var i,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=s[r];return i},Jt=new RegExp(ft.join("|"),"i");function Zt(t,e,n){var i,r,s,o,a=Gt.test(e),l=t.style;return(n=n||Xt(t))&&(o=n.getPropertyValue(e)||n[e],a&&o&&(o=o.replace(A,"$1")||void 0),""!==o||gt(t)||(o=T.style(t,e)),!g.pixelBoxStyles()&&Vt.test(o)&&Jt.test(e)&&(i=l.width,r=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=n.width,l.width=i,l.minWidth=r,l.maxWidth=s)),void 0!==o?o+"":o}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",mt.appendChild(c).appendChild(u);var t=i.getComputedStyle(u);n="1%"!==t.top,l=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),r=36===e(t.width),u.style.position="absolute",s=12===e(u.offsetWidth/3),mt.removeChild(c),u=null}}function e(t){return Math.round(parseFloat(t))}var n,r,s,o,a,l,c=_.createElement("div"),u=_.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,T.extend(g,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,e,n,r;return null==a&&(t=_.createElement("table"),e=_.createElement("tr"),n=_.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",mt.appendChild(t).appendChild(e).appendChild(n),r=i.getComputedStyle(e),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,mt.removeChild(t)),a}}))}();var ee=["Webkit","Moz","ms"],ne=_.createElement("div").style,ie={};function re(t){return T.cssProps[t]||ie[t]||(t in ne?t:ie[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var se=/^(none|table(?!-c[ea]).+)/,oe={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function le(t,e,n){var i=pt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ce(t,e,n,i,r,s){var o="width"===e?1:0,a=0,l=0,c=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=T.css(t,n+ft[o],!0,r)),i?("content"===n&&(l-=T.css(t,"padding"+ft[o],!0,r)),"margin"!==n&&(l-=T.css(t,"border"+ft[o]+"Width",!0,r))):(l+=T.css(t,"padding"+ft[o],!0,r),"padding"!==n?l+=T.css(t,"border"+ft[o]+"Width",!0,r):a+=T.css(t,"border"+ft[o]+"Width",!0,r));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-a-.5))||0),l+c}function ue(t,e,n){var i=Xt(t),r=(!g.boxSizingReliable()||n)&&"border-box"===T.css(t,"boxSizing",!1,i),s=r,o=Zt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Vt.test(o)){if(!n)return o;o="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&E(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===T.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===T.css(t,"boxSizing",!1,i),(s=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+ce(t,e,n||(r?"border":"content"),s,i,o)+"px"}function de(t,e,n,i,r){return new de.prototype.init(t,e,n,i,r)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Zt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=rt(e),l=Gt.test(e),c=t.style;if(l||(e=re(a)),o=T.cssHooks[e]||T.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:c[e];"string"==(s=typeof n)&&(r=pt.exec(n))&&r[1]&&(n=_t(t,e,r),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=r&&r[3]||(T.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var r,s,o,a=rt(e);return Gt.test(e)||(e=re(a)),(o=T.cssHooks[e]||T.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=Zt(t,e,i)),"normal"===r&&e in ae&&(r=ae[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),T.each(["height","width"],(function(t,e){T.cssHooks[e]={get:function(t,n,i){if(n)return!se.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ue(t,e,i):Kt(t,oe,(function(){return ue(t,e,i)}))},set:function(t,n,i){var r,s=Xt(t),o=!g.scrollboxSize()&&"absolute"===s.position,a=(o||i)&&"border-box"===T.css(t,"boxSizing",!1,s),l=i?ce(t,e,i,a,s):0;return a&&o&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-ce(t,e,"border",!1,s)-.5)),l&&(r=pt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=T.css(t,e)),le(0,n,l)}}})),T.cssHooks.marginLeft=te(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Zt(t,"marginLeft"))||t.getBoundingClientRect().left-Kt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(t,e){T.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+ft[i]+e]=s[i]||s[i-2]||s[0];return r}},"margin"!==t&&(T.cssHooks[t+e].set=le)})),T.fn.extend({css:function(t,e){return tt(this,(function(t,e,n){var i,r,s={},o=0;if(Array.isArray(e)){for(i=Xt(t),r=e.length;o<r;o++)s[e[o]]=T.css(t,e[o],!1,i);return s}return void 0!==n?T.style(t,e,n):T.css(t,e)}),t,e,arguments.length>1)}}),T.Tween=de,de.prototype={constructor:de,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(T.cssNumber[n]?"":"px")},cur:function(){var t=de.propHooks[this.prop];return t&&t.get?t.get(this):de.propHooks._default.get(this)},run:function(t){var e,n=de.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):de.propHooks._default.set(this),this}},de.prototype.init.prototype=de.prototype,de.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[re(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}},de.propHooks.scrollTop=de.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=de.prototype.init,T.fx.step={};var he,pe,fe=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ge(){pe&&(!1===_.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ge):i.setTimeout(ge,T.fx.interval),T.fx.tick())}function ve(){return i.setTimeout((function(){he=void 0})),he=Date.now()}function ye(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=ft[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function _e(t,e,n){for(var i,r=(be.tweeners[e]||[]).concat(be.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function be(t,e,n){var i,r,s=0,o=be.prefilters.length,a=T.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var e=he||ve(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),s=0,o=c.tweens.length;s<o;s++)c.tweens[s].run(i);return a.notifyWith(t,[c,i,n]),i<1&&o?n:(o||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:e,originalOptions:n,startTime:he||ve(),duration:n.duration,tweens:[],createTween:function(e,n){var i=T.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var n,i,r,s,o;for(n in t)if(r=e[i=rt(n)],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=T.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(u,c.opts.specialEasing);s<o;s++)if(i=be.prefilters[s].call(c,t,u,c.opts))return v(i.stop)&&(T._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return T.map(u,_e,c),v(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),T.fx.timer(T.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}T.Animation=T.extend(be,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return _t(n.elem,t,pt.exec(e),n),n}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(Y);for(var n,i=0,r=t.length;i<r;i++)n=t[i],be.tweeners[n]=be.tweeners[n]||[],be.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,s,o,a,l,c,u,d="width"in e||"height"in e,h=this,p={},f=t.style,m=t.nodeType&&yt(t),g=at.get(t,"fxshow");for(i in n.queue||(null==(o=T._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,T.queue(t,"fx").length||o.empty.fire()}))}))),e)if(r=e[i],fe.test(r)){if(delete e[i],s=s||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||T.style(t,i)}if((l=!T.isEmptyObject(e))||!T.isEmptyObject(p))for(i in d&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=at.get(t,"display")),"none"===(u=T.css(t,"display"))&&(c?u=c:(kt([t],!0),c=t.style.display||c,u=T.css(t,"display"),kt([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===T.css(t,"float")&&(l||(h.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=at.access(t,"fxshow",{display:c}),s&&(g.hidden=!m),m&&kt([t],!0),h.done((function(){for(i in m||kt([t]),at.remove(t,"fxshow"),p)T.style(t,i,p[i])}))),l=_e(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?be.prefilters.unshift(t):be.prefilters.push(t)}}),T.speed=function(t,e,n){var i=t&&"object"==typeof t?T.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return T.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in T.fx.speeds?i.duration=T.fx.speeds[i.duration]:i.duration=T.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&T.dequeue(this,i.queue)},i},T.fn.extend({fadeTo:function(t,e,n,i){return this.filter(yt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=T.isEmptyObject(t),s=T.speed(e,n,i),o=function(){var e=be(this,T.extend({},t),s);(r||at.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",s=T.timers,o=at.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&me.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||T.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=at.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=T.timers,o=i?i.length:0;for(n.finish=!0,T.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),T.each(["toggle","show","hide"],(function(t,e){var n=T.fn[e];T.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ye(e,!0),t,i,r)}})),T.each({slideDown:ye("show"),slideUp:ye("hide"),slideToggle:ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){T.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(he=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),he=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){pe||(pe=!0,ge())},T.fx.stop=function(){pe=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,e){return t=T.fx&&T.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(r)}}))},function(){var t=_.createElement("input"),e=_.createElement("select").appendChild(_.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=_.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var we,ke=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return tt(this,T.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){T.removeAttr(this,t)}))}}),T.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?T.prop(t,e,n):(1===s&&T.isXMLDoc(t)||(r=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?we:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=T.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&E(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(Y);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),we={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=ke[e]||T.find.attr;ke[e]=function(t,e,i){var r,s,o=e.toLowerCase();return i||(s=ke[o],ke[o]=r,r=null!=n(t,e,i)?o:null,ke[o]=s),r}}));var xe=/^(?:input|select|textarea|button)$/i,Se=/^(?:a|area)$/i;function Te(t){return(t.match(Y)||[]).join(" ")}function Ce(t){return t.getAttribute&&t.getAttribute("class")||""}function Ee(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(Y)||[]}T.fn.extend({prop:function(t,e){return tt(this,T.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[T.propFix[t]||t]}))}}),T.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&T.isXMLDoc(t)||(e=T.propFix[e]||e,r=T.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):xe.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(t){var e,n,i,r,s,o;return v(t)?this.each((function(e){T(this).addClass(t.call(this,e,Ce(this)))})):(e=Ee(t)).length?this.each((function(){if(i=Ce(this),n=1===this.nodeType&&" "+Te(i)+" "){for(s=0;s<e.length;s++)r=e[s],n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=Te(n),i!==o&&this.setAttribute("class",o)}})):this},removeClass:function(t){var e,n,i,r,s,o;return v(t)?this.each((function(e){T(this).removeClass(t.call(this,e,Ce(this)))})):arguments.length?(e=Ee(t)).length?this.each((function(){if(i=Ce(this),n=1===this.nodeType&&" "+Te(i)+" "){for(s=0;s<e.length;s++)for(r=e[s];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o=Te(n),i!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,i,r,s,o=typeof t,a="string"===o||Array.isArray(t);return v(t)?this.each((function(n){T(this).toggleClass(t.call(this,n,Ce(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(n=Ee(t),this.each((function(){if(a)for(s=T(this),r=0;r<n.length;r++)i=n[r],s.hasClass(i)?s.removeClass(i):s.addClass(i);else void 0!==t&&"boolean"!==o||((i=Ce(this))&&at.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===t?"":at.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Te(Ce(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ie=/\r/g;T.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=v(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,T(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=T.map(r,(function(t){return null==t?"":t+""}))),(e=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=T.valHooks[r.type]||T.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Ie,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:Te(T.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,o="select-one"===t.type,a=o?null:[],l=o?s+1:r.length;for(i=s<0?l:o?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){if(e=T(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=T.makeArray(e),o=r.length;o--;)((i=r[o]).selected=T.inArray(T.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=T.inArray(T(t).val(),e)>-1}},g.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var De=i.location,Oe={guid:Date.now()},Me=/\?/;T.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||T.error("Invalid XML: "+(n?T.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Ae=/^(?:focusinfocus|focusoutblur)$/,Pe=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,n,r){var s,o,a,l,c,u,d,h,f=[n||_],m=p.call(t,"type")?t.type:t,g=p.call(t,"namespace")?t.namespace.split("."):[];if(o=h=a=n=n||_,3!==n.nodeType&&8!==n.nodeType&&!Ae.test(m+T.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(t=t[T.expando]?t:new T.Event(m,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),d=T.event.special[m]||{},r||!d.trigger||!1!==d.trigger.apply(n,e))){if(!r&&!d.noBubble&&!y(n)){for(l=d.delegateType||m,Ae.test(l+m)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(n.ownerDocument||_)&&f.push(a.defaultView||a.parentWindow||i)}for(s=0;(o=f[s++])&&!t.isPropagationStopped();)h=o,t.type=s>1?l:d.bindType||m,(u=(at.get(o,"events")||Object.create(null))[t.type]&&at.get(o,"handle"))&&u.apply(o,e),(u=c&&o[c])&&u.apply&&st(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=m,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),e)||!st(n)||c&&v(n[m])&&!y(n)&&((a=n[c])&&(n[c]=null),T.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Pe),n[m](),t.isPropagationStopped()&&h.removeEventListener(m,Pe),T.event.triggered=void 0,a&&(n[c]=a)),t.result}},simulate:function(t,e,n){var i=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(i,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each((function(){T.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}});var Re=/\[\]$/,Le=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;function qe(t,e,n,i){var r;if(Array.isArray(e))T.each(e,(function(e,r){n||Re.test(t)?i(t,r):qe(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)}));else if(n||"object"!==k(e))i(t,e);else for(r in e)qe(t+"["+r+"]",e[r],n,i)}T.param=function(t,e){var n,i=[],r=function(t,e){var n=v(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,(function(){r(this.name,this.value)}));else for(n in t)qe(n,t[n],e,r);return i.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Fe.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!Tt.test(t))})).map((function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,(function(t){return{name:e.name,value:t.replace(Le,"\r\n")}})):{name:e.name,value:n.replace(Le,"\r\n")}})).get()}});var je=/%20/g,$e=/#.*$/,He=/([?&])_=[^&]*/,ze=/^(.*?):[ \t]*([^\r\n]*)$/gm,Be=/^(?:GET|HEAD)$/,We=/^\/\//,Ue={},Qe={},Ye="*/".concat("*"),Ve=_.createElement("a");function Ge(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(Y)||[];if(v(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Xe(t,e,n,i){var r={},s=t===Qe;function o(a){var l;return r[a]=!0,T.each(t[a]||[],(function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)})),l}return o(e.dataTypes[0])||!r["*"]&&o("*")}function Ke(t,e){var n,i,r=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&T.extend(!0,t,i),t}Ve.href=De.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:De.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(De.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ye,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ke(Ke(t,T.ajaxSettings),e):Ke(T.ajaxSettings,t)},ajaxPrefilter:Ge(Ue),ajaxTransport:Ge(Qe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,s,o,a,l,c,u,d,h,p=T.ajaxSetup({},e),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?T(f):T.event,g=T.Deferred(),v=T.Callbacks("once memory"),y=p.statusCode||{},b={},w={},k="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(c){if(!o)for(o={};e=ze.exec(s);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)x.always(t[x.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||k;return n&&n.abort(e),S(0,e),this}};if(g.promise(x),p.url=((t||p.url||De.href)+"").replace(We,De.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Y)||[""],null==p.crossDomain){l=_.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Ve.protocol+"//"+Ve.host!=l.protocol+"//"+l.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=T.param(p.data,p.traditional)),Xe(Ue,p,e,x),c)return x;for(d in(u=T.event&&p.global)&&0==T.active++&&T.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Be.test(p.type),r=p.url.replace($e,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(je,"+")):(h=p.url.slice(r.length),p.data&&(p.processData||"string"==typeof p.data)&&(r+=(Me.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(He,"$1"),h=(Me.test(r)?"&":"?")+"_="+Oe.guid+++h),p.url=r+h),p.ifModified&&(T.lastModified[r]&&x.setRequestHeader("If-Modified-Since",T.lastModified[r]),T.etag[r]&&x.setRequestHeader("If-None-Match",T.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ye+"; q=0.01":""):p.accepts["*"]),p.headers)x.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(f,x,p)||c))return x.abort();if(k="abort",v.add(p.complete),x.done(p.success),x.fail(p.error),n=Xe(Qe,p,e,x)){if(x.readyState=1,u&&m.trigger("ajaxSend",[x,p]),c)return x;p.async&&p.timeout>0&&(a=i.setTimeout((function(){x.abort("timeout")}),p.timeout));try{c=!1,n.send(b,S)}catch(t){if(c)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,o,l){var d,h,_,b,w,k=e;c||(c=!0,a&&i.clearTimeout(a),n=void 0,s=l||"",x.readyState=t>0?4:0,d=t>=200&&t<300||304===t,o&&(b=function(t,e,n){for(var i,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}(p,x,o)),!d&&T.inArray("script",p.dataTypes)>-1&&T.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),b=function(t,e,n,i){var r,s,o,a,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(s=u.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=c[l+" "+s]||c["* "+s]))for(r in c)if((a=r.split(" "))[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[r]:!0!==c[r]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(p,b,x,d),d?(p.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(T.lastModified[r]=w),(w=x.getResponseHeader("etag"))&&(T.etag[r]=w)),204===t||"HEAD"===p.type?k="nocontent":304===t?k="notmodified":(k=b.state,h=b.data,d=!(_=b.error))):(_=k,!t&&k||(k="error",t<0&&(t=0))),x.status=t,x.statusText=(e||k)+"",d?g.resolveWith(f,[h,k,x]):g.rejectWith(f,[x,k,_]),x.statusCode(y),y=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[x,p,d?h:_]),v.fireWith(f,[x,k]),u&&(m.trigger("ajaxComplete",[x,p]),--T.active||T.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],(function(t,e){T[e]=function(t,n,i,r){return v(n)&&(r=r||i,i=n,n=void 0),T.ajax(T.extend({url:t,type:e,dataType:r,data:n,success:i},T.isPlainObject(t)&&t))}})),T.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),T._evalUrl=function(t,e,n){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e,n)}})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return v(t)?this.each((function(e){T(this).wrapInner(t.call(this,e))})):this.each((function(){var e=T(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=v(t);return this.each((function(n){T(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Je={0:200,1223:204},Ze=T.ajaxSettings.xhr();g.cors=!!Ze&&"withCredentials"in Ze,g.ajax=Ze=!!Ze,T.ajaxTransport((function(t){var e,n;if(g.cors||Ze&&!t.crossDomain)return{send:function(r,s){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Je[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),T.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),T.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=T("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),_.head.appendChild(e[0])},abort:function(){n&&n()}}}));var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||T.expando+"_"+Oe.guid++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",(function(t,e,n){var r,s,o,a=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(nn,"$1"+r):!1!==t.jsonp&&(t.url+=(Me.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||T.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=i[r],i[r]=function(){o=arguments},n.always((function(){void 0===s?T(i).removeProp(r):i[r]=s,t[r]&&(t.jsonpCallback=e.jsonpCallback,en.push(r)),o&&v(s)&&s(o[0]),o=s=void 0})),"script"})),g.createHTMLDocument=((tn=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((i=(e=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,e.head.appendChild(i)):e=_),s=!n&&[],(r=$.exec(t))?[e.createElement(r[1])]:(r=At([t],e,s),s&&s.length&&T(s).remove(),T.merge([],r.childNodes)));var i,r,s},T.fn.load=function(t,e,n){var i,r,s,o=this,a=t.indexOf(" ");return a>-1&&(i=Te(t.slice(a)),t=t.slice(0,a)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&T.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){s=arguments,o.html(i?T("<div>").append(T.parseHTML(t)).find(i):t)})).always(n&&function(t,e){o.each((function(){n.apply(this,s||[t.responseText,e,t])}))}),this},T.expr.pseudos.animated=function(t){return T.grep(T.timers,(function(e){return t===e.elem})).length},T.offset={setOffset:function(t,e,n){var i,r,s,o,a,l,c=T.css(t,"position"),u=T(t),d={};"static"===c&&(t.style.position="relative"),a=u.offset(),s=T.css(t,"top"),l=T.css(t,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(o=(i=u.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),v(e)&&(e=e.call(t,n,T.extend({},a))),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):u.css(d)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){T.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===T.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),r.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-T.css(i,"marginTop",!0),left:e.left-r.left-T.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||mt}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;T.fn[t]=function(i){return tt(this,(function(t,i,r){var s;if(y(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r}),t,i,arguments.length)}})),T.each(["top","left"],(function(t,e){T.cssHooks[e]=te(g.pixelPosition,(function(t,n){if(n)return n=Zt(t,e),Vt.test(n)?T(t).position()[e]+"px":n}))})),T.each({Height:"height",Width:"width"},(function(t,e){T.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){T.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return tt(this,(function(e,n,r){var s;return y(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?T.css(e,n,a):T.style(e,n,r,a)}),e,o?r:void 0,o)}}))})),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){T.fn[e]=function(t){return this.on(e,t)}})),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){T.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;T.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),v(t))return i=a.call(arguments,2),r=function(){return t.apply(e||this,i.concat(a.call(arguments)))},r.guid=t.guid=t.guid||T.guid++,r},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=E,T.isFunction=v,T.isWindow=y,T.camelCase=rt,T.type=k,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},T.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return T}.apply(e,[]))||(t.exports=n);var sn=i.jQuery,on=i.$;return T.noConflict=function(t){return i.$===T&&(i.$=on),t&&i.jQuery===T&&(i.jQuery=sn),T},void 0===r&&(i.jQuery=i.$=T),T}))},2528:()=>{!function(){var t,e=window.jQuery,n="mathquill-command-id",i="mathquill-block-id",r=Math.min,s=Math.max;function o(){}var a=[].slice;function l(t){var e=t.length-1;return function(){var n=a.call(arguments,0,e),i=a.call(arguments,e);return t.apply(this,n.concat([i]))}}var c=l((function(t,e){return l((function(n,i){if(t in n)return n[t].apply(n,e.concat(i))}))}));function u(t){return l((function(e,n){return"function"!=typeof e&&(e=c(e)),t.call(this,(function(t){return e.apply(t,[t].concat(n))}))}))}function d(t){var e=a.call(arguments,1);return function(){return t.apply(this,e)}}function h(t,e){if(!e)throw new Error("prayer failed: "+t)}var p=function(t,e,n){function i(t){return"object"==typeof t}function r(t){return"function"==typeof t}function s(){}return function n(o,a){function l(){var t=new c;return r(t.init)&&t.init.apply(t,arguments),t}function c(){}void 0===a&&(a=o,o=Object),l.Bare=c;var u,d=s[t]=o[t],h=c[t]=l[t]=l.p=new s;return h.constructor=l,l.extend=function(t){return n(l,t)},(l.open=function(t){if(u={},r(t)?u=t.call(l,h,d,l,o):i(t)&&(u=t),i(u))for(var n in u)e.call(u,n)&&(h[n]=u[n]);return r(h.init)||(h.init=o),l})(a)}}("prototype",{}.hasOwnProperty),f=-1;function m(t){h("a direction was passed",t===f||1===t)}var g=p(e,(function(t){t.insDirOf=function(t,e){return t===f?this.insertBefore(e.first()):this.insertAfter(e.last())},t.insAtDirEnd=function(t,e){return t===f?this.prependTo(e):this.appendTo(e)}})),v=p((function(t){t.parent=0,t[f]=0,t[1]=0,t.init=function(t,e,n){this.parent=t,this[f]=e,this[1]=n},this.copy=function(t){return v(t.parent,t[f],t[1])}})),y=p((function(t){t[f]=0,t[1]=0,t.parent=0;var e=0;this.byId={},t.init=function(){this.id=e+=1,y.byId[this.id]=this,this.ends={},this.ends[f]=0,this.ends[1]=0},t.dispose=function(){delete y.byId[this.id]},t.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},t.jQ=g(),t.jQadd=function(t){return this.jQ=this.jQ.add(t)},t.jQize=function(t){function e(t){if(t.getAttribute){var n=t.getAttribute("mathquill-command-id"),i=t.getAttribute("mathquill-block-id");n&&y.byId[n].jQadd(t),i&&y.byId[i].jQadd(t)}for(t=t.firstChild;t;t=t.nextSibling)e(t)}t=g(t||this.html());for(var n=0;n<t.length;n+=1)e(t[n]);return t},t.createDir=function(t,e){m(t);var n=this;return n.jQize(),n.jQ.insDirOf(t,e.jQ),e[t]=n.adopt(e.parent,e[f],e[1]),n},t.createLeftOf=function(t){return this.createDir(f,t)},t.selectChildren=function(t,e){return S(t,e)},t.bubble=u((function(t){for(var e=this;e&&!1!==t(e);e=e.parent);return this})),t.postOrder=u((function(t){return function e(n){n.eachChild(e),t(n)}(this),this})),t.isEmpty=function(){return 0===this.ends[f]&&0===this.ends[1]},t.children=function(){return b(this.ends[f],this.ends[1])},t.eachChild=function(){var t=this.children();return t.each.apply(t,arguments),this},t.foldChildren=function(t,e){return this.children().fold(t,e)},t.withDirAdopt=function(t,e,n,i){return b(this,this).withDirAdopt(t,e,n,i),this},t.adopt=function(t,e,n){return b(this,this).adopt(t,e,n),this},t.disown=function(){return b(this,this).disown(),this},t.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}}));function _(t,e,n){h("a parent is always present",t),h("leftward is properly set up",e?e[1]===n&&e.parent===t:t.ends[f]===n),h("rightward is properly set up",n?n[f]===e&&n.parent===t:t.ends[1]===e)}var b=p((function(e){e.init=function(e,n,i){if(i===t&&(i=f),m(i),h("no half-empty fragments",!e==!n),this.ends={},e){h("withDir is passed to Fragment",e instanceof y),h("oppDir is passed to Fragment",n instanceof y),h("withDir and oppDir have the same parent",e.parent===n.parent),this.ends[i]=e,this.ends[-i]=n;var r=this.fold([],(function(t,e){return t.push.apply(t,e.jQ.get()),t}));this.jQ=this.jQ.add(r)}},e.jQ=g(),e.withDirAdopt=function(t,e,n,i){return t===f?this.adopt(e,n,i):this.adopt(e,i,n)},e.adopt=function(t,e,n){_(t,e,n);var i=this;i.disowned=!1;var r=i.ends[f];if(!r)return this;var s=i.ends[1];return e||(t.ends[f]=r),n?n[f]=s:t.ends[1]=s,i.ends[1][1]=n,i.each((function(n){n[f]=e,n.parent=t,e&&(e[1]=n),e=n})),i},e.disown=function(){var t=this,e=t.ends[f];if(!e||t.disowned)return t;t.disowned=!0;var n=t.ends[1],i=e.parent;return _(i,e[f],e),_(i,n,n[1]),e[f]?e[f][1]=n[1]:i.ends[f]=n[1],n[1]?n[1][f]=e[f]:i.ends[1]=e[f],t},e.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},e.each=u((function(t){var e=this,n=e.ends[f];if(!n)return e;for(;n!==e.ends[1][1]&&!1!==t(n);n=n[1]);return e})),e.fold=function(t,e){return this.each((function(n){t=e.call(this,t,n)})),t}})),w={},k={},x=p(v,(function(t){t.init=function(t,e){this.parent=t,this.options=e;var n=this.jQ=this._jQ=g('<span class="mq-cursor">&#8203;</span>');this.blink=function(){n.toggleClass("mq-blink")},this.upDownCache={}},t.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[1]?this.selection&&this.selection.ends[f][f]===this[f]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[1].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},t.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=g(),this},t.withDirInsertAt=function(t,e,n,i){var r=this.parent;this.parent=e,this[t]=n,this[-t]=i,r!==e&&r.blur&&r.blur(this)},t.insDirOf=function(t,e){return m(t),this.jQ.insDirOf(t,e.jQ),this.withDirInsertAt(t,e.parent,e[t],e),this.parent.jQ.addClass("mq-hasCursor"),this},t.insLeftOf=function(t){return this.insDirOf(f,t)},t.insRightOf=function(t){return this.insDirOf(1,t)},t.insAtDirEnd=function(t,e){return m(t),this.jQ.insAtDirEnd(t,e.jQ),this.withDirInsertAt(t,e,0,e.ends[t]),e.focus(),this},t.insAtLeftEnd=function(t){return this.insAtDirEnd(f,t)},t.insAtRightEnd=function(t){return this.insAtDirEnd(1,t)},t.jumpUpDown=function(t,e){var n=this;n.upDownCache[t.id]=v.copy(n);var i=n.upDownCache[e.id];if(i)i[1]?n.insLeftOf(i[1]):n.insAtRightEnd(i.parent);else{var r=n.offset().left;e.seek(r,n)}},t.offset=function(){var t=this.jQ.removeClass("mq-cursor").offset();return this.jQ.addClass("mq-cursor"),t},t.unwrapGramp=function(){var t=this.parent.parent,e=t.parent,n=t[1],i=t[f];if(t.disown().eachChild((function(r){r.isEmpty()||(r.children().adopt(e,i,n).each((function(e){e.jQ.insertBefore(t.jQ.first())})),i=r.ends[1])})),!this[1])if(this[f])this[1]=this[f][1];else for(;!this[1];){if(this.parent=this.parent[1],!this.parent){this[1]=t[1],this.parent=e;break}this[1]=this.parent.ends[f]}this[1]?this.insLeftOf(this[1]):this.insAtRightEnd(e),t.jQ.remove(),t[f].siblingDeleted&&t[f].siblingDeleted(this.options,1),t[1].siblingDeleted&&t[1].siblingDeleted(this.options,f)},t.startSelection=function(){for(var t=this.anticursor=v.copy(this),e=t.ancestors={},n=t;n.parent;n=n.parent)e[n.parent.id]=n},t.endSelection=function(){delete this.anticursor},t.select=function(){var t=this.anticursor;if(this[f]===t[f]&&this.parent===t.parent)return!1;for(var e=this;e.parent;e=e.parent)if(e.parent.id in t.ancestors){var n=e.parent;break}h("cursor and anticursor in the same tree",n);var i,r,s=t.ancestors[n.id],o=1;if(e[f]!==s)for(var a=e;a;a=a[1])if(a[1]===s[1]){o=f,i=e,r=s;break}return 1===o&&(i=s,r=e),i instanceof v&&(i=i[1]),r instanceof v&&(r=r[f]),this.hide().selection=n.selectChildren(i,r),this.insDirOf(o,this.selection.ends[o]),this.selectionChanged(),!0},t.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},t.deleteSelection=function(){this.selection&&(this[f]=this.selection.ends[f][f],this[1]=this.selection.ends[1][1],this.selection.remove(),this.selectionChanged(),delete this.selection)},t.replaceSelection=function(){var t=this.selection;return t&&(this[f]=t.ends[f][f],this[1]=t.ends[1][1],delete this.selection),t}})),S=p(b,(function(t,e){t.init=function(){e.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()},t.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),e.adopt.apply(this,arguments)},t.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},t.join=function(t){return this.fold("",(function(e,n){return e+n[t]()}))}})),T=p((function(t){t.init=function(t,e,n){this.id=t.id,this.data={},this.root=t,this.container=e,this.options=n,t.controller=this,this.cursor=t.cursor=x(t,n)},t.handle=function(t,e){var n=this.options.handlers;if(n&&n.fns[t]){var i=n.APIClasses[this.KIND_OF_MQ](this);e===f||1===e?n.fns[t](e,i):n.fns[t](i)}};var e=[];this.onNotify=function(t){e.push(t)},t.notify=function(){for(var t=0;t<e.length;t+=1)e[t].apply(this.cursor,arguments);return this}})),C={},E=p(),I={},D=p(),O={};function M(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function A(t){return M(),Rt(t)}A.prototype=D.p,A.interfaceVersion=function(t){if(1!==t)throw"Only interface version 1 supported. You specified: "+t;return(M=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')})(),A},A.getInterface=L;var P=L.MIN=1,R=L.MAX=2;function L(t){if(!(P<=t&&t<=R))throw"Only interface versions between "+P+" and "+R+" supported. You specified: "+t;function n(t){if(!t||!t.nodeType)return null;var e=g(t).children(".mq-root-block").attr(i),n=e&&y.byId[e].controller;return n?r[n.KIND_OF_MQ](n):null}var r={};function s(t,e){for(var n in e&&e.handlers&&(e.handlers={fns:e.handlers,APIClasses:r}),e)if(e.hasOwnProperty(n)){var i=e[n],s=I[n];t[n]=s?s(i):i}}n.L=f,n.R=1,n.config=function(t){return s(E.p,t),this},n.registerEmbed=function(t,e){if(!/^[a-z][a-z0-9]*$/i.test(t))throw"Embed name must start with letter and be only letters and digits";O[t]=e};var a=r.AbstractMathQuill=p(D,(function(t){t.init=function(t){this.__controller=t,this.__options=t.options,this.id=t.id,this.data=t.data},t.__mathquillify=function(t){var e=this.__controller,n=e.root,r=e.container;e.createTextarea();var s=r.addClass(t).contents().detach();n.jQ=g('<span class="mq-root-block"/>').attr(i,n.id).appendTo(r),this.latex(s.text()),this.revert=function(){return r.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(s)}},t.config=function(t){return s(this.__options,t),this},t.el=function(){return this.__controller.container[0]},t.text=function(){return this.__controller.exportText()},t.latex=function(t){return arguments.length>0?(this.__controller.renderLatexMath(t),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},t.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},t.reflow=function(){return this.__controller.root.postOrder("reflow"),this}}));for(var l in n.prototype=a.prototype,r.EditableField=p(a,(function(t,n){t.__mathquillify=function(){return n.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},t.focus=function(){return this.__controller.textarea.focus(),this},t.blur=function(){return this.__controller.textarea.blur(),this},t.write=function(t){return this.__controller.writeLatex(t),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},t.cmd=function(t){var e=this.__controller.notify(),n=e.cursor;if(/^\\[a-z]+$/i.test(t)){t=t.slice(1);var i=w[t];i&&(t=i(t),n.selection&&t.replaces(n.replaceSelection()),t.createLeftOf(n.show()),this.__controller.scrollHoriz())}else n.parent.write(n,t);return e.blurred&&n.hide().parent.blur(),this},t.select=function(){var t=this.__controller;for(t.notify("move").cursor.insAtRightEnd(t.root);t.cursor[f];)t.selectLeft();return this},t.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},t.moveToDirEnd=function(t){return this.__controller.notify("move").cursor.insAtDirEnd(t,this.__controller.root),this},t.moveToLeftEnd=function(){return this.moveToDirEnd(f)},t.moveToRightEnd=function(){return this.moveToDirEnd(1)},t.keystroke=function(t){t=t.replace(/^\s+|\s+$/g,"").split(/\s+/);for(var e=0;e<t.length;e+=1)this.__controller.keystroke(t[e],{preventDefault:o});return this},t.typedText=function(t){for(var e=0;e<t.length;e+=1)this.__controller.typedText(t.charAt(e));return this},t.dropEmbedded=function(t,e,n){var i=t-g(window).scrollLeft(),r=e-g(window).scrollTop(),s=document.elementFromPoint(i,r);this.__controller.seek(g(s),t,e),Pt().setOptions(n).createLeftOf(this.__controller.cursor)},t.clickAt=function(t,n,i){i=i||document.elementFromPoint(t,n);var r=this.__controller,s=r.root;return e.contains(s.jQ[0],i)||(i=s.jQ[0]),r.seek(g(i),t+pageXOffset,n+pageYOffset),r.blurred&&this.focus(),this},t.ignoreNextMousedown=function(t){return this.__controller.cursor.options.ignoreNextMousedown=t,this}})),n.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},n.EditableField.prototype=r.EditableField.prototype,C)!function(e,i){var s=r[e]=i(r);n[e]=function(i,r){var o=n(i);if(o instanceof s||!i||!i.nodeType)return o;var a=T(s.RootBlock(),g(i),E());return a.KIND_OF_MQ=e,s(a).__mathquillify(r,t)},n[e].prototype=s.prototype}(l,C[l]);return n}A.noConflict=function(){return window.MathQuill=N,A};var N=window.MathQuill;function F(t){for(var e="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),n=0;n<e.length;n+=1)!function(e){t[e]=function(t){this.controller.handle(e,t)}}(e[n]);t.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}window.MathQuill=A;var q,j=p((function(t,e,n){function i(t,e){throw"Parse Error: "+e+" at "+(t?"'"+t+"'":"EOF")}t.init=function(t){this._=t},t.parse=function(t){return this.skip(o)._(""+t,(function(t,e){return e}),i)},t.or=function(t){h("or is passed a parser",t instanceof n);var e=this;return n((function(n,i,r){return e._(n,i,(function(e){return t._(n,i,r)}))}))},t.then=function(t){var e=this;return n((function(i,r,s){return e._(i,(function(e,i){var o=t instanceof n?t:t(i);return h("a parser is returned",o instanceof n),o._(e,r,s)}),s)}))},t.many=function(){var t=this;return n((function(e,n,i){for(var r=[];t._(e,s,o););return n(e,r);function s(t,n){return e=t,r.push(n),!0}function o(){return!1}}))},t.times=function(t,e){arguments.length<2&&(e=t);var i=this;return n((function(n,r,s){for(var o,a=[],l=!0,c=0;c<t;c+=1)if(!(l=i._(n,u,d)))return s(n,o);for(;c<e&&l;c+=1)l=i._(n,u,h);return r(n,a);function u(t,e){return a.push(e),n=t,!0}function d(t,e){return o=e,n=t,!1}function h(t,e){return!1}}))},t.result=function(t){return this.then(s(t))},t.atMost=function(t){return this.times(0,t)},t.atLeast=function(t){var e=this;return e.times(t).then((function(t){return e.many().map((function(e){return t.concat(e)}))}))},t.map=function(t){return this.then((function(e){return s(t(e))}))},t.skip=function(t){return this.then((function(e){return t.result(e)}))},this.string=function(t){var e=t.length,i="expected '"+t+"'";return n((function(n,r,s){var o=n.slice(0,e);return o===t?r(n.slice(e),o):s(n,i)}))};var r=this.regex=function(t){h("regexp parser is anchored","^"===t.toString().charAt(1));var e="expected "+t;return n((function(n,i,r){var s=t.exec(n);if(s){var o=s[0];return i(n.slice(o.length),o)}return r(n,e)}))},s=n.succeed=function(t){return n((function(e,n){return n(e,t)}))},o=(n.fail=function(t){return n((function(e,n,i){return i(e,t)}))},n.letter=r(/^[a-z]/i),n.letters=r(/^[a-z]*/i),n.digit=r(/^[0-9]/),n.digits=r(/^[0-9]*/),n.whitespace=r(/^\s+/),n.optWhitespace=r(/^\s*/),n.any=n((function(t,e,n){return t?e(t.slice(1),t.charAt(0)):n(t,"expected any character")})),n.all=n((function(t,e,n){return e("",t)})),n.eof=n((function(t,e,n){return t?n(t,"expected EOF"):e(t,t)})))})),$=(q={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},function(t,n){var i,r=null,s=null,a=e(t),l=e(n.container||a),c=o;function u(t){c=t,clearTimeout(i),i=setTimeout(t)}l.bind("keydown keypress input keyup focusout paste",(function(t){c(t)}));var d=!1;function h(){n.keystroke(function(t){var e,n=t.which||t.keyCode,i=q[n],r=[];return t.ctrlKey&&r.push("Ctrl"),t.originalEvent&&t.originalEvent.metaKey&&r.push("Meta"),t.altKey&&r.push("Alt"),t.shiftKey&&r.push("Shift"),e=i||String.fromCharCode(n),r.length||i?(r.push(e),r.join("-")):e}(r),r)}function p(){if(!("selectionStart"in(t=a[0]))||t.selectionStart===t.selectionEnd){var t,e=a.val();1===e.length?(a.val(""),n.typedText(e)):e&&a[0].select&&a[0].select()}}function f(){var t=a.val();a.val(""),t&&n.paste(t)}return l.bind({keydown:function(t){r=t,s=null,d&&u((function(t){t&&"focusout"===t.type||!a[0].select||a[0].select(),c=o,clearTimeout(i)})),h()},keypress:function(t){r&&s&&h(),s=t,u(p)},focusout:function(){r=s=null},paste:function(t){a.focus(),u(f)}}),{select:function(t){c(),c=o,clearTimeout(i),a.val(t),t&&a[0].select&&a[0].select(),d=!!t}}});T.open((function(t,e){t.exportText=function(){return this.root.foldChildren("",(function(t,e){return t+e.text()}))}})),T.open((function(t){t.focusBlurEvents=function(){var t,e=this,n=e.root,i=e.cursor;function r(){clearTimeout(t),i.selection&&i.selection.jQ.addClass("mq-blur"),s()}function s(){i.hide().parent.blur(),e.container.removeClass("mq-focused"),g(window).off("blur",r)}e.textarea.focus((function(){e.blurred=!1,clearTimeout(t),e.container.addClass("mq-focused"),i.parent||i.insAtRightEnd(n),i.selection?(i.selection.jQ.removeClass("mq-blur"),e.selectionChanged()):i.show()})).blur((function(){e.blurred=!0,t=setTimeout((function(){n.postOrder("intentionalBlur"),i.clearSelection().endSelection(),s()})),g(window).on("blur",r)})),e.blurred=!0,i.hide().parent.blur()}})),T.open((function(t){t.keystroke=function(t,e){this.cursor.parent.keystroke(t,e,this)}})),y.open((function(t){t.keystroke=function(t,e,n){var i=n.cursor;switch(t){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(f);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(1,t,e);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(f,t,e);case"End":n.notify("move").cursor.insAtRightEnd(i.parent);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root);break;case"Shift-End":for(;i[1];)n.selectRight();break;case"Ctrl-Shift-End":for(;i[1]||i.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(i.parent);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root);break;case"Shift-Home":for(;i[f];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;i[f]||i.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(i[f])for(;i[f];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(i[1])for(;i[1];)n.selectRight();else n.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(1);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);i[f];)n.selectLeft();break;default:return}e.preventDefault(),n.scrollHoriz()},t.moveOutOf=t.moveTowards=t.deleteOutOf=t.deleteTowards=t.unselectInto=t.selectOutOf=t.selectTowards=function(){h("overridden or never called on this node")}})),T.open((function(t){function e(t,e){var n=t.notify("upDown").cursor,i=e+"Into",r=e+"OutOf";return n[1][i]?n.insAtLeftEnd(n[1][i]):n[f][i]?n.insAtRightEnd(n[f][i]):n.parent.bubble((function(t){var e=t[r];if(e&&("function"==typeof e&&(e=t[r](n)),e instanceof y&&n.jumpUpDown(t,e),!0!==e))return!1})),t}this.onNotify((function(t){"move"!==t&&"upDown"!==t||this.show().clearSelection()})),t.escapeDir=function(t,e,n){m(t);var i=this.cursor;if(i.parent!==this.root&&n.preventDefault(),i.parent!==this.root)return i.parent.moveOutOf(t,i),this.notify("move")},I.leftRightIntoCmdGoes=function(t){if(t&&"up"!==t&&"down"!==t)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+t+'"';return t},t.moveDir=function(t){m(t);var e=this.cursor,n=e.options.leftRightIntoCmdGoes;return e.selection?e.insDirOf(t,e.selection.ends[t]):e[t]?e[t].moveTowards(t,e,n):e.parent.moveOutOf(t,e,n),this.notify("move")},t.moveLeft=function(){return this.moveDir(f)},t.moveRight=function(){return this.moveDir(1)},t.moveUp=function(){return e(this,"up")},t.moveDown=function(){return e(this,"down")},this.onNotify((function(t){"upDown"!==t&&(this.upDownCache={})})),this.onNotify((function(t){"edit"===t&&this.show().deleteSelection()})),t.deleteDir=function(t){m(t);var e=this.cursor,n=e.selection;return this.notify("edit"),n||(e[t]?e[t].deleteTowards(t,e):e.parent.deleteOutOf(t,e)),e[f].siblingDeleted&&e[f].siblingDeleted(e.options,1),e[1].siblingDeleted&&e[1].siblingDeleted(e.options,f),e.parent.bubble("reflow"),this},t.ctrlDeleteDir=function(t){m(t);var e=this.cursor;return!e[f]||e.selection?ctrlr.deleteDir():(this.notify("edit"),b(e.parent.ends[f],e[f]).remove(),e.insAtDirEnd(f,e.parent),e[f].siblingDeleted&&e[f].siblingDeleted(e.options,1),e[1].siblingDeleted&&e[1].siblingDeleted(e.options,f),e.parent.bubble("reflow"),this)},t.backspace=function(){return this.deleteDir(f)},t.deleteForward=function(){return this.deleteDir(1)},this.onNotify((function(t){"select"!==t&&this.endSelection()})),t.selectDir=function(t){var e=this.notify("select").cursor,n=e.selection;m(t),e.anticursor||e.startSelection();var i=e[t];i?n&&n.ends[t]===i&&e.anticursor[-t]!==i?i.unselectInto(t,e):i.selectTowards(t,e):e.parent.selectOutOf(t,e),e.clearSelection(),e.select()||e.show()},t.selectLeft=function(){return this.selectDir(f)},t.selectRight=function(){return this.selectDir(1)}}));var H=function(){function t(t){for(var e=t[0]||Y(),n=1;n<t.length;n+=1)t[n].children().adopt(e,e.ends[1],0);return e}var e=j.string,n=j.regex,i=j.letter,r=j.any,s=j.optWhitespace,o=j.succeed,a=j.fail,l=i.map((function(t){return nt(t)})),c=n(/^[^${}\\_^]/).map((function(t){return U(t)})),u=n(/^[^\\a-eg-zA-Z]/).or(e("\\").then(n(/^[a-z]+/i).or(n(/^\s+/).result(" ")).or(r))).then((function(t){var e=w[t];return e?e(t).parser():a("unknown command: \\"+t)})).or(l).or(c),d=e("{").then((function(){return p})).skip(e("}")),h=s.then(d.or(u.map((function(t){var e=Y();return t.adopt(e,0,0),e})))),p=h.many().map(t).skip(s),f=e("[").then(h.then((function(t){return"]"!==t.join("latex")?o(t):a()})).many().map(t).skip(s)).skip(e("]")),m=p;return m.block=h,m.optBlock=f,m}();T.open((function(t,e){t.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},t.writeLatex=function(t){var e=this.notify("edit").cursor,n=j.all,i=j.eof,r=H.skip(i).or(n.result(!1)).parse(t);return r&&!r.isEmpty()&&(r.children().adopt(e.parent,e[f],e[1]),r.jQize().insertBefore(e.jQ),e[f]=r.ends[1],r.finalizeInsert(e.options,e),r.ends[1][1].siblingCreated&&r.ends[1][1].siblingCreated(e.options,f),r.ends[f][f].siblingCreated&&r.ends[f][f].siblingCreated(e.options,1),e.parent.bubble("reflow")),this},t.renderLatexMath=function(t){var e=this.root,n=this.cursor,i=j.all,r=j.eof,s=H.skip(r).or(i.result(!1)).parse(t);e.eachChild("postOrder","dispose"),e.ends[f]=e.ends[1]=0,s&&s.children().adopt(e,0,0);var o=e.jQ;if(s){var a=s.join("html");o.html(a),e.jQize(o.children()),e.finalizeInsert(n.options)}else o.empty();delete n.selection,n.insAtRightEnd(e)},t.renderLatexText=function(t){var e=this.root,n=this.cursor;e.jQ.children().slice(1).remove(),e.eachChild("postOrder","dispose"),e.ends[f]=e.ends[1]=0,delete n.selection,n.show().insAtRightEnd(e);var i=j.regex,r=j.string,s=j.eof,o=j.all,a=r("$").then(H).skip(r("$").or(s)).map((function(t){var e=J(n);e.createBlocks();var i=e.ends[f];return t.children().adopt(i,0,0),e})),l=r("\\$").result("$").or(i(/^[^$]/)).map(U),c=a.or(l).many().skip(s).or(o.result(!1)).parse(t);if(c){for(var u=0;u<c.length;u+=1)c[u].adopt(e,e.ends[1],0);e.jQize().appendTo(e.jQ),e.finalizeInsert(n.options)}}})),T.open((function(e){E.p.ignoreNextMousedown=o,e.delegateMouseEvents=function(){var e=this.root.jQ;this.container.bind("mousedown.mathquill",(function(n){var r,s=g(n.target).closest(".mq-root-block"),a=y.byId[s.attr(i)||e.attr(i)].controller,l=a.cursor,c=l.blink,u=a.textareaSpan,d=a.textarea;function h(t){r=g(t.target)}function p(e){l.anticursor||l.startSelection(),a.seek(r,e.pageX,e.pageY).cursor.select(),r=t}n.preventDefault(),n.target.unselectable=!0,l.options.ignoreNextMousedown(n)||(l.options.ignoreNextMousedown=o,a.blurred&&(a.editable||s.prepend(u),d.focus()),l.blink=o,a.seek(g(n.target),n.pageX,n.pageY).cursor.startSelection(),s.mousemove(h),g(n.target.ownerDocument).mousemove(p).mouseup((function t(e){l.blink=c,l.selection||(a.editable?l.show():u.detach()),s.unbind("mousemove",h),g(e.target.ownerDocument).unbind("mousemove",p).unbind("mouseup",t)})))}))}})),T.open((function(t){t.seek=function(t,e,r){var s=this.notify("select").cursor;if(t){var o=t.attr(i)||t.attr(n);if(!o){var a=t.parent();o=a.attr(i)||a.attr(n)}}var l=o?y.byId[o]:this.root;return h("nodeId is the id of some Node that exists",l),s.clearSelection().show(),l.seek(e,s),this.scrollHoriz(),this}})),T.open((function(t){t.scrollHoriz=function(){var t=this.cursor,e=t.selection,n=this.root.jQ[0].getBoundingClientRect();if(e){var i=e.jQ[0].getBoundingClientRect(),r=i.left-(n.left+20),s=i.right-(n.right-20);if(e.ends[f]===t[1])if(r<0)a=r;else{if(!(s>0))return;a=i.left-s<n.left+20?r:s}else if(s>0)a=s;else{if(!(r<0))return;a=i.right-r>n.right-20?s:r}}else{var o=t.jQ[0].getBoundingClientRect().left;if(o>n.right-20)var a=o-(n.right-20);else{if(!(o<n.left+20))return;a=o-(n.left+20)}}this.root.jQ.stop().animate({scrollLeft:"+="+a},100)}})),T.open((function(e){E.p.substituteTextarea=function(){return g("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]},e.createTextarea=function(){var t=this.textareaSpan=g('<span class="mq-textarea"></span>'),e=this.options.substituteTextarea();if(!e.nodeType)throw"substituteTextarea() must return a DOM element, got "+e;e=this.textarea=g(e).appendTo(t);var n=this;n.cursor.selectionChanged=function(){n.selectionChanged()},n.container.bind("copy",(function(){n.setTextareaSelection()}))},e.selectionChanged=function(){var e=this;vt(e.container[0]),e.textareaSelectionTimeout===t&&(e.textareaSelectionTimeout=setTimeout((function(){e.setTextareaSelection()})))},e.setTextareaSelection=function(){this.textareaSelectionTimeout=t;var e="";this.cursor.selection&&(e=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(e="$"+e+"$")),this.selectFn(e)},e.staticMathTextareaEvents=function(){var t=this,e=(t.root,t.cursor),n=t.textarea,i=t.textareaSpan;function r(){i.detach(),t.blurred=!0}this.container.prepend('<span class="mq-selectable">$'+t.exportLatex()+"$</span>"),t.blurred=!0,n.bind("cut paste",!1).focus((function(){t.blurred=!1})).blur((function(){e.selection&&e.selection.clear(),setTimeout(r)})),t.selectFn=function(t){n.val(t),t&&n.select()}},e.editablesTextareaEvents=function(){var t=this,e=(t.root,t.cursor),n=t.textarea,i=t.textareaSpan,r=$(n,this);this.selectFn=function(t){r.select(t)},this.container.prepend(i).on("cut",(function(n){e.selection&&setTimeout((function(){t.notify("edit"),e.parent.bubble("reflow")}))})),this.focusBlurEvents()},e.typedText=function(t){if("\n"===t)return this.handle("enter");var e=this.notify().cursor;e.parent.write(e,t),this.scrollHoriz()},e.paste=function(t){this.options.statelessClipboard&&(t="$"===t.slice(0,1)&&"$"===t.slice(-1)?t.slice(1,-1):"\\text{"+t+"}"),this.writeLatex(t).cursor.show()}}));var z=p(y,(function(t,e){t.finalizeInsert=function(t,e){var n=this;n.postOrder("finalizeTree",t),n.postOrder("contactWeld",e),n.postOrder("blur"),n.postOrder("reflow"),n[1].siblingCreated&&n[1].siblingCreated(t,f),n[f].siblingCreated&&n[f].siblingCreated(t,1),n.bubble("reflow")}})),B=p(z,(function(t,e){t.init=function(t,n,i){var r=this;e.init.call(r),r.ctrlSeq||(r.ctrlSeq=t),n&&(r.htmlTemplate=n),i&&(r.textTemplate=i)},t.replaces=function(t){t.disown(),this.replacedFragment=t},t.isEmpty=function(){return this.foldChildren(!0,(function(t,e){return t&&e.isEmpty()}))},t.parser=function(){var t=H.block,e=this;return t.times(e.numBlocks()).map((function(t){e.blocks=t;for(var n=0;n<t.length;n+=1)t[n].adopt(e,e.ends[1],0);return e}))},t.createLeftOf=function(t){var n=this,i=n.replacedFragment;n.createBlocks(),e.createLeftOf.call(n,t),i&&(i.adopt(n.ends[f],0,0),i.jQ.appendTo(n.ends[f].jQ)),n.finalizeInsert(t.options),n.placeCursor(t)},t.createBlocks=function(){for(var t=this,e=t.numBlocks(),n=t.blocks=Array(e),i=0;i<e;i+=1)(n[i]=Y()).adopt(t,t.ends[1],0)},t.placeCursor=function(t){t.insAtRightEnd(this.foldChildren(this.ends[f],(function(t,e){return t.isEmpty()?t:e})))},t.moveTowards=function(t,e,n){var i=n&&this[n+"Into"];e.insAtDirEnd(-t,i||this.ends[-t])},t.deleteTowards=function(t,e){this.isEmpty()?e[t]=this.remove()[t]:this.moveTowards(t,e,null)},t.selectTowards=function(t,e){e[-t]=this,e[t]=this[t]},t.selectChildren=function(){return S(this,this)},t.unselectInto=function(t,e){e.insAtDirEnd(-t,e.anticursor.ancestors[this.id])},t.seek=function(t,e){function n(t){var e={};return e[f]=t.jQ.offset().left,e[1]=e[f]+t.jQ.outerWidth(),e}var i=this,r=n(i);if(t<r[f])return e.insLeftOf(i);if(t>r[1])return e.insRightOf(i);var s=r[f];i.eachChild((function(o){var a=n(o);return t<a[f]?(t-s<a[f]-t?o[f]?e.insAtRightEnd(o[f]):e.insLeftOf(i):e.insAtLeftEnd(o),!1):t>a[1]?void(o[1]?s=a[1]:r[1]-t<t-a[1]?e.insRightOf(i):e.insAtRightEnd(o)):(o.seek(t,e),!1)}))},t.numBlocks=function(){var t=this.htmlTemplate.match(/&\d+/g);return t?t.length:0},t.html=function(){var t=this,e=t.blocks,n=" mathquill-command-id="+t.id,i=t.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);h("no unmatched angle brackets",i.join("")===this.htmlTemplate);for(var r=0,s=i[0];s;s=i[r+=1])if("/>"===s.slice(-2))i[r]=s.slice(0,-2)+n+"/>";else if("<"===s.charAt(0)){h("not an unmatched top-level close tag","/"!==s.charAt(1)),i[r]=s.slice(0,-1)+n+">";var o=1;do{h("no missing close tags",s=i[r+=1]),"</"===s.slice(0,2)?o-=1:"<"===s.charAt(0)&&"/>"!==s.slice(-2)&&(o+=1)}while(o>0)}return i.join("").replace(/>&(\d+)/g,(function(t,n){return" mathquill-block-id="+e[n].id+">"+e[n].join("html")}))},t.latex=function(){return this.foldChildren(this.ctrlSeq,(function(t,e){return t+"{"+(e.latex()||" ")+"}"}))},t.textTemplate=[""],t.text=function(){var t=this,e=0;return t.foldChildren(t.textTemplate[e],(function(n,i){e+=1;var r=i.text();return n&&"("===t.textTemplate[e]&&"("===r[0]&&")"===r.slice(-1)?n+r.slice(1,-1)+t.textTemplate[e]:n+i.text()+(t.textTemplate[e]||"")}))}})),W=p(B,(function(t,e){t.init=function(t,n,i){i||(i=t&&t.length>1?t.slice(1):t),e.init.call(this,t,n,[i])},t.parser=function(){return j.succeed(this)},t.numBlocks=function(){return 0},t.replaces=function(t){t.remove()},t.createBlocks=o,t.moveTowards=function(t,e){e.jQ.insDirOf(t,this.jQ),e[-t]=this,e[t]=this[t]},t.deleteTowards=function(t,e){e[t]=this.remove()[t]},t.seek=function(t,e){t-this.jQ.offset().left<this.jQ.outerWidth()/2?e.insLeftOf(this):e.insRightOf(this)},t.latex=function(){return this.ctrlSeq},t.text=function(){return this.textTemplate},t.placeCursor=o,t.isEmpty=function(){return!0}})),U=p(W,(function(t,e){t.init=function(t,n){e.init.call(this,t,"<span>"+(n||t)+"</span>")}})),Q=p(W,(function(t,e){t.init=function(t,n,i){e.init.call(this,t,'<span class="mq-binary-operator">'+n+"</span>",i)}})),Y=p(z,(function(t,e){t.join=function(t){return this.foldChildren("",(function(e,n){return e+n[t]()}))},t.html=function(){return this.join("html")},t.latex=function(){return this.join("latex")},t.text=function(){return this.ends[f]===this.ends[1]&&0!==this.ends[f]?this.ends[f].text():this.join("text")},t.keystroke=function(t,n,i){return!i.options.spaceBehavesLikeTab||"Spacebar"!==t&&"Shift-Spacebar"!==t?e.keystroke.apply(this,arguments):(n.preventDefault(),void i.escapeDir("Shift-Spacebar"===t?f:1,t,n))},t.moveOutOf=function(t,e,n){n&&this.parent[n+"Into"]||!this[t]?e.insDirOf(t,this.parent):e.insAtDirEnd(-t,this[t])},t.selectOutOf=function(t,e){e.insDirOf(t,this.parent)},t.deleteOutOf=function(t,e){e.unwrapGramp()},t.seek=function(t,e){var n=this.ends[1];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<t)return e.insAtRightEnd(this);if(t<this.ends[f].jQ.offset().left)return e.insAtLeftEnd(this);for(;t<n.jQ.offset().left;)n=n[f];return n.seek(t,e)},t.chToCmd=function(t){var e;return t.match(/^[a-eg-zA-Z]$/)?nt(t):/^\d$/.test(t)?tt(t):(e=k[t]||w[t])?e(t):U(t)},t.write=function(t,e){var n=this.chToCmd(e);t.selection&&n.replaces(t.replaceSelection()),n.createLeftOf(t.show())},t.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},t.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}}));C.StaticMath=function(t){return p(t.AbstractMathQuill,(function(e,n){this.RootBlock=Y,e.__mathquillify=function(){return n.__mathquillify.call(this,"mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},e.init=function(){n.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],t.MathField)},e.latex=function(){var e=n.latex.apply(this,arguments);return arguments.length>0&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],t.MathField),e}}))};var V=p(Y,F);C.MathField=function(t){return p(t.EditableField,(function(t,e){this.RootBlock=V,t.__mathquillify=function(t,n){return this.config(t),n>1&&(this.__controller.root.reflow=o),e.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}}))};var G=p(y,(function(t,e){function n(t){t.jQ[0].normalize();var e=t.jQ[0].firstChild;if(e){h("only node in TextBlock span is Text node",3===e.nodeType);var n=X(e.data);return n.jQadd(e),t.children().disown(),n.adopt(t,0,0)}}t.ctrlSeq="\\text",t.replaces=function(t){t instanceof b?this.replacedText=t.remove().jQ.text():"string"==typeof t&&(this.replacedText=t)},t.jQadd=function(t){e.jQadd.call(this,t),this.ends[f]&&this.ends[f].jQadd(this.jQ[0].firstChild)},t.createLeftOf=function(t){var n=this;if(e.createLeftOf.call(this,t),n[1].siblingCreated&&n[1].siblingCreated(t.options,f),n[f].siblingCreated&&n[f].siblingCreated(t.options,1),n.bubble("reflow"),t.insAtRightEnd(n),n.replacedText)for(var i=0;i<n.replacedText.length;i+=1)n.write(t,n.replacedText.charAt(i))},t.parser=function(){var t=this,e=j.string,n=j.regex;return j.optWhitespace.then(e("{")).then(n(/^[^}]*/)).skip(e("}")).map((function(e){return 0===e.length?b():(X(e).adopt(t,0,0),t)}))},t.textContents=function(){return this.foldChildren("",(function(t,e){return t+e.text}))},t.text=function(){return'"'+this.textContents()+'"'},t.latex=function(){var t=this.textContents();return 0===t.length?"":"\\text{"+t+"}"},t.html=function(){return'<span class="mq-text-mode" mathquill-command-id='+this.id+">"+this.textContents()+"</span>"},t.moveTowards=function(t,e){e.insAtDirEnd(-t,this)},t.moveOutOf=function(t,e){e.insDirOf(t,this)},t.unselectInto=t.moveTowards,t.selectTowards=B.prototype.selectTowards,t.deleteTowards=B.prototype.deleteTowards,t.selectOutOf=function(t,e){e.insDirOf(t,this)},t.deleteOutOf=function(t,e){this.isEmpty()&&e.insRightOf(this)},t.write=function(t,n){if(t.show().deleteSelection(),"$"!==n)t[f]?t[f].appendText(n):X(n).createLeftOf(t);else if(this.isEmpty())t.insRightOf(this),U("\\$","$").createLeftOf(t);else if(t[1])if(t[f]){var i=G(),r=this.ends[f];r.disown().jQ.detach(),r.adopt(i,0,0),t.insLeftOf(this),e.createLeftOf.call(i,t)}else t.insLeftOf(this);else t.insRightOf(this)},t.seek=function(t,e){e.hide();var i=n(this),r=this.jQ.width()/this.text.length,s=Math.round((t-this.jQ.offset().left)/r);s<=0?e.insAtLeftEnd(this):s>=i.text.length?e.insAtRightEnd(this):e.insLeftOf(i.splitRight(s));for(var o=t-e.show().offset().left,a=o&&o<0?f:1,l=a;e[a]&&o*l>0;)e[a].moveTowards(a,e),l=o,o=t-e.offset().left;if(a*o<-a*l&&e[-a].moveTowards(-a,e),e.anticursor){if(e.anticursor.parent===this){var c=e[f]&&e[f].text.length;if(this.anticursorPosition===c)e.anticursor=v.copy(e);else{if(this.anticursorPosition<c){var u=e[f].splitRight(this.anticursorPosition);e[f]=u}else u=e[1].splitRight(this.anticursorPosition-c);e.anticursor=v(this,u[f],u)}}}else this.anticursorPosition=e[f]&&e[f].text.length},t.blur=function(t){Y.prototype.blur.call(this),t&&(""===this.textContents()?(this.remove(),t[f]===this?t[f]=this[f]:t[1]===this&&(t[1]=this[1])):n(this))},t.focus=Y.prototype.focus})),X=p(y,(function(t,e){function n(t,e){return e.charAt(t===f?0:-1+e.length)}t.init=function(t){e.init.call(this),this.text=t},t.jQadd=function(t){this.dom=t,this.jQ=g(t)},t.jQize=function(){return this.jQadd(document.createTextNode(this.text))},t.appendText=function(t){this.text+=t,this.dom.appendData(t)},t.prependText=function(t){this.text=t+this.text,this.dom.insertData(0,t)},t.insTextAtDirEnd=function(t,e){m(e),1===e?this.appendText(t):this.prependText(t)},t.splitRight=function(t){var e=X(this.text.slice(t)).adopt(this.parent,this,this[1]);return e.jQadd(this.dom.splitText(t)),this.text=this.text.slice(0,t),e},t.moveTowards=function(t,e){m(t);var i=n(-t,this.text),r=this[-t];return r?r.insTextAtDirEnd(i,t):X(i).createDir(-t,e),this.deleteTowards(t,e)},t.latex=function(){return this.text},t.deleteTowards=function(t,e){this.text.length>1?1===t?(this.dom.deleteData(0,1),this.text=this.text.slice(1)):(this.dom.deleteData(-1+this.text.length,1),this.text=this.text.slice(0,-1)):(this.remove(),this.jQ.remove(),e[t]=this[t])},t.selectTowards=function(t,e){m(t);var i=e.anticursor,r=n(-t,this.text);if(i[t]===this){var s=X(r).createDir(t,e);i[t]=s,e.insDirOf(t,s)}else{var o=this[-t];o?o.insTextAtDirEnd(r,t):(s=X(r).createDir(-t,e)).jQ.insDirOf(-t,e.selection.jQ),1===this.text.length&&i[-t]===this&&(i[-t]=this[-t])}return this.deleteTowards(t,e)}}));function K(t,e,n){return p(G,{ctrlSeq:t,htmlTemplate:"<"+e+" "+n+">&0</"+e+">"})}k.$=w.text=w.textnormal=w.textrm=w.textup=w.textmd=G,w.em=w.italic=w.italics=w.emph=w.textit=w.textsl=K("\\textit","i",'class="mq-text-mode"'),w.strong=w.bold=w.textbf=K("\\textbf","b",'class="mq-text-mode"'),w.sf=w.textsf=K("\\textsf","span",'class="mq-sans-serif mq-text-mode"'),w.tt=w.texttt=K("\\texttt","span",'class="mq-monospace mq-text-mode"'),w.textsc=K("\\textsc","span",'style="font-variant:small-caps" class="mq-text-mode"'),w.uppercase=K("\\uppercase","span",'style="text-transform:uppercase" class="mq-text-mode"'),w.lowercase=K("\\lowercase","span",'style="text-transform:lowercase" class="mq-text-mode"');var J=p(B,(function(t,e){t.init=function(t){e.init.call(this,"$"),this.cursor=t},t.htmlTemplate='<span class="mq-math-mode">&0</span>',t.createBlocks=function(){e.createBlocks.call(this),this.ends[f].cursor=this.cursor,this.ends[f].write=function(t,e){"$"!==e?Y.prototype.write.call(this,t,e):this.isEmpty()?(t.insRightOf(this.parent),this.parent.deleteTowards(dir,t),U("\\$","$").createLeftOf(t.show())):t[1]?t[f]?Y.prototype.write.call(this,t,e):t.insLeftOf(this.parent):t.insRightOf(this.parent)}},t.latex=function(){return"$"+this.ends[f].latex()+"$"}})),Z=p(V,(function(t,e){t.keystroke=function(t){if("Spacebar"!==t&&"Shift-Spacebar"!==t)return e.keystroke.apply(this,arguments)},t.write=function(t,e){var n;t.show().deleteSelection(),"$"===e?J(t).createLeftOf(t):("<"===e?n="&lt;":">"===e&&(n="&gt;"),U(e,n).createLeftOf(t))}}));C.TextField=function(t){return p(t.EditableField,(function(t,e){this.RootBlock=Z,t.__mathquillify=function(){return e.__mathquillify.call(this,"mq-editable-field mq-text-mode")},t.latex=function(t){return arguments.length>0?(this.__controller.renderLatexText(t),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()}}))},w.notin=w.cong=w.equiv=w.oplus=w.otimes=p(Q,(function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}})),w[""]=w.ne=w.neq=d(Q,"\\ne ","&ne;"),w.ast=w.star=w.loast=w.lowast=d(Q,"\\ast ","&lowast;"),w.therefor=w.therefore=d(Q,"\\therefore ","&there4;"),w.cuz=w.because=d(Q,"\\because ","&#8757;"),w.prop=w.propto=d(Q,"\\propto ","&prop;"),w[""]=w.asymp=w.approx=d(Q,"\\approx ","&asymp;"),w.isin=w.in=d(Q,"\\in ","&isin;"),w.ni=w.contains=d(Q,"\\ni ","&ni;"),w.notni=w.niton=w.notcontains=w.doesnotcontain=d(Q,"\\not\\ni ","&#8716;"),w.sub=w.subset=d(Q,"\\subset ","&sub;"),w.sup=w.supset=w.superset=d(Q,"\\supset ","&sup;"),w.nsub=w.notsub=w.nsubset=w.notsubset=d(Q,"\\not\\subset ","&#8836;"),w.nsup=w.notsup=w.nsupset=w.notsupset=w.nsuperset=w.notsuperset=d(Q,"\\not\\supset ","&#8837;"),w.sube=w.subeq=w.subsete=w.subseteq=d(Q,"\\subseteq ","&sube;"),w.supe=w.supeq=w.supsete=w.supseteq=w.supersete=w.superseteq=d(Q,"\\supseteq ","&supe;"),w.nsube=w.nsubeq=w.notsube=w.notsubeq=w.nsubsete=w.nsubseteq=w.notsubsete=w.notsubseteq=d(Q,"\\not\\subseteq ","&#8840;"),w.nsupe=w.nsupeq=w.notsupe=w.notsupeq=w.nsupsete=w.nsupseteq=w.notsupsete=w.notsupseteq=w.nsupersete=w.nsuperseteq=w.notsupersete=w.notsuperseteq=d(Q,"\\not\\supseteq ","&#8841;"),w.N=w.naturals=w.Naturals=d(U,"\\mathbb{N}","&#8469;"),w.P=w.primes=w.Primes=w.projective=w.Projective=w.probability=w.Probability=d(U,"\\mathbb{P}","&#8473;"),w.Z=w.integers=w.Integers=d(U,"\\mathbb{Z}","&#8484;"),w.Q=w.rationals=w.Rationals=d(U,"\\mathbb{Q}","&#8474;"),w.R=w.reals=w.Reals=d(U,"\\mathbb{R}","&#8477;"),w.C=w.complex=w.Complex=w.complexes=w.Complexes=w.complexplane=w.Complexplane=w.ComplexPlane=d(U,"\\mathbb{C}","&#8450;"),w.H=w.Hamiltonian=w.quaternions=w.Quaternions=d(U,"\\mathbb{H}","&#8461;"),w.quad=w.emsp=d(U,"\\quad ","    "),w.qquad=d(U,"\\qquad ","        "),w.diamond=d(U,"\\diamond ","&#9671;"),w.bigtriangleup=d(U,"\\bigtriangleup ","&#9651;"),w.ominus=d(U,"\\ominus ","&#8854;"),w.uplus=d(U,"\\uplus ","&#8846;"),w.bigtriangledown=d(U,"\\bigtriangledown ","&#9661;"),w.sqcap=d(U,"\\sqcap ","&#8851;"),w.triangleleft=d(U,"\\triangleleft ","&#8882;"),w.sqcup=d(U,"\\sqcup ","&#8852;"),w.triangleright=d(U,"\\triangleright ","&#8883;"),w.odot=w.circledot=d(U,"\\odot ","&#8857;"),w.bigcirc=d(U,"\\bigcirc ","&#9711;"),w.dagger=d(U,"\\dagger ","&#0134;"),w.ddagger=d(U,"\\ddagger ","&#135;"),w.wr=d(U,"\\wr ","&#8768;"),w.amalg=d(U,"\\amalg ","&#8720;"),w.models=d(U,"\\models ","&#8872;"),w.prec=d(U,"\\prec ","&#8826;"),w.succ=d(U,"\\succ ","&#8827;"),w.preceq=d(U,"\\preceq ","&#8828;"),w.succeq=d(U,"\\succeq ","&#8829;"),w.simeq=d(U,"\\simeq ","&#8771;"),w.mid=d(U,"\\mid ","&#8739;"),w.ll=d(U,"\\ll ","&#8810;"),w.gg=d(U,"\\gg ","&#8811;"),w.parallel=d(U,"\\parallel ","&#8741;"),w.nparallel=d(U,"\\nparallel ","&#8742;"),w.bowtie=d(U,"\\bowtie ","&#8904;"),w.sqsubset=d(U,"\\sqsubset ","&#8847;"),w.sqsupset=d(U,"\\sqsupset ","&#8848;"),w.smile=d(U,"\\smile ","&#8995;"),w.sqsubseteq=d(U,"\\sqsubseteq ","&#8849;"),w.sqsupseteq=d(U,"\\sqsupseteq ","&#8850;"),w.doteq=d(U,"\\doteq ","&#8784;"),w.frown=d(U,"\\frown ","&#8994;"),w.vdash=d(U,"\\vdash ","&#8870;"),w.dashv=d(U,"\\dashv ","&#8867;"),w.nless=d(U,"\\nless ","&#8814;"),w.ngtr=d(U,"\\ngtr ","&#8815;"),w.longleftarrow=d(U,"\\longleftarrow ","&#8592;"),w.longrightarrow=d(U,"\\longrightarrow ","&#8594;"),w.Longleftarrow=d(U,"\\Longleftarrow ","&#8656;"),w.Longrightarrow=d(U,"\\Longrightarrow ","&#8658;"),w.longleftrightarrow=d(U,"\\longleftrightarrow ","&#8596;"),w.updownarrow=d(U,"\\updownarrow ","&#8597;"),w.Longleftrightarrow=d(U,"\\Longleftrightarrow ","&#8660;"),w.Updownarrow=d(U,"\\Updownarrow ","&#8661;"),w.mapsto=d(U,"\\mapsto ","&#8614;"),w.nearrow=d(U,"\\nearrow ","&#8599;"),w.hookleftarrow=d(U,"\\hookleftarrow ","&#8617;"),w.hookrightarrow=d(U,"\\hookrightarrow ","&#8618;"),w.searrow=d(U,"\\searrow ","&#8600;"),w.leftharpoonup=d(U,"\\leftharpoonup ","&#8636;"),w.rightharpoonup=d(U,"\\rightharpoonup ","&#8640;"),w.swarrow=d(U,"\\swarrow ","&#8601;"),w.leftharpoondown=d(U,"\\leftharpoondown ","&#8637;"),w.rightharpoondown=d(U,"\\rightharpoondown ","&#8641;"),w.nwarrow=d(U,"\\nwarrow ","&#8598;"),w.ldots=d(U,"\\ldots ","&#8230;"),w.cdots=d(U,"\\cdots ","&#8943;"),w.vdots=d(U,"\\vdots ","&#8942;"),w.ddots=d(U,"\\ddots ","&#8945;"),w.surd=d(U,"\\surd ","&#8730;"),w.triangle=d(U,"\\triangle ","&#9651;"),w.ell=d(U,"\\ell ","&#8467;"),w.top=d(U,"\\top ","&#8868;"),w.flat=d(U,"\\flat ","&#9837;"),w.natural=d(U,"\\natural ","&#9838;"),w.sharp=d(U,"\\sharp ","&#9839;"),w.wp=d(U,"\\wp ","&#8472;"),w.bot=d(U,"\\bot ","&#8869;"),w.clubsuit=d(U,"\\clubsuit ","&#9827;"),w.diamondsuit=d(U,"\\diamondsuit ","&#9826;"),w.heartsuit=d(U,"\\heartsuit ","&#9825;"),w.spadesuit=d(U,"\\spadesuit ","&#9824;"),w.parallelogram=d(U,"\\parallelogram ","&#9649;"),w.square=d(U,"\\square ","&#11036;"),w.oint=d(U,"\\oint ","&#8750;"),w.bigcap=d(U,"\\bigcap ","&#8745;"),w.bigcup=d(U,"\\bigcup ","&#8746;"),w.bigsqcup=d(U,"\\bigsqcup ","&#8852;"),w.bigvee=d(U,"\\bigvee ","&#8744;"),w.bigwedge=d(U,"\\bigwedge ","&#8743;"),w.bigodot=d(U,"\\bigodot ","&#8857;"),w.bigotimes=d(U,"\\bigotimes ","&#8855;"),w.bigoplus=d(U,"\\bigoplus ","&#8853;"),w.biguplus=d(U,"\\biguplus ","&#8846;"),w.lfloor=d(U,"\\lfloor ","&#8970;"),w.rfloor=d(U,"\\rfloor ","&#8971;"),w.lceil=d(U,"\\lceil ","&#8968;"),w.rceil=d(U,"\\rceil ","&#8969;"),w.opencurlybrace=w.lbrace=d(U,"\\lbrace ","{"),w.closecurlybrace=w.rbrace=d(U,"\\rbrace ","}"),w.lbrack=d(U,"["),w.rbrack=d(U,"]"),w.slash=d(U,"/"),w.vert=d(U,"|"),w.perp=w.perpendicular=d(U,"\\perp ","&perp;"),w.nabla=w.del=d(U,"\\nabla ","&nabla;"),w.hbar=d(U,"\\hbar ","&#8463;"),w.AA=w.Angstrom=w.angstrom=d(U,"\\text\\AA ","&#8491;"),w.ring=w.circ=w.circle=d(U,"\\circ ","&#8728;"),w.bull=w.bullet=d(U,"\\bullet ","&bull;"),w.setminus=w.smallsetminus=d(U,"\\setminus ","&#8726;"),w.not=w[""]=w.neg=d(U,"\\neg ","&not;"),w[""]=w.dots=w.ellip=w.hellip=w.ellipsis=w.hellipsis=d(U,"\\dots ","&hellip;"),w.converges=w.darr=w.dnarr=w.dnarrow=w.downarrow=d(U,"\\downarrow ","&darr;"),w.dArr=w.dnArr=w.dnArrow=w.Downarrow=d(U,"\\Downarrow ","&dArr;"),w.diverges=w.uarr=w.uparrow=d(U,"\\uparrow ","&uarr;"),w.uArr=w.Uparrow=d(U,"\\Uparrow ","&uArr;"),w.to=d(Q,"\\to ","&rarr;"),w.rarr=w.rightarrow=d(U,"\\rightarrow ","&rarr;"),w.implies=d(Q,"\\Rightarrow ","&rArr;"),w.rArr=w.Rightarrow=d(U,"\\Rightarrow ","&rArr;"),w.gets=d(Q,"\\gets ","&larr;"),w.larr=w.leftarrow=d(U,"\\leftarrow ","&larr;"),w.impliedby=d(Q,"\\Leftarrow ","&lArr;"),w.lArr=w.Leftarrow=d(U,"\\Leftarrow ","&lArr;"),w.harr=w.lrarr=w.leftrightarrow=d(U,"\\leftrightarrow ","&harr;"),w.iff=d(Q,"\\Leftrightarrow ","&hArr;"),w.hArr=w.lrArr=w.Leftrightarrow=d(U,"\\Leftrightarrow ","&hArr;"),w.Re=w.Real=w.real=d(U,"\\Re ","&real;"),w.Im=w.imag=w.image=w.imagin=w.imaginary=w.Imaginary=d(U,"\\Im ","&image;"),w.part=w.partial=d(U,"\\partial ","&part;"),w.infty=w.infin=w.infinity=d(U,"\\infty ","&infin;"),w.alef=w.alefsym=w.aleph=w.alephsym=d(U,"\\aleph ","&alefsym;"),w.xist=w.xists=w.exist=w.exists=d(U,"\\exists ","&exist;"),w.nexists=w.nexist=d(U,"\\nexists ","&#8708;"),w.and=w.land=w.wedge=d(U,"\\wedge ","&and;"),w.or=w.lor=w.vee=d(U,"\\vee ","&or;"),w.o=w.O=w.empty=w.emptyset=w.oslash=w.Oslash=w.nothing=w.varnothing=d(Q,"\\varnothing ","&empty;"),w.cup=w.union=d(Q,"\\cup ","&cup;"),w.cap=w.intersect=w.intersection=d(Q,"\\cap ","&cap;"),w.deg=w.degree=d(U,"\\degree ","&deg;"),w.ang=w.angle=d(U,"\\angle ","&ang;"),w.measuredangle=d(U,"\\measuredangle ","&#8737;");var tt=p(U,(function(t,e){t.createLeftOf=function(t){t.options.autoSubscriptNumerals&&t.parent!==t.parent.parent.sub&&(t[f]instanceof et&&!1!==t[f].isItalic||t[f]instanceof wt&&t[f][f]instanceof et&&!1!==t[f][f].isItalic)?(w._().createLeftOf(t),e.createLeftOf.call(this,t),t.insRightOf(t.parent.parent)):e.createLeftOf.call(this,t)}})),et=p(W,(function(t,e){t.init=function(t,n){e.init.call(this,t,"<var>"+(n||t)+"</var>")},t.text=function(){var t=this.ctrlSeq;return!this[f]||this[f]instanceof et||this[f]instanceof Q||"\\ "===this[f].ctrlSeq||(t="*"+t),!this[1]||this[1]instanceof Q||this[1]instanceof wt||(t+="*"),t}}));E.p.autoCommands={_maxLength:0},I.autoCommands=function(t){if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(var e=t.split(" "),n={},i=0,r=0;r<e.length;r+=1){var o=e[r];if(o.length<2)throw'autocommand "'+o+'" not minimum length of 2';if(w[o]===ot)throw'"'+o+'" is a built-in operator name';n[o]=1,i=s(i,o.length)}return n._maxLength=i,n};var nt=p(et,(function(t,e){function n(t){return!t||t instanceof Q||t instanceof xt}t.init=function(t){return e.init.call(this,this.letter=t)},t.createLeftOf=function(t){e.createLeftOf.apply(this,arguments);var n=t.options.autoCommands,i=n._maxLength;if(i>0){for(var r="",s=this,o=0;s instanceof nt&&s.ctrlSeq===s.letter&&o<i;)r=s.letter+r,s=s[f],o+=1;for(;r.length;){if(n.hasOwnProperty(r)){for(o=1,s=this;o<r.length;o+=1,s=s[f]);return b(s,this).remove(),t[f]=s[f],w[r](r).createLeftOf(t)}r=r.slice(1)}}},t.italicize=function(t){return this.isItalic=t,this.jQ.toggleClass("mq-operator-name",!t),this},t.finalizeTree=t.siblingDeleted=t.siblingCreated=function(t,e){e!==f&&this[1]instanceof nt||this.autoUnItalicize(t)},t.autoUnItalicize=function(t){var e=t.autoOperatorNames;if(0!==e._maxLength){for(var i=this.letter,s=this[f];s instanceof nt;s=s[f])i=s.letter+i;for(var o=this[1];o instanceof nt;o=o[1])i+=o.letter;b(s[1]||this.parent.ends[f],o[f]||this.parent.ends[1]).each((function(t){t.italicize(!0).jQ.removeClass("mq-first mq-last mq-followed-by-supsub"),t.ctrlSeq=t.letter}));t:for(var a=0,l=s[1]||this.parent.ends[f];a<i.length;a+=1,l=l[1])for(var c=r(e._maxLength,i.length-a);c>0;c-=1){var u=i.slice(a,a+c);if(e.hasOwnProperty(u)){for(var d=0,h=l;d<c;d+=1,h=h[1]){h.italicize(!1);var p=h}var m=it.hasOwnProperty(u);if(l.ctrlSeq=(m?"\\":"\\operatorname{")+l.ctrlSeq,p.ctrlSeq+=m?" ":"}",st.hasOwnProperty(u)&&p[f][f][f].jQ.addClass("mq-last"),n(l[f])||l.jQ.addClass("mq-first"),!n(p[1]))if(p[1]instanceof wt){var g=p[1];(g.siblingCreated=g.siblingDeleted=function(){g.jQ.toggleClass("mq-after-operator-name",!(g[1]instanceof Dt))})()}else p.jQ.toggleClass("mq-last",!(p[1]instanceof Dt));a+=c-1,l=p;continue t}}}}})),it={},rt=E.p.autoOperatorNames={_maxLength:9},st={limsup:1,liminf:1,projlim:1,injlim:1};!function(){for(var t="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),e=0;e<t.length;e+=1)it[t[e]]=rt[t[e]]=1;var n="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" ");for(e=0;e<n.length;e+=1)it[n[e]]=1;var i="sin cos tan sec cosec csc cotan cot ctg".split(" ");for(e=0;e<i.length;e+=1)rt[i[e]]=rt["arc"+i[e]]=rt[i[e]+"h"]=rt["ar"+i[e]+"h"]=rt["arc"+i[e]+"h"]=1;var r="gcf hcf lcm proj span".split(" ");for(e=0;e<r.length;e+=1)rt[r[e]]=1}(),I.autoOperatorNames=function(t){if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(var e=t.split(" "),n={},i=0,r=0;r<e.length;r+=1){var o=e[r];if(o.length<2)throw'"'+o+'" not minimum length of 2';n[o]=1,i=s(i,o.length)}return n._maxLength=i,n};var ot=p(W,(function(t,e){t.init=function(t){this.ctrlSeq=t},t.createLeftOf=function(t){for(var e=this.ctrlSeq,n=0;n<e.length;n+=1)nt(e.charAt(n)).createLeftOf(t)},t.parser=function(){for(var t=this.ctrlSeq,e=Y(),n=0;n<t.length;n+=1)nt(t.charAt(n)).adopt(e,e.ends[1],0);return j.succeed(e.children())}}));for(var at in rt)rt.hasOwnProperty(at)&&(w[at]=ot);w.operatorname=p(B,(function(t){t.createLeftOf=o,t.numBlocks=function(){return 1},t.parser=function(){return H.block.map((function(t){return t.children()}))}})),w.f=p(nt,(function(t,e){t.init=function(){W.p.init.call(this,this.letter="f",'<var class="mq-f">f</var>')},t.italicize=function(t){return this.jQ.html("f").toggleClass("mq-f",t),e.italicize.apply(this,arguments)}})),w[" "]=w.space=d(U,"\\ ","&nbsp;"),w["'"]=w.prime=d(U,"'","&prime;"),w.backslash=d(U,"\\backslash ","\\"),k["\\"]||(k["\\"]=w.backslash),w.$=d(U,"\\$","$");var lt=p(W,(function(t,e){t.init=function(t,n){e.init.call(this,t,'<span class="mq-nonSymbola">'+(n||t)+"</span>")}}));w["@"]=lt,w["&"]=d(lt,"\\&","&amp;"),w["%"]=d(lt,"\\%","%"),w.alpha=w.beta=w.gamma=w.delta=w.zeta=w.eta=w.theta=w.iota=w.kappa=w.mu=w.nu=w.xi=w.rho=w.sigma=w.tau=w.chi=w.psi=w.omega=p(et,(function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}})),w.phi=d(et,"\\phi ","&#981;"),w.phiv=w.varphi=d(et,"\\varphi ","&phi;"),w.epsilon=d(et,"\\epsilon ","&#1013;"),w.epsiv=w.varepsilon=d(et,"\\varepsilon ","&epsilon;"),w.piv=w.varpi=d(et,"\\varpi ","&piv;"),w.sigmaf=w.sigmav=w.varsigma=d(et,"\\varsigma ","&sigmaf;"),w.thetav=w.vartheta=w.thetasym=d(et,"\\vartheta ","&thetasym;"),w.upsilon=w.upsi=d(et,"\\upsilon ","&upsilon;"),w.gammad=w.Gammad=w.digamma=d(et,"\\digamma ","&#989;"),w.kappav=w.varkappa=d(et,"\\varkappa ","&#1008;"),w.rhov=w.varrho=d(et,"\\varrho ","&#1009;"),w.pi=w[""]=d(lt,"\\pi ","&pi;"),w.lambda=d(lt,"\\lambda ","&lambda;"),w.Upsilon=w.Upsi=w.upsih=w.Upsih=d(W,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),w.Gamma=w.Delta=w.Theta=w.Lambda=w.Xi=w.Pi=w.Sigma=w.Phi=w.Psi=w.Omega=w.forall=p(U,(function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}}));var ct=p(B,(function(t){t.init=function(t){this.latex=t},t.createLeftOf=function(t){var e=H.parse(this.latex);e.children().adopt(t.parent,t[f],t[1]),t[f]=e.ends[1],e.jQize().insertBefore(t.jQ),e.finalizeInsert(t.options,t),e.ends[1][1].siblingCreated&&e.ends[1][1].siblingCreated(t.options,f),e.ends[f][f].siblingCreated&&e.ends[f][f].siblingCreated(t.options,1),t.parent.bubble("reflow")},t.parser=function(){var t=H.parse(this.latex).children();return j.succeed(t)}}));w[""]=d(ct,"^1"),w[""]=d(ct,"^2"),w[""]=d(ct,"^3"),w[""]=d(ct,"\\frac14"),w[""]=d(ct,"\\frac12"),w[""]=d(ct,"\\frac34");var ut=p(Q,(function(t){t.init=U.prototype.init,t.contactWeld=t.siblingCreated=t.siblingDeleted=function(t,e){if(1!==e)return this.jQ[0].className=!this[f]||this[f]instanceof Q||/^[,;:\(\[]$/.test(this[f].ctrlSeq)?"":"mq-binary-operator",this}}));w["+"]=d(ut,"+","+"),w[""]=w["-"]=d(ut,"-","&minus;"),w[""]=w.pm=w.plusmn=w.plusminus=d(ut,"\\pm ","&plusmn;"),w.mp=w.mnplus=w.minusplus=d(ut,"\\mp ","&#8723;"),k["*"]=w.sdot=w.cdot=d(Q,"\\cdot ","&middot;","*");var dt=p(Q,(function(t,e){t.init=function(t,n){this.data=t,this.strict=n;var i=n?"Strict":"";e.init.call(this,t["ctrlSeq"+i],t["html"+i],t["text"+i])},t.swap=function(t){this.strict=t;var e=t?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+e],this.jQ.html(this.data["html"+e]),this.textTemplate=[this.data["text"+e]]},t.deleteTowards=function(t,n){if(t===f&&!this.strict)return this.swap(!0),void this.bubble("reflow");e.deleteTowards.apply(this,arguments)}})),ht={ctrlSeq:"\\le ",html:"&le;",text:"",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},pt={ctrlSeq:"\\ge ",html:"&ge;",text:"",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"};w["<"]=w.lt=d(dt,ht,!0),w[">"]=w.gt=d(dt,pt,!0),w[""]=w.le=w.leq=d(dt,ht,!1),w[""]=w.ge=w.geq=d(dt,pt,!1);var ft=p(Q,(function(t,e){t.init=function(){e.init.call(this,"=","=")},t.createLeftOf=function(t){if(t[f]instanceof dt&&t[f].strict)return t[f].swap(!1),void t[f].bubble("reflow");e.createLeftOf.apply(this,arguments)}}));w["="]=ft,w[""]=w.times=d(Q,"\\times ","&times;","[x]"),w[""]=w.div=w.divide=w.divides=d(Q,"\\div ","&divide;","[/]"),k["~"]=w.sim=d(Q,"\\sim ","~","~");var mt,gt,vt=o,yt=document.createElement("div").style;for(var _t in{transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1})if(_t in yt){gt=_t;break}gt?mt=function(t,e,n){t.css(gt,"scale("+e+","+n+")")}:"filter"in yt?(vt=function(t){t.className=t.className},mt=function(t,e,n){e/=1+(n-1)/2,t.css("fontSize",n+"em"),t.hasClass("mq-matrixed-container")||t.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>');var i=t.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+e+",SizingMethod='auto expand')");function r(){t.css("marginRight",(i.width()-1)*(e-1)/e+"px")}r();var s=setInterval(r);g(window).load((function(){clearTimeout(s),r()}))}):mt=function(t,e,n){t.css("fontSize",n+"em")};var bt=p(B,(function(t,e){t.init=function(t,n,i){e.init.call(this,t,"<"+n+" "+i+">&0</"+n+">")}}));w.mathrm=d(bt,"\\mathrm","span",'class="mq-roman mq-font"'),w.mathit=d(bt,"\\mathit","i",'class="mq-font"'),w.mathbf=d(bt,"\\mathbf","b",'class="mq-font"'),w.mathsf=d(bt,"\\mathsf","span",'class="mq-sans-serif mq-font"'),w.mathtt=d(bt,"\\mathtt","span",'class="mq-monospace mq-font"'),w.underline=d(bt,"\\underline","span",'class="mq-non-leaf mq-underline"'),w.overline=w.bar=d(bt,"\\overline","span",'class="mq-non-leaf mq-overline"'),w.overrightarrow=d(bt,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"'),w.overleftarrow=d(bt,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"'),w.textcolor=p(B,(function(t,e){t.setColor=function(t){this.color=t,this.htmlTemplate='<span class="mq-textcolor" style="color:'+t+'">&0</span>'},t.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},t.parser=function(){var t=this,n=j.optWhitespace,i=j.string,r=j.regex;return n.then(i("{")).then(r(/^[#\w\s.,()%-]*/)).skip(i("}")).then((function(n){return t.setColor(n),e.parser.call(t)}))}})),w.class=p(B,(function(t,e){t.parser=function(){var t=this,n=j.string,i=j.regex;return j.optWhitespace.then(n("{")).then(i(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then((function(n){return t.htmlTemplate='<span class="mq-class '+n+'">&0</span>',e.parser.call(t)}))}}));var wt=p(B,(function(t,e){t.ctrlSeq="_{...}^{...}",t.createLeftOf=function(t){if(t[f]||!t.options.supSubsRequireOperand)return e.createLeftOf.apply(this,arguments)},t.contactWeld=function(t){for(var e=f;e;e=e===f&&1)if(this[e]instanceof wt){for(var n="sub";n;n="sub"===n&&"sup"){var i=this[n],r=this[e][n];if(i){if(r)if(i.isEmpty())o=v(r,0,r.ends[f]);else{i.jQ.children().insAtDirEnd(-e,r.jQ);var s=i.children().disown(),o=v(r,s.ends[1],r.ends[f]);e===f?s.adopt(r,r.ends[1],0):s.adopt(r,0,r.ends[f])}else this[e].addBlock(i.disown());this.placeCursor=function(t,n){return function(i){i.insAtDirEnd(-e,t||n)}}(r,i)}}this.remove(),t&&t[f]===this&&(1===e&&o?o[f]?t.insRightOf(o[f]):t.insAtLeftEnd(o.parent):t.insRightOf(this[e]));break}},E.p.charsThatBreakOutOfSupSub="",t.finalizeTree=function(){this.ends[f].write=function(t,e){if(t.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===e)return;var n=this.chToCmd(e);return n instanceof W?t.deleteSelection():t.clearSelection().insRightOf(this.parent),n.createLeftOf(t.show())}t[f]&&!t[1]&&!t.selection&&t.options.charsThatBreakOutOfSupSub.indexOf(e)>-1&&t.insRightOf(this.parent),Y.p.write.apply(this,arguments)}},t.moveTowards=function(t,n,i){n.options.autoSubscriptNumerals&&!this.sup?n.insDirOf(t,this):e.moveTowards.apply(this,arguments)},t.deleteTowards=function(t,n){if(n.options.autoSubscriptNumerals&&this.sub){var i=this.sub.ends[-t];i instanceof W?i.remove():i&&i.deleteTowards(t,n.insAtDirEnd(-t,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(f,n.insAtLeftEnd(this.sub)),this.sup&&n.insDirOf(-t,this))}else e.deleteTowards.apply(this,arguments)},t.latex=function(){function t(t,e){var n=e&&e.latex();return e?t+(1===n.length?n:"{"+(n||" ")+"}"):""}return t("_",this.sub)+t("^",this.sup)},t.addBlock=function(t){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=t,t.adopt(this,this.sub,0).downOutOf=this.sub,t.jQ=g('<span class="mq-sup"/>').append(t.jQ.children()).attr(i,t.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=t,t.adopt(this,0,this.sup).upOutOf=this.sup,t.jQ=g('<span class="mq-sub"></span>').append(t.jQ.children()).attr(i,t.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var e=0;e<2;e+=1)!function(t,e,n,i){t[e].deleteOutOf=function(r,s){if(s.insDirOf(this[r]?-r:r,this.parent),!this.isEmpty()){var o=this.ends[r];this.children().disown().withDirAdopt(r,s.parent,s[r],s[-r]).jQ.insDirOf(-r,s.jQ),s[-r]=o}t.supsub=n,delete t[e],delete t[i+"Into"],t[n][i+"OutOf"]=kt,delete t[n].deleteOutOf,"sub"===e&&g(t.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}}(this,"sub sup".split(" ")[e],"sup sub".split(" ")[e],"down up".split(" ")[e])}}));function kt(t){var e=this.parent,n=t;do{if(n[1])return t.insLeftOf(e);n=n.parent.parent}while(n!==e);t.insRightOf(e)}w.subscript=w._=p(wt,(function(t,e){t.supsub="sub",t.htmlTemplate='<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["_"],t.finalizeTree=function(){this.downInto=this.sub=this.ends[f],this.sub.upOutOf=kt,e.finalizeTree.call(this)}})),w.superscript=w.supscript=w["^"]=p(wt,(function(t,e){t.supsub="sup",t.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0</span></span>',t.textTemplate=["^"],t.finalizeTree=function(){this.upInto=this.sup=this.ends[1],this.sup.downOutOf=kt,e.finalizeTree.call(this)}}));var xt=p(B,(function(t,e){t.init=function(t,e){var n='<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1</span></span><big>'+e+'</big><span class="mq-from"><span>&0</span></span></span>';W.prototype.init.call(this,t,n)},t.createLeftOf=function(t){e.createLeftOf.apply(this,arguments),t.options.sumStartsWithNEquals&&(nt("n").createLeftOf(t),ft().createLeftOf(t))},t.latex=function(){function t(t){return 1===t.length?t:"{"+(t||" ")+"}"}return this.ctrlSeq+"_"+t(this.ends[f].latex())+"^"+t(this.ends[1].latex())},t.parser=function(){for(var t=j.string,e=j.optWhitespace,n=j.succeed,i=H.block,r=this,s=r.blocks=[Y(),Y()],o=0;o<s.length;o+=1)s[o].adopt(r,r.ends[1],0);return e.then(t("_").or(t("^"))).then((function(t){var e=s["_"===t?0:1];return i.then((function(t){return t.children().adopt(e,e.ends[1],0),n(r)}))})).many().result(r)},t.finalizeTree=function(){this.downInto=this.ends[f],this.upInto=this.ends[1],this.ends[f].upOutOf=this.ends[1],this.ends[1].downOutOf=this.ends[f]}}));w[""]=w.sum=w.summation=d(xt,"\\sum ","&sum;"),w[""]=w.prod=w.product=d(xt,"\\prod ","&prod;"),w.coprod=w.coproduct=d(xt,"\\coprod ","&#8720;"),w[""]=w.int=w.integral=p(xt,(function(t,e){t.init=function(){W.prototype.init.call(this,"\\int ",'<span class="mq-int mq-non-leaf"><big>&int;</big><span class="mq-supsub mq-non-leaf"><span class="mq-sup"><span class="mq-sup-inner">&1</span></span><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>')},t.createLeftOf=B.p.createLeftOf}));var St=w.frac=w.dfrac=w.cfrac=w.fraction=p(B,(function(t,e){t.ctrlSeq="\\frac",t.htmlTemplate='<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0</span><span class="mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["(",")/(",")"],t.finalizeTree=function(){this.upInto=this.ends[1].upOutOf=this.ends[f],this.downInto=this.ends[f].downOutOf=this.ends[1]}})),Tt=w.over=k["/"]=p(St,(function(t,e){t.createLeftOf=function(t){if(!this.replacedFragment){for(var n=t[f];n&&!(n instanceof Q||n instanceof(w.text||o)||n instanceof xt||"\\ "===n.ctrlSeq||/^[,;:]$/.test(n.ctrlSeq));)n=n[f];n instanceof xt&&n[1]instanceof wt&&(n=n[1])[1]instanceof wt&&n[1].ctrlSeq!=n.ctrlSeq&&(n=n[1]),n!==t[f]&&(this.replaces(b(n[1]||t.parent.ends[f],t[f])),t[f]=n)}e.createLeftOf.call(this,t)}})),Ct=w.sqrt=w[""]=p(B,(function(t,e){t.ctrlSeq="\\sqrt",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;</span><span class="mq-non-leaf mq-sqrt-stem">&0</span></span>',t.textTemplate=["sqrt(",")"],t.parser=function(){return H.optBlock.then((function(t){return H.block.map((function(e){var n=Et();return n.blocks=[t,e],t.adopt(n,0,0),e.adopt(n,t,0),n}))})).or(e.parser.call(this))},t.reflow=function(){var t=this.ends[1].jQ;mt(t.prev(),1,t.innerHeight()/+t.css("fontSize").slice(0,-2)-.1)}})),Et=(w.vec=p(B,(function(t,e){t.ctrlSeq="\\vec",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-vector-prefix">&rarr;</span><span class="mq-vector-stem">&0</span></span>',t.textTemplate=["vec(",")"]})),w.nthroot=p(Ct,(function(t,e){t.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;</span><span class="mq-sqrt-stem mq-non-leaf">&1</span></span>',t.textTemplate=["sqrt[","](",")"],t.latex=function(){return"\\sqrt["+this.ends[f].latex()+"]{"+this.ends[1].latex()+"}"}})));function It(t,e){t.jQadd=function(){e.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},t.reflow=function(){var t=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));mt(this.delimjQs,r(1+.2*(t-1),1.2),1.2*t)}}var Dt=p(p(B,It),(function(e,n){e.init=function(e,i,r,s,o){n.init.call(this,"\\left"+s,t,[i,r]),this.side=e,this.sides={},this.sides[f]={ch:i,ctrlSeq:s},this.sides[1]={ch:r,ctrlSeq:o}},e.numBlocks=function(){return 1},e.html=function(){return this.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-paren'+(1===this.side?" mq-ghost":"")+'">'+this.sides[f].ch+'</span><span class="mq-non-leaf">&0</span><span class="mq-scaled mq-paren'+(this.side===f?" mq-ghost":"")+'">'+this.sides[1].ch+"</span></span>",n.html.call(this)},e.latex=function(){return"\\left"+this.sides[f].ctrlSeq+this.ends[f].latex()+"\\right"+this.sides[1].ctrlSeq},e.oppBrack=function(t,e,n){return e instanceof Dt&&e.side&&e.side!==-n&&("|"===this.sides[this.side].ch||e.side===-this.side)&&(!t.restrictMismatchedBrackets||Ot[this.sides[this.side].ch]===e.sides[e.side].ch||{"(":"]","[":")"}[this.sides[f].ch]===e.sides[1].ch)&&e},e.closeOpposing=function(t){t.side=0,t.sides[this.side]=this.sides[this.side],t.delimjQs.eq(this.side===f?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},e.createLeftOf=function(t){if(!this.replacedFragment)var e=t.options,i=this.oppBrack(e,t[f],f)||this.oppBrack(e,t[1],1)||this.oppBrack(e,t.parent.parent);if(i){var r=this.side=-i.side;this.closeOpposing(i),i===t.parent.parent&&t[r]&&(b(t[r],t.parent.ends[r],-r).disown().withDirAdopt(-r,i.parent,i,i[r]).jQ.insDirOf(r,i.jQ),i.bubble("reflow"))}else r=(i=this).side,i.replacedFragment?i.side=0:t[-r]&&(i.replaces(b(t[-r],t.parent.ends[-r],r)),t[-r]=0),n.createLeftOf.call(i,t);r===f?t.insAtLeftEnd(i.ends[f]):t.insRightOf(i)},e.placeCursor=o,e.unwrap=function(){this.ends[f].children().disown().adopt(this.parent,this,this[1]).jQ.insertAfter(this.jQ),this.remove()},e.deleteSide=function(t,e,n){var i=this.parent,r=this[t],s=i.ends[t];if(t===this.side)return this.unwrap(),void(r?n.insDirOf(-t,r):n.insAtDirEnd(t,i));var o=n.options,a=!this.side;if(this.side=-t,this.oppBrack(o,this.ends[f].ends[this.side],t)){this.closeOpposing(this.ends[f].ends[this.side]);var l=this.ends[f].ends[t];this.unwrap(),l.siblingCreated&&l.siblingCreated(n.options,t),r?n.insDirOf(-t,r):n.insAtDirEnd(t,i)}else{if(this.oppBrack(o,this.parent.parent,t))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(e&&a)return this.unwrap(),void(r?n.insDirOf(-t,r):n.insAtDirEnd(t,i));this.sides[t]={ch:Ot[this.sides[this.side].ch],ctrlSeq:Ot[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(t===f?0:1).addClass("mq-ghost").html(this.sides[t].ch)}r?(l=this.ends[f].ends[t],b(r,s,-t).disown().withDirAdopt(-t,this.ends[f],l,0).jQ.insAtDirEnd(t,this.ends[f].jQ.removeClass("mq-empty")),l.siblingCreated&&l.siblingCreated(n.options,t),n.insDirOf(-t,r)):e?n.insDirOf(t,this):n.insAtDirEnd(t,this.ends[f])}},e.deleteTowards=function(t,e){this.deleteSide(-t,!1,e)},e.finalizeTree=function(){this.ends[f].deleteOutOf=function(t,e){this.parent.deleteSide(t,!0,e)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===f?1:0).removeClass("mq-ghost"),this.side=0}},e.siblingCreated=function(t,e){e===-this.side&&this.finalizeTree()}})),Ot={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|"};function Mt(t,e){e=e||t;var n=Ot[t],i=Ot[e];k[t]=d(Dt,f,t,n,e,i),k[n]=d(Dt,1,t,n,e,i)}Mt("("),Mt("["),Mt("{","\\{"),w.langle=d(Dt,f,"&lang;","&rang;","\\langle ","\\rangle "),w.rangle=d(Dt,1,"&lang;","&rang;","\\langle ","\\rangle "),k["|"]=d(Dt,f,"|","|","|","|"),w.left=p(B,(function(t){t.parser=function(){var t=j.regex,e=j.string,n=(j.succeed,j.optWhitespace);return n.then(t(/^(?:[([|]|\\\{)/)).then((function(i){var r="\\"===i.charAt(0)?i.slice(1):i;return H.then((function(s){return e("\\right").skip(n).then(t(/^(?:[\])|]|\\\})/)).map((function(t){var e="\\"===t.charAt(0)?t.slice(1):t,n=Dt(0,r,e,i,t);return n.blocks=[s],s.adopt(n,0,0),n}))}))}))}})),w.right=p(B,(function(t){t.parser=function(){return j.fail("unmatched \\right")}}));var At=w.binom=w.binomial=p(p(B,It),(function(t,e){t.ctrlSeq="\\binom",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(</span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="mq-paren mq-scaled">)</span></span>',t.textTemplate=["choose(",",",")"]}));w.choose=p(At,(function(t){t.createLeftOf=Tt.prototype.createLeftOf})),w.editable=w.MathQuillMathField=p(B,(function(t,e){t.ctrlSeq="\\MathQuillMathField",t.htmlTemplate='<span class="mq-editable-field"><span class="mq-root-block">&0</span></span>',t.parser=function(){var t=this,n=j.string,i=j.regex,r=j.succeed;return n("[").then(i(/^[a-z][a-z0-9]*/i)).skip(n("]")).map((function(e){t.name=e})).or(r()).then(e.parser.call(t))},t.finalizeTree=function(){var t=T(this.ends[f],this.jQ,E());t.KIND_OF_MQ="MathField",t.editable=!0,t.createTextarea(),t.editablesTextareaEvents(),t.cursor.insAtRightEnd(t.root),F(t.root)},t.registerInnerField=function(t,e){t.push(t[this.name]=e(this.ends[f].controller))},t.latex=function(){return this.ends[f].latex()},t.text=function(){return this.ends[f].text()}}));var Pt=w.embed=p(W,(function(t,e){t.setOptions=function(t){function e(){return""}return this.text=t.text||e,this.htmlTemplate=t.htmlString||"",this.latex=t.latex||e,this},t.parser=function(){var t=this;return string=j.string,regex=j.regex,succeed=j.succeed,string("{").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("}")).then((function(e){return string("[").then(regex(/^[-\w\s]*/)).skip(string("]")).or(succeed()).map((function(n){return t.setOptions(O[e](n))}))}))}})),Rt=(k["\\"]=p(B,(function(t,e){t.ctrlSeq="\\",t.replaces=function(t){this._replacedFragment=t.disown(),this.isEmpty=function(){return!1}},t.htmlTemplate='<span class="mq-latex-command-input mq-non-leaf">\\<span>&0</span></span>',t.textTemplate=["\\"],t.createBlocks=function(){e.createBlocks.call(this),this.ends[f].focus=function(){return this.parent.jQ.addClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("mq-empty"),this},this.ends[f].blur=function(){return this.parent.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("mq-empty"),this},this.ends[f].write=function(t,e){t.show().deleteSelection(),e.match(/[a-z]/i)?U(e).createLeftOf(t):(this.parent.renderCommand(t),"\\"===e&&this.isEmpty()||this.parent.parent.write(t,e))},this.ends[f].keystroke=function(t,n,i){return"Tab"===t||"Enter"===t||"Spacebar"===t?(this.parent.renderCommand(i.cursor),void n.preventDefault()):e.keystroke.apply(this,arguments)}},t.createLeftOf=function(t){if(e.createLeftOf.call(this,t),this._replacedFragment){var n=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove",(function(t){return g(t.target=n).trigger(t),!1})).insertBefore(this.jQ).add(this.jQ)}},t.latex=function(){return"\\"+this.ends[f].latex()+" "},t.renderCommand=function(t){this.jQ=this.jQ.last(),this.remove(),this[1]?t.insLeftOf(this[1]):t.insAtRightEnd(this.parent);var e=this.ends[f].latex();e||(e=" ");var n=w[e];n?(n=n(e),this._replacedFragment&&n.replaces(this._replacedFragment),n.createLeftOf(t)):((n=G()).replaces(e),n.createLeftOf(t),t.insRightOf(n),this._replacedFragment&&this._replacedFragment.remove())}})),L(1));for(var Lt in Rt)!function(t,e){"function"==typeof e?(A[t]=function(){return M(),e.apply(this,arguments)},A[t].prototype=e.prototype):A[t]=e}(Lt,Rt[Lt])}()},5476:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>ss});var i="undefined"!=typeof window?window:void 0,r="undefined"!=typeof globalThis?globalThis:i,s=Array.prototype,o=s.forEach,a=s.indexOf,l=null==r?void 0:r.navigator,c=null==r?void 0:r.document,u=null==r?void 0:r.location,d=null==r?void 0:r.fetch,h=null!=r&&r.XMLHttpRequest&&"withCredentials"in new r.XMLHttpRequest?r.XMLHttpRequest:void 0,p=null==r?void 0:r.AbortController,f=null==l?void 0:l.userAgent,m=null!=i?i:{},g={DEBUG:!1,LIB_VERSION:"1.170.1"},v=Array.isArray,y=Object.prototype,_=y.hasOwnProperty,b=y.toString,w=v||function(t){return"[object Array]"===b.call(t)},k=function(t){return"function"==typeof t},x=function(t){return t===Object(t)&&!w(t)},S=function(t){if(x(t)){for(var e in t)if(_.call(t,e))return!1;return!0}return!1},T=function(t){return void 0===t},C=function(t){return"[object String]"==b.call(t)},E=function(t){return C(t)&&0===t.trim().length},I=function(t){return null===t},D=function(t){return T(t)||I(t)},O=function(t){return"[object Number]"==b.call(t)},M=function(t){return"[object Boolean]"===b.call(t)},A=function(t){return t instanceof FormData},P="[PostHog.js]",R={_log:function(t){if(i&&(g.DEBUG||m.POSTHOG_DEBUG)&&!T(i.console)&&i.console){for(var e=("__rrweb_original__"in i.console[t]?i.console[t].__rrweb_original__:i.console[t]),n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];e.apply(void 0,[P].concat(r))}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];R._log.apply(R,["log"].concat(e))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];R._log.apply(R,["warn"].concat(e))},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];R._log.apply(R,["error"].concat(e))},critical:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).error.apply(t,[P].concat(n))},uninitializedWarning:function(t){R.error("You must initialize PostHog before calling ".concat(t))}},L=function(t,e,n){if(t.config.disable_external_dependency_loading)return R.warn("".concat(e," was requested but loading of external scripts is disabled.")),n("Loading of external scripts is disabled");var i=function(){if(!c)return n("document not found");var t=c.createElement("script");t.type="text/javascript",t.src=e,t.onload=function(t){return n(void 0,t)},t.onerror=function(t){return n(t)};var i,r=c.querySelectorAll("body > script");r.length>0?null===(i=r[0].parentNode)||void 0===i||i.insertBefore(t,r[0]):c.body.appendChild(t)};null!=c&&c.body?i():null==c||c.addEventListener("DOMContentLoaded",i)};function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function H(t,e,n){return e&&$(t.prototype,e),n&&$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(s.push(i.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}}(t,e)||U(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||U(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=U(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}m.__PosthogExtensions__=m.__PosthogExtensions__||{},m.__PosthogExtensions__.loadExternalDependency=function(t,e,n){var i="/static/".concat(e,".js")+"?v=".concat(t.version);if("toolbar"===e){var r=3e5,s=Math.floor(Date.now()/r)*r;i="".concat(i,"?&=").concat(s)}var o=t.requestRouter.endpointFor("assets",i);L(t,o,n)},m.__PosthogExtensions__.loadSiteApp=function(t,e,n){var i=t.requestRouter.endpointFor("api",e);L(t,i,n)};var V={},G=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function X(t,e,n){if(w(t))if(o&&t.forEach===o)t.forEach(e,n);else if("length"in t&&t.length===+t.length)for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===V)return}function K(t,e,n){if(!D(t)){if(w(t))return X(t,e,n);if(A(t)){var i,r=Y(t.entries());try{for(r.s();!(i=r.n()).done;){var s=i.value;if(e.call(n,s[1],s[0])===V)return}}catch(t){r.e(t)}finally{r.f()}}else for(var o in t)if(_.call(t,o)&&e.call(n,t[o],o)===V)return}}var J=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return X(n,(function(e){for(var n in e)void 0!==e[n]&&(t[n]=e[n])})),t};function Z(t,e){return-1!==t.indexOf(e)}function tt(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var et,nt=function(t){try{return t()}catch(t){return}},it=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(t){R.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),R.critical(t)}}},rt=function(t){var e={};return K(t,(function(t,n){C(t)&&t.length>0&&(e[n]=t)})),e},st=function(t){return t.replace(/^\$/,"")},ot=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,r,s,o){if(e)if(e.addEventListener&&!s)e.addEventListener(n,r,!!o);else{var a="on"+n,l=e[a];e[a]=function(e,n,r){return function(s){if(s=s||t(null==i?void 0:i.event)){var o,a=!0;k(r)&&(o=r(s));var l=n.call(e,s);return!1!==o&&!1!==l||(a=!1),a}}}(e,r,l)}else R.error("No valid element provided to register_event")}}();function at(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}!function(t){t.GZipJS="gzip-js",t.Base64="base64"}(et||(et={}));var lt="$people_distinct_id",ct="__alias",ut="__timers",dt="$autocapture_disabled_server_side",ht="$heatmaps_enabled_server_side",pt="$exception_capture_enabled_server_side",ft="$exception_capture_endpoint_suffix",mt="$web_vitals_enabled_server_side",gt="$web_vitals_allowed_metrics",vt="$session_recording_enabled_server_side",yt="$console_log_recording_enabled_server_side",_t="$session_recording_network_payload_capture",bt="$session_recording_canvas_recording",wt="$replay_sample_rate",kt="$replay_minimum_duration",xt="$sesid",St="$session_is_sampled",Tt="$enabled_feature_flags",Ct="$early_access_features",Et="$stored_person_properties",It="$stored_group_properties",Dt="$surveys",Ot="$surveys_activated",Mt="$flag_call_reported",At="$user_state",Pt="$client_session_props",Rt="$capture_rate_limit",Lt="$initial_campaign_params",Nt="$initial_referrer_info",Ft="$initial_person_info",qt="$epp",jt="__POSTHOG_TOOLBAR__",$t=[lt,ct,"__cmpns",ut,vt,ht,xt,Tt,At,Ct,It,Et,Dt,Mt,Pt,Rt,Lt,Nt,qt],Ht="$active_feature_flags",zt="$override_feature_flags",Bt="$feature_flag_payloads",Wt=function(t){var e,n={},i=Y(tt(t||{}));try{for(i.s();!(e=i.n()).done;){var r=B(e.value,2),s=r[0],o=r[1];o&&(n[s]=o)}}catch(t){i.e(t)}finally{i.f()}return n},Ut=function(){function t(e){j(this,t),this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return H(t,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var t=this.instance.get_property(Tt),e=this.instance.get_property(zt);if(!e)return t||{};for(var n=J({},t),i=Object.keys(e),r=0;r<i.length;r++)n[i[r]]=e[i[r]];return this._override_warning||(R.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:e,finalFlags:n}),this._override_warning=!0),n}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(Bt)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(t){this.$anon_distinct_id=t}},{key:"setReloadingPaused",value:function(t){this.reloadFeatureFlagsInAction=t}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var t=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout((function(){!t.reloadFeatureFlagsInAction&&t.reloadFeatureFlagsQueued&&(t.reloadFeatureFlagsQueued=!1,t._reloadFeatureFlagsRequest())}),5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var t=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var e=this.instance.config.token,n=this.instance.get_property(Et),i=this.instance.get_property(It),r={token:e,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:n,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:r,compression:this.instance.config.disable_compression?void 0:et.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(e){var n;t.setReloadingPaused(!1);var i=!0;200===e.statusCode&&(t.$anon_distinct_id=void 0,i=!1),t.receivedFeatureFlags(null!==(n=e.json)&&void 0!==n?n:{},i),t._startReloadTimer()}})}}},{key:"getFeatureFlag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var n,i=this.getFlagVariants()[t],r="".concat(i),s=this.instance.get_property(Mt)||{};return!e.send_event&&"send_event"in e||t in s&&s[t].includes(r)||(w(s[t])?s[t].push(r):s[t]=[r],null===(n=this.instance.persistence)||void 0===n||n.register(z({},Mt,s)),this.instance.capture("$feature_flag_called",{$feature_flag:t,$feature_flag_response:i})),i}R.warn('getFeatureFlag for key "'+t+"\" failed. Feature flags didn't load in time.")}},{key:"getFeatureFlagPayload",value:function(t){return this.getFlagPayloads()[t]}},{key:"isFeatureEnabled",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(t,e);R.warn('isFeatureEnabled for key "'+t+"\" failed. Feature flags didn't load in time.")}},{key:"addFeatureFlagsHandler",value:function(t){this.featureFlagEventHandlers.push(t)}},{key:"removeFeatureFlagsHandler",value:function(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((function(e){return e!==t}))}},{key:"receivedFeatureFlags",value:function(t,e){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var n=this.getFlagVariants(),i=this.getFlagPayloads();!function(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=t.featureFlags,o=t.featureFlagPayloads;if(s)if(w(s)){var a,l={};if(s)for(var c=0;c<s.length;c++)l[s[c]]=!0;e&&e.register((z(a={},Ht,s),z(a,Tt,l),a))}else{var u=s,d=o;t.errorsWhileComputingFlags&&(u=F(F({},i),u),d=F(F({},r),d)),e&&e.register((z(n={},Ht,Object.keys(Wt(u))),z(n,Tt,u||{}),z(n,Bt,d||{}),n))}}(t,this.instance.persistence,n,i),this._fireFeatureFlagsCallbacks(e)}}},{key:"override",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return R.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=e,!1===t)this.instance.persistence.unregister(zt);else if(w(t)){for(var n={},i=0;i<t.length;i++)n[t[i]]=!0;this.instance.persistence.register(z({},zt,n))}else this.instance.persistence.register(z({},zt,t))}},{key:"onFeatureFlags",value:function(t){var e=this;if(this.addFeatureFlagsHandler(t),this.instance.decideEndpointWasHit){var n=this._prepareFeatureFlagsForCallbacks(),i=n.flags,r=n.flagVariants;t(i,r)}return function(){return e.removeFeatureFlagsHandler(t)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(t,e){var n,i,r=z({},"$feature_enrollment/".concat(t),e);this.instance.capture("$feature_enrollment_update",{$feature_flag:t,$feature_enrollment:e,$set:r}),this.setPersonPropertiesForFlags(r,!1);var s=F(F({},this.getFlagVariants()),{},z({},t,e));null===(n=this.instance.persistence)||void 0===n||n.register((z(i={},Ht,Object.keys(Wt(s))),z(i,Tt,s),i)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.instance.get_property(Ct);if(i&&!n)return t(i);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:function(n){var i;if(n.json){var r=n.json.earlyAccessFeatures;return null===(i=e.instance.persistence)||void 0===i||i.register(z({},Ct,r)),t(r)}}})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var t=this.getFlags(),e=this.getFlagVariants();return{flags:t.filter((function(t){return e[t]})),flagVariants:Object.keys(e).filter((function(t){return e[t]})).reduce((function(t,n){return t[n]=e[n],t}),{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(t){var e=this._prepareFeatureFlagsForCallbacks(),n=e.flags,i=e.flagVariants;this.featureFlagEventHandlers.forEach((function(e){return e(n,i,{errorsLoading:t})}))}},{key:"setPersonPropertiesForFlags",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(Et)||{};this.instance.register(z({},Et,F(F({},n),t))),e&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(Et)}},{key:"setGroupPropertiesForFlags",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(It)||{};0!==Object.keys(n).length&&Object.keys(n).forEach((function(e){n[e]=F(F({},n[e]),t[e]),delete t[e]})),this.instance.register(z({},It,F(F({},n),t))),e&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(t){if(t){var e=this.instance.get_property(It)||{};this.instance.register(z({},It,F(F({},e),{},z({},t,{}))))}else this.instance.unregister(It)}}]),t}();Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return O(t)&&isFinite(t)&&Math.floor(t)===t});var Qt="0123456789abcdef",Yt=function(){function t(e){if(j(this,t),this.bytes=e,16!==e.length)throw new TypeError("not 128-bit length")}return H(t,[{key:"toString",value:function(){for(var t="",e=0;e<this.bytes.length;e++)t=t+Qt.charAt(this.bytes[e]>>>4)+Qt.charAt(15&this.bytes[e]),3!==e&&5!==e&&7!==e&&9!==e||(t+="-");if(36!==t.length)throw new Error("Invalid UUIDv7 was generated");return t}},{key:"clone",value:function(){return new t(this.bytes.slice(0))}},{key:"equals",value:function(t){return 0===this.compareTo(t)}},{key:"compareTo",value:function(t){for(var e=0;e<16;e++){var n=this.bytes[e]-t.bytes[e];if(0!==n)return Math.sign(n)}return 0}}],[{key:"fromFieldsV7",value:function(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new t(s)}}]),t}(),Vt=function(){function t(){j(this,t),z(this,"timestamp",0),z(this,"counter",0),z(this,"random",new Jt)}return H(t,[{key:"generate",value:function(){var t=this.generateOrAbort();if(T(t)){this.timestamp=0;var e=this.generateOrAbort();if(T(e))throw new Error("Could not generate UUID after timestamp reset");return e}return t}},{key:"generateOrAbort",value:function(){var t=Date.now();if(t>this.timestamp)this.timestamp=t,this.resetCounter();else{if(!(t+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return Yt.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),t}(),Gt=function(t){if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};i&&!T(i.crypto)&&crypto.getRandomValues&&(Gt=function(t){return crypto.getRandomValues(t)});var Xt,Kt,Jt=function(){function t(){j(this,t),z(this,"buffer",new Uint32Array(8)),z(this,"cursor",1/0)}return H(t,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(Gt(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),t}(),Zt=function(){return te().toString()},te=function(){return(Xt||(Xt=new Vt)).generate()},ee="",ne=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,ie={is_supported:function(){return!!c},error:function(t){R.error("cookieStore error: "+t)},get:function(t){if(c){try{for(var e=t+"=",n=c.cookie.split(";").filter((function(t){return t.length})),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return decodeURIComponent(r.substring(e.length,r.length))}}catch(t){}return null}},parse:function(t){var e;try{e=JSON.parse(ie.get(t))||{}}catch(t){}return e},set:function(t,e,n,i,r){if(c)try{var s="",o="",a=function(t,e){if(e){var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if(ee)return ee;if(!e)return"";if(["localhost","127.0.0.1"].includes(t))return"";for(var n=t.split("."),i=Math.min(n.length,8),r="dmn_chk_"+Zt(),s=new RegExp("(^|;)\\s*"+r+"=1");!ee&&i--;){var o=n.slice(i).join("."),a=r+"=1;domain=."+o;e.cookie=a,s.test(e.cookie)&&(e.cookie=a+";expires=Thu, 01 Jan 1970 00:00:00 GMT",ee=o)}return ee}(t);if(!n){var i=function(t){var e=t.match(ne);return e?e[0]:""}(t);i!==n&&R.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}(c.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var u=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&R.warn("cookieStore warning: large cookie, len="+u.length),c.cookie=u,u}catch(t){return}},remove:function(t,e){try{ie.set(t,"",-1,e)}catch(t){return}}},re=null,se={is_supported:function(){if(!I(re))return re;var t=!0;if(T(i))t=!1;else try{var e="__mplssupport__";se.set(e,"xyz"),'"xyz"'!==se.get(e)&&(t=!1),se.remove(e)}catch(e){t=!1}return t||R.error("localStorage unsupported; falling back to cookie store"),re=t,t},error:function(t){R.error("localStorage error: "+t)},get:function(t){try{return null==i?void 0:i.localStorage.getItem(t)}catch(t){se.error(t)}return null},parse:function(t){try{return JSON.parse(se.get(t))||{}}catch(t){}return null},set:function(t,e){try{null==i||i.localStorage.setItem(t,JSON.stringify(e))}catch(t){se.error(t)}},remove:function(t){try{null==i||i.localStorage.removeItem(t)}catch(t){se.error(t)}}},oe=["distinct_id",xt,St,qt],ae=F(F({},se),{},{parse:function(t){try{var e={};try{e=ie.parse(t)||{}}catch(t){}var n=J(e,JSON.parse(se.get(t)||"{}"));return se.set(t,n),n}catch(t){}return null},set:function(t,e,n,i,r,s){try{se.set(t,e,void 0,void 0,s);var o={};oe.forEach((function(t){e[t]&&(o[t]=e[t])})),Object.keys(o).length&&ie.set(t,o,n,i,r,s)}catch(t){se.error(t)}},remove:function(t,e){try{null==i||i.localStorage.removeItem(t),ie.remove(t,e)}catch(t){se.error(t)}}}),le={},ce={is_supported:function(){return!0},error:function(t){R.error("memoryStorage error: "+t)},get:function(t){return le[t]||null},parse:function(t){return le[t]||null},set:function(t,e){le[t]=e},remove:function(t){delete le[t]}},ue=null,de={is_supported:function(){if(!I(ue))return ue;if(ue=!0,T(i))ue=!1;else try{var t="__support__";de.set(t,"xyz"),'"xyz"'!==de.get(t)&&(ue=!1),de.remove(t)}catch(t){ue=!1}return ue},error:function(t){R.error("sessionStorage error: ",t)},get:function(t){try{return null==i?void 0:i.sessionStorage.getItem(t)}catch(t){de.error(t)}return null},parse:function(t){try{return JSON.parse(de.get(t))||null}catch(t){}return null},set:function(t,e){try{null==i||i.sessionStorage.setItem(t,JSON.stringify(e))}catch(t){de.error(t)}},remove:function(t){try{null==i||i.sessionStorage.removeItem(t)}catch(t){de.error(t)}}},he=["localhost","127.0.0.1"],pe=function(t){var e=null==c?void 0:c.createElement("a");return T(e)?null:(e.href=t,e)},fe=function(t,e){return!!function(t){try{new RegExp(t)}catch(t){return!1}return!0}(e)&&new RegExp(e).test(t)},me=function(t,e){for(var n,i=((t.split("#")[0]||"").split("?")[1]||"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!w(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch(t){R.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},ge=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},ve="Mobile",ye="iOS",_e="Android",be="Tablet",we=_e+" "+be,ke="iPad",xe="Apple",Se=xe+" Watch",Te="Safari",Ce="BlackBerry",Ee="Samsung",Ie=Ee+"Browser",De=Ee+" Internet",Oe="Chrome",Me=Oe+" OS",Ae=Oe+" "+ye,Pe="Internet Explorer",Re=Pe+" "+ve,Le="Opera",Ne=Le+" Mini",Fe="Edge",qe="Microsoft "+Fe,je="Firefox",$e=je+" "+ye,He="Nintendo",ze="PlayStation",Be="Xbox",We=_e+" "+ve,Ue=ve+" "+Te,Qe="Windows",Ye=Qe+" Phone",Ve="Nokia",Ge="Ouya",Xe="Generic",Ke=Xe+" "+ve.toLowerCase(),Je=Xe+" "+be.toLowerCase(),Ze="Konqueror",tn="(\\d+(\\.\\d+)?)",en=new RegExp("Version/"+tn),nn=new RegExp(Be,"i"),rn=new RegExp(ze+" \\w+","i"),sn=new RegExp(He+" \\w+","i"),on=new RegExp(Ce+"|PlayBook|BB10","i"),an={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},ln=function(t,e){return e=e||"",Z(t," OPR/")&&Z(t,"Mini")?Ne:Z(t," OPR/")?Le:on.test(t)?Ce:Z(t,"IE"+ve)||Z(t,"WPDesktop")?Re:Z(t,Ie)?De:Z(t,Fe)||Z(t,"Edg/")?qe:Z(t,"FBIOS")?"Facebook "+ve:Z(t,"UCWEB")||Z(t,"UCBrowser")?"UC Browser":Z(t,"CriOS")?Ae:Z(t,"CrMo")?Oe:Z(t,_e)&&Z(t,Te)?We:Z(t,Oe)?Oe:Z(t,"FxiOS")?$e:Z(t.toLowerCase(),Ze.toLowerCase())?Ze:function(t,e){return e&&Z(e,xe)||function(t){return Z(t,Te)&&!Z(t,Oe)&&!Z(t,_e)}(t)}(t,e)?Z(t,ve)?Ue:Te:Z(t,je)?je:Z(t,"MSIE")||Z(t,"Trident/")?Pe:Z(t,"Gecko")?je:""},cn=(z(Kt={},Re,[new RegExp("rv:"+tn)]),z(Kt,qe,[new RegExp(Fe+"?\\/"+tn)]),z(Kt,Oe,[new RegExp("("+Oe+"|CrMo)\\/"+tn)]),z(Kt,Ae,[new RegExp("CriOS\\/"+tn)]),z(Kt,"UC Browser",[new RegExp("(UCBrowser|UCWEB)\\/"+tn)]),z(Kt,Te,[en]),z(Kt,Ue,[en]),z(Kt,Le,[new RegExp("(Opera|OPR)\\/"+tn)]),z(Kt,je,[new RegExp(je+"\\/"+tn)]),z(Kt,$e,[new RegExp("FxiOS\\/"+tn)]),z(Kt,Ze,[new RegExp("Konqueror[:/]?"+tn,"i")]),z(Kt,Ce,[new RegExp(Ce+" "+tn),en]),z(Kt,We,[new RegExp("android\\s"+tn,"i")]),z(Kt,De,[new RegExp(Ie+"\\/"+tn)]),z(Kt,Pe,[new RegExp("(rv:|MSIE )"+tn)]),z(Kt,"Mozilla",[new RegExp("rv:"+tn)]),Kt),un=[[new RegExp(Be+"; "+Be+" (.*?)[);]","i"),function(t){return[Be,t&&t[1]||""]}],[new RegExp(He,"i"),[He,""]],[new RegExp(ze,"i"),[ze,""]],[on,[Ce,""]],[new RegExp(Qe,"i"),function(t,e){if(/Phone/.test(e)||/WPDesktop/.test(e))return[Ye,""];if(new RegExp(ve).test(e)&&!/IEMobile\b/.test(e))return[Qe+" "+ve,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=an[i]||"";return/arm/i.test(e)&&(r="RT"),[Qe,r]}return[Qe,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,function(t){if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[ye,e.join(".")]}return[ye,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,function(t){var e="";return t&&t.length>=3&&(e=T(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+_e+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+_e+")","i"),function(t){if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[_e,e.join(".")]}return[_e,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,function(t){var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Me,""]],[/Linux|debian/i,["Linux",""]]],dn=function(t){return sn.test(t)?He:rn.test(t)?ze:nn.test(t)?Be:new RegExp(Ge,"i").test(t)?Ge:new RegExp("("+Ye+"|WPDesktop)","i").test(t)?Ye:/iPad/.test(t)?ke:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?Se:on.test(t)?Ce:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(Ve,"i").test(t)?Ve:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(ve).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?_e:we:_e:new RegExp("(pda|"+ve+")","i").test(t)?Ke:new RegExp(be,"i").test(t)&&!new RegExp(be+" pc","i").test(t)?Je:""},hn="https?://(.*)",pn=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],fn={campaignParams:function(t){return c?this._campaignParamsFromUrl(c.URL,t):{}},_campaignParamsFromUrl:function(t,e){var n=pn.concat(e||[]),i={};return K(n,(function(e){var n=me(t,e);n&&(i[e]=n)})),i},_searchEngine:function(t){return t?0===t.search(hn+"google.([^/?]*)")?"google":0===t.search(hn+"bing.com")?"bing":0===t.search(hn+"yahoo.com")?"yahoo":0===t.search(hn+"duckduckgo.com")?"duckduckgo":null:null},_searchInfoFromReferrer:function(t){var e=fn._searchEngine(t),n="yahoo"!=e?"q":"p",i={};if(!I(e)){i.$search_engine=e;var r=c?me(c.referrer,n):"";r.length&&(i.ph_keyword=r)}return i},searchInfo:function(){var t=null==c?void 0:c.referrer;return t?this._searchInfoFromReferrer(t):{}},browser:ln,browserVersion:function(t,e){var n=ln(t,e),i=cn[n];if(T(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){for(var e=0;e<un.length;e++){var n=B(un[e],2),i=n[0],r=n[1],s=i.exec(t),o=s&&(k(r)?r(s,t):r);if(o)return o}return["",""]},device:dn,deviceType:function(t){var e=dn(t);return e===ke||e===we||"Kobo"===e||"Kindle Fire"===e||e===Je?be:e===He||e===Be||e===ze||e===Ge?"Console":e===Se?"Wearable":e?ve:"Desktop"},referrer:function(){return(null==c?void 0:c.referrer)||"$direct"},referringDomain:function(){var t;return null!=c&&c.referrer&&(null===(t=pe(c.referrer))||void 0===t?void 0:t.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer(),u:null==u?void 0:u.href}},initialPersonPropsFromInfo:function(t){var e,n=t.r,i=t.u,r={$initial_referrer:n,$initial_referring_domain:null==n?void 0:"$direct"==n?"$direct":null===(e=pe(n))||void 0===e?void 0:e.host};if(i){r.$initial_current_url=i;var s=pe(i);r.$initial_host=null==s?void 0:s.host,r.$initial_pathname=null==s?void 0:s.pathname,K(this._campaignParamsFromUrl(i),(function(t,e){r["$initial_"+st(e)]=t}))}return n&&K(this._searchInfoFromReferrer(n),(function(t,e){r["$initial_"+st(e)]=t})),r},properties:function(){if(!f)return{};var t=B(fn.os(f),2),e=t[0],n=t[1];return J(rt({$os:e,$os_version:n,$browser:fn.browser(f,navigator.vendor),$device:fn.device(f),$device_type:fn.deviceType(f)}),{$current_url:null==u?void 0:u.href,$host:null==u?void 0:u.host,$pathname:null==u?void 0:u.pathname,$raw_user_agent:f.length>1e3?f.substring(0,997)+"...":f,$browser_version:fn.browserVersion(f,navigator.vendor),$browser_language:fn.browserLanguage(),$screen_height:null==i?void 0:i.screen.height,$screen_width:null==i?void 0:i.screen.width,$viewport_height:null==i?void 0:i.innerHeight,$viewport_width:null==i?void 0:i.innerWidth,$lib:"web",$lib_version:g.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!f)return{};var t=B(fn.os(f),2),e=t[0],n=t[1];return J(rt({$os:e,$os_version:n,$browser:fn.browser(f,navigator.vendor)}),{$browser_version:fn.browserVersion(f,navigator.vendor)})}},mn=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],gn=function(){function t(e){j(this,t),this.config=e,this.props={},this.campaign_params_saved=!1,this.name=function(t){var e="";return t.token&&(e=t.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),t.persistence_name?"ph_"+t.persistence_name:"ph_"+e+"_posthog"}(e),this.storage=this.buildStorage(e),this.load(),e.debug&&R.info("Persistence loaded",e.persistence,F({},this.props)),this.update_config(e,e),this.save()}return H(t,[{key:"buildStorage",value:function(t){-1===mn.indexOf(t.persistence.toLowerCase())&&(R.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var e=t.persistence.toLowerCase();return"localstorage"===e&&se.is_supported()?se:"localstorage+cookie"===e&&ae.is_supported()?ae:"sessionstorage"===e&&de.is_supported()?de:"memory"===e?ce:"cookie"===e?ie:ae.is_supported()?ae:ie}},{key:"properties",value:function(){var t={};return K(this.props,(function(e,n){if(n===Tt&&x(e))for(var i=Object.keys(e),r=0;r<i.length;r++)t["$feature/".concat(i[r])]=e[i[r]];else o=n,l=!1,(I(s=$t)?l:a&&s.indexOf===a?-1!=s.indexOf(o):(K(s,(function(t){if(l||(l=t===o))return V})),l))||(t[n]=e);var s,o,l})),t}},{key:"load",value:function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=J({},t))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(t,e,n){var i=this;if(x(t)){T(e)&&(e="None"),this.expire_days=T(n)?this.default_expiry:n;var r=!1;if(K(t,(function(t,n){i.props.hasOwnProperty(n)&&i.props[n]!==e||(i.props[n]=t,r=!0)})),r)return this.save(),!0}return!1}},{key:"register",value:function(t,e){var n=this;if(x(t)){this.expire_days=T(e)?this.default_expiry:e;var i=!1;if(K(t,(function(e,r){t.hasOwnProperty(r)&&n.props[r]!==e&&(n.props[r]=e,i=!0)})),i)return this.save(),!0}return!1}},{key:"unregister",value:function(t){t in this.props&&(delete this.props[t],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(fn.campaignParams(this.config.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(fn.searchInfo())}},{key:"update_referrer_info",value:function(){this.register_once(fn.referrerInfo(),void 0)}},{key:"set_initial_person_info",value:function(){this.props[Lt]||this.props[Nt]||this.register_once(z({},Ft,fn.initialPersonInfo()),void 0)}},{key:"get_referrer_info",value:function(){return rt({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"get_initial_props",value:function(){var t=this,e={};K([Nt,Lt],(function(n){var i=t.props[n];i&&K(i,(function(t,n){e["$initial_"+st(n)]=t}))}));var n=this.props[Ft];if(n){var i=fn.initialPersonPropsFromInfo(n);J(e,i)}return e}},{key:"safe_merge",value:function(t){return K(this.props,(function(e,n){n in t||(t[n]=e)})),t}},{key:"update_config",value:function(t,e){if(this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==e.persistence){var n=this.buildStorage(t),i=this.props;this.clear(),this.storage=n,this.props=i,this.save()}}},{key:"set_disabled",value:function(t){this.disabled=t,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(t){t!==this.secure&&(this.secure=t,this.remove(),this.save())}},{key:"set_event_timer",value:function(t,e){var n=this.props[ut]||{};n[t]=e,this.props[ut]=n,this.save()}},{key:"remove_event_timer",value:function(t){var e=(this.props[ut]||{})[t];return T(e)||(delete this.props[ut][t],this.save()),e}},{key:"get_property",value:function(t){return this.props[t]}},{key:"set_property",value:function(t,e){this.props[t]=e,this.save()}}]),t}();function vn(t){var e,n;return(null===(e=JSON.stringify(t,(n=[],function(t,e){if(x(e)){for(;n.length>0&&n.at(-1)!==this;)n.pop();return n.includes(e)?"[Circular]":(n.push(e),e)}return e})))||void 0===e?void 0:e.length)||0}function yn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6606028.8;if(t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[yn({size:vn(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),yn({size:vn(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap((function(t){return t}))}return[t]}var _n=function(t){return t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t}(_n||{}),bn=function(t){return t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t}(bn||{});function wn(t){return t?G(t).split(/\s+/):[]}function kn(t){var e=null==i?void 0:i.location.href;return!!(e&&t&&t.some((function(t){return e.match(t)})))}function xn(t){var e="";switch(q(t.className)){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return wn(e)}function Sn(t){return D(t)?null:G(t).split(/(\s+)/).filter((function(t){return zn(t)})).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Tn(t){var e="";return Rn(t)&&!Ln(t)&&t.childNodes&&t.childNodes.length&&K(t.childNodes,(function(t){var n;Dn(t)&&t.textContent&&(e+=null!==(n=Sn(t.textContent))&&void 0!==n?n:"")})),G(e)}function Cn(t){return T(t.target)?t.srcElement||null:null!==(e=t.target)&&void 0!==e&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}function En(t){return!!t&&1===t.nodeType}function In(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function Dn(t){return!!t&&3===t.nodeType}function On(t){return!!t&&11===t.nodeType}var Mn=["a","button","form","input","select","textarea","label"];function An(t){var e=t.parentNode;return!(!e||!En(e))&&e}function Pn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(!i||!t||In(t,"html")||!En(t))return!1;if(null!=n&&n.url_allowlist&&!kn(n.url_allowlist))return!1;if(null!=n&&n.url_ignorelist&&kn(n.url_ignorelist))return!1;if(null!=n&&n.dom_event_allowlist){var o=n.dom_event_allowlist;if(o&&!o.some((function(t){return e.type===t})))return!1}for(var a=!1,l=[t],c=!0,u=t;u.parentNode&&!In(u,"body");)if(On(u.parentNode))l.push(u.parentNode.host),u=u.parentNode.host;else{if(!(c=An(u)))break;if(r||Mn.indexOf(c.tagName.toLowerCase())>-1)a=!0;else{var d=i.getComputedStyle(c);d&&"pointer"===d.getPropertyValue("cursor")&&(a=!0)}l.push(c),u=c}if(!function(t,e){var n=null==e?void 0:e.element_allowlist;if(T(n))return!0;var i,r=Y(t);try{var s=function(){var t=i.value;if(n.some((function(e){return t.tagName.toLowerCase()===e})))return{v:!0}};for(r.s();!(i=r.n()).done;){var o=s();if("object"===q(o))return o.v}}catch(t){r.e(t)}finally{r.f()}return!1}(l,n))return!1;if(!function(t,e){var n=null==e?void 0:e.css_selector_allowlist;if(T(n))return!0;var i,r=Y(t);try{var s=function(){var t=i.value;if(n.some((function(e){return t.matches(e)})))return{v:!0}};for(r.s();!(i=r.n()).done;){var o=s();if("object"===q(o))return o.v}}catch(t){r.e(t)}finally{r.f()}return!1}(l,n))return!1;var h=i.getComputedStyle(t);if(h&&"pointer"===h.getPropertyValue("cursor")&&"click"===e.type)return!0;var p=t.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(s||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(s||["change","click"]).indexOf(e.type)>=0;default:return a?(s||["click"]).indexOf(e.type)>=0:(s||["click"]).indexOf(e.type)>=0&&(Mn.indexOf(p)>-1||"true"===t.getAttribute("contenteditable"))}}function Rn(t){for(var e=t;e.parentNode&&!In(e,"body");e=e.parentNode){var n=xn(e);if(Z(n,"ph-sensitive")||Z(n,"ph-no-capture"))return!1}if(Z(xn(t),"ph-include"))return!0;var i=t.type||"";if(C(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!C(r)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,""))}function Ln(t){return!!(In(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||In(t,"select")||In(t,"textarea")||"true"===t.getAttribute("contenteditable"))}var Nn="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Fn=new RegExp("^(?:".concat(Nn,")$")),qn=new RegExp(Nn),jn="\\d{3}-?\\d{2}-?\\d{4}",$n=new RegExp("^(".concat(jn,")$")),Hn=new RegExp("(".concat(jn,")"));function zn(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(D(t))return!1;if(C(t)){if(t=G(t),(e?Fn:qn).test((t||"").replace(/[- ]/g,"")))return!1;if((e?$n:Hn).test(t))return!1}return!0}function Bn(t){var e=Tn(t);return zn(e="".concat(e," ").concat(Wn(t)).trim())?e:""}function Wn(t){var e="";return t&&t.childNodes&&t.childNodes.length&&K(t.childNodes,(function(t){var n;if(t&&"span"===(null===(n=t.tagName)||void 0===n?void 0:n.toLowerCase()))try{var i=Tn(t);e="".concat(e," ").concat(i).trim(),t.childNodes&&t.childNodes.length&&(e="".concat(e," ").concat(Wn(t)).trim())}catch(t){R.error(t)}})),e}function Un(t){return function(t){var e=t.map((function(t){var e,n,i="";if(t.tag_name&&(i+=t.tag_name),t.attr_class){t.attr_class.sort();var r,s=Y(t.attr_class);try{for(s.s();!(r=s.n()).done;){var o=r.value;i+=".".concat(o.replace(/"/g,""))}}catch(t){s.e(t)}finally{s.f()}}var a=F(F(F(F({},t.text?{text:t.text}:{}),{},{"nth-child":null!==(e=t.nth_child)&&void 0!==e?e:0,"nth-of-type":null!==(n=t.nth_of_type)&&void 0!==n?n:0},t.href?{href:t.href}:{}),t.attr_id?{attr_id:t.attr_id}:{}),t.attributes),l={};return tt(a).sort((function(t,e){var n=B(t,1)[0],i=B(e,1)[0];return n.localeCompare(i)})).forEach((function(t){var e=B(t,2),n=e[0],i=e[1];return l[Qn(n.toString())]=Qn(i.toString())})),(i+=":")+tt(a).map((function(t){var e=B(t,2),n=e[0],i=e[1];return"".concat(n,'="').concat(i,'"')})).join("")}));return e.join(";")}(function(t){return t.map((function(t){var e,n,i={text:null===(e=t.$el_text)||void 0===e?void 0:e.slice(0,400),tag_name:t.tag_name,href:null===(n=t.attr__href)||void 0===n?void 0:n.slice(0,2048),attr_class:Yn(t),attr_id:t.attr__id,nth_child:t.nth_child,nth_of_type:t.nth_of_type,attributes:{}};return tt(t).filter((function(t){return 0===B(t,1)[0].indexOf("attr__")})).forEach((function(t){var e=B(t,2),n=e[0],r=e[1];return i.attributes[n]=r})),i}))}(t))}function Qn(t){return t.replace(/"|\\"/g,'\\"')}function Yn(t){var e=t.attr__class;return e?w(e)?e:wn(e):void 0}var Vn="[SessionRecording]",Gn="redacted",Xn={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(t){return t},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},Kn=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],Jn=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Zn=["/s/","/e/","/i/"];function ti(t,e,n,i){if(D(t))return t;var r=(null==e?void 0:e["content-length"])||function(t){return new Blob([t]).size}(t);return C(r)&&(r=parseInt(r)),r>n?Vn+" ".concat(i," body too large to record (").concat(r," bytes)"):t}function ei(t,e){if(D(t))return t;var n=t;return zn(n,!1)||(n=Vn+" "+e+" body "+Gn),K(Jn,(function(t){var i,r;null!==(i=n)&&void 0!==i&&i.length&&-1!==(null===(r=n)||void 0===r?void 0:r.indexOf(t))&&(n=Vn+" "+e+" body "+Gn+" as might contain: "+t)})),n}var ni=H((function t(e){var n,i,r=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(this,t),z(this,"bucketSize",100),z(this,"refillRate",10),z(this,"mutationBuckets",{}),z(this,"loggedTracker",{}),z(this,"refillBuckets",(function(){Object.keys(r.mutationBuckets).forEach((function(t){r.mutationBuckets[t]=r.mutationBuckets[t]+r.refillRate,r.mutationBuckets[t]>=r.bucketSize&&delete r.mutationBuckets[t]}))})),z(this,"getNodeOrRelevantParent",(function(t){var e=r.rrweb.mirror.getNode(t);if("svg"!==(null==e?void 0:e.nodeName)&&e instanceof Element){var n=e.closest("svg");if(n)return[r.rrweb.mirror.getId(n),n]}return[t,e]})),z(this,"numberOfChanges",(function(t){var e,n,i,r,s,o,a,l;return(null!==(e=null===(n=t.removes)||void 0===n?void 0:n.length)&&void 0!==e?e:0)+(null!==(i=null===(r=t.attributes)||void 0===r?void 0:r.length)&&void 0!==i?i:0)+(null!==(s=null===(o=t.texts)||void 0===o?void 0:o.length)&&void 0!==s?s:0)+(null!==(a=null===(l=t.adds)||void 0===l?void 0:l.length)&&void 0!==a?a:0)})),z(this,"throttleMutations",(function(t){if(3!==t.type||0!==t.data.source)return t;var e=t.data,n=r.numberOfChanges(e);e.attributes&&(e.attributes=e.attributes.filter((function(t){var e,n,i,s=B(r.getNodeOrRelevantParent(t.id),2),o=s[0],a=s[1];return 0!==r.mutationBuckets[o]&&(r.mutationBuckets[o]=null!==(e=r.mutationBuckets[o])&&void 0!==e?e:r.bucketSize,r.mutationBuckets[o]=Math.max(r.mutationBuckets[o]-1,0),0===r.mutationBuckets[o]&&(r.loggedTracker[o]||(r.loggedTracker[o]=!0,null===(n=(i=r.options).onBlockedNode)||void 0===n||n.call(i,o,a))),t)})));var i=r.numberOfChanges(e);return 0!==i||n===i?t:void 0})),this.rrweb=e,this.options=s,this.refillRate=null!==(n=this.options.refillRate)&&void 0!==n?n:this.refillRate,this.bucketSize=null!==(i=this.options.bucketSize)&&void 0!==i?i:this.bucketSize,setInterval((function(){r.refillBuckets()}),1e3)})),ii=Uint8Array,ri=Uint16Array,si=Uint32Array,oi=new ii([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ai=new ii([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),li=new ii([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ci=function(t,e){for(var n=new ri(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new si(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},ui=ci(oi,2),di=ui[0],hi=ui[1];di[28]=258,hi[258]=28;for(var pi=ci(ai,0)[1],fi=new ri(32768),mi=0;mi<32768;++mi){var gi=(43690&mi)>>>1|(21845&mi)<<1;gi=(61680&(gi=(52428&gi)>>>2|(13107&gi)<<2))>>>4|(3855&gi)<<4,fi[mi]=((65280&gi)>>>8|(255&gi)<<8)>>>1}var vi=function(t,e,n){for(var i=t.length,r=0,s=new ri(e);r<i;++r)++s[t[r]-1];var o,a=new ri(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;if(n){o=new ri(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],d=a[t[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[fi[d]>>>l]=c}else for(o=new ri(i),r=0;r<i;++r)o[r]=fi[a[t[r]-1]++]>>>15-t[r];return o},yi=new ii(288);for(mi=0;mi<144;++mi)yi[mi]=8;for(mi=144;mi<256;++mi)yi[mi]=9;for(mi=256;mi<280;++mi)yi[mi]=7;for(mi=280;mi<288;++mi)yi[mi]=8;var _i=new ii(32);for(mi=0;mi<32;++mi)_i[mi]=5;var bi=vi(yi,9,0),wi=vi(_i,5,0),ki=function(t){return(t/8|0)+(7&t&&1)},xi=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var i=new(t instanceof ri?ri:t instanceof si?si:ii)(n-e);return i.set(t.subarray(e,n)),i},Si=function(t,e,n){n<<=7&e;var i=e/8|0;t[i]|=n,t[i+1]|=n>>>8},Ti=function(t,e,n){n<<=7&e;var i=e/8|0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},Ci=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new ii(0),0];if(1==r){var o=new ii(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var p=new ri(h+1),f=Ei(n[u-1],p,0);if(f>e){i=0;var m=0,g=f-e,v=1<<g;for(s.sort((function(t,e){return p[e.s]-p[t.s]||t.f-e.f}));i<r;++i){var y=s[i].s;if(!(p[y]>e))break;m+=v-(1<<f-p[y]),p[y]=e}for(m>>>=g;m>0;){var _=s[i].s;p[_]<e?m-=1<<e-p[_]++-1:++i}for(;i>=0&&m;--i){var b=s[i].s;p[b]==e&&(--p[b],++m)}f=e}return[new ii(p),f]},Ei=function t(e,n,i){return-1==e.s?Math.max(t(e.l,n,i+1),t(e.r,n,i+1)):n[e.s]=i},Ii=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ri(++e),i=0,r=t[0],s=1,o=function(t){n[i++]=t},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Di=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},Oi=function(t,e,n){var i=n.length,r=ki(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},Mi=function(t,e,n,i,r,s,o,a,l,c,u){Si(e,u++,n),++r[256];for(var d=Ci(r,15),h=d[0],p=d[1],f=Ci(s,15),m=f[0],g=f[1],v=Ii(h),y=v[0],_=v[1],b=Ii(m),w=b[0],k=b[1],x=new ri(19),S=0;S<y.length;++S)x[31&y[S]]++;for(S=0;S<w.length;++S)x[31&w[S]]++;for(var T=Ci(x,7),C=T[0],E=T[1],I=19;I>4&&!C[li[I-1]];--I);var D,O,M,A,P=c+5<<3,R=Di(r,yi)+Di(s,_i)+o,L=Di(r,h)+Di(s,m)+o+14+3*I+Di(x,C)+(2*x[16]+3*x[17]+7*x[18]);if(P<=R&&P<=L)return Oi(e,u,t.subarray(l,l+c));if(Si(e,u,1+(L<R)),u+=2,L<R){D=vi(h,p,0),O=h,M=vi(m,g,0),A=m;var N=vi(C,E,0);for(Si(e,u,_-257),Si(e,u+5,k-1),Si(e,u+10,I-4),u+=14,S=0;S<I;++S)Si(e,u+3*S,C[li[S]]);u+=3*I;for(var F=[y,w],q=0;q<2;++q){var j=F[q];for(S=0;S<j.length;++S){var $=31&j[S];Si(e,u,N[$]),u+=C[$],$>15&&(Si(e,u,j[S]>>>5&127),u+=j[S]>>>12)}}}else D=bi,O=yi,M=wi,A=_i;for(S=0;S<a;++S)if(i[S]>255){$=i[S]>>>18&31,Ti(e,u,D[$+257]),u+=O[$+257],$>7&&(Si(e,u,i[S]>>>23&31),u+=oi[$]);var H=31&i[S];Ti(e,u,M[H]),u+=A[H],H>3&&(Ti(e,u,i[S]>>>5&8191),u+=ai[H])}else Ti(e,u,D[i[S]]),u+=O[i[S]];return Ti(e,u,D[256]),u+O[256]},Ai=new si([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Pi=new ii(0),Ri=function(){for(var t=new si(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),Li=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=Ri[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},Ni=function(t,e,n,i,r){return function(t,e,n,i,r,s){var o=t.length,a=new ii(i+o+5*(1+Math.floor(o/7e3))+r),l=a.subarray(i,a.length-r),c=0;if(!e||o<8)for(var u=0;u<=o;u+=65535){var d=u+65535;d<o?c=Oi(l,c,t.subarray(u,d)):(l[u]=s,c=Oi(l,c,t.subarray(u,o)))}else{for(var h=Ai[e-1],p=h>>>13,f=8191&h,m=(1<<n)-1,g=new ri(32768),v=new ri(m+1),y=Math.ceil(n/3),_=2*y,b=function(e){return(t[e]^t[e+1]<<y^t[e+2]<<_)&m},w=new si(25e3),k=new ri(288),x=new ri(32),S=0,T=0,C=(u=0,0),E=0,I=0;u<o;++u){var D=b(u),O=32767&u,M=v[D];if(g[O]=M,v[D]=O,E<=u){var A=o-u;if((S>7e3||C>24576)&&A>423){c=Mi(t,l,0,w,k,x,T,C,I,u-I,c),C=S=T=0,I=u;for(var P=0;P<286;++P)k[P]=0;for(P=0;P<30;++P)x[P]=0}var R=2,L=0,N=f,F=O-M&32767;if(A>2&&D==b(u-F))for(var q=Math.min(p,A)-1,j=Math.min(32767,u),$=Math.min(258,A);F<=j&&--N&&O!=M;){if(t[u+R]==t[u+R-F]){for(var H=0;H<$&&t[u+H]==t[u+H-F];++H);if(H>R){if(R=H,L=F,H>q)break;var z=Math.min(F,H-2),B=0;for(P=0;P<z;++P){var W=u-F+P+32768&32767,U=W-g[W]+32768&32767;U>B&&(B=U,M=W)}}}F+=(O=M)-(M=g[O])+32768&32767}if(L){w[C++]=268435456|hi[R]<<18|pi[L];var Q=31&hi[R],Y=31&pi[L];T+=oi[Q]+ai[Y],++k[257+Q],++x[Y],E=u+R,++S}else w[C++]=t[u],++k[t[u]]}}c=Mi(t,l,s,w,k,x,T,C,I,u-I,c),s||(c=Oi(l,c,Pi))}return xi(a,0,i+ki(c)+r)}(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!r)},Fi=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},qi=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&Fi(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},ji=function(t){return 10+(t.filename&&t.filename.length+1||0)};function $i(t,e){void 0===e&&(e={});var n=Li(),i=t.length;n.p(t);var r=Ni(t,e,ji(e),8),s=r.length;return qi(r,e),Fi(r,s-8,n.d()),Fi(r,s-4,i),r}function Hi(t,e){var n=t.length;if(!e&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t);for(var i=new ii(t.length+(t.length>>>1)),r=0,s=function(t){i[r++]=t},o=0;o<n;++o){if(r+5>i.length){var a=new ii(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return xi(i,0,r)}var zi=[bn.MouseMove,bn.MouseInteraction,bn.Scroll,bn.ViewportResize,bn.Input,bn.TouchMove,bn.MediaInteraction,bn.Drag],Bi=function(t){return{rrwebMethod:t,enqueuedAt:Date.now(),attempt:1}},Wi="[SessionRecording]";function Ui(t){return function(t,e){for(var n="",i=0;i<t.length;){var r=t[i++];n+=String.fromCharCode(r)}return n}($i(Hi(JSON.stringify(t))))}function Qi(t){return t.type===_n.Custom&&"sessionIdle"===t.data.tag}var Yi,Vi=function(){function t(e){var n=this;if(j(this,t),z(this,"queuedRRWebEvents",[]),z(this,"isIdle",!1),z(this,"_linkedFlagSeen",!1),z(this,"_lastActivityTimestamp",Date.now()),z(this,"_linkedFlag",null),z(this,"_removePageViewCaptureHook",void 0),z(this,"_onSessionIdListener",void 0),z(this,"_persistDecideOnSessionListener",void 0),z(this,"_samplingSessionListener",void 0),z(this,"_forceAllowLocalhostNetworkCapture",!1),z(this,"_onBeforeUnload",(function(){n._flushBuffer()})),z(this,"_onOffline",(function(){n._tryAddCustomEvent("browser offline",{})})),z(this,"_onOnline",(function(){n._tryAddCustomEvent("browser online",{})})),z(this,"_onVisibilityChange",(function(){if(null!=c&&c.visibilityState){var t="window "+c.visibilityState;n._tryAddCustomEvent(t,{})}})),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw R.error(Wi+" started without valid sessionManager"),new Error(Wi+" started without valid sessionManager. This is a bug.");var i=this.sessionManager.checkAndGetSessionAndWindowId(),r=i.sessionId,s=i.windowId;this.sessionId=r,this.windowId=s,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&R.warn(Wi+" session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds,") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs,"). Session will never be detected as idle"))}return H(t,[{key:"sessionIdleThresholdMilliseconds",get:function(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}},{key:"rrwebRecord",get:function(){var t,e;return null==m||null===(t=m.__PosthogExtensions__)||void 0===t||null===(e=t.rrweb)||void 0===e?void 0:e.record}},{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw new Error(Wi+" must be started with a valid sessionManager.");return this.instance.sessionManager}},{key:"fullSnapshotIntervalMillis",get:function(){var t;return(null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.full_snapshot_interval_millis)||3e5}},{key:"isSampled",get:function(){var t=this.instance.get_property(St);return M(t)?t:null}},{key:"sessionDuration",get:function(){var t,e,n=null===(t=this.buffer)||void 0===t?void 0:t.data[(null===(e=this.buffer)||void 0===e?void 0:e.data.length)-1],i=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return n?n.timestamp-i:null}},{key:"isRecordingEnabled",get:function(){var t=!!this.instance.get_property(vt),e=!this.instance.config.disable_session_recording;return i&&t&&e}},{key:"isConsoleLogCaptureEnabled",get:function(){var t=!!this.instance.get_property(yt),e=this.instance.config.enable_recording_console_log;return null!=e?e:t}},{key:"canvasRecording",get:function(){var t=this.instance.get_property(bt);return t&&t.fps&&t.quality?{enabled:t.enabled,fps:t.fps,quality:t.quality}:void 0}},{key:"networkPayloadCapture",get:function(){var t,e,n=this.instance.get_property(_t),i={recordHeaders:null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.recordHeaders,recordBody:null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recordBody},r=(null==i?void 0:i.recordHeaders)||(null==n?void 0:n.recordHeaders),s=(null==i?void 0:i.recordBody)||(null==n?void 0:n.recordBody),o=x(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,a=!!(M(o)?o:null==n?void 0:n.capturePerformance);return r||s||a?{recordHeaders:r,recordBody:s,recordPerformance:a}:void 0}},{key:"sampleRate",get:function(){var t=this.instance.get_property(wt);return O(t)?t:null}},{key:"minimumDuration",get:function(){var t=this.instance.get_property(kt);return O(t)?t:null}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?D(this._linkedFlag)||this._linkedFlagSeen?M(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}},{key:"startIfEnabledOrStop",value:function(t){var e=this;this.isRecordingEnabled?(this._startCapture(t),null==i||i.addEventListener("beforeunload",this._onBeforeUnload),null==i||i.addEventListener("offline",this._onOffline),null==i||i.addEventListener("online",this._onOnline),null==i||i.addEventListener("visibilitychange",this._onVisibilityChange),this._setupSampling(),D(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance._addCaptureHook((function(t){try{if("$pageview"===t){var n=i?e._maskUrl(i.location.href):"";if(!n)return;e._tryAddCustomEvent("$pageview",{href:n})}}catch(t){R.error("Could not add $pageview to rrweb session",t)}}))),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId((function(t,n,i){i&&e._tryAddCustomEvent("$session_id_change",{sessionId:t,windowId:n,changeReason:i})})))):this.stopRecording()}},{key:"stopRecording",value:function(){var t,e,n;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,null==i||i.removeEventListener("beforeunload",this._onBeforeUnload),null==i||i.removeEventListener("offline",this._onOffline),null==i||i.removeEventListener("online",this._onOnline),null==i||i.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),null===(t=this._removePageViewCaptureHook)||void 0===t||t.call(this),this._removePageViewCaptureHook=void 0,null===(e=this._onSessionIdListener)||void 0===e||e.call(this),this._onSessionIdListener=void 0,null===(n=this._samplingSessionListener)||void 0===n||n.call(this),this._samplingSessionListener=void 0,R.info(Wi+" stopped"))}},{key:"makeSamplingDecision",value:function(t){var e,n=this.sessionId!==t,i=this.sampleRate;if(O(i)){var r,s=this.isSampled,o=n||!M(s);r=o?Math.random()<i:s,o&&(r?this._reportStarted("sampling"):R.warn(Wi+" Sample rate (".concat(i,") has determined that this sessionId (").concat(t,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:i,isSampled:r})),null===(e=this.instance.persistence)||void 0===e||e.register(z({},St,r))}else{var a;null===(a=this.instance.persistence)||void 0===a||a.register(z({},St,null))}}},{key:"afterDecideResponse",value:function(t){var e,n,i,r=this;if(this._persistDecideResponse(t),this._linkedFlag=(null===(e=t.sessionRecording)||void 0===e?void 0:e.linkedFlag)||null,null!==(n=t.sessionRecording)&&void 0!==n&&n.endpoint&&(this._endpoint=null===(i=t.sessionRecording)||void 0===i?void 0:i.endpoint),this._setupSampling(),!D(this._linkedFlag)&&!this._linkedFlagSeen){var s=C(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,o=C(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((function(t,e){var n=x(e)&&s in e,i=o?e[s]===o:n;if(i){var a={linkedFlag:s,linkedVariant:o},l="linked flag matched";R.info(Wi+" "+l,a),r._tryAddCustomEvent(l,a),r._reportStarted("linked_flag_match")}r._linkedFlagSeen=i}))}this.receivedDecide=!0,this.startIfEnabledOrStop()}},{key:"_setupSampling",value:function(){var t=this;O(this.sampleRate)&&D(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId((function(e){t.makeSamplingDecision(e)})))}},{key:"_persistDecideResponse",value:function(t){if(this.instance.persistence){var e,n=this.instance.persistence,i=function(){var e,i,r,s,o,a,l,c,u=null===(e=t.sessionRecording)||void 0===e?void 0:e.sampleRate,d=D(u)?null:parseFloat(u),h=null===(i=t.sessionRecording)||void 0===i?void 0:i.minimumDurationMilliseconds;n.register((z(c={},vt,!!t.sessionRecording),z(c,yt,null===(r=t.sessionRecording)||void 0===r?void 0:r.consoleLogRecordingEnabled),z(c,_t,F({capturePerformance:t.capturePerformance},null===(s=t.sessionRecording)||void 0===s?void 0:s.networkPayloadCapture)),z(c,bt,{enabled:null===(o=t.sessionRecording)||void 0===o?void 0:o.recordCanvas,fps:null===(a=t.sessionRecording)||void 0===a?void 0:a.canvasFps,quality:null===(l=t.sessionRecording)||void 0===l?void 0:l.canvasQuality}),z(c,wt,d),z(c,kt,T(h)?null:h),c))};i(),null===(e=this._persistDecideOnSessionListener)||void 0===e||e.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(i)}}},{key:"log",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(e=this.instance.sessionRecording)||void 0===e||e.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(t)]}},timestamp:Date.now()})}},{key:"_startCapture",value:function(t){var e,n,i=this;T(Object.assign)||T(Array.from)||this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut()||(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():null===(e=m.__PosthogExtensions__)||void 0===e||null===(n=e.loadExternalDependency)||void 0===n||n.call(e,this.instance,"recorder",(function(t){if(t)return R.error(Wi+" could not load recorder",t);i._onScriptLoaded()})),R.info(Wi+" starting"),"active"===this.status&&this._reportStarted(t||"recording_initialized"))}},{key:"isInteractiveEvent",value:function(t){var e;return 3===t.type&&-1!==zi.indexOf(null===(e=t.data)||void 0===e?void 0:e.source)}},{key:"_updateWindowAndSessionIds",value:function(t){var e=this.isInteractiveEvent(t);e||this.isIdle||t.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:t.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());var n=!1;if(e&&(this._lastActivityTimestamp=t.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:t.type}),n=!0)),!this.isIdle){var i=this.sessionManager.checkAndGetSessionAndWindowId(!e,t.timestamp),r=i.windowId,s=i.sessionId,o=this.sessionId!==s,a=this.windowId!==r;this.windowId=r,this.sessionId=s,o||a?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):n&&this._scheduleFullSnapshot()}}},{key:"_tryRRWebMethod",value:function(t){try{return t.rrwebMethod(),!0}catch(e){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:t.enqueuedAt||Date.now(),attempt:t.attempt++,rrwebMethod:t.rrwebMethod}):R.warn(Wi+" could not emit queued rrweb event.",e,t),!1}}},{key:"_tryAddCustomEvent",value:function(t,e){var n=this;return this._tryRRWebMethod(Bi((function(){return n.rrwebRecord.addCustomEvent(t,e)})))}},{key:"_tryTakeFullSnapshot",value:function(){var t=this;return this._tryRRWebMethod(Bi((function(){return t.rrwebRecord.takeFullSnapshot()})))}},{key:"_onScriptLoaded",value:function(){for(var t,e=this,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this.instance.config.session_recording,r=0,s=Object.entries(i||{});r<s.length;r++){var o=B(s[r],2),a=o[0],l=o[1];a in n&&("maskInputOptions"===a?n.maskInputOptions=F({password:!0},l):n[a]=l)}if(this.canvasRecording&&this.canvasRecording.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.canvasRecording.fps},n.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=null!==(t=this.mutationRateLimiter)&&void 0!==t?t:new ni(this.rrwebRecord,{onBlockedNode:function(t,n){var i="Too many mutations on node '".concat(t,"'. Rate limiting. This could be due to SVG animations or something similar");R.info(i,{node:n}),e.log(Wi+" "+i,"warn")}});var c=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(F({emit:function(t){e.onRRwebEmit(t)},plugins:c},n)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:c.map((function(t){return null==t?void 0:t.name}))}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else R.error(Wi+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_scheduleFullSnapshot",value:function(){var t=this;if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval((function(){t._tryTakeFullSnapshot()}),e))}}},{key:"_gatherRRWebPlugins",value:function(){var t,e,n,i,r=[],s=null===(t=m.__PosthogExtensions__)||void 0===t||null===(e=t.rrwebPlugins)||void 0===e?void 0:e.getRecordConsolePlugin;s&&this.isConsoleLogCaptureEnabled&&r.push(s());var o=null===(n=m.__PosthogExtensions__)||void 0===n||null===(i=n.rrwebPlugins)||void 0===i?void 0:i.getRecordNetworkPlugin;return this.networkPayloadCapture&&k(o)&&(!he.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?r.push(o(function(t,e){var n,i,r,s={payloadSizeLimitBytes:Xn.payloadSizeLimitBytes,performanceEntryTypeToObserve:W(Xn.performanceEntryTypeToObserve),payloadHostDenyList:[].concat(W(e.payloadHostDenyList||[]),W(Xn.payloadHostDenyList))},o=!1!==t.session_recording.recordHeaders&&e.recordHeaders,a=!1!==t.session_recording.recordBody&&e.recordBody,l=!1!==t.capture_performance&&e.recordPerformance,c=(n=s,r=Math.min(1e6,null!==(i=n.payloadSizeLimitBytes)&&void 0!==i?i:1e6),function(t){return null!=t&&t.requestBody&&(t.requestBody=ti(t.requestBody,t.requestHeaders,r,"Request")),null!=t&&t.responseBody&&(t.responseBody=ti(t.responseBody,t.responseHeaders,r,"Response")),t}),u=function(t){return c(function(t){var e=pe(t.name);if(!(e&&e.pathname&&Zn.some((function(t){return 0===e.pathname.indexOf(t)}))))return t}((n=(e=t).requestHeaders,D(n)||K(Object.keys(null!=n?n:{}),(function(t){Kn.includes(t.toLowerCase())&&(n[t]=Gn)})),e)));var e,n},d=k(t.session_recording.maskNetworkRequestFn);return d&&k(t.session_recording.maskCapturedNetworkRequestFn)&&R.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=function(e){var n=t.session_recording.maskNetworkRequestFn({url:e.name});return F(F({},e),{},{name:null==n?void 0:n.url})}),s.maskRequestFn=k(t.session_recording.maskCapturedNetworkRequestFn)?function(e){var n,i,r,s=u(e);return s&&null!==(n=null===(i=(r=t.session_recording).maskCapturedNetworkRequestFn)||void 0===i?void 0:i.call(r,s))&&void 0!==n?n:void 0}:function(t){return function(t){if(!T(t))return t.requestBody=ei(t.requestBody,"Request"),t.responseBody=ei(t.responseBody,"Response"),t}(u(t))},F(F(F({},Xn),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})}(this.instance.config,this.networkPayloadCapture))):R.info(Wi+" NetworkCapture not started because we are on localhost.")),r}},{key:"onRRwebEmit",value:function(t){var e;if(this._processQueuedEvents(),t&&x(t)){if(t.type===_n.Meta){var n=this._maskUrl(t.data.href);if(this._lastHref=n,!n)return;t.data.href=n}else this._pageViewFallBack();t.type===_n.FullSnapshot&&this._scheduleFullSnapshot();var i=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(t):t;if(i){var r=function(t){var e=t;if(e&&x(e)&&6===e.type&&x(e.data)&&"rrweb/console@1"===e.data.plugin){e.data.payload.payload.length>10&&(e.data.payload.payload=e.data.payload.payload.slice(0,10),e.data.payload.payload.push("...[truncated]"));for(var n=[],i=0;i<e.data.payload.payload.length;i++)e.data.payload.payload[i]&&e.data.payload.payload[i].length>2e3?n.push(e.data.payload.payload[i].slice(0,2e3)+"...[truncated]"):n.push(e.data.payload.payload[i]);return e.data.payload.payload=n,t}return t}(i);if(this._updateWindowAndSessionIds(r),!this.isIdle||Qi(r)){if(Qi(r)){var s=r.data.payload;if(s){var o=s.lastActivityTimestamp,a=s.threshold;r.timestamp=o+a}}var l=null===(e=this.instance.config.session_recording.compress_events)||void 0===e||e?function(t){if(vn(t)<1024)return t;try{if(t.type===_n.FullSnapshot)return F(F({},t),{},{data:Ui(t.data),cv:"2024-10"});if(t.type===_n.IncrementalSnapshot&&t.data.source===bn.Mutation)return F(F({},t),{},{cv:"2024-10",data:F(F({},t.data),{},{texts:Ui(t.data.texts),attributes:Ui(t.data.attributes),removes:Ui(t.data.removes),adds:Ui(t.data.adds)})});if(t.type===_n.IncrementalSnapshot&&t.data.source===bn.StyleSheetRule)return F(F({},t),{},{cv:"2024-10",data:F(F({},t.data),{},{adds:Ui(t.data.adds),removes:Ui(t.data.removes)})})}catch(t){R.error(Wi+" could not compress event - will use uncompressed event",t)}return t}(r):r,c={$snapshot_bytes:vn(l),$snapshot_data:l,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(c):this.clearBuffer()}}}}},{key:"_pageViewFallBack",value:function(){if(!this.instance.config.capture_pageview&&i){var t=this._maskUrl(i.location.href);this._lastHref!==t&&(this._tryAddCustomEvent("$url_changed",{href:t}),this._lastHref=t)}}},{key:"_processQueuedEvents",value:function(){var t=this;if(this.queuedRRWebEvents.length){var e=W(this.queuedRRWebEvents);this.queuedRRWebEvents=[],e.forEach((function(e){Date.now()-e.enqueuedAt<=2e3&&t._tryRRWebMethod(e)}))}}},{key:"_maskUrl",value:function(t){var e=this.instance.config.session_recording;if(e.maskNetworkRequestFn){var n,i={url:t};return null===(n=i=e.maskNetworkRequestFn(i))||void 0===n?void 0:n.url}return t}},{key:"clearBuffer",value:function(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}},{key:"_flushBuffer",value:function(){var t=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var e=this.minimumDuration,n=this.sessionDuration,i=O(n)&&n>=0,r=O(e)&&i&&n<e;return"buffering"===this.status||r?(this.flushBufferTimer=setTimeout((function(){t._flushBuffer()}),2e3),this.buffer):(this.buffer.data.length>0&&yn(this.buffer).forEach((function(e){t._captureSnapshot({$snapshot_bytes:e.size,$snapshot_data:e.data,$session_id:e.sessionId,$window_id:e.windowId})})),this.clearBuffer())}},{key:"_captureSnapshotBuffered",value:function(t){var e,n=this,i=2+((null===(e=this.buffer)||void 0===e?void 0:e.data.length)||0);!this.isIdle&&(this.buffer.size+t.$snapshot_bytes+i>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=t.$snapshot_bytes,this.buffer.data.push(t.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout((function(){n._flushBuffer()}),2e3))}},{key:"_captureSnapshot",value:function(t){this.instance.capture("$snapshot",t,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}},{key:"overrideLinkedFlag",value:function(){this._linkedFlagSeen=!0,this._reportStarted("linked_flag_override")}},{key:"overrideSampling",value:function(){var t;null===(t=this.instance.persistence)||void 0===t||t.register(z({},St,!0)),this._reportStarted("sampling_override")}},{key:"_reportStarted",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0})()&&this.instance.register_for_session({$session_recording_start_reason:t})}}]),t}(),Gi=function(){function t(e){j(this,t),this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return H(t,[{key:"call",value:function(){var t=this,e={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(Et),group_properties:this.instance.get_property(It),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:e,compression:this.instance.config.disable_compression?void 0:et.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(e){return t.parseDecideResponse(e.json)}})}},{key:"parseDecideResponse",value:function(t){var e=this;this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var n=!t;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(null!=t?t:{},n),n)R.error("Failed to fetch feature flags from PostHog.");else{if(!c||!c.body)return R.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((function(){e.parseDecideResponse(t)}),500);if(this.instance._afterDecideResponse(t),t.siteApps)if(this.instance.config.opt_in_site_apps){var i,r=Y(t.siteApps);try{var s=function(){var t,n,r=i.value,s=r.id,o=r.url;m["__$$ph_site_app_".concat(s)]=e.instance,null===(t=m.__PosthogExtensions__)||void 0===t||null===(n=t.loadSiteApp)||void 0===n||n.call(t,e.instance,o,(function(t){if(t)return R.error("Error while initializing PostHog app with config id ".concat(s),t)}))};for(r.s();!(i=r.n()).done;)s()}catch(t){r.e(t)}finally{r.f()}}else t.siteApps.length>0&&R.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}}]),t}(),Xi=null!=i&&i.location?ge(i.location.hash,"__posthog")||ge(location.hash,"state"):null,Ki="_postHogToolbarParams";!function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"}(Yi||(Yi={}));var Ji=function(){function t(e){j(this,t),this.instance=e}return H(t,[{key:"setToolbarState",value:function(t){m.ph_toolbar_state=t}},{key:"getToolbarState",value:function(){var t;return null!==(t=m.ph_toolbar_state)&&void 0!==t?t:Yi.UNINITIALIZED}},{key:"maybeLoadToolbar",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!i||!c)return!1;n=null!==(t=n)&&void 0!==t?t:i.location,s=null!==(e=s)&&void 0!==e?e:i.history;try{if(!r){try{i.localStorage.setItem("test","test"),i.localStorage.removeItem("test")}catch(t){return!1}r=null==i?void 0:i.localStorage}var o,a=Xi||ge(n.hash,"__posthog")||ge(n.hash,"state"),l=a?nt((function(){return JSON.parse(atob(decodeURIComponent(a)))}))||nt((function(){return JSON.parse(decodeURIComponent(a))})):null;return l&&"ph_authorize"===l.action?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?n.hash=l.desiredHash:s?s.replaceState(s.state,"",n.pathname+n.search):n.hash="")):((o=JSON.parse(r.getItem(Ki)||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token||(this.loadToolbar(o),0))}catch(t){return!1}}},{key:"_callLoadToolbar",value:function(t){(m.ph_load_toolbar||m.ph_load_editor)(t,this.instance)}},{key:"loadToolbar",value:function(t){var e=this,n=!(null==c||!c.getElementById(jt));if(!i||n)return!1;var r="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,s=F(F({token:this.instance.config.token},t),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(i.localStorage.setItem(Ki,JSON.stringify(F(F({},s),{},{source:void 0}))),this.getToolbarState()===Yi.LOADED)this._callLoadToolbar(s);else if(this.getToolbarState()===Yi.UNINITIALIZED){var o,a;this.setToolbarState(Yi.LOADING),null===(o=m.__PosthogExtensions__)||void 0===o||null===(a=o.loadExternalDependency)||void 0===a||a.call(o,this.instance,"toolbar",(function(t){if(t)return R.error("Failed to load toolbar",t),void e.setToolbarState(Yi.UNINITIALIZED);e.setToolbarState(Yi.LOADED),e._callLoadToolbar(s)})),ot(i,"turbolinks:load",(function(){e.setToolbarState(Yi.UNINITIALIZED),e.loadToolbar(s)}))}return!0}},{key:"_loadEditor",value:function(t){return this.loadToolbar(t)}},{key:"maybeLoadEditor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(t,e,n)}}]),t}(),Zi=function(){function t(e){j(this,t),z(this,"isPaused",!0),z(this,"queue",[]),z(this,"flushTimeoutMs",3e3),this.sendRequest=e}return H(t,[{key:"enqueue",value:function(t){this.queue.push(t),this.flushTimeout||this.setFlushTimeout()}},{key:"unload",value:function(){var t=this;this.clearFlushTimeout();var e=this.queue.length>0?this.formatQueue():{},n=Object.values(e);[].concat(W(n.filter((function(t){return 0===t.url.indexOf("/e")}))),W(n.filter((function(t){return 0!==t.url.indexOf("/e")})))).map((function(e){t.sendRequest(F(F({},e),{},{transport:"sendBeacon"}))}))}},{key:"enable",value:function(){this.isPaused=!1,this.setFlushTimeout()}},{key:"setFlushTimeout",value:function(){var t=this;this.isPaused||(this.flushTimeout=setTimeout((function(){if(t.clearFlushTimeout(),t.queue.length>0){var e=t.formatQueue(),n=function(n){var i=e[n],r=(new Date).getTime();i.data&&w(i.data)&&K(i.data,(function(t){t.offset=Math.abs(t.timestamp-r),delete t.timestamp})),t.sendRequest(i)};for(var i in e)n(i)}}),this.flushTimeoutMs))}},{key:"clearFlushTimeout",value:function(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}},{key:"formatQueue",value:function(){var t={};return K(this.queue,(function(e){var n,i=e,r=(i?i.batchKey:null)||i.url;T(t[r])&&(t[r]=F(F({},i),{},{data:[]})),null===(n=t[r].data)||void 0===n||n.push(i.data)})),this.queue=[],t}}]),t}(),tr=!!h||!!d,er="text/plain",nr=function(t,e){var n=B(t.split("?"),2),i=n[0],r=n[1],s=F({},e);null==r||r.split("&").forEach((function(t){var e=B(t.split("="),1)[0];delete s[e]}));var o=function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",r=[];return K(t,(function(t,i){T(t)||T(i)||"undefined"===i||(e=encodeURIComponent(function(t){return t instanceof File}(t)?t.name:t.toString()),n=encodeURIComponent(i),r[r.length]=n+"="+e)})),r.join(i)}(s);return o=o?(r?r+"&":"")+o:r,"".concat(i,"?").concat(o)},ir=function(t){var e=t.data,n=t.compression;if(e){if(n===et.GZipJS){var i=$i(Hi(JSON.stringify(e)),{mtime:0}),r=new Blob([i],{type:er});return{contentType:er,body:r,estimatedSize:r.size}}if(n===et.Base64){var s=function(t){var e,n,i,r,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,c="",u=[];if(!t)return t;t=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),I(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s}(t);do{e=(s=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,n=s>>12&63,i=s>>6&63,r=63&s,u[l++]=o.charAt(e)+o.charAt(n)+o.charAt(i)+o.charAt(r)}while(a<t.length);switch(c=u.join(""),t.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(JSON.stringify(e)),o=function(t){return"data="+encodeURIComponent("string"==typeof t?t:JSON.stringify(t))}(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=JSON.stringify(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},rr=[];h&&rr.push({transport:"XHR",method:function(t){var e,n=new h;n.open(t.method||"GET",t.url,!0);var i=null!==(e=ir(t))&&void 0!==e?e:{},r=i.contentType,s=i.body;K(t.headers,(function(t,e){n.setRequestHeader(e,t)})),r&&n.setRequestHeader("Content-Type",r),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState){var e,i={statusCode:n.status,text:n.responseText};if(200===n.status)try{i.json=JSON.parse(n.responseText)}catch(t){}null===(e=t.callback)||void 0===e||e.call(t,i)}},n.send(s)}}),d&&rr.push({transport:"fetch",method:function(t){var e,n,i=null!==(e=ir(t))&&void 0!==e?e:{},r=i.contentType,s=i.body,o=i.estimatedSize,a=new Headers;K(t.headers,(function(t,e){a.append(e,t)})),r&&a.append("Content-Type",r);var l=t.url,c=null;if(p){var u=new p;c={signal:u.signal,timeout:setTimeout((function(){return u.abort()}),t.timeout)}}d(l,{method:(null==t?void 0:t.method)||"GET",headers:a,keepalive:"POST"===t.method&&(o||0)<65536,body:s,signal:null===(n=c)||void 0===n?void 0:n.signal}).then((function(e){return e.text().then((function(n){var i,r={statusCode:e.status,text:n};if(200===e.status)try{r.json=JSON.parse(n)}catch(t){R.error(t)}null===(i=t.callback)||void 0===i||i.call(t,r)}))})).catch((function(e){var n;R.error(e),null===(n=t.callback)||void 0===n||n.call(t,{statusCode:0,text:e})})).finally((function(){return c?clearTimeout(c.timeout):null}))}}),null!=l&&l.sendBeacon&&rr.push({transport:"sendBeacon",method:function(t){var e=nr(t.url,{beacon:"1"});try{var n,i=null!==(n=ir(t))&&void 0!==n?n:{},r=i.contentType,s=i.body,o="string"==typeof s?new Blob([s],{type:r}):s;l.sendBeacon(e,o)}catch(t){}}});var sr,or=["retriesPerformedSoFar"],ar=function(){function t(e){var n=this;j(this,t),z(this,"isPolling",!1),z(this,"pollIntervalMs",3e3),z(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!T(i)&&"onLine"in i.navigator&&(this.areWeOnline=i.navigator.onLine,i.addEventListener("online",(function(){n.areWeOnline=!0,n.flush()})),i.addEventListener("offline",(function(){n.areWeOnline=!1})))}return H(t,[{key:"retriableRequest",value:function(t){var e=this,n=t.retriesPerformedSoFar,i=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,or);O(n)&&n>0&&(i.url=nr(i.url,{retry_count:n})),this.instance._send_request(F(F({},i),{},{callback:function(t){var r;200!==t.statusCode&&(t.statusCode<400||t.statusCode>=500)&&(null!=n?n:0)<10?e.enqueue(F({retriesPerformedSoFar:n},i)):null===(r=i.callback)||void 0===r||r.call(i,t)}}))}},{key:"enqueue",value:function(t){var e=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=e+1;var n=function(t){var e=3e3*Math.pow(2,t),n=e/2,i=Math.min(18e5,e),r=(Math.random()-.5)*(i-n);return Math.ceil(i+r)}(e),i=Date.now()+n;this.queue.push({retryAt:i,requestOptions:t});var r="Enqueued failed request for retry in ".concat(n);navigator.onLine||(r+=" (Browser is offline)"),R.warn(r),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var t=this;this.poller&&clearTimeout(this.poller),this.poller=setTimeout((function(){t.areWeOnline&&t.queue.length>0&&t.flush(),t.poll()}),this.pollIntervalMs)}},{key:"flush",value:function(){var t=Date.now(),e=[],n=this.queue.filter((function(n){return n.retryAt<t||(e.push(n),!1)}));if(this.queue=e,n.length>0){var i,r=Y(n);try{for(r.s();!(i=r.n()).done;){var s=i.value.requestOptions;this.retriableRequest(s)}}catch(t){r.e(t)}finally{r.f()}}}},{key:"unload",value:function(){this.poller&&(clearTimeout(this.poller),this.poller=void 0);var t,e=Y(this.queue);try{for(e.s();!(t=e.n()).done;){var n=t.value.requestOptions;try{this.instance._send_request(F(F({},n),{},{transport:"sendBeacon"}))}catch(t){R.error(t)}}}catch(t){e.e(t)}finally{e.f()}this.queue=[]}}]),t}(),lr=1800,cr=function(){function t(e,n,i,r){var s;j(this,t),z(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=i||Zt,this._windowIdGenerator=r||Zt;var o=e.persistence_name||e.token,a=e.session_idle_timeout_seconds||lr;if(O(a)?a>lr?R.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):a<60&&R.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(R.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),a=lr),this._sessionTimeoutMs=1e3*Math.min(Math.max(a,60),lr),this._window_id_storage_key="ph_"+o+"_window_id",this._primary_window_exists_storage_key="ph_"+o+"_primary_window_exists",this._canUseSessionStorage()){var l=de.parse(this._window_id_storage_key),c=de.parse(this._primary_window_exists_storage_key);l&&!c?this._windowId=l:de.remove(this._window_id_storage_key),de.set(this._primary_window_exists_storage_key,!0)}if(null!==(s=this.config.bootstrap)&&void 0!==s&&s.sessionID)try{var u=function(t){var e=t.replace(/-/g,"");if(32!==e.length)throw new Error("Not a valid UUID");if("7"!==e[12])throw new Error("Not a UUIDv7");return parseInt(e.substring(0,12),16)}(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,(new Date).getTime(),u)}catch(e){R.error("Invalid sessionID in bootstrap",e)}this._listenToReloadWindow()}return H(t,[{key:"sessionTimeoutMs",get:function(){return this._sessionTimeoutMs}},{key:"onSessionId",value:function(t){var e=this;return T(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(t),this._sessionId&&t(this._sessionId,this._windowId),function(){e._sessionIdChangedHandlers=e._sessionIdChangedHandlers.filter((function(e){return e!==t}))}}},{key:"_canUseSessionStorage",value:function(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&de.is_supported()}},{key:"_setWindowId",value:function(t){t!==this._windowId&&(this._windowId=t,this._canUseSessionStorage()&&de.set(this._window_id_storage_key,t))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?de.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(t,e,n){t===this._sessionId&&e===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=e,this._sessionId=t,this.persistence.register(z({},xt,[e,t,n])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var t=this.persistence.props[xt];return w(t)&&2===t.length&&t.push(t[0]),t||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var t=this;null==i||i.addEventListener("beforeunload",(function(){t._canUseSessionStorage()&&de.remove(t._primary_window_exists_storage_key)}))}},{key:"checkAndGetSessionAndWindowId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime(),n=B(this._getSessionId(),3),i=n[0],r=n[1],s=n[2],o=this._getWindowId(),a=O(s)&&s>0&&Math.abs(e-s)>864e5,l=!1,c=!r,u=!t&&Math.abs(e-i)>this.sessionTimeoutMs;c||u||a?(r=this._sessionIdGenerator(),o=this._windowIdGenerator(),R.info("[SessionId] new session ID generated",{sessionId:r,windowId:o,changeReason:{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:a}}),s=e,l=!0):o||(o=this._windowIdGenerator(),l=!0);var d=0===i||!t||a?e:i,h=0===s?(new Date).getTime():s;return this._setWindowId(o),this._setSessionId(r,d,h),l&&this._sessionIdChangedHandlers.forEach((function(t){return t(r,o,l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:a}:void 0)})),{sessionId:r,windowId:o,sessionStartTimestamp:h,changeReason:l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:a}:void 0}}}]),t}();!function(t){t.US="us",t.EU="eu",t.CUSTOM="custom"}(sr||(sr={}));var ur="i.posthog.com",dr=function(){function t(e){j(this,t),z(this,"_regionCache",{}),this.instance=e}return H(t,[{key:"apiHost",get:function(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===t?"https://us.i.posthog.com":t}},{key:"uiHost",get:function(){var t,e=null===(t=this.instance.config.ui_host)||void 0===t?void 0:t.replace(/\/$/,"");return e||(e=this.apiHost.replace(".".concat(ur),".posthog.com")),"https://app.posthog.com"===e?"https://us.posthog.com":e}},{key:"region",get:function(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=sr.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=sr.EU:this._regionCache[this.apiHost]=sr.CUSTOM),this._regionCache[this.apiHost]}},{key:"endpointFor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&(e="/"===e[0]?e:"/".concat(e)),"ui"===t)return this.uiHost+e;if(this.region===sr.CUSTOM)return this.apiHost+e;var n=ur+e;switch(t){case"assets":return"https://".concat(this.region,"-assets.").concat(n);case"api":return"https://".concat(this.region,".").concat(n)}}}]),t}(),hr="posthog-js";function pr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.organization,i=e.projectId,r=e.prefix,s=e.severityAllowList,o=void 0===s?["error"]:s;return function(e){var s,a,l,c,u;if("*"!==o&&!o.includes(e.level)||!t.__loaded)return e;e.tags||(e.tags={});var d=t.requestRouter.endpointFor("ui","/project/".concat(t.config.token,"/person/").concat(t.get_distinct_id()));e.tags["PostHog Person URL"]=d,t.sessionRecordingStarted()&&(e.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=(null===(s=e.exception)||void 0===s?void 0:s.values)||[],p={$exception_message:(null===(a=h[0])||void 0===a?void 0:a.value)||e.message,$exception_type:null===(l=h[0])||void 0===l?void 0:l.type,$exception_personURL:d,$exception_level:e.level,$exception_list:h,$sentry_event_id:e.event_id,$sentry_exception:e.exception,$sentry_exception_message:(null===(c=h[0])||void 0===c?void 0:c.value)||e.message,$sentry_exception_type:null===(u=h[0])||void 0===u?void 0:u.type,$sentry_tags:e.tags,$level:e.level};return n&&i&&(p.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+e.event_id),t.exceptions.sendExceptionEvent(p),e}}var fr,mr,gr,vr=H((function t(e,n,i,r,s){j(this,t),this.name=hr,this.setupOnce=function(t){t(pr(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}})),yr=function(){function t(e){j(this,t),this._instance=e}return H(t,[{key:"doPageView",value:function(t){var e,n=this._previousPageViewProperties(t);return this._currentPath=null!==(e=null==i?void 0:i.location.pathname)&&void 0!==e?e:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=t,n}},{key:"doPageLeave",value:function(t){return this._previousPageViewProperties(t)}},{key:"_previousPageViewProperties",value:function(t){var e=this._currentPath,n=this._prevPageviewTimestamp,i=this._instance.scrollManager.getContext();if(!n)return{};var r={};if(i){var s=i.maxScrollHeight,o=i.lastScrollY,a=i.maxScrollY,l=i.maxContentHeight,c=i.lastContentY,u=i.maxContentY;T(s)||T(o)||T(a)||T(l)||T(c)||T(u)||(s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),r={$prev_pageview_last_scroll:o,$prev_pageview_last_scroll_percentage:s<=1?1:_r(o/s,0,1),$prev_pageview_max_scroll:a,$prev_pageview_max_scroll_percentage:s<=1?1:_r(a/s,0,1),$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:l<=1?1:_r(c/l,0,1),$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:l<=1?1:_r(u/l,0,1)})}return e&&(r.$prev_pageview_pathname=e),n&&(r.$prev_pageview_duration=(t.getTime()-n.getTime())/1e3),r}}]),t}();function _r(t,e,n){return Math.max(e,Math.min(t,n))}!function(t){t.Popover="popover",t.API="api",t.Widget="widget"}(fr||(fr={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(mr||(mr={})),function(t){t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question"}(gr||(gr={}));var br=function(){function t(){j(this,t),z(this,"events",{}),this.events={}}return H(t,[{key:"on",value:function(t,e){var n=this;return this.events[t]||(this.events[t]=[]),this.events[t].push(e),function(){n.events[t]=n.events[t].filter((function(t){return t!==e}))}}},{key:"emit",value:function(t,e){var n,i=Y(this.events[t]||[]);try{for(i.s();!(n=i.n()).done;)(0,n.value)(e)}catch(t){i.e(t)}finally{i.f()}var r,s=Y(this.events["*"]||[]);try{for(s.s();!(r=s.n()).done;)(0,r.value)(t,e)}catch(t){s.e(t)}finally{s.f()}}}]),t}(),wr=function(){function t(e){var n=this;j(this,t),z(this,"_debugEventEmitter",new br),z(this,"checkStep",(function(t,e){return n.checkStepEvent(t,e)&&n.checkStepUrl(t,e)&&n.checkStepElement(t,e)})),z(this,"checkStepEvent",(function(t,e){return null==e||!e.event||(null==t?void 0:t.event)===(null==e?void 0:e.event)})),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}return H(t,[{key:"init",value:function(){var t,e,n=this;T(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)||null===(e=this.instance)||void 0===e||e._addCaptureHook((function(t,e){n.on(t,e)}))}},{key:"register",value:function(t){var e,n,i=this;if(!T(null===(e=this.instance)||void 0===e?void 0:e._addCaptureHook)&&(t.forEach((function(t){var e,n;null===(e=i.actionRegistry)||void 0===e||e.add(t),null===(n=t.steps)||void 0===n||n.forEach((function(t){var e;null===(e=i.actionEvents)||void 0===e||e.add((null==t?void 0:t.event)||"")}))})),null!==(n=this.instance)&&void 0!==n&&n.autocapture)){var r,s=new Set;t.forEach((function(t){var e;null===(e=t.steps)||void 0===e||e.forEach((function(t){null!=t&&t.selector&&s.add(null==t?void 0:t.selector)}))})),null===(r=this.instance)||void 0===r||r.autocapture.setElementSelectors(s)}}},{key:"on",value:function(t,e){var n,i=this;null!=e&&0!=t.length&&(this.actionEvents.has(t)||this.actionEvents.has(null==e?void 0:e.event))&&this.actionRegistry&&(null===(n=this.actionRegistry)||void 0===n?void 0:n.size)>0&&this.actionRegistry.forEach((function(t){i.checkAction(e,t)&&i._debugEventEmitter.emit("actionCaptured",t.name)}))}},{key:"_addActionHook",value:function(t){this.onAction("actionCaptured",(function(e){return t(e)}))}},{key:"checkAction",value:function(t,e){if(null==(null==e?void 0:e.steps))return!1;var n,i=Y(e.steps);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(this.checkStep(t,r))return!0}}catch(t){i.e(t)}finally{i.f()}return!1}},{key:"onAction",value:function(t,e){return this._debugEventEmitter.on(t,e)}},{key:"checkStepUrl",value:function(e,n){if(null!=n&&n.url){var i,r=null==e||null===(i=e.properties)||void 0===i?void 0:i.$current_url;if(!r||"string"!=typeof r)return!1;if(!t.matchString(r,null==n?void 0:n.url,(null==n?void 0:n.url_matching)||"contains"))return!1}return!0}},{key:"checkStepElement",value:function(e,n){if((null!=n&&n.href||null!=n&&n.tag_name||null!=n&&n.text)&&!this.getElementsList(e).some((function(e){return!(null!=n&&n.href&&!t.matchString(e.href||"",null==n?void 0:n.href,(null==n?void 0:n.href_matching)||"exact")||null!=n&&n.tag_name&&e.tag_name!==(null==n?void 0:n.tag_name)||null!=n&&n.text&&!t.matchString(e.text||"",null==n?void 0:n.text,(null==n?void 0:n.text_matching)||"exact")&&!t.matchString(e.$el_text||"",null==n?void 0:n.text,(null==n?void 0:n.text_matching)||"exact"))})))return!1;if(null!=n&&n.selector){var i,r=null==e||null===(i=e.properties)||void 0===i?void 0:i.$element_selectors;if(!r)return!1;if(!r.includes(null==n?void 0:n.selector))return!1}return!0}},{key:"getElementsList",value:function(t){return null==(null==t?void 0:t.properties.$elements)?[]:null==t?void 0:t.properties.$elements}}],[{key:"matchString",value:function(e,n,r){switch(r){case"regex":return!!i&&fe(e,n);case"exact":return n===e;case"contains":var s=t.escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return fe(e,s);default:return!1}}},{key:"escapeStringRegexp",value:function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}}]),t}(),kr=function(){function t(e){j(this,t),this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}return H(t,[{key:"register",value:function(t){var e;T(null===(e=this.instance)||void 0===e?void 0:e._addCaptureHook)||(this.setupEventBasedSurveys(t),this.setupActionBasedSurveys(t))}},{key:"setupActionBasedSurveys",value:function(t){var e=this,n=t.filter((function(t){var e,n,i,r;return(null===(e=t.conditions)||void 0===e?void 0:e.actions)&&(null===(n=t.conditions)||void 0===n||null===(i=n.actions)||void 0===i||null===(r=i.values)||void 0===r?void 0:r.length)>0}));0!==n.length&&(null==this.actionMatcher&&(this.actionMatcher=new wr(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook((function(t){e.onAction(t)}))),n.forEach((function(t){var n,i,r,s,o,a,l,c,u,d;t.conditions&&null!==(n=t.conditions)&&void 0!==n&&n.actions&&null!==(i=t.conditions)&&void 0!==i&&null!==(r=i.actions)&&void 0!==r&&r.values&&(null===(s=t.conditions)||void 0===s||null===(o=s.actions)||void 0===o||null===(a=o.values)||void 0===a?void 0:a.length)>0&&(null===(l=e.actionMatcher)||void 0===l||l.register(t.conditions.actions.values),null===(c=t.conditions)||void 0===c||null===(u=c.actions)||void 0===u||null===(d=u.values)||void 0===d||d.forEach((function(n){if(n&&n.name){var i=e.actionToSurveys.get(n.name);i&&i.push(t.id),e.actionToSurveys.set(n.name,i||[t.id])}})))})))}},{key:"setupEventBasedSurveys",value:function(t){var e,n=this;0!==t.filter((function(t){var e,n,i,r;return(null===(e=t.conditions)||void 0===e?void 0:e.events)&&(null===(n=t.conditions)||void 0===n||null===(i=n.events)||void 0===i||null===(r=i.values)||void 0===r?void 0:r.length)>0})).length&&(null===(e=this.instance)||void 0===e||e._addCaptureHook((function(t,e){n.onEvent(t,e)})),t.forEach((function(t){var e,i,r;null===(e=t.conditions)||void 0===e||null===(i=e.events)||void 0===i||null===(r=i.values)||void 0===r||r.forEach((function(e){if(e&&e.name){var i=n.eventToSurveys.get(e.name);i&&i.push(t.id),n.eventToSurveys.set(e.name,i||[t.id])}}))})))}},{key:"onEvent",value:function(e,n){var i,r,s=(null===(i=this.instance)||void 0===i||null===(r=i.persistence)||void 0===r?void 0:r.props[Ot])||[];if(t.SURVEY_SHOWN_EVENT_NAME==e&&n&&s.length>0){var o,a=null==n||null===(o=n.properties)||void 0===o?void 0:o.$survey_id;if(a){var l=s.indexOf(a);l>=0&&(s.splice(l,1),this._updateActivatedSurveys(s))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(s.concat(this.eventToSurveys.get(e)||[]))}},{key:"onAction",value:function(t){var e,n,i=(null===(e=this.instance)||void 0===e||null===(n=e.persistence)||void 0===n?void 0:n.props[Ot])||[];this.actionToSurveys.has(t)&&this._updateActivatedSurveys(i.concat(this.actionToSurveys.get(t)||[]))}},{key:"_updateActivatedSurveys",value:function(t){var e,n;null===(e=this.instance)||void 0===e||null===(n=e.persistence)||void 0===n||n.register(z({},Ot,W(new Set(t))))}},{key:"getSurveys",value:function(){var t,e;return(null===(t=this.instance)||void 0===t||null===(e=t.persistence)||void 0===e?void 0:e.props[Ot])||[]}},{key:"getEventToSurveys",value:function(){return this.eventToSurveys}},{key:"_getActionMatcher",value:function(){return this.actionMatcher}}]),t}();z(kr,"SURVEY_SHOWN_EVENT_NAME","survey shown");var xr="[Surveys]",Sr={icontains:function(t){return!!i&&i.location.href.toLowerCase().indexOf(t.toLowerCase())>-1},not_icontains:function(t){return!!i&&-1===i.location.href.toLowerCase().indexOf(t.toLowerCase())},regex:function(t){return!!i&&fe(i.location.href,t)},not_regex:function(t){return!!i&&!fe(i.location.href,t)},exact:function(t){return(null==i?void 0:i.location.href)===t},is_not:function(t){return(null==i?void 0:i.location.href)!==t}},Tr=function(){function t(e){j(this,t),this.instance=e,this._surveyEventReceiver=null}return H(t,[{key:"afterDecideResponse",value:function(t){this._decideServerResponse=!!t.surveys,this.loadIfEnabled()}},{key:"loadIfEnabled",value:function(){var t,e,n,i=this,r=null==m||null===(t=m.__PosthogExtensions__)||void 0===t?void 0:t.generateSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||r||(null==this._surveyEventReceiver&&(this._surveyEventReceiver=new kr(this.instance)),null===(e=m.__PosthogExtensions__)||void 0===e||null===(n=e.loadExternalDependency)||void 0===n||n.call(e,this.instance,"surveys",(function(t){var e,n;if(t)return R.error(xr,"Could not load surveys script",t);i._surveyManager=null===(e=m.__PosthogExtensions__)||void 0===e||null===(n=e.generateSurveys)||void 0===n?void 0:n.call(e,i.instance)})))}},{key:"getSurveys",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.config.disable_surveys)return t([]);null==this._surveyEventReceiver&&(this._surveyEventReceiver=new kr(this.instance));var i=this.instance.get_property(Dt);if(i&&!n)return t(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:function(n){var i;if(200!==n.statusCode||!n.json)return t([]);var r,s=n.json.surveys||[],o=s.filter((function(t){var e,n,i,r,s,o,a,l,c,u,d,h;return(null===(e=t.conditions)||void 0===e?void 0:e.events)&&(null===(n=t.conditions)||void 0===n||null===(i=n.events)||void 0===i?void 0:i.values)&&(null===(r=t.conditions)||void 0===r||null===(s=r.events)||void 0===s||null===(o=s.values)||void 0===o?void 0:o.length)>0||(null===(a=t.conditions)||void 0===a?void 0:a.actions)&&(null===(l=t.conditions)||void 0===l||null===(c=l.actions)||void 0===c?void 0:c.values)&&(null===(u=t.conditions)||void 0===u||null===(d=u.actions)||void 0===d||null===(h=d.values)||void 0===h?void 0:h.length)>0}));return o.length>0&&(null===(r=e._surveyEventReceiver)||void 0===r||r.register(o)),null===(i=e.instance.persistence)||void 0===i||i.register(z({},Dt,s)),t(s)}})}},{key:"getActiveMatchingSurveys",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys((function(n){var i,r=n.filter((function(t){return!(!t.start_date||t.end_date)})).filter((function(t){var e,n,i,r;if(!t.conditions)return!0;var s=null===(e=t.conditions)||void 0===e||!e.url||Sr[null!==(n=null===(i=t.conditions)||void 0===i?void 0:i.urlMatchType)&&void 0!==n?n:"icontains"](t.conditions.url),o=null===(r=t.conditions)||void 0===r||!r.selector||(null==c?void 0:c.querySelector(t.conditions.selector));return s&&o})),s=null===(i=e._surveyEventReceiver)||void 0===i?void 0:i.getSurveys(),o=r.filter((function(t){var n,i,r,o,a,l,c,u,d,h;if(!t.linked_flag_key&&!t.targeting_flag_key&&!t.internal_targeting_flag_key)return!0;var p=!t.linked_flag_key||e.instance.featureFlags.isFeatureEnabled(t.linked_flag_key),f=!t.targeting_flag_key||e.instance.featureFlags.isFeatureEnabled(t.targeting_flag_key),m=(null===(n=t.conditions)||void 0===n?void 0:n.events)&&(null===(i=t.conditions)||void 0===i||null===(r=i.events)||void 0===r?void 0:r.values)&&(null===(o=t.conditions)||void 0===o||null===(a=o.events)||void 0===a?void 0:a.values.length)>0,g=(null===(l=t.conditions)||void 0===l?void 0:l.actions)&&(null===(c=t.conditions)||void 0===c||null===(u=c.actions)||void 0===u?void 0:u.values)&&(null===(d=t.conditions)||void 0===d||null===(h=d.actions)||void 0===h?void 0:h.values.length)>0,v=!m&&!g||(null==s?void 0:s.includes(t.id)),y=e._canActivateRepeatedly(t),_=!(t.internal_targeting_flag_key&&!y)||e.instance.featureFlags.isFeatureEnabled(t.internal_targeting_flag_key);return p&&f&&_&&v}));return t(o)}),n)}},{key:"getNextSurveyStep",value:function(t,e,n){var i,r=t.questions[e],s=e+1;if(null===(i=r.branching)||void 0===i||!i.type)return e===t.questions.length-1?gr.End:s;if(r.branching.type===gr.End)return gr.End;if(r.branching.type===gr.SpecificQuestion){if(Number.isInteger(r.branching.index))return r.branching.index}else if(r.branching.type===gr.ResponseBased){if(r.type===mr.SingleChoice){var o,a,l=r.choices.indexOf("".concat(n));if(null!==(o=r.branching)&&void 0!==o&&null!==(a=o.responseValues)&&void 0!==a&&a.hasOwnProperty(l)){var c=r.branching.responseValues[l];return Number.isInteger(c)?c:c===gr.End?gr.End:s}}else if(r.type===mr.Rating){var u,d;if("number"!=typeof n||!Number.isInteger(n))throw new Error("The response type must be an integer");var h=function(t,e){if(3===e){if(t<1||t>3)throw new Error("The response must be in range 1-3");return 1===t?"negative":2===t?"neutral":"positive"}if(5===e){if(t<1||t>5)throw new Error("The response must be in range 1-5");return t<=2?"negative":3===t?"neutral":"positive"}if(7===e){if(t<1||t>7)throw new Error("The response must be in range 1-7");return t<=3?"negative":4===t?"neutral":"positive"}if(10===e){if(t<0||t>10)throw new Error("The response must be in range 0-10");return t<=6?"detractors":t<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(n,r.scale);if(null!==(u=r.branching)&&void 0!==u&&null!==(d=u.responseValues)&&void 0!==d&&d.hasOwnProperty(h)){var p=r.branching.responseValues[h];return Number.isInteger(p)?p:p===gr.End?gr.End:s}}return s}return R.warn(xr,"Falling back to next question index due to unexpected branching type"),s}},{key:"_canActivateRepeatedly",value:function(t){var e;return D(null===(e=m.__PosthogExtensions__)||void 0===e?void 0:e.canActivateRepeatedly)?(R.warn(xr,"canActivateRepeatedly is not defined, must init before calling"),!1):m.__PosthogExtensions__.canActivateRepeatedly(t)}},{key:"canRenderSurvey",value:function(t){var e=this;D(this._surveyManager)?R.warn(xr,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys((function(n){var i=n.filter((function(e){return e.id===t}))[0];e._surveyManager.canRenderSurvey(i)}))}},{key:"renderSurvey",value:function(t,e){var n=this;D(this._surveyManager)?R.warn(xr,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys((function(i){var r=i.filter((function(e){return e.id===t}))[0];n._surveyManager.renderSurvey(r,null==c?void 0:c.querySelector(e))}))}}]),t}(),Cr=function(){function t(e){var n,i,r=this;j(this,t),z(this,"serverLimits",{}),z(this,"lastEventRateLimited",!1),z(this,"checkForLimiting",(function(t){var e=t.text;if(e&&e.length)try{(JSON.parse(e).quota_limited||[]).forEach((function(t){R.info("[RateLimiter] ".concat(t||"events"," is quota limited.")),r.serverLimits[t]=(new Date).getTime()+6e4}))}catch(t){return void R.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(null==t?void 0:t.message,'"'),{text:e})}})),this.instance=e,this.captureEventsPerSecond=(null===(n=e.config.rate_limiting)||void 0===n?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null===(i=e.config.rate_limiting)||void 0===i?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}return H(t,[{key:"clientRateLimitContext",value:function(){var t,e,n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(new Date).getTime(),s=null!==(t=null===(e=this.instance.persistence)||void 0===e?void 0:e.get_property(Rt))&&void 0!==t?t:{tokens:this.captureEventsBurstLimit,last:r};s.tokens+=(r-s.last)/1e3*this.captureEventsPerSecond,s.last=r,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var o=s.tokens<1;return o||i||(s.tokens=Math.max(0,s.tokens-1)),!o||this.lastEventRateLimited||i||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,null===(n=this.instance.persistence)||void 0===n||n.set_property(Rt,s),{isRateLimited:o,remainingTokens:s.tokens}}},{key:"isServerRateLimited",value:function(t){var e=this.serverLimits[t||"events"]||!1;return!1!==e&&(new Date).getTime()<e}}]),t}(),Er=function(){return F({initialPathName:(null==u?void 0:u.pathname)||"",referringDomain:fn.referringDomain()},fn.campaignParams())},Ir=function(){function t(e,n,i){var r=this;j(this,t),z(this,"_onSessionIdCallback",(function(t){var e=r._getStoredProps();if(!e||e.sessionId!==t){var n={sessionId:t,props:r._sessionSourceParamGenerator()};r._persistence.register(z({},Pt,n))}})),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=i||Er,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return H(t,[{key:"_getStoredProps",value:function(){return this._persistence.props[Pt]}},{key:"getSessionProps",value:function(){var t,e=null===(t=this._getStoredProps())||void 0===t?void 0:t.props;return e?{$client_session_initial_referring_host:e.referringDomain,$client_session_initial_pathname:e.initialPathName,$client_session_initial_utm_source:e.utm_source,$client_session_initial_utm_campaign:e.utm_campaign,$client_session_initial_utm_medium:e.utm_medium,$client_session_initial_utm_content:e.utm_content,$client_session_initial_utm_term:e.utm_term}:{}}}]),t}(),Dr=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],Or=function(t,e){if(!t)return!1;var n=t.toLowerCase();return Dr.concat(e||[]).some((function(t){var e=t.toLowerCase();return-1!==n.indexOf(e)}))},Mr=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&Or(n,e))return!0;try{var i=null==t?void 0:t.userAgentData;if(null!=i&&i.brands&&i.brands.some((function(t){return Or(null==t?void 0:t.brand,e)})))return!0}catch(t){}return!!t.webdriver},Ar=function(){function t(){j(this,t),this.clicks=[]}return H(t,[{key:"isRageClick",value:function(t,e,n){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(t-i.x)+Math.abs(e-i.y)<30&&n-i.timestamp<1e3){if(this.clicks.push({x:t,y:e,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:t,y:e,timestamp:n}];return!1}}]),t}();function Pr(t){var e;return t.id===jt||!(null===(e=t.closest)||void 0===e||!e.call(t,"#"+jt))}var Rr=function(){function t(e){var n,r=this;j(this,t),z(this,"rageclicks",new Ar),z(this,"_enabledServerSide",!1),z(this,"_initialized",!1),z(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!(null===(n=this.instance.persistence)||void 0===n||!n.props[ht]),null==i||i.addEventListener("beforeunload",(function(){r.flush()}))}return H(t,[{key:"flushIntervalMilliseconds",get:function(){var t=5e3;return x(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}},{key:"isEnabled",get:function(){return T(this.instance.config.capture_heatmaps)?T(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}},{key:"startIfEnabled",value:function(){if(this.isEnabled){if(this._initialized)return;R.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var t;clearInterval(null!==(t=this._flushInterval)&&void 0!==t?t:void 0),this.getAndClearBuffer()}}},{key:"afterDecideResponse",value:function(t){var e=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register(z({},ht,e)),this._enabledServerSide=e,this.startIfEnabled()}},{key:"getAndClearBuffer",value:function(){var t=this.buffer;return this.buffer=void 0,t}},{key:"_setupListeners",value:function(){var t=this;i&&c&&(ot(c,"click",(function(e){return t._onClick(e||(null==i?void 0:i.event))}),!1,!0),ot(c,"mousemove",(function(e){return t._onMouseMove(e||(null==i?void 0:i.event))}),!1,!0),this._initialized=!0)}},{key:"_getProperties",value:function(t,e){var n=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(t,e,n){for(var r=t;r&&En(r)&&!In(r,"body");){if(r===n)return!1;if(Z(e,null==i?void 0:i.getComputedStyle(r).position))return!0;r=An(r)}return!1}(Cn(t),["fixed","sticky"],s);return{x:t.clientX+(o?0:r),y:t.clientY+(o?0:n),target_fixed:o,type:e}}},{key:"_onClick",value:function(t){var e;if(!Pr(t.target)){var n=this._getProperties(t,"click");null!==(e=this.rageclicks)&&void 0!==e&&e.isRageClick(t.clientX,t.clientY,(new Date).getTime())&&this._capture(F(F({},n),{},{type:"rageclick"})),this._capture(n)}}},{key:"_onMouseMove",value:function(t){var e=this;Pr(t.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout((function(){e._capture(e._getProperties(t,"mousemove"))}),500))}},{key:"_capture",value:function(t){if(i){var e=i.location.href;this.buffer=this.buffer||{},this.buffer[e]||(this.buffer[e]=[]),this.buffer[e].push(t)}}},{key:"flush",value:function(){this.buffer&&!S(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}]),t}(),Lr=function(){function t(e){var n=this;j(this,t),z(this,"_updateScrollData",(function(){var t,e,i,r;n.context||(n.context={});var s=n.scrollElement(),o=n.scrollY(),a=s?Math.max(0,s.scrollHeight-s.clientHeight):0,l=o+((null==s?void 0:s.clientHeight)||0),c=(null==s?void 0:s.scrollHeight)||0;n.context.lastScrollY=Math.ceil(o),n.context.maxScrollY=Math.max(o,null!==(t=n.context.maxScrollY)&&void 0!==t?t:0),n.context.maxScrollHeight=Math.max(a,null!==(e=n.context.maxScrollHeight)&&void 0!==e?e:0),n.context.lastContentY=l,n.context.maxContentY=Math.max(l,null!==(i=n.context.maxContentY)&&void 0!==i?i:0),n.context.maxContentHeight=Math.max(c,null!==(r=n.context.maxContentHeight)&&void 0!==r?r:0)})),this.instance=e}return H(t,[{key:"getContext",value:function(){return this.context}},{key:"resetContext",value:function(){var t=this.context;return setTimeout(this._updateScrollData,0),t}},{key:"startMeasuringScrollPosition",value:function(){null==i||i.addEventListener("scroll",this._updateScrollData,!0),null==i||i.addEventListener("scrollend",this._updateScrollData,!0),null==i||i.addEventListener("resize",this._updateScrollData)}},{key:"scrollElement",value:function(){if(!this.instance.config.scroll_root_selector)return null==i?void 0:i.document.documentElement;var t,e=Y(w(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector]);try{for(e.s();!(t=e.n()).done;){var n=t.value,r=null==i?void 0:i.document.querySelector(n);if(r)return r}}catch(t){e.e(t)}finally{e.f()}}},{key:"scrollY",value:function(){if(this.instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return i&&(i.scrollY||i.pageYOffset||i.document.documentElement.scrollTop)||0}},{key:"scrollX",value:function(){if(this.instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return i&&(i.scrollX||i.pageXOffset||i.document.documentElement.scrollLeft)||0}}]),t}(),Nr="$copy_autocapture";function Fr(t,e){return e.length>t?e.slice(0,t)+"...":e}var qr,jr=function(){function t(e){j(this,t),z(this,"_initialized",!1),z(this,"_isDisabledServerSide",null),z(this,"rageclicks",new Ar),z(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}return H(t,[{key:"config",get:function(){var t,e,n=x(this.instance.config.autocapture)?this.instance.config.autocapture:{};return n.url_allowlist=null===(t=n.url_allowlist)||void 0===t?void 0:t.map((function(t){return new RegExp(t)})),n.url_ignorelist=null===(e=n.url_ignorelist)||void 0===e?void 0:e.map((function(t){return new RegExp(t)})),n}},{key:"_addDomEventHandlers",value:function(){var t=this;if(this.isBrowserSupported()){if(i&&c){var e=function(e){e=e||(null==i?void 0:i.event);try{t._captureEvent(e)}catch(t){R.error("Failed to capture event",t)}},n=function(e){e=e||(null==i?void 0:i.event),t._captureEvent(e,Nr)};ot(c,"submit",e,!1,!0),ot(c,"change",e,!1,!0),ot(c,"click",e,!1,!0),this.config.capture_copied_text&&(ot(c,"copy",n,!1,!0),ot(c,"cut",n,!1,!0))}}else R.info("Disabling Automatic Event Collection because this browser is not supported")}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}},{key:"afterDecideResponse",value:function(t){t.elementsChainAsString&&(this._elementsChainAsString=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register(z({},dt,!!t.autocapture_opt_out)),this._isDisabledServerSide=!!t.autocapture_opt_out,this.startIfEnabled()}},{key:"setElementSelectors",value:function(t){this._elementSelectors=t}},{key:"getElementSelectors",value:function(t){var e,n=[];return null===(e=this._elementSelectors)||void 0===e||e.forEach((function(e){var i=null==c?void 0:c.querySelectorAll(e);null==i||i.forEach((function(i){t===i&&n.push(e)}))})),n}},{key:"isEnabled",get:function(){var t,e,n=null===(t=this.instance.persistence)||void 0===t?void 0:t.props[dt],i=this._isDisabledServerSide;if(I(i)&&!M(n)&&!this.instance.config.advanced_disable_decide)return!1;var r=null!==(e=this._isDisabledServerSide)&&void 0!==e?e:!!n;return!!this.instance.config.autocapture&&!r}},{key:"_previousElementSibling",value:function(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do{e=e.previousSibling}while(e&&!En(e));return e}},{key:"_getAugmentPropertiesFromElement",value:function(t){if(!Rn(t))return{};var e={};return K(t.attributes,(function(t){if(t.name&&0===t.name.indexOf("data-ph-capture-attribute")){var n=t.name.replace("data-ph-capture-attribute-",""),i=t.value;n&&i&&zn(i)&&(e[n]=i)}})),e}},{key:"_getPropertiesFromElement",value:function(t,e,n){var i,r=t.tagName.toLowerCase(),s={tag_name:r};Mn.indexOf(r)>-1&&!n&&("a"===r.toLowerCase()||"button"===r.toLowerCase()?s.$el_text=Fr(1024,Bn(t)):s.$el_text=Fr(1024,Tn(t)));var o=xn(t);o.length>0&&(s.classes=o.filter((function(t){return""!==t})));var a=null===(i=this.config)||void 0===i?void 0:i.element_attribute_ignorelist;K(t.attributes,(function(n){var i;if((!Ln(t)||-1!==["name","id","class","aria-label"].indexOf(n.name))&&(null==a||!a.includes(n.name))&&!e&&zn(n.value)&&(i=n.name,!C(i)||"_ngcontent"!==i.substring(0,10)&&"_nghost"!==i.substring(0,7))){var r=n.value;"class"===n.name&&(r=wn(r).join(" ")),s["attr__"+n.name]=Fr(1024,r)}}));for(var l=1,c=1,u=t;u=this._previousElementSibling(u);)l++,u.tagName===t.tagName&&c++;return s.nth_child=l,s.nth_of_type=c,s}},{key:"_getDefaultProperties",value:function(t){return{$event_type:t,$ce_version:1}}},{key:"_captureEvent",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$autocapture";if(this.isEnabled){var r,s=Cn(t);Dn(s)&&(s=s.parentNode||null),"$autocapture"===n&&"click"===t.type&&t instanceof MouseEvent&&this.instance.config.rageclick&&null!==(r=this.rageclicks)&&void 0!==r&&r.isRageClick(t.clientX,t.clientY,(new Date).getTime())&&this._captureEvent(t,"$rageclick");var o=n===Nr;if(s&&Pn(s,t,this.config,o,o?["copy","cut"]:void 0)){for(var a,l,c=[s],u=s;u.parentNode&&!In(u,"body");)On(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,h,p=[],f={},m=!1;if(K(c,(function(t){var n=Rn(t);"a"===t.tagName.toLowerCase()&&(d=t.getAttribute("href"),d=n&&zn(d)&&d),Z(xn(t),"ph-no-capture")&&(m=!0),p.push(e._getPropertiesFromElement(t,e.instance.config.mask_all_element_attributes,e.instance.config.mask_all_text));var i=e._getAugmentPropertiesFromElement(t);J(f,i)})),this.instance.config.mask_all_text||("a"===s.tagName.toLowerCase()||"button"===s.tagName.toLowerCase()?p[0].$el_text=Bn(s):p[0].$el_text=Tn(s)),d){var g,v;p[0].attr__href=d;var y=null===(g=pe(d))||void 0===g?void 0:g.host,_=null==i||null===(v=i.location)||void 0===v?void 0:v.host;y&&_&&y!==_&&(h=d)}if(m)return!1;var b=J(this._getDefaultProperties(t.type),this._elementsChainAsString?{$elements_chain:Un(p)}:{$elements:p},null!==(a=p[0])&&void 0!==a&&a.$el_text?{$el_text:null===(l=p[0])||void 0===l?void 0:l.$el_text}:{},h&&"click"===t.type?{$external_click_url:h}:{},f),w=this.getElementSelectors(s);if(w&&w.length>0&&(b.$element_selectors=w),n===Nr){var k,x=Sn(null==i||null===(k=i.getSelection())||void 0===k?void 0:k.toString()),S=t.type||"clipboard";if(!x)return!1;b.$selected_content=x,b.$copy_type=S}return this.instance.capture(n,b),!0}}}},{key:"isBrowserSupported",value:function(){return k(null==c?void 0:c.querySelectorAll)}}]),t}(),$r=function(){function t(e){var n=this;j(this,t),z(this,"_restoreXHRPatch",void 0),z(this,"_restoreFetchPatch",void 0),z(this,"_startCapturing",(function(){var t,e,i,r;T(n._restoreXHRPatch)&&(null===(t=m.__PosthogExtensions__)||void 0===t||null===(e=t.tracingHeadersPatchFns)||void 0===e||e._patchXHR(n.instance.sessionManager)),T(n._restoreFetchPatch)&&(null===(i=m.__PosthogExtensions__)||void 0===i||null===(r=i.tracingHeadersPatchFns)||void 0===r||r._patchFetch(n.instance.sessionManager))})),this.instance=e}return H(t,[{key:"_loadScript",value:function(t){var e,n,i;null!==(e=m.__PosthogExtensions__)&&void 0!==e&&e.tracingHeadersPatchFns&&t(),null===(n=m.__PosthogExtensions__)||void 0===n||null===(i=n.loadExternalDependency)||void 0===i||i.call(n,this.instance,"tracing-headers",(function(e){if(e)return R.error("[TRACING-HEADERS] failed to load script",e);t()}))}},{key:"startIfEnabledOrStop",value:function(){var t,e;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):(null===(t=this._restoreXHRPatch)||void 0===t||t.call(this),null===(e=this._restoreFetchPatch)||void 0===e||e.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}]),t}();!function(t){t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED"}(qr||(qr={}));var Hr=function(){function t(e){j(this,t),this.instance=e}return H(t,[{key:"config",get:function(){return this.instance.config}},{key:"consent",get:function(){return this.getDnt()?qr.DENIED:this.storedConsent}},{key:"isOptedOut",value:function(){return this.consent===qr.DENIED||this.consent===qr.PENDING&&this.config.opt_out_capturing_by_default}},{key:"isOptedIn",value:function(){return!this.isOptedOut()}},{key:"optInOut",value:function(t){this.storage.set(this.storageKey,t?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}},{key:"reset",value:function(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}},{key:"storageKey",get:function(){var t=this.instance.config,e=t.token;return(t.opt_out_capturing_cookie_prefix||"__ph_opt_in_out_")+e}},{key:"storedConsent",get:function(){var t=this.storage.get(this.storageKey);return"1"===t?qr.GRANTED:"0"===t?qr.DENIED:qr.PENDING}},{key:"storage",get:function(){if(!this._storage){var t=this.config.opt_out_capturing_persistence_type;this._storage="localStorage"===t?se:ie;var e="localStorage"===t?ie:se;e.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut("1"===e.get(this.storageKey)),e.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}},{key:"getDnt",value:function(){return!!this.config.respect_dnt&&!!at([null==l?void 0:l.doNotTrack,null==l?void 0:l.msDoNotTrack,m.doNotTrack],(function(t){return Z([!0,1,"1","yes"],t)}))}}]),t}(),zr="[Exception Autocapture]",Br=function(){function t(e){var n,r=this;j(this,t),z(this,"originalOnUnhandledRejectionHandler",void 0),z(this,"startCapturing",(function(){var t,e,n,s;if(i&&r.isEnabled&&!r.hasHandlers&&!r.isCapturing){var o=null===(t=m.__PosthogExtensions__)||void 0===t||null===(e=t.errorWrappingFunctions)||void 0===e?void 0:e.wrapOnError,a=null===(n=m.__PosthogExtensions__)||void 0===n||null===(s=n.errorWrappingFunctions)||void 0===s?void 0:s.wrapUnhandledRejection;if(o&&a)try{r.unwrapOnError=o(r.captureException.bind(r)),r.unwrapUnhandledRejection=a(r.captureException.bind(r))}catch(t){R.error(zr+" failed to start",t),r.stopCapturing()}else R.error(zr+" failed to load error wrapping functions - cannot start")}})),this.instance=e,this.remoteEnabled=!(null===(n=this.instance.persistence)||void 0===n||!n.props[pt]),this.startIfEnabled()}return H(t,[{key:"isEnabled",get:function(){var t;return null!==(t=this.remoteEnabled)&&void 0!==t&&t}},{key:"isCapturing",get:function(){var t;return!(null==i||null===(t=i.onerror)||void 0===t||!t.__POSTHOG_INSTRUMENTED__)}},{key:"hasHandlers",get:function(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this.isCapturing&&(R.info(zr+" enabled, starting..."),this.loadScript(this.startCapturing))}},{key:"loadScript",value:function(t){var e,n;this.hasHandlers&&t(),null===(e=m.__PosthogExtensions__)||void 0===e||null===(n=e.loadExternalDependency)||void 0===n||n.call(e,this.instance,"exception-autocapture",(function(e){if(e)return R.error(zr+" failed to load script",e);t()}))}},{key:"stopCapturing",value:function(){var t,e;null===(t=this.unwrapOnError)||void 0===t||t.call(this),null===(e=this.unwrapUnhandledRejection)||void 0===e||e.call(this)}},{key:"afterDecideResponse",value:function(t){var e=t.autocaptureExceptions;this.remoteEnabled=!!e||!1,this.instance.persistence&&this.instance.persistence.register(z({},pt,this.remoteEnabled)),this.startIfEnabled()}},{key:"captureException",value:function(t){var e=this.instance.requestRouter.endpointFor("ui");t.$exception_personURL="".concat(e,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(t)}}]),t}(),Wr=9e5,Ur="[Web Vitals]",Qr=function(){function t(e){var n,i=this;j(this,t),z(this,"_enabledServerSide",!1),z(this,"_initialized",!1),z(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),z(this,"_flushToCapture",(function(){clearTimeout(i._delayedFlushTimer),0!==i.buffer.metrics.length&&(i.instance.capture("$web_vitals",i.buffer.metrics.reduce((function(t,e){var n;return F(F({},t),{},(z(n={},"$web_vitals_".concat(e.name,"_event"),F({},e)),z(n,"$web_vitals_".concat(e.name,"_value"),e.value),n))}),{})),i.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})})),z(this,"_addToBuffer",(function(t){var e,n=null===(e=i.instance.sessionManager)||void 0===e?void 0:e.checkAndGetSessionAndWindowId(!0);if(T(n))R.error(Ur+"Could not read session ID. Dropping metrics!");else{i.buffer=i.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var r=i._currentURL();T(r)||(D(null==t?void 0:t.name)||D(null==t?void 0:t.value)?R.error(Ur+"Invalid metric received",t):i._maxAllowedValue&&t.value>=i._maxAllowedValue?R.error(Ur+"Ignoring metric with value >= "+i._maxAllowedValue,t):(i.buffer.url!==r&&(i._flushToCapture(),i._delayedFlushTimer=setTimeout(i._flushToCapture,i.flushToCaptureTimeoutMs)),T(i.buffer.url)&&(i.buffer.url=r),i.buffer.firstMetricTimestamp=T(i.buffer.firstMetricTimestamp)?Date.now():i.buffer.firstMetricTimestamp,i.buffer.metrics.push(F(F({},t),{},{$current_url:r,$session_id:n.sessionId,$window_id:n.windowId,timestamp:Date.now()})),i.buffer.metrics.length===i.allowedMetrics.length&&i._flushToCapture()))}})),z(this,"_startCapturing",(function(){var t,e,n,r,s=m.__PosthogExtensions__;if(!T(s)&&!T(s.postHogWebVitalsCallbacks)){var o=s.postHogWebVitalsCallbacks;t=o.onLCP,e=o.onCLS,n=o.onFCP,r=o.onINP}t&&e&&n&&r?(i.allowedMetrics.indexOf("LCP")>-1&&t(i._addToBuffer.bind(i)),i.allowedMetrics.indexOf("CLS")>-1&&e(i._addToBuffer.bind(i)),i.allowedMetrics.indexOf("FCP")>-1&&n(i._addToBuffer.bind(i)),i.allowedMetrics.indexOf("INP")>-1&&r(i._addToBuffer.bind(i)),i._initialized=!0):R.error(Ur+"web vitals callbacks not loaded - not starting")})),this.instance=e,this._enabledServerSide=!(null===(n=this.instance.persistence)||void 0===n||!n.props[mt]),this.startIfEnabled()}return H(t,[{key:"allowedMetrics",get:function(){var t,e,n=x(this.instance.config.capture_performance)?null===(t=this.instance.config.capture_performance)||void 0===t?void 0:t.web_vitals_allowed_metrics:void 0;return T(n)?(null===(e=this.instance.persistence)||void 0===e?void 0:e.props[gt])||["CLS","FCP","INP","LCP"]:n}},{key:"flushToCaptureTimeoutMs",get:function(){return(x(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}},{key:"_maxAllowedValue",get:function(){var t=x(this.instance.config.capture_performance)&&O(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:Wr;return 0<t&&t<=6e4?Wr:t}},{key:"isEnabled",get:function(){var t=x(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return M(t)?t:this._enabledServerSide}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(R.info(Ur+" enabled, starting..."),this.loadScript(this._startCapturing))}},{key:"afterDecideResponse",value:function(t){var e=x(t.capturePerformance)&&!!t.capturePerformance.web_vitals,n=x(t.capturePerformance)?t.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register(z({},mt,e)),this.instance.persistence.register(z({},gt,n))),this._enabledServerSide=e,this.startIfEnabled()}},{key:"loadScript",value:function(t){var e,n,i;null!==(e=m.__PosthogExtensions__)&&void 0!==e&&e.postHogWebVitalsCallbacks&&t(),null===(n=m.__PosthogExtensions__)||void 0===n||null===(i=n.loadExternalDependency)||void 0===i||i.call(n,this.instance,"web-vitals",(function(e){e?R.error(Ur+" failed to load script",e):t()}))}},{key:"_currentURL",value:function(){var t=i?i.location.href:void 0;return t||R.error(Ur+"Could not determine current URL"),t}}]),t}(),Yr={icontains:function(t,e){return!!i&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1},not_icontains:function(t,e){return!!i&&-1===e.href.toLowerCase().indexOf(t.toLowerCase())},regex:function(t,e){return!!i&&fe(e.href,t)},not_regex:function(t,e){return!!i&&!fe(e.href,t)},exact:function(t,e){return e.href===t},is_not:function(t,e){return e.href!==t}},Vr=function(){function t(e){var n=this;j(this,t),z(this,"getWebExperimentsAndEvaluateDisplayLogic",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.getWebExperiments((function(e){t.logInfo("retrieved web experiments from the server"),n._flagToExperiments=new Map,e.forEach((function(e){if(e.feature_flag_key&&n._featureFlags&&n._featureFlags[e.feature_flag_key]){var i;n._flagToExperiments&&(t.logInfo("setting flag key ",e.feature_flag_key," to web experiment ",e),null===(i=n._flagToExperiments)||void 0===i||i.set(e.feature_flag_key,e));var r=n._featureFlags[e.feature_flag_key];r&&e.variants[r]&&n.applyTransforms(e.name,r,e.variants[r].transforms)}else if(e.variants)for(var s in e.variants){var o=e.variants[s];t.matchesTestVariant(o)&&n.applyTransforms(e.name,s,o.transforms)}}))}),e)})),this.instance=e,this.instance.onFeatureFlags&&this.instance.onFeatureFlags((function(t){n.applyFeatureFlagChanges(t)})),this._flagToExperiments=new Map}return H(t,[{key:"applyFeatureFlagChanges",value:function(e){var n=this;D(this._flagToExperiments)||this.instance.config.disable_web_experiments||(t.logInfo("applying feature flags",e),e.forEach((function(t){var e;if(n._flagToExperiments&&null!==(e=n._flagToExperiments)&&void 0!==e&&e.has(t)){var i,r=n.instance.getFeatureFlag(t),s=null===(i=n._flagToExperiments)||void 0===i?void 0:i.get(t);r&&null!=s&&s.variants[r]&&n.applyTransforms(s.name,r,s.variants[r].transforms)}})))}},{key:"afterDecideResponse",value:function(e){this._is_bot()?t.logInfo("Refusing to render web experiment since the viewer is a likely bot"):(this._featureFlags=e.featureFlags,this.loadIfEnabled(),this.previewWebExperiment())}},{key:"previewWebExperiment",value:function(){var e=this,n=t.getWindowLocation();if(null!=n&&n.search){var i=me(null==n?void 0:n.search,"__experiment_id"),r=me(null==n?void 0:n.search,"__experiment_variant");i&&r&&(t.logInfo("previewing web experiments ".concat(i," && ").concat(r)),this.getWebExperiments((function(t){e.showPreviewWebExperiment(parseInt(i),r,t)}),!1,!0))}}},{key:"loadIfEnabled",value:function(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}},{key:"getWebExperiments",value:function(t,e,n){if(this.instance.config.disable_web_experiments&&!n)return t([]);var i=this.instance.get_property("$web_experiments");if(i&&!e)return t(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/web_experiments/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:function(e){if(200!==e.statusCode||!e.json)return t([]);var n=e.json.experiments||[];return t(n)}})}},{key:"showPreviewWebExperiment",value:function(e,n,i){var r=i.filter((function(t){return t.id===e}));r&&r.length>0&&(t.logInfo("Previewing web experiment [".concat(r[0].name,"] with variant [").concat(n,"]")),this.applyTransforms(r[0].name,n,r[0].variants[n].transforms,!0))}},{key:"applyTransforms",value:function(e,n,i,r){var s,o=this;this._is_bot()?t.logInfo("Refusing to render web experiment since the viewer is a likely bot"):"control"!==n?i.forEach((function(i){if(i.selector){var s;t.logInfo("applying transform of variant ".concat(n," for experiment ").concat(e," "),i);var a,l=0,c=null===(s=document)||void 0===s?void 0:s.querySelectorAll(i.selector);null==c||c.forEach((function(t){var e=t;l+=1,i.attributes&&i.attributes.forEach((function(t){switch(t.name){case"text":e.innerText=t.value;break;case"html":e.innerHTML=t.value;break;case"cssClass":e.className=t.value;break;default:e.setAttribute(t.name,t.value)}})),i.text&&(e.innerText=i.text),i.html&&(e.parentElement?e.parentElement.innerHTML=i.html:e.innerHTML=i.html),i.css&&e.setAttribute("style",i.css)})),o.instance&&o.instance.capture&&o.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_variant:n,$web_experiment_preview:r,$web_experiment_document_url:null===(a=t.getWindowLocation())||void 0===a?void 0:a.href,$web_experiment_elements_modified:l})}})):(t.logInfo("Control variants leave the page unmodified."),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_preview:r,$web_experiment_variant:n,$web_experiment_document_url:null===(s=t.getWindowLocation())||void 0===s?void 0:s.href,$web_experiment_elements_modified:0}))}},{key:"_is_bot",value:function(){return l&&this.instance?Mr(l,this.instance.config.custom_blocked_useragents):void 0}}],[{key:"matchesTestVariant",value:function(e){return!D(e.conditions)&&t.matchUrlConditions(e)&&t.matchUTMConditions(e)}},{key:"matchUrlConditions",value:function(e){var n;if(D(e.conditions)||D(null===(n=e.conditions)||void 0===n?void 0:n.url))return!0;var i,r,s,o=t.getWindowLocation();return!!o&&(null===(i=e.conditions)||void 0===i||!i.url||Yr[null!==(r=null===(s=e.conditions)||void 0===s?void 0:s.urlMatchType)&&void 0!==r?r:"icontains"](e.conditions.url,o))}},{key:"getWindowLocation",value:function(){return null==i?void 0:i.location}},{key:"matchUTMConditions",value:function(t){var e;if(D(t.conditions)||D(null===(e=t.conditions)||void 0===e?void 0:e.utm))return!0;var n=fn.campaignParams();if(n.utm_source){var i,r,s,o,a,l,c,u,d,h,p,f,m,g,v,y,_=null===(i=t.conditions)||void 0===i||null===(r=i.utm)||void 0===r||!r.utm_campaign||(null===(s=t.conditions)||void 0===s||null===(o=s.utm)||void 0===o?void 0:o.utm_campaign)==n.utm_campaign,b=null===(a=t.conditions)||void 0===a||null===(l=a.utm)||void 0===l||!l.utm_source||(null===(c=t.conditions)||void 0===c||null===(u=c.utm)||void 0===u?void 0:u.utm_source)==n.utm_source,w=null===(d=t.conditions)||void 0===d||null===(h=d.utm)||void 0===h||!h.utm_medium||(null===(p=t.conditions)||void 0===p||null===(f=p.utm)||void 0===f?void 0:f.utm_medium)==n.utm_medium,k=null===(m=t.conditions)||void 0===m||null===(g=m.utm)||void 0===g||!g.utm_term||(null===(v=t.conditions)||void 0===v||null===(y=v.utm)||void 0===y?void 0:y.utm_term)==n.utm_term;return _&&w&&k&&b}return!1}},{key:"logInfo",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];R.info("[WebExperiments] ".concat(t),n)}}]),t}(),Gr=function(){function t(e){var n;j(this,t),this.instance=e,this._endpointSuffix=(null===(n=this.instance.persistence)||void 0===n?void 0:n.props[ft])||"/e/"}return H(t,[{key:"endpoint",get:function(){return this.instance.requestRouter.endpointFor("api",this._endpointSuffix)}},{key:"afterDecideResponse",value:function(t){var e=t.autocaptureExceptions;this._endpointSuffix=x(e)&&e.endpoint||"/e/",this.instance.persistence&&this.instance.persistence.register(z({},ft,this._endpointSuffix))}},{key:"sendExceptionEvent",value:function(t){this.instance.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent",_url:this.endpoint})}}]),t}(),Xr={},Kr=function(){},Jr="posthog",Zr=!tr&&-1===(null==f?void 0:f.indexOf("MSIE"))&&-1===(null==f?void 0:f.indexOf("Mozilla")),ts=function(){var t,e,n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=null==c?void 0:c.location,n=null==e?void 0:e.hostname,!!C(n)&&"herokuapp.com"!==n.split(".").slice(-2).join(".")),persistence:"localStorage+cookie",persistence_name:"",loaded:Kr,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:u&&C(null==u?void 0:u.search)&&-1!==u.search.indexOf("__posthog_debug=true")||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==i||null===(t=i.location)||void 0===t?void 0:t.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:function(t){var e="Bad HTTP status: "+t.statusCode+" "+t.text;R.error(e)},get_device_id:function(t){return t},_onCapture:Kr,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"always",__add_tracing_headers:!1}},es=function(t){var e={};T(t.process_person)||(e.person_profiles=t.process_person),T(t.xhr_headers)||(e.request_headers=t.xhr_headers),T(t.cookie_name)||(e.persistence_name=t.cookie_name),T(t.disable_cookie)||(e.disable_persistence=t.disable_cookie);var n=J({},e,t);return w(t.property_blacklist)&&(T(t.property_denylist)?n.property_denylist=t.property_blacklist:w(t.property_denylist)?n.property_denylist=[].concat(W(t.property_blacklist),W(t.property_denylist)):R.error("Invalid value for property_denylist config: "+t.property_denylist)),n},ns=function(){function t(){j(this,t),z(this,"__forceAllowLocalhost",!1)}return H(t,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(t){R.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}}]),t}(),is=function(){function t(){var e=this;j(this,t),z(this,"webPerformance",new ns),z(this,"version",g.LIB_VERSION),z(this,"_internalEventEmitter",new br),this.config=ts(),this.decideEndpointWasHit=!1,this.SentryIntegration=vr,this.sentryIntegration=function(t){return function(t,e){var n=pr(t,e);return{name:hr,processEvent:function(t){return n(t)}}}(e,t)},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this.featureFlags=new Ut(this),this.toolbar=new Ji(this),this.scrollManager=new Lr(this),this.pageViewManager=new yr(this),this.surveys=new Tr(this),this.experiments=new Vr(this),this.exceptions=new Gr(this),this.rateLimiter=new Cr(this),this.requestRouter=new dr(this),this.consent=new Hr(this),this.people={set:function(t,n,i){var r=C(t)?z({},t,n):t;e.setPersonProperties(r),null==i||i({})},set_once:function(t,n,i){var r=C(t)?z({},t,n):t;e.setPersonProperties(void 0,r),null==i||i({})}},this.on("eventCaptured",(function(t){return R.info('send "'.concat(null==t?void 0:t.event,'"'),t)}))}return H(t,[{key:"init",value:function(e,n,i){if(i&&i!==Jr){var r,s=null!==(r=Xr[i])&&void 0!==r?r:new t;return s._init(e,n,i),Xr[i]=s,Xr[Jr][i]=s,s}return this._init(e,n,i)}},{key:"_init",value:function(t){var e,n,r=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(T(t)||E(t))return R.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return R.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],this.set_config(J({},ts(),es(s),{name:o,token:t})),this.config.on_xhr_error&&R.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=s.disable_compression?void 0:et.GZipJS,this.persistence=new gn(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new gn(F(F({},this.config),{},{persistence:"sessionStorage"}));var a=F({},this.persistence.props),l=F({},this.sessionPersistence.props);if(this._requestQueue=new Zi((function(t){return r._send_retriable_request(t)})),this._retryQueue=new ar(this),this.__request_queue=[],this.sessionManager=new cr(this.config,this.persistence),this.sessionPropsManager=new Ir(this.sessionManager,this.persistence),new $r(this).startIfEnabledOrStop(),this.sessionRecording=new Vi(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new jr(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Rr(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new Qr(this),this.exceptionObserver=new Br(this),this.exceptionObserver.startIfEnabled(),g.DEBUG=g.DEBUG||this.config.debug,g.DEBUG&&R.info("Starting in debug mode",{this:this,config:s,thisC:F({},this.config),p:a,s:l}),this._sync_opt_out_with_persistence(),void 0!==(null===(e=s.bootstrap)||void 0===e?void 0:e.distinctID)){var c,u,d=this.config.get_device_id(Zt()),h=null!==(c=s.bootstrap)&&void 0!==c&&c.isIdentifiedID?d:s.bootstrap.distinctID;this.persistence.set_property(At,null!==(u=s.bootstrap)&&void 0!==u&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:h})}if(this._hasBootstrappedFeatureFlags()){var p,f,m=Object.keys((null===(p=s.bootstrap)||void 0===p?void 0:p.featureFlags)||{}).filter((function(t){var e,n;return!(null===(e=s.bootstrap)||void 0===e||null===(n=e.featureFlags)||void 0===n||!n[t])})).reduce((function(t,e){var n,i;return t[e]=(null===(n=s.bootstrap)||void 0===n||null===(i=n.featureFlags)||void 0===i?void 0:i[e])||!1,t}),{}),v=Object.keys((null===(f=s.bootstrap)||void 0===f?void 0:f.featureFlagPayloads)||{}).filter((function(t){return m[t]})).reduce((function(t,e){var n,i,r,o;return null!==(n=s.bootstrap)&&void 0!==n&&null!==(i=n.featureFlagPayloads)&&void 0!==i&&i[e]&&(t[e]=null===(r=s.bootstrap)||void 0===r||null===(o=r.featureFlagPayloads)||void 0===o?void 0:o[e]),t}),{});this.featureFlags.receivedFeatureFlags({featureFlags:m,featureFlagPayloads:v})}if(!this.get_distinct_id()){var y=this.config.get_device_id(Zt());this.register_once({distinct_id:y,$device_id:y},""),this.persistence.set_property(At,"anonymous")}return null==i||null===(n=i.addEventListener)||void 0===n||n.call(i,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),s.segment?function(t,e){var n=t.config.segment;if(!n)return e();!function(t,e){var n=t.config.segment;if(!n)return e();var i=function(n){var i=function(){return n.anonymousId()||Zt()};t.config.get_device_id=i,n.id()&&(t.register({distinct_id:n.id(),$device_id:i()}),t.persistence.set_property(At,"identified")),e()},r=n.user();"then"in r&&k(r.then)?r.then((function(t){return i(t)})):i(r)}(t,(function(){n.register(function(t){Promise&&Promise.resolve||R.warn("This browser does not have Promise support, and can not use the segment integration");var e=function(e,n){var i;if(!n)return e;e.event.userId||e.event.anonymousId===t.get_distinct_id()||(R.info("Segment integration does not have a userId set, resetting PostHog"),t.reset()),e.event.userId&&e.event.userId!==t.get_distinct_id()&&(R.info("Segment integration has a userId set, identifying with PostHog"),t.identify(e.event.userId));var r=t._calculate_event_properties(n,null!==(i=e.event.properties)&&void 0!==i?i:{},new Date);return e.event.properties=Object.assign({},r,e.event.properties),e};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(t){return e(t,t.event.event)},page:function(t){return e(t,"$pageview")},identify:function(t){return e(t,"$identify")},screen:function(t){return e(t,"$screen")}}}(t)).then((function(){e()}))}))}(this,(function(){return r._loaded()})):this._loaded(),k(this.config._onCapture)&&this.on("eventCaptured",(function(t){return r.config._onCapture(t.event,t)})),this}},{key:"_afterDecideResponse",value:function(t){var e,n,i,r,s,o,a,l,c;this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=Z(t.supportedCompression,et.GZipJS)?et.GZipJS:Z(t.supportedCompression,et.Base64)?et.Base64:void 0),null!==(e=t.analytics)&&void 0!==e&&e.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),null===(n=this.sessionRecording)||void 0===n||n.afterDecideResponse(t),null===(i=this.autocapture)||void 0===i||i.afterDecideResponse(t),null===(r=this.heatmaps)||void 0===r||r.afterDecideResponse(t),null===(s=this.experiments)||void 0===s||s.afterDecideResponse(t),null===(o=this.surveys)||void 0===o||o.afterDecideResponse(t),null===(a=this.webVitalsAutocapture)||void 0===a||a.afterDecideResponse(t),null===(l=this.exceptions)||void 0===l||l.afterDecideResponse(t),null===(c=this.exceptionObserver)||void 0===c||c.afterDecideResponse(t)}},{key:"_loaded",value:function(){var t=this,e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(t){R.critical("`loaded` function failed",t)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout((function(){t.consent.isOptedIn()&&t._captureInitialPageview()}),1),e||(new Gi(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var t;this.has_opted_out_capturing()||this.config.request_batching&&(null===(t=this._requestQueue)||void 0===t||t.enable())}},{key:"_dom_loaded",value:function(){var t=this;this.has_opted_out_capturing()||X(this.__request_queue,(function(e){return t._send_retriable_request(e)})),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_handle_unload",value:function(){var t,e;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),null===(t=this._requestQueue)||void 0===t||t.unload(),null===(e=this._retryQueue)||void 0===e||e.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_send_request",value:function(t){var e=this;this.__loaded&&(Zr?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=nr(t.url,{ip:this.config.ip?1:0}),t.headers=F({},this.config.request_headers),t.compression="best-available"===t.compression?this.compression:t.compression,function(t){var e,n,i,r=F({},t);r.timeout=r.timeout||6e4,r.url=nr(r.url,{_:(new Date).getTime().toString(),ver:g.LIB_VERSION,compression:r.compression});var s=null!==(e=r.transport)&&void 0!==e?e:"XHR",o=null!==(n=null===(i=at(rr,(function(t){return t.transport===s})))||void 0===i?void 0:i.method)&&void 0!==n?n:rr[0].method;if(!o)throw new Error("No available transport method");o(r)}(F(F({},t),{},{callback:function(n){var i,r,s;e.rateLimiter.checkForLimiting(n),n.statusCode>=400&&(null===(r=(s=e.config).on_request_error)||void 0===r||r.call(s,n)),null===(i=t.callback)||void 0===i||i.call(t,n)}}))))}},{key:"_send_retriable_request",value:function(t){this._retryQueue?this._retryQueue.retriableRequest(t):this._send_request(t)}},{key:"_execute_array",value:function(t){var e,n=this,i=[],r=[],s=[];X(t,(function(t){t&&(e=t[0],w(e)?s.push(t):k(t)?t.call(n):w(t)&&"alias"===e?i.push(t):w(t)&&-1!==e.indexOf("capture")&&k(n[e])?s.push(t):r.push(t))}));var o=function(t,e){X(t,(function(t){if(w(t[0])){var n=e;K(t,(function(t){n=n[t[0]].apply(n,t.slice(1))}))}else this[t[0]].apply(this,t.slice(1))}),e)};o(i,this),o(r,this),o(s,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var t,e;return(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags)&&Object.keys(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags).length>0||!1}},{key:"push",value:function(t){this._execute_array([t])}},{key:"capture",value:function(t,e,n){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!T(t)&&C(t)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var r=null!=n&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==r||!r.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,o=(null==n?void 0:n.timestamp)||s,a={uuid:Zt(),event:t,properties:this._calculate_event_properties(t,e||{},o)};r&&(a.properties.$lib_rate_limit_remaining_tokens=r.remainingTokens),(null==n?void 0:n.$set)&&(a.$set=null==n?void 0:n.$set);var l=this._calculate_set_once_properties(null==n?void 0:n.$set_once);l&&(a.$set_once=l),(a=function(t,e){return n=t,i=function(t){return C(t)&&!I(e)?t.slice(0,e):t},r=new Set,function t(e,n){return e!==Object(e)?i?i(e):e:r.has(e)?void 0:(r.add(e),w(e)?(s=[],X(e,(function(e){s.push(t(e))}))):(s={},K(e,(function(e,n){r.has(e)||(s[n]=t(e))}))),s);var s}(n);var n,i,r}(a,null!=n&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=o,T(null==n?void 0:n.timestamp)||(a.properties.$event_time_override_provided=!0,a.properties.$event_time_override_system_time=s);var c=F(F({},a.properties.$set),a.$set);S(c)||this.setPersonPropertiesForFlags(c),this._internalEventEmitter.emit("eventCaptured",a);var u={method:"POST",url:null!==(i=null==n?void 0:n._url)&&void 0!==i?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:a,compression:"best-available",batchKey:null==n?void 0:n._batchKey};return!this.config.request_batching||n&&(null==n||!n._batchKey)||null!=n&&n.send_instantly?this._send_retriable_request(u):this._requestQueue.enqueue(u),a}R.critical("This capture call is ignored due to client rate limiting.")}}else R.error("No event name provided to posthog.capture")}else R.uninitializedWarning("posthog.capture")}},{key:"_addCaptureHook",value:function(t){return this.on("eventCaptured",(function(e){return t(e.event,e)}))}},{key:"_calculate_event_properties",value:function(t,e,n){if(n=n||new Date,!this.persistence||!this.sessionPersistence)return e;var i=this.persistence.remove_event_timer(t),r=F({},e);if(r.token=this.config.token,"$snapshot"===t){var s=F(F({},this.persistence.properties()),this.sessionPersistence.properties());return r.distinct_id=s.distinct_id,(!C(r.distinct_id)&&!O(r.distinct_id)||E(r.distinct_id))&&R.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),r}var o=fn.properties();if(this.sessionManager){var a=this.sessionManager.checkAndGetSessionAndWindowId(),l=a.sessionId,u=a.windowId;r.$session_id=l,r.$window_id=u}if(this.requestRouter.region===sr.CUSTOM&&(r.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===t||"$pageleave"===t||"$autocapture"===t)){var d=this.sessionPropsManager.getSessionProps();r=J(r,d)}if(!this.config.disable_scroll_properties){var h={};"$pageview"===t?h=this.pageViewManager.doPageView(n):"$pageleave"===t&&(h=this.pageViewManager.doPageLeave(n)),r=J(r,h)}if("$pageview"===t&&c&&(r.title=c.title),!T(i)){var p=n.getTime()-i;r.$duration=parseFloat((p/1e3).toFixed(3))}f&&this.config.opt_out_useragent_filter&&(r.$browser_type=this._is_bot()?"bot":"browser"),(r=J({},o,this.persistence.properties(),this.sessionPersistence.properties(),r)).$is_identified=this._isIdentified(),w(this.config.property_denylist)?K(this.config.property_denylist,(function(t){delete r[t]})):R.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;return m&&(r=m(r,t)),r.$process_person_profile=this._hasPersonProcessing(),r}},{key:"_calculate_set_once_properties",value:function(t){if(!this.persistence||!this._hasPersonProcessing())return t;var e=J({},this.persistence.get_initial_props(),t||{}),n=this.config.sanitize_properties;return n&&(e=n(e,"$set_once")),S(e)?void 0:e}},{key:"register",value:function(t,e){var n;null===(n=this.persistence)||void 0===n||n.register(t,e)}},{key:"register_once",value:function(t,e,n){var i;null===(i=this.persistence)||void 0===i||i.register_once(t,e,n)}},{key:"register_for_session",value:function(t){var e;null===(e=this.sessionPersistence)||void 0===e||e.register(t)}},{key:"unregister",value:function(t){var e;null===(e=this.persistence)||void 0===e||e.unregister(t)}},{key:"unregister_for_session",value:function(t){var e;null===(e=this.sessionPersistence)||void 0===e||e.unregister(t)}},{key:"_register_single",value:function(t,e){this.register(z({},t,e))}},{key:"getFeatureFlag",value:function(t,e){return this.featureFlags.getFeatureFlag(t,e)}},{key:"getFeatureFlagPayload",value:function(t){var e=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(e)}catch(t){return e}}},{key:"isFeatureEnabled",value:function(t,e){return this.featureFlags.isFeatureEnabled(t,e)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(t,e){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,e)}},{key:"getEarlyAccessFeatures",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(t,e)}},{key:"on",value:function(t,e){return this._internalEventEmitter.on(t,e)}},{key:"onFeatureFlags",value:function(t){return this.featureFlags.onFeatureFlags(t)}},{key:"onSessionId",value:function(t){var e,n;return null!==(e=null===(n=this.sessionManager)||void 0===n?void 0:n.onSessionId(t))&&void 0!==e?e:function(){}}},{key:"getSurveys",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(t,e)}},{key:"getActiveMatchingSurveys",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(t,e)}},{key:"renderSurvey",value:function(t,e){this.surveys.renderSurvey(t,e)}},{key:"canRenderSurvey",value:function(t){this.surveys.canRenderSurvey(t)}},{key:"getNextSurveyStep",value:function(t,e,n){return this.surveys.getNextSurveyStep(t,e,n)}},{key:"identify",value:function(t,e,n){if(!this.__loaded||!this.persistence)return R.uninitializedWarning("posthog.identify");if(O(t)&&(t=t.toString(),R.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t){if(["distinct_id","distinctid"].includes(t.toLowerCase()))R.critical('The string "'.concat(t,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var r=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:r},"")}t!==i&&t!==this.get_property(ct)&&(this.unregister(ct),this.register({distinct_id:t}));var s="anonymous"===(this.persistence.get_property(At)||"anonymous");t!==i&&s?(this.persistence.set_property(At,"identified"),this.setPersonPropertiesForFlags(e||{},!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:i},{$set:e||{},$set_once:n||{}}),this.featureFlags.setAnonymousDistinctId(i)):(e||n)&&this.setPersonProperties(e,n),t!==i&&(this.reloadFeatureFlags(),this.unregister(Mt))}}else R.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(t,e){(t||e)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(t||{}),this.capture("$set",{$set:t||{},$set_once:e||{}}))}},{key:"group",value:function(t,e,n){if(t&&e){if(this._requirePersonProcessing("posthog.group")){var i=this.getGroups();i[t]!==e&&this.resetGroupPropertiesForFlags(t),this.register({$groups:F(F({},i),{},z({},t,e))}),n&&(this.capture("$groupidentify",{$group_type:t,$group_key:e,$group_set:n}),this.setGroupPropertiesForFlags(z({},t,n))),i[t]===e||n||this.reloadFeatureFlags()}}else R.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(t,e)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,e)}},{key:"resetGroupPropertiesForFlags",value:function(t){this.featureFlags.resetGroupPropertiesForFlags(t)}},{key:"reset",value:function(t){var e,n,i,r;if(R.info("reset"),!this.__loaded)return R.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");this.consent.reset(),null===(e=this.persistence)||void 0===e||e.clear(),null===(n=this.sessionPersistence)||void 0===n||n.clear(),null===(i=this.persistence)||void 0===i||i.set_property(At,"anonymous"),null===(r=this.sessionManager)||void 0===r||r.resetSessionId();var o=this.config.get_device_id(Zt());this.register_once({distinct_id:o,$device_id:t?o:s},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var t,e;return null!==(t=null===(e=this.sessionManager)||void 0===e?void 0:e.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==t?t:""}},{key:"get_session_replay_url",value:function(t){if(!this.sessionManager)return"";var e=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=e.sessionId,i=e.sessionStartTimestamp,r=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(n));if(null!=t&&t.withTimestamp&&i){var s,o=null!==(s=t.timestampLookBack)&&void 0!==s?s:10;if(!i)return r;var a=Math.max(Math.floor(((new Date).getTime()-i)/1e3)-o,0);r+="?t=".concat(a)}return r}},{key:"alias",value:function(t,e){return t===this.get_property(lt)?(R.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(T(e)&&(e=this.get_distinct_id()),t!==e?(this._register_single(ct,t),this.capture("$create_alias",{alias:t,distinct_id:e})):(R.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}},{key:"set_config",value:function(t){var e,n,i,r,s=F({},this.config);x(t)&&(J(this.config,es(t)),null===(e=this.persistence)||void 0===e||e.update_config(this.config,s),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new gn(F(F({},this.config),{},{persistence:"sessionStorage"})),se.is_supported()&&"true"===se.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(g.DEBUG=!0,R.info("set_config",{config:t,oldConfig:s,newConfig:F({},this.config)})),null===(n=this.sessionRecording)||void 0===n||n.startIfEnabledOrStop(),null===(i=this.autocapture)||void 0===i||i.startIfEnabled(),null===(r=this.heatmaps)||void 0===r||r.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}},{key:"startSessionRecording",value:function(t){var e=M(t)&&t;if(e||null!=t&&t.sampling||null!=t&&t.linked_flag){var n,i,r,s=null===(n=this.sessionManager)||void 0===n?void 0:n.checkAndGetSessionAndWindowId();(e||null!=t&&t.sampling)&&(null===(i=this.sessionRecording)||void 0===i||i.overrideSampling(),R.info("Session recording started with sampling override for session: ",null==s?void 0:s.sessionId)),(e||null!=t&&t.linked_flag)&&(null===(r=this.sessionRecording)||void 0===r||r.overrideLinkedFlag(),R.info("Session recording started with linked_flags override"))}this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var t;return!(null===(t=this.sessionRecording)||void 0===t||!t.started)}},{key:"captureException",value:function(t,e){var n,i=new Error("PostHog syntheticException"),r=k(null===(n=m.__PosthogExtensions__)||void 0===n?void 0:n.parseErrorAsProperties)?m.__PosthogExtensions__.parseErrorAsProperties([t.message,void 0,void 0,void 0,t],{syntheticException:i}):F({$exception_level:"error",$exception_list:[{type:t.name,value:t.message,mechanism:{handled:!0,synthetic:!1}}]},e);this.exceptions.sendExceptionEvent(r)}},{key:"loadToolbar",value:function(t){return this.toolbar.loadToolbar(t)}},{key:"get_property",value:function(t){var e;return null===(e=this.persistence)||void 0===e?void 0:e.props[t]}},{key:"getSessionProperty",value:function(t){var e;return null===(e=this.sessionPersistence)||void 0===e?void 0:e.props[t]}},{key:"toString",value:function(){var t,e=null!==(t=this.config.name)&&void 0!==t?t:Jr;return e!==Jr&&(e=Jr+"."+e),e}},{key:"_isIdentified",value:function(){var t,e;return"identified"===(null===(t=this.persistence)||void 0===t?void 0:t.get_property(At))||"identified"===(null===(e=this.sessionPersistence)||void 0===e?void 0:e.get_property(At))}},{key:"_hasPersonProcessing",value:function(){var t,e,n,i;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&S(this.getGroups())&&(null===(t=this.persistence)||void 0===t||null===(e=t.props)||void 0===e||!e[ct])&&(null===(n=this.persistence)||void 0===n||null===(i=n.props)||void 0===i||!i[qt]))}},{key:"_shouldCapturePageleave",value:function(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&this.config.capture_pageview}},{key:"createPersonProfile",value:function(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}},{key:"_requirePersonProcessing",value:function(t){return"never"===this.config.person_profiles?(R.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(qt,!0),!0)}},{key:"_sync_opt_out_with_persistence",value:function(){var t,e,n,i,r=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default,o=this.config.disable_persistence||r&&!!s;(null===(t=this.persistence)||void 0===t?void 0:t.disabled)!==o&&(null===(n=this.persistence)||void 0===n||n.set_disabled(o)),(null===(e=this.sessionPersistence)||void 0===e?void 0:e.disabled)!==o&&(null===(i=this.sessionPersistence)||void 0===i||i.set_disabled(o))}},{key:"opt_in_capturing",value:function(t){var e;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(T(null==t?void 0:t.captureEventName)||null!=t&&t.captureEventName)&&this.capture(null!==(e=null==t?void 0:t.captureEventName)&&void 0!==e?e:"$opt_in",null==t?void 0:t.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}},{key:"opt_out_capturing",value:function(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}},{key:"has_opted_in_capturing",value:function(){return this.consent.isOptedIn()}},{key:"has_opted_out_capturing",value:function(){return this.consent.isOptedOut()}},{key:"clear_opt_in_out_capturing",value:function(){this.consent.reset(),this._sync_opt_out_with_persistence()}},{key:"_is_bot",value:function(){return l?Mr(l,this.config.custom_blocked_useragents):void 0}},{key:"_captureInitialPageview",value:function(){c&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:c.title},{send_instantly:!0}))}},{key:"debug",value:function(t){!1===t?(null==i||i.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==i||i.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),t}();!function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=it(t.prototype[e[n]])}(is,["identify"]);var rs,ss=(rs=Xr[Jr]=new is,function(){function t(){t.done||(t.done=!0,Zr=!1,K(Xr,(function(t){t._dom_loaded()})))}null!=c&&c.addEventListener&&("complete"===c.readyState?t():c.addEventListener("DOMContentLoaded",t,!1)),i&&ot(i,"load",t,!0)}(),rs)},3264:t=>{"use strict";t.exports=MathJax},1996:t=>{"use strict";t.exports=tinymce}},s={};function o(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={id:t,loaded:!1,exports:{}};return r[t].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=r,t=[],o.O=(e,n,i,r)=>{if(!n){var s=1/0;for(u=0;u<t.length;u++){for(var[n,i,r]=t[u],a=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(o.O).every((t=>o.O[t](n[l])))?n.splice(l--,1):(a=!1,r<s&&(s=r));if(a){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[n,i,r]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"==typeof t&&t){if(4&i&&t.__esModule)return t;if(16&i&&"function"==typeof t.then)return t}var r=Object.create(null);o.r(r);var s={};e=e||[null,n({}),n([]),n(n)];for(var a=2&i&&t;"object"==typeof a&&!~e.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>t[e]));return s.default=()=>t,o.d(r,s),r},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=n[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t+"../"})(),(()=>{var t={843:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var i,r,[s,a,l]=n,c=0;if(s.some((e=>0!==t[e]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(l)var u=l(o)}for(e&&e(n);c<s.length;c++)r=s[c],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(u)},n=self.webpackChunkdfm_legacy_fe=self.webpackChunkdfm_legacy_fe||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),o.nc=void 0;var a=o(3411);a=o.O(a)})();
//# sourceMappingURL=dfm5.f79a4154a9bbf26b2bba.js.map
</script>

</body>
</html>
