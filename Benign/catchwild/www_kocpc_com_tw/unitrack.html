<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unitrack.html</title>
</head>
<body>

<script>
/*! For license information please see unitrack.js.LICENSE.txt */
(()=>{var __webpack_modules__={999:(e,t)=>{"use strict";var r=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;t.G=function(e){if(!e)return!1;if(e.length>254)return!1;if(!r.test(e))return!1;var t=e.split("@");return!(t[0].length>64||t[1].split(".").some((function(e){return e.length>63})))}},23:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=__webpack_require__.g:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(r){return new Sha256(t,!0).update(r)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var r=0;r<OUTPUT_TYPES.length;++r){var a=OUTPUT_TYPES[r];t[a]=createOutputMethod(a,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(r,a){return new HmacSha256(r,t,!0).update(a)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,r){return t.create(e).update(r)};for(var r=0;r<OUTPUT_TYPES.length;++r){var a=OUTPUT_TYPES[r];t[a]=createHmacOutputMethod(a,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,r){var a,i=typeof e;if("string"===i){var s,n=[],o=e.length,h=0;for(a=0;a<o;++a)(s=e.charCodeAt(a))<128?n[h++]=s:s<2048?(n[h++]=192|s>>6,n[h++]=128|63&s):s<55296||s>=57344?(n[h++]=224|s>>12,n[h++]=128|s>>6&63,n[h++]=128|63&s):(s=65536+((1023&s)<<10|1023&e.charCodeAt(++a)),n[h++]=240|s>>18,n[h++]=128|s>>12&63,n[h++]=128|s>>6&63,n[h++]=128|63&s);e=n}else{if("object"!==i)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var c=[],u=[];for(a=0;a<64;++a){var l=e[a]||0;c[a]=92^l,u[a]=54^l}Sha256.call(this,t,r),this.update(u),this.oKeyPad=c,this.inner=!0,this.sharedMemory=r}Sha256.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var a,i,s=0,n=e.length,o=this.blocks;s<n;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),t)for(i=this.start;s<n&&i<64;++s)o[i>>2]|=e[s]<<SHIFT[3&i++];else for(i=this.start;s<n&&i<64;++s)(a=e.charCodeAt(s))<128?o[i>>2]|=a<<SHIFT[3&i++]:a<2048?(o[i>>2]|=(192|a>>6)<<SHIFT[3&i++],o[i>>2]|=(128|63&a)<<SHIFT[3&i++]):a<55296||a>=57344?(o[i>>2]|=(224|a>>12)<<SHIFT[3&i++],o[i>>2]|=(128|a>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&a)<<SHIFT[3&i++]):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++s)),o[i>>2]|=(240|a>>18)<<SHIFT[3&i++],o[i>>2]|=(128|a>>12&63)<<SHIFT[3&i++],o[i>>2]|=(128|a>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&a)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,r,a,i,s,n,o,h,c=this.h0,u=this.h1,l=this.h2,d=this.h3,_=this.h4,p=this.h5,m=this.h6,g=this.h7,f=this.blocks;for(e=16;e<64;++e)t=((i=f[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,r=((i=f[e-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,f[e]=f[e-16]+t+f[e-7]+r<<0;for(h=u&l,e=0;e<64;e+=4)this.first?(this.is224?(s=300032,g=(i=f[0]-1413257819)-150054599<<0,d=i+24177077<<0):(s=704751109,g=(i=f[0]-210244248)-1521486534<<0,d=i+143694565<<0),this.first=!1):(t=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),a=(s=c&u)^c&l^h,g=d+(i=g+(r=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7))+(_&p^~_&m)+K[e]+f[e])<<0,d=i+(t+a)<<0),t=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),a=(n=d&c)^d&u^s,m=l+(i=m+(r=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&_^~g&p)+K[e+1]+f[e+1])<<0,t=((l=i+(t+a)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),a=(o=l&d)^l&c^n,p=u+(i=p+(r=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&g^~m&_)+K[e+2]+f[e+2])<<0,t=((u=i+(t+a)<<0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),a=(h=u&l)^u&d^o,_=c+(i=_+(r=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&m^~p&g)+K[e+3]+f[e+3])<<0,c=i+(t+a)<<0;this.h0=this.h0+c<<0,this.h1=this.h1+u<<0,this.h2=this.h2+l<<0,this.h3=this.h3+d<<0,this.h4=this.h4+_<<0,this.h5=this.h5+p<<0,this.h6=this.h6+m<<0,this.h7=this.h7+g<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,a=this.h3,i=this.h4,s=this.h5,n=this.h6,o=this.h7,h=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n];return this.is224||(h+=HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]),h},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,a=this.h3,i=this.h4,s=this.h5,n=this.h6,o=this.h7,h=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,a>>24&255,a>>16&255,a>>8&255,255&a,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24&255,s>>16&255,s>>8&255,255&s,n>>24&255,n>>16&255,n>>8&255,255&n];return this.is224||h.push(o>>24&255,o>>16&255,o>>8&255,255&o),h},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.amdO={},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UniTrack:()=>I});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{facebook:()=>i,tagtoo:()=>c});class t{constructor({token:e,user:t,session:r}){this.token=e,this.user=t,this.session=r}validateItems(e){var t;return(null===(t=e.items)||void 0===t?void 0:t.constructor)===Array&&e.items.length>0}pack(e,t={}){const r=`pack${e.replace(/^\w/,(e=>e.toUpperCase()))}`;return this.resolve(r,t)}}const r=[["em","email"],["ph","phone"],["ge","gender"],["db","birthday"],["ln","lastName"],["fn","firstName"],["ct","city"],["country","country"],["fbp","fbp"],["fbc","fbc"]];function a(e,t){const r=Array.from(t.items,(e=>({id:e.id,quantity:e.quantity||1,item_price:e.price||0}))),a=t.value??r.reduce(((e,t)=>e+t.quantity*t.item_price),0);return{event_id:t.eventId,event_name:e,custom_data:{contents:r,content_type:t.contentType||"product_group",value:a,currency:t.currency||"TWD"}}}const i=class extends t{constructor({token:e,user:t,session:r}){super({token:e,user:t,session:r}),this.name="facebook",this.source="website"}get basic(){return{user_data:this.user.normalize(r),action_source:this.source,event_source_url:this.session.link}}resolve(e,t){var r;return(null===(r=this[e])||void 0===r?void 0:r.call(this,t))??{isValid:!1}}packPageView(e){return{isValid:!0,data:{...this.basic,event_id:e.eventId,event_name:"PageView"}}}packViewItem(e){return this.validateItems(e)?{isValid:!0,data:{...this.basic,...a("ViewContent",e)}}:{isValid:!1}}packAddToCart(e){return this.validateItems(e)?{isValid:!0,data:{...this.basic,...a("AddToCart",e)}}:{isValid:!1}}packAddToWishlist(e){return this.validateItems(e)?{isValid:!0,data:{...this.basic,...a("AddToWishlist",e)}}:{isValid:!1}}packCheckout(e){if(this.validateItems(e)){const t=a("InitiateCheckout",e);return t.custom_data.num_items=t.custom_data.contents.reduce(((e,t)=>e+t.quantity),0),{isValid:!0,data:{...this.basic,...t}}}return{isValid:!1}}packAddPaymentInfo(e){if(this.validateItems(e)){const t={isValid:!0,data:{...this.basic,...a("AddPaymentInfo",e)}};return t.data.custom_data.payment=e.payment,t}return{isValid:!1}}packAddDeliveryInfo(e){if(this.validateItems(e)){const t={isValid:!0,data:{...this.basic,...a("AddDeliveryInfo",e)}};return t.data.custom_data.delivery=e.delivery,t.data.custom_data.delivery_category=e.delivery_category,t}return{isValid:!1}}packPurchase(e){if(this.validateItems(e)){const t={isValid:!0,data:{...this.basic,...a("Purchase",e)}};return t.data.custom_data.order_id=e.orderId??Date.now().toString(),t}return{isValid:!1}}packRegister(e){return e.method&&e.method.constructor===String?{isValid:!0,data:{...this.basic,event_id:e.eventId,event_name:"CompleteRegistration",custom_data:{content_name:e.method,status:e.status||"complete registration",currency:e.currency||"TWD",value:e.value??1}}}:{isValid:!1}}packLogin(e){return e.method&&e.method.constructor===String?{isValid:!0,data:{...this.basic,event_id:e.eventId,event_name:"Login",custom_data:{method:e.method}}}:{isValid:!1}}packSearch(e){if(e.searchKey&&e.searchKey.constructor===String){const t=a("Search",{items:[],...e});return t.custom_data.contents.length>0?t.custom_data.search_string=e.searchkey:t.custom_data={search_string:e.searchKey},{isValid:!0,data:{...this.basic,...t}}}return{isValid:!1}}packLead(e){if(e.label&&e.label.constructor===String)return{isValid:!0,data:{...this.basic,event_id:e.eventId,event_name:"Lead",custom_data:{content_name:e.label,value:e.value??1,currency:e.currency||"TWD"}}}}packCustomEvent(e){return{isValid:!0,data:{...this.basic,event_id:e.eventId,event_name:e.name,custom_data:e.data}}}},s={isValid:!1},n=[["un","username"],["em","email"],["ph","phone"],["gd","gender"],["db","birthday"],["fbp","fbp"],["fbc","fbc"],["ga","ga"],["gid","gid"],["lmid","lmid"]];function o(e){return["member","facebook","google","apple","line"].find((t=>t===e))||"member"}function h(e,t,r){return{name:e,value:t.items.reduce(((e,t)=>e+t.price*t.quantity),0),currency:t.currency||"TWD",items:t.items,custom_data:r}}const c=class extends t{constructor({token:e,user:t,session:r}){super({token:e,user:t,session:r}),this.name="tagtoo"}getPayload({language:e="zh-TW",event:t}){return this.session.keepalive(),{isValid:!0,data:{permanent:this.user.id,user:this.user.normalize(n),link:this.session.link,referrer:this.session.referrer,user_agent:navigator.userAgent,session:{id:this.session.id,...this.session.tracking},language:e,event:t}}}resolve(e,t){return this.user.identify(this.token).then((r=>{var a;return r?(null===(a=this[e])||void 0===a?void 0:a.call(this,t))??s:this.resolve(e,t)}))}packAddPaymentInfo(e){return this.validateItems(e)?this.getPayload({language:e.language,event:h("add_payment_info",e,{payment_method:e.payment})}):s}packAddShippingInfo(e){return this.validateItems(e)?this.getPayload({language:e.language,event:h("add_shipping_info",e,{shipping_method:e.shippingMethod})}):s}packAddToCart(e){return this.validateItems(e)?this.getPayload({language:e.language,event:h("add_to_cart",e)}):s}packAddToWishlist(e){return this.validateItems(e)?this.getPayload({language:e.language,event:h("add_to_wishlist",e)}):s}packCheckout(e){return this.validateItems(e)?this.getPayload({language:e.language,event:h("checkout",e)}):s}packCopy(e){return"string"==typeof e.copied&&e.copied.length<128?this.getPayload({language:e.language,event:{name:"copy",custom_data:{copy_string:e.copied}}}):s}packFocus(e){return[!0,!1].includes(e.status)||"number"==typeof e.focusMinutes?this.getPayload({language:e.language,event:{name:"focus",custom_data:{status:e.status,focus_minutes:e.focusMinutes}}}):s}packLead(e){return"string"!=typeof e.label?s:this.getPayload({language:e.language,event:{name:"lead",custom_data:{campaign_name:e.label}}})}packLogin(e){return"string"!=typeof e.method?s:this.getPayload({language:e.language,event:{name:"login",custom_data:{auth_method:o(e.method)}}})}packPageView(e){return this.getPayload({language:e.language,event:{name:"page_view"}})}packPurchase(e){return this.validateItems(e)?this.getPayload({language:e.language,event:h("purchase",e,{order_id:e.orderId||String(Date.now())})}):s}packRefund(e){return e.orderId?this.getPayload({language:e.language,event:{name:"refund",value:e.value,currency:e.currency||"TWD",custom_data:{order_id:e.orderId}}}):s}packRegister(e){return"string"!=typeof e.method?s:this.getPayload({language:e.language,event:{name:"register",custom_data:{auth_method:o(e.method)}}})}packRemoveFromCart(e){return this.validateItems(e)?this.getPayload({language:e.language,event:h("remove_from_cart",e)}):s}packScroll(e){return"number"!=typeof e.documentHeight||"number"!=typeof e.scrollTop?s:this.getPayload({language:e.language,event:{name:"scroll",custom_data:{document_height:e.documentHeight,scroll_top:e.scrollTop}}})}packSearch(e){return"string"!=typeof e.searchKey?s:this.getPayload({language:e.language,event:{name:"search",custom_data:{search_string:e.searchKey}}})}packViewCart(e){return this.validateItems(e)?this.getPayload({language:e.language,event:h("view_cart",e)}):s}packViewItem(e){return this.validateItems(e)?this.getPayload({language:e.language,event:h("view_item",e)}):s}packViewItemList(e){return this.validateItems(e)&&e.breadcrumb?this.getPayload({language:e.language,event:{name:"view_item_list",items:e.items.slice(0,10),custom_data:{breadcrumb:e.breadcrumb}}}):s}packViewPromotion(e){return this.validateItems(e)&&e.campaign?this.getPayload({language:e.language,event:{name:"view_promotion",items:e.items.slice(0,10),custom_data:{campaign_name:e.campaign}}}):s}};class u{constructor({token:t,scopes:r,user:a,session:i}){this.token=t,this.channels=r.map((r=>new e[r]({token:t,user:a,session:i})))}pack(e,t){return Promise.all(Array.from(this.channels,(r=>r.pack(e,t)))).then((e=>{const t={event_time:null,token:this.token};return e.forEach(((e,r)=>{e.isValid&&(t[this.channels[r].name]=e.data)})),t}))}}const l=function(e){const t=location.hostname.split(".");for(let r=0;r<t.length;r++){const a=new Date(Date.now()+1e3);if(e=t.slice(t.length-1-r).join("."),document.cookie=`_ut_csi=1; expires=${a.toGMTString()}; domain=${e};`,/_ut_csi=1/.test(document.cookie))break}return e}(),d=function(){let e=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}))};var _=__webpack_require__(23);const p=function(e){return e?_.sha256.create().update(e).hex():null},m={fingerprintjs:"fp.min.js",libphonenumber:"libphonenumber.min.js",stackdrivererrorsjs:"stackdriver.min.js"},g=function(e){return new Promise((t=>{const r=document.createElement("script");r.src=`https://ecs.tagtoo.co/js/${m[e]}`,r.async=!0,r.onload=t,document.body.append(r)}))},f=new class{constructor(){this.client=null}init(){return null===this.client?g("stackdrivererrorsjs").then((()=>(this.client=new StackdriverErrorReporter,this.client.start({projectId:"tagtoo-ecs",key:"AIzaSyDGTzds_92fc20EeJNUqR1tIx6rKJ6eYE4",service:"unitrack",version:"0.1.0"}),this.client))):Promise.resolve(this.client)}report(e){this.init().then((t=>{t.report(e,{skipLocalFrames:2})}))}};function y(e,t=null){var r;const a=new RegExp(`(^| )${e}=([^;]+);?`);return(null===(r=document.cookie.match(a))||void 0===r?void 0:r.pop())??t}const v=function(e){return btoa(Symbol(e).toString()).replace(/=+$/,"")};function b(e){return S.get(`${l}/${v(e)}`)}function H(e,t){S.set(`${l}/${v(e)}`,t)}const S=new class{constructor(){this.storage=window.localStorage}get(e,{defaultValue:t=null,period:r=31536e6,valueOnly:a=!0}={}){const i=JSON.parse(this.storage.getItem(e)),s=Date.now()-(null==i?void 0:i.timestamp)<r;return!t||i&&s?s?a?null==i?void 0:i.value:i:null:(this.set(e,t),t)}set(e,t){this.storage.setItem(e,JSON.stringify({value:t,timestamp:Date.now()}))}},k=/(bing|google|yahoo)\./,A=e=>`${e.origin}${e.pathname}${e.search}${e.hash}`;class R{get id(){return S.get("session",{defaultValue:d(),period:18e5})}get url(){return new URL(location.href)}get link(){return A(this.url)}get referrer(){const e=window.referrer||document.referrer;return e?A(new URL(e)):null}get query(){return this.url.searchParams}get tracking(){const e=this.query;let t={};if(["source","medium","campaign","term","content"].forEach((r=>{e.has(`utm_${r}`)&&(t[r]=e.get(`utm_${r}`))})),0===Object.keys(t).length)if(e.has("gclid"))t.source="google",t.medium="cpc";else if(e.has("fbclid"))t.source="fb",t.medium="cpc";else if(null===this.referrer)t.source="direct",t.medium="none";else{const e=new URL(this.referrer);this.isFirstVisit()&&!this.link.includes(e.hostname)?(t.source=e.hostname,t.medium=k.test(e.hostname)?"organic":"referral"):t=S.get("_utm")}return S.set("_utm",t),t}keepalive(){S.set("session",this.id)}isFirstVisit(){return!sessionStorage.getItem("_fv")&&(sessionStorage.setItem("_fv","0")||!0)}}var E=__webpack_require__(999);function w(e){return function(t){return{key:e,isValid:/^(\w+|\p{Script=Han}+)$/u.test(t),value:p(encodeURIComponent(t).toLowerCase())}}}const C={email:function(e){const t={key:"email",isValid:E.G(e)};return t.value=t.isValid?p(e.toLowerCase()):null,t},phone:function(e,t="TW"){return 0===e.length?{key:"phone",isValid:!1}:g("libphonenumber").then((()=>{const r=window.libphonenumber.parsePhoneNumber(e,t),a=r.isValid();return a?[{key:"phone",isValid:a,value:p(r.number.replace("+",""))},{key:"gPhone",isValid:a,value:p(r.number)}]:{key:"phone",value:null,isValid:a}}))},gender:function(e){return{key:"gender",value:p(e),isValid:/^[fm]$/.test(e)}},birthday:function(e){const t=Date.parse(e.replace(/^(\d{4})(\d{2})(\d{2})$/,((e,t,r,a)=>`${t}-${r}-${a}`)));return{key:"birthday",isValid:t&&t<Date.now(),value:p(e)}},username:function(e){return{key:"username",value:p(e),isValid:e.length>0}},lastName:w("lastName"),firstName:w("firstName"),city:function(e){return{key:"city",value:p(e.replace(/\W/g,"").toLowerCase()),isValid:!0}},country:function(e){return{key:"country",value:p(e.toLowerCase()),isValid:2===e.length}},noHash:function(e,t){return{key:e,value:t,isValid:!!t}}};class I{constructor(){this.packer=null,this.session=new R,this.user=new class{get id(){return b("permanent")}get email(){return b("email")}get phone(){return b("phone")}get gPhone(){return b("gPhone")}get gender(){return b("gender")}get birthday(){return b("birthday")}get username(){return b("username")}get lastName(){return b("lastName")}get firstName(){return b("firstName")}get country(){return b("country")}get city(){return b("city")}get fbp(){return function(){let e=y("_fbp");if(!e||!/fb\.[0-2]{1}\.\d+\.\d+$/.test(e)){const t=location.hostname.replace(l,"").split(".").length,r=Math.round(2147483647*Math.random()),a=new Date(Date.now()+7776e6).toGMTString();e=`fb.${t}.${Date.now()}.${r}`,document.cookie=`_fbp=${e}; expires=${a}`}return e}()}get fbc(){const e=y("_fbc");return/fb\.\d\.\d+\.\w+/.test(e)?e:null}get ga(){return y("_ga")}get gid(){return y("_gid")}get lmid(){return S.get("lm")}identify(e){const t={headers:{"X-TOKEN":e},mode:"cors",credentials:"omit"};return this.id?Promise.resolve(1):g("fingerprintjs").then((()=>FingerprintJS.load())).then((e=>e.get())).then((e=>e.visitorId)).then((e=>fetch(`https://event.tagtoo.co/permanent?fp=${e}`,t))).then((e=>e.json())).then((e=>{const t=e.permanent;return t?!H("permanent",t):!!f.report(new Error(e.detail))})).catch((e=>(f.report(e),0)))}checkAndSet(e){e.value&&e.isValid&&H(e.key,e.value)}update(e={},t){(function(e,t){const r=Array.from(Object.entries(e),(([e,r])=>{const a="string"==typeof r?[r.trim()]:Array.isArray(r)?r:null;return a&&C[e]?t.withHash?C[e].apply(null,a):C.noHash.apply(null,[e,...a]):{}}));return Promise.all(r)})(e,t).then((e=>{e.forEach((e=>{Array.isArray(e)?e.forEach((e=>{this.checkAndSet(e)})):"object"==typeof e&&null!==e&&this.checkAndSet(e)}))}))}normalize(e){return Object.fromEntries(e.map((([e,t])=>[e,this[t]])).filter((([,e])=>Boolean(e))))}}}init(e,t){this.packer=new u({token:e,scopes:t,user:this.user,session:this.session})}add(e,t={withHash:!0}){this.user.update(e,t)}event(e,t){null===this.packer?setTimeout((()=>{this.event(e,t)}),1e3):this.packer.pack(e,t).then((e=>{navigator.sendBeacon("https://event.tagtoo.co/event/v1",JSON.stringify(e))}))}}})(),window.unitrack=__webpack_exports__})();
</script>

</body>
</html>
