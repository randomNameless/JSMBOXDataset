<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hoisted.HizI-G4x.html</title>
</head>
<body>

<script>
import{u as E,f as v,i as le,m as de,t as ue}from"./index.CT4hP_Fn.js";import{h as he,p as me,i as pe}from"./ProductCardWrapper.BUNqo1e9.js";import{e as W,b as X,c as fe,d as ge,n as Y,h as z,r as q}from"./GlobalDispatchAndDateCountdownWidget.astro_astro_type_script_index_0_lang.DJu3yDdL.js";import"./hoisted.DVundARY.js";import{V as ye}from"./Variation.s44fb9oC.js";import"./hoisted.CnGWLtae.js";import"./hoisted.CF4wbrlJ.js";import{i as be,f as we}from"./Tabs.astro_astro_type_script_index_0_lang.DpUIZxfO.js";class ve extends HTMLElement{constructor(){super(),document.getElementById("productListWidget")&&W.subscribe(t=>{t&&window?.tenantConfig?.features?.wishlist?.enabled&&Ee()})}}customElements.define("product-list",ve);async function Ee(){let c=[],e=[];document.querySelectorAll(".plp-wishlist-btn").forEach(s=>{e.push(s.getAttribute("id"))}),(await E({operation:"Products",variables:{skus:e,enableWishlist:window?.tenantConfig?.features?.wishlist?.enabled||!1}}))?.data?.products?.forEach(s=>{s.inWishlist&&c.push(s.sku)}),c?.forEach(s=>{document.getElementById(`${s}`)?.firstElementChild?.classList.add("inWishlist")})}window?.tenantConfig?.features?.enableHoverProductItem?he():me();function k(c){const e=new URL(window.location.href);c?.length?(e.searchParams.set("facetFilters",c.join("|")),e.searchParams.delete("pageNumber"),window.history.pushState(null,"",e.href)):(e.searchParams.delete("facetFilters"),e.searchParams.delete("pageNumber"),window.history.pushState(null,"",e.href))}function w(){const c=new PopStateEvent("popstate",{state:null});dispatchEvent(c)}function A(c,e,t){let a=c||[];return a?.includes(`${e}:${t}`)?a?.splice(a?.findIndex(s=>s===`${e}:${t}`),1):a.push(`${e}:${t}`),window.Tracker.handlers.addFilter(e,t),a}function Le(c){let e={};c?.products?.forEach((t,a)=>{e[t.sku]={item_id:t?.sku,item_name:t?.title,item_list_id:"",item_list_name:window.Tracker.store.get("productList").title,url:t?.url,brand:t?.content?.[0]?.value?.stringListValue?.[0],price:t?.defaultVariant?t?.defaultVariant?.price?.rrp?.amount:t?.cheapestVariant?.price?.rrp?.amount,value:t?.defaultVariant?t?.defaultVariant?.price?.price?.amount:t?.cheapestVariant?.price?.price?.amount,discount:t?.defaultVariant?Number(t?.defaultVariant?.price?.rrp?.amount)-Number(t?.defaultVariant?.price?.price?.amount):Number(t?.cheapestVariant?.price?.rrp?.amount)-Number(t?.cheapestVariant?.price?.price?.amount),coupon:t?.marketedSpecialOffer?.title.content[0]?.content,index:a,variant:t?.variants?.[0]?.choices?.[0]?.title,promo:t?.marketedSpecialOffer?.title?.content[0]?.content,currency:window?.siteObj?.currency,quantity:1}}),window.Tracker.store.set("productList",{id:"",title:"",items:e,currency:window.siteObj.currency})}const{lang:D}=window;class ke extends HTMLElement{constructor(){super();const e=document.getElementById("plp-fragment-wrapper"),t=28;let a,s="RELEVANCE",n=[],i=1,u="",h;const m=document.getElementById("content"),y=document.getElementById("read-btn");function C(){m?.classList.contains("h-16")?(m?.classList.remove("h-16"),y.innerText=D.altitude.productlist.readless,window.Tracker.handlers.ReadMoreClicked()):(m?.classList.add("h-16"),y.innerText=D.altitude.productlist.readmore)}y?.addEventListener("click",C),window.sharedFunctions={fetchFragment:v,useFetchApi:E,pushFacetsToUrl:k,triggerPageLoad:w,generateFacets:A,isInViewport:le,addToBasket:X,Variation:ye,initQuantitySelector:pe,addToBasketBtn:fe,subscriptionATB:ge},W.subscribe(f=>{if(f){const o=[...this.querySelectorAll(".plp-wishlist-btn")];let r=[];o?.forEach(l=>{r.push(l?.getAttribute("id"))}),_(r)}});async function _(f){const o=await E({operation:"Products",variables:{skus:f,enableWishlist:window?.tenantConfig?.features?.wishlist?.enabled||!1}});if(o.data.products.length){let r=[];o.data?.products?.forEach(l=>{l.inWishlist&&r.push(l.sku)}),r?.forEach(l=>{document.getElementById(`${l}`)?.firstElementChild?.classList.add("inWishlist")})}}window.addEventListener("popstate",function(f){Z().then(o=>{v(`/fragments/facetsFragment/${window.location.search}`,e,{data:h,limit:t,href:window.location.href}).then(()=>{const r=document.getElementById("pagination-wrapper");v(`/fragments/paginationFragment/${window.location.search}`,r,{total:h.total,hasMore:h.hasMore,limit:t,currentUrl:window.location.href}).then(()=>{U(),x(),ie()});let l=[];h.products.forEach(d=>{l.push(d?.sku)}),_(l)})})});function K(){e?.scrollIntoView({behavior:"smooth"})}function x(){i=new URLSearchParams(window.location.search).get("pageNumber")??1}function F(f){const o=new URL(window.location.href);o.searchParams.set("pageNumber",f),window.history.pushState(null,"",o.href)}async function Z(){let f=[];if(I(),K(),n?.length?n?.forEach(o=>{const r=o.split(":"),l=f?.findIndex(d=>d.facetName===r[0]);l>=0?f[l].selections.push({optionName:r[1]}):f.push({facetName:r[0],selections:[{optionName:r[1]}]})}):f=[],window.location.search.includes("q="))h=(await E({operation:"SearchRefetch",variables:{currency:window.siteObj.currency,shippingDestination:window.siteObj.country,offset:i?(Number(i)-1)*Number(t):0,limit:t,sort:s,facets:f,query:u??"",reviewsEnabled:window?.tenantConfig?.features?.reviews?.enabled??!1,enablePapModalPlp:window?.tenantConfig?.features?.enablePapModalPlp??!1,enableWishlist:window?.tenantConfig?.features?.wishlist?.enabled}}))?.data?.search?.productList;else{const o=await E({operation:"ClientSideProductList",variables:{handle:a,currency:window.siteObj.currency,shippingDestination:window.siteObj.country,offset:i?(Number(i)-1)*Number(t):0,limit:t,facets:f,sort:s,reviewsEnabled:window?.tenantConfig?.features?.reviews?.enabled??!1,enablePapModalPlp:window?.tenantConfig?.features?.enablePapModalPlp??!1,showPlpPageDescription:window?.tenantConfig?.features?.enablePapModalPlp??!1,enableWishlist:window?.tenantConfig?.features?.wishlist?.enabled}}),r=o?.data?.page.widgets.findIndex(l=>l.__typename==="ProductListWidget");h=o?.data?.page?.widgets[r]?.productList}Le(h)}function I(){const f=new URLSearchParams(window.location.search);n=[],window.location.search.includes("q=")?u=f.get("q"):window.location.pathname.at(-1)==="/"?a=window.location.pathname.replace("/c","").slice(0,-1):a=window.location.pathname.replace("/c",""),window.location.search.includes("facetFilters")&&(n=f.get("facetFilters")?.split("|")),window.location.search.includes("sort")&&(s=f.get("sort")),i=f.get("pageNumber")??1}function $(f){let o=[];n?.map(r=>{r.includes(f)||o.push(r)}),n=o}class ee extends HTMLElement{constructor(){super();const o=this.querySelector(".tags-group"),r=this.querySelector(".clear-all-btn");o?.addEventListener("click",l=>{let d;if(l.target.tagName==="svg"?d=l.target.parentNode:l.target.tagName==="path"&&(d=l.target.parentNode.parentNode),d){window.Tracker.handlers.filterRemoved({type:d?.dataset.type,category:d?.innerText});const g=n?.findIndex(b=>b.includes(d?.innerText));if(n?.splice(g,1),k(n),o?.dataset?.facetType==="desktop")w();else{const b=document.getElementById("mobile-facet-content-wrapper");v(`/fragments/mobileFacetsMenu/${window.location.search}`,b,{url:window.location.href})}}}),r?.addEventListener("click",()=>{n=[],k(n),o?.dataset.mobileTag||w()})}}customElements.get("facet-tags")||customElements.define("facet-tags",ee);class te extends HTMLElement{constructor(){super();const o=this.querySelector(".facetContainer"),r=this.querySelector(".clear-button");o?.addEventListener("click",async l=>{let d,g;l.target.tagName==="BUTTON"?(d=l.target.dataset.facetname,g=l.target.dataset.facetoption):l.target.tagName==="SPAN"&&(d=l.target.parentElement.dataset.facetname,g=l.target.parentElement.dataset.facetoption),d&&g&&(I(),n=A(n,d,g),window.Tracker.handlers.filter(n.join("|")),k(n),w())}),r?.addEventListener("click",async l=>{const d=l.target.dataset.facetname;n.length&&(I(),$(d),k(n),w())})}}customElements.get("simple-facet-wrapper")||customElements.define("simple-facet-wrapper",te);class ae extends HTMLElement{constructor(){super();const o=this.querySelector(".facetContainer"),r=this.querySelector(".clear-button"),l=o.dataset.facetname;o?.addEventListener("click",d=>{let g;if(d.target.tagName==="BUTTON"?g=d.target:d.target.tagName==="SPAN"&&(g=d.target.parentNode),g){const b=`[${g.dataset.from??"*"} TO ${g.dataset.to??"*"}]`;I(),n=A(n,l,b),window.Tracker.handlers.filter(n.join("|")),k(n),w()}}),r?.addEventListener("click",()=>{n.length&&(I(),$(l),k(n),w())})}}customElements.get("ranged-facets-wrapper")||customElements.define("ranged-facets-wrapper",ae);class ne extends HTMLElement{constructor(){super();const o=this.querySelector(".from-slider"),r=this.querySelector(".to-slider"),l=this.querySelector(".from-input"),d=this.querySelector(".to-input"),g=this.querySelector(".apply-button"),b=g.dataset.facetname;g?.addEventListener("click",async p=>{let L=new URLSearchParams(window.location.search).get("facetFilters")?.split("|")||[];const O=L?.findIndex(N=>N.includes(b));if(O>=0?L[O]=`${b}:[${o.value} TO ${r.value}]`:(L.push(`${b}:[${o.value} TO ${r.value}]`),window.Tracker.handlers.addFilter(b,`${o.value} to ${r.value}`)),k(L),window.Tracker.handlers.filter(L.join("|")),window.innerWidth<1280){const N=document.getElementById("mobile-facet-content-wrapper");v(`/fragments/mobileFacetsMenu/${window.location.search}`,N,{url:window.location.href})}else w()}),o?.addEventListener("input",p=>{B(p.target.value)}),r?.addEventListener("input",p=>{re(p.target.value)}),l?.addEventListener("input",p=>{oe(p.target.value)}),d?.addEventListener("input",p=>{ce(p.target.value)});function B(p){l.value=p,Number(p)>=Number(r?.value)&&(r.value=o?.value,d.value=l?.value),T()}function re(p){d.value=p,Number(p)<=Number(o.value)&&(o.value=r.value,l.value=d.value),T()}function oe(p){o.value=p,Number(p)>=Number(d.value)&&(d.value=p,r.value=p),Number(p)>Number(d.max)&&(r.value=d.max,d.value=d.max,l.value=d.max),T()}function ce(p){Number(p)>Number(d.max)?(r.value=d.max,d.value=d.max):(r.value=p,d.value=p),Number(p)<=Number(l.value)&&(l.value=p,o.value=p,r.value=p),T()}function T(){const p=(Number(o.value)-Number(o.min))/(Number(r.max)-Number(r.min))*100+"%",L=(Number(r.value)-Number(o.min))/(Number(r.max)-Number(r.min))*100+"%";r.style.background=`linear-gradient(
              to right,
              #ddd 0%,
              #ddd ${p},
              #111111 ${p},
              #111111 ${L},
              #ddd ${L},
              #ddd 100%)`}}}customElements.get("slider-facets-wrapper")||customElements.define("slider-facets-wrapper",ne);class se extends HTMLElement{constructor(){super();const o=this.querySelector(".facets-icon"),r=this.querySelector(".mobile-facet-menu"),l=this.querySelector(".mobile-facet-content"),d=this.querySelector(".view-product-btn"),g=this.querySelector(".close-mobile-facet-btn"),b=this.querySelector(".clear-all");o?.addEventListener("click",()=>{r.classList.remove("hidden"),this.classList.add("menu-open"),document.body.classList.add("scrollBlock"),v(`/fragments/mobileFacetsMenu/${window.location.search}`,l,{url:window.location.href})}),g?.addEventListener("click",()=>{r.classList.add("hidden"),this.classList.remove("menu-open"),document.body.classList.remove("scrollBlock")}),b?.addEventListener("click",()=>{const B=new URL(window.location.href);B.searchParams.delete("facetFilters"),B.searchParams.delete("pageNumber"),window.history.pushState(null,"",B.href),v(`/fragments/mobileFacetsMenu/${window.location.search}`,l,{url:window.location.href})}),d?.addEventListener("click",()=>{r.classList.add("hidden"),document.body.classList.remove("scrollBlock"),w()})}}customElements.get("mobile-facets")||customElements.define("mobile-facets",se),U();function ie(){const f=Math.ceil(Number(i)-1).toString(),o=Math.ceil(Number(i)+1).toString(),r=document.querySelector(".pre-page-button"),l=document.querySelector(".next-page-button"),d=new URL(window.location.href),g=new URL(window.location.href);d.searchParams.set("pageNumber",f),g.searchParams.set("pageNumber",o),r?.setAttribute("href",d.href),l?.setAttribute("href",g.href)}function U(){const f=document.querySelector(".pre-page-button"),o=document.querySelector(".next-page-button");f?.addEventListener("click",async r=>{r.preventDefault(),f.classList.contains("text-black")&&(x(),i=Number(i)-1,F(i),w())}),o?.addEventListener("click",async r=>{r.preventDefault(),o.classList.contains("text-black")&&(x(),i=Number(i)+1,F(i),w())})}}}customElements.get("product-list-widgets")||customElements.define("product-list-widgets",ke);const Ce=document.getElementById("DynamicReferralWidget");let S;const Q=window?.tenantConfig?.features?.recaptcha?.enabled;W.subscribe(async c=>{if(!Ce)return;let e;if(window.location.pathname.at(-1)==="/"?e=window.location.pathname.replace("/c","").slice(0,-1):e=window.location.pathname.replace("/c",""),c){const a=(await E({operation:"DynamicReferralWidget",variables:{handle:e,currency:window.siteObj.currency}}))?.data?.page?.widgets.filter(n=>n.__typename==="DynamicReferralWidget"),s=fetch("/fragments/dynamicReferrals",{method:"POST",headers:{"Content-Type":"applicatation/json"},body:JSON.stringify({dynamicReferralData:a})}).then(n=>n.text());Promise.all([s]).then(([n])=>{const i=document.getElementById("DynamicReferralWidget");i.innerHTML=n,Ie()}).catch(n=>{console.error(n)})}});function Ie(){const c=document.getElementById("clipboard"),e=document.getElementById("referral-link");c?.addEventListener("click",function(){if(e.select(),document.execCommand("copy"),!document.querySelector(".tooltip")){const h=document.createElement("div");h.className="tooltip",h.textContent="Copied!",c.appendChild(h),setTimeout(function(){c.removeChild(h)},2e3)}});const t=document.getElementById("referral-email"),a=document.getElementById("referral-modal");t&&t.addEventListener("click",Be);const s=document.getElementById("close-referral-modal"),n=a?.querySelector(".modal-backdrop");s?.addEventListener("click",()=>{i()}),n?.addEventListener("click",()=>{i()});function i(){Q&&(S=recaptchaIds.get().filter(u=>u.referral||u.referral===0),grecaptcha.reset(S[0].referral)),document.getElementById("referral-input").value="",a?.classList.remove("modal")}}function Be(){const c=document.getElementById("referral-modal"),e=document.getElementById("referral-email-form");de("referral-modal","false"),c.showModal(),Q&&Y("referral"),e?.addEventListener("submit",Se)}function Se(c){c.preventDefault(),Q?(z.get()!=="referral"&&Y("referral"),S=recaptchaIds.get().filter(e=>e.referral||e.referral===0),grecaptcha.execute(S[0].referral)):J()}q.subscribe(c=>{if(!c||z.get()!=="referral")return;J({"X-Captcha-Type":"V2_INVISIBLE","X-Captcha-Response":c}),grecaptcha.reset(S[0].referral)});async function J(c={}){const t=document.getElementById("referral-input").value.match(/\S+@\S+/g),a=document.getElementById("referral-error");if(!t?.length){a?.classList.remove("hidden");return}a?.classList.add("hidden");try{(await E({operation:"SendReferralEmail",variables:{emailAddresses:t},customHeaders:c}))?.data?.sendReferralEmail===null?(document.getElementById("referral-content")?.classList.add("hidden"),document.getElementById("referral-success")?.classList.remove("hidden")):a?.classList.remove("hidden")}catch(s){console.error(s.message)}}class Te extends HTMLElement{keyBoardNavigationGoBack;lastActiveElement;constructor(){super(),this.lastActiveElement=null;const e=document.getElementById("helpsearch"),t=document.getElementById("help-content-container"),a=document.getElementById("category-list"),s=document.querySelectorAll(".mobile-help-pannel"),n=document.getElementById("mobile-search-result"),i=document.getElementById("nativeApp");navigator?.userAgent?.includes("Mac OS")&&i?.classList.remove("hidden");const u=window.__HELPCONTENTS__;let h=[];a.addEventListener("keydown",m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),h=[],h.push(u.find(y=>y.title===m.target.innerText)),this.updateCategoryButtonState(m.target),v("/fragments/helpCentreFragment",t,h).then(()=>{e&&(m.preventDefault(),e.setAttribute("tabindex","-1"),e.focus(),this.keyBoardNavigationGoBack=this.querySelector("#back-help-center-nav"),this.keyBoardNavigationGoBack.classList.remove("hidden"),this.keyBoardNavigationGoBack&&this.keyBoardNavigationGoBack.addEventListener("click",()=>{this.lastActiveElement&&(this.lastActiveElement.focus(),this.keyBoardNavigationGoBack.classList.add("hidden"))}))})),window.innerWidth<=1024&&(s.forEach(y=>{n.classList.add("hidden"),y.classList.remove("hidden")}),document.body.classList.add("scrollBlock"))}),a?.addEventListener("click",m=>{h=[],h.push(u.find(y=>y.title===m.target.innerText)),v("/fragments/helpCentreFragment",t,h),this.updateCategoryButtonState(m.target),window.innerWidth<=1024&&(s.forEach(y=>{n.classList.add("hidden"),y.classList.remove("hidden")}),document.body.classList.add("scrollBlock"))}),e.addEventListener("input",async()=>{h=[],window.innerWidth>=1024?(e.value.length>=3?u.map(m=>{const y={title:m.title.toString().toLowerCase(),contents:[]};m.contents.map(C=>{C.accordionHeading.toString().toLowerCase().includes(e.value.toString().toLowerCase())&&y.contents.push(C)}),y.contents.length&&h.push(y)}):h.push(u[0]),v("/fragments/helpCentreFragment",t,h)):e.value.length>=3?(n.classList.remove("hidden"),u.map(m=>{const y={title:m.title,contents:[]};m.contents.map(C=>{C.accordionHeading.includes(e.value)&&y.contents.push(C)}),y.contents.length&&h.push(y)}),v("/fragments/helpCentreSearchResult",n,h)):n.classList.add("hidden")}),t.addEventListener("click",m=>{(m.target.parentElement.classList.contains("back-to-help-centre")||m.target.classList.contains("back-to-help-centre"))&&(m.target.offsetParent?m.target.offsetParent.classList.add("hidden"):m.target.parentElement.offsetParent.classList.add("hidden"),document.body.classList.remove("scrollBlock"))})}updateCategoryButtonState(e){this.lastActiveElement?(this.lastActiveElement.classList.remove("active"),this.lastActiveElement.setAttribute("aria-pressed","false"),this.lastActiveElement=e,this.lastActiveElement.classList.add("active"),this.lastActiveElement.setAttribute("aria-pressed","true")):(this.lastActiveElement=e,this.lastActiveElement.classList.add("active"),this.lastActiveElement.setAttribute("aria-pressed","true"))}}customElements.define("help-centre",Te);const V=document.getElementById("fullName-error"),H=document.getElementById("email-error"),R=document.getElementById("recaptcha-error"),qe=document.getElementById("gdpDisclaimerText")?.innerText||"",P=document.getElementById("waitlist-form"),Pe=document.getElementById("waitlist-email"),M=window?.tenantConfig?.features?.recaptcha?.enabled;P?.addEventListener("submit",xe);if(M){const c=document.getElementById("recaptcha-component");c&&c.setAttribute("data-recaptcha-enabled","true")}function xe(c){c.preventDefault(),M&&q.get()?(R?.classList.add("hidden"),j({"X-Captcha-Type":"V2_VISIBLE","X-Captcha-Response":q.get()})):M&&!q.get()?R?.classList.remove("hidden"):(R?.classList.add("hidden"),j())}async function j(c={}){const e=document.getElementById("waitlist-fullName").value,t=Pe.value;if(e?V?.classList.add("hidden"):V?.classList.remove("hidden"),t?H?.classList.add("hidden"):H?.classList.remove("hidden"),e&&t)try{const a=await E({operation:"SignUpForEmailMarketingCampaign",variables:{name:e,email:t,campaignId:P?.dataset?.campaigncode,messageShown:qe,formIdentifier:P?.dataset?.formid,formLocation:window.location.href},customHeaders:c});a?.data?.signUpForEmailMarketingCampaign===null&&(window.__REGISTEREDRETURNURL__?window.location.href=window.__REGISTEREDRETURNURL__:window.__NOACCOUNTRETURNURL__?window.location.href=window.__NOACCOUNTRETURNURL__:(P?.classList.add("hidden"),document.getElementById("success-message")?.classList?.remove("hidden"))),a?.data?.errors&&window.__ERRORRETURNURL__&&(window.location.href=window.__ERRORRETURNURL__)}catch(a){console.error(a.message)}}be();class Ne extends HTMLElement{constructor(){super();let e=this.querySelector("video"),t=this.querySelector(".controls"),a=t.querySelector('[data-action="video-play"]'),s=t.querySelector('[data-action="video-pause"]'),n=this.querySelector(".theatre"),i=this.querySelector(".theatre-btn"),u=this.querySelector('[data-action="theatre-close"]');i.addEventListener("click",()=>{n.classList.remove("hidden")}),u.addEventListener("click",()=>{n.classList.add("hidden")}),a.addEventListener("click",()=>{a.classList.add("hidden"),s.classList.remove("hidden"),e.play(),e.loop=!0}),s.addEventListener("click",()=>{s.classList.add("hidden"),a.classList.remove("hidden"),e.pause(),e.loop=!1})}}customElements.define("video-controller",Ne);class Ae extends HTMLElement{constructor(){super();const e=()=>{Tracker.store.get("trustpilot")||t()},t=()=>{let s=document.createElement("script");s.setAttribute("type","text/javascript"),s.setAttribute("src","//widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js"),s.setAttribute("aysnc","true"),this.appendChild(s),a()},a=()=>{Tracker.store.set("trustpilot","true")};e()}}customElements.define("trustpilot-wrapper",Ae);class Re extends HTMLElement{constructor(){super();const e=[...this.querySelector(".tab-headings")?.children],t=[...this.querySelector(".tab-contents")?.children];e.forEach((u,h)=>{u.classList.remove("active-tab"),u.addEventListener("click",m=>{n(),i(),s(m,h)})});const a=()=>{e[0].click()},s=(u,h)=>{let m=t[h];u.target.classList.add("active-tab"),m.classList.remove("hidden")},n=()=>{e.forEach((u,h)=>{u.classList.remove("active-tab")})},i=()=>{t.forEach((u,h)=>{u.classList.add("hidden")})};a()}}customElements.define("widget-tabs",Re);class Me extends HTMLElement{constructor(){super();const e=this.querySelectorAll(".sortType"),t=this.querySelectorAll(".checkMark");e?.forEach((s,n)=>s.onclick=async()=>{t.forEach(i=>i.classList.add("hidden")),t[n].classList.remove("hidden"),a(s.dataset.facetname)});function a(s){const n=new URL(window.location.href);n.searchParams.set("sort",s),n.searchParams.delete("pageNumber"),window.history.pushState(null,"",n.href);const i=new PopStateEvent("popstate",{state:null});dispatchEvent(i)}}}customElements.define("sort-button",Me);const{lang:G}=window;async function We(c){try{await X(c,!1,!0)}catch(e){throw e}}class Qe extends HTMLElement{categoryButtons;bundleItems;countIndicator;bundleMaxProducts;summaryContainer;mobileProgressIndicator;mobileAddToBasketButton;defaultQuantity;addToBasketErrorElements;constructor(){super(),this.addToBasketErrorElements=this.querySelectorAll(".atb-error"),this.bundleItems={},this.defaultQuantity=1,this.bundleMaxProducts=parseInt(this.dataset?.bundlemaxproducts),this.handleScrollToCategory=this.handleScrollToCategory.bind(this),this.handleWidgetWideClick=this.handleWidgetWideClick.bind(this),this.handleQuantityChange=this.handleQuantityChange.bind(this)}connectedCallback(){"ontouchstart"in window?this.addEventListener("touchstart",this.handleWidgetWideClick):this.addEventListener("click",this.handleWidgetWideClick),this.addEventListener("quantityChange",this.handleQuantityChange),this.categoryButtons=this.querySelectorAll(".list-category-button"),this.categoryButtons.forEach(e=>e.addEventListener("click",this.handleScrollToCategory)),this.countIndicator=this.querySelectorAll(".current-count-text"),this.summaryContainer=this.querySelector(".summary-container"),this.mobileProgressIndicator=this.querySelector(".mobile-progress-indicator"),this.mobileAddToBasketButton=this.querySelector(".mobile-add-to-basket-btn")}disconnectedCallback(){this.categoryButtons&&this.categoryButtons.forEach(e=>e.removeEventListener("click",this.handleScrollToCategory)),this.removeEventListener("quantityChange",this.handleQuantityChange),"ontouchstart"in window?this.removeEventListener("touchstart",this.handleWidgetWideClick):this.removeEventListener("click",this.handleWidgetWideClick)}handleWidgetWideClick(e){let t=this.getClosestCardElement(e.target);if(!t)return;const a=t.dataset?.type;switch(a){case"itemCard":this.handleItemCardSelection(e,t);break;case"addToBasketBtn":let s=e.target;this.addToBasketErrorElements.forEach(i=>i.classList.add("hidden"));let n=[];if(this.getTotalWidgetQuantity()<=this.bundleMaxProducts){for(let i in this.bundleItems)this.bundleItems[i].forEach(u=>{n.push({sku:u.sku,quantity:u.quantity})});We(n).then(()=>{this.addToBasketErrorElements.forEach(i=>i.classList.add("hidden")),s.disabled=!0}).catch(i=>{s.disabled=!1,this.addToBasketErrorElements.forEach(u=>u.classList.remove("hidden"))})}break;case"quantity-button":break;case"infoButton":break;default:console.warn("Unhandled data type in click event:",a)}}getClosestCardElement(e){let t=e;for(;t&&!t.dataset?.type;)t=t.parentElement;return t}handleItemCardSelection(e,t){const s=t.closest(".byob-category-wrapper").dataset?.categoryid,n=t.dataset?.sku;this.bundleItems[s]||(this.bundleItems[s]=[]),document.getElementById(`byob-${n}`)?.classList.contains("active")?this.removeItem(t,s,n):this.addItem(t,s,n),this.updateCategoryCount(s),this.updateUI()}removeItem(e,t,a){const s=this.bundleItems[t].findIndex(i=>i.sku===a);if(s===-1)return;const n=this.bundleItems[t].splice(s,1)[0];e.classList.remove("active"),this.adjustAvailableQuantitiesOnRemove(e,t,n)}addItem(e,t,a){if(e.classList.contains("active"))return;const s=parseInt(e.closest(".byob-category-wrapper").dataset?.maxquantity);if(this.getTotalQuantityInCategory(t)>=s&&s===1&&this.removeLastItemFromCategory(t),this.getTotalQuantityInCategory(t)<s)this.addNewItemToCategory(e,t,a);else{this.querySelectorAll(".byob-card-tooltip").forEach(u=>u.classList.add("hidden"));const i=e.querySelector(".byob-card-tooltip");i&&i.classList.remove("hidden")}}addNewItemToCategory(e,t,a){const s=parseFloat(e.dataset?.price);e.dataset?.stock==="true"&&(this.bundleItems[t].push({sku:a,quantity:this.defaultQuantity,currentSelectedItemPrice:s}),e.classList.add("active"),this.adjustAvailableQuantitiesOnAdd(e))}removeLastItemFromCategory(e){if(this.bundleItems[e].length===0)return;const t=this.bundleItems[e].pop(),a=this.querySelector(`[data-sku="${t.sku}"][data-categoryid="${e}"]`);a&&(a.classList.remove("active"),this.adjustAvailableQuantitiesOnRemove(a,e,t))}adjustAvailableQuantitiesOnAdd(e){const t=e.querySelector(".byob-quantity-container"),a=e.querySelector("#byob-quantity-input");e.closest(".byob-category-wrapper").querySelectorAll(".byob-item-wrapper").forEach(n=>{n.dataset.availablequantity=parseInt(n.dataset.availablequantity)-this.defaultQuantity}),a&&t.classList.remove("hidden")}adjustAvailableQuantitiesOnRemove(e,t,a){const s=e.querySelector(".byob-quantity-container"),n=e.querySelector("#byob-quantity-input");e.closest(".byob-category-wrapper").querySelectorAll(".byob-item-wrapper").forEach(u=>{u.dataset.availablequantity=parseInt(u.dataset.availablequantity)+a.quantity}),n&&(n.value="1",s.classList.add("hidden"))}getTotalQuantityInCategory(e){return this.bundleItems[e].reduce((t,a)=>t+a.quantity,0)}updateCategoryCount(e){const t=this.querySelector(`[data-category="${e}"]`),a=parseInt(t.dataset?.maxquantity),s=document.getElementById(e).querySelector(".accordion-item-subtitle"),n=t.querySelector(".category-count"),i=this.getTotalQuantityInCategory(e);n.textContent=`${i}`,s.textContent=G.altitude?.composites?.buildyourownbundle?.selecteditemscategory?window.altitude.i18n(()=>G.altitude.composites?.buildyourownbundle?.selecteditemscategory,i,a):`${i} of ${a} Selected`,i===a?(n.dataset.full="true",s.dataset.full="true"):(n.dataset.full="false",s.dataset.full="false")}updateProgressBarUI(e,t){const n=250/t*e,i=Math.min(n,250),u=100/t*e,h=this.querySelector(".circular-progress-bar"),m=this.querySelector(".mobile-progress-bar-progress ");m&&(this.querySelector(".mobile-progress-bar").setAttribute("aria-valuenow",e),m.style.width=`${u}%`),h&&(h.style.background=`conic-gradient(#4d4f53 ${i}deg, #ededed 0deg)`)}getTotalPriceWidget(){let e=0;for(let t in this.bundleItems)e+=this.bundleItems[t].reduce((a,s)=>a+s.currentSelectedItemPrice*s.quantity,0);return we(e,window.__PRICE_LOCALE__,window.__CURRENCY_LOCALE__)}handleQuantityChange(e){const{detail:{quantityChange:t},target:a}=e,s=a.querySelector(".byob-item-card").dataset?.sku,n=a.closest(".byob-category-wrapper").dataset?.categoryid;this.bundleItems[n]||(this.bundleItems[n]=[]);const i=this.bundleItems[n].findIndex(u=>u.sku===s);i>-1?(this.bundleItems[n][i].quantity+=t,this.bundleItems[n][i].quantity<=0&&this.bundleItems[n].splice(i,1)):t>0&&this.bundleItems[n].push({sku:s,quantity:this.defaultQuantity,price:parseFloat(a.dataset?.price)}),this.updateCategoryCount(n),this.getTotalPriceWidget(),this.updateUI()}updateUI(){const e=this.getTotalWidgetQuantity(),t=this.querySelector("#byob-desktop-price-text"),a=this.querySelector("#byob-mobile-price-text");this.countIndicator.forEach(s=>s.textContent=e),this.updateProgressBarUI(e,this.bundleMaxProducts),t&&(t.innerText=this.getTotalPriceWidget()),a&&(a.innerText=this.getTotalPriceWidget()),e===parseInt(this.bundleMaxProducts)||e>0&&parseInt(this.bundleMaxProducts)===200?(this.summaryContainer.classList.remove("hidden"),this.mobileProgressIndicator.dataset.bundlefull="true",this.mobileAddToBasketButton.classList.remove("hidden")):(this.summaryContainer.classList.add("hidden"),this.mobileProgressIndicator.dataset.bundlefull="false",this.mobileAddToBasketButton.classList.add("hidden"))}getTotalWidgetQuantity(){let e=0;for(let t in this.bundleItems)e+=this.bundleItems[t].reduce((a,s)=>a+s.quantity,0);return e}handleScrollToCategory(e){const a=e.target.dataset?.category;this.scrollToCategoryAndOpen(a)}scrollToCategoryAndOpen(e){const t=document.getElementById(e);if(t){t.scrollIntoView({behavior:"smooth",block:"start"});const a=t.closest(".accordion");a&&!a.getAttribute("aria-expanded")&&(a.setAttribute("data-expanded",""),t.setAttribute("aria-expanded","true"))}}}customElements.get("build-your-bundle")||customElements.define("build-your-bundle",Qe);class _e extends HTMLElement{increaseQuantityBtn;decreaseQuantityBtn;quantityInput;availableCategoryQuantity;quantityContainer;infoButton;constructor(){super(),this.quantityContainer=this.querySelector(".byob-quantity-container"),this.availableCategoryQuantity=parseInt(this.dataset?.availablequantity),this.handleIncreaseClick=this.handleIncreaseClick.bind(this),this.handleDecreaseClick=this.handleDecreaseClick.bind(this)}static get observedAttributes(){return["data-availablequantity"]}attributeChangedCallback(e,t,a){e==="data-availablequantity"&&(this.availableCategoryQuantity=parseInt(a),this.updateButtonStates()),this.infoButton=this.querySelector(".product-info-btn"),this.infoButton.addEventListener("click",this.handleInfoButtonClick)}connectedCallback(){this.infoButton=this.querySelector(".product-info-btn"),this.infoButton.addEventListener("click",this.handleInfoButtonClick),this.quantityContainer&&(this.increaseQuantityBtn=this.querySelector(".byob-increase-quantity"),this.decreaseQuantityBtn=this.querySelector(".byob-decrease-quantity"),this.quantityInput=this.querySelector(".byob-quantity-input"),this.increaseQuantityBtn.addEventListener("click",e=>{e.stopPropagation(),this.handleIncreaseClick()}),this.decreaseQuantityBtn.addEventListener("click",e=>{e.stopPropagation(),this.handleDecreaseClick()}),this.updateButtonStates())}disconnectedCallback(){this.infoButton.removeEventListener("click",this.handleInfoButtonClick),this.increaseQuantityBtn&&this.increaseQuantityBtn.removeEventListener("click",this.handleIncreaseClick),this.decreaseQuantityBtn&&this.decreaseQuantityBtn.removeEventListener("click",this.handleDecreaseClick)}showDescriptionModal(e,t,a){ue("/fragments/productDescriptionFragment",{mainProductContent:e,variantProductContent:t,title:a})}handleIncreaseClick(){this.updateQuantity(1)}handleDecreaseClick(){this.updateQuantity(-1)}updateQuantity(e){const t=this.availableCategoryQuantity;let s=parseInt(this.quantityInput.value)+e;this.quantityInput.value=s.toString(),this.closest(".byob-category-wrapper").querySelectorAll(".byob-item-wrapper").forEach(n=>n.dataset.availablequantity=String(t-e)),this.dispatchEvent(new CustomEvent("quantityChange",{bubbles:!0,detail:{quantityChange:e}})),this.updateButtonStates()}handleInfoButtonClick=async()=>{try{const e=parseInt(this.infoButton.dataset?.sku),[t,a]=await Promise.all([E({operation:"ProductVariantContent",variables:{sku:e}}),E({operation:"ProductDescription",variables:{sku:e}})]);a?.data?.product&&this.showDescriptionModal(a.data.product?.content,t.data?.productVariant?.content,t.data.productVariant?.title||a.data.product?.title)}catch(e){console.error("Failed to fetch product data:",e)}};updateButtonStates(){this.decreaseQuantityBtn&&this.increaseQuantityBtn&&(this.decreaseQuantityBtn.disabled=parseInt(this.quantityInput?.value)<=1,this.increaseQuantityBtn.disabled=this.availableCategoryQuantity<=0)}}customElements.get("byob-product-item")||customElements.define("byob-product-item",_e);

</script>

</body>
</html>
