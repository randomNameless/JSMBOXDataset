<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vue-universal-actionbox.html</title>
</head>
<body>

<script>
!function(){"use strict";avm.define("vue-action-boxes",function(){function a(a,h,k){var l,m=k.options.option_1.pricelist,n=c(m),o=b(k.options),p=0,q=o[0];"undefined"!=typeof k.default_option?(k.default_option=parseInt(k.default_option),p=k.default_option-1):"undefined"!=typeof k.platform_detect&&(k.platform_detect="true"===k.platform_detect,l=e(k.options),p=l.indexOf(j)>-1?l.indexOf(j):l.indexOf(k.default_platform)),k.boxCount=n,k.datasetsBoxes=o,k.datasetBoxes=q,k.showRegularBoxes=!1,k.contentForBox="",k.selectedIndex=p,k.selectedValue="",k.hide_toggler="true"===k.hide_toggler,k.horizontal_toggler="true"===k.horizontal_toggler,k.toggler_placeholder="true"===k.toggler_placeholder,k.hide_desktop_title="true"===k.hide_desktop_title,k.hide_mobile_title="true"===k.hide_mobile_title,k.hide_desktop_period="true"===k.hide_desktop_period;try{var r=JSON.parse(sessionStorage.selectedIndex)[location.pathname]["vue-action-box-"+a];k.selectedIndex=r>=0?r:p}catch(s){}return window["vue-action-box-"+a]=new Vue({el:h,delimiters:["<%","%>"],data:function(){return k},computed:{eventData:function(){return new CustomEvent("actionbox-updated",{detail:{element:this.$el}})}},methods:{changeData:function(a){this.$nextTick(function(){window.dispatchEvent(this.eventData)});var b=this.options["option_"+(a+1)],c="undefined"==typeof b.content;this.datasetBoxes=this.datasetsBoxes[a],this.showRegularBoxes=!!c,this.contentForBox=c?"":d(b.content),this.selectedIndex=a,this.selectedValue=b.toggler_text;var e=this;setTimeout(function(){f(e)},10)}},mounted:function(){if(this.changeData(this.selectedIndex),this.horizontal_toggler)if(this.options.option_2){this.horizontal_toggler=g(a);var b=this;i(window).on("resize",function(){b.horizontal_toggler=g(a)})}else this.horizontal_toggler=!0;this.$nextTick(function(){window.dispatchEvent(this.eventData)})},watch:{selectedIndex:function(b){var c={};c[location.pathname]={};try{c=JSON.parse(sessionStorage.selectedIndex)}catch(s){}c[location.pathname]||(c[location.pathname]={}),c[location.pathname]["vue-action-box-"+a]=b,sessionStorage.selectedIndex=JSON.stringify(c)}}}),window["vue-action-box-"+a]}function b(a){var b=[];for(var c in a)"undefined"!=typeof a[c].pricelist?b.push(a[c].pricelist):b.push(null);return b}function c(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}function d(a){return a.replace(new RegExp("&lt;","gm"),"<").replace(new RegExp("&gt;","gm"),">")}function e(a){var b=1,c=[];for(var d in a)c.push(a["option_"+b].platform),b++;return c}function f(a){var b=i(a.$el),c=b.find(".js-toggle-to-option");c.length>0&&c.on("click",function(b){var c=i(this).data("option")-1;b.preventDefault(),a.changeData(c)})}function g(a){var b,c=i(".js-vue-action-box").eq(a),d=c.find(".js-actionbox-container"),e=d.width(),f=c.find(".js-horizontal-toggler"),g=f.find(".js-toggler"),h=!1,j=0,k=[];if(g.length<4)for(var l=0;l<g.length;l++){if(j=g.eq(l).outerWidth(),k.push(j),j>180){h=!1;break}h=!0}return h&&(b=Math.max.apply(Math,k),b*g.length<=e?g.outerWidth(b):h=!1),h}function h(a){a.addEventListener("click",function(){if(null===document.querySelector(a.getAttribute("data-target"))){var b=document.querySelector("#body-inner"),c=a.getAttribute("data-target"),d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var a=document.createElement("div");a.innerHTML=this.responseText,b.append(a),i(c).modal("show")}},d.open("GET","https://"+avastGlobals.web.domain+"/"+avastGlobals.web.locale+"/"+c.substring(1),!0),d.setRequestHeader("x-requested-with","XMLHttpRequest"),d.send(null)}})}Vue.config.devtools=!0,Vue.config.errorHandler=function(a,b,c){console.log("errorHandler"),console.log(1,a),console.log(2,b),console.log(3,c)};var i=avm.require("jquery"),j=avastGlobals.detect.os.name.toLowerCase(),k=i(".js-vue-action-box"),l=function(){return i('link[href*=".css"]').attr("href").split("c/")[0]}();return 0!==k.length&&(Vue.component("toggler",{template:"#toggler",delimiters:["<%","%>"],props:["options","selected_index","selected_value","hide_toggler","horizontal_toggler","toggler_placeholder"],computed:{singleOption:function(){return!this.options.option_2}},methods:{handleClick:function(a,b){this.$emit("change_data",b)},getTogglerCssClasses:function(a){var b=!1,c=!1;return(a?Number(a.substring(7))-1:null)===this.selected_index&&(b=!0),this.options.option_2||(b=!1,c=!0),{active:b,disabled:c}}}}),Vue.component("box",{delimiters:["<%","%>"],props:["set","iterator","options","selected_index","hide_desktop_title","hide_mobile_title","legal_gb_text","subscription_text","it_works_out","saving_compare_month","saving_compare_year","first_yr","first_2yrs","first_3yrs","per_year","per_2years","per_3years","button_default_text","price_for_month","price_for_first_year","price_for_first_2years","price_for_first_3years"],template:"#box",data:function(){return{optionData:this.options["option_"+(this.selected_index+1)],pricelist:this.set[Object.keys(this.set)[this.iterator]]}},methods:{htmlDecode:function(a){var b=document.createElement("div");return b.innerHTML=a,0===b.childNodes.length?"":b.childNodes[0].innerText},renderLabel:function(a){var b=this.set[Object.keys(this.set)[this.iterator]].discountFormatted,c=this.set[Object.keys(this.set)[this.iterator]].discountPercent;return a.replace("##discount_price##",b).replace("##discount_percentage##",c)},setCampaignMarkerCookie:function(){var a=this.$el.querySelectorAll('[data-role="cart-link"]');return a.length&&this.campaignMarker.setCampaignMarkerCookie(a),avastGlobals.web.abtest!==undefined&&a.forEach(function(a){var b=a.getAttribute("data-campaign-marker").split("~"),c=a.getAttribute("href").split("~"),d=avastGlobals.web.abtest.ticketNumber,e=avastGlobals.web.abtest.testVariant;b[3]=d,b[4]=e,c[3]=d,c[4]=e,a.setAttribute("data-campaign-marker",b.join("~")),a.setAttribute("href",c.join("~"))}),a},footerText:function(a){if(a===undefined)return'<span class="subscription-trigger" data-target="#subscription-details-modal" data-toggle="modal" data-role="button" tabindex="0">'+this.subscription_text+'&nbsp;<span class="icon icon-info"></span></span>';var b=a.split("</"),c=b.length,d='<span class="subscription-trigger" data-target="#subscription-details-modal" data-toggle="modal" data-role="button" tabindex="0">'+this.subscription_text+'&nbsp;<span class="icon icon-info"></span></span>',e=a;if(/bi-cart-link|bi-download-link/.test(a)){var f='<span class="subscription-trigger" data-target="#subscription-details-modal" data-toggle="modal" data-role="button" tabindex="0">'+this.subscription_text+'&nbsp;<span class="icon icon-info"></span></span><br>',b=a.split("<a ");if(c=b.length,0===b[0].length)b[0]=f,e=b.join("<a ");else if(/<\//.test(b[0])){var g=b[0].split("</"),h=g.length;"."!==g[h-2].slice(-1)&&(g[h-2]=g[h-2]+". ",b[0]=g.join("</")+f,e=b.join("<a "))}else e="."!==b[0].slice(-1)?b[0]+". "+f:b[0]+" "+f}else if(c>1){var i=b[c-1].split(">");0===i[1].trim().length?(b[c-2]="."!==b[c-2].slice(-1)?b[c-2]+".":b[c-2],e=b.join("</")+" "+d):e="."!==a.trim().slice(-1)?a+". "+d:a+" "+d}else e="."!==a.slice(-1)&&""!==a.trim()?a+". "+d:a+" "+d;return e},footerTextAlone:function(){return'<span class="subscription-trigger" data-target="#subscription-details-modal" data-toggle="modal" data-role="button" tabindex="0">'+this.subscription_text+'&nbsp;<span class="icon icon-info"></span></span>'},getClasses:function(){return("M"==this.pricelist.priceFlag?"row-month":"row-year")+" "+("discountCoupon"in this.pricelist&&""!=this.pricelist.discountCoupon?"row-discount":"")}},mounted:function(){this.campaignMarker=avm.require("avast.web.campaignMarkerCookie")(),this.setCampaignMarkerCookie(),null!==this.$el.querySelector('[data-toggle="modal"][data-target]')&&h(this.$el.querySelector('[data-toggle="modal"][data-target]'))},updated:function(){this.setCampaignMarkerCookie(),this.optionData=this.options["option_"+(this.selected_index+1)]},computed:{getButtonText:function(){return"undefined"!=typeof this.optionData.button_text&&""!==this.optionData.button_text&&"undefined"!=typeof this.optionData.button_text["box"+(this.iterator+1)]&&""!==this.optionData.button_text["box"+(this.iterator+1)]?this.optionData.button_text["box"+(this.iterator+1)]:this.button_default_text},compileOldPrice:function(){var a,b=this.set[Object.keys(this.set)[this.iterator]],c=b.priceIntegerPart,d=b.decimalSeparator,e=b.priceDecimalPart,f=b.currencySymbol,g=b.priceFormat;return a=c+(""!=e?d+e:""),g.replace("#c",f).replace("#p",a)},legalText:function(){var a=this.set[Object.keys(this.set)[this.iterator]];return this.legal_gb_text.replace("$$",a.priceFor1year)},monthPrice:function(){var a=this.set[Object.keys(this.set)[this.iterator]];return"realPriceRoundedPerMonth"in a&&a.realPriceRoundedPerMonth!==undefined&&a.realPriceRoundedPerMonth},priceForYear:function(){var a=this.set[Object.keys(this.set)[this.iterator]],b=this.first_yr;if("discountCoupon"in a&&""!=a.discountCoupon){switch(a.maintenance){case"24":b=this.first_2yrs;break;case"36":b=this.first_3yrs;break;default:b=this.first_yr}return b.replace("$old$",a.pricePerYearFormatted).replace("$new$",a.realPricePerYearFormatted)}switch(a.maintenance){case"24":b=this.per_2years;break;case"36":b=this.per_3years;break;default:b=this.per_year}return b.replace("$$",a.realPricePerYearFormatted)},compareText:function(){return'<span class="subscription-trigger" data-target="#subscription-details-modal" data-toggle="modal" data-role="button" tabindex="0">'+this.saving_compare_year.replace("$$",this.set[Object.keys(this.set)[this.iterator]].priceFor1year)+' <span class="nowrap">'+this.subscription_text+'&nbsp;<span class="icon icon-info"></span></span></span>'}}}),Vue.component("box-content",{delimiters:["<%","%>"],props:["content"],template:"#box-content",computed:{updateImageLinks:function(){return this.content.replace(/'i\//gm,"'"+l+"i/")}}}),Vue.component("installments",{delimiters:["<%","%>"],props:["price","sr_inst_text","installments_placeholder"],template:"#installments",data:function(){return{}},computed:{installmentsPosition:function(){return this.price.installmentsFormat.indexOf("#i")>this.price.installmentsFormat.indexOf("#p")?"before":"after"}}}),Vue.component("price-wrapper",{delimiters:["<%","%>"],props:["options","price","oldprice","text_first_month","text_first_yr","text_first_2yrs","text_first_3yrs","text_year","text_month","text_2years","text_3years"],template:"#price-wrapper",data:function(){return{}},computed:{symbolShowPrefix:function(){return/^#c/.test(this.price.priceFormat)},symbol:function(){return this.symbolShowPrefix?this.price.currencySymbol.replace("&nbsp;",""):"&nbsp;"+this.price.currencySymbol.replace("&nbsp;","")},decimal:function(){return this.price.decimalSeparator+this.price.realPriceDecimalPart},showDecimal:function(){return""!==this.price.realPriceDecimalPart},priceRowSize:function(){return this.price.realPriceIntegerPart.replace(this.price.thousandSeparator," ").length>5?"price-row-medium":""},period:function(){if("M"==this.price.priceFlag)return this.text_month;if("discountCoupon"in this.price&&""!==this.price.discountCoupon)switch(this.price.maintenance){case"1":return this.text_first_month;case"24":return this.text_first_2yrs;case"36":return this.text_first_3yrs;default:return this.text_first_yr}else switch(this.price.maintenance){case"1":return this.text_month;case"24":return this.text_2years;case"36":return this.text_3years;default:return this.text_year}}},methods:{updatePeriodForUk:function(){"en-gb"==avastGlobals.web.locale&&(!1 in this.price||"priceFlag"in this.price&&"M"!==this.price.priceFlag)&&"1"!==this.price.maintenance&&("36"===this.price.maintenance?this.period="/3 years":"24"===this.price.maintenance?this.period="/2 years":this.period="/year")}},updated:function(){this.updatePeriodForUk()},mounted:function(){this.updatePeriodForUk()}}),k.each(function(b,c){var d=this;a(b,d,i(d).data().settings)}),{getDatasetForBoxes:b,objectSize:c,intializeVueInstance:a,convertStringToHTML:d,shouldDisplayHorizontalToggler:g})}())}();
//# sourceMappingURL=vue-universal-actionbox.js.map
</script>

</body>
</html>
