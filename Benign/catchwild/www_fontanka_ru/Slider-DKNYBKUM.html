<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slider-DKNYBKUM.html</title>
</head>
<body>

<script>
import{l as q,s as G,k as o,j as J,r,w as K,q as Q,v as V,C as Y,B as Z,D as ee,F as ae,E as M,G as te,_ as le}from"./vue-BTg2e_qy.js";import{_ as ne}from"./index-DJp284ij.js";const d=1,E=2,S=3,se=q({__name:"Slider",props:{initialIndex:{default:1},initialHeight:{default:0},gap:{default:16},wrapAround:{type:Boolean,default:!1},addCopy:{type:Boolean,default:!0},groupCells:{default:1},animationDuration:{default:500}},emits:["slideChange"],setup(N,{expose:R,emit:P}){const t=N,v=P,i=G(),C=o(()=>i.value?Array.from(i.value.children):[]),l=o(()=>C.value.length),T=o(()=>l.value-1),I=o(()=>T.value-1),{initialHeight:k}=J(t),a=r(1),_=r(k.value),c=r(0),s=r(!1),m=r(!1),h=r(0),p=r(0),f=r(!1),x=o(()=>c.value/2+t.gap),u=o(()=>Array.from({length:l.value+S},(e,n)=>(c.value+t.gap)*n)),O=()=>{if(!s.value){if(!t.wrapAround&&a.value===1){s.value=!1;return}s.value=!0,a.value=D(a.value-t.groupCells),v("slideChange",{slide:a.value<0?l.value:a.value,direction:"right"})}},j=()=>{if(!s.value){if(!t.wrapAround&&a.value===l.value){s.value=!1;return}s.value=!0,a.value=D(a.value+t.groupCells),v("slideChange",{slide:a.value>l.value?d:a.value,direction:"left"})}},U=()=>{s.value=!1},A=e=>{if(!m.value)return 0;if(i.value){const{width:n}=i.value.getBoundingClientRect();return t.wrapAround?-u.value[e]+n/2+x.value:u.value[e]>$.value&&$.value<=u.value[e-1]?(v("slideChange",{slide:l.value,direction:"left"}),-$.value):-u.value[e-1]}return 0},L=e=>{s.value||(e instanceof MouseEvent?h.value=e.clientX:h.value=e.touches[0].clientX,p.value=h.value,f.value=!0,s.value=!1)},w=e=>{f.value&&(e instanceof MouseEvent?p.value=e.clientX:p.value=e.touches[0].clientX)},D=e=>{if(!t.wrapAround){if(e>l.value)return l.value;if(e<d)return d}return e},y=()=>{if(!f.value)return;f.value=!1;const n=p.value-h.value,g=c.value*.2,X=D(a.value-Math.round(n/(c.value+t.gap)));Math.abs(n)>g&&(s.value=!0,a.value=X,v("slideChange",{slide:a.value,direction:n<0?"left":"right"}))},$=o(()=>{if(i.value){const{width:e}=i.value.getBoundingClientRect();return(c.value+t.gap)*l.value-e-t.gap}return 0}),b=o(()=>`transform: translateX(${f.value?A(a.value)+(p.value-h.value):A(a.value)}px);
     transition: ${s.value&&!f.value?`transform ${t.animationDuration}ms`:`opacity ${t.animationDuration}ms`};
     height: ${_.value}px;
     opacity: ${m.value?"1":"0"};
     `),H=()=>{C.value.forEach((e,n)=>{e.setAttribute("style",z(n+1))})},z=e=>{if(t.wrapAround){if(e===d&&a.value>=I.value)return`transform: translateX(${u.value[l.value]}px)`;if(e===E&&a.value>=T.value)return`transform: translateX(${u.value[l.value+1]}px)`;if(e===S&&a.value>=l.value)return`transform: translateX(${u.value[l.value+E]}px)`;if(e===l.value&&a.value<=S)return`transform: translateX(-${u.value[d]}px)`;if(e===T.value&&a.value<=E)return`transform: translateX(-${u.value[E]}px)`;if(e===I.value&&a.value<=d)return`transform: translateX(-${u.value[S]}px)`}return`transform: translateX(${u.value[e-1]}px)`},F=e=>{if(e<=0){setTimeout(()=>{s.value=!1,a.value=l.value,v("slideChange",{slide:a.value,direction:"right"})},t.animationDuration);return}e>l.value&&setTimeout(()=>{s.value=!1,a.value=1,v("slideChange",{slide:a.value,direction:"left"})},t.animationDuration)},W=()=>{if(m.value=!1,a.value=t.initialIndex,_.value=t.initialHeight,i.value){let e=t.initialHeight,n=0;C.value.forEach(g=>{const{height:X,width:B}=g.getBoundingClientRect();e=X>e?X:e,n=B>n?B:n}),_.value=e,c.value=n,H(),document.addEventListener("mousemove",w),document.addEventListener("mouseup",y),m.value=!0}};return K(a,e=>{t.wrapAround&&(F(e),H())}),Q(()=>{W()}),V(()=>{i.value&&(document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",y))}),R({moveToPrevSlide:O,moveToNextSlide:j}),(e,n)=>(Y(),Z("div",{class:M([e.$style.slider]),onTouchstartPassive:L,onTouchmovePassive:w,onTouchendPassive:y,onMousedown:le(L,["stop","prevent"])},[ee("div",{ref_key:"sliderContainer",ref:i,class:M(e.$style.wrap),style:te(b.value),onTransitionend:U},[ae(e.$slots,"default")],38)],34))}}),ue="slider_ncsjX",ie="wrap_ncsjX",oe={slider:ue,wrap:ie},re={$style:oe},fe=ne(se,[["__cssModules",re]]);export{fe as U};

</script>

</body>
</html>
