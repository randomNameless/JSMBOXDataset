<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>%5BrunId%5D-b6a87aa3509cf4ce.html</title>
</head>
<body>

<script>
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16016],{78736:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[url]/runs/[runId]",function(){return t(90685)}])},81658:function(e,s,t){"use strict";t.d(s,{c:function(){return T}});var n=t(28171),r=t(13982),i=t(78448),a=t(94626),l=t(26820),c=t(73927),d=t(90921),o=t(36077),m=t(91313),u=t(83524),x=t(39835),h=t(16447),j=t(19903),p=t(901),f=t(41318),g=t(35612),b=t(37437),v=t(18181),y=t(84321),N=t(3603);let w=e=>{let{commentable:s,refresh:t}=e,{properties:r,permissions:a}=s,[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[x,p]=(0,i.useState)(),[w,k]=(0,i.useState)(r.disabled),[_,T]=(0,i.useState)(r.locked),{t:C}=(0,m.QT)(),I=N.vu.get(s.itemType)||"item",Z=C("forums:nouns.".concat(I)),M=(0,j.q)(s.itemType),{canManage:R}=a;return R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.p,{open:l,onOpenChange:c,children:(0,n.jsxs)(o.y,{children:[(0,n.jsx)(o.y.Header,{title:C("forums:comment_settings")}),(0,n.jsxs)(g.l,{applying:d,error:x,onSubmit:()=>{u(!0),h.x1.PutCommentableSettings({itemType:s.itemType,itemId:s.itemId,disabled:w,locked:_}).then(()=>{c(!1),u(!1),t()}).catch(e=>{p(e),u(!1)})},children:[(0,n.jsxs)(b.Z.Group,{children:[(0,n.jsx)(b.Z.Switch,{name:"disabled",label:"Disable ".concat(M.plural," for this ").concat(Z),help:"Existing ".concat(M.plural," will be hidden, new ").concat(M.plural," cannot be posted."),checked:w,setChecked:k}),(0,n.jsx)(b.Z.Switch,{name:"locked",label:"Lock ".concat(M.plural," for this ").concat(Z),help:"Existing discussion will be kept, but new ".concat(M.plural," cannot be posted."),checked:_,setChecked:T})]}),(0,n.jsx)(b.Z.Group,{children:(0,n.jsx)(b.Z.Button,{type:"submit",children:"Save"})})]})]})}),(0,n.jsx)(v.v.Overflow,{children:(0,n.jsx)(v.v.Item,{icon:(0,n.jsx)(f.Z,{className:"h-5 w-5"}),label:C("forums:comment_settings"),onClick:()=>c(!0)})})]}):null};var k=t(25983),_=t(16751);let T=e=>{let{itemType:s,itemId:t,moderatorList:a=[]}=e,{session:l,loaded:c}=(0,x.kP)(),o=l.signedIn?"POST":"GET",[m,j]=(0,i.useState)(1),f={itemType:s,itemId:t,page:m},{data:g,isLoading:b,refetch:v}=(0,r.a)({queryKey:["GetCommentsList",f],queryFn:()=>h.x1.GetCommentList(f,{method:o}),enabled:c}),y=(0,i.useCallback)(e=>{j(e)},[]),[N]=(0,u.l)(g),w=(0,i.useCallback)(()=>{v().catch(p.ZT)},[v]),k=(0,i.useMemo)(()=>new Map(a.map(e=>[e.userId,e.level])),[a]);if(b||!g)return(0,n.jsx)(d.c,{});let{commentable:_,commentList:T,likeList:I,pagination:Z}=g;return(0,n.jsx)(C,{repo:N,refresh:w,commentable:_,commentList:T,likeList:I,modLevels:k,pagination:Z,onPageClick:y})},C=e=>{let{repo:s,refresh:t,commentable:r,commentList:i,likeList:d,modLevels:u,pagination:x,onPageClick:h}=e,{t:p}=(0,m.QT)(),f=(0,n.jsx)(w,{commentable:r,refresh:t}),g=(0,j.q)(r.itemType);if(r.properties.disabled)return(0,n.jsxs)(o.y,{children:[(0,n.jsx)(o.y.Header,{title:p("forums:no_comments"),aside:f}),(0,n.jsx)(l.d,{message:r.permissions.cannotViewReasons[0]})]});let b="".concat(x.count," ").concat(p(1===x.count?"forums:nouns.".concat(g.singular):"forums:nouns.".concat(g.plural)));return(0,n.jsxs)(o.y,{children:[(0,n.jsx)(o.y.Header,{title:b,aside:f}),(0,n.jsx)(k.$,{repo:s,refresh:t,commentable:r,commentList:i,likeList:d,modLevels:u}),(0,n.jsx)(_.N,{refresh:t,commentable:r}),x.pages>1&&(0,n.jsx)(o.y.Toolbar,{children:(0,n.jsx)(a.ZP.Row,{justify:"center",children:(0,n.jsx)(c.D,{state:x,onClick:h})})})]})}},35772:function(e,s,t){"use strict";t.d(s,{B:function(){return m}});var n=t(28171),r=t(26684),i=t(37860),a=t(61221),l=t(86623);let c={success:(0,n.jsx)(r.Z,{className:"h-6 w-6 text-green-500","aria-hidden":"true"}),warning:(0,n.jsx)(i.Z,{className:"h-6 w-6 text-yellow-500","aria-hidden":"true"}),error:(0,n.jsx)(i.Z,{className:"h-6 w-6 text-red-500","aria-hidden":"true"}),info:(0,n.jsx)(a.Z,{className:"h-6 w-6 text-cyan-500","aria-hidden":"true"})},d={success:"text-green-500",warning:"text-yellow-500",error:"text-red-500",info:"text-cyan-500"},o={success:"bg-green-700/20 border-green-500/30",warning:"bg-yellow-700/20 border-yellow-500/30",error:"bg-red-700/20 border-red-500/30",info:"bg-cyan-700/20 border-cyan-500/30"};function m(e){let{state:s,title:t,message:r,icon:i,compact:a,className:m,children:u}=e;return(0,n.jsx)("div",{className:(0,l.Z)("rounded-md border shadow",a?"p-1.5":"p-4",o[s],m),children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"shrink-0",children:i||c[s]}),(0,n.jsxs)("div",{className:"ml-3",children:[t&&(0,n.jsx)("h3",{className:(0,l.Z)("font-title text-base font-bold uppercase leading-6",d[s]),children:t}),!!(r||u)&&(0,n.jsxs)("div",{className:(0,l.Z)("text-sm leading-6",t&&"mt-2"),children:[r," ",u]})]})]})})}},61816:function(e,s,t){"use strict";t.d(s,{Y:function(){return a}});var n=t(53973),r=t(78448),i=t(901);function a(){let e=(0,n.NL)(),s=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;if((0,i.jU)()){let s=new Date;s.setTime(s.getTime()+1e3*e),document.cookie="IMMUNE=".concat(s.getTime(),";expires=").concat(s.toUTCString(),";path=/")}},[]),t=(0,r.useCallback)(()=>{e.clear()},[e]),a=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;s(e),t()},[s,t]);return{clear:a,immune:s,invalidate:t}}},90685:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return q},default:function(){return D}});var n=t(28171),r=t(41484),i=t(81658),a=t(79061),l=t(83115),c=t(72828),d=t(46472),o=t(36077),m=t(91313);let u=e=>{let{game:s,category:t,splits:r}=e,{t:i}=(0,m.QT)(),a=s.milliseconds&&t.enforceMs;return(0,n.jsxs)(o.y,{children:[(0,n.jsx)(o.y.Header,{title:i("splits:time_splits"),aside:(0,n.jsx)(x,{splits:r})}),(0,n.jsxs)("table",{className:"x-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"w-4 text-center",children:"#"}),(0,n.jsx)("th",{children:i("common:name")}),(0,n.jsx)("th",{className:"text-center sm:w-1/4",children:i("common:split")}),(0,n.jsx)("th",{className:"text-center sm:w-1/4",children:i("splits:finished_at")})]})}),(0,n.jsx)("tbody",{children:r.splitTimes.map(e=>{let s=[];return e.gold&&s.push((0,n.jsx)("span",{className:"text-yellow-400",children:i("splits:gold")},"gold")),e.skipped&&s.push((0,n.jsx)("span",{className:"text-red-400",children:i("splits:skipped")},"skipped")),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-center",children:e.pos}),(0,n.jsxs)("td",{children:[e.name,s.length>0&&(0,n.jsx)("div",{className:"x-inline-3 text-xs",children:s})]}),(0,n.jsx)("td",{className:"text-center",children:(0,n.jsx)(c.n,{duration:e.time,forceMs:a})}),(0,n.jsx)("td",{className:"text-center",children:(0,n.jsx)(c.n,{duration:e.totalTime,forceMs:a})})]},e.pos)})})]})]})},x=e=>{let{splits:s}=e,{t}=(0,m.QT)();if(s.provider===r.Lh.SpSplitsio){let e="https://splits.io/".concat(s.providerId);return(0,n.jsxs)("span",{className:"text-xs text-secondary",children:[t("splits:provided_by")," ",(0,n.jsx)(d.r,{href:e,target:"_blank",children:"Splits.io"})]})}return(0,n.jsx)("div",{children:"NADA"})};var h=t(41318),j=t(98019),p=t(26684),f=t(46378),g=t(71742),b=t(78448),v=t(58380),y=t(35772),N=t(18181),w=t(20746),k=t(68073),_=t(44162),T=t(61816),C=t(70819),I=t(24995),Z=t(83524),M=t(59279),R=t(39835),S=t(16447),L=t(40057),A=t(901),P=t(79410),Q=t(52013);let E=e=>{let{game:s,category:t,level:i,run:a,gameModerators:l}=e,[d]=(0,Z.l)(e),{t:u}=(0,m.QT)(),[x]=(0,Q.QH)(a,s.defaultTimer),h=(0,b.useMemo)(()=>(0,P.uN)(d,s,a),[d,s,a]);return(0,n.jsxs)("div",{className:"x-stack-4",children:[a.verified===r.TK.Awaiting&&(0,n.jsx)(o.y,{children:(0,n.jsx)(y.B,{state:"warning",title:u("games:verification_pending"),message:u("games:verification_pending_explanation")})}),a.verified===r.TK.Rejected&&(0,n.jsx)(o.y,{children:(0,n.jsx)(y.B,{state:"error",title:u("games:verification_rejected"),message:u("games:verification_rejected_explanation"),children:(0,n.jsxs)("div",{className:"py-2",children:[(0,n.jsxs)("strong",{className:"font-bold",children:[u("common:reason"),":"]})," ",a.reason||u("common:unknown")]})})}),(0,n.jsxs)(o.y,{className:"overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex flex-row flex-nowrap bg-black/30 p-4",children:[(0,n.jsxs)("div",{className:"flex-auto",children:[(0,n.jsx)(v.O,{items:[{label:u("common:leaderboards"),href:(0,A.Rv)(s)},i&&{label:"".concat(u("common:level"),": ").concat(i.name),href:(0,A.Rv)(s,[],(0,P.eQ)(d,{...h,category:void 0,values:[]}))},{label:t.name,href:(0,A.Rv)(s,[],(0,P.eQ)(d,h))}]}),(0,n.jsx)("div",{className:"pt-2 text-base text-secondary",children:(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"font-semibold text-foreground",children:t.name})," in"," ",(0,n.jsx)(c.n,{className:"font-semibold text-foreground",duration:x})," by"," ",(0,n.jsx)("span",{className:"leading-7",children:(0,n.jsx)(w.l.Players,{repo:d,run:a,className:"text-foreground"})})]})})]}),(0,n.jsx)(K,{game:s,run:a})]}),(0,n.jsx)(_.d,{run:a}),(0,n.jsx)("div",{className:"mt-2 p-2",children:(0,n.jsx)(k.e,{repo:d,game:s,run:a,moderatorList:l})})]})]})};function K(e){let{game:s,run:t}=e,{t:i}=(0,m.QT)(),{session:a}=(0,R.kP)(),{push:l,reload:c}=(0,M.t)(),{clear:d}=(0,T.Y)(),{confirm:o}=(0,C.N)(),{notifyCustom:u}=(0,I.l)(),x=(0,b.useCallback)(()=>{S.x1.PutRunVerification({runId:t.id,verified:r.TK.Verified}).then(()=>(d(),u({type:"success",message:i("modhub:run_verified"),dismissAfterMs:3e3}),c())).catch(e=>{u({type:"error",message:e.message,dismissAfterMs:3e3})})},[d,t,c,u,i]),v=(0,b.useCallback)(()=>{o({title:i("modhub:reject_run"),message:i("modhub:reject_reason_prompt"),reason:!0,onConfirm:e=>{S.x1.PutRunVerification({runId:t.id,verified:r.TK.Rejected,reason:e}).then(()=>(d(),u({type:"success",message:i("modhub:run_rejected"),dismissAfterMs:3e3}),c())).catch(e=>{u({type:"error",message:e.message,dismissAfterMs:3e3})})}})},[d,o,c,u,t,i]),y=(0,b.useCallback)(()=>{S.x1.PutRunVerification({runId:t.id,verified:r.TK.Awaiting}).then(()=>(d(),u({type:"success",message:i("modhub:run_reverted"),dismissAfterMs:3e3}),c())).catch(e=>{u({type:"error",message:e.message,dismissAfterMs:3e3})})},[d,t,c,u,i]),w=(0,b.useCallback)(()=>{o({title:i("games:delete_run"),message:i("games:delete_run_explanation"),onConfirm:()=>{S.x1.PutRunDelete({gameId:s.id,runId:t.id}).then(()=>(d(),u({type:"success",message:i("modhub:run_deleted"),dismissAfterMs:3e3}),l((0,A.Rv)(s)))).catch(e=>{u({type:"error",message:e.message,dismissAfterMs:3e3})})}})},[d,o,s,l,t,u,i]),k=(0,L.Md)(a,t),_=k&&t.verified!==r.TK.Verified,Z=k&&t.verified!==r.TK.Rejected,P=k&&t.verified!==r.TK.Awaiting,Q=(0,L.FX)(a,t),E=(0,L.Wm)(a,t);return _||Z||P||Q||E?(0,n.jsxs)(N.v.Overflow,{children:[_&&(0,n.jsx)(N.v.Item,{label:i("modhub:verify"),richLabel:(0,n.jsxs)("div",{className:"x-inline-1 text-green-500",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4"})," ",i("modhub:verify")]}),onClick:x},"verify"),Z&&(0,n.jsx)(N.v.Item,{label:i("modhub:reject"),richLabel:(0,n.jsxs)("div",{className:"x-inline-1 text-red-500",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4"})," ",i("modhub:reject_dots")]}),onClick:v},"reject"),P&&(0,n.jsx)(N.v.Item,{label:i("games:view_run"),richLabel:(0,n.jsxs)("div",{className:"x-inline-1",children:[(0,n.jsx)(g.Z,{className:"h-4 w-4"})," ",i("modhub:revert")]}),onClick:y},"view"),Q&&(0,n.jsx)(N.v.Item,{icon:(0,n.jsx)(h.Z,{className:"h-5 w-5"}),label:i("common:edit"),href:(0,A.Rn)(s,t,["edit"])},"edit"),E&&(0,n.jsx)(N.v.Item,{icon:(0,n.jsx)(j.Z,{className:"h-5 w-5"}),label:i("common:delete"),onClick:w},"delete")]}):null}var G=t(26934),O=t(77457),q=!0,D=e=>{let{gameSummary:s,runData:t,recentRunsData:c}=e,{game:d,theme:o,gameModerators:x}=s,{run:h,category:j,runSplits:p}=t,{t:f}=(0,m.QT)();(0,R.jC)(r.qG.ItRun,h.id,!0);let g=(0,Q.Io)(h,t.game,t.category,t.players);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.d,{area:"run",title:[g,d.name],theme:o,description:f("games:game_meta.description",{name:d.name,brand:G.R.site}),keywords:f("games:game_meta.keywords",{name:d.name}),image:(0,O.ns)(d.staticAssets.find(e=>"cover"===e.assetType))}),(0,n.jsxs)(a.B,{summary:s,recentRunsData:c,pingLocation:!1,children:[(0,n.jsx)(E,{...t,gameModerators:x}),p&&(0,n.jsx)(u,{game:d,category:j,run:h,splits:p}),(0,n.jsx)(i.c,{itemType:r.qG.ItRun,itemId:h.id,moderatorList:s.gameModerators})]})]})}}},function(e){e.O(0,[73150,20746,42396,15656,79061,52556,72890,49774,92888,40179],function(){return e(e.s=78736)}),_N_E=e.O()}]);
</script>

</body>
</html>
