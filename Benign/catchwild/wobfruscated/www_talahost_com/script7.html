<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>script7.html</title>
</head>
<body>
<script>var cancel_checkout='انصراف از ادامهء خرید';
var input_name='لطفا نام خود را وارد کنید';
var input_comment='لطفا نظر خود را در قسمت توضیحات بنویسید';
var invalid_email='اي ميل وارد شده معتبر نيست';
var input_subject='لطفا موضوع را وارد کنيد';
var input_msg_body='متن پیغام را وارد کنید';
var already_rated='شما قبلا به این پاسخ امتیاز داده اید.';
var domain_validate_notify='نام دامنه وارد شده تغییر داده شد. لطفا به نام صحیح دامنه دقت کنید!';
var input_secimg='لطفا کد امنیتی را وارد کنید';
var passwords_not_match='رمز عبورهای وارد شده با هم برابر نیستند';
var input_current_pass='لطفا رمز عبور فعلی خود را وارد کنید';
var password_length_error='طول کلمه عبور باید ۶ حرفی یا بیشتر باشد';
var strong_password='کلمه عبور انتخاب شده مورد قبول است';
var password_strength_error='رمز عبور باید ترکیبی از حروف و اعداد باشد.\n لطفا از رمز ساده استفاده نکنید';
var password_strength_error_alphabet='رمز عبور باید حداقل شامل یک حرف انگلیسی باشد';
var password_strength_error_number='رمز عبور باید حداقل شامل یک عدد باشد';
var invalid_domain='دامنهء وارد شده معتبر نيست!';
var input_domain_name='دامنه (نام سایت)ی را که می خواهید ثبت کنید وارد نمایید';
var input_domain_ext='پسوند دامنه را وارد کنید';
var username_code='لطفا نام کاربری و کد امنیتی را وارد کنید';
var emailaddress_code='لطفاً آدرس ایمیل و کد امنیتی را وارد کنید';
var input_username='لطفا نام کاربری خود را وارد کنید';
var Username_only_english='لطفا فقط از حروف لاتین و اعداد برای نام کاربری استفاده کنید\nاز حروف فارسی، فاصله، حروف ویژه مانند @،/:و ... استفاده نکنید';
var input_code_melli='لطفا نام کاربری خود را وارد کنید';
var input_passport='لطفا نام کاربری خود را وارد کنید';
var please_check_rules='برای تکمیل ثبت نام باید قوانین را بپذیرید';
var are_you_sure='آيا از انجام اين کار مطمئن هستيد؟';
var confirm_del_all='آيا از حذف همهء موارد اطمينان داريد؟';
var confirm_logout='آيا با اطمينان مي خواهيد خارج شويد';
var lng_select_department='لطفا بخش مورد نظر را انتخاب کنید';
var lng_please_type_english='لطفا انگلیسی تایپ کنید';
var fill_all_plz='لطفا بخش‌های مشخص شده را تکمیل نمایید.';
var add_fund_fill_all_plz = fill_all_plz;
var new_message_invalid_subject='برای تسریع پاسخگویی لطفا از عنوان مناسب استفاده کنید! عنوان باید چکیده ای از متن پیغام باشد؛ نه عباراتی مانند: سلام، کمک و ...';
var new_message_input_message='لطفا متن پیغام را وارد کنید';
var order_input_nic_handle='برای خرید دامنه IR باید شناسه ایرنیک خود را وارد کنید';
var news_title='عنوان خبر';
var regyearsError='ساله ثبت نمی شود';
var domain='دامنه';
var Currency=' تومان';
var domainRegistrationFee=' هزینه ثبت دامنه';
var go_back=' بازگشت';
var lng_user='نام کاربری';
var lng_pass='رمز عبور';
var cur_xhr = null;
var autojax = '';
var autojax_w = 500;
var ajax2 = false;
var uri_changed = false;
var scrollTo = '';
var xhr,xhr2,xhr_msg,postdata,postdata2,frmName, frmData;

window.Modernizr=function(a,b,c){function t(a){i.cssText=a}function u(a,b){return t(prefixes.join(a+";")+(b||""))}function v(a,b){return typeof a===b}function w(a,b){return!!~(""+a).indexOf(b)}function x(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:v(f,"function")?f.bind(d||b):f}return!1}var d="2.6.2",e={},f=b.documentElement,g="modernizr",h=b.createElement(g),i=h.style,j,k={}.toString,l={},m={},n={},o=[],p=o.slice,q,r={}.hasOwnProperty,s;!v(r,"undefined")&&!v(r.call,"undefined")?s=function(a,b){return r.call(a,b)}:s=function(a,b){return b in a&&v(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=p.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(p.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(p.call(arguments)))};return e}),l.history=function(){return!!a.history&&!!history.pushState};for(var y in l)s(l,y)&&(q=y.toLowerCase(),e[q]=l[y](),o.push((e[q]?"":"no-")+q));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)s(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof enableClasses!="undefined"&&enableClasses&&(f.className+=" "+(b?"":"no-")+a),e[a]=b}return e},t(""),h=j=null,e._version=d,e}(this,this.document);

function accjax(url,dw,dc,method, uri, silent = 0)
{
	jsonjax(url,dw,dc,method,uri,silent);
}

function jsonjax(url,dw,dc,method, uri, silent = 0, callback)
{
	if(ajax2){
		requrl = siteurl + '/' + url;
	}else{
		requrl = siteurl + '/json.php' + url + '&' + new Date().getTime();
	}

	if(xhr !== undefined) {xhr.abort();}
	if(method == 'GET'){
		if(dc == 'maincontent' && element_exist('message') && $("#message").hasClass("textarea-editor")){
			var mytextarea = document.getElementById('message');
			if(strLen(sceditor.instance(mytextarea).val()) > 5){
				confirmed = confirm('مطالبی را در این صفحه تایپ کرده اید! با لود صفحه جدید مطالب حذف میشوند.');
				if (confirmed == false) {
					return false;
				}
			}
		}
		xhr=$.ajax({
			url: requrl,
			type: "GET",
			dataType: 'json',
			beforeSend: function(){
				if(dw !== ''){
					if(dw == 'ajaxwait'){
						$('#ajx_overaly').css('display','block');
					}
					$('#'+dw).fadeIn('slow');
				}
				change_cursor('wait');
				cur_xhr = 'xhr';
			},
			success: function(response){
				if(response.status === 'success') {
					var js_before = '';
					var js_after = '';
					$.each(response.script, function(index, item) {
						var js_run_time = item.runtime;
						if(js_run_time == 'before'){
							var js_before = js_before + item.code;
						}else{
							var js_after = js_after + item.code;
						}
					});
					if(js_before != ''){
						$('#dv_js').append('<script>'+js_before+'</script>');
					}
					$.each(response.data, function(index, item) {
						var div = $('#' + item.dv_name);
						if(div.length) {
							if(item.type === 'replace') {
								div.html(item.dv_content);
							} else if(item.type === 'merge') {
								div.append(item.dv_content);
							}
						}
					});
					if(js_after != ''){
						$('#dv_js').append('<script>'+js_after+'</script>');
					}
					$.each(response.alert, function(index, item) {
						var alert_title = item.title;
						var alert_message = item.message;
						var alert_type = item.type;
						if(alert_message.length) {
							echoAlert(alert_title, alert_message, alert_type);
						}
					});
					if (typeof callback === 'function') {
						callback(response); // اگر callback وجود دارد، آن را فراخوانی کن
					}
				} else {
					alert('Error: ' + response.message);
				}
				if(silent === 0){
					if(scrollTo != ''){
						var newpos = $('#'+scrollTo).offset().top-100;
						scrollTo = '';
					}else{
						var newpos = $('#'+dc).offset().top-100;
					}
					$('html, body').animate({scrollTop:newpos}, 800);
				
					if(uri != '' &amp;&amp; uri != undefined &amp;&amp; Modernizr.history){
	/* 					uri_hash_tmp = Split(uri, '#');
						if(uri_hash_tmp[1] != undefined &amp;&amp; strLen(uri_hash_tmp[1]) &gt; 0){
							uri_hash = uri_hash_tmp[1];
							window.location.hash = '#'+uri_hash;
						} */
						tmp_siteurl = 'tmp'+siteurl;
						if(tmp_siteurl.search("https://") &gt; 0){
							uri = uri.replace("http://", "https://");
						}else{
							uri = uri.replace("https://", "http://");
						}
						window.history.pushState('', '', uri);
						uri_changed = true;
					}
				}
				$(".dropdown-menu").slideUp(200, function() {
					for(var i=1; i &lt; 10; i++){
						if(element_exist("dropdown-menu"+i)){
							var attr = $("#dropdown-menu"+i).attr('style');
							//alert(attr);
							if(attr == 'display: none;'){
								$("#dropdown-menu"+i).removeAttr("style");
							}
						}
					}
				});
				change_cursor('auto');
				if ($(".chosen")[0]){
					if ($.fn.chosen) {
						jQuery(".chosen").chosen();
					}
				}
				if(dw !== ''){
					$('#'+dw).fadeOut('slow');
					if(dw == 'ajaxwait'){
						$('#ajx_overaly').css('display','none');
					}
				}
				if($('#sidebar_overaly').is(":visible")){
				  closeSidebar();
				  SideBtn(1);
				  //$("#show-sidebar").css({'right':'0px','left': '','display': ''});
				  $("#sidebar_overaly").hide();
				}
				var JsFuncCount = Object.keys(response.jsfunction).length;
				if(JsFuncCount &gt; 0){
					return response.jsfunction;
				}
			}
		});
	}else{
		xhr=$.ajax({
			url: requrl,
			type: "POST",
			data: postdata,
			dataType: 'json',
			processData: false,
			contentType: false,
			beforeSend: function(){
				$('#'+dw).fadeIn('slow');
				change_cursor('wait');
				cur_xhr = 'xhr';
			},
			success: function(response){
				if(response.status === 'success') {
					$.each(response.data, function(index, item) {
						var div = $('#' + item.dv_name);
						if(div.length) {
							if(item.type === 'replace') {
								div.html(item.dv_content);
							} else if(item.type === 'merge') {
								div.append(item.dv_content);
							}
						}
					});
					$.each(response.alert, function(index, item) {
						var alert_title = item.title;
						var alert_message = item.message;
						var alert_type = item.type;
						if(alert_message.length) {
							echoAlert(alert_title, alert_message, alert_type);
						}
					});
				} else {
					alert('Error: ' + response.message);
				}
				if(silent == 0){
					if(scrollTo != ''){
						var newpos = $('#'+scrollTo).offset().top-150;
						scrollTo = '';
					}else{
						var newpos = $('#'+dc).offset().top-180;
					}
					$('html, body').animate({scrollTop:newpos}, 800);
				}
				if(element_exist('login_2fa')){
					 $('#login_2fa').focus();
				}
				hide_div(dw);
				change_cursor('auto');
			}
		});
	}
}
function accjax2(url2,dw2,dc2,method2)
{
	accjax(url2,dw2,dc2,method2,'',1);
}
function accjax_post2(url2,obj2,dw2,dc2)
{
	accjax_post(url2,obj2,dw2,dc2,1, '');
}


function accjax_post(url, obj, dw, dc, silent, uri) {
    frmName = obj.name;
    var count = obj.elements.length;

    var poststr = "";
    var formData = new FormData(); // ایجاد شیء FormData برای مدیریت داده‌های فرم و فایل

    for (var i = 0; i &lt; count; i++) {
        elm_type = obj.elements[i].type;
        elm_id = obj.elements[i].id;
        elm_name = obj.elements[i].name;

        if (elm_type == 'checkbox') {
            if (obj.elements[i].checked == true) {
                obj.elements[i].value = 'on';
            } else {
                obj.elements[i].value = '';
            }
			formData.append(elm_name, obj.elements[i].value);
        }

        if (elm_type == 'radio') {
            if (obj.elements[i].checked == true) {
                objValue = obj.elements[i].value;
                formData.append(elm_name, obj.elements[i].value);
            } else {
                continue;
            }
        } else if (elm_type == 'select-multiple') {
            var selectedOptions = obj.elements[i].selectedOptions;
            for (var j = 0; j &lt; selectedOptions.length; j++) {
                formData.append(elm_name, selectedOptions[j].value);
            }
        } else if (elm_type == 'file') {
            // افزودن فایل‌ها به FormData
            var files = obj.elements[i].files;
            if (files.length &gt; 0) {
                for (var j = 0; j &lt; files.length; j++) {
                    formData.append(elm_name, files[j]);
                }
            }
        } else {
            var objValue = obj.elements[i].value;
            formData.append(elm_name, objValue);
        }
    }
	postdata = formData;
	accjax(url,dw,dc,'POST',uri,silent);
}

function accjax_post_msg(url,obj,dw,dc,silent,uri)
{
	$('#btnSend').prop('disabled', true);
	$('#btnSendTimer').val('5');
	accjax_post(url,obj,dw,dc,silent,uri);
}

function echoAlert(var_title, var_message, var_type){
	if(var_type === 'alert'){
		MyAlert(var_message);
	}else{
		var alert_title = '';
		if(strLen(var_title) &gt; 0){
			alert_title = `<span class="text-danger"><b>${var_title}</b></span><br/>`;
		}
		var alertHtml = `
			<div class="alert alert-${var_type}" role="alert">${alert_title}
				${var_message}
			</div>`;
		var div = $('#alert_msg');
		div.append(alertHtml);
	}
}

function MyAlert(message){
	alert(message);
}
function UnCurrentMenu()
{
	if(element_exist('currentmenu')){
		document.getElementById('currentmenu').id = '';
	}
}

function form_cart_deleteall_confirm()
{
	var agree=confirm(confirm_del_all);
	if(agree){
		var _url="?param=99652365&amp;param2=empty";
		accjax_post(_url,document.getElementById('frm_empty_cart'),'empty_cart_wait','maincontent');
	}
}
function disagree()
{
	var disagree=confirm(cancel_checkout);
	if(disagree)
	{
		d_url="?param=99400054&amp;param2=disagree";
		accjax_post(d_url,document.getElementById('frmagree'),'page_condition_wait','maincontent');
	}
}

function domain_register_form(pid)
{
	var haveDomain = getRadioCheckedValue('R_domain'+pid, 'frmorder'+pid);
	if(haveDomain == 'have_domain'){
		showregister=0;
	}else{
		showregister=1;
	}
	if(showregister==1){
		show_div('registerdomain'+pid);
		hide_div('havedomain'+pid);
		show_div('txt_have_domain');
		show_div('domain_ext');
		if(haveDomain == 'renew_domain'){
			var renew_register_transfer = 'renew_domain';
		}else if(haveDomain == 'transfer_domain'){
			var renew_register_transfer = 'transfer_domain';
		}else{
			var renew_register_transfer = 'register_domain';
		}
		document.getElementById('txtdomain').value = document.getElementById('txt_have_domain').value;
		document.getElementById('txt_have_or_register_domain'+pid).value = renew_register_transfer;
	}else{
		hide_div('registerdomain'+pid);
		show_div('havedomain'+pid);
		show_div('txtdomain');
		document.getElementById('txt_have_domain').value = document.getElementById('txtdomain').value;
		document.getElementById('txt_have_or_register_domain'+pid).value = 'have_domain';
	}
}
function get_irnic_txtbox(pid)
{
	var haveDomain = getRadioCheckedValue('R_domain'+pid, 'frmorder'+pid);
	if(haveDomain == 'new_domain'){
		if(order_irnic_required(pid)){
			show_div('dv_irnic'+pid);
			return true;
		}
	}
	hide_div('dv_irnic'+pid);
}
function order_irnic_required(pid){
	var haveDomain = getRadioCheckedValue('R_domain'+pid, 'frmorder'+pid);
	if(haveDomain == 'new_domain'){
		var dmn_ext = document.getElementById('domain').value;
		if(dmn_ext == 'ir' || dmn_ext.search('.ir') &gt; 0){
			return true;
		}
	}
	return false;
}
function IsEmail(address)
{
	if( /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(address)){
		return true;
	}else{
		return false;
	}
}
function change_title(title)
{
	document.title=title;
}
var sec_img_name; var new_hash;
function new_secimg(){
	$.getScript(siteurl + "/security/reload/" + new Date().getTime() +'.gif');
}
function changesecimg(img_id, var_focus = false)
{
	if(element_exist(img_id)){
		newimg = siteurl+'/security.gif?'+new Date().getTime();
		$('#'+img_id).attr("src", newimg);
		$('#'+img_id+'_box').val('');
		if(var_focus){
			$('#'+img_id+'_box').focus();
		}
	}
}

function IsDomain2(domain) {
    var domainPattern = /^(?!:\/\/)([a-zA-Z0-9-_]{1,63}\.)+[a-zA-Z]{2,6}$/;
    return domainPattern.test(domain);
}
function IsDomain(expression) {
    expression = expression.toLowerCase();
    if (expression.length &lt; 1 || expression.startsWith('-') || expression.endsWith('-')) return false;
    const validChars = /^[a-z0-9-]+$/;
    return validChars.test(expression);
}

function SubmitForm(e,formname,func)
{
	var characterCode;
	var event;
	if(e &amp;&amp; e.which){
	e=e;
	characterCode=e.which;
	}else{
		if(event != 'undefined'){
			e=event;
			characterCode=e.keyCode;
		}
	}
	if(characterCode==13){
	if(formname=="0"){
		eval(func);
	}else{
		document.forms[formname].submit();
	}
	}
}
function strLen(string)
{
	if(string==null){return(false);}
	return String(string).length;
}

function onlyNum(string_input) {
    var persianArabicNums = '۰١۱٢۲٣۳٤۴٥۵٦۶٧۷٨۸٩۹٠';
    var englishNums = '01122334455667788990';

    string_input.value = string_input.value.replace(/[^0-9۰-۹٠-٩]/g, '').replace(/[۰-۹٠-٩]/g, function(ch) {
        return englishNums[persianArabicNums.indexOf(ch)];
    });
}

function show_div(id){
	if(element_exist(id)){
		document.getElementById(id).style.display="";
	}
}
function IsVisible(id){
	if(element_exist(id)){
		return $('#'+id).is(':visible');
	}
	return false;
}
function toggle(div1, div2)
{
	if(IsVisible(div1)){
		hide_div(div1);
		show_div(div2);
	}else{
		hide_div(div2);
		show_div(div1);
	}
	if(div1 == 'UserMenu' || div2 == 'UserMenu'){
		refresh_statistic();
	}
}
function hide_div(id){
	if(element_exist(id)){
		document.getElementById(id).style.display="none";
	}
}
function change_cursor(cursor){
	doc=document.getElementsByTagName("html");
	doc[0].style.cursor=cursor;
}
function Write_in_element(id,text){
	if(element_exist(id)){
		document.getElementById(id).innerHTML=text;
	}
}
function ElementContent(id){
	if(element_exist(id)){
		return document.getElementById(id).innerHTML;
	}
}
function disable(id)
{
	if(element_exist(id)){
		document.getElementById(id).disabled=true;
	}
}
function enable(id)
{
	if(element_exist(id)){
		document.getElementById(id).disabled=false;
	}
}
function element_exist(id)
{
	if(id != '' &amp;&amp; id != undefined){
		if(document.getElementById(id)){
			return true;
		}
	}
	return false;
}
function fill(id, val)
{
	if(element_exist(id)){
		document.getElementById(id).value=val;
	}
}
function go_to(link) {
	location.href = link;
}
function logout(){
	var agree=confirm(confirm_logout);
	if(agree){
		if(useajax==true){
			accjax('?param=99458510', 'ajaxwait', 'maincontent', 'GET');
			return false;
		}else{
			go_to(siteurl+'/logout.htm');
			return false;
		}
	}else{
		return false;
	}
}

function select_all(main_chk_id, child_id, num_rows){
	for(var i=1; i &lt;= num_rows; i++){
		_id = child_id+i;
		if(element_exist(_id)){
			r_chk = document.getElementById(main_chk_id).checked;
			document.getElementById(_id).checked = r_chk;
		}
		_id = null;
	selecte_all_selected = true;
	}
}
function whois(domain,ext,dw2,dc2,silent)
{
	if(domain=="")
	{
		MyAlert(input_domain_name);
		return false;
	}
	if(silent==1)
	{
		var url2="?param=99554439&amp;ajx=1&amp;slnt=y&amp;q="+domain+"&amp;ext="+ext;
	}else{
		var url2="?param=99554439&amp;ajx=1&amp;q="+domain+"&amp;ext="+ext;
	}
	accjax(url2,dw2,dc2,'GET','',1);
}
function whois_idn(domain,ext,dw2,dc2,silent){
	if(domain==""){
		MyAlert(input_domain_name);return false;
	}
	if(silent==1){
		var url2="?param=99554439&amp;ajx=1&amp;idn=1&amp;q="+domain+"&amp;ext="+ext;}else{var url2="?param=99554439&amp;ajx=1&amp;idn=1&amp;q="+domain+"&amp;ext="+ext;
	}
	accjax(url2,dw2,dc2,'GET','',1);
}

function Split(string, delimiter) {
    return String(string).split(delimiter);
}

function write_price(pid)
{
	select_name = 'pay_period'+pid;
	Delimiter = ':';
	div_price = 'prod_price'+pid;
	txt_pay_period = 'txt_pay_period'+pid;
	month_price = document.getElementById(select_name).value;
	a = Split(month_price, Delimiter);
	pay_period = a[0];
	price = a[1] + ' هزینه سرویس';
	Write_in_element(div_price,price);
	document.getElementById(txt_pay_period).value = pay_period;
}

function WriteDomainPrice(pid,withHost)
{
	get_irnic_txtbox(pid);
	var haveDomain = getRadioCheckedValue('R_domain'+pid, 'frmorder'+pid);
	if(haveDomain == 'have_domain'){
		return;
	}

	select_name = 'regyears'+pid;
	tldCombo = 'domain';
	div_price = 'prod_price'+pid;
	regyears = document.getElementById(select_name).value;
	TLD = document.getElementById(tldCombo).value;
	dmn_chk_url = '?param=99102939&amp;ext='+TLD+'&amp;regyear='+regyears;
	jsonjax(dmn_chk_url,'',div_price,'GET','',1, function(response){
		if (response) {
			$.each(response.jsfunction, function(index, item) {
				var funcName = item.name;
				if(funcName == 'WriteDomainPrice'){
					if(item.success){
						var price_with_host = item.price_with_host;
						var price_without_host = item.price_without_host;
						var renew_price = item.renew_price;
						if(item.promo_enabled){
							var ps1 = '<span style="text-decoration: line-through;">';
							var pe1 = '</span> ';
							var ps2 = '<span class="text-danger"><b><font color="red">';
							var pe2 = '</font></b></span>';
							var price_with_host = ps1+price_with_host+pe1+ps2+item.promo_price+pe2;
							var price_without_host = ps1+price_without_host+pe1+ps2+item.promo_price+pe2;
						}
						if(withHost){
							price = price_with_host;
						}else{
							price = price_without_host;
						}
						if(haveDomain == 'renew_domain' || haveDomain == 'transfer_domain'){
							price = renew_price;
						}
						tmp = ElementContent(div_price);
						Write_in_element(div_price,tmp+'<br/> + ' + price + Currency + ' ' + domainRegistrationFee);
						change_cursor('auto');
					}else{
						MyAlert(item.message);
					}
				}

			});
		}else{
			alert('no response');
		}
	});
	return false;
}

function WriteDomainPrice2()
{
	select_name = 'regyear';
	tldCombo = 'tld';
	div_price = 'dv_domain_price';
	regyears = document.getElementById(select_name).value;
	TLD = document.getElementById(tldCombo).value;
	dmn_chk_url = '?param=99102939&amp;func=WriteDomainPrice2&amp;ext='+TLD+'&amp;regyear='+regyears;
	jsonjax(dmn_chk_url,'',div_price,'GET','',1, function(response){
		if (response) {
			$.each(response.jsfunction, function(index, item) {
				var funcName = item.name;
				if(funcName == 'WriteDomainPrice2'){
					if(item.success){
						var price_with_host = item.price_with_host;
						var price_without_host = item.price_without_host;
						var renew_price = item.renew_price;
						if(item.promo_enabled){
							var ps1 = '<span style="text-decoration: line-through;">';
							var pe1 = '</span> ';
							var ps2 = '<span class="text-danger"><b><font color="red">';
							var pe2 = '</font></b></span>';
							var price_without_host = ps1+price_without_host+pe1+ps2+item.promo_price+pe2;
						}
						Write_in_element(div_price, price_without_host + Currency + ' ' + domainRegistrationFee);
						if(element_exist('dv_regyear')){
							Write_in_element('dv_regyear', item.regyear+' سال');
							Write_in_element('dv_register_cost', price_without_host + Currency);
						}
						change_cursor('auto');
					}else{
						MyAlert(item.message);
					}
				}

			});
		}else{
			alert('no response');
		}
	});
	return false;
}

function ShowWhois(domain, ext){
	DVid=domain+'_'+ext;
	tmp = ElementContent(DVid);
	Write_in_element('currentWhois', tmp);
	$('html, body').animate({scrollTop:$('#currentWhois').position().top-75}, 1000);
}
function PassStrength(pass){
	return;
}
var RAlertTimeOut = 8000;
var var_alert = 1;
$(window).focus(function() {
    if (!var_alert){
        var_alert = 1;
	}
});
$(window).blur(function() {
    var_alert = 0;
});
	var RoboAlert=setInterval(function(){
		if(var_alert){
			RAlert();
		}
	},RAlertTimeOut);
var xmlHttpAlert, validRequest=false;
function RAlert()
{
	AlertUrl = siteurl + '/Alert.php';
	var alertRequest = $.ajax({
	  url: AlertUrl,
	  cache: false,
	  timeout: 5000,
		success: function(response){
			eval(response);
		}
	});
}

function checkPasswordComplexity(password, criteria) {
  // استخراج طول و الزامات از معیارها
  const [length, requirements] = criteria.split(':');
  const minLength = parseInt(length, 10);

  // تابع برای بررسی الزامات مختلف
  const rules = {
    c: /[a-zA-Z]/,      // حروف بزرگ یا کوچک
    s: /[!@#$%^&amp;*(),.?":{}|&lt;&gt;]/, // کاراکترهای خاص
    n: /\d/,            // اعداد
    u: /[A-Z]/,         // حروف بزرگ
    l: /[a-z]/          // حروف کوچک
  };

  // بررسی طول رمز عبور
  if (password.length &lt; minLength) {
    return false;
  }

  // بررسی تمام الزامات
  for (let requirement of requirements) {
    if (!rules[requirement].test(password)) {
      return false;
    }
  }

  return true;
}

function chk_frm(form_id, input_id)
{
	var form = $('#'+form_id);
	var isValid = true;
	form.find('input, select, textarea').each(function () {
		var input = $(this);
		var this_id = $(this).attr('id');
		if(input_id === '' || (input_id !== '' &amp;&amp; input_id === this_id)){
			var is_required = $('#'+this_id).is('[required]')
			if(!$('#'+this_id).is(':hidden')){
				var inputType = input.attr('type');
				var validation = input.data('validation');
				if(typeof validation !== 'undefined'){
					if(input.val() == '' &amp;&amp; !is_required){
						input.removeClass('is-invalid').addClass('is-valid');
					}else{
						if(validation == 'email'){
							if (IsEmail(input.val())) {
								input.removeClass('is-invalid').addClass('is-valid');
							} else {
								input.removeClass('is-valid').addClass('is-invalid');
								isValid = false;
							}
						} else if (validation == 'national_id'){
							if (validateCodeMelli(input.val())) {
								input.removeClass('is-invalid').addClass('is-valid');
							} else {
								input.removeClass('is-valid').addClass('is-invalid');
								isValid = false;
							}
						} else if (validation == 'mobile'){
							var regex = /^09[01239]\d{8}$/;
							if (regex.test(input.val())) {
								input.removeClass('is-invalid').addClass('is-valid');
							} else {
								input.removeClass('is-valid').addClass('is-invalid');
								isValid = false;
							}
						} else if (validation == 'url'){
							var regex = /^(https?:\/\/)?([\w\d\-\.]+)\.([a-z]{2,})(\/[\w\d\-\.]*)*\/?$/i;
							if (regex.test(input.val())) {
								input.removeClass('is-invalid').addClass('is-valid');
							} else {
								input.removeClass('is-valid').addClass('is-invalid');
								isValid = false;
							}
						} else if (validation.substring(0, 4) === "str_") {//example : str_3:50
							var regex = /str_(\d+):(\d+)/;
							var matches = validation.match(regex);

							if (matches) {
								var min = parseInt(matches[1]);
								var max = parseInt(matches[2]);
							}
							if (input.val().length &gt;= min &amp;&amp; input.val().length &lt;= max) {
								input.removeClass('is-invalid').addClass('is-valid');
							} else {
								input.removeClass('is-valid').addClass('is-invalid');
								isValid = false;
							}
						} else if (validation.substring(0, 4) === "int_") {//example : int_4:6
							var regex = /int_(\d+):(\d+)/;
							var matches = validation.match(regex);

							if (matches) {
								var min = parseInt(matches[1]);
								var max = parseInt(matches[2]);
							}
							
							
							if (parseInt(input.val()) &gt;= min &amp;&amp; parseInt(input.val()) &lt;= max) {
								input.removeClass('is-invalid').addClass('is-valid');
							} else {
								input.removeClass('is-valid').addClass('is-invalid');
								isValid = false;
							}
						} else if ( inputType === 'password' ) {
							if (validation.substring(0, 5) === "pass_") {//example: pass_6:cn (c: character , n: number, l: lowercase, u: uppercase, s: special characters)
								var tmp_rule = Split(validation, '_');
								var pass_rule = tmp_rule[1];
								if (checkPasswordComplexity(input.val(), pass_rule)) {
									input.removeClass('is-invalid').addClass('is-valid');
								} else {
									input.removeClass('is-valid').addClass('is-invalid');
									isValid = false;
								}
							} else if (validation.substring(0, 6) === "match_") {
								var tmp_input = Split(validation, '_');
								var other_input = tmp_input[1];
								var other_input_val = $('#'+other_input).val();
								if (input.val() != '' &amp;&amp; input.val() === other_input_val) {
									input.removeClass('is-invalid').addClass('is-valid');
								} else {
									input.removeClass('is-valid').addClass('is-invalid');
									isValid = false;
								}
							}
						}
					}
				}
			}
		}
	});
	return isValid;
}
function checkorder(id, has_domain)
{
	if(has_domain == 0){
		if(useajax == true){
			var getelement='frmorder'+id;
			accjax_post('?param=99652365&amp;param2=add',document.getElementById(getelement),'page_order_wait','maincontent');
		}else{
			document.forms["frmorder"+id].submit();
		}
		return 0;
	}
	if(order_irnic_required(id)){
		if(document.getElementById('nic_handle'+id).value==""){
			MyAlert(order_input_nic_handle);
			document.getElementById('nic_handle'+id).select();
			return 0;
		}
	}

	var haveDomain = getRadioCheckedValue('R_domain'+id, 'frmorder'+id);
	if(haveDomain == 'have_domain'){
		var registerdomain = false;
	}else{
		var registerdomain = true;
	}
	if(registerdomain==true){
		var domainname = document.forms["frmorder"+id].txtdomain.value;
		if(document.forms["frmorder"+id].txtdomain.value==""){
			MyAlert(input_domain_name);
			document.forms["frmorder"+id].txtdomain.select();
			return 0;
		}
		if(!IsDomain(domainname)){
			MyAlert(invalid_domain);
			document.forms["frmorder"+id].txtdomain.select();
			return 0;
		}else{
			if(useajax == true){
				var getelement='frmorder'+id;
				accjax_post('?param=99652365&amp;param2=add',document.getElementById(getelement),'page_order_wait_'+id,'maincontent');
			}else{
				document.forms["frmorder"+id].submit();
			}
		}
	}else{
		if(document.forms["frmorder"+id].txt_have_domain.value==""){
			MyAlert(input_domain_name);
			document.forms["frmorder"+id].txt_have_domain.select();
			return 0;
		}
		if(document.forms["frmorder"+id].domain_ext.value==""){
			MyAlert(input_domain_ext);
			document.forms["frmorder"+id].domain_ext.select();
			return 0;
		}else{
			if(useajax == true){
				var getelement='frmorder'+id;
				accjax_post('?param=99652365&amp;param2=add',document.getElementById(getelement),'page_order_wait_'+id,'maincontent');
			}else{
				document.forms["frmorder"+id].submit();
			}
		}
	}
}

function CheckNewMessageSubject()
{
	if(document.frm_newpm.message.value == ''){
		MyAlert(new_message_input_message);
		document.frm_newpm.message.select();
		return false;
	}else if(document.frm_newpm.department.value == 0){
		MyAlert(lng_select_department);
		return false;
	}else{
		if(useajax == true){
			accjax_post_msg('?param=99202255&amp;param2=newpm', document.getElementById('frm_newpm'), 'frm_newpm_wait', 'maincontent');
		}else{
			document.frm_newpm.submit();
		}
	}
}
function getRadioCheckedValue(radio_name, formName){
	if(element_exist(radio_name)){
		var oRadio = document.forms[formName].elements[radio_name];
		if(oRadio.length &gt; 0){
			for(var i = 0; i &lt; oRadio.length; i++){
				if(oRadio[i].checked){
					return oRadio[i].value;
				}
			}
		}else{
			return oRadio.value;
		}
		return '';
	}
	return '';
}
function ShowTab(ID){
	for(var i = 1; i &lt;= 7; i++){
		hide_div('dvTab'+i);
	}
	show_div('dvTab'+ID);
}
function toggleElement(e_name)
{
		a = Split(e_name, '_');
		catID = a[1];
		obj = document.getElementById('plusminus_'+catID);
	if(IsVisible(e_name)){
		hide_div(e_name);
		classname="sptdfr sptdfrplus";
	}else{
		show_div(e_name);
		classname="sptdfr sptdfrminus";
	}
	obj.setAttribute("class", classname);
	obj.setAttribute("className", classname); // for IE which does not recognize "class"
}
var farsiKeyCodes = new Array(1662, 1670, 1580, 1581, 1582, 1607, 1593, 1594, 1601, 1602, 1603,
        1572,
        1579, //   ?  for firefox
        1589, 1590, 1711, 1705, 1605, 1606, 1578, 1575, 1604, 1576, 1740, 1587,
        1588, 1608, 1574, 1571, 1583, 1584, 1585, 1585, 1586, 1591, 1592, 1570, 17281569, 1571, 1573, 1572, 1688, 1610, 1577,
        1611, 1612, 1613, 1614, 1615, 1617);
function alertEnglishOnKeyPress(e){
	var isFarsi = isFarsiKeysPressed(e);
	if(isFarsi){alert(lng_please_type_english);}
	return !isFarsi;
}
function isFarsiKeysPressed(e) {
	var key = getEventKeyCode(e);
	for (var i = 0; i &lt; farsiKeyCodes.length; i++) {
		if (key == farsiKeyCodes[i]) {
			return true;
		}
	}
	return false;
}
function getEventKeyCode(e){
    var key;
    if (window.event){
        key = event.keyCode;
	}else{
        key = e.which;
	}
    return key;
}
var validDomainKeys = new Array(45,48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122);
function validateDomain(str, idn){
	if(idn){
		return;
	}
	str.value = str.value.toLowerCase();
	var old_str = str.value;
	var lng = str.value.length;
	var validStr = '';
	for (var i = 0; i &lt; lng; i++){
		tmpStr = str.value.substr(i, 1);
		var key=str.value.charCodeAt(i);
		var prev_key = 0;
		if(i &gt; 1){
			prev_key = str.value.charCodeAt(i-1);
		}
		for (var j = 0; j &lt; validDomainKeys.length; j++){
			if (key == validDomainKeys[j]){
				if(i == 0 &amp;&amp; key == 45){
					valid = false;
				}else{
					if(1 == 2 &amp;&amp; key == 45 &amp;&amp; prev_key == 45 &amp;&amp; !element_exist('transfer_auth_code')){
							valid = false;
					}else{
						valid = true;
						validStr = validStr + tmpStr;
						hide_div('validateDomain');
						break;
					}
				}
			}else{
				valid = false;
			}
		}
		if(!valid){
			show_div('validateDomain');
		}
	}
	str.value=validStr;
	if(old_str != str.value){
		MyAlert(domain_validate_notify);
		show_div('validateDomain');
	}
}

function autojax_lw(link, awidth){
	autojax_w = awidth;
	autojax = link +'&amp;atjx=1';
	return false;
}
function abort_xhr(){
	xhr.abort();
	change_cursor('auto');
	$('#ajaxwait').fadeOut('slow');
	$('#ajx_overaly').css('display','none');
}
function restorebackupTerms(){
	for(i=1;i&lt;2;i++){
		if(document.getElementById('restore_backup_term_'+i).checked == false){
			$('#submit_restore_btn').prop('disabled', true);
			return false;
		}
	}
	$('#submit_restore_btn').prop('disabled', false);
	return true;
}

function confirmLink(theLink, alert_str)
{
    var is_confirmed = confirm(alert_str);
    if (is_confirmed) {
        if ( typeof(theLink.href) != 'undefined' ) {
            theLink.href += '&amp;confirmed=1';
        }else if ( typeof(theLink.form) != 'undefined' ) {
            theLink.form.action += '&amp;confirmed=1';
        }
    }

    return is_confirmed;
}


function closeSidebar(){
	$(".page-wrapper").removeClass("toggled");
	$("#mainheader").removeClass("toggled");
	$("#sidebar_overaly").hide();
	$(".menu-hint").hide();
	$("#userid_txt").hide();
	SideBtn(1);
	document.cookie="sidebar=0;expires=0";
	$("#navLogo").addClass('logo-img-sm');
}
function showSidebar(){
	$(".page-wrapper").addClass("toggled");
	$("#mainheader").addClass("toggled");
	$("#sidebar").show();
	$(".menu-hint").show();
	$("#userid_txt").show();
	SideBtn(0);
	document.cookie="sidebar=1;expires=0";
	if ($(window).width() &lt; 800) {
		$("#sidebar_overaly").show();
	}
	$("#navLogo").removeClass('logo-img-sm');
	return false;
}







$(document).ready(function () {
	if(Modernizr.history){
		window.onpopstate = function(event) {
			tmpHash = location.hash;
			if(strLen(tmpHash) &gt; 0){
				if(tmpHash.substr(0, 5) == '#nav-'){
					uri_changed = false;
				}
			}
			if(uri_changed){
				var tmp_prs = Split(location.pathname, '/');
				var parsed_url = '';
					arr_lng = tmp_prs.length;
					if(arr_lng &gt; 2){
						for(i=1; i&lt;(arr_lng-1); i++){
							parsed_url = parsed_url +tmp_prs[i]+'/';
						}
						parsed_url = parsed_url +'ajax/'+tmp_prs[arr_lng-1];
					}else{
						parsed_url = parsed_url +'ajax/'+location.pathname;
					}
				if(location.search != '' &amp;&amp; location.search != undefined){
					parsed_url = parsed_url+location.search;
				}
				ajax2 = true;
				parsed_url = parsed_url.replace("//", "/");
				accjax(parsed_url,'ajaxwait','maincontent','GET', '');
				ajax2 = false;
			}
		};
	}
	var url_hash = window.location.hash.substr(1);
	$('.nav-tabs a[href="#' + url_hash + '"]').tab('show');
	// Remove the class of child and grandchild
	// This removes the CSS 'falback'
	$("#nav ul.topmenu").removeClass("child");
	$("#nav ul.grandchild").removeClass("grandchild");
	
	// When a list item that contains an unordered list
	// is hovered on
	$("#nav li").has("ul").hover(function(){

		//Add a class of current and fade in the sub-menu
		$(this).addClass("current").children("ul").slideDown(100);
	}, function() {

		// On mouse off remove the class of current
		// Stop any sub-menu animation and set its display to none
		$(this).removeClass("current").children("ul").stop(true, true).css("display", "none");
	});


	$('.night-toggle').on('click', function() {
		$('html').toggleClass('dark');
		return false;
	});



	$('input#menu_name').focus(function() {
		if (this.value == lng_user) { this.value = '';}
	});
	$('input#menu_name').blur(function() {
		if (this.value == '') { this.value = lng_user;}
	});
	$('input#menu_pass').focus(function() {
		if (this.value == lng_pass) { this.value = '';this.setAttribute('type','password');}
	});
	$('input#menu_pass').blur(function() {
		if (this.value == '') { this.value = lng_pass;this.setAttribute('type','text');}
	});

		$('.navbar-toggler').on('click', function() {
			var icon = $(this).find('i');
			if ($(this).hasClass('collapsed')) {
				icon.removeClass('fa-sort-desc').addClass('fa-sort-asc');
			} else {
				icon.removeClass('fa-sort-asc').addClass('fa-sort-desc');
			}
		});
});


$(document).on('click', '.dv_show_2fa', function () {
	$('#dv_2fa').slideToggle( "slow");
});

$(document).on('click', '.tkt_usr_pss', function () {
	$('#dv_tkt_usr_pss').slideToggle( "slow");
});

$(document).on('click', '.tkt_reply_options', function () {
	$('#dv_tkt_reply_options').slideToggle( "slow");
});

$(document).on('click', '.tkt_usr_pss2', function () {
	if(IsVisible('dv_tkt_usr_pss')){
		$('#dv_tkt_usr_pss').slideUp('slow', function() {
			hide_div('dv_tkt_usr_pss');
			hide_div('dv_tkt_usr_pss_exist');
		});
	}else{
		if(IsVisible('dv_tkt_usr_pss_exist')){
			$('#dv_tkt_usr_pss_exist').slideUp('slow', function() {
				hide_div('dv_tkt_usr_pss_exist');
			});
		}else{
			$('#dv_tkt_usr_pss_exist').slideDown('slow', function() {
				show_div('dv_tkt_usr_pss_exist');
			});
		}
	}
});
$(document).on('click', '.dv_tkt_usr_pss_exist_confirm', function () {
	$('#dv_tkt_usr_pss').slideToggle( "slow");
});
$(document).on('click', '.dv_set_dns', function () {
	$('#dv_dns').slideToggle( "slow");
});

$(document).on('click', '.invoice_haghighi', function () {
	hide_div('name_sherkat');
	hide_div('shenase_melli');
	hide_div('shomare_sabt');
	show_div('last_name');
	show_div('shomare_melli');
	show_div('shomare_shenasname');
});
$(document).on('click', '.invoice_hoghooghi', function () {
	show_div('name_sherkat');
	show_div('shenase_melli');
	show_div('shomare_sabt');
	hide_div('last_name');
	hide_div('shomare_melli');
	hide_div('shomare_shenasname');
});




(function($){
  
    $.fn.extend({   

        filter_input: function(options) {

          var defaults = {  
              regex:".",
              negkey: false, // use "-" if you want to allow minus sign at the beginning of the string
              live:false,
              events:'keypress paste'
          }  
                
          var options =  $.extend(defaults, options);  
          
          function filter_input_function(event) {

            var input = (event.input) ? event.input : $(this);
            if (event.ctrlKey || event.altKey) return;
            if (event.type=='keypress') {

              var key = event.charCode ? event.charCode : event.keyCode ? event.keyCode : 0;

              // 8 = backspace, 9 = tab, 13 = enter, 35 = end, 36 = home, 37 = left, 39 = right, 46 = delete
              if (key == 8 || key == 9 || key == 13 || key == 35 || key == 36|| key == 37 || key == 39 || key == 46) {

                // if charCode = key &amp; keyCode = 0
                // 35 = #, 36 = $, 37 = %, 39 = ', 46 = .
         
                if (event.charCode == 0 &amp;&amp; event.keyCode == key) {
                  return true;                                             
                }
              }
              var string = String.fromCharCode(key);
              // if they pressed the defined negative key
              if (options.negkey &amp;&amp; string == options.negkey) {
                // if there is already one at the beginning, remove it
                if (input.val().substr(0, 1) == string) {
                  input.val(input.val().substring(1, input.val().length)).change();
                } else {
                  // it isn't there so add it to the beginning of the string
                  input.val(string + input.val()).change();
                }
                return false;
              }
              var regex = new RegExp(options.regex);
            } else if (event.type=='paste') {
              input.data('value_before_paste', event.target.value);
              setTimeout(function(){
                filter_input_function({type:'after_paste', input:input});
              }, 1);
              return true;
            } else if (event.type=='after_paste') {
              var string = input.val();
              var regex = new RegExp('^('+options.regex+')+$');
            } else {
              return false;
            }

            if (regex.test(string)) {
              return true;
            } else if (typeof(options.feedback) == 'function') {
              options.feedback.call(this, string);
            }
            if (event.type=='after_paste') input.val(input.data('value_before_paste'));
            return false;
          }
          
          var jquery_version = $.fn.jquery.split('.');
          if (options.live) {
            if (parseInt(jquery_version[0]) &gt;= 1 &amp;&amp; parseInt(jquery_version[1]) &gt;= 7) {
              $(this).on(options.events, filter_input_function); 
            } else {
              $(this).live(options.events, filter_input_function); 
            }
          } else {
            return this.each(function() {  
              var input = $(this);
              if (parseInt(jquery_version[0]) &gt;= 1 &amp;&amp; parseInt(jquery_version[1]) &gt;= 7) {
                input.off(options.events).on(options.events, filter_input_function);
              } else {
                input.unbind(options.events).bind(options.events, filter_input_function);
              }
            });  
          }
          
        }  
    });  
      
})(jQuery); 

var scrlInterval1 = 0;
var scrlInterval2 = 0;
var scrlIntervalStop = 0;
var LastwinSize = $(window).width();
$(document).ready(function() {
	$(function () {
	  $('[data-toggle="popover"]').popover()
	});
	if ($(window).width() &lt; 800) {
		closeSidebar();
		SideBtn(1);
		// Hide Header on on scroll down
		var didScroll;
		var lastScrollTop = 0;
		var delta = 10;
		var navbarHeight = $("#mainheader").outerHeight();
		var scrollCheckInterval = 250;
		$(window).scroll(function(event){
			didScroll = true;
		});

		scrlInterval1 = setInterval(function() {
			if(scrlIntervalStop == 0){
				if (didScroll) {
					hasScrolled();
					didScroll = false;
				}
			}
		}, scrollCheckInterval);
		function hasScrolled() {
			var st = $(this).scrollTop();
			
			// Make sure they scroll more than delta
			if(Math.abs(lastScrollTop - st) &lt;= delta)
				return;
			
			// If they scrolled down and are past the navbar, add class .nav-up.
			// This is necessary so you never see what is "behind" the navbar.
			if (st &gt; lastScrollTop &amp;&amp; st &gt; navbarHeight){
				// Scroll Down
				$('#mainheader').removeClass('nav-down').addClass('nav-up');
				SideBtn(0);
			} else {
				// Scroll Up
				if(st + $(window).height() &lt; $(document).height()) {
					$('#mainheader').removeClass('nav-up').addClass('nav-down');
					SideBtn(1);
				}
			}
			
			lastScrollTop = st;
		}
	}else{
		scrlIntervalStop = 1;
		if(scrlInterval1 &gt; 0){clearInterval(scrlInterval1);}
		didScroll = false;
		scrollCheckInterval = 0;
		$('#mainheader').removeClass('nav-up').addClass('nav-down');
		if($(".page-wrapper").hasClass("toggled")){
			SideBtn(0);
		}else{
			SideBtn(1);
		}
	}

	var sliding_dv_tkt_cid_did = false;
	jQuery(function ($) {
		$(".sidebar-dropdown &gt; a").click(function() {
			$(".sidebar-submenu").slideUp(200);
			if ($(this).parent().hasClass("active")) {
				$(".sidebar-dropdown").removeClass("active");
				$(this).parent().removeClass("active");
			}else{
				$(".sidebar-dropdown").removeClass("active");
				$(this).next(".sidebar-submenu").slideDown(200);
				$(this).parent().addClass("active");
				var topPosition = $('.sidebar-dropdown.active').position().top;
			}

		});
		$("a.cat-title").click(function() {
 			$(".dropdown-menu").slideUp(200, function() {
				for(var i=1; i &lt; 10; i++){
					if(element_exist("dropdown-menu"+i)){
						var attr = $("#dropdown-menu"+i).attr('style');
						//alert(attr);
						if(attr == 'display: none;'){
							$("#dropdown-menu"+i).removeAttr("style");
						}
					}
				}
			});
		});
		$('.dropdown-toggle.keepopen').on('click', function(event) {
			$('.dropdown-menu.keepopen').slideToggle();
			event.stopPropagation();
		});

		$('.dropdown-menu.keepopen').on('click', function(event) {
			event.stopPropagation();
		});

		$('#pagecontent').on('click', function(event) {
			$(".navbar-collapse").removeClass('show');
			$(".navbar-toggler").addClass('collapsed');
		});

		$(window).on('click', function() {
 			$(".dropdown-menu").slideUp(200, function() {
				for(var i=1; i &lt; 10; i++){
					if(element_exist("dropdown-menu"+i)){
						var attr = $("#dropdown-menu"+i).attr('style');
						//alert(attr);
						if(attr == 'display: none;'){
							$("#dropdown-menu"+i).removeAttr("style");
						}
					}
				}
			});
		});
		$('.navbar-collapse a.sub-cat-title').click(function(){
			$(".navbar-collapse").removeClass('show');
			$(".navbar-toggler").addClass('collapsed');
		});
		$('a.dropdown-item').click(function(){
			$(".navbar-collapse").removeClass('show');
			$(".navbar-toggler").addClass('collapsed');
		});
		$("#close-sidebar").click(function() {
			closeSidebar();
		});
		if(document.cookie){
			if(getCookie('sidebar') == '1'){
				showSidebar();
				$("#navLogo").removeClass('logo-img-sm');
			}else{
				closeSidebar();
				$("#navLogo").addClass('logo-img-sm');
			}
		}
		$(".toggle-sidebar").click(function() {
			if($(".page-wrapper").hasClass("toggled")){
				closeSidebar();
			}else{
				showSidebar();
			}
		});
		if ($(window).width() &gt; 800) {
			$('.dropdown1').hover(function() {
				$(this).find('.dropdown-menu').stop(true, true).delay(100).fadeIn(200);
			}, function() {
				$(this).find('.dropdown-menu').stop(true, true).delay(100).fadeOut(200);
			});
		}
		$("#sidebar_overaly").click(function() {
			if ($(window).width() &lt; 800) {
			  closeSidebar();
			  SideBtn(1);
			}
		});
		$("#show-sidebar").click(function() {
			showSidebar();
		});


		$(window).on('resize', function(){
			if ($(window).width() &lt; 768) {
				$(".cart-order-txt").show();
			}else if ($(window).width() &lt; 1200){
				$(".cart-order-txt").hide();
			}else{
				$(".cart-order-txt").show();
			}
			if ($(window).width() &lt; 800) {
				var didScroll;
				var lastScrollTop = 0;
				var delta = 10;
				scrlIntervalStop = 0;
				var navbarHeight = $('#mainheader').outerHeight();
				var scrollCheckInterval = 250;
				$(window).scroll(function(event){
					didScroll = true;
				});

				scrlInterval2 = setInterval(function() {
					if(scrlIntervalStop == 0){
						if (didScroll) {
							hasScrolled();
							didScroll = false;
						}
					}
				}, scrollCheckInterval);

				function hasScrolled() {
					var st = $(this).scrollTop();
					
					// Make sure they scroll more than delta
					if(Math.abs(lastScrollTop - st) &lt;= delta)
						return;
					
					// If they scrolled down and are past the navbar, add class .nav-up.
					// This is necessary so you never see what is "behind" the navbar.
					if (st &gt; lastScrollTop &amp;&amp; st &gt; navbarHeight){
						// Scroll Down
						$('#mainheader').removeClass('nav-down').addClass('nav-up');
						SideBtn(0);
					} else {
						// Scroll Up
						if(st + $(window).height() &lt; $(document).height()) {
							$('#mainheader').removeClass('nav-up').addClass('nav-down');
							SideBtn(1);
						}
					}
					lastScrollTop = st;
				}
			}else{
				didScroll = false;
				scrollCheckInterval = 0;
				scrlIntervalStop = 1;
				if(scrlInterval1 &gt; 0){clearInterval(scrlInterval1);}
				if(scrlInterval2 &gt; 0){clearInterval(scrlInterval2);}
				$('#mainheader').removeClass('nav-up').addClass('nav-down');
				if($(".page-wrapper").hasClass("toggled")){
					SideBtn(0);
				}else{
					SideBtn(1);
				}
			}
			if ($(window).width() != LastwinSize){
				LastwinSize = $(window).width();
				if ($(window).width() &lt; 800) {
					if(!$('#sidebar_overaly').is(":visible")){
						closeSidebar();
						SideBtn(1);
					}
				}else{
				  showSidebar();
				  SideBtn(0);
				  $("#sidebar").show();
				  $("#sidebar_overaly").hide();
				}
			}
		});

	});


	if(element_exist('loginname')){
		$('#loginname').filter_input({regex:'[a-zA-Z0-9\s]'});
	}
	if(element_exist('phone_number')){
	$('#phone_number').filter_input({regex:'[0-9]'});
	}
	if(element_exist('mobile_number')){
	$('#mobile_number').filter_input({regex:'[0-9]'});
	}
	if(element_exist('postcode')){
	$('#postcode').filter_input({regex:'[0-9]'});
	}
	$('.submitregister1').keypress(function (e) {
	  if (e.which == 13) {
		check_register_form1();
		return false;
	  }
	});
	$('.submitregister2').keypress(function (e) {
	  if (e.which == 13) {
		check_register_form2();
		return false;
	  }
	});
	if ($(".chosen")[0]){
		if ($.fn.chosen) {
			jQuery(".chosen").chosen();
		}
	}
});
function getCookie(cookieName) {
  let cookie = {};
  document.cookie.split(';').forEach(function(el) {
    let [key,value] = el.split('=');
    cookie[key.trim()] = value;
  })
  return cookie[cookieName];
}

$(document).on('click', '.rate_ticket a', function (e) {
		// make sure the chosen star stays selected
		var star = $(this);
		var rating_hash = e.target.id;
		a = Split(rating_hash, '_');
		a_tmp = a[0];
		score_tmp = a_tmp[a_tmp.length-1];
		dv_hash = a[1];
		var curr_score = $('#score_'+dv_hash).val();
		if(curr_score &gt; 0){
			alert(already_rated);
			return false;
		}
		switch (score_tmp) {
			case '1':
				txt = 'خیلی بد';
				break;
			case '2':
				txt = 'بد';
				break;
			case '3':
				txt = 'متوسط';
				break;
			case '4':
				txt = 'خوب';
				break;
			case '5':
				txt = 'خیلی خوب';
				break;
		}
		var confirm_rate=confirm('امتیاز '+score_tmp+' ('+txt+') ثبت شود؟');
		if(confirm_rate){
			star.closest('ul').find('.checked').removeClass('checked');
			star.addClass('checked');
			var dv_rate_result = 'rate_ticket_result_'+dv_hash
			var rating_url = '?param=99100299&amp;param2=rate_ticket&amp;ajx=1&amp;rating='+rating_hash;
			accjax(rating_url,'ajaxwait',dv_rate_result,'GET','',1);
		}
		//return false;
		//whatever else you want to do when something gets clicked
});

$(document).on('click', '.lnk_domain_curr_whois', function () {
	if(IsVisible('tlh_whois_1')){
		for(i=1; i&lt;15;i++){
			tgl1 = 'curr_whois_'+i;
			tgl2 = 'tlh_whois_'+i;
			toggle(tgl1, tgl2);
		}
		$('#tlh_curr_whois').val('curr');
		$('.lnk_domain_curr_whois').css("font-weight","Bold");
		$('.lnk_domain_tlh_whois').css("font-weight","Normal");
	}
});
$(document).on('click', '.lnk_domain_tlh_whois', function () {
	if(IsVisible('curr_whois_1')){
		for(i=1; i&lt;15;i++){
			tgl1 = 'curr_whois_'+i;
			tgl2 = 'tlh_whois_'+i;
			toggle(tgl1, tgl2);
		}
		$('#tlh_curr_whois').val('tlh');
		$('.lnk_domain_tlh_whois').css("font-weight","Bold");
		$('.lnk_domain_curr_whois').css("font-weight","Normal");
	}
});

$(document).on('click', '.add-ns-record', function(event)
{
	var rec_count = $('#record_count').val();
	var domain_name = $('#domain_name').val();
	var new_rec_id = Number(rec_count) + 1;
	var newtr = '<tr><td>'+new_rec_id+'</td><td><select class="record_type_select" id="record_type_'+rec_count+'" name="record_type_'+rec_count+'"><option value="DEL">انتخاب کنید</option><option value="A">A</option><option value="AAAA">AAAA</option><option value="MX">MX</option><option value="TXT">TXT</option><option value="CNAME">CNAME</option><option value="URL">Forward</option></select></td><td><div dir="ltr"><input dir="ltr" id="record_name_'+rec_count+'" name="record_name_'+rec_count+'" style="width:50px" type="text" value=""/>.'+domain_name+'</div></td><td><input dir="ltr" id="record_address_'+rec_count+'" name="record_address_'+rec_count+'" size='18"' style="width:150px" type="text" value=""/></td><td><div id="dv_priority_'+rec_count+'" style="display:none"><input name="record_priority_'+rec_count+'" step="1" style="width:50px" type="number" value="0"/></div></td></tr>';
    $(this).closest('tr').before(newtr);
	$('#record_count').val(new_rec_id);
});

$(document).on('click', '.add-ns-record-atak', function(event)
{
	var rec_count = $('#record_count').val();
	var domain_name = $('#domain_name').val();
	var new_rec_id = Number(rec_count) + 1;
	var newtr = '<tr><td>'+new_rec_id+'</td><td><select class="record_type_select" id="record_type_'+rec_count+'" name="record_type_'+rec_count+'"><option value="DEL">انتخاب کنید</option><option value="A">A</option><option value="MX">MX</option><option value="TXT">TXT</option><option value="CNAME">CNAME</option></select></td><td><div dir="ltr"><input dir="ltr" id="record_name_'+rec_count+'" name="record_name_'+rec_count+'" style="width:50px" type="text" value=""/>.'+domain_name+'</div></td><td><input dir="ltr" id="record_address_'+rec_count+'" name="record_address_'+rec_count+'" size='18"' style="width:150px" type="text" value=""/></td><td><div id="dv_priority_'+rec_count+'" style="display:none"><input name="record_priority_'+rec_count+'" step="1" style="width:50px" type="number" value="0"/></div></td></tr>';
    $(this).closest('tr').before(newtr);
	$('#record_count').val(new_rec_id);
});

$(document).on({
  change: function() {
	  var rec_type = this.value;
	  var select_name = $(this).attr('name');
	  var select_name_length = select_name.length;
	  var this_rec_id = select_name.substr(12, select_name_length);
	  if(rec_type == 'MX'){
		  show_div('dv_priority_'+this_rec_id);
		  show_div('dv_priority');
	  }else{
		  hide_div('dv_priority_'+this_rec_id);
		  hide_div('dv_priority');
	  }
  }
}, '.record_type_select');

function SelectRenewYear(ryear){
	var domain_id_list = $('#domain_id_list').val();
	var domain_id_count = $('#domain_id_count').val();
	domain_id_arr = Split(domain_id_list, ':');
	for(var i=0; i &lt; domain_id_count; i++){
		if ( $('#renew-'+domain_id_arr[i]+' option[value='+ryear+']').length &gt; 0 ){
			$('#renew-'+domain_id_arr[i]).val(ryear);
		}
	}
}


function scrollToID(id){
	if(element_exist(id)){
    var aTag = $('#'+id);
	var ofset_top = aTag.offset().top - 130;
    $('html,body').animate({scrollTop: ofset_top},'slow');
	$('#'+id).fadeIn(200).fadeOut(300).fadeIn(1500);
	}else{
		return false;
	}
}


function hasNumber(str) {
  return /\d/.test(str);
}

function drpdwnUiRtl(){
	$('.ui .menu .item').css('text-align', 'right');
	$('.ui.selection.dropdown').css('padding', '0');
	$('.ui.dropdown').css('text-align', 'right');
	$('.ui.dropdown').css('padding-right', '20px');
}

function SideBtn(show){
	return 0;
}

function copyToClipboard(txt) {
  var $temp = $("<input/>");
  $("body").append($temp);
  $temp.val(txt).select();
  document.execCommand("copy");
  $temp.remove();
}

function slct_onchg(){
	$('#dv_send_new_ticket').html('');
	$('#dv_suggest').html('');
	$('#dv_department').html('لطفا کمی صبر کنید...');
	accjax_post2('?param=99182883&amp;param2=process&amp;ajx=1', document.getElementById('frm_cid_did'), 'chg_cid_did_wait', 'dv_department');
}
function display_sub_dpt(dept){
	var dpt_subj_id_list = document.getElementById('dpt_subj_id_list').value;
	var dpt_id_list = document.getElementById('dpt_id_list').value;
	document.getElementById('dpt_id').value = dept;
	tmp_dpt_subj_id_list = Split(dpt_subj_id_list, ':');
	tmp_dpt_id_list = Split(dpt_id_list, ':');
	tmp_dpt_subj_id_list_count = tmp_dpt_subj_id_list.length;
	tmp_dpt_id_list_count = tmp_dpt_id_list.length;
	for(i = 1; i &lt;= tmp_dpt_id_list_count; i++){
		for(j = 1; j &lt;= tmp_dpt_subj_id_list_count; j++){
			tr_name = 'tr_sub_'+tmp_dpt_id_list[i]+'_'+ tmp_dpt_subj_id_list[j];
			if(element_exist(tr_name)){
				$('#'+tr_name).fadeOut('slow');
			}
		}
	}
	for(di = 1; di &lt;= tmp_dpt_subj_id_list_count; di++){
		tr_name = 'tr_sub_'+dept+'_'+ tmp_dpt_subj_id_list[di];
		if(element_exist(tr_name)){
			$('#'+tr_name).fadeIn('slow');
		}
	}
	Write_in_element('dv_suggest', ' ');
	$('input[name=radio_sub_'+dept+']').attr('checked',false);
}
function suggest_dpt_subj(subj){
	var did = document.getElementById('selected_did').value;
	var cid = document.getElementById('selected_cid').value;
	var pid = document.getElementById('productid').value;
	var server_type = document.getElementById('server_type').value;
	SwitchNavTab('nav-suggest');
	suggest_url ="?param=99182883&amp;param2=suggest&amp;ajx=1&amp;server_type="+server_type+"&amp;did="+did+"&amp;pid="+pid+"&amp;cid="+cid+"&amp;subj="+subj;
	accjax(suggest_url,'ajaxwait','dv_suggest','GET');
	$('#dv_send_new_ticket').html('');
}
function show_ticket_departments(){
	$('#dv_suggest_old_tickets').fadeOut('slow');
	$('#dv_ticket_departments').fadeIn('slow');
}
function problem_solved(id){
	solved_url ="?param=99182883&amp;param2=solved&amp;ajx=1&amp;id="+id;
	accjax(solved_url,'ajaxwait','dv_suggest','GET');
	return false;
}
function send_new_ticket(subj_id, score){
	dpt_id = document.getElementById('dpt_id').value;
	cid_did = document.getElementById('cid_did').value;
	uid = document.getElementById('uid').value;
	newticket_url ="?param=99182883&amp;param2=new_ticket&amp;uid="+uid+"&amp;ajx=1&amp;subj_id="+subj_id+"&amp;dpt_id="+dpt_id+"&amp;score="+score+"&amp;ciddid="+cid_did;
	accjax(newticket_url,'ajaxwait','dv_send_new_ticket','GET');
	SwitchNavTab('nav-ticket');
	return false;
}
function validateSubject(){
	var str = document.getElementById('subject').value;
	var subj_err1 = 'لطفا از عناوینی مانند سلام، فوری، کمک، مهم و ... استفاده نکنید.\nعنوان باید چکیده ای از متن سوال یا درخواست شما باشد';
	var subj_err2 = 'عنوان انتخاب شده خیلی کلی و بی ارتباط به تیکت است!\n عنوان باید چکیده ای از متن سوال یا درخواست شما باشد';
	var bad_subj_arr1 = new Array("فوری", "سلام", "سلاام", "salam", "ضروری", "فووری", "فوورری", "slm", "کمک", "مهم", "بیچاره", "بد بخت", "بدبخت");
	var bad_subj_arr2 = new Array("سوال", "سؤال", "هاست", "دامنه", "dns", "پرداخت", "soal", "host", "domain", "دامین", "دومین", "درخواست", "واجب", "مشکل", "آپلود", "آموزش", "ثبت", "برگشت", "انتقال", "تمدید", "خرید", "راهنمایی", "نمایندگی", "help", "دامين", "دومين", "تمديد", "خريد", "راهنمايي", "نمايندگي", "d n s", "child", "اپلود", "لغو", "whois", "هویز", "ریسلر", "error", "خطا", "domin", "سرور", "vps", "server", "موجودی", "موجودي", "صورتحساب", "صورت حساب", "فاکتور", "اطلاعات", "تغییر", "ساسپند");
	for (var i=0;i &lt; bad_subj_arr1.length;i++)
	{
		if(str.search(bad_subj_arr1[i])!= -1){
			alert(subj_err1);
			document.frm_newpm.subject.select();
			return false;
		}
	}
	for (var i=0;i &lt; bad_subj_arr2.length;i++)
	{
		if(bad_subj_arr2[i] == str){
			alert(subj_err2);
			document.frm_newpm.subject.select();
			return false;
		}
	}
	if(str.length &lt; 5){
		alert(subj_err2);
		document.frm_newpm.subject.select();
		return false;
	}
	CheckNewMessageSubject();
	return true;
}


function switchTab(tab){
    $('.nav-tabs a[href="#' + tab + '"]').tab('show');
}

function select_service_row(id){
	if ($('#chk_'+id).is(':checked')) {
		$('#chk_'+id).prop( "checked", false );
	}else{
		$('#chk_'+id).prop( "checked", true );
	}
}

function select_domain_row(id){
	select_service_row(id);
}

function tkt_select_service_row(id){
	$("input[name='service_domain']").prop('checked', false);
	$("#" + id).prop('checked', true);
	SelectRadioButton(id);
	scrollDown145();
	var_service_name = $("#spn_" + id).text();
	$('#selected_service_domain').html('<div align="center">ارسال تیکت در ارتباط با سرویس : <b>'+var_service_name+'</b></div><div align="left"><input class="btn btn-warning" onclick="javascript:SwitchNavTab(\'nav-department\');" type="button" value="    مرحله بعد    "/></div>');
}

function tkt_select_domain_row(id){
	$("input[name='service_domain']").prop('checked', false);
	$("#" + id).prop('checked', true);
	SelectRadioButton(id);
	scrollDown145();
	var_domain_name = $("#spn_" + id).text();
	$('#selected_service_domain').html('<div align="center">ارسال تیکت در ارتباط با دامنه : <b>'+var_domain_name+'</b></div><div align="left"><input class="btn btn-warning" onclick="javascript:SwitchNavTab(\'nav-department\');" type="button" value="    مرحله بعد    "/></div>');
	//slct_onchg();
}

function scrollDown145() {
  var headerHeight = 100;
  var scrollToPosition = $('#selected_service_domain').offset().top - headerHeight;
  $('html, body').animate({
    scrollTop: scrollToPosition
  }, 1000);
}
var countDownTimerID = false;
function RegisterUpdateResendTimer(timer1) {
	rg_step = $('#rg_step').val();
	if(rg_step == 2){
		tmr_seconds = timer1 - 1;
		tmr_seconds = Math.round(tmr_seconds);
		minutes = tmr_seconds / 60;
		minutes = Math.floor(tmr_seconds/60);
		seconds = tmr_seconds % 60;;
		minutes = Math.round(minutes);
		seconds = Math.round(seconds);
		if(seconds &gt; 0 || minutes &gt; 0){
			seconds_str = seconds.toString();
			minutes_str = minutes.toString();
			if(seconds &lt; 10){
				seconds_str = '0'+seconds.toString();
			}
			if(minutes &lt; 10){
				minutes_str = '0'+minutes.toString();
			}
			document.getElementById('resendTimer').innerHTML = minutes_str+':'+seconds_str;
			countDownTimerID = window.setTimeout("RegisterUpdateResendTimer(tmr_seconds);", 1000);
		}else{
			document.getElementById('resendTimer').innerHTML = '<a href="#" onclick="javascript:RegisterShowResendCode(); return false;">ارسال دوباره کد</a>';
		}
	}
}

function RegisterShowResendCode(){
	changesecimg('sec_register');
	$("#tr_mobile").toggle();
	$("#tr_mobile_code").toggle();
	$("#tr_national_id").toggle();
	$("#dv_phone_call").toggle();
	show_div('tr_mobile_captcha');
	hide_div('dv_rules');
	$('#alert_msg').text('');
	Write_in_element('resendTimer', '');
	$('#rg_step').val('1');
	$("#sec_register_box").focus();
}

function createNavTab(navId1, navId2, navTitle, navContent, href, dvId, htmlContent){
	if ($("#" + navId1).length === 0) {
		$(".nav-tabs").append(
		'<a aria-controls="'+navId2+'" aria-selected="true" class="nav-item nav-link" data-toggle="tab" href="#'+href+'" id="'+navId1+'" onclick="javascript:window.location.hash = \'#'+href+'\';" role="tab">'+navTitle+'</a>'
		);
		$(".tab-content").append(
		'<div aria-labelledby="'+navId1+'" class="tab-pane fade p-3 bg-content shadow1" id="'+navId2+'" role="tabpanel"><div id="'+dvId+'">'+htmlContent+'</div></div>'
		);
	}
	SwitchNavTab(navId1);
}

function SwitchNavTab(ID){
	if(ID == 'nav-department'){
		slct_onchg();
	}
	$('#'+ID+'-tab').removeClass("d-none");
	$('[href="#'+ID+'"]').tab('show');
	  var headerHeight = 100;
	  var scrollToPosition = $('#nav-tab').offset().top - headerHeight;
	  $('html, body').animate({
		scrollTop: scrollToPosition
	  }, 500);
	if(ID == 'nav-service'){
		var cid_did_get =  $("#cid_did_get").val();
		if(cid_did_get != 0){
			var separator = "_";
			var resultArray = cid_did_get.split(separator);
			if(resultArray[0] == 'dmn'){
				var did = resultArray[1];
				if(did &gt; 0){
					$('#tr_general_list').fadeOut();$('#tr_service_list').fadeOut();$('#tr_domains_list').fadeIn();tkt_domains_onclick();
					tkt_select_domain_row(cid_did_get);
				}
			}else if(resultArray[0] == 'srv'){
				var cid = resultArray[1];
				if(cid &gt; 0){
					$('#tr_general_list').fadeOut();$('#tr_domains_list').fadeOut();$('#tr_service_list').fadeIn();tkt_services_onclick();
					tkt_select_service_row(cid_did_get);
				}
			}
		}
	}
}

$(document).on('input', '#searchbox_services', function(){
		str = $("#searchbox_services").val();
		service_count = $("#service_count").val();
		if(str == ''){
			for(i=0; i&lt;=service_count; i++){
				show_div('trs_'+i);
			}
		}else{
			for(i=0; i&lt;=service_count; i++){
				hide_div('trs_'+i);
			}
			$( "tr:contains("+str+")" ).css("display", "");
		}
    });

$(document).on('input', '#searchbox_domains', function(){
		str = $("#searchbox_domains").val();
		service_count = $("#domain_count").val();
		if(str == ''){
			for(i=0; i&lt;=service_count; i++){
				show_div('trd_'+i);
			}
		}else{
			for(i=0; i&lt;=service_count; i++){
				hide_div('trd_'+i);
			}
			$( "tr:contains("+str+")" ).css("display", "");
		}
    });

function SelectRadioButton(option_id) {
  var selectedOption = $("#" + option_id);
  
  if (selectedOption.prop("checked")) {
    $("label").css("font-weight", "normal");
    selectedOption.parent().css("font-weight", "bold");
  } else {
    selectedOption.parent().css("font-weight", "normal");
  }
}

$(document).on('shown.bs.tab', 'a[data-toggle="tab"]', function (e) {
	var target = $(e.target).attr("href");
	cid = $('#cid').val();
	did = $('#did').val();
	load_url = '';
	if(cid &gt; 0){
		load_url ="?param=99573360&amp;param2=show&amp;ajx=1&amp;cid="+cid+"&amp;load=";
	}else if(did &gt; 0){
		load_url ="?param=99384882&amp;param2=show&amp;ajx=1&amp;did="+did+"&amp;load=";
	}
	if(target == '#nav-user' || target == '#nav-admin'){
		toggle_menu_pic();
	}
	if(load_url != '' &amp;&amp; target == '#nav-setting'){
		if($("#nav-setting").hasClass("pending-load")){
			load_url = load_url + 'modules';
			accjax(load_url,'','nav-setting','GET','',1);
			$("#nav-setting").removeClass("pending-load");
		}
	}
});


function validateCodeMelli(str) {
	if(strLen(str) != 10){
		return false;
	}
    for (let i = 0; i &lt; 4; i++) {
        if (str.length &lt; 10) {
            str = "0" + str;
        }
    }
    if (!/^[0-9]{10}$/.test(str)) {
        return false;
    }
    for (let i = 0; i &lt; 10; i++) {
        if (new RegExp('^' + i + '{10}$').test(str)) {
            return false;
        }
    }
    let sum = 0;
    for (let i = 0; i &lt; 9; i++) {
        sum += (10 - i) * parseInt(str.charAt(i));
    }
    let ret = sum % 11;
    let parity = parseInt(str.charAt(9));
    if ((ret &lt; 2 &amp;&amp; ret == parity) || (ret &gt;= 2 &amp;&amp; ret == 11 - parity)) {
        return true;
    }
    return false;

}

function SubmitFrmProfile(){
	if(chk_frm('frm_profile','')){
		scrollTo = 'frm_profile';
		accjax_post('?param=99051000&amp;param2=save',document.getElementById('frm_profile'),'page_profile_wait','maincontent');return 1;
	} else {
		return false;
	}
}

function SubmitFrmAddFund(){
	if(chk_frm('create_invoice','')){
		scrollTo = 'create_invoice';
		accjax_post('?param=99254110&amp;param2=add_invoice',document.getElementById('create_invoice'),'create_invoice_wait','maincontent');return 1;
	} else {
		return false;
	}
}


function SubmitFrmContact()
{
	if(chk_frm('frmcontact','')){
		scrollTo = 'frmcontact';
		accjax_post('?param=99444525&amp;param2=save&amp;contactform=1',document.getElementById('frmcontact'),'page_contact_wait','maincontent');
		return 1;
	} else {
		return false;
	}
}

function SubmitFrmUserOptions()
{
	if(chk_frm('frmcontact','')){
			accjax_post('?param=99483771',document.getElementById('frmUserOptions'),'user_options_wait','maincontent');
			return 1;
	} else {
		return false;
	}
}

function SubmitFrmChangePass()
{
	if(chk_frm('frm_change_pass','')){
		scrollTo = 'frm_change_pass';
		accjax_post('?param=99051000&amp;param2=change_pass_save', document.getElementById('frm_change_pass'), 'change_pass_wait', 'maincontent');return 1;
	} else {
		return false;
	}
}

function SubmitFrmRecover(recover_id)
{
	if(chk_frm('frmrecover','')){
		scrollTo = 'frmrecover';
		var requrl = '?param=99054625&amp;recoverlogin='+recover_id;
		accjax_post(requrl,document.getElementById('frmrecover'),'frmrecover_wait','maincontent');return 1;
	} else {
		return false;
	}
}

function SubmitFrmDomainPanelProfile(){
	if(chk_frm('frm_domainpanel_profile','')){
		scrollTo = 'frm_domainpanel_profile';
		accjax_post('?param=99287761', document.getElementById('frm_domainpanel_profile'), 'page_profile_wait', 'maincontent');return 1;
	} else {
		return false;
	}
}

function SubmitFrmInvProfile(){
	if(chk_frm('frminvoiceprofile','')){
		scrollTo = 'frminvoiceprofile';
		accjax_post('?param=99022210', document.getElementById('frminvoiceprofile'), 'frminvoiceprofile_wait', 'maincontent');return 1;
	} else {
		return false;
	}
}

function SubmitFrmLogin(){
	if(chk_frm('frmlgn','')){
		scrollTo = 'frmlgn';
		accjax_post('?param=99956320', document.getElementById('frmlgn'), 'login_wait', 'dv_login_result');return 1;
	} else {
		return false;
	}
}

function SubmitFrmLoginRegister(){
	if(chk_frm('frmLoginRegister','')){
		if (element_exist('rules_accepted')){
			if(!$('#rules_accepted').is(":checked")){
				MyAlert(please_check_rules);
				return false;
			}
		}
		scrollTo = 'frmLoginRegister';
		javascript:accjax_post('?param=99100002',document.getElementById('frmLoginRegister'),'register_login_wait','maincontent');return 1;
	} else {
		return false;
	}
}

function SubmitFrmChangeMail(){
	if(chk_frm('frm_change_mail','')){
		accjax_post('?param=99051000&amp;param2=change_mail', document.getElementById('frm_change_mail'), 'change_email_wait', 'maincontent');return 1;
	} else {
		return false;
	}
}

function SubmitFrmChangeMobile(){
	if(chk_frm('frm_change_mobile','')){
		accjax_post('?param=99051000&amp;param2=change_mobile', document.getElementById('frm_change_mobile'), 'change_mobile_wait', 'maincontent');return 1;
	} else {
		return false;
	}
}


document.addEventListener('DOMContentLoaded', function () {
    const sidebarDropdowns = document.querySelectorAll('.sidebar-dropdown');
    const pageWrapper = document.querySelector('.page-wrapper');

    sidebarDropdowns.forEach(dropdown =&gt; {
        dropdown.addEventListener('click', function (event) {
            if (!pageWrapper.classList.contains('toggled')) {
                // جلوگیری از رفتار پیش‌فرض لینک
                event.preventDefault();

                // پنهان کردن همه زیرمنوها
                document.querySelectorAll('.sidebar-submenu').forEach(submenu =&gt; {
                    submenu.style.display = 'none';
                });

                // نمایش زیرمنوی مربوط به آیتم کلیک شده
                const submenu = this.querySelector('.sidebar-submenu');
                if (submenu) {
                    submenu.style.display = 'block';
                    submenu.style.top = `${this.getBoundingClientRect().top}px`;
                }
            }
        });
    });

    // پنهان کردن زیرمنوها در کلیک خارج از منو
    document.addEventListener('click', function (event) {
        if (!event.target.closest('.sidebar-dropdown')) {
            document.querySelectorAll('.sidebar-submenu').forEach(submenu =&gt; {
                submenu.style.display = 'none';
            });
        }
    });
});

function jdp_prepare(){
	jalaliDatepicker.startWatch({
		separatorChar: "/",
		minDate: "attr",
		maxDate: "attr",
		changeMonthRotateYear: true,
		showTodayBtn: true,
		showEmptyBtn: true
	});
}

function tkt_upload_attachment(uid){
	if($('#file1').val() == ''){
		var file_id = 1;
	}else if($('#file2').val() == ''){
		var file_id = 2;
	}else if($('#file3').val() == ''){
		var file_id = 3;
	}else{
		MyAlert('هر بار حداکثر ۳ فایل میتوانید آپلود کنید');
		$('#dv-upload-status').html('<p>در هنگام آپلود فایل خطایی رخ داده است.</p>');
		$('#tkt_attachment').val('');
		return false;
	}
	var file = $('#tkt_attachment')[0].files[0];
	var maxSize = 5 * 1024 * 1024;//5MB
	if (file.size &gt; maxSize) {
		$('#dv-upload-status').html('<p style="color: red;">حجم فایل بیش از حد مجاز است. لطفاً فایلی با حجم کمتر از 5 مگابایت انتخاب کنید.</p>');
		return;
	}
	var formData = new FormData();
	formData.append('uid', uid);
	formData.append('file', file);
	postdata = formData;
	url = '?param=99202255&amp;param2=upload_attachment&amp;id='+file_id;
	//jsonjax(url,'','dv-upload-status','POST','',1);
	$.ajax({
		xhr: function() {
			var xhr = new XMLHttpRequest();
			xhr.upload.addEventListener('progress', function(e) {
				if (e.lengthComputable) {
					var percentComplete = Math.round((e.loaded / e.total) * 100);
					$('.progress-bar').css('width', percentComplete + '%').attr('aria-valuenow', percentComplete).text(percentComplete + '%');
				}
			}, false);
			return xhr;
		},
		url: siteurl+'/json.php?param=99202255&amp;param2=upload_attachment&amp;id='+file_id,
		type: 'POST',
		data: formData,
		dataType: 'json',
		contentType: false,
		processData: false,
		beforeSend: function(){
			$('#dv-upload-status').html('<p>در حال آپلود فایل<br/>لطفا کمی صبر کنید..</p>');
			$('#btnSend').attr('disabled', true);
			$('.tkt_upload_progress').show();
		},
		success: function(response) {
			if(response.status === 'success') {
				$.each(response.data, function(index, item) {
					var div = $('#' + item.dv_name);
					if(div.length) {
						if(item.type === 'replace') {
							div.html(item.dv_content);
						} else if(item.type === 'merge') {
							div.append(item.dv_content);
						}
						
					}
					$('.tkt_upload_progress').hide();
				});
			} else {
				alert('Error: ' + response.message);
			}
		},
		error: function() {
			$('#dv-upload-status').html('<p>در هنگام آپلود فایل خطایی رخ داده است.</p>');
		}
	});
}

function tkt_delete_attachment(num){
	if(element_exist('spn_attachment_'+num)){
		$('#file'+num).val('');
		$('#spn_attachment_'+num).remove();
	}
}

</body>
</html>
