<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>peach-collector.min.html</title>
</head>
<body>

<script>
/*! For license information please see peach-collector.min.js.LICENSE */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("PeachCollector",[],t):"object"==typeof exports?exports.PeachCollector=t():e.PeachCollector=t()}(this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('{"name":"peach-collector","version":"1.4.1","description":"Peach library for collecting data","homepage":"https://peach.ebu.io","main":"dist/peach-collector.min.js","exports":{".":{"import":"./dist/esm/peach-collector.js","require":"./dist/umd/peach-collector.js"},"./package.json":"./package.json"},"files":["dist"],"scripts":{"build":"NODE_OPTIONS=--openssl-legacy-provider webpack --env build --config build.config.js && npm run test && node scripts/build && npm pack","dev":"webpack --progress --colors --watch --env dev","deploy":"webpack --env build --config build.config.js && webpack --config deploy.config.js","test":"mocha --require @babel/register --colors ./test/*.spec.js","test:browser:local":"npx wdio wdio.local.conf.js","test:browser:remote":"npx wdio wdio.browserstack.conf.js","test:watch":"mocha --require @babel/register --colors -w ./test/*.spec.js","test:cover":"cross-env NODE_ENV=test nyc mocha --require @babel/register --colors test/*.js","repl":"node -i -e \\"$(< ./lib/peach-collector.js)\\"","demo":"node ./demo-app/server.js"},"devDependencies":{"@babel/cli":"^7.0.0-beta.51","@babel/core":"^7.0.0-beta.51","@babel/plugin-proposal-object-rest-spread":"^7.20.2","@babel/preset-env":"^7.0.0-beta.51","@hapi/joi":"17.1.1","@wdio/browserstack-service":"6.0.17","@wdio/cli":"6.1.0","@wdio/local-runner":"6.1.1","@wdio/mocha-framework":"6.1.0","@wdio/selenium-standalone-service":"6.0.16","@wdio/spec-reporter":"6.0.16","@wdio/sync":"6.1.0","babel-eslint":"^8.0.3","babel-loader":"^8.0.0-beta.4","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-istanbul":"^5.1.0","babel-preset-env":"^7.0.0-beta.3","babel-register":"^7.0.0-beta.3","chai":"^4.1.2","chai-fetch":"^0.3.1","chai-spies":"^1.0.0","copy-webpack-plugin":"^5.1.1","cross-env":"^5.2.0","eslint":"^5.0.1","eslint-loader":"^2.0.0","jsdom":"^11.11.0","jsdom-global":"3.0.2","mocha":"^4.0.1","node-fetch":"^2.6.1","nyc":"^13.1.0","puppeteer-core":"3.0.0","selenium-standalone":"^6.23.0","uglifyjs-webpack-plugin":"^1.2.7","wdio-intercept-service":"4.1.1","webpack":"^4.42.0","webpack-cli":"^4.9.2","yargs":"^10.1.2"},"nyc":{"sourceMap":false,"instrument":false},"dependencies":{"@babel/register":"^7.22.5","@sentry/browser":"6","@sentry/tracing":"6","aws-sdk":"^2.1281.0","browserstack-local":"1.4.5","chai-wait-for":"^1.0.4","chromedriver":"83.0.0","esbuild":"0.16.10","express":"^4.17.1","is-equal-shallow":"^0.1.3","nock":"^12.0.1","sinon":"^9.2.4","webpack-s3-plugin":"^1.0.3","webpack-s3-uploader":"^1.3.3","xmlhttprequest":"^1.8.0"}}')},function(e,t,n){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=_(n(3)),r=_(n(4)),a=_(n(9)),l=_(n(10)),u=_(n(11)),s=_(n(12)),d=_(n(17)),c=_(n(18)),f=n(0);function _(e){return e&&e.__esModule?e:{"default":e}}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.window?this._window=i.window:this._window=t&&t.window===window?t:null,this.version=f.version,this._setup(n)}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(e,[{key:"_setup",value:function(e){var t=new o["default"](this._window),n=new a["default"](this._window,t,e.cookie_strictness),i=new u["default"](this._window,n.get_persistant_cookie_id()),f=new s["default"](this._window,t,i,n);return(0,c["default"])(this,t,n,i),(0,d["default"])(this,f),(0,l["default"])(this,t,n),(0,r["default"])(this,f.dispatcher(this),t,i,n),this}},{key:"init",value:function(e,t){return this.setAppId(t),this.setCollectEndpoints(e),this}}]),e}();t["default"]=p,e.exports=t["default"]}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.do_not_track=!0,this.site_key=undefined,this.user_id=null,t&&t.window===window?this.enabled=0===t.navigator.doNotTrack:this.enabled=!1}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"enable",value:function(){this.enabled=!0,this.do_not_track=!1}},{key:"disable",value:function(){this.enabled=!1,this.do_not_track=!0}},{key:"isEnabled",value:function(){return!(!this.enabled||this.do_not_track)}},{key:"set_user_id",value:function(e){this.user_id=e}},{key:"get_user_id",value:function(){return this.user_id}}]),e}();t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n,l,s){var d=function(){return e._window&&e._window.location?e._window.location.href:null},c=function(){return e._window&&e._window.document&&0!==e._window.document.referrer.length?e._window.document.referrer:null},f=function(t){var n=e._window&&e._window.location?e._window.location.href:null;return null===t?new o.EventContext(null,null,null,null,null,null,n):t&&!t.page_uri?t.setCustomField("page_uri",n):t};return e.triggerError=function(e){throw new Error(e)},e.sendCustomEvent=function(e,n){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;t(new i["default"](e,n,f(o),r,a))},e.sendPageViewEvent=function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;r=r||d(),a=a||c();var u=o.EventContext.pageViewContext(a,n);return t(new i["default"]("page_view",r,f(u),null,l)),e},e.sendReadMoreEvent=function(n){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return t(new i["default"]("read_more",n,f(o),null,r)),e},e.sendArticleStartEvent=function(n){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return t(new i["default"]("article_start",n,f(o),null,r)),e},e.sendArticleEndEvent=function(n){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,s=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null,d=r.EventProps.articleProps(o,a,l);return t(new i["default"]("article_end",n,f(u),d,s)),e},[["sendMediaPlayEvent","media_play"],["sendMediaPauseEvent","media_pause"],["sendMediaSeekEvent","media_seek"],["sendMediaStopEvent","media_stop"],["sendMediaEndEvent","media_end"],["sendMediaWaitingEvent","media_waiting"],["sendMediaErrorEvent","media_error"],["sendMediaStalledEvent","media_stalled"],["sendMediaSuspendEvent","media_suspend"],["sendMediaHeartbeatEvent","media_heartbeat"],["sendMediaVideoModeChangedEvent","media_video_mode_changed"],["sendMediaAudioModeChangedEvent","media_audio_mode_changed"],["sendMediaAudioChangedEvent","media_audio_changed"],["sendMediaPerformanceEvent","media_performance"],["sendMediaLoadStartEvent","media_loadstart"],["sendMediaCanPlayEvent","media_canplay"],["sendMediaLikeEvent","media_like"],["sendMediaShareEvent","media_share"]].forEach(function(n){e[n[0]]=function(l){var s,d,c,_,h=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,p=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,v=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,m=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;if("object"===u(l)&&l.nodeName)d=f(p),c=r.EventProps.propsFromHTMLMediaElement(l),v&&(c=Object.assign({},c,v)),_=a["default"].metadataFromHTMLMediaElement(l),m&&(_=Object.assign(_,m)),s=h||l.id;else{s=l,d=h;var g=e._window&&e._window.location?e._window.location.href:null;null!==d&&"object"===u(d)?d.setCustomField("page_uri",g):d=new o.EventContext(s,null,null,null,null,null,g),c=p,_=v}return t(new i["default"](n[1],s,d,c,_)),e}}),e.propsFromHTMLMediaElement=function(e){return r.EventProps.propsFromHTMLMediaElement(e)},e.metadataFromHTMLMediaElement=function(e){return a["default"].metadataFromHTMLMediaElement(e)},e.pageViewContext=function(e,t){return o.EventContext.pageViewContext(e,t)},e.readMoreContext=function(e,t){return o.EventContext.readMoreContext(e,t)},e.mediaContext=function(e,t,n,i,r,a){return o.EventContext.mediaContext(e,t,n,i,r,a)},e.recommendationContext=function(e,t,n,i,r,a,l){return o.EventContext.recommendationContext(e,t,n,i,r,a,l)},e.collectionContext=function(e,t,n,i,r,a,l,u,s){return o.EventContext.collectionContext(e,t,n,i,r,a,l,u,s)},e.EventContextComponent=function(e,t,n){return new o.EventContextComponent(e,t,n)},e.EventProps=function(){return new r.EventProps},e.EventMetadata=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;return new a["default"](e,t,n,i,o)},e.mediaMetadata=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;return new a["default"](e,t,n,i,o)},[["sendRecommendationHitEvent","recommendation_hit"],["sendCollectionHitEvent","collection_hit"]].forEach(function(n){e[n[0]]=function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,l=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,s=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null,d=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null,c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:null;l=l||(e._window&&e._window.location?e._window.location.href:null);var _=o.EventContext.recommendationContext(null,r,a,s,l,u,d);return t(new i["default"]("recommendation_hit",n,f(_),null,c)),e}}),[["sendRecommendationDisplayedEvent","recommendation_displayed"],["sendRecommendationLoadedEvent","recommendation_loaded"]].forEach(function(n){e[n[0]]=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,l=arguments.length>2&&arguments[2]!==undefined?arguments[2]:d(),u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:c(),s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,_=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null,h=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null,p=o.EventContext.recommendationContext(a,null,null,u,l,s,_);return t(new i["default"](n[1],r,f(p),null,h)),e}}),[["sendCollectionHitEvent","collection_hit"],["sendCollectionItemDisplayedEvent","collection_item_displayed"]].forEach(function(n){e[n[0]]=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,l=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,c=arguments.length>5&&arguments[5]!==undefined?arguments[5]:d(),_=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null,h=arguments.length>7&&arguments[7]!==undefined?arguments[7]:null,p=arguments.length>8&&arguments[8]!==undefined?arguments[8]:null,v=arguments[9],m=arguments[10],g=arguments.length>11&&arguments[11]!==undefined?arguments[11]:null,y=o.EventContext.collectionContext(null,a,l,u,s,h,c,_,p,v,m);return t(new i["default"](n[1],r,f(y),null,g)),e}}),[["sendCollectionDisplayedEvent","collection_displayed"],["sendCollectionLoadedEvent","collection_loaded"]].forEach(function(n){e[n[0]]=function(r){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,l=arguments.length>2&&arguments[2]!==undefined?arguments[2]:d(),u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:c(),s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,_=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null,h=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null,p=arguments.length>7&&arguments[7]!==undefined?arguments[7]:null,v=arguments.length>8&&arguments[8]!==undefined?arguments[8]:null,m=o.EventContext.collectionContext(a,null,null,null,null,u,l,s,_,h,p);return t(new i["default"](n[1],r,f(m),null,v)),e}}),e.createContextComponent=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return new o.EventContextComponent(e,t,n)},e.sendUserActionEvent=function(n,a,l){var u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,d=o.EventContext.userActionContext(n,u),c=r.EventProps.userActionProps(a,l);return t(new i["default"]("user_action",n,f(d),c,s)),e},e.setAppId=function(t){return l.set_app_id(t),e},e.setUserIsLoggedIn=function(t){return l.set_user_logged_in(t),e},e};var i=l(n(5)),o=n(6),r=n(7),a=l(n(8));function l(e){return e&&e.__esModule?e:{"default":e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;t["default"]=function i(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.type=e,this.id=t,this.event_timestamp=Date.now(),this.context=n,this.props=o,this.metadata=r},e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventContextComponent=t.EventContext=void 0;var r=function(){function e(t,n,o,r,a,l,u,s,d,c,f,_,h){i(this,e),this.id=t,this.type=n,this.items=o,this.item_id=r,this.hit_index=a,this.item_index=c,this.items_count=f,this.referrer=l,this.page_uri=u,this.source=s,this.component=d,this.experiment_id=_,this.experiment_component=h}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"setCustomField",value:function(e,t){return this[e]=t,this}},{key:"setCustomFields",value:function(e){var t=this;return Object.keys(e).forEach(function(n){t[n]=e[n]}),this}}],[{key:"pageViewContext",value:function(t,n){return new e(n,null,null,null,null,t,null,null,null)}},{key:"readMoreContext",value:function(t,n){return new e(null,null,null,null,null,null,null,t,n)}},{key:"mediaContext",value:function(t,n,i,o,r,a){return new e(t,n,null,null,null,i,o,r,a)}},{key:"recommendationContext",value:function(t,n,i,o,r,a,l){return new e(null,null,t,n,i,o,r,a,l)}},{key:"collectionContext",value:function(t,n,i,o,r,a,l,u,s){return new e(null,null,t,n,i,a,l,u,s,o,r,arguments.length>9&&arguments[9]!==undefined?arguments[9]:"default",arguments.length>10&&arguments[10]!==undefined?arguments[10]:"main")}},{key:"userActionContext",value:function(t,n){return new e(null,null,null,t,null,arguments.length>2&&arguments[2]!==undefined?arguments[2]:document.referrer,arguments.length>3&&arguments[3]!==undefined?arguments[3]:document.location.href,null,n,null,null,null)}}]),e}();t.EventContext=r;t.EventContextComponent=function a(e,t,n){i(this,a),this.type=e,this.name=t,this.version=n}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventProps=void 0;var o=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time_spent_s=null,this.playlist_id=null,this.insert_position=null,this.playback_position_s=null,this.previous_playback_position_s=null,this.is_playing=null,this.video_mode=null,this.audio_mode=null,this.start_mode=null,this.previous_id=null,this.playback_rate=null,this.volume=null,this.completion_ratio=null,this.position_ratio=null,[["setVideoModeBar","video_mode","bar"],["setVideoModeMini","video_mode","mini"],["setVideoModeNormal","video_mode","normal"],["setVideoModeWide","video_mode","wide"],["setVideoModePIP","video_mode","pip"],["setVideoModeFullScreen","video_mode","fullscreen"],["setVideoModeCast","video_mode","cast"],["setVideoModePreview","video_mode","preview"],["setAudioModeNormal","audio_mode","normal"],["setAudioModeMuted","audio_mode","muted"],["setStartModeNormal","start_mode","normal"],["setStartModeAutoPlay","start_mode","auto_play"],["setStartModeAutoContinue","start_mode","auto_continue"]].forEach(function(e){t[e[0]]=function(){return t[e[1]]=e[2],t}}),[["setPlaylistID","playlist_id"],["setInsertPosition","insert_position"],["setVideoMode","video_mode"],["setAudioMode","audio_mode"],["setStartMode","start_mode"],["setPreviousID","previous_id"]].forEach(function(e){t[e[0]]=function(n){return t[e[1]]=n,t}}),[["setTimeSpent","time_spent_s"],["setPlaybackPosition","playback_position_s"],["setPreviousPlaybackPosition","previous_playback_position_s"],["setPlaybackRate","playback_rate"],["setVolume","volume"],["setCompletionRatio","completion_ratio"],["setPositionRatio","position_ratio"]].forEach(function(e){t[e[0]]=function(n){return t[e[1]]=isNaN(n)?null:n,t}})}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"setIsPlaying",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return this.is_playing="boolean"==typeof e?e:null,this}},{key:"setCustomField",value:function(e,t){return this[e]=t,this}},{key:"setCustomFields",value:function(e){var t=this;return Object.keys(e).forEach(function(n){t[n]=e[n]}),this}}],[{key:"propsFromHTMLMediaElement",value:function(t){var n=new e;return n.time_spent_s=null,n.playback_position_s=t.currentTime,n.previous_playback_position_s=null,"VIDEO"===t.nodeName&&(n.video_mode="normal"),"AUDIO"===t.nodeName&&(n.audio_mode=t.muted?"muted":"normal"),n.start_mode=t.autoplay?"auto_play":"normal",n.previous_id=null,n.playback_rate=t.playbackRate,n.volume=t.volume,n}},{key:"articleProps",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,o=new e;return o.time_spent_s=t,o.completion_ratio=n,o.position_ratio=i,o}},{key:"userActionProps",value:function(t,n){var i=new e;return i.setCustomField("action",t),i.setCustomField("target",n),i}}]),e}();t.EventProps=o},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.format=n||"ondemand",this.episode_id=i,this.show_id=o,this.duration=r}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"setCustomField",value:function(e,t){return this[e]=t,this}},{key:"setCustomFields",value:function(e){var t=this;return Object.keys(e).forEach(function(n){t[n]=e[n]}),this}}],[{key:"metadataFromHTMLMediaElement",value:function(t){var n=new e;return n.type=t.nodeName.toLowerCase(),n.duration=t.duration,n}}]),e}();t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=t,this._name="Cookie",this.cookie_prefix="_pc",this.cookie_domain=null,this.expires=new Date((new Date).setFullYear((new Date).getFullYear()+1)).toUTCString(),this.valid_cookie_names=[this.cookie_prefix+"_c",this.cookie_prefix+"_s",this.cookie_prefix+"_st",this.cookie_prefix+"_t",this.cookie_prefix+"_lr"],this.session_start_time=null,this.cookie_id=null,this.current_timestamp=Date.now(),this.last_recorded_event_timestamp=0,this.inactivity_interval=1800,this.strictness=i,this._setup(n)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"_setup",value:function(e){this.strictness!==undefined&&["Strict","Lax","None"].includes(this.strictness)||(this.strictness="Strict"),this.get_persistant_cookie_id()||this.set_persistant_cookie_id(),"tracking_enabled"===this.get_tracking_cookie()?(this.set_tracking_cookie("tracking_enabled"),e.enable()):(this.set_tracking_cookie("do_not_track"),e.disable()),this.check_session_length()}},{key:"get_cookie_prefix",value:function(){return this.cookie_prefix}},{key:"set_cookie_prefix",value:function(e){this.cookie_prefix=e}},{key:"get_inactivity_interval",value:function(){return this.inactivity_interval}},{key:"set_inactivity_interval",value:function(e){this.inactivity_interval=e}},{key:"get_cookie_domain",value:function(){return this.cookie_domain}},{key:"set_cookie_domain",value:function(e){this.cookie_domain=e}},{key:"__get_root_tld",value:function(){if(this.cookie_domain)return this.cookie_domain;if(!this._window)return"domain not specified";var e=this._window.location.host.match(/(?:[^.]+\.)?(\w*(?:\.\w*)|localhost|(?:\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}))(:\d*)?$/)||[];return e.length>0?e[1]:"domain not specified"}},{key:"__generateGUID",value:function(){if("undefined"!=typeof this._window.crypto&&"undefined"!=typeof this._window.crypto.getRandomValues){var e=new Uint16Array(8);this._window.crypto.getRandomValues(e);var t=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return t(e[0])+t(e[1])+"-"+t(e[2])+"-"+t(e[3])+"-"+t(e[4])+"-"+t(e[5])+t(e[6])+t(e[7])}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},{key:"check_session_length",value:function(){var e=this.get_session_start_time()||0,t=this.get_last_recorded_timestamp()||0,n=this.get_inactivity_interval(),i=Date.now();if(e&&0!==t)return i-t>1e3*n?(this.set_last_recorded_timestamp_cookie(),void this.set_session_start_time_cookie()):void 0;this.set_last_recorded_timestamp_cookie(),this.set_session_start_time_cookie()}},{key:"set_last_recorded_timestamp_cookie",value:function(e){var t=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:null)||this.__get_root_tld();return e||(e=Date.now()),this._window&&(this._window.document.cookie=this.cookie_prefix+"_lr="+e+";SameSite="+this.strictness+";secure;path=/"+(t?";domain="+t:"")),this.last_recorded_event_timestamp=e,e}},{key:"set_tracking_cookie",value:function(e){var t=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:null)||this.__get_root_tld();return e||(e="do_not_track"),this._window&&(this._window.document.cookie=this.cookie_prefix+"_t="+e+";SameSite="+this.strictness+";secure;expires="+this.expires+";path=/"+(t?";domain="+t:"")),e}},{key:"get_tracking_cookie",value:function(){return this.__get_cookie_by_name(this.cookie_prefix+"_t")}},{key:"get_session_start_time",value:function(){var e=this.__get_cookie_by_name(this.cookie_prefix+"_st");return parseInt(e,10)}},{key:"get_last_recorded_timestamp",value:function(){return parseInt(this.__get_cookie_by_name(this.cookie_prefix+"_lr"),10)}},{key:"set_session_start_time_cookie",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=e||Date.now(),n=this.__get_root_tld();return this._window&&(this._window.document.cookie=this.cookie_prefix+"_st="+t+";SameSite="+this.strictness+";secure;path=/"+(n?";domain="+n:"")),this.session_start_time=e,t}},{key:"get_persistant_cookie_id",value:function(){return this.__get_cookie_by_name(this.cookie_prefix+"_c")}},{key:"set_persistant_cookie_id",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:null)||this.__get_root_tld();return e||(e=this.__generateGUID()),this._window&&(this._window.document.cookie=this.cookie_prefix+"_c="+e+";expires="+this.expires+";SameSite="+this.strictness+";secure;path=/"+(t?";domain="+t:"")),this.cookie_id=e,e}},{key:"__get_cookie_by_name",value:function(e){if(this.valid_cookie_names.includes(e)){if(this._window){var t=("; "+this._window.document.cookie).split("; "+e+"=");return 2===t.length&&t.pop().split(";").shift()}return e}return!1}}]),e}();t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n){if(!t||!n)return;e.setUserId=function(n){return t.set_user_id(n),e},e.enableTracking=function(){return t.enable(),n.set_tracking_cookie("tracking_enabled"),e},e.disableTracking=function(){return t.disable(),n.set_tracking_cookie("do_not_track"),e},e.isTrackingEnabled=function(){return t.isEnabled()},e.trackMediaPerformance=function(t,n){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null,l=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null,u={media_heartbeat:{heartbeat_interval:20},media_seek:!0,media_end:!0,media_waiting:!0,media_error:!0,media_stalled:!0,media_suspend:!0,media_performance:{stream_url_identifier:l||".m4v"},media_canplay:!0,media_loadstart:!0};e.trackMediaEvents(t,n,i,o,r,{...u,...a})},e.trackMediaEvents=function(t){for(var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,l=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null,u="function"===n?n(t):n,s=[["play","sendMediaPlayEvent","media_play",!0],["pause","sendMediaPauseEvent","media_pause",!0],["seeked","sendMediaSeekEvent","media_seek",!1],["seeking","sendMediaSeekEvent","media_seek",!1],["abort","sendMediaStopEvent","media_stop",!1],["ended","sendMediaEndEvent","media_end",!1],["loadstart","sendMediaLoadStartEvent","media_loadstart",!1],["canplay","sendMediaCanPlayEvent","media_canplay",!1],["waiting","sendMediaWaitingEvent","media_waiting",!1],["error","sendMediaErrorEvent","media_error",!1],["stalled","sendMediaStalledEvent","media_stalled",!1],["suspend","sendMediaSuspendEvent","media_suspend",!1],["progress","sendMediaPerformanceEvent","media_performance",!1],["timeupdate","sendMediaHeartbeatEvent","media_heartbeat",!1]],d=function(t,n,o,r,a,l){var u=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;t["on"+n[0]]=u?function(t){var s=u(t);s&&("object"===i(s)&&(r=s&&s.context?Object.assign({},r,s.context):r,a=s&&s.props?Object.assign({},a,s.props):a,l=s&&s.metadata?Object.assign({},l,s.metadata):l),e[n[1]](t.currentTarget,o,r,a,l))}:function(t){e[n[1]](t.currentTarget,o,r,a,l)}},c=function(n){var i=s[n];if(i[3]&&d(t,s[n],u,o,r,a),l&&l[i[2]])switch(i[2]){case"media_seek":d(t,s[n],u,o,r,a,function(){return"media_seek"!==e._tracking_latest_event&&(e._tracking_latest_event="media_seek",setTimeout(function(){e._tracking_latest_event=null},1e3),!0)});break;case"media_heartbeat":d(t,s[n],u,o,r,a,function(t){var n=l[i[2]].endpoint_id,o=e._getCollectEndpoints(),r=o.find(function(e){return e.options.id===n}),a=r.options.heartbeat_frequency_sec||l[i[2]].heartbeat_interval;return!(!a||t.target.paused||Math.round(t.target.currentTime)%a!=0||e._tracking_latest_event===i[2])&&(e._tracking_latest_event=i[2],setTimeout(function(){e._tracking_latest_event=null},a/2*1e3),!0)});break;case"media_loadstart":d(t,s[n],u,o,null,a,function(t){return e.__latest_media_load_start=Date.now(),!1});break;case"media_canplay":d(t,s[n],u,o,null,a,function(t){return e.__latest_media_can_play=Date.now(),!1});break;case"media_performance":d(t,s[n],u,o,r,a,function(n){if(e._tracking_latest_event_buffer!==i[2]){for(var o,r=t,a=r.duration,u=e._window.performance||{getEntries:function(){return[]}},s=null,d={},c=0;c<r.buffered.length;c++)if(r.buffered.start(r.buffered.length-1-c)<r.currentTime){o=100*r.buffered.end(r.buffered.length-1-c)/a-r.currentTime/a*100,s=r.buffered.end(r.buffered.length-1-c)/a-r.currentTime/a;var f=u.getEntries().filter(function(e){return e.name.indexOf(l[i[2]].stream_url_identifier)>-1});f.length>0&&(d=f[f.length-1])}var _={buffer_procent:o,buffer_length:s||null,load_segment_name:d.name||null,load_segment_duration:d.duration||null,load_segment_size:d.decodedBodySize||null,memory_usage_jsHeapSizeLimit:u&&u.memory&&u.memory.jsHeapSizeLimit||null,memory_usage_totalJSHeapSize:u&&u.memory&&u.memory.totalJSHeapSize||null,memory_usage_usedJSHeapSize:u&&u.memory&&u.memory.usedJSHeapSize||null,media_loadstart:e.__latest_media_load_start||null,media_canplay:e.__latest_media_can_play||null};return e._tracking_latest_event_buffer=i[2],setTimeout(function(){e._tracking_latest_event_buffer=null},1e4),{props:_}}return!1});break;default:d(t,s[n],u,o,r,a)}},f=0;f<s.length;f++)c(f);return e}},e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=n,this.app_id=null,this.type="web",this.user_logged_in=null,t&&(this.device={},this.device.type=t.navigator.userAgent,this.device.vendor=t.navigator.vendor,this.device.model=t.navigator.platform,this.device.language=t.navigator.language,this.device.timezone=(new Date).getTimezoneOffset()/60)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"set_id",value:function(e){this.id=e}},{key:"get_id",value:function(){return this.id}},{key:"set_app_id",value:function(e){this.app_id=e}},{key:"get_app_id",value:function(){return this.app_id}},{key:"set_user_logged_in",value:function(e){this.user_logged_in="boolean"==typeof e?e:null}},{key:"get_user_logged_in",value:function(){return this.user_logged_in}}]),e}();t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=a(n(13)),o=a(n(14)),r=a(n(15));function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=t,this.collect_endpoints=[],this.local_storage_prefix="_pc_",this.send_event_callback=null,this._tracking=n,this._client=i,this._cookie=o}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(e,[{key:"set_collect_endpoints",value:function(e,t){var n=this,i=[];if(Array.isArray(e))e.forEach(function(e){e.sitekey||e.url?i.push(new r["default"](n._window,e.options,e.url,e.sitekey,e.filter,e.payload_func)):console.error("[PEACH-COLLECTOR][ENDPOINT_SETUP] Cannot set up default endpoint without sitekey!")});else if("string"==typeof e)i.push(new r["default"](this._window,null,null,e,null));else{console.error("[PEACH-COLLECTOR][ENDPOINT_SETUP] First given init() param is neither an endpoint array nor a site key!")}this.collect_endpoints=i}},{key:"get_collect_endpoints",value:function(){return this.collect_endpoints}},{key:"set_send_event_callback",value:function(e){this.send_event_callback=e}},{key:"dispatcher",value:function(e){var t=this;return function(n){if(t._cookie.set_last_recorded_timestamp_cookie(),t._cookie.check_session_length(),!e.isTrackingEnabled())return!1;t.collect_endpoints.forEach(function(r){var a=new i["default"](e._window,t._client,[n],null,t._cookie.get_session_start_time(),t._tracking.get_user_id()),l=r.filter_events(a.events);if(0===l.length)return"";if(a.events=l,a=r.apply_payload_func(a),e._window||r._queue_handler.add_to_queue(a.events),e._window&&e._window.XMLHttpRequest){var u=r._queue_handler.read_from_queue();return u&&u.length>0&&u.map(function(e){a.events.push(e)}),a.set_sitekey(r.sitekey),(0,o["default"])(r.url,r.options,a,r._queue_handler,t.send_event_callback),a}})}}}]),e}();t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=n(0);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t,n,o,r,a){var l=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.peach_schema_version="1.0.3",this.peach_implementation_version=null,this.site_key=r,this.session_start_timestamp=a||Date.now(),this.sent_timestamp=Date.now(),this.user_id=l||null,this.events=o,this.client=n,this.peach_framework_version=i.version}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"set_sitekey",value:function(e){this.site_key=e}}]),e}();t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n,o,r){var a=function _(e){var t,n,o;for(o in t=Array.isArray(e)?[]:{},e)n=e[o],t[o]="object"===i(n)&&null!==n?_(n):n;return t},l=function h(e,t){var n={};return Object.keys(e).forEach(function(o){Array.isArray(e[o])&&t?n[o]=e[o].filter(function(e){return e}):e[o]&&"object"===i(e[o])?n[o]=h(e[o],t):e[o]&&"function"==typeof e[o]||null!==e[o]&&(n[o]=e[o])}),n},u=l(n);u.events=n.events.map(function(e){return l(e,!0)});var s=new XMLHttpRequest;s.addEventListener("load",function(){if(s.status<200||s.status>=300){o.add_to_queue(u.events),r&&r({error:s.status,description:s.statusText},null,u);var e="[PEACH-COLLECTOR][SENDXHR] Send error. ".concat(s.status," - ").concat(s.statusText);return console.error(e),!1}return r&&r(null,this.responseText,u),!0}),s.addEventListener("error",function(e){console.warn("[PEACH-COLLECTOR][SENDXHR] Send error."),o.add_to_queue(u.events),r&&r({error:e},null)});try{if(s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t&&t.max_events_per_request&&u.events.length>t.max_events_per_request)for(var d=a(u),c=a(u.events);c.length;)d.events=c.splice(0,t.max_events_per_request),s.send(JSON.stringify(d));else s.send(JSON.stringify(u))}catch(f){o.add_to_queue(u.events),console.warn("[PEACH-COLLECTOR][SENDXHR] failed to send data due to connection issue. Queueing data for later push")}return!0},e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=function(e){return e&&e.__esModule?e:{"default":e}}(n(16));function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t,n,o,r,a,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=t;var u=Math.floor(1e4*Math.random());this.defaultFilter=["*"],this.defaultOptions={filter:a||this.defaultFilter,max_cache_hours:1,heartbeat_frequency_sec:undefined,lifetime_sec:43200,max_events_stored:1440,max_events_per_request:144},this.options=this.defaultOptions,this.handleLocalstorageConfig(n),this.sitekey=r,this.payload_func=l,this.url=o||"https://pipe-collect.ebu.io/v3/collect?s=".concat(r),this._queue_handler=new i["default"](this._window,this.options,null,"q-"+u)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"getOptions",value:function(){return this.options}},{key:"setOptions",value:function(e){this.options=e}},{key:"testLocalstorage",value:function(){try{return localStorage.setItem("test",JSON.stringify({test:"test"})),localStorage.removeItem("test"),!0}catch(e){return console.error("Localstorage is not available. Please consider allowing it for us!",e),!1}}},{key:"handleLocalstorageConfig",value:function(e){var t=this;if(!e)return this.defaultOptions;if(!e.id)return console.error("No id attribute given in options"),this.defaultOptions;if(this.testLocalstorage())try{var n,i=!1,o=localStorage.getItem(e.id);try{n=JSON.parse(localStorage.getItem(e.id))}catch(r){console.error("Error parsing store value",o),i=!0}i||!n||n===undefined||n.timestamp+1e3*e.max_cache_hours<Date.now()?this.fetchRemoteConfig(e.remoteConfigUrl).then(function(n){var i=Object.assign(t.options,n);i.timestamp=Date.now(),localStorage.setItem(e.id,JSON.stringify(i)),t.setOptions(i)}):this.setOptions(Object.assign(this.options,n))}catch(r){console.error("Something is wrong using your local storage",r)}else console.error("Localstorage not accessible")}},{key:"fetchRemoteConfig",value:function(e){return new Promise(function(t,n){e?fetch(e).then(function(e){return e.json()}).then(function(e){return t(e)})["catch"](function(e){return n(e)}):n("No remote config URL given")})}},{key:"getEventsInQueue",value:function(){return this._queue_handler.read_from_queue()}},{key:"get_collect_url",value:function(){return this.url}},{key:"get_sitekey",value:function(){return this.sitekey}},{key:"get_payload",value:function(e){return"function"==typeof this.payload_func?this.payload_func(e):e}},{key:"apply_payload_func",value:function(e){return this.payload_func&&"function"==typeof this.payload_func?this.payload_func(e):e}},{key:"filter_events",value:function(e){var t=this;if(e){if(this.options.filter){var n=[];return e.forEach(function(e){("*"===t.options.filter[0]||t.options.filter.includes(e.type))&&n.push(e)}),n}return e}return[]}}]),e}();t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=t,this.local_storage_prefix=i||"_pc_",this.queue_name=o||"q",this.options=n,this.events_queue=[]}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"set_queue_name",value:function(e){this.queue_name=e}},{key:"get_queue_name",value:function(){return this.local_storage_prefix+this.queue_name}},{key:"filter_item_age",value:function(e,t){return e.filter(function(e){return e.event_timestamp>Date.now()-1e3*t})}},{key:"add_to_queue",value:function(e){var t=this;if(this.options&&this.options.lifetime_sec&&(e=this.filter_item_age(e,this.options.lifetime_sec)),e.map(function(e){t.events_queue.push(e)}),this.options&&this.options.max_events_stored&&this.events_queue.length>this.options.max_events_stored&&(this.events_queue=this.events_queue.splice(-Math.abs(this.options.max_events_stored))),this.__isLocalStorageSupported()){var n=this.get_queue_name();localStorage.setItem(n,JSON.stringify(this.events_queue))}}},{key:"reset_event_queue",value:function(){this.events_queue=[],this.__isLocalStorageSupported()&&localStorage.removeItem(this.get_queue_name())}},{key:"read_from_queue",value:function(){var e;if(this.__isLocalStorageSupported()){var t=this.get_queue_name();e=localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):[]}else e=this.events_queue;return this.options&&this.options.lifetime_sec&&(e=this.filter_item_age(e,this.options.lifetime_sec)),this.reset_event_queue(),e}},{key:"__isLocalStorageSupported",value:function(){if(!this._window)return!1;var e=this.local_storage_prefix+"internal__test__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}}]),e}();t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){e.setCollectEndpoints=function(n){return t.set_collect_endpoints(n,t),e},e.setSendEventCallback=function(n){return t.set_send_event_callback(n),e},e._getCollectEndpoints=function(){return t.get_collect_endpoints()},e._getEventsInQueue=function(){var e=[];return t.collect_endpoints.forEach(function(t){t._queue_handler.read_from_queue().forEach(function(t){e.push(t)})}),e}},e.exports=t["default"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n,i){e.setInactivityInterval=function(t){return n.set_inactivity_interval(t),e},e.setCookiePrefix=function(t){return n.set_cookie_prefix(t),e},e.setCookieDomain=function(t){return n.set_cookie_domain(t),e},e.setSessionStartTimeCookie=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return n.set_session_start_time_cookie(t),e},e.setPersistantCookieId=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return n.set_persistant_cookie_id(t,i),e}},e.exports=t["default"]}])});
</script>

</body>
</html>
