<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>urgency.min.html</title>
</head>
<body>

<script>
!function(e){function t(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};t.m=e,t.c=i,t.d=function(exports,e,i){t.o(exports,e)||Object.defineProperty(exports,e,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=t(1),r=t(2),s=t(3);t(4);var n=function(){function e(t,r,s){this.index=0,this.configAttributes=r,this.configAttributes.time=Math.max(e.MIN_TIME,this.configAttributes.time),this.pageTrackingApiEndpoint=s,this.messages=this.mapMessagesToUrgencyMessages(),this._apiService=new i.ApiService,this.$element=t,this.$messagesContainer=$(this.configAttributes.container)}return e.create=function(t,i,r){return t&&t.length?i&&e.isConfigAttributesValid(i)?r?new e(t,i,r):(console.warn("Missing configuration for the Page Tracking API endpoint"),null):(console.warn("Missing configuration attributes"),null):(console.warn("Target element was not found"),null)},e.prototype.init=function(){this.setUpHtml(),this.messages.some(function(t){return e.VARIABLE_REGEX.test(t.text)})?this.callApiAndScheduleMessages():this.scheduleMessages(this.messages)},e.prototype.mapMessagesToUrgencyMessages=function(){var e=this.configAttributes.messages instanceof Array?this.configAttributes.messages:this.configAttributes.messages.split("|"),t=[];return e.forEach(function(e){var i=e.split(":"),r=i[0],s=i[1];s&&r&&t.push({type:r,text:s.trim()})}),t},e.prototype.callApiAndScheduleMessages=function(){var e=this;this._apiService.getDataFromApi(this.pageTrackingApiEndpoint,{pageUrl:this.configAttributes.pageUrl,pageTitle:this.configAttributes.pageTitle,dataType:this.configAttributes.dataType,timePeriod:this.configAttributes.timePeriod}).then(function(t){var i=e.buildDynamicMessages(e.messages,t);e.scheduleMessages(i)})},e.prototype.buildDynamicMessages=function(t,i){if(!t)return[];for(var r=[],n=0;n<t.length;n++){var o=t[n],a=o.text.match(e.VARIABLE_REGEX);if(a){var u=a[1],c=i[u];u&&!isNaN(c)&&s.default.applyRule(u,c)&&r.push({type:o.type,text:o.text.replace(a[0],e.formatNumber(c.toString()))})}else r.push(o)}return r},e.prototype.destroy=function(){clearTimeout(this.timer),this.$messagesContainer.remove()},e.formatNumber=function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.prototype.setUpHtml=function(){$("#js-header").length>0?$("#js-header").after(this.$messagesContainer):this.$messagesContainer.prependTo(this.$element),this.$messagesContainer.on("click",".mwm-mini-wave__close",this.hideBubble),this.$element.css("position","relative").css("overflow","hidden"),this.timer=null},e.prototype.hideBubble=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,$(this).closest(".mwm-mini-wave").addClass("mwm-mini-wave--hide")},e.prototype.scheduleMessages=function(e){var t=this;this.configAttributes.random&&this.shuffleArray(e);var i=this.configAttributes.double?this.configAttributes.time/1.5:this.configAttributes.time;setTimeout(function(){t.timer=window.setInterval(function(){return t.displayMessage(e)},i)},this.configAttributes.delay)},e.prototype.displayMessage=function(e){if(document.hasFocus()){if(this.index===e.length)return this.configAttributes.loop?void(this.index=0):clearInterval(this.timer);this.renderMessage(e[this.index],this.index),this.index++}},e.prototype.renderMessage=function(t,i){var s=this.$messagesContainer.find(">*:eq("+i+")"),n=r.default[t.type].color||"blue",o=r.default[t.type].icon||"white-star";if(s.length>0)s.removeClass("mwm-mini-wave--hide");else{var a=$('\n                <div\n                    class="\n                    mwm-mini-wave mwm-mini-wave--reveal\n                    mwm-mini-wave--'+n+"\n                    mwm-mini-wave--"+o+"\n                    "+(this.configAttributes.mobile?"mwm-mini-wave--mobile":"mwm-mini-wave--left")+'"\n                    style="\n                    font-size: '+this.configAttributes.size+"px;\n                    top: "+(this.configAttributes.mobile?0:this.configAttributes.positionTop+"px")+";\n                    left: "+(this.configAttributes.mobile?0:this.configAttributes.positionRight?"auto":this.configAttributes.positionLeft+"px")+";\n                    right: "+(this.configAttributes.mobile?0:this.configAttributes.positionRight?this.configAttributes.positionRight+"px":"auto")+';">\n                    <figure class="mwm-mini-wave__icon">\n                    <img src="/'+e.IMAGE_PATH+"/"+o+'.gif" alt="" role="presentation">\n                    </figure>\n                    <p class="mwm-mini-wave__copy" role="alert" aria-live="assertive">'+t.text+'</p>\n                    <a href="javascript:;" tabindex="0" class="mwm-mini-wave__close" aria-label="Close message"></a>\n                </div>\n            ');s=a.appendTo(this.$messagesContainer)}setTimeout(function(){s.addClass("mwm-mini-wave--hide")},this.configAttributes.time)},e.prototype.shuffleArray=function(e){var t=0,i=0,r=null;for(t=e.length-1;t>0;t-=1)i=Math.floor(Math.random()*(t+1)),r=e[t],e[t]=e[i],e[i]=r},e.isConfigAttributesValid=function(e){return!!e.container&&!!e.pageTitle&&!!e.pageUrl&&!!e.messages&&e.messages.length>0},e.VARIABLE_REGEX=/%%(.*?)%%/,e.IMAGE_PATH="~/media/Images/hp-merch/2017/urgency-icon",e.MIN_TIME=5e3,e}();exports.Urgency=n;var o=function(e,t){var i=window.Urgency.pageTrackingApiEndpoint,r=n.create(e,t,i);return r?(r.init(),r):(console.warn("Urgency could not be created"),null)};window.Urgency=o},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.getDataFromApi=function(e,t){var i=this,r=jQuery.Deferred();return jQuery.ajax({url:e+this.getApiUrl(t.dataType),type:"post",data:{Url:t.pageUrl,TimePeriod:t.timePeriod},dataType:"json"}).done(function(e){if(!e)return r.reject("No response object from API");var t=i.mapToConfigRule(e);return r.resolve(t)}).fail(function(e){r.reject(e)}),r.promise()},e.prototype.getApiUrl=function(t){return t?e.API_URLS[t.toLowerCase()]||e.API_URLS.views:e.API_URLS.views},e.prototype.mapToConfigRule=function(e){return{percentageHour:this.getHourPercentage(e.previousHour,e.current,e.hour),percentageToday:this.getTodayPercentage(e.today,e.total),viewsCurrent:e.current,viewsHour:e.hour,viewsToday:e.today,viewsTotal:e.total,viewsYesterday:e.yesterday,viewsLast24Hours:e.last24Hours,viewsLast7Days:e.last7Days,viewsRegionCurrent:e.regionCurrent,viewsRegionHour:e.regionHour,viewsRegionPreviousHour:e.regionPreviousHour,viewsRegionToday:e.regionToday,viewsRegionYesterday:e.regionYesterday,viewsRegionLast24Hours:e.regionLast24Hours,viewsRegionLast7Days:e.regionLast7Days,viewsAreaCurrent:e.areaCurrent,viewsAreaHour:e.areaHour,viewsAreaPreviousHour:e.areaPreviousHour,viewsAreaToday:e.areaToday,viewsAreaYesterday:e.areaYesterday,viewsAreaLast24Hours:e.areaLast24Hours,viewsAreaLast7Days:e.areaLast7Days,viewsCityCurrent:e.cityCurrent,viewsCityHour:e.cityHour,viewsCityPreviousHour:e.cityPreviousHour,viewsCityToday:e.cityToday,viewsCityYesterday:e.cityYesterday,viewsCityLast24Hours:e.cityLast24Hours,viewsCityLast7Days:e.cityLast7Days}},e.prototype.getHourPercentage=function(e,t,i){var r=0;return e<t&&(r=100*i/e),r>20?Math.round(r):null},e.prototype.getTodayPercentage=function(e,t){var i=0;return i=100*e/t,i>20?Math.round(i):null},e.API_URLS={views:"/api/tracking/page-views",clicks:"/api/tracking/page-counts"},e}();exports.ApiService=i},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(){}return e.WhiteStar={color:"white",icon:"red-star"},e.WhiteClock={color:"white",icon:"red-clock"},e.WhiteEye={color:"white",icon:"red-eye"},e.WhiteChart={color:"white",icon:"red-chart"},e.RedStar={color:"red",icon:"white-star"},e.RedClock={color:"red",icon:"white-clock"},e.RedEye={color:"red",icon:"white-eye"},e.RedChart={color:"red",icon:"white-chart"},e.BlueStar={color:"blue",icon:"white-star"},e.BlueClock={color:"blue",icon:"white-clock"},e.BlueEye={color:"blue",icon:"white-eye"},e.BlueChart={color:"blue",icon:"white-chart"},e}();exports.default=i},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=function(e){return function(t){return t>e}},r=function(){function e(){}return e.applyRule=function(t,i){if(!t||!i)return!1;var r=e.rules[t];return!!r&&r(i)},e.rules={viewsTotal:i(50),viewsCurrent:i(99),viewsHour:i(50),viewsToday:i(50),viewsYesterday:i(50),viewsLast24Hours:i(50),viewsLast7Days:i(50),percentageHour:i(20),percentageToday:i(20),viewsRegionCurrent:i(50),viewsRegionHour:i(50),viewsRegionPreviousHour:i(50),viewsRegionToday:i(50),viewsRegionYesterday:i(50),viewsRegionLast24Hours:i(50),viewsRegionLast7Days:i(50),viewsAreaCurrent:i(50),viewsAreaHour:i(50),viewsAreaPreviousHour:i(50),viewsAreaToday:i(50),viewsAreaYesterday:i(50),viewsAreaLast24Hours:i(50),viewsAreaLast7Days:i(50),viewsCityCurrent:i(50),viewsCityHour:i(50),viewsCityPreviousHour:i(50),viewsCityToday:i(50),viewsCityYesterday:i(50),viewsCityLast24Hours:i(50),viewsCityLast7Days:i(50)},e}();exports.default=r},function(e,exports){}]);
</script>

</body>
</html>
