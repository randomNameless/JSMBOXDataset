<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AuthenticationForm.wvZkt93d.html</title>
</head>
<body>

<script>
import{j as e}from"./jsx-runtime.CAnB4H9Z.js";import{r as s}from"./index.qVDZzPEr.js";import{G}from"./GitHubIcon.C1vN1sbQ.js";import"./js.cookie.Cz0CWeBA.js";import{s as j,i as _,f as F}from"./jwt.sIZnHaRF.js";import{b as I,h as U}from"./http.CB1FD-eS.js";import{S as E}from"./Spinner.xsriOokz.js";import{t as C,b as T,g as $,d as A}from"./browser.CnMWMMYq.js";import{G as H}from"./GoogleIcon.DTJ6GDR6.js";const y="githubRedirectAt",v="githubLastPage";function V(g){const{isDisabled:u,setIsDisabled:t}=g,[r,a]=s.useState(!1),[f,l]=s.useState("");s.useEffect(()=>{const o=new URLSearchParams(window.location.search),c=o.get("code"),d=o.get("state"),b=o.get("provider");!c||!d||b!=="github"||(a(!0),t?.(!0),I(`https://roadmap.sh/api/v1-github-callback${window.location.search}`).then(({response:m,error:p})=>{if(!m?.token){const S=p?.message||"Something went wrong.";l(S),a(!1),t?.(!1);return}C();let n="/";const i=localStorage.getItem(y),h=localStorage.getItem(v);if(i&&h){const S=parseInt(i,10);Date.now()-S<30*1e3&&(n=h)}const w=localStorage.getItem("authRedirect");w&&(localStorage.removeItem("authRedirect"),n=w),localStorage.removeItem(y),localStorage.removeItem(v),j(m.token),window.location.href=n}).catch(m=>{l("Something went wrong. Please try again later."),a(!1),t?.(!1)}))},[]);const x=async()=>{a(!0),t?.(!0);const{response:o,error:c}=await I("https://roadmap.sh/api/v1-github-login");if(c||!o?.loginUrl){l(c?.message||"Something went wrong. Please try again later."),a(!1),t?.(!1);return}if(!["/login","/signup"].includes(window.location.pathname)){const d=["/respond-invite","/befriend","/r","/ai"].includes(window.location.pathname)?window.location.pathname+window.location.search:window.location.pathname;localStorage.setItem(y,Date.now().toString()),localStorage.setItem(v,d)}window.location.href=o.loginUrl};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"inline-flex h-10 w-full items-center justify-center gap-2 rounded border border-slate-300 bg-white p-2 text-sm font-medium text-black outline-none focus:ring-2 focus:ring-[#333] focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",disabled:r||u,onClick:x,children:[r?e.jsx(E,{className:"h-[18px] w-[18px]",isDualRing:!1}):e.jsx(G,{className:"h-[18px] w-[18px]"}),"Continue with GitHub"]}),f&&e.jsx("p",{className:"mb-2 mt-1 text-sm font-medium text-red-600",children:f})]})}const k="googleRedirectAt",R="googleLastPage";function B(g){const{isDisabled:u,setIsDisabled:t}=g,[r,a]=s.useState(!1),[f,l]=s.useState("");s.useEffect(()=>{const o=new URLSearchParams(window.location.search),c=o.get("code"),d=o.get("state"),b=o.get("provider");!c||!d||b!=="google"||(a(!0),t?.(!0),I(`https://roadmap.sh/api/v1-google-callback${window.location.search}`).then(({response:m,error:p})=>{if(T(),!m?.token){l(p?.message||"Something went wrong."),a(!1),t?.(!1);return}C();let n="/";const i=localStorage.getItem(k),h=localStorage.getItem(R);if(i&&h){const S=parseInt(i,10);Date.now()-S<30*1e3&&(n=h)}const w=localStorage.getItem("authRedirect");w&&(localStorage.removeItem("authRedirect"),n=w),localStorage.removeItem(k),localStorage.removeItem(R),j(m.token),window.location.href=n}).catch(m=>{l("Something went wrong. Please try again later."),a(!1),t?.(!1)}))},[]);const x=()=>{a(!0),t?.(!0),I("https://roadmap.sh/api/v1-google-login").then(({response:o,error:c})=>{if(!o?.loginUrl){l(c?.message||"Something went wrong."),a(!1),t?.(!1);return}if(!["/login","/signup"].includes(window.location.pathname)){const d=["/respond-invite","/befriend","/r","/ai"].includes(window.location.pathname)?window.location.pathname+window.location.search:window.location.pathname;localStorage.setItem(k,Date.now().toString()),localStorage.setItem(R,d)}window.location.href=o.loginUrl}).catch(o=>{l("Something went wrong. Please try again later."),a(!1),t?.(!1)})};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"inline-flex h-10 w-full items-center justify-center gap-2 rounded border border-slate-300 bg-white p-2 text-sm font-medium text-black outline-none focus:ring-2 focus:ring-[#333] focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",disabled:r||u,onClick:x,children:[r?e.jsx(E,{className:"h-[18px] w-[18px]",isDualRing:!1}):e.jsx(H,{className:"h-[18px] w-[18px]"}),"Continue with Google"]}),f&&e.jsx("p",{className:"mb-2 mt-1 text-sm font-medium text-red-600",children:f})]})}function q(g){const{className:u}=g;return e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:u,children:[e.jsx("g",{clipPath:"url(#clip0_2344_20)",children:e.jsx("path",{d:"M0 0V24H24V0H0ZM8 19H5V8H8V19ZM6.5 6.732C5.534 6.732 4.75 5.942 4.75 4.968C4.75 3.994 5.534 3.204 6.5 3.204C7.466 3.204 8.25 3.994 8.25 4.968C8.25 5.942 7.467 6.732 6.5 6.732ZM20 19H17V13.396C17 10.028 13 10.283 13 13.396V19H10V8H13V9.765C14.397 7.179 20 6.988 20 12.241V19Z",fill:"currentColor"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_2344_20",children:e.jsx("rect",{width:"24",height:"24",rx:"2",fill:"white"})})})]})}const N="linkedInRedirectAt",P="linkedInLastPage";function M(g){const{isDisabled:u,setIsDisabled:t}=g,[r,a]=s.useState(!1),[f,l]=s.useState("");s.useEffect(()=>{const o=new URLSearchParams(window.location.search),c=o.get("code"),d=o.get("state"),b=o.get("provider");!c||!d||b!=="linkedin"||(a(!0),t?.(!0),I(`https://roadmap.sh/api/v1-linkedin-callback${window.location.search}`).then(({response:m,error:p})=>{if(!m?.token){l(p?.message||"Something went wrong."),a(!1),t?.(!1);return}C();let n="/";const i=localStorage.getItem(N),h=localStorage.getItem(P);if(i&&h){const S=parseInt(i,10);Date.now()-S<30*1e3&&(n=h)}const w=localStorage.getItem("authRedirect");w&&(localStorage.removeItem("authRedirect"),n=w),localStorage.removeItem(N),localStorage.removeItem(P),j(m.token),window.location.href=n}).catch(m=>{l("Something went wrong. Please try again later."),a(!1),t?.(!1)}))},[]);const x=()=>{a(!0),t?.(!0),I("https://roadmap.sh/api/v1-linkedin-login").then(({response:o,error:c})=>{if(!o?.loginUrl){l(c?.message||"Something went wrong."),a(!1),t?.(!1);return}if(!["/login","/signup"].includes(window.location.pathname)){const d=["/respond-invite","/befriend","/r","/ai"].includes(window.location.pathname)?window.location.pathname+window.location.search:window.location.pathname;localStorage.setItem(N,Date.now().toString()),localStorage.setItem(P,d)}window.location.href=o.loginUrl}).catch(o=>{l("Something went wrong. Please try again later."),a(!1),t?.(!1)})};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"inline-flex h-10 w-full items-center justify-center gap-2 rounded border border-slate-300 bg-white p-2 text-sm font-medium text-black outline-none focus:ring-2 focus:ring-[#333] focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",disabled:r||u,onClick:x,children:[r?e.jsx(E,{className:"h-[18px] w-[18px]",isDualRing:!1}):e.jsx(q,{className:"h-[18px] w-[18px]"}),"Continue with LinkedIn"]}),f&&e.jsx("p",{className:"mb-2 mt-1 text-sm font-medium text-red-600",children:f})]})}function O(g){const{isDisabled:u,setIsDisabled:t}=g,[r,a]=s.useState(""),[f,l]=s.useState(""),[x,o]=s.useState(""),[c,d]=s.useState(!1),b=async n=>{n.preventDefault(),d(!0),t?.(!0),o("");const{response:i,error:h}=await U("https://roadmap.sh/api/v1-login",{email:r,password:f});if(i?.token){j(i.token),window.location.reload();return}if(h.type==="user_not_verified"){window.location.href=`/verification-pending?email=${encodeURIComponent(r)}`;return}d(!1),t?.(!1),o(h?.message||"Something went wrong. Please try again later.")},m=`form:${s.useId()}`,p=`form:${s.useId()}`;return e.jsxs("form",{className:"w-full",onSubmit:b,children:[e.jsx("label",{htmlFor:m,className:"sr-only",children:"Email address"}),e.jsx("input",{id:m,name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Email Address",value:r,onInput:n=>a(String(n.target.value))}),e.jsx("label",{htmlFor:p,className:"sr-only",children:"Password"}),e.jsx("input",{id:p,name:"password",type:"password",autoComplete:"current-password",required:!0,className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Password",value:f,onInput:n=>l(String(n.target.value))}),e.jsx("p",{className:"mb-3 mt-2 text-sm text-gray-500",children:e.jsx("a",{href:"/forgot-password",className:"text-blue-800 hover:text-blue-600",children:"Reset your password?"})}),x&&e.jsx("p",{className:"mb-2 rounded-md bg-red-100 p-2 text-red-800",children:x}),e.jsx("button",{type:"submit",disabled:c||u,className:"inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-none focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:c?"Please wait...":"Continue"})]})}function Z(g){const{isDisabled:u,setIsDisabled:t}=g,{rc:r}=$(),[a,f]=s.useState(""),[l,x]=s.useState(""),[o,c]=s.useState(""),[d,b]=s.useState(""),[m,p]=s.useState(!1),n=async i=>{i.preventDefault(),p(!0),t?.(!0),b("");const{response:h,error:w}=await U("https://roadmap.sh/api/v1-register",{email:a,password:l,name:o});if(w||h?.status!=="ok"){p(!1),t?.(!1),b(w?.message||"Something went wrong. Please try again later.");return}window.location.href=`/verification-pending?email=${encodeURIComponent(a)}`};return s.useEffect(()=>{if(!r||_()){A("rc");return}F(r),A("rc")},[]),e.jsxs("form",{className:"flex w-full flex-col gap-2",onSubmit:n,children:[e.jsx("label",{htmlFor:"name",className:"sr-only",children:"Name"}),e.jsx("input",{name:"name",type:"text",autoComplete:"name",min:3,max:50,required:!0,className:"block w-full rounded-lg border border-gray-300 px-3 py-2 outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Full Name",value:o,onInput:i=>c(String(i.target.value))}),e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx("input",{name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full rounded-lg border border-gray-300 px-3 py-2 outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Email Address",value:a,onInput:i=>f(String(i.target.value))}),e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{name:"password",type:"password",autoComplete:"current-password",min:6,max:50,required:!0,className:"block w-full rounded-lg border border-gray-300 px-3 py-2 outline-none placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Password",value:l,onInput:i=>x(String(i.target.value))}),d&&e.jsxs("p",{className:"rounded-lg bg-red-100 p-2 text-red-700",children:[d,"."]}),e.jsx("button",{type:"submit",disabled:m||u,className:"inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-none focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:m?"Please wait...":"Continue to Verify Email"})]})}function oe(g){const{type:u="login"}=g,[t,r]=s.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex w-full flex-col gap-2",children:[e.jsx(V,{isDisabled:t,setIsDisabled:r}),e.jsx(B,{isDisabled:t,setIsDisabled:r}),e.jsx(M,{isDisabled:t,setIsDisabled:r})]}),e.jsxs("div",{className:"flex w-full items-center gap-2 py-6 text-sm text-slate-600",children:[e.jsx("div",{className:"h-px w-full bg-slate-200"}),"OR",e.jsx("div",{className:"h-px w-full bg-slate-200"})]}),u==="login"?e.jsx(O,{isDisabled:t,setIsDisabled:r}):e.jsx(Z,{isDisabled:t,setIsDisabled:r})]})}export{oe as AuthenticationForm};

</script>

</body>
</html>
