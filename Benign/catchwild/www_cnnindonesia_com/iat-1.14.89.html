<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iat-1.14.89.html</title>
</head>
<body>

<script>
!function n(o,r,s){function a(t,e){if(!r[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(d)return d(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}i=r[t]={exports:{}},o[t][0].call(i.exports,function(e){return a(o[t][1][e]||e)},i,i.exports,n,o,r,s)}return r[t].exports}for(var d="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(N,i,n){!function(F,G){!function(){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var e,t;e=this,t=function(){function d(e){return"function"==typeof e}var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,t=void 0,o=void 0,s=function(e,t){u[n]=e,u[n+1]=t,2===(n+=2)&&(o?o(p):B())};var e="undefined"!=typeof window?window:void 0,r=e||{},r=r.MutationObserver||r.WebKitMutationObserver,a="undefined"==typeof self&&void 0!==F&&"[object process]"==={}.toString.call(F),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var e=setTimeout;return function(){return e(p,1)}}var u=new Array(1e3);function p(){for(var e=0;e<n;e+=2)(0,u[e])(u[e+1]),u[e]=void 0,u[e+1]=void 0;n=0}function g(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(p)}:l()}catch(e){return l()}}var m,h,f,B=void 0;function y(e,t){var i,n=this,o=new this.constructor(I),r=(void 0===o[w]&&k(o),n._state);return r?(i=arguments[r-1],s(function(){return _(r,o,i,n._result)})):A(n,o,e,t),o}function v(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(T(t=new this(I),e),t)}var B=a?function(){return F.nextTick(p)}:r?(h=0,a=new r(p),f=document.createTextNode(""),a.observe(f,{characterData:!0}),function(){f.data=h=++h%2}):c?((m=new MessageChannel).port1.onmessage=p,function(){return m.port2.postMessage(0)}):(void 0===e&&"function"==typeof N?g:l)(),w=Math.random().toString(36).substring(2);function I(){}var b=void 0,M=1,S=2;function q(e,n,o){s(function(t){var i=!1,e=((e,t,i,n)=>{try{e.call(t,i,n)}catch(e){return e}})(o,n,function(e){i||(i=!0,(n!==e?T:P)(t,e))},function(e){i||(i=!0,U(t,e))},t._label);!i&&e&&(i=!0,U(t,e))},e)}function C(e,t,i){var n,o;t.constructor===e.constructor&&i===y&&t.constructor.resolve===v?(n=e,(o=t)._state===M?P(n,o._result):o._state===S?U(n,o._result):A(o,void 0,function(e){return T(n,e)},function(e){return U(n,e)})):void 0!==i&&d(i)?q(e,t,i):P(e,t)}function T(t,e){if(t===e)U(t,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof e,null===e||"object"!=i&&"function"!=i)P(t,e);else{i=void 0;try{i=e.then}catch(e){return void U(t,e)}C(t,e,i)}var i}function L(e){e._onerror&&e._onerror(e._result),E(e)}function P(e,t){e._state===b&&(e._result=t,e._state=M,0!==e._subscribers.length)&&s(E,e)}function U(e,t){e._state===b&&(e._state=S,e._result=t,s(L,e))}function A(e,t,i,n){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+M]=i,o[r+S]=n,0===r&&e._state&&s(E,e)}function E(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n,o=void 0,r=e._result,s=0;s<t.length;s+=3)n=t[s],o=t[s+i],n?_(i,n,o,r):o(r);e._subscribers.length=0}}function _(e,t,i,n){var o=d(i),r=void 0,s=void 0,a=!0;if(o){try{r=i(n)}catch(e){a=!1,s=e}if(t===r)return void U(t,new TypeError("A promises callback cannot return that same promise."))}else r=n;t._state===b&&(o&&a?T(t,r):!1===a?U(t,s):e===M?P(t,r):e===S&&U(t,r))}var x=0;function k(e){e[w]=x++,e._state=void 0,e._result=void 0,e._subscribers=[]}R.prototype._enumerate=function(e){for(var t=0;this._state===b&&t<e.length;t++)this._eachEntry(e[t],t)},R.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===v){var o,r=void 0,s=void 0,a=!1;try{r=t.then}catch(e){a=!0,s=e}r===y&&t._state!==b?this._settledAt(t._state,e,t._result):"function"!=typeof r?(this._remaining--,this._result[e]=t):i===O?(o=new i(I),a?U(o,s):C(o,t,r),this._willSettleAt(o,e)):this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},R.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===b&&(this._remaining--,e===S?U(n,i):this._result[t]=i),0===this._remaining&&P(n,this._result)},R.prototype._willSettleAt=function(e,t){var i=this;A(e,void 0,function(e){return i._settledAt(M,t,e)},function(e){return i._settledAt(S,t,e)})};var z=R;function R(e,t){this._instanceConstructor=e,this.promise=new e(I),this.promise[w]||k(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||P(this.promise,this._result)):U(this.promise,new Error("Array Methods must be provided an Array"))}D.prototype.catch=function(e){return this.then(null,e)},D.prototype.finally=function(t){var i=this.constructor;return d(t)?this.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){throw e})}):this.then(t,t)};var O=D;function D(e){if(this[w]=x++,this._result=this._state=void 0,this._subscribers=[],I!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof D))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this;try{e(function(e){T(t,e)},function(e){U(t,e)})}catch(e){U(t,e)}}}return O.prototype.then=y,O.all=function(e){return new z(this,e).promise},O.race=function(o){var r=this;return i(o)?new r(function(e,t){for(var i=o.length,n=0;n<i;n++)r.resolve(o[n]).then(e,t)}):new r(function(e,t){return t(new TypeError("You must pass an array to race."))})},O.resolve=v,O.reject=function(e){var t=new this(I);return U(t,e),t},O._setScheduler=function(e){o=e},O._setAsap=function(e){s=e},O._asap=s,O.polyfill=function(){var e=void 0;if(void 0!==G)e=G;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=O},O.Promise=O},"object"==typeof n&&void 0!==i?i.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}.call(this)}.call(this,N("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(e,t,i){var n,o,t=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var d,c=[],l=!1,u=-1;function p(){l&&d&&(l=!1,d.length?c=d.concat(c):u=-1,c.length)&&g()}function g(){if(!l){for(var e=a(p),t=(l=!0,c.length);t;){for(d=c,c=[];++u<t;)d&&d[u].run();u=-1,t=c.length}d=null,l=!1,!function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return(o=clearTimeout)(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new m(e,t)),1!==c.length||l||a(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=h,t.addListener=h,t.once=h,t.off=h,t.removeListener=h,t.removeAllListeners=h,t.emit=h,t.prependListener=h,t.prependOnceListener=h,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],3:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var i=e("es6-promise"),n=e("./modules/customPolyfill"),o=e("./common/timers"),r=e("./common/eventManager"),s=e("./common/parameters"),a=e("./modules/browserStateTracker"),d=e("./modules/dynamicPlacements/loader"),c=e("./modules/placementManager"),l=e("./modules/gam/module"),u=e("./modules/mawManager"),p=e("./modules/realtime-messaging/realtimeMessaging"),g=e("./modules/spaManager"),m=e("./modules/passbackManager"),h=e("./modules/demo"),f=e("./common/utilities"),y=e("./modules/third-party-integration");function v(){y.ThirdPartyIntegration.start(),s.initialize(),o.start(),r.start(),u.MawManager.start(),p.RealtimeMessaging.start(),a.start(),d.start(),c.start(),s.getGamIntegration()&&l.start(),new g.SinglePageApplicationManager(r).start(),new m.PassbackManager(c).start(),function e(t){void 0===t&&(t=0);if(window.frames["TG-listener"])return f.BrowserUtils.attachScriptToElement("/iat-extension-1.11.2.js",document.head),void(s.config.extension=!0);t<10&&o.timeout(function(){return e(++t)},1e3)}(),h.DemoModule.run(),r.postStart()}(0,i.polyfill)(),n.CustomPolyfill.init(),window===window.top&&v()},{"./common/eventManager":4,"./common/parameters":5,"./common/timers":6,"./common/utilities":7,"./modules/browserStateTracker":12,"./modules/customPolyfill":15,"./modules/demo":16,"./modules/dynamicPlacements/loader":19,"./modules/gam/module":26,"./modules/mawManager":31,"./modules/passbackManager":32,"./modules/placementManager":33,"./modules/realtime-messaging/realtimeMessaging":36,"./modules/spaManager":38,"./modules/third-party-integration":40,"es6-promise":1}],4:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.EventManagerAPI=void 0,i.listen=l,i.unlisten=u,i.emit=p,i.start=function(){n.extend(n.ApiModule.EventManager,new g),a(3),a(4),a(10),a(7),d(1),d(2),d(5),a(6),a(9),a(23),a(24),r[0]=(()=>{var t,i,n=!1;return function(e){t===e.screenX||i===e.screenY||n||(t=e.screenX,i=e.screenY,n=!0,p(0,e),o.timeout(function(){n=!1},1e3))}})(),window.addEventListener("scroll",r[1],!0),window.addEventListener("touchmove",r[1]),window.addEventListener("resize",r[2]),window.addEventListener("blur",r[3]),window.addEventListener("focus",r[4]),window.addEventListener("visibilitychange",r[10]),window.addEventListener("keypress",r[5]),window.addEventListener("click",r[7])},i.postStart=function(){var t=!1,i=!1;l(8,c),"complete"===document.readyState?p(8,null):o.timeout(function(){i||(t=!0,p(8,null))},1e3);window.addEventListener("load",function(e){t?t=!1:(i=!0,p(8,e))})};var o=e("./timers"),n=e("../modules/api"),r={},s={};function a(t){r[t]=function(e){p(t,e)}}function d(t){var i;r[t]=function(e){o.clear(i),i=o.timeout(function(){p(t,e)},100)}}function c(){window.addEventListener("keydown",r[6]),document.body.addEventListener("mousemove",r[0]),window.addEventListener("pageshow",r[23]),window.addEventListener("beforeunload",r[24]),document.hasFocus&&(document.hasFocus()?r[4](null):r[3](null));for(var e=window.frames,t=0;t<e.length;t++)try{var i=e[t].frameElement;i.contentWindow&&(i.contentWindow.addEventListener("scroll",r[1],!0),i.contentWindow.addEventListener("touchmove",r[1]),i.contentWindow.addEventListener("resize",r[2]),i.contentWindow.addEventListener("blur",r[3]),i.contentWindow.addEventListener("focus",r[4]),i.contentWindow.addEventListener("visibilitychange",r[10]),i.contentWindow.addEventListener("keypress",r[5]),i.contentWindow.addEventListener("click",r[7]),i.contentWindow.addEventListener("mousemove",r[0]),i.contentWindow.addEventListener("touchstart",r[9]))}catch(e){}}function l(e,t){s[e]?s[e].push(t):s[e]=[t]}function u(e,t){s[e]&&-1<(t=s[e].indexOf(t))&&s[e].splice(t,1)}function p(e,t){if(s[e])for(var i=s[e].length;-1<--i;)s[e][i](t)}m.prototype.listen=function(e,t){l(e,t)},m.prototype.unlisten=function(e,t){u(e,t)},m.prototype.emit=function(e,t){p(e,t)};var g=m;function m(){}i.EventManagerAPI=g},{"../modules/api":11,"./timers":6}],5:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.config=void 0,o.initialize=function(){o.config=window.__tgconf,o.config.device=(()=>"Smartphone"===o.config.d_type?i.DeviceType.Mobile:"Tablet"===o.config.d_type?i.DeviceType.Tablet:i.DeviceType.Desktop)(),o.config.version=(()=>{if(!document.currentScript)return"";var e=document.currentScript.getAttribute("src");if(!e)return"";try{var t=e.split("/");return t[t.length-1].replace("iat-","").replace(".js","")}catch(e){return""}})()},o.updateConfiguration=function(e){o.config.ts=e.ts,o.config.sessionId=e.sessionId,o.config.sectionId=e.sectionId,o.config.znl=e.znl,o.config.dads=e.dads,o.config.ivm=e.ivm},o.getBaseUrl=function(e){var t=o.config.rootPath,i=0<t.indexOf("-dev"),n=i?"-dev":"";i&&!e&&(t=t.replace("https://","http://"));return t.replace("services"+n,e?"cdn"+n:"www")},o.getGamIntegration=function(){return o.config.integrations.dfp},o.updateContext=function(e){o.config.iabContentIds=e.contentIds,o.config.iabAudienceIds=e.audienceIds};var i=e("../interfaces/enums")},{"../interfaces/enums":9}],6:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.timeout=function(e,t){return a(e,t,0)},i.interval=function(e,t){return a(e,t,1)},i.clear=function(e){r[e]&&delete r[e]},i.start=function(){window.setInterval(s,o)};var n=e("./utilities"),o=500,r={};function s(){var i=+new Date;(0,n.foreach)(r,function(e){var t=r[e];if(t)switch(t.type){case 0:t.timeElapsed+=i-t.lastTick,t.lastTick=i,t.timeElapsed>t.delay&&(t.callback(),delete r[e]);break;case 1:t.timeElapsed+=i-t.lastTick,t.lastTick=i,t.timeElapsed>t.delay&&(t.callback(),t.timeElapsed-=t.delay)}})}function a(e,t,i){var n=Math.floor(1e8*Math.random());return r[n]={callback:e,delay:t,timeElapsed:0,lastTick:+new Date,type:i},n}},{"./utilities":7}],7:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.CryptoUtils=i.BrowserUtils=i.Cookies=void 0,i.foreach=function(e,t){Object.keys(e).forEach(t)},i.getViewport=a,i.getDocumentHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},i.extendCustomTargeting=function(e,t){for(var i in t)e[i]?e[i]=((e,t)=>{for(var i=t.length-1;-1<i;i--)-1<e.indexOf(t[i])||e.push(t[i]);return e})(e[i],t[i]):e[i]=t[i];return e},i.getElementSize=function(e){if(e.style&&e.style.clip){var t=e.style.clip.replace(/,/g,"").match(d);if(t)return t=t[1].split(" "),new n.Size(o(t[1])-o(t[3]),o(t[2])-o(t[0]))}return new n.Size(e.offsetWidth||o(e.style.width)||0,e.offsetHeight||o(e.style.height)||0)},i.setFrameSize=function(e,t,i){e.setAttribute("width",t+"px"),e.setAttribute("height",i+"px"),c(e,"width",t+"px","important"),c(e,"height",i+"px","important")},i.setCssProperty=c,i.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},i.removeClass=function(e,t){t=new RegExp("(\\s|^)"+t+"(\\s|$)","g");e.className=e.className.replace(t," ").trim()},i.tryParseInt=function(e){try{return parseInt(e)}catch(e){return 0}},i.getSlotSizesForDevice=function(e,t){var i=[360,200],n=r.config.device===s.DeviceType.Mobile,o=((e=e.filter(function(e){return!(e[0]===t[0]&&e[1]===t[1])&&(n&&e[0]<=i[0]||!n&&(e[0]>i[0]||e[1]>i[1]))})).unshift(t),a().width);return e=e.filter(function(e){return e[0]<=o})};var r=e("../common/parameters"),n=e("../interfaces/configuration"),s=e("../interfaces/enums");function a(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,top:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0}}function o(e){return!e||""===(e=e.replace(/px/,""))||"auto"===e?0:parseInt(e)}var d=new RegExp("rect\\(((?:[0-9]*px\\s?)*)\\)");function c(e,t,i,n){e.style.setProperty(t,i,n)}function l(e,t,i){var n=new Date,n=(n.setTime(n.getTime()+1e3*i),"; expires="+n.toUTCString()+"; max-age="+i),i="; domain=."+r.config.domain;document.cookie=e+"="+t+n+i+"; path=/; samesite=lax"}function u(){}function p(){}i.Cookies={IdleCookieName:"___iat_idl",AdhesionDismissedCookieName:"___iat_adhd",RealtimeMultiplierCookieName:"___iat_rtmt",createCookie:function(e,t,i){r.config.cookies&&l(e,t,i)},eraseCookie:function(e){l(e,"",-1)},readCookie:function(e){e+="=";for(var t=document.cookie.split(";"),i=t.length;-1<--i;){var n=t[i].trim();if(0===n.indexOf(e))return n.substring(e.length,n.length)}return""}},u.getTopMostPageUrl=function(){return window.top.location.href},u.getScriptElement=function(e,t,i){var n=document.createElement("script");return n.async=!0,n.src=e,t&&n.setAttribute("width",t.toString()),i&&n.setAttribute("height",i.toString()),n},u.attachScriptToElement=function(e,t,i){void 0===i&&(i=!0);e=u.getScriptElement(r.getBaseUrl(!0)+e+(i?"?ts="+ +new Date:""));t.appendChild(e)},u.generateBeacon=function(e){var t=document.createElement("img");t.setAttribute("style","width:0;height:0;display:none;"),t.setAttribute("src",e),document.body.appendChild(t)},u.buildRequestByUrl=function(i,n){var o=document.createElement("iframe"),r=(o.setAttribute("style","border-width:0px"),o.style.display="none",o.style.margin="0 auto",o.src="about:blank",document.body),s=(r.appendChild(o),window.setInterval(function(){try{var e,t=o.contentDocument||(o.contentWindow?o.contentWindow.document:null);t&&"complete"===t.readyState&&((e=u.getScriptElement(i)).onload=function(){n&&n(o.contentWindow),window.setTimeout(function(){return r.removeChild(o)},100)},t.body.appendChild(e))}catch(e){}finally{window.clearInterval(s)}},250))},i.BrowserUtils=u,p.generateImpressionId=function(){return this.generate(43).toLowerCase()},p.generateIatFrameId=function(){return this.generate(4)},p.generate=function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},i.CryptoUtils=p},{"../common/parameters":5,"../interfaces/configuration":8,"../interfaces/enums":9}],8:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.Size=void 0,i.Size=function(e,t){var i=this;this.isBlank=function(){return 0===i.width&&0===i.height},this.isTooSmall=function(){return i.width<10||i.height<10},this.toString=function(){return i.width+"x"+i.height},this.width=e,this.height=t}},{}],9:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.SideBannerPosition=i.AdUnitType=i.BrowserState=i.EventType=i.TimerType=i.DeviceType=void 0,i.DeviceType={Desktop:0,0:"Desktop",Tablet:1,1:"Tablet",Mobile:2,2:"Mobile"},i.TimerType={Timeout:0,0:"Timeout",Interval:1,1:"Interval"},i.EventType={MouseMove:0,0:"MouseMove",Scroll:1,1:"Scroll",Resize:2,2:"Resize",Blur:3,3:"Blur",Focus:4,4:"Focus",KeyPress:5,5:"KeyPress",KeyDown:6,6:"KeyDown",Click:7,7:"Click",PageLoad:8,8:"PageLoad",TouchStart:9,9:"TouchStart",VisibilityChange:10,10:"VisibilityChange",MessagingConnected:11,11:"MessagingConnected",MessagingDisconnected:12,12:"MessagingDisconnected",NewImpression:13,13:"NewImpression",MapCap:14,14:"MapCap",DemoRedSquare:15,15:"DemoRedSquare",DemoReplaceAllAds:16,16:"DemoReplaceAllAds",StateChanged:17,17:"StateChanged",AdUnitCreated:18,18:"AdUnitCreated",AdUnitRemoved:19,19:"AdUnitRemoved",AdUnitViewState:20,20:"AdUnitViewState",BannerChanged:21,21:"BannerChanged",PublisherBlank:22,22:"PublisherBlank",PageShow:23,23:"PageShow",BeforeUnload:24,24:"BeforeUnload"},i.BrowserState={Unknown:-1,"-1":"Unknown",Inactive:0,0:"Inactive",Active:1,1:"Active",Idle:2,2:"Idle"},i.AdUnitType={normal:0,0:"normal",sticky:1,1:"sticky",bottom:2,2:"bottom",side:3,3:"side",verification:4,4:"verification",appOpen:5,5:"appOpen"},i.SideBannerPosition={None:0,0:"None",Top:1,1:"Top",Fixed:2,2:"Fixed",Bottom:3,3:"Bottom"}},{}],10:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.AnalyticsManager=void 0;var a,d=e("../common/parameters"),e=((e=a=a||{})[e.Impression=0]="Impression",e[e.Viewable=1]="Viewable",e[e.Rotation=2]="Rotation",n.getInstance=function(){return this.instance||(this.instance=new n),this.instance},n.getPotentials=function(e,t){void 0===t&&(t=0);var i=this.getInstance(),n=e.getUniqueId(),o=i.getAnalyticsData(n),r=i.getBasePotential(n,o,t),s=[];return d.config.dads||e.isTrackingUnit||0===t||!o.isDone(a.Viewable)||s.push.apply(s,i.getPotentialRules(n,o,t)),[r,s]},n.isViewableDone=function(e){var t=this.getInstance(),e=e.getUniqueId();return t.getAnalyticsData(e).isDone(a.Viewable)},n.registerRules=function(e){var t,i=e.gamMapping;!d.config.dads&&i&&i.analytics&&i.analytics.length&&(t=this.getInstance(),e=e.getUniqueId(),i=i.analytics,t.addOrUpdateRules(e,i))},n.prototype.getAnalyticsData=function(e){return this.baseAnalyticsMap[e]||new o},n.prototype.getBasePotential=function(e,t,i){return t.isDone(a.Impression)?(t.totalTimeInView+=i,t.isDone(a.Viewable)?!d.config.dads&&Math.floor(t.totalTimeInView/n.PotentialRotationDuration)>t.currentPotentialRotation?(t.currentPotentialRotation++,this.markPotentialAsDone(e,t,a.Rotation)):-1:1e3<=t.totalTimeInView?this.markPotentialAsDone(e,t,a.Viewable):-1):this.markPotentialAsDone(e,t,a.Impression)},n.prototype.markPotentialAsDone=function(e,t,i){return t.markAsDone(i),this.baseAnalyticsMap[e]=t,i},n.prototype.getPotentialRules=function(e,t,i){e=this.ruleAnalyticsMap[e];return e?e.filter(function(e){return e.shouldEmit(i)}).map(function(e){return e.ruleId}):[]},n.prototype.addOrUpdateRules=function(t,e){var i=this.ruleAnalyticsMap[t]||[],n=(i.filter(function(t){return e.find(function(e){return e.ruleId===t.ruleId})}).forEach(function(e){return e.enable()}),i.filter(function(t){return!e.find(function(e){return e.ruleId===t.ruleId})}).forEach(function(e){return e.reset()}),e.filter(function(t){return!i.find(function(e){return e.ruleId===t.ruleId})}).map(function(e){return new s(t,e.ruleId,e.impDur)}));i.push.apply(i,n),this.ruleAnalyticsMap[t]=i},n.PotentialRotationDuration=2e4,n);function n(){this.baseAnalyticsMap={},this.ruleAnalyticsMap={}}i.AnalyticsManager=e;r.prototype.isDone=function(e){switch(e){case a.Impression:return this.impression;case a.Viewable:return this.viewable;default:return this.rotation}},r.prototype.markAsDone=function(e){switch(e){case a.Impression:this.impression=!0;break;case a.Viewable:this.viewable=!0;break;default:this.rotation=!0}};var o=r;function r(){this.totalTimeInView=0,this.currentPotentialRotation=0}c.prototype.reset=function(){-1<this.currentPotentialRotation&&(this.totalTimeInView=0,this.currentPotentialRotation=-1,this.log("rule disabled"))},c.prototype.enable=function(){-1===this.currentPotentialRotation&&(this.currentPotentialRotation=0,this.log("rule enabled"))},c.prototype.shouldEmit=function(e){if(-1===this.currentPotentialRotation)return!1;this.totalTimeInView+=e;e=Math.floor(this.totalTimeInView/this.impressionDuration)>this.currentPotentialRotation;return e&&this.currentPotentialRotation++,e&&this.log("prr"),e},c.prototype.log=function(e){},c.RoundTripDelay=2;var s=c;function c(e,t,i){this.uniqueId=e,this.ruleId=t,this.impressionDuration=i,this.totalTimeInView=0,this.currentPotentialRotation=0,this.impressionDuration=1e3*(i+c.RoundTripDelay),this.log("new rule")}},{"../common/parameters":5}],11:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.ApiModule=void 0,i.extend=function(e,t){window.__iat_api=window.__iat_api||{},window.__iat_api[e.toString()]=t},i.get=function(e){return(window.__iat_api||{})[e.toString()]},i.ApiModule={RealtimeProvider:"r",BrowserStateTracker:"b",PlacementManager:"p",EventManager:"e",ThirdPartyIntegration:"p3"}},{}],12:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.BrowserStateTrackerAPI=void 0,i.getCurrentState=b,i.minimumDurationForReEngagementReached=function(){return a<v},i.getEngagedTime=function(){return I},i.start=function(){d.extend(d.ApiModule.BrowserStateTracker,new _),(()=>{var e=l.config.smc||{};o=1e3*(e.idleTimer||19),s=1e3*(e.disconnectTimer||120),a=1e3*(l.config.mid||5)})(),l.config.ivm?c.listen(10,U):(c.listen(4,T),c.listen(3,P));c.listen(1,C),c.listen(0,C),c.listen(5,C),c.listen(6,C),c.listen(7,C),c.listen(9,C),l.config.ivm?A(g.BrowserState.Active):document.hasFocus()?A(p.Cookies.readCookie(p.Cookies.IdleCookieName)?g.BrowserState.Idle:g.BrowserState.Active):A(g.BrowserState.Inactive);u.interval(E,10)};var n,o,r,s,a,d=e("./api"),c=e("./../common/eventManager"),l=e("./../common/parameters"),u=e("./../common/timers"),p=e("./../common/utilities"),g=e("../interfaces/enums"),m=e("./realtime-messaging/realtimeMessaging"),h=g.BrowserState.Unknown,f=!0,y=0,v=0,w=+new Date,I=0;function b(){return h}function M(){l.config.ivm||(u.clear(n),n=u.timeout(function(){A(g.BrowserState.Idle)},o))}function S(){r=u.timeout(function(){m.RealtimeMessaging.disconnect()},s)}function C(e){f&&"mousemove"===e.type?f=!1:h!==g.BrowserState.Inactive&&(M(),A(g.BrowserState.Active))}function T(){h===g.BrowserState.Inactive&&A(g.BrowserState.Active)}function P(){document.hasFocus()||A(g.BrowserState.Inactive)}function U(){l.config.ivm&&("hidden"===document.visibilityState?A(g.BrowserState.Inactive):A(g.BrowserState.Active))}function A(e){if(h!==e){switch(e){case g.BrowserState.Active:m.RealtimeMessaging.isForcedDisconnected&&m.RealtimeMessaging.connect(),u.clear(r),p.Cookies.eraseCookie(p.Cookies.IdleCookieName),M(),0<y&&(v=+new Date-y,y=0);break;case g.BrowserState.Inactive:S(),u.clear(n),p.Cookies.eraseCookie(p.Cookies.IdleCookieName),y=+new Date,v=0;break;case g.BrowserState.Idle:S(),p.Cookies.createCookie(p.Cookies.IdleCookieName,"1",86400),y=+new Date,v=0}h=e,c.emit(17,e)}}function E(){var e=+new Date;e-w<450||(h===g.BrowserState.Active&&(I+=600<e-w?600:e-w),w=e)}x.prototype.getCurrentState=function(){return h};var _=x;function x(){}i.BrowserStateTrackerAPI=_},{"../interfaces/enums":9,"./../common/eventManager":4,"./../common/parameters":5,"./../common/timers":6,"./../common/utilities":7,"./api":11,"./realtime-messaging/realtimeMessaging":36}],13:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.AdUnit=void 0;var n=e("../../interfaces/enums"),o=e("../browserStateTracker"),y=e("../../common/utilities"),r=e("../../common/timers"),s=e("../../common/parameters"),a=e("../../common/eventManager"),d=e("../placementManager"),c=e("./entry"),l=e("../realtime-messaging/realtimeMessaging"),u=e("../gam/utils"),p=e("../analyticsManager"),g=e("../unitInfoManager");function m(e,t,i){this.queue=[],this.stickyHookTimer=0,this.hovering=!1,this.timeInView=0,this.pctInView=0,this.pctInViewIab=0,this.inViewIabChanged=!1,this.visibilityThreshold=50,this.handleNextReEngagement=!1,this.stateChangeHandler=this.onStateChange.bind(this),this.mouseOverHandler=this.onMouseOver.bind(this),this.mouseOutHandler=this.onMouseOut.bind(this),this.publisherBlankHandler=this.onPublisherBlank.bind(this),this.evaluateNoRefreshCreativeHook(e),this.id=e.id+"."+i,this.config=t.conf,this.adUnitId=e.id.toString(),this.type=t.type?n.AdUnitType[t.type]:n.AdUnitType.normal,this.element=e.element,this.parentElement=e.element.parentElement,this.ct=e.ct||{},this.sizes=e.sizes||[],this.scriptWindow=e.scriptWindow,this.unitWindow=e.window,this.isTrackingUnit=t.tu||!1,this.dnr=e.dnr||!1,this.isIntegration=e.gamAdUnit||!1,this.type===n.AdUnitType.verification?this.isFirstPrint=e.firstPrint||!1:this.isFirstPrint=t.fp||e.firstPrint||!1,this.rotateOnClient=!this.isFirstPrint,this.rotating=!1,this.lastTick=+new Date,this.isPositionSticky="sticky"===window.getComputedStyle(this.element).position,this.impressionDuration=1e3*(s.config.pid||20),e.impDur&&0<e.impDur&&(this.impressionDuration=1e3*e.impDur),this.position={width:0,height:0,top:0,left:0,absTop:0},s.config.dads&&this.disableRotation(),this.init(e)}m.prototype.evaluateNoRefreshCreativeHook=function(e){if(s.config.noRefreshCreativeContent)try{var t=e.element.querySelector("iframe");t&&t.contentDocument&&new String(t.contentDocument.body.innerHTML).includes(s.config.noRefreshCreativeContent)&&(e.dnr=!0,e.dnrReason=["Blocked by creative content"])}catch(e){}},m.prototype.getUniqueId=function(){return this.isIntegration?this.slot.getSlotElementId():this.element.id},Object.defineProperty(m.prototype,"doNotRotate",{get:function(){var e=this.getCurrentEntry();return this.dnr||e&&e.dnr||!1},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isEngagedAndInView",{get:function(){return this.isInView()&&o.getCurrentState()===n.BrowserState.Active},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"currentEntryIndex",{get:function(){return this.queue.length-1},enumerable:!1,configurable:!0}),m.prototype.getCurrentEntry=function(){return this.queue[this.currentEntryIndex]},m.prototype.getPreviousEntry=function(){return this.queue[this.currentEntryIndex-1]},m.prototype.disableRotation=function(){this.dnr=!0},m.prototype.enableRotation=function(){this.dnr=!1},m.prototype.logPotentialImpression=function(){0===p.AnalyticsManager.getPotentials(this)[0]&&this.sendPotentialLog(1)},m.prototype.delete=function(){d.deleteAdUnit(this.id),a.unlisten(17,this.stateChangeHandler),s.config.device===n.DeviceType.Desktop&&(this.element.removeEventListener("mouseover",this.mouseOverHandler),this.element.removeEventListener("mouseout",this.mouseOutHandler)),this.timerCountHandler&&(r.clear(this.timerCountHandler),this.timerCountHandler=void 0),this.observer&&this.observer.unobserve(this.element)},m.prototype.isInView=function(e){return((e=void 0===e?!1:e)?this.pctInViewIab:this.pctInView)>=this.visibilityThreshold},m.prototype.updateThreshold=function(e,t){this.visibilityThreshold=242500<=e*t?30:50},m.prototype.updateViewState=function(){var e,t,i=0,n=0,o="",r=y.getElementSize(this.element),s=y.getViewport(),a=!1;do{try{for(var d,c=(d=e?(e=e.parent).frameElement:(e=this.unitWindow,this.element)).getBoundingClientRect(),l=void 0,u=d;"HTML"!==u.nodeName&&u.parentNode&&!o;){var p,g,m=u.ownerDocument.defaultView.getComputedStyle(u),h=u.getBoundingClientRect();if(u===l&&(l=void 0),!m||"none"!==m.display&&"hidden"!==m.visibility||(a=!0),l||a||(p=(c.top<h.top?h.top-c.top:0)+(c.bottom>h.bottom?c.bottom-h.bottom:0),"hidden"===m.overflowY&&.5<p/c.height&&(a=!0),g=(c.left<h.left?h.left-c.left:0)+(c.right>h.right?c.right-h.right:0),"hidden"===m.overflowX&&.5<g/c.width&&(a=!0)),m&&"fixed"===m.position)break;l=l||(m&&"absolute"===m.position?u.offsetParent:null),u=u.parentNode}i+=c.top,n+=c.left}catch(e){o="frames"}}while(e!==window&&!a);t=a||h&&h.height+h.width===0?0:0<=i&&i+r.height<=s.height&&0<=n&&n+r.width<=s.width?100:(!(i+r.height<0||i>s.height)||!(n+r.width<0||n>s.width))&&(t=r.height,i<0&&(t+=i),i+r.height>s.height&&(t+=s.height-i-r.height),f=r.width,n<0&&(f+=n),n+r.width>s.width&&(f+=s.width-n-r.width),Math.round(Math.max(0,t)*Math.max(f)/(r.height*r.width)*100))||0,this.position.width=r.width,this.position.height=r.height,this.position.top=i,this.position.left=n,this.position.absTop=i+s.top;var f=this.isInView(),r=(this.pctInView=o?0:t,f!==this.isInView()),s=(r&&this.onStateChange(),this.observer||(this.pctInViewIab=this.pctInView),this.inViewIabChanged);return this.inViewIabChanged=!1,r||s},m.prototype.onStateChange=function(){a.emit(20,this),o.getCurrentState()===n.BrowserState.Active||this.handleNextReEngagement||(this.handleNextReEngagement=!0);var e=this.getCurrentEntry();e&&(this.isEngagedAndInView?this.rotateWhenInView&&!this.hovering?this.loadNextSlot(e):e.startViewableLoggingTimer():e.stopViewableLoggingTimer())},m.prototype.onPublisherBlank=function(e){this.id===e&&(e=this.getCurrentEntry())&&e.passback()},m.prototype.isReferenceValid=function(){try{if(!this.element||!this.element.parentNode||!this.scriptWindow||!this.scriptWindow.document||!this.scriptWindow.document.contains(this.element)&&!document.contains(this.element)||!this.scriptWindow.top||this.unitWindow!==this.scriptWindow&&this.scriptWindow===this.scriptWindow.parent)return this.delete(),!1}catch(e){return!1}return!0},m.prototype.sendPotentialLog=function(e,t){t?l.RealtimeMessaging.sendPotentialLog({type:e,id:this.adUnitId,rules:{type:"dfp",ruleIds:t}}):l.RealtimeMessaging.sendPotentialLog({type:e,id:this.adUnitId,isTracking:this.isTrackingUnit})},m.prototype.timeCounter=function(){var e,t;!this.isReferenceValid()||(e=+new Date)-this.lastTick<450||(this.isEngagedAndInView&&(t=600<e-this.lastTick?600:e-this.lastTick,this.timeInView+=t,1===(t=p.AnalyticsManager.getPotentials(this,t))[0]&&this.sendPotentialLog(2),2===t[0]&&this.sendPotentialLog(3),t[1].length&&this.sendPotentialLog(4,t[1]),this.isTrackingUnit||(this.handleNextReEngagement&&o.minimumDurationForReEngagementReached()&&p.AnalyticsManager.isViewableDone(this)&&(this.timeInView=this.impressionDuration+1,this.handleNextReEngagement=!1,this.rotateOnClient=!this.doNotRotate,g.UnitInfoManager.getInfo(this).ignoreNewImpression=this.rotateOnClient),this.rotateOnClient&&this.timeInView>this.impressionDuration&&(this.rotateOnClient=!1,this.nextBanner({tag:"client"})))),this.lastTick=e)},m.prototype.onServerRotation=function(){g.UnitInfoManager.getInfo(this).ignoreNewImpression?g.UnitInfoManager.getInfo(this).ignoreNewImpression=!1:this.nextBanner({tag:"server:app"})},m.prototype.onMawRotation=function(e){this.rotateOnClient||(g.UnitInfoManager.getInfo(this).ignoreNewImpression=!0),this.rotateOnClient=!1,this.nextBanner(e)},m.prototype.nextBanner=function(e){var t;s.config.dads||this.doNotRotate&&!e.ignoreDoNotRotate||this.rotating||(this.rotating=!0,t="mawId"in e,g.UnitInfoManager.getInfo(this).initializePending(t?e:null),t=new c.Entry(this,this.queue.length,!1,e.ignoreInViewRequisite),this.queue.push(t),g.UnitInfoManager.getInfo(this).index=t.index,this.evaluateStickyHook(),this.requestAd(t))},m.prototype.getMetaKeys=function(){var e={},t=document.querySelector?document.querySelector("meta[name='iat-targeting']"):null;if(t)for(var i=t.content.replace(/\'/g,"").split(";"),n=i.length-1;-1<n;n--){var o=i[n].split("=");o[1]&&(e[o[0].toLowerCase()]=o[1].split("&"))}return e},m.prototype.getGamPageKeys=function(){var t,i,e=s.getGamIntegration(),n=e&&e.keyValues;return n&&n.length&&(e=u.GamUtils.getGptWindow(this.unitWindow),u.GamUtils.isGptAvailable(e))?(t={},(i=e.googletag.pubads()).getTargetingKeys().filter(function(e){return 0<=n.indexOf(e)}).forEach(function(e){return t[e]=i.getTargeting(e)}),t):{}},m.prototype.getCustomTarget=function(){var e,t=y.extendCustomTargeting(this.getMetaKeys(),this.ct),i=(this.gamMapping&&this.gamMapping.ct&&(t=y.extendCustomTargeting(t,this.gamMapping.ct)),{});for(e in t=y.extendCustomTargeting(t,this.getGamPageKeys()))e.startsWith("hb_")||(i[e]=t[e]);var n=g.UnitInfoManager.getInfo(this).pendingContext;return n.isMaw?(n.ruleId&&(i["iat-maw-rule"]=[n.ruleId.toString()]),n.parentMawId&&(i["iat-parent-maw"]=[n.parentMawId.toString()])):n.rotationRuleId&&(i["iat-rotation-rule"]=[n.rotationRuleId.toString()]),i},m.prototype.addTargetingMap=function(e){e&&this.slot&&(this.ct=y.extendCustomTargeting(this.ct,e),e=y.extendCustomTargeting(this.slot.getTargetingMap(),e),this.slot.updateTargetingFromMap(e))},m.prototype.getCreativeSize=function(){var e,t=[];return this.sizes&&0<this.sizes.length?t=this.sizes[0]:(e=this.getCurrentEntry())&&-1<e.iatCw&&-1<e.iatCh&&(t=[e.iatCw,e.iatCh]),t},m.prototype.evaluateStickyHook=function(){var e,t,i=this,n=s.config.stickyCloseButton;n&&(e=this.element&&this.element.parentElement)&&e.id===n.slotDomElementId&&(t=e.querySelector(n.cssSelector))&&(y.setCssProperty(t,"display","none","important"),n.timeout)&&(r.clear(this.stickyHookTimer),this.stickyHookTimer=r.timeout(function(){e&&i.isReferenceValid()&&y.setCssProperty(t,"display","block","important")},1e3*n.timeout))},m.prototype.requestAd=function(i){var n=this,e=s.config.rootPath+"/ad?auid="+this.adUnitId+"&appId="+s.config.appId+"&s="+s.config.sectionId+"&dm="+(0===i.index?1:2)+"&is="+i.index+"&csz="+encodeURIComponent(JSON.stringify(this.getCreativeSize()))+"&sz="+encodeURIComponent(JSON.stringify(this.sizes))+"&ct="+encodeURIComponent(JSON.stringify(this.getCustomTarget()))+"&h="+encodeURIComponent(y.BrowserUtils.getTopMostPageUrl())+"&sid="+s.config.sessionId+"&v="+s.config.version+"&ts="+ +new Date+"",t=this.getPreviousEntry(),t=(t&&t.iatOlId&&0<t.iatOlId&&(e+="&ll="+t.iatOlId),g.UnitInfoManager.getInfo(this).pendingContext);t.isMaw&&(t.parentMawId&&(e+="&parentMawId="+t.parentMawId),e+="&mawId="+t.mawId,t.stage)&&(e+="&mawStage="+t.stage),y.BrowserUtils.buildRequestByUrl(e,function(e){var t=e._tg,e=e._tgblk;!t||!Array.isArray(t)||!t.length?(i.updateWithBlankResponse(e),n.onBlank(i)):(i.updateWithResponse(t,e),i.index===n.queue.length-1&&n.loadNextSlot(i))})},m.prototype.loadNextSlot=function(e){var t=this.getPreviousEntry(),i=t&&this.hovering;e.ignoreInViewRequisite||this.isEngagedAndInView&&!i?(this.rotateWhenInView=!1,e.loadNextCreative(t)):this.rotateWhenInView=!0},m.prototype.resizeContainer=function(e,t,i){y.tryParseInt((this.element.style.width||"").replace("px",""))<t.width&&(this.element.style.width=t.width+"px"),y.tryParseInt((this.element.style.height||"").replace("px",""))<t.height&&(this.element.style.height=t.height+"px"),this.updateThreshold(t.width,t.height),i&&(this.removeAllHiddenChildren(),this.rotating=!1,a.emit(21,this),(t=this.getPreviousEntry())&&t.stopViewableLoggingTimer(),e.buildStdImpressionLoggingRequest(),e.startViewableLoggingTimer())},m.prototype.showPriorEntry=function(e){this.queue.pop(),e.currentFrame&&this.updateElementVisibility(e.currentFrame,!1);for(var t=this.queue.length-1;-1<t;t--){var i=this.queue[t];if(i.currentFrame)return void this.updateElementVisibility(i.currentFrame,!0,!1,!0)}e=this.element.querySelector(":scope > iframe:not([iat-slot])");e&&this.updateElementVisibility(e,!0,!0,!0)},m.prototype.removeAllHiddenChildren=function(){var t=this;try{this.element.querySelectorAll(":scope > .iat-hidden").forEach(function(e){return t.element.removeChild(e)})}catch(e){}},m.prototype.updateElementVisibility=function(e,t,i,n){t?(y.setCssProperty(e,"display",i?"":"block",i?"":"important"),y.removeClass(e,"iat-hidden"),i&&this.element.parentElement&&"none"===this.element.parentElement.style.display&&y.setCssProperty(this.element.parentElement,"display","","")):(y.setCssProperty(e,"display","none","important"),y.addClass(e,"iat-hidden")),n&&this.removeAllHiddenChildren()},m.prototype.changeVisibleSlot=function(e){if(0<this.queue.length){for(var t,i=this.element.childNodes,n=i.length;-1<--n;)(o=i[n]).getAttribute&&(t=o.getAttribute("class"),"none"===o.style.display||t&&-1!==t.split(" ").indexOf("tg-overlay")||this.updateElementVisibility(o,!1));if(this.slot&&this.parentElement)for(var o,r=this.parentElement.childNodes,n=r.length;-1<--n;)(o=r[n])!==this.element&&o.tagName&&"iframe"===o.tagName.toLowerCase()&&this.updateElementVisibility(o,!1)}this.updateElementVisibility(e.currentFrame,!0)},m.prototype.onBlank=function(e){this.rotating=!1,e.stopViewableLoggingTimer(),e.buildBlankLoggingRequest(),this.showPriorEntry(e),a.emit(21,this),this.rotateOnClient=!0,this.timeInView=0,g.UnitInfoManager.getInfo(this).rollbackContext()},m.prototype.onMouseOver=function(){this.hovering=!0},m.prototype.onMouseOut=function(){this.hovering=!1,this.onStateChange()},m.prototype.loadGamSlotInfo=function(e){(this.gamMapping=e).ct=this.slot.getTargetingMap(),g.UnitInfoManager.getInfo(this).commitContext(e.ruleId);var e=[e.cw,e.ch],t=u.GamUtils.getNumericSlotSizes(this.slot);this.sizes=y.getSlotSizesForDevice(t,e),this.updateThreshold(e[0],e[1]),p.AnalyticsManager.registerRules(this)},m.prototype.loadGamCreative=function(e){if(this.slot=e.window.googletag.pubads().getSlotIdMap()[u.GamUtils.getSlotId(this.element)],this.slot&&(this.loadGamSlotInfo(e),!this.isFirstPrint)){for(var t=g.UnitInfoManager.getInfo(this).index;t--;)this.queue.push(new c.Entry(this,this.queue.length));var i=new c.Entry(this,this.queue.length);this.rotateOnClient=!e.dnr,i.setServedData(e),this.queue.push(i),a.emit(21,this),this.onStateChange()}},m.prototype.loadOnCurrentAdUnit=function(e,t){this.slot=t,this.loadGamSlotInfo(e),this.timeInView=0,this.dnr=e.dnr||!1,e.impDur&&0<e.impDur&&(this.impressionDuration=1e3*e.impDur),this.rotateOnClient=!e.dnr;t=this.getCurrentEntry();t&&(t.clearServedData(),t.setServedData(e)),this.slot.getOutOfPage()&&(this.rotating=!1),a.emit(21,this),a.emit(18,this)},m.prototype.initializeViewabilityObserver=function(){var t=this;"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&(this.observer=new IntersectionObserver(function(e){e.forEach(function(e){t.pctInViewIab=Math.round(100*e.intersectionRatio),t.inViewIabChanged=!0})},{threshold:[0,.3,.5,.7,1]}),this.observer.observe(this.element))},m.prototype.init=function(e){this.updateViewState(),this.initializeViewabilityObserver(),a.listen(17,this.stateChangeHandler),a.listen(22,this.publisherBlankHandler),this.element.setAttribute("tg-zone",this.id),s.config.device===n.DeviceType.Desktop&&(this.element.addEventListener("mouseover",this.mouseOverHandler),this.element.addEventListener("mouseout",this.mouseOutHandler)),e.gamAdUnit&&this.loadGamCreative(e),this.isTrackingUnit||(this.isFirstPrint?this.nextBanner({tag:"first",ignoreInViewRequisite:!e.eid}):0===this.queue.length&&this.queue.push(new c.Entry(this,this.queue.length))),this.type===n.AdUnitType.bottom&&!this.isTrackingUnit||this.logPotentialImpression(),this.timerCountHandler=r.interval(this.timeCounter.bind(this),10)},i.AdUnit=m},{"../../common/eventManager":4,"../../common/parameters":5,"../../common/timers":6,"../../common/utilities":7,"../../interfaces/enums":9,"../analyticsManager":10,"../browserStateTracker":12,"../gam/utils":30,"../placementManager":33,"../realtime-messaging/realtimeMessaging":36,"../unitInfoManager":41,"./entry":14}],14:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.Entry=void 0;var n=e("../../common/timers"),o=e("../../common/parameters"),r=e("../../common/eventManager"),s=e("../../common/utilities"),a=e("../gam/render-api"),d=e("../gam/utils");function c(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1),this.waterfallEntries=[],this.isInit=!1,this.parentMawId=0,this.mawId=0,this.isMawInit=!1,this.isFirstHouseRequest=void 0,this.nextCreativeIndex=0,this.viewableCompleted=!1,this.adUnit=e,this.index=t,this.ignoreInViewRequisite=n,i&&this.clearServedData()}c.prototype.getMawInfoForSnap=function(){var e;return this.mawId?(e=this.parentMawId+":"+this.mawId+":"+(this.isMawInit?1:0),this.isMawInit=!1,e):""},c.prototype.getLineItemInfoForSnap=function(){var e=(this.lineItemId?this.lineItemId.toString():"")+":"+(this.isInit?1:0);return this.isInit=!1,e},c.prototype.setParentMawId=function(e){0<this.parentMawId||(this.parentMawId=e,this.isMawInit=!0,this.isInit=!0)},c.prototype.setServedData=function(e){this.iid=this.iid||s.CryptoUtils.generateImpressionId(),this.servedWidth=e.cw,this.servedHeight=e.ch,this.lineItemId=e.lineItemId,this.creativeId=e.creativeId,this.orderId=e.orderId,this.isInit=!0,e.mawId&&(this.parentMawId=this.parentMawId||e.parentMawId||0,this.mawId=e.mawId,this.isMawInit=!0,d.GamUtils.addBeacon(this.adUnit.slot,"minit"))},c.prototype.getServedSize=function(){return 0<this.servedWidth&&0<this.servedHeight?this.servedWidth+"x"+this.servedHeight:"1x1"},c.prototype.updateWithResponse=function(e,t){this.waterfallEntries=e,this.blankEntry=t},c.prototype.updateWithBlankResponse=function(e){this.blankEntry=e},c.prototype.isEmpty=function(){return!this.iatOlId&&!this.adUnit.gamMapping},c.prototype.isPublisherMarket=function(){return"p"===this.ms},c.prototype.isHouseOrderMarket=function(e){return"house"===(e=e||this.m)},c.prototype.checkFirstHouseRequest=function(){this.isPublisherMarket()||(void 0===this.isFirstHouseRequest?this.isFirstHouseRequest=!0:this.isFirstHouseRequest=!1)},c.prototype.onAbortedRequest=function(){this.isPublisherMarket()||!0!==this.isFirstHouseRequest||(this.isFirstHouseRequest=void 0)},c.prototype.onProceedWithRequest=function(){this.isPublisherMarket()||(this.isFirstHouseRequest=!1)},c.prototype.clearServedData=function(){this.iatOlId=void 0,this.iatCId=void 0},c.prototype.passback=function(){this.currentFrame&&this.currentFrame.contentWindow?this.currentFrame.contentWindow.postMessage("TG-SP","*"):this.adUnit.onBlank(this)},c.prototype.messageListener=function(e){try{var t=e;"TG-SP"===t.data?(this.currentFrame.removeEventListener("message",this.messageListener),this.loadNextCreative()&&r.emit(21,this.adUnit)):"click"===t.data.action&&window.open(this.clickUrl,"_blank")}catch(e){}},c.prototype.loadNextCreative=function(e){var t=this,i=(this.currentFrame&&this.adUnit.updateElementVisibility(this.currentFrame,!1),0),n=0,e=(e||this).currentFrame,e=(e&&(i=s.tryParseInt((e.width||"").replace("px","")),n=s.tryParseInt((e.height||"").replace("px",""))),this.waterfallEntries[this.nextCreativeIndex]);if(!e)return this.adUnit.onBlank(this),!1;this.nextCreativeIndex++;var o=(this.m||"").toLowerCase(),o=(this.cd=e.cd,this.iid=e.iid,this.iatCh=e.ch,this.iatCw=e.cw,this.m=e.m.toLowerCase(),this.ms=e.ms.toLowerCase(),this.dnr=e.dnr,this.clickUrl=e.cu,o&&!this.isHouseOrderMarket(o)&&!this.isHouseOrderMarket()||(this.iatOid=e.oid,this.iatOlId=e.li,this.iatCId=e.ci),this.checkFirstHouseRequest(),document.createElement("iframe")),e=((this.currentFrame=o).src="about:blank",o.setAttribute("scrolling","no"),o.setAttribute("frameborder","no"),o.setAttribute("iat-market",this.m),o.setAttribute("iat-slot",this.index.toString()),s.setFrameSize(o,i||this.iatCw,n||this.iatCh),s.setCssProperty(o,"border-width","0px"),s.setCssProperty(o,"overflow","visible"),s.setCssProperty(o,"display","none"),s.setCssProperty(o,"clear","both"),s.setCssProperty(o,"margin","0px auto"),s.setCssProperty(o,"text-align","center","important"),this.adUnit.isPositionSticky||s.setCssProperty(o,"position","relative"),this.adUnit.element.appendChild(o),this.adUnit.slot&&this.adUnit.slot.getOutOfPage()||this.adUnit.changeVisibleSlot(this),o.contentDocument||(o.contentWindow?o.contentWindow.document:null));return e&&o.contentWindow&&(e.open("text/html","replace"),o.contentWindow.addEventListener("message",function(e){return t.messageListener(e)}),e.close(),s.setCssProperty(e.body,"margin","0px"),s.setCssProperty(e.body,"border","0px"),s.setCssProperty(e.body,"overflow","hidden"),a.GamRenderApi.render(this)),!0},c.prototype.resize=function(e,t){s.setFrameSize(this.currentFrame,e.width,e.height),this.adUnit.resizeContainer(this,e,t)},c.prototype.buildBaseLoggingRequest=function(e){return o.config.rootPath+"/"+e+"?appid="+o.config.appId+"&acid="+o.config.acId+"&s="+o.config.sectionId+"&sid="+o.config.sessionId+"&auid="+this.adUnit.adUnitId+"&parentMawId="+this.parentMawId+"&mawId="+this.mawId+"&ts="+ +new Date},c.prototype.buildBlankLoggingRequest=function(){var e;this.blankEntry&&(e=this.buildBaseLoggingRequest("lb")+"&iid="+this.blankEntry.iid+"&is="+this.index+"&m="+this.blankEntry.m,s.BrowserUtils.generateBeacon(e))},c.prototype.buildBaseImpressionLoggingRequest=function(e){return this.buildBaseLoggingRequest(e)+"&iid="+this.iid+"&is="+this.index+"&ci="+this.iatCId+"&olid="+this.iatOlId+"&oid="+this.iatOid+"&cw="+this.iatCw+"&ch="+this.iatCh},c.prototype.logImpression=function(e){this.iid&&this.isHouseOrderMarket()&&s.BrowserUtils.generateBeacon(e)},c.prototype.buildStdImpressionLoggingRequest=function(){this.logImpression(this.buildBaseImpressionLoggingRequest("limp"))},c.prototype.stopViewableLoggingTimer=function(){this.viewableTimer&&(n.clear(this.viewableTimer),this.viewableTimer=void 0)},c.prototype.startViewableLoggingTimer=function(){var e=this;!this.adUnit.isEngagedAndInView||this.viewableTimer||this.viewableCompleted||this.iatOlId&&(this.viewableTimer=n.timeout(function(){e.viewableCompleted=!0,e.buildViewableImpressionLoggingRequest()},1e3))},c.prototype.buildViewableImpressionLoggingRequest=function(){this.logImpression(this.buildBaseImpressionLoggingRequest("lvi"))},c.prototype.buildNewImpressionLoggingRequest=function(){this.logImpression(this.buildBaseImpressionLoggingRequest("ltgi"))},i.Entry=c},{"../../common/eventManager":4,"../../common/parameters":5,"../../common/timers":6,"../../common/utilities":7,"../gam/render-api":29,"../gam/utils":30}],15:[function(e,t,i){function n(){}Object.defineProperty(i,"__esModule",{value:!0}),i.CustomPolyfill=void 0,n.init=function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t=t||0,e.length)===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var r=t[o];if(e.call(n,r,o,t))return r;o++}},configurable:!0,writable:!0}),HTMLDocument.prototype.contains||(HTMLDocument.prototype.contains=function(e){if(this.body&&this.body.contains)return this.body.contains(e);var t=e;do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})},i.CustomPolyfill=n},{}],16:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.DemoModule=void 0;var n=e("../common/eventManager"),o=e("../common/utilities"),r=e("./placementManager"),s=e("./realtime-messaging/types"),a=e("./realtime-messaging/realtimeMessaging");function d(){this.dragActivationThreshold=5,this.dragActivationCounter=0,this.downEvents="mousedown;touchstart"}d.run=function(){this.instance=new d,n.listen(15,this.instance.onDemoRedSquareMessage.bind(d.instance)),n.listen(16,this.instance.onDemoReplaceAllAdsMessage.bind(d.instance))},d.prototype.onDemoRedSquareMessage=function(e){var t,i=this;"x"in e&&"y"in e?this.onDragUpdateOthers(e):this.beacon||(this.beacon=document.createElement("div"),this.beacon.setAttribute("style",e.script),document.body.appendChild(this.beacon),this.activationBeacon=document.createElement("div"),this.activationBeacon.setAttribute("style","width:50px;height:50px;background-color:transparent;left:5px;"),this.activationBeacon.style.position=this.beacon.style.position,this.activationBeacon.style.bottom=this.beacon.style.bottom,this.activationBeacon.style.zIndex=this.beacon.style.zIndex,document.body.appendChild(this.activationBeacon),this.downEvents.split(";").forEach(function(e){return i.activationBeacon.addEventListener(e,i.dragActivating.bind(i))}),t=d.instance,setTimeout(function(){t.beacon&&t.beacon.parentElement&&t.beacon.parentElement.removeChild(t.beacon),t.activationBeacon&&t.activationBeacon.parentElement&&t.activationBeacon.parentElement.removeChild(t.activationBeacon),t.beacon=null,t.activationBeacon=null,window.clearInterval(t.intervalTimer)},1e3*e.duration))},d.prototype.dragActivating=function(e){var t=this;e.preventDefault(),this.dragActivationCounter>this.dragActivationThreshold||(this.dragActivationCounter++,window.clearTimeout(this.dragActivationTimer),this.dragActivationCounter>=this.dragActivationThreshold?(this.beacon.style.backgroundColor="green",this.startDraggableFeature()):this.dragActivationTimer=window.setTimeout(function(){return t.dragActivationCounter=0},1e3))},d.prototype.startDraggableFeature=function(){var t=this,i=(this.startNotifyTimer(),!1),n=this.beacon;"mousedown;touchstart".split(";").forEach(function(e){return n.addEventListener(e,function(){return i=!0})}),"mouseup;touchend".split(";").forEach(function(e){return window.addEventListener(e,function(){return i=!1})}),"mousemove;touchmove".split(";").forEach(function(e){return("mousemove"===e?window:n).addEventListener(e,function(e){return t.onDragUpdateMe(i,e)})})},d.prototype.onDragUpdateMe=function(e,t){var i;e&&this.beacon&&(t.preventDefault(),e="targetTouches"in t?t.targetTouches[0]:t,this.beacon.style.left=e.clientX+"px",this.beacon.style.top=e.clientY+"px",this.beacon.style.backgroundColor="green",t=(0,o.getViewport)(),i=e.clientX/t.width,e=e.clientY/t.height,this.beaconPosition=[i,e])},d.prototype.startNotifyTimer=function(){var t=this;this.intervalTimer=window.setInterval(function(){var e;!t.beaconPosition||t.beaconPosition.length<2||((e=new s.DemoMessageModel).action="show-square",e.x=t.beaconPosition[0],e.y=t.beaconPosition[1],a.RealtimeMessaging.sendDemoMessage(e),t.beaconPosition=null)},300)},d.prototype.onDragUpdateOthers=function(e){var t,i;this.beacon&&(t=(i=(this.dragActivationCounter=0,o.getViewport)()).width*e.x,i=i.height*e.y,this.beacon.style.left=t+"px",this.beacon.style.top=i+"px",this.beacon.style.backgroundColor="yellow")},d.prototype.onDemoReplaceAllAdsMessage=function(s){r.getAdUnits().forEach(function(t){if(t.getCurrentEntry()){for(var e=t.element.getBoundingClientRect(),i=document.createElement("DIV"),n=(i.style.width=e.width+"px",i.style.height=e.height+"px",i.innerHTML=s.script,[]),o=0;o<t.element.children.length;o++){var r=t.element.children[o];"SCRIPT"===r.nodeName||-1<r.className.indexOf("iat-hidden")||(r.style.display="none",n.push(r))}t.element.appendChild(i),setTimeout(function(){t.element.removeChild(i);for(var e=0;e<n.length;e++)n[e].style.display="inline-block"},1e3*s.duration)}})},i.DemoModule=d},{"../common/eventManager":4,"../common/utilities":7,"./placementManager":33,"./realtime-messaging/realtimeMessaging":36,"./realtime-messaging/types":37}],17:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=create;var Utilities=require("../../common/utilities"),Timers=require("../../common/timers"),EventManager=require("../../common/eventManager"),Parameters=require("../../common/parameters"),PlacementManager=require("../placementManager"),utils_1=require("../gam/utils"),configs={},adhesionContainer,adContainer,bottomMarginElement,overlayProcessorHandler=0;function getDismissedState(){var e=Utilities.Cookies.readCookie(Utilities.Cookies.AdhesionDismissedCookieName);return e?JSON.parse(e):{}}function userHasClosed(e){return 1===getDismissedState()[e]}function closedByUser(e){var t;!e||!e.dismissedDuration||e.dismissedDuration<=0||((t=getDismissedState())[e.adUnitId]=1,Utilities.Cookies.createCookie(Utilities.Cookies.AdhesionDismissedCookieName,JSON.stringify(t),e.dismissedDuration))}function render(e){var t,i,n,o="";e.isTracking?(o='<div class="iat-adhesion-bar" style="position:fixed; bottom:0; left:0; right:0; width:100%; z-index: 2147483636;"><div id="iat-adhesion-bar-'+e.adUnitId+'" class="iat-adhesion-banner id-'+e.adUnitId+'" style="margin: 0px auto; clear: both; width: '+e.size.width+"px; height: "+e.size.height+'px; "></div></div>',e.element.style.pointerEvents="none"):(t=Math.min(e.size.height,100),n=i="",n=!e.omitBackground?(i="border-top: 1px solid #7d7d7d; background: #fff; max-width: inherit; width: 100%; height: "+(t+10)+"px; z-index: 2147483636; padding-top: 5px; position: fixed; margin: 0; bottom: "+e.bottomMargin+"px; left: 0; right: 0; box-sizing: border-box","background-color: #fff; border: 1px solid #7d7d7d; border-bottom: 2px solid #fff; border-radius: 4px 4px 0 0; height: 24px; position: absolute; top: -23px; right: 0; display: block; padding: 2px 0 0 2px;"):(i="border-top: 1px solid #cacaca; border-left: 1px solid #cacaca; border-right: 1px solid #cacaca; background: #fff; max-width: inherit; height: "+(t+10)+"px; z-index: 2147483636; padding: 5px 5px 0px 5px; position: fixed; margin: 0; bottom: "+e.bottomMargin+"px; left: 50%; transform: translate(-50%, 0); box-sizing: border-box","background-color: #cacaca;border-radius: 20px;border: 2px #ffffff solid;height: 24px;position: absolute;top: -14px;right: -14px;display: block; padding: 0px 0 0 0px;z-index: 3147483636;"),o='<div id="iat-adhesion" style="'+i+'">   <div id="iat-adhesion-close-button">       <button style="'+n+'">           <span style="'+"position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); clip-path: polygon(0 0, 0 0, 0 0, 0 0);"+'">Close</span>           <svg style="width: 20px; " viewBox="0 0 24 24" role="img" aria-hidden="true"><path d="M19, 6.41L17.59, 5L12, 10.59L6.41, 5L5, 6.41L10.59, 12L5, 17.59L6.41, 19L12, 13.41L17.59, 19L19, 17.59L13.41, 12L19, 6.41Z"></path></svg>       </button>   </div>   <div id="iat-adhesion-banner-id-'+e.adUnitId+'" class="iat-adhesion-banner id-'+e.adUnitId+'" style="margin:0 auto; text-align: center"></div></div>',e.element.style.display="none"),e.element.innerHTML=o,document.body.appendChild(e.element),e.id=PlacementManager.createAdUnit({id:parseInt(e.adUnitId),element:e.element.querySelector(".iat-adhesion-banner.id-"+e.adUnitId),scriptWindow:window,window:window}),configs[e.adUnitId]=e}function toggleVisibility(e,t){var i=PlacementManager.getAdUnit(e.id);i&&((t=!t||e.loaded&&!isOverlayDisplayed(e)&&isValidInViewport(e)?t:!1)&&updateBottomMargin(),e.element.style.display=t?"block":"none",i.updateViewState())}function onGetServedAdHeight(e,t){if(void 0===t&&(t=0),!adContainer||20===t)return e(0);var i=Utilities.getElementSize(adContainer).height;0===i?Timers.timeout(function(){return onGetServedAdHeight(e,++t)},0):e(i)}function updateVerticalAlignment(e){adContainer&&50<Math.min(e.size.height,100)&&onGetServedAdHeight(function(e){30<e&&e<100&&Math.round((100-e)/2)})}function updateBottomMargin(){adhesionContainer&&bottomMarginElement&&(adhesionContainer.style.bottom=getBottomMargin()+"px")}function getDeclaredBottom(e){for(var t=0;t<document.styleSheets.length;t++)try{for(var i=document.styleSheets,n=i[t].rules||i[t].cssRules,o=0;o<n.length;o++){var r=n[o];if(r.selectorText==="."+e)return r.style.bottom}}catch(e){}}function getBottomMargin(){var e,t,i,n;return!bottomMarginElement||(e=window.getComputedStyle(bottomMarginElement)).opacity&&parseFloat(e.opacity)<.5||(t=bottomMarginElement.getBoundingClientRect(),n=e.webkitTransform,n=new WebKitCSSMatrix(n).m42,(i=t.top+n)>window.innerHeight)||bottomMarginElement.style.bottom&&0<Math.abs(parseInt(bottomMarginElement.style.bottom))&&Math.abs(parseInt(bottomMarginElement.style.bottom))<=t.height?0:0<n||bottomMarginElement.style.bottom&&parseInt(bottomMarginElement.style.bottom)<=0||parseInt(getDeclaredBottom(bottomMarginElement.className))<=0||"fixed"===e.getPropertyValue("position")&&parseInt(e.getPropertyValue("bottom"))<=0?t.height:(n=window.innerHeight-i,window.innerHeight<n||n>t.height?0:n)}function bottomMarginProcessor(t){var i;window.MutationObserver&&t.bottomMarginSelector&&((bottomMarginElement=document.querySelector(t.bottomMarginSelector))?(t.bottomMargin=getBottomMargin(),(i=new MutationObserver(function(e){e.forEach(function(){var e;t.loaded&&!adhesionContainer||!bottomMarginElement?i.disconnect():(e=parseFloat(window.getComputedStyle(bottomMarginElement).webkitTransitionDuration),0<(e=isNaN(e)?0:e)?Timers.timeout(function(){return updateBottomMargin()},Math.min(1e3*e,150)):updateBottomMargin())})})).observe(document.body,{attributes:!0}),i.observe(bottomMarginElement,{attributes:!0,subtree:!0})):Timers.timeout(function(){return bottomMarginProcessor(t)},200))}function isValidInViewport(e){var t=Utilities.getViewport(),i=!0,t=(0<e.minimumScroll&&(!e.minimumScrollMaxViewportHeight||t.height<=e.minimumScrollMaxViewportHeight)&&(i=t.top>=e.minimumScroll),!(0<e.footerProtectionHeight)||t.top+t.height+e.footerProtectionHeight<=Utilities.getDocumentHeight());return i&&t}function viewportHandler(){Object.keys(configs).forEach(function(e){e=configs[e];e.isTracking||toggleVisibility(e,!0)})}function close(e,t,i){void 0===i&&(i=!1),delete configs[e.adUnitId],document.body.removeChild(e.element),EventManager.unlisten(21,bannerLoadedHandler),EventManager.unlisten(2,viewportHandler),EventManager.unlisten(1,viewportHandler),"user closed"===t&&closedByUser(e);var n,o=PlacementManager.getAdUnit(e.id);e.closeCallback&&window[e.closeCallback]&&"function"==typeof window[e.closeCallback]&&(n=o?o.getCurrentEntry():null,window[e.closeCallback]({closeAction:t,slot:n?n.index:0})),o&&!i&&o.delete(),!e.isTracking&&adContainer&&(t=adContainer.getAttribute("tg-zone"))&&t===e.id&&(bottomMarginElement=adContainer=adhesionContainer=void 0,Timers.clear(overlayProcessorHandler))}function wireUpCloseEvent(t){Timers.timeout(function(){var e=t.element.querySelector("#iat-adhesion-close-button");e&&e.addEventListener("click",function(){close(t,"user closed")})},100)}function bannerLoadedHandler(t){var e,i=configs[t.adUnitId];i&&(!(e=t.getCurrentEntry())||e.isEmpty()?close(i,"no inventory"):i.loaded?updateVerticalAlignment(i):(Utilities.foreach(configs,function(e){e!==t.adUnitId&&!configs[e].isTracking&&configs[e].loaded&&close(i,"only one ad unit allowed")}),adhesionContainer=document.querySelector("#iat-adhesion"),adContainer=adhesionContainer.querySelector(".iat-adhesion-banner.id-"+i.adUnitId),i.loaded=!0,wireUpCloseEvent(i),onGetServedAdHeight(function(e){t.isTrackingUnit||0!==t.currentEntryIndex||t.logPotentialImpression(),toggleVisibility(i,!0),updateVerticalAlignment(i)})))}function deleteHandler(e){e=configs[e.adUnitId];e&&close(e,"deleted",!0)}function isOverlayDisplayed(e){if(e.overlaySelector){var t=document.querySelectorAll(e.overlaySelector);if(t&&t.length)for(var i=0;i<t.length;i++){var n=window.getComputedStyle(t[i]);if("none"!==n.display&&"hidden"!==n.visibility)return 1}}}function overlayProcessor(e){e.overlaySelector&&(overlayProcessorHandler=Timers.interval(function(){return toggleVisibility(e,!0)},10))}function evaluateLoadConditions(model){if(model){if(model.selector){var isMatch=null!==document.querySelector(model.selector),cssSelectorResult=model.selectorMatch&&isMatch||!model.selectorMatch&&!isMatch;if(!cssSelectorResult)return}if(model.slotPath)for(var getValue_1=function(value){var mustEval=!value.startsWith("/");try{return mustEval?eval(value):value}catch(error){return value}},slotPaths=model.slotPath.split(","),index=0;index<slotPaths.length;index++){var slotPath=utils_1.GamUtils.getFinalSlotPath(getValue_1(slotPaths[index]));if(slotPath){var slots=utils_1.GamUtils.getIntegratedSlots(slotPath),slots=slots.filter(function(e){return!model.slotElementId||e.getSlotElementId()===getValue_1(model.slotElementId)});if(0<slots.length){if(model.slotMustNotExist)return;if(null!==slots[0].getResponseInformation())return}}}}return 1}function create(e,t){var i;Parameters.config.dads||configs[e]||!t.conf.sizes||!t.conf.sizes[0]||userHasClosed(e)||(i={id:"will hold the full ad unit id, after creation",adUnitId:e,element:document.createElement("div"),size:t.conf.sizes.find(function(e){return e.height===Math.max.apply(Math,t.conf.sizes.map(function(e){return e.height}))}),footerProtectionHeight:t.conf.bottomHeight||0,closeCallback:t.conf.closeCallback,isTracking:t.tu,loaded:!1,overlaySelector:t.conf.overlaySelector,bottomMargin:0,bottomMarginSelector:t.conf.bottomMarginSelector,dismissedDuration:t.conf.dismissedDuration,minimumScroll:t.conf.minimumScroll||0,minimumScrollMaxViewportHeight:t.conf.minimumScrollMaxViewportHeight||0,omitBackground:t.conf.omitBackground||!1},Timers.timeout(function(){document.querySelector(".iat-adhesion-banner.id-"+i.adUnitId)||evaluateLoadConditions(t.conf.loadConditions)&&(i.bottomMarginSelector&&bottomMarginProcessor(i),render(i),i.overlaySelector&&overlayProcessor(i),t.tu||(EventManager.listen(2,viewportHandler),EventManager.listen(1,viewportHandler),EventManager.listen(21,bannerLoadedHandler)),EventManager.listen(19,deleteHandler))},1e3*(t.conf.showDelay||0)))}},{"../../common/eventManager":4,"../../common/parameters":5,"../../common/timers":6,"../../common/utilities":7,"../gam/utils":30,"../placementManager":33}],18:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.AppOpen=void 0;var n=e("../../common/eventManager");function o(e,t){n.listen(21,this.bannerLoadedHandler.bind(this)),this.adUnitId=e,this.queryString=this.getQueryParams(),this.elapsedTime=0,this.duration=1e3*(t.duration||10),this.intervalDuration=this.duration/100,t.timeWidgetCssSelector&&(this.timeWidgetCssSelector=t.timeWidgetCssSelector||null,this.timeWidgetElement=document.querySelectorAll(this.timeWidgetCssSelector)[0],this.timeWidgetElement)&&(this.timeWidgetElement.innerHTML="..."),this.queryString.du?this.destinationUrl=this.queryString.du:t.destinationUrl&&(this.destinationUrl=this.buildRedirectUrl(t.destinationUrl))}o.prototype.bannerLoadedHandler=function(e){e.adUnitId===this.adUnitId&&(!(e=e.getCurrentEntry())||e.isEmpty()?this.redirect():this.startTimer())},o.prototype.buildRedirectUrl=function(e){var t=new URLSearchParams(this.queryString);return Array.from(t).length?e+"?"+t.toString():e},o.prototype.startTimer=function(){var e=this;this.redirectInterval=setInterval(function(){e.elapsedTime+=e.intervalDuration,e.timeWidgetElement&&(e.timeWidgetElement.innerHTML=Math.floor((e.duration-e.elapsedTime)/1e3).toString()),e.elapsedTime>=e.duration&&(clearInterval(e.redirectInterval),e.redirect())},this.intervalDuration)},o.prototype.redirect=function(){this.destinationUrl&&(window.location.href=this.destinationUrl)},o.prototype.getQueryParams=function(){for(var e,t=window.location.search.substring(1),i={},n=/[?&]?([^=]+)=([^&]*)/g;e=n.exec(t);)i[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return i},i.AppOpen=o},{"../../common/eventManager":4}],19:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.start=function(){s.start(),o.listen(8,h)};var n=e("../../interfaces/enums"),o=e("../../common/eventManager"),r=e("../../common/parameters"),a=e("../../common/utilities"),d=e("../placementManager"),s=e("./sticky"),c=e("./adhesion"),l=e("./side-banner"),u=e("./app-open"),p=e("./out-of-page"),g=e("../tcf");function m(e,t,i){void 0===i&&(i=0);var n=document.querySelectorAll(t.conf.containerElementSelector);if(!n.length&&i<20)return setTimeout(function(){return m(e,t,++i)},100);for(var o=n.length;-1<--o;){var r,s=n[o];(t.tu||"inside"!==t.conf.elementSelectorPosition)&&(1===t.conf.sizes[0].width&&1===t.conf.sizes[0].height&&(r=(0,a.getElementSize)(s),t.conf.sizes[0].width=r.width,t.conf.sizes[0].height=r.height),r=document.createElement("div"),"inside"===t.conf.elementSelectorPosition?s.insertBefore(r,s.firstChild):s.parentNode.insertBefore(r,"before"===t.conf.elementSelectorPosition?s:s.nextSibling),(s=r).style.width=t.conf.sizes[0].width+"px",r.style.height=t.conf.sizes[0].height+"px",r.style.clear="both",t.tu)&&(r.style.position="absolute",r.style.pointerEvents="none"),d.createAdUnit({id:e,element:s,scriptWindow:window,window:window})}}function h(){var i=r.config.znl;(0,a.foreach)(i,function(e){var t=i[e];if(!t.dc||-1!==t.dc.toLowerCase().indexOf(n.DeviceType[r.config.device].toLowerCase()))switch(n.AdUnitType[t.type||"normal"]){case n.AdUnitType.normal:case n.AdUnitType.sticky:t.conf.containerElementSelector&&m(parseInt(e),t);break;case n.AdUnitType.bottom:(t.tu||g.TcfIntegration.isAllowed())&&c.create(e,t);break;case n.AdUnitType.side:t.conf&&t.conf.sizes&&t.conf.sizes.length&&l.create(e,t);break;case n.AdUnitType.appOpen:t.conf.containerElementSelector&&m(parseInt(e),t),new u.AppOpen(e,t.conf);break;case n.AdUnitType.verification:g.TcfIntegration.isAllowed()&&p.OutOfPage.create(e,t)}})}},{"../../common/eventManager":4,"../../common/parameters":5,"../../common/utilities":7,"../../interfaces/enums":9,"../placementManager":33,"../tcf":39,"./adhesion":17,"./app-open":18,"./out-of-page":20,"./side-banner":21,"./sticky":22}],20:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.OutOfPage=void 0;var o=e("../../common/eventManager"),s=e("../../common/timers"),n=e("../placementManager"),a=e("../browserStateTracker");function r(e,t){this.format=t,this.init(e)}r.prototype.init=function(e){this.container=document.createElement("div"),this.container.setAttribute("id","iat-oop-"+this.format),this.container.setAttribute("iat-oop-format",this.format),this.container.style.width="1px",this.container.style.height="1px",this.container.style.display="none",document.body.appendChild(this.container),this.id=n.createAdUnit({id:e,element:this.container,scriptWindow:window,window:window,firstPrint:!0})},r.prototype.delete=function(e){this.container.parentElement===document.body&&document.body.removeChild(this.container),o.unlisten(21,this.bannerChangedHandler),e.delete()},r.prototype.bannerChangedHandler=function(e){var t;e.id!==this.id||(t=e.getCurrentEntry())&&!t.isEmpty()||this.delete(e)},r.createUnits=function(i,e){var n=this;e.forEach(function(e,t){n.instances.push(new r(parseInt(i),e));e=n.instances[t];o.listen(21,e.bannerChangedHandler.bind(e))})},r.create=function(e,t){var i,n=this,t=t.conf||{},o=t.oopFormats||["int"],r=t.minEngagedTime||0;o.length&&(i=s.interval(function(){a.getEngagedTime()>=1e3*r&&(s.clear(i),n.createUnits(e,o))},10))},r.instances=[],i.OutOfPage=r},{"../../common/eventManager":4,"../../common/timers":6,"../browserStateTracker":12,"../placementManager":33}],21:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.create=function(e,t){var i=!0;if(t.conf.mustContainAdUnits&&0<t.conf.mustContainAdUnits.length){i=!1;for(var n=0;n<t.conf.mustContainAdUnits.length&&!(i=!!r.getAdUnit(e+".00"));n++);}if(t.conf.cannotContainAdUnits&&0<t.conf.cannotContainAdUnits.length&&i)for(n=0;n<t.conf.cannotContainAdUnits.length&&(i=!r.getAdUnit(e+".00"));n++);i&&new a(e,t)};var n=e("../../interfaces/enums"),o=e("../../common/utilities"),r=e("../placementManager"),s=e("../../common/eventManager"),a=(d.prototype.showAdZone=function(){var e;this.element?(this.element.style.display="block",(e=r.getAdUnit(this.id+".00"))&&e.updateViewState()):(this.element=document.createElement("div"),this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.isTracking?this.element.style.pointerEvents="none":this.element.style.zIndex=this.zIndex,document.body.appendChild(this.element),"absolute"===this.isSticky?(this.element.style.position="absolute",this.element.style.top=this.top+"px"):(window.addEventListener("scroll",this.checkPosition.bind(this)),this.checkPosition()),r.createAdUnit({id:parseInt(this.id),element:this.element,scriptWindow:window,window:window}))},d.prototype.hideAdZone=function(){var e=r.getAdUnit(this.id+".00");e&&this.element&&(this.element.style.display="none",e.updateViewState())},d.prototype.checkPosition=function(){var e;this.element&&(e=o.getViewport(),this.footerDist&&e.top+this.height>o.getDocumentHeight()-this.footerDist?this.currPos!==n.SideBannerPosition.Bottom&&(this.element.style.position="absolute",this.element.style.top="",this.element.style.bottom=this.footerDist+"px",this.element.offsetParent.style.position||(this.element.offsetParent.style.position="relative"),this.currPos=n.SideBannerPosition.Bottom):e.top+this.fixDist<this.top&&this.currPos!==n.SideBannerPosition.Top?(this.element.style.position="absolute",this.element.style.top=this.top+"px",this.element.style.bottom="",this.currPos=n.SideBannerPosition.Top):e.top+this.fixDist>=this.top&&this.currPos!==n.SideBannerPosition.Fixed&&(this.element.style.position="fixed",this.element.style.top=this.fixDist+"px",this.element.style.bottom="",this.currPos=n.SideBannerPosition.Fixed))},d.prototype.findPosition=function(){for(var e=this.dockElem.offsetLeft,t=this.dockElem;t.offsetParent&&"BODY"!==t.offsetParent.nodeName.toUpperCase();)e+=(t=t.offsetParent).offsetLeft;return"left"===this.position?e-this.width-10+this.offset:e+10+o.getElementSize(this.dockElem).width+this.offset},d.prototype.reposition=function(){var e;this.element&&(e=this.findPosition(),this.element.style.left=e+"px")},d.prototype.fits=function(){return this.findPosition()>-1*this.width*(1-this.visibilityRatio)&&this.findPosition()<o.getViewport().width-this.width*this.visibilityRatio},d.prototype.onResize=function(){this.fits()?(this.showAdZone(),this.reposition()):this.hideAdZone()},d);function d(e,t){this.currPos=n.SideBannerPosition.None;var i=document.querySelector(t.conf.dockElementSelector);i&&(this.id=e,this.dockElem=i,this.position=t.conf.position||"right",this.width=t.conf.sizes[0].width,this.height=t.conf.sizes[0].height,this.visibilityRatio=(t.conf.visib||50)/100,this.offset=t.conf.horizontalOffset,this.zIndex=t.conf.zindex||"1",this.isSticky=t.conf.type||"dynamic",this.top=t.conf.initialTopOffset||0,this.footerDist=t.conf.footerDist||0,this.fixDist=t.conf.stickyTopOffset||0,this.isTracking=t.tu||!1,this.onResize(),s.listen(2,this.onResize.bind(this)))}},{"../../common/eventManager":4,"../../common/utilities":7,"../../interfaces/enums":9,"../placementManager":33}],22:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.start=function(){o.listen(18,g),o.listen(19,m),o.listen(2,p),window.addEventListener("scroll",u),o.listen(8,function(){for(c=!0;0<d.length;)l(d.pop())})};var n=e("../../interfaces/enums"),o=e("../../common/eventManager"),r=e("../../common/parameters"),s=e("../../common/utilities"),a={},d=[],c=!1;function l(e){var t={element:e.element,position:e.position,top:e.position.top,left:e.position.left,cssPosition:e.element.style.position,cssLeft:e.element.style.left?parseInt(e.element.style.left.substring(0,e.element.style.left.length-2)):0,cssWidth:e.element.style.width,cssTop:e.element.style.top,cssTextAlign:e.element.style.textAlign,cssMargin:e.element.style.margin,cssZIndex:e.element.style.zIndex,parent:e.element.parentNode,stickyOffsetTop:e.config.topOffset,bottomThreshold:e.config.bottomHeight,stickyZIndex:e.config.zindex,isSticky:!1,isAtBottom:!1,closed:!1,isTracking:e.isTrackingUnit};a[e.id]=t,u(),e.updateViewState()}function u(){var t=s.getViewport(),i=s.getDocumentHeight();s.foreach(a,function(e){e=a[e];e.isSticky||e.isAtBottom||(e.top=e.position.absTop,e.left=e.position.left),e.closed||(e.isSticky&&t.top+e.stickyOffsetTop<=e.top&&(e.element.style.position=e.cssPosition,e.element.style.left=e.cssLeft+"px",e.element.style.top=e.cssTop,e.element.style.width=e.cssWidth,e.element.style.textAlign=e.cssTextAlign,e.element.style.margin=e.cssMargin,e.isTracking||(e.element.style.zIndex=e.cssZIndex),e.isSticky=!1,e.isAtBottom=!1),e.isSticky&&i-t.top-e.stickyOffsetTop-e.position.height<e.bottomThreshold?(e.element.style.position="fixed",e.element.style.top="",e.element.style.bottom=e.bottomThreshold+"px",e.isTracking||(e.element.style.zIndex=e.stickyZIndex||"2147483647"),e.isSticky=!1,e.isAtBottom=!0):!e.isSticky&&t.top+e.stickyOffsetTop>e.top&&i-t.top-e.stickyOffsetTop-e.position.height>=e.bottomThreshold&&(e.element.style.position="fixed",e.element.style.bottom="",e.element.style.left=e.left+"px",e.element.style.top=e.stickyOffsetTop+"px",e.element.style.margin="0px",e.isTracking||(e.element.style.zIndex=e.stickyZIndex||"2147483647"),e.isSticky=!0,e.isAtBottom=!1))})}function p(){s.foreach(a,function(e){for(var e=a[e],t=e.parent.offsetLeft+e.cssLeft,i=e.parent;"HTML"!==i.nodeName&&i.offsetParent;)t+=(i=i.offsetParent).offsetLeft;e.position.left=t,e.isSticky&&(e.element.style.left=t+"px")})}function g(e){r.config.device!==n.DeviceType.Mobile&&e.type===n.AdUnitType.sticky&&(c?l(e):d.push(e))}function m(e){c||-1<(e=d.indexOf(e))&&d.splice(e,1)}},{"../../common/eventManager":4,"../../common/parameters":5,"../../common/utilities":7,"../../interfaces/enums":9}],23:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.ApsIntegration=void 0;var n=e("../tcf"),o=e("../../common/timers"),r=e("./utils");function s(){}s.getInstance=function(){return s.instance=s.instance?s.instance:new s},s.isEnabled=function(e){return e.window.apstag&&e.window.apstag._storeManager&&e.window.apstag._storeManager.config&&!!e.window.apstag._storeManager.config.getConfig().adServer},s.load=function(e){n.TcfIntegration.gdprApplies()&&e.window!==window.top&&n.TcfIntegration.loadProxy(e.window),s.getInstance().loadAps(e)},s.prototype.loadAps=function(e){var t;e.window.apstag||((t=e.window.document.createElement("script")).innerText='!function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");',e.window.document.getElementsByTagName("head")[0].appendChild(t),e.window.apstag.init({pubID:"6f354287-be81-4032-bf64-3a62262fb72f",adServer:"googletag"}))},s.bid=function(e,t){n.TcfIntegration.gdprApplies()?s.getInstance().waitForTcfToMakeBidRequest(e,t):s.getInstance().makeBidRequest(e,t)},s.prototype.waitForTcfToMakeBidRequest=function(e,t){var i=this;n.TcfIntegration.isAvailable(e.window)?n.TcfIntegration.waitToBeAvailable(e.window,function(){return i.makeBidRequest(e,t)}):o.timeout(function(){return i.waitForTcfToMakeBidRequest(e,t)},0)},s.prototype.makeBidRequest=function(t,i){this.clearKeyValues(t),t.window.apstag.fetchBids({slots:[{slotID:t.slot.getSlotElementId(),slotName:t.slot.getAdUnitPath(),sizes:t.sizes}],timeout:s.BID_TIMEOUT},function(e){switch((0<e.length?e[0]:{amznbid:"2"}).amznbid){case"0":case"1":case"2":i(!1);break;default:t.window.googletag.cmd.push(function(){t.window.apstag.setDisplayBids(),i(!0)})}})},s.prototype.clearKeyValues=function(e){r.GamUtils.clearTargetingKeys(e.slot,["amznbid","amznp","amzniid","amznsz"])},s.BID_TIMEOUT=1e3,i.ApsIntegration=s},{"../../common/timers":6,"../tcf":39,"./utils":30}],24:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.AssertiveIntegration=void 0;var n=e("../../common/utilities"),o=e("../../common/parameters");function r(){}r.getInstance=function(){return r.instance=r.instance?r.instance:new r},r.load=function(e){r.getInstance().loadScript(e)},r.prototype.loadScript=function(e){e.window.assertive={debug:!0,entityId:o.config.assertive,analytics:{integrations:{webAnalytics:!0},logUnfilled:!0,custom:{}}};var t=n.BrowserUtils.getScriptElement("https://"+o.config.assertive+".ay.delivery/client-v2.js");e.window.document.getElementsByTagName("head")[0].appendChild(t)},i.AssertiveIntegration=r},{"../../common/parameters":5,"../../common/utilities":7}],25:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.markSlotEvent=v,i.pushMappingRequest=function e(t,i,n,o,r){void 0===r&&(r=0);if(!p.GamUtils.isIntegratedSlotPath(t.getAdUnitPath()))return;var s=p.GamUtils.generateUniqueId(t,i);var a=h(i,t);if(!a)return;var d=p.GamUtils.parseServedSize(t,a,n);if(!n&&d.isBlank())return;var c=+new Date;r=r||c;if(d.isTooSmall()&&c-r<1e3)return void l.timeout(function(){return e(t,i,n,o,r)},0);if(y(s,"mapping")){if(!n)return;if(n&&g[s])return}v(s,"mapping");if(d.isBlank())return void((c=a.getAttribute("tg-zone"))&&u.emit(22,c));n||v(s,"page-load");f(t,i,a,s,d,o)},i.pushInternalMappingRequest=function(e,t,i,n){var o=p.GamUtils.generateUniqueId(e,t);f(e,t,n.element,o,i,n.id,!0)},i.start=function(){l.timeout(w,0),l.timeout(I,0)};var l=e("../../common/timers"),r=e("../../common/utilities"),d=e("../../common/parameters"),s=e("../placementManager"),u=e("../../common/eventManager"),p=e("./utils"),a=25,n={},g={},c=[],m=window._mappingResponses=[];function h(e,t){e=e.document&&e.document.getElementById(t.getSlotElementId());if(e)return t.getOutOfPage()?e:e.querySelector("div[id^=google_ads_iframe_][id$=container__]")}function f(e,t,i,n,o,r,s){void 0===s&&(s=!1),p.GamUtils.addBeacon(e,"init");var a=e.getResponseInformation(),a={createdOn:+new Date,retryOn:0,eaUp:e.getAdUnitPath(),eoId:a&&a.campaignId?a.campaignId:void 0,eolId:a&&a.lineItemId?a.lineItemId:void 0,advId:a&&a.advertiserId?a.advertiserId:void 0,ecId:a&&a.creativeId?a.creativeId:void 0,ct:((n,o)=>{var r,e=d.getGamIntegration();if((e=e&&e.keyValues)&&e.length)return r={},e.forEach(function(t){var e=n.getTargeting(t),e=(e&&e.length&&(r[t]=e),o.googletag.pubads()),i=e.getTargetingKeys().filter(function(e){return e===t&&!r[t]});i&&i.length&&e.getTargeting(i[0])&&(r[t]=e.getTargeting(i[0]))}),encodeURIComponent(JSON.stringify(r).replace(new RegExp('"',"g"),"'"))})(e,t)||void 0,w:o.width||void 0,h:o.height||void 0,eId:n,im:s?1:0};g[n]={element:i,parentAdUnitId:r,width:a.w||0,height:a.h||0,lineItemId:a.eolId||0,creativeId:a.ecId||0,orderId:a.eoId||0,win:t,slot:e},c.push(a)}function y(e,t){e=n[e]||{};return("mapping"===t?e.mapping:e.impression)||!1}function v(e,t){n[e]=n[e]||{},"mapping"===t?n[e].mapping=!0:n[e].impression=!0}function w(){var e,t=[],i=[];try{for(;c.length&&t.length<a;){var n,o=c.shift();o&&(1e4<(n=+new Date)-o.createdOn?o.eId:(y(o.eId,"impression")?(o.createdOn=o.retryOn=void 0,t):(1e3<n-o.retryOn&&(o.createdOn,o.eId,o.retryOn=n),i)).push(o))}c.push.apply(c,i),t.length&&(e=d.config.rootPath+"/dfp/mapping/batch?appId="+d.config.appId+"&requests="+JSON.stringify(t)+"&h="+encodeURIComponent(r.BrowserUtils.getTopMostPageUrl())+(d.config.extension?"&trc=1":"")+"&ts="+ +new Date+"",r.BrowserUtils.buildRequestByUrl(e))}catch(e){}finally{l.timeout(w,0)}}function I(){try{for(;m.length;){var e,t,i,n=m.pop(),o=g[n.eid||""];n.eid&&o&&o.slot&&(delete g[n.eid],e=((e,t)=>{try{var i=t.element,n=t.win||i.ownerDocument.defaultView,o=(e.scriptWindow=n||void 0,e.window=n||void 0,e.element=i,e);return o.cw=t.width,o.ch=t.height,o.gamAdUnit=!0,o.orderId=t.orderId,e.eolid?(o.lineItemId=e.eolid,o.creativeId=-1):(o.lineItemId=t.lineItemId,o.creativeId=t.creativeId),o}catch(e){}})(n,o))&&(p.GamUtils.addBeacon(o.slot,"imp"),(t=o.parentAdUnitId||o.slot.getOutOfPage()&&o.element.getAttribute("tg-zone"))?(i=s.getAdUnit(t))&&i.loadOnCurrentAdUnit(e,o.slot):s.createAdUnit(e))}}finally{l.timeout(I,0)}}},{"../../common/eventManager":4,"../../common/parameters":5,"../../common/timers":6,"../../common/utilities":7,"../placementManager":33,"./utils":30}],26:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.start=function(){s(),o.start()};var n=e("../../common/timers"),o=e("./mapping-service"),r=e("./utils");function s(){var e;r.GamUtils.isGptAvailable(window)?(a(window),(e=r.GamUtils.getFramesWithGpt()).forEach(a),n.timeout(function(){d(window),e.forEach(d)},2e3)):n.timeout(s,0)}function a(t){t.googletag.pubads().addEventListener("slotOnload",function(e){e=r.GamUtils.generateUniqueId(e.slot,t);o.markSlotEvent(e,"load-event")}),t.googletag.pubads().addEventListener("slotRenderEnded",function(e){o.pushMappingRequest(e.slot,t,e)})}function d(t){r.GamUtils.isGptAvailable(t)&&t.googletag.pubads().getSlots().forEach(function(e){return o.pushMappingRequest(e,t)})}},{"../../common/timers":6,"./mapping-service":25,"./utils":30}],27:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.PrebidIntegration=void 0;var o=e("./utils");function n(){}n.getInstance=function(){return n.instance=n.instance?n.instance:new n},n.isEnabled=function(e){return!!n.getInstance().getPreBidCode(e)},n.bid=function(e,t){n.getInstance().makeBidRequest(e,t)},n.prototype.makeBidRequest=function(e,t){o.GamUtils.clearTargetingKeys(e.slot,[],"hb_");var i=this.getPreBidCode(e),n=window.pbjs;n.que.push(function(){n.requestBids({timeout:n.getConfig().bidderTimeout,adUnitCodes:[i],bidsBackHandler:function(e){n.setTargetingForGPTAsync([i]),t(e&&e.length)}})})},n.prototype.getPreBidCode=function(e){var t=e.window.top&&e.window.top.pbjs;if(t&&t.adUnits){var i=e.entry.adUnit.slot;if(i)return 0<=t.adUnits.findIndex(function(e){return e.code===i.getAdUnitPath()})?i.getAdUnitPath():0<=t.adUnits.findIndex(function(e){return e.code===i.getSlotElementId()})?i.getSlotElementId():void 0}},i.PrebidIntegration=n},{"./utils":30}],28:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.PwtIntegration=void 0;var o=e("../../common/timers"),n=e("../../common/parameters"),r=e("../../common/utilities"),s=e("../tcf");function a(){}a.getInstance=function(){return a.instance=a.instance?a.instance:new a},a.load=function(e,t){e.window.PWT={},e.window.PWT.jsLoaded=function(){return t()};var i=r.BrowserUtils.getScriptElement(this.getInstance().getUrl());e.window.document.getElementsByTagName("head")[0].appendChild(i)},a.prototype.getUrl=function(){var e=window.location.href,t="",e=(0<e.indexOf("pwtv=")?(e=/pwtv=(.*?)(&|$)/g.exec(e))&&2<=e.length&&0<e[1].length&&(t="/"+e[1]):!s.TcfIntegration.gdprApplies()&&n.config.pwt&&n.config.pwt.noCmpProfile&&(t="/"+n.config.pwt.noCmpProfile.toString()),n.config.sellerId);return a.BaseUrl+t+"/pwt.js?sid="+e},a.registerExternalBidders=function(e,t){var i=this;e.window.OWT?e.data.externalNotifyId=e.window.OWT.registerExternalBidders([t]):o.timeout(function(){return i.registerExternalBidders(e,t)},0)},a.notifyExternalBiddingComplete=function(e,t){var i=this;e.window.OWT?(e.data.externalBidderSuccess=t,e.window.OWT.notifyExternalBiddingComplete(e.data.externalNotifyId)):o.timeout(function(){return i.notifyExternalBiddingComplete(e,t)},0)},a.bid=function(e,t,i){var n=this;3<(i=void 0===i?0:i)?t(e.data.externalBidderSuccess):e.window.PWT&&"function"==typeof e.window.PWT.requestBids?a.getInstance().makeBidRequest(e,t):o.timeout(function(){return n.bid(e,t,++i)},0)},a.prototype.makeBidRequest=function(t,i){t.window.PWT.setAuctionTimeout(a.BID_TIMEOUT),t.window.PWT.requestBids(t.window.PWT.generateConfForGPT(t.window.googletag.pubads().getSlots()),function(e){t.window.PWT.addKeyValuePairsToGPTSlots(e);e=1<=e.length&&0<Object.keys(e[0].bidData.kvp).length;i(e||t.data.externalBidderSuccess)})},a.BaseUrl="//ads.pubmatic.com/AdServer/js/pwt/162930/9578",a.BID_TIMEOUT=1e3,i.PwtIntegration=a},{"../../common/parameters":5,"../../common/timers":6,"../../common/utilities":7,"../tcf":39}],29:[function(require,module,exports){var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},enums_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.GamRenderApi=void 0,require("../../interfaces/enums")),configuration_1=require("../../interfaces/configuration"),utils_1=require("./utils"),aps_1=require("./aps"),pwt_1=require("./pwt"),prebid_1=require("./prebid"),assertive_1=require("./assertive"),Timers=require("../../common/timers"),Parameters=require("../../common/parameters"),MappingService=require("./mapping-service"),PlacementManager=require("../placementManager"),unitInfoManager_1=require("../unitInfoManager"),UseCaseType,OopFormat,GamRenderApi=((e=>{e[e.Undetermined=0]="Undetermined",e[e.Refresh=1]="Refresh",e[e.NewInsideHouseAdUnit=2]="NewInsideHouseAdUnit",e[e.NewInsideIntegratedSlot=3]="NewInsideIntegratedSlot",e[e.OutOfPage=4]="OutOfPage"})(UseCaseType=UseCaseType||{}),(e=>{e[e.Unknown=0]="Unknown",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom",e[e.Interstitial=5]="Interstitial",e[e.Left=8]="Left",e[e.Right=9]="Right"})(OopFormat=OopFormat||{}),function(){function GamRenderApi(){}return GamRenderApi.getInstance=function(){return GamRenderApi.instance||(GamRenderApi.instance=new GamRenderApi),GamRenderApi.instance},GamRenderApi.render=function(e){var t;"object"!=typeof e.cd?(t={entry:e},GamRenderApi.getInstance().abortRequest(t)):((t=e.cd).entry=e,t.window=e.currentFrame.contentWindow,t.data={},GamRenderApi.getInstance().render(t))},GamRenderApi.prototype.render=function(t){var e=this;try{utils_1.GamUtils.waitForMainGpt(function(){e.parseContextAndModel(t),t.useCase===UseCaseType.Undetermined?e.abortRequest(t):t.useCase===UseCaseType.Refresh?e.refreshSlot(t):e.loadGptAndCreateSlot(t)||e.abortRequest(t)})}catch(e){this.abortRequest(t)}},GamRenderApi.prototype.parseContextAndModel=function(e){e.useCase=UseCaseType.Undetermined,e.pathSuffixIndex=-1,e.pathSuffixes=[];var t=e.entry.adUnit.slot&&e.entry.adUnit.slot.getResponseInformation(),t=(e.servedLineItemId=t&&t.lineItemId&&t.lineItemId.toString()||"",0<e.entry.iatCw&&0<e.entry.iatCh&&(e.fixedSize=[e.entry.iatCw,e.entry.iatCh]),e.gptWindow=e.window,e.entry.adUnit.type===enums_1.AdUnitType.verification);if(t&&(e.oopFormat=this.getOutOfPageSlotFormat(e)),e.entry.adUnit.slot&&e.entry.adUnit.isIntegration){if(e.entry.isPublisherMarket()||t)return e.useCase=UseCaseType.Refresh,e.slot=e.entry.adUnit.slot,this.parseNewSlotSizes(e),e.gptWindow=utils_1.GamUtils.getGptWindow(e.window),void(e.window=window);e.useCase=UseCaseType.NewInsideIntegratedSlot}else t?(e.useCase=UseCaseType.OutOfPage,e.window=window,e.gptWindow=window):e.useCase=UseCaseType.NewInsideHouseAdUnit;this.parseNewSlotPath(e),this.parseNewSlotSizes(e)},GamRenderApi.prototype.parseNewSlotPath=function(e){var t,i;e.paths&&(i=enums_1.DeviceType[Parameters.config.device].toLowerCase(),i=e.paths[i]||e.paths.default)&&""!==i.trim()&&((t=e.paths.suffixes)&&(e.pathSuffixIndex=0,e.pathSuffixes=t.split(",")),i=(t=utils_1.GamUtils.parsePath(i))[1]+t[2],e.path=utils_1.GamUtils.getFinalSlotPath(i),e.networkCode=t[1].split(",")[0].substring(1))},GamRenderApi.prototype.parseNewSlotSizes=function(e){var i,t,n,o,r;e.fixedSize?e.sizes=e.fixedSize:(t=enums_1.DeviceType[Parameters.config.device].toLowerCase(),e.useCase===UseCaseType.NewInsideHouseAdUnit?(e.sizes=e.sizes||{},e.sizes=e.sizes[t]||e.sizes.default||e.entry.adUnit.sizes||[],i=e.entry.adUnit.config,!e.sizes.length&&i&&(e.sizes=i.sizes.map(function(e){return[e.width,e.height]})),i&&(e.sizes=e.sizes.filter(function(t){return 0<=i.sizes.findIndex(function(e){return e.width===t[0]&&e.height===t[1]})}))):e.useCase===UseCaseType.OutOfPage?e.sizes=[1,1]:(e.sizes=e.entry.adUnit.sizes,e.limits&&(t=e.limits[t]||e.limits.default,n=e.entry.adUnit.slot.getSlotElementId(),t)&&t[n]&&(o=t[n][0],r=t[n][1],0<o&&(e.sizes=e.sizes.filter(function(e){return e[0]<=o})),0<r)&&(e.sizes=e.sizes.filter(function(e){return e[1]<=r}))))},GamRenderApi.prototype.getOutOfPageSlotFormat=function(e){switch(e.entry.adUnit.element.getAttribute("iat-oop-format")){case"top":return OopFormat.Top;case"bot":return OopFormat.Bottom;case"int":return OopFormat.Interstitial;case"left":return OopFormat.Left;case"right":return OopFormat.Right;default:return OopFormat.Unknown}},GamRenderApi.prototype.loadGptAndCreateSlot=function(e){return!!(e.path&&e.sizes&&e.sizes.length)&&(e.ay&&assertive_1.AssertiveIntegration.load(e),e.gptWindow.googletag=e.gptWindow.googletag||{cmd:[]},this.defineSecureSignals(e),e.aps&&aps_1.ApsIntegration.load(e),e.pwt?pwt_1.PwtIntegration.load(e,function(){return utils_1.GamUtils.loadGpt(e.window)}):e.useCase!==UseCaseType.OutOfPage&&utils_1.GamUtils.loadGpt(e.window),this.createSlotAndRequestAd(e),!0)},GamRenderApi.prototype.createSlotAndRequestAd=function(t){var i=this,n=t.gptWindow.googletag,e=0<=t.pathSuffixIndex?"/"+t.pathSuffixes[t.pathSuffixIndex]:"",o=t.path+e;n.cmd.push(function(){var e;i.configPublisherProvidedSignals(t),t.useCase===UseCaseType.OutOfPage?t.slot=n.defineOutOfPageSlot(o,t.oopFormat):t.slot=n.defineSlot(o,t.sizes,utils_1.GamUtils.getSlotDiv(t.gptWindow)),t.slot?(t.useCase!==UseCaseType.OutOfPage&&t.fixedSize&&(e=n.sizeMapping().addSize([0,0],t.fixedSize).build(),t.slot.defineSizeMapping(e)),t.slot.addService(n.pubads()),t.aps&&t.pwt&&pwt_1.PwtIntegration.registerExternalBidders(t,t.slot.getSlotElementId()),i.setTargeting(t,t.useCase!==UseCaseType.OutOfPage),t.useCase!==UseCaseType.OutOfPage&&(n.pubads().enableSingleRequest(),n.pubads().disableInitialLoad(),n.enableServices()),t.pathSuffixIndex<=0&&(n.pubads().addEventListener("slotOnload",function(e){return i.slotOnloadHandler(e,t)}),n.pubads().addEventListener("slotRenderEnded",function(e){return i.slotRenderEndedHandler(e,t)})),t.aps||t.pwt?(t.aps&&aps_1.ApsIntegration.bid(t,function(e){t.pwt?pwt_1.PwtIntegration.notifyExternalBiddingComplete(t,e):!e&&t.validateBid?i.abortRequest(t):i.proceedWithRequest(t)}),t.pwt&&pwt_1.PwtIntegration.bid(t,function(e){!e&&t.validateBid?i.abortRequest(t):i.proceedWithRequest(t)})):i.proceedWithRequest(t)):i.abortRequest(t)})},GamRenderApi.prototype.slotOnloadHandler=function(e,t){e.slot===t.slot&&(e=utils_1.GamUtils.generateUniqueId(e.slot,t.gptWindow),MappingService.markSlotEvent(e,"load-event"))},GamRenderApi.prototype.slotRenderEndedHandler=function(i,n){var o=this;if(i.slot===n.slot)return i.isEmpty?0<=n.pathSuffixIndex&&n.pathSuffixIndex+1<n.pathSuffixes.length?(n.pathSuffixIndex++,void this.createSlotAndRequestAd(n)):void this.abortRequest(n):void this.parseServedSize(n,i,0,function(e){var t;e.isBlank()?o.abortRequest(n):(t=o.getAdUnitConfig(n,e),n.useCase===UseCaseType.OutOfPage?o.createOopAdUnit(n,t):(n.entry.resize(e,!0),n.entry.isPublisherMarket()||n.entry.setServedData(t),(t=n.entry.adUnit)&&(unitInfoManager_1.UnitInfoManager.getInfo(t).commitContext(),n.entry.isPublisherMarket()?MappingService.pushMappingRequest(n.slot,n.window,i,t.id):unitInfoManager_1.UnitInfoManager.getInfo(t).monetizingContext.isRemarketing&&MappingService.pushInternalMappingRequest(n.slot,n.window,e,t))))})},GamRenderApi.prototype.getAdUnitConfig=function(e,t){e=e.slot.getResponseInformation(),t={cw:t.width,ch:t.height,lineItemId:e&&e.lineItemId||0,creativeId:e&&e.creativeId||0,orderId:e&&e.campaignId||0},e=utils_1.GamUtils.getLineItemId(t.orderId,t.lineItemId);return e!==t.lineItemId&&(t.lineItemId=e,t.creativeId=-1),t},GamRenderApi.prototype.createOopAdUnit=function(e,t){var i,n,o,r=window.document.getElementById(e.slot.getSlotElementId());r&&(r=r.querySelector("div[id^=google_ads_iframe_][id$=container__]"))&&(i=e.entry.adUnit,n=parseInt(i.adUnitId),o=i.element.getAttribute("iat-oop-format")||"",e.oopFormat!==OopFormat.Interstitial&&(r.setAttribute("iat-oop-format",o),PlacementManager.createAdUnit(__assign(__assign({},t),{id:n,element:r,scriptWindow:window,window:window,dnr:i.doNotRotate,firstPrint:!1,gamAdUnit:!0,eid:utils_1.GamUtils.generateUniqueId(e.slot,window)}))),i.element.parentElement===document.body&&document.body.removeChild(i.element),i.delete())},GamRenderApi.prototype.parseServedSize=function(e,t,i,n){var o=this;if(e.fixedSize)return r=new configuration_1.Size(e.fixedSize[0],e.fixedSize[1]),n(r);var r=utils_1.GamUtils.parseServedSize(t.slot,e.window.document,t),s=+new Date;i=i||s,r.isTooSmall()&&s-i<3e3?Timers.timeout(function(){return o.parseServedSize(e,t,i,n)},0):(r.isTooSmall()&&(r.width=0,r.height=0),n(r))},GamRenderApi.prototype.abortRequest=function(e){e.entry.onAbortedRequest(),e.entry.passback()},GamRenderApi.prototype.proceedWithRequest=function(e){e.entry.onProceedWithRequest(),e.gptWindow.googletag.pubads().refresh([e.slot])},GamRenderApi.prototype.copyMainCustomTargetingToLocalInstance=function(e){var t,i,n;utils_1.GamUtils.isGptAvailable(window)&&(i=(t=window.googletag.pubads())&&t.getTargetingKeys())&&i.length&&(n=e.gptWindow.googletag.pubads(),i.forEach(function(e){n.setTargeting(e,t.getTargeting(e))}),e.useCase===UseCaseType.NewInsideIntegratedSlot)&&this.copyCustomTargetingToNewSlot(e)},GamRenderApi.prototype.copyCustomTargetingToNewSlot=function(e,t){void 0===t&&(t=!0);var i=e.entry.adUnit.slot,n=i.getTargetingMap();t?(i.getTargetingKeys().filter(function(e){return e.startsWith("hb_")}).forEach(function(e){return i.clearTargeting(e)}),n=i.getTargetingMap()):Object.keys(n).filter(function(e){return!e.startsWith("hb_")}).forEach(function(e){return delete n[e]}),e.slot.updateTargetingFromMap(n)},GamRenderApi.prototype.setTargeting=function(e,t){e.entry.isPublisherMarket()?this.setTargetingOnPublisherSlot(e,t):this.setTargetingOnHouseSlot(e)},GamRenderApi.prototype.setTargetingOnPublisherSlot=function(e,t){t&&this.copyMainCustomTargetingToLocalInstance(e);var i={};if(e.customTarget&&(e.customTargetInAllSlots||e.useCase===UseCaseType.NewInsideHouseAdUnit))if("string"==typeof e.customTarget)try{i=JSON.parse(e.customTarget)}catch(e){}else i=e.customTarget;var i=utils_1.GamUtils.getFinalTargetingMap(i),n="iat-imp-app",o="iat-app",r="iat-app-line-id",s="iat-imp-app-slot",a="iat-imp-maw",d="iat-maw",c="iat-maw-line-id",l=unitInfoManager_1.UnitInfoManager.getInfo(e.entry.adUnit).pendingContext;l.isMaw?(utils_1.GamUtils.clearTargetingKeys(e.slot,[n,o,r,s]),i[a]=["1"],i[d]=[l.mawId.toString()],e.servedLineItemId&&(i[c]=[e.servedLineItemId])):(utils_1.GamUtils.clearTargetingKeys(e.slot,[a,d,c]),(!t||0<e.entry.index)&&(i[n]=["1"],i[o]=[Parameters.config.appId.toString()],e.servedLineItemId&&(i[r]=[e.servedLineItemId]),l=parseInt(e.slot.getTargeting(s)[0]||"0"),e.slot.setTargeting(s,[(l+1).toString()]))),e.slot.updateTargetingFromMap(i),this.processSuffixKeys(e)},GamRenderApi.prototype.setTargetingOnHouseSlot=function(e){e.slot.setTargeting("iat-section",[Parameters.config.sectionId.toString()]),e.entry.isFirstHouseRequest&&e.slot.setTargeting("iat-req",["1"]);var t=unitInfoManager_1.UnitInfoManager.getInfo(e.entry.adUnit).pendingContext,t=(t.isMaw&&(t.parentMawId&&e.slot.setTargeting("iat-parent-maw",[t.parentMawId.toString()]),e.slot.setTargeting("iat-maw-slot",[t.slot.toString()]),0<t.stage)&&(e.slot.setTargeting("iat-r-maw",[t.parentMawId+":"+t.stage]),e.slot.setTargeting("iat-imp-r-maw",["1"])),e.slot.getOutOfPage()&&e.slot.setTargeting("iat-oop",[e.oopFormat.toString()]),Parameters.config.iabContentIds),t=(t&&t.length&&e.slot.setTargeting("iat-iab-content",t),Parameters.config.iabAudienceIds);t&&t.length&&e.slot.setTargeting("iat-iab-audience",t)},GamRenderApi.prototype.applyLayoutShiftSize=function(e){var t,i,n,o,r,s=e.fixedSize;s&&(t=e.gptWindow.googletag,i=e.slot.getAdUnitPath(),n=e.slot.getSlotElementId(),o=e.slot.getTargetingMap(),t.destroySlots([e.slot]),t.pubads().getSlotIdMap()[e.slot.getSlotId().getId()]||((r=document.getElementById(n))&&(r.style.minWidth=s[0]+"px",r.style.minHeight=s[1]+"px"),r=t.sizeMapping().addSize([0,0],s).build(),e.slot=t.defineSlot(i,s,n).defineSizeMapping(r).addService(t.pubads()),e.slot.updateTargetingFromMap(o),e.window=window))},GamRenderApi.prototype.processSuffixKeys=function(e){for(var t=e.suffixKeys||[],i=0;i<t.length;i++){for(var n=t[i],o=n[0],r=n[1],s=new RegExp("(("+r+")?$)","i"),a=e.slot.getTargeting(o),d=a.length;-1<--d;)a[d]=a[d].replace(s,r);e.slot.setTargeting(o,a)}},GamRenderApi.prototype.refreshSlot=function(e){this.applyLayoutShiftSize(e),this.setTargeting(e,!1),this.isCustomRefreshEnabled(e)||this.requestHeaderBids(e,function(){e.gptWindow.googletag.pubads().refresh([e.slot],{changeCorrelator:!1})})},GamRenderApi.prototype.requestHeaderBids=function(e,t){var i=aps_1.ApsIntegration.isEnabled(e),n=prebid_1.PrebidIntegration.isEnabled(e);if(!i&&!n)return t(!1);var o={requestSent:!1,aps:!i,prebid:!n};function r(e){return void 0===e&&(e=!1),!o.requestSent&&(o.aps&&o.prebid||e)?t(o.requestSent=!0):void 0}i&&aps_1.ApsIntegration.bid(e,function(){o.aps=!0,r()}),n&&prebid_1.PrebidIntegration.bid(e,function(){o.prebid=!0,r()});Timers.timeout(function(){return r(!0)},3e3)},GamRenderApi.prototype.isCustomRefreshEnabled=function(model){var customRefresh=Parameters.config.crm,refreshFunc;return customRefresh?(refreshFunc=eval("window."+customRefresh),"function"==typeof refreshFunc&&(refreshFunc(model.slot.getSlotElementId()),!0)):!1},GamRenderApi.prototype.defineSecureSignals=function(e){var t=e.gptWindow.googletag;t.secureSignalProviders=t.secureSignalProviders||[],t.secureSignalProviders.push({networkCode:e.networkCode,collectorFunction:function(){return new Promise(function(e,t){e(Parameters.config.lockedId)})}})},GamRenderApi.prototype.configPublisherProvidedSignals=function(e){var t=Parameters.config.iabContentIds;t&&t.length&&e.gptWindow.googletag.setConfig({pps:{taxonomies:{IAB_CONTENT_2_2:{values:t}}}})},GamRenderApi}());exports.GamRenderApi=GamRenderApi},{"../../common/parameters":5,"../../common/timers":6,"../../interfaces/configuration":8,"../../interfaces/enums":9,"../placementManager":33,"../unitInfoManager":41,"./aps":23,"./assertive":24,"./mapping-service":25,"./prebid":27,"./pwt":28,"./utils":30}],30:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.GamUtils=void 0;var o,n=e("../../common/parameters"),s=e("../../common/utilities"),r=e("../../interfaces/configuration"),a=e("../../common/timers");function d(e){return!!(e&&e.googletag&&e.googletag.pubadsReady)&&!("function"!=typeof(e=e.googletag.pubads)||!e()||"function"!=typeof e().getSlots||!e().getSlots())}function c(e){var t=[];return e&&e.getSizes().forEach(function(e){e.width&&t.push([e.width,e.height])}),t}function l(e){var e=(e=e||"").toLowerCase().split("/").filter(function(e){return""!==e.trim()}),t=e.shift()||"";return[t.split(",").some(function(e){return e===((e=n.getGamIntegration())&&e.networkCode)}),"/"+t,"/"+e.join("/")]}function u(e){return-1<e.indexOf("[[")&&-1<e.indexOf("]]")}(o=i.GamUtils={}).isGptAvailable=d,o.waitForMainGpt=function(e,t){var i=this,n=(void 0===t&&(t=0),+new Date);n-(t=t||n)<=2e3&&!o.isGptAvailable(window.top)?a.timeout(function(){return i.waitForMainGpt(e,t)},500):e()},o.getFramesWithGpt=function(){for(var e,t,i=[],n=window.frames,o=0;o<n.length;o++)try{var r=n[o];d(r)&&(i.push(r),e=r,t=void 0,t=s.CryptoUtils.generateIatFrameId(),e.frameElement)&&e.frameElement.setAttribute("iat-fid",t)}catch(e){}return i},o.generateUniqueId=function(e,t){for(var i=t.self!==window.top?(t=t).frameElement&&t.frameElement.getAttribute("iat-fid")||"inn":"main",n=e.getSlotId().getId().split("/").filter(function(e){return""!==e.trim()}),o=1;o<n.length;o++)i+="_"+n[o];return i.toLowerCase()},o.getGptWindow=function(e){return e.googletag?e:e.parent.googletag?e.parent:e.top},o.getSlotId=function(e){var t=e.getAttribute("id")||"";return(t=t.indexOf("google_ads_iframe_")<0?(e=e.querySelector("div[id^=google_ads_iframe_][id$=container__]"))&&e.getAttribute("id")||"":t).replace("google_ads_iframe_","").replace("__container__","")},o.getSlotSizes=function(e){return c(e).map(function(e){return e[0]+"x"+e[1]})},o.getNumericSlotSizes=c,o.parseServedSize=function(e,t,i){return(t=t.querySelector("iframe[id$='"+e.getSlotId().getId()+"']"))&&t.style&&"none"===t.style.display||!t||i&&i.isEmpty?new r.Size(0,0):(e=i&&i.size?new r.Size(i.size[0],i.size[1]):new r.Size(1,1)).isTooSmall()&&(i=0<=(i=t.style.width||t.getAttribute("width")||"0").indexOf("%")?"0":i,e.width=(0,s.tryParseInt)(i),i=0<=(i=t.style.height||t.getAttribute("height")||"0").indexOf("%")?"0":i,e.height=(0,s.tryParseInt)(i),e.isTooSmall())?(0,s.getElementSize)(t):e},o.getIntegratedSlots=function(e){var i;return o.isGptAvailable(window)?(i=e?l(e):void 0,window.googletag.pubads().getSlots().filter(function(e){var t=l(e.getAdUnitPath());return!t[0]||i&&i[2]!==t[2]?void 0:e})):[]},o.isIntegratedSlotPath=function(e){return l(e)[0]},o.getFinalSlotPath=function(e){if(!e||""===e.trim())return"";if(u(e)){for(var t=e.split("/").filter(function(e){return""!==e.trim()}),i=0;i<t.length;i++){var n,o=t[i];u(o)&&((n=o.replace("[[","").replace("]]","").toUpperCase()).startsWith("LEVEL")&&(o=(n=>{if(window.top&&d(window.top))for(var o=window.top.googletag.pubads().getSlots(),e=0;e<o.length;e++){var t=(e=>{if(e=o[e].getAdUnitPath().split("/").filter(function(e){return""!==e.trim()}),n.startsWith("-")){var t=parseInt(n.substr(1));if(e.length>t)return{value:e[t]}}if(n.startsWith(">")){var i=parseInt(n.substr(1))+1;if(e.length>i)return{value:e.filter(function(e,t){return i<=t}).join("/")}}})(e);if("object"==typeof t)return t.value}return""})(n.replace("LEVEL",""))),t[i]=o)}e="/"+t.join("/")}return e=e.startsWith("/")?e:"/"+e},o.getFinalTargetingMap=function(n){return d(window.top)&&Object.keys(n).filter(u).forEach(function(e){var t=e.replace("[[","").replace("]]",""),i=window.top.googletag.pubads();0<i.getTargeting(t).length?n[t]=i.getTargeting(t):(i=0<i.getSlots().length&&i.getSlots()[0])&&(n[t]=i.getTargeting(t)),delete n[e]}),n},o.parsePath=l,o.getLineItemId=function(e,t){void 0===(t=t||0)&&(t=-1);var i="22954957514";return+((e=void 0===(e=e||0)?-1:e)<0&&t<0?"22954957514":(i+="0000",0<e&&0<=[3229605288,3227618554,3228017495].indexOf(e)?i+"4":0===t||0<e&&0<=[3231700959].indexOf(e)?i+"100":t.toString()))},o.loadGpt=function(e){var t=s.BrowserUtils.getScriptElement("https://securepubads.g.doubleclick.net/tag/js/gpt.js");e.document.getElementsByTagName("head")[0].appendChild(t)},o.getSlotDiv=function(e){var t="div-gpt-ad-"+ +new Date+"-0",i=e.document.createElement("div");return i.setAttribute("id",t),e.document.getElementsByTagName("body")[0].appendChild(i),t},o.clearTargetingKeys=function(t,e,i){var n=t.getTargetingKeys();e.forEach(function(e){(-1<n.indexOf(e)||i&&e.startsWith(i))&&t.clearTargeting(e)})},o.addBeacon=function(e,t){var i=null==e?void 0:e.getResponseInformation();i&&i.lineItemId&&(e=e.getAdUnitPath(),i=i.lineItemId.toString(),n.config.dbg)&&n.config.dbg[i]&&(t=n.config.rootPath+"/core/cs/"+t+"?path="+encodeURIComponent(e)+"&lineItemId="+i+"&url="+encodeURIComponent(s.BrowserUtils.getTopMostPageUrl()),s.BrowserUtils.generateBeacon(t))}},{"../../common/parameters":5,"../../common/timers":6,"../../common/utilities":7,"../../interfaces/configuration":8}],31:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.MawManager=void 0;var r=e("./placementManager");function n(){}n.start=function(){window.addEventListener("message",n.onMessageReceived,!1)},n.onMessageReceived=function(e){if(e&&e.data&&e.data.type){var t=e.data;switch(t.type){case"iat-maw-registration-request":t.uniqueId&&t.mawId&&n.registrationResponse(t.uniqueId);break;case"iat-maw-registration-acknowledge":t.uniqueId&&t.mawId&&t.adUnitId&&n.registrationAcknowledge(t.mawId,t.adUnitId)}}},n.registrationResponse=function(e){n.broadcastToAllAdUnits({type:"iat-maw-registration-response",uniqueId:e})},n.registrationAcknowledge=function(e,t){var t=r.getAdUnit(t);t&&(t=t.getCurrentEntry())&&t.setParentMawId(e)},n.broadcastToAllAdUnits=function(n){var o=this;r.getAdUnits().forEach(function(e){var t,i=e.getCurrentEntry();if(i&&i.currentFrame&&i.currentFrame.contentWindow)t=i.currentFrame;else{i=e.element.getElementsByTagName("iframe");if(0===i.length)return;t=i[0]}t&&t.contentWindow&&(n.adUnitId=e.id,o.nestedPostMessage(t.contentWindow,n))})},n.nestedPostMessage=function(e,t,i){if(void 0===i&&(i=0),e){e.postMessage(t,"*");for(var n=0;n<e.frames.length;n++)this.nestedPostMessage(e.frames[n],t,i+1)}},i.MawManager=n},{"./placementManager":33}],32:[function(e,t,i){function n(e){this.placementManager=e}Object.defineProperty(i,"__esModule",{value:!0}),i.PassbackManager=void 0,n.prototype.start=function(){window.addEventListener("message",this.messageListener.bind(this))},n.prototype.messageListener=function(e){e=e.data;e&&e.type&&e.adUnitId&&e.model&&"iat-passback"===e.type&&this.processPassback(e)},n.prototype.processPassback=function(e){var t=this,i=this.placementManager.getAdUnit(e.adUnitId);i&&(i.slot?(i.addTargetingMap(e.model.ct),i.enableRotation(),i.nextBanner({tag:"passback",ignoreDoNotRotate:!0})):window.setTimeout(function(){return t.processPassback(e)},100))},i.PassbackManager=n},{}],33:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.PlacementManagerAPI=void 0,i.getAdUnits=y,i.createAdUnit=v,i.deleteAdUnit=S,i.deleteHouseAdUnits=C,i.getAdUnit=T,i.start=function(){if(h.extend(h.ApiModule.PlacementManager,new P),window.__tgunits)for(var e=window.__tgunits.length;-1<--e;)v(window.__tgunits[e]);window.__tgunits={push:v,length:0},r=1e3*(s.config.mpi||30),a.listen(1,M),a.listen(2,M),a.listen(17,b),a.listen(11,b),a.listen(21,b),a.listen(19,b),a.listen(13,w),a.listen(14,I)};var n,o,r,s=e("./../common/parameters"),a=e("../common/eventManager"),d=e("./browserStateTracker"),c=e("./classes/adUnit"),l=e("../interfaces/enums"),u=e("./../common/utilities"),p=e("./../common/timers"),g=e("./realtime-messaging/types"),m=e("./realtime-messaging/realtimeMessaging"),h=e("./api"),f={};function y(){var t=[];return(0,u.foreach)(f,function(e){return t.push(T(e))}),t}function v(e){var t,i,n;return!e.id||(t=(s.config.znl||{})[e.id.toString()]||{}).dc&&-1===t.dc.toLowerCase().indexOf(l.DeviceType[s.config.device].toLowerCase())?"":(i=-1,n=new RegExp("^"+e.id+"\\.(\\d+)$"),(0,u.foreach)(f,function(e){e=n.exec(e);e&&(i=Math.max(i,parseInt(e[1])))}),e=new c.AdUnit(e,t,++i),f[e.id]=e,a.emit(18,e),e.id)}function w(e){var t;e.adUnitId&&(e=T(e.adUnitId))&&(t=e.getCurrentEntry())&&t.iatOlId&&(t.isPublisherMarket()||(e.onServerRotation(),t.buildNewImpressionLoggingRequest()))}function I(e){var t;e.adUnitId&&e.mawId&&e.slot&&(t=T(e.adUnitId))&&t.onMawRotation({tag:"server:maw",parentMawId:e.parentMawId,mawId:e.mawId,ruleId:e.ruleId,slot:e.slot,stage:e.stage,ignoreDoNotRotate:!0})}function b(){p.clear(o),o=p.timeout(function(){var i=new g.StatusData(d.getCurrentState());(0,u.foreach)(f,function(e){var t=T(e),e=e+(t.isInView()?":1":":0")+(t.isInView(!0)?":1":":0");t.isTrackingUnit?i.trackingUnits.push(e):(t=t.getCurrentEntry(),i.adUnits.push(e),i.iatCreatives.push(t&&t.iatCId?t.iatCId.toString():""),i.iatOrderLines.push(t&&t.iatOlId?t.iatOlId.toString():""),i.impressionSlots.push(t?t.index:0),i.sizes.push(t?t.getServedSize():""),i.mawIds.push(t?t.getMawInfoForSnap():""),i.lineItemIds.push(t?t.getLineItemInfoForSnap():""),i.creativeIds.push(t&&t.creativeId?t.creativeId.toString():""),i.impressionIds.push(t&&t.iid?t.iid:""),i.orderIds.push(t&&t.orderId?t.orderId.toString():""))}),m.RealtimeMessaging.sendStatusUpdate(i),p.clear(n),n=p.interval(function(){return m.RealtimeMessaging.sendStatusUpdate(i)},r)},0)}function M(){var t=!1;(0,u.foreach)(f,function(e){return t=T(e).updateViewState()||t}),t&&b()}function S(e){var t=T(e);delete f[e],t&&a.emit(19,t)}function C(){y().filter(function(e){return!e.isIntegration}).forEach(function(e){return e.delete()})}function T(e){return f[e]}U.prototype.getAdUnits=y,U.prototype.createAdUnit=v,U.prototype.deleteAdUnit=function(e){S(e)},U.prototype.deleteHouseAdUnits=function(){C()},U.prototype.getAdUnit=T;var P=U;function U(){}i.PlacementManagerAPI=P},{"../common/eventManager":4,"../interfaces/enums":9,"./../common/parameters":5,"./../common/timers":6,"./../common/utilities":7,"./api":11,"./browserStateTracker":12,"./classes/adUnit":13,"./realtime-messaging/realtimeMessaging":36,"./realtime-messaging/types":37}],34:[function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=(Object.defineProperty(i,"__esModule",{value:!0}),i.UpdateUrlMessage=i.ThirdPartyGetMessage=i.ThirdPartySetMessage=i.PotentialMessage=i.StatusMessage=i.BaseMessage=void 0,e("../../common/parameters")),e=(s.prototype.addField=function(e){this.fields[this.fields.length]=e},s.prototype.isValid=function(){return this.getNow()-this.createdOn<1e3*s.EXPIRED_IN_SECONDS},s.prototype.toString=function(){return[this.getNow().toString()].concat(this.fields).join(s.SEPARATOR)},s.prototype.getNow=function(){var e=(r.config.cts||r.config.ts)-r.config.ts;return+new Date+e},s.prototype.getAction=function(e){switch(e){case 0:return"snap  ";case 1:return"pimp  ";case 2:return"pvimp ";case 3:return"ptgi  ";case 4:return"rrptgi";case 5:return"p3set ";case 6:return"p3get ";case 7:return"url   "}},s.SEPARATOR="|",s.EXPIRED_IN_SECONDS=10,s);function s(e,t,i){this.createdOn=0,this.fields=[],this.createdOn=this.getNow(),this.addField(this.createdOn.toString()),this.addField(e?"1":"0"),this.addField(this.getAction(t)),this.addField((i||r.config.sectionId).toString())}i.BaseMessage=e;o(c,a=e);var a,d=c;function c(e,t,i){e=a.call(this,e,0,i)||this;return e.addField(t.state.valueOf().toString()),e.addField(t.trackingUnits.join(",")),e.addField(t.adUnits.join(",")),e.addField(t.iatCreatives.join(",")),e.addField(t.iatOrderLines.join(",")),e.addField(t.impressionSlots.join(",")),e.addField(t.sizes.join(",")),e.addField(t.mawIds.join(",")),e.addField(t.lineItemIds.join(",")),e.addField(t.creativeIds.join(",")),e.addField(t.impressionIds.join(",")),e.addField(t.orderIds.join(",")),e}i.StatusMessage=d;o(u,l=e);var l,d=u;function u(e,t,i){e=l.call(this,e,t.type,i)||this;return e.addField(t.id),e.addField(t.isTracking?"1":"0"),t.rules&&(e.addField(t.rules.type),e.addField(t.rules.ruleIds.join(","))),e}i.PotentialMessage=d;o(g,p=e);var p,d=g;function g(e){var t=p.call(this,!1,5)||this;return t.addField(JSON.stringify(e.id)),t.addField(JSON.stringify(e.data)),t}i.ThirdPartySetMessage=d;o(h,m=e);var m,d=h;function h(e){var t=m.call(this,!1,6)||this;return t.addField(e.type),t.addField(e.supplier),t.addField(e.supplierId),t.addField(e.aggregation),"metrics"===e.type&&t.addField(e.metrics.join(",")),"score"===e.type&&t.addField(e.scoringMode),t}i.ThirdPartyGetMessage=d;o(y,f=e);var f,d=y;function y(e){var t=f.call(this,!1,7)||this;return t.addField(e),t}i.UpdateUrlMessage=d},{"../../common/parameters":5}],35:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.MultiplierDemo=void 0;var r=e("./messages"),s=e("./types"),a=e("../../interfaces/enums"),d=e("../../common/utilities"),c=e("./realtimeMessaging");function l(e){this.realtimeProvider=e,this.secondaryConnections=[]}l.start=function(e){this.instance=new l(e)},l.sendMessage=function(e){if(void 0===e&&(e=0),this.instance&&0!==this.instance.secondaryConnections.length&&this.instance.secondaryData){var t,i,n=this.instance.secondaryData,o=0===e?(t=.5<=Math.random()?1:0,(i=new s.StatusData(t?a.BrowserState.Active:a.BrowserState.Inactive)).trackingUnits=n.trackingUnitIds.map(function(e){return e+":00:"+t}),i.adUnits=n.adUnitIds.map(function(e){return e+":00:"+t}),i.impressionSlots=n.adUnitIds.map(function(e){return 0}),new r.StatusMessage(!0,i,n.sectionId)):(i={type:e,id:((i=.5<=Math.random())?n.trackingUnitIds:n.adUnitIds)[0].toString(),isTracking:i},4===e&&(i.rules={type:"dfp",ruleIds:n.rotationRuleIds}),new r.PotentialMessage(!0,i,n.sectionId));try{this.instance.secondaryConnections.forEach(function(e){e.isConnected()&&e.send(o.toString())})}catch(e){}}},l.handleMessage=function(e){var t;d.Cookies.readCookie(d.Cookies.RealtimeMultiplierCookieName)||(t=e.duration,e.action=e.duration=e.targeting=void 0,d.Cookies.createCookie(d.Cookies.RealtimeMultiplierCookieName,JSON.stringify(e),t),this.startConnections(e))},l.checkConnections=function(){var e=d.Cookies.readCookie(d.Cookies.RealtimeMultiplierCookieName);e&&(e=JSON.parse(e),this.startConnections(e))},l.startConnections=function(t){var e=this;if(this.instance.secondaryData=t,0===this.instance.secondaryConnections.length)for(var i=0;i<t.multiplier;i++){var n=l.instance.realtimeProvider.createInstance();this.instance.secondaryConnections.push(n)}this.instance.secondaryConnections.forEach(function(e){e.isConnected()||e.connect(c.RealtimeMessaging.getHubUrl(t.applicationId,t.hosts))});var o=window.setInterval(function(){d.Cookies.readCookie(d.Cookies.RealtimeMultiplierCookieName)||(e.stopConnections(),window.clearInterval(o))},5e3)},l.stopConnections=function(){this.instance.secondaryConnections.forEach(function(e){e.disconnect()})},i.MultiplierDemo=l},{"../../common/utilities":7,"../../interfaces/enums":9,"./messages":34,"./realtimeMessaging":36,"./types":37}],36:[function(e,t,i){var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},o=(Object.defineProperty(i,"__esModule",{value:!0}),i.RealtimeMessaging=void 0,e("./messages")),r=e("./types"),s=e("../../common/eventManager"),a=e("../../common/parameters"),d=e("../../common/timers"),c=e("./multiplierDemo"),l=e("../api"),u=e("../../common/utilities"),p=e("../third-party-integration");function g(){var i=this;this._messageBuffer=[],this.receiveMessage=function(e){try{var t=JSON.parse(e);switch(t.action){case"tgiNotice":case"iat-imp":(0,s.emit)(13,t);break;case"maw-cap":(0,s.emit)(14,t);break;case"p3-resp":p.ThirdPartyIntegration.handleResponse(t);break;case"taxonomy":a.updateContext(t);break;case"show-square":i.isTargeted(t)&&(0,s.emit)(15,t);break;case"rotate-ads":i.isTargeted(t)&&(0,s.emit)(16,t);break;case"realtime-multiplier":i.isTargeted(t)&&c.MultiplierDemo.handleMessage(t)}}catch(e){}},this.receiveDemoMessage=function(e){try{var t=JSON.parse(e);"show-square"===t.action&&(0,s.emit)(15,t)}catch(e){}},this.onConnect=function(){i._isConnected=!0,(0,s.emit)(11,+new Date),c.MultiplierDemo.checkConnections()},this.onFailedConnect=function(){g.start()},this.onDisconnect=function(){(i._isConnected=!1,s.emit)(12,+new Date),c.MultiplierDemo.stopConnections()}}g.start=function(e){var t,i=this;void 0===e&&(e=0),g.instance=g.instance||new g,g.realtimeProvider=g.realtimeProvider||l.get(l.ApiModule.RealtimeProvider),a.config.messagingEnabled&&(g.realtimeProvider?(t=+new Date,e=e||t,!a.config.lockedId&&t-e<2e3?setTimeout(function(){return i.start(e)},200):(g.instance.primaryConnection=g.realtimeProvider.createInstance(),g.instance.initialize(),c.MultiplierDemo.start(g.realtimeProvider),(0,s.listen)(23,function(){return g.connect()}),(0,s.listen)(24,function(){return g.disconnect()}))):setTimeout(function(){return i.start()},100))},Object.defineProperty(g,"isForcedDisconnected",{get:function(){return g.instance._forceDisconnect},enumerable:!1,configurable:!0}),g.connect=function(){try{g.instance._forceDisconnect=!1,g.instance.primaryConnection.isConnected()||g.instance.primaryConnection.connect(g.getHubUrl())}catch(e){g.instance.errorLog(e)}},g.disconnect=function(){try{g.instance.primaryConnection.disconnect(),g.instance._forceDisconnect=!0}catch(e){g.instance.errorLog(e)}},g.getHubUrl=function(e,t){var i=a.config.messagingPath;return e?t&&0<t.length&&(i=t[Math.round(Math.random()*(t.length-1))]):e=a.config.appId,i?i+"/hub?appId="+e+"&lockedId="+a.config.lockedId+"&url="+this.getPageUrl()+"&dev="+a.config.d_type+"&br="+a.config.d_browser+"&os="+a.config.d_os+"&cc="+a.config.g_country+"&rc="+a.config.g_region+"&ct="+a.config.g_city+"&isp="+(a.config.g_isp||"")+"&ht=1&v=0.5":""},g.sendStatusUpdate=function(e){g.instance.flushQueue(),g.instance.sendMessage(new o.StatusMessage(!1,e)),c.MultiplierDemo.sendMessage()},g.sendPotentialLog=function(e){g.instance.flushQueue(),g.instance.sendMessage(new o.PotentialMessage(!1,e)),c.MultiplierDemo.sendMessage(e.type)},g.sendThirdPartyMessage=function(e){var t=this;g.instance?(g.instance.flushQueue(),e instanceof r.ThirdPartySetModel&&g.instance.sendMessage(new o.ThirdPartySetMessage(e)),e instanceof r.ThirdPartyGetModel&&g.instance.sendMessage(new o.ThirdPartyGetMessage(e))):d.timeout(function(){t.sendThirdPartyMessage(e)},1e3)},g.sendUpdateUrlMessage=function(){g.instance.flushQueue(),g.instance.sendMessage(new o.UpdateUrlMessage(this.getPageUrl()),"Update")},g.sendDemoMessage=function(e){g.instance.sendMessage(e,"Demo")},g.getPageUrl=function(){return encodeURIComponent(u.BrowserUtils.getTopMostPageUrl())},g.prototype.sendMessage=function(t,i){var n=this;try{if(this._isConnected)return this.primaryConnection.send(t.toString(),i).then().catch(function(e){i||n._messageBuffer.push(t)});i||this._messageBuffer.push(t)}catch(e){this.errorLog(e)}},g.prototype.flushQueue=function(){var e,t=this;this._isConnected&&0!==this._messageBuffer.length&&(e=n([],this._messageBuffer,!0),this._messageBuffer=[],e.filter(function(e){return e.isValid()}).forEach(function(e){return t.sendMessage(e)}))},g.prototype.isTargeted=function(e){e=e.targeting;if(e){if(0<e.accountId&&e.accountId!==a.config.acId)return!1;if(0<e.applicationId&&e.applicationId!==a.config.appId)return!1;if(e.geo){var t=e.geo.countryCode&&a.config.g_country!==e.geo.countryCode,e=e.geo.regionCode&&a.config.g_region!==e.geo.regionCode;if(t||e)return!1}}return!0},g.prototype.initialize=function(){var t=this;try{this.primaryConnection.onConnect=this.onConnect,this.primaryConnection.onFailedConnect=this.onFailedConnect,this.primaryConnection.onDisconnect=this.onDisconnect,this.primaryConnection.onReceiveMessage=this.receiveMessage,this.primaryConnection.onReceiveDemoMessage=this.receiveDemoMessage,this.primaryConnection.onLogMessage=function(e){return t.errorLog(e)},this.primaryConnection.connect(g.getHubUrl())}catch(e){this.errorLog(e)}},g.prototype.errorLog=function(e){e&&e.message},i.RealtimeMessaging=g},{"../../common/eventManager":4,"../../common/parameters":5,"../../common/timers":6,"../../common/utilities":7,"../api":11,"../third-party-integration":40,"./messages":34,"./multiplierDemo":35,"./types":37}],37:[function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.DemoMessageModel=i.ThirdPartyResponseModel=i.ThirdPartyGetModel=i.ThirdPartyGetBaseModel=i.ThirdPartySetModel=i.StatusData=i.MessageType=void 0,i.MessageType={Status:0,0:"Status",PotentialImpression:1,1:"PotentialImpression",PotentialViewable:2,2:"PotentialViewable",PotentialRotation:3,3:"PotentialRotation",PotentialRotationByRule:4,4:"PotentialRotationByRule",ThirdPartySet:5,5:"ThirdPartySet",ThirdPartyGet:6,6:"ThirdPartyGet",UpdateUrl:7,7:"UpdateUrl"};function r(e,t){this.id=e,this.data=t}function s(){}i.StatusData=function(e){this.state=e,this.trackingUnits=[],this.adUnits=[],this.iatCreatives=[],this.iatOrderLines=[],this.impressionSlots=[],this.sizes=[],this.mawIds=[],this.lineItemIds=[],this.creativeIds=[],this.impressionIds=[],this.orderIds=[]},i.ThirdPartySetModel=r;o(c,a=i.ThirdPartyGetBaseModel=s);var a,d=c;function c(e,t,i){var n=a.call(this)||this;return n.type=e,n.supplier=t,n.supplierId=i,n}i.ThirdPartyGetModel=d;o(u,l=s);var l,d=u;function u(){return null!==l&&l.apply(this,arguments)||this}function p(){}i.ThirdPartyResponseModel=d,p.prototype.toString=function(){return JSON.stringify(this)},i.DemoMessageModel=p},{}],38:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.SinglePageApplicationManager=void 0;var n=e("../common/parameters"),o=e("./placementManager"),r=e("../common/utilities"),s=e("../common/timers"),a=e("./realtime-messaging/realtimeMessaging");function d(e){this.DISCARD_URL_ENDING_WITH="#google_vignette",this.eventManager=e}d.prototype.start=function(){n.config.lastScrollTime=0,this.previousUrl=r.BrowserUtils.getTopMostPageUrl(),s.interval(this.checkLocationChanged.bind(this),10),window.addEventListener("scroll",this.updateLastScroll.bind(this))},d.prototype.checkLocationChanged=function(){var e=r.BrowserUtils.getTopMostPageUrl();this.previousUrl===e||e.endsWith(this.DISCARD_URL_ENDING_WITH)||(this.previousUrl=e,this.performInitRequest(),a.RealtimeMessaging.sendUpdateUrlMessage())},d.prototype.isScrolling=function(){var e=(new Date).getTime();return n.config.lastScrollTime&&e<n.config.lastScrollTime+500},d.prototype.updateLastScroll=function(){n.config.lastScrollTime=(new Date).getTime()},d.prototype.performInitRequest=function(){var t=this,e=n.config.rootPath+"/init?appId="+n.config.publicId+"&h="+encodeURIComponent(r.BrowserUtils.getTopMostPageUrl())+"&ls=0&t="+ +new Date;r.BrowserUtils.buildRequestByUrl(e,function(e){t.processInitResponse(e.__tgconf),window.__tginitcb&&window.__tginitcb()})},d.prototype.processInitResponse=function(e){e&&(e.sectionId===n.config.sectionId&&this.isScrolling()||o.deleteHouseAdUnits(),n.updateConfiguration(e),this.eventManager.emit(8,null))},i.SinglePageApplicationManager=d},{"../common/parameters":5,"../common/timers":6,"../common/utilities":7,"./placementManager":33,"./realtime-messaging/realtimeMessaging":36}],39:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.TcfIntegration=void 0;var n=e("../common/parameters"),o=e("../common/utilities");function r(){}r.gdprApplies=function(){var e=n.config;return e.tcData&&e.tcData.gdprApplies},r.isAllowed=function(){var e=n.config;return!e.tcData||!e.tcData.gdprApplies||e.consent},r.loadProxy=function(e){o.BrowserUtils.attachScriptToElement("/iat-tcf-api-proxy.js",e.document.head,!1)},r.isAvailable=function(e){return!!e.__tcfapi},r.waitToBeAvailable=function(i,n){i.__tcfapi("addEventListener",2,function(e,t){!t||"useractioncomplete"!==e.eventStatus&&"tcloaded"!==e.eventStatus||(i.__tcfapi("removeEventListener",2,function(){},e.listenerId),n())})},i.TcfIntegration=r},{"../common/parameters":5,"../common/utilities":7}],40:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.ThirdPartyIntegration=void 0;var n=e("./api"),o=e("./realtime-messaging/types"),r=e("./realtime-messaging/realtimeMessaging"),a=e("./../common/timers"),s=(Object.defineProperty(d.prototype,"expired",{get:function(){return 1e3<+new Date-this.start},enumerable:!1,configurable:!0}),d);function d(){this.start=+new Date}l.getInstance=function(){return this.instance||(this.instance=new l),this.instance},l.start=function(){var e=n.ApiModule.ThirdPartyIntegration,t=null==(t=n.get(e))?void 0:t.cmd,i=new u;n.extend(e,i),t&&t.forEach(function(e){return e()})},l.setId=function(e,t){var i=this.getInstance();i.idMap[e]=t,r.RealtimeMessaging.sendThirdPartyMessage(new o.ThirdPartySetModel(i.idMap,i.dataMap))},l.setData=function(e,t){var i=this.getInstance();i.dataMap[e]=t,r.RealtimeMessaging.sendThirdPartyMessage(new o.ThirdPartySetModel(i.idMap,i.dataMap))},l.getRequest=function(e,t){var i=this.getInstance(),n=i.getRequestKey(e);return i.requestMap[n]&&!i.requestMap[n].expired?new Promise(function(e,t){return t("too many requests")}):(i.requestMap[n]=new s,e.aggregation=t.aggregation,"metrics"===e.type&&(e.metrics=t.metrics),"score"===e.type&&(e.scoringMode=t.scoringMode),r.RealtimeMessaging.sendThirdPartyMessage(e),i.returnGetResult(n,t))},l.handleResponse=function(e){var t=this.getInstance(),i=t.getRequestKey(e);t.requestMap[i]&&(t.requestMap[i].metrics=e.metrics,t.requestMap[i].end=+new Date)},l.prototype.getRequestKey=function(e){return e.type+e.supplier+e.supplierId},l.prototype.returnGetResult=function(i,n){var o,r=this,s=0;return new Promise(function(t,e){o=a.timeout(function(){a.clear(s),e("timeout")},1e3*n.timeout),s=a.interval(function(){var e=r.requestMap[i];e&&e.metrics&&(delete r.requestMap[i],a.clear(o),a.clear(s),e={metrics:e.metrics,elapsed:e.end-e.start},t(e))},0)})},l.DEFAULT_TIMEOUT_IN_SECONDS=2;var c=l;function l(){this.idMap={},this.dataMap={},this.requestMap={}}i.ThirdPartyIntegration=c;p.prototype.setId=function(e,t){c.setId(e,t)},p.prototype.setData=function(e,t){c.setData(e,t)},p.prototype.getScore=function(e,t,i){e=new o.ThirdPartyGetModel("score",e,t);return(i=i||{}).aggregation=i.aggregation||"app",i.scoringMode=i.scoringMode||"enhanced",i.timeout=i.timeout||c.DEFAULT_TIMEOUT_IN_SECONDS,c.getRequest(e,i)};var u=p;function p(){this.cmd=new g}m.prototype.push=function(e){e()};var g=m;function m(){}},{"./../common/timers":6,"./api":11,"./realtime-messaging/realtimeMessaging":36,"./realtime-messaging/types":37}],41:[function(e,t,i){function n(){this.adUnitInfo={}}Object.defineProperty(i,"__esModule",{value:!0}),i.UnitInfoManager=void 0,n.getInstance=function(){return this.instance||(this.instance=new n),this.instance},n.prototype.addAndGetInfo=function(e){e=e.getUniqueId();return this.adUnitInfo[e]||(this.adUnitInfo[e]=new o),this.adUnitInfo[e]},n.getInfo=function(e){return this.getInstance().addAndGetInfo(e)},i.UnitInfoManager=n;r.prototype.initializePending=function(e){var t=this.pendingContext;e=e||this.monetizingContext,t.rotationRuleId=e.rotationRuleId,t.ruleId=e.ruleId,t.parentMawId=e.parentMawId,t.mawId=e.mawId,t.slot=e.slot,t.stage=e.stage},r.prototype.rollbackContext=function(){var e=this.pendingContext;e.rotationRuleId=0,e.ruleId=0,e.parentMawId=0,e.mawId=0,e.slot=0,e.stage=0},r.prototype.commitContext=function(e){var t=this.pendingContext,i=this.monetizingContext;i.rotationRuleId=e||t.rotationRuleId,i.ruleId=t.ruleId,i.parentMawId=t.parentMawId,i.mawId=t.mawId,i.slot=t.slot,i.stage=t.stage};var o=r;function r(){this.index=0,this.ignoreNewImpression=!1,this.pendingContext=new s,this.monetizingContext=new s}Object.defineProperty(a.prototype,"isMaw",{get:function(){return 0<this.mawId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isRemarketing",{get:function(){return 0<this.stage},enumerable:!1,configurable:!0});var s=a;function a(){}},{}]},{},[3]);
</script>

</body>
</html>
