<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Worker.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __aB = 'AGFzbQEAAAABiYCAgAACYAAAYAJ/fwADhYCAgAAEAQAAAAWDgICAAAEAAQaGgICAAAF/AUEACwefgICAAAQGbWVtb3J5AgAEYXJyMAABBGFycjEAAgRhcnIyAAMKzoCAgAAEj4CAgAAAIwAgAEEEbGogATYCAAuOgICAAAEBf0EQJABBAEEAEAALjoCAgAABAX9BFCQAQQBBABAAC46AgIAAAQF/QRgkAEEAQQAQAAs=', __wAM = new WebAssembly.Instance(new WebAssembly.Module((() => {
        try {
            let binary_string = atob(__aB), len = binary_string.length, bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binary_string.charCodeAt(i);
            }
            return bytes;
        } catch (err) {
            return new Uint8Array(global.Buffer.from(__aB, 'base64'));
        }
    })()));
const ac = new Map();
const __lA = (pos, stIdx, eIdx) => {
    if (ac.has(pos)) {
        return ac.get(pos);
    } else {
        const sK = `arr${ pos }`;
        __wAM.exports[sK]();
        let mem = new Uint32Array(__wAM.exports.memory.buffer, stIdx, (eIdx - stIdx) / 4 + 1);
        const rA = Array.from(mem);
        ac.set(pos, rA);
        return rA;
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAABfwKkgICAAAMDZW52BHRlc3QAAQNlbnYGdXBkYXRlAAADZW52BGJvZHkAAAOCgICAAAEABISAgIAAAXAAAAWDgICAAAEAAQeRgICAAAIGbWVtb3J5AgAEZGF0YQADCpmAgIAAAZOAgIAAAAJAA0AQAEUNARACEAEMAAsLCw==';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGgYOAgABBfwBBAQt/AEEMC38AQRgLfwBBJAt/AEEwC38AQTwLfwBByAALfwBB1AALfwBB4AALfwBB7AALfwBB9gALfwBBgAELfwBBhgELfwBBkAELfwBBnAELfwBBoAELfwBBpAELfwBBqAELfwBBrAELfwBBsAELfwBBtAELfwBBuAELfwBBvgELfwBBxAELfwBBygELfwBB0AELfwBB1gELfwBB3AELfwBB4AELfwBB5gELfwBB8gELfwBB/gELfwBBigILfwBBjgILfwBBkgILfwBBlgILfwBBmgILfwBBngILfwBBogILfwBBpgILfwBBqgILfwBBrgILfwBBsgILfwBBtgILfwBBwgILfwBBzgILfwBB2gILfwBB3gILfwBB4gILfwBB5gILfwBB8gILfwBB/gILfwBBigMLfwBBlgMLfwBBogMLfwBBrgMLfwBBugMLfwBBwAMLfwBBxgMLfwBB0gMLfwBB3gMLfwBB6gMLfwBB9gMLfwBBggQLfwBBkAQLB8mEgIAAQgZtZW1vcnkCAAVkYXRhMAMABWRhdGExAwEFZGF0YTIDAgVkYXRhMwMDBWRhdGE0AwQFZGF0YTUDBQVkYXRhNgMGBWRhdGE3AwcFZGF0YTgDCAVkYXRhOQMJBmRhdGExMAMKBmRhdGExMQMLBmRhdGExMgMMBmRhdGExMwMNBmRhdGExNAMOBmRhdGExNQMPBmRhdGExNgMQBmRhdGExNwMRBmRhdGExOAMSBmRhdGExOQMTBmRhdGEyMAMUBmRhdGEyMQMVBmRhdGEyMgMWBmRhdGEyMwMXBmRhdGEyNAMYBmRhdGEyNQMZBmRhdGEyNgMaBmRhdGEyNwMbBmRhdGEyOAMcBmRhdGEyOQMdBmRhdGEzMAMeBmRhdGEzMQMfBmRhdGEzMgMgBmRhdGEzMwMhBmRhdGEzNAMiBmRhdGEzNQMjBmRhdGEzNgMkBmRhdGEzNwMlBmRhdGEzOAMmBmRhdGEzOQMnBmRhdGE0MAMoBmRhdGE0MQMpBmRhdGE0MgMqBmRhdGE0MwMrBmRhdGE0NAMsBmRhdGE0NQMtBmRhdGE0NgMuBmRhdGE0NwMvBmRhdGE0OAMwBmRhdGE0OQMxBmRhdGE1MAMyBmRhdGE1MQMzBmRhdGE1MgM0BmRhdGE1MwM1BmRhdGE1NAM2BmRhdGE1NQM3BmRhdGE1NgM4BmRhdGE1NwM5BmRhdGE1OAM6BmRhdGE1OQM7BmRhdGE2MAM8BmRhdGE2MQM9BmRhdGE2MgM+BmRhdGE2MwM/BmRhdGE2NANAC6yGgIAAQQBBAQsKdW5kZWZpbmVkAABBDAsKdW5kZWZpbmVkAABBGAsKdW5kZWZpbmVkAABBJAsKdW5kZWZpbmVkAABBMAsKdW5kZWZpbmVkAABBPAsKdW5kZWZpbmVkAABByAALCnVuZGVmaW5lZAAAQdQACwp1bmRlZmluZWQAAEHgAAsKdW5kZWZpbmVkAABB7AALCGV4dHJ1ZGUAAEH2AAsIcmV0cmFjdAAAQYABCwVtb3ZlAABBhgELCHVua25vd24AAEGQAQsKdW5kZWZpbmVkAABBnAELAngAAEGgAQsCeQAAQaQBCwJ6AABBqAELAmUAAEGsAQsCYQAAQbABCwJiAABBtAELAmMAAEG4AQsEYWJzAABBvgELBGFicwAAQcQBCwRhYnMAAEHKAQsEYWJzAABB0AELBGFicwAAQdYBCwRhYnMAAEHcAQsCZgAAQeABCwRhYnMAAEHmAQsKdW5kZWZpbmVkAABB8gELCnVuZGVmaW5lZAAAQf4BCwp1bmRlZmluZWQAAEGKAgsCZQAAQY4CCwJhAABBkgILAmIAAEGWAgsCYwAAQZoCCwJ4AABBngILAnkAAEGiAgsCegAAQaYCCwJlAABBqgILAmEAAEGuAgsCYgAAQbICCwJjAABBtgILCnVuZGVmaW5lZAAAQcICCwp1bmRlZmluZWQAAEHOAgsKdW5kZWZpbmVkAABB2gILAngAAEHeAgsCeQAAQeICCwJ6AABB5gILCnVuZGVmaW5lZAAAQfICCwp1bmRlZmluZWQAAEH+AgsKdW5kZWZpbmVkAABBigMLCnVuZGVmaW5lZAAAQZYDCwp1bmRlZmluZWQAAEGiAwsKdW5kZWZpbmVkAABBrgMLCnVuZGVmaW5lZAAAQboDCwRhYnMAAEHAAwsEYWJzAABBxgMLCnVuZGVmaW5lZAAAQdIDCwp1bmRlZmluZWQAAEHeAwsKdW5kZWZpbmVkAABB6gMLC3BhcnNlR0NvZGUAAEH2AwsKc2V0T3B0aW9uAABBggQLDWFuYWx5emVNb2RlbAAAQZAECxhVbmtub3duJTIwY29tbWFuZCUzQSUyMAA='].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
var gcode;
var firstReport;
var toolOffsets = [{
        x: 0,
        y: 0
    }];
var z_heights = {};
var model = [];
var max = {
    x: undefined,
    y: undefined,
    z: undefined
};
var min = {
    x: undefined,
    y: undefined,
    z: undefined
};
var modelSize = {
    x: undefined,
    y: undefined,
    z: undefined
};
var filamentByLayer = {};
var totalFilament = __lA(0, 16, 20);
var printTime = 0;
var printTimeByLayer = {};
var layerHeight = 0;
var layerCnt = 0;
var speeds = {
    extrude: [],
    retract: [],
    move: []
};
var speedsByLayer = {
    extrude: {},
    retract: {},
    move: {}
};
var sendLayerToParent = function (layerNum, z, progress) {
    (() => {
        const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    self.postMessage({
                        'cmd': 'returnLayer',
                        'msg': {
                            cmds: model[layerNum],
                            layerNum: layerNum,
                            zHeightObject: {
                                zValue: z,
                                layer: z_heights[z]
                            },
                            isEmpty: false,
                            progress: progress
                        }
                    });
                }
            }
        });
        const __exports = __callInstance18.exports;
        return __exports.data();
    })();
};
var sendMultiLayerToParent = function (layerNum, z, progress) {
    var tmpModel = [];
    var tmpZHeight = {};
    (() => {
        var i = 0;
        const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < layerNum.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        tmpModel[layerNum[i]] = model[layerNum[i]];
                        tmpZHeight[layerNum[i]] = z_heights[z[i]];
                    }
                }
            }
        });
        const __exports = __forInstance0.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    self.postMessage({
                        'cmd': 'returnMultiLayer',
                        'msg': {
                            model: tmpModel,
                            layerNum: layerNum,
                            zHeightObject: {
                                zValue: z,
                                layer: tmpZHeight
                            },
                            isEmpty: false,
                            progress: progress
                        }
                    });
                }
            }
        });
        const __exports = __callInstance17.exports;
        return __exports.data();
    })();
};
var sendSizeProgress = function (progress) {
    (() => {
        const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    self.postMessage({
                        'cmd': 'analyzeProgress',
                        'msg': {
                            progress: progress,
                            printTime: printTime
                        }
                    });
                }
            }
        });
        const __exports = __callInstance16.exports;
        return __exports.data();
    })();
};
var sendAnalyzeDone = function () {
    (() => {
        const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    self.postMessage({
                        'cmd': 'analyzeDone',
                        'msg': {
                            max: max,
                            min: min,
                            modelSize: modelSize,
                            totalFilament: totalFilament,
                            filamentByLayer: filamentByLayer,
                            printTime: printTime,
                            layerHeight: layerHeight,
                            layerCnt: layerCnt,
                            layerTotal: model.length,
                            speeds: speeds,
                            speedsByLayer: speedsByLayer,
                            printTimeByLayer: printTimeByLayer
                        }
                    });
                }
            }
        });
        const __exports = __callInstance15.exports;
        return __exports.data();
    })();
};
var purgeLayers = function () {
    var purge = true;
    (() => {
        var i = 0;
        const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < model.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        purge = true;
                        (() => {
                            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            purge = true;
                                        }
                                    },
                                    impFunc2: () => {
                                        {
                                            (() => {
                                                var j = 0;
                                                const __forInstance2 = new WebAssembly.Instance(__forWasmModule, {
                                                    env: {
                                                        test: () => {
                                                            return j < model[i].length ? 1 : 0;
                                                        },
                                                        update: () => {
                                                            j++;
                                                        },
                                                        body: () => {
                                                            {
                                                                (() => {
                                                                    const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                                                                        env: {
                                                                            impFunc1: () => {
                                                                                purge = false;
                                                                            },
                                                                            impFunc2: () => {
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __ifInstance1.exports;
                                                                    return __exports.data(model[i][j].extrude ? 1 : 0);
                                                                })();
                                                            }
                                                        }
                                                    }
                                                });
                                                const __exports = __forInstance2.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    }
                                }
                            });
                            const __exports = __ifInstance0.exports;
                            return __exports.data(!model[i] ? 1 : 0);
                        })();
                        (() => {
                            const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            layerCnt += 1;
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance2.exports;
                            return __exports.data(!purge ? 1 : 0);
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance1.exports;
        return __exports.data();
    })();
};
var analyzeModel = function () {
    var tmp1 = 0, tmp2 = 0;
    var speedIndex = 0;
    var type;
    var printTimeAdd = 0;
    for (var i = 0; i < model.length; i++) {
        var cmds = model[i];
        if (!cmds)
            continue;
        (() => {
            var j = 0;
            const __forInstance3 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return j < cmds.length ? 1 : 0;
                    },
                    update: () => {
                        j++;
                    },
                    body: () => {
                        {
                            var tool = cmds[j].tool;
                            var x_ok = false;
                            var y_ok = false;
                            (() => {
                                const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                var x = cmds[j].x;
                                                max.x = max.x !== undefined ? Math.max(max.x, x) : x;
                                                min.x = min.x !== undefined ? Math.min(min.x, x) : x;
                                                x_ok = true;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance3.exports;
                                return __exports.data(typeof cmds[j].x !== lS(0, 0) && typeof cmds[j].prevX !== lS(0, 1) && typeof cmds[j].extrude !== lS(0, 2) && cmds[j].extrude && !isNaN(cmds[j].x) ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                var y = cmds[j].y;
                                                max.y = max.y !== undefined ? Math.max(max.y, y) : y;
                                                min.y = min.y !== undefined ? Math.min(min.y, y) : y;
                                                y_ok = true;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance4.exports;
                                return __exports.data(typeof cmds[j].y !== lS(0, 3) && typeof cmds[j].prevY !== lS(0, 4) && typeof cmds[j].extrude !== lS(0, 5) && cmds[j].extrude && !isNaN(cmds[j].y) ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                var z = cmds[j].prevZ;
                                                max.z = max.z !== undefined ? Math.max(max.z, z) : z;
                                                min.z = min.z !== undefined ? Math.min(min.z, z) : z;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance5.exports;
                                return __exports.data(typeof cmds[j].prevZ !== lS(0, 6) && typeof cmds[j].extrude !== lS(0, 7) && cmds[j].extrude && !isNaN(cmds[j].prevZ) ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            totalFilament[tool] = 0;
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance6.exports;
                                return __exports.data(!totalFilament[tool] ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            filamentByLayer[cmds[j].prevZ] = __lA(1, 20, 24);
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance7.exports;
                                return __exports.data(!filamentByLayer[cmds[j].prevZ] ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            filamentByLayer[cmds[j].prevZ][tool] = 0;
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance8.exports;
                                return __exports.data(!filamentByLayer[cmds[j].prevZ][tool] ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                totalFilament[tool] += cmds[j].extrusion;
                                                filamentByLayer[cmds[j].prevZ][tool] += cmds[j].extrusion;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance9.exports;
                                return __exports.data(cmds[j].extrusion ? 1 : 0);
                            })();
                            var diffX = cmds[j].x - cmds[j].prevX;
                            var diffY = cmds[j].y - cmds[j].prevY;
                            (() => {
                                const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                printTimeAdd = Math.sqrt(diffX * diffX + diffY * diffY) / (cmds[j].speed / 60);
                                            }
                                        },
                                        impFunc2: () => {
                                            (() => {
                                                const __ifInstance11 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            {
                                                                tmp1 = Math.sqrt(diffX * diffX + diffY * diffY) / (cmds[j].speed / 60);
                                                                tmp2 = Math.abs(cmds[j].extrusion / (cmds[j].speed / 60));
                                                                printTimeAdd = Math.max(tmp1, tmp2);
                                                            }
                                                        },
                                                        impFunc2: () => {
                                                            (() => {
                                                                const __ifInstance12 = new WebAssembly.Instance(__ifWasmModule, {
                                                                    env: {
                                                                        impFunc1: () => {
                                                                            {
                                                                                printTimeAdd = Math.abs(cmds[j].extrusion / (cmds[j].speed / 60));
                                                                            }
                                                                        },
                                                                        impFunc2: () => {
                                                                        }
                                                                    }
                                                                });
                                                                const __exports = __ifInstance12.exports;
                                                                return __exports.data(cmds[j].retract !== 0 ? 1 : 0);
                                                            })();
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance11.exports;
                                                return __exports.data(cmds[j].retract === 0 && cmds[j].extrusion !== 0 ? 1 : 0);
                                            })();
                                        }
                                    }
                                });
                                const __exports = __ifInstance10.exports;
                                return __exports.data(x_ok && y_ok ? 1 : 0);
                            })();
                            printTime += printTimeAdd;
                            (() => {
                                const __ifInstance13 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                printTimeByLayer[cmds[j].prevZ] = 0;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance13.exports;
                                return __exports.data(typeof printTimeByLayer[cmds[j].prevZ] === lS(0, 8) ? 1 : 0);
                            })();
                            printTimeByLayer[cmds[j].prevZ] += printTimeAdd;
                            (() => {
                                const __ifInstance14 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                type = lS(0, 9);
                                            }
                                        },
                                        impFunc2: () => {
                                            (() => {
                                                const __ifInstance15 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            {
                                                                type = lS(0, 10);
                                                            }
                                                        },
                                                        impFunc2: () => {
                                                            (() => {
                                                                const __ifInstance16 = new WebAssembly.Instance(__ifWasmModule, {
                                                                    env: {
                                                                        impFunc1: () => {
                                                                            {
                                                                                type = lS(0, 11);
                                                                            }
                                                                        },
                                                                        impFunc2: () => {
                                                                            {
                                                                                (() => {
                                                                                    const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                                                                                        env: {
                                                                                            impFunc: () => {
                                                                                                self.postMessage({ cmd: 'unknown type of move' });
                                                                                            }
                                                                                        }
                                                                                    });
                                                                                    const __exports = __callInstance14.exports;
                                                                                    return __exports.data();
                                                                                })();
                                                                                type = lS(0, 12);
                                                                            }
                                                                        }
                                                                    }
                                                                });
                                                                const __exports = __ifInstance16.exports;
                                                                return __exports.data(!cmds[j].extrude && cmds[j].retract === 0 ? 1 : 0);
                                                            })();
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance15.exports;
                                                return __exports.data(cmds[j].retract !== 0 ? 1 : 0);
                                            })();
                                        }
                                    }
                                });
                                const __exports = __ifInstance14.exports;
                                return __exports.data(cmds[j].extrude && cmds[j].retract === 0 ? 1 : 0);
                            })();
                            speedIndex = speeds[type].indexOf(cmds[j].speed);
                            (() => {
                                const __ifInstance17 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                speeds[type].push(cmds[j].speed);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance13.exports;
                                                    return __exports.data();
                                                })();
                                                speedIndex = speeds[type].indexOf(cmds[j].speed);
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance17.exports;
                                return __exports.data(speedIndex === -1 ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance18 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                speedsByLayer[type][cmds[j].prevZ] = [];
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance18.exports;
                                return __exports.data(typeof speedsByLayer[type][cmds[j].prevZ] === lS(0, 13) ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance19 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                speedsByLayer[type][cmds[j].prevZ][speedIndex] = cmds[j].speed;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance19.exports;
                                return __exports.data(speedsByLayer[type][cmds[j].prevZ].indexOf(cmds[j].speed) === -1 ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance3.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        sendSizeProgress(i / model.length * 100);
                    }
                }
            });
            const __exports = __callInstance12.exports;
            return __exports.data();
        })();
    }
    (() => {
        const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    purgeLayers();
                }
            }
        });
        const __exports = __callInstance11.exports;
        return __exports.data();
    })();
    modelSize.x = Math.abs(max.x - min.x);
    modelSize.y = Math.abs(max.y - min.y);
    modelSize.z = Math.abs(max.z - min.z);
    layerHeight = (max.z - min.z) / (layerCnt - 1);
    (() => {
        const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    sendAnalyzeDone();
                }
            }
        });
        const __exports = __callInstance10.exports;
        return __exports.data();
    })();
};
var doParse = function () {
    var argChar, numSlice;
    var sendLayer = undefined;
    var sendLayerZ = 0;
    var sendMultiLayer = [];
    var sendMultiLayerZ = [];
    var lastSend = 0;
    var layer = 0;
    var x, y, z = 0;
    var prevX = 0, prevY = 0, prevZ = 0;
    var f, lastF = 4000;
    var extrude = false, extrudeRelative = false, retract = 0;
    var positionRelative = false;
    var dcExtrude = false;
    var assumeNonDC = false;
    var tool = 0;
    var prev_extrude = [{
            a: 0,
            b: 0,
            c: 0,
            e: 0,
            abs: 0
        }];
    var prev_retract = __lA(2, 24, 28);
    var offset = toolOffsets[0];
    model = [];
    for (var i = 0; i < gcode.length; i++) {
        x = undefined;
        y = undefined;
        z = undefined;
        retract = 0;
        var line = gcode[i].line;
        var percentage = gcode[i].percentage;
        extrude = false;
        line = line.split(/[\(;]/)[0];
        var addToModel = false;
        var move = false;
        var log = false;
        if (/^(?:G0|G1)\s/i.test(line)) {
            var args = line.split(/\s/);
            for (var j = 0; j < args.length; j++) {
                switch (argChar = args[j].charAt(0).toLowerCase()) {
                case lS(0, 14):
                    (() => {
                        const __ifInstance20 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        x = prevX + Number(args[j].slice(1)) + offset.x;
                                    }
                                },
                                impFunc2: () => {
                                    {
                                        x = Number(args[j].slice(1)) + offset.x;
                                    }
                                }
                            }
                        });
                        const __exports = __ifInstance20.exports;
                        return __exports.data(positionRelative ? 1 : 0);
                    })();
                    break;
                case lS(0, 15):
                    (() => {
                        const __ifInstance21 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        y = prevY + Number(args[j].slice(1)) + offset.y;
                                    }
                                },
                                impFunc2: () => {
                                    {
                                        y = Number(args[j].slice(1)) + offset.y;
                                    }
                                }
                            }
                        });
                        const __exports = __ifInstance21.exports;
                        return __exports.data(positionRelative ? 1 : 0);
                    })();
                    break;
                case lS(0, 16):
                    (() => {
                        const __ifInstance22 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        z = prevZ + Number(args[j].slice(1));
                                    }
                                },
                                impFunc2: () => {
                                    {
                                        z = Number(args[j].slice(1));
                                    }
                                }
                            }
                        });
                        const __exports = __ifInstance22.exports;
                        return __exports.data(positionRelative ? 1 : 0);
                    })();
                    break;
                case lS(0, 17):
                case lS(0, 18):
                case lS(0, 19):
                case lS(0, 20):
                    assumeNonDC = true;
                    numSlice = Number(args[j].slice(1));
                    (() => {
                        const __ifInstance23 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        prev_extrude[tool][lS(0, 21)] = numSlice - prev_extrude[tool][argChar];
                                        prev_extrude[tool][argChar] = numSlice;
                                    }
                                },
                                impFunc2: () => {
                                    {
                                        prev_extrude[tool][lS(0, 22)] = numSlice;
                                        prev_extrude[tool][argChar] += numSlice;
                                    }
                                }
                            }
                        });
                        const __exports = __ifInstance23.exports;
                        return __exports.data(!extrudeRelative ? 1 : 0);
                    })();
                    extrude = prev_extrude[tool][lS(0, 23)] > 0;
                    (() => {
                        const __ifInstance24 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        prev_retract[tool] = -1;
                                        retract = -1;
                                    }
                                },
                                impFunc2: () => {
                                    (() => {
                                        const __ifInstance25 = new WebAssembly.Instance(__ifWasmModule, {
                                            env: {
                                                impFunc1: () => {
                                                    {
                                                        retract = 0;
                                                    }
                                                },
                                                impFunc2: () => {
                                                    (() => {
                                                        const __ifInstance26 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        prev_retract[tool] = 0;
                                                                        retract = 1;
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                    {
                                                                        retract = 0;
                                                                    }
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance26.exports;
                                                        return __exports.data(prev_extrude[tool][lS(0, 26)] > 0 && prev_retract[tool] < 0 ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        });
                                        const __exports = __ifInstance25.exports;
                                        return __exports.data(prev_extrude[tool][lS(0, 25)] == 0 ? 1 : 0);
                                    })();
                                }
                            }
                        });
                        const __exports = __ifInstance24.exports;
                        return __exports.data(prev_extrude[tool][lS(0, 24)] < 0 ? 1 : 0);
                    })();
                    break;
                case lS(0, 27):
                    numSlice = parseFloat(args[j].slice(1));
                    lastF = numSlice;
                    break;
                }
            }
            (() => {
                const __ifInstance27 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                extrude = true;
                                prev_extrude[tool][lS(0, 28)] = Math.sqrt((prevX - x) * (prevX - x) + (prevY - y) * (prevY - y));
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance27.exports;
                return __exports.data(dcExtrude && !assumeNonDC ? 1 : 0);
            })();
            (() => {
                const __ifInstance28 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                addToModel = true;
                                move = true;
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance28.exports;
                return __exports.data(typeof x !== lS(0, 29) || typeof y !== lS(0, 30) || typeof z !== lS(0, 31) || retract != 0 ? 1 : 0);
            })();
        } else if (/^(?:M82)/i.test(line)) {
            extrudeRelative = false;
        } else if (/^(?:G91)/i.test(line)) {
            positionRelative = true;
            extrudeRelative = true;
        } else if (/^(?:G90)/i.test(line)) {
            positionRelative = false;
            extrudeRelative = false;
        } else if (/^(?:M83)/i.test(line)) {
            extrudeRelative = true;
        } else if (/^(?:M101)/i.test(line)) {
            dcExtrude = true;
        } else if (/^(?:M103)/i.test(line)) {
            dcExtrude = false;
        } else if (/^(?:G92)/i.test(line)) {
            var args = line.split(/\s/);
            for (var j = 0; j < args.length; j++) {
                if (!args[j])
                    continue;
                if (args.length == 1) {
                    x = 0;
                    y = 0;
                    z = 0;
                    prev_extrude[tool][lS(0, 32)] = 0;
                    prev_extrude[tool][lS(0, 33)] = 0;
                    prev_extrude[tool][lS(0, 34)] = 0;
                    prev_extrude[tool][lS(0, 35)] = 0;
                } else {
                    switch (argChar = args[j].charAt(0).toLowerCase()) {
                    case lS(0, 36):
                        x = Number(args[j].slice(1)) + offset.x;
                        break;
                    case lS(0, 37):
                        y = Number(args[j].slice(1)) + offset.y;
                        break;
                    case lS(0, 38):
                        z = Number(args[j].slice(1));
                        prevZ = z;
                        break;
                    case lS(0, 39):
                    case lS(0, 40):
                    case lS(0, 41):
                    case lS(0, 42):
                        numSlice = Number(args[j].slice(1));
                        (() => {
                            const __ifInstance29 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        prev_extrude[tool][argChar] = 0;
                                    },
                                    impFunc2: () => {
                                        {
                                            prev_extrude[tool][argChar] = numSlice;
                                        }
                                    }
                                }
                            });
                            const __exports = __ifInstance29.exports;
                            return __exports.data(!extrudeRelative ? 1 : 0);
                        })();
                        break;
                    }
                }
            }
            (() => {
                const __ifInstance30 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                addToModel = true;
                                move = false;
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance30.exports;
                return __exports.data(typeof x !== lS(0, 43) || typeof y !== lS(0, 44) || typeof z !== lS(0, 45) ? 1 : 0);
            })();
        } else if (/^(?:G28)/i.test(line)) {
            var args = line.split(/\s/);
            if (args.length == 1) {
                x = 0;
                y = 0;
                z = 0;
            } else {
                for (j = 0; j < args.length; j++) {
                    switch (argChar = args[j].charAt(0).toLowerCase()) {
                    case lS(0, 46):
                        x = 0;
                        break;
                    case lS(0, 47):
                        y = 0;
                        break;
                    case lS(0, 48):
                        z = 0;
                        break;
                    default:
                        break;
                    }
                }
            }
            (() => {
                const __ifInstance31 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                z = 0;
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance31.exports;
                return __exports.data(layer == 0 && typeof z === lS(0, 49) ? 1 : 0);
            })();
            (() => {
                const __ifInstance32 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                addToModel = true;
                                move = true;
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance32.exports;
                return __exports.data(typeof x !== lS(0, 50) || typeof y !== lS(0, 51) || typeof z !== lS(0, 52) || retract != 0 ? 1 : 0);
            })();
        } else
            (() => {
                const __ifInstance33 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                tool = Number(line.split(/\s/)[0].slice(1));
                                (() => {
                                    const __ifInstance34 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                prev_extrude[tool] = {
                                                    a: 0,
                                                    b: 0,
                                                    c: 0,
                                                    e: 0,
                                                    abs: 0
                                                };
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance34.exports;
                                    return __exports.data(!prev_extrude[tool] ? 1 : 0);
                                })();
                                (() => {
                                    const __ifInstance35 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                prev_retract[tool] = 0;
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance35.exports;
                                    return __exports.data(!prev_retract[tool] ? 1 : 0);
                                })();
                                offset = toolOffsets[tool];
                                (() => {
                                    const __ifInstance36 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                offset = {
                                                    x: 0,
                                                    y: 0
                                                };
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance36.exports;
                                    return __exports.data(!offset ? 1 : 0);
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance33.exports;
                return __exports.data(/^(?:T\d+)/i.test(line) ? 1 : 0);
            })();
        (() => {
            const __ifInstance37 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance38 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                layer = z_heights[z];
                                            }
                                        },
                                        impFunc2: () => {
                                            {
                                                layer = model.length;
                                                z_heights[z] = layer;
                                            }
                                        }
                                    }
                                });
                                const __exports = __ifInstance38.exports;
                                return __exports.data(z_heights[z] ? 1 : 0);
                            })();
                            sendLayer = layer;
                            sendLayerZ = z;
                            prevZ = z;
                        }
                    },
                    impFunc2: () => {
                        (() => {
                            const __ifInstance39 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            (() => {
                                                const __ifInstance40 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            {
                                                                layer = z_heights[prevZ];
                                                            }
                                                        },
                                                        impFunc2: () => {
                                                            {
                                                                layer = model.length;
                                                                z_heights[prevZ] = layer;
                                                            }
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance40.exports;
                                                return __exports.data(z_heights.hasOwnProperty(prevZ) ? 1 : 0);
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance39.exports;
                            return __exports.data(typeof z == lS(0, 54) && typeof prevZ != lS(0, 55) ? 1 : 0);
                        })();
                    }
                }
            });
            const __exports = __ifInstance37.exports;
            return __exports.data(typeof z !== lS(0, 53) && z != prevZ ? 1 : 0);
        })();
        (() => {
            const __ifInstance41 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance42 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            model[layer] = [];
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance42.exports;
                                return __exports.data(!model[layer] ? 1 : 0);
                            })();
                            (() => {
                                const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            model[layer].push({
                                                x: x,
                                                y: y,
                                                z: z,
                                                extrude: extrude,
                                                retract: retract,
                                                noMove: !move,
                                                extrusion: (extrude || retract) && prev_extrude[tool][lS(0, 56)] ? prev_extrude[tool][lS(0, 57)] : 0,
                                                prevX: prevX,
                                                prevY: prevY,
                                                prevZ: prevZ,
                                                speed: lastF,
                                                gcodeLine: i,
                                                percentage: percentage,
                                                tool: tool
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance9.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance41.exports;
            return __exports.data(addToModel ? 1 : 0);
        })();
        (() => {
            const __ifInstance43 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance44 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            prevX = x;
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance44.exports;
                                return __exports.data(typeof x !== lS(0, 58) ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance45 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            prevY = y;
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance45.exports;
                                return __exports.data(typeof y !== lS(0, 59) ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance43.exports;
            return __exports.data(move ? 1 : 0);
        })();
        (() => {
            const __ifInstance46 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance47 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                lastSend = i;
                                                (() => {
                                                    const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                sendMultiLayerToParent(sendMultiLayer, sendMultiLayerZ, i / gcode.length * 100);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance8.exports;
                                                    return __exports.data();
                                                })();
                                                sendMultiLayer = [];
                                                sendMultiLayerZ = [];
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance47.exports;
                                return __exports.data(i - lastSend > gcode.length * 0.02 && sendMultiLayer.length != 0 ? 1 : 0);
                            })();
                            sendMultiLayer[sendMultiLayer.length] = sendLayer;
                            sendMultiLayerZ[sendMultiLayerZ.length] = sendLayerZ;
                            sendLayer = undefined;
                            sendLayerZ = undefined;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance46.exports;
            return __exports.data(typeof sendLayer !== lS(0, 60) ? 1 : 0);
        })();
    }
    (() => {
        const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    sendMultiLayerToParent(sendMultiLayer, sendMultiLayerZ, i / gcode.length * 100);
                }
            }
        });
        const __exports = __callInstance7.exports;
        return __exports.data();
    })();
};
var parseGCode = function (message) {
    gcode = message.gcode;
    firstReport = message.options.firstReport;
    toolOffsets = message.options.toolOffsets;
    (() => {
        const __ifInstance48 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    toolOffsets = [{
                            x: 0,
                            y: 0
                        }];
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance48.exports;
        return __exports.data(!toolOffsets || toolOffsets.length == 0 ? 1 : 0);
    })();
    (() => {
        const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    doParse();
                }
            }
        });
        const __exports = __callInstance6.exports;
        return __exports.data();
    })();
    gcode = [];
    (() => {
        const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    self.postMessage({
                        'cmd': 'returnModel',
                        'msg': {}
                    });
                }
            }
        });
        const __exports = __callInstance5.exports;
        return __exports.data();
    })();
};
var runAnalyze = function (message) {
    (() => {
        const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    analyzeModel();
                }
            }
        });
        const __exports = __callInstance4.exports;
        return __exports.data();
    })();
    model = [];
    z_heights = [];
    gcode = undefined;
    firstReport = undefined;
    z_heights = {};
    model = [];
    max = {
        x: undefined,
        y: undefined,
        z: undefined
    };
    min = {
        x: undefined,
        y: undefined,
        z: undefined
    };
    modelSize = {
        x: undefined,
        y: undefined,
        z: undefined
    };
    filamentByLayer = {};
    totalFilament = 0;
    printTime = 0;
    printTimeByLayer = {};
    layerHeight = 0;
    layerCnt = 0;
    speeds = {
        extrude: [],
        retract: [],
        move: []
    };
    speedsByLayer = {
        extrude: {},
        retract: {},
        move: {}
    };
};
var setOption = function (options) {
    for (var opt in options) {
        gCodeOptions[opt] = options[opt];
    }
};
onmessage = function (e) {
    var data = e.data;
    switch (data.cmd) {
    case lS(0, 61):
        (() => {
            const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        parseGCode(data.msg);
                    }
                }
            });
            const __exports = __callInstance3.exports;
            return __exports.data();
        })();
        break;
    case lS(0, 62):
        (() => {
            const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        setOption(data.msg);
                    }
                }
            });
            const __exports = __callInstance2.exports;
            return __exports.data();
        })();
        break;
    case lS(0, 63):
        (() => {
            const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        runAnalyze(data.msg);
                    }
                }
            });
            const __exports = __callInstance1.exports;
            return __exports.data();
        })();
        break;
    default:
        (() => {
            const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.postMessage(lS(0, 64) + data.msg);
                    }
                }
            });
            const __exports = __callInstance0.exports;
            return __exports.data();
        })();
    }
};</script>
</body>
</html>
