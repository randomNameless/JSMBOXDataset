<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B3pGTAmj.html</title>
</head>
<body>

<script>
import{O as p,r as I,J as i,K as s,c as x}from"./lfGBla7I.js";import{C as F,a as T}from"./4ZukHta5.js";let J=p("categoryStore",()=>{const n=I(null);function c({filter:o,header:d}){return i.find(s.category,o,d)}function e({id:o,filter:d,header:m}){return i.load(s.category,o,d,m)}function u(o){n.value=o}return{category:n,findCategory:c,loadCategory:e,setCategory:u}});const K=p("categoryItemStore",()=>{function n({filter:e,header:u}){return i.find(s.categoryItem,e,u)}function c({id:e,filter:u,header:o}){return i.load(s.categoryItem,e,u,o)}return{findCategoryItem:n,loadCategoryItem:c}}),j=p("productPageStore",()=>{const n=I(null),c=I(null),e=I([]),u=x(()=>e.value.sort((t,r)=>t.position-r.position));function o({filter:t,header:r}){return i.find(s.product,t,r)}function d({id:t,filter:r,header:g}){return i.load(s.product,t,r,g).then(a=>(S(a==null?void 0:a.Model),a))}async function m(t){const r=J(),g=K();return new Promise(async a=>{const f=new T;f.PerPage=500,f.CurrentPage=1,f.TypeId=1,f.SourceId=t;const C=await g.findCategoryItem({filter:f},{root:!0});if(!C||!C.List)return;const M=C.List.map(P=>P.CategoryId),l=new F;l.PerPage=500,l.CurrentPage=1,l.Ids=M;const y=await r.findCategory({filter:l},{root:!0});if(!y||!y.List)return a();v(y.List);const h=y.List.find(P=>P.TypeId===2);return a(h)})}function L(t){const r=e.value.findIndex(g=>g.title===t.title);r===-1?e.value.push(t):e.value[r]=t}function S(t){n.value=t}function v(t){c.value=t}function w(){e.value=[]}return{product:n,productCategories:c,productMenu:e,getProductMenuItems:u,fetchProductSeries:m,addProductMenu:L,setProduct:S,setProductCategories:v,resetProductMenu:w,findProduct:o,loadProduct:d}});export{J as a,j as u};

</script>

</body>
</html>
