<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>google-analytics.html</title>
</head>
<body>

<script>
$(document).ready(function () {
    
    // navigate helper function
    function navigate(url,selector) {
        if(url) {
            if($(selector).attr("target") !== "_blank") {
                window.location = url;
            }
            else {
                window.open(url)
            }
        }
		
	}

    // help me decide start
    function getEventCat() {
        let pageURL = window.location.href;
        if(pageURL.indexOf("eLife") > -1) {
            return "need_help:elife"
        }
        else if(pageURL.indexOf("plans") > -1) {
            return "need_help:postpaid"
        }
        else {
            return "need_help:"
        }
    }
    $(".need-help-trigger").on("click",function(){
        const dataLayerObj = {
            'event': 'eventTracker',
            'eventCategory':'help_me_decide', 
            'eventAction': getEventCat(),
            'eventLabel': 'start',
        }
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
    })

    $(".need-help-box .btn ,.need-help-box .box-close").on("click",function(e){
        e.preventDefault();
        let information = '';
        if($(this).text() == "Help me decide a plan") {
            information = "help me decide a plan";
        }
        else if ($(this).text() == "Chat with us") {
            information = "chat with us";
        }
        else {
            information = "close";
        }
        const dataLayerObj = {
            'event': 'eventTracker',
            'eventCategory':'help_me_decide', 
            'eventAction': getEventCat(),
            'eventLabel': 'continue',
            'information':information
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        if($(this).attr("id") !== "needHelp" && $(this).attr("class") !== "box-close"){
            navigate($(this).attr("href"),this)
        }
    })

    // help me decide end

	
    // click event handler
    $('.currentPromtion-slider .current-promotion-tile-2 .cta-wrapper a').on('click', function (e) {
        e.preventDefault();
        var eventCategory = 'latest_offers';
        var eventAction = "click";
        var eventLabel = "buy_now - "+$(this).parents(".eand-box").find(".eand-main-headings h4").text().toLowerCase().replace(/ /g,"_");
        var currentURL = $(this).attr('href');


        const dataLayerObj = {
            'event': 'eventTracker',
            'eventCategory': eventCategory, //Ex: context_navigation
            'eventAction': eventAction, //Ex: why_choose_to_pay_with_etisalat
            'eventLabel': eventLabel, // Ex: hassle_free_payments or manage_payments_in_one_place or fast_&_secure etc.
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
                            

    })

    $('.eand-box-card .box-card-tile a.link-full-view').on('click', function (e) {
        e.preventDefault();
        var eventCategory = 'navigation';
        var eventAction = "explore_our_services";
        var eventLabel = $(this).siblings(".content-wrapper").find(".eand-main-headings h4").text().toLowerCase().replace(/ /g,"_");
        var currentURL = $(this).attr('href');

        
        const dataLayerObj = {
            'event': 'eventTracker',
            'eventCategory': eventCategory, //Ex: context_navigation
            'eventAction': eventAction, //Ex: why_choose_to_pay_with_etisalat
            'eventLabel': eventLabel, // Ex: hassle_free_payments or manage_payments_in_one_place or fast_&_secure etc.
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })

    let mediaCtaOnClick = {
        'event': 'select_item',
        'ecommerce': {
            'items': []
        }
    };
    $('.eand-media-cta .media-cta-tile .cta-wrapper a , .eand-media-cta .media-cta-tile .btn').on('click', function (e) {
        e.preventDefault();
        var currentURL = $(this).attr('href');
        let item_name = $(this).parents(".content-wrap").find(".eand-main-headings").children().text().replace(/(\r\n|\n|\r)/gm, "").trim()
        mediaClick = {
			'item_name':item_name,
			'item_category':window.location.href.indexOf("smartliving") > -1 ? "Smart Living" : "Home Move",
            'item_brand':'Etisalat',
            'coupon':'',
            'discount':'',
            'item_extras1':'',
            'item_extras2':'',
            'item_extras3':'',
            'item_extras4':'',
            'item_extras5':'',
            'item_extras6':'',
            'item_list_id:': '',
			'item_list_name' : '',
			'device_type':'Web',
            'price':'',
            'currency':'AED',
			'quantity': 1,
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
			'user_id':sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
		}
		mediaCtaOnClick.ecommerce.items.push(mediaClick);
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(mediaCtaOnClick);
        }
        navigate(currentURL,this)
    })

    //old
    // $('.cross-promo-f .cross-promo-f-tile .cta-wrapper a').on('click', function (e) {
    //     e.preventDefault();
    //     var eventCategory = 'TV_and_internet';
    //     var eventAction = "click";
    //     var eventLabel = "view_all - "+$(this).parents(".cross-promo-f-tile").find(".eand-main-headings h3").text().toLowerCase().replace(/ /g,"_");
    //     var currentURL = $(this).attr('href');

    //     const dataLayerObj = {
    //         'event': 'eventTracker',
    //         'eventCategory': eventCategory, //Ex: context_navigation
    //         'eventAction': eventAction, //Ex: why_choose_to_pay_with_etisalat
    //         'eventLabel': eventLabel, // Ex: hassle_free_payments or manage_payments_in_one_place or fast_&_secure etc.
    //     }
        
    //     if (typeof (window.dataLayer) !== "undefined") {
    //         dataLayer.push(dataLayerObj);
    //     }
    //     navigate(currentURL,this)
                            

    // })


    //google analytics page view
    function pageInfo(url, type) {
        var respose = "";
        switch (type) {

            case 'page_type':
                respose = "CMS";
                if (url.indexOf('eshop') !== -1) {
                    respose = "eShop";
                }
                break;

            case 'category':
                respose = "";
                if (url.indexOf('category') !== -1) {
                    respose = getParameterByName('category', url);
                }
                break;

            case 'subcategory':
                respose = "";
                if (url.indexOf('subcategory') !== -1) {
                    respose = getParameterByName('subcategory', url);
                }
                break;

        }

        return respose


    }

    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
    if (typeof window.dataLayer !== "undefined") {
        
        //page view
        let url = document.URL.split('?');
        let loginStatus = "Not Logged In";

        if(sessionStorage.getItem("isLoggedIn")) {
            if(sessionStorage.getItem("isLoggedIn") == "true") {
              loginStatus = "Logged In";
            }
            else {
              loginStatus = "Not Logged In";
            }
        }
        window.dataLayer.push({
            event: "PageView",
            page_details: {
                page_type: pageInfo(document.URL, "page_type"), //String - Page Type
                category: pageInfo(document.URL, "category"), //String - Page Category
                subcategory: pageInfo(document.URL, "subcategory"), //String - Page Subcategory
                url: url[0], //JS command - Page URL
                title: document.title, //JS command - Page Title
                name: document.location.pathname, //JS command - Page Pathname
                language: document.documentElement.lang, //JS command - Page Language
            },

            user_details: {
                login_status: loginStatus, //String - "Logged In" or "Not Logged In"
                user_id: sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "", //String - Account ID
            },
        });
    }
    // Menu sign in button
    

    //support menu & Menu sign in button    `
    $('.mega-menu-desktop .sub-menu-wrap .menu-list-links a,.mega-menu-desktop .sub-menu-wrap .btn.btn-eand-primary-100 , .nav-drill .btn.btn-eand-primary-100').on("click",function(e){
        e.preventDefault();
        var sub_section = $(this).text().trim();
        var section = $(this).parents('li').children('a').text().trim();
        var currentURL = $(this).attr('href');
        var current_screen = location.href.split('?')[0];
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        
        const dataLayerObj = {
            'event': 'top_navigation_click',
            'entry_point':'',
            'section':section,
            'sub_section':sub_section,
            'current_account_type:':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web',
            'current_screen':current_screen
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })

    //support menu mobile
    // $('.nav-drill .py-12.flex-column.mt-0.align-items-start a').on("click",function(e){
        
    // })

    // other menu
    $('.mega-menu-desktop .sub-menu-wrap .mega-Menu-links ul li a').on('click', function (e) {
        e.preventDefault();
        var sub_section = $(this).text().trim().replace(/(\r\n|\n|\r)/gm, "");
        var section = $(this).parents('.mega-Menu-links').find('.eand-main-headings h5').text().trim();
        var currentURL = $(this).attr('href');
        var selectedSku = "";
        var current_screen = location.href.split('?')[0];
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        
        const dataLayerObj = {
            'event': 'top_navigation_click',
            'entry_point':'',
            'section':section,
            'sub_section':sub_section,
            'current_account_type:':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web',
            'current_screen':current_screen
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
    // mobile menu
    $('.nav-expand-content .eand-list .p2 li a').on('click', function (e) {
        e.preventDefault();
        var sub_section = $(this).text().trim();
        var section = $(this).parents('.nav-item').children('.nav-link').text().trim();
        var currentURL = $(this).attr('href');
        var selectedSku = "";
        var current_screen = location.href.split('?')[0];
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        
        const dataLayerObj = {
            'event': 'top_navigation_click',
            'entry_point':'',
            'section':section,
            'sub_section':sub_section,
            'current_account_type:':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web',
            'current_screen':current_screen
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })

	
	//16-current-promotion-google-analytics
	 $('.eand-current-promotion').on('click', '.cta-wrapper a', function () {
        var ctaTitle = $(this).parents('.current-promotion-tile').find('.eand-main-headings h4').text().trim();
        
        if(typeof(window.dataLayer) !== "undefined") {
            dataLayer.push({
                'event' : 'learnMore_links_allpages',
                'eventCategory' : 'learnmore_allpages',
                'eventAction' : ctaTitle
            });
        }
    });
	//17-faq-google-analytics
	 $('.eand-faq').on('click', '.action a', function () {
        //alert('something', this);
        var ga_event = $(this).closest('.eand-faq').find('input[name=event]');
        var ga_ev_cat = $(this).closest('.eand-faq').find('input[name=ev_cat]');
        // event dynamic values
        var ga_event_value = $(ga_event).val();
        var ga_ev_cat_value = $(ga_ev_cat).val();

        
        // title of the CTA
        if(ga_event.length !== 0 && ga_ev_cat.length !== 0){
            if(typeof(window.dataLayer) !== "undefined") {
            dataLayer.push({
                'event':  ga_event_value,
                'ev_cat': ga_ev_cat_value,
                'ev_act': 'click'
            });
            }
        }
    });
	//22-cross-promo-google-analytics
	$('.cross-promo-tile-a .btn-wrapper a ,.cross-promo-tile-a .cta-wrapper a').on('click', function (e) {
        e.preventDefault();
        let url = $(this).attr("href");
        var ga_event = $(this).closest('.eand-cross-promo-a').find('input[name=event]');
        var ga_ev_cat = $(this).closest('.eand-cross-promo-a').find('input[name=ev_cat]');
        // event dynamic values
        var ga_event_value = $(ga_event).val();
        var ga_ev_cat_value = $(ga_ev_cat).val();
        // title of the CTA
        var ctaTitle = $(this).text().trim();
        
        
        
        if(ga_event.length !== 0 && ga_ev_cat.length !== 0){
            if(typeof(window.dataLayer) !== "undefined") {
                dataLayer.push({
                    'event':  ga_event_value,
                    'ev_cat': ga_ev_cat_value,
                    'ev_act': 'click',
                    'ev_label': ctaTitle // 'What passes you can get?' // Title of the CTA
                });
            }
        }
        navigate(url,this)
    });
	//28-tabs-configurable-sections-google-analytics
	$('.eand-tabs-config').on('click', '.nav-link', function () {
        var ga_event = $(this).closest('.eand-tabs-config').find('input[name=event]');
        var ga_ev_cat = $(this).closest('.eand-tabs-config').find('input[name=ev_cat]');
        // event dynamic values
        var ga_event_value = $(ga_event).val();
        var ga_ev_cat_value = $(ga_ev_cat).val();
        // title of the CTA
        var ctaTitle = $(this).text().trim();
        
        
        
        if(ga_event.length !== 0 && ga_ev_cat.length !== 0){
            if(typeof(window.dataLayer) !== "undefined") {
                dataLayer.push({
                    'event':  ga_event_value,
                    'ev_cat': ga_ev_cat_value,
                    'ev_act': 'click',
                    'ev_label': ctaTitle // 'What passes you can get?' // Title of the CTA
                });
            }
        }
    });
	//30-media-cta-carousal-google-analytics
	$('.eand-media-cta-carousal .cta-wrapper a').on('click', function (e) {
        e.preventDefault();
        let url = $(this).attr("href");
        var ga_event = $(this).closest('.eand-media-cta-carousal').find('input[name=event]');
        var ga_ev_cat = $(this).closest('.eand-media-cta-carousal').find('input[name=ev_cat]');
        // event dynamic values
        var ga_event_value = $(ga_event).val();
        var ga_ev_cat_value = $(ga_ev_cat).val();
        
        var ctaTitle = $(this).text().trim();
        
        
        
        if(ga_event.length !== 0 && ga_ev_cat.length !== 0){
            if(typeof(window.dataLayer) !== "undefined") {
                dataLayer.push({
                'event' : ga_event_value,
                'eventCategory' : ga_ev_cat_value,
                'eventAction' : ctaTitle
                });
            }
        }
        navigate(url,this)
    });
	//32-device-cards-google-analytics
	//window.dynamicCardsSmartLiving()
    var onRadioChange = {
        'event': 'eventTracker',
        'eventCategory':'',
        'eventAction':'radio_button',
        'eventLabel':'continue'
    }; 
    $('.eand-overlay .device-popup-card-wrap .plan-selection-card .plan-input input').on('change',function(){
        let cat = $(this).parents('.top-blk').find('.eand-main-headings h4').text();
        onRadioChange.eventCategory = cat.split(' ').join('_');
    }) 
    $('.eand-overlay .device-popup-card-wrap .btn').on('click',function(e){
        e.preventDefault();
        let curnt = $(e.target).attr('href');
        if(typeof(window.dataLayer) !== "undefined") {
            dataLayer.push(onRadioChange);
            window.location = curnt;
        }
    })

	//33-tariff-cards-google-analytics
	window.dynamicCardsTariff = function(){
        function getParameterByName(name, href) {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(href);
            if (results == null)
                return "";
            else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
        }
        //productImpressions
        var allProductImpressions = {
            'event': 'productImpressions',
            'ecommerce': {
                'currencyCode': 'AED',
                'impressions': []
            }
        };
        var productDetails = $('.eand-tariff-cards-module.eand-tariff-dynanmic').find('.eand-tariff-card-tile');
        $(productDetails).each(function(index) {
            var productImpration = {}
            var selectedProductMain = $(this);
            var name = selectedProductMain.find('.card-heading').find('h6').find('br').length > 0 ? selectedProductMain.find('.card-heading').find('h6').html().split('<br>')[1].trim() : selectedProductMain.find('.card-heading').find('h6').text()
            var brand = selectedProductMain.find('.card-heading').find('h6').find('br').length > 0 ? selectedProductMain.find('.card-heading').find('h6').html().split('<br>')[0].trim() : selectedProductMain.find('.card-heading').find('h6').text();
            var price = selectedProductMain.find('.price').find('h4').text();
            var position = $(this).index() + 1;
            var curnt = selectedProductMain.find('a').attr('href');
            var list = getParameterByName('listVal', curnt);
            var category = getParameterByName('catName', curnt);
            var id = getParameterByName('productId', curnt);
            productImpration = {
                'name': name,
                /*String - Product Name*/
                'id': id,
                /*String - Product ID*/
                'price': price,
                /*String - Product Price*/
                'brand': brand,
                /*String - Product Brand*/
                'category': category,
                /*String - Product Category*/
                'list': list,
                /*String - Product List Name*/
                'dimension1': '',
                /*String - Capacity 1 (if available)*/
                'dimension2': '',
                /*String - Capacity 2 Bundle (if available)*/
                'dimension3': '',
                /*String - Size (if available)*/
                'dimension4': '',
                /*String - Color 1 (if available)*/
                'dimension5': '',
                /*String - Color 2 Bundle (if available)*/
                'dimension6': '',
                /*String - Strap Type (if available)*/
                'dimension7': '',
                /*String - Strap Color (if available)*/
                'dimension8': '',
                /*String - Connectivity (if available)*/
                'dimension9': '',
                /*String - Payment Method (if available)*/
                'dimension10': '',
                /*String - Number Selection Option (if available)*/
                'dimension11': '',
                /*String - Number Selected (if available)*/
                'dimension12': '',
                /*String - Plan Selected (if available)*/
                'dimension13': '',
                /*String - Add-On Name 1 (if available)*/
                'dimension14': '',
                /*String - Add-On Name 2 (if available)*/
                'dimension15': '',
                /*String - Add-On Payment Option 1 (if available)*/
                'dimension16': '',
                /*String - Add-On Payment Option 2 (if available)*/
                'dimension17': '',
                /*String - Availability (if available)  */
                'position': position /*Number - Position in the list*/
            }
            allProductImpressions.ecommerce.impressions.push(productImpration);
            
        });
        if(typeof(window.dataLayer) !== "undefined"){
            dataLayer.push(allProductImpressions);
        }
        
        $('.eand-tariff-cards-module.eand-tariff-dynanmic').on('click','.eand-tariff-card-tile .button-wrapper a', function(e) {
            var curnt = $(e.target).attr('data-target');
            e.preventDefault();
            var productClicked = {};
            var selectedProductMain = $(e.target).parents('.eand-tariff-card-tile');
            var name = selectedProductMain.find('.card-heading').find('h6').find('br').length > 0 ? selectedProductMain.find('.card-heading').find('h6').html().split('<br>')[1].trim() : selectedProductMain.find('.card-heading').find('h6').text()
            var brand = selectedProductMain.find('.card-heading').find('h6').find('br').length > 0 ? selectedProductMain.find('.card-heading').find('h6').html().split('<br>')[0].trim() : selectedProductMain.find('.card-heading').find('h6').text();
            var price = selectedProductMain.find('.price').find('h4').text();
            var position = selectedProductMain.parent().index() + 1;
            var category = getParameterByName('catName', curnt);
            var actionList = getParameterByName('listVal', curnt);
            var id = getParameterByName('productId', curnt);
            productClicked = {
                'event': 'productClick',
                'ecommerce': {
                    'click': {
                        'actionField': {
                            'list': actionList
                        },
                        'products': [{
                            'name': name,
                            /*String - Product Name*/
                            'id': id,
                            /*String - Product ID*/
                            'price': price,
                            /*String - Product Price*/
                            'brand': brand,
                            /*String - Product Brand*/
                            'category': category,
                            /*String - Product Category*/
                            'dimension1': '',
                            /*String - Capacity 1 (if available)*/
                            'dimension2': '',
                            /*String - Capacity 2 Bundle (if available)*/
                            'dimension3': '',
                            /*String - Size (if available)*/
                            'dimension4': '',
                            /*String - Color 1 (if available)*/
                            'dimension5': '',
                            /*String - Color 2 Bundle (if available)*/
                            'dimension6': '',
                            /*String - Strap Type (if available)*/
                            'dimension7': '',
                            /*String - Strap Color (if available)*/
                            'dimension8': '',
                            /*String - Connectivity (if available)*/
                            'dimension9': '',
                            /*String - Payment Method (if available)*/
                            'dimension10': '',
                            /*String - Number Selection Option (if available)*/
                            'dimension11': '',
                            /*String - Number Selected (if available)*/
                            'dimension12': '',
                            /*String - Plan Selected (if available)*/
                            'dimension13': '',
                            /*String - Add-On Name 1 (if available)*/
                            'dimension14': '',
                            /*String - Add-On Name 2 (if available)*/
                            'dimension15': '',
                            /*String - Add-On Payment Option 1 (if available)*/
                            'dimension16': '',
                            /*String - Add-On Payment Option 2 (if available)*/
                            'dimension17': '',
                            /*String - Availability (if available)  */
                            'position': position /*Number - Position in the list*/
                        }]
                    }
                }
            }
            if(typeof(window.dataLayer) !== "undefined") {
                dataLayer.push(productClicked);
                if(!$('.eand-tariff-cards-module').hasClass('card-details-on-top-dynamic-cards')) {
                    window.location = curnt;
                }
                
            }
        })
    }
	//35-tab-boxes-google-analytics
	$('.eand-tab-boxes').on('click', '.tab-box-left-blk a', function () {
    var ga_event = $(this).closest('.eand-tab-boxes').find('input[name=event]');
    var ga_ev_cat = $(this).closest('.eand-tab-boxes').find('input[name=ev_cat]');
    var ga_event_value = $(ga_event).val();
    var ga_ev_cat_value = $(ga_ev_cat).val();
    var ctaLength = $(this).contents().length-1;
    var ctaTitle = $(this).contents().get(ctaLength).nodeValue.trim();
    
    
    
    if(ga_event.length !== 0 && ga_ev_cat.length !== 0){
        if(typeof(window.dataLayer) !== "undefined") {
          dataLayer.push({
              'event':  ga_event_value,
              'ev_cat': ga_ev_cat_value,
              'ev_act': 'click',
              'ev_label': ctaTitle
          });
        }
    }
    });


	//36-category-cards-google-analytics - old
	// click event handler
	const clickStaticTariffCards = $('.eand-tariff-card-tile .button-wrapper a.btn');
	if (clickStaticTariffCards != undefined && clickStaticTariffCards.length > 0) {
		$('.eand-tariff-cards-module').on('click', '.eand-tariff-card-tile:not(.eand-tariff-cards-small) .button-wrapper a.btn', function (e) {
			e.preventDefault();
			// get values from hidden fields
			const ga_event = $(this).closest('.eand-tariff-cards-module').find('input[name=event]').val();
			const ga_ev_cat = $(this).closest('.eand-tariff-cards-module').find('input[name=ev_cat]').val();
			const ga_ev_list = $(this).closest('.eand-tariff-cards-module').find('input[name=ev_list]').val();
			const ga_ev_id = $(this).closest('.eand-tariff-cards-module').find('input[name=ev_id]').val();
			const currentTile = $(e.target).parents('.eand-tariff-card-tile');
			const name = currentTile.find('.card-heading h5').text().replace(/\n /g, "").trim();;
			const price = currentTile.find('.price h4').text().trim();
			const productRedirectURL = currentTile.find('.button-wrapper a.btn').attr('href')
			const position = currentTile.parent().index() + 1;

			const productObj = {
				url: productRedirectURL,
				'event': 'productClick',
				'ecommerce': {
					'currencyCode': 'AED', // Ex: AED
					'click': {
						'actionField': { 'action': 'click', 'list': ga_ev_list }, // List Name needs to match the list used when product list impressions were sent.
						'products': [{
							'name': name,
							'id': ga_ev_id,
							'quantity': 1,
							'price': price,
							'category': ga_ev_cat,
							'brand': '',
							'constiant': '',
							'position': position, // This will be the same position number used for the product list impression event
							'dimension1': 'Monthly', // (if available)
							'dimension2': '', //String - Capacity 2 Bundle (if available)
							'dimension3': '', //String - Size (if available)
							'dimension4': '', //String - Color 1 (if available)
							'dimension5': '', //String - Color 2 Bundle (if available)
							'dimension6': '', //String - Strap Type (if available)
							'dimension7': '', //String - Strap Color (if available)
							'dimension8': '', //String - Connectivity (if available)
							'dimension9': '', //String - Payment Method (if available)
							'dimension10': '', //String - Number Selection Option (if available)
							'dimension11': '', //String - Number Selected (if available)
							'dimension12': '', //String - Plan Selected (if available)
							'dimension13': '', //String - Add-On Name 1 (if available)
							'dimension14': '', //String - Add-On Name 2 (if available)
							'dimension15': '', //String - Add-On Payment Option 1 (if available)
							'dimension16': '', //String - Add-On Payment Option 2 (if available)
							'dimension17': '', //String - Availability (if available)
							'dimension18': '', //String - SIM Card option (if available)
							'dimension25': '', //String - Category  (if available)
							'quantity': 1
						}]
					}
				},
				//'eventCallback': function () {
					//console.log("eventCallback ");
				//}
			}
			if (typeof (window.dataLayer) != 'undefined') {
				dataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.
				dataLayer.push(productObj);
				if (productObj.url != undefined) {
					//document.location = productObj.url
					if($(e.target).attr("target") !== "_blank") {
						window.location = productObj.url;
					} else {
						window.open(productObj.url);
					}
				}
			}
			
		});
	}


    // New GA implementation
    // 6/5/24 -- moving forward below are the modules we need to take

	//productImpressions tariff card small start -- pospaid 
	var allProductImpressions = {
		'event': 'view_item_list',
		'ecommerce': {
			'item_list_id:': '',
			'item_list_name' : 'Postpaid',
			'items': []
		}
	};
	var productDetails = $('.eand-tariff-cards-module').find('.eand-tariff-cards-small');
    if(productDetails.length > 0){
        $(productDetails).each(function(index) {
            var productImpration = {}
            var selectedProductMain = $(this);
            var name = selectedProductMain.find('.card-heading').children().text().trim()
            var position = index + 1;
            productImpration = {
                'item_id:':'',
                'item_name':name,
                'item_category':'Postpaid Plans',
                'device_type':'Web',
                'index': position,
                'user_id':sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            }
            allProductImpressions.ecommerce.items.push(productImpration);
            
        });
        if (typeof(window.dataLayer) !== "undefined") {
            dataLayer.push(allProductImpressions);
        }
    }
	
	// Card clicked
	$(".eand-tariff-cards-module .eand-tariff-cards-small .button-wrapper a").on("click",function(e){
		e.preventDefault();
		var plan_selected = $(this).parents(".eand-tariff-cards-small").find('.card-heading').children().text().trim()
        var currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
		const tariffSmallCardsObj = {
			'event': 'postpaid_journey_begins',
			'current_account_type:':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
			'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
			'entry_point':'',
            'plan_selected':plan_selected,
			'device_type':'Web',
			'sku_id':selectedSku,
			"language": window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
			'user_id':sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
		}
		if (typeof (window.dataLayer) !== "undefined") {
			dataLayer.push(tariffSmallCardsObj);
		}
		navigate(currentURL,this)
	})
    //productImpressions tariff card small end

    // device cards ga updated start
    window.dynamicCards = function(){
        let deviceCardImpression = {
            'event': 'view_item_list',
            'ecommerce': {
                'items': []
            }
        };
        let deviceCards = $('.eand-device-cards-module.eand-device-dynanmic .eand-device-card-tile');
        if(deviceCards.length > 0){
            $(deviceCards).each(function(index) {
                let productImpration = {}
                let item_list_name = $(this).parents('.eand-device-cards-module').find('.eand-main-headings h2').text().trim()
                let item_id = $(this).attr("data-prductid") ? $(this).attr("data-prductid") : '';
                // let item_category = window.location.href.indexOf("devices") > -1 ? "Devices" : "Smart Living";
                let item_category = $(this).attr("data-itemcategory") ? $(this).attr("data-itemcategory") : '';
                let name = $(this).find('.top-part .eand-main-headings').children().text().trim()
                let position = index + 1;
                let brand = $(this).find('.top-part .p2.text-eand-granite-70 p').text().trim();
                var price = $(this).find('.bottom-part .price .eand-main-headings.value').attr('data-price');
                productImpration = {
                    'item_id:':item_id,//SKU_ID
                    'item_name':name,
                    'device_type':'Web',
                    'index': position,
                    'item_brand':brand,
                    'item_category':item_category,
                    'item_list_name':item_list_name,
                    'price':price,
                    'currency':'AED',
                    'user_id':sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
                }
                deviceCardImpression.ecommerce.items.push(productImpration);
            });
            if (typeof(window.dataLayer) !== "undefined") {
                dataLayer.push(deviceCardImpression);
            }
        }
    }
    $('.eand-device-cards-module').on('click', '.eand-device-card-tile .button-wrapper a ,.eand-device-card-tile .link-full-view', function (e) {
        e.preventDefault();
        var curnt = $(e.target).attr('href');
        let prepaidImpressionClick = {
            'event': 'select_item',
            'ecommerce': {
                'items': []
            }
        };
        let productImpration = {}
        let item_list_name = $(this).parents('.eand-device-cards-module').find('.eand-main-headings h2').text().trim()
        let item_id = $(this).parents('.eand-device-card-tile').attr("data-prductid") ? $(this).parents('.eand-device-card-tile').attr("data-prductid") : '';
        // let item_category = window.location.href.indexOf("devices") > -1 ? "Devices" : "Smart Living";
        let item_category = $(this).parents('.eand-device-card-tile').attr("data-itemcategory") ? $(this).parents('.eand-device-card-tile').attr("data-itemcategory") : '';
        let name = $(this).parents('.eand-device-card-tile').find('.top-part .eand-main-headings').children().text().trim()
        let position = $(this).parents('.eand-device-card-tile').parents().index() + 1;
        let brand = $(this).parents('.eand-device-card-tile').find('.top-part .p2.text-eand-granite-70 p').text().trim();
        var price = $(this).parents('.eand-device-card-tile').find('.bottom-part .price .eand-main-headings.value').attr('data-price');
        productImpration = {
            'item_id:':item_id,//SKU_ID
            'item_name':name,
            'device_type':'Web',
            'index': position,
            'item_brand':brand,
            'item_category':item_category,
            'item_list_name':item_list_name,
            'price':price,
            'currency':'AED',
            'user_id':sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
        }
        prepaidImpressionClick.ecommerce.items.push(productImpration);
        if (typeof(window.dataLayer) !== "undefined") {
            dataLayer.push(prepaidImpressionClick);
        }
        navigate(curnt,this)

    })
    // device cards ga updated end

	
	//33-tariff-cards-analytics
    let tariffCardImpression = {
        'event': 'view_item_list',
        'ecommerce': {
            'item_list_id':'',
            'item_list_name': 'Home wireless plans',
            'items': []
        }
    };
    let tariffCards = $('.eand-tariff-cards-module .eand-tariff-card-tile:not(.eand-tariff-cards-small)');
    if(tariffCards.length > 0){
        $(tariffCards).each(function(index) {
            let productImpration = {}
            let item_id = '';
            let item_category = 'Home Wireless';
            let name = $(this).find('.card-heading').children().text().trim()
            let position = index + 1;
            var price = $(this).find('.card-price .price .eand-main-headings.value').children().text().trim();
            productImpration = {
                'item_id:':item_id,//SKU_ID
                'item_name':name,
                'index': position,
                'item_list_id':'',
                'item_category':item_category,
                'price':price,
                'currency':'AED',
            }
            tariffCardImpression.ecommerce.items.push(productImpration);
        });
        if (typeof(window.dataLayer) !== "undefined") {
            dataLayer.push(tariffCardImpression);
        }
    }
    $('.eand-tariff-cards-module').on('click', '.eand-tariff-card-tile:not(.eand-tariff-cards-small) .button-wrapper a.btn', function (e) {
        e.preventDefault();
        var curnt = $(e.target).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let tariffCardClick = {
            'event': 'select_item',
            'ecommerce': {
                'items': []
            }
        };
        let productImpration = {}
        let item_category = 'Home Wireless';
        let item_list_name = "Home Wireless Plans";
        let name = $(this).parents('.eand-tariff-card-tile').find('.card-heading').text().replace(/\s+/g, ' ').trim();
        let position = $(this).parents('.eand-tariff-card-tile').parents().index() + 1;
        let brand = "Etisalat";
        let tenure = $(this).parents('.eand-tariff-card-tile').find('.card-price .price .eand-main-headings.value').children().text().trim().split("/")[1];
        var price = $(this).parents('.eand-tariff-card-tile').find('.card-price .price .eand-main-headings.value').children().text().trim();
        productImpration = {
            'item_category':item_category,
            'item_id:':selectedSku,
            'item_name':name,
            'device_type':'Web',
            'index': position,
            'item_brand':brand,
            'item_list_id':'',
            'item_list_name':item_list_name,
            'price':price,
            'tenure':tenure,
            'quantity':1,
            'currency':'AED',
            'user_id':sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
        }
        tariffCardClick.ecommerce.items.push(productImpration);
        if (typeof(window.dataLayer) !== "undefined") {
            dataLayer.push(tariffCardClick);
        }
        navigate(curnt,this)
    })


    //Prepaid â€“ Web Listing Impression Page Events

    //productImpressions
	var prepaidImpression = {
		'event': 'view_item_list',
		'ecommerce': {
			'item_list_id:': '',
			'item_list_name' : 'Prepaid',
			'items': []
		}
	};
	var prepaidCards = $('.eand-cross-promo-b');
    if(prepaidCards.length > 0){
        $(prepaidCards).each(function(index) {
            var productImpration = {}
            var name = $(this).find('.content-wrapper .eand-main-headings:not(.value)').children().text().trim()
            var position = index + 1;
            productImpration = {
                'item_id:':'',
                'item_name':name,
                'item_category':'Prepaid Plans',
                'device_type':'Web',
                'index': position,
                'user_id':sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            }
            prepaidImpression.ecommerce.items.push(productImpration);
        });
        if (typeof(window.dataLayer) !== "undefined") {
            dataLayer.push(prepaidImpression);
        }
    }
	

	// Card clicked
    var prepaidImpressionClick = {
		'event': 'select_item',
		'ecommerce': {
			'item_list_id:': '',
			'item_list_name' : 'Prepaid',
			'items': []
		}
	};
	$(".eand-cross-promo-b .btn-wrapper a").on("click",function(e){
		e.preventDefault();
		var productImpration = {}
        var curnt = $(e.target).attr('href');
		var name = $(this).parents('.content-wrapper').find(".eand-main-headings:not(.value)").children().text().trim()
		//var position = index + 1;
		productImpration = {
			'item_id:':'',
			'item_name':name,
			'item_category':'Prepaid Plans',
			'device_type':'Web',
			'index': 1,
			'user_id':sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
		}
		prepaidImpressionClick.ecommerce.items.push(productImpration);
        if (typeof(window.dataLayer) !== "undefined") {
            dataLayer.push(prepaidImpressionClick);
        }
        navigate(curnt,this)
	})
    
    // cross promo  d -- old
    // $(".cross-promo-tile-d .content-wrap .cta-wrapper a , .cross-promo-tile-d .content-wrap .btn-wrapper a").on("click",function(e){
    //     e.preventDefault();
    //     let currentURL = $(this).attr('href');
    //     let loginStatus = "Guest";
    //     let selectedSku = "";
    //     if(localStorage.getItem("selectedSku")){
    //         selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
    //     }
    //     if(sessionStorage.getItem("isLoggedIn")) {
    //         if(sessionStorage.getItem("isLoggedIn") == "true") {
    //           loginStatus = "Logged In";
    //         }
    //         else {
    //           loginStatus = "Guest";
    //         }
    //     }
    //     let dataLayerObj = {
    //         'event': 'postpaid_premium_number_click ',
    //         'event_category':'Postpaid Page',
    //         'event_action':'Banner Click',
    //         'event_label':$(this).text().trim(),
    //         'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
    //         'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
    //         'sku_id:':selectedSku,
    //         'device_type': 'Web',
    //         'user_type':loginStatus
    //     }
        
    //     if (typeof (window.dataLayer) !== "undefined") {
    //         dataLayer.push(dataLayerObj);
    //     }
    //     navigate(currentURL,this)
    // })
    // cross promo d end
    
    // devices GA
    // Banner click
    $(".hero-banner-tile .link-full-view").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'banner_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'info':currentURL,
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'current_screen':location.href.split('?')[0],
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
    $(".eand-category-logo-card").on("click",".category-tile-logo .link-full-view",function(e){
        e.preventDefault();
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let currentURL = $(this).attr('href');
        let section = $(this).parents(".eand-category-logo-card").find(".eand-main-headings").children().text();
        let dataLayerObj = {
            'event': 'shop_banner_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'info':$(this).parents(".category-tile-logo").attr("data-name"),
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'section':section,
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
    $(".eand-promo-grid .promo-content .btn , .eand-promo-grid .cta-wrapper a").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let info = $(this).parents(".promo-content").find(".eand-main-headings").children().text().trim() + " - " + $(this).text().trim();
        let dataLayerObj = {
            'event': 'devices_banner_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'info':info,
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
    // duplicate with e life banner click
    
    // $(".eand-special-offer .content-wrapper .btn-wrapper a").on("click",function(e){
    //     e.preventDefault();
    //     let currentURL = $(this).attr('href');
    //     let info = $(this).text().trim();
    //     let dataLayerObj = {
    //         'event': 'registration_renewal_tab_click',
    //         'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
    //         'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
    //         'info':info,
    //     }
    //     
    //     if (typeof (window.dataLayer) !== "undefined") {
    //         dataLayer.push(dataLayerObj);
    //     }
    //     navigate(currentURL,this)
    // })
	//36-category-cards-google-analytics - new
	$('.category-card-small , .category-icon-card-small , .category-tile-big').on('click', function () {
        //e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'devices_widget_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':$(this).parents(".eand-category-card-small , .eand-category-big-card , .eand-category-icon-card").find(".eand-main-headings h2").text().trim(),
            'info':$(this).find(".eand-box .eand-main-headings").children().text().trim(),
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    });
    //devices GA end

    // elife modules
    //page 14
    $(".eand-product-action-wraper .button-wrapper .btn").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'elife_cta_click',
            'entry_point' : '',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':$(this).parents(".eand-product-action-wraper .content-wrap").find(".d-flex:first-of-type .eand-main-headings").children().text().trim(),
            'sub_section':$(this).text().trim(), 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
    //page 15
    $(".eand-context-navigation .content-wrapper .cta-wrapper a").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'elife_cta_click',
            'entry_point' : '',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':$(this).parents(".eand-context-navigation").find(".eand-main-headings h1").text().trim(),
            'sub_section':$(this).parents(".content-wrapper").find(".eand-main-headings").children().text().trim(), 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
    //page 16
    $(".eand-special-offer .special-offer-tile .btn-wrapper a").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'elife_banner_click',
            'entry_point' : '',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':$(this).parents(".content-wrapper").find(".eand-main-headings").children().text().trim(),
            'sub_section':$(this).text().trim(), 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
    //eand-elife-config-channel-cards
    $(".eand-elife-config-channel-cards .elife-config-channel-card .cta-wrapper a").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'elife_cta_click',
            'entry_point' : '',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':$(this).parents(".eand-elife-config-channel-cards").find(".eand-main-headings h4:not(.mb-0)").text().trim(),
            'sub_section':$(this).parents(".elife-config-channel-card").find(".eand-main-headings").children().text().trim(), 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
    //eand-elife-config-cards
    $(".eand-elife-config-cards .elife-config-card .cta-wrapper a").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'elife_cta_click',
            'entry_point' : '',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':$(this).parents(".eand-elife-config-cards").find(".eand-main-headings h2").text().trim(),
            'sub_section':$(this).parents(".elife-config-card").find(".eand-main-headings").children().text().trim(), 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })

    //cross promo c
    $(".cross-promo-c .content-wrapper .btn").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'smart_living_banner_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':$(this).parents(".content-wrapper").find(".eand-main-headings").children().text().trim(),
            'sub_section':$(this).text().trim(), 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })

    //eand-main-text
    $(".eand-main-text .btn-wrapper .btn").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'smart_living_cta_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':$(this).parents(".eand-main-text").find(".eand-main-headings").children().text().trim(),
            'sub_section':$(this).text().trim(), 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })

    //cross promo e
    $(".cross-promo-tile-e .etisalat-app a").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'app_download_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':window.location.href,
            'sub_section':$(this).parent().hasClass("apple") ? "Appple" : "Android", 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })

    //eand-tabs-config
    $(".eand-tabs-config .tabs-nav-wrap .nav-item a").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'tab_interact',
            'section':'',
            'sub_section':$(this).text().trim(), 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })


    $(".device-popup-card-wrap a.btn").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let dataLayerObj = {
            'event': 'smart_living_select_account',
            'section':'Smart living',
            'sub_section':$(this).parents('.device-popup-card-wrap').find('input:checked').parents(".top-blk").find(".eand-main-headings h4").text().trim(), 
            'user_id': sessionStorage.getItem("userId") ? sessionStorage.getItem("userId") : "",
            'language': window.location.href.indexOf("/ar/") > -1 ? 'ar' :'en',
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
	

    //hero banner updated impressions
	var heroBannerImpression = {
		'event': 'view_promotion',
		'ecommerce': {
			'items': []
		}
	};
	var heroBannerTile = $('.hero-banner-tile-updated');
    if(heroBannerTile.length > 0){
        $(heroBannerTile).each(function(index) {
            var bannerImpression = {}
            var name = $(this).find('.content-wrap .eand-main-headings').children().text().trim()
            var position = index + 1;
            bannerImpression = {
                'creative_name':name,
                'creative_slot':`postpaid_top_${position}`,
            }
            heroBannerImpression.ecommerce.items.push(bannerImpression);
        });
        if (typeof(window.dataLayer) !== "undefined") {
            dataLayer.push(heroBannerImpression);
        }
    }

    //click
    $(".hero-banner-tile-updated .btn-wrapper .btn").on("click",function(e){
        e.preventDefault();
        let currentURL = $(this).attr('href');
        let name = $(this).parents('.hero-banner-tile-updated').find('.content-wrap .eand-main-headings').children().text().trim()
        let index = $(this).parents(".hero-banner-tile-updated").index()
        let position = index + 1;
        let dataLayerObj = {
            'event':'select_promotion',
            'creative_name':name,
            'creative_slot':`postpaid_top_${position}`,
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
    $(".plan-family-card-tile .offers-blk-wrap .btn").on("click",function(e){
        e.preventDefault();
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let currentURL = $(this).attr('href');
        let section = $(this).parents(".plan-family-card-tile").find(".top-blk .eand-main-headings").children().text();
        let dataLayerObj = {
            'event': 'postpaid_card_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':section,
            'sub_section':$(this).text().trim(),
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })

    // cross promo d (pospaid simplification)
    $('.cross-promo-tile-d .content-wrap .cta-wrapper a , .cross-promo-tile-d .content-wrap .btn-wrapper a').on('click', function (e) {
        e.preventDefault();
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let currentURL = $(this).attr('href');
        let section = $(this).parents(".cross-promo-tile-d").find(".heading-section .eand-main-headings").children().text().trim().replace(/(\r\n|\n|\r)/gm, "");
        let dataLayerObj = {
            'event': 'postpaid_banner_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':section,
            'sub_section':$(this).text().trim().replace(/(\r\n|\n|\r)/gm, ""),
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })

    // cross promo f (pospaid simplification)
    $('.cross-promo-f-tile .cta-wrapper a').on('click', function (e) {
        e.preventDefault();
        let selectedSku = "";
        if(localStorage.getItem("selectedSku")){
            selectedSku = JSON.parse(localStorage.getItem("selectedSku"));
        }
        let currentURL = $(this).attr('href');
        let section = $(this).parents(".cross-promo-f-tile").find(".eand-main-headings").children().text().trim().replace(/(\r\n|\n|\r)/gm, "");
        let dataLayerObj = {
            'event': 'postpaid_cta_click',
            'current_account_type':localStorage.getItem("currentUserAccountType") ? localStorage.getItem("currentUserAccountType") : "",
            'current_plan_name':sessionStorage.getItem("planName") ? sessionStorage.getItem("planName") : "",
            'section':section,
            'sku_id:':selectedSku,
            'device_type': 'Web'
        }
        if (typeof (window.dataLayer) !== "undefined") {
            dataLayer.push(dataLayerObj);
        }
        navigate(currentURL,this)
    })
});
</script>

</body>
</html>
