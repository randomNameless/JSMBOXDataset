<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>main_jq3.html</title>
</head>
<body>

<script>
var DOMReady = function(a,b,c){b=document,c='addEventListener';b[c]?b[c]('DOMContentLoaded',a):window.attachEvent('onload',a)}
var isOrdercard = location.pathname.indexOf('/ordercard/') > -1;
var isLoancard = location.pathname.indexOf('/loancard/') > -1;
var isCorporateHoujin = location.pathname.indexOf('/corporate/houjin/') > -1;
var isVoucher = location.pathname.indexOf('/voucher/') > -1;
var isPremium = location.pathname.indexOf('/premium/') > -1;

hideMyjcbLogin();
DOMReady(function(){
	hideMyjcbLogin();
	showHeaderMenu();
});
function hideMyjcbLogin(){
	var bodyElm = document.body;
	if(bodyElm){
		var bodyClass = bodyElm.className;
		var hideMyjcbLoginClass = 'hideMyjcbLogin';
		if(bodyClass.indexOf(hideMyjcbLoginClass) < 0 && isOrdercard ||  isLoancard || isCorporateHoujin || isVoucher){
			bodyElm.className = bodyClass == '' ? hideMyjcbLoginClass : bodyClass + ' ' + hideMyjcbLoginClass;
		}
	}
}
function showHeaderMenu(){
  if(isPremium){
		document.getElementById('contents__header__navToggle').checked = false;
	}else{
    document.getElementById('contents__header__navToggle').checked = true;
  }
}

(function() {
  $(function() {
    var breakpointMobile, breakpointPC, breakpointTablet, common, contentsNavi__$activatedList, contentsNavi__activeList, contentsNavi__deactiveList, contentsNavi__getDelay, contentsNavi__lastMouseLoc, contentsNavi__mouseLocList, contentsNavi__onMouseEnterToList, contentsNavi__onMouseLeaveFromMainMenu, contentsNavi__onMouseMove, contentsNavi__timeoutFixOpen, contentsNavi__timeoutListID, contentsNavi__timeoutMainMenuID, contentsNavi__tryToActiveMenu, contentsNavi__tryToDeactiveMenu, globalMenu__$activatedList, globalMenu__activeList, globalMenu__deactiveList, globalMenu__getDelay, globalMenu__lastMouseLoc, globalMenu__mouseLocList, globalMenu__onMouseEnterToList, globalMenu__onMouseLeaveFromMainMenu, globalMenu__onMouseMove, globalMenu__timeoutFixOpen, globalMenu__timeoutListID, globalMenu__timeoutMainMenuID, globalMenu__tryToActiveMenu, globalMenu__tryToActiveMenuAlt, globalMenu__tryToDeactiveMenu, goToTop__changefixedMovePageTopFlag, goToTop__checkfixedMovePageTopFlag, goToTop__fixedMovePageTopFlag, goToTop__onClickScrollTop, goToTop__timerIDFixedMovePageTop, init, isInit, isL_XL, mainMenu__$activatedList, mainMenu__activeList, mainMenu__deactiveList, mainMenu__getDelay, mainMenu__getDelayAlt, mainMenu__lastKeyLoc, mainMenu__lastMouseLoc, mainMenu__mouseLocList, mainMenu__onKeyLeaveFromMainMenu, mainMenu__onMouseEnterToList, mainMenu__onMouseLeaveFromMainMenu, mainMenu__onMouseMove, mainMenu__timeoutFixOpen, mainMenu__timeoutListID, mainMenu__timeoutMainMenuID, mainMenu__tryToActiveMenu, mainMenu__tryToActiveMenuAlt, mainMenu__tryToDeactiveMenu, mainMenu__tryToDeactiveMenuAlt, menu__getDelay, menu__getDelayAlt, menu__onMouseEnterToList, menu__onMouseMove, menu__tryToActiveMenu, menu__tryToDeactiveMenu, menu__tryToDeactiveMenuAlt, moduleCardCarouselList__changeAlpha, moduleCardCarouselList__getPosition, moduleCardCarouselList__onClickNav, moduleCardCarouselList__onTouchEnd, moduleCardCarouselList__onTouchMove, moduleCardCarouselList__onTouchStart, moduleCardCarouselList__render, moduleCardCarouselList__reset, moduleCardCarouselList__swipeDirection, moduleCardCarouselList__swipePosition, infinity__cardDetailCarouselList__onClickNav, infinity__cardDetailCarouselList__onTouchStart, infinity__cardDetailCarouselList__onTouchMove, infinity__cardDetailCarouselList__onTouchEnd, infinity__cardDetailCarouselList__dotClick, infinity__cardDetailCarouselList__changeAlpha, infinity__cardDetailCarouselList__render, infinity__cardDetailCarouselList__ini, infinity__cardDetailCarouselList__reset, infinity__cardDetailCarouselList__autoSlide, infinity__cardDetailCarouselList__autoSlideCansel, infinity__cardDetailCarouselList__bringElementFrontNum, infinity__cardDetailCarouselList__isAnimate, infinity__cardDetailCarouselList__timer, moduleScrollMenu__changeActive, navSearch__closeflag, navSearch__onBlurNavSearch, navSearch__onMouseClickNavSearch, navSearch__onMouseEnterNavSearch, navSearch__onMouseLeaveNavSearch, offL_XL, offS_M, onL_XL, onResize, onS_M, onScrollWindowL_XL, onScrollWindowS_M;
    isL_XL = true;
    isInit = true;
    window_mainMenuMouseOverFlag = false;
    window_globalMenuMouseOverFlag = false;
    breakpointPC = 1024;
    breakpointTablet = 768;
    breakpointMobile = 480;
    init = function() {
      $(window).on('resize', onResize);
      common();
      onResize();
      return this;
    };
    onResize = function(e) {
      if ((window.matchMedia('(max-width: ' + (breakpointTablet - 1) + 'px)').matches)) {
        if (isL_XL || isInit) {
          if (!isInit) {
            offL_XL();
          }
          onS_M();
          isL_XL = false;
        }
      } else {
        if (!isL_XL || isInit) {
          if (!isInit) {
            offS_M();
          }
          onL_XL();
          isL_XL = true;
        }
      }
      isInit = false;
      return this;
    };

    // mouse over flag on main navigation
    $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").on('mouseenter',function(){
      if (!window_mainMenuMouseOverFlag) {
        window_mainMenuMouseOverFlag = true;
      }
    });
    $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").on('mouseleave',function(){
      if (window_mainMenuMouseOverFlag) {
        window_mainMenuMouseOverFlag = false;
      }
    });

    // mouse over flag on global navigation
    $("#header__navGlobal__support, #header__navGlobal__proc, #header__navGlobal__contact, #header__navGlobal__news, #header__navGlobal__chooseRegion").on('mouseenter',function(){
      if (!window_globalMenuMouseOverFlag) {
        window_globalMenuMouseOverFlag = true;
      }
    });
    $("#header__navGlobal__support, #header__navGlobal__proc, #header__navGlobal__contact, #header__navGlobal__news, #header__navGlobal__chooseRegion").on('mouseleave',function(){
      if (window_globalMenuMouseOverFlag) {
        window_globalMenuMouseOverFlag = false;
      }
    });

    /*メインメニュー、グローバルメニュー、コンテンツナビ 開閉用
     */
    menu__onMouseMove = function(e, _mouseLocList) {
      _mouseLocList.push({
        x: e.pageX,
        y: e.pageY
      });
      if (_mouseLocList.length > 2) {
        _mouseLocList.shift();
      }
      return this;
    };
    menu__onMouseEnterToList = function(e, _timeoutListID, _timeoutMainMenuID, _lastMouseLoc, callback) {
      if (_timeoutListID) {
        clearTimeout(_timeoutListID);
      }
      if (_timeoutMainMenuID) {
        clearTimeout(_timeoutMainMenuID);
      }
      _lastMouseLoc = null;
      return callback($(e.currentTarget), e === null);
    };
    menu__tryToDeactiveMenu = function(force, _id, offset_lt, offset_lb, _mouseLocList, _timeoutListID, _$activatedList, callback) {
      var currentLoc, currentOutside, lb, lt, megaMenuPos, rb, rt;
      if (!force) {
        megaMenuPos = $(_id).offset();
        lt = {
          x: megaMenuPos.left,
          y: megaMenuPos.top + Number(offset_lt)
        };
        rt = {
          x: lt.x + $(_id).width(),
          y: lt.y
        };
        lb = {
          x: lt.x,
          y: lt.y + Number(offset_lb)
        };
        rb = {
          x: rt.x,
          y: lb.y
        };
        currentLoc = _mouseLocList[_mouseLocList.length - 1];
        currentOutside = currentLoc.y < lt.y || currentLoc.y > lb.y || currentLoc.x < lt.x || currentLoc.x > rt.x;
      }
      if (force || currentOutside) {
        if (_timeoutListID) {
          clearTimeout(_timeoutListID);
        }
        if (_$activatedList) {
          return callback(_$activatedList, true);
        }
      }
    };
    menu__tryToDeactiveMenuAlt = function(force, _id, offset_lt, offset_lb, _mouseLocList, _timeoutListID, _$activatedList, callback) {
      if (_timeoutListID) {
        clearTimeout(_timeoutListID);
      }
      if (_$activatedList) {
        return callback(_$activatedList, true);
      }
    };
    menu__tryToActiveMenu = function($li, force, callback_delay, _timeoutListID, callback_tryToActiveMenu, callback_activeList, forContentsNavi) {
      var delay;
      if (forContentsNavi == null) {
        forContentsNavi = null;
      }
      if (!force) {
        if (forContentsNavi) {
          delay = callback_delay(forContentsNavi);
        } else {
          delay = callback_delay();
        }
        if (delay === -1) {
          return;
        } else if (delay > 0) {
          _timeoutListID = setTimeout(function() {
            return callback_tryToActiveMenu($li);
          }, delay);
          return;
        }
      }
      callback_activeList($li);
      return this;
    };
    menu__getDelay = function(_$activatedList, _mouseLocList, _id, offset_lt, offset_lb, _lastMouseLoc) {
      var currentLoc, currentOutside, decreasingSlope, dist, increasingSlope, lb, lt, megaMenuPos, prevDecreasingSlope, prevIncreasingSlope, prevLoc, rb, rt, slope;
      if (!_$activatedList || _mouseLocList.length < 2) {
        return 0;
      }
      megaMenuPos = $(_id).offset();
      lt = {
        x: megaMenuPos.left,
        y: megaMenuPos.top + Number(offset_lt)
      };
      rt = {
        x: lt.x + $(_id).width(),
        y: lt.y
      };
      lb = {
        x: lt.x,
        y: lt.y + Number(offset_lb)
      };
      rb = {
        x: rt.x,
        y: lb.y
      };
      currentLoc = _mouseLocList[_mouseLocList.length - 1];
      prevLoc = _mouseLocList[0];
      if (_lastMouseLoc) {
        currentOutside = currentLoc.y < lt.y || currentLoc.y > lb.y || currentLoc.x < lt.x || currentLoc.x > rt.x;
        if (!currentOutside) {
          return -1;
        }
        dist = Math.sqrt(Math.pow(currentLoc.x - _lastMouseLoc.x, 2) + Math.pow(currentLoc.y - _lastMouseLoc.y, 2));
        if (dist <= 0) {
          return 0;
        }
      }
      slope = function(a, b) {
        return (b.y - a.y) / (b.x - a.x);
      };
      decreasingSlope = slope(currentLoc, rt);
      increasingSlope = slope(currentLoc, lt);
      prevDecreasingSlope = slope(prevLoc, rt);
      prevIncreasingSlope = slope(prevLoc, lt);
      if (decreasingSlope <= prevDecreasingSlope && increasingSlope >= prevIncreasingSlope) {
        _lastMouseLoc = currentLoc;
        return 0;
      }
      _lastMouseLoc = null;
      return 0;
    };
    menu__getDelayAlt = function(_$activatedList, _mouseLocList, _id, offset_lt, offset_lb, _lastMouseLoc) {
      if (!_$activatedList || _mouseLocList.length < 2) {
        return 0;
      }
      _lastMouseLoc = null;
      return 0;
    };

    /*メインメニュー
     */
    mainMenu__mouseLocList = [];
    mainMenu__lastMouseLoc = null;
    mainMenu__lastKeyLoc = null;
    mainMenu__$activatedList = null;
    mainMenu__timeoutListID = null;
    mainMenu__timeoutMainMenuID = null;
    mainMenu__timeoutFixOpen = null;
    mainMenu__timeoutMouseOverID = null;
    mainMenu__onMouseMove = function(e) {
      return menu__onMouseMove(e, mainMenu__mouseLocList);
    };
    mainMenu__onMouseEnterToList = function(e) {
      if (mainMenu__timeoutMouseOverID) {
        clearTimeout(mainMenu__timeoutMouseOverID);
      }
      mainMenu__timeoutMouseOverID = setTimeout(function() {
        if (window_mainMenuMouseOverFlag) {
          return menu__onMouseEnterToList(e, mainMenu__timeoutListID, mainMenu__timeoutMainMenuID, mainMenu__lastMouseLoc, mainMenu__tryToActiveMenu);
        }
      }, 300);
    };
    mainMenu__onMouseLeaveFromMainMenu = function(e) {
      if (e) {
        if (mainMenu__timeoutMainMenuID) {
          clearTimeout(mainMenu__timeoutMainMenuID);
        }
        mainMenu__timeoutMainMenuID = setTimeout(function() {
          if (!window_mainMenuMouseOverFlag) {
            return mainMenu__tryToDeactiveMenu();
          }
        }, 300);
      } else {
        mainMenu__tryToDeactiveMenu(true);
      }
    };
    mainMenu__onKeyLeaveFromMainMenu = function(e) {
      if (mainMenu__lastKeyLoc !== $(e.currentTarget).attr("id")) {
        mainMenu__lastKeyLoc = $(e.currentTarget).attr("id");
        return mainMenu__tryToDeactiveMenuAlt();
      } else {
        return mainMenu__tryToDeactiveMenuAlt(true);
      }
    };
    mainMenu__tryToDeactiveMenu = function(force) {
      return menu__tryToDeactiveMenu(force, "#header__main", 88, 360, mainMenu__mouseLocList, mainMenu__timeoutListID, mainMenu__$activatedList, mainMenu__deactiveList);
    };
    mainMenu__tryToDeactiveMenuAlt = function(force) {
      return menu__tryToDeactiveMenuAlt(force, "#header__main", 88, 360, mainMenu__mouseLocList, mainMenu__timeoutListID, mainMenu__$activatedList, mainMenu__deactiveList);
    };
    mainMenu__tryToActiveMenu = function($li, force) {
      return menu__tryToActiveMenu($li, force, mainMenu__getDelay, mainMenu__timeoutListID, mainMenu__tryToActiveMenu, mainMenu__activeList);
    };
    mainMenu__tryToActiveMenuAlt = function($li, force) {
      if (mainMenu__lastKeyLoc) {
        if (mainMenu__lastKeyLoc !== $li.attr("id")) {
          mainMenu__timeoutMainMenuID = setTimeout(function() {
            return menu__tryToActiveMenu($li, force, mainMenu__getDelayAlt, mainMenu__timeoutListID, mainMenu__tryToActiveMenuAlt, mainMenu__activeList);
          }, 300);
        } else {
          menu__tryToActiveMenu($li, force, mainMenu__getDelayAlt, mainMenu__timeoutListID, mainMenu__tryToActiveMenuAlt, mainMenu__activeList);
        }
      } else {
        menu__tryToActiveMenu($li, force, mainMenu__getDelayAlt, mainMenu__timeoutListID, mainMenu__tryToActiveMenuAlt, mainMenu__activeList);
      }
      return this;
    };
    mainMenu__getDelay = function() {
      return menu__getDelay(mainMenu__$activatedList, mainMenu__mouseLocList, "#header__main", 88, 360, mainMenu__lastMouseLoc);
    };
    mainMenu__getDelayAlt = function() {
      return menu__getDelayAlt(mainMenu__$activatedList, mainMenu__mouseLocList, "#header__main", 88, 360, mainMenu__lastMouseLoc);
    };
    mainMenu__activeList = function($li) {

      /*
      if (mainMenu__timeoutMainMenuID)
        clearTimeout(mainMenu__timeoutMainMenuID)
       */
      var withMainMenu;
      withMainMenu = true;
      if (mainMenu__$activatedList) {
        if ($li.is(mainMenu__$activatedList)) {
          return;
        }
        mainMenu__deactiveList(mainMenu__$activatedList, false);
        withMainMenu = false;
      }
      $li.addClass("open");
      if (withMainMenu) {
        $("#header").addClass("open");
      }
      if (mainMenu__timeoutFixOpen) {
        clearTimeout(mainMenu__timeoutFixOpen);
      }
      mainMenu__timeoutFixOpen = setTimeout(function() {
        return $("#header").addClass("fix");
      }, 400);
      mainMenu__$activatedList = $li;
      return this;
    };
    mainMenu__deactiveList = function($li, withMainMenu) {
      if (withMainMenu) {
        $("#header").removeClass("open");
        $("#header").removeClass("fix");
        if (mainMenu__timeoutFixOpen) {
          clearTimeout(mainMenu__timeoutFixOpen);
        }
      }
      $li.removeClass("open");
      mainMenu__$activatedList = null;
      return this;
    };

    /*ナビ検索
     */
    navSearch__onMouseClickNavSearch = function(e) {
      var $navSearch;
      $navSearch = $("#header__navSearch");
      if (!$navSearch.hasClass("active")) {
        $navSearch.addClass("active");
        $("#header__navSearch").off("click");
        $("#header__navSearch input").trigger('focus');
        if ((window.matchMedia('(min-width: 1024px)').matches)) {
          $("#header__logo--tagline").addClass("hide");
        }
        return false;
      }
    };
    navSearch__closeflag = false;
    navSearch__onMouseEnterNavSearch = function(e) {
      return navSearch__closeflag = false;
    };
    navSearch__onMouseLeaveNavSearch = function(e) {
      return navSearch__closeflag = true;
    };
    navSearch__onBlurNavSearch = function(e) {
      var $navSearch;
      if (navSearch__closeflag) {
        $navSearch = $("#header__navSearch");
        if ((window.matchMedia('(min-width: 1024px)').matches)) {
          $("#header__logo--tagline").removeClass("hide");
        }
        if (!$navSearch.hasClass('header__navSearch2')) {
          $navSearch.removeClass("active");
        }
        $("#header__navSearch").on("click", navSearch__onMouseClickNavSearch);
        return this;
      }
    };

    /*グローバルメニュー
     */
    globalMenu__mouseLocList = [];
    globalMenu__lastMouseLoc = null;
    globalMenu__$activatedList = null;
    globalMenu__timeoutListID = null;
    globalMenu__timeoutMainMenuID = null;
    globalMenu__timeoutFixOpen = null;
    globalMenu__timeoutMouseOverID = null;
    globalMenu__onMouseMove = function(e) {
      return menu__onMouseMove(e, globalMenu__mouseLocList);
    };
    globalMenu__onMouseEnterToList = function(e) {
      if (globalMenu__timeoutMouseOverID) {
        clearTimeout(globalMenu__timeoutMouseOverID);
      }
      globalMenu__timeoutMouseOverID = setTimeout(function() {
        if (window_globalMenuMouseOverFlag) {
          return menu__onMouseEnterToList(e, globalMenu__timeoutListID, globalMenu__timeoutMainMenuID, globalMenu__lastMouseLoc, globalMenu__tryToActiveMenu);
        }
      }, 300);
    };
    globalMenu__onMouseLeaveFromMainMenu = function(e) {
      if (e) {
        globalMenu__timeoutMainMenuID = setTimeout(function() {
          return globalMenu__tryToDeactiveMenu();
        }, 300);
      } else {
        globalMenu__tryToDeactiveMenu(true);
      }
      return this;
    };
    globalMenu__tryToDeactiveMenu = function(force) {
      return menu__tryToDeactiveMenuAlt(force, "#header__navGlobal", 0, 180, globalMenu__mouseLocList, globalMenu__timeoutListID, globalMenu__$activatedList, globalMenu__deactiveList);
    };
    globalMenu__tryToActiveMenu = function($li, force) {
      return menu__tryToActiveMenu($li, force, globalMenu__getDelay, globalMenu__timeoutListID, globalMenu__tryToActiveMenu, globalMenu__activeList);
    };
    globalMenu__tryToActiveMenuAlt = function($li, force) {
      return menu__tryToActiveMenu($li, force, globalMenu__getDelay, globalMenu__timeoutListID, globalMenu__tryToActiveMenu, globalMenu__activeList);
    };
    globalMenu__getDelay = function() {
      return menu__getDelay(globalMenu__$activatedList, globalMenu__mouseLocList, "#header__navGlobal", 0, 180, globalMenu__lastMouseLoc);
    };
    globalMenu__activeList = function($li) {
      var withMainMenu;
      withMainMenu = true;
      if (globalMenu__$activatedList) {
        if ($li.is(globalMenu__$activatedList)) {
          return;
        }
        globalMenu__deactiveList(globalMenu__$activatedList, false);
        withMainMenu = false;
      }
      $li.addClass("open");
      if (globalMenu__timeoutFixOpen) {
        clearTimeout(globalMenu__timeoutFixOpen);
      }
      globalMenu__$activatedList = $li;
      return this;
    };
    globalMenu__deactiveList = function($li, withMainMenu) {
      if (withMainMenu) {
        if (globalMenu__timeoutFixOpen) {
          clearTimeout(globalMenu__timeoutFixOpen);
        }
      }
      $li.removeClass("open");
      globalMenu__$activatedList = null;
      return this;
    };

    /*コンテンツナビ
     */
    contentsNavi__mouseLocList = [];
    contentsNavi__lastMouseLoc = null;
    contentsNavi__$activatedList = null;
    contentsNavi__timeoutListID = null;
    contentsNavi__timeoutMainMenuID = null;
    contentsNavi__timeoutFixOpen = null;
    contentsNavi__onMouseMove = function(e) {
      return menu__onMouseMove(e, contentsNavi__mouseLocList);
    };
    contentsNavi__onMouseEnterToList = function(e) {
      return menu__onMouseEnterToList(e, contentsNavi__timeoutListID, contentsNavi__timeoutMainMenuID, contentsNavi__lastMouseLoc, contentsNavi__tryToActiveMenu);
    };
    contentsNavi__onMouseLeaveFromMainMenu = function(e) {
      if (e) {
        contentsNavi__timeoutMainMenuID = setTimeout(function() {
          return contentsNavi__tryToDeactiveMenu(false, $(e.currentTarget).children("div").children("ul"));
        }, 300);
      } else {
        contentsNavi__tryToDeactiveMenu(true);
      }
      return this;
    };
    contentsNavi__tryToDeactiveMenu = function(force, target) {
      return menu__tryToDeactiveMenuAlt(force, "#contents__header__navMain", 0, target.height(), contentsNavi__mouseLocList, contentsNavi__timeoutListID, contentsNavi__$activatedList, contentsNavi__deactiveList);
    };
    contentsNavi__tryToActiveMenu = function($li, force) {
      return menu__tryToActiveMenu($li, force, contentsNavi__getDelay, contentsNavi__timeoutListID, contentsNavi__tryToActiveMenu, contentsNavi__activeList, $li);
    };
    contentsNavi__getDelay = function(target) {
      return menu__getDelay(contentsNavi__$activatedList, contentsNavi__mouseLocList, "#contents__header__navMain", 0, target.height(), contentsNavi__lastMouseLoc);
    };
    contentsNavi__activeList = function($li) {
      var withMainMenu;
      withMainMenu = true;
      if (contentsNavi__$activatedList) {
        if ($li.is(contentsNavi__$activatedList)) {
          return;
        }
        contentsNavi__deactiveList(contentsNavi__$activatedList, false);
        withMainMenu = false;
      }
      $li.addClass("open");
      if (contentsNavi__timeoutFixOpen) {
        clearTimeout(contentsNavi__timeoutFixOpen);
      }
      contentsNavi__$activatedList = $li;
      return this;
    };
    contentsNavi__deactiveList = function($li, withMainMenu) {
      if (withMainMenu) {
        if (contentsNavi__timeoutFixOpen) {
          clearTimeout(contentsNavi__timeoutFixOpen);
        }
      }
      $li.removeClass("open");
      contentsNavi__$activatedList = null;
      return this;
    };

    /*
     * .module__scrollMenu（カードリストメニュー）
     */
    moduleScrollMenu__changeActive = function(event) {
      var $current, $parent;
      $current = $(event.currentTarget);
      $parent = $current.closest("li");
      if (!$parent.hasClass("active")) {
        $parent.siblings().removeClass("active");
        return $parent.addClass("active");
      }
    };

    /*
     * .module__cardCarouselList__carouselSp（スマホサイズ時にカルーセル化するカードリストモジュール）
     */
    moduleCardCarouselList__reset = function(eventTarget) {
      var $carousel;
      $carousel = eventTarget;
      $carousel.find(".row-3-3-n-n").css("left", "");
      $carousel.find(".active").removeClass("active");
      $carousel.find(".col").eq(0).addClass("active");
      $carousel.find(".col").css("opacity", "");
      $carousel.find(".module__carouselNavCursor--next").removeClass("hide");
      if (!$carousel.find(".module__carouselNavCursor--prev").hasClass("hide")) {
        return $carousel.find(".module__carouselNavCursor--prev").addClass("hide");
      }
    };
    moduleCardCarouselList__changeAlpha = function() {
      var $carousel;
      $carousel = $(".module__cardCarouselList__carouselSp");
      $carousel.find(".col").css("opacity", "");
      if (716 < $(window).width() && $(window).width() < 758) {
        $carousel.find(".active").prev().css("opacity", 1);
        return $carousel.find(".active").next().css("opacity", 1);
      }
    };
    moduleCardCarouselList__render = function(eventTarget, nextNumber, lengthVal) {
      var baseWidth, moveVal;
      if (nextNumber < 0 || nextNumber > lengthVal) {
        return;
      }
      moduleCardCarouselList__changeAlpha(eventTarget);
      baseWidth = eventTarget.children(".col").width();
      moveVal = (-114) - (nextNumber * baseWidth);
      return eventTarget.transition({
        left: moveVal,
        complete: function() {
          var nextButton, prevButton;
          prevButton = eventTarget.closest(".module__inner").prevAll(".module__carouselNavCursor--prev");
          nextButton = eventTarget.closest(".module__inner").prevAll(".module__carouselNavCursor--next");
          if (nextNumber >= lengthVal) {
            nextButton.addClass("hide");
          } else {
            if (nextButton.hasClass("hide")) {
              nextButton.removeClass("hide");
            }
          }
          if (nextNumber > 0) {
            prevButton.removeClass("hide");
          } else {
            if (!prevButton.hasClass("hide")) {
              prevButton.addClass("hide");
            }
          }
          eventTarget.children(".active").removeClass("active");
          eventTarget.children(".col").eq(nextNumber).addClass("active");
          moduleCardCarouselList__changeAlpha(eventTarget);
          prevButton.removeClass("disable");
          return nextButton.removeClass("disable");
        }
      });
    };
    moduleCardCarouselList__onClickNav = function(e) {
      var cardLength, cardList, currentCardCarousel, nextButton, nextNum, prevButton;
      if ($(e.currentTarget).hasClass("disable")) {
        return false;
      } else {
        if ($(e.currentTarget).hasClass("module__carouselNavCursor--prev")) {
          prevButton = $(e.currentTarget);
          nextButton = prevButton.next(".module__carouselNavCursor--next");
          nextNum = -1;
        } else {
          nextButton = $(e.currentTarget);
          prevButton = nextButton.prev(".module__carouselNavCursor--next");
          nextNum = 1;
        }
        prevButton.addClass("disable");
        nextButton.addClass("disable");
        cardList = $(e.currentTarget).nextAll(".module__inner").children(".row-3-3-n-n");
        cardLength = cardList.children(".col").length - 1;
        currentCardCarousel = cardList.children(".active").index() + nextNum;
        return moduleCardCarouselList__render(cardList, currentCardCarousel, cardLength);
      }
    };
    moduleCardCarouselList__swipeDirection = "";
    moduleCardCarouselList__swipePosition = {};
    moduleCardCarouselList__getPosition = function(e) {
      return e.originalEvent.touches[0].pageX || e.pageX;
    };
    moduleCardCarouselList__onTouchStart = function(e) {
      moduleCardCarouselList__swipePosition = moduleCardCarouselList__getPosition(e);
      return moduleCardCarouselList__swipeDirection = '';
    };
    moduleCardCarouselList__onTouchMove = function(e) {
      if (moduleCardCarouselList__swipePosition - moduleCardCarouselList__getPosition(e) > 70) {
        return moduleCardCarouselList__swipeDirection = 'left';
      } else if (moduleCardCarouselList__swipePosition - moduleCardCarouselList__getPosition(e) < -70) {
        return moduleCardCarouselList__swipeDirection = 'right';
      }
    };
    moduleCardCarouselList__onTouchEnd = function(e) {
      var cardLength, cardList, currentCardCarousel;
      if (moduleCardCarouselList__swipeDirection !== '') {
        cardList = $(e.currentTarget).children("div");
        cardLength = cardList.children(".col").length - 1;
        if (moduleCardCarouselList__swipeDirection === 'left') {
          currentCardCarousel = cardList.children(".active").index() + 1;
        } else if (moduleCardCarouselList__swipeDirection === 'right') {
          currentCardCarousel = cardList.children(".active").index() - 1;
        }
        if (!(currentCardCarousel < 0 || currentCardCarousel > cardLength)) {
          return moduleCardCarouselList__render(cardList, currentCardCarousel, cardLength);
        }
      }
    };

    /*
     * .module__cardCarouselList（スマホサイズ時にカルーセル化するカードリストモジュール）
     */
    infinity__cardDetailCarouselList__bringElementFrontNum = 12;
    infinity__cardDetailCarouselList__isAnimate = false;
    infinity__cardDetailCarouselList__timer;
    infinity__cardDetailCarouselList__autoSlide = function() {
      infinity__cardDetailCarouselList__timer = setTimeout(function(){
        $("#contents__card__personal__detail__carousel .module__carouselNavCursor--next").trigger('click');
      }, 3000);
    };
    infinity__cardDetailCarouselList__autoSlideCansel = function() {
      clearTimeout(infinity__cardDetailCarouselList__timer);
    };
    infinity__cardDetailCarouselList__ini = function($carousel) {
      var offset = parseInt($carousel.find('.row-3-3-n-n')[0].getAttribute('data-left'), 10);
      var newOffset = offset - $carousel.find('.col').eq(1).outerWidth(true) * infinity__cardDetailCarouselList__bringElementFrontNum;
      $carousel.find(".row-3-3-n-n").css("left", newOffset);
    };
    infinity__cardDetailCarouselList__reset = function($carousel) {
      infinity__cardDetailCarouselList__autoSlideCansel();
    };
    infinity__cardDetailCarouselList__changeAlpha = function() {
      var $carousel;
      if (document.getElementById("contents__card__personal__detail__carousel") !== null) {
        $carousel = $("#contents__card__personal__detail__carousel");
        $carousel.find(".module__carouselNavCursor--next").removeClass("hide");
        $carousel.find(".module__carouselNavCursor--prev").removeClass("hide");
        $carousel.find(".row-3-3-n-n")[0].setAttribute('data-left', -114);
        $carousel.find(".col").css("opacity", "");
        // カードのアクティブ化
        if (1740 < $(window).width()) {
          $carousel.find(".active").prev().css("opacity", 1);
          $carousel.find(".active").prev().prev().css("opacity", 1);
          $carousel.find(".active").next().css("opacity", 1);
          $carousel.find(".active").next().next().css("opacity", 1);
        } else if (1066 < $(window).width()) {
          $carousel.find(".active").prev().css("opacity", 1);
          $carousel.find(".active").next().css("opacity", 1);
        }
      }
    };
    infinity__cardDetailCarouselList__render = function(dots, eventTarget, lengthVal, mode) {
      var baseWidth, moveVal;
      var keyIndex;
      infinity__cardDetailCarouselList__changeAlpha();
      baseWidth = eventTarget.children(".col").eq(1).outerWidth(true);
      if(mode == 'next'){
        keyIndex = infinity__cardDetailCarouselList__bringElementFrontNum + 1;
      }else if(mode == 'prev'){
        keyIndex = infinity__cardDetailCarouselList__bringElementFrontNum - 1;
      }
      moveVal = eventTarget[0].getAttribute('data-left') - (keyIndex * baseWidth);
      return eventTarget.transition({
        left: moveVal,
        complete: function() {
          infinity__cardDetailCarouselList__isAnimate = false;
          var nextButton, prevButton;
          var currentActiveDot, nextActiveDot;
          prevButton = eventTarget.closest(".module__inner").prevAll(".module__carouselNavCursor--prev");
          nextButton = eventTarget.closest(".module__inner").prevAll(".module__carouselNavCursor--next");
          currentActiveDot = dots.children(".active");
          if(mode == 'next'){
            eventTarget.append(eventTarget.find('.col').eq(0));
            nextActiveDot = currentActiveDot.next();
            if(nextActiveDot.length == 0){
              nextActiveDot = dots.children().eq(0);
            }
          }else if(mode == 'prev'){
            eventTarget.prepend(eventTarget.find('.col').eq(-1));
            nextActiveDot = currentActiveDot.prev();
            if(nextActiveDot.length == 0){
              nextActiveDot = dots.children().eq(-1);
            }
          }
          eventTarget.css({left: eventTarget[0].getAttribute('data-left') - (baseWidth * infinity__cardDetailCarouselList__bringElementFrontNum)});
          eventTarget.children(".active").removeClass("active");
          eventTarget.children(".col").eq(infinity__cardDetailCarouselList__bringElementFrontNum).addClass("active");
          nextActiveDot.addClass("active");
          currentActiveDot.removeClass("active");
          infinity__cardDetailCarouselList__changeAlpha();
          infinity__cardDetailCarouselList__autoSlide();
        }
      });
    };
    infinity__cardDetailCarouselList__onClickNav = function(e) {
      var cardLength, cardList, nextButton, prevButton, dots;
      var mode;
      infinity__cardDetailCarouselList__autoSlideCansel();
      if (infinity__cardDetailCarouselList__isAnimate){
        return false;
      } else {
        infinity__cardDetailCarouselList__isAnimate = true;
        if ($(e.currentTarget).hasClass("module__carouselNavCursor--prev")) {
          prevButton = $(e.currentTarget);
          nextButton = prevButton.next(".module__carouselNavCursor--next");
          mode = 'prev';
        } else {
          nextButton = $(e.currentTarget);
          prevButton = nextButton.prev(".module__carouselNavCursor--prev");
          mode = 'next';
        }
        cardList = $(e.currentTarget).parents(".module__cardCarouselList").eq(0).find(".row-3-3-n-n");
        cardLength = cardList.children(".col").length - 1;
        dots = $(e.currentTarget).parents(".module__cardCarouselList").eq(0).next('ul');
        return infinity__cardDetailCarouselList__render(dots, cardList, cardLength, mode);
      }
    };
    infinity__cardDetailCarouselList__swipeDirection = "";
    infinity__cardDetailCarouselList__swipePosition = {};
    infinity__cardDetailCarouselList__getPosition = function(e) {
      return e.originalEvent.touches[0].pageX || e.pageX;
    };
    infinity__cardDetailCarouselList__onTouchStart = function(e) {
      infinity__cardDetailCarouselList__autoSlideCansel();
      infinity__cardDetailCarouselList__swipePosition = infinity__cardDetailCarouselList__getPosition(e);
      return infinity__cardDetailCarouselList__swipeDirection = '';
    };
    infinity__cardDetailCarouselList__onTouchMove = function(e) {
      if (infinity__cardDetailCarouselList__swipePosition - infinity__cardDetailCarouselList__getPosition(e) > 70) {
        return infinity__cardDetailCarouselList__swipeDirection = 'next';
      } else if (infinity__cardDetailCarouselList__swipePosition - infinity__cardDetailCarouselList__getPosition(e) < -70) {
        return infinity__cardDetailCarouselList__swipeDirection = 'prev';
      }
    };
    infinity__cardDetailCarouselList__onTouchEnd = function(e) {
      if(infinity__cardDetailCarouselList__isAnimate){
        return false;
      }else{
        var cardLength, cardList, dots;
        if (infinity__cardDetailCarouselList__swipeDirection !== '') {
          infinity__cardDetailCarouselList__autoSlideCansel();
          infinity__cardDetailCarouselList__isAnimate = true;
          cardList = $(e.currentTarget).children("div");
          cardLength = cardList.children(".col").length - 1;
          dots = $(e.currentTarget).parents(".module__cardCarouselList").eq(0).next('ul');
          return infinity__cardDetailCarouselList__render(dots, cardList, cardLength, infinity__cardDetailCarouselList__swipeDirection);
        }else{
          infinity__cardDetailCarouselList__autoSlide();
        }
      }
    };
    infinity__cardDetailCarouselList__dotClick = function(e) {
      if (infinity__cardDetailCarouselList__isAnimate){
        return false;
      }else{
        var dots = $(e.currentTarget);
        var thisElm = $(e.target);
        var thisBro = $('#contents__card__personal__detail__carousel__nav li a');
        var currentActiveDot = dots.children(".active");
        var currentActiveDotIndex = dots.children("li").index(currentActiveDot);
        var nextActiveDotIndex = thisBro.index(thisElm);
        var nextActiveDot = dots.children("li").eq(nextActiveDotIndex);
        var indexDiff = nextActiveDotIndex - currentActiveDotIndex;
        var mode;
        if(nextActiveDotIndex < 0){return;}
        var eventTarget = dots.parents("#contents__card__personal__detail__carousel").eq(0).find(".row-3-3-n-n");
        if(indexDiff == 0){
          return;
        }else if(indexDiff > 0){
          mode = 'next';
        }else if(indexDiff < 0){
          mode = 'prev';
        }
        infinity__cardDetailCarouselList__isAnimate = true;
        infinity__cardDetailCarouselList__autoSlideCansel();
        var baseWidth, moveVal;
        var keyIndex;
        infinity__cardDetailCarouselList__changeAlpha();
        baseWidth = eventTarget.children(".col").eq(1).outerWidth(true);
        if(mode == 'next'){
          keyIndex = infinity__cardDetailCarouselList__bringElementFrontNum + indexDiff;
        }else if(mode == 'prev'){
          keyIndex = infinity__cardDetailCarouselList__bringElementFrontNum + indexDiff;
        }
        moveVal = eventTarget[0].getAttribute('data-left') - (keyIndex * baseWidth);
        return eventTarget.transition({
          left: moveVal,
          complete: function() {
            infinity__cardDetailCarouselList__isAnimate = false;
            var nextButton, prevButton;
            var currentActiveDot;
            prevButton = eventTarget.closest(".module__inner").prevAll(".module__carouselNavCursor--prev");
            nextButton = eventTarget.closest(".module__inner").prevAll(".module__carouselNavCursor--next");
            currentActiveDot = dots.children(".active");
            if(mode == 'next'){
              for(var i = 0; i < Math.abs(indexDiff); i++){
                eventTarget.append(eventTarget.find('.col').eq(0));
              }
            }else if(mode == 'prev'){
              for(var i = 0; i < Math.abs(indexDiff); i++){
                eventTarget.prepend(eventTarget.find('.col').eq(-1));
              }
            }
            eventTarget.css({left: eventTarget[0].getAttribute('data-left') - (baseWidth * infinity__cardDetailCarouselList__bringElementFrontNum)});
            eventTarget.children(".active").removeClass("active");
            eventTarget.children(".col").eq(infinity__cardDetailCarouselList__bringElementFrontNum).addClass("active");
            nextActiveDot.addClass("active");
            currentActiveDot.removeClass("active");
            infinity__cardDetailCarouselList__changeAlpha();
            infinity__cardDetailCarouselList__autoSlide();
          }
        });
      }
    };

    /* fixedトップへ戻るボタン（スクロールすると出てくるトップへ戻るボタン）
     */
    goToTop__fixedMovePageTopFlag = false;
    goToTop__timerIDFixedMovePageTop = {};
    goToTop__checkfixedMovePageTopFlag = function() {
      if (goToTop__fixedMovePageTopFlag) {
        if (!$("#fixedMovePageTop").hasClass("fixed")) {
          return $("#fixedMovePageTop").addClass("fixed");
        }
      } else {
        if ($("#fixedMovePageTop").hasClass("fixed")) {
          return $("#fixedMovePageTop").removeClass("fixed");
        }
      }
    };
    goToTop__changefixedMovePageTopFlag = function(scrollVal) {
      var wh;
      wh = $(window).height();
      if (scrollVal > 0 && scrollVal + wh < $("#footer__companySet").offset().top) {
        if (!goToTop__fixedMovePageTopFlag) {
          goToTop__fixedMovePageTopFlag = true;
        }
      } else {
        goToTop__fixedMovePageTopFlag = false;
      }
      clearTimeout(goToTop__timerIDFixedMovePageTop);
      return goToTop__timerIDFixedMovePageTop = setTimeout(function() {
        return goToTop__checkfixedMovePageTopFlag();
      }, 100);
    };

    /* footerトップへ戻るボタン、fixedトップへ戻るボタン（スクロールすると出てくるトップへ戻るボタン）
     */
    goToTop__onClickScrollTop = function() {
      return $("html, body").animate({
        scrollTop: 0
      }, 400, "easeInOutExpo");
    };
    onScrollWindowL_XL = function(e) {
      var s;
      s = $(this).scrollTop();
      if (document.getElementById("contents__header") !== null) {
        if ($("#contents__header__nav").hasClass("fixed")) {
          if (s <= $("#contents__header").offset().top + 12) {
            $("#contents__header__nav").removeClass("fixed");
          }
        } else {
          if (s > $("#contents__header").offset().top + 12) {
            $("#contents__header__nav").addClass("fixed");
          }
        }
      }
      if (!$("body").hasClass("no-fixedmovetop")) {
        goToTop__changefixedMovePageTopFlag(s);
      }
      if ($(".module__cardDetailFixedMenu").length > 0) {
        if ($(".module__cardDetailFixedMenu").hasClass("fixed")) {
          if (s > $(".module__cardDetailFixedMenu").offset().top - $(window).height() + 80) {
            $(".module__cardDetailFixedMenu").removeClass("fixed");
          }
        } else {
          if (s <= $(".module__cardDetailFixedMenu").offset().top - $(window).height() + 80) {
            $(".module__cardDetailFixedMenu").addClass("fixed");
          }
        }
      }
      if (document.getElementById("contents__campaign__detail__form") !== null) {
        if ($("#contents__campaign__detail__form").hasClass("fixed")) {
          if (s > $("#footer").offset().top - $(window).height()) {
            return $("#contents__campaign__detail__form").removeClass("fixed");
          }
        } else {
          if (s <= $("#footer").offset().top - $(window).height()) {
            return $("#contents__campaign__detail__form").addClass("fixed");
          }
        }
      }
    };
    onScrollWindowS_M = function(e) {
      var s;
      s = $(this).scrollTop();
      if (!$("body").hasClass("no-fixedmovetop")) {
        goToTop__changefixedMovePageTopFlag(s);
      }
      if ($(".module__cardDetailFixedMenu").length > 0) {
        if ($(".module__cardDetailFixedMenu").hasClass("fixed")) {
          if (s > $(".module__cardDetailFixedMenu").offset().top - $(window).height() + 60) {
            $(".module__cardDetailFixedMenu").removeClass("fixed");
          }
        } else {
          if (s <= $(".module__cardDetailFixedMenu").offset().top - $(window).height() + 60) {
            $(".module__cardDetailFixedMenu").addClass("fixed");
          }
        }
      }
      if (document.getElementById("contents__campaign__detail__form") !== null) {
        if ($("#contents__campaign__detail__form").hasClass("fixed")) {
          if (s > $("#footer").offset().top - $(window).height()) {
            return $("#contents__campaign__detail__form").removeClass("fixed");
          }
        } else {
          if (s <= $("#footer").offset().top - $(window).height()) {
            return $("#contents__campaign__detail__form").addClass("fixed");
          }
        }
      }
    };
    common = function() {

      /* パン屑右寄せ
       */
      if (document.getElementById("contents__header") !== null) {
        $(".breadcrumbs ul").scrollLeft($(".breadcrumbs ul").width());
      }

      /* fixedトップへ戻るボタン
       */
      if (!$("body").hasClass("no-fixedmovetop")) {
        $("#wrapper").append("<div id=\"fixedMovePageTop\"><a href=\"javascript:void(0);\"><span>↑</span></a></div>");
        $("#fixedMovePageTop a").on("click", goToTop__onClickScrollTop);
      }

      /* footerトップへ戻るボタン
       */
      if (document.getElementById("footer__movePageTop") !== null) {
        $("#footer__movePageTop a").on("click", goToTop__onClickScrollTop);
      }

      /* 個人クレジットカード詳細 カード基本情報テーブル
       */
      if ($(".module__scrollMenu").length > 0) {
        return $(".module__scrollMenu").each(function(index) {
          return $(this).find("a").on("click", moduleScrollMenu__changeActive);
        });
      }
    };
    onL_XL = function() {
      var filter, path;
      $(window).on("scroll", onScrollWindowL_XL);
      onScrollWindowL_XL(null);

      /* ナビ検索 開閉
       */
      $("#header__navSearch").on("click", navSearch__onMouseClickNavSearch);
      $("#header__navSearch form").on({
        "mouseenter": navSearch__onMouseEnterNavSearch,
        "mouseleave": navSearch__onMouseLeaveNavSearch
      });
      $("#header__navSearch input[type=search]").on("focusin", function() {
        $(window).on("keydown", function(e) {
          if (e.keyCode === 9) {
            navSearch__onMouseLeaveNavSearch();
            return navSearch__onBlurNavSearch();
          }
        });
        return navSearch__onMouseClickNavSearch();
      });
      $("#header__navSearch input[type=search]").on("focusout", function() {
        return $(window).off("keydown");
      });
      $("#header__navSearch input").on("blur", navSearch__onBlurNavSearch);
      if ($(".module__hero").length > 0) {
        path = "/common_new/images/common/";
        if ($("body").hasClass("service")) {
          filter = path + "bg_servicefilter.png";
        } else if ($("body").hasClass("whyjcb")) {
          filter = path + "bg_servicefilter-sp.png";
        } else {
          filter = path + "bg_herofilter.png";
        }
        if (!$("html").hasClass("lt-ie9")) {
          $(".module__hero").each(function(index) {
            if ($(this).data("background")) {
              $(this).css("background-image", "url(" + filter + "), url(" + $(this).data("background") + ")");
              $(this).css("background-repeat", "repeat-x, no-repeat");
              return $(this).css("background-size", "1px 100%, cover");
            }
          });
        } else {
          $(".module__hero").each(function(index) {
            if ($(this).data("background")) {
              $(this).append('<div class="iefilter" style="position:absolute;top:0;left:0;width:100%;px;height:100%;background-image:url(' + filter + ');background-repeat:repeat-x;z-index:1;"></div>');
              return $(this).css("background-image", "url(" + $(this).data("background") + ")");
            }
          });
        }
      }
      if (device.desktop()) {
        $(document).on("mousemove", mainMenu__onMouseMove);
        $(document).on("mousemove", globalMenu__onMouseMove);
        $(document).on("mousemove", contentsNavi__onMouseMove);
        $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").on("mouseenter", mainMenu__onMouseEnterToList);
        $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").on("focusin", function(e) {
          return mainMenu__tryToActiveMenuAlt($(e.currentTarget));
        });
        $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").on("mouseleave", mainMenu__onMouseLeaveFromMainMenu);
        $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").on("focusout", mainMenu__onKeyLeaveFromMainMenu);
        $("#header__navItem--memberstore--examineMemberstore, #header__navItems--memberstore--everyoneOfMemberstore, #header__navItems--memberstore--request, #header__navItems--memberstore--service").on("mouseenter", mainMenu__onMouseLeaveFromMainMenu);
        $("#header__navItem--memberstore--examineMemberstore, #header__navItems--memberstore--everyoneOfMemberstore, #header__navItems--memberstore--request, #header__navItems--memberstore--service").on("focusin", mainMenu__onKeyLeaveFromMainMenu);
        $("#header__navGlobal__support, #header__navGlobal__proc, #header__navGlobal__contact, #header__navGlobal__news, #header__navGlobal__chooseRegion").on("mouseenter focusin", globalMenu__onMouseEnterToList);
        $("#header__navGlobal__support, #header__navGlobal__proc, #header__navGlobal__contact, #header__navGlobal__news, #header__navGlobal__chooseRegion").on("mouseleave focusout", globalMenu__onMouseLeaveFromMainMenu);
        $("#contents__headerNavMainItem--basic, #contents__headerNavMainItem--travel, #contents__headerNavMainItem--entertainment, #contents__headerNavMainItem--life").on("mouseenter focusin", contentsNavi__onMouseEnterToList);
        $("#contents__headerNavMainItem--basic, #contents__headerNavMainItem--travel, #contents__headerNavMainItem--entertainment, #contents__headerNavMainItem--life").on("mouseleave focusout", contentsNavi__onMouseLeaveFromMainMenu);
      } else {
        $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").on("click", function(e) {
          if ($(e.currentTarget).hasClass("open")) {
            $("#header").removeClass("open");
            return $(e.currentTarget).removeClass("open");
          } else {
            if ($(e.currentTarget).siblings().hasClass("open")) {
              $(e.currentTarget).siblings().removeClass("open");
              return $(e.currentTarget).siblings().on("transitionend", function() {
                console.log("transitionend");
                $(e.currentTarget).addClass("open");
                return $(e.currentTarget).siblings().off("transitionend");
              });
            } else {
              $("#header").addClass("open");
              return $(e.currentTarget).addClass("open");
            }
          }
        });
        $("#header__navGlobal__support h3 > a, #header__navGlobal__proc h3 > a, #header__navGlobal__contact h3 > a, #header__navGlobal__news h3 > a, #header__navGlobal__chooseRegion h3 > a").on("click", function(e) {
          return e.preventDefault();
        });
        $("#header__navGlobal__proc, #header__navGlobal__contact, #header__navGlobal__news, #header__navGlobal__chooseRegion").on("click", function(e) {
          if ($(this).hasClass("open")) {
            return $(this).removeClass("open");
          } else {
            $("#header__navGlobal ul li").removeClass("open");
            return $(this).addClass("open");
          }
        });
        $("#header__navGlobal__support, #header__navGlobal__chooseRegion").on("click", function(e) {
          if ($(this).hasClass("open")) {
            return $(this).removeClass("open");
          } else {
            return $(this).addClass("open");
          }
        });
        $(document).on('touchend', function(e) {
          var $elm;
          $elm = $(e.target).closest('li');
          if ($elm.length) {
            if ($elm.attr("id") === "contents__headerNavMainItem--basic" || $elm.attr("id") === "contents__headerNavMainItem--travel" || $elm.attr("id") === "contents__headerNavMainItem--entertainment" || $elm.attr("id") === "contents__headerNavMainItem--life") {
              if ($elm.hasClass("open")) {
                return $elm.removeClass("open");
              } else {
                return $elm.addClass("open");
              }
            }
          } else {
            if ($elm.hasClass("open")) {
              return $elm.removeClass("open");
            }
          }
        });
      }

      /* .module__cardCarouselList__carouselSp 端数中央寄せ
       */
      if ($(".module__cardCarouselList__carouselSp").length > 0) {
        return $(".module__cardCarouselList__carouselSp").each(function(index) {
          var l;
          l = $(this).find(".col").length;
          if ($(this).find(".col").length % 3 === 1) {
            $(this).find(".col:last-child").css({
              "float": "none",
              "margin": "0 auto"
            });
            return $(this).find(".col:last-child .content").css({
              "padding-right": "0"
            });
          } else if ($(this).find(".col").length % 3 === 2) {
            if ($("html").hasClass("lt-ie9")) {
              $(this).find(".col:nth-last-child(2)").css({
                "margin-left": "16.5%"
              });
              return $(this).find(".col:nth-last-child(2) .content").css({
                "padding-left": "12px"
              });
            } else {
              $(this).find(".col:last-child").css({
                "position": "relative",
                "left": "16.5%"
              });
              $(this).find(".col:nth-last-child(2)").css({
                "position": "relative",
                "left": "16.5%"
              });
              return $(this).find(".col:nth-last-child(2) .content").css({
                "padding-left": "12px"
              });
            }
          }
        });
      }

      /* .module__cardCarouselList 端数中央寄せ
       */
      if ($(".module__cardCarouselList").length > 0) {
        return $(".module__cardCarouselList").each(function(index) {
          var l;
          l = $(this).find(".col").length;
          if ($(this).find(".col").length % 3 === 1) {
            $(this).find(".col:last-child").css({
              "float": "none",
              "margin": "0 auto"
            });
            return $(this).find(".col:last-child .content").css({
              "padding-right": "0"
            });
          } else if ($(this).find(".col").length % 3 === 2) {
            if ($("html").hasClass("lt-ie9")) {
              $(this).find(".col:nth-last-child(2)").css({
                "margin-left": "16.5%"
              });
              return $(this).find(".col:nth-last-child(2) .content").css({
                "padding-left": "12px"
              });
            } else {
              $(this).find(".col:last-child").css({
                "position": "relative",
                "left": "16.5%"
              });
              $(this).find(".col:nth-last-child(2)").css({
                "position": "relative",
                "left": "16.5%"
              });
              return $(this).find(".col:nth-last-child(2) .content").css({
                "padding-left": "12px"
              });
            }
          }
        });
      }
    };
    offL_XL = function() {
      var l;
      $(window).off("scroll");

      /* ナビ検索 開閉
       */
      $("#header__navSearch").off("click");
      $("#header__navSearch form").off("mouseenter mouseleave");
      $("#header__navSearch input").off("blur");

      /* .module__hero PCスマホ画像出しわけ
       */
      if ($(".module__hero").length > 0) {
        if ($(this).data("background")) {
          if (!$("html").hasClass("lt-ie9")) {
            $(".module__hero").each(function(index) {
              $(this).css("background-image", "");
              $(this).css("background-repeat", "");
              return $(this).css("background-size", "");
            });
          } else {
            $(".module__hero").each(function(index) {
              if ($(this).data("background")) {
                $(this).find(".iefilter").remove();
                return $(this).css("background-image", "");
              }
            });
          }
        }
      }
      if (device.desktop()) {
        $(document).off("mousemove", mainMenu__onMouseMove);
        $(document).off("mousemove", globalMenu__onMouseMove);
        $(document).off("mousemove", contentsNavi__onMouseMove);
        $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").off("mouseenter focusin");
        $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").off("mouseleave focusout");
        $("#header__navItem--memberstore--examineMemberstore, #header__navItems--memberstore--everyoneOfMemberstore, #header__navItems--memberstore--request, #header__navItems--memberstore--service").off("mouseenter focusin");
        $("#header__navGlobal__support, #header__navGlobal__proc, #header__navGlobal__contact, #header__navGlobal__news, #header__navGlobal__chooseRegion").off("mouseenter focusin");
        $("#header__navGlobal__support, #header__navGlobal__proc, #header__navGlobal__contact, #header__navGlobal__news, #header__navGlobal__chooseRegion").off("mouseleave focusout");
      } else {
        $("#header__navMain ul.nav > li:not(#header__navItem--memberstore--examineMemberstore):not(#header__navItems--memberstore--everyoneOfMemberstore):not(#header__navItems--memberstore--request):not(#header__navItems--memberstore--service)").off("click");
        $("#header__navMain ul.nav").off("mouseleave focusout");
        $("#header__navGlobal__support h3 > a, #header__navGlobal__proc h3 > a, #header__navGlobal__contact h3 > a, #header__navGlobal__news h3 > a, #header__navGlobal__chooseRegion h3 > a").off("click");
        $("#header__navGlobal__support, #header__navGlobal__proc, #header__navGlobal__contact, #header__navGlobal__news, #header__navGlobal__chooseRegion").off("click");
      }

      /* .module__cardCarouselList__carouselSp 端数中央寄せ
       */
      if ($(".module__cardCarouselList__carouselSp").length > 0) {
        l = $(this).find(".col").length;
        return $(".module__cardCarouselList__carouselSp").each(function(index) {
          l = $(this).find(".col").length;
          if ($(this).find(".col").length % 3 === 1) {
            $(this).find(".col:last-child").css({
              "float": "",
              "margin": ""
            });
            return $(this).find(".col:last-child .content").css({
              "padding-right": ""
            });
          } else if ($(this).find(".col").length % 3 === 2) {
            if ($("html").hasClass("lt-ie9")) {
              $(this).find(".col:nth-last-child(2)").css({
                "margin-left": ""
              });
              return $(this).find(".col:nth-last-child(2) .content").css({
                "padding-left": ""
              });
            } else {
              $(this).find(".col:last-child").css({
                "position": "",
                "padding-left": "",
                "left": ""
              });
              $(this).find(".col:nth-last-child(2)").css({
                "position": "",
                "left": ""
              });
              return $(this).find(".col:nth-last-child(2) .content").css({
                "padding-left": "12px"
              });
            }
          }
        });
      }

      /* .module__cardCarouselList 端数中央寄せ
       */
      if ($(".module__cardCarouselList").length > 0) {
        l = $(this).find(".col").length;
        return $(".module__cardCarouselList").each(function(index) {
          l = $(this).find(".col").length;
          if ($(this).find(".col").length % 3 === 1) {
            $(this).find(".col:last-child").css({
              "float": "",
              "margin": ""
            });
            return $(this).find(".col:last-child .content").css({
              "padding-right": ""
            });
          } else if ($(this).find(".col").length % 3 === 2) {
            if ($("html").hasClass("lt-ie9")) {
              $(this).find(".col:nth-last-child(2)").css({
                "margin-left": ""
              });
              return $(this).find(".col:nth-last-child(2) .content").css({
                "padding-left": ""
              });
            } else {
              $(this).find(".col:last-child").css({
                "position": "",
                "padding-left": "",
                "left": ""
              });
              $(this).find(".col:nth-last-child(2)").css({
                "position": "",
                "left": ""
              });
              return $(this).find(".col:nth-last-child(2) .content").css({
                "padding-left": "12px"
              });
            }
          }
        });
      }
    };
    onS_M = function() {
      var filter, path;
      $(window).on("scroll", onScrollWindowS_M);
      onScrollWindowS_M(null);

      /* .module__hero PCスマホ画像出しわけ
       */
      if ($(".module__hero").length > 0) {
        path = "/common_new/images/common/";
        if ($("body").hasClass("service") || $("body").hasClass("whyjcb")) {
          filter = path + "bg_servicefilter-sp.png";
        } else {
          filter = path + "bg_herofilter.png";
        }
        $(".module__hero").each(function(index) {
          if ($(this).data("background")) {
            $(this).css("background-image", "url(" + filter + "), url(" + $(this).data("backgroundSmall") + ")");
            $(this).css("background-repeat", "repeat, no-repeat");
            return $(this).css("background-size", "1px 100%, cover");
          }
        });
      }

      /* .module__cardCarouselList__carouselSp（スマホサイズ時にカルーセル化するカードリストモジュール）
       */
      if ($(".module__cardCarouselList__carouselSp").length > 0) {
        $(".module__cardCarouselList__carouselSp").each(function(index) {
          $(this).find(".module__carouselNavCursor--prev, .module__carouselNavCursor--next").on("click", moduleCardCarouselList__onClickNav);
          $(this).find(".module__inner").on("touchstart", moduleCardCarouselList__onTouchStart);
          $(this).find(".module__inner").on("touchmove", moduleCardCarouselList__onTouchMove);
          $(this).find(".module__inner").on("touchend", moduleCardCarouselList__onTouchEnd);
          $(window).on("resize", moduleCardCarouselList__changeAlpha);
          return moduleCardCarouselList__changeAlpha();
        });
      }

      /* .module__cardCarouselList（スマホサイズ時にカルーセル化するカードリストモジュール）
       */
      if (document.getElementById("contents__card__personal__detail__carousel") !== null) {
        $carousel = $("#contents__card__personal__detail__carousel");
        $carousel.find(".module__carouselNavCursor--prev, .module__carouselNavCursor--next").on("click", infinity__cardDetailCarouselList__onClickNav);
        $carousel.find(".module__inner").on("touchstart", infinity__cardDetailCarouselList__onTouchStart);
        $carousel.find(".module__inner").on("touchmove", infinity__cardDetailCarouselList__onTouchMove);
        $carousel.find(".module__inner").on("touchend", infinity__cardDetailCarouselList__onTouchEnd);
        $carousel.find("#contents__card__personal__detail__carousel__nav").on("click", infinity__cardDetailCarouselList__dotClick);
        $(window).on("resize", infinity__cardDetailCarouselList__changeAlpha);
        infinity__cardDetailCarouselList__changeAlpha();
        infinity__cardDetailCarouselList__ini($carousel);
        infinity__cardDetailCarouselList__autoSlide();
      }

      /* iOS用 ナビに使用しているcheckboxの反応改善
       */
      if (device.ios()) {
        $('body').on('touchstart', function() {});
        return $("#header_navToggle, .nav input[type=checkbox]").on("touchstart", function(e) {
          $(this).on("touchmove", function(e) {
            $(this).off("touchmove");
            return $(this).off("touchend");
          });
          return $(this).on("touchend", function(e) {
            e.preventDefault();
            $(this).prop("checked", !$(this).prop('checked'));
            $(this).off("touchmove");
            return $(this).off("touchend");
          });
        });
      }
    };
    offS_M = function() {
      $(window).off("scroll");

      /* .module__hero PCスマホ画像出しわけ
       */
      if ($(".module__hero").length > 0) {
        $(".module__hero").each(function(index) {
          if ($(this).data("background")) {
            $(this).css("background-image", "");
            $(this).css("background-repeat", "");
            return $(this).css("background-size", "");
          }
        });
      }

      /* .module__cardCarouselList__carouselSp（スマホサイズ時にカルーセル化するカードリストモジュール）
       */
      if ($(".module__cardCarouselList__carouselSp").length > 0) {
        $(".module__cardCarouselList__carouselSp").each(function(index) {
          $(this).find(".module__carouselNavCursor--prev, .module__carouselNavCursor--next").off("click");
          $(this).find(".module__inner").off("touchstart");
          $(this).find(".module__inner").off("touchmove");
          $(this).find(".module__inner").off("touchend");
          $(window).off("resize", moduleCardCarouselList__changeAlpha);
          return moduleCardCarouselList__reset($(this));
        });
      }

      /* .module__cardCarouselList（スマホサイズ時にカルーセル化するカードリストモジュール）
       */
      if (document.getElementById("contents__card__personal__detail__carousel") !== null) {
        $carousel = $("#contents__card__personal__detail__carousel");
        $carousel.find(".module__carouselNavCursor--prev, .module__carouselNavCursor--next").off("click", infinity__cardDetailCarouselList__onClickNav);
        $carousel.find(".module__inner").find(".module__inner").off("touchstart", infinity__cardDetailCarouselList__onTouchStart);
        $carousel.find(".module__inner").find(".module__inner").off("touchmove", infinity__cardDetailCarouselList__onTouchMove);
        $carousel.find(".module__inner").find(".module__inner").off("touchend", infinity__cardDetailCarouselList__onTouchEnd);
        $carousel.find("#contents__card__personal__detail__carousel__nav").off("click", infinity__cardDetailCarouselList__dotClick);
        $(window).off("resize", infinity__cardDetailCarouselList__changeAlpha);
        return infinity__cardDetailCarouselList__reset($(this));
      }

      /* iOS用 ナビに使用しているcheckboxの反応改善
       */
      if (device.ios()) {
        $('body').off('touchstart');
        return $("#header__navToggle, .nav input[type=checkbox]").off("touchstart");
      }
    };
    init();
  });

}).call(this);

jQuery(function($){
  var thisPathname = location.pathname;
  var thisHash = location.hash;
  var disable_arr = ['/campaign/'];
  var isValidToAddSection = true;
  for(var i = 0, len = disable_arr.length; i < len; i++){
    if(thisPathname.substring(0, (disable_arr[i]).length) == disable_arr[i]){
      isValidToAddSection = false;
    }
  }
  if(isValidToAddSection){
    $('body:not(.carddetail) .mainContents .contents__inner').each(function(){
      var thisElm = $(this);
      if(thisElm.parents('.contents__inner').length == 0 && thisElm.parents('.areaWhite').length == 0 && thisElm.parents('.relationBlock').length == 0 && thisElm.parents('#contents__corporate__owner__recommendation').length == 0){
        $(this).wrap('<section></section>');
      }
    });
    if($(thisHash).length){
      smoothAnchorScroll(thisHash);
    }
  }
  /* fixPosition */
  $(document).ready(function(){
    if($(thisHash).length){
      smoothAnchorScroll(thisHash);
    }
  });
  /* smooth anchor scroll */
  $(document).on('click', 'a', function(e){
    if(this.href.indexOf(location.pathname) > -1 && this.href.indexOf('#') > -1 || this.href.indexOf('#') == 0){
      smoothAnchorScroll(this.hash);
    }
  });

  function smoothAnchorScroll(thisHash){
    var headerElm = $('#contents__header__nav');
    if($(thisHash).is(':hidden')){
      var hiddenParent = $(thisHash).parents('.contents__card__personal__detail__toggleContent').eq(0);
      hiddenParent.show();
      hiddenParent.next('.contents__card__personal__detail__toggleButtonWrapper').find('.module--button--toggle--changeText').addClass('open');
    }
    var to = thisHash == '' ? 0 : $(thisHash).offset().top,
    hh = headerElm.length > 0 ? headerElm.outerHeight(true) : 0;
    if(headerElm.length > 0 && window.matchMedia('(min-width: 768px)').matches){
      if(to > $(window).scrollTop()){
        to -= to > headerElm.offset().top + hh ? hh : 0;
      }else{
        to -= hh;
      }
    }
    $('html, body').stop(false, true).animate({scrollTop: to}, 600);
  }
});


/**
 * ヘッダー/フッター ナビゲーション処理
 */
window.addEventListener('DOMContentLoaded', function () {
  var NavMenuManager = function NavMenuManager() {
    var HEADER_QUERY                  = '#header';
    var SP_ACC_TRIGGER_QUERY          = '.js-nav-acc-trigger';
    var PC_MAIN_NAV                   = '.header__nav.header__nav--main';
    var PC_MAIN_NAV2                  = 'header__nav--main2';
    var PC_MAIN_NAV_ITEM_QUERY        = '.header__nav--main .header__nav__item';
    var PC_MAIN_NAV_TRIGGER_QUERY     = '.header__nav--main .header__nav__item__name.header-nav-acc-trigger';
    var PC_MAIN_NAV_CONT_QUERY        = '.header__nav--main .header__nav__item__cont.header-nav-acc-cont';
    var PC_GLOB_NAV_QUERY             = '.header__nav--global';
    var PC_GLOB_NAV_ITEM_QUERY        = '.header__nav--global .header__nav__item';
    var PC_GLOB_NAV_TRIGGER_QUERY     = '.header__nav--global .header__nav__item__name.header-nav-acc-trigger';
    var PC_GLOB_NAV_CONT_QUERY        = '.header__nav--global .header__nav__item__cont.header-nav-acc-cont';
    var PC_FOOTER_NAV_ITEM_QUERY      = '.footer__nav .footer__nav__item';
    var PC_FOOTER_NAV_TRIGGER_QUERY   = '.footer__nav .footer__nav__item__name.footer-nav-acc-acc-trigger';
    var PC_FOOTER_NAV_CONT_QUERY      = '.footer__nav .footer__nav__item__cont.footer-nav-acc-acc-cont';
    var NAV_CONT_QUERY                = '.header__nav__item__cont.header-nav-acc-cont,.footer__nav__item__cont.footer-nav-acc-cont';
    var OPEN_CLASS                    = 'is-open';
    var IS_PREMIUM_CLASS              = 'header__nav--global--premium';
    var header                        = $(HEADER_QUERY);
    var spAccTrigger                  = $(SP_ACC_TRIGGER_QUERY);
    var pcMainNavTrigger              = $(PC_MAIN_NAV_TRIGGER_QUERY);
    var pcMainNavCont                 = $(PC_MAIN_NAV_CONT_QUERY);
    var pcGlobNavTrigger              = $(PC_GLOB_NAV_TRIGGER_QUERY);
    var pcGlobNavCont                 = $(PC_GLOB_NAV_CONT_QUERY);
    var pcOtherCont                   = $('*:not(.header__nav__item__name.header-nav-acc-trigger):not(#header__navSearch__form input):not(#header__navSearch__form button):not(#header__navSearch__form):not(#header__navSearch)');
    var deviceStatus                  = '';
    var deviceResizeTimer             = null;

    /**
     * デバイスタイプを返却
     * @returns { 'SP' | 'PC' } デバイスタイプ
     */
    var getDeviceType = function getDeviceType() {
      if (window.matchMedia('(max-width: 767px)').matches) {
        return 'SP';
      } else if(window.matchMedia('(min-width: 768px) and (max-width: 1023px)').matches) {
        return 'TB';
      } else {
        return 'PC';
      }
    };

    /**
     * リサイズ時に発火
     * デバイスタイプを再設定
     */
    var onResize = function onResize() {
      deviceStatus = getDeviceType();

      // SP
      spAccTrigger.off('click', onClickMain);

      // TB
      pcMainNavTrigger.off('click', onClickMain);
      pcMainNavCont.off('click', onClickMain);
      pcGlobNavTrigger.off('click', onClickGlob);
      pcGlobNavCont.off('click', onClickGlob);
      pcOtherCont.off('click', onClose);
      
      // PC
      pcMainNavTrigger.off('mouseover', onMouseOverMain);
      pcMainNavTrigger.off('mouseleave', onMouseLeaveMain);
      pcMainNavCont.off('mouseover', onMouseOverMain);
      pcMainNavCont.off('mouseleave', onMouseLeaveMain);

      pcGlobNavTrigger.off('mouseover', onMouseOverGlob);
      pcGlobNavTrigger.off('mouseleave', onMouseLeaveGlob);
      pcGlobNavCont.off('mouseover', onMouseOverGlob);
      pcGlobNavCont.off('mouseleave', onMouseLeaveGlob);

      switch (deviceStatus) {
        case 'SP':
          spAccTrigger.on('click', onClickMain);
          break;
        case 'TB':
          header.removeClass(OPEN_CLASS);
          pcGlobNavTrigger.removeClass(OPEN_CLASS);
          $(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
          $(NAV_CONT_QUERY).css('display', '');

          pcMainNavTrigger.on('click', onClickMain);
          pcMainNavCont.on('click', onClickMain);
  
          pcOtherCont.on('click', onClose);

          // プレミアム
          if($(pcGlobNavTrigger).closest(PC_GLOB_NAV_QUERY).hasClass(IS_PREMIUM_CLASS)) { // プレミアムページの場合
            pcGlobNavTrigger.on('mouseover', onMouseOverGlob);
            pcGlobNavTrigger.on('mouseleave', onMouseLeaveGlob);
            pcGlobNavCont.on('mouseover', onMouseOverGlob);
            pcGlobNavCont.on('mouseleave', onMouseLeaveGlob);
          } else { // 通常ver
            pcGlobNavTrigger.on('click', onClickGlob);
            pcGlobNavCont.on('click', onClickGlob);
          }
          break;
        case 'PC':
          header.removeClass(OPEN_CLASS);
          pcGlobNavTrigger.removeClass(OPEN_CLASS);
          $(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
          $(NAV_CONT_QUERY).css('display', '');

          // クリック展開
          if ($(PC_MAIN_NAV).hasClass(PC_MAIN_NAV2)) {
            pcMainNavTrigger.on('click', onClickMain);
            pcMainNavCont.on('click', onClickMain);
            pcOtherCont.on('click', onClose);
          } else { // ホバー展開
            pcMainNavTrigger.on('mouseover', onMouseOverMain);
            pcMainNavTrigger.on('mouseleave', onMouseLeaveMain);
            pcMainNavCont.on('mouseover', onMouseOverMain);
            pcMainNavCont.on('mouseleave', onMouseLeaveMain);
          }

          pcGlobNavTrigger.on('mouseover', onMouseOverGlob);
          pcGlobNavTrigger.on('mouseleave', onMouseLeaveGlob);
          pcGlobNavCont.on('mouseover', onMouseOverGlob);
          pcGlobNavCont.on('mouseleave', onMouseLeaveGlob);
          break;
      }
    };

    /**
     * クリック時に発火（Main）
     * デバイスによって挙動が変化
     * 
     * @param { Event } ev クリックイベント
     */
    var onClickMain = function onClickMain(ev) {
      ev.stopPropagation();

      var el = ev.currentTarget;

      switch (deviceStatus) {
        case 'SP': // SPの処理
          ev.preventDefault();

          if ($(el).hasClass(OPEN_CLASS)) {
            $(el).next().slideUp(100);
            $(el).removeClass(OPEN_CLASS);
          } else {
            $(el).next().slideDown(100);
            $(el).addClass(OPEN_CLASS);
          }
          break;
        case 'TB': // TBの処理
          if ($(el).closest(PC_MAIN_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).hasClass(OPEN_CLASS)) {
            pcMainNavCont.removeClass(OPEN_CLASS);
            $(header).removeClass(OPEN_CLASS);
            setTimeout(function () {
              $(el).closest(PC_MAIN_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
            }, 200);
          } else {
            $(header).addClass(OPEN_CLASS);
            $(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
            setTimeout(function () {
              $(el).closest(PC_MAIN_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).addClass(OPEN_CLASS);
            }, 200);
          }
          break;
        case 'PC': // PCの処理
          // クリック展開
          if ($(PC_MAIN_NAV).hasClass(PC_MAIN_NAV2)) {
            if ($(el).closest(PC_MAIN_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).hasClass(OPEN_CLASS)) {
              pcMainNavTrigger.removeClass(OPEN_CLASS);
              pcMainNavCont.removeClass(OPEN_CLASS);
              $(header).removeClass(OPEN_CLASS);
              $(el).closest(PC_MAIN_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).removeClass(OPEN_CLASS);

            } else {
              pcMainNavTrigger.removeClass(OPEN_CLASS);
              $(el).addClass(OPEN_CLASS);
              $(header).addClass(OPEN_CLASS);
              $(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
              $(el).closest(PC_MAIN_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).addClass(OPEN_CLASS);

            }
          }
          break;
      }
    };

    /**
     * クリック時に発火（Glob）
     * デバイスによって挙動が変化
     * 
     * @param { Event } ev クリックイベント
     */
    var onClickGlob = function onClickGlob(ev) {
      ev.stopPropagation();

      var el = ev.currentTarget;

      switch (deviceStatus) {
        case 'SP': // SPの処理
          if ($(el).hasClass(OPEN_CLASS)) {
            $(el).next().slideUp(100);
            $(el).removeClass(OPEN_CLASS);
          } else {
            $(el).next().slideDown(100);
            $(el).addClass(OPEN_CLASS);
          }
          break;
        case 'TB': // TBの処理
          header.removeClass(OPEN_CLASS);

          if ($(el).closest(PC_GLOB_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).hasClass(OPEN_CLASS)) {
            $(el).closest(PC_GLOB_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
          } else {
            $(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
            $(el).closest(PC_GLOB_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).addClass(OPEN_CLASS);
          }
          break;
        case 'PC': // PCの処理
          break;
      }
    };

    /**
     * マウスがホバーされた際の処理（Main）
     */
    var onMouseOverMain = function onMouseOverMain(ev) {
      var el = ev.currentTarget;

      switch (deviceStatus) {
        case 'SP': // SPの処理
          break;
        case 'TB': // TBの処理
          break;
        case 'PC': // PCの処理
          $(header).addClass(OPEN_CLASS);
          setTimeout(function () {
            $(el).closest(PC_MAIN_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).addClass(OPEN_CLASS);
          }, 200);
          break;
      }
    };

    /**
     * マウスが離れた際の処理（Main）
     */
    var onMouseLeaveMain = function onMouseLeaveMain(ev) {
      var el = ev.currentTarget;

      switch (deviceStatus) {
        case 'SP': // SPの処理
          break;
        case 'TB': // TBの処理
          break;
        case 'PC': // PCの処理
          $(header).removeClass(OPEN_CLASS);
          setTimeout(function () {
            $(el).closest(PC_MAIN_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
          }, 200);
          break;
      }
    };

    /**
     * マウスがホバーされた際の処理（Glob）
     */
    var onMouseOverGlob = function onMouseOverGlob(ev) {
      var el = ev.currentTarget;

      switch (deviceStatus) {
        case 'SP': // SPの処理
          break;
        case 'TB': // TBの処理
        case 'PC': // PCの処理
          setTimeout(function () {
            $(el).closest(PC_GLOB_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).addClass(OPEN_CLASS);
          }, 200);
          break;
      }
    };

    /**
     * マウスが離れた際の処理（Glob）
     */
    var onMouseLeaveGlob = function onMouseLeaveGlob(ev) {
      var el = ev.currentTarget;

      switch (deviceStatus) {
        case 'SP': // SPの処理
          break;
        case 'TB': // TBの処理
        case 'PC': // PCの処理
          setTimeout(function () {
            $(el).closest(PC_GLOB_NAV_ITEM_QUERY).find(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
          }, 200);
          break;
      }
    };

    var onClose = function onClose(ev) {
      var isOpenNavCont = false;
      pcMainNavCont.each(function() {
        if($(this).hasClass(OPEN_CLASS)) {
          isOpenNavCont = true;
        }
      })
      pcGlobNavCont.each(function() {
        if($(this).hasClass(OPEN_CLASS)) {
          if($(this).closest(PC_GLOB_NAV_QUERY).hasClass(IS_PREMIUM_CLASS)) { // プレミアムページの場合
            // isOpenNavCont = true;
          } else {
            isOpenNavCont = true;
          }
        }
      })

      if(isOpenNavCont) {
        if(ev.currentTarget)
          ev.stopPropagation();
  
        pcMainNavTrigger.removeClass(OPEN_CLASS);
        pcMainNavCont.removeClass(OPEN_CLASS);
        $(header).removeClass(OPEN_CLASS);
        setTimeout(function () {
          $(NAV_CONT_QUERY).removeClass(OPEN_CLASS);
        }, 200);
      }
    }

    /**
     * イベント付与
     */
    var addEvent = function addEvent() {
      switch (deviceStatus) {
        case 'SP':
          spAccTrigger.on('click', onClickMain);
          break;
        case 'TB':
          pcMainNavTrigger.on('click', onClickMain);
          pcMainNavCont.on('click', onClickMain);

          // プレミアム
          if($(pcGlobNavTrigger).closest(PC_GLOB_NAV_QUERY).hasClass(IS_PREMIUM_CLASS)) { // プレミアムページの場合
            pcGlobNavTrigger.on('mouseover', onMouseOverGlob);
            pcGlobNavTrigger.on('mouseleave', onMouseLeaveGlob);
            pcGlobNavCont.on('mouseover', onMouseOverGlob);
            pcGlobNavCont.on('mouseleave', onMouseLeaveGlob);
          } else { // 通常ver
            pcGlobNavTrigger.on('click', onClickGlob);
            pcGlobNavCont.on('click', onClickGlob);
          }
  
          pcOtherCont.on('click', onClose);
          break;
        case 'PC':
          // クリック展開
          if ($(PC_MAIN_NAV).hasClass(PC_MAIN_NAV2)) {
            pcMainNavTrigger.on('click', onClickMain);
            pcMainNavCont.on('click', onClickMain);
            pcOtherCont.on('click', onClose);
          } else {
            pcMainNavTrigger.on('mouseover', onMouseOverMain);
            pcMainNavTrigger.on('mouseleave', onMouseLeaveMain);
            pcMainNavCont.on('mouseover', onMouseOverMain);
            pcMainNavCont.on('mouseleave', onMouseLeaveMain);
          }

          pcGlobNavTrigger.on('mouseover', onMouseOverGlob);
          pcGlobNavTrigger.on('mouseleave', onMouseLeaveGlob);
          pcGlobNavCont.on('mouseover', onMouseOverGlob);
          pcGlobNavCont.on('mouseleave', onMouseLeaveGlob);
          break;
      }
    };

    /**
     * 初期化
     */
    var init = function init() {
      // 現在のデバイスタイプを設定
      deviceStatus = getDeviceType();
      addEvent();
      window.addEventListener('resize', function () {
        clearTimeout(deviceResizeTimer);
        deviceResizeTimer = setTimeout(onResize, 50);
      });
    };

    init();
  };

  NavMenuManager();
});
/**
 * SP headerMenu
 */
var spMenuBtn = document.getElementById('header__navToggle');
function showSPHeaderMenu() {
  if (spMenuBtn.checked) {
    header.classList.add("is-open");
    document.body.classList.add("is-fixed");
  } else {
    header.classList.remove("is-open");
    document.body.classList.remove("is-fixed");
  }
}
window.addEventListener('load', function() {
  showSPHeaderMenu();
});
spMenuBtn.addEventListener('change', showSPHeaderMenu);

/**
 * navSearch open close
 */
var headerNavSearch = document.getElementById('header__navSearch');
var headerNavSearchBtn = document.getElementById('header__navSearchBtn');
function showHeaderNavSearch() {
  if (!headerNavSearch.classList.contains(`is-show`)) {
    headerNavSearch.classList.add(`is-show`);
    headerNavSearch.classList.add(`active`);
  } else {
    headerNavSearch.classList.remove(`is-show`);
  }
}
headerNavSearchBtn.addEventListener('click', showHeaderNavSearch);
/**
 * add .header2 to #header
 */
$('.header__nav.header__nav--main2').parents('#header').addClass('header2');
</script>

</body>
</html>
