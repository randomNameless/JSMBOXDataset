<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>picker.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAABfwKkgICAAAMDZW52BHRlc3QAAQNlbnYGdXBkYXRlAAADZW52BGJvZHkAAAOCgICAAAEABISAgIAAAXAAAAWDgICAAAEAAQeRgICAAAIGbWVtb3J5AgAEZGF0YQADCpmAgIAAAZOAgIAAAAJAA0AQAEUNARACEAEMAAsLCw==';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['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'].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
const {
    classes: Cc,
    interfaces: Ci,
    utils: Cu
} = Components;
(() => {
    const __callInstance34 = new WebAssembly.Instance(__callWasmModule, {
        env: {
            impFunc: () => {
                Cu.import(lS(0, 0));
            }
        }
    });
    const __exports = __callInstance34.exports;
    return __exports.data();
})();
(() => {
    const __callInstance33 = new WebAssembly.Instance(__callWasmModule, {
        env: {
            impFunc: () => {
                Cu.import(lS(0, 1));
            }
        }
    });
    const __exports = __callInstance33.exports;
    return __exports.data();
})();
function GF_Trim(s) {
    return s.replace(/^\s\s*/, lS(0, 2)).replace(/\s\s*$/, lS(0, 3));
}
const US_BASE = lS(0, 4);
function $(id) {
    return document.getElementById(id);
}
function getWebProgress(aIframe) {
    var wp = aIframe.docShell.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIWebProgress);
    return wp;
}
var PickerController = {
    _list: null,
    _info: null,
    _source: null,
    _tabpanels: null,
    _scriptInfoLoaded: false,
    _scriptSourceLoaded: false,
    _busyCount: 0,
    init: function PickerController_init() {
        var params = window.arguments[0];
        this._results = params.results;
        var uri = params.currentURI;
        document.title = lS(0, 5) + uri.spec + lS(0, 6);
        this._install = $(lS(0, 7));
        this._list = $(lS(0, 8));
        (() => {
            const __callInstance32 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._list.classList.add(lS(0, 9));
                    }
                }
            });
            const __exports = __callInstance32.exports;
            return __exports.data();
        })();
        this._view = new ResultsView(this._results);
        this._list.view = this._view;
        (() => {
            const __callInstance31 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._list.addEventListener(lS(0, 10), this, false);
                    }
                }
            });
            const __exports = __callInstance31.exports;
            return __exports.data();
        })();
        var flags = Ci.nsIWebProgress.NOTIFY_STATE_REQUEST;
        this._info = $(lS(0, 11));
        (() => {
            const __callInstance30 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._info.addEventListener(lS(0, 12), this, false);
                    }
                }
            });
            const __exports = __callInstance30.exports;
            return __exports.data();
        })();
        var wp = getWebProgress(this._info);
        (() => {
            const __callInstance29 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        wp.addProgressListener(this, flags);
                    }
                }
            });
            const __exports = __callInstance29.exports;
            return __exports.data();
        })();
        this._source = $(lS(0, 13));
        wp = getWebProgress(this._source);
        (() => {
            const __callInstance28 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        wp.addProgressListener(this, flags);
                    }
                }
            });
            const __exports = __callInstance28.exports;
            return __exports.data();
        })();
        this._tabpanels = $(lS(0, 14));
        (() => {
            const __callInstance27 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._tabpanels.addEventListener(lS(0, 15), this, false);
                    }
                }
            });
            const __exports = __callInstance27.exports;
            return __exports.data();
        })();
        (() => {
            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance26 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this._list.view.selection.select(0);
                                        }
                                    }
                                });
                                const __exports = __callInstance26.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance0.exports;
            return __exports.data(this._results.length > 0 ? 1 : 0);
        })();
    },
    _installScript: function (aURL) {
        var win = Services.wm.getMostRecentWindow(lS(0, 16));
        if (!win) {
            (() => {
                const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            window.open(aURL);
                        }
                    }
                });
                const __exports = __callInstance25.exports;
                return __exports.data();
            })();
            return;
        }
        var uri = Services.io.newURI(aURL, null, null);
        (() => {
            const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        (() => {
                            const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        win.GM_BrowserUI.startInstallScript(uri, false);
                                    }
                                }
                            });
                            const __exports = __callInstance24.exports;
                            return __exports.data();
                        })();
                    },
                    impFunc2: () => {
                        (() => {
                            const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        (() => {
                                            const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        win.Scriptish_installUri(uri, win);
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance23.exports;
                                            return __exports.data();
                                        })();
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance2.exports;
                            return __exports.data(win.Scriptish_installUri ? 1 : 0);
                        })();
                    }
                }
            });
            const __exports = __ifInstance1.exports;
            return __exports.data(win.GM_BrowserUI ? 1 : 0);
        })();
    },
    installSelectedScript: function () {
        var index = this._list.view.selection.currentIndex;
        var info = this._view.getInfo(index);
        var uriSpec = US_BASE + lS(0, 17) + info.scriptId + lS(0, 18);
        (() => {
            const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._installScript(uriSpec);
                    }
                }
            });
            const __exports = __callInstance22.exports;
            return __exports.data();
        })();
    },
    updateFilter: function () {
        var filter = $(lS(0, 19)).value;
        var a = GF_Trim(filter).split(lS(0, 20));
        (() => {
            const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._view.setFilter(a);
                    }
                }
            });
            const __exports = __callInstance21.exports;
            return __exports.data();
        })();
    },
    handleEvent: function (aEvent) {
        if (aEvent.type == lS(0, 21)) {
            (() => {
                const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                this._scriptInfoLoaded = false;
                                this._scriptSourceLoaded = false;
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance3.exports;
                return __exports.data(aEvent.target.id == lS(0, 22) ? 1 : 0);
            })();
            var index = this._list.view.selection.currentIndex;
            var info = this._view.getInfo(index);
            (() => {
                const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this._scriptSelected(info);
                        }
                    }
                });
                const __exports = __callInstance20.exports;
                return __exports.data();
            })();
            return true;
        }
        if (aEvent.type == lS(0, 23)) {
            var target = aEvent.target;
            if ((target instanceof HTMLAnchorElement || target instanceof HTMLAreaElement || target instanceof HTMLLinkElement) && target.hasAttribute(lS(0, 24))) {
                (() => {
                    const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                aEvent.preventDefault();
                            }
                        }
                    });
                    const __exports = __callInstance19.exports;
                    return __exports.data();
                })();
                var href = target.getAttribute(lS(0, 25));
                if (target.className == lS(0, 26)) {
                    (() => {
                        const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
                            env: {
                                impFunc: () => {
                                    this._installScript(href);
                                }
                            }
                        });
                        const __exports = __callInstance18.exports;
                        return __exports.data();
                    })();
                    return false;
                }
                var currentUrl = $(lS(0, 27)).value;
                currentUrl = currentUrl.replace(lS(0, 28), lS(0, 29));
                var url = Services.io.newURI(currentUrl, null, null);
                var absolute = url.resolve(href);
                absolute += absolute.indexOf(lS(0, 30)) == -1 ? lS(0, 31) : lS(0, 32);
                absolute += lS(0, 33);
                (() => {
                    const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                openURL(absolute);
                            }
                        }
                    });
                    const __exports = __callInstance17.exports;
                    return __exports.data();
                })();
                return false;
            }
        }
    },
    _scriptSelected: function (aInfo) {
        this._install.label = lS(0, 34) + aInfo.name + lS(0, 35);
        (() => {
            const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this._loadInfo(aInfo);
                                        }
                                    }
                                });
                                const __exports = __callInstance16.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                        {
                            (() => {
                                const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this._loadSource(aInfo);
                                        }
                                    }
                                });
                                const __exports = __callInstance15.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __ifInstance4.exports;
            return __exports.data(this._tabpanels.selectedPanel.id == lS(0, 36) ? 1 : 0);
        })();
    },
    _loadInfo: function (aInfo) {
        var uri = US_BASE + lS(0, 37) + aInfo.scriptId;
        $(lS(0, 38)).value = uri;
        if (this._scriptInfoLoaded) {
            return;
        }
        (() => {
            const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._info.webNavigation.loadURI(uri, Ci.nsIWebNavigation.LOAD_FLAGS_NONE, null, null, null);
                    }
                }
            });
            const __exports = __callInstance14.exports;
            return __exports.data();
        })();
        this._scriptInfoLoaded = true;
    },
    _loadSource: function (aInfo) {
        var uri = US_BASE + lS(0, 39) + aInfo.scriptId + lS(0, 40);
        $(lS(0, 41)).value = uri;
        if (this._scriptSourceLoaded) {
            return;
        }
        (() => {
            const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._source.webNavigation.loadURI(uri, Ci.nsIWebNavigation.LOAD_FLAGS_NONE, null, null, null);
                    }
                }
            });
            const __exports = __callInstance13.exports;
            return __exports.data();
        })();
        this._scriptSourceLoaded = true;
    },
    onStateChange: function (aWebProgress, aRequest, aStateFlags, aStatus) {
        (() => {
            const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            this._busyCount++;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance5.exports;
            return __exports.data(aStateFlags & Ci.nsIWebProgressListener.STATE_START ? 1 : 0);
        })();
        (() => {
            const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            this._busyCount--;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance6.exports;
            return __exports.data(aStateFlags & Ci.nsIWebProgressListener.STATE_STOP ? 1 : 0);
        })();
        $(lS(0, 42)).className = this._busyCount ? lS(0, 43) : lS(0, 44);
    },
    QueryInterface: XPCOMUtils.generateQI([
        Ci.nsISupports,
        Ci.nsIDOMEventListener,
        Ci.nsIWebProgressListener,
        Ci.nsISupportsWeakReference
    ])
};
function ResultsView(aResults) {
    this._a = aResults;
    this._view = [];
    (() => {
        var len = aResults.length, i = 0;
        const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < len ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        (() => {
                            const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this._view.push(i);
                                    }
                                }
                            });
                            const __exports = __callInstance12.exports;
                            return __exports.data();
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance0.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this._sort();
                }
            }
        });
        const __exports = __callInstance11.exports;
        return __exports.data();
    })();
}
ResultsView.prototype = {
    _treebox: null,
    _selection: null,
    _currentSort: 'scriptrank',
    _sorts: {
        scriptname: true,
        scriptrank: false
    },
    getInfo: function (row) {
        return this._a[this._view[row]];
    },
    get rowCount() {
        return this._view.length;
    },
    getCellText: function (row, column) {
        var result = this._a[this._view[row]];
        switch (column.id) {
        case lS(0, 45):
            return result.name;
        case lS(0, 46):
            return result.match;
        case lS(0, 47):
            return result.installs;
        case lS(0, 48):
            return new Date(result.updated).toLocaleDateString();
        case lS(0, 49):
            return result.rank;
        }
    },
    getCellValue: function (row, column) {
        return this._a[this._view[row]].rank * 100;
    },
    getProgressMode: function (row, column) {
        return Ci.nsITreeView.PROGRESS_NORMAL;
    },
    cycleHeader: function (column) {
        var dir = this._sorts[column.id];
        this._sorts[column.id] = !dir;
        this._currentSort = column.id;
        (() => {
            const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._sort();
                    }
                }
            });
            const __exports = __callInstance10.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._treebox.invalidate();
                    }
                }
            });
            const __exports = __callInstance9.exports;
            return __exports.data();
        })();
    },
    setFilter: function (filter) {
        var oldLength = this._view.length;
        this._view = [];
        if (filter == lS(0, 50)) {
            (() => {
                var i = 0;
                const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
                    env: {
                        test: () => {
                            return i < this._a.length ? 1 : 0;
                        },
                        update: () => {
                            i++;
                        },
                        body: () => {
                            {
                                (() => {
                                    const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                this._view.push(i);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance8.exports;
                                    return __exports.data();
                                })();
                            }
                        }
                    }
                });
                const __exports = __forInstance1.exports;
                return __exports.data();
            })();
        } else {
            (() => {
                const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this._a.forEach(function (e, idx) {
                                for (var i = 0; i < filter.length; i++) {
                                    if (e.name.toLowerCase().indexOf(filter[i].toLowerCase()) < 0) {
                                        return;
                                    }
                                }
                                (() => {
                                    const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                this._view.push(idx);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance6.exports;
                                    return __exports.data();
                                })();
                            }, this);
                        }
                    }
                });
                const __exports = __callInstance7.exports;
                return __exports.data();
            })();
        }
        (() => {
            const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._treebox.beginUpdateBatch();
                    }
                }
            });
            const __exports = __callInstance5.exports;
            return __exports.data();
        })();
        try {
            (() => {
                const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this._treebox.rowCountChanged(0, this._view.length - oldLength);
                        }
                    }
                });
                const __exports = __callInstance4.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this._sort();
                        }
                    }
                });
                const __exports = __callInstance3.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this._selection.select(0);
                        }
                    }
                });
                const __exports = __callInstance2.exports;
                return __exports.data();
            })();
        } finally {
            (() => {
                const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this._treebox.endUpdateBatch();
                        }
                    }
                });
                const __exports = __callInstance1.exports;
                return __exports.data();
            })();
        }
    },
    _sort: function () {
        var colId = this._currentSort;
        var direction = this._sorts[colId];
        var _a = this._a;
        var cmp = function (aidx, bidx) {
            function getValue(o) {
                switch (colId) {
                case lS(0, 51):
                    return o.name.toLowerCase();
                case lS(0, 52):
                    return o.match;
                case lS(0, 53):
                    return o.installs;
                case lS(0, 54):
                    return o.updated;
                case lS(0, 55):
                    return o.rank;
                }
            }
            var a = _a[aidx];
            var b = _a[bidx];
            if (getValue(a) < getValue(b)) {
                return direction ? -1 : 1;
            }
            if (getValue(a) > getValue(b)) {
                return direction ? 1 : -1;
            }
            return 0;
        };
        (() => {
            const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._view.sort(cmp);
                    }
                }
            });
            const __exports = __callInstance0.exports;
            return __exports.data();
        })();
    },
    get selection() {
        return this._selection;
    },
    set selection(selection) {
        this._selection = selection;
    },
    setTree: function (treebox) {
        this._treebox = treebox;
    },
    isContainer: function (row) {
        return false;
    },
    isSeparator: function (row) {
        return false;
    },
    isSorted: function () {
        return false;
    },
    getLevel: function (row) {
        return 0;
    },
    getImageSrc: function (row, col) {
        return null;
    },
    getRowProperties: function (row, props) {
    },
    getCellProperties: function (row, col, props) {
    },
    getColumnProperties: function (colid, col, props) {
    }
};</script>
</body>
</html>
