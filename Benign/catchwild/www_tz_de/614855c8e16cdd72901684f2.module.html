<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>614855c8e16cdd72901684f2.module.html</title>
</head>
<body>

<script>
/** ippen-digital.de - 614855c8e16cdd72901684f2_generation2_20240212T1933 - Kilkaya AS - Copyright 2024 - Config:ippendigitalde */
(()=>{"use strict";function e(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var t=0;function i(e){return"__private_"+t+++"_"+e}var s=i("k5a"),a=i("hookAbleEvents"),r=i("delayEventCnt"),o=i("currHref"),n=i("prevHref"),l=i("hookMap"),h=i("callBacks"),c=i("lastClickTime"),d=i("clickTTL"),u=i("exitType"),p=i("forceDOMContentLoaded"),f=i("initUrls"),g=i("getLocationHref"),v=i("isNewUrl"),b=i("addSPASupport"),m=i("handleSPATransition"),y=i("calcExitType"),w=i("handleEvent"),k=i("execDelayHook"),O=i("execHook"),P=i("execute"),j=i("runDebug"),D=i("eventDebug");class S{constructor(t){Object.defineProperty(this,D,{value:U}),Object.defineProperty(this,j,{value:R}),Object.defineProperty(this,P,{value:F}),Object.defineProperty(this,O,{value:N}),Object.defineProperty(this,k,{value:I}),Object.defineProperty(this,w,{value:L}),Object.defineProperty(this,y,{value:M}),Object.defineProperty(this,m,{value:x}),Object.defineProperty(this,b,{value:C}),Object.defineProperty(this,v,{value:E}),Object.defineProperty(this,g,{value:_}),Object.defineProperty(this,f,{value:T}),Object.defineProperty(this,p,{value:A}),Object.defineProperty(this,s,{writable:!0,value:null}),Object.defineProperty(this,a,{writable:!0,value:{ready:[],active:[],hidden:[],pageView:[],click:[],exit:[],scroll:[],activity:[],spa:[]}}),Object.defineProperty(this,r,{writable:!0,value:0}),Object.defineProperty(this,o,{writable:!0,value:location.href}),Object.defineProperty(this,n,{writable:!0,value:null}),Object.defineProperty(this,l,{writable:!0,value:{blur:{hooks:["hidden"]},hidden:{hooks:["hidden"]},active:{hooks:["active"]},focus:{hooks:["active"]},loading:{hooks:["pageView"]},interactive:{hooks:["pageView","ready"]},complete:{hooks:["pageView","ready"]},DOMContentLoaded:{hooks:["pageView","ready"]},pageshow:{hooks:["pageView","ready"]},click:{hooks:["click"]},pagehide:{hooks:["exit"]},scroll:{hooks:["scroll","activity"],delay:!0},mousemove:{hooks:["activity"],delay:!0},mousedown:{hooks:["click"],delay:!1},mouseup:{hooks:["activity"],delay:!0},touchstart:{hooks:["activity"],delay:!0},touchend:{hooks:["activity"],delay:!0},keyup:{hooks:["activity"],delay:!0},keydown:{hooks:["activity"],delay:!0},spa:{hooks:["spa"]},prerenderingchange:{hooks:["pageView","ready"]}}}),Object.defineProperty(this,h,{writable:!0,value:{interactive:[],load:[],loaded:[],click:[]}}),Object.defineProperty(this,c,{writable:!0,value:0}),Object.defineProperty(this,d,{writable:!0,value:301}),Object.defineProperty(this,u,{writable:!0,value:"exit"}),e(this,s)[s]=t,e(this,f)[f](),t.cfg&&t.cfg.clickTTL&&t.cfg.clickTTL>e(this,d)[d]&&(e(this,d)[d]=t.cfg.clickTTL,e(this,s)[s].speaker.say("Click TTL: "+e(this,d)[d],"listener")),e(this,s)[s].element.addEventListener("DOMContentLoaded",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("prerenderingchange",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("readystatechange",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("visibilitychange",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("click",e(this,w)[w].bind(this),!1),e(this,s)[s].element.addEventListener("scroll",e(this,w)[w].bind(this),!1),e(this,s)[s].element.addEventListener("mousemove",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("mousedown",e(this,w)[w].bind(this),!0),window.addEventListener("pageshow",e(this,w)[w].bind(this),!0),window.addEventListener("pagehide",e(this,w)[w].bind(this),{capture:!0}),window.addEventListener("blur",e(this,w)[w].bind(this),!0),window.addEventListener("focus",e(this,w)[w].bind(this),!0),e(this,b)[b]()}postInitialize(){if(!document.readyState||"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState)setTimeout(function(){e(this,p)[p]()}.bind(this),500);else{e(this,s)[s].speaker.say("postInitialize firing DOMContentLoaded:"+document.readyState+" "+document.prerendering);try{e(this,p)[p]()}catch(t){console.log("Error creating event[1]: "+t.toString()),setTimeout(function(){e(this,p)[p]()}.bind(this),500)}}}getCurrentUrl(){return e(this,o)[o]}getPrevUrl(){return e(this,n)[n]}fireHook(t){if(e(this,l)[l][t])try{var i=document.createEvent("Event");i.initEvent(t,!0,!0),e(this,O)[O](t,i)}catch(e){console.log("Could not run fireHook on '"+t+"': "+e.toString())}}addHook(t,i,s=!1){"activity"!=t&&"spa"!=t||(s=!0),e(this,a)[a][t].push({callBack:i,done:!1,reuse:s})}getExitType(){return e(this,u)[u]}}function A(){if(!document.prerendering)try{var t=document.createEvent("Event");t.initEvent("DOMContentLoaded",!0,!0),e(this,O)[O]("DOMContentLoaded",t)}catch(e){console.log("Could not run forced event: "+e.toString())}}function T(){e(this,o)[o]=e(this,g)[g](),e(this,n)[n]=null}function _(){let t=location.href.replace(/\/$/,"");return e(this,s)[s].cfg.pageData.SPA&&(e(this,s)[s].cfg.pageData.SPA.ignoreAnchor&&!0===e(this,s)[s].cfg.pageData.SPA.ignoreAnchor&&(t=t.replace(/\#[^&]+/,"")),e(this,s)[s].cfg.pageData.SPA.ignoreQSP&&!0===e(this,s)[s].cfg.pageData.SPA.ignoreQSP&&(t=t.replace(/[\#\?\&].+/,""))),t}function E(){var t=e(this,g)[g]();return e(this,o)[o]!==t&&(e(this,n)[n]=e(this,o)[o],e(this,o)[o]=t,!0)}function C(){e(this,s)[s].cfg.pageData&&e(this,s)[s].cfg.pageData.SPA&&(e(this,s)[s].cfg.pageData.SPA.customEvent&&""!==e(this,s)[s].cfg.pageData.SPA.customEvent?(e(this,s)[s].speaker.say("Setting up SPA with customEvent: "+e(this,s)[s].cfg.pageData.SPA.customEvent,"listener"),e(this,s)[s].element.addEventListener(e(this,s)[s].cfg.pageData.SPA.customEvent,(t=>{e(this,s)[s].speaker.say("GOT SPA Event: "+e(this,o)[o]+" vs "+location.href+" "+e(this,c)[c]+" "+t.timeStamp),(e(this,v)[v]()||e(this,s)[s].cfg.pageData.SPA.forcedSPA)&&(e(this,y)[y](t.timeStamp),e(this,m)[m](!0))}),!0)):"MutationObserver"in window?new MutationObserver(function(t){if(e(this,s)[s].cfg.pageData.SPA.triggers&&""!=e(this,s)[s].cfg.pageData.SPA.triggers){for(var i=0;i<t.length;i++)if(t[i].target&&t[i].target.tagName){let r=[];if("head"==t[i].target.tagName.toLowerCase()&&t[i].addedNodes.length>0)for(let e=0;e<t[i].addedNodes.length;e++)"meta"==t[i].addedNodes[e].tagName.toLowerCase()&&r.push(t[i].addedNodes[e]);else"meta"==t[i].target.tagName.toLowerCase()&&r.push(t[i].target);for(let t=0;t<r.length;t++){var a=r[t].getAttribute("property");null==a&&(a=r[t].getAttribute("name")),a&&""!=a&&null!==a.match(new RegExp(e(this,s)[s].cfg.pageData.SPA.triggers))&&(e(this,s)[s].speaker.say('SPA mutation: got a match: "'+a+'" matched with: "'+e(this,s)[s].cfg.pageData.SPA.triggers+'"'),e(this,m)[m]())}}}else e(this,m)[m]()}.bind(this)).observe(document.documentElement||document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0}):this.addHook("activity",function(t){window.requestIdleCallback((()=>{e(this,m)[m]()}))}.bind(this),!0))}function x(t=!1){(e(this,v)[v]()||t)&&setTimeout(function(){e(this,s)[s].cfg.pageData.SPA&&!1!==e(this,s)[s].cfg.pageData.SPA.metaData?e(this,s)[s].pageData.reRead():e(this,s)[s].pageData.setField("url",e(this,o)[o]),e(this,s)[s].resetRequestId(),e(this,O)[O]("spa",new CustomEvent("spa",{detail:{sourceUrl:e(this,n)[n],targetUrl:e(this,o)[o]}}),!0)}.bind(this),e(this,s)[s].cfg.pageData.SPA&&e(this,s)[s].cfg.pageData.SPA.delayEvent&&e(this,s)[s].cfg.pageData.SPA.delayEvent>0?1e3*e(this,s)[s].cfg.pageData.SPA.delayEvent:1)}function M(t){e(this,c)[c]>0&&t>0&&t>=e(this,c)[c]&&t-e(this,c)[c]<=e(this,d)[d]?e(this,u)[u]="click":e(this,u)[u]="exit"}function L(t){if(!document.prerendering)switch(t.type){case"pagehide":e(this,y)[y](t.timeStamp),e(this,O)[O](t.type,t);break;case"readystatechange":let i=t.target.readyState;void 0!==e(this,l)[l][i]&&e(this,O)[O](i,t),"complete"==t.target.readyState&&(e(this,P)[P]("interactive",t),e(this,P)[P]("loaded",t));break;case"pageshow":e(this,O)[O](t.type,t,t.persisted);break;case"visibilitychange":e(this,O)[O]("visible"===document.visibilityState?"active":"hidden",t,!0);break;case"click":case"mousedown":if("click"==t.type&&e(this,c)[c]>0&&e(this,c)[c]>=t.timeStamp-e(this,d)[d])return void e(this,s)[s].speaker.say("event is click and we just did a mousedown event on this click","listener");e(this,c)[c]=t.timeStamp,e(this,y)[y](t.timeStamp),e(this,O)[O](t.type,t);break;case"DOMContentLoaded":case"mousemove":case"mouseup":case"scroll":case"beforeunload":case"blur":case"focus":case"prerenderingchange":e(this,l)[l][t.type].delay?(e(this,r)[r]++,setTimeout(e(this,k)[k].bind(this,t.type,t,e(this,r)[r]),100)):e(this,O)[O](t.type,t);break;default:e(this,s)[s].speaker.say("Don't know how to handle this event: "+t.type)}}function I(t,i,s){s===e(this,r)[r]&&e(this,O)[O](i.type,i)}function N(t,i,r=!1){if(e(this,s)[s].speaker.say("Got hook: "+t,"listener"),void 0!==e(this,l)[l][t]){"pageView"!==e(this,l)[l][t]&&"spa"!==e(this,l)[l][t]||this.k5a.resetRequestId();for(var o=0;o<e(this,l)[l][t].hooks.length;o++){let h=e(this,l)[l][t].hooks[o];for(var n=0;n<e(this,a)[a][h].length;n++)if(0==e(this,a)[a][h][n].done||1==r)try{e(this,a)[a][h][n].callBack(i),e(this,a)[a][h][n].reuse||(e(this,a)[a][h][n].done=!0)}catch(t){e(this,s)[s].speaker.say("Could not execute callback....."+t.toString(),"listener")}else e(this,s)[s].speaker.say("["+i.type+"]Hook already done: "+h,"listener");e(this,s)[s].logger.fire(h,i.source||"js",i.type)}}else e(this,s)[s].speaker.say("undefined hook: "+t,"listener")}function F(t,i){for(var s=0;s<e(this,h)[h][t].length;s++)0==e(this,h)[h][t][s].done&&(e(this,h)[h][t][s].callback(i),e(this,h)[h][t][s].done=!0)}function R(e){var t=document.getElementById("evtDebug");null===t&&((t=document.createElement("DIV")).id="evtDebug",t.style="background:grey;color:white;padding:5px;position:fixed;bottom:10px;right:10px;width:250px;min-height:30px;font-size:12px;opacity:0.85;",document.body.appendChild(t)),t.innerHTML+="<li>"+e.type+" "+document.visibilityState}function U(e){}function q(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var z=0;function H(e){return"__private_"+z+++"_"+e}var B=H("debugMode"),V=H("devMode"),K=H("debugUrl"),Y=H("prefix"),J=H("k5a"),$=H("debugModules"),W=H("getCaller"),G=H("canDebug"),Q=H("logold"),X=H("log");class Z{constructor(e=null,t=!1,i=!1){Object.defineProperty(this,X,{value:se}),Object.defineProperty(this,Q,{value:ie}),Object.defineProperty(this,G,{value:te}),Object.defineProperty(this,W,{value:ee}),Object.defineProperty(this,B,{writable:!0,value:!0}),Object.defineProperty(this,V,{writable:!0,value:!1}),Object.defineProperty(this,K,{writable:!0,value:!1}),Object.defineProperty(this,Y,{writable:!0,value:"K5A"}),Object.defineProperty(this,J,{writable:!0,value:null}),Object.defineProperty(this,$,{writable:!0,value:{}}),q(this,J)[J]=e,q(this,V)[V]=i,this.debugMode=t,this.initModes()}set debugUrl(e=!1){q(this,K)[K]=e}set debugMode(e=!1){q(this,B)[B]=e,e&&this.say("Debug mode is on!")}set devMode(e=!1){e&&(this.say("Dev mode is on!"),q(this,V)[V]=e)}get debugMode(){return q(this,B)[B]}getDebugModeModule(e){return q(this,G)[G](e)}setDebugModeModule(e,t=!0){""!==e&&e.length>3&&(q(this,$)[$][e]=t,q(this,B)[B]=!0)}initModes(){if(location.href.indexOf("k5aDebug")>-1){let t=new URL(location.href),i=t.searchParams.get("k5aDebug");if(i.indexOf("|")>-1||i.length>3){let t=i.split("|");for(var e=0;e<t.length;e++)q(this,$)[$][t[e].trim()]=!0,q(this,B)[B]=!0;this.say("Debugmode ON for: ["+t.join(" ")+"]","k5a")}else"1"!==i&&"true"!==i||(q(this,B)[B]=!0);let s=t.searchParams.get("k5aDebugDev");"1"!==s&&"true"!==s||(q(this,V)[V]=!0,this.say("Dev mode ON","k5a"))}}setPersistentDebugMode(e=!1,t=!1){if(e){var i=t?2:1;q(this,J)[J].storage.setKey("dbg",i,3600),this.debugMode=!0,this.say("Persistent debug mode initialized","k5a")}else q(this,J)[J].storage.delKey("dbg")}checkPersistentDebugMode(){if(q(this,J)[J].storage&&q(this,J)[J].storage.canStore()){var e=q(this,J)[J].storage.getKey("dbg");e&&(e>1?(this.debugMode=!0,this.devMode=!0):1===e&&(this.devMode=!1,this.debugMode=!0))}}say(e,t="k5a"){q(this,B)[B]&&q(this,X)[X](e,"info",t)}info(e,t="k5a"){q(this,X)[X](e,"info",t)}error(e,t="k5a"){q(this,X)[X](e,"error",t)}warn(e,t="k5a"){q(this,X)[X](e,"warn",t)}table(e,t="k5a"){q(this,G)[G](t)&&(console.table?console.table(e):console.debug(JSON.stringify(e)))}dump(e){q(this,B)[B]&&(q(this,V)[V]?console.trace(q(this,Y)[Y],e):console.debug(q(this,Y)[Y],e))}}function ee(){let e=((new Error).stack||"").split("\n");for(var t=1;t<e.length;t++)if(-1===e[t].indexOf("speaker2.js")||t+1==e.length)return e[t].trim();return""}function te(e){return!(!q(this,B)[B]||Object.keys(q(this,$)[$]).length>0&&(void 0===q(this,$)[$][e]||!1===q(this,$)[$][e]))}function ie(e){q(this,V)[V]?console.trace(q(this,Y)[Y],e):console.log(q(this,Y)[Y],e),!1!==q(this,K)[K]&&((new Image).src=q(this,K)[K]+"?"+e)}function se(e,t="info",i=null){let s="";if("object"==typeof e&&(void 0!==e.prefix&&(s=e.prefix),t=e.type,i=e.module,e=e.message),q(this,G)[G](i)||"error"==t){let a="font-weight:bold;color:#284352;",r={info:"blue",error:"red",warn:"orange"},o=q(this,Y)[Y]+(null!==i?"["+i+"]":"")+s;if("error"===t?console.error("%c"+o+": %c"+e,a,"color:"+r[t]):console.log("%c"+o+": %c"+e,a,"color:"+r[t]),q(this,V)[V]){let e=q(this,W)[W]();console.log("%c"+o+": %c \\-> "+e,a,"color:"+r[t])}}}function ae(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var re=0;function oe(e){return"__private_"+re+++"_"+e}var ne=oe("k5a"),le=oe("data"),he=oe("hookMap"),ce=oe("loggerEnabled"),de=oe("useRateLimiter"),ue=oe("reqCnt"),pe=oe("reqLastCheckTime"),fe=oe("reqFastReqCnt"),ge=oe("totalMaxRequest"),ve=oe("timeMaxRequest"),be=oe("timeRequestsCnt"),me=oe("compileLogdata"),ye=oe("checkRateLimits");class we{constructor(e){Object.defineProperty(this,ye,{value:Oe}),Object.defineProperty(this,me,{value:ke}),Object.defineProperty(this,ne,{writable:!0,value:null}),Object.defineProperty(this,le,{writable:!0,value:{}}),Object.defineProperty(this,he,{writable:!0,value:{pageView:"p",click:"c",exit:"e",activity:"a",video:"v",nisa:"n"}}),Object.defineProperty(this,ce,{writable:!0,value:!0}),Object.defineProperty(this,de,{writable:!0,value:!1}),Object.defineProperty(this,ue,{writable:!0,value:0}),Object.defineProperty(this,pe,{writable:!0,value:null}),Object.defineProperty(this,fe,{writable:!0,value:0}),Object.defineProperty(this,ge,{writable:!0,value:1e3}),Object.defineProperty(this,ve,{writable:!0,value:10}),Object.defineProperty(this,be,{writable:!0,value:10}),ae(this,ne)[ne]=e,void 0!==ae(this,ne)[ne].cfg.rateLimiter&&(ae(this,de)[de]=!!ae(this,ne)[ne].cfg.rateLimiter.enabled,ae(this,de)[de]&&ae(this,ne)[ne].speaker.say("Using ratelimiter with these settings: "+JSON.stringify(ae(this,ne)[ne].cfg.rateLimiter),"logger"),void 0!==ae(this,ne)[ne].cfg.rateLimiter.maxRequests&&(ae(this,ge)[ge]=ae(this,ne)[ne].cfg.rateLimiter.maxRequests),void 0!==ae(this,ne)[ne].cfg.rateLimiter.throttlingTime&&(ae(this,ve)[ve]=ae(this,ne)[ne].cfg.rateLimiter.throttlingTime),void 0!==ae(this,ne)[ne].cfg.rateLimiter.throttlingCount&&(ae(this,be)[be]=ae(this,ne)[ne].cfg.rateLimiter.throttlingCount))}disable(){ae(this,ce)[ce]=!1}enable(){ae(this,ce)[ce]=!0}fireNow(e,t,i,s="c"){this.addData(e,t),this.fire(e,i,s)}addData(e,t){ae(this,ne)[ne].speaker.say("adding data for: "+e,"logger"),ae(this,ne)[ne].speaker.table(t,"logger"),void 0===ae(this,le)[le][e]?ae(this,le)[le][e]=t:ae(this,le)[le][e]={...ae(this,le)[le][e],...t}}fire(e,t="",i=""){if(void 0!==ae(this,le)[le][e]){var s=ae(this,le)[le][e];delete ae(this,le)[le][e],void 0!==ae(this,he)[he][e]&&(s.l=ae(this,he)[he][e]),void 0!==s._h&&""!==s._h||(s._h=e),void 0!==s._s&&""!==s._s||(s._s=t),void 0!==s._l&&""!==s._l||(s._l=i),ae(this,ue)[ue]++,s._c=ae(this,ue)[ue],ae(this,ye)[ye](),this.doLog(s)}}doLog(e){if(0==ae(this,ce)[ce])return;let t=ae(this,me)[me](e);ae(this,ne)[ne].speaker.say("full send: "+t);try{if(navigator&&navigator.sendBeacon)return navigator.sendBeacon(t+"&_m=b",{});var i=(new Date).getTime();return(new Image).src=t+"&_m=i&_r="+i,!0}catch(e){console.error(e.toString())}}doPostLog(e){if(ae(this,ye)[ye](),0!=ae(this,ce)[ce])try{if(navigator&&navigator.sendBeacon){ae(this,ue)[ue]++;var t=[];if(void 0===e.l)return console.error("Missing logType!"),!1;t.push("l="+e.l),["_h","_s","_l"].forEach((function(i,s){void 0===e[i]&&(e[i]=""),t.push(i+"="+e[i])})),t.push("_m=b"),t.push("_c="+ae(this,ue)[ue]),e.i=ae(this,ne)[ne].cfg.installationId,navigator.sendBeacon(ae(this,ne)[ne].k5aServer+"p?i="+ae(this,ne)[ne].cfg.installationId+"&"+t.join("&"),JSON.stringify(e))}}catch(e){console.error(e.toString())}}}function ke(e){for(var t in e)e[t]instanceof Array&&(e[t]=e[t].join("|"));var i="";void 0!==e.l&&(i="&l="+e.l,delete e.l);var s=Object.keys(e).map((t=>t+"="+encodeURIComponent(e[t]))).join("&");return ae(this,ne)[ne].k5aServer+"?i="+ae(this,ne)[ne].cfg.installationId+i+"&"+s}function Oe(){if(ae(this,de)[de]){if(null===ae(this,pe)[pe])return void(ae(this,pe)[pe]=parseInt((new Date).getTime()/1e3));let e=parseInt((new Date).getTime()/1e3);e-ae(this,pe)[pe]<=ae(this,ve)[ve]?(ae(this,fe)[fe]++,ae(this,fe)[fe]>=ae(this,be)[be]&&(ae(this,ce)[ce]?(ae(this,ne)[ne].speaker.say("Throttling log requests, execeed limits with "+ae(this,fe)[fe]+" of "+ae(this,be)[be]+" the last "+ae(this,ve)[ve]+" seconds","logger"),this.disable()):ae(this,ne)[ne].speaker.say("Log requests is throttled, execeed limits with "+ae(this,fe)[fe]+" of "+ae(this,be)[be]+" the last "+ae(this,ve)[ve]+" seconds","logger"))):(ae(this,fe)[fe]=0,!1===ae(this,ce)[ce]&&ae(this,ue)[ue]<ae(this,ge)[ge]&&(ae(this,ne)[ne].speaker.say("Reenabling logging again","logger"),this.enable())),ae(this,pe)[pe]=e,ae(this,ue)[ue]>ae(this,ge)[ge]&&ae(this,ne)[ne].speaker.warn("This client execeded max total log requests - "+ae(this,ue)[ue]+" of max "+ae(this,ge)[ge],"logger")}}function Pe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var je=0;function De(e){return"__private_"+je+++"_"+e}var Se=De("url");class Ae{constructor(e=null){Object.defineProperty(this,Se,{writable:!0,value:""}),null!==e&&(null!==e.match(/^\/\//i)?e=location.protocol+"//"+e:null===e.match(/^https?\:\/+/i)&&(e="https://"+e));try{var t;Pe(this,Se)[Se]=new URL(null!=(t=e)?t:location.href)}catch(t){var i;console.error("Invalid url given '"+(null!=(i=e)?i:location.href)+"' "+t.toString())}}get isLink(){return 0==Pe(this,Se)[Se].href.toLowerCase().indexOf("http",0)}get domain(){return Pe(this,Se)[Se].hostname.split(".").slice(-2).join(".")}get hash(){return Pe(this,Se)[Se].hash}get host(){return Pe(this,Se)[Se].host}get hostname(){return Pe(this,Se)[Se].hostname}get href(){return Pe(this,Se)[Se].href}get origin(){return Pe(this,Se)[Se].origin}get password(){return Pe(this,Se)[Se].password}get pathname(){return Pe(this,Se)[Se].pathname}get port(){return Pe(this,Se)[Se].port}get protocol(){return Pe(this,Se)[Se].port}get search(){return Pe(this,Se)[Se].search}get searchParams(){return Pe(this,Se)[Se].searchParams}get clean(){return Pe(this,Se)[Se].href.split(/[?#]/)[0]}get k5a(){return Pe(this,Se)[Se].hostname+Pe(this,Se)[Se].pathname}}function Te(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var _e=0;function Ee(e){return"__private_"+_e+++"_"+e}var Ce=Ee("f"),xe=Ee("keyStrBase64"),Me=Ee("keyStrUriSafe"),Le=Ee("baseReverseDic");class Ie{constructor(){Object.defineProperty(this,Ce,{writable:!0,value:String.fromCharCode}),Object.defineProperty(this,xe,{writable:!0,value:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}),Object.defineProperty(this,Me,{writable:!0,value:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"}),Object.defineProperty(this,Le,{writable:!0,value:{}})}getBaseValue(e,t){if(!Te(this,Le)[Le][e]){Te(this,Le)[Le][e]={};for(var i=0;i<e.length;i++)Te(this,Le)[Le][e][e.charAt(i)]=i}return Te(this,Le)[Le][e][t]}compressToBase64(e){if(null==e)return"";var t=this._compress(e,6,function(e){return Te(this,xe)[xe].charAt(e)}.bind(this));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}}decompressFromBase64(e){return null==e?"":""==e?null:this._decompress(e.length,32,function(t){return getBaseValue(Te(this,xe)[xe],e.charAt(t))}.bind(this))}compressToUTF16(e){return null==e?"":this._compress(e,15,function(e){return Te(this,Ce)[Ce](e+32)}.bind(this))+" "}decompressFromUTF16(e){return null==e?"":""==e?null:this._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32}.bind(e))}compressToUint8Array(e){for(var t=this.compress(e),i=new Uint8Array(2*t.length),s=0,a=t.length;s<a;s++){var r=t.charCodeAt(s);i[2*s]=r>>>8,i[2*s+1]=r%256}return i}decompressFromUint8Array(e){if(null==e)return this.decompress(e);for(var t=new Array(e.length/2),i=0,s=t.length;i<s;i++)t[i]=256*e[2*i]+e[2*i+1];var a=[];return t.forEach(function(e){a.push(Te(this,Ce)[Ce](e))}.bind(this)),this.decompress(a.join(""))}compressToEncodedURIComponent(e){return null==e?"":this._compress(e,6,function(e){return Te(this,Me)[Me].charAt(e)}.bind(this))}decompressFromEncodedURIComponent(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),this._decompress(e.length,32,function(t){return getBaseValue(Te(this,Me)[Me],e.charAt(t))}.bind(this)))}compress(e){return this._compress(e,16,function(e){return Te(this,Ce)[Ce](e)}.bind(this))}_compress(e,t,i){if(null==e)return"";var s,a,r,o={},n={},l="",h="",c="",d=2,u=3,p=2,f=[],g=0,v=0;for(r=0;r<e.length;r+=1)if(l=e.charAt(r),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=u++,n[l]=!0),h=c+l,Object.prototype.hasOwnProperty.call(o,h))c=h;else{if(Object.prototype.hasOwnProperty.call(n,c)){if(c.charCodeAt(0)<256){for(s=0;s<p;s++)g<<=1,v==t-1?(v=0,f.push(i(g)),g=0):v++;for(a=c.charCodeAt(0),s=0;s<8;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1}else{for(a=1,s=0;s<p;s++)g=g<<1|a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a=0;for(a=c.charCodeAt(0),s=0;s<16;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1}0==--d&&(d=Math.pow(2,p),p++),delete n[c]}else for(a=o[c],s=0;s<p;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1;0==--d&&(d=Math.pow(2,p),p++),o[h]=u++,c=String(l)}if(""!==c){if(Object.prototype.hasOwnProperty.call(n,c)){if(c.charCodeAt(0)<256){for(s=0;s<p;s++)g<<=1,v==t-1?(v=0,f.push(i(g)),g=0):v++;for(a=c.charCodeAt(0),s=0;s<8;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1}else{for(a=1,s=0;s<p;s++)g=g<<1|a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a=0;for(a=c.charCodeAt(0),s=0;s<16;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1}0==--d&&(d=Math.pow(2,p),p++),delete n[c]}else for(a=o[c],s=0;s<p;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(a=2,s=0;s<p;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1;for(;;){if(g<<=1,v==t-1){f.push(i(g));break}v++}return f.join("")}decompress(e){return null==e?"":""==e?null:this._decompress(e.length,32768,function(t){return e.charCodeAt(t)}.bind(e))}_decompress(e,t,i){var s,a,r,o,n,l,h,c=[],d=4,u=4,p=3,f="",g=[],v={val:i(0),position:t,index:1};for(s=0;s<3;s+=1)c[s]=s;for(r=0,n=Math.pow(2,2),l=1;l!=n;)o=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(o>0?1:0)*l,l<<=1;switch(r){case 0:for(r=0,n=Math.pow(2,8),l=1;l!=n;)o=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(o>0?1:0)*l,l<<=1;h=Te(this,Ce)[Ce](r);break;case 1:for(r=0,n=Math.pow(2,16),l=1;l!=n;)o=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(o>0?1:0)*l,l<<=1;h=Te(this,Ce)[Ce](r);break;case 2:return""}for(c[3]=h,a=h,g.push(h);;){if(v.index>e)return"";for(r=0,n=Math.pow(2,p),l=1;l!=n;)o=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(o>0?1:0)*l,l<<=1;switch(h=r){case 0:for(r=0,n=Math.pow(2,8),l=1;l!=n;)o=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(o>0?1:0)*l,l<<=1;c[u++]=Te(this,Ce)[Ce](r),h=u-1,d--;break;case 1:for(r=0,n=Math.pow(2,16),l=1;l!=n;)o=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(o>0?1:0)*l,l<<=1;c[u++]=Te(this,Ce)[Ce](r),h=u-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,p),p++),c[h])f=c[h];else{if(h!==u)return null;f=a+a.charAt(0)}g.push(f),c[u++]=a+f.charAt(0),a=f,0==--d&&(d=Math.pow(2,p),p++)}}}function Ne(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Fe=0;function Re(e){return"__private_"+Fe+++"_"+e}var Ue=Re("storageName"),qe=Re("storageMode"),ze=Re("sameSite"),He=Re("domain"),Be=Re("canStore"),Ve=Re("useBinary"),Ke=Re("useBase64"),Ye=Re("buckSize"),Je=Re("buckCnt"),$e=Re("dataSet"),We=Re("k5a"),Ge=Re("checkStorage"),Qe=Re("getData"),Xe=Re("saveData"),Ze=Re("getCookie"),et=Re("saveToCookie"),tt=Re("resetCookie"),it=Re("setCookie");class st{constructor(e,t="_k5a",i="cookie"){Object.defineProperty(this,it,{value:ct}),Object.defineProperty(this,tt,{value:ht}),Object.defineProperty(this,et,{value:lt}),Object.defineProperty(this,Ze,{value:nt}),Object.defineProperty(this,Xe,{value:ot}),Object.defineProperty(this,Qe,{value:rt}),Object.defineProperty(this,Ge,{value:at}),Object.defineProperty(this,Ue,{writable:!0,value:"_k5a"}),Object.defineProperty(this,qe,{writable:!0,value:"cookie"}),Object.defineProperty(this,ze,{writable:!0,value:"Strict"}),Object.defineProperty(this,He,{writable:!0,value:""}),Object.defineProperty(this,Be,{writable:!0,value:!1}),Object.defineProperty(this,Ve,{writable:!0,value:!1}),Object.defineProperty(this,Ke,{writable:!0,value:!1}),Object.defineProperty(this,Ye,{writable:!0,value:950}),Object.defineProperty(this,Je,{writable:!0,value:4}),Object.defineProperty(this,$e,{writable:!0,value:null}),Object.defineProperty(this,We,{writable:!0,value:null}),t!==Ne(this,Ue)[Ue]&&""!==t?Ne(this,Ue)[Ue]=t:void 0!==e&&void 0!==e.cfg.storage&&(void 0!==e.cfg.storage.name&&(Ne(this,Ue)[Ue]=e.cfg.storage.name),void 0!==e.cfg.storage.type&&"localstorage"==e.cfg.storage.type&&(i="localstorage"),void 0!==e.cfg.storage.b64&&e.cfg.storage.b64&&(Ne(this,Ke)[Ke]=!0,e.speaker.say("storage: b64 on")),void 0!==e.cfg.storage.compress&&e.cfg.storage.compress&&(Ne(this,Ve)[Ve]=!0,e.speaker.say("storage: compress on"))),i!=Ne(this,qe)[qe]&&(Ne(this,qe)[qe]=i),Ne(this,We)[We]=e;let s=new Ae(location.href);Ne(this,He)[He]=s.domain,Ne(this,Be)[Be]=Ne(this,Ge)[Ge](),e.speaker.say("Can store : "+(Ne(this,Be)[Be]?"yes":"no")+" storageMode:"+Ne(this,qe)[qe]),Ne(this,$e)[$e]=Ne(this,Qe)[Qe]()}canStore(){return Ne(this,Be)[Be]}get(){return Ne(this,$e)[$e]}set(e){Ne(this,$e)[$e]=e,Ne(this,Xe)[Xe]()}getKey(e){return null==Ne(this,$e)[$e]&&(Ne(this,$e)[$e]=Ne(this,Qe)[Qe]()),null!==Ne(this,$e)[$e]&&void 0!==Ne(this,$e)[$e][e]?Ne(this,$e)[$e][e][1]>0&&parseInt((new Date).getTime()/1e3)>Ne(this,$e)[$e][e][1]?(delete Ne(this,$e)[$e][e],Ne(this,Xe)[Xe](),null):Ne(this,$e)[$e][e][0]:null}setKey(e,t,i=0){null==Ne(this,$e)[$e]&&(Ne(this,$e)[$e]=Ne(this,Qe)[Qe]()),Ne(this,$e)[$e][e]=[t,i>0?parseInt((new Date).getTime()/1e3)+i:0],Ne(this,Xe)[Xe]()}delKey(e){null==Ne(this,$e)[$e]&&(Ne(this,$e)[$e]=Ne(this,Qe)[Qe]());try{delete Ne(this,$e)[$e][e]}catch(t){console.log("could not delete key: "+e)}Ne(this,Xe)[Xe]()}}function at(){var e=!1;if("cookie"===Ne(this,qe)[qe]){if(navigator&&navigator.cookieEnabled&&(e=!0),!e){var t="__t"+(new Date).getTime();document.cookie=t+"=1",e=-1!==document.cookie.indexOf(t+"="),document.cookie=t+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}}else if("localstorage"===Ne(this,qe)[qe]){e=!1;try{e="object"==(typeof window.localStorage).toLowerCase()}catch(e){console.log("No access to localStorage")}}return e}function rt(){let e;if("localstorage"==Ne(this,qe)[qe]){if(e=localStorage.getItem(Ne(this,Ue)[Ue]),Ne(this,Ve)[Ve]){let t=(new Ie).decompress(e);null!==t&&(e=t)}}else if(e=Ne(this,Ze)[Ze](Ne(this,Ue)[Ue]),Ne(this,Ke)[Ke]&&null!==e)try{e=decodeURIComponent(atob(e))}catch(e){console.error(e.toString())}if(null==e)return{};try{return JSON.parse(e)}catch(e){console.log("error in data: "+e.toString()),"localstorage"!==Ne(this,qe)[qe]&&Ne(this,tt)[tt]()}return{}}function ot(){let e=JSON.stringify(Ne(this,$e)[$e]);"localstorage"==Ne(this,qe)[qe]?(Ne(this,Ve)[Ve]&&(e=(new Ie).compress(e)),localStorage.setItem(Ne(this,Ue)[Ue],e)):(Ne(this,Ke)[Ke]&&(e=btoa(encodeURIComponent(e))),Ne(this,et)[et](e))}function nt(e){let t="",i=0,s=!1,a=0;for(;(0===i||s)&&i<Ne(this,Je)[Je];){let r=e+(i>0?i:"")+"=";if(document.cookie.length>0){let e=document.cookie.indexOf(r);if(-1!=e){e+=r.length;let o=document.cookie.indexOf(";",e);-1==o&&(o=document.cookie.length);let n=document.cookie.substring(e,o);if(n.length>0){if(0==i){let e=n.indexOf("@",0);a=n.substring(0,e),n=n.substr(e+1)}t+=n,s=!0}else s=!1}}i++}return t.length!=a?(console.error("Data is corrupt! - "+t.length+"vs"+a),Ne(this,tt)[tt](),null):t.length>0?t:null}function lt(e){let t=new Date;t.setFullYear(t.getFullYear()+1),Ne(this,tt)[tt]();let i=0,s=e.length+"@"+e.substr(i,Ne(this,Ye)[Ye]);for(;s.length>0&&i<Ne(this,Je)[Je];)try{Ne(this,it)[it](i>0?Ne(this,Ue)[Ue]+i:Ne(this,Ue)[Ue],s,new Date(t),"/",Ne(this,He)[He],Ne(this,ze)[ze]),i++,s=e.substr(Ne(this,Ye)[Ye]*i,Ne(this,Ye)[Ye])}catch(e){console.debug(e.toString()),i=1e3}}function ht(){let e=new Date;e.setFullYear(e.getFullYear()-1);for(let t=0;t<4;t++)Ne(this,it)[it](Ne(this,Ue)[Ue]+(t>0?t:""),"",new Date(e),"/",Ne(this,He)[He],Ne(this,ze)[ze])}function ct(e,t,i,s,a,r,o){void 0===r&&(r="Lax"),"None"===r&&(o=!0);var n=e+"="+t+(i?"; Expires="+i.toGMTString():"")+(s?"; Path="+s:"")+(a?"; Domain="+a:"")+(r?"; SameSite="+r:"")+(o?"; Secure":"");document.cookie=n}function dt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ut=0;function pt(e){return"__private_"+ut+++"_"+e}var ft=pt("channel");class gt{constructor(e=!1,t="domDetection2"){if(Object.defineProperty(this,ft,{writable:!0,value:""}),"domDetection"==t){var i=document.createElement("div");i.style.cssText="position: fixed;top: 0;left: 0;bottom: 0;right: 0;",document.documentElement.insertBefore(i,document.documentElement.firstChild);var s={width:i.offsetWidth,height:i.offsetHeight};console.debug(s);var a=s.width;dt(this,ft)[ft]=a<600?"mobile":"desktop",e&&a>=600&&(/ipad|android|tablet|kindle|silk|nook\s+browser|msie.+touch|xoom\s+build/i.test(navigator.userAgent)||"macintel"===navigator.platform.toLowerCase()&&void 0!==navigator.standalone)&&(dt(this,ft)[ft]="tablet"),document.documentElement.removeChild(i)}else{var r=navigator.userAgent.toLowerCase();-1===r.indexOf("mobile")&&r.indexOf("android")>-1||/(tablet|ipad|playbook|silk|kindle|nook\s+browser|msie.+touch|xoom\s+build)/i.test(r)||"macintel"===navigator.platform.toLowerCase()&&void 0!==navigator.standalone?dt(this,ft)[ft]=e?"tablet":"desktop":/Mobile|iP(hone|od)|Android.*Mobile|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/i.test(r)?dt(this,ft)[ft]="mobile":dt(this,ft)[ft]="desktop"}}getChannel(){return dt(this,ft)[ft]}}function vt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var bt=0;function mt(e){return"__private_"+bt+++"_"+e}var yt=mt("wordcount");class wt{constructor(e,t){if(Object.defineProperty(this,yt,{writable:!0,value:0}),void 0!==t.wordCount)for(var i of Object.keys(t.wordCount.article))if("cl"==i)for(var s of Object.keys(t.wordCount.article[i]))for(var a=e.getElementsByClassName(s),r=0;r<a.length;r++)n=(n=a[r].textContent).replace(/\s+/g," "),1==t.wordCount.article.cl[s]?vt(this,yt)[yt]+=n.split(" ").length-1:vt(this,yt)[yt]-=n.split(" ").length-1;else if("el"==i)for(var o of Object.keys(t.wordCount.article[i]))for(a=e.getElementsByTagName(o),r=0;r<a.length;r++){var n;n=(n=a[r].textContent).replace(/\s+/g," "),1==t.wordCount.article.el[o]?vt(this,yt)[yt]+=n.split(" ").length-1:vt(this,yt)[yt]-=n.split(" ").length-1}}getWordcount(){return vt(this,yt)[yt]}}function kt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ot=0;function Pt(e){return"__private_"+Ot+++"_"+e}var jt=Pt("paywallDetected");class Dt{constructor(e,t){if(Object.defineProperty(this,jt,{writable:!0,value:""}),null!=e&&void 0!==t.paywall&&void 0!==t.paywall.auto&&t.paywall.auto){if(void 0===t.paywall.element)return console.error("Paywall: missing element configuration"),!1;e.querySelectorAll(t.paywall.element).length>0&&(kt(this,jt)[jt]="hard")}}getPaywall(){return kt(this,jt)[jt]}}function St(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var At=0;function Tt(e){return"__private_"+At+++"_"+e}var _t=Tt("referer"),Et=Tt("qsps"),Ct=Tt("special"),xt=Tt("getQSP");class Mt{constructor(e,t){Object.defineProperty(this,xt,{value:Lt}),Object.defineProperty(this,_t,{writable:!0,value:""}),Object.defineProperty(this,Et,{writable:!0,value:["utm_source"]}),Object.defineProperty(this,Ct,{writable:!0,value:{"facebook.com":["fbclid"]}}),void 0!==t.referer&&(St(this,Et)[Et]=t.referer);for(var i=0;i<St(this,Et)[Et].length;i++)if(void 0!==St(this,Et)[Et][i]&&""!=St(this,Et)[Et][i]&&!1!==(a=St(this,xt)[xt](St(this,Et)[Et][i]))&&""!==a){St(this,_t)[_t]=a;break}if(""===St(this,_t)[_t])for(var s of Object.keys(St(this,Ct)[Ct])){for(i=0;i<St(this,Ct)[Ct][s].length;i++){var a;if(!1!==(a=St(this,xt)[xt](St(this,Ct)[Ct][s][i]))){St(this,_t)[_t]=s;break}}if(""!==St(this,_t)[_t])break}""===St(this,_t)[_t]&&document.referrer&&""!==document.referrer&&(St(this,_t)[_t]=document.referrer),""===St(this,_t)[_t]&&(St(this,_t)[_t]="_")}getReferer(){return St(this,_t)[_t]}}function Lt(e){var t=e+"=",i=location.href.indexOf(t),s=-1;return i>-1&&(i+=t.length,-1==(s=location.href.indexOf("&",i))&&(s=location.href.indexOf("#",i)),s>-1?decodeURIComponent(location.href.substring(i,s)):decodeURIComponent(location.href.substr(i)))}function It(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Nt=0;function Ft(e){return"__private_"+Nt+++"_"+e}var Rt=Ft("autoSection");class Ut{constructor(e,t){if(Object.defineProperty(this,Rt,{writable:!0,value:""}),void 0!==t.autoSection&&t.autoSection&&""!==e){var i=new URL(e).pathname.split("/");i.length>2&&""!==i[1]&&(It(this,Rt)[Rt]=i[1].toLowerCase())}}getSection(){return It(this,Rt)[Rt]}}class qt{getMostVisibleElement(e){var t=window.innerHeight,i=0,s=null;for(var a of Array.from(e)){var r=a.getBoundingClientRect(),o=r.bottom-r.top,n={top:r.top>=0&&r.top<t,bottom:r.bottom>0&&r.bottom<t},l=0;if(n.top&&n.bottom)l=o;else if(n.top)l=t-r.top;else if(n.bottom)l=r.bottom;else if(o>t&&r.top<0){var h=Math.abs(r.top);h<o&&(l=o-h)}l>i&&(i=l,s=a)}return s}}function zt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ht=0;function Bt(e){return"__private_"+Ht+++"_"+e}var Vt=Bt("readK5AMeta"),Kt=Bt("readLPMeta");class Yt{constructor(e,t){switch(Object.defineProperty(this,Kt,{value:$t}),Object.defineProperty(this,Vt,{value:Jt}),t){case"auto":!0!==zt(this,Vt)[Vt](e)&&zt(this,Kt)[Kt](e);break;case"LPMeta":zt(this,Kt)[Kt](e);break;default:zt(this,Vt)[Vt](e,t)}}}function Jt(e,t="k5aMeta"){if(void 0!==window[t]){for(var i=e.getFields(),s=Object.keys(window[t]),a=0;a<i.length;a++)if(void 0!==window[t][i[a]])e.setField(i[a],window[t][i[a]]);else{for(var r=!1,o=0;o<s.length;o++)if((s[o].toLowerCase()==i[a].toLowerCase()||"referrer"==s[o].toLowerCase()&&"referer"==i[a].toLowerCase())&&void 0!==window[t][s[o]]){e.setField(i[a],window[t][s[o]]),r=!0;break}r||e.delField(i[a])}return!0}return!1}function $t(e){if("undefined"!=typeof LPMeta){var t={url:"url",channel:"channel",image:"image",title:"title",section:"section",type:"type",tag:"tag",cTag:"cntTag",published_time:"publishtime",modified_time:"modifiedtime",paywalluser:"subscriber",paywall:"paid",wordcount:"wordcount",author:"author",conversion:"conversion",converted_user:"conversion",converteduser:"conversion"};for(var i in t)if(void 0!==LPMeta[i]&&""!==LPMeta[i])if("object"==typeof LPMeta[i])for(var s in LPMeta[i])e.setField(t[i],LPMeta[i][s].toLowerCase().trim());else e.setField(t[i],LPMeta[i]);return!0}return!1}function Wt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Gt=0;function Qt(e){return"__private_"+Gt+++"_"+e}var Xt=Qt("domElement");class Zt{constructor(e=null){Object.defineProperty(this,Xt,{writable:!0,value:null}),Wt(this,Xt)[Xt]=e}isTranslated(){return!!Wt(this,Xt)[Xt].querySelector("html.translated-ltr, html.translated-rtl, ya-tr-span, *[_msttexthash]")}}class ei{static getCountable(e){const t=new Ae(location.href);let i=t.searchParams;if(t.hash&&t.hash.length>1){const e=t.hash.replace("#","").split("&");for(let t=0;t<e.length;t++){const s=e[t].split("=");i.append(s[0],s[1]||"")}}let s={};return Object.keys(e).forEach((t=>{if(i.has(t))if(1===e[t]||!0===e[t])s[t]=1;else{var a,r;const o=(null==(a=e[t])?void 0:a.delim)||"|",n=i.get(t).split(o);if(null!=(r=e[t])&&r.rules)for(let i=0;i<n.length;i++)for(let a=0;a<e[t].rules.length;a++)if(null!==n[i].match(e[t].rules[a])){s[n[i]]=1;break}}})),Object.keys(s)}}function ti(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ii=0;function si(e){return"__private_"+ii+++"_"+e}var ai=si("k5a"),ri=si("pageElm"),oi=si("artElm"),ni=si("cfg"),li=si("prefixes"),hi=si("pData"),ci=si("result"),di=si("initFBIAData"),ui=si("runQSPTrackerData"),pi=si("initArticleElement"),fi=si("autoMeta"),gi=si("convertField");class vi{constructor(e,t=document,i=null){var s;if(Object.defineProperty(this,gi,{value:ki}),Object.defineProperty(this,fi,{value:wi}),Object.defineProperty(this,pi,{value:yi}),Object.defineProperty(this,ui,{value:mi}),Object.defineProperty(this,di,{value:bi}),Object.defineProperty(this,ai,{writable:!0,value:null}),Object.defineProperty(this,ri,{writable:!0,value:null}),Object.defineProperty(this,oi,{writable:!0,value:null}),Object.defineProperty(this,ni,{writable:!0,value:{}}),Object.defineProperty(this,li,{writable:!0,value:["k5a","kilkaya","og","lp"]}),Object.defineProperty(this,hi,{writable:!0,value:{url:{type:"url",auto:function(){return location.href},fields:["url"],param:"u",spaSafe:!1,isDefault:!0},referer:{type:"string",auto:function(){return new Mt(ti(this,ri)[ri],ti(this,ni)[ni]).getReferer()}.bind(this),fields:["referer","referrer"],param:"r",spaSafe:!0,isDefault:!0},title:{type:"string",fields:["title"],param:"ptl",spaSafe:!1,isDefault:!0},section:{type:"string",fields:["section","article:section"],auto:function(){return new Ut(this.getField("url"),ti(this,ni)[ni]).getSection()}.bind(this),param:"psn",spaSafe:!1,lc:!0,isDefault:!0},subsection:{type:"array",fields:["subsection","article:subsection"],param:"pssn",spaSafe:!1,lc:!0,isDefault:!0},type:{type:"string",fields:["type"],param:"ptp",spaSafe:!1,lc:!0,isDefault:!0},image:{type:"url",fields:["image","og:image:url"],param:"pig",spaSafe:!1,isDefault:!0},author:{type:"array",fields:["author","article:author"],param:"par",spaSafe:!1,lc:!0,isDefault:!0},tag:{type:"array",fields:["tag","article:tag"],param:"ptg",spaSafe:!1,lc:!0,isDefault:!0},cnttag:{type:"array",valueRule:/^[a-z0-9\_\-\:]+$/i,fields:["cntTag","article:cntTag"],param:"pctg",spaSafe:!1,lc:!0,isDefault:!0},contenttag:{type:"array",valueRule:/^[a-z0-9\_\-\:]+$/i,fields:["contentTag"],param:"pstg",spaSafe:!1,lc:!0,isDefault:!0},channel:{type:"string",fields:["channel"],auto:function(){return new gt(ti(this,ni)[ni].cntTablet||!1).getChannel()}.bind(this),param:"c",spaSafe:!0,undeleteAble:!0,isDefault:!0},wordcount:{type:"int",fields:["wordcount"],auto:function(){return new wt(ti(this,ri)[ri],ti(this,ni)[ni]).getWordcount()}.bind(this),param:"pwct",spaSafe:!1,isDefault:!0},publishtime:{type:"datetime",fields:["published_time","article:published_time"],param:"ppt",spaSafe:!1,isDefault:!0},modifiedtime:{type:"datetime",fields:["modified_time","article:modified_time"],param:"pmt",spaSafe:!1,isDefault:!0},paywall:{type:"string",fields:["paywall"],auto:function(){return new Dt(ti(this,oi)[oi],ti(this,ni)[ni]).getPaywall()}.bind(this),param:"pw",spaSafe:!1,isDefault:!0},paid:{type:"boolean",fields:["paid"],auto:function(){if(ti(this,ni)[ni].paywall&&ti(this,ni)[ni].paywall.autoPaid&&("hard"==ti(this,ci)[ci].paywall||"h"==ti(this,ci)[ci].paywall))return!0}.bind(this),param:"pd",spaSafe:!1,isDefault:!0},login:{type:"boolean",fields:["login"],param:"ul",spaSafe:!0,isDefault:!0},subscriber:{type:"boolean",fields:["subscriber"],param:"sbs",spaSafe:!0,isDefault:!0},conversion:{type:"boolean",fields:["conversion"],param:"cs",spaSafe:!1,isDefault:!0},userid:{type:"string",fields:["userid","userId"],param:"",spaSafe:!0},subscriberid:{type:"string",fields:["subscriberid"],param:"sbid",spaSafe:!0},consent:{type:"boolean",fields:["consent"],param:"cst",auto:function(){return!0},spaSafe:!0},nopageview:{type:"boolean",fields:["nopageview","nopv"],param:"nopv",spaSafe:!1},locale:{type:"string",fields:["locale"],param:"lo",auto:function(){const e=ti(this,ri)[ri].querySelector("html");if(void 0!==e&&e.hasAttribute("lang")){const t=e.getAttribute("lang");return""!=t&&t.length>1?t:""}}.bind(this),spaSafe:!1,lc:!0,isDefault:!0}}}),Object.defineProperty(this,ci,{writable:!0,value:{}}),ti(this,ai)[ai]=e,ti(this,ri)[ri]=t,ti(this,ni)[ni]=i,void 0!==ti(this,ni)[ni].customFields)for(var a in ti(this,ni)[ni].customFields)void 0!==ti(this,hi)[hi][a]?ti(this,ai)[ai].speaker.error("Could not setup customField '"+a+"' - reason: field already exists"):(ti(this,ai)[ai].speaker.say("Defining "+a+" as part of pageData"),ti(this,hi)[hi][a.toLowerCase()]=ti(this,ni)[ni].customFields[a]);for(var r in void 0!==ti(this,ni)[ni].prefixes&&(ti(this,li)[li]=ti(this,ni)[ni].prefixes),ti(this,oi)[oi]=ti(this,pi)[pi](),ti(this,hi)[hi])ti(this,fi)[fi](r);void 0!==ti(this,ni)[ni].skipFBIA&&1===ti(this,ni)[ni].skipFBIA||"undefined"==typeof ia_document||ti(this,di)[di](),void 0!==ti(this,ni)[ni].qspTracker&&ti(this,ui)[ui](),ti(this,ai)[ai].speaker.say("Init pagedata read (before jsonMetaData)","pagedata"),ti(this,ai)[ai].speaker.table(ti(this,ci)[ci],"pagedata"),new Yt(this,null!=(s=ti(this,ni)[ni].jsonMetaData)?s:"auto"),ti(this,ai)[ai].speaker.say("Init pagedata read:","pagedata"),ti(this,ai)[ai].speaker.table(ti(this,ci)[ci],"pagedata")}getArticleElement(){return ti(this,oi)[oi]===document?document.body:ti(this,oi)[oi]}reRead(){var e;ti(this,ai)[ai].speaker.say("ReRead called","pagedata");var t,i=!(!ti(this,ni)[ni].SPA||!ti(this,ni)[ni].SPA.metaData);if(i&&ti(this,ni)[ni].SPA&&"k5aMeta"==ti(this,ni)[ni].SPA.metaData&&"undefined"!=typeof k5aMeta)return this.resetAll(),new Yt(this,null!=(t=ti(this,ni)[ni].jsonMetaData)?t:"auto"),ti(this,ci)[ci].url&&""!==ti(this,ci)[ci].url||this.setField("url",ti(this,hi)[hi].url.auto()),ti(this,ai)[ai].speaker.say("Pagedata update - SPA (k5aMeta): "+location.href,"pagedata"),void ti(this,ai)[ai].speaker.table(ti(this,ci)[ci],"pagedata");let s=ti(this,ci)[ci].url;var a=(new qt).getMostVisibleElement(document.querySelectorAll(ti(this,ni)[ni].article));for(var r in ti(this,oi)[oi]=a,ti(this,hi)[hi])i||!i&&ti(this,hi)[hi][r].spaSafe?ti(this,fi)[fi](r):"url"==r?this.setField("url",location.href):ti(this,ci)[ci][r]="";new Yt(this,null!=(e=ti(this,ni)[ni].jsonMetaData)?e:"auto"),ti(this,ni)[ni].SPA&&ti(this,ni)[ni].SPA.skipConversion&&1==ti(this,ni)[ni].SPA.skipConversion&&this.resetField("conversion"),this.setField("paywall",ti(this,hi)[hi].paywall.auto()),this.setField("paid",ti(this,hi)[hi].paid.auto()),""==this.getField("referer")&&this.setField("referer",s),ti(this,ai)[ai].speaker.say("Pagedata update - SPA: "+location.href,"pagedata"),ti(this,ai)[ai].speaker.table(ti(this,ci)[ci],"pagedata")}setData(e){for(var t in e)this.setField(t,e[t])}setField(e,t){if(null!=t&&("referrer"==(e=e.toLowerCase())&&(e="referer"),void 0!==ti(this,hi)[hi][e]&&""!==t))switch(ti(this,hi)[hi][e].type){case"url":if(!ti(this,ni)[ni].forceRealUrl&&""!=t&&"/"!=t||"url"!=e){var i=this.isUrl(t);if(!1===i)throw new Error("given url is not valid: "+t);ti(this,ci)[ci][e]=i.trim()}else ti(this,ci)[ci][e]=ti(this,hi)[hi].url.auto();break;case"string":let r=t.trim();void 0!==ti(this,hi)[hi][e].lc&&ti(this,hi)[hi][e].lc&&(r=r.toLowerCase()),ti(this,ci)[ci][e]=r;break;case"array":if("object"==typeof t){for(var s in t)if(t.hasOwnProperty(s)&&void 0!==t[s]&&"undefined"!==t[s]&&null!==t[s]){let i=t[s].toString().trim();if(void 0!==ti(this,hi)[hi][e].lc&&ti(this,hi)[hi][e].lc&&(i=i.toLowerCase()),void 0!==ti(this,hi)[hi][e].valueRule&&ti(this,hi)[hi][e].valueRule&&i.match&&null==i.match(ti(this,hi)[hi][e].valueRule))return void ti(this,ai)[ai].speaker.error("Invalid value for "+e+" value: |"+i+"|");void 0===ti(this,ci)[ci][e]||""===ti(this,ci)[ci][e]?ti(this,ci)[ci][e]=[i]:ti(this,ci)[ci][e].includes(i)||ti(this,ci)[ci][e].push(i)}}else if(void 0!==t&&"undefined"!==t&&null!==t){if(t=t.toString().trim(),void 0!==ti(this,hi)[hi][e].lc&&ti(this,hi)[hi][e].lc&&(t=t.toLowerCase()),void 0!==ti(this,hi)[hi][e].valueRule&&ti(this,hi)[hi][e].valueRule&&null==t.match(ti(this,hi)[hi][e].valueRule))return void ti(this,ai)[ai].speaker.error("Invalid value for "+e+" value: |"+t+"|");void 0===ti(this,ci)[ci][e]||""===ti(this,ci)[ci][e]?ti(this,ci)[ci][e]=[t]:ti(this,ci)[ci][e].includes(t)||ti(this,ci)[ci][e].push(t)}break;case"boolean":ti(this,ci)[ci][e]="true"==t||1==t||"yes"==t||"1"==t?1:0;break;case"int":var a=parseInt(t);isNaN(a)||(ti(this,ci)[ci][e]=a);break;case"datetime":a=Date.parse(t),isNaN(a)||(ti(this,ci)[ci][e]=t)}}getField(e){return"domain"==e?new Ae(this.getField("url")).domain:(e=e.toLowerCase(),void 0!==ti(this,hi)[hi][e]&&void 0!==ti(this,ci)[ci][e]?ti(this,ci)[ci][e]:void 0!==ti(this,ci)[ci][e]&&""!=ti(this,ci)[ci][e]||void 0===ti(this,hi)[hi][e].auto?null:ti(this,hi)[hi][e].auto()||null)}delField(e){return void 0!==ti(this,hi)[hi][e]&&void 0!==ti(this,ci)[ci][e]&&void 0!==ti(this,hi)[hi][e].undeleteAble&&!ti(this,hi)[hi][e].undeleteAble&&(delete ti(this,ci)[ci][e],!0)}resetField(e){return!(void 0!==ti(this,hi)[hi][e].undeleteAble&&ti(this,hi)[hi][e].undeleteAble||void 0===ti(this,hi)[hi][e]||void 0===ti(this,ci)[ci][e]||(ti(this,ci)[ci][e]="",0))}resetAll(){var e=ti(this,ci)[ci].channel;ti(this,ci)[ci]=[],ti(this,ci)[ci].channel=e}getFields(){return Object.keys(ti(this,hi)[hi])}getData(){return structuredClone(ti(this,ci)[ci])}getFieldShortName(e){return void 0!==ti(this,hi)[hi][e]&&void 0!==ti(this,hi)[hi][e].param&&ti(this,hi)[hi][e].param}getLogData(e=null){var t={};null===e&&(e=Object.keys(ti(this,ci)[ci]));for(var i=0;i<e.length;i++)t[ti(this,hi)[hi][e[i]].param]=ti(this,ci)[ci][e[i]]?ti(this,ci)[ci][e[i]]:"";return t}getDefaultFields(){let e=[];for(let t in ti(this,hi)[hi])void 0!==ti(this,hi)[hi][t].isDefault&&ti(this,hi)[hi][t].isDefault&&e.push(t);return e}getDefaultData(){return this.getLogData(this.getDefaultFields())}isUrl(e){null!==e.match(/^\/\//i)?e=location.protocol+"//"+e:null===e.match(/^https?\:\/\//i)&&(e=location.protocol+"//"+location.hostname+e);try{var t=new URL(e,document.baseURI).href;t!==e&&(e=t)}catch(e){console.log(e.toString())}return(-1!==e.toLowerCase().indexOf("http://")||-1!==e.toLowerCase().indexOf("https://"))&&e}getMetaField(e,t=null){var i=ti(this,ri)[ri].querySelectorAll('meta[property="'+e+'"],meta[name="'+e+'"]');if(i&&i.length>0){for(var s=[],a=0;a<i.length;a++)if(i[a].hasAttribute("content")){var r=i[a].getAttribute("content");if("boolean"===t)return"1"==r||1==r||"yes"==r;null!==r&&""!=r&&s.push(r)}if(s.length>0)return s}return null}isTranslated(){return new Zt(ti(this,ri)[ri]).isTranslated()}}function bi(){if("undefined"!=typeof ia_document){this.setField("url",ia_document.shareURL),this.setField("title",ia_document.title);var e=ia_document.referrer||"https://ia.facebook.com/";-1==e.indexOf("http")&&(e="https://"+e),this.setField("referer",e),this.setField("channel",this.getField("channel")+"_fbia")}}function mi(){const e=ei.getCountable(ti(this,ni)[ni].qspTracker);if(e&&e.length>0)for(let t=0;t<e.length;t++)this.setField("cntTag",e[t])}function yi(){if(ti(this,ni)[ni].article){var e=ti(this,ri)[ri].querySelector(ti(this,ni)[ni].article);if(null!==e)return e}return ti(this,ri)[ri]}function wi(e){this.resetField(e),ti(this,hi)[hi][e];for(var t=0;t<ti(this,hi)[hi][e].fields.length;t++)for(var i=0;i<ti(this,li)[li].length;i++){let o=-1==ti(this,hi)[hi][e].fields[t].indexOf(":")?ti(this,li)[li][i]+":"+ti(this,hi)[hi][e].fields[t]:ti(this,hi)[hi][e].fields[t];var s=ti(this,ri)[ri].querySelectorAll('meta[property="'+o+'"i],meta[name="'+o+'"i]');if(s&&s.length>0)for(var a=0;a<s.length;a++){var r=s[a].getAttribute("content");if(null!==r&&""!=r){if("lp"==ti(this,li)[li][i]&&(r=ti(this,gi)[gi](ti(this,li)[li][i],e,r)),void 0!==ti(this,ni)[ni].customParseMetaField&&"function"==typeof ti(this,ni)[ni].customParseMetaField[e])try{r=ti(this,ni)[ni].customParseMetaField[e](r)}catch(t){ti(this,ai)[ai].speaker.error("Could not execute custom parse filed method for: "+e+" [field value: |"+r+"|]"),ti(this,ai)[ai].speaker.error("Reason: "+t.toString())}if(""!==r&&(this.setField(e,r),void 0!==ti(this,ci)[ci][e]&&"array"!=ti(this,hi)[hi][e].type))return}}}void 0!==ti(this,ci)[ci][e]&&""!=ti(this,ci)[ci][e]||void 0===ti(this,hi)[hi][e].auto||this.setField(e,ti(this,hi)[hi][e].auto())}function ki(e,t,i){if("lp"==e&&"paywall"==t){if("1"===i||"h"===i||"hard"===i)return this.setField("paid",!0),""}else{var s={lp:{paywall:{1:"hard",0:""}}};if(s[e]&&s[e][t]&&s[e][t][i])return s[e][t][i]}return i}function Oi(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Pi=0;function ji(e){return"__private_"+Pi+++"_"+e}var Di=ji("pingData"),Si=ji("asyncTTL"),Ai=ji("reqIdHistory");class Ti{constructor(e){this.k5a=null,Object.defineProperty(this,Di,{writable:!0,value:{userActive:0,pings:[]}}),this.supportAsync=!1,Object.defineProperty(this,Si,{writable:!0,value:1e4}),Object.defineProperty(this,Ai,{writable:!0,value:[]}),this.k5a=e}addHook(e,t,i=!1){this.k5a.listener.addHook(e,t,i)}addUserActiveHook(e,t,i){this.k5a.listener.addUserActiveHook(e,t,i)}isAutoEnabled(e){return void 0===this.k5a.cfg.moduleCfg[e]||void 0===this.k5a.cfg.moduleCfg[e].autoDisabled||!0!==this.k5a.cfg.moduleCfg[e].autoDisabled}addAsyncData(e,t,i){var s=this.k5a.storage.getKey("as");null===s&&(s={}),void 0===s[e]&&(s[e]={}),void 0===s[e][t]&&(s[e][t]=[]),i._reqId=this.k5a.requestId,s[e][t].push(i),this.k5a.storage.setKey("as",s,Oi(this,Si)[Si])}getAsyncData(e){var t=this.k5a.storage.getKey("as");return null!==t&&void 0!==t[e]&&t[e]}runAsyncData(e,t,i=!1,s=!1){let a=this.k5a.requestId+"_"+e+"_"+t;if(Oi(this,Ai)[Ai].indexOf(a)>-1)return void this.k5a.speaker.say("as sync with id '"+a+"' already done!");Oi(this,Ai)[Ai].push(a);let r=this.k5a.storage.getKey("as"),o={};null!==r&&void 0!==r[e]&&(Object.keys(r).forEach((a=>{a===e?Object.keys(r[a]).forEach((n=>{if("*"===t||n===t)for(var l=0;l<r[e][n].length;l++)if(s||r[e][n][l]._reqId!==this.k5a.requestId)if(delete r[e][n][l]._reqId,i)try{var h=i(r[e][n][l]);!1!==h&&this.k5a.logger.fireNow(n,h,"storage")}catch(e){console.error(e.toString())}else this.k5a.logger.fireNow(n,r[e][n][l],"storage");else void 0===o[a]&&(o[a]={}),void 0===o[a][n]&&(o[a][n]=[]),o[a][n].push(r[e][n][l]),console.log("k5a: not running this AS data as we are on same requestId - "+r[e][n][l]._reqId+" vs k5a:"+this.k5a.requestId)})):Object.keys(r[a]).length>0&&(o[a]=r[a])})),Object.keys(o).length>0?this.k5a.storage.setKey("as",o,Oi(this,Si)[Si]):this.k5a.storage.delKey("as"))}say(e){this.k5a.speaker.say(e,this.constructor.name)}warn(e){this.k5a.speaker.warn(e,this.constructor.name)}error(e){this.k5a.speaker.error(e,this.constructor.name)}clearAsyncData(e){}keysToLowerCase(e){var t={};return Object.keys(e).forEach((i=>{t[i.toLowerCase()]=e[i]})),t}}function _i(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Ti.moduleName="logmodule";var Ei=0;function Ci(e){return"__private_"+Ei+++"_"+e}var xi=Ci("pingInterval"),Mi=Ci("userTTL"),Li=Ci("lastActive"),Ii=Ci("lastPing"),Ni=Ci("logData"),Fi=Ci("intId"),Ri=Ci("activities"),Ui=Ci("stop"),qi=Ci("getTime");class zi extends Ti{constructor(e){super(e),Object.defineProperty(this,qi,{value:Bi}),Object.defineProperty(this,Ui,{value:Hi}),Object.defineProperty(this,xi,{writable:!0,value:30}),Object.defineProperty(this,Mi,{writable:!0,value:60}),Object.defineProperty(this,Li,{writable:!0,value:0}),Object.defineProperty(this,Ii,{writable:!0,value:0}),Object.defineProperty(this,Ni,{writable:!0,value:{}}),Object.defineProperty(this,Fi,{writable:!0,value:!1}),Object.defineProperty(this,Ri,{writable:!0,value:[]}),_i(this,Ni)[Ni]=this.k5a.pageData.getDefaultData(),_i(this,Ni)[Ni].uid=this.k5a.user.getId(),_i(this,Li)[Li]=_i(this,qi)[qi](),this.addHook("activity",function(e){_i(this,Li)[Li]=_i(this,qi)[qi](),this.start()}.bind(this)),this.addHook("hidden",function(e){_i(this,Ui)[Ui]()}.bind(this),!0),this.addHook("active",function(e){_i(this,Li)[Li]=_i(this,qi)[qi](),this.checkActivity()}.bind(this),!0)}start(){!1===_i(this,Fi)[Fi]&&(_i(this,Fi)[Fi]=setInterval(function(){this.checkActivity()}.bind(this),1e3*_i(this,xi)[xi]))}checkActivity(){var e=_i(this,qi)[qi]();if(!(0!==_i(this,Ii)[Ii]&&e-_i(this,Ii)[Ii]<_i(this,xi)[xi])){for(var t=!1,i=[],s=0;s<_i(this,Ri)[Ri].length;s++)try{var a=_i(this,Ri)[Ri][s]();if(!1!==a&&(t=!0,_i(this,Li)[Li]=_i(this,qi)[qi](),"object"==typeof a&&a.length>0))for(s=0;s<a.length;s++){var r=_i(this,Ni)[Ni];Object.keys(a[s]).forEach((e=>{r[e]=a[s][e]})),i.push(r)}}catch(e){console.error("Could not call callback: "+e.toString())}if(!t&&e-_i(this,Li)[Li]<=_i(this,Mi)[Mi]&&!1!==_i(this,Fi)[Fi]&&(t=!0),t){for(void 0!==this.k5a.cfg.activeUsers&&1==this.k5a.cfg.activeUsers&&i.push(_i(this,Ni)[Ni]),s=0;s<i.length;s++)this.k5a.logger.fireNow("activity",i[s],"js");_i(this,Ii)[Ii]=e}else this.k5a.listener.fireHook("hidden"),_i(this,Ui)[Ui]()}}addActivity(e){_i(this,Ri)[Ri].push(e)}}function Hi(){clearInterval(_i(this,Fi)[Fi]),_i(this,Fi)[Fi]=!1}function Bi(){return parseInt((new Date).getTime()/1e3)}function Vi(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ki=0;function Yi(e){return"__private_"+Ki+++"_"+e}var Ji=Yi("length"),$i=Yi("data"),Wi=Yi("ttl"),Gi=Yi("defaultSessionTTL"),Qi=Yi("wasNewSession"),Xi=Yi("name"),Zi=Yi("store"),es=Yi("cannotStore"),ts=Yi("UUID");class is{constructor(e,t="u",i=16){Object.defineProperty(this,ts,{value:as}),Object.defineProperty(this,es,{value:ss}),Object.defineProperty(this,Ji,{writable:!0,value:16}),Object.defineProperty(this,$i,{writable:!0,value:{}}),Object.defineProperty(this,Wi,{writable:!0,value:9e4}),Object.defineProperty(this,Gi,{writable:!0,value:1800}),Object.defineProperty(this,Qi,{writable:!0,value:!1}),this.k5a=null,Object.defineProperty(this,Xi,{writable:!0,value:"u"}),Object.defineProperty(this,Zi,{writable:!0,value:null}),this.k5a=e,Vi(this,Ji)[Ji]=i,Vi(this,Xi)[Xi]=t,e.consent&&this.k5a.storage.canStore()?(Vi(this,$i)[$i]=this.k5a.storage.getKey(t),null!==Vi(this,$i)[$i]?(Vi(this,Qi)[Qi]=Vi(this,$i)[$i].ts+Vi(this,Gi)[Gi]<parseInt((new Date).getTime()/1e3),Vi(this,$i)[$i].ts=parseInt((new Date).getTime()/1e3)):(Vi(this,Qi)[Qi]=!0,Vi(this,$i)[$i]={uid:Vi(this,ts)[ts](),ts:parseInt((new Date).getTime()/1e3)}),this.k5a.storage.setKey(Vi(this,Xi)[Xi],Vi(this,$i)[$i],Vi(this,Wi)[Wi])):Vi(this,es)[es]()}setId(e=""){return!(!this.k5a.consent||null===e.match(/^[a-zA-Z0-9\-\_\.]{4,128}$/)||(Vi(this,$i)[$i].uid=e,Vi(this,$i)[$i].ts=parseInt((new Date).getTime()/1e3),this.k5a.storage.setKey(Vi(this,Xi)[Xi],Vi(this,$i)[$i],Vi(this,Wi)[Wi]),0))}getId(){return Vi(this,$i)[$i].uid}getLastSeen(){return Vi(this,$i)[$i].ts}isNewSession(){return Vi(this,Qi)[Qi]}}function ss(){Vi(this,$i)[$i].uid="_",Vi(this,Qi)[Qi]=!1}function as(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,i=[],s=0;s<Vi(this,Ji)[Ji];s++)i[s]=e[0|Math.random()*t];return i.join("")}function rs(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var os=0;function ns(e){return"__private_"+os+++"_"+e}var ls=ns("modules"),hs=ns("insId"),cs=ns("initializeModules"),ds=ns("setupApiMethods"),us=ns("setupCustomCfg");function ps(){for(var e=0;e<this.cfg.modules.length;e++){var t=this.cfg.modules[e].moduleName;this.speaker.say('Loading module "'+t+'"');try{var i;rs(this,ls)[ls][t]=new this.cfg.modules[e](this,null!=(i=this.cfg.moduleCfg[t])?i:{}),"function"==typeof rs(this,ls)[ls][t].apiMethods&&rs(this,ds)[ds](rs(this,ls)[ls][t].apiMethods())}catch(t){this.speaker.say('Could not load log module: "'+this.cfg.modules[e]+'", reason: '+t.toString())}}}function fs(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))}function gs(){let e=["pageview","click","engagement","video"],t=this.pageData.getField("domain");if(void 0!==this.cfg){let t=!1;if(void 0===this.cfg.disableRefresh&&(this.cfg.disableRefresh=!0),0!==this.cfg.disableRefresh&&!1!==this.cfg.disableRefresh){let e=["refresh","autoRefresh","noLog"];"object"==typeof this.cfg.disableRefresh&&this.cfg.disableRefresh.length>0&&(e=this.cfg.disableRefresh);for(const i of e)if(this.pageData.getMetaField("k5a:"+i,"boolean")){t=!0;break}t||null===location.href.match(new RegExp("[#?&](?:"+e.join("|")+")","i"))||(this.speaker.say("Disabled via url parameter"),t=!0)}if(void 0!==this.cfg.disableBots&&void 0!==navigator.userAgent){let e=["bot","spider","scraper","bing","crawler","cxense","search","yandex","cookiebot"];if("object"==typeof this.cfg.disableBots&&this.cfg.disableBots.length>0)for(const t of this.cfg.disableBots)e.push(t);null!==navigator.userAgent.match(new RegExp(e.join("|"),"i"))&&(t=!0)}t&&e.forEach((e=>{void 0===this.cfg.moduleCfg[e]&&(this.cfg.moduleCfg[e]={}),this.cfg.moduleCfg[e].autoDisabled=!0,this.speaker.say("Module disabled via option: "+e)}))}"undefined"!=typeof k5aMeta&&Object.keys(k5aMeta).forEach((t=>{if(!0===k5aMeta[t]||1===k5aMeta[t]||"1"===k5aMeta[t]||"yes"===k5aMeta[t]){var i=t.substr(7).toLowerCase();e.includes(i)&&(this.speaker.say("Disabling "+i+" auto logging"),void 0===this.cfg.moduleCfg[i]?this.cfg.moduleCfg[i]={autoDisabled:!0}:this.cfg.moduleCfg[i].autoDisabled=!0)}})),e.forEach((e=>{void 0!==this.cfg.moduleCfg[e]&&void 0!==this.cfg.moduleCfg[e].disableFor&&this.cfg.moduleCfg[e].disableFor.includes(t)&&(this.speaker.say("Disabling "+e+' auto logging, "'+t+'" is banned in disableFor'),this.cfg.moduleCfg[e].autoDisabled=!0)}))}function vs(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var bs=0;function ms(e){return"__private_"+bs+++"_"+e}var ys=ms("logData"),ws=ms("spaHistory"),ks=ms("setupData"),Os=ms("apiPageview");class Ps extends Ti{constructor(e){super(e),Object.defineProperty(this,Os,{value:Ds}),Object.defineProperty(this,ks,{value:js}),Object.defineProperty(this,ys,{writable:!0,value:{}}),Object.defineProperty(this,ws,{writable:!0,value:{}}),this.isAutoEnabled("pageview")&&(vs(this,ks)[ks](),this.addHook("pageView",function(e){e.persisted&&(vs(this,ys)[ys].ns=0),this.k5a.logger.addData("pageView",vs(this,ys)[ys])}.bind(this))),this.k5a.cfg.pageData.SPA&&this.addHook("spa",function(e){setTimeout(function(){this.k5a.speaker.say("I got a SPA pageview","pageview"),vs(this,ks)[ks](),vs(this,ys)[ys].ns=0,this.k5a.cfg.pageData.SPA.onlyOnce&&void 0!==vs(this,ws)[ws][vs(this,ys)[ys].u]?this.k5a.speaker.say("URL has already been recorded with pageview","pageview"):(this.k5a.logger.fireNow("pageView",vs(this,ys)[ys],"spa"),this.k5a.cfg.pageData.SPA.onlyOnce&&(vs(this,ws)[ws][vs(this,ys)[ys].u]=1))}.bind(this),this.k5a.cfg.pageData.SPA.viewTime&&this.k5a.cfg.pageData.SPA.viewTime>0?1e3*this.k5a.cfg.pageData.SPA.viewTime:1)}.bind(this),!0)}apiMethods(){return{pageview:function(e,t=!0){return vs(this,Os)[Os](e,t)}.bind(this)}}}function js(){vs(this,ys)[ys]=this.k5a.pageData.getDefaultData(),vs(this,ys)[ys].uid=this.k5a.user.getId(),vs(this,ys)[ys].ns=this.k5a.user.isNewSession()?1:0;let e=this.k5a.pageData.getField("nopageview");e&&"1"==e&&(vs(this,ys)[ys].nopv=1)}function Ds(e={},t=!0){var i={};if(e=this.keysToLowerCase(e),t){this.k5a.pageData.reRead();var s=this.k5a.pageData.getDefaultFields();if(void 0!==e.url&&!1===this.k5a.pageData.isUrl(e.url))throw new Error('Url is not valid: "'+e.url+'"');Object.values(s).forEach((t=>{void 0!==e[t]&&""!==e[t]&&this.k5a.pageData.setField(t,e[t])})),(i=this.k5a.pageData.getDefaultData()).uid=this.k5a.user.getId(),i.ns=this.k5a.user.isNewSession()?1:0,i.nopv=void 0!==e.nopv&&1==e.nopv?1:0}else{this.k5a.pageData.reRead();var a=this.k5a.pageData.getDefaultFields(),r=this.k5a.pageData.getField("channel");i={},Object.values(a).forEach((t=>{void 0!==e[t]&&""!==e[t]?this.k5a.pageData.setField(t,e[t]):this.k5a.pageData.delField(t)})),i=this.k5a.pageData.getDefaultData();var o={uid:"uid",newSession:"ns"};Object.keys(o).forEach((t=>{void 0!==e[t]&&""!==e[t]?i[o[t]]=e[t]:i[o[t]]="ns"==t?0:""})),""===i.c&&(i.c=r),i.nopv=void 0!==e.nopv&&1==e.nopv?1:0}return this.k5a.pageData.reRead(),this.k5a.logger.fireNow("pageView",i,"jsapi"),!0}function Ss(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Ps.moduleName="pageview";var As=0;function Ts(e){return"__private_"+As+++"_"+e}var _s=Ts("slotCfg"),Es=Ts("getSlot"),Cs=Ts("get"),xs=Ts("getData"),Ms=Ts("getSize"),Ls=Ts("getUrl"),Is=Ts("autoSize"),Ns=Ts("getSlotMains"),Fs=Ts("autoPos"),Rs=Ts("getElementPosition"),Us=Ts("searchDataAtrs"),qs=Ts("getPos");class zs{constructor(e=null){Object.defineProperty(this,qs,{value:Xs}),Object.defineProperty(this,Us,{value:Qs}),Object.defineProperty(this,Rs,{value:Gs}),Object.defineProperty(this,Fs,{value:Ws}),Object.defineProperty(this,Ns,{value:$s}),Object.defineProperty(this,Is,{value:Js}),Object.defineProperty(this,Ls,{value:Ys}),Object.defineProperty(this,Ms,{value:Ks}),Object.defineProperty(this,xs,{value:Vs}),Object.defineProperty(this,Cs,{value:Bs}),Object.defineProperty(this,Es,{value:Hs}),Object.defineProperty(this,_s,{writable:!0,value:{}}),Ss(this,_s)[_s]=e,null==Ss(this,_s)[_s]&&(Ss(this,_s)[_s]={}),void 0===Ss(this,_s)[_s].slotUrl&&(Ss(this,_s)[_s].slotUrl={el:["a"]}),void 0===Ss(this,_s)[_s].dataUrlAttributes&&(Ss(this,_s)[_s].dataUrlAttributes=[]),-1==Ss(this,_s)[_s].dataUrlAttributes.indexOf("data-k5a-url")&&(Ss(this,_s)[_s].dataUrlAttributes=["data-k5a-url",...Ss(this,_s)[_s].dataUrlAttributes])}analyze(e){var t=Ss(this,Es)[Es](e);let i=!1;i=!1!==t&&t.querySelectorAll("[data-k5a-pos]").length<1?Ss(this,Fs)[Fs](t):{position:Ss(this,qs)[qs](e),row:0,pos:0};try{var s=Ss(this,Us)[Us](!1!==t?t:e)}catch(e){console.debug(e.toString())}var a={url:Ss(this,Ls)[Ls](e),size:0!=t?Ss(this,Ms)[Ms](t):"",image:void 0!==s.image&&""!==s.image?s.image:0!=t?Ss(this,Cs)[Cs](t,"image"):"",title:void 0!==s.title&&""!==s.title?s.title:0!=t?Ss(this,Cs)[Cs](t,"title"):"",row:i?i.row:0,pos:i?i.pos:0,position:i?i.position:Ss(this,qs)[qs](e),section:void 0!==s.section&&""!==s.section?s.section:"",type:void 0!==s.type&&""!==s.type?s.type:"",paid:void 0!==s.paid&&""!==s.paid?s.paid:""};return""!==a.url&&a}}function Hs(e){if(e.tagName&&"HTML"==e.tagName)return!1;if(!Ss(this,_s)[_s].slot)return!1;for(var t=0;e&&t++<50;){if(Ss(this,_s)[_s].slot.cl)for(var i=0;i<Ss(this,_s)[_s].slot.cl.length;i++)if(e.classList.contains(Ss(this,_s)[_s].slot.cl[i]))return e;if(Ss(this,_s)[_s].slot.el)for(i=0;i<Ss(this,_s)[_s].slot.el.length;i++)if(e.tagName.toLowerCase()==Ss(this,_s)[_s].slot.el[i].toLowerCase())return e;if(!e.parentNode||!e.parentNode.hasAttribute)return!1;e=e.parentNode}return!1}function Bs(e,t){if(void 0===Ss(this,_s)[_s][t])return"";if(Ss(this,_s)[_s][t].cl)for(var i=0;i<Ss(this,_s)[_s][t].cl.length;i++)if((s=e.getElementsByClassName(Ss(this,_s)[_s][t].cl[i]))&&s.length>0)return Ss(this,xs)[xs](t,s[0]);if(Ss(this,_s)[_s][t].el)for(i=0;i<Ss(this,_s)[_s][t].el.length;i++)if((s=e.getElementsByTagName(Ss(this,_s)[_s][t].el[i]))&&s.length>0)return Ss(this,xs)[xs](t,s[0]);if(Ss(this,_s)[_s][t].qs)for(i=0;i<Ss(this,_s)[_s][t].qs.length;i++){var s;if((s=e.querySelectorAll(Ss(this,_s)[_s][t].qs[i]))&&s.length>0)return Ss(this,xs)[xs](t,s[0])}return""}function Vs(e,t){let i=!1;switch(e){case"title":i=t.textContent;break;case"image":i=t.src}return void 0!==i&&!1!==i&&""!==i?i.trim():""}function Ks(e){if(void 0!==Ss(this,_s)[_s].slot.ss&&"auto"==Ss(this,_s)[_s].slot.ss)return Ss(this,Is)[Is](e)}function Ys(e){let t=0;for(;e.tagName&&"A"!=e.tagName&&t++<50;){for(let t=0;t<Ss(this,_s)[_s].dataUrlAttributes.length;t++)if(e.hasAttribute&&e.hasAttribute(Ss(this,_s)[_s].dataUrlAttributes[t])&&""!=e.getAttribute(Ss(this,_s)[_s].dataUrlAttributes[t]))return e.getAttribute(Ss(this,_s)[_s].dataUrlAttributes[t]);e=e.parentNode}if(e&&e.tagName&&"A"==e.tagName){for(let t=0;t<Ss(this,_s)[_s].dataUrlAttributes.length;t++)if(e.hasAttribute&&e.hasAttribute(Ss(this,_s)[_s].dataUrlAttributes[t])&&""!=e.getAttribute(Ss(this,_s)[_s].dataUrlAttributes[t]))return e.getAttribute(Ss(this,_s)[_s].dataUrlAttributes[t]);return e.href}return""}function Js(e){let t=e.clientWidth,i=e.parentNode.clientWidth;if(t>0&&i>0){let e=t/i;return e<=.33?"small":e<=.5?"medium":e<=.75?"large":"big"}}function $s(e){var t=!1,i=[];if(void 0!==Ss(this,_s)[_s].mains){for(var s=0;"BODY"!==e.tagName&&s++<50;){if(e.hasAttribute&&e.hasAttribute("data-k5a-topname")&&""!=e.getAttribute("data-k5a-topname"))return t=e.getAttribute("data-k5a-topname"),i.push(e),{topName:t,containers:i};for(var a of Object.keys(Ss(this,_s)[_s].mains)){if(e.tagName&&Ss(this,_s)[_s].mains[a].includes(e.tagName.toLowerCase())){t=a,i.push(e);break}if(e.hasAttribute&&e.hasAttribute("id")&&Ss(this,_s)[_s].mains[a].includes("#"+e.id)){t=a;break}if(e.hasAttribute&&e.hasAttribute("class")){var r=e.className.split(" ");for(var o of r)if(Ss(this,_s)[_s].mains[a].includes("."+o)){t=a,i.push(e);break}}}e&&e.parentNode&&(e=e.parentNode)}if(!1!==t)for(var n of Ss(this,_s)[_s].mains[t])if(n.indexOf("#")>-1){var l=document.getElementById(n.substr(1));null!=l&&i.push(l)}else{var h=document.getElementsByClassName(n);i.push(...h)}}return!1===t&&(t="",i.push(document.body)),{topName:t,containers:i}}function Ws(e){let{topName:t,containers:i}=Ss(this,Ns)[Ns](e),s=[];for(var a=0;a<i.length;a++)if(void 0!==Ss(this,_s)[_s].slot){let e=[];void 0!==Ss(this,_s)[_s].slot.cl&&e.push(...Ss(this,_s)[_s].slot.cl.map((function(e){return"."+e}))),void 0!==Ss(this,_s)[_s].slot.el&&e.push(...Ss(this,_s)[_s].slot.el.map((function(e){return e})));var r=i[a].querySelectorAll(e.join(","));s.push(...r)}var o=0,n=0,l=0,h=0,c=0;for(a=0;a<s.length;a++){var d=Ss(this,Rs)[Rs](s[a]);if((0==l||l+h<d.top)&&(l=parseInt(d.top),h=s[a].offsetHeight,o++,n=c=0),l==d.top&&s[a].offsetHeight>h&&(h=s[a].offsetHeight),(0==c||c<d.left)&&(c=d.left,n++),s[a]==e)return{row:o,pos:n,position:(""!=t?t+"_":"")+Ss(this,_s)[_s].positionTemplate.replace("${row}",o).replace("${pos}",n)}}return!1}function Gs(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}}function Qs(e){var t={};if(e&&"A"!==e.tagName){let t=0;for(;++t<30&&null!==e&&"A"!==e.tagName;)e=e.parentNode}if(null===e)return t;var i={title:["data-k5a-title"],section:["data-k5a-section"],type:["data-k5a-type"],image:["data-k5a-image"],subsection:["data-k5a-subsection"],paid:["data-k5a-paid"]};if(Ss(this,_s)[_s]&&Ss(this,_s)[_s].metaDataAttributes)for(let e of Object.keys(i))void 0!==Ss(this,_s)[_s].metaDataAttributes[e]&&Ss(this,_s)[_s].metaDataAttributes[e].length>0&&(i[e]=Ss(this,_s)[_s].metaDataAttributes[e]);for(let a of Object.keys(i)){t[a]="";for(let r=0;r<i[a].length;r++){let o=e.querySelectorAll("["+i[a][r]+"]");if(o&&o.length>0)for(let e=0;e<o.length;e++)if(o[e].hasAttribute&&o[e].hasAttribute(i[a][r])){var s=o[e].getAttribute(i[a][r]);if(""!==s){t[a]=s.trim(),r=i[a].length+1;break}}}}return t}function Xs(e){var t=[],i=["data-k5a-pos"];for(Ss(this,_s)[_s].dataAtrs&&Ss(this,_s)[_s].dataAtrs.length>0&&i.push(...Ss(this,_s)[_s].dataAtrs);e&&"BODY"!=e.tagName;){for(var s=!1,a=0;a<i.length&&!s;a++)e.hasAttribute&&e.hasAttribute(i[a])&&(t.push(e.getAttribute(i[a])),s=!0);if(!s&&Ss(this,_s)[_s].position){let i={id:"id",tagName:"el",class:"cl",atrMatch:"atrMatch"};for(var r of Object.keys(Ss(this,_s)[_s].position))for(var o of Object.keys(i))if(void 0!==Ss(this,_s)[_s].position[r][i[o]])if("atrMatch"==o)for(let a=0;a<e.attributes.length;a++)null!==(e.attributes[a].nodeName+'="'+e.attributes[a].nodeValue+'"').match("s*"+Ss(this,_s)[_s].position[r][i[o]].join("|")+"s*")&&(t.push(r),s=!0);else{var n="tagName"==o?e.tagName&&e.tagName.toLowerCase():e.getAttribute(o);"string"==typeof n&&""!==n&&null!==n.match("s*"+Ss(this,_s)[_s].position[r][i[o]].join("|")+"s*")&&(t.push(r),s=!0)}}if(!s&&Ss(this,_s)[_s].magicPositions)try{let i=new RegExp(Ss(this,_s)[_s].magicPositions).exec(e.className);i&&i.length>1&&""!==i[1]&&t.push(i[1])}catch(e){console.log(e.toString())}e=e.parentNode}return t.reverse().join("_")}function Zs(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ea=0;function ta(e){return"__private_"+ea+++"_"+e}var ia=ta("initTime"),sa=ta("apiClick");class aa extends Ti{constructor(e,t={}){super(e),Object.defineProperty(this,sa,{value:ra}),Object.defineProperty(this,ia,{writable:!0,value:0}),this.supportAsync=!0,Zs(this,ia)[ia]=(new Date).getTime(),this.isAutoEnabled("click")&&this.addHook("click",function(e){e&&e.button;try{var i=new zs(t.slotInspector).analyze(e.srcElement)}catch(e){return void this.k5a.speaker.say(e.toString())}if(!1!==i&&new Ae(i.url).isLink){try{var s=this.k5a.pageData.getDefaultData()}catch(e){console.log(e.toString())}new Ae(s.url);let e=this.k5a.pageData.isTranslated();this.k5a.speaker.say("Page is translated: "+e),s.tu=i.url,s.cr=i.row,s.cp=i.pos,s.po=i.position,s.ps=i.size,s.tptl=e?"":i.title,s.tpsn=i.section,s.tptp=i.type,s.tpig=i.image,s.tpd=i.paid,s.ct=(((new Date).getTime()-Zs(this,ia)[ia])/1e3).toFixed(1),this.k5a.logger.fireNow("click",s,"click","js"),Zs(this,ia)[ia]=(new Date).getTime()}}.bind(this),!0)}apiMethods(){return{click:function(e,t=!0){return Zs(this,sa)[sa](e,t)}.bind(this)}}}function ra(e,t=!0){var i=["url","channel","type","section","title","author","tag","cnttag","paid"],s={tourl:"tu",row:"cr",pos:"ps",position:"po",totitle:"tptl",tosection:"tpsn",totype:"tptp",totag:"tpct",tocnttag:"tpctg",toauthor:"tpar",topaid:"tpd"},a={};if(e=this.keysToLowerCase(e),t){if(this.k5a.pageData.reRead(),void 0!==e.url&&!1===this.k5a.pageData.isUrl(e.url))throw new Error('Url is not valid: "'+e.url+'"');Object.values(i).forEach((t=>{void 0!==e[t]&&""!==e[t]&&this.k5a.pageData.setField(t,e[t])})),a=this.k5a.pageData.getLogData(i),Object.keys(s).forEach((t=>{void 0!==e[t]&&""!==e[t]?a[s[t]]=e[t]:a[s[t]]=""}))}else a={},Object.values(i).forEach((t=>{void 0!==e[t]&&""!==e[t]?(this.k5a.pageData.setField(t,e[t]),a[t]=this.k5a.pageData.getField(t)):this.k5a.pageData.delField(t)})),Object.keys(s).forEach((t=>{void 0!==e[t]&&""!==e[t]?a[s[t]]=e[t]:a[s[t]]=""})),void 0!==a.c&&""!==a.c||(a.c=this.k5a.pageData.getField("channel"));return this.k5a.logger.fireNow("click",a,"jsapi"),!0}function oa(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}aa.moduleName="click";var na=0;function la(e){return"__private_"+na+++"_"+e}var ha=la("logModule"),ca=la("trackElements"),da=la("iObserver"),ua=la("calc"),pa=la("calcVisibilty"),fa=la("calcTimeDifference");class ga{constructor(e){Object.defineProperty(this,fa,{value:ma}),Object.defineProperty(this,pa,{value:ba}),Object.defineProperty(this,ua,{value:va}),Object.defineProperty(this,ha,{writable:!0,value:null}),Object.defineProperty(this,ca,{writable:!0,value:{}}),Object.defineProperty(this,da,{writable:!0,value:null}),oa(this,ha)[ha]=e,oa(this,da)[da]=new IntersectionObserver(oa(this,ua)[ua].bind(this),{root:null,rootMargin:"0px",threshold:0}),oa(this,ha)[ha].addHook("scroll",function(e){oa(this,pa)[pa]()}.bind(this),!0)}stopAll(){for(var e of Object.keys(oa(this,ca)[ca]))for(var t=0;t<oa(this,ca)[ca][e].length;t++)oa(this,ca)[ca][e][t].initTime>0&&(oa(this,ca)[ca][e][t].visibleTime+=oa(this,fa)[fa](oa(this,ca)[ca][e][t].initTime),oa(this,ca)[ca][e][t].initTime=0,oa(this,ca)[ca][e][t].deadTime=(new Date).getTime())}startAll(){for(var e of Object.keys(oa(this,ca)[ca]))for(var t=0;t<oa(this,ca)[ca][e].length;t++)0==oa(this,ca)[ca][e][t].initTime&&(oa(this,ca)[ca][e][t].initTime=(new Date).getTime(),oa(this,ca)[ca][e][t].totalDeadTime+=oa(this,fa)[fa](oa(this,ca)[ca][e][t].deadTime),oa(this,ca)[ca][e][t].deadTime=0)}addTracker(e,t,i){void 0===oa(this,ca)[ca][e]&&(oa(this,ca)[ca][e]=[]);var s={trkId:e+"-"+oa(this,ca)[ca][e].length,elm:t,trkScroll:!(!i||!i.scroll)&&i.scroll,isVisible:!1,visbililty:0,maxVisibility:0,scroll:0,maxScroll:0,initTime:(new Date).getTime(),visibleTime:0,deadTime:0,totalDeadTime:0};oa(this,ca)[ca][e].push(s),t.setAttribute("data-k5a-trackerId",s.trkId),oa(this,da)[da].observe(t)}resetTracker(e,t,i){if(null!==t){if(void 0!==oa(this,ca)[ca][e]){for(var s=0;s<oa(this,ca)[ca][e].length;s++)null!==oa(this,ca)[ca][e][s].elm&&(oa(this,ca)[ca][e][s].elm.removeAttribute("data-k5a-trackerId"),oa(this,da)[da].unobserve(oa(this,ca)[ca][e][s].elm));oa(this,ca)[ca][e]=[]}this.addTracker(e,t,i)}}getData(e){for(var t=[],i=0;i<oa(this,ca)[ca][e].length;i++)(oa(this,ca)[ca][e][i].visibleTime>0||oa(this,ca)[ca][e][i].initTime)&&t.push({trackId:oa(this,ca)[ca][e][i].trkId,visible:oa(this,ca)[ca][e][i].visibleTime+oa(this,fa)[fa](oa(this,ca)[ca][e][i].initTime),maxScroll:oa(this,ca)[ca][e][i].maxScroll,scroll:oa(this,ca)[ca][e][i].scroll,elm:oa(this,ca)[ca][e][i].elm});return t}getAllData(){var e={};for(var t of Object.keys(oa(this,ca)[ca]))for(var i=0;i<oa(this,ca)[ca][t].length;i++)e[t]=this.getData(t);return e}debug(){for(var e of Object.keys(oa(this,ca)[ca]))for(var t=0;t<oa(this,ca)[ca][e].length;t++){var i=oa(this,ca)[ca][e][t];console.log(i.trkId+" "+i.isVisible+" "+i.maxScroll)}}}function va(e){e.forEach((e=>{if(e.target.hasAttribute("data-k5a-trackerId")){var[t,i]=e.target.getAttribute("data-k5a-trackerId").split("-");e.isIntersecting?oa(this,ca)[ca][t][i].isVisible||(oa(this,ca)[ca][t][i].isVisible=!0,oa(this,ca)[ca][t][i].initTime=(new Date).getTime()):oa(this,ca)[ca][t][i].isVisible&&(oa(this,ca)[ca][t][i].isVisible=!1,oa(this,ca)[ca][t][i].visibleTime+=oa(this,fa)[fa](oa(this,ca)[ca][t][i].initTime))}}))}function ba(){var e=window.pageYOffset+window.innerHeight;for(var t of Object.keys(oa(this,ca)[ca]))for(var i=0;i<oa(this,ca)[ca][t].length;i++)if(oa(this,ca)[ca][t][i].trkScroll){var s=0;if("BODY"==oa(this,ca)[ca][t][i].elm.tagName){var a=document.documentElement.scrollTop,r=window.innerHeight,o=document.documentElement.scrollHeight;s=parseInt((a+r)/o*100)}else{var n=e-oa(this,ca)[ca][t][i].elm.offsetTop;s=parseInt(n/oa(this,ca)[ca][t][i].elm.offsetHeight*100)}s<0&&(s=0),s>100&&(s=100),s>oa(this,ca)[ca][t][i].maxScroll&&(oa(this,ca)[ca][t][i].maxScroll=s),oa(this,ca)[ca][t][i].scroll=s}}function ma(e){if(void 0===e||isNaN(e))return 0;var t=(new Date).getTime();return t>e&&t>0&&e>0?parseInt((t-e)/1e3):0}function ya(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var wa=0;function ka(e){return"__private_"+wa+++"_"+e}var Oa=ka("logData"),Pa=ka("state"),ja=ka("elmTracker"),Da=ka("cfg"),Sa=ka("scrollMultiple"),Aa=ka("setupTrackElements"),Ta=ka("getExitType"),_a=ka("finalizeExitData"),Ea=ka("setupLogData"),Ca=ka("runDebug"),xa=ka("addTracker");class Ma extends Ti{constructor(e,t={}){super(e),Object.defineProperty(this,xa,{value:Ua}),Object.defineProperty(this,Ca,{value:Ra}),Object.defineProperty(this,Ea,{value:Fa}),Object.defineProperty(this,_a,{value:Na}),Object.defineProperty(this,Ta,{value:Ia}),Object.defineProperty(this,Aa,{value:La}),Object.defineProperty(this,Oa,{writable:!0,value:null}),Object.defineProperty(this,Pa,{writable:!0,value:"active"}),Object.defineProperty(this,ja,{writable:!0,value:null}),Object.defineProperty(this,Da,{writable:!0,value:{}}),Object.defineProperty(this,Sa,{writable:!0,value:5}),!0===this.isAutoEnabled("engagement")&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&(void 0!==this.k5a.cfg.pageData.article&&"article"==this.k5a.pageData.getField("type")&&(t.elements.page=this.k5a.cfg.pageData.article),ya(this,Da)[Da]=t,void 0===ya(this,Da)[Da].maxTime&&(ya(this,Da)[Da].maxTime=86400),ya(this,Ea)[Ea](),"object"==typeof t.elements&&this.addHook("ready",function(e){ya(this,Aa)[Aa](t.elements),ya(this,Pa)[Pa]="active",ya(this,ja)[ja].startAll()}.bind(this)),this.addHook("activity",function(e){ya(this,Pa)[Pa]="active",ya(this,ja)[ja].startAll()}.bind(this),!0),this.addHook("hidden",function(e){ya(this,ja)[ja].stopAll(),ya(this,Pa)[Pa]="hidden"}.bind(this),!0),this.k5a.cfg.pageData.SPA&&this.addHook("spa",function(e){try{if(e&&e.detail&&null==e.detail.sourceUrl)return;ya(this,_a)[_a](),ya(this,Oa)[Oa].evt>0&&ya(this,Oa)[Oa].evt<ya(this,Da)[Da].maxTime&&(this.k5a.logger.fireNow("exit",ya(this,Oa)[Oa],"spa",ya(this,Ta)[Ta](e)),this.say("exit log request sent, type 'spa' ")),ya(this,ja)[ja].resetTracker("page",this.k5a.pageData.getArticleElement(),{scroll:!0}),ya(this,Ea)[Ea]()}catch(e){console.error("Engagement spa error:"),console.debug(e)}}.bind(this),!0),this.addHook("exit",function(e){ya(this,_a)[_a](),this.k5a.speaker.dump(ya(this,Oa)[Oa]),ya(this,Oa)[Oa].evt>0&&ya(this,Oa)[Oa].evt<=ya(this,Da)[Da].maxTime&&(this.k5a.logger.fireNow("exit",ya(this,Oa)[Oa],"js",ya(this,Ta)[Ta](e)),this.say("exit log request sent, type 'js' "))}.bind(this),!0),this.addHook("pageView",function(e){this.say("Engagemanet pageview recieved"),ya(this,Ea)[Ea]()}.bind(this),!0))}apiMethods(){return{addTracker:function(e,t,i=!1){return ya(this,xa)[xa](e,t,i)}.bind(this)}}}function La(e){for(var t of(ya(this,ja)[ja]=new ga(this),Object.keys(e)))switch(t){case"slots":document.querySelectorAll(e[t]).forEach((e=>{ya(this,ja)[ja].addTracker(t,e,{scroll:!1})}));break;case"page":case"toolbar":var i=document.body;if(""!==e[t]){var s=document.querySelector(e[t]);null!==s&&(i=s)}ya(this,ja)[ja].addTracker(t,i,{scroll:!0})}}function Ia(e){return("click"===this.k5a.listener.getExitType()?"c":"")+"exit"}function Na(){var e=ya(this,ja)[ja].getAllData();for(var t of(ya(this,Oa)[Oa].tids=[],Object.keys(e)))e[t].length>0&&("page"==t?(ya(this,Oa)[Oa].evt=parseInt(e[t][0].visible),ya(this,Oa)[Oa].eeh=e[t][0].scroll,ya(this,Oa)[Oa].ems=e[t][0].maxScroll,ya(this,Oa)[Oa].tids=[]):ya(this,Oa)[Oa].tids.push(t+"|"+e[t][0].visible+"|"+e[t][0].maxScroll+"|"+e[t][0].scroll))}function Fa(){this.say("setupLogData called: "),ya(this,Oa)[Oa]=this.k5a.pageData.getDefaultData(),this.say("logData now:"+JSON.stringify(ya(this,Oa)[Oa]))}function Ra(){if(!0===this.k5a.speaker.debugMode){var e=document.getElementById("engangementDebug");null===e&&((e=document.createElement("DIV")).id="engangementDebug",e.style="background:grey;color:white;padding:5px;position:fixed;top:10px;right:10px;min-width:300px;min-height:20px;font-size:12px;opacity:0.90;",document.body.appendChild(e))}}function Ua(e,t,i=!1){null===ya(this,ja)[ja]&&(ya(this,ja)[ja]=new ga(this)),ya(this,ja)[ja].addTracker(e,t,{scroll:i})}Ma.moduleName="engagement";var qa=new class{constructor(e,t=!1){Object.defineProperty(this,us,{value:gs}),Object.defineProperty(this,ds,{value:fs}),Object.defineProperty(this,cs,{value:ps}),this.cfg={},Object.defineProperty(this,ls,{writable:!0,value:{}}),this.speaker=null,this.logger=null,this.storage=null,this.k5aServer="//l.kilkaya.com/",Object.defineProperty(this,hs,{writable:!0,value:""}),this.element=document,this.pageData=null,this.user=null,this.consent=!0,this.requestId=(new Date).getTime(),this.cfg=e,["installationId","logServer","logscript_commitsha","modules"].forEach((e=>{void 0===this.cfg[e]&&console.error("K5A: missing config option: '"+e+"'")})),void 0===this.cfg.moduleCfg&&(this.cfg.moduleCfg={}),void 0!==this.cfg.logServer&&(this.k5aServer=this.cfg.logServer),this.speaker=new Z(this,t),this.storage=new st(this),this.speaker.checkPersistentDebugMode(),this.logger=new we(this),this.pageData=new vi(this,this.element,this.cfg.pageData||{}),this.listener=new S(this),this.consent=this.pageData.getField("consent"),!1===this.cfg.hasConsent&&(this.consent=!1),this.user=new is(this),this.user.setId(this.pageData.getField("userId")||""),this.active=new zi(this),rs(this,us)[us](),rs(this,cs)[cs](),this.listener.postInitialize()}debugModeOn(){this.speaker.setPersistentDebugMode(!0)}debugModeOff(){this.speaker.setPersistentDebugMode(!1)}devModeOn(){this.speaker.setPersistentDebugMode(!0,!0)}devModeOff(){this.speaker.setPersistentDebugMode(!1)}set debugMode(e=!1){this.speaker.debugMode(e)}set debugUrl(e=!1){this.speaker.debugUrl(e)}disableLog(){this.logger.disable()}enableLog(){this.logger.enable()}resetRequestId(){this.requestId=(new Date).getTime()}}({installationId:"614855c8e16cdd72901684f2",logServer:"https://cl.k5a.io/",logscript_commitsha:"generation2",domains:["ippen-digital.de","24hamburg.de","24rhein.de","az-online.de","bgland24.de","blickpunkt-nienburg.de","buzzfeed.at","buzzfeed.de","bw24.de","chiemgau24.de","come-on.de","da-imnetz.de","dasgelbeblatt.de","deichstube.de","extratipp.com","fehmarn24.de","fnp.de","fr.de","giessener-allgemeine.de","hallo-muenchen.de","hanauer.de","herbstfest-rosenheim.de","hersfelder-zeitung.de","hna.de","hna7.de","innsalzach24.de","ippen.media","kreisbote.de","kreiszeitung.de","krurierverlag.de","lokalo24.de","mangfall24.de","meine-anzeigenzeitung.de","merkur.de","nordbuzz.de","op-online.de","ovb-online.de","rosenheim24.de","sauerlandkurier.de","siegerlandkurier.de","soester-anzeiger.de","streiflichter.com","tz.de","wa.de","wasserburg24.de","webnachrichten.de","werderstube.de","werra-rundschau.de","wetterauer-zeitung.de","wlz-online.de","24auto.de","24garten.de","24royal.de","24vita.de","costanachrichten.com","echo24.de","fuldaerzeitung.de","giessener-anzeiger.de","gmuender-tagespost.de","heidelberg24.de","in-muenchen.de","ingame.de","landtiere.de","leinetal24.de","lokalo24.de","ludwigshafen24.de","mannheim24.de","ruhr24.de","schwaebische-post.de","solinger-tageblatt.de","usinger-anzeiger.de","einfach-tasty.de","rga.de","nextg.tv","24books.de","suedwest24.de","serienjunkies.de","baden24.de","lauterbacher-anzeiger.de","oberhessische-zeitung.de"],modules:[Ps,aa,Ma],storage:{b64:!1},pageData:{qspTracker:{k5a_c:{rules:[/^insta[a-z\_0-9]{2,20}$/i]}},article:["article"],referer:["originalReferrer","utm_referer","utm_referrer","utm_source"],wordCount:{article:{el:{article:1}}},paywall:{auto:!0,element:".paywallTeaser"}},moduleCfg:{pageview:{ping:!0},engagement:{elements:{page:"document",toolbar:"auto"}},click:{slotInspector:{position:{},mains:{},slot:{},title:{el:["h3"]},image:{el:["img"]},positionTemplate:"row${row}_pos${pos}"}}}},-1!==location.href.indexOf("k5aDebug"));window.kilkaya=qa})();
</script>

</body>
</html>
