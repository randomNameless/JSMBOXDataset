<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>common.html</title>
</head>
<body>

<script>
var version = 2020120405;
var js_version = window.v_obj ? window.v_obj.version : version;
var _hmt = _hmt || [];

(function () {
  $.ajaxSetup({
    cache: true
  });
})();

if ($(window).width() <= 768)
  $('html').css('fontSize', $(window).width() / 750 * 100 + 'px');
window.onresize = function () {
  if ($(window).width() <= 768)
    $('html').css('fontSize', $(window).width() / 750 * 100 + 'px');
}

//获取当前页面路径
function getPath() {
  return window.location.pathname;
}

//点击js
function getQueryString(name) {
  if (!name) return window.location.search;
  var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
  var r = window.location.search.substr(1).match(reg);
  if (r != null) return decodeURIComponent(r[2]);
  return null;
}

function getConcatQuery() {
  if (window.location.search) {
    return "?" + window.location.search.slice(1);
  }
  return "";
}

function logo_url() {
  var url = "/" + getQueryString();
  window.open(url, "_self");
  return false;
}

function common_erp_regist() {
  var url = "https://erp-o.hupun.com/login/trial" + getQueryString();

  window.open(url, "_blank");
  _czc.push(["_trackEvent", "erp顶通注册", "点击", "", "", "zhuce"]);
  return false;
}

function free_common_erp_regist(linkUrl,title) {
  var url = linkUrl + getQueryString();
  window.open(url, "_blank");
  _czc.push(["_trackEvent", `${title}免费体验`, "点击", "", "","free_zhuce"]);
  return false;
}



function crm_login() {
  var url = "https://crm.hupun.com/login.d" + getQueryString();
  window.open(url, "_blank");
  return false;
}

function crm_regist() {
  var url = "https://crm.hupun.com/register" + getQueryString();

  window.open(url, "_blank");
  return false;
}

function erp_regist() {
  var url = "https://erp-o.hupun.com/login/trial" + getQueryString();
  // var url = rootPath + "register.html?prd=erp" + getConcatQuery();
  _czc.push(["_trackEvent", `erp的立即体验`, "点击", "", "","zhuce"]);
  window.open(url, "_blank");
  return false;
}
//立即体验
function erp_experience() {
    var url = "https://g.hupun.com/register" + getQueryString();
    // var url = rootPath + "register.html?prd=erp" + getConcatQuery();
    _czc.push(["_trackEvent", `erp页脚免费体验`, "点击", "", "","yjexperience"]);
    window.open(url, "_blank");
    return false;
  }
function erp_regist_experience(type){
    if(type=="erp_experience"){
        erp_experience()
    }else{
        erp_regist()
    }

}

function erpout_regist() {
  var url = window.location.search ?
    "https://erp-o.hupun.com/login/trial?version=501" +
    "&" +
    window.location.search.substring(1) :
    "https://erp-o.hupun.com/login/trial?version=501";

  window.open(url, "_blank");
  return false;
}

function cbterp_regist() {
  var url = "https://account.hupun.com/register" + getQueryString();

  window.open(url, "_blank");
  return false;
}

function wms_login() {
  var url = "https://wms.hupun.com/login.d" + getQueryString();
  window.open(url, "_blank");
  return false;
}

function wms_regist() {
  var url = "//wms.hupun.com/register" + getQueryString();
  // var url = rootPath + "register.html?prd=wms" + getConcatQuery();
  _czc.push(["_trackEvent", `wms头部立即试用`, "点击", "", "","yjexperience"]);
  window.open(url, "_blank");
  return false;
}

function erp_login() {
  var url = "https://erp.hupun.com" + getQueryString();
  window.open(url, "_blank");
  return false;
}

function retail_register() {
  var url = "https://retail.hupun.com/register" + getQueryString();
  _czc.push(["_trackEvent", `解决方案新零售头部立即试用`, "点击", "", "","yjexperience"]);
  window.open(url, "_blank");
  return false;
}

function retail1_login() {
  var url = "https://retail.hupun.com" + getQueryString();
  window.open(url, "_blank");
  return false;
}

function retail_active_reg() {
  var url = "https://retail.hupun.com/static/mregister.html#/" + getQueryString();
  window.open(url, "_blank");
  return false;
}
// 跨境ERP
function crossERP_register() {
  var url = "https://g.hupun.com/register" + getQueryString();
  _czc.push(["_trackEvent", `跨境erp头部免费体验`, "点击", "", "","crossERPexperience"]);
  window.open(url, "_blank");
  return false;
}

function crossERP_login() {
  var url = "https://g.hupun.com" + getQueryString();
  window.open(url, "_blank");
  return false;
}

function crossERP_regist() {
  var url = "https://g.hupun.com/register" + getQueryString();

  window.open(url, "_blank");
  return false;
}

function app_down_ios() {
  var url =
    "https://itunes.apple.com/cn/app/wan-li-niuerp/id989057324?mt=8&tracelog=hupun" +
    getQueryString();
  window.open(url, "_blank");
  _czc.push(["_trackEvent", "appios下载", "点击", "", "", "regist_app6"]);
  return false;
}

function app_down_adr() {
  var url =
    "http://android.hupun.com/apps/resources/uy5pv34/hason.apk" +
    getQueryString();
  window.open(url, "_blank");
  _czc.push(["_trackEvent", "app安卓下载", "点击", "", "", "regist_app7"]);
  return false;
}

function pos_regist() {
  // var url = rootPath + "register.html?prd=pos" + getConcatQuery();
  var url = "https://retail.hupun.com/register" + getConcatQuery();
  _czc.push(["_trackEvent", `产品万里牛零售头部立即试用`, "点击", "", "","yjexperience"]);
  window.open(url, "_blank");
  return false;
}

function pos_login() {
  // var url = rootPath + "register.html?prd=pos" + getConcatQuery();
  var url = "https://retail.hupun.com" + getConcatQuery();
  window.open(url, "_blank");
  return false;
}

function dn_regist() {
  var url = "http://www.361ding.com/register.html" + getConcatQuery();
  window.open(url, "_blank");
  return false;
}

function dn_login() {
  var url = "https://corp.361ding.com/login.d" + getConcatQuery();
  window.open(url, "_blank");
  return false;
}

function newniu_login() {
  var url = "https://seller.361ding.com/login" + getConcatQuery();
  window.open(url, "_blank");
  return false;
}

function newniu_regist() {
  var url = "https://seller.361ding.com/register" + getConcatQuery();
  window.open(url, "_blank");
  return false;
}

function pos_down() {
  var url =
    "https://itunes.apple.com/cn/app/wan-li-niuhd/id1096524653?mt=8&tracelog=hupun" +
    getQueryString();
  window.open(url, "_blank");
  return false;
}


// function retail_login() {
//   var url = "//retail.hupun.com/" + getQueryString();
//   window.open(url, "_blank");
//   return false;
// }

function page_open(path) {
  if (!path) return;
  if (
    (path.indexOf("http://") < 0 && path.indexOf("https://") < 0) ||
    (path.indexOf("www.hupun.com") > 0 && path.indexOf("open-doc") < 0)
  ) {
    if (getQueryString()) {
      window.top.location.href = path + getQueryString();
    } else {
      window.top.location.href = path;
    }
  } else {
    window.open(path + getQueryString(), "_blank");
  }
}

$(document).ready(function () {
  function goTopEx() {
    var obj = document.getElementById("goTopBtn");

    function getScrollTop() {
      return document.documentElement.scrollTop || document.body.scrollTop;

    }

    function setScrollTop(value) {
      document.documentElement.scrollTop = value;
      document.body.scrollTop = value;
    }
    obj.onclick = function () {
      var goTop = setInterval(scrollMove, 10);

      function scrollMove() {
        setScrollTop(getScrollTop() / 1.1);
        if (getScrollTop() < 1) clearInterval(goTop);
      }
    }
  }
  goTopEx();
})

function initCarousel(selector, otherSetting = {
  noBanner: true,
  bannerSelector: "",
  roll: true
}) {
  var $dragBln = false;
  $(selector + " .carousel-items").touchSlider({
    roll: otherSetting.roll,
    flexible: true,
    speed: 200,
    btn_prev: $(selector + " .btn_prev"),
    btn_next: $(selector + " .btn_next"),
    paging: $(selector + " .carousel-controls a"),
    counter: function (e) {
      $(selector + " .carousel-controls a")
        .removeClass("on")
        .eq(e.current - 1)
        .addClass("on");
      if (!otherSetting.noBanner) {
        $(otherSetting.bannerSelector + ' .carousel-banner-item')
          .removeClass("active")
          .eq(e.current - 1)
          .addClass("active");
        $(otherSetting.bannerSelector + ' .carousel-banner-logo')
          .removeClass("active")
          .eq(e.current - 1)
          .addClass("active");
      }
    },
  });
  $(selector + " .carousel-items").bind("mousedown", function () {
    $dragBln = false;
  });

  $(selector + " .carousel-items").bind("dragstart", function () {
    $dragBln = true;
  });

  $(selector + " .carousel-items a").click(function () {
    if ($dragBln) {
      return false;
    }
  });
  if ($(selector).attr('sliderauto') != 1) {
    var timer = setInterval(function () {
      $(selector + " .btn_next").click();
    }, 5000);

    $(selector + " .carousel-items")
      .bind("touchstart", function () {
        clearInterval(timer);
      })
      .bind("touchend", function () {
        timer = setInterval(function () {
          $(selector + " .btn_next").click();
        }, 5000);
      });
  }
}

// 案例
function changeIndex(index, select) {
  $(select + ' .container-summary-every-process-item').eq(index).addClass('active');
  $(select + ' .customer-case-summary-detail').eq(index).addClass('active');

  $(select + ' .container-summary-every-process-item').on('click', function () {
    if ($(this).hasClass('active')) return;
    index = $(this).index();
    $(this).siblings().removeClass('active');
    $(this).addClass('active');
    $(select + ' .customer-case-summary-detail').removeClass('active');
    $(select + ' .customer-case-summary-detail').eq(index).addClass('active');
  });

  $(select + ' .btn_prev').on('click', function () {
    index--;
    if (index < 0) {
      index = $(select + ' .container-summary-every-process-item').length - 1;
    }
    $(select + ' .container-summary-every-process-item').removeClass('active');
    $(select + ' .customer-case-summary-detail').removeClass('active');
    $(select + ' .container-summary-every-process-item').eq(index).addClass('active');
    $(select + ' .customer-case-summary-detail').eq(index).addClass('active');
  })

  $(select + ' .btn_next').on('click', function () {
    index++;
    if (index >= $(select + ' .container-summary-every-process-item').length) {
      index = 0;
    }
    $(select + ' .container-summary-every-process-item').removeClass('active');
    $(select + ' .customer-case-summary-detail').removeClass('active');
    $(select + ' .container-summary-every-process-item').eq(index).addClass('active');
    $(select + ' .customer-case-summary-detail').eq(index).addClass('active');
  })
}

function goToCollectPage(type) {
  var _query = ["prd=" + type];
  if (window.location.search) {
    var _search = window.location.search;
    _search = _search.substring(1, _search.length);
    _query.push(_search);
  }
  window.open(
    "https://wap.hupun.com/survey/collect.html?" + _query.join("&"),
    "_self"
  );
}

(function () {
  var ua = navigator.userAgent;
  var ipad = ua.match(/(iPad).*OS\s([\d_]+)/),
    isIphone = !ipad && ua.match(/(iPhone\sOS)\s([\d_]+)/),
    isAndroid = ua.match(/(Android)\s+([\d.]+)/);
  window.isMobile = isIphone || isAndroid;
})();


(function () {
  // 菜单点击
  $("#wapToggleMenuBtn").click(function () {
    $(".wap.sidebar")
      .sidebar("setting", "mobileTransition", "overlay")
      .sidebar("toggle");
    $(".ui.accordion").accordion();
  });
  var pathname = window.location.pathname;
  if (pathname == "/") {
    pathname = "/";
  }
  var currentModule = pathname.split("/")[1];

  function menusActives() {
    $("#pc-menus li").each(function (index, item) {
      var href = item.getAttribute("_page");
      if (href) {
        if (href.substring(0, 1) !== "/") {
          href = "/" + href;
        }
        if (href == "/" || href == "/index.html") {
          href = "/";
        }
        if (href == '//cwh.hupun.com') {
          href = '/cwh.hupun'
        }
        var itemModule = href.split("/")[1];
        if (itemModule !== 'cwh.hupun' && currentModule == itemModule) {
          $(item).addClass("active");
          $(item).parent().parent().addClass("active");
        }
      }
    });
  }

  // 菜单下拉显示
  menusActives();
  $("#pc-menus >li").on('mouseover', function () {
    // $("#pc-menus >li").removeClass('active');
    menusActives();
    $(this).addClass('active');
  });
  $("#pc-menus >li").on('mouseleave', function () {
    $("#pc-menus >li").removeClass('active');
    menusActives();
  });

  $("#pc-menus a").on('click', function () {
    if ($(this).children('p').eq(0).text() === '服务保障') {
      localStorage.setItem('tabLoaded', 'course')
    } else if ($(this).children('p').eq(0).text() === '视频教程') {
      localStorage.setItem('tabLoaded', 'videos')
    } else {
      localStorage.removeItem('tabLoaded')
    }
  })

  // 底部切换公众号
  $(".downdetail-item-links-item").eq(4).addClass("active");
  $('.title.checklink').on("mouseover", function () {
    if ($(this).parent().hasClass('active')) return;
    $(".downdetail-item-links-item").removeClass("active");
    $(this).parent().addClass('active');
  })

  // 右侧导航
  $('.right-helpdesk-new.outer-helpdesk .d3-item').on('mouseover', function () {
    if ($(this).hasClass('active')) return;
    $(this).addClass('active');  
  })
  $('.right-helpdesk-new.outer-helpdesk .d3-item').on('mouseleave', function () {
    $(".right-helpdesk-new.outer-helpdesk .d3-item").removeClass("active");
  })

  $('.right-helpdesk-new.outer-helpdesk .now-use').on('mouseover',function(){
    if ($(this).hasClass('active')) return;
      $(this).addClass('active');
    })
    var timmer
    function loopShowRight(){
      timmer = setTimeout(function(){
        if ($('.right-helpdesk-new.outer-helpdesk .now-use').hasClass('active')) return;
        $('.right-helpdesk-new.outer-helpdesk .now-use').addClass('active');
      },8000)
    }
    loopShowRight()
  $('.right-helpdesk-new.outer-helpdesk .now-use .experience-close').on('click',function(event){
    event.stopPropagation();
    $('.right-helpdesk-new.outer-helpdesk .now-use').removeClass('active');
    clearTimeout(timmer)//保证
    loopShowRight()
  }) 
})();

function GetRequest() {
  var url = location.search; //获取url中"?"符后的字串
  var theRequest = new Object();
  if (url.indexOf("?") != -1) {
    var str = url.substr(1);
    strs = str.split("&");
    for (var i = 0; i < strs.length; i++) {
      theRequest[strs[i].split("=")[0]] = decodeURI(strs[i].split("=")[1]);
    }
  }
  return theRequest;
}

$(document).ready(function () {
  // 跳转
  $(".outer-script-link").click(function () {
    var _page = $(this).attr("_page");
    if (_page) window.open(_page, '_blank');
    return false;
  });
  // 跳转
  $(".menu-script-link").click(function () {
    var _page = $(this).attr("_page");
    if (_page) page_open(_page);
    return false;
  });
  // 错误页面
  $('.error-back').click(function () {
    window.history.go(-1);
    return false;
  });
  AOS.init({
    easing: 'ease-in-sine',
    aosAnchorPlacement: 'top',
  });

  $('img').lazyload();
});
$(window).on('load', function () {
  AOS.refresh();
});
</script>

</body>
</html>
