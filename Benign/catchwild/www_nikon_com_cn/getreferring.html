<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>getreferring.html</title>
</head>
<body>

<script>
/* mod iv 20190529 追加跟踪代码campaign */
function getreferring(){

	var u = navigator.userAgent;
	//判断是否是移动设备打开。browser代码在下面
    var ua = navigator.userAgent.toLowerCase();//获取判断用的对象
    var campaign = "";
	if (!!u.match(/AppleWebKit.*Mobile.*/)) {
	    if (ua.match(/MicroMessenger/i) == "micromessenger") {
            //在微信中打开
            campaign="mobile:Weixin:";
	    }
	    else if (ua.match(/WeiBo/i) == "weibo") {
            //在新浪微博客户端打开
        	campaign="mobile:Weibo:";
	    }
	    else if (ua.match(/QQ\//i) == "qq/") {
	        //在QQ空间打开
            campaign="mobile:QQ:";
	    } 
	    else if (ua.match(/Android/i) == "android") {
	    	campaign="android:Browser:";
	    }
	    else if (ua.match(/iPhone/i) == "iphone") {
	    	campaign="iphone:Browser:";
	    }
	    else if (ua.match(/iPad/i) == "ipad") {
	    	campaign="ipad:Browser:";
	    }
	    else {
	    	campaign="";
	    }
	} else {
		if (ua.match(/MicroMessenger/i) == "micromessenger") {
            //在微信中打开
            campaign="pc:Weixin:";
	    }
		else if (ua.match(/Windows/i) == "windows") {
            campaign="windows:Browser:";
	    } 
	    else if (ua.match(/Macintosh/i) == "macintosh") {
            campaign="macintosh:Browser:";
	    }
	    else if (ua.match(/X11/i) == "x11") {
            campaign="Unix:Browser:";
	    }
	    else {
	    	campaign="";
	    }
	}

	return campaign;
}
</script>

</body>
</html>
