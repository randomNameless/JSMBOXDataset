<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>20min_durable.html</title>
</head>
<body>

<script>
/* TOTM v: 2.5.20; contact: anej */
(()=>{var e={896:()=>{!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e}()},137:()=>{!function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var s=(new Date).getTime(),n=Math.max(0,16-(s-e)),a=window.setTimeout((function(){t(s+n)}),n);return e=s+n,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},429:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var s=i(81),n=i.n(s),a=i(645),o=i.n(a),d=i(667),r=i.n(d),l=new URL(i(453),i.b),h=o()(n()),c=r()(l);h.push([e.id,".bannerDimensionChanged{margin:auto}.fadeClose{transition:height 500ms,transform 500ms}button.as-oil__btn-optin,.as-oil__btn-blue,.as-oil-cpc__switch input:checked~.as-oil-cpc__slider{background-color:#063c88 !important}.as-oil-cpc__status{color:#063c88 !important}.as-oil-cpc__switch input:checked~.as-oil-cpc__slider:before{background-color:#fff !important}@media(max-width: 600px){.as-oil .as-oil-content-overlay{padding:1rem 1rem 3rem 1rem !important}}.bbwAd{min-height:0px;transition:min-height 400ms,height 500ms,width 500ms;position:relative;margin:auto}.bbwAd iframe{transition:height 400ms,height 500ms,width 500ms}.bbwAd .bbw_endscreen{position:absolute;top:0px;left:0px;width:100%;height:100%;background:rgba(255,255,255,.8);pointer-events:none}.bbwAd .bbw_endscreen .bbw_cta{color:#000;border:1px solid #000;padding:5px;border-radius:3px;background:#fff;position:absolute;top:75%;left:50%;transform:translate(-50%, -75%)}.bbwAd .bbw_endscreen .bbw_replay{color:#000;position:absolute;top:25%;left:50%;transform:translate(-50%, -25%);background-image:url("+c+");width:70px;height:70px;pointer-events:all;cursor:pointer}@media screen and (min-width: 1144px){.bbwAd{max-width:55%}}.ad-loaded{text-align:center}.ad-loaded>div{flex:1 1 auto}#default__outside-right{text-align:left}",""]);const p=h},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,n,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(s)for(var d=0;d<this.length;d++){var r=this[d][0];null!=r&&(o[r]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);s&&o[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),t.push(h))}},t}},667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{"use strict";e.exports=function(e){return e[1]}},996:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(e,t){return!1!==t.clone&&t.isMergeableObject(e)?d((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function n(e,t,i){return e.concat(t).map((function(e){return s(e,i)}))}function a(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function d(e,i,r){(r=r||{}).arrayMerge=r.arrayMerge||n,r.isMergeableObject=r.isMergeableObject||t,r.cloneUnlessOtherwiseSpecified=s;var l=Array.isArray(i);return l===Array.isArray(e)?l?r.arrayMerge(e,i,r):function(e,t,i){var n={};return i.isMergeableObject(e)&&a(e).forEach((function(t){n[t]=s(e[t],i)})),a(t).forEach((function(a){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,a)||(o(e,a)&&i.isMergeableObject(t[a])?n[a]=function(e,t){if(!t.customMerge)return d;var i=t.customMerge(e);return"function"==typeof i?i:d}(a,i)(e[a],t[a],i):n[a]=s(t[a],i))})),n}(e,i,r):s(i,r)}d.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,i){return d(e,i,t)}),{})};var r=d;e.exports=r},379:e=>{"use strict";var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var a={},o=[],d=0;d<e.length;d++){var r=e[d],l=s.base?r[0]+s.base:r[0],h=a[l]||0,c="".concat(l," ").concat(h);a[l]=h+1;var p=i(c),g={css:r[1],media:r[2],sourceMap:r[3],supports:r[4],layer:r[5]};if(-1!==p)t[p].references++,t[p].updater(g);else{var u=n(g,s);s.byIndex=d,t.splice(d,0,{identifier:c,updater:u,references:1})}o.push(c)}return o}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var a=s(e=e||[],n=n||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var d=i(a[o]);t[d].references--}for(var r=s(e,n),l=0;l<a.length;l++){var h=i(a[l]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}a=r}}},569:e=>{"use strict";var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var a=i.sourceMap;a&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},453:e=>{"use strict";e.exports="data:image/svg+xml,%3Csvg viewBox=%270 0 512 512%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath d=%27m437.089844 74.980469c-48.308594-48.351563-112.539063-74.980469-180.855469-74.980469-61.578125 0-120.164063 21.808594-166.527344 61.699219l-49.601562-48.738281-9.9375 168.507812 171.300781-12.667969-48.609375-45.027343c29.421875-23.101563 65.570313-35.667969 103.375-35.667969 92.492187 0 167.742187 75.316406 167.742187 167.894531s-75.25 167.898438-167.742187 167.898438c-42.464844 0-82.976563-15.917969-114.078125-44.816407-30.933594-28.75-49.796875-67.6875-53.109375-109.644531l-1.09375-13.816406h-87.953125l.949219 15.894531c8.066406 134.851563 120.199219 240.484375 255.285156 240.484375 68.316406 0 132.546875-26.628906 180.855469-74.980469 48.304687-48.351562 74.910156-112.640625 74.910156-181.019531s-26.605469-132.667969-74.910156-181.019531zm0 0%27/%3E%3C/svg%3E"}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={id:s,exports:{}};return e[s](a,a.exports,i),a.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.b=document.baseURI||self.location.href,i.nc=void 0,(()=>{"use strict";class e{constructor(){this.resolve=null,this.reject=null,this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),this.promise.then((()=>{this.status="resolved"}),(()=>{this.status="rejected"})).catch((()=>{this.status="rejected"}))}}function t(){let e,t;return void 0!==window.innerWidth?(e=window.innerWidth,t=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),{viewportWidth:e,viewportHeight:t}}function s(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[#?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}let n;class a{constructor(){if(n)return n;this.moduleAvailableQueue=[],n=this}setModules(e){n.adLoader=e.adLoader,n.targeter=e.targeter,n.loadingQueue=e.loadingQueue,n.adRefresher=e.adRefresher,n.vastUrlGenertor=e.vastUrlGenertor,n.CMP=e.CMP,n.registeredAdUnits=e.registeredAdUnits,this.modulesReady()}onModuleAvailable(e,t){n[e]?t(n[e]):this.moduleAvailableQueue[e]?this.moduleAvailableQueue[e].push(t):this.moduleAvailableQueue[e]=[t]}modulesReady(){for(let e in this.moduleAvailableQueue)if(this.moduleAvailableQueue.hasOwnProperty(e)&&n[e]){for(let t=0;t<this.moduleAvailableQueue[e].length;t++)"function"==typeof this.moduleAvailableQueue[e][t]&&(this.moduleAvailableQueue[e][t].call(this,n[e]),this.moduleAvailableQueue[e][t]=void 0);this.moduleAvailableQueue[e]=this.moduleAvailableQueue[e].filter((e=>void 0!==e))}}getTargeterByName(e){for(let t=0;t<this.targeter.thirdPartyTargeter.length;t++)if(this.targeter.thirdPartyTargeter[t].name===e)return this.targeter.thirdPartyTargeter[t]}getAdUnitByContainer(e){for(let t of this.registeredAdUnits)if(e===t.data.targetContainerId||e===t.container)return t}getAdUnitByName(e){let t=[];for(let i of this.registeredAdUnits)e===i.adUnitName&&t.push(i);return t}getElemData(e){let t={};if(e.isDestroyed())return;let i=this.getElemPos(e.domElement),s=this.getElemPos(e.domElement.parentNode);return t.position={left:i.left,top:i.top,parentLeft:s.left,parentTop:s.top},t.slot=this.getSlotInfos(e),t}getElemPos(e){let t=e,i=0,s=0;for(;t;)i+=t.offsetLeft,s+=t.offsetTop,t=t.offsetParent;return{left:i,top:s}}getSlotInfos(e){return{tatmContainerId:e.domElement.id,parentContainerId:e.parentDomElement.id,width:e.domElement.offsetWidth,height:e.domElement.offsetHeight,containerHeight:e.containerSize.height,containerWidth:e.containerSize.width,adUnitPath:e.adUnitPath,pageName:e.config.pageName}}appendStyleToHead(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=document.getElementById(t);if(i)return i.textContent="",i.appendChild(document.createTextNode(e)),i;{let i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");return s.type="text/css",s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e)),s.setAttribute("id",t),i.appendChild(s),s}}loadScript(e,t,i){var s=document.createElement("script");return s.src=e,document.head.appendChild(s),"function"==typeof t&&(s.onload=t),"function"==typeof i&&(s.onerror=i),s}loadStyle(e,t,i){var s=document.createElement("link");return s.rel="stylesheet",s.type="text/css",s.href=e,s.media="all",document.head.appendChild(s),"function"==typeof t&&(s.onload=t),"function"==typeof i&&(s.onerror=i),s}modifyElem(e){if(e.length)for(let t=0;t<e.length;t++){let i=e[t];if(i.elem){let e=document.querySelectorAll(i.elem);for(let t=0;t<e.length;t++)"add"===i.action?e[t].getAttribute(i.attribute)?e[t].setAttribute(i.attribute,e[t].getAttribute(i.attribute)+" "+i.value):e[t].setAttribute(i.attribute,i.value):"remove"===i.action&&e[t].getAttribute(i.attribute)&&e[t].removeAttribute(i.attribute)}}}addEvent(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e[t]=i}removeEvent(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}findCorrectAdIframe(e){var t;let i=null===(t=e.domElement)||void 0===t?void 0:t.getElementsByTagName("iframe");if(i&&i.length>0)for(let e=0;e<i.length;e++)if("none"!==i[e].style.display)return i[e]}spyOnVariableChange(e,t,i,s){let n=e[t];Object.defineProperty(e,t,{get:function(){return s?s():n},set:function(e){n=e,"function"==typeof i&&i(e)}})}setCache(e,t,i){(!i||i>24)&&(i=24);let s=(new Date).getTime()+1e3*i*60*60,n=Object.assign({},t);if(window.sessionStorage)try{n.timestamp=s,window.sessionStorage.setItem(e,JSON.stringify(n))}catch(e){}}getCache(e){let t;if(window.sessionStorage)try{t=JSON.parse(window.sessionStorage.getItem(e)),t.timestamp&&(t.timestamp<(new Date).getTime()&&(t=null,sessionStorage.removeItem(e)),t.timestamp=void 0)}catch(e){}return t}addClickHandler(e,t){let i=document.querySelector(e);i&&this.addEvent(i,"click",(e=>{e.target===i&&(e.preventDefault(),t())}))}removeDomNode(e){e&&("function"==typeof e.remove?e.remove():e.parentElement.removeChild(e))}tabIsActive(){var e,t={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in t)if(e in document)break;return!document[e]}deleteCookie(e,t,i){document.cookie=e+"=; Path="+(t||"/")+"; expires=Thu, 01 Jan 1970 00:00:01 GMT;"+(i?"; domain="+i:"")}getCookie(e){var t=("; "+document.cookie).split("; "+e+"=");if(2==t.length)return t.pop().split(";").shift()}debounce(e,t){let i;return function(){const s=this,n=arguments;clearTimeout(i),i=setTimeout((()=>e.apply(s,n)),t)}}throttle(e,t){let i,s;return function(){const n=this,a=arguments;s?(clearTimeout(i),i=setTimeout((function(){Date.now()-s>=t&&(e.apply(n,a),s=Date.now())}),t-(Date.now()-s))):(e.apply(n,a),s=Date.now())}}createDomNodeFromHTML(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes}loadJSON(e,t){let i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="json",i.withCredentials=!0,i.onload=function(){let e=i.status;t(200===e?null:e,i.response)},i.send()}scriptSrcIsWhiteListed(e){if(this.adLoader.config.whiteListedScripts)for(let t=0;t<this.adLoader.config.whiteListedScripts.length;t++)if(e&&0===e.indexOf(this.adLoader.config.whiteListedScripts[t]))return!0;return!1}sanitizeHTML(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}fixParentsOverflows(e){let t=["auto","hidden","overlay","scroll"],i=e;for(;i;){let e=getComputedStyle(i).overflow;t.includes(e)&&(i.style.overflow="unset");let s=getComputedStyle(i).overflowX;t.includes(s)&&(i.style.overflowX="unset"),i=i.parentElement}}}const o={addToObject(e,t,i,s){if(!e)return;let n=this.getPlaceToStore(e,t);return n&&(n[i]=s),e},concatArray(e,t,i,s){if(!e)return;let n=this.getPlaceToStore(e,t);return n&&(Array.isArray(n[i])?n[i]=n[i].concat(s):Array.isArray(s)?n[i]=s:n[i]=[s]),e},getPlaceToStore(e,t){if(!e)return;let i=e;if(t&&t.length>0)for(let e=0;e<t.length;e++)i[t[e]]||(i[t[e]]={}),i=i[t[e]];return i},getCookieValue(e){var t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""},removeSize:(e,t)=>t.filter((t=>!t||2!==e.length||2!==t.length||!(t[0]==e[0]&&t[1]==e[1]))),addSize:(e,t)=>(t.some((t=>JSON.stringify(t)===JSON.stringify(e)))||t.push(e),t),appendToFunction(e,t){let i=e;return()=>{"function"==typeof i&&i.call(),t()}}},d={usePrebid:!0,prebidJS:"https://tdn.da-services.ch/libs/prebid8.51.0.js",pbDisabledChannels:[],adUnitIdPrefix:"tatm-",lazyLoading:!0,lazyloadingOffset:-800,adHeader:!1,logEntriesPath:"//tdn.da-services.ch/libs/le.min.js",brandDayGroup:["outside-right","inside-full-top","inside-half","inside-full-pos1","inside-quarter-pos1","overlay","paid-inside-*"],alwaysLoadableAdunit:["outside-right","outside-left","inside-full-top","overlay","inside-full-brandday"],dfp:{networkid:"46753895",safeFrameConfig:{allowOverlayExpansion:!0,allowPushExpansion:!0,sandbox:!0},adPrefetching:!0,lazyLoading:{fetchMarginPercent:-1,renderMarginPercent:30,mobileScaling:-1}},appnexus:{member_id:3741,needsConsent:!1},prebid:{callDisplay:!0,callNative:!0,callVideo:!0,analyticsProvider:[],additionalSetups:[],defineAliasBidders:[{adapterName:"appnexus",newAlias:"bluebillywig",options:{gvlid:580}}],adjustMediaTypes:(e,t,i)=>{if(t&&t.targeting&&t.targeting.duration)switch(t.targeting.duration){case"XS":case"S":e.video.maxduration=10;break;case"M":case"L":e.video.maxduration=25;break;case"XL":e.video.maxduration=35;break;default:e.video.maxduration=60}return e},mediaSettings:{video:{context:"instream",playerSize:[640,480]}},videoPlacementSettings:{video:{context:"pre_roll",skippable:!1,playback_method:"click_to_play",frameworks:[1,2,6]}},bidCaching:{enabled:!0,banner:!0,nativeFillUp:1,maxNativeCacheCount:3,maxDisplayCacheCount:3},defaultConfig:{native:!0,banner:!0,ros:!0,channel:!0}},adUnitOptions:{prestitial:{},"overlay-whatsapp":{onlyWidthMatters:!0},"inside-full-top":{},"inside-full":{},"inside-pos":{},"inside-full-brandday":{checkContainerWidth:!0},"inside-half":{},gallery:{checkContainerWidth:!0},"inside-quarter":{},"outside-right-pos":{},"outside-right":{percentageViewable:50,sticky:{enabled:!0,top:0}},"outside-left":{percentageViewable:100,offset:300,lazyLoading:!1,sticky:{enabled:!0,top:0}},"content-ad":{},overlay:{lazyLoading:!1,fastPath:!0},"outside-anchor-bottom":{lazyLoading:!1,fastPath:!1,maxPercentageViewPortHeight:10},video:{lazyLoading:!1,prebid:!1,disableIAS:!0}},queueWaitingTime:300,version:"2.5.20",externalScript:[],adRule:0,loadHiddenAds:!0,logging:!0,loggingProbability:parseFloat("0.97"),beagleUrl:"",beagleUrlIframe:"https://beagle.prod.tda.link/scripts/minimal/beagle.min.js",krxConsent:!0,CMP:class{constructor(t){this.config=t,this.readyPromise=new e,this.ready=this.readyPromise.promise,this.consent=!0,this.fallback=!0,this.consentType="base",this.consentStart=(new Date).getTime(),this.ready.then((e=>{this.logger.info({message:"consent ready",result:JSON.stringify(e)})})),this.utils=new a,this.logger=new p("CMP","brown"),this.init()}init(){this.getConsent()}getConsent(){this.consentReadyTS=(new Date).getTime(),this.readyPromise.resolve(!0)}isReady(){return"resolved"===this.readyPromise.status}onReady(e){let t=this;this.isReady()?"function"==typeof e&&e.call(null,this.consent,this.fallback):this.ready.then((function(){"function"==typeof e&&e.call(null,t.consent,t.fallback)}))}},oilSettings:{publicPath:"https://tdn.da-services.ch/libs/oil/1.2.5/",publicPathLang:"https://tdn.da-services.ch/libs/oil/lang/",gdpr_applies_globally:!1,advanced_settings:!1,default_to_optin:!0,advanced_settings_purposes_default:!0,locale_url:"https://tdn.da-services.ch/libs/oil/lang/lang_de.json",poi_activate_poi:!1,poi_hub_origin:"//tdn.da-services.ch",poi_hub_path:"/libs/oil/1.2.5/hub.html",poi_group_name:"TamediaAG",poi_subscriber_set_cookie:!0,iabVendorListUrl:"https://tdn.da-services.ch/libs/oil/lang/myVendorlist.json"},configUtils:o,headerBiddingBranddaySizes:[[1500,600]],iasNetworkId:930546,iasDisabledAdunits:/paid-/gi,whiteListedScripts:["https://d1rkf0bq85yx06.cloudfront.net","https://tdn.da-services.ch","https://d3ni1l3ellexqg.cloudfront.net"],teadsFloor:8,video:{useGBProxy:!1},getNaviHeight:()=>0,grapeShotBlockedChannels:[],specialAdunits:[]};let r,l=!1,h=!1,c=performance.timeOrigin;class p{constructor(e,t,i){this.source=e,this.utils=new a,i?(this.config=i,r=i):r&&(this.config=r),this.color="color:"+t+";font-weight:bold;",this.debug=s("totmdebug")||window.totmdbg,window.totmdbg=this.debug,l=i?i.logging:l,this.loggingActive=h||l&&Math.random()>=(i&&void 0!==i.loggingProbability?i.loggingProbability:1),this.loggingActive&&(h=!0)}error(e){e.type="error",this.createLogEntry(e)}warn(e){e.type="warning",this.createLogEntry(e)}info(e){e.type="info",this.createLogEntry(e)}log(e){e.type="log",this.createLogEntry(e)}createLogEntry(e){let t="%c======> "+this.source;if(window.performance){let e=(new Date).getTime();t+=" ("+Math.round(e-c)+"ms)"}let i,s=t+"\n%c";for(let t in e)"type"!==t&&(s+=t+": "+e[t]+"\n");switch(e.type){case"info":i="color:black;background-color:white;";break;case"error":i="color:black;background-color:red";break;case"warning":i="color:black;background-color:yellow";case"log":this.loggingActive&&this.sendToLogger(e)}"true"!==this.debug&&"1"!==this.debug&&1!==this.debug&&!0!==this.debug&&-1===this.source.indexOf(this.debug)&&"error"!==e.type||console.log(s,this.color,i)}sendToLogger(e){let t=document.location.href;if(e.source=this.source,e.url=document.location.href,e.referrer=document.referrer,e.version=d.version,d.pageName&&(e.page=d.pageName),d.pagePath&&(e.path=d.pagePath),e.host=document.location.host,e.mobilePage=-1!==t.indexOf("//m.")||-1!==t.indexOf("//mobile2."),this.config&&this.config.additionalLogging)for(let t in this.config.additionalLogging)e[t]=this.config.additionalLogging[t];e.tabActive=this.utils.tabIsActive(),e.dnt="1"===navigator.doNotTrack||"1"===window.doNotTrack,this.send(e)}setLoggingStart(e){c=Math.round(e)}send(e){if("function"==typeof window.btoa){var t=new XMLHttpRequest;t.open("POST","//l.da-services.ch",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e="data="+window.btoa(JSON.stringify(e)),t.send(e)}}}i(137),i(896);let g={};!function(e){let t={},i={},s=-1;e.subscribe=(e,n,a)=>{t[e]||(t[e]=[]);let o=(++s).toString();if(t[e].push({token:o,func:n}),a&&i[e])for(let t=0;t<i[e].length;t++)n(e,i[e][t]);return o},e.publish=(e,s,n)=>{if(i[e]=i[e]?i[e]:[],i[e].push(s),!t[e])return!1;let a=()=>{let i=t[e],n=i?i.length:0;for(;n--;)i[n].func(e,s)};return n?a():setTimeout((function(){a()}),0),!0},e.unsubscribe=e=>{for(let i in t)if(t[i])for(let s=0,n=t[i].length;s<n;s++)if(t[i][s].token===e)return t[i].splice(s,1),e;return!1},e.reset=()=>{i={}}}(g);const u=g;let f,m,b;class y{constructor(e){if(f)return f.add(e),f;this.utils=new a,this.defaultConfig={top:0},this.stickyElements=[],this.subscribeToEvents(),this.initChecker(),this.calcScrollPos(),this.add(e),f=this}subscribeToEvents(){this.tokens=[],this.tokens.push(u.subscribe("adunit.destroy",((e,t)=>{t&&this.removeScrollHandling(t)})))}unsubscribeFromEvents(){for(let e=0;e<this.tokens.length;e++)u.unsubscribe(this.tokens[e])}initChecker(){this.utils.addEvent(window,"scroll",(()=>{this.calcScrollPos(),this.checkElems()}))}calcScrollPos(){let e=document.documentElement;this.pos={left:(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),top:(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}}checkElems(){for(let e of this.stickyElements)e.stickyConf.easySticky||this.checkStickyPos(e)}add(e){let t=!1;for(let i=0;i<this.stickyElements.length;i++)this.stickyElements[i].container===e.container&&(this.stickyElements[i]=e,t=!0);t||this.stickyElements.push(e),e.stickyConf=e.adUnitConf.options.sticky||this.defaultConfig,e.stickyConf.easySticky?this.applyEasyStickyness(e):setTimeout((()=>{this.normalizeTopPos(e),this.checkStickyPos(e)}),1),"function"==typeof e.stickyConf.cb&&e.stickyConf.cb.call(this,e,!0)}normalizeTopPos(e){let t=this.utils.getElemPos(e.domElement).top;t>0&&(e.parentDomElement.style.top=0),void 0!==e.stickyConf.initialOffset&&(0!==this.utils.getElemPos(e.domElement).top?t=0:t+=e.stickyConf.initialOffset),e.initialTop=void 0!==e.initialTop?e.initialTop:t,this.resetSticky(e)}getStickyValue(e){let t=0;if("number"==typeof e)t=e;else if("string"==typeof e){let i=document.querySelectorAll(e);if(i&&i.length>0){i=i[i.length-1];let e=i.getBoundingClientRect();t=e.top+e.height}}return t}checkStickyPos(e){window.requestAnimationFrame((()=>{if(e&&e.stickyConf&&e.isSticky&&e.domElement){let t=e.domElement.getBoundingClientRect(),i=this.getStickyValue(e.stickyConf.start);t.top<i?e.inStickyState?this.resetSticky(e):this.setSticky(e):this.pos.top<=e.initialTop&&e.inStickyState&&this.resetSticky(e),window.dispatchEvent(new CustomEvent("totmResize"))}}))}setSticky(e){e.inStickyState=!0,e.domElement.style.position="fixed",e.adHeader?(e.adHeader.style.position="fixed",e.adHeader.style.top=this.getStickyValue(e.stickyConf.top)+"px",e.domElement.style.top=this.getStickyValue(e.stickyConf.top)+e.adHeader.offsetHeight+"px"):e.domElement.style.top=this.getStickyValue(e.stickyConf.top)+"px"}resetSticky(e){e.inStickyState=!1,e.domElement&&(e.domElement.style.position="absolute",e.domElement.style.top=e.initialTop+"px"),e.adHeader&&(e.adHeader.style.position="",e.adHeader.style.top="")}setStickyOffset(e,t){if(e.initialTop=t,e.stickyConf.easySticky){let i=this.getEasyStickyElem(e);i&&(i.style.top=t+"px")}else"function"==typeof e.stickyConf.offsetHelper?e.stickyConf.offsetHelper.call(this,e,t):(e.domElement.className+=" dne",this.resetSticky(e,!0),this.checkStickyPos(e,!0))}setStickyToElement(e,t){let i=t.getBoundingClientRect().top+(window.pageYOffset||document.scrollTop||0)-(document.clientTop||0);this.setStickyOffset(e,i)}updateParams(e,t){t.initialStyle&&(e.domElement.style=t.initialStyle),t.disableSticky&&this.removeScrollHandling(e)}removeScrollHandling(e){let t;for(let i=0;i<this.stickyElements.length;i++)t=this.stickyElements[i],e.adUnitName===t.adUnitName&&(e.stickyConf.easySticky?this.removeEasyStickyness(e):"function"==typeof e.stickyConf.stickyHelper?e.stickyConf.stickyHelper.call(this,e,!1):(e.parentDomElement&&e.domElement&&(e.parentDomElement.style.position="absolute",e.domElement.removeAttribute("style")),this.resetSticky(e,!0)),"function"==typeof e.stickyConf.cb&&e.stickyConf.cb.call(this,e,!1),this.stickyElements.splice(i,1))}applyEasyStickyness(e){let t=this.getEasyStickyElem(e);t&&-1===t.className.indexOf("ad-position-sticky")&&(t.className+=" ad-position-sticky")}removeEasyStickyness(e){let t=this.getEasyStickyElem(e);t&&(t.className=t.className.replace("ad-position-sticky",""))}getEasyStickyElem(e){return"%%PARENT%%"===e.stickyConf.easySticky.stickyElem?e.parentDomElement:"%%CONTAINER%%"===e.stickyConf.easySticky.stickyElem?e.domElement:document.querySelector(e.stickyConf.easySticky.stickyElem)}reset(){for(let e=0;e<this.stickyElements.length;e++)this.removeScrollHandling(this.stickyElements[e]);this.unsubscribeFromEvents()}}class v{constructor(e,t){if(this.adUnit=e,this.utils=new a,this.logger=new p("IframeStretcher","pink"),!this.adUnit.iframe)return this.logger.info({message:"no iframe found"}),void(t&&t("rejected"));this.initHeight=parseInt(this.adUnit.iframe.height),this.initWidth=parseInt(this.adUnit.iframe.width),this.adUnit.iframe.parentNode.style.width="",this.adUnit.iframe.parentNode.style.height="","function"==typeof this.adUnit.config.stretchHelper&&this.adUnit.config.stretchHelper(),this.stretchIframe(),this.strechFnc=this.utils.throttle(this.stretchIframe.bind(this),200),this.utils.addEvent(window,"resize",this.strechFnc),this.utils.addEvent(window,"scroll",this.strechFnc),this.utils.addEvent(window,"totmResize",this.strechFnc),this.logger.info({message:"iframe stretched",adUnit:this.adUnit.adUnitName}),t&&t("ok");for(let e=0;e<10;e++)window.dispatchEvent(new CustomEvent("totmResize"))}getWidth(){return document.documentElement.offsetWidth||window.innerWidth}getHeight(){return window.innerHeight}stretchIframe(){window.requestAnimationFrame((()=>{var e=this.getWidth(),t=this.getHeight(),i=this.adUnit.iframe.getBoundingClientRect();this.initHeight||this.initWidth||(this.initHeight=i.height,this.initWidth=i.width);var s=e-i.left,n=t-i.top;s=s<this.initWidth?this.initWidth:s,n=n<this.initHeight?this.initHeight:n,this.adUnit.iframe.style.height=n+"px",this.adUnit.iframe.style.width=s+"px",this.adUnit.iframe.height=n+"px",this.adUnit.iframe.width=s+"px"}))}setInitialSize(e,t){e&&(this.initWidth=e),t&&(this.initHeight=t),this.stretchIframe()}reset(){this.adUnit.iframe.height=this.initHeight,this.adUnit.iframe.width=this.initWidth,this.adUnit.iframe.style.height=this.initHeight+"px",this.adUnit.iframe.style.width=this.initWidth+"px",this.utils.removeEvent(window,"resize",this.strechFnc),this.utils.removeEvent(window,"scroll",this.strechFnc),this.utils.removeEvent(window,"totmResize",this.strechFnc),this.logger.log({message:"iframe set to original size",adUnit:this.adUnit.adUnitName})}}class U{constructor(e,t){if(m)return m.add({adUnit:e,callback:t}),m.calcPositions(),m;this.utils=new a,this.subscriber=[],this.add({adUnit:e,callback:t}),this.initScrollHandler(),this.calcPositions(),this.subscribeToEvents(),m=this}subscribeToEvents(){this.tokens=[],this.tokens.push(u.subscribe("adunit.destroy",((e,t)=>{this.remove(t)})))}unsubscribeFromEvents(){for(let e=0;e<this.tokens.length;e++)u.unsubscribe(this.tokens[e])}initScrollHandler(){this.utils.addEvent(window,"scroll",(()=>{this.calcPositions()}))}calcPositions(){let e=document.documentElement,t=document.body,i=Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight);this.pos={scrollLeft:(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),scrollTop:(window.pageYOffset||e.scrollTop)-(e.clientTop||0),documentHeight:i},this.publishToSubscriber()}publishToSubscriber(){let e=this.pos;for(let t of this.subscriber)t.callback.call(window,e)}add(e){this.subscriber.push(e)}remove(e){let t;for(let i=0;i<this.subscriber.length;i++)if(t=this.subscriber[i],t.adUnit===e)return void this.subscriber.splice(i,1)}reset(){this.unsubscribeFromEvents(),this.subscriber=[],m=void 0}}class w{constructor(e,t){if(b)return b.add({adUnit:e,callback:t}),t&&t(b.size),b;this.utils=new a,this.subscriber=[],this.add({adUnit:e,callback:t}),this.initResizeHandler(),this.size=this.getWindowWidth(),this.publishToSubscriber(),this.subscribeToEvents(),b=this}subscribeToEvents(){this.tokens=[],this.tokens.push(u.subscribe("adunit.destroy",((e,t)=>{this.remove(t)})))}unsubscribeFromEvents(){for(let e=0;e<this.tokens.length;e++)u.unsubscribe(this.tokens[e])}calcData(){this.valuesChanged()&&this.publishToSubscriber()}initResizeHandler(){this.utils.addEvent(window,"resize",(()=>{this.calcData()}))}valuesChanged(){let e=this.getWindowWidth();if(!this.size||JSON.stringify(this.size)!==JSON.stringify(e))return this.size=e,!0}getWindowWidth(){let e=document.body,t=document.documentElement,i=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),s=Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth);return{innerWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,innerHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight,documentHeight:i,documentWidth:s}}publishToSubscriber(){let e,t=Object.assign({},this.size);for(let i of this.subscriber)e=this.utils.getSlotInfos(i.adUnit),t.adUnitWidth=e.width,t.adUnitHeight=e.height,i.callback.call(window,t)}add(e){this.subscriber.push(e),e.callback}remove(e){let t;for(let i=0;i<this.subscriber.length;i++)if(t=this.subscriber[i],t.adUnit===e)return void this.subscriber.splice(i,1)}reset(){this.unsubscribeFromEvents(),this.subscriber=[],b=void 0}}class T{constructor(e){this.adUnit=e,this.utils=new a,this.logger=new p("AdConnect","DarkKhaki"),this.initialDataSendToConnectors=[],this.initListener(),this.subscribeToEvents(),this.initScrollByDebouncing()}initScrollByDebouncing(){this.scrollByTop=[],this.scrollByLeft=[],this.lastTopDirection=0,this.lastTopDirectionTO=null,this.debouncedScrollBy=this.utils.throttle((()=>{clearTimeout(this.lastTopDirectionTO),this.lastTopDirectionTO=setTimeout((()=>{this.lastTopDirection=0}),50);let e=this.scrollByTop.reduce(((e,t)=>this.lastTopDirection>0&&t>0||this.lastTopDirection<0&&t<0?e+t:0===this.lastTopDirection?(this.lastTopDirection=t,e+t):e),0),t=this.scrollByLeft.reduce(((e,t)=>e+t),0);0==e&&0==t||window.scrollBy({top:e,left:t,behavior:"instant"}),this.scrollByTop=[],this.scrollByLeft=[]}),25)}initAdConnect(){if(this.adUnit.iframe)try{this.postDataToAdunit({source:"totm_connect",adUnitId:this.adUnit.container,data:this.utils.getElemData(this.adUnit)})}catch(e){console.warn("can not connect to ad container",this.adUnit.adUnitName)}}initListener(){this.eventListener=this.handleMessageReceive.bind(this),this.utils.addEvent(window,"message",this.eventListener)}subscribeToEvents(){this.tokens=[],this.tokens.push(u.subscribe("adunit.destroy",((e,t)=>{t.container===this.adUnit.container&&this.reset()})))}unsubscribeFromEvents(){for(let e=0;e<this.tokens.length;e++)u.unsubscribe(this.tokens[e])}handleMessageReceive(e){if(e&&e.data&&"totm_data"===e.data.source&&!this.adUnit.isDestroyed()&&this.isMyAdunit(e)){if(this.logger.info({message:"message received",adUnit:this.adUnit.adUnitName,data:JSON.stringify(e.data)}),e.data.hideAdHeader&&(this.adUnit.hideAdHeader(),"function"==typeof this.adUnit.data.updateCallback&&this.adUnit.data.updateCallback({message:"show_adHeader",value:!1})),e.data.customAdHeader){let t=this.utils.sanitizeHTML(e.data.customAdHeader);this.adUnit.renderAdHeader(t)}if(void 0!==e.data.sticky&&this.adUnit.setSticky(e.data.sticky),void 0!==e.data.stickyPos)if("string"==typeof e.data.stickyPos){let t=this.utils.getAdUnitByName(e.data.stickyPos);t.length>0&&t[0].domElement&&this.adUnit.stickyHandler&&t[0].domElement.offsetParent&&this.adUnit.stickyHandler.setStickyToElement(this.adUnit,t[0].domElement)}else this.adUnit.stickyHandler.setStickyOffset(this.adUnit,e.data.stickyPos);if(void 0!==e.data.refresh&&this.adUnit.refreshService.setStatus(this.adUnit,e.data.refresh),e.data.execute&&this.executeCode(e.data.execute),e.data.close)if(e.data.animate){let e=this.adUnit.parentContainerId+"{height:"+this.adUnit.domElement.clientHeight+"px}";this.utils.appendStyleToHead(e),this.adUnit.parentDomElement.className+=" fadeClose",setTimeout((()=>{this.adUnit.parentDomElement.addEventListener("transitionend",(()=>{this.adUnit.destroy()})),this.adUnit.parentDomElement.style.height="0px"}),100)}else this.adUnit.parentDomElement.style.display="none",this.adUnit.destroy();if(e.data.expandIframe&&(this.adUnit.iframeStretcher=new v(this.adUnit,(t=>{this.postDataToAdunit({source:"totm_function",func:e.data.expandIframe,value:t})}))),e.data.getTargetingMap&&this.postDataToAdunit({source:"totm_function",func:e.data.getTargetingMap,value:{adUnitTargeting:this.adUnit.targeting}}),(e.data.expandInitWidth||e.data.expandInitHeight)&&this.adUnit.iframeStretcher&&this.adUnit.iframeStretcher.setInitialSize(e.data.expandInitWidth,e.data.expandInitHeight),e.data.decreaseIframe&&this.adUnit.iframeStretcher&&this.adUnit.iframeStretcher.reset(),e.data.getScrollEvent&&(this.adUnit.scrollHelper||(this.adUnit.scrollHelper=new U(this.adUnit,(t=>{this.postDataToAdunit({source:"totm_function",func:e.data.getScrollEvent,value:t})})))),e.data.getResizeEvent&&(this.adUnit.resizeHelper||(this.adUnit.resizeHelper=new w(this.adUnit,(t=>{this.postDataToAdunit({source:"totm_function",func:e.data.getResizeEvent,value:Object.assign(t,this.utils.getElemData(this.adUnit))})})))),e.data.dfpContainerStyle&&(this.defaultDFPStyle||(this.defaultDFPStyle=this.adUnit.domElement.style.cssText),this.adUnit.domElement.style.cssText=e.data.dfpContainerStyle),e.data.totmContainerStyle&&(this.defaultTOTMStyle||(this.defaultTOTMStyle=this.adUnit.domElement.firstElementChild.style.cssText),this.adUnit.domElement.firstElementChild.style.cssText=e.data.totmContainerStyle),e.data.bannerDimension){let t=e.data.bannerDimension.split("x");2===t.length&&(this.adUnit.domElement.style.width=t[0]+(-1===t[0].indexOf("px")?"px":""),this.adUnit.iframe.width=t[0]+(-1===t[0].indexOf("px")?"px":""),this.adUnit.domElement.style.height=t[1]+(-1===t[1].indexOf("px")?"px":""),this.adUnit.iframe.height=t[1]+(-1===t[1].indexOf("px")?"px":""),this.adUnit.domElement.className+=" bannerDimensionChanged")}if(e.data.addStyle&&(this.customStyle=this.utils.appendStyleToHead(e.data.addStyle,"style_"+this.adUnit.container)),e.data.addClass&&(e.data.totmContainer&&(this.adUnit.domElement.className+=" "+e.data.addClass),e.data.parentContainer&&(this.adUnit.parentDomElement.className+=" "+e.data.addClass)),e.data.visibilityChanged&&(u.subscribe("adunit.visibiltyChanged",((t,i)=>{i&&this.adUnit.id===i.id&&this.postDataToAdunit({source:"totm_function",func:e.data.visibilityChanged,value:{viewable:this.adUnit.isVisible,inViewPercentage:this.adUnit.inViewPercentage||0}})})),this.postDataToAdunit({source:"totm_function",func:e.data.visibilityChanged,value:{viewable:this.adUnit.isVisible||!1,inViewPercentage:this.adUnit.inViewPercentage||0}})),e.data.getNativeAds){this.adUnit.pbNativeFillup?(this.adUnit.pbResponse=this.adUnit.pbNativeFillup,this.adUnit.targeting.hb_adid=this.adUnit.pbNativeFillup[0].adUnitCode,this.adUnit.pbNativeFillupFallback=!0):this.adUnit.pbResponse&&"outstream_native"==this.adUnit.pbResponse.mediaType&&(this.adUnit.pbResponse=[this.adUnit.pbResponse]);let t=Array.isArray(this.adUnit.pbResponse)?this.adUnit.pbResponse.map((e=>({native:e.native,adId:e.adId,creativeId:e.creativeId}))):void 0;this.postDataToAdunit({source:"totm_function",func:e.data.getNativeAds,value:t});let i=this.utils.getTargeterByName("prebid");if(t&&this.adUnit.targeting.hb_adid&&i){let e=this.adUnit.targeting.hb_adid;i.renderPrebid(null,e,!0)}}if(e.data.getPrebidVAST){this.postDataToAdunit({source:"totm_function",func:e.data.getPrebidVAST,value:{vastXml:this.adUnit.pbResponse.vastXml,vastUrl:this.adUnit.pbResponse.vastUrl,vastImpUrl:this.adUnit.pbResponse.vastImpUrl,creativeId:this.adUnit.pbResponse.creativeId}});let t=this.utils.getTargeterByName("prebid");this.adUnit.targeting&&this.adUnit.targeting.hb_adid&&t&&t.renderPrebid(null,this.adUnit.targeting.hb_adid,!0)}if(e.data.getPrebidAd)if(e.data.prebidAdId){let t=this.getAdunitByPBCode(e.data.prebidAdId);this.postDataToAdunit({source:"totm_function",func:e.data.getPrebidAd,value:t.pbResponse.ad})}else{this.postDataToAdunit({source:"totm_function",func:e.data.getPrebidAd,value:this.adUnit.pbResponse.ad});let t=this.utils.getTargeterByName("prebid");this.adUnit.targeting&&this.adUnit.targeting.hb_adid&&t&&t.renderPrebid(null,this.adUnit.targeting.hb_adid,!0)}if(e.data.getPrebidData){let t={},i=this.utils.getTargeterByName("prebid");if(this.adUnit.pbResponse)return this.adUnit.prebidFallback=!0,void i.renderPrebid(this.adUnit.iframe.contentWindow.document,this.adUnit.pbResponse.adUnitCode);t.sizes=this.adUnit.getPossibleSizesForAdunitName("appnexus",!1),i&&(t.invCode=i.generatePBAdUnitPathDuplicate(this.adUnit),t.invCodeOld=i.generatePBAdUnitPath(this.adUnit),this.postDataToAdunit({source:"totm_function",func:e.data.getPrebidData,value:t}))}if(e.data.addClickElem&&(e.data.addClickHandler||e.data.openUrl)&&this.utils.addClickHandler(e.data.addClickElem,(()=>{e.data.openUrl?window.open(e.data.openUrl,"_blank"):this.postDataToAdunit({source:"totm_function",func:e.data.addClickHandler,value:!0})})),e.data.openPopup&&window.open(e.data.openPopup,"_blank"),e.data.setHref&&(window.location.href=e.data.setHref),e.data.updateCallback&&"function"==typeof this.adUnit.callback){let t;try{t=JSON.parse(e.data.updateCallback)}catch(e){}this.adUnit.callback(t)}if(e.data.modifyElem&&this.utils.modifyElem(e.data.modifyElem),e.data.isBrandday&&(window.TATM.brandDay=!0),e.data.blockLazyAds&&(window.TATM.blockLazyAds=!0),e.data.scrollBy&&(this.scrollByTop.push(e.data.top),this.scrollByLeft.push(e.data.left),this.scrollByBehavior=e.data.behavior,this.debouncedScrollBy()),e.data.adReady&&this.adUnit.adRenderedTS){let t,i=e.data.adReady-this.adUnit.adRenderedTS;this.adUnit.startDisplay&&(t=Date.now()-this.adUnit.startDisplay,t=t>0?t:0),this.adUnit.logger.log({message:"ad completely loaded",renderTime:i<0?0:i,timeToDisplay:t,template:e.data.template||"not specified"})}if(e.data.bindOnViewabilityChange&&e.data.adUnitCode){let t=this.utils.getAdUnitByName(e.data.adUnitCode);t&&t.length>0&&(u.subscribe("adunit.visibiltyChanged",((i,s)=>{t[0].container===s.container&&this.postDataToAdunit({source:"totm_function",func:e.data.bindOnViewabilityChange,value:s.inViewPercentage})})),this.postDataToAdunit({source:"totm_function",func:e.data.bindOnViewabilityChange,value:t[0].isVisible?100:0}))}if(e.data.loadScripts)for(let t=0;t<e.data.loadScripts.length;t++){let i,s=e.data.loadScripts[t];if("object"==typeof e.data.loadScripts[t]&&(s=e.data.loadScripts[t].url,i=e.data.loadScripts[t].onLoadResponse),!this.utils.scriptSrcIsWhiteListed(s))return void this.logger.log({message:"script not whitelisted",script:s,adData:{lineitem:this.adUnit.adData?this.adUnit.adData.lineItemId:"",creative:this.adUnit.adData?this.adUnit.adData.creativeId:""}});this.utils.loadScript(s,(()=>{i&&this.postDataToAdunit(i)}))}if(e.data.loadStyles)for(let t=0;t<e.data.loadStyles.length;t++)this.utils.loadStyle(e.data.loadStyles[t]);if(e.data.crassAd){let t=e.data.crassAd.teaser;t&&"function"==typeof this.adUnit.data.callback&&this.adUnit.data.callback({adUnitContainer:this.adUnit.parentDomElement,teaser:JSON.parse(t),type:"paidPost"}),t&&"function"==typeof this.adUnit.data.updateCallback&&this.adUnit.data.updateCallback({message:"paidPost",value:JSON.parse(t)})}if(e.data.fixOverflow&&this.utils.fixParentsOverflows(this.adUnit.iframe),e.data.getNaviHeight){let t=this.adUnit.config.getNaviHeight();this.postDataToAdunit({source:"totm_function",func:e.data.getNaviHeight,value:t})}this.adUnit.adUnitConf&&this.adUnit.adUnitConf.options&&"function"==typeof this.adUnit.adUnitConf.options.onMessage&&this.adUnit.adUnitConf.options.onMessage.call(this.adUnit,e.data),e.data.connectorId&&-1===this.initialDataSendToConnectors.indexOf(e.data.connectorId)&&(this.initialDataSendToConnectors.push(e.data.connectorId),this.initAdConnect(e.data.connectorId))}}isMyAdunit(e){if(e&&this.adUnit.iframe){if(e.source===this.adUnit.iframe.contentWindow)return this.adUnit.connectResponder=this.adUnit.iframe.contentWindow,!0;{let t=0,i=e.source,s=e.source?e.source.parent:null;for(;s&&t<10&&s!==top&&s!==i;){if(t+=1,s===this.adUnit.iframe.contentWindow)return this.adUnit.connectResponder=e.source,!0;i=s,s=i.parent}}}}postDataToAdunit(e){this.adUnit.connectResponder?this.adUnit.connectResponder.postMessage(e,"*"):this.adUnit.iframe&&this.adUnit.iframe.contentWindow&&"function"==typeof this.adUnit.iframe.contentWindow.postMessage&&this.adUnit.iframe.contentWindow.postMessage(e,"*")}executeCode(e){this.logger.log({message:"execute",code:e,adData:{lineitem:this.adUnit.adData?this.adUnit.adData.lineItemId:"",creative:this.adUnit.adData?this.adUnit.adData.creativeId:""}})}getAdunitByPBCode(e){let t=this.utils.adLoader.registeredAdUnits;for(let i of t)if(i.pbAdUnits&&i.pbAdUnits.length>0)for(let t of i.pbAdUnits)if(t.code===e)return i}reset(){this.initialDataSendToConnectors=[],this.adUnit.scrollHelper&&(this.adUnit.scrollHelper.remove(this.adUnit),this.adUnit.scrollHelper=void 0),this.adUnit.resizeHelper&&(this.adUnit.resizeHelper.remove(this.adUnit),this.adUnit.resizeHelper=void 0),this.defaultDFPStyle&&this.adUnit.domElement&&this.adUnit.domElement.firstElementChild&&(this.adUnit.domElement.firstElementChild.cssText=this.defaultDFPStyle),this.defaultTOTMStyle&&this.adUnit.domElement&&(this.adUnit.domElement.cssText=this.defaultTOTMStyle),this.customStyle&&this.customStyle.parentNode&&this.customStyle.parentNode.removeChild(this.customStyle),this.adUnit.iframeStretcher&&this.adUnit.iframeStretcher.reset(),this.eventListener&&this.utils.removeEvent(window,"message",this.eventListener),this.unsubscribeFromEvents()}}var A=i(996),C=i.n(A);class P{constructor(e){if(e){if(this.id=Math.floor(1e6*Math.random()),this.logger=new p("Adunit","red"),this.data=e.data,this.config=e.config,this.adUnitConf=this.getConfig(),this.events=u,this.creationTime=(new Date).getTime(),this.getViewport=t,this.additionalDomElements=[],this.setRenderPromise(),this.adUnitConf)return this.logger.source+=" "+this.data.adUnitName,this.utils=new a,this.data.onRegister&&(this.adUnitConf.options.onRegister=this.data.onRegister),this.prepareAdUnit();this.logger.warn({message:"no config for this adunit found",data:JSON.stringify(this.data)})}}setRenderPromise(){this.ready=new e,this.rendered=new e,this.loaded=new e,this.responseReceived=new e,this.viewabilityMeasured=new e,this.beforeInView=new e,this.rendered.promise.then((e=>{this.adRenderedTS=Date.now(),this.handleElemLoaded(e),this.connectToMessageService()})),this.loaded.promise.then((e=>{this.adLoadedTS=Date.now()})),this.responseReceived.promise.then((e=>{this.adRespondedMS=Date.now(),this.handleResponseAvailable(e)})),this.viewabilityMeasured.promise.then((e=>{this.viewabilityMeasuredMS=Date.now(),this.handleViewabilityMeasured(e)}))}allocateDomElements(){this.parentContainerId="#"+this.data.targetContainerId,this.parentDomElement=document.getElementById(this.data.targetContainerId),this.parentDomElement&&(this.parentDomElement.style.height=""),this.container&&(this.domElement=document.getElementById(this.container))}prepareAdUnit(){"video"===this.data.type?this.prepareVideoAdUnit():"interstitial"===this.data.type||"anchor"===this.data.type?this.prepareSpecialAdunit():this.prepareDisplayAdUnit()}prepareDisplayAdUnit(){if(this.type="display",this.container=this.prepareContainer(this.data.targetContainerId),this.allocateDomElements(),!this.parentDomElement||0===this.parentDomElement.length)return void this.logger.log({message:"Adunit Container not available",adUnit:this.data.adUnitName,adUnitPath:this.data.adUnitPath,container:this.data.targetContainerId});if(!this.config.loadHiddenAds&&null===this.domElement.offsetParent)return void this.logger.info({message:"Adunit hidden by CSS",container:this.data.targetContainerId});this.containerSize=this.getContainerSize();let e=this.getPossibleSizesForAdunitName("dfp",!0);0!==e.length?(this.adUnitPath=this.generateAdUnitPath(),this.adUnitName=this.data.adUnitName,this.sizes=e,this.isSticky=this.isSticky(),this.domElement=document.getElementById(this.container),this.willRefresh=this.adUnitConf.options.adRefresh,this.callback=this.data.callback,this.refreshCallback=this.data.refreshCallback,this.updateCallback=this.data.updateCallback,this.data.targeting&&this.events.publish("adunit.addtargeting",{adUnit:this,data:this.data.targeting},1),this.logger.info({message:"created",id:this.id,adUnitPath:this.adUnitPath,section:this.data.section||"",container:this.data.targetContainerId,sticky:this.isSticky||!1,willRefresh:!!this.willRefresh&&this.willRefresh.time,containerSize:this.containerSize.width+"x"+this.containerSize.height,targeting:JSON.stringify(this.data.targeting||{}),prefetching:this.isPrefetchable(),lazyloading:this.loadsLazy(),sizes:e.map((e=>2===e.length?"["+e[0]+"x"+e[1]+"]":e))}),this.isSticky&&this.config.dfp.adPrefetching&&this.initSticky()):this.logger.info({message:"wont be initialized because of missing sizes",containerSize:this.containerSize.width+"x"+this.containerSize.height,adunitPath:this.generateAdUnitPath()})}prepareSpecialAdunit(){this.type=this.data.type,this.adUnitPath=this.generateAdUnitPath(),this.adUnitName=this.data.adUnitName,this.callback=this.data.callback,this.sizes=this.getPossibleSizesForAdunitName("dfp",!1)||[],this.container="outOfPageAdunit_"+Math.floor(1e3*Math.random()),this.data.targeting&&this.events.publish("adunit.addtargeting",{adUnit:this,data:this.data.targeting},1),this.logger.info({message:"created",id:this.id,adUnitPath:this.adUnitPath,section:this.data.section||"",container:this.data.targetContainerId,targeting:JSON.stringify(this.data.targeting||{}),sizes:this.sizes.map((e=>2===e.length?"["+e[0]+"x"+e[1]+"]":e))})}prepareVideoAdUnit(){this.type="video";let e=this.getPossibleSizesForAdunitName("dfp",!0);0!==e.length?(this.container=this.data.targetContainerId,this.adUnitPath=this.generateAdUnitPath(),this.adUnitName=this.data.adUnitName,this.sizes=e,this.callback=this.data.callback,this.data.targeting&&this.events.publish("adunit.addtargeting",{adUnit:this,data:this.data.targeting},1),this.logger.info({message:"created",adUnitPath:this.adUnitPath,sizes:e.map((e=>2===e.length?"["+e[0]+"x"+e[1]+"]":e))})):this.logger.info({message:"wont be initialized because of missing sizes"})}isSticky(){return void 0!==this.data.sticky?this.data.sticky:this.adUnitConf.options.sticky&&this.adUnitConf.options.sticky.enabled||!1}getConfig(){let e=this.getSizesConfig();return e&&(e=this.mergeConfigOptions(e)),e}getSizesConfig(){let e;if(this.config.adUnits[this.data.adUnitName]&&this.matchesSectionOrPath(this.config.adUnits[this.data.adUnitName],this.data))e=this.config.adUnits[this.data.adUnitName];else{let t=this.data.adUnitName;for(;t.length>0&&(!this.config.adUnits[t]||!this.matchesSectionOrPath(this.config.adUnits[t],this.data));)t=t.substring(0,t.length-1);e=this.config.adUnits[t]}return e&&(e=Object.assign({},e)),e}matchesSectionOrPath(e,t){let i,s;return i=e.section&&e.section===t.section||!e.section,s=e.pagePath&&-1!==this.config.pagePath.indexOf(e.pagePath)||!e.pagePath,s&&i}mergeConfigOptions(e){let t;if(this.config.adUnitOptions[this.data.adUnitName])t=this.config.adUnitOptions[this.data.adUnitName];else{let e=this.data.adUnitName;for(;!this.config.adUnitOptions[e]&&e.length>0;)e=e.substring(0,e.length-1);t=this.config.adUnitOptions[e]}return e.options=C()(e.options||{},t||{}),e}handleElemLoaded(e){this.loadingComplete=!0,this.iframe=this.utils.findCorrectAdIframe(this),this.logger.log({message:"Ad loaded",path:this.adUnitPath,empty:e.isEmpty,prebidTimeout:this.pbTimeout||!1,prebidAdAvailable:!!this.pbResponse,totalLoadTime:(new Date).getTime()-this.startLoadTime,isSafeFrame:!!this.iframe&&"true"===this.iframe.getAttribute("data-is-safeframe"),order:e.campaignId,lineitem:e.lineItemId,creative:e.creativeId,size:e.size?e.size.join("x"):""}),this.adData=e,e&&(this.isEmpty=e.isEmpty,e.isEmpty||(this.isSticky&&!this.config.dfp.adPrefetching&&this.initSticky(e),this.renderAdHeader(),"function"==typeof this.adUnitConf.options.positioningHelper&&this.adUnitConf.options.positioningHelper.call(this,this,e),this.adUnitConf.options.style&&this.domElement.setAttribute("style",this.adUnitConf.options.style),this.renderedSize=e.size,this.renderAdInfos(e))),"function"==typeof this.callback&&(e.type="adserverResponse",this.callback(e))}handleResponseAvailable(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=null==t||null===(e=t.slot)||void 0===e?void 0:e.getResponseInformation(),s={adUnit:this.adUnitName,isEmpty:null===i,type:"adserverResponse"};"function"==typeof this.updateCallback&&this.updateCallback(s),this.logger.info({message:"Adserver Response available",empty:s.isEmpty})}handleViewabilityMeasured(e){let t={adUnit:this.adUnitName,type:"viewabilityMeasured"};"function"==typeof this.updateCallback&&this.updateCallback(t)}connectToMessageService(){this.connector?this.connector.initAdConnect():this.connector=new T(this)}addObserver(){if(window.MutationObserver){let e=new MutationObserver((t=>{t.forEach((t=>{if(t.removedNodes.length>0)for(let i of t.removedNodes)i===this.parentDomElement&&(this.allocateDomElements(),this.stickyHandler.removeScrollHandling(this),e.disconnect())}))}));this.parentDomElement&&this.parentDomElement.parentNode&&e.observe(this.parentDomElement.parentNode,{childList:!0})}else this.mutationInterval=setInterval((()=>{null===this.parentDomElement.parentNode&&(clearInterval(this.mutationInterval),this.allocateDomElements(),this.stickyHandler.removeScrollHandling(this))}),500)}renderAdInfos(e){this.domElement&&(this.domElement.setAttribute("data-dfp-creative",e.creativeId||""),this.domElement.setAttribute("data-dfp-campaign",e.campaignId||""),this.domElement.setAttribute("data-dfp-lineitem",e.lineItemId||""),this.parentDomElement.className+=" ad-loaded")}renderAdHeader(e){if(this.preventHeader)return;let t;if(!1===this.adUnitConf.options.adHeader&&!e)return;if(e?t=e:this.adUnitConf.options.adHeader?t=this.adUnitConf.options.adHeader:this.config.adHeader?t=this.config.adHeader:this.data.adHeader&&(t=this.data.adHeader),!t)return;let i=this.container+"_header",s=document.getElementById(i);!s&&this.parentDomElement&&this.domElement&&(s=document.createElement("div"),s.id=i,s.className="ad_header",this.parentDomElement.insertBefore(s,this.domElement)),s.innerHTML=t,this.adHeader=s}hideAdHeader(){this.adHeader&&(this.adHeader.style.display="none"),this.preventHeader=!0}prepareContainer(e){let t=this.config.adUnitIdPrefix+e,i=document.getElementById(e);if(!i)return;let s=document.createElement("div");return s.id=t,this.adUnitConf.options&&this.adUnitConf.options.initStyle&&(i.style.cssText+=" "+this.adUnitConf.options.initStyle),i.appendChild(s),t}initSticky(){this.stickyHandler=new y(this),this.addObserver()}generateAdUnitPath(){let e=this.data.section||"";this.data.section&&this.data.section.length>0&&(e=e.replace(/^\/|\/$/g,""),e="/"+e);let t=this.config.pagePath;this.config.pagePath&&this.config.pagePath.length>0&&(t=t.replace(/^\/|\/$/g,""));let i=this.config.dfp.networkid+"/"+this.config.pageName+"/"+this.data.adUnitName+"/"+t+e;return-1===i.indexOf(" ")&&-1===i.indexOf("&")||(this.logger.warn({message:"Path contains spaces",adUnitPath:i}),i=i.replace(/\s/g,"-"),i=i.replace("&","und")),i}getPossibleSizesForAdunitName(e,t,i){let s=[];s=Array.isArray(e)?e:this.adUnitConf.sizes[e]||[];let n=i||this.adUnitConf,a=n.options;s=this.sortSizes(s);let o=[],d=this.getViewport();for(let e of s)if(e&&2===e.length||this.logger.error({message:"wrong adunit size config"}),a.ignoreDimensions)o.push(e);else if(a.onlyWidthMatters)e[0]<=d.viewportWidth&&o.push(e);else if(a.fitsInScreen)d.viewportWidth>=e[0]&&d.viewportHeight>=e[1]&&o.push(e);else if(a.maxPercentageViewPortHeight)e[1]<=d.viewportHeight*(a.maxPercentageViewPortHeight/100)&&e[0]<=d.viewportWidth&&o.push(e);else if(a.checkContainerWidth&&a.checkContainerHeight)e[0]<=this.containerSize.width+(a.containerOffsetWidth||0)&&e[1]<=this.containerSize.height+(a.containerOffsetHeight||0)&&o.push(e);else if(a.checkContainerHeight)e[1]<=this.containerSize.height+(a.containerOffsetHeight||0)&&o.push(e);else if(a.checkContainerWidth)e[0]<=this.containerSize.width+(a.containerOffsetWidth||0)&&o.push(e);else if(!1!==this.config.desktopContentWidth&&a.percentageViewable)if(void 0===this.config.desktopContentWidth&&"function"==typeof this.config.getDesktopContentWidth&&(this.config.desktopContentWidth=this.config.getDesktopContentWidth()),void 0!==this.config.desktopContentWidth){let t=100/a.percentageViewable;if("function"==typeof a.sizeHelper)a.sizeHelper(e)&&o.push(e);else{let i=a.offset||0;d.viewportWidth-i-this.config.desktopContentWidth-e[0]/t>=0&&d.viewportHeight>=e[1]/2&&o.push(e)}}else this.logger.info({message:"percentage viewable can not be measured. No DesktopContentWidth",adUnit:this.getAdUnitName()});else d.viewportWidth>=e[0]&&d.viewportHeight>=e[1]/2&&o.push(e);if(a.loadingRatio&&(o=o.filter((e=>{let t=e[0];return 0===t||t/o[o.length-1][0]>=n.options.loadingRatio}))),n.forcedSizes){let e,t=n.forcedSizes.all?n.forcedSizes.all:[];e=this.config.isMobile?n.forcedSizes.mobile?n.forcedSizes.mobile:[]:n.forcedSizes.desktop?n.forcedSizes.desktop:[],o=o.concat(t,e)}if(n.blockedSizes&&n.blockedSizes[e])for(let t of n.blockedSizes[e])o=o.filter((e=>!(e[0]==t[0]&&e[1]==t[1])));return t&&(o=this.addStandardSizes(o,t)),o=o.filter((e=>o.indexOf(e)===o.lastIndexOf(e))),o}addStandardSizes(e){if(e.length>0){let t=!1;for(let i=0;i<e.length;i++)2==e[i].length&&1==e[i][0]&&1==e[i][1]&&(t=!0);t||e.push([1,1]),-1===e.indexOf("fluid")&&e.push("fluid")}return e}sortSizes(e){return e.sort(((e,t)=>e[0]<t[0]?-1:e[0]===t[0]?e[1]-t[1]:1))}getContainerSize(){return{width:0===this.parentDomElement.offsetWidth?this.parentDomElement.parentNode.offsetWidth:this.parentDomElement.offsetWidth,height:0===this.parentDomElement.offsetHeight?this.parentDomElement.parentNode.offsetHeight:this.parentDomElement.offsetHeight}}setCustomTargeting(e){Object.keys(e).length>0&&e.constructor===Object&&(this.targeting=C()(this.targeting||{},e))}getAdUnitPath(){return this.adUnitPath}getAdUnitName(){return this.adUnitName+(this.data.section?"/"+this.data.section:"")+"/"+this.config.pagePath.replace(/^\/|\/$/g,"")}getSlotElementId(){if(this.slot)return this.slot.getSlotElementId()}loadsLazy(){let e=this.config.lazyLoading;return this.adUnitConf&&this.adUnitConf.options&&void 0!==this.adUnitConf.options.lazyLoading&&(e=this.adUnitConf.options.lazyLoading),-1!==this.config.alwaysLoadableAdunit.indexOf(this.adUnitName)&&(e=!1),e}isPrefetchable(){let e=this.config.dfp.adPrefetching;return this.adUnitConf&&this.adUnitConf.options&&void 0!==this.adUnitConf.options.prefetching&&(e=this.adUnitConf.options.prefetching),e}setSticky(e){this.loadingComplete&&e!==this.isSticky&&(e?this.initSticky():this.stickyHandler&&this.stickyHandler.removeScrollHandling(this)),this.isSticky=e}prepareRefresh(){this.setRenderPromise(),this.connector&&this.connector.reset()}isDestroyed(){return this.destroyed}destroy(){this.logger.info({message:"destroy",container:this.container,adUnitPath:this.adUnitPath}),this.events.publish("adunit.destroy",this,!0),this.utils.removeDomNode(this.domElement),this.adHeader&&this.utils.removeDomNode(this.adHeader),this.isRefreshed&&this.utils.removeDomNode(this.parentDomElement),this.parentDomElement=this.domElement=null;for(let e=0;e<this.additionalDomElements.length;e++)this.utils.removeDomNode(this.additionalDomElements[e]);this.destroyed=!0}}function S(e,t){t=function(e,t){let i={};for(let s in e)i[s]=e[s],t.hasOwnProperty(s)&&(i[s]=t[s]);return i}(S.defaults,t||{});let i=function(e,t){let i=window.document,s=i.createElement("div");return s.innerHTML="&nbsp;",s.setAttribute("class",e),s.setAttribute("style",t),i.body.appendChild(s),s}(t.testNodeClasses,t.testNodeStyle),s=0,n=!1,a=setInterval((function(){s++,n=function(e){return 0===e.offsetHeight||!document.body.contains(e)||"none"===e.style.display||"hidden"===e.style.visibility}(i),(n||s===t.testRuns)&&(clearInterval(a),i.parentNode&&i.parentNode.removeChild(i),e(n))}),t.testInterval)}let k;S.defaults={testNodeClasses:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links adtech_",testNodeStyle:"height: 10px !important; font-size: 20px; color: transparent; position: absolute; bottom: 0; left: -10000px;",testInterval:51,testRuns:4};class O{constructor(){if(k)return k;k=this,this.ready=new e,this.logger=new p("ABTester","black"),this.adProb=0,this.simpleTest(),setTimeout((()=>{this.publishResult()}),3500),this.setupTimingApi()}setupTimingApi(){if(window.performance&&window.performance.addEventListener&&(performance.addEventListener("resourcetimingbufferfull",(e=>{this.bufferFull=!0})),"function"==typeof performance.setResourceTimingBufferSize))try{window.performance.setResourceTimingBufferSize(1e3)}catch(e){}}simpleTest(){var e;e=()=>{setTimeout((()=>{S((e=>{e?this.failed():this.success()}))}),1e3)},"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)}checkDFPRequest(){if(this.dfpRes=void 0!==this.dfpRes?++this.dfpRes:1,window.performance&&!this.bufferFull&&window.performance.getEntriesByType){let e=window.performance.getEntriesByType("resource"),t=0;for(let i of e)-1!==i.name.indexOf("securepubads.g.doubleclick.net/gampad/ads?")&&(t+=1);this.dfpRes-t>1?this.failed():this.success()}}checkDFPApi(){window.googletag.apiReady?this.success():(this.failed(),setTimeout((()=>{window.googletag.apiReady||(this.adProb+=100,window.googletag.cmd&&window.googletag.cmd.push&&window.googletag.cmd.push((()=>{this.adProb-=100})))}),1e3))}failed(){this.adProb+=1}success(){this.adProb-=1}publishResult(){this.adblockStatus=this.adProb>=2,"function"==typeof window.tatmAdBlockDetection&&this.adblockStatus&&tatmAdBlockDetection(),this.logger.log({message:"adblockstatus",adblock:this.adblockStatus}),this.ready.resolve(this.adblockStatus)}}window.firstTOTMAdCall;let R,E=!1,x=!1;class z{constructor(e){this.config=e.config,this.targetingManager=e.targeter,this.core=e,this.utils=new a,this.adCallTracked=!1,this.logger=new p("DFP","lightgreen"),this.logger.info({message:"created"}),this.creationTime=(new Date).getTime(),this.abTester=new O,this.registeredAdUnits=this.core.registeredAdUnits,this.initApi(),this.loadLibrary().then((()=>{this.abTester.checkDFPApi()})),this.subscribeToEvents()}subscribeToEvents(){this.tokens=[],this.tokens.push(u.subscribe("adunit.destroy",((e,t)=>{t&&t.slot&&this.destroySlots(t.slot)}))),this.tokens.push(u.subscribe("adunit.new",((e,t)=>{t&&this.initAdUnit(t)}))),this.tokens.push(u.subscribe("adLoader.publisherProvidedId",((e,t)=>{var i;t.length>1&&"goldbach.com"===(null===(i=t[0])||void 0===i?void 0:i.source)&&this.setThirdPartyIdentifier(t[1])})))}unsubscribeFromEvents(){for(let e=0;e<this.tokens.length;e++)u.unsubscribe(this.tokens[e])}initApi(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],this.preconnect(),this.queue={push:e=>{this.apiReady.then((()=>{window.googletag.apiReady?e.call():window.googletag.cmd.push((()=>{e.call()}))}))}}}loadLibrary(){let t=new e;if(this.apiReady=t.promise,window.googletag.apiReady||this.libLoaded);else{this.logger.info({message:"loading library"});let e=document.createElement("script");e.async=!0,e.type="text/javascript";let t="https:"==document.location.protocol;e.src=(t?"https:":"http:")+"//securepubads.g.doubleclick.net/tag/js/gpt.js";let i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}return this.utils.onModuleAvailable("CMP",(e=>{e.onReady(((e,i)=>{this.consent=e,this.consentFallback=i,t.resolve()}))})),this.queue.push((()=>{this.libLoaded=!0,this.logger.info({message:"ready"}),this.setDFPConfig()})),this.apiReady}setThirdPartyIdentifier(e){this.uuid=e,this.queue.push((()=>{this.uuid&&(googletag.pubads().setPublisherProvidedId(this.uuid),this.logger.info({message:"set publisher provided id",id:this.uuid}))}))}setDFPConfig(){if(this.config.dfp&&this.config.dfp.safeFrameConfig&&googletag.pubads().setSafeFrameConfig(this.config.dfp.safeFrameConfig),googletag.pubads().enableSingleRequest(),googletag.pubads().disableInitialLoad(),googletag.pubads().collapseEmptyDivs(!0),this.config.dfp.adPrefetching&&"function"==typeof googletag.pubads().enableLazyLoad&&this.enablePrefetching(),this.config.dfp.adExclusionLabels){this.logger.info({message:"set ad exlusion label",label:this.config.dfp.adExclusionLabels});for(let e=0;e<this.config.dfp.adExclusionLabels.length;e++)googletag.pubads().setCategoryExclusion(this.config.dfp.adExclusionLabels[e])}!1===this.consent&&googletag.pubads().setRequestNonPersonalizedAds(1),"1"==s("npa")&&googletag.pubads().setRequestNonPersonalizedAds(1),"0"==s("npa")&&googletag.pubads().setRequestNonPersonalizedAds(0),"1"==s("ltd")&&googletag.pubads().setPrivacySettings({limitedAds:!0}),window.googletag.enableServices(),x||(x=!0,googletag.pubads().addEventListener("slotRenderEnded",(e=>{this.handleElemRendered(e)})),googletag.pubads().addEventListener("slotOnload",(e=>{this.handleSlotLoad(e)})),googletag.pubads().addEventListener("impressionViewable",(e=>{let t=this.utils.getAdUnitByContainer(e.slot.getSlotElementId());var i;t&&(t.measuredViewable=!0,this.logger.info({message:"Slot viewability measured",slot:t.adUnitName}),null===(i=t.viewabilityMeasured)||void 0===i||i.resolve(e))})),googletag.pubads().addEventListener("slotResponseReceived",(e=>{this.handleSlotResponseReceived(e)})),googletag.pubads().addEventListener("slotVisibilityChanged",(e=>{let t=this.utils.getAdUnitByContainer(e.slot.getSlotElementId());if(t){let i=e.inViewPercentage>=50;t.visibilityChanged=t.isVisible!==i,t.isVisible=i,t.inViewPercentage=e.inViewPercentage,u.publish("adunit.visibiltyChanged",t,!0)}})))}enablePrefetching(){this.prefetching=!0,this.logger.info({message:"prefetching",status:this.prefetching}),googletag.pubads().enableLazyLoad(this.config.dfp.lazyLoading)}disablePrefetching(){this.prefetching=!1,this.logger.info({message:"prefetching",status:this.prefetching}),googletag.pubads().enableLazyLoad({fetchMarginPercent:-1,renderMarginPercent:-1,mobileScaling:-1})}initAdUnit(e){"video"!==e.type&&(e.slot?this.logger.info({message:"Slot already created",slot:e.adUnitName,domId:e.container}):this.queue.push((()=>{if("interstitial"!==e.type)if("anchor"!==e.type)e.beforeInView.promise.then((()=>{this.logger.info({message:"Slot created",slot:e.adUnitName,domId:e.container});try{e.slot=window.googletag.defineSlot(e.adUnitPath,e.sizes,e.container).addService(googletag.pubads())}catch(t){this.logger.error({message:"can not create slot",adUnit:e.adUnitName})}window.googletag.display(e.container)}));else if(e.slot=window.googletag.defineOutOfPageSlot(e.adUnitPath,googletag.enums.OutOfPageFormat.BOTTOM_ANCHOR),e.slot){e.container=e.slot.getSlotElementId(),e.slot.addService(googletag.pubads());let t=googletag.sizeMapping().addSize([0,0],e.sizes).build();e.slot.defineSizeMapping(t),window.googletag.display(e.slot)}else this.logger.info({message:"couldn't create slot",slot:e.adUnitName});else if(e.slot=window.googletag.defineOutOfPageSlot(e.adUnitPath,googletag.enums.OutOfPageFormat.INTERSTITIAL),e.slot){e.slot.addService(googletag.pubads()).setConfig({interstital:{navBar:!0,unhideWindow:!0}}),e.container=e.slot.getSlotElementId();let t=googletag.sizeMapping().addSize([0,0],e.sizes).build();e.slot.defineSizeMapping(t),window.googletag.display(e.slot)}})))}handleElemRendered(e){let t=e.slot.getSlotElementId(),i=this.utils.getAdUnitByContainer(t);this.abTester.success(),i&&i.rendered&&i.rendered.resolve(e)}handleSlotLoad(e){let t=e.slot.getSlotElementId(),i=this.utils.getAdUnitByContainer(t);i&&i.loaded&&i.loaded.resolve(e)}handleSlotResponseReceived(e){let t=this.utils.getAdUnitByContainer(e.slot.getSlotElementId());if(t){var i;let s=null==e||null===(i=e.slot)||void 0===i?void 0:i.getResponseInformation();e.isEmpty=null===s,t.responseReceived.resolve(e)}}requestAds(t,i){let s=new e;return this.queue.push((()=>{if(void 0===i)return void this.splitNonPrefetchableAds(t);if(window.performance&&window.performance.timing.navigationStart>0&&!this.adCallTracked){var e;this.adCallTracked=!0,window.firstTOTMAdCall=performance.timing.navigationStart;let i=TATM.timeSinceLastUpdate?TATM.timeSinceLastUpdate:window.firstTOTMAdCall,s=TATM.timeSinceLastUpdate?"second Adcall":"first Adcall",n=t.sort(((e,t)=>e.creationTime-t.creationTime))[0].creationTime,a=(new Date).getTime(),o=TATM.lastViewUpdate.getTime(),d=o-this.creationTime,r=n-o,l=(new Date).getTime()-i,h=this.core.CMP.consentReadyTS&&this.core.CMP.consentStart?this.core.CMP.consentReadyTS-this.core.CMP.consentStart:0;this.logger.log({message:s,timeTillTATMReady:this.creationTime-i,timeToTATMinit:d,timeToTATMinitAdunit:r,tatmgab:this.core.CMP.consentReadyTS?a-this.core.CMP.consentReadyTS:0,consentReady:h,cmpTries:this.core.CMP&&void 0!==this.core.CMP.tries?this.core.CMP.tries:-1,cmpBannerShown:(null===(e=this.core.CMP)||void 0===e?void 0:e.bannerShown)||!1,timeToAdcall:l,consent:this.core.CMP.consent,consentType:this.core.CMP.consentType||"none",consentFallback:this.consentFallback})}let n=t.map((e=>e.adUnitName)).join(",");this.setPageTargeting(),(t=(t=(t=this.setTargetingForAdUnit(t)).map((e=>e.slot))).filter((e=>e))).length>0&&(this.logger.info({message:"requesting ads",prefetching:this.prefetching,adUnits:n}),googletag.pubads().refresh(t,{changeCorrelator:E}),E=!1,this.abTester.checkDFPRequest()),s.resolve()})),s.promise}splitNonPrefetchableAds(e){let t=e.filter((e=>e.isPrefetchable())),i=e.filter((e=>!e.isPrefetchable()));i.length>0?(this.disablePrefetching(),this.requestAds(i,!0).then((()=>{this.enablePrefetching(),t.length>0&&this.requestAds(t,!0)}))):t.length>0&&(this.enablePrefetching(),this.requestAds(t,!0))}setPageTargeting(){var e;for(let e in this.targetingManager.pageTargeting)this.targetingManager.pageTargeting.hasOwnProperty(e)&&void 0!==this.targetingManager.pageTargeting[e]&&null!==this.targetingManager.pageTargeting[e]&&googletag.pubads().setTargeting(e.toString(),this.targetingManager.pageTargeting[e].toString());void 0!==(null===(e=this.targetingManager)||void 0===e?void 0:e.segmentTargeting.user_segments_gam)&&Array.isArray(this.targetingManager.segmentTargeting.user_segments_gam)&&googletag.pubads().setTargeting("user_segments",this.targetingManager.segmentTargeting.user_segments_gam)}setTargetingForAdUnit(e){for(let t of e)if(t.targeting&&t.slot)for(let e in t.targeting)t.targeting.hasOwnProperty(e)&&void 0!==t.targeting[e]&&t.slot.setTargeting(e.toString(),t.targeting[e].toString());return e}preconnect(){let e=document.createElement("link");e.rel="preconnect",e.setAttribute("crossorigin","crossorigin"),e.href="https://securepubads.g.doubleclick.net/",document.head.appendChild(e)}destroySlots(e){googletag&&"function"==typeof googletag.destroySlots&&googletag.destroySlots([e])}clearTargeting(){googletag&&googletag.pubads&&"function"==typeof googletag.pubads().clearTargeting&&googletag.pubads().clearTargeting()}reset(){window.googletag.apiReady&&(this.destroySlots(),this.clearTargeting()),this.unsubscribeFromEvents(),E=!0}}let I;const N=new class{constructor(){if(I)return I;I=this,this.queue=[],this.isReady=!1}push(e){this.isReady?e(this.targeter):this.queue.push(e)}ready(e){this.isReady||(this.targeter=e,this.isReady=!0,this.callQueue())}callQueue(){for(let e of this.queue)try{e(this.targeter)}catch(e){console.warn("can not call queued function",e)}}reset(){this.isReady=!1}};class _{constructor(e){this.config=e.config,this.core=e,this.queue=N,this.logger=new p("Targeter","orange"),this.initialPageParamsReady=e.initialPageParamsReady.promise,this.thirdPartyTargeter=[],this.thirdPartyTools=[],this.pageTargeting={},this.segmentTargeting={},this.initTargeting(),this.config.inMigration,this.queue.ready(this),this.subscribeToEvents()}subscribeToEvents(){this.tokens=[],this.tokens.push(u.subscribe("adunit.new",((e,t)=>{t&&this.registerAdunit(t)}))),this.tokens.push(u.subscribe("adunit.addtargeting",((e,t)=>{t.adUnit&&t.data&&this.setAdunitTargeting(t.adUnit,t.data)}))),this.tokens.push(u.subscribe("page.addtargeting",((e,t)=>{t=this.prepareTargeting(t),this.setPageTargeting(t)}))),this.tokens.push(u.subscribe("user.addsegments",((e,t)=>{t=this.prepareTargeting(t),this.setSegmentTargeting(t)})))}unsubscribeFromEvents(){for(let e=0;e<this.tokens.length;e++)u.unsubscribe(this.tokens[e])}registerAdunit(e){var t=this;let i=[];if(!this.config.inMigration)for(let s of this.thirdPartyTargeter){let n=s.getTargetingForAdunit(e);n.then((function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(i).length>0&&i.constructor===Object&&t.setAdunitTargeting(e,i)})),i.push(n)}Promise.all(i).then((()=>{e.ready.resolve()}))}initTargeting(){this.addConfigTargetings(),this.checkAdpreview(),this.addDefaultPageTargeting()}checkAdpreview(){let e=s("adpreview");e&&this.setPageTargeting({adpreview:e})}getOrientation(){return window.matchMedia("(orientation: landscape)").matches?"landscape":window.matchMedia("(orientation: portrait)").matches?"portrait":void 0}addDefaultPageTargeting(){t();let e=this.getDarkMode();this.setPageTargeting({pagetype:"overview",darkMode:e})}getDarkMode(){let e=!1;return window.matchMedia&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches),e}addConfigTargetings(){this.config.customTargeting&&this.setPageTargeting(this.config.customTargeting)}preprocessData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let t in e)e.hasOwnProperty(t)&&this.config.customKVProcessing&&("function"==typeof this.config.processAllKV?e[t]=this.config.processAllKV(t,e[t]):"function"==typeof this.config.customKVProcessing[t]&&(e[t]=this.config.customKVProcessing[t](e[t])));return"function"==typeof this.config.customKeyProcessing&&(e=this.config.customKeyProcessing(e,t)),e}checkPageTypeTargeting(e){return e&&(e.storyid||e.storyname)?(e.storyid=e.storyid||e.storyname?e.storyid||e.storyname:"",e.pagetype=e.pagetype||"story"):!e||null!==e.storyid&&!1!==e.storyid||(e.pagetype=e.pagetype||"overview"),e}convertToLowerCase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};for(let i in e)if(e.hasOwnProperty(i)&&(t[i.toLowerCase()]=e[i],Array.isArray(e[i])))for(let t=0;t<e[i].length;t++)"string"==typeof e[i][t]&&(e[i][t]=e[i][t].toLowerCase());return t}prepareTargeting(e){for(var t in e=this.convertToLowerCase(e),e=this.checkPageTypeTargeting(e),e=this.preprocessData(e,this.pageTargeting))t&&"string"==typeof e[t]&&(e[t]=e[t].replace(/\'/,""));return e}setPageTargeting(e){this.pageTargeting=Object.assign(this.pageTargeting,e),this.logger.info({message:"Pagetargeting set",data:JSON.stringify(e)})}setSegmentTargeting(e){this.segmentTargeting=Object.assign(this.segmentTargeting,e),this.logger.info({message:"User Segments set",data:JSON.stringify(e)})}setAdunitTargeting(e,t){t=this.preprocessData(t,e.targeting),this.logger.info({message:"targeting available",adUnit:e.adUnitPath,data:JSON.stringify(t)}),e.setCustomTargeting(t)}setup3rdPartyTools(){if(this.reinit)for(let e of this.thirdPartyTools)this.thirdPartyTargeter.push(new e(this))}addTargeter(e){let t=new e(this);t&&(this.thirdPartyTools.push(e),this.thirdPartyTargeter.push(t))}reset(){this.pageTargeting={};for(let e of this.thirdPartyTargeter)e.reset();this.thirdPartyTargeter=[],this.queue.reset(),this.unsubscribeFromEvents(),this.reinit=!0}}const M=function(){let e={},t=!1,i=0,s=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],i++);const n=function(i){for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t&&"[object Object]"===Object.prototype.toString.call(i[s])?e[s]=M(!0,e[s],i[s]):e[s]=i[s])};for(;i<s;i++)n(arguments[i]);return e},D=function(e,t){if(e===t)return!0;let i,s=Array.isArray(e),n=Array.isArray(t);if(s&&n){if(e.length!=t.length)return!1;for(i=0;i<e.length;i++)if(!D(e[i],t[i]))return!1;return!0}if(s!=n)return!1;if(e&&t&&"object"==typeof e&&"object"==typeof t){let s=Object.keys(e);if(s.length!==Object.keys(t).length)return!1;let n=e instanceof Date,a=t instanceof Date;if(n&&a)return e.getTime()==t.getTime();if(n!=a)return!1;let o=e instanceof RegExp,d=t instanceof RegExp;if(o&&d)return e.toString()==t.toString();if(o!=d)return!1;for(i=0;i<s.length;i++)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=0;i<s.length;i++)if(!D(e[s[i]],t[s[i]]))return!1;return!0}return!1},B=void 0!==window.IntersectionObserver,L={offset:{top:0,right:0,bottom:0,left:0},threshold:0,test:function(e,t){const{top:i,right:s,bottom:n,left:a,width:o,height:d}=e.getBoundingClientRect(),r=n,l=window.innerWidth-a,h=window.innerHeight-i,c=s,p=t.threshold*o,g=t.threshold*d;return r>t.offset.top+g&&l>t.offset.right+p&&h>t.offset.bottom+g&&c>t.offset.left+p}};class F{constructor(e,t,i){this.options=this.validate(t),this.elements=e,this.selector=i,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]},this.singlesEach={enter:[],exit:[]},B&&(this.observer=this._createObserver())}_createObserver(){const e=new IntersectionObserver(this._onIntersection.bind(this),{rootMargin:`${-1*this.options.offset.top}px ${-1*this.options.offset.right}px ${-1*this.options.offset.bottom}px ${-1*this.options.offset.left}px`,threshold:this.options.threshold});return this.elements.forEach((t=>e.observe(t))),e}_updateObserver(){this.observer.disconnect(),this.observer=this._createObserver()}_updateElementState(e,t){let i=this.current.indexOf(e),s=i>-1,n=!t&&s;t&&!s&&(this.current.push(e),this.emit("enter",e)),n&&(this.current.splice(i,1),this.emit("exit",e))}_onIntersection(e){e.forEach((e=>{const t=e.isIntersecting&&e.intersectionRatio>=this.options.threshold;this._updateElementState(e.target,t)}))}check(){return this.elements.forEach((e=>{const t=this.options.test(e,this.options);this._updateElementState(e,t)})),this}on(e,t){return this.handlers[e].push(t),this}off(e,t){return void 0===t?(this.handlers[e]=[],this.singles[e]=[],this.singlesEach[e]=[]):["handlers","singles","singlesEach"].forEach((i=>{let s=this[i][e].indexOf(t);-1!==s&&this[i][e].splice(s,1)})),this}once(e,t){return this.singles[e].unshift(t),this}onceEach(e,t){return t.triggeredOn=[],this.singlesEach[e].push(t),this}emit(e,t){for(;this.singles[e].length;)this.singles[e].pop()(t,this.selector);let i=this.singlesEach[e].length;for(;--i>-1;)-1===this.singlesEach[e][i].triggeredOn.indexOf(t)&&(this.singlesEach[e][i](t,this.selector),this.singlesEach[e][i].triggeredOn.push(t)),this.singlesEach[e][i].triggeredOn.length===this.elements.length&&this.singlesEach[e].splice(i,1);for(i=this.handlers[e].length;--i>-1;)this.handlers[e][i](t,this.selector);return this}validate(e){let t=M(!0,L);return"object"!=typeof e||Object.keys(t).forEach((i=>{e.hasOwnProperty(i)&&(t[i]=this[i].bind({options:t})(e[i]))})),t}offset(e){let t=this.options.offset;if(void 0===e)return t;const i=e=>"number"==typeof e;return["top","right","bottom","left"].forEach(i(e)?i=>t[i]=e:s=>i(e[s])?t[s]=e[s]:null),t}threshold(e){let t=this.options.threshold;return"number"==typeof e&&e>=0&&e<=1&&(t=e),t}test(e){let t=this.options.test;return"function"==typeof e&&(t=e),t}}const H=(()=>{if("undefined"==typeof window)return;let e={history:[]},t=0,i={};const s=function(e,t,i,s){let n,a=0;return"boolean"!=typeof t&&(s=i,i=t,t=void 0),function(){const e=this,o=Number(new Date)-a,d=arguments;function r(){a=Number(new Date),i.apply(e,d)}s&&!n&&r(),n&&clearTimeout(n),void 0===s&&o>100?r():!0!==t&&(n=setTimeout(s?function(){n=void 0}:r,void 0===s?100-o:100))}}(0,(()=>{e.history.forEach((t=>{e[t].check()}))}));B||(["scroll","resize","load"].forEach((e=>addEventListener(e,s))),window.MutationObserver&&addEventListener("DOMContentLoaded",(()=>{new MutationObserver(s).observe(document.body,{attributes:!0,childList:!0,subtree:!0})})));let n=(s,n,a)=>{let o;if("string"==typeof s)o=[].slice.call(document.querySelectorAll(s));else{if(s instanceof window.Node)o=[s];else{if(!(s instanceof window.NodeList||s instanceof Array))return;o=[].slice.call(s)}s=void 0===a?"Node-"+t++:a}if(e.history.indexOf(s)>-1){let t=e[s],d=t.validate(n);if(D(d,t.options))return"Node"===s.substr(0,4)||s===a?t.elements.concat(o):t.elements=o,t.observer&&t._updateObserver(),t;s+="-"+(i[s]=1+~~i[s])}return e[s]=((e,t,i)=>new F(e,t,i))(o,n,s),e.history.push(s),e[s]};return n.get=t=>e[t],n.check=()=>s(),n.is=(e,t=L)=>L.test(e,M(!0,{},L,t)),n})(),q=H;class j{constructor(e,t,i){this.logger=new p("Loading Queue","CadetBlue"),this.adLoader=t,this.registeredAdUnits=i,this.loadingAdUnits=[],this.loadedAdUnits=[],this.config=e,this.setConfig(),this.optimQueue=[],this.fastQueue=[],this.utils=new a,this.subscribeToEvents()}subscribeToEvents(){this.tokens=[],this.tokens.push(u.subscribe("adunit.destroy",((e,t)=>{this.remove(t)}))),this.tokens.push(u.subscribe("adunit.new",((e,t)=>{this.add(t)}))),this.vbChangeFunc=()=>{document.hidden||this.getLoadableAds().forEach((e=>{this.addLazyLoading(e)}))},document.addEventListener("visibilitychange",this.vbChangeFunc.bind(this),!1)}unsubscribeFromEvents(){for(let e=0;e<this.tokens.length;e++)u.unsubscribe(this.tokens[e]);document.removeEventListener("visibilitychange",this.vbChangeFunc,!1)}setConfig(){this.lazyLoadingEnabled=this.config.lazyLoading,this.loadingBlock=!1}setLoadingBlock(e){this.loadingBlock=e}add(e){e instanceof Array||(e=[e]);for(let t of e)-1===this.adUnitInArray(t,this.registeredAdUnits)&&this.registeredAdUnits.push(t),this.removeAdUnitFromArray(t,this.loadingAdUnits),this.removeAdUnitFromArray(t,this.loadedAdUnits),this.addLazyLoading(t)}remove(e){if(e&&e.parentContainerId){if(e.inViews)for(let t=0;t<e.inViews.length;t++)e.inViews[t].off("enter");this.removeAdUnitFromArray(e,this.loadingAdUnits),this.removeAdUnitFromArray(e,this.loadedAdUnits),this.removeAdUnitFromArray(e,this.registeredAdUnits)}}adUnitInArray(e,t){if(e&&t){for(let i=0;i<t.length;i++)if(t[i].container===e.container)return i;return-1}return-1}addLazyLoading(e){if(!e.loadsLazy()||q.is(e.parentDomElement)||q.is(e.domElement))!this.utils.tabIsActive()&&e.loadsLazy()||(e.beforeInView.resolve(),this.checkForLoadableAds([e]));else{let t=e.adUnitConf.options&&void 0!==e.adUnitConf.options.lazyOffset?e.adUnitConf.options.lazyOffset:this.config.lazyloadingOffset;e.inViews=[],e.inViews.push(q(e.parentContainerId,{offset:t}).once("enter",(()=>{this.logger.info({message:"entering viewport",adUnit:e.adUnitName}),this.checkForLoadableAds([e])}))),e.inViews.push(q(e.parentContainerId,{offset:2*t}).once("enter",(()=>{this.logger.info({message:"approaching viewport",adUnit:e.adUnitName}),e.beforeInView.resolve()})))}}checkForLoadableAds(e,t){let i=e;"string"==typeof e&&(e=this.utils.getAdUnitByName(e)),e||(e=this.getLoadableAds()),t||(i=this.filterBrandDayAdUnits(e),i=this.filterLoadedAds(i)),i.length>0&&(this.logger.info({message:"push to optim queue",adUnits:i.map((e=>e.adUnitName)).join(",")}),this.optimizeQueue(i,(e=>{this.waitForAdsToBeReady(e)})))}moveToFastQueue(e,t){this.fastQueue=this.fastQueue.concat(e),this.fastQeueTimeout&&clearTimeout(this.fastQeueTimeout),this.fastQeueTimeout=setTimeout((()=>{t(this.fastQueue),this.fastQueue=[]}),this.config.waitForMoreAdunits||100)}optimizeQueue(e,t){if("function"!=typeof t)return;for(let t of e)t.startLoadTime=(new Date).getTime(),this.loadingAdUnits.push(t),t.rendered.promise.then((()=>{this.removeAdUnitFromArray(t,this.loadingAdUnits),this.loadedAdUnits.push(t)}));this.queueTimeout&&clearTimeout(this.queueTimeout),this.queuedElemsWaitToLong()&&(t(this.optimQueue),this.logger.info({message:"AdUnits waited too long. So flush the queue",flushedAdunits:this.optimQueue.map((e=>e.adUnitName)).join(","),adUnitsInNextQueue:e.map((e=>e.adUnitName)).join(",")}),this.optimQueue=[]);let i=this.getFastPathAdunit(e);i.length>0&&(this.logger.info({message:"move to fastPath queue",adUnits:i.map((e=>e.adUnitName)).join(",")}),this.moveToFastQueue(i,t)),this.optimQueue=this.orderQueueByPrio(this.optimQueue.concat(e)),this.queueTimeout=setTimeout((()=>{t(this.optimQueue),this.optimQueue=[]}),this.config.waitForMoreAdunits||200)}getFastPathAdunit(e){let t=[];if(e&&e.length>0)for(let i=e.length-1;i>=0;i--)e[i].adUnitConf&&e[i].adUnitConf.options&&!0===e[i].adUnitConf.options.fastPath&&(t=t.concat(e.splice(i,1)));return t}queuedElemsWaitToLong(){for(let e of this.optimQueue)if((new Date).getTime()-e.startLoadTime>this.config.queueWaitingTime)return!0;return!1}orderQueueByPrio(e){return e.sort(((e,t)=>{let i=e.adUnitConf.options.loadPrio||0;return(t.adUnitConf.options.loadPrio||0)-i}))}getLoadableAds(){let e=[];for(let t of this.registeredAdUnits)-1===this.adUnitInArray(t,this.loadedAdUnits)&&-1===this.adUnitInArray(t,this.loadingAdUnits)&&(document.querySelector(t.parentContainerId)&&q.is(document.querySelector(t.parentContainerId))?e.push(t):(-1===this.config.alwaysLoadableAdunit.indexOf(t.adUnitName)||document.hidden||e.push(t),this.loadingBlock&&(-1!==this.config.brandDayGroup.indexOf(t.adUnitName)||this.checkWildcardAdunit(t))&&e.push(t)));return e}checkWildcardAdunit(e){for(var t=0;t<this.config.brandDayGroup.length;t++)if(-1!==this.config.brandDayGroup[t].indexOf("*")&&-1!==e.adUnitName.indexOf(this.config.brandDayGroup[t].replace("*","")))return!0}filterLoadedAds(e){return e.filter((e=>!(-1!==this.adUnitInArray(e,this.loadedAdUnits)||-1!==this.adUnitInArray(e,this.loadingAdUnits))))}filterBrandDayAdUnits(e){if(this.loadingBlock&&this.config.brandDayGroup){let t;for(let i=0;i<e.length;i++)t=e[i],-1!==this.config.brandDayGroup.indexOf(t.adUnitName)||this.checkWildcardAdunit(t)||e.splice(i,1)}return e}waitForAdsToBeReady(e){this.logger.info({message:"Waiting for ads to be ready",slot:e.map((e=>e.adUnitName)).join(",")});let t=[];for(let i of e)t.push(i.ready.promise),i.ready.promise.then((()=>{t.length>1&&this.logger.info({message:"Adunit ready waiting for others",adUnit:i.adUnitName,otherAdunits:e.filter((e=>e.adUnitName!==i.adUnitName&&"resolved"!==e.ready.status)).map((e=>e.adUnitName)).join(",")})}));Promise.all(t).then((()=>{this.requestAdUnits(e)}))}requestAdUnits(e){this.adLoader.requestAds(e)}removeAdUnitFromArray(e,t){let i=this.adUnitInArray(e,t);-1!==i&&t.splice(i,1)}checkInView(){for(let e of this.registeredAdUnits)e.loadingComplete||q(e.parentContainerId).check()}reset(){this.setConfig();for(let e=0;e<this.registeredAdUnits.length;e++)this.remove(this.registeredAdUnits[e]);this.unsubscribeFromEvents(),this.registeredAdUnits=[],this.loadingAdUnits=[],this.loadedAdUnits=[]}}class W{constructor(e){this.config=e.config,this.targeting=e.targeter.pageTargeting,this.core=e,this.utils=new a,this.logger=new p("VastGenerator","mint"),this.subscribeToEvents()}subscribeToEvents(){u.subscribe("adLoader.thirdPartyIdentifier",((e,t)=>{this.beagleId=t})),u.subscribe("adLoader.xanderIdAvailable",((e,t)=>{this.xandrId=t}))}async generateVideoAdUnit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"preroll",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"640x480",s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=new e;return await this.core.initialPageParamsReady.promise,this.logger.info({message:"create asnyc",pos:t,size:i,targeting:n}),this.core.initAdUnits([{adUnitName:"video",type:"video",targeting:n,targetContainerId:"video_vast_"+(new Date).getTime(),onRegister:e=>{e.ready.promise.then((()=>{setTimeout((()=>{let n=this.generateVast(t,i,e);a.resolve(n),"function"==typeof s&&s(n),this.logger.info({message:"vast created",vast:n})}),500)}))}}]),a.promise}generateVast(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"preroll",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=encodeURIComponent(this.generateTargetingString(Object.assign({},this.targeting,i.targeting,"&"))),n=this.getUrl(e,t)+s;if(this.config.video&&this.config.video.useGBProxy)return"https://video.gbads.net/"+("1"===this.config.adRule?"playlistAd":"wrapperAd")+`?gb_video_id=${i.targeting.videoid||""}`+`&gb_beagle_id=${this.beagleId}`+`&gb_xandr_id=${this.xandrId}`+`&gb_client_name=${this.config.pageName}&gb_playlist=`+(this.config.adRule?"true":"false")+`&gb_url=${encodeURIComponent(n)}`;if(this.config.video&&this.config.video.useGBProxyV2){let t=this.utils.CMP&&this.utils.CMP.tcData&&this.utils.CMP.tcData.tcString?this.utils.CMP.tcData.tcString:"";return"https://vast.dev.gbads.net/vast/3366?gb_language="+(this.config.pageName.includes("de-")?"de":"fr")+`&gb_site=${this.config.pageName.replace("de-","").replace("fr-","")}`+`&gb_video_pos=${e}&gb_device=`+(this.config.isMobile?"mobile_web":"web")+"&gb_category=ros_preroll"+`&gb_cust_params=${s}`+`&gb_referrer=${encodeURIComponent(document.location.href)}&gb_flag=test`+`&gb_beagle_id=${this.beagleId||""}`+`&gb_consent_string=${t}`}return n}generateTargetingString(e,t){let i=0===(t=t||"").length;for(let s in e)e.hasOwnProperty(s)&&void 0!==e[s]&&(t=i?t:t+"&",i=!1,"object"==typeof e[s]&&e[s]?Array.isArray(e[s])&&(t+=s+"="+e[s].join(",")):t+=s+"="+e[s]);return t}getUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"preroll",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"640x480",i=arguments.length>2?arguments[2]:void 0;"function"==typeof i&&this.generateVideoAdUnit(i);let s=window.location.origin||"",n=window.location.href||"",a="";this.targeting&&(a+=this.generateTargetingString(this.targeting,a));let o="";this.beagleId&&(o="&ppid="+this.beagleId),this.config.isMobile&&(a+="&adxmobile=true");let d="";return this.config.pagePath&&(d="/"===this.config.pagePath.charAt(0)?this.config.pagePath:"/"+this.config.pagePath),n=encodeURIComponent(n),a=encodeURIComponent(a),"https://pubads.g.doubleclick.net/gampad/ads?sz="+t+"&iu=/"+this.config.dfp.networkid+"/"+this.config.pageName+"/video"+d+"&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&ad_rule="+this.config.adRule+"&vpos="+e+"&plcmt=1&url="+s+o+"&description_url="+n+"&useragent="+navigator.userAgent+"&correlator="+Math.round((new Date).getTime()/1e3)+"&cust_params="+a}}class V{constructor(e){this.logger=new p("Ad Refresher","brown"),this.core=e,this.subscribeToEvents()}add(e){e.numberRefreshes=void 0===e.numberRefreshes?0:e.numberRefreshes,"resolved"===e.rendered.status?this.initViewTimer(e):e.rendered.promise.then((()=>{this.initViewTimer(e)}))}remove(e){e.willRefresh&&(clearTimeout(e.refreshTimeout),this.logger.info({message:"disabled",adUnit:e.adUnitName,container:e.container}),e.willRefresh=!1,e.forceRefresh=!1)}subscribeToEvents(){this.tokens=[],this.tokens.push(u.subscribe("adunit.destroy",((e,t)=>{t&&this.remove(t)}))),this.tokens.push(u.subscribe("adunit.new",((e,t)=>{t&&(t.refreshService=this,t.willRefresh&&this.add(t))}))),this.tokens.push(u.subscribe("adunit.visibiltyChanged",((e,t)=>{t&&t.willRefresh&&t.visibilityChanged&&this.viewabilityChange(t)})))}unsubscribeFromEvents(){for(let e=0;e<this.tokens.length;e++)u.unsubscribe(this.tokens[e])}setStatus(e,t){!1!==t?("number"==typeof t&&(e.adUnitConf.options.adRefresh.time=t),e.willRefresh=!0,this.forceRefresh(e),this.add(e),this.viewabilityChange(e)):this.remove(e)}initViewTimer(e){let t=e.adUnitConf.options.adRefresh;if(!t)return this.logger.info({message:"no refresh config available",adUnit:e.adUnitName}),!1;if(t.maxRefresh=void 0===t.maxRefresh?1:t.maxRefresh,e.numberRefreshes>=t.maxRefresh)return this.setStatus(e,!1),this.logger.info({message:"maximum refreshes reached",adUnit:e.adUnitName}),!1;let i=t.time;return this.checkSafeFrame(e)&&e.willRefresh&&!this.refreshBlockedSize(e,t)?(this.logger.info({message:"waiting to become visibile",adUnit:e.adUnitName,timeLeft:i,forceRefresh:e.forceRefresh}),e.refeshTimeLeft=i,e.refreshTimoutStart=void 0,!0):(e.willRefresh=!1,!1)}refreshBlockedSize(e,t){if(t.blockedSizes&&e.renderedSize)for(let i=0;i<t.blockedSizes.length;i++)if(t.blockedSizes[i][0]===e.renderedSize[0]&&t.blockedSizes[i][1]===e.renderedSize[1])return this.logger.info({message:"Refresh not enabled because of disabled size",size:e.renderedSize,adUnit:e.adUnitName}),!0;return!1}viewabilityChange(e){(e.refeshTimeLeft||this.initViewTimer(e))&&(e.isVisible?(this.logger.info({message:"adUnit visible",adUnit:e.adUnitName,container:e.container,timeLeft:e.refeshTimeLeft}),this.setInViewTimer(e)):e.refreshTimoutStart&&(e.refeshTimeLeft=e.refeshTimeLeft-((new Date).getTime()-e.refreshTimoutStart),this.logger.info({message:"adUnit invisible",adUnit:e.adUnitName,timeLeft:e.refeshTimeLeft}),clearTimeout(e.refreshTimeout)))}checkSafeFrame(e){let t=e.iframe;return!(!(e.isEmpty||t&&"true"===t.getAttribute("data-is-safeframe")||e.forceRefresh)&&!(t&&t.contentWindow&&t.contentWindow.document.getElementById("google_image_div"))&&!(t&&t.contentWindow&&t.contentWindow.document.querySelectorAll("[id*='dclk-studio-creative']").length>0)&&(this.logger.info({message:"Refresh not enabled because not in safeframe",adUnit:e.adUnitName}),1))}forceRefresh(e){e.forceRefresh=!0}setInViewTimer(e){e.refreshTimeout&&clearTimeout(e.refreshTimeout),isNaN(e.refeshTimeLeft)||(e.refreshTimoutStart=(new Date).getTime(),e.refreshTimeout=setTimeout((()=>{this.requestRefresh(e)}),e.refeshTimeLeft))}requestRefresh(e){e.numberRefreshes+=1;let t=document.createElement("div");t.className="ad_refreshing",t.id=e.container.replace(this.core.config.adUnitIdPrefix,"").replace(/_refresh_\d*/g,"")+"_refresh_"+e.numberRefreshes;let i=e.parentDomElement.className;e.parentDomElement.appendChild(t);let s=e.refreshCallback,n=this.core.initAdUnits([{adUnitName:e.adUnitName,targetContainerId:t.id,adHeader:e.data.adHeader,targeting:{refresh:e.numberRefreshes},callback:a=>{if(this.remove(e),a.isEmpty)n.destroy();else try{e.isRefreshed=!1,e.destroy(),n.refreshCallback=s,n.numberRefreshes=e.numberRefreshes,t.className="ad_refreshed "+i}catch(t){this.logger.error({message:"Error refreshing adunit",error:t,adUnit:e.adUnitName})}s&&"function"==typeof s&&s(a,n),n.stickyHandler&&n.isSticky&&n.stickyHandler.add(n)}}])[0];n&&(n.isRefreshed=!0)}reset(){this.unsubscribeFromEvents()}}class Q{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.url=e,this.name=i,this.targeter=t,this.abTester=new O}getTargetingForAdunit(){let t=new e;return t.resolve({}),t.promise}getTargeting(e){}setTargeting(e,t){}setupApi(){}loadLib(){this.url=0===this.url.indexOf("http")?this.url:"https:"==document.location.protocol?"https:"+this.url:"http:"+this.url;var t=document.createElement("script");t.type="text/javascript",t.src=this.url,t.async=!0,document.getElementsByTagName("head")[0].appendChild(t);let i=new e;return t.onload=()=>{i.resolve()},t.onerror=()=>{i.reject(),this.abTester.failed()},i.promise}pushPageTargeting(e){this.targeter.setPageTargeting(e)}reset(){}}N.push((e=>{e.addTargeter(J)}));class J extends Q{constructor(e){if(super("",e,"weather"),this.logger=new p("WeatherApi","blue"),this.cacheKey="tatm_weather_cache",this.utils=new a,document.location.hash.toLowerCase().includes("disableweather"))return void this.logger.info({message:"disabled"});this.logger.info({message:"created"}),this.url="https://weather.da-services.ch";let t=this.utils.getCache(this.cacheKey);t?(this.logger.info({message:"data received from cache",data:t.weather}),super.pushPageTargeting(t)):this.loadData()}loadData(){let e=(new Date).getTime();this.request=new XMLHttpRequest,this.request.open("GET",this.url,!0),this.request.addEventListener("load",(t=>{let i=(new Date).getTime()-e;this.request.status>=200&&this.request.status<300?(this.data=JSON.parse(this.request.responseText),this.utils.setCache(this.cacheKey,this.data,1),super.pushPageTargeting(this.data),this.logger.info({message:"weather data received",weather:this.data.weather,time:i})):(this.utils.setCache({status:"error"}),this.logger.warn({message:"weather data error",data:this.data,time:i}))})),this.request.addEventListener("error",(()=>{this.utils.setCache({status:"error"}),this.logger.log({message:"weather data error"})})),this.request.send()}reset(){this.request&&this.request.abort()}}N.push((e=>{e.addTargeter($)}));class $ extends Q{constructor(e){super(window.top===window?e.config.beagleUrl:e.config.beagleUrlIframe,e,"1pluxX"),this.targeter=e,this.utils=new a,this.events=u,this.beagleIdPublished=!1,this.abTester=new O,this.loadLib().then((()=>{this.abTester.success(),this.utils.onModuleAvailable("CMP",(e=>{e.onReady(((e,t)=>{this.consent=e,this.start()}))}))}),(()=>{this.abTester.failed()})).catch((e=>{console.log(e)}))}start(){this.logger=new p("Beagle","purple"),-1===document.location.hash.indexOf("noBeagle")?(this.logger.info({message:"created"}),this.initBeagleApi(),this.checkUUIDinCookie(),this.getTargeting()):this.logger.info({message:"disabled by hash"})}checkUUIDinCookie(){let e=this.utils.getCookie("dakt_2_uuid");e&&(this.beagleIdFromCookie=e,this.publishBeagleId(e))}initBeagleApi(){this.logger.info({message:"init beagle"}),window.beagleQueue=window.beagleQueue||[],window.beagleQueue.push({init:!0})}loadLib(){if(window.Dakt2){let t=new e;return t.resolve(),t.promise}return super.loadLib()}getTargeting(){setTimeout((()=>{this.getBeagleCookie().then((e=>{this.getLowLatencyTargeting(e),this.linkProfileIdWithAppnexus(e)}))}),1)}getLowLatencyTargeting(e){var t,i;if(null===(t=this.consent)||void 0===t||!t.tcString)return void this.logger.info({message:"low latency targeting not requested, no consent"});let s="1e015fe9-b61b-4f51-bfda-5498d5719ce2",n="dc323a5c-c62c-473e-9361-f9a01c30e6b3",a="https://farcaster-real-time-api.prod.tda.link/api/v2.0/external-audience-ids?user_id="+e+"&export_channel_id="+n+","+s+"&tcstring="+((null===(i=this.consent)||void 0===i?void 0:i.tcString)||"");fetch(a).then((e=>e.json())).then((e=>{let t=e.filter((e=>e.export_channel_id===n)).map((e=>e.external_audience_ids)).flat(),i=(e=JSON.parse(JSON.stringify(e))).filter((e=>e.export_channel_id===s)).map((e=>e.external_audience_ids)).flat();t.length>0&&this.events.publish("user.addsegments",{user_segments_gam:t}),i.length>0&&this.events.publish("user.addsegments",{user_segments_xandr:i}),(i.length>0||t.length>0)&&this.logger.log({message:"low latency user segments fetched",xandrSegments:i,gamSegments:t})})).catch((e=>{this.logger.info({message:"error fetching low latency user segments",error:e})}))}getBeagleCookie(){let t,i=new e;return window.Dakt2&&(t=Dakt2.getProfId(),t&&this.publishBeagleId(t)),i.resolve(t||this.beagleIdFromCookie),this.logger.info({message:"beagle id retrieved",uuid:t||this.beagleIdFromCookie,fromCookie:void 0===t}),i.promise}publishBeagleId(e){this.beagleIdPublished||(this.beagleIdPublished=!0,this.events.publish("adLoader.publisherProvidedId",[{source:"goldbach.com",uids:[{id:e,atype:1,ext:{stype:"ppuid"}}]},e],!0),this.events.publish("page.addtargeting",{gb_beagle_id:e}))}linkProfileIdWithAppnexus(e){e&&(this.logger.info({message:"link to appnexus",uuid:e}),(new Image).src="https://secure.adnxs.com/getuid?https://pexus.prod.tda.link/v1/create/$UID/"+e+"/"+encodeURIComponent(encodeURIComponent(document.location.href)))}reset(){this.beagleIdPublished=!1}}N.push((e=>{var t;"groupA"!==(null===(t=e.pageTargeting)||void 0===t?void 0:t.platform)&&-1===document.location.hash.indexOf("noPrebid")&&"1"!==s("noPrebid")&&e.addTargeter(Z)}));let G={},K=[],X=null;class Z extends Q{constructor(i){super(i.config.prebidJS,i,"prebid"),this.targeter=i,this.config=this.targeter.config,this.getViewport=t,this.pbAdunits=G,this.queuedAdunit=[],this.initWaitingQueue=[],this.pbTimeoutMS=500,this.bidCache={},this.bidderRequestCount={},this.bidCacheNative=K.filter((e=>!e.bid.inUse&&e.bid.responseTimestamp+1e3*e.bid.ttl>Date.now())),this.url=this.config.prebidJS,this.additionalAdunitIdentifier="additionalPBAdunit_",this.utils=new a,this.logger=new p("Prebid","lightskyblue"),this.libReady=this.loadLib(),this.apiReadyProm=new e,this.setupApi(),this.getApnexusID(),this.subscribeToEvents(),this.utils.onModuleAvailable("CMP",(e=>{this.CMP=e,this.CMP.onReady((e=>{this.libReady.then((()=>{this.setupPrebid()}),(()=>{this.logger.info({message:" can not load library"})}))}))}))}getApnexusID(){this.apnId||this.utils.loadJSON("https://ib.adnxs.com/getuidj?",((e,t)=>{!e&&t&&(this.apnId=t.uid),this.logger.info({message:"appnexus user id",id:this.apnId}),u.publish("adLoader.xanderIdAvailable",this.apnId,!0)}))}subscribeToEvents(){this.tokens=[],this.tokens.push(u.subscribe("adLoader.publisherProvidedId",((e,t)=>{t.length>1&&(this.uuid||"goldbach.com"!==t[0].source||(this.uuid=t[1]),this.apiReadyProm.promise.then((()=>{this.addPublisherProvidedId(t[0])})))})))}addPublisherProvidedId(e){window.pbjs.que.push((()=>{var t;let i=null===(t=pbjs.getConfig())||void 0===t?void 0:t.userSync.userIds.filter((e=>"pubProvidedId"===e.name));i?(i=i[0],i.params.eids=i.params.eids.filter((t=>t.source!==e.source)),i.params.eids.push(e),this.logger.info({message:"add publisher provided id",data:JSON.stringify(e)})):this.logger.info({message:"no publisher provided id module found",data:JSON.stringify(e)}),pbjs.refreshUserIds({submoduleNames:["pubProvidedId"]})}))}unsubscribeFromEvents(){for(let e=0;e<this.tokens.length;e++)u.unsubscribe(this.tokens[e])}setupApi(){window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],this.preconnect(),window.pbjs.que.push((()=>{this.logger.info({message:"ready"}),window.pbjs.renderAd=(e,t,i)=>{this.renderPrebid(e,t,i)},this.infoLogged||(this.logger.log({message:"prebid info",version:pbjs.version,modules:pbjs.installedModules}),this.infoLogged=!0)}))}getConsentData(){if(!this.CMP.fallback)return{cmpApi:"iab",timeout:8e3,defaultGdprScope:!0}}setPrebidConsentSettings(){window.pbjs.que.push((()=>{let e=this.getConsentData();e&&window.pbjs.setConfig({consentManagement:{gdpr:e}})}))}setupPrebid(){window.pbjs.que.push((()=>{var e,t,i;if(window.pbjs.setConfig({debugging:{enabled:!1},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},userSync:{auctionDelay:50,userIds:[{name:"pubProvidedId",params:{eids:[]}},{name:"teadsId",params:{pubId:"2535"}},{name:"id5Id",params:{partner:1475,pd:this.uuid},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}]}}),pbjs.bidderSettings={appnexus:{allowZeroCpmBids:!0}},this.setPrebidConsentSettings(),this.config.prebid&&this.config.prebid.additionalSetups)for(let e=0;e<this.config.prebid.additionalSetups.length;e++)window.pbjs.mergeConfig(this.config.prebid.additionalSetups[e]);if(null!==(e=this.config.prebid)&&void 0!==e&&e.additionalBidderSettings)for(const[e,t]of Object.entries(this.config.prebid.additionalBidderSettings))window.pbjs.bidderSettings[e]=window.pbjs.bidderSettings[e]?window.pbjs.bidderSettings[e]:{},window.pbjs.bidderSettings[e]=Object.assign(window.pbjs.bidderSettings[e],t);if(this.config.prebid&&this.config.prebid.defineAliasBidders)for(let e=0;e<this.config.prebid.defineAliasBidders.length;e++)pbjs.aliasBidder(this.config.prebid.defineAliasBidders[e].adapterName,this.config.prebid.defineAliasBidders[e].newAlias,this.config.prebid.defineAliasBidders[e].options);null!==(t=this.config.prebid)&&void 0!==t&&t.analyticsProvider&&(null===(i=this.config.prebid)||void 0===i?void 0:i.analyticsProvider.length)>0&&window.pbjs.enableAnalytics(this.config.prebid.analyticsProvider),this.apiReady=!0,this.apiReadyProm.resolve(),this.executeWaitingQueue()}))}executeWaitingQueue(){for(let e of this.initWaitingQueue)e.call(this);this.initWaitingQueue=[]}loadLib(){if(window.pbjs){let t=new e;return t.resolve(),t.promise}return super.loadLib()}generatePBAdUnitPath(e){let t=this.config.isMobile?"mobile_web":"web",i=this.config.pageName;return-1!==this.config.pagePath.indexOf("/")?i+="/"+this.config.pagePath.substr(0,this.config.pagePath.indexOf("/")):i+="/"+this.config.pagePath,i=(t+"/"+i+"/"+e.adUnitName).replace(/\//gi,"_"),i.toLowerCase()}generatePBAdUnitPathForROS(e){let t=this.config.isMobile?"mobile_web":"web",i=this.config.pageName;return i=(t+"/"+i+"/ros").replace(/\//gi,"_"),i.toLowerCase()}generatePBAdUnitPathForMainCat(e){let t=this.config.isMobile?"mobile_web":"web",i=this.getMainCat(),s=t+"_"+this.config.pageName;return s+="/"+i,s.replace(/\//gi,"_")}getMainCat(){return this.config.pagePath.replace(/^\/|\/$/g,"").split("/").filter((e=>"video"!==e))[0]}getAdunitPBOptions(e){return e.adUnitConf&&e.adUnitConf.options&&e.adUnitConf.options}initAdunitForPB(e){let t=e.pbDef,i=e.getPossibleSizesForAdunitName("appnexus");e.pbSizes=i;let s=this.generatePBAdUnitPath(e),n=this.prepareTargeting(this.targeter.pageTargeting),a={member:this.config.appnexus.member_id,invCode:s};e.pbOptions.prebid=Object.assign({},this.config.prebid.defaultConfig,e.pbOptions.prebid);let o=e.pbOptions.prebid.additionalPlacements,d=i&&i.length>0;if(!1!==e.pbOptions.prebid&&(d||o)){e.pbAdUnits=[],e.pbBids=[];let t=n.pagetype;if(this.config.prebid.callDisplay&&this.shouldCallDisplay(e,e.pbOptions,i)&&e.pbOptions.prebid.banner||e.pbOptions.prebid[t]&&e.pbOptions.prebid[t].banner)if("function"==typeof this.config.prebid.adUnitGeneratorBanner){let t=this.config.prebid.adUnitGeneratorBanner(e),s=Object.assign({},a);s.invCode=t,this.savePBAdunitToAdunit(e,this.generateBannerAdUnit(t+"_"+Math.floor(1e4*Math.random()),i,s,void 0,void 0,e))}else{if(e.pbOptions.prebid.ros){let t=this.generatePBAdUnitPathForROS(e),s=Object.assign({},a);s.invCode=t,this.savePBAdunitToAdunit(e,this.generateBannerAdUnit(t+"_"+Math.floor(1e4*Math.random()),i,s,void 0,void 0,e))}if(e.pbOptions.prebid.channel){let t=this.generatePBAdUnitPathForMainCat(e),s=Object.assign({},a);s.invCode=t,this.savePBAdunitToAdunit(e,this.generateBannerAdUnit(t+"_"+Math.floor(1e4*Math.random()),i,s,void 0,void 0,e))}}else this.logger.info({message:"no display called. Enough cache entries available",elemsInCache:this.getCacheCount(i)});if(this.config.prebid.callNative&&this.shouldCallNative(e,e.pbOptions)&&e.pbOptions.prebid.native||e.pbOptions.prebid[t]&&e.pbOptions.prebid[t].native)if("function"==typeof this.config.prebid.adUnitGeneratorNative){let t=this.config.prebid.adUnitGeneratorNative(e),i=Object.assign({},a);i.invCode=t,this.savePBAdunitToAdunit(e,this.generateNativeAdUnit(t,i,void 0,e))}else{let t=this.generatePBAdUnitPathForROS(e)+"_native",i=Object.assign({},a);i.invCode=t,this.savePBAdunitToAdunit(e,this.generateNativeAdUnit(t+"_"+Math.floor(1e4*Math.random()),i,void 0,e))}else this.logger.info({message:"no native called",elemsInCache:this.getNativeCacheCount(),nativeEnabled:this.config.prebid.callNative});if(this.config.prebid.callVideo&&e.pbOptions.prebid.video||e.pbOptions.prebid[t]&&e.pbOptions.prebid[t].video){var r;let t=this.config.prebid.mediaSettings,s=this.config.prebid.videoPlacementSettings;"function"==typeof this.config.prebid.adjustMediaTypes&&(t=this.config.prebid.adjustMediaTypes(t,e,this));let n=this.generatePBAdUnitPathForROS(e)+"_preroll",o=Object.assign({},a,{invCode:n});if(this.savePBAdunitToAdunit(e,this.generateVideoAdUnit(n,o,t,void 0,void 0,i,s,e)),(null===(r=e.pbOptions.prebid)||void 0===r?void 0:r.videoAmpliBid)>1){let n=this.getMainCat(),o=(!0===e.pbOptions.prebid.videoChannels||Array.isArray(e.pbOptions.prebid.videoChannels)&&e.pbOptions.prebid.videoChannels.includes(n)?this.generatePBAdUnitPathForMainCat(e):this.generatePBAdUnitPathForROS(e))+"_preroll",d=Object.assign({},a,{invCode:o});this.savePBAdunitToAdunit(e,this.generateVideoAdUnit(o,d,t,void 0,void 0,i,s,e))}}this.loadAdditionalAdUnits(e,!0),e.pbAdUnits.length>0?this.queuedRequest(e):(e.pbResponse=this.selectBestPBAd(e),this.handlePBLoad(e))}else t.resolve({})}shouldCallNative(e,t){return this.getNativeCacheCount()<this.config.prebid.bidCaching.maxNativeCacheCount}shouldCallDisplay(e,t,i){return this.getCacheCount(i)<this.config.prebid.bidCaching.maxDisplayCacheCount}shouldCallVideo(e,t){return!0}savePBAdunitToAdunit(e,t,i){t.config=i,e.pbAdUnits.push(t),this.pbAdunits[t.code]=e,this.logger.info({message:"add to queue",adUnit:e.getAdUnitName(),code:t.code,mediaType:Object.keys(t.mediaTypes||{}).join(","),sizes:t.sizes?t.sizes.map((e=>2===e.length?"["+e[0]+"x"+e[1]+"]":e)):"no size"})}queuedRequest(e){this.queueTimeout&&clearTimeout(this.queueTimeout),this.queuedAdunit.push(e),this.queueTimeout=setTimeout((()=>{this.requestAd(this.queuedAdunit),this.queuedAdunit=[]}),1)}requestAd(e){this.logger.info({message:"requesting ads",adUnits:e.map((e=>e.adUnitName)).join(",")});for(let t of e){t.pbTime=(new Date).getTime(),t.pbTimer&&clearTimeout(t.pbTimer);let e=this.getAdunitPBOptions(t);t.pbTimer=setTimeout((()=>{this.handlePBTimeout(t)}),e.prebid&&e.prebid.timeout?e.prebid.timeout:this.pbTimeoutMS)}pbjs.que.push((()=>{let t=e.slice();pbjs.setConfig({appnexusAuctionKeywords:this.prepareTargeting(this.targeter.pageTargeting)}),e=e.reduce(((e,t)=>e.concat(t.pbAdUnits.filter((e=>{if(this.addTargetingsToPBAdunit(t,e),!e.requested)return e.requested=!0,!0})))),[]),pbjs.requestBids({adUnits:e,bidsBackHandler:e=>{setTimeout((()=>{this.checkPBLoadedAdunits(e,t)}))}})}))}addTargetingsToPBAdunit(e,t){if(t.bids)for(let i of t.bids)i.params&&(i.params.keywords=Object.assign({},e.targeting));return t}loadAdditionalAdUnits(e,t){let i=e.adUnitConf.options,s=!1,n=this.prepareTargeting(this.targeter.pageTargeting),a=n.pagetype,o=i.prebid.additionalPlacements;if(o){let i=o.video||o[a]&&o[a].video;if(i)for(let a=0;a<i.length;a++)if(i[a].parallel===t||t&&void 0===i[a].parallel){let o=this.getNameForAdditionalAdunit(i[a],e);if(!this.pbAdunitIsRequested(e,o)&&(this.savePBAdunitToAdunit(e,this.generateVideoAdUnit(o,this.whiteListTargetings(i[a],n),i[a].mediaTypes,i[a].bidder,void 0,i[a].sizes,void 0,e),i[a].config),s=!0,!1===t))return s}let d=o.banner||o[a]&&o[a].banner;if(d)for(let i=0;i<d.length;i++)if((d[i].parallel===t||t&&void 0===d[i].parallel)&&!this.maxCountForPlacementReached(d[i])){let a=this.getNameForAdditionalAdunit(d[i],e),o=!!d[i].config&&d[i].config.sizesOptions,r=d[i].sizes?e.getPossibleSizesForAdunitName(d[i].sizes,!1,o):e.pbSizes?e.pbSizes:[];if(!this.pbAdunitIsRequested(e,a)&&r.length>0&&(this.savePBAdunitToAdunit(e,this.generateBannerAdUnit(a,r,this.whiteListTargetings(d[i],n),d[i].bidder,d[i].config,e),d[i].config),s=!0,this.increaseBidderRequestCount(d[i]),!1===t))return s}let r=o.native||o[a]&&o[a].native;if(r)for(let i=0;i<r.length;i++)if((r[i].parallel===t||t&&void 0===r[i].parallel)&&!this.maxCountForPlacementReached(r[i])){let a=this.getNameForAdditionalAdunit(r[i],e);if(!this.pbAdunitIsRequested(e,a)&&(this.savePBAdunitToAdunit(e,this.generateNativeAdUnit(a,this.whiteListTargetings(r[i],n),r[i].bidder,e,r[i]),r[i].config),s=!0,this.increaseBidderRequestCount(r[i]),!1===t))return s}}return s}maxCountForPlacementReached(e){var t,i,s;if(null!==(t=e.config)&&void 0!==t&&t.maxRequestsReached&&"function"==typeof(null===(i=e.config)||void 0===i?void 0:i.maxRequestsReached))return e.config.maxRequestsReached(e);let n=!(null===(s=e.config)||void 0===s||!s.maxRequests)&&e.config.maxRequests,a=this.bidderRequestCount[e.bidder]?this.bidderRequestCount[e.bidder]:0;return!!n&&a>=n}increaseBidderRequestCount(e){var t,i;null!==(t=e.config)&&void 0!==t&&t.increaseBidderRequestCount&&"function"==typeof(null===(i=e.config)||void 0===i?void 0:i.increaseBidderRequestCount)&&e.config.increaseBidderRequestCount(e),this.bidderRequestCount[e.bidder]=this.bidderRequestCount[e.bidder]?this.bidderRequestCount[e.bidder]+1:1}whiteListTargetings(e,t){let i=Object.assign({},e.params);if(Array.isArray(e.whiteListParams)&&e.whiteListParams.length>0){i.keywords={};for(let s in t)t.hasOwnProperty(s)&&-1!==e.whiteListParams.indexOf(s)&&(i[s]=t[s])}else!0===e.whiteListParams&&(i.keywords=t);return i}pbAdunitIsRequested(e,t){for(let i=0;i<e.pbAdUnits.length;i++)if(e.pbAdUnits[i].code===t)return!0;return!1}getNameForAdditionalAdunit(e,t){let i=e.id||e.invCode||(e.params?e.params.invCode||e.params.placementId||e.params.siteId:Math.floor(100*Math.random()));return i=i||Math.floor(100*Math.random()),i+=e.sizes?"_"+e.sizes.join("|"):"",this.additionalAdunitIdentifier+t.adUnitName+"_"+e.bidder+"_"+i}checkPBLoadedAdunits(e,t){for(let i=0;i<t.length;i++)if(this.storePrebidDataToAdunit(t[i],e),this.loadAdditionalAdUnits(t[i],!1))this.requestAd([t[i]]);else if(!t[i].pbResponse){let e=this.selectBestPBAd(t[i]);e?(t[i].pbResponse=e,this.handlePBLoad(t[i])):this.handlePBNoBid(t[i])}}storePrebidDataToAdunit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let i=0;i<e.pbAdUnits.length;i++)if(G=e.pbAdUnits[i],G.config&&"function"==typeof G.config.onBidReturn&&t[G.code]&&(t[G.code].bids=G.config.onBidReturn(t[G.code].bids)),G&&t&&t[G.code]){let i={adId:G.code,data:t[G.code]};e.pbBids=e.pbBids||[],e.pbBids.push(i);for(let t of i.data.bids)t?this.logger.log({message:"bid received",adUnit:e.getAdUnitName(),pbCode:t.adUnitCode,bidder:t.bidder,mediaType:t.mediaType,hb_pb:t.cpm,size:t.width+"x"+t.height}):this.logger.info({message:"bid filtered",adUnit:e.getAdUnitName(),pbCode:i.adId})}}selectBestPBAd(e){let t,i,s;if(e.pbBids&&e.pbBids.length>0)for(let n=0;n<e.pbBids.length;n++)if(i=e.pbBids[n],i&&i.data&&i.data.bids)for(let e=0;e<i.data.bids.length;e++)s=i.data.bids[e],s&&("native"===s.mediaType&&(s.cpm=s.cpm>20?20:s.cpm),(!t||t.cpm<s.cpm)&&(t=s));return this.getFromCache(e,t)}getFromCache(e,t){t=this.getBestDisplayAdFromCache(e,t);let i=this.getNativeFillUp(e);return i&&(!t||t&&"native"===t.mediaType)?t=this.getFromNativeCache(e,t,i):!i&&t&&"native"===t.mediaType&&(t=[t]),t&&"banner"===t.mediaType&&i&&(e.pbNativeFillup=e.pbBids.filter((e=>e.data.bids[0]&&"native"===e.data.bids[0].mediaType)).map((e=>e.data.bids[0])),e.pbNativeFillup=this.getFromNativeCache(e,e.pbNativeFillup,i)),t}getNativeFillUp(e){let t,i=this.getAdunitPBOptions(e);return t=this.config.prebid.bidCaching&&this.config.prebid.bidCaching.nativeFillUp,i&&i.prebid&&void 0!==i.prebid.nativeFillUp&&(t=i.prebid.nativeFillUp),t}handlePBLoad(e){clearTimeout(e.pbTimer),e.pbTime=(new Date).getTime()-e.pbTime,this.logger.info({message:"best ad available",adUnit:e.getAdUnitName(),code:Array.isArray(e.pbResponse)?e.pbResponse[0].adUnitCode:e.pbResponse.adUnitCode,size:e.pbResponse.size||"0x0",mediaType:Array.isArray(e.pbResponse)?e.pbResponse[0].mediaType:e.pbResponse.mediaType,cpm:Array.isArray(e.pbResponse)?e.pbResponse[0].cpm:e.pbResponse.cpm,pbTime:isNaN(e.pbTime)?"from cache":e.pbTime,bidder:Array.isArray(e.pbResponse)?e.pbResponse[0].bidder:e.pbResponse.bidder,nativeFillUp:e.pbNativeFillup?e.pbNativeFillup.length:0}),e.pbResponse&&!e.prebidFallbackInitialized&&this.initBidCaching(e),this.resolveTargeting(e)}resolveTargeting(e){let t=this.generatePBTargeting(e.pbResponse,e);"resolved"!==e.pbDef.status?e.pbDef.resolve(t):u.publish("adunit.addtargeting",{adUnit:e,data:t},!0)}initBidCaching(e){this.config.prebid.bidCaching&&this.config.prebid.bidCaching.enabled&&!e.pbBidCachingInitialized&&(e.pbBidCachingInitialized=!0,e.loadingComplete?this.checkForBidCaching(e):e.rendered.promise.then((t=>{t.isEmpty?this.checkForBidCaching(e):e.loaded.promise.then((t=>{setTimeout((()=>{this.checkForBidCaching(e)}),500)}))})))}checkForBidCaching(e){e.pbTimeout&&e.prebidFallback&&"pending"===e.rendered.status?e.rendered.promise.then((()=>{this.checkForBidCaching(e)})):e.pbBids&&e.pbBids.forEach((t=>{t.data&&t.data.bids&&t.data.bids.forEach((t=>{t&&(!Array.isArray(e.pbRenderedAd)&&t.adUnitCode!==e.pbRenderedAd||Array.isArray(e.pbRenderedAd)&&-1===e.pbRenderedAd.indexOf(t.adUnitCode)?this.addToBidCache(t,this.getPBAdunitFromBidCode(e,t.adUnitCode),e):this.removeBidFromCache(t))}))}))}addToBidCache(e,t,i){if(e.inUse=!1,"native"!==e.mediaType||this.bidExistsInCache(e)){if(!this.config.prebid.bidCaching||!this.config.prebid.bidCaching.banner||"banner"!==e.mediaType)return;{let i=e.width+"x"+e.height;this.bidCache[i]?this.bidExistsInCache(e)||this.bidCache[i].push({bid:e,pbAdunit:t}):this.bidCache[i]=[{bid:e,pbAdunit:t}]}}else this.bidCacheNative.push({bid:e,pbAdunit:t});this.logger.info({message:"unused bid",adUnit:i.getAdUnitName(),pbCode:e.adUnitCode,size:e.width+"x"+e.height,cpm:e.cpm})}removeBidFromCache(e){if("native"===e.mediaType);else{let t=e.width+"x"+e.height;this.bidCache[t]&&this.bidCache[t].forEach(((i,s)=>{i.bid.adUnitCode!==e.adUnitCode||this.bidCache[t].splice(s,1)}))}}getNativeCacheCount(){let e=0;return this.bidCacheNative&&this.bidCacheNative.length>0&&(e=this.bidCacheNative.filter((e=>e&&e.bid&&!e.bid.inUse)).length),e}getCacheCount(e){let t=0;if(this.bidCache)for(let i=0;i<e.length;i++){let s=e[i].join("x");this.bidCache&&this.bidCache[s]&&(t+=this.bidCache[s].filter((e=>e&&e.bid&&!e.bid.inUse)).length)}return t}bidExistsInCache(e){let t=!1;if("native"===e.mediaType)this.bidCacheNative.forEach((i=>{i.bid&&i.bid.adUnitCode===e.adUnitCode&&(t=!0)}));else{let i=e.width+"x"+e.height;this.bidCache[i]&&this.bidCache[i].forEach((i=>{i.bid&&i.bid.adUnitCode===e.adUnitCode&&(t=!0)}))}return t}getBestDisplayAdFromCache(e,t){let i=e.pbSizes;i=i.filter(((e,t)=>e&&i.indexOf(e)===t));let s,n=0;for(let t=0;t<i.length;t++){let a=i[t][0]+"x"+i[t][1];this.bidCache[a]&&this.bidCache[a].forEach((t=>{t&&t.bid&&!t.bid.inUse&&this.bidEligibleToRunOnAdunit(e,t)&&t.bid.cpm>n&&(n=t.bid.cpm,s=t)}))}return s&&(!t||s.bid.cpm>t.cpm)?(s.bid.inUse=!0,this.pbAdunits[s.bid.adUnitCode]=e,e.pbAdUnits.push(s.pbAdunit),e.pbBids.push({adId:s.pbAdunit.code,data:{bids:[s.bid]}}),this.logger.info({message:"using bid from cache",adUnitName:e.getAdUnitName(),code:s.bid.adUnitCode,mediaType:s.bid.mediaType,cpm:s.bid.cpm,size:s.bid.size}),s.bid):t}getFromNativeCache(e,t,i){let s=[];if(t&&(Array.isArray(t)?s=t:s.push(t)),this.bidCacheNative.sort(((e,t)=>t.bid.cpm-e.bid.cpm)),this.bidCacheNative.forEach((t=>{if(t&&t.bid&&!t.bid.inUse&&s.length<i){let i=!1;for(let e of s)if(e.creativeId===t.bid.creativeId){i=!0;break}i||(this.pbAdunits[t.bid.adUnitCode]=e,e.pbAdUnits.push(t.pbAdunit),e.pbBids.push({adId:t.pbAdunit.code,data:{bids:[t.bid]}}),t.bid.inUse=!0,s.push(t.bid),this.logger.info({message:"using bid from cache",adUnitName:e.getAdUnitName(),code:t.bid.adUnitCode,mediaType:t.bid.mediaType,cpm:t.bid.cpm,size:t.bid.size}))}})),s.length>0)return s}bidEligibleToRunOnAdunit(e,t){let i=!0;return t.pbAdunit.config&&t.pbAdunit.config.cacheEligibleFor&&(i=t.pbAdunit.config.cacheEligibleFor.reduce(((t,i)=>!0===t?t:-1!==e.adUnitName.indexOf(i)),!1)),i}getPBAdunitFromBidCode(e,t){let i;return e&&e.pbAdUnits&&e.pbAdUnits.forEach((e=>{e.code!==t||(i=e)})),i}generateBannerAdUnit(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"appnexus",n=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,o=Object.assign({},i,{user:this.getUserObject(s)});return n&&n.updateParams&&"function"==typeof n.updateParams&&([o,e]=n.updateParams(e,o)),{code:e,ortb2Imp:{ext:{gpid:a.getAdUnitPath()}},sizes:t,mediaTypes:{banner:{sizes:t}},bids:[{bidder:s,params:o}]}}generateVideoAdUnit(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"appnexus",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[[640,480]],o=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,r=Object.assign({},t,{user:this.getUserObject(s)},o);return{code:e,ortb2Imp:{ext:{gpid:d.getAdUnitPath()}},renderer:n,sizes:a,mediaTypes:i,bids:[{bidder:s,params:r}]}}generateNativeAdUnit(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"appnexus",s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,a=Object.assign({},t,{user:this.getUserObject()}),o=(null==n?void 0:n.mediaTypes)||{native:{image:{required:!0},title:{required:!0},clickUrl:{required:!0},body:{required:!0},icon:{required:!1},video:{required:!1,min_duration:0},cta:{required:!1},sponsoredBy:{required:!1}}};return{code:e,ortb2Imp:{ext:{gpid:s.getAdUnitPath()}},sizes:[[1,1]],mediaTypes:o,bids:[{bidder:i,params:a}]}}getUserObject(){if("appnexus"!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"appnexus"))return;let e={};return"0"===this.apnId&&this.uuid&&(e.externalUid=this.uuid),this.targeter.segmentTargeting&&this.targeter.segmentTargeting.user_segments_xandr&&(e.segments=this.targeter.segmentTargeting.user_segments_xandr.map((e=>(e=parseInt(e),isNaN(e)?void 0:e))).filter((e=>e))),e}initFallbackRendering(t){t.prebidFallbackInitialized=!0;let i=t.rendered,s=t.responseReceived;t.rendered=new e,t.responseReceived=new e,t.responseReceived.promise.then((e=>{this.willCallFallback(e,t)||s.resolve(e)})),t.rendered.promise.then((e=>{this.checkPBFallBack(e,t)?t.logger.info({message:"received empty response"}):i.resolve(e),this.initBidCaching(t)}))}willCallFallback(e,t){return!(!(e&&e.isEmpty&&t.pbResponse)||t.prebidFallback)}handlePBNoBid(e){clearTimeout(e.pbTimer),e.pbTime=(new Date).getTime()-e.pbTime,this.logger.info({message:"no bid received",adUnit:e.getAdUnitName(),pbTime:e.pbTime}),e.pbDef.resolve({})}getTargetingForAdunit(t){return t.pbDef=new e,t.pbOptions=this.getAdunitPBOptions(t),t.pbOptions&&!1===t.pbOptions.prebid?(this.logger.info({message:"prebid disabled for adunit",adUnit:t.getAdUnitName()}),t.pbDef.resolve(),t.pbDef.promise):(this.config.pbDisabledChannels&&-1!==this.config.pbDisabledChannels.indexOf(this.config.pagePath)?t.pbDef.resolve():(this.libReady.then(null,(()=>{t.pbDef.resolve()})),t.beforeInView.promise.then((()=>{let e=()=>{window.pbjs.que.push((()=>{this.initAdunitForPB(t)}))};this.apiReady?e():this.initWaitingQueue.push(e)}))),t.pbDef.promise)}handlePBTimeout(e){this.logger.info({message:"request timed out",adUnit:e.getAdUnitName(),time:(new Date).getTime()-e.pbTime}),e.pbTimeout=!0,e.pbResponse||(e.pbResponse=this.selectBestPBAd(e),e.pbResponse?this.handlePBLoad(e):(this.initFallbackRendering(e),e.pbDef.resolve({})))}renderPrebid(e,t,i){let s=this.pbAdunits[t];if(!s)return void this.logger.error({message:"can not find adunit",adId:t,safeframe:i});let n=s.pbAdUnits.filter((e=>e.code===t));n=1===n.length?n[0]:void 0,n&&n.config&&"function"==typeof n.config.onRender&&n.config.onRender.call(this,s),i||this.targeter.core.adRefresher.setStatus(s,!1);let a=s.pbResponse;if(Array.isArray(s.pbResponse))this.logger.log({message:"render prebid ad",adUnit:s.getAdUnitName(),code:t,fallback:s.prebidFallback||!1,environment:this.config.isMobile?"mobile":"web",bidder:s.pbResponse.map((e=>e.bidder)).join(","),mediaType:s.pbResponse.map((e=>e.mediaType)).join(","),cpm:s.pbResponse.map((e=>e.originalCpm)).join(","),fillUp:!0,fillUpFallback:s.pbNativeFillupFallback||!1}),s.pbRenderedAd=s.pbResponse.map((e=>e.adUnitCode)),e&&(e.defaultView.nativeAds=s.pbResponse);else{if("banner"===a.mediaType&&e&&e.defaultView&&e.defaultView.frameElement){let t=a.ad;e.defaultView.frameElement.width=a.width,e.defaultView.frameElement.height=a.height,e.write(t),e.close()}"video"===a.mediaType&&(i||(n.config&&"function"==typeof n.config.renderer&&n.config.renderer(s,a),a.vastImpUrl&&((new Image).src=a.vastImpUrl))),this.logger.log({message:"render prebid ad",adUnit:s.getAdUnitName(),code:t,hb_pb:s.pbResponse.cpm.toFixed(2),hb_size:s.pbResponse.size,fallback:s.prebidFallback||!1,buyerMemberId:s.pbResponse.appnexus&&s.pbResponse.appnexus.buyerMemberId?s.pbResponse.appnexus.buyerMemberId:void 0,member:JSON.stringify(s.pbResponse.appnexus),creative:s.pbResponse.creativeId,environment:this.config.isMobile?"mobile":"web",bidder:s.pbResponse.bidder,fromCache:s.pbResponse.inUse||!1}),s.pbRenderedAd=t}let o=Array.isArray(s.pbResponse)?s.pbResponse[0]:s.pbResponse;s.domElement.setAttribute("data-apn-creative",o.creativeId),s.domElement.setAttribute("data-apn-meta",JSON.stringify(o.meta)),s.domElement.setAttribute("data-apn-bidder",o.bidder)}checkPBFallBack(e,t){if(this.willCallFallback(e,t)){this.logger.info({message:"trigger another adcall with fallback",adUnit:t.getAdUnitName()}),t.prebidFallback=!0,t.setRenderPromise();let e=this.generatePBTargeting(t.pbResponse,t);return e.post_bid=!0,u.publish("adunit.addtargeting",{adUnit:t,data:e},!0),this.utils.adLoader.requestAds([t]),!0}}generatePBTargeting(e,t){let i={},s=[];if(Array.isArray(e)&&e.length>0&&(s=e,e=e[0]),e&&void 0!==e.cpm){let d=parseFloat(Math.round(10*e.cpm)/10);if(d=d>50?50:d,"native"===e.mediaType&&e.native)i={hb_adid:e.adUnitCode,hb_type:e.mediaType,hb_available_native:s.length,hb_bidder:e.bidder,hb_dealId:e.dealId,hb_auction_id:e.auctionId};else if("video"===e.mediaType){var n;if(i={hb_pb:d.toFixed(2),hb_adid:e.adUnitCode,hb_size:"640x480",hb_type:e.mediaType,hb_cache_id:e.videoCacheKey,hb_bidder:e.bidder,hb_dealId:e.dealId,hb_auction_id:e.auctionId},"video"===t.adUnitName&&null!==(n=t.pbOptions)&&void 0!==n&&n.prebid.videoAmpliBid){this.sortPbBidsByCpm(t,e);for(let e=1;e<t.pbBids.length&&e<t.pbOptions.prebid.videoAmpliBid;e++){var a,o;let s=null===(a=t.pbBids[e])||void 0===a||null===(o=a.data)||void 0===o?void 0:o.bids;s&&s[0]&&(i["hb_pb_"+(e+1)]=this.adjustCPM(s[0].cpm),i["hb_adid_"+(e+1)]=s[0].adUnitCode,i["hb_size_"+(e+1)]="640x480",i["hb_type_"+(e+1)]="video",i["hb_cache_id_"+(e+1)]=s[0].videoCacheKey,i["hb_bidder_"+(e+1)]=s[0].bidder,i["hb_dealId_"+(e+1)]=s[0].dealId,i["hb_auction_id_"+(e+1)]=s[0].auctionId)}}}else i={hb_pb:d.toFixed(2),hb_adid:e.adUnitCode,hb_size:e.width+"x"+e.height,hb_type:e.mediaType,hb_bidder:e.bidder,hb_dealId:e.dealId,hb_auction_id:e.auctionId,hb_available_native:t.pbNativeFillup?t.pbNativeFillup.length:void 0};if(this.containsBranddaySize(e))return i.hb_pb_bd=i.hb_pb,i.hb_size_bd=i.hb_size,i.hb_adid_bd=i.hb_adid,delete i.hb_pb,delete i.hb_size,delete i.hb_adid,u.publish("page.addtargeting",i,!0),{}}return i}sortPbBidsByCpm(e){e.pbBids=e.pbBids.sort(((e,t)=>t.data.bids[0].cpm-e.data.bids[0].cpm))}adjustCPM(e){return e=e>50?50:e,parseFloat(Math.round(10*e)/10).toFixed(2)}containsBranddaySize(e){let t=this.config.headerBiddingBranddaySizes;if(e&&t&&t.length>0)for(let i of t)if(e.width===i[0]&&e.height===i[1])return!0}preconnect(){let e=document.createElement("link");e.setAttribute("crossorigin","crossorigin"),e.rel="preconnect",e.href="https://ib.adnxs.com",document.head.appendChild(e)}prepareTargeting(e){let t={};if(e)for(let i in e)e.hasOwnProperty(i)&&(Array.isArray(e[i])?t[""+i]=e[i].map((e=>e.toString())):e[i]&&(t[""+i]=""+e[i]));return t}reset(){this.pbAdunits={},G={},this.bidderRequestCount={},X=this.bidCache,K=this.bidCacheNative,this.unsubscribeFromEvents()}}N.push((e=>{e.addTargeter(Y)}));class Y extends Q{constructor(e){super("https://cdn.adsafeprotected.com/iasPET.1.js",e,"ias"),this.targeter=e,this.utils=new a,this.requestQueue=[],this.queueTimeoutMS=10,this.pageTargetingSend=!1,this.start()}start(){if(this.logger=new p("IAS","coral"),this.startTime=(new Date).getTime(),document.location.hash.toLowerCase().includes("disableias"))return this.disabled=!0,void this.logger.info({message:"disabled"});this.logger.info({message:"created"}),this.abTester=new O,this.setupApi(),this.apiReady()||this.loadLib(this.url).then((()=>{this.abTester.success()}),(()=>{this.logger.info({message:"could not load library"}),this.abTester.failed()}))}apiReady(){return window.__iasPET&&window.__iasPET.VERSION}setupApi(){window.__iasPET=window.__iasPET||{},window.__iasPET.queue=window.__iasPET.queue||[],window.__iasPET.pubId=this.targeter.config.iasNetworkId,__iasPET.queue.push({adSlots:[{adSlotId:"myFakeSlot",size:[[0,0]],adUnitPath:"myFakeSlot"}],dataHandler:e=>{this.logger.info({message:"data received",data:e}),e=JSON.parse(e),this.checkPageTargeting(e)}})}getTargetingForAdunit(t){let i=new e;return t.iasDef=i,this.disabled||t.adUnitConf&&t.adUnitConf.options&&!0===t.adUnitConf.options.disableIAS||this.targeter.config.iasDisabledAdunits&&t.adUnitName.match(this.targeter.config.iasDisabledAdunits)?(this.logger.info({message:"deactivated",adUnit:t.adUnitName}),i.resolve({}),i.promise):(this.queueRequest(t),i.promise)}queueRequest(e){this.requestQueue.push(e),this.queueTimeout&&clearTimeout(this.queueTimeout),this.requestQueue.length>=20&&void 0===this.firstRequest?(this.firstRequest=!0,this.queueTimeoutMS=2e3,this.requestIAS(this.requestQueue)):this.queueTimeout=setTimeout((()=>{this.requestIAS(this.requestQueue)}),this.queueTimeoutMS)}requestIAS(e){this.logger.info({message:"request data",adunits:e.map((e=>e.adUnitName)).join(",")});let t=[];for(let i=0;i<e.length;i++){let s=e[i].getSizesConfig().sizes.dfp;!s||s.length<=0?e[i].iasDef.resolve():((e=>{e.iasTimeout=setTimeout((()=>{e.iasDef.resolve({}),this.trackWarning(e.adUnitName)}),1e3)})(e[i]),t.push({adSlotId:e[i].container,size:s,adUnitPath:e[i].adUnitPath}))}__iasPET.queue.push({adSlots:t,dataHandler:((e,t)=>{this.logger.info({message:"data received",data:t});try{t=JSON.parse(t)}catch(e){t={}}t.slots?this.addTargetingToAdunits(t.slots,t):(this.resolveAllAdunitsInCall(e),this.logger.info({message:"no data for adunits",adUnits:e.map((e=>e.adSlotId)).join(",")})),this.checkPageTargeting(t)}).bind(null,t)}),this.requestQueue=[]}addTargetingToAdunits(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(let i in e)if(e.hasOwnProperty(i)){let s=this.utils.getAdUnitByContainer(i);if(s){s.iasTimeout&&clearTimeout(s.iasTimeout);let t=e[i];s.iasDef.resolve(t)}else"myFakeSlot"===i&&super.pushPageTargeting(Object.assign({},t.brandSafety,{fr:t.fr}))}}resolveAllAdunitsInCall(e){if(e&&e.length)for(var t=0;t<e.length;t++){let i=this.utils.getAdUnitByContainer(e[t].adSlotId);i&&(clearTimeout(i.iasTimeout),i.iasDef.resolve({}))}}checkPageTargeting(e){this.pageTargetingSend||(this.pageTargetingSend=!0,super.pushPageTargeting(Object.assign({},e.brandSafety,{fr:e.fr},e.custom&&e.custom["ias-kw"]?{ias_kw:e.custom["ias-kw"]}:{})))}trackWarning(e){this.warningTracked||(this.warningTracked=!0,this.logger.log({message:"timeout received",adunit:e}))}reset(){this.pageTargetingSend=!1,this.warningTracked=!1}}N.push((e=>{e.addTargeter(ee)}));class ee extends Q{constructor(e){var t=window.location!==window.top.location?document.referrer:window.location;super("https://gs-goldbach.da-services.ch/grapeshot/?url="+encodeURIComponent(t),e,"grapeshot"),document.location.hash.toLowerCase().includes("disablegrapeshot")?this.logger.info({message:"disabled"}):(this.logger=new p("goldbachGrapeshot","Coral"),this.loc=t,this.targeter=e,this.isStory=!0,this.targeter.initialPageParamsReady.then((e=>{var t;null!==(t=this.targeter.config.grapeShotBlockedChannels)&&void 0!==t&&t.includes(TATM.pagePath)?this.logger.info({message:"channel disabled",channel:TATM.pagePath}):this.start()})))}start(){this.startTime=(new Date).getTime(),this.logger.info({message:"created"}),this.loadJSON(this.url).then((e=>{this.logger.info({message:"json retrieved"}),this.getTargeting(e)}),(()=>{}))}loadJSON(t){let i=new e;var s=new XMLHttpRequest;return s.overrideMimeType("application/json"),s.open("GET",this.url,!0),s.onreadystatechange=()=>{4===s.readyState&&(200===s.status?i.resolve(s.responseText):this.logger.log({message:"json load error",url:this.url}))},s.send(null),i.promise}getTargeting(e){try{e=JSON.parse(e)}catch(t){e={}}e&&e.channels&&e.channels.length>0&&super.pushPageTargeting({gs_cat:e.channels.map((e=>e.name))})}reset(){}}let te=null,ie=!1;N.push((e=>{e.addTargeter(se)}));class se extends Q{constructor(t){super(t.config.oneIDUrl||"https://cdn.oneid.live/sdk/oneIDSDK.js",t,"OneID"),this.utils=new a,this.events=u,this.tokens=[],this.initCalled=new e,document.location.hash.toLowerCase().includes("disableoneid")?this.logger.info({message:"disabled"}):(this.logger=new p("OneID","Coral"),this.targeter=t,this.startTime=(new Date).getTime(),this.logger.info({message:"created"}),this.subscribeToEvents(),window.OneIdSDK=window.OneIdSDK||[],this.utils.onModuleAvailable("CMP",(e=>{e.onReady(((e,t)=>{this.consent=e,ie?this.start():this.loadLib().then((()=>{ie=!0,this.start()}))}))})))}subscribeToEvents(){this.tokens.push(this.events.subscribe("hashedEmail.add",((e,t)=>{this.hashedEmail=t,this.setHem(t)})))}setHem(e){this.initCalled.promise.then((()=>{window.OneIdSDK.firstParty.attachHem(e,(e=>{try{let t=JSON.parse(e).oid;this.iDReceived(t)}catch(e){this.iDError(e)}}))}))}start(){var e;te?this.iDReceived(te):null!==(e=window.OneIdSDK)&&void 0!==e&&e.firstParty&&(this.beforeInit=(new Date).getTime(),window.OneIdSDK.firstParty.init(void 0,(()=>{this.afterInit=(new Date).getTime(),this.initCalled.resolve(),window.OneIdSDK.firstParty.getId(this.iDReceived.bind(this),this.iDError.bind(this)),this.logger.log({message:"init duration",initTime:this.afterInit-this.beforeInit})})))}iDReceived(e){te=e,this.logger.info({message:"ID received",id:e}),this.events.publish("adLoader.publisherProvidedId",[{source:"oneid.live",uids:[{id:e,atype:1,ext:{stype:"ppuid"}}]},e],!0),super.pushPageTargeting({oneid:!0})}iDError(e){this.logger.error({message:"error getting ID",error:e})}reset(){for(let e of this.tokens)this.events.unsubscribe(e)}}var ne=i(379),ae=i.n(ne),oe=i(795),de=i.n(oe),re=i(569),le=i.n(re),he=i(565),ce=i.n(he),pe=i(216),ge=i.n(pe),ue=i(589),fe=i.n(ue),me=i(429),be={};be.styleTagTransform=fe(),be.setAttributes=ce(),be.insert=le().bind(null,"head"),be.domAPI=de(),be.insertStyleElement=ge(),ae()(me.Z,be),me.Z&&me.Z.locals&&me.Z.locals,d.teadsFloor=9;let ye=document.location.href,ve=!1;const Ue=e=>e.map((e=>(!0===ve?e.cpm=44:e.dealId||(e=e.cpm<d.teadsFloor?null:e),e))),we=e=>{e.hideAdHeader()};d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{-1!==ye.indexOf("adpreview=teadshb")&&(ve=!0);let e={parallel:!0,sizes:[[1,1]],bidder:"teads",whiteListParams:[],params:{placementId:-1!==d.pageName.indexOf("de-")?162747:162748,pageId:-1!==d.pageName.indexOf("de-")?148639:148640},config:{cacheEligibleFor:["inside-full-content-end"],sizesOptions:{options:{}},onBidReturn:Ue,onRender:we}},t={parallel:!0,sizes:[[1,1]],bidder:"teads",whiteListParams:[],params:{placementId:-1!==d.pageName.indexOf("de-")?127971:127972,pageId:-1!==d.pageName.indexOf("de-")?117878:117879},config:{cacheEligibleFor:["inside-full-content"],sizesOptions:{options:{}},onBidReturn:Ue,onRender:we}},i={parallel:!0,sizes:[[1,1]],bidder:"teads",whiteListParams:[],params:{placementId:-1!==d.pageName.indexOf("de-")?126542:126548,pageId:-1!==d.pageName.indexOf("de-")?116578:116584},config:{sizesOptions:{options:{}},onBidReturn:Ue,onRender:we}};d.configUtils.addToObject(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"banner",[t]),d.configUtils.addToObject(d.adUnitOptions,["inside-full-content-end","prebid","additionalPlacements"],"banner",[e]),d.configUtils.addToObject(d.adUnitOptions,["inside-full-comment-pos","prebid","additionalPlacements"],"banner",[i]),d.configUtils.addToObject(d.adUnitOptions,["inside-full-comment-pos1","prebid","additionalPlacements"],"banner",[i])}));let Te,Ae=!1,Ce=0,Pe=document.location.href,Se="goldbach",ke=!1;new a;const Oe=function(){const e=Re(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"");return Te=window.bluebillywig.renderers.find((t=>t._id===e)),Te},Re=(e,t)=>`${e}-${t}`;let Ee,xe=(e,t)=>{if(ke)return;let i=document.getElementById(t.adUnitCode);if(!i)return;e.additionalDomElements.push(i.parentNode);const s={code:i.getAttribute("id"),vastXml:t.vastXml||t.ad};Te&&Te.bootstrap(s,i),new class{constructor(e,t,i){this.player=e,this.adUnit=t,this.bid=i,this.logger=new p("Bluebillywig","olive"),this.errorsend=!1,this.bindEvents(),this.utils=new a,this.playingStarted=!1;let s=-1!==this.adUnit.config.pageName.indexOf("de-")?"Mehr erfahren":-1!==this.adUnit.config.pageName.indexOf("fr-")?"En savoir plus":"Learn more";this.endscreen='\n    <div class="bbw_endscreen"><span class="bbw_cta">##CTATEXT##</span><span class="bbw_replay"></span></div>\n'.replace("##CTATEXT##",s),this.logger.info({message:"created",creative:this.bid.creativeId}),this.applyClose()}applyClose(){let e=document.getElementById("bbwCloseButton");e&&e.addEventListener("click",(()=>{this.close()})),"function"!=typeof window.off&&(window.off=()=>{})}close(){this.removeEndscreen();try{this.player.exit()}catch(e){console.log(e)}this.adUnit.destroy()}isVertical(){return document.body.clientWidth<document.body.clientHeight}fadeTo16to9(){var e;if(null!==(e=window.templateOptions)&&void 0!==e&&e.maxVerticalHeight)return;let t=document.body.clientWidth,i=t/16*9;i=i<370?370:i;let s=t*(i/document.body.clientHeight);window.connector.push({bannerDimension:s+"x"+i})}fadeToMaxHeight(){var e;let t=null===(e=window.templateOptions)||void 0===e?void 0:e.maxVerticalHeight;if(t){let e=9/16*t;window.connector.push({bannerDimension:e+"x"+t})}}bindEvents(){let e=!0,t={message:"performance",creative:this.bid.creativeId};this.adUnit.parentContainerId&&q(this.adUnit.parentContainerId,{offset:100}).once("enter",(()=>{console.log("enter bbw"),this.fromBS=(new Date).getTime()})),this.player&&(this.player.on("loadedmetadata",(()=>{t.loadedmetadata=isNaN(this.fromBS)?0:(new Date).getTime()-this.fromBS,this.logger.info({message:"loadedmetadata"})})),this.player.on("loadeddata",(()=>{t.loadeddata=isNaN(this.fromBS)?0:(new Date).getTime()-this.fromBS,this.logger.info({message:"loadeddata"})})),this.player.on("load",(()=>{t.load=isNaN(this.fromBS)?0:(new Date).getTime()-this.fromBS,this.logger.info({message:"load"})})),this.player.on("canplay",(()=>{t.canplay=isNaN(this.fromBS)?0:(new Date).getTime()-this.fromBS,this.logger.info({message:"canplay"})})),this.player.on("playing",(()=>{e?(e=!1,t.playing=isNaN(this.fromBS)?0:(new Date).getTime()-this.fromBS,this.logger.log(t),this.isVertical()&&this.fadeToMaxHeight()):this.fromEndscreen?(this.fromEndscreen=!1,this.player.pause()):this.removeEndscreen(),this.playingStarted=!0,this.logger.info({message:"playing"})})),this.player.on("ended",(()=>{this.isVertical()&&this.fadeTo16to9(),this.renderCustomEndscreen(),this.logger.info({message:"ended"})})),this.player.on("error",(e=>{this.errorsend||(this.errorsend=!0,this.logger.log({message:"aderror",errorType:"error",creative:this.bid.creativeId,meta:this.bid.appnexus||this.bid.meta})),this.handleError()})),this.player.on("aderror",(e=>{this.errorsend||(this.errorsend=!0,this.logger.log({message:"aderror",errorType:"aderror",creative:this.bid.creativeId,meta:this.bid.appnexus||this.bid.meta})),this.handleError()})),this.player.on("adnotfound",(e=>{this.errorsend||(this.errorsend=!0,this.logger.log({message:"aderror",errorType:"adnotfound",creative:this.bid.creativeId,meta:this.bid.appnexus||this.bid.meta})),this.handleError()})))}handleError(){this.player.exit(),this.adUnit.destroy(),this.removeEndscreen()}removeEndscreen(){this.endscreenShown&&(this.endscreenShown=!1,this.playerContainer.removeChild(this.endScreen))}renderCustomEndscreen(){this.playingStarted&&(this.endScreen=this.utils.createDomNodeFromHTML(this.endscreen.trim())[0],this.isVertical()&&(this.endScreen.className+=" vertical"),this.playerContainer=this.adUnit.domElement.parentNode.querySelector(".bbwAd"),this.playerContainer.appendChild(this.endScreen),this.endscreenShown=!0,this.fromEndscreen=!0,this.player.play(),this.playerContainer.querySelector(".bbw_replay").addEventListener("click",(e=>{e.preventDefault(),this.player.play()})))}}(window.bluebillywig.players[0],e,t)},ze=function(e){if(ke)return;let t=e[0];if(t){const e=`https://${t.publicationName||Se}.bbvms.com/r/${t.rendererCode||""}.js`;if(window.bluebillywig)Oe();else{const t=document.createElement("script");t.async=!0,t.src=e,document.getElementsByTagName("head")[0].appendChild(t),t.onload=()=>{Te=Oe()},t.onerror=()=>{}}}};function Ie(e){return e=e.map((e=>(e&&(e.mediaType="video",e.bidder="bluebillywig",e.bidderCode="bluebillywig",!0===Ae?e.cpm=100:e=e.cpm<Ce?null:e),e))),ze(e),e}function Ne(e){}function _e(){let e=arguments.length>1?arguments[1]:void 0;if(-1!==Pe.indexOf("adpreview=bbwhb")){Ae=!0,e=20239215;let t=Pe.split("adpreview=bbwhb,");t&&t.length>1&&(e=parseInt(t[1]))}return{parallel:!0,sizes:[[768,432],[640,480],[640,360],[1,1]],bidder:"bluebillywig",whiteListParams:!0,mediaTypes:{video:{context:"outstream",playerSize:[768,432],api:[1,2],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6,7,8],playbackmethod:[6]}},params:{member:3741,placementId:e,video:{context:"outstream",playback_method:"auto_play_sound_off",frameworks:[1,2,6],skippable:!1}},config:{sizesOptions:{options:{}},onBidReturn:Ie,onRender:Ne,renderer:xe}}}ke=!0,d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{-1!==d.pagePath.indexOf("sport")?Ee=-1!==d.pageName.indexOf("de-")?d.isMobile?15613876:15614106:d.isMobile?15614649:15614278:-1!==d.pagePath.indexOf("ausland")||-1!==d.pagePath.indexOf("schweiz")||-1!==d.pagePath.indexOf("regionen")?-1!==d.pageName.indexOf("de-")&&(Ee=d.isMobile?15614010:15614109):-1!==d.pagePath.indexOf("suisse-romande")||-1!==d.pagePath.indexOf("monde")||-1!==d.pagePath.indexOf("suisse")?-1!==d.pageName.indexOf("fr-")&&(Ee=d.isMobile?15614654:15614283):Ee=-1!==d.pagePath.indexOf("wirtschaft")?d.isMobile?15613887:15614107:-1!==d.pagePath.indexOf("economie")?d.isMobile?15614651:15614280:-1!==d.pagePath.indexOf("people")?-1!==d.pageName.indexOf("fr-")?d.isMobile?15614643:15614268:d.isMobile?15613828:15614101:-1!==d.pagePath.indexOf("lifestyle")?-1!==d.pageName.indexOf("fr-")?d.isMobile?15614640:15614267:d.isMobile?15613815:15614099:-1!==d.pageName.indexOf("de-")?d.isMobile?15613770:15040594:d.isMobile?15613792:15040597,d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"video",[_e("",Ee)]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-end","prebid","additionalPlacements"],"video",[_e("",Ee)]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-comment-pos","prebid","additionalPlacements"],"video",[_e("",Ee)]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-comment-pos1","prebid","additionalPlacements"],"video",[_e("",Ee)])}));const Me=-1!==document.location.href.indexOf("adpreview=ixhb"),De=e=>e.map((e=>{if(adLoader.targeter.thirdPartyTargeter[2].logger.log({message:"bid received",hb_pb:e.cpm,hb_size:e.size,hb_bidder:e.bidder}),!0===Me)e.cpm=50;else{if(e.cpm<5)return null;e.cpm>50&&(e.cpm=50)}return e}));d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{let e;e=-1!==d.pageName.indexOf("de-")?d.isMobile?507875:507799:d.isMobile?656949:656948;let t,i=[{parallel:!0,sizes:[d.isMobile?[300,250]:[970,250]],bidder:"ix",whiteListParams:[],params:{siteId:e,size:d.isMobile?[300,250]:[970,250]},config:{sizesOptions:{options:{loadingRatio:.66,checkContainerWidth:!0}},onBidReturn:De}}];t=-1!==d.pageName.indexOf("de-")?d.isMobile?656942:597479:d.isMobile?656943:656941;let s=[{parallel:!0,sizes:[[640,360]],bidder:"ix",whiteListParams:[],mediaTypes:{video:{context:"outstream",playerSize:[[640,360]],api:[1,2],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6,7,8],playbackmethod:[2]}},params:{siteId:t,size:[640,360],video:{mimes:["video/mp4","video/webm"],minduration:0,maxduration:60,protocols:[6]}},config:{onBidReturn:De,onRender:e=>{}}}];const n=[{parallel:!0,sizes:[[300,600]],bidder:"ix",whiteListParams:[],params:{siteId:e,size:[300,600]},config:{sizesOptions:{options:{loadingRatio:.66}},onBidReturn:De}},{parallel:!0,sizes:[[160,600]],bidder:"ix",whiteListParams:[],params:{siteId:e,size:[160,600]},config:{sizesOptions:{options:{loadingRatio:.66}},onBidReturn:De}}];if(d.isMobile){const t={parallel:!0,sizes:[[300,600]],bidder:"ix",whiteListParams:[],params:{siteId:e,size:[300,600]},config:{sizesOptions:{options:{loadingRatio:.66,checkContainerWidth:!0}},onBidReturn:De}};i.push(t)}else{const t={parallel:!0,sizes:[[728,90]],bidder:"ix",whiteListParams:[],params:{siteId:e,size:[728,90]},config:{sizesOptions:{options:{loadingRatio:.66,checkContainerWidth:!0}},onBidReturn:De}};i.push(t)}d.configUtils.concatArray(d.adUnitOptions,["inside-full-pos1","prebid","additionalPlacements"],"banner",i),d.configUtils.concatArray(d.adUnitOptions,["inside-full-pos2","prebid","additionalPlacements"],"banner",i),d.configUtils.concatArray(d.adUnitOptions,["inside-full-pos3","prebid","additionalPlacements"],"banner",i),d.configUtils.concatArray(d.adUnitOptions,["inside-full-pos4","prebid","additionalPlacements"],"banner",i),d.configUtils.concatArray(d.adUnitOptions,["inside-pos1","prebid","additionalPlacements"],"banner",i),d.configUtils.concatArray(d.adUnitOptions,["inside-pos4","prebid","additionalPlacements"],"banner",i),d.configUtils.concatArray(d.adUnitOptions,["inside-pos7","prebid","additionalPlacements"],"banner",i),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"video",s),d.configUtils.concatArray(d.adUnitOptions,["outside-right","prebid","additionalPlacements"],"banner",n),d.prebid.additionalSetups.push({userSync:{iframeEnabled:!0,filterSettings:{iframe:{bidders:["ix"],filter:"include"}}}})}));const Be=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;return e.map((e=>e?(window.adLoader.targeter.thirdPartyTargeter[3].logger.log({message:"bid received",hb_pb:e.cpm,hb_size:e.size,hb_bidder:e.bidder}),!0===i?e.cpm=s:e=e.cpm<t?null:e,e):null))};let Le=-1!==document.location.href.indexOf("adpreview=adf");const Fe=e=>Be(e,10,Le),He=e=>Be(e,9,Le),qe=e=>Be(e,15,Le),je=e=>Be(e,10,Le);d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{let e=null,t=null,i=null,s=null;-1!==d.pageName.indexOf("de-20minuten")?d.isMobile?(e=1908603,t=1955748,i=1908669,s=1908673):(e=1908602,t=1955747,i=1908668,s=1908672):d.isMobile?(e=1908605,t=1955783,i=1908670,s=1908675):(e=1908604,t=1955780,i=1908670,s=1908674);let n=0,a=0;const o={parallel:!0,sizes:d.isMobile?[[300,250],[320,416],[320,50],[320,160],[300,600],[336,280]]:[[994,250],[728,90],[300,250],[994,118],[970,250]],bidder:"adf",whiteListParams:[],params:{mid:e},config:{maxRequestsReached:()=>3<=n||(n++,!1),sizesOptions:{options:{loadingRatio:.6,checkContainerWidth:!0}},onBidReturn:Fe}},r={parallel:!0,sizes:[[300,600],[160,600],[500,1e3]],bidder:"adf",whiteListParams:[],params:{mid:e},config:{maxRequestsReached:()=>3<=n||(n++,!1),sizesOptions:{options:{loadingRatio:.2}},onBidReturn:Fe}},l={parallel:!0,sizes:[d.isMobile?[320,180]:[640,360]],bidder:"adf",whiteListParams:[],mediaTypes:{video:{context:"outstream",playerSize:[[640,360]],api:[1,2],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6,7,8],playbackmethod:[2]}},params:{mid:i},config:{onBidReturn:He,maxRequestsReached:()=>3<=n||(n++,!1),sizesOptions:{options:{}},onRender:e=>{}}},h={parallel:!0,sizes:[d.isMobile?[320,180]:[640,360]],mediaTypes:d.prebid.mediaSettings,bidder:"adf",whiteListParams:[],params:{mid:s},config:{onBidReturn:qe,sizesOptions:{options:{}}}},c={parallel:!0,sizes:[[1,1]],bidder:"adf",whiteListParams:[],params:{mid:t},config:{onBidReturn:je,maxRequestsReached:()=>a>=3||(a++,!1)},mediaTypes:{native:{ortb:{assets:[{id:1,required:1,title:{len:50}},{id:2,required:1,img:{type:3,wmin:300,hmin:157}},{id:3,required:0,img:{type:1,wmin:30,hmin:30}},{id:4,required:1,data:{type:2,len:150}},{id:5,required:1,data:{type:12,len:15}},{id:6,required:0,data:{type:1,len:25}}]}}}};d.configUtils.concatArray(d.adUnitOptions,["inside-pos3","prebid","additionalPlacements"],"banner",[o]),d.configUtils.concatArray(d.adUnitOptions,["outside-right","prebid","additionalPlacements"],"banner",[r]),d.configUtils.concatArray(d.adUnitOptions,["inside-pos4","prebid","additionalPlacements"],"banner",[o]),d.configUtils.concatArray(d.adUnitOptions,["inside-pos","prebid","additionalPlacements"],"banner",[o]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"video",[l]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-end","prebid","additionalPlacements"],"video",[l]),d.configUtils.concatArray(d.adUnitOptions,["video","prebid","additionalPlacements"],"video",[h]),d.configUtils.concatArray(d.adUnitOptions,["inside-pos","prebid","additionalPlacements"],"native",[c]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"native",[c]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-comment-pos","prebid","additionalPlacements"],"native",[c]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-recommender","prebid","additionalPlacements"],"native",[c])})),document.location.href;let We=-1!==document.location.href.indexOf("adpreview=groupM"),Ve=e=>e.map((e=>e?(e.bidder="groupM",adLoader.targeter.thirdPartyTargeter[3].logger.log({message:"bid received",hb_pb:e.cpm,hb_size:e.size,hb_bidder:e.bidder}),!0===We?e.cpm=50:e=e.cpm<0?null:e,e):null));d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{let e,t,i,s,n,a,o,r,l;-1!==d.pageName.indexOf("de-20minuten")?(d.isMobile?(a=20045619,r=32694673):(s=20045610,a=20045491,n=20045637,r=32693713),o=21547175,l=30412915):(d.isMobile?(a=20045694,r=32694674):(s=20045670,a=20045648,n=20045699,r=32693712),l=30412917,o=21547193);const h={parallel:!0,sizes:[[640,360]],bidder:"groupM",whiteListParams:[],mediaTypes:{video:{context:"outstream",playerSize:[[640,480]],api:[1,2],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6,7,8],playbackmethod:[2]}},params:{placementId:o,member:11010,size:[640,480],video:{mimes:["video/mp4","video/webm"],minduration:0,maxduration:60,protocols:[6]}},config:{cacheEligibleFor:["inside-full-content"],onBidReturn:Ve,onRender:e=>{}}};let c=0;t={parallel:!0,sizes:[[300,250],[994,250]],bidder:"groupM",whiteListParams:[],params:{placementId:a,member:11010},config:{maxRequestsReached:()=>2<c||(c+=1,!1),sizesOptions:{options:{loadingRatio:.6,checkContainerWidth:!0,containerOffsetWidth:40}},onBidReturn:Ve}};let p={parallel:!1,sizes:[[1,1]],bidder:"groupM",whiteListParams:[],params:{placementId:l,member:11010},config:{onBidReturn:e=>e.map((e=>(adLoader.targeter.thirdPartyTargeter[3].logger.log({message:"bid received",hb_pb:e.cpm,hb_size:e.size,hb_bidder:e.bidder}),e)))}},g={parallel:!0,sizes:[[640,480]],bidder:"groupM",whiteListParams:[],mediaTypes:d.prebid.mediaSettings,params:{member:11010,placementId:r,video:d.prebid.videoPlacementSettings.video},config:{sizesOptions:{options:{}},onBidReturn:e=>e.map((e=>(We?e.cpm=50:e=e.cpm<30?null:e,e)))}};d.configUtils.concatArray(d.adUnitOptions,["inside-pos3","prebid","additionalPlacements"],"banner",[t]),d.configUtils.concatArray(d.adUnitOptions,["inside-pos4","prebid","additionalPlacements"],"banner",[t]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"video",h),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"native",[p]),d.configUtils.concatArray(d.adUnitOptions,["video","prebid","additionalPlacements"],"video",[g]),s&&(e={parallel:!0,sizes:[[300,600]],bidder:"groupM",whiteListParams:[],params:{member:11010,placementId:s},config:{onBidReturn:Ve}},i={parallel:!0,sizes:[[500,1e3]],bidder:"groupM",whiteListParams:[],params:{member:11010,placementId:n},config:{onBidReturn:Ve}},d.configUtils.concatArray(d.adUnitOptions,["outside-right","prebid","additionalPlacements"],"banner",[e,i])),d.prebid.defineAliasBidders.push({adapterName:"appnexus",newAlias:"groupM",options:{gvlid:98}})}));let Qe=-1!==document.location.href.indexOf("adpreview=xaxis");d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{let e;e=-1!==d.pageName.indexOf("de-20minuten")?d.isMobile?15722822:15723042:d.isMobile?15722846:15723064;let t={parallel:!0,sizes:[[640,480]],bidder:"xaxis",whiteListParams:[],mediaTypes:d.prebid.mediaSettings,params:{member:9242,placementId:e,video:d.prebid.videoPlacementSettings.video},config:{sizesOptions:{options:{}},onBidReturn:e=>e.map((e=>(Qe&&(e.cpm=50),e)))}};d.configUtils.concatArray(d.adUnitOptions,["video","prebid","additionalPlacements"],"video",[t]),d.prebid.defineAliasBidders.push({adapterName:"appnexus",newAlias:"xaxis",options:{gvlid:98}})}));const Je=-1!==document.location.href.indexOf("adpreview=cwirehb");d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{let e=-1===d.pageName.indexOf("de-")?21:2,t=-1===d.pageName.indexOf("de-")?169:168;const i=d.isMobile?[[320,416],[300,250],[320,160],[320,50],[320,64],[300,600],[1,1]]:[[994,250],[970,250],[728,90],[728,250],[300,250],[1,1]];let s=[{parallel:!0,sizes:i,bidder:"cwire",whiteListParams:[],params:{placementId:t,pageId:e,domainId:213},config:{sizesOptions:{options:{onlyWidthMatters:!0}},onBidReturn:e=>Be(e,8,Je,45)}}];d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"banner",s);let n=[{parallel:!0,sizes:i,bidder:"cwire",whiteListParams:[],params:{placementId:-1===d.pageName.indexOf("de-")?425:424,pageId:e,domainId:213},config:{sizesOptions:{options:{ignoreDimensions:!0}},onBidReturn:Be}}];d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-end","prebid","additionalPlacements"],"banner",n)}));const $e=document.location.href.includes("adpreview=pubmatichb"),Ge=e=>e.map((e=>{if(!0===$e)e.cpm=50;else{if(e.cpm<5)return null;e.cpm>50&&(e.cpm=50)}return e}));d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{let e,t,i;d.pageName.includes("de-")?d.isMobile?(e="4980844",t="4980848",i="4980854"):(e="4980843",t="4980847",i="4980851"):d.isMobile?(e="4980846",t="4980850",i="4980853"):(e="4980845",t="4980849",i="4980852");const s=[{parallel:!0,bidder:"pubmatic",whiteListParams:[],params:{publisherId:"163018",adSlot:e,currency:"CHF",pubmatic_test:$e,test:1},config:{maxRequests:5,sizesOptions:{options:{loadingRatio:.66}},onBidReturn:Ge}}],n=[{parallel:!0,sizes:[[640,480]],bidder:"pubmatic",mediaTypes:{video:{playerSize:[[640,480]],context:"instream",mimes:["video/mp4"],skip:!1,playbackmethod:[2],api:[1,2],protocols:[1,2,3,4,5,6],placement:3}},whiteListParams:[],params:{publisherId:"163018",adSlot:t,currency:"CHF",pubmatic_test:$e,test:1,outstreamAU:"renderer_test_pubmatic"},config:{onBidReturn:Ge}}],a=[{parallel:!0,sizes:[[640,480]],bidder:"pubmatic",mediaTypes:{video:{playerSize:[[640,480]],context:"instream",mimes:["video/mp4"],skip:!1,playbackmethod:[2],api:[1,2],protocols:[1,2,3,4,5,6],placement:3}},whiteListParams:[],params:{publisherId:"163018",adSlot:i,currency:"CHF",pubmatic_test:$e,test:1},config:{onBidReturn:Ge}}];d.prebid.additionalSetups.push({userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}}}),d.configUtils.concatArray(d.adUnitOptions,["outside-right","prebid","additionalPlacements"],"banner",s),d.configUtils.concatArray(d.adUnitOptions,["inside-pos3","prebid","additionalPlacements"],"banner",s),d.configUtils.concatArray(d.adUnitOptions,["inside-pos","prebid","additionalPlacements"],"banner",s),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"video",n),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-end","prebid","additionalPlacements"],"video",n),d.configUtils.concatArray(d.adUnitOptions,["video","prebid","additionalPlacements"],"video",a)}));let Ke=-1!==document.location.href.indexOf("adpreview=criteo");const Xe=e=>e.map((e=>(Ke&&(e.cpm=50),e)));let Ze={1755373:-1,1755364:-1,1755365:-1};const Ye=e=>void 0!==Ze[e.params.zoneId]&&Ze[e.params.zoneId]>=1,et=e=>{Ze[e.params.zoneId]=void 0===Ze[e.params.zoneId]?1:Ze[e.params.zoneId]+=1};d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{const e={parallel:!0,sizes:[[3,3]],bidder:"criteo",whiteListParams:[],mediaTypes:{video:{playerSize:[[640,480]],context:"instream",mimes:["video/mp4"],maxduration:45,api:[1,2],protocols:[2,3],skip:0,playbackmethod:[1],plcmt:1,placement:1}},params:{zoneId:1755374},config:{sizesOptions:{options:{}},onBidReturn:e=>e.map((e=>(Ke&&(e.cpm=50),e)))}};d.configUtils.concatArray(d.adUnitOptions,["video","prebid","additionalPlacements"],"video",[e]);let t=[{size:[728,90],zoneID:1755360},{size:[300,250],zoneID:1755361},{size:[994,118],zoneID:1755363},{size:[970,250],zoneID:1755364},{size:[994,250],zoneID:1755365}];d.isMobile&&(t=[{size:[300,250],zoneID:1755367},{size:[320,416],zoneID:1755368},{size:[300,600],zoneID:1755369},{size:[320,50],zoneID:1755370},{size:[320,160],zoneID:1755371},{size:[336,280],zoneID:1755372}]);const i=[{size:[160,600],zoneID:1755359},{size:[300,600],zoneID:1755362},{size:[500,1e3],zoneID:1755366}];let s=[],n=[];for(let e=0;e<t.length;e++)s.push({parallel:!0,sizes:[t[e].size],bidder:"criteo",whiteListParams:[],params:{zoneId:t[e].zoneID},config:{maxRequestsReached:Ye,increaseBidderRequestCount:et,sizesOptions:{options:{loadingRatio:.6,checkContainerWidth:!0}},onBidReturn:Xe}});for(let e=0;e<i.length;e++)n.push({parallel:!0,sizes:[i[e].size],bidder:"criteo",whiteListParams:[],params:{zoneId:i[e].zoneID},config:{maxRequestsReached:Ye,increaseBidderRequestCount:et,onBidReturn:Xe}});let a={parallel:!0,sizes:[[2,2]],bidder:"criteo",whiteListParams:[],params:{zoneId:1755373},config:{onBidReturn:Xe,maxRequestsReached:Ye,increaseBidderRequestCount:et}};d.configUtils.concatArray(d.adUnitOptions,["outside-right","prebid","additionalPlacements"],"banner",n),d.configUtils.concatArray(d.adUnitOptions,["inside-pos","prebid","additionalPlacements"],"banner",s),d.configUtils.concatArray(d.adUnitOptions,["inside-pos","prebid","additionalPlacements"],"native",a),d.configUtils.addToObject(d.prebid,["additionalBidderSettings"],"criteo",{storageAllowed:!0}),d.prebid.additionalSetups.push({criteo:{fastBidVersion:"latest"}})})),document.location.href;let tt=0;d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{let e={parallel:!1,sizes:[[1,1]],bidder:"appnexus",whiteListParams:[],params:{placementId:-1!==d.pageName.indexOf("de-")?32588103:32900422},mediaTypes:{native:{image:{required:!0},title:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1},video:{required:!0,min_duration:0},cta:{required:!1},sponsoredBy:{required:!1},address:{required:!1}}},config:{maxRequestsReached:()=>1<tt||(tt+=1,!1),sizesOptions:{options:{}},onBidReturn:e=>e.map((e=>(e.mediaType="outstream_native",e)))}};d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-pos","prebid","additionalPlacements"],"native",[e]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-content-end","prebid","additionalPlacements"],"native",[e]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-comment-pos","prebid","additionalPlacements"],"native",[e]),d.configUtils.concatArray(d.adUnitOptions,["inside-full-recommender","prebid","additionalPlacements"],"native",[e])})),d.configUtils.addToObject(d.adUnitOptions,["inside-full-content-pos"],"prebid",{banner:!0,native:!0,timeout:1e3,nativeFillUp:1,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["inside-full-content-end"],"prebid",{banner:!0,native:!0,nativeFillUp:1,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["inside-full-top"],"prebid",{banner:!0,native:!0,channel:!0,additionalPlacements:{},timeout:1e3}),d.configUtils.addToObject(d.adUnitOptions,["inside-pos1"],"prebid",{banner:!0,native:!0,nativeFillUp:1,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["inside-pos3"],"prebid",{banner:!0,native:!0,nativeFillUp:1,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["inside-pos4"],"prebid",{banner:!0,native:!0,nativeFillUp:1,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["inside-pos7"],"prebid",{banner:!0,native:!0,nativeFillUp:1,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["inside-full-recommender"],"prebid",{banner:!1,native:!0,nativeFillUp:1,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["inside-full-comment-pos"],"prebid",{banner:!0,native:!0,nativeFillUp:1,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["inside-full-comment-pos1"],"prebid",{banner:!0,native:!0,nativeFillUp:1,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["outside-right"],"prebid",{banner:!0,native:!0,timeout:1e3,additionalPlacements:{}}),d.configUtils.addToObject(d.adUnitOptions,["video"],"prebid",{native:!1,banner:!1,video:!0,timeout:1500,additionalPlacements:{}}),d.adUnits={"inside-full-top":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[300,200],[320,50],[320,64],[320,160],[728,90],[728,250],[970,250],[994,118],[994,250],[994,500],[994,560],[760,190],[336,280],[1200,250],[1200,500]],appnexus:[[994,500],[994,250],[994,118],[970,250],[728,250],[320,160],[320,64],[320,50],[300,200],[1500,600],[994,560],[300,250]]}},"inside-top":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[300,200],[320,50],[320,64],[320,160],[728,90],[728,250],[970,250],[994,118],[994,250],[994,500],[994,560]],appnexus:[[994,500],[994,250],[994,118],[970,250],[728,250],[320,160],[320,64],[320,50],[300,200],[1500,600],[994,560]]}},"inside-full-brandday":{options:{loadingRatio:.66},sizes:{dfp:[[320,160],[994,250],[1200,250]],appnexus:[]}},"inside-brandday":{options:{loadingRatio:.5},sizes:{dfp:[[320,160],[994,250],[1200,250],[994,500],[728,250]],appnexus:[]}},"inside-full":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[320,416],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[760,420],[300,600],[1200,250],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,416],[320,50],[320,64],[300,600],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800]]},blockedSizes:{dfp:[[960,800],[828,910]],appnexus:[[960,800],[828,910]]}},"inside-pos":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[320,416],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[300,600],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,416],[320,50],[320,64],[300,600],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800]]}},"inside-full-content":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[320,416],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,50],[320,64],[320,416],[320,480]]},forcedSizes:{all:[],mobile:[[828,910],[300,600],[300,250]],desktop:[[960,800]]}},"inside-content":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,50],[320,64]]},forcedSizes:{all:[],mobile:[[]],desktop:[[]]}},"inside-half":{sizes:{dfp:[[468,400],[480,240]],appnexus:[[468,400],[480,240]]}},gallery:{sizes:{dfp:[[468,400]],appnexus:[[468,400]]}},"inside-quarter":{sizes:{dfp:[[300,250]],appnexus:[[300,250]]}},"outside-right-pos":{sizes:{dfp:[],appnexus:[]}},"outside-right":{options:{percentageViewable:50},sizes:{dfp:[[160,600],[245,770],[300,600],[500,1e3]],appnexus:[[160,600],[245,770],[300,600],[500,1e3]]}},"outside-left":{sizes:{dfp:[[160,601],[300,601],[160,600]],appnexus:[]}},"content-ad":{sizes:{dfp:[[1,1]],appnexus:[]}},video:{sizes:{dfp:[],appnexus:[]},forcedSizes:{all:[[640,480]]}},overlay:{sizes:{dfp:[[300,250],[300,600],[320,480],[320,416],[160,600]]}},"outside-anchor-bottom":{sizes:{dfp:[[320,50],[320,100],[728,90],[970,250],[994,118],[994,250],[970,90],[980,90],[990,90]]}},"inside-full-pos1":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[320,416],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[760,420],[300,600],[1200,250],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,416],[320,50],[320,64],[300,600],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800]]},blockedSizes:{dfp:[],appnexus:[]}},"inside-full-pos3":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[320,416],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[760,420],[300,600],[1200,250],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,416],[320,50],[320,64],[300,600],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800]]},blockedSizes:{dfp:[],appnexus:[]}},"inside-full-pos5":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[320,416],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[760,420],[300,600],[1200,250],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,416],[320,50],[320,64],[300,600],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800]]},blockedSizes:{dfp:[],appnexus:[]}},"inside-pos3":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[320,416],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[300,600],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,416],[320,50],[320,64],[300,600],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800]]},blockedSizes:{dfp:[],appnexus:[]}},"inside-pos5":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[320,416],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[300,600],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,416],[320,50],[320,64],[300,600],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800]]},blockedSizes:{dfp:[[320,480]],appnexus:[[320,480]]}},"inside-pos6":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[320,416],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[300,600],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,416],[320,50],[320,64],[300,600],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800]]},blockedSizes:{dfp:[],appnexus:[]}},"inside-full-comment":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[320,416],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[760,420],[300,600],[1200,250],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,416],[320,50],[320,64],[300,600],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800],[320,416],[300,250]]},blockedSizes:{dfp:[[960,800],[828,910]],appnexus:[[960,800],[828,910]]}},"inside-full-content-pos3":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[320,416],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,50],[320,64],[320,416],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800],[320,416]]},blockedSizes:{dfp:[],appnexus:[]}},"inside-full-content-pos5":{options:{loadingRatio:.66},sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[320,416],[320,480]],appnexus:[[926,245],[994,250],[970,250],[728,90],[728,250],[300,100],[300,250],[320,160],[320,50],[320,64],[320,416],[320,480]]},forcedSizes:{all:[],mobile:[[828,910]],desktop:[[960,800],[320,416]]},blockedSizes:{dfp:[],appnexus:[]}},"inside-full-content-end":{sizes:{dfp:[[300,250],[320,50],[320,64],[320,160],[336,280],[728,90],[728,250],[970,250],[994,118],[994,250],[320,416],[300,600]],appnexus:[[994,250],[970,250],[728,90],[728,250],[300,250],[320,160],[320,50],[320,64],[320,416],[300,600]]},blockedSizes:{dfp:[[960,800],[828,910]],appnexus:[[960,800],[828,910],[320,416]]}},"inside-full-recommender":{sizes:{dfp:[[1,1],[300,250]],appnexus:[]}},"paid-inside":{sizes:{dfp:[[1,1],[300,250]],appnexus:[[300,250]]}},"inside-full-sticky":{sizes:{dfp:[[1,1]],appnexus:[]}},"inside-sticky":{sizes:{dfp:[[1,1]],appnexus:[]}},"outside-full-welcome":{sizes:{dfp:[[1200,250],[994,250],[300,250]],appnexus:[]}},"outside-welcome":{sizes:{dfp:[[1200,250],[994,250],[300,250]],appnexus:[]}},"partner-ad":{sizes:{dfp:[[1,1],[320,180],[200,250],[176,250],[294,250],[250,250],[309,250]],appnexus:[]}},"inside-gallery":{sizes:{dfp:[[1,1],[300,250]],appnexus:[[300,250]]}}},d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{-1===d.pagePath.indexOf("spiele")&&-1===d.pagePath.indexOf("tous-les-jeux")||(d.adUnits["inside-full-top"].sizes.dfp=o.removeSize([1200,500],d.adUnits["inside-full-top"].sizes.dfp),d.adUnits["inside-full-top"].sizes.appnexus=o.removeSize([1200,500],d.adUnits["inside-full-top"].sizes.appnexus))})),d.customTargeting={fwb:document.body&&document.body.clientWidth&&document.body.clientWidth>=1500},d.adUnitOptions["outside-right"].sticky.easySticky={stickyElem:"#outside-right"},d.adUnitOptions["outside-right"].adHeader=!1,d.adUnitOptions["outside-left"].adHeader=!1,d.adUnitOptions["inside-full-sticky"]={lazyLoading:!1,adHeader:!1,fastPath:!0,prebid:!1,initStyle:"display:none"},d.configUtils.addToObject(d.adUnitOptions,["inside-full-comment-pos"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-full-comment-pos1"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-full-pos1"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-full-pos1"],"containerOffsetWidth",24),d.configUtils.addToObject(d.adUnitOptions,["inside-full-pos2"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-full-pos2"],"containerOffsetWidth",24),d.configUtils.addToObject(d.adUnitOptions,["inside-full-pos3"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-full-pos3"],"containerOffsetWidth",24),d.configUtils.addToObject(d.adUnitOptions,["inside-full-pos4"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-full-pos4"],"containerOffsetWidth",24),d.configUtils.addToObject(d.adUnitOptions,["inside-full"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-full"],"containerOffsetWidth",24),d.configUtils.addToObject(d.adUnitOptions,["inside-full-content-pos"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-full-content-pos"],"loadingRatio",.4),d.configUtils.addToObject(d.adUnitOptions,["inside-full-content-end"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-full-content-end"],"loadingRatio",.4),d.configUtils.addToObject(d.adUnitOptions,["inside-full-recommender"],"adHeader",!1),d.configUtils.addToObject(d.adUnitOptions,["inside-full-recommender"],"positioningHelper",(e=>{e.parentDomElement.className+=" Teaser_teaser__3rdot Teaser_siteAreaNews__Kz7OG"})),d.adUnitOptions["inside-full-brandday"]={adHeader:!1,checkContainerWidth:!0,prebid:!1,fastPath:!0},d.adUnitOptions["outside-full-welcome"]={adHeader:!1,checkContainerWidth:!0,prebid:!1,fastPath:!0},d.adUnitOptions["outside-right"].percentageViewable=86,d.getDesktopContentWidth=()=>{let e,t;if(e=d.pageOptions&&d.pageOptions.contentWrapperClass?document.querySelector("."+d.pageOptions.contentWrapperClass):document.querySelector("section, .pg3-content.container"),e)return t=e.offsetLeft,e.offsetWidth+t},d.customKVProcessing={duration:e=>(e=parseInt(e),isNaN(e)||(e=e<=9?"XS":e<=15?"S":e<=29?"M":e<=59?"L":e<=119?"XL":"XXL"),e),content_category:e=>{let t=[];for(let i in e)i&&e.hasOwnProperty(i)&&t.push(e[i]);return t}},d.waitForMoreAdunits=10,d.queueWaitingTime=100,d.beagleUrl="https://beagle.prod.tda.link/scripts/20min-spa/beagle.min.js",d.delayNotAlwaysLoadableAdsUntilPageReady=!0,d.adRule="1",d.loggingProbability=parseFloat("0.995");d.CMP=class{constructor(t){this.config=t,this.readyPromise=new e,this.ready=this.readyPromise.promise,this.consent=!0,this.fallback=!0,this.cookieName="eupubconsent-v2",this.timeoutMS=5e3,this.tries=0,this.consentStart=(new Date).getTime(),this.consentType="tcf2",this.cookieDomain=t.cmpCookieDomain||document.domain.split(".").reverse().splice(0,2).reverse().join("."),this.utils=new a,this.ready.then((e=>{if(this.logger.info({message:"consent ready",result:JSON.stringify(e)}),this.tcData){let e={gdpr:this.tcData.gdprApplies};u.publish("page.addtargeting",e,!0)}})),this.logger=new p("CMP","brown"),this.logger.info({message:"ready"}),this.init()}init(){this.getConsent(),this.fallbackTimeout=setTimeout((()=>{this.readyPromise.resolve(!1)}),this.timeoutMS)}getConsent(){window.__tcfapi?__tcfapi("ping",2,(e=>{e&&!e.cmpLoaded?__tcfapi("addEventListener",2,((e,t)=>{"cmpuishown"===(null==e?void 0:e.eventStatus)&&(this.bannerShown=!0,this.logger.info({message:"banner shown"})),this.handleResponse(e,t)})):this.retrieveFromApi()})):this.tries<3?(this.tries+=1,setTimeout((()=>{this.getConsent()}),50)):(this.logger.log({message:"cmp not available"}),this.readyPromise.resolve(!1))}isReady(){return"resolved"===this.readyPromise.status}retrieveFromApi(){window.__tcfapi("getTCData",2,((e,t)=>{this.handleResponse(e,t)}))}handleResponse(e,t){var i,s,n,a;if(this.fallback=!1,clearTimeout(this.fallbackTimeout),this.logger.info({message:"response received",data:e}),!e)return;t?(this.tcData=e,this.readyPromise.resolve(this.tcData),this.consentReadyTS=(new Date).getTime()):this.readyPromise.resolve(!1);let o=(null===(i=e.vendor)||void 0===i?void 0:i.consents)||{},d=!(null===(s=e.vendor)||void 0===s||!s.consents||null===(n=e.vendor)||void 0===n||!n.consents[755]),r=new Array(11).fill(0);if(null!==(a=e.purpose)&&void 0!==a&&a.consents)for(const[t,i]of Object.entries(null===(l=e.purpose)||void 0===l?void 0:l.consents)){var l;r[t-1]=i?1:0}let h=Object.keys(o).length,c=r&&0===r[10]&&!r.every((e=>0===e))&&h>0&&h<4202;this.logger.log({message:"consent count",count:h,gamConsent:d,purposeConsent:r,badConsent:c,...c&&{tcString:e.tcString}}),c&&this.purgeConsent()}purgeConsent(){var e;null===(null===(e=sessionStorage)||void 0===e?void 0:e.getItem("cp"))&&(this.utils.deleteCookie(this.cookieName,null,this.cookieDomain),sessionStorage.setItem("cp","1"),this.logger.log({message:"consent purged"}))}onReady(e){let t=this;this.isReady()?"function"==typeof e&&e(this.tcData,this.fallback):this.ready.then((function(){"function"==typeof e&&e(t.tcData,t.fallback)}))}getResultById(t,i){let s=new e;return this.ready.then((()=>{"function"==typeof i&&s.resolve()})),s.promise}},d.waitForMoreAdunits=100,d.prebidJS="https://tdn.da-services.ch/libs/prebid8.51.0.js",d.adUnits["inside-full-top"].sizes.dfp=d.configUtils.removeSize([994,500],d.adUnits["inside-full-top"].sizes.dfp),d.adUnits["inside-full-top"].sizes.appnexus=d.configUtils.removeSize([994,500],d.adUnits["inside-full-top"].sizes.appnexus),d.adUnitOptions["inside-pos"]=d.adUnitOptions["inside-full"],d.adUnitOptions["inside-pos1"]=d.adUnitOptions["inside-pos"],d.adUnitOptions["inside-pos3"]=d.adUnitOptions["inside-pos"],d.adUnitOptions["inside-pos4"]=d.adUnitOptions["inside-pos"],d.adUnitOptions["inside-pos7"]=d.adUnitOptions["inside-pos"],d.adUnitOptions["inside-top"]=d.adUnitOptions["inside-full-top"],d.adUnitOptions["inside-sticky"]=d.adUnitOptions["inside-full-sticky"],d.adUnitOptions["outside-welcome"]=d.adUnitOptions["outside-full-welcome"],d.adUnitOptions["inside-brandday"]=d.adUnitOptions["inside-full-brandday"],d.adUnitOptions["inside-top"].containerOffsetWidth=5,d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{d.specialAdunits=[]})),d.configUtils.addToObject(d.adUnitOptions,["outside-right"],"adRefresh",{time:4e4,maxRefresh:1}),d.configUtils.addToObject(d.adUnitOptions,["inside-gallery"],"lazyLoading",!1),d.configUtils.addToObject(d.adUnitOptions,["inside-gallery"],"prefetching",!0),d.configUtils.addToObject(d.adUnitOptions,["partner-ad"],"checkContainerWidth",!0),d.onAdunitRegister=e=>{let t=!0;-1!==e.adUnitName.indexOf("outside")?t=!1:e.sizes.forEach((i=>{i&&i.length>1&&i[0]>=728&&e.containerSize.height<=200&&(t=!1)})),e.events.publish("adunit.addtargeting",{adUnit:e,data:{eligibleForCrass:t}})},d.alwaysLoadableAdunit=["outside-right","inside-brandday","inside-top","outside-welcome"],d.onTATMInit=d.configUtils.appendToFunction(d.onTATMInit,(()=>{const e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);d.configUtils.addToObject(d.adUnitOptions,["inside-pos"],"checkContainerWidth",!0),d.configUtils.addToObject(d.adUnitOptions,["inside-pos"],"checkContainerHeight",e>=768),"spiele"!==d.pagePath&&d.configUtils.addToObject(d.adUnitOptions,["inside-top"],"checkContainerWidth",!0)})),d.configUtils.addToObject(d.adUnitOptions,["video","prebid"],"videoChannels",["people","serien","spiele","sport","wissen","nos-videos","science-et-nature","sports","tous-les-jeux","video-buzzs"]),d.configUtils.addToObject(d.adUnitOptions,["video","prebid"],"videoAmpliBid",2),d.delayNotAlwaysLoadableAdsUntilPageReady=!1,d.customTargeting=d.customTargeting||{},d.getNaviHeight=()=>{let e;return top&&top.matchMedia("(max-width:1024px)").matches?(e=top.document.querySelector("nav .khMlNj"),e?e.offsetHeight:48):(e=top.document.querySelector("header, nav>div:nth-child(1)"),e?e.offsetHeight:0)};let it=Math.random()>=.97?"groupA":"groupB";d.customTargeting.platform=it,d.additionalLogging={group:it},-1!==navigator.userAgent.indexOf("native-20min")&&(d.additionalLogging={isWebview:!0});const st=d;window.adLoader=window.adLoader?window.adLoader:new class{constructor(t){if(this.config=t,this.registeredAdUnits=[],this.logger=new p("core","black",t),this.disabled=!1,this.config.disabled)return this.disabled=!0,void this.logger.info({message:"disabled"});this.initialPageParamsReady=new e,this.pageReady=this.getPageReadyPromise(),this.logger.info({message:"adLoader created"}),this.siteIsBlocked()||(this.initPage(),this.initModules(),this.abTester=new O,this.subscribeToEvents())}async initSpecialAdUnits(){await this.initialPageParamsReady.promise;for(let e of this.config.specialAdunits)e.adUnitName&&e.type&&this.initAdUnits([{adUnitName:e.adUnitName,type:e.type,options:e.options||{}}])}getPageReadyPromise(){let t=new e;return this.config.delayNotAlwaysLoadableAdsUntilPageReady&&!0===this.config.delayNotAlwaysLoadableAdsUntilPageReady||t.resolve(),this.pageReadyPromTimeout&&clearTimeout(this.pageReadyPromTimeout),this.pageReadyPromTimeout=setTimeout((()=>{"resolved"!==t.status&&(t.resolve(),this.logger.error({message:"pageReady not called"}))}),1e4),t}subscribeToEvents(){}siteIsBlocked(){let e=!1;if(this.config.disabledLocations)for(let t=0;t<this.config.disabledLocations.length;t++)-1!==document.location.href.indexOf(this.config.disabledLocations[t])&&(e=!0);return"function"==typeof this.config.customBlockDetection&&(e=e||this.config.customBlockDetection()),e&&this.logger.info({message:"adLoader is deactivated on that site",site:document.location.href}),e}initPage(){this.initialPageParamsReady.promise.then((()=>{this.initPagePath()})),this.config.isMobile=-1!==navigator.userAgent.toLocaleLowerCase().indexOf("mobile")}initPagePath(){this.config.pagePath?this.config.pagePath=this.config.pagePath.replace(/^\/{0,1}ro\//,"").replace(/^\/|\/$/gi,"").toLocaleLowerCase():this.config.pagePath=""}initModules(){this.config.CMP&&(this.CMP=new this.config.CMP(this.config)),this.targeter=new _(this),this.adLoader=new z(this),this.loadingQueue=new j(this.config,this.adLoader,this.registeredAdUnits),this.vastUrlGenertor=new W(this),this.adRefresher=new V(this),window.TATM=new class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.logger=new p("TATM_API","indigo"),this.initialized=!1,R)return R;this.adLoader=e.adLoader,this.parentCore=e,this.queue=t,this.initSpies(),this.core={initAdUnits:e=>{this.initAdUnits(e)},getViewportDimension:()=>this.parentCore.getViewport()},this.helper={removeEvent:()=>{console.log("TATM helper removeEvent called")},getScrollTop:()=>{if("undefined"!=typeof pageYOffset)return pageYOffset;{let e=document.body,t=document.documentElement;return t=t.clientHeight?t:e,t.scrollTop}},addPageTargeting(e,t){R.addPageTargeting(e,t)}},R=this}initQueue(){this.queue&&this.executeQueue(),this.push=e=>{"function"==typeof e&&e.call()}}executeQueue(){for(let e=0;e<this.queue.length;e++)"function"==typeof this.queue[e]&&this.queue[e].call()}initSpies(){this.spyOnTATMVariable("pageTargeting",(e=>{this.parentCore.targeter.setPageTargeting(e)}),(()=>this.parentCore.targeter.pageTargeting)),this.spyOnTATMVariable("blockLazyAds",(e=>{this.parentCore.disableLazyAds(e)})),this.spyOnTATMVariable("loadingBlock",(e=>{})),this.spyOnTATMVariable("brandDay",(e=>{this.parentCore.handleBrandDay(e)})),this.spyOnTATMVariable("allowRefresh",(e=>{this.parentCore.updateRefreshOptions(e)})),this.spyOnTATMVariable("blockSticky",(e=>{e&&this.parentCore.updateStickyParams({disableSticky:!0})}));let e=[];this.spyOnTATMVariable("scrollingElement",(t=>{-1===e.indexOf(t)&&(e.push(t),t.addEventListener("scroll",(()=>{this.parentCore.loadingQueue.checkInView()})))}));let t={};this.spyOnTATMVariable("stickyParams",(e=>{e&&(t=e)}),(()=>t)),this.spyOnTATMVariable("gptadslots",(()=>{}),(()=>this.parentCore.registeredAdUnits))}enable(){"function"==typeof tatmIsLoaded&&tatmIsLoaded(),this.initQueue()}adUnitIsInitialized(e){return R.parentCore.adUnitNameIsRegistered(e)}adUnitIsEmpty(e){let t=R.parentCore.getAdunitByName(e);if(t)return t.isEmpty}spyOnTATMVariable(e,t,i){let s;Object.defineProperty(this,e,{get:function(){if(i)return i();this.logger.log({message:"TATM var called but not managed"})},set:function(e){s=e,"function"==typeof t&&t(e)}})}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;R.initialized&&(R.timeSinceLastUpdate=new Date,this.logger.setLoggingStart(R.timeSinceLastUpdate),e===R.pageName&&t===R.pagePath&&JSON.stringify(R.pageTargeting)===JSON.stringify(i)||(R.parentCore.config.pagePath=R.pagePath=t,R.parentCore.config.pageName=R.pageName=e,R.parentCore.cleanView())),R.parentCore.config.pageName=R.pageName=R.parentCore.config.pageName?R.parentCore.config.pageName:e,R.parentCore.config.pagePath=R.pagePath=R.parentCore.config.pagePath?R.parentCore.config.pagePath:t,R.parentCore.config.pageOptions=R.pageOptions=a||R.parentCore.config.pageOptions,R.parentCore.config.pageTargeting=R.pageTargeting=i,s&&(R.parentCore.config.adHeader=R.adHeader=s),R.parentCore.config.desktopContentWidth=R.desktopContentWidth=n,"function"==typeof R.parentCore.config.getDesktopContentWidth&&(R.parentCore.config.desktopContentWidth=R.desktopContentWidth=R.parentCore.config.getDesktopContentWidth(n));let o={message:R.initialized?"update View":"initialized",pageName:R.pageName,pagePath:R.pagePath,pageTargeting:JSON.stringify(i),adHeader:s,contentWidth:R.parentCore.config.desktopContentWidth};R.logger.info(o),R.dataReady=!0,R.parentCore.initialPageParamsReady.resolve(i),"function"==typeof R.parentCore.config.onTATMInit&&R.parentCore.config.onTATMInit.call(),R.lastViewUpdate=new Date,R.initialized=!0}initAdUnits(e){if("resolved"!==R.parentCore.initialPageParamsReady.status&&!R.dataReady)return R.logger.info({message:"TATM.initAdUnits(...) called before TATM.init(...). Wait until TATM is ready.",adUnits:e.map((e=>e.adUnitName))}),void R.parentCore.initialPageParamsReady.promise.then((()=>{R.initAdUnits(e)}));if(this.parentCore.config.delayNotAlwaysLoadableAdsUntilPageReady&&"resolved"!==this.parentCore.pageReady.status){let t=[];for(let i=e.length-1;i>=0;i--)-1===this.parentCore.config.alwaysLoadableAdunit.indexOf(e[i].adUnitName)&&t.push(e.splice(i,1)[0]);t.length>0&&this.parentCore.pageReady.promise.then((()=>{this.initAdUnits(t)}))}R.parentCore.initAdUnits(e)}displayAds(e){}updateView(e,t,i,s,n,a){R.init(e,t,i,s,n,a)}disable(){R.parentCore.cleanView()}getVastUrl(){return R.parentCore.vastUrlGenertor.getUrl(...arguments)}getVast(){return R.parentCore.vastUrlGenertor.generateVideoAdUnit(...arguments)}setMigrationFlag(e){}addPageTargeting(e,t){let i={};i[e]=t,R.parentCore.targeter.setPageTargeting(i)}setSticky(e,t){R.parentCore.setSticky(e,t)}pageReady(){this.logger.info({message:"page ready"}),this.parentCore.pageReady.resolve()}attachHEM(e){this.logger.info({message:"HEM attached",HEM:e}),this.parentCore.attachHEM(e)}reset(){this.dataReady=!1}}(this,window.TATM),this.enabledCalled||(this.enabledCalled=!0,window.TATM.enable()),this.utils=new a,this.utils.setModules(this),this.initSpecialAdUnits()}initAdUnits(e){if(this.disabled)return;let t=[];for(let i of e){if(this.adUnitRegistered(i)){this.logger.warn({message:"Adunit initialized twice",adUnit:i.adUnitName,container:i.targetContainerId});continue}let e=new P({data:i,adLoader:this.adLoader,config:this.config});e&&e.adUnitName&&(this.registerAdUnitToServices(e),e.adUnitConf&&e.adUnitConf.options&&(i.adHeader&&!1!==e.adUnitConf.options.adHeader&&(e.adUnitConf.options.adHeader=i.adHeader),"function"==typeof e.adUnitConf.options.onRegister&&e.adUnitConf.options.onRegister.call(this,e),"function"==typeof this.config.onAdunitRegister&&this.config.onAdunitRegister.call(this,e))),t.push(e)}return t}adUnitRegistered(e){if(e.type&&["video","interstitial","anchor"].includes(e.type))return!1;for(let t of this.registeredAdUnits)if(e.targetContainerId===t.data.targetContainerId)return!0;return!1}adUnitNameIsRegistered(e){for(let t of this.registeredAdUnits)if(e===t.data.adUnitName)return!0;return!1}getAdunitByName(e){for(let t of this.registeredAdUnits)if(e===t.data.adUnitName)return t}registerAdUnitToServices(e){u.publish("adunit.new",e,!0)}triggerAdUnitRefresh(e){this.disabled||this.registerAdUnitToServices(e)}getViewport(){return t()}setServiceStatus(e){this.disabled=e}disableLazyAds(e){this.loadingQueue.setLoadingBlock(e),this.logger.info({message:"disabled lazy ads",allowedAds:this.config.brandDayGroup})}updateStickyParams(e){for(let t of this.registeredAdUnits)if(e.adContainer||e.adUnitName){if(t.stickyHandler&&(t.parentDomElement===e.adContainer||t.adUnitName===e.adUnitName))return void t.stickyHandler.updateParams(t,e)}else t.stickyHandler&&t.stickyHandler.updateParams(t,e);this.logger.log({message:"sticky params called with not assigned container",params:JSON.stringify(e)})}updateRefreshOptions(e){for(let t of this.registeredAdUnits)if(t.willRefresh&&e)return void this.adRefresher.forceRefresh(t)}handleBrandDay(){let e=this.config.brandDay;e&&(e.css&&this.utils.appendStyleToHead(e.css),"function"==typeof e.callback&&e.callback()),this.disableLazyAds(!0)}setSticky(e,t){let i=this.utils.getAdUnitByContainer(e);i&&i.setSticky(t)}attachHEM(e){u.publish("hashedEmail.add",e,!0)}cleanView(){this.logger.info({message:"clean view"});let t=[...this.registeredAdUnits];for(let e=0;e<t.length;e++)t[e].destroy();this.initialPageParamsReady=new e,this.pageReady=this.getPageReadyPromise(),this.adLoader.reset(),this.targeter.reset(),this.loadingQueue.reset(),this.adRefresher.reset(),this.registeredAdUnits=[],this.initModules(),u.reset(),window.TATM&&window.TATM.reset()}}(st)})()})();
</script>

</body>
</html>
