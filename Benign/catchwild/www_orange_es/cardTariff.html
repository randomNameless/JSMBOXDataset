<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cardTariff.html</title>
</head>
<body>

<script>
!function(t){var e={};function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=11)}([function(t,e,a){"use strict";function n(){return"undefined"!=typeof utag_data&&void 0!==utag_data.pageName?utag_data.pageName:""}function o(){return"undefined"!=typeof utag_data&&"cliente"===utag_data.userType}function r(t,e,a,n=null){t&&a&&"undefined"!=typeof utag_data&&(utag_data.event_zone=t,utag_data.event_name=a,utag_data.event_type=e,null!==n&&(utag_data.tealium_event=n),utag.track("link",utag_data))}function i(){if("undefined"!=typeof utag_data){var t=document.getElementById("js-data-layer-script");if(t){var e=document.createElement("script");e.type="text/javascript",e.id="js-data-layer-script";var a=document.createTextNode("var utag_data = "+JSON.stringify(utag_data,null,"  ")+";");e.appendChild(a),t.parentNode.replaceChild(e,t)}}}t.exports={methods:{buildDataLayerView:function(t,e){if("undefined"!=typeof utag_data){var a=$(".js-data-layer").data("layer-"+t);if(""!==a){utag_data.pageName=a.pageName,utag_data.pageType=a.pageType;var n=a.pageType.split(":");utag_data.checkoutStep=n[1].replace("paso",""),utag_data.pageVirtual=window.location.protocol+"//"+utag_data["dom.domain"]+utag_data["dom.pathname"],"/"!==utag_data["dom.pathname"].slice(-1)&&(utag_data.pageVirtual+="/"),utag_data.pageVirtual+=a.stepID}utag_data.tealium_event="checkout",Object.keys(e).length&&Object.keys(e).forEach(t=>{utag_data[t]=e[t]}),utag.track("view",utag_data),i()}},buildDataLayerEventLinkCheckout:function(t,e,a,n=null){"undefined"!=typeof utag_data&&(t="tiendaOnline:"+t,o()&&(t="areaCliente:"+t),r(t,e,a,n))},buildDataLayerEventLink:r,getProductName:function(){return"undefined"!=typeof utag_data&&void 0!==utag_data.product_name?utag_data.product_name:""},buildDataLayerViewGeneral:function(t){"undefined"!=typeof utag_data&&(Object.keys(t).forEach(e=>{utag_data[e]=t[e]}),utag.track("view",utag_data),i())},getProductCategory:function(){return"undefined"!=typeof utag_data&&void 0!==utag_data.product_category?utag_data.product_category:""},getPageCategory:function(){return"undefined"!=typeof utag_data&&void 0!==utag_data.pageCategory?utag_data.pageCategory:""},getPageType:function(){return"undefined"!=typeof utag_data&&"undefined"!==utag_data.pageType?utag_data.pageType:""},getPageName:n,getPageNameWithoutWebOrange:function(){return n().replace("web:orange:","").replace("tiendaOnline:","")},removeDataLayerViewGeneralData:function(t,e=[]){"undefined"!=typeof utag_data&&(Object.keys(t).forEach(t=>{-1===e.indexOf(t)&&delete utag_data[t]}),utag.track("view",utag_data),i())},addProductToDataLayer:function(t){return new Promise((function(e,a){if(null!==t.tokenname&&null!==t.token&&null!==t.category&&"undefined"!=typeof utag_data){var n={};n.id=t.category,n[t.tokenname]=t.token,$.ajax({url:t.url,type:"post",data:n,dataType:"json"}).done(t=>{t&&Object.keys(t.data).length&&Object.keys(t.data).forEach(e=>{utag_data[e]=t.data[e]}),e()}).fail(()=>{a()})}else a()}))},isClient:o,replaceScript:i}}},,function(t,e,a){"use strict";t.exports=Object.freeze({GLOBAL_MODAL_SAVE_ID:".js-modal-save",GLOBAL_MODAL_CLOSE_ID:".js-modal-close",GLOBAL_MODAL_ID:"body #globalModal-drawer",GLOBAL_MODAL_BODY_CONTENT_ID:".js-modal-body-content",GLOBAL_MODAL_TITLE_ID:".js-modal-title",GLOBAL_MODAL_ALERT_BTN_ID:".js-modal-alert-btn",GLOBAL_MODAL_ALERT_ID:"#js-modal-alert",GLOBAL_MODAL_ALERT_BIGTITLE_ID:".modal-title",GLOBAL_MODAL_ALERT_TITLE_ID:".js-modal-alert-title",GLOBAL_MODAL_ALERT_BODY_ID:".js-modal-alert-body",GLOBAL_MODAL_ALERT_OUTER_ID:"#js-modal-alert-outer",GLOBAL_MODAL_ALERT_OUTER_BODY_ID:".js-modal-alert-outer-body",GLOBAL_MODAL_ALERT_OUTER_TITLE_ID:"#js-modal-alert-outer .modal-title",GLOBAL_MODAL_ALERT_FOOTER_ID:".js-modal-alert-footer",GLOBAL_MODAL_ALERT_FOOTER_BODY_ID:".js-modal-alert-footer-body",GLOBAL_MODAL_ALERT_FOOTER_BUTTONS_ID:".js-modal-alert-footer-buttons",GLOBAL_MODAL_ALERT_FOOTER_BUTTON_ID:".js-modal-alert-footer-button",GLOBAL_MODAL_ALERT_FOOTER_BUTTON_REJECT_ID:".js-modal-alert-reject",GLOBAL_MODAL_ALERT_FOOTER_BUTTON_ACCEPT_ID:".js-modal-alert-accept"})},function(t,e,a){"use strict";function n({url:t,stopSpinner:e,extraLines:a,extraCatId:n,callback:o=!1}){$.ajax({url:t,type:"get",dataType:"json",success:function(t){if(!a||a&&n){var r=t.nextStepUrl;window.location.href=r}else o&&o(t);e&&$.spinner().stop()},error:function(){e&&$.spinner().stop()}})}function o(t){const e={renderedSummary:t.renderedSummary,renderedLines:t.renderedLines,renderedSticky:t.renderedSticky,renderedStickyModal:t.renderedStickyModal,renderedExtraServices:t.renderedExtraServices,renderedTabpanels:t.renderedTabpanels};$(document).trigger("cart:render",[e])}const r={addToCart:function({action:t,cat:e,stopSpinner:a=!0,extraLines:r=!1,extraCatId:i="",changeTariff:d,nextStepUrl:c}){let u=`${t}?catID=${e}&extraLines=${r}`;if(""!==i&&(u+="&extraCatId="+i),d){u+=`&changeTariff=${d}&nextStep=${encodeURIComponent(c)}`}n({url:u,stopSpinner:a,extraLines:r,extraCatId:i,callback:o})},updateCart:function({action:t,cat:e,stopSpinner:a=!0,oldProductUUID:r}){n({url:`${t}?catID=${e}&pliuuid=${r}`,stopSpinner:a,extraLines:!0,callback:o})},removeFromCart:function({action:t,stopSpinner:e=!0,UUID:a}){n({url:`${t}?pliuuid=${a}`,stopSpinner:e,extraLines:!0,callback:o})}};t.exports={ajax:r}},,,,,,,,function(t,e,a){var n=a(0),o=a(2);const r=a(3);function i(t,e){t.offsetWidth<t.scrollWidth==!0&&(1===e&&t.classList.add("card-tariff-new__subheader__item__text--on"),0===e&&t.classList.remove("card-tariff-new__subheader__item__text--on"))}function d(t,e){e?($.spinner().start(),r.ajax.updateCart(t)):($.spinner().start(),r.ajax.addToCart(t))}$(document).ready((function(){$(document).on("click",".js-add-to-cart",(function(t){t.preventDefault(),t.stopImmediatePropagation(),$("#globalModal-drawer").modal("hide");const e=$(this).attr("data-next-step");let a=$(this).data("action");const o=$(this).data("oid"),r=$(this).data("extra-cat-id");let i=$(this).data("change-tariff"),c=$(this).parents("#globalModal-drawer").length>0;r&&(c=!0),i&&(i=!0),sessionStorage.getItem("shownOfferAlerts")&&sessionStorage.removeItem("shownOfferAlerts");const u=$(".js-is-cart-product-change"),s=/true/.test(u.val()),l=u.data("uuid"),f=function(t,e,a,n,o,r,i,d,c){const u={action:n,cat:o};return t?(n=e.data("action"),Object.assign(u,{oldProductUUID:r,action:n})):(Object.assign(u,{extraLines:d,nextStepUrl:i}),a&&Object.assign(u,{extraCatId:a})),c&&Object.assign(u,{changeTariff:c}),u}(s,u,r,a,o,l,e,c,i);var _={category:o,tokenname:$(".js-csrf-global").attr("name"),token:$(".js-csrf-global").val(),url:$(this).data("action-dl")};if(_.category&&_.token&&_.tokenname){var p="loQuiero:",g="",m="";i?(p="TarifaRecomendada"===$(this).attr("data-position")?"loQuieroRecomendada:":"loQuiero:",p+=$(this).attr("data-idsiebel"),g="areaCliente:tiendaOnline:listadoTarifas"):$(this).parents(".js-section-carrusel").length>0||$(this).parents(".js-section-comparator").length>0?(p+=$(this).attr("data-position")+":"+$(this).attr("data-idsiebel"),g="tarifasDestacadas:"+n.methods.getPageCategory()):"consultaCoberturaResultados"===n.methods.getPageType()?(p+=$(this).attr("data-position")+":"+$(this).attr("data-idsiebel"),g="consultaCobertura",m="checkout"):(p+=$(this).attr("data-idsiebel"),g="fichaTarifa"),function(t,e,a,o,r,i){"checkout"===t?n.methods.addProductToDataLayer(e).then((function(){n.methods.buildDataLayerEventLinkCheckout(a,"clickButton",o,"add")})).catch((function(){})).then((function(){d(r,i)})):n.methods.addProductToDataLayer(e).then((function(){n.methods.buildDataLayerEventLink(a,"clickButton",o,"add")})).catch((function(){})).then((function(){d(r,i)}))}(m,_,g,p,f,s)}else d(f,s)})),$(document).on("click",".js-more-info-tariff",(function(){var t="masInfo:"+$(this).attr("data-position")+":"+$(this).attr("data-idsiebel");let e=$(this).data("change-tariff");"consultaCoberturaResultados"===n.methods.getPageType()?n.methods.buildDataLayerEventLinkCheckout("consultaCobertura","clickButton",t):e&&"TarifaRecomendada"!==$(this).attr("data-position")?(t="masInformacion:"+$(this).attr("data-idsiebel"),n.methods.buildDataLayerEventLink("areaCliente:tiendaOnline:listadoTarifas","clickButton",t)):e&&"TarifaRecomendada"===$(this).attr("data-position")?(t="masInformacionRecomendada:"+$(this).attr("data-idsiebel"),n.methods.buildDataLayerEventLink("areaCliente:tiendaOnline:listadoTarifas","clickButton",t)):n.methods.buildDataLayerEventLink("tarifasDestacadas:"+n.methods.getPageCategory(),"clickButton",t)})),$(document).on("click",".js-more-info",(function(){n.methods.buildDataLayerEventLink("fichaTarifa","clickButton","masInformacion")})),$(document).on("click","body .card-tariff-new__features__row--link",(function(t){const e=$(this).data("long-desc"),a=$(o.GLOBAL_MODAL_ID).find(o.GLOBAL_MODAL_BODY_CONTENT_ID);if(e&&a.html(e),$(".modal-backdrop.show").length>1){let t=$(".modal-backdrop.show").length;for(let e=1;e<t;e++)$(".modal-backdrop.show")[e].remove()}}));var t=new IntersectionObserver((function(t){t.forEach((function(t){!0===t.isIntersecting?setTimeout((function(){i(t.target,1)}),3e3):i(t.target,0)}))}),{threshold:[1]});document.querySelectorAll(".card-tariff-new__subheader__item__text").forEach((function(e){window.screen.width>1024?(e.addEventListener("mouseenter",(function(){i(e,1)})),e.addEventListener("mouseleave",(function(){i(e,0)}))):t.observe(e)})),$(document).on("click",".js-alert-info-modal",(function(){let t=$("#js-offer-alert-modal"),e=$(this)[0].dataset.id,a=document.getElementById("alertMessage-"+e).value,n=document.getElementById("alertShortDescription-"+e).value;$(".js-category-alert-title")[0].innerText=a,$(".js-category-alert-body")[0].innerHTML=n,t.modal("show")})),$(document).on("click",".js-add-to-cart-renove",(function(t){t.preventDefault(),t.stopImmediatePropagation(),$("#js-pdp-confirm-renove-change-tariff-modal").modal()})),$(document).on("click",".js-pdp-change-tariff-renove-add-cart",(function(t){t.preventDefault();var e=$(this).data("offerid");!function(t,e,n){let o={category:e,tokenname:$(".js-csrf-global").attr("name"),token:$(".js-csrf-global").val(),url:$(t).data("action-dl")},r="loQuiero:"+n;const i=a(0);i.methods.addProductToDataLayer(o).then((function(){i.methods.buildDataLayerEventLinkCheckout("areaCliente:tiendaOnline:carrito","clickButton",r,"add")}))}(this,e,$(this).data("siebelid")),$.ajax({url:$(this).data("url"),type:"POST",data:{newTariffID:e,mainProductID:$(this).data("main-productid")},dataType:"json",success:function(t){window.location.href=t.redirectUrl,$.spinner().stop()},error:function(){$.spinner().stop()}})}))}))}]);
</script>

</body>
</html>
