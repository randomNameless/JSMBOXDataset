<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>search-47ea45d9.html</title>
</head>
<body>

<script>
import{r as l,R as _e,j as t,L as Te,a as ke}from"../styled-components.browser.esm.b15de927.js";import{T as P,t as Me}from"../index.esm.4d36028a.js";import{c as p}from"../index.a0093c23.js";import{f as K,l as xe,m as Ne,P as Ee,i as Ie}from"../intl.helpers.5a888445.js";import{A as ie,p as ae}from"../api.utils.703333ed.js";import{M as J}from"../Menu.esm.83fc7468.js";import{L as se,B}from"../Button.esm.9758ae2d.js";import{F as _}from"../message.1489cc2c.js";import{C as $e}from"../Checkmark.esm.1547b6be.js";import{L as Re}from"../Link.esm.5517149f.js";import{_ as Oe}from"../tslib.es6-7f0e734f.81d472b8.js";import{S as Pe}from"../Search.esm.23cc5051.js";import{P as i}from"../index.6d3846f1.js";import{t as Ae}from"../text-helpers.6e258858.js";import{b as He}from"../time-helpers.c776487f.js";import{_ as ze}from"../_includes.a0cf76c1.js";import{_ as Be}from"../_curry2.6f920f03.js";import{p as De}from"../path.a6c4b3fd.js";import{H as ge}from"../Header.esm.352399fd.js";import{D as Ue}from"../DismissX.esm.8028aeda.js";import"../colors.esm.a8bfa495.js";import"../inheritsLoose.af59e121.js";import"../index.ba1ac051.js";import"../ChevronDown.esm.690f91e8.js";import"../_isArray.3eafb232.js";import"../index.3cacd6af.js";import"../equals.0c7eab92.js";import"../_isString.966efe80.js";var We=l.forwardRef(function(e,s){return _e.createElement("svg",Oe({viewBox:"0 0 20 20",ref:s},e),_e.createElement("path",{d:"M1 5h11.18a3 3 0 0 0 5.64 0H19a1 1 0 0 0 0-2h-1.18a3 3 0 0 0-5.64 0H1a1 1 0 0 0 0 2zm14-2a1 1 0 1 1-1 1 1 1 0 0 1 1-1zm4 6H7.82a3 3 0 0 0-5.64 0H1a1 1 0 0 0 0 2h1.18a3 3 0 0 0 5.64 0H19a1 1 0 0 0 0-2zM5 11a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm14 4h-1.18a3 3 0 0 0-5.64 0H1a1 1 0 0 0 0 2h11.18a3 3 0 0 0 5.64 0H19a1 1 0 0 0 0-2zm-4 2a1 1 0 1 1 1-1 1 1 0 0 1-1 1z",fill:"#1a2e3b"}))}),Ve=Be(ze);const Ge=Ve,Ke="Filter-module__filter",Je="Filter-module__light",qe="Filter-module__no-filters",Ye="Filter-module__subfilter",Xe="Filter-module__loader",Qe="Filter-module__subfilter-content",Ze="Filter-module__subfilter-label",et="Filter-module__checkmark",tt="Filter-module__load-more-container",st="Filter-module__load-more",it="Filter-module__load-more-spinner",at="Filter-module__disabled-link",S={filter:Ke,light:Je,"no-filters":"Filter-module__no-filters",noFilters:qe,subfilter:Ye,loader:Xe,"subfilter-content":"Filter-module__subfilter-content",subfilterContent:Qe,"subfilter-label":"Filter-module__subfilter-label",subfilterLabel:Ze,checkmark:et,"load-more-container":"Filter-module__load-more-container",loadMoreContainer:tt,"load-more":"Filter-module__load-more",loadMore:st,"load-more-spinner":"Filter-module__load-more-spinner",loadMoreSpinner:it,"disabled-link":"Filter-module__disabled-link",disabledLink:at},rt=(e,s,a)=>e.map(r=>r.value===s?{...r,...a}:r),nt=(e,s)=>e.map(a=>a.value===s?{...a,selected:!a.selected}:a),ot=e=>e.map(s=>{var a;return{...s,options:(a=s.options)==null?void 0:a.map(r=>({...r,selected:!1}))}}),lt=e=>{const s={};return e.forEach(a=>{var o;const r=(o=a.options)==null?void 0:o.filter(n=>n.selected);r&&r.length&&(s[a.value]=r.map(n=>n.value).join(","))}),s},ve="video,collection,live_event,product",z="all",te=(e,s,a,r={},o=1,n=ve)=>{n=n===z?ve:n;const c=new URLSearchParams;c.set("q",e),c.set("type",n),c.set("page",o.toString());let d=`${re(s,a)}/search?${c.toString()}`;const g=ht(r).toString();return g.length&&(d+=`&${g}`),fetch(d,{method:"GET",headers:ie}).then(ae)},ct=(e,s)=>{const a=`${re(e,s)}/search_filters`;return fetch(a,{method:"GET",headers:ie}).then(ae)},dt=async(e,s,a,r=1)=>{const o=new URLSearchParams;o.set("page",r.toString());const n=`${re(e,s)}/search_filters/${a}/options?${o.toString()}`;return fetch(n,{method:"GET",headers:ie}).then(ae)},ut=e=>`/search?q=${e}`,re=(e,s)=>{const a=`/v2/sites/${e}`;return`${s}${a}`},ht=e=>{const s=new URLSearchParams;for(const a in e)s.set(`filters[${a}]`,e[a]);return s},mt=({filter:e,siteId:s,apiV2Url:a,theme:r,handleFilterChange:o,handleApplyFiltersDisabledChange:n})=>{const[c,d]=l.useState(!1),[g,b]=l.useState(1),[j,w]=l.useState(!1),L=()=>{var m;const h=((m=e.options)==null?void 0:m.filter(R=>R.selected).length)||0;return h>0?`${e.label} (${h})`:e.label},f=async()=>{try{const h=await dt(s,a,e.value,g);let m=e.options||[];const R=h.pagination.count;m=m.concat(h.options),m.length>=R&&w(!0),o(e.value,{isLoading:!1,options:m})}catch{o(e.value,{isLoading:!1,options:e.options||[]})}},F=h=>{o(e.value,{options:nt(e.options||[],h)}),n(!1)},I=()=>{if(e.isLoading)return t.jsx(se,{className:S.loader,size:"sm","data-testid":"spinner"});if(!e.isLoading&&(!e.options||!e.options.length))return t.jsx(P,{size:200,className:S.noFilters,children:t.jsx(_,{id:"search.filter.no_filters",defaultMessage:"No filters"})});if(e.options)return e.options.map(m=>t.jsx(J.Item,{className:p(S.subfilter,{[S.light]:r==="light"}),onClick:()=>F(m.value),children:t.jsxs("div",{className:S.subfilterContent,children:[t.jsx("div",{className:S.subfilterLabel,children:m.label}),m.selected&&t.jsx($e,{className:S.checkmark,"data-testid":`${e.value}_${m.value}_filter_option_checkmark`})]})},`${e.value}-${m.value}`))},u=()=>{var h;if(e.isLoading||e.options&&((h=e.options)==null?void 0:h.length)===0||j)return null;{const m=t.jsx(Re,{variant:"minimal",className:p(S.loadMore,{[S.light]:r==="light",[S.disabledLink]:c}),onClick:()=>C(),children:t.jsx(P,{size:200,children:t.jsx(_,{id:"search.filter.load_more",defaultMessage:"Load more"})})});return t.jsxs("div",{className:S.loadMoreContainer,children:[m,c&&t.jsx(se,{className:p(S.loader,S.loadMoreSpinner),size:"sm","data-testid":"spinner"})]})}},C=async()=>{try{d(!0),await f(),b(g+1),d(!1)}catch{d(!1)}},v=async()=>{!e.options&&e.isLoading&&(await f(),b(g+1))};return t.jsxs(J.Item,{className:p(S.filter,{[S.light]:r==="light"}),id:`${e.value}-search-filter-menu-item`,onOpen:v,toggle:!0,children:[L(),I(),u()]})},pt="Filters-module__filters-container",ft="Filters-module__filters",_t="Filters-module__hidden",gt="Filters-module__filter-buttons-container",vt="Filters-module__filters-toggle",yt="Filters-module__light",bt="Filters-module__selected",N={"filters-container":"Filters-module__filters-container",filtersContainer:pt,filters:ft,hidden:_t,"filter-buttons-container":"Filters-module__filter-buttons-container",filterButtonsContainer:gt,"filters-toggle":"Filters-module__filters-toggle",filtersToggle:vt,light:yt,selected:bt},H=640,St=2,wt=({searchFilters:e,handleSearchFiltersChange:s,handleSelectedFiltersUpdate:a,siteId:r,apiV2Url:o,theme:n})=>{const[c,d]=l.useState(window.innerWidth>H),[g,b]=l.useState(window.innerWidth<=H),[j,w]=l.useState(!0);l.useEffect(()=>{function u(){window.innerWidth>=H?(d(!0),b(!1)):(d(!1),b(!0))}return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),l.useEffect(()=>{ct(r,o).then(u=>{const C=u.search_filters.map(v=>Object.assign(v,{isLoading:!0,options:null}));s(C)})},[r,o,s]);const L=(u,C)=>{s(rt(e,u,C))},f=e.map(u=>t.jsx(mt,{filter:u,siteId:r,apiV2Url:o,theme:n,handleFilterChange:L,handleApplyFiltersDisabledChange:w},u.value)),F=()=>{a(lt(e)),w(!0),window.innerWidth<=H&&d(!1)},I=()=>t.jsxs("div",{className:N.filtersContainer,children:[t.jsxs("div",{className:N.filterButtonsContainer,children:[g&&t.jsx(B,{variant:"minimalTransparent",format:"secondary",icon:t.jsx(We,{}),className:p(N.filtersToggle,{[N.selected]:c,[N.light]:n==="light"}),onClick:()=>{d(!c)},children:t.jsx(P,{size:300,children:K({id:"search.filters",defaultMessage:"Filters"})})}),t.jsx(B,{variant:"minimalTransparent",format:"secondary",className:p(N.filtersToggle,{[N.light]:n==="light"}),onClick:()=>F(),disabled:j,children:t.jsx(P,{size:300,children:K({id:"search.apply_filters",defaultMessage:"Apply filters"})})})]}),t.jsx(J,{className:p(N.filters,{[N.hidden]:!c}),"data-testid":"test-filters-menu-container",children:t.jsx(J.Section,{children:f})})]});return e.length?I():null},xt="SearchForm-module__search-icon-container",jt="SearchForm-module__search-input",Lt="SearchForm-module__light",Ft="SearchForm-module__search-form-container",Ct="SearchForm-module__search-icon",O={"search-icon-container":"SearchForm-module__search-icon-container",searchIconContainer:xt,"search-input":"SearchForm-module__search-input",searchInput:jt,light:Lt,"search-form-container":"SearchForm-module__search-form-container",searchFormContainer:Ft,"search-icon":"SearchForm-module__search-icon",searchIcon:Ct},Tt=({searchTerm:e,updateSearchTerm:s,theme:a})=>t.jsxs("div",{className:p(O.searchFormContainer,"site-border-color"),children:[t.jsx("div",{className:p(O.searchIconContainer,"site-border-color"),children:t.jsx(Pe,{className:p(O.searchIcon,{[O.light]:a==="light"})})}),t.jsx("input",{className:p(O.searchInput,"custom-css-search-input",{[O.light]:a==="light","site-font-secondary-color":a==="dark"}),placeholder:K({id:"search.search_placeholder",defaultMessage:"Search"}),value:e,onChange:r=>s(r.target.value)})]});class kt{constructor(s,a){this.data=s,this.playState=a}getData(){return{additional_images:{aspect_ratio_1_1:this.data.entity.thumbnails["1_1"],aspect_ratio_2_3:this.data.entity.thumbnails["2_3"],aspect_ratio_16_6:this.data.entity.thumbnails["16_6"],aspect_ratio_16_14:this.data.entity.thumbnails["16_14"]},description:this.data.entity.description,duration:this.data.entity.duration?{seconds:this.data.entity.duration.seconds,formatted:new Date(this.data.entity.duration.seconds*1e3).toISOString().substr(11,8)}:{},_embedded:{play_state:this.playState},has_free_videos:this.data.entity.has_free_videos||!1,id:this.data.entity_id,is_free:this.data.entity.is_free||!1,items_count:this.data.entity.items_count||0,live_video:this.data.entity.live_video||!1,live_status:this.data.entity.live_status,_links:{[`${this.data.entity_type}_page`]:{href:this.data.entity.page_url}},metadata:this.data.entity.metadata||{},product_ids:this.data.entity.product_ids||[],name:this.data.entity.title,seasons_count:this.data.entity.seasons_count,thumbnail:this.data.entity.thumbnails["16_9"],type:this.data.entity.type||this.data.entity_type,videos_count:this.data.entity.videos_count}}}const Mt=Object.freeze({SMALL:"small",MEDIUM:"medium",LARGE:"large"}),q="aspect_ratio_1_1",Y="aspect_ratio_2_3",X="aspect_ratio_16_9",ne=e=>t.jsx("span",{className:"play-outer-rectangle","data-testid":"play-outer-rectangle",style:e.isHovered?{opacity:1}:{opacity:0},children:t.jsx("i",{className:"icon icon-play-inverse medium"})}),oe=e=>e.type==="video"?Nt(e):e.type==="live_event"?Et(e):"",Nt=e=>{let s="";return e.isLive&&e.live_status==="pending"&&(s=t.jsx("div",{className:"live-state-info",children:t.jsx("span",{className:"will-be-live-tag",children:t.jsx(_,{id:"browse.image.off_air",defaultMessage:"Off Air"})})})),e.isLive&&(e.live_status==="started"||e.live_status==="disconnected")&&(s=t.jsx("div",{className:"live-state-info",children:t.jsxs("span",{className:"is-live-now-tag",children:[t.jsx("span",{className:"live-circle-icon is-live-circle"}),t.jsx(_,{id:"browse.image.live",defaultMessage:"Live"})]})})),e.isLive&&e.live_status==="ended"&&(s=t.jsx("div",{className:"live-state-info",children:t.jsx("span",{className:"was-live-tag",children:t.jsx(_,{id:"browse.image.off_air",defaultMessage:"Off Air"})})})),e.isLive&&e.live_status==="disconnected"&&(s=t.jsx("div",{className:"live-state-info",children:t.jsx("span",{className:"was-live-tag",children:t.jsx(_,{id:"browse.image.off_air",defaultMessage:"Off Air"})})})),e.type==="live_event"&&(s=t.jsx("div",{className:"live-state-info",children:t.jsx("span",{className:e.live_status==="live"?"is-live-now-tag":"will-be-live-tag",children:t.jsx(_,{id:"browse.image.live",defaultMessage:"Live"})})})),s},Et=e=>t.jsx("div",{className:"live-state-info",children:t.jsx("span",{className:e.live_status==="live"?"is-live-now-tag":"will-be-live-tag",children:t.jsx(_,{id:"browse.image.live",defaultMessage:"Live"})})}),ye=e=>{if(e.duration&&e.duration.formatted){let s="";const[a,r,o]=e.duration.formatted.split(":"),n=parseInt(a,10);return n>0?s=`${n}:${r}:${o}`:s=`${r}:${o}`,s.trim()}return""},It=e=>e.type==="live_event"||e.type==="video"&&e.isLive,le=e=>{const s=()=>{let o=!1;return e.type!=="video"||e.isFree?!0:(e.videoProductIds.forEach(n=>{e.purchasedProductIds.has(n)&&(o=!0)}),o)},a=e.type==="movie"||e.type==="video",r=s();return t.jsxs("div",{className:`browse-image-container ${e.thumbnailType}`,children:[t.jsx("img",{src:e.thumbnail,alt:e.name}),a&&ne(e),t.jsxs("div",{className:"browse-info-container",style:{bottom:e.playstate?"10px":"8px"},children:[It(e)?t.jsx("div",{className:"live-state-container",children:t.jsx("div",{children:oe(e)})}):ye(e).length>0?t.jsx("div",{className:"duration-container",children:t.jsx("div",{children:ye(e)})}):null,e.playstate?t.jsxs("div",{className:"percentage-bar-container margin-top-small",children:[t.jsx("div",{className:"percentage-bar-background"}),t.jsx("div",{className:"percentage-bar","data-testid":"play-state-percentage-bar",style:{width:e.playstate.completed?"100%":`${e.playstate.timecode/e.playstate.duration*100}%`}})]}):null]}),r?null:t.jsx("span",{className:"freemium-lock","data-testid":"freemium-lock",children:t.jsx("i",{className:"icon icon--xsmall icon-lock-inverse"})})]})};ne.propTypes={isHovered:i.bool};oe.propTypes={isLive:i.bool,live_status:i.oneOfType([i.string,i.object]),type:i.string};le.propTypes={type:i.string,userSubscribed:i.bool,isFree:i.bool,isLive:i.bool,playstate:i.oneOfType([i.string,i.object]),thumbnail:i.string,hasFreeVideos:i.bool,name:i.string,purchasedProductIds:i.instanceOf(Set),videoProductIds:i.arrayOf(i.number),thumbnailType:i.oneOf([q,Y,X,null])};ne.defaultProps={isHovered:!1};oe.defaultProps={isLive:0,livestate:"",type:""};le.defaultProps={type:"",userSubscribed:!1,isFree:!1,isLive:!0,isHovered:!1,live_status:"pending",playstate:"",thumbnail:"",hasFreeVideos:!1,name:"",videoProductIds:[],purchasedProductIds:new Set([]),thumbnailType:X};const $t=250,Rt=e=>({__html:e}),Q=e=>{var c;const s={opacity:1,position:"absolute",display:"block",left:`${e.offsetLeft?"unset":"105%"}`,right:`${e.offsetLeft?"105%":"unset"}`,top:0,width:"120%",maxHeight:"231px",zIndex:20},a={position:"absolute",left:"-99999px",width:"auto"},r=(c=e.description)==null?void 0:c.replace(/(\r?\n)+/g," "),o=Ae(r,0,$t),n=e.darkBackground?" background-gray-deep ":" background-white ";return e.customStyles&&Object.assign(s,e.customStyles),t.jsxs("div",{className:`tooltip ${n} ${e.offsetLeft?"fader-left left":"fader-right right"}`,style:e.hover?s:a,"data-testid":"browse-tooltip",children:[e.name?t.jsx("h3",{className:"tooltip-item-title site-font-primary-family",children:t.jsx("strong",{children:e.name})}):null,e.item_count?t.jsx("h4",{className:"transparent padding-bottom-small site-font-primary-family",children:t.jsx("span",{className:"media-count",children:e.item_count})}):null,t.jsx("div",{className:"transparent tooltip-description site-font-primary-family",style:e.descriptionStyles,dangerouslySetInnerHTML:Rt(o)})]})};Q.propTypes={item_count:i.oneOfType([i.string,i.number]),name:i.string,customStyles:i.shape({}),darkBackground:i.bool,description:i.string,descriptionStyles:i.shape({}),hover:i.bool,offsetLeft:i.bool};Q.defaultProps={item_count:"",name:"",customStyles:{},darkBackground:!1,description:"",descriptionStyles:{},hover:!1,offsetLeft:!1};class ce extends l.Component{constructor(s){super(s),this.state={isHovered:!1,isLoading:!1,added:this.props.added},this.added=this.props.added,this.handleClick=this.handleClick.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.toggleStyle=this.toggleStyle.bind(this),this.hoverUnavailable=this.hoverUnavailable.bind(this),this.determineAPICall=this.determineAPICall.bind(this),this.removeFromStorage=this.removeFromStorage.bind(this),this.addToStorage=this.addToStorage.bind(this),this.trackToggleActivity=this.trackToggleActivity.bind(this)}setDescription(){return this.state.added?this.props.intl.formatMessage({id:"browse.list_toggle.remove_from_list",defaultMessage:"Remove from my list"}):this.props.intl.formatMessage({id:"browse.list_toggle.add_to_list",defaultMessage:"Add to my list"})}handleMouseEnter(){this.setState({isHovered:!0}),this.props.mouseEnterCallback()}handleMouseOut(){this.setState({isHovered:!1}),this.props.mouseLeaveCallback()}determineAPICall(s,a){return fetch(this.props.url,{method:s,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${window.TOKEN}`},credentials:"include"}).then(r=>{r.status===204&&this.setState({added:a,isLoading:!1})})}trackToggleActivity(s){var a=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:{type:this.props.type,id:this.props.id}});document.dispatchEvent(a)}addToStorage(){const s=JSON.parse(localStorage.getItem("watchlistItems"));s&&(s[this.props.id]=this.props.type,localStorage.setItem("watchlistItems",JSON.stringify(s))),this.trackToggleActivity("my-list-added")}removeFromStorage(){const s=JSON.parse(localStorage.getItem("watchlistItems"));s&&(delete s[this.props.id],localStorage.setItem("watchlistItems",JSON.stringify(s))),this.trackToggleActivity("my-list-removed")}toggleStyle(){const s={zIndex:10};return this.props.onFeaturedCarousel||(s.opacity=this.state.isHovered?1:.7,s.visibility=this.props.parentHovered||this.state.isHovered||this.hoverUnavailable()?"visible":"hidden"),s}handleClick(s){s.stopPropagation(),this.setState({isLoading:!0}),this.state.added?this.determineAPICall("DELETE",!1):this.determineAPICall("PUT",!0),this.state.added?this.removeFromStorage():this.addToStorage()}hoverUnavailable(){return this.props.windowSize<799||this.props.onFeaturedCarousel}render(){return t.jsxs("div",{className:"inline-block","data-testid":"browse-list-toggle",children:[this.hoverUnavailable()?null:t.jsx(Q,{hover:this.state.isHovered,descriptionStyles:{color:"white"},offsetLeft:!0,description:this.setDescription(),customStyles:{left:"auto",right:55,top:5,padding:"6px 15px",width:"auto",opacity:.8},darkBackground:!0}),t.jsx("button",{onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseOut,className:(this.props.onFeaturedCarousel?"btn btn-large btn-transparent slide-button slide-button--alt slide-button--my-list ":"has-background icon-only ")+(this.state.isLoading?"loading icon--xsmall ":"")+(this.state.added?"icon-watchlist-remove":"icon-watchlist-add"),style:this.toggleStyle(),"aria-label":this.setDescription(),children:t.jsx(_,{id:"browse.list_toggle.my_list",defaultMessage:"My list"})})]})}}ce.propTypes={parentHovered:i.bool,url:i.string,mouseEnterCallback:i.func,mouseLeaveCallback:i.func,windowSize:i.number,added:i.bool,id:i.number,type:i.string,onFeaturedCarousel:i.bool,intl:i.shape({formatMessage:i.func})};ce.defaultProps={parentHovered:!1,url:"",mouseLeaveCallback(){},mouseEnterCallback(){},windowSize:850,added:!1,id:0,type:"",onFeaturedCarousel:!1};const Ot=xe(ce),Pt=e=>t.jsx(_,{id:"browse.card.season",defaultMessage:"{count, plural, one {# season} other {# seasons}}",values:{count:e.seasons_count}}),be=e=>t.jsx(_,{id:"browse.card.video",defaultMessage:"{count, plural, one {# video} other {# videos}}",values:{count:e.videos_count}}),At=(e,s)=>{if(e.seasons_count)return Pt(e);if(e.type==="movie"&&e.videos_count||e.type==="playlist"&&e.videos_count)return be(e);if(["product","subscription","transactional"].includes(e.type))return t.jsx(_,{id:"browse.card.product",defaultMessage:"{count, plural, one {# item} other {# items}}",values:{count:e.items_count||0}});if(!e.seasons_count&&e.items_count)return t.jsx(_,{id:"browse.card.series",defaultMessage:"{count, plural, one {# series} other {# series}}",values:{count:e.items_count}});if(e.type==="live_event"&&e.live_status==="pending")if(e.scheduled_at){const a=He(e.scheduled_at,s.locale);return t.jsx(_,{id:"browse.features.scheduled_for",defaultMessage:"Scheduled for {date}",values:{date:a}})}else return t.jsx(_,{id:"browse.card.live_event.pending",defaultMessage:"This event has not started yet"});return null},de=e=>{const s="Â ";return t.jsxs("div",{className:"subtext-container",children:[t.jsx("div",{className:"site-font-primary-color truncate",children:e.data.name}),t.jsx("div",{className:"site-font-secondary-color browse-item-subtext",children:At(e.data,e.intl)||s})]})};de.propTypes={data:i.shape({items_count:i.number,name:i.string,live_status:i.string,scheduled_at:i.string,seasons_count:i.number,type:i.string}),intl:i.shape({locale:i.string})};de.defaultProps={data:{}};const Ht=xe(de),zt="my-list";class ue extends l.Component{constructor(s){super(s),this.state={isHovered:!1,offsetLeft:!1,watchlistItem:this.isWatchlistItem(),textHeight:null},this.handleMouseOut=this.handleMouseOut.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this)}setHref(){var s,a;return this.props.data._links.collection_page?this.props.data._links.collection_page.href:this.props.data._links.video_page?this.props.data._links.video_page.href:(s=this.props.data._links)!=null&&s.product_page?this.props.data._links.product_page.href:(a=this.props.data._links)!=null&&a.live_event_page?this.props.data._links.live_event_page.href:""}setThumbnail(){const{thumbnailType:s}=this.props;return[q,Y].includes(s)?this.props.data.additional_images[s].medium:this.props.data.thumbnail?this.props.data.thumbnail.medium:""}partOfCachedWatchList(){const s=JSON.parse(localStorage.getItem("watchlistItems"));return s&&s[this.props.data.id]&&s[this.props.data.id]===this.props.data.type}isWatchlistItem(){return this.partOfCachedWatchList()||this.props.slug===zt}handleKeyDown(s){s.key==="Enter"&&this.props.onClick(s)}handleMouseOut(){this.setState({isHovered:!1,offsetLeft:!1})}handleMouseOver(){let s=!1;const a=this.node,r=document.documentElement.clientWidth;if(a&&r){const o=a.getBoundingClientRect(),n=o.left+o.width/2,c=r/2;s=n>c}this.setState({isHovered:!0,offsetLeft:s})}hasPlayState(){return this.props.data._embedded&&this.props.data._embedded.play_state?this.props.data._embedded.play_state:""}isMyListType(){const s=["video","series","movie","playlist","live_event"];return!!Ge(De(["data","type"],this.props),s)}showMyList(){return!!(this.isMyListType()&&this.props.size!=="mobile"&&this.props.userSubscribed)}createURL(){const s=this.props.data.id;return this.props.data.type==="video"?`${this.props.apiUrl}/me/watchlist?video=${this.props.apiUrl}/videos/${s}`:this.props.data.type==="live_event"?`${this.props.apiUrl}/me/watchlist?live_event=${this.props.apiUrl}/live_events/${s}`:`${this.props.apiUrl}/me/watchlist?collection=${this.props.apiUrl}/collections/${s}`}render(){return t.jsxs("div",{"data-testid":"browse-card",className:"card-enter horizontal-row-item",onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseOut,ref:s=>this.node=s,children:[this.props.size!==Mt.SMALL?t.jsx(Q,{offsetLeft:this.state.offsetLeft,hover:this.state.isHovered,description:this.props.data.description,name:this.props.data.name,count:this.props.data.items_count}):null,t.jsx("div",{className:`browse-item-card item-type-${this.props.data.type}`,children:t.jsxs("div",{className:"site-font-primary-color browse-item-title",children:[this.showMyList()?t.jsx(Ot,{added:this.state.watchlistItem,windowSize:this.state.windowWidth,parentHovered:this.state.isHovered,url:this.createURL(),mouseEnterCallback:this.handleMouseOut,mouseLeaveCallback:this.handleMouseOver,id:this.props.data.id,type:this.props.data.type}):null,t.jsxs("a",{href:this.setHref(),onClick:this.props.onClick,onKeyDown:this.handleKeyDown,children:[t.jsx(le,{playstate:this.hasPlayState(),thumbnail:this.setThumbnail(),isFree:this.props.data.is_free,isLive:this.props.data.live_video,live_status:this.props.data.live_status,userSubscribed:this.props.userSubscribed,isHovered:this.state.isHovered,type:this.props.data.type,hasFreeVideos:this.props.data.has_free_videos,duration:this.props.data.duration,name:this.props.data.name,scheduledAt:this.props.data.scheduled_at,videoProductIds:this.props.data.product_ids,purchasedProductIds:new Set(this.props.purchasedProductIds),thumbnailType:this.props.thumbnailType}),t.jsx(Ht,{data:this.props.data})]})]})})]},this.props.index)}}ue.propTypes={size:i.string,index:i.number,userSubscribed:i.bool,slug:i.string,purchasedProductIds:i.arrayOf(i.number),data:i.shape({additional_images:i.shape({[q]:i.shape({medium:i.string,small:i.string,source:i.string}),[Y]:i.shape({medium:i.string,small:i.string,source:i.string})}),product_ids:i.arrayOf(i.number),duration:i.shape({}),id:i.number,name:i.string,has_free_videos:i.bool,is_free:i.bool,metadata:i.shape({href:i.string}),thumbnail:i.shape({medium:i.string}),items_count:i.number,description:i.string,type:i.string,live_video:i.bool,live_status:i.string,scheduled_at:i.string,_embedded:i.shape({play_state:i.shape({})}),_links:i.shape({collection_page:i.shape({href:i.string}),product_page:i.shape({href:i.string}),video_page:i.shape({href:i.string}),live_event_page:i.shape({href:i.string}),source:i.shape({href:i.string})})}),onClick:i.func,thumbnailType:i.oneOf([q,Y,X,null]),apiUrl:i.string};ue.defaultProps={size:"",index:0,userSubscribed:!1,isHovered:!1,slug:"",data:{duration:{},id:0,name:"",has_free_videos:!1,is_free:!1,metadata:{href:""},thumbnail:{medium:""},items_count:0,description:"",type:"",live_video:0,live_status:"",scheduled_at:"",_embedded:{play_state:{}},_links:{collection_page:{href:""},video_page:{href:""},source:{href:""}}},onClick:()=>{},thumbnailType:X};const Bt="BlankSearchResults-module__no-results",Dt="BlankSearchResults-module__light",W={"no-results":"BlankSearchResults-module__no-results",noResults:Bt,light:Dt},Ut=({searchTerm:e,theme:s})=>e.length>=3?t.jsx(ge,{size:"3",className:p(W.noResults,"site-font-primary-family",{[W.light]:s==="light"}),children:t.jsx(_,{id:"search.no_results",defaultMessage:"No results for {searchTerm}",values:{searchTerm:e}})}):t.jsx(ge,{size:"3",className:p(W.noResults,"site-font-primary-family",{[W.light]:s==="light"}),children:t.jsx(_,{id:"search.start_typing",defaultMessage:"Start typing to see results"})}),Wt="SearchResults-module__search-results-container",Vt="SearchResults-module__loader",Gt="SearchResults-module__with-filters",Kt="SearchResults-module__load-more",Jt="SearchResults-module__light",qt="SearchResults-module__search-results",Yt="SearchResults-module__search-result",E={"search-results-container":"SearchResults-module__search-results-container",searchResultsContainer:Wt,loader:Vt,"with-filters":"SearchResults-module__with-filters",withFilters:Gt,"load-more":"SearchResults-module__load-more",loadMore:Kt,light:Jt,"search-results":"SearchResults-module__search-results",searchResults:qt,"search-result":"SearchResults-module__search-result",searchResult:Yt},Xt="TypeFilters-module__type-filters-container",Qt="TypeFilters-module__type-filter",Zt="TypeFilters-module__light",es="TypeFilters-module__selected",V={"type-filters-container":"TypeFilters-module__type-filters-container",typeFiltersContainer:Xt,"type-filter":"TypeFilters-module__type-filter",typeFilter:Qt,light:Zt,selected:es},Se=({typeFilter:e,handleTypeFilterChange:s,typeFilterCounts:a,theme:r})=>{const o=c=>e===c?V.selected:"",n=c=>{const d=c,g=a[d];if(!g)return null;const b=Ne({video:{id:"search.type_filters.video",defaultMessage:"Videos ({typeFilterCount})"},product:{id:"search.type_filters.product",defaultMessage:"Products ({typeFilterCount})"},collection:{id:"search.type_filters.collection",defaultMessage:"Collections ({typeFilterCount})"},live_event:{id:"search.type_filters.live_event",defaultMessage:"Live Events ({typeFilterCount})"},all:{id:"search.type_filters.all",defaultMessage:"All ({typeFilterCount})"}});return t.jsx(B,{variant:"minimalTransparent",format:"secondary",onClick:()=>s(c),"data-filter-type":c,className:p(V.typeFilter,o(c),{[V.light]:r==="light"}),children:t.jsx(P,{size:300,children:K(b[d],{typeFilterCount:g})})})};return t.jsxs("div",{className:V.typeFiltersContainer,children:[n(z),n("video"),n("live_event"),n("collection"),n("product")]})},ts=({searchResults:e,userSubscribed:s,apiV1Url:a,purchasedProductIds:r,searchTerm:o,isLoading:n=!1,handleLoadMore:c,isLoadingMore:d=!1,typeFilter:g,handleTypeFilterChange:b,typeFilterCounts:j,theme:w,withFilters:L})=>{const[f,F]=l.useState(!0);l.useEffect(()=>{function v(){window.innerWidth>=H?F(!0):F(!1)}return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const I=()=>{window.Stats.trackEvent(window.Tracking.EVENTS.EVENT_SEARCH_ITEM_SELECTED)},u=e.map((v,h)=>{const R=new kt(v,null).getData();return t.jsx("li",{"data-index":h,"data-item-type":v.entity_type,className:p(E.searchResult,`search-result-${v.entity_type}`,{[E.withFilters]:L,[E.light]:w==="light"}),children:t.jsx(ue,{data:R,slug:v.entity.slug,userSubscribed:s,size:f?"medium":"small",thumbnailType:"aspect_ratio_16_9",apiUrl:a,"data-testid":"browse-card",purchasedProductIds:r,onClick:I})},`${v.entity_type}-${v.entity_id}`)}),C=()=>{if(n)return t.jsxs("div",{children:[t.jsx(Se,{typeFilter:g,handleTypeFilterChange:b,typeFilterCounts:j,theme:w}),t.jsx(se,{className:E.loader,size:"xl","data-testid":"spinner"})]});if(e.length){const h=j[g]||0;return t.jsxs("div",{children:[t.jsx(Se,{typeFilter:g,handleTypeFilterChange:b,typeFilterCounts:j,theme:w}),t.jsx("ul",{className:E.searchResults,children:u}),u.length<h&&t.jsx(B,{variant:"outline",format:"secondary",onClick:()=>c(),className:p(E.loadMore,{[E.light]:w==="light"}),loading:d,children:t.jsx(P,{size:300,children:t.jsx(_,{id:"search.load_more",defaultMessage:"Load More"})})})]})}else return t.jsx(Ut,{searchTerm:o,theme:w})};return t.jsx("div",{className:p(E.searchResultsContainer,{[E.withFilters]:L}),children:C()})},ss="Search-module__close-button",is="Search-module__icon",as="Search-module__light",rs="Search-module__content-container",ns="Search-module__show",os="Search-module__hide",ls="Search-module__overlay",cs="Search-module__search-container",ds="Search-module__results-content-container",k={"close-button":"Search-module__close-button",closeButton:ss,icon:is,light:as,"content-container":"Search-module__content-container",contentContainer:rs,show:ns,hide:os,overlay:ls,"search-container":"Search-module__search-container",searchContainer:cs,"results-content-container":"Search-module__results-content-container",resultsContentContainer:ds};const us=({overlay:e,site_id:s,api_v1_url:a,api_v2_url:r,purchased_product_ids:o,initial_search_term:n="",user_subscribed:c,theme:d="dark",show_filters:g})=>{const[b,j]=l.useState(""),[w,L]=l.useState(!e),[f,F]=l.useState(n||""),[I,u]=l.useState([]),[C,v]=l.useState(1),[h,m]=l.useState(z),[R,he]=l.useState({all:0}),[je,$]=l.useState(n!==null&&n.length>2),[Le,Z]=l.useState(!1),[D,me]=l.useState([]),[A,pe]=l.useState({}),U=l.useCallback(()=>{L(!1),F(""),u([]),me(ot(D)),pe({}),$(!1),m(z),window.history.pushState({},"",b||window.location.origin)},[b,D]);l.useEffect(()=>{if(e){const y=Array.from(document.querySelectorAll(".meta-data-link")),M=T=>{let x,fe;const ee=T.currentTarget;T.preventDefault(),ee!==null&&(x=ee.dataset.metaFieldName,fe=ee.dataset.metaFieldValue,L(!0),F(x+": "+fe),j(window.location.href))};return y.forEach(T=>{T.addEventListener("click",M)}),function(){y.forEach(x=>{x.removeEventListener("click",M)})}}},[b,e,U]),l.useEffect(()=>{if(e){const y=document.getElementById("search-nav-toggle"),M=x=>{x.key==="Escape"&&U()},T=x=>{x.preventDefault(),L(!0),j(window.location.href)};return y&&y.addEventListener("click",T),document.addEventListener("keydown",M),function(){y&&y.removeEventListener("click",T),document.removeEventListener("keydown",M)}}},[b,e,U]),l.useEffect(()=>{const y=f.length>=St||Object.keys(A).length;y&&$(!0);const M=async()=>{if(y)try{const x=await te(f,s,r,A,1,h);window.history.pushState({},"",window.location.origin+ut(f)),f&&window.Stats.trackEvent(window.Tracking.GOOGLE_ANALYTICS_4.EVENTS.SEARCH,{search_term:f}),$(!1),u(x.results),m(z),he({...x.type_counts,all:x.pagination.count})}catch{$(!1),u([])}else $(!1),f.length||(u([]),he({all:0}))},T=setTimeout(()=>{M()},500);return()=>clearTimeout(T)},[f,s,r,A]);const Fe=async()=>{try{Z(!0);const y=await te(f,s,r,A,C+1,h);v(C+1),u([...I,...y.results]),Z(!1)}catch{Z(!1)}},Ce=async y=>{if(y!==h)try{$(!0);const M=await te(f,s,r,A,1,y);v(1),m(y),$(!1),u(M.results)}catch{$(!1)}};return t.jsx(Ee,{value:Ie,children:t.jsx(Te,{theme:Me.light,children:t.jsx("div",{className:p(k.contentContainer,{[k.show]:w,[k.hide]:!w,[k.overlay]:e,[k.light]:d==="light"}),"data-testid":"search-test-container",children:t.jsxs("div",{className:k.searchContainer,children:[e&&t.jsx(B,{variant:"minimalTransparent",format:"secondary",onClick:U,icon:t.jsx(Ue,{className:k.icon}),className:p(k.closeButton,{[k.light]:d==="light"}),"data-testid":"search-test-close-button"}),t.jsx(Tt,{searchTerm:f,updateSearchTerm:F,theme:d}),t.jsxs("div",{className:k.resultsContentContainer,children:[g&&t.jsx(wt,{searchFilters:D,handleSearchFiltersChange:me,handleSelectedFiltersUpdate:pe,siteId:s,apiV2Url:r,theme:d}),t.jsx(ts,{searchResults:I,userSubscribed:c,apiV1Url:a,purchasedProductIds:o,searchTerm:f,isLoading:je,handleLoadMore:Fe,isLoadingMore:Le,typeFilter:h,typeFilterCounts:R,handleTypeFilterChange:Ce,theme:d,withFilters:D.length>0})]})]})})})})},G=document.getElementById("search-react-app");var we;const hs=JSON.parse(((we=G==null?void 0:G.dataset)==null?void 0:we.props)||"{}");ke.render(t.jsx(us,{...hs}),G);
//# sourceMappingURL=search-47ea45d9.js.map

</script>

</body>
</html>
