<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bmwusa-map-component.html</title>
</head>
<body>

<script>
/*! BMWUSA Vite Build 1731603678170 */
import{C as d}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/component.js";import{i as h}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/is-author.js";import{B as p,G as m,b as l}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.js";import{b as c}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/baseDomain.js";import{$ as u}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-measurement-data.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.esm.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/getbyourl.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/scroll-to.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/uid.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/zipcode.js";const{element:M}=l(".map-component"),r=c(),s={center:`${r}/content/dam/bmw/common/map-component/pin-center-point.png`,default:`${r}/content/dam/bmw/common/map-component/Pin_default_`,defaultHover:`${r}/content/dam/bmw/common/map-component/Pin_hover_`,detail:`${r}/content/dam/bmw/common/map-component/Pin_no_number.png`,primary:`${r}/content/dam/bmw/common/map-component/Pin_starred.png`};var o;new d({el:".map-component",name:"Map Component",subscriptions:{"dealermap.render":"render","dealermap.component-embedded":"processEmbeddedMaps","dealermap.map-reset":"reset","dealermap.map-selected":"selected","dealermap.map-update":"update","dealermap.no-results":"noResultsView","dealermap.search-view":"reset","mapcomponent.map-update-detail":"updateDetail","mapcomponent.marker-hover":"updateMarker","window.resizeEnd":"resizeEvt"},currentData:null,maxSize:p.getValue("sm","max"),isPhone:((o=p.current())==null?void 0:o.breakpoint)==="sm",beforeInit(){this.GMap=null},init(){this.detailImage=null,this.imageHolder=this.element.parentElement,this.generateMap=this.generateMap.bind(this),this.initializeMap=this.initializeMap.bind(this),this.noResultsView=this.noResultsView.bind(this),this.reset=this.reset.bind(this),this.selected=this.selected.bind(this),this.update=this.update.bind(this),this.updateMarker=this.updateMarker.bind(this),this.isEmbedded=u.qs(".map-component__map",this.element).classList.contains("dealer-embedded")},generateMap(a){this.GMap=new m(a,{zoom:4,center:{lat:38.550456,lng:-97.9889077},fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1},this.initializeMap),this.GMap.init()},reset(a,e){this.GMap&&(!(e!=null&&e!=!0)&&this.GMap.reset(),this.detailImage&&(this.imageHolder.removeChild(this.detailImage),this.detailImage=null))},processEmbeddedMaps(){this.embeddedMapExists=!0,this.generateMap(".dealer-embedded"),this.isEmbedded||this.element.parentNode.removeChild(this.element)},initializeMap(){window.google&&(this.isEmbedded?google.maps.event.addDomListener(window,"load",this.GMap.render):this.GMap.render(),PubSub.publish("map.done"))},resizeEvt(a,e){this.GMap&&(this.isPhone&&e.width>this.maxSize?this.isPhone=!1:!this.isPhone&&e.width<=this.maxSize&&(this.isPhone=!0),window!=null&&window.google&&this.GMap.setMobileDisplay(this.isPhone))},update(a,e){if(this.GMap){this.currentData=e,this.detailImage&&(this.imageHolder.removeChild(this.detailImage),this.detailImage=null),this.GMap.isDetail=!1,this.GMap.clearMarkers(),e.center&&(e.currentSearch!="latLonSearch"||e.currentSearch!="searchZip")&&this.GMap.addCenterMarker(e.center);const n=e.points.map(i=>(i.index&&!isNaN(i.index)||i.index==0?i.url=i.type=="primary"?s[i.type]:s[i.type]+(i.index+1)+".png":i.url=s.detail,i.icons=s,i));this.GMap.setMarkers(n)}},updateDetail(a,e){var n;if(this.GMap)if(this.currentData=e,this.GMap.isDetail=!0,this.GMap.clearMarkers(),((n=p.current())==null?void 0:n.breakpoint)==="sm"&&this.imageHolder&&this.currentData.points[0].img){const i=document.createElement("img");i.src=this.currentData.points[0].img,i.classList.add("detail-image"),this.imageHolder.appendChild(i),this.detailImage=i}else{this.detailImage&&this.imageHolder.removeChild(this.detailImage);const i=e.points.map(t=>(t.index&&!isNaN(t.index)||t.index==0?t.url=t.type=="primary"?s[t.type]:s[t.type]+(t.index+1)+".png":t.url=s.detail,t.icons=s,t));this.GMap.setMarkers(i)}},noResultsView(a,e){if(e&&this.GMap){if(this.GMap.clearMarkers(),e.points.length>0){const i=e.points.map(t=>(t.index&&!isNaN(t.index)||t.index==0?t.url=t.type=="primary"?s[t.type]:s[t.type]+(t.index+1)+".png":t.url=s.detail,t.icons=s,t));this.GMap.setMarkers(i,!0)}const n=this.currentData.center?this.currentData.center:this.GMap.getCenter();this.GMap.centerMap(n,!1),this.GMap.addCenterMarker(n)}},updateMarker(a,e){this.GMap&&this.GMap.setActiveMarker(e)},selected(a,e){PubSub.publish("dealermap.list-update",e.id)},render(){this.GMap||!h()&&!this.isEmbedded&&this.generateMap(M("map"))}});

</script>

</body>
</html>
