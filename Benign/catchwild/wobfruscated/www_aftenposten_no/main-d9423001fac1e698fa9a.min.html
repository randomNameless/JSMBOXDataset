<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>main-d9423001fac1e698fa9a.min.html</title>
</head>
<body>
<script>(self.webpackChunkfastenposten=self.webpackChunkfastenposten||[]).push([[8792,1271,9602,8931],{2795:(e,t,n)=>{"use strict";n.r(t),n.d(t,{HandlerType:()=>it,Logger:()=>st,StatusType:()=>tt,datadogLogs:()=>Yn});var r={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},i=console,o={};Object.keys(r).forEach((function(e){o[e]=i[e]}));var s="Datadog Browser SDK:",a={debug:o.debug.bind(i,s),log:o.log.bind(i,s),info:o.info.bind(i,s),warn:o.warn.bind(i,s),error:o.error.bind(i,s)},c="https://docs.datadoghq.com",u="".concat(c,"/real_user_monitoring/browser/troubleshooting"),l="More details:";function d(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){a.error(t,e)}}}var p,f=!1;function g(e){f=e}function h(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(p?v(r):r).apply(this,e)}}function v(e){return function(){return m(e,this,arguments)}}function m(e,t,n){try{return e.apply(t,n)}catch(e){if(y(e),p)try{p(e)}catch(e){y(e)}}}function y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f&&a.error.apply(a,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}(["[MONITOR]"],e,!1))}function b(e,t){return-1!==e.indexOf(t)}function w(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach((function(e){return t.push(e)}));else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function S(e){return Object.keys(e).map((function(t){return e[t]}))}function _(e,t){return e.slice(0,t.length)===t}function k(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e}function I(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}var C=/[^\u0000-\u007F]/;function P(e){return C.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length}function E(e,t){var n,r=I();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function T(e,t){return E(I(),"setTimeout")(v(e),t)}function O(e){E(I(),"clearTimeout")(e)}function j(e,t){return E(I(),"setInterval")(v(e),t)}function x(e){E(I(),"clearInterval")(e)}function A(e,t,n){var r,i,o=!n||void 0===n.leading||n.leading,s=!n||void 0===n.trailing||n.trailing,a=!1;return{throttled:function(){for(var n=[],c=0;c<arguments.length;c++)n[c]=arguments[c];a?r=n:(o?e.apply(void 0,n):r=n,a=!0,i=T((function(){s&&r&&e.apply(void 0,r),a=!1,r=void 0}),t))},cancel:function(){O(i),a=!1,r=void 0}}}function U(){}function L(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);var r=N(Object.prototype),i=N(Array.prototype),o=N(Object.getPrototypeOf(e)),s=N(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{r(),i(),o(),s()}}function N(e){var t=e,n=t.toJSON;return n?(delete t.toJSON,function(){t.toJSON=n}):U}function R(e,t){return Object.keys(e).some((function(n){return e[n]===t}))}function M(e){return 0===Object.keys(e).length}function D(e){var t=0,n=A((function(n){t=P(L(n)),e()}),200),r=n.throttled,i=n.cancel,o=function(){i(),t=0};return{updateCustomerData:function(e){M(e)?o():r(e)},resetCustomerData:o,getBytesCount:function(){return t},stop:function(){i()}}}function F(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function $(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var i=Array.isArray(e)?e:[],o=0;o<t.length;++o)i[o]=$(i[o],t[o],n);return i}var s="object"===F(e)?e:{};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=$(s[a],t[a],n));return s}}function B(e){return $(void 0,e)}function V(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];null!=o&&(e=$(e,o))}return e}function q(e,t){void 0===t&&(t=225280);var n=N(Object.prototype),r=N(Array.prototype),i=[],o=new WeakMap,s=H(e,"$",void 0,i,o),a=JSON.stringify(s),c=a?a.length:0;if(!(c>t)){for(;i.length>0&&c<t;){var u=i.shift(),l=0;if(Array.isArray(u.source))for(var d=0;d<u.source.length;d++){if(c+=void 0!==(p=H(u.source[d],u.path,d,i,o))?JSON.stringify(p).length:4,c+=l,l=1,c>t){G(t,"truncated",e);break}u.target[d]=p}else for(var d in u.source)if(Object.prototype.hasOwnProperty.call(u.source,d)){var p;if(void 0!==(p=H(u.source[d],u.path,d,i,o))&&(c+=JSON.stringify(p).length+l+d.length+3,l=1),c>t){G(t,"truncated",e);break}u.target[d]=p}}return n(),r(),s}G(t,"discarded",e)}function H(e,t,n,r,i){var o,s=function(e){var t=e;if(t&&"function"==typeof t.toJSON)try{return t.toJSON()}catch(e){}return e}(e);if(!s||"object"!=typeof s)return"bigint"==typeof(o=s)?"[BigInt] ".concat(o.toString()):"function"==typeof o?"[Function] ".concat(o.name||"unknown"):"symbol"==typeof o?"[Symbol] ".concat(o.description||o.toString()):o;var a=function(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(t&&t[1])return"[".concat(t[1],"]")}catch(e){}return"[Unserializable]"}(s);if("[Object]"!==a&&"[Array]"!==a&&"[Error]"!==a)return a;var c=e;if(i.has(c))return"[Reference seen at ".concat(i.get(c),"]");var u=void 0!==n?"".concat(t,".").concat(n):t,l=Array.isArray(s)?[]:{};return i.set(c,u),r.push({source:s,target:l,path:u}),l}function G(e,t,n){a.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),n)}var W=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return this.observers.push(e),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}();function z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new W((function(t){var n=e.map((function(e){return e.subscribe((function(e){return t.notify(e)}))}));return function(){return n.forEach((function(e){return e.unsubscribe()}))}}))}function J(e){var t={},n=new W,r={getContext:function(){return B(t)},setContext:function(i){"object"===F(i)?(t=q(i),e&&e.updateCustomerData(t)):r.clearContext(),n.notify()},setContextProperty:function(r,i){t[r]=q(i),e&&e.updateCustomerData(t),n.notify()},removeContextProperty:function(r){delete t[r],e&&e.updateCustomerData(t),n.notify()},clearContext:function(){t={},e&&e.resetCustomerData(),n.notify()},changeObservable:n};return r}var K={GRANTED:"granted",NOT_GRANTED:"not-granted"};function Y(e,t,n,r,i){return X(e,t,[n],r,i)}function X(e,t,n,r,i){var o=void 0===i?{}:i,s=o.once,a=o.capture,c=o.passive,u=v((function(t){(t.isTrusted||t.__ddIsTrusted||e.allowUntrustedEvents)&&(s&&p(),r(t))})),l=c?{capture:a,passive:c}:a,d=E(t,"addEventListener");function p(){var e=E(t,"removeEventListener");n.forEach((function(n){return e.call(t,n,u,l)}))}return n.forEach((function(e){return d.call(t,e,u,l)})),{stop:p}}var Z=[];function Q(e,t,n,r){var i=function(e,t){return"".concat("_dd_c","_").concat(e,"_").concat(t)}(n,r);function o(){var e=localStorage.getItem(i);return null!==e?JSON.parse(e):{}}Z.push(Y(e,window,"storage",(function(e){var n=e.key;i===n&&t.setContext(o())}))),t.changeObservable.subscribe((function(){localStorage.setItem(i,JSON.stringify(t.getContext()))})),t.setContext(V(o(),t.getContext()))}var ee="?";function te(e){var t=[],n=le(e,"stack"),r=String(e);return n&&_(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach((function(e){var n=function(e){var t=ie.exec(e);if(t){var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),i=oe.exec(t[2]);return r&&i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||ee,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}}(e)||function(e){var t=se.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:ee,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=ae.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||ee,line:+t[3],url:t[2]}}(e)||function(e){var t=ce.exec(e);if(t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=ue.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||ee,line:t[4]?+t[4]:void 0,url:t[3]}}}(e);n&&(!n.func&&n.line&&(n.func=ee),t.push(n))})),{message:le(e,"message"),name:le(e,"name"),stack:t}}var ne="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",re="(?::(\\d+))",ie=new RegExp("^\\s*at (.*?) ?\\(".concat(ne).concat(re,"?").concat(re,"?\\)?\\s*$"),"i"),oe=new RegExp("\\((\\S*)".concat(re).concat(re,"\\)")),se=new RegExp("^\\s*at ?".concat(ne).concat(re,"?").concat(re,"??\\s*$"),"i"),ae=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ce=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,ue=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function le(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}var de=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function pe(){var e,t=new Error;if(!t.stack)try{throw t}catch(e){}return m((function(){var n=te(t);n.stack=n.stack.slice(2),e=fe(n)})),e}function fe(e){var t=ge(e);return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",i=e.line?":".concat(e.line):"",o=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(n).concat(r," @ ").concat(e.url).concat(i).concat(o)})),t}function ge(e){return"".concat(e.name||"Error",": ").concat(e.message)}var he,ve="No stack, consider using an instance of Error";function me(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,i=e.startClocks,o=e.nonErrorPrefix,s=e.source,a=e.handling,c=n instanceof Error,u=function(e,t,n,r){return(null==e?void 0:e.message)&&(null==e?void 0:e.name)?e.message:t?"Empty message":"".concat(n," ").concat(L(q(r)))}(t,c,o,n),l=function(e,t){return void 0!==t&&(!!e||t.stack.length>0&&(t.stack.length>1||void 0!==t.stack[0].url))}(c,t)?fe(t):ve,d=c?be(n,s):void 0;return{startClocks:i,source:s,handling:a,handlingStack:r,originalError:n,type:t?t.name:void 0,message:u,stack:l,causes:d,fingerprint:ye(n)}}function ye(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function be(e,t){for(var n=e,r=[];(null==n?void 0:n.cause)instanceof Error&&r.length<10;){var i=te(n.cause);r.push({message:n.cause.message,source:t,type:null==i?void 0:i.name,stack:i&&fe(i)}),n=n.cause}return r.length?r:void 0}!function(e){e.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",e.REMOTE_CONFIGURATION="remote_configuration",e.UPDATE_VIEW_NAME="update_view_name",e.LONG_ANIMATION_FRAME="long_animation_frame"}(he||(he={}));var we=new Set;var Se,_e="datadoghq.com",ke="pci.browser-intake-datadoghq.com",Ie=1e3,Ce=6e4;function Pe(){return(new Date).getTime()}function Ee(){return Pe()}function Te(){return performance.now()}function Oe(){return{relative:Te(),timeStamp:Ee()}}function je(){return void 0===Se&&(Se=performance.timing.navigationStart),Se}function xe(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}function Ae(e){return 0!==e&&100*Math.random()<=e}function Ue(){var e,t=window.navigator;return{status:t.onLine?"connected":"not_connected",interfaces:t.connection&&t.connection.type?[t.connection.type]:void 0,effective_type:null===(e=t.connection)||void 0===e?void 0:e.effectiveType}}function Le(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function Ne(){var e=[];return{add:function(t){e.push(t)>500&&e.splice(0,1)},remove:function(t){Le(e,t)},drain:function(t){e.forEach((function(e){return e(t)})),e.length=0}}}var Re="log",Me="configuration",De="usage",Fe=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],$e=["ddog-gov.com"],Be=Ne(),Ve=function(e){Be.add((function(){return Ve(e)}))};function qe(e,t){y(r.debug,e,t),Ve(k({type:Re,message:e,status:"debug"},t))}function He(e,t){Ve(k({type:Re,status:"error"},function(e){if(e instanceof Error){var t=te(e);return{error:{kind:t.name,stack:fe(Ge(t))},message:t.message}}return{error:{stack:ve},message:"".concat("Uncaught"," ").concat(L(e))}}(e),t))}function Ge(e){return e.stack=e.stack.filter((function(e){return!e.url||Fe.some((function(t){return _(e.url,t)}))})),e}function We(e){var t=k({},e);return["id","name","email"].forEach((function(e){e in t&&(t[e]=String(t[e]))})),t}function ze(e,t){t.silentMultipleInit||a.error("".concat(e," is already initialized."))}var Je,Ke="agent",Ye="console",Xe="logger",Ze="source",Qe="report";function et(e,t,n){var r=n.getHandler(),i=Array.isArray(r)?r:[r];return nt[e]>=nt[n.getLevel()]&&b(i,t)}var tt={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},nt=((Je={})[tt.ok]=0,Je[tt.debug]=1,Je[tt.info]=2,Je[tt.notice]=4,Je[tt.warn]=5,Je[tt.error]=6,Je[tt.critical]=7,Je[tt.alert]=8,Je[tt.emerg]=9,Je);function rt(e,t){var n=(void 0===t?{}:t).includeMessage,r=void 0!==n&&n;return{stack:e.stack,kind:e.type,message:r?e.message:void 0,causes:e.causes,fingerprint:e.fingerprint,handling:e.handling}}var it={console:"console",http:"http",silent:"silent"},ot=Object.keys(tt),st=function(){function e(e,t,n,r,i,o){void 0===r&&(r=it.http),void 0===i&&(i=tt.debug),void 0===o&&(o={}),this.handleLogStrategy=e,this.handlerType=r,this.level=i,this.contextManager=J(t),this.contextManager.setContext(o),n&&this.contextManager.setContextProperty("logger",{name:n})}return e.prototype.logImplementation=function(e,t,n,r,i){void 0===n&&(n=tt.info);var o,s=q(t);o=null!=r?V({error:rt(me({stackTrace:r instanceof Error?te(r):void 0,originalError:r,nonErrorPrefix:"Provided",source:Xe,handling:"handled",startClocks:Oe()}),{includeMessage:!0})},s):s,this.handleLogStrategy({message:q(e),context:o,status:n},this,i)},e.prototype.log=function(e,t,n,r){var i;void 0===n&&(n=tt.info),et(n,it.http,this)&&(i=pe()),this.logImplementation(e,t,n,r,i)},e.prototype.setContext=function(e){this.contextManager.setContext(e)},e.prototype.getContext=function(){return this.contextManager.getContext()},e.prototype.setContextProperty=function(e,t){this.contextManager.setContextProperty(e,t)},e.prototype.removeContextProperty=function(e){this.contextManager.removeContextProperty(e)},e.prototype.clearContext=function(){this.contextManager.clearContext()},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([h],e.prototype,"logImplementation",null),e}();function at(e){return function(t,n,r){var i;et(e,it.http,this)&&(i=pe()),this.logImplementation(t,n,e,r,i)}}function ct(){var e=I().DatadogEventBridge;if(e)return{getCapabilities:function(){var t;return JSON.parse((null===(t=e.getCapabilities)||void 0===t?void 0:t.call(e))||"[]")},getPrivacyLevel:function(){var t;return null===(t=e.getPrivacyLevel)||void 0===t?void 0:t.call(e)},getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n,r){var i=r?{id:r}:void 0;e.send(JSON.stringify({eventType:t,event:n,view:i}))}}}function ut(e){var t;void 0===e&&(e=null===(t=I().location)||void 0===t?void 0:t.hostname);var n=ct();return!!n&&n.getAllowedWebViewHosts().some((function(t){return e===t||(n=e,r=".".concat(t),n.slice(-r.length)===r);var n,r}))}function lt(e,t,n,r){var i=(void 0===r?{}:r).computeHandlingStack,o=e[t];if("function"!=typeof o){if(!(t in e)||!_(t,"on"))return{stop:U};o=U}var s=!1,a=function(){if(s)return o.apply(this,arguments);var e,t=w(arguments);m(n,null,[{target:this,parameters:t,onPostCall:function(t){e=t},handlingStack:i?pe():void 0}]);var r=o.apply(this,t);return e&&m(e,null,[r]),r};return e[t]=a,{stop:function(){s=!0,e[t]===a&&(e[t]=o)}}}function dt(e){return function(e,t){var n=function(){if(void 0===pt)try{var e=new gt("http://test/path");pt="http://test/path"===e.href}catch(e){pt=!1}return pt?gt:void 0}();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw new Error("Failed to construct URL: ".concat(String(n)," ").concat(L({url:e,base:t})))}if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var r=document,i=r.createElement("a");if(void 0!==t){var o=(r=document.implementation.createHTMLDocument("")).createElement("base");o.href=t,r.head.appendChild(o),r.body.appendChild(i)}return i.href=e,i}(e,location.href).href}st.prototype.ok=at(tt.ok),st.prototype.debug=at(tt.debug),st.prototype.info=at(tt.info),st.prototype.notice=at(tt.notice),st.prototype.warn=at(tt.warn),st.prototype.error=at(tt.error),st.prototype.critical=at(tt.critical),st.prototype.alert=at(tt.alert),st.prototype.emerg=at(tt.emerg);var pt,ft,gt=URL;function ht(){return ft||(ft=new W((function(e){if(window.fetch){var t=lt(window,"fetch",(function(t){return function(e,t){var n=e.parameters,r=e.onPostCall,i=e.handlingStack,o=n[0],s=n[1],a=s&&s.method;void 0===a&&o instanceof Request&&(a=o.method);var c=void 0!==a?String(a).toUpperCase():"GET",u=o instanceof Request?o.url:dt(String(o)),l={state:"start",init:s,input:o,method:c,startClocks:Oe(),url:u,handlingStack:i};t.notify(l),n[0]=l.input,n[1]=l.init,r((function(e){return function(e,t,n){var r=n;function i(t){r.state="resolve",k(r,t),e.notify(r)}t.then(v((function(e){i({response:e,responseType:e.type,status:e.status,isAborted:!1})})),v((function(e){var t,n;i({status:0,isAborted:(null===(n=null===(t=r.init)||void 0===t?void 0:t.signal)||void 0===n?void 0:n.aborted)||e instanceof DOMException&&e.code===DOMException.ABORT_ERR,error:e})})))}(t,e,l)}))}(t,e)}),{computeHandlingStack:!0}).stop;return t}}))),ft}function vt(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,vt)}var mt,yt,bt,wt=/([\w-]+)\s*=\s*([^;]+)/g;function St(e,t,n){void 0===n&&(n="");var r=e.charCodeAt(t-1),i=r>=55296&&r<=56319?t+1:t;return e.length<=i?e:"".concat(e.slice(0,i)).concat(n)}function _t(e,t,n,r){var i=new Date;i.setTime(i.getTime()+n);var o="expires=".concat(i.toUTCString()),s=r&&r.crossSite?"none":"strict",a=r&&r.domain?";domain=".concat(r.domain):"",c=r&&r.secure?";secure":"",u=r&&r.partitioned?";partitioned":"";document.cookie="".concat(e,"=").concat(t,";").concat(o,";path=/;samesite=").concat(s).concat(a).concat(c).concat(u)}function kt(e){return function(e,t){for(wt.lastIndex=0;;){var n=wt.exec(e);if(!n)break;if(n[1]===t)return n[2]}}(document.cookie,e)}function It(e){return yt||(yt=function(e){var t=new Map;for(wt.lastIndex=0;;){var n=wt.exec(e);if(!n)break;t.set(n[1],n[2])}return t}(document.cookie)),yt.get(e)}function Ct(e,t){_t(e,"",0,t)}var Pt="_dd_s",Et=144e5,Tt=9e5,Ot=/^([a-zA-Z]+)=([a-z0-9-]+)$/;function jt(e){return M(e)}function xt(e){return!jt(e)}function At(e){return void 0!==e.isExpired||!((void 0===(t=e).created||Pe()-Number(t.created)<Et)&&(void 0===t.expire||Pe()<Number(t.expire)));var t}function Ut(e){e.expire=String(Pe()+Tt)}function Lt(e){return(t=e,Object.keys(t).map((function(e){return[e,t[e]]}))).map((function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n)})).join("&");var t}function Nt(e){var t={};return function(e){return!!e&&(-1!==e.indexOf("&")||Ot.test(e))}(e)&&e.split("&").forEach((function(e){var n=Ot.exec(e);if(null!==n){var r=n[1],i=n[2];t[r]=i}})),t}function Rt(){return Nt(kt(Pt))}function Mt(e){localStorage.setItem(Pt,Lt(e))}function Dt(){return Nt(localStorage.getItem(Pt))}function Ft(){Mt({isExpired:"1"})}var $t,Bt=[];function Vt(e,t,n){var r;void 0===n&&(n=0);var i=t.isLockEnabled,o=t.persistSession,s=t.expireSession,a=function(e){return o(k({},e,{lock:u}))},c=function(){var e=t.retrieveSession(),n=e.lock;return e.lock&&delete e.lock,{session:e,lock:n}};if($t||($t=e),e===$t)if(i&&n>=100)Ht(t);else{var u,l=c();if(i){if(l.lock)return void qt(e,t,n);if(u=vt(),a(l.session),(l=c()).lock!==u)return void qt(e,t,n)}var d=e.process(l.session);if(i&&(l=c()).lock!==u)qt(e,t,n);else{if(d&&(At(d)?s():(Ut(d),i?a(d):o(d))),i&&(!d||!At(d))){if((l=c()).lock!==u)return void qt(e,t,n);o(l.session),d=l.session}null===(r=e.after)||void 0===r||r.call(e,d||l.session),Ht(t)}}else Bt.push(e)}function qt(e,t,n){T((function(){Vt(e,t,n+1)}),10)}function Ht(e){$t=void 0;var t=Bt.shift();t&&Vt(t,e)}var Gt=Ie;function Wt(e){var t=function(e){var t=function(e){var t={};return t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===bt){for(var e="dd_site_test_".concat(vt()),t=window.location.hostname.split("."),n=t.pop();t.length&&!kt(e);)n="".concat(t.pop(),".").concat(n),_t(e,"test",Ie,{domain:n});Ct(e,{domain:n}),bt=n}return bt}()),t}(e);return function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(vt()),n="test";_t(t,n,Ce,e);var r=kt(t)===n;return Ct(t,e),r}catch(e){return a.error(e),!1}}(t)?{type:"Cookie",cookieOptions:t}:void 0}(e);return!t&&e.allowFallbackToLocalStorage&&(t=function(){try{var e=vt(),t="".concat("_dd_test_").concat(e);localStorage.setItem(t,e);var n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:"LocalStorage"}:void 0}catch(e){return}}()),t}function zt(e,t,n){var r,i,o,s,a=new W,c=new W,u=new W,l="Cookie"===e.type?(i=e.cookieOptions,s={isLockEnabled:1===(null!=mt?mt:mt=function(e){var t;void 0===e&&(e=window);var n=e.navigator.userAgent;return e.chrome||/HeadlessChrome/.test(n)?1:0===(null===(t=e.navigator.vendor)||void 0===t?void 0:t.indexOf("Apple"))||/safari/i.test(n)&&!/chrome|android/i.test(n)?2:e.document.documentMode?0:3}()),persistSession:(o=i,function(e){_t(Pt,Lt(e),Tt,o)}),retrieveSession:Rt,expireSession:function(){return function(e){_t(Pt,Lt({isExpired:"1"}),Et,e)}(i)}},function(e){if(!It(Pt)){var t=It("_dd"),n=It("_dd_r"),r=It("_dd_l"),i={};t&&(i.id=t),r&&/^[01]$/.test(r)&&(i.logs=r),n&&/^[012]$/.test(n)&&(i.rum=n),xt(i)&&(Ut(i),e.persistSession(i))}}(s),s):{isLockEnabled:!1,persistSession:Mt,retrieveSession:Dt,expireSession:Ft},d=l.expireSession,p=j((function(){Vt({process:function(e){return At(e)?{isExpired:"1"}:void 0},after:v},l)}),Gt);m();var f=A((function(){Vt({process:function(e){if(!jt(e)){var r=v(e);return function(e){if(jt(e))return!1;var r=n(e[t]),i=r.trackingType,o=r.isTracked;e[t]=i,delete e.isExpired,o&&!e.id&&(e.id=vt(),e.created=String(Pe()))}(r),r}},after:function(e){xt(e)&&!y()&&function(e){r=e,a.notify()}(e),r=e}},l)}),Gt),g=f.throttled,h=f.cancel;function v(e){return At(e)&&(e={isExpired:"1"}),y()&&(function(e){return r.id!==e.id||r[t]!==e[t]}(e)?(r={isExpired:"1"},c.notify()):(u.notify({previousState:r,newState:e}),r=e)),e}function m(){Vt({process:function(e){if(jt(e))return{isExpired:"1"}},after:function(e){r=e}},l)}function y(){return void 0!==r[t]}return{expandOrRenewSession:g,expandSession:function(){Vt({process:function(e){return y()?v(e):void 0}},l)},getSession:function(){return r},renewObservable:a,expireObservable:c,sessionStateUpdateObservable:u,restartSession:m,expire:function(){h(),d(),v({isExpired:"1"})},stop:function(){x(p)},updateSessionState:function(e){Vt({process:function(t){return k({},t,e)},after:v},l)}}}function Jt(e,t,n){var r=function(e,t){var n="/api/v2/".concat(t),r=e.proxy;if("string"==typeof r){var i=dt(r);return function(e){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(e)))}}if("function"==typeof r)return function(e){return r({path:n,parameters:e})};var o=function(e,t){var n=t.site,r=void 0===n?_e:n,i=t.internalAnalyticsSubdomain;if("logs"===e&&t.usePciIntake&&r===_e)return ke;if(i&&r===_e)return"".concat(i,".").concat(_e);if("dd0g-gov.com"===r)return"http-intake.logs.".concat(r);var o=r.split("."),s=o.pop();return"browser-intake-".concat(o.join("-"),".").concat(s)}(t,e);return function(e){return"https://".concat(o).concat(n,"?").concat(e)}}(e,t);return{build:function(i,o){var s=function(e,t,n,r,i){var o=e.clientToken,s=e.internalAnalyticsSubdomain,a=i.retry,c=i.encoding,u=["sdk_version:".concat("5.28.0"),"api:".concat(r)].concat(n);a&&u.push("retry_count:".concat(a.count),"retry_after:".concat(a.lastFailureStatus));var l=["ddsource=browser","ddtags=".concat(encodeURIComponent(u.join(","))),"dd-api-key=".concat(o),"dd-evp-origin-version=".concat(encodeURIComponent("5.28.0")),"dd-evp-origin=browser","dd-request-id=".concat(vt())];return c&&l.push("dd-evp-encoding=".concat(c)),"rum"===t&&l.push("batch_time=".concat(Ee())),s&&l.reverse(),l.join("&")}(e,t,n,i,o);return r(s)},urlPrefix:r(""),trackType:t}}function Kt(e,t){var n=200-e.length-1;(t.length>n||function(e){return!!function(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch(e){return!1}}()&&new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(e)}(t))&&a.warn("".concat(e," value doesn't meet tag requirements and will be sanitized. ").concat(l," ").concat(c,"/getting_started/tagging/#defining-tags"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}function Yt(e,t){return null==e||"string"==typeof e||(a.error("".concat(t," must be defined as a string")),!1)}function Xt(e,t){return!!(void 0===e||(n=e,function(e){return"number"==typeof e}(n)&&n>=0&&n<=100))||(a.error("".concat(t," Sample Rate should be a number between 0 and 100")),!1);var n}function Zt(e){var t,n,r,i,o;if(e&&e.clientToken){if((!(s=e.site)||"string"!=typeof s||/(datadog|ddog|datad0g|dd0g)/.test(s)||(a.error("Site should be a valid Datadog site. ".concat(l," ").concat(c,"/getting_started/site/.")),0))&&Xt(e.sessionSampleRate,"Session")&&Xt(e.telemetrySampleRate,"Telemetry")&&Xt(e.telemetryConfigurationSampleRate,"Telemetry Configuration")&&Xt(e.telemetryUsageSampleRate,"Telemetry Usage")&&Yt(e.version,"Version")&&Yt(e.env,"Env")&&Yt(e.service,"Service")){var s;if(void 0===e.trackingConsent||R(K,e.trackingConsent))return k({beforeSend:e.beforeSend&&d(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:Wt(e),sessionSampleRate:null!==(t=e.sessionSampleRate)&&void 0!==t?t:100,telemetrySampleRate:null!==(n=e.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(r=e.telemetryConfigurationSampleRate)&&void 0!==r?r:5,telemetryUsageSampleRate:null!==(i=e.telemetryUsageSampleRate)&&void 0!==i?i:5,service:e.service||void 0,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,trackingConsent:null!==(o=e.trackingConsent)&&void 0!==o?o:K.GRANTED,storeContextsAcrossPages:!!e.storeContextsAcrossPages,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},function(e){var t=e.site||_e,n=function(e){var t=e.env,n=e.service,r=e.version,i=e.datacenter,o=[];return t&&o.push(Kt("env",t)),n&&o.push(Kt("service",n)),r&&o.push(Kt("version",r)),i&&o.push(Kt("datacenter",i)),o}(e),r=function(e,t){return{logsEndpointBuilder:Jt(e,"logs",t),rumEndpointBuilder:Jt(e,"rum",t),sessionReplayEndpointBuilder:Jt(e,"replay",t)}}(e,n),i=function(e,t){var n=S(e).map((function(e){return e.urlPrefix}));return t===_e&&n.push("https://".concat(ke,"/")),n}(r,t),o=function(e,t,n){if(e.replica){var r=k({},e,{site:_e,clientToken:e.replica.clientToken}),i={logsEndpointBuilder:Jt(r,"logs",n),rumEndpointBuilder:Jt(r,"rum",n)};return t.push.apply(t,S(i).map((function(e){return e.urlPrefix}))),k({applicationId:e.replica.applicationId},i)}}(e,i,n);return k({isIntakeUrl:function(e){return i.some((function(t){return 0===e.indexOf(t)}))},replica:o,site:t},r)}(e));a.error('Tracking Consent should be either "granted" or "not-granted"')}}else a.error("Client Token is not configured, we will not send any data.")}var Qt={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function en(e){return k({startClocks:Oe(),source:Qe,handling:"unhandled"},e)}function tn(e,t,n,r,i){return n?fe({name:e,message:t,stack:[{func:"?",url:n,line:null!=r?r:void 0,column:null!=i?i:void 0}]}):void 0}function nn(e,t,n){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every((function(e){return b(t,e)}))?"all"===e?t:(r=e,i=new Set,r.forEach((function(e){return i.add(e)})),w(i)):void a.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));var r,i}function rn(e,t,n){var i,o,s=Ne(),c=t.observable.subscribe(u);function u(){if(o&&i&&t.isGranted()){c.unsubscribe();var e=n(i,o);s.drain(e)}}return{init:function(e){if(e)if(s=e.enableExperimentalFeatures,Array.isArray(s)&&s.filter((function(e){return R(he,e)})).forEach((function(e){we.add(e)})),ut()&&(e=function(e){return k({},e,{clientToken:"empty"})}(e)),i=e,o)ze("DD_LOGS",e);else{var n=function(e){!0===e.usePciIntake&&e.site&&"datadoghq.com"!==e.site&&a.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");var t=Zt(e),n=nn(e.forwardConsoleLogs,S(r),"Forward Console Logs"),i=nn(e.forwardReports,S(Qt),"Forward Reports");if(t&&n&&i)return e.forwardErrorsToLogs&&!b(n,r.error)&&n.push(r.error),k({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:n,forwardReports:i,requestErrorResponseLengthLimit:32768,sendLogsAfterSessionExpiration:!!e.sendLogsAfterSessionExpiration},t)}(e);n&&(o=n,ht().subscribe(U),t.tryToInit(n.trackingConsent),u())}else a.error("Missing configuration");var s},get initConfiguration(){return i},getInternalContext:U,handleLog:function(t,n,r,i,o){void 0===i&&(i=e()),void 0===o&&(o=Ee()),s.add((function(e){return e.handleLog(t,n,r,i,o)}))}}}var on="logs",sn={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function an(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||It("datadog-synthetics-injects-rum"))}function cn(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||It("datadog-synthetics-result-id");return"string"==typeof e?e:void 0}var un=1/0;var ln=Et,dn=[];function pn(e,t,n,r){var i=new W,o=new W,s=zt(e.sessionStoreStrategyType,t,n);dn.push((function(){return s.stop()}));var a=function(e){var t=e.expireDelay,n=e.maxEntries,r=[],i=j((function(){return function(){for(var e=Te()-t;r.length>0&&r[r.length-1].endTime<e;)r.pop()}()}),6e4);return{add:function(e,t){var i={value:e,startTime:t,endTime:un,remove:function(){Le(r,i)},close:function(e){i.endTime=e}};return n&&r.length>=n&&r.pop(),r.unshift(i),i},find:function(e,t){void 0===e&&(e=un),void 0===t&&(t={returnInactive:!1});for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o.startTime<=e){if(t.returnInactive||e<=o.endTime)return o.value;break}}},closeActive:function(e){var t=r[0];t&&t.endTime===un&&t.close(e)},findAll:function(e,t){void 0===e&&(e=un),void 0===t&&(t=0);var n=e+t;return r.filter((function(t){return t.startTime<=n&&e<=t.endTime})).map((function(e){return e.value}))},reset:function(){r=[]},stop:function(){x(i)}}}({expireDelay:ln});function c(){return{id:s.getSession().id,trackingType:s.getSession()[t],isReplayForced:!!s.getSession().forcedReplay}}return dn.push((function(){return a.stop()})),s.renewObservable.subscribe((function(){a.add(c(),Te()),i.notify()})),s.expireObservable.subscribe((function(){o.notify(),a.closeActive(Te())})),s.expandOrRenewSession(),a.add(c(),[0,je()][0]),r.observable.subscribe((function(){r.isGranted()?s.expandOrRenewSession():s.expire()})),function(e){var t=X(e,window,["click","touchstart","keydown","scroll"],(function(){r.isGranted()&&s.expandOrRenewSession()}),{capture:!0,passive:!0}).stop;dn.push(t)}(e),function(e){var t=function(){"visible"===document.visibilityState&&s.expandSession()},n=Y(e,document,"visibilitychange",t).stop;dn.push(n);var r=j(t,6e4);dn.push((function(){x(r)}))}(e),function(e){var t=Y(e,window,"resume",(function(){return s.restartSession()}),{capture:!0}).stop;dn.push(t)}(e),{findSession:function(e,t){return a.find(e,t)},renewObservable:i,expireObservable:o,sessionStateUpdateObservable:s.sessionStateUpdateObservable,expire:s.expire,updateSessionState:s.updateSessionState}}function fn(e){return Ae(e.sessionSampleRate)?"1":"0"}var gn=!1;function hn(e){var t,n=window;if(an()){var r=i(n.DD_RUM_SYNTHETICS);return r||gn||(gn=!0,qe("Logs sent before RUM is injected by the synthetics worker",{testId:(t=window._DATADOG_SYNTHETICS_PUBLIC_ID||It("datadog-synthetics-public-id"),"string"==typeof t?t:void 0),resultId:cn()})),r}return i(n.DD_RUM);function i(t){if(t&&t.getInternalContext)return t.getInternalContext(e)}}function vn(e,t,n,r,i){var o=ot.concat(["custom"]),s={};o.forEach((function(e){var n,r,o,a,c;s[e]=(n=e,r=t.eventRateLimiterThreshold,o=i,a=0,c=!1,{isLimitReached:function(){if(0===a&&T((function(){a=0}),Ce),(a+=1)<=r||c)return c=!1,!1;if(a===r+1){c=!0;try{o({message:"Reached max number of ".concat(n,"s by minute: ").concat(r),source:Ke,startClocks:Oe()})}finally{c=!1}}return!0}})})),n.subscribe(0,(function(i){var o,a,c=i.rawLogsEvent,u=i.messageContext,l=void 0===u?void 0:u,d=i.savedCommonContext,p=void 0===d?void 0:d,f=i.domainContext,g=c.date-je(),h=e.findTrackedSession(g);if(h||t.sendLogsAfterSessionExpiration&&e.findTrackedSession(g,{returnInactive:!0})){var v=p||r(),m=V({service:t.service,session_id:h?h.id:void 0,usr:M(v.user)?void 0:v.user,view:v.view},v.context,hn(g),c,l);!1===(null===(o=t.beforeSend)||void 0===o?void 0:o.call(t,m,f))||m.origin!==Ke&&(null!==(a=s[m.status])&&void 0!==a?a:s.custom).isLimitReached()||n.notify(1,m)}}))}var mn,yn={};var bn,wn=((mn={})[r.log]=tt.info,mn[r.debug]=tt.debug,mn[r.info]=tt.info,mn[r.warn]=tt.warn,mn[r.error]=tt.error,mn),Sn=new WeakMap;function _n(e){var t=e.target,n=e.parameters,r=n[0],i=n[1];Sn.set(t,{state:"open",method:String(r).toUpperCase(),url:dt(String(i))})}function kn(e){var t=e.target,n=Sn.get(t);n&&(n.isAborted=!0)}function In(e){return e>=500}function Cn(e,t){if(!e.forwardErrorsToLogs)return{stop:U};var n=function(e){return bn||(bn=function(e){return new W((function(t){var n=lt(XMLHttpRequest.prototype,"open",_n).stop,r=lt(XMLHttpRequest.prototype,"send",(function(n){!function(e,t,n){var r=e.target,i=e.handlingStack,o=Sn.get(r);if(o){var s=o;s.state="start",s.startClocks=Oe(),s.isAborted=!1,s.xhr=r,s.handlingStack=i;var a=!1,c=lt(r,"onreadystatechange",(function(){r.readyState===XMLHttpRequest.DONE&&u()})).stop,u=function(){if(l(),c(),!a){a=!0;var e,t=o;t.state="complete",t.duration=(e=s.startClocks.timeStamp,Ee()-e),t.status=r.status,n.notify(k({},t))}},l=Y(t,r,"loadend",u).stop;n.notify(s)}}(n,e,t)}),{computeHandlingStack:!0}).stop,i=lt(XMLHttpRequest.prototype,"abort",kn).stop;return function(){n(),r(),i()}}))}(e)),bn}(e).subscribe((function(e){"complete"===e.state&&i("xhr",e)})),r=ht().subscribe((function(e){"resolve"===e.state&&i("fetch",e)}));function i(n,r){function i(e){var i={isAborted:r.isAborted,handlingStack:r.handlingStack};t.notify(0,{rawLogsEvent:{message:"".concat(En(n)," error ").concat(r.method," ").concat(r.url),date:r.startClocks.timeStamp,error:{stack:e||"Failed to load",handling:void 0},http:{method:r.method,status_code:r.status,url:r.url},status:tt.error,origin:"network"},domainContext:i})}e.isIntakeUrl(r.url)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(r)&&!In(r.status)||("xhr"in r?function(e,t,n){"string"==typeof e.response?n(Pn(e.response,t)):n(e.response)}(r.xhr,e,i):r.response?function(e,t,n){var r=function(e){try{return e.clone()}catch(e){return}}(e);r&&r.body?window.TextDecoder?function(e,t,n){!function(e,t,n){var r=e.getReader(),i=[],o=0;function s(){var e,s;if(r.cancel().catch(U),n.collectStreamBody){var a;if(1===i.length)a=i[0];else{a=new Uint8Array(o);var c=0;i.forEach((function(e){a.set(e,c),c+=e.length}))}e=a.slice(0,n.bytesLimit),s=a.length>n.bytesLimit}t(void 0,e,s)}!function e(){r.read().then(v((function(t){t.done?s():(n.collectStreamBody&&i.push(t.value),(o+=t.value.length)>n.bytesLimit?s():e())})),v((function(e){return t(e)})))}()}(e,(function(e,t,r){if(e)n(e);else{var i=(new TextDecoder).decode(t);r&&(i+="..."),n(void 0,i)}}),{bytesLimit:t,collectStreamBody:!0})}(r.body,t.requestErrorResponseLengthLimit,(function(e,t){n(e?"Unable to retrieve response: ".concat(e):t)})):r.text().then(v((function(e){return n(Pn(e,t))})),v((function(e){return n("Unable to retrieve response: ".concat(e))}))):n()}(r.response,e,i):r.error&&function(e,t,n){n(Pn(fe(te(e)),t))}(r.error,e,i))}return{stop:function(){n.unsubscribe(),r.unsubscribe()}}}function Pn(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function En(e){return"xhr"===e?"XHR":"Fetch"}function Tn(e){var t,n=function(t,n){var r=me({stackTrace:t,originalError:n,startClocks:Oe(),nonErrorPrefix:"Uncaught",source:Ze,handling:"unhandled"});e.notify(r)},r=(t=n,lt(window,"onerror",(function(e){var n,r=e.parameters,i=r[0],o=r[1],s=r[2],a=r[3],c=r[4];n=c instanceof Error?te(c):function(e,t,n,r){var i=[{url:t,column:r,line:n}],o=function(e){var t,n,r;return"[object String]"==={}.toString.call(e)&&(n=(t=de.exec(e))[1],r=t[2]),{name:n,message:r}}(e);return{name:o.name,message:o.message,stack:i}}(i,o,s,a),t(n,null!=c?c:i)}))).stop,i=function(e){return lt(window,"onunhandledrejection",(function(t){var n=t.parameters[0].reason||"Empty reason",r=te(n);e(r,n)}))}(n).stop;return{stop:function(){r(),i()}}}var On,jn=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach((function(e){return e(t)}))},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter((function(e){return t!==e}))}}},e}();var xn=((On={})[tt.ok]=r.debug,On[tt.debug]=r.debug,On[tt.info]=r.info,On[tt.notice]=r.info,On[tt.warn]=r.warn,On[tt.error]=r.error,On[tt.critical]=r.error,On[tt.alert]=r.error,On[tt.emerg]=r.error,On);function An(e){var t=e.encoder,n=e.request,r=e.flushController,i=e.messageBytesLimit,o={},s=r.flushObservable.subscribe((function(e){return function(e){var r=S(o).join("\n");o={};var i,s=(i=e.reason,b(S(sn),i)),a=s?n.sendOnExit:n.send;if(s&&t.isAsync){var c=t.finishSync();c.outputBytesCount&&a(Un(c));var u=[c.pendingData,r].filter(Boolean).join("\n");u&&a({data:u,bytesCount:P(u)})}else r&&t.write(t.isEmpty?r:"\n".concat(r)),t.finish((function(e){a(Un(e))}))}(e)}));function c(e,n){var s=L(e),c=t.estimateEncodedBytesCount(s);c>=i?a.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(i,"KB. ").concat(l," ").concat(u,"/#technical-limitations")):(function(e){return void 0!==e&&void 0!==o[e]}(n)&&function(e){var n=o[e];delete o[e];var i=t.estimateEncodedBytesCount(n);r.notifyAfterRemoveMessage(i)}(n),function(e,n,i){r.notifyBeforeAddMessage(n),void 0!==i?(o[i]=e,r.notifyAfterAddMessage()):t.write(t.isEmpty?e:"\n".concat(e),(function(e){r.notifyAfterAddMessage(e-n)}))}(s,c,n))}return{flushController:r,add:c,upsert:c,stop:s.unsubscribe}}function Un(e){return{data:"string"==typeof e.output?e.output:new Blob([e.output],{type:"text/plain"}),bytesCount:e.outputBytesCount,encoding:e.encoding}}var Ln=Ie;function Nn(e,t,n,r,i){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?Mn(e,t,n,{onSuccess:function(){return Dn(0,t,n,r,i)},onFailure:function(){t.queuedPayloads.enqueue(e),Rn(t,n,r,i)}}):t.queuedPayloads.enqueue(e)}function Rn(e,t,n,r){2===e.transportStatus&&T((function(){Mn(e.queuedPayloads.first(),e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=Ln,Dn(1,e,t,n,r)},onFailure:function(){e.currentBackoffTime=Math.min(6e4,2*e.currentBackoffTime),Rn(e,t,n,r)}})}),e.currentBackoffTime)}function Mn(e,t,n,r){var i=r.onSuccess,o=r.onFailure;t.bandwidthMonitor.add(e),n(e,(function(n){t.bandwidthMonitor.remove(e),function(e){return"opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||In(e.status))}(n)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},o()):(t.transportStatus=0,i())}))}function Dn(e,t,n,r,i){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(i({message:"Reached max ".concat(r," events size queued for upload: ").concat(3,"MiB"),source:Ke,startClocks:Oe()}),t.queueFullReported=!0);var o=t.queuedPayloads;for(t.queuedPayloads=Fn();o.size()>0;)Nn(o.dequeue(),t,n,r,i)}function Fn(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=3145728}}}function $n(e,t,n,r){var i={transportStatus:0,currentBackoffTime:Ln,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:Fn(),queueFullReported:!1},o=function(r,i){return function(e,t,n,r,i){if(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&r.bytesCount<n){var o=t.build("fetch",r);fetch(o,{method:"POST",body:r.data,keepalive:!0,mode:"cors"}).then(v((function(e){return null==i?void 0:i({status:e.status,type:e.type})})),v((function(){var n=t.build("xhr",r);Vn(e,n,r.data,i)})))}else{var s=t.build("xhr",r);Vn(e,s,r.data,i)}}(e,t,n,r,i)};return{send:function(e){Nn(e,i,o,t.trackType,r)},sendOnExit:function(r){!function(e,t,n,r){if(!!navigator.sendBeacon&&r.bytesCount<n)try{var i=t.build("beacon",r);if(navigator.sendBeacon(i,r.data))return}catch(e){!function(e){Bn||(Bn=!0,He(e))}(e)}Vn(e,t.build("xhr",r),r.data)}(e,t,n,r)}}}var Bn=!1;function Vn(e,t,n,r){var i=new XMLHttpRequest;i.open("POST",t,!0),n instanceof Blob&&i.setRequestHeader("Content-Type",n.type),Y(e,i,"loadend",(function(){null==r||r({status:i.status})}),{once:!0}),i.send(n)}function qn(e){var t,n=e.messagesLimit,r=e.bytesLimit,i=e.durationLimit,o=e.pageExitObservable,s=e.sessionExpireObservable,a=o.subscribe((function(e){return p(e.reason)})),c=s.subscribe((function(){return p("session_expire")})),u=new W((function(){return function(){a.unsubscribe(),c.unsubscribe()}})),l=0,d=0;function p(e){if(0!==d){var t=d,n=l;d=0,l=0,f(),u.notify({reason:e,messagesCount:t,bytesCount:n})}}function f(){O(t),t=void 0}return{flushObservable:u,get messagesCount(){return d},notifyBeforeAddMessage:function(e){l+e>=r&&p("bytes_limit"),d+=1,l+=e,void 0===t&&(t=T((function(){p("duration_limit")}),i))},notifyAfterAddMessage:function(e){void 0===e&&(e=0),l+=e,d>=n?p("messages_limit"):l>=r&&p("bytes_limit")},notifyAfterRemoveMessage:function(e){l-=e,0==(d-=1)&&f()}}}function Hn(e,t,n,r,i,o,s){void 0===s&&(s=An);var a=u(e,t),c=n&&u(e,n);function u(e,t){var n=t.endpoint,a=t.encoder;return s({encoder:a,request:$n(e,n,e.batchBytesLimit,r),flushController:qn({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:i,sessionExpireObservable:o}),messageBytesLimit:e.messageBytesLimit})}return{flushObservable:a.flushController.flushObservable,add:function(e,t){void 0===t&&(t=!0),a.add(e),c&&t&&c.add(n.transformMessage?n.transformMessage(e):e)},upsert:function(e,t){a.upsert(e,t),c&&c.upsert(n.transformMessage?n.transformMessage(e):e,t)},stop:function(){a.stop(),c&&c.stop()}}}function Gn(){var e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write:function(n,r){var i=P(n);t+=i,e+=n,r&&r(i)},finish:function(e){e(this.finishSync())},finishSync:function(){var n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount:function(e){return e.length}}}function Wn(e,t,n,r,i){var o=function(e,t){var n,r,i=new W,o=new Set,s=!b($e,t.site)&&Ae(t.telemetrySampleRate),a=((n={})[Re]=s,n[Me]=s&&Ae(t.telemetryConfigurationSampleRate),n[De]=s&&Ae(t.telemetryUsageSampleRate),n),c={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self};return Ve=function(n){var s=L(n);if(a[n.type]&&o.size<t.maxTelemetryEventsPerPage&&!o.has(s)){var u=function(e,t,n){return V({type:"telemetry",date:Ee(),service:e,version:"5.28.0",source:"browser",_dd:{format_version:2},telemetry:V(t,{runtime_env:n,connectivity:Ue()}),experimental_features:w(we)},void 0!==r?r():{})}(e,n,c);i.notify(u),xe("telemetry",u),o.add(s)}},p=He,{setContextProvider:function(e){r=e},observable:i,enabled:s}}("browser-logs-sdk",t);o.setContextProvider((function(){var e,t,n,r,o,s;return{application:{id:null===(e=hn())||void 0===e?void 0:e.application_id},session:{id:null===(t=i.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(r=null===(n=hn())||void 0===n?void 0:n.view)||void 0===r?void 0:r.id},action:{id:null===(s=null===(o=hn())||void 0===o?void 0:o.user_action)||void 0===s?void 0:s.id}}}));var s=[];if(ut()){var a=ct(),c=o.observable.subscribe((function(e){return a.send("internal_telemetry",e)}));s.push((function(){return c.unsubscribe()}))}else{var u=Hn(t,{endpoint:t.rumEndpointBuilder,encoder:Gn()},t.replica&&{endpoint:t.replica.rumEndpointBuilder,encoder:Gn()},n,r,i.expireObservable);s.push((function(){return u.stop()}));var l=o.observable.subscribe((function(e){return u.add(e,function(e){return"datad0g.com"===e.site}(t))}));s.push((function(){return l.unsubscribe()}))}return Be.drain(),function(e){Ve({type:Me,configuration:e})}(function(e){var t,n={session_sample_rate:(t=e).sessionSampleRate,telemetry_sample_rate:t.telemetrySampleRate,telemetry_configuration_sample_rate:t.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:t.telemetryUsageSampleRate,use_before_send:!!t.beforeSend,use_cross_site_session_cookie:t.useCrossSiteSessionCookie,use_partitioned_cross_site_session_cookie:t.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:t.useSecureSessionCookie,use_proxy:!!t.proxy,silent_multiple_init:t.silentMultipleInit,track_session_across_subdomains:t.trackSessionAcrossSubdomains,allow_fallback_to_local_storage:!!t.allowFallbackToLocalStorage,store_contexts_across_pages:!!t.storeContextsAcrossPages,allow_untrusted_events:!!t.allowUntrustedEvents,tracking_consent:t.trackingConsent};return k({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake,send_logs_after_session_expiration:e.sendLogsAfterSessionExpiration},n)}(e)),{telemetry:o,stop:function(){s.forEach((function(e){return e()}))}}}var zn,Jn,Kn,Yn=function(){var e,t,n=function(e){void 0===e&&(e=2);var t=new Map,n=!1;function r(r){if(void 0===r&&(r=0),!n&&0!==e){var i=2===e?3072:16384,o=r;t.forEach((function(e){o+=e.getBytesCount()})),o>i&&(function(e){a.warn("Customer data exceeds the recommended ".concat(e/1024,"KiB threshold. ").concat(l," ").concat(u,"/#customer-data-exceeds-the-recommended-threshold-warning"))}(i),n=!0)}}return{createDetachedTracker:function(){var e=D((function(){return r(e.getBytesCount())}));return e},getOrCreateTracker:function(e){return t.has(e)||t.set(e,D(r)),t.get(e)},setCompressionStatus:function(t){0===e&&(e=t,r())},getCompressionStatus:function(){return e},stop:function(){t.forEach((function(e){return e.stop()})),t.clear()}}}(),s=J(n.getOrCreateTracker(2)),c=J(n.getOrCreateTracker(1)),d={tryToInit:function(t){e||(e=t)},update:function(n){e=n,t.notify()},isGranted:function(){return e===K.GRANTED},observable:t=new W};function p(){return function(e,t){return{view:{referrer:document.referrer,url:window.location.href},context:e.getContext(),user:t.getContext()}}(s,c)}var f,h,y=rn(p,d,(function(e,t){e.storeContextsAcrossPages&&(Q(t,s,on,2),Q(t,c,on,1));var n=function(e,t,n,s){var a=new jn,c=[];a.subscribe(1,(function(e){return xe("logs",e)}));var u=function(e){return function(t){e.notify(0,{rawLogsEvent:{message:t.message,date:t.startClocks.timeStamp,origin:Ke,status:tt.error}}),qe("Error reported to customer",{"error.message":t.message})}}(a),l=function(e){return new W((function(t){var n=X(e,window,["visibilitychange","freeze"],(function(e){"visibilitychange"===e.type&&"hidden"===document.visibilityState?t.notify({reason:sn.HIDDEN}):"freeze"===e.type&&t.notify({reason:sn.FROZEN})}),{capture:!0}).stop,r=Y(e,window,"beforeunload",(function(){t.notify({reason:sn.UNLOADING})})).stop;return function(){n(),r()}}))}(t),d=!t.sessionStoreStrategyType||ut()||an()?function(e){var t="1"===fn(e)?{}:void 0;return{findTrackedSession:function(){return t},expireObservable:new W}}(t):function(e,t){var n=pn(e,"logs",(function(t){return function(e,t){var n=function(e){return"0"===e||"1"===e}(t)?t:fn(e);return{trackingType:n,isTracked:"1"===n}}(e,t)}),t);return{findTrackedSession:function(e,t){void 0===t&&(t={returnInactive:!1});var r=n.findSession(e,t);return r&&"1"===r.trackingType?{id:r.id}:void 0},expireObservable:n.expireObservable}}(t,s),p=Wn(e,t,u,l,d).stop;c.push((function(){return p()})),Cn(t,a),function(e,t){if(!e.forwardErrorsToLogs)return{stop:U};var n=new W;Tn(n).stop,n.subscribe((function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:rt(e),origin:Ze,status:tt.error}})}))}(t,a),function(e,t){var n,o;(n=e.forwardConsoleLogs,o=n.map((function(e){return yn[e]||(yn[e]=function(e){return new W((function(t){var n=i[e];return i[e]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];n.apply(console,i);var s=pe();m((function(){t.notify(function(e,t,n){var i,o=e.map((function(e){return function(e){return"string"==typeof e?q(e):e instanceof Error?ge(te(e)):L(q(e),void 0,2)}(e)})).join(" ");if(t===r.error){var s=function(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(n instanceof Error)return n}}(e);i={stack:s?fe(te(s)):void 0,fingerprint:ye(s),causes:s?be(s,"console"):void 0,startClocks:Oe(),message:o,source:Ye,handling:"handled",handlingStack:n}}return{api:t,message:o,error:i,handlingStack:n}}(i,e,s))}))},function(){i[e]=n}}))}(e)),yn[e]})),z.apply(void 0,o)).subscribe((function(e){var n={rawLogsEvent:{date:Ee(),message:e.message,origin:Ye,error:e.error&&rt(e.error),status:wn[e.api]},domainContext:{handlingStack:e.handlingStack}};t.notify(0,n)}))}(t,a),function(e,t){(function(e,t){var n=[];b(t,Qt.cspViolation)&&n.push(function(e){return new W((function(t){return Y(e,document,"securitypolicyviolation",(function(e){t.notify(function(e){var t="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return en({type:e.effectiveDirective,message:"".concat(Qt.cspViolation,": ").concat(t),originalError:e,csp:{disposition:e.disposition},stack:tn(e.effectiveDirective,e.originalPolicy?"".concat(t,' of the policy "').concat(St(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}(e))})).stop}))}(e));var r=t.filter((function(e){return e!==Qt.cspViolation}));return r.length&&n.push(function(e){return new W((function(t){if(window.ReportingObserver){var n=v((function(e,n){return e.forEach((function(e){return t.notify(function(e){var t=e.type,n=e.body;return en({type:n.id,message:"".concat(t,": ").concat(n.message),originalError:e,stack:tn(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}(e))}))})),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}}))}(r)),z.apply(void 0,n)})(e,e.forwardReports).subscribe((function(e){var n,r=e.message,i="deprecation"===e.originalError.type?tt.warn:tt.error;i===tt.error?n=rt(e):e.stack&&(r+=" Found in ".concat(function(e){var t;return null===(t=/@ (.+)/.exec(e))||void 0===t?void 0:t[1]}(e.stack))),t.notify(0,{rawLogsEvent:{date:Ee(),message:r,origin:Qe,error:n,status:i}})}))}(t,a);var f,g=function(e){return{handleLog:function(t,n,r,s,a){var c=V(n.getContext(),t.context);if(et(t.status,it.console,n)&&function(e,t){var n=e.status,r=e.message;o[xn[n]].call(i,r,t)}(t,c),et(t.status,it.http,n)){var u={rawLogsEvent:{date:a||Ee(),message:t.message,status:t.status,origin:Xe},messageContext:c,savedCommonContext:s};r&&(u.domainContext={handlingStack:r}),e.notify(0,u)}}}}(a).handleLog;if(vn(d,t,a,n,u),ut())!function(e){var t=ct();e.subscribe(1,(function(e){t.send("log",e)}))}(a);else{var h=function(e,t,n,r,i){var o=Hn(e,{endpoint:e.logsEndpointBuilder,encoder:Gn()},e.replica&&{endpoint:e.replica.logsEndpointBuilder,encoder:Gn()},n,r,i.expireObservable);return t.subscribe(1,(function(e){o.add(e)})),o}(t,a,u,l,d).stop;c.push((function(){return h()}))}return{handleLog:g,getInternalContext:(f=d,{get:function(e){var t=f.findTrackedSession(e);if(t)return{session_id:t.id}}}).get,stop:function(){c.forEach((function(e){return e()}))}}}(e,t,p,d);return y=function(e,t){return k({init:function(e){ze("DD_LOGS",e)},initConfiguration:e},t)}(e,n),n})),w={},S=new st((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return y.handleLog.apply(y,e)}),n.createDetachedTracker());return f={logger:S,init:v((function(e){return y.init(e)})),setTrackingConsent:v((function(e){d.update(e),Ve({type:De,usage:{feature:"set-tracking-consent",tracking_consent:e}})})),getGlobalContext:v((function(){return s.getContext()})),setGlobalContext:v((function(e){return s.setContext(e)})),setGlobalContextProperty:v((function(e,t){return s.setContextProperty(e,t)})),removeGlobalContextProperty:v((function(e){return s.removeContextProperty(e)})),clearGlobalContext:v((function(){return s.clearContext()})),createLogger:v((function(e,t){return void 0===t&&(t={}),w[e]=new st((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return y.handleLog.apply(y,e)}),n.createDetachedTracker(),q(e),t.handler,t.level,q(t.context)),w[e]})),getLogger:v((function(e){return w[e]})),getInitConfiguration:v((function(){return B(y.initConfiguration)})),getInternalContext:v((function(e){return y.getInternalContext(e)})),setUser:v((function(e){(function(e){var t="object"===F(e);return t||a.error("Unsupported user:",e),t})(e)&&c.setContext(We(e))})),getUser:v((function(){return c.getContext()})),setUserProperty:v((function(e,t){var n,r=We((n={},n[e]=t,n))[e];c.setContextProperty(e,r)})),removeUserProperty:v((function(e){return c.removeContextProperty(e)})),clearUser:v((function(){return c.clearContext()}))},h=k({version:"5.28.0",onReady:function(e){e()}},f),Object.defineProperty(h,"_setDebug",{get:function(){return g},enumerable:!1}),h}();zn=I(),Jn=Yn,(Kn=zn["DD_LOGS"])&&!Kn.q&&Kn.version&&a.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),zn.DD_LOGS=Jn,Kn&&Kn.q&&Kn.q.forEach((function(e){return d(e,"onReady callback threw an error:")()}))},79602:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NewsMediaPulseTracker:()=>c});var r=n(98940),i=n.n(r);const o={navigate:"navigation",reload:"refresh"},s={0:"navigation",1:"refresh"},a=()=>{const[e]=window.performance.getEntriesByType("navigation");return e?(t=e.type,o[t]||"alternative"):void 0!==performance.navigation?.type?(e=>s[e]||"alternative")(performance.navigation.type):"unknown";var t};class c{constructor(e,t){this.trackViewArticle=(e,t)=>{const n=(e=>{const{object:{articleId:t,...n}}=e;return{...e,object:{...n,id:t,navigationType:a(),type:"Article",url:window.location.href}}})(e);return this.pulseTracker.trackPageView(n,t)},this.trackViewLoginPoster=(e,t)=>{const n=(e=>({...e,object:{...e.object,type:"LoginPoster"}}))(e);return this.pulseTracker.trackPageView(n,t)},this.trackViewSalesPoster=(e,t)=>{const n=(e=>{const{object:{articleId:t,...n}}=e;return{...e,object:{...n,id:t,navigationType:a(),type:"SalesPoster",url:window.location.href}}})(e);return this.pulseTracker.trackPageView(n,t)},this.trackViewListing=(e,t)=>{const n=(e=>({...e,object:{...e.object,navigationType:a(),type:"Listing",url:window.location.href}}))(e);return this.pulseTracker.trackPageView(n,t)},this.trackViewFrontpage=(e,t)=>{const n=(e=>({...e,object:{...e.object,navigationType:a(),type:"Frontpage",url:window.location.href}}))(e);return this.pulseTracker.trackPageView(n,t)},this.trackViewPage=(e,t)=>{const n=(e=>{const{object:{pageId:t,...n}}=e;return{...e,object:{...n,id:t,navigationType:a(),type:"Page",url:window.location.href}}})(e);return this.pulseTracker.trackPageView(n,t)},this.addPageLeaveTracking=(e,t,n,r)=>this.pulseTracker.addPageLeaveTracking(e,t,n,r),this.removePageLeaveTracking=()=>this.pulseTracker.removePageLeaveTracking(),this.updatePageLeaveTracking=(e,t,n)=>this.pulseTracker.updatePageLeaveTracking(e,t,n),this.trackPageLeave=(e,t)=>this.pulseTracker.trackPageLeave(e,t),this.trackActivePageLeave=(e,t)=>this.pulseTracker.trackActivePageLeave(e,t),this.trackViewUIElement=(e,t)=>{const n=(e=>({...e,object:{...e.object,navigationType:a(),type:"UIElement",url:window.location.href}}))(e);return this.pulseTracker.track("trackerEvent",n,t)},this.registerViewUIElementTracking=e=>{const t=(n=e.event,{...n,object:{...n?.object,navigationType:a(),type:"UIElement",url:window.location.href}});var n;new(i())(this.pulseTracker,{...e,event:t}).start()},this.trackClickUIElement=(e,t)=>{const n=(e=>({...e,type:"Engagement",action:"Click",object:{...e.object,navigationType:a(),type:"UIElement",url:window.location.href}}))(e);return this.pulseTracker.track("trackerEvent",n,t)},this.pulseTracker=e,t&&this.pulseTracker.update({actor:t})}}c.fromAutotracker=(e,t)=>new Promise(((n,r)=>{e((e=>{e?n(new c(e,t)):r(new Error("Error getting pulse tracker"))}))}))},375:(e,t,n)=>{"use strict";function r(){"undefined"!=typeof document&&document.location.href.indexOf("sp_debug=1")>0&&console.debug("[CMP]",...arguments)}function i(e,t,n,r,i){const o=new URL(e);o.searchParams.append("utm_source","cmp"),o.searchParams.append("utm_medium","psi"),o.searchParams.append("referrer",r||window.location.href),n&&o.searchParams.append("client_id",n),t&&o.searchParams.append("environment_id",t),i&&o.searchParams.append("state",i),window.location.href=o.href}function o(e){return null===e?null:Boolean(parseInt(e))}n.r(t),n.d(t,{psi:()=>D,scc:()=>F,tcf:()=>$});const s=(e,t)=>Object.keys(t).filter((t=>void 0!==e[t])).forEach((n=>"object"==typeof t[n]?Object.keys(t[n]).forEach((r=>e[n][r]=t[n][r])):e[n]=t[n]));function a(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let r=n[e];for(;" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}const c=["Mixed","PSI","SCC","TCF","PMC"],u={DEFAULT:"default",CMP:"cmp",CACHE:"cache"},l={ACCEPTED:"accepted",REJECTED:"rejected",UNKNOWN:"unknown"},d=Object.freeze({purposes:{CMP_ANALYTICS:{optIn:!1,status:l.UNKNOWN},CMP_MARKETING:{optIn:!1,status:l.UNKNOWN},CMP_ADVERTISING:{optIn:!1,status:l.UNKNOWN},CMP_PERSONALIZATION:{optIn:!1,status:l.UNKNOWN}},source:u.DEFAULT});function p(e,t,n,i){r(`Pulse: ${n}(actor, data):`,t,i),f(e,(e=>{e&&"function"==typeof e.track&&e.track(n,{schema:"http://schema.schibsted.com/events/tracker-event.json/314.json",object:{...i,...p.pulseCommonData},provider:{component:"CMP"},actor:t})}))}function f(e,t){if(e.psi.pulseTracker)return t(e.psi.pulseTracker);const n=e.psi.pulseObjectName||"pulse";return"function"!=typeof e[n]?console.error("No Pulse integration detected. Aborting."):e[n]((e=>{"function"==typeof t&&t(e)}))}function g(){const e=p.pulseCommonData?.messageName;if(e)return c.find((t=>e.includes(t)))}function h(e){return`CMP_${("personalisation"===e?"personalization":e).toUpperCase()}`}function v(e,t,n){const r=Object.keys(m(e)).filter((t=>m(e)[t])),i=Object.keys(m(e)).filter((t=>!m(e)[t]));return r.map((e=>{const n=t.purposes[h(e)];n.optIn=!0,n.status=l.ACCEPTED})),i.map((e=>{t.purposes[h(e)].status=l.REJECTED})),t.source=n,t}function m(e){var t;return t={advertising:o((e._scc_||e._tcf_).getPermissionSync("CMP:advertising")),analytics:o((e._scc_||e._tcf_).getPermissionSync("CMP:analytics")),marketing:o((e._scc_||e._tcf_).getPermissionSync("CMP:marketing")),personalisation:o((e._scc_||e._tcf_).getPermissionSync("CMP:personalisation"))},Object.entries(t).filter((([e,t])=>null!=t)).reduce(((e,[t,n])=>({...e,[t]:n})),{})}function y(e,t){const n=t.performance.now();return e?Math.round((n-e)/1e3):null}let b=null,w=!1,S=!1;const _="Identity";function k(e,t){if(e.psi?.identityObject)return e.psi.identityObject;if(t?.identityObject)return t.identityObject;const n=e.psi?.identityObjectName||t?.identityObjectName||_;return e[n]?e[n]:console.warn("No Schibsted Account integration detected.")}const I=function(e){if("number"==typeof e||void 0===e)return config.userId=e;throw new Error(`Id value ${e} is invalid`)},C=function(e){return(e=>{try{return Boolean(new URL(e))}catch{return!1}})(e)?window.psi.isLoggedInUser?i(e,null,window.psi.clientId,window.psi.referrer,window.psi.state):f(window,(t=>{t.getEnvironmentId().then((t=>{i(e,t,window.psi.clientId,window.psi.referrer,window.psi.state)}))})):console.error("The URL passed to the configuration is invalid. Please, correct it.")},P=function(){return function(e){const t=Array.from({length:20},(()=>String.fromCharCode(Math.floor(25*Math.random()+97)))).join(""),n=btoa(JSON.stringify(t));k(e)&&k(e).login({state:n})}(window)},E=function(e,t,n){e.targetingParams=e.targetingParams||{},e.targetingParams[t]=n},T=["Hermes","_app_","tv.nu","FinnApp","Omni"];function O(e){return T.some((t=>e.userAgent.includes(t)))}function j(e,t,n,r,i){A(e,t,n,r,i);const{jsSdkVersion:o,id:s,realm:a,clientId:c,pulseTracker:u,referrer:l,state:d,pulseObjectName:p,showInWebview:f,identityObject:g,identityObjectName:h,disableSentry:v,disableNativeConsentCheck:m,enableUserCentric:y,groupId:b,...w}=r;return U(e,w)}async function x(e,t,n,r,i){A(e,t,n,r,i);const{jsSdkVersion:o,id:s,realm:c,clientId:u,pulseTracker:l,referrer:d,state:p,pulseObjectName:f,showInWebview:g,identityObject:h,identityObjectName:v,disableSentry:m,disableNativeConsentCheck:y,enableUserCentric:b,groupId:w,...S}=r;try{const t=k(e);if(!a("CMP:isLoggedIn")&&!await t.isLoggedIn())return U(e,S);t.on("logout",(function(){document.cookie="CMP:isLoggedIn=; Max-Age=-99999999;"})),a("CMP:isLoggedIn")||function(){const e=new Date;e.setTime(e.getTime()+NaN);let t="expires="+e.toUTCString();document.cookie="CMP:isLoggedIn=true;"+t+";path=/"}(),E(r,"loggedin",!0);const n={externalParty:"sourcepoint",optionalSuffix:r.groupId};U(e,{authId:await t.getExternalId(n.externalParty,n.optionalSuffix),targetingParams:E(r,"enableUserCentric",!0),...S})}catch(t){console.error("Identity: ",t),U(e,S)}}function A(e,t,n,i,o){if(!(i&&i.baseEndpoint&&i.propertyId&&i.consentLanguage))throw new Error("One of missing: baseEndpoint, propertyId, consentLanguage");(function(e,t){t.events=t.events||{};const n=t.events.onMessageReceiveData,i=t.events.onMessageChoiceSelect,o=t.events.onMessageReady,s=t.events.onPrivacyManagerAction,a=t.events.onConsentReady;let c,l=!0;const h={id:t.userId,realm:t.realm};t.events.onMessageReceiveData=function(e,i){r("Sourcepoint: onMessageReceiveData(data)",i),b=!0,p.pulseCommonData={"@id":"sdrn:privacy:cmp:"+(i.messageId||""),"@type":"CMP",messageName:i.msgDescription||"",propertyId:t.propertyId,messageId:i.messageId||void 0,bucket:i.bucket||void 0,jsSdkVersion:t.jsSdkVersion,partitionId:i.prtnUUID||"",language:t.consentLanguage},"function"==typeof n&&n(i)},t.events.onMessageReady=function(){window._tcf_?.TCFCallbacks?.map((e=>{e()})),r("Sourcepoint: onMessageReady()");const t=g();if(r(`Pulse: Detected message type: ${t}`),!b)return p(e,h,"View",{name:"CMP: Privacy Manager displayed",messageType:g()});c=e.performance.now(),p(e,h,"View",{name:"CMP: Message displayed",messageType:t}),"function"==typeof o&&o()},t.events.onMessageChoiceSelect=function(t,n,o){if(r(`Sourcepoint: onMessageReady(choice_id=${n}, choice_type_id=${o})`),5===o){const t=y(c,e);p(e,h,"engagementEvent",{name:"CMP: Link to Privacy / Cookie Policy clicked",elementType:"anchor",isFirstLayer:b,messageType:g(),...t&&{duration:t}}),b=null}if(9===o){l=!1,b=null;const t=y(c,e);p(e,h,"engagementEvent",{name:"CMP: Open Privacy Settings",elementType:"button",messageType:g(),...t&&{duration:t}})}if(11===o&&(l=!0),12===o&&(b=!1),15===o){const t=y(c,e);p(e,h,"engagementEvent",{name:"CMP: Dismiss message",elementType:"button",messageType:g(),...t&&{duration:t}})}"function"==typeof i&&i(n,o)},t.events.onPrivacyManagerAction=function(e,t){r("Sourcepoint: onPrivacyManagerAction()"),w=!0,b=!1,"none"===t.purposeConsent?(S=!0,l=!1):(S=!1,l=!0),"function"==typeof s&&s()},t.events.onConsentReady=function(t,n,i,o){window._tcf_?.consentedCallback?.map((e=>{e(o.consentedToAll)})),window._tcf_?.TCFCallbacks?.map((e=>{e()})),r(`Sourcepoint: onConsentReady(message_type=${t}, consentUUID=${n}, euconsent)`,i),r(`Sourcepoint: getMessageType() ${g()}`);const s=y(c,e);if(void 0===g()&&!w)return;const _="PSI"===g()?null:m(e);if(function(e){const t=JSON.parse(JSON.stringify(d));f(e,(n=>{try{n.setConsents(v(e,t,u.CMP))}catch{console.error("Consents couldn't be set. The provided version of Pulse SDK does not support the setConsents event")}}))}(e),S&&p(e,h,"engagementEvent",{name:"CMP: Reject all",elementType:"button",messageType:g(),...s&&{duration:s}}),!l)return!1;p(e,h,"engagementEvent",{name:"CMP: Accept",elementType:"button",messageType:g(),consentedToAll:o?.consentedToAll,isFirstLayer:b||!!b,..._&&{consents:_},...s&&{duration:s}}),b=null,w=!1,S=!1,"function"==typeof a&&a(t,n,i,o)}})(e,i),function(e){e.events=e.events||{},e.events.onError=function(t,n,r){try{t&&window._cmp_.sentry.setTag("message_type",t),n&&window._cmp_.sentry.setTag("errorCode",n),window._cmp_.sentry.setTag("propertyId",e.propertyId),window._cmp_.sentry.captureException(r)}catch(e){console.error(`Can not send the error to Sentry, ${e}`)}},e.events.onMessageChoiceError=function(e,t){try{e&&window._cmp_.sentry.setTag("message_type",e),window._cmp_.sentry.captureException(t)}catch(t){console.error(`Can not send the error to Sentry, ${t}`)}}}(i),i.accountId=i.accountId||1047,i.custom={},"psi"!==o&&(i.gdpr={includeTcfApi:"tcf"===o}),i.propertyHref&&(i.joinHref=!0);const s=i.userId||k(e,i)?._session.userId;s&&E(i,"loggedin","true");const a=i.clientId||k(window,i)?.clientId;O(n)&&E(i,"mobile-webview",!i.showInWebview||i.showInWebview);const c=t?.referrer?.split("/")[2];c&&E(i,"referrer-hostname",c),function(){const e=/(_sch_cmp_[_a-z0-9]+)=(.+)/i;t.cookie.split(";").filter((t=>e.test(t))).map((e=>e.split("=").map((e=>e.trim())))).forEach((([e,t])=>E(i,e,t)))}(),i.propertyHref&&t.location.search&&-1===i.propertyHref.indexOf("?")&&(i.propertyHref+=t.location.search);const{pulseTracker:l,referrer:h,state:_,pulseObjectName:T,showInWebview:j,identityObject:x,identityObjectName:A,enableUserCentric:U,groupId:L}=i;e.psi=e.psi||{},e.psi.isLoggedInUser=!!s,e.psi.setUserId=I,e.psi.openPrivacySettings=C,e.psi.pulseTracker=l,e.psi.clientId=a,e.psi.referrer=h,e.psi.state=_,e.psi.pulseObjectName=T,e.psi.showInWebview=j,e.psi.identityObject=x,e.psi.identityObjectName=A,e.psi.triggerLogin=P,e.psi.enableUserCentric=U,e.psi.groupId=L}function U(e,t){e._sp_=e._sp_||{},e._sp_.config=t,r("Sourcepoint initiated with config: ",t)}function L(e,t,n){if(!t||!t.groupPmId)throw new Error("groupPmId is required");const i="CMP:advertising",o="CMP:analytics",s="CMP:marketing",a="CMP:personalisation",c="CMP:performance_marketing",l={};function f(t){return r(`${n}: getPermissionFromCache(category=${t})`),e.localStorage.getItem(t)}l[i]=[],l[o]=[],l[s]=[],l[a]=[],l[c]=[];const g={subscribers:l,consentedCallback:[],TCFCallbacks:[],showPrivacyManager:function(){r("${type}: showPrivacyManager()"),p.pulseCommonData.messageName="",w=!0,b=!1,e._sp_.gdpr.loadPrivacyManagerModal(t.groupPmId)},getPermissionSync:function(e){return r(`${n}: getPermissionSync(category=${e})`),f(e)},getPermission:function(e,t){r(`${n}: getPermission(category=${e})`);const i=g.subscribe(e,function(){let e=!1;return n=>{e?"function"==typeof i&&i():(e=!0,t(n),t=function(){})}}())},notify:(h={[i]:f(i),[o]:f(o),[s]:f(s),[a]:f(a),[c]:f(c)},(e,t)=>{if(h[e]===t)return void r(`${n}: notify(category=${e}, value=${t}) - IGNORED`);r(`${n}: notify(category=${e}, value=${t})`),h[e]=t;const i=g.subscribers[e];for(let e=0;e<i.length;e++)i[e](t)}),subscribe:function(e,t){if(r(`${n}: subscribe(category=${e})`),!g.subscribers[e])return void console.error("Unable to subscribe - undefined consent category!");g.subscribers[e].push(t);const i=f(e);return null!==i&&t(i),()=>{g.subscribers[e]=g.subscribers[e].filter((e=>e!==t))}},getCachedOrDefaultConsentsForPulse:function(t){return function(e,t){if(t&&("object"!=typeof(n=t)||n.constructor!==Object))return console.error("Provided object is incorrect");var n;if(0===Object.keys(m(e)).length){if(!t)return d;const e=JSON.parse(JSON.stringify(t));return e.source=u.DEFAULT,e}return v(e,JSON.parse(JSON.stringify(t||d)),u.CACHE)}(e,t)},isConsentedToAll:function(e){g.consentedCallback.push(e)},getConsentedToAllSync:function(){const e=f(`_sp_user_consent_${t.propertyId}`);try{if(0===Object.keys(localStorage).filter((e=>e.startsWith("CMP:"))).length)return null;const t=JSON.parse(e)?.gdpr?.consentStatus;if(t?.vendorListAdditions||t?.legalBasisChanges)return null;const n=t?.consentedAll;return void 0===n?null:n}catch{return null}},onTcfReady:function(e){g.TCFCallbacks.push(e)}};var h;return e._SourcePoint_Consent_Callback=g.notify,g}const N="4.5.1";function R(e,t){const n=`${e.baseEndpoint}/unified/wrapperMessagingWithoutDetection.js`,r=t.getElementsByTagName("script"),i=r[r.length-1],o=t.createElement("link");s(o,{rel:"preload",as:"script",crossorigin:"crossorigin",href:n}),t.head.appendChild(o);const a=t.createElement("script");s(a,{async:!0,src:n}),i.insertAdjacentElement("afterend",a)}function M(e,t){if(t.disableSentry)return;const n=e.createElement("script");s(n,{async:!0,type:"module",src:"https://static.privacy.schibsted.com/dist/index.js",fetchPriority:"low"}),e.head.appendChild(n)}function D(e,t,n,r){M(t,r),j(e,t,n,{...r,jsSdkVersion:N},"psi"),R(r,t)}function F(e,t,n,r){M(t,r),j(e,t,n,r,"scc"),function(e,t){e._scc_=L(e,t)}(e,r),R(r,t)}async function $(e,t,n,r){!function(e,t,n){return r=e,!new URLSearchParams(r.location?.search).has("_sp_pass_consent")&&O(t)&&!n.disableNativeConsentCheck;var r}(e,n,r)?(function(e){const t=e.createElement("script");t.innerHTML='"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var t=function(){var t,e,o=[],n=window,r=n;for(;r;){try{if(r.frames.__tcfapiLocator){t=r;break}}catch(t){}if(r===n.top)break;r=r.parent}t||(!function t(){var e=n.document,o=!!n.frames.__tcfapiLocator;if(!o)if(e.body){var r=e.createElement("iframe");r.style.cssText="display:none",r.name="__tcfapiLocator",e.body.appendChild(r)}else setTimeout(t,5);return!o}(),n.__tcfapi=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return o;"setGdprApplies"===n[0]?n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof n[2]&&n[2]("set",!0)):"ping"===n[0]?"function"==typeof n[2]&&n[2]({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"}):o.push(n)},n.addEventListener("message",(function(t){var e="string"==typeof t.data,o={};if(e)try{o=JSON.parse(t.data)}catch(t){}else o=t.data;var n="object"===_typeof(o)&&null!==o?o.__tcfapiCall:null;n&&window.__tcfapi(n.command,n.version,(function(o,r){var a={__tcfapiReturn:{returnValue:o,success:r,callId:n.callId}};t&&t.source&&t.source.postMessage&&t.source.postMessage(e?JSON.stringify(a):a,"*")}),n.parameter)}),!1))};"undefined"!=typeof module?module.exports=t:t()}();',e.head.appendChild(t)}(t),M(t,r),r.enableUserCentric?await x(e,t,n,r,"tcf"):j(e,t,n,r,"tcf"),function(e,t){e._tcf_=L(e,t)}(e,r),R(r,t)):console.warn("CMP: Native consent is not passed. Sourcepoint will not be initialized.")}},98940:(e,t,n)=>{"use strict";var r,i=(r=n(7350))&&"object"==typeof r&&"default"in r?r:{default:r};function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function u(){return{top:0,left:0,right:window.innerWidth||0,bottom:window.innerHeight||0}}var l={interval:5e3,query:"[data-engage-entity-id]",idAttr:"data-engage-entity-id",positionAttr:"data-engage-position",sourceAttr:"data-engage-source",customAttr:"data-engage-custom",event:void 0,reportImmediately:!0},d=function(){return e=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tracker=t,this.config=s(s({},l),r),this.throttledFindNewElementsInViewport=i.default((function(){return n.findNewElementsInViewport()}),500),this.start(this.config.reportImmediately)},t=[{key:"start",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.seenElements={},this.reportedElements=[],this.reportInteval=setInterval((function(){return e.reportVisibility()}),this.config.interval),this.bind(),this.findNewElementsInViewport(),t&&this.reportVisibility()}},{key:"stop",value:function(){clearInterval(this.reportInteval),this.unbind()}},{key:"findNewElementsInViewport",value:function(){var e=this,t=document.querySelectorAll(this.config.query);Array.prototype.forEach.call(t,(function(t){var n=t.getAttribute(e.config.idAttr),r=t.getAttribute(e.config.sourceAttr),i=t.getAttribute(e.config.positionAttr),o=t.getAttribute(e.config.customAttr);e.seenElements[n]||!function(e){var t=u(),n=e.getBoundingClientRect(),r=.33*(n.bottom-n.top),i=.33*(n.right-n.left);return n.width>0&&n.height>0&&n.left+i>=t.left&&n.right-i<=t.right&&n.top+r>=t.top&&n.bottom-r<=t.bottom}(t)&&!function(e){var t=u(),n=.33*(t.bottom-t.top),r=e.getBoundingClientRect();return r.width>0&&r.height>0&&r.left>=t.left&&r.right<=t.right&&(r.top>=t.top&&r.top<=t.bottom&&t.bottom-r.top>=n||r.bottom>=t.top&&r.bottom<=t.bottom&&r.bottom-t.top>=n||r.top<=t.top&&r.bottom>=t.bottom)}(t)||(e.seenElements[n]={source:r,position:i?parseInt(i,10):null,customObj:o})}))}},{key:"reportVisibility",value:function(){var e=this;this.tracker.evaluateEventInputs("trackerEvent",this.config.event).then((function(t){var n=t.object;Object.keys(e.seenElements).forEach((function(r){if(-1===e.reportedElements.indexOf(r)){var i=e.seenElements[r].customObj?Object.entries(JSON.parse(e.seenElements[r].customObj)).reduce((function(e,t){return s(s({},e),{},a({},"spt:".concat(t[0]),t[1]))}),{}):{},o=s(s({},i),{},{"spt:isImpression":!0,"spt:source":e.seenElements[r].source,"spt:position":e.seenElements[r].position}),c=s(s({},e.config.event),{},{object:{type:"UIElement",id:r,custom:o},target:n});e.config.beforeTrack&&(c=e.config.beforeTrack({data:c,elementId:r,elementData:e.seenElements[r],pulseObject:t})),e.tracker.track("trackerEvent",c),e.reportedElements.push(r)}}))}))}},{key:"bind",value:function(){window.addEventListener("scroll",this.throttledFindNewElementsInViewport),window.addEventListener("resize",this.throttledFindNewElementsInViewport)}},{key:"unbind",value:function(){window.removeEventListener("scroll",this.throttledFindNewElementsInViewport),window.removeEventListener("resize",this.throttledFindNewElementsInViewport)}},{key:"restart",value:function(){this.stop(),this.start()}}],t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();e.exports=d},51873:(e,t,n)=>{var r=n(9325).Symbol;e.exports=r},72552:(e,t,n)=>{var r=n(51873),i=n(659),o=n(59350),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},54128:(e,t,n)=>{var r=n(31800),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},34840:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},659:(e,t,n)=>{var r=n(51873),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},59350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9325:(e,t,n)=>{var r=n(34840),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},31800:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},38221:(e,t,n)=>{var r=n(23805),i=n(10124),o=n(99374),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c,u,l,d,p,f,g=0,h=!1,v=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=c,r=u;return c=u=void 0,g=t,d=e.apply(r,n)}function b(e){var n=e-f;return void 0===f||n>=t||n<0||v&&e-g>=l}function w(){var e=i();if(b(e))return S(e);p=setTimeout(w,function(e){var n=t-(e-f);return v?a(n,l-(e-g)):n}(e))}function S(e){return p=void 0,m&&c?y(e):(c=u=void 0,d)}function _(){var e=i(),n=b(e);if(c=arguments,u=this,f=e,n){if(void 0===p)return function(e){return g=e,p=setTimeout(w,t),h?y(e):d}(f);if(v)return clearTimeout(p),p=setTimeout(w,t),y(f)}return void 0===p&&(p=setTimeout(w,t)),d}return t=o(t)||0,r(n)&&(h=!!n.leading,l=(v="maxWait"in n)?s(o(n.maxWait)||0,t):l,m="trailing"in n?!!n.trailing:m),_.cancel=function(){void 0!==p&&clearTimeout(p),g=0,c=f=u=p=void 0},_.flush=function(){return void 0===p?d:S(i())},_}},23805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},40346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},44394:(e,t,n)=>{var r=n(72552),i=n(40346);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},10124:(e,t,n)=>{var r=n(9325);e.exports=function(){return r.Date.now()}},7350:(e,t,n)=>{var r=n(38221),i=n(23805);e.exports=function(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:o,maxWait:t,trailing:s})}},99374:(e,t,n)=>{var r=n(54128),i=n(23805),o=n(44394),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?NaN:+e}},51504:e=>{function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,s=r.length;o<s;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t},49690:(e,t,n)=>{"use strict";const r=n(79536),i=n(98909),o=n(82470),s=n(40936),a=n(69784),c=n(34794),u=n(55937),l=n(68823),d=n(83658);(0,l.initializeBrowserLogs)(),window.isUserConsent=o.isUserConsent,window.userDataStoreApi=u.userDataStoreApi,(0,a.initUserSession)(),(0,d.initSourcepoint)(),(0,s.provideCoreHeaderSessionAdapter)(),(0,r.reloadPersistedPageAfterMinutes)(60),(0,i.initApPulse)(),(0,c.initIterate)(),window.addEventListener("load",(()=>{Promise.all([Promise.all([n.e(9509),n.e(7952)]).then(n.bind(n,7952)),Promise.all([n.e(9368),n.e(7922)]).then(n.bind(n,17922)),Promise.all([n.e(5419),n.e(2326)]).then(n.bind(n,82326))]).catch((e=>console.error(e)))}))},98909:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initApPulse=void 0;const r=n(47287),i={enableImpressions:!0,skipInitalPageView:"/oslo"===location.pathname||"/foreldreliv"===location.pathname};t.initApPulse=()=>{(0,r.initPulse)(i)}},68823:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeBrowserLogs=function(e={}){const{publication:t,serverRuntime:n,browserLogs:{clientToken:o}}=i.frontendConfig;o&&r.datadogLogs.init(Object.assign({clientToken:o,site:"datadoghq.eu",forwardErrorsToLogs:!0,sessionSampleRate:1,service:t,env:n},e))};const r=n(2795),i=n(71347)},40893:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.abTestValue=function(){const e=(0,r.getCookieValue)("abx2"),t=parseInt(e,10);return t<0||t>=100||Number.isNaN(t)?null:t},t.userAbGroup=async function(){const e=c();if(void 0!==e)return e;const t=(0,s.getCachedSessionData)();if(t)return u(t.user.userId.toString());try{const e=await(0,i.getSessionData)();if(!e)return;return u(e.user.userId.toString())}catch(e){return void console.error("Failed to calculate A/B group - failed to get user session data",e)}};const r=n(40132),i=n(69784),o=n(49966),s=n(44362),a=n(70321),c=()=>{const e=new URLSearchParams(window.location.search).get("userabgroup");if(null===e)return;const t=Number.parseInt(e,10);return(0,a.isUserAbGroup)(t)?t:void 0},u=e=>{if(e&&0!==e.length)return Math.abs((0,o.basicHash)(e)%10)}},40132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCookieValue=function(e){const t=document.cookie.split(";");for(let n=0;n<t.length;n++){const r=t[n].split("=",2),i=r[0].replace(/^\s+|\s+$/g,""),o=r[1];if(i===e)return decodeURIComponent(o)}return""}},70898:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fasten=void 0;const r=n(25954);function i(e,t){var n;const r=document.querySelector(`meta[name='${e}']`);return null!==(n=null==r?void 0:r.dataset[t])&&void 0!==n?n:null}function o(e){var t;const n=document.querySelector(`meta[name='${e}']`);return null!==(t=null==n?void 0:n.content)&&void 0!==t?t:null}t.fasten={publicationId:function(){return o("publication-id")},siteVersion:function(){return o("site-version")},sectionName:function(){return i("section-info","sectionName")},sectionPath:function(){return i("section-info","sectionPath")},pathName:function(){return window.location.pathname.replace(/^\//,"")},isMobileApp:r.isMobileApp,isAndroidApp:r.isAndroidApp,fetch:function(e,t,n=null,r="json",i=!1,o=null){return new Promise((function(s,a){const c=new XMLHttpRequest;c.open(e,t),n&&Object.keys(n).forEach((e=>c.setRequestHeader(e,n[e]))),c.responseType=r,c.withCredentials=i,c.onload=function(){this.status>=200&&this.status<300?s(c.response):a({status:this.status,statusText:c.statusText})},c.onerror=function(){a({status:this.status,statusText:c.statusText})},c.send(o)}))},devMode:"true"===i("section-info","devMode")}},34794:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initIterate=void 0,t.initIterate=()=>{const e=document.createElement("script");e.innerHTML="window.iterateSettings = {\n  apiKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjb21wYW55X2lkIjoiNjA5NGVhMjQxNmQ1YjUwMDAxNWM2NDdlIiwiaWF0IjoxNjIwMzcyMDA0fQ.7akDdCSrVHjut8I1RaRJTh2JJPoNYND7vneKrLqwJxk'\n};\n\n(function(i,t,e,r,a){if(t.getElementById(r)){return}\ni.IterateObjectName=a;var z=function(){z.c(arguments)};z.q=[];\nz.c=function(args){z.q.push(args)};i[a]=z;\nfunction l() {var js,fjs=t.getElementsByTagName(e)[0];js=t.createElement(e);js.id=r;js.async=1;js.src=\"https://platform.iteratehq.com/loader.js\";fjs.parentNode.insertBefore(js,fjs)};\nif(t.readyState===\"complete\") {l();} else if(i.attachEvent) {i.attachEvent('onload', l);} else{i.addEventListener('load', l, false);}\n}(window, document,'script','iterate-js','Iterate'));";const t=document.querySelector("head");null==t||t.insertAdjacentElement("beforeend",e)}},3108:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeItemFromLocalStorage=t.saveItemToLocalStorage=t.getItemFromLocalStorage=void 0;const r=n(50712);t.getItemFromLocalStorage=e=>{let t;try{t=JSON.parse((0,r.getItemFromLocalStorage)(e))}catch(t){return(0,r.removeItemFromLocalStorage)(e),null}return!t||!t._expires||t._expires<Date.now()?null:t.value},t.saveItemToLocalStorage=(e,t,n)=>{const i={value:t,_expires:Date.now()+n};(0,r.saveItemToLocalStorage)(e,JSON.stringify(i))},t.removeItemFromLocalStorage=r.removeItemFromLocalStorage},50712:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeItemFromLocalStorage=t.saveItemToLocalStorage=t.getItemFromLocalStorage=t.isLocalStorageSupported=void 0;const n="undefined"!=typeof window&&"undefined"!=typeof Storage&&!!localStorage&&"function"==typeof localStorage.getItem&&"function"==typeof localStorage.setItem;t.isLocalStorageSupported=n,t.getItemFromLocalStorage=e=>n?window.localStorage.getItem(e):null,t.saveItemToLocalStorage=(e,t)=>{n&&window.localStorage.setItem(e,t)},t.removeItemFromLocalStorage=e=>{n&&window.localStorage.removeItem(e)}},78e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAuthenticatedUserConsents=t.fetchAnonymousUserConsents=void 0,t.fetchAnonymousUserConsents=async(e,t,r)=>{const i="/privacy/v2/anonymous/{publication}/user/sdrn:schibsted:environment:{environmentId}/permissions".replace("{environmentId}",e).replace("{publication}",t),{fasten:o}=await Promise.resolve().then(n.bind(n,70898));return o.fetch("GET",`${r}${i}`)},t.fetchAuthenticatedUserConsents=async(e,t,r,i)=>{const o="/privacy/v2/schacc/{publication}/user/sdrn:spid.no:user:{userId}/permissions".replace("{userId}",String(e)).replace("{publication}",r),{fasten:s}=await Promise.resolve().then(n.bind(n,70898));return s.fetch("GET",`${i}${o}`,{Authorization:`SPIDSIG ${t}`})}},99407:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initPulseEngageAddon=void 0;const r=()=>{const e=function(){function e(e,t){for(let n=0;n<t.length;n++){const r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}const n={objectType:void 0},r=function(){function n(e){const r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,n),this.tracker=e,this.updateTrackerAbTestMeta(r)}return e(n,[{key:"updateTrackerAbTestMeta",value:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.abTestValue,n=e.userABGroup,r=""===n?{abTestValue:t}:{abTestValue:t,userABGroup:n};this.tracker.update({object:{custom:r}},!0)}}]),n}();function i(e){return"Article"===e||"Page"===e||"Frontpage"===e}pulse("provide","helloAbTest",r);const o=function(){function r(e){const i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,r),this.tracker=e,this.config=Object.assign({},n,i),this.updateTrackerState()}return e(r,[{key:"updateTrackerState",value:function(){const e=this,t=this.tracker.evaluateEventInputs();this.tracker.update({provider:t.then((function(t){return i(e.config.objectType||t.object.type)?{"spt:engage":t.provider.id,product:"fastenposten",productType:"ResponsiveWeb"}:{}})),object:t.then((function(){const t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.object,r=t.device,o=t.provider,s=t.origin;return{custom:i(e.config.objectType||n.type)?{"spt:device":r.deviceType,"spt:permalink":n.url,"spt:referrer":s.url,"spt:site":o.id,"spt:url":n.url,"spt:articleId":"Article"===n.type?n.id:void 0,"spt:pageId":"Page"===n.type||"Frontpage"===n.type?n.id:void 0}:{}}}))},!0)}}]),r}();pulse("provide","populateDefaultValues",o)},i=()=>{const e="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},t=Object.assign?Object.assign:function(e,t,n,r){for(let t=1;t<arguments.length;t++)c(Object(arguments[t]),(function(t,n){e[n]=t}));return e},r=function(){if(Object.create)return function(e,n,r,i){const o=a(arguments,1);return t.apply(this,[Object.create(e)].concat(o))};{function e(){}return function(n,r,i,o){const s=a(arguments,1);return e.prototype=n,t.apply(this,[new e].concat(s))}}}(),i=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},o="undefined"!=typeof window?window:e,s={assign:t,create:r,trim:i,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:a,each:c,map:function(e,t){const n=l(e)?[]:{};return u(e,(function(e,r){return n[r]=t(e,r),!1})),n},pluck:u,isList:l,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:o};function a(e,t){return Array.prototype.slice.call(e,t||0)}function c(e,t){u(e,(function(e,n){return t(e,n),!1}))}function u(e,t){if(l(e)){for(let n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(const n in e)if(e.hasOwnProperty(n)&&t(e[n],n))return e[n]}function l(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}const d=s.slice,p=s.pluck,f=s.each,g=s.bind,h=s.create,v=s.isList,m=s.isFunction,y=s.isObject,b={createStore:S},w={version:"2.0.12",enabled:!1,get:function(e,t){const n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){const t=this;this.storage.each((function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return S.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return S(this.storage,this.plugins,e)}};function S(e,t,n){n||(n=""),e&&!v(e)&&(e=[e]),t&&!v(t)&&(t=[t]);const r=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");const o={_namespacePrefix:r,_namespaceRegexp:i,_testStorage:function(e){try{const t="__storejs__test__";e.write(t,t);const n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(e,t){const n=this[t];this[t]=function(){const t=d(arguments,0),r=this,i=[function(){if(n)return f(arguments,(function(e,n){t[n]=e})),n.apply(r,t)}].concat(t);return e.apply(r,i)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;let n="";try{n=JSON.parse(e)}catch(t){n=e}return void 0!==n?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){const t=this;if(v(e))return void f(e,(function(e){t._addPlugin(e)}));if(p(this.plugins,(function(t){return e===t})))return;if(this.plugins.push(e),!m(e))throw new Error("Plugins must be function values that return objects");const n=e.call(this);if(!y(n))throw new Error("Plugins must return an object of function properties");f(n,(function(n,r){if(!m(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)}))},addStorage:function(e){!function(){const e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},s=h(o,w,{plugins:[]});return s.raw={},f(s,(function(e,t){m(e)&&(s.raw[t]=g(s,e))})),f(e,(function(e){s._addStorage(e)})),f(t,(function(e){s._addPlugin(e)})),s}const _=s.Global,k={name:"localStorage",read:C,write:function(e,t){return I().setItem(e,t)},each:function(e){for(let t=I().length-1;t>=0;t--){const n=I().key(t);e(C(n),n)}},remove:function(e){return I().removeItem(e)},clearAll:function(){return I().clear()}};function I(){return _.localStorage}function C(e){return I().getItem(e)}const P=s.trim,E={name:"cookieStorage",read:function(e){if(!e||!x(e))return null;const t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(T.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){e&&(T.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:O,remove:j,clearAll:function(){O((function(e,t){j(t)}))}},T=s.Global.document;function O(e){const t=T.cookie.split(/; ?/g);for(let n=t.length-1;n>=0;n--){if(!P(t[n]))continue;const r=t[n].split("="),i=unescape(r[0]);e(unescape(r[1]),i)}}function j(e){e&&x(e)&&(T.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function x(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(T.cookie)}const A=function(){function e(e,t){for(let n=0;n<t.length;n++){const r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),U="previousArticle",L="previousPage",N=["Page","Frontpage","Listing"],R="referringImpression",M={objectType:void 0};function D(e){const t=document.createElement("a");return t.setAttribute("href",e),t.hostname}function F(e){return Boolean(e)&&e.length>0}function $(e){return Boolean(e)&&(e.indexOf("/i/")>0||e.indexOf("html")>0)}const B=function(){function e(t){const n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tracker=t,this.store=b.createStore([k,E]),this.config=Object.assign({},M,n),this.update()}return A(e,[{key:"update",value:function(){this.updateTrackerState(),this.updatePersistedHistory()}},{key:"updateTrackerState",value:function(){const e=this;this.tracker.update({object:{custom:new Promise((function(t,n){e.tracker.evaluateEventInputs().then((function(n){const r={"spt:url":n.object.url,"spt:referrer":"","spt:isReferrerArticle":!1,"spt:referrerId":"","spt:previousReferrer":null,"spt:referringImpression":null};if(i=n.origin.url,o=n.object.url,!F(i)||!F(o)||D(i)!==D(o))return t(r);var i,o;const s=(e.config.objectType?{type:e.config.objectType}:n.object).type;if("Article"===s||"SalesPoster"===s){const r=e.store.get(L);let i=e.store.get(U);i&&(function(e,t){return F(e)&&F(t)&&$(e)&&$(t)}(n.origin.url,i.referrer)||(i=!1));const o=r||i,s=e.store.get(R);return t({"spt:url":n.object.url,"spt:referrer":n.origin.url,"spt:isReferrerArticle":Boolean(i),"spt:referrerId":o?o.id:n.origin.url,"spt:previousReferrer":o?o.referrer:null,"spt:referringImpression":s||null})}return-1!==N.indexOf(s)?t({"spt:url":n.object.url,"spt:referrer":n.origin.url}):t(r)})).catch(n)}))}},!0)}},{key:"updatePersistedHistory",value:function(){const e=this;this.tracker.evaluateEventInputs().then((function(t){const n=t.object.type;"Article"===n?e.updatePersistedArticleHistory():-1!==N.indexOf(n)?e.updatePersistedPageHistory():"SalesPoster"===n&&e.updatePersistedSalesPosterHistory()}))}},{key:"updatePersistedPageHistory",value:function(){const e=this;this.store.set(U,null),this.store.set(R,null),this.tracker.evaluateEventInputs().then((function(t){e.store.set(L,{url:t.object.url,referrer:t.origin.url,id:t.object.id,type:t.object.type})}))}},{key:"updatePersistedArticleHistory",value:function(){const e=this;this.store.set(L,null),this.store.set(R,null),this.tracker.evaluateEventInputs().then((function(t){e.store.set(U,{url:t.object.url,referrer:t.origin.url,id:t.object.id})}))}},{key:"updatePersistedSalesPosterHistory",value:function(){}},{key:"updatePersistedImpressionHistory",value:function(){const e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t&&t.hasOwnProperty("impression")){const n=t.impression;this.tracker.evaluateEventInputs().then((function(t){n.pageViewId=e.tracker.getPageViewId(),n.url=t.object.url,n.referrer=t.origin.url,e.store.set(R,n)}))}}}]),e}();pulse("provide","localHistory",B)},o=()=>{const e=function(e){const t=typeof e;return null!=e&&("object"==t||"function"==t)},t="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},r="object"==typeof t&&t&&t.Object===Object&&t,i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")(),s=function(){return o.Date.now()},a=o.Symbol,c=Object.prototype,u=c.hasOwnProperty,l=c.toString,d=a?a.toStringTag:void 0,p=Object.prototype.toString,f=a?a.toStringTag:void 0,g=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":f&&f in Object(e)?function(e){const t=u.call(e,d),n=e[d];try{e[d]=void 0;var r=!0}catch(e){}const i=l.call(e);return r&&(t?e[d]=n:delete e[d]),i}(e):function(e){return p.call(e)}(e)},h=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,y=/^0o[0-7]+$/i,b=parseInt,w=function(t){if("number"==typeof t)return t;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==g(e)}(t))return NaN;if(e(t)){const n="function"==typeof t.valueOf?t.valueOf():t;t=e(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(h,"");const n=m.test(t);return n||y.test(t)?b(t.slice(2),n?2:8):v.test(t)?NaN:+t},S=Math.max,_=Math.min,k=function(t,n,r){let i=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),function(t,n,r){let i,o,a,c,u,l,d=0,p=!1,f=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){const n=i,r=o;return i=o=void 0,d=e,c=t.apply(r,n),c}function v(e){const t=e-l;return void 0===l||t>=n||t<0||f&&e-d>=a}function m(){const e=s();if(v(e))return y(e);u=setTimeout(m,function(e){const t=n-(e-l);return f?_(t,a-(e-d)):t}(e))}function y(e){return u=void 0,g&&i?h(e):(i=o=void 0,c)}function b(){const e=s(),t=v(e);if(i=arguments,o=this,l=e,t){if(void 0===u)return function(e){return d=e,u=setTimeout(m,n),p?h(e):c}(l);if(f)return u=setTimeout(m,n),h(l)}return void 0===u&&(u=setTimeout(m,n)),c}return n=w(n)||0,e(r)&&(p=!!r.leading,f="maxWait"in r,a=f?S(w(r.maxWait)||0,n):a,g="trailing"in r?!!r.trailing:g),b.cancel=function(){void 0!==u&&clearTimeout(u),d=0,i=l=o=u=void 0},b.flush=function(){return void 0===u?c:y(s())},b}(t,n,{leading:i,maxWait:n,trailing:o})},I=function(){function e(e,t){for(let n=0;n<t.length;n++){const r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C=function(){return(new Date).getTime()},P={pingInterval:5e3,updateInterval:500,windowEvents:["focus","resize","scroll"],bodyEvents:["beforeunload","focus","mousemove","mousedown","keydown"],containerQuery:"body"},E=function(){function e(t){const n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tracker=t,this.config=Object.assign({},P,r),this.throttledUpdate=k((function(){return n.update()}),this.config.updateInterval),this.start()}return I(e,[{key:"start",value:function(){const e=this;this.totalActiveTime=0,this.lastTimeActive=C(),this.lastTimeReported=C(),this.scrollPosition=0,this.containerViewPercentage=0,this.pingInterval=setInterval((function(){return e.ping()}),this.config.pingInterval),this.bind()}},{key:"stop",value:function(){this.lastTimeActive=void 0,this.lastTimeReported=void 0,this.scrollPosition=void 0,this.containerViewPercentage=void 0,clearInterval(this.pingInterval),this.unbind()}},{key:"ping",value:function(){if(this.lastTimeActive>this.lastTimeReported){const e=Object.assign({},this.config.event,{duration:this.totalActiveTime,scrollPosition:this.scrollPosition,object:{custom:{"spt:articleViewedPercentage":this.containerViewPercentage}}});this.tracker.track("engagementEvent",e),this.lastTimeReported=C()}}},{key:"updateScrollPosition",value:function(){const e=Math.max(0,Math.round(window.pageYOffset||document.scrollTop)-(document.clientTop||0));e>this.scrollPosition&&(this.scrollPosition=e);const t=document.querySelector(this.config.containerQuery)||document.body,n=Math.round(100/t.offsetHeight*function(e){const t=e.getBoundingClientRect(),n=e.offsetHeight-t.bottom+window.innerHeight;return n<=0?0:Math.min(n,e.offsetHeight)}(t));n>this.containerViewPercentage&&n<=100&&(this.containerViewPercentage=n)}},{key:"update",value:function(){this.updateScrollPosition(),this.lastTimeActive=C(),this.totalActiveTime+=this.config.updateInterval}},{key:"bind",value:function(){const e=this;this.config.windowEvents&&this.config.windowEvents.forEach((function(t){window.addEventListener(t,e.throttledUpdate)})),this.config.bodyEvents&&this.config.bodyEvents.forEach((function(t){document.body.addEventListener(t,e.throttledUpdate)}))}},{key:"unbind",value:function(){const e=this;this.config.windowEvents&&this.config.windowEvents.forEach((function(t){window.removeEventListener(t,e.throttledUpdate)})),this.config.bodyEvents&&this.config.bodyEvents.forEach((function(t){document.body.removeEventListener(t,e.throttledUpdate)}))}},{key:"restart",value:function(){this.stop(),this.start()}}]),e}();pulse("provide","engagementTime",E)};t.initPulseEngageAddon=()=>{r(),i(),o()}},11893:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initPulseImpressionAddon=void 0;const r=n(45569),i=n(70898),o=()=>{function e(){return{top:0,left:0,right:window.innerWidth||0,bottom:window.innerHeight||0}}window.pulse("provide","visibilityTracking",class{constructor(e,t){this.interval=500,this.query="[data-pulse-entity-id]",this.reportImmediately=!0,this.isFindingElements=!1,this.tracker=e,this.config=t,this.throttledFindNewElementsInViewportBinding=()=>this.throttledFindNewElementsInViewport(),this.start(this.reportImmediately)}throttledFindNewElementsInViewport(){this.isFindingElements||(window.setTimeout((()=>{this.findNewElementsInViewport(),this.isFindingElements=!1}),500),this.isFindingElements=!0)}start(e=!0){this.seenElements={},this.elementsToReport=[],this.reportInteval=setInterval((()=>this.reportVisibility()),this.interval),this.bind(),this.findNewElementsInViewport(),e&&this.reportVisibility()}stop(){clearInterval(this.reportInteval),this.unbind()}findNewElementsInViewport(){const t=document.querySelectorAll(this.query);Array.prototype.forEach.call(t,(t=>{const n=(0,r.getPulseMeta)(t),i=n.entityId;this.seenElements[i]||!function(t){const n=e(),r=t.getBoundingClientRect(),i=.33*(r.bottom-r.top),o=.33*(r.right-r.left);return r.width>0&&r.height>0&&r.left+o>=n.left&&r.right-o<=n.right&&r.top+i>=n.top&&r.bottom-i<=n.bottom}(t)&&!function(t){const n=e(),r=.33*(n.bottom-n.top),i=t.getBoundingClientRect();return i.width>0&&i.left>=n.left&&i.right<=n.right&&(i.top>=n.top&&i.top<=n.bottom&&n.bottom-i.top>=r||i.bottom>=n.top&&i.bottom<=n.bottom&&i.bottom-n.top>=r||i.top<=n.top&&i.bottom>=n.bottom)}(t)||(this.seenElements[i]=n,this.elementsToReport.push(n))}))}reportVisibility(){this.elementsToReport.forEach((e=>{const t=(0,r.createPulseTarget)(e,this.config.publicationCode),n=(0,r.createPulseObject)(e,this.config.publicationCode,this.config.pageId,this.config.pageType),o=(0,r.createPulseProvider)(e),s=e.experiments&&e.experiments.length?[...window.PULSE_EXPERIMENTS||[],...e.experiments]:void 0,a=i.fasten.siteVersion(),c=(0,r.getDrEditionProps)(e,a,"View"),u=Object.assign({object:n,target:t,provider:o,experiments:s},c);this.tracker.track("trackerEvent",u)})),this.elementsToReport=[]}bind(){window.addEventListener("scroll",this.throttledFindNewElementsInViewportBinding),window.addEventListener("resize",this.throttledFindNewElementsInViewportBinding)}unbind(){window.removeEventListener("scroll",this.throttledFindNewElementsInViewportBinding),window.removeEventListener("resize",this.throttledFindNewElementsInViewportBinding)}restart(){this.stop(),this.start()}})};t.initPulseImpressionAddon=()=>{o()}},46857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEmbedScript=void 0,t.createEmbedScript=(e,t,n,r,i)=>{e[n]=e[n]||function(){(window[n].q=window[n].q||[]).push(arguments)};const o=t.createElement(r),s=document.getElementsByTagName(r)[0];o.setAttribute("async",""),o.setAttribute("src",i),s.parentNode.insertBefore(o,s)}},47287:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initPulse=async function(e){const{providerId:t}=r.frontendConfig.pulseConfig;(0,s.loadPulse)(),(0,u.initWidgetTracking)(),(0,i.initPulseEngageAddon)(),(0,o.initPulseImpressionAddon)(),await(0,c.pulseConfig)(t,e),(0,a.curateData)(e)};const r=n(71347),i=n(99407),o=n(11893),s=n(47073),a=n(45569),c=n(30183),u=n(24335)},47073:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPulse=void 0;const r=n(46857);t.loadPulse=()=>{(0,r.createEmbedScript)(window,document,"pulse","script","//cdn.aftenposten.no/js/pulse/pulse-20240917.min.js")}},45569:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNewsMediaPulseTracker=void 0,t.curateData=function(e){const t=function(){let e=null;try{e=window.localStorage,e&&e.setItem&&e.getItem&&e.removeItem?(e.setItem("test","test"),e.removeItem("test")):e=null}catch(t){console.log("Unable to get a working localStorage instance, probably security settings:",t),e=null}return e}(),n="curate",r="experiments",i={};if(t){if(!e)return o(r),o(n),i;s(r),s(n)}return!1;function o(e){if(!t)return;const n=t.getItem(e);null!==n&&(i[e]=JSON.parse(n))}function s(n){t&&Object.prototype.hasOwnProperty.call(e,n)&&t.setItem(n,JSON.stringify(e[n]))}},t.configureExtendedConfig=async function(e){window.CURATE_CONFIG&&window.CURATE_CONFIG.variant&&(e.curate=window.CURATE_CONFIG),window.CUSTOM_PAGE_CONFIG&&(e.trackTimeSpent=window.CUSTOM_PAGE_CONFIG.trackTimeSpent,e.pageId=window.CUSTOM_PAGE_CONFIG.pageId),window.OPINION_CONFIG&&window.OPINION_CONFIG.trackTimeSpent&&(e.trackTimeSpent=!0,e.pageId="opinion-form"),e.abTest={userABGroup:await(0,o.userAbGroup)(),abTestValue:(0,o.abTestValue)()}},t.prepReferringImpression=async function(e){if(!e)return;const t=e.getAttribute("data-pulse-position"),n={entityId:s(e,"data-pulse-entity-id"),position:t?parseInt(t,10):null,source:s(e,"data-pulse-source"),abTestValue:(0,o.abTestValue)(),userABGroup:await(0,o.userAbGroup)(),pxFromTop:e.offsetTop,productName:s(e,"data-pulse-product-name"),withSummary:s(e,"data-pulse-with-summary"),experiments:a(e,"data-pulse-experiments")};window.pulse("defaultTracker.localHistory.updatePersistedImpressionHistory",{impression:n})},t.createPulseProvider=function(e){const t={};return"AD"===e.entityType&&(t.productTag="partnerstudio"),"true"===e.forceToAmplitude?Object.assign({component:"schibsted-abo"},t):Object.assign({},t)},t.getPulseMeta=function(e){var t;return{entityType:l(e),entityId:s(e,"data-pulse-entity-id"),entityName:s(e,"data-pulse-entity-name"),source:s(e,"data-pulse-source"),position:null!==(t=c(e,"data-pulse-position"))&&void 0!==t?t:d(e)||void 0,positionInLevel:c(e,"data-pulse-position-in-level")||void 0,positionInBundle:c(e,"data-pulse-position-in-bundle")||void 0,accessLevel:s(e,"data-pulse-access-level"),accessLevelName:s(e,"data-pulse-access-level-name"),cardSize:s(e,"data-pulse-card-size"),url:u(e),teaserImage:s(e,"data-pulse-teaser-image"),title:s(e,"data-pulse-teaser-title"),sourceNewsroom:s(e,"data-pulse-newsroom"),sourceArticleId:s(e,"data-pulse-sourceId"),levelTemplateName:s(e,"data-pulse-level-template-name"),teaserFeatures:s(e,"data-pulse-teaser-features"),forceToAmplitude:s(e,"data-pulse-force-to-amplitude"),clientName:s(e,"data-pulse-client-name"),provider:s(e,"data-provider"),placement:s(e,"data-placement"),adVersion:s(e,"data-pulse-ad-version"),drEditionTeaserId:s(e,"data-dr-edition-id"),drEditionTeaserCreativeId:s(e,"data-dr-edition-creative-id"),drEditionEditionId:s(e,"data-dr-edition-editionId"),productName:s(e,"data-pulse-product-name"),bundleId:s(e,"data-pulse-bundle-id"),withSummary:s(e,"data-pulse-with-summary"),height:e.offsetHeight,width:e.offsetWidth,experiments:a(e,"data-pulse-experiments")}},t.createPulseTarget=function(e,t){switch(e.entityType){case"ARTICLE":case"AD":return function(e,t){if(f(e))return function(e,t){return{"@id":`sdrn:${t}:article:${e.drEditionTeaserId}`,"@type":"Article",url:e.url||""}}(e,t);const n="e24"===e.sourceNewsroom&&"aftenposten"===t?e.sourceNewsroom:t,r="e24"===e.sourceNewsroom&&"aftenposten"===t?e.sourceArticleId:e.entityId;return{"@id":"AD"===e.entityType?`sdrn:${n}:article:${e.drEditionTeaserId}`:`sdrn:${n}:article:${r}`,"@type":"Article",name:e.title,url:e.url,accessLevel:e.accessLevel,accessLevelName:e.accessLevelName,newsroom:n}}(e,t);case"LINK":return function(e){return{url:e.url}}(e);default:return{}}},t.createPulseObject=function(e,t,n,r){var i;const o=(null===(i=e.source)||void 0===i?void 0:i.split(":"))||[],s=o.pop()||null,a=o.pop()||null,c={page:{"@id":`sdrn:${t}:${r.toLowerCase()}:${n}`,"@type":r,url:window.location.href||""},placement:{primaryPosition:e.position,secondaryPosition:e.positionInLevel,positionInBundle:e.positionInBundle,curateContext:a,source:s,bundleId:e.bundleId},position:{levelPosition:e.position,source:e.source,positionInBundle:e.positionInBundle,positionInLevel:e.positionInLevel}};return"LINK"===e.entityType?Object.assign(Object.assign({},c),function(e){var t;return{id:`link:${e.entityId}`,"@type":"UIElement",name:null!==(t=e.entityName)&&void 0!==t?t:e.entityId,elementType:"Link","spt:custom":{"spt:productName":e.productName}}}(e)):Object.assign(Object.assign({},c),function(e,t,n){if(f(e))return function(e){return Object.assign({id:"no-content","@type":"UIElement",name:"no-content"},p(e))}(e);const r="Teaser";return Object.assign(Object.assign({"@id":`sdrn:${t}:${n.toLowerCase()}:teaser:${e.entityId}`,"@type":"UIElement",name:r,elementType:r,layout:{elementSize:e.cardSize,imageUrl:e.teaserImage},custom:{"spt:levelTemplateName":e.levelTemplateName,"spt:teaserFeatures":e.teaserFeatures,"spt:productName":e.productName,"spt:bundleId":e.bundleId,"spt:withSummary":e.withSummary,"spt:height":e.height,"spt:width":e.width}},function(e){return"AD"===e.entityType?{tags:[e.clientName,e.title,e.url]}:{}}(e)),p(e))}(e,t,r))},t.getDrEditionProps=function(e,t,n){if("AD"===e.entityType){const r=Math.floor(Date.now()/1e3),{drEditionTeaserId:i,drEditionTeaserCreativeId:o,url:s,title:a,placement:c,drEditionEditionId:u,algorithm:l}=e;return{engagement:"UIElement",provider:{productTag:"partnerstudio"},partnerstudio:{type:n,tracking_type:"ad",time:r,placement:c,link:s,editionId:u,itemId:i,device:t,creativeId:o,xandrAdLoaded:!1,title:a,algorithm:l}}}return{}};const r=n(79602),i=n(18931),o=n(40893);function s(e,t){return e.getAttribute(t)||void 0}function a(e,t){const n=s(e,t);if(!n)return;let r;try{r=JSON.parse(n)}catch(e){console.error("Error parsing JSON pulse metadata: ",n,e)}return r}function c(e,t){return e.hasAttribute(t)?Number(e.getAttribute(t)):null}function u(e){return e.getAttribute("data-pulse-url")||e.getAttribute("href")||void 0}function l(e){return"ARTICLE"===e.tagName?e.hasAttribute("data-dr-edition-id")?"AD":"ARTICLE":"LINK"}function d(e){const t=e.closest("section.widgets");return t?c(t,"data-pulse-position"):null}function p(e){if("AD"===e.entityType){const{drEditionTeaserId:t}=e;return{"spt:custom":{publicationName:e.provider,creativeId:"no-content"===t?t:e.drEditionTeaserCreativeId||t&&parseInt(t)||t,clientName:e.clientName?e.clientName:"",adVersion:e.adVersion}}}return{}}function f(e){var t;return"AD"===e.entityType&&"no-content"===(null===(t=e.entityId)||void 0===t?void 0:t.substr(0,10))&&"no-content"===e.drEditionTeaserId}let g;t.getNewsMediaPulseTracker=()=>{if(!g){const e=(0,i.getActorPromise)();g=r.NewsMediaPulseTracker.fromAutotracker(window.pulse,e)}return g}},30183:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pulseConfig=async function(e,t){var n;const c=window.location.host,{deployStage:u,deployTag:l}=function(e){return(0,o.isLocalhost)()?{deployStage:"dev",deployTag:"fasten-dev"}:(0,o.isReviewApp)()?{deployStage:"dev",deployTag:"fasten-pr"}:e.startsWith("alpha.")?{deployStage:"dev",deployTag:"fasten-alpha"}:e.startsWith("beta.")?{deployStage:"dev",deployTag:"fasten-beta"}:{deployStage:"pro",deployTag:"fasten-prod"}}(c),d=Object.assign({useBeacon:!0,useBeaconWhenAvailable:!0,deployStage:u},(0,s.getTcfConfig)());window.pulse("init",e,d);const p=r.fasten.sectionName()||r.fasten.sectionPath();let f="Listing",g=!1;p&&"forsiden"===p.toLowerCase()&&(f="Frontpage",g=!0);let h=!1,v=!1,m=!1,y=!1,b=!1;if(t&&(await(0,i.configureExtendedConfig)(t),Object.prototype.hasOwnProperty.call(t,"enableImpressions")&&(h=!!t.enableImpressions),g&&(Object.prototype.hasOwnProperty.call(t,"abTest")&&(y=!0),v=!0),Object.prototype.hasOwnProperty.call(t,"trackTimeSpent")&&(m=!0),Object.prototype.hasOwnProperty.call(t,"skipInitalPageView")&&t.skipInitalPageView&&(b=!0),Object.prototype.hasOwnProperty.call(t,"trackExperiments")&&t.trackExperiments&&(v=!0)),"dev"===u&&(window.pulse("update",{deployTag:l,deployStage:u}),document.cookie="_pulse2debug=true"),window.pulse("update",{object:{type:f,id:(null==t?void 0:t.pageId)?t.pageId:p}}),window.pulse("require","localHistory",{objectType:f}),window.pulse("require","populateDefaultValues",{}),y&&window.pulse("require","helloAbTest",null==t?void 0:t.abTest),v){let{experiments:r=[]}=t||{};(null===(n=null==t?void 0:t.curate)||void 0===n?void 0:n.experiment)&&r.push(t.curate.experiment),r=r.concat(window.PULSE_EXPERIMENTS||[]).map((t=>(t.platform||(t.platform=e),t))),t&&(t.experiments=r),window.PULSE_EXPERIMENTS=r;const{variant:i,personalization:o}=window.CURATE_CONFIG||{};window.pulse("update",{experiments:r,metrics:(0,a.generateMetrics)(i,o)})}const{trackViewListing:w,trackViewFrontpage:S}=await(0,i.getNewsMediaPulseTracker)();if(!b){const e=(null==t?void 0:t.pageId)?t.pageId:p||"",n=document.title;g?S({object:{id:e,name:n}}):w({object:{id:e,name:n}})}h&&(window.pulse("require","visibilityTracking",{publicationCode:e,pageId:p,pageType:f}),document.addEventListener("click",(async e=>{const t=e.target.closest("[data-pulse-entity-id]");t&&(await(0,i.prepReferringImpression)(t),window.trackClick(t))}),!0)),m&&window.pulse("require","engagementTime"),window.trackClick=function(t){const n=(0,i.getPulseMeta)(t),o=(0,i.createPulseTarget)(n,e),s=(0,i.createPulseObject)(n,e,p||"pageId-unknown",f),a=r.fasten.siteVersion(),c=[...window.PULSE_EXPERIMENTS||[],...n.experiments||[]];k(c),window.pulse("track","engagementEvent",Object.assign({action:"Click",object:s,target:o,experiments:c},(0,i.getDrEditionProps)(n,a,"Click")),!0)};const _=()=>{try{localStorage.removeItem("previousArticle"),localStorage.setItem("previousPage",JSON.stringify({type:f,id:(null==t?void 0:t.pageId)?t.pageId:p,url:window.location.href,referrer:window.document.referrer}))}catch(e){console.error(e)}},k=e=>{try{localStorage.setItem("experiments",JSON.stringify(e))}catch(e){console.error("Unable to update experiments to the localStorage:",e)}};window.addEventListener("pageshow",_),window.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&_()})),window.addEventListener("focus",_)};const r=n(70898),i=n(45569),o=n(50589),s=n(83658),a=n(89690)},24335:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initWidgetTracking=void 0;const r=n(45569);t.initWidgetTracking=()=>{window.addWidgetTracking=function(e){"function"==typeof r.prepReferringImpression&&"function"==typeof window.trackClick&&document.querySelectorAll(`${e} [data-pulse-entity-id]`).forEach((function(e){e.addEventListener("click",(async function(){await(0,r.prepReferringImpression)(e),window.trackClick(e)}))}))}}},79536:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reloadPersistedPageAfterMinutes=function(e){c({minutes:e})},t.reloadPersistedPageAfter=c;const r=n(50712),i="persisted-page-reload-time",o=3,s=e=>{(0,r.saveItemToLocalStorage)(i,e.toString())},a=()=>{const e=(0,r.getItemFromLocalStorage)(i);return e&&Number.parseInt(e,10)||0};function c({minutes:e,reloadFn:t=()=>{window.location.reload()}}){if(!r.isLocalStorageSupported)return()=>{};const n=(new Date).getTime();function i(r){if(r.persisted&&n){const r=(new Date).getTime(),i=(r-n)/1e3/60;(r-a())/1e3/60>o&&i>e&&(s(r),t())}}return window.addEventListener("pageshow",i),()=>{window.removeEventListener("pageshow",i)}}},40936:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.provideCoreHeaderSessionAdapter=void 0;const r=n(69784);t.provideCoreHeaderSessionAdapter=()=>{"undefined"!=typeof window&&(window.__CORE_HEADER_CONFIG__=window.__CORE_HEADER_CONFIG__||{},window.__CORE_HEADER_CONFIG__.sessionAdapter={id:"fastenSession",getSessionData:async()=>{const e=await(0,r.getSessionData)();return e?{user:null==e?void 0:e.user,hasProduct:e.access.entitled}:{user:null,hasProduct:!1,loginURI:(0,r.getLoginUrl)()}},onLoginClick:r.loginAction,onLogoutClick:r.logoutAction})}},69784:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserContextData=t.getUserStatus=t.logoutAction=t.loginAction=t.getLoginUrl=t.getSessionData=t.initUserSession=void 0;const r=n(91271),i=n(71347),o=n(74513),s=n(44362),a=n(535),c=n(70898),u=(()=>{const{clientId:e,env:t,sessionDomain:n,redirectUriDomain:r,useOriginAsRedirectUri:o,redirectUriPath:s,varnishCookieExpiresIn:a}=i.frontendConfig.accountSdkConfig;return{clientId:e,redirectUri:`${"PRE"===t||o?window.location.origin:r}${s}`,sessionDomain:n,env:t,varnishCookie:{expiresIn:a,domain:n.split(".").slice(-2).join(".")}}})(),l=new r.Identity(u),d=new r.Monetization(u);let p=null;window.Identity=l,t.initUserSession=async()=>{l.enableVarnishCookie(u.varnishCookie);const e=(0,s.getCachedSessionData)();(0,o.setBodyClasses)(e);const n=await(0,t.getSessionData)();(0,o.setBodyClasses)(n),(0,o.setSessionCookies)(n),!i.frontendConfig.accountSdkConfig.simplifiedLoginWidget||n||c.fasten.isMobileApp()||(0,a.showSimplifiedLoginWidget)(l)},t.getSessionData=async()=>p||(p=(async()=>{if(await l.isLoggedIn()){const{userId:e,uuid:t,familyName:n,givenName:r,sig:i,result:o,userStatus:s}=await l.getUser(),{entitled:a=!1,allowedFeatures:c=[]}=await d.hasAccess(window.frontendConfig.accountSdkConfig.productId.split(","),e)||{};return{user:{familyName:n,givenName:r,userId:e,uuid:t,result:o,userStatus:s,userToken:i},access:{entitled:a,allowedFeatures:c}}}return!1})(),p.then((e=>{e?(0,s.setCachedSessionData)(e):(0,s.clearCachedSessionData)()})).catch((()=>{(0,s.clearCachedSessionData)()})),p),t.getLoginUrl=()=>l.loginUrl({state:"dunno"}),t.loginAction=(e={state:"fallbackState"})=>{l.login(e)},t.logoutAction=()=>{(0,s.clearCachedSessionData)(),(0,o.setSessionCookies)(null),l.logout(window.location.href)},t.getUserStatus=async()=>{const e=await(0,t.getSessionData)();return{isLoggedIn:e&&!!e.user.userId,isSubscriber:e&&e.access.entitled}},t.getUserContextData=async()=>await l.getUserContextData(),window.accountSession={loginAction:t.loginAction}},44362:function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.clearCachedSessionData=t.setCachedSessionData=t.getCachedSessionData=void 0;const i=n(50712),o="fasten-session-cache";t.getCachedSessionData=()=>{try{const e=(0,i.getItemFromLocalStorage)(o);return e?JSON.parse(e):null}catch(e){return null}},t.setCachedSessionData=e=>{const t=(e=>{if(e&&e.user){const t=e.user,{userToken:n}=t;return{user:r(t,["userToken"]),access:e.access}}return e})(e);(0,i.saveItemToLocalStorage)(o,JSON.stringify(t))},t.clearCachedSessionData=()=>{(0,i.removeItemFromLocalStorage)(o)}},74513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionCookies=t.setBodyClasses=void 0,t.setBodyClasses=e=>{const t=document.body.classList;e?(t.remove("imp-no-session"),t.add("imp-logged-in"),e.access.entitled?t.add("imp-has-product"):t.remove("imp-has-product")):(t.remove("imp-logged-in"),t.remove("imp-has-product"),t.add("imp-no-session"))};const n=e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toUTCString()};t.setSessionCookies=e=>{e?(document.cookie=`curate-Id=${e.user.userId}; expires=${n(14)}; path=/;`,document.cookie=`SP_ABO=${e.access.allowedFeatures.join(",")}; expires=${n(365)}; path=/;`):(document.cookie="curate-Id=nothing; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;",document.cookie="SP_ABO=nothing; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;")}},535:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showSimplifiedLoginWidget=void 0;const r=n(3108),i=n(71347),o="simplified_login_state";t.showSimplifiedLoginWidget=e=>{i.frontendConfig.accountSdkConfig.simplifiedLoginWidget&&!(0,r.getItemFromLocalStorage)(o)&&e.showSimplifiedLoginWidget({state:"fallback"}).then((e=>{e&&(0,r.saveItemToLocalStorage)(o,!0,72e5)})).catch((e=>{e.toString().includes("Missing user data")||console.error("Simplified login widget error",e)}))}},83658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initSourcepoint=t.getTcfConfig=void 0;const r=n(375),i=n(71347);t.getTcfConfig=()=>{var e;const t="object"==typeof window&&(null===(e=window._tcf_)||void 0===e?void 0:e.getCachedOrDefaultConsentsForPulse())||void 0;return t?{consents:t,requireAdvertisingOptIn:!0}:{}},t.initSourcepoint=()=>{(0,r.tcf)(window,document,navigator,i.frontendConfig.sourcepoint)}},82470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUserConsentAll=t.isUserConsent=void 0;const r=n(78e3),i=n(71347),o=n(15723),s=n(69784);let a;const c={getEnvironmentId:()=>new Promise((e=>{window.pulse((t=>{t.getEnvironmentId().then(e)}))})),getUserId:async()=>{const e=await(0,s.getSessionData)();if(!e)return null;const{user:{userId:t}}=e;return t},getUserToken:async()=>{const e=await(0,s.getSessionData)();if(!e)return null;const{user:{userToken:t}}=e;return t}};t.isUserConsent=async(e,t,n=c)=>(a||await(e=>(0,o.resolveOnce)((async()=>{const t=await e.getEnvironmentId(),n=await e.getUserId(),o=await e.getUserToken(),{publication:s,apiUrl:c}=i.frontendConfig.privacySettingsConfig,u=n&&o;try{u?({permissions:a}=await(0,r.fetchAuthenticatedUserConsents)(n,o,s,c)):t?({permissions:a}=await(0,r.fetchAnonymousUserConsents)(t,s,c)):a=[]}catch(e){a=[]}})))(n)(),((e,t)=>a.some((n=>((e,t)=>e instanceof RegExp?e.test(t.purpose):t.purpose===e)(e,n)&&(!t||n.data.includes(t)))))(e,t)),t.isUserConsentAll=()=>{var e,t;return Boolean(!(null===(e=window._tcf_)||void 0===e?void 0:e.getConsentedToAllSync)||(null===(t=window._tcf_)||void 0===t?void 0:t.getConsentedToAllSync()))}},55937:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userDataStoreApi=void 0;const r=n(70898),i="/api/user/data/";let o=[],s=0;const a=()=>{o=[],s=0};t.userDataStoreApi={getUserData:async e=>((!o.length&&!s||s&&s<Date.now())&&(await(async()=>{o=await r.fasten.fetch("GET",i)})(),s=Date.now()+12e5),(e=>o.find((t=>t.key===e)))(e)),setUserData:async(e,t)=>{await r.fasten.fetch("post",i,{"Content-Type":"application/json"},"json",!1,JSON.stringify({key:e,value:t})),a()},deleteUserData:async e=>{const t=await r.fasten.fetch("delete",i,{"Content-Type":"application/json"},"json",!1,JSON.stringify({key:e}));return a(),t}}},50589:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReviewApp=t.isLocalhost=void 0,t.isLocalhost=()=>{const e=window.location.hostname;return e.includes("localhost")||e.includes("127.0.0.1")||e.startsWith("local.")},t.isReviewApp=()=>window.location.hostname.includes("pr.sls.schibsted.tech")},15723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveOnce=function(e){let t;return function(){return t||(t=e()),t}}},24430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleDebugMode=void 0;const r=n(50589);t.handleDebugMode=e=>{if(!e)return null;(0,r.isLocalhost)()&&e.update({deployTag:"fasten-dev"}),(0,r.isReviewApp)()&&e.update({deployTag:"fasten-pr"})}},8787:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActorPromise=void 0;const r=n(69784);t.getActorPromise=async()=>{const e=await(0,r.getSessionData)();if(!e)return{id:void 0};const{user:{userId:t},access:{entitled:n}}=e;return{id:t,subscriptionName:n?"Abo":"No",realm:"spid.no"}}},71003:(e,t)=>{"use strict";function n(e,t){return e.hasAttribute(t)?Number(e.getAttribute(t)):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.getPulseAttributesFromElement=void 0,t.getPulseAttributesFromElement=e=>{var t;return{entityId:e.getAttribute("data-pulse-entity-id")||void 0,entityName:e.getAttribute("data-pulse-entity-name")||void 0,entityType:e.getAttribute("data-pulse-entity-type")||void 0,elementPosition:n(e,"data-pulse-position"),source:e.getAttribute("data-pulse-source")||void 0,elementSize:e.getAttribute("data-pulse-element-size")||void 0,entityTargetId:e.getAttribute("data-pulse-entity-target-id")||void 0,entityTargetName:e.getAttribute("data-pulse-entity-target-name")||void 0,entityTargetUrl:e.getAttribute("data-pulse-entity-target-url")||void 0,elementPositionInBundle:n(e,"data-pulse-position-in-bundle"),entityAccessLevel:e.getAttribute("data-pulse-access-level")||void 0,entityAccessLevelName:e.getAttribute("data-pulse-access-level-name")||void 0,entityImageUrl:(null===(t=e.querySelector("img"))||void 0===t?void 0:t.getAttribute("src"))||void 0,entitySize:{height:e.clientHeight,width:e.clientWidth},elementBundleId:e.getAttribute("data-pulse-bundle-id")||void 0}}},50062:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleProductTag=void 0,t.handleProductTag=(e,t)=>{const{productTag:n,providerId:r}=t;e&&e.update({provider:{id:r,productTag:n||void 0,product:"fastenposten",productType:"ResponsiveWeb"}})}},18931:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(24430),t),i(n(71003),t),i(n(50062),t),i(n(8787),t)},89690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateMetrics=void 0,t.generateMetrics=(e,t)=>t&&e?[{source:"Curate",name:"personalizedResults",key:e,value:t.personalizedResults},{source:"Curate",name:"removeImpressed",key:e,value:t.removeOnImpressed},{source:"Curate",name:"removeRead",key:e,value:t.removeOnRead}]:[]},71347:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frontendConfigWithOverwrite=t.frontendConfig=void 0;const r=n(74461);window.frontendConfig||r.console.error("It looks that you are trying to read frontend config, but you have not included it in your HTML template"),t.frontendConfig=window.frontendConfig,t.frontendConfigWithOverwrite=e=>window.frontendConfig},83559:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.console=void 0;const r=n(52492);t.console=r.stdConsole},74461:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.console=void 0;var r=n(83559);Object.defineProperty(t,"console",{enumerable:!0,get:function(){return r.console}})},52492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stdConsole=void 0,t.stdConsole=console},70321:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUserAbGroup=t.isAnonymousSession=t.isPulseSession=t.isSpidSession=t.ANONYMOUS_SESSION_TYPE=t.PULSE_SESSION_TYPE=t.SPID_SESSION_TYPE=void 0,t.SPID_SESSION_TYPE="spid",t.PULSE_SESSION_TYPE="pulse",t.ANONYMOUS_SESSION_TYPE="anonymous",t.isSpidSession=e=>!!e&&"object"==typeof e&&e.type===t.SPID_SESSION_TYPE&&!!e.userId,t.isPulseSession=e=>!!e&&"object"==typeof e&&e.type===t.PULSE_SESSION_TYPE&&!!e.userId,t.isAnonymousSession=e=>!!e&&"object"==typeof e&&e.type===t.ANONYMOUS_SESSION_TYPE,t.isUserAbGroup=e=>"number"==typeof e&&Number.isInteger(e)&&e>=0&&e<=9},49966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.basicHash=function(e){let t=0;if(!e||0==e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}},25954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIosApp=t.isAndroidApp=t.isMobileApp=void 0,t.isMobileApp=()=>-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("hermes"),t.isAndroidApp=()=>(0,t.isMobileApp)()&&null!==window.navigator.userAgent.match(/android/i),t.isIosApp=()=>(0,t.isMobileApp)()&&!(0,t.isAndroidApp)()},91271:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Identity:()=>M,Monetization:()=>F,Payment:()=>B});const r=["boolean","number","string"];class i extends Error{constructor(e,t){if(super(e),this.name="SDKError","object"==typeof t)try{Object.assign(this,t)}catch(e){}}toString(){const e=`${this.name}: ${this.message}`,t=Object.keys(this).filter((e=>"name"!==e&&r.includes(typeof this[e]))).map((e=>`    ${e}: ${this[e]}`)).join("\n");return t?`${e}\n${t}`:e}}function o(e,t="Assertion failed"){if(!e)throw new i(t)}function s(e){return"string"==typeof e}function a(e){return"string"==typeof e&&e.length>0}function c(e){return"object"==typeof e&&null!==e}function u(e){return c(e)&&Object.keys(e).length>0}function l(e,...t){try{const n=new URL(e);return t.every((e=>n[e]))}catch(e){return!1}}function d(e){return"function"==typeof e}function p(e,t,n=!1){return!(!s(e)||!Array.isArray(t))&&(n?-1!==t.indexOf(e):t.some((t=>s(t)&&e.toUpperCase()===t.toUpperCase())))}function f(...e){const t={};if(!e||!e.length)throw new i("No objects to clone");return e.forEach((e=>{o(c(e)),u(e)&&Object.entries(e).forEach((([e,n])=>{void 0!==n&&(t[e]=c(n)?g(n):n)}))})),t}function g(e){return o("object"==typeof e,`obj should be an object (even null) but it is ${e}`),JSON.parse(JSON.stringify(e))||e}function h(e,t){return o(a(e),'"url" param must be a non empty string: '+typeof e),u(t)&&l(t[e])?t[e]:(o(l(e,"hostname"),`Bad URL given: '${e}'`),e)}const v={SPiD:{LOCAL:"http://id.localhost",DEV:"https://identity-dev.schibsted.com",PRE:"https://identity-pre.schibsted.com",PRO:"https://login.schibsted.com",PRO_NO:"https://payment.schibsted.no",PRO_FI:"https://login.schibsted.fi",PRO_DK:"https://login.schibsted.dk"},BFF:{LOCAL:"http://id.localhost/authn/",DEV:"https://identity-dev.schibsted.com/authn/",PRE:"https://identity-pre.schibsted.com/authn/",PRO:"https://login.schibsted.com/authn/",PRO_NO:"https://payment.schibsted.no/authn/",PRO_FI:"https://login.schibsted.fi/authn/",PRO_DK:"https://login.schibsted.dk/authn/"},SESSION_SERVICE:{LOCAL:"http://session-service.id.localhost",DEV:"https://session-service.identity-dev.schibsted.com",PRE:"https://session-service.identity-pre.schibsted.com",PRO:"https://session-service.login.schibsted.com",PRO_NO:"https://session-service.payment.schibsted.no",PRO_FI:"https://session-service.login.schibsted.fi",PRO_DK:"https://session-service.login.schibsted.dk"}},m={LOCAL:"id.localhost",DEV:"schibsted.com",PRE:"schibsted.com",PRO:"schibsted.com",PRO_NO:"spid.no",PRO_FI:"schibsted.fi",PRO_DK:"schibsted.dk"};var y=n(51504);class b{constructor(e){this.store=e,this.get=e=>this.store.getItem(e),this.set=(e,t)=>this.store.setItem(e,t),this.delete=e=>this.store.removeItem(e)}}class w{constructor(){this.store={},this.get=e=>this.store[e],this.set=(e,t)=>this.store[e]=t,this.delete=e=>delete this.store[e]}}const S=Math.pow(2,31)-1;class _{constructor(e){!function(e){if(!e)return!1;try{const t=e(),n="x-x-x-x".replace(/x/g,(()=>Math.random())),r="TEST-VALUE";t.setItem(n,r);const i=t.getItem(n);return t.removeItem(n),i===r}catch(e){return!1}}(e)?(this.cache=new w,this.type="ObjectLiteralStorage"):(this.cache=new b(e()),this.type="WebStorage")}get(e){try{let t=function(e){try{return JSON.parse(e)}catch(e){return null}}(this.cache.get(e));return t&&Number.isInteger(t.expiresOn)&&t.expiresOn>Date.now()?t.value:(this.delete(e),null)}catch(e){throw new i(e)}}set(e,t,n=0){if(!(n<=0)){n=Math.min(S,n);try{const r=Math.floor(Date.now()+n);this.cache.set(e,JSON.stringify({expiresOn:r,value:t})),setTimeout((()=>this.delete(e)),n)}catch(e){throw new i(e)}}}delete(e){try{this.cache.delete(e)}catch(e){throw new i(e)}}}const k={scrollbars:"yes",location:"yes",status:"no",menubar:"no",toolbar:"no",resizable:"yes"};function I(e,t,n="",r={}){o(c(e),`window was supposed to be an object but it is ${e}`),o(c(e.screen),"window should be a valid Window object but it lacks a 'screen' property"),o(d(e.open),"window should be a valid Window object but it lacks an 'open' function"),o(l(t),"Invalid URL for popup");const{height:i,width:s}=e.screen;let a=f(k,r);Number.isFinite(a.width)&&Number.isFinite(s)&&(a.left=(s-a.width)/2),Number.isFinite(a.height)&&Number.isFinite(i)&&(a.top=(i-a.height)/2);const u=(o(c(p=a),`Object must be an object but it is '${p}'`),Object.keys(p).map((e=>`${e}=${p[e]}`)).join(","));var p;return e.open(t,n,u)}const C=(e,...t)=>"function"==typeof e&&e((e=>e.map((e=>c(e)?JSON.stringify(e,null,2):e)).join(" "))(t));function P(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(e=>t[e]))}const E=()=>window.fetch&&window.fetch.bind(window);class T{constructor({serverUrl:e="PRE",envDic:t,fetch:n=E(),log:r,defaultParams:i={}}){o(c(i),"defaultParams should be a non-null object"),this.url=new URL(h(e,t)),this.defaultParams=i,r&&(o(d(r),`log must be a function but it is ${r}`),this.log=r),n&&(o(d(n),"Fetch should be a function"),this.fetch=n)}async go({method:e,headers:t,pathname:n,data:r={},useDefaultParams:u=!0,fetchOptions:l={method:e,credentials:"include"}}){o(d(this.fetch),"Can't make a call. The reference to fetch is missing or not a function."),o(a(e),`Method must be a non empty string but it is "${e}"`),o(a(n),`Pathname must be string but it is "${n}"`),o(c(r),"data must be a non-null object"),l.headers=c(t)?f(t):{};const p=this.makeUrl(n,r,u);C(this.log,"Request:",l.method.toUpperCase(),p),C(this.log,"Request Headers:",l.headers),C(this.log,"Request Body:",l.body);try{const e=await this.fetch(p,l);if(C(this.log,"Response Code:",e.status,e.statusText),!e.ok)throw new i(e.statusText,{code:e.status});const t=await e.json();return C(this.log,"Response Parsed:",t),t}catch(t){let n=s(t)?t:"Unknown RESTClient error";throw c(t)&&s(t.message)&&(n=t.message),new i(`Failed to '${e}' '${p}': '${n}'`,t)}}makeUrl(e="",t={},n=!0){const r=new URL(e,this.url);return r.search=T.search(t,n,this.defaultParams),r.href}get(e,t){return this.go({method:"get",pathname:e,data:t})}static search(e,t,n){const r=t?f(n,e):f(e);return Object.keys(r).filter((e=>""!==r[e])).map((e=>`${P(e)}=${P(r[e])}`)).join("&")}}const O=T;function j(e){null!==e.SPiD&&"object"==typeof e.SPiD||(e.SPiD={}),null!==e.SPiD.Talk&&"object"==typeof e.SPiD.Talk||(e.SPiD.Talk={}),d(e.SPiD.Talk.response)||(e.SPiD.Talk.response=(t,n)=>e[t](n))}const x="5.1.0",A="hasSession-cache",U="sessionCallBlocked-cache",L="tab-id-cache",N=Math.floor(1e5*Math.random()),R=()=>window;class M extends y{constructor({clientId:e,redirectUri:t,sessionDomain:n,env:r="PRE",log:i,window:s=R(),callbackBeforeRedirect:u=()=>{}}){super(),o(a(e),"clientId parameter is required"),o(c(s),"The reference to window is missing"),o(!t||l(t),"redirectUri parameter is invalid"),o(n&&l(n),"sessionDomain parameter is not a valid URL"),j(s),this._sessionInitiatedSent=!1,this.window=s,this.clientId=e,this.sessionStorageCache=new _((()=>this.window&&this.window.sessionStorage)),this.localStorageCache=new _((()=>this.window&&this.window.localStorage)),this.redirectUri=t,this.env=r,this.log=i,this.callbackBeforeRedirect=u,this._sessionDomain=n,this._enableSessionCaching=!0,this._session={},this._setSessionServiceUrl(n),this._setSpidServerUrl(r),this._setBffServerUrl(r),this._setOauthServerUrl(r),this._setGlobalSessionServiceUrl(r),this._unblockSessionCall()}_getTabId(){if(this._enableSessionCaching){return this.sessionStorageCache.get(L)||(this.sessionStorageCache.set(L,N,2592e6),N)}}_isSessionCallBlocked(){return this.localStorageCache.get(U)}_blockSessionCall(){this.localStorageCache.set(U,!0,3e5)}_unblockSessionCall(){this.localStorageCache.delete(U)}_setSpidServerUrl(e){o(s(e),`url parameter is invalid: ${e}`),this._spid=new O({serverUrl:h(e,v.SPiD),log:this.log,defaultParams:{client_id:this.clientId,redirect_uri:this.redirectUri}})}_setOauthServerUrl(e){o(s(e),`url parameter is invalid: ${e}`),this._oauthService=new O({serverUrl:h(e,v.SPiD),log:this.log,defaultParams:{client_id:this.clientId,redirect_uri:this.redirectUri}})}_setBffServerUrl(e){o(s(e),`url parameter is invalid: ${e}`),this._bffService=new O({serverUrl:h(e,v.BFF),log:this.log,defaultParams:{client_id:this.clientId,redirect_uri:this.redirectUri}})}_setSessionServiceUrl(e){o(s(e),`domain parameter is invalid: ${e}`);const t=`sdrn:${m[this.env]}:client:${this.clientId}`;this._sessionService=new O({serverUrl:e,log:this.log,defaultParams:{client_sdrn:t,redirect_uri:this.redirectUri,sdk_version:x}})}_setGlobalSessionServiceUrl(e){o(s(e),`url parameter is invalid: ${e}`);const t=`sdrn:${m[this.env]}:client:${this.clientId}`;this._globalSessionService=new O({serverUrl:h(e,v.SESSION_SERVICE),log:this.log,defaultParams:{client_sdrn:t,sdk_version:x}})}_emitSessionEvent(e,t){t.userId&&this.emit("login",t),e.userId&&!t.userId&&this.emit("logout",t),e.userId&&t.userId&&e.userId!==t.userId&&this.emit("userChange",t),e.userId||t.userId?this.emit("sessionChange",t):this.emit("notLoggedin",t),t.userId&&!this._sessionInitiatedSent&&(this._sessionInitiatedSent=!0,this.emit("sessionInit",t)),e.userStatus!==t.userStatus&&this.emit("statusChange",t)}_closePopup(){this.popup&&(this.popup.closed||this.popup.close(),this.popup=null)}enableVarnishCookie(e){let t,n=0;Number.isInteger(e)?n=e:"object"==typeof e&&(n=e.expiresIn||n,t=e.domain||t),o(Number.isInteger(n),"'expiresIn' must be an integer"),o(n>=0,"'expiresIn' cannot be negative"),this.setVarnishCookie=!0,this.varnishExpiresIn=n,this.varnishCookieDomain=t}_maybeSetVarnishCookie(e){if(!this.setVarnishCookie)return;const t=new Date;if(this.varnishExpiresIn||"number"==typeof e.expiresIn&&e.expiresIn>0){const n=this.varnishExpiresIn||e.expiresIn;t.setTime(t.getTime()+1e3*n)}else t.setTime(0);let n=this.varnishCookieDomain||("string"==typeof e.baseDomain?e.baseDomain:document.domain)||"";const r=[`SP_ID=${e.sp_id}`,`expires=${t.toUTCString()}`,"path=/",`domain=.${n}`].join("; ");document.cookie=r}_maybeClearVarnishCookie(){this.setVarnishCookie&&this._clearVarnishCookie()}_clearVarnishCookie(){const e=this._session&&"string"==typeof this._session.baseDomain?this._session.baseDomain:document.domain;let t=this.varnishCookieDomain||e||"";document.cookie=`SP_ID=nothing; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${t}`}logSettings(){if(!this.log&&!window.console)throw new i("You have to provide log method in constructor");const e=this.log||console.log,t={clientId:this.clientId,redirectUri:this.redirectUri,env:this.env,sessionDomain:this._sessionDomain,sdkVersion:x};e(`Schibsted account SDK for browsers settings: \n${JSON.stringify(t,null,2)}`)}hasSession(){if(this._isSessionCallBlocked())return this._session;if(this._hasSessionInProgress)return this._hasSessionInProgress;const e=e=>{if(e.error)throw new i("HasSession failed",e.error);return this._maybeSetVarnishCookie(e),this._emitSessionEvent(this._session,e),this._session=e,e};return this._hasSessionInProgress=(async()=>{if(this._enableSessionCaching){let t=this.sessionStorageCache.get(A);if(t)return e(t)}let t=null;try{t=await this._sessionService.get("/v2/session",{tabId:this._getTabId()})}catch(e){if(e&&400===e.code&&this._enableSessionCaching){const t=1e3*(e.expiresIn||300);this.sessionStorageCache.set(A,{error:e},t)}throw e}if(t){if(((e={})=>{const t=Object.keys(e);return 1===t.length&&"redirectURL"===t[0]})(t))return this._blockSessionCall(),await this.callbackBeforeRedirect(),this._sessionService.makeUrl(t.redirectURL,{tabId:this._getTabId()});if(this._enableSessionCaching){const e=1e3*(t.expiresIn||300);this.sessionStorageCache.set(A,t,e)}}return e(t)})().then((e=>(this._hasSessionInProgress=!1,l(e)?this.window.location.href=e:e)),(e=>{throw this.emit("error",e),this._hasSessionInProgress=!1,new i("HasSession failed",e)})),this._hasSessionInProgress}async isLoggedIn(){try{return"result"in await this.hasSession()}catch(e){return!1}}clearCachedUserSession(){this.sessionStorageCache.delete(A)}async isConnected(){try{return!!(await this.hasSession()).result}catch(e){return!1}}async getUser(){const e=await this.hasSession();if(!e.result)throw new i("The user is not connected to this merchant");return g(e)}async getUserId(){const e=await this.hasSession();if(e.userId&&e.result)return e.userId;throw new i("The user is not connected to this merchant")}async getExternalId(e,t=""){const{pairId:n}=await this.hasSession();if(!n)throw new i("pairId missing in user session!");if(!e||0===e.length)throw new i("externalParty cannot be empty");return(async e=>{return(t=(new TextEncoder).encode(e),crypto.subtle.digest("SHA-256",t)).then((e=>{return t=e,Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("");var t}));var t})(((e,t,n)=>n?`${e}:${t}:${n}`:`${e}:${t}`)(n,e,t))}async getUserSDRN(){const{sdrn:e}=await this.hasSession();if(e)return e;throw new i("Failed to get SDRN from user session")}async getUserUuid(){const e=await this.hasSession();if(e.uuid&&e.result)return e.uuid;throw new i("The user is not connected to this merchant")}async getUserContextData(){try{return await this._globalSessionService.get("/user-context")}catch(e){return null}}login({state:e,acrValues:t="",scope:n="openid",redirectUri:r=this.redirectUri,preferPopup:i=!1,loginHint:o="",tag:s="",teaser:a="",maxAge:c="",locale:u="",oneStepLogin:l=!1,prompt:d="select_account"}){this._closePopup(),this.sessionStorageCache.delete(A);const p=this.loginUrl({state:e,acrValues:t,scope:n,redirectUri:r,loginHint:o,tag:s,teaser:a,maxAge:c,locale:u,oneStepLogin:l,prompt:d});return i&&(this.popup=I(this.window,p,"Schibsted account",{width:360,height:570}),this.popup)?this.popup:(this.window.location.href=p,null)}async getSpId(){try{return(await this.hasSession()).sp_id||null}catch(e){return null}}logout(e=this.redirectUri){this.sessionStorageCache.delete(A),this._maybeClearVarnishCookie(),this.emit("logout"),this.window.location.href=this.logoutUrl(e)}loginUrl({state:e,acrValues:t="",scope:n="openid",redirectUri:r=this.redirectUri,loginHint:i="",tag:s="",teaser:c="",maxAge:u="",locale:d="",oneStepLogin:f=!1,prompt:g="select_account"}){return"object"!=typeof arguments[0]&&(e=arguments[0],t=arguments[1],n=arguments[2]||n,r=arguments[3]||r,i=arguments[4]||i,s=arguments[5]||s,c=arguments[6]||c,u=isNaN(arguments[7])?u:arguments[7]),o(!t||p(t,["","otp-email"],!0)||t.split(" ").every((e=>p(e,["password","otp","sms","eid-dk","eid-no","eid-se","eid-fi","eid"],!0))),`The acrValues parameter is not acceptable: ${t}`),o(l(r),`loginUrl(): redirectUri must be a valid url but is ${r}`),o(a(e),`the state parameter should be a non empty string but it is ${e}`),this._oauthService.makeUrl("oauth/authorize",{response_type:"code",redirect_uri:r,scope:n,state:e,acr_values:t,login_hint:i,tag:s,teaser:c,max_age:u,locale:d,one_step_login:f||"",prompt:t?"":g})}logoutUrl(e=this.redirectUri){o(l(e),"logoutUrl(): redirectUri is invalid");const t={redirect_uri:e};return this._sessionService.makeUrl("logout",t)}accountUrl(e=this.redirectUri){return this._spid.makeUrl("profile-pages",{response_type:"code",redirect_uri:e})}phonesUrl(e=this.redirectUri){return this._spid.makeUrl("profile-pages/about-you/phone",{response_type:"code",redirect_uri:e})}async showSimplifiedLoginWidget(e,t){const n=await this.getUserContextData(),r={client_id:this.clientId};t&&t.encoding&&(r.encoding=t.encoding);const o=this._bffService.makeUrl("simplified-login-widget",r,!1),s=async e=>("function"==typeof e.state&&(e.state=await e.state()),e);return new Promise(((r,a)=>{if(!n||!n.display_text||!n.identifier)return a(new i("Missing user data"));const c={displayText:n.display_text,env:this.env,clientName:n.client_name,clientId:this.clientId,providerId:n.provider_id,windowWidth:()=>window.innerWidth,windowOnResize:e=>{window.onresize=e}};t&&t.locale&&(c.locale=t.locale);const u=async()=>{this.login(Object.assign(await s(e),{loginHint:n.identifier}))},l=async()=>{this.login(Object.assign(await s(e),{loginHint:n.identifier,prompt:"login"}))},d=()=>{this.emit("simplifiedLoginOpened")},p=()=>{this.emit("simplifiedLoginCancelled")};if(window.openSimplifiedLoginWidget)return window.openSimplifiedLoginWidget(c,u,l,d,p),r(!0);const f=document.createElement("script");f.type="text/javascript",f.src=o,f.onload=()=>{window.openSimplifiedLoginWidget(c,u,l,d,p),r(!0)},f.onerror=()=>{a(new i("Error when loading simplified login widget content"))},document.getElementsByTagName("body")[0].appendChild(f)}))}}const D=()=>window;class F extends y{constructor({clientId:e,redirectUri:t,env:n="PRE",sessionDomain:r,window:i=D()}){super(),j(i),o(a(e),"clientId parameter is required"),this.cache=new _((()=>i&&i.sessionStorage)),this.clientId=e,this.env=n,this.redirectUri=t,this._setSpidServerUrl(n),r&&(o(l(r),"sessionDomain parameter is not a valid URL"),this._setSessionServiceUrl(r))}_setSpidServerUrl(e){o(s(e),`url parameter is invalid: ${e}`),this._spid=new O({serverUrl:h(e,v.SPiD),defaultParams:{client_id:this.clientId,redirect_uri:this.redirectUri}})}_setSessionServiceUrl(e){o(s(e),`domain parameter is invalid: ${e}`);const t=`sdrn:${m[this.env]}:client:${this.clientId}`;this._sessionService=new O({serverUrl:e,log:this.log,defaultParams:{client_sdrn:t,redirect_uri:this.redirectUri,sdk_version:x}})}async hasAccess(e,t){if(!this._sessionService)throw new i("hasAccess can only be called if 'sessionDomain' is configured");if(!t)throw new i("'userId' must be specified");if(!Array.isArray(e))throw new i("'productIds' must be an array");const n=e.sort(),r=this._accessCacheKey(e,t);let o=this.cache.get(r);if(!o){o=await this._sessionService.get(`/hasAccess/${n.join(",")}`);const e=o.ttl;this.cache.set(r,o,1e3*e)}return o.entitled?(this.emit("hasAccess",{ids:n,data:o}),o):null}clearCachedAccessResult(e,t){this.cache.delete(this._accessCacheKey(e,t))}_accessCacheKey(e,t){return`prd_${e.sort()}_${t}`}subscriptionsUrl(e=this.redirectUri){return o(l(e),"subscriptionsUrl(): redirectUri is invalid"),this._spid.makeUrl("account/subscriptions",{redirect_uri:e})}productsUrl(e=this.redirectUri){return o(l(e),"productsUrl(): redirectUri is invalid"),this._spid.makeUrl("account/products",{redirect_uri:e})}}const $=()=>window;class B{constructor({clientId:e,redirectUri:t,env:n="PRE",publisher:r,window:i=$()}){j(i),o(a(e),"clientId parameter is required"),this.clientId=e,this.redirectUri=t,this.window=i,this.publisher=r,this._setSpidServerUrl(n),this._setBffServerUrl(n)}_setSpidServerUrl(e){o(s(e),`url parameter is invalid: ${e}`),this._spid=new O({serverUrl:h(e,v.SPiD),defaultParams:{client_id:this.clientId,redirect_uri:this.redirectUri}})}_setBffServerUrl(e){o(s(e),`url parameter is invalid: ${e}`),this._bff=new O({serverUrl:h(e,v.BFF),defaultParams:{client_id:this.clientId,redirect_uri:this.redirectUri}})}_closePopup(){this.popup&&(this.popup.closed||this.popup.close(),this.popup=null)}payWithPaylink({paylink:e,preferPopup:t,redirectUri:n=this.redirectUri}){o(l(n),"payWithPaylink(): redirectUri is invalid"),this._closePopup();const r=this.purchasePaylinkUrl(e,n);return t&&(this.popup=I(this.window,r,"Schibsted account",{width:360,height:570}),this.popup)?this.popup:(this.window.location.href=r,null)}purchaseHistoryUrl(e=this.redirectUri){return o(l(e),"purchaseHistoryUrl(): redirectUri is invalid"),this._spid.makeUrl("account/purchasehistory",{redirect_uri:e})}redeemUrl(e,t=this.redirectUri){return o(l(t),"redeemUrl(): redirectUri is invalid"),this._spid.makeUrl("account/redeem",{voucher_code:e})}purchasePaylinkUrl(e,t=this.redirectUri){return o(l(t),"purchasePaylinkUrl(): redirectUri is invalid"),o(a(e),"purchasePaylinkUrl(): paylinkId is required"),this._bff.makeUrl("payment/purchase",{paylink:e,redirect_uri:t})}purchaseProductFlowUrl(e,t=this.redirectUri){return o(l(t),"purchaseProductUrl(): redirectUri is invalid"),o(a(e),"purchaseProductFlowUrl(): productId is required"),this._bff.makeUrl("flow/checkout",{response_type:"code",flow:"payment",product_id:e,redirect_uri:t})}purchaseCampaignFlowUrl(e,t,n,r=this.redirectUri){return o(l(r),"purchaseCampaignFlowUrl(): redirectUri is invalid"),o(a(e),"purchaseCampaignFlowUrl(): campaignId is required"),o(a(t),"purchaseCampaignFlowUrl(): productId is required"),this._bff.makeUrl("flow/checkout",{response_type:"code",flow:"payment",campaign_id:e,product_id:t,voucher_code:n,redirect_uri:r})}purchasePromoCodeProductFlowUrl(e,t="",n=this.redirectUri){return o(l(n),"purchasePromoCodeProductFlowUrl(): redirectUri is invalid"),o(a(e),"purchasePromoCodeProductFlowUrl(): code is required"),o(a(this.publisher),"purchasePromoCodeProductFlowUrl(): publisher is required in the constructor"),this._bff.makeUrl("payment/purchase/code",{code:e,publisher:this.publisher,state:t,redirect_uri:n})}}}},e=>{e(e.s=49690)}]);
//# sourceMappingURL=main-d9423001fac1e698fa9a.min.js.map</script>
</body>
</html>
