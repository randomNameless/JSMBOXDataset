<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>_home.html</title>
</head>
<body>

<script>
/*! nics-css-js-compilation - v1.0.0 - 2024-03-07*/

/*! jQuery v1.11.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m="1.11.0",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(l.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:k&&!k.call("\ufeff\xa0")?function(a){return null==a?"":k.call(a)}:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||n.guid++,e):void 0},now:function(){return+new Date},support:l}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+-new Date,t=a.document,u=0,v=0,w=eb(),x=eb(),y=eb(),z=function(a,b){return a===b&&(j=!0),0},A="undefined",B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ab=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(cb){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function db(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;if((b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[],!a||"string"!=typeof a)return d;if(1!==(i=b.nodeType)&&9!==i)return[];if(n&&!e){if(f=Z.exec(a))if(h=f[1]){if(9===i){if(g=b.getElementById(h),!g||!g.parentNode)return d;if(g.id===h)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h)return d.push(g),d}else{if(f[2])return G.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(h)),d}if(c.qsa&&(!o||!o.test(a))){if(q=p=s,u=b,v=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){m=ob(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--)m[j]=q+pb(m[j]);u=$.test(a)&&mb(b.parentNode)||b,v=m.join(",")}if(v)try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}return xb(a.replace(P,"$1"),b,d,e)}function eb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function fb(a){return a[s]=!0,a}function gb(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function hb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function ib(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function lb(a){return fb(function(b){return b=+b,fb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function mb(a){return a&&typeof a.getElementsByTagName!==A&&a}c=db.support={},f=db.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},k=db.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;return e!==l&&9===e.nodeType&&e.documentElement?(l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=gb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=gb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&gb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=gb(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==A?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==A&&n?b.getElementsByClassName(a):void 0},p=[],o=[],(c.qsa=Y.test(e.querySelectorAll))&&(gb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),gb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")})),(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&gb(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},z=b?function(a,b){if(a===b)return j=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:4&d?-1:1)}:function(a,b){if(a===b)return j=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0;if(f===g)return ib(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)k.unshift(c);while(h[d]===k[d])d++;return d?ib(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e):l},db.matches=function(a,b){return db(a,null,null,b)},db.matchesSelector=function(a,b){if((a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']"),!(!c.matchesSelector||!n||p&&p.test(b)||o&&o.test(b)))try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return db(b,l,null,[a]).length>0},db.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},db.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):void 0;return void 0!==f?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},db.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},db.uniqueSort=function(a){var b,d=[],e=0,f=0;if(j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z),j){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return i=null,a},e=db.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=db.selectors={cacheLength:50,createPseudo:fb,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,bb),a[3]=(a[4]||a[5]||"").replace(ab,bb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||db.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&db.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&T.test(c)&&(b=ob(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,bb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=db.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[u,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(t&&((l[s]||(l[s]={}))[a]=[u,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||db.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?fb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:fb(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?fb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:fb(function(a){return function(b){return db(a,b).length>0}}),contains:fb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:fb(function(a){return U.test(a||"")||db.error("unsupported lang: "+a),a=a.replace(ab,bb).toLowerCase(),function(b){var c;do if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[0>c?c+b:c]}),even:lb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:lb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:lb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:lb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=jb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=kb(b);function nb(){}nb.prototype=d.filters=d.pseudos,d.setFilters=new nb;function ob(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=Q.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?db.error(a):x(a,i).slice(0)}function pb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function qb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=v++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[s]||(b[s]={}),(h=i[d])&&h[0]===u&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function rb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function sb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function tb(a,b,c,d,e,f){return d&&!d[s]&&(d=tb(d)),e&&!e[s]&&(e=tb(e,f)),fb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||wb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:sb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=sb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=sb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ub(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=qb(function(a){return a===b},i,!0),l=qb(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return!g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++)if(c=d.relative[a[j].type])m=[qb(rb(m),c)];else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[s]){for(e=++j;f>e;e++)if(d.relative[a[e].type])break;return tb(j>1&&rb(m),j>1&&pb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(P,"$1"),c,e>j&&ub(a.slice(j,e)),f>e&&ub(a=a.slice(e)),f>e&&pb(a))}m.push(c)}return rb(m)}function vb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=null==t?1:Math.random()||.1,x=v.length;for(k&&(h=g!==l&&g);q!==x&&null!=(m=v[q]);q++){if(e&&m){n=0;while(o=a[n++])if(o(m,g,i)){j.push(m);break}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}if(p+=q,c&&q!==p){n=0;while(o=b[n++])o(r,s,g,i);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=E.call(j));s=sb(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&db.uniqueSort(j)}return k&&(u=w,h=t),r};return c?fb(f):f}g=db.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=ob(a)),c=b.length;while(c--)f=ub(b[c]),f[s]?d.push(f):e.push(f);f=y(a,vb(e,d))}return f};function wb(a,b,c){for(var d=0,e=b.length;e>d;d++)db(a,b[d],c);return c}function xb(a,b,e,f){var h,i,j,k,l,m=ob(a);if(!f&&1===m.length){if(i=m[0]=m[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&n&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(ab,bb),b)||[])[0],!b)return e;a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){if(j=i[h],d.relative[k=j.type])break;if((l=d.find[k])&&(f=l(j.matches[0].replace(ab,bb),$.test(i[0].type)&&mb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&pb(i),!a)return G.apply(e,f),e;break}}}return g(a,m)(f,b,!n,e,$.test(a)&&mb(b.parentNode)||b),e}return c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=gb(function(a){return 1&a.compareDocumentPosition(l.createElement("div"))}),gb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||hb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&gb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||hb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),gb(function(a){return null==a.getAttribute("disabled")})||hb(J,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),db}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=a.document,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,B=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:A.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:z,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=z.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return y.find(a);this.length=1,this[0]=d}return this.context=z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};B.prototype=n.fn,y=n(z);var C=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!n(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function E(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return E(a,"nextSibling")},prev:function(a){return E(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(D[a]||(e=n.unique(e)),C.test(a)&&(e=e.reverse())),this.pushStack(e)}});var F=/\S+/g,G={};function H(a){var b=G[a]={};return n.each(a.match(F)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?G[a]||H(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&n.each(arguments,function(a,c){var d;while((d=n.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){if(a===!0?!--n.readyWait:!n.isReady){if(!z.body)return setTimeout(n.ready);n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(z,[n]),n.fn.trigger&&n(z).trigger("ready").off("ready"))}}});function J(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",K,!1),a.removeEventListener("load",K,!1)):(z.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(z.addEventListener||"load"===event.type||"complete"===z.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===z.readyState)setTimeout(n.ready);else if(z.addEventListener)z.addEventListener("DOMContentLoaded",K,!1),a.addEventListener("load",K,!1);else{z.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&z.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!n.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}J(),n.ready()}}()}return I.promise(b)};var L="undefined",M;for(M in n(l))break;l.ownLast="0"!==M,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c=z.getElementsByTagName("body")[0];c&&(a=z.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=z.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==L&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(l.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1)),c.removeChild(a),a=b=null)}),function(){var a=z.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}}a=null}(),n.acceptData=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(n.acceptData(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f
}}function S(a,b,c){if(n.acceptData(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d]));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},W=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},X=/^(?:checkbox|radio)$/i;!function(){var a=z.createDocumentFragment(),b=z.createElement("div"),c=z.createElement("input");if(b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a>",l.leadingWhitespace=3===b.firstChild.nodeType,l.tbody=!b.getElementsByTagName("tbody").length,l.htmlSerialize=!!b.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,a.appendChild(c),l.appendChecked=c.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,a.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){l.noCloneEvent=!1}),b.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete b.test}catch(d){l.deleteExpando=!1}}a=b=c=null}(),function(){var b,c,d=z.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),l[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Y=/^(?:input|select|textarea)$/i,Z=/^key/,$=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,ab=/^([^.]*)(?:\.(.+)|)$/;function bb(){return!0}function cb(){return!1}function db(){try{return z.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof n===L||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(F)||[""],h=b.length;while(h--)f=ab.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(F)||[""],j=b.length;while(j--)if(h=ab.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,m,o=[d||z],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||z,3!==d.nodeType&&8!==d.nodeType&&!_.test(p+n.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[n.expando]?b:new n.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),k=n.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!n.isWindow(d)){for(i=k.delegateType||p,_.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||z)&&o.push(l.defaultView||l.parentWindow||a)}m=0;while((h=o[m++])&&!b.isPropagationStopped())b.type=m>1?i:k.bindType||p,f=(n._data(h,"events")||{})[b.type]&&n._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&n.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&n.acceptData(d)&&g&&d[p]&&!n.isWindow(d)){l=d[g],l&&(d[g]=null),n.event.triggered=p;try{d[p]()}catch(r){}n.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((n.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?n(c,this).index(i)>=0:n.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=$.test(e)?this.mouseHooks:Z.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||z),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||z,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==db()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===db()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=z.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===L&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault())?bb:cb):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:cb,isPropagationStopped:cb,isImmediatePropagationStopped:cb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=bb,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=bb,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submitBubbles||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?b.form:void 0;c&&!n._data(c,"submitBubbles")&&(n.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),n._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.changeBubbles||(n.event.special.change={setup:function(){return Y.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),n.event.simulate("change",this,a,!0)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;Y.test(b.nodeName)&&!n._data(b,"changeBubbles")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a,!0)}),n._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!Y.test(this.nodeName)}}),l.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=cb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return n().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=cb),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});function eb(a){var b=fb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var fb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gb=/ jQuery\d+="(?:null|\d+)"/g,hb=new RegExp("<(?:"+fb+")[\\s/>]","i"),ib=/^\s+/,jb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kb=/<([\w:]+)/,lb=/<tbody/i,mb=/<|&#?\w+;/,nb=/<(?:script|style|link)/i,ob=/checked\s*(?:[^=]|=\s*.checked.)/i,pb=/^$|\/(?:java|ecma)script/i,qb=/^true\/(.*)/,rb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},tb=eb(z),ub=tb.appendChild(z.createElement("div"));sb.optgroup=sb.option,sb.tbody=sb.tfoot=sb.colgroup=sb.caption=sb.thead,sb.th=sb.td;function vb(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==L?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==L?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,vb(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function wb(a){X.test(a.type)&&(a.defaultChecked=a.checked)}function xb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function yb(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function zb(a){var b=qb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ab(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}function Bb(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Cb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(yb(b).text=a.text,zb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&X.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}n.extend({clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!hb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ub.innerHTML=a.outerHTML,ub.removeChild(f=ub.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=vb(f),h=vb(a),g=0;null!=(e=h[g]);++g)d[g]&&Cb(e,d[g]);if(b)if(c)for(h=h||vb(a),d=d||vb(f),g=0;null!=(e=h[g]);g++)Bb(e,d[g]);else Bb(a,f);return d=vb(f,"script"),d.length>0&&Ab(d,!i&&vb(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,m=a.length,o=eb(b),p=[],q=0;m>q;q++)if(f=a[q],f||0===f)if("object"===n.type(f))n.merge(p,f.nodeType?[f]:f);else if(mb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(kb.exec(f)||["",""])[1].toLowerCase(),k=sb[i]||sb._default,h.innerHTML=k[1]+f.replace(jb,"<$1></$2>")+k[2],e=k[0];while(e--)h=h.lastChild;if(!l.leadingWhitespace&&ib.test(f)&&p.push(b.createTextNode(ib.exec(f)[0])),!l.tbody){f="table"!==i||lb.test(f)?"<table>"!==k[1]||lb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)n.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}n.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),l.appendChecked||n.grep(vb(p,"input"),wb),q=0;while(f=p[q++])if((!d||-1===n.inArray(f,d))&&(g=n.contains(f.ownerDocument,f),h=vb(o.appendChild(f),"script"),g&&Ab(h),c)){e=0;while(f=h[e++])pb.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.deleteExpando,m=n.event.special;null!=(d=a[h]);h++)if((b||n.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k?delete d[i]:typeof d.removeAttribute!==L?d.removeAttribute(i):d[i]=null,c.push(f))}}}),n.fn.extend({text:function(a){return W(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(vb(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&Ab(vb(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(vb(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return W(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(gb,""):void 0;if(!("string"!=typeof a||nb.test(a)||!l.htmlSerialize&&hb.test(a)||!l.leadingWhitespace&&ib.test(a)||sb[(kb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(jb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(vb(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(vb(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,o=k-1,p=a[0],q=n.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&ob.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(k&&(i=n.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=n.map(vb(i,"script"),yb),f=g.length;k>j;j++)d=i,j!==o&&(d=n.clone(d,!0,!0),f&&n.merge(g,vb(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,n.map(g,zb),j=0;f>j;j++)d=g[j],pb.test(d.type||"")&&!n._data(d,"globalEval")&&n.contains(h,d)&&(d.src?n._evalUrl&&n._evalUrl(d.src):n.globalEval((d.text||d.textContent||d.innerHTML||"").replace(rb,"")));i=c=null}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],g=n(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Db,Eb={};function Fb(b,c){var d=n(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:n.css(d[0],"display");return d.detach(),e}function Gb(a){var b=z,c=Eb[a];return c||(c=Fb(a,b),"none"!==c&&c||(Db=(Db||n("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' height='0'/>")).appendTo(b.documentElement),b=(Db[0].contentWindow||Db[0].contentDocument).document,b.write(),b.close(),c=Fb(a,b),Db.detach()),Eb[a]=c),c}!function(){var a,b,c=z.createElement("div"),d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],a.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(a.style.opacity),l.cssFloat=!!a.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===c.style.backgroundClip,a=c=null,l.shrinkWrapBlocks=function(){var a,c,e,f;if(null==b){if(a=z.getElementsByTagName("body")[0],!a)return;f="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c=z.createElement("div"),e=z.createElement("div"),a.appendChild(c).appendChild(e),b=!1,typeof e.style.zoom!==L&&(e.style.cssText=d+";width:1px;padding:1px;zoom:1",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b=3!==e.offsetWidth),a.removeChild(c),a=c=e=null}return b}}();var Hb=/^margin/,Ib=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Jb,Kb,Lb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Jb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),Ib.test(g)&&Hb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):z.documentElement.currentStyle&&(Jb=function(a){return a.currentStyle},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ib.test(g)&&!Lb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Mb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h=z.createElement("div"),i="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",j="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",b=h.getElementsByTagName("a")[0],b.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(b.style.opacity),l.cssFloat=!!b.style.cssFloat,h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,b=h=null,n.extend(l,{reliableHiddenOffsets:function(){if(null!=c)return c;var a,b,d,e=z.createElement("div"),f=z.getElementsByTagName("body")[0];if(f)return e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=z.createElement("div"),a.style.cssText=i,f.appendChild(a).appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=e.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",c=d&&0===b[0].offsetHeight,f.removeChild(a),e=f=null,c},boxSizing:function(){return null==d&&k(),d},boxSizingReliable:function(){return null==e&&k(),e},pixelPosition:function(){return null==f&&k(),f},reliableMarginRight:function(){var b,c,d,e;if(null==g&&a.getComputedStyle){if(b=z.getElementsByTagName("body")[0],!b)return;c=z.createElement("div"),d=z.createElement("div"),c.style.cssText=i,b.appendChild(c).appendChild(d),e=d.appendChild(z.createElement("div")),e.style.cssText=d.style.cssText=j,e.style.marginRight=e.style.width="0",d.style.width="1px",g=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)}return g}});function k(){var b,c,h=z.getElementsByTagName("body")[0];h&&(b=z.createElement("div"),c=z.createElement("div"),b.style.cssText=i,h.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",n.swap(h,null!=h.style.zoom?{zoom:1}:{},function(){d=4===c.offsetWidth}),e=!0,f=!1,g=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(c,null)||{}).top,e="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),h.removeChild(b),c=h=null)}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Nb=/alpha\([^)]*\)/i,Ob=/opacity\s*=\s*([^)]*)/,Pb=/^(none|table(?!-c[ea]).+)/,Qb=new RegExp("^("+T+")(.*)$","i"),Rb=new RegExp("^([+-])=("+T+")","i"),Sb={position:"absolute",visibility:"hidden",display:"block"},Tb={letterSpacing:0,fontWeight:400},Ub=["Webkit","O","Moz","ms"];function Vb(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ub.length;while(e--)if(b=Ub[e]+c,b in a)return b;return d}function Wb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=n._data(d,"olddisplay",Gb(d.nodeName)))):f[g]||(e=V(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Xb(a,b,c){var d=Qb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Yb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Zb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Jb(a),g=l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Kb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ib.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Yb(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=Vb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Rb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]="",i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Vb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Kb(a,b,d)),"normal"===f&&b in Tb&&(f=Tb[b]),""===c||c?(e=parseFloat(f),c===!0||n.isNumeric(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Pb.test(n.css(a,"display"))?n.swap(a,Sb,function(){return Zb(a,b,d)}):Zb(a,b,d):void 0},set:function(a,c,d){var e=d&&Jb(a);return Xb(a,c,d?Yb(a,b,d,l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Ob.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Nb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Nb.test(f)?f.replace(Nb,e):f+" "+e)}}),n.cssHooks.marginRight=Mb(l.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},Kb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Hb.test(a)||(n.cssHooks[a+b].set=Xb)}),n.fn.extend({css:function(a,b){return W(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Jb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)
},a,b,arguments.length>1)},show:function(){return Wb(this,!0)},hide:function(){return Wb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function $b(a,b,c,d,e){return new $b.prototype.init(a,b,c,d,e)}n.Tween=$b,$b.prototype={constructor:$b,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=$b.propHooks[this.prop];return a&&a.get?a.get(this):$b.propHooks._default.get(this)},run:function(a){var b,c=$b.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):$b.propHooks._default.set(this),this}},$b.prototype.init.prototype=$b.prototype,$b.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},$b.propHooks.scrollTop=$b.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=$b.prototype.init,n.fx.step={};var _b,ac,bc=/^(?:toggle|show|hide)$/,cc=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),dc=/queueHooks$/,ec=[jc],fc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=cc.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&cc.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function gc(){return setTimeout(function(){_b=void 0}),_b=n.now()}function hc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=U[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function ic(a,b,c){for(var d,e=(fc[b]||[]).concat(fc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function jc(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&V(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k=Gb(a.nodeName),"none"===j&&(j=k),"inline"===j&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==k?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],bc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}if(!n.isEmptyObject(o)){r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=ic(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function kc(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function lc(a,b,c){var d,e,f=0,g=ec.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=_b||gc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:_b||gc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(kc(k,j.opts.specialEasing);g>f;f++)if(d=ec[f].call(j,a,k,j.opts))return d;return n.map(k,ic,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(lc,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],fc[c]=fc[c]||[],fc[c].unshift(b)},prefilter:function(a,b){b?ec.unshift(a):ec.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=lc(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&dc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(hc(b,!0),a,d,e)}}),n.each({slideDown:hc("show"),slideUp:hc("hide"),slideToggle:hc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(_b=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),_b=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ac||(ac=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(ac),ac=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e=z.createElement("div");e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=e.getElementsByTagName("a")[0],c=z.createElement("select"),d=c.appendChild(z.createElement("option")),b=e.getElementsByTagName("input")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==e.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=d.selected,l.enctype=!!z.createElement("form").enctype,c.disabled=!0,l.optDisabled=!d.disabled,b=z.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value,a=b=c=d=e=null}();var mc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(mc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.text(a)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var nc,oc,pc=n.expr.attrHandle,qc=/^(?:checked|selected)$/i,rc=l.getSetAttribute,sc=l.input;n.fn.extend({attr:function(a,b){return W(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===L?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?oc:nc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(F);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?sc&&rc||!qc.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(rc?c:d)},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),oc={set:function(a,b,c){return b===!1?n.removeAttr(a,c):sc&&rc||!qc.test(c)?a.setAttribute(!rc&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=pc[b]||n.find.attr;pc[b]=sc&&rc||!qc.test(b)?function(a,b,d){var e,f;return d||(f=pc[b],pc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,pc[b]=f),e}:function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),sc&&rc||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void(a.defaultValue=b):nc&&nc.set(a,b,c)}}),rc||(nc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},pc.id=pc.name=pc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:nc.set},n.attrHooks.contenteditable={set:function(a,b,c){nc.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var tc=/^(?:input|select|textarea|button|object)$/i,uc=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return W(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):tc.test(a.nodeName)||uc.test(a.nodeName)&&a.href?0:-1}}}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var vc=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(F)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(F)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===L||"boolean"===c)&&(this.className&&n._data(this,"__className__",this.className),this.className=this.className||a===!1?"":n._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(vc," ").indexOf(b)>=0)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var wc=n.now(),xc=/\?/,yc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(yc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var zc,Ac,Bc=/#.*$/,Cc=/([?&])_=[^&]*/,Dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ec=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fc=/^(?:GET|HEAD)$/,Gc=/^\/\//,Hc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ic={},Jc={},Kc="*/".concat("*");try{Ac=location.href}catch(Lc){Ac=z.createElement("a"),Ac.href="",Ac=Ac.href}zc=Hc.exec(Ac.toLowerCase())||[];function Mc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(F)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nc(a,b,c,d){var e={},f=a===Jc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Oc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Pc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Qc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ac,type:"GET",isLocal:Ec.test(zc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Oc(Oc(a,n.ajaxSettings),b):Oc(n.ajaxSettings,a)},ajaxPrefilter:Mc(Ic),ajaxTransport:Mc(Jc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Dc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||Ac)+"").replace(Bc,"").replace(Gc,zc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(F)||[""],null==k.crossDomain&&(c=Hc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===zc[1]&&c[2]===zc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(zc[3]||("http:"===zc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),Nc(Ic,k,b,v),2===t)return v;h=k.global,h&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Fc.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(xc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Cc.test(e)?e.replace(Cc,"$1_="+wc++):e+(xc.test(e)?"&":"?")+"_="+wc++)),k.ifModified&&(n.lastModified[e]&&v.setRequestHeader("If-Modified-Since",n.lastModified[e]),n.etag[e]&&v.setRequestHeader("If-None-Match",n.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Kc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Nc(Jc,k,b,v)){v.readyState=1,h&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Pc(k,v,c)),u=Qc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(n.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||n.css(a,"display"))},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var Rc=/%20/g,Sc=/\[\]$/,Tc=/\r?\n/g,Uc=/^(?:submit|button|image|reset|file)$/i,Vc=/^(?:input|select|textarea|keygen)/i;function Wc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Sc.test(a)?d(a,e):Wc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Wc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Wc(c,a[c],b,e);return d.join("&").replace(Rc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Vc.test(this.nodeName)&&!Uc.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Tc,"\r\n")}}):{name:b.name,value:c.replace(Tc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$c()||_c()}:$c;var Xc=0,Yc={},Zc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Yc)Yc[a](void 0,!0)}),l.cors=!!Zc&&"withCredentials"in Zc,Zc=l.ajax=!!Zc,Zc&&n.ajaxTransport(function(a){if(!a.crossDomain||l.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Xc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Yc[g],b=void 0,f.onreadystatechange=n.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Yc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function $c(){try{return new a.XMLHttpRequest}catch(b){}}function _c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=z.head||n("head")[0]||z.documentElement;return{send:function(d,e){b=z.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||n.expando+"_"+wc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(xc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||z;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var cd=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&cd)return cd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&n.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;function ed(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?(typeof e.getBoundingClientRect!==L&&(d=e.getBoundingClientRect()),c=ed(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||dd;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||dd})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return W(this,function(a,d,e){var f=ed(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Mb(l.pixelPosition,function(a,c){return c?(c=Kb(a,b),Ib.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return W(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var fd=a.jQuery,gd=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=gd),b&&a.jQuery===n&&(a.jQuery=fd),n},typeof b===L&&(a.jQuery=a.$=n),n});

;(function(f){"use strict";"function"===typeof define&&define.amd?define(["jquery"],f):"undefined"!==typeof module&&module.exports?module.exports=f(require("jquery")):f(jQuery)})(function($){"use strict";function n(a){return!a.nodeName||-1!==$.inArray(a.nodeName.toLowerCase(),["iframe","#document","html","body"])}function h(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}var p=$.scrollTo=function(a,d,b){return $(window).scrollTo(a,d,b)};p.defaults={axis:"xy",duration:0,limit:!0};$.fn.scrollTo=function(a,d,b){"object"=== typeof d&&(b=d,d=0);"function"===typeof b&&(b={onAfter:b});"max"===a&&(a=9E9);b=$.extend({},p.defaults,b);d=d||b.duration;var u=b.queue&&1<b.axis.length;u&&(d/=2);b.offset=h(b.offset);b.over=h(b.over);return this.each(function(){function k(a){var k=$.extend({},b,{queue:!0,duration:d,complete:a&&function(){a.call(q,e,b)}});r.animate(f,k)}if(null!==a){var l=n(this),q=l?this.contentWindow||window:this,r=$(q),e=a,f={},t;switch(typeof e){case "number":case "string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)){e= h(e);break}e=l?$(e):$(e,q);if(!e.length)return;case "object":if(e.is||e.style)t=(e=$(e)).offset()}var v=$.isFunction(b.offset)&&b.offset(q,e)||b.offset;$.each(b.axis.split(""),function(a,c){var d="x"===c?"Left":"Top",m=d.toLowerCase(),g="scroll"+d,h=r[g](),n=p.max(q,c);t?(f[g]=t[m]+(l?0:h-r.offset()[m]),b.margin&&(f[g]-=parseInt(e.css("margin"+d),10)||0,f[g]-=parseInt(e.css("border"+d+"Width"),10)||0),f[g]+=v[m]||0,b.over[m]&&(f[g]+=e["x"===c?"width":"height"]()*b.over[m])):(d=e[m],f[g]=d.slice&& "%"===d.slice(-1)?parseFloat(d)/100*n:d);b.limit&&/^\d+$/.test(f[g])&&(f[g]=0>=f[g]?0:Math.min(f[g],n));!a&&1<b.axis.length&&(h===f[g]?f={}:u&&(k(b.onAfterFirst),f={}))});k(b.onAfter)}})};p.max=function(a,d){var b="x"===d?"Width":"Height",h="scroll"+b;if(!n(a))return a[h]-$(a)[b.toLowerCase()]();var b="client"+b,k=a.ownerDocument||a.document,l=k.documentElement,k=k.body;return Math.max(l[h],k[h])-Math.min(l[b],k[b])};$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(a){return $(a.elem)[a.prop]()}, set:function(a){var d=this.get(a);if(a.options.interrupt&&a._last&&a._last!==d)return $(a.elem).stop();var b=Math.round(a.now);d!==b&&($(a.elem)[a.prop](b),a._last=this.get(a))}};return p});
/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",f.resetText||d.data("resetText",d[e]()),d[e](f[b]||this.options[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});return this.$element.trigger(j),j.isDefaultPrevented()?void 0:(this.sliding=!0,f&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),f&&this.cycle(),this)};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=" li:not(.divider):visible a",i=f.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=this.$element.parent(),l=e,m=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),p="body"==this.options.container?0:k.offset().left;e="bottom"==e&&h.top+h.height+j-m>o?"top":"top"==e&&h.top-m-j<0?"bottom":"right"==e&&h.right+i>n?"left":"left"==e&&h.left-i<p?"right":e,d.removeClass(l).addClass(e)}var q=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(q,e),this.hoverState=null;var r=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,r).emulateTransitionEnd(150):r()}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,a.offset.setOffset(e[0],a.extend({using:function(a){e.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),e.addClass("in");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),/bottom|top/.test(c)){var l=0;b.left<0&&(l=-2*b.left,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}else this.replaceArrow(k-g,k,"top");d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);{var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})}},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:c-h-this.$element.height()}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery);
/*JS Lint helpers: */
/*global dragMove: false, dragEnd: false, $, jQuery, alert, window, document */
/*jslint nomen: true, continue:true */

if (typeof Object.create !== "function") {
    Object.create = function (obj) {
        function F() {}
        F.prototype = obj;
        return new F();
    };
}
(function ($, window, document) {

    var Carousel = {
        init : function (options, el) {
            var base = this;

            base.$elem = $(el);
            base.options = $.extend({}, $.fn.owlCarousel.options, base.$elem.data(), options);

            base.userOptions = options;
            base.loadContent();
        },

        loadContent : function () {
            var base = this, url;

            function getData(data) {
                var i, content = "";
                if (typeof base.options.jsonSuccess === "function") {
                    base.options.jsonSuccess.apply(this, [data]);
                } else {
                    for (i in data.owl) {
                        if (data.owl.hasOwnProperty(i)) {
                            content += data.owl[i].item;
                        }
                    }
                    base.$elem.html(content);
                }
                base.logIn();
            }

            if (typeof base.options.beforeInit === "function") {
                base.options.beforeInit.apply(this, [base.$elem]);
            }

            if (typeof base.options.jsonPath === "string") {
                url = base.options.jsonPath;
                $.getJSON(url, getData);
            } else {
                base.logIn();
            }
        },

        logIn : function () {
            var base = this;

            base.$elem.data("owl-originalStyles", base.$elem.attr("style"))
                      .data("owl-originalClasses", base.$elem.attr("class"));

            base.$elem.css({opacity: 0});
            base.orignalItems = base.options.items;
            base.checkBrowser();
            base.wrapperWidth = 0;
            base.checkVisible = null;
            base.setVars();
        },

        setVars : function () {
            var base = this;
            if (base.$elem.children().length === 0) {return false; }
            base.baseClass();
            base.eventTypes();
            base.$userItems = base.$elem.children();
            base.itemsAmount = base.$userItems.length;
            base.wrapItems();
            base.$owlItems = base.$elem.find(".owl-item");
            base.$owlWrapper = base.$elem.find(".owl-wrapper");
            base.playDirection = "next";
            base.prevItem = 0;
            base.prevArr = [0];
            base.currentItem = 0;
            base.customEvents();
            base.onStartup();
        },

        onStartup : function () {
            var base = this;
            base.updateItems();
            base.calculateAll();
            base.buildControls();
            base.updateControls();
            base.response();
            base.moveEvents();
            base.stopOnHover();
            base.owlStatus();

            if (base.options.transitionStyle !== false) {
                base.transitionTypes(base.options.transitionStyle);
            }
            if (base.options.autoPlay === true) {
                base.options.autoPlay = 5000;
            }
            base.play();

            base.$elem.find(".owl-wrapper").css("display", "block");

            if (!base.$elem.is(":visible")) {
                base.watchVisibility();
            } else {
                base.$elem.css("opacity", 1);
            }
            base.onstartup = false;
            base.eachMoveUpdate();
            if (typeof base.options.afterInit === "function") {
                base.options.afterInit.apply(this, [base.$elem]);
            }
        },

        eachMoveUpdate : function () {
            var base = this;

            if (base.options.lazyLoad === true) {
                base.lazyLoad();
            }
            if (base.options.autoHeight === true) {
                base.autoHeight();
            }
            base.onVisibleItems();

            if (typeof base.options.afterAction === "function") {
                base.options.afterAction.apply(this, [base.$elem]);
            }
        },

        updateVars : function () {
            var base = this;
            if (typeof base.options.beforeUpdate === "function") {
                base.options.beforeUpdate.apply(this, [base.$elem]);
            }
            base.watchVisibility();
            base.updateItems();
            base.calculateAll();
            base.updatePosition();
            base.updateControls();
            base.eachMoveUpdate();
            if (typeof base.options.afterUpdate === "function") {
                base.options.afterUpdate.apply(this, [base.$elem]);
            }
        },

        reload : function () {
            var base = this;
            window.setTimeout(function () {
                base.updateVars();
            }, 0);
        },

        watchVisibility : function () {
            var base = this;

            if (base.$elem.is(":visible") === false) {
                base.$elem.css({opacity: 0});
                window.clearInterval(base.autoPlayInterval);
                window.clearInterval(base.checkVisible);
            } else {
                return false;
            }
            base.checkVisible = window.setInterval(function () {
                if (base.$elem.is(":visible")) {
                    base.reload();
                    base.$elem.animate({opacity: 1}, 200);
                    window.clearInterval(base.checkVisible);
                }
            }, 500);
        },

        wrapItems : function () {
            var base = this;
            base.$userItems.wrapAll("<div class=\"owl-wrapper\">").wrap("<div class=\"owl-item\"></div>");
            base.$elem.find(".owl-wrapper").wrap("<div class=\"owl-wrapper-outer\">");
            base.wrapperOuter = base.$elem.find(".owl-wrapper-outer");
            base.$elem.css("display", "block");
        },

        baseClass : function () {
            var base = this,
                hasBaseClass = base.$elem.hasClass(base.options.baseClass),
                hasThemeClass = base.$elem.hasClass(base.options.theme);

            if (!hasBaseClass) {
                base.$elem.addClass(base.options.baseClass);
            }

            if (!hasThemeClass) {
                base.$elem.addClass(base.options.theme);
            }
        },

        updateItems : function () {
            var base = this, width, i;

            if (base.options.responsive === false) {
                return false;
            }
            if (base.options.singleItem === true) {
                base.options.items = base.orignalItems = 1;
                base.options.itemsCustom = false;
                base.options.itemsDesktop = false;
                base.options.itemsDesktopSmall = false;
                base.options.itemsTablet = false;
                base.options.itemsTabletSmall = false;
                base.options.itemsMobile = false;
                return false;
            }

            width = $(base.options.responsiveBaseWidth).width();

            if (width > (base.options.itemsDesktop[0] || base.orignalItems)) {
                base.options.items = base.orignalItems;
            }
            if (base.options.itemsCustom !== false) {
                //Reorder array by screen size
                base.options.itemsCustom.sort(function (a, b) {return a[0] - b[0]; });

                for (i = 0; i < base.options.itemsCustom.length; i += 1) {
                    if (base.options.itemsCustom[i][0] <= width) {
                        base.options.items = base.options.itemsCustom[i][1];
                    }
                }

            } else {

                if (width <= base.options.itemsDesktop[0] && base.options.itemsDesktop !== false) {
                    base.options.items = base.options.itemsDesktop[1];
                }

                if (width <= base.options.itemsDesktopSmall[0] && base.options.itemsDesktopSmall !== false) {
                    base.options.items = base.options.itemsDesktopSmall[1];
                }

                if (width <= base.options.itemsTablet[0] && base.options.itemsTablet !== false) {
                    base.options.items = base.options.itemsTablet[1];
                }

                if (width <= base.options.itemsTabletSmall[0] && base.options.itemsTabletSmall !== false) {
                    base.options.items = base.options.itemsTabletSmall[1];
                }

                if (width <= base.options.itemsMobile[0] && base.options.itemsMobile !== false) {
                    base.options.items = base.options.itemsMobile[1];
                }
            }

            //if number of items is less than declared
            if (base.options.items > base.itemsAmount && base.options.itemsScaleUp === true) {
                base.options.items = base.itemsAmount;
            }
        },

        response : function () {
            var base = this,
                smallDelay,
                lastWindowWidth;

            if (base.options.responsive !== true) {
                return false;
            }
            lastWindowWidth = $(window).width();

            base.resizer = function () {
                if ($(window).width() !== lastWindowWidth) {
                    if (base.options.autoPlay !== false) {
                        window.clearInterval(base.autoPlayInterval);
                    }
                    window.clearTimeout(smallDelay);
                    smallDelay = window.setTimeout(function () {
                        lastWindowWidth = $(window).width();
                        base.updateVars();
                    }, base.options.responsiveRefreshRate);
                }
            };
            $(window).resize(base.resizer);
        },

        updatePosition : function () {
            var base = this;
            base.jumpTo(base.currentItem);
            if (base.options.autoPlay !== false) {
                base.checkAp();
            }
        },

        appendItemsSizes : function () {
            var base = this,
                roundPages = 0,
                lastItem = base.itemsAmount - base.options.items;

            base.$owlItems.each(function (index) {
                var $this = $(this);
                $this
                    .css({"width": base.itemWidth})
                    .data("owl-item", Number(index));

                if (index % base.options.items === 0 || index === lastItem) {
                    if (!(index > lastItem)) {
                        roundPages += 1;
                    }
                }
                $this.data("owl-roundPages", roundPages);
            });
        },

        appendWrapperSizes : function () {
            var base = this,
                width = base.$owlItems.length * base.itemWidth;

            base.$owlWrapper.css({
                "width": width * 2,
                "left": 0
            });
            base.appendItemsSizes();
        },

        calculateAll : function () {
            var base = this;
            base.calculateWidth();
            base.appendWrapperSizes();
            base.loops();
            base.max();
        },

        calculateWidth : function () {
            var base = this;
            base.itemWidth = Math.round(base.$elem.width() / base.options.items);
        },

        max : function () {
            var base = this,
                maximum = ((base.itemsAmount * base.itemWidth) - base.options.items * base.itemWidth) * -1;
            if (base.options.items > base.itemsAmount) {
                base.maximumItem = 0;
                maximum = 0;
                base.maximumPixels = 0;
            } else {
                base.maximumItem = base.itemsAmount - base.options.items;
                base.maximumPixels = maximum;
            }
            return maximum;
        },

        min : function () {
            return 0;
        },

        loops : function () {
            var base = this,
                prev = 0,
                elWidth = 0,
                i,
                item,
                roundPageNum;

            base.positionsInArray = [0];
            base.pagesInArray = [];

            for (i = 0; i < base.itemsAmount; i += 1) {
                elWidth += base.itemWidth;
                base.positionsInArray.push(-elWidth);

                if (base.options.scrollPerPage === true) {
                    item = $(base.$owlItems[i]);
                    roundPageNum = item.data("owl-roundPages");
                    if (roundPageNum !== prev) {
                        base.pagesInArray[prev] = base.positionsInArray[i];
                        prev = roundPageNum;
                    }
                }
            }
        },

        buildControls : function () {
            var base = this;
            if (base.options.navigation === true || base.options.pagination === true) {
                base.owlControls = $("<div class=\"owl-controls\"/>").toggleClass("clickable", !base.browser.isTouch).appendTo(base.$elem);
                //Unbind click at s, m view - Nikon RWD
                $("<div class=\"nav-transparent\"/>").appendTo(base.owlControls);
            }
            if (base.options.pagination === true) {
                base.buildPagination();
            }
            if (base.options.navigation === true) {
                base.buildButtons();
            }
        },

        buildButtons : function () {
            var base = this,
                buttonsWrapper = $("<div class=\"owl-buttons\"/>");
            base.owlControls.append(buttonsWrapper);

            base.buttonPrev = $("<div/>", {
                "class" : "owl-prev",
                "html" : base.options.navigationText[0] || ""
            });

            base.buttonNext = $("<div/>", {
                "class" : "owl-next",
                "html" : base.options.navigationText[1] || ""
            });

            buttonsWrapper
                .append(base.buttonPrev)
                .append(base.buttonNext);

            buttonsWrapper.on("touchstart.owlControls mousedown.owlControls", "div[class^=\"owl\"]", function (event) {
                event.preventDefault();
            });

            buttonsWrapper.on("touchend.owlControls mouseup.owlControls", "div[class^=\"owl\"]", function (event) {
                event.preventDefault();
                if ($(this).hasClass("owl-next")) {
                    base.next();
                } else {
                    base.prev();
                }
            });
        },

        buildPagination : function () {
            var base = this;

            base.paginationWrapper = $("<div class=\"owl-pagination\"/>");
            base.owlControls.append(base.paginationWrapper);

            base.paginationWrapper.on("touchend.owlControls mouseup.owlControls", ".owl-page", function (event) {
                event.preventDefault();
                if (Number($(this).data("owl-page")) !== base.currentItem) {
                    base.goTo(Number($(this).data("owl-page")), true);
                }
            });
        },

        updatePagination : function () {
            var base = this,
                counter,
                lastPage,
                lastItem,
                i,
                paginationButton,
                paginationButtonInner;

            if (base.options.pagination === false) {
                return false;
            }

            base.paginationWrapper.html("");

            counter = 0;
            lastPage = base.itemsAmount - base.itemsAmount % base.options.items;

            for (i = 0; i < base.itemsAmount; i += 1) {
                if (i % base.options.items === 0) {
                    counter += 1;
                    if (lastPage === i) {
                        lastItem = base.itemsAmount - base.options.items;
                    }
                    paginationButton = $("<div/>", {
                        "class" : "owl-page"
                    });
                    paginationButtonInner = $("<span></span>", {
                        "text": base.options.paginationNumbers === true ? counter : "",
                        "class": base.options.paginationNumbers === true ? "owl-numbers" : ""
                    });
                    paginationButton.append(paginationButtonInner);

                    paginationButton.data("owl-page", lastPage === i ? lastItem : i);
                    paginationButton.data("owl-roundPages", counter);

                    base.paginationWrapper.append(paginationButton);
                }
            }
            base.checkPagination();
        },
        checkPagination : function () {
            var base = this;
            if (base.options.pagination === false) {
                return false;
            }
            base.paginationWrapper.find(".owl-page").each(function () {
                if ($(this).data("owl-roundPages") === $(base.$owlItems[base.currentItem]).data("owl-roundPages")) {
                    base.paginationWrapper
                        .find(".owl-page")
                        .removeClass("active");
                    $(this).addClass("active");
                }
            });
        },

        checkNavigation : function () {
            var base = this;

            if (base.options.navigation === false) {
                return false;
            }
            if (base.options.rewindNav === false) {
                if (base.currentItem === 0 && base.maximumItem === 0) {
                    base.buttonPrev.addClass("disabled");
                    base.buttonNext.addClass("disabled");
                } else if (base.currentItem === 0 && base.maximumItem !== 0) {
                    base.buttonPrev.addClass("disabled");
                    base.buttonNext.removeClass("disabled");
                } else if (base.currentItem === base.maximumItem) {
                    base.buttonPrev.removeClass("disabled");
                    base.buttonNext.addClass("disabled");
                } else if (base.currentItem !== 0 && base.currentItem !== base.maximumItem) {
                    base.buttonPrev.removeClass("disabled");
                    base.buttonNext.removeClass("disabled");
                }
            }
        },

        updateControls : function () {
            var base = this;
            base.updatePagination();
            base.checkNavigation();
            if (base.owlControls) {
                if (base.options.items >= base.itemsAmount) {
                    base.owlControls.hide();
                } else {
                    base.owlControls.show();
                }
            }
        },

        destroyControls : function () {
            var base = this;
            if (base.owlControls) {
                base.owlControls.remove();
            }
        },

        next : function (speed) {
            var base = this;

            if (base.isTransition) {
                return false;
            }

            base.currentItem += base.options.scrollPerPage === true ? base.options.items : 1;
            if (base.currentItem > base.maximumItem + (base.options.scrollPerPage === true ? (base.options.items - 1) : 0)) {
                if (base.options.rewindNav === true) {
                    base.currentItem = 0;
                    speed = "rewind";
                } else {
                    base.currentItem = base.maximumItem;
                    return false;
                }
            }
            base.goTo(base.currentItem, speed);
        },

        prev : function (speed) {
            var base = this;

            if (base.isTransition) {
                return false;
            }

            if (base.options.scrollPerPage === true && base.currentItem > 0 && base.currentItem < base.options.items) {
                base.currentItem = 0;
            } else {
                base.currentItem -= base.options.scrollPerPage === true ? base.options.items : 1;
            }
            if (base.currentItem < 0) {
                if (base.options.rewindNav === true) {
                    base.currentItem = base.maximumItem;
                    speed = "rewind";
                } else {
                    base.currentItem = 0;
                    return false;
                }
            }
            base.goTo(base.currentItem, speed);
        },

        goTo : function (position, speed, drag) {
            var base = this,
                goToPixel;

            if (base.isTransition) {
                return false;
            }
            if (typeof base.options.beforeMove === "function") {
                base.options.beforeMove.apply(this, [base.$elem]);
            }
            if (position >= base.maximumItem) {
                position = base.maximumItem;
            } else if (position <= 0) {
                position = 0;
            }

            base.currentItem = base.owl.currentItem = position;
            if (base.options.transitionStyle !== false && drag !== "drag" && base.options.items === 1 && base.browser.support3d === true) {
                base.swapSpeed(0);
                if (base.browser.support3d === true) {
                    base.transition3d(base.positionsInArray[position]);
                } else {
                    base.css2slide(base.positionsInArray[position], 1);
                }
                base.afterGo();
                base.singleItemTransition();
                return false;
            }
            goToPixel = base.positionsInArray[position];

            if (base.browser.support3d === true) {
                base.isCss3Finish = false;

                if (speed === true) {
                    base.swapSpeed("paginationSpeed");
                    window.setTimeout(function () {
                        base.isCss3Finish = true;
                    }, base.options.paginationSpeed);

                } else if (speed === "rewind") {
                    base.swapSpeed(base.options.rewindSpeed);
                    window.setTimeout(function () {
                        base.isCss3Finish = true;
                    }, base.options.rewindSpeed);

                } else {
                    base.swapSpeed("slideSpeed");
                    window.setTimeout(function () {
                        base.isCss3Finish = true;
                    }, base.options.slideSpeed);
                }
                base.transition3d(goToPixel);
            } else {
                if (speed === true) {
                    base.css2slide(goToPixel, base.options.paginationSpeed);
                } else if (speed === "rewind") {
                    base.css2slide(goToPixel, base.options.rewindSpeed);
                } else {
                    base.css2slide(goToPixel, base.options.slideSpeed);
                }
            }
            base.afterGo();
        },

        jumpTo : function (position) {
            var base = this;
            if (typeof base.options.beforeMove === "function") {
                base.options.beforeMove.apply(this, [base.$elem]);
            }
            if (position >= base.maximumItem || position === -1) {
                position = base.maximumItem;
            } else if (position <= 0) {
                position = 0;
            }
            base.swapSpeed(0);
            if (base.browser.support3d === true) {
                base.transition3d(base.positionsInArray[position]);
            } else {
                base.css2slide(base.positionsInArray[position], 1);
            }
            base.currentItem = base.owl.currentItem = position;
            base.afterGo();
        },

        afterGo : function () {
            var base = this;

            base.prevArr.push(base.currentItem);
            base.prevItem = base.owl.prevItem = base.prevArr[base.prevArr.length - 2];
            base.prevArr.shift(0);

            if (base.prevItem !== base.currentItem) {
                base.checkPagination();
                base.checkNavigation();
                base.eachMoveUpdate();

                if (base.options.autoPlay !== false) {
                    base.checkAp();
                }
            }
            if (typeof base.options.afterMove === "function" && base.prevItem !== base.currentItem) {
                base.options.afterMove.apply(this, [base.$elem]);
            }
        },

        stop : function () {
            var base = this;
            base.apStatus = "stop";
            window.clearInterval(base.autoPlayInterval);
        },

        checkAp : function () {
            var base = this;
            if (base.apStatus !== "stop") {
                base.play();
            }
        },

        play : function () {
            var base = this;
            base.apStatus = "play";
            if (base.options.autoPlay === false) {
                return false;
            }
            window.clearInterval(base.autoPlayInterval);
            base.autoPlayInterval = window.setInterval(function () {
                base.next(true);
            }, base.options.autoPlay);
        },

        swapSpeed : function (action) {
            var base = this;
            if (action === "slideSpeed") {
                base.$owlWrapper.css(base.addCssSpeed(base.options.slideSpeed));
            } else if (action === "paginationSpeed") {
                base.$owlWrapper.css(base.addCssSpeed(base.options.paginationSpeed));
            } else if (typeof action !== "string") {
                base.$owlWrapper.css(base.addCssSpeed(action));
            }
        },

        addCssSpeed : function (speed) {
            return {
                "-webkit-transition": "all " + speed + "ms ease",
                "-moz-transition": "all " + speed + "ms ease",
                "-o-transition": "all " + speed + "ms ease",
                "transition": "all " + speed + "ms ease"
            };
        },

        removeTransition : function () {
            return {
                "-webkit-transition": "",
                "-moz-transition": "",
                "-o-transition": "",
                "transition": ""
            };
        },

        doTranslate : function (pixels) {
            return {
                "-webkit-transform": "translate3d(" + pixels + "px, 0px, 0px)",
                "-moz-transform": "translate3d(" + pixels + "px, 0px, 0px)",
                "-o-transform": "translate3d(" + pixels + "px, 0px, 0px)",
                "-ms-transform": "translate3d(" + pixels + "px, 0px, 0px)",
                "transform": "translate3d(" + pixels + "px, 0px,0px)"
            };
        },

        transition3d : function (value) {
            var base = this;
            base.$owlWrapper.css(base.doTranslate(value));
        },

        css2move : function (value) {
            var base = this;
            base.$owlWrapper.css({"left" : value});
        },

        css2slide : function (value, speed) {
            var base = this;

            base.isCssFinish = false;
            base.$owlWrapper.stop(true, true).animate({
                "left" : value
            }, {
                duration : speed || base.options.slideSpeed,
                complete : function () {
                    base.isCssFinish = true;
                }
            });
        },

        checkBrowser : function () {
            var base = this,
                translate3D = "translate3d(0px, 0px, 0px)",
                tempElem = document.createElement("div"),
                regex,
                asSupport,
                support3d,
                isTouch;

            tempElem.style.cssText = "  -moz-transform:" + translate3D +
                                  "; -ms-transform:"     + translate3D +
                                  "; -o-transform:"      + translate3D +
                                  "; -webkit-transform:" + translate3D +
                                  "; transform:"         + translate3D;
            regex = /translate3d\(0px, 0px, 0px\)/g;
            asSupport = tempElem.style.cssText.match(regex);
            //support3d = (asSupport !== null && asSupport.length === 1);
            support3d = (asSupport !== null && asSupport.length >= 1); //Nikon RWD: fix owl carousel flickering at chrome 36
            if($('html.lt-ie9').length) { //Ie8 not support 3d
                support3d = false;
            }
            isTouch = "ontouchstart" in window || window.navigator.msMaxTouchPoints;

            base.browser = {
                "support3d" : support3d,
                "isTouch" : isTouch
            };
        },

        moveEvents : function () {
            var base = this;
            if (base.options.mouseDrag !== false || base.options.touchDrag !== false) {
                base.gestures();
                base.disabledEvents();
            }
        },

        eventTypes : function () {
            var base = this,
                types = ["s", "e", "x"];

            base.ev_types = {};

            if (base.options.mouseDrag === true && base.options.touchDrag === true) {
                types = [
                    "touchstart.owl mousedown.owl",
                    "touchmove.owl mousemove.owl",
                    "touchend.owl touchcancel.owl mouseup.owl"
                ];
            } else if (base.options.mouseDrag === false && base.options.touchDrag === true) {
                types = [
                    "touchstart.owl",
                    "touchmove.owl",
                    "touchend.owl touchcancel.owl"
                ];
            } else if (base.options.mouseDrag === true && base.options.touchDrag === false) {
                types = [
                    "mousedown.owl",
                    "mousemove.owl",
                    "mouseup.owl"
                ];
            }

            base.ev_types.start = types[0];
            base.ev_types.move = types[1];
            base.ev_types.end = types[2];
        },

        disabledEvents :  function () {
            var base = this;
            base.$elem.on("dragstart.owl", function (event) { event.preventDefault(); });
            base.$elem.on("mousedown.disableTextSelect", function (e) {
                return $(e.target).is('input, textarea, select, option');
            });
        },

        gestures : function () {
            /*jslint unparam: true*/
            var base = this,
                locals = {
                    offsetX : 0,
                    offsetY : 0,
                    baseElWidth : 0,
                    relativePos : 0,
                    position: null,
                    minSwipe : null,
                    maxSwipe: null,
                    sliding : null,
                    dargging: null,
                    targetElement : null
                };

            base.isCssFinish = true;

            function getTouches(event) {
                if (event.touches !== undefined) {
                    return {
                        x : event.touches[0].pageX,
                        y : event.touches[0].pageY
                    };
                }

                if (event.touches === undefined) {
                    if (event.pageX !== undefined) {
                        return {
                            x : event.pageX,
                            y : event.pageY
                        };
                    }
                    if (event.pageX === undefined) {
                        return {
                            x : event.clientX,
                            y : event.clientY
                        };
                    }
                }
            }

            function swapEvents(type) {
                if (type === "on") {
                    $(document).on(base.ev_types.move, dragMove);
                    $(document).on(base.ev_types.end, dragEnd);
                } else if (type === "off") {
                    $(document).off(base.ev_types.move);
                    $(document).off(base.ev_types.end);
                }
            }

            function dragStart(event) {
                var ev = event.originalEvent || event || window.event,
                    position;

                if (ev.which === 3) {
                    return false;
                }
                if (base.itemsAmount <= base.options.items) {
                    return;
                }
                if (base.isCssFinish === false && !base.options.dragBeforeAnimFinish) {
                    return false;
                }
                if (base.isCss3Finish === false && !base.options.dragBeforeAnimFinish) {
                    return false;
                }

                if (base.options.autoPlay !== false) {
                    window.clearInterval(base.autoPlayInterval);
                }

                if (base.browser.isTouch !== true && !base.$owlWrapper.hasClass("grabbing")) {
                    base.$owlWrapper.addClass("grabbing");
                }

                base.newPosX = 0;
                base.newRelativeX = 0;

                $(this).css(base.removeTransition());

                position = $(this).position();
                locals.relativePos = position.left;

                locals.offsetX = getTouches(ev).x - position.left;
                locals.offsetY = getTouches(ev).y - position.top;

                swapEvents("on");

                locals.sliding = false;
                locals.targetElement = ev.target || ev.srcElement;
            }

            function dragMove(event) {
                var ev = event.originalEvent || event || window.event,
                    minSwipe,
                    maxSwipe;

                base.newPosX = getTouches(ev).x - locals.offsetX;
                base.newPosY = getTouches(ev).y - locals.offsetY;
                base.newRelativeX = base.newPosX - locals.relativePos;

                if (typeof base.options.startDragging === "function" && locals.dragging !== true && base.newRelativeX !== 0) {
                    locals.dragging = true;
                    base.options.startDragging.apply(base, [base.$elem]);
                }

                if ((base.newRelativeX > 8 || base.newRelativeX < -8) && (base.browser.isTouch === true)) {
                    if (ev.preventDefault !== undefined) {
                        ev.preventDefault();
                    } else {
                        ev.returnValue = false;
                    }
                    locals.sliding = true;
                }

                if ((base.newPosY > 10 || base.newPosY < -10) && locals.sliding === false) {
                    $(document).off("touchmove.owl");
                }

                minSwipe = function () {
                    return base.newRelativeX / 5;
                };

                maxSwipe = function () {
                    return base.maximumPixels + base.newRelativeX / 5;
                };

                base.newPosX = Math.max(Math.min(base.newPosX, minSwipe()), maxSwipe());
                if (base.browser.support3d === true) {
                    base.transition3d(base.newPosX);
                } else {
                    base.css2move(base.newPosX);
                }
            }

            function dragEnd(event) {
                var ev = event.originalEvent || event || window.event,
                    newPosition,
                    handlers,
                    owlStopEvent;

                ev.target = ev.target || ev.srcElement;

                locals.dragging = false;

                if (base.browser.isTouch !== true) {
                    base.$owlWrapper.removeClass("grabbing");
                }

                if (base.newRelativeX < 0) {
                    base.dragDirection = base.owl.dragDirection = "left";
                } else {
                    base.dragDirection = base.owl.dragDirection = "right";
                }

                if (base.newRelativeX !== 0) {
                    newPosition = base.getNewPosition();
                    base.goTo(newPosition, false, "drag");
                    if (locals.targetElement === ev.target && base.browser.isTouch !== true) {
                        $(ev.target).on("click.disable", function (ev) {
                            ev.stopImmediatePropagation();
                            ev.stopPropagation();
                            ev.preventDefault();
                            $(ev.target).off("click.disable");
                        });
                        handlers = $._data(ev.target, "events").click;
                        owlStopEvent = handlers.pop();
                        handlers.splice(0, 0, owlStopEvent);
                    }
                }
                swapEvents("off");
            }
            base.$elem.on(base.ev_types.start, ".owl-wrapper", dragStart);
        },

        getNewPosition : function () {
            var base = this,
                newPosition = base.closestItem();

            if (newPosition > base.maximumItem) {
                base.currentItem = base.maximumItem;
                newPosition  = base.maximumItem;
            } else if (base.newPosX >= 0) {
                newPosition = 0;
                base.currentItem = 0;
            }
            return newPosition;
        },
        closestItem : function () {
            var base = this,
                array = base.options.scrollPerPage === true ? base.pagesInArray : base.positionsInArray,
                goal = base.newPosX,
                closest = null;

            $.each(array, function (i, v) {
                if (goal - (base.itemWidth / 20) > array[i + 1] && goal - (base.itemWidth / 20) < v && base.moveDirection() === "left") {
                    closest = v;
                    if (base.options.scrollPerPage === true) {
                        base.currentItem = $.inArray(closest, base.positionsInArray);
                    } else {
                        base.currentItem = i;
                    }
                } else if (goal + (base.itemWidth / 20) < v && goal + (base.itemWidth / 20) > (array[i + 1] || array[i] - base.itemWidth) && base.moveDirection() === "right") {
                    if (base.options.scrollPerPage === true) {
                        closest = array[i + 1] || array[array.length - 1];
                        base.currentItem = $.inArray(closest, base.positionsInArray);
                    } else {
                        closest = array[i + 1];
                        base.currentItem = i + 1;
                    }
                }
            });
            return base.currentItem;
        },

        moveDirection : function () {
            var base = this,
                direction;
            if (base.newRelativeX < 0) {
                direction = "right";
                base.playDirection = "next";
            } else {
                direction = "left";
                base.playDirection = "prev";
            }
            return direction;
        },

        customEvents : function () {
            /*jslint unparam: true*/
            var base = this;
            base.$elem.on("owl.next", function () {
                base.next();
            });
            base.$elem.on("owl.prev", function () {
                base.prev();
            });
            base.$elem.on("owl.play", function (event, speed) {
                base.options.autoPlay = speed;
                base.play();
                base.hoverStatus = "play";
            });
            base.$elem.on("owl.stop", function () {
                base.stop();
                base.hoverStatus = "stop";
            });
            base.$elem.on("owl.goTo", function (event, item) {
                base.goTo(item);
            });
            base.$elem.on("owl.jumpTo", function (event, item) {
                base.jumpTo(item);
            });
        },

        stopOnHover : function () {
            var base = this;
            if (base.options.stopOnHover === true && base.browser.isTouch !== true && base.options.autoPlay !== false) {
                base.$elem.on("mouseover", function () {
                    base.stop();
                });
                base.$elem.on("mouseout", function () {
                    if (base.hoverStatus !== "stop") {
                        base.play();
                    }
                });
            }
        },

        lazyLoad : function () {
            var base = this,
                i,
                $item,
                itemNumber,
                $lazyImg,
                follow;
            if (base.options.lazyLoad === false) {
                return false;
            }
            for (i = 0; i < base.itemsAmount; i += 1) {
                $item = $(base.$owlItems[i]);

                if ($item.data("owl-loaded") === "loaded") {
                    continue;
                }

                itemNumber = $item.data("owl-item");
                $lazyImg = $item.find(".lazyOwl");

                if (typeof $lazyImg.data("src") !== "string") {
                    $item.data("owl-loaded", "loaded");
                    continue;
                }
                if ($item.data("owl-loaded") === undefined) {
                    //$lazyImg.hide(); --> Edit for nikon rwd.
                    $item.addClass("loading").data("owl-loaded", "checked");
                }
                if (base.options.lazyFollow === true) {
                    follow = itemNumber >= base.currentItem;
                } else {
                    follow = true;
                }
                if (follow && itemNumber < base.currentItem + base.options.items && $lazyImg.length) {
                    if($lazyImg.is(':visible')) { //Don't load hidden image - Nikon RWD
                        base.lazyPreload($item, $lazyImg);
                    }
                }
            }
        },

        lazyPreload : function ($item, $lazyImg) {
            var base = this,
                iterations = 0,
                isBackgroundImg;

            if ($lazyImg.prop("tagName") === "DIV") {
                $lazyImg.css("background-image", "url(" + $lazyImg.data("src") + ")");
                isBackgroundImg = true;
            } else {
                $lazyImg[0].src = $lazyImg.data("src");
            }

            function showImage() {
                $item.data("owl-loaded", "loaded").removeClass("loading");
                $lazyImg.removeAttr("data-src");
                if (base.options.lazyEffect === "fade") {
                    $lazyImg.fadeIn(400);
                } else {
                    $lazyImg.show();
                }
                if (typeof base.options.afterLazyLoad === "function") {
                    base.options.afterLazyLoad.apply(this, [base.$elem]);
                }
            }

            function checkLazyImage() {
                iterations += 1;
                if (base.completeImg($lazyImg.get(0)) || isBackgroundImg === true) {
                    showImage();
                } else if (iterations <= 100) {//if image loads in less than 10 seconds 
                    window.setTimeout(checkLazyImage, 100);
                } else {
                    showImage();
                }
            }

            checkLazyImage();
        },

        autoHeight : function () {
            var base = this,
                $currentimg = $(base.$owlItems[base.currentItem]).find("img"),
                iterations;

            function addHeight() {
                var $currentItem = $(base.$owlItems[base.currentItem]).height();
                base.wrapperOuter.css("height", $currentItem + "px");
                if (!base.wrapperOuter.hasClass("autoHeight")) {
                    window.setTimeout(function () {
                        base.wrapperOuter.addClass("autoHeight");
                    }, 0);
                }
            }

            function checkImage() {
                iterations += 1;
                if (base.completeImg($currentimg.get(0))) {
                    addHeight();
                } else if (iterations <= 100) { //if image loads in less than 10 seconds 
                    window.setTimeout(checkImage, 100);
                } else {
                    base.wrapperOuter.css("height", ""); //Else remove height attribute
                }
            }

            if ($currentimg.get(0) !== undefined) {
                iterations = 0;
                checkImage();
            } else {
                addHeight();
            }
        },

        completeImg : function (img) {
            var naturalWidthType;

            if (!img.complete) {
                return false;
            }
            naturalWidthType = typeof img.naturalWidth;
            if (naturalWidthType !== "undefined" && img.naturalWidth === 0) {
                return false;
            }
            return true;
        },

        onVisibleItems : function () {
            var base = this,
                i;

            if (base.options.addClassActive === true) {
                base.$owlItems.removeClass("active");
            }
            base.visibleItems = [];
            for (i = base.currentItem; i < base.currentItem + base.options.items; i += 1) {
                base.visibleItems.push(i);

                if (base.options.addClassActive === true) {
                    $(base.$owlItems[i]).addClass("active");
                }
            }
            base.owl.visibleItems = base.visibleItems;
        },

        transitionTypes : function (className) {
            var base = this;
            //Currently available: "fade", "backSlide", "goDown", "fadeUp"
            base.outClass = "owl-" + className + "-out";
            base.inClass = "owl-" + className + "-in";
        },

        singleItemTransition : function () {
            var base = this,
                outClass = base.outClass,
                inClass = base.inClass,
                $currentItem = base.$owlItems.eq(base.currentItem),
                $prevItem = base.$owlItems.eq(base.prevItem),
                prevPos = Math.abs(base.positionsInArray[base.currentItem]) + base.positionsInArray[base.prevItem],
                origin = Math.abs(base.positionsInArray[base.currentItem]) + base.itemWidth / 2,
                animEnd = 'webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend';

            base.isTransition = true;

            base.$owlWrapper
                .addClass('owl-origin')
                .css({
                    "-webkit-transform-origin" : origin + "px",
                    "-moz-perspective-origin" : origin + "px",
                    "perspective-origin" : origin + "px"
                });
            function transStyles(prevPos) {
                return {
                    "position" : "relative",
                    "left" : prevPos + "px"
                };
            }

            $prevItem
                .css(transStyles(prevPos, 10))
                .addClass(outClass)
                .on(animEnd, function () {
                    base.endPrev = true;
                    $prevItem.off(animEnd);
                    base.clearTransStyle($prevItem, outClass);
                });

            $currentItem
                .addClass(inClass)
                .on(animEnd, function () {
                    base.endCurrent = true;
                    $currentItem.off(animEnd);
                    base.clearTransStyle($currentItem, inClass);
                });
        },

        clearTransStyle : function (item, classToRemove) {
            var base = this;
            item.css({
                "position" : "",
                "left" : ""
            }).removeClass(classToRemove);

            if (base.endPrev && base.endCurrent) {
                base.$owlWrapper.removeClass('owl-origin');
                base.endPrev = false;
                base.endCurrent = false;
                base.isTransition = false;
            }
        },

        owlStatus : function () {
            var base = this;
            base.owl = {
                "userOptions"   : base.userOptions,
                "baseElement"   : base.$elem,
                "userItems"     : base.$userItems,
                "owlItems"      : base.$owlItems,
                "currentItem"   : base.currentItem,
                "prevItem"      : base.prevItem,
                "visibleItems"  : base.visibleItems,
                "isTouch"       : base.browser.isTouch,
                "browser"       : base.browser,
                "dragDirection" : base.dragDirection
            };
        },

        clearEvents : function () {
            var base = this;
            base.$elem.off(".owl owl mousedown.disableTextSelect");
            $(document).off(".owl owl");
            $(window).off("resize", base.resizer);
        },

        unWrap : function () {
            var base = this;
            if (base.$elem.children().length !== 0) {
                base.$owlWrapper.unwrap();
                base.$userItems.unwrap().unwrap();
                if (base.owlControls) {
                    base.owlControls.remove();
                }
            }
            base.clearEvents();
            base.$elem
                .attr("style", base.$elem.data("owl-originalStyles") || "")
                .attr("class", base.$elem.data("owl-originalClasses"));
        },

        destroy : function () {
            var base = this;
            base.stop();
            window.clearInterval(base.checkVisible);
            base.unWrap();
            base.$elem.removeData();
        },

        reinit : function (newOptions) {
            var base = this,
                options = $.extend({}, base.userOptions, newOptions);
            base.unWrap();
            base.init(options, base.$elem);
        },

        addItem : function (htmlString, targetPosition) {
            var base = this,
                position;

            if (!htmlString) {return false; }

            if (base.$elem.children().length === 0) {
                base.$elem.append(htmlString);
                base.setVars();
                return false;
            }
            base.unWrap();
            if (targetPosition === undefined || targetPosition === -1) {
                position = -1;
            } else {
                position = targetPosition;
            }
            if (position >= base.$userItems.length || position === -1) {
                base.$userItems.eq(-1).after(htmlString);
            } else {
                base.$userItems.eq(position).before(htmlString);
            }

            base.setVars();
        },

        removeItem : function (targetPosition) {
            var base = this,
                position;

            if (base.$elem.children().length === 0) {
                return false;
            }
            if (targetPosition === undefined || targetPosition === -1) {
                position = -1;
            } else {
                position = targetPosition;
            }

            base.unWrap();
            base.$userItems.eq(position).remove();
            base.setVars();
        }

    };

    $.fn.owlCarousel = function (options) {
        return this.each(function () {
            if ($(this).data("owl-init") === true) {
                return false;
            }
            $(this).data("owl-init", true);
            var carousel = Object.create(Carousel);
            carousel.init(options, this);
            $.data(this, "owlCarousel", carousel);
        });
    };

    $.fn.owlCarousel.options = {

        items : 5,
        itemsCustom : false,
        itemsDesktop : [1199, 4],
        itemsDesktopSmall : [979, 3],
        itemsTablet : [768, 2],
        itemsTabletSmall : false,
        itemsMobile : [479, 1],
        singleItem : false,
        itemsScaleUp : false,

        slideSpeed : 200,
        paginationSpeed : 800,
        rewindSpeed : 1000,

        autoPlay : false,
        stopOnHover : false,

        navigation : false,
        navigationText : ["prev", "next"],
        rewindNav : true,
        scrollPerPage : false,

        pagination : true,
        paginationNumbers : false,

        responsive : true,
        responsiveRefreshRate : 200,
        responsiveBaseWidth : window,

        baseClass : "owl-carousel",
        theme : "owl-theme",

        lazyLoad : false,
        lazyFollow : true,
        lazyEffect : "fade",

        autoHeight : false,

        jsonPath : false,
        jsonSuccess : false,

        dragBeforeAnimFinish : true,
        mouseDrag : true,
        touchDrag : true,

        addClassActive : false,
        transitionStyle : false,

        beforeUpdate : false,
        afterUpdate : false,
        beforeInit : false,
        afterInit : false,
        beforeMove : false,
        afterMove : false,
        afterAction : false,
        startDragging : false,
        afterLazyLoad: false
    };
}(jQuery, window, document));
// Aliplayer - START
$(document).ready(function(){
	var players = $('.prism-player');
	
	if (players.length > 0){
		players.each(function(){
			var curPlayer = $(this);
			var id = curPlayer.attr('id');
			var previewImg = $(document).width() > 767 ? curPlayer.find('img.ban_b') : curPlayer.find('img.ban_s');
			var vid = curPlayer.data('video');
			var bigPlayBtnColor = curPlayer.attr('big-play-button-color');
			var bigPlayBtn;
			var player = new Aliplayer({
				"id": id,
				"source": "https://nics-files.oss-cn-shanghai.aliyuncs.com/videos/" + vid,
				"width": "auto",
				"height": "auto",
				"autoplay": false,
				"isLive": false,
				"rePlay": false,
				"playsinline": true,
				"isVBR": true,
				"preload": true,
				"controlBarVisibility": "always",
				"useH5Prism": true,
			}, function (player) {
			  // Hide control bar when initialized
			  $('#' + id + ' .prism-controlbar').hide();
			 
			  bigPlayBtn = curPlayer.find('.prism-big-play-btn');
			  
			  // Set big play button's color
			  setBigPlayBtnColor(bigPlayBtn, bigPlayBtnColor);
			});
			
			var controlBar = curPlayer.find('.prism-controlbar');
			var playBtn = curPlayer.find('.prism-play-btn');
			
			// Set position of big play button
			// Resize big play button based on window size
			setBigPlayBtn(bigPlayBtn);
			$(window).on('resize', function(){ setBigPlayBtn(bigPlayBtn); });

			bigPlayBtn.on('click', function(){
				hideBigPlayBtn(bigPlayBtn);
				
				// Hide video preview image when playing
				if(previewImg.css('visibility') !== 'hidden') previewImg.attr('style', 'visibility: hidden;');

				// Set control bar's visibility and remove big play button once it is clicked
				curPlayer.on('mouseover', function(){ controlBar.show(); });
				curPlayer.on('mouseleave', function(){ controlBar.hide(); });

				// Return to masthead image when video ends playing
				var interval = setInterval(function(){
					  if (player.getStatus() === 'ended'){
						  curPlayer.off('mouseover mouseleave');
						  controlBar.hide();
						  previewImg.attr('style', 'visibility: visible;');
						  showBigPlayBtn(bigPlayBtn, bigPlayBtnColor);
						  clearInterval(interval);
					  }
				  }, 1000);
			});
		});
	}

	// Pause other playing videos on the same page when the current is playing
	$('.prism-player .prism-big-play-btn').on('click', function () {
		pauseVideos($(this).attr('id'));
	});

	$('.prism-player .prism-play-btn').on('click', function () {
		pauseVideos($(this).parent().attr('id'));
	});
});

function setBigPlayBtnColor(bigPlayBtn, color){
	if (color === 'black'){
		bigPlayBtn.css({'background': 'url(/resources/rwd/images/ali_prism_player/bigplay_black.png) no-repeat', 'background-size': 'contain'});
		bigPlayBtn.find('.outter').css('border', '7px solid rgba(0,0,0,.51)');
	}
}

function setBigPlayBtn(bigPlayBtn){
	if($(document).width() > 767){
		bigPlayBtn.css({'left': '40px', 'bottom': '40px'});
		bigPlayBtn.css({'width': '80px', 'height': '80px'});
		bigPlayBtn.find('.outter').css({'width': '80px', 'height': '80px'});
	} else {
		bigPlayBtn.css({'left': '20px', 'bottom': '20px'});
		bigPlayBtn.css({'width': '60px', 'height': '60px'});
		bigPlayBtn.find('.outter').css({'width': '60px', 'height': '60px'});
	}
}

function hideBigPlayBtn(bigPlayBtn){
	bigPlayBtn.css('background', 'none');
	bigPlayBtn.find('.outter').css('border', 'none');
}

function showBigPlayBtn(bigPlayBtn, color){
	var bigPlayBtnImg = color === 'black' ? 'bigplay_black.png' : 'bigplay.png';
	var bigPlayBtnOutterColor = color === 'black' ? 'rgba(0,0,0,.51)' : 'rgba(255,255,255,.51)';
	
	bigPlayBtn.css({'background': 'url(/resources/rwd/images/ali_prism_player/' + bigPlayBtnImg + ') no-repeat', 'background-size': 'contain'});
	bigPlayBtn.find('.outter').css('border', '7px solid ' + bigPlayBtnOutterColor);
}

function pauseVideos(id) {
	var playerId = id.substring(0, id.indexOf('_'));

	$('.prism-player').each(function () {
		var curPlayerId = $(this).attr('id');
		var video = $(this).find('video');

		if (playerId !== curPlayerId) video.trigger('pause');
	});
}
// Aliplayer - END

//头部大BANNER
$(document).ready(function() {
    var autoplay_mh = $("#owl-banner").attr("autoplay-mh");
	
	if (autoplay_mh == "false"){
		autoplay_mh = false;
	}

    $("#owl-banner").owlCarousel({
        autoPlay: autoplay_mh,
        items: 1,
        itemsDesktop: [1000, 1],
        itemsDesktopSmall: [900, 1],
        itemsTablet: [600, 1],
        transitionStyle: "fade"
    });
	
	$("#owl-banner .owl-wrapper .owl-item").each(function(){
		if ($(this).find(".item-container").length > 0){
			$(this).find(".item-container").css("background-color", "#000");
		}
	});
});


//产品图标轮播
$(document).ready(function() {
    $('#owl-pt').owlCarousel({
        autoPlay: 5000,
        loop: true,
        margin: 10,
        responsiveClass: true,
        items: 6,
        itemsDesktop: [1000, 6], //5 items between 1000px and 901px
        itemsDesktopSmall: [900, 6], // betweem 900px and 601px
        itemsTablet: [600, 3], //2 items between 600 and 0
        itemsMobile: false // itemsMobile disabled - inherit from itemsTablet option
    });
});


//底部黄色圆形轮播
$(document).ready(function() {
  $('#owl-link').owlCarousel({
    autoPlay : 4000,
    loop: true,
    margin: 10,
    responsiveClass: true,
    items: 6,
    itemsDesktop : [1000,6], //5 items between 1000px and 901px
	itemsDesktopSmall : [900,6], // betweem 900px and 601px
	itemsTablet: [600,3], //2 items between 600 and 0
	itemsMobile : false // itemsMobile disabled - inherit from itemsTablet option
  });
});


//左BANNER
$(document).ready(function() {
    if ($('#owl-tb').find('a.item').length === 1){
        $('#owl-tb').owlCarousel({
            autoPlay: false,
            items: 1,
            itemsDesktop: [1000, 1],
            itemsDesktopSmall: [900, 1],
            itemsTablet: [600, 1]
        });
    } else {
        $('#owl-tb').owlCarousel({
            loop: true,
            autoPlay: 5000,
            items: 1,
            itemsDesktop: [1000, 1],
            itemsDesktopSmall: [900, 1],
            itemsTablet: [600, 1],
            transitionStyle: "fade"
        });
    }
});


//右BANNER
$(document).ready(function() {
    if ($('#owl-tbr').find('a.item').length === 1){
        $('#owl-tbr').owlCarousel({
            autoPlay: false,
            items: 1,
            itemsDesktop: [1000, 1],
            itemsDesktopSmall: [900, 1],
            itemsTablet: [600, 1]
        });
    } else {
        $('#owl-tbr').owlCarousel({
            loop: true,
            autoPlay: 5000,
            items: 1,
            itemsDesktop: [1000, 1],
            itemsDesktopSmall: [900, 1],
            itemsTablet: [600, 1],
            transitionStyle: "fade"
        });
    }
});


//活动右侧BANNER 单个
$(document).ready(function() {
    $('#owl-rone').owlCarousel({
        loop: true,
        autoPlay: 5000,
        margin: 10,
        responsiveClass: true,
        items: 1,
        itemsDesktop: [1000, 1], //5 items between 1000px and 901px
        itemsDesktopSmall: [900, 1], // betweem 900px and 601px
        itemsTablet: [600, 1], //2 items between 600 and 0
        itemsMobile: false // itemsMobile disabled - inherit from itemsTablet option
    });
});


//活动右侧BANNER 两个 移动端2
$(document).ready(function() {
    $('#owl-rban').owlCarousel({
        loop: true,
        margin: 10,
        responsiveClass: true,
        items: 2,
        itemsDesktop: [1000, 1], //5 items between 1000px and 901px
        itemsDesktopSmall: [900, 1], // betweem 900px and 601px
        itemsTablet: [600, 2], //2 items between 600 and 0
        itemsMobile: false // itemsMobile disabled - inherit from itemsTablet option
    })
})


//活动右侧BANNER 竖排
window.onload = function() {
    var swiper = new Swiper('.swiper-container', {
        slidesPerView: 2,
        direction: 'vertical',
        loop: true,
        // 如果需要分页器
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        autoplay: {
            delay: 3000,
            stopOnLastSlide: false,
            disableOnInteraction: false,
        },
    });
}
/*! echo-js v1.7.3 | (c) 2016 @toddmotto | https://github.com/toddmotto/echo */
!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){"use strict";var e,n,o,r,c,a={},u=function(){},d=function(t){return null===t.offsetParent},l=function(t,e){if(d(t))return!1;var n=t.getBoundingClientRect();return n.right>=e.l&&n.bottom>=e.t&&n.left<=e.r&&n.top<=e.b},i=function(){(r||!n)&&(clearTimeout(n),n=setTimeout(function(){a.render(),n=null},o))};return a.init=function(n){n=n||{};var d=n.offset||0,l=n.offsetVertical||d,f=n.offsetHorizontal||d,s=function(t,e){return parseInt(t||e,10)};e={t:s(n.offsetTop,l),b:s(n.offsetBottom,l),l:s(n.offsetLeft,f),r:s(n.offsetRight,f)},o=s(n.throttle,250),r=n.debounce!==!1,c=!!n.unload,u=n.callback||u,a.render(),document.addEventListener?(t.addEventListener("scroll",i,!1),t.addEventListener("load",i,!1)):(t.attachEvent("onscroll",i),t.attachEvent("onload",i))},a.render=function(n){for(var o,r,d=(n||document).querySelectorAll("[data-echo], [data-echo-background]"),i=d.length,f={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},s=0;i>s;s++)r=d[s],l(r,f)?(c&&r.setAttribute("data-echo-placeholder",r.src),null!==r.getAttribute("data-echo-background")?r.style.backgroundImage="url("+r.getAttribute("data-echo-background")+")":r.src!==(o=r.getAttribute("data-echo"))&&(r.src=o),c||(r.removeAttribute("data-echo"),r.removeAttribute("data-echo-background")),u(r,"load")):c&&(o=r.getAttribute("data-echo-placeholder"))&&(null!==r.getAttribute("data-echo-background")?r.style.backgroundImage="url("+o+")":r.src=o,r.removeAttribute("data-echo-placeholder"),u(r,"unload"));i||a.detach()},a.detach=function(){document.removeEventListener?t.removeEventListener("scroll",i):t.detachEvent("onscroll",i),clearTimeout(n)},a});
/*! Lazy Load 1.9.3 - MIT license - Copyright 2010-2013 Mika Tuupola */
!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Swiper=t()}(this,function(){"use strict";var f="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,J="undefined"==typeof window?{document:f,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,l=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function L(e,t){var a=[],i=0;if(e&&!t&&e instanceof l)return e;if(e)if("string"==typeof e){var s,r,n=e.trim();if(0<=n.indexOf("<")&&0<=n.indexOf(">")){var o="div";for(0===n.indexOf("<li")&&(o="ul"),0===n.indexOf("<tr")&&(o="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(o="tr"),0===n.indexOf("<tbody")&&(o="table"),0===n.indexOf("<option")&&(o="select"),(r=f.createElement(o)).innerHTML=n,i=0;i<r.childNodes.length;i+=1)a.push(r.childNodes[i])}else for(s=t||"#"!==e[0]||e.match(/[ .<>:~]/)?(t||f).querySelectorAll(e.trim()):[f.getElementById(e.trim().split("#")[1])],i=0;i<s.length;i+=1)s[i]&&a.push(s[i])}else if(e.nodeType||e===J||e===f)a.push(e);else if(0<e.length&&e[0].nodeType)for(i=0;i<e.length;i+=1)a.push(e[i]);return new l(a)}function r(e){for(var t=[],a=0;a<e.length;a+=1)-1===t.indexOf(e[a])&&t.push(e[a]);return t}L.fn=l.prototype,L.Class=l,L.Dom7=l;var t={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.add(t[a]);return this},removeClass:function(e){for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.remove(t[a]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.toggle(t[a]);return this},attr:function(e,t){var a=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var i=0;i<this.length;i+=1)if(2===a.length)this[i].setAttribute(e,t);else for(var s in e)this[i][s]=e[s],this[i].setAttribute(s,e[s]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var a;if(void 0!==t){for(var i=0;i<this.length;i+=1)(a=this[i]).dom7ElementDataStorage||(a.dom7ElementDataStorage={}),a.dom7ElementDataStorage[e]=t;return this}if(a=this[0]){if(a.dom7ElementDataStorage&&e in a.dom7ElementDataStorage)return a.dom7ElementDataStorage[e];var s=a.getAttribute("data-"+e);return s||void 0}},transform:function(e){for(var t=0;t<this.length;t+=1){var a=this[t].style;a.webkitTransform=e,a.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var a=this[t].style;a.webkitTransitionDuration=e,a.transitionDuration=e}return this},on:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];var i=t[0],r=t[1],n=t[2],s=t[3];function o(e){var t=e.target;if(t){var a=e.target.dom7EventData||[];if(a.indexOf(e)<0&&a.unshift(e),L(t).is(r))n.apply(t,a);else for(var i=L(t).parents(),s=0;s<i.length;s+=1)L(i[s]).is(r)&&n.apply(i[s],a)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),n.apply(this,t)}"function"==typeof t[1]&&(i=(e=t)[0],n=e[1],s=e[2],r=void 0),s||(s=!1);for(var d,p=i.split(" "),c=0;c<this.length;c+=1){var u=this[c];if(r)for(d=0;d<p.length;d+=1){var h=p[d];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[h]||(u.dom7LiveListeners[h]=[]),u.dom7LiveListeners[h].push({listener:n,proxyListener:o}),u.addEventListener(h,o,s)}else for(d=0;d<p.length;d+=1){var v=p[d];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[v]||(u.dom7Listeners[v]=[]),u.dom7Listeners[v].push({listener:n,proxyListener:l}),u.addEventListener(v,l,s)}}return this},off:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];var i=t[0],s=t[1],r=t[2],n=t[3];"function"==typeof t[1]&&(i=(e=t)[0],r=e[1],n=e[2],s=void 0),n||(n=!1);for(var o=i.split(" "),l=0;l<o.length;l+=1)for(var d=o[l],p=0;p<this.length;p+=1){var c=this[p],u=void 0;if(!s&&c.dom7Listeners?u=c.dom7Listeners[d]:s&&c.dom7LiveListeners&&(u=c.dom7LiveListeners[d]),u&&u.length)for(var h=u.length-1;0<=h;h-=1){var v=u[h];r&&v.listener===r?(c.removeEventListener(d,v.proxyListener,n),u.splice(h,1)):r&&v.listener&&v.listener.dom7proxy&&v.listener.dom7proxy===r?(c.removeEventListener(d,v.proxyListener,n),u.splice(h,1)):r||(c.removeEventListener(d,v.proxyListener,n),u.splice(h,1))}}return this},trigger:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var a=e[0].split(" "),i=e[1],s=0;s<a.length;s+=1)for(var r=a[s],n=0;n<this.length;n+=1){var o=this[n],l=void 0;try{l=new J.CustomEvent(r,{detail:i,bubbles:!0,cancelable:!0})}catch(e){(l=f.createEvent("Event")).initEvent(r,!0,!0),l.detail=i}o.dom7EventData=e.filter(function(e,t){return 0<t}),o.dispatchEvent(l),o.dom7EventData=[],delete o.dom7EventData}return this},transitionEnd:function(t){var a,i=["webkitTransitionEnd","transitionend"],s=this;function r(e){if(e.target===this)for(t.call(this,e),a=0;a<i.length;a+=1)s.off(i[a],r)}if(t)for(a=0;a<i.length;a+=1)s.on(i[a],r);return this},outerWidth:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(0<this.length){var e=this[0],t=e.getBoundingClientRect(),a=f.body,i=e.clientTop||a.clientTop||0,s=e.clientLeft||a.clientLeft||0,r=e===J?J.scrollY:e.scrollTop,n=e===J?J.scrollX:e.scrollLeft;return{top:t.top+r-i,left:t.left+n-s}}return null},css:function(e,t){var a;if(1===arguments.length){if("string"!=typeof e){for(a=0;a<this.length;a+=1)for(var i in e)this[a].style[i]=e[i];return this}if(this[0])return J.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(a=0;a<this.length;a+=1)this[a].style[e]=t;return this}return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,a,i=this[0];if(!i||void 0===e)return!1;if("string"==typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(t=L(e),a=0;a<t.length;a+=1)if(t[a]===i)return!0;return!1}if(e===f)return i===f;if(e===J)return i===J;if(e.nodeType||e instanceof l){for(t=e.nodeType?[e]:e,a=0;a<t.length;a+=1)if(t[a]===i)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,a=this.length;return new l(a-1<e?[]:e<0?(t=a+e)<0?[]:[this[t]]:[this[e]])},append:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];for(var i=0;i<t.length;i+=1){e=t[i];for(var s=0;s<this.length;s+=1)if("string"==typeof e){var r=f.createElement("div");for(r.innerHTML=e;r.firstChild;)this[s].appendChild(r.firstChild)}else if(e instanceof l)for(var n=0;n<e.length;n+=1)this[s].appendChild(e[n]);else this[s].appendChild(e)}return this},prepend:function(e){var t,a;for(t=0;t<this.length;t+=1)if("string"==typeof e){var i=f.createElement("div");for(i.innerHTML=e,a=i.childNodes.length-1;0<=a;a-=1)this[t].insertBefore(i.childNodes[a],this[t].childNodes[0])}else if(e instanceof l)for(a=0;a<e.length;a+=1)this[t].insertBefore(e[a],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return 0<this.length?e?this[0].nextElementSibling&&L(this[0].nextElementSibling).is(e)?new l([this[0].nextElementSibling]):new l([]):this[0].nextElementSibling?new l([this[0].nextElementSibling]):new l([]):new l([])},nextAll:function(e){var t=[],a=this[0];if(!a)return new l([]);for(;a.nextElementSibling;){var i=a.nextElementSibling;e?L(i).is(e)&&t.push(i):t.push(i),a=i}return new l(t)},prev:function(e){if(0<this.length){var t=this[0];return e?t.previousElementSibling&&L(t.previousElementSibling).is(e)?new l([t.previousElementSibling]):new l([]):t.previousElementSibling?new l([t.previousElementSibling]):new l([])}return new l([])},prevAll:function(e){var t=[],a=this[0];if(!a)return new l([]);for(;a.previousElementSibling;){var i=a.previousElementSibling;e?L(i).is(e)&&t.push(i):t.push(i),a=i}return new l(t)},parent:function(e){for(var t=[],a=0;a<this.length;a+=1)null!==this[a].parentNode&&(e?L(this[a].parentNode).is(e)&&t.push(this[a].parentNode):t.push(this[a].parentNode));return L(r(t))},parents:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].parentNode;i;)e?L(i).is(e)&&t.push(i):t.push(i),i=i.parentNode;return L(r(t))},closest:function(e){var t=this;return void 0===e?new l([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].querySelectorAll(e),s=0;s<i.length;s+=1)t.push(i[s]);return new l(t)},children:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].childNodes,s=0;s<i.length;s+=1)e?1===i[s].nodeType&&L(i[s]).is(e)&&t.push(i[s]):1===i[s].nodeType&&t.push(i[s]);return new l(r(t))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a,i;for(a=0;a<e.length;a+=1){var s=L(e[a]);for(i=0;i<s.length;i+=1)this[this.length]=s[i],this.length+=1}return this},styles:function(){return this[0]?J.getComputedStyle(this[0],null):{}}};Object.keys(t).forEach(function(e){L.fn[e]=t[e]});var e,a,i,s,ee={deleteProps:function(e){var t=e;Object.keys(t).forEach(function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,t){var a,i,s;void 0===t&&(t="x");var r=J.getComputedStyle(e,null);return J.WebKitCSSMatrix?(6<(i=r.transform||r.webkitTransform).split(",").length&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),s=new J.WebKitCSSMatrix("none"===i?"":i)):a=(s=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(i=J.WebKitCSSMatrix?s.m41:16===a.length?parseFloat(a[12]):parseFloat(a[4])),"y"===t&&(i=J.WebKitCSSMatrix?s.m42:16===a.length?parseFloat(a[13]):parseFloat(a[5])),i||0},parseUrlQuery:function(e){var t,a,i,s,r={},n=e||J.location.href;if("string"==typeof n&&n.length)for(s=(a=(n=-1<n.indexOf("?")?n.replace(/\S*\?/,""):"").split("&").filter(function(e){return""!==e})).length,t=0;t<s;t+=1)i=a[t].replace(/#\S+/g,"").split("="),r[decodeURIComponent(i[0])]=void 0===i[1]?void 0:decodeURIComponent(i[1])||"";return r},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var a=Object(e[0]),i=1;i<e.length;i+=1){var s=e[i];if(null!=s)for(var r=Object.keys(Object(s)),n=0,o=r.length;n<o;n+=1){var l=r[n],d=Object.getOwnPropertyDescriptor(s,l);void 0!==d&&d.enumerable&&(ee.isObject(a[l])&&ee.isObject(s[l])?ee.extend(a[l],s[l]):!ee.isObject(a[l])&&ee.isObject(s[l])?(a[l]={},ee.extend(a[l],s[l])):a[l]=s[l])}}return a}},te=(i=f.createElement("div"),{touch:J.Modernizr&&!0===J.Modernizr.touch||!!(0<J.navigator.maxTouchPoints||"ontouchstart"in J||J.DocumentTouch&&f instanceof J.DocumentTouch),pointerEvents:!!(J.navigator.pointerEnabled||J.PointerEvent||"maxTouchPoints"in J.navigator&&0<J.navigator.maxTouchPoints),prefixedPointerEvents:!!J.navigator.msPointerEnabled,transition:(a=i.style,"transition"in a||"webkitTransition"in a||"MozTransition"in a),transforms3d:J.Modernizr&&!0===J.Modernizr.csstransforms3d||(e=i.style,"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e),flexbox:function(){for(var e=i.style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),a=0;a<t.length;a+=1)if(t[a]in e)return!0;return!1}(),observer:"MutationObserver"in J||"WebkitMutationObserver"in J,passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});J.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:"ongesturestart"in J}),I={isIE:!!J.navigator.userAgent.match(/Trident/g)||!!J.navigator.userAgent.match(/MSIE/g),isEdge:!!J.navigator.userAgent.match(/Edge/g),isSafari:(s=J.navigator.userAgent.toLowerCase(),0<=s.indexOf("safari")&&s.indexOf("chrome")<0&&s.indexOf("android")<0),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(J.navigator.userAgent)},n=function(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach(function(e){t.on(e,t.params.on[e])})},o={components:{configurable:!0}};n.prototype.on=function(e,t,a){var i=this;if("function"!=typeof t)return i;var s=a?"unshift":"push";return e.split(" ").forEach(function(e){i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][s](t)}),i},n.prototype.once=function(a,i,e){var s=this;if("function"!=typeof i)return s;function r(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];i.apply(s,e),s.off(a,r),r.f7proxy&&delete r.f7proxy}return r.f7proxy=i,s.on(a,r,e)},n.prototype.off=function(e,i){var s=this;return s.eventsListeners&&e.split(" ").forEach(function(a){void 0===i?s.eventsListeners[a]=[]:s.eventsListeners[a]&&s.eventsListeners[a].length&&s.eventsListeners[a].forEach(function(e,t){(e===i||e.f7proxy&&e.f7proxy===i)&&s.eventsListeners[a].splice(t,1)})}),s},n.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a,i,s,r=this;return r.eventsListeners&&("string"==typeof e[0]||Array.isArray(e[0])?(a=e[0],i=e.slice(1,e.length),s=r):(a=e[0].events,i=e[0].data,s=e[0].context||r),(Array.isArray(a)?a:a.split(" ")).forEach(function(e){if(r.eventsListeners&&r.eventsListeners[e]){var t=[];r.eventsListeners[e].forEach(function(e){t.push(e)}),t.forEach(function(e){e.apply(s,i)})}})),r},n.prototype.useModulesParams=function(a){var i=this;i.modules&&Object.keys(i.modules).forEach(function(e){var t=i.modules[e];t.params&&ee.extend(a,t.params)})},n.prototype.useModules=function(i){void 0===i&&(i={});var s=this;s.modules&&Object.keys(s.modules).forEach(function(e){var a=s.modules[e],t=i[e]||{};a.instance&&Object.keys(a.instance).forEach(function(e){var t=a.instance[e];s[e]="function"==typeof t?t.bind(s):t}),a.on&&s.on&&Object.keys(a.on).forEach(function(e){s.on(e,a.on[e])}),a.create&&a.create.bind(s)(t)})},o.components.set=function(e){this.use&&this.use(e)},n.installModule=function(t){for(var e=[],a=arguments.length-1;0<a--;)e[a]=arguments[a+1];var i=this;i.prototype.modules||(i.prototype.modules={});var s=t.name||Object.keys(i.prototype.modules).length+"_"+ee.now();return(i.prototype.modules[s]=t).proto&&Object.keys(t.proto).forEach(function(e){i.prototype[e]=t.proto[e]}),t.static&&Object.keys(t.static).forEach(function(e){i[e]=t.static[e]}),t.install&&t.install.apply(i,e),i},n.use=function(e){for(var t=[],a=arguments.length-1;0<a--;)t[a]=arguments[a+1];var i=this;return Array.isArray(e)?(e.forEach(function(e){return i.installModule(e)}),i):i.installModule.apply(i,[e].concat(t))},Object.defineProperties(n,o);var d={updateSize:function(){var e,t,a=this,i=a.$el;e=void 0!==a.params.width?a.params.width:i[0].clientWidth,t=void 0!==a.params.height?a.params.height:i[0].clientHeight,0===e&&a.isHorizontal()||0===t&&a.isVertical()||(e=e-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),t=t-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),ee.extend(a,{width:e,height:t,size:a.isHorizontal()?e:t}))},updateSlides:function(){var e=this,t=e.params,a=e.$wrapperEl,i=e.size,s=e.rtlTranslate,r=e.wrongRTL,n=e.virtual&&t.virtual.enabled,o=n?e.virtual.slides.length:e.slides.length,l=a.children("."+e.params.slideClass),d=n?e.virtual.slides.length:l.length,p=[],c=[],u=[],h=t.slidesOffsetBefore;"function"==typeof h&&(h=t.slidesOffsetBefore.call(e));var v=t.slidesOffsetAfter;"function"==typeof v&&(v=t.slidesOffsetAfter.call(e));var f=e.snapGrid.length,m=e.snapGrid.length,g=t.spaceBetween,b=-h,w=0,y=0;if(void 0!==i){var x,T;"string"==typeof g&&0<=g.indexOf("%")&&(g=parseFloat(g.replace("%",""))/100*i),e.virtualSize=-g,s?l.css({marginLeft:"",marginTop:""}):l.css({marginRight:"",marginBottom:""}),1<t.slidesPerColumn&&(x=Math.floor(d/t.slidesPerColumn)===d/e.params.slidesPerColumn?d:Math.ceil(d/t.slidesPerColumn)*t.slidesPerColumn,"auto"!==t.slidesPerView&&"row"===t.slidesPerColumnFill&&(x=Math.max(x,t.slidesPerView*t.slidesPerColumn)));for(var E,S=t.slidesPerColumn,C=x/S,M=Math.floor(d/t.slidesPerColumn),z=0;z<d;z+=1){T=0;var P=l.eq(z);if(1<t.slidesPerColumn){var k=void 0,$=void 0,L=void 0;"column"===t.slidesPerColumnFill?(L=z-($=Math.floor(z/S))*S,(M<$||$===M&&L===S-1)&&S<=(L+=1)&&(L=0,$+=1),k=$+L*x/S,P.css({"-webkit-box-ordinal-group":k,"-moz-box-ordinal-group":k,"-ms-flex-order":k,"-webkit-order":k,order:k})):$=z-(L=Math.floor(z/C))*C,P.css("margin-"+(e.isHorizontal()?"top":"left"),0!==L&&t.spaceBetween&&t.spaceBetween+"px").attr("data-swiper-column",$).attr("data-swiper-row",L)}if("none"!==P.css("display")){if("auto"===t.slidesPerView){var I=J.getComputedStyle(P[0],null),D=P[0].style.transform,O=P[0].style.webkitTransform;if(D&&(P[0].style.transform="none"),O&&(P[0].style.webkitTransform="none"),t.roundLengths)T=e.isHorizontal()?P.outerWidth(!0):P.outerHeight(!0);else if(e.isHorizontal()){var A=parseFloat(I.getPropertyValue("width")),H=parseFloat(I.getPropertyValue("padding-left")),N=parseFloat(I.getPropertyValue("padding-right")),G=parseFloat(I.getPropertyValue("margin-left")),B=parseFloat(I.getPropertyValue("margin-right")),X=I.getPropertyValue("box-sizing");T=X&&"border-box"===X?A+G+B:A+H+N+G+B}else{var Y=parseFloat(I.getPropertyValue("height")),V=parseFloat(I.getPropertyValue("padding-top")),F=parseFloat(I.getPropertyValue("padding-bottom")),R=parseFloat(I.getPropertyValue("margin-top")),q=parseFloat(I.getPropertyValue("margin-bottom")),W=I.getPropertyValue("box-sizing");T=W&&"border-box"===W?Y+R+q:Y+V+F+R+q}D&&(P[0].style.transform=D),O&&(P[0].style.webkitTransform=O),t.roundLengths&&(T=Math.floor(T))}else T=(i-(t.slidesPerView-1)*g)/t.slidesPerView,t.roundLengths&&(T=Math.floor(T)),l[z]&&(e.isHorizontal()?l[z].style.width=T+"px":l[z].style.height=T+"px");l[z]&&(l[z].swiperSlideSize=T),u.push(T),t.centeredSlides?(b=b+T/2+w/2+g,0===w&&0!==z&&(b=b-i/2-g),0===z&&(b=b-i/2-g),Math.abs(b)<.001&&(b=0),t.roundLengths&&(b=Math.floor(b)),y%t.slidesPerGroup==0&&p.push(b),c.push(b)):(t.roundLengths&&(b=Math.floor(b)),y%t.slidesPerGroup==0&&p.push(b),c.push(b),b=b+T+g),e.virtualSize+=T+g,w=T,y+=1}}if(e.virtualSize=Math.max(e.virtualSize,i)+v,s&&r&&("slide"===t.effect||"coverflow"===t.effect)&&a.css({width:e.virtualSize+t.spaceBetween+"px"}),te.flexbox&&!t.setWrapperSize||(e.isHorizontal()?a.css({width:e.virtualSize+t.spaceBetween+"px"}):a.css({height:e.virtualSize+t.spaceBetween+"px"})),1<t.slidesPerColumn&&(e.virtualSize=(T+t.spaceBetween)*x,e.virtualSize=Math.ceil(e.virtualSize/t.slidesPerColumn)-t.spaceBetween,e.isHorizontal()?a.css({width:e.virtualSize+t.spaceBetween+"px"}):a.css({height:e.virtualSize+t.spaceBetween+"px"}),t.centeredSlides)){E=[];for(var j=0;j<p.length;j+=1){var U=p[j];t.roundLengths&&(U=Math.floor(U)),p[j]<e.virtualSize+p[0]&&E.push(U)}p=E}if(!t.centeredSlides){E=[];for(var K=0;K<p.length;K+=1){var _=p[K];t.roundLengths&&(_=Math.floor(_)),p[K]<=e.virtualSize-i&&E.push(_)}p=E,1<Math.floor(e.virtualSize-i)-Math.floor(p[p.length-1])&&p.push(e.virtualSize-i)}if(0===p.length&&(p=[0]),0!==t.spaceBetween&&(e.isHorizontal()?s?l.css({marginLeft:g+"px"}):l.css({marginRight:g+"px"}):l.css({marginBottom:g+"px"})),t.centerInsufficientSlides){var Z=0;if(u.forEach(function(e){Z+=e+(t.spaceBetween?t.spaceBetween:0)}),(Z-=t.spaceBetween)<i){var Q=(i-Z)/2;p.forEach(function(e,t){p[t]=e-Q}),c.forEach(function(e,t){c[t]=e+Q})}}ee.extend(e,{slides:l,snapGrid:p,slidesGrid:c,slidesSizesGrid:u}),d!==o&&e.emit("slidesLengthChange"),p.length!==f&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),c.length!==m&&e.emit("slidesGridLengthChange"),(t.watchSlidesProgress||t.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,a=this,i=[],s=0;if("number"==typeof e?a.setTransition(e):!0===e&&a.setTransition(a.params.speed),"auto"!==a.params.slidesPerView&&1<a.params.slidesPerView)for(t=0;t<Math.ceil(a.params.slidesPerView);t+=1){var r=a.activeIndex+t;if(r>a.slides.length)break;i.push(a.slides.eq(r)[0])}else i.push(a.slides.eq(a.activeIndex)[0]);for(t=0;t<i.length;t+=1)if(void 0!==i[t]){var n=i[t].offsetHeight;s=s<n?n:s}s&&a.$wrapperEl.css("height",s+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,a=t.params,i=t.slides,s=t.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&t.updateSlidesOffset();var r=-e;s&&(r=e),i.removeClass(a.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var n=0;n<i.length;n+=1){var o=i[n],l=(r+(a.centeredSlides?t.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+a.spaceBetween);if(a.watchSlidesVisibility){var d=-(r-o.swiperSlideOffset),p=d+t.slidesSizesGrid[n];(0<=d&&d<t.size||0<p&&p<=t.size||d<=0&&p>=t.size)&&(t.visibleSlides.push(o),t.visibleSlidesIndexes.push(n),i.eq(n).addClass(a.slideVisibleClass))}o.progress=s?-l:l}t.visibleSlides=L(t.visibleSlides)}},updateProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,a=t.params,i=t.maxTranslate()-t.minTranslate(),s=t.progress,r=t.isBeginning,n=t.isEnd,o=r,l=n;0===i?n=r=!(s=0):(r=(s=(e-t.minTranslate())/i)<=0,n=1<=s),ee.extend(t,{progress:s,isBeginning:r,isEnd:n}),(a.watchSlidesProgress||a.watchSlidesVisibility)&&t.updateSlidesProgress(e),r&&!o&&t.emit("reachBeginning toEdge"),n&&!l&&t.emit("reachEnd toEdge"),(o&&!r||l&&!n)&&t.emit("fromEdge"),t.emit("progress",s)},updateSlidesClasses:function(){var e,t=this,a=t.slides,i=t.params,s=t.$wrapperEl,r=t.activeIndex,n=t.realIndex,o=t.virtual&&i.virtual.enabled;a.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=o?t.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+r+'"]'):a.eq(r)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+n+'"]').addClass(i.slideDuplicateActiveClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+n+'"]').addClass(i.slideDuplicateActiveClass));var l=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=a.eq(0)).addClass(i.slideNextClass);var d=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===d.length&&(d=a.eq(-1)).addClass(i.slidePrevClass),i.loop&&(l.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),d.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+d.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+d.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,a=this,i=a.rtlTranslate?a.translate:-a.translate,s=a.slidesGrid,r=a.snapGrid,n=a.params,o=a.activeIndex,l=a.realIndex,d=a.snapIndex,p=e;if(void 0===p){for(var c=0;c<s.length;c+=1)void 0!==s[c+1]?i>=s[c]&&i<s[c+1]-(s[c+1]-s[c])/2?p=c:i>=s[c]&&i<s[c+1]&&(p=c+1):i>=s[c]&&(p=c);n.normalizeSlideIndex&&(p<0||void 0===p)&&(p=0)}if((t=0<=r.indexOf(i)?r.indexOf(i):Math.floor(p/n.slidesPerGroup))>=r.length&&(t=r.length-1),p!==o){var u=parseInt(a.slides.eq(p).attr("data-swiper-slide-index")||p,10);ee.extend(a,{snapIndex:t,realIndex:u,previousIndex:o,activeIndex:p}),a.emit("activeIndexChange"),a.emit("snapIndexChange"),l!==u&&a.emit("realIndexChange"),a.emit("slideChange")}else t!==d&&(a.snapIndex=t,a.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this,a=t.params,i=L(e.target).closest("."+a.slideClass)[0],s=!1;if(i)for(var r=0;r<t.slides.length;r+=1)t.slides[r]===i&&(s=!0);if(!i||!s)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(L(i).attr("data-swiper-slide-index"),10):t.clickedIndex=L(i).index(),a.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};var p={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,a=this.rtlTranslate,i=this.translate,s=this.$wrapperEl;if(t.virtualTranslate)return a?-i:i;var r=ee.getTranslate(s[0],e);return a&&(r=-r),r||0},setTranslate:function(e,t){var a=this,i=a.rtlTranslate,s=a.params,r=a.$wrapperEl,n=a.progress,o=0,l=0;a.isHorizontal()?o=i?-e:e:l=e,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),s.virtualTranslate||(te.transforms3d?r.transform("translate3d("+o+"px, "+l+"px, 0px)"):r.transform("translate("+o+"px, "+l+"px)")),a.previousTranslate=a.translate,a.translate=a.isHorizontal()?o:l;var d=a.maxTranslate()-a.minTranslate();(0===d?0:(e-a.minTranslate())/d)!==n&&a.updateProgress(e),a.emit("setTranslate",a.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]}};var c={setTransition:function(e,t){this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,s=a.params,r=a.previousIndex;s.autoHeight&&a.updateAutoHeight();var n=t;if(n||(n=r<i?"next":i<r?"prev":"reset"),a.emit("transitionStart"),e&&i!==r){if("reset"===n)return void a.emit("slideResetTransitionStart");a.emit("slideChangeTransitionStart"),"next"===n?a.emit("slideNextTransitionStart"):a.emit("slidePrevTransitionStart")}},transitionEnd:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,s=a.previousIndex;a.animating=!1,a.setTransition(0);var r=t;if(r||(r=s<i?"next":i<s?"prev":"reset"),a.emit("transitionEnd"),e&&i!==s){if("reset"===r)return void a.emit("slideResetTransitionEnd");a.emit("slideChangeTransitionEnd"),"next"===r?a.emit("slideNextTransitionEnd"):a.emit("slidePrevTransitionEnd")}}};var u={slideTo:function(e,t,a,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===a&&(a=!0);var s=this,r=e;r<0&&(r=0);var n=s.params,o=s.snapGrid,l=s.slidesGrid,d=s.previousIndex,p=s.activeIndex,c=s.rtlTranslate;if(s.animating&&n.preventInteractionOnTransition)return!1;var u=Math.floor(r/n.slidesPerGroup);u>=o.length&&(u=o.length-1),(p||n.initialSlide||0)===(d||0)&&a&&s.emit("beforeSlideChangeStart");var h,v=-o[u];if(s.updateProgress(v),n.normalizeSlideIndex)for(var f=0;f<l.length;f+=1)-Math.floor(100*v)>=Math.floor(100*l[f])&&(r=f);if(s.initialized&&r!==p){if(!s.allowSlideNext&&v<s.translate&&v<s.minTranslate())return!1;if(!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(p||0)!==r)return!1}return h=p<r?"next":r<p?"prev":"reset",c&&-v===s.translate||!c&&v===s.translate?(s.updateActiveIndex(r),n.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==n.effect&&s.setTranslate(v),"reset"!==h&&(s.transitionStart(a,h),s.transitionEnd(a,h)),!1):(0!==t&&te.transition?(s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(r),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,h),s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(a,h))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd))):(s.setTransition(0),s.setTranslate(v),s.updateActiveIndex(r),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,h),s.transitionEnd(a,h)),!0)},slideToLoop:function(e,t,a,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===a&&(a=!0);var s=e;return this.params.loop&&(s+=this.loopedSlides),this.slideTo(s,t,a,i)},slideNext:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.params,r=i.animating;return s.loop?!r&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,i.slideTo(i.activeIndex+s.slidesPerGroup,e,t,a)):i.slideTo(i.activeIndex+s.slidesPerGroup,e,t,a)},slidePrev:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.params,r=i.animating,n=i.snapGrid,o=i.slidesGrid,l=i.rtlTranslate;if(s.loop){if(r)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var p,c=d(l?i.translate:-i.translate),u=n.map(function(e){return d(e)}),h=(o.map(function(e){return d(e)}),n[u.indexOf(c)],n[u.indexOf(c)-1]);return void 0!==h&&(p=o.indexOf(h))<0&&(p=i.activeIndex-1),i.slideTo(p,e,t,a)},slideReset:function(e,t,a){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,a)},slideToClosest:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.activeIndex,r=Math.floor(s/i.params.slidesPerGroup);if(r<i.snapGrid.length-1){var n=i.rtlTranslate?i.translate:-i.translate,o=i.snapGrid[r];(i.snapGrid[r+1]-o)/2<n-o&&(s=i.params.slidesPerGroup)}return i.slideTo(s,e,t,a)},slideToClickedSlide:function(){var e,t=this,a=t.params,i=t.$wrapperEl,s="auto"===a.slidesPerView?t.slidesPerViewDynamic():a.slidesPerView,r=t.clickedIndex;if(a.loop){if(t.animating)return;e=parseInt(L(t.clickedSlide).attr("data-swiper-slide-index"),10),a.centeredSlides?r<t.loopedSlides-s/2||r>t.slides.length-t.loopedSlides+s/2?(t.loopFix(),r=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),ee.nextTick(function(){t.slideTo(r)})):t.slideTo(r):r>t.slides.length-s?(t.loopFix(),r=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),ee.nextTick(function(){t.slideTo(r)})):t.slideTo(r)}else t.slideTo(r)}};var h={loopCreate:function(){var i=this,e=i.params,t=i.$wrapperEl;t.children("."+e.slideClass+"."+e.slideDuplicateClass).remove();var s=t.children("."+e.slideClass);if(e.loopFillGroupWithBlank){var a=e.slidesPerGroup-s.length%e.slidesPerGroup;if(a!==e.slidesPerGroup){for(var r=0;r<a;r+=1){var n=L(f.createElement("div")).addClass(e.slideClass+" "+e.slideBlankClass);t.append(n)}s=t.children("."+e.slideClass)}}"auto"!==e.slidesPerView||e.loopedSlides||(e.loopedSlides=s.length),i.loopedSlides=parseInt(e.loopedSlides||e.slidesPerView,10),i.loopedSlides+=e.loopAdditionalSlides,i.loopedSlides>s.length&&(i.loopedSlides=s.length);var o=[],l=[];s.each(function(e,t){var a=L(t);e<i.loopedSlides&&l.push(t),e<s.length&&e>=s.length-i.loopedSlides&&o.push(t),a.attr("data-swiper-slide-index",e)});for(var d=0;d<l.length;d+=1)t.append(L(l[d].cloneNode(!0)).addClass(e.slideDuplicateClass));for(var p=o.length-1;0<=p;p-=1)t.prepend(L(o[p].cloneNode(!0)).addClass(e.slideDuplicateClass))},loopFix:function(){var e,t=this,a=t.params,i=t.activeIndex,s=t.slides,r=t.loopedSlides,n=t.allowSlidePrev,o=t.allowSlideNext,l=t.snapGrid,d=t.rtlTranslate;t.allowSlidePrev=!0,t.allowSlideNext=!0;var p=-l[i]-t.getTranslate();i<r?(e=s.length-3*r+i,e+=r,t.slideTo(e,0,!1,!0)&&0!==p&&t.setTranslate((d?-t.translate:t.translate)-p)):("auto"===a.slidesPerView&&2*r<=i||i>=s.length-r)&&(e=-s.length+i+r,e+=r,t.slideTo(e,0,!1,!0)&&0!==p&&t.setTranslate((d?-t.translate:t.translate)-p));t.allowSlidePrev=n,t.allowSlideNext=o},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,a=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),a.removeAttr("data-swiper-slide-index")}};var v={setGrabCursor:function(e){if(!(te.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked)){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){te.touch||this.params.watchOverflow&&this.isLocked||(this.el.style.cursor="")}};var m={appendSlide:function(e){var t=this,a=t.$wrapperEl,i=t.params;if(i.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&a.append(e[s]);else a.append(e);i.loop&&t.loopCreate(),i.observer&&te.observer||t.update()},prependSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,s=t.activeIndex;a.loop&&t.loopDestroy();var r=s+1;if("object"==typeof e&&"length"in e){for(var n=0;n<e.length;n+=1)e[n]&&i.prepend(e[n]);r=s+e.length}else i.prepend(e);a.loop&&t.loopCreate(),a.observer&&te.observer||t.update(),t.slideTo(r,0,!1)},addSlide:function(e,t){var a=this,i=a.$wrapperEl,s=a.params,r=a.activeIndex;s.loop&&(r-=a.loopedSlides,a.loopDestroy(),a.slides=i.children("."+s.slideClass));var n=a.slides.length;if(e<=0)a.prependSlide(t);else if(n<=e)a.appendSlide(t);else{for(var o=e<r?r+1:r,l=[],d=n-1;e<=d;d-=1){var p=a.slides.eq(d);p.remove(),l.unshift(p)}if("object"==typeof t&&"length"in t){for(var c=0;c<t.length;c+=1)t[c]&&i.append(t[c]);o=e<r?r+t.length:r}else i.append(t);for(var u=0;u<l.length;u+=1)i.append(l[u]);s.loop&&a.loopCreate(),s.observer&&te.observer||a.update(),s.loop?a.slideTo(o+a.loopedSlides,0,!1):a.slideTo(o,0,!1)}},removeSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,s=t.activeIndex;a.loop&&(s-=t.loopedSlides,t.loopDestroy(),t.slides=i.children("."+a.slideClass));var r,n=s;if("object"==typeof e&&"length"in e){for(var o=0;o<e.length;o+=1)r=e[o],t.slides[r]&&t.slides.eq(r).remove(),r<n&&(n-=1);n=Math.max(n,0)}else r=e,t.slides[r]&&t.slides.eq(r).remove(),r<n&&(n-=1),n=Math.max(n,0);a.loop&&t.loopCreate(),a.observer&&te.observer||t.update(),a.loop?t.slideTo(n+t.loopedSlides,0,!1):t.slideTo(n,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},g=function(){var e=J.navigator.userAgent,t={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:J.cordova||J.phonegap,phonegap:J.cordova||J.phonegap},a=e.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=e.match(/(iPad).*OS\s([\d_]+)/),r=e.match(/(iPod)(.*OS\s([\d_]+))?/),n=!s&&e.match(/(iPhone\sOS|iOS)\s([\d_]+)/);if(a&&(t.os="windows",t.osVersion=a[2],t.windows=!0),i&&!a&&(t.os="android",t.osVersion=i[2],t.android=!0,t.androidChrome=0<=e.toLowerCase().indexOf("chrome")),(s||n||r)&&(t.os="ios",t.ios=!0),n&&!r&&(t.osVersion=n[2].replace(/_/g,"."),t.iphone=!0),s&&(t.osVersion=s[2].replace(/_/g,"."),t.ipad=!0),r&&(t.osVersion=r[3]?r[3].replace(/_/g,"."):null,t.iphone=!0),t.ios&&t.osVersion&&0<=e.indexOf("Version/")&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=e.toLowerCase().split("version/")[1].split(" ")[0]),t.desktop=!(t.os||t.android||t.webView),t.webView=(n||s||r)&&e.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var o=t.osVersion.split("."),l=f.querySelector('meta[name="viewport"]');t.minimalUi=!t.webView&&(r||n)&&(1*o[0]==7?1<=1*o[1]:7<1*o[0])&&l&&0<=l.getAttribute("content").indexOf("minimal-ui")}return t.pixelRatio=J.devicePixelRatio||1,t}();function b(){var e=this,t=e.params,a=e.el;if(!a||0!==a.offsetWidth){t.breakpoints&&e.setBreakpoint();var i=e.allowSlideNext,s=e.allowSlidePrev,r=e.snapGrid;if(e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),t.freeMode){var n=Math.min(Math.max(e.translate,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses(),t.autoHeight&&e.updateAutoHeight()}else e.updateSlidesClasses(),("auto"===t.slidesPerView||1<t.slidesPerView)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0);e.allowSlidePrev=s,e.allowSlideNext=i,e.params.watchOverflow&&r!==e.snapGrid&&e.checkOverflow()}}var w={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsInverse:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!0,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},y={update:d,translate:p,transition:c,slide:u,loop:h,grabCursor:v,manipulation:m,events:{attachEvents:function(){var e=this,t=e.params,a=e.touchEvents,i=e.el,s=e.wrapperEl;e.onTouchStart=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches;if(!t.animating||!i.preventInteractionOnTransition){var r=e;if(r.originalEvent&&(r=r.originalEvent),a.isTouchEvent="touchstart"===r.type,(a.isTouchEvent||!("which"in r)||3!==r.which)&&!(!a.isTouchEvent&&"button"in r&&0<r.button||a.isTouched&&a.isMoved))if(i.noSwiping&&L(r.target).closest(i.noSwipingSelector?i.noSwipingSelector:"."+i.noSwipingClass)[0])t.allowClick=!0;else if(!i.swipeHandler||L(r).closest(i.swipeHandler)[0]){s.currentX="touchstart"===r.type?r.targetTouches[0].pageX:r.pageX,s.currentY="touchstart"===r.type?r.targetTouches[0].pageY:r.pageY;var n=s.currentX,o=s.currentY,l=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,d=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(!l||!(n<=d||n>=J.screen.width-d)){if(ee.extend(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=n,s.startY=o,a.touchStartTime=ee.now(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,0<i.threshold&&(a.allowThresholdMove=!1),"touchstart"!==r.type){var p=!0;L(r.target).is(a.formElements)&&(p=!1),f.activeElement&&L(f.activeElement).is(a.formElements)&&f.activeElement!==r.target&&f.activeElement.blur();var c=p&&t.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||c)&&r.preventDefault()}t.emit("touchStart",r)}}}}.bind(e),e.onTouchMove=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches,r=t.rtlTranslate,n=e;if(n.originalEvent&&(n=n.originalEvent),a.isTouched){if(!a.isTouchEvent||"mousemove"!==n.type){var o="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,l="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if(n.preventedByNestedSwiper)return s.startX=o,void(s.startY=l);if(!t.allowTouchMove)return t.allowClick=!1,void(a.isTouched&&(ee.extend(s,{startX:o,startY:l,currentX:o,currentY:l}),a.touchStartTime=ee.now()));if(a.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(t.isVertical()){if(l<s.startY&&t.translate<=t.maxTranslate()||l>s.startY&&t.translate>=t.minTranslate())return a.isTouched=!1,void(a.isMoved=!1)}else if(o<s.startX&&t.translate<=t.maxTranslate()||o>s.startX&&t.translate>=t.minTranslate())return;if(a.isTouchEvent&&f.activeElement&&n.target===f.activeElement&&L(n.target).is(a.formElements))return a.isMoved=!0,void(t.allowClick=!1);if(a.allowTouchCallbacks&&t.emit("touchMove",n),!(n.targetTouches&&1<n.targetTouches.length)){s.currentX=o,s.currentY=l;var d,p=s.currentX-s.startX,c=s.currentY-s.startY;if(!(t.params.threshold&&Math.sqrt(Math.pow(p,2)+Math.pow(c,2))<t.params.threshold))if(void 0===a.isScrolling&&(t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?a.isScrolling=!1:25<=p*p+c*c&&(d=180*Math.atan2(Math.abs(c),Math.abs(p))/Math.PI,a.isScrolling=t.isHorizontal()?d>i.touchAngle:90-d>i.touchAngle)),a.isScrolling&&t.emit("touchMoveOpposite",n),void 0===a.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(a.startMoving=!0)),a.isScrolling)a.isTouched=!1;else if(a.startMoving){t.allowClick=!1,n.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&n.stopPropagation(),a.isMoved||(i.loop&&t.loopFix(),a.startTranslate=t.getTranslate(),t.setTransition(0),t.animating&&t.$wrapperEl.trigger("webkitTransitionEnd transitionend"),a.allowMomentumBounce=!1,!i.grabCursor||!0!==t.allowSlideNext&&!0!==t.allowSlidePrev||t.setGrabCursor(!0),t.emit("sliderFirstMove",n)),t.emit("sliderMove",n),a.isMoved=!0;var u=t.isHorizontal()?p:c;s.diff=u,u*=i.touchRatio,r&&(u=-u),t.swipeDirection=0<u?"prev":"next",a.currentTranslate=u+a.startTranslate;var h=!0,v=i.resistanceRatio;if(i.touchReleaseOnEdges&&(v=0),0<u&&a.currentTranslate>t.minTranslate()?(h=!1,i.resistance&&(a.currentTranslate=t.minTranslate()-1+Math.pow(-t.minTranslate()+a.startTranslate+u,v))):u<0&&a.currentTranslate<t.maxTranslate()&&(h=!1,i.resistance&&(a.currentTranslate=t.maxTranslate()+1-Math.pow(t.maxTranslate()-a.startTranslate-u,v))),h&&(n.preventedByNestedSwiper=!0),!t.allowSlideNext&&"next"===t.swipeDirection&&a.currentTranslate<a.startTranslate&&(a.currentTranslate=a.startTranslate),!t.allowSlidePrev&&"prev"===t.swipeDirection&&a.currentTranslate>a.startTranslate&&(a.currentTranslate=a.startTranslate),0<i.threshold){if(!(Math.abs(u)>i.threshold||a.allowThresholdMove))return void(a.currentTranslate=a.startTranslate);if(!a.allowThresholdMove)return a.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,a.currentTranslate=a.startTranslate,void(s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}i.followFinger&&((i.freeMode||i.watchSlidesProgress||i.watchSlidesVisibility)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&(0===a.velocities.length&&a.velocities.push({position:s[t.isHorizontal()?"startX":"startY"],time:a.touchStartTime}),a.velocities.push({position:s[t.isHorizontal()?"currentX":"currentY"],time:ee.now()})),t.updateProgress(a.currentTranslate),t.setTranslate(a.currentTranslate))}}}}else a.startMoving&&a.isScrolling&&t.emit("touchMoveOpposite",n)}.bind(e),e.onTouchEnd=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches,r=t.rtlTranslate,n=t.$wrapperEl,o=t.slidesGrid,l=t.snapGrid,d=e;if(d.originalEvent&&(d=d.originalEvent),a.allowTouchCallbacks&&t.emit("touchEnd",d),a.allowTouchCallbacks=!1,!a.isTouched)return a.isMoved&&i.grabCursor&&t.setGrabCursor(!1),a.isMoved=!1,void(a.startMoving=!1);i.grabCursor&&a.isMoved&&a.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var p,c=ee.now(),u=c-a.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(d),t.emit("tap",d),u<300&&300<c-a.lastClickTime&&(a.clickTimeout&&clearTimeout(a.clickTimeout),a.clickTimeout=ee.nextTick(function(){t&&!t.destroyed&&t.emit("click",d)},300)),u<300&&c-a.lastClickTime<300&&(a.clickTimeout&&clearTimeout(a.clickTimeout),t.emit("doubleTap",d))),a.lastClickTime=ee.now(),ee.nextTick(function(){t.destroyed||(t.allowClick=!0)}),!a.isTouched||!a.isMoved||!t.swipeDirection||0===s.diff||a.currentTranslate===a.startTranslate)return a.isTouched=!1,a.isMoved=!1,void(a.startMoving=!1);if(a.isTouched=!1,a.isMoved=!1,a.startMoving=!1,p=i.followFinger?r?t.translate:-t.translate:-a.currentTranslate,i.freeMode){if(p<-t.minTranslate())return void t.slideTo(t.activeIndex);if(p>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(i.freeModeMomentum){if(1<a.velocities.length){var h=a.velocities.pop(),v=a.velocities.pop(),f=h.position-v.position,m=h.time-v.time;t.velocity=f/m,t.velocity/=2,Math.abs(t.velocity)<i.freeModeMinimumVelocity&&(t.velocity=0),(150<m||300<ee.now()-h.time)&&(t.velocity=0)}else t.velocity=0;t.velocity*=i.freeModeMomentumVelocityRatio,a.velocities.length=0;var g=1e3*i.freeModeMomentumRatio,b=t.velocity*g,w=t.translate+b;r&&(w=-w);var y,x,T=!1,E=20*Math.abs(t.velocity)*i.freeModeMomentumBounceRatio;if(w<t.maxTranslate())i.freeModeMomentumBounce?(w+t.maxTranslate()<-E&&(w=t.maxTranslate()-E),y=t.maxTranslate(),T=!0,a.allowMomentumBounce=!0):w=t.maxTranslate(),i.loop&&i.centeredSlides&&(x=!0);else if(w>t.minTranslate())i.freeModeMomentumBounce?(w-t.minTranslate()>E&&(w=t.minTranslate()+E),y=t.minTranslate(),T=!0,a.allowMomentumBounce=!0):w=t.minTranslate(),i.loop&&i.centeredSlides&&(x=!0);else if(i.freeModeSticky){for(var S,C=0;C<l.length;C+=1)if(l[C]>-w){S=C;break}w=-(w=Math.abs(l[S]-w)<Math.abs(l[S-1]-w)||"next"===t.swipeDirection?l[S]:l[S-1])}if(x&&t.once("transitionEnd",function(){t.loopFix()}),0!==t.velocity)g=r?Math.abs((-w-t.translate)/t.velocity):Math.abs((w-t.translate)/t.velocity);else if(i.freeModeSticky)return void t.slideToClosest();i.freeModeMomentumBounce&&T?(t.updateProgress(y),t.setTransition(g),t.setTranslate(w),t.transitionStart(!0,t.swipeDirection),t.animating=!0,n.transitionEnd(function(){t&&!t.destroyed&&a.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(i.speed),t.setTranslate(y),n.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))})):t.velocity?(t.updateProgress(w),t.setTransition(g),t.setTranslate(w),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,n.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(w),t.updateActiveIndex(),t.updateSlidesClasses()}else if(i.freeModeSticky)return void t.slideToClosest();(!i.freeModeMomentum||u>=i.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var M=0,z=t.slidesSizesGrid[0],P=0;P<o.length;P+=i.slidesPerGroup)void 0!==o[P+i.slidesPerGroup]?p>=o[P]&&p<o[P+i.slidesPerGroup]&&(z=o[(M=P)+i.slidesPerGroup]-o[P]):p>=o[P]&&(M=P,z=o[o.length-1]-o[o.length-2]);var k=(p-o[M])/z;if(u>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(k>=i.longSwipesRatio?t.slideTo(M+i.slidesPerGroup):t.slideTo(M)),"prev"===t.swipeDirection&&(k>1-i.longSwipesRatio?t.slideTo(M+i.slidesPerGroup):t.slideTo(M))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&t.slideTo(M+i.slidesPerGroup),"prev"===t.swipeDirection&&t.slideTo(M)}}}.bind(e),e.onClick=function(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}.bind(e);var r="container"===t.touchEventsTarget?i:s,n=!!t.nested;if(te.touch||!te.pointerEvents&&!te.prefixedPointerEvents){if(te.touch){var o=!("touchstart"!==a.start||!te.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};r.addEventListener(a.start,e.onTouchStart,o),r.addEventListener(a.move,e.onTouchMove,te.passiveListener?{passive:!1,capture:n}:n),r.addEventListener(a.end,e.onTouchEnd,o)}(t.simulateTouch&&!g.ios&&!g.android||t.simulateTouch&&!te.touch&&g.ios)&&(r.addEventListener("mousedown",e.onTouchStart,!1),f.addEventListener("mousemove",e.onTouchMove,n),f.addEventListener("mouseup",e.onTouchEnd,!1))}else r.addEventListener(a.start,e.onTouchStart,!1),f.addEventListener(a.move,e.onTouchMove,n),f.addEventListener(a.end,e.onTouchEnd,!1);(t.preventClicks||t.preventClicksPropagation)&&r.addEventListener("click",e.onClick,!0),e.on(g.ios||g.android?"resize orientationchange observerUpdate":"resize observerUpdate",b,!0)},detachEvents:function(){var e=this,t=e.params,a=e.touchEvents,i=e.el,s=e.wrapperEl,r="container"===t.touchEventsTarget?i:s,n=!!t.nested;if(te.touch||!te.pointerEvents&&!te.prefixedPointerEvents){if(te.touch){var o=!("onTouchStart"!==a.start||!te.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};r.removeEventListener(a.start,e.onTouchStart,o),r.removeEventListener(a.move,e.onTouchMove,n),r.removeEventListener(a.end,e.onTouchEnd,o)}(t.simulateTouch&&!g.ios&&!g.android||t.simulateTouch&&!te.touch&&g.ios)&&(r.removeEventListener("mousedown",e.onTouchStart,!1),f.removeEventListener("mousemove",e.onTouchMove,n),f.removeEventListener("mouseup",e.onTouchEnd,!1))}else r.removeEventListener(a.start,e.onTouchStart,!1),f.removeEventListener(a.move,e.onTouchMove,n),f.removeEventListener(a.end,e.onTouchEnd,!1);(t.preventClicks||t.preventClicksPropagation)&&r.removeEventListener("click",e.onClick,!0),e.off(g.ios||g.android?"resize orientationchange observerUpdate":"resize observerUpdate",b)}},breakpoints:{setBreakpoint:function(){var e=this,t=e.activeIndex,a=e.initialized,i=e.loopedSlides;void 0===i&&(i=0);var s=e.params,r=s.breakpoints;if(r&&(!r||0!==Object.keys(r).length)){var n=e.getBreakpoint(r);if(n&&e.currentBreakpoint!==n){var o=n in r?r[n]:void 0;o&&["slidesPerView","spaceBetween","slidesPerGroup"].forEach(function(e){var t=o[e];void 0!==t&&(o[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")});var l=o||e.originalParams,d=l.direction&&l.direction!==s.direction,p=s.loop&&(l.slidesPerView!==s.slidesPerView||d);d&&a&&e.changeDirection(),ee.extend(e.params,l),ee.extend(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),e.currentBreakpoint=n,p&&a&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",l)}}},getBreakpoint:function(e){if(e){var t=!1,a=[];Object.keys(e).forEach(function(e){a.push(e)}),a.sort(function(e,t){return parseInt(e,10)-parseInt(t,10)});for(var i=0;i<a.length;i+=1){var s=a[i];this.params.breakpointsInverse?s<=J.innerWidth&&(t=s):s>=J.innerWidth&&!t&&(t=s)}return t||"max"}}},checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked;e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),t&&t!==e.isLocked&&(e.isEnd=!1,e.navigation.update())}},classes:{addClasses:function(){var t=this.classNames,a=this.params,e=this.rtl,i=this.$el,s=[];s.push("initialized"),s.push(a.direction),a.freeMode&&s.push("free-mode"),te.flexbox||s.push("no-flexbox"),a.autoHeight&&s.push("autoheight"),e&&s.push("rtl"),1<a.slidesPerColumn&&s.push("multirow"),g.android&&s.push("android"),g.ios&&s.push("ios"),(I.isIE||I.isEdge)&&(te.pointerEvents||te.prefixedPointerEvents)&&s.push("wp8-"+a.direction),s.forEach(function(e){t.push(a.containerModifierClass+e)}),i.addClass(t.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,t,a,i,s,r){var n;function o(){r&&r()}e.complete&&s?o():t?((n=new J.Image).onload=o,n.onerror=o,i&&(n.sizes=i),a&&(n.srcset=a),t&&(n.src=t)):o()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var a=0;a<e.imagesToLoad.length;a+=1){var i=e.imagesToLoad[a];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}}},x={},T=function(u){function h(){for(var e,t,s,a=[],i=arguments.length;i--;)a[i]=arguments[i];1===a.length&&a[0].constructor&&a[0].constructor===Object?s=a[0]:(t=(e=a)[0],s=e[1]),s||(s={}),s=ee.extend({},s),t&&!s.el&&(s.el=t),u.call(this,s),Object.keys(y).forEach(function(t){Object.keys(y[t]).forEach(function(e){h.prototype[e]||(h.prototype[e]=y[t][e])})});var r=this;void 0===r.modules&&(r.modules={}),Object.keys(r.modules).forEach(function(e){var t=r.modules[e];if(t.params){var a=Object.keys(t.params)[0],i=t.params[a];if("object"!=typeof i||null===i)return;if(!(a in s&&"enabled"in i))return;!0===s[a]&&(s[a]={enabled:!0}),"object"!=typeof s[a]||"enabled"in s[a]||(s[a].enabled=!0),s[a]||(s[a]={enabled:!1})}});var n=ee.extend({},w);r.useModulesParams(n),r.params=ee.extend({},n,x,s),r.originalParams=ee.extend({},r.params),r.passedParams=ee.extend({},s);var o=(r.$=L)(r.params.el);if(t=o[0]){if(1<o.length){var l=[];return o.each(function(e,t){var a=ee.extend({},s,{el:t});l.push(new h(a))}),l}t.swiper=r,o.data("swiper",r);var d,p,c=o.children("."+r.params.wrapperClass);return ee.extend(r,{$el:o,el:t,$wrapperEl:c,wrapperEl:c[0],classNames:[],slides:L(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===r.params.direction},isVertical:function(){return"vertical"===r.params.direction},rtl:"rtl"===t.dir.toLowerCase()||"rtl"===o.css("direction"),rtlTranslate:"horizontal"===r.params.direction&&("rtl"===t.dir.toLowerCase()||"rtl"===o.css("direction")),wrongRTL:"-webkit-box"===c.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEvents:(d=["touchstart","touchmove","touchend"],p=["mousedown","mousemove","mouseup"],te.pointerEvents?p=["pointerdown","pointermove","pointerup"]:te.prefixedPointerEvents&&(p=["MSPointerDown","MSPointerMove","MSPointerUp"]),r.touchEventsTouch={start:d[0],move:d[1],end:d[2]},r.touchEventsDesktop={start:p[0],move:p[1],end:p[2]},te.touch||!r.params.simulateTouch?r.touchEventsTouch:r.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:ee.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.useModules(),r.params.init&&r.init(),r}}u&&(h.__proto__=u);var e={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return((h.prototype=Object.create(u&&u.prototype)).constructor=h).prototype.slidesPerViewDynamic=function(){var e=this,t=e.params,a=e.slides,i=e.slidesGrid,s=e.size,r=e.activeIndex,n=1;if(t.centeredSlides){for(var o,l=a[r].swiperSlideSize,d=r+1;d<a.length;d+=1)a[d]&&!o&&(n+=1,s<(l+=a[d].swiperSlideSize)&&(o=!0));for(var p=r-1;0<=p;p-=1)a[p]&&!o&&(n+=1,s<(l+=a[p].swiperSlideSize)&&(o=!0))}else for(var c=r+1;c<a.length;c+=1)i[c]-i[r]<s&&(n+=1);return n},h.prototype.update=function(){var a=this;if(a&&!a.destroyed){var e=a.snapGrid,t=a.params;t.breakpoints&&a.setBreakpoint(),a.updateSize(),a.updateSlides(),a.updateProgress(),a.updateSlidesClasses(),a.params.freeMode?(i(),a.params.autoHeight&&a.updateAutoHeight()):(("auto"===a.params.slidesPerView||1<a.params.slidesPerView)&&a.isEnd&&!a.params.centeredSlides?a.slideTo(a.slides.length-1,0,!1,!0):a.slideTo(a.activeIndex,0,!1,!0))||i(),t.watchOverflow&&e!==a.snapGrid&&a.checkOverflow(),a.emit("update")}function i(){var e=a.rtlTranslate?-1*a.translate:a.translate,t=Math.min(Math.max(e,a.maxTranslate()),a.minTranslate());a.setTranslate(t),a.updateActiveIndex(),a.updateSlidesClasses()}},h.prototype.changeDirection=function(a,e){void 0===e&&(e=!0);var t=this,i=t.params.direction;return a||(a="horizontal"===i?"vertical":"horizontal"),a===i||"horizontal"!==a&&"vertical"!==a||("vertical"===i&&(t.$el.removeClass(t.params.containerModifierClass+"vertical wp8-vertical").addClass(""+t.params.containerModifierClass+a),(I.isIE||I.isEdge)&&(te.pointerEvents||te.prefixedPointerEvents)&&t.$el.addClass(t.params.containerModifierClass+"wp8-"+a)),"horizontal"===i&&(t.$el.removeClass(t.params.containerModifierClass+"horizontal wp8-horizontal").addClass(""+t.params.containerModifierClass+a),(I.isIE||I.isEdge)&&(te.pointerEvents||te.prefixedPointerEvents)&&t.$el.addClass(t.params.containerModifierClass+"wp8-"+a)),t.params.direction=a,t.slides.each(function(e,t){"vertical"===a?t.style.width="":t.style.height=""}),t.emit("changeDirection"),e&&t.update()),t},h.prototype.init=function(){var e=this;e.initialized||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit),e.attachEvents(),e.initialized=!0,e.emit("init"))},h.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var a=this,i=a.params,s=a.$el,r=a.$wrapperEl,n=a.slides;return void 0===a.params||a.destroyed||(a.emit("beforeDestroy"),a.initialized=!1,a.detachEvents(),i.loop&&a.loopDestroy(),t&&(a.removeClasses(),s.removeAttr("style"),r.removeAttr("style"),n&&n.length&&n.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")),a.emit("destroy"),Object.keys(a.eventsListeners).forEach(function(e){a.off(e)}),!1!==e&&(a.$el[0].swiper=null,a.$el.data("swiper",null),ee.deleteProps(a)),a.destroyed=!0),null},h.extendDefaults=function(e){ee.extend(x,e)},e.extendedDefaults.get=function(){return x},e.defaults.get=function(){return w},e.Class.get=function(){return u},e.$.get=function(){return L},Object.defineProperties(h,e),h}(n),E={name:"device",proto:{device:g},static:{device:g}},S={name:"support",proto:{support:te},static:{support:te}},C={name:"browser",proto:{browser:I},static:{browser:I}},M={name:"resize",create:function(){var e=this;ee.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){J.addEventListener("resize",this.resize.resizeHandler),J.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){J.removeEventListener("resize",this.resize.resizeHandler),J.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},z={func:J.MutationObserver||J.WebkitMutationObserver,attach:function(e,t){void 0===t&&(t={});var a=this,i=new z.func(function(e){if(1!==e.length){var t=function(){a.emit("observerUpdate",e[0])};J.requestAnimationFrame?J.requestAnimationFrame(t):J.setTimeout(t,0)}else a.emit("observerUpdate",e[0])});i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),a.observer.observers.push(i)},init:function(){var e=this;if(te.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),a=0;a<t.length;a+=1)e.observer.attach(t[a]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}},P={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){ee.extend(this,{observer:{init:z.init.bind(this),attach:z.attach.bind(this),destroy:z.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},k={update:function(e){var t=this,a=t.params,i=a.slidesPerView,s=a.slidesPerGroup,r=a.centeredSlides,n=t.params.virtual,o=n.addSlidesBefore,l=n.addSlidesAfter,d=t.virtual,p=d.from,c=d.to,u=d.slides,h=d.slidesGrid,v=d.renderSlide,f=d.offset;t.updateActiveIndex();var m,g,b,w=t.activeIndex||0;m=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",r?(g=Math.floor(i/2)+s+o,b=Math.floor(i/2)+s+l):(g=i+(s-1)+o,b=s+l);var y=Math.max((w||0)-b,0),x=Math.min((w||0)+g,u.length-1),T=(t.slidesGrid[y]||0)-(t.slidesGrid[0]||0);function E(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(ee.extend(t.virtual,{from:y,to:x,offset:T,slidesGrid:t.slidesGrid}),p===y&&c===x&&!e)return t.slidesGrid!==h&&T!==f&&t.slides.css(m,T+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:T,from:y,to:x,slides:function(){for(var e=[],t=y;t<=x;t+=1)e.push(u[t]);return e}()}),void E();var S=[],C=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var M=p;M<=c;M+=1)(M<y||x<M)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+M+'"]').remove();for(var z=0;z<u.length;z+=1)y<=z&&z<=x&&(void 0===c||e?C.push(z):(c<z&&C.push(z),z<p&&S.push(z)));C.forEach(function(e){t.$wrapperEl.append(v(u[e],e))}),S.sort(function(e,t){return t-e}).forEach(function(e){t.$wrapperEl.prepend(v(u[e],e))}),t.$wrapperEl.children(".swiper-slide").css(m,T+"px"),E()},renderSlide:function(e,t){var a=this,i=a.params.virtual;if(i.cache&&a.virtual.cache[t])return a.virtual.cache[t];var s=i.renderSlide?L(i.renderSlide.call(a,e,t)):L('<div class="'+a.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return s.attr("data-swiper-slide-index")||s.attr("data-swiper-slide-index",t),i.cache&&(a.virtual.cache[t]=s),s},appendSlide:function(e){if("object"==typeof e&&"length"in e)for(var t=0;t<e.length;t+=1)e[t]&&this.virtual.slides.push(e[t]);else this.virtual.slides.push(e);this.virtual.update(!0)},prependSlide:function(e){var t=this,a=t.activeIndex,i=a+1,s=1;if(Array.isArray(e)){for(var r=0;r<e.length;r+=1)e[r]&&t.virtual.slides.unshift(e[r]);i=a+e.length,s=e.length}else t.virtual.slides.unshift(e);if(t.params.virtual.cache){var n=t.virtual.cache,o={};Object.keys(n).forEach(function(e){o[parseInt(e,10)+s]=n[e]}),t.virtual.cache=o}t.virtual.update(!0),t.slideTo(i,0)},removeSlide:function(e){var t=this;if(null!=e){var a=t.activeIndex;if(Array.isArray(e))for(var i=e.length-1;0<=i;i-=1)t.virtual.slides.splice(e[i],1),t.params.virtual.cache&&delete t.virtual.cache[e[i]],e[i]<a&&(a-=1),a=Math.max(a,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<a&&(a-=1),a=Math.max(a,0);t.virtual.update(!0),t.slideTo(a,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}},$={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){var e=this;ee.extend(e,{virtual:{update:k.update.bind(e),appendSlide:k.appendSlide.bind(e),prependSlide:k.prependSlide.bind(e),removeSlide:k.removeSlide.bind(e),removeAllSlides:k.removeAllSlides.bind(e),renderSlide:k.renderSlide.bind(e),slides:e.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){var e=this;if(e.params.virtual.enabled){e.classNames.push(e.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};ee.extend(e.params,t),ee.extend(e.originalParams,t),e.params.initialSlide||e.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},D={handle:function(e){var t=this,a=t.rtlTranslate,i=e;i.originalEvent&&(i=i.originalEvent);var s=i.keyCode||i.charCode;if(!t.allowSlideNext&&(t.isHorizontal()&&39===s||t.isVertical()&&40===s))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&37===s||t.isVertical()&&38===s))return!1;if(!(i.shiftKey||i.altKey||i.ctrlKey||i.metaKey||f.activeElement&&f.activeElement.nodeName&&("input"===f.activeElement.nodeName.toLowerCase()||"textarea"===f.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(37===s||39===s||38===s||40===s)){var r=!1;if(0<t.$el.parents("."+t.params.slideClass).length&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var n=J.innerWidth,o=J.innerHeight,l=t.$el.offset();a&&(l.left-=t.$el[0].scrollLeft);for(var d=[[l.left,l.top],[l.left+t.width,l.top],[l.left,l.top+t.height],[l.left+t.width,l.top+t.height]],p=0;p<d.length;p+=1){var c=d[p];0<=c[0]&&c[0]<=n&&0<=c[1]&&c[1]<=o&&(r=!0)}if(!r)return}t.isHorizontal()?(37!==s&&39!==s||(i.preventDefault?i.preventDefault():i.returnValue=!1),(39===s&&!a||37===s&&a)&&t.slideNext(),(37===s&&!a||39===s&&a)&&t.slidePrev()):(38!==s&&40!==s||(i.preventDefault?i.preventDefault():i.returnValue=!1),40===s&&t.slideNext(),38===s&&t.slidePrev()),t.emit("keyPress",s)}},enable:function(){this.keyboard.enabled||(L(f).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(L(f).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},O={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){ee.extend(this,{keyboard:{enabled:!1,enable:D.enable.bind(this),disable:D.disable.bind(this),handle:D.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var A={lastScrollTime:ee.now(),event:-1<J.navigator.userAgent.indexOf("firefox")?"DOMMouseScroll":function(){var e="onwheel",t=e in f;if(!t){var a=f.createElement("div");a.setAttribute(e,"return;"),t="function"==typeof a[e]}return!t&&f.implementation&&f.implementation.hasFeature&&!0!==f.implementation.hasFeature("","")&&(t=f.implementation.hasFeature("Events.wheel","3.0")),t}()?"wheel":"mousewheel",normalize:function(e){var t=0,a=0,i=0,s=0;return"detail"in e&&(a=e.detail),"wheelDelta"in e&&(a=-e.wheelDelta/120),"wheelDeltaY"in e&&(a=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=a,a=0),i=10*t,s=10*a,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||s)&&e.deltaMode&&(1===e.deltaMode?(i*=40,s*=40):(i*=800,s*=800)),i&&!t&&(t=i<1?-1:1),s&&!a&&(a=s<1?-1:1),{spinX:t,spinY:a,pixelX:i,pixelY:s}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var t=e,a=this,i=a.params.mousewheel;if(!a.mouseEntered&&!i.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var s=0,r=a.rtlTranslate?-1:1,n=A.normalize(t);if(i.forceToAxis)if(a.isHorizontal()){if(!(Math.abs(n.pixelX)>Math.abs(n.pixelY)))return!0;s=n.pixelX*r}else{if(!(Math.abs(n.pixelY)>Math.abs(n.pixelX)))return!0;s=n.pixelY}else s=Math.abs(n.pixelX)>Math.abs(n.pixelY)?-n.pixelX*r:-n.pixelY;if(0===s)return!0;if(i.invert&&(s=-s),a.params.freeMode){a.params.loop&&a.loopFix();var o=a.getTranslate()+s*i.sensitivity,l=a.isBeginning,d=a.isEnd;if(o>=a.minTranslate()&&(o=a.minTranslate()),o<=a.maxTranslate()&&(o=a.maxTranslate()),a.setTransition(0),a.setTranslate(o),a.updateProgress(),a.updateActiveIndex(),a.updateSlidesClasses(),(!l&&a.isBeginning||!d&&a.isEnd)&&a.updateSlidesClasses(),a.params.freeModeSticky&&(clearTimeout(a.mousewheel.timeout),a.mousewheel.timeout=ee.nextTick(function(){a.slideToClosest()},300)),a.emit("scroll",t),a.params.autoplay&&a.params.autoplayDisableOnInteraction&&a.autoplay.stop(),o===a.minTranslate()||o===a.maxTranslate())return!0}else{if(60<ee.now()-a.mousewheel.lastScrollTime)if(s<0)if(a.isEnd&&!a.params.loop||a.animating){if(i.releaseOnEdges)return!0}else a.slideNext(),a.emit("scroll",t);else if(a.isBeginning&&!a.params.loop||a.animating){if(i.releaseOnEdges)return!0}else a.slidePrev(),a.emit("scroll",t);a.mousewheel.lastScrollTime=(new J.Date).getTime()}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},enable:function(){var e=this;if(!A.event)return!1;if(e.mousewheel.enabled)return!1;var t=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(t=L(e.params.mousewheel.eventsTarged)),t.on("mouseenter",e.mousewheel.handleMouseEnter),t.on("mouseleave",e.mousewheel.handleMouseLeave),t.on(A.event,e.mousewheel.handle),e.mousewheel.enabled=!0},disable:function(){var e=this;if(!A.event)return!1;if(!e.mousewheel.enabled)return!1;var t=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(t=L(e.params.mousewheel.eventsTarged)),t.off(A.event,e.mousewheel.handle),!(e.mousewheel.enabled=!1)}},H={update:function(){var e=this,t=e.params.navigation;if(!e.params.loop){var a=e.navigation,i=a.$nextEl,s=a.$prevEl;s&&0<s.length&&(e.isBeginning?s.addClass(t.disabledClass):s.removeClass(t.disabledClass),s[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass)),i&&0<i.length&&(e.isEnd?i.addClass(t.disabledClass):i.removeClass(t.disabledClass),i[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){e.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(e){e.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var e,t,a=this,i=a.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(e=L(i.nextEl),a.params.uniqueNavElements&&"string"==typeof i.nextEl&&1<e.length&&1===a.$el.find(i.nextEl).length&&(e=a.$el.find(i.nextEl))),i.prevEl&&(t=L(i.prevEl),a.params.uniqueNavElements&&"string"==typeof i.prevEl&&1<t.length&&1===a.$el.find(i.prevEl).length&&(t=a.$el.find(i.prevEl))),e&&0<e.length&&e.on("click",a.navigation.onNextClick),t&&0<t.length&&t.on("click",a.navigation.onPrevClick),ee.extend(a.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this,t=e.navigation,a=t.$nextEl,i=t.$prevEl;a&&a.length&&(a.off("click",e.navigation.onNextClick),a.removeClass(e.params.navigation.disabledClass)),i&&i.length&&(i.off("click",e.navigation.onPrevClick),i.removeClass(e.params.navigation.disabledClass))}},N={update:function(){var e=this,t=e.rtl,s=e.params.pagination;if(s.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el,n=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>a-1-2*e.loopedSlides&&(r-=a-2*e.loopedSlides),n-1<r&&(r-=n),r<0&&"bullets"!==e.params.paginationType&&(r=n+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===s.type&&e.pagination.bullets&&0<e.pagination.bullets.length){var o,l,d,p=e.pagination.bullets;if(s.dynamicBullets&&(e.pagination.bulletSize=p.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),i.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(s.dynamicMainBullets+4)+"px"),1<s.dynamicMainBullets&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>s.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=s.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),o=r-e.pagination.dynamicBulletIndex,d=((l=o+(Math.min(p.length,s.dynamicMainBullets)-1))+o)/2),p.removeClass(s.bulletActiveClass+" "+s.bulletActiveClass+"-next "+s.bulletActiveClass+"-next-next "+s.bulletActiveClass+"-prev "+s.bulletActiveClass+"-prev-prev "+s.bulletActiveClass+"-main"),1<i.length)p.each(function(e,t){var a=L(t),i=a.index();i===r&&a.addClass(s.bulletActiveClass),s.dynamicBullets&&(o<=i&&i<=l&&a.addClass(s.bulletActiveClass+"-main"),i===o&&a.prev().addClass(s.bulletActiveClass+"-prev").prev().addClass(s.bulletActiveClass+"-prev-prev"),i===l&&a.next().addClass(s.bulletActiveClass+"-next").next().addClass(s.bulletActiveClass+"-next-next"))});else if(p.eq(r).addClass(s.bulletActiveClass),s.dynamicBullets){for(var c=p.eq(o),u=p.eq(l),h=o;h<=l;h+=1)p.eq(h).addClass(s.bulletActiveClass+"-main");c.prev().addClass(s.bulletActiveClass+"-prev").prev().addClass(s.bulletActiveClass+"-prev-prev"),u.next().addClass(s.bulletActiveClass+"-next").next().addClass(s.bulletActiveClass+"-next-next")}if(s.dynamicBullets){var v=Math.min(p.length,s.dynamicMainBullets+4),f=(e.pagination.bulletSize*v-e.pagination.bulletSize)/2-d*e.pagination.bulletSize,m=t?"right":"left";p.css(e.isHorizontal()?m:"top",f+"px")}}if("fraction"===s.type&&(i.find("."+s.currentClass).text(s.formatFractionCurrent(r+1)),i.find("."+s.totalClass).text(s.formatFractionTotal(n))),"progressbar"===s.type){var g;g=s.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var b=(r+1)/n,w=1,y=1;"horizontal"===g?w=b:y=b,i.find("."+s.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+w+") scaleY("+y+")").transition(e.params.speed)}"custom"===s.type&&s.renderCustom?(i.html(s.renderCustom(e,r+1,n)),e.emit("paginationRender",e,i[0])):e.emit("paginationUpdate",e,i[0]),i[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](s.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el,s="";if("bullets"===t.type){for(var r=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length,n=0;n<r;n+=1)t.renderBullet?s+=t.renderBullet.call(e,n,t.bulletClass):s+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";i.html(s),e.pagination.bullets=i.find("."+t.bulletClass)}"fraction"===t.type&&(s=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',i.html(s)),"progressbar"===t.type&&(s=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',i.html(s)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var a=this,e=a.params.pagination;if(e.el){var t=L(e.el);0!==t.length&&(a.params.uniqueNavElements&&"string"==typeof e.el&&1<t.length&&1===a.$el.find(e.el).length&&(t=a.$el.find(e.el)),"bullets"===e.type&&e.clickable&&t.addClass(e.clickableClass),t.addClass(e.modifierClass+e.type),"bullets"===e.type&&e.dynamicBullets&&(t.addClass(""+e.modifierClass+e.type+"-dynamic"),a.pagination.dynamicBulletIndex=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&t.addClass(e.progressbarOppositeClass),e.clickable&&t.on("click","."+e.bulletClass,function(e){e.preventDefault();var t=L(this).index()*a.params.slidesPerGroup;a.params.loop&&(t+=a.loopedSlides),a.slideTo(t)}),ee.extend(a.pagination,{$el:t,el:t[0]}))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a=e.pagination.$el;a.removeClass(t.hiddenClass),a.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&a.off("click","."+t.bulletClass)}}},G={setTranslate:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,a=e.rtlTranslate,i=e.progress,s=t.dragSize,r=t.trackSize,n=t.$dragEl,o=t.$el,l=e.params.scrollbar,d=s,p=(r-s)*i;a?0<(p=-p)?(d=s-p,p=0):r<-p+s&&(d=r+p):p<0?(d=s+p,p=0):r<p+s&&(d=r-p),e.isHorizontal()?(te.transforms3d?n.transform("translate3d("+p+"px, 0, 0)"):n.transform("translateX("+p+"px)"),n[0].style.width=d+"px"):(te.transforms3d?n.transform("translate3d(0px, "+p+"px, 0)"):n.transform("translateY("+p+"px)"),n[0].style.height=d+"px"),l.hide&&(clearTimeout(e.scrollbar.timeout),o[0].style.opacity=1,e.scrollbar.timeout=setTimeout(function(){o[0].style.opacity=0,o.transition(400)},1e3))}},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,a=t.$dragEl,i=t.$el;a[0].style.width="",a[0].style.height="";var s,r=e.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,n=e.size/e.virtualSize,o=n*(r/e.size);s="auto"===e.params.scrollbar.dragSize?r*n:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?a[0].style.width=s+"px":a[0].style.height=s+"px",i[0].style.display=1<=n?"none":"",e.params.scrollbar.hide&&(i[0].style.opacity=0),ee.extend(t,{trackSize:r,divider:n,moveDivider:o,dragSize:s}),t.$el[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},setDragPosition:function(e){var t,a=this,i=a.scrollbar,s=a.rtlTranslate,r=i.$el,n=i.dragSize,o=i.trackSize;t=((a.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY)-r.offset()[a.isHorizontal()?"left":"top"]-n/2)/(o-n),t=Math.max(Math.min(t,1),0),s&&(t=1-t);var l=a.minTranslate()+(a.maxTranslate()-a.minTranslate())*t;a.updateProgress(l),a.setTranslate(l),a.updateActiveIndex(),a.updateSlidesClasses()},onDragStart:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar,s=t.$wrapperEl,r=i.$el,n=i.$dragEl;t.scrollbar.isTouched=!0,e.preventDefault(),e.stopPropagation(),s.transition(100),n.transition(100),i.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),r.transition(0),a.hide&&r.css("opacity",1),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,a=this.$wrapperEl,i=t.$el,s=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),a.transition(0),i.transition(0),s.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,a.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=ee.nextTick(function(){i.css("opacity",0),i.transition(400)},1e3)),t.emit("scrollbarDragEnd",e),a.snapOnRelease&&t.slideToClosest())},enableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,a=e.touchEventsTouch,i=e.touchEventsDesktop,s=e.params,r=t.$el[0],n=!(!te.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},o=!(!te.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};te.touch?(r.addEventListener(a.start,e.scrollbar.onDragStart,n),r.addEventListener(a.move,e.scrollbar.onDragMove,n),r.addEventListener(a.end,e.scrollbar.onDragEnd,o)):(r.addEventListener(i.start,e.scrollbar.onDragStart,n),f.addEventListener(i.move,e.scrollbar.onDragMove,n),f.addEventListener(i.end,e.scrollbar.onDragEnd,o))}},disableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,a=e.touchEventsTouch,i=e.touchEventsDesktop,s=e.params,r=t.$el[0],n=!(!te.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},o=!(!te.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};te.touch?(r.removeEventListener(a.start,e.scrollbar.onDragStart,n),r.removeEventListener(a.move,e.scrollbar.onDragMove,n),r.removeEventListener(a.end,e.scrollbar.onDragEnd,o)):(r.removeEventListener(i.start,e.scrollbar.onDragStart,n),f.removeEventListener(i.move,e.scrollbar.onDragMove,n),f.removeEventListener(i.end,e.scrollbar.onDragEnd,o))}},init:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,a=e.$el,i=e.params.scrollbar,s=L(i.el);e.params.uniqueNavElements&&"string"==typeof i.el&&1<s.length&&1===a.find(i.el).length&&(s=a.find(i.el));var r=s.find("."+e.params.scrollbar.dragClass);0===r.length&&(r=L('<div class="'+e.params.scrollbar.dragClass+'"></div>'),s.append(r)),ee.extend(t,{$el:s,el:s[0],$dragEl:r,dragEl:r[0]}),i.draggable&&t.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},B={setTransform:function(e,t){var a=this.rtl,i=L(e),s=a?-1:1,r=i.attr("data-swiper-parallax")||"0",n=i.attr("data-swiper-parallax-x"),o=i.attr("data-swiper-parallax-y"),l=i.attr("data-swiper-parallax-scale"),d=i.attr("data-swiper-parallax-opacity");if(n||o?(n=n||"0",o=o||"0"):this.isHorizontal()?(n=r,o="0"):(o=r,n="0"),n=0<=n.indexOf("%")?parseInt(n,10)*t*s+"%":n*t*s+"px",o=0<=o.indexOf("%")?parseInt(o,10)*t+"%":o*t+"px",null!=d){var p=d-(d-1)*(1-Math.abs(t));i[0].style.opacity=p}if(null==l)i.transform("translate3d("+n+", "+o+", 0px)");else{var c=l-(l-1)*(1-Math.abs(t));i.transform("translate3d("+n+", "+o+", 0px) scale("+c+")")}},setTranslate:function(){var i=this,e=i.$el,t=i.slides,s=i.progress,r=i.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){i.parallax.setTransform(t,s)}),t.each(function(e,t){var a=t.progress;1<i.params.slidesPerGroup&&"auto"!==i.params.slidesPerView&&(a+=Math.ceil(e/2)-s*(r.length-1)),a=Math.min(Math.max(a,-1),1),L(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){i.parallax.setTransform(t,a)})})},setTransition:function(s){void 0===s&&(s=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){var a=L(t),i=parseInt(a.attr("data-swiper-parallax-duration"),10)||s;0===s&&(i=0),a.transition(i)})}},X={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,a=e.targetTouches[0].pageY,i=e.targetTouches[1].pageX,s=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(i-t,2)+Math.pow(s-a,2))},onGestureStart:function(e){var t=this,a=t.params.zoom,i=t.zoom,s=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!te.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,s.scaleStart=X.getDistanceBetweenTouches(e)}s.$slideEl&&s.$slideEl.length||(s.$slideEl=L(e.target).closest(".swiper-slide"),0===s.$slideEl.length&&(s.$slideEl=t.slides.eq(t.activeIndex)),s.$imageEl=s.$slideEl.find("img, svg, canvas"),s.$imageWrapEl=s.$imageEl.parent("."+a.containerClass),s.maxRatio=s.$imageWrapEl.attr("data-swiper-zoom")||a.maxRatio,0!==s.$imageWrapEl.length)?(s.$imageEl.transition(0),t.zoom.isScaling=!0):s.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,a=this.zoom,i=a.gesture;if(!te.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;a.fakeGestureMoved=!0,i.scaleMove=X.getDistanceBetweenTouches(e)}i.$imageEl&&0!==i.$imageEl.length&&(a.scale=te.gestures?e.scale*a.currentScale:i.scaleMove/i.scaleStart*a.currentScale,a.scale>i.maxRatio&&(a.scale=i.maxRatio-1+Math.pow(a.scale-i.maxRatio+1,.5)),a.scale<t.minRatio&&(a.scale=t.minRatio+1-Math.pow(t.minRatio-a.scale+1,.5)),i.$imageEl.transform("translate3d(0,0,0) scale("+a.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,a=this.zoom,i=a.gesture;if(!te.gestures){if(!a.fakeGestureTouched||!a.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!g.android)return;a.fakeGestureTouched=!1,a.fakeGestureMoved=!1}i.$imageEl&&0!==i.$imageEl.length&&(a.scale=Math.max(Math.min(a.scale,i.maxRatio),t.minRatio),i.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+a.scale+")"),a.currentScale=a.scale,a.isScaling=!1,1===a.scale&&(i.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,a=t.gesture,i=t.image;a.$imageEl&&0!==a.$imageEl.length&&(i.isTouched||(g.android&&e.preventDefault(),i.isTouched=!0,i.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,i.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this,a=t.zoom,i=a.gesture,s=a.image,r=a.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(t.allowClick=!1,s.isTouched&&i.$slideEl)){s.isMoved||(s.width=i.$imageEl[0].offsetWidth,s.height=i.$imageEl[0].offsetHeight,s.startX=ee.getTranslate(i.$imageWrapEl[0],"x")||0,s.startY=ee.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),t.rtl&&(s.startX=-s.startX,s.startY=-s.startY));var n=s.width*a.scale,o=s.height*a.scale;if(!(n<i.slideWidth&&o<i.slideHeight)){if(s.minX=Math.min(i.slideWidth/2-n/2,0),s.maxX=-s.minX,s.minY=Math.min(i.slideHeight/2-o/2,0),s.maxY=-s.minY,s.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!s.isMoved&&!a.isScaling){if(t.isHorizontal()&&(Math.floor(s.minX)===Math.floor(s.startX)&&s.touchesCurrent.x<s.touchesStart.x||Math.floor(s.maxX)===Math.floor(s.startX)&&s.touchesCurrent.x>s.touchesStart.x))return void(s.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(s.minY)===Math.floor(s.startY)&&s.touchesCurrent.y<s.touchesStart.y||Math.floor(s.maxY)===Math.floor(s.startY)&&s.touchesCurrent.y>s.touchesStart.y))return void(s.isTouched=!1)}e.preventDefault(),e.stopPropagation(),s.isMoved=!0,s.currentX=s.touchesCurrent.x-s.touchesStart.x+s.startX,s.currentY=s.touchesCurrent.y-s.touchesStart.y+s.startY,s.currentX<s.minX&&(s.currentX=s.minX+1-Math.pow(s.minX-s.currentX+1,.8)),s.currentX>s.maxX&&(s.currentX=s.maxX-1+Math.pow(s.currentX-s.maxX+1,.8)),s.currentY<s.minY&&(s.currentY=s.minY+1-Math.pow(s.minY-s.currentY+1,.8)),s.currentY>s.maxY&&(s.currentY=s.maxY-1+Math.pow(s.currentY-s.maxY+1,.8)),r.prevPositionX||(r.prevPositionX=s.touchesCurrent.x),r.prevPositionY||(r.prevPositionY=s.touchesCurrent.y),r.prevTime||(r.prevTime=Date.now()),r.x=(s.touchesCurrent.x-r.prevPositionX)/(Date.now()-r.prevTime)/2,r.y=(s.touchesCurrent.y-r.prevPositionY)/(Date.now()-r.prevTime)/2,Math.abs(s.touchesCurrent.x-r.prevPositionX)<2&&(r.x=0),Math.abs(s.touchesCurrent.y-r.prevPositionY)<2&&(r.y=0),r.prevPositionX=s.touchesCurrent.x,r.prevPositionY=s.touchesCurrent.y,r.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+s.currentX+"px, "+s.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,a=e.image,i=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!a.isTouched||!a.isMoved)return a.isTouched=!1,void(a.isMoved=!1);a.isTouched=!1,a.isMoved=!1;var s=300,r=300,n=i.x*s,o=a.currentX+n,l=i.y*r,d=a.currentY+l;0!==i.x&&(s=Math.abs((o-a.currentX)/i.x)),0!==i.y&&(r=Math.abs((d-a.currentY)/i.y));var p=Math.max(s,r);a.currentX=o,a.currentY=d;var c=a.width*e.scale,u=a.height*e.scale;a.minX=Math.min(t.slideWidth/2-c/2,0),a.maxX=-a.minX,a.minY=Math.min(t.slideHeight/2-u/2,0),a.maxY=-a.minY,a.currentX=Math.max(Math.min(a.currentX,a.maxX),a.minX),a.currentY=Math.max(Math.min(a.currentY,a.maxY),a.minY),t.$imageWrapEl.transition(p).transform("translate3d("+a.currentX+"px, "+a.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,a,i,s,r,n,o,l,d,p,c,u,h,v,f,m,g=this,b=g.zoom,w=g.params.zoom,y=b.gesture,x=b.image;(y.$slideEl||(y.$slideEl=g.clickedSlide?L(g.clickedSlide):g.slides.eq(g.activeIndex),y.$imageEl=y.$slideEl.find("img, svg, canvas"),y.$imageWrapEl=y.$imageEl.parent("."+w.containerClass)),y.$imageEl&&0!==y.$imageEl.length)&&(y.$slideEl.addClass(""+w.zoomedSlideClass),void 0===x.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,a="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=x.touchesStart.x,a=x.touchesStart.y),b.scale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,b.currentScale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,e?(f=y.$slideEl[0].offsetWidth,m=y.$slideEl[0].offsetHeight,i=y.$slideEl.offset().left+f/2-t,s=y.$slideEl.offset().top+m/2-a,o=y.$imageEl[0].offsetWidth,l=y.$imageEl[0].offsetHeight,d=o*b.scale,p=l*b.scale,h=-(c=Math.min(f/2-d/2,0)),v=-(u=Math.min(m/2-p/2,0)),(r=i*b.scale)<c&&(r=c),h<r&&(r=h),(n=s*b.scale)<u&&(n=u),v<n&&(n=v)):n=r=0,y.$imageWrapEl.transition(300).transform("translate3d("+r+"px, "+n+"px,0)"),y.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+b.scale+")"))},out:function(){var e=this,t=e.zoom,a=e.params.zoom,i=t.gesture;i.$slideEl||(i.$slideEl=e.clickedSlide?L(e.clickedSlide):e.slides.eq(e.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas"),i.$imageWrapEl=i.$imageEl.parent("."+a.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(t.scale=1,t.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+a.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var e=this,t=e.zoom;if(!t.enabled){t.enabled=!0;var a=!("touchstart"!==e.touchEvents.start||!te.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};te.gestures?(e.$wrapperEl.on("gesturestart",".swiper-slide",t.onGestureStart,a),e.$wrapperEl.on("gesturechange",".swiper-slide",t.onGestureChange,a),e.$wrapperEl.on("gestureend",".swiper-slide",t.onGestureEnd,a)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,".swiper-slide",t.onGestureStart,a),e.$wrapperEl.on(e.touchEvents.move,".swiper-slide",t.onGestureChange,a),e.$wrapperEl.on(e.touchEvents.end,".swiper-slide",t.onGestureEnd,a)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){e.zoom.enabled=!1;var a=!("touchstart"!==e.touchEvents.start||!te.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};te.gestures?(e.$wrapperEl.off("gesturestart",".swiper-slide",t.onGestureStart,a),e.$wrapperEl.off("gesturechange",".swiper-slide",t.onGestureChange,a),e.$wrapperEl.off("gestureend",".swiper-slide",t.onGestureEnd,a)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,".swiper-slide",t.onGestureStart,a),e.$wrapperEl.off(e.touchEvents.move,".swiper-slide",t.onGestureChange,a),e.$wrapperEl.off(e.touchEvents.end,".swiper-slide",t.onGestureEnd,a)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove)}}},Y={loadInSlide:function(e,l){void 0===l&&(l=!0);var d=this,p=d.params.lazy;if(void 0!==e&&0!==d.slides.length){var c=d.virtual&&d.params.virtual.enabled?d.$wrapperEl.children("."+d.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):d.slides.eq(e),t=c.find("."+p.elementClass+":not(."+p.loadedClass+"):not(."+p.loadingClass+")");!c.hasClass(p.elementClass)||c.hasClass(p.loadedClass)||c.hasClass(p.loadingClass)||(t=t.add(c[0])),0!==t.length&&t.each(function(e,t){var i=L(t);i.addClass(p.loadingClass);var s=i.attr("data-background"),r=i.attr("data-src"),n=i.attr("data-srcset"),o=i.attr("data-sizes");d.loadImage(i[0],r||s,n,o,!1,function(){if(null!=d&&d&&(!d||d.params)&&!d.destroyed){if(s?(i.css("background-image",'url("'+s+'")'),i.removeAttr("data-background")):(n&&(i.attr("srcset",n),i.removeAttr("data-srcset")),o&&(i.attr("sizes",o),i.removeAttr("data-sizes")),r&&(i.attr("src",r),i.removeAttr("data-src"))),i.addClass(p.loadedClass).removeClass(p.loadingClass),c.find("."+p.preloaderClass).remove(),d.params.loop&&l){var e=c.attr("data-swiper-slide-index");if(c.hasClass(d.params.slideDuplicateClass)){var t=d.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+d.params.slideDuplicateClass+")");d.lazy.loadInSlide(t.index(),!1)}else{var a=d.$wrapperEl.children("."+d.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');d.lazy.loadInSlide(a.index(),!1)}}d.emit("lazyImageReady",c[0],i[0])}}),d.emit("lazyImageLoad",c[0],i[0])})}},load:function(){var i=this,t=i.$wrapperEl,a=i.params,s=i.slides,e=i.activeIndex,r=i.virtual&&a.virtual.enabled,n=a.lazy,o=a.slidesPerView;function l(e){if(r){if(t.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(s[e])return!0;return!1}function d(e){return r?L(e).attr("data-swiper-slide-index"):L(e).index()}if("auto"===o&&(o=0),i.lazy.initialImageLoaded||(i.lazy.initialImageLoaded=!0),i.params.watchSlidesVisibility)t.children("."+a.slideVisibleClass).each(function(e,t){var a=r?L(t).attr("data-swiper-slide-index"):L(t).index();i.lazy.loadInSlide(a)});else if(1<o)for(var p=e;p<e+o;p+=1)l(p)&&i.lazy.loadInSlide(p);else i.lazy.loadInSlide(e);if(n.loadPrevNext)if(1<o||n.loadPrevNextAmount&&1<n.loadPrevNextAmount){for(var c=n.loadPrevNextAmount,u=o,h=Math.min(e+u+Math.max(c,u),s.length),v=Math.max(e-Math.max(u,c),0),f=e+o;f<h;f+=1)l(f)&&i.lazy.loadInSlide(f);for(var m=v;m<e;m+=1)l(m)&&i.lazy.loadInSlide(m)}else{var g=t.children("."+a.slideNextClass);0<g.length&&i.lazy.loadInSlide(d(g));var b=t.children("."+a.slidePrevClass);0<b.length&&i.lazy.loadInSlide(d(b))}}},V={LinearSpline:function(e,t){var a,i,s,r,n,o=function(e,t){for(i=-1,a=e.length;1<a-i;)e[s=a+i>>1]<=t?i=s:a=s;return a};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(n=o(this.x,e),r=n-1,(e-this.x[r])*(this.y[n]-this.y[r])/(this.x[n]-this.x[r])+this.y[r]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new V.LinearSpline(t.slidesGrid,e.slidesGrid):new V.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var a,i,s=this,r=s.controller.control;function n(e){var t=s.rtlTranslate?-s.translate:s.translate;"slide"===s.params.controller.by&&(s.controller.getInterpolateFunction(e),i=-s.controller.spline.interpolate(-t)),i&&"container"!==s.params.controller.by||(a=(e.maxTranslate()-e.minTranslate())/(s.maxTranslate()-s.minTranslate()),i=(t-s.minTranslate())*a+e.minTranslate()),s.params.controller.inverse&&(i=e.maxTranslate()-i),e.updateProgress(i),e.setTranslate(i,s),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(r))for(var o=0;o<r.length;o+=1)r[o]!==t&&r[o]instanceof T&&n(r[o]);else r instanceof T&&t!==r&&n(r)},setTransition:function(t,e){var a,i=this,s=i.controller.control;function r(e){e.setTransition(t,i),0!==t&&(e.transitionStart(),e.params.autoHeight&&ee.nextTick(function(){e.updateAutoHeight()}),e.$wrapperEl.transitionEnd(function(){s&&(e.params.loop&&"slide"===i.params.controller.by&&e.loopFix(),e.transitionEnd())}))}if(Array.isArray(s))for(a=0;a<s.length;a+=1)s[a]!==e&&s[a]instanceof T&&r(s[a]);else s instanceof T&&e!==s&&r(s)}},F={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t=this,a=t.params.a11y;if(13===e.keyCode){var i=L(e.target);t.navigation&&t.navigation.$nextEl&&i.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(a.lastSlideMessage):t.a11y.notify(a.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&i.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(a.firstSlideMessage):t.a11y.notify(a.prevSlideMessage)),t.pagination&&i.is("."+t.params.pagination.bulletClass)&&i[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e=this;if(!e.params.loop){var t=e.navigation,a=t.$nextEl,i=t.$prevEl;i&&0<i.length&&(e.isBeginning?e.a11y.disableEl(i):e.a11y.enableEl(i)),a&&0<a.length&&(e.isEnd?e.a11y.disableEl(a):e.a11y.enableEl(a))}},updatePagination:function(){var i=this,s=i.params.a11y;i.pagination&&i.params.pagination.clickable&&i.pagination.bullets&&i.pagination.bullets.length&&i.pagination.bullets.each(function(e,t){var a=L(t);i.a11y.makeElFocusable(a),i.a11y.addElRole(a,"button"),i.a11y.addElLabel(a,s.paginationBulletMessage.replace(/{{index}}/,a.index()+1))})},init:function(){var e=this;e.$el.append(e.a11y.liveRegion);var t,a,i=e.params.a11y;e.navigation&&e.navigation.$nextEl&&(t=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(a=e.navigation.$prevEl),t&&(e.a11y.makeElFocusable(t),e.a11y.addElRole(t,"button"),e.a11y.addElLabel(t,i.nextSlideMessage),t.on("keydown",e.a11y.onEnterKey)),a&&(e.a11y.makeElFocusable(a),e.a11y.addElRole(a,"button"),e.a11y.addElLabel(a,i.prevSlideMessage),a.on("keydown",e.a11y.onEnterKey)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass,e.a11y.onEnterKey)},destroy:function(){var e,t,a=this;a.a11y.liveRegion&&0<a.a11y.liveRegion.length&&a.a11y.liveRegion.remove(),a.navigation&&a.navigation.$nextEl&&(e=a.navigation.$nextEl),a.navigation&&a.navigation.$prevEl&&(t=a.navigation.$prevEl),e&&e.off("keydown",a.a11y.onEnterKey),t&&t.off("keydown",a.a11y.onEnterKey),a.pagination&&a.params.pagination.clickable&&a.pagination.bullets&&a.pagination.bullets.length&&a.pagination.$el.off("keydown","."+a.params.pagination.bulletClass,a.a11y.onEnterKey)}},R={init:function(){var e=this;if(e.params.history){if(!J.history||!J.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);var t=e.history;t.initialized=!0,t.paths=R.getPathValues(),(t.paths.key||t.paths.value)&&(t.scrollToSlide(0,t.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||J.addEventListener("popstate",e.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||J.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=R.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=J.location.pathname.slice(1).split("/").filter(function(e){return""!==e}),t=e.length;return{key:e[t-2],value:e[t-1]}},setHistory:function(e,t){if(this.history.initialized&&this.params.history.enabled){var a=this.slides.eq(t),i=R.slugify(a.attr("data-history"));J.location.pathname.includes(e)||(i=e+"/"+i);var s=J.history.state;s&&s.value===i||(this.params.history.replaceState?J.history.replaceState({value:i},null,i):J.history.pushState({value:i},null,i))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,a){var i=this;if(t)for(var s=0,r=i.slides.length;s<r;s+=1){var n=i.slides.eq(s);if(R.slugify(n.attr("data-history"))===t&&!n.hasClass(i.params.slideDuplicateClass)){var o=n.index();i.slideTo(o,e,a)}}else i.slideTo(0,e,a)}},q={onHashCange:function(){var e=this,t=f.location.hash.replace("#","");if(t!==e.slides.eq(e.activeIndex).attr("data-hash")){var a=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+t+'"]').index();if(void 0===a)return;e.slideTo(a)}},setHash:function(){var e=this;if(e.hashNavigation.initialized&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&J.history&&J.history.replaceState)J.history.replaceState(null,null,"#"+e.slides.eq(e.activeIndex).attr("data-hash")||"");else{var t=e.slides.eq(e.activeIndex),a=t.attr("data-hash")||t.attr("data-history");f.location.hash=a||""}},init:function(){var e=this;if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var t=f.location.hash.replace("#","");if(t)for(var a=0,i=e.slides.length;a<i;a+=1){var s=e.slides.eq(a);if((s.attr("data-hash")||s.attr("data-history"))===t&&!s.hasClass(e.params.slideDuplicateClass)){var r=s.index();e.slideTo(r,0,e.params.runCallbacksOnInit,!0)}}e.params.hashNavigation.watchState&&L(J).on("hashchange",e.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&L(J).off("hashchange",this.hashNavigation.onHashCange)}},W={run:function(){var e=this,t=e.slides.eq(e.activeIndex),a=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(a=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),e.autoplay.timeout=ee.nextTick(function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay"))},a)},start:function(){var e=this;return void 0===e.autoplay.timeout&&(!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0))},stop:function(){var e=this;return!!e.autoplay.running&&(void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?(t.$wrapperEl[0].addEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].addEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd)):(t.autoplay.paused=!1,t.autoplay.run())))}},j={setTranslate:function(){for(var e=this,t=e.slides,a=0;a<t.length;a+=1){var i=e.slides.eq(a),s=-i[0].swiperSlideOffset;e.params.virtualTranslate||(s-=e.translate);var r=0;e.isHorizontal()||(r=s,s=0);var n=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:n}).transform("translate3d("+s+"px, "+r+"px, 0px)")}},setTransition:function(e){var a=this,t=a.slides,i=a.$wrapperEl;if(t.transition(e),a.params.virtualTranslate&&0!==e){var s=!1;t.transitionEnd(function(){if(!s&&a&&!a.destroyed){s=!0,a.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)i.trigger(e[t])}})}}},U={setTranslate:function(){var e,t=this,a=t.$el,i=t.$wrapperEl,s=t.slides,r=t.width,n=t.height,o=t.rtlTranslate,l=t.size,d=t.params.cubeEffect,p=t.isHorizontal(),c=t.virtual&&t.params.virtual.enabled,u=0;d.shadow&&(p?(0===(e=i.find(".swiper-cube-shadow")).length&&(e=L('<div class="swiper-cube-shadow"></div>'),i.append(e)),e.css({height:r+"px"})):0===(e=a.find(".swiper-cube-shadow")).length&&(e=L('<div class="swiper-cube-shadow"></div>'),a.append(e)));for(var h=0;h<s.length;h+=1){var v=s.eq(h),f=h;c&&(f=parseInt(v.attr("data-swiper-slide-index"),10));var m=90*f,g=Math.floor(m/360);o&&(m=-m,g=Math.floor(-m/360));var b=Math.max(Math.min(v[0].progress,1),-1),w=0,y=0,x=0;f%4==0?(w=4*-g*l,x=0):(f-1)%4==0?(w=0,x=4*-g*l):(f-2)%4==0?(w=l+4*g*l,x=l):(f-3)%4==0&&(w=-l,x=3*l+4*l*g),o&&(w=-w),p||(y=w,w=0);var T="rotateX("+(p?0:-m)+"deg) rotateY("+(p?m:0)+"deg) translate3d("+w+"px, "+y+"px, "+x+"px)";if(b<=1&&-1<b&&(u=90*f+90*b,o&&(u=90*-f-90*b)),v.transform(T),d.slideShadows){var E=p?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),S=p?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom");0===E.length&&(E=L('<div class="swiper-slide-shadow-'+(p?"left":"top")+'"></div>'),v.append(E)),0===S.length&&(S=L('<div class="swiper-slide-shadow-'+(p?"right":"bottom")+'"></div>'),v.append(S)),E.length&&(E[0].style.opacity=Math.max(-b,0)),S.length&&(S[0].style.opacity=Math.max(b,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),d.shadow)if(p)e.transform("translate3d(0px, "+(r/2+d.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.shadowScale+")");else{var C=Math.abs(u)-90*Math.floor(Math.abs(u)/90),M=1.5-(Math.sin(2*C*Math.PI/360)/2+Math.cos(2*C*Math.PI/360)/2),z=d.shadowScale,P=d.shadowScale/M,k=d.shadowOffset;e.transform("scale3d("+z+", 1, "+P+") translate3d(0px, "+(n/2+k)+"px, "+-n/2/P+"px) rotateX(-90deg)")}var $=I.isSafari||I.isUiWebView?-l/2:0;i.transform("translate3d(0px,0,"+$+"px) rotateX("+(t.isHorizontal()?0:u)+"deg) rotateY("+(t.isHorizontal()?-u:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},K={setTranslate:function(){for(var e=this,t=e.slides,a=e.rtlTranslate,i=0;i<t.length;i+=1){var s=t.eq(i),r=s[0].progress;e.params.flipEffect.limitRotation&&(r=Math.max(Math.min(s[0].progress,1),-1));var n=-180*r,o=0,l=-s[0].swiperSlideOffset,d=0;if(e.isHorizontal()?a&&(n=-n):(d=l,o=-n,n=l=0),s[0].style.zIndex=-Math.abs(Math.round(r))+t.length,e.params.flipEffect.slideShadows){var p=e.isHorizontal()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top"),c=e.isHorizontal()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom");0===p.length&&(p=L('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),s.append(p)),0===c.length&&(c=L('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),s.append(c)),p.length&&(p[0].style.opacity=Math.max(-r,0)),c.length&&(c[0].style.opacity=Math.max(r,0))}s.transform("translate3d("+l+"px, "+d+"px, 0px) rotateX("+o+"deg) rotateY("+n+"deg)")}},setTransition:function(e){var a=this,t=a.slides,i=a.activeIndex,s=a.$wrapperEl;if(t.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),a.params.virtualTranslate&&0!==e){var r=!1;t.eq(i).transitionEnd(function(){if(!r&&a&&!a.destroyed){r=!0,a.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)s.trigger(e[t])}})}}},_={setTranslate:function(){for(var e=this,t=e.width,a=e.height,i=e.slides,s=e.$wrapperEl,r=e.slidesSizesGrid,n=e.params.coverflowEffect,o=e.isHorizontal(),l=e.translate,d=o?t/2-l:a/2-l,p=o?n.rotate:-n.rotate,c=n.depth,u=0,h=i.length;u<h;u+=1){var v=i.eq(u),f=r[u],m=(d-v[0].swiperSlideOffset-f/2)/f*n.modifier,g=o?p*m:0,b=o?0:p*m,w=-c*Math.abs(m),y=o?0:n.stretch*m,x=o?n.stretch*m:0;Math.abs(x)<.001&&(x=0),Math.abs(y)<.001&&(y=0),Math.abs(w)<.001&&(w=0),Math.abs(g)<.001&&(g=0),Math.abs(b)<.001&&(b=0);var T="translate3d("+x+"px,"+y+"px,"+w+"px)  rotateX("+b+"deg) rotateY("+g+"deg)";if(v.transform(T),v[0].style.zIndex=1-Math.abs(Math.round(m)),n.slideShadows){var E=o?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),S=o?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom");0===E.length&&(E=L('<div class="swiper-slide-shadow-'+(o?"left":"top")+'"></div>'),v.append(E)),0===S.length&&(S=L('<div class="swiper-slide-shadow-'+(o?"right":"bottom")+'"></div>'),v.append(S)),E.length&&(E[0].style.opacity=0<m?m:0),S.length&&(S[0].style.opacity=0<-m?-m:0)}}(te.pointerEvents||te.prefixedPointerEvents)&&(s[0].style.perspectiveOrigin=d+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},Z={init:function(){var e=this,t=e.params.thumbs,a=e.constructor;t.swiper instanceof a?(e.thumbs.swiper=t.swiper,ee.extend(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),ee.extend(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):ee.isObject(t.swiper)&&(e.thumbs.swiper=new a(ee.extend({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick)},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var a=t.clickedIndex,i=t.clickedSlide;if(!(i&&L(i).hasClass(e.params.thumbs.slideThumbActiveClass)||null==a)){var s;if(s=t.params.loop?parseInt(L(t.clickedSlide).attr("data-swiper-slide-index"),10):a,e.params.loop){var r=e.activeIndex;e.slides.eq(r).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,r=e.activeIndex);var n=e.slides.eq(r).prevAll('[data-swiper-slide-index="'+s+'"]').eq(0).index(),o=e.slides.eq(r).nextAll('[data-swiper-slide-index="'+s+'"]').eq(0).index();s=void 0===n?o:void 0===o?n:o-r<r-n?o:n}e.slideTo(s)}}},update:function(e){var t=this,a=t.thumbs.swiper;if(a){var i="auto"===a.params.slidesPerView?a.slidesPerViewDynamic():a.params.slidesPerView;if(t.realIndex!==a.realIndex){var s,r=a.activeIndex;if(a.params.loop){a.slides.eq(r).hasClass(a.params.slideDuplicateClass)&&(a.loopFix(),a._clientLeft=a.$wrapperEl[0].clientLeft,r=a.activeIndex);var n=a.slides.eq(r).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),o=a.slides.eq(r).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();s=void 0===n?o:void 0===o?n:o-r==r-n?r:o-r<r-n?o:n}else s=t.realIndex;a.visibleSlidesIndexes.indexOf(s)<0&&(a.params.centeredSlides?s=r<s?s-Math.floor(i/2)+1:s+Math.floor(i/2)-1:r<s&&(s=s-i+1),a.slideTo(s,e?0:void 0))}var l=1,d=t.params.thumbs.slideThumbActiveClass;if(1<t.params.slidesPerView&&!t.params.centeredSlides&&(l=t.params.slidesPerView),a.slides.removeClass(d),a.params.loop)for(var p=0;p<l;p+=1)a.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+p)+'"]').addClass(d);else for(var c=0;c<l;c+=1)a.slides.eq(t.realIndex+c).addClass(d)}}},Q=[E,S,C,M,P,$,O,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){var e=this;ee.extend(e,{mousewheel:{enabled:!1,enable:A.enable.bind(e),disable:A.disable.bind(e),handle:A.handle.bind(e),handleMouseEnter:A.handleMouseEnter.bind(e),handleMouseLeave:A.handleMouseLeave.bind(e),lastScrollTime:ee.now()}})},on:{init:function(){this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){var e=this;ee.extend(e,{navigation:{init:H.init.bind(e),update:H.update.bind(e),destroy:H.destroy.bind(e),onNextClick:H.onNextClick.bind(e),onPrevClick:H.onPrevClick.bind(e)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t,a=this,i=a.navigation,s=i.$nextEl,r=i.$prevEl;!a.params.navigation.hideOnClick||L(e.target).is(r)||L(e.target).is(s)||(s?t=s.hasClass(a.params.navigation.hiddenClass):r&&(t=r.hasClass(a.params.navigation.hiddenClass)),!0===t?a.emit("navigationShow",a):a.emit("navigationHide",a),s&&s.toggleClass(a.params.navigation.hiddenClass),r&&r.toggleClass(a.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var e=this;ee.extend(e,{pagination:{init:N.init.bind(e),render:N.render.bind(e),update:N.update.bind(e),destroy:N.destroy.bind(e),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){this.params.loop?this.pagination.update():void 0===this.snapIndex&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){var t=this;t.params.pagination.el&&t.params.pagination.hideOnClick&&0<t.pagination.$el.length&&!L(e.target).hasClass(t.params.pagination.bulletClass)&&(!0===t.pagination.$el.hasClass(t.params.pagination.hiddenClass)?t.emit("paginationShow",t):t.emit("paginationHide",t),t.pagination.$el.toggleClass(t.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var e=this;ee.extend(e,{scrollbar:{init:G.init.bind(e),destroy:G.destroy.bind(e),updateSize:G.updateSize.bind(e),setTranslate:G.setTranslate.bind(e),setTransition:G.setTransition.bind(e),enableDraggable:G.enableDraggable.bind(e),disableDraggable:G.disableDraggable.bind(e),setDragPosition:G.setDragPosition.bind(e),onDragStart:G.onDragStart.bind(e),onDragMove:G.onDragMove.bind(e),onDragEnd:G.onDragEnd.bind(e),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){ee.extend(this,{parallax:{setTransform:B.setTransform.bind(this),setTranslate:B.setTranslate.bind(this),setTransition:B.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax.enabled&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var i=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function(e){t[e]=X[e].bind(i)}),ee.extend(i,{zoom:t});var s=1;Object.defineProperty(i.zoom,"scale",{get:function(){return s},set:function(e){if(s!==e){var t=i.zoom.gesture.$imageEl?i.zoom.gesture.$imageEl[0]:void 0,a=i.zoom.gesture.$slideEl?i.zoom.gesture.$slideEl[0]:void 0;i.emit("zoomChange",e,t,a)}s=e}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){ee.extend(this,{lazy:{initialImageLoaded:!1,load:Y.load.bind(this),loadInSlide:Y.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){var e=this;e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){var e=this;ee.extend(e,{controller:{control:e.params.controller.control,getInterpolateFunction:V.getInterpolateFunction.bind(e),setTranslate:V.setTranslate.bind(e),setTransition:V.setTransition.bind(e)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var t=this;ee.extend(t,{a11y:{liveRegion:L('<span class="'+t.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(F).forEach(function(e){t.a11y[e]=F[e].bind(t)})},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){var e=this;ee.extend(e,{history:{init:R.init.bind(e),setHistory:R.setHistory.bind(e),setHistoryPopState:R.setHistoryPopState.bind(e),scrollToSlide:R.scrollToSlide.bind(e),destroy:R.destroy.bind(e)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){var e=this;ee.extend(e,{hashNavigation:{initialized:!1,init:q.init.bind(e),destroy:q.destroy.bind(e),setHash:q.setHash.bind(e),onHashCange:q.onHashCange.bind(e)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var t=this;ee.extend(t,{autoplay:{running:!1,paused:!1,run:W.run.bind(t),start:W.start.bind(t),stop:W.stop.bind(t),pause:W.pause.bind(t),onTransitionEnd:function(e){t&&!t.destroyed&&t.$wrapperEl&&e.target===this&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&this.autoplay.start()},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},destroy:function(){this.autoplay.running&&this.autoplay.stop()}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){ee.extend(this,{fadeEffect:{setTranslate:j.setTranslate.bind(this),setTransition:j.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;if("fade"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};ee.extend(e.params,t),ee.extend(e.originalParams,t)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){ee.extend(this,{cubeEffect:{setTranslate:U.setTranslate.bind(this),setTransition:U.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;if("cube"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"cube"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};ee.extend(e.params,t),ee.extend(e.originalParams,t)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){ee.extend(this,{flipEffect:{setTranslate:K.setTranslate.bind(this),setTransition:K.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;if("flip"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"flip"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};ee.extend(e.params,t),ee.extend(e.originalParams,t)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){ee.extend(this,{coverflowEffect:{setTranslate:_.setTranslate.bind(this),setTransition:_.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){ee.extend(this,{thumbs:{swiper:null,init:Z.init.bind(this),update:Z.update.bind(this),onThumbClick:Z.onThumbClick.bind(this)}})},on:{beforeInit:function(){var e=this.params.thumbs;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===T.use&&(T.use=T.Class.use,T.installModule=T.Class.installModule),T.use(Q),T});
//# sourceMappingURL=swiper.min.js.map

//�����˵��ƶ���
$(document).ready(function(){
  $(".navmenu").click(function(){
    $(".am-nav").slideToggle("slow");
  });
});

$(document).ready(function(){
  $(".btn_esc").click(function(){
    $(".am-nav").slideUp();
  });
});

$(document).ready(function() {
	$(".am-nav ul li").each(function(){	
		if($(this).hasClass('multi') && $('.am-topbar .navmenu').is(':visible')){
			$(this).find('>:first-child').removeAttr('href');
		}
		
		$(this).click(function(){
			 $(this).children("div.dropdown_menu").toggleClass("open");
			 $(this).siblings('li').children('.dropdown_menu').removeClass("open");
		});
	});
});

//ͼƬԤ����
echo.init({
    offset: 100,
    throttle: 0
});

//Baidu Listing code to ingest in the <head> tag
var _hmt = _hmt || [];

(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c7cea963504c4b334160d304e39fd093";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

//Back To Top
$(document).ready(function () {
	var $scrollBtn = $('.scroll_top'),
		btnDisplayed = false;

	setButtonVisibility();
	$(window).scroll(setButtonVisibility);

	$scrollBtn.on('click', function(e){
		e.preventDefault();
		$.scrollTo(0, 800, {
			onAfter:function(){
				setButtonVisibility();
			}
		});
	});

	/**
	* Shows or hides the scroll to top button depending on the current
	* document scroll position.
	*/
	function setButtonVisibility() {
		if($scrollBtn.length){
			var scrollPos = $(document).scrollTop(),
			winHeight = $(window).height();
			if(!btnDisplayed && scrollPos > winHeight) {
				//display back-to-top button
				$scrollBtn.show();
				btnDisplayed = true;
			} else if(btnDisplayed && scrollPos < winHeight){
				$scrollBtn.hide();
				btnDisplayed = false;
			}
		}
	}
});
/*! aliyun-aliplayer - v2.15.2 - 2023-02-14 11.52.54 */
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Aliplayer=e()}(function(){var define,module,exports;return function i(n,o,a){function s(t,e){if(!o[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},n[t][0].call(r.exports,function(e){return s(n[t][1][e]||e)},r,r.exports,i,n,o,a)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,r){},{}],2:[function(y,r,i){!function(f){!function(){var e,t;e=this,t=function(){var i,c=Math;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),!(i=!(i=!(i="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:i)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:i)&&void 0!==f&&f.crypto?f.crypto:i)&&"function"==typeof y)try{i=y("crypto")}catch(e){}var r=Object.create||function(e){return t.prototype=e,e=new t,t.prototype=null,e};function t(){}var e={},n=e.lib={},o=n.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=n.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<n;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=a<<24-(i+o)%4*8}else for(var s=0;s<n;s+=4)t[i+s>>>2]=r[s>>>2];return this.sigBytes+=n,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new u.init(t,e)}}),a=e.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new u.init(r,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new u.init(r,t)}},p=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t,r=this._data,i=r.words,n=r.sigBytes,o=this.blockSize,a=n/(4*o),s=(a=e?c.ceil(a):c.max((0|a)-this._minBufferSize,0))*o,e=c.min(4*s,n);if(s){for(var l=0;l<s;l+=o)this._doProcessBlock(i,l);t=i.splice(0,s),r.sigBytes-=e}return new u.init(t,e)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(n.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(e,t){return new r.init(t).finalize(e)}},_createHmacHelper:function(r){return function(e,t){return new h.HMAC.init(r,t).finalize(e)}}}),e.algo={});return e},"object"==typeof i?r.exports=i=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:1}],3:[function(e,t,r){var i,n;i=this,n=function(e){var f;return f=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=this._map,n=(e.clamp(),[]),o=0;o<r;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<r;s++)n.push(i.charAt(a>>>6*(3-s)&63));var l=i.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var t=e.length,r=this._map;if(!(i=this._reverseMap))for(var i=this._reverseMap=[],n=0;n<r.length;n++)i[r.charCodeAt(n)]=n;for(var o,a,s=r.charAt(64),l=(s&&-1!==(s=e.indexOf(s))&&(t=s),e),c=t,u=i,p=[],d=0,h=0;h<c;h++)h%4&&(o=u[l.charCodeAt(h-1)]<<h%4*2,a=u[l.charCodeAt(h)]>>>6-h%4*2,p[d>>>2]|=(o|a)<<24-d%4*8,d++);return f.create(p,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64},"object"==typeof r?t.exports=r=n(e("crypto-js/core")):"function"==typeof define&&define.amd?define(["crypto-js/core"],n):n(i.CryptoJS)},{"crypto-js/core":2}],4:[function(e,t,r){var i,n;i=this,n=function(e){return e.enc.Utf8},"object"==typeof r?t.exports=r=n(e("crypto-js/core")):"function"==typeof define&&define.amd?define(["crypto-js/core"],n):n(i.CryptoJS)},{"crypto-js/core":2}],5:[function(e,t,r){var i,n;i=this,n=function(e){return e.HmacSHA1},"object"==typeof r?t.exports=r=n(e("crypto-js/core"),e("crypto-js/sha1"),e("crypto-js/hmac")):"function"==typeof define&&define.amd?define(["crypto-js/core","crypto-js/sha1","crypto-js/hmac"],n):n(i.CryptoJS)},{"crypto-js/core":2,"crypto-js/hmac":6,"crypto-js/sha1":7}],6:[function(e,t,r){var i,n;i=this,n=function(e){var t,s;t=e.lib.Base,s=e.enc.Utf8,e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));for(var r=e.blockSize,i=4*r,e=((t=t.sigBytes>i?e.finalize(t):t).clamp(),this._oKey=t.clone()),t=this._iKey=t.clone(),n=e.words,o=t.words,a=0;a<r;a++)n[a]^=1549556828,o[a]^=909522486;e.sigBytes=t.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})},"object"==typeof r?t.exports=r=n(e("crypto-js/core")):"function"==typeof define&&define.amd?define(["crypto-js/core"],n):n(i.CryptoJS)},{"crypto-js/core":2}],7:[function(e,t,r){var i,n;i=this,n=function(e){var t,r,i,n,u;return r=(t=e).lib,i=r.WordArray,n=r.Hasher,r=t.algo,u=[],r=r.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],l=0;l<80;l++){u[l]=l<16?0|e[t+l]:(c=u[l-3]^u[l-8]^u[l-14]^u[l-16])<<1|c>>>31;var c=(i<<5|i>>>27)+s+u[l];c+=l<20?1518500249+(n&o|~n&a):l<40?1859775393+(n^o^a):l<60?(n&o|n&a|o&a)-1894007588:(n^o^a)-899497514,s=a,a=o,o=n<<30|n>>>2,n=i,i=c}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+i>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=n._createHelper(r),t.HmacSHA1=n._createHmacHelper(r),e.SHA1},"object"==typeof r?t.exports=r=n(e("crypto-js/core")):"function"==typeof define&&define.amd?define(["crypto-js/core"],n):n(i.CryptoJS)},{"crypto-js/core":2}],8:[function(X,z,e){!function(G,W,K){!function(){!function(){"use strict";function c(e){return"function"==typeof e}var t,r,e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=e,i=0,s=function(e,t){y[i]=e,y[i+1]=t,2===(i+=2)&&(r?r(_):m())};var e="undefined"!=typeof window?window:void 0,n=e||{},n=n.MutationObserver||n.WebKitMutationObserver,o=void 0!==G&&"[object process]"==={}.toString.call(G),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){return function(){setTimeout(_,1)}}var p,d,h,f,y=new Array(1e3);function _(){for(var e=0;e<i;e+=2)(0,y[e])(y[e+1]),y[e]=void 0,y[e+1]=void 0;i=0}function g(){try{var e=X("vertx");return t=e.runOnLoop||e.runOnContext,function(){t(_)}}catch(e){return u()}}function v(){}var m=o?(f=G.nextTick,o=G.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(o)&&"0"===o[1]&&"10"===o[2]&&(f=K),function(){f(_)}):n?(d=0,o=new n(_),h=document.createTextNode(""),o.observe(h,{characterData:!0}),function(){h.data=d=++d%2}):l?((p=new MessageChannel).port1.onmessage=_,function(){p.port2.postMessage(0)}):(void 0===e&&"function"==typeof X?g:u)(),S=void 0,b=1,T=2,E=new I;function M(e,i,n){s(function(t){var r=!1,e=function(e,t,r,i){try{e.call(t,r,i)}catch(e){return e}}(n,i,function(e){r||(r=!0,(i!==e?w:x)(t,e))},function(e){r||(r=!0,P(t,e))},t._label);!r&&e&&(r=!0,P(t,e))},e)}function H(e,t){var r,i;t.constructor===e.constructor?(r=e,(i=t)._state===b?x(r,i._result):i._state===T?P(r,i._result):k(i,void 0,function(e){w(r,e)},function(e){P(r,e)})):(i=function(e){try{return e.then}catch(e){return E.error=e,E}}(t))===E?P(e,E.error):void 0!==i&&c(i)?M(e,t,i):x(e,t)}function w(e,t){var r;e===t?P(e,new TypeError("You cannot resolve a promise with itself")):("function"==typeof(r=t)||"object"==typeof r&&null!==r?H:x)(e,t)}function U(e){e._onerror&&e._onerror(e._result),C(e)}function x(e,t){e._state===S&&(e._result=t,e._state=b,0!==e._subscribers.length)&&s(C,e)}function P(e,t){e._state===S&&(e._state=T,e._result=t,s(U,e))}function k(e,t,r,i){var n=e._subscribers,o=n.length;e._onerror=null,n[o]=t,n[o+b]=r,n[o+T]=i,0===o&&e._state&&s(C,e)}function C(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var i,n,o=e._result,a=0;a<t.length;a+=3)i=t[a],n=t[a+r],i?R(r,i,n,o):n(o);e._subscribers.length=0}}function I(){this.error=null}var L=new I;function R(e,t,r,i){var n,o,a,s,l=c(r);if(l){if((n=function(e,t){try{return e(t)}catch(e){return L.error=e,L}}(r,i))===L?(s=!0,o=n.error,n=null):a=!0,t===n)return void P(t,new TypeError("A promises callback cannot return that same promise."))}else n=i,a=!0;t._state===S&&(l&&a?w(t,n):s?P(t,o):e===b?x(t,n):e===T&&P(t,n))}function A(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(v),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0!==r.length&&(r.length=r.length||0,r._enumerate(),0!==r._remaining)||x(r.promise,r._result)):P(r.promise,r._validationError())}A.prototype._validateInput=function(e){return a(e)},A.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},A.prototype._init=function(){this._result=new Array(this.length)};var F=A;A.prototype._enumerate=function(){for(var e=this.length,t=this.promise,r=this._input,i=0;t._state===S&&i<e;i++)this._eachEntry(r[i],i)},A.prototype._eachEntry=function(e,t){var r,i=this,n=i._instanceConstructor;"object"==typeof(r=e)&&null!==r?e.constructor===n&&e._state!==S?(e._onerror=null,i._settledAt(e._state,t,e._result)):i._willSettleAt(n.resolve(e),t):(i._remaining--,i._result[t]=e)},A.prototype._settledAt=function(e,t,r){var i=this,n=i.promise;n._state===S&&(i._remaining--,e===T?P(n,r):i._result[t]=r),0===i._remaining&&x(n,i._result)},A.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,function(e){r._settledAt(b,t,e)},function(e){r._settledAt(T,t,e)})};function B(e){var t=new this(v);if(a(e))for(var r=e.length,i=0;t._state===S&&i<r;i++)k(this.resolve(e[i]),void 0,n,o);else P(t,new TypeError("You must pass an array to race."));return t;function n(e){w(t,e)}function o(e){P(t,e)}}function j(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(w(t=new this(v),e),t)}function V(e){var t=new this(v);return P(t,e),t}var q=0;var D=O;function O(e){if(this._id=q++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==e){if(!c(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof O))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this;try{e(function(e){w(t,e)},function(e){P(t,e)})}catch(e){P(t,e)}}}O.all=function(e){return new F(this,e).promise},O.race=B,O.resolve=j,O.reject=V,O._setScheduler=function(e){r=e},O._setAsap=function(e){s=e},O._asap=s,O.prototype={constructor:O,then:function(e,t){var r,i,n,o=this._state;return o===b&&!e||o===T&&!t?this:(r=new this.constructor(v),i=this._result,o?(n=arguments[o-1],s(function(){R(o,r,n,i)})):k(this,r,e,t),r)},catch:function(e){return this.then(null,e)}};var n=function(){var e;if(void 0!==W)e=W;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=D)},N={Promise:D,polyfill:n};"function"==typeof define&&define.amd?define(function(){return N}):void 0!==z&&z.exports?z.exports=N:void 0!==this&&(this.ES6Promise=N),n()}.call(this)}.call(this)}.call(this,X("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},X("timers").setImmediate)},{_process:9,timers:10}],9:[function(e,t,r){var i,n,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var l,c=[],u=!1,p=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length)&&h()}function h(){if(!u){for(var e=s(d),t=(u=!0,c.length);t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,u=!1,!function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return(n=clearTimeout)(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function y(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=y,t.addListener=y,t.once=y,t.off=y,t.removeListener=y,t.removeAllListeners=y,t.emit=y,t.prependListener=y,t.prependOnceListener=y,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],10:[function(l,e,c){!function(r,s){!function(){var i=l("process/browser.js").nextTick,e=Function.prototype.apply,n=Array.prototype.slice,o={},a=0;function t(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof r?r:function(e){var t=a++,r=!(arguments.length<2)&&n.call(arguments,1);return o[t]=!0,i(function(){o[t]&&(r?e.apply(null,r):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof s?s:function(e){delete o[e]}}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":9,timers:10}],11:[function(e,t,r){var i=e("../ui/component"),n=(e("../lib/util"),e("../lib/dom")),o=e("../lib/event"),a=(e("../lib/ua"),e("../lang/index")),s=e("../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className||"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+a.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+a.get("Cancel_Text")+"</a></div>",e},bindEvent:function(){var i=this,e=(i._player.on(s.Private.AutoStreamShow,function(e){var t,r=document.querySelector("#"+i.getId()+" .tip-text");i._player._getLowerQualityLevel&&(t=i._player._getLowerQualityLevel())&&(i._switchUrl=t,r.innerText=a.get("Auto_Stream_Tip_Text").replace("$$",t.item.desc),n.css(i.el(),"display","block"))}),i._player.on(s.Private.AutoStreamHide,function(e){document.querySelector("#"+i.getId()+" .tip-text");n.css(i.el(),"display","none")}),document.querySelector("#"+i.getId()+" .prism-button-ok")),e=(o.on(e,"click",function(){i._player._changeStream&&i._switchUrl&&(i._player._changeStream(i._switchUrl.index,a.get("Quality_Change_Text")),i._player.trigger(s.Private.SettingListHide)),n.css(i.el(),"display","none")}),document.querySelector("#"+i.getId()+" .prism-button-cancel"));o.on(e,"click",function(){n.css(i.el(),"display","none"),i._player.trigger(s.Private.SettingListHide)})}});t.exports=e},{"../lang/index":23,"../lib/dom":32,"../lib/event":33,"../lib/ua":49,"../lib/util":51,"../player/base/event/eventtype":70,"../ui/component":130}],12:[function(e,t,r){var i=e("../ui/component"),a=e("../lib/dom"),n=e("../lib/event"),o=e("../lib/ua"),s=e("../lib/function"),l=(e("../lang/index"),e("../lib/util")),c=e("../config"),u=e("../lib/playerutil"),p=e("../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className||"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=e._liveshiftService},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',e},bindEvent:function(){function t(e){r._progressDown=e}var r=this,e=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),i="//"+c.domain+"/de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain?i=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":c.domain?-1<c.domain.indexOf("localhost")&&(i="//"+c.domain+"/build/skins/default/img/dragcursor.png"):i=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+"/de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png":"de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png",e.src=i,n.on(this.cursorNode,"mousedown",function(e){r._onMouseDown(e)}),n.on(this.cursorNode,"touchstart",function(e){r._onMouseDown(e)}),n.on(this.progressNode,"mousemove",function(e){r._progressMove(e)}),n.on(this.progressNode,"touchmove",function(e){r._progressMove(e)});n.on(this.progressNode,"mousedown",function(e){t(!0)}),n.on(this.progressNode,"touchstart",function(e){t(!0)}),n.on(this.progressNode,"mouseup",function(e){t(!1)}),n.on(this.progressNode,"touchend",function(e){t(!1)}),n.on(this._el,"click",function(e){r._onMouseClick(e)}),this._player.on(p.Private.HideProgress,function(e){r._hideProgress(e)}),this._player.on(p.Private.CancelHideProgress,function(e){r._cancelHideProgress(e)}),this._player.on(p.Private.ShowBar,function(){r._updateLayout()}),n.on(this.progressNode,p.Private.MouseOver,function(e){r._onMouseOver(e)}),n.on(this.progressNode,p.Private.MouseOut,function(e){r._onMouseOut(e)}),this.bindTimeupdate=s.bind(this,this._onTimeupdate),this._player.on(p.Player.TimeUpdate,this.bindTimeupdate),u.isLiveShift(this._player._options)&&r._liveshiftService.start(6e4,function(e){e={mediaId:r._player._options.vid||"",error_code:e.Code,error_msg:e.Message};r._player.logError(e),r._player.trigger(p.Player.Error,e)}),this._player.on(p.Private.LiveShiftQueryCompleted,function(){r._updateSeperator(),r._updateLayout()}),this._player.on(p.Private.LiveShiftSwitchToLive,function(){r._updateCursorPosition()}),this._player.on(p.Player.Pause,function(){r._liveshiftService.stop()}),o.IS_IPAD?this.interval=setInterval(function(){r._onProgress()},500):this._player.on(p.Video.Progress,function(){r._onProgress()})},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var e=this.seperatorNode.offsetWidth,t=this.el().offsetWidth,r=t-e;0!=e&&0!=r&&(a.css(this.progressNode,"width",100*(r-10)/t+"%"),a.css(this.seperatorNode,"right",-1*(e+10)+"px"))},_progressMove:function(e){var t=this._getSeconds(e),r=this._liveshiftService.availableLiveShiftTime,t=(this.timeNode.innerText="-"+l.formatTime(r-t),r?t/r:0),r=1-this.timeNode.clientWidth/this.el().clientWidth,i=(r<t&&(t=r),this.timeNode&&(a.css(this.timeNode,"display","block"),a.css(this.timeNode,"left",100*t+"%")),this);!o.IS_PC&&i._progressDown&&(i.progressSeekTimer&&clearTimeout(i.progressSeekTimer),i.progressSeekTimer=setTimeout(function(){i._progressDown||i._onMouseClick(e)},200))},_hideProgress:function(e){n.off(this.cursorNode,"mousedown"),n.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;n.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),n.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_canSeekable:function(e){var t=!0;return t="function"==typeof this._player.canSeekable?this._player.canSeekable(e):t},_onMouseOver:function(e){this._updateCursorPosition(this._getCurrentTime()),a.css(this.timeNode,"display","block")},_onMouseOut:function(e){a.css(this.timeNode,"display","none")},_getSeconds:function(e){for(var t=this.el().offsetLeft,r=this.el();r=r.offsetParent;){var i=a.getTranslateX(r);t+=r.offsetLeft+i}var e=(e.touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX,n=this.progressNode.offsetWidth,o=this._liveshiftService.availableLiveShiftTime;return sec=(sec=(sec=o?(e-t)/n*o:0)<0?0:sec)>o?o:sec},_onMouseClick:function(e){var t=this,e=this._getSeconds(e),r=this._liveshiftService.availableLiveShiftTime,i=r-e,n=this._player._options,r=(i<=n.liveShiftMinOffset&&(e=r-(i=n.liveShiftMinOffset)),this._player.trigger(p.Private.SeekStart,{fromTime:this._getCurrentTime()}),this._liveshiftService.getSourceUrl(i)),n=u.isHls(t._player._options.source);t._player._loadByUrlInner(r,e,!0),t._player.trigger(p.Private.Play_Btn_Hide),t._liveshiftService.seekTime=e,t._player.trigger(p.Private.EndStart,{toTime:e}),t._updateProgressBar(this.playedNode,e),t._updateCursorPosition(e),setTimeout(function(){t._progressDown||t._onMouseOut()},500),n&&setTimeout(function(){t._player.play()})},_onMouseDown:function(e){var t=this;e.preventDefault(),this._player.trigger(p.Private.SeekStart,{fromTime:this._getCurrentTime()}),n.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),n.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),n.on(this.controlNode,"mouseup",function(e){t._onMouseUp(e)}),n.on(this.controlNode,"touchend",function(e){t._onMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),n.off(this.controlNode,"mousemove"),n.off(this.controlNode,"touchmove"),n.off(this._player.tag,"mouseup"),n.off(this._player.tag,"touchend"),n.off(this.controlNode,"mouseup"),n.off(this.controlNode,"touchend"),this._onMouseClick(e)},_onMouseMove:function(e){e.preventDefault()},_onTimeupdate:function(e){this._player._seeking||(o.IS_ANDROID&&o.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&(this._hasResetFlagUC=!1,this._basePtsUC=this._player.getCurrentTime()),this._player.getCurrentTime()||(this._hasResetFlagUC=!0,this._basePtsUC=0)),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(p.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var e=this._liveshiftService.seekTime,e=(-1==e&&(e=0),this._player.getCurrentTime()+e);return o.IS_ANDROID&&o.IS_UC&&(e-=this._basePtsUC||0),e},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){var r,i;1!=this._player._switchSourcing&&(i=0,-1==this._liveshiftService.seekTime?i=1:1<(i=(r=this._liveshiftService.availableLiveShiftTime)?t/r:0)&&(this._liveshiftService.seekTime=-(i=1)),this.liveShiftStartDisplay,e)&&a.css(e,"width",100*i+"%")},_updateCursorPosition:function(e){var t,r,i,n;this._player.el()&&1!=this._player._switchSourcing&&(i=0,n=1,t=this._player.el().clientWidth,-1==this._liveshiftService.seekTime?i=1:1<(i=(r=this._liveshiftService.availableLiveShiftTime)?e/r:0)&&(this._liveshiftService.seekTime=-1),0!=t&&(n=1-(e=10/t),i-=e),i=i<0?0:i,this.cursorNode)&&(n<i?(a.css(this.cursorNode,"right","0px"),a.css(this.cursorNode,"left","auto")):(a.css(this.cursorNode,"right","auto"),a.css(this.cursorNode,"left",100*i+"%")))}});t.exports=e},{"../config":14,"../lang/index":23,"../lib/dom":32,"../lib/event":33,"../lib/function":35,"../lib/playerutil":46,"../lib/ua":49,"../lib/util":51,"../player/base/event/eventtype":70,"../ui/component":130}],13:[function(e,t,r){var i=e("../ui/component"),n=e("../lib/util"),o=e("../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className||"prism-live-time-display",this.addClass(this.className),this._liveshiftService=e._liveshiftService},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',e},bindEvent:function(){var i=this;this._player.on(o.Video.TimeUpdate,function(){var e,t=i._liveshiftService,r=document.querySelector("#"+i.id()+" .current-time");t.liveShiftStartDisplay&&t.availableLiveShiftTime>t.seekTime&&-1!=t.seekTime?(e=i._liveshiftService.getBaseTime(),e=n.formatTime(e+i._player.getCurrentTime()),r.innerText=e):t.currentTimeDisplay&&(r.innerText=t.currentTimeDisplay)}),this._player.on(o.Private.LiveShiftQueryCompleted,function(){i.updateTime()})},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}});t.exports=e},{"../lib/util":51,"../player/base/event/eventtype":70,"../ui/component":130}],14:[function(e,t,r){t.exports={domain:"g.alicdn.com",flashVersion:"2.8.2",h5Version:"2.15.2",rtsVersion:"2.2.6",cityBrain:!0,logDuration:10,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track"}},{}],15:[function(e,t,r){var i,n,o,a;e("./lib/patch-ssr").isSSR||(e("./lang/index").load(),i=e("./player/adaptivePlayer"),n=e("./lib/reloadInstanceUtil"),o=e("./lib/componentutil"),a=e("./config"),(e=function(e,t){e=i.create(e,t);return n.storeUserEvents(e),e}).getVersion=function(){return a.h5Version},o.register(e),(o=window.Aliplayer=e).players={},e.reloadInstance=n.reloadInstance,"undefined"==typeof Uint8Array)||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),t.exports=o},{"./config":14,"./lang/index":23,"./lib/componentutil":27,"./lib/patch-ssr":44,"./lib/reloadInstanceUtil":47,"./player/adaptivePlayer":66}],16:[function(e,t,r){var i=e("../player/base/event/eventtype"),n=e("../lib/constants"),o=e("../lang/index");t.exports=function(){function e(e){var t=this;void 0===e&&(e={}),this.interval=3e3,this.player=null,this.timer=null,this.playerInitDone=!1,this.player=e.player,this.player.on(i.Player.Init,function(){t.playerInitDone=!0})}var t=e.prototype;return t.start=function(){var e=this;this.stop(),this.player&&this.player._options&&!this.player._options.preventRecord||(this.timer=setInterval(function(){e.playerInitDone&&e.check()},this.interval))},t.stop=function(){this.clearTimer()},t.check=function(){var e=!1,t=this.detectPrototype()||this.detectNativeFn();return(t||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",t),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),e=!0),e},t.dispose=function(){this.stop(),this.player=null,this.playerInitDone=!1},t.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},t.displayError=function(){var e=this.player,t={mediaId:e._options&&e._options.vid?e._options.vid:"",error_code:n.ErrorCode.RecordNotAllowed,error_msg:o.get("Record_Not_Allowed")};e.logError(t),e.trigger(i.Player.Error,t)},t.setupErrorStyle=function(){this.hideRetry();var e=document.querySelector(".prism-ErrorMessage");e&&(e.style.opacity="1",e.style.visibility="visible")},t.hideRetry=function(){var e=document.querySelector("#"+this.player.id()+" .prism-button-retry");e&&(e.style.display="none")},t.destroyVideo=function(){this.player._drm&&this.player.destroy();var e=this.player.tag;e&&e.parentNode&&e.parentNode.removeChild(e)},t.detectPrototype=function(){var e=window,t=e.MediaSource;return t&&e.EventTarget&&t.__proto__.__proto__===e.EventTarget},t.detectNativeFn=function(){var e=window.MediaSource;return e&&!this.isNativeFn(e.prototype.addSourceBuffer)},t.isNativeFn=function(e){var t=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),r=typeof e;return null!==e&&("object"==r||"function"==r)&&t.test(e)},t.detectDeperateVideo=function(){var e=this.player.tag;if(e)return-1!==(e.getAttribute("id")||"").indexOf("360")},e}()},{"../lang/index":23,"../lib/constants":28,"../player/base/event/eventtype":70}],17:[function(e,t,r){var i=e("../lib/oo"),n=e("../lang/index"),e=i.extend({init:function(e,t){this._player=e,this._options=e.options()}}),o=(e.prototype.handle=function(e){var t,r;this._options.autoPlayDelay&&(t=(t=this._options.autoPlayDelayDisplayText)||n.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay),this._player.trigger("info_show",t),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),(r=this)._timeHandler=setTimeout(function(){r._player.trigger("info_hide"),r._options.autoPlayDelay=0,e&&e()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){o(r)}),this._player.on("pause",function(){o(r)}))},e.prototype.dispose=function(){o(this),this._player=null},function(e){e._timeHandler&&(clearTimeout(e._timeHandler),e._timeHandler=null)});t.exports=e},{"../lang/index":23,"../lib/oo":43}],18:[function(e,t,r){var i=e("../lib/event"),n=e("../lib/data"),o=e("../player/base/event/eventtype"),a=n.guid(),e={};function s(e){var t,r,i=this._options.keyFastForwardStep,n=this._options.isLive;switch(e&&e.keyCode){case 39:n||(e.preventDefault(),t=this.getDuration(),r=this.getCurrentTime()+i,this.seek(r=t<r?t:r),l.call(this,r),c.call(this,r));break;case 37:n||(e.preventDefault(),r=this.getCurrentTime()-i,this.seek(r=r<0?0:r),l.call(this,r),c.call(this,r));break;case 38:e.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+.1).toFixed(1)));break;case 40:e.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-.1).toFixed(1)));break;case 32:if(n)return;e.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function l(e){this.trigger(o.Private.UpdateProgress,{targetTime:e})}function c(e){this.trigger(o.Private.UpdateCursorPosition,{targetTime:e})}e.init=function(){var e;this._options.keyShortCuts&&((e=s.bind(this)).guid=a,i.on(window.document,"keydown",e))},e.dispose=function(){var e;this._options.keyShortCuts&&((e=s.bind(this)).guid=a,i.off(window.document,"keydown",e))},t.exports=e},{"../lib/data":30,"../lib/event":33,"../player/base/event/eventtype":70}],19:[function(e,t,r){var o="undefined"==typeof Promise?e("es6-promise").Promise:Promise,a=e("../lib/constants").LicenseResultCode,s=e("../lib/io"),i=((e={})[a.ResourceIncorrect]="license resource init error",e[a.LicenseKeyInvalid]="invalid license key",e[a.DomainInvalid]="invalid domain",e[a.CertInvalid]="invalid cert content",e[a.NotFound]="license not found",e[a.Expired]="license expired",e),e=function(){function e(){}return e.getLicense=function(r,i){var n=this;return this.isWasmSupported()?i?r?this.instance?o.resolve(this.instance):new o(function(e,t){n.resolvers.push(e),n.rejecters.push(t),1===n.resolvers.length&&s.loadJS("https://g.alicdn.com/video-cloud-fe/websdk-license/0.1.0/index.js",function(){window.loadLicenseSource().then(function(e){return e.init(2,r,i).then(function(t){n.instance=t,n.resolvers.forEach(function(e){e(t)})}).catch(function(e){console.error(e),n.rejecters.forEach(function(e){e(a.CertInvalid)})})}).catch(function(){n.rejecters.forEach(function(e){e(a.ResourceIncorrect)})}).finally(function(){n.resolvers=[],n.rejecters=[]})},function(){n.rejecters.forEach(function(e){e(a.ResourceIncorrect)})})}):o.reject(a.DomainInvalid):o.reject(a.LicenseKeyInvalid):o.reject(a.WasmNotSupported)},e.isWasmSupported=function(){return"object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate},e.logError=function(e){i[e]&&console.error(i[e])},e}();e.instance=void 0,e.resolvers=[],e.rejecters=[],t.exports=e},{"../lib/constants":28,"../lib/io":40,"es6-promise":8}],20:[function(e,t,r){t.exports=t.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Snapshot:"Snapshot",Detection_Text:"Diagnosis",Play_DateTime:"Time",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switch to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_Server_Network_NotSupport_Text:"Network error or \xa0the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format of video is not supported by\xa0h5 player\uff0cplease use flash player",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4\xa0is not supported by this explorer",Error_Not_Support_encrypt_Text:"Play the encrypted video,please set encryptType to 1",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls\uff0cplease close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"The m3u8 file loaded failed,please make sure domain configuration https certificate or enable cors",Error_Load_M3U8_Timeout_Text:"Timeout error occored\xa0when the\xa0m3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Waiting_Timeout_Text:"Buffering timeout,\xa0please close or refresh",Error_Invalidate_Source:"Video shoud be mp4\u3001mp3\u3001m3u8\u3001mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Error_Region_Block_Text:"This video is not available in your region",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"please make sure domain configuration https certificate or enable cors",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flv\u3001rmtp can't be supported on mobile\uff0cplease use m3u8",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switch to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"iOS desn't support Vod's private encription video, please use HLS standard encription or DRM",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",License_No_Authorization:"Aliplayer without Authorization",License_Click_To_Apply:"Click to apply",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"ms received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],21:[function(e,t,r){t.exports=t.exports={OD:"OD",LD:"360p",FD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Forbidden_Text:"Internal information is strictly forbidden to outsider",Refresh:"Refresh",Diagnosis:"Diagnosis",Live_Finished:"Live has finished, thanks for watching",Play:"Play",Pause:"Pause",Snapshot:"Snapshot",Replay:"Replay",Live:"Live",Encrypt:"Encrypt",Sound:"Sound",Fullscreen:"Full Screen",Exist_Fullscreen:"Exit Full-screen",Resolution:"Resolution",Next:"Next Video",Brightness:"Brightness",Default:"Default",Contrast:"Contrast",Titles_Credits:"Titles\xa0and\xa0Credits",Skip_Titles:"Skip Titles",Skip_Credits:"Skip Credits",Not_Support_Out_Site:"The video is not supported for outside website, please watch it by TaoTV",Watch_Now:"Watch now",Network_Error:"Network is unreachable, please try to refresh",Video_Error:"Playing a video error,\xa0please try to refresh",Decode_Error:"Data decoding\xa0error",Live_Not_Start:"Live has not started, to be expected",Live_Loading:"Live information is loading,\xa0please try to refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Live_End:"Live has finished",Live_Abrot:"Signal aborted,\xa0please try to refresh",Corss_Domain_Error:"Please ensure your domain has obtained IPC license and combined CNAME, \r\n or to set\xa0\xa0cross-domain accessing available",Url_Timeout_Error:"The video url is timeout,\xa0please try to refresh",Connetction_Error:"Sorry\uff0cthe video cannot play because of connection error, please try to watch other videos",Fetch_MTS_Error:"Fetching video list failed, please ensure",Token_Expired_Error:"Requesting open api failed, please ensure token expired or not",Video_Lists_Empty_Error:"The video list is empty, please check the format of video",Encrypted_Failed_Error:"Fetching encrypted file failed, please check the permission of player",Fetch_Failed_Permission_Error:"Fetching video list failed, please check the permission of player",Invalidate_Param_Error:"No video url, please check the parameters",AutoPlayDelayDisplayText:"Play in $$ seconds",Fetch_MTS_NOT_NotStream_Error:"The vid has no stream to play",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Open_Html_By_File:"Html page should be on the server",Cant_Use_Flash_On_Mobile:"Mobile doesn't support flash player\uff0cplease use h5 player",Flash_Not_Ready:"Flash Player plugin hasn't been installed <a href='https://www.flash.cn/' target='_blank'>install plugin</a>, or check if disable Flash plugin"}},{}],22:[function(e,t,r){t.exports=t.exports={OD:"\u539f\u753b",FD:"\u6d41\u7545",LD:"\u6807\u6e05",SD:"\u9ad8\u6e05",HD:"\u8d85\u6e05","2K":"2K","4K":"4K",FHD:"\u5168\u9ad8\u6e05",XLD:"\u6781\u901f",SQ:"\u666e\u901a\u97f3\u8d28",HQ:"\u9ad8\u97f3\u8d28",Forbidden_Text:"\u5185\u90e8\u4fe1\u606f\uff0c\u4e25\u7981\u5916\u4f20",Refresh:"\u5237\u65b0",Diagnosis:"\u8bca\u65ad",Live_Finished:"\u76f4\u64ad\u5df2\u7ed3\u675f,\u8c22\u8c22\u89c2\u770b",Play:"\u64ad\u653e",Pause:"\u6682\u505c",Snapshot:"\u622a\u56fe",Replay:"\u91cd\u64ad",Live:"\u76f4\u64ad",Encrypt:"\u52a0\u5bc6",Sound:"\u58f0\u97f3",Fullscreen:"\u5168\u5c4f",Exist_Fullscreen:"\u9000\u51fa\u5168\u5c4f",Resolution:"\u6e05\u6670\u5ea6",Next:"\u4e0b\u4e00\u96c6",Brightness:"\u4eae\u5ea6",Default:"\u9ed8\u8ba4",Contrast:"\u5bf9\u6bd4\u5ea6",Titles_Credits:"\u7247\u5934\u7247\u5c3e",Skip_Titles:"\u8df3\u8fc7\u7247\u5934",Skip_Credits:"\u8df3\u8fc7\u7247\u5c3e",Not_Support_Out_Site:"\u8be5\u89c6\u9891\u6682\u4e0d\u652f\u6301\u7ad9\u5916\u64ad\u653e\uff0c\u8bf7\u5230\u6dd8TV\u89c2\u770b",Watch_Now:"\u7acb\u5373\u89c2\u770b",Network_Error:"\u7f51\u7edc\u65e0\u6cd5\u8fde\u63a5\uff0c\u8bf7\u5c1d\u8bd5\u68c0\u67e5\u7f51\u7edc\u540e\u5237\u65b0\u8bd5\u8bd5",Video_Error:"\u89c6\u9891\u64ad\u653e\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u8bd5\u8bd5",Decode_Error:"\u64ad\u653e\u6570\u636e\u89e3\u7801\u9519\u8bef",Live_Not_Start:"\u4eb2\uff0c\u76f4\u64ad\u8fd8\u672a\u5f00\u59cb\u54e6\uff0c\u656c\u8bf7\u671f\u5f85",Live_Loading:"\u76f4\u64ad\u4fe1\u606f\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u5237\u65b0\u8bd5\u8bd5",Live_End:"\u4eb2\uff0c\u76f4\u64ad\u5df2\u7ed3\u675f",Live_Abrot:"\u5f53\u524d\u76f4\u64ad\u4fe1\u53f7\u4e2d\u65ad\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5",Corss_Domain_Error:"\u8bf7\u786e\u8ba4\u60a8\u7684\u57df\u540d\u5df2\u5b8c\u6210\u5907\u6848\u548cCNAME\u7ed1\u5b9a\uff0c\r\n\u5e76\u5904\u4e8e\u542f\u7528\u72b6\u6001\uff0c\u6216\u8d44\u6e90\u5141\u8bb8\u8de8\u8d8a\u8bbf\u95ee",Url_Timeout_Error:"\u60a8\u6240\u89c2\u770b\u7684\u89c6\u9891\u5730\u5740\u8fde\u63a5\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5",Connetction_Error:"\u62b1\u6b49,\u8be5\u89c6\u9891\u7531\u4e8e\u8fde\u63a5\u9519\u8bef\u6682\u65f6\u4e0d\u80fd\u64ad\u653e,\u8bf7\u89c2\u770b\u5176\u5b83\u89c6\u9891",Fetch_MTS_Error:"\u83b7\u53d6\u89c6\u9891\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4",Token_Expired_Error:"\u8bf7\u6c42\u63a5\u53e3\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4Token\u662f\u5426\u8fc7\u671f",Video_Lists_Empty_Error:"\u83b7\u53d6\u89c6\u9891\u5217\u8868\u4e3a\u7a7a\uff0c\u8bf7\u786e\u8ba4\u64ad\u653e\u6570\u636e\u4e0e\u683c\u5f0f",Encrypted_Failed_Error:"\u83b7\u53d6\u89c6\u9891\u52a0\u5bc6\u79d8\u94a5\u9519\u8bef\uff0c\u8bf7\u786e\u8ba4\u64ad\u653e\u6743\u9650",Fetch_Failed_Permission_Error:"\u83b7\u53d6\u89c6\u9891\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4\u64ad\u653e\u6743\u9650",Invalidate_Param_Error:"\u65e0\u8f93\u5165\u89c6\u9891\uff0c\u8bf7\u786e\u8ba4\u8f93\u5165\u53c2\u6570",AutoPlayDelayDisplayText:"$$\u79d2\u4ee5\u540e\u5f00\u59cb\u64ad\u653e",Fetch_MTS_NOT_NotStream_Error:"\u6b64vid\u6ca1\u6709\u53ef\u64ad\u653e\u89c6\u9891",Cancel_Text:"\u53d6\u6d88",OK_Text:"\u786e\u8ba4",Auto_Stream_Tip_Text:"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u662f\u5426\u5207\u6362\u5230$$",Fetch_Playauth_Error:"\u83b7\u53d6\u64ad\u653e\u51ed\u8bc1\u51fa\u9519\u5566\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Open_Html_By_File:"\u4e0d\u80fd\u76f4\u63a5\u5728\u6d4f\u89c8\u5668\u6253\u5f00html\u6587\u4ef6\uff0c\u8bf7\u90e8\u7f72\u5230\u670d\u52a1\u7aef",Cant_Use_Flash_On_Mobile:"\u79fb\u52a8\u7aef\u4e0d\u652f\u6301Flash\u64ad\u653e\u5668\uff0c\u8bf7\u4f7f\u7528h5\u64ad\u653e\u5668",Flash_Not_Ready:"Flash Player\u63d2\u4ef6\u672a\u5b89\u88c5<a href='https://www.flash.cn/' target='_blank'>\u5b89\u88c5\u63d2\u4ef6</a>\uff0c\u5982\u679c\u5df2\u7ecf\u5b89\u88c5\u8bf7\u68c0\u67e5\u662f\u5426\u88ab\u7981\u7528"}},{}],23:[function(o,e,t){function n(){var e;return void 0!==window[l]&&window[l]||(e=(e=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<e.indexOf("zh")?"zh-cn":"en-us",window[l]=e),window[l]}function a(e,t){var r=p(e),i="",n=u(),i="flash"==e?"en-us"==n?o("./flash/en-us"):"zh-cn"==n?o("./flash/zh-cn"):t[n]:"en-us"==n?o("./en-us"):"zh-cn"==n?o("./zh-cn"):t[n];s.set(r,JSON.stringify(i)),c(e,i)}var r=o("../config"),s=o("../lib/storage"),i=(o("../lib/io"),"aliplayer_lang_data"),l="aliplayer_lang",c=function(e,t){e=p(e);window[e]=t},u=function(){return n()},p=function(e){var t=u();return i+"_"+(e=e||"h5")+"_"+r.h5Version.replace(/\./g,"_")+"_"+t};e.exports.setCurrentLanguage=function(e,t,r){var i=window[l];if(!("en-us"==(e=void 0!==e&&e?e:n())||"zh-cn"==e||r&&r[e]))throw new Error("There is not language resource for "+e+", please specify the language resource by languageTexts property");window[l]=e,a(t,r),e!=i&&o("../lib/constants").updateByLanguage()},e.exports.getCurrentLanguage=n,e.exports.getLanguageData=function(e,t){e=p(e);return window[e]},e.exports.load=a,e.exports.get=function(e,t){t=p(t=t||"h5"),t=window[t];if(t)return t[e]}},{"../config":14,"../lib/constants":28,"../lib/io":40,"../lib/storage":48,"./en-us":20,"./flash/en-us":21,"./flash/zh-cn":22,"./zh-cn":24}],24:[function(e,t,r){t.exports=t.exports={OD:"\u539f\u753b",FD:"\u6d41\u7545",LD:"\u6807\u6e05",SD:"\u9ad8\u6e05",HD:"\u8d85\u6e05","2K":"2K","4K":"4K",FHD:"\u5168\u9ad8\u6e05",XLD:"\u6781\u901f",SQ:"\u666e\u901a\u97f3\u8d28",HQ:"\u9ad8\u97f3\u8d28",Speed:"\u500d\u901f",Speed_05X_Text:"0.5X",Speed_1X_Text:"\u6b63\u5e38",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Quality_Change_Fail_Switch_Text:"\u4e0d\u80fd\u64ad\u653e\uff0c\u5207\u6362\u4e3a",Quality_Change_Text:"\u6b63\u5728\u4e3a\u60a8\u5207\u6362\u5230 ",Quality_The_Url:"\u6b64\u5730\u5740",Refresh_Text:"\u5237\u65b0",Detection_Text:"\u8bca\u65ad",Cancel:"\u53d6\u6d88",Mute:"\u9759\u97f3",Snapshot:"\u622a\u56fe",Play_DateTime:"\u64ad\u653e\u65f6\u95f4",AutoPlayDelayDisplayText:"$$\u79d2\u4ee5\u540e\u5f00\u59cb\u64ad\u653e",Error_Load_Abort_Text:"\u83b7\u53d6\u6570\u636e\u8fc7\u7a0b\u88ab\u4e2d\u6b62",Error_Network_Text:"\u7f51\u7edc\u9519\u8bef\u52a0\u8f7d\u6570\u636e\u5931\u8d25",Error_Decode_Text:"\u89e3\u7801\u9519\u8bef",Error_Server_Network_NotSupport_Text:"\u670d\u52a1\u5668\u3001\u7f51\u7edc\u9519\u8bef\u6216\u683c\u5f0f\u4e0d\u652f\u6301",Error_Offline_Text:"\u7f51\u7edc\u4e0d\u53ef\u7528\uff0c\u8bf7\u786e\u5b9a",Error_Play_Text:"\u64ad\u653e\u51fa\u9519\u5566",Error_Retry_Text:"\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_AuthKey_Text:"\u53ef\u80fd\u9274\u6743\u8fc7\u671f\u3001\u57df\u540d\u4e0d\u5728\u767d\u540d\u5355\u6216\u8bf7\u6c42\u88ab\u62e6\u622a",Error_H5_Not_Support_Text:"h5\u4e0d\u652f\u6301\u6b64\u683c\u5f0f\uff0c\u8bf7\u4f7f\u7528flash\u64ad\u653e\u5668",Error_Not_Support_M3U8_Text:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301m3u8\u89c6\u9891\u64ad\u653e",Error_Not_Support_MP4_Text:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301mp4\u89c6\u9891\u64ad\u653e",Error_Not_Support_encrypt_Text:"\u64ad\u653e\u52a0\u5bc6\u89c6\u9891\uff0c\u8bf7\u8bbe\u7f6e\u5c5e\u6027encryptType to 1",Error_Vod_URL_Is_Empty_Text:"\u83b7\u53d6\u64ad\u653e\u5730\u5740\u4e3a\u7a7a",Error_Vod_Fetch_Urls_Text:"\u83b7\u53d6\u5730\u5740\u51fa\u9519\u5566\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Fetch_Playauth_Error:"\u83b7\u53d6\u64ad\u653e\u51ed\u8bc1\u51fa\u9519\u5566\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_Playauth_Decode_Text:"playauth\u89e3\u6790\u9519\u8bef",Error_Vid_Not_Same_Text:"\u4e0d\u80fd\u66f4\u65b0\u5730\u5740\uff0cvid\u548c\u64ad\u653e\u4e2d\u7684\u4e0d\u4e00\u81f4",Error_Playauth_Expired_Text:"\u51ed\u8bc1\u5df2\u8fc7\u671f\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_MTS_Fetch_Urls_Text:"MTS\u83b7\u53d6\u53d6\u6570\u5931\u8d25",Error_Load_M3U8_Failed_Text:"\u83b7\u53d6m3u8\u6587\u4ef6\u5931\u8d25,\u8bf7\u786e\u8ba4\u57df\u540d\u662f\u5426\u914d\u7f6e\u4e86https\u8bc1\u4e66\u6216\u8005\u662f\u5426\u5f00\u542f\u4e86\u5141\u8bb8\u8de8\u57df\u8bbf\u95ee",Error_Load_M3U8_Timeout_Text:"\u83b7\u53d6m3u8\u6587\u4ef6\u8d85\u65f6",Error_Liveshift_M3U8_Not_Found_Text:"\u6ca1\u6709\u66f4\u591a\u65f6\u79fb\u89c6\u9891\u4e86",Error_M3U8_Decode_Text:"\u83b7\u53d6m3u8\u6587\u4ef6\u89e3\u6790\u5931\u8d25",Error_TX_Decode_Text:"\u89e3\u6790\u6570\u636e\u51fa\u9519",Error_Waiting_Timeout_Text:"\u7f13\u51b2\u6570\u636e\u8d85\u65f6\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_Invalidate_Source:"\u64ad\u653e\u5730\u5740\u683c\u5f0f\u9700\u8981\u4e3amp4\u3001mp3\u3001m3u8\u3001mpd\u6216flv",Error_Empty_Source:"\u64ad\u653e\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a",Error_Vid_Empty_Source:"vid\u5bf9\u5e94\u7684\u89c6\u9891\u5730\u5740\u8fd8\u672a\u83b7\u53d6\u5230",Error_Mediaauth_Empty_Source:"mediaAuth\u5bf9\u5e94\u7684\u89c6\u9891\u5730\u5740\u8fd8\u672a\u83b7\u53d6\u5230",Error_Fetch_NotStream:"\u6b64vid\u6ca1\u6709\u53ef\u64ad\u653e\u89c6\u9891",Error_Fetch_Media_Not_Found:"\u6570\u636e\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664",Error_Not_Found:"\u64ad\u653e\u5730\u5740\u4e0d\u5b58\u5728",Error_Drm_License_Request_Failed:"DRM License \u8bf7\u6c42\u5931\u8d25",Error_Drm_Not_Supported:"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 DRM \u64ad\u653e",Error_Drm_Load:"DRM \u64ad\u653e\u9519\u8bef",Error_Region_Block_Text:"\u60a8\u6240\u5728\u7684\u5730\u533a\u65e0\u6cd5\u89c2\u770b\u8be5\u89c6\u9891",Live_End:"\u4eb2\uff0c\u76f4\u64ad\u5df2\u7ed3\u675f",Play_Before_Fullscreen:"\u64ad\u653e\u540e\u518d\u5168\u5c4f",Can_Not_Seekable:"\u4e0d\u80fdseek\u5230\u8fd9\u91cc",Cancel_Text:"\u53d6\u6d88",OK_Text:"\u786e\u8ba4",Auto_Stream_Tip_Text:"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u662f\u5426\u5207\u6362\u5230$$",Request_Block_Text:"\u6d4f\u89c8\u5668\u5b89\u5168\u7b56\u7565\u89c6\u9891\u5730\u5740\u4e0d\u80fd\u4e3ahttp\u534f\u8bae\uff0c\u4e0e\u7f51\u7ad9https\u534f\u8bae\u4e0d\u4e00\u81f4",Open_Html_By_File:"\u4e0d\u80fd\u76f4\u63a5\u5728\u6d4f\u89c8\u5668\u6253\u5f00html\u6587\u4ef6\uff0c\u8bf7\u90e8\u7f72\u5230\u670d\u52a1\u7aef",Maybe_Cors_Error:"\u8bf7\u786e\u8ba4\u57df\u540d\u662f\u5426\u914d\u7f6e\u4e86https\u8bc1\u4e66\u6216\u8005\u662f\u5426\u5f00\u542f\u4e86\u5141\u8bb8\u8de8\u57df\u8bbf\u95ee",Speed_Switch_To:"\u500d\u901f\u5207\u6362\u5230 ",Curent_Volume:"\u5f53\u524d\u97f3\u91cf\uff1a",Volume_Mute:"\u8bbe\u7f6e\u4e3a\u9759\u97f3",Volume_UnMute:"\u8bbe\u7f6e\u4e3a\u975e\u9759\u97f3",ShiftLiveTime_Error:"\u76f4\u64ad\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u76f4\u64ad\u7ed3\u675f\u65f6\u95f4",Error_Not_Support_Format_On_Mobile:"\u79fb\u52a8\u7aef\u4e0d\u652f\u6301flv\u3001rmtp\u89c6\u9891\uff0c\u8bf7\u4f7f\u7528m3u8",SessionId_Ticket_Invalid:"DRM\u89c6\u9891\u64ad\u653e\uff0csessionId\u548cticket\u5c5e\u6027\u4e0d\u80fd\u4e3a\u7a7a",Http_Error:"Http\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25",Http_Timeout:"http\u8bf7\u6c42\u8d85\u65f6",DRM_License_Expired:"DRM license\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0",Not_Support_DRM:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301DRM\u89c6\u9891\u7684\u64ad\u653e\u6216\u672a\u53d7\u5230\u7528\u6237\u8bb8\u53ef",CC_Switch_To:"\u5b57\u5e55\u5207\u6362\u5230 ",AudioTrack_Switch_To:"\u97f3\u8f68\u5207\u6362\u5230 ",Subtitle:"\u5b57\u5e55",AudioTrack:"\u97f3\u8f68",Quality:"\u6e05\u6670\u5ea6",Auto:"\u81ea\u52a8",Quality_Switch_To:"\u6e05\u6670\u5ea6\u5207\u6362\u5230 ",Fullscreen:"\u5168\u5c4f",Setting:"\u8bbe\u7f6e",Volume:"\u97f3\u91cf",Play:"\u64ad\u653e",Pause:"\u6682\u505c",CloseSubtitle:"\u5173\u95ed\u5b57\u5e55",OpenSubtitle:"\u6253\u5f00\u5b57\u5e55",ExistFullScreen:"\u9000\u51fa\u5168\u5c4f",Muted:"\u9759\u97f3",Retry:"\u91cd\u8bd5",SwitchToLive:"\u8fd4\u56de\u76f4\u64ad",iOSNotSupportVodEncription:"iOS\u4e0d\u652f\u6301\u963f\u91cc\u4e91\u89c6\u9891\u52a0\u5bc6\uff08\u52a0\u5bc6\uff09\u64ad\u653e\uff0c\u8bf7\u4f7f\u7528\u6807\u51c6\u52a0\u5bc6\u6216DRM",UseChromeForVodEncription:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u70b9\u64ad\u52a0\u5bc6\u64ad\u653e\uff0c\u8bf7\u4f7f\u7528\u6700\u65b0Chrome\u6d4f\u89c8\u5668",Record_Not_Allowed:"\u7981\u6b62\u5f55\u5c4f\u6216\u5c0f\u7a97\u53e3\u64ad\u653e\uff0c\u8bf7\u5173\u95ed\u63d2\u4ef6\u6216\u66f4\u6362\u6d4f\u89c8\u5668",License_No_Authorization:"\u64ad\u653e\u5668SDK\u672a\u6fc0\u6d3b",License_Click_To_Apply:"\u70b9\u51fb\u7533\u8bf7License",Rts_Err_Http_Signal_Error:"(RTS)\u4fe1\u4ee4\u8bf7\u6c42\u5931\u8d25",Rts_Err_Play_Failed:"(RTS)\u64ad\u653e\u5931\u8d25",Rts_Err_No_Data_For:"\u6beb\u79d2\u6ca1\u6709\u6570\u636e",Rts_Err_Browser_Not_Support:"(RTS)\u4e0d\u652f\u6301\u6b64\u6d4f\u89c8\u5668",Rts_Err_Not_Support_Webrtc:"(RTS)\u4e0d\u652f\u6301webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)\u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e",Rts_Err_Not_Support_H264:"(RTS)\u4e0d\u652f\u6301H264",Rts_Err_Create_Offer_Error:"(RTS)create offer\u5931\u8d25",Rts_Err_Play_Url_Error:"(RTS)\u64ad\u653eurl\u534f\u8bae\u9519\u8bef",Rts_Err_Subscribe_Nonthing:"(RTS)\u53c2\u6570\u8bbe\u7f6e\u9519\u8bef",Rts_Err_Http_Request_Failed:"(RTS)HTTP\u8bf7\u6c42\u5931\u8d25",Rts_Err_Http_Answer_Failed:"(RTS)answer\u5931\u8d25",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection\u5f02\u5e38",Splayer_Err_Env_Check:"(SP)\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301\u64ad\u653e\u8be5\u89c6\u9891",Splayer_Err_Coroutine:"(SP)Coroutine \u9519\u8bef",Splayer_Err_Decode:"(SP)\u89e3\u7801\u9519\u8bef",Splayer_Err_Buffering:"(SP)\u7f13\u51b2\u533a\u9519\u8bef",Splayer_Err_Parser_Not_Found:"(SP)\u4e0d\u652f\u6301\u7684\u5a92\u4f53\u5bb9\u5668"}},{}],25:[function(e,t,r){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var u=new Uint8Array(256),i=0;i<o.length;i++)u[o.charCodeAt(i)]=i;var s=function(e){for(var t="",r=0;r<e.length;r+=16e3){var i=e.subarray(r,r+16e3);t+=String.fromCharCode.apply(null,i)}return t};t.exports={decode:function(e){for(var t,r,i,n,o=.75*e.length,a=e.length,s=0,o=("="===e[e.length-1]&&(o--,"="===e[e.length-2])&&o--,new ArrayBuffer(o)),l=new Uint8Array(o),c=0;c<a;c+=4)t=u[e.charCodeAt(c)],r=u[e.charCodeAt(c+1)],i=u[e.charCodeAt(c+2)],n=u[e.charCodeAt(c+3)],l[s++]=t<<2|r>>4,l[s++]=(15&r)<<4|i>>2,l[s++]=(3&i)<<6|63&n;return o},encode:function(e){for(var t=new Uint8Array(e),r=t.length,i="",n=0;n<r;n+=3)i=(i=(i=(i+=o[t[n]>>2])+o[(3&t[n])<<4|t[n+1]>>4])+o[(15&t[n+1])<<2|t[n+2]>>6])+o[63&t[n+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},unpackPlayReady:function(e){e=function(e,t,r){if(!e)return"";r||e.byteLength%2==0||console.log("Data has an incorrect length, must be even."),r=e instanceof ArrayBuffer?e:((r=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),r.buffer);for(var i=Math.floor(e.byteLength/2),n=new Uint16Array(i),o=new DataView(r),a=0;a<i;a++)n[a]=o.getUint16(2*a,t);return s(n)}(e,!0,!0);if(-1!=e.indexOf("PlayReadyKeyMessage")){for(var e=(new DOMParser).parseFromString(e,"application/xml"),t=e.getElementsByTagName("HttpHeader"),r={},i=0;i<t.length;++i){var n=t[i].querySelector("name"),o=t[i].querySelector("value");r[n.textContent]=o.textContent}return{header:r,changange:e.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],26:[function(e,t,r){var n=e("./videox-demux.min");function o(){}t.exports=function(e,t,r){void 0===t&&(t=o),void 0===r&&(r=o);var i=new n.Demuxer({progressive:!0});i.on("loadedmetadata",function(e){void 0===e&&(e={}),i.suspend(),i.destroy(),i=null,t(e)}),i.on("error",function(e){r(e)}),i.load(e)}},{"./videox-demux.min":52}],27:[function(e,t,r){var i=e("./oo"),n=e("../player/base/event/eventtype");t.exports.stopPropagation=function(e){window.event?window.event.cancelBubble=!0:e.stopPropagation()},t.exports.register=function(e){e.util={stopPropagation:t.exports.stopPropagation},e.Component=i.extend,e.EventType=n.Player}},{"../player/base/event/eventtype":70,"./oo":43}],28:[function(e,t,r){function i(){t.exports.VideoErrorCodeText={1:n.get("Error_Load_Abort_Text"),2:n.get("Error_Network_Text"),3:n.get("Error_Decode_Text"),4:n.get("Error_Server_Network_NotSupport_Text")},t.exports.VideoLevels={0:n.get("OD"),640:n.get("FD"),960:n.get("LD"),1280:n.get("SD"),1920:n.get("HD"),2580:n.get("2K"),3840:n.get("4K")},t.exports.QualityLevels={OD:n.get("OD"),LD:n.get("LD"),FD:n.get("FD"),SD:n.get("SD"),HD:n.get("HD"),"2K":n.get("2K"),"4K":n.get("4K"),XLD:n.get("XLD"),FHD:n.get("FHD"),SQ:n.get("SQ"),HQ:n.get("HQ")},t.exports.SpeedLevels=[{key:.5,text:n.get("Speed_05X_Text")},{key:1,text:n.get("Speed_1X_Text")},{key:1.25,text:n.get("Speed_125X_Text")},{key:1.5,text:n.get("Speed_15X_Text")},{key:2,text:n.get("Speed_2X_Text")}]}var n=e("../lang/index");t.exports.LOAD_START="loadstart",t.exports.LOADED_METADATA="loadedmetadata",t.exports.LOADED_DATA="loadeddata",t.exports.PROGRESS="progress",t.exports.CAN_PLAY="canplay",t.exports.CAN_PLYA_THROUGH="canplaythrough",t.exports.PLAY="play",t.exports.PAUSE="pause",t.exports.ENDED="ended",t.exports.PLAYING="playing",t.exports.WAITING="waiting",t.exports.ERROR="error",t.exports.SUSPEND="suspend",t.exports.STALLED="stalled",t.exports.AuthKeyExpiredEvent="authkeyexpired",t.exports.USER_EVENT_NAME="__user_events__",t.exports.PLAYER_SDK_CODE=9201,t.exports.FEATURE_ID_H265=30001,t.exports.LicenseResultCode={Success:0,NotFound:1,Expired:2,CertInvalid:3,WasmNotSupported:4,ResourceIncorrect:5,LicenseKeyInvalid:6,DomainInvalid:7},t.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},t.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},t.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5},t.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},t.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,RegionBlock:4023,CrossDomain:4027,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304},t.exports.AuthKeyExpired=7200,t.exports.AuthKeyRefreshExpired=7e3,t.exports.AuthInfoExpired=100,t.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},t.exports.RegionBlockMessages=["black location","denied by region block"],t.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},t.exports.SelectedStreamLevel="selectedStreamLevel",t.exports.SelectedCC="selectedCC",t.exports.HWDetectHvc1="HWDetectHvc1",t.exports.HWDetectHev1="HWDetectHev1",t.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"};i(),t.exports.updateByLanguage=i},{"../lang/index":23}],29:[function(e,t,r){t.exports.get=function(e){for(var t=e+"",r=document.cookie.split(";"),i=0;i<r.length;i++){var n=r[i].trim();if(0==n.indexOf(t))return unescape(n.substring(t.length+1,n.length))}return""},t.exports.set=function(e,t,r){var i=new Date,r=(i.setTime(i.getTime()+24*r*60*60*1e3),"expires="+i.toGMTString());document.cookie=e+"="+escape(t)+"; "+r}},{}],30:[function(e,r,t){var i=e("./object");r.exports.cache={},r.exports.guid=function(e,t){var r,i,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(r=0;r<e;r++)o[r]=n[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(i=0|16*Math.random(),o[r]=n[19==r?3&i|8:i]);return o.join("")},r.exports.expando="vdata"+(new Date).getTime(),r.exports.getData=function(e){var t=e[r.exports.expando];return t||(t=e[r.exports.expando]=r.exports.guid(),r.exports.cache[t]={}),r.exports.cache[t]},r.exports.hasData=function(e){var t="";return!(!(t=e?e[r.exports.expando]:t)||i.isEmpty(r.exports.cache[t]))},r.exports.removeData=function(t){var e="";if(e=t?t[r.exports.expando]:e){delete r.exports.cache[e];try{delete t[r.exports.expando]}catch(e){t.removeAttribute?t.removeAttribute(r.exports.expando):t[r.exports.expando]=null}}}},{"./object":42}],31:[function(e,t,r){var i,d="undefined"==typeof Promise?e("es6-promise").Promise:Promise;e="undefined"!=typeof self?self:this,i=function(){return r=[function(e,t,r){"use strict";!function(e){t.b=function(e){for(var t=(e=void 0===e?{}:e).includes,e=e.excludes,e=void 0===e?[]:e,r=!1,i=!1,n=0,o=void 0===t?[]:t;n<o.length;n++)if(!0===o[n]){r=!0;break}for(var a=0,s=e;a<s.length;a++)if(!0===s[a]){i=!0;break}return r&&!i},t.c=function(e,t,r){e=n.a[e];return void 0!==e&&Object(i.compare)(e,t,r)},t.a=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this};var i=r(11),n=(r.n(i),r(4))}.call(t,r(10))},function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"d",function(){return o}),r.d(t,"b",function(){return a}),r.d(t,"f",function(){return s}),r.d(t,"a",function(){return l}),r.d(t,"e",function(){return c});var i,t=r(3),r=r(0),r=Object(r.a)(),n="InstallTrigger"in((null==r?void 0:r.window)||{})||/firefox/i.test(t.b),o=/trident/i.test(t.b)||/msie/i.test(t.b),a=/edge/i.test(t.b),s=/webkit/i.test(t.b)&&!a,l=void 0!==(null==(i=null==r?void 0:r.window)?void 0:i.chrome)||/chrome/i.test(t.b),c="[object SafariRemoteNotification]"===((null==(r=null==(i=null==r?void 0:r.window)?void 0:i.safari)?void 0:r.pushNotification)||!1).toString()||/safari/i.test(t.b)&&!l},function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"c",function(){return a}),r.d(t,"a",function(){return s});var i=r(1);function n(r){if(console){if(!i.d&&!i.b)return console[r];if("log"===r||"clear"===r)return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console[r].apply(console,e)}}return function(){for(var e=0;e<arguments.length;e++)e,0}}var o=n("log"),a=n("table"),s=n("clear")},function(e,t,r){"use strict";t.a=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return null!=i&&i.document?(e=i.document).createElement.apply(e,t):{}},r.d(t,"b",function(){return n});var t=r(0),i=Object(t.a)(),n=(null==(r=null==i?void 0:i.navigator)?void 0:r.userAgent)||"xxxxx"},function(e,t,r){"use strict";r.d(t,"a",function(){return i});for(var i={},n=0,o=(r(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];n<o.length;n++){var a=o[n].split("/"),s=a[0],a=a[1];i[s]=a}},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"d",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"a",function(){return a}),r.d(t,"e",function(){return s});var t=r(3),i=/ipad/i.test(t.b),n=/macintosh/i.test(t.b),o=/iphone/i.test(t.b),a=/android/i.test(t.b),s=/windows/i.test(t.b)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addListener=function(e){p.addListener(e)},t.removeListener=function(e){p.removeListener(e)},t.isLaunch=function(){return p.isLaunch()},t.launch=function(){p.launch()},t.stop=function(){p.stop()},t.setDetectDelay=function(e){p.setDetectDelay(e)};var i=r(7),n=r(8),o=(r.d(t,"DevtoolsDetector",function(){return i.a}),r.d(t,"checkers",function(){return n}),r(0)),a=(r.d(t,"match",function(){return o.b}),r.d(t,"specificVersionMatch",function(){return o.c}),r(1)),s=(r.d(t,"isFirefox",function(){return a.c}),r.d(t,"isIE",function(){return a.d}),r.d(t,"isEdge",function(){return a.b}),r.d(t,"isWebkit",function(){return a.f}),r.d(t,"isChrome",function(){return a.a}),r.d(t,"isSafari",function(){return a.e}),r(2)),l=(r.d(t,"log",function(){return s.b}),r.d(t,"table",function(){return s.c}),r.d(t,"clear",function(){return s.a}),r(17)),c=(r.d(t,"isMobile",function(){return l.a}),r(4)),u=(r.d(t,"versionMap",function(){return c.a}),r(5)),p=(r.d(t,"isIpad",function(){return u.b}),r.d(t,"isMac",function(){return u.d}),r.d(t,"isIphone",function(){return u.c}),r.d(t,"isAndroid",function(){return u.a}),r.d(t,"isWindows",function(){return u.e}),new i.a({checkers:[n.elementIdChecker,n.regToStringChecker,n.functionToStringChecker,n.depRegToStringChecker,n.dateToStringChecker,n.debuggerChecker]}));t.default=p},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=(o.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop())},o.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},o.prototype.isLaunch=function(){return!this._detectLoopStopped},o.prototype.setDetectDelay=function(e){this._detectLoopDelay=e},o.prototype.addListener=function(e){this._listeners.push(e)},o.prototype.removeListener=function(t){this._listeners=this._listeners.filter(function(e){return e!==t})},o.prototype._broadcast=function(e){for(var t=0,r=this._listeners;t<r.length;t++){var i=r[t];try{i(e.isOpen,e)}catch(e){}}},o.prototype._detectLoop=function(){return i(this,void 0,void 0,function(){var t,r,i,n,o,a=this;return s(this,function(e){switch(e.label){case 0:t=!1,r="",i=0,n=this._checkers,e.label=1;case 1:return i<n.length?[4,(o=n[i]).isEnable()]:[3,6];case 2:return e.sent()?(r=o.name,[4,o.isOpen()]):[3,4];case 3:t=e.sent(),e.label=4;case 4:if(t)return[3,6];e.label=5;case 5:return i++,[3,1];case 6:return t!=this._isOpen&&(this._isOpen=t,this._broadcast({isOpen:t,checkerName:r})),0<this._detectLoopDelay?this._timer=setTimeout(function(){return a._detectLoop()},this._detectLoopDelay):this.stop(),[2]}})})},o);function o(e){e=e.checkers;this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=e.slice()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(9),n=(r.d(t,"depRegToStringChecker",function(){return i.a}),r(12)),o=(r.d(t,"elementIdChecker",function(){return n.a}),r(13)),a=(r.d(t,"functionToStringChecker",function(){return o.a}),r(14)),s=(r.d(t,"regToStringChecker",function(){return a.a}),r(15)),l=(r.d(t,"debuggerChecker",function(){return s.a}),r(16));r.d(t,"dateToStringChecker",function(){return l.a})},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(1),n=r(2),o=r(0),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=/ /,c=!1,u=(l.toString=function(){return c=!0,u.name},{name:"dep-reg-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return c=!1,Object(n.c)({dep:l}),Object(n.a)(),[2,c]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[!0],excludes:[i.c,i.d]})]})})}})},function(e,t){var r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var i;void 0!==(t="function"==typeof(i=function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function p(e){var t=e.replace(/^v/,"").replace(/\+.*$/,""),r=function(e,t){return-1===e.indexOf(t)?e.length:e.indexOf(t)}(t,"-"),i=t.substring(0,r).split(".");return i.push(t.substring(r+1)),i}function d(e){return isNaN(Number(e))?e:Number(e)}function h(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!t.test(e))throw new Error("Invalid argument not valid semver ('"+e+"' received)")}function n(e,t){[e,t].forEach(h);for(var r=p(e),i=p(t),n=0;n<Math.max(r.length-1,i.length-1);n++){var o=parseInt(r[n]||0,10),a=parseInt(i[n]||0,10);if(o>a)return 1;if(a>o)return-1}var s=r[r.length-1],l=i[i.length-1];if(s&&l){var c=s.split(".").map(d),u=l.split(".").map(d);for(n=0;n<Math.max(c.length,u.length);n++){if(void 0===c[n]||"string"==typeof u[n]&&"number"==typeof c[n])return-1;if(void 0===u[n]||"string"==typeof c[n]&&"number"==typeof u[n])return 1;if(c[n]>u[n])return 1;if(u[n]>c[n])return-1}}else if(s||l)return s?-1:1;return 0}var o=[">",">=","=","<","<="],a={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return n.validate=function(e){return"string"==typeof e&&t.test(e)},n.compare=function(e,t,r){!function(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===o.indexOf(e))throw new TypeError("Invalid operator, expected one of "+o.join("|"))}(r);var i=n(e,t);return a[r].indexOf(i)>-1},n})?i.apply(t,[]):i)&&(e.exports=t)},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(1),n=r(2),o=r(0),t=r(3),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=Object(t.a)("div"),c=!1,u=(Object.defineProperty(l,"id",{get:function(){return c=!0,u.name},configurable:!0}),{name:"element-id",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return c=!1,Object(n.b)(l),Object(n.a)(),[2,c]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[!0],excludes:[i.d,i.b,i.c]})]})})}})},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var i=r(1),n=r(2),o=r(5),a=r(0),s=this&&this.__awaiter||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},l=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function c(){}var u=0,p=(c.toString=function(){return u++,""},{name:"function-to-string",isOpen:function(){return s(this,void 0,void 0,function(){return l(this,function(e){return u=0,Object(n.b)(c),Object(n.a)(),[2,2===u]})})},isEnable:function(){return s(this,void 0,void 0,function(){return l(this,function(e){return[2,Object(a.b)({includes:[!0],excludes:[i.c,(o.b||o.c)&&i.a]})]})})}})},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(2),n=r(1),o=r(0),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=/ /,c=!1,u=(l.toString=function(){return c=!0,u.name},{name:"reg-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return c=!1,Object(i.b)(l),Object(i.a)(),[2,c]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[!0],excludes:[n.f]})]})})}})},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},n=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function o(){return(performance||Date).now()}var a={name:"debugger-checker",isOpen:function(){return i(this,void 0,void 0,function(){var t;return n(this,function(e){return t=o(),function(){}.constructor("debugger")(),[2,100<o()-t]})})},isEnable:function(){return i(this,void 0,void 0,function(){return n(this,function(e){return[2,!0]})})}}},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(1),n=r(2),o=r(0),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=new Date,c=0,u=(l.toString=function(){return c++,""},{name:"date-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return c=0,Object(n.b)(l),Object(n.a)(),[2,2===c]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[i.a],excludes:[]})]})})}})},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var t=r(3),i=/mobile/i.test(t.b)}],n={},i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6);function i(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,i),t.l=!0,t)).exports}var r,n},"object"==typeof r&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.devtoolsDetector=i():e.devtoolsDetector=i()},{"es6-promise":8}],32:[function(e,l,t){var i=e("./object");l.exports.el=function(e){return document.getElementById(e)},l.exports.createEl=function(e,t){var r;return e=e||"div",t=t||{},r=document.createElement(e),i.each(t,function(e,t){-1!==e.indexOf("aria-")||"role"==e?r.setAttribute(e,t):r[e]=t}),r},l.exports.addClass=function(e,t){-1==(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className=""===e.className?t:e.className+" "+t)},l.exports.removeClass=function(e,t){var r,i;if(-1!=e.className.indexOf(t)){for(i=(r=e.className.split(" ")).length-1;0<=i;i--)r[i]===t&&r.splice(i,1);e.className=r.join(" ")}},l.exports.hasClass=function(e,t){return-1!=e.className.indexOf(t)},l.exports.getClasses=function(e){return e.className?e.className.split(" "):[]},l.exports.getElementAttributes=function(e){var t,r,i={};if(e&&e.attributes&&0<e.attributes.length)for(var n,o=(n=e.attributes).length-1;0<=o;o--)t=n[o].name,r=n[o].value,"boolean"!=typeof e[t]&&-1===",autoplay,controls,loop,muted,default,".indexOf(","+t+",")||(r=null!==r),i[t]=r;return i},l.exports.insertFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},l.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},l.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},l.exports.css=function(r,e,t){return!(!r||!r.style)&&(e&&t?(r.style[e]=t,!0):t||"string"!=typeof e?!t&&"object"==typeof e&&(i.each(e,function(e,t){r.style[e]=t}),!0):r.style[e])},l.exports.getTransformName=function(e){for(var t=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],r=t[0],i=0,n=t.length;i<n;i++)if(void 0!==e.style[t[i]]){r=t[i];break}return r},l.exports.getTransformEventName=function(e,t){for(var r=["","Webkit","Moz","ms","O"],i=t.toLowerCase(),n=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],o=0,a=n.length;o<a;o++)if(void 0!==e.style[n[o]]){0!=o&&(i=r[o]+t);break}return i},l.exports.addCssByStyle=function(e){var t=document,r=t.createElement("style"),e=(r.setAttribute("type","text/css"),r.styleSheet?r.styleSheet.cssText=e:(e=t.createTextNode(e),r.appendChild(e)),t.getElementsByTagName("head"));(e.length?e[0]:t.documentElement).appendChild(r)},l.exports.getTranslateX=function(e){var t=0;if(e)try{var r=window.getComputedStyle(e),i=l.exports.getTransformName(e),t=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(r[i]).m41}catch(e){console.log(e)}return t},l.exports.getPointerPosition=function(e,t){var r={},i=l.exports.findPosition(e),n=e.offsetWidth,e=e.offsetHeight,o=i.top,i=i.left,a=t.pageY,s=t.pageX;return t.changedTouches&&(s=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(o-a+e)/e)),r.x=Math.max(0,Math.min(1,(s-i)/n)),r},l.exports.findPosition=function(e){var t,r,i,n;return(t=e.getBoundingClientRect&&e.parentNode?e.getBoundingClientRect():t)?(e=document.documentElement,n=document.body,i=e.clientLeft||n.clientLeft||0,r=window.pageXOffset||n.scrollLeft,r=t.left+r-i,i=e.clientTop||n.clientTop||0,e=window.pageYOffset||n.scrollTop,n=t.top+e-i,{left:Math.round(r),top:Math.round(n)}):{left:0,top:0}}},{"./object":42}],33:[function(e,l,t){var c=e("./object"),u=e("./data"),r=e("./ua"),i=e("./fastclick");function p(t,r,e,i){c.each(e,function(e){t(r,e,i)})}l.exports.on=function(o,e,t){if(o){if(c.isArray(e))return p(l.exports.on,o,e,t);r.IS_MOBILE&&"click"==e&&i.attach(o);var a=u.getData(o);a.handlers||(a.handlers={}),a.handlers[e]||(a.handlers[e]=[]),t.guid||(t.guid=u.guid()),a.handlers[e].push(t),a.dispatcher||(a.disabled=!1,a.dispatcher=function(e){if(!a.disabled){e=l.exports.fixEvent(e);var t=a.handlers[e.type];if(t)for(var r=t.slice(0),i=0,n=r.length;i<n&&!e.isImmediatePropagationStopped();i++)r[i].call(o,e)}}),1==a.handlers[e].length&&(o.addEventListener?o.addEventListener(e,a.dispatcher,!1):o.attachEvent&&o.attachEvent("on"+e,a.dispatcher))}},l.exports.off=function(t,e,r){if(t&&u.hasData(t)){var i=u.getData(t);if(i.handlers){if(c.isArray(e))return p(l.exports.off,t,e,r);function n(e){i.handlers[e]=[],l.exports.cleanUpEvents(t,e)}if(e){var o=i.handlers[e];if(o)if(r){if(r.guid)for(var a=0;a<o.length;a++)o[a].guid===r.guid&&o.splice(a--,1);l.exports.cleanUpEvents(t,e)}else n(e)}else for(var s in i.handlers)n(s)}}},l.exports.cleanUpEvents=function(e,t){var r=u.getData(e);0===r.handlers[t].length&&(delete r.handlers[t],e.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),c.isEmpty(r.handlers)&&(delete r.handlers,delete r.dispatcher,delete r.disabled),c.isEmpty(r)&&u.removeData(e)},l.exports.fixEvent=function(e){function t(){return!0}function r(){return!1}if(!e||!e.isPropagationStopped){var i,n,o,a=e||window.event;for(i in e={},a)"layerX"===i||"layerY"===i||"keyboardEvent.keyLocation"===i||"returnValue"==i&&a.preventDefault||(e[i]=a[i]);e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){a.preventDefault&&a.preventDefault(),e.returnValue=!1,e.isDefaultPrevented=t,e.defaultPrevented=!0},e.isDefaultPrevented=r,e.defaultPrevented=!1,e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=r,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=r,null!=e.clientX&&(n=document.documentElement,o=document.body,e.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e},l.exports.trigger=function(e,t){var r,i,n;if(e)return r=u.hasData(e)?u.getData(e):{},i=e.parentNode||e.ownerDocument,"string"==typeof t&&(n=null,!e.paramData&&0!=e.paramData||(n=e.paramData,e.paramData=null,e.removeAttribute(n)),t={type:t,target:e,paramData:n}),t=l.exports.fixEvent(t),r.dispatcher&&r.dispatcher.call(e,t),i&&!t.isPropagationStopped()&&!1!==t.bubbles?l.exports.trigger(i,t):i||t.defaultPrevented||(n=u.getData(t.target),t.target[t.type]&&(n.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),n.disabled=!1)),!t.defaultPrevented},l.exports.one=function(e,t,r){if(e){if(c.isArray(t))return p(l.exports.one,e,t,r);function i(){l.exports.off(e,t,i),r.apply(this,arguments)}i.guid=r.guid=r.guid||u.guid(),l.exports.on(e,t,i)}}},{"./data":30,"./fastclick":34,"./object":42,"./ua":49}],34:[function(e,t,r){function a(n,e){var t;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=n,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!a.notNeeded(n)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=0,o=r.length;i<o;i++)this[r[i]]=function(e,t){return function(){return e.apply(t,arguments)}}(this[r[i]],this);s&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchmove",this.onTouchMove,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(n.removeEventListener=function(e,t,r){var i=Node.prototype.removeEventListener;"click"===e?i.call(n,e,t.hijacked||t,r):i.call(n,e,t,r)},n.addEventListener=function(e,t,r){var i=Node.prototype.addEventListener;"click"===e?i.call(n,e,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),r):i.call(n,e,t,r)}),"function"==typeof n.onclick&&(t=n.onclick,n.addEventListener("click",function(e){t(e)},!1),n.onclick=null)}}var i=0<=navigator.userAgent.indexOf("Windows Phone"),s=0<navigator.userAgent.indexOf("Android")&&!i,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!i,l=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),c=o&&/OS [6-7]_\d/.test(navigator.userAgent),n=0<navigator.userAgent.indexOf("BB10");a.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(o&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},a.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!s;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},a.prototype.sendClick=function(e,t){var r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),t=t.changedTouches[0],(r=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),r.forwardedTouchEvent=!0,e.dispatchEvent(r)},a.prototype.determineEventType=function(e){return s&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(e){var t;o&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"email"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},a.prototype.updateScrollParent=function(e){var t,r=e.fastClickScrollParent;if(!r||!r.contains(e)){t=e;do{if(t.scrollHeight>t.offsetHeight){r=t,e.fastClickScrollParent=t;break}}while(t=t.parentElement)}r&&(r.fastClickLastScrollTop=r.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},a.prototype.onTouchStart=function(e){var t,r,i;if(!(1<e.targetTouches.length)){if(t=this.getTargetElementFromEventTarget(e.target),r=e.targetTouches[0],o){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!l){if(r.identifier&&r.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=r.identifier,this.updateScrollParent(t)}}this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=r.pageX,this.touchStartY=r.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault()}return!0},a.prototype.touchHasMoved=function(e){var e=e.changedTouches[0],t=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>t||Math.abs(e.pageY-this.touchStartY)>t},a.prototype.onTouchMove=function(e){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},a.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(e){var t,r,i,n=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,t=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,c&&(i=e.changedTouches[0],(n=document.elementFromPoint(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset)||n).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=n.tagName.toLowerCase())){if(r=this.findControl(n)){if(this.focus(n),s)return!1;n=r}}else if(this.needsFocus(n))return 100<e.timeStamp-t||o&&window.top!==window&&"input"===i?this.targetElement=null:(this.focus(n),this.sendClick(n,e),o&&"select"===i||(this.targetElement=null,e.preventDefault())),!1;return!(!o||l||!(r=n.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(n)||(e.preventDefault(),this.sendClick(n,e)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(e){return!this.targetElement||!(!e.forwardedTouchEvent&&e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),1))},a.prototype.onClick=function(e){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===e.target.type&&0===e.detail||((e=this.onMouse(e))||(this.targetElement=null),e)},a.prototype.destroy=function(){var e=this.layer;s&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(e){var t,r;if(void 0===window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!s)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(31<r&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(n&&10<=(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=r[2]&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===e.style.touchAction||"manipulation"===e.style.touchAction},a.attach=function(e,t){return new a(e,t)},t.exports=a},{}],35:[function(e,t,r){var n=e("./data");t.exports.bind=function(e,t,r){t.guid||(t.guid=n.guid());function i(){return t.apply(e,arguments)}return i.guid=r?r+"_"+t.guid:t.guid,i}},{"./data":30}],36:[function(e,t,r){function w(){"use strict";w=function(){return a};var a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,r){return e[t]=r}}function s(e,t,r,i){var n,o,a,s,t=t&&t.prototype instanceof d?t:d,t=Object.create(t.prototype),i=new b(i||[]);return c(t,"_invoke",{value:(n=e,o=r,a=i,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return E()}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var i=t.iterator[r.method];if(void 0===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}i=u(i,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;i=i.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}(r,a);if(r){if(r===p)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";r=u(n,o,a);if("normal"===r.type){if(s=a.done?"completed":"suspendedYield",r.arg===p)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s="completed",a.method="throw",a.arg=r.arg)}})}),t}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var p={};function d(){}function h(){}function f(){}var t={},y=(o(t,i,function(){return this}),Object.getPrototypeOf),y=y&&y(y(T([]))),_=(y&&y!==e&&l.call(y,i)&&(t=y),f.prototype=d.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;c(this,"_invoke",{value:function(r,i){function e(){return new s(function(e,t){!function t(e,r,i,n){var o,e=u(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==typeof r&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,i,n)},function(e){t("throw",e,i,n)}):s.resolve(r).then(function(e){o.value=e,i(o)},function(e){return t("throw",e,i,n)});n(e.arg)}(r,i,e,t)})}return t=t?t.then(e,e):e()}})}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function T(t){if(t){var r,e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:E}}function E(){return{value:void 0,done:!0}}return c(_,"constructor",{value:h.prototype=f,configurable:!0}),c(f,"constructor",{value:h,configurable:!0}),h.displayName=o(f,n,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,n,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},g(v.prototype),o(v.prototype,r,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,r,i,n){void 0===n&&(n=Promise);var o=new v(s(e,t,r,i),n);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},g(_),o(_,n,"Generator"),o(_,i,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),i=[];for(t in r)i.push(t);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=T,b.prototype={constructor:b,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var i=this;function e(e,t){return o.type="throw",o.arg=r,i.next=e,t&&(i.method="next",i.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],o=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var a=l.call(n,"catchLoc"),s=l.call(n,"finallyLoc");if(a&&s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&l.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}var o=(n=n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc?null:n)?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,i,n=this.tryEntries[t];if(n.tryLoc===e)return"throw"===(r=n.completion).type&&(i=r.arg,S(n)),i}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},a}function l(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function a(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var i=s.apply(e,a);function n(e){l(i,t,r,n,o,"next",e)}function o(e){l(i,t,r,n,o,"throw",e)}n(void 0)})}}var i,s="undefined"==typeof Promise?e("es6-promise").Promise:Promise;e=self,i=function(){"use strict";function f(i,l,c,e){void 0===l&&(l=!1),void 0===c&&(c="");var u=performance.now(),p=e;return new s(function(o){e=i,void 0===(t=l?100:0)&&(t=100),(r=document.createElement("video")).setAttribute("width",""+t),r.setAttribute("height",""+t),r.setAttribute("muted","muted"),r.setAttribute("crossorigin","anonymous"),r.setAttribute("preload","preload"),r.setAttribute("autoplay","autoplay"),r.setAttribute("webkit-playsinline","webkit-playsinline"),r.setAttribute("playsinline","playsinline"),r.setAttribute("x-webkit-airplay","x-webkit-airplay"),r.setAttribute("playsinline","playsinline"),r.src=e;var e,t,r,a=r,s=setInterval(function(){var e,t,r,i,n;(performance.now()-u>p||0!==a.videoWidth)&&(clearInterval(s),e=0!==a.videoWidth,l?(a.setAttribute("controls","controls"),t=a,void 0===(r=c)&&(r=""),i=document.createElement("dv"),(n=document.createElement("h3")).innerText=r,i.appendChild(t),i.appendChild(n),document.body.appendChild(i)):(a.pause(),a=null),o(e))})})}var i={d:function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},e={},t=(i.d(e,{default:function(){return o}}),navigator.userAgent),r=/qqbrowser/i.test(t.toLowerCase()),n=/Edge/i.test(t),n=/Chrome/i.test(t)&&!n&&!r,y=/Safari/i.test(t)&&!n,r=t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),n=r&&r[1],_=n&&Number(n.split(".")[0]),g=function(){var t=a(w().mark(function e(t){var r;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.blob();case 5:return r=e.sent,e.abrupt("return",URL.createObjectURL(r));case 7:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),v={includeSystemHijack:!0,showVideo:!1,codecTags:["hev1","hvc1"],timeout:2e3},o=function(h){return void 0===h&&(h={}),new s(function(){var t=a(w().mark(function e(t){var r,i,n,o,a,s,l,c,u,p,d;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object.assign({},v,h),r=n.includeSystemHijack,i=n.showVideo,s=n.codecTags,n=n.timeout,o=performance.now(),a=-1<s.indexOf("hvc1"),s=-1<s.indexOf("hev1"),l="https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4",p=u=!(c="https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4"),!(y&&_&&11<=_)){e.next=13;break}if(e.t0=r,e.t0){e.next=8;break}return e.next=7,g(l);case 7:l=e.sent;case 8:return e.next=10,f(l,i,"hvc1",n);case 10:u=e.sent,e.next=33;break;case 13:if(e.t1=a,!e.t1){e.next=23;break}if(e.t2=r,e.t2){e.next=20;break}return e.next=19,g(l);case 19:l=e.sent;case 20:return e.next=22,f(l,i,"hvc1",n);case 22:u=e.sent;case 23:if(e.t3=s,!e.t3){e.next=33;break}if(e.t4=r,e.t4){e.next=30;break}return e.next=29,g(c);case 29:c=e.sent;case 30:return e.next=32,f(c,i,"hev1",n);case 32:p=e.sent;case 33:d=performance.now(),t({isHvc1Supported:u,isHev1Supported:p,time:Math.ceil(d-o)});case 35:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())};return e.default},"object"==typeof r&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.hevcDetector=i():e.hevcDetector=i()},{"es6-promise":8}],37:[function(e,t,r){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=s.parseURL(e);if(i)return i.path=s.normalizePath(i.path),s.buildURLFromParts(i);throw new Error("Error trying to parse base URL.")}i=s.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):t;t=s.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(e=o.exec(t.path),t.netLoc=e[1],t.path=e[2]),t.netLoc&&!t.path&&(t.path="/");var n,e={scheme:t.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(e.netLoc=t.netLoc,"/"!==i.path[0]&&(i.path?(n=(n=t.path).substring(0,n.lastIndexOf("/")+1)+i.path,e.path=s.normalizePath(n)):(e.path=t.path,i.params||(e.params=t.params,i.query)||(e.query=t.query)))),null===e.path&&(e.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(e)},parseURL:function(e){e=i.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};t.exports=s},{}],38:[function(e,t,r){function i(e){for(var t in e="string"==typeof e?this.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}var n=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;i.prototype={decimalInteger:function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},hexadecimalInteger:function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},hexadecimalIntegerAsNumber:function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},decimalFloatingPoint:function(e){return parseFloat(this[e])},enumeratedString:function(e){return this[e]},decimalResolution:function(e){e=n.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},parseAttrList:function(e){var t,r={};for(o.lastIndex=0;null!==(t=o.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r}},t.exports=i},{}],39:[function(e,t,r){function S(){this.method=null,this.key=null,this.iv=null,this._uri=null}function b(){this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function i(){this.loaders={}}var n=e("../constants"),l=e("../playerutil"),T=e("./attrlist"),c=e("../io"),o=e("./URLToolkit"),u=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,p=/#EXT-X-MEDIA:(.*)/g,E=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),w=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,d="RegionBlock";b.prototype.getUrl=function(){return!this._url&&this.relurl&&(this._url=o.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},b.prototype.Seturl=function(e){this._url=e},b.prototype.getProgramDateTime=function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime},b.prototype.GetbyteRange=function(){var e,t,r;return this._byteRange||(e=this._byteRange=[],this.rawByteRange&&(1===(t=this.rawByteRange.split("@",2)).length?(r=this.lastByteRangeEndOffset,e[0]=r||0):e[0]=parseInt(t[1]),e[1]=parseInt(t[0])+e[0])),this._byteRange},b.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]},b.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]},b.prototype.getDecryptdata=function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata};i.prototype=((e={parseMasterPlaylist:function(e,t){var r=[];for(u.lastIndex=0;null!=(o=u.exec(e));){var i={},n=i.attrs=new T(o[1]),o=(i.url=this.resolve(o[2],t),n.decimalResolution("RESOLUTION"));if(o&&(i.width=o.width,i.height=o.height),i.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),i.name=n.NAME,a=n.CODECS)for(var a=a.split(/[ ,]+/),s=0;s<a.length;s++){var l=a[s];-1!==l.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(l):-1!==l.indexOf("hvc1")?i.videoCodec=l:i.audioCodec=l}r.push(i)}return r},parseMasterPlaylistMedia:function(e,t,r,i){var n=[],o=0;for(p.lastIndex=0;null!=(s=p.exec(e));){var a={},s=new T(s[1]);s.TYPE===r&&(a.groupId=s["GROUP-ID"],a.name=s.NAME,a.type=r,a.default="YES"===s.DEFAULT,a.autoselect="YES"===s.AUTOSELECT,a.forced="YES"===s.FORCED,s.URI&&(a.url=this.resolve(s.URI,t)),a.lang=s.LANGUAGE,a.name||(a.name=a.lang),i&&(a.audioCodec=i),a.id=o++,n.push(a))}return n},avc1toavcoti:function(e){var t=e.split("."),r=2<t.length?(r=t.shift()+".",(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)):e;return r},load:function(o,a,i){var s=this;c.get(o,function(e){var t,r,i,n=s.parseMasterPlaylist(e,o);n.length&&(t=s.parseMasterPlaylistMedia(e,o,"AUDIO",n[0].audioCodec),r=s.parseMasterPlaylistMedia(e,o,"SUBTITLES"),t.length)&&(i=!1,t.forEach(function(e){e.url||(i=!0)}),!1===i)&&n[0].audioCodec&&!n[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),t.unshift({type:"main",name:"main"})),a({levels:n,audioTracks:t,subtitles:r,url:o,string:e})},function(e,t,r){i&&((r=l.parseHttpHeaders(r)["x-tengine-error"])&&-1<n.RegionBlockMessages.indexOf(r)&&(e=d),i(e,t))})},loadMediaPlaylist:function(e,t,r){var i=this,n=(e=e||{}).string,o=e.url;n?(e=i.parseLevelPlaylist(n,o),t(e)):c.get(o,function(e){e=i.parseLevelPlaylist(e,o);t(e)},function(e){r&&r(e)})},resolve:function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(e,t){var r=[];for(u.lastIndex=0;null!=(o=u.exec(e));){var i={},n=i.attrs=new T(o[1]),o=(i.url=this.resolve(o[2],t),n.decimalResolution("RESOLUTION"));if(o&&(i.width=o.width,i.height=o.height),i.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),i.name=n.NAME,a=n.CODECS)for(var a=a.split(/[ ,]+/),s=0;s<a.length;s++){var l=a[s];-1!==l.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(l):-1!==l.indexOf("hvc1")?i.videoCodec=l:i.audioCodec=l}r.push(i)}return r},e.parseMasterPlaylistMedia=function(e,t,r,i){var n=[],o=0;for(p.lastIndex=0;null!=(s=p.exec(e));){var a={},s=new T(s[1]);s.TYPE===r&&(a.groupId=s["GROUP-ID"],a.name=s.NAME,a.type=r,a.default="YES"===s.DEFAULT,a.autoselect="YES"===s.AUTOSELECT,a.forced="YES"===s.FORCED,s.URI&&(a.url=this.resolve(s.URI,t)),a.lang=s.LANGUAGE,a.name||(a.name=a.lang),i&&(a.audioCodec=i),a.id=o++,n.push(a))}return n},e.avc1toavcoti=function(e){var t=e.split("."),r=2<t.length?(r=t.shift()+".",(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)):e;return r},e.parseLevelPlaylist=function(e,t,r,i){var n,o,a=0,s=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},c=new S,u=0,p=null,d=new b;for(E.lastIndex=0;null!==(n=E.exec(e));){var h=n[1];if(h){d.duration=parseFloat(h);var f=(" "+n[2]).slice(1);d.title=f||null,d.tagList.push(f?["INF",h,f]:["INF",h])}else if(n[3])isNaN(d.duration)||(f=a++,d.type=i,d.start=s,d.levelkey=c,d.sn=f,d.level=r,d.cc=u,d.baseurl=t,d.relurl=(" "+n[3]).slice(1),l.fragments.push(d),s+=(p=d).duration,d=new b);else if(n[4])d.rawByteRange=(" "+n[4]).slice(1),p&&(h=p.byteRangeEndOffset)&&(d.lastByteRangeEndOffset=h);else if(n[5])d.rawProgramDateTime=(" "+n[5]).slice(1),d.tagList.push(["PROGRAM-DATE-TIME",d.rawProgramDateTime]),void 0===l.programDateTime&&(l.programDateTime=new Date(new Date(Date.parse(n[5]))-1e3*s));else{for(n=n[0].match(w),o=1;o<n.length&&void 0===n[o];o++);var y=(" "+n[o+1]).slice(1),_=(" "+n[o+2]).slice(1);switch(n[o]){case"#":d.tagList.push(_?[y,_]:[y]);break;case"PLAYLIST-TYPE":l.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(y);break;case"TARGETDURATION":l.targetduration=parseFloat(y);break;case"VERSION":l.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":u++,d.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(y);break;case"KEY":var g=new T(y),v=g.enumeratedString("METHOD"),m=g.URI,g=g.hexadecimalInteger("IV");v&&(c=new S,m)&&0<=["AES-128","SAMPLE-AES"].indexOf(v)&&(c.method=v,c.baseuri=t,c.reluri=m,c.key=null,c.iv=g);break;case"START":v=new T(y).decimalFloatingPoint("TIME-OFFSET");isNaN(v)||(l.startTimeOffset=v);break;case"MAP":m=new T(y);d.relurl=m.URI,d.rawByteRange=m.BYTERANGE,d.baseurl=t,d.level=r,d.type=i,d.sn="initSegment",l.initSegment=d,d=new b;break;case"PART-INF":g=new T(y);l.partTarget=g.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+n)}}}return(d=p)&&!d.relurl&&(l.fragments.pop(),s-=d.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=a-1,l},e),i.ERROR_REGION_BLOCK=d,t.exports=i},{"../constants":28,"../io":40,"../playerutil":46,"./URLToolkit":37,"./attrlist":38}],40:[function(e,s,t){var h=e("./url");s.exports.get=function(e,t,r,i,n){s.exports.ajax("GET",e,{},t,r,i,n)},s.exports.post=function(e,t,r,i,n,o){var a={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"};s.exports.ajax("POST",e,t,r,i,n,o,a)},s.exports.postWithHeader=function(e,t,r,i,n){s.exports.ajax("POST",e,t,i,n,!0,!1,r)},s.exports.ajax=function(e,t,r,i,n,o,a,s){var l,c,u,p;n=n||function(){},"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),c=new XMLHttpRequest,u=h.parseUrl(t),p=window.location,!(u.protocol+u.host!==p.protocol+p.host)||!window.XDomainRequest||"withCredentials"in c?(l="file:"==u.protocol||"file:"==p.protocol,c.onreadystatechange=function(){4===c.readyState&&(200===c.status||l&&0===c.status?i(c.responseText):n(c.responseText,c.status,c))}):((c=new window.XDomainRequest).onload=function(){i(c.responseText)},c.onerror=n,c.onprogress=function(){},c.ontimeout=n);try{if(void 0===o&&(o=!0),c.open(e,t,o),a&&(c.withCredentials=!0),s)for(var d in s)s.hasOwnProperty(d)&&c.setRequestHeader(d,s[d])}catch(e){return void n(e)}},s.exports.jsonp=function(e,t,r){var i="jsonp_callback_"+Math.round(1e5*Math.random()),n=document.createElement("script");e&&(n.src=e+(0<=e.indexOf("?")?"&":"?")+"callback="+i+"&cb="+i,n.onerror=function(){delete window[i],document.body.removeChild(n),r()},n.onload=function(){setTimeout(function(){window[i]&&(delete window[i],document.body.removeChild(n))},0)},window[i]=function(e){delete window[i],document.body.removeChild(n),t(e)},document.body.appendChild(n))},s.exports.loadJS=function(e,t,r){var i=document.getElementsByTagName("HEAD").item(0),n=document.createElement("script");e&&e.toLowerCase().indexOf("https://")<0&&e.toLowerCase().indexOf("http://")<0&&(e=document.URL.replace(/(\/[^\/]*?)$/i,"")+e),n.type="text/javascript",n.src=e,n.onload=function(){t&&t()},n.onerror=function(){r&&r()},i.appendChild(n)}},{"./url":50}],41:[function(e,t,r){var a=e("./dom");t.exports.render=function(e,t){var r=t.align||(t.className?"":"tl"),i=t.x||0,t=t.y||0,n=i.indexOf&&0<i.indexOf("%")?"":"px",o=t.indexOf&&0<t.indexOf("%")?"":"px";"tl"===r?a.css(e,{float:"left","margin-left":i+n,"margin-top":t+o}):"tr"===r?a.css(e,{float:"right","margin-right":i+n,"margin-top":t+o}):"tlabs"===r?a.css(e,{position:"absolute",left:i+n,top:t+o}):"trabs"===r?a.css(e,{position:"absolute",right:i+n,top:t+o}):"blabs"===r?a.css(e,{position:"absolute",left:i+n,bottom:t+o}):"brabs"===r?a.css(e,{position:"absolute",right:i+n,bottom:t+o}):"cc"===r&&a.addClass(e,"loading-center")}},{"./dom":32}],42:[function(e,a,t){var s=Object.prototype.hasOwnProperty;a.exports.create=Object.create||function(e){function t(){}return t.prototype=e,new t},a.exports.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(arg)},a.exports.isEmpty=function(e){for(var t in e)if(null!==e[t])return!1;return!0},a.exports.each=function(e,t,r){if(a.exports.isArray(e))for(var i=0,n=e.length;i<n&&!1!==t.call(r||this,e[i],i);++i);else for(var o in e)if(s.call(e,o)&&!1===t.call(r||this,o,e[o]))break;return e},a.exports.merge=function(e,t){if(t)for(var r in t)s.call(t,r)&&(e[r]=t[r]);return e},a.exports.deepMerge=function(e,t){var r,i,n;for(r in e=a.exports.copy(e),t)s.call(t,r)&&(i=e[r],n=t[r],a.exports.isPlain(i)&&a.exports.isPlain(n)?e[r]=a.exports.deepMerge(i,n):e[r]=t[r]);return e},a.exports.copy=function(e){return a.exports.merge({},e)},a.exports.isPlain=function(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object},a.exports.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a.exports.unescape=function(e){return e.replace(/&([^;]+);/g,function(e,t){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[t.toLowerCase()]||e})}},{}],43:[function(e,t,r){var n,o=e("./object");(n=function(){}).extend=function(e){var t,r,i=(e=e||{}).init||e.init||this.prototype.init||this.prototype.init||function(){};for(r in(((t=function(){i.apply(this,arguments)}).prototype=o.create(this.prototype)).constructor=t).extend=n.extend,t.create=n.create,e)e.hasOwnProperty(r)&&(t.prototype[r]=e[r]);return t},n.create=function(){var e=o.create(this.prototype);return this.apply(e,arguments),e},t.exports=n},{"./object":42}],44:[function(e,t,r){var i=!new Function("try {return this===window;}catch(e){ return false;}")();t.exports.isSSR=i},{}],45:[function(e,f,t){var y=e("./object"),r=e("../config"),i=e("./dom"),n=e("./cookie"),o=e("./constants"),a=e("../lang/index"),s=e("./ua"),l=e("./io"),_=e("../player/base/plugin/defaultemptycomponent"),c=e("./hardware-decoding-detector"),g={preload:!0,autoplay:!0,useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],snapshotWatermark:{left:"500",top:"100",text:"",font:"16px \u5b8b\u4f53",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!0,stashInitialSizeForFlv:32,flvOption:{accurateSeek:!0},hlsOption:{stopLoadAsPaused:!1},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,lowLatencyMode:!1,useHls2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsFallbackSource:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+r.domain+"/de/prismplayer-flash/"+r.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null},u=(f.exports.defaultH5Layout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}],f.exports.defaultAudioLayout=[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}],f.exports.defaultFlashLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}],f.exports.canPlayType=function(e){var t=document.createElement("video");return t.canPlayType?t.canPlayType(e):""},f.exports.canPlayHls=function(){return""!=f.exports.canPlayType("application/x-mpegURL")},f.exports.isUsedHlsPluginOnMobile=function(e){return!!(s.IS_MOBILE&&(s.IS_CHROME||s.IS_FIREFOX||s.IS_X5||s.IS_EDGE_NEW)&&f.exports.isSupportHls())},f.exports.isSafariUsedHlsPlugin=function(e){return!!(s.os.pc&&s.browser.safari&&e)},f.exports.hasUIComponent=function(e,t){if(void 0!==e&&e&&0!=e.length)for(var r=0,i=e.length;r<i;r++){var n=e[r].name;if(n==t)return!0;if("controlBar"==n)return f.exports.hasUIComponent(e[r].children,t)}return!1},f.exports.validateSource=function(e){return!0},f.exports.supportH5Video=function(){return void 0!==document.createElement("video").canPlayType},f.exports.createWrapper=function(e){var t=e.id,t="string"==typeof t?(0===t.indexOf("#")&&(t=t.slice(1)),i.el(t)):t;if(t&&t.nodeName)return f.exports.adjustContainerLayout(t,e),t;throw new TypeError("\u6ca1\u6709\u4e3a\u64ad\u653e\u5668\u6307\u5b9a\u5bb9\u5668")},f.exports.adjustContainerLayout=function(e,t){t.width&&!e.style.width&&(e.style.width=t.width),t.height&&!e.style.height&&(e.style.height=t.height)},f.exports.isSupportHls=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return e&&t},f.exports.isSupportFlv=function(){return f.exports.isSupportHls()},f.exports.isSupportMSE=function(){return!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&f.exports.isSupportedMediaSource()},f.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},f.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&f.exports.isSupportMSE()},f.exports.isAudio=function(e){return e&&0<e.toLowerCase().indexOf(".mp3")},f.exports.isLiveShift=function(e){return e.isLive&&e.liveStartTime&&e.liveOverTime},f.exports.isHls=function(e){return e&&0<e.toLowerCase().indexOf(".m3u8")},f.exports.isDash=function(e){return e&&0<e.toLowerCase().indexOf(".mpd")},f.exports.isFlv=function(e){return e&&0<e.toLowerCase().indexOf(".flv")},f.exports.isRTMP=function(e){return e&&-1<e.toLowerCase().indexOf("rtmp:")},f.exports.isRts=function(e){return e&&-1<e.toLowerCase().indexOf("artc:")},f.exports.isMp4=function(e){return e&&-1<e.toLowerCase().indexOf(".mp4")},f.exports.checkSecuritSupport=function(){return f.exports.isSupportHls()?"":s.IS_IOS?a.get("iOSNotSupportVodEncription"):a.get("UseChromeForVodEncription")},f.exports.nativeSupportH265=function(){return s.IS_IOS||s.IS_MAC_SAFARI},f.exports.findSelectedStreamLevel=function(e,t){var r=t;if(r||(r=n.get(o.SelectedStreamLevel))){for(var i=0;i<e.length;i++)if(e[i].definition==r)return i}else n.set(o.SelectedStreamLevel,e[0].definition,365);return 0},f.exports.getHistoryDetectResult=function(e){if(e)return"hvc1"===e?n.get(o.HWDetectHvc1):"hev1"===e?n.get(o.HWDetectHev1):void 0},f.exports.setHistoryDetectResult=function(e,t){var r="unknownCodec";"hvc1"===e?r=o.HWDetectHvc1:"hev1"===e&&(r=o.HWDetectHev1),n.set(r,t)},f.exports.handleOption=function(e,t){f.exports.isRts(e.source)&&(e.isLive=!0);var r,i=y.merge(y.copy(g),e),n=[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}],o=!1;if(e.useFlashPrism||f.exports.isRTMP(e.source)?(o=!0,n=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(r=f.exports.isLiveShift(i))?(n.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),n.push({name:"playButton",align:"tl",x:15,y:12}),n.push({name:"liveDisplay",align:"tl",x:15,y:6})):n.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),e.isLive)if(void 0===e.skinLayout)i.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:f.exports.isRts(e.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:n}];else if(0!=e.skinLayout){for(var a=e.skinLayout.length,s=[],l=-1,c=0;c<a;c++)if("controlBar"==i.skinLayout[c].name){for(var l=c,u=i.skinLayout[c].children.length,p=0;p<u;p++){var d,h=i.skinLayout[c].children[p].name;"liveDisplay"!=h&&"liveIco"!=h&&"fullScreenButton"!=h&&"volume"!=h&&"snapshot"!=h&&"setting"!=h&&"subtitle"!=h&&(!r||"progress"!=h&&"playButton"!=h&&"timeDisplay"!=h)||(d=i.skinLayout[c].children[p],"progress"==h?d.name="liveShiftProgress":"timeDisplay"==h?d.name="liveShiftTimeDisplay":o&&"liveDisplay"==h&&(d.name="liveIco"),s.push(d))}break}-1!=l&&(i.skinLayout[l].children=s)}return(void 0===e.components||!e.components||y.isArray(e.components)&&0==e.components.length)&&"false"!=e.components&&(i.components=[_]),i},f.exports.getLiveHostByRegion=function(e){var t="live.aliyuncs.com";return e&&-1<["ap-southeast-1","eu-central-1"].indexOf(e)?"live."+e+".aliyuncs.com":t},f.exports.isVideoTag=function(e){return e&&"string"==typeof e.nodeName&&"video"===e.nodeName.toLowerCase()},f.exports.unqiueTextTracks=function(e){var t=[],t=(e=void 0===e?[]:e).reduce(function(e,t){var r;return e.some(function(e){return e.srclang===t.srclang})?e:((r=t).label=t.label||t.srclang,[].concat(e,[r]))},[]),r={};return t.forEach(function(e,t){r[e.label]?r[e.label].push(t):r[e.label]=[t]}),Object.keys(r).forEach(function(e){e=r[e]||[];1<e.length&&e.forEach(function(e){t[e].label=t[e].label+"("+t[e].srclang+")"})}),t},f.exports.isHvc1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hvc1")},f.exports.isHev1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hev1")},f.exports.isH265Codec=function(e){return f.exports.isHvc1Codec(e=void 0===e?"":e)||f.exports.isHev1Codec(e)},f.exports.getVideoTrack=function(e){var t;return(e=void 0===e?[]:e).forEach(function(e){1===Number(e.type)&&(t=e)}),t},s.IS_ANDROID&&(s.dingTalk()||s.IS_UC||s.is_X5||s.IS_HUAWEI||s.IS_XIAOMI||s.IS_OPPO||s.IS_VIVO||s.IS_MEIZU||s.IS_SAMSUNG||s.IS_WEBVIEW)||s.os&&"windows"===s.os.name&&s.IS_UC);f.exports.shouldUseBasePlayer=function(t,r){var e,i="supported",n="unsupported";return!t||(e=f.exports.isHvc1Codec(t),f.exports.nativeSupportH265()&&e)||function(){if(!(!u&&(s.IS_CHROME||s.IS_EDGE_NEW)))return!1;var t=0;try{t=s.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch(e){t=0}return!(parseInt(t)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))}()?r(!0):u?(e=f.exports.getHistoryDetectResult(t))===i?r(!0):e===n?r(!1):void c({codecTags:[t],timeout:2e3}).then(function(e){e=e.isHev1Supported||e.isHvc1Supported;if(f.exports.setHistoryDetectResult(t,e?i:n),e)return r(!0);r(!1)}).catch(function(e){console.log("hevcDetector ERROR",e),r(!1)}):r(!1)},f.exports.parseHttpHeaders=function(e){if(e)try{var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return t.forEach(function(e){var e=e.split(": "),t=e.shift(),e=e.join(": ");r[t]=e}),r}catch(e){}},f.exports.detectRegionBlock=function(e,i){l.get(e,function(){i(!1)},function(e,t,r){r=f.exports.parseHttpHeaders(r)["x-tengine-error"];403===t&&r&&-1<o.RegionBlockMessages.indexOf(r)?i(!0):i(!1)})}},{"../config":14,"../lang/index":23,"../player/base/plugin/defaultemptycomponent":92,"./constants":28,"./cookie":29,"./dom":32,"./hardware-decoding-detector":36,"./io":40,"./object":42,"./ua":49}],46:[function(e,f,t){var y=e("./object"),r=e("../config"),i=e("./dom"),n=e("./cookie"),o=e("./constants"),a=e("../lang/index"),s=e("./ua"),l=e("./io"),_=e("../player/base/plugin/defaultemptycomponent"),c=e("./hardware-decoding-detector"),g={preload:!0,autoplay:!0,useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],snapshotWatermark:{left:"500",top:"100",text:"",font:"16px \u5b8b\u4f53",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!0,stashInitialSizeForFlv:32,flvOption:{accurateSeek:!0},hlsOption:{stopLoadAsPaused:!1},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,lowLatencyMode:!1,useHls2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsFallbackSource:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+r.domain+"/de/prismplayer-flash/"+r.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null},u=(f.exports.defaultH5Layout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}],f.exports.defaultAudioLayout=[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}],f.exports.defaultFlashLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}],f.exports.canPlayType=function(e){var t=document.createElement("video");return t.canPlayType?t.canPlayType(e):""},f.exports.canPlayHls=function(){return""!=f.exports.canPlayType("application/x-mpegURL")},f.exports.isUsedHlsPluginOnMobile=function(e){return!!(s.IS_MOBILE&&(s.IS_CHROME||s.IS_FIREFOX||s.IS_X5||s.IS_EDGE_NEW)&&f.exports.isSupportHls())},f.exports.isSafariUsedHlsPlugin=function(e){return!!(s.os.pc&&s.browser.safari&&e)},f.exports.hasUIComponent=function(e,t){if(void 0!==e&&e&&0!=e.length)for(var r=0,i=e.length;r<i;r++){var n=e[r].name;if(n==t)return!0;if("controlBar"==n)return f.exports.hasUIComponent(e[r].children,t)}return!1},f.exports.validateSource=function(e){return!0},f.exports.supportH5Video=function(){return void 0!==document.createElement("video").canPlayType},f.exports.createWrapper=function(e){var t=e.id,t="string"==typeof t?(0===t.indexOf("#")&&(t=t.slice(1)),i.el(t)):t;if(t&&t.nodeName)return f.exports.adjustContainerLayout(t,e),t;throw new TypeError("\u6ca1\u6709\u4e3a\u64ad\u653e\u5668\u6307\u5b9a\u5bb9\u5668")},f.exports.adjustContainerLayout=function(e,t){t.width&&!e.style.width&&(e.style.width=t.width),t.height&&!e.style.height&&(e.style.height=t.height)},f.exports.isSupportHls=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return e&&t},f.exports.isSupportFlv=function(){return f.exports.isSupportHls()},f.exports.isSupportMSE=function(){return!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&f.exports.isSupportedMediaSource()},f.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},f.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&f.exports.isSupportMSE()},f.exports.isAudio=function(e){return e&&0<e.toLowerCase().indexOf(".mp3")},f.exports.isLiveShift=function(e){return e.isLive&&e.liveStartTime&&e.liveOverTime},f.exports.isHls=function(e){return e&&0<e.toLowerCase().indexOf(".m3u8")},f.exports.isDash=function(e){return e&&0<e.toLowerCase().indexOf(".mpd")},f.exports.isFlv=function(e){return e&&0<e.toLowerCase().indexOf(".flv")},f.exports.isRTMP=function(e){return e&&-1<e.toLowerCase().indexOf("rtmp:")},f.exports.isRts=function(e){return e&&-1<e.toLowerCase().indexOf("artc:")},f.exports.isMp4=function(e){return e&&-1<e.toLowerCase().indexOf(".mp4")},f.exports.checkSecuritSupport=function(){return f.exports.isSupportHls()?"":s.IS_IOS?a.get("iOSNotSupportVodEncription"):a.get("UseChromeForVodEncription")},f.exports.nativeSupportH265=function(){return s.IS_IOS||s.IS_MAC_SAFARI},f.exports.findSelectedStreamLevel=function(e,t){var r=t;if(r||(r=n.get(o.SelectedStreamLevel))){for(var i=0;i<e.length;i++)if(e[i].definition==r)return i}else n.set(o.SelectedStreamLevel,e[0].definition,365);return 0},f.exports.getHistoryDetectResult=function(e){if(e)return"hvc1"===e?n.get(o.HWDetectHvc1):"hev1"===e?n.get(o.HWDetectHev1):void 0},f.exports.setHistoryDetectResult=function(e,t){var r="unknownCodec";"hvc1"===e?r=o.HWDetectHvc1:"hev1"===e&&(r=o.HWDetectHev1),n.set(r,t)},f.exports.handleOption=function(e,t){f.exports.isRts(e.source)&&(e.isLive=!0);var r,i=y.merge(y.copy(g),e),n=[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}],o=!1;if(e.useFlashPrism||f.exports.isRTMP(e.source)?(o=!0,n=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(r=f.exports.isLiveShift(i))?(n.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),n.push({name:"playButton",align:"tl",x:15,y:12}),n.push({name:"liveDisplay",align:"tl",x:15,y:6})):n.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),e.isLive)if(void 0===e.skinLayout)i.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:f.exports.isRts(e.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:n}];else if(0!=e.skinLayout){for(var a=e.skinLayout.length,s=[],l=-1,c=0;c<a;c++)if("controlBar"==i.skinLayout[c].name){for(var l=c,u=i.skinLayout[c].children.length,p=0;p<u;p++){var d,h=i.skinLayout[c].children[p].name;"liveDisplay"!=h&&"liveIco"!=h&&"fullScreenButton"!=h&&"volume"!=h&&"snapshot"!=h&&"setting"!=h&&"subtitle"!=h&&(!r||"progress"!=h&&"playButton"!=h&&"timeDisplay"!=h)||(d=i.skinLayout[c].children[p],"progress"==h?d.name="liveShiftProgress":"timeDisplay"==h?d.name="liveShiftTimeDisplay":o&&"liveDisplay"==h&&(d.name="liveIco"),s.push(d))}break}-1!=l&&(i.skinLayout[l].children=s)}return(void 0===e.components||!e.components||y.isArray(e.components)&&0==e.components.length)&&"false"!=e.components&&(i.components=[_]),i},f.exports.getLiveHostByRegion=function(e){var t="live.aliyuncs.com";return e&&-1<["ap-southeast-1","eu-central-1"].indexOf(e)?"live."+e+".aliyuncs.com":t},f.exports.isVideoTag=function(e){return e&&"string"==typeof e.nodeName&&"video"===e.nodeName.toLowerCase()},f.exports.unqiueTextTracks=function(e){var t=[],t=(e=void 0===e?[]:e).reduce(function(e,t){var r;return e.some(function(e){return e.srclang===t.srclang})?e:((r=t).label=t.label||t.srclang,[].concat(e,[r]))},[]),r={};return t.forEach(function(e,t){r[e.label]?r[e.label].push(t):r[e.label]=[t]}),Object.keys(r).forEach(function(e){e=r[e]||[];1<e.length&&e.forEach(function(e){t[e].label=t[e].label+"("+t[e].srclang+")"})}),t},f.exports.isHvc1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hvc1")},f.exports.isHev1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hev1")},f.exports.isH265Codec=function(e){return f.exports.isHvc1Codec(e=void 0===e?"":e)||f.exports.isHev1Codec(e)},f.exports.getVideoTrack=function(e){var t;return(e=void 0===e?[]:e).forEach(function(e){1===Number(e.type)&&(t=e)}),t},s.IS_ANDROID&&(s.dingTalk()||s.IS_UC||s.is_X5||s.IS_HUAWEI||s.IS_XIAOMI||s.IS_OPPO||s.IS_VIVO||s.IS_MEIZU||s.IS_SAMSUNG||s.IS_WEBVIEW)||s.os&&"windows"===s.os.name&&s.IS_UC);f.exports.shouldUseBasePlayer=function(t,r){var e,i="supported",n="unsupported";return!t||(e=f.exports.isHvc1Codec(t),f.exports.nativeSupportH265()&&e)||function(){if(!(!u&&(s.IS_CHROME||s.IS_EDGE_NEW)))return!1;var t=0;try{t=s.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch(e){t=0}return!(parseInt(t)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))}()?r(!0):u?(e=f.exports.getHistoryDetectResult(t))===i?r(!0):e===n?r(!1):void c({codecTags:[t],timeout:2e3}).then(function(e){e=e.isHev1Supported||e.isHvc1Supported;if(f.exports.setHistoryDetectResult(t,e?i:n),e)return r(!0);r(!1)}).catch(function(e){console.log("hevcDetector ERROR",e),r(!1)}):r(!1)},f.exports.parseHttpHeaders=function(e){if(e)try{var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return t.forEach(function(e){var e=e.split(": "),t=e.shift(),e=e.join(": ");r[t]=e}),r}catch(e){}},f.exports.detectRegionBlock=function(e,i){l.get(e,function(){i(!1)},function(e,t,r){r=f.exports.parseHttpHeaders(r)["x-tengine-error"];403===t&&r&&-1<o.RegionBlockMessages.indexOf(r)?i(!0):i(!1)})}},{"../config":14,"../lang/index":23,"../player/base/plugin/defaultemptycomponent":92,"./constants":28,"./cookie":29,"./dom":32,"./hardware-decoding-detector":36,"./io":40,"./object":42,"./ua":49}],47:[function(e,o,t){var i=e("./object"),a=e("../player/adaptiveplayer"),s=e("./constants").USER_EVENT_NAME;o.exports.reloadInstance=function(e,t,r){r.dispose();var i=e.readyCallback,n=e._readyCallbackCalled,e=a.create(e,function(e){t(e),n||i(e)});o.exports.restoreUserEvents(e),o.exports.removeAllProps(r),(r.__proto__=e)[s]=r[s]},o.exports.storeUserEvents=function(e){var r=e,i=r.__proto__.on,n={};r.on=function(e,t){"function"==typeof t&&(n[e]?n[e].push(t):n[e]=[t],this._el)&&(t.binded=!0,i.call(r,e,t))},r[s]=n},o.exports.restoreUserEvents=function(r){var e=player[s];e&&i.each(e,function(t){e[t].forEach(function(e){r.on(t,e)})})},o.exports.removeAllProps=function(e,t){for(var r in t=[].concat(t=t||[],[s]),e)e.hasOwnProperty(r)&&-1===t.indexOf(r)&&delete e[r]}},{"../player/adaptiveplayer":67,"./constants":28,"./object":42}],48:[function(e,t,r){t.exports.set=function(t,r){try{window.localStorage&&localStorage.setItem(t,r)}catch(e){window[t+"_localStorage"]=r}},t.exports.get=function(t){try{if(window.localStorage)return localStorage.getItem(t)}catch(e){return window[t+"_localStorage"]}return""}},{}],49:[function(e,x,t){var r,i,n,o;if(x.exports.USER_AGENT=navigator.userAgent,x.exports.IS_IPHONE=/iPhone/i.test(x.exports.USER_AGENT),x.exports.IS_IPAD=/iPad/i.test(x.exports.USER_AGENT),x.exports.IS_IPOD=/iPod/i.test(x.exports.USER_AGENT),x.exports.IS_MAC=/mac/i.test(x.exports.USER_AGENT),x.exports.IS_EDGE=/Edge/i.test(x.exports.USER_AGENT),x.exports.IS_EDGE_NEW=/Edg/i.test(x.exports.USER_AGENT)&&!x.exports.IS_EDGE,x.exports.IS_IE11=/Trident\/7.0/i.test(x.exports.USER_AGENT),x.exports.IS_X5=/qqbrowser/i.test(x.exports.USER_AGENT.toLowerCase()),x.exports.IS_CHROME=/Chrome/i.test(x.exports.USER_AGENT)&&!x.exports.IS_EDGE&&!x.exports.IS_EDGE_NEW&&!x.exports.IS_X5,x.exports.IS_SAFARI=/Safari/i.test(x.exports.USER_AGENT)&&!x.exports.IS_CHROME&&!x.exports.IS_EDGE_NEW,x.exports.IS_FIREFOX=/Firefox/i.test(x.exports.USER_AGENT),x.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_HUAWEI=/HuaweiBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_XIAOMI=/MiuiBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_OPPO=/HeyTapBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_VIVO=/VivoBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_MEIZU=/MZBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_SAMSUNG=/samsungbrowser/i.test(x.exports.USER_AGENT),document.all)try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");x.exports.HAS_FLASH=!!a}catch(e){x.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?(a=navigator.plugins["Shockwave Flash"],x.exports.HAS_FLASH=!!a):x.exports.HAS_FLASH=!1;x.exports.IS_MAC_SAFARI=x.exports.IS_MAC&&x.exports.IS_SAFARI&&!x.exports.IS_CHROME&&!x.exports.HAS_FLASH,x.exports.IS_IOS=x.exports.IS_IPHONE||x.exports.IS_IPAD||x.exports.IS_IPOD,x.exports.IOS_VERSION=function(){var e=x.exports.USER_AGENT.match(/OS (\d+)_/i);if(e&&e[1])return e[1]}(),x.exports.IS_ANDROID=/Android/i.test(x.exports.USER_AGENT),x.exports.ANDROID_VERSION=(a=x.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(i=a[1]&&parseFloat(a[1]),r=a[2]&&parseFloat(a[2]),i&&r?parseFloat(a[1]+"."+a[2]):i||null):null,x.exports.IS_OLD_ANDROID=x.exports.IS_ANDROID&&/webkit/i.test(x.exports.USER_AGENT)&&x.exports.ANDROID_VERSION<2.3,x.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),x.exports.IS_MOBILE=x.exports.IS_IOS||x.exports.IS_ANDROID,x.exports.IS_H5=x.exports.IS_MOBILE||!x.exports.HAS_FLASH,x.exports.IS_PC=!x.exports.IS_MOBILE,x.exports.is_X5=/micromessenger/i.test(x.exports.USER_AGENT)||/qqbrowser/i.test(x.exports.USER_AGENT),x.exports.IS_ANDROID_FIREFOX=x.exports.IS_ANDROID&&x.exports.IS_FIREFOX,x.exports.CHROME_VERSION=x.exports.IS_CHROME&&x.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1],x.exports.getHost=function(e){var t,r,i="";return void 0===e||null==e||""==e?"":(t=e.indexOf("//"),r=e,i=r=-1<t?e.substring(t+2):r,(e=(i=(e=r.split("/"))&&0<e.length?e[0]:i).split(":"))&&0<e.length?e[0]:i)},x.exports.dingTalk=function(){var e=x.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(e)},x.exports.IS_DINGTALK=x.exports.dingTalk(),x.exports.wechat=function(){var e=x.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(e)},x.exports.inIFrame=function(){return self!=top},x.exports.getReferer=function(){var t=document.referrer;if(x.exports.inIFrame())try{t=top.document.referrer}catch(e){t=document.referrer}return t},x.exports.getHref=function(){location.href;if(x.exports.inIFrame())try{top.location.href}catch(e){location.href}return location.href},x.exports.check360=function(){return-1!=navigator.userAgent.indexOf("Safari")?function(){var e=navigator.userAgent.split(" ");if(-1!=e[e.length-1].indexOf("Safari"))for(var t in navigator.plugins)if("np-mswmp.dll"==navigator.plugins[t].filename)return!0;return!1}():(null==navigator.msPointerEnabled||navigator.msPointerEnabled)&&(1==navigator.msDoNotTrack||1==window.doNotTrack)&&(!!Number(window.screenX)&&window.screenLeft-window.screenX!=8||(-1!=navigator.userAgent.indexOf("MSIE 7.0")||-1!=navigator.userAgent.indexOf("MSIE 8.0"))&&null==console.count)},r=x.exports,function(e,t){var r=this.os={},i=this.browser={},n=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=!!e.match(/\(Macintosh\; Intel /),s=e.match(/(iPad).*OS\s([\d_]+)/),l=e.match(/(iPod)(.*OS\s([\d_]+))?/),c=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),t=/Win\d{2}|Windows/.test(t),p=e.match(/Windows Phone ([\d.]+)/),d=u&&e.match(/TouchPad/),h=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),y=e.match(/(BlackBerry).*Version\/([\d.]+)/),_=e.match(/(BB10).*Version\/([\d.]+)/),g=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),S=e.match(/Firefox\/([\d.]+)/),b=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),T=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),E=!m&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),w=E||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(i.webkit=!!n)&&(i.version=n[1]),o&&(r.android=!0,r.version=o[2]),c&&!l&&(r.ios=r.iphone=!0,r.version=c[2].replace(/_/g,".")),s&&(r.ios=r.ipad=!0,r.version=s[2].replace(/_/g,".")),l&&(r.ios=r.ipod=!0,r.version=l[3]?l[3].replace(/_/g,"."):null),p&&(r.wp=!0,r.version=p[1]),u&&(r.webos=!0,r.version=u[2]),d&&(r.touchpad=!0),y&&(r.blackberry=!0,r.version=y[2]),_&&(r.bb10=!0,r.version=_[2]),g&&(r.rimtabletos=!0,r.version=g[2]),v&&(i.playbook=!0),h&&(r.kindle=!0,r.version=h[1]),f&&(i.silk=!0,i.version=f[1]),!f&&r.android&&e.match(/Kindle Fire/)&&(i.silk=!0),m&&(i.chrome=!0,i.version=m[1]),S&&(i.firefox=!0,i.version=S[1]),b&&(r.firefoxos=!0,r.version=b[1]),T&&(i.ie=!0,i.version=T[1]),w&&(a||r.ios||t||o)&&(i.safari=!0,r.ios||r.android||(i.version=w[1])),r.ios&&(i.version=r.version),E&&(i.webview=!0),a&&((n=e.match(/[\d]*_[\d]*_[\d]*/))&&0<n.length&&n[0]&&(r.version=n[0].replace(/_/g,".")),/MQBHD/.test(e))&&(i.version=((e.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),r.tablet=!!(s||v||o&&!e.match(/Mobile/)||S&&e.match(/Tablet/)||T&&!e.match(/Phone/)&&e.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(o||c||u||y||_||m&&e.match(/Android/)||m&&e.match(/CriOS\/([\d.]+)/)||S&&e.match(/Mobile/)||T&&e.match(/Touch/))),r.pc=!r.tablet&&!r.phone,a?r.name="macOS":t?(r.name="windows",r.version=function(){var e=navigator.userAgent,t="";(-1<e.indexOf("Windows NT 5.0")||-1<e.indexOf("Windows 2000"))&&(t="2000");(-1<e.indexOf("Windows NT 5.1")||-1<e.indexOf("Windows XP"))&&(t="XP");(-1<e.indexOf("Windows NT 5.2")||-1<e.indexOf("Windows 2003"))&&(t="2003");(-1<e.indexOf("Windows NT 6.0")||-1<e.indexOf("Windows Vista"))&&(t="Vista");(-1<e.indexOf("Windows NT 6.1")||-1<e.indexOf("Windows 7"))&&(t="7");(-1<e.indexOf("Windows NT 6.2")||-1<e.indexOf("Windows 8"))&&(t="8");(-1<e.indexOf("Windows NT 6.3")||-1<e.indexOf("Windows 8.1"))&&(t="8.1");(-1<e.indexOf("Windows NT 10")||-1<e.indexOf("Windows 10"))&&(t="10");return t}()):r.name=function(){var e=navigator.userAgent,t="other",r=x.exports.os;if(r.ios)return"iOS";if(r.android)return"android";if(-1<e.indexOf("Baiduspider"))return"Baiduspider";if(-1<e.indexOf("PlayStation"))return"PS4";r="Win32"==navigator.platform||"Windows"==navigator.platform||-1<e.indexOf("Windows"),e="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;e&&(t="macOS");"X11"!=navigator.platform||r||e||(t="Unix");-1<String(navigator.platform).indexOf("Linux")&&(t="Linux");if(r)return"windows";return t}(),i.name=(l=navigator.userAgent.toLowerCase(),(p=x.exports.browser).firefox?"Firefox":p.ie?/edge/.test(l)?"Edge":"IE":x.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(l)?"\u5fae\u4fe1\u5185\u7f6e\u6d4f\u89c8\u5668":/qqbrowser/.test(l)?"QQ\u6d4f\u89c8\u5668":x.exports.IS_UC?"UC":x.exports.IS_DINGTALK?"Dingtalk":x.exports.IS_HUAWEI?"HuaweiBrowser":x.exports.IS_XIAOMI?"MiBrowser":x.exports.IS_OPPO?"OppoBrowser":x.exports.IS_VIVO?"VivoBrowser":x.exports.IS_MEIZU?"MeizuBrowser":x.exports.IS_SAMSUNG?"SamsungBrowser":x.exports.IS_WEBVIEW||/MQBHD/.test(l)?"webview":p.chrome?"Chrome":p.safari?"Safari":/baiduspider/.test(l)?"Baiduspider":/opera/.test(l)?"Opera":/360se/.test(l)?"360\u6d4f\u89c8\u5668":/bidubrowser/.test(l)?"\u767e\u5ea6\u6d4f\u89c8\u5668":/metasr/.test(l)?"\u641c\u72d7\u6d4f\u89c8\u5668":/lbbrowser/.test(l)?"\u730e\u8c79\u6d4f\u89c8\u5668":/playstation/.test(l)?"PS4\u6d4f\u89c8\u5668":void 0)}.call(r,navigator.userAgent,navigator.platform),x.exports.IS_WEBVIEW=(i=x.exports.USER_AGENT,n=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),o=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig"),!!i.match(n)&&!i.match(o))},{}],50:[function(e,t,r){var s=e("./dom");t.exports.getAbsoluteURL=function(e){return e=e.match(/^https?:\/\//)?e:s.createEl("div",{innerHTML:'<a href="'+e+'">x</a>'}).firstChild.href},t.exports.parseUrl=function(e){var t,r=["protocol","hostname","port","pathname","search","hash","host"],i=s.createEl("a",{href:e}),n=""===i.host&&"file:"!==i.protocol;n&&((t=s.createEl("div")).innerHTML='<a href="'+e+'"></a>',i=t.firstChild,t.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(t));for(var o={},a=0;a<r.length;a++)o[r[a]]=i[r[a]];return o.segments=i.pathname.replace(/^\//,"").split("/"),n&&document.body.removeChild(t),o}},{"./dom":32}],51:[function(e,r,t){var i=e("./dom"),n=e("./ua"),o=e("./playerutil");r.exports.formatTime=function(e){var t,e=Math.floor(e),r=Math.floor(e/3600);return e%=3600,t=Math.floor(e/60),e=e%60,!(r===1/0||isNaN(r)||t===1/0||isNaN(t)||e==1/0||isNaN(e))&&("00"===(r=10<=r?r:"0"+r)?"":r+":")+(10<=t?t:"0"+t)+":"+(10<=e?e:"0"+e)},r.exports.extractTime=function(e){var t;return e?("00"===(t=10<=(t=parseInt(e.getHours()))?t:"0"+t)?"":t+":")+(t=10<=(t=parseInt(e.getMinutes()))?t:"0"+t)+":"+(t=10<=(t=parseInt(e.getSeconds()))?t:"0"+t):""},r.exports.convertToTimestamp=function(e,t){var r="";return e&&(t?r=e.gettime():(r=Date.parse(e),r/=1e3)),r},r.exports.convertToDate=function(e,t){var r="";return e&&(r=new Date).setTime(1e3*e),r},r.exports.parseTime=function(e){var t,r,i;return e?(i=r=t=0,3===(e=e.split(":")).length?(t=e[0],r=e[1],i=e[2]):2===e.length?(r=e[0],i=e[1]):1===e.length&&(i=e[0]),3600*(t=parseInt(t,10))+60*(r=parseInt(r,10))+(i=Math.ceil(parseFloat(i)))):"00:00:00"},r.exports.formatDate=function(e,t){var r,i={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return t},r.exports.sleep=function(e){for(var t=Date.now();Date.now()-t<=e;);},r.exports.htmlEncodeAll=function(e){return null==e?"":e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},r.exports.toBinary=function(e){if(!window.atob)return"";for(var t=atob(e),r=t.length,i=new Uint8Array(r),n=0;n<r;n++)i[n]=t.charCodeAt(n);return i},r.exports.readyBinary=function(e){for(var t=new Uint8Array(e),r=t.length,i="",n=0;n<r;n++)i+=t[n];return i},r.exports.delayHide=function(e,t){e&&(void 0===t&&(t=1e3),e.delayHanlder&&clearTimeout(e.delayHanlder),e.delayHanlder=setTimeout(function(){i.css(e,"display","none")},t))},r.exports.openInFile=function(){return-1!=window.location.protocol.toLowerCase().indexOf("file")},r.exports.contentProtocolMixed=function(e,t){return!!((n.os.pc&&(o.isHls(e)&&!n.browser.safari||o.isFlv(e))||t)&&"https:"==window.location.protocol.toLowerCase()&&e&&-1<e.toLowerCase().indexOf("http://"))},r.exports.queryString=function(e){var t,r,i;return 2===(e=(e=decodeURIComponent(e)).split("?")).length&&(e=e[1],t=e.split("&"))?(r={},i=0,$(t).each(function(){var e=t[i].split("=");2===e.length&&(r[e[0]]=e[1].replace(/\+/g," ")),i++}),r):{}},r.exports.log=function(e){var t=window.location.href,t=r.exports.queryString(t);t&&1==t.debug&&console.log(e)}},{"./dom":32,"./playerutil":46,"./ua":49}],52:[function(e,t,r){var i,Ln="undefined"==typeof Promise?e("es6-promise").Promise:Promise;e=this,i=function(){return r={926:function(e){var n=Object.prototype.hasOwnProperty;function o(e){return"[Throws: "+(e?e.message:"?")+"]"}function i(e){var t=[];return function r(i){if(null===i||"object"!=typeof i)return i;if(-1!==t.indexOf(i))return"[Circular]";if(t.push(i),"function"==typeof i.toJSON)try{var e=r(i.toJSON());return t.pop(),e}catch(r){return o(r)}return e=Array.isArray(i)?i.map(r):Object.keys(i).reduce(function(e,t){return e[t]=r(function(e,t){if(n.call(e,t))try{}catch(e){return o(e)}return e[t]}(i,t)),e},{}),t.pop(),e}(e)}e.exports=function(e,t,r){return JSON.stringify(i(e),t,r)},e.exports.ensureProperties=i}},i={},Cn.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Cn.d(t,{a:t}),t},Cn.d=function(e,t){for(var r in t)Cn.o(t,r)&&!Cn.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},Cn.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Cn.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},In={},function(){"use strict";Cn.r(In),Cn.d(In,{AACParser:function(){return M},AvcSPS:function(){return re},BasicLoader:function(){return Fe},BitBuffer:function(){return p},Box:function(){return f},ByteBuffer:function(){return g},CTrackTypeMap:function(){return ce},Demuxer:function(){return yn},DiscardType:function(){return m},EFormatType:function(){return n},EH264NALType:function(){return z},EH265NALType:function(){return v},EHandlerType:function(){return Q},ELoaderStatus:function(){return y},ESampleFlag:function(){return le},ETrackType:function(){return S},ErrorCode:function(){return d},ExpGolomb:function(){return Z},FLVParser:function(){return dt},FullBox:function(){return a},H264NAL:function(){return Y},H265NAL:function(){return b},HevcSPS:function(){return oe},Loader:function(){return Be},MP4Parser:function(){return qi}});var M={},H=(Cn.r(M),Cn.d(M,{AAC_DURATION:function(){return F},AAC_SAMPLING_FREQUENCIES:function(){return U},addADTSHeader:function(){return B},getADTSHeaderLength:function(){return V},getADTSLength:function(){return q},isADTS:function(){return j},readAACSamples:function(){return G}}),{}),g=(Cn.r(H),Cn.d(H,{Box:function(){return f},avc1:function(){return ht},avcC:function(){return he},btrt:function(){return yt},co64:function(){return Ri},ctts:function(){return Ii},dinf:function(){return x},dref:function(){return _t},edts:function(){return x},elst:function(){return At},esds:function(){return Gt},ftyp:function(){return Wt},hdlr:function(){return Kt},hev1:function(){return ft},hvc1:function(){return ft},hvcC:function(){return be},mdat:function(){return Xt},mdhd:function(){return zt},mdia:function(){return x},mfhd:function(){return or},mfra:function(){return x},minf:function(){return x},moof:function(){return ir},moov:function(){return x},mp4a:function(){return $t},mvex:function(){return ar},mvhd:function(){return Yt},pasp:function(){return Zt},sdtp:function(){return sr},sidx:function(){return lr},stbl:function(){return x},stco:function(){return Li},stsc:function(){return Ai},stsd:function(){return Di},stss:function(){return Oi},stsz:function(){return Ni},stts:function(){return Hi},tfdt:function(){return Yr},tfhd:function(){return Si},tkhd:function(){return er},traf:function(){return nr},trak:function(){return x},trex:function(){return xi},trun:function(){return Ci},url:function(){return tr},vmhd:function(){return rr}}),i.concatUint8s=function(e){return this.concatUint8.apply(this,e)},i.concatUint8=function(){for(var t,r,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return e.length<=1?e[0]||new Uint8Array(0):(t=new Uint8Array(e.reduce(function(e,t){return e+t.byteLength},0)),r=0,e.forEach(function(e){t.set(e,r),r+=e.byteLength}),t)},i.concat=function(e,t){return i.concatUint8(new Uint8Array(e),new Uint8Array(t)).buffer},Object.defineProperty(i.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),i.prototype.readFloat=function(e){var t=0;switch(e){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+e)}return this.offset+=e,t},i.prototype.back=function(e){this.offset-=e},i.prototype.skip=function(e){this.offset+=e},i.prototype.readInt=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("not supported for read byte with "+e)}},i.prototype.read=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return(this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2);case 4:return this.dv.getUint32(t);default:return this.back(e-4),this.read(e-4)+this.dv.getUint32(t)*Math.pow(256,e-4)}},i.prototype.writeInt=function(e,t){var r=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setInt8(r,t);case 2:return this.dv.setInt16(r,t);case 3:return this.dv.setInt8(r,t>>16),this.dv.setInt16(r+1,65535&t);case 4:return this.dv.setInt32(r,t);default:throw new Error("\u4e0d\u652f\u6301Byte write "+e)}},i.prototype.write=function(e,t){var r=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setUint8(r,t);case 2:return this.dv.setUint16(r,t);case 3:return this.dv.setUint8(r,t>>>16),this.dv.setUint16(r+1,65535&t);case 4:return this.dv.setUint32(r,t);default:throw new Error("\u4e0d\u652f\u6301Byte write "+e)}},i.prototype.readToUint8=function(e){e=new Uint8Array(this.dv.buffer,this.offset,e||this.unreadLength);return this.offset+=e.byteLength,e},i.prototype.readToBuffer=function(e){e=this.offset||e?this.dv.buffer.slice(this.offset,e?this.offset+e:void 0):this.dv.buffer;return this.offset+=e.byteLength,e},i),U=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],F=1024,B=function(e,t){var r=t.audioObjectType,i=t.sampleRate,n=t.channelCount,t=void 0===(t=t.numberOfRawDataBlocksInFrame)?0:t,o=e.byteLength+7,i=U.indexOf(i),a=new Uint8Array(7);return a[0]=255,a[1]=241,a[2]=r-1<<6,a[2]|=i<<2,a[2]|=(4&n)>>2,a[3]=(3&n)<<6,a[3]|=(6144&o)>>11,a[4]=(2047&o)>>3,a[5]=(7&o)<<5,a[5]|=31,a[6]=252,a[6]|=3&t,g.concatUint8(a,e)},j=function(e,t){return t<e.byteLength-1&&255===e[t]&&240==(246&e[t+1])},V=function(e,t){return 1&e[t+1]?7:9},q=function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},G=function(e){for(var t,r,i=[],n=0,o=e.byteLength;n+5<o;)j(e,n)?(t=V(e,n),r=q(e,n),i.push({audioObjectType:1+(e[2]>>>6),sampleRate:U[e[2]>>>2&15],samplingFrequencyIndex:e[2]>>>2&15,channelCount:(1&e[2])<<2|e[3]>>>6,numberOfRawDataBlocksInFrame:0,data:e.subarray(n+t,n+r)}),n+=r):n++;return i},p=(r.fromByte=function(e,t){return new r(e.read(t),t<<3)},r.prototype.skip=function(e){this.offset+=e},r.prototype.read=function(e){var t=this.len-this.offset-e;if(0<=t){for(var r=0,i=0;i<e;i++)r+=1<<i;return this.offset+=e,this.num>>>t&r}return console.warn("bit \u8bfb\u53d6\u4f4d\u6570\u8d85\u8fc7\u9650\u5236"),0},r);function r(e,t){this.num=e,this.len=t,this.offset=0}function i(e,t,r){this.dv=new DataView(e),this.start=this.offset=t||this.dv.byteOffset,this.end=r?this.start+r:this.dv.byteLength}K.createAnnexbStartCode=function(){return new Uint8Array([0,0,0,1])},K.createAVCCStartCode=function(e){return new Uint8Array([e>>24&255,e>>16&255,e>>8&255,255&e])},K.extractAVCCNAL=function(e,t){for(var r,i=[],n=new g(e.buffer,e.byteOffset,e.byteLength);n.unreadLength>t;){if((r=n.read(t+1))<=0||r>n.unreadLength){console.warn("extract avc nalu size wrong! lengthSizeMinusOne:",t,"size:",r);break}var o=n.offset-n.start;i.push(e.subarray(o,o+r)),n.skip(r)}return i},K.extractAnnexbNAL=function(r){for(var e=r.byteLength,i=[],t=0;t<e-3;)0===r[t]?0===r[t+1]?0===r[t+2]?0===r[t+3]?t++:(1===r[t+3]&&t+4<e&&i.push({prefixStart:t,start:t+4}),t+=4):(1===r[t+2]&&i.push({prefixStart:t,start:t+3}),t+=3):t+=2:t++;return i.length?i.map(function(e,t){t=i[t+1];return t?r.subarray(e.start,t.prefixStart):r.subarray(e.start)}):[]};var W=K;function K(){}var X,z;X=function(e,t){return(X=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(e=z=z||{})[e.UNUSED=0]="UNUSED",e[e.NON_IDR_SLICE=1]="NON_IDR_SLICE",e[e.SLICE_DP_A=2]="SLICE_DP_A",e[e.SLICE_DP_B=3]="SLICE_DP_B",e[e.SLICE_DP_C=4]="SLICE_DP_C",e[e.SLICE_IDR=5]="SLICE_IDR",e[e.SEI=6]="SEI",e[e.SPS=7]="SPS",e[e.PPS=8]="PPS",e[e.DIVIDER=9]="DIVIDER",e[e.SEQUENCE_END=10]="SEQUENCE_END",e[e.STREAM_END=11]="STREAM_END",e[e.FILL=12]="FILL";var v,$,Y=function(r){function e(e){var t=r.call(this)||this,e=new p(e.read(1),8);return t.forbiddenZeroBit=e.read(1),t.nalRefIdc=e.read(2),t.nalType=e.read(5),t}var t=e,i=r;if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}return X(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n),e.extractNALType=function(e){return 31&e[0]},e.isSlice=function(e){e=this.extractNALType(e);return e>=z.NON_IDR_SLICE&&e<=z.SLICE_IDR},e}(W),e=($=function(e,t){return($=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}$(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});(s=v=v||{})[s.TRAIL_N=0]="TRAIL_N",s[s.TRAIL_R=1]="TRAIL_R",s[s.TSA_N=2]="TSA_N",s[s.TSA_R=3]="TSA_R",s[s.STSA_N=4]="STSA_N",s[s.STSA_R=5]="STSA_R",s[s.RADL_N=6]="RADL_N",s[s.RADL_R=7]="RADL_R",s[s.RASL_N=8]="RASL_N",s[s.RASL_R=9]="RASL_R",s[s.VCL_N10=10]="VCL_N10",s[s.VCL_R11=11]="VCL_R11",s[s.VCL_N12=12]="VCL_N12",s[s.VCL_R13=13]="VCL_R13",s[s.VCL_N14=14]="VCL_N14",s[s.VCL_R15=15]="VCL_R15",s[s.BLA_W_LP=16]="BLA_W_LP",s[s.BLA_W_RADL=17]="BLA_W_RADL",s[s.BLA_N_LP=18]="BLA_N_LP",s[s.IDR_W_RADL=19]="IDR_W_RADL",s[s.IDR_N_LP=20]="IDR_N_LP",s[s.CRA=21]="CRA",s[s.VPS=32]="VPS",s[s.SPS=33]="SPS",s[s.PPS=34]="PPS",s[s.ACCESS_UNIT_DELIMITER=35]="ACCESS_UNIT_DELIMITER",s[s.EOS=36]="EOS",s[s.EOB=37]="EOB",s[s.FILLER_DATA=38]="FILLER_DATA",s[s.SEI=39]="SEI",s[s.SEI_SUFFIX=40]="SEI_SUFFIX",s[s.INVALID=64]="INVALID";e(o,J=W),o.extractNALType=function(e,t){return(126&e[t=void 0===t?0:t])>>1},o.isNonRefNALType=function(e){switch(e){case v.TRAIL_N:case v.STSA_N:case v.RADL_N:case v.RASL_N:case v.VCL_N10:case v.VCL_N12:case v.VCL_N14:return!0;default:return!1}},o.isNonRef=function(e){return this.isNonRefNALType(this.extractNALType(e))},o.isSlice=function(e){e=this.extractNALType(e);return e>=v.TRAIL_N&&e<=v.CRA},o.littleEndian=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]},o.parseHVCVideoData=function(e,t){for(var r=e.byteLength,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=[],o=0,a=0+t,s=!1;o<r;){if(r<=o+4){console.warn("Malformed Nalu near timestamp "+a+", offset = "+o+", dataSize = "+r);break}var l=i.getUint32(o,!1);if(r-4<l)return void console.warn("Malformed Nalus near timestamp "+a+", NaluSize > DataSize!");var c=i.getUint8(o+4)>>1&63,u=(16<=c&&c<=23&&(s=!0),0+o+4),c={type:c,data:e.subarray(u,u+l)};n.push(c),length+=e.byteLength,o+=4+l}return{keyframe:s,units:n}};var m,d,Q,n,S,J,b=o,Z=(t.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");i.set(e.subarray(r,r+t)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},t.prototype.skipBits=function(e){var t;this.bitsAvailable>e||(e=(e-=this.bitsAvailable)-((t=e>>3)<<3),this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},t.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return 32<e&&console.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?r<<t|this.readBits(t):r},t.prototype.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(e){for(var t=8,r=8,i=0;i<e;i++)t=0===(r=0!==r?(t+this.readEG()+256)%256:r)?t:r},t),ee=[100,110,122,244,44,83,86,118,128,138,144],te=[[0,1],[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]],re=(se.generateCodec=function(e){return"avc1."+[e.generalProfileIdc,e.generalProfileCompatibility,e.generalLevelIdc].map(function(e){return(e=e.toString(16)).length<2?"0"+e:e}).join("")},se),ie=[1,2,2,1],ne=[1,2,1,1],oe=(ae.generateCodec=function(e){var t=["hvc1"],r=e.generalProfileSpace;return 0<r&&r<4&&t.push(String.fromCharCode(64+r)),t.push(e.generalProfileIdc.toString()),t.push(e.generalProfileCompatibilityFlags.reverse().reduce(function(e,t){return e<<1|t},0).toString(16)),t.push((e.generalTierFlag?"H":"L")+e.generalLevelIdc),e.generalConstraintIndicatorFlags.forEach(function(e){e&&t.push(e.toString(16))}),t.join(".")},ae);function ae(e){var t=this;this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibilityFlags=[],this.generalConstraintIndicatorFlags=[],this.subLayerProfilePresentFlags=[],this.subLayerLevelPresentFlags=[],this.separateColourPlaneFlag=0,this.pixelRatio=[],this.codec="",this.checkProfileIdc=function(e){return t.generalProfileIdc===e||t.generalProfileCompatibilityFlags[e]};var r,i,n,o,a=new Z(e);for(this.vpsId=a.readBits(4),this.maxSubLayersMinus1=a.readBits(3),this.temporalIdNestingFlag=a.readBits(1),this.generalProfileSpace=a.readBits(2),this.generalTierFlag=a.readBits(1),this.generalProfileIdc=a.readBits(5),r=0;r<32;r++)this.generalProfileCompatibilityFlags[r]=a.readBits(1),0===this.generalProfileIdc&&0<r&&this.generalProfileCompatibilityFlags[r]&&(this.generalProfileIdc=r);for(r=0;r<6;r++)this.generalConstraintIndicatorFlags.push(a.readUByte());for(this.generalLevelIdc=a.readUByte(),r=0;r<this.maxSubLayersMinus1;r++)this.subLayerProfilePresentFlags[r]=a.readBits(1),this.subLayerLevelPresentFlags[r]=a.readBits(1);for(0<this.maxSubLayersMinus1&&a.skipBits(2*(8-this.maxSubLayersMinus1)),r=0;r<this.maxSubLayersMinus1;r++)this.subLayerProfilePresentFlags[r]&&a.skipBits(48),this.subLayerLevelPresentFlags[r]&&a.readUByte();this.spsId=a.readUEG(),this.codec=ae.generateCodec(this),this.chromaFormatIdc=a.readUEG(),3===this.chromaFormatIdc&&(this.separateColourPlaneFlag=a.readBits(1)),this.separateColourPlaneFlag&&(this.chromaFormatIdc=0),this.width=a.readUEG(),this.height=a.readUEG(),a.readBits(1)&&(e=ie[this.chromaFormatIdc],o=ne[this.chromaFormatIdc],i=a.readUEG()*e,e=a.readUEG()*e,n=a.readUEG()*o,o=a.readUEG()*o,this.width-=i+e,this.height-=n+o)}function se(e){this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibility=0,this.crop=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.cropBottom=0,this.pixelRatio=[],this.codec="";var t,r,i=new Z(e);if(this.generalProfileIdc=i.readUByte(),this.generalProfileCompatibility=i.readUByte(),this.generalLevelIdc=i.readUByte(),this.spsId=i.readUEG(),this.codec=se.generateCodec(this),-1<ee.indexOf(this.generalProfileIdc)){if(this.chromaFormatIdc=i.readUEG(),3===this.chromaFormatIdc&&i.skipBits(1),i.skipUEG(),i.skipUEG(),i.skipBits(1),i.readBits(1))for(t=0,r=3===this.chromaFormatIdc?8:12;t<r;t++)i.readBits(1)&&(t<6?i.skipScalingList(16):i.skipScalingList(64))}else this.chromaFormatIdc=1;i.skipUEG();e=i.readUEG();if(0===e)i.skipUEG();else if(1===e)for(i.skipBits(1),i.skipEG(),i.skipEG(),t=0,r=i.readUEG();t<r;t++)i.skipEG();i.skipUEG(),i.skipBits(1);var n,e=i.readUEG()+1,o=i.readUEG()+1,a=i.readBits(1);a||i.skipBits(1),this.height=o*(2-a),i.skipBits(1),this.crop=i.readBits(1),this.crop&&(n=1<<(1===this.chromaFormatIdc||2===this.chromaFormatIdc?1:0),a=2-a<<(1===this.chromaFormatIdc?1:0),this.cropLeft=i.readUEG()*n,this.cropRight=i.readUEG()*n,this.cropTop=i.readUEG()*a,this.cropBottom=i.readUEG()*a),this.width=16*e-(this.cropRight+this.cropLeft),this.height=16*o-(this.cropTop+this.cropBottom),i.readBits(1)&&i.readBits(1)&&(255===(n=i.readUByte())?(this.pixelRatio[0]=i.readUByte()<<8|i.readUByte(),this.pixelRatio[1]=i.readUByte()<<8|i.readUByte()):n<te.length&&(this.pixelRatio=te[n]))}function t(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function o(e){var t=J.call(this)||this,e=new p(e.read(2),16);return t.forbiddenZeroBit=e.read(1),t.nalType=e.read(6),t.nhLayerId=e.read(6),t.nhTimeId=e.read(3),t}(s=m=m||{})[s.NONE=-16]="NONE",s[s.DEFAULT=0]="DEFAULT",s[s.NONREF=8]="NONREF",s[s.BIDIR=16]="BIDIR",s[s.NONINTRA=24]="NONINTRA",s[s.NONKEY=32]="NONKEY",s[s.ALL=48]="ALL",(e=d=d||{})[e.ABORTED=1]="ABORTED",e[e.NETWORK=2]="NETWORK",e[e.DECODE=3]="DECODE",e[e.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",e[e.PARSER=1001]="PARSER",e[e.COROUTINE=10001]="COROUTINE",e[e.WEBGL_NOT_SUPPORTED=10002]="WEBGL_NOT_SUPPORTED",e[e.BUFFERING=10004]="BUFFERING",e[e.RENDERER=10005]="RENDERER",(s=Q=Q||{}).VIDE="vide",s.SOUN="soun",(e=n=n||{})[e.FLV=0]="FLV",e[e.MP4=1]="MP4",e[e.HLS=2]="HLS",e[e.MPEGTS=3]="MPEGTS",(s=S=S||{})[s.UNKNOWN=0]="UNKNOWN",s[s.VIDEO=1]="VIDEO",s[s.AUDIO=2]="AUDIO";(e={})[Q.VIDE]=S.VIDEO,e[Q.SOUN]=S.AUDIO;var le,ce=e;(s=le=le||{})[s.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",s[s.IS_NON_SYNC=65536]="IS_NON_SYNC",s[s.PADDING_MASK=917504]="PADDING_MASK",s[s.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",s[s.DEPENDED_MASK=12582912]="DEPENDED_MASK",s[s.DEPENDS_MASK=50331648]="DEPENDS_MASK",s[s.DEPENDS_NO=33554432]="DEPENDS_NO",s[s.DEPENDS_YES=16777216]="DEPENDS_YES";function ue(e,t){var r=e.offset;this.start=t,this.size=e.read(4),this.type=String.fromCharCode(e.read(1),e.read(1),e.read(1),e.read(1)).trim(),1===this.size&&(this.size=e.read(8)),this.length=e.offset-r}Se=function(e,t){return(Se=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var u,e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Se(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},pe=function(){return(pe=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},de=new Date("1904-01-01T00:00:00Z").getTime(),f=(ke.prototype.append=function(e){this.children.push(e)},ke.mapBoxToJSON=function(e){return pe({box:e},e.children.reduce(function(e,t){var r=t.header.type,i=e[r],t=ke.mapBoxToJSON(t);return i?Array.isArray(i)?i.push(t):e[r]=[i,t]:e[r]=t,e},{}))},ke),a=(e(Pe,me=f),Pe);ve=function(e,t){return(ve=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ve(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(xe,ge=f);var he=xe;_e=function(e,t){return(_e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};function fe(e){return e<10?"0"+e:e}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}_e(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(we,ye=f);var ye,_e,ge,ve,me,Se,be=we,s=Cn(926),Te=Cn.n(s),Ee="undefined"!=typeof performance&&"function"==typeof performance.now;function we(e,t){var r,i=ye.call(this,e,t)||this;i.nalus=[],i.vps=[],i.sps=[],i.pps=[],i.sei=[],i.configVersion=t.read(1),r=new p(t.read(1),8),i.generalProfileSpace=r.read(2),i.generalTierFlag=r.read(1),i.generalProfileIdc=r.read(5),r=new p(t.read(4),32),i.generalProfileCompatibilityFlags=Array.from(new Array(32)).map(function(){return r.read(1)}),i.generalConstraintIndicatorFlags=Array.from(new Array(6)).map(function(){return t.read(1)}),i.generalLevelIdc=t.read(1),i.minSpatialSegmentationIdc=4095&t.read(2),i.parallelismType=3&t.read(1),i.chromaFormatIdc=3&t.read(1),i.bitDepthLumaMinus8=7&t.read(1),i.bitDepthChromaMinus8=7&t.read(1),i.avgFrameRate=t.read(2),r=new p(t.read(1),8),i.constantFrameRate=r.read(2),i.numTemporalLayers=r.read(3),i.temporalIdNested=r.read(1),i.lengthSizeMinusOne=r.read(2),i.nalus=[];for(var n=t.read(1),o=0;o<n;o++){var a=[],s=(r=new p(t.read(1),8)).read(1);r.read(1);for(var l=r.read(6),c=t.read(2),u=0;u<c;u++)a.push(new Uint8Array(t.read(2)).map(function(){return t.read(1)}));i.nalus.push({completeness:s,type:l,data:a}),l===v.VPS?a.forEach(function(e){return i.vps.push(e)}):l===v.SPS?a.forEach(function(e){return i.sps.push(e)}):l===v.PPS?a.forEach(function(e){return i.pps.push(e)}):l===v.SEI&&a.forEach(function(e){return i.sei.push(e)})}return i.codec=oe.generateCodec(i),i}function xe(e,t){var r=ge.call(this,e,t)||this;r.sps=[],r.pps=[],r.configVersion=t.read(1),r.generalProfileIdc=t.read(1),r.generalProfileCompatibility=t.read(1),r.generalLevelIdc=t.read(1),r.lengthSizeMinusOne=3&t.read(1),r.numOfSequenceParameterSets=31&t.read(1);for(var i,n=0,o=[],n=0;n<r.numOfSequenceParameterSets;n++){for(i=t.read(2),o=[];i--;)o.push(t.read(1));r.sps.push(new Uint8Array(o))}for(r.numOfPictureParameterSets=31&t.read(1),n=0;n<r.numOfPictureParameterSets;n++){for(i=t.read(2),o=[];i--;)o.push(t.read(1));r.pps.push(new Uint8Array(o))}return r.codec=re.generateCodec(r),r}function Pe(e,t){e=me.call(this,e,t)||this;return e.version=t.read(1),e.flag=t.read(3),e}function ke(e,t){this.children=[],this.isContainer=!1,this.toStandardTime=function(e){return e&&de+1e3*e},this.header=e}function Ce(){return(Ee?performance:Date).now()}(e=u=u||{})[e.TRACE=-1]="TRACE",e[e.DEBUG=0]="DEBUG",e[e.LOG=1]="LOG",e[e.INFO=2]="INFO",e[e.WARN=10]="WARN",e[e.ERROR=11]="ERROR",e[e.NONE=1e3]="NONE";var Ie=u.INFO,Le=u.ERROR,Re=2e3,Ae=Ce(),h=[],De=0,e=((s=Oe.prototype)._print=function(e,t){var r,i,n,o,a,s,l,c;Ie<=e&&(r=Ce()-Ae,n="["+u[e]+"]["+this.name+"]["+(i=r,void 0===(n=!0)&&(n=!0),c=Math.floor(i/1e3),n=void 0!==n&&n,(o=c)===1/0?o:(s=Math.floor(o/60),s-=60*(a=Math.floor(s/60)),o=Math.floor(o-60*(60*a+s)),l=[],(n||0<a)&&l.push(fe(a)),l.push(fe(s)),l.push(fe(o)),l.join(":")))+"."+Math.floor(1e3*(i-1e3*c))+"]",h.push({id:De++,level:e,name:this.name,timestamp:r,args:t,prefix:n,message:""}),h.length>Re&&h.shift(),Le<=e)&&(a=(u[e]||"").toLowerCase(),s=console[a])&&s.apply(void 0,[n].concat(t))},s.getLogs=function(){return h.map(function(e){return e.message=e.prefix+" "+e.args.map(function(e){return"string"==typeof e?e:Te()(e)}).join(" "),e})},s.clear=function(){h=[]},s.setSize=function(e){Re=e},s.setLevel=function(e){Ie=e},s.setPrintLevel=function(e){Le=e},s.reset=function(){Ie=u.INFO,Le=u.ERROR,Re=2e3,Ae=Ce(),h=[],De=0},Oe);function Oe(e){var i=this;this.trace=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.TRACE,t)},this.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.DEBUG,t)},this.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.LOG,t)},this.info=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.INFO,t)},this.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.WARN,t)},this.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.ERROR,t)},this.name=e}e.LogLevel=u;function Ne(){var o=this;this._eventMap={},this.listeners=function(e){return o._eventMap[e]||[]},this.emit=function(e,t){e=o._eventMap[e];return!!Array.isArray(e)&&(e.forEach(function(e){return e(t)}),!0)},this.off=function(e,t){var r=o._eventMap[e];return Array.isArray(r)&&(o._eventMap[e]=r.filter(function(e){return e!==t})),o},this.removeAllListeners=function(e){return void 0===e?o._eventMap={}:o._eventMap[e]&&(o._eventMap[e]=[]),o},this.on=function(e,t){return o._eventMap[e]?o._eventMap[e].push(t):o._eventMap[e]=[t],o},this.once=function(i,n){return o.on(i,function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];o.off(i,e),n.apply(o,t)}),o},this.proxy=function(i,e){e.forEach(function(r){o.on(r,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift(r),i.emit.apply(i,e)})})},this.proxyOnce=function(i,e){e.forEach(function(r){o.once(r,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift(r),i.emit.apply(i,e)})})}}var y,Me,He,Ue,T=new e("demuxer"),s=(Me=function(e,t){return(Me=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Me(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Fe=((e=y=y||{})[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.SUSPENGING=2]="SUSPENGING",e[e.ERROR=3]="ERROR",s(c,He=Ne),Object.defineProperty(c.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),c.prototype._changeStatus=function(e){this.status!==e&&(T.log("loader status changed: ".concat(y[this.status]," -> ").concat(y[e])),this.status=e)},c.prototype.jump=function(e){this.offset=e},c.prototype.load=function(e,t,r){return this.reset(),this.url=e,this.loadRange(t,r)},c.prototype.resume=function(){return this.loadRange(this.offset)},c.prototype.suspend=function(){this.abort(),this._changeStatus(y.SUSPENGING)},c.prototype.reset=function(){this.abort(),this.offset=0,this.total=1/0,this.url=""},c.prototype.destroy=function(){this.removeAllListeners(),this.reset()},c),l={isIos:!1,isDingtalk:!1,isQQBrowser:!1},e=(window.navigator.userAgent||"").toLowerCase();function c(e){void 0===e&&(e={});var t=He.call(this)||this;return t.timeout=15e3,t.total=1/0,t.offset=0,t.status=y.IDLE,t.url="",t._handleError=function(e){if("AbortError"===e.name)return!1;throw t._changeStatus(y.ERROR),t.emit("error",{code:d.NETWORK,message:e.message,origin:e}),e},t.timeout=e.timeout||t.timeout,t}/(iPhone\sOS)\s([\d_]+)/i.test(e)&&(l.isIos=!0),-1<e.indexOf("dingtalk")?l.isDingtalk=!0:-1<e.indexOf("qqbrowser")&&(l.isQQBrowser=!0),Ke=function(e,t){return(Ke=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ke(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Ye,We=Fe),Ye.isSupported=function(){return l.isIos&&(l.isDingtalk||l.isQQBrowser)?(console.log("ios","isDingtalk",l.isDingtalk,"isQQBrowser",l.isQQBrowser),!1):"undefined"!=typeof AbortController&&"undefined"!=typeof ReadableStream},Ye.prototype.loadRange=function(i,e){var n=this;if(void 0===i&&(i=0),void 0===e&&(e=1/0),!this.url||i>=this.total)return Ln.resolve(!1);if(this.status===y.LOADING||this.status===y.ERROR)return Ln.resolve(!1);T.info("\u6267\u884cload, from=".concat(i," to=").concat(e," url=").concat(this.url)),this.abort();var t=new Headers,o=0<i||e<1/0;return o&&(e=Math.min(this.total-1,e),t.set("Range","bytes=".concat(i,"-").concat(e===1/0?"":e))),this._changeStatus(y.LOADING),this.controller=new AbortController,this.emit("loadstart",void 0),this.timer=setTimeout(this.triggerTimeout,this.timeout),fetch(this.url,{method:"GET",headers:t,signal:this.controller.signal}).then(function(e){var r,t;if(clearTimeout(n.timer),e.body&&200<=e.status&&e.status<300)return r=e.body.getReader(),n.offset=i,o?(t=e.headers.get("Content-Range")||"",n.total=Number(t.split("/")[1])||n.total):n.total=Number(e.headers.get("Content-Length"))||n.total,function t(){return r.read().then(function(e){return e.done?(n.controller=null,n._changeStatus(y.IDLE),n.emit("loadend",void 0),!0):(n.offset+=e.value.byteLength,n.emit("progress",{offset:n.offset-e.value.byteLength,data:e.value}),t())})}();throw new Error("\u5a92\u4f53\u6d41\u6570\u636e\u4e0d\u5b58\u5728")}).catch(function(e){return clearTimeout(n.timer),n._handleError(e)})};s=Ye;Ge=function(e,t){return(Ge=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ge(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})($e,qe=Fe),$e.prototype.abort=function(){var e=this.xhr;e&&(e.onerror=null,e.onprogress=null,e.onloadend=null,e.onreadystatechange=null,e.abort(),this.xhr=null,this._resolve(!1)),this._changeStatus(y.IDLE)},$e.prototype.loadRange=function(n,s){var l=this;return void 0===n&&(n=0),void 0===s&&(s=1/0),!this.url||n>=this.total||this.status===y.LOADING||this.status===y.ERROR?Ln.resolve(!1):(this.abort(),new Ln(function(e,t){l.xhr=new XMLHttpRequest,l._resolve=e;function r(){var r,e,t=o.responseText,i=t.length,n=a;0<i&&n<i&&(e=l.offset,l.offset+=i-n,a=i,l.emit("progress",{offset:e,data:(r=t.substring(n,i),new Uint8Array(r.length).map(function(e,t){return r.charCodeAt(t)}))}))}var o=l.xhr,i=0<n||s<1/0,a=(o.open("GET",l.url),i&&o.setRequestHeader("Range","bytes=".concat(n,"-").concat(s===1/0?"":s)),o.onreadystatechange=function(){var e;o.readyState===o.HEADERS_RECEIVED&&200<=o.status&&o.status<300&&(i?(e=o.getResponseHeader("Content-Range")||"",l.total=Number(e.split("/")[1])||l.total):l.total=Number(o.getResponseHeader("Content-Length"))||l.total),o.readyState>=o.HEADERS_RECEIVED&&clearTimeout(l._timer)},l.offset=n,0);o.timeout=l.timeout,o.onprogress=r,o.onloadend=function(){r(),l.xhr=null,l._changeStatus(y.IDLE),l.emit("loadend",void 0),e(!0)},o.onerror=function(e){l.xhr=null;try{l._handleError(new Error(e.constructor.name))}catch(e){t(e)}},o.overrideMimeType("text/plain; charset=x-user-defined"),l._changeStatus(y.LOADING),l.emit("loadstart",void 0),l._timer=setTimeout(l.triggerTimeout,l.timeout),o.send()}))};var e=$e,Be=s.isSupported()?s:e;Ve=function(e,t){return(Ve=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ve(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(_,je=Ne),Object.defineProperty(_.prototype,"loader",{get:function(){return this.customLoader||this.originLoader},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"status",{get:function(){return this.loader.status},enumerable:!1,configurable:!0}),_.probe=function(e){throw new Error("parser should implements static probe")},_.prototype.onProgress=function(e){},_.prototype.onLoadEnd=function(){},_.prototype.load=function(e){return this.reset(),this.loader.load(e)},_.prototype.suspend=function(){return this.loader.suspend()},_.prototype.resume=function(){return this.loader.resume()},_.prototype.reset=function(){this.loader.reset(),this.metadata=null},_.prototype.destroy=function(){this.reset(),this.loader.off("progress",this.onProgress),this.loader.off("loadend",this.onLoadEnd),this.originLoader.destroy(),this.removeAllListeners()};var je,Ve,qe,Ge,We,Ke,s=_,Xe=(ze.BUFFER_LENGTH=9,ze);function ze(e){this.signature=String.fromCharCode(e.read(1),e.read(1),e.read(1)),this.version=e.read(1);var t=e.read(1),e=(this.size=e.read(4),new p(t,8));e.read(5),this.hasAudio=!!e.read(1),e.read(1),this.hasVideo=!!e.read(1)}function _(e){var t=je.call(this)||this;return t.skipFrame=m.DEFAULT,t.metadata=null,t.options=e,t.onProgress=t.onProgress.bind(t),t.onLoadEnd=t.onLoadEnd.bind(t),t.originLoader=new Be(t.options),t.customLoader=e.loader,t.loader.on("progress",t.onProgress),t.loader.on("loadend",t.onLoadEnd),t.skipFrame=e.skipFrame||m.DEFAULT,t}function $e(){var e=null!==qe&&qe.apply(this,arguments)||this;return e.xhr=null,e._timer=-1,e._resolve=function(e){},e.triggerTimeout=function(){e.abort(),e._handleError(new Error("\u52a0\u8f7d\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5"))},e}function Ye(){var e=null!==We&&We.apply(this,arguments)||this;return e.controller=null,e.timer=-1,e.abort=function(){clearTimeout(e.timer),e.controller&&!e.controller.signal.aborted&&(e.controller.abort(),e.controller=null),e._changeStatus(y.IDLE)},e.triggerTimeout=function(){e.abort(),e._handleError(new Error("\u52a0\u8f7d\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5"))},e}(e=Ue=Ue||{})[e.AUDIO=8]="AUDIO",e[e.VIDEO=9]="VIDEO",e[e.SCRIPT=18]="SCRIPT";Je.BUFFER_LENGTH=11;var Qe=Je;function Je(e){this.type=e.read(1),this.size=e.read(3),this.dts=e.read(3),this.dts|=e.read(1)<<24,e.skip(3)}var Ze,et=[5512,11025,22050,44100],tt=[8,16];(e=Ze=Ze||{})[e.ADTS_HEADER=0]="ADTS_HEADER",e[e.RAW=1]="RAW";it.readAudioSpecificConfig=function(e){e=p.fromByte(e,2);return{audioObjectType:e.read(5),sampleRate:U[e.read(4)],samplingFrequencyIndex:e.read(4),channelCount:e.read(4)}};var E,rt=it;function it(e){var t=new p(e.read(1),8);this.codecId=t.read(4),this.sampleRate=et[t.read(2)],this.sampleSize=tt[t.read(1)],this.soundType=t.read(1),this.packetType=e.read(1),this.data=e.readToUint8()}function nt(t){var e=t.read(2);return Array.from(Array(e)).map(function(){var e=t.read(1);return 0<e?String.fromCharCode(e):""}).join("")}function ot(e){var t=nt(e),e=at(e);return{key:t,value:e.value,objectEnd:e.objectEnd}}function at(e){var t={value:null,objectEnd:!1},r=e.read(1);switch(r){case E.NUMBER:t.value=e.readFloat(8);break;case E.BOOLEAN:t.value=!!e.read(1);break;case E.LONG_STRING:case E.STRING:t.value=nt(e);break;case E.OBJECT_START:t.value=function(e){for(var t={};0<e.unreadLength;){var r=ot(e);if(r.objectEnd)break;t[r.key]=r.value}return t}(e);break;case E.ECMA_ARRAY:t.value=function(e){for(var t=e.read(4),r={};0<t--;){var i=ot(e);r[i.key]=i.value}return r}(e);break;case E.OBJECT_END:t.objectEnd=!0;break;case E.STRICT_ARRAY:t.value=function(e){for(var t=e.read(4),r=[];0<t--;){var i=at(e);r.push(i.value)}return r}(e);break;case E.DATE:t.value=new Date(e.readFloat(8)+60*e.readInt(2)+1e3);break;default:console.warn("unknown AMF value type",r)}return t}(e=E=E||{})[e.NUMBER=0]="NUMBER",e[e.BOOLEAN=1]="BOOLEAN",e[e.STRING=2]="STRING",e[e.OBJECT_START=3]="OBJECT_START",e[e.NULL=5]="NULL",e[e.UNDEFINED=6]="UNDEFINED",e[e.REFERENCE=7]="REFERENCE",e[e.ECMA_ARRAY=8]="ECMA_ARRAY",e[e.OBJECT_END=9]="OBJECT_END",e[e.STRICT_ARRAY=10]="STRICT_ARRAY",e[e.DATE=11]="DATE",e[e.LONG_STRING=12]="LONG_STRING";function st(e){this.name=at(e).value,this.value=at(e).value}var lt,ct,ut;(e=lt=lt||{})[e.KEY=1]="KEY",e[e.INTER=2]="INTER",e[e.DISP_INTER=3]="DISP_INTER",e[e.GENERATED_KEY=4]="GENERATED_KEY",e[e.VIDEO_INFO_CMD=5]="VIDEO_INFO_CMD",(e=ct=ct||{})[e.JPEG=1]="JPEG",e[e.H263=2]="H263",e[e.SCREEN=3]="SCREEN",e[e.VP6=4]="VP6",e[e.VP6A=5]="VP6A",e[e.SCREEN2=6]="SCREEN2",e[e.H264=7]="H264",e[e.REALH263=8]="REALH263",e[e.MPEG4=9]="MPEG4",e[e.H265=12]="H265",(e=ut=ut||{})[e.AVC_SEQUENCE_HEADER=0]="AVC_SEQUENCE_HEADER",e[e.AVC_NALU=1]="AVC_NALU",e[e.AVC_END=2]="AVC_END";function pt(e){var t=new p(e.read(1),8);this.type=t.read(4),this.codecId=t.read(4),this.packetType=e.read(1),this.cts=e.read(3)+4286578688^4286578688,this.data=e.readToUint8()}var w;Rt=function(e,t){return(Rt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Rt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(P,Lt=s),P.probe=function(e){return!(e.byteLength<9)&&"FLV"===new Xe(new g(e.buffer,e.byteOffset,e.byteLength)).signature},P.prototype.parse=function(e,t){var r=[];if(e.byteLength){this.unhandleBuffer&&(e=g.concat(this.unhandleBuffer,e),t-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null);var i=new g(e);for(!this.header&&i.unreadLength>=Xe.BUFFER_LENGTH&&(this.header=new Xe(i),0==this.header.hasVideo&&(this.header.hasVideo=!0),i.skip(this.header.size-Xe.BUFFER_LENGTH));i.unreadLength>4+Qe.BUFFER_LENGTH;){i.skip(4);var n=new Qe(i);if(!(i.unreadLength>=n.size)){i.back(4+Qe.BUFFER_LENGTH);break}var o=new g(i.buffer,i.offset,n.size);switch(i.skip(n.size),n.type){case Ue.VIDEO:r=r.concat(this.parseVideoBody(n,o,i.offset+t));break;case Ue.AUDIO:r=r.concat(this.parseAudioBody(n,o,i.offset+t));break;case Ue.SCRIPT:this.parseScriptBody(n,o);break;default:return T.warn("unknown tag type",n.type),r}}this.unhandleBuffer=i.unreadLength?i.readToBuffer():null}return r},P.prototype.checkMetadata=function(){var e=this.flvMetadata,t=this.header;if(t&&!this.metadata){var r=[];if(t.hasVideo){if(!this.videoTrackMeta||!this.videoLoaded)return void console.log("checkMetadata hasVideo no this.videoTrackMeta",this.videoTrackMeta,", this.videoLoaded",this.videoLoaded);this.videoTrackMeta.baseDTS=this.baseVideoDTS,this.videoTrackMeta.basePTS=this.baseVideoPTS,r.push(this.videoTrackMeta)}if(t.hasAudio){if(!this.audioTrackMeta||!this.audioLoaded)return void console.log("checkMetadata hasAudio no this.audioTrackMeta",this.audioTrackMeta,", this.audioLoaded",this.audioLoaded);this.audioTrackMeta.baseDTS=this.baseAudioDTS,this.audioTrackMeta.basePTS=this.baseAudioPTS,r.push(this.audioTrackMeta)}var t=this.options,i=t.live,t=t.progressive;this.metadata={formatType:n.FLV,live:!!i,progressive:!i&&!!t,url:this.loader.url,basePTS:Math.min.apply(Math,r.map(function(e){return e.basePTS||0})),baseDTS:Math.min.apply(Math,r.map(function(e){return e.baseDTS||0})),timescale:1e3,duration:1e3*((null==e?void 0:e.duration)||1/0),tracks:r},this.emit("loadedmetadata",this.metadata)}},P.prototype.parseVideoBody=function(e,t,r){var i=this,t=new pt(t),n=(this.emit("loadedtag",{header:e,body:t}),[]),o=t.type===lt.KEY,a=!1;if(t.data.length)if(t.packetType===ut.AVC_SEQUENCE_HEADER){var s=this.flvMetadata||{},l={type:S.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:s.width||0,height:s.height||0,codec:"",pixelRatio:[]};t.codecId===ct.H264?(_=new ue(new g(new ArrayBuffer(8)),0),u=new g(t.data.buffer,t.data.byteOffset,t.data.byteLength),s=new he(_,u),l.pps=s.pps,l.sps=s.sps,l.codec=s.codec,(s=s.sps[0])&&(s=new re(s.subarray(1)),l.width=s.width,l.height=s.height)):t.codecId===ct.H265&&(console.log("parseVideoBody AVC_SEQUENCE_HEADER EVideoCodecID:",t.codecId,"body.data:",t.data),_=new ue(new g(new ArrayBuffer(8)),0),u=new g(t.data.buffer,t.data.byteOffset,t.data.byteLength),s=new be(_,u),console.log("parseVideoBody hvccBox",s),s.vps.forEach(function(e){return l.vps.push(e)}),s.pps.forEach(function(e){return l.pps.push(e)}),s.sps.forEach(function(e){return l.sps.push(e)}),s.sei.forEach(function(e){return l.sei.push(e)}),l.codec=s.codec,console.log("parseVideoBody AVC_SEQUENCE_HEADER trackMeta:",l)),this.videoTrackMeta=l,this.checkMetadata()}else{var c=[];if(t.codecId===ct.H265){if(this.skipFrame===m.NONREF&&b.isNonRefNALType(b.extractNALType(t.data,4)))return console.error("isNonRefNALType"),[];var u,p,d,h,f,y,_=b.parseHVCVideoData(t.data.subarray(0),e.dts);null!=_&&_.units&&(u=_.units,p={type:S.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:(null==(s=this.flvMetadata)?void 0:s.width)||0,height:(null==(s=this.flvMetadata)?void 0:s.height)||0,codec:"",pixelRatio:[]},d=[],h=[],f=[],y=[],u.forEach(function(e){var t;e.type===v.TRAIL_R||e.type===v.IDR_W_RADL?c.push(e.data):e.type===v.SPS?(o=!0,t=new oe(function(e){for(var t=e.byteLength,r=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?r.push(i+=2):i++;if(0===r.length)return e;for(var n=t-r.length,o=new Uint8Array(n),a=0,i=0;i<n;a++,i++)a===r[0]&&(a++,r.shift()),o[i]=e[a];return o}(e.data)),p.width=t.width,p.height=t.height,p.pixelRatio=t.pixelRatio,p.codec=t.codec,d.push(e.data)):e.type===v.VPS?h.push(e.data):e.type===v.PPS?f.push(e.data):e.type===v.SEI&&y.push(e.data),a=b.isNonRefNALType(e.type)&&a}),h.length&&(p.vps=h),d.length&&(p.sps=d),f.length&&(p.pps=f),y.length&&(p.sei=y),_.keyframe)&&(this.videoTrackMeta?(h.forEach(function(e){var t;return null==(t=i.videoTrackMeta)?void 0:t.vps.push(e)}),d.forEach(function(e){var t;return null==(t=i.videoTrackMeta)?void 0:t.sps.push(e)}),f.forEach(function(e){var t;return null==(t=i.videoTrackMeta)?void 0:t.pps.push(e)}),y.forEach(function(e){var t;return null==(t=i.videoTrackMeta)?void 0:t.sei.push(e)})):this.videoTrackMeta=p)}else c=W.extractAVCCNAL(t.data,3);if(!this.videoLoaded){if(!o)return[];this.videoLoaded=!0,this.baseVideoDTS=e.dts,this.baseVideoPTS=t.cts+e.dts,this.checkMetadata()}this.videoTrackMeta&&o&&(this.videoTrackMeta.pps.forEach(function(e){return c.unshift(e)}),this.videoTrackMeta.sps.forEach(function(e){return c.unshift(e)}),this.videoTrackMeta.vps.forEach(function(e){return c.unshift(e)}),this.videoTrackMeta.sei.forEach(function(e){return c.unshift(e)})),c.length&&(u={trackId:2,codec:(null==(s=this.videoTrackMeta)?void 0:s.codec)||"",trackType:S.VIDEO,isSync:o||t.type===lt.KEY,isNonRef:a,data:c,dts:e.dts+t.cts,pts:e.dts+t.cts,offset:r,size:c.reduce(function(e,t){return e+t.byteLength},0)},n.push(u))}else T.warn("[videox] flv parse empty data",e,t);return n},P.prototype.parseAudioBody=function(e,t,r){var i,t=new rt(t),n=(this.emit("loadedtag",{header:e,body:t}),[]);return t.packetType===Ze.ADTS_HEADER?(i=new g(t.data.buffer,t.data.byteOffset,t.data.byteLength),i=rt.readAudioSpecificConfig(i),this.audioTrackMeta={id:1,baseDTS:0,basePTS:0,type:S.AUDIO,codec:"mp4a.40."+i.audioObjectType,timescale:1e3,audioObjectType:i.audioObjectType,sampleRate:i.sampleRate,samplingFrequencyIndex:i.samplingFrequencyIndex,sampleSize:t.sampleSize,channelCount:i.channelCount},this.checkMetadata()):(this.audioLoaded||(this.audioLoaded=!0,this.baseAudioDTS=e.dts,this.baseAudioPTS=e.dts,this.checkMetadata()),n.push({codec:(null==(i=this.audioTrackMeta)?void 0:i.codec)||"",trackId:1,trackType:S.AUDIO,isSync:!0,isNonRef:!1,data:[t.data],dts:e.dts,pts:e.dts,offset:r,size:t.data.byteLength})),n},P.prototype.parseScriptBody=function(e,t){t=new st(t),this.emit("loadedtag",{header:e,body:t}),e=t.value;e&&"onMetaData"===t.name&&(this.flvMetadata=e,T.info("flv script tag loaded, flv metadata:",this.flvMetadata))},P.prototype.onProgress=function(e){var t=e.data,e=e.offset;t.byteLength&&(t=this.parse(t.buffer,e)).length&&(e=void 0,this.cachePackets.length?(e=this.cachePackets.concat(t),this.cachePackets=[]):e=t,this.metadata&&this.loader.status!==y.SUSPENGING?this.emit("loadeddata",{packets:e}):this.cachePackets=e)},P.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)},P.prototype.seek=function(){},P.prototype.reset=function(){Lt.prototype.reset.call(this),this.cachePackets=[],this.videoLoaded=!1,this.audioLoaded=!1,this.baseVideoDTS=0,this.baseVideoPTS=0,this.baseAudioDTS=0,this.baseAudioPTS=0,this.header=null,this.unhandleBuffer=null,this.flvMetadata=null,this.videoTrackMeta=null,this.audioTrackMeta=null};var dt=P;It=function(e,t){return(It=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}It(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Ut,Ct=f);var x=Ut;kt=function(e,t){return(kt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}kt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Ht,Pt=x);var ht=Ht;xt=function(e,t){return(xt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}xt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Mt,wt=ht);var ft=Mt;Et=function(e,t){return(Et=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Et(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Nt,Tt=f);var yt=Nt;bt=function(e,t){return(bt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}bt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Ot,St=x);var _t=Ot;mt=function(e,t){return(mt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}mt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Dt,vt=f);var gt,vt,mt,St,bt,Tt,Et,wt,xt,Pt,kt,Ct,It,Lt,Rt,At=Dt,e=(gt=function(e,t){return(gt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}gt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Dt(e,t){var r=vt.call(this,e,t)||this;r.entries=[],r.version=t.read(1),r.flag=t.read(3),r.entryCount=t.read(4);for(var i=0;i<r.entryCount;i++){var n=1===r.version;r.entries.push({segmentDuration:t.read(n?8:4),mediaTime:t.read(n?8:4),mediaRateInteger:t.read(2),mediaRateFraction:t.read(2)})}return r}function Ot(e,t){e=St.call(this,e,t)||this;return e.version=t.read(1),e.flag=t.read(3),e.entryCount=t.read(4),e}function Nt(e,t){e=Tt.call(this,e,t)||this;return e.bufferSizeDB=t.read(4),e.maxBitrate=t.read(4),e.avgBitrate=t.read(4),e}function Mt(){return null!==wt&&wt.apply(this,arguments)||this}function Ht(e,t){var e=Pt.call(this,e,t)||this,r=(t.skip(4),t.skip(2),e.bitReferenceId=t.read(2),e.codeStreamVersion=t.read(4),t.skip(4),t.skip(8),e.width=t.read(2),e.heigth=t.read(2),e.horizontalResolution=t.read(4),e.verticalResolution=t.read(4),t.skip(4),e.frameCount=t.read(2),Math.min(t.read(1),32));return e.compressorName=Array.from(new Array(r)).map(function(){return String.fromCharCode(t.read(1))}).join(""),t.skip(32-(r+1)),e.depth=t.read(2),t.skip(2),e}function Ut(){var e=null!==Ct&&Ct.apply(this,arguments)||this;return e.isContainer=!0,e}function P(){var e=null!==Lt&&Lt.apply(this,arguments)||this;return e.header=null,e.flvMetadata=null,e.videoTrackMeta=null,e.audioTrackMeta=null,e.unhandleBuffer=null,e.cachePackets=[],e.videoLoaded=!1,e.baseVideoPTS=0,e.baseVideoDTS=0,e.audioLoaded=!1,e.baseAudioPTS=0,e.baseAudioDTS=0,e.formatType=n.FLV,e}(I=w=w||{})[I.OD=1]="OD",I[I.IOD=2]="IOD",I[I.ESD=3]="ESD",I[I.DCD=4]="DCD",I[I.DSD=5]="DSD",I[I.SLCD=6]="SLCD";{R.readSize=function(e){for(var t,r=0,i=4;i--&&(r=r<<7|127&(t=e.read(1)),128&t););return r},R.extractDescriptors=function(e){for(var t,r,i,n=[];e.unreadLength;){if(t=new R(e),i=new g(e.buffer,e.offset,t.size),e.skip(t.size),t.size<=0)return n;switch(t.tag){case w.ESD:r=new Bt(t,i);break;case w.DCD:r=new jt(t,i);break;case w.DSD:r=new Vt(t,i);break;case w.SLCD:r=new qt(t,i);break;default:r=null}r&&i.unreadLength&&(r.children=R.extractDescriptors(i)),n.push(r)}return n};var k,Ft=R,C=(mi.findDescriptor=function(e,t){var r;return e.some(function(e){return!!(r=e.probe.tag===t?e:mi.findDescriptor(e.children,t))}),r},mi),Bt=(e(vi,$r=C),vi),jt=(e(gi,zr=C),gi),Vt=(e(_i,Xr=C),_i),qt=(e(yi,Kr=C),yi);Wr=function(e,t){return(Wr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var I,Gt=((I=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Wr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(fi,Gr=a),fi);qr=function(e,t){return(qr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var e,Wt=((e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}qr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(hi,Vr=f),hi);jr=function(e,t){return(jr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var I,Kt=((I=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}jr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(di,Br=f),di);Fr=function(e,t){return(Fr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var e,Xt=((e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Fr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(pi,Ur=f),pi);Hr=function(e,t){return(Hr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var I,zt=((I=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Hr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ui,Mr=f),ui);Nr=function(e,t){return(Nr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var e,$t=((e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Nr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ci,Or=x),ci);Dr=function(e,t){return(Dr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var I,Yt=((I=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Dr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(li,Ar=f),li),Qt=(Rr=function(e,t){return(Rr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},si),L=Lr=f;if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function Jt(){this.constructor=Qt}Rr(Qt,L),Qt.prototype=null===L?Object.create(L):(Jt.prototype=L.prototype,new Jt);var Zt=si}Ir=function(e,t){return(Ir=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ir(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ai,Cr=f);var er=ai;kr=function(e,t){return(kr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}kr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(oi,Pr=f);var tr=oi;xr=function(e,t){return(xr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}xr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ni,wr=f);var rr=ni;Er=function(e,t){return(Er=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Er(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ii,Tr=x);var ir=ii;br=function(e,t){return(br=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}br(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ri,Sr=x);var nr=ri;mr=function(e,t){return(mr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}mr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ti,vr=a);var or=ti;gr=function(e,t){return(gr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}gr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(ei,_r=x);var ar=ei;yr=function(e,t){return(yr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}yr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Zr,fr=a);var sr=Zr;hr=function(e,t){return(hr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}hr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Jr,dr=a);var lr=Jr;pr=function(e,t){return(pr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}pr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Qr,ur=a);var cr,ur,pr,dr,hr,fr,yr,_r,gr,vr,mr,Sr,br,Tr,Er,wr,xr,Pr,kr,Cr,Ir,Lr,Rr,Ar,Dr,Or,Nr,Mr,Hr,Ur,Fr,Br,jr,Vr,qr,Gr,Wr,Kr,Xr,zr,$r,Yr=Qr,e=(cr=function(e,t){return(cr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}cr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Qr(e,t){e=ur.call(this,e,t)||this;return 1===e.version?e.baseMediaDecodeTime=t.read(8):e.baseMediaDecodeTime=t.read(4),e}function Jr(e,t){var r=dr.call(this,e,t)||this;r.references=[],r.trackId=t.read(4),r.timescale=t.read(4),0===r.version?(r.pts=t.read(4),r.offset=t.read(4)):(r.pts=t.read(8),r.offset=t.read(8)),t.skip(2),r.references=[];for(var i=t.read(2),n=0;n<i;n++){var o=new p(t.read(4),32),a=t.read(4),s=new p(t.read(4),32);r.references.push({type:o.read(1),size:o.read(31),duration:a,startWithSap:s.read(1),sapType:s.read(3),sapDeltaTime:s.read(28)})}return r}function Zr(e,t){var r=fr.call(this,e,t)||this;r.isLeadings=[],r.sampleDependsOns=[],r.sampleIsDependedOns=[],r.sampleHasRedundancys=[];for(var i=0,n=void 0;i<t.unreadLength;i++)n=new p(t.read(1),8),r.isLeadings[i]=n.read(2),r.sampleDependsOns[i]=n.read(2),r.sampleIsDependedOns[i]=n.read(2),r.sampleHasRedundancys[i]=n.read(2);return r}function ei(){return null!==_r&&_r.apply(this,arguments)||this}function ti(){return null!==vr&&vr.apply(this,arguments)||this}function ri(){return null!==Sr&&Sr.apply(this,arguments)||this}function ii(){return null!==Tr&&Tr.apply(this,arguments)||this}function ni(e,t){e=wr.call(this,e,t)||this;return e.version=t.read(1),e.flag=t.read(3),e.graphicsMode=t.read(2),e.opcolor=[t.read(2),t.read(2),t.read(2)],e}function oi(e,t){e=Pr.call(this,e,t)||this;return e.version=t.read(1),e.flag=t.read(3),e}function ai(e,t){var r=Cr.call(this,e,t)||this;r.matrix=[],r.version=t.read(1),r.flag=t.read(3),r.createTime=r.toStandardTime(t.read(4)),r.modifyTime=r.toStandardTime(t.read(4)),r.trackId=t.read(4),t.skip(4),r.duration=t.read(4),t.skip(8),r.layer=t.read(2),r.alternateGroup=t.read(2),r.volume=Number(t.read(1)+"."+t.read(1)),t.skip(2);for(var i=0;i<9;i++)r.matrix.push(Number(t.read(2)+"."+t.read(2)));return r.width=Number(t.read(2)+"."+t.read(2)),r.height=Number(t.read(2)+"."+t.read(2)),r}function si(e,t){var r=Lr.call(this,e,t)||this;for(r.data=[];0<t.unreadLength;)r.data.push(t.read(1));return r}function li(e,t){var r=Ar.call(this,e,t)||this;r.matrix=[],r.version=t.read(1),r.flag=t.read(3),r.createTime=r.toStandardTime(t.read(4)),r.modifyTime=r.toStandardTime(t.read(4)),r.timeScale=t.read(4),r.duration=t.read(4),r.rate=Number(t.read(2)+"."+t.read(2)),r.volume=Number(t.read(1)+"."+t.read(1)),t.skip(10);for(var i=0;i<9;i++)r.matrix.push(Number(t.read(2)+"."+t.read(2)));return t.skip(24),r.nextTrackId=t.read(4),r}function ci(e,t){e=Or.call(this,e,t)||this;return t.skip(6),e.dataReferenceIndex=t.read(2),t.skip(8),e.channelCount=t.read(2),e.sampleSize=t.read(2),t.skip(4),e.sampleRate=t.read(4)>>>16,e}function ui(e,t){function r(e){return 96+(31&e)}var e=Mr.call(this,e,t)||this,i=(e.version=t.read(1),e.flag=t.read(3),1===e.version),i=(e.createTime=e.toStandardTime(t.read(i?8:4)),e.modifyTime=e.toStandardTime(t.read(i?8:4)),e.timeScale=t.read(4),e.duration=t.read(i?8:4),t.read(2));return e.language=String.fromCharCode(r(i>>10),r(i>>5),r(i)),e.quality=Number(t.read(1)+"."+t.read(1)),e}function pi(e,t){var r=Ur.call(this,e,t)||this;return r.data=t.readToUint8(e.size-e.length),r}function di(e,t){var r=Br.call(this,e,t)||this;for(r.name="",r.version=t.read(1),r.flag=t.read(3),r.preDefined=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)),r.handleType=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)),t.skip(12);0<t.unreadLength;)r.name+=String.fromCharCode(t.read(1));return r}function hi(e,t){var r=Vr.call(this,e,t)||this;for(r.compatibleBrands=[],r.majorBrand=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)),r.minorVersion=t.read(4);4<=t.unreadLength;)r.compatibleBrands.push(String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)));return r}function fi(e,t){var e=Gr.call(this,e,t)||this,t=(e.descriptors=[],e.audioObjectType=0,e.samplingfrequencyIndex=0,e.descriptors=Ft.extractDescriptors(t),C.findDescriptor(e.descriptors,w.DCD)),r=C.findDescriptor(e.descriptors,w.DSD);return r&&(e.audioObjectType=r.audioObjectType,e.samplingfrequencyIndex=r.samplingfrequencyIndex),e.codec=t&&r?"mp4a."+t.mepg4Audio.toString(16)+"."+r.audioObjectType.toString(16):"mp4a",e}function yi(e,t){e=Kr.call(this,e)||this;return e.esId=t.read(2),e}function _i(e,t){e=Xr.call(this,e)||this,t=new p(t.read(2),16);return e.audioObjectType=t.read(5),e.samplingfrequencyIndex=t.read(4),e.channel=t.read(4),e.frameLengthFlag=t.read(1),e.dependsOnCoreCoder=t.read(1),e.extesionFlag=t.read(1),e}function gi(e,t){e=zr.call(this,e)||this;return e.mepg4Audio=t.read(1),e.audioStream=t.read(1),e.bufferSize=t.read(3),e.maxBitrate=t.read(4),e.avgBitrate=t.read(4),e}function vi(e,t){e=$r.call(this,e)||this;return e.streamDependenceFlag=0,e.URLFlag=0,e.OCRStreamFlag=0,e.esId=t.read(2),e.esFlag=t.read(1),128&e.esFlag&&(e.streamDependenceFlag=t.read(2)),64&e.esFlag&&(e.URLFlag=t.read(1),t.skip(e.URLFlag)),32&e.esFlag&&(e.OCRStreamFlag=t.read(2)),e}function mi(e){this.children=[],this.probe=e}function R(e){this.tag=e.read(1),this.size=R.readSize(e)}(I=k=k||{})[I.BASE_DATA_OFFSET=1]="BASE_DATA_OFFSET",I[I.SAMPLE_DESC=2]="SAMPLE_DESC",I[I.SAMPLE_DUR=8]="SAMPLE_DUR",I[I.SAMPLE_SIZE=16]="SAMPLE_SIZE",I[I.SAMPLE_FLAG=32]="SAMPLE_FLAG",I[I.DUR_EMPTY=65536]="DUR_EMPTY",I[I.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF";e(ki,wi=a);var A,Si=ki;Ei=function(e,t){return(Ei=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ei(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Pi,Ti=a);var bi,Ti,Ei,wi,xi=Pi,I=(bi=function(e,t){return(bi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}bi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Pi(e,t){e=Ti.call(this,e,t)||this;return e.trackId=t.read(4),e.defaultSampleDescriptionIndex=t.read(4),e.defaultSampleDuration=t.read(4),e.defaultSampleSize=t.read(4),e.defaultSampleFlag=t.read(4),e}function ki(e,t){e=wi.call(this,e,t)||this;return e.baseDataOffset=0,e.defaultSampleDescriptionIndex=0,e.defaultSampleDuration=0,e.defaultSampleSize=0,e.defaultSampleFlag=0,e.trackId=t.read(4),e.flag&k.BASE_DATA_OFFSET&&(e.baseDataOffset=t.read(8)),e.flag&k.SAMPLE_DESC&&(e.defaultSampleDescriptionIndex=t.read(4)),e.flag&k.SAMPLE_DUR&&(e.defaultSampleDuration=t.read(4)),e.flag&k.SAMPLE_SIZE&&(e.defaultSampleSize=t.read(4)),e.flag&k.SAMPLE_FLAG&&(e.defaultSampleFlag=t.read(4)),e}(e=A=A||{})[e.DATA_OFFSET=1]="DATA_OFFSET",e[e.FIRST_FLAG=4]="FIRST_FLAG",e[e.DURATION=256]="DURATION",e[e.SIZE=512]="SIZE",e[e.FLAG=1024]="FLAG",e[e.CTS_OFFSET=2048]="CTS_OFFSET";I(kn,pn=a);var Ci=kn;un=function(e,t){return(un=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}un(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Pn,cn=f);var Ii=Pn;ln=function(e,t){return(ln=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ln(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(xn,sn=f);var Li=xn;an=function(e,t){return(an=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}an(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(wn,on=f);var Ri=wn;nn=function(e,t){return(nn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}nn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(En,rn=f);var Ai=En;tn=function(e,t){return(tn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}tn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Tn,en=x);var Di=Tn;Zi=function(e,t){return(Zi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Zi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(bn,Ji=x);var Oi=bn;Qi=function(e,t){return(Qi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Qi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Sn,Yi=f);var Ni=Sn;$i=function(e,t){return($i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};function Mi(e){return Array.isArray(e)?e:e?[e]:[]}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}$i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(mn,zi=f);var Hi=mn,Ui=(vn.prototype.addTrack=function(e){this.tracks.push(e)},vn.prototype.getTracks=function(){return this.tracks},vn.prototype.getTrackById=function(t){return this.tracks.find(function(e){return e.options.id===t})},vn),Fi=function(){return(Fi=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Bi=(N.prototype.getSamples=function(){return this.samples},N.prototype.getNextSampleOffset=function(){var e=this.samples[this.nextSampleIndex];return e?e.offset:0},N.prototype.addSample=function(e){this.samples.push(e),this.duration+=e.duration},N.prototype.processNextSample=function(e,t){void 0===t&&(t=0);var r=this.samples[this.nextSampleIndex];if(r)return this.processSample(e,t,r)},N.prototype.processSample=function(e,t,r){var i=(t=void 0===t?0:t)+e.byteLength,t=r.offset-t;if(0<=t&&r.offset+r.size<=i)return this.nextSampleIndex++,Fi(Fi({},r),{data:e.subarray(t,t+r.size)})},N.prototype.processSamples=function(e,t){void 0===t&&(t=0);for(var r=this.samples,i=[],n=this.nextSampleIndex,o=r.length;n<o;n++){var a=this.processSample(e,t,r[n]);if(!a)break;i.push(a)}return i},N.prototype.seek=function(e){for(var t,r=e*this.options.timeScale,i=-1,n=-1,o=0,a=this.samples.length;o<a;o++)if((t=this.samples[o]).isSync&&(n=o),t.dts+t.cts>=r){i=n;break}if(-1<i)return this.nextSampleIndex=i,this.samples[i]},N),ji=(gn.prototype.createMedia=function(e){return this._parseMoovJSON(e)},gn.prototype._parseMoovJSON=function(s){var l=this,e=s.mvhd.box,c=new Ui({duration:e.duration,timeScale:e.timeScale,rate:e.rate,modifyTime:e.modifyTime,createTime:e.createTime});return s.trak&&[].concat(s.trak).forEach(function(e){var t=e.tkhd,e=e.mdia,r=e.mdhd,i=e.hdlr,e=e.minf.stbl,t=t.box,i=i.box,r=r.box,n=ce[i.handleType],e=l._buildSamples(e,n),o={id:t.trackId,name:i.name,handleType:i.handleType,type:n,createTime:t.createTime,modifyTime:t.modifyTime,layer:t.layer,volume:t.volume,matrix:t.matrix,duration:t.duration,width:t.width,height:t.height,timeScale:r.timeScale,language:r.language,quality:r.quality,defaultSampleDescriptionIndex:1,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlag:0},n=null==(i=s.mvex)?void 0:i.trex,a=(n&&[].concat(n).forEach(function(e){e=e.box;o.defaultSampleDescriptionIndex=e.defaultSampleDescriptionIndex,o.defaultSampleDuration=e.defaultSampleDuration,o.defaultSampleSize=e.defaultSampleSize,o.defaultSampleFlag=e.defaultSampleFlag}),new Bi(o));e.forEach(function(e){return a.addSample(e)}),c.addTrack(a)}),c},gn.prototype._buildSamples=function(e,n){var o,a,s,l,c,u,p,d,h,f,y,_,g,v,m,S,b,t=e.stts,r=e.stss,i=e.ctts,T=e.stsc,E=e.stsz||e.stz2;return E?(u=e.stco||e.co64,p=T.box,d=null==r?void 0:r.box,h=t.box,f=null==i?void 0:i.box,v=g=_=y=-1,m=0,S=[],(b=E.box.sampleSizes).forEach(function(e,t){var r={},i=p.entries;r.size=e,r.trackType=n,0===t?(a=1,o=0,r.chunkIndex=a,c=i[r.chunkRunIndex=o].samplePerChunk,l=0,s=o+1<i.length?i[o+1].firstChunk-1:1/0):t<c?(r.chunkIndex=a,r.chunkRunIndex=o):(a++,l=0,s<(r.chunkIndex=a)&&(s=++o+1<i.length?i[o+1].firstChunk-1:1/0),c+=i[r.chunkRunIndex=o].samplePerChunk),r.descriptionIndex=i[o].sampleDescriptionIndex-1,r.offset=u.box.chunkOffsets[r.chunkIndex-1]+l,l+=r.size,y<t&&(_++,y=Math.max(y,0),y+=h.sampleCounts[_]),0<t?((e=S[t-1]).duration=h.sampleDurations[_],r.dts=S[t-1].dts+e.duration):r.dts=0,f?(g<=t&&(v++,g=Math.max(g,0),g+=f.sampleCounts[v]),r.cts=f.sampleOffsets[v]):r.cts=0,d?t===d.sampleNumbers[m]-1?(r.isSync=!0,m++):r.isSync=!1:r.isSync=!0,r.isLast=t===b.length-1,S.push(r)}),S):[]},gn),Vi=(_n.prototype.init=function(e){this.options=e},_n.prototype.parse=function(t){var r=this;Mi(t.traf).forEach(function(e){return r._buildSamples(e,t.box)})},_n.prototype._buildSamples=function(e,t){var r=e.tfhd.box,i=this._getTrakById(r.trackId);if(i)for(var n=i.options,o=e.tfdt.box,a=r.flag,s=(a&k.SAMPLE_DESC?r:n).defaultSampleDescriptionIndex,l=(a&k.SAMPLE_DUR?r:n).defaultSampleDuration,c=(a&k.SAMPLE_SIZE?r:n).defaultSampleSize,u=(a&k.SAMPLE_FLAG?r:n).defaultSampleFlag,p=Mi(e.trun),d=n.id,h=n.type,f=a&k.BASE_DATA_OFFSET?r.baseDataOffset:a&k.DEFAULT_BASE_IS_MOOF?t.header.start:0,y=0,_=0;_<p.length;_++)for(var g=p[_].box,v=g.flag,m=g.dataOffset+f,S=0;S<g.sampleCount;S++){var b={},T=(b.trackId=d,b.trackType=h,b.descriptionIndex=s,v&A.SIZE?b.size=g.sampleSizes[S]:b.size=c,v&A.DURATION?b.duration=g.sampleDurations[S]:b.duration=l,b.dts=0<y?y:o?o.baseMediaDecodeTime:0,y=b.dts+b.duration,v&A.CTS_OFFSET?b.cts=g.sampleCTSs[S]:b.cts=0,u);v&A.FLAG?T=g.sampleFlags[S]:0===S&&v&A.FIRST_FLAG&&(T=g.firstSampleFlag),b.offset=m,b.flag=T,b.isSync=!(T&(le.IS_NON_SYNC|le.DEPENDS_YES)),b.isLeading=T>>26&3,b.dependsOn=T>>24&3,b.isDependedOn=T>>22&3,b.hasRedundancy=T>>20&3,b.degradationPriority=65535&T,m+=b.size,b.isLast=_===p.length-1&&S===g.sampleCount-1,i.addSample(b)}},_n.prototype.destroy=function(){this.options=null},_n);Xi=function(e,t){return(Xi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Xi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(O,Ki=s),O.probe=function(e){return!(e.byteLength<8)&&"ftyp"===[e[4],e[5],e[6],e[7]].map(function(e){return String.fromCharCode(e)}).join("")},O.prototype.processPackets=function(t,r){var e,i=this,n=[];return this.media&&t.byteLength&&(this.media.getTracks().forEach(function(e){e.processSamples(t,r).forEach(function(e){e=i.convertSampleToPacket(e);e&&n.push(e)})}),e=this.getMinNextSampleOffset()-r,this.unhandleBuffer=e>=t.byteLength?null:t.slice(e).buffer),n},Object.defineProperty(O.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),O.prototype.seek=function(t){var e,r=this.options.progressive;this.unhandleBuffer=null,r&&this.loader.suspend(),null!=(e=this.media)&&e.getTracks().map(function(e){return e.seek(t)}),r&&this.loader.loadRange(this.getMinNextSampleOffset())},O.prototype.onProgress=function(e){var t=e.data,e=e.offset;t.length&&(this.unhandleBuffer&&(t=g.concatUint8(new Uint8Array(this.unhandleBuffer),t),e-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null),this.metadata||this.parse(new g(t.buffer,0),e),this.metadata)&&((t=this.processPackets(t,e)).length&&this.emit("loadeddata",{packets:t}))},O.prototype.getMinNextSampleOffset=function(){return this.media?Math.min.apply(Math,this.media.getTracks().map(function(e){return e.getNextSampleOffset()})):0},O.prototype.parse=function(o,a){var s,l=this;void 0===a&&(a=0);for(var c=o.offset,u=0,p=this;8<=o.unreadLength;){var e=function(){var e,t,r,i,n;return u=o.offset-c,0===(e=new ue(o,a+u)).size?(r=new Error("box [".concat(e.type,"] size \u4e3a 0")),console.error(r),p.emit("error",{code:d.PARSER,message:r.message,origin:r}),"break"):p.options.progressive&&"mdat"===e.type&&!p.metadata?(t=e.start+e.size,p.loader.suspend(),p.unhandleBuffer=null,T.info("\u68c0\u6d4b\u5230mdat box\u5728moov box\u4e4b\u540e\uff0c\u8df3\u8f6cmoov\u8d77\u59cb\u504f\u79fb\u4f4d"),p.loader.loadRange(t).then(function(){l.unhandleBuffer=null,l.loader.jump(e.start),l.loader.status!==y.SUSPENGING&&l.loader.loadRange(e.start,t)}),{value:void 0}):(r=e.size-e.length,o.unreadLength>=r?((n=H[e.type])?(i=new g(o.buffer,o.offset,r),(s=new n(e,i)).isContainer&&((n=new O({sub:!0})).proxy(p,["loadedbox"]),n.parse(i,u+a+e.length),n.removeAllListeners(),n.boxes.forEach(function(e){s.append(e)}))):s=new f(e),o.skip(r),p.boxes.push(s),void p.emit("loadedbox",s)):(o.back(e.length),"break"))}();if("object"==typeof e)return e.value;if("break"===e)break}o.unreadLength&&(this.unhandleBuffer=o.readToBuffer())},O.prototype.reset=function(){Ki.prototype.reset.call(this),this.boxes=[],this.unhandleBuffer=null,this.avcCBox=void 0,this.hvcCBox=void 0,this.mp4aBox=void 0,this.media=null,this.moofParser.destroy()};var qi=O;Wi=function(e,t){return(Wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var Gi,Wi,Ki,Xi,zi,$i,Yi,Qi,Ji,Zi,en,tn,rn,nn,on,an,sn,ln,cn,un,pn,dn=function(){return(dn=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},hn=["loadedcodecinfo","loadedmetadata","updatedmetadata","loadeddata","error"],fn=[qi,dt],yn=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Wi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(D,Gi=Ne),D.prototype.createLoader=function(){var e=new Be(this.options);return e.proxy(this,["progress","error"]),e.proxyOnce(this,["loadstart","loadend"]),e.once("progress",this.handleFirstLoadData),e},D.prototype.createParser=function(e){e=new e(dn(dn({},this.options),{loader:this.loader}));return e.proxy(this,hn),e},Object.defineProperty(D.prototype,"skipFrame",{get:function(){return this.activeParser.skipFrame},set:function(e){T.info("\u8bbe\u7f6eskipFrame:",e),void 0!==e&&(this.options.skipFrame=e,this.activeParser.skipFrame=e)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"status",{get:function(){return this.activeParser.status},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),D.prototype.parse=function(e){T.info("\u6267\u884cparse"),this.loader.reset(),this.handleFirstLoadData({offset:0,data:e}),this.activeParser.onLoadEnd()},D.prototype.load=function(e){return T.info("\u6267\u884cload",e),this.loader.destroy(),this.loader=this.createLoader(),this.loader.load(e)},D.prototype.seek=function(e){return T.info("\u6267\u884cseek",e),this.activeParser.seek(e)},D.prototype.suspend=function(){return this.activeParser.suspend()},D.prototype.resume=function(){return this.activeParser.resume()},D.prototype.destroy=function(){T.info("\u6267\u884cdestory"),this.loader.destroy(),this.activeParser.destroy(),this.removeAllListeners()},D);function D(e){void 0===e&&(e={});var i=Gi.call(this)||this;return i.loader=new Be,i.parserClasses=fn,i.logger=T,i.handleFirstLoadData=function(t){var e,r;t&&((r=i.parserClasses.find(function(e){return e.probe(t.data)}))?(e=i.activeParser.formatType,i.activeParser.destroy(),i.activeParser=i.createParser(r),T.info("\u5207\u6362parser, ".concat(n[e]," -> ").concat(n[i.activeParser.formatType])),i.emit("parserchange",void 0),i.activeParser.onProgress(t)):(r="\u672a\u627e\u5230\u5bf9\u5e94\u7684Parser, Byte\u6570\u636e: "+t.data.slice(0,20).join(","),T.error(r),i.emit("error",{code:d.PARSER,message:r})))},i.options=e,i.loader=i.createLoader(),i.activeParser=i.createParser(i.parserClasses[0]),i.logger.info("demuxer options",e),i}function O(e){var h=Ki.call(this,e=void 0===e?{}:e)||this;return h.media=null,h.unhandleBuffer=null,h.formatType=n.MP4,h.boxes=[],h._handleBoxLoad=function(e){var o,a,s,l,t,c,u,p,d,r,i=e.header.type;h._handleCodecBoxLoaded(i),"hvcC"===i?h.hvcCBox=e:"hvc1"===i||"hev1"===i?h.hvcCBox&&(h.hvcCBox.codecTag=i):"avcC"===i?h.avcCBox=e:"esds"===i?h.esdsBox=e:"mp4a"===i?h.mp4aBox=e:"moov"===i?(r=f.mapBoxToJSON(e),h.media=h.moovParser.createMedia(r),h.moofParser.init({media:h.media}),t=(r=h.mp4aBox||{}).sampleRate,o=void 0===t?0:t,t=r.sampleSize,a=void 0===t?0:t,t=r.channelCount,s=void 0===t?0:t,t=(r=h.esdsBox||{}).audioObjectType,l=void 0===t?0:t,t=r.codec,c=void 0===t?"":t,u=[],p=[],d=[],h.hvcCBox?(p=h.hvcCBox.vps,d=h.hvcCBox.pps,u=h.hvcCBox.sps):h.avcCBox&&(d=h.avcCBox.pps,u=h.avcCBox.sps),h.metadata={formatType:n.MP4,live:!!h.options.live,progressive:!!h.options.progressive,url:h.loader.url,basePTS:0,baseDTS:0,duration:h.media.options.duration,timescale:h.media.options.timeScale,tracks:h.media.getTracks().map(function(e){var t,r,i,n={};switch(n.id=e.options.id,n.type=e.options.type,n.timescale=e.options.timeScale,n.baseDTS=0,n.basePTS=0,n.type){case S.VIDEO:n.width=e.options.width,n.height=e.options.height,n.vps=p,n.sps=u,n.pps=d,n.rotate=(t=e.options.matrix).length<5||(r=Math.hypot(t[0],t[3]),i=Math.hypot(t[1],t[4]),0===r)||0===i?0:180*Math.atan2(t[1]/i,t[0]/r)/Math.PI,n.pixelRatio=[],n.codec=h.hvcCBox?h.hvcCBox.codec:(null==(i=h.avcCBox)?void 0:i.codec)||"",n.codecTag=h.hvcCBox?h.hvcCBox.codecTag:void 0;break;case S.AUDIO:n.audioObjectType=l,n.sampleRate=o,n.sampleSize=a,n.channelCount=s,n.codec=c;break;default:n.type=S.UNKNOWN}return n})},r=Number(h.options.offsetTime),h.metadata.progressive&&0<r&&h.seek(r),T.info("loadedmetadata metadata:",h.metadata),h.emit("loadedmetadata",h.metadata)):"moof"===i&&(T.info("\u68c0\u6d4b\u5230moof box\u88ab\u52a0\u8f7d\uff0c\u5f53\u524d\u7d20\u6750\u4e3afMP4"),h.moofParser.parse(f.mapBoxToJSON(e)))},h._handleCodecBoxLoaded=function(t){var e=["hvc1","hev1","avc1"].find(function(e){return e===t});e&&h.emit("loadedcodecinfo",e)},h.convertSampleToPacket=function(e){var t,r,i,n,o;return e.trackType===S.VIDEO&&(h.hvcCBox||h.avcCBox)?(o=e.data,t=e.isSync,r=(i=h.hvcCBox||h.avcCBox).lengthSizeMinusOne,i=i.codec,n=W.extractAVCCNAL(o,r),o=!1,h.hvcCBox&&(o=n.every(function(e){return b.isNonRef(e)})),t&&(h.hvcCBox?(h.hvcCBox.pps.forEach(function(e){return n.unshift(e)}),h.hvcCBox.sps.forEach(function(e){return n.unshift(e)}),h.hvcCBox.vps.forEach(function(e){return n.unshift(e)})):h.avcCBox&&(h.avcCBox.pps.forEach(function(e){return n.unshift(e)}),h.avcCBox.sps.forEach(function(e){return n.unshift(e)}))),{codec:i,trackId:e.trackId,trackType:e.trackType,isLast:e.isLast,dts:e.dts,pts:e.cts+e.dts,isSync:e.isSync,isNonRef:o,data:n,size:n.reduce(function(e,t){return e+t.byteLength},0),offset:e.offset}):e.trackType===S.AUDIO&&h.esdsBox?{codec:h.esdsBox.codec,trackId:e.trackId,trackType:e.trackType,dts:e.dts,pts:e.cts+e.dts,isLast:e.isLast,isSync:!0,isNonRef:!1,data:[e.data],size:e.data.byteLength,offset:e.offset}:void 0},h.options=e,h.moovParser=new ji,h.moofParser=new Vi,e.sub||h.on("loadedbox",h._handleBoxLoad),h}function _n(){var r=this;this.options=null,this._getTrakById=function(t){var e;return null==(e=r.options)?void 0:e.media.getTracks().find(function(e){return e.options.id===t})}}function gn(){}function N(e){this.samples=[],this.nextSampleIndex=0,this.duration=0,this.options=e}function vn(e){this.tracks=[],this.options=e}function mn(e,t){var r=zi.call(this,e,t)||this;r.sampleCounts=[],r.sampleDurations=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.sampleCounts[n]=t.read(4),r.sampleDurations[n]=t.read(4);return r}function Sn(e,t){var r=Yi.call(this,e,t)||this;r.isContainer=!0,r.sampleSizes=[],r.version=t.read(1),r.flag=t.read(3),r.sampleSize=t.read(4);for(var i=t.read(4),n=0;n<i;n++)0===r.sampleSize?r.sampleSizes.push(t.read(4)):r.sampleSizes.push(r.sampleSize);return r}function bn(e,t){var r=Ji.call(this,e,t)||this;r.sampleNumbers=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.sampleNumbers.push(t.read(4));return r}function Tn(e,t){e=en.call(this,e,t)||this;return e.version=t.read(1),e.flag=t.read(3),e.entryCount=t.read(4),e}function En(e,t){var r=rn.call(this,e,t)||this;r.entries=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.entries.push({firstChunk:t.read(4),samplePerChunk:t.read(4),sampleDescriptionIndex:t.read(4)});return r}function wn(e,t){var r=on.call(this,e,t)||this;r.chunkOffsets=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.chunkOffsets.push(t.read(8));return r}function xn(e,t){var r=sn.call(this,e,t)||this;r.chunkOffsets=[],r.version=t.read(1),r.flag=t.read(3);for(var i=t.read(4),n=0;n<i;n++)r.chunkOffsets.push(t.read(4));return r}function Pn(e,t){var r=cn.call(this,e,t)||this;r.sampleCounts=[],r.sampleOffsets=[],r.version=t.read(1),r.flag=t.read(3),r.entryCount=t.read(4);for(var i=0;i<r.entryCount;i++)r.sampleCounts.push(t.read(4)),r.sampleOffsets.push(t.read(4));return r}function kn(e,t){var r=pn.call(this,e,t)||this;r.sampleDurations=[],r.sampleSizes=[],r.sampleFlags=[],r.sampleCTSs=[],r.sampleCount=t.read(4),r.flag&A.DATA_OFFSET?r.dataOffset=t.readInt(4):r.dataOffset=0,r.flag&A.FIRST_FLAG?r.firstSampleFlag=t.read(4):r.firstSampleFlag=0;for(var i=0;i<r.sampleCount;i++)r.flag&A.DURATION&&(r.sampleDurations[i]=t.read(4)),r.flag&A.SIZE&&(r.sampleSizes[i]=t.read(4)),r.flag&A.FLAG&&(r.sampleFlags[i]=t.read(4)),r.flag&A.CTS_OFFSET&&(0===r.version?r.sampleCTSs[i]=t.read(4):r.sampleCTSs[i]=t.readInt(4));return r}}(),In;function Cn(e){var t=i[e];return void 0!==t||(t=i[e]={exports:{}},r[e](t,t.exports,Cn)),t.exports}var r,i,In},"object"==typeof r&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.VideoxDemux=i():e.VideoxDemux=i()},{"es6-promise":8}],53:[function(e,t,r){function a(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}var s=e("./vttparse");t.exports={parse:function(e,t,r){var i,e=e.trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),n=[],o=new s;o.oncue=function(e){e.id=a(e.startTime)+a(e.endTime)+a(e.text),e.text=decodeURIComponent(escape(e.text)),e.isBig=!1;var t=e.text.split("#xywh=");2==t.length&&(t=t[1].split(","),e.x=t[0],e.y=t[1],e.w=t[2],e.h=t[3],e.isBig=!0),0<e.endTime&&n.push(e)},o.onparsingerror=function(e){i=e},o.onflush=function(){i&&r?(r(i),console.log(i)):t(n)},e.forEach(function(e){o.parse(e+"\n")}),o.flush()}}},{"./vttparse":55}],54:[function(e,t,r){function S(e){return"string"==typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}function b(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)e[r]=i[r]}return e}function i(e,t,r){var i=this,n=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),o={},a=(n?i=document.createElement("custom"):o.enumerable=!0,i.hasBeenReset=!1,""),s=!1,l=e,c=t,u=r,p=null,d="",h=!0,f="auto",y="start",_=50,g="middle",v=50,m="middle";if(Object.defineProperty(i,"id",b({},o,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(i,"pauseOnExit",b({},o,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(i,"startTime",b({},o,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",b({},o,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",b({},o,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",b({},o,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",b({},o,{get:function(){return d},set:function(e){e="string"==typeof(e=e)&&!!T[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",b({},o,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",b({},o,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",b({},o,{get:function(){return y},set:function(e){e=S(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",b({},o,{get:function(){return _},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",b({},o,{get:function(){return g},set:function(e){e=S(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",b({},o,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",b({},o,{get:function(){return m},set:function(e){e=S(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");m=e,this.hasBeenReset=!0}})),i.displayState=void 0,n)return i}var T,n;t.exports="undefined"!=typeof window&&window.VTTCue?window.VTTCue:(T={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0},i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i)},{}],55:[function(e,t,r){function i(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}var s=e("./vttcue");function n(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function l(){this.values=Object.create(null)}function c(e,t,r,i){var n,o,a=i?e.split(i):[e];for(n in a)"string"==typeof a[n]&&2===(o=a[n].split(r)).length&&t(o[0],o[1])}l.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var u=new s(0,0,0),p="middle"===u.align?"middle":"center";function d(i,e,o){var t,a,n=i;function r(){var e,t=(t=(t=i).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?(e=(e=t[4])&&e.replace(".",""),t[3]?r(t[1],t[2],t[3].replace(":",""),e):59<t[1]?r(t[1],t[2],0,e):r(0,t[1],t[2],e)):null;function r(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}if(null===t)throw new Error("Malformed timestamp: "+n);return i=i.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){i=i.replace(/^\s+/,"")}if(s(),e.startTime=r(),s(),"--\x3e"!==i.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);i=i.substr(3),s(),e.endTime=r(),s(),t=i,e=e,a=new l,c(t,function(e,t){switch(e){case"region":for(var r=o.length-1;0<=r;r--)if(o[r].id===t){a.set(e,o[r].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),n=i[0];a.integer(e,n),a.percent(e,n)&&a.set("snapToLines",!1),a.alt(e,n,["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start",p,"end"]);break;case"position":i=t.split(","),a.percent(e,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start",p,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",p,"end","left","right"])}},/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical",""),"auto"===(t=a.get("line","auto"))&&-1===u.line&&(t=-1),e.line=t,e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align",p),"auto"===(t=a.get("position","auto"))&&50===u.position&&(t="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=t}n.prototype={parse:function(e){var i=this;function t(){for(var e=0,t=(t=i.buffer).replace(/<br(?: \/)?>/gi,"\n");e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),r}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var r,n=(r=t()).match(/^WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:r=t(),i.state){case"HEADER":/:/.test(r)?c(r,function(e,t){"Region"===e&&console.log("parse region",t)},/:/):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new s(0,0,""),i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{d(r,i.cue,i.regionList)}catch(e){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(e){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.exports=n},{"./vttcue":54}],56:[function(e,t,r){function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}var a=e("./vtt-parser"),s=e("./vtt-renderer"),l=e("./vtt-loader"),c=e("../../player/base/event/eventtype"),u=e("../../lib/ua"),p=e("../../lib/event"),d=e("../../ui/component/util"),e=function(){function e(e){this.parser=null,this.activeRenderer=null,this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.tickTimer=null,this.prevPosition=null,this._enabled=!1,this._isShow=!1,this.sleeper=new h,this.player=(e=e||{}).player,this.loader=new l,this.parser=new a,this.createRendererInstance(),this.bindEvents()}var t=e.prototype;return t.bindEvents=function(){var t,r=this,e=this,i=this.player,n=(i.on(c.Private.TextTrackFounded,function(e){if("user"===e.paramData.from)r.hasUserTracks=!0;else if(r.hasUserTracks)return;e=e.paramData.textTracks;e&&e.length&&(r.enabled=!0,r.trackConfigs=e.map(function(e){return o({},e,{label:e.label||e.srclang,language:e.srclang})}),r.trackConfigs.forEach(function(e){r.activeRenderer.addTrack(e),"always"===i.getOptions().controlBarVisibility&&r.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},r.parser.cues)}))}),i.on(c.Private.UserTrackReset,function(){r.hasUserTracks=!1}),u.IS_IOS?(t=!1,i.on(c.Player.RequestFullScreen,function(){t=!0}),p.on(i.tag,"webkitendfullscreen",function(){t=!1}),p.on(i.tag.textTracks,"change",function(){var e;r.sleeper.isSleep||(r.sleeper.sleep(1e3),r.isCustomRenderer)||t&&(e=i.tag.textTracks,(e=Array.from(e).find(function(e){return"showing"===e.mode}))?r.activeTrackConfig&&r.activeTrackConfig.language===e.language||(r.switchTrack(e.language),i.trigger(c.Private.SelectorValueChange,{type:"cc",text:e.label})):i.trigger(c.Private.CCStateChanged,{value:"off",lang:""}))})):(i.on(c.Player.RequestFullScreen,this.adjustLayout.bind(this)),i.on(c.Player.CancelFullScreen,this.adjustLayout.bind(this)),n=d.debounce(function(){e.isCustomRenderer&&e.activeRenderer.resetCuesStyle(r.parser.cues)},100),p.on(window,"resize",n)),d.throttle(function(){e.isShow&&(e.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},e.parser.cues),e.player.paused())&&(e.activeRenderer.hide(),e.activeRenderer.restore())},100)),n=(i.on(c.Private.ShowBar,n),d.throttle(function(){e.isShow&&(e.activeRenderer.forceUpdateCuesStyle({transform:"none"},e.parser.cues),e.player.paused())&&(e.activeRenderer.hide(),e.activeRenderer.restore())},100));i.on(c.Private.HideBar,n),i.on(c.Private.VttHide,function(){r.hide()}),i.on(c.Private.VttSwitchTrack,function(e){r.switchTrack(e.paramData)}),i.on(c.Private.VttClearTracks,function(){r.reset()})},t.createRendererInstance=function(e){this.activeRenderer&&this.activeRenderer.dispose();var t=this.player.getOptions(),r={player:this.player};this.adaptPlatform(),e?e===s.VttBasicRenderer.RENDER_TYPE_NATIVE?this.activeRenderer=new s.NativeRenderer(r):(r.overlayId=this.getOverlayId(),this.activeRenderer=new s.CustomRenderer(r)):t.useNativeTextRenderer?this.activeRenderer=new s.NativeRenderer(r):(r.overlayId=this.getOverlayId(),this.activeRenderer=new s.CustomRenderer(r))},t.switchTrack=function(t){var e,r=this;this.trackConfigs&&this.trackConfigs.length&&(this.activeTrackConfig&&(this.parser.dispose(),this.parser=new a,this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),this.activeTrackConfig=t,e=this.trackConfigs.find(function(e){return e.language===t}))&&(e=e._loaded?"":(e||{}).src,this.loadVtt(e,function(){r.parseVtt(),r.activeRenderer.addCues(r.parser.cues,r.activeTrackConfig.language),r.show()}))},t.adaptPlatform=function(){var e=this.player.getOptions();u.IS_IOS&&(e.useNativeTextRenderer=!0)},t.loadVtt=function(e,t){var r=this;e?this.loader.loadFromUrl(e,function(e){r.activeTrackConfig._loaded=!0,r.vttText[r.activeTrackConfig.language]=e,t&&t()}):t&&t()},t.show=function(){this._isShow=!0,this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language)},t.hide=function(){this._isShow=!1,this.clearTicker(),this.activeRenderer.hide()},t.switchRenderer=function(e){var t=this,r=s.VttBasicRenderer.RENDER_TYPE_NATIVE,i=s.VttBasicRenderer.RENDER_TYPE_CUSTOM;(e===r&&this.activeRenderer.type!==r||e===i&&this.activeRenderer.type!==i)&&(this.createRendererInstance(e),this.trackConfigs.forEach(function(e){return t.activeRenderer.addTrack(e)}),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())},t.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])},t.adjustLayout=function(){var e=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout(function(){e.activeRenderer.restore()},300))},t.startTickTimeListener=function(){var t=this;this.clearTicker(),this.tick(function(){var e=t.player.getCurrentTime();isNaN(e)||t.activeRenderer.renderCues(t.findTargetCues(e))})},t.tick=function(e){var t=this;this.tickTimer=requestAnimationFrame(function(){try{e()}catch(e){console.log("e",e)}t.tick(e)})},t.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),this.tickTimer=null)},t.getOverlayId=function(){var e=(this.player.el().getElementsByClassName("prism-text-overlay")||[])[0];if(e)return e.id},t.findTargetCues=function(e){if(this.parser&&e!==this.prevPosition){this.prevPosition=e;for(var t=[],r=0;r<this.parser.cues.length;r++){var i=this.parser.cues[r];if(e>=i.startTime&&e<=i.endTime)t.push(i);else if(e<i.startTime)break}return t}},t.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()},t.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),this.parser=null),this.activeRenderer&&(this.activeRenderer.dispose(),this.activeRenderer=null),this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.prevPosition=null,this._enabled=!1,this._isShow=!1},n(e,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return this.activeRenderer.type===s.VttBasicRenderer.RENDER_TYPE_CUSTOM}},{key:"activeTrackConfig",get:function(){var e;return null==(e=this.trackConfigs)?void 0:e.find(function(e){return e._isActive})},set:function(t){this.trackConfigs.forEach(function(e){return e._isActive=e.language===t})}}]),e}(),h=function(){function e(){this.value=!1,this.timer=null}return e.prototype.sleep=function(e){var t=this;this.timer&&clearTimeout(this.timer),this.value=!0,this.timer=setTimeout(function(){t.value=!1},e)},n(e,[{key:"isSleep",get:function(){return this.value}}]),e}();t.exports=e},{"../../lib/event":33,"../../lib/ua":49,"../../player/base/event/eventtype":70,"../../ui/component/util":159,"./vtt-loader":58,"./vtt-parser":59,"./vtt-renderer":60}],57:[function(e,t,r){function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),o(e.prototype.constructor=e,t)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}var l=e("../../lib/data"),c={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},u={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},e=function(r){function e(e){var e=i({},e=void 0===e?{}:e,{kind:e.kind||u.SUBTITLES,language:e.language||e.srclang||""}),t=e.mode||c.DISABLED;e.default;return-1<[u.METADATA,u.CHAPTERS].indexOf(e.kind)&&(t=c.HIDDEN),e.mode=t,(t=r.call(this,e)||this)._cues=[],t._activeCues=[],t._settings={},t._nativeTrack=null,t._extData={},t._settings=e,t}n(e,r);var t=e.prototype;return t.setExtData=function(e){this._extData=i({},this._extData,e=void 0===e?{}:e)},t.addCue=function(e){this._cues.push(e),this.nativeTrack&&this.nativeTrack.addCue(e)},t.removeCue=function(t){this._cues=this._cues.filter(function(e){return e!==t}),this.nativeTrack&&this.nativeTrack.removeCue(t)},s(e,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(e){this._settings.mode=e,this.nativeTrack&&(this.nativeTrack.mode=e)}},{key:"language",get:function(){return this._settings.language},set:function(e){this._settings.language=e,this.nativeTrack&&(this.nativeTrack.language=e)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(e){this._nativeTrack=e}}]),e}(function(){function e(e){this._id=(e=void 0===e?{}:e).id||"prism-track-"+l.guid(),this._kind=e.kind||"",this._language=e.language||"",this._label=e.label||""}return s(e,[{key:"label",get:function(){return this._label},set:function(e){this._label=e}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}]),e}()),p=function(e){function t(){return e.call(this)||this}return n(t,e),t}(function(){function e(){this._trackList=[]}return e.prototype.addTrack=function(e){var t=this.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this._trackList[t]}}),-1===this._trackList.indexOf(e)&&this._trackList.push(e)},s(e,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}]),e}());t.exports.TextTrack=e,t.exports.TextTrackList=p,t.exports.TRACK_MODE=c,t.exports.TRACK_KIND=u},{"../../lib/data":30}],58:[function(e,t,r){var i=e("../io");t.exports=function(){function e(){}return e.prototype.loadFromUrl=function(e,t){i.get(e,function(e){t(e)},function(e,t){console.log("ERR",e,t)})},e}()},{"../io":40}],59:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=e("./vttjs").WebVTT,e=function(){function e(){var t=this;this._cues=[],this._regions=[],this.parser=new o.Parser(window,o.StringDecoder()),this.parser.onregion=function(e){t._regions.push(e)},this.parser.oncue=function(e){t._cues.push(e)},this.parser.onflush=function(){},this.parser.onparsingerror=function(e){console.log("onparsingerror",e)}}var t,r,i=e.prototype;return i.parse=function(e){this.parser.parse(e),this.parser.flush()},i.reset=function(){this.parser.flush(),this._cues=[],this._regions=[]},i.dispose=function(){this.parser.flush(),this.parser=null,this._cues=[],this._regions=[]},i=e,(t=[{key:"cues",get:function(){return this._cues}}])&&n(i.prototype,t),r&&n(i,r),Object.defineProperty(i,"prototype",{writable:!1}),e}();t.exports=e},{"./vttjs":61}],60:[function(e,t,r){function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),n(e.prototype.constructor=e,t)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e("../../player/base/event/eventtype");var s=e("./text-track"),l=e("./vttjs").WebVTT,c=e("../../lib/dom"),u=s.TextTrack,p=s.TextTrackList,d=s.TRACK_MODE,h=(s.TRACK_KIND,function(){function e(e){this.player=null,this.type=null,this.trackList=null,this.overrideStyle={},this.player=(e=e||{}).player,this.defineTextTrackGetter(),this.trackList=new p}var t=e.prototype;return t.log=function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=console).log.apply(e,["[LOG:"+this.type+"]"].concat(r))},t.defineTextTrackGetter=function(){var e=this;this.player.getTextTracks=function(){return e.trackList||[]}},t.show=function(e){e=this.findTrackByLanguage(e);e&&(e.mode=d.SHOWING)},t.findTrackByLanguage=function(t){return this.trackList.list.find(function(e){return e.language===t})},t.clearCurrentCues=function(e){if(e){var t=e.mode;if(t===d.DISABLED&&(e.mode=d.HIDDEN),e.cues)for(var r=e.cues.length;r--;)e.removeCue(e.cues[r]);t===d.DISABLED&&(e.mode=t)}},t.addTrack=function(){},t.addCues=function(){},t.restore=function(){},t.renderCues=function(){},t.updateCuesStyle=function(){},t.clearTrack=function(e){this.clearCurrentCues(this.findTrackByLanguage(e))},t.clearAllTracks=function(){var t=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach(function(e){e.mode=d.DISABLED,t.clearCurrentCues(e)}),this.trackList=new p},t.reset=function(){this.hide(),this.clearAllTracks()},t.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),this.player=null,this.type=null},e}()),e=(h.RENDER_TYPE_CUSTOM="CUSTOM",h.RENDER_TYPE_NATIVE="NATIVE",function(r){function e(e){var t=r.call(this,e)||this;return t.overlayId=null,t.currentCues=null,e=e||{},t.type=h.RENDER_TYPE_CUSTOM,t.overlayId=e.overlayId,t}a(e,r);var t=e.prototype;return t.addTrack=function(e){var t=new u({kind:e.kind,label:e.label,language:e.language});t.mode=e.default?d.SHOWING:d.DISABLED,this.trackList.addTrack(t)},t.hide=function(){return l.processCues(window,[],document.getElementById(this.overlayId))},t.restore=function(){this.currentCues&&(this.currentCues.forEach(function(e){return e.displayState=null}),l.processCues(window,this.currentCues,this.overlayEl),this.updateCuesStyle(this.currentCues))},t.renderCues=function(e){e&&(this.currentCues=e,this.overlayEl||(this.overlayEl=document.getElementById(this.overlayId)),l.processCues(window,e,this.overlayEl),this.updateCuesStyle(e))},t.updateCuesStyle=function(e){var i=this;e.forEach(function(e){var t,r=e.displayState;r._styleSetDone||r&&(r.setAttribute("class","prism-cue"),i.overlayEl||(i.overlayEl=document.getElementById(i.overlayId)),e=i.overlayEl.offsetWidth,t=i.overlayEl.offsetHeight,(e=Math.min(e,t))&&(r.style.fontSize=.05*e+"px",r.style.height="auto",r.style.top="auto"),Object.keys(i.overrideStyle).forEach(function(e){i.tryUpdateStyle(r,e,i.overrideStyle[e])}),r._styleSetDone=!0)})},t.updateOverrideStyle=function(e){this.overrideStyle=i({},this.overrideStyle,e=void 0===e?{}:e)},t.forceUpdateCuesStyle=function(e,t){void 0===t&&(t=[]),this.updateOverrideStyle(e=void 0===e?{}:e),this.resetCuesStyle(t)},t.tryUpdateStyle=function(e,t,r){try{e.style[t]=r}catch(e){}},t.resetCuesStyle=function(e){e&&e.length&&e.forEach(function(e){e.displayState&&(e.displayState=null)})},t.dispose=function(){r.prototype.dispose.call(this),this.overlayId=null,this.currentCues=null},e}(h)),s=function(t){function e(e){return(e=t.call(this,e=void 0===e?{}:e)||this).type=h.RENDER_TYPE_NATIVE,e}a(e,t);var r,i,n=e.prototype;return n.addTrack=function(t){var e=this.player.tag,r=Array.from(e.textTracks)||[],i=r.find(function(e){return e.language===t.language}),i=(this.log("sameLangTrack",i,r),(r=i?(this.clearCurrentCues(i),i.kind=t.kind,i.label=t.label,i):e.addTextTrack(t.kind,t.label,t.language)).mode=t.default?d.SHOWING:d.DISABLED,new u(t));i.nativeTrack=r,this.trackList.addTrack(i)},n.addCues=function(e,t){var r;e&&e.length&&(r=this.trackList.list.find(function(e){return e.language===t}))&&e.forEach(function(e){r.addCue(e)})},n.hide=function(){this.trackList.list.forEach(function(e){e.mode=e.mode===d.SHOWING?d.HIDDEN:e.mode})},n.invalidAllTracks=function(){},n.forceUpdateCuesStyle=function(e,t){c.addCssByStyle("video::-webkit-media-text-track-container{transform: "+e.transform+";}")},n.dispose=function(){t.prototype.dispose.call(this)},n=e,(r=[{key:"activeTrack",get:function(){return this.trackList.list.find(function(e){return e.mode===d.SHOWING})}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(h);t.exports.VttBasicRenderer=h,t.exports.CustomRenderer=e,t.exports.NativeRenderer=s},{"../../lib/dom":32,"../../player/base/event/eventtype":70,"./text-track":57,"./vttjs":61}],61:[function(e,t,r){t.exports={WebVTT:e("./vtt.js").WebVTT}},{"./vtt.js":62}],62:[function(e,t,r){var i=this;function o(e,t){return void 0===t&&(t=1),"rgba("+[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),t].join(",")+")"}var l,p=1;function n(e,t,r){switch(r){case"webvtt.font.color":case"webvtt.font.opacity":var i=Services.prefs.getCharPref("webvtt.font.color"),n=Services.prefs.getIntPref("webvtt.font.opacity")/100;l.fontSet=o(i,n);break;case"webvtt.font.scale":p=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":i=Services.prefs.getCharPref("webvtt.bg.color"),n=Services.prefs.getIntPref("webvtt.bg.opacity")/100;l.backgroundSet=o(i,n);break;case"webvtt.edge.color":case"webvtt.edge.type":i=Services.prefs.getIntPref("webvtt.edge.type"),n=Services.prefs.getCharPref("webvtt.edge.color");l.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][i]+o(n)}}"undefined"!=typeof Services&&(l={},["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(e){n(0,0,e),Services.prefs.addObserver(e,n,!1)}));var a=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return s.prototype=e,new s};function s(){}function c(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function h(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}e=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function u(){this.values=a(null)}function d(e,t,r,i){var n,o,a=i?e.split(i):[e];for(n in a)"string"==typeof a[n]&&2===(o=a[n].split(r)).length&&t(o[0],o[1])}((c.prototype=a(Error.prototype)).constructor=c).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},u.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var f={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\xa0"},y={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},_={v:"title",lang:"lang"},g={rt:"ruby"};function v(e,t){function r(e){return f[e]}for(var i,n,o,a,s,l,c,u=e.document.createElement("div"),p=u,d=[];null!==(c=void 0,c=t?(c=(c=t.match(/^([^<]*)(<[^>]+>?)?/))[1]||c[2],t=t.substr(c.length),c):null);)"<"===c[0]?"/"===c[1]?d.length&&d[d.length-1]===c.substr(2).replace(">","")&&(d.pop(),p=p.parentNode):(o=h(c.substr(1,c.length-2)))?(i=e.document.createProcessingInstruction("timestamp",o),p.appendChild(i)):(n=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(o=n[1],a=n[3],l=s=void 0,l=y[o],i=l?((s=e.document.createElement(l)).localName=l,(l=_[o])&&a&&(s[l]=a.trim()),s):null)&&(o=p,g[(l=i).localName]&&g[l.localName]!==o.localName||(n[2]&&(i.className=n[2].substr(1).replace("."," ")),d.push(n[1]),p.appendChild(i),p=i)):p.appendChild(e.document.createTextNode(function(e){for(;n=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(n[0],r);return e}(c)));return u}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function S(e){var t=[],r="";if(e&&e.childNodes)for(o(t,e);r=function e(t){var r,i,n;return t&&t.length?(i=(r=t.pop()).textContent||r.innerText)?(n=i.match(/^.*(\n|\r)/))?n[t.length=0]:i:"ruby"===r.tagName?e(t):r.childNodes?(o(t,r),e(t)):void 0:null}(t);)for(var i=0;i<r.length;i++)if(function(e){for(var t=0;t<m.length;t++){var r=m[t];if(e>=r[0]&&e<=r[1])return 1}}(r.charCodeAt(i)))return"rtl";return"ltr";function o(e,t){for(var r=t.childNodes.length-1;0<=r;r--)e.push(t.childNodes[r])}}function b(){}function T(e,t,r){var i="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),n="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)",a="",n=(void 0!==l&&(n=l.fontSet,o=l.backgroundSet,a=l.edgeSet),i&&(n="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),b.call(this),this.cue=t,this.cueDiv=v(e,t.text),{color:n,backgroundColor:o,textShadow:a,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),s=(i||(n.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",n.unicodeBidi="plaintext"),this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={textAlign:"middle"===t.align?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},i||(n.direction=S(this.cueDiv),n.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"plaintext"),this.applyStyles(n),this.div.appendChild(this.cueDiv),0);switch(t.positionAlign){case"start":s=t.position;break;case"middle":s=t.position-t.size/2;break;case"end":s=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function E(e){var t,r,i,n,o="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent);e.div&&(t=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop,n=(n=(n=e.div.childNodes)&&n[0])&&n.getClientRects&&n.getClientRects(),e=e.div.getBoundingClientRect(),n=n?Math.max(n[0]&&n[0].height||0,e.height/n.length):0),this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||t,this.bottom=e.bottom||i+(e.height||t),this.width=e.width||r,this.lineHeight=void 0!==n?n:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function w(e,t,s,l){var r,i=new E(t),n=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,r=t.textTrackList,i=0,n=0;n<r.length&&r[n]!==t;n++)"showing"===r[n].mode&&i++;return-1*++i}(n),a=[];if(n.snapToLines){switch(n.vertical){case"":a=["+y","-y"],r="height";break;case"rl":a=["+x","-x"],r="width";break;case"lr":a=["-x","+x"],r="width"}var c=i.lineHeight,u=c*Math.round(o),p=s[r]+c,d=a[0];Math.abs(u)>p&&(u=u<0?-1:1,u*=Math.ceil(p/c)*c),o<0&&(u+=""===n.vertical?s.height:s.width,a=a.reverse()),i.move(d,u)}else{var h=i.lineHeight/s.height*100;switch(n.lineAlign){case"middle":o-=h/2;break;case"end":o-=h}switch(n.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}a=["+y","-x","+x","-y"],i=new E(t)}p=function(e,t){for(var r,i=new E(e),n=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(s,t[o])||e.within(s)&&e.overlapsAny(l);)e.move(t[o]);if(e.within(s))return e;var a=e.intersectPercentage(s);a<n&&(r=new E(e),n=a),e=new E(i)}return r||i}(i,a);t.move(p.toCSSCompatValues(s))}function x(){}b.prototype.applyStyles=function(e,t){for(var r in t=t||this.div,e)e.hasOwnProperty(r)&&(t.style[r]=e[r])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(T.prototype=a(b.prototype)).constructor=T,E.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},E.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},E.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},E.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},E.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},E.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},E.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},E.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||r}},x.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},x.convertCueToDOMTree=function(e,t){return e&&t?v(e,t):null},x.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",r.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(t))for(var n,o,a=[],s=E.getSimpleBoxPosition(i),l={font:Math.round(.05*s.height*100)/100*p+"px sans-serif"},c=0;c<t.length;c++)o=t[c],n=new T(e,o,l),i.appendChild(n.div),w(0,n,s,a),o.displayState=n.div,a.push(E.getSimpleBoxPosition(n));else for(var u=0;u<t.length;u++)i.appendChild(t[u].displayState)},(x.Parser=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof c))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var i=this;function t(){for(var e=i.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,i.buffer=e.substr(t),r}function r(e){d(e,function(e,t){var n;"Region"===e&&(e=t,n=new u,d(e,function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var r,i=t.split(",");2===i.length&&((r=new u).percent("x",i[0]),r.percent("y",i[1]),r.has("x")&&r.has("y"))&&(n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y")));break;case"scroll":n.alt(e,t,["up"])}},/=/,/\s/),n.has("id"))&&((e=new i.window.VTTRegion).width=n.get("width",100),e.lines=n.get("lines",3),e.regionAnchorX=n.get("regionanchorX",0),e.regionAnchorY=n.get("regionanchorY",100),e.viewportAnchorX=n.get("viewportanchorX",0),e.viewportAnchorY=n.get("viewportanchorY",100),e.scroll=n.get("scroll",""),i.onregion&&i.onregion(e),i.regionList.push({id:n.get("id"),region:e}))},/:/)}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var n,o=(n=t()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new c(c.Errors.BadSignature);i.state="HEADER"}for(var a=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(a?a=!1:n=t(),i.state){case"HEADER":/:/.test(n)?r(n):n||(i.state="ID");continue;case"NOTE":n||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){i.state="NOTE";break}if(!n)continue;if(i.cue=new i.window.VTTCue(0,0,""),i.state="CUE",-1===n.indexOf("--\x3e")){i.cue.id=n;continue}case"CUE":try{!function(t,e,o){var r,a,i=t;function n(){var e=h(t);if(null===e)throw new c(c.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=n(),s(),"--\x3e"!==t.substr(0,3))throw new c(c.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),s(),e.endTime=n(),s(),r=t,e=e,a=new u,d(r,function(e,t){switch(e){case"region":for(var r=o.length-1;0<=r;r--)if(o[r].id===t){a.set(e,o[r].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),n=i[0];a.integer(e,n),a.percent(e,n)&&a.set("snapToLines",!1),a.alt(e,n,["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),a.percent(e,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical",""),e.line=a.get("line","auto"),e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align","middle"),e.position=a.get("position","auto"),e.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)}(n,i.cue,i.regionList)}catch(e){i.reportOrThrowError(e),i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var s=-1!==n.indexOf("--\x3e");if(!n||s&&(a=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=n;continue;case"BADCUE":n||(i.state="ID");continue}}}catch(e){i.reportOrThrowError(e),"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new c(c.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}},i.WebVTT=x},{}],63:[function(e,t,r){var n=e("../lib/io");e("../lib/storage");function i(e){this._uploadDuration=e.logDuration||5,this._uploadCount=e.logCount||10,this._logReportTo=e.logReportTo,this._logs=[],this._retry=0,this._disposed=!1,this._supportLocalStorage=!0;var t,n=this;window&&(window.onbeforeunload=function(e){if(0<n._logs.length)if(n._supportLocalStorage)localStorage.setItem("__aliplayer_log_data",JSON.stringify(n._logs));else{n._report();for(var t=500,r=(new Date).getTime(),i=r;i<r+t;)i=(new Date).getTime()}});try{localStorage?(t=localStorage.getItem("__aliplayer_log_data"),localStorage.removeItem("__aliplayer_log_data"),t&&(this._logs=JSON.parse(t))):this._supportLocalStorage=!1}catch(e){this._supportLocalStorage=!1}this._start()}i.prototype.add=function(e){var t=this._logs.length;if(e.__time__=Math.round(new Date/1e3),0<t&&"4001"==e.e){t=this._logs[t-1];if("4001"==t.e&&t.__time__-e.__time__<5)return}this._logs.push(e),(this._logs.length>this._uploadCount||"4001"==e.e||"2002"==e.e)&&this._report()},i.prototype.dispose=function(){this._report(),this._disposed=!0},i.prototype._start=function(){this._disposed=!1;this._retry=0,this._report()},i.prototype._report=function(t){var e,r,i;this._tickHandler&&(clearTimeout(this._tickHandler),this._tickHandler=null),0<(t=t||this._logs.splice(0,this._uploadCount)).length?(i={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(e=JSON.stringify({__logs__:t,__source__:""})).length},n.postWithHeader((r=this)._logReportTo,e,i,function(e){r._tick()},function(e){0==r._retry?(r._retry=1,r._report(t)):r._tick()})):this._tick()},i.prototype._tick=function(){var e;this._disposed||(this._retry=0,(e=this)._logs.length>this._uploadCount?e._report():this._tickHandler=setTimeout(function(){e._report()},1e3*this._uploadDuration))},t.exports=i},{"../lib/io":40,"../lib/storage":48}],64:[function(e,t,r){function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}var i,n=e("../lib/oo"),s=e("../lib/object"),y=e("../lib/data"),l=e("../lib/io"),_=e("../lib/ua"),g=e("../config"),o=e("../player/base/event/eventtype"),v=e("./util"),m=e("./log"),c=0,u={STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},e=n.extend({init:function(e,t,r){this.trackLog=r=void 0===r?!0:r,this.player=e,this.requestId="",this.sessionId=y.guid(),this.playId=0,this.firstPlay=!0,this.osName=_.os.name,this.osVersion=_.os.version||"",this.exName=_.browser.name,this.exVersion=_.browser.version||"",this.lightSaasVideoId="",this._logService="",this._h265ProbeCost={},this.startPlayReported=!1,this.canplayReported=!1,this.seekingData={seekingStartTime:0},this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},t.logBatched&&(this._logService=new m(g));var r=this.player.getOptions(),e=t.from||"",t=(r.isLive,r.isLive?"live":"vod"),i="pc",n=(_.IS_IPAD?i="pad":_.os.phone&&(i="phone"),this.encodeURL(_.getReferer())),o=_.getHref(),a=this.encodeURL(o),s="",o=(o&&(s=_.getHost(o)),g.h5Version),l=v.getUuid(),c=r.source?this.encodeURL(r.source):"",u=_.getHost(r.source),p=r.userId?r.userId+"":"0",d=this.sessionId,h=(new Date).getTime(),f=r.traceId||"";this._userNetInfo={cdnIp:"",localIp:""};this.opt={APIVersion:"0.6.0",t:h,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:_.USER_AGENT,hn:"0.0.0.0",bi:e,ri:d,e:"0",args:"0",li_ki:r.license.key||"",vt:t,tt:i,dm:"h5",av:o,uuid:l,vu:c,vd:u,ua:p,dn:"custom",cdn_ip:"0.0.0.0",app_n:s,r:n,pu:a,ti:f},this.bindEvent()},updateVideoInfo:function(e){e=e.from||"";this.opt.bi=e+"",this.updateSourceInfo()},updateSourceInfo:function(){var e,t=this.player.getOptions();t&&(e=t.source?this.encodeURL(t.source):"",t=_.getHost(t.source),this.opt.vu=e,this.opt.vd=t)},updateTraceId:function(e){this.opt.ti=e},updateLightSaasVideoId:function(e){this.lightSaasVideoId=e},replay:function(){this.reset(),this.player.trigger(o.Video.LoadStart),this.player.trigger(o.Video.LoadedMetadata),this.player.trigger(o.Video.LoadedData)},bindEvent:function(){var r=this;this.player.on(o.Player.Init,function(){r._onPlayerInit()}),this.player.on(o.Video.LoadStart,function(){r._onPlayerloadstart()}),this.player.on(o.Video.LoadedMetadata,function(){r._onPlayerLoadMetadata()}),this.player.on(o.Video.LoadedData,function(){r._onPlayerLoaddata()}),this.player.on(o.Player.H265PlayInfo,function(e){r._onPlayerH265PlayInfo(e)}),this.player.on(o.Video.Play,function(){r._onPlayerPlay()}),this.player.on(o.Video.Playing,function(){r._onPlayerReady()}),this.player.on(o.Video.Ended,function(){r._onPlayerFinish()}),this.player.on(o.Video.Pause,function(){r._onPlayerPause()}),this.player.on("seeking",function(){r._onPlayerSeeking()}),this.player.on("seeked",function(){r._onPlayerSeeked()}),this.player.on(o.Private.LicenseHasResult,function(e){r._onLicenseHasResult(e)}),this.player.on(o.Private.SeekStart,function(e){r._onPlayerSeekStart(e)}),this.player.on(o.Private.EndStart,function(e){r._seekEndData=e.paramData}),this.player.on(o.Player.Waiting,function(){r._onPlayerLoaded()}),this.player.on(o.Video.CanPlayThrough,function(){}),this.player.on(o.Video.CanPlay,function(){r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),r._waitingDelayLoadingShowHandle=null),r._onPlayerUnderload(),r._onPlayerCanplay()}),this.player.on(o.Video.TimeUpdate,function(){r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),r._waitingDelayLoadingShowHandle=null),r._seekEndData&&r.player._seeking&&r._onPlayerSeekEnd()}),this.player.on(o.Player.Error,function(){r._onPlayerError()}),this.player.on(o.Player.RequestFullScreen,function(){r._onFullscreenChange(1)}),this.player.on(o.Player.CancelFullScreen,function(){r._onFullscreenChange(0)}),this.player.on(o.Private.PREPARE,function(e){r._prepareTime=(new Date).getTime(),r._log("PREPARE",{dn:e.paramData})}),this.player.on(o.Player.Snapshoted,function(){r._log("SNAPSHOT")}),this.player.on(o.Private.Retry,function(e){e=e.paramData||{};r._log("RETRY",{type:e.type,source:e.source})}),this.player.on(o.Player.RtsFallback,function(e){var t,e=e.paramData||{};r._log("RTSFALLBACK",{reason:null==(t=e.reason)?void 0:t.error_msg,url:e.fallbackUrl})}),this.startHeartBeat.call(this)},removeEvent:function(){this.player.off("init"),this.player.off("ready"),this.player.off("ended"),this.player.off("play"),this.player.off("pause"),this.player.off("seekStart"),this.player.off("seekEnd"),this.player.off("canplaythrough"),this.player.off("playing"),this.player.off("timeupdate"),this.player.off("error"),this.player.off("fullscreenchange"),this.player.off("seeking"),this.player.off("seeked"),this.player.off(o.Private.PREPARE),this.player.off(o.Player.RtsFallback),this._logService&&this._logService.dispose(),clearInterval(i)},reset:function(){this.stucking=!1,this.startTimePlay=0,this.buffer_flag=0,this.firstPlay=!1,this.playId=0,this._LoadedData=0,this._canPlay=0,this.seekingStartTime=0,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},c=0,this.lightSaasVideoId=""},encodeURL:function(e){var t;return e?(t=this.player.getOptions())&&!t.logBatched?encodeURIComponent(e):e:""},startHeartBeat:function(){var o=this;i&&clearInterval(i),i=setInterval(function(){var n;o.player.getCurrentTime()&&(n=Math.floor(1e3*o.player.getCurrentTime()),o.player.paused()?o.prevStats.timestamp=0:++c>=o.player._options.heartHeatInterval&&o.updateStats.call(o,function(e){var t=o._imageInfo()||{},r=o.player.tag.playbackRate,i=o.player.getVolume(),t={vt:n,interval:1e3*c,imgLength:t.imgLength,playbackRate:r,volume:i};e&&(t=a({},t,{dls:Math.floor(e.downloadSpeedPerSec),dfps:Math.floor(e.decodedFramesPerSec),pkl:Number((e.packageLossRate||0).toFixed(2)),rtt:1e3*e.rtt})),o._log("HEARTBEAT",t),c=0}))},1e3)},updateStats:function(o){o=o||function(){};var a=this;this.player.getStats().then(function(e){var t,r,i,n;e?(n=a.prevStats,e.bytesReceived=e.bytesReceived||0,e.framesDecoded=e.framesDecoded||0,e.packetsLost=e.packetsLost||0,e.packetsReceived=e.packetsReceived||0,t=((a.prevStats=e).timestamp-n.timestamp)/1e3,r=(e.bytesReceived-n.bytesReceived)/t,i=(e.framesDecoded-n.framesDecoded)/t,n=(e.packetsLost-n.packetsLost)/(e.packetsLost-n.packetsLost+(e.packetsReceived-n.packetsReceived)),e=e.rtt,o({downloadSpeedPerSec:r,decodedFramesPerSec:i,packageLossRate:n,rtt:e,timeGap:t})):o()}).catch(function(e){console.log("error in monitor getStats: ",e),o()})},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:(new Date).getTime()}),this.startPlayReported=!0)},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:(new Date).getTime()}),this.canplayReported=!0)},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetSessionId:function(){this.sessionId=y.guid()},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId())},updateH265ProbeCost:function(e){this._h265ProbeCost=e||{}},_onFullscreenChange:function(e){e?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onPlayerloadstart:function(){this.loadstartTime=(new Date).getTime(),this.playId=y.guid()},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=(new Date).getTime()-this.loadstartTime},_onPlayerLoaddata:function(){var e,t,r,i;this._LoadedData||this.buffer_flag||(t=e=0,this.player.tag&&(e=this.player.tag.videoWidth,t=this.player.tag.videoHeight),e={tc:(new Date).getTime()-this._prepareTime,cc:(new Date).getTime()-this.loadstartTime,md:this.loadMetaDataCost,mi:JSON.stringify({type:"video",definition:e+"*"+t})},null!=(t=this.player.tag)&&t.duration&&(e.vdur=1e3*(null==(t=this.player.tag)?void 0:t.duration)),(5<this._h265ProbeCost.codecCost||5<this._h265ProbeCost.decoderCost)&&(t=Math.floor(this._h265ProbeCost.codecCost)||0,r=Math.floor(this._h265ProbeCost.decoderCost)||0,e.tc+=i=t+r,e.cc+=i,e.pcc=t,e.pdc=r),this._log("PREPAREEND",e)),this._LoadedData=1},_onPlayerH265PlayInfo:function(e){e=e.paramData||{};this._log("HEVCINFO",{cd:e.codecTag,rd:e.renderType,si:e.simd,sio:e.simdOption,wt:e.wasmThreads,wto:e.wasmThreadsOption,sp:e.splayer})},_onPlayerCanplay:function(){this._canPlay=1,this.reportCanplay(),this._reportPlay(),this.prevStats.timestamp||this.updateStats.call(this)},_onPlayerInit:function(){this.stucking=!1,this.buffer_flag=0,this.pause_flag=0,this.startTimePlay=0,this._LoadedData=0,this._canPlay=0,this.seekingStartTime=0},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=(new Date).getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_reportPlay:function(){var e;return!(this.buffer_flag||!this._LoadedData||!this.playstartTime||(this.first_play_time=(new Date).getTime(),e={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime},this._log("PLAY",e),this.buffer_flag=1,0))},_onPlayerPlay:function(){this.playstartTime=(new Date).getTime(),0==this.playId&&(this.playId=y.guid()),this.player._isPreload()||(this.loadstartTime=(new Date).getTime()),this._canPlay&&this._reportPlay()||this.buffer_flag&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=(new Date).getTime(),this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.pauseEndTime-this.pauseTime}))},_onPlayerPause:function(){!this.buffer_flag||this.startTimePlay&&!this.player._seeking&&(this.pause_flag=1,this.pauseTime=(new Date).getTime(),this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())}))},_onLicenseHasResult:function(e){e=e.paramData||{};this._log("LICENSE_RESULT",{li_ri:e.result,li_ti:e.featureId||"sdk"})},_onPlayerSeekStart:function(e){this.seekStartTime=e.paramData.fromTime,this.startTimePlay=0,this.seekStartStamp=(new Date).getTime()},_onPlayerSeekEnd:function(){this.seekEndStamp=(new Date).getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this._seekEndData=null},_onPlayerLoaded:function(){var e,t=this;this.buffer_flag&&!this.stucking&&(this.player._seeking?(this.seekingStartTime=this.player.getCurrentTime(),setTimeout(function(){var e=t.player.readyState()<4;t.player.readyState()||(e=!0),t.player.getCurrentTime()===t.seekingStartTime&&e&&(e=t._getbwEstimator(),t._log("UNDERLOAD",{vt:Math.floor(1e3*t.player.getCurrentTime()),bw:e}),t.stucking=!0,t.stuckStartTime=(new Date).getTime())},500)):(this.stuckStartTime=(new Date).getTime(),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,e=this._getbwEstimator(),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:e}),this.stuckStartTime=(new Date).getTime())))},_onPlayerUnderload:function(){var e,t,r;!this.buffer_flag&&this.player._options&&this.player._options.autoplay||this.stucking&&(e=Math.floor(1e3*this.player.getCurrentTime()),t=this.stuckStartTime||(new Date).getTime(),0<(t=Math.floor((new Date).getTime()-t))&&t<(1e3*this.player._options.waitingTimeout||6e4)&&(r=this._getbwEstimator(),this._log("LOADED",{vt:e,cost:t,bw:r,cbs:this.seekStart?1:0})),this.seekStart=!1,this.stucking=!1)},_onPlayerSeeking:function(){this.seekStart=!0,this.seekingData.seekingStartTime=performance.now()},_onPlayerSeeked:function(){var e=this;this.player._splayer?this.player.one("canplay",function(){e._reportSeeked()}):this._reportSeeked()},_reportSeeked:function(){var e=performance.now(),e=Math.floor(e-this.seekingData.seekingStartTime);this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:e})},_onPlayerError:function(){this.playId=0,this._LoadedData=1,this.buffer_flag||this._reportPlay(),this.player.getOptions().autoplay&&this.reportStartPlay()},_getbwEstimator:function(){var e=NaN;try{e=this.player._getbwEstimator&&this.player._getbwEstimator()}catch(e){}return e},_log:function(e,t){if(this.trackLog){this.updateSourceInfo();var r,i=s.copy(this.opt),n=(this.requestId=y.guid(),g.logReportTo),e=(i.e=u[e]+"",i.ri=this.sessionId,i.bi=i.bi&&String(i.bi),i.t=(new Date).getTime()+"",i.cdn_ip=this._userNetInfo.cdnIp,i.hn=this._userNetInfo.localIp,this.player.getCurrentQuality()),o=(""!=e&&(i.definition=e.definition),[]),e=(s.each(t,function(e,t){if("string"!=typeof t)try{t=JSON.stringify(t)}catch(e){}o.push(e+"="+t)}),""),t=this.player.getOptions(),e=((t&&t.vid||this.lightSaasVideoId)&&(e=t.vid||this.lightSaasVideoId),o.push("vid="+e),"");(e=t&&t.mediaAuth?t.mediaAuth:e)&&o.push("pauth="+e);try{Aliplayer&&Aliplayer.__logCallback__&&(i.args=o,Aliplayer.__logCallback__(i))}catch(e){console.log(e)}return""==(o=o.join("&"))&&(o="0"),i.args=this.encodeURL(o),this._logService?this._logService.add(i):(r=[],s.each(i,function(e,t){r.push(e+"="+t)}),r=r.join("&"),l.jsonp(n+"?"+r,function(){},function(){})),this.sessionId}},_imageInfo:function(){try{var e,t,r,i,n,o,a;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(e=this.player.tag)?(t=document.createElement("canvas"),r=e.videoWidth,i=e.videoHeight,t.width=r,t.height=i,(n=t.getContext("2d")).save(),n.drawImage(e,0,0,r,i),n.restore(),o=t.toDataURL("image/jpeg",1),a="",{imgLength:(a=o?(a=o.substr(o.indexOf(",")+1))||"":a).length}):{}}catch(e){return{}}}});t.exports=e},{"../config":14,"../lib/data":30,"../lib/io":40,"../lib/object":42,"../lib/oo":43,"../lib/ua":49,"../player/base/event/eventtype":70,"./log":63,"./util":65}],65:[function(e,t,r){var i=e("../lib/cookie"),n=e("../lib/data"),o=e("../lib/ua");t.exports.getUuid=function(){var e=i.get("p_h5_u");return e||(e=n.guid(),i.set("p_h5_u",e,730)),e},t.exports.getTerminalType=function(){var e="pc";return o.IS_IPAD?e="pad":o.IS_ANDROID?e="android":o.IS_IOS&&(e="iphone"),e},t.exports.returnUTCDate=function(e){var t=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate(),n=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),e=e.getUTCMilliseconds();return Date.UTC(t,r,i,n,o,a,e)},t.exports.getRfc822=function(e){return e.toUTCString().replace("UTC","GMT")}},{"../lib/cookie":29,"../lib/data":30,"../lib/ua":49}],66:[function(e,t,r){var o=e("./base/player"),a=e("./flash/flashplayer"),s=e("./saas/mtsplayer"),l=e("./saas/vodplayer"),c=e("./saas/lightPlayer"),u=e("./audio/audioplayer"),p=e("./hls/hlsplayer"),d=e("./flv/flvplayer"),h=e("./rts/rtsplayer"),f=e("./drm/drmplayer"),y=e("./splayer/splayer"),_=e("../lib/ua"),g=e("../lib/playerutil"),v=(e("../lib/dom"),e("../lib/io"),e("../lang/index")),m=e("../lib/constants"),S=e("./base/event/eventtype");t.exports.create=function(e,t){navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(e.useNativeControls=!0),e.readyCallback=t="function"!=typeof t?function(){}:t,v.setCurrentLanguage(e.language,"h5",e.languageTexts);var r,t=g.handleOption(e),e=t.source,i=g.isAudio(e),n=(i&&(t.mediaType="audio"),g.createWrapper(t));if(n.player)return n.player;if(i)r=new u(n,t);else if(g.isRts(e))r=new h(n,t);else if((t.forceH265||t.enableH265)&&(g.isMp4(e)||g.isFlv(e)))r=new y(n,t);else if(!t.useFlashPrism&&g.isFlv(e)&&g.isSupportFlv())r=new d(n,t);else if(_.IS_MOBILE||!t.useFlashPrism&&!g.isRTMP(e))if(-1!==[null,void 0].indexOf(t.mediaAuth)||t.source)if(t.vid&&!t.source)if(t.authInfo)r=new s(n,t);else{if(!(t.playauth||t.accessKeyId&&t.accessKeySecret))throw i="vid="+t.vid+" playauth='', playauth property is required by VOD(\u89c6\u9891\u70b9\u64ad) as new Aliplayer.",new Error(i);r=new l(n,t)}else g.isDash(e)&&g.isSupportMSE()?r=new f(n,t):g.isHls(e)?g.canPlayHls()?r=new(g.isSupportHls()&&(g.isUsedHlsPluginOnMobile()||g.isSafariUsedHlsPlugin(t.useHlsPluginForSafari))?t.isDrm?f:p:t.isDrm?f:o)(n,t):g.isSupportHls()?r=new(t.isDrm?f:p)(n,t):_.os.pc?t.userH5Prism||t.useH5Prism||(r=new a(n,t)):r=new o(n,t):(r=new o(n,t),t.source||(i={error_code:m.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:v.get("Error_Empty_Source")},r.trigger(S.Player.Error,i)));else r=new c(n,t);else r=new a(n,t);return r}},{"../lang/index":23,"../lib/constants":28,"../lib/dom":32,"../lib/io":40,"../lib/playerutil":46,"../lib/ua":49,"./audio/audioplayer":68,"./base/event/eventtype":70,"./base/player":91,"./drm/drmplayer":98,"./flash/flashplayer":99,"./flv/flvplayer":101,"./hls/hlsplayer":103,"./rts/rtsplayer":105,"./saas/lightPlayer":109,"./saas/mtsplayer":111,"./saas/vodplayer":117,"./splayer/splayer":126}],67:[function(e,t,r){var o=e("./base/player"),a=e("./flash/flashplayer"),s=e("./saas/mtsplayer"),l=e("./saas/vodplayer"),c=e("./saas/lightPlayer"),u=e("./audio/audioplayer"),p=e("./hls/hlsplayer"),d=e("./flv/flvplayer"),h=e("./rts/rtsplayer"),f=e("./drm/drmplayer"),y=e("./splayer/splayer"),_=e("../lib/ua"),g=e("../lib/playerutil"),v=(e("../lib/dom"),e("../lib/io"),e("../lang/index")),m=e("../lib/constants"),S=e("./base/event/eventtype");t.exports.create=function(e,t){navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(e.useNativeControls=!0),e.readyCallback=t="function"!=typeof t?function(){}:t,v.setCurrentLanguage(e.language,"h5",e.languageTexts);var r,t=g.handleOption(e),e=t.source,i=g.isAudio(e),n=(i&&(t.mediaType="audio"),g.createWrapper(t));if(n.player)return n.player;if(i)r=new u(n,t);else if(g.isRts(e))r=new h(n,t);else if((t.forceH265||t.enableH265)&&(g.isMp4(e)||g.isFlv(e)))r=new y(n,t);else if(!t.useFlashPrism&&g.isFlv(e)&&g.isSupportFlv())r=new d(n,t);else if(_.IS_MOBILE||!t.useFlashPrism&&!g.isRTMP(e))if(-1!==[null,void 0].indexOf(t.mediaAuth)||t.source)if(t.vid&&!t.source)if(t.authInfo)r=new s(n,t);else{if(!(t.playauth||t.accessKeyId&&t.accessKeySecret))throw i="vid="+t.vid+" playauth='', playauth property is required by VOD(\u89c6\u9891\u70b9\u64ad) as new Aliplayer.",new Error(i);r=new l(n,t)}else g.isDash(e)&&g.isSupportMSE()?r=new f(n,t):g.isHls(e)?g.canPlayHls()?r=new(g.isSupportHls()&&(g.isUsedHlsPluginOnMobile()||g.isSafariUsedHlsPlugin(t.useHlsPluginForSafari))?t.isDrm?f:p:t.isDrm?f:o)(n,t):g.isSupportHls()?r=new(t.isDrm?f:p)(n,t):_.os.pc?t.userH5Prism||t.useH5Prism||(r=new a(n,t)):r=new o(n,t):(r=new o(n,t),t.source||(i={error_code:m.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:v.get("Error_Empty_Source")},r.trigger(S.Player.Error,i)));else r=new c(n,t);else r=new a(n,t);return r}},{"../lang/index":23,"../lib/constants":28,"../lib/dom":32,"../lib/io":40,"../lib/playerutil":46,"../lib/ua":49,"./audio/audioplayer":68,"./base/event/eventtype":70,"./base/player":91,"./drm/drmplayer":98,"./flash/flashplayer":99,"./flv/flvplayer":101,"./hls/hlsplayer":103,"./rts/rtsplayer":105,"./saas/lightPlayer":109,"./saas/mtsplayer":111,"./saas/vodplayer":117,"./splayer/splayer":126}],68:[function(e,t,r){var i=e("../base/player"),n=e("../../ui/component"),o=e("../../lib/dom"),a=e("../../lib/object"),s=e("../../lib/playerutil"),e=i.extend({init:function(e,t){this._isAudio=!0,void 0===t.skinLayout&&(t.skinLayout=s.defaultAudioLayout),i.call(this,e,t)}});e.prototype.createEl=function(){"AUDIO"!==this.tag.tagName&&(this._el=this.tag,this.tag=n.prototype.createEl.call(this,"audio"));var t=this._el,e=this.tag,r=(e.player=this,o.getElementAttributes(e));return a.each(r,function(e){t.setAttribute(e,r[e])}),this.setVideoAttrs(),e.parentNode&&e.parentNode.insertBefore(t,e),o.insertFirst(e,t),t},t.exports=e},{"../../lib/dom":32,"../../lib/object":42,"../../lib/playerutil":46,"../../ui/component":130,"../base/player":91}],69:[function(e,t,r){var a=e("../../../lib/event"),s=e("./eventtype"),i=e("../eventHandler/video/index"),n=e("../eventHandler/player/index");t.exports.offAll=function(e){var t,r,i,n=e.tag,o=e._el;for(t in s.Video)a.off(n,s.Video[t]);for(r in s.Player)a.off(o,s.Player[r]);for(i in s.Private)a.off(o,s.Private[i])},t.exports.offVideoAll=function(e){var t,r=e.tag;for(t in s.Video)a.off(r,s.Video[t])},t.exports.onAll=function(e){i.bind(e),n.bind(e)}},{"../../../lib/event":33,"../eventHandler/player/index":74,"../eventHandler/video/index":84,"./eventtype":70}],70:[function(e,t,r){t.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",H265PlayInfo:"h265PlayInfo",H265DecoderOverload:"h265DecoderOverload"},Private:{Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",LicenseHasResult:"licenseHasResult",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch"}}},{}],71:[function(e,t,r){e("../../event/eventtype");var i=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(){(!n.IS_IOS||n.IS_IOS&&this._splayer&&2===this._splayer.renderType)&&i.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":32,"../../../../lib/ua":49,"../../event/eventtype":70}],72:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t.trigger(i.Player.CompleteSeek,e.paramData.toTime),t.one(i.Player.CanPlay,function(){t._enteredProgressMarker&&t.pause()})}},{"../../event/eventtype":70}],73:[function(e,t,r){var i=e("../../event/eventtype"),n=(e("../../../../lib/constants"),e("../../../../lang/index"),e("../../../../monitor/util"));t.exports.handle=function(e){var t=this,e=e.paramData;t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.Play_Btn_Hide),t.trigger(i.Private.SettingListHide),t.trigger(i.Private.SelectorHide),t.trigger(i.Private.VolumeVisibilityChange,""),e=e||{},t._monitor&&(e.uuid=n.getUuid(),e.requestId=t._serverRequestId,e.cdnIp=t._monitor._userNetInfo.cdnIp,e.localIp=t._monitor._userNetInfo.localIp),t._isError=!0,t.trigger(i.Private.Error_Show,e),t.trigger(i.Private.LifeCycleChanged,{type:i.Player.Error,data:e})}},{"../../../../lang/index":23,"../../../../lib/constants":28,"../../../../monitor/util":65,"../../event/eventtype":70}],74:[function(e,t,r){var i=e("../../event/eventtype"),o=e("../../../../lib/event"),a=e("./lifecyclecommon"),n={endStart:e("./endstart"),seekStart:e("./seekstart"),requestFullScreen:e("./requestfullscreen"),cancelFullScreen:e("./cancelfullscreen"),error:e("./error"),privateSeiFrame:e("./seiframe"),patchWaiting:e("../video/waiting")},s=[i.Private.EndStart,i.Private.SeekStart,i.Player.RequestFullScreen,i.Player.CancelFullScreen,i.Player.Error,i.Player.Ready,i.Private.Dispose,i.Private.Created,i.Private.SeiFrame,i.Private.PatchWaiting];t.exports.bind=function(e){e.el();for(var t=0;t<s.length;t++){var r=s[t];"undefined"!=n[r]&&!function(r,i,n){var e=r.el();o.on(e,i,function(e){var t=(n&&n.handle?n:a).handle;t.call(r,e,i)})}(e,r,n[r])}}},{"../../../../lib/event":33,"../../event/eventtype":70,"../video/waiting":90,"./cancelfullscreen":71,"./endstart":72,"./error":73,"./lifecyclecommon":75,"./requestfullscreen":76,"./seekstart":77,"./seiframe":78}],75:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e,t){this.trigger(i.Private.LifeCycleChanged,{type:t,data:e})}},{"../../event/eventtype":70}],76:[function(e,t,r){e("../../event/eventtype");var i=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(){(!n.IS_IOS||n.IS_IOS&&this._splayer&&2===this._splayer.renderType)&&i.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":32,"../../../../lib/ua":49,"../../event/eventtype":70}],77:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){this._seeking=!0,this.trigger(i.Player.StartSeek,e.paramData.fromTime)}},{"../../event/eventtype":70}],78:[function(e,t,r){e("../../event/eventtype");t.exports.handle=function(e){var t,r,e=e.paramData,i=e.pts;this._hls&&(t=e.pts,r=this._initPTS,i=parseInt((t-r)/90,10)),this._seis[i]=e.dataContent}},{"../../event/eventtype":70}],79:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this,r=(t._retrySwitchUrlCount=0,t._liveRetryCount=0,t._clearLiveErrorHandle(),(new Date).getTime()-t.readyTime);t._options.autoplay||t._options._autoplay||!t.paused()||(t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Play_Btn_Show)),t.trigger(i.Player.CanPlay,{loadtime:r})}},{"../../event/eventtype":70}],80:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/dom"),o=e("../../../../lib/ua");t.exports.handle=function(e){this._seeking=!1;var t=this.tag;"none"===t.style.display&&o.IS_IOS&&setTimeout(function(){n.css(t,"display","block")},100),this.trigger(i.Video.CanPlayThrough)}},{"../../../../lib/dom":32,"../../../../lib/ua":49,"../../event/eventtype":70}],81:[function(e,t,r){t.exports.handle=function(e,t){var r="";e&&e.paramData&&(r=e.paramData),this.trigger(t,r)}},{}],82:[function(e,t,r){var i=e("../../event/eventtype");e("../../../../lang/index"),e("../../../../lib/event");t.exports.handle=function(e){var t=this;t.waiting=!1,t._ended=!0,t._monitor&&t._monitor._onPlayerInit(),t._options.rePlay?(t.seek(0),t.tag.play()):t._options.isLive&&t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Play_Btn_Show),t.trigger(i.Player.Ended)}},{"../../../../lang/index":23,"../../../../lib/event":33,"../../event/eventtype":70}],83:[function(e,t,r){var u=e("../../event/eventtype"),p=e("../../../../lib/constants"),d=e("../../../../lang/index"),h=e("../../../../lib/event"),f=e("../../../../lib/ua"),y=(e("../../../../lib/io"),e("../../../../lib/playerutil"));t.exports.handle=function(e){var t,r,i,n,o,a,s,l,c=this;c.waiting=!1,c._clearTimeout(),c.checkOnline()&&!c._splayer&&(i="",t=(e=e.target||e.srcElement).error&&e.error.message,i="",e.error&&e.error.code&&(r=e.error.code,i=p.VideoErrorCode[e.error.code],t=r+" || "+t),c._options.isLive?(e=r,o=function(){c._options.liveRetry>c._liveRetryCount?c._reloadAndPlayForM3u8():(c._liveRetryCount=0,c.trigger(u.Player.LiveStreamStop),c._liveErrorHandle=setTimeout(function(){var e={mediaId:"ISLIVE",error_code:i,error_msg:d.get("Error_Play_Text")+"\uff0c"+d.get("Error_Retry_Text")};c.logError(e),c.trigger("error",e)}),f.IS_UC&&(c._liveErrorHandle=null))},a=(n=c)._options.source||"",4===(e=4!==e&&f.IS_IOS&&/qqbrowser/i.test(f.USER_AGENT)?4:e)&&y.isHls(a)?y.detectRegionBlock(a,function(e){e?(e={mediaId:"ISLIVE",error_code:p.ErrorCode.RegionBlock,error_msg:d.get("Error_Region_Block_Text")},n.logError(e),n.trigger("error",e)):o()}):o()):-1<t.indexOf("NS_ERROR_DOM_MEDIA_FATAL_ERR")?(e=c.getCurrentTime(),(a=c.getDuration())-e<.5&&(c.pause(),c._ended=!0,c.tag.currentTime=a,h.trigger(c.tag,u.Video.ManualEnded))):3==r?(l={mediaId:c._options.vid||"",error_code:i,error_msg:t},c.logError(l),l.display_msg=p.VideoErrorCodeText[r],c.trigger(u.Player.Error,l)):c._reloadForVod()||(e=d.get("Error_Play_Text"),s=!1,r<3?e=p.VideoErrorCodeText[r]:c._eventState==p.SUSPEND?(e=d.get("Error_Load_Abort_Text"),i=p.ErrorCode.RequestDataError):c._eventState==p.LOAD_START?(e=d.get("Error_Network_Text"),0<c._options.source.indexOf("auth_key")&&(e=e+"\uff0c"+d.get("Error_AuthKey_Text")),i=p.ErrorCode.StartLoadData):c._eventState==p.LOADED_METADATA&&(e=d.get("Error_Play_Text"),i=p.ErrorCode.PlayingError),e=e+"\uff0c"+d.get("Error_Retry_Text"),1<c._urls.length&&c._retrySwitchUrlCount<3&&-1==c._options.source.indexOf(".mpd")&&(c.switchUrl(),s=!0),l={mediaId:c._options.vid||"",error_code:i,error_msg:t},s)||(c.logError(l),l.display_msg=e,c.trigger(u.Player.Error,l)))}},{"../../../../lang/index":23,"../../../../lib/constants":28,"../../../../lib/event":33,"../../../../lib/io":40,"../../../../lib/playerutil":46,"../../../../lib/ua":49,"../../event/eventtype":70}],84:[function(e,t,r){var n=e("../../../../lib/event"),o=e("../../event/eventtype"),i={canplay:e("./canplay"),canplaythrough:e("./canplaythrough"),common:e("./common"),ended:e("./ended"),error:e("./error"),pause:e("./pause"),play:e("./play"),playing:e("./playing"),waiting:e("./waiting"),timeupdate:e("./timeupdate"),manualended:e("./ended"),loadedmetadata:e("./loadedmetadata")};t.exports.bind=function(e){e.tag;for(var t in o.Video){t=o.Video[t];!function(t,r,i){var e=t.tag;n.on(e,r,function(e){i.handle.call(t,e,r),r!=o.Video.Error&&(r==o.Video.ManualEnded&&(r=o.Video.Ended),t.trigger(o.Private.LifeCycleChanged,{type:r,data:e}))})}(e,t,void 0!==i[t]?i[t]:i.common)}}},{"../../../../lib/event":33,"../../event/eventtype":70,"./canplay":79,"./canplaythrough":80,"./common":81,"./ended":82,"./error":83,"./loadedmetadata":85,"./pause":86,"./play":87,"./playing":88,"./timeupdate":89,"./waiting":90}],85:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this.tag;this._duration=t.duration<1?0:t.duration,this.trigger(i.Private.ReadyState),this._splayer&&this.trigger(i.Video.DurationChange),this.trigger(i.Video.LoadedMetadata)}},{"../../event/eventtype":70}],86:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/ua");t.exports.handle=function(e){var t=this;t._seeking&&t._splayer||(t._hls&&t._options&&t._options.isLive&&n.IS_FIREFOX&&t.trigger(i.Private.Play_Btn_Show),t._clearTimeout(),t.trigger(i.Private.AutoStreamHide),t.trigger(i.Player.Pause),t._isManualPause&&(t.trigger(i.Private.Play_Btn_Show),t.trigger(i.Private.H5_Loading_Hide)),t.waiting=!1)}},{"../../../../lib/ua":49,"../../event/eventtype":70}],87:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){this.trigger(i.Private.Error_Hide),this.trigger(i.Private.Cover_Hide),this.trigger(i.Private.AutoStreamHide),this.waiting=!1,this.trigger(i.Player.Play)}},{"../../event/eventtype":70}],88:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this,r=(t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.Info_Hide),t.waiting=!1,t._ended=!1,t._liveRetryCount=0,t._vodRetryCount=0,t._seeking=!1,t.getCurrentTime());t._waitingReloadTime!=r&&(t._waitingTimeoutCount=0),t._checkTimeoutHandle&&(clearTimeout(t._checkTimeoutHandle),t._checkTimeoutHandle=null),t._waitingLoadedHandle&&(clearTimeout(t._waitingLoadedHandle),t._waitingLoadedHandle=null),t._ucSourceHandle&&(clearTimeout(t._ucSourceHandle),t._ucSourceHandle=null),t._waitingDelayLoadingShowHandle&&(clearTimeout(t._waitingDelayLoadingShowHandle),t._waitingDelayLoadingShowHandle=null),t._waitingTimeoutHandle&&(clearTimeout(t._waitingTimeoutHandle),t._waitingTimeoutHandle=null,t._ccService)&&t._options.isLive&&(r=t._ccService.getCurrentSubtitle(),t._setDefaultCC=!0,r)&&t._ccService.switch(r),t.trigger(i.Private.AutoStreamHide),t.trigger(i.Player.Playing),t.trigger(i.Private.Error_Hide),t.tag.paused||t.trigger(i.Private.Play_Btn_Hide)}},{"../../event/eventtype":70}],89:[function(e,t,r){var p=e("../../event/eventtype"),d=e("../../../../lib/ua"),h=e("../../../../lib/event"),f=e("../../plugin/status");t.exports.handle=function(e){var t,r=this,e=(r.trigger(p.Player.TimeUpdate,e.timeStamp),(d.IS_IOS||d.IS_MAC_SAFARI)&&(clearTimeout(r._waitingPatchTimer),r._waitingPatchTimer=setTimeout(function(){r.waiting||r._isError||r.paused()||r._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),r.trigger(p.Private.PatchWaiting))},3e3)),r.getCurrentTime()),i=(r.waiting&&!r._TimeUpdateStamp&&(r._TimeUpdateStamp=e),0!=r.waiting&&r._TimeUpdateStamp==e||(r.trigger(p.Private.H5_Loading_Hide),r.trigger(p.Private.AutoStreamHide),r._checkTimeoutHandle&&clearTimeout(r._checkTimeoutHandle),r._waitingTimeoutHandle&&clearTimeout(r._waitingTimeoutHandle),r._waitingLoadedHandle&&clearTimeout(r._waitingLoadedHandle),r._ucSourceHandle&&(clearTimeout(r._ucSourceHandle),r._ucSourceHandle=null),r.waiting=!1),d.IS_ANDROID&&d.IS_UC&&(r._timeNotUpdateCount=r._timeNotUpdateCount||0,r.waiting||e!==r._TimeUpdateStamp||(r._timeNotUpdateCount++,2<=r._timeNotUpdateCount&&(r._timeNotUpdateCount=0,r.trigger(p.Private.PatchWaiting)))),r._TimeUpdateStamp=e,r._options.isLive||(t=!1,(t=(i=r.getDuration())<e&&!r.paused()||i-e<.2&&0<=d.browser.version.indexOf("49.")&&!r.paused()||r.exceedPreviewTime(e)?!0:t)&&!r._ended&&(r.pause(),h.trigger(r.tag,p.Video.ManualEnded))),r._player.tag),n=(i&&r._options.isLive&&(r._player.resolution&&0<i.videoWidth&&0<i.videoHeight&&(0<r._player.resolution.width||0<r._player.resolution.height)&&(r._player.resolution.width!==i.videoWidth||r._player.resolution.height!==i.videoHeight)&&(t={oldResolution:{width:r._player.resolution.width,height:r._player.resolution.height},newResolution:{width:i.videoWidth,height:i.videoHeight}},r.trigger(p.Player.ResolutionChange,t)),r._player.resolution.width=0==i.videoWidth?r._player.resolution.width:i.videoWidth,r._player.resolution.height=0==i.videoHeight?r._player.resolution.height:i.videoHeight),d.IS_CHROME&&Number(d.CHROME_VERSION)<50&&(r._playingSlientPause&&(clearTimeout(r._playingSlientPause),r._playingSlientPause=null),r._playingSlientPause=setTimeout(function(){var e,t;r._status!=f.playing||r.paused()||r._drm||r._urls.length||(e=r.getCurrentTime(),t=r._options.isLive?0:e,r._loadByUrlInner(r._options.source,t,e,!0))},3e3)),r._seis||{}),o=Object.keys(n);if(0!==o.length){var a=parseInt(1e3*e,10);if(!(l=n[a]))for(var s=0;s<250;s++){var l,c=a+s;if(l=n[c]){for(var u=0;u<o.length&&o[u]<=c;u++)delete n[o[u]];break}}l&&r.trigger(p.Player.SeiFrame,l)}}},{"../../../../lib/event":33,"../../../../lib/ua":49,"../../event/eventtype":70,"../../plugin/status":95}],90:[function(e,t,r){var o=e("../../event/eventtype"),a=e("../../../../lib/constants"),s=e("../../../../lib/event"),l=e("../../../../lang/index"),c=e("../../../../lib/ua"),u=e("../../../../lib/playerutil");t.exports.handle=function(e){var t=this;if(!t._options.isLive){var r=this.getCurrentTime(),i=this.getDuration();if(!t._ended&&0<i&&(i-r<.5||i<r))return t.pause(),t._ended=!0,void s.trigger(this.tag,o.Video.ManualEnded)}t.waiting=!0;function n(){t._checkTimeoutHandle&&(clearTimeout(t._checkTimeoutHandle),t._checkTimeoutHandle=null),t._waitingTimeoutHandle&&(clearTimeout(t._waitingTimeoutHandle),t._waitingTimeoutHandle=null),t._waitingLoadedHandle&&(clearTimeout(t._waitingLoadedHandle),t._waitingLoadedHandle=null),t._waitingDelayLoadingShowHandle&&(clearTimeout(t._waitingDelayLoadingShowHandle),t._waitingDelayLoadingShowHandle=null),t._ucSourceHandle&&(clearTimeout(t._ucSourceHandle),t._ucSourceHandle=null)}n(),t._waitingDelayLoadingShowHandle=setTimeout(function(){t.trigger(o.Private.H5_Loading_Show)},1e3*t._options.delayLoadingShow),t._TimeUpdateStamp=null,t._checkTimeoutHandle=setTimeout(function(){t.trigger(o.Private.AutoStreamShow)},1e3*t._options.loadDataTimeout),t.trigger(o.Player.Waiting),t._waitingTimeoutHandle=setTimeout(function(){var e;t.tag&&t._options&&(t.pause(),e={mediaId:t._options.vid||"",error_code:a.ErrorCode.LoadingTimeout,error_msg:l.get("Error_Waiting_Timeout_Text")},t.logError(e),t.trigger("error",e))},1e3*t._options.waitingTimeout),t._waitingLoadedHandle=setTimeout(function(){var e=t.getCurrentTime();0==t._waitingTimeoutCount&&e!=t._waitingReloadTime&&(t._waitingTimeoutCount=1,t._waitingReloadTime=e,e=t._options.isLive?0:e,t._loadByUrlInner(t._options.source,e,!0))},t._options.waitingTimeout/2*1e3),c.IS_ANDROID&&c.IS_DINGTALK&&(t._ucSourceHandle=setTimeout(function(){u.detectRegionBlock(t._options.source,function(e){e&&(e={mediaId:t._options.vid,error_code:a.ErrorCode.RegionBlock,error_msg:l.get("Error_Region_Block_Text")},t.logError(e),t.trigger("error",e))})},5e3)),t.on("error",function(){n()})}},{"../../../../lang/index":23,"../../../../lib/constants":28,"../../../../lib/event":33,"../../../../lib/playerutil":46,"../../../../lib/ua":49,"../../event/eventtype":70}],91:[function(e,t,r){var i="undefined"==typeof Promise?e("es6-promise").Promise:Promise,n=e("../../ui/component"),o=e("../../lib/object"),a=e("../../lib/dom"),l=e("../../lib/event"),s=e("../../ui/exports"),c=e("../../monitor/monitor"),u=e("../../lib/ua"),p=e("../../lib/constants"),d=e("../../lib/playerutil"),h=e("./x5play"),f=e("../../lib/cookie"),y=e("../../lang/index"),_=e("../../feature/autoPlayDelay"),g=e("./event/eventmanager"),v=e("../../ui/component/cover"),m=e("../../ui/component/license-watermark"),S=e("../../feature/license"),b=e("../../ui/component/text-track-display"),T=e("../../ui/component/play-animation"),E=e("../../commonui/autostreamselector"),w=e("./event/eventtype"),x=e("./plugin/lifecyclemanager"),P=e("../service/export"),k=e("../../ui/component/progressmarker"),C=e("../../feature/keyboardControl"),I=e("../../feature/AntiRecord"),L=e("./eventHandler/video/index"),R=e("../../lib/vttnext/index"),A=e("../../lib/codec-probe"),D=e("../splayer/splayerinjector"),e=e("../../ui/component/util").throttle,O=n.extend({init:function(e,r){var t;this.tag=e,this.loaded=!1,this.played=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._liveRetryTimer=null,this._vodRetryCount=0,this._seeking=!1,this._serverRequestId=0,this._waitingTimeoutCount=0,this._waitingReloadTime=0,this._created=!1,this._enteredProgressMarker=!1,this._liveShiftSeekStartTime=0,this._duration=0,this._seis={},this._initPTS=0,this.isMutiLevel=!1,this._antiRecord=null,this.__disposed=!1,this.resolution={width:0,height:0},void 0===r.skinLayout&&(r.skinLayout=d.defaultH5Layout),d.isRts(r.source)&&!r.autoplay&&(r.preload=!1),n.call(this,this,r),this.addClass("prism-player"),r.plugins&&o.each(r.plugins,function(e,t){this[e](t)},this),this._createService(),this.UI={},r.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=s,0==r.errorDisplay&&(this.UI.errorDisplay=void 0)),this.initChildren(),this._options.trackLog&&(this._monitor=new c(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched},this._options.trackLog)),g.onAll(this),this._options.preventRecord&&(this._antiRecord=new I({player:this}),this._antiRecord.start()),this._lifeCycleManager=new x(this),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?(e={mediaId:this._options.vid||"",error_code:p.ErrorCode.InvalidParameter,error_msg:y.get("ShiftLiveTime_Error")},this.trigger(w.Player.Error,e)):(this._options.extraInfo&&(e=this._options.extraInfo).liveRetry&&(this._options.liveRetry=e.liveRetry),this.on(w.Private.ReadyState,function(){this.trigger(w.Player.Ready)}),this.on(w.Player.H265PlayInfo,function(e){var t=this;"native"!==e.paramData.renderType&&S.getLicense(r.license.domain,r.license.key).then(function(e){e=e.validate(p.PLAYER_SDK_CODE,p.FEATURE_ID_H265);if(console.log("license validate result => ",e),0===e)t.trigger(w.Private.LicenseHasResult,{result:p.LicenseResultCode.Success,featureId:p.FEATURE_ID_H265});else{if(1===e)return i.reject(p.LicenseResultCode.NotFound);{if(2===e)return i.reject(p.LicenseResultCode.Expired);console.error("license validate unknown error")}}}).catch(function(e){t.trigger(w.Private.LicenseHasResult,{result:e,featureId:p.FEATURE_ID_H265}),S.logError(e)})}),this.on(w.Private.LicenseHasResult,function(e){var t=p.LicenseResultCode;-1<[t.NotFound,t.Expired,t.CertInvalid,t.ResourceIncorrect,t.LicenseKeyInvalid,t.DomainInvalid].indexOf(e.paramData.result)&&(this.UI.licenseWatermark=m,this._licenseWatermark=this.addChild("licenseWatermark",this._options))}),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(w.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay||this._options.preload?this.trigger(w.Private.H5_Loading_Show):this.trigger(w.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(w.Private.PREPARE,"custom"),this._options.autoPlayDelay?(this._autoPlayDelay=new _(this),(t=this)._autoPlayDelay.handle(function(){t.initPlay()})):this.initPlay()),C.init.call(this),this._vttBroker=new R({player:this}),this._getUserTextTracks())}});O.prototype.isSupportMSE=function(){return d.isSupportMSE()},O.prototype.initPlay=function(e){this._initPlayBehavior(e,this._options.source)},O.prototype.initChildren=function(){var e=this.options(),t=e.skinLayout;if(!1!==t&&!o.isArray(t))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");!1!==t&&0!==t.length&&(this.options({children:t}),n.prototype.initChildren.call(this)),this.UI.cover=v,e.className="",this.addChild("cover",e),this.UI.playanimation=T,this.addChild("playanimation",e),this.UI.autoStreamSelector=E,this.addChild("autoStreamSelector",e),this.UI.progressMarker=k,this.addChild("progressMarker",e),this.UI.textTrackDisplay=b,this.addChild("textTrackDisplay",e),this.trigger(w.Private.UiH5Ready)},O.prototype.createEl=function(){var e=!1,t=("VIDEO"!==this.tag.tagName?(this._el=this.tag,this.tag=n.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):(e=!0,this._el=this.tag.parentNode),this._el),r=this.tag,i=(this._options.enableSystemMenu||(r.addEventListener?r.addEventListener("contextmenu",function(e){e.preventDefault()},!1):r.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),r.player=this,a.getElementAttributes(r));return o.each(i,function(e){t.setAttribute(e,i[e])}),this.setVideoAttrs(),e||(r.parentNode&&r.parentNode.insertBefore(t,r),a.insertFirst(r,t)),t},O.prototype.setVideoAttrs=function(){var e=this._options.preload,t=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",e&&this.tag.setAttribute("preload","preload"),t&&!this._isEnabledAILabel()&&"15"!==u.IOS_VERSION&&this.tag.setAttribute("autoplay","autoplay"),u.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(u.IS_UC||u.dingTalk())&&this.tag.setAttribute("renderer","standard"),this._options.extraInfo)for(var r in this._options.extraInfo)this.tag.setAttribute(r,this._options.extraInfo[r]);h.adaptX5Play(this)},O.prototype.checkOnline=function(){var e;return!(this._options&&!this._options.debug&&0==navigator.onLine&&((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.NetworkUnavaiable,error_msg:y.get("Error_Offline_Text")}).display_msg=y.get("Error_Offline_Text"),this.trigger(w.Player.Error,e),1))},O.prototype.id=function(){return this.el().id},O.prototype.renderUI=function(){},O.prototype.switchUrl=function(){var e,t;0!=this._urls.length&&(this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++),e=this._urls[this._currentPlayIndex],f.set(p.SelectedStreamLevel,e.definition,365),this.trigger(w.Private.QualityChange,y.get("Quality_Change_Fail_Switch_Text")),t=this.getCurrentTime(),this._vodRetryCount=0,this._originalSource="",this._loadByUrlInner(e.Url,t,!0))},O.prototype.setControls=function(){var e=this.options();e.useNativeControls?this.tag.setAttribute("controls","controls"):"object"==typeof e.controls&&(e=this._initControlBar(e.controls),this.addChild(e))},O.prototype._initControlBar=function(e){return new ControlBar(this,e)},O.prototype.getMetaData=function(){},O.prototype.getReadyTime=function(){return this.readyTime},O.prototype.readyState=function(){return this.tag.readyState},O.prototype.getError=function(){return this.tag.error},O.prototype.getRecentOccuredEvent=function(){return this._eventState},O.prototype.getSourceUrl=function(){return this._options?this._options.source:""},O.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},O.prototype.getCurrentQuality=function(){var e;return 0<this._urls.length?{width:(e=this._urls[this._currentPlayIndex]).width,url:e.Url,definition:e.definition}:""},O.prototype.getCurrentPDT=function(){var e;if((u.IS_SAFARI||u.IS_IOS)&&this.tag)return e=Date.parse(this.tag.getStartDate()),isNaN(e)?0:e+1e3*this.getCurrentTime()},O.prototype.setSpeed=function(e){this.tag&&(this._originalPlaybackRate=e,this.tag.playbackRate=e)},O.prototype.play=function(e){return this.tag&&(this.tag.ended||this._ended?this.replay():((this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(w.Private.Cover_Hide),this.tag.play())),this._isManualPlay=e||!1,this},O.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this.seek(0),this.tag.play(),this},O.prototype.pause=function(e){return this.tag&&this.tag.pause(),this._isManualPause=e||!1,this},O.prototype.stop=function(){return this.tag.setAttribute("src",null),this},O.prototype.paused=function(){if(this.tag)return!1!==this.tag.paused},O.prototype.getDuration=function(){var e=0;return e=this.tag?this.isPreview()?this._vodDuration||this.tag.duration:this._duration&&this._duration!=1/0?this._duration:this.tag.duration:e},O.prototype.getDisplayDuration=function(){var e=0;return e=this.tag?this._vodDuration||this.getDuration():e},O.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime:0},O.prototype.seek=function(e){this._seeking=!0;var t=this.tag.duration;if(e=Math.floor(e),!Number.isNaN(e))return this._doSeek(this,e=t<=e?t:e),this},O.prototype._doSeek=e(function(e){var t=e[0],e=e[1];try{var r=t._originalPlaybackRate||t.tag.playbackRate;t.tag.currentTime=e,u.IS_IE11&&setTimeout(function(){t.tag&&(t.tag.playbackRate=r)})}catch(e){console.log(e)}},100),O.prototype.firstNewUrlloadByUrl=function(e,t){this._clearTimeout(),this._options.vid=0,this._options.source=e,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:e,from:this._options.from}),this.trigger(w.Private.ChangeURL),this.initPlay(),this._options.autoplay&&this.trigger(w.Private.Cover_Hide),this._options.autoplay?this.trigger(w.Player.Play):this.trigger(w.Player.Pause),!(t=t||0)&&0!=t||isNaN(t)||this.seek(t)},O.prototype._loadByUrlInner=function(e,t,r,i){var n=this,o=this.tag.volume;if(i&&u.IS_ANDROID_FIREFOX){for(var a in w.Video)l.off(this.tag,w.Video[a]);this.tag.remove(),this.tag=this._el,this.createEl()}this.loadByUrl(e,t,r,!0),this.tag.volume=o,i&&u.IS_ANDROID_FIREFOX&&this.tag.addEventListener(w.Video.LoadedData,function e(){n._player.trigger(w.Player.DurationChange),L.bind(n),n.tag.removeEventListener(w.Video.LoadedData,e)})},O.prototype.loadByUrl=function(i,n,e,t){var r=this,o=(this._monitor&&this._monitor.resetVV(),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),a=((this._options.source||"").match(o)||[])[0]!==((i||"").match(o)||[])[0];if(this._h265InfoReported=!1,this._probeInfo||(this._probeInfo={}),this._probeInfo.codecTag=void 0,!a&&(d.isMp4(i)||d.isFlv(i)))return!this._options.forceH265&&this._options.enableH265?void A(i,function(e){var e=d.getVideoTrack(e.tracks),t=(e||{}).codecTag||(e||{}).codec.split(".")[0];r._probeInfo.codecTag=t,e&&d.isH265Codec(t)?d.isFlv(i)?(r._splayer||(a=!0),s.call(r)):d.shouldUseBasePlayer(t,function(e){e?(r._splayer&&(a=!0),r._probeInfo.codecTag&&D.reportH265PlayInfo.call(r,{renderType:"native",codecTag:r._probeInfo.codecTag})):r._splayer||(a=!0),s.call(r)}):(r._splayer&&(a=!0),s.call(r))},function(e){s.call(r)}):void s.call(this);function s(){var r=this;a&&this._splayer&&this.removeChild(this._licenseWatermark),a&&window.Aliplayer?(console.log("!!!!! NEED RELOAD INSTANCE !!!!!"),this._options.source=i,window.Aliplayer.reloadInstance(this._options,function(){},this)):(t||(this._urls=[]),this._monitor&&!t&&this._monitor.reset(),this._isError=!1,this._duration=0,this._clearTimeout(),this.trigger(w.Private.Error_Hide),this._options.source=i,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:i,from:this._options.from}),t||(this.trigger(w.Private.ChangeURL),this._vodRetryCount=0),this._options._autoplay=e,this.initPlay(e),(this._options.autoplay||e)&&this.trigger(w.Private.Cover_Hide),this._options.autoplay||e?this.trigger(w.Player.Play):this.trigger(w.Player.Pause),this._options.isLive||!n&&0!=n||isNaN(n)||l.one(this.tag,w.Video.CanPlay,function(e){var t=r.getDuration();r.seek(t<=n?t:n)}))}s.call(this)},O.prototype.dispose=function(){this.__disposed=!0,this.trigger(w.Private.Dispose),this.tag.pause(),g.offAll(this),C.dispose.call(this),this._antiRecord&&(this._antiRecord.dispose(),this._antiRecord=null),this._monitor&&(this._monitor.removeEvent(),this._monitor=null),this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),this._playingSlientPause=null),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),this._waitingLoadedHandle=null),this._ucSourceHandle&&(clearTimeout(this._ucSourceHandle),this._ucSourceHandle=null),this._readyStateTimer&&(clearInterval(this._readyStateTimer),this._readyStateTimer=null),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),this._vodRetryCountHandle=null),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),this._waitingDelayLoadingShowHandle=null),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._disposeService(),this._clearLiveErrorHandle(),this._el.innerHTML="",this.destroy(),this._releaseMediaElement(),this._options.recreatePlayer=null,this._options=null,this.isMutiLevel=!1,this._seis={},this._initPTS=0},O.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),this.tag=null},O.prototype.mute=function(){this._muteInner(),this._originalVolumn=this.tag.volume;var e=y.get("Volume_Mute");return this._player.trigger(w.Private.Info_Show,{text:e,duration:1e3,align:"lb"}),this._setInnerVolume(0),this},O.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(w.Private.VolumnChanged,-1)},O.prototype.unMute=function(){this._unMuteInner();var e=y.get("Volume_UnMute");return this._player.trigger(w.Private.Info_Show,{text:e,duration:1e3,align:"lb"}),this._setInnerVolume(this._originalVolumn||.5),this},O.prototype._unMuteInner=function(){this.tag.muted=!1,this.trigger(w.Private.VolumnChanged,-2)},O.prototype.muted=function(){return this.tag.muted},O.prototype.getVolume=function(){return this.tag.volume},O.prototype.getOptions=function(){return this._options},O.prototype.setVolume=function(e,t){0!=e?this._unMuteInner():0==e&&this._muteInner(),this._setInnerVolume(e);e=y.get("Curent_Volume")+"<span>"+(100*e).toFixed()+"%</span>";this._player.trigger(w.Private.Info_Show,{text:e,duration:1e3,align:"lb"})},O.prototype._setInnerVolume=function(e){this.tag.volume=e,this.trigger(w.Private.VolumnChanged,e)},O.prototype.hideProgress=function(){this.trigger(w.Private.HideProgress)},O.prototype.cancelHideProgress=function(){this.trigger(w.Private.CancelHideProgress)},O.prototype.setPlayerSize=function(e,t){this._el&&(this._el.style.width=e,this._el.style.height=t)},O.prototype.getBuffered=function(){return this.tag.buffered},O.prototype.setRotate=function(e){this.tag&&(this._rotate=e,this._setTransform(),this.log("ROTATE",{rotation:e}))},O.prototype.getRotate=function(e){return void 0===this._rotate?0:this._rotate},O.prototype.setImage=function(e){this.tag&&(this._image=e,this._setTransform(),this.log("IMAGE",{mirror:"horizon"==e?2:1,text:e}))},O.prototype.getImage=function(){return this._image},O.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform(),this.log("IMAGE",{mirror:0}))},O.prototype.setCover=function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&e&&(t.style.backgroundImage="url("+e+")",this._options.cover=e,this.trigger(w.Private.Cover_Show))},O.prototype.setTextTracks=function(e){e=d.unqiueTextTracks(e||[]),this.trigger(w.Private.VttClearTracks),e&&e.length&&this.trigger(w.Private.TextTrackFounded,{from:"user",textTracks:e}),this.trigger(w.Private.CCReset)},O.prototype._setTransform=function(){this._transformProp||(this._transformProp=a.getTransformName(this.tag));var e=" translate(-50%, -50%)";this._rotate&&(e+=" rotate("+this._rotate+"deg)"),this._image&&("vertical"==this._image?e+=" scaleY(-1)":"horizon"==this._image&&(e+=" scaleX(-1)")),this.tag.style[this._transformProp]=e},O.prototype._startPlay=function(){this.tag.paused&&this.tag.play()},O.prototype._initPlayBehavior=function(e,t){return this._monitor&&this._monitor.resetVV(),!this._checkSupportVideoType()&&(d.validateSource(t)?(void 0===e&&(e=!1),this._created||(this._created=!0,this.trigger(w.Private.Created)),this.loaded||this.trigger(w.Player.Init),this._options.autoplay||this._options._autoplay||this._options.preload||e?(this._options._preload=!0,this._initLoad(t),(this._options.autoplay||this._options._autoplay)&&this._startPlay()):this.trigger(w.Private.Play_Btn_Show),!0):((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=y.get("Error_Invalidate_Source"),this.trigger(w.Player.Error,e),!1))},O.prototype._isPreload=function(){return this._options.autoplay||this._options.preload||this._options._preload},O.prototype._initLoad=function(e){e&&(this._isPreload()&&!u.IS_MOBILE?this.trigger(w.Private.H5_Loading_Show):(this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Private.Play_Btn_Show)),this.tag.setAttribute("src",e),this.loaded=!0)},O.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null)},O.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(w.Player.OnM3u8Retry);var e=this._options,e=e.liveRetryInterval+e.liveRetryStep*this._liveRetryCount,t=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._liveRetryTimer=setTimeout(function(){t._liveRetryCount++,t.tag.load(t._options.source),t.tag.play()},1e3*e)},O.prototype._checkSupportVideoType=function(){var e,t;return this.tag.canPlayType&&this._options.source&&u.IS_MOBILE?(e="",0<(t=this._options.source).indexOf("m3u8")?""!=this.tag.canPlayType("application/x-mpegURL")||d.isSupportHls()||(e=y.get("Error_Not_Support_M3U8_Text")):0<t.indexOf("mp4")?""==this.tag.canPlayType("video/mp4")&&(e=y.get("Error_Not_Support_MP4_Text")):(d.isRTMP(t)||d.isFlv(t))&&u.IS_MOBILE&&(e=y.get("Error_Not_Support_Format_On_Mobile")),e&&(t={mediaId:this._options.vid||"",error_code:p.ErrorCode.FormatNotSupport,error_msg:e},this.logError(t),t.display_msg=e,this.trigger(w.Player.Error,t)),e):""},O.prototype.getComponent=function(e){return this._lifeCycleManager.getComponent(e)},O.prototype.logError=function(e,t){(e=e||{}).vt=this.getCurrentTime(),this.log(t?"ERRORRETRY":"ERROR",e)},O.prototype.log=function(e,t){var r=0,i=0;if(this._monitor)return this._options&&(r=this._options.vid||"0",i=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:r,album_id:0,source:this._options.source,from:i}),this._monitor._log(e,t)},O.prototype.setSanpshotProperties=function(e,t,r){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=e,this._snapshotMatric.height=t,1<r)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=r},O.prototype.getStatus=function(){return this._status||"init"},O.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0},O.prototype.isInProgressMarker=function(){return this._enteredProgressMarker},O.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1},O.prototype.setProgressMarkers=function(e){this.trigger(w.Private.ProgressMarkerChanged,e=e||[])},O.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]},O.prototype.setPreviewTime=function(e){this._options.playConfig||(this._options.playConfig={}),this._options.playConfig.PreviewTime=e},O.prototype.getPreviewTime=function(){var e=0;return e=this._options.playConfig?this._options.playConfig.PreviewTime:e},O.prototype.exceedPreviewTime=function(e){return this.isPreview()&&e>=this._options.playConfig.PreviewTime},O.prototype.isPreview=function(){var e=this._options.playConfig.PreviewTime,t=this._vodDuration||this.tag.duration;return 0<e&&e<t},O.prototype.getStats=function(){return new i(function(e){e()})},O.prototype.setTraceId=function(e){this._monitor&&this._monitor.updateTraceId(e)},O.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},O.prototype._autoplayFailedHandler=function(){this.trigger(w.Private.Play_Btn_Show),this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Player.AutoPlayPrevented),this.trigger(w.Player.AutoPlay,!1),this._options.cover&&this.trigger(w.Private.Cover_Show)},O.prototype._overrideNativePlay=function(){var r=this.tag.play,i=this;this.tag.play=function(){var e,t;i._monitor&&i._monitor.reportStartPlay(),i._options.source?(i.readyTime=(new Date).getTime(),e=r.apply(i.tag),void 0!==e&&e.then(function(){i.trigger(w.Player.AutoPlay,!0)}).catch(function(e){!i.tag||!i.tag.paused||i._isError||i._options._autoplay||i._switchedLevel||i._autoplayFailedHandler()}),t=i._originalPlaybackRate||i.tag.playbackRate,setTimeout(function(){i.tag&&(i.tag.playbackRate=t)})):(e={mediaId:i._options.vid||"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"},i._options.vid?e.display_msg=y.get("Error_Vid_Empty_Source"):i._options.mediaAuth?e.display_msg=y.get("Error_Mediaauth_Empty_Source"):e.display_msg=y.get("Error_Empty_Source"),i.trigger(w.Player.Error,e))}},O.prototype._extraMultiSources=function(){var e=this._options.source;if(e&&-1<e.indexOf("{")&&-1<e.indexOf("}")){var t="";try{t=JSON.parse(e)}catch(e){console.error(e),console.error("\u5730\u5740json\u4e32\u683c\u5f0f\u4e0d\u5bf9")}var r,i=[];for(r in t){var n=p.QualityLevels[r];i.push({definition:r,Url:t[r],desc:n||r})}this._setupSourceList(i)}return i},O.prototype._setupSourceList=function(e){var t;(e=void 0===e?[]:e).length&&(this._currentPlayIndex=d.findSelectedStreamLevel(e),t=e[this._currentPlayIndex],this._urls=e,this._options.source=t.Url,this.trigger(w.Private.SourceLoaded,t))},O.prototype._isEnabledAILabel=function(){return this._options.ai&&this._options.ai.label},O.prototype._createService=function(){if(P)for(var e=P.length,t=0;t<e;t++){var r=P[t],i=r.condition;void 0===i?i=!0:"function"==typeof i&&(i=i.call(this)),i&&(this[r.name]=new r.service(this))}},O.prototype._disposeService=function(){if(P)for(var e=P.length,t=0;t<e;t++){var r=this[P[t].name];void 0!==r&&r.dispose&&r.dispose()}},O.prototype._executeReadyCallback=function(){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(e){console.log(e)}},O.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._clearLiveErrorHandle()},O.prototype._reloadForVod=function(){var e,t,r;return this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&(e=this.getCurrentTime(),(t=this._originalSource).indexOf("auth_key=")<0&&(t=t&&0<t.indexOf("?")?t+"&_t="+(new Date).valueOf():t+"?_t="+(new Date).valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),(r=this)._vodRetryCountHandle=setTimeout(function(){r._loadByUrlInner(t,e,!0)},100*this._vodRetryCount),this._vodRetryCount=this._vodRetryCount+1,!0)},O.prototype._getUserTextTracks=function(){var e=this._options.textTracks||[];(e=d.unqiueTextTracks(e)).length&&this.trigger(w.Private.TextTrackFounded,{from:"user",textTracks:e})},t.exports=O},{"../../commonui/autostreamselector":11,"../../feature/AntiRecord":16,"../../feature/autoPlayDelay":17,"../../feature/keyboardControl":18,"../../feature/license":19,"../../lang/index":23,"../../lib/codec-probe":26,"../../lib/constants":28,"../../lib/cookie":29,"../../lib/dom":32,"../../lib/event":33,"../../lib/object":42,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/vttnext/index":56,"../../monitor/monitor":64,"../../ui/component":130,"../../ui/component/cover":134,"../../ui/component/license-watermark":139,"../../ui/component/play-animation":141,"../../ui/component/progressmarker":144,"../../ui/component/text-track-display":155,"../../ui/component/util":159,"../../ui/exports":162,"../service/export":120,"../splayer/splayerinjector":127,"./event/eventmanager":69,"./event/eventtype":70,"./eventHandler/video/index":84,"./plugin/lifecyclemanager":94,"./x5play":96,"es6-promise":8}],92:[function(e,t,r){e=e("../../../lib/oo").extend({});t.exports=e},{"../../../lib/oo":43}],93:[function(e,t,r){t.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],94:[function(e,t,r){function i(i){(this._player=i)._status="init",this.components=[];var e=i.getOptions().components;if(e&&s.isArray(e)&&0<e.length)for(var t=0;t<e.length;t++){var r=e[t];if(!r)return void console.log("The "+t+" custome component is "+r);var n=void 0===r.type?r:r.type,o=void 0===r.args?[]:r.args,r=void 0===r.name?"":r.name;if(!n)return void console.log(r+" compenent is "+n);o=o&&0<o.length?[].concat.call([n],o):[],n=new(Function.prototype.bind.apply(n,o)),o=n[c.createEl];o&&"function"==typeof o&&o.call(n,i.el(),i),this.components.push({name:r,obj:n})}var a=this;i.on(l.Private.LifeCycleChanged,function(e){var t=e.paramData,r=t.type,t=t.data;r===l.Video.CanPlayThrough&&a._player.trigger(l.Player.TimeUpdate,t.target.currentTime),r===l.Video.Ended&&a._player.trigger(l.Player.TimeUpdate,a._player.getDuration()),0!=a.components.length&&u.call(a,i,e)})}var s=e("../../../lib/object"),l=e("../event/eventtype"),c=e("./lifecycle"),n=e("./status"),u=(i.prototype.getComponent=function(e){var t=null,r=this.components.length;if(e)for(var i=0;i<r;i++)if(this.components[i].name==e){t=this.components[i].obj;break}return t},function(e,t){if(t){for(var t=t.paramData,r=t.type,i=t.data,n=((t=r)!=l.Video.LoadStart&&t!=l.Video.LoadedData&&t!=l.Video.LoadedMetadata||(r=c.loading),p(e,r),this.components.length),o=0;o<n;o++){var a=this.components[o].obj,s=a[r];s&&"function"==typeof s&&s.call(a,e,i)}r==l.Private.Dispose&&(this.components=[])}}),p=function(e,t){void 0===n[t]||t==n.pause&&(e._status==n.error||e._status==n.ended)||t==n.ready&&e._status==n.playing||(e._status=t)};t.exports=i},{"../../../lib/object":42,"../event/eventtype":70,"./lifecycle":93,"./status":95}],95:[function(e,t,r){t.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],96:[function(e,t,r){function i(e,t){var r=e.el().style.height,i=e.el().style.width,n=(e.originalLayout={container:{height:r,width:i},video:{width:e.tag.style.width,height:e.tag.style.height}},document.body.clientHeight*(window.devicePixelRatio||1)+"px"),o=document.body.clientWidth+"px";width=t?(height=n,o):(height=r.indexOf("%")?r:r+"px",i.indexOf("%")?i:i+"px"),e.tag.style.width=o,e.tag.style.height=n,e.el().style.height=t?n:height}var n=e("../../lib/ua"),o=e("../../lib/dom");t.exports.isAndroidX5=function(){return n.os.android&&n.is_X5||n.dingTalk()},t.exports.adaptX5Play=function(r){n.os.android&&n.is_X5&&("h5"==r._options.x5_type&&(r.tag.setAttribute("x5-video-player-type",r._options.x5_type),window.onresize=function(){var e,t;i(r,r._options.x5_fullscreen||"center"==r._options.x5_video_position),"landscape"==(e=r)._x5VideoOrientation&&(e._originalTagWidth=e.tag.style.width,e._originalTagHeight=e.tag.style.height,(t=document.querySelector("#"+e.id()+" .prism-controlbar"))&&parseFloat(t.offsetHeight),e.tag.style.height="100%",e.tag.style.width=window.screen.width+"px")},r.tag.addEventListener("x5videoenterfullscreen",function(){i(r,r._options.x5_fullscreen||"center"==r._options.x5_video_position),r.trigger("x5requestFullScreen")}),r.tag.addEventListener("x5videoexitfullscreen",function(){var e,t;(e=r).originalLayout&&(t=e.originalLayout,e.el().style.height=t.container.height,e.el().style.width=t.container.width,e.tag.style.width=t.video.width,e.tag.style.height=t.video.height),r.trigger("x5cancelFullScreen"),r.fullscreenService.getIsFullScreen()&&r.fullscreenService.cancelFullScreen()}),r.on("requestFullScreen",function(){"top"==r._options.x5_video_position&&o.removeClass(r.tag,"x5-top-left"),n.os.android&&n.is_X5&&r._options.x5LandscapeAsFullScreen&&(r.tag.setAttribute("x5-video-orientation","landscape"),r._x5VideoOrientation="landscape")}),r.on("cancelFullScreen",function(){"top"==r._options.x5_video_position&&o.addClass(r.tag,"x5-top-left"),n.os.android&&n.is_X5&&r._options.x5LandscapeAsFullScreen&&(r.tag.setAttribute("x5-video-orientation","portrait"),i(r,r._options.x5_fullscreen||"center"==r._options.x5_video_position),r._x5VideoOrientation="portrait")})),void 0!==r._options.x5_fullscreen&&r._options.x5_fullscreen&&(r.tag.setAttribute("x5-video-player-fullscreen",r._options.x5_fullscreen),o.addClass(r.tag,"x5-full-screen")),"top"==r._options.x5_video_position&&o.addClass(r.tag,"x5-top-left"),void 0!==r._options.x5_orientation)&&r.tag.setAttribute("x5-video-orientation",r._options.x5_orientation)}},{"../../lib/dom":32,"../../lib/ua":49}],97:[function(e,t,r){var f=e("../../lib/io"),y=e("../../config"),_=e("../../lib/constants"),g=e("../../lib/util"),v=e("../../lib/playerutil"),m=(e("../../lib/dom"),e("../../lang/index")),S=e("../base/event/eventtype"),b=e("../saas/drm"),T=e("../../lib/ua"),E=function(){function e(){}var t=e.prototype;return t.destroy=function(){},t.append=function(e){},t.remove=function(e,t){},t.isTextVisible=function(){},t.setTextVisibility=function(e){},e}();t.exports.inject=function(e,t,r,i,o,n,a){var s,l=i.source;function c(i){var n=this;this._drm.load(this._options.source,i.startTime).then(function(){if(n.trigger(S.Private.H5_Loading_Hide),i.continuePlay&&(n.play(),i.prevVariant)&&0!==i.prevVariant){for(var e,t=n._drm.getVariantTracks(),r=0;r<t.length;r++)if(t[r].id===i.prevVariant){e=t[r];break}e&&n._drm.selectVariantTrack(e,!0)}}).catch(function(e){p.call(n,e)})}function u(){var e=_.ErrorCode.DrmNotSupported,t=m.get("Error_Drm_Not_Supported"),e={mediaId:this._options.vid||"",error_code:e,error_msg:t};this.logError(e),this.trigger(S.Player.Error,e)}function p(e){var t=_.ErrorCode.DrmLoadError,r=m.get("Error_Drm_Load"),t={mediaId:this._options.vid||"",error_code:t,error_msg:r+"("+e.code+")"};this.logError(t),this.trigger(S.Player.Error,t)}function d(){this._sessionTimer&&(clearTimeout(this._sessionTimer),this._sessionTimer=null)}function h(e,t){t=t.getVariantTracks().find(function(e){return e.active});console.log("activeTrack",t),e.trigger(S.Private.QualityChange,{levelSwitch:!0,bitrate:t.bandwidth,desc:t.height})}!n&&(i=l,e._drm||!v.isDash(i)&&!v.isHls(i))||(e._isDrm=!0,e._drm=null,e._isLoadedDrm=!1,e._sessionTimer=null,e._isFairPlay=T.IS_MAC_SAFARI||T.IS_IOS,e._fairPlayHandlers={},console.log("use FairPlay",e._isFairPlay),t.prototype._checkDrmReady=function(){if(null==e._drm&&!e._isFairPlay)throw new Error("please invoke this method after ready event")},t.prototype.play=function(e){this._checkDrmReady(),this._isManualPlay=e||!1;return this.trigger(S.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this},t.prototype.initPlay=function(e){var t;function r(n,t){var r,i;if(n._antiRecord&&(console.log("Manual check before load source"),n._antiRecord.check()))return;!shaka.Player.isBrowserSupported()||function(){if(T.IS_ANDROID)return!(!T.IS_UC&&!T.IS_FIREFOX)}()?u.call(n):(r=!n._drm,i=function(){var e;n._drm=new shaka.Player(n.tag),s(n,n._drm),e=n._options.isLive?"https://"+v.getLiveHostByRegion(n._options.region):"https://vod."+n._options.region+".aliyuncs.com",n._drm.configure({drm:{servers:{"com.widevine.alpha":e,"com.microsoft.playready":e}},textDisplayFactory:function(){return new E}}),n._drm.getNetworkingEngine().registerRequestFilter(function(e,t){shaka.util.StringUtils;var r=shaka.util.Uint8ArrayUtils;e==shaka.net.NetworkingEngine.RequestType.LICENSE&&(e=r.toBase64(new Uint8Array(t.body)),r=n._options.isLive?b.getRequestUrl(e,n):b.postData(e,n),t.uris[0]=r.url,t.headers["content-type"]="application/x-www-form-urlencoded",t.body=r.data)}),n._drm.getNetworkingEngine().registerResponseFilter(function(e,t){var r=shaka.util.StringUtils,i=shaka.util.Uint8ArrayUtils;e==shaka.net.NetworkingEngine.RequestType.LICENSE&&(e=r.fromUTF8(t.data),r=JSON.parse(e),e=n._options.isLive?r.Response.B64License:JSON.parse(r.License).b64License,t.data=i.fromBase64(e))}),n._drm.addEventListener("error",function(e){console.log("errorMessage"),console.log(e.detail.code),console.log(e.detail)}),n._drm.load(n._options.source).then(function(){n._initPlayBehavior(t)}).catch(function(e){p.call(n,e)}),d.call(n),n._sessionTimer=setTimeout(function(){p.call(n,{code:"session timeout"}),n._drm&&n._drm.destroy()},n._player.getOptions().drmSessionTimeout||5e3),o&&o(n._drm),r&&n._executeReadyCallback()},n.destroy(function(e){try{i()}catch(e){console.log(e)}}))}g.contentProtocolMixed(l)?((t={mediaId:this._options.vid||"",error_code:_.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=m.get("Request_Block_Text"),this.trigger(S.Player.Error,t)):(this._waitingTimeoutCount=1,this._isFairPlay?(this.trigger(S.Private.H5_Loading_Show),function(e,t){var r;this._isFairPlay&&(!function(){if(T.IS_IOS)return e=parseInt(T.os.version),console.log("osVersion",e),12<=e;{var e;if(T.IS_MAC_SAFARI)return e=parseInt(T.browser.version),console.log("browserVersion",e),12<=e}return}()?u.call(this):((r=this).destroy(),b.loadCertificate(this,function(){e&&e(),r._initPlayBehavior(t,r._options.source),r._executeReadyCallback()})))}.call(this,o,e)):this._isLoadedDrm&&"undefined"!=typeof shaka?r(this,e):(this.trigger(S.Private.H5_Loading_Show),function(e){var t="aliplayer-drm-min.js",r="",r=y.domain?"https://"+y.domain+"/de/prismplayer/"+y.h5Version+"/drm/"+t:"/build/drm/"+t,i=this;f.loadJS(r,function(){shaka.polyfill.installAll(),e.apply(i)})}.call(this,function(){this._isLoadedDrm=!0,r(this,e)})))},t.prototype.destroy=function(e){var t;this._drm?(d.call(t=this),this._drm.destroy().then(function(){t._drm=null,"function"==typeof e&&e(t)})):(this._isFairPlay&&this._destroyFairPlay(),"function"==typeof e&&e(this))},t.prototype._destroyFairPlay=function(){b.destroyFairPlay.call(this)},t.prototype.dispose=function(){r.dispose.call(this),this.destroy()},t.prototype._switchLevel=function(e,t){if(t=t||{},this.trigger(S.Player.LevelSwitch),this._switchedLevel=!0,this._isFairPlay){this._manuallySwitchDrmLevel=!t.isAuto;var r=this.autoplay||"pause"!=this._status;this._loadByUrlInner(e,this.getCurrentTime(),r,!0)}else if(t.isAuto)this._drm.configure({abr:{enabled:!0}}),h(this._player,this._drm);else{for(var i,n=this._drm.getVariantTracks(),o=0;o<n.length;o++){var a=n[o];if(Number(a.bandwidth)===Number(t.bitrate)&&Number(a.height)===Number(t.resolution.split("x")[1])){i=a;break}}console.log("find track",i),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(i,!this._options.seamlessHandover)}var s=this;setTimeout(function(){s.trigger(S.Player.LevelSwitched),this._switchedLevel=!1},1e3)},t.prototype._getDRMEncryptItem=function(){var e=this._urls;if(e&&0<e.length)for(var t=e.length,r=0;r<t;r++){var i=e[r];if(i.Url==this._options.source&&+i.encryption)return i}return""},t.prototype._getItemBySource=function(){var e=this._urls;if(e&&0<e.length)for(var t=e.length,r=0;r<t;r++){var i=e[r];if(i.Url==this._options.source)return i}return""},s=function(n,r){r.addEventListener("error",function(e){var t=n,e=e.detail,r="Error code:"+e.code+"message:"+e.message,i=(console.log(r),_.ErrorCode.OtherError),r=m.get("Error_Play_Text");e.code==shaka.util.Error.Code.EXPIRED?function(){var t=this,e=(this.trigger(S.Private.H5_Loading_Show),null);this._options.isLive||(e=this.getCurrentTime());var r,i=!this.paused(),n=this._drm.getConfiguration().abr.enabled;if(!n)for(var o=this._drm.getVariantTracks(),a=0;a<o.length;a++)if(o[a].active){r=o[a].id;break}var s={startTime:e,continuePlay:i,prevVariant:r,isAdaptive:n};"function"==typeof this._options.refreshAccessInfo?this._options.refreshAccessInfo().then(function(e){(e=e||{}).accessKeyId&&(t._options.accessKeyId=e.accessKeyId),e.securityToken&&(t._options.securityToken=e.securityToken),e.accessKeySecret&&(t._options.accessKeySecret=e.accessKeySecret),c.call(t,s)}):c.call(t,s)}.call(t):(e.code==shaka.util.Error.Code.HTTP_ERROR?(i=_.ErrorCode.NetworkError,r=m.get("Http_Error")):e.code==shaka.util.Error.Code.TIMEOUT?(i=_.ErrorCode.LoadingTimeout,r=m.get("Error_Waiting_Timeout_Text")):e.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?(i=_.ErrorCode.DrmLicenseRequestFailed,r=m.get("Error_Drm_License_Request_Failed")):e.Category==shaka.util.Error.NETWORK&&(i=_.ErrorCode.NetworkError,r=m.get("Error_Network_Text")),setTimeout(function(){t.trigger(S.Private.Play_Btn_Hide)}),t.checkOnline()&&(i={mediaId:t._options.vid||"",error_code:i,error_msg:e.message},t.logError(i),i.display_msg=e.code+"|"+r,t.trigger(S.Player.Error,i)))}),r.addEventListener("variantchanged",function(e){console.log("DRM Event: variantchanged",e)}),r.addEventListener("abrstatuschanged",function(e){console.log("DRM Event: abrstatuschanged",e)}),r.addEventListener("drmsessionupdate",function(e){console.log("DRM Event: drmsessionupdate",e),d.call(n)}),r.addEventListener("expirationupdated",function(e){console.log("DRM Event: expirationupdated",e),console.log("Exp:",this.getExpiration())}),r.addEventListener("adaptation",function(e){console.log("adaptation",e),h(n,r)}),r.addEventListener("trackschanged",function(e){console.log("DRM EVENT: trackschanged",r.getTextLanguages(),r.getTextTracks());var t=r.getTextLanguages();t&&t.length&&(t=function(e){var t={subtitle:"subtitles",caption:"captions"},r=(console.log("Building track config"),e.getManifest().textStreams||[]),i=(console.log("textStreams",r),e.getTextLanguages()),n=(console.log("languageList",i),[]);try{r.forEach(function(e){i.includes(e.language)&&n.push({kind:t[e.kind]||e.kind,label:e.label,srclang:e.language,src:Array.from(e.segmentIndex)[0].getUris()[0]})})}catch(e){console.log("error in retrieving text track url: ",e)}return n}(r),n.trigger(S.Private.TextTrackFounded,{from:"drm",textTracks:t}),n.trigger(S.Private.CCReset))})})}},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/dom":32,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../base/event/eventtype":70,"../saas/drm":107}],98:[function(e,t,r){var i=e("../base/player"),n=e("./drminjector"),o=i.extend({init:function(e,t){n.inject(this,o,i.prototype,t,function(e){}),t._native=!1,i.call(this,e,t)}});t.exports=o},{"../base/player":91,"./drminjector":97}],99:[function(e,t,r){var i=e("../../ui/component"),n=e("../../lib/data"),o=e("../../lib/ua"),a=e("../../lib/constants"),s=e("../../lib/dom"),l=e("../../lib/object"),c=e("../../config"),u=e("../../lang/index"),p=e("../../lib/playerutil"),d=e("../../lib/util"),h=e("../../ui/component/info-display"),f=e("../../ui/component/error-display"),y=e("../../feature/autoPlayDelay"),_=e("../../commonui/autostreamselector"),g=e("../base/event/eventtype"),v=e("../saas/ststoken"),e=i.extend({init:function(e,t){var r;void 0===t.skinLayout&&(t.skinLayout=p.defaultFlashLayout),i.call(this,this,t),this._id="prism-player-"+n.guid(),this.tag=e,this._el=this.tag,this._childrenUI=[f],this.initChildren(),this.id=this._id,window[this.id]=this,u.setCurrentLanguage(this._options.language,"flash",this._options.languageTexts),d.openInFile()?(t={mediaId:this._options.vid||"",error_code:a.ErrorCode.FormatNotSupport,error_msg:u.get("Open_Html_By_File","flash")},this.trigger(g.Private.Error_Show,t)):o.IS_MOBILE?this.trigger(g.Private.Error_Show,{mediaId:this._options.vid||"",error_code:a.ErrorCode.FormatNotSupport,error_msg:u.get("Cant_Use_Flash_On_Mobile","flash")}):(this._options.vid&&this._options.accessKeyId&&this._options.securityToken&&this._options.accessKeySecret?v.getPlayAuth((r=this)._options,function(e){r._options.playauth=e,r._createPlayer()},function(e){var t={mediaId:r._options.vid,error_code:e.Code,error_msg:e.Message};e.sri&&(t.sri=e.sri),t.display_msg=e.display_msg,r.trigger(g.Private.Error_Show,t)},"flash"):this._createPlayer(),this._status="init")},_createPlayer:function(){var e,t;this._options.autoPlayDelay?(t=new y(this),e=this,t.handle(function(){e._options.autoplay=!0,e._initPlayer(),e._childrenUI=[h,_],e.initChildren()})):(this._initPlayer(),this._childrenUI=[h,_],this.initChildren()),o.HAS_FLASH||(t=u.get("Flash_Not_Ready","flash"),this.trigger(g.Private.Info_Show,{text:t,align:"tc",isBlack:!1}))},_initPlayer:function(){var e="//"+c.domain+"/de/prismplayer-flash/"+c.flashVersion+"/PrismPlayer.swf",t=(this._options.playerSwfPath?e=this._options.playerSwfPath:c.domain?-1<c.domain.indexOf("localhost")&&(e="//"+c.domain+"/build/flash//PrismPlayer.swf"):e="de/prismplayer-flash/"+c.flashVersion+"/PrismPlayer.swf",this._comboFlashVars()),r=this._options.wmode||"opaque";this.tag.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="100%" height="100%" id="'+this.id+'"><param name=movie value="'+e+'"><param name=quality value=High><param name="FlashVars" value="'+t+'"><param name="WMode" value="'+r+'"><param name="AllowScriptAccess" value="always"><param name="AllowFullScreen" value="true"><param name="AllowFullScreenInteractive" value="true"><embed name="'+this.id+'" src="'+e+'" quality=high pluginspage="//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="100%" height="100%" AllowScriptAccess="always" AllowFullScreen="true" AllowFullScreenInteractive="true" WMode="'+r+'" FlashVars="'+t+'"></embed></object>'},_getPlayer:function(e){return-1!=navigator.appName.indexOf("Microsoft")?document.getElementById(e):document[e]},_getLowerQualityLevel:function(){var e,t=this._getVideoUrls();return t&&(e=t.Urls,t=t.index,!(e&&0==e.length||-1==t))&&0<t?{item:e[t-1],index:t-1}:""},_comboFlashVars:function(){var e=encodeURIComponent(o.getReferer()),t=o.getHref(),r=encodeURIComponent(t),i="",t=(t&&(i=o.getHost(t)),this._options),e={autoPlay:t.autoplay?1:0,isInner:0,actRequest:1,vid:t.vid,diagnosisButtonVisible:t.diagnosisButtonVisible?1:0,domain:t.domain||"//tv.taobao.com",statisticService:t.statisticService||c.logReportTo,videoInfoService:t.videoInfoService||"/player/json/getBaseVideoInfo.do",disablePing:t.trackLog?0:1,namespace:this.id,barMode:0!=t.barMode?1:0,isLive:t.isLive?1:0,waterMark:t.waterMark,environment:t.environment,vurl:t.source?encodeURIComponent(t.source):"",plugins:t.plugins||"",snapShotShow:t.snapshot?1:0,accessId:t.accId||"",accessKey:t.accSecret||"",apiKey:t.apiKey||"",flashApiKey:t.flashApiKey||"",disableSeek:t.disableSeek?1:0,disableFullScreen:t.disableFullScreen?1:0,stsToken:t.stsToken||"",domainRegion:t.domainRegion||"",authInfo:t.authInfo?encodeURIComponent(t.authInfo):"",playDomain:t.playDomain||"",stretcherZoomType:t.stretcherZoomType||"",playauth:t.playauth?t.playauth.replace(/\+/g,"%2B"):"",prismType:t.prismType||0,formats:t.formats||"",notShowTips:t.notShowTips?1:0,showBarTime:t.showBarTime||0,showBuffer:0==t.showBuffer?0:1,rePlay:t.rePlay?1:0,encryp:t.encryp||"",secret:t.secret||"",mediaType:"video",logInfo:{ud:o.getHost(t.source),os:o.os.name,ov:o.os.version||"",et:o.browser.name,ev:o.browser.version||"",uat:o.USER_AGENT,r:e,pu:r,app_n:i}},n=[];return void 0!==t.rtmpBufferTime&&(e.rtmpBufferTime=t.rtmpBufferTime),t.cover&&(e.cover=t.cover),t.extraInfo&&(e.extraInfo=encodeURIComponent(JSON.stringify(t.extraInfo))),e.logInfo&&(e.logInfo=encodeURIComponent(JSON.stringify(e.logInfo))),e.languageData=encodeURIComponent(JSON.stringify(u.getLanguageData("flash"))),e.language=u.getCurrentLanguage(),l.each(e,function(e,t){n.push(e+"="+t)}),n.join("&")},initChildren:function(){for(var e=this._childrenUI.length,t=0;t<e;t++){var r=new this._childrenUI[t](this,this._options),i=r.el();i.id=r.id(),this.contentEl().appendChild(i),r.bindEvent()}var n=document.querySelector("#"+this._options.id+" .prism-info-display");s.css(n,"display","none")},flashReady:function(){this.flashPlayer=this._getPlayer(this.id),this._isReady=!0;var e=this._options.skinRes,t=this._options.skinLayout;if(!1!==t&&!l.isArray(t))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");if("string"!=typeof e)throw new Error("PrismPlayer Error: skinRes should be string!");e=0!=t&&0!==t.length&&{skinRes:e,skinLayout:t},this.flashPlayer.setPlayerSkin(e),this.trigger("ready");var r=this;window.addEventListener("beforeunload",function(){try{r.flashPlayer.setPlayerCloseStatus()}catch(e){}})},jsReady:function(){return!0},snapshoted:function(e){var t=d.toBinary(e),e="data:image/jpeg;base64,"+e;this.trigger("snapshoted",{time:this.getCurrentTime(),base64:e,binary:t})},uiReady:function(){this._status="ready",this.trigger("uiReady")},loadedmetadata:function(){"ended"!=this._status&&(this._status="loading",this.trigger("loadedmetadata"))},onPlay:function(){this._status="play",this.trigger("play"),this._clearTimeoutHandle(),this.trigger(g.Private.AutoStreamHide)},onEnded:function(){this._clearTimeoutHandle(),this._status="ended",this.trigger("ended")},onPause:function(){this._status="pause",this._clearTimeoutHandle(),this.trigger(g.Private.AutoStreamHide),this.trigger("pause")},onBulletScreenReady:function(){this.trigger("bSReady")},onBulletScreenMsgSend:function(e){this.trigger("bSSendMsg",e)},onVideoRender:function(e){this._clearTimeoutHandle(),this.trigger("videoRender"),this.trigger("canplay",{loadtime:e})},onVideoError:function(e){this._clearTimeoutHandle(),this._status="error",this.trigger("error",{errortype:e})},onM3u8Retry:function(){this.trigger("m3u8Retry")},hideBar:function(){this.trigger("hideBar")},showBar:function(){this.trigger("showBar")},liveStreamStop:function(){this.trigger("liveStreamStop")},stsTokenExpired:function(){this._status="error",this.trigger("stsTokenExpired")},onVideoBuffer:function(){var e;"pause"!=this._status&&(this._status="waiting",this.trigger("waiting"),this._clearTimeoutHandle(),(e=this)._checkTimeoutHandle=setTimeout(function(){e.trigger(g.Private.AutoStreamShow)},1e3*this._options.loadDataTimeout),this._checkVideoStatus())},startSeek:function(e){this.trigger("startSeek",e)},completeSeek:function(e){this.trigger("completeSeek",e)},_invoke:function(){var e=arguments[0],t=arguments;if(Array.prototype.shift.call(t),!this.flashPlayer)throw new Error("PrismPlayer Error: flash player is not ready\uff0cplease use api after ready event occured!");if("function"!=typeof this.flashPlayer[e])throw new Error("PrismPlayer Error: function "+e+" is not found!");return this.flashPlayer[e].apply(this.flashPlayer,t)},play:function(){this._invoke("playVideo")},replay:function(){this._invoke("replayVideo")},pause:function(){this._invoke("pauseVideo")},stop:function(){this._invoke("stopVideo")},seek:function(e){this._invoke("seekVideo",e)},getCurrentTime:function(){return this._invoke("getCurrentTime")},getDuration:function(){return this._invoke("getDuration")},getStatus:function(){return this._status},_getVideoUrls:function(){var e=this._invoke("getVideoUrls"),t=[];if(e&&e.Urls)for(var r=0;r<e.Urls.length;r++){var i=e.Urls[r].value,n=i.desc.indexOf("_"),o=u.get(i.definition,"flash");i.desc=0<n?o+"_"+i.height:o,t.push(i)}return{Urls:t,index:e.index}},_getVideoStatus:function(){return this._invoke("getVideoStatus")},_checkVideoStatus:function(){var r;this.flashPlayer&&!this._checkVideoStatusHandler&&(r=this,function t(){r._checkVideoStatusHandler=setTimeout(function(){var e=r._getVideoStatus();"playing"==e.videoStatus&&"bufferFull"==e.bufferStatus?(r._status="playing",r._clearTimeoutHandle()):"videoPlayOver"==e.videoStatus&&(r._status="ended",r._clearTimeoutHandle()),t()},500)}())},_clearTimeoutHandle:function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null)},_changeStream:function(e){return this._invoke("changeStream",e)},mute:function(){this.setVolume(0)},unMute:function(){this.setVolume(.5)},getVolume:function(){return this._invoke("getVolume")},setVolume:function(e){this._invoke("setVolume",e)},loadByVid:function(e){this._invoke("loadByVid",e,!1)},loadByUrl:function(e,t){this._invoke("loadByUrl",e,t)},dispose:function(){this._clearTimeoutHandle(),this._checkVideoStatusHandler&&(clearTimeout(this._checkVideoStatusHandler),this._checkVideoStatusHandler=null),this._invoke("pauseVideo");var e=this;setTimeout(function(){e.off("completeSeek"),e.off("startSeek"),e.off("stsTokenExpired"),e.off("liveStreamStop"),e.off("showBar"),e.off("hideBar"),e.off("m3u8Retry"),e.off("error"),e.off("canplay"),e.off("pause"),e.off("ended"),e.off("play"),e.off("loadedmetadata"),e.off("snapshoted"),e.off("uiReady"),e.off("ready"),e.flashPlayer=null,e._el&&(e._el.innerHTML="")})},showBSMsg:function(e){this._invoke("showBSMsg",e)},setToastEnabled:function(e){this._invoke("setToastEnabled",e)},setLoadingInvisible:function(){this._invoke("setLoadingInvisible")},setPlayerSize:function(e,t){this._el.style.width=e,this._el.style.height=t}});t.exports=e},{"../../commonui/autostreamselector":11,"../../config":14,"../../feature/autoPlayDelay":17,"../../lang/index":23,"../../lib/constants":28,"../../lib/data":30,"../../lib/dom":32,"../../lib/object":42,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../../ui/component":130,"../../ui/component/error-display":135,"../../ui/component/info-display":138,"../base/event/eventtype":70,"../saas/ststoken":114}],100:[function(e,t,r){var a=e("../../lib/io"),c=e("../../config"),u=e("../../lib/constants"),p=e("../../lib/util"),d=e("../../lib/playerutil"),h=e("../../lib/ua"),f=e("../../lang/index"),y=e("../base/event/eventtype");t.exports.inject=function(e,t,r,i,s,n){var l,o=i.source;!n&&(i=o,e._flv||!d.isFlv(i))||(e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,t.prototype._checkFlvReady=function(){if(null==e._flv)throw new Error("please invoke this method after ready event")},e._isFlv=!0,e._flv=null,e._isLoadedFlv=!1,e._originalUrl="",t.prototype.play=function(e){this._checkFlvReady(),this._isManualPlay=e||!1;return this.trigger(y.Private.Cover_Hide),this._options.isLive&&e?this._loadByUrlInner(this._options.source,0,e):this.tag.ended||this._ended?this.replay():(0==this._seeking&&(e=0,this.tag.ended||this._ended||0==(e=this.getCurrentTime())&&(e=-1),-1!=e)&&this.seek(e),this.tag.paused&&(this._hasLoaded||this._flv.load(),this._flv.play())),this},t.prototype.seek=function(e){this._checkFlvReady(),this._seeking=!0;var t=this.getDuration();t<=(e=Math.floor(e))&&(e=t);try{this._flv.currentTime=e}catch(e){console.log(e)}return this},t.prototype.pause=function(e){return this._checkFlvReady(),this._isManualPause=e||!1,this._flv.pause(),this},t.prototype.getProgramDateTime=function(){var e;return this._checkFlvReady(),this._metadata?(e=(e=this._flv.getFirstSample())&&e.pts?e.pts:0,console.log("\u63a8\u6d41\u65f6\u95f4\uff1a"+this._metadata.NtpTime),console.log("\u9996\u5e27PTS\uff1a"+e),this._metadata.NtpTime+e):""},t.prototype.initPlay=function(e){var t;function r(t,e){var r,i=!t._flv,n=(t._destroyFlv(),t._options.isLive),o={isLive:n,enableWorker:t._options.enableWorker,stashInitialSize:2048},a=(h.IS_IE11&&(o.enableWorker=!1),{type:"flv",isLive:n,url:t._options.source});for(r in n?(o.enableStashBuffer=t._options.enableStashBufferForFlv,stashInitialSize=t._options.stashInitialSizeForFlv,o.autoCleanupSourceBuffer=!1):o.lazyLoadMaxDuration=600,t._options.isLive&&(t._options.flvFrameChasing&&(o.flvFrameChasing=t._options.flvFrameChasing),t._options.chasingFirstParagraph&&(o.chasingFirstParagraph=t._options.chasingFirstParagraph),t._options.chasingSecondParagraph&&(o.chasingSecondParagraph=t._options.chasingSecondParagraph),t._options.chasingFirstSpeed&&(o.chasingFirstSpeed=t._options.chasingFirstSpeed),t._options.chasingSecondSpeed)&&(o.chasingSecondSpeed=t._options.chasingSecondSpeed),t._options.flvOption)"cors"==r||"hasAudio"==r||"withCredentials"==r||"hasVideo"==r||"type"==r?a[r]=t._options.flvOption[r]:o[r]=t._options.flvOption[r];t._originalUrl=t._options.source,flvjs.LoggingControl.enableAll=t._options.debug,t._flv=flvjs.createPlayer(a,o),l(t,t._flv),t._flv.on(flvjs.Events.MEDIA_INFO,function(e){t._metadata=e.metadata}),t._flv.on(flvjs.Events.METADATA_ARRIVED,function(e){e&&e.dataContent&&e.dataContent.length&&t.trigger(y.Private.SeiFrame,{dataContent:e.dataContent,pts:e.pts})}),t._flv.attachMediaElement(t.tag),t._initPlayBehavior(e)&&((t._options.preload||t._options.autoplay)&&(t._hasLoaded=!0,t._flv.load()),t._options.autoplay&&!t.tag.paused&&t._flv.play(),s&&s(t._flv),i)&&(t._executeReadyCallback(),t._urls)&&0<t._urls.length&&!t._options.defaultDefinition&&(t._currentPlayIndex=d.findSelectedStreamLevel(t._urls),n=t._urls[t._currentPlayIndex],t._options.source=n.Url,t.trigger(y.Private.SourceLoaded,n))}h.browser.safari&&this.trigger(y.Private.Snapshot_Hide),p.contentProtocolMixed(o)?((t={mediaId:this._options.vid||"",error_code:u.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=f.get("Request_Block_Text"),this.trigger(y.Player.Error,t)):(that=this)._isLoadedFlv&&"undefined"!=typeof Hls?setTimeout(function(){r(that,e)},1e3):(this.trigger(y.Private.H5_Loading_Show),function(e,t){var r="aliplayer-flv-min.js",i="",i=c.domain?"https://"+c.domain+"/de/prismplayer/"+c.h5Version+"/flv/"+r:"/build/flv/"+r,n=this;a.loadJS(i,function(){e.apply(n)})}.call(that,function(){this._isLoadedFlv=!0,r(this,e)},this._options.debug))},t.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(e){console.log(e)}this.loaded=!1,this._hasLoaded=!1,this._flv=null},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&(t.prototype.play=this._superPt.play,t.prototype.pause=this._superPt.pause,t.prototype.initPlay=this._superPt.initPlay,t.prototype.seek=this._superPt.seek,t.prototype.canSeekable=this._superPt.canSeekable))},t.prototype.canSeekable=function(e){var t=this._flv.mediaInfo;return!(!this._flv._isTimepointBuffered(e)&&t&&!t.hasKeyframesIndex)},l=function(s,e){var l=!1;e.on(flvjs.Events.ERROR,function(e,t,r){var i,n,o=u.ErrorCode.OtherError,a=f.get("Error_Play_Text");e!==flvjs.ErrorTypes.BUFFER_FULL&&(t==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(e=s.getOptions().source)||0!=e.toLowerCase().indexOf("http://")&&0!=e.toLowerCase().indexOf("https://")?(o=u.ErrorCode.InvalidSourceURL,a=f.get("Error_Invalidate_Source_Widthout_Protocal"),l=!0):a=navigator.onLine?(o=u.ErrorCode.RequestDataError,f.get("Maybe_Cors_Error")):(o=u.ErrorCode.NetworkError,f.get("Error_Network_Text")):t==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?"404"==r.code?(o=u.ErrorCode.NotFoundSourceURL,a=f.get("Error_Not_Found")):"403"==r.code?(o=u.ErrorCode.AuthKeyExpired,a=f.get("Error_AuthKey_Text"),l=!0):(o=u.ErrorCode.NetworkError,a=f.get("Error_Network_Text")):t==flvjs.ErrorDetails.NETWORK_TIMEOUT?(o=u.ErrorCode.LoadingTimeout,a=f.get("Error_Waiting_Timeout_Text")):t!=flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED&&t!=flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED||(o=u.ErrorCode.FormatNotSupport,a=f.get("Error_H5_Not_Support_Text"),l=!0),e=function(){var e;setTimeout(function(){s.trigger(y.Private.Play_Btn_Hide)}),s.checkOnline()&&(e={mediaId:s._options&&s._options.vid?s._options.vid:"",error_code:o,error_msg:r.msg},s.logError(e),e.display_msg=a,c.cityBrain&&(s.flv=null),s.trigger(y.Player.Error,e))},s._options&&s._options.isLive&&!l?(i=s._options).liveRetry>s._liveRetryCount?(0==s._liveRetryCount&&s.trigger(y.Player.OnM3u8Retry),n=i.liveRetryInterval+i.liveRetryStep*s._liveRetryCount,s._liveRetryCount++,setTimeout(function(){s._loadByUrlInner(i.source)},1e3*n)):(s._liveErrorHandle&&clearTimeout(s._liveErrorHandle),s.trigger(y.Player.LiveStreamStop),s._liveErrorHandle=setTimeout(e,500)):t===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&11===r.code&&s.getCurrentTime()<s.getDuration()?(s._flv.unload(),s._flv.load(),s._flv.detachMediaElement(),s._flv.attachMediaElement(s.tag)):l?(s._flv.unload(),e()):s._reloadForVod()||e())})})}},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../base/event/eventtype":70}],101:[function(e,t,r){var i=e("../base/player"),n=e("./flvinjector"),o=i.extend({init:function(e,t){n.inject(this,o,i,t,function(e){}),t._native=!1,i.call(this,e,t)}});t.exports=o},{"../base/player":91,"./flvinjector":100}],102:[function(e,t,r){var u=e("../../lib/io"),p=e("../../config"),d=e("../../lib/constants"),h=e("../../lib/util"),f=e("../../lib/playerutil"),y=e("../../lib/ua"),_=e("../../lang/index"),g=e("../base/event/eventtype"),v=e("../../lib/hls/hlsparse");function m(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),this._hls=null)}t.exports.inject=function(e,t,r,i,n,l){e._hls2=!1;var o,a,s=i.source,c=i.useHlsPluginForSafari,i=i.useHlsPlugOnMobile;(n||l||(o=s,c=c,i=i,!e._hls&&f.isHls(o)&&(!f.canPlayHls()||f.isSafariUsedHlsPlugin(c)||i&&f.isUsedHlsPluginOnMobile())))&&(e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,t.prototype._checkHlsReady=function(){if(null==e._hls)throw new Error("please invoke this method after ready event")},e._isHls=!0,e._hls=null,e._isLoadedHls=!1,e._stopLoadAsPaused=!0,e._sce_dlgtqred_saved=n,t.prototype.play=function(e){this._checkHlsReady(),this._isManualPlay=e||!1;return this.trigger(g.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||(this._loadSourced=!0,this._options._autoplay=!0,this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&(e=this.getCurrentTime(),this._hls.startLoad(e)),this},t.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._hls.startLoad(0),this.tag.play(),this},t.prototype.pause=function(e){return this.tag&&(this._checkHlsReady(),this.tag.pause(),this._stopLoadAsPaused)&&this._hls.stopLoad(),this._isManualPause=e||!1,this},t.prototype.stop=function(){return this._checkHlsReady(),this.tag.setAttribute("src",null),this._hls.stopLoad(),this},t.prototype.seek=function(e){this._checkHlsReady();try{this._superPt.seek.call(this,e),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(e)}catch(e){console.log(e)}return this},t.prototype.getProgramDateTime=function(){if(this._checkHlsReady(),-1==this._hls.currentLevel)return"";var e=this._hls.currentLevel,e=this._hls.levels[e].details;if(e){e=e.programDateTime;if(console.log("ProgramDateTime="+e),e)return new Date(e).valueOf()}return 0},t.prototype.getCurrentPDT=function(){var e,t;return this._checkHlsReady(),-1==this._hls.currentLevel?"":(e=(t=this._hls.streamController.fragPlaying||{}).pdt)?(t=1e3*t.startPTS,e+(1e3*this.getCurrentTime()-t)):0},t.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(g.Player.OnM3u8Retry),this._liveRetryCount++},t.prototype._switchLevel=function(e){var t=this.getCurrentTime(),r=!this._qualityService.levels.length&&1<this._urls.length,i=(r&&(this.pause(),this._hls.stopLoad(),this._hls.detachMedia(),this._hls.destroy()),this.trigger(g.Player.LevelSwitch),this._hls.levels),n=!0;r&&this._loadByUrlInner(e,t,n,!0);for(var o=0;o<i.length;o++)if(i[o].url==e||i[o].url[0]==e){n=!1,this._hls2&&this._options.seamlessHandover?(this._hls.loadLevel=o,console.log("Seamlessly set nextLevel to",o)):(this._hls.currentLevel=o,console.log("Immediately set currentLevel to",o));break}n&&(this._hls.currentLevel=-1),this._switchedLevel=!0;var a=this;setTimeout(function(){a.trigger(g.Player.LevelSwitched),this._switchedLevel=!1},1e3)},t.prototype._getHlsVersion=function(i){var n,o,a;function s(e,t){var r=this.getOptions()||{},r={mediaId:r.vid||"",mediaAuth:r.mediaAuth||"",error_code:d.ErrorCode.LoadedMetadata,error_msg:_.get("Error_Play_Text")},t=Number(t);404===t?(r.error_code=d.ErrorCode.NotFoundSourceURL,r.error_msg=_.get("Error_Not_Found")):403===t?e===v.ERROR_REGION_BLOCK?(r.error_code=d.ErrorCode.RegionBlock,r.error_msg=_.get("Error_Region_Block_Text")):(r.error_code=d.ErrorCode.AuthKeyExpired,r.error_msg=_.get("Error_AuthKey_Text")):0===t&&navigator.onLine?(r.error_code=d.ErrorCode.RequestDataError,r.error_msg=r.error_msg+"\uff0c"+_.get("Maybe_Cors_Error")):r.error_msg=_.get("Error_Load_M3U8_Failed_Text"),this.logError(r),r.display_msg=r.error_msg,this.trigger(g.Player.Error,r)}!0===this._options.useHls2?(this._hls2=!0,i()):!1===this._options.useHls2||!this._options.isLive||l?i():this._options.lowLatencyMode?(this._hls2=!0,i()):(n=this,o=new v,a=n._options.source,o.load(a,function(e){var t,r;e.levels&&0!==e.levels.length?t=e.levels[0].url:(t=a,r=e.string),o.loadMediaPlaylist({url:t,string:r},function(e){e&&(n._hls2="number"==typeof e.partTarget),i()},s.bind(n))},s.bind(n)))},t.prototype.initPlay=function(t){var e,r;function i(s,t){if(s._antiRecord&&(console.log("Manual check before load source"),s._antiRecord.check()))return;var e,r=!s._hls,i=(s._destroyHls(),{xhrSetup:function(e,t){e.withCredentials=s._options.withCredentials||!1}}),n=s._options.loadingTimeOut||s._options.hlsLoadingTimeOut;for(e in n&&(i.manifestLoadingTimeOut=n,i.levelLoadingTimeOut=n,i.fragLoadingTimeOut=n),s._options.liveSyncDurationCount&&(i.liveSyncDurationCount=s._options.liveSyncDurationCount),s._options.defaultBandwidth&&(i.defaultBandwidth=s._options.defaultBandwidth),s._options.isLive&&(s._options.hlsFrameChasing&&(i.hlsFrameChasing=s._options.hlsFrameChasing),s._options.chasingFirstParagraph&&(i.chasingFirstParagraph=s._options.chasingFirstParagraph),s._options.chasingSecondParagraph&&(i.chasingSecondParagraph=s._options.chasingSecondParagraph),s._options.chasingFirstSpeed&&(i.chasingFirstSpeed=s._options.chasingFirstSpeed),s._options.chasingSecondSpeed)&&(i.chasingSecondSpeed=s._options.chasingSecondSpeed),!s._hls2||s._options.isLive&&!y.IS_IE11&&(i.backBufferLength=12,i.liveDurationInfinity=!0),s._options.nudgeMaxRetry&&(i.nudgeMaxRetry=s._options.nudgeMaxRetry),s._options.maxMaxBufferLength&&(i.maxMaxBufferLength=s._options.maxMaxBufferLength),s._options.maxBufferSize&&(i.maxBufferSize=s._options.maxBufferSize),s._options.fragLoadingRetryDelay&&(i.fragLoadingRetryDelay=s._options.fragLoadingRetryDelay),s._options.maxBufferLength&&(i.maxBufferLength=s._options.maxBufferLength),s._options.hlsBandWidthUpCacheTime&&(i.abrBandWidthUpCacheTime=s._options.hlsBandWidthUpCacheTime),s._options.seamlessHandover&&(i.seamlessHandover=s._options.seamlessHandover),s._options.accessKeyId&&(i.accessKeyId=s._options.accessKeyId),s._options.accessKeySecret&&(i.accessKeySecret=s._options.accessKeySecret),s._options.securityToken&&(i.securityToken=s._options.securityToken),s._options.app&&(i.app=s._options.app),s._options.stream&&(i.stream=s._options.stream),s._options.domain&&(i.domain=s._options.domain),s._options.regionId&&(i.regionId=s._options.regionId),s._sce_dlgtqred_saved&&(i._sce_dlgtqredxx=s._sce_dlgtqred_saved),i.enableWorker=s._options.enableWorker,i.debug=s._options.debug,s._stopLoadAsPaused=s._options.hlsOption.stopLoadAsPaused,s._options.hlsOption)i[e]=s._options.hlsOption[e];y.IS_IE11&&(i.enableWorker=!1),s._hls=new Hls(i),a(s,s._hls),s._loadSourced=!1,s._hls.attachMedia(s.tag),s._hls.on(Hls.Events.INIT_PTS_FOUND,function(e,t){s._initPTS=t.initPTS}),s._hls.on(Hls.Events.FRAG_PARSING_USERDATA,function(e,t){t&&t.dataContent&&t.dataContent.length&&s.trigger(g.Private.SeiFrame,{dataContent:t.dataContent,pts:t.pts})}),s._hls.on(Hls.Events.MEDIA_ATTACHED,function(){var e;s._hls.on(Hls.Events.MANIFEST_PARSED,function(){s._initPlayBehavior(t||s._loadSourced)}),s._hls.on(Hls.Events.AUDIO_TRACKS_UPDATED,function(e,t){s.trigger(g.Player.AudioTrackUpdated,t)}),s._hls.on(Hls.Events.MANIFEST_LOADED,function(e,t){s.trigger(g.Player.LevelsLoaded,t)}),s._hls.on(Hls.Events.LEVEL_SWITCHED,function(e,t){if(s._qualityService){for(var r=s._hls.levels[t.level].url,i=s._qualityService.levels,n="",o="",a=0;a<i.length;a++)if(i[a].Url==r){o=i[a].desc,n=i[a].bitrate;break}(o||n)&&s.trigger(g.Private.QualityChange,{levelSwitch:!0,url:r,bitrate:n,desc:o})}}),s._hls.on(Hls.Events.AUDIO_TRACK_SWITCH,function(e,t){s.trigger(g.Player.AudioTrackSwitch,t),setTimeout(function(){s.trigger(g.Player.AudioTrackSwitched,t)},1e3)}),(s._options.autoplay||s._options.preload||t)&&(s._loadSourced=!0,s._levels&&1<s._levels.length?(s._hls.trigger(Hls.Events.MANIFEST_LOADING,{}),s._hls.trigger(Hls.Events.MANIFEST_LOADED,{levels:s._levels})):s._hls.loadSource(s._options.source||"__INVALID__")),r?(s._executeReadyCallback(),s._urls&&0<s._urls.length&&!s._options.defaultDefinition&&(s._currentPlayIndex=f.findSelectedStreamLevel(s._urls),e=s._urls[s._currentPlayIndex],s._options.source=e.Url,s.trigger(g.Private.SourceLoaded,e))):s.trigger(g.Private.H5_Loading_Show)})}this.trigger(g.Private.H5_Loading_Show),h.contentProtocolMixed(s)?((e={mediaId:(e=this.getOptions()||{}).vid||"",mediaAuth:e.mediaAuth||"",error_code:d.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=_.get("Request_Block_Text"),this.trigger(g.Player.Error,e)):(r=this)._isLoadedHls&&"undefined"!=typeof Hls?i(this,t):(this.trigger(g.Private.H5_Loading_Show),this._getHlsVersion(function(e){!function(e,t){var r="aliplayer-hls-min.js",t=((t=t||{}).hls2&&(r="aliplayer-hls2-min.js"),""),t=p.domain?"https://"+p.domain+"/de/prismplayer/"+p.h5Version+"/hls/"+r:"/build/hls/"+r,i=this;u.loadJS(t,function(){e.apply(i)})}.call(r,function(){r._isLoadedHls=!0,i(r,t)},{debug:r._options.debug,hls2:r._hls2})}),this.on("error",m))},t.prototype._getbwEstimator=function(){var e,t=NaN;return t=this._hls?(e=this._hls.abrController._bwEstimator)?e.getEstimate():NaN:t},t.prototype._destroyHls=function(){this._hls&&this._hls.destroy(),this._hls=null},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyHls(),this._superPt&&(t.prototype.play=this._superPt.play,t.prototype.pause=this._superPt.pause,t.prototype.initPlay=this._superPt.initPlay,t.prototype.replay=this._superPt.replay,t.prototype.stop=this._superPt.stop,t.prototype.seek=this._superPt.seek))},a=function(c,u){u.on(Hls.Events.DEFAULT_BANDWIDTH,function(e,t){c.trigger(g.Player.DefaultBandWidth,{width:t.width,height:t.height,bitrate:t.bitrate})}),u.on(Hls.Events.ERROR,function(e,t){var r,i,n,o,a,s,l;!c._options||t.details==Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR||1==c._seeking||0==t.fatal&&t.type!=Hls.ErrorTypes.NETWORK_ERROR||(c._clearTimeout(),r=d.ErrorCode.LoadedMetadata,n=_.get("Error_Play_Text"),l=i=!1,t.details==Hls.ErrorDetails.MANIFEST_LOAD_ERROR||t.details==Hls.ErrorDetails.LEVEL_LOAD_ERROR?(i=!0,a=t.networkDetails,s=Number(a.status),c.liveShiftSerivce&&c.liveShiftSerivce.isLiveShiftPlaying()&&404===s?(r=d.ErrorCode.NotFoundSourceURL,n=_.get("Error_Liveshift_M3U8_Not_Found_Text"),l=!0):n=404===s?(r=d.ErrorCode.NotFoundSourceURL,_.get("Error_Not_Found")):403===s?(a=f.parseHttpHeaders(a)["x-tengine-error"])&&-1<d.RegionBlockMessages.indexOf(a)?(r=d.ErrorCode.RegionBlock,_.get("Error_Region_Block_Text")):(r=d.ErrorCode.AuthKeyExpired,_.get("Error_AuthKey_Text")):0===s&&navigator.onLine?(r=d.ErrorCode.RequestDataError,n+"\uff0c"+_.get("Maybe_Cors_Error")):_.get("Error_Load_M3U8_Failed_Text")):t.details==Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT||t.details==Hls.ErrorDetails.LEVEL_LOAD_TIMEOUT?(i=!0,n=_.get("Error_Load_M3U8_Timeout_Text")):t.details==Hls.ErrorDetails.MANIFEST_PARSING_ERROR||t.details==Hls.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(i=!0,n=_.get("Error_M3U8_Decode_Text")):t.type==Hls.ErrorTypes.NETWORK_ERROR?(r=d.ErrorCode.NetworkError,n=_.get("Error_Network_Text")):t.type!=Hls.ErrorTypes.MUX_ERROR&&t.type!=Hls.ErrorTypes.MEDIA_ERROR||(r=d.ErrorCode.PlayDataDecode,n=_.get("Error_TX_Decode_Text")),n=n+"("+t.details+")",o=function(){var e;c.pause(),setTimeout(function(){c.trigger(g.Private.Play_Btn_Hide)}),c.checkOnline()&&(e={mediaId:(e=c.getOptions()||{}).vid||"",mediaAuth:e.mediaAuth||"",error_code:r,error_msg:t.details},c.logError(e),e.display_msg=n,c.trigger(g.Player.Error,e))},a=function(){c._liveErrorHandle&&clearTimeout(c._liveErrorHandle),u.stopLoad(),c.trigger(g.Player.LiveStreamStop),c._liveErrorHandle=setTimeout(o,500)},c._options&&c._options.isLive?l?a():c._hls2?t.fatal&&a():(s=c._options).liveRetry>c._liveRetryCount?(0==c._liveRetryCount&&c.trigger(g.Player.OnM3u8Retry),l=s.liveRetryInterval+s.liveRetryStep*c._liveRetryCount,c._liveRetryCount++,c.trigger(g.Private.H5_Loading_Show),setTimeout(function(){i&&c._loadByUrlInner(c._options.source,0,!0)},1e3*l)):a():c._reloadForVod()||o())})})}},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/hls/hlsparse":39,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../base/event/eventtype":70}],103:[function(e,t,r){var i=e("../base/player"),n=e("./hlsinjector"),o=i.extend({init:function(e,t){t._native=!1,n.inject(this,o,i,t),i.call(this,e,t)}});t.exports=o},{"../base/player":91,"./hlsinjector":102}],104:[function(e,t,r){var l="undefined"==typeof Promise?e("es6-promise").Promise:Promise,c=e("../../lib/io"),u=e("../../config"),p=e("../../lib/constants"),d=e("../../lang/index"),h=e("../base/event/eventtype"),i=e("../../lib/ua");function f(e){var t=this._options;t.rtsFallbackSource&&window.Aliplayer?(this.trigger(h.Player.RtsFallback,{reason:e,fallbackUrl:t.rtsFallbackSource}),this.loadByUrl(t.rtsFallbackSource)):(this.trigger(h.Player.Error,e),this.logError(e))}function y(e){var n=this,t=(this.trigger(h.Private.H5_Loading_Show),this.trigger(h.Private.Play_Btn_Hide),new o(n,e));return n._rts.subscribe(n._options.source,{mediaTimeout:n._options.rtsLoadDataTimeout}).then(function(e){return n._retryTimer&&(clearTimeout(n._retryTimer),n._retryTimer=null),t.preProcess(),n.tag.srcObject=null,e.play(n.tag),!0}).catch(function(e){var t=null,r=null;switch(Number(e.errorCode)){case 10101:t=p.ErrorCode.RtsSignalError,r=d.get("Rts_Err_Http_Signal_Error");break;case 10114:t=p.ErrorCode.RtsCreateOfferError,r=d.get("Rts_Err_Create_Offer_Error");break;case 10202:t=p.ErrorCode.RtsPlayUrlError,r=d.get("Rts_Err_Play_Url_Error");break;case 10203:t=p.ErrorCode.RtsSubscribeNonthing,r=d.get("Rts_Err_Subscribe_Nonthing");break;case 10205:var i=null==(i=e.extraInfo)?void 0:i.response;if(403===(null==i?void 0:i.status)){i=i.headers["x-tengine-error"];if(i&&-1<p.RegionBlockMessages.indexOf(i)){t=p.ErrorCode.RegionBlock,r=d.get("Error_Region_Block_Text");break}}t=p.ErrorCode.RtsHttpRequestFaild,r=d.get("Rts_Err_Http_Request_Failed");break;case 10206:t=p.ErrorCode.RtsHttpAnswerFaild,r=d.get("Rts_Err_Http_Answer_Failed")}return f.call(n,{error_code:t,error_msg:r}),!1})}function _(){this._noDataTimer&&(clearTimeout(this._noDataTimer),this._noDataTimer=null)}t.exports.inject=function(e,t,r,i,n,o){function a(e,t){var r,i,n;_.call(this),this._retryTimer||(e=e||p.ErrorCode.RtsPlayFailedError,t=t||d.get("Rts_Err_Play_Failed")+", "+this._options.rtsLoadDataTimeout*(this._options.liveRetry+1)+d.get("Rts_Err_No_Data_For"),(i=(r=this)._options)?i.liveRetry>r._liveRetryCount?(0==r._liveRetryCount&&r.trigger(h.Player.OnM3u8Retry),n=Number(i.liveRetryInterval||0)+Number(i.liveRetryStep*r._liveRetryCount||0),r._liveRetryCount++,r.stop(),setTimeout(function(){r.trigger(h.Private.H5_Loading_Show),r.trigger(h.Private.Play_Btn_Hide)},50),r._retryTimer=setTimeout(function(){r.trigger(h.Private.Retry,{type:"rts",source:i.source}),y.call(r,!0)},1e3*n)):(r._retryTimer&&clearTimeout(r._retryTimer),r._liveErrorHandle&&clearTimeout(r._liveErrorHandle),r.stop(),r._liveRetryCount=0,r.trigger(h.Player.LiveStreamStop),r._liveErrorHandle=setTimeout(s.call(this,e,t),500)):console.warn("no options!"))}function s(e,t){var r=this;r.pause(),setTimeout(function(){r.trigger(h.Private.Play_Btn_Hide)}),r.checkOnline()&&f.call(this,{error_code:e,error_msg:t})}e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,t.prototype._checkRtsReady=function(){if(null==e._rts)throw new Error("please invoke this method after ready event")},e._isRts=!0,e._rts=null,e._isLoadedRts=!1,e._liveErrorHandle=null,e._retryTimer=null,e._noDataTimer=null,e.bind_rtsPlayEventHandler=null,e.bind_rtsErrorEventHandler=null,t.prototype.play=function(e){this._checkRtsReady(),this._isManualPlay=e||!1;var t=this;return t.trigger(h.Private.Cover_Hide),t.trigger(h.Private.Play_Btn_Hide),y.call(t).then(function(e){e&&t._startPlay()}),this},t.prototype.seek=function(e){},t.prototype.setSpeed=function(e){},t.prototype.pause=function(e){return this._checkRtsReady(),this._superPt.pause.call(this,!0),this},t.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyRts(),this._superPt,this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null),this._retryTimer&&(clearTimeout(this._retryTimer),this._retryTimer=null),_.call(this))},t.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("onPlayEvent",this.bind_rtsPlayEventHandler)),this._rts=null},t.prototype.initPlay=function(e){function t(i,t){var r=!i._rts;i._destroyRts(),i._rts=new AliRTS.createClient({customReporter:function(e){if(126===Number(e.msgid)){var t={};try{t=JSON.parse(e.args)}catch(e){t={}}t.tcid&&i._rts&&(i._rts.traceid=t.tcid)}}}),i._checkRtsSupport(function(e){!function(e){var t=this._rtsPlayEventHandler.bind(this),r=this._rtsErrorEventHandler.bind(this);this.bind_rtsPlayEventHandler=t,this.bind_rtsErrorEventHandler=r,e.on("onError",r),e.on("onPlayEvent",t)}.call(i,i._rts),i._options.autoplay?y.call(i).then(function(e){e&&i._initPlayBehavior(t)}):i._initPlayBehavior(t),r&&i._executeReadyCallback()},function(e){console.log("[RTS isSupport error]",e);var t=null,r=null;switch(Number(e.errorCode)){case 10110:t=p.ErrorCode.RtsNotSupportWebRtc,r=d.get("Rts_Err_Not_Support_Webrtc");break;case 10111:t=p.ErrorCode.RtsBrowserNotSupport,r=d.get("Rts_Err_Browser_Not_Support");break;case 10112:t=p.ErrorCode.RtsBrowserVersionTooLow,r=d.get("Rts_Err_Browser_Version_Too_Low");break;case 10113:t=p.ErrorCode.RtsNotSupportH264,r=d.get("Rts_Err_Not_Support_H264");break;case 10114:t=p.ErrorCode.RtsCreateOfferError,r=d.get("Rts_Err_Create_Offer_Error")}return f.call(i,{error_code:t,error_msg:r}),!1})}this._isLoadedRts?t(this,e):(this.trigger(h.Private.H5_Loading_Show),function(e,t){var r="",i=this._options,r="https://g.alicdn.com/CodeBaseOne/H5RTSSdk/"+(i.rtsVersion||u.rtsVersion)+"/aliyun-rts-sdk.js",n=(i.rtsSdkUrl&&(r=i.rtsSdkUrl),this);c.loadJS(r,function(){e.apply(n)})}.call(this,function(){this._isLoadedRts=!0,t(this,e)},this._options.debug))},t.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?l.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then(function(e){var t=e[0],r=e[1],e=e[2];return{rtt:t.rtt,bytesReceived:t.bytesReceived,framesDecoded:r.framesDecoded,packetsLost:(r.packetsLost||0)+(e.packetsLost||0),packetsReceived:(r.packetsReceived||0)+(e.packetsReceived||0),timestamp:t.timestamp||Date.now()}}).catch(function(e){return console.log("ERR in RTS getstats: ",e),{}}):l.resolve()},t.prototype._rtsPlayEventHandler=function(e){var t="canplay",r="waiting",i="playing",n="ended",o="timeout";e.event===t?_.call(this):e.event!==r&&(e.event===i?_.call(this):e.event!==o&&e.event!==n||a.call(this))},t.prototype._checkRtsSupport=function(e,t){this._options.skipRtsSupportCheck?e():this._rts.isSupport({isReceiveVideo:!0}).then(e).catch(t)},t.prototype._rtsErrorEventHandler=function(e){console.log("RTS Error:",e);var t,r;switch(Number(e.errorCode)){case 10102:a.call(this);break;case 12e3:t=p.ErrorCode.RtsPeerConnectionUnknown,r=d.get("Rts_Err_PeerConnection_Unknown"),s.call(this,t,r)}}};var o=function(){function e(e,t){(this.isRetry=t)&&(this.isApple=i.IS_IOS||i.IS_SAFARI,this.player=e)}return e.prototype.preProcess=function(){var e,t,r;this.isRetry&&this.isApple&&(e=this.player.getVolume(),t=this.player.muted(),e)&&!t&&((r=this.player.tag).volume=0,this.player.one("canplay",function(){r.volume=e}))},e}()},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"../../lib/ua":49,"../base/event/eventtype":70,"es6-promise":8}],105:[function(e,t,r){var i=e("../base/player"),n=e("./rtsinjector"),o=i.extend({init:function(e,t){t.isLive&&(t._native=!1,n.inject(this,o,i,t),i.call(this,e,t))}});t.exports=o},{"../base/player":91,"./rtsinjector":104}],106:[function(e,t,r){var i=e("../../lib/constants"),e=e("../../lib/oo").extend({init:function(e){this.player=e,this.tickhandle=null}});e.prototype.tick=function(e,t){var r=this;this.tickhandle=setTimeout(function(){r.player&&r.player.trigger(i.AuthKeyExpiredEvent),t&&t()},1e3*e)},e.prototype.clearTick=function(e){this.tickhandle&&clearTimeout(this.tickhandle)},t.exports=e},{"../../lib/constants":28,"../../lib/oo":43}],107:[function(e,t,r){function s(e,t,r){var i=u.randomUUID(),n="https://mts."+e.domainRegion+".aliyuncs.com/?",i={AccessKeyId:e.accessId,Action:"GetLicense",MediaId:e.vid,LicenseUrl:n,data:e.data,SecurityToken:e.stsToken,Format:"JSON",Type:e.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:i};e.header&&(i.Header=e.header),n+="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(i,e.accessSecret,"POST")),e=u.makeUTF8sort(i,"=","&"),o.post(n,e,function(e){e?(e=JSON.parse(e),t&&(e=e.License,t(e))):r&&r(a.createError("MPS\u83b7\u53d6License\u5931\u8d25"))},function(e){if(r){var t={Code:"",Message:h.get("Error_MTS_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}r({Code:c.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}})}var o=e("../../lib/io"),l=(e("../../lib/ua"),e("../../lib/bufferbase64")),c=e("../../lib/constants"),u=e("./signature"),a=e("./util"),p=e("../../lib/url"),d=e("../../lib/playerutil"),h=e("../../lang/index");function f(e){window.console.error("The license request failed.")}function y(e){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",e)}function _(e){window.console.log("Decryption key was added to session.")}function g(e,t,r){r.addEventListener(e,function(){t(arguments[0])},!1)}t.exports.requestLicenseKey=function(e){var a=e;return a._options.vid&&(a.__vid=a._options.vid),function(e,t){var r,i,n=a._options,o=a._getDRMEncryptItem();o&&(r={vid:a.__vid,accessId:n.accId,accessSecret:n.accSecret,stsToken:n.stsToken,domainRegion:n.domainRegion,authInfo:n.authInfo,encryptionType:o.encryptionType},o.encryptionType==c.EncryptionType.Widevine?r.data=l.encode(e.message):o.encryptionType==c.EncryptionType.PlayReady&&(n=l.unpackPlayReady(e.message),r.data=n.changange,n.header)&&(r.header=JSON.stringify(n.header)),console.log(r.data),e=a.__licenseKeys,i=a.__vid+o.Url,e&&e[i],s(r,function(e){a.__licenseKeys||(a.__licenseKeys={}),10<r.data.length&&(a.__licenseKeys[i]=e);e=l.decode(e);t(e)},function(e){e={mediaId:a.__vid,error_code:e.Code,error_msg:e.Message};a.logError(e),a.trigger("error",e)}))}},t.exports.loadCertificate=function(e,t){var r,i,n,o=new XMLHttpRequest,a=(o.addEventListener("load",function(e,t){t=t.target;try{r=this._options.isLive?JSON.parse(t.response).Response.B64ServCert:JSON.parse(JSON.parse(t.response).DRMCertInfo).b64ServCert}catch(e){console.log(e)}var t=u.base64DecodeUint8Array(r),r=function(e,t){var r=t.target,t=t.initData,i=u.arrayToString(t).split("skd://")[1].split("?")[0],n=u.stringToArray(i);t=function(e,t,r){"string"==typeof t&&(t=stringToArray(t));var i=0,n=new ArrayBuffer(e.byteLength+4+t.byteLength+4+r.byteLength),o=new DataView(n),e=(new Uint8Array(n,0,e.byteLength).set(e),i+=e.byteLength,o.setUint32(i,t.byteLength,!0),i+=4,new Uint16Array(n,i,t.length));return e.set(t),i+=e.byteLength,o.setUint32(i,r.byteLength,!0),i+=4,new Uint8Array(n,i,r.byteLength).set(r),new Uint8Array(n,0,n.byteLength)}(t,n,e),r.webkitKeys||(function(){{if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"}}(),r.webkitSetMediaKeys(new WebKitMediaKeys(keySystem)));if(!r.webkitKeys)throw"Could not create MediaKeys";n=r.webkitKeys.createSession("video/mp4",t);if(!n)throw"Could not create key session";n.contentId=i,g("webkitkeymessage",function(e){var t=this,r=e.target,i=e.message,n=new XMLHttpRequest,e=(e.sessionId,n.responseType="text",n.session=r,n.addEventListener("load",function(e){e=e.target;t=this._options.isLive?JSON.parse(e.response).Response.B64License:JSON.parse(JSON.parse(e.response).License).b64License;var t=u.base64DecodeUint8Array(t),t=u.Uint8ArrayToString(t);"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));t=u.base64DecodeUint8Array(t);e.session.update(t)}.bind(this),!1),n.addEventListener("error",f,!1),btoa("spc="+u.base64EncodeUint8Array(i)+"&assetId="+encodeURIComponent(r.contentId))),o={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:u.ISODateString(new Date),SignatureNonce:u.randomUUID(),AccessKeyId:t._options.accessKeyId,SecurityToken:t._options.securityToken,CertId:t._options.certId};t._options.isLive?(o.RegionId=t._options.region,o.Action="DescribeDRMLicense",o.Version="2016-11-01",o.CdmData=e,o.Type="fairplay",o.Domain=p.parseUrl(t._options.source).hostname):(o.region=t._options.region,o.Action="GetDRMLicense",o.Version="2017-03-21",o.VideoId=t._options.vid,o.CDMData=e,o.DRMType="FairPlay");var a,s,i="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(o,t._options.accessKeySecret,"POST"));r=t._options.isLive?"https://"+d.getLiveHostByRegion(t._options.region)+"/?"+i:"https://vod."+t._options.region+".aliyuncs.com/?"+i;for(s in n.open("POST",r,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o){var l;o.hasOwnProperty(s)&&(l=o[s],a=a?a+"&"+u.AliyunEncodeURI(s)+"="+u.AliyunEncodeURI(l):u.AliyunEncodeURI(s)+"="+u.AliyunEncodeURI(l))}n.send(a)}.bind(this),n),g("webkitkeyadded",_,n),g("webkitkeyerror",y,n)}.bind(this,t),t=(this._fairPlayHandlers.onNeedKey=r,function(e){window.console.error("A video playback error occurred")}.bind(this));this._fairPlayHandlers.onError=t,this.tag.addEventListener("webkitneedkey",r,!1),this.tag.addEventListener("error",t,!1),this.tag.src=this._options.source,e&&e()}.bind(e,t),!1),o.addEventListener("error",function(e){window.console.error("Failed to retrieve the server certificate.")}.bind(e),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:u.ISODateString(new Date),SignatureNonce:u.randomUUID(),AccessKeyId:e._options.accessKeyId,SecurityToken:e._options.securityToken,CertId:e._options.certId}),t=(e._options.isLive?(a.RegionId=e._options.region,a.Action="DescribeDRMCertificate",a.Version="2016-11-01"):(a.region=e._options.region,a.Action="GetDRMCertInfo",a.Version="2017-03-21",a.VideoId=e._options.vid),"Signature="+u.AliyunEncodeURI(u.makeChangeSiga(a,e._options.accessKeySecret,"POST"))),e=e._options.isLive?"https://"+d.getLiveHostByRegion(e._options.region)+"/?"+t:"https://vod."+e._options.region+".aliyuncs.com/?"+t;for(r in o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a)a.hasOwnProperty(r)&&(i=a[r],n=n?n+"&"+u.AliyunEncodeURI(r)+"="+u.AliyunEncodeURI(i):u.AliyunEncodeURI(r)+"="+u.AliyunEncodeURI(i),console.log(i));o.send(n)},t.exports.getRequestUrl=function(e,t){var e={AccessKeyId:t._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:u.ISODateString(new Date),SignatureNonce:u.randomUUID(),CertId:t._options.certId,SecurityToken:t._options.securityToken,RegionId:t._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:e,Domain:p.parseUrl(t._options.source).hostname},r="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(e,t._options.accessKeySecret,"POST"));return{url:"https://"+d.getLiveHostByRegion(t._options.region)+"/?"+r,data:u.makeUTF8sort(e,"=","&"),jsonData:u.makeUTF8sort(e,"=","&","json")}},t.exports.postData=function(e,t){var r=u.randomUUID(),r={AccessKeyId:t._options.accessKeyId,VideoId:t._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:r,CertId:t._options.certId,SecurityToken:t._options.securityToken,region:t._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:e},e="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(r,t._options.accessKeySecret,"POST"));return{url:"https://vod."+t._options.region+".aliyuncs.com/?"+e,data:u.makeUTF8sort(r,"=","&"),jsonData:u.makeUTF8sort(r,"=","&","json")}},t.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),this._fairPlayHandlers={}}},{"../../lang/index":23,"../../lib/bufferbase64":25,"../../lib/constants":28,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/url":50,"./signature":113,"./util":115}],108:[function(e,t,r){var i=e("../../lib/io"),c=e("../../lib/constants"),n=e("../../lib/data"),u=e("./util");t.exports.getDataByAuthInfo=function(e,a,s,l){e={playAuth:e.playAuth,requestId:e.requestId},i.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+function(r){return r.requestId=n.guid(),Object.keys(r).reduce(function(e,t){return e+(e?"&":"?")+t+"="+encodeURIComponent(r[t])},"")}(e),function(e){if(e){e=JSON.parse(e);if(200!==e.httpStatusCode)l&&l({Code:c.ErrorCode.ServerAPIError,Message:e.httpStatusCode+"|"+e.code,sri:e.requestId});else{for(var t=e.data.PlayInfoList,r=[],i=t.length-1;0<=i;--i)"AUTO"===t[i].Definition&&(r=[t.splice(i,1)[0]]);var n,o=null;(o=(o=0===r.length?u.objectPlayerMessageSort(t,a):u.objectPlayerMessageSort(r)).map(function(e){return"m3u8"===e.format&&(e.Url=e.Url+"&_ext=.m3u8"),e}))&&s&&(n=e.data.VideoBase||{},s({videoId:n.VideoId,userId:n.UserId,requestId:e.requestId,urls:o,encryptUrlArr:[],thumbnailUrl:"",coverUrl:n.CoverURL,playInfoAry:t,textTracks:e.data.SubtitlesList}))}}else l&&l(u.createError("\u8f7bSaaS\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25"))},function(e){e&&"string"==typeof e&&-1<e.indexOf("Invalid CORS request")?l&&l({Code:c.ErrorCode.ServerAPIError,Message:e}):l&&l(u.createError("\u8f7bSaaS\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25"))})}},{"../../lib/constants":28,"../../lib/data":30,"../../lib/io":40,"./util":115}],109:[function(e,t,r){var i=e("./saasplayer"),n=e("./light"),o=e("../base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.service=n,this.loadByLightSaas()}});e.prototype.loadByLightSaas=function(e){var t=this._options,r={playAuth:t.mediaAuth,defaultDefinition:t.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:t.mediaAuth}}),this.loadData(r,e)},e.prototype.replayByMediaAuth=function(e){this.trigger(o.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(o.Private.UserTrackReset),this._options.source="",this._options.mediaAuth=e,this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByLightSaas(!0)},t.exports=e},{"../base/event/eventtype":70,"./light":108,"./saasplayer":112}],110:[function(e,t,r){var i=e("../../lib/io"),l=e("../../lib/constants"),s=e("./signature"),c=e("./util"),u=e("../../lang/index"),p=e("../../lib/ua");var d=function(e,r){for(var t="",i=(e.sort(function(e,t){e=parseInt(e.bitrate),t=parseInt(t.bitrate);return"desc"==r?t<e?-1:e<t?1:void 0:e<t?-1:t<e?1:void 0}),e.length),n=0;n<i;n++){var o=e[n],a=l.QualityLevels[o.definition],s="",s=void 0===a?o.bitrate:t==a?a+o.bitrate:a;o.desc=s,t=a}},h=function(e,r){for(var t="",i=(e.sort(function(e,t){e=parseInt(e.width),t=parseInt(t.width);return"desc"==r?t<e?-1:e<t?1:void 0:e<t?-1:t<e?1:void 0}),e.length),n=0;n<i;n++){var o=e[n],a=l.QualityLevels[o.definition],s="",s=void 0===a?"":t==a?a+o.height:a;o.desc=s,t=a}};t.exports.getDataByAuthInfo=function(e,n,o,a){s.returnUTCDate(),s.randomUUID();var t=s.randomUUID(),t={AccessKeyId:e.accessId,Action:"PlayInfo",MediaId:e.vid,Formats:e.format,AuthInfo:e.authInfo,AuthTimeout:e.authTimeout||l.AuthKeyExpired,IncludeSnapshotList:e.includeSnapshotList,Rand:e.rand,SecurityToken:e.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:p.IS_CHROME?"Chrome":p.IS_EDGE?"Edge":p.IS_IE11?"IE":p.IS_SAFARI?"Safari":p.IS_FIREFOX?"Firefox":"",SignatureNonce:t},t=(e.hlsUriToken&&(e.MtsHlsUriToken=e.hlsUriToken),e.playConfig&&(t.PlayConfig=JSON.stringify(e.playConfig)),s.makeUTF8sort(t,"=","&")+"&Signature="+s.AliyunEncodeURI(s.makeChangeSiga(t,e.accessSecret))),e="https://mts."+e.domainRegion+".aliyuncs.com/?"+t;i.get(e,function(e){var t,r,i;e?(t=(e=JSON.parse(e)).PlayInfoList.PlayInfo,r="",(i=e.SnapshotList?e.SnapshotList.Snapshot:[])&&0<i.length&&(r=i[0].Url),i=function(e,t){for(var r=[],i=[],n=[],o=[],a=e.length-1;0<=a;a--){var s=e[a];("mp4"==s.format?i:"mp3"==s.format?n:"m3u8"==s.format?r:o).push(s)}return 0<n.length?(d(n,t),n):0<i.length?(h(i,t),i):0<r.length?(h(r,t),r):(h(o,t),o)}(t,n),o&&o({requestId:e.RequestId,urls:i,thumbnailUrl:r})):a&&a(c.createError("MPS\u83b7\u53d6\u53d6\u6570\u5931\u8d25"))},function(e){if(a){var t={Code:"",Message:u.get("Error_MTS_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}a({Code:l.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}})}},{"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"../../lib/ua":49,"./signature":113,"./util":115}],111:[function(e,t,r){var i=e("./saasplayer"),n=(e("../../lib/constants"),e("./mts")),e=i.extend({init:function(e,t){i.call(this,e,t),this.service=n,this.loadByMts()}});e.prototype.loadByMts=function(e){var t={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(t,e)},e.prototype.replayByVidAndAuthInfo=function(e,t,r,i,n,o){this.trigger("error_hide"),this._options.source="",this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.reloadNewVideoInfo(e,t,r,i,n,o)},e.prototype.reloadNewVideoInfo=function(e,t,r,i,n,o){if(this.trigger("error_hide"),this._options.source="",e&&(this._options.vid=e,this._options.accId=t,this._options.accessSecret=r,this._options.stsToken=i,this._options.domainRegion=o,this._options.authInfo=n),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("\u9700\u8981\u63d0\u4f9bvid\u3001accId\u3001accessSecret\u3001stsToken\u3001domainRegion\u548cauthInfo\u53c2\u6570");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:e}}),this.loadByMts(!0)},t.exports=e},{"../../lib/constants":28,"./mts":110,"./saasplayer":112}],112:[function(e,t,r){var d=e("../base/player"),i=e("../audio/audioplayer"),o=(e("../../lib/event"),e("../../lib/io")),h=e("../../lib/constants"),n=e("./signature"),a=e("./authkeyexpiredhandle"),f=e("../hls/hlsinjector"),y=e("../flv/flvinjector"),_=e("../drm/drminjector"),g=(e("../../lib/cookie"),e("../../lang/index")),v=e("../../lib/ua"),s=e("../../config"),m=e("../../lib/playerutil"),S=e("../base/event/eventtype"),l=e("../../protected/anti-injector-protected"),b=d.extend({init:function(e,t){l(t,this),this._authKeyExpiredHandle=new a(this),d.prototype._videoCreateEl||(d.prototype._videoCreateEl=d.prototype.createEl),"mp3"==t.format?(t.height="auto",t.mediaType="audio",d.prototype.createEl=i.prototype.createEl,i.call(this,e,t),b.prototype.play=d.prototype.play,b.prototype.pause=d.prototype.pause,b.prototype.initPlay=d.prototype.initPlay,b.prototype.replay=d.prototype.replay,b.prototype.stop=d.prototype.stop,b.prototype.seek=d.prototype.seek):(d.prototype.createEl=d.prototype._videoCreateEl,t._native=!1,d.call(this,e,t))}});b.prototype.loadData=function(e,t){var r,i,n;"undefined"!=typeof _sce_r_skjhfnck||""!=e.format&&"m3u8"!=e.format&&1!=this._options.encryptType?this._loadData(e,t):(r="aliplayer-vod-min.js",i="",i=s.domain?"https://"+s.domain+"/de/prismplayer/"+s.h5Version+"/hls/"+r:"/build/hls/"+r,n=this,o.loadJS(i,function(){n._loadData(e,t)}))},b.prototype._loadData=function(s,l){var c,u=(new Date).getTime(),p=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),""!=s.format&&"m3u8"!=s.format||1!=this._options.encryptType?s.rand=n.randomUUID():(c=_sce_r_skjhfnck(),s.rand=_sce_lgtcaygl(c,p._vdnct6f)),this._options.thumbnailUrl&&(s.thumbnailUrl=this._options.thumbnailUrl),this.trigger(S.Private.H5_Loading_Show),this.service.getDataByAuthInfo(s,this._options.qualitySort,function(e){if(p.trigger(S.Private.PlayInfoLoaded,e),e.userId&&(p._options.from=e.userId),e.videoId&&p._monitor&&p._monitor.updateLightSaasVideoId(e.videoId),e.textTracks&&e.textTracks.length&&(t=m.unqiueTextTracks(e.textTracks),p.trigger(S.Private.TextTrackFounded,{from:"saas",textTracks:t})),e.urls&&0==e.urls.length)p._mtsError_message(p,{Code:h.ErrorCode.URLsIsEmpty,Message:g.get("Error_Vod_URL_Is_Empty_Text")+(s.format?"(format:"+s.format+")":"")},"");else{p.log("COMPLETEFETCHDATA",{cost:(new Date).getTime()-u,mi:JSON.stringify(function(e){for(var t=[],r=0;r<e.length;r++)t.push({width:e[r].width,height:e[r].height,definition:e[r].definition,format:e[r].format,encryptionType:e[r].encryptionType,duration:e[r].duration});return t}(e.urls))}),p._urls=e.urls,p._currentPlayIndex=m.findSelectedStreamLevel(p._urls,s.defaultDefinition);var t=(r=e.urls[p._currentPlayIndex]).Url;if(p._vodDuration=r.duration||0,p._options.source=t,p.encType="",p.trigger(S.Private.PREPARE,r.definition),p.UI.cover&&e.coverUrl&&!p._options.cover&&p.setCover(e.coverUrl),m.isHls(t))if(e&&e.playInfoAry&&0<e.playInfoAry.length&&"Widevine-FairPlay"==e.playInfoAry[0].EncryptType)_.inject(p,b,d.prototype,p._options);else{if(e.encryptUrlArr&&0<e.encryptUrlArr.length)for(var r,i,n=[],o=0;o<e.encryptUrlArr.length;++o)(r=e.encryptUrlArr[o]).encryptionType===h.EncryptionType.Private&&(i=_sce_dlgtqred(c,r.rand,r.plaintext),n.push({url:r.Url,secData:i}));else if(ecData="",r.encryptionType==h.EncryptionType.Private){p.encType=r.encryptionType;var a=m.checkSecuritSupport();if(a)return void p._mtsError_message(p,{Code:h.ErrorCode.EncrptyVideoNotSupport,Message:a,display_msg:a},"");n=_sce_dlgtqred(c,r.rand,r.plaintext)}p._hls&&(p._hls.destroy(),p._hls=null),f.inject(p,b,d,p._options,n)}else m.isFlv(t)?y.inject(p,b,d,p._options):m.isDash(t)?(console.log("isDash"),_.inject(p,b,d,p._options)):p._player._executeReadyCallback();p._authKeyExpiredHandle.tick(h.AuthKeyRefreshExpired),p.trigger(S.Private.SourceLoaded,r),p.initPlay(l),p.trigger(S.Private.ChangeURL,{from:"saas"}),e.thumbnailUrl&&p._thumbnailService.get(e.thumbnailUrl);a=p._player._isFlv,t=-1<p._player.getOptions().source.indexOf("mp4");1==p._player.encType||a||t||(v.IS_IOS||v.IS_MAC_SAFARI||v.IS_X5||v.IS_EDGE)&&(p._player._executeReadyCallback(),p._urls.length)&&p.trigger(S.Private.SourceLoaded,r)}},function(e){p._mtsError_message(p,e,"")})},b.prototype._changeStream=function(e,t){this._urls.length>e&&(this._loadByUrlInner(this._urls[e].Url,this.getCurrentTime(),!0),this._currentPlayIndex=e,this.trigger(S.Private.QualityChange,t||g.get("Quality_Change_Fail_Switch_Text")))},b.prototype._getLowerQualityLevel=function(){if(0!=this._urls.length&&-1!=this._currentPlayIndex)if("asc"==this.options().qualitySort){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1};return""},b.prototype._mtsError_message=function(e,t,r){e._serverRequestId=t.sri,e.trigger(S.Private.H5_Loading_Hide);var i=t.Code||"OTHER_ERR_CODE",n=t.Message||"OTHER_ERR_MSG",o=(h.ErrorCode.ServerAPIError,t.display_msg||""),a=(-1<n.indexOf("InvalidParameter.Rand")||-1<n.indexOf('"Rand" is not valid.')?(h.ErrorCode.EncrptyVideoNotSupport,o=g.get("Error_Not_Support_encrypt_Text")):-1<n.indexOf("SecurityToken.Expired")?(h.ErrorCode.AuthKeyExpired,o=g.get("Error_Playauth_Expired_Text")):-1<n.indexOf("InvalidVideo.NoneStream")?(h.ErrorCode.URLsIsEmpty,o=g.get("Error_Fetch_NotStream")+"("+e._options.format+"|"+e._options.definition+")"):-1<n.indexOf("DataNotFound")&&(h.ErrorCode.MediaNotFound,o=g.get("Error_Fetch_Media_Not_Found")),e._options.vid||""),a=(e._options.from,{mediaId:a,mediaAuth:e._options.mediaAuth||"",error_code:i,error_msg:n});t.sri&&(a.sri=t.sri),e.logError(a),a.display_msg=(o||g.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+n,e.trigger("error",a),console.log("PrismPlayer Error: "+r+"! error_msg :"+n+";")},t.exports=b},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/cookie":29,"../../lib/event":33,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../protected/anti-injector-protected":129,"../audio/audioplayer":68,"../base/event/eventtype":70,"../base/player":91,"../drm/drminjector":97,"../flv/flvinjector":100,"../hls/hlsinjector":102,"./authkeyexpiredhandle":106,"./signature":113}],113:[function(e,u,t){var n=e("crypto-js/hmac-sha1"),o=e("crypto-js/enc-base64"),r=e("crypto-js/enc-utf8");u.exports.randomUUID=function(){for(var e=[],t="0123456789abcdef",r=0;r<36;r++)e[r]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},u.exports.returnUTCDate=function(){var e=new Date,t=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate(),n=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),e=e.getUTCMilliseconds();return Date.UTC(t,r,i,n,o,a,e)},u.exports.AliyunEncodeURI=function(e){e=encodeURIComponent(e);return e=(e=(e=e.replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},u.exports.makesort=function(e,t,r){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var i=[];for(s in e)i.push(s);for(var n=i.sort(),o="",a=n.length,s=0;s<a;s++)""==o?o=n[s]+t+e[n[s]]:o+=r+n[s]+t+e[n[s]];return o},u.exports.makeUTF8sort=function(e,t,r){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var i=[];for(s in e)i.push(s);for(var n=i.sort(),o="",a=n.length,s=0;s<a;s++){var l=u.exports.AliyunEncodeURI(n[s]),c=u.exports.AliyunEncodeURI(e[n[s]]);""==o?o=l+t+c:o+=r+l+t+c}return o},u.exports.makeChangeSiga=function(e,t,r){if(e)return o.stringify(n((r=r||"GET")+"&"+u.exports.AliyunEncodeURI("/")+"&"+u.exports.AliyunEncodeURI(u.exports.makeUTF8sort(e,"=","&")),t+"&"));throw new Error("PrismPlayer Error: vid should not be null!")},u.exports.ISODateString=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"},u.exports.encPlayAuth=function(e){if(e=r.stringify(o.parse(e)))return JSON.parse(e);throw new Error("playuth\u53c2\u6570\u89e3\u6790\u4e3a\u7a7a")},u.exports.encRsa=function(){},u.exports.stringToArray=function(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),i=0,n=e.length;i<n;i++)r[i]=e.charCodeAt(i);return r},u.exports.Uint8ArrayToString=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},u.exports.arrayToString=function(e){e=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,e)},u.exports.base64DecodeUint8Array=function(e){var t=window.atob(e),r=t.length,n=new Uint8Array(new ArrayBuffer(r));for(i=0;i<r;i++)n[i]=t.charCodeAt(i);return n},u.exports.base64EncodeUint8Array=function(e){for(var t,r,i,n,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;c<e.length;)i=(t=e[c++])>>2,n=(3&t)<<4|(t=c<e.length?e[c++]:Number.NaN)>>4,o=(15&t)<<2|(r=c<e.length?e[c++]:Number.NaN)>>6,a=63&r,isNaN(t)?o=a=64:isNaN(r)&&(a=64),l+=s.charAt(i)+s.charAt(n)+s.charAt(o)+s.charAt(a);return l}},{"crypto-js/enc-base64":3,"crypto-js/enc-utf8":4,"crypto-js/hmac-sha1":5}],114:[function(e,t,r){var o=e("../../lib/io"),a=e("../../lib/constants"),s=e("./signature"),l=e("./util"),c=e("../../lang/index");t.exports.getPlayAuth=function(e,t,r,i){s.randomUUID();var n=s.randomUUID(),n={AccessKeyId:e.accessKeyId,Action:"GetVideoPlayAuth",VideoId:e.vid,AuthTimeout:a.AuthInfoExpired,SecurityToken:e.securityToken,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:n},n=s.makeUTF8sort(n,"=","&")+"&Signature="+s.AliyunEncodeURI(s.makeChangeSiga(n,e.accessKeySecret)),e="https://vod."+e.region+".aliyuncs.com/?"+n;o.get(e,function(e){e?(e=JSON.parse(e),t&&t(e.PlayAuth)):r&&r(l.createError("\u83b7\u53d6\u89c6\u9891\u64ad\u653e\u51ed\u8bc1\u5931\u8d25"))},function(e){if(r){var t={Code:"",Message:c.get("Fetch_Playauth_Error")};try{(t=JSON.parse(e)).Code}catch(e){}r({Code:a.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId,display_msg:c.get("Fetch_Playauth_Error",i)})}})}},{"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"./signature":113,"./util":115}],115:[function(e,c,t){var r=e("../../lib/constants");c.exports.createError=function(e,t){return{requestId:"",code:t||"",message:e}},c.exports.getItem=function(e){var t={};return t.width=e.Width,t.height=e.Height,t.definition=e.Definition,t.Url=e.PlayURL,t.format=e.Format,t.desc=r.QualityLevels[t.definition],t.encryptionType=r.VodEncryptionType[e.EncryptType],t.plaintext=e.Plaintext,t.rand=e.Rand,t.encrypt=e.Encrypt,t.duration=e.Duration,t.bitrate=e.Bitrate,t},c.exports.objectPlayerMessageSort=function(e,t){for(var r=[],i=[],n=[],o=[],a=e.length-1;0<=a;a--){var s=e[a],s=c.exports.getItem(s);("mp4"==s.format?i:"mp3"==s.format?n:"m3u8"==s.format?r:o).push(s)}var l=[],l=0<n.length?n:0<i.length?i:0<r.length?r:o;return"asc"==t&&l.reverse(),l}},{"../../lib/constants":28}],116:[function(e,t,r){var i=e("../../lib/io"),n=e("../../lib/constants"),o=e("./signature"),p=e("./util"),a=e("../../config"),d=e("../../lang/index");t.exports.getDataByAuthInfo=function(s,l,c,u){o.randomUUID();var e=o.randomUUID(),e={AccessKeyId:s.accessId,Action:"GetPlayInfo",VideoId:s.vid,Formats:s.format,AuthTimeout:s.authTimeout||n.AuthKeyExpired,Rand:s.rand,SecurityToken:s.stsToken,StreamType:s.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:e,PlayerVersion:a.h5Version,Channel:"HTML5"},e=("AUTO"===s.definition?e.ResultType="Multiple":s.definition&&(e.Definition=s.definition),s.authInfo&&(e.AuthInfo=s.authInfo),s.outputType&&(e.OutputType=s.outputType),s.playConfig&&(e.PlayConfig=JSON.stringify(s.playConfig)),s.reAuthInfo&&(e.ReAuthInfo=JSON.stringify(s.reAuthInfo)),o.makeUTF8sort(e,"=","&")+"&Signature="+o.AliyunEncodeURI(o.makeChangeSiga(e,s.accessSecret))),e="https://vod."+s.domainRegion+".aliyuncs.com/?"+e;i.get(e,function(e){if(e){for(var e=JSON.parse(e),t="",r=e.VideoBase.ThumbnailList,i=(r&&r.Thumbnail&&0<r.Thumbnail.length?t=r.Thumbnail[0].URL:s.thumbnailUrl&&(t=String(s.thumbnailUrl)),e.PlayInfoList.PlayInfo),n=[],o=[],a=i.length-1;0<=a;--a)"AUTO"===i[a].Definition?n=[i.splice(a,1)[0]]:1===i[a].Encrypt&&o.push(i[a]);r=null,o=0===n.length?(r=p.objectPlayerMessageSort(i,l),[]):(r=p.objectPlayerMessageSort(n),p.objectPlayerMessageSort(o));r&&c&&c({requestId:e.RequestId,urls:r,encryptUrlArr:o,thumbnailUrl:t,coverUrl:e.VideoBase.CoverURL,playInfoAry:i})}else u&&u(p.createError("\u70b9\u64ad\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25"))},function(e){if(u){var t={Code:"",Message:d.get("Error_Vod_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}u({Code:n.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}})}},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"./signature":113,"./util":115}],117:[function(e,t,r){var i=e("./saasplayer"),c=e("../../lib/constants"),n=e("./vod"),u=e("./signature"),o=(e("./authkeyexpiredhandle"),e("./ststoken"),e("../../lib/io")),a=e("../../config"),e=i.extend({init:function(e,t){i.call(this,e,t),this.service=n,this.loadByVod()}});e.prototype.loadByVod=function(e){var t,r,i;"undefined"!=typeof _pa_n4lto7xi?this._loadByVod(e):(t="aliplayer-vod-p-min.js",r="",r=a.domain?"https://"+a.domain+"/de/prismplayer/"+a.h5Version+"/hls/"+t:"/build/hls/"+t,i=this,o.loadJS(r,function(){i._loadByVod(e)}))},e.prototype._loadByVod=function(e){var t="",r="",i="",n="",o="";if(this._options.accessKeyId&&this._options.accessKeySecret)t=this._options.accessKeyId,r=this._options.accessKeySecret,i=this._options.securityToken,n=this._options.region,this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var a=_pa_n4lto7xi(this._options.playauth),s=(this._options.playauth!==a&&(this._vdnct6f=!0),u.encPlayAuth(a)),t=s.AccessKeyId,r=s.AccessKeySecret,i=s.SecurityToken,n=s.Region,o=s.AuthInfo}catch(e){console.log("e",e);var l={Code:c.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth\u89e3\u6790\u9519\u8bef"};return void this._mtsError_message(this,l,a)}this._options.from=s.CustomerId||"",this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(t,r,i,n,o,e)},e.prototype.replayByVidAndPlayAuth=function(e,t){this.trigger("error_hide"),this._options.source="",this._options.vid=e,this._options.playauth=t,this._isError=!1,this._duration=0,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByVod(!0)},e.prototype.updateSourcesByVidAndPlayAuth=function(e,t){var r,i,n;"undefined"!=typeof _pa_n4lto7xi?this._updateSourcesByVidAndPlayAuth(e,t):(r="aliplayer-vod-p-min.js",i="",i=a.domain?"https://"+a.domain+"/de/prismplayer/"+a.h5Version+"/hls/"+r:"/build/hls/"+r,n=this,o.loadJS(i,function(){n._updateSourcesByVidAndPlayAuth(e,t)}))},e.prototype._updateSourcesByVidAndPlayAuth=function(e,t){if(e!=this._options.vid)console.log("\u4e0d\u80fd\u66f4\u65b0\u5730\u5740\uff0cvid\u548c\u64ad\u653e\u4e2d\u7684\u4e0d\u4e00\u81f4");else{this._options.vid=e,this._options.playauth=t;try{var r=_pa_n4lto7xi(this._options.playauth),i=(this._options.playauth!==r&&(this._vdnct6f=!0),u.encPlayAuth(r))}catch(e){return void console.log("playauth\u89e3\u6790\u9519\u8bef")}var t={vid:e,accessId:i.AccessKeyId,accessSecret:i.AccessKeySecret,stsToken:i.SecurityToken,domainRegion:i.Region,authInfo:i.AuthInfo,playDomain:i.PlayDomain,format:this._options.format,mediaType:this._options.mediaType},n=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(t,this._options.qualitySort,function(e){n._serverRequestId=e.requestId,0!=e.urls.length&&(n._urls=e.urls),n._authKeyExpiredHandle.tick(c.AuthKeyRefreshExpired)},function(e){console.log(e)})}},e.prototype.reloaduserPlayInfoAndVidRequestMts=function(e,t){this.replayByVidAndPlayAuth(e,t,accessSecret)},e.prototype._loadByVodBySTS=function(e,t,r,i,n,o){e={vid:this._options.vid,accessId:e,accessSecret:t,stsToken:r,authInfo:n,domainRegion:i,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo};this.loadData(e,o)},t.exports=e},{"../../config":14,"../../lib/constants":28,"../../lib/io":40,"./authkeyexpiredhandle":106,"./saasplayer":112,"./signature":113,"./ststoken":114,"./vod":116}],118:[function(e,t,r){function i(t){this._player=t,this._video=t.tag;var r=this;this._isCreated=!1,this._canPlayTriggered=!1,this._defaultTrack="",t.on(n.Private.ChangeURL,function(){r._isCreated=!1,r._canPlayTriggered=!1,r._defaultTrack=""}),t.on(n.Player.CanPlay,function(){var e;r._player._drm||r._canPlayTriggered||((e=r._getTracks())&&(r._isCreated=!0,r._player._options.isVBR||r._hls||(t.trigger(n.Player.AudioTrackReady,e),r._notifyDefaultValue(e))),r._canPlayTriggered=!0)}),t.on(n.Player.AudioTrackUpdated,function(e){r._isCreated||(e=r._getTracks(e.paramData.audioTracks))&&(r._isCreated=!0,t.trigger(n.Player.AudioTrackReady,e),r._notifyDefaultValue(e))})}var n=e("../base/event/eventtype");i.prototype._notifyDefaultValue=function(e){!this._defaultTrack&&0<e.length&&(this._defaultTrack=e[0]),this._defaultTrack&&this._player.trigger(n.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text})},i.prototype.support=function(){return!!this._video.audioTracks},i.prototype._getTracks=function(e){if(!this.support()&&!e)return null;for(var t=[],r=(e=!this._video||!this._video.audioTracks||e&&0!=e.length?e:this._video.audioTracks)?e.length:0,i=0;i<r;i++){var n=e[i],o={value:n.id,text:n.label||n.name||n.language};(n.default||n.enabled)&&(this._defaultTrack=o),t.push(o)}return t},i.prototype.switch=function(e){if(this._player._hls)this._player._hls.audioTrack=+e;else for(var t=this._video.audioTracks?this._video.audioTracks.length:0,r=0;r<t;r++){var i=this._video.audioTracks[r];i.id==e?i.enabled=!0:i.enabled=!1}},i.prototype.dispose=function(){this._player=null},t.exports=i},{"../base/event/eventtype":70}],119:[function(e,t,r){function i(e){this._video=e.tag,this._player=e,this._isCreated=!1,this._backupCC="",this.tracks=[],this._defaultTrack="",this._currentValue="",this._switchTimer=null,this._storedTracks=[];var o=this,t=(e.on(a.Player.LevelsLoaded,function(e){if(s.IS_MAC_SAFARI||s.IS_IOS)if(e&&e.paramData&&e.paramData.subtitles&&e.paramData.subtitles.length){for(var t=e.paramData.subtitles||[],r=[],i=0;i<t.length;i++){var n=t[i];n.vttUrl=n.url&&n.url.replace(".m3u8",".vtt"),r.push(n)}o._storedTracks=r}else o._resotreTracks()}),e.on(a.Private.SafariDrmLevelSwitch,function(){o._resotreTracks()}),e.on(a.Private.ChangeURL,function(e){e&&e.paramData&&"saas"===e.paramData.from||(o._disabledTracks(),o._isCreated=!1,o._defaultTrack="",o._backupCC="")}),e.on(a.Private.VttClearTracks,function(){o.switch("off"),o._disabledTracks(),o._isCreated=!1,o._defaultTrack={value:"off",text:"Off"},o.tracks=[o._defaultTrack],e.trigger(a.Private.SelectorGenerateList,{type:"cc"}),e.trigger(a.Private.CCStateChanged,{value:"off",lang:""})}),e.on(a.Player.CanPlay,function(){o._isCreated||(o.tracks=o._getTracks(),e.trigger(a.Player.TextTrackReady,o.tracks),e.trigger(a.Private.CCReset)),o._isCreated&&!o._player._setDefaultCC||!o._defaultTrack||(e.trigger(a.Private.SelectorUpdateList,{type:"cc",text:o._defaultTrack.text}),o.switch(o._defaultTrack.value),o._player._setDefaultCC=!1,o._isCreated=!0)}),s.os.ios&&parseFloat(s.os.version)<=15.1&&n.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),"always"===e.getOptions().controlBarVisibility&&n.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),l.throttle(function(){e._vttBroker&&e._vttBroker.enabled||n.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")},100)),t=(e.on(a.Private.ShowBar,t),l.throttle(function(){e._vttBroker&&e._vttBroker.enabled||n.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")},100));e.on(a.Private.HideBar,t),e.on(a.Private.CCReset,function(){o._updateSelectorList()})}var a=e("../base/event/eventtype"),n=(e("../../lib/event"),e("../../lib/dom")),s=e("../../lib/ua"),c=e("../../lib/cookie"),u=e("../../lib/constants"),l=e("../../ui/component/util");i.prototype._adaptiveCueStype=function(){var e,t=-10;s.IS_SAFARI?(t=-65,(e=this._player.fullscreenService)&&e.getIsFullScreen()&&(t=-95)):s.IS_MOBILE&&(t=-30),n.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+t+"px) !important;}")},i.prototype.close=function(){for(var e=this.getTextTracks(),t=e.length,r=0;r<t;r++){var i=e[r];"expired"!=i.mode&&("showing"==i.mode&&(this._backupCC=i),i.mode="disabled")}this._player.trigger(a.Private.VttHide)},i.prototype.open=function(){var t,r,e;return!this.tracks||this.tracks.length<2||(r=this._backupCC?this._backupCC.language:"",e=this._backupCC?this._backupCC.label:"",this.tracks.forEach(function(e){r===e.value&&(t=!0)}),(r=t?r:e="")||(r=this.tracks[1].value,e=this.tracks[1].text),this.switch(r)),{label:e,language:r}},i.prototype.getCurrentSubtitle=function(){return this._currentValue},i.prototype._getTracks=function(){for(var e=this.getTextTracks(),t=e.length,r=(this._defaultTrack={value:"off",text:"Off"},[this._defaultTrack]),i=c.get(u.SelectedCC),n="",o=!1,a=0;a<t;a++){var s,l=e[a];"expired"==l.mode||"subtitles"!=l.kind&&"captions"!=l.kind||(s={value:l.language,text:l.label},l.default&&(this._defaultTrack=s,o=!0),s.value==i&&(n=s),r.push(s))}return!o&&n&&(this._defaultTrack=n),r},i.prototype._disabledTracks=function(){for(var e=this.getTextTracks(),t=e.length,r=0;r<t;r++)e[r].mode="expired"},i.prototype.switch=function(e){var t=this._player;if(this.close(),"off"!=e)for(var r=this.getTextTracks(),i=r.length,n=0;n<i;n++){var o=r[n];o.language===e&&"expired"!=o.mode&&(r[n].mode="showing",t.trigger(a.Private.VttSwitchTrack,o.language))}else this.close();this._currentValue=e,t.trigger(a.Private.CCChanged,e)},i.prototype.updateUI=function(t){var e="on",r="";r=t?(this.tracks.find(function(e){return e.value===t})||{}).text||"":(e="off","Off"),player.trigger(a.Private.CCChanged,e),player.trigger(a.Private.CCStateChanged,{value:e,lang:r})},i.prototype.dispose=function(){this._player=null,this._switchTimer&&(clearTimeout(this._switchTimer),this._switchTimer=null)},i.prototype._patchSafariTracks=function(){var t=this;if(s.IS_MAC_SAFARI||s.IS_IOS){if(!(this._video&&this._video.textTracks?this._video.textTracks.length:0)){var e=!1;if(e=this._video.textTracks&&this._video.textTracks.length?!0:e)return;for(var r=0;r<this._storedTracks.length;r++){var i=this._storedTracks[r],n=i.vttUrl,o=document.createElement("track");o.src=n,o.kind="subtitles",o.label=i.name,o.srclang=i.lang,this._video.appendChild(o)}}this._switchTimer&&clearTimeout(this._switchTimer),this._switchTimer=setTimeout(function(){var e=t.getCurrentSubtitle();e&&"off"!==e&&t.switch(e)},1e3)}},i.prototype.getTextTracks=function(){var e=this._player,t=e.tag;return e._vttBroker&&e._vttBroker.enabled&&e.getTextTracks?e.getTextTracks()||[]:t&&t.textTracks||[]},i.prototype._updateSelectorList=function(){var e=this._player;this.tracks=this._getTracks(),e.trigger(a.Private.SelectorGenerateList,{type:"cc",value:"Off"})},i.prototype._resotreTracks=function(){this._patchSafariTracks(),this.tracks=this._getTracks(),this._player.trigger(a.Player.TextTrackReady,this.tracks)},t.exports=i},{"../../lib/constants":28,"../../lib/cookie":29,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../ui/component/util":159,"../base/event/eventtype":70}],120:[function(e,t,r){var i=e("../../lib/playerutil");t.exports=[{service:e("./ccservice"),name:"_ccService",condition:!0},{service:e("./audiotrackservice"),name:"_audioTrackService"},{service:e("./qualityservice"),name:"_qualityService"},{service:e("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:e("./liveshiftservice"),name:"_liveshiftService",condition:function(){var e=this.options();return i.isLiveShift(e)}},{service:e("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:e("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":46,"./audiotrackservice":118,"./ccservice":119,"./fullscreenservice":121,"./liveshiftservice":122,"./progressmarkerservice":123,"./qualityservice":124,"./thumbnailservice":125}],121:[function(e,t,r){function i(e){this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=e;var r=this,i=u;this._fullscreenChanged=function(e){var t;null!=r._player&&(e.target||e.srcElement)===(e=r._player.el())&&(t=document[i.fullscreenElement],r.isFullScreen=t===e,(r.isFullScreenChanged=!0)===r.isFullScreen?r._player.trigger(s.Player.RequestFullScreen):r._player.trigger(s.Player.CancelFullScreen))},i&&o.on(document,i.eventName,this._fullscreenChanged)}var a=e("../../lib/ua"),n=e("../../lib/dom"),o=e("../../lib/event"),s=e("../base/event/eventtype"),l=e("../base/x5play"),c=e("../../lang/index"),u=function(){n.createEl("div");var e={},t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],r=!1;if(!(r=a.IS_IOS&&(e.requestFn="webkitEnterFullscreen",e.cancelFn="webkitExitFullscreen",e.fullscreenElement="webkitFullscreenElement",e.eventName="webkitfullscreenchange",e.isFullScreen="webkitDisplayingFullscreen",document[e.requestFn])?!0:r)){for(var i=0;i<5;i++)if(t[i][1]in document){e.requestFn=t[i][0],e.cancelFn=t[i][1],e.fullscreenElement=t[i][2],e.eventName=t[i][4],e.isFullScreen=t[i][6];break}"requestFullscreen"in document?e.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?e.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?e.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?e.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?e.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(e.requestFn="msRequestFullscreen"),"fullscreenchange"in document?e.eventName="fullscreenchange":"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?e.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(e.eventName="MSFullscreenChange"),"fullScreen"in document?e.isFullScreen="fullScreen":"webkitfullScreen"in document?e.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?e.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?e.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?e.isFullScreen="mozFullScreen":"mozfullScreen"in document?e.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(e.isFullScreen="MSFullScreen"),"fullscreenElement"in document?e.fullscreenElement="fullscreenElement":"webkitFullscreenElement"in document?e.fullscreenElement="webkitFullscreenElement":"webkitFullScreenElement"in document?e.fullscreenElement="webkitFullScreenElement":"mozFullScreenElement"in document?e.fullscreenElement="mozFullScreenElement":"msFullscreenElement"in document?e.fullscreenElement="msFullscreenElement":"MSFullscreenElement"in document&&(e.fullscreenElement="MSFullscreenElement")}return e.requestFn?e:null}(),p=(i.prototype.requestFullScreen=function(){if(!l.isAndroidX5()||!this._player.paused()){var e=u,t=this._player.el(),r=this;if(a.IS_IOS){var i=this._player._splayer;if(!i||2!==i.renderType){t=this._player.tag;try{var n=t[e.requestFn]();n&&"function"==typeof n.catch&&n.catch(function(e){console.log(e)}),r._player.trigger(s.Player.RequestFullScreen)}catch(e){console.log(e)}return this}this._player._options.enableMockFullscreen=!0}this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer);r=this;if(e&&!this._player._options.enableMockFullscreen)try{var o=t[e.requestFn]();o&&"function"==typeof o.catch&&o.catch(function(e){console.log(e)}),this._requestFullScreenTimer=setTimeout(function(){r.isFullScreenChanged||(p.apply(r),r._player.trigger(s.Player.RequestFullScreen)),r._requestFullScreenTimer=null},1e3)}catch(e){console.log(e)}else p.apply(r),this._player.trigger(s.Player.RequestFullScreen);return this._player}this._player.trigger(s.Private.Info_Show,c.get("Play_Before_Fullscreen"))},i.prototype.cancelFullScreen=function(){var e=u,t=(this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(e&&!this._player._options.enableMockFullscreen){try{var r=document[e.cancelFn]();r&&"function"==typeof r.catch&&r.catch(function(e){console.log(e)})}catch(e){console.log(e)}t._cancelFullScreenTimer=setTimeout(function(){t.isFullScreenChanged||(d.apply(t),t._player.trigger(s.Player.CancelFullScreen)),t._cancelFullScreenTimer=null},500)}else d.apply(t),this._player.trigger(s.Player.CancelFullScreen);return this._player.tag.paused||this._player.trigger(s.Player.Play),this._player},i.prototype.getIsFullScreen=function(){return this.isFullScreen},i.prototype.dispose=function(){this._player=null,u&&o.off(document,u.eventName,this._fullscreenChanged)},function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",n.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),d=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,n.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};t.exports=i},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../base/event/eventtype":70,"../base/x5play":96}],122:[function(e,t,r){function n(e,t){var r;if(e)return e=new Date(e),r=(t=new Date(t)).valueOf()/1e3-e.valueOf()/1e3,{start:e,end:t,endDisplay:s.extractTime(t),totalTime:r}}function o(e,t){t&&(e.currentTimestamp=t,e.currentTime=s.convertToDate(t),e.currentTimeDisplay=s.extractTime(e.currentTime),e.liveShiftStart=e.liveTimeRange.start,e.liveShiftEnd=e.liveTimeRange.end,e.liveShiftStartDisplay=s.extractTime(e.liveShiftStart),e.liveShiftEndDisplay=s.extractTime(e.liveShiftEnd),e.availableLiveShiftTime=t-e.liveShiftStart.valueOf()/1e3,e.timestampStart=s.convertToTimestamp(e.liveShiftStart),e.timestampEnd,s.convertToTimestamp(e.liveShiftEnd))}function i(t){function e(){var e=t._options.source;this._originalPlayUrl=e,this._liveShiftUrl=t._options.liveTimeShiftUrl,this.liveTimeRange=n(t._options.liveStartTime,t._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1}this._player=t,this._isLiveShiftPlaying=!1;var i=this;e.call(this),t.liveShiftSerivce={setLiveTimeRange:function(e,t){i.setLiveTimeRange(e,t)},queryLiveShift:function(e,t,r){i.queryLiveShift(e,t,r)},isLiveShiftPlaying:function(){return i._isLiveShiftPlaying}},t.on(h.Private.ChangeURL,function(){e.call(i)})}var a=e("../../lib/io"),s=e("../../lib/util"),l=e("../../lib/playerUtil"),c=e("../../lang/index"),u=e("../flv/flvinjector"),p=e("../hls/hlsinjector"),d=e("../../lib/constants"),h=e("../base/event/eventtype");e("../../lib/url");i.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},i.prototype.switchToLive=function(){this.seekTime=-1;var e=this._originalPlayUrl,t=this._player._options.liveShiftSource,r=this._player._options.source;l.isHls(r)&&l.isFlv(e)&&t&&l.isHls(t)&&(this._player._hls&&this._player._destroyHls(),r=this._player._superType,t=this._player._Type,this._player._options._autoplay=!0,u.inject(this._player,t,r,this._player._options,"",!0)),this._player._loadByUrlInner(e,null,!0),this._isLiveShiftPlaying=!1,this._player.trigger(h.Private.LiveShiftSwitchToLive)},i.prototype.getBaseTime=function(){this.liveShiftStartDisplay;return-1==this.seekTime?s.parseTime(this.currentTimeDisplay):s.parseTime(this.liveShiftStartDisplay)+this.seekTime},i.prototype.getSourceUrl=function(e,t){var r=this._originalPlayUrl;return this.availableLiveShiftTime<e||(this._isLiveShiftPlaying=!0,e=parseInt(e),r=(r=this._switchLiveShiftPlayer(t))&&this._cleanUrl(r),t=parseInt(this.currentTimestamp)-e,-1===(r=-1==r.indexOf("?")?r+"?lhs_start_unix_s_0="+t:r+"&lhs_start_unix_s_0="+t).indexOf("aliyunols=on")&&(r+="&aliyunols=on"),-1===r.indexOf("continue=on")&&(r+="&continue=on")),r},i.prototype._cleanUrl=function(e){var t;return-1===e.indexOf("?")?e:(e=(e=(t=e.split("?"))[1])&&(0===(e=e.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")?e.replace("&",""):e))?t[0]+"?"+e:t[0]},i.prototype._switchLiveShiftPlayer=function(e){var t,r=this._originalPlayUrl,i=this._player._options.liveShiftSource,n=this._player._options.source;if(l.isHls(n))r=n;else if(l.isFlv(r)&&i&&l.isHls(i))return this._player._flv&&this._player._destroyFlv(),n=this._player._superType,t=this._player._Type,this._player._options._autoplay=!0,p.inject(this._player,t,n,this._player._options,"",!0),i;return r},i.prototype.getTimeline=function(t,i){var r;this._player.trigger(h.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(r=this).queryLiveShift(this._liveShiftUrl,function(e){e?0==(e=e).retCode?(o(r,e.content.current),t&&t()):i({Code:d.ErrorCode.ServerAPIError,Message:e.retCode+"|"+e.description+"|"+e.content}):console.log("\u83b7\u53d6\u76f4\u64ad\u65f6\u79fb\u6570\u636e\u5931\u8d25")},function(e){if(i&&e){var t={};if(e){if("string"==typeof e&&-1<e.indexOf("403 Forbidden"))t.Code=d.ErrorCode.AuthKeyExpired,t.Message="Query liveshift failed:"+c.get("Error_AuthKey_Text");else{var r,t=e;try{r=JSON.parse(e)}catch(e){}r&&(t.Code=d.ErrorCode.ServerAPIError,t.Message=r.retCode+"|"+r.description+"|"+r.content)}i(t)}}}):(o(this,(new Date).valueOf()/1e3),t&&t())},i.prototype.start=function(e,t){function r(){i._loopHandler&&clearTimeout(i._loopHandler),i._loopHandler=setTimeout(function(){i.getTimeline(function(){},t),r()},e)}var i=this;i.getTimeline(function(e){i._localLiveTimeHandler||i.tickLocalLiveTime()},t),r()},i.prototype.tickLocalLiveTime=function(){var t=this;(function e(){t._localLiveTimeHandler=setTimeout(function(){t.currentTimestamp++,o(t,t.currentTimestamp),t._player.trigger(h.Private.LiveShiftQueryCompleted),e()},1e3)})()},i.prototype.setLiveTimeRange=function(e,t){e=e||this._player._options.liveStartTime,t=t||this._player._options.liveOverTime,this.liveTimeRange=n(e,t),o(this,this.currentTimestamp),this._player.trigger(h.Private.LiveShiftQueryCompleted)},i.prototype.queryLiveShift=function(e,r,i){a.get(e,function(e){var t;e?0==(t=JSON.parse(e)).retCode?r&&r(t):i&&i(t):i&&i(e)},function(e){i&&i(e)})},i.prototype.stop=function(e){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},i.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),this._localLiveTimeHandler=null),this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null),this._player=null},t.exports=i},{"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"../../lib/playerUtil":45,"../../lib/url":50,"../../lib/util":51,"../base/event/eventtype":70,"../flv/flvinjector":100,"../hls/hlsinjector":102}],123:[function(e,t,r){function i(a){function t(){var e=document.querySelector("#"+a.id()+" .prism-progress-marker");if(e){e.innerHTML="";var o=s._player.getDuration();if(0<o){for(var t=0;t<s.progressMarkers.length;t++){var r,i=s.progressMarkers[t];void 0!==i.offset&&""!==i.offset&&(i=document.createElement("div"),c.addClass(i,"prism-marker-dot"),r=s.progressMarkers[t].offset/o,i.style.left=100*r+"%",e.appendChild(i),r=function(e,t){return function(){s._player.trigger(l.Private.MarkerTextShow,{left:e,progressMarker:t})}}(r,s.progressMarkers[t]),u.on(i,"mouseover",r),u.on(i,"mouseout",function(e){s._player.trigger(l.Private.MarkerTextHide)}),u.on(i,"touchstart",r),u.on(i,"mousemove",function(e){e.preventDefault()}),u.on(i,"touchmove",function(e){e.preventDefault()}))}var n=document.querySelector("#"+s._player.id()+" .prism-progress-cursor");s._player.on(n,"click",function(e){for(var t=s._player.getCurrentTime(),r=0;r<s.progressMarkers.length;r++){var i,n=s.progressMarkers[r];n&&t-1<n.offset&&n.offset<t+1&&(i=n.offset/o*100+"%",s._player.trigger(l.Private.MarkerTextShow,{left:i,progressMarker:n}))}})}}}this.progressMarkers=[],this._player=a;var s=this;a.on(l.Private.ProgressMarkerLoaded,function(e){e=e.paramData;e&&0<e.length&&(s.progressMarkers=e)}),a.on(l.Private.ProgressMarkerChanged,function(e){e=e.paramData;e&&0<e.length&&(s.progressMarkers=e,t())}),a.on(l.Video.LoadedMetadata,t)}var l=e("../base/event/eventtype"),c=(e("../../lang/index"),e("../../lib/hls/hlsparse"),e("../../lib/object"),e("../../lib/dom")),u=e("../../lib/event");e("../../lib/playerutil");i.prototype.dispose=function(){this._player=null,this.progressMarkers=[]},t.exports=i},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/hls/hlsparse":39,"../../lib/object":42,"../../lib/playerutil":46,"../base/event/eventtype":70}],124:[function(e,t,r){function i(o){this.levels=[],this.drmUrl={},this._player=o;var a=this;o.on(s.Private.PlayInfoLoaded,function(e){for(var t=e.paramData.encryptUrlArr||[],r=[],i=0;i<t.length;i++){var n=t[i];n.encryptionType===p.VodEncryptionType["Widevine-FairPlay"]&&r.push(n)}a.drmUrl=r}),o.on(s.Player.LevelsLoaded,function(e){if(0<a.levels.length&&(a.levels=[]),(e=e.paramData)&&e.levels){for(var t,r=e.levels.length-1;-1<r;r--){var i,n=e.levels[r];n.url&&0<n.url.length&&n.attrs&&n.attrs.BANDWIDTH&&(i=n.url,c.isArray(i)&&(i=i[0]),i={Url:i=!o._hls&&o._options.isVBR&&o._options.isDrm?d.call(a,n):i,desc:n.height||n.width,bitrate:n.bitrate,resolution:n.attrs.RESOLUTION,bandwidth:n.attrs.BANDWIDTH},a.levels.push(i))}"AUTO"===o._options.definition&&(o._urls=[],Object.assign(o._urls,this.levels)),a.levels.sort(function(e,t){return e.desc-t.desc}),0<a.levels.length&&(t="",this._player._options.isVBR&&(t=l.get("Auto")),a.levels.push({Url:e.url,desc:t}),o.trigger(s.Private.SelectorUpdateList,{type:"quality",text:t}))}}),o.on(s.Video.LoadStart,function(){var e;o._options&&(e=o._options.source,!o._hls)&&e&&u.isHls(e)&&(o._manuallySwitchDrmLevel?(o._manuallySwitchDrmLevel=!1,o.trigger(s.Private.SafariDrmLevelSwitch)):a.loadLevels(e))})}var s=e("../base/event/eventtype"),l=e("../../lang/index"),n=e("../../lib/hls/hlsparse"),c=e("../../lib/object"),u=e("../../lib/playerutil"),p=e("../../lib/constants");function d(e){for(var t,r=this.drmUrl,i=0;i<this.drmUrl.length;i++)if(Number(e.height)===Number(r[i].height)){t=r[i].Url;break}return t}(i.prototype={loadLevels:function(e){var t=new n,r=this;t.load(e,function(e){r._player.trigger(s.Player.LevelsLoaded,e)})}}).dispose=function(){this._player=null},t.exports=i},{"../../lang/index":23,"../../lib/constants":28,"../../lib/hls/hlsparse":39,"../../lib/object":42,"../../lib/playerutil":46,"../base/event/eventtype":70}],125:[function(e,t,r){function i(e){this._player=e,this.cues=[],this.baseUrl="";var t=this;e.on(s.Private.ChangeURL,function(){t.cues=[],t.baseUrl=""})}var n=e("../../lib/io"),o=e("../../lib/url"),a=e("../../lib/vtt/thumbnailvtt"),s=e("../base/event/eventtype");(i.prototype={get:function(e){var t,r,i=this;this.baseUrl=(t=e,(r=o.parseUrl(t))&&(r=r.segments)&&0<r.length&&(r=r[r.length-1],baseUrl=t.replace(r,"")),baseUrl),n.get(e,function(e){e&&a.parse(e,function(e){i.cues=e,i._player.trigger(s.Private.ThumbnailLoaded,e)})},function(e){console.log(e)})},findAvailableCue:function(e){for(var t=this.cues.length,r=0;r<t;r++){var i=this.cues[r];if(i.startTime<=e&&e<i.endTime)return i}return null},makeUrl:function(e){return e=-1==e.indexOf("://")?this.baseUrl+e:e}}).dispose=function(){this._player=null},t.exports=i},{"../../lib/io":40,"../../lib/url":50,"../../lib/vtt/thumbnailvtt":53,"../base/event/eventtype":70}],126:[function(e,t,r){var u=e("../base/player"),p=e("./splayerinjector"),d=e("../flv/flvinjector"),h=e("../../lib/playerutil"),f=e("../base/event/eventtype"),i=e("../../lib/constants"),y=e("../../lib/codec-probe"),_=i.USER_EVENT_NAME,g=h.isH265Codec,v=h.getVideoTrack,m={},S={codecCost:0,decoderCost:0},b=u.extend({init:function(e,t){var i,n=this,o=(this._options=t,h.isFlv(t.source)),r=this._extraMultiSources(),a={};function s(){o&&(d.inject(this,b,u,t),t._native=!1),u.call(this,e,t),this._monitor&&this._monitor.updateH265ProbeCost(S),c.call(this),m.codecTag&&p.reportH265PlayInfo.call(this,{renderType:"native",codecTag:m.codecTag})}function l(){t._native=!1,p.inject(this,b,u,t,m),u.call(this,e,t),this._monitor&&this._monitor.updateH265ProbeCost(S),c.call(this)}function c(){var e,t,r=this,i=a,n=this[_];n&&(i=Object.assign({},a,n),e=Object.keys(a),t=Object.keys(n),e.forEach(function(e){-1<t.indexOf(e)&&(i[e]=a[e].concat(n[e]))})),Object.keys(i).forEach(function(t){i[t].forEach(function(e){e.binded||u.prototype.on.call(r,t,e)})})}a[f.Player.Ready]=[function(){n._setupSourceList(r),n.trigger(f.Private.SelectorGenerateList,{type:"quality"})}],"zhihu"===t.from||t.forceH265?l.call(this):(i=performance.now(),y(t.source,function(e){S.codecCost+=performance.now()-i;var t,e=v(e.tracks),r=(e||{}).codecTag||(e||{}).codec.split(".")[0];m.codecTag=r,e&&g(r)?(t=performance.now(),o?(S.decoderCost+=performance.now()-t,l.call(n)):h.shouldUseBasePlayer(r,function(e){S.decoderCost+=performance.now()-t,(e?s:l).call(n)})):s.call(n)},function(e){console.log("error in demuxer, fallback to basePlayer",e),S.codecCost+=performance.now()-i,s.call(n)}))}});t.exports=b},{"../../lib/codec-probe":26,"../../lib/constants":28,"../../lib/playerutil":46,"../base/event/eventtype":70,"../base/player":91,"../flv/flvinjector":100,"./splayerinjector":127}],127:[function(e,t,r){function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}var o=e("../../lib/io"),s=e("../base/event/eventtype"),l=e("../base/event/eventmanager"),c=(e("../../lib/event"),e("../../lib/util")),u=e("../../lib/dom"),p=e("../../lib/playerutil"),d=e("../../lib/constants"),h=e("../../lang/index");function f(e){var t=this._options,r=(_.call(this),!function(){p.isVideoTag(this.tag)&&(l.offVideoAll(this),this.tag.parentNode.removeChild(this.tag),this.tag=null)}.call(this),Videox.Videox),i=new r(a({container:this._el,wasmDomain:t.splayerWasmDomain,progressive:!0,skipFrame:r.DiscardType.NONE,loop:t.rePlay,controls:!1,muted:!1,threads:t.h265Threads,simd:t.h265Simd,autoplay:t.autoplay,live:t.isLive,poster:t.cover||void 0,src:t.source,trackOptions:{disable:!0},preload:t.preload?"auto":"none",timeout:1e3*t.waitingTimeout},t.splayerOptions||{})),n=(t.debug&&(i.setLogLevel(r.LogLevel.LOG),i.setLogPrintLevel(r.LogLevel.LOG)),this._splayer=i,(this.tag=i).play),o=this;this.tag.play=function(){o._monitor&&o._monitor.reportStartPlay(),n.call(this)},function(){var e,t=this,r=document.createElement("video");for(e in r)!function(e){t.tag[e]||0===e.indexOf("on")||"function"!=typeof r[e]||(t.tag[e]=function(){console.warn("Function ["+e+"] is called on splayer, which should be a mistake."),r[e].apply(r,arguments)})}(e)}.call(this),function(e){var i=this,n=(l.onAll(this),this._splayer);n.addEventListener("error",function(e){console.log("Splayer error",(e||{}).detail);var t,r,i=Videox.Videox,n=(e||{}).detail,e=Number((n||{}).code),i=i.ErrorCode;switch(e){case i.WASM_NOT_SUPPORTED:case i.CANVAS_NOT_SUPPORTED:case i.AUDIOCONTEXT_NOT_SUPPORTED:case i.WORKER_NOT_SUPPORTED:case i.WEBGL_NOT_SUPPORTED:t=d.ErrorCode.SplayerEnvCheckError,r=h.get("Splayer_Err_Env_Check")+" | "+y(n);break;case i.DECODE:t=d.ErrorCode.SplayerDecodeError,r=h.get("Splayer_Err_Decode")+" | "+y(n);break;case i.NETWORK:t=d.ErrorCode.NetworkError,r=h.get("Error_Network_Text")+" | "+y(n);var o=(n.origin||{}).response;o?404===(o=o.status)?(t=d.ErrorCode.NotFoundSourceURL,r=h.get("Error_Not_Found")+" | "+y(n)):403===o&&(t=d.ErrorCode.AuthKeyExpired,r=h.get("Error_AuthKey_Text")+" | "+y(n)):navigator.onLine&&(t=d.ErrorCode.RequestDataError,r=r+"\uff0c"+h.get("Maybe_Cors_Error"));break;case i.PARSER:t=d.ErrorCode.SplayerParserNotFound,r=h.get("Splayer_Err_Parser_Not_Found")+" | "+y(n);break;default:t=d.ErrorCode.OtherError,r="(SP)"+h.get("Error_Play_Text")+" | "+y(n)}if(t===d.ErrorCode.NetworkError&&this._reloadForVod())return;e={error_code:t,error_msg:r};null!==e.error_code&&null!==e.error_msg&&(this.logError(e),this.trigger(s.Player.Error,e));g.call(this,{splayer:!0})}.bind(this)),n.addEventListener("decoderoverload",function(e){e=e.detail;delete e.shouldWarn,i.trigger(s.Player.H265DecoderOverload,e)}),n.addEventListener("loadedsupportinfo",function(e){var e=e.detail||{},t=e.detail||{},r=n.controller.options||{};n.renderType=e.renderer,g.call(i,{renderer:e.renderer,wasmThreads:t.wasmThreads&&r.threads,wasmThreadsOption:r.threads,simd:t.simd&&r.simd,simdOption:r.simd,codecTag:n.controller.videoTrack&&n.controller.videoTrack.codecTag||n.controller.videoTrack.codec.split(".")[0],splayer:!0})}),this._options.autoplay&&(n.once("canplay",function(){n.paused&&i._autoplayFailedHandler()}),n.once("timeupdate",function(){i.trigger(s.Player.Play)}),this._monitor)&&this._monitor.reportStartPlay()}.call(this,e)}function y(e){var e=e=void 0===e?{}:e,t=e.code,e=e.message,r=Videox.Videox.ErrorCode,i="";return i=t?i+t+(": "+(e||r[t])):i}function _(){this._splayer&&(this._splayer.destroy(),this._splayer=null)}function g(e){var t;void 0===e&&(e={}),this._h265InfoReported||(this._h265InfoReported=!0,t={0:"native",1:"mse",2:"wasm"},delete(e=a({codecTag:(this._probeInfo||{}).codecTag||e.codecTag,renderType:e.renderType||t[e.renderer]},e)).renderer,e.renderType!==t[2]&&(delete e.simd,delete e.simdOption,delete e.wasmThreads,delete e.wasmThreadsOption),e.codecTag&&p.isH265Codec(e.codecTag)&&this.trigger(s.Player.H265PlayInfo,e))}t.exports.reportH265PlayInfo=g,t.exports.inject=function(e,t,r,i,n){e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,e._splayer=null,e._splayerLoaded=!1,e._probeInfo=n,t.prototype.initPlay=function(e){var t=this;this.trigger(s.Private.H5_Loading_Show),function(e){return!c.contentProtocolMixed(e,"alwaysCheck")||((e={mediaId:this._options.vid||"",error_code:d.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=h.get("Request_Block_Text"),this.logError(e),this.trigger(s.Player.Error,e),!1)}.call(this,this._options.source)&&(this._splayerLoaded?f.call(this,e):function(e){var t=this._options.splayerUrl||"https://g.alicdn.com/splayer/splayer/0.6.5/dist/index.js";o.loadJS(t,e.bind(this))}.call(this,function(){this._splayerLoaded=!0,f.call(this,e),t._executeReadyCallback()}))},t.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this},t.prototype.setPlayerSize=function(e,t){this._superPt.setPlayerSize.call(this,e,t);e=this._el.querySelector("canvas");e&&(t=this._el.offsetWidth/this._el.offsetHeight,e.offsetWidth/e.offsetHeight<t?(e.style.height="100%",e.style.width="initial"):(e.style.width="100%",e.style.height="initial"))},t.prototype._setTransform=function(){var e=this._player._el.querySelector("canvas"),t=(this._transformProp||(this._transformProp=u.getTransformName(e)),"");this._rotate&&(t+=" rotate("+this._rotate+"deg)"),this._image&&("vertical"==this._image?t+=" scaleY(-1)":"horizon"==this._image&&(t+=" scaleX(-1)")),e.style[this._transformProp]=t},t.prototype.dispose=function(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),t.prototype.replay=this._superPt.replay,t.prototype.setPlayerSize=this._superPt.setPlayerSize,t.prototype._setTransform=this._superPt._setTransform,t.prototype.initPlay=this._superPt.initPlay,t.prototype.dispose=this._superPt.dispose),_.call(this),this._Type=null,this._superType=null,this._superPt=null,this._disposed=!0,this._splayerLoaded=!1,this._h265InfoReported=!1)}}},{"../../lang/index":23,"../../lib/constants":28,"../../lib/dom":32,"../../lib/event":33,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/util":51,"../base/event/eventmanager":69,"../base/event/eventtype":70}],128:[function(require,module,exports){!function _SkeinEnclosedFunction($jsskein_array_37,$jsskein_array_38,$jsskein_array_39,$jsskein_array_40,$jsskein_array_41,$jsskein_array_42,$jsskein_array_43,$jsskein_array_44){function kl5f8(){function e(e){var t=(t=$jsskein_array_37[3]).split($jsskein_array_42[0]).reverse().join($jsskein_array_43[3]),t=window[t];$jsskein_array_39[2],$jsskein_array_39[2];return t[e]=function(){}}for(var t=1;void 0!==t;){var r=1&t>>1;switch(1&t){case 0:switch(r){case 0:t=void 0;continue;case 1:var i=[],n=(n=$jsskein_array_44[1]).split($jsskein_array_38[1]).reverse().join($jsskein_array_44[2]),o=$jsskein_array_43[2];o+=$jsskein_array_39[1];var a=(a=$jsskein_array_37[2]).split($jsskein_array_43[3]).reverse().join($jsskein_array_43[3]);i.push($jsskein_array_44[3],$jsskein_array_40[0],n,o,$jsskein_array_44[4],$jsskein_array_44[5],a,$jsskein_array_38[2]),i.forEach(e),t=0;continue}continue;case 1:0==r&&($jsskein_array_37[0],t=window?2:0)}}}function gas4s8(){for(var NEXTBB12=0;void 0!==NEXTBB12;){var $jsskein_indexLevel46_0=1&NEXTBB12,$jsskein_indexLevel46_1_Base=NEXTBB12>>1,$jsskein_indexLevel46_1=1&$jsskein_indexLevel46_1_Base;switch($jsskein_indexLevel46_0){case 0:switch($jsskein_indexLevel46_1){case 0:NEXTBB12=2;continue;case 1:NEXTBB12=$jsskein_array_40[1]?1:3;continue}continue;case 1:switch($jsskein_indexLevel46_1){case 0:eval(fs56j57),NEXTBB12=2;continue;case 1:NEXTBB12=void 0;continue}continue}}}function n5fg6f(player){function _SkeinIIFE19(){function cl48s87(isOpen){for(var NEXTBB22=5;void 0!==NEXTBB22;){var $jsskein_indexLevel47_0=3&NEXTBB22,$jsskein_indexLevel47_1_Base=NEXTBB22>>2,$jsskein_indexLevel47_1=3&$jsskein_indexLevel47_1_Base;switch($jsskein_indexLevel47_0){case 0:switch($jsskein_indexLevel47_1){case 0:NEXTBB22=void 0;continue;case 1:$jsskein_simplify_tmp24=$jsskein_cl48s87_var14,NEXTBB22=$jsskein_simplify_tmp24?9:0;continue;case 2:$jsskein_simplify_tmp24=Aliplayer.__unable2Anti9Debugger13Key,$jsskein_cl48s87_var14=$jsskein_array_40[2]!==$jsskein_simplify_tmp24,NEXTBB22=4;continue}continue;case 1:switch($jsskein_indexLevel47_1){case 0:devtoolsDetector.removeListener(cl48s87),devtoolsDetector.setDetectDelay($jsskein_array_44[6]),devtoolsDetector.stop(),NEXTBB22=0;continue;case 1:var $jsskein_simplify_tmp24=$jsskein_array_41[0],$jsskein_cl48s87_var14=isOpen,NEXTBB22=$jsskein_cl48s87_var14?8:4;continue;case 2:eval(fs56j57),$jsskein_simplify_tmp24=Aliplayer.__unable2Anti9Debugger13Key,$jsskein_simplify_tmp24=$jsskein_array_42[1]===$jsskein_simplify_tmp24,NEXTBB22=$jsskein_simplify_tmp24?1:2;continue}continue;case 2:0===$jsskein_indexLevel47_1&&(kl5f8(),player.dispose(),gas4s8(),NEXTBB22=0)}}}devtoolsDetector.addListener(cl48s87),devtoolsDetector.launch()}for(var NEXTBB17=0;void 0!==NEXTBB17;){var $jsskein_indexLevel48_0=1&NEXTBB17,$jsskein_indexLevel48_1_Base=NEXTBB17>>1,$jsskein_indexLevel48_1=1&$jsskein_indexLevel48_1_Base;switch($jsskein_indexLevel48_0){case 0:switch($jsskein_indexLevel48_1){case 0:var $jsskein_simplify_tmp25=_SkeinIIFE19,$jsskein_simplify_tmp26=$jsskein_array_37[0],$jsskein_n5fg6f_var16=document.body,NEXTBB17=$jsskein_n5fg6f_var16?2:3;continue;case 1:$jsskein_n5fg6f_var16=$jsskein_array_42[2],NEXTBB17=1;continue}continue;case 1:switch($jsskein_indexLevel48_1){case 0:$jsskein_simplify_tmp26=$jsskein_n5fg6f_var16,setTimeout($jsskein_simplify_tmp25,$jsskein_simplify_tmp26),NEXTBB17=void 0;continue;case 1:var $jsskein__rand36=parseInt($jsskein_array_44[7],$jsskein_array_44[8]),$jsskein_n5fg6f_var16=$jsskein__rand36-$jsskein_array_43[4];NEXTBB17=1;continue}continue}}}function _SkeinIIFE34(e){n5fg6f(e)}var $jsskein_global_string_encryption_stack27=[],$jsskein_simplify_tmp18=($jsskein_global_string_encryption_stack27.unshift([]),window),$jsskein_simplify_tmp19=$jsskein_array_37[0],$jsskein_simplify_tmp19=require("../lib/devtools-detector"),devtoolsDetector=($jsskein_simplify_tmp18.__devtoolsDetector=$jsskein_simplify_tmp19,$jsskein_simplify_tmp19),$jsskein_fs56j57_string_plus28=$jsskein_array_44[0],fs56j57=($jsskein_fs56j57_string_plus28+=$jsskein_array_43[0],$jsskein_fs56j57_string_plus28+=$jsskein_array_38[0],$jsskein_fs56j57_string_plus28+=$jsskein_array_43[1],$jsskein_fs56j57_string_plus28=$jsskein_fs56j57_string_plus28.split($jsskein_array_39[0]).reverse().join($jsskein_array_37[1]),$jsskein_fs56j57_string_plus28),$jsskein_simplify_tmp18=module;$jsskein_simplify_tmp18.exports=_SkeinIIFE34}.call(this,[0,"","lmxrid","elosnoc"],["gu","","table"],["","rn",0],["log",!0,"error"],[0],["","error",0],["g","bed","wa","",147],["re","gubed","","info","error","dir",0,"11110111",2])},{"../lib/devtools-detector":31}],129:[function(n,o,e){!function(e,a,s,t,r,i,l,c){[].unshift([]),e[0];var u=n("./anti-debugging-protected");o.exports=function(e,t){for(var r=3;void 0!==r;){var i=1&r>>1;switch(1&r){case 0:switch(i){case 0:r=void 0;continue;case 1:var n=Aliplayer.__unable2Anti9Debugger13Key,o=l[0],r=(n=(o+=a[0])+l[1]+s[0]!==n)?1:0;continue}continue;case 1:switch(i){case 0:u(t),r=0;continue;case 1:var n=e.encryptType;r=(n=c[0]==n)?2:0;continue}continue}}}}.call(this,[0],["rr"],["r"],[],[],[],["e","o"],[1])},{"./anti-debugging-protected":128}],130:[function(e,t,r){var i=e("../lib/oo"),n=e("../lib/data"),o=e("../lib/object"),a=e("../lib/dom"),s=e("../lib/event"),l=e("../lib/function"),c=e("../lib/layout"),u=(e("../lib/constants"),e("../lib/util"),e("../player/base/event/eventtype")),e=e("./component/util"),i=i.extend({init:function(e,t){var r=this,i=(this._player=e,this._eventState="",this._options=o.copy(t),this._el=this.createEl(),e.id);"function"==typeof e.id&&(i=e.id()),this._id=i+"_component_"+n.guid(),this._children=[],this._childIndex={},t.className&&this.addClass(t.className),this._player.on(u.Private.UiH5Ready,function(){r.renderUI(),r.syncUI(),r.bindEvent()})}});i.prototype.renderUI=function(){c.render(this.el(),this.options()),this.el().id=this.id()},i.prototype.syncUI=function(){},i.prototype.bindEvent=function(){},i.prototype.createEl=function(e,t){return a.createEl(e,t)},i.prototype.options=function(e){return void 0===e?this._options:this._options=o.merge(this._options,e)},i.prototype.el=function(){return this._el},i.prototype._contentEl,i.prototype.player=function(){return this._player},i.prototype.contentEl=function(){return this._contentEl||this._el},i.prototype._id,i.prototype.id=function(){return this._id},i.prototype.getId=function(){return this._id},i.prototype.addChild=function(e,t){var r;if("string"==typeof e){if(!this._player.UI[e])return;r=new this._player.UI[e](this._player,t)}else r=e;return this._children.push(r),"function"==typeof r.id&&(this._childIndex[r.id()]=r),"function"==typeof r.el&&r.el()&&((t=r.el()).id=r.id(),this.contentEl().appendChild(t)),r},i.prototype.removeChild=function(e){if(e&&this._children){for(var t,r=!1,i=this._children.length-1;0<=i;i--)if(this._children[i]===e){r=!0,this._children.splice(i,1);break}r&&(this._childIndex[e.id]=null,t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}},i.prototype.initChildren=function(){var e,t,r=this,i=this.options().children;if(i)if(o.isArray(i))for(var n=0;n<i.length;n++)t="string"==typeof(t=i[n])?(e=t,{}):(e=t.name,t),r.addChild(e,t);else o.each(i,function(e,t){!1!==t&&r.addChild(e,t)})},i.prototype.on=function(e,t){return s.on(this._el,e,l.bind(this,t)),this},i.prototype.offListener=function(e,t){return s.off(this._el,e,t),this},i.prototype.one=function(e,t){return s.one(this._el,e,l.bind(this,t)),this},i.prototype.trigger=function(e,t){if(this._el)return!t&&0!=t||(this._el.paramData=t),this._eventState=e,s.trigger(this._el,e),this},i.prototype.off=function(e){return s.off(this._el,e),this},i.prototype.addClass=function(e){return a.addClass(this._el,e),this},i.prototype.removeClass=function(e){return a.removeClass(this._el,e),this},i.prototype.show=function(){return this._el&&(this._el.style.display="block"),this},i.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this},i.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var e=this._children.length-1;0<=e;e--)this._children[e].destroy&&this._children[e].destroy();"function"==typeof this.disposeUI&&this.disposeUI(),this.children_=null,this.childIndex_=null,this.off(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),n.removeData(this._el),this._el=null},i.prototype.registerControlBarTooltip=e.registerTooltipEvent,t.exports=i},{"../lib/constants":28,"../lib/data":30,"../lib/dom":32,"../lib/event":33,"../lib/function":35,"../lib/layout":41,"../lib/object":42,"../lib/oo":43,"../lib/util":51,"../player/base/event/eventtype":70,"./component/util":159}],131:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),s=e("../../player/base/plugin/status"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-big-play-btn")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="outter"></div>',e},bindEvent:function(){var r=this,e=(this._player.on(a.Player.Play,function(){r.addClass("playing"),r.removeClass("pause"),r._hide()}),this._player.on(a.Player.Pause,function(){var e,t;r._player._switchSourcing||(r.removeClass("playing"),r.addClass("pause"),e=r._player._status,t=r._player._seeking,e==s.ended)||e==s.error||e==s.playing||t||r._show()}),document.querySelector("#"+r.id()+" .outter"));o.on(this.el(),"mouseover",function(){n.addClass(e,"big-playbtn-hover-animation")}),o.on(this.el(),"mouseout",function(){n.removeClass(e,"big-playbtn-hover-animation")}),this.on(a.Private.PlayClick,function(){var e;r._player.paused()?(e=r._player.getCurrentTime(),(r._player.getDuration()<=e||r._player._ended||r._player.exceedPreviewTime(e))&&r._player.seek(0),r._player.play(!0)):r._player.pause(!0)}),this._player.on(a.Private.Play_Btn_Show,function(){r._show()}),this._player.on(a.Private.Play_Btn_Hide,function(){r._hide()})},_show:function(){n.css(this.el(),"display","block")},_hide:function(){n.css(this.el(),"display","none")}});t.exports=e},{"../../lib/dom":32,"../../lib/event":33,"../../player/base/event/eventtype":70,"../../player/base/plugin/status":95,"../component":130}],132:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("./util"),a=e("../../lang/index"),s=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){this.isOpened=!1,i.call(this,e,t),this.addClass("prism-cc-btn")},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var r=this;this.on("click",function(){n.addClass(r._el,"disabled");var e="on",t="";r.isOpened?(r._player._ccService.close(),e="off"):t=r._player._ccService.open().label,r._player.trigger(s.Private.CCChanged,e),r._player.trigger(s.Private.CCStateChanged,{value:e,lang:t}),r.disabledHandler&&clearTimeout(r.disabledHandler),r.disabledHandler=setTimeout(function(){n.removeClass(r._el,"disabled")},1e3),r._player.trigger(s.Private.MarkerTextHide)}),this._player.on(s.Private.CCChanged,function(e){e=e.paramData;r.isOpened="off"!=e}),o.registerTooltipEvent.call(this,this.el(),function(){return r.isOpened?a.get("CloseSubtitle"):a.get("OpenSubtitle")})},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),this.disabledHandler=null)}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],133:[function(e,t,r){var i=e("../component"),o=e("../../player/base/event/eventtype"),a=e("../../lib/event"),s=e("../../lib/dom"),l=e("../../lib/ua"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-controlbar-bg"></div>',e},onEvent:function(){var t,r=this.player(),e=r.options(),i=this,n=(a.on(this._el,"mouseover",function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(e,"display","block")}),a.on(this._el,"mouseout",function(e){var t=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(t,"display","none"),r.trigger(o.Private.ThumbnailHide)}),a.on(this._el,"click",function(e){r.trigger(o.Private.ControlBarClick,e)}),l.IS_IOS&&(a.on(this._el,"touchstart",function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(e,"display","block")}),a.on(this._player.tag,"touchstart",function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(e,"display","none"),r.trigger(o.Private.ThumbnailHide)})),this.timer=null,e.controlBarVisibility);"hover"==(n=1==e.controlBarForOver?"hover":n)?(i.hide(),t=function(){i._hideHandler&&clearTimeout(i._hideHandler),i._show(),r.fullscreenService.getIsFullScreen()&&i._hide()},r.on(o.Private.MouseOver,function(){t()}),a.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t()}),a.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t()}),r.on(o.Private.MouseOut,function(){i._hideHandler=setTimeout(function(){i.hide(),r.trigger(o.Private.HideBar),r.trigger(o.Private.ThumbnailHide),r.trigger(o.Private.VolumeVisibilityChange,""),r.trigger(o.Private.SettingListHide)})})):"click"==n?(r.on(o.Private.Click,function(e){r._isError||(e.preventDefault(),e.stopPropagation(),i._show(),i._hide())}),r.on(o.Player.Ready,function(){i._hide()}),r.on(o.Private.TouchStart,function(){i._show()}),r.on(o.Private.TouchMove,function(){i._show()}),r.on(o.Private.TouchEnd,function(){i._hide()})):"never"==n?i._hide():i._show()},_show:function(){this.show(),this._player.trigger(o.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var e=this,t=this.player().options(),t="never"==t.controlBarVisibility?0:t.showBarTime;this.timer=setTimeout(function(){e.hide(),e._player.trigger(o.Private.HideBar),e._player.trigger(o.Private.ThumbnailHide),e._player.trigger(o.Private.VolumeVisibilityChange,""),e._player.trigger(o.Private.SettingListHide)},t)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._hideHandler&&(clearTimeout(this._hideHandler),this._hideHandler=null)}});t.exports=e},{"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../player/base/event/eventtype":70,"../component":130}],134:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-cover")},createEl:function(){var e=i.prototype.createEl.call(this,"div"),t=this.options().cover;return t?e.style.backgroundImage="url("+t+")":n.css(e,"display","none"),e},_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&n.css(t,"display","none")},_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&n.css(t,"display","block")},bindEvent:function(){this._player.on(o.Private.Cover_Show,this._show),this._player.on(o.Private.Cover_Hide,this._hide)}});t.exports=e},{"../../lib/dom":32,"../../player/base/event/eventtype":70,"../component":130}],135:[function(e,t,r){var i=e("../component"),a=e("../../lib/util"),s=e("../../lib/dom"),n=e("../../lib/event"),o=e("../../lib/ua"),l=e("../../lang/index"),c=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-ErrorMessage")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+l.get("Refresh_Text")+"</a><a class='prism-button prism-button-retry'  target='_blank'>"+l.get("Retry")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+l.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId:&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+l.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>",e},bindEvent:function(){var r=this,e=(r._player.on(c.Private.Error_Show,function(e){var t=null;r._player.getMonitorInfo&&(t=r._player.getMonitorInfo()),r._show(e,t)}),r._player.on(c.Private.Error_Hide,function(){r._hide()}),document.querySelector("#"+r.id()+" .prism-button-refresh")),e=(n.on(e,"click",function(){location.reload(!0)}),o.IS_MOBILE&&(e=document.querySelector("#"+r.id()+" .prism-detect-info"),s.addClass(e,"prism-width90")),document.querySelector("#"+r.id()+" .prism-button-retry"));n.on(e,"click",function(){var e=r._player.getCurrentTime(),t=r._player._options.source;r._player._setDefaultCC=!0,r._player._loadByUrlInner(t,e,!0)})},_show:function(e,t){var r,e=e.paramData,i="",n="",o=(e.mediaId&&(i=e.mediaId),e.mediaAuth&&e.mediaAuth,document.querySelector("#"+this.id()+" .prism-button-orange"));o&&(t&&this._player._options.diagnosisButtonVisible?(t.vu?n=decodeURIComponent(t.vu):s.css(o,"display","none"),i="//player.alicdn.com/detection.html?from=h5&vid="+i+"&source="+(n?encodeURIComponent(n):"")+"&uuid="+t.uuid+"&lang="+l.getCurrentLanguage(),o&&(o.href=i)):s.css(o,"display","none"),n=e.display_msg||e.error_msg,document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=n,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=e.error_code,t=document.querySelector("#"+this.id()+" .vid"),e.mediaId?(s.css(t,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=e.mediaId):s.css(t,"display","none"),i=document.querySelector("#"+this.id()+" .mediaAuth"),e.mediaAuth?(s.css(i,"display","block"),document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=e.mediaAuth):s.css(i,"display","none"),e.uuid?document.querySelector("#"+this.id()+" .uuid .info-content").innerText=e.uuid:(o=document.querySelector("#"+this.id()+" .uuid"),s.css(o,"display","none")),e.requestId?document.querySelector("#"+this.id()+" .requestId .info-content").innerText=e.requestId:(n=document.querySelector("#"+this.id()+" .requestId"),s.css(n,"display","none")),document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=a.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),t=document.querySelector("#"+this.id()),s.css(t,"display","block"),(r=this).playHideHandler&&clearTimeout(r.playHideHandler),r.playHideHandler=setTimeout(function(){r._player.trigger("play_btn_hide")}))},_hide:function(){var e=document.querySelector("#"+this.id());s.css(e,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),this.playHideHandler=null)}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130}],136:[function(e,t,r){var i=e("../component"),n=e("../../player/base/event/eventtype"),o=(e("../../lib/event"),e("../../lib/ua")),a=e("../../lang/index"),s=e("./util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var e=this;this._player.on(n.Player.RequestFullScreen,function(){o.IS_IOS||e.addClass("fullscreen")}),this._player.on(n.Player.CancelFullScreen,function(){e.removeClass("fullscreen")}),s.registerTooltipEvent.call(this,this.el(),function(){return e._player.fullscreenService.getIsFullScreen()?a.get("ExistFullScreen"):a.get("Fullscreen")}),this.on("click",function(){e._player.fullscreenService.getIsFullScreen()?e._player.fullscreenService.cancelFullScreen():e._player.fullscreenService.requestFullScreen(),e._player.trigger(n.Private.MarkerTextHide)})}});t.exports=e},{"../../lang/index":23,"../../lib/event":33,"../../lib/ua":49,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],137:[function(e,t,r){"use strict";var i=e("../component"),n=e("../../lib/dom"),o=e("../../player/base/event/eventtype"),a=e("../../lib/ua.js"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-hide")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML=a.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>',e},_loading_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-loading");t&&(n.removeClass(t,"prism-loading"),n.addClass(t,"prism-hide"))},_loading_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-hide");t&&(n.removeClass(t,"prism-hide"),n.addClass(t,"prism-loading"))},bindEvent:function(){this._player.on(o.Private.H5_Loading_Show,this._loading_show),this._player.on(o.Private.H5_Loading_Hide,this._loading_hide)}});t.exports=e},{"../../lib/dom":32,"../../lib/ua.js":49,"../../player/base/event/eventtype":70,"../component":130}],138:[function(e,t,r){var i=e("../component"),n=(e("../../lib/util"),e("../../lib/dom")),o=(e("../../lib/event"),e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype")),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-info-display")},createEl:function(){return i.prototype.createEl.call(this,"p")},bindEvent:function(){var r=this;r._player.on(o.Private.Info_Show,function(e){var t=document.querySelector("#"+r.id()),e=e.paramData;e&&(void 0!==e.text&&e.text?(t.innerHTML=e.text,void 0!==e.duration&&e.duration&&(r.handler&&clearTimeout(r.handler),r.handler=setTimeout(function(){n.css(t,"display","none")},e.duration)),"lb"==e.align?(n.addClass(t,"prism-info-left-bottom"),n.removeClass(t,"prism-info-top-center")):"tc"==e.align?(n.addClass(t,"prism-info-top-center"),n.removeClass(t,"prism-info-left-bottom")):(n.removeClass(t,"prism-info-left-bottom"),n.removeClass(t,"prism-info-top-center")),e.isBlack?n.addClass(t,"prism-info-black"):n.removeClass(t,"prism-info-black")):t.innerHTML=e,n.css(t,"display","block"))}),r._player.on(o.Private.Info_Hide,function(e){var t=document.querySelector("#"+r.id());n.css(t,"display","none")})},disposeUI:function(){this.handler&&(clearTimeout(this.handler),this.handler=null)}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130}],139:[function(e,t,r){var i=e("../component"),n=e("../../lang/index"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-license-watermark")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="no-authorization">'+n.get("License_No_Authorization")+'</div><a class="apply-button" target="_blank" href="https://help.aliyun.com/document_detail/434250.html">'+n.get("License_Click_To_Apply")+"</a>",e}});t.exports=e},{"../../lang/index":23,"../component":130}],140:[function(e,t,r){var i=e("../component"),n=e("./util"),o=(e("../../lib/util"),e("../../lib/dom")),a=e("../../lib/event"),s=e("../../lib/playerUtil"),l=e("../../lang/index"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-live-display")},createEl:function(){var e=i.prototype.createEl.call(this,"p");return e.innerText="LIVE",s.isLiveShift(this._player._options)&&o.addClass(e,"live-shift-display"),e},bindEvent:function(){var e=document.querySelector("#"+this.id()),t=this;s.isLiveShift(this._player._options)&&(a.on(e,"click",function(){t._player._liveshiftService.switchToLive()}),n.registerTooltipEvent.call(this,this.el(),l.get("SwitchToLive")))}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/playerUtil":45,"../../lib/util":51,"../component":130,"./util":159}],141:[function(e,t,r){var i=e("../component"),n=(e("../../lib/dom"),e("../../lib/event"),e("../../player/base/event/eventtype")),o=e("../../player/base/plugin/status"),a=e("../../lib/ua.js"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-animation")},bindEvent:function(){var t=this;this._player.on(n.Player.Play,function(){t._player._isManualPlay&&(t.removeClass("prism-pause-animation"),t.addClass("prism-play-animation"),a.IS_ANDROID_FIREFOX||t.removeClass("play-apply-animation"),t.playHandler&&clearTimeout(t.playHandler),t.playHandler=setTimeout(function(){a.IS_ANDROID_FIREFOX||t.addClass("play-apply-animation")}))}),this._player.on(n.Player.Pause,function(){var e=t._player._status;e!=o.ended&&e!=o.error&&t._player._isManualPause&&(t.removeClass("prism-play-animation"),t.addClass("prism-pause-animation"),a.IS_ANDROID_FIREFOX||t.removeClass("play-apply-animation"),t.pauseHandler&&clearTimeout(t.pauseHandler),t.pauseHandler=setTimeout(function(){a.IS_ANDROID_FIREFOX||t.addClass("play-apply-animation")}))})},disposeUI:function(){this.playHandler&&(clearTimeout(this.playHandler),this.playHandler=null),this.pauseHandler&&(clearTimeout(this.pauseHandler),this.pauseHandler=null)}});t.exports=e},{"../../lib/dom":32,"../../lib/event":33,"../../lib/ua.js":49,"../../player/base/event/eventtype":70,"../../player/base/plugin/status":95,"../component":130}],142:[function(e,t,r){var i=e("../component"),n=e("../../player/base/event/eventtype"),o=e("./util"),a=e("../../lang/index"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-play-btn")},bindEvent:function(){var t=this;this._player.on(n.Player.Play,function(){t.addClass("playing")}),this._player.on(n.Player.Pause,function(){t.removeClass("playing")}),this.on(n.Private.PlayClick,function(){var e;t._player.paused()?(e=t._player.getCurrentTime(),(t._player.getDuration()<=e||t._player._ended||t._player.exceedPreviewTime(e))&&t._player.seek(0),t._player.play(!0),t.addClass("playing")):(t._player.pause(!0),t.removeClass("playing")),t._player.trigger(n.Private.MarkerTextHide)}),o.registerTooltipEvent.call(this,this.el(),function(){return t._player.paused()?a.get("Play"):a.get("Pause")})}});t.exports=e},{"../../lang/index":23,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],143:[function(e,t,r){var i=e("../component"),o=e("../../lib/dom"),a=(e("../../lib/constants"),e("../../lib/event")),s=e("../../lib/ua"),l=e("../../lib/function"),n=e("../../lang/index"),c=e("../../config"),u=e("../../lib/util"),p=e("../../player/base/event/eventtype"),d=e("./util").debounce,e=i.extend({init:function(e,t){i.call(this,e,t),this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this._thumbnailHideTimer=null,this.addClass("prism-progress")},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p>',e},bindEvent:function(){function t(e){r._progressDown=e}var r=this,e=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time"),this.thumbnailNode=document.querySelector(".prism-thumbnail"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),document.querySelector("#"+this.id())),i=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),n="",n=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":c.domain?"https://"+c.domain+"/de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png";i.src=n,a.on(this.cursorNode,"mousedown",function(e){r._onMouseDown(e)}),a.on(this.cursorNode,"touchstart",function(e){r._onMouseDown(e)}),a.on(e,"mousemove",function(e){r._progressMove(e)}),a.on(e,"touchmove",function(e){r._progressMove(e)});a.on(e,"mousedown",function(e){t(!0)}),a.on(e,"touchstart",function(e){t(!0)}),a.on(e,"mouseup",function(e){t(!1)}),a.on(e,"touchend",function(e){t(!1),r._moving&&s.IS_MOBILE&&(r._player.trigger(p.Private.EndStart,{toTime:r._lastSeekTime}),r._moving=!1)}),a.on(this._el,"click",function(e){r._onMouseClick(e)}),this._player.on(p.Private.HideProgress,function(e){r._hideProgress(e)}),this._player.on(p.Private.CancelHideProgress,function(e){r._cancelHideProgress(e)}),this._player.on(p.Private.HideBar,function(e){r._player._seeking=!1}),a.on(e,p.Private.MouseOver,function(e){r._onMouseOver(e)}),a.on(e,p.Private.MouseOut,function(e){r._onMouseOut(e)}),a.on(this.controlNode,p.Private.MouseLeave,function(e){r._offMouseUp()}),s.IS_PC?(i=d(function(){o.addClass(e,"prism-progress-hover"),o.addClass(r.cursorNode,"cursor-hover")},100),a.on(e,"mouseover",i),n=d(function(){o.removeClass(e,"prism-progress-hover"),o.removeClass(r.cursorNode,"cursor-hover"),r._progressDown=!1},100),a.on(e,"mouseout",n)):(o.addClass(e,"prism-progress-hover"),o.addClass(r.cursorNode,"cursor-hover")),this.bindTimeupdate=l.bind(this,this._onTimeupdate),this._player.on(p.Player.TimeUpdate,this.bindTimeupdate),s.IS_IPAD?this.interval=setInterval(function(){r._onProgress()},500):this._player.on(p.Video.Progress,function(){r._onProgress()}),this._player.on(p.Private.UpdateProgress,function(e){r._updateProgressBar(r.playedNode,e.paramData.targetTime)}),this._player.on(p.Private.UpdateCursorPosition,function(e){r._updateCursorPosition(e.paramData.targetTime)})},_progressMove:function(e){e.preventDefault();var t,r,i=this._getSeconds(e);i!=1/0&&(t=u.formatTime(i),r=this._getDistance(e),this.cursorNode)&&(this._player.trigger(p.Private.ThumbnailShow,{time:i,formatTime:t,left:r,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(e)},_hideProgress:function(e){a.off(this.cursorNode,"mousedown"),a.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;a.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),a.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_canSeekable:function(e){var t=!0;return t="function"==typeof this._player.canSeekable?this._player.canSeekable(e):t},_onMouseOver:function(e){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),this._mouseInProgress=!0},_onMouseOut:function(e){var t=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),this._cursorHideHandler=setTimeout(function(){t._player.trigger(p.Private.ThumbnailHide),t._mouseInProgress=!1})},_getSeconds:function(e){var e=this._getDistance(e),t=this.el().offsetWidth,e=this._player.getDuration()?e/t*this._player.getDuration():0;return e=(e=e<0?0:e)>this._player.getDuration()?this._player.getDuration():e},_getDistance:function(e){for(var t=this.el().offsetLeft,r=this.el();r=r.offsetParent;){var i=o.getTranslateX(r);t+=r.offsetLeft+i}e=(e.touches?e.touches[0]:e).pageX-t;return e=e<0?0:e},_onMouseClick:function(e){var t=this,r=t._getSeconds(e);t._canSeekable(r)?(t._player.exceedPreviewTime(r)&&(r=t._player.getPreviewTime()),this._seekTime=r,t._updateProgressBar(this.playedNode,r),t._updateCursorPosition(r),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=setTimeout(function(){t._player._seeking=!0,t._mouseDown&&!s.IS_MOBILE||(t._player.trigger(p.Private.SeekStart,{fromTime:t._player.getCurrentTime()}),t._player.trigger(p.Private.EndStart,{toTime:r})),t._player.seek(r),t._mouseDown=!1,t._mouseClickTimeHandle=null,t._inWaitingSeek=!1},0),this._inWaitingSeek=!0):t._player.trigger(p.Private.Info_Show,{text:n.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(e){var t=this,e=(e.preventDefault(),this._mouseDown=!0,s.IS_PC&&this._player.trigger(p.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),a.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),a.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),a.on(this.controlNode,"mouseup",function(e){t._onControlBarMouseUp(e)}),a.on(this.controlNode,"touchend",function(e){t._onControlBarMouseUp(e)}),t._getSeconds(e));t._canSeekable(e)?t._player.exceedPreviewTime(e)&&t._player.getPreviewTime():t._player.trigger(p.Private.Info_Show,{text:n.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(e){this._onMouseUpIntern(e)},_onControlBarMouseUp:function(e){this._onMouseUpIntern(e)},_onPlayerMouseUp:function(e){this._onMouseUpIntern(e)},_offMouseUp:function(){a.off(this.controlNode,"mousemove"),a.off(this.controlNode,"touchmove"),a.off(this.controlNode,"mouseup"),a.off(this.controlNode,"touchend")},_onMouseUpIntern:function(e){e.preventDefault(),this._offMouseUp();e=this.playedNode.offsetWidth/this.el().offsetWidth*this._player.getDuration();this._player.getDuration();isNaN(e)||this._player.seek(e),s.IS_PC&&this._player.trigger(p.Private.EndStart,{toTime:e}),this._autoHideThumbnail()},_onMouseMove:function(e){e.preventDefault(),!this._moving&&s.IS_MOBILE&&(this._player.trigger(p.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._moving=!0);e=this._getSeconds(e);this._player.exceedPreviewTime(e)&&(e=this._player.getPreviewTime()),this._player.seek(e),this._updateProgressBar(this.playedNode,e),this._updateCursorPosition(e),this._lastSeekTime=e},_onTimeupdate:function(e){var t=this._player._options.source,t=this._getUrlSuffix(t),r=!1;"mp4"===t&&(s.IS_MAC_SAFARI&&(r=!0),s.IS_IOS&&(r=!0),s.IS_IE11)&&(r=!0),"m3u8"===t&&s.IS_IE11&&(r=!0),"audio"==this._player._options.mediaType&&s.IS_IOS&&(this._player._seeking=!1),(this._inWaitingSeek||this._player._seeking&&!s.IS_EDGE||this._progressDown)&&!r||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(p.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){var r=this._player.getDuration();1!=this._player._switchSourcing&&r&&(-1!=this._seekTime&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?this._seekTime=-1:t=this._seekTime),1<(t=t/r+.005)&&(t=1),e)&&o.css(e,"width",100*t+"%")},_updateCursorPosition:function(e){var t,r,i,n=this._player.getDuration();1!=this._player._switchSourcing&&n&&(t=1,r=10/(i=this._player.el().clientWidth),0!=i&&(t=1-r),i=(i=e/n-r)<0?0:i,this.cursorNode)&&(t<i?(o.css(this.cursorNode,"right","0px"),o.css(this.cursorNode,"left","auto")):(o.css(this.cursorNode,"right","auto"),o.css(this.cursorNode,"left",100*i+"%")))},_getUrlSuffix:function(e){return!e||"string"!=typeof e?"":((e=(e.split("?")[0]||"").split("."))[e.length-1]||"").toLowerCase()},_autoHideThumbnail:function(){var e=this;s.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),this._thumbnailHideTimer=setTimeout(function(){e._moving||e._player.trigger(p.Private.ThumbnailHide)},2e3))},disposeUI:function(){this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),this.cursorNodeHandler=null),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=null)}});t.exports=e},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/dom":32,"../../lib/event":33,"../../lib/function":35,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],144:[function(e,t,r){var i=e("../component"),n=(e("../../lib/util"),e("../../lib/dom")),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-marker-text")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<p></p>",e},bindEvent:function(){var i=this;i._player.on(a.Private.MarkerTextShow,function(e){var t=e.paramData,r=a.Player.MarkerDotOver;i._player.trigger(r,e.paramData),t.progressMarker.isCustomized?i._player.trigger(a.Private.LifeCycleChanged,{type:r,data:e.paramData}):(i._thumbnailShowHanlde&&(n.css(i.el(),"display","none"),clearTimeout(i._thumbnailShowHanlde)),i._thumbnailShowHanlde=setTimeout(function(){var e;document.querySelector("#"+i.id()+" p").innerText=t.progressMarker.text||"",t&&(n.css(i.el(),"display","block"),e=i._player.el().offsetWidth,left=e*t.left,width=i.el().offsetWidth,left+width>e?(n.css(i.el(),"right","0px"),n.css(i.el(),"left","auto")):(left=(left-=width/2)<0?0:left,n.css(i.el(),"right","auto"),n.css(i.el(),"left",left+"px")))},30))}),i._player.on(a.Private.MarkerTextHide,function(e){i._player.trigger(a.Player.MarkerDotOut),i._player.trigger(a.Private.LifeCycleChanged,{type:a.Player.MarkerDotOut,data:""}),i._thumbnailShowHanlde&&clearTimeout(i._thumbnailShowHanlde),n.css(i.el(),"display","none")}),o.on(i._player.tag,"click",function(e){e&&e.target==e.currentTarget&&i._player.trigger(a.Private.MarkerTextHide)}),o.on(i._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&i._player.trigger(a.Private.MarkerTextHide)})},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),this._thumbnailShowHanlde=null)}});t.exports=e},{"../../lib/dom":32,"../../lib/event":33,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130}],145:[function(e,t,r){var i=e("./selector"),s=e("../../../lib/object"),c=(e("../../../lib/util"),e("../../../lib/cookie")),l=e("../../../lib/dom"),u=(e("../../../lib/event"),e("../../../lib/constants")),p=e("../../../lang/index"),o=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){this.Name=p.get("Quality"),this.Type="quality",this.Tooltip=p.get("Quality_Switch_To"),i.call(this,e,t),this._isMasterLevel=!1},showTip:function(e,t){this._player.trigger(o.Private.Info_Show,{text:e,duration:t,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var n=this,e=(this._player.on(o.Private.QualityChange,function(e){var t,r,i=0<n._player._urls.length?n._player._urls:n._player._qualityService.levels;(data=e.paramData).levelSwitch?(t=data.desc||data.bitrate,n._autoSWitchDesc=t,n._updateText(t)):0<n._player._currentPlayIndex&&(n._autoSWitchDesc="",r=i[(t=n._player._currentPlayIndex)-1].desc,i=i[t].desc,n.showTip(r+e.paramData+i,1e3),n._player.trigger(o.Private.SelectorValueChange,{type:n.Type,text:i}))}),document.querySelector("#"+n.id()+" .selector-list"));this._player.on(o.Player.LevelSwitch,function(){l.addClass(e,"disabled")}),this._player.on(o.Player.LevelSwitched,function(){l.removeClass(e,"disabled")})},generateList:function(e){var n,t=this._player._urls,o=this._player._currentPlayIndex,r=this._player._qualityService.levels,a=(0<r.length&&(this._isMasterLevel=!0,this._player._options.isVBR)&&(o=(t=r).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<t.length&&(n=this,s.each(t,function(e,t){var r,i;(e.desc||e.bitrate)&&(r=l.createEl.call(this,"li",{key:e.Url,index:t,text:e.desc||e.bitrate}),i=l.createEl.call(this,"span",{key:e.Url,index:t,text:e.desc||e.bitrate}),t==o&&(l.addClass(r,"current"),n._previousSelection=r),i.innerText=e.desc||e.bitrate,r.appendChild(i),a.appendChild(r))})),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(e){if(this._player._switchSourcing=!0,this._isMasterLevel){for(var t,r=this._player._qualityService.levels,i=0;i<r.length;i++)r[i].Url==e&&r[i].desc!=p.get("Auto")&&(t=r[i],this._resetAutoText());this._player._switchLevel?this._player._switchLevel(e,t||{isAuto:!0}):(n=this._player.autoplay||"pause"!=this._player._status,this._player._loadByUrlInner(e,this._player.getCurrentTime(),n))}else{for(var n,o=this._player._urls.length,a=this._player._currentPlayIndex,s=-1,i=0;i<o;i++)if(this._player._urls[i].Url==e){s=this._player._currentPlayIndex=i,c.set(u.SelectedStreamLevel,this._player._urls[i].definition,365);break}a!=s&&-1<s&&(a=this._player.getCurrentTime(),n=this._player.autoplay||"pause"!=this._player._status,this._player.autoplay||0!=a||(n=!1),this._player._switchLevel&&!this._player._options.isLive?this._player._switchLevel(e):this._player._loadByUrlInner(e,a,n,!0))}var l=this;setTimeout(function(){l._player._switchSourcing=!1})},_updateText:function(e){var t=document.querySelector("#"+this.id()+" .selector-list .current"),r=document.querySelector("#"+this.id()+" .selector-list .current span"),i=p.get("Auto");r&&r.innerText&&-1<r.innerText.indexOf(i)&&(r.innerText=i+=e?"("+e+")":"",t)&&(t.text=i)},_resetAutoText:function(){for(var e=p.get("Auto"),t=document.querySelectorAll("#"+this.id()+" .selector-list li"),r=0;r<=t.length;r++){var i=t[r],n=i.querySelector("span");if(-1<n.innerText.indexOf(e)){n.innerText=e,i.text=e;break}}}});t.exports=e},{"../../../lang/index":23,"../../../lib/constants":28,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../lib/util":51,"../../../player/base/event/eventtype":70,"./selector":151}],146:[function(e,t,r){var i=e("./selector"),a=e("../../../lib/object"),s=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),n=(e("../../../lib/event"),e("./util"),e("../../../lang/index")),l=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){this.Name=n.get("AudioTrack"),this.Type="audio",this.Tooltip=n.get("AudioTrack_Switch_To"),i.call(this,e,t)},bindEvent:function(){this.bindCommonEvent();var n=this,o=document.querySelector("#"+n.id()+" .selector-list");document.querySelector("#"+n.id()+" .header");n._player.on(l.Private.ChangeURL,function(){n._hasGeneratedList=!1}),this._player.on(l.Player.AudioTrackSwitch,function(){s.addClass(o,"disabled")}),this._player.on(l.Player.AudioTrackSwitched,function(){s.removeClass(o,"disabled")}),n._player.on(l.Player.AudioTrackReady,function(e){!n._hasGeneratedList&&(n._clear(),e=e.paramData)&&(a.each(e,function(e,t){var r=s.createEl.call(n,"li",{key:e.value,text:e.text}),i=s.createEl.call(n,"span",{key:e.value,text:e.text});i.innerText=e.text,r.appendChild(i),o.appendChild(r)}),n._hasGeneratedList=!0)})},execute:function(e){this._player._audioTrackService.switch(e)}});t.exports=e},{"../../../lang/index":23,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../lib/util":51,"../../../player/base/event/eventtype":70,"./selector":151,"./util":153}],147:[function(e,t,r){var i=e("../../component"),n=(e("../../../lib/dom"),e("../../../player/base/event/eventtype")),o=e("./list"),a=e("../../../lang/index"),s=e("../util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-setting-btn"),this._settingList=new o(e,t),e.addChild(this._settingList,t)},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this;this.on("click",function(){e._settingList.isOpened?e._player.trigger(n.Private.SettingListHide):e._player.trigger(n.Private.SettingListShow),e._player.trigger(n.Private.SelectorHide),e._player.trigger(n.Private.MarkerTextHide),e._player.trigger(n.Private.VolumeVisibilityChange,"")}),s.registerTooltipEvent.call(this,this.el(),a.get("Setting"))}});t.exports=e},{"../../../lang/index":23,"../../../lib/dom":32,"../../../player/base/event/eventtype":70,"../../component":130,"../util":159,"./list":150}],148:[function(e,t,r){var i=e("./selector"),s=e("../../../lib/object"),l=e("../../../lib/dom"),n=(e("../../../lib/event"),e("./util"),e("../../../lib/cookie")),o=e("../../../lib/constants"),a=e("../../../lang/index"),c=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){this.Name=a.get("Subtitle"),this.Type="cc",this.Tooltip=a.get("CC_Switch_To"),i.call(this,e,t)},bindEvent:function(){this.bindCommonEvent();var r=this;this._player.on(c.Private.CCStateChanged,function(e){var t=e.paramData.value,e=e.paramData.lang,e=("on"==t&&e?r._backCCText=e:"off"==t&&""==r._backCCText&&(r._backCCText=r._previousSelection.text),"Off");"on"==t&&(e=r._backCCText),r._player.trigger(c.Private.SelectorUpdateList,{type:"cc",text:e})})},generateList:function(n){var o=document.querySelector("#"+this.id()+" .selector-list"),e=this._player._ccService.tracks,a=this;s.each(e,function(e,t){var r=l.createEl.call(this,"li",{key:e.value,text:e.text}),i=l.createEl.call(this,"span",{key:e.value,text:e.text});e.text==n&&(l.addClass(r,"current"),a._previousSelection=r),i.innerText=e.text,r.appendChild(i),o.appendChild(r)})},execute:function(e){this._backCCText="",n.set(o.SelectedCC,e,365),this._player._ccService.switch(e)}});t.exports=e},{"../../../lang/index":23,"../../../lib/constants":28,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../player/base/event/eventtype":70,"./selector":151,"./util":153}],149:[function(e,t,r){t.exports={CC:e("./cc"),Speed:e("./speed"),Quality:e("./Quality"),Audio:e("./audio")}},{"./Quality":145,"./audio":146,"./cc":148,"./speed":152}],150:[function(e,t,r){var o=e("../../component"),n=e("../../../lib/dom"),a=e("../../../lib/ua"),s=e("../../../lib/event"),l=e("../../../player/base/event/eventtype"),i=e("./export"),c=e("./util"),u=e("../../../lang/index"),e=o.extend({init:function(e,t){for(var r in this.isOpened=!1,o.call(this,e,t),this.addClass(t.className||"prism-setting-list"),i){r=new i[r](e,t);e.addChild(r,t)}},createEl:function(){var e=o.prototype.createEl.call(this,"div"),t="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>",r=t.replace(/{type}/g,"speed").replace("{value}",u.get("Speed")),i=t.replace(/{type}/g,"cc").replace("{value}",u.get("Subtitle")),n=t.replace(/{type}/g,"audio").replace("{value}",u.get("AudioTrack")),t=t.replace(/{type}/g,"quality").replace("{value}",u.get("Quality"));return e.innerHTML=r+i+n+t,e},bindEvent:function(){function t(){i._player.trigger(l.Private.SettingListHide),i.isOpened=!1}function r(e){e&&e.text&&(document.querySelector("#"+i.id()+" .prism-setting-"+e.type+" .current-setting").innerText=e.text)}var i=this,e=(this._player.on(l.Private.SettingListShow,function(e){i.isOpened=!0;e=e.paramData;r(e),n.css(i.el(),"display","block")}),this._player.on(l.Private.UpdateToSettingList,function(e){e=e.paramData;r(e)}),this._player.on(l.Private.SelectorUpdateList,function(e){e=e.paramData;r(e),i._player.trigger(l.Private.SelectorValueChange,e)}),this._player.on(l.Private.SettingListHide,function(){i.isOpened=!1,n.css(i.el(),"display","none")}),s.on(this.el(),"click",function(e){i._player.trigger(l.Private.SettingListHide);var e=e.srcElement||e.target;(e=c.findItemElementForList(e))&&(e=e.getAttribute("type"),i._player.trigger(l.Private.SelectorShow,{type:e}))}),a.IS_MOBILE?"touchleave":"mouseleave");s.on(this.el(),e,function(){t()}),s.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t()}),s.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t()}),this._player.on(l.Private.QualityChange,function(e){var t,r,e=e.paramData;e.levelSwitch&&(t=document.querySelector("#"+i.id()+" .prism-setting-quality .current-setting"),r=u.get("Auto"),-1<t.innerText.indexOf(r))&&(t.innerText=r+(e.desc?"("+e.desc+")":""))})}});t.exports=e},{"../../../lang/index":23,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/ua":49,"../../../player/base/event/eventtype":70,"../../component":130,"./export":149,"./util":153}],151:[function(e,t,r){var i=e("../../component"),n=(e("../../../lib/object"),e("../../../lib/util"),e("../../../lib/ua")),a=(e("../../../lib/cookie"),e("../../../lib/dom")),s=e("../../../lib/event"),l=e("./util"),c=(e("../../../lang/index"),e("../../../player/base/event/eventtype")),e=i.extend({init:function(e,t){this._hasGeneratedList=!1,this._previousSelection=null,this._backupSelector="",i.call(this,e,t),this.className=t.className||"prism-"+this.Type+"-selector prism-setting-selector",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>',e},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var o=this,e=document.querySelector("#"+o.id()+" .selector-list"),t=document.querySelector("#"+o.id()+" .header");function r(){o._hasGeneratedList||(o._clear(),o.generateList(o._backupSelector),o._backupSelector="",o._hasGeneratedList=!0)}this._player.on(c.Private.ChangeURL,function(){o._hasGeneratedList=!1}),s.on(t,"click",function(){o._player.trigger(c.Private.SelectorHide),o._player.trigger(c.Private.SettingListShow,{type:o.Type,text:o._previousSelection?o._previousSelection.text:""})}),s.on(e,"click",function(e){var e=e.srcElement||e.target,t=e.key,r=e.text;void 0!==r&&(o._previousSelection&&a.removeClass(o._previousSelection,"current"),o._previousSelection=l.findliElementForSelector(e),a.addClass(o._previousSelection,"current"),o.execute&&o.execute(t),e=o.Tooltip+"<span>"+r+"</span>",o._player.trigger(c.Private.Info_Show,{text:e,duration:1e3,align:"lb"}))}),o._player.on(c.Private.SelectorHide,function(){i()}),o._player.on(c.Private.SelectorValueChange,function(e){var t=e.paramData;if(t&&t.type==o.Type){var r=document.querySelectorAll("#"+o.id()+" .selector-list li");if(r){var i=r.length;0==i&&(o._backupSelector=t.text);for(var n=0;n<i;n++)if(r[n].text==t.text){o._previousSelection&&a.removeClass(o._previousSelection,"current"),a.addClass(r[n],"current"),o._previousSelection=r[n];break}}}}),o._player.on(c.Private.SettingListShow,function(){r()}),o._player.on(c.Private.SelectorGenerateList,function(e){var t=e.paramData&&e.paramData.type,e=e.paramData&&e.paramData.value;t===o.Type&&(o._hasGeneratedList=!1,e&&(o._backupSelector=e),r())}),o._player.on(c.Private.SelectorShow,function(e){(e=e.paramData).type==o.Type&&(e=document.querySelector("#"+o._player.id()+" .prism-"+e.type+"-selector"),o._hasGeneratedList||r(),a.css(e,"display","block"))});var i=function(){a.css(o.el(),"display","none"),o._player.trigger(c.Private.UpdateToSettingList,{type:o.Type,text:o._previousSelection?o._previousSelection.text:""})},t=n.IS_MOBILE?"touchleave":"mouseleave";s.on(this.el(),t,function(){i()}),s.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&i()}),s.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&i()})},setSelected:function(e){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}});t.exports=e},{"../../../lang/index":23,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../lib/ua":49,"../../../lib/util":51,"../../../player/base/event/eventtype":70,"../../component":130,"./util":153}],152:[function(e,t,r){var i=e("./selector"),a=e("../../../lib/object"),s=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),l=(e("../../../lib/event"),e("./util"),e("../../../lib/constants")),c=e("../../../lang/index"),e=(e("../../../player/base/event/eventtype"),i.extend({init:function(e,t){this.Name=c.get("Speed"),this.Type="speed",this.Tooltip=c.get("Speed_Switch_To"),i.call(this,e,t)},generateList:function(){var n=document.querySelector("#"+this.id()+" .selector-list"),e=l.SpeedLevels,o=this;a.each(e,function(e,t){var r=s.createEl.call(this,"li",{key:e.key,text:e.text}),i=s.createEl.call(this,"span",{key:e.key,text:e.text});i.innerText=e.text,e.text==c.get("Speed_1X_Text")&&(s.addClass(r,"current"),o._previousSelection=r),r.appendChild(i),n.appendChild(r)})},execute:function(e){this._player.setSpeed(e)}}));t.exports=e},{"../../../lang/index":23,"../../../lib/constants":28,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../lib/util":51,"../../../player/base/event/eventtype":70,"./selector":151,"./util":153}],153:[function(e,r,t){r.exports.findliElementForSelector=function(e){var t;return e&&"li"!=e.tagName.toLowerCase()?(t=e.parentElement)&&"li"==t.tagName.toLowerCase()?t:null:e},r.exports.findliElementByKey=function(e,t){document.querySelectors(e);return null},r.exports.findItemElementForList=function(e){var t;return!e||-1<e.className.indexOf("prism-setting-item")||(t=e.parentElement)&&(e=r.exports.findItemElementForList(t)),e}},{}],154:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),u=e("../../lib/util"),o=e("../../lang/index"),p=e("../../player/base/event/eventtype"),a=e("./util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-snapshot-btn")},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var l=this,c=this._player;c.on(p.Private.Snapshot_Hide,function(){n.css(l._el,"display","none")}),a.registerTooltipEvent.call(this,this.el(),o.get("Snapshot")),this.on("click",function(){l.trigger(p.Player.Snapshoting);var e=document.createElement("canvas"),t=c.tag,r=t.videoWidth,i=t.videoHeight,n=c._getSanpshotMatric(),o=(e.width=n.width||r,e.height=n.height||i,c.getCurrentTime()),a=e.getContext("2d"),s=(a.save(),c.getImage()),s=("vertical"==s?(a.translate(0,e.height),a.scale(1,-1)):"horizon"==s&&(a.translate(e.width,0),a.scale(-1,1)),t),t=(c._splayer&&(s=c._el.querySelector("canvas")),a.drawImage(s,0,0,r,i),a.restore(),d(a,c.getOptions()),""),s="";try{t=e.toDataURL("image/jpeg",n.rate||1)}catch(e){s=e}r="",i="";t&&(a=(r=t).substr(r.indexOf(",")+1),i=u.toBinary(a)),l.trigger(p.Player.Snapshoted,{time:o,base64:r,binary:i,error:s})})}}),d=function(e,t){t=t.snapshotWatermark;t&&t.text&&(e.font=t.font,t.fillColor&&(e.fillStyle=t.fillColor,e.fillText(t.text,t.left,t.top)),t.strokeColor&&(e.strokeStyle=t.strokeColor,e.strokeText(t.text,t.left,t.top)),e.stroke())};t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],155:[function(e,t,r){var i=e("../component"),e=(e("../../lib/dom"),e("../../player/base/event/eventtype"),i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-text-overlay")},createEl:function(){return i.prototype.createEl.call(this,"div")},_hide:function(e){},_show:function(e){},bindEvent:function(){}}));t.exports=e},{"../../lib/dom":32,"../../player/base/event/eventtype":70,"../component":130}],156:[function(e,t,r){var i=e("../component"),a=(e("../../lib/util"),e("../../lib/dom")),n=e("../../lib/event"),s=(e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype")),l=e("./util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-thumbnail")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<img></img><span></span>",e},bindEvent:function(){var o=this,e=(n.on(this._el,"mousemove",function(e){e.preventDefault()}),n.on(this._el,"touchmove",function(e){e.preventDefault()}),o._player.on(s.Private.ThumbnailLoaded,function(e){var t,r,i,e=e.paramData;e&&0<e.length&&(t=o._player._thumbnailService.makeUrl(e[0].text),o._player.log("THUMBNAILSTART",{tu:encodeURIComponent(t)}),r=(new Date).getTime(),e[0].isBig?(a.css(o.el(),"background","url("+t+")"),a.css(o.el(),"width",e[0].w+"px"),a.css(o.el(),"height",e[0].h+"px"),o._player.log("THUMBNAILCOMPLETE",{ftt:(new Date).getTime()-r})):((i=document.querySelector("#"+o.id()+" img")).onload=function(){var e=i.width,t=i.height;a.css(o.el(),"width",e+"px"),a.css(o.el(),"height",t+"px"),o._player.log("THUMBNAILCOMPLETE",{ftt:(new Date).getTime()-r})},i.src=t))}),l.throttle(function(e){var t,r,i,e=e[0],n=document.querySelector("#"+o.id()+" span"),e=e.paramData;n.innerText=e.formatTime,e&&((t=o._player._thumbnailService.findAvailableCue(e.time))?t.isBig?(r=o._player._thumbnailService.makeUrl(t.text),a.css(o.el(),"background","url("+r+")"),t.w,t.h,i=-1*t.x+"px "+-1*t.y+"px",a.css(o.el(),"background-position",i)):(i=document.querySelector("#"+o.id()+" img"),r=o._player._thumbnailService.makeUrl(t.text),i.src!=r&&(i.src=r)):(a.css(o.el(),"border","none"),a.css(n,"left","0px")),a.css(o.el(),"display","block"),i=0,r=(t?o.el():n).offsetWidth,i=e.left+r>e.progressWidth?e.left-r:(i=e.left-r/2)<0?0:i,a.css(o.el(),"left",i+"px"))},30));o._player.on(s.Private.ThumbnailShow,e),o._player.on(s.Private.ThumbnailHide,function(e){a.css(o.el(),"display","none")})},_createSamllThumbnail:function(){},disposeUI:function(){}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],157:[function(e,t,r){var i=e("../component"),n=e("../../lib/util"),o=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-time-display")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',e},bindEvent:function(){var t=this;this._player.on(o.Video.DurationChange,function(){var e=n.formatTime(t._player.getDisplayDuration());e?(document.querySelector("#"+t.id()+" .time-bound").style.display="inline",document.querySelector("#"+t.id()+" .duration").style.display="inline",document.querySelector("#"+t.id()+" .duration").innerText=e):(document.querySelector("#"+t.id()+" .duration").style.display="none",document.querySelector("#"+t.id()+" .time-bound").style.display="none")}),this._player.on(o.Video.TimeUpdate,function(){var e=t._player.getCurrentTime(),e=n.formatTime(e);document.querySelector("#"+t.id()+" .current-time")&&(e?(document.querySelector("#"+t.id()+" .current-time").style.display="inline",document.querySelector("#"+t.id()+" .current-time").innerText=e):document.querySelector("#"+t.id()+" .current-time").style.display="none")})}});t.exports=e},{"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130}],158:[function(e,t,r){var i=e("../component"),o=e("../../lib/dom"),a=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-tooltip")},createEl:function(){var e=i.prototype.createEl.call(this,"p");return e.innerText="\u63d0\u793a\u4fe1\u606f",e},bindEvent:function(){var n=this;n._player.on(a.Private.TooltipShow,function(e){var t=document.querySelector("#"+n.id()),e=e.paramData,r=(t.innerText=e.text,o.css(t,"display","block"),t.offsetWidth),i=document.querySelector("#"+n._player.id()+" .prism-controlbar");i&&(i=i.offsetWidth,e.left+r>i?o.css(t,"left",i-r+"px"):o.css(t,"left",e.left-(r-e.width)/2+"px"))}),n._player.on(a.Private.TooltipHide,function(e){var t=document.querySelector("#"+n.id());o.css(t,"display","none")})}});t.exports=e},{"../../lib/dom":32,"../../player/base/event/eventtype":70,"../component":130}],159:[function(e,t,r){var i=e("../../lib/event"),s=e("../../player/base/event/eventtype");t.exports.registerTooltipEvent=function(e,n){function o(){a._controlbarTooltipHandler&&(clearTimeout(a._controlbarTooltipHandler),a._controlbarTooltipHandler=null)}var a=this;i.on(this.el(),"mouseover",function(e){o(),a._controlbarTooltipHandler=setTimeout(function(){a._player.trigger(s.Private.TooltipHide)},4e3);var t=a.el().offsetLeft,r=a.el().offsetWidth,i=n;"function"==typeof n&&(i=n.call(this)),a._player.trigger(s.Private.TooltipShow,{left:t,width:r,text:i})}),i.on(this.el(),"mouseout",function(){o(),a._player.trigger(s.Private.TooltipHide)})},t.exports.throttle=function(r,i){var n=Date.now();return function(){var e=arguments,t=Date.now();i<=t-n&&(r(e),n=t)}},t.exports.debounce=function(r,i){var n;return function(){var e=this,t=arguments;clearTimeout(n),n=setTimeout(function(){r.apply(e,t)},i)}}},{"../../lib/event":33,"../../player/base/event/eventtype":70}],160:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),s=e("./util"),l=e("../../lang/index"),c=e("./volumecontrol"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-volume");var r=new c(e,t);e.addChild(r,t),this.volumeControl=r},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>',e},bindEvent:function(){var r=this,i=r._player,e=(this.icon=document.querySelector("#"+r.id()+"  .volume-icon"),s.registerTooltipEvent.call(this,this.el(),function(){return r._player.muted()||0==r._player.getVolume()?l.get("Muted"):l.get("Volume")}),o.on(this.icon,"click",function(e){var t;r.volumeControl._shown?i.muted()?i.unMute():i.mute():(t=r.el().offsetLeft,r._player.trigger(a.Private.SettingListHide),r._player.trigger(a.Private.SelectorHide),r._player.trigger(a.Private.VolumeVisibilityChange,t),r._player.trigger(a.Private.MarkerTextHide))}),document.querySelector("#"+r.id()+"  .long-horizontal")),t=document.querySelector("#"+r.id()+"  .short-horizontal");o.on(this.el(),"mouseover",function(){n.removeClass(e,"volume-hover-animation"),setTimeout(function(){n.addClass(e,"volume-hover-animation")}),setTimeout(function(){n.removeClass(e,"volume-hover-animation"),n.addClass(t,"volume-hover-animation"),setTimeout(function(){n.removeClass(t,"volume-hover-animation"),n.addClass(e,"volume-hover-animation")},300)},300)}),o.on(window,"resize",function(){var e;r.volumeControl._shown&&(e=r.el().offsetLeft,r._player.trigger(a.Private.VolumeUpdatePosition,e))})}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../player/base/event/eventtype":70,"../component":130,"./util":159,"./volumecontrol":161}],161:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),e=(e("./util"),e("../../lang/index"),i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-volume-control"),this._shown=!1},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>',e},bindEvent:function(){var r=this;this.icon=document.querySelector("#"+r._player.id()+"  .volume-icon"),this.control=document.querySelector("#"+r.id()),this.volumnValue=document.querySelector("#"+r.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+r.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+r.id()+"  .volume-cursor"),this._player.on(a.Private.VolumeVisibilityChange,function(e){var t,e=e.paramData;!r._shown&&e?(t=r._player.getVolume(),r._setVolumnUI(t),n.css(r.control,"display","block"),e&&r._updatePosition(e),r._shown=!0):r._hide()}),this._player.on(a.Private.VolumeUpdatePosition,function(e){e=e.paramData;r._shown&&r._updatePosition(e)}),this._player.on(a.Private.ControlBarClick,function(e){n.hasClass(e.paramData.target,"prism-controlbar-bg")&&r._hide()}),o.on(this.volumnRange,"click",function(e){e=n.getPointerPosition(r.volumnRange,e).y;e<0||1<e||(r._setVolumnUI(e=1<(e=e<0?0:e)?1:e),r._setMuteUI(e),r._player.setVolume(e))}),o.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&r._hide()}),o.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&r._hide()}),o.on(this.volumnCursor,"mousedown",function(e){r._onMouseDown(e)}),o.on(this.volumnCursor,"touchstart",function(e){r._onMouseDown(e)}),this._player.on(a.Private.VolumnChanged,function(e){e=e.paramData;-1<e&&r._setVolumnUI(e),r._setMuteUI(e)}),o.on(this.control,"mouseleave",function(){r._offEvent(),r._hide()}),o.on(this.control,"mouseover",function(){n.addClass(r.control,"hover")}),r._rangeBottom=r._getBottom()},_getBottom:function(){var e;return window.getComputedStyle?(e=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom"),parseFloat(e)):26},_onMouseDown:function(e){var t=this;e.preventDefault(),o.on(this.control,"mousemove",function(e){t._onMouseMove(e)}),o.on(this.control,"touchmove",function(e){t._onMouseMove(e)}),o.on(this._player.tag,"mouseup",function(e){t._onMouseUp(e)}),o.on(this._player.tag,"touchend",function(e){t._onMouseUp(e)}),o.on(this.control,"mouseup",function(e){t._onMouseUp(e)}),o.on(this.control,"touchend",function(e){t._onMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&(e=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2),this._player.setVolume(e),this._setMuteUI(e))},_onMouseMove:function(e){e.preventDefault();e=n.getPointerPosition(this.volumnRange,e).y;e<0||1<e||this._setVolumnUI(e=1<(e=e<0?0:e)?1:e)},_getPosition:function(e){for(var t=this.volumnRange,r=0;t=t.offsetParent;)r+=t.offsetTop;var i=this.volumnRange.offsetHeight,n=this.volumnCursor.offsetHeight,o=(e.touches?e.touches[0]:e).pageY;return(i-((o=i<o-r?e.clientY:o)-r)+n)/this.volumnRange.offsetHeight},_offEvent:function(){o.off(this._player.tag,"mouseup"),o.off(this._player.tag,"touchend"),o.off(this.control,"mousemove"),o.off(this.control,"touchmove"),o.off(this.control,"mouseup"),o.off(this.control,"touchend")},_setMuteUI:function(e){isNaN(e)||(0==e||-1==e?n.addClass(this.icon,"mute"):n.removeClass(this.icon,"mute"))},_setVolumnUI:function(e){isNaN(e)||(n.css(this.volumnValue,"height",100*e+"%"),n.css(this.volumnCursor,"bottom",100*(e=1==e?.99:e)+"%"))},_hide:function(){n.css(this.control,"display","none"),this._shown=!1},_updatePosition:function(e){n.css(this.control,"left",e-5+"px")}}));t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],162:[function(e,t,r){t.exports={H5Loading:e("./component/h5-loading"),bigPlayButton:e("./component/big-play-button"),controlBar:e("./component/controlbar"),progress:e("./component/progress"),playButton:e("./component/play-button"),liveDisplay:e("./component/live-display"),timeDisplay:e("./component/time-display"),fullScreenButton:e("./component/fullscreen-button"),volume:e("./component/volume"),snapshot:e("./component/snapshot"),errorDisplay:e("./component/error-display"),infoDisplay:e("./component/info-display"),liveShiftProgress:e("../commonui/liveshiftprogress"),liveShiftTimeDisplay:e("../commonui/livetimedisplay"),setting:e("./component/setting/button"),subtitle:e("./component/cc-button"),thumbnail:e("./component/thumbnail"),tooltip:e("./component/tooltip")}},{"../commonui/liveshiftprogress":12,"../commonui/livetimedisplay":13,"./component/big-play-button":131,"./component/cc-button":132,"./component/controlbar":133,"./component/error-display":135,"./component/fullscreen-button":136,"./component/h5-loading":137,"./component/info-display":138,"./component/live-display":140,"./component/play-button":142,"./component/progress":143,"./component/setting/button":147,"./component/snapshot":154,"./component/thumbnail":156,"./component/time-display":157,"./component/tooltip":158,"./component/volume":160}]},{},[15])(15)});
/*! JsRender v1.0.13: http://jsviews.com/#jsrender */
/*! **VERSION FOR WEB** (For NODE.JS see http://jsviews.com/download/jsrender-node.js) */
/*
 * Best-of-breed templating in browser or on Node.js.
 * Does not require jQuery, or HTML DOM
 * Integrates with JsViews (http://jsviews.com/#jsviews)
 *
 * Copyright 2021, Boris Moore
 * Released under the MIT License.
 */

//jshint -W018, -W041, -W120

(function(factory, global) {
	// global var is the this object, which is window when running in the usual browser environment
	var $ = global.jQuery;

	if (typeof exports === "object") { // CommonJS e.g. Browserify
		module.exports = $
			? factory(global, $)
			: function($) { // If no global jQuery, take optional jQuery passed as parameter: require('jsrender')(jQuery)
				if ($ && !$.fn) {
					throw "Provide jQuery or null";
				}
				return factory(global, $);
			};
	} else if (typeof define === "function" && define.amd) { // AMD script loader, e.g. RequireJS
		define(function() {
			return factory(global);
		});
	} else { // Browser using plain <script> tag
		factory(global, false);
	}
} (

// factory (for jsrender.js)
function(global, $) {
"use strict";

//========================== Top-level vars ==========================

// global var is the this object, which is window when running in the usual browser environment
var setGlobals = $ === false; // Only set globals if script block in browser (not AMD and not CommonJS)

$ = $ && $.fn ? $ : global.jQuery; // $ is jQuery passed in by CommonJS loader (Browserify), or global jQuery.

var versionNumber = "v1.0.13",
	jsvStoreName, rTag, rTmplString, topView, $views, $expando,
	_ocp = "_ocp",      // Observable contextual parameter

	$isFunction, $isArray, $templates, $converters, $helpers, $tags, $sub, $subSettings, $subSettingsAdvanced, $viewsSettings,
	delimOpenChar0, delimOpenChar1, delimCloseChar0, delimCloseChar1, linkChar, setting, baseOnError,

	isRenderCall,
	rNewLine = /[ \t]*(\r\n|\n|\r)/g,
	rUnescapeQuotes = /\\(['"\\])/g, // Unescape quotes and trim
	rEscapeQuotes = /['"\\]/g, // Escape quotes and \ character
	rBuildHash = /(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,
	rTestElseIf = /^if\s/,
	rFirstElem = /<(\w+)[>\s]/,
	rAttrEncode = /[\x00`><"'&=]/g, // Includes > encoding since rConvertMarkers in JsViews does not skip > characters in attribute strings
	rIsHtml = /[\x00`><\"'&=]/,
	rHasHandlers = /^on[A-Z]|^convert(Back)?$/,
	rWrappedInViewMarker = /^\#\d+_`[\s\S]*\/\d+_`$/,
	rHtmlEncode = rAttrEncode,
	rDataEncode = /[&<>]/g,
	rDataUnencode = /&(amp|gt|lt);/g,
	rBracketQuote = /\[['"]?|['"]?\]/g,
	viewId = 0,
	charEntities = {
		"&": "&amp;",
		"<": "&lt;",
		">": "&gt;",
		"\x00": "&#0;",
		"'": "&#39;",
		'"': "&#34;",
		"`": "&#96;",
		"=": "&#61;"
	},
	charsFromEntities = {
		amp: "&",
		gt: ">",
		lt: "<"
	},
	HTML = "html",
	STRING = "string",
	OBJECT = "object",
	tmplAttr = "data-jsv-tmpl",
	jsvTmpl = "jsvTmpl",
	indexStr = "For #index in nested block use #getIndex().",
	cpFnStore = {},     // Compiled furnctions for computed values in template expressions (properties, methods, helpers)
	$render = {},

	jsr = global.jsrender,
	jsrToJq = jsr && $ && !$.render, // JsRender already loaded, without jQuery. but we will re-load it now to attach to jQuery

	jsvStores = {
		template: {
			compile: compileTmpl
		},
		tag: {
			compile: compileTag
		},
		viewModel: {
			compile: compileViewModel
		},
		helper: {},
		converter: {}
	};

	// views object ($.views if jQuery is loaded, jsrender.views if no jQuery, e.g. in Node.js)
	$views = {
		jsviews: versionNumber,
		sub: {
			// subscription, e.g. JsViews integration
			rPath: /^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,
			//        not                               object     helper    view  viewProperty pathTokens      leafToken

			rPrm: /(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(?:(\()\s*)?\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,
			//   lftPrn0           lftPrn         bound     path               operator     err                                          eq      path2 late            prn      comma  lftPrn2          apos quot        rtPrn  rtPrnDot                  prn2     space

			View: View,
			Err: JsViewsError,
			tmplFn: tmplFn,
			parse: parseParams,
			extend: $extend,
			extendCtx: extendCtx,
			syntaxErr: syntaxError,
			onStore: {
				template: function(name, item) {
					if (item === null) {
						delete $render[name];
					} else if (name) {
						$render[name] = item;
					}
				}
			},
			addSetting: addSetting,
			settings: {
				allowCode: false
			},
			advSet: noop, // Update advanced settings
			_thp: tagHandlersFromProps,
			_gm: getMethod,
			_tg: function() {}, // Constructor for tagDef
			_cnvt: convertVal,
			_tag: renderTag,
			_er: error,
			_err: onRenderError,
			_cp: retVal, // Get observable contextual parameters (or properties) ~foo=expr. In JsRender, simply returns val.
			_sq: function(token) {
				if (token === "constructor") {
					syntaxError("");
				}
				return token;
			}
		},
		settings: {
			delimiters: $viewsDelimiters,
			advanced: function(value) {
				return value
					? (
							$extend($subSettingsAdvanced, value),
							$sub.advSet(),
							$viewsSettings
						)
						: $subSettingsAdvanced;
				}
		},
		map: dataMap // If jsObservable loaded first, use that definition of dataMap
	};

function getDerivedMethod(baseMethod, method) {
	return function() {
		var ret,
			tag = this,
			prevBase = tag.base;

		tag.base = baseMethod; // Within method call, calling this.base will call the base method
		ret = method.apply(tag, arguments); // Call the method
		tag.base = prevBase; // Replace this.base to be the base method of the previous call, for chained calls
		return ret;
	};
}

function getMethod(baseMethod, method) {
	// For derived methods (or handlers declared declaratively as in {{:foo onChange=~fooChanged}} replace by a derived method, to allow using this.base(...)
	// or this.baseApply(arguments) to call the base implementation. (Equivalent to this._super(...) and this._superApply(arguments) in jQuery UI)
	if ($isFunction(method)) {
		method = getDerivedMethod(
				!baseMethod
					? noop // no base method implementation, so use noop as base method
					: baseMethod._d
						? baseMethod // baseMethod is a derived method, so use it
						: getDerivedMethod(noop, baseMethod), // baseMethod is not derived so make its base method be the noop method
				method
			);
		method._d = (baseMethod && baseMethod._d || 0) + 1; // Add flag for derived method (incremented for derived of derived...)
	}
	return method;
}

function tagHandlersFromProps(tag, tagCtx) {
	var prop,
		props = tagCtx.props;
	for (prop in props) {
		if (rHasHandlers.test(prop) && !(tag[prop] && tag[prop].fix)) { // Don't override handlers with fix expando (used in datepicker and spinner)
			tag[prop] = prop !== "convert" ? getMethod(tag.constructor.prototype[prop], props[prop]) : props[prop];
			// Copy over the onFoo props, convert and convertBack from tagCtx.props to tag (overrides values in tagDef).
			// Note: unsupported scenario: if handlers are dynamically added ^onFoo=expression this will work, but dynamically removing will not work.
		}
	}
}

function retVal(val) {
	return val;
}

function noop() {
	return "";
}

function dbgBreak(val) {
	// Usage examples: {{dbg:...}}, {{:~dbg(...)}}, {{dbg .../}}, {^{for ... onAfterLink=~dbg}} etc.
	try {
		console.log("JsRender dbg breakpoint: " + val);
		throw "dbg breakpoint"; // To break here, stop on caught exceptions.
	}
	catch (e) {}
	return this.base ? this.baseApply(arguments) : val;
}

function JsViewsError(message) {
	// Error exception type for JsViews/JsRender
	// Override of $.views.sub.Error is possible
	this.name = ($.link ? "JsViews" : "JsRender") + " Error";
	this.message = message || this.name;
}

function $extend(target, source) {
	if (target) {
		for (var name in source) {
			target[name] = source[name];
		}
		return target;
	}
}

(JsViewsError.prototype = new Error()).constructor = JsViewsError;

//========================== Top-level functions ==========================

//===================
// views.delimiters
//===================

	/**
	* Set the tag opening and closing delimiters and 'link' character. Default is "{{", "}}" and "^"
	* openChars, closeChars: opening and closing strings, each with two characters
	* $.views.settings.delimiters(...)
	*
	* @param {string}   openChars
	* @param {string}   [closeChars]
	* @param {string}   [link]
	* @returns {Settings}
	*
	* Get delimiters
	* delimsArray = $.views.settings.delimiters()
	*
	* @returns {string[]}
	*/
function $viewsDelimiters(openChars, closeChars, link) {
	if (!openChars) {
		return $subSettings.delimiters;
	}
	if ($isArray(openChars)) {
		return $viewsDelimiters.apply($views, openChars);
	}
	linkChar = link ? link[0] : linkChar;
	if (!/^(\W|_){5}$/.test(openChars + closeChars + linkChar)) {
		error("Invalid delimiters"); // Must be non-word characters, and openChars and closeChars must each be length 2
	}
	delimOpenChar0 = openChars[0];
	delimOpenChar1 = openChars[1];
	delimCloseChar0 = closeChars[0];
	delimCloseChar1 = closeChars[1];

	$subSettings.delimiters = [delimOpenChar0 + delimOpenChar1, delimCloseChar0 + delimCloseChar1, linkChar];

	// Escape the characters - since they could be regex special characters
	openChars = "\\" + delimOpenChar0 + "(\\" + linkChar + ")?\\" + delimOpenChar1; // Default is "{^{"
	closeChars = "\\" + delimCloseChar0 + "\\" + delimCloseChar1;                   // Default is "}}"
	// Build regex with new delimiters
	//          [tag    (followed by / space or })  or cvtr+colon or html or code] followed by space+params then convertBack?
	rTag = "(?:(\\w+(?=[\\/\\s\\" + delimCloseChar0 + "]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"
		+ delimCloseChar0 + "]|\\" + delimCloseChar0 + "(?!\\" + delimCloseChar1 + "))*?)";

	// Make rTag available to JsViews (or other components) for parsing binding expressions
	$sub.rTag = "(?:" + rTag + ")";
	//                        { ^? {   tag+params slash?  or closingTag                                                   or comment
	rTag = new RegExp("(?:" + openChars + rTag + "(\\/)?|\\" + delimOpenChar0 + "(\\" + linkChar + ")?\\" + delimOpenChar1 + "(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))" + closeChars, "g");

	// Default:  bind     tagName         cvt   cln html code    params            slash   bind2         closeBlk  comment
	//      /(?:{(\^)?{(?:(\w+(?=[\/\s}]))|(\w+)?(:)|(>)|(\*))\s*((?:[^}]|}(?!}))*?)(\/)?|{(\^)?{(?:(?:\/(\w+))\s*|!--[\s\S]*?--))}}

	$sub.rTmpl = new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|" + openChars + ".*" + closeChars);
	// $sub.rTmpl looks for initial or final white space, html tags or { or } char not preceded by \\, or JsRender tags {{xxx}}.
	// Each of these strings are considered NOT to be jQuery selectors
	return $viewsSettings;
}

//=========
// View.get
//=========

function getView(inner, type) { //view.get(inner, type)
	if (!type && inner !== true) {
		// view.get(type)
		type = inner;
		inner = undefined;
	}

	var views, i, l, found,
		view = this,
		root = type === "root";
		// view.get("root") returns view.root, view.get() returns view.parent, view.get(true) returns view.views[0].

	if (inner) {
		// Go through views - this one, and all nested ones, depth-first - and return first one with given type.
		// If type is undefined, i.e. view.get(true), return first child view.
		found = type && view.type === type && view;
		if (!found) {
			views = view.views;
			if (view._.useKey) {
				for (i in views) {
					if (found = type ? views[i].get(inner, type) : views[i]) {
						break;
					}
				}
			} else {
				for (i = 0, l = views.length; !found && i < l; i++) {
					found = type ? views[i].get(inner, type) : views[i];
				}
			}
		}
	} else if (root) {
		// Find root view. (view whose parent is top view)
		found = view.root;
	} else if (type) {
		while (view && !found) {
			// Go through views - this one, and all parent ones - and return first one with given type.
			found = view.type === type ? view : undefined;
			view = view.parent;
		}
	} else {
		found = view.parent;
	}
	return found || undefined;
}

function getNestedIndex() {
	var view = this.get("item");
	return view ? view.index : undefined;
}

getNestedIndex.depends = function() {
	return [this.get("item"), "index"];
};

function getIndex() {
	return this.index;
}

getIndex.depends = "index";

//==================
// View.ctxPrm, etc.
//==================

/* Internal private: view._getOb() */
function getPathObject(ob, path, ltOb, fn) {
	// Iterate through path to late paths: @a.b.c paths
	// Return "" (or noop if leaf is a function @a.b.c(...) ) if intermediate object not yet available
	var prevOb, tokens, l,
		i = 0;
	if (ltOb === 1) {
		fn = 1;
		ltOb = undefined;
	}
	// Paths like ^a^b^c or ~^a^b^c will not throw if an object in path is undefined.
	if (path) {
		tokens = path.split(".");
		l = tokens.length;

		for (; ob && i < l; i++) {
			prevOb = ob;
			ob = tokens[i] ? ob[tokens[i]] : ob;
		}
	}
	if (ltOb) {
		ltOb.lt = ltOb.lt || i<l; // If i < l there was an object in the path not yet available
	}
	return ob === undefined
		? fn ? noop : ""
		: fn ? function() {
			return ob.apply(prevOb, arguments);
		} : ob;
}

function contextParameter(key, value, get) {
	// Helper method called as view.ctxPrm(key) for helpers or template parameters ~foo - from compiled template or from context callback
	var wrapped, deps, res, obsCtxPrm, tagElse, callView, newRes,
		storeView = this,
		isUpdate = !isRenderCall && arguments.length > 1,
		store = storeView.ctx;
	if (key) {
		if (!storeView._) { // tagCtx.ctxPrm() call
			tagElse = storeView.index;
			storeView = storeView.tag;
		}
		callView = storeView;
		if (store && store.hasOwnProperty(key) || (store = $helpers).hasOwnProperty(key)) {
			res = store[key];
			if (key === "tag" || key === "tagCtx" || key === "root" || key === "parentTags") {
				return res;
			}
		} else {
			store = undefined;
		}
		if (!isRenderCall && storeView.tagCtx || storeView.linked) { // Data-linked view, or tag instance
			if (!res || !res._cxp) {
				// Not a contextual parameter
				// Set storeView to tag (if this is a tag.ctxPrm() call) or to root view ("data" view of linked template)
				storeView = storeView.tagCtx || $isFunction(res)
					? storeView // Is a tag, not a view, or is a computed contextual parameter, so scope to the callView, no the 'scope view'
					: (storeView = storeView.scope || storeView,
						!storeView.isTop && storeView.ctx.tag // If this view is in a tag, set storeView to the tag
							|| storeView);
				if (res !== undefined && storeView.tagCtx) {
					// If storeView is a tag, but the contextual parameter has been set at at higher level (e.g. helpers)...
					storeView = storeView.tagCtx.view.scope; // then move storeView to the outer level (scope of tag container view)
				}
				store = storeView._ocps;
				res = store && store.hasOwnProperty(key) && store[key] || res;
				if (!(res && res._cxp) && (get || isUpdate)) {
					// Create observable contextual parameter
					(store || (storeView._ocps = storeView._ocps || {}))[key]
						= res
						= [{
							_ocp: res, // The observable contextual parameter value
							_vw: callView,
							_key: key
						}];
					res._cxp = {
						path: _ocp,
						ind: 0,
						updateValue: function(val, path) {
							$.observable(res[0]).setProperty(_ocp, val); // Set the value (res[0]._ocp)
							return this;
						}
					};
				}
			}
			if (obsCtxPrm = res && res._cxp) {
				// If this helper resource is an observable contextual parameter
				if (arguments.length > 2) {
					deps = res[1] ? $sub._ceo(res[1].deps) : [_ocp]; // fn deps (with any exprObs cloned using $sub._ceo)
					deps.unshift(res[0]); // view
					deps._cxp = obsCtxPrm;
					// In a context callback for a contextual param, we set get = true, to get ctxPrm [view, dependencies...] array - needed for observe call
					return deps;
				}
				tagElse = obsCtxPrm.tagElse;
				newRes = res[1] // linkFn for compiled expression
					? obsCtxPrm.tag && obsCtxPrm.tag.cvtArgs
						? obsCtxPrm.tag.cvtArgs(tagElse, 1)[obsCtxPrm.ind] // = tag.bndArgs() - for tag contextual parameter
						: res[1](res[0].data, res[0], $sub) // = fn(data, view, $sub) for compiled binding expression
					: res[0]._ocp; // Observable contextual parameter (uninitialized, or initialized as static expression, so no path dependencies)
				if (isUpdate) {
					$sub._ucp(key, value, storeView, obsCtxPrm); // Update observable contextual parameter
					return storeView;
				}
				res = newRes;
			}
		}
		if (res && $isFunction(res)) {
			// If a helper is of type function we will wrap it, so if called with no this pointer it will be called with the
			// view as 'this' context. If the helper ~foo() was in a data-link expression, the view will have a 'temporary' linkCtx property too.
			// Note that helper functions on deeper paths will have specific this pointers, from the preceding path.
			// For example, ~util.foo() will have the ~util object as 'this' pointer
			wrapped = function() {
				return res.apply((!this || this === global) ? callView : this, arguments);
			};
			$extend(wrapped, res); // Attach same expandos (if any) to the wrapped function
		}
		return wrapped || res;
	}
}

/* Internal private: view._getTmpl() */
function getTemplate(tmpl) {
	return tmpl && (tmpl.fn
		? tmpl
		: this.getRsc("templates", tmpl) || $templates(tmpl)); // not yet compiled
}

//==============
// views._cnvt
//==============

function convertVal(converter, view, tagCtx, onError) {
	// Called from compiled template code for {{:}}
	// self is template object or linkCtx object
	var tag, linkCtx, value, argsLen, bindTo,
		// If tagCtx is an integer, then it is the key for the compiled function to return the boundTag tagCtx
		boundTag = typeof tagCtx === "number" && view.tmpl.bnds[tagCtx-1];

	if (onError === undefined && boundTag && boundTag._lr) { // lateRender
		onError = "";
	}
	if (onError !== undefined) {
		tagCtx = onError = {props: {}, args: [onError]};
	} else if (boundTag) {
		tagCtx = boundTag(view.data, view, $sub);
	}
	boundTag = boundTag._bd && boundTag;
	if (converter || boundTag) {
		linkCtx = view._lc; // For data-link="{cvt:...}"... See onDataLinkedTagChange
		tag = linkCtx && linkCtx.tag;
		tagCtx.view = view;
		if (!tag) {
			tag = $extend(new $sub._tg(), {
				_: {
					bnd: boundTag,
					unlinked: true,
					lt: tagCtx.lt // If a late path @some.path has not returned @some object, mark tag as late
				},
				inline: !linkCtx,
				tagName: ":",
				convert: converter,
				onArrayChange: true,
				flow: true,
				tagCtx: tagCtx,
				tagCtxs: [tagCtx],
				_is: "tag"
			});
			argsLen = tagCtx.args.length;
			if (argsLen>1) {
				bindTo = tag.bindTo = [];
				while (argsLen--) {
					bindTo.unshift(argsLen); // Bind to all the arguments - generate bindTo array: [0,1,2...]
				}
			}
			if (linkCtx) {
				linkCtx.tag = tag;
				tag.linkCtx = linkCtx;
			}
			tagCtx.ctx = extendCtx(tagCtx.ctx, (linkCtx ? linkCtx.view : view).ctx);
			tagHandlersFromProps(tag, tagCtx);
		}
		tag._er = onError && value;
		tag.ctx = tagCtx.ctx || tag.ctx || {};
		tagCtx.ctx = undefined;
		value = tag.cvtArgs()[0]; // If there is a convertBack but no convert, converter will be "true"
		tag._er = onError && value;
	} else {
		value = tagCtx.args[0];
	}

	// Call onRender (used by JsViews if present, to add binding annotations around rendered content)
	value = boundTag && view._.onRender
		? view._.onRender(value, view, tag)
		: value;
	return value != undefined ? value : "";
}

function convertArgs(tagElse, bound) { // tag.cvtArgs() or tag.cvtArgs(tagElse?, true?)
	var l, key, boundArgs, args, bindFrom, tag, converter,
		tagCtx = this;

	if (tagCtx.tagName) {
		tag = tagCtx;
		tagCtx = (tag.tagCtxs || [tagCtx])[tagElse||0];
		if (!tagCtx) {
			return;
		}
	} else {
		tag = tagCtx.tag;
	}

	bindFrom = tag.bindFrom;
	args = tagCtx.args;

	if ((converter = tag.convert) && typeof converter === STRING) {
		converter = converter === "true"
			? undefined
			: (tagCtx.view.getRsc("converters", converter) || error("Unknown converter: '" + converter + "'"));
	}

	if (converter && !bound) { // If there is a converter, use a copy of the tagCtx.args array for rendering, and replace the args[0] in
		args = args.slice(); // the copied array with the converted value. But we do not modify the value of tag.tagCtx.args[0] (the original args array)
	}
	if (bindFrom) { // Get the values of the boundArgs
		boundArgs = [];
		l = bindFrom.length;
		while (l--) {
			key = bindFrom[l];
			boundArgs.unshift(argOrProp(tagCtx, key));
		}
		if (bound) {
			args = boundArgs; // Call to bndArgs() - returns the boundArgs
		}
	}
	if (converter) {
		converter = converter.apply(tag, boundArgs || args);
		if (converter === undefined) {
			return args; // Returning undefined from a converter is equivalent to not having a converter.
		}
		bindFrom = bindFrom || [0];
		l = bindFrom.length;
		if (!$isArray(converter) || (converter.arg0 !== false && (l === 1 || converter.length !== l || converter.arg0))) {
			converter = [converter]; // Returning converter as first arg, even if converter value is an array
			bindFrom = [0];
			l = 1;
		}
		if (bound) {        // Call to bndArgs() - so apply converter to all boundArgs
			args = converter; // The array of values returned from the converter
		} else {            // Call to cvtArgs()
			while (l--) {
				key = bindFrom[l];
				if (+key === key) {
					args[key] = converter[l];
				}
			}
		}
	}
	return args;
}

function argOrProp(context, key) {
	context = context[+key === key ? "args" : "props"];
	return context && context[key];
}

function convertBoundArgs(tagElse) { // tag.bndArgs()
	return this.cvtArgs(tagElse, 1);
}

//=============
// views.tag
//=============

/* view.getRsc() */
function getResource(resourceType, itemName) {
	var res, store,
		view = this;
	if (typeof itemName === STRING) {
		while ((res === undefined) && view) {
			store = view.tmpl && view.tmpl[resourceType];
			res = store && store[itemName];
			view = view.parent;
		}
		return res || $views[resourceType][itemName];
	}
}

function renderTag(tagName, parentView, tmpl, tagCtxs, isUpdate, onError) {
	function bindToOrBindFrom(type) {
		var bindArray = tag[type];

		if (bindArray !== undefined) {
			bindArray = $isArray(bindArray) ? bindArray : [bindArray];
			m = bindArray.length;
			while (m--) {
				key = bindArray[m];
				if (!isNaN(parseInt(key))) {
					bindArray[m] = parseInt(key); // Convert "0" to 0, etc.
				}
			}
		}

		return bindArray || [0];
	}

	parentView = parentView || topView;
	var tag, tagDef, template, tags, attr, parentTag, l, m, n, itemRet, tagCtx, tagCtxCtx, ctxPrm, bindTo, bindFrom, initVal,
		content, callInit, mapDef, thisMap, args, bdArgs, props, tagDataMap, contentCtx, key, bindFromLength, bindToLength, linkedElement, defaultCtx,
		i = 0,
		ret = "",
		linkCtx = parentView._lc || false, // For data-link="{myTag...}"... See onDataLinkedTagChange
		ctx = parentView.ctx,
		parentTmpl = tmpl || parentView.tmpl,
		// If tagCtxs is an integer, then it is the key for the compiled function to return the boundTag tagCtxs
		boundTag = typeof tagCtxs === "number" && parentView.tmpl.bnds[tagCtxs-1];

	if (tagName._is === "tag") {
		tag = tagName;
		tagName = tag.tagName;
		tagCtxs = tag.tagCtxs;
		template = tag.template;
	} else {
		tagDef = parentView.getRsc("tags", tagName) || error("Unknown tag: {{" + tagName + "}} ");
		template = tagDef.template;
	}
	if (onError === undefined && boundTag && (boundTag._lr = (tagDef.lateRender && boundTag._lr!== false || boundTag._lr))) {
		onError = ""; // If lateRender, set temporary onError, to skip initial rendering (and render just "")
	}
	if (onError !== undefined) {
		ret += onError;
		tagCtxs = onError = [{props: {}, args: [], params: {props:{}}}];
	} else if (boundTag) {
		tagCtxs = boundTag(parentView.data, parentView, $sub);
	}

	l = tagCtxs.length;
	for (; i < l; i++) {
		tagCtx = tagCtxs[i];
		content = tagCtx.tmpl;
		if (!linkCtx || !linkCtx.tag || i && !linkCtx.tag.inline || tag._er || content && +content===content) {
			// Initialize tagCtx
			// For block tags, tagCtx.tmpl is an integer > 0
			if (content && parentTmpl.tmpls) {
				tagCtx.tmpl = tagCtx.content = parentTmpl.tmpls[content - 1]; // Set the tmpl property to the content of the block tag
			}
			tagCtx.index = i;
			tagCtx.ctxPrm = contextParameter;
			tagCtx.render = renderContent;
			tagCtx.cvtArgs = convertArgs;
			tagCtx.bndArgs = convertBoundArgs;
			tagCtx.view = parentView;
			tagCtx.ctx = extendCtx(extendCtx(tagCtx.ctx, tagDef && tagDef.ctx), ctx); // Clone and extend parentView.ctx
		}
		if (tmpl = tagCtx.props.tmpl) {
			// If the tmpl property is overridden, set the value (when initializing, or, in case of binding: ^tmpl=..., when updating)
			tagCtx.tmpl = parentView._getTmpl(tmpl);
			tagCtx.content = tagCtx.content || tagCtx.tmpl;
		}

		if (!tag) {
			// This will only be hit for initial tagCtx (not for {{else}}) - if the tag instance does not exist yet
			// If the tag has not already been instantiated, we will create a new instance.
			// ~tag will access the tag, even within the rendering of the template content of this tag.
			// From child/descendant tags, can access using ~tag.parent, or ~parentTags.tagName
			tag = new tagDef._ctr();
			callInit = !!tag.init;

			tag.parent = parentTag = ctx && ctx.tag;
			tag.tagCtxs = tagCtxs;

			if (linkCtx) {
				tag.inline = false;
				linkCtx.tag = tag;
			}
			tag.linkCtx = linkCtx;
			if (tag._.bnd = boundTag || linkCtx.fn) {
				// Bound if {^{tag...}} or data-link="{tag...}"
				tag._.ths = tagCtx.params.props["this"]; // Tag has a this=expr binding, to get javascript reference to tag instance
				tag._.lt = tagCtxs.lt; // If a late path @some.path has not returned @some object, mark tag as late
				tag._.arrVws = {};
			} else if (tag.dataBoundOnly) {
				error(tagName + " must be data-bound:\n{^{" + tagName + "}}");
			}
			//TODO better perf for childTags() - keep child tag.tags array, (and remove child, when disposed)
			// tag.tags = [];
		} else if (linkCtx && linkCtx.fn._lr) {
			callInit = !!tag.init;
		}
		tagDataMap = tag.dataMap;

		tagCtx.tag = tag;
		if (tagDataMap && tagCtxs) {
			tagCtx.map = tagCtxs[i].map; // Copy over the compiled map instance from the previous tagCtxs to the refreshed ones
		}
		if (!tag.flow) {
			tagCtxCtx = tagCtx.ctx = tagCtx.ctx || {};

			// tags hash: tag.ctx.tags, merged with parentView.ctx.tags,
			tags = tag.parents = tagCtxCtx.parentTags = ctx && extendCtx(tagCtxCtx.parentTags, ctx.parentTags) || {};
			if (parentTag) {
				tags[parentTag.tagName] = parentTag;
				//TODO better perf for childTags: parentTag.tags.push(tag);
			}
			tags[tag.tagName] = tagCtxCtx.tag = tag;
			tagCtxCtx.tagCtx = tagCtx;
		}
	}
	if (!(tag._er = onError)) {
		tagHandlersFromProps(tag, tagCtxs[0]);
		tag.rendering = {rndr: tag.rendering}; // Provide object for state during render calls to tag and elses. (Used by {{if}} and {{for}}...)
		for (i = 0; i < l; i++) { // Iterate tagCtx for each {{else}} block
			tagCtx = tag.tagCtx = tagCtxs[i];
			props = tagCtx.props;
			tag.ctx = tagCtx.ctx;

			if (!i) {
				if (callInit) {
					tag.init(tagCtx, linkCtx, tag.ctx);
					callInit = undefined;
				}
				if (!tagCtx.args.length && tagCtx.argDefault !== false && tag.argDefault !== false) {
					tagCtx.args = args = [tagCtx.view.data]; // Missing first arg defaults to the current data context
					tagCtx.params.args = ["#data"];
				}

				bindTo = bindToOrBindFrom("bindTo");

				if (tag.bindTo !== undefined) {
					tag.bindTo = bindTo;
				}

				if (tag.bindFrom !== undefined) {
					tag.bindFrom = bindToOrBindFrom("bindFrom");
				} else if (tag.bindTo) {
					tag.bindFrom = tag.bindTo = bindTo;
				}
				bindFrom = tag.bindFrom || bindTo;

				bindToLength = bindTo.length;
				bindFromLength = bindFrom.length;

				if (tag._.bnd && (linkedElement = tag.linkedElement)) {
					tag.linkedElement = linkedElement = $isArray(linkedElement) ? linkedElement: [linkedElement];

					if (bindToLength !== linkedElement.length) {
						error("linkedElement not same length as bindTo");
					}
				}
				if (linkedElement = tag.linkedCtxParam) {
					tag.linkedCtxParam = linkedElement = $isArray(linkedElement) ? linkedElement: [linkedElement];

					if (bindFromLength !== linkedElement.length) {
						error("linkedCtxParam not same length as bindFrom/bindTo");
					}
				}

				if (bindFrom) {
					tag._.fromIndex = {}; // Hash of bindFrom index which has same path value as bindTo index. fromIndex = tag._.fromIndex[toIndex]
					tag._.toIndex = {}; // Hash of bindFrom index which has same path value as bindTo index. fromIndex = tag._.fromIndex[toIndex]
					n = bindFromLength;
					while (n--) {
						key = bindFrom[n];
						m = bindToLength;
						while (m--) {
							if (key === bindTo[m]) {
								tag._.fromIndex[m] = n;
								tag._.toIndex[n] = m;
							}
						}
					}
				}

				if (linkCtx) {
					// Set attr on linkCtx to ensure outputting to the correct target attribute.
					// Setting either linkCtx.attr or this.attr in the init() allows per-instance choice of target attrib.
					linkCtx.attr = tag.attr = linkCtx.attr || tag.attr || linkCtx._dfAt;
				}
				attr = tag.attr;
				tag._.noVws = attr && attr !== HTML;
			}
			args = tag.cvtArgs(i);
			if (tag.linkedCtxParam) {
				bdArgs = tag.cvtArgs(i, 1);
				m = bindFromLength;
				defaultCtx = tag.constructor.prototype.ctx;
				while (m--) {
					if (ctxPrm = tag.linkedCtxParam[m]) {
						key = bindFrom[m];
						initVal = bdArgs[m];
						// Create tag contextual parameter
						tagCtx.ctx[ctxPrm] = $sub._cp(
							defaultCtx && initVal === undefined ? defaultCtx[ctxPrm]: initVal,
							initVal !== undefined && argOrProp(tagCtx.params, key),
							tagCtx.view,
							tag._.bnd && {tag: tag, cvt: tag.convert, ind: m, tagElse: i}
						);
					}
				}
			}
			if ((mapDef = props.dataMap || tagDataMap) && (args.length || props.dataMap)) {
				thisMap = tagCtx.map;
				if (!thisMap || thisMap.src !== args[0] || isUpdate) {
					if (thisMap && thisMap.src) {
						thisMap.unmap(); // only called if observable map - not when only used in JsRender, e.g. by {{props}}
					}
					mapDef.map(args[0], tagCtx, thisMap, !tag._.bnd);
					thisMap = tagCtx.map;
				}
				args = [thisMap.tgt];
			}

			itemRet = undefined;
			if (tag.render) {
				itemRet = tag.render.apply(tag, args);
				if (parentView.linked && itemRet && !rWrappedInViewMarker.test(itemRet)) {
					// When a tag renders content from the render method, with data linking then we need to wrap with view markers, if absent,
					// to provide a contentView for the tag, which will correctly dispose bindings if deleted. The 'tmpl' for this view will
					// be a dumbed-down template which will always return the itemRet string (no matter what the data is). The itemRet string
					// is not compiled as template markup, so can include "{{" or "}}" without triggering syntax errors
					tmpl = { // 'Dumbed-down' template which always renders 'static' itemRet string
						links: []
					};
					tmpl.render = tmpl.fn = function() {
						return itemRet;
					};
					itemRet = renderWithViews(tmpl, parentView.data, undefined, true, parentView, undefined, undefined, tag);
				}
			}
			if (!args.length) {
				args = [parentView]; // no arguments - (e.g. {{else}}) get data context from view.
			}
			if (itemRet === undefined) {
				contentCtx = args[0]; // Default data context for wrapped block content is the first argument
				if (tag.contentCtx) { // Set tag.contentCtx to true, to inherit parent context, or to a function to provide alternate context.
					contentCtx = tag.contentCtx === true ? parentView : tag.contentCtx(contentCtx);
				}
				itemRet = tagCtx.render(contentCtx, true) || (isUpdate ? undefined : "");
			}
			ret = ret
				? ret + (itemRet || "")
				: itemRet !== undefined
					? "" + itemRet
					: undefined; // If no return value from render, and no template/content tagCtx.render(...), return undefined
		}
		tag.rendering = tag.rendering.rndr; // Remove tag.rendering object (if this is outermost render call. (In case of nested calls)
	}
	tag.tagCtx = tagCtxs[0];
	tag.ctx = tag.tagCtx.ctx;

	if (tag._.noVws && tag.inline) {
		// inline tag with attr set to "text" will insert HTML-encoded content - as if it was element-based innerText
		ret = attr === "text"
			? $converters.html(ret)
			: "";
	}
	return boundTag && parentView._.onRender
		// Call onRender (used by JsViews if present, to add binding annotations around rendered content)
		? parentView._.onRender(ret, parentView, tag)
		: ret;
}

//=================
// View constructor
//=================

function View(context, type, parentView, data, template, key, onRender, contentTmpl) {
	// Constructor for view object in view hierarchy. (Augmented by JsViews if JsViews is loaded)
	var views, parentView_, tag, self_,
		self = this,
		isArray = type === "array";
		// If the data is an array, this is an 'array view' with a views array for each child 'item view'
		// If the data is not an array, this is an 'item view' with a views 'hash' object for any child nested views

	self.content = contentTmpl;
	self.views = isArray ? [] : {};
	self.data = data;
	self.tmpl = template;
	self_ = self._ = {
		key: 0,
		// ._.useKey is non zero if is not an 'array view' (owning a data array). Use this as next key for adding to child views hash
		useKey: isArray ? 0 : 1,
		id: "" + viewId++,
		onRender: onRender,
		bnds: {}
	};
	self.linked = !!onRender;
	self.type = type || "top";
	if (type) {
		self.cache = {_ct: $subSettings._cchCt}; // Used for caching results of computed properties and helpers (view.getCache)
	}

	if (!parentView || parentView.type === "top") {
		(self.ctx = context || {}).root = self.data;
	}

	if (self.parent = parentView) {
		self.root = parentView.root || self; // view whose parent is top view
		views = parentView.views;
		parentView_ = parentView._;
		self.isTop = parentView_.scp; // Is top content view of a link("#container", ...) call
		self.scope = (!context.tag || context.tag === parentView.ctx.tag) && !self.isTop && parentView.scope || self;
		// Scope for contextParams - closest non flow tag ancestor or root view
		if (parentView_.useKey) {
			// Parent is not an 'array view'. Add this view to its views object
			// self._key = is the key in the parent view hash
			views[self_.key = "_" + parentView_.useKey++] = self;
			self.index = indexStr;
			self.getIndex = getNestedIndex;
		} else if (views.length === (self_.key = self.index = key)) { // Parent is an 'array view'. Add this view to its views array
			views.push(self); // Adding to end of views array. (Using push when possible - better perf than splice)
		} else {
			views.splice(key, 0, self); // Inserting in views array
		}
		// If no context was passed in, use parent context
		// If context was passed in, it should have been merged already with parent context
		self.ctx = context || parentView.ctx;
	} else if (type) {
		self.root = self; // view whose parent is top view
	}
}

View.prototype = {
	get: getView,
	getIndex: getIndex,
	ctxPrm: contextParameter,
	getRsc: getResource,
	_getTmpl: getTemplate,
	_getOb: getPathObject,
	getCache: function(key) { // Get cached value of computed value
		if ($subSettings._cchCt > this.cache._ct) {
			this.cache = {_ct: $subSettings._cchCt};
		}
		return this.cache[key] !== undefined ? this.cache[key] : (this.cache[key] = cpFnStore[key](this.data, this, $sub));
	},
	_is: "view"
};

//====================================================
// Registration
//====================================================

function compileChildResources(parentTmpl) {
	var storeName, storeNames, resources;
	for (storeName in jsvStores) {
		storeNames = storeName + "s";
		if (parentTmpl[storeNames]) {
			resources = parentTmpl[storeNames];        // Resources not yet compiled
			parentTmpl[storeNames] = {};               // Remove uncompiled resources
			$views[storeNames](resources, parentTmpl); // Add back in the compiled resources
		}
	}
}

//===============
// compileTag
//===============

function compileTag(name, tagDef, parentTmpl) {
	var tmpl, baseTag, prop,
		compiledDef = new $sub._tg();

	function Tag() {
		var tag = this;
		tag._ = {
			unlinked: true
		};
		tag.inline = true;
		tag.tagName = name;
	}

	if ($isFunction(tagDef)) {
		// Simple tag declared as function. No presenter instantation.
		tagDef = {
			depends: tagDef.depends,
			render: tagDef
		};
	} else if (typeof tagDef === STRING) {
		tagDef = {template: tagDef};
	}

	if (baseTag = tagDef.baseTag) {
		tagDef.flow = !!tagDef.flow; // Set flow property, so defaults to false even if baseTag has flow=true
		baseTag = typeof baseTag === STRING
			? (parentTmpl && parentTmpl.tags[baseTag] || $tags[baseTag])
			: baseTag;
		if (!baseTag) {
			error('baseTag: "' + tagDef.baseTag + '" not found');
		}
		compiledDef = $extend(compiledDef, baseTag);

		for (prop in tagDef) {
			compiledDef[prop] = getMethod(baseTag[prop], tagDef[prop]);
		}
	} else {
		compiledDef = $extend(compiledDef, tagDef);
	}

	// Tag declared as object, used as the prototype for tag instantiation (control/presenter)
	if ((tmpl = compiledDef.template) !== undefined) {
		compiledDef.template = typeof tmpl === STRING ? ($templates[tmpl] || $templates(tmpl)) : tmpl;
	}
	(Tag.prototype = compiledDef).constructor = compiledDef._ctr = Tag;

	if (parentTmpl) {
		compiledDef._parentTmpl = parentTmpl;
	}
	return compiledDef;
}

function baseApply(args) {
	// In derived method (or handler declared declaratively as in {{:foo onChange=~fooChanged}} can call base method,
	// using this.baseApply(arguments) (Equivalent to this._superApply(arguments) in jQuery UI)
	return this.base.apply(this, args);
}

//===============
// compileTmpl
//===============

function compileTmpl(name, tmpl, parentTmpl, options) {
	// tmpl is either a template object, a selector for a template script block, or the name of a compiled template

	//==== nested functions ====
	function lookupTemplate(value) {
		// If value is of type string - treat as selector, or name of compiled template
		// Return the template object, if already compiled, or the markup string
		var currentName, tmpl;
		if ((typeof value === STRING) || value.nodeType > 0 && (elem = value)) {
			if (!elem) {
				if (/^\.?\/[^\\:*?"<>]*$/.test(value)) {
					// value="./some/file.html" (or "/some/file.html")
					// If the template is not named, use "./some/file.html" as name.
					if (tmpl = $templates[name = name || value]) {
						value = tmpl;
					} else {
						// BROWSER-SPECIFIC CODE (not on Node.js):
						// Look for server-generated script block with id "./some/file.html"
						elem = document.getElementById(value);
					}
				} else if (value.charAt(0) === "#") {
					elem = document.getElementById(value.slice(1));
				} if (!elem && $.fn && !$sub.rTmpl.test(value)) {
					try {
						elem = $(value, document)[0]; // if jQuery is loaded, test for selector returning elements, and get first element
					} catch (e) {}
				}// END BROWSER-SPECIFIC CODE
			} //BROWSER-SPECIFIC CODE
			if (elem) {
				if (elem.tagName !== "SCRIPT") {
					error(value + ": Use script block, not " + elem.tagName);
				}
				if (options) {
					// We will compile a new template using the markup in the script element
					value = elem.innerHTML;
				} else {
					// We will cache a single copy of the compiled template, and associate it with the name
					// (renaming from a previous name if there was one).
					currentName = elem.getAttribute(tmplAttr);
					if (currentName) {
						if (currentName !== jsvTmpl) {
							value = $templates[currentName];
							delete $templates[currentName];
						} else if ($.fn) {
							value = $.data(elem)[jsvTmpl]; // Get cached compiled template
						}
					}
					if (!currentName || !value) { // Not yet compiled, or cached version lost
						name = name || ($.fn ? jsvTmpl : value);
						value = compileTmpl(name, elem.innerHTML, parentTmpl, options);
					}
					value.tmplName = name = name || currentName;
					if (name !== jsvTmpl) {
						$templates[name] = value;
					}
					elem.setAttribute(tmplAttr, name);
					if ($.fn) {
						$.data(elem, jsvTmpl, value);
					}
				}
			} // END BROWSER-SPECIFIC CODE
			elem = undefined;
		} else if (!value.fn) {
			value = undefined;
			// If value is not a string. HTML element, or compiled template, return undefined
		}
		return value;
	}

	var elem, compiledTmpl,
		tmplOrMarkup = tmpl = tmpl || "";
	$sub._html = $converters.html;

	//==== Compile the template ====
	if (options === 0) {
		options = undefined;
		tmplOrMarkup = lookupTemplate(tmplOrMarkup); // Top-level compile so do a template lookup
	}

	// If options, then this was already compiled from a (script) element template declaration.
	// If not, then if tmpl is a template object, use it for options
	options = options || (tmpl.markup
		? tmpl.bnds
			? $extend({}, tmpl)
			: tmpl
		: {}
	);

	options.tmplName = options.tmplName || name || "unnamed";
	if (parentTmpl) {
		options._parentTmpl = parentTmpl;
	}
	// If tmpl is not a markup string or a selector string, then it must be a template object
	// In that case, get it from the markup property of the object
	if (!tmplOrMarkup && tmpl.markup && (tmplOrMarkup = lookupTemplate(tmpl.markup)) && tmplOrMarkup.fn) {
		// If the string references a compiled template object, need to recompile to merge any modified options
		tmplOrMarkup = tmplOrMarkup.markup;
	}
	if (tmplOrMarkup !== undefined) {
		if (tmplOrMarkup.render || tmpl.render) {
			// tmpl is already compiled, so use it
			if (tmplOrMarkup.tmpls) {
				compiledTmpl = tmplOrMarkup;
			}
		} else {
			// tmplOrMarkup is a markup string, not a compiled template
			// Create template object
			tmpl = tmplObject(tmplOrMarkup, options);
			// Compile to AST and then to compiled function
			tmplFn(tmplOrMarkup.replace(rEscapeQuotes, "\\$&"), tmpl);
		}
		if (!compiledTmpl) {
			compiledTmpl = $extend(function() {
				return compiledTmpl.render.apply(compiledTmpl, arguments);
			}, tmpl);

			compileChildResources(compiledTmpl);
		}
		return compiledTmpl;
	}
}

//==== /end of function compileTmpl ====

//=================
// compileViewModel
//=================

function getDefaultVal(defaultVal, data) {
	return $isFunction(defaultVal)
		? defaultVal.call(data)
		: defaultVal;
}

function addParentRef(ob, ref, parent) {
	Object.defineProperty(ob, ref, {
		value: parent,
		configurable: true
	});
}

function compileViewModel(name, type) {
	var i, constructor, parent,
		viewModels = this,
		getters = type.getters,
		extend = type.extend,
		id = type.id,
		proto = $.extend({
			_is: name || "unnamed",
			unmap: unmap,
			merge: merge
		}, extend),
		args = "",
		cnstr = "",
		getterCount = getters ? getters.length : 0,
		$observable = $.observable,
		getterNames = {};

	function JsvVm(args) {
		constructor.apply(this, args);
	}

	function vm() {
		return new JsvVm(arguments);
	}

	function iterate(data, action) {
		var getterType, defaultVal, prop, ob, parentRef,
			j = 0;
		for (; j < getterCount; j++) {
			prop = getters[j];
			getterType = undefined;
			if (typeof prop !== STRING) {
				getterType = prop;
				prop = getterType.getter;
				parentRef = getterType.parentRef;
			}
			if ((ob = data[prop]) === undefined && getterType && (defaultVal = getterType.defaultVal) !== undefined) {
				ob = getDefaultVal(defaultVal, data);
			}
			action(ob, getterType && viewModels[getterType.type], prop, parentRef);
		}
	}

	function map(data) {
		data = typeof data === STRING
			? JSON.parse(data) // Accept JSON string
			: data;            // or object/array
		var l, prop, childOb, parentRef,
			j = 0,
			ob = data,
			arr = [];

		if ($isArray(data)) {
			data = data || [];
			l = data.length;
			for (; j<l; j++) {
				arr.push(this.map(data[j]));
			}
			arr._is = name;
			arr.unmap = unmap;
			arr.merge = merge;
			return arr;
		}

		if (data) {
			iterate(data, function(ob, viewModel) {
				if (viewModel) { // Iterate to build getters arg array (value, or mapped value)
					ob = viewModel.map(ob);
				}
				arr.push(ob);
			});
			ob = this.apply(this, arr); // Instantiate this View Model, passing getters args array to constructor
			j = getterCount;
			while (j--) {
				childOb = arr[j];
				parentRef = getters[j].parentRef;
				if (parentRef && childOb && childOb.unmap) {
					if ($isArray(childOb)) {
						l = childOb.length;
						while (l--) {
							addParentRef(childOb[l], parentRef, ob);
						}
					} else {
						addParentRef(childOb, parentRef, ob);
					}
				}
			}
			for (prop in data) { // Copy over any other properties. that are not get/set properties
				if (prop !== $expando && !getterNames[prop]) {
					ob[prop] = data[prop];
				}
			}
		}
		return ob;
	}

	function merge(data, parent, parentRef) {
		data = typeof data === STRING
			? JSON.parse(data) // Accept JSON string
			: data;            // or object/array

		var j, l, m, prop, mod, found, assigned, ob, newModArr, childOb,
			k = 0,
			model = this;

		if ($isArray(model)) {
			assigned = {};
			newModArr = [];
			l = data.length;
			m = model.length;
			for (; k<l; k++) {
				ob = data[k];
				found = false;
				for (j=0; j<m && !found; j++) {
					if (assigned[j]) {
						continue;
					}
					mod = model[j];

					if (id) {
						assigned[j] = found = typeof id === STRING
						? (ob[id] && (getterNames[id] ? mod[id]() : mod[id]) === ob[id])
						: id(mod, ob);
					}
				}
				if (found) {
					mod.merge(ob);
					newModArr.push(mod);
				} else {
					newModArr.push(childOb = vm.map(ob));
					if (parentRef) {
						addParentRef(childOb, parentRef, parent);
					}
				}
			}
			if ($observable) {
				$observable(model).refresh(newModArr, true);
			} else {
				model.splice.apply(model, [0, model.length].concat(newModArr));
			}
			return;
		}
		iterate(data, function(ob, viewModel, getter, parentRef) {
			if (viewModel) {
				model[getter]().merge(ob, model, parentRef); // Update typed property
			} else if (model[getter]() !== ob) {
				model[getter](ob); // Update non-typed property
			}
		});
		for (prop in data) {
			if (prop !== $expando && !getterNames[prop]) {
				model[prop] = data[prop];
			}
		}
	}

	function unmap() {
		var ob, prop, getterType, arr, value,
			k = 0,
			model = this;

		function unmapArray(modelArr) {
			var arr = [],
				i = 0,
				l = modelArr.length;
			for (; i<l; i++) {
				arr.push(modelArr[i].unmap());
			}
			return arr;
		}

		if ($isArray(model)) {
			return unmapArray(model);
		}
		ob = {};
		for (; k < getterCount; k++) {
			prop = getters[k];
			getterType = undefined;
			if (typeof prop !== STRING) {
				getterType = prop;
				prop = getterType.getter;
			}
			value = model[prop]();
			ob[prop] = getterType && value && viewModels[getterType.type]
				? $isArray(value)
					? unmapArray(value)
					: value.unmap()
				: value;
		}
		for (prop in model) {
			if (model.hasOwnProperty(prop) && (prop.charAt(0) !== "_" || !getterNames[prop.slice(1)]) && prop !== $expando && !$isFunction(model[prop])) {
				ob[prop] = model[prop];
			}
		}
		return ob;
	}

	JsvVm.prototype = proto;

	for (i=0; i < getterCount; i++) {
		(function(getter) {
			getter = getter.getter || getter;
			getterNames[getter] = i+1;
			var privField = "_" + getter;

			args += (args ? "," : "") + getter;
			cnstr += "this." + privField + " = " + getter + ";\n";
			proto[getter] = proto[getter] || function(val) {
				if (!arguments.length) {
					return this[privField]; // If there is no argument, use as a getter
				}
				if ($observable) {
					$observable(this).setProperty(getter, val);
				} else {
					this[privField] = val;
				}
			};

			if ($observable) {
				proto[getter].set = proto[getter].set || function(val) {
					this[privField] = val; // Setter called by observable property change
				};
			}
		})(getters[i]);
	}

	// Constructor for new viewModel instance.
	cnstr = new Function(args, cnstr);

	constructor = function() {
		cnstr.apply(this, arguments);
		// Pass additional parentRef str and parent obj to have a parentRef pointer on instance
		if (parent = arguments[getterCount + 1]) {
			addParentRef(this, arguments[getterCount], parent);
		}
	};

	constructor.prototype = proto;
	proto.constructor = constructor;

	vm.map = map;
	vm.getters = getters;
	vm.extend = extend;
	vm.id = id;
	return vm;
}

function tmplObject(markup, options) {
	// Template object constructor
	var htmlTag,
		wrapMap = $subSettingsAdvanced._wm || {}, // Only used in JsViews. Otherwise empty: {}
		tmpl = {
			tmpls: [],
			links: {}, // Compiled functions for link expressions
			bnds: [],
			_is: "template",
			render: renderContent
		};

	if (options) {
		tmpl = $extend(tmpl, options);
	}

	tmpl.markup = markup;
	if (!tmpl.htmlTag) {
		// Set tmpl.tag to the top-level HTML tag used in the template, if any...
		htmlTag = rFirstElem.exec(markup);
		tmpl.htmlTag = htmlTag ? htmlTag[1].toLowerCase() : "";
	}
	htmlTag = wrapMap[tmpl.htmlTag];
	if (htmlTag && htmlTag !== wrapMap.div) {
		// When using JsViews, we trim templates which are inserted into HTML contexts where text nodes are not rendered (i.e. not 'Phrasing Content').
		// Currently not trimmed for <li> tag. (Not worth adding perf cost)
		tmpl.markup = $.trim(tmpl.markup);
	}

	return tmpl;
}

//==============
// registerStore
//==============

/**
* Internal. Register a store type (used for template, tags, helpers, converters)
*/
function registerStore(storeName, storeSettings) {

/**
* Generic store() function to register item, named item, or hash of items
* Also used as hash to store the registered items
* Used as implementation of $.templates(), $.views.templates(), $.views.tags(), $.views.helpers() and $.views.converters()
*
* @param {string|hash} name         name - or selector, in case of $.templates(). Or hash of items
* @param {any}         [item]       (e.g. markup for named template)
* @param {template}    [parentTmpl] For item being registered as private resource of template
* @returns {any|$.views} item, e.g. compiled template - or $.views in case of registering hash of items
*/
	function theStore(name, item, parentTmpl) {
		// The store is also the function used to add items to the store. e.g. $.templates, or $.views.tags

		// For store of name 'thing', Call as:
		//    $.views.things(items[, parentTmpl]),
		// or $.views.things(name[, item, parentTmpl])

		var compile, itemName, thisStore, cnt,
			onStore = $sub.onStore[storeName];

		if (name && typeof name === OBJECT && !name.nodeType && !name.markup && !name.getTgt && !(storeName === "viewModel" && name.getters || name.extend)) {
			// Call to $.views.things(items[, parentTmpl]),

			// Adding items to the store
			// If name is a hash, then item is parentTmpl. Iterate over hash and call store for key.
			for (itemName in name) {
				theStore(itemName, name[itemName], item);
			}
			return item || $views;
		}
		// Adding a single unnamed item to the store
		if (name &&  typeof name !== STRING) { // name must be a string
			parentTmpl = item;
			item = name;
			name = undefined;
		}
		thisStore = parentTmpl
			? storeName === "viewModel"
				? parentTmpl
				: (parentTmpl[storeNames] = parentTmpl[storeNames] || {})
			: theStore;
		compile = storeSettings.compile;

		if (item === undefined) {
			item = compile ? name : thisStore[name];
			name = undefined;
		}
		if (item === null) {
			// If item is null, delete this entry
			if (name) {
				delete thisStore[name];
			}
		} else {
			if (compile) {
				item = compile.call(thisStore, name, item, parentTmpl, 0) || {};
				item._is = storeName; // Only do this for compiled objects (tags, templates...)
			}
			if (name) {
				thisStore[name] = item;
			}
		}
		if (onStore) {
			// e.g. JsViews integration
			onStore(name, item, parentTmpl, compile);
		}
		return item;
	}

	var storeNames = storeName + "s";
	$views[storeNames] = theStore;
}

/**
* Add settings such as:
* $.views.settings.allowCode(true)
* @param {boolean} value
* @returns {Settings}
*
* allowCode = $.views.settings.allowCode()
* @returns {boolean}
*/
function addSetting(st) {
	$viewsSettings[st] = $viewsSettings[st] || function(value) {
		return arguments.length
			? ($subSettings[st] = value, $viewsSettings)
			: $subSettings[st];
	};
}

//========================
// dataMap for render only
//========================

function dataMap(mapDef) {
	function Map(source, options) {
		this.tgt = mapDef.getTgt(source, options);
		options.map = this;
	}

	if ($isFunction(mapDef)) {
		// Simple map declared as function
		mapDef = {
			getTgt: mapDef
		};
	}

	if (mapDef.baseMap) {
		mapDef = $extend($extend({}, mapDef.baseMap), mapDef);
	}

	mapDef.map = function(source, options) {
		return new Map(source, options);
	};
	return mapDef;
}

//==============
// renderContent
//==============

/** Render the template as a string, using the specified data and helpers/context
* $("#tmpl").render(), tmpl.render(), tagCtx.render(), $.render.namedTmpl()
*
* @param {any}        data
* @param {hash}       [context]           helpers or context
* @param {boolean}    [noIteration]
* @param {View}       [parentView]        internal
* @param {string}     [key]               internal
* @param {function}   [onRender]          internal
* @returns {string}   rendered template   internal
*/
function renderContent(data, context, noIteration, parentView, key, onRender) {
	var i, l, tag, tmpl, tagCtx, isTopRenderCall, prevData, prevIndex,
		view = parentView,
		result = "";

	if (context === true) {
		noIteration = context; // passing boolean as second param - noIteration
		context = undefined;
	} else if (typeof context !== OBJECT) {
		context = undefined; // context must be a boolean (noIteration) or a plain object
	}

	if (tag = this.tag) {
		// This is a call from renderTag or tagCtx.render(...)
		tagCtx = this;
		view = view || tagCtx.view;
		tmpl = view._getTmpl(tag.template || tagCtx.tmpl);
		if (!arguments.length) {
			data = tag.contentCtx && $isFunction(tag.contentCtx)
				? data = tag.contentCtx(data)
				: view; // Default data context for wrapped block content is the first argument
		}
	} else {
		// This is a template.render(...) call
		tmpl = this;
	}

	if (tmpl) {
		if (!parentView && data && data._is === "view") {
			view = data; // When passing in a view to render or link (and not passing in a parent view) use the passed-in view as parentView
		}

		if (view && data === view) {
			// Inherit the data from the parent view.
			data = view.data;
		}

		isTopRenderCall = !view;
		isRenderCall = isRenderCall || isTopRenderCall;
		if (isTopRenderCall) {
			(context = context || {}).root = data; // Provide ~root as shortcut to top-level data.
		}
		if (!isRenderCall || $subSettingsAdvanced.useViews || tmpl.useViews || view && view !== topView) {
			result = renderWithViews(tmpl, data, context, noIteration, view, key, onRender, tag);
		} else {
			if (view) { // In a block
				prevData = view.data;
				prevIndex = view.index;
				view.index = indexStr;
			} else {
				view = topView;
				prevData = view.data;
				view.data = data;
				view.ctx = context;
			}
			if ($isArray(data) && !noIteration) {
				// Create a view for the array, whose child views correspond to each data item. (Note: if key and parentView are passed in
				// along with parent view, treat as insert -e.g. from view.addViews - so parentView is already the view item for array)
				for (i = 0, l = data.length; i < l; i++) {
					view.index = i;
					view.data = data[i];
					result += tmpl.fn(data[i], view, $sub);
				}
			} else {
				view.data = data;
				result += tmpl.fn(data, view, $sub);
			}
			view.data = prevData;
			view.index = prevIndex;
		}
		if (isTopRenderCall) {
			isRenderCall = undefined;
		}
	}
	return result;
}

function renderWithViews(tmpl, data, context, noIteration, view, key, onRender, tag) {
	// Render template against data as a tree of subviews (nested rendered template instances), or as a string (top-level template).
	// If the data is the parent view, treat as noIteration, re-render with the same data context.
	// tmpl can be a string (e.g. rendered by a tag.render() method), or a compiled template.
	var i, l, newView, childView, itemResult, swapContent, contentTmpl, outerOnRender, tmplName, itemVar, newCtx, tagCtx, noLinking,
		result = "";

	if (tag) {
		// This is a call from renderTag or tagCtx.render(...)
		tmplName = tag.tagName;
		tagCtx = tag.tagCtx;
		context = context ? extendCtx(context, tag.ctx) : tag.ctx;

		if (tmpl === view.content) { // {{xxx tmpl=#content}}
			contentTmpl = tmpl !== view.ctx._wrp // We are rendering the #content
				? view.ctx._wrp // #content was the tagCtx.props.tmpl wrapper of the block content - so within this view, #content will now be the view.ctx._wrp block content
				: undefined; // #content was the view.ctx._wrp block content - so within this view, there is no longer any #content to wrap.
		} else if (tmpl !== tagCtx.content) {
			if (tmpl === tag.template) { // Rendering {{tag}} tag.template, replacing block content.
				contentTmpl = tagCtx.tmpl; // Set #content to block content (or wrapped block content if tagCtx.props.tmpl is set)
				context._wrp = tagCtx.content; // Pass wrapped block content to nested views
			} else { // Rendering tagCtx.props.tmpl wrapper
				contentTmpl = tagCtx.content || view.content; // Set #content to wrapped block content
			}
		} else {
			contentTmpl = view.content; // Nested views inherit same wrapped #content property
		}

		if (tagCtx.props.link === false) {
			// link=false setting on block tag
			// We will override inherited value of link by the explicit setting link=false taken from props
			// The child views of an unlinked view are also unlinked. So setting child back to true will not have any effect.
			context = context || {};
			context.link = false;
		}
	}

	if (view) {
		onRender = onRender || view._.onRender;
		noLinking = context && context.link === false;

		if (noLinking && view._.nl) {
			onRender = undefined;
		}

		context = extendCtx(context, view.ctx);
		tagCtx = !tag && view.tag
			? view.tag.tagCtxs[view.tagElse]
			: tagCtx;
	}

	if (itemVar = tagCtx && tagCtx.props.itemVar) {
		if (itemVar[0] !== "~") {
			syntaxError("Use itemVar='~myItem'");
		}
		itemVar = itemVar.slice(1);
	}

	if (key === true) {
		swapContent = true;
		key = 0;
	}

	// If link===false, do not call onRender, so no data-linking marker nodes
	if (onRender && tag && tag._.noVws) {
		onRender = undefined;
	}
	outerOnRender = onRender;
	if (onRender === true) {
		// Used by view.refresh(). Don't create a new wrapper view.
		outerOnRender = undefined;
		onRender = view._.onRender;
	}
	// Set additional context on views created here, (as modified context inherited from the parent, and to be inherited by child views)
	context = tmpl.helpers
		? extendCtx(tmpl.helpers, context)
		: context;

	newCtx = context;
	if ($isArray(data) && !noIteration) {
		// Create a view for the array, whose child views correspond to each data item. (Note: if key and view are passed in
		// along with parent view, treat as insert -e.g. from view.addViews - so view is already the view item for array)
		newView = swapContent
			? view
			: (key !== undefined && view)
				|| new View(context, "array", view, data, tmpl, key, onRender, contentTmpl);
		newView._.nl= noLinking;
		if (view && view._.useKey) {
			// Parent is not an 'array view'
			newView._.bnd = !tag || tag._.bnd && tag; // For array views that are data bound for collection change events, set the
			// view._.bnd property to true for top-level link() or data-link="{for}", or to the tag instance for a data-bound tag, e.g. {^{for ...}}
			newView.tag = tag;
		}
		for (i = 0, l = data.length; i < l; i++) {
			// Create a view for each data item.
			childView = new View(newCtx, "item", newView, data[i], tmpl, (key || 0) + i, onRender, newView.content);
			if (itemVar) {
				(childView.ctx = $extend({}, newCtx))[itemVar] = $sub._cp(data[i], "#data", childView);
			}
			itemResult = tmpl.fn(data[i], childView, $sub);
			result += newView._.onRender ? newView._.onRender(itemResult, childView) : itemResult;
		}
	} else {
		// Create a view for singleton data object. The type of the view will be the tag name, e.g. "if" or "mytag" except for
		// "item", "array" and "data" views. A "data" view is from programmatic render(object) against a 'singleton'.
		newView = swapContent ? view : new View(newCtx, tmplName || "data", view, data, tmpl, key, onRender, contentTmpl);

		if (itemVar) {
			(newView.ctx = $extend({}, newCtx))[itemVar] = $sub._cp(data, "#data", newView);
		}

		newView.tag = tag;
		newView._.nl = noLinking;
		result += tmpl.fn(data, newView, $sub);
	}
	if (tag) {
		newView.tagElse = tagCtx.index;
		tagCtx.contentView = newView;
	}
	return outerOnRender ? outerOnRender(result, newView) : result;
}

//===========================
// Build and compile template
//===========================

// Generate a reusable function that will serve to render a template against data
// (Compile AST then build template function)

function onRenderError(e, view, fallback) {
	var message = fallback !== undefined
		? $isFunction(fallback)
			? fallback.call(view.data, e, view)
			: fallback || ""
		: "{Error: " + (e.message||e) + "}";

	if ($subSettings.onError && (fallback = $subSettings.onError.call(view.data, e, fallback && message, view)) !== undefined) {
		message = fallback; // There is a settings.debugMode(handler) onError override. Call it, and use return value (if any) to replace message
	}
	return view && !view._lc ? $converters.html(message) : message; // For data-link=\"{... onError=...}"... See onDataLinkedTagChange
}

function error(message) {
	throw new $sub.Err(message);
}

function syntaxError(message) {
	error("Syntax error\n" + message);
}

function tmplFn(markup, tmpl, isLinkExpr, convertBack, hasElse) {
	// Compile markup to AST (abtract syntax tree) then build the template function code from the AST nodes
	// Used for compiling templates, and also by JsViews to build functions for data link expressions

	//==== nested functions ====
	function pushprecedingContent(shift) {
		shift -= loc;
		if (shift) {
			content.push(markup.substr(loc, shift).replace(rNewLine, "\\n"));
		}
	}

	function blockTagCheck(tagName, block) {
		if (tagName) {
			tagName += '}}';
			//			'{{include}} block has {{/for}} with no open {{for}}'
			syntaxError((
				block
					? '{{' + block + '}} block has {{/' + tagName + ' without {{' + tagName
					: 'Unmatched or missing {{/' + tagName) + ', in template:\n' + markup);
		}
	}

	function parseTag(all, bind, tagName, converter, colon, html, codeTag, params, slash, bind2, closeBlock, index) {
/*

     bind     tagName         cvt   cln html code    params            slash   bind2         closeBlk  comment
/(?:{(\^)?{(?:(\w+(?=[\/\s}]))|(\w+)?(:)|(>)|(\*))\s*((?:[^}]|}(?!}))*?)(\/)?|{(\^)?{(?:(?:\/(\w+))\s*|!--[\s\S]*?--))}}/g

(?:
  {(\^)?{            bind
  (?:
    (\w+             tagName
      (?=[\/\s}])
    )
    |
    (\w+)?(:)        converter colon
    |
    (>)              html
    |
    (\*)             codeTag
  )
  \s*
  (                  params
    (?:[^}]|}(?!}))*?
  )
  (\/)?              slash
  |
  {(\^)?{            bind2
  (?:
    (?:\/(\w+))\s*   closeBlock
    |
    !--[\s\S]*?--    comment
  )
)
}}/g

*/
		if (codeTag && bind || slash && !tagName || params && params.slice(-1) === ":" || bind2) {
			syntaxError(all);
		}

		// Build abstract syntax tree (AST): [tagName, converter, params, content, hash, bindings, contentMarkup]
		if (html) {
			colon = ":";
			converter = HTML;
		}
		slash = slash || isLinkExpr && !hasElse;

		var late, openTagName, isLateOb,
			pathBindings = (bind || isLinkExpr) && [[]], // pathBindings is an array of arrays for arg bindings and a hash of arrays for prop bindings
			props = "",
			args = "",
			ctxProps = "",
			paramsArgs = "",
			paramsProps = "",
			paramsCtxProps = "",
			onError = "",
			useTrigger = "",
			// Block tag if not self-closing and not {{:}} or {{>}} (special case) and not a data-link expression
			block = !slash && !colon;

		//==== nested helper function ====
		tagName = tagName || (params = params || "#data", colon); // {{:}} is equivalent to {{:#data}}
		pushprecedingContent(index);
		loc = index + all.length; // location marker - parsed up to here
		if (codeTag) {
			if (allowCode) {
				content.push(["*", "\n" + params.replace(/^:/, "ret+= ").replace(rUnescapeQuotes, "$1") + ";\n"]);
			}
		} else if (tagName) {
			if (tagName === "else") {
				if (rTestElseIf.test(params)) {
					syntaxError('For "{{else if expr}}" use "{{else expr}}"');
				}
				pathBindings = current[9] && [[]];
				current[10] = markup.substring(current[10], index); // contentMarkup for block tag
				openTagName = current[11] || current[0] || syntaxError("Mismatched: " + all);
				// current[0] is tagName, but for {{else}} nodes, current[11] is tagName of preceding open tag
				current = stack.pop();
				content = current[2];
				block = true;
			}
			if (params) {
				// remove newlines from the params string, to avoid compiled code errors for unterminated strings
				parseParams(params.replace(rNewLine, " "), pathBindings, tmpl, isLinkExpr)
					.replace(rBuildHash, function(all, onerror, isCtxPrm, key, keyToken, keyValue, arg, param) {
						if (key === "this:") {
							keyValue = "undefined"; // this=some.path is always a to parameter (one-way), so don't need to compile/evaluate some.path initialization
						}
						if (param) {
							isLateOb = isLateOb || param[0] === "@";
						}
						key = "'" + keyToken + "':";
						if (arg) {
							args += isCtxPrm + keyValue + ",";
							paramsArgs += "'" + param + "',";
						} else if (isCtxPrm) { // Contextual parameter, ~foo=expr
							ctxProps += key + 'j._cp(' + keyValue + ',"' + param + '",view),';
							// Compiled code for evaluating tagCtx on a tag will have: ctx:{'foo':j._cp(compiledExpr, "expr", view)}
							paramsCtxProps += key + "'" + param + "',";
						} else if (onerror) {
							onError += keyValue;
						} else {
							if (keyToken === "trigger") {
								useTrigger += keyValue;
							}
							if (keyToken === "lateRender") {
								late = param !== "false"; // Render after first pass
							}
							props += key + keyValue + ",";
							paramsProps += key + "'" + param + "',";
							hasHandlers = hasHandlers || rHasHandlers.test(keyToken);
						}
						return "";
					}).slice(0, -1);
			}

			if (pathBindings && pathBindings[0]) {
				pathBindings.pop(); // Remove the binding that was prepared for next arg. (There is always an extra one ready).
			}

			newNode = [
					tagName,
					converter || !!convertBack || hasHandlers || "",
					block && [],
					parsedParam(paramsArgs || (tagName === ":" ? "'#data'," : ""), paramsProps, paramsCtxProps), // {{:}} equivalent to {{:#data}}
					parsedParam(args || (tagName === ":" ? "data," : ""), props, ctxProps),
					onError,
					useTrigger,
					late,
					isLateOb,
					pathBindings || 0
				];
			content.push(newNode);
			if (block) {
				stack.push(current);
				current = newNode;
				current[10] = loc; // Store current location of open tag, to be able to add contentMarkup when we reach closing tag
				current[11] = openTagName; // Used for checking syntax (matching close tag)
			}
		} else if (closeBlock) {
			blockTagCheck(closeBlock !== current[0] && closeBlock !== current[11] && closeBlock, current[0]); // Check matching close tag name
			current[10] = markup.substring(current[10], index); // contentMarkup for block tag
			current = stack.pop();
		}
		blockTagCheck(!current && closeBlock);
		content = current[2];
	}
	//==== /end of nested functions ====

	var i, result, newNode, hasHandlers, bindings,
		allowCode = $subSettings.allowCode || tmpl && tmpl.allowCode
			|| $viewsSettings.allowCode === true, // include direct setting of settings.allowCode true for backward compat only
		astTop = [],
		loc = 0,
		stack = [],
		content = astTop,
		current = [,,astTop];

	if (allowCode && tmpl._is) {
		tmpl.allowCode = allowCode;
	}

//TODO	result = tmplFnsCache[markup]; // Only cache if template is not named and markup length < ...,
//and there are no bindings or subtemplates?? Consider standard optimization for data-link="a.b.c"
//		if (result) {
//			tmpl.fn = result;
//		} else {

//		result = markup;
	if (isLinkExpr) {
		if (convertBack !== undefined) {
			markup = markup.slice(0, -convertBack.length - 2) + delimCloseChar0;
		}
		markup = delimOpenChar0 + markup + delimCloseChar1;
	}

	blockTagCheck(stack[0] && stack[0][2].pop()[0]);
	// Build the AST (abstract syntax tree) under astTop
	markup.replace(rTag, parseTag);

	pushprecedingContent(markup.length);

	if (loc = astTop[astTop.length - 1]) {
		blockTagCheck(typeof loc !== STRING && (+loc[10] === loc[10]) && loc[0]);
	}
//			result = tmplFnsCache[markup] = buildCode(astTop, tmpl);
//		}

	if (isLinkExpr) {
		result = buildCode(astTop, markup, isLinkExpr);
		bindings = [];
		i = astTop.length;
		while (i--) {
			bindings.unshift(astTop[i][9]); // With data-link expressions, pathBindings array for tagCtx[i] is astTop[i][9]
		}
		setPaths(result, bindings);
	} else {
		result = buildCode(astTop, tmpl);
	}
	return result;
}

function setPaths(fn, pathsArr) {
	var key, paths,
		i = 0,
		l = pathsArr.length;
	fn.deps = [];
	fn.paths = []; // The array of path binding (array/dictionary)s for each tag/else block's args and props
	for (; i < l; i++) {
		fn.paths.push(paths = pathsArr[i]);
		for (key in paths) {
			if (key !== "_jsvto" && paths.hasOwnProperty(key) && paths[key].length && !paths[key].skp) {
				fn.deps = fn.deps.concat(paths[key]); // deps is the concatenation of the paths arrays for the different bindings
			}
		}
	}
}

function parsedParam(args, props, ctx) {
	return [args.slice(0, -1), props.slice(0, -1), ctx.slice(0, -1)];
}

function paramStructure(paramCode, paramVals) {
	return '\n\tparams:{args:[' + paramCode[0] + '],\n\tprops:{' + paramCode[1] + '}'
		+ (paramCode[2] ? ',\n\tctx:{' + paramCode[2] + '}' : "")
		+ '},\n\targs:[' + paramVals[0] + '],\n\tprops:{' + paramVals[1] + '}'
		+ (paramVals[2] ? ',\n\tctx:{' + paramVals[2] + '}' : "");
}

function parseParams(params, pathBindings, tmpl, isLinkExpr) {

	function parseTokens(all, lftPrn0, lftPrn, bound, path, operator, err, eq, path2, late, prn,
												comma, lftPrn2, apos, quot, rtPrn, rtPrnDot, prn2, space, index, full) {
	// /(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(?:(\()\s*)?\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,
	//lftPrn0           lftPrn         bound     path               operator     err                                          eq      path2 late            prn      comma  lftPrn2          apos quot        rtPrn  rtPrnDot                  prn2     space
	// (left paren? followed by (path? followed by operator) or (path followed by paren?)) or comma or apos or quot or right paren or space

		function parsePath(allPath, not, object, helper, view, viewProperty, pathTokens, leafToken) {
			// /^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,
			//    not                               object     helper    view  viewProperty pathTokens      leafToken
			subPath = object === ".";
			if (object) {
				path = path.slice(not.length);
				if (/^\.?constructor$/.test(leafToken||path)) {
					syntaxError(allPath);
				}
				if (!subPath) {
					allPath = (late // late path @a.b.c: not throw on 'property of undefined' if a undefined, and will use _getOb() after linking to resolve late.
							? (isLinkExpr ? '' : '(ltOb.lt=ltOb.lt||') + '(ob='
							: ""
						)
						+ (helper
							? 'view.ctxPrm("' + helper + '")'
							: view
								? "view"
								: "data")
						+ (late
							? ')===undefined' + (isLinkExpr ? '' : ')') + '?"":view._getOb(ob,"'
							: ""
						)
						+ (leafToken
							? (viewProperty
								? "." + viewProperty
								: helper
									? ""
									: (view ? "" : "." + object)
								) + (pathTokens || "")
							: (leafToken = helper ? "" : view ? viewProperty || "" : object, ""));
					allPath = allPath + (leafToken ? "." + leafToken : "");

					allPath = not + (allPath.slice(0, 9) === "view.data"
						? allPath.slice(5) // convert #view.data... to data...
						: allPath)
					+ (late
							? (isLinkExpr ? '"': '",ltOb') + (prn ? ',1)':')')
							: ""
						);
				}
				if (bindings) {
					binds = named === "_linkTo" ? (bindto = pathBindings._jsvto = pathBindings._jsvto || []) : bndCtx.bd;
					if (theOb = subPath && binds[binds.length-1]) {
						if (theOb._cpfn) { // Computed property exprOb
							while (theOb.sb) {
								theOb = theOb.sb;
							}
							if (theOb.prm) {
								if (theOb.bnd) {
									path = "^" + path.slice(1);
								}
								theOb.sb = path;
								theOb.bnd = theOb.bnd || path[0] === "^";
							}
						}
					} else {
						binds.push(path);
					}
					if (prn && !subPath) {
						pathStart[fnDp] = ind;
						compiledPathStart[fnDp] = compiledPath[fnDp].length;
					}
				}
			}
			return allPath;
		}

		//bound = bindings && bound;
		if (bound && !eq) {
			path = bound + path; // e.g. some.fn(...)^some.path - so here path is "^some.path"
		}
		operator = operator || "";
		lftPrn2 = lftPrn2 || "";
		lftPrn = lftPrn || lftPrn0 || lftPrn2;
		path = path || path2;

		if (late && (late = !/\)|]/.test(full[index-1]))) {
			path = path.slice(1).split(".").join("^"); // Late path @z.b.c. Use "^" rather than "." to ensure that deep binding will be used
		}
		// Could do this - but not worth perf cost?? :-
		// if (!path.lastIndexOf("#data.", 0)) { path = path.slice(6); } // If path starts with "#data.", remove that.
		prn = prn || prn2 || "";
		var expr, binds, theOb, newOb, subPath, lftPrnFCall, ret,
			ind = index;

		if (!aposed && !quoted) {
			if (err) {
				syntaxError(params);
			}
			if (rtPrnDot && bindings) {
				// This is a binding to a path in which an object is returned by a helper/data function/expression, e.g. foo()^x.y or (a?b:c)^x.y
				// We create a compiled function to get the object instance (which will be called when the dependent data of the subexpression changes,
				// to return the new object, and trigger re-binding of the subsequent path)
				expr = pathStart[fnDp-1];
				if (full.length - 1 > ind - (expr || 0)) { // We need to compile a subexpression
					expr = $.trim(full.slice(expr, ind + all.length));
					binds = bindto || bndStack[fnDp-1].bd;
					// Insert exprOb object, to be used during binding to return the computed object
					theOb = binds[binds.length-1];
					if (theOb && theOb.prm) {
						while (theOb.sb && theOb.sb.prm) {
							theOb = theOb.sb;
						}
						newOb = theOb.sb = {path: theOb.sb, bnd: theOb.bnd};
					} else {
						binds.push(newOb = {path: binds.pop()}); // Insert exprOb object, to be used during binding to return the computed object
					}
					if (theOb && theOb.sb === newOb) {
						compiledPath[fnDp] = compiledPath[fnDp-1].slice(theOb._cpPthSt) + compiledPath[fnDp];
						compiledPath[fnDp-1] = compiledPath[fnDp-1].slice(0, theOb._cpPthSt);
					}
					newOb._cpPthSt = compiledPathStart[fnDp-1];
					newOb._cpKey = expr;

					compiledPath[fnDp] += full.slice(prevIndex, index);
					prevIndex = index;

					newOb._cpfn = cpFnStore[expr] = cpFnStore[expr] || // Compiled function for computed value: get from store, or compile and store
						new Function("data,view,j", // Compiled function for computed value in template
					"//" + expr + "\nvar v;\nreturn ((v=" + compiledPath[fnDp] + (rtPrn === "]" ? ")]" : rtPrn) + ")!=null?v:null);");

					compiledPath[fnDp-1] += (fnCall[prnDp] && $subSettingsAdvanced.cache ? "view.getCache(\"" + expr.replace(rEscapeQuotes, "\\$&") + "\"" : compiledPath[fnDp]);

					newOb.prm = bndCtx.bd;
					newOb.bnd = newOb.bnd || newOb.path && newOb.path.indexOf("^") >= 0;
				}
				compiledPath[fnDp] = "";
			}
			if (prn === "[") {
				prn = "[j._sq(";
			}
			if (lftPrn === "[") {
				lftPrn = "[j._sq(";
			}
		}
		ret = (aposed
			// within single-quoted string
			? (aposed = !apos, (aposed ? all : lftPrn2 + '"'))
			: quoted
			// within double-quoted string
				? (quoted = !quot, (quoted ? all : lftPrn2 + '"'))
				:
			(
				(lftPrn
					? (
						prnStack[++prnDp] = true,
						prnInd[prnDp] = 0,
						bindings && (
							pathStart[fnDp++] = ind++,
							bndCtx = bndStack[fnDp] = {bd: []},
							compiledPath[fnDp] = "",
							compiledPathStart[fnDp] = 1
						),
						lftPrn) // Left paren, (not a function call paren)
					: "")
				+ (space
					? (prnDp
						? "" // A space within parens or within function call parens, so not a separator for tag args
			// New arg or prop - so insert backspace \b (\x08) as separator for named params, used subsequently by rBuildHash, and prepare new bindings array
						: (paramIndex = full.slice(paramIndex, ind), named
							? (named = boundName = bindto = false, "\b")
							: "\b,") + paramIndex + (paramIndex = ind + all.length, bindings && pathBindings.push(bndCtx.bd = []), "\b")
					)
					: eq
			// named param. Remove bindings for arg and create instead bindings array for prop
						? (fnDp && syntaxError(params), bindings && pathBindings.pop(), named = "_" + path, boundName = bound, paramIndex = ind + all.length,
								bindings && ((bindings = bndCtx.bd = pathBindings[named] = []), bindings.skp = !bound), path + ':')
						: path
			// path
							? (path.split("^").join(".").replace($sub.rPath, parsePath)
								+ (prn || operator)
							)
							: operator
			// operator
								? operator
								: rtPrn
			// function
									? rtPrn === "]" ? ")]" : ")"
									: comma
										? (fnCall[prnDp] || syntaxError(params), ",") // We don't allow top-level literal arrays or objects
										: lftPrn0
											? ""
											: (aposed = apos, quoted = quot, '"')
			))
		);

		if (!aposed && !quoted) {
			if (rtPrn) {
				fnCall[prnDp] = false;
				prnDp--;
			}
		}

		if (bindings) {
			if (!aposed && !quoted) {
				if (rtPrn) {
					if (prnStack[prnDp+1]) {
						bndCtx = bndStack[--fnDp];
						prnStack[prnDp+1] = false;
					}
					prnStart = prnInd[prnDp+1];
				}
				if (prn) {
					prnInd[prnDp+1] = compiledPath[fnDp].length + (lftPrn ? 1 : 0);
					if (path || rtPrn) {
						bndCtx = bndStack[++fnDp] = {bd: []};
						prnStack[prnDp+1] = true;
					}
				}
			}

			compiledPath[fnDp] = (compiledPath[fnDp]||"") + full.slice(prevIndex, index);
			prevIndex = index+all.length;

			if (!aposed && !quoted) {
				if (lftPrnFCall = lftPrn && prnStack[prnDp+1]) {
					compiledPath[fnDp-1] += lftPrn;
					compiledPathStart[fnDp-1]++;
				}
				if (prn === "(" && subPath && !newOb) {
					compiledPath[fnDp] = compiledPath[fnDp-1].slice(prnStart) + compiledPath[fnDp];
					compiledPath[fnDp-1] = compiledPath[fnDp-1].slice(0, prnStart);
				}
			}
			compiledPath[fnDp] += lftPrnFCall ? ret.slice(1) : ret;
		}

		if (!aposed && !quoted && prn) {
			prnDp++;
			if (path && prn === "(") {
				fnCall[prnDp] = true;
			}
		}

		if (!aposed && !quoted && prn2) {
			if (bindings) {
				compiledPath[fnDp] += prn;
			}
			ret += prn;
		}
		return ret;
	}

	var named, bindto, boundName, result,
		quoted, // boolean for string content in double quotes
		aposed, // or in single quotes
		bindings = pathBindings && pathBindings[0], // bindings array for the first arg
		bndCtx = {bd: bindings},
		bndStack = {0: bndCtx},
		paramIndex = 0, // list,
		// The following are used for tracking path parsing including nested paths, such as "a.b(c^d + (e))^f", and chained computed paths such as
		// "a.b().c^d().e.f().g" - which has four chained paths, "a.b()", "^c.d()", ".e.f()" and ".g"
		prnDp = 0,     // For tracking paren depth (not function call parens)
		fnDp = 0,      // For tracking depth of function call parens
		prnInd = {},   // We are in a function call
		prnStart = 0,  // tracks the start of the current path such as c^d() in the above example
		prnStack = {}, // tracks parens which are not function calls, and so are associated with new bndStack contexts
		fnCall = {},   // We are in a function call
		pathStart = {},// tracks the start of the current path such as c^d() in the above example
		compiledPathStart = {0: 0},
		compiledPath = {0:""},
		prevIndex = 0;

	if (params[0] === "@") {
		params = params.replace(rBracketQuote, ".");
	}
	result = (params + (tmpl ? " " : "")).replace($sub.rPrm, parseTokens);

	if (bindings) {
		result = compiledPath[0];
	}

	return !prnDp && result || syntaxError(params); // Syntax error if unbalanced parens in params expression
}

function buildCode(ast, tmpl, isLinkExpr) {
	// Build the template function code from the AST nodes, and set as property on the passed-in template object
	// Used for compiling templates, and also by JsViews to build functions for data link expressions
	var i, node, tagName, converter, tagCtx, hasTag, hasEncoder, getsVal, hasCnvt, useCnvt, tmplBindings, pathBindings, params, boundOnErrStart,
		boundOnErrEnd, tagRender, nestedTmpls, tmplName, nestedTmpl, tagAndElses, content, markup, nextIsElse, oldCode, isElse, isGetVal, tagCtxFn,
		onError, tagStart, trigger, lateRender, retStrOpen, retStrClose,
		tmplBindingKey = 0,
		useViews = $subSettingsAdvanced.useViews || tmpl.useViews || tmpl.tags || tmpl.templates || tmpl.helpers || tmpl.converters,
		code = "",
		tmplOptions = {},
		l = ast.length;

	if (typeof tmpl === STRING) {
		tmplName = isLinkExpr ? 'data-link="' + tmpl.replace(rNewLine, " ").slice(1, -1) + '"' : tmpl;
		tmpl = 0;
	} else {
		tmplName = tmpl.tmplName || "unnamed";
		if (tmpl.allowCode) {
			tmplOptions.allowCode = true;
		}
		if (tmpl.debug) {
			tmplOptions.debug = true;
		}
		tmplBindings = tmpl.bnds;
		nestedTmpls = tmpl.tmpls;
	}
	for (i = 0; i < l; i++) {
		// AST nodes: [0: tagName, 1: converter, 2: content, 3: params, 4: code, 5: onError, 6: trigger, 7:pathBindings, 8: contentMarkup]
		node = ast[i];

		// Add newline for each callout to t() c() etc. and each markup string
		if (typeof node === STRING) {
			// a markup string to be inserted
			code += '+"' + node + '"';
		} else {
			// a compiled tag expression to be inserted
			tagName = node[0];
			if (tagName === "*") {
				// Code tag: {{* }}
				code += ";\n" + node[1] + "\nret=ret";
			} else {
				converter = node[1];
				content = !isLinkExpr && node[2];
				tagCtx = paramStructure(node[3], params = node[4]);
				trigger = node[6];
				lateRender = node[7];
				if (node[8]) { // latePath @a.b.c or @~a.b.c
					retStrOpen = "\nvar ob,ltOb={},ctxs=";
					retStrClose = ";\nctxs.lt=ltOb.lt;\nreturn ctxs;";
				} else {
					retStrOpen = "\nreturn ";
					retStrClose = "";
				}
				markup = node[10] && node[10].replace(rUnescapeQuotes, "$1");
				if (isElse = tagName === "else") {
					if (pathBindings) {
						pathBindings.push(node[9]);
					}
				} else {
					onError = node[5] || $subSettings.debugMode !== false && "undefined"; // If debugMode not false, set default onError handler on tag to "undefined" (see onRenderError)
					if (tmplBindings && (pathBindings = node[9])) { // Array of paths, or false if not data-bound
						pathBindings = [pathBindings];
						tmplBindingKey = tmplBindings.push(1); // Add placeholder in tmplBindings for compiled function
					}
				}
				useViews = useViews || params[1] || params[2] || pathBindings || /view.(?!index)/.test(params[0]);
				// useViews is for perf optimization. For render() we only use views if necessary - for the more advanced scenarios.
				// We use views if there are props, contextual properties or args with #... (other than #index) - but you can force
				// using the full view infrastructure, (and pay a perf price) by opting in: Set useViews: true on the template, manually...
				if (isGetVal = tagName === ":") {
					if (converter) {
						tagName = converter === HTML ? ">" : converter + tagName;
					}
				} else {
					if (content) { // TODO optimize - if content.length === 0 or if there is a tmpl="..." specified - set content to null / don't run this compilation code - since content won't get used!!
						// Create template object for nested template
						nestedTmpl = tmplObject(markup, tmplOptions);
						nestedTmpl.tmplName = tmplName + "/" + tagName;
						// Compile to AST and then to compiled function
						nestedTmpl.useViews = nestedTmpl.useViews || useViews;
						buildCode(content, nestedTmpl);
						useViews = nestedTmpl.useViews;
						nestedTmpls.push(nestedTmpl);
					}

					if (!isElse) {
						// This is not an else tag.
						tagAndElses = tagName;
						useViews = useViews || tagName && (!$tags[tagName] || !$tags[tagName].flow);
						// Switch to a new code string for this bound tag (and its elses, if it has any) - for returning the tagCtxs array
						oldCode = code;
						code = "";
					}
					nextIsElse = ast[i + 1];
					nextIsElse = nextIsElse && nextIsElse[0] === "else";
				}
				tagStart = onError ? ";\ntry{\nret+=" : "\n+";
				boundOnErrStart = "";
				boundOnErrEnd = "";

				if (isGetVal && (pathBindings || trigger || converter && converter !== HTML || lateRender)) {
					// For convertVal we need a compiled function to return the new tagCtx(s)
					tagCtxFn = new Function("data,view,j", "// " + tmplName + " " + (++tmplBindingKey) + " " + tagName
						+ retStrOpen + "{" + tagCtx + "};" + retStrClose);
					tagCtxFn._er = onError;
					tagCtxFn._tag = tagName;
					tagCtxFn._bd = !!pathBindings; // data-linked tag {^{.../}}
					tagCtxFn._lr = lateRender;

					if (isLinkExpr) {
						return tagCtxFn;
					}

					setPaths(tagCtxFn, pathBindings);
					tagRender = 'c("' + converter + '",view,';
					useCnvt = true;
					boundOnErrStart = tagRender + tmplBindingKey + ",";
					boundOnErrEnd = ")";
				}
				code += (isGetVal
					? (isLinkExpr ? (onError ? "try{\n" : "") + "return " : tagStart) + (useCnvt // Call _cnvt if there is a converter: {{cnvt: ... }} or {^{cnvt: ... }}
						? (useCnvt = undefined, useViews = hasCnvt = true, tagRender + (tagCtxFn
							? ((tmplBindings[tmplBindingKey - 1] = tagCtxFn), tmplBindingKey) // Store the compiled tagCtxFn in tmpl.bnds, and pass the key to convertVal()
							: "{" + tagCtx + "}") + ")")
						: tagName === ">"
							? (hasEncoder = true, "h(" + params[0] + ")")
							: (getsVal = true, "((v=" + params[0] + ')!=null?v:' + (isLinkExpr ? 'null)' : '"")'))
							// Non strict equality so data-link="title{:expr}" with expr=null/undefined removes title attribute
					)
					: (hasTag = true, "\n{view:view,content:false,tmpl:" // Add this tagCtx to the compiled code for the tagCtxs to be passed to renderTag()
						+ (content ? nestedTmpls.length : "false") + "," // For block tags, pass in the key (nestedTmpls.length) to the nested content template
						+ tagCtx + "},"));

				if (tagAndElses && !nextIsElse) {
					// This is a data-link expression or an inline tag without any elses, or the last {{else}} of an inline tag
					// We complete the code for returning the tagCtxs array
					code = "[" + code.slice(0, -1) + "]";
					tagRender = 't("' + tagAndElses + '",view,this,';
					if (isLinkExpr || pathBindings) {
						// This is a bound tag (data-link expression or inline bound tag {^{tag ...}}) so we store a compiled tagCtxs function in tmp.bnds
						code = new Function("data,view,j", " // " + tmplName + " " + tmplBindingKey + " " + tagAndElses + retStrOpen + code
							+ retStrClose);
						code._er = onError;
						code._tag = tagAndElses;
						if (pathBindings) {
							setPaths(tmplBindings[tmplBindingKey - 1] = code, pathBindings);
						}
						code._lr = lateRender;
						if (isLinkExpr) {
							return code; // For a data-link expression we return the compiled tagCtxs function
						}
						boundOnErrStart = tagRender + tmplBindingKey + ",undefined,";
						boundOnErrEnd = ")";
					}

					// This is the last {{else}} for an inline tag.
					// For a bound tag, pass the tagCtxs fn lookup key to renderTag.
					// For an unbound tag, include the code directly for evaluating tagCtxs array
					code = oldCode + tagStart + tagRender + (pathBindings && tmplBindingKey || code) + ")";
					pathBindings = 0;
					tagAndElses = 0;
				}
				if (onError && !nextIsElse) {
					useViews = true;
					code += ';\n}catch(e){ret' + (isLinkExpr ? "urn " : "+=") + boundOnErrStart + 'j._err(e,view,' + onError + ')' + boundOnErrEnd + ';}' + (isLinkExpr ? "" : '\nret=ret');
				}
			}
		}
	}
	// Include only the var references that are needed in the code
	code = "// " + tmplName
		+ (tmplOptions.debug ? "\ndebugger;" : "")
		+ "\nvar v"
		+ (hasTag ? ",t=j._tag" : "")                // has tag
		+ (hasCnvt ? ",c=j._cnvt" : "")              // converter
		+ (hasEncoder ? ",h=j._html" : "")           // html converter
		+ (isLinkExpr
				? (node[8] // late @... path?
						? ", ob"
						: ""
					) + ";\n"
				: ',ret=""')
		+ code
		+ (isLinkExpr ? "\n" : ";\nreturn ret;");

	try {
		code = new Function("data,view,j", code);
	} catch (e) {
		syntaxError("Compiled template code:\n\n" + code + '\n: "' + (e.message||e) + '"');
	}
	if (tmpl) {
		tmpl.fn = code;
		tmpl.useViews = !!useViews;
	}
	return code;
}

//==========
// Utilities
//==========

// Merge objects, in particular contexts which inherit from parent contexts
function extendCtx(context, parentContext) {
	// Return copy of parentContext, unless context is defined and is different, in which case return a new merged context
	// If neither context nor parentContext are defined, return undefined
	return context && context !== parentContext
		? (parentContext
			? $extend($extend({}, parentContext), context)
			: context)
		: parentContext && $extend({}, parentContext);
}

function getTargetProps(source, tagCtx) {
	// this pointer is theMap - which has tagCtx.props too
	// arguments: tagCtx.args.
	var key, prop,
		map = tagCtx.map,
		propsArr = map && map.propsArr;

	if (!propsArr) { // map.propsArr is the full array of {key:..., prop:...} objects
		propsArr = [];
		if (typeof source === OBJECT || $isFunction(source)) {
			for (key in source) {
				prop = source[key];
				if (key !== $expando && source.hasOwnProperty(key) && (!tagCtx.props.noFunctions || !$.isFunction(prop))) {
					propsArr.push({key: key, prop: prop});
				}
			}
		}
		if (map) {
			map.propsArr = map.options && propsArr; // If bound {^{props}} and not isRenderCall, store propsArr on map (map.options is defined only for bound, && !isRenderCall)
		}
	}
	return getTargetSorted(propsArr, tagCtx); // Obtains map.tgt, by filtering, sorting and splicing the full propsArr
}

function getTargetSorted(value, tagCtx) {
	// getTgt
	var mapped, start, end,
		tag = tagCtx.tag,
		props = tagCtx.props,
		propParams = tagCtx.params.props,
		filter = props.filter,
		sort = props.sort,
		directSort = sort === true,
		step = parseInt(props.step),
		reverse = props.reverse ? -1 : 1;

	if (!$isArray(value)) {
		return value;
	}
	if (directSort || sort && typeof sort === STRING) {
		// Temporary mapped array holds objects with index and sort-value
		mapped = value.map(function(item, i) {
			item = directSort ? item : getPathObject(item, sort);
			return {i: i, v: typeof item === STRING ? item.toLowerCase() : item};
		});
		// Sort mapped array
		mapped.sort(function(a, b) {
			return a.v > b.v ? reverse : a.v < b.v ? -reverse : 0;
		});
		// Map to new array with resulting order
		value = mapped.map(function(item){
			return value[item.i];
		});
	} else if ((sort || reverse < 0) && !tag.dataMap) {
		value = value.slice(); // Clone array first if not already a new array
	}
	if ($isFunction(sort)) {
		value = value.sort(function() { // Wrap the sort function to provide tagCtx as 'this' pointer
			return sort.apply(tagCtx, arguments);
		});
	}
	if (reverse < 0 && (!sort || $isFunction(sort))) { // Reverse result if not already reversed in sort
		value = value.reverse();
	}

	if (value.filter && filter) { // IE8 does not support filter
		value = value.filter(filter, tagCtx);
		if (tagCtx.tag.onFilter) {
			tagCtx.tag.onFilter(tagCtx);
		}
	}

	if (propParams.sorted) {
		mapped = (sort || reverse < 0) ? value : value.slice();
		if (tag.sorted) {
			$.observable(tag.sorted).refresh(mapped); // Note that this might cause the start and end props to be modified - e.g. by pager tag control
		} else {
			tagCtx.map.sorted = mapped;
		}
	}

	start = props.start; // Get current value - after possible changes triggered by tag.sorted refresh() above
	end = props.end;
	if (propParams.start && start === undefined || propParams.end && end === undefined) {
		start = end = 0;
	}
	if (!isNaN(start) || !isNaN(end)) { // start or end specified, but not the auto-create Number array scenario of {{for start=xxx end=yyy}}
		start = +start || 0;
		end = end === undefined || end > value.length ? value.length : +end;
		value = value.slice(start, end);
	}
	if (step > 1) {
		start = 0;
		end = value.length;
		mapped = [];
		for (; start<end; start+=step) {
			mapped.push(value[start]);
		}
		value = mapped;
	}
	if (propParams.paged && tag.paged) {
		$observable(tag.paged).refresh(value);
	}

	return value;
}

/** Render the template as a string, using the specified data and helpers/context
* $("#tmpl").render()
*
* @param {any}        data
* @param {hash}       [helpersOrContext]
* @param {boolean}    [noIteration]
* @returns {string}   rendered template
*/
function $fnRender(data, context, noIteration) {
	var tmplElem = this.jquery && (this[0] || error('Unknown template')), // Targeted element not found for jQuery template selector such as "#myTmpl"
		tmpl = tmplElem.getAttribute(tmplAttr);

	return renderContent.call(tmpl && $.data(tmplElem)[jsvTmpl] || $templates(tmplElem),
		data, context, noIteration);
}

//========================== Register converters ==========================

function getCharEntity(ch) {
	// Get character entity for HTML, Attribute and optional data encoding
	return charEntities[ch] || (charEntities[ch] = "&#" + ch.charCodeAt(0) + ";");
}

function getCharFromEntity(match, token) {
	// Get character from HTML entity, for optional data unencoding
	return charsFromEntities[token] || "";
}

function htmlEncode(text) {
	// HTML encode: Replace < > & ' " ` etc. by corresponding entities.
	return text != undefined ? rIsHtml.test(text) && ("" + text).replace(rHtmlEncode, getCharEntity) || text : "";
}

function dataEncode(text) {
	// Encode just < > and & - intended for 'safe data' along with {{:}} rather than {{>}}
  return typeof text === STRING ? text.replace(rDataEncode, getCharEntity) : text;
}

function dataUnencode(text) {
  // Unencode just < > and & - intended for 'safe data' along with {{:}} rather than {{>}}
  return  typeof text === STRING ? text.replace(rDataUnencode, getCharFromEntity) : text;
}

//========================== Initialize ==========================

$sub = $views.sub;
$viewsSettings = $views.settings;

if (!(jsr || $ && $.render)) {
	// JsRender/JsViews not already loaded (or loaded without jQuery, and we are now moving from jsrender namespace to jQuery namepace)
	for (jsvStoreName in jsvStores) {
		registerStore(jsvStoreName, jsvStores[jsvStoreName]);
	}

	$converters = $views.converters;
	$helpers = $views.helpers;
	$tags = $views.tags;

	$sub._tg.prototype = {
		baseApply: baseApply,
		cvtArgs: convertArgs,
		bndArgs: convertBoundArgs,
		ctxPrm: contextParameter
	};

	topView = $sub.topView = new View();

	//BROWSER-SPECIFIC CODE
	if ($) {

		////////////////////////////////////////////////////////////////////////////////////////////////
		// jQuery (= $) is loaded

		$.fn.render = $fnRender;
		$expando = $.expando;
		if ($.observable) {
			if (versionNumber !== (versionNumber = $.views.jsviews)) {
				// Different version of jsRender was loaded
				throw "jquery.observable.js requires jsrender.js " + versionNumber;
			}
			$extend($sub, $.views.sub); // jquery.observable.js was loaded before jsrender.js
			$views.map = $.views.map;
		}

	} else {
		////////////////////////////////////////////////////////////////////////////////////////////////
		// jQuery is not loaded.

		$ = {};

		if (setGlobals) {
			global.jsrender = $; // We are loading jsrender.js from a script element, not AMD or CommonJS, so set global
		}

		// Error warning if jsrender.js is used as template engine on Node.js (e.g. Express or Hapi...)
		// Use jsrender-node.js instead...
		$.renderFile = $.__express = $.compile = function() { throw "Node.js: use npm jsrender, or jsrender-node.js"; };

		//END BROWSER-SPECIFIC CODE
		$.isFunction = function(ob) {
			return typeof ob === "function";
		};

		$.isArray = Array.isArray || function(obj) {
			return ({}.toString).call(obj) === "[object Array]";
		};

		$sub._jq = function(jq) { // private method to move from JsRender APIs from jsrender namespace to jQuery namespace
			if (jq !== $) {
				$extend(jq, $); // map over from jsrender namespace to jQuery namespace
				$ = jq;
				$.fn.render = $fnRender;
				delete $.jsrender;
				$expando = $.expando;
			}
		};

		$.jsrender = versionNumber;
	}
	$subSettings = $sub.settings;
	$subSettings.allowCode = false;
	$isFunction = $.isFunction;
	$.render = $render;
	$.views = $views;
	$.templates = $templates = $views.templates;

	for (setting in $subSettings) {
		addSetting(setting);
	}

	/**
	* $.views.settings.debugMode(true)
	* @param {boolean} debugMode
	* @returns {Settings}
	*
	* debugMode = $.views.settings.debugMode()
	* @returns {boolean}
	*/
	($viewsSettings.debugMode = function(debugMode) {
		return debugMode === undefined
			? $subSettings.debugMode
			: (
				$subSettings._clFns && $subSettings._clFns(), // Clear linkExprStore (cached compiled expressions), since debugMode setting affects compilation for expressions
				$subSettings.debugMode = debugMode,
				$subSettings.onError = typeof debugMode === STRING
					? function() { return debugMode; }
					: $isFunction(debugMode)
						? debugMode
						: undefined,
				$viewsSettings);
	})(false); // jshint ignore:line

	$subSettingsAdvanced = $subSettings.advanced = {
		cache: true, // By default use cached values of computed values (Otherwise, set advanced cache setting to false)
		useViews: false,
		_jsv: false // For global access to JsViews store
	};

	//========================== Register tags ==========================

	$tags({
		"if": {
			render: function(val) {
				// This function is called once for {{if}} and once for each {{else}}.
				// We will use the tag.rendering object for carrying rendering state across the calls.
				// If not done (a previous block has not been rendered), look at expression for this block and render the block if expression is truthy
				// Otherwise return ""
				var self = this,
					tagCtx = self.tagCtx,
					ret = (self.rendering.done || !val && (tagCtx.args.length || !tagCtx.index))
						? ""
						: (self.rendering.done = true,
							self.selected = tagCtx.index,
							undefined); // Test is satisfied, so render content on current context
				return ret;
			},
			contentCtx: true, // Inherit parent view data context
			flow: true
		},
		"for": {
			sortDataMap: dataMap(getTargetSorted),
			init: function(val, cloned) {
				this.setDataMap(this.tagCtxs);
			},
			render: function(val) {
				// This function is called once for {{for}} and once for each {{else}}.
				// We will use the tag.rendering object for carrying rendering state across the calls.
				var value, filter, srtField, isArray, i, sorted, end, step,
					self = this,
					tagCtx = self.tagCtx,
					range = tagCtx.argDefault === false,
					props = tagCtx.props,
					iterate = range || tagCtx.args.length, // Not final else and not auto-create range
					result = "",
					done = 0;

				if (!self.rendering.done) {
					value = iterate ? val : tagCtx.view.data; // For the final else, defaults to current data without iteration.

					if (range) {
						range = props.reverse ? "unshift" : "push";
						end = +props.end;
						step = +props.step || 1;
						value = []; // auto-create integer array scenario of {{for start=xxx end=yyy}}
						for (i = +props.start || 0; (end - i) * step > 0; i += step) {
							value[range](i);
						}
					}
					if (value !== undefined) {
						isArray = $isArray(value);
						result += tagCtx.render(value, !iterate || props.noIteration);
						// Iterates if data is an array, except on final else - or if noIteration property
						// set to true. (Use {{include}} to compose templates without array iteration)
						done += isArray ? value.length : 1;
					}
					if (self.rendering.done = done) {
						self.selected = tagCtx.index;
					}
					// If nothing was rendered we will look at the next {{else}}. Otherwise, we are done.
				}
				return result;
			},
			setDataMap: function(tagCtxs) {
				var tagCtx, props, paramsProps,
					self = this,
					l = tagCtxs.length;
				while (l--) {
					tagCtx = tagCtxs[l];
					props = tagCtx.props;
					paramsProps = tagCtx.params.props;
					tagCtx.argDefault = props.end === undefined || tagCtx.args.length > 0; // Default to #data except for auto-create range scenario {{for start=xxx end=yyy step=zzz}}
					props.dataMap = (tagCtx.argDefault !== false && $isArray(tagCtx.args[0]) &&
						(paramsProps.sort || paramsProps.start || paramsProps.end || paramsProps.step || paramsProps.filter || paramsProps.reverse
						|| props.sort || props.start || props.end || props.step || props.filter || props.reverse))
						&& self.sortDataMap;
				}
			},
			flow: true
		},
		props: {
			baseTag: "for",
			dataMap: dataMap(getTargetProps),
			init: noop, // Don't execute the base init() of the "for" tag
			flow: true
		},
		include: {
			flow: true
		},
		"*": {
			// {{* code... }} - Ignored if template.allowCode and $.views.settings.allowCode are false. Otherwise include code in compiled template
			render: retVal,
			flow: true
		},
		":*": {
			// {{:* returnedExpression }} - Ignored if template.allowCode and $.views.settings.allowCode are false. Otherwise include code in compiled template
			render: retVal,
			flow: true
		},
		dbg: $helpers.dbg = $converters.dbg = dbgBreak // Register {{dbg/}}, {{dbg:...}} and ~dbg() to throw and catch, as breakpoints for debugging.
	});

	$converters({
		html: htmlEncode,
		attr: htmlEncode, // Includes > encoding since rConvertMarkers in JsViews does not skip > characters in attribute strings
		encode: dataEncode,
		unencode: dataUnencode, // Includes > encoding since rConvertMarkers in JsViews does not skip > characters in attribute strings
		url: function(text) {
			// URL encoding helper.
			return text != undefined ? encodeURI("" + text) : text === null ? text : ""; // null returns null, e.g. to remove attribute. undefined returns ""
		}
	});
}
//========================== Define default delimiters ==========================
$subSettings = $sub.settings;
$isArray = ($||jsr).isArray;
$viewsSettings.delimiters("{{", "}}", "^");

if (jsrToJq) { // Moving from jsrender namespace to jQuery namepace - copy over the stored items (templates, converters, helpers...)
	jsr.views.sub._jq($);
}
return $ || jsr;
}, window));


const utils = function () {
    delay = function (ms) {
        var timer = 0;
        return function (callback) {
            clearTimeout(timer);
            timer = setTimeout(callback, ms);
        };
    };
	
	_utCfg = {
		synmMap: {
			"z9": "Z 9",
			"z8": "Z 8",
			"z7ii": "Z 7II",
			"z6ii": "Z 6II",
			"zf": "Z f",
			"zfc": "Z fc",
			"z5": "Z 5",
			"z50": "Z 50",
			"z30": "Z 30",
			"z7": "Z 7",
			"z6": "Z 6",
			"nikkorz": "NIKKOR Z",
			"d 6": "D6",
			"d 5": "D5",
			"d f": "Df",
			"d 850": "D850",
			"d 810a": "D810A",
			"d 810": "D810",
			"d 780": "D780",
			"d 750": "D750",
			"d 610": "D610",
			"d 500": "D500",
			"d 7500": "D7500",
			"d 7200": "D7200",
			"d 5600": "D5600",
			"d 5300": "D5300",
			"d 3500": "D3500",
			"d 3400": "D3400",
			"p 950": "COOLPIX P950",
			"p950": "COOLPIX P950",
			"w 150": "COOLPIX W150",
			"w150": "COOLPIX W150",
			"a 1000": "COOLPIX A1000",
			"a1000": "COOLPIX A1000",
			"b 600": "COOLPIX B600",
			"b600": "COOLPIX B600",
			"p 1000": "COOLPIX P1000",
			"p1000": "COOLPIX P1000",
			"w 300s": "COOLPIX W300s",
			"w300s": "COOLPIX W300s",
			"b 700": "COOLPIX B700",
			"b700": "COOLPIX B700",
			"a 100": "COOLPIX A100",
			"a100": "COOLPIX A100",
			"cool pix": "COOLPIX",
			"f 6": "F6",
			"sb5000": "SB-5000",
			"sb700": "SB-700",
			"sb500": "SB-500",
			"sb300": "SB-300",
			"su800": "SU-800",
			"sbr200": "SB-R200",
			"km360": "KeyMission 360",
			"keymission360": "KeyMission 360",
			"km170": "KeyMission 170",
			"keymission170": "KeyMission 170",
			"km80": "KeyMission 80",
			"keymission80": "KeyMission 80",
			"a30": "ACULON A30",
			"a211": "ACULON A211",
			"t01": "ACULON T01",
			"t02": "ACULON T02",
			"t51": "ACULON T51",
			"w10": "ACULON W10",
			"p3": "PROSTAFF P3",
			"p7": "PROSTAFF P7",
			"3s": "PROSTAFF 3S",
			"7s": "PROSTAFF 7S",
			"prostaff5": "PROSTAFF 5",
			"m5": "MONARCH M5",
			"m7": "MONARCH M7",
			"monarch5": "MONARCH 5",
			"monarch7": "MONARCH 7",
			"hg": "MONARCH HG",
			"sx": "阅野 SX",
			"ex": "Sportstar EX",
			"wx10x50 if": "WX 10x50 IF 100周年纪念版",
			"wx10-50 if": "WX 10x50 IF 100周年纪念版",
			"wx7x50 if": "WX 7x50 IF 100周年纪念版",
			"wx7-50 if": "WX 7x50 IF 100周年纪念版",
			"mep20-60": "MEP-20-60",
			"mep20x60": "MEP-20-60",
			"mep38w": "MEP-38W",
			"60eda": "MONARCH 60ED-A",
			"60eds": "MONARCH 60ED-S",
			"82eda": "MONARCH 82ED-A",
			"82eds": "MONARCH 82ED-S",
			"coolshot50i": "COOLSHOT 50i",
			"coolshot40igii": "COOLSHOT 40i GII",
			"coolshot40i gii": "COOLSHOT 40i GII",
			"coolshot20": "COOLSHOT 20",
			"coolshot40": "COOLSHOT 40",
			"coolshot40i": "COOLSHOT 40i",
			"coolshot80i": "COOLSHOT 80i VR",
			"coolshot20gii": "COOLSHOT 20 GII",
			"coolshot20 gii": "COOLSHOT 20 GII",
			"1nikkor":"1 NIKKOR"
		},
		DEALER_PAGES:["super_image_shop.page", "image_shop.page", "model_shop.page", "imaging_shop.page", "brand_shop.page", "dealers.page" ],
		HL_PRE: "<span class='span-bold'>",
		HL_POST: "</span>",
		HL_LENGTH: 170
 
	}
	
	
	_utPrivate = {};
	
	_utPrivate.isAlphaNumeric = function(str) {
	  var regExp = /^[A-Za-z0-9]+$/;
	  return (str.match(regExp));
	};
	
	_utPrivate.genST = function(list,acc) {
		if(list.length > 0) {
			const item = list.pop()
			if(!acc || acc == "") {
				return _utPrivate.genST(list, item );
			} else {
				return _utPrivate.genST(list, "and(" + item + "," + acc + ")");
			}
		} else {
			return acc;
		}
	}
	
	_utPrivate.tokenizeWithSynm = function(searchText){
		//filter the synmMap
		//console.log('debug: before searchText transformed: ', tokens);
		const tokens_cleaned = searchText.split(" ").filter(t => t.trim().length > 0);
		
		let tokens = [];
		for(let i=0; i<tokens_cleaned.length; i++) {
			let curToken = tokens_cleaned[i];
			let foundPos = -1;
			let foundKey = ""
			for(let k in _utCfg.synmMap) {
				//console.log("key:", k);
				const index = curToken.toLowerCase().indexOf(k);
				if(index >=0) {
					foundPos = index;
					foundKey = k;
					break;
				} 
			}
			
			if(foundPos >=0) {
				// split by found post
				const arr = curToken.toLowerCase().split(foundKey);
				arr.join(" " + foundKey + " ").split(" ").map( t => tokens.push(t));
			} else {
				tokens.push(curToken);
			}
			
			foundPos = -1;
			foundKey = "";
		}
		tokens = tokens.filter(t => t.trim().length > 0);
		//console.log('cur tokens: ', tokens);
	
		const tokens_stage1 = [];
		
		// if entire searchText has synm, use this.
		if(_utCfg.synmMap[searchText.trim().toLowerCase()]) {
			_utCfg.synmMap[searchText.trim().toLowerCase()].replaceAll("-"," ").split(" ").map(t => tokens_stage1.push(t));
		} else {
			for(let i=0; i<tokens.length; i++) {
				let curToken = tokens[i]
			
				if(_utCfg.synmMap[curToken.toLowerCase()]) {
					const value = _utCfg.synmMap[curToken.toLowerCase()];
					if(value.indexOf(tokens.join(" ").toUpperCase()) >=0) {
						curToken.replaceAll("-"," ").split(" ").map(t => {
							
							tokens_stage1.push(t);
						});
					} else {
						_utCfg.synmMap[curToken.toLowerCase()].replaceAll("-"," ").split(" ").map(t => tokens_stage1.push(t));
					}
				} else {
					curToken.replaceAll("-"," ").split(" ").map(t => {
						
						tokens_stage1.push(t);
					});
					//tokens_stage1.push(curToken);
				}
			}
		}
		//console.log('debug: after searchText transformed: ', tokens_stage1);
		return tokens_stage1;		
	}
	
	_utPrivate.extractMatchedTerms = function(searchText, txt) {
		const tokens_stage1 = _utPrivate.tokenizeWithSynm(searchText);
		const regStr = tokens_stage1.join("[\\s-]?");
		//console.log('using regStr', regStr);
		const reg = new RegExp(regStr, "ig");
		if(txt && txt.length > 0) {
			const arr = txt.toString().match(reg);
			const s = new Set(arr);
			return Array.from(s);
		} else {
			return [];
		}
		
	}
	
	_utPrivate.nicsHighlightTerms = function (txt, terms) {

	  const hlLength = _utCfg.HL_LENGTH;

		if(Array.isArray(txt)) {
			txt = txt[0]
		}
	  const termsPos0 = [];
	  for(let i=0; i<terms.length; i++) {
		const curTerm = terms[i];
		const arr = txt.split(curTerm);
		let accLength = 0
		for(let j=0; j< arr.length - 1; j++) {
		if(j == 0) {
			  termsPos0.push({term: curTerm, pos: arr[j].length});
			  accLength += arr[j].length
			} else {
		  accLength += arr[j].length + curTerm.length
		  termsPos0.push({term: curTerm, pos: accLength});
		}
		}

	  }
	  const termsPos = termsPos0.sort(function(a, b){return a.pos-b.pos})
	  //console.log(termsPos);

	let selectedText = "";  

	  if(txt.length <= hlLength) {
		//console.log('returning full txt as highlight')
		selectedText = txt;

	  } else {
		let termsLength = 0;
		let preCur = 0;
		let postCur = 0;
		if(termsPos.length == 0) {
		//console.log('empty search term, returning ', hlLength, ' of txt');
		selectedText = txt.substring(0, hlLength);
		} else if(termsPos.length >= 1) {
		preCur = termsPos[0].pos
			postCur = termsPos[0].pos + termsPos[0].term.length

		let newLength = 0
		for(i=1; i<termsPos.length; i++) {
			newLength = termsPos[i].pos - termsPos[0].pos + termsPos[i].term.length
			if(newLength < hlLength) {
					postCur = termsPos[i].pos + termsPos[i].term.length			
			} else {
				//console.log('requested hl length is less than the matched');
				break;
			}
			}	

		const contentLength = postCur - preCur;
		let leftCnt = Math.floor((hlLength - contentLength) / 2)
		let rightCnt = leftCnt;

		let leftOffset = 0;
		let rightOffset = 0;
		if(preCur - leftCnt >= 0) {
			//console.log('means good enough length on left side');
		} else {
			leftOffset = leftCnt - preCur
		}

		if(txt.length - postCur >= rightCnt) {
			//console.log('means good enough length on right side');
		} else {
			rightOffset = rightCnt - (txt.length - postCur);
		}


		//console.log(preCur, postCur, leftCnt, leftOffset, rightOffset);
		const finalPreCursor = preCur - leftCnt - rightOffset >=0 ? preCur - leftCnt - rightOffset : 0;
		const finalPostCursor = postCur + rightCnt + leftOffset <= txt.length -1 ? postCur + rightCnt + leftOffset: txt.length - 1
		
		selectedText = txt.substring(finalPreCursor, finalPreCursor + hlLength);

		}





	}

	  //console.log("selected Text:", selectedText);
	  let outputStr = selectedText;
		for(let i=0; i< terms.length; i++) {
			const curTerm = terms[i];
			//console.log('replacing the term:' , curTerm,outputStr);
			outputStr = outputStr.replaceAll(curTerm, _utCfg.HL_PRE + curTerm + _utCfg.HL_POST);
			//console.log('after replacement', outputStr);
		}
		
		return outputStr;

	}
	
	_utPrivate.tokenize = function(searchText) {

		const tokens_stage1 = _utPrivate.tokenizeWithSynm(searchText);
		//break if non alpha numeric
		const tokens_stage2 = [];
		for(let i=0; i<tokens_stage1.length; i++){
			let curToken = tokens_stage1[i]
			if(curToken) {
				if(_utPrivate.isAlphaNumeric(curToken)) {
					tokens_stage2.push(curToken)
				} else {
					curToken.split("").map(t => {
						tokens_stage2.push(t);
						//console.log(t);
					});
				}
			}
		}
		
		return tokens_stage2;
	}
	
	_utPrivate.tokenizeForQuery = function(searchText) {

		const tokens_stage1 = _utPrivate.tokenizeWithSynm(searchText);
		//break if non alpha numeric
		
		const edixmasQuery = '"' + tokens_stage1.join(" ") + '"';
		const lucenQ1 = "nikon_title_lcs:*" + searchText.replaceAll(" ", "\\ ").toLowerCase() + "*";
		const lucenQ2 = "nikon_title_lcs:*" + tokens_stage1.join("\\ ").toLowerCase() + "*";
		
		return [edixmasQuery, lucenQ1, lucenQ2];
	}
	genSortTerm = function(list,acc) {
		const titleList = list.map(x => x.replaceAll('nikon_title', 'title'));
		const title_sortTerm = _utPrivate.genST(titleList);
		
		const relevantSearchLogic = "if(exists(nikon_publication_date),product(ms(nikon_publication_date),nikon_category_order),sum(query($q),product(ms(2000-01-01T00:00:00Z),nikon_category_order)))"

	
//		const sortTermForTitle  = "if(" + title_sortTerm + ",sum(query($q),nikon_category_order),0)"
		
//		const fullSort = "if(" + _utPrivate.genST(list, acc) + ",sum(query($q),nikon_category_order)," + sortTermForTitle + ") desc,nikon_category_order desc,nikon_publication_date desc,score desc";
		const sortTermForTitle  = "if(" + title_sortTerm + "," + relevantSearchLogic + ",0)"
		
		const fullSort = "if(" + _utPrivate.genST(list, acc) + "," + relevantSearchLogic + "," + sortTermForTitle + ") desc,nikon_category_order desc,nikon_publication_date desc,score desc";
				
		//console.log('full sort: ', fullSort);
		return fullSort;
	}
	
	_utPrivate.resolveURL = function(doc, searchText) {
		const cat = doc.nikon_category;
		let needSearchParam = false;
		if(cat == "where_to_buy") {
			for(let i=0; i<_utCfg.DEALER_PAGES.length; i++) {
				const curPage = _utCfg.DEALER_PAGES[i];
				if(doc.id.indexOf(curPage) > 0) {
					needSearchParam = true;
					break;
				}
			}
		}		
		if(needSearchParam) {
			return doc.url + "?search=" + searchText;
		} else {
			return doc.url;
		}
	}

    return {
        delay: delay,
		genSortTerm: genSortTerm,
		tokenizeWithSynm: _utPrivate.tokenizeWithSynm,
		tokenize: _utPrivate.tokenize,
		tokenizeForQuery: _utPrivate.tokenizeForQuery,
		resolveURL: _utPrivate.resolveURL,
		extractMatchedTerms: _utPrivate.extractMatchedTerms,
		nicsHighlightTerms: _utPrivate.nicsHighlightTerms,
		cleanImage: function(url,cat,doc) {
			
			//https://www.nikon.com.cn/sc_CN/service-and-support/service-advisory.tag/service_advisory_notices/Service%20Advisory%20for%20Z%209.dcr
			if(cat == "news" && doc.id.indexOf("service-advisory") > 0) {
				return "/tmp/CN/4016499630/2190815068/3760176746/3035683751/3599004193.jpg";
			}
			if(cat == "customer_services") { //gps image
				return "/tmp/CN/4016499630/2190815068/3760176746/3035683751/1610064454.jpg";
			}
			if(cat == "where_to_buy") {
				if(doc.id.indexOf("nikon_store") > 0) {
					return "/tmp/CN/4016499630/2190815068/3760176746/3035683751/2349772022.jpg";
				} 
				
				for(let i=0; i<_utCfg.DEALER_PAGES.length; i++) {
					const curPage = _utCfg.DEALER_PAGES[i];
					if(doc.id.indexOf(curPage) > 0) {
						return "/tmp/CN/4016499630/2190815068/3760176746/3035683751/4111928606.jpg"; 
					}
				}
				
				if(doc.id.indexOf("mall.jd.com") > 0 || doc.id.indexOf("nikon.tmall.com") > 0) {
					return "/tmp/CN/4016499630/2190815068/3760176746/3035683751/670641191.jpg";
				}
			}
			if(!url || url.length == 0) {
				if(cat == "news") {
					return "/resources/styles/global/img/static/newsFallback1.jpg";
				} else {
					return "/resources/rwd/images/search/nikon-logo.webp";
				}
			} else {
				return url.startsWith("/") ? url : "/" + url;
			}
		},
		defaultFQ: function(){
			return "fq=nikon_category_order:* AND nikon_content_type:page AND -url:*product-archive*"
		}
    }
}

var handleJSON = function(data) {
    //console.log("received " + data.name );
   }

const SM = function () {

    const DELAY_MS = 50

    var _options = {
        "EL_SEARCH": "#nics-search",
        "EL_SEARCH_TEXT": ".search-text",
        "EL_SEARCH_BUTTON": ".search-button",
        "EL_SEARCH_CONTAINER": ".searchResults",
        "EL_SEARCH_RESULT_LIST": ".result-list",
        "EL_SEARCH_LOADMORE": ".result-list-loadmore",
        "EL_SEARCH_LOADING": ".searchResults .nics-search-loading",
        "EL_NAV_BTN": ".navmenu, .btn-open-menu",
        "EL_NAV_CONTAINER": ".am-nav, .rich_navigation",
        "SOLR_URL": '/#',
        "IS_LISTEN_FOR_NAV_BTN": true,
        "TPL_SEARCH_RESULT_LIST": $.templates("#templateGlobalSearchResultListItem"),
        "ON_SUBMIT_PATH": "/sc_CN/search.page",
        "CFG_MAX_ITEMS": 5
    }
   

    
    const _private = {}

    const _ut = utils()
    const _fnDelay = _ut.delay(DELAY_MS)



    // search related


    _private.hideLoading = function () {
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_LOADING).hide()
    }
    _private.hideLoadMore = function () {
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_LOADMORE).hide()
    }

    _private.hideSearchContainer = function () {
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_CONTAINER).hide()
    }

    _private.showSearchContainer = function () {
//        console.log('showing target container', _options)
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_CONTAINER).show()
    }

    //TO BE REMOVED
    _private.hideResultList = function () {
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_RESULT_LIST).hide()
    }

    _clearResultList = function () {
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_RESULT_LIST).empty()
    }

    _private.showLoading = function () {
//        console.log('showing Loading', _options)
       $(_options.EL_SEARCH).find(_options.EL_SEARCH_LOADING).show()
        _private.showSearchContainer()
    }

    _private.showLoadMore = function () {
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_LOADMORE).show()
        _private.showSearchContainer()
    }

    _private.showResultList = function () {
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_RESULT_LIST).show()
        _private.showSearchContainer()
    }

    _private.isNavVisible = function () {
        return $(_options.EL_NAV_CONTAINER).is(":visible")
    }

    _private.refreshNavCss = function () {
        //console.log(_isNavVisible());
        if (_private.isNavVisible()) {
            $(_options.EL_SEARCH).addClass("nav-expanded")
        } else {
            $(_options.EL_SEARCH).removeClass("nav-expanded")
        }
        setTimeout(function () {
            if (_private.isNavVisible()) {
                $(_options.EL_SEARCH).addClass("nav-expanded")
            } else {
                $(_options.EL_SEARCH).removeClass("nav-expanded")
            }
            //			console.log('output after timeout 800', _isNavVisible());
        }, 400);
    }


    _private.resetInitialState = function () {
        _private.hideSearchContainer();
        _private.hideLoading()
        _private.hideLoadMore()
        _private.hideResultList();

    }

    _private.renderResultList = function (list,searchText) {

        $(_options.EL_SEARCH).find(_options.EL_SEARCH_RESULT_LIST).empty();

        const hl = list.highlighting

          function resolveDescription(doc) {
                if(doc.nikon_product_a_overview ) {
                    if( hl && hl[doc.id] && hl[doc.id]["nikon_product_a_overview"]) 
                        return hl[doc.id]["nikon_product_a_overview"] 
                    else 
                        return doc.nikon_product_a_overview
                }

                
                if( hl && hl[doc.id] && hl[doc.id]["nikon_content"]) 
                    return hl[doc.id]["nikon_content"] 
				else
					return doc.nikon_content;
                

				if( hl && hl[doc.id] && hl[doc.id]["content"]) 
					return hl[doc.id]["content"] 
				else 
					return doc.content

            }
			
			function resolveRawDescription(doc) {
                if(doc.nikon_product_a_overview ) {
                    if( hl && hl[doc.id] && hl[doc.id]["nikon_product_a_overview"]) 
                        return doc.nikon_product_a_overview
                    else 
                        return doc.nikon_product_a_overview
                }

                
                if( hl && hl[doc.id] && hl[doc.id]["nikon_content"]) 
                    return doc.nikon_content;
				else
					return doc.nikon_content;
                

				if( hl && hl[doc.id] && hl[doc.id]["content"]) 
					return doc.content
				else 
					return doc.content

            }			

        // convert data to template object
        let cnt = 0;
        if(list && list.response && list.response.docs) {
            for(let i=0; i<list.response.docs.length; i++) {
                const doc = list.response.docs[i]
                const cleanedImage = _ut.cleanImage(doc.nikon_image,doc.nikon_category,doc);
				
				const desc = resolveRawDescription(doc);
				const title = doc.nikon_title || doc.title;
				const matchedDesc = _ut.extractMatchedTerms(searchText, desc);
				const matchedTitle = _ut.extractMatchedTerms(searchText, title);
				//console.log("matched desc", matchedDesc, "matched title" , matchedTitle, "desc len", desc.toString().length);
				const hlDesc = _ut.nicsHighlightTerms(desc, matchedDesc);
				const hlTitle = _ut.nicsHighlightTerms(title, matchedTitle);
//				console.log('highlighted desc', hlDesc);
				//console.log('highlighted title', hlTitle);
				const data = {
					url: _ut.resolveURL(doc,searchText),
					title: hlTitle,
//                        title: doc.nikon_title || doc.title,
					image_url: cleanedImage,
					url_target: doc.url_target,
//                        description: doc.nikon_product_a_overview || doc.nikon_content || doc.content
//                        description: resolveDescription(doc)
					description: hlDesc
				}				
				
/*                const data = {
                    url: _ut.resolveURL(doc,searchText),
                    title: doc.nikon_title || doc.title,
                    image_url:cleanedImage,
					url_target: doc.url_target,
                    //description: doc.nikon_product_a_overview || doc.nikon_content || doc.content
                    description: resolveDescription(doc)
                }
*/
/*				if(doc.nikon_category == 'where_to_buy') {
					
					let patchedDesc = "";
					if(Array.isArray(data.description)) {
						patchedDesc = data.description.map(x => x.substring(x.indexOf("<span")));
					} else {
						patchedDesc = data.description.substring(data.description.indexOf("<span"));
					}
					
					data.description = patchedDesc;
				}			*/
				
                const dom = _options.TPL_SEARCH_RESULT_LIST.render(data)
                $(_options.EL_SEARCH).find(_options.EL_SEARCH_RESULT_LIST).append(dom)
                cnt = cnt + 1
                if(cnt >= _options.CFG_MAX_ITEMS) {
                    break;
                }
            }
        }


        _private.hideLoading()
        _private.showLoadMore();
        _private.showResultList();


   }

    _private.queryQuickSearch = function (searchText) {
        _private.showLoading();
        _private.hideLoadMore();
        _private.hideResultList();

		const ut = new utils();
//		const updatedSearchText = ut.tokenizeWithSynm(searchText).join(" ");
//        let searchURL = '/proxies/nikon/solr.proxy?q="'+ updatedSearchText + '"&search=true&wt=json&rows=5'
		const updatedSearchText = ut.tokenizeForQuery(searchText).join(" OR ");
        let searchURL = '/proxies/nikon/solr.proxy?q='+ updatedSearchText + '&search=true&wt=json&rows=5'

//			const tokens = searchText.split(" ").map(x => "gte(termfreq(nikon_title,'" + x + "'),1)");
			const tokens = ut.tokenize(searchText).map(x => "gte(termfreq(nikon_title,'" + x + "'),1)");
			//console.log('debug tokens:', tokens);
			const sortTerms = ut.genSortTerm(tokens);
			//console.log("debug sortTerms;", sortTerms);
			//searchURL += "&sort=" + sortTerms
			searchURL += "&sortenc=" + btoa(encodeURIComponent(sortTerms));			
			searchURL += "&" + ut.defaultFQ();
        if(_options.activeRequest) {
            _options.activeRequest.abort()
            delete _options.activeRequest
        }
        _options.activeRequest = $.ajax({
            url:searchURL,
            dataType:'json',
            success: function( data ) {
                _private.renderResultList(data,searchText)
            },
            error: function( err, err2, err3) {

            }
        })
    }

    _private.getSearchText = function () {
        return $(_options.EL_SEARCH).find(_options.EL_SEARCH_TEXT).val()
    }

    _private.regEventHandlers = function () {
        //console.log('registering nics search module events', _options.EL_SEARCH)
 
        // on submit event
        $(_options.EL_SEARCH).on('submit', function (e) {
			
			if(_options.activeRequest) {
                _options.activeRequest.abort()
                delete _options.activeRequest
            }
			
            if (_private.getSearchText().length > 0 && _options.ON_SUBMIT_PATH.length > 0) {
                // do the default process

            } else {
                _private.resetInitialState()
                e.preventDefault();
            }
        })

        // on reset
        $(_options.EL_SEARCH).on('reset', function(e) {
            _private.resetInitialState()
        })


        // on search text typing event
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_TEXT).on('keyup', function (e) {
            const that = this
            if(e.keyCode == 13) {
                _private.resetInitialState()
            } else {
             _fnDelay(function () {
                    const txt = $(that).val()
                    if (txt.length > 0) {
                        _private.queryQuickSearch(txt)
                    } else {
                        _private.resetInitialState()
                    }
                })


               }

        })

        // on search button or loadmore pressed
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_BUTTON).on('click', function () {
           $(_options.EL_SEARCH).submit()
        })
        $(_options.EL_SEARCH).find(_options.EL_SEARCH_LOADMORE).on('click', function () {
            $(_options.EL_SEARCH).submit()
        })



        if(_options.IS_LISTEN_FOR_NAV_BTN) {
            // on nav menu button click, refresh Nav Css
            $(_options.EL_NAV_BTN).on('click', function () {
                _private.refreshNavCss();
            })
        }
		
		$(_options.EL_SEARCH).find(_options.EL_SEARCH_TEXT).focus(function(){ $(this).attr("aria-expanded", true)});
		$(_options.EL_SEARCH).find(_options.EL_SEARCH_TEXT).blur(function(){ 
			const that = this;
			setTimeout(function(){
				$(that).attr("aria-expanded", false)	
			}, 200);
		});		
    }

    init = function (_opt) {
        _options = $.extend(_options, _opt)
        _private.resetInitialState();

        _private.regEventHandlers();

        if(_options.IS_LISTEN_FOR_NAV_BTN && window.outerWidth <= 1023) {
            _private.refreshNavCss();
        }

		if(_options.ON_SUBMIT_PATH.length > 0) {
			$(_options.EL_SEARCH).attr("action", _options.ON_SUBMIT_PATH);
		}
    }

    return {
        init: init
    }
}


$(function () {
    //global search module
    const searchInstance = new SM()
    searchInstance.init()

    const isSearchDetailPage = $(".nics-search-page-container").length > 0;
    if(isSearchDetailPage) {
        const searchDetailOption = {
        "EL_SEARCH": ".nics-search-page-container",
        "EL_SEARCH_TEXT": ".search-text",
        "EL_SEARCH_BUTTON": ".submit-button",
        "EL_SEARCH_CONTAINER": ".searchResults",
        "EL_SEARCH_RESULT_LIST": ".result-list",
        "EL_SEARCH_LOADMORE": ".result-list-loadmore",
        "EL_SEARCH_LOADING": "#nkn-search-page-search .nics-search-loading",
        "EL_NAV_BTN": ".navmenu, .btn-open-menu",
        "EL_NAV_CONTAINER": ".am-nav, .rich_navigation",
        "SOLR_URL": '/#',
        "IS_LISTEN_FOR_NAV_BTN": false,
        "TPL_SEARCH_RESULT_LIST": $.templates("#templateSearchDetailPageBoxResultListItem"),
        "EL_SEARCH_RESET": ".clear-search",
        "ON_SUBMIT_PATH": "",
        }
        const searchDetailPageInstance = new SM()
        searchDetailPageInstance.init(searchDetailOption)

    }
})

</script>

</body>
</html>
