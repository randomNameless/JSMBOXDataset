<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chunk-394.548ddf6522c1d85d8a24.html</title>
</head>
<body>

<script>
(self.webpackChunk_bmw_bmw_web=self.webpackChunk_bmw_bmw_web||[]).push([[6825,2827],{5063:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var o=n(5924),i=n(296),r=n.n(i),a=n(7699);const c=[],s=`${a.separator}${a.separator}`;class l{constructor(t){this.element=t,this.tron=new o.ZP,this.init()}static addEmptyTrackingCounters(t){const e=[...t.querySelectorAll(`${a.selectors.block}${a.selectors.skipCount}`)],n=[...t.querySelectorAll(`${a.selectors.component}${a.selectors.skipCount}`)],o=[...t.querySelectorAll(`${a.selectors.linkId}${a.selectors.skipCount}`)];l.addCountersToDescendants(l.groupDescendants(e,a.selectors.containerBlock),a.dataAttributes.regionId,l.addBlockCounterToRegionId,a.emptyCount),l.addCountersToDescendants(l.groupDescendants(n,a.selectors.component),a.dataAttributes.regionId,l.addComponentCounterToRegionId,a.emptyCount),l.addCountersToDescendants(l.groupDescendants(o,a.selectors.regionId),a.dataAttributes.linkId,l.addLinkCounterToLinkId,a.emptyCount)}static groupDescendants(t,e){const n=new Map,o=[];return t.forEach((t=>{const i=t.parentNode.closest(e);if(i){const e=n.get(i);e?e.push(t):n.set(i,[t])}else o.push(t)})),[o,...Array.from(n.values())]}static addCountersToDescendants(t,e,n,o){t.forEach((t=>{t.forEach(((t,i)=>{const r=t.getAttribute(e);if(r&&r.includes(a.separator)){const a=n(r,o||i+1);t.setAttribute(e,a)}}))}))}static passBlockInformationToDescendants(t){const e=[...t.querySelectorAll(a.selectors.regionId)].filter((e=>e.closest(a.selectors.containerBlock)===t)),n=t.getAttribute(a.dataAttributes.regionId);n&&e.forEach((t=>{const e=t.getAttribute(a.dataAttributes.regionId),o=l.extractComponentTrackingPart(e);if(o!==s){const e=l.extractBlockTrackingPart(n);t.setAttribute(a.dataAttributes.regionId,`${e}¦${o}`)}}))}static addBlockCounterToRegionId(t,e){const n=(0,a.extractGroupsFromRegionId)(t);return(0,a.generateRegionId)({...n,blockCounter:e})}static addComponentCounterToRegionId(t,e){const n=(0,a.extractGroupsFromRegionId)(t);return(0,a.generateRegionId)({...n,componentCounter:e})}static addLinkCounterToLinkId(t,e){const n=(0,a.extractGroupsFromLinkId)(t);return(0,a.generateLinkId)({...n,counter:e})}static addInteractionTypeToElement(t,e,n){const o=t.getAttribute(a.dataAttributes.linkId),i=n?"link":"button";if(o&&o.includes(a.separator)){const n=(0,a.extractGroupsFromLinkId)(o),r=n.interaction;let c;a.allowedInteractions[i].includes(e)?c=e:a.allowedInteractions[i].includes(r)||(c=a.defaultInteractions[i]),c&&c!==r&&t.setAttribute(a.dataAttributes.linkId,(0,a.generateLinkId)({...n,interaction:c}))}}static checkForTronLink(t){const e=t.getAttribute("href");if(e){let n=a.defaultInteractions.link;(0,a.isDownloadLink)(e)||t.hasAttribute("download")?n=a.interactions.download:(0,a.isExternalLink)(e)?n=a.interactions.external:e.startsWith("#")&&(n=a.interactions.open),n!==a.interactions.internal&&c.push(t),l.addInteractionTypeToElement(t,n,!0)}}static extractBlockTrackingPart(t){const e=(0,a.extractGroupsFromRegionId)(t);if(!e)return s;const{block:n,blockCounter:o,blockName:i}=e;return[n,o,i].join(a.separator)}static extractComponentTrackingPart(t){const e=(0,a.extractGroupsFromRegionId)(t);if(!e)return s;const{component:n,componentCounter:o,componentName:i}=e;return[n,o,i].join(a.separator)}static setDebug(){-1!==window.location.search.indexOf("activitydebug")&&this.highlightTrackingIssues()}static highlightTrackingIssues(){const t=document.querySelectorAll(a.selectors.regionId),e=document.querySelectorAll(a.selectors.linkId),n=document.querySelectorAll(a.selectors.activeClickablesWithoutLinkid),{body:o}=document;if(!o.classList.contains(a.selectors.debug)){const t=document.createElement("style");o.appendChild(t),o.classList.add(a.selectors.debug),t.type="text/css",t.appendChild(document.createTextNode(`\n            ${a.selectors.regionId}:not(${a.selectors.containerBlock}) {\n                border: 1px dashed rgba(100,100,100,.8);\n            }\n            ${a.selectors.regionId}:not(${a.selectors.containerBlockClone}):before {\n                all: unset;\n                content: attr(${a.dataAttributes.regionId}) !important;\n                display: block;\n                background: rgba(100,100,100,.8);\n                color: white;\n                font-size: .75rem;\n                line-height: 1rem;\n                font-weight: 400;\n                padding: .5rem .25rem;\n                margin-bottom: .5rem;\n                max-width: 100%;\n                max-height: 2rem;\n                word-break: break-word;\n                hyphens: auto;\n                overflow: auto;\n                text-align: start;\n            }\n\n            ${a.selectors.regionId}[${a.dataAttributes.elementDisplay}="grid"]:before {\n                position: initial;\n                height: auto;\n                grid-column: 1/-1;\n                margin: 0;\n            }\n\n            ${a.selectors.regionId}[${a.dataAttributes.elementDisplay}="flex-column"]:before {\n                margin: 0;\n            }\n\n            ${a.selectors.regionId}[${a.dataAttributes.elementDisplay}="flex-row"] {\n                border-top: 2rem solid rgba(0,0,0,0);\n                position: relative;\n            }\n\n            ${a.selectors.regionId}[${a.dataAttributes.elementDisplay}="flex-row"]:before {\n                position: absolute;\n                top: -2rem;\n                left: 0;\n                right: 0;\n                height: auto;\n            }\n\n            ${a.selectors.containerBlock}${a.selectors.regionId}:before {\n                content: 'Block: ' attr(${a.dataAttributes.regionId}) !important;\n                background: rgba(0,0,0,.8);\n                margin: 0;\n            }\n\n            ${a.selectors.containerBlock} {\n                border: 1px dashed rgba(0,0,0,.8);\n            }\n\n            ${a.selectors.invalidTrackingId} {\n                color: red !important;\n            }\n\n            ${a.selectors.invalidTrackingId}:before {\n                border: 2px solid red !important;\n            }\n\n            ${a.selectors.activeClickablesWithoutLinkid},\n            ${a.selectors.linkIdInactive} {\n                border: 1px solid currentColor !important;\n            }\n\n            ${a.selectors.linkIdInactive} {\n                opacity: .25 !important;\n            }\n        `))}t.forEach((t=>{const e=window.getComputedStyle(t),n=e.getPropertyValue("display"),o="flex"===n?e.getPropertyValue("flex-direction"):"";t.setAttribute(a.dataAttributes.elementDisplay,o?`flex-${o}`:n),this.validateTrackingElement(t)})),e.forEach((t=>{t.title=t.getAttribute(a.dataAttributes.linkId),t.querySelectorAll("[title]").forEach((t=>t.removeAttribute("title"))),this.validateTrackingElement(t),"true"===t.getAttribute(a.dataAttributes.enhanced)&&(t.title=`ENHANCED: ${t.title}`)})),n.forEach((t=>{t.title=`Invalid clickable element. No attribute ${a.dataAttributes.linkId}.`,this.highlightInvalidTrackingElement(t)}))}static validateTrackingElement(t){const e=t.getAttribute(a.dataAttributes.regionId),n=t.getAttribute(a.dataAttributes.linkId),o=e||n,i=e?"regionId":"linkId",r=e?5:3,c=this.getNumberOfSeparators(o),s=(new TextEncoder).encode(o).length;s>100?t.title=`Invalid ${i}. Maximum length: 100 bytes/characters. Current length: ${s}.\n${o}`:"linkId"===i&&a.clickableTags.every((e=>e!==t.tagName))?t.title=`Invalid element "${t.tagName}". A linkId may only be set on ${new Intl.ListFormat("en-gb",{type:"disjunction"}).format(a.clickableTags)} elements.`:c!==r?t.title=`Invalid ${i}. Current separators: ${c}. Expected: ${r}.\n${o}`:"A"!==t.tagName||t.href||(t.title="Invalid link. No href."),this.highlightInvalidTrackingElement(t)}static highlightInvalidTrackingElement(t){t.title.startsWith("Invalid")&&(t.setAttribute(a.dataAttributes.invalidTrackingId,!0),window.console.log(`%c${t.title}`,"color: orange",t))}static getNumberOfSeparators(t){return(t.match(RegExp(a.separator,"g"))||[]).length}init(){this.initActivityMapTracking(),window.addEventListener("resize",r()((()=>l.setDebug())),1e3)}initActivityMapTracking(){this.updateActivityMapTracking(),document.addEventListener("XfToggle:reloadFinished",(()=>this.updateActivityMapTracking())),this.element.addEventListener("page-tracking--component-update",(({detail:t})=>{this.updateActivityMapTracking(t&&t.element?t.element:this.element)})),this.element.addEventListener("tron-tracking--event-button-change",(({detail:t})=>{this.addEventListenerForTronClick([t.element])}))}addEventListenerForTronClick(t=[]){t.forEach((t=>{t.hasAttribute(a.dataAttributes.enhanced)||(t.setAttribute(a.dataAttributes.enhanced,!0),t.addEventListener("click",(()=>{t.hasAttribute(a.dataAttributes.linkId)&&this.tron.activityMapClick()}))),t.hasAttribute("href")||l.addInteractionTypeToElement(t,"default",!1)}))}updateActivityMapTracking(t=this.element){this.blocks=[t,...t.querySelectorAll(`${a.selectors.containerBlock}${a.selectors.notSkipCount}`)],this.components=[...t.querySelectorAll(`${a.selectors.component}${a.selectors.notSkipCount}`)],this.clickables=[...t.querySelectorAll(`${a.selectors.linkId}${a.selectors.notSkipCount}`)],this.links=[...t.querySelectorAll(`${a.selectors.link}:not(${a.selectors.popover})`)],this.enhancedButtons=[...t.querySelectorAll(`${a.selectors.button}, ${a.selectors.popover}`)],this.addTrackingCounters(),l.addEmptyTrackingCounters(t),this.blocks.forEach((t=>{l.passBlockInformationToDescendants(t)})),this.links.forEach((t=>{l.checkForTronLink(t)})),this.addEventListenerForTronClick([...this.enhancedButtons,...c]),l.setDebug()}addTrackingCounters(){l.addCountersToDescendants(l.groupDescendants(this.blocks,a.selectors.containerBlock),a.dataAttributes.regionId,l.addBlockCounterToRegionId),l.addCountersToDescendants(l.groupDescendants(this.components,a.selectors.containerBlock),a.dataAttributes.regionId,l.addComponentCounterToRegionId),l.addCountersToDescendants(l.groupDescendants(this.clickables,a.selectors.regionId),a.dataAttributes.linkId,l.addLinkCounterToLinkId)}}const d=l},7699:(t,e,n)=>{"use strict";n.r(e),n.d(e,{addEventListenerToButtons:()=>k,allowedInteractions:()=>a,allowedLinks:()=>d,clickableTags:()=>u,componentUpdate:()=>T,dataAttributes:()=>o,defaultInteractions:()=>c,emptyCount:()=>l,extractGroupsFromLinkId:()=>$,extractGroupsFromRegionId:()=>A,generateLinkId:()=>f,generateRegionId:()=>I,interactions:()=>r,isDownloadLink:()=>b,isExternalLink:()=>m,isInternalLink:()=>p,selectors:()=>i,separator:()=>s,setLinkId:()=>v,setRegionId:()=>C,toggleDataAttribute:()=>g});const o={linkId:"data-tracking-linkid",linkIdInactive:"data-tracking-linkid-inactive",regionId:"data-tracking-regionid",trackingBlock:"data-tracking-block",elementDisplay:"data-tracking-element-display",skipCount:"data-tracking-skip-count",enhanced:"data-tracking-enhanced",invalidTrackingId:"data-invalid-tracking-id"},i={regionId:`[${o.regionId}]`,linkId:`[${o.linkId}]`,linkIdInactive:`[${o.linkIdInactive}]`,containerBlock:`[${o.trackingBlock}="true"]`,containerBlockClone:`[${o.trackingBlock}="clone"]`,component:`[${o.regionId}]:not([${o.trackingBlock}])`,link:`a[href][${o.linkId}]`,button:`button[${o.linkId}]`,popover:`a.cmp-popover__trigger[${o.linkId}]`,activeClickablesWithoutLinkid:`a:not([${o.linkId}]), button:not([${o.linkId}]):not([${o.linkIdInactive}])`,invalidTrackingId:`[${o.invalidTrackingId}]`,skipCount:`[${o.skipCount}]`,notSkipCount:`:not([${o.skipCount}])`,debug:"activitydebug"},r={internal:"internal click",external:"external click",open:"open content",close:"close content",download:"download"},a={link:[r.internal,r.external,r.open,r.download],button:[r.open,r.close,r.download]},c={link:r.internal,button:r.open},s="¦",l="—",d={internal:["approvedusedminis.","bmw-int","bmw-motorrad.","bmw.","bmwgroup.","bmwmotorcycles.","bmwmotorrad.","bmwusa.","mini-int","mini.","minichina."],download:["pdf","ppt","xls","doc","zip","rar"]},u=["A","BUTTON"];function k(t,e){t.forEach((t=>{t.addEventListener("click",(()=>{e(t)}))}))}function g(t,e,n=!1){const i=[o.linkIdInactive,o.linkId],r=t.getAttribute(i[Number(e)]);setTimeout((()=>{r&&(t.removeAttribute(i[Number(e)]),t.setAttribute(i[Number(!e)],r))}),n?100:0)}function p(t){return h(t,"internal")}function m(t){return!h(t,"internal")}function b(t){return h(t,"download")}function h(t,e){const n={internal:"hostname",download:"pathname"};if(t){const o=/^[#|/]/.exec(t);try{const i=o?t:new URL(t)[n[e]],r=d[e].some((t=>i.startsWith(t)||i.includes(`.${t}`)));return{internal:window.location.hostname===i||!!o||r,download:!t.startsWith("#")&&r}[e]}catch(t){return null}}return null}function I({block:t="",blockCounter:e="",blockName:n="",component:o="",componentCounter:i="",componentName:r=""}={}){return w([t,e,n,o,i,r])}function f({type:t="",counter:e="",value:n="",interaction:o=""}={}){return w([t,e,n,o])}function A(t){const e=RegExp(`(?<block>.*)${s}(?<blockCounter>.*)${s}(?<blockName>.*)${s}(?<component>.*)${s}(?<componentCounter>.*)${s}(?<componentName>.*)`,"mg").exec(t);return e?e.groups:{}}function $(t){const e=RegExp(`(?<type>.*)${s}(?<counter>.*)${s}(?<value>.*)${s}(?<interaction>.*)`,"mg").exec(t);return e?e.groups:{}}function v(t,{type:e,counter:n,value:i,interaction:r}={},a){if(t){const c=y($(t.hasAttribute(o.linkId)?t.getAttribute(o.linkId):""),{type:e,counter:n,value:i,interaction:r});t.setAttribute(o.linkId,f(c)),T(a)}}function C(t,{block:e,blockCounter:n,blockName:i,component:r,componentCounter:a,componentName:c}={},s){if(t){const l=y(A(t.hasAttribute(o.regionId)?t.getAttribute(o.regionId):""),{block:e,blockCounter:n,blockName:i,component:r,componentCounter:a,componentName:c});t.setAttribute(o.regionId,I(l)),T(s)}}function T(t){t&&document.body.dispatchEvent(new CustomEvent("page-tracking--component-update"),{detail:"boolean"==typeof t?{}:{element:t}})}function y(t,e){return Object.keys(e).forEach((n=>{void 0!==e[n]&&(t[n]=e[n])})),t}function w(t=[]){return t.map((t=>t?.toString().replace(/\s+/g," ").trim().toLowerCase())).join(s)}},296:t=>{function e(t,e,n){var o,i,r,a,c;function s(){var l=Date.now()-a;l<e&&l>=0?o=setTimeout(s,e-l):(o=null,n||(c=t.apply(r,i),r=i=null))}null==e&&(e=100);var l=function(){r=this,i=arguments,a=Date.now();var l=n&&!o;return o||(o=setTimeout(s,e)),l&&(c=t.apply(r,i),r=i=null),c};return l.clear=function(){o&&(clearTimeout(o),o=null)},l.flush=function(){o&&(c=t.apply(r,i),r=i=null,clearTimeout(o),o=null)},l}e.debounce=e,t.exports=e}}]);
</script>

</body>
</html>
