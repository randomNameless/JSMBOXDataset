<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ppndr.200.html</title>
</head>
<body>

<script>
var isMobile = {
	Android: function () { return navigator.userAgent.match(/Android/i); },
	BlackBerry: function () { return navigator.userAgent.match(/BlackBerry/i); },
	iOS: function () { return navigator.userAgent.match(/iPhone|iPad|iPod/i); },
	Opera: function () { return navigator.userAgent.match(/Opera Mini/i); },
	Windows: function () { return navigator.userAgent.match(/IEMobile/i); },
	any: function () { return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows()); }
};

var isDesktop = function () { return !isMobile.any(); };
var isGoogle = function () { return document.referrer.search("google") !== -1; };
var isDirect = function () { return (typeof subid !== "undefined" && subid === "zilla.2") && (document.referrer === "" || document.referrer.search("xozilla.com") > 0) };
var isFromTabunder = function() { return document.location.search.search("asgtbndr") >= 0; }
const urlDomain = function(url) {
	if (url.search('http') !== 0) { // if it is not absolute URL - no domain then
		return null;
	}
	const tmp = document.createElement('a');
	tmp.href = url;
	return tmp.hostname.replace(/^www\./, '');
}
var isSecondPage = function() {
	return !isFromTabunder() && urlDomain(document.referrer) === 'xozilla.com';
}
const debugInfo = function() {
	console.group('DEBUG');
	console.log('referer: ', document.referrer);
	console.log('isDesktop: ', isDesktop());
	console.log('isGoogle: ', isGoogle());
	console.log('isDirect: ', isDirect());
	console.log('SUB ID: ', subid);
	console.log('isFromTabUnder: ', isFromTabunder());
	console.groupEnd();
}

var loadScript = function (src, attrs) {
	var script = document.createElement('script');
	script.src = src;
	for (var i in attrs) {
		script.setAttribute(i, attrs[i]);
	}
	document.body.appendChild(script);
};

const createElement = function(element, attrs) {
	const el = document.createElement(element);
	for (let i in attrs) {
		el.setAttribute(i, attrs[i]);
	}
	return el;
}

var adDomain = function(subid) {
	var domains = {
		"zilla.2": "adzilla.name"
	};

	return domains[subid] ? domains[subid] : domains["zilla.2"];
}

var asgCompliantSubId = function (subid) {
	var id = parseInt(subid.split(".")[1]);
	return 1000000 + id; // exoclick requires numeric subid > 1kk
};

// ASG settings
window._asg_embed_callbacks = {
	afterOpen: function (url, params, popwin) {
		window.sessionStorage.asg_opened = 1;
	}
};

var data = {
	ntv1: {
		spots: {
			"zilla.2": 25878
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: 300,
			height: 250,
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	ntv2: {
		spots: {
			"zilla.2": 25879
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: 300,
			height: 250,
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	ntv3: {
		spots: {
			"zilla.2": 213757
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: 300,
			height: 250,
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	footer1: {
		spots: {
			"zilla.2": 25880,
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: 300,
			height: 250,
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	footer2: {
		spots: {
			"zilla.2": 25881,
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: 300,
			height: 250,
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	footer3: {
		spots: {
			"zilla.2": 25882,
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: 300,
			height: 250,
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	footer4: {
		spots: {
			"zilla.2": 25883,
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: 300,
			height: 250,
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	native: {
		spots: {
			"zilla.2": 234357
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: "100%",
			height: "100%",
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	invideo: {
		spots: {},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: "300",
			height: "280",
			style: "display: block; margin: 0 auto;"
		}
	},
	mobile_aboveplayer: {
		spots: {
			"zilla.2": 25889
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: 300,
			height: 100,
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	mobile_underplayer1: {
		spots: {
			"zilla.2": 234360
		},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: 300,
			height: 250,
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	mobile_underplayer2: {
		spots: {},
		attrs: {
			class: "na",
			frameborder: "0",
			scrolling: "no",
			width: "100%",
			height: "100%",
			sandbox: "allow-scripts allow-popups allow-forms allow-same-origin"
		}
	},
	mobile_footer: {}
};

var adSlider = function (subid) {
	const domain = adDomain(subid);

	if (subid === "zilla.236" && isMobile.any()) {
		return;
	}
	if (subid === "zilla.289" && isMobile.any()) {
		return;
	}

	if (isDirect() || isGoogle()) {
		window.asgvastcnf = {
			spotUrl: `//${domain}/api/spots/173772`,
			height: {
				mobile: 170,
				desktop: '25%'
			},
			width: {
				mobile: 300,
				desktop: '22%'
			}
		}
	} else {
		window.asgvastcnf = {
			spotUrl: `//${domain}/api/spots/173722`,
			height: {
				mobile: 170,
				desktop: '25%'
			},
			width: {
				mobile: 300,
				desktop: '22%'
			}
		}
	}
	loadScript(`//${domain}/vast-im.js`, {"data-subid1": asgCompliantSubId(subid)});
}


var inpagePush = function (subid) {
	let domain = adDomain(subid);

	if (isDirect()) {
		loadScript(`//${domain}/RXbyZg2.js`, {
			"data-spot": "420642",
			"data-subid1": asgCompliantSubId(subid)
		});
		return;
	}

	if (isSecondPage() && ["zilla.3", "zilla.745"].indexOf(subid) >= 0) {
		loadScript(`//${domain}/0GbtUg8.js`, {
			"data-spot": "358906",
			"data-subid1": asgCompliantSubId(subid)
		});
		return;
	}

	if (subid === "zilla.3") {
		return;
	}

	loadScript(`//${domain}/0GbtUg8.js`, {
		"data-spot": "420642",
		"data-subid1": asgCompliantSubId(subid)
	});
};


const push = function (subid) {
	const insertPush = function() {
		const s = document.createElement('script');
		s.src = "/sw.js";
		s.async=true;
		s.defer = true;
		s.dataset["cfasync"]=false
		document.head.appendChild(s);
	}

	if (isSecondPage() && ["zilla.3", "zilla.158", "zilla.236"].indexOf(subid) >= 0) {
		insertPush();
		return;
	}

	if (["zilla.158", "zilla.236", "zilla.3", "zilla.29"].indexOf(subid) >= 0 || isGoogle() || isDirect()) {
		return;
	}

	insertPush();
}

var preroll = function (subid) {
	let domain = adDomain(subid);

	loadScript(`//${domain}/v9YKYQb.js`, {
		"data-spots": "301212",
		"data-tag": "asg",
		"data-subid1": asgCompliantSubId(subid)
	});
}

var popndr = function (subid) {
	let domain = adDomain(subid);

	var popunderNew = function (spot_id) {
		loadScript(`//${domain}/UpLfWw9.js`, {
			"data-spots": spot_id,
			"data-tag": "asg",
			"data-subid1": asgCompliantSubId(subid)
		});
	};

	if (subid === "zilla.3") {
		popunderNew(186203);
	} else if (subid === "zilla.158" || subid === "zilla.236") {
		popunderNew(303849);
	} else if (isDirect() || isGoogle()) {
		popunderNew(303849);
	} else {
		popunderNew(25885);
	}
}

var banner = function (spot_name) {
	let asgSubid = asgCompliantSubId(subid);
	let domain = adDomain(subid);

	let asgIframe = function (spot_id, attrs = {}) {
		var el = document.createElement('iframe');
		el.src = `//${domain}/api/spots/` + spot_id + "?p=1&s1=" + asgSubid;
		for (var i in attrs) {
			el.setAttribute(i, attrs[i]);
		}
		document.write(el.outerHTML);
	};

	if (data[spot_name]) {
		if (data[spot_name]['spots'][subid]) {
			asgIframe(data[spot_name]['spots'][subid], data[spot_name].attrs);
		} else {
			asgIframe(data[spot_name]['spots']["zilla.2"], data[spot_name].attrs);
		}
	}
};

var interstitial = function (subid) {};

var subid = Cookies.get('zilla_subid') || "zilla.2";

adSlider(subid);
inpagePush(subid);
push(subid);
preroll(subid);
popndr(subid);
interstitial(subid);

</script>

</body>
</html>
