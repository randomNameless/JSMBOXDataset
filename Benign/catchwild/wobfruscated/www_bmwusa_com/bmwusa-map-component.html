<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>bmwusa-map-component.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEG/4CAgAAWfwBBAQt/AEESC38AQRYLfwBBHAt/AEEgC38AQTYLfwBByAALfwBB2gALfwBB4AALfwBB6gALfwBB+AALfwBBhAELfwBBjgELfwBBlAELfwBBmAELfwBBngELfwBBrAELfwBBtgELfwBBvAELfwBBxgELfwBBzAELfwBB5AELB8aBgIAAFwZtZW1vcnkCAAVkYXRhMAMABWRhdGExAwEFZGF0YTIDAgVkYXRhMwMDBWRhdGE0AwQFZGF0YTUDBQVkYXRhNgMGBWRhdGE3AwcFZGF0YTgDCAVkYXRhOQMJBmRhdGExMAMKBmRhdGExMQMLBmRhdGExMgMMBmRhdGExMwMNBmRhdGExNAMOBmRhdGExNQMPBmRhdGExNgMQBmRhdGExNwMRBmRhdGExOAMSBmRhdGExOQMTBmRhdGEyMAMUBmRhdGEyMQMVC8eCgIAAFgBBAQsPLm1hcC1jb21wb25lbnQAAEESCwNzbQAAQRYLBG1heAAAQRwLA3NtAABBIAsULm1hcC1jb21wb25lbnRfX21hcAAAQTYLEGRlYWxlci1lbWJlZGRlZAAAQcgACxEuZGVhbGVyLWVtYmVkZGVkAABB2gALBWxvYWQAAEHgAAsJbWFwLmRvbmUAAEHqAAsNbGF0TG9uU2VhcmNoAABB+AALCnNlYXJjaFppcAAAQYQBCwhwcmltYXJ5AABBjgELBS5wbmcAAEGUAQsDc20AAEGYAQsEaW1nAABBngELDWRldGFpbC1pbWFnZQAAQawBCwhwcmltYXJ5AABBtgELBS5wbmcAAEG8AQsIcHJpbWFyeQAAQcYBCwUucG5nAABBzAELFmRlYWxlcm1hcC5saXN0LXVwZGF0ZQAAQeQBCwRtYXAA'].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
import { C as d } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/component.js';
import { i as h } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/is-author.js';
import {
    B as p,
    G as m,
    b as l
} from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.js';
import { b as c } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/baseDomain.js';
import { $ as u } from '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-measurement-data.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.esm.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/getbyourl.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/scroll-to.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/uid.js';
import '/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/zipcode.js';
const {element: M} = l(lS(0, 0)), r = c(), s = {
        center: `${ r }/content/dam/bmw/common/map-component/pin-center-point.png`,
        default: `${ r }/content/dam/bmw/common/map-component/Pin_default_`,
        defaultHover: `${ r }/content/dam/bmw/common/map-component/Pin_hover_`,
        detail: `${ r }/content/dam/bmw/common/map-component/Pin_no_number.png`,
        primary: `${ r }/content/dam/bmw/common/map-component/Pin_starred.png`
    };
var o;
new d({
    el: '.map-component',
    name: 'Map Component',
    subscriptions: {
        'dealermap.render': 'render',
        'dealermap.component-embedded': 'processEmbeddedMaps',
        'dealermap.map-reset': 'reset',
        'dealermap.map-selected': 'selected',
        'dealermap.map-update': 'update',
        'dealermap.no-results': 'noResultsView',
        'dealermap.search-view': 'reset',
        'mapcomponent.map-update-detail': 'updateDetail',
        'mapcomponent.marker-hover': 'updateMarker',
        'window.resizeEnd': 'resizeEvt'
    },
    currentData: null,
    maxSize: p.getValue(lS(0, 1), lS(0, 2)),
    isPhone: ((o = p.current()) == null ? void 0 : o.breakpoint) === lS(0, 3),
    beforeInit() {
        this.GMap = null;
    },
    init() {
        this.detailImage = null, this.imageHolder = this.element.parentElement, this.generateMap = this.generateMap.bind(this), this.initializeMap = this.initializeMap.bind(this), this.noResultsView = this.noResultsView.bind(this), this.reset = this.reset.bind(this), this.selected = this.selected.bind(this), this.update = this.update.bind(this), this.updateMarker = this.updateMarker.bind(this), this.isEmbedded = u.qs(lS(0, 4), this.element).classList.contains(lS(0, 5));
    },
    generateMap(a) {
        this.GMap = new m(a, {
            zoom: 4,
            center: {
                lat: 38.550456,
                lng: -97.9889077
            },
            fullscreenControl: !1,
            mapTypeControl: !1,
            streetViewControl: !1
        }, this.initializeMap), this.GMap.init();
    },
    reset(a, e) {
        this.GMap && (!(e != null && e != !0) && this.GMap.reset(), this.detailImage && (this.imageHolder.removeChild(this.detailImage), this.detailImage = null));
    },
    processEmbeddedMaps() {
        this.embeddedMapExists = !0, this.generateMap(lS(0, 6)), this.isEmbedded || this.element.parentNode.removeChild(this.element);
    },
    initializeMap() {
        window.google && (this.isEmbedded ? google.maps.event.addDomListener(window, lS(0, 7), this.GMap.render) : this.GMap.render(), PubSub.publish(lS(0, 8)));
    },
    resizeEvt(a, e) {
        this.GMap && (this.isPhone && e.width > this.maxSize ? this.isPhone = !1 : !this.isPhone && e.width <= this.maxSize && (this.isPhone = !0), window != null && window.google && this.GMap.setMobileDisplay(this.isPhone));
    },
    update(a, e) {
        (() => {
            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            this.currentData = e, this.detailImage && (this.imageHolder.removeChild(this.detailImage), this.detailImage = null), this.GMap.isDetail = !1, this.GMap.clearMarkers(), e.center && (e.currentSearch != lS(0, 9) || e.currentSearch != lS(0, 10)) && this.GMap.addCenterMarker(e.center);
                            const n = e.points.map(i => (i.index && !isNaN(i.index) || i.index == 0 ? i.url = i.type == lS(0, 11) ? s[i.type] : s[i.type] + (i.index + 1) + lS(0, 12) : i.url = s.detail, i.icons = s, i));
                            (() => {
                                const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.GMap.setMarkers(n);
                                        }
                                    }
                                });
                                const __exports = __callInstance3.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance0.exports;
            return __exports.data(this.GMap ? 1 : 0);
        })();
    },
    updateDetail(a, e) {
        var n;
        (() => {
            const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        (() => {
                            const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            const i = document.createElement(lS(0, 14));
                                            i.src = this.currentData.points[0].img, i.classList.add(lS(0, 15)), this.imageHolder.appendChild(i), this.detailImage = i;
                                        }
                                    },
                                    impFunc2: () => {
                                        {
                                            this.detailImage && this.imageHolder.removeChild(this.detailImage);
                                            const i = e.points.map(t => (t.index && !isNaN(t.index) || t.index == 0 ? t.url = t.type == lS(0, 16) ? s[t.type] : s[t.type] + (t.index + 1) + lS(0, 17) : t.url = s.detail, t.icons = s, t));
                                            (() => {
                                                const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            this.GMap.setMarkers(i);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance2.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    }
                                }
                            });
                            const __exports = __ifInstance2.exports;
                            return __exports.data((this.currentData = e, this.GMap.isDetail = !0, this.GMap.clearMarkers(), ((n = p.current()) == null ? void 0 : n.breakpoint) === lS(0, 13) && this.imageHolder && this.currentData.points[0].img) ? 1 : 0);
                        })();
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance1.exports;
            return __exports.data(this.GMap ? 1 : 0);
        })();
    },
    noResultsView(a, e) {
        (() => {
            const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                const i = e.points.map(t => (t.index && !isNaN(t.index) || t.index == 0 ? t.url = t.type == lS(0, 18) ? s[t.type] : s[t.type] + (t.index + 1) + lS(0, 19) : t.url = s.detail, t.icons = s, t));
                                                (() => {
                                                    const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.GMap.setMarkers(i, !0);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance1.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance4.exports;
                                return __exports.data((this.GMap.clearMarkers(), e.points.length > 0) ? 1 : 0);
                            })();
                            const n = this.currentData.center ? this.currentData.center : this.GMap.getCenter();
                            this.GMap.centerMap(n, !1), this.GMap.addCenterMarker(n);
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance3.exports;
            return __exports.data(e && this.GMap ? 1 : 0);
        })();
    },
    updateMarker(a, e) {
        this.GMap && this.GMap.setActiveMarker(e);
    },
    selected(a, e) {
        (() => {
            const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        PubSub.publish(lS(0, 20), e.id);
                    }
                }
            });
            const __exports = __callInstance0.exports;
            return __exports.data();
        })();
    },
    render() {
        this.GMap || !h() && !this.isEmbedded && this.generateMap(M(lS(0, 21)));
    }
});</script>
</body>
</html>
