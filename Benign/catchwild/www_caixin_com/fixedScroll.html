<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fixedScroll.html</title>
</head>
<body>

<script>
function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}(function(){var t=function(t,i){this.defaults={navEls:"",hookEls:"",hookOffset:0,offset:0,stickEndEl:"",callback:""},$.extend(this,this.defaults,i),this.flag=!0,this.stickTop=0,this.init_stickTop=0,this.stickBottom=9999999,this.fixedEl=t,this.fixedElH=t.height(),this.fixedElW=t.width(),this.fixedElL=t.offset().left,this.winEl=$(window),this.offset=parseInt(this.offset||0),this.hookArea=[],this.isClickSwitch=!1};t.prototype={init:function(){this.fixedEl.length>0&&(this.stickTop=this.fixedEl.offset().top,this.init_stickTop=this.stickTop),this.stickEndEl.length>0&&(this.stickBottom=this.stickEndEl.offset().top),this.distance=this.stickBottom-this.stickTop-this.fixedElH-this.offset/2,this.calcArea(),this.flag&&this.events(),this.flag=!1},stickHandle:function(){this.winEl.scrollTop()>this.stickTop-this.offset?this.winEl.scrollTop()<this.stickBottom-this.fixedElH-this.offset?(this.fixedEl.css({position:"fixed",top:this.offset,left:this.fixedElL,width:this.fixedElW,height:this.fixedElH,transform:"translateY(0)"}),"function"==typeof this.callback&&this.callback(1)):(this.fixedEl.css({top:"auto",left:"auto",position:"static",transform:"translateY("+this.distance+"px)"}),"function"==typeof this.callback&&this.callback(0)):(this.fixedEl.css({top:"auto",position:"static"}),"function"==typeof this.callback&&this.callback(0))},resizeHeight:function(t){this.fixedEl.length>0&&(this.stickTop=t?this.fixedEl.offset().top:this.init_stickTop),this.stickEndEl.length>0&&(this.stickBottom=this.stickEndEl.offset().top),this.distance=this.stickBottom-this.stickTop-this.fixedElH-this.offset/2,this.calcArea()},calcArea:function(){if(!(this.hookEls.length<=0)){var t=[];this.hookEls.each((function(i,s){var o=$(this).offset().top,e=o+$(this).height();t.push([o,e])})),this.hookArea=t}},hookScroll:function(){var t=this.winEl.scrollTop();for(var i in this.hookArea)t>this.hookArea[i][0]-this.hookOffset&&t<this.hookArea[i][1]?this.navStatus(i):this.navStatus()},navStatus:function(t){t||0==+t?this.navEls.eq(t).addClass("active").siblings().removeClass("active"):this.navEls.eq(t).removeClass("active")},refresh:function(t){var i=this.hookArea[t][0]-this.hookOffset;this.calcArea(),this.scrollTop(i,120)},scrollTop:function(t,i){var s=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,o=parseInt(s),e=0;t=parseInt(t),i/=5;var n=setInterval((function(){e++;var s=(t-o)/i*e+o;document.body.scrollTop=s,document.documentElement.scrollTop=s,e>=i&&clearInterval(n)}),5)},events:function(){var t=this;t.navEls.length>0&&this.navEls.on("click",(function(){var i=$(this).index();t.isClickSwitch=!0,t.refresh(i),t.navStatus(i),setTimeout((function(){t.isClickSwitch=!1}),300)})),this.winEl.on("scroll",(function(){t.fixedEl.length>0&&t.stickHandle(),t.hookEls.length>0&&!t.isClickSwitch&&t.hookScroll()}))}},$.fn.fixedScroll=function(i){var s=new t(this,i);return s.init(),s},"undefined"!=typeof module&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t:"function"==typeof define&&(define.amd||define.cmd)?define((function(){return t})):window.fixedScroll=t}).call((function(){return"undefined"!=typeof window?window:global}),$);
</script>

</body>
</html>
