<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clientlibs.min.ACSHASHc62623bd1b16f8ff2bd1688c2c02f206.html</title>
</head>
<body>

<script>
if (window.qantasqcomcomp === undefined) {window.qantasqcomcomp = [];} window.qantasqcomcomp["aem-qantas-qcom/homepage/components/content/homepage-promotion"] = (window.wpJsonpAEMQcom=window.wpJsonpAEMQcom||[]).push([["HomepagePromotion"],{1390:function(e,t){e.exports={flightOfferCard:"homepagePromotionCard__flightOfferCard___WZPdC",flightOfferHeading:"homepagePromotionCard__flightOfferHeading___1_58g",pricing:"homepagePromotionCard__pricing___1msPA",pricingDescription:"homepagePromotionCard__pricingDescription___3IWyi",pricingCurrencySymbol:"homepagePromotionCard__pricingCurrencySymbol___2ozU4",pricingPrice:"homepagePromotionCard__pricingPrice___3srV-",pricingConditions:"homepagePromotionCard__pricingConditions___2m1q4",showForSr:"homepagePromotionCard__showForSr___R1JMT"}},1392:function(e,t){e.exports={flipclock:"HomepageFlipClock__flipclock___1IaAJ",flipContainer:"HomepageFlipClock__flipContainer___rf4x7",flipclockUnitLabel:"HomepageFlipClock__flipclockUnitLabel___AlBNn",homepageStaticCard:"HomepageFlipClock__homepageStaticCard___3903P"}},1394:function(e,t){e.exports={root:"HomepageSalesTicker__root___3nTPf",salesStripContainer:"HomepageSalesTicker__salesStripContainer___17nsI",actNowRibbon:"HomepageSalesTicker__actNowRibbon___3C9Jp",actNowIcon:"HomepageSalesTicker__actNowIcon___31JSF",actNowRibbonContainer:"HomepageSalesTicker__actNowRibbonContainer___7a-WU"}},1396:function(e,t){e.exports={root:"HomepagePromotionLayout__root___wsuvQ",backgroundWhite:"HomepagePromotionLayout__backgroundWhite___1E6hn",contentWrap:"HomepagePromotionLayout__contentWrap___HMJrt",content:"HomepagePromotionLayout__content___2ctdM",contentInner:"HomepagePromotionLayout__contentInner___3jHin",dropdownContainer:"HomepagePromotionLayout__dropdownContainer___yc2u6",callToAction:"HomepagePromotionLayout__callToAction___1pMTE",disclaimer:"HomepagePromotionLayout__disclaimer___2-kEG",backgroundGrey:"HomepagePromotionLayout__backgroundGrey___eD5DW",backgroundImage:"HomepagePromotionLayout__backgroundImage___1aQKM","content-default":"HomepagePromotionLayout__content-default___1tmyL","content-1price":"HomepagePromotionLayout__content-1price___1ejGU","content-2price":"HomepagePromotionLayout__content-2price___1jWE8","content-3price":"HomepagePromotionLayout__content-3price___MwPsW","content-hidden":"HomepagePromotionLayout__content-hidden___fpWwq",heading:"HomepagePromotionLayout__heading___14f09",description:"HomepagePromotionLayout__description___3Obdc",logoContainer:"HomepagePromotionLayout__logoContainer___JJ0yO",logo:"HomepagePromotionLayout__logo___22017",dropdown:"HomepagePromotionLayout__dropdown___MLLUN",flightOffersContainer:"HomepagePromotionLayout__flightOffersContainer___1EYuR",flightOfferList:"HomepagePromotionLayout__flightOfferList___3kr-c",loadingPlaceholder:"HomepagePromotionLayout__loadingPlaceholder___2u8RS",errorMessage:"HomepagePromotionLayout__errorMessage___77VIo"}},499:function(e,t,a){"use strict";a.r(t);var r=a(236),n=a(0),o=a.n(n),i=a(1),c=a(32),l=a(81),s=a(19),m=a(53),u={labels:Object(m.a)((function(e){return e.ui}),(function(e){return e}))},d=Object(s.b)({name:"ui",initialState:{},reducers:{}}).reducer,p=a(33),_=function(){return _=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},_.apply(this,arguments)},f=function(e){return e.homepagePromotion},g=Object(m.a)(f,(function(e){return e.transformedProps.departures})),b=Object(m.a)(f,(function(e){return e.searchFilter.departure})),h=Object(m.a)(f,(function(e){return e.transformedProps.int_cam})),P=Object(m.a)(f,(function(e){return e.initialProps.override})),v=Object(m.a)(f,(function(e){return e.initialProps.arrivalPortPairs})),y={departureFilterOptions:g,selectedDeparture:b,int_cam:h,saleName:Object(m.a)(f,(function(e){return e.transformedProps.saleName})),branding:Object(m.a)(f,(function(e){return e.transformedProps.branding})),backgroundImage:Object(m.a)(f,(function(e){return e.initialProps.image})),logo:Object(m.a)(f,(function(e){return e.initialProps.logo})),overrides:P,arrivalPortPairs:v,countdownType:Object(m.a)(f,(function(e){return e.initialProps.countdownType})),countdownStartThreshold:Object(m.a)(f,(function(e){return e.initialProps.countdownStartThreshold})),saleEndDateMode:Object(m.a)(f,(function(e){return e.initialProps.saleEndDateMode})),saleEndDate:Object(m.a)(f,(function(e){return e.initialProps.saleEndDate}))},O=Object(s.b)({name:"homepagePromotion",initialState:{searchFilter:{},transformedProps:{},initialProps:{}},reducers:{updateHomeFilter:function(e,t){return e.searchFilter.departure=t.payload,e},updateSelectedDeparture:function(e,t){var a=e.transformedProps.departures.find((function(e){return e.code.toLowerCase()===t.payload.toLowerCase()}));return a&&(e.searchFilter.departure=a),e}}}),E=O.reducer,j=O.actions.updateHomeFilter,w=O.actions.updateSelectedDeparture,N=function(e){return e.config},C=Object(s.b)({name:"config",initialState:{},reducers:{}}).reducer,L=function(e){var t=e.ui,a=e.homepagePromotion,r=e.config;return Object(s.a)({reducer:{ui:d,homepagePromotion:E,config:C},preloadedState:{ui:t,homepagePromotion:a,config:r}})},S=(L({}),a(4)),T=a(110),k=function(){return k=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},k.apply(this,arguments)},H=a(16),D=a(6),F=a.n(D),I=a(1390),M=a.n(I),R=function(e){var t=e.offer,a=e.disclaimer,r=e.fromPrice;return o.a.createElement(S.k,{className:M.a.flightOfferCard,href:t.seeAllFares},o.a.createElement(S.i,{className:M.a.flightOfferHeading,color:"white"},t.route.to.name),o.a.createElement("div",{className:M.a.pricing},o.a.createElement("span",{className:M.a.pricingDescription},t.travelClass.name," ",t.tripType.toLowerCase()," ",null==r?void 0:r.toLowerCase()),o.a.createElement("div",{className:M.a.pricingContainer},o.a.createElement("span",{className:M.a.pricingCurrencySymbol},t.price.currency.symbol),o.a.createElement("span",{className:M.a.pricingPrice},t.price.amountFormatted),o.a.createElement("span",{className:M.a.pricingConditions},"*")),o.a.createElement("span",{className:M.a.showForSr},o.a.createElement(S.n,{html:a}))))},A=a(154),x=a(113),W=a(71),J=a(1392),U=a.n(J),G=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return i},q=function(e){var t=e.endDateTime,a=Object(W.b)(new Date,t),r=G(Object(n.useState)(a.days),2),i=r[0],c=r[1],l=G(Object(n.useState)(a.hours),2),s=l[0],m=l[1],u=G(Object(n.useState)(a.minutes),2),d=u[0],p=u[1],_=G(Object(n.useState)(a.seconds),2),f=_[0],g=_[1],b=Object(n.useRef)(null),h=[{digit:i,label:"D"},{digit:s,label:"H"},{digit:d,label:"M"},{digit:f,label:"S"}];Object(n.useEffect)((function(){return v(),function(){return y()}}),[]);var P=function(){var e=Object(W.b)(new Date,t);e.timeRemaining<=0&&(y(),c(0),m(0),p(0),g(0)),e.days!==i&&c(e.days),e.hours!==s&&m(e.hours),e.minutes!==d&&p(e.minutes),e.seconds!==f&&g(e.seconds)},v=function(){b.current=setInterval(P,1e3)},y=function(){clearInterval(b.current)};return o.a.createElement("span",{className:U.a.flipclock},h.map((function(e,t){return o.a.createElement("div",{className:U.a.flipContainer,key:t},o.a.createElement(x.a,{digit:e.digit,className:U.a.homepageStaticCard}),o.a.createElement("div",{className:U.a.flipclockUnitLabel},e.label))})))},Q=a(1394),K=a.n(Q),V=function(e){var t=e.actNowText,a=e.endDateTime,r=e.countdownType;return o.a.createElement("div",{className:K.a.root,"data-testid":"homepage-sales-ticker",role:"timer"},o.a.createElement("div",{className:K.a.salesStripContainer},t&&a&&o.a.createElement("div",{className:K.a.actNowRibbon},o.a.createElement("span",{className:K.a.actNowRibbonContainer},o.a.createElement(A.a,{className:K.a.actNowIcon}),t)),"countdown"===r&&a&&o.a.createElement(q,{endDateTime:a})))},z=a(1396),B=a.n(z),Y=function(){return Y=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Y.apply(this,arguments)},Z=function(e){var t=e.backgroundColor,a=function(){var e,t=Object(i.c)(y.overrides),a=Object(i.c)(y.arrivalPortPairs),r=Object(i.c)(y.saleName);if(t||a||r){var n=Object(i.c)(y.selectedDeparture),o=Object(i.c)(y.int_cam),c=Object(i.c)(N),l=Object(T.a)({departureCode:n.code,destinations:n.arrivalPortPairs?n.arrivalPortPairs.split(","):[],seeAllFaresLink:c.seeAllFaresLink,includeDisclaimers:!1,saleName:r,int_cam:o}),s=null===(e=l.data)||void 0===e?void 0:e.offers.sort((function(e,t){return e.price.amount-t.price.amount}));return k(k({},l),{data:s})}}(),r=Object(i.c)(u.labels),c=Object(i.c)(N),l=Object(i.c)(y.selectedDeparture),s=Object(i.c)(y.departureFilterOptions),m=Object(i.c)(y.branding),d=Object(i.c)(y.backgroundImage),_=Object(i.c)(y.logo),f=Object(i.c)(y.int_cam),g=Object(i.c)(y.overrides),b=Object(i.c)(y.arrivalPortPairs),h=Object(i.c)(y.saleName),P=Object(i.c)(y.countdownType),v=Object(i.c)(y.countdownStartThreshold),O=Object(i.c)(y.saleEndDateMode),E=Object(i.c)(y.saleEndDate),C=Object(i.b)(),L=c.seeAllFlightDealsLink;f&&(L="".concat(L,"?int_cam=").concat(f)),Object(n.useEffect)((function(){Object(H.a)()&&window.addEventListener("selectListener",(function(e){var t=e.detail.SET_DEPARTURE_AIRPORT;C(w(t))}))}),[]),Object(n.useEffect)((function(){if(Object(H.a)()&&l){var e=new CustomEvent("selectListener",{detail:{SET_DEPARTURE_AIRPORT:l.code}});window.dispatchEvent(e)}}),[l]),Object(n.useEffect)((function(){l&&Object(p.b)(l.code)}),[l]);var D=function(){var e,t;if(!P)return t;if("automated"===O?t=new Date(null===(e=null==a?void 0:a.data[0])||void 0===e?void 0:e.endDate):"manual"===O&&E&&(t=new Date(E)),t){var r=Object(W.b)(new Date,t),n=r.days,o=r.timeRemaining;if(n<v&&o>0)return t}};return d&&0===Object.keys(null==d?void 0:d.customRenditions).length?o.a.createElement("p",null,r.invalidImageMessage):o.a.createElement("div",{className:F()(B.a.root,t&&B.a[t])},d&&o.a.createElement("div",{className:B.a.backgroundImage},o.a.createElement(S.j,Y({},d))),o.a.createElement("div",{className:B.a.contentWrap},o.a.createElement("div",{className:F()(B.a.content,B.a["content-"+m])},o.a.createElement("div",{className:B.a.contentInner},D()&&o.a.createElement(V,{endDateTime:D(),actNowText:r.actNow,countdownType:P}),r.heading&&o.a.createElement(S.i,{type:"h2",className:B.a.heading,href:r.ctaLink},r.heading),function(){var e,t;return g||b||h?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:B.a.dropdownContainer},r.menuLabelText&&o.a.createElement("label",{className:B.a.dropdownLabel},r.menuLabelText),o.a.createElement("div",{className:B.a.dropdownWrapper},o.a.createElement(S.h,{className:B.a.dropdown,controlStyle:"text",itemToString:function(e){return e.name},itemToKey:function(e){return e.code},items:s,onChange:function(e){return C(j(e))},selectedItem:l,defaultSelectedItem:l}))),o.a.createElement("div",{className:B.a.flightOffersContainer},a.isLoading&&o.a.createElement("div",{className:B.a.loadingPlaceholder,"data-testid":"loading"},o.a.createElement(S.m,null)),(a.isError||0===(null===(e=a.data)||void 0===e?void 0:e.length))&&!a.isLoading&&o.a.createElement(S.n,{className:B.a.errorMessage,html:r.errorMessage}),(null===(t=a.data)||void 0===t?void 0:t.length)>0&&o.a.createElement("ul",{className:B.a.flightOfferList},a.data.map((function(e){return o.a.createElement("li",{key:e.route.to.code},o.a.createElement(R,{offer:e,disclaimer:r.disclaimer,fromPrice:r.fromPrice}))}))))):(null==r?void 0:r.description)?o.a.createElement(S.n,{className:B.a.description,color:"white",html:r.description}):null}(),r.ctaText&&o.a.createElement(S.l,{href:r.ctaLink,styleType:S.e.TransparentWhite,className:B.a.callToAction,ariaLabel:r.ctaLabel},r.ctaText))),_&&o.a.createElement("div",{className:B.a.logoContainer},o.a.createElement(S.j,Y({className:B.a.logo},_))),r.disclaimer&&o.a.createElement(S.n,{className:F()("disclaimer-text",B.a.disclaimer),color:"white",html:r.disclaimer})))},X=function(){return X=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},X.apply(this,arguments)},$=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,o=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return i};t.default=Object(c.a)((function(e){var t=e.homepagePromotionModel,a=t.ui,c=t.model,s=t.config,m=e.styleSys,u=$(Object(n.useState)(Object(l.a)()),1)[0],d=function(e){var t=e.departures.map((function(t){return{name:t.cityName,code:t.cityCode,arrivalPortPairs:e.arrivalPortPairs}})),a=t;e.override&&(a=t.map((function(t){var a=e.override.find((function(e){return e.departurePort===t.code}));return _(_({},t),a&&{arrivalPortPairs:a.arrivalPortPairs})})));var r=a.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),n=Object(p.a)(),o=a[0];if(n){var i=a.find((function(e){return e.code.toLowerCase()===n.toLowerCase()}));i&&(o=i)}return{searchFilter:{departure:o},transformedProps:{departures:r,int_cam:e.int_cam,saleName:e.saleName,branding:e.branding,countdownType:e.countdownType,countdownStartThreshold:e.countdownStartThreshold,saleEndDateMode:e.saleEndDateMode,saleEndDate:e.saleEndDate},initialProps:_({},e)}}(c),f=L({ui:a,homepagePromotion:d,config:s}),g=m&&(m["background--white"]||m["background--grey"])?"background".concat(m["background--white"]?"White":"Grey"):void 0;return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{store:f},o.a.createElement(r.a,{client:u},o.a.createElement(Z,X({},g&&{backgroundColor:g})))))}))}},[[499,"qcomruntime","qcomcommons"]]]);
</script>

</body>
</html>
