<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>webapp.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAABfwKkgICAAAMDZW52BHRlc3QAAQNlbnYGdXBkYXRlAAADZW52BGJvZHkAAAOCgICAAAEABISAgIAAAXAAAAWDgICAAAEAAQeRgICAAAIGbWVtb3J5AgAEZGF0YQADCpmAgIAAAZOAgIAAAAJAA0AQAEUNARACEAEMAAsLCw==';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGo4KAgAAxfwBBAQt/AEEKC38AQRILfwBBIAt/AEHQAAt/AEHqAAt/AEH0AAt/AEH+AAt/AEGEAQt/AEGQAQt/AEHCAQt/AEHMAQt/AEHSAQt/AEHYAQt/AEHeAQt/AEHkAQt/AEHqAQt/AEHwAQt/AEH2AQt/AEH8AQt/AEGCAgt/AEGIAgt/AEGOAgt/AEGUAgt/AEGeAgt/AEGsAgt/AEG2Agt/AEG+Agt/AEHKAgt/AEHmAgt/AEGAAwt/AEGaAwt/AEG0Awt/AEHOAwt/AEHaAwt/AEHiAwt/AEH8Awt/AEGWBAt/AEGwBAt/AEHKBAt/AEHmBAt/AEH4BAt/AEGEBQt/AEGOBQt/AEGUBQt/AEGeBQt/AEHEBQt/AEHMBQt/AEGABgsHuYOAgAAyBm1lbW9yeQIABWRhdGEwAwAFZGF0YTEDAQVkYXRhMgMCBWRhdGEzAwMFZGF0YTQDBAVkYXRhNQMFBWRhdGE2AwYFZGF0YTcDBwVkYXRhOAMIBWRhdGE5AwkGZGF0YTEwAwoGZGF0YTExAwsGZGF0YTEyAwwGZGF0YTEzAw0GZGF0YTE0Aw4GZGF0YTE1Aw8GZGF0YTE2AxAGZGF0YTE3AxEGZGF0YTE4AxIGZGF0YTE5AxMGZGF0YTIwAxQGZGF0YTIxAxUGZGF0YTIyAxYGZGF0YTIzAxcGZGF0YTI0AxgGZGF0YTI1AxkGZGF0YTI2AxoGZGF0YTI3AxsGZGF0YTI4AxwGZGF0YTI5Ax0GZGF0YTMwAx4GZGF0YTMxAx8GZGF0YTMyAyAGZGF0YTMzAyEGZGF0YTM0AyIGZGF0YTM1AyMGZGF0YTM2AyQGZGF0YTM3AyUGZGF0YTM4AyYGZGF0YTM5AycGZGF0YTQwAygGZGF0YTQxAykGZGF0YTQyAyoGZGF0YTQzAysGZGF0YTQ0AywGZGF0YTQ1Ay0GZGF0YTQ2Ay4GZGF0YTQ3Ay8GZGF0YTQ4AzAL44eAgAAxAEEBCwdzY3JvbGwAAEEKCwdoaWRkZW4AAEESCwxtYWluX2NhbnZhcwAAQSALLm9uU2l6ZUNoYW5nZWQlM0ElMjBzaXplJTIwaXMlMjBub3QlMjBjaGFuZ2VkLgAAQdAACxhvblNpemVDaGFuZ2VkJTNBJTIwdyUzRAAAQeoACwglMjBoJTNEAABB9AALCGV4aXRBcHAAAEH+AAsER0VUAABBhAELC2RhdGFVUkwlM0EAAEGQAQsxJUU0JUI4JTgzJUU1JUI3JUE3JUU2JTlEJUJGJUU0JUJBJTkyJUU1JThBJUE4JTNBAABBwgELCGRpc3BsYXkAAEHMAQsEJTJGAABB0gELBCUyRgAAQdgBCwQlMkYAAEHeAQsEJTJGAABB5AELBCUyRgAAQeoBCwQlMkYAAEHwAQsEJTJGAABB9gELBCUyRgAAQfwBCwQlMkYAAEGCAgsEJTJGAABBiAILBCUyRgAAQY4CCwQlMkYAAEGUAgsJYXBwLXZpZXcAAEGeAgsMd2luZG93cGhvbmUAAEGsAgsIYW5kcm9pZAAAQbYCCwdpcGhvbmUAAEG+AgsKdWktZGV2aWNlAABBygILG2RldmljZUNvbmZpZy5sY2REZW5zaXR5JTNBAABB5gILGWRldmljZUNvbmZpZy5wbGF0Zm9ybSUzQQAAQYADCxhkZXZpY2VDb25maWcuc2NyZWVuVyUzQQAAQZoDCxhkZXZpY2VDb25maWcuc2NyZWVuSCUzQQAAQbQDCxhTZXQlMjB0YXJnZXRTaGFwZSUzQSUyMAAAQc4DCwp1aS1zY3JlZW4AAEHaAwsHaGlkZGVuAABB4gMLGHRoaXMud2luZG93TWFuYWdlci54JTNEAABB/AMLGHRoaXMud2luZG93TWFuYWdlci55JTNEAABBlgQLGHRoaXMud2luZG93TWFuYWdlci53JTNEAABBsAQLGHRoaXMud2luZG93TWFuYWdlci5oJTNEAABBygQLG3J1biUyMGluJTIwcHJldmlldyUyMG1vZGUuAABB5gQLEGFwcGlkJTNEcHJldmlldwAAQfgECwpsYW5kc2NhcGUAAEGEBQsJcG9ydHJhaXQAAEGOBQsFdyUzQQAAQZQFCwglMjBoJTNBAABBngULJEl0JTIwaXMlMjBub3QlMjBhJTIwdmFsaWQlMjB3ZWJhcHAuAABBxAULB3NjcmlwdAAAQcwFCzNodHRwJTNBJTJGJTJGYXBwdXNhZ2UuZHVhcHAuY29tJTJGY291bnQlM0ZhcHBpZCUzRAAAQYAGCxRXZWl4aW5KU0JyaWRnZVJlYWR5AA=='].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
function webappInit(type) {
    (() => {
        const __callInstance113 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    cantkRegisterUIElements();
                }
            }
        });
        const __exports = __callInstance113.exports;
        return __exports.data();
    })();
    (() => {
        const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        document.body.style.overflow = lS(0, 0);
                    }
                },
                impFunc2: () => {
                    {
                        document.body.style.overflow = lS(0, 1);
                    }
                }
            }
        });
        const __exports = __ifInstance0.exports;
        return __exports.data(type === AppBase.TYPE_PREVIEW ? 1 : 0);
    })();
    return;
}
function WebApp(type) {
    var args = [
        lS(0, 2),
        type
    ];
    (() => {
        const __callInstance112 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    AppBase.apply(this, args);
                }
            }
        });
        const __exports = __callInstance112.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance111 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    webappInit(type);
                }
            }
        });
        const __exports = __callInstance111.exports;
        return __exports.data();
    })();
    this.onCanvasSized = function (w, h) {
        (() => {
            const __callInstance110 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.win.resize(w, h);
                    }
                }
            });
            const __exports = __callInstance110.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance109 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.view.resize(w, h);
                    }
                }
            });
            const __exports = __callInstance109.exports;
            return __exports.data();
        })();
        return;
    };
    this.onSizeChanged = function () {
        var viewPort = cantkGetViewPort();
        if (viewPort.width === this.viewPort.width && viewPort.height === this.viewPort.height) {
            (() => {
                const __callInstance108 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            console.log(lS(0, 3));
                        }
                    }
                });
                const __exports = __callInstance108.exports;
                return __exports.data();
            })();
            return;
        }
        (() => {
            const __callInstance107 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.adjustCanvasSize();
                    }
                }
            });
            const __exports = __callInstance107.exports;
            return __exports.data();
        })();
        var w = this.canvas.width;
        var h = this.canvas.height;
        (() => {
            const __callInstance106 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        console.log(lS(0, 4) + w + lS(0, 5) + h);
                    }
                }
            });
            const __exports = __callInstance106.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance105 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.manager.resize(w, h);
                    }
                }
            });
            const __exports = __callInstance105.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance104 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.win.resize(w, h);
                    }
                }
            });
            const __exports = __callInstance104.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance103 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.view.resize(w, h);
                    }
                }
            });
            const __exports = __callInstance103.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance102 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.view.resizeWindowManager(w, h);
                    }
                }
            });
            const __exports = __callInstance102.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance101 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.view.moveEditor();
                    }
                }
            });
            const __exports = __callInstance101.exports;
            return __exports.data();
        })();
        this.viewPort = viewPort;
    };
    this.exitApp = function () {
        (() => {
            const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance100 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            tizen.application.getCurrentApplication().exit();
                                        }
                                    }
                                });
                                const __exports = __callInstance100.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                        (() => {
                            const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            (() => {
                                                const __callInstance99 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            navigator.app.exitApp();
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance99.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance2.exports;
                            return __exports.data(navigator.app ? 1 : 0);
                        })();
                    }
                }
            });
            const __exports = __ifInstance1.exports;
            return __exports.data(isTizen() ? 1 : 0);
        })();
        (() => {
            const __callInstance98 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        console.log(lS(0, 6));
                    }
                }
            });
            const __exports = __callInstance98.exports;
            return __exports.data();
        })();
        return;
    };
    this.viewPort = cantkGetViewPort();
    return this;
}
WebApp.prototype.runWithURL = function (dataURL) {
    var rInfo = {};
    var app = this;
    rInfo.url = dataURL;
    rInfo.headers = {};
    rInfo.method = lS(0, 7);
    rInfo.noCache = true;
    rInfo.onDone = function (result, xhr, respContent) {
        var jsonStr = xhr.responseText;
        (() => {
            const __callInstance97 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        app.runWithData(jsonStr);
                    }
                }
            });
            const __exports = __callInstance97.exports;
            return __exports.data();
        })();
        return;
    };
    (() => {
        const __callInstance96 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    httpDoRequest(rInfo);
                }
            }
        });
        const __exports = __callInstance96.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance95 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    console.log(lS(0, 8) + dataURL);
                }
            }
        });
        const __exports = __callInstance95.exports;
        return __exports.data();
    })();
    return;
};
WebApp.prototype.createWindow = function () {
    var x = 0;
    var y = 0;
    var w = this.canvas.width;
    var h = this.canvas.height;
    this.win = WWindow.create(this.manager, 0, 0, w, h);
    this.view = WAppView.create(this.win, x, y, w, h, this);
    this.view.forPreview = this.type === AppBase.TYPE_PREVIEW;
    this.win.paintBackground = function (canvas) {
    };
    (() => {
        const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.view.paintBackground = function (canvas) {
                        };
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance3.exports;
        return __exports.data(!this.view.forPreview ? 1 : 0);
    })();
    var view = this.view;
    this.win.onGesture = function (gesture) {
        return view.onGesture(gesture);
    };
    return;
};
WebApp.prototype.showWindow = function () {
    (() => {
        const __callInstance94 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.view.showIt();
                }
            }
        });
        const __exports = __callInstance94.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance93 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.win.showAll(1);
                }
            }
        });
        const __exports = __callInstance93.exports;
        return __exports.data();
    })();
    var meta = this.view.getMeta();
    (() => {
        const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        document.title = lS(0, 9) + meta.general.appname;
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance4.exports;
        return __exports.data(meta && meta.general ? 1 : 0);
    })();
    return;
};
WebApp.prototype.runWithData = function (jsonStr) {
    (() => {
        const __callInstance92 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.createWindow();
                }
            }
        });
        const __exports = __callInstance92.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance91 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.view.loadFromJson(jsonStr);
                }
            }
        });
        const __exports = __callInstance91.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance90 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.showWindow();
                }
            }
        });
        const __exports = __callInstance90.exports;
        return __exports.data();
    })();
    return;
};
WebApp.prototype.previewWithDeviceData = function (deviceJson) {
    (() => {
        const __callInstance89 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.createWindow();
                }
            }
        });
        const __exports = __callInstance89.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance88 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.view.beforeLoad(deviceJson);
                }
            }
        });
        const __exports = __callInstance88.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance87 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.view.fixDeviceConfig(deviceJson);
                }
            }
        });
        const __exports = __callInstance87.exports;
        return __exports.data();
    })();
    this.view.meta = deviceJson.meta;
    this.view.device = ShapeFactoryGet().createShape(deviceJson.type, C_CREATE_FOR_PROGRAM);
    this.view.deviceJson = deviceJson;
    (() => {
        const __callInstance86 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.view.afterLoad(deviceJson);
                }
            }
        });
        const __exports = __callInstance86.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance85 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.showWindow();
                }
            }
        });
        const __exports = __callInstance85.exports;
        return __exports.data();
    })();
    return;
};
WebApp.prototype.runWithDeviceData = function (deviceJson) {
    (() => {
        const __callInstance84 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.createWindow();
                }
            }
        });
        const __exports = __callInstance84.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance83 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.view.fixDeviceConfig(deviceJson);
                }
            }
        });
        const __exports = __callInstance83.exports;
        return __exports.data();
    })();
    this.view.device = deviceJson;
    this.view.meta = deviceJson.meta;
    this.view.createWindowManager = function () {
        var js = null;
        var wm = this.getWindowManager();
        js = wm;
        (() => {
            const __callInstance82 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.beforeLoad(deviceJson);
                    }
                }
            });
            const __exports = __callInstance82.exports;
            return __exports.data();
        })();
        wm = ShapeFactoryGet().createShape(js.type, C_CREATE_FOR_PROGRAM);
        (() => {
            const __callInstance81 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        wm.fromJson(js);
                    }
                }
            });
            const __exports = __callInstance81.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance80 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.afterLoad(deviceJson);
                    }
                }
            });
            const __exports = __callInstance80.exports;
            return __exports.data();
        })();
        return wm;
    };
    (() => {
        const __callInstance79 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.showWindow();
                }
            }
        });
        const __exports = __callInstance79.exports;
        return __exports.data();
    })();
    return;
};
function webappRunWithData(jsonStr) {
    var app = new WebApp(AppBase.TYPE_WEBAPP);
    (() => {
        const __callInstance78 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    app.runWithData(jsonStr);
                }
            }
        });
        const __exports = __callInstance78.exports;
        return __exports.data();
    })();
    return app;
}
function webappRunWithDeviceData(deviceJson) {
    var app = new WebApp(AppBase.TYPE_WEBAPP);
    (() => {
        const __callInstance77 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    app.runWithDeviceData(deviceJson);
                }
            }
        });
        const __exports = __callInstance77.exports;
        return __exports.data();
    })();
    return app;
}
function webappPreviewWithDeviceData(deviceJson) {
    var app = new WebApp(AppBase.TYPE_PREVIEW);
    (() => {
        const __callInstance76 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    app.previewWithDeviceData(deviceJson);
                }
            }
        });
        const __exports = __callInstance76.exports;
        return __exports.data();
    })();
    return app;
}
function webappPreviewWithData(jsonStr) {
    var app = new WebApp(AppBase.TYPE_PREVIEW);
    (() => {
        const __callInstance75 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    app.runWithData(jsonStr);
                }
            }
        });
        const __exports = __callInstance75.exports;
        return __exports.data();
    })();
    return app;
}
function webappRunWithURL(dataURL) {
    var app = new WebApp(AppBase.TYPE_WEBAPP);
    (() => {
        const __callInstance74 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    app.runWithURL(dataURL);
                }
            }
        });
        const __exports = __callInstance74.exports;
        return __exports.data();
    })();
    return app;
}
function webappPreviewWithURL(dataURL) {
    var app = new WebApp(AppBase.TYPE_PREVIEW);
    (() => {
        const __callInstance73 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    app.runWithURL(dataURL);
                }
            }
        });
        const __exports = __callInstance73.exports;
        return __exports.data();
    })();
    return app;
}
function shapeFixImagePath(shape, oldConfig, newConfig) {
    var oldVersion = oldConfig.version;
    var oldPlatform = oldConfig.platform;
    var oldDensity = oldConfig.lcdDensity;
    var newVersion = newConfig.version;
    var newPlatform = newConfig.platform;
    var newDensity = newConfig.lcdDensity;
    for (var key in shape.images) {
        var value = shape.images[key];
        if (key === lS(0, 10)) {
            continue;
        }
        var src = value;
        (() => {
            const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            src = src.replaceAll(lS(0, 11) + oldVersion + lS(0, 12), lS(0, 13) + newVersion + lS(0, 14));
                            src = src.replaceAll(lS(0, 15) + oldPlatform + lS(0, 16), lS(0, 17) + newPlatform + lS(0, 18));
                            src = src.replaceAll(lS(0, 19) + oldDensity + lS(0, 20), lS(0, 21) + newDensity + lS(0, 22));
                            shape.images[key] = src;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance5.exports;
            return __exports.data(src ? 1 : 0);
        })();
    }
    (() => {
        const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            var i = 0;
                            const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
                                env: {
                                    test: () => {
                                        return i < shape.children.length ? 1 : 0;
                                    },
                                    update: () => {
                                        i++;
                                    },
                                    body: () => {
                                        {
                                            (() => {
                                                const __callInstance72 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            shapeFixImagePath(shape.children[i], oldConfig, newConfig);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance72.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    }
                                }
                            });
                            const __exports = __forInstance0.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance6.exports;
        return __exports.data(shape.children ? 1 : 0);
    })();
    return;
}
function WAppView() {
}
WAppView.prototype = new WViewBase();
WAppView.prototype.init = function (parent, x, y, w, h, app) {
    this.app = app;
    this.type = lS(0, 23);
    (() => {
        const __callInstance71 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    WViewBase.prototype.init.call(this, parent, x, y, w, h);
                }
            }
        });
        const __exports = __callInstance71.exports;
        return __exports.data();
    })();
    this.forPreview = false;
    this.platform = lS(0, 24);
    (() => {
        const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.platform = lS(0, 25);
                    }
                },
                impFunc2: () => {
                    (() => {
                        const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        this.platform = lS(0, 26);
                                    }
                                },
                                impFunc2: () => {
                                }
                            }
                        });
                        const __exports = __ifInstance8.exports;
                        return __exports.data(browser.versions.iPhone ? 1 : 0);
                    })();
                }
            }
        });
        const __exports = __ifInstance7.exports;
        return __exports.data(browser.versions.android ? 1 : 0);
    })();
    return this;
};
WAppView.prototype.clearBg = function (canvas, color) {
    var r = this.rect;
    canvas.fillStyle = color;
    (() => {
        const __callInstance70 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    canvas.fillRect(r.x, r.y, r.w, r.h);
                }
            }
        });
        const __exports = __callInstance70.exports;
        return __exports.data();
    })();
};
WAppView.prototype.showPageIndicator = function (canvas) {
    return;
};
WAppView.prototype.showLogo = function (canvas) {
    return;
};
WAppView.prototype.drawGrid = function (canvas) {
    return;
};
WAppView.prototype.onGesture = function (gesture) {
    (() => {
        const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        var curWin = this.windowManager.getCurrentFrame();
                        (() => {
                            const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            (() => {
                                                const __callInstance69 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            curWin.onGesture(gesture);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance69.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance10.exports;
                            return __exports.data(curWin ? 1 : 0);
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance9.exports;
        return __exports.data(this.windowManager ? 1 : 0);
    })();
    return;
};
WAppView.prototype.setTarget = function (shape) {
    (() => {
        var i = this.allShapes.length - 1;
        const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i >= 0 ? 1 : 0;
                },
                update: () => {
                    i--;
                },
                body: () => {
                    {
                        var g = this.allShapes[i];
                        (() => {
                            const __ifInstance11 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            (() => {
                                                const __callInstance68 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            g.setSelected(false);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance68.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance11.exports;
                            return __exports.data(shape !== g ? 1 : 0);
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance1.exports;
        return __exports.data();
    })();
    this.targetShape = shape;
    return;
};
WAppView.prototype.onPointerDown = function (p) {
    var point = this.translatePoint(p);
    this.pointerDownPosition.x = point.x;
    this.pointerDownPosition.y = point.y;
    this.lastPointerPosition.x = point.x;
    this.lastPointerPosition.y = point.y;
    (() => {
        const __callInstance67 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.updateLastPointerPoint(point);
                }
            }
        });
        const __exports = __callInstance67.exports;
        return __exports.data();
    })();
    for (var i = this.allShapes.length - 1; i >= 0; i--) {
        var shape = this.allShapes[i];
        if (shape.onPointerDown(point)) {
            (() => {
                const __callInstance66 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this.setTarget(shape);
                        }
                    }
                });
                const __exports = __callInstance66.exports;
                return __exports.data();
            })();
            break;
        }
    }
    (() => {
        const __callInstance65 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.postRedraw();
                }
            }
        });
        const __exports = __callInstance65.exports;
        return __exports.data();
    })();
    return;
};
WAppView.prototype.onPointerMove = function (p) {
    var point = this.translatePoint(p);
    (() => {
        const __callInstance64 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.updateLastPointerPoint(point);
                }
            }
        });
        const __exports = __callInstance64.exports;
        return __exports.data();
    })();
    if (this.targetShape) {
        (() => {
            const __callInstance63 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.targetShape.onPointerMove(point);
                    }
                }
            });
            const __exports = __callInstance63.exports;
            return __exports.data();
        })();
        (() => {
            const __ifInstance12 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance62 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.postRedraw();
                                        }
                                    }
                                });
                                const __exports = __callInstance62.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance12.exports;
            return __exports.data(this.targetShape.pointerDown ? 1 : 0);
        })();
        return;
    }
    return;
};
WAppView.prototype.onPointerUp = function (p) {
    var point = this.translatePoint(p);
    (() => {
        const __callInstance61 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.updateLastPointerPoint(point);
                }
            }
        });
        const __exports = __callInstance61.exports;
        return __exports.data();
    })();
    (() => {
        const __ifInstance13 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance60 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.targetShape.onPointerUp(point);
                                    }
                                }
                            });
                            const __exports = __callInstance60.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance59 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.postRedraw();
                                    }
                                }
                            });
                            const __exports = __callInstance59.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance13.exports;
        return __exports.data(this.targetShape ? 1 : 0);
    })();
    return;
};
WAppView.prototype.onKeyDown = function (code) {
    (() => {
        const __ifInstance14 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.targetShape = this.allShapes[0];
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance14.exports;
        return __exports.data(!this.targetShape && this.allShapes && this.allShapes.length ? 1 : 0);
    })();
    (() => {
        const __ifInstance15 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance58 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.targetShape.onKeyDown(code);
                                    }
                                }
                            });
                            const __exports = __callInstance58.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance57 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.postRedraw();
                                    }
                                }
                            });
                            const __exports = __callInstance57.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance15.exports;
        return __exports.data(this.targetShape ? 1 : 0);
    })();
    return;
};
WAppView.prototype.onKeyUp = function (code) {
    (() => {
        const __ifInstance16 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance56 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.targetShape.onKeyUp(code);
                                    }
                                }
                            });
                            const __exports = __callInstance56.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance55 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.postRedraw();
                                    }
                                }
                            });
                            const __exports = __callInstance55.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance16.exports;
        return __exports.data(this.targetShape ? 1 : 0);
    })();
    return;
};
WAppView.prototype.extractDevices = function (js) {
    this.devices = [];
    (() => {
        var pageIndex = 0;
        const __forInstance2 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return pageIndex < js.pages.length ? 1 : 0;
                },
                update: () => {
                    pageIndex++;
                },
                body: () => {
                    {
                        var page = js.pages[pageIndex];
                        (() => {
                            var i = 0;
                            const __forInstance3 = new WebAssembly.Instance(__forWasmModule, {
                                env: {
                                    test: () => {
                                        return i < page.shapes.length ? 1 : 0;
                                    },
                                    update: () => {
                                        i++;
                                    },
                                    body: () => {
                                        {
                                            var shape = page.shapes[i];
                                            (() => {
                                                const __ifInstance17 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            {
                                                                (() => {
                                                                    const __ifInstance18 = new WebAssembly.Instance(__ifWasmModule, {
                                                                        env: {
                                                                            impFunc1: () => {
                                                                                {
                                                                                    shape.images = { display: 0 };
                                                                                    (() => {
                                                                                        const __callInstance54 = new WebAssembly.Instance(__callWasmModule, {
                                                                                            env: {
                                                                                                impFunc: () => {
                                                                                                    this.fixDeviceConfig(shape);
                                                                                                }
                                                                                            }
                                                                                        });
                                                                                        const __exports = __callInstance54.exports;
                                                                                        return __exports.data();
                                                                                    })();
                                                                                }
                                                                            },
                                                                            impFunc2: () => {
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __ifInstance18.exports;
                                                                    return __exports.data(!this.forPreview ? 1 : 0);
                                                                })();
                                                                var device = ShapeFactoryGet().createShape(shape.type, C_CREATE_FOR_PROGRAM);
                                                                (() => {
                                                                    const __ifInstance19 = new WebAssembly.Instance(__ifWasmModule, {
                                                                        env: {
                                                                            impFunc1: () => {
                                                                                {
                                                                                    (() => {
                                                                                        const __callInstance53 = new WebAssembly.Instance(__callWasmModule, {
                                                                                            env: {
                                                                                                impFunc: () => {
                                                                                                    device.fromJson(shape);
                                                                                                }
                                                                                            }
                                                                                        });
                                                                                        const __exports = __callInstance53.exports;
                                                                                        return __exports.data();
                                                                                    })();
                                                                                }
                                                                            },
                                                                            impFunc2: () => {
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __ifInstance19.exports;
                                                                    return __exports.data(device ? 1 : 0);
                                                                })();
                                                                (() => {
                                                                    const __callInstance52 = new WebAssembly.Instance(__callWasmModule, {
                                                                        env: {
                                                                            impFunc: () => {
                                                                                this.devices.push(device);
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __callInstance52.exports;
                                                                    return __exports.data();
                                                                })();
                                                            }
                                                        },
                                                        impFunc2: () => {
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance17.exports;
                                                return __exports.data(shape.type === lS(0, 27) ? 1 : 0);
                                            })();
                                        }
                                    }
                                }
                            });
                            const __exports = __forInstance3.exports;
                            return __exports.data();
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance2.exports;
        return __exports.data();
    })();
    return this.devices.length;
};
WAppView.prototype.getDevice = function () {
    if (!this.device) {
        for (var i = 0; i < this.devices.length; i++) {
            var device = this.devices[i];
            var config = device.config;
            if (!device.config)
                continue;
            if (config.platform != this.platform)
                continue;
            this.device = device;
        }
        (() => {
            const __ifInstance20 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            this.device = this.devices[0];
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance20.exports;
            return __exports.data(!this.device ? 1 : 0);
        })();
    }
    return this.device;
};
WAppView.prototype.getScreen = function () {
    (() => {
        const __ifInstance21 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        var device = this.getDevice();
                        (() => {
                            var i = 0;
                            const __forInstance4 = new WebAssembly.Instance(__forWasmModule, {
                                env: {
                                    test: () => {
                                        return i < device.children.length ? 1 : 0;
                                    },
                                    update: () => {
                                        i++;
                                    },
                                    body: () => {
                                        {
                                            var child = device.children[i];
                                            (() => {
                                                const __ifInstance22 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            {
                                                                this.screen = child;
                                                            }
                                                        },
                                                        impFunc2: () => {
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance22.exports;
                                                return __exports.data(child.isUIScreen ? 1 : 0);
                                            })();
                                        }
                                    }
                                }
                            });
                            const __exports = __forInstance4.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance21.exports;
        return __exports.data(!this.screen ? 1 : 0);
    })();
    return this.screen;
};
WAppView.prototype.getWindowManager = function (detach) {
    if (!this.windowManager) {
        var screen = this.getScreen();
        for (var i = 0; i < screen.children.length; i++) {
            var child = screen.children[i];
            if (child.isUIWindowManager) {
                this.windowManager = child;
                (() => {
                    const __ifInstance23 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    (() => {
                                        const __callInstance51 = new WebAssembly.Instance(__callWasmModule, {
                                            env: {
                                                impFunc: () => {
                                                    screen.children.remove(child);
                                                }
                                            }
                                        });
                                        const __exports = __callInstance51.exports;
                                        return __exports.data();
                                    })();
                                    child.parentShape = null;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance23.exports;
                    return __exports.data(detach ? 1 : 0);
                })();
                break;
            }
        }
    }
    return this.windowManager;
};
WAppView.prototype.detectDeviceConfig = function () {
    if (this.detectedDeviceConfig) {
        return this.detectedDeviceConfig;
    }
    var deviceConfig = cantkDetectDeviceConfig();
    deviceConfig.screenW = this.rect.w;
    deviceConfig.screenH = this.rect.h;
    this.detectedDeviceConfig = deviceConfig;
    (() => {
        const __callInstance50 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    console.log(lS(0, 28) + deviceConfig.lcdDensity);
                }
            }
        });
        const __exports = __callInstance50.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance49 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    console.log(lS(0, 29) + deviceConfig.platform);
                }
            }
        });
        const __exports = __callInstance49.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance48 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    console.log(lS(0, 30) + deviceConfig.screenW);
                }
            }
        });
        const __exports = __callInstance48.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance47 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    console.log(lS(0, 31) + deviceConfig.screenH);
                }
            }
        });
        const __exports = __callInstance47.exports;
        return __exports.data();
    })();
    return deviceConfig;
};
WAppView.prototype.showIt = function () {
    (() => {
        const __ifInstance24 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance46 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.showDevice();
                                    }
                                }
                            });
                            const __exports = __callInstance46.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                    {
                        (() => {
                            const __callInstance45 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.showWindowManager();
                                    }
                                }
                            });
                            const __exports = __callInstance45.exports;
                            return __exports.data();
                        })();
                    }
                }
            }
        });
        const __exports = __ifInstance24.exports;
        return __exports.data(this.forPreview ? 1 : 0);
    })();
    this.targetShape = this.getWindowManager();
    (() => {
        const __callInstance44 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    console.log(lS(0, 32) + this.targetShape.type);
                }
            }
        });
        const __exports = __callInstance44.exports;
        return __exports.data();
    })();
    var view = this;
    (() => {
        const __callInstance43 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    setTimeout(function () {
                        (() => {
                            const __callInstance42 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        view.postRedraw();
                                    }
                                }
                            });
                            const __exports = __callInstance42.exports;
                            return __exports.data();
                        })();
                    }, 500);
                }
            }
        });
        const __exports = __callInstance43.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance41 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    setTimeout(function () {
                        (() => {
                            const __callInstance40 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        view.postRedraw();
                                    }
                                }
                            });
                            const __exports = __callInstance40.exports;
                            return __exports.data();
                        })();
                    }, 1000);
                }
            }
        });
        const __exports = __callInstance41.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance39 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    setTimeout(function () {
                        (() => {
                            const __callInstance38 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        view.postRedraw();
                                    }
                                }
                            });
                            const __exports = __callInstance38.exports;
                            return __exports.data();
                        })();
                    }, 2000);
                }
            }
        });
        const __exports = __callInstance39.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance37 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    setTimeout(function () {
                        (() => {
                            const __callInstance36 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        view.postRedraw();
                                    }
                                }
                            });
                            const __exports = __callInstance36.exports;
                            return __exports.data();
                        })();
                    }, 3000);
                }
            }
        });
        const __exports = __callInstance37.exports;
        return __exports.data();
    })();
    return;
};
WAppView.prototype.showDevice = function () {
    var x = 0;
    var y = 0;
    var w = this.rect.w;
    var h = this.rect.h;
    var device = this.getDevice();
    UIElement.disableGetRelativePathOfURL = true;
    var js = this.deviceJson ? this.deviceJson : device.toJson();
    UIElement.disableGetRelativePathOfURL = false;
    var screen = null;
    (() => {
        var i = 0;
        const __forInstance5 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < js.children.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        var child = js.children[i];
                        (() => {
                            const __ifInstance25 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            screen = child;
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance25.exports;
                            return __exports.data(child.type === lS(0, 33) ? 1 : 0);
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance5.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance35 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    js.children.clear();
                }
            }
        });
        const __exports = __callInstance35.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance34 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    js.children.push(screen);
                }
            }
        });
        const __exports = __callInstance34.exports;
        return __exports.data();
    })();
    this.device = device = ShapeFactoryGet().createShape(js.type, C_CREATE_FOR_PROGRAM);
    (() => {
        const __callInstance33 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    device.fromJson(js);
                }
            }
        });
        const __exports = __callInstance33.exports;
        return __exports.data();
    })();
    var viewPort = cantkGetViewPort();
    (() => {
        const __ifInstance26 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        y = (viewPort.height - device.h) / 2;
                        document.body.style.overflow = lS(0, 34);
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance26.exports;
        return __exports.data(device.h < viewPort.height && device.w < viewPort.width ? 1 : 0);
    })();
    x = (w - device.w) / 2;
    (() => {
        const __callInstance32 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    device.move(x, y);
                }
            }
        });
        const __exports = __callInstance32.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance31 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    device.setMode(Shape.MODE_RUNNING, true);
                }
            }
        });
        const __exports = __callInstance31.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance30 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.addShape(device);
                }
            }
        });
        const __exports = __callInstance30.exports;
        return __exports.data();
    })();
    var wm = this.getWindowManager();
    (() => {
        const __callInstance29 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.runApp(wm);
                }
            }
        });
        const __exports = __callInstance29.exports;
        return __exports.data();
    })();
    return;
};
WAppView.prototype.getDeviceConfig = function () {
    var device = this.getDevice();
    return device ? device.config : null;
};
WAppView.prototype.resizeWindowManager = function (w, h) {
    (() => {
        const __ifInstance27 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance28 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.windowManager.resize(w, h);
                                    }
                                }
                            });
                            const __exports = __callInstance28.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance27 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        console.log(lS(0, 35) + this.windowManager.x);
                                    }
                                }
                            });
                            const __exports = __callInstance27.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance26 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        console.log(lS(0, 36) + this.windowManager.y);
                                    }
                                }
                            });
                            const __exports = __callInstance26.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        console.log(lS(0, 37) + this.windowManager.w);
                                    }
                                }
                            });
                            const __exports = __callInstance25.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        console.log(lS(0, 38) + this.windowManager.h);
                                    }
                                }
                            });
                            const __exports = __callInstance24.exports;
                            return __exports.data();
                        })();
                        var wm = this.windowManager;
                        (() => {
                            const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        setTimeout(function () {
                                            (() => {
                                                const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            wm.relayoutChildren();
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance22.exports;
                                                return __exports.data();
                                            })();
                                            (() => {
                                                const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            wm.postRedraw();
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance21.exports;
                                                return __exports.data();
                                            })();
                                        }, 200);
                                    }
                                }
                            });
                            const __exports = __callInstance23.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance27.exports;
        return __exports.data(this.windowManager ? 1 : 0);
    })();
    return;
};
WAppView.prototype.moveEditor = function () {
    (() => {
        const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    setTimeout(function () {
                        (() => {
                            const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        cantkMoveEditorWhenResize();
                                    }
                                }
                            });
                            const __exports = __callInstance19.exports;
                            return __exports.data();
                        })();
                    }, 300);
                }
            }
        });
        const __exports = __callInstance20.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    cantkMoveEditorWhenResize();
                }
            }
        });
        const __exports = __callInstance18.exports;
        return __exports.data();
    })();
    return;
};
WAppView.prototype.createWindowManager = function () {
    return this.getWindowManager(true);
};
WAppView.prototype.fixDeviceConfig = function (device) {
    var oldConfig = device.config;
    var newConfig = this.detectDeviceConfig();
    (() => {
        const __ifInstance28 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        newConfig.lcdDensity = oldConfig.lcdDensity;
                        (() => {
                            const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        console.log(lS(0, 39));
                                    }
                                }
                            });
                            const __exports = __callInstance17.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance28.exports;
        return __exports.data(this.app.type === AppBase.TYPE_PREVIEW ? 1 : 0);
    })();
    (() => {
        const __ifInstance29 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        shapeFixImagePath(device, oldConfig, newConfig);
                                    }
                                }
                            });
                            const __exports = __callInstance16.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance29.exports;
        return __exports.data(newConfig.platform !== oldConfig.platform && newConfig.version !== oldConfig.version && newConfig.lcdDensity !== oldConfig.lcdDensity ? 1 : 0);
    })();
    return;
};
WAppView.prototype.loadUserScripts = function () {
    (() => {
        const __ifInstance30 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        var scripts = this.meta.extlibs;
                        var force = window.location.href.indexOf(lS(0, 40)) > 0;
                        (() => {
                            const __ifInstance31 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            (() => {
                                                var i = 0;
                                                const __forInstance6 = new WebAssembly.Instance(__forWasmModule, {
                                                    env: {
                                                        test: () => {
                                                            return i < scripts.length ? 1 : 0;
                                                        },
                                                        update: () => {
                                                            i++;
                                                        },
                                                        body: () => {
                                                            {
                                                                (() => {
                                                                    const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                                                                        env: {
                                                                            impFunc: () => {
                                                                                ResLoader.loadScript(scripts[i], force);
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __callInstance15.exports;
                                                                    return __exports.data();
                                                                })();
                                                            }
                                                        }
                                                    }
                                                });
                                                const __exports = __forInstance6.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance31.exports;
                            return __exports.data(scripts ? 1 : 0);
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance30.exports;
        return __exports.data(this.meta ? 1 : 0);
    })();
    return;
};
WAppView.prototype.runApp = function (wm) {
    (() => {
        const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.loadUserScripts();
                }
            }
        });
        const __exports = __callInstance14.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    wm.systemInit();
                }
            }
        });
        const __exports = __callInstance13.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    wm.postRedraw();
                }
            }
        });
        const __exports = __callInstance12.exports;
        return __exports.data();
    })();
    return;
};
WAppView.prototype.showWindowManager = function () {
    var wm = null;
    var w = this.rect.w;
    var h = this.rect.h;
    var newConfig = this.detectDeviceConfig();
    wm = this.createWindowManager();
    wm.deviceConfig = this.getDeviceConfig();
    (() => {
        const __ifInstance32 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        newConfig.lcdDensity = wm.deviceConfig.lcdDensity;
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance32.exports;
        return __exports.data(this.app.type === AppBase.TYPE_PREVIEW ? 1 : 0);
    })();
    (() => {
        const __ifInstance33 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        var general = this.meta.general;
                        var orientation = general.orientation;
                        wm.forcePortrait = false;
                        wm.forceLandscape = false;
                        (() => {
                            const __ifInstance34 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            wm.forceLandscape = true;
                                        }
                                    },
                                    impFunc2: () => {
                                        (() => {
                                            const __ifInstance35 = new WebAssembly.Instance(__ifWasmModule, {
                                                env: {
                                                    impFunc1: () => {
                                                        {
                                                            wm.forcePortrait = true;
                                                        }
                                                    },
                                                    impFunc2: () => {
                                                    }
                                                }
                                            });
                                            const __exports = __ifInstance35.exports;
                                            return __exports.data(orientation === lS(0, 42) && wm.h > wm.w ? 1 : 0);
                                        })();
                                    }
                                }
                            });
                            const __exports = __ifInstance34.exports;
                            return __exports.data(orientation === lS(0, 41) && wm.w > wm.h ? 1 : 0);
                        })();
                        wm.screenScaleMode = general.screenscale;
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance33.exports;
        return __exports.data(this.meta && this.meta.general ? 1 : 0);
    })();
    (() => {
        const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.addShape(wm);
                }
            }
        });
        const __exports = __callInstance11.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    wm.setDeviceConfig(newConfig);
                }
            }
        });
        const __exports = __callInstance10.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    wm.setMode(Shape.MODE_RUNNING, true);
                }
            }
        });
        const __exports = __callInstance9.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    wm.move(0, 0);
                }
            }
        });
        const __exports = __callInstance8.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    wm.resize(w, h);
                }
            }
        });
        const __exports = __callInstance7.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.runApp(wm);
                }
            }
        });
        const __exports = __callInstance6.exports;
        return __exports.data();
    })();
    this.windowManager = wm;
    (() => {
        const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    console.log(lS(0, 43) + w + lS(0, 44) + h);
                }
            }
        });
        const __exports = __callInstance5.exports;
        return __exports.data();
    })();
    return;
};
WAppView.prototype.getMeta = function () {
    return this.meta;
};
WAppView.prototype.loadJson = function (js) {
    this.meta = js ? js.meta : null;
    (() => {
        const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.beforeLoad(js);
                }
            }
        });
        const __exports = __callInstance4.exports;
        return __exports.data();
    })();
    if (!js || !js.pages || !this.extractDevices(js)) {
        (() => {
            const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        console.log(lS(0, 45));
                    }
                }
            });
            const __exports = __callInstance3.exports;
            return __exports.data();
        })();
        return;
    }
    (() => {
        const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.afterLoad(js);
                }
            }
        });
        const __exports = __callInstance2.exports;
        return __exports.data();
    })();
    var appid = js.docid;
    var tag = document.createElement(lS(0, 46));
    tag.src = lS(0, 47) + appid;
    var node = document.head ? document.head : document.body;
    (() => {
        const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    node.appendChild(tag);
                }
            }
        });
        const __exports = __callInstance1.exports;
        return __exports.data();
    })();
    return;
};
WAppView.create = function (parent, x, y, w, h, app) {
    var view = new WAppView();
    return view.init(parent, x, y, w, h, app);
};
function dappGetText(text) {
    return text;
}
function dappIsEditorApp() {
    return false;
}
(() => {
    const __ifInstance36 = new WebAssembly.Instance(__ifWasmModule, {
        env: {
            impFunc1: () => {
                {
                    (() => {
                        const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                            env: {
                                impFunc: () => {
                                    document.addEventListener(lS(0, 48), function onBridgeReady() {
                                    });
                                }
                            }
                        });
                        const __exports = __callInstance0.exports;
                        return __exports.data();
                    })();
                }
            },
            impFunc2: () => {
            }
        }
    });
    const __exports = __ifInstance36.exports;
    return __exports.data(isWeiXin() ? 1 : 0);
})();
window.webappSetLocaleStrings = webappSetLocaleStrings;
window.webappPreviewWithURL = webappPreviewWithURL;
window.webappPreviewWithData = webappPreviewWithData;
window.webappPreviewWithDeviceData = webappPreviewWithDeviceData;
window.webappRunWithURL = webappRunWithURL;
window.webappRunWithData = webappRunWithData;
window.webappRunWithDeviceData = webappRunWithDeviceData;</script>
</body>
</html>
