<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>general-script.html</title>
</head>
<body>

<script>
$( document ).ready(function() {
	$("#covered-bonds-disclaimer .btn-primary").click(function(){
		$("#covered-bonds-disclaimer").hide();
		$("#covered-bonds-detail").show();	
	});

    //$("#newsCountryFilter option:first-child").text("All Markets");
    $("#newsCountryFilter").html("");
    $("#newsCountryFilter").html('<option value="ALL">All Markets</option><option value="sg">Singapore</option><option value="cn">Mainland China</option><option value="hk">Hong Kong</option><option value="in">India</option><option value="id">Indonesia</option><option value="regional">Regional</option><option value="tw">Taiwan</option>');  
  	
   /* menu hack selected for foundation */
  	var currentURL = window.location.href;
  	/*switch (currentURL){
      case "https://dbswebprv-grp-p01.corp.dbs.com/gsmc-grp/foundation/default.page":
      case "http://dbswebprv-grp-p01.corp.dbs.com/gsmc-grp/foundation/default.page":
      case "https://www.dbs.com/gsmc-grp/foundation/default.page":
      case "http://www.dbs.com/gsmc-grp/foundation/default.page":
      case "https://www.dbs.com/foundation/default.page":
      case "http://www.dbs.com/foundation/default.page":          
        	$("#flpHeader .navbar-links-left li").removeClass("active");
        	$("#flpHeader .navbar-links-left li:nth-child(6)").addClass("active");
        
        	
        	break;
    }
    */
  
    /* menu hack selected for foundation */
    if (window.location.href.indexOf("/foundation/") > -1) {
       $("#flpHeader .navbar-links-left li").removeClass("active");
       $("#flpHeader .navbar-links-left li:nth-child(6)").addClass("active");
       $("#mobileSlideMenu .mega-panel li").removeClass("active");
       $("#mobileSlideMenu .mega-panel li:nth-child(7)").addClass("active");      
      
    }
   
  	if($('.foundation-menu').length > 0){
      	$("#flpHeader .navbar-links-left li").removeClass("active");
      
        $("#flpHeader .navbar-links-left li:nth-child(6)").addClass("active");
      	
      	$('.foundation-menu .nav-list li').removeClass("active");
      
      	$('.foundation-menu .nav-list li').each(function(i,o){
          if(currentURL.indexOf($(o).find('a').attr('href')) > -1){
          	$(o).addClass('active');
          }
        });

    }
  
  	/* Menu - Research Tab */
  	$(".navbar-links-left ul li:last-child a").attr("target","_blank");
  
    /* For Homepage */
    $(".our-awards").parent().removeClass('mTop-88');
    $(".gsmc-home-container .story-card-container").removeClass('mBot-72');
  
    var width = $(window).width(); 
    if ( width <= 768  ) {
      $(".gsmc-home-container").parent().css("margin-top",0);
      $(".gsmc-home-container .mTop-64").css("margin-top","32px");
    }
  	
  	s.t();

  $(".sip-btn1").click(function(){
    dataLayer.push({
      'event': 'interactionEvent',
      'eventCategory': 'Social impact prize – page',
      'eventAction': 'Hyperlink click',
      'eventLabel': 'https://www.dbs.com/iwov-resources/images/foundation/our-support/pdf/DBSF-Social-Impact-Prize-infographic-small.pdf',
    });  
  });

  $(".sip-btn2").click(function(){
    dataLayer.push({
      'event': 'interactionEvent',
      'eventCategory': 'Social impact prize – page',
      'eventAction': 'Hyperlink click',
      'eventLabel': 'https://www.smu.edu.sg/lky',
    });  
  });
  
  $(".sip-btn3").click(function(){
    dataLayer.push({
      'event': 'interactionEvent',
      'eventCategory': 'Social impact prize – page',
      'eventAction': 'Hyperlink click',
      'eventLabel': 'https://smucompetitions.fluidreview.com/',
    });  
  });   
  
  /* Hide story read time */
  window.setInterval(function(){   
    $(".storyTile .gray1-text").each(function(count,ele){
      var msg = $(ele).text();
      $(ele).text( msg.substring(0,11));	
    })
  }, 500);  
  
  $('#markets').on('change', function() {
        $(".btn-emap-apply").attr("href", this.value );
    });
  
  //$("section.awards .carousel-inner div.item:first-child button").hide(); 
  
  
  function customtagging() {
  	var query = window.location.search;
  	if (query) {
      var currhref = $("a#applynow").attr("href");
      console.log(currhref);
      const querycheck = query.toLowerCase().substring(0,5);
      console.log("query: " + querycheck);

      if(querycheck == "?utm_"){
        query = query.replace(/utm_/gi, "dbsf_");
        $("a#applynow").attr("href", currhref + query);
      }
      else{
        $("#applynow").attr("href", "https://www.dbs.com/lr/forms/dbsf-grant-form")
      }

  	}
  }
  customtagging();
  setInterval(function(){
    var hash = location.hash.substr(1);  
    if(hash == "features"){
      $(".navbar-links-left li:nth-child(4) dd:nth-child(1)").removeClass("active");
      $(".navbar-links-left li:nth-child(4) dd:nth-child(5)").addClass("active");
    }                        
  }, 1000);

  if (window.location.href.indexOf("media") > -1) {
    $(".navbar-links-left li:nth-child(4)").addClass("active");
  }  
  
  
  
  if ( window.location.href.indexOf("covid-19/portraits-of-purpose") > -1) {	
  }
  else if((window.location.href.indexOf("flp_india/") > -1) || (window.location.href.indexOf("india/") > -1)){
  }
  else {
    //$("#mobileSlideMenu #megaMenuParent").append('<li class="panel txt-small"><a target="_self" href="/covid-19/portraits-of-purpose/index.html">Covid-19 and beyond</a></li>');
    $("#mobileSlideMenu #megaMenuParent").append('<li class="panel txt-small"><a target="_self" href="/trust-your-spark/index.html??pid=sg-group-pweb-tys-header-text-trust-your-spark">Trust Your Spark</a></li>');
	$('head').append('<link rel="stylesheet" href="/iwov-resources/css/discover-widget.css?v1" type="text/css" />');  
	//$.getScript("https://www.dbs.com/iwov-resources/js/discover-widget.js?v1", function() {});
    
	// DO NOT TOUCH - FOR DISCOVER MORE    
    ///Recommend Panel Start
    function addRecommendPanel() {
        var retrieveURL = function(filename) {
            var scripts = document.getElementsByTagName('script');
            if (scripts && scripts.length > 0) {
                for (var i in scripts) {
                    if (scripts[i].src && scripts[i].src.match(new RegExp(filename + '\\.js$'))) {
                        return $(scripts[i]).attr('src');
                    }
                }
            }
        };

        var urlPathing = "https://www.dbs.com/portraits-of-purpose/"; //retrieveURL('vendors.min').split('vendors.min.js')[0];

        var appendRecommendPanel = '\
           <section class="layout-recommendPanel">\
             <div class="top-row">\
                <img src="https://www.dbs.com/portraits-of-purpose/images/rec-panel-close.svg" class="discover close-btn"/>\
               <p class="head">Recommended for you</p>\
               <p class="subhead">Based on your reading history.</p>\
             </div>\
             <div class="mid-row">\
               <div id="recommended" class="recCat active">\
                 <div class="eachArticle">\
                   <a href="' + urlPathing + 'article-detail.html?post=paralympian-yip-pin-xiu-on-her-journey-to-victory-amid-a-pandemic&pid=group-adobe-at-discovermore-recommended" data-component="Discover More-Recommended" data-title="Paralympian Yip Pin Xiu on her journey to victory amid a pandemic">\
                     <div class="imgWrap">\
                       <img src="' + urlPathing + 'images/articles/paralympian-thumb.png">\
                     </div>\
                   </a>\
                   <div class="details">\
                     <div class="articleTagline">\
                         <div class="tagline">\
                           <p class="xxs"><a href="https://www.dbs.com/portraits-of-purpose/previleged.html?cause=social-inclusion">SOCIAL INCLUSION</a></p>\
                         </div>\
                     </div>\
                     <p>\
                       <a href="' + urlPathing + 'article-detail.html?post=paralympian-yip-pin-xiu-on-her-journey-to-victory-amid-a-pandemic&pid=group-adobe-at-discovermore-recommended" class="articleTitle" data-component="Discover More-Recommended" data-title="Paralympian Yip Pin Xiu on her journey to victory amid a pandemic">\
                       Paralympian Yip Pin Xiu on her journey to victory amid a pandemic\
                       </a>\
                     </p>\
                   </div>\
                 </div>\
                 <div class="eachArticle">\
                   <a href="' + urlPathing + 'article-detail.html?post=he-wants-to-make-singapore-a-more-sustainable-and-liveable-city&pid=group-adobe-at-discovermore-recommended" data-component="Discover More-Recommended" data-title="He wants to make Singapore a more sustainable and liveable city">\
                     <div class="imgWrap">\
                       <img src="' + urlPathing + 'images/articles/growing-a-green-singapore-thumbnail.jpg">\
                     </div>\
                   </a>\
                   <div class="details">\
                     <div class="articleTagline">\
                         <div class="tagline">\
                           <p class="xxs"><a href="https://www.dbs.com/portraits-of-purpose/previleged.html?cause=carbon-neutrality">CARBON NEUTRALITY</a></p>\
                         </div>\
                     </div>\
                     <p>\
                       <a href="' + urlPathing + 'article-detail.html?post=he-wants-to-make-singapore-a-more-sustainable-and-liveable-city&pid=group-adobe-at-discovermore-recommended" class="articleTitle" data-component="Discover More-Recommended" data-title="He wants to make Singapore a more sustainable and liveable city">\
                      He wants to make Singapore a more sustainable and liveable city\
                       </a>\
                     </p>\
                   </div>\
                 </div>\
                 <div class="eachArticle">\
                   <a href="' + urlPathing + 'article-detail.html?post=solar-energy-takes-flight&pid=group-adobe-at-discovermore-recommended" data-component="Discover More-Recommended" data-title="Harnessing solar power while giving migratory birds a new home">\
                     <div class="imgWrap">\
                       <img src="' + urlPathing + 'images/articles/Black-Faced_Spoonbill-thumbnail.png">\
                     </div>\
                   </a>\
                   <div class="details">\
                     <div class="articleTagline">\
                         <div class="tagline">\
                           <p class="xxs"><a href="https://www.dbs.com/portraits-of-purpose/previleged.html?cause=carbon-neutrality">CARBON NEUTRALITY</a></p>\
                         </div>\
                     </div>\
                     <p>\
                       <a href="' + urlPathing + 'article-detail.html?post=solar-energy-takes-flight&pid=group-adobe-at-discovermore-recommended" class="articleTitle" data-component="Discover More-Recommended" data-title="Harnessing solar power while giving migratory birds a new home">\
                       Harnessing solar power while giving migratory birds a new home\
                       </a>\
                     </p>\
                   </div>\
                 </div>\
               </div>\
               <div id="popular" class="recCat">\
                    <div class="eachArticle">\
                    <a href="' + urlPathing + 'article-detail.html?post=starting-a-food-revolution-by-making-instant-noodles-that-are-good-for-health-and-the-planet&pid=group-adobe-at-discovermore-latest" data-component="Discover More-Latest" data-title="Starting a food revolution by making instant noodles that are good for health and the planet">\
                        <div class="imgWrap">\
                        <img src="' + urlPathing + 'images/articles/food-revolution-thumbnail.jpg">\
                        </div>\
                    </a>\
                    <div class="details">\
                        <div class="articleTagline">\
                            <div class="tagline">\
                            <p class="xxs"><a href="https://www.dbs.com/portraits-of-purpose/previleged.html?cause=carbon-neutrality">CARBON NEUTRALITY</a></p>\
                            </div>\
                        </div>\
                        <p>\
                        <a href="' + urlPathing + 'article-detail.html?post=starting-a-food-revolution-by-making-instant-noodles-that-are-good-for-health-and-the-planet&pid=group-adobe-at-discovermore-latest" class="articleTitle" data-component="Discover More-Latest" data-title="Starting a food revolution by making instant noodles that are good for health and the planet">\
                        Starting a food revolution by making instant noodles that are good for health and the planet\
                        </a>\
                        </p>\
                    </div>\
                    </div>\
                 <div class="eachArticle">\
                   <a href="' + urlPathing + 'article-detail.html?post=charging-up-an-electric-vehicle-revolution&pid=group-adobe-at-discovermore-popular" data-component="Discover More-Popular" data-title="Charging up an electric vehicle revolution">\
                     <div class="imgWrap">\
                       <img src="' + urlPathing + 'images/articles/a-thumbnail-EV-Charging-Station.jpg">\
                     </div>\
                   </a>\
                   <div class="details">\
                     <div class="articleTagline">\
                         <div class="tagline">\
                           <p class="xxs"><a href="https://www.dbs.com/portraits-of-purpose/previleged.html?cause=social-inclusion">SOCIAL INCLUSION</a></p>\
                         </div>\
                     </div>\
                     <p>\
                       <a href="' + urlPathing + 'article-detail.html?post=charging-up-an-electric-vehicle-revolution&pid=group-adobe-at-discovermore-popular" class="articleTitle" data-component="Discover More-Popular" data-title="Charging up an electric vehicle revolution">\
                       Charging up an electric vehicle revolution\
                       </a>\
                     </p>\
                   </div>\
                 </div>\
                 <div class="eachArticle">\
                   <a href="' + urlPathing + 'article-detail.html?post=paralympian-yip-pin-xiu-on-her-journey-to-victory-amid-a-pandemic&?pid=group-adobe-at-discovermore-popular" data-component="Discover More-Popular" data-title="Paralympian Yip Pin Xiu on her journey to victory amid a pandemic">\
                     <div class="imgWrap">\
                       <img src="' + urlPathing + 'images/articles/paralympian-thumb.png">\
                     </div>\
                   </a>\
                   <div class="details">\
                     <div class="articleTagline">\
                         <div class="tagline">\
                           <p class="xxs"><a href="https://www.dbs.com/portraits-of-purpose/previleged.html?cause=social-inclusion">SOCIAL INCLUSION</a></p>\
                         </div>\
                     </div>\
                     <p>\
                       <a href="' + urlPathing + 'article-detail.html?post=paralympian-yip-pin-xiu-on-her-journey-to-victory-amid-a-pandemic&?pid=group-adobe-at-discovermore-popular" class="articleTitle" data-component="Discover More-Popular" data-title="Paralympian Yip Pin Xiu on her journey to victory amid a pandemic">\
                       Paralympian Yip Pin Xiu on her journey to victory amid a pandemic\
                       </a>\
                     </p>\
                   </div>\
                 </div>\
               </div>\
               <div id="latest" class="recCat">\
                 <div class="eachArticle">\
                   <a href="' + urlPathing + 'article-detail.html?post=paralympian-yip-pin-xiu-on-her-journey-to-victory-amid-a-pandemic&pid=group-adobe-at-discovermore-latest" data-component="Discover More-Latest" data-title="Paralympian Yip Pin Xiu on her journey to victory amid a pandemic">\
                     <div class="imgWrap">\
                       <img src="' + urlPathing + 'images/articles/paralympian-thumb.png">\
                     </div>\
                   </a>\
                   <div class="details">\
                     <div class="articleTagline">\
                         <div class="tagline">\
                           <p class="xxs"><a href="https://www.dbs.com/portraits-of-purpose/previleged.html?cause=social-inclusion">SOCIAL INCLUSION</a></p>\
                         </div>\
                     </div>\
                     <p>\
                       <a href="' + urlPathing + 'article-detail.html?post=paralympian-yip-pin-xiu-on-her-journey-to-victory-amid-a-pandemic&pid=group-adobe-at-discovermore-latest" class="articleTitle" data-component="Discover More-Latest" data-title="Paralympian Yip Pin Xiu on her journey to victory amid a pandemic">\
                       Paralympian Yip Pin Xiu on her journey to victory amid a pandemic\
                       </a>\
                     </p>\
                   </div>\
                 </div>\
                 <div class="eachArticle">\
                   <a href="' + urlPathing + 'article-detail.html?post=the-blossoming-business-thats-building-a-better-world&pid=group-adobe-at-discovermore-latest" data-component="Discover More-Latest" data-title="The blossoming business that’s building a better world">\
                     <div class="imgWrap">\
                       <img src="' + urlPathing + 'images/articles/SG-62-thumbnail.jpg">\
                     </div>\
                   </a>\
                   <div class="details">\
                     <div class="articleTagline">\
                         <div class="tagline">\
                           <p class="xxs"><a href="https://www.dbs.com/portraits-of-purpose/previleged.html?cause=social-inclusion">SOCIAL INCLUSION</a></p>\
                         </div>\
                     </div>\
                     <p>\
                       <a href="' + urlPathing + 'article-detail.html?post=the-blossoming-business-thats-building-a-better-world&pid=group-adobe-at-discovermore-latest" class="articleTitle" data-component="Discover More-Latest" data-title="The blossoming business that’s building a better world">\
                       The blossoming business that’s building a better world\
                       </a>\
                     </p>\
                   </div>\
                 </div>\
                 <div class="eachArticle">\
                   <a href="' + urlPathing + 'article-detail.html?post=the-buzz-behind-the-artificial-pollinators-of-tomorrow&pid=group-adobe-at-discovermore-latest" data-component="Discover More-Latest" data-title="The buzz behind the artificial pollinators of tomorrow">\
                     <div class="imgWrap">\
                       <img src="' + urlPathing + 'images/articles/SG-61-thumbnail.jpg">\
                     </div>\
                   </a>\
                   <div class="details">\
                     <div class="articleTagline">\
                         <div class="tagline">\
                           <p class="xxs"><a href="https://www.dbs.com/portraits-of-purpose/previleged.html?cause=technology-transformation">TECHNOLOGY TRANSFORMATION</a></p>\
                         </div>\
                     </div>\
                     <p>\
                       <a href="' + urlPathing + 'article-detail.html?post=the-buzz-behind-the-artificial-pollinators-of-tomorrow&pid=group-adobe-at-discovermore-latest" class="articleTitle" data-component="Discover More-Latest" data-title="The buzz behind the artificial pollinators of tomorrow">\
                       The buzz behind the artificial pollinators of tomorrow\
                       </a>\
                     </p>\
                   </div>\
                 </div>\
               </div>\
               <div id="lastRead" class="recCat">\
               <div class="eachArticle">\
               <a href="' + urlPathing + 'article-detail.html?post=charging-up-an-electric-vehicle-revolution&pid=group-adobe-at-discovermore-recommended" data-component="Discover More-Recommended" data-title="Charging up an electric vehicle revolution">\
                 <div class="imgWrap">\
                   <img src="' + urlPathing + 'images/articles/a-thumbnail-EV-Charging-Station.jpg">\
                 </div>\
               </a>\
               <div class="details">\
                 <div class="articleTagline">\
                     <div class="tagline">\
                       <p class="xxs"><a href="https://www.dbs.com/default.page#">CARBON NEUTRALITY</a></p>\
                     </div>\
                 </div>\
                 <p>\
                   <a href="' + urlPathing + 'article-detail.html?post=charging-up-an-electric-vehicle-revolution&pid=group-adobe-at-discovermore-recommended" class="articleTitle" data-component="Discover More-Recommended" data-title="Charging up an electric vehicle revolution">\
                   Charging up an electric vehicle revolution\
                   </a>\
                 </p>\
               </div>\
             </div>\
             <div class="eachArticle">\
             <a href="' + urlPathing + 'article-detail.html?post=feeding-and-healing-cities&pid=group-adobe-at-discovermore-latest" data-component="Discover More-Latest" data-title="Feeding the Healing Cities">\
                 <div class="imgWrap">\
                 <img src="' + urlPathing + 'images/articles/feeding-thumnail.png">\
                 </div>\
             </a>\
             <div class="details">\
                 <div class="articleTagline">\
                     <div class="tagline">\
                     <p class="xxs"><a href="https://www.dbs.com/default.page#">CARBON NEUTRALITY</a></p>\
                     </div>\
                 </div>\
                 <p>\
                 <a href="' + urlPathing + 'article-detail.html?post=feeding-and-healing-cities&pid=group-adobe-at-discovermore-latest" class="articleTitle" data-component="Discover More-Latest" data-title="Feeding the Healing Cities">\
                 Feeding the Healing Cities\
                 </a>\
                 </p>\
             </div>\
             </div>\
             <div class="eachArticle">\
             <a href="' + urlPathing + 'article-detail.html?post=preparing-for-tomorrow%E2%80%99s-digital-economy-whether-you%E2%80%99re-7-or-70?&pid=group-adobe-at-discovermore-latest" data-component="Discover More-Latest" data-title="Preparing for tomorrow’s digital economy, whether you’re 7 or 70">\
               <div class="imgWrap">\
                 <img src="' + urlPathing + 'images/articles/preparing-thumbnail.jpg">\
               </div>\
             </a>\
             <div class="details">\
               <div class="articleTagline">\
                   <div class="tagline">\
                     <p class="xxs"><a href="https://www.dbs.com/default.page#">SOCIAL INCLUSION</a></p>\
                   </div>\
               </div>\
               <p>\
                 <a href="' + urlPathing + 'article-detail.html?post=preparing-for-tomorrow%E2%80%99s-digital-economy-whether-you%E2%80%99re-7-or-70?&pid=group-adobe-at-discovermore-latest" class="articleTitle" data-component="Discover More-Latest" data-title="Preparing for tomorrow’s digital economy, whether you’re 7 or 70">\
                 Preparing for tomorrow’s digital economy, whether you’re 7 or 70\
                 </a>\
               </p>\
             </div>\
           </div>\
               </div>\
             </div>\
             <div class="bottom-row">\
               <div class="catBtn active" data-id="recommended" data-head="Recommended for you" data-subhead="Based on your reading history.">Recommended</div>\
               <div class="catBtn" data-id="popular" data-head="Popular" data-subhead="Here are some of our most-read stories">Popular</div>\
               <div class="catBtn" data-id="latest" data-head="Latest" data-subhead="Catch up with our newest stories">Latest</div>\
               <div class="catBtn" data-id="lastRead" data-head="Last read" data-subhead="Enjoyed these stories? Share them with someone">Last Read</div>\
             </div>\
           </section>';


        //$('.recommend').append(appendRecommendPanel);

        $('.catBtn').on('click', function() {
            $('.catBtn').removeClass('active');
            $(this).addClass('active');
            var id = $(this).attr('data-id');

            $('.top-row .head').html($(this).attr('data-head'));
            $('.top-row .subhead').html($(this).attr('data-subhead'));

            $('.recCat').each(function() {
                $(this).removeClass('active');
                if ($(this).attr('id') == id) {
                    $(this).addClass('active');
                }
            });
        });

        $('.discover.close-btn').on('click', function() {
                dataLayer.push({
      'event': 'interactionEvent', 
      'eventCategory': 'covid19-widget',
      'eventAction' : 'click',
      'eventLabel' : 'group - Close button - Click'
      }); 
          Cookies.set('recBanner', '1', { expires: 365 });
          $('.layout-recommendBtn a').removeClass('active');
          closeRecommendPanel();
        });
    }
    $("body").append("<div class='recommend'></div>");
    //addRecommendPanel();

    function closeRecommendPanel() {
        $('.layout-recommendPanel').removeClass('open');
    }

    function openRecommendPanel() {
        $('.layout-recommendPanel').addClass('open');
    }

    var appendRecommendBtn = '\
         <section class="layout-recommendBtn">\
           <a id="recBtn">Discover Portraits of Purpose</a>\
         </section>';
    //$('.recommend').append(appendRecommendBtn);

    $(document).ready(function() {
       // $("body").prepend("<div class='recommend'></div>");
        $('.layout-recommendBtn a').on('click', function() {

            if ($(this).hasClass('active')) {
                Cookies.set('recBanner', '1', { expires: 365 });
                $(this).removeClass('active');
                closeRecommendPanel();
            } else {
                $(this).addClass('active');
                $('.layout-recommendBtn a').removeClass('wiggle');
                openRecommendPanel();
            }
        });
    });


    if (typeof(Cookies.get('recBanner')) == 'undefined') {
        //document.getElementById('recBtn').click()
        Cookies.set('recBanner', '1', { expires: 365 });
        $('.layout-recommendBtn a').addClass('active');
       // openRecommendPanel();
    } else {
        var recBannerStatus = Cookies.get('recBanner');
        if (recBannerStatus == 1) {
            //do shake
            $('.layout-recommendBtn a').addClass('wiggle');
        }
    }

    ///Recommend Panel End
    
    
    // DO NOT TOUCH - FOR DISCOVER MORE
    
  }  

  
  
	//image mapping library*/  
    //start
    /*! Image Map Resizer (imageMapResizer.min.js ) - v1.0.10 - 2019-04-10
     *  Desc: Resize HTML imageMap to scaled image.
     *  Copyright: (c) 2019 David J. Bradshaw - dave@bradshaw.net
     *  License: MIT
     */
    !function(){"use strict";function r(){function e(){var r={width:u.width/u.naturalWidth,height:u.height/u.naturalHeight},a={width:parseInt(window.getComputedStyle(u,null).getPropertyValue("padding-left"),10),height:parseInt(window.getComputedStyle(u,null).getPropertyValue("padding-top"),10)};i.forEach(function(e,t){var n=0;o[t].coords=e.split(",").map(function(e){var t=1==(n=1-n)?"width":"height";return a[t]+Math.floor(Number(e)*r[t])}).join(",")})}function t(e){return e.coords.replace(/ *, */g,",").replace(/ +/g,",")}function n(){clearTimeout(d),d=setTimeout(e,250)}function r(e){return document.querySelector('img[usemap="'+e+'"]')}var a=this,o=null,i=null,u=null,d=null;"function"!=typeof a._resize?(o=a.getElementsByTagName("area"),i=Array.prototype.map.call(o,t),u=r("#"+a.name)||r(a.name),a._resize=e,u.addEventListener("load",e,!1),window.addEventListener("focus",e,!1),window.addEventListener("resize",n,!1),window.addEventListener("readystatechange",e,!1),document.addEventListener("fullscreenchange",e,!1),u.width===u.naturalWidth&&u.height===u.naturalHeight||e()):a._resize()}function e(){function t(e){e&&(!function(e){if(!e.tagName)throw new TypeError("Object is not a valid DOM element");if("MAP"!==e.tagName.toUpperCase())throw new TypeError("Expected <MAP> tag, found <"+e.tagName+">.")}(e),r.call(e),n.push(e))}var n;return function(e){switch(n=[],typeof e){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(e||"map"),t);break;case"object":t(e);break;default:throw new TypeError("Unexpected data type ("+typeof e+").")}return n}}"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e():window.imageMapResize=e(),"jQuery"in window&&(window.jQuery.fn.imageMapResize=function(){return this.filter("map").each(r).end()})}();
    //# sourceMappingURL=imageMapResizer.map
    
    //end
    //image mapping library*/  
  

    $('map').imageMapResize();
 
  
});	




function removeButton(){
  document.querySelectorAll('button.btn.btn-primary').forEach((button) => {
      if (button.textContent.trim() === 'display none') {
        button.style.display = 'none';
      }
  });
}




/*For https://dbswebprv-grp-p02.corp.dbs.com/gsmc-grp/sustainability/impact-beyond-banking/people-of-purpose */
function countryChange() {
        const leftContentBox = document.querySelector('.left-content-box');
        const rightContentBox = document.querySelector('.right-content-box');

        let LeftContentClasses = leftContentBox.className.split(' ');
        let rightContentClasses = rightContentBox.className.split(' ');
    
        // if (leftContentBox.classList.contains('active')) {

        if(LeftContentClasses.indexOf('active') !== -1){
            document.querySelectorAll('.skill-country-marker').forEach(function(marker) {
                marker.addEventListener('click', function() {
                    document.querySelectorAll('.skill-map-card').forEach(function(card) {
                        // card.classList.remove('active');
                        card.className = card.className.replace(/\bactive\b/g, '');
                    });
                    document.querySelectorAll('.skill-country-marker').forEach(function(marker) {
                        // marker.classList.remove('active');
                        marker.className = marker.className.replace(/\bactive\b/g, '');
                    });

                    this.className += ' active';
                    const countryId = this.getAttribute('data-country');

                    // document.querySelector(`.left-content-box #${countryId}`).classList.add('active');
                    // this.classList.add('active');

                    var leftContentElement = document.querySelector(`.left-content-box #${countryId}`);
                    leftContentElement.className += ' active';
                    
                });
            });
        }
    
        // if (rightContentBox.classList.contains('active')) {
        if(rightContentClasses.indexOf('active') !== -1){
            console.log('right');
            document.querySelectorAll('.food-country-marker').forEach(function(marker) {
                marker.addEventListener('click', function() {
                    document.querySelectorAll('.food-map-card').forEach(function(card) {
                        // card.classList.remove('active');
                        card.className = card.className.replace(/\bactive\b/g, '');
                    });
                    document.querySelectorAll('.food-country-marker').forEach(function(marker) {
                        // marker.classList.remove('active');
                        marker.className = marker.className.replace(/\bactive\b/g, '');
                    });

                    this.className += ' active';
                    const countryId = this.getAttribute('data-country');

                    // document.querySelector(`.right-content-box #${countryId}`).classList.add('active');
                    // this.classList.add('active');

                    var rightContentElement = document.querySelector(`.right-content-box #${countryId}`);
                    rightContentElement.className += ' active';
                });
            });
        }
    }
    
    function showPanel() {
        const tabs = document.querySelectorAll('.tab-container .tab-item');
        const allContent = document.querySelectorAll('.map-section .content-box');
    
        tabs.forEach(function(tab, index) {
            tab.addEventListener('click', function() {

                tabs.forEach(function(tab) {
                    // tab.classList.remove('active');
                    tab.className = tab.className.replace(/\bactive\b/g, '');
                });

                // this.classList.add('active');
                this.className += ' active';

                allContent.forEach(function(content) {
                    // content.classList.remove('active');
                    content.className = content.className.replace(/\bactive\b/g, '');
                });

                // allContent[index].classList.add('active');
                allContent[index].className += ' active';
    
                countryChange();
            });
        });
    }

    function initSwiper(){
        var swiper = new Swiper(".mySwiper", {
            spaceBetween: 30,
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
          });
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(() => {
        initSwiper();
      
        removeButton();
        countryChange();
        showPanel();
      },3000);
    });





</script>

</body>
</html>
