<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>blur.html</title>
</head>
<body>
<script>import{i as e,C as t,E as i,b as n,a as s,j as r,h as o,l as a,k as d}from"./playback-adapter-60948683.js";function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u.apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function _(e,t,i){return _=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return i&&p(s,i.prototype),s},_.apply(null,arguments)}function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return _(e,arguments,m(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),p(i,e)},f(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var y=0;function g(e){return"__private_"+y+++"_"+e}function b(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var A={};A.CustomEvent="function"==typeof CustomEvent?CustomEvent:function(e){return t[e]=new t("").constructor[e],t;function t(e,t){t||(t={});var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail),i}}("prototype");var w,P,T,C=A.CustomEvent,k=g("mediaElement"),S=g("currentTime"),O=g("enabled"),L=function(){function e(e){Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),this.seeking=void 0,b(this,k)[k]=e,b(this,S)[S]=0,b(this,O)[O]=!1,this.seeking=!1,this.t=this.t.bind(this),this.i=this.i.bind(this),this.h=this.h.bind(this),this.enable()}var t=e.prototype;return t.i=function(){this.seeking=!0},t.h=function(){this.seeking=!1},t.t=function(){var e,t;this.seeking||null!=(e=b(this,k)[k])&&e.paused||(b(this,S)[S]=null==(t=b(this,k)[k])?void 0:t.currentTime)},t.enable=function(){var e,t,i;b(this,O)[O]||(null==(e=b(this,k)[k])||e.addEventListener("seeking",this.i),null==(t=b(this,k)[k])||t.addEventListener("seeked",this.h),null==(i=b(this,k)[k])||i.addEventListener("timeupdate",this.t),b(this,O)[O]=!0)},t.disable=function(){var e,t,i;b(this,O)[O]&&(null==(e=b(this,k)[k])||e.removeEventListener("seeking",this.i),null==(t=b(this,k)[k])||t.removeEventListener("seeked",this.h),null==(i=b(this,k)[k])||i.removeEventListener("timeupdate",this.t),b(this,O)[O]=!1)},t.play=function(){var e=this;return new Promise((function(t){var i;t(null==(i=b(e,k)[k])?void 0:i.play())}))},t.pause=function(){var e;null==(e=b(this,k)[k])||e.pause()},t.reset=function(){b(this,S)[S]=0,b(this,O)[O]=!1,this.seeking=!1,this.enable()},t.destroy=function(){b(this,S)[S]=0,b(this,O)[O]=!1,this.seeking=!1,this.disable(),b(this,k)[k]=void 0},h(e,[{key:"enabled",get:function(){return b(this,O)[O]}},{key:"currentTime",get:function(){return b(this,S)[S]}},{key:"duration",get:function(){var e;return null==(e=b(this,k)[k])?void 0:e.duration}},{key:"muted",get:function(){var e;return null==(e=b(this,k)[k])?void 0:e.muted}},{key:"volume",get:function(){var e;return null==(e=b(this,k)[k])?void 0:e.volume}}]),e}(),R=function(){function e(){this.delegate=document.createDocumentFragment()}var t=e.prototype;return t.addEventListener=function(){this.delegate.addEventListener.apply(this.delegate,[].slice.call(arguments))},t.dispatchEvent=function(){return this.delegate.dispatchEvent.apply(this.delegate,[].slice.call(arguments))},t.removeEventListener=function(){return this.delegate.removeEventListener.apply(this.delegate,[].slice.call(arguments))},e}(),I=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];(T=w||(w={})).MEDIA_START="MediaStart",T.MEDIA_IMPRESSION="MediaImpression",T.MEDIA_STOP="MediaStop",T.MEDIA_CUE_POINTS_CHANGE="MediaCuePointsChange",T.MEDIA_RESUMED="MediaResumed",function(e){e.AD_ERROR="AdError",e.AD_BUFFERING="AdBuffering",e.LOADED="AdLoaded",e.IMPRESSION="AdImpression",e.STARTED="AdStarted",e.FIRST_QUARTILE="AdFirstQuartile",e.MIDPOINT="AdMidpoint",e.THIRD_QUARTILE="AdThirdQuartile",e.AD_PROGRESS="AdProgress",e.COMPLETE="AdComplete",e.CLICK="AdClick",e.PAUSED="AdPaused",e.RESUMED="AdResumed",e.SKIPPED="AdSkipped",e.SKIPPABLE_STATE_CHANGED="AdSkippableStateChanged",e.VOLUME_CHANGED="AdVolumeChanged",e.VOLUME_MUTED="AdMuted",e.AD_METADATA="AdMetadata",e.AD_BREAK_READY="AdBreakReady",e.CONTENT_PAUSE_REQUESTED="AdContentPauseRequested",e.CONTENT_RESUME_REQUESTED="AdContentResumeRequested",e.ALL_ADS_COMPLETED="AdAllAdsCompleted",e.DURATION_CHANGE="AdDurationChange",e.INTERACTION="AdInteraction",e.LINEAR_CHANGED="AdLinearChanged",e.LOG="AdLog",e.USER_CLOSE="AdUserClose",e.AD_CAN_PLAY="AdCanPlay",e.EXPANDED_CHANGED="AdExpandedChanged",e.VIEWABLE_IMPRESSION="AdViewableImpression"}(P||(P={}));var N=u({},P,w),M=function(){this.disableCustomPlaybackForIOS10Plus=!1,this.autoResize=!0,this.clickTrackingElement=void 0},D=function(e){function t(){var t;return(t=e.call.apply(e,[this].concat([].slice.call(arguments)))||this).errorCode=void 0,t.innerError=void 0,t.type=void 0,t.vastErrorCode=void 0,t}return c(t,e),t}(f(Error));D.ERROR_CODE_ADS_MANAGER_LOADED_TIMEOUT=9e3,D.ERROR_CODE_REQUEST_ADS_TIMEOUT=9001;var x=g("mediaElement"),B=g("adElement"),U=g("customPlayhead"),V=g("adsRenderingSettings"),F=g("ima"),j=g("adDisplayContainer"),W=g("adsManager"),z=g("width"),G=g("height"),H=g("adsLoader"),$=g("playerOptions"),q=g("resizeObserver"),Y=g("currentAd"),Q=g("loadedAd"),K=g("mediaStartTriggered"),J=g("mediaImpressionTriggered"),X=g("mediaInActivation"),Z=g("customPlaybackTimeAdjustedOnEnded"),ee=g("cuePoints"),te=g("adCurrentTime"),ie=g("adDuration"),ne=g("startAdCallback"),se=g("adsManagerLoadedTimeout"),re=g("requestAdsTimeout"),oe=g("wasExternallyPaused"),ae=g("lastNonZeroAdVolume"),de=g("activatePromise"),le=function(e){function t(t,i,n,s,r){var o;void 0===s&&(s=new t.AdsRenderingSettings),void 0===r&&(r=new M),o=e.call(this)||this,Object.defineProperty(v(o),x,{writable:!0,value:void 0}),Object.defineProperty(v(o),B,{writable:!0,value:void 0}),Object.defineProperty(v(o),U,{writable:!0,value:void 0}),Object.defineProperty(v(o),V,{writable:!0,value:void 0}),Object.defineProperty(v(o),F,{writable:!0,value:void 0}),Object.defineProperty(v(o),j,{writable:!0,value:void 0}),Object.defineProperty(v(o),W,{writable:!0,value:void 0}),Object.defineProperty(v(o),z,{writable:!0,value:void 0}),Object.defineProperty(v(o),G,{writable:!0,value:void 0}),Object.defineProperty(v(o),H,{writable:!0,value:void 0}),Object.defineProperty(v(o),$,{writable:!0,value:void 0}),Object.defineProperty(v(o),q,{writable:!0,value:void 0}),Object.defineProperty(v(o),Y,{writable:!0,value:void 0}),Object.defineProperty(v(o),Q,{writable:!0,value:void 0}),Object.defineProperty(v(o),K,{writable:!0,value:!1}),Object.defineProperty(v(o),J,{writable:!0,value:!1}),Object.defineProperty(v(o),X,{writable:!0,value:!1}),Object.defineProperty(v(o),Z,{writable:!0,value:!1}),Object.defineProperty(v(o),ee,{writable:!0,value:[]}),Object.defineProperty(v(o),te,{writable:!0,value:void 0}),Object.defineProperty(v(o),ie,{writable:!0,value:void 0}),Object.defineProperty(v(o),ne,{writable:!0,value:void 0}),Object.defineProperty(v(o),se,{writable:!0,value:void 0}),Object.defineProperty(v(o),re,{writable:!0,value:void 0}),Object.defineProperty(v(o),oe,{writable:!0,value:!1}),Object.defineProperty(v(o),ae,{writable:!0,value:1}),Object.defineProperty(v(o),de,{writable:!0,value:Promise.resolve()}),b(v(o),x)[x]=i,b(v(o),B)[B]=n,b(v(o),F)[F]=t,b(v(o),$)[$]=r,b(v(o),V)[V]=s,b(v(o),V)[V].restoreCustomPlaybackStateOnAdBreakComplete=!0,r.disableCustomPlaybackForIOS10Plus&&!b(v(o),x)[x].hasAttribute("playsinline")&&b(v(o),x)[x].setAttribute("playsinline",""),b(v(o),F)[F].settings.setDisableCustomPlaybackForIOS10Plus(r.disableCustomPlaybackForIOS10Plus),b(v(o),U)[U]=new L(b(v(o),x)[x]),o.o=o.o.bind(v(o)),I.forEach((function(e){b(v(o),x)[x].addEventListener(e,o.o)})),o.u=o.u.bind(v(o)),o.l=o.l.bind(v(o));var a=b(v(o),x)[x],d=a.offsetHeight,l=a.offsetWidth;return b(v(o),z)[z]=l,b(v(o),G)[G]=d,r.autoResize&&window.ResizeObserver&&(b(v(o),q)[q]=new window.ResizeObserver((function(e){return o.v(e)})),b(v(o),q)[q].observe(b(v(o),x)[x])),o}c(t,e);var i=t.prototype;return i.activate=function(){var e=this;if(!b(this,K)[K]&&!b(this,X)[X]&&(b(this,X)[X]=!0,b(this,x)[x].paused)){var t=function(){return b(e,x)[x].pause(),new Promise((function(t){setTimeout((function(){b(e,X)[X]=!1,t()}),1)}))};b(this,de)[de]=new Promise((function(t){return t(b(e,x)[x].play())})).then(t).catch(t)}},i.playAds=function(e){this.m(e)},i.loadAds=function(e,t){this.m(e,!1,t)},i.p=function(){var e=this;return b(this,de)[de].then((function(){return new Promise((function(t){return t(b(e,x)[x].play())}))}))},i.m=function(e,t,i){var n=this;void 0===t&&(t=!0),this.reset(),this.O(),b(this,F)[F].settings.setAutoPlayAdBreaks(t),b(this,x)[x].ended&&(b(this,U)[U].reset(),b(this,x)[x].currentTime=0),b(this,ne)[ne]=i,e.linearAdSlotWidth=b(this,z)[z],e.linearAdSlotHeight=b(this,G)[G],e.nonLinearAdSlotWidth=b(this,z)[z],e.nonLinearAdSlotHeight=b(this,G)[G],null==e.contentDuration&&(e.contentDuration=-3),b(this,se)[se]=window.setTimeout((function(){var e=new D("No adsManagerLoadedEvent within 5000ms.");e.errorCode=D.ERROR_CODE_ADS_MANAGER_LOADED_TIMEOUT,n.j(e)}),5e3),b(this,re)[re]=window.setTimeout((function(){var e=new D("No response for ads-request within 10000ms.");e.errorCode=D.ERROR_CODE_REQUEST_ADS_TIMEOUT,n.j(e)}),1e4),b(this,H)[H].requestAds(e)},i.O=function(){b(this,j)[j]=new(b(this,F)[F].AdDisplayContainer)(b(this,B)[B],b(this,$)[$].disableCustomPlaybackForIOS10Plus?void 0:b(this,x)[x],b(this,$)[$].clickTrackingElement),b(this,H)[H]=new(b(this,F)[F].AdsLoader)(b(this,j)[j]),b(this,H)[H].addEventListener(b(this,F)[F].AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.u,!1),b(this,H)[H].addEventListener(b(this,F)[F].AdErrorEvent.Type.AD_ERROR,this.l,!1)},i.skipAd=function(){b(this,W)[W]&&b(this,W)[W].skip()},i.discardAdBreak=function(){b(this,W)[W]&&b(this,W)[W].discardAdBreak()},i.play=function(){var e=this;b(this,oe)[oe]=!1,!b(this,U)[U].enabled&&b(this,W)[W]?b(this,W)[W].resume():b(this,se)[se]||this.p().then((function(){})).catch((function(){e.dispatchEvent(new C("pause"))}))},i.pause=function(){b(this,oe)[oe]=!0,!b(this,U)[U].enabled&&b(this,W)[W]?b(this,W)[W].pause():b(this,x)[x].pause()},i.g=function(e){b(this,ee)[ee]=[].concat(e),this.dispatchEvent(new C(N.MEDIA_CUE_POINTS_CHANGE,{detail:{cuePoints:[].concat(b(this,ee)[ee])}}))},i.A=function(e){var t=this.cuePoints.indexOf(e);t>-1&&(b(this,ee)[ee].splice(t,1),this.g(b(this,ee)[ee]))},i.resizeAd=function(e,t){b(this,z)[z]=e,b(this,G)[G]=t,b(this,W)[W]&&b(this,W)[W].resize(e,t,this.k()),b(this,B)[B].style.width=e+"px",b(this,B)[B].style.height=t+"px"},i.reset=function(e){void 0===e&&(e=!1),e&&(b(this,J)[J]=!1,b(this,K)[K]=!1,b(this,Z)[Z]=!1),this.C(),b(this,ee)[ee]=[],b(this,oe)[oe]=!1,b(this,ne)[ne]=void 0,b(this,W)[W]&&b(this,W)[W].destroy(),b(this,W)[W]=void 0,b(this,F)[F].settings.setAutoPlayAdBreaks(!0),e&&this.P(),b(this,B)[B].style.display="none"},i.P=function(){b(this,H)[H]&&(b(this,H)[H].removeEventListener(b(this,F)[F].AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.u,!1),b(this,H)[H].removeEventListener(b(this,F)[F].AdErrorEvent.Type.AD_ERROR,this.l,!1),b(this,H)[H].destroy()),b(this,j)[j]&&b(this,j)[j].destroy()},i.destroy=function(){var e,t,i,n,s=this;this.reset(!0),b(this,U)[U].destroy(),I.forEach((function(e){b(s,x)[x].removeEventListener(e,s.o)})),null==(e=b(this,H)[H])||e.removeEventListener(b(this,F)[F].AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.u,!1),null==(t=b(this,j)[j])||t.destroy(),null==(i=b(this,H)[H])||i.destroy(),b(this,J)[J]=!1,b(this,Z)[Z]=!1,b(this,K)[K]=!1,null==(n=b(this,q)[q])||n.disconnect()},i.isCustomPlaybackUsed=function(){return!1===b(this,F)[F].settings.getDisableCustomPlaybackForIOS10Plus()&&!b(this,B)[B].querySelector("video")},i.C=function(){window.clearTimeout(b(this,se)[se]),window.clearTimeout(b(this,re)[re]),b(this,se)[se]=void 0,b(this,re)[re]=void 0,b(this,Y)[Y]=void 0,b(this,te)[te]=void 0,b(this,ie)[ie]=void 0,b(this,B)[B].style.display="none",b(this,B)[B].classList.remove("nonlinear"),b(this,W)[W]&&this.R()},i.o=function(e){var t=this;if(b(this,U)[U].enabled||"volumechange"===e.type){if("timeupdate"===e.type){if(b(this,W)[W]){var i=b(this,W)[W].getCuePoints().filter((function(e){return e>=0&&e<b(t,U)[U].currentTime})).pop();this.A(i)}!b(this,J)[J]&&b(this,K)[K]&&b(this,x)[x].currentTime>=.5&&(this.dispatchEvent(new C(N.MEDIA_IMPRESSION)),b(this,J)[J]=!0)}if("play"!==e.type||b(this,K)[K]||b(this,X)[X]||(this.dispatchEvent(new C(N.MEDIA_START)),b(this,K)[K]=!0),"ended"===e.type&&(this.isCustomPlaybackUsed()&&b(this,x)[x].currentTime===b(this,x)[x].duration&&b(this,ee)[ee].indexOf(-1)>-1&&(b(this,x)[x].currentTime=b(this,x)[x].duration-1e-5,b(this,Z)[Z]=!0),b(this,H)[H].contentComplete(),b(this,W)[W]||this.T()),!window.ResizeObserver&&b(this,$)[$].autoResize&&"loadedmetadata"===e.type){var n=b(this,x)[x],s=n.offsetHeight,r=n.offsetWidth;b(this,z)[z]=r,b(this,G)[G]=s,this.R()}b(this,X)[X]&&"volumechange"!==e.type||this.dispatchEvent(new C(e.type))}},i.S=function(e){var t=this,i=b(this,F)[F].AdEvent;switch(e.type){case i.Type.LOADED:var n=e.getAd();b(this,ne)[ne]&&0===b(this,ee)[ee].length?b(this,ne)[ne]({ad:n,start:function(){t.M(),b(t,ne)[ne]=void 0},startWithoutReset:function(){t.M()}}):b(this,Q)[Q]=n;break;case i.Type.AD_BREAK_READY:this.C(),b(this,ne)[ne]?(b(this,ne)[ne]({ad:b(this,Q)[Q],adBreakTime:e.getAdData().adBreakTime,start:function(){t.M(),b(t,ne)[ne]=void 0},startWithoutReset:function(){t.M()}}),b(this,Q)[Q]=void 0):this.M();break;case i.Type.STARTED:var s=b(this,Y)[Y]=e.getAd();s.getAdPodInfo().getAdPosition()>1&&b(this,W)[W].setVolume(b(this,W)[W].getVolume()),b(this,B)[B].classList.remove("nonlinear"),this.R(),s.isLinear()?(b(this,U)[U].disable(),b(this,ie)[ie]=s.getDuration(),b(this,te)[te]=0):(b(this,B)[B].classList.add("nonlinear"),this.I()),b(this,B)[B].style.display="",b(this,oe)[oe]&&(b(this,oe)[oe]=!1,b(this,W)[W].pause());break;case i.Type.ALL_ADS_COMPLETED:if(b(this,Z)[Z])return;this.isCustomPlaybackUsed()&&Boolean(b(this,Y)[Y])&&-1!==b(this,Y)[Y].getAdPodInfo().getTimeOffset()&&this.I(),this.reset();break;case i.Type.CONTENT_PAUSE_REQUESTED:this.C(),b(this,Y)[Y]=e.getAd(),b(this,B)[B].style.display="",b(this,x)[x].pause(),this.R(),b(this,Y)[Y]&&this.A(b(this,Y)[Y].getAdPodInfo().getTimeOffset()),b(this,W)[W].setVolume(b(this,x)[x].muted?0:b(this,x)[x].volume),b(this,U)[U].disable(),b(this,ie)[ie]=b(this,Y)[Y].getDuration(),b(this,te)[te]=0;break;case i.Type.CONTENT_RESUME_REQUESTED:var r=Boolean(b(this,Y)[Y]);if(r){var o=b(this,W)[W].getVolume();b(this,x)[x].muted=0===o,b(this,x)[x].volume=b(this,ae)[ae]}b(this,Z)[Z]&&(b(this,x)[x].currentTime=b(this,x)[x].duration+1,b(this,Z)[Z]=!1),b(this,x)[x].ended?(this.reset(),this.T()):this.C(),r&&(b(this,oe)[oe]=!1,this.I());break;case i.Type.AD_METADATA:this.g(b(this,W)[W].getCuePoints()),-1===b(this,ee)[ee].indexOf(0)&&(b(this,ne)[ne]?b(this,ne)[ne]({start:function(){t.I(),b(t,ne)[ne]=void 0},startWithoutReset:function(){t.I()}}):this.I());break;case i.Type.AD_PROGRESS:var a=e.getAdData();b(this,te)[te]=a.currentTime,b(this,ie)[ie]=a.duration;break;case i.Type.LOG:var d=e.getAdData();b(this,ne)[ne]?b(this,ne)[ne]({start:function(){t.I(),b(t,ne)[ne]=void 0},startWithoutReset:function(){t.I()}}):d.adError&&!b(this,Y)[Y]&&this.I();break;case i.Type.VOLUME_CHANGED:var l=b(this,W)[W].getVolume();l>0&&(b(this,ae)[ae]=l)}},i.l=function(e){this.j(this.B(e))},i.u=function(e){var t=this,i=b(this,F)[F],n=i.AdEvent,s=i.AdErrorEvent.Type.AD_ERROR;window.clearTimeout(b(this,se)[se]);var r=b(this,W)[W]=e.getAdsManager(b(this,U)[U],b(this,V)[V]);Object.keys(n.Type).forEach((function(e){r.addEventListener(n.Type[e],(function(i){if(t.S(i),N[e]){var n=["LOG","AD_PROGRESS"].indexOf(e)>-1;t.dispatchEvent(new C(N[e],{detail:{ad:i.getAd()||b(t,Y)[Y],adData:n?i.getAdData():{}}}))}}))})),r.addEventListener(s,(function(e){return t.j(t.B(e))}));try{var o;r.init(b(this,z)[z],b(this,G)[G],this.k()),r.setVolume(b(this,x)[x].muted?0:b(this,x)[x].volume),null==(o=b(this,j)[j])||o.initialize(),b(this,ne)[ne]||this.M()}catch(e){this.j(new D(e.message))}},i.M=function(){if(b(this,K)[K]||(this.dispatchEvent(new C(N.MEDIA_START)),b(this,K)[K]=!0),b(this,W)[W])try{b(this,W)[W].start()}catch(e){this.j(new D(e.message))}else this.I()},i.T=function(){var e=this;setTimeout((function(){b(e,J)[J]=!1,b(e,K)[K]=!1,b(e,Z)[Z]=!1,e.dispatchEvent(new C(N.MEDIA_STOP))}),1)},i.v=function(e){for(var t,i=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return E(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?E(e,t):void 0}}(e))){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(t=i()).done;){var n=t.value;n.contentBoxSize&&1===n.contentBoxSize.length?(b(this,z)[z]=n.contentBoxSize[0].inlineSize,b(this,G)[G]=n.contentBoxSize[0].blockSize):n.contentBoxSize&&n.contentBoxSize.inlineSize?(b(this,z)[z]=n.contentBoxSize.inlineSize,b(this,G)[G]=n.contentBoxSize.blockSize):(b(this,z)[z]=n.contentRect.width,b(this,G)[G]=n.contentRect.height)}this.R()},i.R=function(){if(b(this,$)[$].autoResize&&b(this,W)[W]){var e=b(this,Y)[Y],t=this.k();e&&!e.isLinear()?e&&(e.getWidth()>b(this,z)[z]||e.getHeight()>b(this,G)[G]?this.resizeAd(b(this,z)[z],b(this,G)[G]):(b(this,W)[W].resize(e.getWidth(),e.getHeight()+20,t),b(this,B)[B].style.width=e.getWidth()+"px",b(this,B)[B].style.height=e.getHeight()+20+"px")):this.resizeAd(b(this,z)[z],b(this,G)[G])}},i.k=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||b(this,x)[x].webkitDisplayingFullscreen?b(this,F)[F].ViewMode.FULLSCREEN:b(this,F)[F].ViewMode.NORMAL},i.I=function(){var e=this;b(this,B)[B].style.display="none",b(this,x)[x].ended||(b(this,U)[U].enable(),b(this,oe)[oe]?(b(this,x)[x].pause(),this.dispatchEvent(new C("pause"))):(this.p().then((function(){})).catch((function(){e.dispatchEvent(new C("pause"))})),this.dispatchEvent(new C("play")),this.dispatchEvent(new C(N.MEDIA_RESUMED))),b(this,oe)[oe]=!1)},i.B=function(e){var t=e.getError(),i=new D(t.getMessage());return i.type=t.getType(),i.errorCode=t.getErrorCode(),i.vastErrorCode=t.getVastErrorCode&&t.getVastErrorCode(),i.innerError=t.getInnerError(),i},i.j=function(e){var t=this;this.dispatchEvent(new C(N.AD_ERROR,{detail:{error:e}})),this.C(),b(this,ne)[ne]?b(this,ne)[ne]({start:function(){t.I(),b(t,ne)[ne]=void 0},startWithoutReset:function(){t.I()}}):this.I()},h(t,[{key:"volume",get:function(){return!b(this,U)[U].enabled&&b(this,W)[W]?b(this,W)[W].getVolume():b(this,x)[x].volume},set:function(e){!b(this,U)[U].enabled&&b(this,W)[W]&&b(this,W)[W].setVolume(e),b(this,x)[x].volume=e}},{key:"muted",get:function(){return!b(this,U)[U].enabled&&b(this,W)[W]?0===b(this,W)[W].getVolume():b(this,x)[x].muted},set:function(e){!b(this,U)[U].enabled&&b(this,W)[W]&&b(this,W)[W].setVolume(e?0:b(this,ae)[ae]),b(this,x)[x].muted=e}},{key:"currentTime",get:function(){return void 0!==b(this,te)[te]?b(this,te)[te]:b(this,x)[x].currentTime},set:function(e){b(this,U)[U].enabled&&(b(this,x)[x].currentTime=e)}},{key:"duration",get:function(){return void 0!==b(this,ie)[ie]?b(this,ie)[ie]:b(this,x)[x].duration}},{key:"cuePoints",get:function(){return[].concat(b(this,ee)[ee])}}]),t}(R);const he="video/mp4",ue="application/x-mpegURL",ce="application/dash+xml",me="text/html",pe="application/vnd.apple.mpegurl",_e="shaka",fe="mp4-native",ve="hls-native",Ee="dynamic-content",ye={[Ee]:()=>import("./dynamic-content-870bee08.js"),[_e]:()=>import("./shaka-9e1d7705.js"),[ve]:()=>import("./native-26d9103d.js"),[fe]:()=>import("./native-26d9103d.js")};function ge({content:i,isLegacyBrowser:n,videoElement:s,dynamicContent:r,forceMp4:o,preferMp4:a}){const d=function({content:e,isLegacyBrowser:t,videoElement:i,forceMp4:n=!1,preferMp4:s=!1}){const r=Ae(e);if(r.dynamic)return Ee;if(n&&!r.mp4)return;if(t||n)return fe;if(r.mp4&&s)return fe;if(e.drm)return _e;if((r.dash||r.hls)&&be)return _e;if(i.canPlayType(pe))return ve;if(r.mp4)return fe}({content:i,isLegacyBrowser:n,videoElement:s,forceMp4:o,preferMp4:a}),l=ye[d];return l?l().then((({default:e})=>new e(s,r))):Promise.reject(new e("No sources found",t))}const be=(()=>{if("undefined"==typeof window)return!1;const e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n})();function Ae(e){const t=e.sources.reduce(((e,t)=>(e[t.mimetype]={url:t.url,validUntil:t.validUntil,mimetype:t.mimetype},e)),{});return{hls:t[ue],mp4:t[he],dash:t[ce],dynamic:t[me]}}function we(e,t){return e.map(((e,i)=>`<vmap:AdBreak timeOffset="${t}" breakType="linear" breakId="${t}-${i}">\n    <vmap:AdSource id="${t}-${i}" allowMultipleAds="true" followRedirects="true">\n      <vmap:VASTAdData>${e}</vmap:VASTAdData>\n    </vmap:AdSource>\n  </vmap:AdBreak>`))}function Pe(e,t){const i=e.filter((e=>e.url||e.vast)),n=i.map(((e,n)=>function(e,t,i,n){let s;s=e.vast?`data:application/xml;charset=utf-8;base64,${window.btoa(e.vast)}`:e.url;if(!s)return"";const r=JSON.stringify({salesHouseId:e.schedulerInfo.salesHouseId,lineItemId:e.schedulerInfo.lineItemId,waterfallLength:t,waterfallIndex:i,positionIndex:n,adUrl:0===s.indexOf("data")?"data:application/xml":s}),o=e.errorPixel;return`<Ad id="glomex-vmap-${i}">\n    <Wrapper fallbackOnNoAd="true" allowMultipleAds="true">\n      <AdSystem><![CDATA[${r}]]></AdSystem>\n      ${o?`<Error><![CDATA[${o}]]></Error>`:""}\n      <VASTAdTagURI><![CDATA[${s}]]></VASTAdTagURI>\n      <Extensions>\n        <Extension type="waterfall" fallback_index="${i}"/>\n      </Extensions>\n    </Wrapper>\n  </Ad>`}(e,i.length,n,t)));return`<VAST xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="vast.xsd" version="3.0">\n      ${n.join("")}\n    </VAST>\n  `}const Te=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ce=(()=>{if("undefined"==typeof document)return!1;const e=Te[0],t={};for(const i of Te){if((null==i?void 0:i[1])in document){for(const[n,s]of i.entries())t[e[n]]=s;return t}}return!1})(),ke={change:Ce.fullscreenchange,error:Ce.fullscreenerror};let Se={request:(e=document.documentElement,t)=>new Promise(((i,n)=>{const s=()=>{Se.off("change",s),i()};Se.on("change",s);const r=e[Ce.requestFullscreen](t);r instanceof Promise&&r.then(s).catch(n)})),exit:()=>new Promise(((e,t)=>{if(!Se.isFullscreen)return void e();const i=()=>{Se.off("change",i),e()};Se.on("change",i);const n=document[Ce.exitFullscreen]();n instanceof Promise&&n.then(i).catch(t)})),toggle:(e,t)=>Se.isFullscreen?Se.exit():Se.request(e,t),onchange(e){Se.on("change",e)},onerror(e){Se.on("error",e)},on(e,t){const i=ke[e];i&&document.addEventListener(i,t,!1)},off(e,t){const i=ke[e];i&&document.removeEventListener(i,t,!1)},raw:Ce};var Oe;Object.defineProperties(Se,{isFullscreen:{get:()=>Boolean(document[Ce.fullscreenElement])},element:{enumerable:!0,get:()=>null!==(Oe=document[Ce.fullscreenElement])&&void 0!==Oe?Oe:void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[Ce.fullscreenEnabled])}}),Ce||(Se={isEnabled:!1});var Le=Se;function Re(e){if("function"!=typeof e.getRootNode)return;const t=e.getRootNode().host;return t?Re(t):e}class Ie{get enabled(){return Le.isEnabled||Boolean(this._videoNode.webkitSupportsFullscreen)}get usesVideoFullscreen(){return!Le.isEnabled&&Boolean(this._videoNode.webkitSupportsFullscreen)}get element(){const{_domNode:e,_videoNode:t}=this;return Le.element===e||Le.element===this._shadowHost?Le.element:t.webkitDisplayingFullscreen&&t.webkitPresentationMode&&"picture-in-picture"!==t.webkitPresentationMode&&"inline"!==t.webkitPresentationMode?t:null}request(){const e=new Error("Fullscreen is not supported in this environment.");if(!this.enabled)return Promise.reject(e);const{_videoNode:t,_domNode:i}=this;return Le.isEnabled?Le.request(i):t.webkitEnterFullscreen?new Promise(((e,i)=>{const n=setTimeout((()=>{i(new Error("Timeout entering fullscreen."))}),1e3);t.addEventListener("webkitbeginfullscreen",(()=>{clearTimeout(n),e()}),{once:!0}),t.webkitEnterFullscreen()})):Promise.reject(e)}exit(){const{_videoNode:e}=this;return null===this.element?Promise.reject(new Error("No element is in fullscreen that can be exited.")):Le.isEnabled&&this.element?Le.exit():e.webkitExitFullscreen?new Promise(((t,i)=>{const n=setTimeout((()=>{i(new Error("Timeout exiting fullscreen."))}),1e3);e.addEventListener("webkitendfullscreen",(()=>{clearTimeout(n),t()}),{once:!0}),e.webkitExitFullscreen()})):Promise.reject(new Error("Cannot exit fullscreen."))}onChange(e){const{_videoNode:t}=this;this._callbacks.push(e),Le.isEnabled&&(this._isInShadowDom&&"webkitfullscreenchange"===Le.raw.fullscreenchange&&this._domNode.addEventListener("webkitfullscreenchange",e,!1),Le.on("change",e)),t.addEventListener("webkitbeginfullscreen",e),t.addEventListener("webkitendfullscreen",e)}destroy(){const{_videoNode:e}=this;this._callbacks.forEach((t=>{Le.isEnabled&&(this._domNode.removeEventListener("webkitfullscreenchange",t,!1),Le.off("change",t)),e.removeEventListener("webkitbeginfullscreen",t),e.removeEventListener("webkitendfullscreen",t)})),this._callbacks=[]}constructor({videoNode:e,domNode:t}){this._videoNode=e,this._domNode=t,this._callbacks=[],this._shadowHost=Re(t),this._isInShadowDom=Boolean(this._shadowHost!==t)}}function Ne(e){const t=8e3,i=e*t,n=new ArrayBuffer(44+2*i),s=new DataView(n);return Me(s,0,"RIFF"),s.setUint32(4,36+2*i,!0),Me(s,8,"WAVE"),Me(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,1,!0),s.setUint32(24,t,!0),s.setUint32(28,16e3,!0),s.setUint16(32,2,!0),s.setUint16(34,16,!0),Me(s,36,"data"),s.setUint32(40,2*i,!0),n}function Me(e,t,i){for(let n=0;n<i.length;n++)e.setUint8(t+n,i.charCodeAt(n))}class De extends i{_fillIframePromise(e){return e?this._fillIFrame(n(e,{glomexVendor:this._glomexVendor})):Promise.resolve()}setup({duration:e,htmlUrl:t,debugReady:i=(()=>{})}){this.reset();const n=this._loadWavefile(function(e){const t=new window.Blob([Ne(e)],{type:"audio/wav"});return window.URL.createObjectURL(t)}(e)),s=this._fillIframePromise(t),r=new Promise((e=>{this._setupResolve=e}));return this._setupPromise=Promise.all([n,s,r]).then((()=>i())),this._setupPromise}_loadWavefile(e){return new Promise((t=>{this._contentVideo.addEventListener("loadeddata",t,{once:!0}),this._contentVideo.src=e,this._contentVideo.load(),this.volume=this._contentVideo.volume,this.muted=this._contentVideo.muted}))}_fillIFrame(e){return this._window.fetch(e).then((e=>e.text())).then((t=>{this._createTargetNode();const i=function(e){const t=e.document.createElement("iframe");return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("referrerpolicy","unsafe-url"),t.setAttribute("scrolling","no"),t.style.width="100%",t.style.height="100%",t}(this._window),n=t.replace("<head>",`<head><base href="${e}/../">`);s({iframe:i,doc:n,targetNode:this._targetNode,onAppended:()=>{const t=new URL(e),n=new URL(i.contentWindow.location.href);i.contentWindow.history.replaceState({},"",`${n.origin}${t.pathname}${t.search}`),i.contentWindow.addEventListener("resize",this._onResize),i.contentWindow.addEventListener("message",this._onMessage)}}),this._apiTargetWindow=i.contentWindow}))}_onResize(){const{body:e}=this._apiTargetWindow.document;e.style.height||(e.style.height="99.99%",setTimeout((()=>{e.style.height=null}),500))}_onMessage({data:e}){"dynamic-content-api-ready"===e&&this._injectApi().then(this._setupResolve),"use-interactive-content-composition"===e&&(this._setupPromise?this._setupPromise.then((()=>this.emit(r.USE_INTERACTIVE_CONTENT_COMPOSITION))):this.emit(r.USE_INTERACTIVE_CONTENT_COMPOSITION))}_injectApi(){return!this._audioContext||"suspended"!==this._audioContext.state&&"interrupted"!==this._audioContext.state||this._audioContext.resume(),this._apiTargetWindow.__glomexDynamicContentApiReady({video:this._contentVideo,helperVideo:this._helperVideo,audioContext:this._audioContext,isCustomPlaybackUsed:this._isCustomPlaybackUsed})}_connectSource(e){this._connectedAudioSources.push(e),e.connect(this._gainNode)}set muted(e){this._gainNode&&(this.activate(),this._gainNode.gain.value=e?0:this._contentVideo.volume)}set volume(e){this._gainNode&&(this.activate(),this._gainNode.gain.value=e)}activate(){this._audioContext&&this._audioContext.activated&&"closed"!==this._audioContext.state&&(this._audioContext.resume(),this._audioContext.activated=!0)}reset(){this._contentVideo.src&&(window.URL.revokeObjectURL(this._contentVideo.src),this._contentVideo.src=""),this._helperVideo.src="",this._targetNode&&(this._connectedAudioSources.forEach((e=>{e.disconnect()})),this._apiTargetWindow.removeEventListener("resize",this._onResize),this._connectedAudioSources=[],this._targetNode.innerHTML="",this._contentVideo.parentElement.removeChild(this._targetNode),this._targetNode=null)}hide(){this._targetNode&&(this._targetNode.style.display="none")}show(){this._targetNode&&(this._targetNode.style.display="block")}destroy(){this.reset(),this._audioContext&&"closed"!==this._audioContext.state&&this._audioContext.close(),this._apiTargetWindow.removeEventListener("message",this._onMessage)}_createTargetNode(){this._targetNode=window.document.createElement("div"),this._targetNode.style.position="absolute",this._targetNode.style.left=0,this._targetNode.style.right=0,this._targetNode.style.top=0,this._targetNode.style.bottom=0,this._targetNode.style.backgroundColor="#FFF",this._targetNode.style.display="none",this._contentVideo.parentElement.insertBefore(this._targetNode,this._contentVideo.nextSibling)}constructor({window:e,contentVideo:t,audioContext:i,glomexVendor:n,isCustomPlaybackUsed:s=!1}){super(),this._window=e,this._contentVideo=t,this._isCustomPlaybackUsed=s,this._apiTargetWindow=this._window,this._helperVideo=o(e.document),this._glomexVendor=n,this._helperVideo.muted=!0,this._audioContext=i,i&&"closed"!==i.state&&(this._gainNode=i.createGain(),this._gainNode.connect(this._audioContext.destination),this._audioContext.connectSource=this._connectSource.bind(this)),this._connectedAudioSources=[],this._onResize=this._onResize.bind(this),this._onMessage=this._onMessage.bind(this),this._setupResolve=null,this._setupPromise=null}}const xe=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],Be="MediaStart",Ue="MediaImpression",Ve="MediaStop";class Fe extends window.EventTarget{_handleMediaElementEvents(e){"timeupdate"!==e.type||this._videoElement.paused||this._mediaImpressionTriggered||(this.dispatchEvent(new window.CustomEvent(Ue)),this._mediaImpressionTriggered=!0),"play"!==e.type||this._mediaStartTriggered||(this.dispatchEvent(new window.CustomEvent(Be)),this._mediaStartTriggered=!0),"ended"===e.type&&(this._mediaImpressionTriggered=!1,this._mediaStartTriggered=!1,this.dispatchEvent(new window.CustomEvent(Ve))),this._mediaInActivation&&"volumechange"!==e.type||this.dispatchEvent(new window.CustomEvent(e.type))}isCustomPlaybackUsed(){return!1}activate(){if(!this._mediaStartTriggered&&!this._mediaInActivation&&(this._mediaInActivation=!0,this._videoElement.paused)){const e=()=>(this._videoElement.pause(),new Promise((e=>{setTimeout((()=>{this._mediaInActivation=!1,e()}),1)})));this._activatePromise=new Promise((e=>e(this._videoElement.play()))).then(e).catch(e)}}reset(){return this._mediaImpressionTriggered=!1,this._mediaStartTriggered=!1,Promise.resolve()}destroy(){this.reset(),xe.forEach((e=>{this._videoElement.removeEventListener(e,this._handleMediaElementEvents)}))}playAds(){this.play()}loadAds(){return Promise.resolve({start:()=>{setTimeout((()=>{this.play()}),1)}})}play(){this._activatePromise.then((()=>new Promise((e=>e(this._videoElement.play()))).then((()=>{})).catch((()=>this.dispatchEvent(new window.CustomEvent("pause"))))))}pause(){this._videoElement.pause()}set volume(e){this._videoElement.volume=e}get volume(){return this._videoElement.volume}set muted(e){this._videoElement.muted=e}get muted(){return this._videoElement.muted}set currentTime(e){this._videoElement.currentTime=e}get currentTime(){return this._videoElement.currentTime}get duration(){return this._videoElement.duration}resizeAd(){}discardAdBreak(){}constructor(e){super(),this._videoElement=e,this._mediaImpressionTriggered=!1,this._mediaStartTriggered=!1,this._mediaInActivation=!1,this._adsEnabled=!1,this._handleMediaElementEvents=this._handleMediaElementEvents.bind(this),xe.forEach((e=>{this._videoElement.addEventListener(e,this._handleMediaElementEvents)})),this._activatePromise=Promise.resolve()}}const je={0:"preroll","-1":"postroll"};class We extends Error{constructor(e){super(e),this.name="AbortError"}}class ze extends d{_setup(){this._contentProgressWithoutBuffering=0,this._adProgressWithoutBuffering=0,this._dynamicContent.on(r.USE_INTERACTIVE_CONTENT_COMPOSITION,(()=>{this.emit(r.USE_INTERACTIVE_CONTENT_COMPOSITION)})),this._player.addEventListener("MediaStart",(()=>{this._globalPlaybackPromise.then((({sourceUrl:e,type:t}={})=>{this.emit(r.PLAYER_START,{streamType:t,sourceUrl:e}),this._dynamicContent.show()}))})),this._player.addEventListener("MediaImpression",(()=>{this._onBufferingComplete(),this.emit(r.CONTENT_BEGIN,{}),this._window.clearTimeout(this._discardAdBreakAfterComplete)})),this._player.addEventListener("MediaStop",(()=>{this.emit(r.PLAYER_STOP,{})})),this._player.addEventListener("MediaResumed",(()=>{this.emit(r.CONTENT_RESUME,{}),this._window.clearTimeout(this._discardAdBreakAfterComplete)})),this._player.addEventListener("AdContentPauseRequested",(()=>{this._isIos&&(this._videoElement.style.backgroundColor="black"),this.emit(r.CONTENT_PAUSEREQUESTED,{})})),this._player.addEventListener("AdContentResumeRequested",(()=>{this._videoElement.style.backgroundColor=null})),this._player.addEventListener("pause",(()=>this._onPause())),this._player.addEventListener("play",(()=>{this._onBufferingComplete(),this._emitPlay()})),this._player.addEventListener("waiting",(()=>this._onBufferingBegin())),this._player.addEventListener("seeking",(()=>this._onBufferingBegin())),this._player.addEventListener("seeked",(()=>this._onBufferingComplete())),this._player.addEventListener("playing",(()=>{this._onBufferingComplete(),this._videoElement.paused||this.emit(r.PLAYING,{})})),this._player.addEventListener("volumechange",(()=>{const{volume:e,muted:t}=this._player;this.emit(r.VOLUME_CHANGE,{volume:e,muted:t})})),this._player.addEventListener("timeupdate",(()=>{this.emit(r.TIME_UPDATE,{currentTime:this._player.currentTime,wallClockTime:this._playback?this._playback.getWallClockTime():Math.floor((new Date).getTime()/1e3)}),this._contentProgressWithoutBuffering+=1,2===this._contentProgressWithoutBuffering&&(this._contentProgressWithoutBuffering=0,this._contentBufferingComplete())})),this._player.addEventListener("ended",(()=>{this.emit(r.CONTENT_COMPLETE,{})})),this._player.addEventListener("AdProgress",(()=>{this._adProgressWithoutBuffering+=1,this.emit(r.AD_TIME_UPDATE,{currentTime:this._player.currentTime,duration:this._player.duration}),2===this._adProgressWithoutBuffering&&(this._adProgressWithoutBuffering=0,this._onBufferingComplete())})),this._player.addEventListener("AdClick",(()=>{this.emit(r.AD_CLICK,{}),this.pause({byUser:!0})})),this._player.addEventListener("AdSkipped",(()=>{this.emit(r.AD_SKIP,{}),this._dynamicContent.show()})),this._player.addEventListener("AdComplete",(()=>{this.emit(r.AD_COMPLETE,{}),this._lastAdWasVpaid&&(this._discardAdBreakAfterComplete=this._window.setTimeout((()=>{this.discardAdBreak()}),5e3)),this._dynamicContent.show()})),this._player.addEventListener("AdCanPlay",(e=>{const{ad:t}=e.detail;this.emit(r.AD_CAN_PLAY,this._prepareAdEventPayload({ad:t,companion:this._getCompanion(t)}))})),this._player.addEventListener("AdImpression",(e=>{const{ad:t}=e.detail;this.emit(r.AD_IMPRESSION,{isLinear:t.isLinear()})})),this._player.addEventListener("AdStarted",(e=>{this._adProgressWithoutBuffering=0,this._onBufferingComplete();const{ad:t}=e.detail;this._window.clearTimeout(this._discardAdBreakAfterComplete),this._lastAdWasVpaid="application/javascript"===t.getContentType(),this.emit(r.AD_BEGIN,this._prepareAdEventPayload({ad:t,companion:this._getCompanion(t)})),this._dynamicContent.hide()})),this._player.addEventListener("AdPaused",(()=>this._onPause())),this._player.addEventListener("AdResumed",(()=>{this._onBufferingComplete(),this._emitPlay(),this.emit(r.PLAYING,{})})),this._player.addEventListener("AdBuffering",(()=>{this._adProgressWithoutBuffering=0,this._onBufferingBegin()})),this._player.addEventListener("AdVolumeChanged",(()=>{const{volume:e,muted:t}=this._player;this.emit(r.VOLUME_CHANGE,{volume:e,muted:t})})),this._fullscreen.onChange((()=>{setTimeout((()=>{this.emit(r.FULLSCREEN_CHANGE,{isInFullscreen:Boolean(this._fullscreen.element)})}),1)}))}_emitPlay(){this.emit(r.PLAY,{byUser:this._byUser,byExternalApi:this._byExternalApi}),this._byUser=!1,this._byExternalApi=!1}_emitPause(){this.emit(r.PAUSE,{byUser:this._byUser,byExternalApi:this._byExternalApi}),this._byUser=!1,this._byExternalApi=!1}_prepareAdEventPayload({ad:e,companion:t={}}={}){const i=e.getAdPodInfo(),n=e.getWrapperAdSystems(),s=JSON.parse(n[n.length-1]),{salesHouseId:r,lineItemId:o,waterfallLength:a,waterfallIndex:d,adUrl:l,positionIndex:h}=s,u=i.getTimeOffset(),c=i.getAdPosition(),m=i.getMaxDuration(),p=i.getTotalAds(),_=u<=0?0:u,f=je[u]||"midroll",v=e.isLinear()?{isLinear:!0,duration:e.getDuration()}:{isLinear:!1,nonLinearWidth:e.getWidth(),nonLinearHeight:e.getHeight(),duration:e.getMinSuggestedDuration()};return{id:e.getAdId(),companion:t,positionIndex:c?c-1:h,breakIndex:_,breakName:f,mimetype:e.getContentType(),maxDuration:m,totalAds:p,salesHouseId:r,lineItemId:o,waterfallIndex:d,waterfallLength:a,adUrl:l,...v}}_getCompanion(e){const t=e.getAdPodInfo().getTimeOffset();if("preroll"!==(je[t]||"midroll"))return{};const{ResourceType:i,CreativeType:n,SizeCriteria:s}=window.google.ima.CompanionAdSelectionSettings,r=new window.google.ima.CompanionAdSelectionSettings;r.resourceType=i.ALL,r.creativeType=n.IMAGE,r.sizeCriteria=s.IGNORE;const{companionAdRenderingMode:o="default",companionAdStart:a,companionAdEnd:d}=e.getTraffickingParameters()||{};if(!this._companionSizes[o])return{};const l=this._companionSizes[o];if(!l)return{};let h=[];try{l.forEach((t=>{const[i,n]=t;h=[...h,...e.getCompanionAds(i,n,r)||[]]}))}catch(e){return console.error(e),[]}return h=h.map((e=>({id:null,html:e.getContent(),width:e.getWidth(),height:e.getHeight()}))),{start:Number(a)||0,end:Number(d)||0,renderingMode:o,companions:h}}_onPause(){this._onBufferingComplete(),this._emitPause()}_onError(e){this.pause({byUser:!1}),this.emit(r.PLAYER_ERROR,{error:e})}_onBufferingBegin(){this._contentProgressWithoutBuffering=0,this._isBuffering||(this._isBuffering=!0,this.emit(r.BUFFERING_BEGIN,{}))}_contentBufferingComplete(){this._isBuffering&&(this._onBufferingComplete(),this.emit(r.PLAYING,{}))}_onBufferingComplete(){this._isBuffering&&(this._isBuffering=!1,this.emit(r.BUFFERING_COMPLETE,{}))}activate(){this._player.activate(),this._dynamicContent.activate()}play({byUser:e=!1,byExternalApi:t=!1}={}){if(this._playback){this._videoElement.paused&&(this._contentProgressWithoutBuffering=0,this._onBufferingBegin());try{this._playback.validate()}catch(e){return this._onError(e)}this._byUser=e,this._byExternalApi=t,this._adFetchPromise.then((({start:e})=>{e()})).catch((()=>{}))}}pause({byUser:e=!1,byExternalApi:t=!1}={}){this._adFetchPromise.then((()=>{this._byUser=e,this._byExternalApi=t,this._player.pause()})).catch((()=>{}))}setContent(e,t,{preloadAds:i=!1,maxAdDuration:n}={}){this._adFetchPromise.abort();const{_ima:s}=this,o=new this._window.AbortController,{signal:a}=o,d=this._resetPromise.then((()=>(this._player.reset(!0),this._load({signal:a,content:e}).then((()=>{if(a.aborted)throw new We("Aborted");this._emitPlayerInfo()})))));let l;return l=s?Promise.all([t(),d]).then((([e])=>{if(a.aborted)throw new We("Aborted");const t=(({start:e=[],end:t=[]})=>{0===e.length&&e.push([]);const i=we(e.map(((e,t)=>Pe(e,t))),"start"),n=we(t.map(((e,t)=>Pe(e,t))),"end");return`<?xml version="1.0" encoding="UTF-8"?>\n    <vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">\n      ${i.join("")}\n      ${n.join("")}</vmap:VMAP>`})(e),o=new s.AdsRequest;return o.adsResponse=t,o.vastLoadTimeout=this._vastLoadTimeout,s.OmidVerificationVendor&&(o.omidAccessModeRules={[s.OmidVerificationVendor.MOAT]:s.OmidAccessMode.FULL,[s.OmidVerificationVendor.INTEGRAL_AD_SCIENCE]:s.OmidAccessMode.FULL,[s.OmidVerificationVendor.NIELSEN]:s.OmidAccessMode.FULL,[s.OmidVerificationVendor.MEETRICS]:s.OmidAccessMode.FULL,[s.OmidVerificationVendor.GOOGLE]:s.OmidAccessMode.FULL,[s.OmidVerificationVendor.OTHER]:s.OmidAccessMode.CREATIVE}),new Promise(((e,t)=>{if(!i){let t=!0;return e({start:()=>{t?(t=!1,this._player.playAds(o)):this._player.play()},adsAvailable:void 0})}this._player.loadAds(o,(({start:i,ad:s})=>{if(a.aborted)return t(new We("Aborted"));const o=Boolean(s),d=(null==s?void 0:s.getDuration())||0;let l=!0;o&&n&&0!==d&&d>n?(this._player.discardAdBreak(),e({start:()=>{this._player.play()},adsAvailable:!1})):(this.emit(r.ADBREAK_READY,{adsAvailable:o}),e({start:()=>{l?(l=!1,i()):this._player.play()},adsAvailable:o}))}))}))})):d.then((()=>this._player.loadAds())),l.catch((e=>{if("AbortError"===e.name||"PlaybackError"===e.name)throw e;return console.error(e),{start:()=>{setTimeout((()=>{this._player.play()}),1)}}})),l.abort=()=>{o.abort()},this._adFetchPromise=l,l}_emitPlayerInfo(){this.emit(r.PLAYER_INFO,{adSdk:this._ima?`ima-${this._ima.VERSION}`:"none",isFullscreenEnabled:this._fullscreen.enabled,usesVideoFullscreen:Boolean(this._fullscreen.usesVideoFullscreen)})}_load({signal:e,content:t,forceMp4:i=!1}){if(e.aborted)return Promise.reject(new We("Aborted"));const n=Ae(t),s=ge({content:t,isLegacyBrowser:this._isLegacyBrowser,videoElement:this._videoElement,dynamicContent:this._dynamicContent,forceMp4:i,preferMp4:this._preferMp4});return this._globalPlaybackPromise=s.then((i=>{let s=Promise.resolve();return this._playback&&(this._playback.removeEventListener("error",this._onPlaybackError,!1),s=this._playback.destroy(),this._playback=void 0),s.then((()=>(this._playback=i,this._playback.addEventListener("error",this._onPlaybackError,!1),this._playback.load({sources:n,content:t}).catch((i=>{if(this._playback&&this._playback.forceMp4FallbackOnError)return console.warn(`Fallback to MP4 because of error: ${i.message}`),this._load({signal:e,content:t,forceMp4:!0});throw i})))))})),this._globalPlaybackPromise}_onPlaybackError(e){this._onError(e.detail.error)}reset(){return this._playback&&(this._playback.removeEventListener("error",this._onPlaybackError,!1),this._resetPromise=this._resetPromise.then((()=>this._playback&&this._playback.destroy().then((()=>{this._playback=void 0,this._player.reset(!0)}))))),this._resetPromise}destroy(){this._contentProgressWithoutBuffering=0,this._adProgressWithoutBuffering=0,this._lastAdWasVpaid=!1,this.removeAllListeners(),this._videoElement.pause(),this._videoElement.innerHTML="",this._videoElement.removeAttribute("src"),this._playback&&(this._playback.removeEventListener("error",this._onPlaybackError,!1),this._playback.destroy(),this._playback=void 0),this._videoElement.load(),this._fullscreen.destroy(),this._player.destroy(),this._dynamicContent.destroy()}mute(){this._player.muted=!0,this._dynamicContent.muted=!0}unmute(){this._player.muted=!1,this._dynamicContent.muted=!1}get muted(){return this._player.muted}get volume(){return this._player.volume}set volume(e){this._player.volume=e,this._dynamicContent.volume=e}get playbackRate(){return this._videoElement.playbackRate}set playbackRate(e){this._videoElement.playbackRate=e}requestFullscreen(){return this._fullscreen.request()}exitFullscreen(){return this._fullscreen.exit().catch((e=>{console.warn(`Error occurred exiting fullscreen: ${e}`)}))}resizeAd({width:e,height:t,scale:i=1}){this._adElement.style.transformOrigin="left top",this._adElement.style.transform=`scale(${i})`,this._player.resizeAd(e,t)}setCurrentTime(e){this._player.currentTime=e}discardAdBreak(){this._player.discardAdBreak()}isCustomPlaybackUsed(){return this._player.isCustomPlaybackUsed()}constructor({window:e,domNode:t,player:i,ima:n,videoElement:s,browserType:r,adElement:o,vastLoadTimeout:a,dynamicContent:d,preferMp4:l}){super(),this._window=e,this._domNode=t,this._videoElement=s,this._adElement=o,this._dynamicContent=d,this._vastLoadTimeout=a,this._onPlaybackError=this._onPlaybackError.bind(this),this._lastAdWasVpaid=!1,this._preferMp4=l,this._player=i,this._ima=n,this._playback=void 0,this._globalPlaybackPromise=Promise.resolve(),this._resetPromise=Promise.resolve(),this._isBuffering=!1,this._adFetchPromise=Promise.resolve(),this._adFetchPromise.abort=()=>{},this._byExternalApi=!1,this._byUser=!1,this._isLegacyBrowser="ie"===r||"legacy_edge"===r,this._isSafariBrowser=["safari_desktop","ios","ios-webview"].indexOf(r)>-1,this._isIos=["ios","ios-webview"].indexOf(r)>-1,this._companionSizes={overlay:[[300,80],[225,60],[150,40]],"cut-in-zoom":[[1280,720],[640,360],[400,225]]},this._fullscreen=new Ie({domNode:t,videoNode:s}),this._setup()}}const Ge=({window:e,domNode:t,videoElement:i,audioContext:n,store:s})=>{const{environment:{browserType:r,consentData:{vendorLegitimateInterests:o={},vendorConsents:a={},glomexVendor:d},userIds:{glomexId:l}={},pageSessionId:h},integration:{integrationSessionId:u},config:{loadThirdPartyOnlyIfConsent:c,ad:{maxRedirectCount:m,videoLoadTimeout:p,vastLoadTimeout:_,enabled:f,showImaUi:v},preferMp4:E}}=s.getState(),y=t.querySelector(".inner-container"),g=e.document.createElement("div");let b;var A;(y.appendChild(g),f&&(!c||o[755]||a[755]))?b=Promise.all([He("https://imasdk.googleapis.com/js/sdkloader/ima3.js",null===(A=e.google)||void 0===A?void 0:A.ima),He("https://securepubads.g.doubleclick.net/tag/js/gpt.js",e.googletag).catch((()=>{}))]).then((()=>{var t;const n=null===(t=e.google)||void 0===t?void 0:t.ima,s=new n.AdsRenderingSettings;s.loadVideoTimeout=p,s.enablePreloading=!0,s.useStyledNonLinearAds=!0;const r=new M;r.autoResize=!1,v?s.uiElements=[n.UiElements.AD_ATTRIBUTION,n.UiElements.COUNTDOWN]:(s.uiElements=[],r.clickTrackingElement=g);const o=e.navigator.language.toLowerCase().split("-")[0];n.settings.setLocale(o),n.settings.setNumRedirects(m),l&&l.id&&n.settings.setPpid(l.id),(h||u)&&n.settings.setSessionId(h||u);const a=new le(n,i,g,s,r);return n.settings.setVpaidMode(n.ImaSdkSettings.VpaidMode.ENABLED),{player:a,ima:n}})).catch((()=>({player:new Fe(i)}))):b=Promise.resolve({player:new Fe(i)});return b.then((({player:s,ima:o})=>{const a=new De({window:e,isCustomPlaybackUsed:s.isCustomPlaybackUsed(),contentVideo:i,audioContext:n,glomexVendor:d});return new ze({window:e,domNode:t,videoElement:i,browserType:r,player:s,ima:o,adElement:g,vastLoadTimeout:_,dynamicContent:a,preferMp4:E})}))};function He(e,t){return t?Promise.resolve():a(e)}export{Ge as create};</script>
</body>
</html>
