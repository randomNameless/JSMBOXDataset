<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ccl-navigation-asyncCalls.html</title>
</head>
<body>

<script>
(function ($, Carnival) {

    if (!Carnival) Carnival = {};

    if (!Carnival.Header2013) Carnival.Header2013 = {};

    var hdr = {};

    hdr.$elem = $("#ccl-refresh-header");

    hdr.initAsyncCalls = function () {
        //set the header advisories
        Carnival.headerAdvisories.dynamicallyLoadAdvisoryContent('{}', hdr.$elem, '.message-bar', '.inner', '.message-bar-close');

        //////////////////////// D O M A I N   N O T I F I C A T I O N /////////////////
        if (Carnival.domainNotifCookie && Carnival.domainNotifCookie.getDomainNotifCookie() == null ||
            Carnival.domainNotifCookie.getDomainNotifCookie() == 'set') {
            Carnival.domainNotifCookie.dynamicallyLoadDomainNotification(hdr.$elem, '.notif-bar', ".notif-bar-close", '.inner');
        }
        ////////////////////////////////////////////////////////////////////////////////

    };
    hdr.legacyInit = function () {

        var $legacyEl = $("#ccl_header");

        if ($legacyEl.length > 0
            && Carnival.headerAdvisories != undefined) {
            //set the header advisories
            Carnival.headerAdvisories.dynamicallyLoadAdvisoryContent('{}', $legacyEl, '.message-bar', '.inner', '.message-bar-close');
        }

        if ($legacyEl.length > 0
            && Carnival.domainNotifCookie != undefined) {
            //////////////////////// D O M A I N   N O T I F I C A T I O N /////////////////
            if (Carnival.domainNotifCookie && Carnival.domainNotifCookie.getDomainNotifCookie() == null ||
                Carnival.domainNotifCookie.getDomainNotifCookie() == 'set') {
                Carnival.domainNotifCookie.dynamicallyLoadDomainNotification($legacyEl, '.notif-bar', ".notif-bar-close", '.inner');
            }
            ////////////////////////////////////////////////////////////////////////////////
        }
    };

    Carnival.Header2013 = $.extend(hdr, Carnival.Header2013);
    window.Carnival = Carnival;

    $(function () {
        if (Carnival.Header2013.$elem.length) {
            Carnival.Header2013.initAsyncCalls();
        }
        else {
            Carnival.Header2013.legacyInit();
        }
    });

})(jQuery, window.Carnival);
</script>

</body>
</html>
