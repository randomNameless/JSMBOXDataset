<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>at-integration.html</title>
</head>
<body>

<script>
!function(window){var CQ=window.CQ,CQ_Analytics=window.CQ_Analytics,defaultContentCache=[];function _appendAmbitSegment(t){return t.replace(/(\/content\/campaigns\/.*?)\/(.*)/,"$1/master/$2")}function getHTTP(t){var e={},n=new XMLHttpRequest;return 0===t.indexOf("/content/")&&(n.open("GET",t,!1),n.send(null),200===n.status&&(e={status:200,body:n.responseText})),e}function _pullContent(path,mboxName,content){CQ&&CQ.shared&&(path=CQ.shared.HTTP.addParameter(path,"wcmmode","disabled"));var url=document.location.pathname,proxyUrl=url,output;-1!==url.indexOf(".html")?(proxyUrl=url.substring(0,url.lastIndexOf("."))+".targetoffer.html",proxyUrl+=cleanPath(path)):window.pageProperties&&window.pageProperties.pagePath?(proxyUrl="/content"+window.pageProperties.pagePath+".targetoffer.html",proxyUrl+=cleanPath(path)):window.currentPagePath&&(proxyUrl=window.currentPagePath+".targetoffer.html",proxyUrl+=cleanPath(path)),output=content?{status:200,body:content}:CQ&&CQ.shared?CQ.shared.HTTP.get(proxyUrl):getHTTP(proxyUrl);var isOk=output&&output.status&&200==output.status,hasBody=output&&output.body&&output.body.length>0;if(isOk&&hasBody){var target=document.getElementById(mboxName),outputWritten=!1;if(target){for(;target.firstChild;)target.removeChild(target.firstChild);var childDivs=target.getElementsByTagName("div");1==childDivs.length&&(target=childDivs[0]);var scriptwrapper=document.createElement("div");scriptwrapper.innerHTML=output.body,target.appendChild(scriptwrapper);for(var scripts=target.getElementsByTagName("script"),i=0;i<scripts.length;i++)eval(scripts[i].text);outputWritten=!0;var parentElement=target.parentElement;if(parentElement){var event=document.createEvent("CustomEvent");event.initEvent("target-dom-loaded",!0,!1),event.mboxName=mboxName,parentElement.dispatchEvent(event)}}outputWritten||document.write(output.body)}else console&&console.log("Could not pull resource. Response[status:{},body:{}]",output.status,output.body)}if(CQ_Analytics&&CQ_Analytics.TestTarget&&CQ_Analytics.TestTarget.pull){var instance=CQ_Analytics.TestTarget;instance.pull=function(t,e,n){void 0===n&&(t=_appendAmbitSegment(t)),_pullContent(t,e)},instance.signalDefaultOffer=function(t){void 0===instance.defaults[t]&&console?console.log("The default offer path was not found in the internal map for mbox "+t):_pullContent(instance.defaults[t],t,defaultContentCache[t])},instance._updateMboxContent=instance.updateMboxContent,instance.updateMboxContent=function(t,e){if(!defaultContentCache[t]){var n=document.getElementById(t);n&&(defaultContentCache[t]=n.innerHTML,n.className+=" mboxContainer")}instance._updateMboxContent(t,e)}}function cleanPath(t){t.match(/^https?:\/\/./)&&(t=t.replace(/^https?:\/\/[^\/]*/,""));var e=t.indexOf("?");return e>=0&&(t=t.substring(0,e)),0===(e=t.indexOf("."))&&(t=""),t}window.at={wait:function(t,e){$(t).each(function(){var t=$(this).closest(".mboxContainer"),n=t.attr("id"),a=0;n&&(document.addEventListener("target-dom-loaded",function(o){o.mboxName===n&&Date.now()-a>25&&(e(t),a=Date.now())}),"EDIT"===window.wcmMode&&setTimeout(function(){var n=t.closest(".target");n.length>0&&new MutationObserver(function(t){Date.now()-a>25&&(e(n),a=Date.now())}).observe(n[0],{childList:!0})},25))})}}}(window);
//# sourceMappingURL=at-integration.js.map
</script>

</body>
</html>
