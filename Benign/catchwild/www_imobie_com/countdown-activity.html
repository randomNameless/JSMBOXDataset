<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>countdown-activity.html</title>
</head>
<body>

<script>
/*
 *倒计时
 * hour：countdown("hour", x);x为倒计时小时
 * day: countdown("day", "06/10/2015");//第二个参数是到期时间
 * week: countdown("week");
 * month: countdown("month");
 *
 * **/
var proNamed = 'homed';
var proNamem = 'homem';
var toggleFlag = true;
var currentPage = window.location.href;
if(currentPage.indexOf('download-anyunlock-icloud-activation-unlocker.htm') > -1) {
    proNamed = "snsauid";
    proNamem = "snsauim";
} else if(currentPage.indexOf('download-anyunlock.htm') > -1) {
    proNamed = "snsaud";
    proNamem = "snsaum";
} else if(currentPage.indexOf('download-anytrans-iphone-manager.htm') > -1) {
    proNamed = "snsatd";
    proNamem = "snsatm";
} else if(currentPage.indexOf('store') > -1) {
    proNamed = 'store';
} else if(currentPage.indexOf('anytrans') > -1) {
    proNamem = 'atihomem';
    proNamed =  (currentPage.indexOf('buy') > -1 ?  'buyati' : "atihomed")
} else if(currentPage.indexOf('anyunlock') > -1){
    proNamem = 'auhomem';
    proNamed =  (currentPage.indexOf('buy') > -1 ?  'buyau' : "auhomed")
} else if(currentPage.indexOf('droidkit') > -1) {
    proNamem = 'dkhomem';
    proNamed =  (currentPage.indexOf('buy') > -1 ?  'buydk' : "dkhomed")
} else if(currentPage.indexOf('anyfix') > -1) {
    proNamem = 'afhomem';
    proNamed =  (currentPage.indexOf('buy') > -1 ?  'buyaf' : "afhomed")
}

// if(ismobile() == 'FALSE' || ismobile() == false) {
//     activityAdd()
// } else {
//     currentPage.indexOf('thankyou') > -1 ? '' : float_advsmobie();
// }
function activityAdd() {
    var htmlnode = `
    <style>
        .nav-side { position: fixed;bottom: 530px; right: 0%;z-index: 10; display: block; width: 280px; }
        .halloween_pop{ position: absolute; top: 0; display: block; transform: translateX(280px);  transition: all 1s ease; opacity: 0; }
        .halloween_time{position: absolute; bottom: 67px; left: 13.5%; height: 6%; width: 73%;display: flex;align-items: center;}
        .halloween_time time{width: 100%; display: flex;justify-content: space-between;}
        .halloween_time b{font-size: 16px;color: #FFE776;display: block;width:20%;text-align: center; font-weight: 700; letter-spacing: 8px; font-family: 'open sans';}
        .coupon_close{cursor: pointer;position: absolute;top: 12px; right: 16px;}
        .spring_day { position: absolute; left: 1px; top: 14px; }
        .spring_hours { position: absolute; top: 9px; left: 57px; }
        .spring_minute { position: absolute; top: 9px; left: 114px; }
        .spring_second { position: absolute; right: -7px; top: 14px; }
        .halloween_pop a { width: 194px; height: 50px; color: transparent; display: block; position: absolute; bottom: 29%; left: 50%; transform: translateX(-50%);}
        .halloween_pop_scale { position: absolute; right: 0px; top: 240px;  display: block; cursor: pointer; transform: translateX(160px);  transition: all 1s ease; opacity: 0;  }
        .halloween_pop.act { transform: translateX(0px); opacity: 1; transition: all 1s ease; }
        .halloween_pop_scale.act { transform: translateX(0px); opacity: 1; transition: all 1s ease; }
    </style>
    <div class="nav-side">
		<div class="halloween_pop act">
			<img width="280" height="361" src="https://imobie-resource.com/en/img/halloween-adside.png" alt="halloween activity">
			<div class="retain_textbox">
				<div class="halloween_time">
					<time>
						<b class="spring_day">00</b><b class="spring_hours">00</b><b class="spring_minute">00</b><b class="spring_second">00</b>
					</time>
				</div>
			</div>
			<a href="https://www.imobie.com/special/halloween-campaign.htm?ref=${proNamed}">buy now</a>
			<div class="coupon_close"><img src="https://imobie-resource.com/en/img/close_adside.svg" alt=""></div>
		</div>
		<div class="halloween_pop_scale">
			<img width="153" height="135" src="https://imobie-resource.com/en/img/halloween-adside-scale.png" alt="halloween activity">
		</div>
	</div>`
    $('body').append(htmlnode);
    if(window.location.pathname == '/' || window.location.pathname == '/index.htm'){
        $(".halloween_pop").removeClass("act");
        $(".halloween_pop_scale").addClass('act');
    }
}

var cssNode = document.createElement('link');
cssNode.rel = 'stylesheet';
cssNode.type = 'text/css';
cssNode.href = 'https://imobie-resource.com/en/css/stadv.css';
document.getElementsByTagName("head")[0].appendChild(cssNode);
function float_advs(){
    var str_ad = `<div class="sprtadv stadv_pcbot"><span class="stadv_pcbot_close"></span><img src="https://imobie-resource.com/en/img/screenify_adpc-en.webp" width="1920" height="140" alt="screenify"><a class="stadv_pct" href="https://www.imobie.com/go/download.php?product=sf&ref=ad_record"></a></div>
    <div class="sprtadvr adv_rigth"><span class="stadvr_pcbot_close"></span><a class="stadv_pct" href="https://www.imobie.com/go/download.php?product=sf&ref=ad_record2"></a></div>`;
    $("body").append(str_ad);
    $(".stadv_pcbot_close, .stadvr_pcbot_close").bind("click", function() {
        $(".stadv_pcbot, .adv_rigth").hide();
    });
}
function float_advsmobie(){
    var	str_ad = `<div class="adlet_mobile"><span class="adlet_mobile_close"></span><a href="https://www.imobie.com/special/halloween-campaign.htm?ref=${proNamem}" class="adlet_mobile_cont"><img src="https://imobie-resource.com/en/img/halloween-mobile.png" width="1080" height="300" alt="halloween"></a></div>`;
    $("body").before(str_ad);
    $(window).scroll(function() {
        var height = document.body.scrollTop + document.documentElement.scrollTop;
        if(height > 115) {
            $(".adlet_mobile").addClass("adlet_fixed");
        } else {
            $(".adlet_mobile").removeClass("adlet_fixed");
        }
    });
    $(".adlet_mobile_close").bind("click", function() {
        $(".adlet_mobile").hide();
    });
}

$(window).scroll(function() {
    var height = document.body.scrollTop + document.documentElement.scrollTop;
    const adChangeFuntion = adChange(height);
    adChangeFuntion();
    if(toggleFlag && height >= 300) {
        $(".halloween_pop").addClass('act');
        $(".halloween_pop_scale").removeClass("act");
        toggleFlag = false;
    }
    if(height == 0) {
        $(".halloween_pop").removeClass("act");
        $(".halloween_pop_scale").addClass('act');
        toggleFlag = true;
    }
});	

$(document).ready(function(){
    if(getCookie('prvag')==''){
        $(".sprtadv").css({"bottom":"44px","top":"auto"})
        $(".prvagree").click(function(){
            $(".sprtadv").stop().animate({"bottom":"0","top":"auto"},300);
        })
    }else{
        $(".sprtadv").css({"bottom":"0","top":"auto"})
    }
});

function adChange(h) {
    var timerID = null,
        height = h;
    return function() {
        if(timerID) {
            clearTimeout(timerID);
        }
        timerID = setTimeout(function() {
            if (height>500) {
                $(".stadv_pcbot").css({"transform": 'translateX(1920px) scale(0.8)', 'opacity': '0', "transition": '0.5s all ease-in-out'})
                $(".adv_rigth").css({"transform": 'translateX(0px) scale(1)','opacity': '1', "transition": '.5s all .15s ease-in-out'})
            } else {
                $(".stadv_pcbot").css({"transform": 'translateX(0px) scale(1)', 'opacity': '1', "transition": '0.5s all .15s ease-in-out'})
                $(".adv_rigth").css({"transform": 'translateX(270px) scale(0.8)', 'opacity': '0', "transition": '.5s all ease-in-out'})
            }
        },100);
    }
}

$(".coupon_close").click(function(){
    $(".halloween_pop").removeClass("act");
    $(".halloween_pop_scale").addClass('act');
})
$(".halloween_pop_scale").click(function() {
    $(".halloween_pop").addClass('act');
    $(".halloween_pop_scale").removeClass("act");
})

// countdown1("day", "11/8/2024");
 var now1 ='';
 $.ajax({
     type: "GET",
     url: "/getsystemdatetime.php",
     async: false,
     success: function(date) {
        now1 = date;
     }
 });
 

 function countdown1(type, time) {
    if(typeof(now1) == "undefined" || now1 == "") {
        now1 = new Date();
     }
     var tody = new Date(now1).getTime(),
         /*tody=tody+7200000,*/
         tody = new Date(tody),
         /*var tody = new Date(),*/
         year = tody.getFullYear(),
         month = tody.getMonth() + 1,
         day = tody.getDate(),
         hour = tody.getHours(),
         nminute = tody.getMinutes(),
         seconds = tody.getSeconds(),
         todysec = tody.getTime(),
         nexttime, nexttimesec, comparesec;
     if(type == "month") {
         if(month==12){//每年最后一个月
             nexttime = new Date((year+1) + "/1/1"); 
         }else{
             nexttime = new Date(year + "/" + (month + 1) + "/1"); //获取本月最后一天;
         }
         nexttimesec = nexttime.getTime();
     } else if(type == "week") {
         var week = tody.getDay(),
             weeknextday, weeksec;
         weeknextday = day + (7 - week);
         var lastDay = new Date(tody.getFullYear(), tody.getMonth() + 1, 0);
         lastDay = lastDay.getDate()
 
         if(weeknextday > lastDay) {
             if((month + 1) > 12) {
                 console.log(year + 1)
                 weeksec = new Date((year + 1) + "/01/" + (weeknextday - lastDay));
             } else {
                 weeksec = new Date(year + "/" + (month + 1) + "/" + (weeknextday - lastDay));
             }
         } else {
             weeksec = new Date(year + "/" + month + "/" + weeknextday);
         }
 
         nexttimesec = weeksec.getTime();
     } else if(type == "day") {
         if(typeof time === "undefined") {
             return false;
         }
         nexttimesec = new Date(time).getTime();
     } else if(type == "hour") {
         if(typeof time === "undefined") {
             return false;
         }
         if(time == 24) {
             islastday = new Date(year, month, 0); //判断是否这个月的最后一天
             
             if(islastday.getDate() === day) {
                 if(islastday.getMonth()==11){//12月31日
                     nexttimesec = new Date((year+1) + "/1/1").getTime();
                 }else{
                     nexttimesec = new Date(year + "/" + (month + 1) + "/" + 1).getTime();
                 }
             } else {
                 nexttimesec = new Date(year + "/" + month + "/" + (day + 1)).getTime();
             }
         } else {
             var num = Math.floor(24 / parseInt(time));
             for(var i = 0; i < num; i++) {
                 if(hour >= i * time && hour < (i + 1) * time) {
                     nexttime = (i + 1) * time;
                 }
             }
             nexttime = nexttime + ":00:00";
             nexttimesec = new Date(year + "/" + month + "/" + day + " " + nexttime).getTime();
 
         }
 
     }
     comparesec = Math.floor((nexttimesec - todysec) / 1000);
     if(comparesec < 0) {
         return false;
     } else {
         var state = calculate1(comparesec);
         if(typeof state === "undefined") {
             return true;
         } else {
             return false;
         }
     }
 }
 
 function calculate1(seconds) {
     var
         second = 1,
         minute = second * 60,
         hour = minute * 60,
         days = 24 * hour,
         nday, nhour, nminute, second;
        var timer = window.setInterval(function() {
            seconds -= 1;
            if(seconds <= 0) {
                window.clearInterval(timer);
                return false;
            }
         nday = Math.floor(seconds / days);
         nhour = Math.floor((seconds - nday * days) / hour);
         nminute = Math.floor((seconds - nday * days - nhour * hour) / minute);
         second = Math.floor(seconds - nday * days - nhour * hour - nminute * minute);
         if(nday < 10) {
             nday = "0" + nday;
         }
         if(nhour < 10) {
             nhour = "0" + nhour;
         }
         if(nminute < 10) {
             nminute = "0" + nminute;
         }
         if(second < 10) {
             second = "0" + second;
         }
         $(".spring_day").html(nday);
         $(".spring_hours").html(nhour);
         $(".spring_minute").html(nminute);
         $(".spring_second").html(second);
     }, 1000);
 
 }
</script>

</body>
</html>
