<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vue-observe-visibility.esm-Ctghb1AA.html</title>
</head>
<body>

<script>
import{n as g}from"./x-icon-Bn0dC0Sg.js";function v(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v=function(e){return typeof e}:v=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(t)}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function k(t,e,r){return e&&S(t.prototype,e),t}function y(t){return A(t)||_(t)||w(t)||I()}function A(t){if(Array.isArray(t))return h(t)}function _(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function w(t,e){if(t){if(typeof t=="string")return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}}function h(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(t){var e;return typeof t=="function"?e={callback:t}:e=t,e}function C(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,i,s,l=function(o){for(var u=arguments.length,f=new Array(u>1?u-1:0),c=1;c<u;c++)f[c-1]=arguments[c];if(s=f,!(n&&o===i)){var b=r.leading;typeof b=="function"&&(b=b(o,i)),(!n||o!==i)&&b&&t.apply(void 0,[o].concat(y(s))),i=o,clearTimeout(n),n=setTimeout(function(){t.apply(void 0,[o].concat(y(s))),n=0},e)}};return l._clear=function(){clearTimeout(n),n=null},l}function p(t,e){if(t===e)return!0;if(v(t)==="object"){for(var r in t)if(!p(t[r],e[r]))return!1;return!0}return!1}var V=function(){function t(e,r,n){O(this,t),this.el=e,this.observer=null,this.frozen=!1,this.createObserver(r,n)}return k(t,[{key:"createObserver",value:function(r,n){var i=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=T(r),this.callback=function(a,o){i.options.callback(a,o),a&&i.options.once&&(i.frozen=!0,i.destroyObserver())},this.callback&&this.options.throttle){var s=this.options.throttleOptions||{},l=s.leading;this.callback=C(this.callback,this.options.throttle,{leading:function(o){return l==="both"||l==="visible"&&o||l==="hidden"&&!o}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(a){var o=a[0];if(a.length>1){var u=a.find(function(c){return c.isIntersecting});u&&(o=u)}if(i.callback){var f=o.isIntersecting&&o.intersectionRatio>=i.threshold;if(f===i.oldResult)return;i.oldResult=f,i.callback(f,o)}},this.options.intersection),g(function(){i.observer&&i.observer.observe(i.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),t}();function d(t,e,r){var n=e.value;if(n)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var i=new V(t,n,r);t._vue_visibilityState=i}}function P(t,e,r){var n=e.value,i=e.oldValue;if(!p(n,i)){var s=t._vue_visibilityState;if(!n){m(t);return}s?s.createObserver(n,r):d(t,{value:n},r)}}function m(t){var e=t._vue_visibilityState;e&&(e.destroyObserver(),delete t._vue_visibilityState)}var R={beforeMount:d,updated:P,unmounted:m};function j(t){t.directive("observe-visibility",R)}var M={version:"2.0.0-alpha.1",install:j};export{R as O,M as p};

</script>

</body>
</html>
