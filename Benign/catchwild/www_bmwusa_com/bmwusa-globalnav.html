<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bmwusa-globalnav.html</title>
</head>
<body>

<script>
/*! BMWUSA Vite Build 1731603678170 */
import{C as h}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/component.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.esm.js";import{$ as c,d as U,r as R,h as p}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-measurement-data.js";import{A as r}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/ada-utils.js";import{B as v,m as K}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.js";import{A as Y}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/autocomplete-keyboard.js";import{i as O}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/is-author.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/baseDomain.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/getbyourl.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/scroll-to.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/uid.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/zipcode.js";new h({el:".globalnav-primary",name:"globalnav-primary Component",events:{},subscriptions:{"window.resizeEnd":"resizeEvt"},currentBreakpoint:window.innerWidth<960?"mobile":"desktop",baseStr:"globalnav-primary",isOpen:!1,init(){this.navHolder=c.qs(this.el),this.mobileIcon=this.navHolder.querySelector(`${this.el}-dealer__mobile-nav-btn-holder`);const e=c.qs(`${this.el}-dealer`);this.bodyContent=c.qs(".content-footer__container");const t=c.qsa(".globalnav-primary__links a, .globalnav-primary-my-bmw a"),i=c.qs(".skipToContent"),s=c.qs(".skipToContent__cta");this.toggleNav=this.toggleNav.bind(this),this.mobileIcon&&this.mobileIcon.addEventListener("click",this.toggleNav),this.expandClassAdd=this.expandClassAdd.bind(this),this.expandClassRemove=this.expandClassRemove.bind(this),e.addEventListener("touchmove",this.killScroll),t.forEach(l=>{l.addEventListener("keydown",a=>{a.keyCode===32&&a.target.click()})}),this.currentBreakpoint==="desktop"&&(s.addEventListener("focusout",()=>{i.classList.remove("showingByTab")}),s.addEventListener("focusin",()=>{i.classList.add("showingByTab")}),s.addEventListener("click",this.focusablePage)),document.documentElement.style.setProperty("--current-nav-height",getComputedStyle(document.querySelector(".globalnav-primary")).getPropertyValue("--globalnav-primary-height")),U.then(()=>{this.updateGlobalNavHeightCSSVar()})},updateGlobalNavHeightCSSVar(){const e=document.querySelector(":root");v.isMobile()&&v.current().breakpoint==="sm"?e.style.setProperty("--globalnav-primary-height","60px"):v.isTablet()?e.style.setProperty("--globalnav-primary-height","70px"):v.isDesktop()&&e.style.setProperty("--globalnav-primary-height","100px")},killScroll(e){e.preventDefault()},toggleNav(e){const t="content-footer__container--kill-scrolling",i="mobile-nav-toggled",s=this.navHolder.querySelector(`${this.el}__bar`);window.innerWidth<1280&&(this.isOpen=!this.isOpen,document.body.classList.toggle(`${this.baseStr}--kill-scroll`),s.classList.toggle(`${this.baseStr}__bar--active`),this.mobileIcon.classList.toggle(`${this.baseStr}-dealer__mobile-nav-btn-holder--active`),this.navHolder.classList.toggle(`${this.baseStr}--active`),this.isOpen?(document.body.classList.add(i),PubSub.publish("local.nav.close",!0),setTimeout(()=>{this.bodyContent&&this.bodyContent.classList.add(t),PubSub.publish("bmw-grid.recalculate")},310)):(document.body.classList.remove(i),this.bodyContent&&this.bodyContent.classList.remove(t),setTimeout(()=>{s.scrollTo(0,0),PubSub.publish("bmw-grid.recalculate"),PubSub.publish("primary.nav.close",!0)},350))),PubSub.publish("nav.toggleMyBMW",!0)},expandClassAdd(e){this.navHolder.classList.add("globalnav-primary__collapse")},expandClassRemove(e){this.navHolder.classList.remove("globalnav-primary__collapse")},focusablePage(e){e.preventDefault(),[".content-footer__container","header + div"].forEach((i,s)=>{if(c.qs(i))return r.trapFocus(c.qs(i),void 0),c.qs('[tab-index*="0"]').focus(),c.qs(i).scrollIntoView({behavior:"smooth"}),!1})},resizeEvt(e,t){this.currentBreakpoint==="desktop"&&(t==null?void 0:t.width)<960?this.currentBreakpoint="mobile":this.currentBreakpoint==="mobile"&&(t==null?void 0:t.width)>=960&&(this.currentBreakpoint="desktop",this.isOpen&&this.toggleNav()),this.updateGlobalNavHeightCSSVar()}});new h({el:".globalnav-primary-search",name:"globalnav-primary-search Component",events:{"keyup .globalnav-primary-search__input":"keyupEvt"},subscriptions:{"window.resizeEnd":"resizeEvt","primary.nav.close":"closeSearch","dealer.open":"closeSearch","my-bmw.open":"closeSearch","fill.clicked":"closeSearch","primary.nav-toggle":"closeSearch","search-results.active-item":"setSearchVal","search-results.close":"closeSearch","search.close":"closeSearch"},count:5,isSearchOpen:!1,isClearSet:!1,searchOpenStr:"globalnav-primary-search--active",clearActiveStr:"globalnav-primary-search__clear-btn--active",componetBaseStr:"globalnav-primary-search",resultStr:"globalnav-primary-search-results",currentBreakpoint:window.innerWidth<1280?"mobile":"desktop",endPointBase:"https://search-api.swiftype.com/api/v1/public/engines/suggest.json?q=",key:"ewC-fTzAJvmjkNzgf7xb",activeSearchTerm:!1,init(){this.search=this.element,this.searchBtn=this.search.querySelector(`.${this.componetBaseStr}__search-btn`),this.closeSearchBtn=this.search.querySelector(`.${this.componetBaseStr}__close-search-btn`),this.clearBtn=this.search.querySelector(`.${this.componetBaseStr}__clear-holder`),this.input=this.search.querySelector(`.${this.componetBaseStr}__input`),this.searchHolder=this.search.querySelector(`.${this.componetBaseStr}__search-holder`),this.mainNavBar=document.querySelector(".globalnav-primary__bar"),this.mainNavTrans=this.mainNavBar.querySelector(".globalnav-primary__trans-holder"),this.primaryNav=document.querySelector(".globalnav-primary"),this.isButtonOnly=this.element.classList.contains("globalnav-primary-search--icon-only"),this.openSearch=this.openSearch.bind(this),this.submitSearch=this.submitSearch.bind(this),this.clearInput=this.clearInput.bind(this),this.mobileSearch=this.mobileSearch.bind(this),this.closeSearch=this.closeSearch.bind(this),this.done=this.done.bind(this),this.closeWithKeyboard=this.closeWithKeyboard.bind(this),this.search.addEventListener("submit",this.submitSearch),this.closeSearchBtn.addEventListener("click",this.closeSearch),this.clearBtn.addEventListener("click",this.clearInput),this.currentBreakpoint==="desktop"?this.desktopEvents():this.mobileEvents()},desktopEvents(){this.search.addEventListener("click",this.openSearch),this.search.addEventListener("keydown",this.openSearch),this.element.addEventListener("keydown",this.closeWithKeyboard)},mobileEvents(){this.searchHolder.addEventListener("click",this.mobileSearch)},killMobileEvents(){this.searchHolder.removeEventListener("click",this.mobileSearch)},killDesktopEvents(){this.search.removeEventListener("click",this.openSearch),this.search.removeEventListener("keydown",this.openSearch),this.element.removeEventListener("keydown",this.closeWithKeyboard)},mobileSearch(e){if(!this.isSearchOpen){const t=this.search.getBoundingClientRect(),i=this.primaryNav.getBoundingClientRect();this.mainNavTrans.addEventListener("touchmove",this.killScroll),this.mainNavBar.classList.add("globalnav-primary__bar--kill-scroll"),this.searchHolder.classList.add(`${this.componetBaseStr}__search-holder--active`),this.search.classList.add(this.searchOpenStr),this.mainNavTrans.style.transform=`translateY(-${t.top-i.height}px)`,this.isSearchOpen=!0,PubSub.publish("search.mobile.toggle",!0)}},openSearch(e){this.isButtonOnly&&!this.isSearchOpen&&(e.type==="click"||e.keyCode&&e.keyCode===13)&&(this.isSearchOpen=!0,this.search.classList.add(this.searchOpenStr),this.toggleFill(!1,!0),document.body.classList.add(`${this.componetBaseStr}--kill-scroll`),PubSub.publish("search.open",{open:!0,event:e,currentBreakpoint:this.currentBreakpoint}))},closeWithKeyboard(e){this.isSearchOpen&&e.keyCode&&e.keyCode===27&&this.closeSearch(e)},closeSearch(e){this.isSearchOpen&&(e&&typeof e!="string"&&e.stopPropagation(),this.currentBreakpoint==="mobile"?(this.searchHolder.classList.remove(`${this.componetBaseStr}__search-holder--active`),this.mainNavBar.classList.remove("globalnav-primary__bar--kill-scroll"),this.search.classList.remove(this.searchOpenStr),this.mainNavTrans.style.transform="",this.mainNavTrans.removeEventListener("touchmove",this.killScroll),this.isSearchOpen=!1):(this.search.classList.remove(this.searchOpenStr),this.isSearchOpen=!1,document.body.classList.remove(`${this.componetBaseStr}--kill-scroll`),this.toggleFill(!0,!1),this.searchBtn.focus()),this.isClearSet&&this.clearInput(),PubSub.publish("search.close",!1))},keyupEvt(e){const t=e.target.value;!this.isClearSet&&t.length>0?(this.clearBtn.classList.add(this.clearActiveStr),this.isClearSet=!0):this.isClearSet&&t.length<=0?(this.clearBtn.classList.remove(this.clearActiveStr),this.isClearSet=!1,PubSub.publish("search.empty")):t.length>=3&&e.which!==40&&e.which!==38?(this.getResults(encodeURI(t)),PubSub.publish("search.reset-active-filter")):t.length<3&&e.which!==9&&(this.prevTitles=[],PubSub.publish("search.empty")),e.which===27?PubSub.publish("search.empty"):t.length>=3&&e.which===40?PubSub.publish("search.arrowKey","down"):t.length>=3&&e.which===38&&PubSub.publish("search.arrowKey","up")},getResults(e){R.get(`${this.endPointBase}${e}&per_page=${this.count}&precise_expiration=true&engine_key=${this.key}`).set("Content-Type","application/json").end(this.done)},prevTitles:[],done(e,t){const s=JSON.parse(t.text).records.page,l=[];let a=!0;s&&s.length>0?(s.forEach(o=>{l.indexOf(o.title)<0&&l.push(o.title)}),a=K(l,this.prevTitles)):PubSub.publish("search.empty"),a||(PubSub.publish("search.results",l),this.prevTitles=l)},clearInput(e){this.input.value="",this.clearBtn.classList.remove(this.clearActiveStr),this.isClearSet=!1,this.prevTitles=[],this.input.focus(),PubSub.publish("search.empty")},killScroll(e){e.preventDefault()},submitSearch(e){var a,o;e.preventDefault();const t=(o=(a=this.search).checkValidity)==null?void 0:o.call(a),i=this.input?this.input.value:null,s=this.search.getAttribute("action"),l=this.activeSearchTerm||i;t&&i&&(this.activeSearchTerm&&this.input&&(this.input.value=this.activeSearchTerm),this.closeSearch(),window.location.href=s+l)},toggleFill(e=!1,t=!1){const i={className:"globalnav-primary-fill--active-search",close:e,open:t};PubSub.publish("nav.toggleFill",i)},resizeEvt(e,t){this.currentBreakpoint==="desktop"&&(t==null?void 0:t.width)<1280?(this.isSearchOpen&&this.closeSearch(),this.killDesktopEvents(),this.mobileEvents(),this.currentBreakpoint="mobile"):this.currentBreakpoint==="mobile"&&(t==null?void 0:t.width)>=1280&&(this.isSearchOpen&&this.closeSearch(),this.desktopEvents(),this.killMobileEvents(),this.currentBreakpoint="desktop")},setSearchVal(e,t){t?this.activeSearchTerm=`&ldquo;${t}&rdquo;`:this.activeSearchTerm=!1}});new h({el:".globalnav-primary-search-results",name:"globalnav-primary-search-results Component",baseStr:"globalnav-primary-search-results",events:{},subscriptions:{"search.open":"toggleDropDown","search.close":"toggleDropDown","search.results":"showResults","search.empty":"clearResults","search.mobile.toggle":"toggleDropDown","search.arrowKey":"activeResults","search.reset-active-filter":"resetActiveResults"},showingPopular:!0,showingSuggestions:!1,suggestionHasRun:!1,desktopWrapperElement:null,currentBreakpoint:window.innerWidth>=1280?"desktop":"mobile",beforeInit(){this.autocompleteKeyboard=new Y,this.suggestionsHolder=this.element.querySelector(`${this.el}__suggestions-content`)},init(){this.element.querySelector(`${this.el}__content-holder`).addEventListener("click",this.linksClicked),this.element.addEventListener("keydown",this.closeWithKeyboard),this.desktopWrapperElement=this.element.closest(".globalnav-primary-search__show-on-large"),this.isDesktopEl=this.currentBreakpoint==="desktop"&&!!this.desktopWrapperElement,this.trapFocus=null},linksClicked(e){e.target&&e.target.nodeName.toLowerCase()==="a"&&PubSub.publish("search-results.close")},closeWithKeyboard(e){e.keyCode===27&&PubSub.publish("search-results.close")},toggleDropDown(e,t){if(t&&t.open&&t.currentBreakpoint==="desktop"&&this.isDesktopEl){this.resetTrapFocus(!0),this.element.classList.add(`${this.baseStr}--active`);const i=this.element.querySelector(".globalnav-primary-search__input");i&&(i.value="",i.focus()),this.element.querySelector(`${this.el}__content-holder`).focus()}else!t&&this.isDesktopEl&&(this.element.classList.remove(`${this.baseStr}--active`),this.clearResults(),this.resetTrapFocus(!1))},showResults(e,t){this.isDesktopEl&&(this.showingPopular?(this.showingPopular=!1,this.togglePopular(!1),this.suggestionHasRun?this.displayList(t):(this.suggestionHasRun=!0,this.suggestionsHolder.appendChild(this.resultsTemplateList(t)),this.suggestionsList=this.suggestionsHolder.querySelector("ul").children),this.toggleSuggestions(),this.showingSuggestions=!0):this.showingSuggestions&&this.displayList(t),this.resetTrapFocus(!0))},resetTrapFocus(e){if(e){this.trapFocus&&this.trapFocus.removeTrapEventListener();const t=this,i=document.body.querySelectorAll(".globalnav-primary-search__show-on-large .globalnav-primary-search-results"),s=document.body.querySelector(".globalnav-primary-search__show-on-large .globalnav-primary-search__close-search-btn");i[0]&&(t.trapFocus=r.trapFocus(i[0],s),t.trapFocus.addTrapFocus())}else this.trapFocus&&this.trapFocus.removeTrapEventListener()},displayList(e){this.suggestionsHolder.querySelector("ul").innerHTML=this.makeList(e)},resultsTemplateList(e){const t=document.createElement("ul");return t.className="globalnav-primary-search-results__list",t.innerHTML=this.makeList(e),t},togglePopular(e=!0){const t=this.element.querySelector(`${this.el}__popular-content`);e?t.classList.remove(`${this.baseStr}__popular-content--inactive`):t.classList.add(`${this.baseStr}__popular-content--inactive`)},toggleSuggestions(e=!0){e?this.suggestionsHolder.classList.remove(`${this.baseStr}__suggestions-content--inactive`):this.suggestionsHolder.classList.add(`${this.baseStr}__suggestions-content--inactive`)},makeList(e){const t=document.querySelector(".globalnav-primary-search").getAttribute("action"),i=window.innerWidth>1280?100:45;let s="";return e&&e.length>0&&e.forEach(l=>{let a=l;if(typeof a!="string")return s;l.length>i&&(a=`${l.substring(0,i)}...`),a=a.replace(/\s+\u002D+\s|\s+\u2014+\s/g," – ");const o=a.split(" – ");o.length>2&&(a=o.slice(0,2).join(" – ")),s+=`<li><a href="${t}${encodeURI(l)}">${a.trim()}</a></li>`}),s},activeResults(e,t){const i=this.suggestionsList.length,s="search-auto-active",l=this.suggestionsHolder.querySelector(`.${s}`),o=this.autocompleteKeyboard.runKeyboardHighlights({max:i,activeStr:s,resultItems:this.suggestionsList,activeItem:l},t).querySelector("a").textContent;PubSub.publish("search-results.active-item",o.trim())},checkActiveFilter(){const e=this.suggestionsHolder.querySelector(".search-auto-active");e&&e.classList.remove("search-auto-active")},resetActiveResults(){this.autocompleteKeyboard.reset(),this.checkActiveFilter(),PubSub.publish("search-results.active-item",!1)},clearResults(){this.toggleSuggestions(!1),this.togglePopular(),this.resetActiveResults(),this.suggestionHasRun&&(this.resetTrapFocus(!0),this.suggestionsHolder.querySelector("ul").innerHTML="",this.showingPopular=!0,this.showingSuggestions=!1)}});const V=function(e={},t){let i="";for(const a in t)if(t[a].id!=="logOutMyBMW"){let o="";t[a].icon&&t[a].icon.iconId?o=`<figure class="${t[a].icon.css?t[a].icon.css:""}">
                  <svg>
                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="${t[a].icon.iconId}"></use>
                  </svg>
                </figure>`:t[a].icon&&t[a].icon.iconUrl&&(o=`<img src="${t[a].icon.iconUrl}"></img>`),i+=`<li>
                  <a id="${t[a].id?t[a].id:""}" href="${t[a].url}" title="${t[a].title?t[a].title:""}" target="${t[a].isNewTab?"_blank":"_self"}">
                    <div class="wrapper-icon">${o}</div>
                    <span>${t[a].name}</span>
                  </a>
                </li>`}const s=t.logOutMyBMW;return`<div class="globalnav-primary-my-bmw__profile-inner-shell">
                <nav class="globalnav-primary-my-bmw__profile-options">
                  <ul class="globalnav-primary-my-bmw__profile-list">
                    ${i}
                  </ul>
                  <a id="${s.id}" href="${s.url}?client_id=${e.gcid}" title="${s.title?s.title:""}"><span>${s.name}</span></a>
                </nav>
              </div>`},G={home:{name:"Home",title:"",url:"",id:"home",icon:{iconId:"#icon-bmw-home",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""},myGarage:{name:"My Garage",title:"",url:"",id:"myGarage",icon:{iconId:"#icon-my-bmw-car",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""},myAccount:{name:"My Account",title:"",url:"",id:"myAccount",icon:{iconId:"#icon-my-bmw-money",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:"",css:"globalnav-primary-my-bmw__profile--money"},myProfile:{name:"My Profile",title:"",url:"",id:"myProfile",icon:{iconId:"#icon-nav-profile",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""},bmwLogin:{name:"BMW Login",title:"",url:"",id:"bmwLogin",icon:{iconId:"#icon-my-bmw-edit",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""},logOutMyBMW:{name:"Log Out of My BMW",title:"",url:"",id:"logOutMyBMW",icon:{iconId:"",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""}};new h({el:".globalnav-primary-my-bmw",name:"globalnav-primary-my-bmw Component",currentBreakpoint:window.innerWidth<1280?"mobile":"desktop",baseStr:"globalnav-primary-my-bmw",subscriptions:{"window.resizeEnd":"resizeEvt","nav.toggleMyBMW":"toggleMyBMW","fill.clicked":"closeProfile","dealer.open":"closeProfile","search.open":"closeProfile","primary.nav-toggle":"closeProfile"},sessionData:{},init(){var t,i,s;this.myBMW=this.element;const e=sessionStorage.getItem("User_Data");((s=(i=(t=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:t.featureFlags)==null?void 0:i.mybmwLinkStatus)==null?void 0:s.toLowerCase())!=="enabled"&&!e||(c.removeClass(this.myBMW,"disabled"),this.profileBtn=this.element.querySelector(`${this.el}__profile-btn`),this.dealer=document.querySelector(".globalnav-primary-dealer__bar"),this.profileElem=document.querySelector(`.${this.baseStr}__profile-dropdown`),this.toggleProfile=this.toggleProfile.bind(this),this.closeWithKeyboard=this.closeWithKeyboard.bind(this),this.profileElem.addEventListener("keydown",this.closeWithKeyboard),e&&(this.sessionData=JSON.parse(e),this.profileBtn&&this.profileBtn.addEventListener("click",this.toggleProfile)),this.toggleLoggedInState(e))},toggleProfile(e){this.myBMW.classList.contains(`${this.baseStr}--dropdown-active`)?(this.toggleFill(!0),window.removeEventListener("scroll",this.toggleProfile),this.currentBreakpoint!=="desktop"&&setTimeout(()=>{this.dealer.classList.remove("overflow__visible")},450),this.profileBtn.focus()):(PubSub.publish("my-bmw.open"),this.toggleFill(!1,!0),this.currentBreakpoint!=="desktop"?this.dealer.classList.add("overflow__visible"):window.addEventListener("scroll",this.toggleProfile),this.profileElem.querySelector(".globalnav-primary-my-bmw__profile-list a").focus(),this.trapFocus=r.trapFocus(this.profileElem),this.trapFocus.addTrapFocus()),this.myBMW.classList.toggle(`${this.baseStr}--dropdown-active`),this.profileElem.classList.toggle(`${this.baseStr}--dropdown-active`)},closeProfile(){this.myBMW.classList.contains(`${this.baseStr}--dropdown-active`)&&(this.myBMW.classList.remove(`${this.baseStr}--dropdown-active`),this.profileElem.classList.remove(`${this.baseStr}--dropdown-active`),this.profileBtn.focus(),this.toggleFill(!0))},toggleLoggedInState(e){e&&(this.myBMW.classList.toggle(`${this.baseStr}--logged-in`),this.populateLoggedInDropDown())},populateLoggedInDropDown(){var l,a,o,n,d,m,b,g,y,f,S,w,_,L,k,N,B,E,$,T,M,C,D,A,q,F,P,x,I,W;const e=window.location.href.indexOf("test-mygarage")>-1||window.location.href.indexOf("uat")>-1,t=G;e?(t.home.url=(o=(a=(l=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:l.endpoints)==null?void 0:a.myBMWTesting)==null?void 0:o.myBmwHomeUrl,t.myGarage.url=(m=(d=(n=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:n.endpoints)==null?void 0:d.myBMWTesting)==null?void 0:m.myBmwMyGarageUrl,t.myAccount.url=(y=(g=(b=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:b.endpoints)==null?void 0:g.myBMWTesting)==null?void 0:y.myBmwMyAccountUrl,t.myProfile.url=(w=(S=(f=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:f.endpoints)==null?void 0:S.myBMWTesting)==null?void 0:w.myBmwMyProfileUrl,t.bmwLogin.url=(k=(L=(_=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:_.endpoints)==null?void 0:L.myBMWTesting)==null?void 0:k.myBmwBmwLoginUrl,t.logOutMyBMW.url=(E=(B=(N=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:N.endpoints)==null?void 0:B.myBMWTesting)==null?void 0:E.myBmwLogOutUrl):(t.home.url=(T=($=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:$.endpoints)==null?void 0:T.myBmwHomeUrl,t.myGarage.url=(C=(M=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:M.endpoints)==null?void 0:C.myBmwMyGarageUrl,t.myAccount.url=(A=(D=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:D.endpoints)==null?void 0:A.myBmwMyAccountUrl,t.myProfile.url=(F=(q=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:q.endpoints)==null?void 0:F.myBmwMyProfileUrl,t.bmwLogin.url=(x=(P=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:P.endpoints)==null?void 0:x.myBmwBmwLoginUrl,t.logOutMyBMW.url=(W=(I=window==null?void 0:window.bmwClientSideConfigurations)==null?void 0:I.endpoints)==null?void 0:W.myBmwLogOutUrl);const i=V(this.sessionData,t),s=this.profileElem;s.innerHTML=i,document.querySelectorAll(".globalnav-primary-my-bmw__profile-list a").forEach(function(H){H.href===location.href&&H.classList.add("mybmw-active-link")})},toggleMyBMW(e){this.currentBreakpoint!=="desktop"&&(this.closeProfile(),this.myBMW.classList.toggle(`${this.baseStr}--active`))},toggleFill(e=!1,t=!1){const i={className:"globalnav-primary-fill--active-my-bmw",close:e,open:t};PubSub.publish("nav.toggleFill",i)},resizeEvt(e,t){(t==null?void 0:t.width)<960&&this.currentBreakpoint==="desktop"?this.currentBreakpoint="mobile":(t==null?void 0:t.width)>=960&&this.currentBreakpoint==="mobile"&&(this.currentBreakpoint="desktop",this.myBMW.classList.remove(`${this.baseStr}--active`))},closeWithKeyboard(e){e.keyCode===27&&this.closeProfile()}});new h({el:".globalnav-primary-location-bar",name:"globalnav-primary-location-bar Component",subscriptions:{"nav.toggleMyBMW":"toggleMyBMW","window.resizeEnd":"resizeEvt","zip.update":"setupData",dealerUpdate:"dealerUpdateHandler","dealer.update-bar":"dealerUpdateHandler","dealermap.component-embedded":"enableEmbeddedMap","dealermap.dealer-primary-toggle":"primaryToggleEvt","whereIWantForm.dealer.setGlobalFromForm":"setInfoFromForm",dealerUpdateFromCookie:"updateFromCookie","globalnav.embedded.dealerInfo":"updateFromCookie","dealermap.frombyo":"dealerBarClick"},currentBreakpoint:window.innerWidth<1280?"mobile":"desktop",baseStr:"globalnav-primary-location-bar",dealerData:{},embeddedMode:!1,beforeInit(){this.dealerData=null,this.location=this.element.querySelector(`${this.el}__set-location`),this.dealerContent=this.element.querySelector(`${this.el}__dealer-content`),this.dealerInfo=this.element.querySelector(`${this.el}__dealer-info`),this.updateBar=this.updateBar.bind(this),this.dealerTemp=this.dealerTemp.bind(this),this.macoTemp=this.macoTemp.bind(this),this.dealerBarClick=this.dealerBarClick.bind(this),this.triggerMapDisplay=this.triggerMapDisplay.bind(this),this.updateFromCookie=this.updateFromCookie.bind(this),this.location.addEventListener("click",this.triggerMapDisplay),this.dealerContent.addEventListener("click",this.dealerBarClick)},init(){window.addEventListener("globalnav.embedded.dealerInfo",this.updateFromCookie),this.updateFromCookie(),this.pageLoad=!0},updateFromCookie(){p.updateFromCookie().then(()=>{this.processDealerInfo()})},enableEmbeddedMap(e){this.embeddedMode=!0},setInfoFromForm(e,t){(!this.dealerData||this.dealerData.dealer&&!this.dealerData.dealer.IsPrimary)&&p.updateFromZip(t,null).then(()=>{this.processDealerInfo(!0)})},processDealerInfo(e){this.dealerData=p.getDealerInfo(),this.payload=p.getDealerList(),this.dealerData.dealer&&this.dealerData.maco?(this.isPrimarySet=this.dealerData.dealer.IsPrimary,this.toggleBarDisplay(null,this.dealerData,e),this.pageLoad&&(this.dealerData.pageLoad=!0),PubSub.publish("nav.dealerSet",this.dealerData)):this.isPrimarySet=!1,!this.payload&&this.dealerData&&(this.payload=this.dealerData.dealer)},setupData(e,t){this.dealerData={dealer:t.dealer,maco:t.maco},this.payload=t.payload,this.toggleBarDisplay(null,t)},toggleBarDisplay(e,t,i){i&&(t.dealer.IsPrimary=!1),this.hideDefaultLocationState(),this.updateBar(t),setTimeout(()=>{this.displayUpdate(),i||document.querySelector(".what-i-want-inventory")||(this.pageLoad&&(t.dealer.pageLoad=!0,this.pageLoad=!1),PubSub.publish("nav.dealerSet",t.dealer))},360)},toggleMyBMW(e){this.currentBreakpoint!=="desktop"&&(this.location.classList.toggle(`${this.baseStr}__set-location--inactive`),this.dealerInfo.classList.toggle(`${this.baseStr}__set-location--inactive`))},triggerMapDisplay(e){e.preventDefault(),e.currentTarget.blur(),this.embeddedMode?document.querySelector(".standalone-dealer-map").querySelector('input[name="location-search"]').focus():(setTimeout(()=>{document.querySelector(".globalnav-map-popup__close-btn").focus()},500),PubSub.publish("dealermap.popover-open"),PubSub.publish("dealermap.search-view",!0))},showLocation(){this.location.classList.remove(`${this.baseStr}__set-location--inactive`)},dealerUpdateHandler(e,t){const i=this.checkDefaultState();this.dataIsSet=!0,this.newPrimaryData?(this.dealerData=this.newPrimaryData,this.payload=this.dealerData.payload):(!this.isPrimarySet||this.isPrimarySet&&t.primaryToggle)&&(this.dealerData=t,this.payload=this.dealerData.payload),i?this.updateBar(t):this.toggleBarDisplay(null,t),PubSub.publish("nav.dealerSet",t.dealer)},primaryToggleEvt(e,t){this.isPrimarySet=t.primary,this.isPrimarySet?this.newPrimaryData=t:this.newPrimaryData=!1},checkDefaultState(){const e=`${this.baseStr}__set-location--inactive`;return this.location.classList.contains(e)},updateBar(e){const{dealerContent:t,macoTemp:i,dealerTemp:s}=this,{IsPrimary:l}=e?e.dealer:null;let a;e!=null&&e.maco&&(this.updateMacoLayer(e.maco),p.setMaco(e.maco)),!l&&e?(this.isPrimarySet=!1,a=t.dataset.local,t.classList.remove(`${this.baseStr}__set-flex`),t.innerHTML=`${i(e.maco)} ${s(a,e.dealer,!0)}`):(this.isPrimarySet=!0,a=t.dataset.primary,t.classList.add(`${this.baseStr}__set-flex`),t.innerHTML=`${s(a,e.dealer)}`)},dealerTemp(e,t,i=!1){const{baseStr:s,dealerCharacterMax:l,getMaxCount:a,ellipse:o}=this,{Name:n,ZipCode:d}=t,m=i?"local-dealer":"primary-dealer";return`<div class="${s}__dealer-buttons">
          <span class="${this.baseStr}__dealer-${m} label-2">${e}</span>
          <button class="${s}__dealer-name label-2--bold">
            <svg class="globalnav-primary-find-dealer__location-icon">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-nav-marker-header"></use>
            </svg>${n}
          </button>
          <button class="${s}__dealer-edit" aria-label="Edit Dealer" tabindex = "-1" >
            <svg class="${s}__dealer-edit__icon">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-edit-pencil">
            </svg>
          </button>
        </div>`},macoTemp(e){let t="";if(e.Code!=="0000"&&e.Code!==""){const i=e.Display?e.Display:e.MacoDisplay;e.Url?e.Url:e.MacoUrl,t=`<span class="${this.baseStr}__maco-link">
          ${i}
        </span>`}return t},hideDefaultLocationState(){this.location.classList.add(`${this.baseStr}__set-location--inactive`),setTimeout(()=>{this.location.classList.add(`${this.baseStr}__set-location--hide`)},350)},displayUpdate(){const{dealerInfo:e}=this;e.classList.add(`${this.baseStr}__dealer-info--display`),setTimeout(()=>{e.classList.remove(`${this.baseStr}__dealer-info--hide`)},50),this.mobileDealerEditToggleFocusable()},dealerBarClick(e){var t,i,s;this.payload||(this.payload=p.getDealerList()),e&&((t=e==null?void 0:e.target)!=null&&t.matches(`.${this.baseStr}__dealer-edit`))?(this.embeddedMode||PubSub.publish("dealermap.popover-open"),((i=this.payload)==null?void 0:i.length)<=0?PubSub.publish("dealermap.search-view"):PubSub.publish("dealermap.search-results",{Results:this.payload,Maco:this.dealerData.maco,newSearch:!0})):e&&((s=e==null?void 0:e.target)!=null&&s.matches(`.${this.baseStr}__dealer-name`))&&(this.embeddedMode||PubSub.publish("dealermap.popover-open"),this.dealerData.dealer?PubSub.publish("dealermap.dealer-view",{dealer:[this.dealerData.dealer],payload:this.payload,newSearch:!0,Maco:this.dealerData.maco}):PubSub.publish("dealermap.search-view"))},mobileDealerEditToggleFocusable(){const e=this.element.querySelector(`.${this.baseStr}__dealer-edit`);e&&((this.currentBreakpoint==="mobile"||this.currentBreakpoint==="tablet")&&this.dealerInfo.classList.contains(`${this.baseStr}__dealer-info--display`)?e.tabIndex=0:e.tabIndex=-1)},resizeEvt(e,t){(t==null?void 0:t.width)<768&&this.currentBreakpoint!=="mobile"?(this.currentBreakpoint="mobile",this.dataIsSet&&this.updateBar(this.dealerData,!0)):(t==null?void 0:t.width)>=768&&(t==null?void 0:t.width)<1280&&this.currentBreakpoint!=="tablet"?(this.currentBreakpoint="tablet",this.dataIsSet&&this.updateBar(this.dealerData,!0)):(t==null?void 0:t.width)>=1280&&this.currentBreakpoint!=="desktop"&&(this.currentBreakpoint="desktop",this.showLocation(),this.dataIsSet&&this.updateBar(this.dealerData,!0)),this.mobileDealerEditToggleFocusable()},updateMacoLayer(e){this.maco={MacoDisplay:null,MacoCode:null,MacoName:null,MacoUrl:null},GlobalMessage&&(this.maco.MacoCode=e.MacoCode||e.Code,this.maco.MacoDisplay=e.MacoDisplay||e.Display,this.maco.MacoName=e.MacoName||e.Name,this.maco.MacoUrl=e.MacoUrl||e.Url,GlobalMessage("measure.globalnav.maco",this.maco))}});new h({el:".globalnav-primary-drop-down",name:"globalnav-primary-drop-down Component",baseSrt:"globalnav-primary-drop-down",isRunning:!1,subscriptions:{"window.resizeEnd":"resizeEvt","search.open":"closeActiveState","dealer.open":"closeActiveState","my-bmw.open":"closeActiveState","fill.clicked":"closeActiveState","mobile.dropDown.close":"closeMobile"},currentBreakpoint:window.innerWidth>=1280?"desktop":"mobile",beforeInit(){this.mainNav=document.querySelector(".globalnav-primary__bar"),this.navToggle=this.navToggle.bind(this),this.openMobile=this.openMobile.bind(this)},init(){this.currentBreakpoint!=="mobile"?this.desktopEvt("on"):(this.mobileEvt("on"),this.disableFocusableOnNav())},desktopEvt(e){e==="on"?this.element.addEventListener("click",this.navToggle):this.element.removeEventListener("click",this.navToggle)},mobileEvt(e){e==="on"?this.element.addEventListener("click",this.openMobile):this.element.removeEventListener("click",this.openMobile)},navToggle(e){const t=e.currentTarget,i=t.dataset.flyout,s=document.querySelector(`${this.el}--open-dropdown`),l=document.querySelector(`[data-flyout="${i}"]:not(.globalnav-primary__main-links):not(.globalnav-primary__secondary-links)`),a=l.querySelector(".globalnav-primary-drop-down-nav:not(.globalnav-primary__main-links):not(.globalnav-primary__secondary-links)"),o=l.querySelector(".globalnav-primary-drop-down-nav__flyout-content a"),n=l.querySelector("#zip_code");PubSub.publish("primary.dropdown.toggle"),!this.isRunning&&i!=="vehicles"?(this.isRunning=!0,this.checkState(t,s),t.classList.toggle(`${this.baseSrt}--open-dropdown`),PubSub.publish("primary.nav-toggle",i),setTimeout(()=>{a.classList.contains("globalnav-primary-drop-down-nav--open-dropdown")&&(o?o.focus():n?n.focus():t&&t.focus()),this.isRunning=!1},400)):i==="vehicles"&&(this.checkState(t,s),PubSub.publish("primary.nav-toggle",i))},checkState(e,t){!e.classList.contains(`${this.baseSrt}--open-dropdown`)&&t&&this.closeActiveState()},closeActiveState(){const e=document.querySelector(`${this.el}--open-dropdown`);e&&e.classList.remove(`${this.baseSrt}--open-dropdown`)},openMobile(e){this.mainNav.classList.add("globalnav-primary__bar--slide"),PubSub.publish("primary.nav.open.mobile",e.currentTarget.dataset.flyout)},closeMobile(e){this.mainNav.classList.remove("globalnav-primary__bar--slide")},disableFocusableOnNav(){r.restrictFocus({container:this.mainNav.querySelector(".globalnav-primary__nav")}),r.restrictFocus({container:document.querySelector(".globalnav-primary-my-bmw")})},enableFocusableOnNav(){const e=[".globalnav-primary__main-links button",".globalnav-primary__main-links a",".globalnav-primary__secondary-links button",".globalnav-primary__secondary-links a"],t=[".globalnav-primary-my-bmw__portal-holder a"];r.restrictFocus({container:this.mainNav.querySelector(".globalnav-primary__nav"),focusableItems:e}),r.restrictFocus({container:document.querySelector(".globalnav-primary-my-bmw"),focusableItems:t})},resizeEvt(e,t){this.currentBreakpoint==="desktop"&&(t==null?void 0:t.width)<1280?(this.currentBreakpoint="mobile",this.closeActiveState(),this.desktopEvt("off"),this.mobileEvt("on"),this.disableFocusableOnNav()):this.currentBreakpoint==="mobile"&&(t==null?void 0:t.width)>=1280&&(this.currentBreakpoint="desktop",this.closeActiveState(),this.desktopEvt("on"),this.mobileEvt("off"),this.enableFocusableOnNav())}});new h({el:".globalnav-primary-drop-down-nav-holder",name:"globalnav-primary-drop-down-nav-holder Component",baseSrt:"globalnav-primary-drop-down-nav-holder",vehicleBaseStr:"globalnav-primary-vehicles__outer-shell",dropDownNavBase:"globalnav-primary-drop-down-nav",subscriptions:{"window.resizeEnd":"resizeEvt","primary.nav.close":"primaryClose","primary.nav.vehicleOpen":"vehicleOpenCheck","primary.nav-toggle":"dropDownToggle","primary.nav.open.mobile":"mobileSetup","my-bmw.open":"closeDropDown","search.open":"closeDropDown","dealer.open":"closeDropDown","fill.clicked":"closeDropDown"},adaFocusableItems:[".globalnav-primary__main-links button",".globalnav-primary__main-links a",".globalnav-primary__secondary-links button",".globalnav-primary__secondary-links a"],currentBreakpoint:window.innerWidth>=1280?"desktop":"mobile",vehicleHasRun:!1,init(){const e=this.element.querySelectorAll(`.${this.dropDownNavBase}__back`);this.trapFocus=null,this.runVehicle=this.runVehicle.bind(this),this.toggleDropdown=this.toggleDropdown.bind(this),this.vehicleClose=this.vehicleClose.bind(this),this.closeMobile=this.closeMobile.bind(this),this.keycheck=this.keycheck.bind(this),this.closeWithKeyboard=this.closeWithKeyboard.bind(this),this.mainNavBar=document.querySelector(".globalnav-primary__nav"),this.tabsHolder=this.element.querySelector(".globalnav-primary-vehicles__tab-holder"),e.forEach(t=>{t.addEventListener("click",this.closeMobile)}),this.element.addEventListener("keydown",this.closeWithKeyboard)},closeWithKeyboard(e){if(e.keyCode===27){this.closeDropDown();const t=document.querySelector(".globalnav-primary-drop-down--open-dropdown");t&&(document.querySelector(".globalnav-primary-drop-down--open-dropdown button").focus(),t.classList.remove("globalnav-primary-drop-down--open-dropdown"))}},primaryClose(){const e=document.querySelector(".mobile--open-dropdown-mobile");e&&(e.classList.add("mobile--primary-close"),setTimeout(()=>{e.classList.add("mobile--reset")},301),setTimeout(()=>{this.closeMobile(),e.classList.remove("mobile--primary-close"),e.classList.remove("mobile--reset")},405))},runVehicle(){this.vehicleHasRun||(this.vehicleHasRun=!0,this.vehicleSetUp()),this.currentBreakpoint!=="mobile"?this.vehicleOpen():this.openMobile("vehicles"),this.closeDropDown(!0,!1)},vehicleSetUp(){this.closeCornerBtnVehicles=document.querySelector(".globalnav-primary-vehicles__corner-close-button"),this.vehiclesContent=document.querySelector(".globalnav-primary-vehicles"),this.vehiclesCloseMobile=document.querySelector(".globalnav-primary-vehicles__header"),this.currentBreakpoint!=="desktop"?this.vehicleMobileEvt("on"):this.vehicleDesktopEvt("on"),this.vehiclesContent.querySelectorAll("img[data-src]").forEach(e=>{e.setAttribute("src",e.dataset.src),e.onload=()=>{e.removeAttribute("data-src")}})},vehicleDesktopEvt(e){e==="on"?this.closeCornerBtnVehicles.addEventListener("click",this.vehicleClose):this.closeCornerBtnVehicles.removeEventListener("click",this.vehicleClose)},vehicleMobileEvt(e){e==="on"?this.vehiclesCloseMobile.addEventListener("click",this.closeMobile):this.vehiclesCloseMobile.removeEventListener("click",this.closeMobile)},vehicleOpenInitial(){const e=document.querySelector('.globalnav-primary-vehicles__tab[data-filter="all models"]');e.classList.contains("globalnav-primary-vehicles__tab--active")&&(e.querySelectorAll("a").forEach(t=>t.style.visibility="visible"),this.currentBreakpoint==="mobile"&&(this.element.querySelector(".globalnav-primary-vehicles__header > button").style.visibility="visible"),window.innerWidth<768&&this.element.querySelector(".globalnav-primary-vehicles__filter").querySelectorAll("button").forEach(i=>i.style.visibility="hidden"))},vehicleOpen(){const e=this.element.querySelector('div[data-flyout="vehicles"]');this.toggleScroll("on"),e.classList.add(`${this.vehicleBaseStr}--active`),window.addEventListener("keydown",this.keycheck);const t=document.querySelector(".globalnav-primary-drop-down-nav-holder .globalnav-primary-vehicles__outer-shell--active .globalnav-primary-vehicles");t.scrollTop=0,this.holderOpen();const i=document.querySelector(".globalnav-primary-vehicles");i.querySelector(".globalnav-primary-vehicles__header > button").style.visibility="hidden",this.trapFocus&&this.trapFocus.removeTrapEventListener(),r.restrictFocus({container:e,dynamicContent:".globalnav-primary-vehicles"}),setTimeout(()=>{const s=e.querySelector(".globalnav-primary-vehicles__filter-type--active");s.parentNode.getAttribute("data-child-filter")!=="electrified"&&r.restrictFocus({container:e.querySelector('.globalnav-primary-vehicles__tab[data-filter="electrified"]')}),this.trapFocus=r.trapFocus(i),this.trapFocus.addTrapFocus(),s.focus()},300)},vehicleClose(){const e=this.element.querySelector('div[data-flyout="vehicles"]');e.classList.contains(`${this.vehicleBaseStr}--active`)&&(e.classList.remove(`${this.vehicleBaseStr}--active`),this.toggleScroll(),this.holderClose(),setTimeout(()=>{document.querySelector('.globalnav-primary__main-links.globalnav-primary-drop-down[data-flyout="vehicles"] button').focus(),PubSub.publish("nav.vehicle-close")},400),this.trapFocus.removeTrapEventListener(),window.removeEventListener("keydown",this.keycheck),r.restrictFocus({container:this.mainNavBar,focusableItems:this.adaFocusableItems}),r.restrictFocus({container:e}))},keycheck(e){(e.which===27||e.key==="Escape")&&this.vehicleClose()},toggleDropdown(e){const t=this.element.querySelector(`div[data-flyout="${e}"] .${this.dropDownNavBase}`),i=e!=="vehicles"?document.querySelector(`li[data-flyout="${e}"] > button`):void 0;t.classList.contains(`${this.dropDownNavBase}--open-dropdown`)?(this.closeDropDown(),this.mainNavBar.removeEventListener("keydown",this.closeWithKeyboard)):(this.closeDropDown(!0),this.openDropDown(t,i),this.mainNavBar.addEventListener("keydown",this.closeWithKeyboard))},toggleScroll(e="off"){e==="on"?document.body.classList.add("globalnav-primary--kill-scroll"):document.body.classList.remove("globalnav-primary--kill-scroll")},openDropDown(e,t){this.toggleScroll("on"),this.holderOpen(),e.classList.add(`${this.dropDownNavBase}--open-dropdown`),this.toggleFill(!1,!0),setTimeout(()=>{this.trapFocus=r.trapFocus(this.element.querySelector(`.${this.dropDownNavBase}--open-dropdown .${this.dropDownNavBase}__content`),t),this.trapFocus.addTrapFocus()},100)},closeDropDown(e=!1,t=!0){const i=this.element.querySelector(`.${this.dropDownNavBase}--open-dropdown`);(typeof e=="string"||t)&&this.toggleScroll(),i&&(i.classList.remove(`${this.dropDownNavBase}--open-dropdown`),this.trapFocus.removeTrapEventListener(),e!==!0&&this.holderClose(),this.toggleFill(!0))},holderClose(){setTimeout(()=>{this.element.classList.remove("globalnav-primary-drop-down-nav-holder--active")},350)},holderOpen(){this.element.classList.add("globalnav-primary-drop-down-nav-holder--active"),this.vehicleOpenInitial()},dropDownToggle(e,t){const i=t.toLowerCase();switch(i){case"vehicles":this.runVehicle();break;default:this.toggleDropdown(i)}},mobileSetup(e,t){const i=t.toLowerCase();switch(i){case"vehicles":this.runVehicle(i);break;default:this.openMobile(i)}},openMobile(e){const t=e.toLowerCase(),i=t==="vehicles"?"vehicles":"dropdown",s=this.element.querySelector(`div[data-flyout="${t}"] .${i}`);this.holderOpen(),s.classList.add("mobile--open-dropdown-mobile"),this.trapFocus&&this.trapFocus.removeTrapEventListener(),r.restrictFocus({container:s,dynamicContent:".globalnav-primary-vehicles"}),setTimeout(()=>{this.trapFocus=r.trapFocus(s),this.trapFocus.addTrapFocus()},300)},closeMobile(){const e=document.querySelector(".mobile--open-dropdown-mobile");e&&(PubSub.publish("mobile.dropDown.close"),e.classList.remove("mobile--open-dropdown-mobile"),this.holderClose(),this.trapFocus.removeTrapEventListener())},vehicleOpenCheck(){window.innerWidth<768?this.openMobile():this.vehicleOpen()},toggleFill(e=!1,t=!1){const i={className:"globalnav-primary-fill--dropdown-open",close:e,open:t};PubSub.publish("nav.toggleFill",i)},resizeEvt(e,t){this.currentBreakpoint==="desktop"&&(t==null?void 0:t.width)<1280?(this.currentBreakpoint="mobile",this.closeDropDown(),this.vehicleHasRun&&(this.vehicleClose(),this.vehicleDesktopEvt("off"),this.vehicleMobileEvt("on")),this.toggleScroll()):this.currentBreakpoint==="mobile"&&(t==null?void 0:t.width)>=1280&&(this.currentBreakpoint="desktop",this.closeMobile(),this.vehicleHasRun&&(this.vehicleClose(),this.vehicleDesktopEvt("on"),this.vehicleMobileEvt("off")),this.toggleScroll())}});new h({el:".globalnav-primary-vehicles",name:"globalnav-primary-vehicles Component",baseSrt:"globalnav-primary-vehicles",subscriptions:{"window.resizeEnd":"resizeEvt",resetTab:"defaultTab","nav.vehicle-close":"defaultTab"},isDefaultState:!0,lazyLoad:!0,sortedCarsList:{},currentBreakpoint:window.innerWidth<768?"mobile":"desktop",isRetina:window.devicePixelRatio===2,imageWidths:{mobile1x:"350",mobile2x:"700",desktop1x:"450",desktop2x:"900"},isAuthor:!!O(),init(){this.isAuthor||(this.nav=this.element.querySelector(`${this.el}__filter`),this.vehicles=this.element,this.tabsHolder=this.element.querySelector(`${this.el}__tab-holder`),this.tabs=this.element.querySelectorAll(`${this.el}__tab`),this.changeTab=this.changeTab.bind(this),this.nav.addEventListener("click",this.changeTab),this.initTab(),this.sortCars(),r.restrictFocus({container:this.element.querySelector('.globalnav-primary-vehicles__tab[data-filter="electrified"]')}))},initTab(){const e=this.element.querySelector(`${this.el}__filter-type--active`);this.setActiveBar(e.offsetLeft,e.offsetWidth)},sortCars(){const e=this.tabs[0].querySelector(`.${this.baseSrt}__cars .aem-Grid`).children;let t="";for(let i=0;i<e.length;i++){e[i];const s=e[i].querySelector(`.${this.baseSrt}__car`),l=JSON.parse(s.dataset.category),a=JSON.parse(s.dataset.defaultTab);s.dataset.hideDefaultTab||(t+=this.template(a)),l.forEach(o=>{this.setArrayVal(o.category,o)})}this.tabs[0].querySelector(`.${this.baseSrt}__cars`).innerHTML=t;for(const i in this.sortedCarsList){let s="";const l=i,a=document.querySelector(`.globalnav-primary-vehicles__block[data-filter="${l}"] .globalnav-primary-vehicles__cars`);a&&(this.sortedCarsList[i].forEach(o=>{s+=this.template(o)}),a.innerHTML=s)}},mergeEngineStyles(){const e=document.querySelector(".globalnav-primary-vehicles__tab[data-filter='electric']"),t=document.querySelector(".globalnav-primary-vehicles__tab[data-filter='plug-in hybrids']");if(!e||!t)return;const i=t.querySelector(".globalnav-primary-vehicles__block");i&&(e.appendChild(i),t.parentNode.removeChild(t))},template(e){const t=this.getImageWidth();return`<div class="globalnav-primary-vehicles__car">
              <a class="header-vehicle-tile__link"
                href="${e.destinationUrl}"
                title="${e.title}"
                analytics-on=""
                analytics-event="${e.analytics}">
                <img alt="${e.altText}"
                  data-src="${e.imageUrl}${e.isDamAsset!=="true"?`&width=${t}`:""} "
                  src="${this.lazyLoad?"":e.imageUrl}">
                <div class="header-vehicle-title__content">${e.title}${e.productModelText?`<span>${e.productModelText}</span>`:""}</div>
                ${e.productTitleExtendedText?`<div class="header-vehicle-tile__extended header-vehicle-title__content">${e.productTitleExtendedText}</div>`:""}
              </a>
            </div>`},setArrayVal(e,t){const i=e.trim().toLowerCase();this.sortedCarsList.hasOwnProperty(i)?this.sortedCarsList[i].push(t):this.sortedCarsList[i]=[t]},defaultTab(){if(!this.isDefaultState){const e=this.element.querySelector(`${this.el}__tab--active`),t=this.element.querySelector(`${this.el}__filter-type--active`),i=this.element.classList.contains(`${this.baseSrt}__filter-bg--active`),l=this.nav.querySelectorAll("li")[0],a=this.tabs[0];e.classList.remove(`${this.baseSrt}__tab--active`),t.classList.remove(`${this.baseSrt}__filter-type--active`),a.classList.add(`${this.baseSrt}__tab--active`),l.children[0].classList.add(`${this.baseSrt}__filter-type--active`),this.setActiveBar(l.offsetLeft,l.offsetWidth),this.vehicles.classList.remove(`${this.baseSrt}--${this.isThemeActive}`),i&&(this.element.classList.remove(`${this.baseSrt}__filter-bg--active`),this.element.style.backgroundImage="none"),this.toggleTabSetting(a,e),this.isDefaultState=!0}},toggleTabSetting(e,t=!1){this.tabs.forEach(i=>{i.setAttribute("tabindex","-1"),i.style.display="none"}),t&&(t.style.position="",t.style.overflow="",t.style.display="none",t.querySelectorAll("a").forEach(i=>i.style.visibility="hidden")),e.style.position="relative",e.style.overflow="visible",e.removeAttribute("tabindex"),e.style.display="block",e.querySelectorAll("a").forEach(i=>i.style.visibility="visible")},changeTab(e){if(e.target.matches(`${this.el}__filter-type`)){const t=e.target,i=t.dataset.filter,s=document.querySelector(`${this.el}__tab[data-filter="${i}"]`),l=document.querySelector(`${this.el}__tab--active`),a=document.querySelector(`${this.el}__filter-type--active`),o=t.dataset.theme,n=o&&o!=="none"||!1,d=t.dataset.bgImage,m=d&&d!=="none"||!1;this.element.querySelector(`${this.el}__filter-bg--active`),this.isDefaultState=!1,this.setActiveBar(t.offsetLeft,t.offsetWidth),t.classList.contains(`${this.baseSrt}__filter-type--active`)||(n!==!1?(this.vehicles.classList.remove(`${this.baseSrt}--${this.isThemeActive}`),this.isThemeActive=o,this.vehicles.classList.add(`${this.baseSrt}--${this.isThemeActive}`)):this.vehicles.classList.remove(`${this.baseSrt}--${this.isThemeActive}`),m!==!1?(this.vehicles.classList.remove(`${this.baseSrt}__filter-bg--active`),this.vehicles.style.backgroundImage=`url(${d})`,this.vehicles.classList.add(`${this.baseSrt}__filter-bg--active`),PubSub.publish("vehicle-background.embedded.nav")):(this.vehicles.style.backgroundImage="none",this.vehicles.classList.remove(`${this.baseSrt}__filter-bg--active`)),l.classList.remove(`${this.baseSrt}__tab--active`),s.classList.add(`${this.baseSrt}__tab--active`),a.classList.remove(`${this.baseSrt}__filter-type--active`),t.classList.add(`${this.baseSrt}__filter-type--active`),setTimeout(()=>{this.toggleTabSetting(s,l)},300),PubSub.publish("primary.nav.vehicleOpen"))}},setActiveBar(e,t){const i=this.element.querySelector(`${this.el}__filter-active-bar`);i.style.left=`${e}px`,i.style.width=`${t}px`},getImageWidth(){let e=this.isRetina?this.imageWidths.mobile2x:this.imageWidths.mobile1x;return this.currentBreakpoint==="desktop"&&(e=this.isRetina?this.imageWidths.desktop2x:this.imageWidths.desktop1x),e},resetActiveBar(){const e=this.element.querySelector(`.${this.baseSrt}__filter-type--active`);this.setActiveBar(e.offsetLeft,e.offsetWidth)},resizeEvt(e,t){this.isAuthor||((t==null?void 0:t.width)<768&&!this.isDefaultState&&this.defaultTab(),this.resetActiveBar())}});new h({el:".globalnav-primary-fill",name:"globalnav-primary-fill Component",subscriptions:{"nav.toggleFill":"toggleFill"},fillIsOpen:!1,init(){this.element.addEventListener("touchmove",this.killScroll),this.element.addEventListener("click",this.close)},toggleFill(e,t){t.close?(this.fillIsOpen=!1,this.element.classList.remove(t.className),t.top&&this.injectStyle("close",t)):t.open?(this.fillIsOpen=!0,this.element.classList.add(t.className),t.top&&this.injectStyle("open",t)):(this.fillIsOpen=!this.fillIsOpen,this.element.classList.toggle(t.className),t.top&&this.fillIsOpen?this.injectStyle("open",t):t.top&&this.injectStyle("close",t))},injectStyle(e,t){e!=="open"?setTimeout(()=>{this.element.style.top=""},301):this.element.style.top=`${t.top}px`},killScroll(e){e.preventDefault()},close(e){PubSub.publish("fill.clicked")}});function u(e){this.initialY=scrollY,this.callbacks={start:null,scroll:null,end:null},this.timeout={delay:e||150,handle:null},this.handler=u.handler.bind(this),window.addEventListener("scroll",this.handler)}u.handler=function(e){if(this.initialY==0){this.timeout.handle==null&&this.callbacks.start&&this.callbacks.start.call(this,e),this.timeout.handle!==null&&clearTimeout(this.timeout.handle),this.callbacks.scroll&&this.callbacks.scroll.call(this,e);const t=this;this.timeout.handle=setTimeout(function(){t.timeout.handle=null,t.callbacks.end&&t.callbacks.end()},this.timeout.delay)}else this.initialY=0};u.prototype.addEventListener=function(e,t){Object.keys(this.callbacks).includes(e)?this.callbacks[e]=t:console.warn("Invalid scroll event: "+e)};new h({el:".globalnav",name:"micronav Component",isFixedActive:!1,isFixedOpenActive:!1,themeActive:!1,latestKnownScrollY:0,scrollEnd:!1,scrollActive:!1,scrollStart:!1,scroll:{latestKnownScrollY:0},scrollStartOffset:Number,scrollEndOffset:Number,originalNavHeight:Number,init(){var i,s,l,a,o,n;const e=this.element.hasAttribute("data-has-local-nav"),t=this.element.hasAttribute("data-has-micronav");e&&document.querySelector(".page").classList.add("hasLocalnavFixed"),t&&document.querySelector("body").classList.add("hasMicronavActive"),this.scrollListener=new u(100),this.globalNav=document.querySelector(".globalnav"),this.localNav=document.querySelector(".localnav"),this.fixedNav=document.querySelector(".primary--fixed"),this.mainNav=document.querySelector(".globalnav-primary"),this.hamNav=document.querySelector(".globalnav-primary-dealer__mobile-nav-btn"),this.fixedLocalNav=document.querySelector(".globalnav-local__fixed-shell"),this.globalNavHeight=this.mainNav.offsetHeight,this.triggerMicronavPoint=this.mainNav.offsetHeight,this.navEvt=this.navEvt.bind(this),this.pinNav=this.pinNav.bind(this),this.openMicronav=this.openMicronav.bind(this),this.setMicronavStated=this.setMicronavStated.bind(this),this.scrollToTopPart=this.scrollToTopPart.bind(this),this.controlTransition=this.controlTransition.bind(this),!((i=this.globalNav)!=null&&i.hasAttribute("data-has-local-nav"))&&((s=this.globalNav)!=null&&s.hasAttribute("data-has-micronav"))?(this.navEvt(),this.scrollStateListener()):(l=this.globalNav)!=null&&l.hasAttribute("data-has-local-nav")&&((a=this.globalNav)!=null&&a.hasAttribute("data-has-micronav"))&&(this.triggerMicronavPoint=this.mainNav.offsetHeight+this.localNav.offsetHeight,this.navEvt(),this.scrollStateListener()),(o=this.mainNav)==null||o.addEventListener("click",()=>{this.mouseClickedOpenMicronav()},!0),(n=this.hamNav)==null||n.addEventListener("click",()=>{this.mouseClickedOpenMicronav()},!0)},navEvt(){window.addEventListener("scroll",this.pinNav),window.addEventListener("scroll",this.controlTransition),window.pageYOffset>this.triggerMicronavPoint&&this.setMicronavStated(),this.hamNav.addEventListener("click",this.openMicronav)},controlTransition(){var e,t,i,s,l;window.scrollY<this.scroll.latestKnownScrollY?((e=this.globalNav)!=null&&e.hasAttribute("data-has-local-nav")?window.scrollY<this.triggerMicronavPoint&&(this.mainNav.classList.remove("micronav-down-running"),this.mainNav.classList.remove("cancel-micronav-down"),this.mainNav.classList.add("instant-open"),this.localNav.classList.remove("localnav-down-running"),this.localNav.classList.remove("cancel-localnav-down"),this.localNav.classList.add("instant-open")):window.scrollY<101&&(this.mainNav.classList.remove("micronav-down-running"),this.mainNav.classList.remove("cancel-micronav-down"),this.mainNav.classList.add("instant-open")),this.mainNav.classList.contains("micronav-down-running")&&(this.mainNav.classList.remove("micronav-down-running"),this.mainNav.classList.add("cancel-micronav-down"),(t=this.globalNav)!=null&&t.hasAttribute("data-has-local-nav")&&(this.localNav.classList.remove("localnav-down-running"),this.localNav.classList.remove("top-position"),this.localNav.classList.add("cancel-localnav-down"))),(i=this.mainNav)==null||i.classList.remove("micronav-down")):(this.mainNav.classList.contains("cancel-micronav-down")&&(this.mainNav.classList.remove("cancel-micronav-down"),(s=this.globalNav)!=null&&s.hasAttribute("data-has-local-nav")&&(this.localNav.classList.add("cancel-localnav-down"),this.localNav.classList.remove("top-position"))),(l=this.globalNav)!=null&&l.hasAttribute("data-has-local-nav")?window.scrollY>=this.triggerMicronavPoint&&this.mainNav.classList.contains("instant-open")&&(this.mainNav.classList.remove("instant-open"),this.localNav.classList.remove("instant-open")):window.scrollY>=101&&this.mainNav.classList.contains("instant-open")&&this.mainNav.classList.remove("instant-open")),this.scroll.latestKnownScrollY=window.scrollY},setMicronavStated(){var e,t;window.pageYOffset>this.triggerMicronavPoint&&window.pageYOffset>this.latestKnownScrollY&&!this.isFixedActive&&(this.mainNav.classList.add("micronav-down"),this.mainNav.classList.add("micronav-down-running"),(e=this.globalNav)!=null&&e.hasAttribute("data-has-local-nav")&&(this.localNav.classList.add("localnav-down"),this.localNav.classList.add("localnav-down-running")),this.contractMicronav(),this.animationWatcher(),this.isFixedOpenActive=!1),window.pageYOffset>this.triggerMicronavPoint&&window.pageYOffset>this.latestKnownScrollY&&this.isFixedOpenActive&&(this.mainNav.classList.remove("micronav-down"),this.mainNav.classList.add("micronav-closing"),(t=this.globalNav)!=null&&t.hasAttribute("data-has-local-nav")&&(this.localNav.classList.remove("localnav-down"),this.localnavMovesUp()),this.contractMicronav()),window.pageYOffset<this.latestKnownScrollY&&window.pageYOffset>this.globalNavHeight&&this.isFixedActive&&!this.isFixedOpenActive&&(this.localnavMovesDown(),this.openMicronav()),this.latestKnownScrollY=window.pageYOffset},clearMicronavFixed(){var e;this.mainNav.classList.remove("micronav-closing"),this.mainNav.classList.remove("primary-contracted"),this.mainNav.classList.remove("primary--fixed--open"),this.mainNav.classList.remove("primary--fixed"),this.globalNav.classList.remove("gn-height-placeholder"),this.mainNav.classList.remove("micronav-down"),this.mainNav.classList.remove("micronav-down-running"),this.mainNav.classList.remove("cancel-micronav-down"),this.mainNav.classList.remove("instant-open"),(e=this.globalNav)!=null&&e.hasAttribute("data-has-local-nav")&&(this.localNav.classList.remove("micronav-moves-localnav-down"),this.localNav.classList.remove("localnav-down-running"),this.localNav.classList.remove("cancel-localnav-down"),this.localNav.classList.remove("instant-open")),this.isFixedActive=!1,this.isFixedOpenActive=!1,this.latestKnownScrollY=window.pageYOffset},openMicronav(){var e;this.mainNav.classList.add("primary--fixed--open"),this.mainNav.classList.remove("primary-contracted"),this.mainNav.classList.remove("micronav-closing"),document.querySelector("body").classList.add("microNavOpen"),(e=this.globalNav)!=null&&e.hasAttribute("data-has-local-nav")&&this.localNav.classList.remove("micronav-moves-localnav-up"),this.isFixedActive=!0,this.isFixedOpenActive=!0,document.documentElement.style.setProperty("--current-nav-height",getComputedStyle(document.querySelector(".globalnav-primary")).getPropertyValue("--globalnav-primary-height"))},localnavMovesDown(){var e;(e=this.globalNav)!=null&&e.hasAttribute("data-has-local-nav")&&(this.fixedLocalNav.style.top="",this.localNav.classList.remove("localnav-down"),this.localNav.classList.remove("micronav-moves-localnav-up"),this.localNav.classList.add("micronav-moves-localnav-down"))},localnavMovesUp(){var e;(e=this.globalNav)!=null&&e.hasAttribute("data-has-local-nav")&&(this.localNav.classList.remove("micronav-moves-localnav-down"),this.localNav.classList.add("micronav-moves-localnav-up"))},contractMicronav(){this.mainNav.classList.add("primary-contracted"),this.mainNav.classList.add("primary--fixed"),this.globalNav.classList.add("gn-height-placeholder"),this.mainNav.classList.remove("primary--fixed--open"),document.querySelector("body").classList.remove("microNavOpen"),this.localnavMovesUp(),this.isFixedActive=!0,this.isFixedOpenActive=!1,document.documentElement.style.setProperty("--current-nav-height",getComputedStyle(document.querySelector(".globalnav-primary")).getPropertyValue("--contracted-nav-height"))},animationWatcher(){var e;this.mainNav.onanimationend=t=>{var i;t.animationName==="micronavDown"&&(this.mainNav.classList.remove("micronav-down-running"),(i=this.globalNav)!=null&&i.hasAttribute("data-has-local-nav")&&this.localNav.classList.remove("localnav-down-running"))},(e=this.globalNav)!=null&&e.hasAttribute("data-has-local-nav")&&(this.localNav.onanimationstart=t=>{t.animationName==="localnavDown"&&this.localNav.classList.add("top-position")},this.localNav.onanimationend=t=>{t.animationName==="localnavDown"&&this.localNav.classList.remove("top-position")})},pinNav(e){window.innerWidth>=1280&&this.setMicronavStated()},scrollToTopPart(){window.pageYOffset==0&&this.isFixedActive&&this.clearMicronavFixed()},scrollStateListener(){this.scrollListener.addEventListener("start",()=>{this.scrollStartOffset=window.pageYOffset,this.scrollStart=!0,this.scrollActive=!1,this.scrollEnd=!1}),this.scrollListener.addEventListener("scroll",()=>{this.scrollStart=!1,this.scrollActive=!0,this.scrollEnd=!1}),this.scrollListener.addEventListener("end",()=>{this.scrollEndOffset=window.pageYOffset,this.scrollStart=!1,this.scrollActive=!1,this.scrollEnd=!0,this.scrollEnd&&this.scrollToTopPart()})},mouseClickedOpenMicronav(){this.isFixedActive&&!this.isFixedOpenActive&&(this.localnavMovesDown(),this.openMicronav(),this.mainNav.addEventListener("mouseleave",e=>{this.isFixedActive&&this.isFixedOpenActive&&setTimeout(()=>{this.mainNav.classList.remove("micronav-down"),this.mainNav.classList.add("micronav-closing"),this.contractMicronav()},230)},{once:!0}))},cssVar(e,t){return e[0]!="-"&&(e="--"+e),t&&document.documentElement.style.setProperty(e,t),getComputedStyle(document.documentElement).getPropertyValue(e)}});new h({el:".globalnav",name:"globalnav Component",init(){window.onload=()=>this.setDocumentFocus()},setDocumentFocus(){document.querySelector("body").focus()}});

</script>

</body>
</html>
