<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>333-e1adaa806b590b0c.html</title>
</head>
<body>

<script>
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{77788:function(e,t,a){a.d(t,{_:function(){return s},v:function(){return l}});var n=a(93940),r=a(91978),o=a(89421);const i=e=>({type:"circle",radius:400,point:{lat:e.lat,lng:e.lng}}),s=(0,n.rP)({key:"GeographySearchParams",get:e=>{let{get:t}=e;const a=t(r.NB);return null!==a?(0,o.J7)(a):{}},deepEqualityCheck:!0}),l=(0,n.rP)({key:"GeographySearchPolygonsPromises",get:async e=>{let{get:t}=e;const a=t(r.NB);if("place"===(null===a||void 0===a?void 0:a.searchType)){return Promise.all(a.value.map((e=>e.type===o.lU.metroLine?(0,o.W0)(e).then((e=>{const t=e.polygons[0].children;return t?t.map(i):[]})):e.type===o.lU.metro?(0,o.W0)(e).then((e=>e.polygons.map(i))):(0,o.W0)(e).then((e=>{const t=e.polygons.flatMap((e=>e.path));return(0,o.UI)(t).map((e=>({coordinates:e,type:"polygon"})))}))))).then((e=>e.flat()))}if("circle"===(null===a||void 0===a?void 0:a.searchType)){const[e,t]=a.value.center;return Promise.resolve([{type:"circle",point:{lat:e,lng:t},radius:a.value.radius}])}return"polygon"===(null===a||void 0===a?void 0:a.searchType)?Promise.resolve([{type:"polygon",coordinates:a.value.points.map((e=>{let[t,a]=e;return{lat:t,lng:a}}))}]):Promise.resolve([])}})},61263:function(e,t,a){a.d(t,{e:function(){return n}});const n=(0,a(74829).cn)(void 0)},93e3:function(e,t,a){a.d(t,{R:function(){return c},j:function(){return l}});var n=a(74829),r=a(58753),o=a(93940),i=a(91978),s=a(72395);const l=(0,n.cn)(!1),c=()=>{const e=(0,r.b9)(l),t=(0,o.Az)(i.NB);(0,s.I)((()=>{t&&e(!1)}),[t,e])}},65291:function(e,t,a){a.d(t,{J:function(){return s},Q:function(){return i}});var n=a(16755),r=a(48193),o=a(63099);const i=(0,r.rw)(!1),s=()=>{const e=(0,o.oC)(i);(0,n.useEffect)((()=>{e()}),[e])}},74458:function(e,t,a){var n=a(91670),r=(a(16755),a(96240)),o=a(61547),i=a(71925),s=a.n(i);t.Z=function(e){let{show:t,message:a}=e;return a?(0,n.jsx)(o.r,{variant:"error",customClass:(0,r.Z)(s()["in-alertError"],!t&&s()["is-hidden"]),children:(0,n.jsx)("p",{className:s()["in-alertError__message"],dangerouslySetInnerHTML:{__html:a}})}):null}},38972:function(e,t,a){a.d(t,{B:function(){return N}});var n=a(91670),r=a(16755),o=a(60173),i=a(96999),s=a(22294),l=a(60900),c=a(58753),u=a(93940),d=a(91978),m=a(27124),h=a(43187),_=a(20938),v=a(88388),f=a(91221),g=a(52609);const p=e=>{const t=g.k[`services.alert_email.auto_popup.${e}`];t&&(0,f.W)(t,f.$.singleCounter,1)};let C=null;const y=["trovakasa","bookmarkricerche"],E=()=>{const e=(0,v.l)(),t=(0,u.Az)(d.NB),a=(0,c.Dv)(m.N),n=(0,c.Dv)(_.P),o=(0,r.useRef)(!1),i=null===a||void 0===a?void 0:a.resultsCount,s="place"===(null===t||void 0===t?void 0:t.searchType)&&(t.value[0].type===l.l.country||t.value[0].type===l.l.region)||e.lusso||"1"===e.lowcost||"1"===e.seaView||e.seaDistance;return(0,r.useMemo)((()=>{try{return s||(null===a||void 0===a?void 0:a.isFetching)?(o.current=!1,!1):(0,h.vZ)({...e,...a,resultsCount:i},C)?o.current:(C=JSON.parse(JSON.stringify({...e,...a,resultsCount:i})),(null===a||void 0===a?void 0:a.isEditing)||(null===a||void 0===a?void 0:a.searchId)?(p("closed"),o.current=!1,!1):i?i>500||i<=9?(p("closed"),o.current=!1,!1):y.includes(null!==n&&void 0!==n?n:"")?(p("locked"),o.current=!1,!1):(o.current=!0,!0):(p("closed"),o.current=!1,!1))}catch{return o.current=!1,!1}}),[s,i,a,e,n])};var S=a(77864),M=a(81172);const T=3,b=()=>{try{const e=(0,o.ej)(S._U),t=e&&JSON.parse(atob(e));return{num:(null===t||void 0===t?void 0:t.num)||0,url:(null===t||void 0===t?void 0:t.url)||""}}catch{return{num:0,url:""}}};function N(){const[e,t]=(0,r.useState)(!1),a=E(),l=(0,v.l)(),{asPath:c}=(0,i.useRouter)(),u=(0,s.Pr)();return(0,r.useEffect)((()=>{if(u&&a){const{num:e,url:a}=b(),n=(0,S.Nb)(l);if(e>=T||a===n)return void p("closed");t(!0),p("opened"),(0,o.d8)(S._U,btoa(JSON.stringify({num:e+1,url:(0,S.Nb)(l)})),7)}}),[c,a,u]),e?(0,n.jsx)(M.G,{editSearch:!1,onClose:function(){t(!1)},entryPointPosition:"autoOpen"}):null}},3348:function(e,t,a){a.d(t,{f:function(){return u}});var n=a(91670),r=a(16755),o=a(26833),i=a(74458),s=a(85228),l=a(16039),c=a(82217);function u(e){let{value:t,handleChange:a,counterHeader:u,isRealTimeNotificationFlagBlocked:d,realTimeErrorMessage:m,dailyErrorMessage:h,isDailyNotificationFlagBlocked:_}=e;const{trans:v}=(0,o.T_)(),[f,g]=(0,r.useState)(null),p=(0,r.useCallback)((e=>{const t=e.target.checked;d&&t&&m&&setTimeout((()=>{g("realTime"),a((e=>{e.flagNotificationRealtime=!1,e.flagNotificationDaily=!1}))}),200),a((e=>{e.flagNotificationRealtime=t,t&&(e.flagNotificationDaily=!1)}))}),[d,m,a]),C=(0,r.useCallback)((e=>{const t=e.target.checked;t&&_&&h?setTimeout((()=>{g("daily"),a((e=>{e.flagNotificationDaily=!1,e.flagNotificationRealtime=!1}))}),200):g(null),a((e=>{e.flagNotificationDaily=t,t&&(e.flagNotificationRealtime=!1)}))}),[h,a,_]);return(0,n.jsxs)(s.n,{dataCy:"frequency-save-search-section",children:[(0,n.jsx)(l.j,{icon:"bell",title:v("lbl_save_search_dialog_notifications_subtitle"),counter:u,tooltipText:v("lbl_tooltip_frequency_save_search")}),(0,n.jsx)(c.Z,{label:v("lbl_immediate",{count:2}),checked:t.flagNotificationRealtime,onChange:p}),(0,n.jsx)(i.Z,{show:"realTime"===f,message:m}),(0,n.jsx)(c.Z,{label:v("lbl_once_a_day"),checked:t.flagNotificationDaily,onChange:C}),(0,n.jsx)(i.Z,{show:"daily"===f,message:h})]})}},16039:function(e,t,a){a.d(t,{j:function(){return c}});var n=a(91670),r=a(84042),o=a(90001),i=a(7836),s=a(79154),l=a.n(s);function c(e){let{icon:t,title:a,tooltipText:s,badgeLabel:c,counter:u}=e;return(0,n.jsxs)("div",{className:l()["in-saveSearchDialogNotificationHeading"],children:[(0,n.jsx)(o.D4,{name:t}),(0,n.jsx)("p",{children:a}),c&&(0,n.jsx)(r.e,{variant:"promotion",children:c}),(0,n.jsxs)("div",{className:l()["in-saveSearchDialogNotificationHeading__right"],children:[u&&(0,n.jsx)("span",{className:l()["in-saveSearchDialogNotificationHeading__counter"],children:u}),(0,n.jsx)(i.T,{label:(0,n.jsx)(o.D4,{name:"info-circle",customClass:l()["in-saveSearchDialogNotificationHeading__info"]}),dataText:s,multiRow:!0,type:"dark",direction:"toTop",customClass:l()["in-saveSearchDialogNotificationHeading__tooltip"]})]})]})}},82217:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(91670),r=a(96240),o=a(79847),i=a(78574),s=a.n(i);function l(e){let{label:t,checked:a=!1,onChange:i,disabled:l=!1}=e;return(0,n.jsxs)("div",{className:s()["in-saveSearchDialogOptionSwitch__container"],children:[(0,n.jsx)("span",{className:s()["in-saveSearchDialogOptionSwitch__label"],children:t}),(0,n.jsx)(o.Z,{checked:a,readOnly:!0,onChange:i,customClass:(0,r.Z)(s()["in-saveSearchDialogOptionSwitch"],l&&s()["is-disabled"])})]})}},85228:function(e,t,a){a.d(t,{n:function(){return i}});var n=a(91670),r=a(4892),o=a.n(r);function i(e){let{children:t,dataCy:a}=e;return(0,n.jsx)("div",{className:o()["in-saveSearchDialogNotificationOptions"],"data-cy":a,children:t})}},9858:function(e,t,a){a.d(t,{D:function(){return u}});var n=a(91670),r=a(16755),o=a(26833),i=a(74458),s=a(85228),l=a(16039),c=a(82217);function u(e){let{value:t,handleChange:a,showFlagContactsField:u,errorMessage:d,disabledSwitch:m=!1,activeSearches:h,maxSavedSearches:_}=e;const{trans:v}=(0,o.T_)(),[f,g]=(0,r.useState)(!1),p=`(${h}/${_})`;return(0,n.jsxs)(s.n,{dataCy:"active-save-search-section",children:[(0,n.jsx)(l.j,{icon:"chat",title:v("lbl_save_search_dialog_receive_contacts"),badgeLabel:"New",counter:p,tooltipText:v("lbl_tooltip_active_save_search")}),u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{label:v("lbl_save_search_dialog_secret_published"),disabled:m,checked:t.flagContactsEnabled,onChange:e=>{const t=e.target.checked;d&&t&&setTimeout((()=>{g(!0),a((e=>{e.flagContactsEnabled=!1}))}),200),a((e=>{e.flagContactsEnabled=t}))}}),(0,n.jsx)(i.Z,{show:f,message:d})]}),!u&&d?(0,n.jsx)("p",{children:d}):null]})}},26864:function(e,t,a){a.d(t,{I:function(){return m}});var n=a(91670),r=a(26833),o=a(96240),i=a(58753),s=a(27124),l=a(97064),c=a(42203),u=a(92376),d=a.n(u);function m(e){let{customClass:t}=e;const{trans:a}=(0,r.T_)(),u=(0,i.Dv)(s.N),m=(0,l.M)();return(null===u||void 0===u?void 0:u.searchId)||m?null:(0,n.jsx)("div",{className:(0,o.Z)(d()["in-saveSearch__box"],t),children:(0,n.jsxs)("div",{className:d()["in-saveSearch__boxContent"],children:[(0,n.jsx)("p",{className:d()["in-saveSearch__boxText"],children:(null===u||void 0===u?void 0:u.searchId)?a("tooltip_edit_search_text"):a("save_search_banner_text")}),(0,n.jsx)(c.ZE,{position:"box"})]})})}},81172:function(e,t,a){a.d(t,{G:function(){return Oe}});var n=a(91670),r=a(16755),o=a(74207),i=a(26833),s=a(96240),l=a(58753),c=a(24244),u=a(61048),d=a(27960),m=a(48927),h=a(93940),_=a(91978),v=a(86504),f=a(27124),g=a(78472),p=a(61679),C=a(16947);var y=a(45933),E=a(5232),S=a(84898),M=a(33830),T=a(27362),b=a(77864),N=a(86663),x=a(46092);const A=(e,t)=>{if((0,v.c)("REALTIME_NOTIFICATIONS_ENABLED"))return e?"Daily":t?"Instant":"None"},R=(e,t,a,n)=>{const r={flagContactsEnabled:n,flagNotificationRealtime:t,flagNotificationDaily:a};var o;e?(r.email=e.email,r.nome=e.name,r.cognome=e.surname,r.telefono=null!==(o=e.phone)&&void 0!==o?o:void 0):(r.email="",r.nome=void 0,r.cognome=void 0,r.telefono=void 0);return r},k=(e,t)=>{if((0,v.c)("ACTIVE_SEARCH"))return!0;const a=e.searchParams.idProvincia&&!e.searchParams.idComune,n=!(0,v.c)("INTERNATIONAL_SEARCH_ASK_TO_AGENCIES_ENABLED")&&e.searchParams.idNazione&&e.searchParams.idNazione!==(0,d.t)("countryCode"),r=e.searchParams.idComune&&!(e.searchParams.idMZona||e.searchParams.idQuartiere||e.searchParams.fkMetro||e.searchParams.fkMetroStation)&&t.resultsCount&&t.resultsCount>1500;return Boolean(a||n||r)},O=e=>{let{editSearch:t,onClose:a,onSuccess:n,entryPointPosition:o}=e;const{trans:s}=(0,i.T_)(),{user:u}=(0,m.Eu)(),{counters:d}=(0,m.Zq)(),O=(0,h.Az)(_.NB),I=(0,N.M)(),D=function(e){const{trans:t}=(0,i.T_)(),{user:a}=(0,m.Eu)(),n={message:[()=>({valid:!0,message:""})],searchName:[e=>e.searchName&&""!==e.searchName?{valid:e.searchName.length>=5,message:t("alert_email_title_validation")}:{valid:!0,message:""}]};return a||e?n:{...n,privacy:[(0,p.fQ)(t("act_declare_consent"))],email:[e=>e.email?{valid:!0,message:""}:(0,p.q9)(t("email_field_validation_msg"))(e,"email"),(0,p.Jh)((0,C.kC)(t("insert_valid_email")))]}}(t),[j,P]=(0,l.KO)(f.N),{trackSearchSaved:B}=(0,y.J)();var L;const F=null!==(L=null===j||void 0===j?void 0:j.resultsCount)&&void 0!==L?L:null,{flagNotificationDaily:$,flagNotificationRealtime:w}=(()=>{const{user:e}=(0,m.Eu)(),{counters:t}=(0,m.Zq)(),a=(0,l.Dv)(f.N);var n;const o=null!==(n=null===a||void 0===a?void 0:a.resultsCount)&&void 0!==n?n:0,i=(0,E.My)("search_alert_frequency_settings",b.bx);var s;const c=null!==(s=null===t||void 0===t?void 0:t.savedSearchesRealTimeAlert)&&void 0!==s?s:0;return(0,r.useMemo)((()=>e?{flagNotificationRealtime:c<i.realTime.maxSearches&&o<1e3,flagNotificationDaily:o>=1e3&&o<i.daily.maxResults}:{flagNotificationRealtime:!1,flagNotificationDaily:o<i.daily.maxResults}),[i.daily.maxResults,i.realTime.maxSearches,c,o,e])})(),[z,U]=(0,r.useState)({...R(u,w,$),searchParams:I});(0,r.useEffect)((()=>{U((e=>({...e,...R(u,w,$)})))}),[o,$,w,F,u]);const[G,V]=(0,r.useState)(null),[H,Y]=(0,r.useState)(null===j||void 0===j?void 0:j.searchId),q=(0,l.b9)(c.C),[Z,X]=(0,r.useState)(!1),W=(0,S.q)(),J=(0,g.g)({schema:D,initialData:z,onSubmit:async(e,t)=>{const{action:a}=t,{minLat:n,maxLat:r,minLng:o,maxLng:i}=e.searchParams,s=`${n},${o};${n},${i};${r},${i};${r},${o};${n},${o}`,l=null!==O?e.searchParams:{...e.searchParams,vrt:s};var c;const d={...e,searchParams:l,privacy:e.privacy||Boolean(u),nome:null===u||void 0===u?void 0:u.name,cognome:null===u||void 0===u?void 0:u.surname,telefono:null!==(c=null===u||void 0===u?void 0:u.phone)&&void 0!==c?c:void 0,email:(null===u||void 0===u?void 0:u.email)||e.email,source:"L-AN-G",action:a,searchID:H};return e.searchName&&""!==e.searchName&&(d.searchName=e.searchName),(0,x.Hj)(d).then((e=>{let{searchId:t,userRegisterType:n,savedSearchesContactsEnabled:r,savedSearchesRealTimeAlert:o}=e;return t&&(Y(t),P((e=>{var n,r,o;return{...e,searchId:t,isEditing:!1,isUpdated:"update"===a,email:d.email,resultsCount:null!==(n=null===e||void 0===e?void 0:e.resultsCount)&&void 0!==n?n:null,searchName:null!==(r=null===e||void 0===e?void 0:e.searchName)&&void 0!==r?r:"",showTooltip:Boolean(null===e||void 0===e?void 0:e.showTooltip),isFetching:Boolean(null===e||void 0===e?void 0:e.isFetching),token:null!==(o=null===e||void 0===e?void 0:e.token)&&void 0!==o?o:null}}))),{searchId:t,userRegisterType:n,savedSearchesContactsEnabled:r,savedSearchesRealTimeAlert:o}}))},onSuccess:(e,t,r)=>{const{action:i,fromConfirmationDialogAction:l}=r;null===n||void 0===n||n();const{flagNotificationDaily:c,flagNotificationRealtime:h,flagContactsEnabled:_}=e,f=A(c||!1,h||!1),g=(0,v.c)("ACTIVE_SEARCH")?_:void 0,p={...W(o)};switch(u&&(0,m.X1)({counters:{...d,savedSearchesContactsEnabled:t.savedSearchesContactsEnabled,savedSearchesRealTimeAlert:t.savedSearchesRealTimeAlert}}),i){case"saveFromExisting":return j&&k(e,j)?a():V(!0),B({searchParams:I,geographyData:O,resultCount:F,alreadySaved:!1,alertType:f,action:i,fromConfirmationDialogAction:l,saveSearchTracking:p,activeSearch:g,searchId:t.searchId}),s("toast_search_saved");case"update":return a(),B({searchParams:I,geographyData:O,resultCount:F,alreadySaved:!0,alertType:f,action:i,fromConfirmationDialogAction:l,saveSearchTracking:p,activeSearch:g,searchId:t.searchId}),s("toast_search_updated");case"save":{B({searchParams:I,geographyData:O,resultCount:F,alreadySaved:!1,alertType:f,action:i,fromConfirmationDialogAction:l,saveSearchTracking:{...p,is_active:(0,M.Tk)(e.flagContactsEnabled),alert_type:f?y.X[f]:void 0},activeSearch:g,searchId:t.searchId});const n=!u&&(0,v.c)("AUTH_POST_SAVE_SEARCH");return j&&k(e,j)?n?t.userRegisterType===T.W.UNREGISTERED?X(!0):q({open:!0,data:{email:e.email,alertMessage:s("toast_search_saved"),additionalTrackingData:{"Entry Point":"Modale Salva Ricerca"}},onClose:()=>{q({open:!1}),a()},onSuccess:()=>{q({open:!1}),a()},showAdvantageInfo:!0}):a():(n&&(t.userRegisterType===T.W.UNREGISTERED?X(!0):q({open:!0,data:{email:e.email,alertMessage:s("toast_search_saved"),additionalTrackingData:{"Entry Point":"Modale Salva Ricerca"}},onClose:()=>q({open:!1}),onSuccess:()=>q({open:!1}),showAdvantageInfo:!0})),V(!0)),n?"":s("toast_search_saved")}}},onError:e=>e instanceof b.V6?s("save_search_alert_attemps_error"):s("lbl_generic_error")});return{askToAgencies:G,setAskToAgencies:V,searchID:H,form:J,alertInfoAuth:Z,setAlertInfoAuth:X}};var I=a(83169),D=a(86791),j=a(68736);function P(e){let{onSuccess:t,searchID:a}=e;const{trans:n}=(0,i.T_)(),{user:o}=(0,m.Eu)(),s=(0,N.M)(),l=function(){const{trans:e}=(0,i.T_)();return{message:[t=>{const a=t.message?t.message.trim().replace(/\s\s+/g," "):null;return{valid:a&&a.split(" ").length>=10,message:e("ask_to_agencies_modal_message_error")}}],privacy:[(0,p.fQ)(e("act_declare_consent"))],name:[(0,p.q9)((0,C.kC)(e("name_field_validation_msg")))],surname:[(0,p.q9)((0,C.kC)(e("surname_field_validation_msg")))],email:[(0,p.q9)((0,C.kC)(e("insert_valid_email"))),(0,p.Jh)((0,C.kC)(e("insert_valid_email")))],phone:[(0,p.q9)((0,C.kC)(e("phone_field_validation_msg"))),(0,p.xT)((0,C.kC)(e("phone_field_validation_msg")))]}}(),c=(0,r.useMemo)((()=>({searchID:a,searchParams:s,email:null===o||void 0===o?void 0:o.email,name:null===o||void 0===o?void 0:o.name,surname:null===o||void 0===o?void 0:o.surname,phone:null===o||void 0===o?void 0:o.phone,privacy:Boolean(o)})),[o,a,s]);return{form:(0,g.g)({schema:l,initialData:c,onSubmit:e=>(0,x.Ss)(e),onSuccess:()=>(null===t||void 0===t||t(),n("toast_search_sent_to_agencies")),onError:()=>n("lbl_generic_error")})}}var B=a(86254),L=a(56797),F=a(9278),$=a.n(F);function w(e){let{onClose:t,onSuccess:a,searchID:r}=e;const{trans:o}=(0,i.T_)(),l=(0,j.n)(null),{form:c}=P({onSuccess:a,searchID:r});return r?(0,n.jsx)(I.eF,{disableCloseOnBackdropClick:!0,frameCustomClass:$()["in-askToAgenciesDialog"],size:I.nE.BOTTOMSHEET,contentCustomClass:(0,s.W)($()["in-askToAgenciesDialog__content"],"nd-dialogFrame__content--scrollable"),contentSize:I.cW.FULL,title:o("ask_to_agencies_title"),content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"nd-form","data-cy":"ask-to-agencies",children:[(0,n.jsx)("span",{className:"nd-form__text",children:o("ask_to_agencies_description_text")}),(0,n.jsx)(L.c,{textarea:!0,placeholder:o("ask_to_agencies_message_placeholder"),rows:4,defaultValue:c.data.message||"",onChange:c.handleTextInputChange("message"),status:c.getErrorMessage("message")?"error":void 0,statusMessage:c.getErrorMessage("message"),ref:l}),(0,n.jsx)(L.c,{floatingLabel:!0,placeholder:(0,C.kC)(o("lbl_name",{capitalize:!0})),status:c.getErrorMessage("name")?"error":void 0,statusMessage:c.getErrorMessage("name"),onChange:c.handleTextInputChange("name"),defaultValue:c.data.name}),(0,n.jsx)(L.c,{floatingLabel:!0,placeholder:(0,C.kC)(o("lbl_surname")),status:c.getErrorMessage("surname")?"error":void 0,statusMessage:c.getErrorMessage("surname"),onChange:c.handleTextInputChange("surname"),defaultValue:c.data.surname}),(0,n.jsx)(L.c,{type:"email",floatingLabel:!0,placeholder:o("lbl_email"),status:c.getErrorMessage("email")?"error":void 0,statusMessage:c.getErrorMessage("email"),onBlur:c.handleValidateTextInput("email"),onChange:c.handleTextInputChange("email"),defaultValue:c.data.email}),(0,n.jsx)(L.c,{type:"tel",floatingLabel:!0,placeholder:o("lbl_phone"),status:c.getErrorMessage("phone")?"error":void 0,statusMessage:c.getErrorMessage("phone"),onBlur:c.handleValidateTextInput("phone"),onChange:c.handleTextInputChange("phone"),defaultValue:c.data.phone})]}),(0,n.jsxs)("div",{className:(0,s.W)($()["in-askToAgenciesDialog__footer"],$()["in-askToAgenciesDialog__footerNotLogged"]),children:[(0,n.jsx)(D.K,{error:c.getErrorMessage("privacy"),onChange:c.handleCheckboxChange("privacy"),value:Boolean(c.data.privacy)}),(0,n.jsxs)("div",{className:$()["in-askToAgenciesDialog__actions"],children:[(0,n.jsx)(B._,{type:"submit",onClick:t,"data-cy":"ask-to-agencies-close",children:o("no_thank_you")}),(0,n.jsx)(B._,{type:"submit",variant:"accent",onClick:c.handleSubmit,disabled:c.submitButtonDisabled,loading:c.submitButtonLoading,children:o("act_send")})]})]})]}),onClose:t}):null}var z=a(92990),U=a(60900),G=a(50663),V=a(5099),H=a(79385),Y=a(27966),q=a(83242),Z=a(24971),X=a(39237),W=a(67970);const J=()=>{const e=[],{trans:t}=(0,i.T_)(),a=(0,q.Dh)(),n=(0,q.wl)(),r=(0,h.Az)(_.NB),o=(0,N.M)(),s=(0,h.Az)(V.kc);try{var l;if(o[H.M.CATEGORY]&&e.push(t("db_category.id",{context:o[H.M.CATEGORY]})),e.push((0,W.t)(r,t)),(null===(l=o[H.M.TYPOLOGY])||void 0===l?void 0:l.length)>0&&o[H.M.CATEGORY]!==Y.aA.STANZE&&o[H.M.CATEGORY]!==Y.aA.NEGOZI_LOCALI_COMMERCIALI){const a=o[H.M.TYPOLOGY].map((e=>t("db_typology.id",{context:e})));e.push(a.join(", "))}else o[H.M.CONTRACT]===Y.l$.AFFITTO?e.push(t("generic_house_rent")):e.push(t("generic_house_sell"));o[H.M.STATUS]&&""!==o[H.M.STATUS]&&e.push(t("db_status.id",{context:o[H.M.STATUS]}));const i=[o[H.M.MIN_PRICE],o[H.M.MAX_PRICE]].map((e=>e?a(e,"\u20ac"):null));if(e.push((0,W.XR)(t,i[0],i[1])),e.push((0,W.XR)(t,o[H.M.MIN_SURFACE]?n(o[H.M.MIN_SURFACE],0):null,o[H.M.MAX_SURFACE]?n(o[H.M.MAX_SURFACE],0):null)),o[H.M.BATHROOMS]){const a=(0,W.p$)(H.M.BATHROOMS,o[H.M.BATHROOMS],s);e.push(t("search_formatter_nr_bathroom",{count:o[H.M.BATHROOMS],params:a?[a]:[]}))}if(e.push((0,W.Xp)({10:t("tag_floor_ground"),20:t("tag_floor_middle"),30:t("tag_floor_top")},t("lbl_floor"),o[H.M.FLOOR_ZONE])),e.push((0,W.Xp)({10:t("tag_garden_private"),20:t("tag_garden_shared")},t("lbl_garden"),o[H.M.GARDEN])),o[H.M.PROPERTY_TYPE]&&e.push((0,C.kC)(t((0,W.p$)(H.M.PROPERTY_TYPE,o[H.M.PROPERTY_TYPE],s)||""))),e.push((0,W.Xp)({1:t("db_boxauto.id_1"),3:t("db_boxauto.id_3"),4:t("db_boxauto.id_4")},t("lbl_garage"),o[H.M.BOX])),e.push((0,W.Xp)({1:t("autonomous_heating"),2:t("centralized_heating"),10:t("air_conditioning")},t("lbl_heating"),o[H.M.HEATING])),o[H.M.BASEMENT]&&e.push((0,C.kC)(t("lbl_basement"))),o[H.M.SWIMMING_POOL]&&e.push((0,C.kC)(t("lbl_pool"))),o[H.M.EXCLUDE_AUCTIONS]&&e.push((0,C.kC)(t("hide_auctions"))),o[H.M.BALCONY_OR_TERRACE]&&(o[H.M.BALCONY_OR_TERRACE].includes("terrazzo")&&e.push(t("lbl_terrace")),o[H.M.BALCONY_OR_TERRACE].includes("balcone")&&e.push(t("lbl_balcony"))),e.push((0,W.nj)(t,{uniqueValue:"search_formatter_nr_rooms",bothValues:"search_formatter_nr_rooms_min_max",onlyMin:"listing_meta_max_room",onlyMax:"listing_meta_min_room"},o[H.M.MIN_NUMBER_OF_ROOMS],o[H.M.MAX_NUMBER_OF_ROOMS])),(0,v.c)("BEDROOM_SEARCH_ENABLED")&&e.push((0,W.nj)(t,{uniqueValue:"search_formatter_nr_bedrooms",bothValues:"search_formatter_nr_bedrooms_min_max",onlyMin:"listing_meta_min_bedroom",onlyMax:"listing_meta_max_bedroom"},o[H.M.MIN_BEDROOMS],o[H.M.MAX_BEDROOMS])),e.push((0,W.Xp)({1:t("db_building_use.id_1"),10:t("db_building_use.id_10"),3:t("db_building_use.id_3"),11:t("db_building_use.id_11"),12:t("db_building_use.id_12"),13:t("db_building_use.id_13")},void 0,o[H.M.BUILDING_USE])),o[H.M.ALARM_SYSTEM]&&e.push(t("lbl_alarm_system_slash_supervision")),o[H.M.FURNISHED]&&e.push(t("lbl_furnished")),o[H.M.CONTRACT]===Y.l$.ASTE&&e.push((0,C.kC)(t("detail_auction"))),o[H.M.ELEVATOR]&&e.push(t("lbl_elevator")),o[H.M.SMOKER]&&e.push(t("smokers_allowed")),o[H.M.ANIMALS]&&e.push(t("animals_allowed")),o[H.M.ENERGY_RATING]){const a=(0,d.t)("name"),n={};for(const e in Z.i)n[Z.i[e]]=e;const r=n[o[H.M.ENERGY_RATING]],i="indomio-es"===a?"Indomio.es_energy_rating":"Immobiliare.it_energy_rating";e.push(`${t("insertAd.energyRating")} - ${t(i,{context:r})}`)}r&&"place"===r.searchType&&r.value.length>0&&(r.value[0].type===U.l.metro||r.value[0].type===U.l.metroLine)&&e.push((0,W.Y7)(r.value,t))}catch(c){(0,G.Tb)(c,{tags:{section:"save-search-modal"}})}return e.filter(X.vJ)};var K=a(52491),Q=a(89421),ee=a(90292);const te=e=>(0,ee.jO)(e,328,109),ae=(e,t)=>{const{maxLat:a,maxLng:n,minLat:r,minLng:o}=t;if(null===e&&a&&n&&r&&o){return te({searchType:"polygon",value:{points:[[r,o],[r,n],[a,n],[a,o],[r,o]]}})}if(null!==e)return"place"===e.searchType?(e=>{var t,a,n,r;if((null===(t=e[0])||void 0===t?void 0:t.type)===Q.lU.metro||(null===(a=e[0])||void 0===a?void 0:a.type)===Q.lU.metroLine)return null;if((null===(n=e[0])||void 0===n?void 0:n.type)===Q.lU.city)return(0,ee.pR)(e[0].id,"328x109","3");const o=[];e.forEach((e=>{e.type===Q.lU.cityZone?o.push(e.id):e.type===Q.lU.microzone&&o.push(e.parents[0].id)}));const i=null===(r=e[0].parents.find((e=>e.type===Q.lU.city)))||void 0===r?void 0:r.id;return(0,ee.SB)(i,"328x109","3",[...new Set(o)])})(e.value):te(e)},ne=e=>{const t=(0,h.Az)(_.NB);return{main:ae(t,e)||(0,ee.KA)(),alternate:(0,ee.KA)()}};var re=a(49298),oe=a(12377),ie=a(26091),se=a(50816),le=a(31646),ce=a(9052),ue=a(43187);const de=e=>{const{trans:t}=(0,i.T_)(),a=(0,h.Az)(_.NB),n=(0,l.Dv)(f.N),o=(0,E.My)("active_search_settings",b.sf),{counters:s}=(0,m.Zq)();var c;const u=null!==(c=null===s||void 0===s?void 0:s.savedSearchesContactsEnabled)&&void 0!==c?c:0,{idComune:d,idMacroarea:v,idMZona:g,idQuartiere:p,fkMetro:C,fkMetroStation:y,vrt:S,raggio:M,...T}=(0,N.M)(),x={"city-id":d,"macro-area-id":v,"macrozone-id":g,"microzone-id":p,"metro-id":C,"metro-station-id":y},{maxSavedSearches:A,visibility:{searchResultsThreshold:R,maxSearchAreaSqm:k,requiredFilters:O},defaultValue:{selectedFiltersThreshold:I}}=o,D=!!a&&((0,le.Pd)(a)||(0,le.UN)(a)),j=u>=A,P=Boolean(d)&&!j&&!D,{data:B}=((e,t)=>(0,ie.k)({queryKey:["geography-surface",t,e],queryFn:()=>e?ce.d.get("/api-next/geography/surface",{searchParams:t}).json():null}))(P,x),L=(0,r.useMemo)((()=>B?B.surface:a?(e=>(0,le.UN)(e)||(0,le.lL)(e)?Math.round((0,le.I4)(e.value.points)):(0,le.W_)(e)?Math.round((0,le.fh)(e.value.radius)):null)(a):null),[B,a]),F=Boolean(d)||D,$=((null===n||void 0===n?void 0:n.resultsCount)||0)<=R,w=(z=T,U=O,(0,ue.l6)(z,U));var z,U;const G=!!L&&L<k;return{alertMessage:(0,b.Uo)({trans:t,isAreaTooLarge:!G,isResultsCountExceeded:!$,isFilterRequiredMissing:!w,isGeographySearchInvalid:!F,isActiveSearchLimitExceeded:j,activeSearches:u,url:e}),areaSqm:L,flagContactsEnabled:me({isResultsCountBelowThreshold:$,isAllRequiredFiltersSet:w,isGeographySearchValid:F,isSearchAreaBelowThreshold:G,selectedFiltersThreshold:I,isActiveSearchLimitExceeded:j}),activeSearches:u,maxSavedSearches:A}},me=e=>{let{isResultsCountBelowThreshold:t,isAllRequiredFiltersSet:a,isGeographySearchValid:n,isSearchAreaBelowThreshold:r,selectedFiltersThreshold:o,isActiveSearchLimitExceeded:i}=e;const s=(0,se.q)();if(i)return!1;if(t&&a&&n&&r){return s-2>=o}};var he=a(9858);function _e(e){let{handleChange:t,toggleValue:a,editSearch:o}=e;const i=(0,b.R0)(o?"update-search":"save-search","active"),{alertMessage:s,areaSqm:l,flagContactsEnabled:c,maxSavedSearches:u,activeSearches:d}=de(i),m=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{null===l||m.current||(t((e=>{e.flagContactsEnabled=c})),m.current=!0)}),[c,l,t]),(0,n.jsx)(he.D,{value:{flagContactsEnabled:a},handleChange:t,showFlagContactsField:void 0!==c,errorMessage:s,activeSearches:d,maxSavedSearches:u})}var ve=a(3348),fe=a(99953),ge=a(87147),pe=a(56896),Ce=a.n(pe);function ye(e){let{editSearch:t,form:a,entryPointPosition:o}=e;const{trans:s}=(0,i.T_)(),{user:c}=(0,m.Eu)(),{counters:u}=(0,m.Zq)(),d=(0,l.Dv)(f.N),h=a.data.searchParams,_=ne(h),g=J(),p=(0,re.v)(),C=(0,S.q)(),T=(0,E.My)("active_search_settings",b.sf);var N,x;const{counterHeader:R,realTimeErrorMessage:k,dailyErrorMessage:O,isRealTimeNotificationFlagBlocked:I,isDailyNotificationFlagBlocked:D}=(0,K.u)({realTimeAlerts:null!==(N=null===u||void 0===u?void 0:u.savedSearchesRealTimeAlert)&&void 0!==N?N:0,listingsResultsCount:null!==(x=null===d||void 0===d?void 0:d.resultsCount)&&void 0!==x?x:0,dailyResultsCountTransKey:"lbl_save_daily_alert_results_listings_limit",realTimeResultsCountTransKey:"lbl_save_realtime_alert_results_listings_limit",url:(0,b.R0)(t?"update-search":"save-search","realtime")});var j;return(0,r.useEffect)((()=>{if(h){const e=C(o),t=A(Boolean(a.data.flagNotificationDaily),Boolean(a.data.flagNotificationRealtime));p(oe.Ys.SAVE_SEARCH_IMPRESSION,{...e,is_active:(0,M.Tk)(a.data.flagContactsEnabled),alert_type:t?y.X[t]:void 0})}}),[h,p]),(0,n.jsxs)("div",{className:"nd-form","data-cy":"save-search-dialog",children:[t&&(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"nd-typography--headingSmall",children:`${s("save_search_box_title_update")}. `}),s("update_search_description")]}),(0,n.jsxs)("div",{className:Ce()["in-saveSearchContentDialog__box"],children:[(0,n.jsx)(L.c,{name:"searchName",floatingLabel:!0,label:s("lbl_save_search_dialog_name",{capitalize:!0}),placeholder:null===d||void 0===d?void 0:d.searchName,status:a.getErrorMessage("searchName")?"error":void 0,statusMessage:a.getErrorMessage("searchName"),defaultValue:a.data.searchName,onChange:a.handleTextInputChange("searchName"),iconAlignment:"right",icon:{name:"pencil"},maxLength:75}),(0,n.jsx)(fe.D,{locationPreview:_,badges:g})]}),(0,v.c)("REALTIME_NOTIFICATIONS_ENABLED")&&(0,n.jsx)(ve.f,{value:{flagNotificationDaily:Boolean(a.data.flagNotificationDaily),flagNotificationRealtime:Boolean(a.data.flagNotificationRealtime)},handleChange:a.handleChange,counterHeader:R,realTimeErrorMessage:k,isRealTimeNotificationFlagBlocked:I,isDailyNotificationFlagBlocked:D,dailyErrorMessage:O}),(0,v.c)("ACTIVE_SEARCH")&&c&&(0,n.jsx)(z.S,{FallbackComponent:(0,n.jsx)(he.D,{value:{flagContactsEnabled:void 0},handleChange:a.handleChange,showFlagContactsField:!0,disabledSwitch:!0,errorMessage:null,activeSearches:null!==(j=null===u||void 0===u?void 0:u.savedSearchesContactsEnabled)&&void 0!==j?j:0,maxSavedSearches:T.maxSavedSearches}),children:(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)(ge.A,{}),children:(0,n.jsx)(_e,{handleChange:a.handleChange,toggleValue:a.data.flagContactsEnabled,editSearch:Boolean(t)})})})]})}var Ee=a(21683),Se=a.n(Ee);function Me(e){let{form:t,editSearch:a,onSaveFromExistingClick:r}=e;const{trans:o}=(0,i.T_)(),{user:s}=(0,m.Eu)();function l(e){t.handleSubmit(e)}return(0,n.jsx)(n.Fragment,{children:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B._,{type:"submit",variant:"accent",onClick:()=>{l({action:"update"})},block:!0,children:o("act_update_existing_search")}),(0,n.jsx)(B._,{type:"submit",variant:"link",onClick:()=>{r()},block:!0,children:o("act_save_new_search")})]}):(0,n.jsxs)(n.Fragment,{children:[!s&&(0,n.jsxs)("div",{className:Se()["in-saveSearchDialogFooter"],children:[(0,n.jsx)(L.c,{type:"email",name:"email",floatingLabel:!0,label:o("lbl_email"),placeholder:o("act_insert_email"),status:t.getErrorMessage("email")?"error":void 0,statusMessage:t.getErrorMessage("email"),onBlur:t.handleValidateTextInput("email"),onChange:t.handleTextInputChange("email"),defaultValue:t.data.email}),(0,n.jsx)(D.K,{error:t.getErrorMessage("privacy"),onChange:t.handleCheckboxChange("privacy"),value:Boolean(t.data.privacy)})]}),(0,n.jsx)(B._,{type:"submit",variant:"accent",disabled:t.submitButtonDisabled,loading:t.submitButtonLoading,onClick:()=>l({action:"save"}),block:!0,children:o("act_activate_for_free")})]})})}var Te=a(76125),be=a(89202),Ne=a(9774),xe=a.n(Ne);function Ae(e){let{onSubmit:t,onClose:a}=e;const{trans:r}=(0,i.T_)();return(0,n.jsx)(be.Vq,{title:r("lbl_new_save_search_confirmation_modal"),frameCustomClass:xe()["in-saveFromExistingConfirmDialog"],headerCustomClass:xe()["in-saveFromExistingConfirmDialog__header"],size:be.V7.DIALOG,content:(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:r("saving_similar_search_message")}}),contentCustomClass:xe()["in-saveFromExistingConfirmDialog__content"],footer:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Te.z,{type:"submit",variant:"link",onClick:()=>{t({action:"saveFromExisting",fromConfirmationDialogAction:!0})},children:r("act_save_new_search")}),(0,n.jsx)(Te.z,{type:"submit",variant:"accent",onClick:()=>{t({action:"update",fromConfirmationDialogAction:!0})},customClass:xe()["in-saveFromExistingConfirmDialog__updateButton"],children:r("act_update_existing_search")})]}),footerCustomClass:xe()["in-saveFromExistingConfirmDialog__footer"],onClose:a})}var Re=a(61607),ke=a.n(Re);function Oe(e){let{editSearch:t,onClose:a,onSuccess:m,entryPointPosition:h}=e;const{trans:_}=(0,i.T_)(),{trackTrovakasaFormSent:v,trackSearchSaveModalOpened:f}=(0,y.J)(),g=(0,d.t)("domainName"),{form:p,askToAgencies:C,setAskToAgencies:E,searchID:S,alertInfoAuth:M}=O({editSearch:t,onClose:a,onSuccess:m,entryPointPosition:h}),[T,b]=(0,r.useState)(!1),N=(0,l.Dv)(c.C),x=(0,r.useCallback)((()=>{M?E(!1):a()}),[M,a,E]),R=(0,r.useCallback)((()=>{const e=A(p.data.flagNotificationDaily||!1,p.data.flagNotificationRealtime||!1);v(e),x()}),[p.data.flagNotificationDaily,p.data.flagNotificationRealtime,v,x]);return(0,r.useEffect)((()=>{f("autoOpen"===h,t)}),[t,h,f]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.eF,{disableCloseOnBackdropClick:!0,size:I.nE.BOTTOMSHEET,contentCustomClass:(0,s.W)(!M&&ke()["in-saveSearchDialog__content"]),title:_(t?"update_search_modal_title":"act_save_search"),content:M&&!C?(0,n.jsx)(o.Fq,{text:_("check_email_activate_search")}):(0,n.jsx)(ye,{form:p,editSearch:t,entryPointPosition:h}),onClose:a,footer:M&&!C&&p.data.email?(0,n.jsx)(u.G,{email:p.data.email,domainName:g,onClick:a}):(0,n.jsx)(Me,{form:p,editSearch:t,onSaveFromExistingClick:()=>{b(!0)}}),footerCustomClass:(0,s.W)(ke()["in-saveSearchDialog__footer"],"cy-saveSearchDialogFooter")}),C&&!N.open&&S&&(0,n.jsx)(w,{onClose:x,searchID:S,onSuccess:R}),T&&(0,n.jsx)(Ae,{onSubmit:p.handleSubmit,onClose:()=>{b(!1)}})]})}},99953:function(e,t,a){a.d(t,{D:function(){return h}});var n=a(91670),r=a(16755),o=a(26833),i=a(32424),s=a(96240),l=a(84042),c=a(5329),u=a(35815),d=a(36141),m=a.n(d);function h(e){let{locationPreview:t,badges:a}=e;const{trans:d}=(0,o.T_)(),[h]=(0,i.G)({to:"sm"}),_=h?1:3,[v,f]=(0,r.useState)(!1),[g,p]=(0,r.useState)(t.main);return(0,n.jsxs)(u.dF,{customClass:m()["in-searchSummary"],direction:"col",children:[(0,n.jsx)(c.T,{bordered:!0,customClass:m()["in-searchSummary__figure"],onError:()=>{onerror=null,p(t.alternate)},children:(0,n.jsx)(c.T.Image,{src:g,width:328,height:109})}),(0,n.jsx)(u.yy,{children:(0,n.jsxs)("div",{className:m()["in-searchSummary__filters"],children:[a.map(((e,t)=>(0,n.jsx)(l.e,{customClass:(0,s.Z)(m()["in-searchSummary__badge"],!v&&t+1>_?m()["is-hidden"]:void 0),children:e},t))),!v&&a.length>_&&(0,n.jsx)("button",{className:m()["in-searchSummary__othersFilters"],onClick:()=>{f(!0)},children:d("act_show_other_filter",{params:[a.length-_],count:a.length-_})})]})})]})}},87147:function(e,t,a){a.d(t,{A:function(){return l}});var n=a(91670),r=(a(16755),a(85228)),o=a(16388),i=a(51674),s=a.n(i);function l(){return(0,n.jsxs)(r.n,{children:[(0,n.jsxs)("div",{className:s()["in-skeletonReceiveContactsHeading"],children:[(0,n.jsx)(o.i,{type:"row",theme:"light",items:1}),(0,n.jsx)(o.i,{type:"text",theme:"light",items:1,customClass:s()["in-skeletonReceiveContactsHeading__title"]}),(0,n.jsx)(o.i,{type:"text",theme:"light",items:1,customClass:s()["in-skeletonReceiveContactsHeading__tooltip"]})]}),(0,n.jsx)(o.i,{type:"text",theme:"light",items:2})]})}},46092:function(e,t,a){a.d(t,{Ss:function(){return d},Hj:function(){return m},cw:function(){return h}});var n=a(86504),r=a(9052),o=a(92592);const i=e=>{const t=e.replace(/>\s+</g,"><"),a=(new DOMParser).parseFromString(t,"text/xml"),n=document.createTreeWalker(a);return n.nextNode(),s(n)},s=e=>{const t={},a=e.currentNode;if(a){const n=a.attributes;if(n){t[a.tagName]={};for(let e=0;e<n.length;e++)t[a.tagName][n[e].name]=n[e].value}let r=e.firstChild();for(;r;){if(r.nodeType===Node.TEXT_NODE)return r.nodeValue;const n=s(document.createTreeWalker(r));t[a.tagName]="object"!==typeof n?{...t[a.tagName],[r.tagName]:n}:{...t[a.tagName],...n},r=e.nextSibling()}}return t};var l=a(77864);const c="/eseguiServizioTrovakasa.php",u=(0,n.c)("REALTIME_NOTIFICATIONS_ENABLED"),d=e=>{const t={trova_immobili:1,privacy_ricerca:e.privacy?"on":"off",ricevi:"off",invia:"on",idRicerca:e.searchID,email:e.email,nome:e.name,cognome:e.surname,telefono:e.phone,descrizioneImmobile:e.message,...(0,l._q)(e.searchParams)};return _(t)},m=e=>{const t={trova_immobili:1,privacy_ricerca:e.privacy?"on":"off",ricevi:"on",invia:"off",isCheckRequest:0,source:e.source,...(0,l._q)(e.searchParams),email:e.email};return t.flagContactsEnabled=(e=>{if(void 0!==e)return e?"1":"0"})(e.flagContactsEnabled),u&&(t.flagNotificationRealtime=((e,t)=>{if(e)return t.flagNotificationRealtime?"1":"0"})(u,e),t.flagNotificationDaily=((e,t)=>{if(e)return t.flagNotificationDaily?"1":"0"})(u,e)),e.nome&&(t.nome=e.nome),e.cognome&&(t.cognome=e.cognome),e.telefono&&(t.telefono=e.telefono),e.searchName&&(t.nomeRicerca=e.searchName),e.searchID&&"update"===e.action&&(t.idRicerca=e.searchID),h(t)},h=e=>r.d.post((0,o.mr)(c),{form:{...e,isCheckRequest:0},headers:{accept:"application/xml, text/xml, */*; q=0.01"}}).raw().then((e=>{var t,a;const n=i(e.body);if("1"===n.risposta.success&&n.risposta.idRicerca)return{searchId:n.risposta.idRicerca,userRegisterType:n.risposta.dati.register_type,savedSearchesRealTimeAlert:n.risposta.dati.count_real_time_alert,savedSearchesContactsEnabled:n.risposta.dati.count_contacts_enabled};if("0"===n.risposta.success&&"1"===(null===n||void 0===n||null===(a=n.risposta)||void 0===a||null===(t=a.errori)||void 0===t?void 0:t.erroreTentativi))throw new l.V6;var r;throw new Error(`Error with save search api: ${null===n||void 0===n||null===(r=n.risposta)||void 0===r?void 0:r.errori}`)})),_=e=>r.d.post((0,o.mr)(c),{form:{...e,isCheckRequest:1}}).raw().then((t=>{var a;const n=i(t.body);if("1"===n.risposta.success)return h({...e,isCheckRequest:0});throw new Error(`Error with save search api: ${null===n||void 0===n||null===(a=n.risposta)||void 0===a?void 0:a.errori}`)}))},97064:function(e,t,a){a.d(t,{M:function(){return l}});var n=a(60900),r=a(93940),o=a(77788),i=a(91978),s=a(88388);const l=()=>{const e=(0,r.Az)(o._),t=(0,r.Az)(i.NB),a=(0,s.l)(),l=Boolean(null===e||void 0===e?void 0:e.idMacroarea),c=Boolean(a.lusso),u="1"===a.lowcost,d="1"===a.seaView,m=Boolean(a.seaDistance),h="place"===(null===t||void 0===t?void 0:t.searchType)&&(t.value[0].type===n.l.country||t.value[0].type===n.l.region);return l||c||u||d||m||h}},52491:function(e,t,a){a.d(t,{u:function(){return l}});var n=a(16755),r=a(48927),o=a(26833),i=a(5232),s=a(77864);function l(e){let{realTimeAlerts:t,listingsResultsCount:a,dailyResultsCountTransKey:l,realTimeResultsCountTransKey:c,url:u}=e;const{user:d}=(0,r.Eu)(),{trans:m}=(0,o.T_)(),h=(0,i.My)("search_alert_frequency_settings",s.bx),_=h.realTime.maxSearches,v=!!d&&t>=_,f=a>=h.realTime.maxResults,g=a>=h.daily.maxResults;return{counterHeader:d?`(${t}/${_})`:void 0,realTimeErrorMessage:(0,n.useMemo)((()=>{const e=[{condition:v,transKey:"lbl_notifications_frequency_alert",transParams:[`<span>${t}</span>`,`<a href=${u}>`,"</a>"]},{condition:f,transKey:c,transParams:[h.realTime.maxResults]}];return(0,s.sd)(m,e)}),[v,t,u,f,c,h.realTime.maxResults,m]),dailyErrorMessage:(0,n.useMemo)((()=>{const e=[{condition:g,transKey:l,transParams:[h.daily.maxResults]}];return(0,s.sd)(m,e)}),[l,h.daily.maxResults,g,m]),isRealTimeNotificationFlagBlocked:v||f,isDailyNotificationFlagBlocked:g}}},45933:function(e,t,a){a.d(t,{J:function(){return g},X:function(){return f}});var n=a(16755),r=a(48927),o=a(60862),i=a(58753),s=a(93940),l=a(91978),c=a(27124),u=a(11362),d=a(49298),m=a(13391),h=a(33830),_=a(12377),v=a(88388);const f={Daily:"giornalieri",Instant:"immediati",None:"nessuno"},g=()=>{const e=(0,m.S)(),t=(0,s.Az)(l.NB),a=(0,v.l)(),f=(0,i.Dv)(c.N),{user:g}=(0,r.Eu)(),p=(0,d.v)(),C=(0,u.n0)(),y=(0,u.OV)(),E=(0,n.useCallback)((t=>{const{searchParams:a,geographyData:n,alreadySaved:r,resultCount:o,alertType:i,action:s,saveSearchTracking:l,activeSearch:c,searchId:u,fromConfirmationDialogAction:d,entryPoint:m}=t,v=m||`${d?"Modale Avviso ":""}${C||y?"Mappa":"Lista"}`,f={"Is User Logged":Boolean(g),"Is Already Saved":r,"Number of Results Returned":o,"Alert Type":i,"Entry Point":v,"Active Search":c,...(0,h.jV)({searchParams:a,geographyData:n}),...(0,h.VL)(a),"Search ID":u};switch(s){case"saveFromExisting":p(_.Ys.SAVE_SEARCH_UPDATED,{search_updated_status:"new",...l}),e(_.B_.SEARCH_SAVED,f);break;case"update":p(_.Ys.SAVE_SEARCH_UPDATED,{search_updated_status:"updated",...l}),e(_.B_.SEARCH_UPDATED,f);break;case"save":p(_.Ys.SAVE_SEARCH_CONFIRMED,{...l}),e(_.B_.SEARCH_SAVED,f)}}),[C,y,p,e,g]);return{trackSearchSaved:E,trackTrovakasaFormSent:(0,n.useCallback)((n=>{e(_.B_.TROVAKASA_FORM_SENT,{...(0,h.jV)({searchParams:a,geographyData:t}),...(0,h.VL)(a),"Entry Point":(0,o.Vm)()["Entry Point"],"Alert Type":n,"Number Of Results Returned":null===f||void 0===f?void 0:f.resultsCount})}),[t,null===f||void 0===f?void 0:f.resultsCount,a,e]),trackSearchSaveModalOpened:(0,n.useCallback)(((n,r)=>{e(r?_.B_.SEARCH_UPDATE_MODAL_OPENED:_.B_.SEARCH_SAVE_MODAL_OPENED,{...(0,h.jV)({searchParams:a,geographyData:t}),...(0,h.VL)(a),"Number Of Results Returned":null===f||void 0===f?void 0:f.resultsCount,"Is Auto Opened":r?void 0:n})}),[t,null===f||void 0===f?void 0:f.resultsCount,a,e])}}},42203:function(e,t,a){a.d(t,{ZE:function(){return k},IW:function(){return A.I},D0:function(){return R.D}});var n=a(91670),r=a(16755),o=a(26833),i=a(96240),s=a(58753),l=a(27124);const c=()=>{const e=(0,s.Dv)(l.N);return(null===e||void 0===e?void 0:e.isEditing)?"update":(null===e||void 0===e?void 0:e.isUpdated)?"updated":(null===e||void 0===e?void 0:e.searchId)?"saved":"new"};var u=a(79847),d=a(65291),m=a(48927),h=a(74207),_=a(27960);const v=()=>{const{trans:e}=(0,o.T_)(),{user:t}=(0,m.Eu)(),a=(0,s.Dv)(l.N),n=(0,_.t)("user"),r=(0,_.t)("domainName"),i=(0,h.fF)(null===a||void 0===a?void 0:a.email,r),c=Boolean(t)||i;return{showAction:c,link:(()=>{if(c)return t?n.savedSearchesUrl:i})(),label:(()=>{if(c)return e(t?"act_manage_alerts":"open_mail")})()}};var f=a(86254),g=a(83169);function p(e){let{onClose:t}=e;const{trans:a}=(0,o.T_)(),{user:r}=(0,m.Eu)(),{showAction:i,link:s,label:l}=v();return(0,n.jsx)(g.eF,{disableCloseOnBackdropClick:!0,title:a("disable_alert"),content:a(r?"manage_saved_search_dialog_text":"manage_saved_search_dialog_text_anonymous"),onClose:t,footer:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f._,{onClick:t,children:a("act_cancel")}),i&&s&&(0,n.jsx)(f._,{variant:"accent",as:"a",href:s,target:"_blank",children:l})]})})}function C(e){let{onClose:t,onConfirm:a}=e;const{trans:r}=(0,o.T_)();return(0,n.jsx)(g.eF,{title:r("act_save_search"),onClose:t,size:g.nE.DIALOG,content:r("save_previous_search_modal_text"),footer:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f._,{onClick:t,children:r("act_cancel",{capitalize:!0})}),(0,n.jsx)(f._,{variant:"accent",onClick:a,children:r("act_confirm",{capitalize:!0})})]})})}var y=a(32424),E=a(15347),S=a.n(E);const M=(e,t,a)=>"saved"===e?t?a("user_lbl_saved_search",{count:1}):a("user_lbl_saved_search_extended"):"updated"===e?t?a("user_lbl_updated_search",{count:1}):a("user_lbl_updated_search_extended"):a(t?"update"===e?"act_update":"act_save":"update"===e?"act_update_search":"act_activate_for_free");function T(e){let{onClick:t,icon:a,customClass:r,modalState:s,status:l}=e;const{trans:c}=(0,o.T_)(),[u]=(0,y.G)({to:"sm"}),d="saved"===l||"updated"===l;return(0,n.jsx)(f._,{as:d?"span":"button",type:d?void 0:"button",variant:d?"link":"accent",onClick:t,customClass:(0,i.Z)(d&&S()["in-saveSearchButton--inactive"],r),icon:a,loading:"opening"===s,"data-cy":"save-search-button",children:(0,n.jsx)("span",{className:u?void 0:S()["in-saveSearchButton--mobileHidden"],children:M(l,u,c)})})}var b=a(81172),N=a(7479),x=a.n(N),A=(a(38972),a(26864)),R=a(99953);function k(e){let{position:t,customClass:a,type:m="button"}=e;const{trans:h}=(0,o.T_)(),[_,v]=(0,r.useState)("close"),[f,g]=(0,r.useState)(!1),y=(0,s.Dv)(l.N),E=c(),S=(0,s.Dv)(d.Q),[M,N]=(0,r.useState)(!1);function A(){N(Boolean(S)),"saved"!==E&&"updated"!==E&&((null===y||void 0===y?void 0:y.isFetching)?v("opening"):v("open"))}return(0,r.useEffect)((()=>{"opening"===_&&((null===y||void 0===y?void 0:y.isFetching)||((null===y||void 0===y?void 0:y.searchId)?v("close"):v("open")))}),[null===y||void 0===y?void 0:y.isFetching,_,null===y||void 0===y?void 0:y.searchId]),(0,n.jsxs)(n.Fragment,{children:["open"!==_||M?null:(0,n.jsx)(b.G,{editSearch:"update"===E,onClose:function(){v("close")},entryPointPosition:t}),"open"===_&&M&&(0,n.jsx)(C,{onClose:()=>{v("close"),N(!1)},onConfirm:()=>N(!1)}),f?(0,n.jsx)(p,{onClose:()=>g(!1)}):null,"toggle"===m&&(0,n.jsx)(u.Z,{onClick:function(){return"new"===E?A():g(!0)},checked:"close"!==_||"new"!==E,customClass:a}),"link"===m&&(0,n.jsx)("a",{onClick:A,onKeyDown:A,role:"button",tabIndex:0,className:(0,i.Z)(x()["in-saveSearch__link"],"saved"===E&&x()["in-saveSearch__link--saved"],a),children:h("saved"===E?"user_lbl_saved_search_extended":"update"===E?"act_update":"updated"===E?"user_lbl_updated_search_extended":"act_save")}),"button"===m&&(0,n.jsx)(T,{onClick:A,modalState:_,status:E,icon:"box"!==t?{name:"bell"}:void 0,customClass:a})]})}},77864:function(e,t,a){a.d(t,{Nb:function(){return f},R0:function(){return C},Uo:function(){return p},V6:function(){return v},_U:function(){return u},_q:function(){return _},bx:function(){return m},sd:function(){return g},sf:function(){return d}});var n=a(82599),r=a.n(n),o=a(79385),i=a(27960),s=a(27966),l=a(34009),c=a(92592);const u="IM_PAP_TI",d={maxSavedSearches:10,visibility:{searchResultsThreshold:500,requiredFilters:["prezzoMassimo"],maxSearchAreaSqm:1e8},defaultValue:{selectedFiltersThreshold:7}},m={realTime:{maxSearches:20,maxResults:2e3},daily:{maxResults:4e3}},h={[o.M.CONTRACT]:"contratto",[o.M.CATEGORY]:"categoria",[o.M.MIN_PRICE]:"prezzoMin",[o.M.MAX_PRICE]:"prezzoMax",[o.M.MIN_SURFACE]:"supMin",[o.M.MAX_SURFACE]:"supMax",[o.M.TYPOLOGY]:"tipologia",[o.M.ROOM_TYPOLOGY]:o.M.ROOM_TYPOLOGY,[o.M.ROOM_BED_TYPOLOGY]:o.M.ROOM_BED_TYPOLOGY,[o.M.TENANT_SEX]:o.M.TENANT_SEX,[o.M.TENANT_JOB]:o.M.TENANT_JOB,[o.M.MIN_NUMBER_OF_ROOMS]:"locMin",[o.M.MAX_NUMBER_OF_ROOMS]:"locMax",[o.M.BATHROOMS]:o.M.BATHROOMS,[o.M.STATUS]:"fkStato",[o.M.PROPERTY_TYPE]:o.M.PROPERTY_TYPE,[o.M.FLOOR_ZONE]:o.M.FLOOR_ZONE,[o.M.BOX]:"boxauto",[o.M.BUILDING_USE]:o.M.BUILDING_USE,[o.M.HEATING]:"riscaldamento",[o.M.BALCONY_OR_TERRACE]:o.M.BALCONY_OR_TERRACE,[o.M.GARDEN]:o.M.GARDEN,[o.M.ENERGY_RATING]:o.M.ENERGY_RATING,[o.M.ELEVATOR]:o.M.ELEVATOR,[o.M.BASEMENT]:o.M.BASEMENT,[o.M.SWIMMING_POOL]:o.M.SWIMMING_POOL,[o.M.FURNISHED]:o.M.FURNISHED,[o.M.EXCLUDE_AUCTIONS]:o.M.EXCLUDE_AUCTIONS,[o.M.ALARM_SYSTEM]:o.M.ALARM_SYSTEM,[o.M.ANIMALS]:o.M.ANIMALS,[o.M.SMOKER]:o.M.SMOKER,[o.M.VIRTUAL_TOUR]:o.M.VIRTUAL_TOUR,[o.M.INVESTMENT]:o.M.INVESTMENT,[o.M.LICENSE]:o.M.LICENSE,[o.M.MIN_BEDROOMS]:o.M.MIN_BEDROOMS,[o.M.MAX_BEDROOMS]:o.M.MAX_BEDROOMS,[o.M.LANGUAGE]:o.M.LANGUAGE,idComune:"comune",idProvincia:"provincia",fkMetroStation:"fkMetroStation",idAreaTuristica:"fkAreaTuristica",fkMetro:"fkMetro",indirizzo:"indirizzo"},_=e=>{const t={};switch(Object.keys(e).forEach((a=>{h[a]&&(t[h[a]]=e[a])})),e.vrt?(t.gm_area=JSON.stringify({mode:"polygon",area:e.vrt.split(";").map((e=>e.split(",")))}),t.tipoRicerca="mappa"):e.raggio&&(t.gm_area=JSON.stringify({mode:"circle",area:{radius:e.raggio,center:e.centro.split(";").map((e=>e.split(",")))[0]}}),t.tipoRicerca="mappa"),e.idMZona&&(t.zona=e.idMZona.join(",")),e.idQuartiere&&(t.fkMicrozona=e.idQuartiere.join(",")),e.idCategoria){case s.aA.STANZE:var a;(null===e||void 0===e||null===(a=e.idTipologia)||void 0===a?void 0:a.length)>0&&(t.categoriaStanza=e.idTipologia[0],t.tipologia=void 0);break;case s.aA.NEGOZI_LOCALI_COMMERCIALI:t.tipoNegozioCommerciale=e.idTipologia,t.tipologia=void 0}return t};class v extends Error{constructor(){super(),this.name="AttempsError"}}const f=e=>{const t={idContratto:e.idContratto,idCategoria:e.idCategoria,idTipologia:e.idTipologia,idProvincia:e.idProvincia,idComune:e.idComune,idMZona:e.idMZona,idQuartiere:e.idQuartiere,vrt:e.vrt,fkMetroStation:e.fkMetroStation,fkMetro:e.fkMetro},a=(0,c.mr)((0,l.pk)("/search-list",t));return r()(a)},g=(e,t)=>{for(const{condition:a,transKey:n,transParams:r}of t)if(a)return e(n,{params:r});return null},p=e=>{let{trans:t,isAreaTooLarge:a,isResultsCountExceeded:n,isFilterRequiredMissing:r,isGeographySearchInvalid:o,isActiveSearchLimitExceeded:i,activeSearches:s,url:l}=e;return g(t,[{condition:i,transKey:"lbl_receive_contacts_alert",transParams:s?[`<span>${s}</span>`,`<a href=${l}>`,"</a>"]:[]},{condition:r,transKey:"lbl_receive_contacts_max_price_info"},{condition:a,transKey:"lbl_receive_contacts_area_info"},{condition:n||o,transKey:"lbl_receive_contacts_info"}])},C=(e,t)=>{const a=(0,i.t)("user").savedSearchesUrl;return(0,c.mr)(`${a}?filter=${t}&entryPoint=${e}`)}},47538:function(e,t,a){a.d(t,{FF:function(){return u},ex:function(){return m}});var n=a(16755),r=a(93940),o=a(5099),i=a(14087),s=a(43187),l=a(507),c=a(70710);const u=(0,r.rP)({key:"SearchFormHiddenFields",get(e){let{get:t}=e;const a=t(o.Js),n=t(o.kc);return(0,c.S)(a,n)}}),d=(0,r.rP)({key:"SearchModalHiddenFields",get(e){let{get:t}=e;const a=t(o.nn),n=t(o.kc);return(0,c.S)(a,n)}}),m=e=>{const[t,a]=(0,r.xX)(e),c=(0,r.Az)((e=>{switch(!0){case e===o.nn:return d;case e===o.Js:default:return u}})(e)),m=(0,r.Az)(o.kc);return(0,n.useEffect)((()=>{c.forEach((e=>{((e,t)=>"range"===e.type?null!==t[e.fromName]||null!==t[e.toName]:!(0,s.vZ)(t[e.field],(0,l.Ob)(e)))(e,t)&&a((t=>(0,i.Uy)(t,(t=>((e,t)=>("range"===e.type?(t[e.fromName]=null,t[e.toName]=null):t[e.field]=(0,l.Ob)(e),t))(e,t)))))})),m.filter((e=>"hidden"===e.type)).forEach((e=>{c.find((t=>(null===t||void 0===t?void 0:t.field)===e.field))||a((t=>(0,i.Uy)(t,(t=>{t[e.field]=e.value}))))}))}),[m,c,a,t]),(0,n.useMemo)((()=>m.filter((e=>!c.find((t=>(null===t||void 0===t?void 0:t.field)===e.field))))),[m,c])}},3324:function(e,t,a){a.d(t,{J:function(){return i}});var n=a(16755),r=a(32424),o=a(47538);const i=e=>{const[t]=(0,r.G)({to:"sm"}),[a]=(0,r.G)({from:"sm",to:"md"}),[i]=(0,r.G)({from:"md",to:"lg"}),s=(0,o.ex)(e),l=(0,n.useMemo)((()=>s.filter((e=>Boolean(e.topFilter)))),[s]);return{barFilters:(0,n.useMemo)((()=>{const e=[];switch(!0){case t:break;case a:e.push(l[0]);break;case i:e.push(l[0],l[1]);break;default:e.push(...l)}return e}),[t,a,i,l]),modalFilters:l}}},50816:function(e,t,a){a.d(t,{q:function(){return m}});var n=a(93940),r=a(5099),o=a(79385),i=a(42884),s=a(47538),l=a(3324),c=a(43187),u=a(507);const d=e=>-1!==["range","category"].indexOf(e.type),m=()=>{const{modalFilters:e}=(0,l.J)(r.Js),t=(0,s.ex)(r.Js),a=(0,n.Az)(r.kc).filter((e=>!e.topFilter&&t.find((t=>t.field===e.field)))).concat(e),m=a.filter(d),h=a.filter((e=>!d(e))),_=[];m.forEach((e=>{switch(e.type){case"range":return void _.push(e.fromName,e.toName);case"category":return void _.push(o.M.CATEGORY,o.M.TYPOLOGY)}})),_.push(...h.map((e=>e.field)));return((e,t)=>{const a=(0,c.BE)(t);return e.map((e=>{switch(e.type){case"contract":case"category":return 1;case"range":return Boolean(a[e.fromName])||0===a[e.fromName]||Boolean(a[e.toName])||0===a[e.toName]?1:0;default:var t;return Object.prototype.hasOwnProperty.call(a,e.field)&&JSON.stringify(a[e.field])!==JSON.stringify((0,u.oe)(e))?e.field===o.M.BALCONY_OR_TERRACE?(null===(t=a[e.field])||void 0===t?void 0:t.length)||0:1:0}})).reduce(((e,t)=>e+t),0)})(a,(0,i._)(_))}},61048:function(e,t,a){a.d(t,{G:function(){return s}});var n=a(91670),r=a(74207),o=a(26833),i=a(86254);function s(e){let{email:t,domainName:a,onClick:s}=e;const{trans:l}=(0,o.T_)(),c=(0,r.t7)({email:t,domainName:a});return c||(0,n.jsx)(i._,{variant:"accent",block:!0,onClick:s,customClass:"ic-sniperLink__button",children:l("lbl_ok")})}},72395:function(e,t,a){a.d(t,{I:function(){return o}});var n=a(16755),r=a(43187);const o=(e,t)=>(0,n.useMemo)(e,(e=>{const t=(0,n.useRef)(e);return(0,r.vZ)(e,t.current)||(t.current=e),t.current})(t))},98979:function(e,t,a){a.d(t,{r:function(){return r}});var n=a(16755);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;const[a,r]=(0,n.useState)(e);return(0,n.useEffect)((()=>{if(!e)return void r(!1);const a=setTimeout((()=>{r(!0)}),t);return()=>{clearTimeout(a)}}),[e]),a}},68736:function(e,t,a){a.d(t,{n:function(){return r}});var n=a(16755);const r=function(e){let{enabled:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0};const a=(0,n.useRef)(e);return(0,n.useEffect)((()=>{t&&setTimeout((()=>{var e;null===(e=a.current)||void 0===e||e.focus()}),100)}),[t]),a}},59199:function(e,t,a){a.d(t,{m:function(){return s}});var n=a(93940),r=a(5099),o=a(47538),i=a(43187);const s=(0,n.rP)({key:"FormSearchParamsWithoutHidden",get(e){let{get:t}=e;const a={},n=t(r.Js),s=t(o.FF);return Object.keys(n).filter((e=>!s.find((t=>(null===t||void 0===t?void 0:t.field)===e)))).forEach((e=>a[e]=n[e])),(0,i.BE)(a)}})},42884:function(e,t,a){a.d(t,{_:function(){return c},C:function(){return l}});var n=a(16755),r=a(93940),o=a(5099);function i(e,t){const a=(0,n.useMemo)((()=>{const a=t.split(".");return(0,r.rP)({key:`#${e.key}.${t}`,get(t){let{get:n}=t;return(e=>{for(let t=0;t<a.length;t++)e=e?e[a[t]]:null;return e})(n(e))}})}),[e,t]);return(0,r.Az)(a)}var s=a(14087);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Js;const a=i(t,e),l=(0,r._g)(t);return[a,(0,n.useCallback)((t=>{l((a=>({...a,[e]:"function"===typeof t?(0,s.Uy)(a[e],(e=>t(e))):t})))}),[e,l])]}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Js;const[a]=(0,r.xX)(t),n={};return(e||[]).forEach((e=>{n[e]=a[e]})),n}},78472:function(e,t,a){a.d(t,{g:function(){return c}});var n=a(16755),r=a(98979),o=a(91670),i=a(39547);var s=a(61679),l=a(14087);function c(e){let{initialData:t,schema:a,onSubmit:c,onSuccess:u,onError:d}=e;const[m,h]=(0,n.useState)(t);(0,n.useEffect)((()=>{h(t)}),[t]);const[_,v]=function(){const[e,t]=(0,n.useReducer)(((e,t)=>"string"===typeof t?{type:t}:t),{type:"ok"}),a=(0,i.Vd)();return[e,function(e){"string"!==typeof e&&e.message&&a((0,o.jsx)(i.pS,{variant:e.type,children:e.message})),t(e)}]}(),f=(0,n.useCallback)((e=>{if("loading"===_.type)return;const t=(0,s.Of)(m,a);if(t)return void v({type:"error",errors:t});v("loading");c(m,e).then((function(t){const a=u(m,t,e);v({type:"success",message:a})}),(function(e){const t=d(e);v({type:"error",errors:[],message:t})}))}),[m,d,c,u,a,v,_.type]),g=(0,n.useCallback)((e=>{const t=(0,l.Uy)(m,e);if(h(t),"error"===_.type){const e=(0,s.Of)(t,a);if(e){const t=new Set(_.errors.map((e=>e.path)));v({type:"error",errors:e.filter((e=>t.has(e.path)))})}else v("ok")}}),[m,a,v,_]),p=(0,n.useCallback)((e=>t=>{const n=t.target.value,r=(0,s.OP)(e,m,a);if("error"===_.type){const e=(0,s.Of)(m,a),t=new Set(_.errors.map((e=>e.path)));n&&e&&v({type:"error",errors:(r||[]).concat(e.filter((e=>t.has(e.path))))})}else n&&r&&v({type:"error",errors:r})}),[m,a,v,_]),C=(0,n.useCallback)((e=>t=>{g((a=>{a[e]=t.target.value}))}),[g]),y=(0,n.useCallback)((e=>t=>{g((a=>{a[e]=t.target.checked}))}),[g]),E=(0,n.useCallback)((e=>"error"===_.type&&(0,s.pP)(_.errors,e)),[_]),S=(0,n.useCallback)((e=>{if(E(e)&&"error"===_.type)return(0,s.Z6)(_.errors,e)}),[E,_]),M="loading"===_.type,T=(0,r.r)(M);return{status:_,setStatus:v,handleSubmit:f,handleChange:g,handleValidateTextInput:p,handleTextInputChange:C,handleCheckboxChange:y,isNotValid:E,getErrorMessage:S,data:m,submitButtonDisabled:M,submitButtonLoading:T}}},61547:function(e,t,a){a.d(t,{r:function(){return n.b}});var n=a(40665)},5329:function(e,t,a){a.d(t,{T:function(){return n.B}});var n=a(33227)},35815:function(e,t,a){a.d(t,{EO:function(){return n.mt},MJ:function(){return n.nV},Pq:function(){return n.e3},dF:function(){return n.xO},r4:function(){return n.Lb},xF:function(){return n.hE},yy:function(){return n.si}});var n=a(81962)},16388:function(e,t,a){a.d(t,{i:function(){return n.O}});var n=a(548)},56797:function(e,t,a){a.d(t,{c:function(){return n.n}});var n=a(65885)},79847:function(e,t,a){a.d(t,{Z:function(){return n.Z}});var n=a(10082)},84898:function(e,t,a){a.d(t,{q:function(){return m}});var n=a(16755),r=a(96999),o=a(93940),i=a(89421),s=a(91978),l=a(33830),c=a(22383),u=a(43187),d=a(88388);const m=e=>{const t=(0,o.Az)(s.NB),{locale:a}=(0,r.useRouter)(),m=(0,d.l)(),{prezzoMinimo:h,prezzoMassimo:_,idTipologia:v,idContratto:f,idCategoria:g,lusso:p,localiMassimo:C,localiMinimo:y,bagni:E,superficieMassima:S,superficieMinima:M,ascensore:T,riscaldamenti:b,fasciaPiano:N,stato:x,giardino:A,boxAuto:R}=m,k=(0,l.Sy)(m);return(0,n.useCallback)((n=>(0,u.yg)({properties_ids:null===e||void 0===e?void 0:e.join("|"),properties_contract:(0,l.kJ)(f),properties_type:(0,l.Yn)(g,v),properties_price_min:h,properties_price_max:_,properties_country:(0,i.B0)(t,c.l.country)||void 0,properties_region:(0,i.B0)(t,c.l.region)||void 0,properties_province:(0,i.B0)(t,c.l.province)||void 0,properties_city:(0,i.B0)(t,c.l.city)||void 0,properties_macrozone:(0,i.B0)(t,c.l.cityZone)||void 0,properties_microzone:(0,i.B0)(t,c.l.microzone)||void 0,properties_touristicarea:(0,i.B0)(t,c.l.touristicArea)||void 0,properties_is_luxury:(0,l.Tk)(p),properties_rooms_min:y,properties_rooms_max:C,properties_baths:E,properties_surface_min:M,properties_surface_max:S,properties_floor:(0,l.K2)(N),properties_has_elevator:(0,l.Tk)(T),properties_state:(0,l.B4)(x),properties_heating:(0,l.Pf)(b),properties_otherfeatures:k&&0!==k.length?k.join("|"):void 0,language:a,view_type:n,properties_category:(0,l.$d)(g),properties_garage:(0,l.GG)(R),properties_garden:(0,l.Iv)(A),properties_is_auction:(0,l.Tk)((0,l.kM)(f))})),[e,h,_,g,v,f,t,p,y,C,E,M,S,N,T,x,b,k,a,R,A])}},27362:function(e,t,a){var n,r;a.d(t,{K:function(){return r},W:function(){return n}}),function(e){e.UNREGISTERED="UNREGISTERED",e.REGISTERED_WEAK_PWD="REGISTERED_WEAK_PWD",e.REGISTERED_CUSTOM_PWD="REGISTERED_CUSTOM_PWD"}(n||(n={})),function(e){e.SAVE_LISTING="saveListing",e.SAVE_SEARCH="saveSearch",e.MESSAGING="messaging",e.DEFAULT="withoutAction"}(r||(r={}))},24971:function(e,t,a){var n,r;a.d(t,{i:function(){return n},l:function(){return r}}),function(e){e.high="2",e.medium="5",e.low="8",e.all=""}(n||(n={})),function(e){e.HIGH="high",e.MEDIUM="medium",e.LOW="low",e.ALL="all"}(r||(r={}))},52609:function(e,t,a){a.d(t,{k:function(){return i}});var n=a(26075),r=a.n(n);const{publicRuntimeConfig:o}=r()(),i=o.estatsMetrics},61679:function(e,t,a){a.d(t,{GP:function(){return f},Jh:function(){return c},OP:function(){return s},Of:function(){return i},Z6:function(){return v},Zm:function(){return g},fQ:function(){return m},kw:function(){return h},pP:function(){return l},q9:function(){return d},vV:function(){return p},vx:function(){return _},xT:function(){return u},yf:function(){return C}});var n=a(39237);const r=/^[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/gi,o=/^(\+)?[\s\d()\-/.]+$/g,i=(e,t)=>{const a=Object.keys(t).flatMap((a=>s(a,e,t))).filter(n.vJ);return a.length?a:null},s=(e,t,a)=>{const n=a[e],r=null===n||void 0===n?void 0:n.map((a=>({...a(t,e),path:e}))),o=null===r||void 0===r?void 0:r.filter((e=>!0!==e.valid));return(null===o||void 0===o?void 0:o.length)?o:null},l=(e,t)=>{if(!e)return!1;return!!e.map((e=>e.path)).includes(t)},c=e=>(t,a)=>{const n=t[a];return{valid:"string"===typeof n&&p(n)||!n,message:e}},u=e=>(t,a)=>{const n=t[a];return{valid:"string"===typeof n&&C(n)||!n,message:e}},d=e=>(t,a)=>{const n=t[a];return{valid:Boolean("string"===typeof n?n.toString().trim().length:"number"===typeof n||Boolean(n)),message:e}},m=e=>(t,a)=>{const n=t[a];return{valid:Boolean(n),message:e}},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(a,n)=>{const r=a[n];return{valid:e.includes(r),message:t}}},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t,a)=>{const n=t[a]||[];let r=!1;return Object.keys(n).forEach((e=>{n[e]&&(r=!0)})),{valid:r,message:e}}},v=(e,t)=>{const a=null===e||void 0===e?void 0:e.find((e=>e.path===t));return a?a.message:""},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"required";return(t,a)=>{const n=t.phone,r=d(e);let o={valid:!0,message:""};return n||(o=r(t,a)),o}},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"required";return(t,a)=>{const n=t.email,r=d(e);let o={valid:!0,message:""};return n||(o=r(t,a),o.message=""),o}},p=e=>Boolean(e.match(r)),C=e=>e.length>=6&&Boolean(e.match(o))},90292:function(e,t,a){a.d(t,{KA:function(){return i},pR:function(){return s},SB:function(){return l},jO:function(){return c}});var n="https://s1.immobiliare.it/_next/static/media/ricercasalvata_placeholder@2x.dfec7433.png",r=a(27960),o=a(85384);const i=()=>n,s=(e,t,a)=>`${(0,r.t)("vhostUrlCdnMaps")}${(0,r.t)("mapchartImgServiceVersion")}/${t}/${a}/${e}`,l=(e,t,a,n)=>e?`${s(e,t,a)}/${n.join("-")}`:i(),c=(e,t,a)=>{const n={width:t,height:a,markerType:3,style:"feature:road|element:labels|visibility:off",fillColor:"0x0074c14d",strokeColor:"0x0074c1ff",strokeWeight:2};return"circle"===e.searchType?(n.markerType=2,n.radius=e.value.radius,(0,o.t)(parseFloat(e.value.center[0]),parseFloat(e.value.center[1]),0,n)):"polygon"===e.searchType?(n.path=e.value.points,(0,o.t)(0,0,0,n)):null}},67970:function(e,t,a){a.d(t,{XR:function(){return i},Xp:function(){return c},Y7:function(){return u},nj:function(){return s},p$:function(){return l},t:function(){return o}});var n=a(60900),r=a(16947);const o=(e,t)=>{if("place"!==(null===e||void 0===e?void 0:e.searchType)){if(null===e||void 0===e?void 0:e.value.indirizzo){const t=e.value.indirizzo.split("-").map(r.kC).join(" "),a=e.value.cityLabel;return`${t}${a?` \u2022 ${a}`:""}`}return(0,r.kC)(t("search_formatter_area_drawn"))}if(e.value[0].type===n.l.province||e.value[0].type===n.l.city)return e.value[0].label;if(e.value[0].type===n.l.cityZone||e.value[0].type===n.l.microzone){const a=e.value[0].parents.find((e=>e.type===n.l.city));if(a)return`${a.label} ${t("search_formatter_with_zone_selected",{count:e.value.length,params:[e.value.length]})}`}return null},i=(e,t,a)=>t&&a?`${t} - ${a}`:a?e("search_formatter_max",{params:[a]}):t?e("search_formatter_min",{params:[t]}):null,s=(e,t,a,n)=>a&&n?a===n?(0,r.kC)(e(t.uniqueValue,{params:[a]})):(0,r.kC)(e(t.bothValues,{params:[a,n]})):n?e(t.onlyMax,{count:parseInt(n,10),params:[n]}):a?e(t.onlyMax,{count:parseInt(a,10),params:[a]}):null,l=(e,t,a)=>{var n;return null===(n=a.find((t=>t.field===e)).options.find((e=>e.id===t)))||void 0===n?void 0:n.value},c=(e,t,a)=>{if(a){const n=[...a];n.sort();const o=n.map((t=>e[t])).filter(Boolean);return t?`${(0,r.kC)(t)}: ${o.join(", ")}`:o.join(", ")}return null},u=(e,t)=>{if(1===(e=d(e)).length)return m(e[0],t);const{label:a,description:n}=h(e,t);return`${a} \u2022 ${n}`},d=e=>{const t=[];return e.forEach((a=>{if(a.type===n.l.metro){e.find((e=>{let r;var o;e.type===n.l.metroLine?r=Boolean(null===(o=e.children)||void 0===o?void 0:o.find((e=>e.label===a.label))):r=t.find((e=>e.label===a.label));return r}))||t.push(a)}else t.push(a)})),t},m=(e,t)=>e.type===n.l.metro?`${t("lbl_metro")} ${e.label}`:`${e.parents[0].label} \u2022 ${e.label}`,h=(e,t)=>{var a;const r=e[0],o=e.length>1,i=r.parents.length>0,s=r.type===n.l.metro?[null===(a=r.parents.find((e=>e.type===n.l.metroLine)))||void 0===a?void 0:a.label]:null;let l=r.type===n.l.metro?`${t("lbl_metro")} ${r.label} - ${null===s||void 0===s?void 0:s.join(", ")}`:r.label;const c=r.parents.find((e=>e.type===n.l.city));o&&c&&(l=c.label);let u="";if(o&&i)r.type!==n.l.metro&&r.type!==n.l.metroLine||(u=_(e,t));else{let e="";i&&(e=c&&c.label?c.label:r.parents[0].label),u=t("geo_entity_type",{params:[r.label,e],context:`${r.type}`})}return{label:l,description:u}},_=(e,t)=>!0===e.every((e=>e.type===n.l.metroLine))?t("lbl_metro_lines",{params:[e.length]}):t("lbl_metro_stations",{params:[e.reduce(((e,t)=>t.type===n.l.metroLine?e+(t.children?t.children.length:0):e+1),0)]})},85384:function(e,t,a){a.d(t,{t:function(){return i}});var n=a(27960),r=a(34009),o="https://s1.immobiliare.it/_next/static/media/map-marker.67a91aaf.png";const i=(e,t,a,i)=>{if("undefined"===typeof e||"undefined"===typeof t||"undefined"===typeof a)throw new Error("Missing center and zoom");const s=(0,n.t)("staticMapUrl");i.width=i.width||628,i.height=i.height||245,i.language=i.language||"it",i.scale=i.scale||1,i.fillColor=i.fillColor||"0x319ACF",i.strokeColor=i.strokeColor||"0x319ACF",i.strokeWeight=i.strokeWeight||2,i.numPoints=i.numPoints||40,i.radius=i.radius||250,i.radius=i.radius/1e3;const l={zoom:a&&a>0?a:void 0,size:`${i.width}x${i.height}`,language:i.language,style:i.style,scale:1!==i.scale?i.scale:void 0,sensor:!1};let c="";switch(i.markerType){case 3:c+=`color:${i.strokeColor}|fillcolor:${i.fillColor}|weight:${i.strokeWeight}`,c+=((e,t)=>{let a="",n=1;e.length>t&&(n=Math.round(e.length/t));for(let r=0;r<e.length;r+=n){let t=e[r][0],o=e[r][1];if(a+=`|${t},${o}`,r>e.length-2*n){t=e[0][0],o=e[0][1],a+=`|${t},${o}`;break}}return a})(i.path,i.numPoints),l.path=c;break;case 2:c+=`color:${i.strokeColor}|fillcolor:${i.fillColor}|weight:${i.strokeWeight}`,c+=((e,t,a,n)=>{const r=Math.PI/180;let o="";const i=e,s=t,l=a/111,c=l/Math.cos(i*r);for(let u=0;u<n+1;u++){const e=Math.PI*(u/(n/2));o+=`|${i+l*Math.sin(e)},${s+c*Math.cos(e)}`}return o})(e,t,i.radius,i.numPoints),l.path=c;break;case 1:l.markers=`icon:${o}|${e},${t}`,l.center=`${e},${t}`;break;default:l.center=`${e},${t}`}return(0,r.pk)(s,l)}},20938:function(e,t,a){a.d(t,{P:function(){return n}});const n=(0,a(74829).cn)(void 0)},88388:function(e,t,a){a.d(t,{l:function(){return u}});var n=a(58753),r=a(93940),o=a(77788),i=a(19584),s=a(93e3),l=a(72395),c=a(59199);const u=()=>{const e=(0,r.Az)(o._),t=(0,r.Az)(c.m),a=(0,n.Dv)(s.j),u=(0,n.Dv)(i.zB);return(0,l.I)((()=>({...e,...t,...a&&u})),[e,t,a,u])}},86663:function(e,t,a){a.d(t,{M:function(){return c}});var n=a(58753),r=a(93940),o=a(77788),i=a(19584),s=a(72395),l=a(59199);const c=()=>{const e=(0,r.Az)(l.m),t=(0,n.Dv)(i.Dy),a=(0,n.Dv)(i.zB),c=(0,r.Az)(o._);return(0,s.I)((()=>({zoom:t,...a,...c,...e})),[e,c,a,t])}}}]);
</script>

</body>
</html>
