<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6667-b500f4f54b3587af.html</title>
</head>
<body>

<script>
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6667],{97111:function(e,t,n){n.d(t,{M_:function(){return h},oO:function(){return d}});var i=n(91670),a=n(16755),s=n(92360),r=n(29081);const o=(0,a.createContext)(null);function l(e){let{children:t,isPresent:n,onExitComplete:s}=e;const l=(0,r.h)(c),d=(0,a.useMemo)((()=>({isPresent:n,onExitComplete:e=>{l.set(e,!0);let t=!0;l.forEach((e=>{e||(t=!1)})),t&&s&&s()},register:e=>(l.set(e,!1),()=>l.delete(e))})),[n]);return(0,a.useMemo)((()=>{l.forEach(((e,t)=>l.set(t,!1)))}),[n]),(0,a.useEffect)((()=>{n||0!==l.size||null===s||void 0===s||s()}),[n]),(0,i.jsx)(o.Provider,{value:d,children:t})}function c(){return new Map}function d(){const e=(0,a.useContext)(o),{isPresent:t,onExitComplete:n,register:i}=e||{},s=m();(0,a.useEffect)((()=>null===i||void 0===i?void 0:i(s)),[]);return i?!t&&n?[!1,()=>null===n||void 0===n?void 0:n(s)]:[!0]:[!0,null]}let u=0;const p=()=>u++,m=()=>(0,r.h)(p);function v(e){return e.key||""}function h(e){let{children:t,exitBeforeEnter:n,onExitComplete:r}=e;const o=(0,a.useMemo)((()=>function(e){const t=[];return a.Children.forEach(e,(e=>{(0,a.isValidElement)(e)&&t.push(e)})),t}(t)),[t]),[c,d]=(0,a.useState)(o),[u,p]=(0,a.useState)(!1),m=[];if(o!==c){const e=c.map(v),t=o.map(v),n=e.length;for(let i=0;i<n;i++){const n=e[i];-1===t.indexOf(n)&&m.push(n)}}const h=Boolean(m.length);return(0,s.L)((()=>{if(o===c)return;if(p(h),!h)return u&&(null===r||void 0===r||r()),void d(o);const e=n?[]:[...o],t=c.map(v);for(let n=0;n<m.length;n++){const i=m[n],a=t.indexOf(i),s=c[a];e.splice(a,0,s)}d(e)}),[o,h]),(0,a.useMemo)((()=>(0,i.jsx)(i.Fragment,{children:c.map((e=>{const t=e.key;return m.includes(t)?(0,i.jsx)(l,{isPresent:!1,onExitComplete:()=>{d((e=>e.filter((e=>e.key!==t))))},children:e},v(e)):(0,i.jsx)(l,{isPresent:!0,children:e},v(e))}))})),[c])}},87989:function(e,t,n){n.d(t,{O:function(){return u}});var i=n(91670),a=n(26833),s=n(83169),r=n(35554),o=n(75983);function l(e){let{supervisor:t,agency:n,onPhoneContactClick:a}=e;const s=null===t||void 0===t?void 0:t.phones,l=null===n||void 0===n?void 0:n.phones,c=(e,t)=>{e&&a(t)};if(!t){const e=l&&l.length>1;return(0,i.jsx)(i.Fragment,{children:null===l||void 0===l?void 0:l.map(((t,n)=>(0,i.jsx)(r.S,{type:t.type,phoneNumber:t.value,isPhoneVisible:!0,onPhoneClick:()=>c(Boolean(e),t.type)},n)))})}if("user"===t.type)return(0,i.jsx)(o.R,{phoneImageUrl:t.phoneUrl});const d=s&&s.length>1;return(0,i.jsx)(i.Fragment,{children:null===s||void 0===s?void 0:s.map(((e,t)=>(0,i.jsx)(r.S,{type:e.type,phoneNumber:e.value,isPhoneVisible:!0,onPhoneClick:()=>c(Boolean(d),e.type)},t)))})}var c=n(33468),d=n.n(c);function u(e){let{supervisor:t,agency:n,onClose:r,onPhoneContactClick:o}=e;const{trans:c}=(0,a.T_)();return(0,i.jsx)(s.eF,{title:c("act_call_private",{capitalize:!0}),onClose:r,size:s.nE.DIALOG,content:(0,i.jsx)(l,{supervisor:t,agency:n,onPhoneContactClick:o}),contentCustomClass:d()["in-contactCallDialog__content"]})}},57411:function(e,t,n){n.d(t,{D:function(){return o}});var i=n(91670),a=n(90001),s=n(90851),r=n.n(s);function o(e){let{message:t}=e;return(0,i.jsxs)("div",{className:r()["in-contactStripe"],children:[(0,i.jsx)(a.D4,{small:!0,name:"chat--active",customClass:r()["in-contactStripe__icon"]}),t]})}},52083:function(e,t,n){n.d(t,{E:function(){return c}});var i=n(91670),a=n(16755),s=n(96240),r=n(97111),o=n(70250),l=n.n(o);function c(e){let{children:t}=e;const[n,o]=(0,r.oO)(),[c,d]=(0,a.useState)("top");return(0,a.useEffect)((()=>{if(!n){d("down");const e=setTimeout(o,2500);return()=>clearTimeout(e)}"down"===c&&d("top")}),[n,o,c]),(0,i.jsx)("div",{className:(0,s.Z)(l()["in-mapCardsAnimationWrapper"],"top"===c&&l()["do-slideTop"],"down"===c&&l()["do-slideDown"]),onAnimationEnd:function(){"top"===c?d(null):"down"!==c||n||o()},children:t})}},73240:function(e,t,n){n.d(t,{N:function(){return c}});var i=n(91670),a=n(26833),s=n(96240),r=n(90001),o=n(72143),l=n.n(o);function c(e){let{onPrevClick:t,onNextClick:n,currentPage:o,totalPages:c,iconName:d}=e;const{trans:u}=(0,a.T_)(),p=1===o,m=o===c;return(0,i.jsxs)("div",{className:l()["in-mapCardsPaginator"],children:[(0,i.jsx)("button",{onClick:t,className:(0,s.Z)(l()["in-mapCardsPaginator__button"],p&&l()["is-disabled"]),children:(0,i.jsx)(r.D4,{name:"arrow-left",small:!0})}),(0,i.jsxs)("span",{className:l()["in-mapCardsPaginator__text"],children:[(0,i.jsx)(r.D4,{name:d,customClass:l()["in-mapCardsPaginator__textIcon"],small:!0}),u("pagination_count_info",{params:[o,c]})]}),(0,i.jsx)("button",{onClick:n,className:(0,s.Z)(l()["in-mapCardsPaginator__button"],m&&l()["is-disabled"]),children:(0,i.jsx)(r.D4,{name:"arrow-right",small:!0})})]})}},38182:function(e,t,n){n.d(t,{b:function(){return l}});var i=n(91670),a=n(96240),s=n(7836),r=n(57156),o=n.n(r);function l(e){return(0,i.jsx)(s.T,{...e,ref:e.tooltipRef,containerCustomClass:(0,a.Z)(o()["in-mapCardsTooltip"],o()["is-blocked"],o()[`in-mapCardsTooltip--${e.direction}`],"cy-mapTooltip",e.containerCustomClass),children:e.children})}},58038:function(e,t,n){n.d(t,{W:function(){return i}});const i=(0,n(74829).cn)(void 0)},28969:function(e,t,n){n.d(t,{l:function(){return s}});var i=n(48193);const a="real-estate-visited",s=(0,i.O4)(a,(()=>{const e=localStorage.getItem(a),t={lastUpdate:Date.now(),markers:[],version:1};if(!e)return t;const n=JSON.parse(e);if(!("version"in n))return t;return n.lastUpdate<Date.now()-864e5?(localStorage.setItem(a,JSON.stringify(t)),t):n})())},62872:function(e,t,n){n.d(t,{IS:function(){return s},hD:function(){return r},ql:function(){return o},uc:function(){return a}});var i=n(49568);const a=e=>i.d.get("/api-next/user/preferences/",{searchParams:{listings:JSON.stringify(e)}}).json(),s=async(e,t)=>{const n=`/api/utente/annunci/salvati/${e}`;return"save"===t?(await i.d.post(n).json(),!0):(await i.d.delete(n).json(),!1)},r=async(e,t)=>{const n=`/api/utente/annunci/nascosti/${e}`;return"hide"===t?(await i.d.post(n).json(),!0):(await i.d.delete(n).json(),!1)},o=async(e,t)=>{const n=`/api/utente/annunci/note/${e}`;return t?await i.d.post(n,{form:{nota:t}}).raw():await i.d.delete(n).raw(),t}},12646:function(e,t,n){n.d(t,{i:function(){return i}});const i=(0,n(79823).I)("savedMarkersAtom",{})},86667:function(e,t,n){n.d(t,{Z6:function(){return p},dF:function(){return St},YE:function(){return Lt},we:function(){return It},Sd:function(){return ln},Td:function(){return An},Jc:function(){return Wn},Wm:function(){return Jn}});var i=n(91670),a=n(26833),s=n(96240),r=n(82593),o=n(85550),l=n(16947);const c=e=>{if(e){return e.includes("|")||!1?e.split("|").map((e=>e.trim())):[e]}};var d=n(54695),u=n.n(d);function p(e){let{listingType:t,formattedValue:n,minValue:d,isVisible:p,isProjectLike:m,hasFullRangePrice:v=!1,listPipeCustomClass:h}=e;const{trans:g}=(0,a.T_)(),_=c(n);return _?_.length>1?(0,i.jsx)(o.dV,{type:"pipe",customClass:(0,s.Z)(u()["in-formattedPrice--hasPipe"],h),children:_.map((e=>(0,i.jsx)(o.dG,{children:(0,l.kC)(e)},e)))}):t===r.$0.AUCTION||m&&d&&!v?(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:u()["in-formattedPrice__text"],children:`${(0,l.h5)(g("price_range_label_from"))} `}),t===r.$0.AUCTION?_[0]:d]}):(0,i.jsx)("span",{className:p?void 0:u()["in-formattedPrice__priceOnRequest"],children:(0,l.kC)(_[0])}):null}var m=n(96999),v=n(30236),h=n(92094),g=n(32424),_=n(16755),f=n(86254),C=n(87989);function y(e){let{supervisor:t,agency:n,isCompactButton:s=!1,onModalOpen:r,onPhoneContactClick:o,iconOnly:l=!1,variant:c="link"}=e;const{trans:d}=(0,a.T_)(),[u,p]=(0,_.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f._,{variant:"default"===c?void 0:c,icon:{name:"phone"},onClick:e=>{e.preventDefault(),r(),p(!0)},small:s,iconOnly:l,children:d("act_call")}),u&&(0,i.jsx)(C.O,{onClose:()=>p(!1),supervisor:t,agency:n,onPhoneContactClick:o})]})}var x=n(83127),b=n(97389),E=n(34022),k=n(14673);const S=(0,_.createContext)(null),j=()=>{const e=(0,_.useContext)(S);if(!e)throw new Error("useListingCardContext must be used within a ListingCard component");return e};var P=n(34277);function T(e){let{realEstate:t,source:n,agency:s,isCompact:r=!1}=e;const{trans:o}=(0,a.T_)(),[l,c]=(0,_.useState)(!1),{trackMessagingModalSubmit:d,trackRealEstatePhoneContact:u,trackSubmitContact:p}=(0,k.g)({section:k.s.LIST,realEstateId:t.id}),m=(0,_.useCallback)((e=>{e.preventDefault(),c(!0),d()}),[d,c]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f._,{icon:{name:"chat"},iconOnly:r,onClick:m,"data-cy":"contact-button",children:o("lbl_message")}),l&&(0,i.jsx)(P.mP,{data:t,agency:s,source:n.label,onClose:()=>c(!1),title:o("act_contact_advertiser",{capitalize:!0}),textareaPrefilledValue:o("contact_form_message_placeholder_new",{capitalize:!0}),textareaPlaceholder:o("contact_form_message_label",{capitalize:!0}),onSubmitContact:e=>{p({advertiser:t.advertiser,contactData:e,visibility:t.visibility||null,price:t.price})},onShowPhoneClick:e=>{u({phoneType:e,source:n.code,advertiser:t.advertiser,visibility:t.visibility||null,price:t.price})}})]})}var L=n(52717),M=n.n(L);var N=n(41894),I=n(48927),A=n(52231),w=n(63854),R=n(58753),D=n(61263),O=n(19624),V=n(39547),G=n(9052),B=n(27944),U=n(88388);const F=e=>{const{trans:t}=(0,a.T_)(),n=(0,O.k)(),s=(0,V.Vd)(),r=(0,A.NL)(),[o,l]=(0,_.useState)(!1),{user:c}=(0,I.Eu)(),d=(0,U.l)(),u=(0,R.Dv)(D.e)||1,p=(0,_.useMemo)((()=>({currentPage:(0,B.BN)(d,u,Boolean(c)),prevPage:(0,B.BN)(d,u-1,Boolean(c))})),[c,u,d]),m=(0,_.useRef)(),v=(0,w.D)({mutationFn:t=>function(e,t){if(!e)return Promise.resolve(null);const n=`/api/utente/${function(e){return"project"===e.type?"progetti":"annunci"}(e)}/nascosti/${e.id}`;return t?G.d.post(n).json():G.d.delete(n).json()}(e,t),onMutate:t=>{r.cancelQueries({queryKey:p.currentPage});const n=r.getQueryData(p.currentPage);if(t){if(m.current=n,1===(null===n||void 0===n?void 0:n.results.length)){const e=r.getQueryData(p.prevPage);r.setQueryData(p.prevPage,(()=>e?{...e,count:n.count-1}:null))}r.setQueryData(p.currentPage,(()=>{if(n)return{...n,results:n.results.filter((t=>t.realEstate.id!==(null===e||void 0===e?void 0:e.id))),count:n.count-1,isOptimistic:!0}}))}else r.setQueryData(p.currentPage,{...m.current,isOptimistic:!0}),m.current=n},onError:()=>{s((0,i.jsx)(V.pS,{variant:"error",children:t("toast_generic_error_message")})),r.setQueryData(p.currentPage,m.current)},onSuccess:(e,n)=>{r.invalidateQueries({queryKey:["markers"],exact:!1}),r.removeQueries({queryKey:["geohash-list"],exact:!1}),l(n),n&&s((0,i.jsx)(V.pS,{variant:"info",action:(0,i.jsx)(V.nz,{onClick:()=>{s(null),v.mutate(!1)},children:t("act_cancel")}),children:t("hidden_ad",{capitalize:!0})}))},onSettled:()=>{r.invalidateQueries({queryKey:p.currentPage}),r.invalidateQueries({queryKey:p.prevPage})}});return{hidden:o,hide:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return c?Promise.resolve(v.mutate(e)):n().then((()=>v.mutate(e)))}}};var z=n(7836),H=n(73413),W=n(44149),$=n.n(W);var Z=n(40408),K=n(43867),Y=n.n(K);var q=n(74207),J=n(61048),Q=n(27960),X=n(24244),ee=n(78472),te=n(61679);var ne=n(89399),ie=n(33830);const ae=e=>{let{realEstateId:t,onCloseSave:n,onLoginSuccess:i}=e;const{trans:s}=(0,a.T_)(),r=function(){const{trans:e}=(0,a.T_)();return{privacy:[(0,te.fQ)(e("act_declare_consent"))],email:[t=>t.email?{valid:!0,message:""}:(0,te.q9)(e("email_field_validation_msg"))(t,"email"),(0,te.Jh)((0,a.kC)(e("insert_valid_email")))]}}(),[o,l]=(0,_.useState)(!1),c=(0,_.useMemo)((()=>({})),[]),d=(0,R.b9)(X.C),{user:u}=(0,I.Eu)(),p=()=>{d({open:!1}),n()};return{form:(0,ee.g)({schema:r,initialData:c,onSubmit:e=>G.d.post("/invia_email_salva_annuncio.php",{form:{email:e.email,idAnnuncio:t}}).json(),onSuccess:(e,t)=>(u||((0,ne.TH)({user:{user_hashedemail:(0,ie.gT)(e.email)}}),(0,ie.O3)({email:e.email})),"SENT"===t.result?l(!0):"NOT_SENT"===t.result&&d({open:!0,onClose:p,onSuccess:()=>{null===i||void 0===i||i(),p()},data:{email:e.email,additionalTrackingData:{"Entry Point":"Modale Salva Annuncio"},alertMessage:s("signin_to_save_ad"),alertMessageType:"warning"},showAdvantageInfo:!1,buttonText:s("save_ad")}),""),onError:()=>s("lbl_generic_error")}),sendMail:o,setSendMail:l}};var se=n(83169),re=n(45833),oe=n(5329),le=n(35815),ce=n(90001),de=n(16936),ue=n(78345),pe=n.n(ue);function me(e){let{features:t}=e;return(0,i.jsx)("div",{className:pe()["in-realEstateSummaryFeatures"],children:t.map(((e,t)=>(0,i.jsxs)("div",{className:(0,s.Z)(pe()["in-realEstateSummaryFeatures__item"],e.isHighlighted&&"is-highlighted",e.forceLastPosition&&"is-last"),children:[(0,i.jsx)(ce.D4,{...(0,de.J)(e.type,e.isHighlighted),customClass:pe()["in-realEstateSummaryFeatures__icon"]}),(0,i.jsx)("span",{children:e.label})]},t)))})}var ve=n(42824),he=n.n(ve);function ge(e){let{features:t,photo:n,price:s}=e;const{trans:r}=(0,a.T_)(),o=(null===s||void 0===s?void 0:s.minValue)?`${(0,l.h5)(r("price_range_label_from"))} ${s.minValue}`:(0,a.kC)(null===s||void 0===s?void 0:s.formattedValue);return(0,i.jsxs)("div",{className:he()["in-realEstateSummary"],children:[(0,i.jsx)("p",{className:he()["in-realEstateSummary__infoText"],children:r("save_ad_info_message")}),(0,i.jsxs)(le.dF,{direction:"col",customClass:he()["in-realEstateSummary__card"],children:[(0,i.jsx)(oe.T,{ratio:"wide",children:(0,i.jsx)(oe.T.Image,{customClass:he()["in-realEstateSummary__figure"],src:n||(0,re.K)()})}),(0,i.jsxs)(le.yy,{children:[(0,i.jsx)("span",{className:he()["in-realEstateSummary__price"],children:o}),(0,i.jsx)(me,{features:t})]})]})]})}var _e=n(86791),fe=n(56797),Ce=n(19060),ye=n.n(Ce);function xe(e){let{form:t}=e;const{trans:n}=(0,a.T_)();var s;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:ye()["in-saveRealEstateDialogFormBox"],children:[(0,i.jsx)(fe.c,{type:"email",name:"email",floatingLabel:!0,label:n("lbl_email"),placeholder:n("act_insert_email"),status:t.getErrorMessage("email")?"error":void 0,statusMessage:t.getErrorMessage("email"),onBlur:t.handleValidateTextInput("email"),onChange:t.handleTextInputChange("email"),defaultValue:null!==(s=t.data.email)&&void 0!==s?s:""}),(0,i.jsx)(_e.K,{error:t.getErrorMessage("privacy"),onChange:t.handleCheckboxChange("privacy"),value:Boolean(t.data.privacy)})]}),(0,i.jsx)(f._,{type:"submit",variant:"accent",disabled:t.submitButtonDisabled,loading:t.submitButtonLoading,onClick:t.handleSubmit,block:!0,children:n("save_ad")})]})}var be=n(89820),Ee=n.n(be);function ke(e){let{id:t,photo:n,price:r,features:o,onClose:l,onLoginSuccess:c}=e;const d=(0,Q.t)("domainName"),{trans:u}=(0,a.T_)(),{form:p,sendMail:m}=ae({realEstateId:t,onCloseSave:l,onLoginSuccess:c});return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(se.eF,{onClose:l,title:u("save_ad"),frameCustomClass:(0,s.Z)(Ee()["in-saveRealEstateDialog"],"cy-save-card-dialog"),contentCustomClass:m?void 0:Ee()["in-saveRealEstateDialog__boxedContent"],size:se.nE.BOTTOMSHEET,content:m?(0,i.jsx)(q.Fq,{text:u("check_email_save_ad")}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ge,{photo:n,price:r,features:o}),(0,i.jsx)(xe,{form:p})]}),footer:m&&(0,i.jsx)(J.G,{email:p.data.email,domainName:d,onClick:l})})})}var Se=n(86504),je=n(74829),Pe=n(62872),Te=n(12646);function Le(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=`/api/utente/${a=e,"project"===a.type?"progetti":"annunci"}/salvati/${e.id}`;var a;return t?G.d.post(i):G.d.delete(i),{fromLogin:n}}const Me=(0,je.cn)(new Set),Ne=e=>{let{key:t,idGeoHash:n,showSnackbar:s=!0,forceSaved:r=!1,autofetch:o=!0,hasOldSave:l=!0,trackingData:c}=e;const{user:d}=(0,I.Eu)(),[u,p]=(0,R.KO)(Me),m=(0,R.b9)(Te.i),{id:v}=t||{},h=(0,N.z)(v),g=!!v&&u.has(v),f=Boolean(d),C=(0,_.useCallback)((e=>{v&&(p((t=>{const n=new Set(t);return e?n.add(v):n.delete(v),n})),n&&m((t=>({...t,[n]:e}))))}),[v,p,n,m]);(0,_.useEffect)((()=>{if(!v||!f||!h)return;const e=h.saved;e?C(e):o&&(0,Pe.uc)([v]).then((e=>{let[t]=e;C(Boolean(t.saved))}))}),[v,h]);const{trans:y}=(0,a.T_)();var x;const{trackRealEstateSave:b}=(0,k.g)({section:(0,ie.g$)(),realEstateId:null!==(x=null===t||void 0===t?void 0:t.id)&&void 0!==x?x:0}),E=(0,V.Vd)(),S=(0,O.k)(),j=(0,w.D)({mutationFn:e=>t?(0,Se.c)("REALESTATE_MODAL_NOT_LOGGED")&&!l?Promise.resolve(Le(t,e)):S().then((n=>{let{fromLogin:i}=n;return Le(t,e,i)})):Promise.resolve({fromLogin:!1}),onMutate:e=>(!r&&d&&C(e),{prev:!e}),onError(e,t,n){const{prev:i}=n||{prev:!1};C(i)},onSuccess(){let{fromLogin:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fromLogin:!1},n=arguments.length>1?arguments[1]:void 0;if((r||e)&&C(n),c&&e&&t){const{type:e}=t;b({saved:!0,"Promoted Type Listing":e})}s&&E((0,i.jsx)(V.pS,{variant:"success",children:y(n?"lbl_bookmarked_ad":"lbl_unsaved_ad",{capitalize:!0})}))}});return{state:g,setState:j.mutate}};var Ie=n(67470),Ae=n.n(Ie);const we=(0,Se.c)("REALESTATE_MODAL_NOT_LOGGED");var Re=n(23581),De=n(94263),Oe=n.n(De);var Ve=n(97141),Ge=n.n(Ve);var Be=n(98745),Ue=n.n(Be);var Fe=n(29406),ze=n.n(Fe);var He=n(58038),We=n(11362),$e=n(19187),Ze=n(12377),Ke=n(27953),Ye=n(51485),qe=n.n(Ye);var Je=n(32858),Qe=n.n(Je);var Xe=n(59491),et=n.n(Xe),tt=n(73103),nt=n(16798),it=n(51162),at=n(85384);var st=n(59518),rt=n.n(st);function ot(e){let{photoData:t,secondaryImagesCustomClass:n,lazyLoad:a,isCompact:r=!1}=e;const o=t.multimedia.photos,l=r?3:4,c=o.length||1;return(0,i.jsxs)("div",{className:(0,s.W)(rt()["in-listingCardPropertyMediaMosaic__container"],r&&"is-compact"),children:[(0,i.jsx)(Wn,{...t,customClass:(0,s.W)(rt()["in-listingCardPropertyMediaMosaic__item"],t.customClass)}),o.slice(1,l).map(((e,t)=>(0,i.jsx)(oe.T,{ratio:"custom",customClass:(0,s.W)(rt()["in-listingCardPropertyMediaMosaic__item"],n),children:(0,i.jsx)(oe.T.Image,{src:e.urls.small||(0,re.K)(),alt:e.urls.small?e.caption:"placeholder",lazyLoad:a,fadeIn:!0})},t))),o.length<l&&Array.from(Array(l-c),((e,t)=>(0,i.jsx)(oe.T,{ratio:"custom",customClass:(0,s.W)(rt()["in-listingCardPropertyMediaMosaic__item"],n),children:(0,i.jsx)(oe.T.Image,{src:(0,re.K)(),alt:"placeholder",lazyLoad:a,fadeIn:!0})},t)))]})}var lt=n(95717),ct=n.n(lt);var dt=n(59138),ut=n.n(dt);var pt=n(35789),mt=n.n(pt);var vt=n(82615),ht=n.n(vt);var gt=n(23861);function _t(e){let{units:t}=e;const{trans:n}=(0,a.T_)(),s=t.filter((e=>!0===e.matchSearch)).length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:s<t.length?n("act_typologies_mach",{params:[s,t.length]}):n("lbl_count_typologies",{params:[t.length]})}),(0,i.jsx)(f._,{variant:"link",small:!0,icon:{name:"external-link"},children:n("act_see_all_fe",{capitalize:!0})})]})}var ft=n(59125),Ct=n.n(ft);function yt(e){let{unit:t}=e;var n,a,r;const o=t.price.loweredPrice;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(oe.T,{ratio:"square",customClass:(0,s.Z)(Ct()["in-listingCardUnit__thumb"],(0,Se.c)("GENERIC_IMAGE")&&"in-figure--genericPlaceholder"),cover:!0,children:(0,i.jsx)(oe.T.Image,{lazyLoad:!0,src:(null===(n=t.photo)||void 0===n?void 0:n.urls.small)||(0,re.K)(),alt:(null===(a=t.photo)||void 0===a?void 0:a.caption)||"placeholder"})}),(0,i.jsxs)("div",{className:Ct()["in-listingCardUnit__content"],children:[(0,i.jsx)("div",{className:Ct()["in-listingCardUnit__title"],children:null===(r=t.typology)||void 0===r?void 0:r.name}),(0,i.jsx)("span",{className:Ct()["in-listingCardUnit__price"],children:t.price.formattedValue}),o&&(0,i.jsx)(Jn,{originalPrice:o.originalPrice,discountPercentage:o.discountPercentage}),(0,i.jsx)(It,{customClass:Ct()["in-listingCardUnit__features"],features:t.featureList})]})]})}var xt=n(91350),bt=n.n(xt);var Et=n(11568),kt=n.n(Et);const St=Object.assign((function(e){let{realEstate:t,idGeoHash:n,hasContactedMessage:a=!1,isCompact:r=!1,children:o}=e;const{locale:l}=(0,m.useRouter)(),{id:c,visibility:d,isMosaic:u}=t,p=(0,v.d)({id:c,lang:l}),h=!u&&(!d||"premium"===d||"base"===d);return(0,i.jsx)(S.Provider,{value:{realEstate:t,realEstateUrl:p,isCompact:r,isMosaic:u,hasLowVisibility:h,idGeoHash:n},children:(0,i.jsx)("div",{className:(0,s.Z)(kt()["in-listingCard"],a&&"is-contacted"),id:c.toString(),children:o})})}),{Property:function(e){let{enableMouseHoverEvents:t=!1,children:n}=e;const{realEstate:a,idGeoHash:o,realEstateUrl:l,isCompact:c}=j(),d=(0,R.Dv)(We.gW),[u]=(0,g.G)({to:"sm"}),p=(0,$e.K)(),m=(0,R.b9)(He.W);return(0,i.jsx)(le.MJ,{customClass:(0,s.Z)(qe()["in-listingCardProperty"],a.disabled&&"is-disabled",c&&qe()["is-small"]),onClick:e=>{if(!e.defaultPrevented&&!a.disabled&&(e.preventDefault(),l)){var t;const e=null===(t=(0,ne.aN)())||void 0===t?void 0:t.findIndex((e=>{var t;return(null===(t=e.realEstateTrackingData)||void 0===t?void 0:t.id)===a.id}));void 0!==e&&localStorage.setItem(Ze._c,JSON.stringify({index:(e+1).toString(),page:p.pag?p.pag.toString():"1"})),(0,Ke.t)(l,u?"_self":"_blank")}},direction:"colToRow",onMouseEnter:()=>{if(!t||"map-besides-the-list"!==d)return;const e=a.properties[0].location;e&&e.latitude&&e.longitude&&e.marker!==r.$$.NO_MAP&&m({idGeoHash:o,location:{lat:e.latitude,lng:e.longitude}})},onMouseLeave:()=>{t&&"map-besides-the-list"===d&&m(void 0)},children:n})},PropertyMedia:function(e){let{lazyLoad:t,preload:n=!1}=e;var o,l;const{realEstate:c,isCompact:d,isMosaic:u}=j(),{trackLightListingViewed:p}=(0,tt.r)(),{trans:m}=(0,a.T_)(),{id:v,isNew:h,status:g,visibility:_,properties:f,disabled:C}=c,y=f[0],x=null===(o=y.multimedia)||void 0===o?void 0:o.photos,b=null===x||void 0===x||null===(l=x[0])||void 0===l?void 0:l.urls.small,E=((e,t,n)=>t&&t.latitude&&t.longitude&&t.marker!==r.$$.NO_MAP?{id:null,caption:e("lbl_map"),urls:{small:(0,at.t)(t.latitude,t.longitude,15,{width:n?150:360,height:n?150:270,markerType:t.marker===r.$$.MARKER?1:2,style:"feature:road|element:labels|visibility:off",fillColor:"0x0074c14d",strokeColor:"0x0074c1ff"})}}:null)(m,y.location,d),k=!u,S=E&&{photos:[{customClass:ct()["in-listingCardPropertyMedia__photo--mapInfo"],...E}]},P={photoMainUrl:b,customClass:(0,s.Z)(ct()["in-listingCardPropertyMedia__photo"],d&&k&&ct()["in-listingCardPropertyMedia__photo--compactSingle"]),realEstateStatus:g,multimedia:y.multimedia,extraMultimedia:S,visibility:_,brandNew:h,overlay:!d&&!0,imageSize:"small",type:nt.pR.Photos,lazyLoad:t,disabled:C,ratio:d&&!k?"square":_&&"premium"!==_&&"base"!==_?"standard":"custom",hasCustomRatio:d&&k,onThirdSlideChangeOnce:()=>{p(v,"List")},onSlideChange:e=>{let{activeImage:t}=e;t.id?(0,it.Qj)(`${it.Gz.ACTIVE_IMAGE}-${t.id}`):(0,it.fZ)(it.Gz.ACTIVE_IMAGE)}},T=n&&b?(0,i.jsx)(et(),{children:(0,i.jsx)("link",{rel:"preload",href:b,as:"image",fetchpriority:"high"})}):void 0;return k?(0,i.jsxs)("div",{className:(0,s.Z)(ct()["in-listingCardPropertyMedia"],C&&"is-disabled",d&&ct()["is-compact"]),children:[T,(0,i.jsx)(Wn,{...P})]}):(0,i.jsxs)("div",{className:(0,s.Z)(ct()["in-listingCardPropertyMedia"],C&&"is-disabled",d&&ct()["is-compact"]),children:[T,(0,i.jsx)(ot,{photoData:P,secondaryImagesCustomClass:(0,s.Z)(ct()["in-listingCardPropertyMedia__photo"],ct()["in-listingCardPropertyMedia__photo--secondary"]),lazyLoad:!0===t,isCompact:d})]})},PropertyContent:function(e){let{children:t}=e;const{realEstate:n}=j();return(0,i.jsx)(le.yy,{customClass:(0,s.Z)(Qe()["in-listingCardPropertyContent"],n.disabled&&"is-disabled"),children:t})},AgencyLogo:function(){var e;const[t]=(0,g.G)({to:"sm"}),{realEstate:n,isCompact:a}=j(),r=n.advertiser.agency;if(!(r&&!a&&!t&&r.showLogo))return;const o=r.agencyUrl,l=r.type,c=null===(e=r.imageUrls)||void 0===e?void 0:e.large,d=r.displayName,u=o&&(0,Se.c)("LINK_AGENCY_LOGO_ON_SEARCH_LIST");return(0,i.jsx)("div",{className:(0,s.W)(Oe()["in-listingCardAgencyLogo"],u&&"is-interactive",!c&&Oe()["in-listingCardAgencyLogo--placeholder"]),children:(0,i.jsx)(oe.T,{customClass:Oe()["in-listingCardAgencyLogo__figure"],ratio:"custom",onClick:e=>{u&&(e.preventDefault(),window.open(`${o}?entryPoint=list-card`,"_blank"))},children:c?(0,i.jsx)(oe.T.Image,{width:135,height:35,src:c,alt:d,customClass:Oe()["in-listingCardAgencyLogo__image"]}):(0,i.jsx)(oe.T.Content,{children:(0,i.jsx)(Re.k,{agencyType:l,compact:!0})})})})},TransactionDate:function(){const{realEstate:{status:e,transactionDate:t}}=j(),{trans:n}=(0,a.T_)(),s=((e,t)=>{let{status:n,transactionDate:i}=t;return n&&i?{label:e("sold"===n?"lbl_sold_on":"lbl_rented_on",{capitalize:!0}),date:i}:void 0})(n,{status:e,transactionDate:t});if(s)return(0,i.jsxs)("p",{className:ht()["in-listingCardTransactionDate"],children:[(0,i.jsx)("span",{className:ht()["in-listingCardTransactionDate__text"],children:`${s.label} `}),s.date]})},Price:function(){const{realEstate:e,isCompact:t}=j(),{price:{minValue:n,formattedValue:a,visible:r,loweredPrice:o},isProjectLike:l,type:c}=e;return(0,i.jsxs)("div",{className:(0,s.Z)(ze()["in-listingCardPrice"],t&&ze()["is-small"],o&&ze()["is-lowered"]),children:[(0,i.jsx)(p,{listingType:c,isProjectLike:l,formattedValue:a,minValue:n,isVisible:r,listPipeCustomClass:ze()["has-ellipsisOnOverflow"]}),o&&(0,i.jsx)(Jn,{isProjectLike:l,customClass:ze()["in-listingCardPrice__loweredPrice"],originalPrice:o.originalPrice,discountPercentage:o.discountPercentage})]})},Title:function(){const{realEstate:e,realEstateUrl:t,isCompact:n,isMosaic:a}=j();return(0,i.jsx)("a",{href:t,title:e.title,className:(0,s.Z)(mt()["in-listingCardTitle"],a&&"is-spaced"),children:n?e.properties[0].typology.name:e.title})},Units:function(e){let{customClass:t}=e;const{realEstate:n,realEstateUrl:a}=j(),r=(0,_.useRef)(null),[o]=(0,g.G)({to:"sm"});(0,We.bU)(r);const l=a,{properties:c,isProjectLike:d,hasMainProperty:u}=n,p=((e,t)=>e.slice(t?1:0).map((e=>({price:e.price,typology:e.typology,matchSearch:e.matchSearch,url:e.url,photo:e.photo,featureList:e.featureList}))))(c,u),m=d&&c.length>1&&!o,v=p.length>5&&l,h=(0,_.useCallback)((()=>{window.open(l,"_blank")}),[l]),f=(0,_.useMemo)((()=>p.sort(((e,t)=>e.matchSearch&&!t.matchSearch?-1:!e.matchSearch&&t.matchSearch?1:0)).slice(0,5).map(((e,t)=>{const n=e=>{e&&window.open(e,"_blank")},a=e.url?{onClick:()=>n(e.url),onKeyDown:()=>n(e.url)}:{};return(0,i.jsx)(gt.C.Slide,{customClass:bt()["in-listingCardUnits__item"],children:(0,i.jsx)("div",{className:bt()["in-listingCardUnits__card"],...a,children:(0,i.jsx)(yt,{unit:e})})},t)}))),[p]);if(m)return v&&f.push((0,i.jsx)(gt.C.Slide,{customClass:bt()["in-listingCardUnits__item"],children:(0,i.jsx)("div",{className:(0,s.W)(bt()["in-listingCardUnits__card"],bt()["in-listingCardUnits__card--showAll"]),onClick:h,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&h()},children:(0,i.jsx)(_t,{units:p})})},6)),(0,i.jsx)(gt.C,{customClass:(0,s.W)(bt()["in-listingCardUnits"],n.disabled&&bt()["is-disabled"],t),innerArrow:!0,ref:r,spaced:!0,children:f})},Description:function(){const[e]=(0,g.G)({to:"sm"}),{isCompact:t,isMosaic:n,realEstate:a}=j();if(n&&!e&&!t){const e=a.properties[0],t=e.description,n=e.featureList.length<=3,r=e.featureList.length<=4;if(!t)return;return(0,i.jsx)("div",{className:(0,s.Z)(Ge()["in-listingCardDescription"],n&&Ge()["is-high"],r&&Ge()["is-highOnXLCard"]),children:t})}},SavedNote:function(e){let{value:t,onClick:n}=e;const[r]=(0,g.G)({to:"sm"}),{realEstate:{disabled:o}}=j(),{trans:l}=(0,a.T_)();return(0,i.jsxs)("div",{className:(0,s.Z)(ut()["in-listingCardSavedNote"],o&&ut()["is-disabled"]),children:[(0,i.jsxs)("div",{className:ut()["in-listingCardSavedNote__text"],children:[(0,i.jsx)(ce.D4,{name:"write",spriteUrl:Z,customClass:ut()["in-listingCardSavedNote__icon"]}),(0,i.jsxs)("p",{className:ut()["in-listingCardSavedNote__paragraph"],children:[(0,i.jsx)("span",{className:ut()["in-listingCardSavedNote__preValue"],children:l("lbl_note",{capitalize:!0})}),(0,i.jsx)("span",{className:ut()["in-listingCardSavedNote__value"],children:t})]})]}),(0,i.jsx)(f._,{iconOnly:r,variant:"link",icon:r?{name:"pencil"}:void 0,onClick:e=>{e.preventDefault(),n()},children:l("act_edit")})]})},FeatureList:function(){const{realEstate:e,isCompact:t,hasLowVisibility:n}=j(),a=e.properties[0];return(0,i.jsx)("div",{className:(0,s.Z)(Ue()["in-listingCardFeatureList"],t&&Ue()["is-compact"],!t&&n&&Ue()["has-lowVisibility"]),children:a.featureList.map(((e,n)=>(0,i.jsxs)("div",{className:(0,s.Z)(Ue()["in-listingCardFeatureList__item"],e.isHighlighted&&"is-highlighted",e.forceLastPosition&&"is-last"),children:[(0,i.jsx)(ce.D4,{...(0,de.J)(e.type,e.isHighlighted),customClass:Ue()["in-listingCardFeatureList__icon"]}),(0,i.jsx)("span",{children:t&&e.compactLabel?e.compactLabel:e.label})]},n)))})},Actions:function(e){let{children:t}=e;var n;const{realEstate:a,isCompact:r}=j(),[o]=(0,g.G)({to:"sm"}),{agency:l,supervisor:c}=a.advertiser,d=(0,E.JS)(),{trackRealEstateModalPhoneContact:u,trackRealEstatePhoneContact:p}=(0,k.g)({section:k.s.LIST,realEstateId:a.id}),{isVisitRequestEnabled:m}=(0,b.q)(null===l||void 0===l||null===(n=l.bookableVisit)||void 0===n?void 0:n.isVisitBookable),v=m&&!a.status,_=(0,h.VA)();return(0,i.jsxs)("div",{className:M()["in-listingCardActions"],children:[(0,i.jsxs)("div",{className:(0,s.Z)(M()["in-listingCardActions__contacts"],r&&M()["is-compact"],!_&&"is-mobileHydrating"),children:[o&&Boolean(a.advertiser.hasCallNumbers)&&(0,i.jsx)(y,{supervisor:c,agency:l,onModalOpen:()=>{u({source:d.code,realEstateId:a.id,advertiser:a.advertiser,visibility:a.visibility||null,price:a.price})},onPhoneContactClick:e=>{p({phoneType:e,source:d.code,advertiser:a.advertiser,visibility:a.visibility||null,price:a.price})},iconOnly:v,variant:"default"}),(0,i.jsx)(T,{realEstate:a,isCompact:r,agency:l,source:d}),v&&(0,i.jsx)(x.s,{listing:a,source:d.label,buttonProps:{iconOnly:r},withLandingDialog:!0})]}),(0,i.jsx)("div",{className:M()["in-listingCardActions__userPref"],children:t})]})},HideButton:function(){const{trans:e}=(0,a.T_)(),[t]=(0,g.G)({from:"sm"}),{realEstate:n}=j(),{id:s,type:r}=n,o=(0,N.z)(s),{hide:l}=F({id:s,type:r}),{trackRealEstateListHide:c}=(0,k.g)({section:k.s.LIST,realEstateId:s}),d=(0,_.useCallback)((e=>{e.preventDefault(),l(),(0,H.L)((()=>{c("lista")}))}),[l,c]),u={iconOnly:!0,icon:{name:(null===o||void 0===o?void 0:o.hidden)?"bin-exclamation-mark":"bin"},onClick:d,"aria-label":(null===o||void 0===o?void 0:o.hidden)?e("lbl_restored_ad"):e("act_hide_ad"),customClass:"cy-hide-button"};return(null===o||void 0===o?void 0:o.hidden)&&t?(0,i.jsx)(z.T,{label:(0,i.jsx)(f._,{...u}),dataText:e("hidden_ad_updated_txt",{capitalize:!0}),type:"dark",customClass:$()["in-listingCardHideButton__tooltip"],multiRow:!0}):(0,i.jsx)(f._,{...u})},SaveButton:function(e){let{customClass:t}=e;var n,r;const{trans:o}=(0,a.T_)(),{realEstate:l,idGeoHash:c}=j(),{id:d,type:u,dataType:p,visibility:m,price:v}=l,h=l.properties[0],g=null===(n=h.multimedia)||void 0===n?void 0:n.photos,C=null===g||void 0===g||null===(r=g[0])||void 0===r?void 0:r.urls.small,y=Ne({key:{id:d,type:u},idGeoHash:c,autofetch:!1,hasOldSave:!we}),[x,b]=(0,_.useState)(!1),{user:E}=(0,I.Eu)(),{trackRealEstateSave:S,trackRealEstateSaveGA4:P,trackRealEstateSaveFull:T}=(0,k.g)({section:k.s.LIST,realEstateId:d}),L=(0,_.useCallback)((e=>{y.setState(!y.state);const t={saved:!y.state,"Promoted Type Listing":p,realEstateVisibility:m,realEstatePrice:v};e?S(t):T({saved:!y.state,modeSelected:"lista"})}),[y,p,m,v,S,T]),M=(0,_.useCallback)((e=>{e.preventDefault(),!E&&we?(b(!0),P({saved:!0,modeSelected:"mappa"})):L()}),[E,P,L]);return(0,i.jsxs)(i.Fragment,{children:[x&&we&&(0,i.jsx)(ke,{id:d,photo:C,price:v,features:h.featureList,onClose:()=>b(!1),onLoginSuccess:()=>L(!0)}),(0,i.jsx)(f._,{customClass:(0,s.Z)(Ae()["in-listingCardSaveButton"],t,y.state&&Ae()["is-fav"]),iconOnly:!0,icon:{name:"heart",nameAlternate:"heart--active",isAlternate:y.state},onClick:M,"aria-label":y.state?o("lbl_bookmarked_ad"):o("act_bookmark_ad"),"data-cy":"save-button"})]})},NoteButton:function(e){let{onClick:t,disabled:n=!1}=e;const{trans:r}=(0,a.T_)();return(0,i.jsx)(f._,{customClass:(0,s.Z)(Y()["in-listingCardNoteButton__button"],n&&Y()["is-disabled"]),iconOnly:!0,icon:{name:"write",spriteUrl:Z},onClick:e=>{e.preventDefault(),t()},"aria-label":r("act_add_notes"),children:r("lbl_note")})}});var jt=n(16388),Pt=n(56592),Tt=n.n(Pt);function Lt(e){let{isCompact:t}=e;const[n]=(0,g.G)({to:"sm"});return(0,i.jsxs)(le.dF,{direction:"colToRow",customClass:(0,s.Z)(Tt()["in-listingCardSkeleton"],t&&Tt()["is-compact"]),children:[(0,i.jsx)(jt.i,{type:"image",customClass:Tt()["in-listingCardSkeleton__image"]}),(0,i.jsxs)(le.yy,{customClass:Tt()["in-listingCardSkeleton__content"],children:[(0,i.jsxs)(le.xF,{children:[(0,i.jsx)(jt.i,{type:"text",customClass:Tt()["in-listingCardSkeleton__price"]}),(0,i.jsx)(jt.i,{type:"text",customClass:Tt()["in-listingCardSkeleton__title"]}),(0,i.jsx)(jt.i,{type:"row",customClass:Tt()["in-listingCardSkeleton__features"],items:3})]}),(0,i.jsx)(le.r4,{children:(0,i.jsx)(jt.i,{type:"row",items:t||n?3:4,customClass:(0,s.Z)(Tt()["in-listingCardSkeleton__actions"],!t&&Tt()["in-listingCardSkeleton__actions--full"])})})]})]})}var Mt=n(93720),Nt=n.n(Mt);function It(e){let{features:t,customClass:n,size:a="small"}=e;return(0,i.jsx)("div",{className:(0,s.Z)(Nt()["in-listingFeatures"],Nt()[`is-${a}`],n),children:t.map(((e,t)=>(0,i.jsxs)("div",{className:Nt()["in-listingFeatures__item"],"data-type":e.type,children:[(0,i.jsx)(ce.D4,{...(0,de.J)(e.type),small:"big"!==a,customClass:Nt()["in-listingFeatures__icon"]}),(0,i.jsx)("span",{children:e.compactLabel||e.label})]},t)))})}var At=n(57411),wt=n(60862),Rt=n(49298),Dt=n(62198),Ot=n(47637),Vt=n(25491),Gt=n(40108),Bt=n(13391),Ut=n(95137);const Ft=e=>({"ID Listing":e,"Map or List Visualization":"Map"}),zt=e=>{var t,n;const i=(0,Bt.S)(),{user:s}=(0,I.Eu)(),r=(0,Gt.n)(),o=(0,Rt.v)(),{trans:l}=(0,a.T_)(),c=(0,_.useCallback)(((t,n)=>{const i=(0,ie.y1)(t,n);o(Ze.Ys.PURCHASE,{ecommerce:{currency:"EUR",transaction_id:i,item_id:e.id,value:t,items:(0,Vt.U)([e])}})}),[e,o]),d=(0,_.useCallback)(((t,n,i)=>{var a;const c=(0,ie.y1)(t,null===i||void 0===i?void 0:i.contactId);let d={};s?((null===i||void 0===i?void 0:i.email)&&i.email!==(null===s||void 0===s?void 0:s.email)&&(d.user_hashedemail=(0,ie.gT)(i.email)),(null===i||void 0===i?void 0:i.phone)&&i.phone!==(null===s||void 0===s?void 0:s.phone)&&(d.user_hashedphone=(0,ie.Al)(i.phone))):d=(0,ie.UD)({email:null===i||void 0===i?void 0:i.email,phone:null===i||void 0===i?void 0:i.phone}),o(Ze.Ys.CONTACT,{...(0,Dt.x)({realEstate:e,trans:l}),contact_id:c,advertiser:(null===(a=e.advertiser)||void 0===a?void 0:a.agency)?ie.EL.AGENCY:ie.EL.PRIVATE,value:t,contact_category:Ze._H.REAL_ESTATE,contact_type:(0,ie.Th)(t),contact_subtype:n,mode_selected:"mappa",is_map_collapsed:r?"si":"no",...d,...(0,Ut.yL)()})}),[r,e,o,l,s]),u=(0,_.useCallback)((t=>{let{phoneType:n,source:a}=t;var s,r,o,l;const{advertiser:u,id:p}=e;var m;u&&u.agency&&G.d.get("/stats/statsAgenzia.php",{searchParams:{idAgenzia:u.agency.id,typeTrack:"mostraTelefono",annuncio:p,type:"annuncio",fieldTrack:n,source:a,output:"json",[Number(new Date).toString()]:""}}).json().then((e=>{c(Ze.Kq.PHONE,e.id),d(Ze.Kq.PHONE,"vTel1"===n?Ze.rC.SMART:Ze.rC.NO_SMART,{contactId:e.id})})).catch();const v={revenue:Ze.U4.PHONE,advertiserID:null===(r=e.advertiser)||void 0===r||null===(s=r.agency)||void 0===s?void 0:s.id.toString(),receiverType:(null===(l=e.advertiser)||void 0===l||null===(o=l.agency)||void 0===o?void 0:o.id)?"Agency":"Private",listingID:p,contactType:Ze.gw.PHONE,price:e.price,promotedTypeListing:null!==(m=e.visibility)&&void 0!==m?m:void 0};i(Ze.B_.PHONE_CONTACT_REQUEST,Ft(p),v)}),[d,c,e,i]),p=(0,_.useCallback)((e=>{const t=(0,wt.Vm)();i(Ze.B_.MESSAGING_MODAL_SUBMIT,{...Ft(e.realEstateId),"Entry Point":"Lista"===t["Entry Point"]?"Mappa":t["Entry Point"]})}),[i]),m=(0,_.useCallback)((()=>{o(Ze.Ys.ADD_TO_WISHLIST,{ecommerce:{value:1,currency:"EUR",items:(0,Ot.u)(e)}})}),[e,o]),v=(0,_.useCallback)((t=>{if(e.id){const n=(0,ie.j7)(),a=t?Ze.B_.LISTING_SAVED:Ze.B_.LISTING_REMOVED;i(a,{"ID Listing":e.id.toString(),"Map or List Visualization":"Map","Entry Point":"Lista"===n?"Mappa":n})}}),[e.id,i]),h=(0,_.useCallback)((t=>{let{saved:n,modeSelected:i,isMapCollapsed:a}=t;var s;o(n?Ze.Ys.LISTING_SAVED:Ze.Ys.LISTING_SAVED_REMOVED,{...(0,Dt.x)({trans:l,realEstate:e}),advertiser:(null===(s=e.advertiser)||void 0===s?void 0:s.agency)?ie.EL.AGENCY:ie.EL.PRIVATE,view_type:"Map",...i&&{mode_selected:i},...void 0!==a&&{is_map_collapsed:a?"si":"no"},...(0,Ut.yL)()}),n&&m()}),[e,o,m,l]),g=(0,_.useCallback)((e=>{h(e),v(e.saved)}),[v,h]),f=(0,_.useCallback)((t=>{let{modeSelected:n,isMapCollapsed:i}=t;var a;o(Ze.Ys.LISTING_HIDDEN,{...(0,Dt.x)({realEstate:e,trans:l}),advertiser:(null===(a=e.advertiser)||void 0===a?void 0:a.agency)?ie.EL.AGENCY:ie.EL.PRIVATE,...n&&{mode_selected:n},...void 0!==i&&{is_map_collapsed:i?"si":"no"},section_name:Ze.jz.SEARCH_LIST})}),[e,o,l]),C=(0,_.useCallback)((t=>{var n,a,s,r,o;(t.contactId&&(c(Ze.Kq.EMAIL,t.contactId),d(Ze.Kq.EMAIL,void 0,t)),e.id)&&i(Ze.B_.MESSAGE_CONTACT_REQUEST,{"Is Default Message":!t.message,"ID Listing":e.id,"Page Number":1,"Entry Point":"Mappa","Index Number":1,"Map or List Visualization":"Map","Sender Name":t.name,"Sender Email":t.email,"Sender Phone Number":t.phone,"Message Content":t.message},{contactType:Ze.gw.MESSAGE,advertiserID:null===(a=e.advertiser)||void 0===a||null===(n=a.agency)||void 0===n?void 0:n.id.toString(),listingID:e.id,receiverType:(null===(r=e.advertiser)||void 0===r||null===(s=r.agency)||void 0===s?void 0:s.id)?"Agency":"Private",revenue:Ze.U4.MESSAGE,price:e.price,promotedTypeListing:null!==(o=e.visibility)&&void 0!==o?o:void 0})}),[d,c,null===(n=e.advertiser)||void 0===n||null===(t=n.agency)||void 0===t?void 0:t.id,e.id,e.price,e.visibility,i]);return{trackMapCardPhoneContact:u,trackMapCardMessageModalSubmit:p,trackModalMapCardPhoneContact:t=>{if(e.advertiser){var n;const i=e.advertiser;i.supervisor||1!==(null===(n=i.agency)||void 0===n?void 0:n.phones.length)?i.supervisor&&"user"!==i.supervisor.type&&1===i.supervisor.phones.length&&u({phoneType:i.supervisor.phones[0].type,source:t}):u({phoneType:i.agency.phones[0].type,source:t})}},trackMapCardSave:v,trackMapCardSaveGA4:h,trackMapCardSaveFull:g,trackSearchListMapCardHide:f,trackMapCardSubmitContact:C}};function Ht(e){let{realEstate:t,source:n,agency:s}=e;const{trans:r}=(0,a.T_)(),[o,l]=(0,_.useState)(!1),{trackMapCardPhoneContact:c,trackMapCardMessageModalSubmit:d,trackMapCardSubmitContact:u}=zt(t);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f._,{variant:"link",icon:{name:"chat"},onClick:e=>(e=>{e.preventDefault(),d({realEstateId:t.id}),l(!0)})(e),small:!0,children:r("lbl_message")}),o&&(0,i.jsx)(P.mP,{data:t,agency:s,source:n.label,onClose:()=>l(!1),title:r("act_contact_advertiser",{capitalize:!0}),textareaPrefilledValue:r("contact_form_message_placeholder_new",{capitalize:!0}),textareaPlaceholder:r("contact_form_message_label",{capitalize:!0}),onSubmitContact:e=>{u(e)},onShowPhoneClick:e=>{c({phoneType:e,source:n.code})}})]})}function Wt(e){let{forceSaved:t,realEstate:n,customClass:s}=e;const{trans:r}=(0,a.T_)(),{id:o,type:l,restored:c}=n,d=(0,Gt.n)(),{trackSearchListMapCardHide:u}=zt(n),{hide:p,hidden:m}=F(t?void 0:{id:o,type:l}),v=(0,_.useCallback)((e=>{t||(e.preventDefault(),p(),u({modeSelected:"mappa",isMapCollapsed:d}))}),[t,p,u,d]);return(0,i.jsx)(f._,{customClass:s,iconOnly:!0,small:!0,icon:{name:c?"bin-exclamation-mark":"bin"},onClick:v,"aria-label":r(!c&&m?"act_restore_hidden_ad":c?"lbl_restored_ad":"act_hide_ad")})}var $t=n(71709),Zt=n.n($t);function Kt(e){let{saveType:t,forceSaved:n,customClass:r,saveModalProps:o,realEstate:l}=e;const{trans:c}=(0,a.T_)(),{id:d,idGeoHash:u,type:p}=l,m=(0,Gt.n)(),v=Ne({key:{id:d,type:p},idGeoHash:u,forceSaved:n,hasOldSave:"default"===t}),[h,g]=(0,_.useState)(!1),{user:C}=(0,I.Eu)(),{trackMapCardSave:y,trackMapCardSaveGA4:x,trackMapCardSaveFull:b}=zt(l),E=(0,_.useCallback)((e=>{v.setState(!v.state),e?y(!v.state):b({saved:!v.state,modeSelected:"mappa",isMapCollapsed:m})}),[v,y,b,m]),k=(0,_.useCallback)((e=>{e.preventDefault(),C||"without-login"!==t?E():(g(!0),x({saved:!0,modeSelected:"mappa",isMapCollapsed:m}))}),[C,t,x,m,E]);return(0,i.jsxs)(i.Fragment,{children:[h&&"without-login"===t&&(0,i.jsx)(ke,{id:d,photo:o.photo,price:o.price,features:o.features,onClose:()=>g(!1),onLoginSuccess:()=>E(!0)}),(0,i.jsx)(f._,{customClass:(0,s.Z)(Zt()["in-saveButton"],r,v.state&&Zt()["is-fav"]),iconOnly:!0,small:!0,icon:{name:"heart",nameAlternate:"heart--active",isAlternate:v.state},onClick:k,"aria-label":v.state?c("lbl_bookmarked_ad"):c("act_bookmark_ad")})]})}var Yt=n(20427),qt=n.n(Yt);function Jt(e){let{realEstate:t,forceSaved:n,notHideable:a,saveWithoutLogin:s=!1}=e;var r,o,l;const{agency:c,supervisor:d}=t.advertiser||{},u=null===(o=t.properties[0].photos)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.urls.small,p=t.properties[0],[m]=(0,g.G)({to:"sm"}),v=(0,E.JS)(),{trackModalMapCardPhoneContact:h,trackMapCardPhoneContact:_}=zt(t);return(0,i.jsxs)("div",{className:qt()["in-listingMapCardActions"],children:[(0,i.jsxs)("div",{className:qt()["in-listingMapCardActions__contact"],children:[(0,i.jsx)(Ht,{realEstate:t,agency:c,source:{label:v.label,code:v.code}}),m&&Boolean(null===(l=t.advertiser)||void 0===l?void 0:l.hasCallNumbers)&&(0,i.jsx)(y,{supervisor:d,agency:c,isCompactButton:!0,onModalOpen:()=>{h(v.code)},onPhoneContactClick:e=>{_({phoneType:e,source:v.code})}})]}),!a&&(0,i.jsx)(Wt,{forceSaved:n,realEstate:t,customClass:qt()["in-listingMapCardActions__button"]}),s?(0,i.jsx)(Kt,{forceSaved:n,realEstate:t,customClass:qt()["in-listingMapCardActions__button"],saveType:"without-login",saveModalProps:{photo:u,price:t.price,features:p.featureList}}):(0,i.jsx)(Kt,{realEstate:t,forceSaved:n,customClass:qt()["in-listingMapCardActions__button"],saveType:"default"})]})}var Qt=n(512),Xt=n.n(Qt);function en(e){let{price:t,listingType:n,isProjectLike:a}=e;const{formattedValue:r,visible:o,minValue:l,loweredPrice:c}=t;return(0,i.jsxs)("div",{className:(0,s.Z)(Xt()["in-listingMapCardPrice"],c&&Xt()["is-lowered"]),children:[(0,i.jsx)(p,{listingType:n,isProjectLike:a,formattedValue:r,minValue:l,isVisible:o}),c&&(0,i.jsx)(Jn,{isProjectLike:a,discountPercentage:c.discountPercentage,originalPrice:c.originalPrice})]})}var tn=n(56311),nn=n.n(tn);function an(e){let{realEstateLiteData:t,forceSaved:n=!1,notHideable:a=!1,saveWithoutLogin:r=!1,onClick:o,index:l}=e;var c;const{id:d,visibility:u,properties:p,price:m,type:v,isProjectLike:h,contactedMessage:g}=t,{trackLightListingViewed:_}=(0,tt.r)(),f=p[0].photos;return(0,i.jsxs)(le.MJ,{card:!0,direction:"col",customClass:(0,s.Z)(nn()["in-listingMapCard"],g&&nn()["is-contacted"]),"data-cy":"map-card",onClick:e=>((e,t)=>{e.defaultPrevented||(e.preventDefault(),o(t))})(e,t),children:[g&&(0,i.jsx)(At.D,{message:g}),(0,i.jsx)(Wn,{customClass:nn()["in-listingMapCard__photos"],imageSize:"small",multimedia:{photos:f},photoMainUrl:null===(c=f[0])||void 0===c?void 0:c.urls.small,visibility:u,hasCustomRatio:!0,lazyLoad:!0,overlay:!0,type:nt.pR.Photos,onThirdSlideChangeOnce:()=>{_(d,"Map",l)},onSlideChange:e=>{let{activeImage:t}=e;(0,it.Qj)(`${it.Gz.ACTIVE_IMAGE}-${t.id}`)}},`${v}_${d}`),(0,i.jsxs)(le.yy,{children:[(0,i.jsx)(en,{price:m,listingType:v,isProjectLike:h}),(0,i.jsx)(It,{features:p[0].featureList}),(0,i.jsx)(Jt,{realEstate:t,forceSaved:n,notHideable:a,saveWithoutLogin:r})]})]})}var sn=n(85827),rn=n.n(sn);function on(){return(0,i.jsxs)(le.dF,{card:!0,direction:"col",customClass:rn()["in-listingMapCardSkeleton"],children:[(0,i.jsx)(jt.i,{type:"image",theme:"light",customClass:rn()["in-listingMapCardSkeleton__photos"]}),(0,i.jsxs)("div",{className:rn()["in-listingMapCardSkeleton__content"],children:[(0,i.jsx)(jt.i,{type:"text",theme:"light",customClass:rn()["in-listingMapCardSkeleton__price"]}),(0,i.jsx)(jt.i,{type:"row",theme:"light",customClass:rn()["in-listingMapCardSkeleton__features"]}),(0,i.jsx)("div",{className:rn()["in-listingMapCardSkeleton__actions"],children:(0,i.jsx)(jt.i,{type:"row",theme:"light",items:4})})]})]})}function ln(e){let{data:t,forceSaved:n=!1,notHideable:a=!1,saveWithoutLogin:s=!1,onClick:r,index:o}=e;return t?(0,i.jsx)(an,{realEstateLiteData:t,forceSaved:n,notHideable:a,saveWithoutLogin:s,onClick:r,index:o}):(0,i.jsx)(on,{})}var cn=n(73240),dn=n(38182),un=n(43205);var pn=n(25330);const mn=e=>{const t=(0,_.useRef)(e);t.current=e,(0,_.useEffect)((()=>()=>t.current()),[])};var vn=n(28969);const hn=()=>{const e=(0,R.b9)(vn.l);return{setMarkerVisited:(0,_.useCallback)((t=>{let{idGH:n,isCluster:i}=t;e((e=>{const{markers:t}=e;return!t.find((e=>e.idGH===n))?{lastUpdate:Date.now(),version:1,markers:[{idGH:n,isCluster:i},...t].slice(0,2e3)}:e}))}),[e])}};var gn=n(93940),_n=n(91978);const fn=()=>{const e=(()=>{const{trans:e}=(0,a.T_)();return(0,_.useCallback)(((t,n)=>{const i=(0,Q.t)("countryCode");if(n)return(null===t||void 0===t?void 0:t.name)||"";switch(i){case"IT":return e("lbl_italy");case"ES":return e("lbl_spain");case"GR":return"Grecia";case"LU":return(null===t||void 0===t?void 0:t.name)||"";default:return""}}),[e])})();return(0,_.useCallback)((t=>{let{realEstate:n,mainProperty:i}=t;var a,s,o,l,c;if(!n||!i)return;const{advertiser:d,id:u,price:p,luxury:m}=n,{location:v,rooms:h,bathrooms:g,floor:_,bedRoomsNumber:f,elevator:C,energy:y,typologyGA4Translation:x,ga4features:b,ga4Condition:E}=i,k=(0,ie.y8)(null===d||void 0===d||null===(a=d.agency)||void 0===a?void 0:a.type);return{property_contract:(0,ie.kJ)(n.contract),property_type:x,property_visibility:(0,ie.hR)(n.visibility),advertiser:(null===d||void 0===d?void 0:d.agency)?ie.EL.AGENCY:ie.EL.PRIVATE,property_price:p.value,property_id:u,property_country:(null===v||void 0===v?void 0:v.nation)?e(v.nation,!0):void 0,property_region:null===v||void 0===v?void 0:v.region,property_province:null===v||void 0===v?void 0:v.province,property_city:null===v||void 0===v?void 0:v.city,property_macrozone:null===v||void 0===v?void 0:v.macrozone,property_microzone:null===v||void 0===v?void 0:v.microzone,agency_id:k?"210238":null===d||void 0===d||null===(s=d.agency)||void 0===s?void 0:s.id,agency_name:k?"Enti e tribunali":null===d||void 0===d||null===(o=d.agency)||void 0===o?void 0:o.displayName,property_is_luxury:(0,ie.Tk)(m),property_rooms:h?h.replace(/\s/g,""):void 0,property_baths:g,property_floor:null===_||void 0===_?void 0:_.ga4FloorValue,property_bedrooms:f,property_has_elevator:C?(0,ie.Tk)(C):void 0,property_state:E,property_heating:(e=>{if(e)return e.GA4Heating?e.GA4Heating:"Assente"})(y),property_otherfeatures:b&&b.length>0?b.join("|"):void 0,property_is_project:(0,ie.Tk)(n.isProjectLike),property_is_auction:(0,ie.Tk)(n.type===r.$0.AUCTION),property_price_range:p.priceRange,property_garage:i.ga4Garage,courthouse_id:k?null===d||void 0===d||null===(l=d.agency)||void 0===l?void 0:l.id:void 0,courthouse_name:k?null===d||void 0===d||null===(c=d.agency)||void 0===c?void 0:c.displayName:void 0}}),[e])},Cn=()=>{const e=(0,Bt.S)(),t=fn(),n=(0,Rt.v)();return{trackMapPinSelected:(0,_.useCallback)((t=>{const{listingId:n,section:i,currentPage:a,zoom:s}=t;e(Ze.B_.MAP_PIN_SELECTED,{"ID Listing":n,"Map or List Visualization":i,"Page Number":a,"Zoom Level":s})}),[e]),trackListingPreview:(0,_.useCallback)((e=>{let{realEstate:i}=e;n(Ze.Ys.LISTING_PREVIEW,{...t({realEstate:i,mainProperty:i.properties[0]}),...(0,Ut.yL)()})}),[t,n]),trackViewItem:(0,_.useCallback)((e=>{let{realEstate:t}=e;const i=(0,Vt.U)([t]);n(Ze.Ys.VIEW_ITEM,{ecommerce:{value:1,currency:"EUR",items:i}})}),[n]),trackMapCarouselViewed:(0,_.useCallback)((t=>{const{listingId:n,section:i,currentPage:a,searchParams:s,geographyData:r}=t;e(Ze.B_.CAROUSEL_LIST_CHANGED,{"ID Listing":n,"Map or List Visualization":i,"Number Of Pages":a,...(0,ie.VL)(s),...r&&{...(0,ie.jV)({searchParams:s,geographyData:r})}})}),[e]),trackListingPreviewCarousel:(0,_.useCallback)((e=>{let{realEstate:i}=e;n(Ze.Ys.LISTING_PREVIEW_CAROUSEL,{...t({realEstate:i,mainProperty:i.properties[0]}),...(0,Ut.yL)()})}),[t,n])}},yn=()=>{const e=(0,R.Dv)(D.e)||1,t=(0,U.l)(),n=(0,gn.Az)(_n.NB),{trackMapCarouselViewed:i,trackViewItem:a,trackListingPreviewCarousel:s}=Cn();return r=>{r&&(i({currentPage:e,searchParams:t,geographyData:n,listingId:r.id,section:"Map"}),s({realEstate:r}),a({realEstate:r}))}};var xn=n(19584);const bn=e=>{let{realEstateLiteItem:t,delay:n=0}=e;const i=(0,R.Dv)(D.e),{trackMapPinSelected:a,trackListingPreview:s,trackViewItem:r}=Cn(),o=(0,R.Dv)(xn.Dy);(0,_.useEffect)((()=>{if(void 0===(null===t||void 0===t?void 0:t.contactedMessage))return;const e=setTimeout((()=>{a({currentPage:i||1,listingId:t.id,section:"Map",zoom:o}),s({realEstate:t}),r({realEstate:t})}),n);return()=>{clearTimeout(e)}}),[o,t,n,i,a,s,r])};function En(e){let{items:t,labelBounds:n,containerBounds:a,count:s,onClick:r,onMouseEnter:o,onMouseLeave:l,forceSaved:c=!1,notHideable:d=!1,saveWithoutLogin:u=!1,marker:p,fetchNextPage:m}=e;const v=(0,_.useRef)(null),{setMarkerVisited:h}=hn(),g=(0,_.useRef)(!1),f=(0,se.vM)();(0,un.H)(v,o,(()=>{f||l()}));const C=(0,pn.X)(v,{containerBounds:a,labelBounds:n}),y=s>1,[x,b]=(0,_.useState)(1),E=yn(),k=e=>{if(!t)return;m&&"next"===e&&x===t.length-5&&m();const n="prev"===e?x-1:x+1;b(n),E(t[n-1])};bn({realEstateLiteItem:null===t||void 0===t?void 0:t[0],delay:500}),function(e,t){const n=(0,_.useRef)(e);(0,_.useEffect)((()=>{n.current=e}),[e]),(0,_.useEffect)((()=>{if(!t&&0!==t)return;const e=setTimeout((()=>n.current()),t);return()=>clearTimeout(e)}),[t])}((()=>{g.current=!0}),500),mn((()=>{p&&g.current&&h({idGH:p.idGH,isCluster:"cluster"===p.markerType})}));const S=(0,_.useRef)(y);return(0,i.jsx)(dn.b,{direction:C.direction,position:C.position,tooltipRef:v,children:(0,i.jsxs)(i.Fragment,{children:[(y||S.current)&&(0,i.jsx)(cn.N,{onPrevClick:()=>k("prev"),onNextClick:()=>k("next"),currentPage:x,totalPages:s,iconName:"home"}),(0,i.jsx)(ln,{data:null===t||void 0===t?void 0:t[x-1],forceSaved:c,onClick:r,notHideable:d,saveWithoutLogin:u,index:x-1})]})})}var kn=n(97111),Sn=n(52083),jn=n(6213),Pn=n(28451),Tn=n.n(Pn);function Ln(e){let{customClass:t,items:n,expectedResultsCount:a=0,forceSaved:r=!1,onClick:o,notHideable:l=!1,saveWithoutLogin:c=!1,fetchNextPage:d}=e;const u=yn();return(0,i.jsx)(gt.C,{customClass:(0,s.W)(Tn()["in-listingMapMobileCardsCarousel"],t),onSlideChange:e=>{n&&(d&&a>n.length&&e===n.length-5&&d(),u(n[e]))},spaced:!0,children:[...Array(a).keys()].map((e=>(0,i.jsx)(gt.C.Slide,{customClass:Tn()["in-listingMapMobileCardsCarousel__item"],children:(0,i.jsx)(Sn.E,{children:(0,i.jsx)(ln,{data:n&&n[e],forceSaved:r,notHideable:l,onClick:o,saveWithoutLogin:c,index:e})})},e)))})}var Mn=n(65818),Nn=n.n(Mn);function In(e){let{count:t,items:n,onClose:a,forceSaved:r=!1,notHideable:o=!1,onClick:l,saveWithoutLogin:c=!1,marker:d,fetchNextPage:u}=e;const p=(0,_.useRef)(null),m=(0,jn.A)(a),{setMarkerVisited:v}=hn();bn({realEstateLiteItem:null===n||void 0===n?void 0:n[0]}),mn((()=>{d&&v({idGH:d.idGH,isCluster:"cluster"===d.markerType})}));const h=n&&n[0];return(0,i.jsx)(kn.M_,{exitBeforeEnter:!0,children:(0,i.jsx)("div",{ref:p,...m,className:Nn()["in-listingMapMobileCards"],children:1===t?(0,i.jsx)("div",{className:(0,s.W)(Nn()["in-listingMapMobileCards__container"],Nn()["has-onlyChild"]),children:(0,i.jsx)(Sn.E,{children:(0,i.jsx)(ln,{data:h,forceSaved:r,notHideable:o,onClick:e=>{l(e)},saveWithoutLogin:c})})}):(0,i.jsx)(Ln,{items:n,customClass:Nn()["in-listingMapMobileCards__container"],expectedResultsCount:t,forceSaved:r,notHideable:o,onClick:e=>{l(e)},fetchNextPage:u})})})}function An(e){let{id:t,showMobileCards:n,showDesktopCards:a,data:s,highlightedMarker:r,forceSaved:o=!1,notHideable:l=!1,labelBounds:c,containerBounds:d,count:u=0,onClick:p,onCardsClose:m,onDesktopCardsHover:v,fetchNextPage:h,saveWithoutLogin:g}=e;const f={marker:r,items:s,forceSaved:o,notHideable:l,onClick:p,saveWithoutLogin:g,fetchNextPage:h};return(0,i.jsxs)(i.Fragment,{children:[n&&(0,_.createElement)(In,{...f,key:t,count:u,onClose:m}),a&&(0,_.createElement)(En,{...f,key:t,containerBounds:d,labelBounds:c,count:u,onMouseEnter:v,onMouseLeave:m})]})}var wn=n(3453),Rn=n(84042),Dn=n(55548),On=n(69467),Vn=n(99816),Gn=n.n(Vn);function Bn(e){let{tier:t,customClass:n,...r}=e;const{trans:o}=(0,a.T_)(),l=(0,Q.t)("visibilities");return t?(0,i.jsx)(Rn.e,{customClass:(0,s.W)(Gn()["in-listingPhotosVisibilityBadge"],Gn()[`in-listingPhotosVisibilityBadge--${l[t].style}`],n),variant:"reversed",...r,children:o(l[t].label)}):null}var Un=n(86237),Fn=n.n(Un),zn=n(87053),Hn=n(65178);function Wn(e){let{width:t,height:n,customClass:r,imageCustomClass:o,hasCustomRatio:l,ratio:c,photoMainUrl:d,imageSize:u="medium",visibility:p,overlay:m,brandNew:v,extraMultimedia:h,multimedia:C,lazyLoad:y=!1,type:x,hideArrows:b,onClick:E,onSlideChange:k,onThirdSlideChangeOnce:S,realEstateStatus:j,disabled:P,isListingDetail:T,expandButtonFullScreen:L}=e;var M,N,I;const A=C[x],w=null===h||void 0===h?void 0:h[x],[R]=(0,g.G)({to:"sm"}),D=(0,_.useMemo)((()=>{const e=[...A||[]];return!(null===A||void 0===A?void 0:A.length)&&(null===w||void 0===w?void 0:w.length)&&e.push({id:null,caption:"",urls:{small:(0,Se.c)("GENERIC_IMAGE")?zn:Hn}}),e.push(...w||[]),e}),[A,w]),{trans:O}=(0,a.T_)(),V=(0,_.useRef)(null),[G,B]=(0,_.useState)(1),[U,F]=(0,_.useState)(!1===y),z=(0,_.useRef)(!1),H=x===nt.pR.FloorPlans,W=x===nt.pR.VirtualTours;(0,wn.S)({ref:V,onChange:F,root:"document",enabled:!U&&D.length>1,margin:()=>200});let $=null;const[Z,K]=(0,_.useState)(),Y=(0,_.useRef)(),q=e=>{Y.current&&clearTimeout(Y.current),Y.current=setTimeout((()=>{K(e);const t=e===D.length-1;k&&k({activeImage:D[e],activeSlide:e}),2===e&&S&&!z.current&&(S(),z.current=!0),t&&(null===w||void 0===w?void 0:w.length)?B(e):B(e+1)}),250)};if(U&&D.length>1){const e=e=>{e.stopPropagation()};$=(0,i.jsx)(Dn.LS,{lazyLoad:!0,onPrevClick:e,onNextClick:e,onSlideChange:q,noArrows:b,children:D.map(((e,a)=>{var s;return(0,On.H)(e.interactive,x)?(0,i.jsx)(Dn.LS.Iframe,{title:e.caption?e.caption:"",src:e.url,customClass:Fn()["in-listingPhotos__iframe"],slideProps:{"data-text":O("act_open")}},a):(0,i.jsx)(Dn.LS.Image,{src:null===(s=e.urls)||void 0===s?void 0:s[u],alt:e.caption,width:t||360,height:n||270,customClass:e.customClass||null},a)}))})}const J=1===D.length&&(0,On.H)(D[0].interactive,x);var Q;J&&($=(0,i.jsx)("iframe",{width:t||314,height:n||236,loading:"lazy",src:D[0].url,title:null!==(Q=D[0].caption)&&void 0!==Q?Q:"",allow:"encrypted-media; xr-spatial-tracking;",allowFullScreen:!0,className:"nd-ratio__img"}));return(0,i.jsxs)(oe.T,{customClass:(0,s.W)(Fn()["in-listingPhotos"],H&&Fn()["in-listingPhotos--planimetry"],W&&Fn()["in-listingPhotos--virtualTour"],J&&Fn()["in-listingPhotos__iframe"],r),ratio:l?"custom":null!==c&&void 0!==c?c:"standard",onClick:()=>{null===E||void 0===E||E(Z)},"data-text":J?O("act_open"):null,ref:V,children:[$?(0,i.jsx)(oe.T.Content,{children:$}):(0,i.jsx)(oe.T.Image,{lazyLoad:!0===y,customClass:(0,s.W)(o),src:d||(0,re.K)(),fadeIn:!0,width:t||314,height:n||236,alt:d?null===(M=A[0])||void 0===M?void 0:M.caption:"placeholder"}),(0,i.jsxs)(oe.T.Overlay,{customClass:Fn()["in-listingPhotos__overlay"],children:[L&&(0,i.jsx)(f._,{customClass:Fn()["in-listingPhotos__expand"],icon:{name:"expand"},iconOnly:R,children:O("act_map_grow",{capitalize:!0})}),m&&((null===(N=C.photos)||void 0===N?void 0:N.length)||(null===(I=C.virtualTours)||void 0===I?void 0:I.length))?(0,i.jsxs)("div",{className:Fn()["in-listingPhotos__media"],children:[C.virtualTours&&C.virtualTours.length>0&&!T&&(0,i.jsx)(Rn.e,{variant:"reversed",onlyIcon:!0,customClass:Fn()["in-listingPhotos__mediaTag"],icon:{name:"tour"}}),C.photos&&C.photos.length>0&&(0,i.jsxs)(i.Fragment,{children:[T&&R&&(0,i.jsx)(Rn.e,{icon:{name:"gallery"},variant:"reversed",customClass:Fn()["in-listingPhotos__mediaTag"],children:O("act_show_photo",{capitalize:!0})}),(0,i.jsxs)(Rn.e,{variant:"reversed",customClass:Fn()["in-listingPhotos__mediaTag"],children:[G,"/",C.photos.length]})]})]}):null,P&&(0,i.jsx)(Rn.e,{customClass:(0,s.W)(Fn()["in-listingPhotos__badge"],Fn()["not-available"]),position:"topRight",children:O("lbl_not_available")}),v&&(0,i.jsx)(Rn.e,{position:"topRight",variant:"brand",customClass:Fn()["in-listingPhotos__badge"],children:O("lbl_new")}),j&&(0,i.jsx)(Rn.e,{variant:"promotion",position:"topRight",customClass:Fn()["in-listingPhotos__badge"],children:O("sold"===j?"lbl_sold":"lbl_rented")}),p&&(0,i.jsx)(Bn,{tier:p,position:"bottomLeft"})]})]})}var $n=n(96783),Zn=n.n($n);function Kn(e){let{isProjectLike:t,originalPrice:n,typologiesCount:s}=e;const{trans:r}=(0,a.T_)();return t?s?(0,i.jsxs)("span",{className:Zn()["in-loweredPrice__label"],children:[`${r("lowered_price_discounted_price_typology")} `,(0,i.jsxs)("span",{className:Zn()["in-loweredPrice__typology"],children:[`${s} `,r("lbl_typology",{count:s})]})]}):(0,i.jsx)("span",{className:Zn()["in-loweredPrice__label"],children:r("lowered_price_discounted_price")}):(0,i.jsx)("span",{className:Zn()["in-loweredPrice__price"],children:n})}var Yn=n(6657),qn=n.n(Yn);function Jn(e){let{isProjectLike:t,originalPrice:n,typologiesCount:a,discountPercentage:r,customClass:o}=e;return(0,i.jsxs)("div",{className:(0,s.Z)(qn()["in-loweredPrice__container"],o),children:[(0,i.jsx)(Kn,{isProjectLike:Boolean(t),originalPrice:n,typologiesCount:a}),(0,i.jsxs)("span",{className:qn()["in-loweredPrice__discount"],children:["(-",r,"%)"]})]})}},41894:function(e,t,n){n.d(t,{C:function(){return l},z:function(){return c}});var i=n(48927),a=n(65756),s=n(52231),r=n(52657),o=n(62872);const l=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{user:n}=(0,i.Eu)();return(0,a.a)({queryKey:["user-preferences",e],queryFn:async()=>{if(!e||0===e.length)return;return await(0,o.uc)(e)},enabled:null!==n&&t})},c=e=>{const t=(0,s.NL)();(0,r.y)({queryKey:["user-preferences"]});const n=t.getQueriesData({queryKey:["user-preferences"]}),[,i]=n.find((t=>{let[n,i]=t;return null===i||void 0===i?void 0:i.some((t=>t.id===e))}))||[null,null];return null===i||void 0===i?void 0:i.find((t=>t.id===e))}},45833:function(e,t,n){n.d(t,{K:function(){return r}});var i=n(87053),a=n(65178),s=n(86504);const r=()=>(0,s.c)("GENERIC_IMAGE")?i:a},29081:function(e,t,n){n.d(t,{h:function(){return a}});var i=n(16755);function a(e){const t=(0,i.useRef)(null);return null===t.current&&(t.current=e()),t.current}},19624:function(e,t,n){n.d(t,{k:function(){return l}});var i=n(48927),a=n(58753),s=n(96999),r=n(24244),o=n(39529);const l=()=>{const{user:e}=(0,i.Eu)(),{locale:t,defaultLocale:n}=(0,s.useRouter)(),l=(0,a.b9)(r.C);return function(){return e?Promise.resolve({fromLogin:!1}):new Promise(((e,i)=>{l({open:!0,onClose:()=>{l({open:!1}),i()},onSuccess:(t,n)=>{(["apple","google","facebook"].some((e=>null===n||void 0===n?void 0:n.includes(e)))||"login"===t||"signup"===t)&&(l({open:!1}),e({fromLogin:!0}))},showAdvantageInfo:!0,contentType:"default",agencySignUp:(0,o.i)(t,n)})}))}}},43205:function(e,t,n){n.d(t,{H:function(){return r}});var i=n(16755),a=n(80172),s=n(95275);function r(e,t,n){const[r,o]=(0,i.useState)(!1),l=(0,a.k)();(0,s.o)(l,"mousemove",(t=>{var i;(null===(i=e.current)||void 0===i?void 0:i.contains(t.target))||(o(!1),n&&n())}),r,!0),(0,s.o)(e,"mousemove",(()=>{o(!0),t&&t()}),!r)}},6213:function(e,t,n){n.d(t,{A:function(){return a}});var i=n(16755);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const n=(0,i.useRef)(void 0);return{onTouchStart:function(e){n.current=e.changedTouches[0]},onTouchEnd:function(i){if(n.current){const a=i.changedTouches[0].screenX-n.current.screenX,s=i.changedTouches[0].screenY-n.current.screenY;Math.abs(s)>Math.abs(a)&&s>t&&e()}}}}},25330:function(e,t,n){n.d(t,{X:function(){return s}});var i=n(6527);const a=e=>{let{min:t,max:n,value:i,margin:a=0}=e;return Math.max(Math.min(n-a,i),t+a)};function s(e,t){let n,s,{containerBounds:r,labelBounds:o}=t;const l=(0,i.E)(e);let c="";if(r&&o){const e={x:r.width/2,y:r.height/2},t={x:(o.left+o.right)/2,y:(o.top+o.bottom)/2};n=t.x<e.x/2?"toRight":t.x>e.x+e.x/2?"toLeft":t.y<e.y?"toBottom":"toTop";const i=(o.right-o.left)/2,d=(o.bottom-o.top)/2;switch(n){case"toTop":s={top:o.top,left:o.left+i};break;case"toBottom":s={top:o.bottom,left:o.left+i};break;case"toLeft":s={left:o.left,top:o.top+d};break;case"toRight":s={left:o.right,top:o.top+d}}if(l){const e=l.width/2,t=l.height/2;switch(n){case"toTop":case"toBottom":{const t=a({min:e,max:r.width-e,value:s.left,margin:4});c=`translateX(${a({min:-1*e,max:e,value:s.left-t,margin:10})}px) rotate(225deg)`,s.left=t;break}case"toLeft":case"toRight":{const e=a({min:t,max:r.height-t,value:s.top,margin:4});c=`translateY(${a({min:-1*t,max:t,value:s.top-e,margin:10})}px) rotate(225deg)`,s.top=e;break}}}}return{arrowTransform:c,position:s,direction:n}}},55548:function(e,t,n){n.d(t,{LS:function(){return i.n1}});var i=n(47570)},25491:function(e,t,n){n.d(t,{U:function(){return a}});var i=n(33830);const a=e=>e.map((e=>{var t,n,a,s,r,o,l;const c=e.properties[0];var d,u,p;return{item_id:e.id,item_name:(0,i.kJ)(e.contract),item_brand:(null===(n=e.advertiser)||void 0===n||null===(t=n.agency)||void 0===t?void 0:t.id)?i.EL.AGENCY:i.EL.PRIVATE,item_category:(0,i.hR)(null!==(d=e.visibility)&&void 0!==d?d:null),item_category2:c.typologyGA4Translation,item_category3:null!==(u=null===(s=c.location)||void 0===s||null===(a=s.nation)||void 0===a?void 0:a.name)&&void 0!==u?u:"",item_category4:(0,i.Tk)(e.isProjectLike),item_category5:null===(r=c.location)||void 0===r?void 0:r.city,item_variant:null===(l=e.advertiser)||void 0===l||null===(o=l.agency)||void 0===o?void 0:o.id.toString(),price:null!==(p=e.price.value)&&void 0!==p?p:void 0}}))},73103:function(e,t,n){n.d(t,{r:function(){return h}});var i=n(16755),a=n(48927),s=n(58753),r=n(93940),o=n(91978),l=n(27124),c=n(19187),d=n(13391),u=n(33830),p=n(12377),m=n(88388),v=n(6724);const h=()=>{const e=(0,d.S)(),t=(0,r.Az)(o.NB),n=(0,m.l)(),h=(0,s.Dv)(l.N),g=(0,c.K)(),{user:_}=(0,a.Eu)();return{trackLaunchSearch:(0,i.useCallback)((()=>{e(p.B_.LAUNCH_SEARCH,{"Is User Logged":Boolean(_),...(0,u.jV)({searchParams:n,geographyData:t}),...(0,u.VL)(n),"Number Of Results Returned":null===h||void 0===h?void 0:h.resultsCount})}),[t,_,null===h||void 0===h?void 0:h.resultsCount,n,e]),trackSearchFilter:(0,i.useCallback)((()=>{e(p.B_.SEARCH_FILTER,{...(0,u.jV)({searchParams:n,geographyData:t}),...(0,u.VL)(n),"Is User Logged":Boolean(_),"Number Of Results Returned":(null===h||void 0===h?void 0:h.resultsCount)||0})}),[e,n,t,_,null===h||void 0===h?void 0:h.resultsCount]),trackLightListingViewed:(0,i.useCallback)(((t,n,i)=>{var a;const s="List"===n&&(null===(a=(0,v.TP)().realEstateList)||void 0===a?void 0:a.find((e=>e["ID Listing"]===t)));e(p.B_.LIGHT_LISTING_VIEWED,{"ID Listing":t.toString(),"Map or List Visualization":n,"Page Number":g.pag||"1","Entry Point":"List"===n?"Lista":"Mappa","Index Number":i||(null===s||void 0===s?void 0:s["Index Number"])||0})}),[g.pag,e])}}},16798:function(e,t,n){var i,a,s;n.d(t,{l6:function(){return s},pR:function(){return a}}),function(e){e.PRIVATE_OFFICE="private-office",e.MEETINGS="meetings",e.FIXED_WORKSTATION="fixed-workstation",e.MOBILE_WORKSTATION="mobile-workstation"}(i||(i={})),function(e){e.FloorPlans="floorplans",e.PhotoPlan="photoPlan",e.Photos="photos",e.Videos="videos",e.VirtualTours="virtualTours",e.Map="map",e.Documents="documents",e.All="all"}(a||(a={})),function(e){e.WALL="wall",e.INCOME="income",e.ROOMS="rooms",e.SALE_DATE="saleDate",e.SURFACE="surface",e.BATHROOMS="bathrooms",e.FLOOR="floor",e.TYPOLOGY_AMOUNT="typologyAmount",e.LUXURY="luxury",e.ELEVATOR="elevator",e.BALCONY="balcony",e.TERRACE="terrace",e.FORNITURE="furniture",e.BASEMENT="basement",e.PRIVATE_OFFICE="private-office",e.MEETINGS="meetings",e.FIXED_WORKSTATION="fixed-workstation",e.MOBILE_WORKSTATION="mobile-workstation",e.WORKSTATION="workstation"}(s||(s={}))},16936:function(e,t,n){n.d(t,{J:function(){return o}});var i=n(45419),a=n(19100),s=n(32698),r=n(16798);const o=(e,t)=>{switch(e){case r.l6.WALL:return{name:"wall",spriteUrl:a};case r.l6.INCOME:return{name:"euro-circle"};case r.l6.ROOMS:return{name:"planimetry",spriteUrl:i};case r.l6.SALE_DATE:return{name:t?"clock":"calendar"};case r.l6.SURFACE:return{name:"size",spriteUrl:i};case r.l6.BATHROOMS:return{name:"bath",spriteUrl:i};case r.l6.FLOOR:return{name:"stairs",spriteUrl:i};case r.l6.TYPOLOGY_AMOUNT:return{name:"home"};case r.l6.LUXURY:return{name:"diamond"};case r.l6.ELEVATOR:return{name:"elevator",spriteUrl:a};case r.l6.BALCONY:return{name:"balcony",spriteUrl:a};case r.l6.TERRACE:return{name:"beach-umbrella",spriteUrl:a};case r.l6.FORNITURE:return{name:"couch-lamp",spriteUrl:a};case r.l6.BASEMENT:return{name:"shelf",spriteUrl:a};case r.l6.WORKSTATION:return{name:"person"};case r.l6.FIXED_WORKSTATION:return{name:"desk",spriteUrl:s};case r.l6.MEETINGS:return{name:"whiteboard",spriteUrl:s};case r.l6.MOBILE_WORKSTATION:return{name:"office-chair",spriteUrl:s};case r.l6.PRIVATE_OFFICE:return{name:"door",spriteUrl:s};default:return{name:""}}}},27953:function(e,t,n){n.d(t,{t:function(){return i}});const i=(e,t)=>{const n=(e=>{{const t=/Android/i.test(navigator.userAgent);if(e&&e.startsWith("http")&&t)return`intent://${e}#Intent;S.browser_fallback_url=${e};action=android.intent.action.VIEW;end;`}return null!==e&&void 0!==e?e:null})(e);if("_self"===t)location.href=null!==n&&void 0!==n?n:"",location.href=e;else{window.open(null!==n&&void 0!==n?n:e,t)||window.open(e)}}},69467:function(e,t,n){n.d(t,{H:function(){return a}});var i=n(16798);const a=(e,t)=>t!==i.pR.Photos&&!!(t===i.pR.Videos||t===i.pR.FloorPlans&&e||t===i.pR.VirtualTours||t===i.pR.PhotoPlan)},30236:function(e,t,n){n.d(t,{d:function(){return s},j:function(){return r}});var i=n(27960),a=n(92592);const s=e=>{let{id:t,lang:n,addEntryPointMapParam:s}=e;const r=s?"?entryPoint=map":"",o=`${(0,i.t)("realEstatePath")}${t}/${r}`;return(0,a._J)(o,(0,i.t)("defaultLocale"),n)},r=e=>{let{id:t,parentId:n,lang:s}=e;const r=`${(0,i.t)("realEstatePath")}${n}/${t}/`;return(0,a._J)(r,(0,i.t)("defaultLocale"),s)}},51162:function(e,t,n){n.d(t,{Gz:function(){return i},Qj:function(){return s},fZ:function(){return o},hc:function(){return r}});var i,a=n(92592);!function(e){e.ACTIVE_IMAGE="activeImage",e.GEO_HASH_PARAM="geohash"}(i||(i={}));const s=e=>{const{pathname:t,search:n}=window.location;(0,a.mj)(`${t+n}#${e}`)},r=()=>{if(""===window.location.hash)return;const{pathname:e,search:t}=window.location;(0,a.mj)(e+t)},o=e=>{if(""===window.location.hash||!window.location.hash.startsWith(`#${e}`))return;const{pathname:t,search:n}=window.location;(0,a.mj)(t+n)}},73413:function(e,t,n){n.d(t,{L:function(){return i}});const i=e=>{"undefined"!==typeof requestIdleCallback?requestIdleCallback(e):setTimeout(e,0)}},27944:function(e,t,n){n.d(t,{BN:function(){return D},S_:function(){return V},fY:function(){return O}});var i=n(16755),a=n(48927),s=n(65756),r=n(58753),o=n(96999),l=n(19584),c=n(61263),d=n(62120),u=n(41894),p=n(4517),m=n(19187),v=n(88388),h=n(93940),g=n(91978),_=n(27124),f=n(59199),C=n(73103),y=n(43187);var x=n(93e3);const b=e=>e&&"seoData"in e&&e.seoData.searchName||"";var E=n(89421),k=n(65291),S=n(5099),j=n(51496),P=n(67714),T=n(51066),L=n(69774),M=n(9052);var N=n(34009),I=n(2943),A=n(92592);const w=[...L.r,"id","imm_source"],R=e=>{const t=(0,o.useRouter)(),{asPath:n,push:a,replace:l}=t,{locale:d,defaultLocale:u}=t,p=(0,r.Dv)(k.Q),m=(0,h.Az)(S.Js),v=(0,h.Az)(g.NB),_=(0,r.Dv)(x.j),f=(0,r.Dv)(c.e)||1,C=(0,r.b9)(c.e),b=(0,E.J7)(v),L=(0,P.k)();(0,T.S)(m,(()=>C(1))),(0,T.S)(v,(()=>C(1)));const{redirectUrl:R}=(e=>{let{params:t,pag:n,enabled:i=!0}=e;const{noAgenzie:a,...r}=t,{data:o,isFetching:l}=(0,s.a)({queryKey:["real-estate-list-redirect",r,n],queryFn:()=>M.d.get("/api-next/search-list/url-resolver/",{searchParams:{...r,pag:n}}).json().then((e=>e.url)),enabled:i});return{redirectUrl:o,isFetching:l}})({params:{...m,...b},pag:f,enabled:!0===e}),D=(0,i.useCallback)((e=>{if(!_)return e;const{lat:t,lng:n,zoom:i}=L||{};return t&&n&&i?(0,N.pk)(e,(0,I.M)(null!==L&&void 0!==L?L:{})):e}),[L,_]),O=(0,i.useCallback)((e=>({location:(0,N.jb)((0,A.b4)(n,d,u)),params:(0,y.CE)((0,N.YW)(n),...w),redirectLocation:(0,N.jb)(e),redirectParams:(0,N.YW)(e)})),[n,u,d]),V=(0,i.useCallback)((e=>{let{to:t,method:n}=e;"push"===n?a(t,void 0,{shallow:!0}):l(t,void 0,{shallow:!0})}),[]);(0,j.b)((()=>{if(!R||Boolean(p))return;const e=D(R),{location:t,params:n,redirectLocation:i,redirectParams:a}=O(e);if(t===i&&(0,y.vZ)(n,a))return;const s=(0,y.ei)(n,"mapCenter","zoom"),r=(0,y.ei)(a,"mapCenter","zoom");V({to:e,method:(0,y.vZ)(s,r)?"push":"replace"})}),[R,O,D,V,p],500)},D=(e,t,n)=>["real-estate-list",(0,y.BE)({...(0,y.x)({...e})}),String(t||1),n],O=()=>{const{user:e}=(0,a.Eu)(),t=(0,v.l)(),n=(0,r.Dv)(c.e)||1;return D(t,n,Boolean(e))},V=()=>{const e=(0,i.useRef)(!1),t=(0,v.l)(),n=(0,r.Dv)(c.e)||1,E=(0,r.b9)(c.e),k=(()=>{const{lat:e,lng:t,zoom:n}=(0,m.K)(),i=(0,r.Dv)(l.zB),a=e||t||n,s=Boolean(i);return!a||s})(),S=(0,o.useRouter)(),j=(0,m.K)(),P=O(),T=(0,i.useCallback)((async n=>(e.current=!0,M.d.get("/api-next/search-list/real-estates/",{searchParams:{...t,pag:n,paramsCount:Object.keys(j).length,path:location.pathname}}).json())),[t,j]),{data:L}=(0,s.a)({queryKey:P,queryFn:()=>T(n),enabled:k});(0,i.useLayoutEffect)((()=>{L&&0===L.results.length&&L.count>0&&n>1&&E(n-1)}),[L,n,E]),(0,u.C)(null===L||void 0===L?void 0:L.results.map((e=>e.realEstate.id)),!(null===L||void 0===L?void 0:L.isOptimistic)),(()=>{const e=(0,h.Az)(g.NB),t=(0,v.l)(),n=(0,r.Dv)(_.N),{pathname:a}=(0,o.useRouter)(),s=(0,i.useRef)(a),{trackLaunchSearch:l,trackSearchFilter:c}=(0,C.r)(),d=a===s.current,u=(0,i.useMemo)((()=>(e=>{switch(null===e||void 0===e?void 0:e.searchType){case"place":return e.value.map((e=>`${e.id}-${e.type}`));case"circle":return[`${e.value.radius}-${e.value.center}`];case"polygon":return e.value.points;default:return null}})(e)),[e]),p=(0,i.useRef)(n),m=(0,i.useRef)(u);(0,i.useEffect)((()=>{var t;const i=(0,y.vZ)(u,m.current);e&&!i&&!(null===n||void 0===n?void 0:n.isFetching)&&(null===n||void 0===n?void 0:n.token)&&(null===n||void 0===n?void 0:n.token)!==(null===(t=p.current)||void 0===t?void 0:t.token)&&d&&(m.current=u,s.current=a,p.current=n,l())}),[u,e,d,a,n,l]);const x=(0,h.Az)(f.m),b=(0,i.useRef)(x);(0,i.useEffect)((()=>{var e;const i=(0,y.vZ)(x,b.current);t&&!i&&!(null===n||void 0===n?void 0:n.isFetching)&&(null===n||void 0===n?void 0:n.token)&&(null===n||void 0===n?void 0:n.token)!==(null===(e=p.current)||void 0===e?void 0:e.token)&&d&&(b.current=x,s.current=a,p.current=n,c())}),[e,t,x,n,d,a,c])})(),R(e.current),(0,p.U)(),(0,i.useEffect)((()=>{S.beforePopState((e=>{let{options:t}=e;return t.shallow=!1,!0}))}),[S]),((e,t)=>{const n=(0,m.K)(),s=(0,r.b9)(_.N),o=(0,i.useRef)(!0),{user:l}=(0,a.Eu)(),c=(0,h.Az)(g.NB),{pag:d,minLat:u,minLng:p,maxLat:v,maxLng:f,zoom:C,...E}=e,k=null===t||void 0===t?void 0:t.suggestedSearchData.token,S=(0,i.useRef)(null),j=(0,i.useRef)(),P=(0,i.useRef)(!1),T=(0,i.useRef)(null),L=(0,r.Dv)(x.j),M=(0,i.useRef)(!0);(0,i.useEffect)((()=>{const e=!(0,y.vZ)(E,S.current);T.current=null!==t&&void 0!==t?t:null,s((i=>{const a=((e,t,n,i,a,s,r,o)=>{if(!s)return!r&&o;if(e){if(t)return n;if(i)return a}return n})(e,o.current,null===i||void 0===i?void 0:i.isEditing,null===i||void 0===i?void 0:i.searchId,Boolean(l),c,M.current,L),s=l?null===i||void 0===i?void 0:i.searchId:void 0;return s&&(M.current=!1),{...i,isEditing:Boolean(a),searchId:s,resultsCount:(null===t||void 0===t?void 0:t.count)||null,searchName:b(t),isFetching:!t,showTooltip:!a&&((null===i||void 0===i?void 0:i.showTooltip)||"1"===n.editSearchAction),token:(null===t||void 0===t?void 0:t.suggestedSearchData.token)||null}})),t&&(S.current=E,j.current=k,o.current=!1,P.current=Boolean(l))}),[t,E,k,l,s,n,c,L])})(t,L);const[N,I]=(0,r.KO)(d.U);return(0,i.useEffect)((()=>{if(!L)return;(0,y.vZ)(N,L.seoData)||I(L.seoData);const e=document.querySelector("html");var t,n;e&&e.setAttribute("prefix",null!==(n=null===(t=L.seoData.facebookSettings)||void 0===t?void 0:t.prefix)&&void 0!==n?n:"")}),[L,N,I]),L}},87053:function(e){e.exports="https://s1.immobiliare.it/_next/static/media/figure_placeholder.7de5786f00c5abb8.svg"},65178:function(e){e.exports="https://s1.immobiliare.it/_next/static/media/immo_placeholder.f39bdd120bdc9c69.svg"}}]);
</script>

</body>
</html>
