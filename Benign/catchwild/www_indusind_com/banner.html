<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>banner.html</title>
</head>
<body>

<script>
$(document).ready(function(){
    var swipermain = new Swiper('.main-slider', {
        spaceBetween: 0,
        // simulateTouch:false,
        autoplayDisableOnInteraction: false,
        effect: 'fade',
        autoplay: {
            delay: 10000,
            disableOnInteraction: false,
        },
        speed: 1000,
        pagination: {
            el: '.swiper-pagination-main',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next-white',
            prevEl: '.swiper-button-prev-white',
        },
        
    });
    
        //var data-attr-bg = $('.swiper-slide').attr('data-bgcolor');
    
        $('.swiper-slide').each(function(){
            var slidebgcolor = $(this).attr('data-bgcolor');
                //console.log(slidebgcolor)
            $(this).css('background', slidebgcolor)
    
    
        })
    
    
        });
/*! lozad.js - v1.0.8 - 2017-10-13
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2017 Apoorv Saxena; Licensed MIT */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.lozad=e()}(this,function(){"use strict";function t(t){t.setAttribute("data-loaded",!0)}var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},r={rootMargin:"0px",threshold:0,load:function(t){t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&(t.srcset=t.getAttribute("data-srcset")),t.getAttribute("data-background-image")&&(t.style.backgroundImage="url("+t.getAttribute("data-background-image")+")")}},o=function(t){return"true"===t.getAttribute("data-loaded")},n=function(e){return function(r,n){r.forEach(function(r){r.intersectionRatio>0&&(n.unobserve(r.target),o(r.target)||(e(r.target),t(r.target)))})}};return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".lozad",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=e({},r,i),d=u.rootMargin,c=u.threshold,s=u.load,g=void 0;return window.IntersectionObserver&&(g=new IntersectionObserver(n(s),{rootMargin:d,threshold:c})),{observe:function(){for(var e=document.querySelectorAll(a),r=0;r<e.length;r++)o(e[r])||(g?g.observe(e[r]):(s(e[r]),t(e[r])))},triggerLoad:function(e){o(e)||(s(e),t(e))}}}});
let hrefLink="";
let treatmentCode="";

$(document).ready(function() {

//For Interact at /Runtime


     let cookieVal = getCookie("INDUSNET");//"vb722guk2c1mvjmcqmggct4do0e9mnap";
     let pageName = "Homepage";
    if(cookieVal) {
		console.log(cookieVal);
        $("#pageBody").attr("data-cookie",cookieVal);
    $.ajax({
                type: "GET",
                url: "/bin/getSCAll?type=banner&cookietype="+cookieVal+"&pageName="+pageName,
               //data: JSON.stringify(data),
                contentType: "application/json",
                success: function(dataR) {

				let banner = JSON.parse(dataR);
			//$("#mainDivBan").html("");




        for(i=0; i<banner.interactOffers.length;i++)
        {
        		let data = '<div id="backInt" class="swiper-slide spotlight lozad-picture" data-spotlight="fullscreen" data-bgcolor="'+banner.interactOffers[i].banner.backgroundColorCode+'">'
data=data+'<a href="'+banner.interactOffers[i].banner.ctaLink+'" class="d-block banner-block banner-block-interact" data-value="'+banner.interactOffers[i].banner.treatmentCode+'">';
//data=data+'<div class="container"><div class="spotlight-holder"><picture>';
        data=data+'<div class="container"><div class="spotlight-holder"><picture data-iesrc='+banner.interactOffers[i].banner.desktopImage+'>';
data=data+'<source srcset="'+banner.interactOffers[i].banner.desktopImage+'" media="(min-width: 1200px)"/>';
data=data+'<source srcset="'+banner.interactOffers[i].banner.tabImage+'" media="(min-width: 576px)"/>';
data=data+'<source srcset="'+banner.interactOffers[i].banner.mobileImage+'" media="(min-width: 300px)"/>';
data=data+'<img src="'+banner.interactOffers[i].banner.desktopImage+'" alt=""/>';
data=data+'</picture><div class="container py-space d-flex mask-content-cover "><div class="col"><div class="row justify-content-end"><div class="col-12 col-md-12 col-lg-7 col-xl-6 text-left">';
data=data+'<h1 alt="" title="” class=" text-="" text-bold="" mb-2="" mt-2"="" data-aos="fade-up" data-aos-duration="1500" class="aos-init aos-animate">'+banner.interactOffers[i].banner.heading+'</h1>';
data=data+'<ul style="" class="list-inline"><li class="list-inline-item text- blockquote aos-init aos-animate" data-aos="fade-up" data-aos-duration="2015">'+banner.interactOffers[i].banner.description+'</li></ul>';
data=data+'<span class="clearfix"></span></div></div></div></div></div></a></div>';//</div></a></div>';


				$("#mainDivBan").prepend(data);
         treatmentCode =banner.interactOffers[i].banner.treatmentCode;

        	displayEvent();
       // console.log(data);

    		}
           for(i=0; i<banner.interactFLYOffers.length;i++){
            $(".flyIn-img").each(function() {

					$(this).attr("src",banner.interactFLYOffers[0].offerImageName);


    		});

         	$(".flyIn-atag").each(function() {

				$(this).attr("href",banner.interactFLYOffers[0].callToActionURL);
                $(this).html(banner.interactFLYOffers[0].offerCTAName);


    		});

    }
  // swipermain.init();

           var swipermain = new Swiper('.main-slider', {
    spaceBetween: 0,
    // simulateTouch:false,
    autoplayDisableOnInteraction: false,
    effect: 'fade',
    autoplay: {
        delay: 10000,
        disableOnInteraction: false,
    },
    speed: 1000,
    pagination: {
        el: '.swiper-pagination-main',
        clickable: true,
    },
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
    },

});

    //var data-attr-bg = $('.swiper-slide').attr('data-bgcolor');

    $('.swiper-slide').each(function(){
		var slidebgcolor = $(this).attr('data-bgcolor');
			console.log(slidebgcolor)
        $(this).css('background', slidebgcolor)


    })


    $(".banner-block-interact").click(function(e) {

        e.preventDefault();

        hrefLink=$(this).attr('href');
        
       treatmentCode = $(this).attr('data-value');

        if(!hrefLink.includes("http"))
            hrefLink="https://www.indusind.com"+hrefLink;
        postEvent(hrefLink);
        /*let val=$(this).parent().children('div').children('div').children('picture').attr('data-iesrc');

        if(val.includes("http"))
        {
        	postEvent();
        }
        else{
            console.log("Default Banner Clicked");
			window.location.href=hrefLink;
        }*/

    });






                }
            });


}


    // Function To Get Cookie
    function getCookie(name) {
        var arg = name + "=";
        var alen = arg.length;
        var clen = document.cookie.length;
        var i = 0;
        while (i < clen) {
            var j = i + alen;
            if (document.cookie.substring(i, j) == arg) {
                return getCookieVal(j);
            }
            i = document.cookie.indexOf(" ", i) + 1;
            if (i == 0) break;
        }
        return "";
    }

    function getCookieVal(offset) {
        var endstr = document.cookie.indexOf(";", offset);
        if (endstr == -1) {
            endstr = document.cookie.length;
        }
        return unescape(document.cookie.substring(offset, endstr));
    }














   /* $(".banner-block").click(function(e) {

        e.preventDefault();

        hrefLink=$(this).attr('href');
        
       treatmentCode = $(this).attr('data-value');

        if(!hrefLink.includes("http"))
            hrefLink="https://www.indusind.com"+hrefLink;


        let val=$(this).children('div').children('div').children('picture').attr('data-iesrc');

        if(val.includes("http"))
        {
        	postEvent();
        }
        else{
            console.log("Default Banner Clicked");
			window.location.href=hrefLink;
        }

    });*/


    function displayEvent() {
        let obj = {
			eventName: "OfferDisplay",
            treatmentCode:treatmentCode
		};
		let data = JSON.stringify(obj);
        console.log(data);
        $.ajax({
			url: '/bin/post/event',
			type: "POST",
			data: data,
            async : false,
            contentType: "application/json",
			success: function (res) {
                console.log(res);
				if (res.status === 200) {
                   console.log("Displayed");
                }
            },
            error: function(er) {
				console.log("Error :: ", er);
            }
        });
    }

    function postEvent(phrefLink) {
        let obj = {
			eventName: "OfferClick",
            treatmentCode:treatmentCode
		};
		let data = JSON.stringify(obj);
        console.log(data);
        $.ajax({
			url: '/bin/post/event',
			type: "POST",
			data: data,
            contentType: "application/json",
			success: function (res) {
                console.log(res);
				if (res.status === 200) {
                   console.log("Success");
                   window.location.href=phrefLink;
                }
            },
            error: function(er) {
				console.log("Error :: ", er);
                window.location.href=phrefLink;
            }
        });
    }
});
$(document).ready(function() {
    $('.swiper-slide').each(function() {
        var $slide = $(this);
        var headingTextColor = $slide.attr('data-textcolor');
        var $heading = $slide.find(".bannerHeading");
        var $subHeading = $slide.find(".bannerSubHeading");
        
        if (headingTextColor) {
            $heading.css('color', headingTextColor);
            $subHeading.css('color', headingTextColor);
        }
    });
});

</script>

</body>
</html>
