<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>main.html</title>
</head>
<body>

<script>
var compileProductName="Flip HTML5";!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.ClipboardJS=i():t.ClipboardJS=i()}(this,function(){return function(e){function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}var s={};return o.m=e,o.c=s,o.i=function(t){return t},o.d=function(t,i,e){o.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:e})},o.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(i,"a",i),i},o.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},o.p="",o(o.s=3)}([function(e,o,s){var n,h,a;!function(t,i){h=[e,s(7)];n=i;void 0!==(a="function"==typeof n?n.apply(o,h):n)&&(e.exports=a)}(0,function(t,i){var e=i&&i.__esModule?i:{default:i},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function o(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1;o.configurable=!0;"value"in o&&(o.writable=!0);Object.defineProperty(t,o.key,o)}}return function(t,i,e){return i&&o(t.prototype,i),e&&o(t,e),t}}(),n=function(){function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.resolveOptions(t);this.initSelection()}return s(i,[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action;this.container=t.container;this.emitter=t.emitter;this.target=t.target;this.text=t.text;this.trigger=t.trigger;this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,i="rtl"==document.documentElement.getAttribute("dir");this.removeFake();this.fakeHandlerCallback=function(){return t.removeFake()};this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[i?"right":"left"]="-9999px";this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;this.container.appendChild(this.fakeElem);this.selectedText=(0,e["default"])(this.fakeElem);this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null);this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,e["default"])(this.target);this.copyText()}},{key:"copyText",value:function(){var i=void 0;try{i=document.execCommand(this.action)}catch(t){i=!1}this.handleResult(i)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus();window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){if(this._action=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy","copy"!==this._action&&"cut"!==this._action)throw Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":o(t))||1!==t.nodeType)throw Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),i}();t.exports=n})},function(t,i,e){function o(t,i,e){return t.addEventListener(i,e),{destroy:function(){t.removeEventListener(i,e)}}}function s(t,i,e){return Array.prototype.forEach.call(t,function(t){t.addEventListener(i,e)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(i,e)})}}}var n=e(6),h=e(5);t.exports=function(t,i,e){if(!t&&!i&&!e)throw Error("Missing required arguments");if(!n.string(i))throw new TypeError("Second argument must be a String");if(!n.fn(e))throw new TypeError("Third argument must be a Function");if(n.node(t))return o(t,i,e);if(n.nodeList(t))return s(t,i,e);if(n.string(t))return h(document.body,t,i,e);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,i){function e(){}e.prototype={on:function(t,i,e){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:i,ctx:e}),this},once:function(t,i,e){function o(){s.off(t,o);i.apply(e,arguments)}var s=this;return o._=i,this.on(t,o,e)},emit:function(t){var i=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),o=0,s=e.length;for(o;o<s;o++)e[o].fn.apply(e[o].ctx,i);return this},off:function(t,i){var e=this.e||(this.e={}),o=e[t],s=[];if(o&&i)for(var n=0,h=o.length;n<h;n++)o[n].fn!==i&&o[n].fn._!==i&&s.push(o[n]);return s.length?e[t]=s:delete e[t],this}};t.exports=e},function(e,o,s){var n,h,a;!function(t,i){h=[e,s(0),s(2),s(1)];n=i;void 0!==(a="function"==typeof n?n.apply(o,h):n)&&(e.exports=a)}(0,function(t,i,e,o){function s(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function h(t,i){var e="data-clipboard-"+t;if(i.hasAttribute(e))return i.getAttribute(e)}var a=s(i);i=s(e);var r=s(o),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=function(){function o(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1;o.configurable=!0;"value"in o&&(o.writable=!0);Object.defineProperty(t,o.key,o)}}return function(t,i,e){return i&&o(t.prototype,i),e&&o(t,e),t}}();o=function(t){function o(t,i){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");var e;e=(o.__proto__||Object.getPrototypeOf(o)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!=typeof e&&"function"!=typeof e?this:e;return e.resolveOptions(i),e.listenClick(t),e}return n(o,t),g(o,[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction;this.target="function"==typeof t.target?t.target:this.defaultTarget;this.text="function"==typeof t.text?t.text:this.defaultText;this.container="object"===l(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var i=this;this.listener=(0,r["default"])(t,"click",function(t){return i.onClick(t)})}},{key:"onClick",value:function(t){t=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null);this.clipboardAction=new a["default"]({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(t){return h("action",t)}},{key:"defaultTarget",value:function(t){if(t=h("target",t))return document.querySelector(t)}},{key:"defaultText",value:function(t){return h("text",t)}},{key:"destroy",value:function(){this.listener.destroy();this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],i=!!document.queryCommandSupported;return("string"==typeof t?[t]:t).forEach(function(t){i=i&&!!document.queryCommandSupported(t)}),i}}]),o}(i["default"]);t.exports=o})},function(t,i){if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}t.exports=function(t,i){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(i))return t;t=t.parentNode}}},function(t,i,e){function n(t,i,e,o,s){var n=h.apply(this,arguments);return t.addEventListener(e,n,s),{destroy:function(){t.removeEventListener(e,n,s)}}}function h(i,e,t,o){return function(t){t.delegateTarget=s(t.target,e);t.delegateTarget&&o.call(i,t)}}var s=e(4);t.exports=function(t,i,e,o,s){return"function"==typeof t.addEventListener?n.apply(null,arguments):"function"==typeof e?n.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return n(t,i,e,o,s)}))}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType};e.nodeList=function(t){var i=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===i||"[object HTMLCollection]"===i)&&"length"in t&&(0===t.length||e.node(t[0]))};e.string=function(t){return"string"==typeof t||t instanceof String};e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,i){t.exports=function(t){if("SELECT"===t.nodeName)t.focus(),t=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var i=t.hasAttribute("readonly");i||t.setAttribute("readonly","");t.select();t.setSelectionRange(0,t.value.length);i||t.removeAttribute("readonly");t=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),e=document.createRange();e.selectNodeContents(t);i.removeAllRanges();i.addRange(e);t=i.toString()}return t}}])});(this||(0,eval)("(this)")).bdor=[];(function(t){function i(t){t=o.match(t);if(null==t||0==t.length)return 0;t=t[0];var i=t.indexOf("/");t=t.substring(i+1,t.length);return""==t?0:parseInt(t)}function e(t){t=o.match(t);if(null==t||0==t.length)return 0;t=t[0].replace("_",".").match(/\d+\.?\d?/);if(null==t||0==t.length)return 0;t=t[0];return""==t?0:parseFloat(t)}var o=navigator.userAgent.toLowerCase();t.browser={};t.browser.webkit=/webkit/.test(o);t.browser.mozilla=/firefox/.test(o);t.browser.firefox=t.browser.mozilla;t.browser.msie=/msie/.test(o)||/trident/.test(o)||/edge/.test(o);t.browser.edge=/edge/.test(o);t.browser.opera=/opera/.test(o)||/opr/.test(o);t.browser.chrome=/chrome/.test(o)&&!t.browser.opera&&!t.browser.edge;t.browser.uc=/ucbrowser/.test(o);t.browser.safari=/safari/.test(o)&&!t.browser.chrome&&!t.browser.uc&&!t.browser.opera;t.browser.wechat=/micromessenger/.test(o);t.browser.version=0;bdor[1]="p";t.browser.firefox&&(t.browser.version=i(/firefox\/\d+/));if(t.browser.msie){var s=o.match(/msie\s?\d+\.0/);null==s?(s=o.match(/trident\/\d+\.0/),null!=s&&0<s.length?(s=s[0],s=parseInt(s.replace("trident/","")),t.browser.version=s+4):(s=o.match(/edge\/\d+\.0/),null!=s&&0<s.length&&(s=s[0],s=parseInt(s.replace("edge/","")),t.browser.version=s))):(s=parseInt(s[0].replace("msie","")),t.browser.version=s)}t.browser.opera&&(t.browser.version=i(/opera\/\d+/)||i(/opr\/\d+/));t.browser.chrome&&(t.browser.version=i(/chrome\/\d+/));t.browser.uc&&(t.browser.version=i(/ucbrowser\/\d+/));t.browser.safari&&(t.browser.version=i(/safari\/\d+/));if(void 0==t.browser.device){t.browser.DEVICE_PC=0;t.browser.DEVICE_PAD=1;t.browser.DEVICE_PHONE=2;var s=/pad/.test(o)||/ipod/.test(o),n=/iphone/.test(o),h=/wpdesktop/.test(o)||/windows phone/.test(o),a=/blackberry/.test(o),r=/mobile/.test(o)||/phone/.test(o);t.browser.device=t.browser.DEVICE_PC;if(s)t.browser.device=t.browser.DEVICE_PAD;else if(n||h||a||r)t.browser.device=t.browser.DEVICE_PHONE}void 0==t.browser.app&&(t.browser.app=/android-app/.test(o));void 0==t.browser.prefix&&(t.browser.prefix="",!0==t.browser.webkit&&(t.browser.prefix="-webkit-"),!0==t.browser.mozilla&&(t.browser.prefix="-moz-"),!0==t.browser.opera&&(t.browser.prefix="-webkit-"),!0==t.browser.uc&&(t.browser.prefix="-webkit-"),!0==t.browser.msie&&(t.browser.prefix="-ms-"));if(void 0==t.system){t.system={name:"",version:0};t.system.WINDOWS="Windows";t.system.WP="WinPhone";t.system.WP_DESKTOP="WinPhoneDesktop";t.system.MAC="Mac OS";t.system.IOS="iPhone OS";t.system.LINUX="Linux";t.system.ANDROID="Android";t.system.BLACKBERRY="BlackBerry";/windows/.test(o)&&(t.system.name=t.system.WINDOWS,t.system.version=e(/windows nt\s?\d+\.?\d?/));/windows phone/.test(o)&&(t.system.name=t.system.WP,t.system.version=e(/windows phone\s?\d+\.?\d?/));/wpdesktop/.test(o)&&(t.system.name=t.system.WP_DESKTOP,t.system.version=e(/wpdesktop\s?\d+\.?\d?/));if(t.system.name!=t.system.WP){if(/iphone/.test(o)||/ipad/.test(o))t.system.name=t.system.IOS,t.system.version=e(/os\s?\d+_?\d?/);/android/.test(o)&&(t.system.name=t.system.ANDROID,t.system.version=e(/android\s?\d+\.?\d?/))}/mac/.test(o)&&t.browser.system!=t.browser.IOS&&(t.system.name=t.system.MAC,t.system.version=e(/os x\s?\d+\.?\d?/));/linux/.test(o)&&!/android/.test(o)&&(t.system.name=t.system.LINUX);/blackberry/.test(o)&&(t.system.name=t.system.BLACKBERRY,t.system.version=e(/blackberry\s?\d+/))}})(jQuery);var isFirefox=function(){return $.browser.firefox},isIE=function(){return $.browser.msie},isIE8=function(){return $.browser.msie&&8==$.browser.version},isIE9=function(){return $.browser.msie&&9==$.browser.version},isIE11=function(){return $.browser.msie&&11==$.browser.version},isBelowIE11=function(){return $.browser.msie&&11>$.browser.version},isPad=function(){return $.browser.device==$.browser.DEVICE_PAD||$.browser.device==$.browser.DEVICE_PC&&$.system.name==$.system.ANDROID?!0:!1},isIpad=function(){var t=navigator.userAgent.toLowerCase();return 0<t.indexOf("ipad")&&0<t.indexOf("safari")},isPC=function(){return $.browser.device==$.browser.DEVICE_PC?!0:!1},isIpod=function(){return 0<navigator.userAgent.toLowerCase().indexOf("ipod")},isIphone=function(){return 0<navigator.userAgent.toLowerCase().indexOf("iphone")},isNokiaPhone=function(){var t=navigator.userAgent.toLowerCase();return 0<t.indexOf("msie")&&0<t.indexOf("wpdesktop")},isPhone=function(){var t=window.location.search;return $.browser.device==$.browser.DEVICE_PHONE||0<=t.toLowerCase().indexOf("phone=true")||0<=t.toLowerCase().indexOf("phonebook=true")?!0:!1},isAndroidWeChat=function(){return $.system.name==$.system.ANDROID&&$.browser.chrome&&40>$.browser.version},isWeChat=function(){return $.browser.wechat},isAndroidDefault=function(){return $.system.name==$.system.ANDROID&&$.browser.safari},isPhoneBook=function(){if($.system.name==$.system.ANDROID&&$.browser.uc)return!0;var t=window.location.search;return(isPhone()||isPad())&&$.system.name==$.system.ANDROID&&4>parseInt($.system.version)||0<=t.toLowerCase().indexOf("phonebook=true")||(isPhone()||isPad())&&"slide"==bookConfig.FlipStyle.toLowerCase()?!0:!1},isHigherThanIOS8=function(){return $.system.name==$.system.IOS&&8<=$.system.version},isInTheFrame=function(){return window.top!=window};function isBelowIE9(){return $.browser.msie?9>$.browser.version?!0:!1:!1}function isBelowIE8(){return $.browser.msie?8>$.browser.version?!0:!1:!1}function isBelowIE10(){return $.browser.msie?10>$.browser.version?!0:!1:!1}var global=function(){return this||(0,eval)("(this)")}(),virtual_function=function(){};function getPackageByName(t){if(void 0==t||""==t)return global;var i=global;t=t.split(".");for(var e=0;e<t.length;e++){var o=t[e];i[o]||(i[o]={IS_PACKAGE_OBJECT:!0});i=i[o]}return i}function getClassByFullName(t){if(-1==t.indexOf("."))return global[t];var i=t.split(".");t=i.pop();i=i.join(".");return getPackageByName(i)[t]}function classof(t,i){if(!t)return"";i||(i=global);"string"==typeof i&&(i=getPackageByName(i));var e=["webkitStorageInfo","webkitIndexedDB"],o;for(o in i)try{if(!(-1<e.indexOf(o))&&i[o]instanceof Function)try{if(t instanceof i[o])return o}catch(t){}}catch(t){}for(o in i)try{if("object"==typeof i[o]&&i[o].IS_PACKAGE_OBJECT){var s=classof(t,i[o]);if(""!=s)return o+"."+s}}catch(t){}return""}function nameof(t,i){if(!t)return"";i||(i=global);"string"==typeof i&&(i=getPackageByName(i));var e=["webkitStorageInfo","webkitIndexedDB"],o;for(o in i)try{if(!(-1<e.indexOf(o))&&i[o]==t)return o}catch(t){}for(o in i)try{if("object"==typeof i[o]&&i[o].IS_PACKAGE_OBJECT){var s=nameof(t,i[o]);if(""!=s)return o+"."+s}}catch(t){}return""}function Class(t,i){if("string"===typeof t){var e=i,o=getPackageByName(e.Package);o[t]=Class(e);return o[t]}var s=function(){if(this.Import){"string"==typeof this.Import&&(this.Import=[this.Import]);for(var t=0;t<this.Import.length;t++){var i=this.Import[t],e=getPackageByName(i);if(e instanceof Function)this[i.split(".").pop()]=e;else for(var o in e)e[o]instanceof Function&&(this[o]=e[o])}}e=getPackageByName(this.Package);if(e!=global)for(o in e)this.getClassName()!=o&&e[o]instanceof Function&&(this[o]=e[o]);this.create&&this.create instanceof Function&&this.create.apply(this,arguments)};s.prototype=t||{};var n;s.prototype.getClassName=function(){n||(n=nameof(s,this.Package));return n};s.prototype.getClass=function(){return s};e=s.prototype.statics;if(void 0!=e){for(o in e)void 0==s[o]&&(s[o]=e[o]);delete s.prototype.statics}return s}Function.prototype.extend=function(t){if(!t)return this;if("string"==typeof t)if(-1<t.indexOf(".")){if(t=getClassByFullName(t),!t)return this}else{var i=this.prototype.Package,e=t;i&&""!=i&&(t=i+"."+e);t=getClassByFullName(t);if(!t&&(t=getClassByFullName(e),!t))return this}if(t instanceof Function){for(var o in t)void 0==this[o]&&(this[o]=t[o]);for(o in t.prototype)void 0==this.prototype[o]?t.prototype[o]==virtual_function?console&&console.error&&console.error("virtual function [%s] must be override.",o):this.prototype[o]=t.prototype[o]:(e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,this.prototype[o]instanceof Function&&t.prototype[o]instanceof Function&&e.test(this.prototype[o])&&(this.prototype[o]=function(e,o){return function(){var t=this._super;this._super=e;var i=o.apply(this,arguments);this._super=t;return i}}(t.prototype[o],this.prototype[o])));return this}return"object"!==typeof t?this:this.extend(Class(t))};Function.prototype.expand=function(t,i){if("object"===typeof t){void 0==i&&(i=!1);if(!0===i)for(var e in t)this.prototype[e]=t[e];else this.extend(Class(t));return this}};var Instance={copy:function(t){if(!t||"object"!==typeof t)return t;var i={};t instanceof Array&&(i=[]);for(property in t)i[property]="object"==typeof t[property]?Instance.copy(t[property]):t[property];return i},create:function(t,i){i||(i=[]);var e=t;"string"==typeof t&&(e=getClassByFullName(e));if(!e)return null;var o=e.prototype.create;e.prototype.create=function(){};var s=new e;e.prototype.create=o;s.create&&s.create instanceof Function&&s.create.apply(s,i);return s},JSON:function(t){if(void 0===t)return"undefined";if(null===t)return"null";if(t instanceof Array){var i=[];i.push("[");for(var e=0;e<t.length;e++)i.push(Instance.JSON(t[e])),i.push(", ");1<i.length&&i.pop();i.push("]");return i.join("")}if(t instanceof Function)return t;if("string"===typeof t)return t=t.toString(),t=t.replaceAll("\\","\\\\",!0),t=t.replaceAll('"','\\"',!0),'"'+t+'"';if("number"===typeof t)return Number(t).toString();if("boolean"===typeof t)return Boolean(t).toString();if("object"===typeof t){i=[];i.push("{");for(e in t){var o='"'+e+'":'+Instance.JSON(t[e]);i.push(o);i.push(", ")}1<i.length&&i.pop();i.push("}");return i.join("")}},parse:function(b,c){return b&&"undefined"!=b&&"null"!=b&&""!=b?eval("("+b+")"):c}};Object.create=Object.create||function(){function i(){}return function(t){if(1!=arguments.length)throw Error("Object.create implementation only accepts one parameter.");i.prototype=t;return new i}}();Object.keys=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var i=[],e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i};(function(){for(var s=0,t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),e=Math.max(0,16.7-(i-s)),o=window.setTimeout(function(){t(i+e)},e);s=i+e;return o});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})();var ColorTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff0",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdC",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",value:function(t){if(!t||"string"!=typeof t)return t;var i=t.toLowerCase();return this[i]?this[i]:t}};Function.expand({bind:function(t){var i=this;return function(){return i.apply(t,arguments)}},delay:function(t,i,e){"object"!==typeof t&&(e=i,i=t,t=global);i=i||1;e=e||[];return setTimeout(function(){this.apply(t,e)}.bind(this),i)},interval:function(t,i,e){"object"!==typeof t&&(e=i,i=t,t=global);i=i||1;e=e||[];var o=this;return{intervalId:setInterval(function(){this.apply(t,e)}.bind(this),i),stop:function(){clearInterval(this.intervalId);this.intervalId=void 0},isRunning:function(){return void 0!=this.intervalId},start:function(){this.intervalId=setInterval(function(){o.apply(t,e)},i)}}},animation:function(t,i){"object"!==typeof t&&(i=t,t=global);var e={stopFlag:!1,stop:function(){this.stopFlag=!0}},o=this,s=0,n=Math.ceil(i/16.7),h=function(){!0!==e.stopFlag&&(s++,!1!==o.apply(t,[s,n])&&(s<n||void 0==i)&&window.requestAnimationFrame(h))};h();return e},once:function(t,i){t||(t=global);this.executed||(this.executed=!1);this.executed||(this.apply(t,i),this.executed=!0)}});String.expand({trim:function(){return this.replace(/(^\s*)|(\s*$)/g,"")},replaceAll:function(t,i,e){void 0==e&&(e=!1);if(!t||!i)return this;if(RegExp&&!e)return this.replace(RegExp(t,"g"),i);var o=this.indexOf(t);e=[];for(var s=this;-1!=o;){var o=o+t.length,n=s.substring(0,o),s=s.substring(o),n=n.replace(t,i);e.push(n);o=s.indexOf(t)}""!==s&&e.push(s);return e.join("")},subBetween:function(t,i){if(void 0==t||void 0==i)return"";var e=this.length,o=this.indexOf(t);if(-1==o)return"";o+=t.length;e=this.substring(o,e).indexOf(i);return-1==e?"":this.substring(o,e+o)},isUrl:function(){if(""==this.trim()||!RegExp)return!1;var t=/((((ht|f)tp(s?))\:\/\/)|(www\.))([\w\-]+\.)+\w+[\/\w]*/gi,i=this.toLowerCase();return!!i.match(/(((ht|f)tp(s?))\:\/\/)?(www\.)?([\w\-]+\.)+\w+[\/\w]*/gi)||!!i.match(t)},isEmail:function(){return""==this?!1:!!this.toLowerCase().match(/^([A-Za-z0-9])(\w)+@(\w)+(\.)(com|com\.cn|net|cn|net\.cn|org|biz|info|gov|gov\.cn|edu|edu\.cn)/)},toArray:function(t){t||(t="");return this.split(t)},reverse:function(){var t=this.split("");t.reverse();return t.join("")},equals:function(t){return this.trim()==t.trim()},equalsIgnoreCase:function(t){return this.toLowerCase().trim()==t.toLowerCase().trim()},like:function(t){if(!t)return!1;t=this.toLowerCase().trim();var i=this.toLowerCase().trim();return-1<t.indexOf(i)||-1<i.indexOf(t)},contains:function(t){return-1<this.indexOf(t)},startsWith:function(t){return""===t?!1:this.substr(0,t.length)===t},endsWith:function(t){return""===t?!1:this.substr(-t.length,t.length)===t},isEnglish:function(){return/[\x00-\xff]/.test(this)},overflow:function(t){if(void 0==t)return this.toString();var i=2;/[^\x00-\xff]/.test(this)&&(t=Math.floor(t/2),i=Math.floor(i/2));return this.length-t>i?this.substr(0,t)+"...":this.toString()},remove:function(t){if("string"!=typeof t||!t)return this;var i=this.indexOf(t);if(0>i)return this;t=t.length;return this.substring(0,i)+this.substring(i+t,this.length)},removeStartFrom:function(t){if("string"==typeof t&&t)return t=this.indexOf(t),0>t?this:this.substring(0,t)},cycleToLength:function(t){if(!isNaN(t)){for(var i=parseInt(t/this.length),e=this;0<i;)e+=this,i--;return e.substring(0,t)}},firstUpperCase:function(){return 1>this.length?this:this.substring(0,1).toUpperCase()+this.substring(1)},firstLowerCase:function(){return 1>this.length?this:this.substring(0,1).toLowerCase()+this.substring(1)},extract:function(){if(0==this.length||0==arguments.length)return[];for(var t=[],i=this.toString(),e=0;e<i.length;){for(var o=!1,s=0;s<arguments.length;s++){var n=arguments[s];if(i.substr(e,n.length)==n){t.push(n);e+=n.length;o=!0;break}}o||e++}return t},statics:{format:function(){if(0==arguments.length)return"";if(1==arguments.length)return arguments[0];for(var t=arguments[0],i=t.extract("%s","%d","%f","%b","%o"),e=1;e<arguments.length;e++){var o=arguments[e],s=i[e-1];"%s"==s&&("string"==typeof o?t=t.replace("%s",o):t=t.replace("%s",""));if("%d"==s){isNaN(o)&&(o=0);var n;n="number"==typeof o?-1==Number(o).toString().indexOf("."):!1;n?t=t.replace("%d",o+""):t=t.replace("%d","")}"%f"==s&&(isNaN(o)&&(o=0),"number"==typeof o?t=t.replace("%f",o+""):t=t.replace("%f",""));"%b"==s&&(o=!!o,"boolean"==typeof o?t=t.replace("%b",o+""):t=t.replace("%b",""));"%o"==s&&("object"==typeof o?t=t.replace("%o",Instance.JSON(o)):t=t.replace("%o",""))}return t},toUtf8:function(t){if(!t)return"";var i,e,o=[],s=t.length;for(i=0;i<s;i++)e=t.charCodeAt(i),0<e&&127>=e?o.push(t.charAt(i)):128<=e&&2047>=e?o.push(String.fromCharCode(192|e>>6&31),String.fromCharCode(128|e&63)):2048<=e&&65535>=e&&o.push(String.fromCharCode(224|e>>12&15),String.fromCharCode(128|e>>6&63),String.fromCharCode(128|e&63));return o.join("")},parseUtf8:function(t){if(!t)return"";var i,e,o,s=[],n=t.length;for(i=0;i<n;i++)e=[],e.push(t.charCodeAt(i)),0==(e[0]>>7&255)?s.push(t.charAt(i)):6==(e[0]>>5&255)?(e.push(t.charCodeAt(++i)),o=[],o.push(e[0]&31),o.push(e[1]&63),s.push(String.fromCharCode(o[0]<<6|o[1]))):14==(e[0]>>4&255)&&(e.push(t.charCodeAt(++i)),e.push(t.charCodeAt(++i)),o=[],o.push(e[0]<<4|e[1]>>2&15),o.push((e[1]&3)<<6|e[2]&63),s.push(String.fromCharCode(o[0]<<8|o[1])));return s.join("")}}});Array.expand({remove:function(t){return isNaN(t)||t>this.length?!1:this.splice(t,1)[0]},indexOf:function(t){for(var i=0;i<this.length;i++)if(this[i]===t)return i;return-1},removeElement:function(t){t=this.indexOf(t);-1<t&&this.remove(t)},lastIndexOf:function(t){for(var i=-1,e=0;e<this.length;e++)this[e]===t&&(i=e);return i},statics:{isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)}}});Date.expand({format:function(t,i){i=i||!0;var e={"y+":this.getYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in e)RegExp("("+o+")").test(t)&&(t=!0===i?t.replace(RegExp.$1,e[o]):t.replace(RegExp.$1,1==RegExp.$1.length?e[o]:("00"+e[o]).substr((""+e[o]).length)));return t},statics:{now:function(){return(new Date).getTime()}}});Number.expand({statics:{between:function(t,i,e){if(isNaN(t)||isNaN(i)||isNaN(e))return t;var o=Math.min(i,e);i=Math.max(i,e);t<o&&(t=o);t>i&&(t=i);return t},isBetween:function(t,i,e){if(isNaN(i)||isNaN(e)||isNaN(t))return!1;var o=Math.min(i,e);i=Math.max(i,e);return t>=o&&t<=i?!0:!1},fixed:function(t,i){if(isNaN(t))return t;isNaN(i)&&(i=0);var e=Math.pow(10,i);return Math.round(t*e)/e},decimals:function(t){if(isNaN(t))return-1;t=Number(t).toString();var i=t.indexOf(".");return-1==i?0:t.length-i-1},random:function(t,i,e){if(isNaN(t)||isNaN(i))return 0;void 0==e&&Number.decimals(t)==Number.decimals(i)&&(e=Number.decimals(t));var o=Math.min(t,i);t=Math.max(t,i);i=Math.random();o+=(t-o)*i;return!e||0>e||isNaN(e)?Math.floor(o):Number.fixed(o,e)}}});var Color=function(t){t&&"object"==typeof t&&t.toString&&(t=t.toString());return{value:ColorTable.value(t),toString:function(){function t(t,i,e){if(t.length<e&&t.length>i)for(;t.length<e;)t="0"+t;return t}var i=this.value;i||(i=0);if("string"==typeof i){if(0==i.indexOf("#"))return i;if(0==i.indexOf("0x"))return i.replace("0x","#")}i=parseInt(i);i=0>i?Number(0):i;i=i.toString(16);8<i.length&&(i=i.substr(0,8));i=t(i,6,8);i=t(i,0,6);return"#"+i},valueOf:toString,split:function(){var t={r:0,g:0,b:0,a:255};if(!this.value)return t;var i=this.toString(),e="FF",o="FF",s="FF",n="FF";switch(i.length){case 9:n=i.substr(1,2);e=i.substr(3,2);o=i.substr(5,2);s=i.substr(7,2);break;case 7:e=i.substr(1,2);o=i.substr(3,2);s=i.substr(5,2);break;case 4:e=i.substr(1,1);o=i.substr(2,1);s=i.substr(3,1);e+=e;o+=o;s+=s;break;default:return t}return{r:parseInt(e,16),g:parseInt(o,16),b:parseInt(s,16),a:parseInt(n,16)}},add:function(t){var i;i="object"==typeof t?t:{r:t,g:t,b:t,a:1};var e=this.split();t=Number.between(e.r+i.r,0,255).toString(16).toUpperCase();var o=Number.between(e.g+i.g,0,255).toString(16).toUpperCase();i=Number.between(e.b+i.b,0,255).toString(16).toUpperCase();e=Number(e.a).toString(16).toUpperCase();t=1>=t.length?"0"+t:t;o=1>=o.length?"0"+o:o;i=1>=i.length?"0"+i:i;e=1>=e.length?"0"+e:e;return"FF"==e?"#"+t+o+i:"#"+e+t+o+i},reduce:function(t){return this.add("object"==typeof t?t:{r:-t,g:-t,b:-t,a:1})},rgba:function(t){var i=this.split();t=void 0==t||""===t?i.a:parseFloat(t);1<t&&(t=Number.fixed(t/255,2));return String.format("rgba(%d,%d,%d,%f)",i.r,i.g,i.b,t)},equals:function(t){return this.toString()==Color(t).toString()},difference:function(t){var i=this.split();t=Color(t).split();return{r:Math.abs(i.r-t.r),g:Math.abs(i.g-t.g),b:Math.abs(i.b-t.b),a:Math.abs(i.a-t.a)}},reverse:function(){var t=this.split(),i=Number.between(255-t.r,0,255).toString(16).toUpperCase(),e=Number.between(255-t.g,0,255).toString(16).toUpperCase(),o=Number.between(255-t.b,0,255).toString(16).toUpperCase(),t=Number(t.a).toString(16).toUpperCase(),i=1>=i.length?"0"+i:i,e=1>=e.length?"0"+e:e,o=1>=o.length?"0"+o:o,t=1>=t.length?"0"+t:t;return"FF"==t?"#"+i+e+o:"#"+t+i+e+o}}};function colorSplit(t){return Color(t).split()}function colorAdd(t,i){return Color(t).add(i)}function colorDiv(t,i){return Color(t).reduce(i)}function equals(t,i){return 1e-7>Math.abs(t-i)}var Point=function(t,i){return{x:t,y:i,isNearTo:function(t,i){if(!t)return!1;void 0==i&&(i=5);return Math.abs(this.x-t.x)<i&&Math.abs(this.y-t.y)<i},equals:function(t){return t?equals(this.x,t.x)&&equals(this.y,t.y):!1},toString:function(){return"("+this.x+","+this.y+")"},clone:function(){return Point(this.x,this.y)},getX:function(){return this.x},getY:function(){return this.y},isNaP:function(){return isNaN(this.x)||isNaN(this.y)}}};Point.NaP=function(){return Point(Number.NaN,Number.NaN)};$.browser.mozilla&&(HTMLElement.prototype.__defineGetter__("innerText",function(){return this.textContent}),HTMLElement.prototype.__defineSetter__("innerText",function(t){this.textContent=t}));bdor[30]=function(t,i){return bdor[t]-i};Class("RangeSlider",{create:function(t,i){this.slider=t;this.min=0;this.max=i.max?i.max:1;isNaN(this.max)&&(this.max=100);this.onChange=i.onChange;this.init();void 0==i.range||isNaN(i.range)?(this.currentRange=0,this.setRange(0)):(this.currentRange=i.range,this.setRange(i.range))},init:function(){this.slider_total=$('<div class="slider-total"></div>');this.slider_range=$('<div class="slider-range"></div>');this.slider_hander=$('<div class="slider-handle"></div>');this.slider_range.css("pointer-events","none");this.slider_hander.css("pointer-events","none");this.slider.append(this.slider_total);this.slider.append(this.slider_range);this.slider.append(this.slider_hander);this.initEvents()},initEvents:function(){this.isMouseDown=!1;this.slider_total.bind(_event._down,function(t){this.isMouseDown=!0;t=isTouch?t.originalEvent?t.originalEvent.changedTouches:t.changedTouches:[t];this.onChangeRange(t);return!1}.bind(this));this.slider_total.bind(_event._move,function(t){if(this.isMouseDown)return t=isTouch?t.originalEvent?t.originalEvent.changedTouches:t.changedTouches:[t],this.onChangeRange(t),!1}.bind(this));this.slider_total.bind(_event._up,function(t){return this.isMouseDown=!1}.bind(this));this.slider_total.bind(_event._leave,function(t){this.isMouseDown=!1}.bind(this));this.slider_hander.bind(_event._down,function(t){t=isTouch?t.originalEvent?t.originalEvent.changedTouches:t.changedTouches:[t];this.onChangeRange(t);return!1}.bind(this))},setMax:function(t){this.max=t},setRange:function(t){if(void 0!=t){this.range=parseFloat(t);this.animation&&this.animation.stop();var e=this.currentRange,o=this.range;this.animation=function(t,i){this.currentRange=$.easing.swing(null,t,e,o-e,i);this.moveToRange(this.currentRange);this.currentRange==this.range&&this.animation&&this.animation.stop()}.animation(this,200)}},onChangeRange:virtual_function,moveToRange:virtual_function});Class("VerticalSlider",{onChangeRange:function(t){t=t[0];if(void 0!=t){var i=$(t.target),e=t.offsetY;void 0==e&&(e=t.pageY-i.offset().top);t=(i.height()-e)/this.slider_total.height()*this.max;this.setRange(t);if(this.onChange)this.onChange(t)}},moveToRange:function(t){this.slider_total.offset();this.slider.offset();var i=parseInt(this.slider_range.css("bottom").replace("px","")),e=this.slider_hander.width(),o=this.slider_total.height()-e;t=Math.floor(t*o/this.max);t=Math.min(t,o);e=t+e/2;this.slider_hander.css({bottom:t+i});this.slider_range.css({height:e})}}).extend("RangeSlider");Class("HorizontalSlider",{onChangeRange:function(t){t=t[0];if(void 0!=t){var i=$(t.target),e=t.offsetX;void 0==e&&(e=t.pageX-i.offset().left);t=e/this.slider_total.width()*this.max;this.setRange(t);if(this.onChange)this.onChange(t)}},moveToRange:function(t){var i=this.slider_total.offset().left-this.slider.offset().left;parseInt(this.slider_range.css("bottom").replace("px",""));var e=this.slider_hander.width(),o=this.slider_total.width()-e;t=Math.floor(t*o/this.max);t=Math.min(t,o);e=t+e/2;this.slider_hander.css({left:t+i});this.slider_range.css({width:e})}}).extend("RangeSlider");(function(t){t.fn.slider=function(t){if(t){this.empty();var i=null;(i="horizontal"==t.direction?new HorizontalSlider(this,t):new VerticalSlider(this,t))||(i=new HorizontalSlider(this,t));return i}}})(jQuery);(function(t){var i="object"==typeof exports&&exports,e="object"==typeof module&&module&&module.exports==i&&module,o="object"==typeof global&&global;if(o.global===o||o.window===o)t=o;var r=function(t){this.message=t};r.prototype=Error();r.prototype.name="InvalidCharacterError";var s={encode:function(t){t=String(t);if(/[^\0-\xFF]/.test(t))throw new r("The string to be encoded contains characters outside of the Latin1 range.");for(var i=t.length%3,e="",o=-1,s,n,h,a=t.length-i;++o<a;)s=t.charCodeAt(o)<<16,n=t.charCodeAt(++o)<<8,h=t.charCodeAt(++o),s=s+n+h,e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s&63);2==i?(s=t.charCodeAt(o)<<8,n=t.charCodeAt(++o),s+=n,e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>10)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>4&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s<<2&63)+"="):1==i&&(s=t.charCodeAt(o),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s<<4&63)+"==");return e},decode:function(t){t=String(t);for(var i=t.length,e=0,o,s,n="",h=-1;++h<i;)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t.charAt(h)),o=e%4?64*o+s:s,e++%4&&(n+=String.fromCharCode(255&o>>(-2*e&6)));return n},version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return s});else if(i&&!i.nodeType)if(e)e.exports=s;else for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n]);else t.base64=s})(this);function parsHexToNormalString(t){for(var i="";2<=t.length;)i+=String.fromCharCode(parseInt(t.substring(0,2),16)),t=t.substring(2,t.length);return i}function parseHexString(t){for(var i=[];2<=t.length;)i.push(parseInt(t.substring(0,2),16)),t=t.substring(2,t.length);return i}function byteArray2String(t){for(var i="",e=0;e<t.length;e++)i+=String.fromCharCode(t[e]);return i}function rc4(t,i){for(var e=[],o=[],s=0;256>s;s++)e[s]=s,o[s]=t.charCodeAt(s%t.length);for(var n=0,s=0;256>s;s++){var n=n+e[s]+o[s]&255,h=e[s];e[s]=e[n];e[n]=h}for(var a=n=o=0,r,h="",s=0;s<i.length;s++)o=o+1&255,n=n+e[o]&255,a=e[o],e[o]=e[n],e[n]=a,a=e[o]+e[n]&255,r=i.charCodeAt(s),r^=e[a],h+=String.fromCharCode(r);return h}String.prototype.MD5=function(t){function a(t,i){var e,o,s,n,h;s=t&2147483648;n=i&2147483648;e=t&1073741824;o=i&1073741824;h=(t&1073741823)+(i&1073741823);return e&o?h^2147483648^s^n:e|o?h&1073741824?h^3221225472^s^n:h^1073741824^s^n:h^s^n}function i(t,i,e,o,s,n,h){t=a(t,a(a(i&e|~i&o,s),h));return a(t<<n|t>>>32-n,i)}function e(t,i,e,o,s,n,h){t=a(t,a(a(i&o|e&~o,s),h));return a(t<<n|t>>>32-n,i)}function o(t,i,e,o,s,n,h){t=a(t,a(a(i^e^o,s),h));return a(t<<n|t>>>32-n,i)}function s(t,i,e,o,s,n,h){t=a(t,a(a(e^(i|~o),s),h));return a(t<<n|t>>>32-n,i)}function n(t){var i="",e="",o;for(o=0;3>=o;o++)e=t>>>8*o&255,e="0"+e.toString(16),i+=e.substr(e.length-2,2);return i}var h=[],r,l,g,d,c,p,u,f,m,h=function(t){var i,e=t.length;i=e+8;for(var o=16*((i-i%64)/64+1),s=Array(o-1),n=0,h=0;h<e;)i=(h-h%4)/4,n=h%4*8,s[i]|=t.charCodeAt(h)<<n,h++;i=(h-h%4)/4;s[i]|=128<<h%4*8;s[o-2]=e<<3;s[o-1]=e>>>29;return s}(this);p=1732584193;u=4023233417;f=2562383102;m=271733878;for(r=0;r<h.length;r+=16)l=p,g=u,d=f,c=m,p=i(p,u,f,m,h[r+0],7,3614090360),m=i(m,p,u,f,h[r+1],12,3905402710),f=i(f,m,p,u,h[r+2],17,606105819),u=i(u,f,m,p,h[r+3],22,3250441966),p=i(p,u,f,m,h[r+4],7,4118548399),m=i(m,p,u,f,h[r+5],12,1200080426),f=i(f,m,p,u,h[r+6],17,2821735955),u=i(u,f,m,p,h[r+7],22,4249261313),p=i(p,u,f,m,h[r+8],7,1770035416),m=i(m,p,u,f,h[r+9],12,2336552879),f=i(f,m,p,u,h[r+10],17,4294925233),u=i(u,f,m,p,h[r+11],22,2304563134),p=i(p,u,f,m,h[r+12],7,1804603682),m=i(m,p,u,f,h[r+13],12,4254626195),f=i(f,m,p,u,h[r+14],17,2792965006),u=i(u,f,m,p,h[r+15],22,1236535329),p=e(p,u,f,m,h[r+1],5,4129170786),m=e(m,p,u,f,h[r+6],9,3225465664),f=e(f,m,p,u,h[r+11],14,643717713),u=e(u,f,m,p,h[r+0],20,3921069994),p=e(p,u,f,m,h[r+5],5,3593408605),m=e(m,p,u,f,h[r+10],9,38016083),f=e(f,m,p,u,h[r+15],14,3634488961),u=e(u,f,m,p,h[r+4],20,3889429448),p=e(p,u,f,m,h[r+9],5,568446438),m=e(m,p,u,f,h[r+14],9,3275163606),f=e(f,m,p,u,h[r+3],14,4107603335),u=e(u,f,m,p,h[r+8],20,1163531501),p=e(p,u,f,m,h[r+13],5,2850285829),m=e(m,p,u,f,h[r+2],9,4243563512),f=e(f,m,p,u,h[r+7],14,1735328473),u=e(u,f,m,p,h[r+12],20,2368359562),p=o(p,u,f,m,h[r+5],4,4294588738),m=o(m,p,u,f,h[r+8],11,2272392833),f=o(f,m,p,u,h[r+11],16,1839030562),u=o(u,f,m,p,h[r+14],23,4259657740),p=o(p,u,f,m,h[r+1],4,2763975236),m=o(m,p,u,f,h[r+4],11,1272893353),f=o(f,m,p,u,h[r+7],16,4139469664),u=o(u,f,m,p,h[r+10],23,3200236656),p=o(p,u,f,m,h[r+13],4,681279174),m=o(m,p,u,f,h[r+0],11,3936430074),f=o(f,m,p,u,h[r+3],16,3572445317),u=o(u,f,m,p,h[r+6],23,76029189),p=o(p,u,f,m,h[r+9],4,3654602809),m=o(m,p,u,f,h[r+12],11,3873151461),f=o(f,m,p,u,h[r+15],16,530742520),u=o(u,f,m,p,h[r+2],23,3299628645),p=s(p,u,f,m,h[r+0],6,4096336452),m=s(m,p,u,f,h[r+7],10,1126891415),f=s(f,m,p,u,h[r+14],15,2878612391),u=s(u,f,m,p,h[r+5],21,4237533241),p=s(p,u,f,m,h[r+12],6,1700485571),m=s(m,p,u,f,h[r+3],10,2399980690),f=s(f,m,p,u,h[r+10],15,4293915773),u=s(u,f,m,p,h[r+1],21,2240044497),p=s(p,u,f,m,h[r+8],6,1873313359),m=s(m,p,u,f,h[r+15],10,4264355552),f=s(f,m,p,u,h[r+6],15,2734768916),u=s(u,f,m,p,h[r+13],21,1309151649),p=s(p,u,f,m,h[r+4],6,4149444226),m=s(m,p,u,f,h[r+11],10,3174756917),f=s(f,m,p,u,h[r+2],15,718787259),u=s(u,f,m,p,h[r+9],21,3951481745),p=a(p,l),u=a(u,g),f=a(f,d),m=a(m,c);return 32==t?n(p)+n(u)+n(f)+n(m):n(u)+n(f)};function QR8bitByte(t){this.mode=QRMode.MODE_8BIT_BYTE;this.data=t}QR8bitByte.prototype={getLength:function(t){return this.data.length},write:function(t){for(var i=0;i<this.data.length;i++)t.put(this.data.charCodeAt(i),8)}};function QRCode(t,i){this.typeNumber=t;this.errorCorrectLevel=i;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}QRCode.prototype={addData:function(t){t=new QR8bitByte(t);this.dataList.push(t);this.dataCache=null},isDark:function(t,i){if(0>t||this.moduleCount<=t||0>i||this.moduleCount<=i)throw Error(t+","+i);return this.modules[t][i]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var t=1,t=1;40>t;t++){for(var i=QRRSBlock.getRSBlocks(t,this.errorCorrectLevel),e=new QRBitBuffer,o=0,s=0;s<i.length;s++)o+=i[s].dataCount;for(s=0;s<this.dataList.length;s++)i=this.dataList[s],e.put(i.mode,4),e.put(i.getLength(),QRUtil.getLengthInBits(i.mode,t)),i.write(e);if(e.getLengthInBits()<=8*o)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,i){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++){this.modules[e]=Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[e][o]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(t,i);7<=this.typeNumber&&this.setupTypeNumber(t);null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,i)},setupPositionProbePattern:function(t,i){for(var e=-1;7>=e;e++)if(!(-1>=t+e||this.moduleCount<=t+e))for(var o=-1;7>=o;o++)-1>=i+o||this.moduleCount<=i+o||(this.modules[t+e][i+o]=0<=e&&6>=e&&(0==o||6==o)||0<=o&&6>=o&&(0==e||6==e)||2<=e&&4>=e&&2<=o&&4>=o?!0:!1)},getBestMaskPattern:function(){for(var t=0,i=0,e=0;8>e;e++){this.makeImpl(!0,e);var o=QRUtil.getLostPoint(this);if(0==e||t>o)t=o,i=e}return i},createMovieClip:function(t,i,e){t=t.createEmptyMovieClip(i,e);this.make();for(i=0;i<this.modules.length;i++){e=1*i;for(var o=0;o<this.modules[i].length;o++){var s=1*o;this.modules[i][o]&&(t.beginFill(0,100),t.moveTo(s,e),t.lineTo(s+1,e),t.lineTo(s+1,e+1),t.lineTo(s,e+1),t.endFill())}}return t},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2);for(t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var t=QRUtil.getPatternPosition(this.typeNumber),i=0;i<t.length;i++)for(var e=0;e<t.length;e++){var o=t[i],s=t[e];if(null==this.modules[o][s])for(var n=-2;2>=n;n++)for(var h=-2;2>=h;h++)this.modules[o+n][s+h]=-2==n||2==n||-2==h||2==h||0==n&&0==h?!0:!1}},setupTypeNumber:function(t){for(var i=QRUtil.getBCHTypeNumber(this.typeNumber),e=0;18>e;e++){var o=!t&&1==(i>>e&1);this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=o}for(e=0;18>e;e++)o=!t&&1==(i>>e&1),this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=o},setupTypeInfo:function(t,i){for(var e=QRUtil.getBCHTypeInfo(this.errorCorrectLevel<<3|i),o=0;15>o;o++){var s=!t&&1==(e>>o&1);6>o?this.modules[o][8]=s:8>o?this.modules[o+1][8]=s:this.modules[this.moduleCount-15+o][8]=s}for(o=0;15>o;o++)s=!t&&1==(e>>o&1),8>o?this.modules[8][this.moduleCount-o-1]=s:9>o?this.modules[8][15-o-1+1]=s:this.modules[8][15-o-1]=s;this.modules[this.moduleCount-8][8]=!t},mapData:function(t,i){for(var e=-1,o=this.moduleCount-1,s=7,n=0,h=this.moduleCount-1;0<h;h-=2)for(6==h&&h--;;){for(var a=0;2>a;a++)if(null==this.modules[o][h-a]){var r=!1;n<t.length&&(r=1==(t[n]>>>s&1));QRUtil.getMask(i,o,h-a)&&(r=!r);this.modules[o][h-a]=r;s--;-1==s&&(n++,s=7)}o+=e;if(0>o||this.moduleCount<=o){o-=e;e=-e;break}}}};QRCode.PAD0=236;QRCode.PAD1=17;QRCode.createData=function(t,i,e){i=QRRSBlock.getRSBlocks(t,i);for(var o=new QRBitBuffer,s=0;s<e.length;s++){var n=e[s];o.put(n.mode,4);o.put(n.getLength(),QRUtil.getLengthInBits(n.mode,t));n.write(o)}for(s=t=0;s<i.length;s++)t+=i[s].dataCount;if(o.getLengthInBits()>8*t)throw Error("code length overflow. ("+o.getLengthInBits()+">"+8*t+")");for(o.getLengthInBits()+4<=8*t&&o.put(0,4);0!=o.getLengthInBits()%8;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*t);){o.put(QRCode.PAD0,8);if(o.getLengthInBits()>=8*t)break;o.put(QRCode.PAD1,8)}return QRCode.createBytes(o,i)};QRCode.createBytes=function(t,i){for(var e=0,o=0,s=0,n=Array(i.length),h=Array(i.length),a=0;a<i.length;a++){var r=i[a].dataCount,l=i[a].totalCount-r,o=Math.max(o,r),s=Math.max(s,l);n[a]=Array(r);for(var g=0;g<n[a].length;g++)n[a][g]=255&t.buffer[g+e];e+=r;g=QRUtil.getErrorCorrectPolynomial(l);r=new QRPolynomial(n[a],g.getLength()-1).mod(g);h[a]=Array(g.getLength()-1);for(g=0;g<h[a].length;g++)l=g+r.getLength()-h[a].length,h[a][g]=0<=l?r.get(l):0}for(g=a=0;g<i.length;g++)a+=i[g].totalCount;e=Array(a);for(g=r=0;g<o;g++)for(a=0;a<i.length;a++)g<n[a].length&&(e[r++]=n[a][g]);for(g=0;g<s;g++)for(a=0;a<i.length;a++)g<h[a].length&&(e[r++]=h[a][g]);return e};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var i=t<<10;0<=QRUtil.getBCHDigit(i)-QRUtil.getBCHDigit(QRUtil.G15);)i^=QRUtil.G15<<QRUtil.getBCHDigit(i)-QRUtil.getBCHDigit(QRUtil.G15);return(t<<10|i)^QRUtil.G15_MASK},getBCHTypeNumber:function(t){for(var i=t<<12;0<=QRUtil.getBCHDigit(i)-QRUtil.getBCHDigit(QRUtil.G18);)i^=QRUtil.G18<<QRUtil.getBCHDigit(i)-QRUtil.getBCHDigit(QRUtil.G18);return t<<12|i},getBCHDigit:function(t){for(var i=0;0!=t;)i++,t>>>=1;return i},getPatternPosition:function(t){return QRUtil.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,i,e){switch(t){case QRMaskPattern.PATTERN000:return 0==(i+e)%2;case QRMaskPattern.PATTERN001:return 0==i%2;case QRMaskPattern.PATTERN010:return 0==e%3;case QRMaskPattern.PATTERN011:return 0==(i+e)%3;case QRMaskPattern.PATTERN100:return 0==(Math.floor(i/2)+Math.floor(e/3))%2;case QRMaskPattern.PATTERN101:return 0==i*e%2+i*e%3;case QRMaskPattern.PATTERN110:return 0==(i*e%2+i*e%3)%2;case QRMaskPattern.PATTERN111:return 0==(i*e%3+(i+e)%2)%2;default:throw Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var i=new QRPolynomial([1],0),e=0;e<t;e++)i=i.multiply(new QRPolynomial([1,QRMath.gexp(e)],0));return i},getLengthInBits:function(t,i){if(1<=i&&10>i)switch(t){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw Error("mode:"+t)}else if(27>i)switch(t){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw Error("mode:"+t)}else if(41>i)switch(t){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw Error("mode:"+t)}else throw Error("type:"+i)},getLostPoint:function(t){for(var i=t.getModuleCount(),e=0,o=0;o<i;o++)for(var s=0;s<i;s++){for(var n=0,h=t.isDark(o,s),a=-1;1>=a;a++)if(!(0>o+a||i<=o+a))for(var r=-1;1>=r;r++)0>s+r||i<=s+r||0==a&&0==r||h!=t.isDark(o+a,s+r)||n++;5<n&&(e+=3+n-5)}for(o=0;o<i-1;o++)for(s=0;s<i-1;s++)if(n=0,t.isDark(o,s)&&n++,t.isDark(o+1,s)&&n++,t.isDark(o,s+1)&&n++,t.isDark(o+1,s+1)&&n++,0==n||4==n)e+=3;for(o=0;o<i;o++)for(s=0;s<i-6;s++)t.isDark(o,s)&&!t.isDark(o,s+1)&&t.isDark(o,s+2)&&t.isDark(o,s+3)&&t.isDark(o,s+4)&&!t.isDark(o,s+5)&&t.isDark(o,s+6)&&(e+=40);for(s=0;s<i;s++)for(o=0;o<i-6;o++)t.isDark(o,s)&&!t.isDark(o+1,s)&&t.isDark(o+2,s)&&t.isDark(o+3,s)&&t.isDark(o+4,s)&&!t.isDark(o+5,s)&&t.isDark(o+6,s)&&(e+=40);for(s=n=0;s<i;s++)for(o=0;o<i;o++)t.isDark(o,s)&&n++;t=Math.abs(100*n/i/i-50)/5;return e+10*t}},QRMath={glog:function(t){if(1>t)throw Error("glog("+t+")");return QRMath.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;256<=t;)t-=255;return QRMath.EXP_TABLE[t]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;function QRPolynomial(t,i){if(void 0==t.length)throw Error(t.length+"/"+i);for(var e=0;e<t.length&&0==t[e];)e++;this.num=Array(t.length-e+i);for(var o=0;o<t.length-e;o++)this.num[o]=t[o+e]}QRPolynomial.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var i=Array(this.getLength()+t.getLength()-1),e=0;e<this.getLength();e++)for(var o=0;o<t.getLength();o++)i[e+o]^=QRMath.gexp(QRMath.glog(this.get(e))+QRMath.glog(t.get(o)));return new QRPolynomial(i,0)},mod:function(t){if(0>this.getLength()-t.getLength())return this;for(var i=QRMath.glog(this.get(0))-QRMath.glog(t.get(0)),e=Array(this.getLength()),o=0;o<this.getLength();o++)e[o]=this.get(o);for(o=0;o<t.getLength();o++)e[o]^=QRMath.gexp(QRMath.glog(t.get(o))+i);return new QRPolynomial(e,0).mod(t)}};function QRRSBlock(t,i){this.totalCount=t;this.dataCount=i}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(t,i){var e=QRRSBlock.getRsBlockTable(t,i);if(void 0==e)throw Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+i);for(var o=e.length/3,s=[],n=0;n<o;n++)for(var h=e[3*n+0],a=e[3*n+1],r=e[3*n+2],l=0;l<h;l++)s.push(new QRRSBlock(a,r));return s};QRRSBlock.getRsBlockTable=function(t,i){switch(i){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(t-1)+3]}};function QRBitBuffer(){this.buffer=[];this.length=0}QRBitBuffer.prototype={get:function(t){return 1==(this.buffer[Math.floor(t/8)]>>>7-t%8&1)},put:function(t,i){for(var e=0;e<i;e++)this.putBit(1==(t>>>i-e-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0);t&&(this.buffer[i]|=128>>>this.length%8);this.length++}};(function(r){r.fn.qrcode=function(l){"string"===typeof l&&(l={text:l});l=r.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},l);var a=function(){var t=new QRCode(l.typeNumber,l.correctLevel);t.addData(l.text);t.make();var i=document.createElement("canvas");i.width=l.width;i.height=l.height;for(var e=i.getContext("2d"),o=l.width/t.getModuleCount(),s=l.height/t.getModuleCount(),n=0;n<t.getModuleCount();n++)for(var h=0;h<t.getModuleCount();h++){e.fillStyle=t.isDark(n,h)?l.foreground:l.background;var a=Math.ceil((h+1)*o)-Math.floor(h*o),r=Math.ceil((n+1)*o)-Math.floor(n*o);e.fillRect(Math.round(h*o),Math.round(n*s),a,r)}return i};return this.each(function(){var t="";if("canvas"==l.render)t=a();else{if("image"==l.render){var t=a(),i=new Image;i.src=t.toDataURL("image/png")}else{t=new QRCode(l.typeNumber,l.correctLevel);t.addData(l.text);t.make();for(var i=r("<table></table>").css("width",l.width+"px").css("height",l.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",l.background),e=l.width/t.getModuleCount(),o=l.height/t.getModuleCount(),s=0;s<t.getModuleCount();s++)for(var n=r("<tr></tr>").css("height",o+"px").appendTo(i),h=0;h<t.getModuleCount();h++)r("<td></td>").css("width",e+"px").css("background-color",t.isDark(s,h)?l.foreground:l.background).appendTo(n)}t=i}jQuery(t).appendTo(this)})}})(jQuery);!function(s,o,t,l){function e(t,i,e){return Array.isArray(t)?(n(t,e[i],e),!0):!1}function n(t,i,e){var o;if(t)if(t.forEach)t.forEach(i,e);else if(t.length!==l)for(o=0;o<t.length;)i.call(e,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&i.call(e,t[o],o,t)}function i(e,t,i){var o="DEPRECATED METHOD: "+t+"\n"+i+" AT \n";return function(){var t=Error("get-stack-trace"),t=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=s.console&&(s.console.warn||s.console.log);return i&&i.call(s.console,o,t),e.apply(this,arguments)}}function h(t,i,e){var o=i.prototype;i=t.prototype=Object.create(o);i.constructor=t;i._super=o;e&&$(i,e)}function a(t,i){return function(){return t.apply(i,arguments)}}function r(t,i){return typeof t==tt?t.apply(i?i[0]||l:l,i):t}function g(i,t,e){n(p(t),function(t){"undefined"!=typeof window.addEventListener?i.addEventListener(t,e,!1):i.attachEvent(t,e)})}function d(i,t,e){n(p(t),function(t){"undefined"!=typeof window.removeEventListener?i.removeEventListener(t,e,!1):i.detachEvent(t,e)})}function c(t,i){for(;t;){if(t==i)return!0;t=t.parentNode}return!1}function p(t){return t.trim().split(/\s+/g)}function u(t,i,e){if(t.indexOf&&!e)return t.indexOf(i);for(var o=0;o<t.length;){if(e&&t[o][e]==i||!e&&t[o]===i)return o;o++}return-1}function f(t){return Array.prototype.slice.call(t,0)}function m(t,e,i){for(var o=[],s=[],n=0;n<t.length;){var h=e?t[n][e]:t[n];0>u(s,h)&&o.push(t[n]);s[n]=h;n++}return i&&(o=e?o.sort(function(t,i){return t[e]>i[e]}):o.sort()),o}function b(t,i){if(i&&i[0]){for(var e,o,s=i[0].toUpperCase()+i.slice(1),n=0;n<q.length;){if(e=q[n],o=e?e+s:i,o in t)return o;n++}return l}}function w(t){t=t.ownerDocument||t;return t.defaultView||t.parentWindow||s}function x(i,t){var e=this;this.manager=i;this.callback=t;this.element=i.element;this.target=i.options.inputTarget;this.domHandler=function(t){r(i.options.enable,[i])&&e.handler(t)};this.init()}function v(t){var i=t.options.inputClass;return new(i?i:lt?I:gt?M:rt?W:S)(t,C)}function C(t,i,e){var o=e.pointers.length,s=e.changedPointers.length,n=i&ct&&0===o-s,o=i&(ut|ft)&&0===o-s;e.isFirst=!!n;e.isFinal=!!o;n&&(t.session={});e.eventType=i;i=t.session;n=e.pointers;o=n.length;i.firstInput||(i.firstInput=k(e));1<o&&!i.firstMultiple?i.firstMultiple=k(e):1===o&&(i.firstMultiple=!1);var s=i.firstInput,h=(o=i.firstMultiple)?o.center:s.center,a=e.center=A(n);e.timeStamp=ot();e.deltaTime=e.timeStamp-s.timeStamp;e.angle=P(h,a);e.distance=B(h,a);var s=e.center,h=i.offsetDelta||{},a=i.prevDelta||{},r=i.prevInput||{};e.eventType!==ct&&r.eventType!==ut||(a=i.prevDelta={x:r.deltaX||0,y:r.deltaY||0},h=i.offsetDelta={x:s.x,y:s.y});e.deltaX=a.x+(s.x-h.x);e.deltaY=a.y+(s.y-h.y);e.offsetDirection=y(e.deltaX,e.deltaY);s=e.deltaX/e.deltaTime||0;h=e.deltaY/e.deltaTime||0;e.overallVelocityX=s;e.overallVelocityY=h;e.overallVelocity=et(s)>et(h)?s:h;e.scale=o?B(n[0],n[1],Bt)/B(o.pointers[0],o.pointers[1],Bt):1;e.rotation=o?P(n[1],n[0],Bt)+P(o.pointers[1],o.pointers[0],Bt):0;e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length;h=i.lastInterval||e;n=e.timeStamp-h.timeStamp;e.eventType!=ft&&(n>dt||h.velocity===l)?(s=e.deltaX-h.deltaX,h=e.deltaY-h.deltaY,a=s/n||0,r=h/n||0,n=a,o=r,a=et(a)>et(r)?a:r,s=y(s,h),i.lastInterval=e):(a=h.velocity,n=h.velocityX,o=h.velocityY,s=h.direction);e.velocity=a;e.velocityX=n;e.velocityY=o;e.direction=s;i=t.element;c(e.srcEvent.target,i)&&(i=e.srcEvent.target);e.target=i;t.emit("hammer.input",e);t.recognize(e);t.session.prevInput=e}function k(t){for(var i=[],e=0;e<t.pointers.length;)i[e]={clientX:it(t.pointers[e].clientX),clientY:it(t.pointers[e].clientY)},e++;return{timeStamp:ot(),pointers:i,center:A(i),deltaX:t.deltaX,deltaY:t.deltaY}}function A(t){var i=t.length;if(1===i)return{x:it(t[0].clientX),y:it(t[0].clientY)};for(var e=0,o=0,s=0;i>s;)e+=t[s].clientX,o+=t[s].clientY,s++;return{x:it(e/i),y:it(o/i)}}function y(t,i){return t===i?mt:et(t)>=et(i)?0>t?bt:wt:0>i?xt:vt}function B(t,i,e){e||(e=yt);var o=i[e[0]]-t[e[0]];t=i[e[1]]-t[e[1]];return Math.sqrt(o*o+t*t)}function P(t,i,e){e||(e=yt);return 180*Math.atan2(i[e[1]]-t[e[1]],i[e[0]]-t[e[0]])/Math.PI}function S(){this.evEl=St;this.evWin=It;this.pressed=!1;x.apply(this,arguments)}function I(){this.evEl=Lt;this.evWin=Wt;x.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function T(){this.evTarget=Ft;this.evWin=Et;this.started=!1;x.apply(this,arguments)}function M(){this.evTarget=Dt;this.targetIds={};x.apply(this,arguments)}function L(t,i){var e=f(t.touches),o=this.targetIds;if(i&(ct|pt)&&1===e.length)return o[e[0].identifier]=!0,[e,e];var s,n=f(t.changedTouches),h=[],a=this.target;if(s=e.filter(function(t){return c(t.target,a)}),i===ct)for(e=0;e<s.length;)o[s[e].identifier]=!0,e++;for(e=0;e<n.length;)o[n[e].identifier]&&h.push(n[e]),i&(ut|ft)&&delete o[n[e].identifier],e++;return h.length?[m(s.concat(h),"identifier",!0),h]:void 0}function W(){x.apply(this,arguments);var t=a(this.handler,this);this.touch=new M(this.manager,t);this.mouse=new S(this.manager,t);this.primaryTouch=null;this.lastTouches=[]}function R(t){t=t.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var e=this.lastTouches;setTimeout(function(){var t=e.indexOf(i);-1<t&&e.splice(t,1)},Nt)}}function F(t,i){this.manager=t;this.set(i)}function E(t){if(-1<t.indexOf(Yt))return Yt;var i=-1<t.indexOf(Gt),e=-1<t.indexOf(Vt);return i&&e?Yt:i||e?i?Gt:Vt:-1<t.indexOf(Zt)?Zt:zt}function H(t){this.options=$({},this.defaults,t||{});this.id=ht++;this.manager=null;this.options.enable=this.options.enable===l?!0:this.options.enable;this.state=_t;this.simultaneous={};this.requireFail=[]}function D(t){return t&$t?"cancel":t&Xt?"end":t&Qt?"move":t&jt?"start":""}function N(t){return t==vt?"down":t==xt?"up":t==bt?"left":t==wt?"right":""}function O(t,i){var e=i.manager;return e?e.get(t):t}function U(){H.apply(this,arguments)}function z(){U.apply(this,arguments);this.pY=this.pX=null}function Z(){U.apply(this,arguments)}function Y(){H.apply(this,arguments);this._input=this._timer=null}function G(){U.apply(this,arguments)}function V(){U.apply(this,arguments)}function _(){H.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function j(t,i){return i=i||{},i.recognizers=i.recognizers===l?j.defaults.preset:i.recognizers,new Q(t,i)}function Q(t,i){this.options=$({},j.defaults,i||{});this.options.inputTarget=this.options.inputTarget||t;this.handlers={};this.session={};this.recognizers=[];this.element=t;this.input=v(this);this.touchAction=new F(this,this.options.touchAction);X(this,!0);n(this.options.recognizers,function(t){var i=this.add(new t[0](t[1]));t[2]&&i.recognizeWith(t[2]);t[3]&&i.requireFailure(t[3])},this)}function X(t,e){var o=t.element;o.style&&n(t.options.cssProps,function(t,i){o.style[b(o.style,i)]=e?t:""})}function J(t,i){var e=o.createEvent("Event");e.initEvent(t,!0,!0);e.gesture=i;i.target.dispatchEvent(e)}var $,q=" webkit Moz MS ms o".split(" "),K=o.createElement("div"),tt="function",it=Math.round,et=Math.abs,ot=Date.now;$="function"!=typeof Object.assign?function(t){if(t===l||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),e=1;e<arguments.length;e++){var o=arguments[e];if(o!==l&&null!==o)for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])}return i}:Object.assign;var st=i(function(t,i,e){for(var o=Object.keys(i),s=0;s<o.length;)(!e||e&&t[o[s]]===l)&&(t[o[s]]=i[o[s]]),s++;return t},"extend","Use `assign`."),nt=i(function(t,i){return st(t,i,!0)},"merge","Use `assign`."),ht=1,at=/mobile|tablet|ip(ad|hone|od)|android/i,rt="ontouchstart"in s,lt=b(s,"PointerEvent")!==l,gt=rt&&at.test(navigator.userAgent),dt=25,ct=1,pt=2,ut=4,ft=8,mt=1,bt=2,wt=4,xt=8,vt=16,Ct=bt|wt,kt=xt|vt,At=Ct|kt,yt=["x","y"],Bt=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler);this.evTarget&&g(this.target,this.evTarget,this.domHandler);this.evWin&&g(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler);this.evTarget&&d(this.target,this.evTarget,this.domHandler);this.evWin&&d(w(this.element),this.evWin,this.domHandler)}};var Pt={mousedown:ct,mousemove:pt,mouseup:ut},St="mousedown",It="mousemove mouseup";h(S,x,{handler:function(t){var i=Pt[t.type];i&ct&&0===t.button&&(this.pressed=!0);i&pt&&1!==t.which&&(i=ut);this.pressed&&(i&ut&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Tt={pointerdown:ct,pointermove:pt,pointerup:ut,pointercancel:ft,pointerout:ft},Mt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Lt="pointerdown",Wt="pointermove pointerup pointercancel";s.MSPointerEvent&&!s.PointerEvent&&(Lt="MSPointerDown",Wt="MSPointerMove MSPointerUp MSPointerCancel");h(I,x,{handler:function(t){var i=this.store,e=!1,o=t.type.toLowerCase().replace("ms",""),o=Tt[o],s=Mt[t.pointerType]||t.pointerType,n="touch"==s,h=u(i,t.pointerId,"pointerId");o&ct&&(0===t.button||n)?0>h&&(i.push(t),h=i.length-1):o&(ut|ft)&&(e=!0);0>h||(i[h]=t,this.callback(this.manager,o,{pointers:i,changedPointers:[t],pointerType:s,srcEvent:t}),e&&i.splice(h,1))}});var Rt={touchstart:ct,touchmove:pt,touchend:ut,touchcancel:ft},Ft="touchstart",Et="touchstart touchmove touchend touchcancel";h(T,x,{handler:function(t){var i=Rt[t.type];if(i===ct&&(this.started=!0),this.started){var e,o=f(t.touches);e=f(t.changedTouches);e=(i&(ut|ft)&&(o=m(o.concat(e),"identifier",!0)),[o,e]);i&(ut|ft)&&0===e[0].length-e[1].length&&(this.started=!1);this.callback(this.manager,i,{pointers:e[0],changedPointers:e[1],pointerType:"touch",srcEvent:t})}}});var Ht={touchstart:ct,touchmove:pt,touchend:ut,touchcancel:ft},Dt="touchstart touchmove touchend touchcancel";h(M,x,{handler:function(t){var i=Ht[t.type],e=L.call(this,t,i);e&&this.callback(this.manager,i,{pointers:e[0],changedPointers:e[1],pointerType:"touch",srcEvent:t})}});var Nt=2500;h(W,x,{handler:function(t,i,e){var o="touch"==e.pointerType,s="mouse"==e.pointerType;if(!(s&&e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents)){if(o)i&ct?(this.primaryTouch=e.changedPointers[0].identifier,R.call(this,e)):i&(ut|ft)&&R.call(this,e);else{if(o=s)t:{for(var o=e.srcEvent.clientX,s=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var h=this.lastTouches[n],a=Math.abs(o-h.x),h=Math.abs(s-h.y);if(25>=a&&25>=h){o=!0;break t}}o=!1}if(o)return}this.callback(t,i,e)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var Ot=b(K.style,"touchAction"),Ut=Ot!==l,zt="auto",Zt="manipulation",Yt="none",Gt="pan-x",Vt="pan-y";F.prototype={set:function(t){"compute"==t&&(t=this.compute());Ut&&this.manager.element.style&&(this.manager.element.style[Ot]=t);this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var i=[];return n(this.manager.recognizers,function(t){r(t.options.enable,[t])&&(i=i.concat(t.getTouchAction()))}),E(i.join(" "))},preventDefaults:function(t){if(!Ut){var i=t.srcEvent,e=t.offsetDirection;if(!this.manager.session.prevented){void i.preventDefault();var o=this.actions,s=-1<o.indexOf(Yt),n=-1<o.indexOf(Vt),o=-1<o.indexOf(Gt);if(s){var h=2>t.distance,a=250>t.deltaTime;if(1===t.pointers.length&&h&&a)return}if(!o||!n)return s||n&&e&Ct||o&&e&kt?this.preventSrc(i):void 0}}},preventSrc:function(t){this.manager.session.prevented=!0;t.preventDefault()}};var _t=1,jt=2,Qt=4,Xt=8,Jt=Xt,$t=16;H.prototype={defaults:{},set:function(t){return $(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(e(t,"recognizeWith",this))return this;var i=this.simultaneous;return t=O(t,this),i[t.id]||(i[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return e(t,"dropRecognizeWith",this)?this:(t=O(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(e(t,"requireFailure",this))return this;var i=this.requireFail;return t=O(t,this),-1===u(i,t)&&(i.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(e(t,"dropRequireFailure",this))return this;t=O(t,this);t=u(this.requireFail,t);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(i){function t(t){e.manager.emit(t,i)}var e=this,o=this.state;Xt>o&&t(e.options.event+D(o));t(e.options.event);i.additionalEvent&&t(i.additionalEvent);o>=Xt&&t(e.options.event+D(o))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|_t)))return!1;t++}return!0},recognize:function(t){t=$({},t);return r(this.options.enable,[this,t])?(this.state&(Jt|$t|32)&&(this.state=_t),this.state=this.process(t),void(this.state&(jt|Qt|Xt|$t)&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}};h(U,H,{defaults:{pointers:1},attrTest:function(t){var i=this.options.pointers;return 0===i||t.pointers.length===i},process:function(t){var i=this.state,e=t.eventType,o=i&(jt|Qt);t=this.attrTest(t);return o&&(e&ft||!t)?i|$t:o||t?e&ut?i|Xt:i&jt?i|Qt:jt:32}});h(z,U,{defaults:{event:"pan",threshold:10,pointers:1,direction:At},getTouchAction:function(){var t=this.options.direction,i=[];return t&Ct&&i.push(Vt),t&kt&&i.push(Gt),i},directionTest:function(t){var i=this.options,e=!0,o=t.distance,s=t.direction,n=t.deltaX,h=t.deltaY;return s&i.direction||(i.direction&Ct?(s=0===n?mt:0>n?bt:wt,e=n!=this.pX,o=Math.abs(t.deltaX)):(s=0===h?mt:0>h?xt:vt,e=h!=this.pY,o=Math.abs(t.deltaY))),t.direction=s,e&&o>i.threshold&&s&i.direction},attrTest:function(t){return U.prototype.attrTest.call(this,t)&&(this.state&jt||!(this.state&jt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX;this.pY=t.deltaY;var i=N(t.direction);i&&(t.additionalEvent=this.options.event+i);this._super.emit.call(this,t)}});h(Z,U,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Yt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&jt)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(1>t.scale?"in":"out"));this._super.emit.call(this,t)}});h(Y,H,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[zt]},process:function(t){var i=this.options,e=t.pointers.length===i.pointers,o=t.distance<i.threshold,s=t.deltaTime>i.time;if(this._input=t,!o||!e||t.eventType&(ut|ft)&&!s)this.reset();else if(t.eventType&ct)this.reset(),this._timer=setTimeout(a(function(){this.state=Jt;this.tryEmit()},this),i.time);else if(t.eventType&ut)return Jt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Jt&&(t&&t.eventType&ut?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ot(),this.manager.emit(this.options.event,this._input)))}});h(G,U,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Yt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&jt)}});h(V,U,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ct|kt,pointers:1},getTouchAction:function(){return z.prototype.getTouchAction.call(this)},attrTest:function(t){var i,e=this.options.direction;return e&(Ct|kt)?i=t.overallVelocity:e&Ct?i=t.overallVelocityX:e&kt&&(i=t.overallVelocityY),this._super.attrTest.call(this,t)&&e&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&et(i)>this.options.velocity&&t.eventType&ut},emit:function(t){var i=N(t.offsetDirection);i&&this.manager.emit(this.options.event+i,t);this.manager.emit(this.options.event,t)}});h(_,H,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Zt]},process:function(t){var i=this.options,e=t.pointers.length===i.pointers,o=t.distance<i.threshold,s=t.deltaTime<i.time;if(this.reset(),t.eventType&ct&&0===this.count)return this.failTimeout();if(o&&s&&e){if(t.eventType!=ut)return this.failTimeout();e=this.pTime?t.timeStamp-this.pTime<i.interval:!0;o=!this.pCenter||B(this.pCenter,t.center)<i.posThreshold;this.pTime=t.timeStamp;this.pCenter=t.center;o&&e?this.count+=1:this.count=1;this._input=t;if(0===this.count%i.taps)return this.hasRequireFailures()?(this._timer=setTimeout(a(function(){this.state=Jt;this.tryEmit()},this),i.interval),jt):Jt}return 32},failTimeout:function(){return this._timer=setTimeout(a(function(){this.state=32},this),this.options.interval),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Jt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});j.VERSION="2.0.7";j.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[G,{enable:!1}],[Z,{enable:!1},["rotate"]],[V,{direction:Ct}],[z,{direction:Ct},["swipe"]],[_],[_,{event:"doubletap",taps:2},["tap"]],[Y]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};Q.prototype={set:function(t){return $(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(t);var e,o=this.recognizers,s=i.curRecognizer;(!s||s&&s.state&Jt)&&(s=i.curRecognizer=null);for(var n=0;n<o.length;)e=o[n],2===i.stopped||s&&e!=s&&!e.canRecognizeWith(s)?e.reset():e.recognize(t),!s&&e.state&(jt|Qt|Xt)&&(s=i.curRecognizer=e),n++}},get:function(t){if(t instanceof H)return t;for(var i=this.recognizers,e=0;e<i.length;e++)if(i[e].options.event==t)return i[e];return null},add:function(t){if(e(t,"add",this))return this;var i=this.get(t.options.event);return i&&this.remove(i),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(e(t,"remove",this))return this;if(t=this.get(t)){var i=this.recognizers;t=u(i,t);-1!==t&&(i.splice(t,1),this.touchAction.update())}return this},on:function(t,i){var e=this.handlers;return n(p(t),function(t){e[t]=e[t]||[];e[t].push(i)}),this},off:function(t,i){var e=this.handlers;return n(p(t),function(t){i?e[t]&&e[t].splice(u(e[t],i),1):delete e[t]}),this},emit:function(t,i){this.options.domEvents&&J(t,i);var e=this.handlers[t]&&this.handlers[t].slice();if(e&&e.length){i.type=t;i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<e.length;)e[o](i),o++}},destroy:function(){this.element&&X(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};$(j,{INPUT_START:ct,INPUT_MOVE:pt,INPUT_END:ut,INPUT_CANCEL:ft,STATE_POSSIBLE:_t,STATE_BEGAN:jt,STATE_CHANGED:Qt,STATE_ENDED:Xt,STATE_RECOGNIZED:Jt,STATE_CANCELLED:$t,STATE_FAILED:32,DIRECTION_NONE:mt,DIRECTION_LEFT:bt,DIRECTION_RIGHT:wt,DIRECTION_UP:xt,DIRECTION_DOWN:vt,DIRECTION_HORIZONTAL:Ct,DIRECTION_VERTICAL:kt,DIRECTION_ALL:At,Manager:Q,Input:x,TouchAction:F,TouchInput:M,MouseInput:S,PointerEventInput:I,TouchMouseInput:W,SingleTouchInput:T,Recognizer:H,AttrRecognizer:U,Tap:_,Pan:z,Swipe:V,Pinch:Z,Rotate:G,Press:Y,on:g,off:d,each:n,merge:nt,extend:st,assign:$,inherit:h,bindFn:a,prefixed:b});("undefined"!=typeof s?s:"undefined"!=typeof self?self:{}).Hammer=j;"function"==typeof define&&define.amd?define(function(){return j}):"undefined"!=typeof module&&module.exports?module.exports=j:s[t]=j}(window,document,"Hammer");jQuery.fn.IEZoom=function(t){this.options=t;this.middleScale=3;this.maxScale=6;this.side=t.side;this.parameters={width:$(this).width()||0,height:$(this).height()||0,naturalWidth:$(this).width()||0,naturalHeight:$(this).height()||0,left:parseInt($(this).css("left"))||0,top:parseInt($(this).css("top"))||0,naturalLeft:parseInt($(this).css("left"))||0,naturalTop:parseInt($(this).css("top"))||0,scale:1,rotate:0,toScale:1,tran:{x:0,y:0},origin:{x:50,y:50},zoomFlag:!1,zoomming:!1,zoonOut:!1,resize:!1,eventCancel:!1};this.onPan=function(t){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming&&t&&t.pointers&&1==t.pointers.length&&(this.swipeInterval&&this.swipeInterval.stop(),this.animateInterval&&this.animateInterval.stop(),this.parameters.zoomFlag&&(this.panForMove(this,t.deltaX,t.deltaY,!0),this.options&&this.options.onPan)))this.options.onPan()};this.onDoubleTap=function(t){if(!(BookInfo.getBook().status_resize||BookInfo.getBook().flipping||(BookInfo.getBook().endFlip(),global.windowTapInterval&&window.clearTimeout(global.windowTapInterval),this.parameters.resize||this.parameters.eventCancel||this.parameters.zoomming)))if(this.status_zoom=!0,!this.parameters.zoomFlag)this.zoomIn(this),this.parameters.zoomOut=!1,this.animateToScale(this,this.middleScale,t);else if(this.parameters.zoomFlag){var i=this.parameters.naturalWidth/this.parameters.width;this.parameters.zoomOut=!0;this.animateToScale(this,i,t)}};this.zoomIn=function(t){t.parameters.left=parseInt($(t).css("left"));t.parameters.top=parseInt($(t).css("top"));t.parameters.naturalLeft=t.parameters.left;t.parameters.naturalTop=t.parameters.top;t.parameters.width=$(t).width();t.parameters.height=$(t).height();t.parameters.naturalWidth=$(t).width();t.parameters.naturalHeight=$(t).height();t.parameters.zoomFlag=!0;t.parameters.zoomOut=!1;t.options&&t.options.zoomIn&&t.options.zoomIn()};this.zoomOut=function(t){t.swipeInterval&&t.swipeInterval.stop();t.animateInterval&&t.animateInterval.stop();t.parameters.zoomFlag=!1;t.parameters.zoomOut=!0;t.parameters.toScale=1;t.parameters.scale=1;t.options&&t.options.zoomOut&&t.options.zoomOut()};this.animateToScale=function(o,s,t){if(!o.parameters.eventCancel&&!o.parameters.zoomming){o.options&&o.options.zoomStart&&o.options.zoomStart();o.parameters.zoomming=!0;var n=0,h=0,a=0,r=0,l=0;o.animateInterval=function(t,i){n=$.easing.swing(null,a,o.parameters.width,o.parameters.width*(s-1),20);h=$.easing.swing(null,a,o.parameters.height,o.parameters.height*(s-1),20);r=$.easing.swing(null,a,o.parameters.left,o.parameters.naturalLeft+50*(o.parameters.naturalWidth-o.parameters.width*s)/100-o.parameters.left,20);l=$.easing.swing(null,a,o.parameters.top,o.parameters.naturalTop+50*(o.parameters.naturalHeight-o.parameters.height*s)/100-o.parameters.top,20);o.css({width:n+"px",height:h+"px",left:r+"px",top:l+"px"});for(var e=0;e<o.side.pageArray.length;e++)if(o.side.pageArray[e])o.side.pageArray[e].onResize(n/2,h);a++;if(20<=a||t>=i){o.animateInterval.stop();o.parameters.left=o.parameters.naturalLeft+50*(o.parameters.naturalWidth-o.parameters.width*s)/100;o.parameters.top=o.parameters.naturalTop+50*(o.parameters.naturalHeight-o.parameters.height*s)/100;o.parameters.width*=s;o.parameters.height*=s;o.css({width:o.parameters.width+"px",height:o.parameters.height+"px",left:o.parameters.left+"px",top:o.parameters.top+"px"});for(e=0;e<o.side.pageArray.length;e++)if(o.side.pageArray[e])o.side.pageArray[e].onResize(o.parameters.width/2,o.parameters.height);o.parameters.zoomming=!1;1>=o.parameters.width*o.parameters.scale/o.parameters.naturalWidth&&o.zoomOut(o)}}.animation(this,320)}};this.panForMove=function(t,i,e,o){t.css({left:t.parameters.left+i+"px",top:t.parameters.top+e+"px"})};var i=!1,e=0,o=0;bookConfig.SupportOperatePageZoom&&this.dblclick(function(t){t.pointers=[{pageX:t.pageX,pageY:t.pageY}];this.onDoubleTap(t)}.bind(this));this.bind(_event._down,function(t){i=!0;e=t.pageX;o=t.pageY}.bind(this));this.bind(_event._move,function(t){t.pointers=[{pageX:t.pageX,pageY:t.pageY}];i&&(t.deltaX=t.pageX-e,t.deltaY=t.pageY-o,this.onPan(t))}.bind(this));this.bind(_event._end,function(t){i=!1;this.parameters.left+=t.pageX-e;this.parameters.top+=t.pageY-o}.bind(this))};jQuery.fn.zoom=function(t,i){this.options=t;this.isBook=i;this.parameters={width:$(this).width()||0,height:$(this).height()||0,naturalWidth:$(this).width()||0,naturalHeight:$(this).height()||0,left:$(this).offset().left-0||0,top:$(this).offset().top-0||0,toScale:1,scale:1,rotate:0,tran:{x:0,y:0},origin:{x:50,y:50},zoomFlag:!1,zoomming:!1,zoomOut:!1,resize:!1,eventCancel:!1,zoomDelay:!1,onPan:!1,onSwipe:!1,onDoubleTap:!1,onPinch:!1,zoomArea:{left:0,top:0,right:0,bottom:0}};this.onPan=function(t){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming&&t&&t.pointers&&1==t.pointers.length&&(this.swipeInterval&&this.swipeInterval.stop(),this.animateInterval&&this.animateInterval.stop(),this.parameters.zoomFlag)){"panstart"==t.type&&(this.parameters.onPan=!0);var i=this.getDelta(t),i=this.panForMove(this,i.deltaX,i.deltaY,!0);if(this.options&&this.options.onPan)this.options.onPan();if("panend"==t.type||"pancancel"==t.type)this.parameters.onPan=!1,this.setZoomParameters(this,i),this.restrictInBoundary(this)}};this.onSwipe=function(t){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming)if(this.parameters.zoomFlag){var i=this.parameters.tran,e=this.tranLimit(this,this.parameters.scale,this.parameters.tran);if(e.x==parseInt(i.x)&&e.y==parseInt(i.y)){this.animateInterval&&this.animateInterval.stop();this.swipeInterval&&this.swipeInterval.stop();var s=0,n=0;t=this.getVelocity(t);s=t.velocityX;n=t.velocityY;this.swipeInterval=function(t,i){var e=this.parameters.tran,o=this.tranLimit(this,this.parameters.scale,this.parameters.tran);o.x!=parseInt(e.x)||o.y!=parseInt(e.y)?(this.swipeInterval.stop(),this.restrictInBoundary(this)):(e=(i-t)/i,e=this.panForMove(this,s*e*16.7,n*e*16.7,!0),this.setZoomParameters(this,e),t>=i&&(this.swipeInterval.stop(),this.restrictInBoundary(this)))}.animation(this,320)}}else t=this.getDirection(t),this.options&&this.options.swipeend&&this.options.swipeend(t)};this.getDirection=function(t){var i,e=bookConfig.upsideOnMobile();t.direction&Hammer.DIRECTION_RIGHT&&!e&&(i="right");t.direction&Hammer.DIRECTION_LEFT&&!e&&(i="left");t.direction&Hammer.DIRECTION_UP&&!e&&(i="up");t.direction&Hammer.DIRECTION_DOWN&&!e&&(i="down");t.direction&Hammer.DIRECTION_RIGHT&&e&&(i="down");t.direction&Hammer.DIRECTION_LEFT&&e&&(i="up");t.direction&Hammer.DIRECTION_UP&&e&&(i="left");t.direction&Hammer.DIRECTION_DOWN&&e&&(i="right");return i};this.getVelocity=function(t){var i=0,e=0,o=bookConfig.upsideOnMobile();0==t.velocityX||o||(i=t.velocityX);0==t.velocityY||o||(e=t.velocityY);0!=t.velocityX&&o&&(i=t.velocityY);0!=t.velocityY&&o&&(e=-t.velocityX);return{velocityX:i,velocityY:e}};this.getDelta=function(t){var i=0,e=0,o=bookConfig.upsideOnMobile();0==t.deltaX||o||(i=t.deltaX);0==t.deltaY||o||(e=t.deltaY);0!=t.deltaX&&o&&(i=t.deltaY);0!=t.deltaY&&o&&(e=-t.deltaX);return{deltaX:i,deltaY:e}};this.onDoubleTap=function(t){if(!(BookInfo.getBook().status_resize||BookInfo.getBook().flipping||(BookInfo.getBook().endFlip(),global.windowTapInterval&&window.clearTimeout(global.windowTapInterval),this.parameters.resize||this.parameters.zoomming)))if(BookInfo.getBook().unSelect(),this.status_zoom=!0,!this.parameters.zoomFlag)this.zoomIn(this),this.parameters.origin=this.mathOrigin(this,t),this.originObj(this,this.parameters.origin),this.parameters.zoomOut=!1,this.animateToScale(this,this.middleScale,t);else if(this.parameters.zoomFlag){var i=this.parameters.naturalWidth/this.parameters.width;this.parameters.zoomOut=!0;this.animateToScale(this,i,t)}};this.onPinch=function(t){"pinchstart"==t.type&&(this.pinchStart=!0);if(!(this.parameters.resize||this.parameters.zoomming||!this.parameters.zoomFlag&&1>=t.scale)&&t&&t.pointers){BookInfo.getBook().unSelect();this.animateInterval&&this.animateInterval.stop();this.swipeInterval&&this.swipeInterval.stop();var i=function(){this.pinchStart=!1;this.parameters.zoomFlag||(this.parameters.zoomOut=!1,this.zoomIn(this));this.scale=this.parameters.toScale;this.parameters.origin=this.mathOrigin(this,t);this.originObj(this,this.parameters.origin);this.pinchMoveIn(this,parseFloat(this.scale)*parseFloat(t.scale),t,this.parameters.origin)}.bind(this);"pinchstart"==t.type&&(this.parameters.onPinch=!0,i(t));"pinchend"==t.type&&(this.parameters.scale=this.parameters.toScale,this.parameters.onPinch=!1,this.exceedScale(this,t),this.pinchStart=!1);"pinchmove"==t.type&&(this.pinchStart&&i(t),this.pinchMoveIn(this,parseFloat(this.scale)*parseFloat(t.scale),t,this.parameters.origin));"pinchcancel"==t.type&&(this.parameters.scale=this.parameters.toScale,this.parameters.onPinch=!1,this.exceedScale(this,t),this.pinchStart=!1)}};this.exceedScale=function(t,i){var e=t.parameters.width*t.parameters.toScale/t.parameters.naturalWidth,o=t.parameters.width*t.parameters.toScale,s=t.parameters.height*t.parameters.toScale,n=t.parameters.naturalWidth*t.maxScale/t.parameters.width,h=t.parameters.naturalWidth/t.parameters.width,a=t.parameters.toScale;e>t.maxScale&&(a=n);if(1>e||o<windowWidth&&s<windowHeight)t.parameters.zoomOut=!0,a=h;t.animateToScale(t,a,i)};this.zoomIn=function(t){var i=this.getBookOffset($(t));t.parameters.tran=getTransform(t[0]);t.parameters.left=i.left-t.parameters.tran.x;t.parameters.top=i.top-t.parameters.tran.y;t.parameters.width=$(t).width();t.parameters.height=$(t).height();t.parameters.naturalWidth=$(t).width();t.parameters.naturalHeight=$(t).height();t.setZoomSize();t.parameters.zoomFlag=!0;t.parameters.zoomOut=!1;t.options&&t.options.zoomIn&&t.options.zoomIn()};this.zoomOut=function(t){t.swipeInterval&&t.swipeInterval.stop();t.animateInterval&&t.animateInterval.stop();t.parameters.zoomFlag=!1;t.parameters.zoomOut=!0;t.parameters.toScale=1;t.parameters.scale=1;t.options&&t.options.zoomOut&&t.options.zoomOut()};this.tranLimit=function(t,i,e){if(e){if(t.parameters.zoomOut){e={x:0,y:0};e.x=t.parameters.width*(i-1)*t.parameters.origin.x/100;e.y=t.parameters.height*(i-1)*t.parameters.origin.y/100;if((bookType==BookType.normal_book||bookType==BookType.catalog_book)&&bookConfig.retainBookCenter&&t.isBook){var o=BookInfo.getCurrentPages();1==o.length&&(!BookInfo.isLeftPage(o[0],!0)&&bookConfig.FlipDirection&&(e.y-=t.parameters.height*i/4),BookInfo.isLeftPage(o[0],!0)&&bookConfig.FlipDirection&&(e.y+=t.parameters.height*i/4),BookInfo.isLeftPage(o[0],!0)||bookConfig.FlipDirection||(e.x-=t.parameters.width*i/4),BookInfo.isLeftPage(o[0],!0)&&!bookConfig.FlipDirection&&(e.x+=t.parameters.width*i/4))}return e}t.parameters.origin||(t.parameters.origin={x:0,y:0});o=e.x;e=e.y;var s,n,h,a;s=t.parameters.width;n=t.parameters.height;h=t.parameters.left-t.parameters.origin.x*(i-1)*s/100;a=t.parameters.top-t.parameters.origin.y*(i-1)*n/100;var r=0,l=0,g=0,d=0,l=i*s,d=i*n;l>windowWidth?(r=windowWidth-l-h+s*i*t.parameters.zoomArea.right/100,g=-h-s*i*t.parameters.zoomArea.left/100):(r=-h-s*i*t.parameters.zoomArea.left/100,g=windowWidth-l-h+s*i*t.parameters.zoomArea.right/100);d>windowHeight?(l=windowHeight-d-a+n*i*t.parameters.zoomArea.bottom/100,d=-a-n*i*t.parameters.zoomArea.top/100):(l=-a-n*i*t.parameters.zoomArea.top/100,d=windowHeight-d-a+n*i*t.parameters.zoomArea.bottom/100);o=Number.between(o,r,g);e=Number.between(e,l,d);return{x:parseInt(o),y:parseInt(e)}}};this.pinchMoveIn=function(t,i,e){if(!t.parameters.eventCancel&&!t.parameters.zoomming&&e&&e.pointers&&2==e.pointers.length){var o={};o.scale=i;o.tran=t.mathTran(t,e,t.parameters.origin);t.transformSetting(t,o);t.parameters.toScale=i}};this.mathTran=function(t,i,e){if(!i||!i.pointers||0>=i.pointers.length||!e)return{x:0,y:0};i=this.getPageXY(i);pageX=i.pageX;pageY=i.pageY;var o,s;s=t.parameters.width;i=t.parameters.height;o=t.parameters.left;t=t.parameters.top;o=(e.x*s/100+o).toFixed(2);e=(e.y*i/100+t).toFixed(2);tranX=pageX-parseFloat(o);tranY=pageY-parseFloat(e);return{x:parseFloat(tranX.toFixed(2)),y:parseFloat(tranY.toFixed(2))}};this.mathOrigin=function(t,i){if(!i||!i.pointers||0>=i.pointers.length)return{x:50,y:50};var e=this.getPageXY(i);pageX=e.pageX;pageY=e.pageY;var o,s;o=t.parameters.width;e=t.parameters.height;s=this.getBookOffset(t);o=(pageX-parseInt(s.left))/(o*t.parameters.scale);e=(pageY-parseInt(s.top))/(e*t.parameters.scale);return{x:(100*o).toFixed(2),y:(100*e).toFixed(2)}};this.getPageXY=function(t){var i,e,o=bookConfig.upsideOnMobile();1==t.pointers.length&&(i=t.pointers[0].pageX,e=t.pointers[0].pageY);1<t.pointers.length&&(i=(t.pointers[0].pageX+t.pointers[1].pageX)/2,e=(t.pointers[0].pageY+t.pointers[1].pageY)/2);return o?{pageX:e,pageY:windowHeight-i}:{pageX:i,pageY:e}};this.getBookOffset=function(t){if(t)return t=t.offset(),bookConfig.upsideOnMobile()?{left:t.top,top:t.left}:{left:t.left,top:t.top}};this.restrictInBoundary=function(s,n){if(!s.parameters.eventCancel&&!s.parameters.zoomming){var t=s.parameters.tran,i=this.tranLimit(s,s.parameters.scale,t);if(i.x!=parseInt(t.x)||i.y!=parseInt(t.y)){s.animateInterval&&s.animateInterval.stop();var h=0,a=0,r=0;i.x!=t.x&&(h=i.x-t.x);i.y!=t.y&&(a=i.y-t.y);s.animateInterval=function(t,i){var e=$.easing.easeOutBack(null,r,0,h,20),o=$.easing.easeOutBack(null,r,0,a,20);0<r&&(e-=$.easing.easeOutBack(null,r-1,0,h,20),o-=$.easing.easeOutBack(null,r-1,0,a,20));e=s.panForMove(s,e,o);s.setZoomParameters(s,e);r++;if(20<=r||t>=i)s.animateInterval.stop(),BookInfo.getBook().bookMap&&BookInfo.getBook().bookMap.refreshArea(),n&&"function"==typeof n&&n()}.animation(this,320)}}};this.transformSetting=function(t,i){t.setZoomParameters(t,i);var e=transformCSS(i);t.css(e)};this.panForMove=function(t,i,e,o){var s=t.parameters?t.parameters.tran:{x:0,y:0};o=t.parameters?t.parameters.scale:1;s||(s={x:0,y:0});o||0==o||(o=1);i=parseInt(s.x+i);e=parseInt(s.y+e);e={x:i,y:e};i=transformCSS({tran:e,scale:o});t.css(i);return{tran:e,scale:o}};this.originObj=function(t,i){t.css({"-webkit-transform-origin":i.x+"% "+i.y+"%","-moz-transform-origin":i.x+"% "+i.y+"%","-ms-transform-origin":i.x+"% "+i.y+"%","-o-transform-origin":i.x+"% "+i.y+"%"})};this.setZoomParameters=function(i,e){function t(t){return void 0===e[t]||null===e[t]||isNaN(e[t])?i.parameters[t]:e[t]}function o(t){return void 0!==e[t]&&null!==e[t]?e[t]:i.parameters[t]}i&&i.parameters&&e&&(i.parameters={width:t("width"),height:t("height"),naturalWidth:t("naturalWidth"),naturalHeight:t("naturalHeight"),left:t("left"),top:t("top"),scale:t("scale"),rotate:t("rotate"),toScale:t("toScale"),tran:o("tran"),origin:o("origin"),zoomFlag:o("zoomFlag"),zoomming:o("zoomming"),zoomOut:o("zoomOut"),resize:o("resize"),eventCancel:o("eventCancel"),zoomArea:o("zoomArea"),zoomDelay:o("zoomDelay"),onPan:o("onPan"),onSwipe:o("onSwipe"),onDoubleTap:o("onDoubleTap"),onPinch:o("onPinch")})};this.animateToTransform=function(t,i,e){if(!this.parameters.eventCancel&&!this.parameters.zoomming){this.options&&this.options.zoomStart&&this.options.zoomStart();this.parameters.zoomming=!0;var o=this.getBookOffset($(this));this.parameters.tran=getTransform(this[0]);this.parameters.left=o.left-this.parameters.tran.x;this.parameters.top=o.top-this.parameters.tran.y;this.parameters.width=$(this).width();this.parameters.height=$(this).height();this.parameters.naturalWidth=$(this).width();this.parameters.naturalHeight=$(this).height();this.setZoomSize();var s={};s.origin=this.parameters.origin;s.scale=t;s.tran=i;s.origin=e;this.zoomTran=s;i=transformCSS(s);this.originObj(this,s.origin);animateOnce(this,i,300,function(){getTransform(this[0]);this.transformSetting(this,s);this.parameters.scale=t;this.parameters.toScale=t;this.parameters.zoomming=!1;if(this.options.onZoomed)this.options.onZoomed(s)}.bind(this),"%stransform","ease-in-out")}};this.animateToScale=function(t,i,e){if(!t.parameters.eventCancel&&!t.parameters.zoomming){t.options&&t.options.zoomStart&&t.options.zoomStart();t.parameters.zoomming=!0;var o={};o.origin=t.parameters.origin;o.scale=i;o.tran=this.mathTran(t,e,o.origin);o.tran=this.tranLimit(t,i,o.tran);this.zoomTran=o;this.animation(t,i,o)}};this.animation=function(e,o,s){var t=transformCSS(s);e.originObj(e,s.origin);animateOnce(e,t,300,function(){getTransform(e[0]);e.transformSetting(e,s);e.parameters.scale=o;e.parameters.toScale=o;e.parameters.zoomming=!1;var t=(e.parameters.width*e.parameters.toScale).toFixed(2),i=e.parameters.naturalWidth;if(Number.isBetween(t,i-1,i+1)){e.timeout&&(e.timeout=void 0,window.clearTimeout(e.timeout));e.parameters.zoomDelay=!1;if(e.options.onZoomed)e.options.onZoomed(e.zoomTran);e.zoomOut(e)}else if(e.options.onZoomed)if(isPhone()||isPad())e.parameters.zoomDelay?e.timeout||this.delayExecuteOnZoomed(e):(e.parameters.zoomDelay=!0,e.options.onZoomed(e.zoomTran));else e.options.onZoomed(e.zoomTran)}.bind(e),"%stransform","ease-in-out")};this.delayExecuteOnZoomed=function(t){t.timeout=window.setTimeout(function(){if(t.parameters.zoomFlag&&!t.parameters.onPinch&&!t.parameters.zoomming)t.options.onZoomed(t.zoomTran);t.parameters.zoomDelay=!1;window.clearTimeout(t.timeout);t.timeout=void 0},3e3)};this.registerParamers=function(t){t&&(void 0!=t.width&&(this.parameters.width=t.width),void 0!=t.height&&(this.parameters.height=t.height),void 0!=t.left&&(this.parameters.left=t.left),void 0!=t.top&&(this.parameters.top=t.top),void 0!=t.scale&&(this.parameters.scale=t.scale),void 0!=t.tran&&(this.parameters.tran=t.tran),void 0!=t.origin&&(this.parameters.origin=t.origin))};this.setZoomSize=function(){var t=$(this).width(),i=$(this).height(),e=bookConfig.largePageHeight/bookConfig.largePageWidth,o=bookConfig.defaultZoomWidth?bookConfig.defaultZoomWidth:bookConfig.largePageWidth,s=o*e,n=bookConfig.maxZoomWidth,e=n*e;bookConfig.FlipDirection?(this.middleScale=Number.between(o/t,1.5,2),this.maxScale=Number.between(n/t,2,6)):(this.middleScale=Number.between(s/i,1.5,2),this.maxScale=Number.between(e/i,2,6));this.middleScale||(this.middleScale=3);n||(this.maxScale=6)};var e=new Hammer.Manager($(this)[0]);e.add(new Hammer.Pan);e.add(new Hammer.Swipe({velocity:.15}).recognizeWith(e.get("pan")));e.on("panstart panmove panend pancancel",this.onPan.bind(this));e.on("swipe swipeup",this.onSwipe.bind(this));if(bookConfig.SupportOperatePageZoom){e.add(new Hammer.Pinch);isPhone()||isPad()?e.add(new Hammer.Tap({event:"doubletap",taps:2,interval:400,posThreshold:30})):e.add(new Hammer.Tap({event:"doubletap",taps:2}));if(isPhone()||isPad()||isSlideBook())e.on("pinchstart pinchmove pinchcancel pinchend",this.onPinch.bind(this));if(!isAndroidWeChat())e.on("doubletap",this.onDoubleTap.bind(this))}this.setZoomSize()};Class("VideoSkin",{create:function(t,i){this.content=t;this.video=t.find("video:first");this.html_video=i?i:this.video[0];this.initPlayer();this.initControlBar();this.initSkin();this.initEvents();this.onResize()},initPlayer:function(){this.player=this.html_video;var t=this.video.find("source:first");t&&(t=t.attr("src"),(t.endsWith(".flv")||t.endsWith(".f4v"))&&this.content.html('<video class="video-js vjs-default-skin" preload="auto" width="100%" height="100%" data-setup=\'{}\'><source src='+t+" type='video/x-flv'></video>"))},initControlBar:function(){this.content.addClass("video-player");this.controlBar=$('<div class="video-controls slider-action"></div>');this.controlBorder=$('<div class="control-border"></div>');this.content.append(this.controlBar);this.controlBar.append(this.controlBorder);this.btnPlay=$('<div class="video-play"></div>');this.bevel1=$('<div class="bevel"></div>');this.video_timer=$('<div class="video-timer">00:00</div>');this.video_seek=$('<div class="video-seek"></div>');this.bevel2=$('<div class="bevel"></div>');this.volume_seek=$('<div class="volume-seek"></div>');this.btnVolume=$('<div class="volume-button"></div>');this.btnFullscreen=$('<div class="player-fullscreen"></div>');this.controlBar.append(this.btnPlay);this.controlBar.append(this.bevel1);this.controlBar.append(this.btnFullscreen);this.controlBar.append(this.video_timer);this.controlBar.append(this.video_seek);this.controlBar.append(this.bevel2);this.controlBar.append(this.volume_seek);this.controlBar.append(this.btnVolume);this.createVideoSeekSlider();this.createVolumeSeekSlider();this.btnCenter=$('<div class="video-center-button"></div>');this.content.append(this.btnCenter)},createVideoSeekSlider:function(){var t=this.html_video.$media[0].duration;t||(t=100);this.video_seek_slider=this.video_seek.slider({range:0,max:t,direction:"horizontal",onChange:function(t){try{this.html_video.$media[0].currentTime=parseFloat(t)}catch(t){}}.bind(this)})},createVolumeSeekSlider:function(){this.volume_value=1;this.volume_seek_slider=this.volume_seek.slider({range:1,max:1,direction:"vertical",onChange:function(t){t=parseFloat(t);try{this.volume_value=t,equals(t,0)?(this.html_video.$media[0].muted=!0,this.btnVolume.addClass("volume-mute")):(this.html_video.$media[0].muted=!1,this.btnVolume.removeClass("volume-mute")),this.html_video.$media[0].volume=t}catch(t){}}.bind(this)})},initEvents:function(){this.initControlBarEvents();this.initPlayEvents();this.initVolumeEvents();this.initFullscreenEvents()},initPrompt:function(t){if(t&&t.length){var i=this.html_video.$media[0].duration;this.video_seek.width();for(var e=0;e<t.length;e++){var o=$("<p title='"+t[e].text+"' style='top:1px;left:"+t[e].time/i*100+"%;z-index:2;background:#fff;width:5px;height:5px;border-radius:50%;position:absolute;'></p>");this.video_seek.append(o);this.promptEvent(o,t[e].time)}}},promptEvent:function(i,e){i.bind("mouseenter",function(t){i.css({background:"#2CA8D5"})}.bind(this));i.bind("mouseleave",function(t){i.css({background:"#fff"})}.bind(this));i.bind("click",function(t){this.html_video.$media[0].currentTime=e}.bind(this))},initControlBarEvents:function(){var t=function(){var t="visible";!0==this.html_video.$media[0].paused&&(t="hidden");this.controlBar.css({visibility:t,opacity:1})}.bind(this),i=function(){this.controlBar.css({visibility:"hidden",opacity:0})}.bind(this);$.browser.device==$.browser.DEVICE_PC?(this.video.bind(_event._enter,t),this.video.bind(_event._leave,i),this.controlBar.bind(_event._enter,t),this.controlBar.bind(_event._leave,i)):(this.video.bind(_event._down,function(){t();this.hideControlbarFlag=!1}.bind(this)),this.video.bind(_event._move,function(){t();this.hideControlbarFlag=!1}.bind(this)),this.video.bind(_event._up,function(){this.hideControlbarFlag=!0;(function(){!0==this.hideControlbarFlag&&i()}).delay(this,5e3)}.bind(this)))},initPlayEvents:function(){var t=function(t){t=(t=this.content.find("source").attr("src"))?t.slice(t.lastIndexOf("/")+1):"";!1==this.html_video.$media[0].paused?(bookConfig.googleAnalyticsID&&ga("send","event","Video","pause","Page"+BookInfo.getCurrentPages()[0]+" "+t),this.pause()):(bookConfig.googleAnalyticsID&&ga("send","event","Video","play","Page"+BookInfo.getCurrentPages()[0]+" "+t),this.play(),this.controlBar.css({visibility:"visible",opacity:1}));return!1};this.video.bind(_event._click,t.bind(this));this.btnPlay.bind(_event._click,t.bind(this));this.btnCenter&&this.btnCenter.bind(_event._click,t.bind(this));this.video.bind("play",function(){this.btnPlay.addClass("paused-button");this.btnCenter&&this.btnCenter.css("display","none")}.bind(this));this.video.bind("pause",function(){this.btnPlay.removeClass("paused-button");this.btnCenter&&this.btnCenter.css("display","block")}.bind(this));this.video.bind("ended",function(){this.btnPlay.removeClass("paused-button");this.btnCenter&&this.btnCenter.css("display","block")}.bind(this));this.video.bind("timeupdate",function(){var t=this.html_video.$media[0].currentTime,i=this.html_video.$media[0].duration;i||(i=100);this.video_seek_slider&&(this.video_seek_slider.setMax(i),this.video_seek_slider.setRange(t));this.video_timer.text(this.timeFormat(t))}.bind(this))},initVolumeEvents:function(){this.btnVolume.bind(_event._click,function(){!0==this.html_video.$media[0].muted?(this.html_video.$media[0].muted=!1,this.volume_seek_slider.setRange(this.volume_value),this.btnVolume.removeClass("volume-mute")):(this.html_video.$media[0].muted=!0,this.volume_seek_slider.setRange(0),this.btnVolume.addClass("volume-mute"));return!1}.bind(this));this.btnVolume.bind("mouseenter",function(t){t=isTouch?t.originalEvent?t.originalEvent.changedTouches:t.changedTouches:[t];t=t[0].pageX-t[0].offsetX-this.controlBar.offset().left;t+=(this.btnVolume.width()-this.volume_seek.width())/2;this.volume_seek.css({left:t+"px"});this.volume_seek.css({visibility:"visible",opacity:"1"})}.bind(this));this.btnVolume.bind("mouseleave",function(){this.volume_seek.css({visibility:"hidden",opacity:"0"})}.bind(this));this.volume_seek.bind("mouseenter",function(){this.volume_seek.css({visibility:"visible",opacity:"1"})}.bind(this));this.volume_seek.bind("mouseleave",function(){this.volume_seek.css({visibility:"hidden",opacity:"0"})}.bind(this))},initFullscreenEvents:function(){this.btnFullscreen.bind(_event._click,function(){fullScreenApi.supportsFullScreen?fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(this.html_video.$media[0]):this.html_video.$media[0].webkitSupportsFullscreen&&this.html_video.$media[0].webkitEnterFullscreen();return!1}.bind(this));this.video.bind(fullScreenApi.fullScreenEventName,function(){fullScreenApi.isFullScreen()?(this.html_video.play(),this.btnFullscreen.addClass("player-exit-fullscreen")):this.btnFullscreen.removeClass("player-exit-fullscreen")}.bind(this))},timeFormat:function(t){var i=10>Math.floor(t/60)?"0"+Math.floor(t/60):Math.floor(t/60);return i+":"+(10>Math.floor(t-60*i)?"0"+Math.floor(t-60*i):Math.floor(t-60*i))},initSkin:virtual_function,onResize:function(){var t=this.controlBar.width();t||(t=this.content.width());var i=Math.max(0,t-this.seekWidth);0>=i?this.video_seek.css({display:"none"}):(this.video_seek.css({width:i,display:"block"}),this.video_seek_slider.setRange(this.html_video.$media[0].currentTime));i=this.btnVolume.position().left+this.controlBar.position().left+(this.btnVolume.width()-this.volume_seek.width())/2;t<this.volumeWidth?(this.bevel2.css({display:"none"}),this.btnVolume.css({display:"none"}),this.volume_seek.css({left:"-45px"}),t<this.fullscreenWidth?this.btnFullscreen.css({display:"none"}):this.btnFullscreen.css({display:"block"})):(this.btnVolume.css({display:"block"}),this.btnFullscreen.css({display:"block"}),this.volume_seek.css({left:i+"px"}));!0==this.html_video.$media[0].muted?this.volume_seek_slider.setRange(0):this.volume_seek_slider.setRange(this.volume_value)},play:function(){this.player&&this.player.play()},pause:function(){this.player&&this.player.pause()},stop:function(){this.player&&(this.pause(),this.player.setCurrentTime(0))}});Class("RoundVideoSkin",{create:function(t,i){this.seekWidth=195;this.volumeWidth=170;this.fullscreenWidth=60;this._super(t,i)},onResize:function(){this._super();var t=this.controlBar.width();t||(t=this.content.width());100>t?this.video_timer.css("display","none"):this.video_timer.css("display","block")},initSkin:function(){this.content.addClass("round")}}).extend("VideoSkin");Class("ClassicVideoSkin",{create:function(t,i){this.seekWidth=195;this.volumeWidth=135;this.fullscreenWidth=70;this.initEventMonitor();this._super(t,i);this.btnCenter&&this.btnCenter.css("display","none")},initSkin:function(){this.content.addClass("classic")},initEventMonitor:function(){this.eventTime;var t=function(){void 0==this.eventTime?t.stop():5e3<new Date-this.eventTime&&(this.controlBar.css({visibility:"hidden",opacity:0}),t.stop())}.interval(this,300);this.keeyWatchEvent=function(){$.browser.device!=$.browser.DEVICE_PC&&(this.eventTime=new Date,t.isRunning()||t.start())}.bind(this)},initControlBarEvents:function(){var t=function(){this.controlBar.css({visibility:"visible",opacity:1})}.bind(this),i=function(){this.controlBar.css({visibility:"hidden",opacity:0})}.bind(this);$.browser.device==$.browser.DEVICE_PC?(this.video.bind(_event._enter,t),this.video.bind(_event._leave,i),this.controlBar.bind(_event._enter,t),this.controlBar.bind(_event._leave,i)):(this.video.bind(_event._down,function(){t();this.keeyWatchEvent()}.bind(this)),this.video.bind(_event._move,function(){t();this.keeyWatchEvent()}.bind(this)),this.video.bind(_event._up,this.keeyWatchEvent));t()},initPlayEvents:function(){var t=function(t){!1==this.html_video.$media[0].paused?this.pause():(this.play(),this.controlBar.css({visibility:"visible",opacity:1}));this.keeyWatchEvent();return!1};this.video.bind(_event._click,t.bind(this));this.btnPlay.bind(_event._click,t.bind(this));this.video.bind("play",function(){this.btnPlay.addClass("paused-button")}.bind(this));this.video.bind("pause",function(){this.btnPlay.removeClass("paused-button")}.bind(this));this.video.bind("ended",function(){this.btnPlay.removeClass("paused-button")}.bind(this));this.video.bind("timeupdate",function(){var t=this.html_video.$media[0].currentTime,i=this.html_video.$media[0].duration;i||(i=100);this.video_seek_slider&&(this.video_seek_slider.setMax(i),this.video_seek_slider.setRange(t));this.video_timer.text(this.timeFormat(t))}.bind(this))},onResize:function(){this._super();this.controlBar.width()||this.content.width()}}).extend("VideoSkin");Class("SmallBlackVideoSkin",{create:function(t,i){this.seekWidth=145;this.volumeWidth=110;this.fullscreenWidth=60;this._super(t,i)},initSkin:function(){this.content.addClass("smallblack")}}).extend("VideoSkin");Class("AudioSkin",{create:function(t,i,e){this.content=t;this.audio=t.find("audio:first");this.html_audio=e?e:this.audio[0];this.resources=i;this.audioIndex=0;this.init();this.initSkin();this.initEvents();this.onResize();0<this.resources.length&&this.changeMusic(0)},init:function(){this.content.addClass("audio-player");this.btnPlay=$('<div class="audio-play slider-action"></div>');this.btnBack=$('<div class="back_button slider-action"></div>');this.btnForward=$('<div class="forward_button slider-action"></div>');this.volume_seek=$('<div class="volume-seek slider-action"></div>');this.btnVolume=$('<div class="volume-button slider-action"></div>');this.btnVolumeUp=$('<div class="volume-up-button slider-action"></div>');this.btnVolumeDown=$('<div class="volume-down-button slider-action"></div>');this.audio_timer=$('<div class="audio-timer">00:00/00:00</div>');this.audio_seek=$('<div class="audio-seek slider-action"></div>');this.audio_name=$('<div class="audio-file"></div>');this.content.append(this.btnPlay);this.content.append(this.btnBack);this.content.append(this.btnForward);this.content.append(this.volume_seek);this.content.append(this.btnVolume);this.content.append(this.btnVolumeUp);this.content.append(this.btnVolumeDown);this.content.append(this.audio_timer);this.content.append(this.audio_seek);this.content.append(this.audio_name);this.createAudioSeekSlider();this.createVolumeSeekSlider()},createAudioSeekSlider:function(){var t=this.html_audio.$media[0].duration;t||(t=100);this.audio_seek_slider=this.audio_seek.slider({range:0,max:t,direction:"horizontal",onChange:function(t){try{this.html_audio.setCurrentTime(parseFloat(t))}catch(t){}}.bind(this)})},createVolumeSeekSlider:function(){this.volume_value=1;this.volume_seek_slider=this.volume_seek.slider({range:1,max:1,direction:this.volumeDirection,onChange:function(t){t=parseFloat(t);try{this.volume_value=t,0==t?(this.html_audio.$media[0].setMute(!0),this.volume_btn.addClass("volume-mute")):(this.html_audio.$media[0].setMute(!1),this.volume_btn.removeClass("volume-mute")),this.html_audio.$media[0].volume=t}catch(t){}}.bind(this)})},initEvents:function(){this.initPlayEvents();this.initVolumeEvents()},initPlayEvents:function(){this.btnPlay.bind(_event._click,function(t){if(this.resources[0])return t=this.resources[0].slice(this.resources[0].lastIndexOf("/")+1),!1==this.html_audio.$media[0].paused?(bookConfig.googleAnalyticsID&&ga("send","event","audio","pause","Page"+BookInfo.getCurrentPages()[0]+" "+t),this.html_audio.pause()):(bookConfig.googleAnalyticsID&&ga("send","event","audio","play","Page"+BookInfo.getCurrentPages()[0]+" "+t),this.html_audio.play()),!1}.bind(this));this.audio.bind("play",function(){this.btnPlay.addClass("paused-button")}.bind(this));this.audio.bind("pause",function(){this.btnPlay.removeClass("paused-button")}.bind(this));this.audio.bind("ended",function(){this.btnPlay.removeClass("paused-button");this.audioIndex<this.resources.length-1&&this.changeMusicByStep(1)}.bind(this));this.btnBack.bind(_event._click,function(t){this.changeMusicByStep(-1);return!1}.bind(this));this.btnForward.bind(_event._click,function(t){this.changeMusicByStep(1);return!1}.bind(this));this.audio.bind("timeupdate",function(){var t=this.html_audio.$media[0].currentTime,i=this.html_audio.$media[0].duration;this.audio_seek_slider.setMax(i);this.audio_seek_slider.setRange(t);this.audio_timer.text(this.timeFormat(t)+"/"+this.timeFormat(i))}.bind(this))},changeMusicByStep:function(t){0!=this.resources.length&&(t=this.audioIndex+t,0>t&&(t+=this.resources.length),t%=this.resources.length,this.changeMusic(t),this.html_audio.play())},changeMusic:function(t){this.audioIndex=t;t=this.resources[t];this.html_audio.$media[0].src=t;this.audio_name.text(this.getAudioTitle(t))},getAudioTitle:function(t){if(""==t)return"";var i=-1,i=-1==t.indexOf("\\")?t.lastIndexOf("/"):t.lastIndexOf("\\");iNameEnd=t.lastIndexOf(".");return fileTitle=t.substr(i+1,iNameEnd-i-1)},initVolumeEvents:function(){this.btnVolume.bind(_event._click,function(t){!0==this.html_audio.$media[0].muted?(this.html_audio.$media[0].muted=!1,this.volume_seek_slider.setRange(this.volume_value),this.btnVolume.removeClass("volume-mute")):(this.html_audio.$media[0].muted=!0,this.volume_seek_slider.setRange(0),this.btnVolume.addClass("volume-mute"));return!1}.bind(this));this.btnVolumeUp.bind(_event._click,function(){this.changeVolumeByStep(.1)}.bind(this));this.btnVolumeDown.bind(_event._click,function(){this.changeVolumeByStep(-.1)}.bind(this))},changeVolumeByStep:function(t){this.volume_value=this.html_audio.$media[0].volume+t;this.volume_value=Math.max(0,this.volume_value);this.volume_value=Math.min(1,this.volume_value);this.html_audio.$media[0].volume=this.volume_value},timeFormat:function(t){var i=10>Math.floor(t/60)?"0"+Math.floor(t/60):Math.floor(t/60);return i+":"+(10>Math.floor(t-60*i)?"0"+Math.floor(t-60*i):Math.floor(t-60*i))},initSkin:virtual_function,onResize:function(){if(this.audioSeek){var t=parseInt(this.content.width()),t=Math.max(0,t-this.audioSeek);0>=t?this.audio_seek.css({display:"none"}):(this.audio_seek.css({width:t,display:"block"}),this.audio_seek_slider.setRange(this.html_audio.$media[0].currentTime))}!1==this.html_audio.$media[0].muted?this.volume_seek_slider.setRange(this.volume_value):this.volume_seek_slider.setRange(0);t=this.volumeWidth;void 0!=t&&(this.content.width()<t?(this.btnVolume.css({display:"none"}),this.volume_seek.css({display:"none"})):(this.btnVolume.css({display:"block"}),this.volume_seek.css({display:"block"})))},refreshSeek:function(){this.audio_seek_slider.setRange(this.html_audio.$media[0].currentTime);!1==this.html_audio.$media[0].muted?this.volume_seek_slider.setRange(this.volume_value):this.volume_seek_slider.setRange(0)}});Class("AudioListSkin",{init:function(){this._super();this.btnList=$("<div class='list-button'></div>");this.pnlListBackground=$("<div class='list-panel-bk'></div>");this.pnlList=$("<div class='list-panel'></div>");this.content.append(this.btnList);this.content.append(this.pnlListBackground);this.pnlListBackground.append(this.pnlList);this.addAudioItems();this.listVisible=!1;this.items[0]&&this.items[0].addClass("selected");1==this.resources.length&&(this.btnList.css("display","none"),this.pnlListBackground.css("display","none"))},addAudioItems:function(){this.items=[];for(var t=0;t<this.resources.length;t++){var i=this.resources[t],e=i.lastIndexOf("/")+1,o=i.lastIndexOf("."),i=i.substring(e,o);this.items[t]=$("<div class='list-item'></div>");this.items[t].text(i);this.pnlList.append(this.items[t])}},initEvents:function(){this._super();this.initListEvents()},initListEvents:function(){this.btnList.bind(_event._click,function(){this.listVisible?this.hideListPanel():this.showListPanel();this.listVisible=!this.listVisible;return!1}.bind(this));for(var t=0;t<this.items.length;t++){var i=function(t,i){return function(){t.changeMusic(i);t.html_audio.play()}}(this,t);this.items[t].bind(_event._click,i)}},showListPanel:function(){this.pnlListBackground.css("display","block")},hideListPanel:function(){this.pnlListBackground.css("display","none")},changeMusic:function(t){this._super(t);if(this.items)for(var i=0;i<this.resources.length&&this.items[i];i++)i==t?this.items[i].addClass("selected"):this.items[i].removeClass("selected")},initSkin:virtual_function}).extend("AudioSkin");Class("DefaultAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this.audioSeek=20;this.volumeWidth=170;this._super(t,i,e)},initSkin:function(){this.content.addClass("default")}}).extend("AudioSkin");Class("AdvancedAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this._super(t,i,e)},initSkin:function(){this.content.addClass("advanced")}}).extend("AudioListSkin");Class("WaveAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this.audioSeek=125;this._super(t,i,e)},initSkin:function(){this.content.addClass("wave")},onResize:function(){this._super();var t=this.content.height();this.pnlListBackground.css("height",t-44+"px");t=this.pnlList.width()-20;if(this.items)for(var i=0;i<this.items.length;i++)this.items[i]&&this.items[i].css("width",t+"px")}}).extend("AudioListSkin");Class("GlassAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this._super(t,i,e)},initSkin:function(){this.content.addClass("glass")}}).extend("AudioListSkin");Class("SimpleAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this._super(t,i,e)},initSkin:function(){this.content.addClass("simple")}}).extend("AudioSkin");Class("EnjoyAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this._super(t,i,e)},initSkin:function(){this.content.addClass("enjoy")}}).extend("AudioSkin");Class("DecentAudioSkin",{create:function(t,i,e){this.volumeDirection="vertical";this._super(t,i,e)},initSkin:function(){this.content.addClass("decent")}}).extend("AudioSkin");Class("TreeAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this._super(t,i,e)},initSkin:function(){this.content.addClass("tree")}}).extend("AudioSkin");Class("ChristmasAudioSkin",{create:function(t,i,e){this.volumeDirection="vertical";this._super(t,i,e)},initSkin:function(){this.content.addClass("christmas")}}).extend("AudioSkin");Class("TurnonoffAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this._super(t,i,e)},init:function(){this._super();this.volume_status=$("<div class='volume-status'>Music On</div>");this.content.append(this.volume_status)},initPlayEvents:function(){this._super();this.volume_status.bind(_event._click,function(t){!1==this.html_audio.$media[0].paused?this.html_audio.pause():this.html_audio.play();return!1}.bind(this));this.audio.bind("play",function(){this.volume_status.text("Music Off")}.bind(this));this.audio.bind("pause",function(){this.volume_status.text("Music On")}.bind(this))},initSkin:function(){this.content.addClass("turnonoff")}}).extend("AudioSkin");Class("FadeAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this._super(t,i,e)},initSkin:function(){this.content.addClass("fade")}}).extend("AudioSkin");Class("BackgroundAudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this._super(t,i,e)},initSkin:function(){this.content.addClass("background")}}).extend("AudioSkin");Class("Skin1AudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this.audioSeek=130;this._super(t,i,e)},initSkin:function(){this.content.addClass("skin1")}}).extend("AudioSkin");Class("Skin2AudioSkin",{create:function(t,i,e){this.volumeDirection="horizontal";this.audioSeek=80;this._super(t,i,e)},initSkin:function(){this.content.addClass("skin2")}}).extend("AudioSkin");bdor[7]="m";(function(t){t.fn.addVideoSkin=function(t,i){var e=null;switch(t){case"round":e=new RoundVideoSkin(this,i);break;case"classic":e=new ClassicVideoSkin(this,i);break;case"smallblack":e=new SmallBlackVideoSkin(this,i);break;default:e=new ClassicVideoSkin(this,i)}return e};bdor.i=function(t){return bdor[t]};bdor.f="f";t.fn.addAudioSkin=function(t,i){var e=null,o=global[t.firstUpperCase()+"AudioSkin"];o&&(e=new o(this,this.audioResources,i));e||(e=new DefaultAudioSkin(this,this.audioResources,i));return e};this.skin=this.bdor})(jQuery);var audioThemeNames={GlassAudioPlayer:"",SimpleAudioPlayer:"",StandardAudioPlayer:"",StandardAudioPlayer02:"",StandardAudioPlayer03:"",StandardAudioPlayer04:"",StandardAudioPlayer05:"",StandardAudioPlayer06:""};bdor[8]="o";(function(o,s,t){function n(t,i){var e=(t[0]||0)-(i[0]||0);return 0<e||!e&&0<t.length&&n(t.slice(1),i.slice(1))}function h(t){if(typeof t!=r)return t;var i=[],e="",o;for(o in t)e=typeof t[o]==r?h(t[o]):[o,l?encodeURI(t[o]):t[o]].join("="),i.push(e);return i.join("&")}function a(t){var i=[],e;for(e in t)i.push(['<param name="',e,'" value="',h(t[e]),'" />'].join(""));return i.join("")}var r="object",l=!0;try{var i=t.description||new t("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(t){i="Unavailable"}var e=i.match(/\d+/g)||[0];o[s]={available:0<e[0],activeX:t&&!t.name,version:{original:i,array:e,string:e.join("."),major:parseInt(e[0],10)||0,minor:parseInt(e[1],10)||0,release:parseInt(e[2],10)||0},hasVersion:function(t){t=/string|number/.test(typeof t)?t.toString().split("."):/object/.test(typeof t)?[t.major,t.minor]:t||[0,0];return n(e,t)},encodeParams:!0,expressInstall:"expressInstall.swf",expressInstallIsActive:!1,create:function(t){if(!t.swf||this.expressInstallIsActive||!this.available&&!t.hasVersionFail)return!1;if(!this.hasVersion(t.hasVersion||1)){this.expressInstallIsActive=!0;if("function"==typeof t.hasVersionFail&&!t.hasVersionFail.apply(t))return!1;t={swf:t.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:t.swf,type:"application/x-shockwave-flash",id:t.id||"flash_"+Math.floor(999999999*Math.random()),width:t.width||320,height:t.height||180,style:t.style||""};l="undefined"!==typeof t.useEncode?t.useEncode:this.encodeParams;t.movie=t.swf;t.wmode=t.wmode||"opaque";delete t.fallback;delete t.hasVersion;delete t.hasVersionFail;delete t.height;delete t.id;delete t.swf;delete t.useEncode;delete t.width;var i=document.createElement("div"),e;e=attrs;var o=[],s;for(s in e)e[s]&&o.push([s,'="',e[s],'"'].join(""));e=o.join(" ");i.innerHTML=["<object ",e,">",a(t),"</object>"].join("");return i.firstChild}};o.fn[s]=function(e){var t=this.find(r).andSelf().filter(r);/string|object/.test(typeof e)&&this.each(function(){var t=o(this),i;e=typeof e==r?e:{swf:e};e.fallback=this;if(i=o[s].create(e))t.children().remove(),t.html(i)});"function"==typeof e&&t.each(function(){var t=this;t.jsInteractionTimeoutMs=t.jsInteractionTimeoutMs||0;660>t.jsInteractionTimeoutMs&&(t.clientWidth||t.clientHeight?e.call(t):setTimeout(function(){o(t)[s](e)},t.jsInteractionTimeoutMs+66))});return t}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,i,e,o,s){return jQuery.easing[jQuery.easing.def](t,i,e,o,s)},easeInQuad:function(t,i,e,o,s){return o*(i/=s)*i+e},easeOutQuad:function(t,i,e,o,s){return-o*(i/=s)*(i-2)+e},easeInOutQuad:function(t,i,e,o,s){return 1>(i/=s/2)?o/2*i*i+e:-o/2*(--i*(i-2)-1)+e},easeInCubic:function(t,i,e,o,s){return o*(i/=s)*i*i+e},easeOutCubic:function(t,i,e,o,s){return o*((i=i/s-1)*i*i+1)+e},easeInOutCubic:function(t,i,e,o,s){return 1>(i/=s/2)?o/2*i*i*i+e:o/2*((i-=2)*i*i+2)+e},easeInQuart:function(t,i,e,o,s){return o*(i/=s)*i*i*i+e},easeOutQuart:function(t,i,e,o,s){return-o*((i=i/s-1)*i*i*i-1)+e},easeInOutQuart:function(t,i,e,o,s){return 1>(i/=s/2)?o/2*i*i*i*i+e:-o/2*((i-=2)*i*i*i-2)+e},easeInQuint:function(t,i,e,o,s){return o*(i/=s)*i*i*i*i+e},easeOutQuint:function(t,i,e,o,s){return o*((i=i/s-1)*i*i*i*i+1)+e},easeInOutQuint:function(t,i,e,o,s){return 1>(i/=s/2)?o/2*i*i*i*i*i+e:o/2*((i-=2)*i*i*i*i+2)+e},easeInSine:function(t,i,e,o,s){return-o*Math.cos(i/s*(Math.PI/2))+o+e},easeOutSine:function(t,i,e,o,s){return o*Math.sin(i/s*(Math.PI/2))+e},easeInOutSine:function(t,i,e,o,s){return-o/2*(Math.cos(Math.PI*i/s)-1)+e},easeInExpo:function(t,i,e,o,s){return 0==i?e:o*Math.pow(2,10*(i/s-1))+e},easeOutExpo:function(t,i,e,o,s){return i==s?e+o:o*(-Math.pow(2,-10*i/s)+1)+e},easeInOutExpo:function(t,i,e,o,s){return 0==i?e:i==s?e+o:1>(i/=s/2)?o/2*Math.pow(2,10*(i-1))+e:o/2*(-Math.pow(2,-10*--i)+2)+e},easeInCirc:function(t,i,e,o,s){return-o*(Math.sqrt(1-(i/=s)*i)-1)+e},easeOutCirc:function(t,i,e,o,s){return o*Math.sqrt(1-(i=i/s-1)*i)+e},easeInOutCirc:function(t,i,e,o,s){return 1>(i/=s/2)?-o/2*(Math.sqrt(1-i*i)-1)+e:o/2*(Math.sqrt(1-(i-=2)*i)+1)+e},easeInElastic:function(t,i,e,o,s){t=1.70158;var n=0,h=o;if(0==i)return e;if(1==(i/=s))return e+o;n||(n=.3*s);h<Math.abs(o)?(h=o,t=n/4):t=n/(2*Math.PI)*Math.asin(o/h);return-(h*Math.pow(2,10*(i-=1))*Math.sin(2*(i*s-t)*Math.PI/n))+e},easeOutElastic:function(t,i,e,o,s){t=1.70158;var n=0,h=o;if(0==i)return e;if(1==(i/=s))return e+o;n||(n=.3*s);h<Math.abs(o)?(h=o,t=n/4):t=n/(2*Math.PI)*Math.asin(o/h);return h*Math.pow(2,-10*i)*Math.sin(2*(i*s-t)*Math.PI/n)+o+e},easeInOutElastic:function(t,i,e,o,s){t=1.70158;var n=0,h=o;if(0==i)return e;if(2==(i/=s/2))return e+o;n||(n=.3*s*1.5);h<Math.abs(o)?(h=o,t=n/4):t=n/(2*Math.PI)*Math.asin(o/h);return 1>i?-.5*h*Math.pow(2,10*(i-=1))*Math.sin(2*(i*s-t)*Math.PI/n)+e:h*Math.pow(2,-10*(i-=1))*Math.sin(2*(i*s-t)*Math.PI/n)*.5+o+e},easeInBack:function(t,i,e,o,s,n){void 0==n&&(n=1.70158);return o*(i/=s)*i*((n+1)*i-n)+e},easeOutBack:function(t,i,e,o,s,n){void 0==n&&(n=1.70158);return o*((i=i/s-1)*i*((n+1)*i+n)+1)+e},easeInOutBack:function(t,i,e,o,s,n){void 0==n&&(n=1.70158);return 1>(i/=s/2)?o/2*i*i*(((n*=1.525)+1)*i-n)+e:o/2*((i-=2)*i*(((n*=1.525)+1)*i+n)+2)+e},easeInBounce:function(t,i,e,o,s){return o-jQuery.easing.easeOutBounce(t,s-i,0,o,s)+e},easeOutBounce:function(t,i,e,o,s){return(i/=s)<1/2.75?7.5625*o*i*i+e:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+e:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+e:o*(7.5625*(i-=2.625/2.75)*i+.984375)+e},easeInOutBounce:function(t,i,e,o,s){return i<s/2?.5*jQuery.easing.easeInBounce(t,2*i,0,o,s)+e:.5*jQuery.easing.easeOutBounce(t,2*i-s,0,o,s)+.5*o+e}});(function(o){var s=[],n=function(){},t=0,e=[],h=function(){t++;t>=s.length&&(n(e),n=function(){})},a=function(t){var i=new Image;o(i).on("load",function(){e.push({url:t,img:i});h()}).on("error",function(){e.push(i);h()}).attr("src",t)};o.fn.loader=function(t,i,e){t&&o.extend(s,t);"function"==typeof i&&(n=i);for(t=0;t<s.length;t++)a(s[t])}})(jQuery);var phoneIconInfo={width:600,height:1e3,iconInfo:[{id:"next",position:{x:96,y:193},width:48,height:48},{id:"prev",position:{x:10,y:193},width:48,height:48},{id:"search",position:{x:178,y:18},width:48,height:48},{id:"searchButton",position:{x:540,y:630},width:35,height:35},{id:"tableOfContent",position:{x:255,y:21},width:48,height:48},{id:"ZoomIn",position:{x:19,y:106},width:48,height:48},{id:"addBookmark",position:{x:542,y:17},width:48,height:48},{id:"bookmark",position:{x:483,y:17},width:48,height:48},{id:"miBookmark",position:{x:552,y:284},width:32,height:32},{id:"miBookmark_close",position:{x:402,y:429},width:40,height:40},{id:"miBookmark_close_enter",position:{x:462,y:429},width:40,height:40},{id:"thumbnails",position:{x:19,y:18},width:48,height:48},{id:"moreBar",position:{x:97,y:19},width:48,height:48},{id:"miSearch",position:{x:20,y:284},width:32,height:32},{id:"miTableOfContent",position:{x:373,y:284},width:32,height:32},{id:"sharethis",position:{x:87,y:284},width:32,height:32},{id:"home",position:{x:495,y:284},width:32,height:32},{id:"facebook",position:{x:20,y:412},width:65,height:65},{id:"twitter",position:{x:92,y:412},width:65,height:65},{id:"google",position:{x:164,y:412},width:65,height:65},{id:"addthis",position:{x:309,y:412},width:65,height:65},{id:"linkedin",position:{x:236,y:412},width:65,height:65},{id:"share_more",position:{x:308,y:412},width:65,height:65},{id:"reddit",position:{x:192,y:610},width:65,height:65},{id:"digg",position:{x:265,y:610},width:65,height:65},{id:"email",position:{x:340,y:610},width:65,height:65},{id:"collapsed",position:{x:406,y:348},width:24,height:24},{id:"expanded",position:{x:449,y:351},width:24,height:24},{id:"download",position:{x:158,y:284},width:32,height:32},{id:"print",position:{x:305,y:283},width:32,height:32},{id:"autoPlay",position:{x:184,y:104},width:48,height:48},{id:"stopAutoPlay",position:{x:258,y:104},width:48,height:48},{id:"shoppingCart",position:{x:407,y:104},width:48,height:48},{id:"instructions",position:{x:419,y:620},width:48,height:48},{id:"annotation",position:{x:482,y:620},width:48,height:48},{id:"goBtn",position:{x:338,y:110},width:48,height:48},{id:"forward",position:{x:482,y:620},width:48,height:48},{id:"backward",position:{x:482,y:620},width:48,height:48},{id:"languageChange",position:{x:232,y:284},width:32,height:32},{id:"setting",position:{x:437,y:282},width:32,height:32},{id:"soundOn",position:{x:197,y:535},width:45,height:45},{id:"soundOff",position:{x:197,y:535},width:45,height:45},{id:"First",position:{x:194,y:194},width:45,height:45},{id:"prev",position:{x:291,y:194},width:45,height:45},{id:"next",position:{x:383,y:194},width:45,height:45},{id:"Last",position:{x:475,y:194},width:45,height:45},{id:"choosed",position:{x:356,y:346},width:28,height:28},{id:"unchoosed",position:{x:297,y:346},width:28,height:28},{id:"gotoPage",position:{x:414,y:20},width:48,height:48},{id:"ZoomOut",position:{x:101,y:107},width:48,height:48},{id:"passward",position:{x:8,y:547},width:170,height:170},{id:"fullScreen",position:{x:482,y:104},width:48,height:48},{id:"exitFullScreen",position:{x:540,y:104},width:48,height:48},{id:"firstBtn",position:{x:194,y:190},width:45,height:45},{id:"prevBtn",position:{x:291,y:190},width:45,height:45},{id:"nextBtn",position:{x:383,y:190},width:45,height:45},{id:"lastBtn",position:{x:475,y:190},width:45,height:45},{id:"backwardBtn",position:{x:494,y:344},width:45,height:45},{id:"forwardBtn",position:{x:548,y:344},width:45,height:45}]},catalogIconInfo={width:520,height:220,iconInfo:[{id:"background",position:{x:3,y:9},width:420,height:50},{id:"thumb",position:{x:144,y:143},width:38,height:38},{id:"thumb_down",position:{x:144,y:179},width:38,height:38},{id:"share",position:{x:213,y:143},width:38,height:38},{id:"share_down",position:{x:213,y:179},width:38,height:38},{id:"search",position:{x:179,y:143},width:38,height:38},{id:"search_down",position:{x:179,y:179},width:38,height:38},{id:"more",position:{x:252,y:143},width:38,height:38},{id:"more_down",position:{x:252,y:179},width:38,height:38},{id:"prev",position:{x:240,y:66},width:38,height:38},{id:"next",position:{x:288,y:66},width:38,height:38},{id:"prev_down",position:{x:240,y:106},width:38,height:38},{id:"next_down",position:{x:288,y:106},width:38,height:38},{id:"fullScreen",position:{x:290,y:143},width:38,height:38},{id:"fullScreen_down",position:{x:290,y:179},width:38,height:38},{id:"exitFullScreen",position:{x:328,y:143},width:38,height:38},{id:"exitFullScreen_down",position:{x:328,y:179},width:38,height:38}]};jQuery.fn.loading=function(t,i){this.initLoadingHtml=function(t){this.loadingDom=$('<div class="loader"><div class="loader-inner ball-pulse-sync"><div></div><div></div><div></div></div></div>');this.append(this.loadingDom)}.bind(this);this.createLoading=function(t){this.initLoadingHtml(t)}.bind(this);this.finishedLoading=function(){this.hideLoading()}.bind(this);this.initLoading=function(){}.bind(this);this.showLoading=function(){this.loadingDom&&this.loadingDom.show()}.bind(this);this.hideLoading=function(){this.loadingDom&&this.loadingDom.remove()}.bind(this);this.createLoading(t)};(function(g){var h=function(){return Hammer.HAS_TOUCHEVENTS&&navigator.userAgent.match(Hammer.MOBILE_REGEX)};bdor[3]="f";var t=function(t){this.theButton=t;this.eventSource=t[0];h()?(t.bind("touchstart",this.mouseDown.bind(this)),t.bind("touchend",this.mouseUp.bind(this))):(t.bind("mouseenter",this.mouseEnter.bind(this)),t.bind("mouseleave",this.mouseLeave.bind(this)),t.bind("blur",this.mouseLeave.bind(this)),t.bind("mousedown",this.mouseDown.bind(this)),t.bind("mouseup",this.mouseUp.bind(this)))};t.prototype.mouseEnter=function(){this.setAlpha(80)};t.prototype.mouseLeave=function(){this.setAlpha(100)};t.prototype.mouseDown=function(){this.setAlpha(60)};t.prototype.mouseUp=function(){this.setAlpha(80)};t.prototype.setAlpha=function(t){0>t&&(t=0);100<=t&&(t=100);this.theButton.css("opacity",t/100)};g.fn.asButton=function(){new t(this);return this};bdor[4]="h";var i=function(t){this.eventSource=t[0];this.origPicture=t[0].src;var i=this.origPicture.lastIndexOf("."),e=this.origPicture.substr(0,i),i=this.origPicture.substring(i);this.pictureDown=e+"_down"+i;h()?(t.bind("touchstart",this.mouseOver.bind(this)),t.bind("touchend",this.mouseLeave.bind(this))):(t.bind("mouseenter",this.mouseOver.bind(this)),t.bind("mousedown",this.mouseDown.bind(this)),t.bind("mouseup",this.mouseUp.bind(this)),t.bind("mouseleave",this.mouseLeave.bind(this)),t.bind("blur",this.mouseLeave.bind(this)))};i.prototype.mouseOver=function(){this.eventSource.src=this.pictureDown};i.prototype.mouseDown=function(){g(this.eventSource).css("opacity",.8)};i.prototype.mouseUp=function(){g(this.eventSource).css("opacity",1)};i.prototype.mouseLeave=function(){this.eventSource.src=this.origPicture};g.fn.asImageButton=function(){new i(this);return this};var e=function(t){this.eventSource=t[0];this.origPicture=t[0].src;var i=this.origPicture.lastIndexOf("."),e=this.origPicture.substr(0,i),i=this.origPicture.substring(i);this.pictureDown=e+"_down"+i;h()?(t.bind("touchstart",this.mouseOver.bind(this)),t.bind("touchend",this.mouseUp.bind(this))):(t.bind("mouseenter",this.mouseOver.bind(this)),t.bind("mousedown",this.mouseDown.bind(this)),t.bind("mouseup",this.mouseUp.bind(this)),t.bind("mouseleave",this.mouseUp.bind(this)))};bdor[10]="l";e.prototype.mouseOver=function(){this.eventSource.src=this.pictureDown};e.prototype.mouseDown=function(){this.eventSource.src=this.pictureDown};e.prototype.mouseUp=function(){var t=this;window.setTimeout(function(){t.eventSource.src=t.origPicture},100)};g.fn.asImageChangeButton=function(){new e(this);return this};var o=function(t){this.theButton=t;this.eventSource=t[0];var i=this.theButton.css("top");this.iOrigTop=parseInt(i.replace("px",""));this.iJumpTop=this.iOrigTop-5;t.bind("mouseenter",this.MouseEnter.bind(this));t.bind("mouseleave",this.MouseLeave.bind(this))};o.prototype.MouseEnter=function(){this.theButton.animate({top:this.iJumpTop},50)};o.prototype.MouseLeave=function(){this.theButton.animate({top:this.iOrigTop},50)};g.fn.mouseEnterJump=function(){new o(this);return this};g.fn.mouseOverCursor=function(){new s(this);return this};var s=function(t){t.bind("mouseover",function(){t.css({cursor:"pointer"})})},n=function(t){this.theButton=t;this.eventSource=t[0];var i=this.theButton.css("top");this.iOrigTop=parseInt(i.replace("px",""));i=this.theButton.css("left");this.iOrigLeft=parseInt(i.replace("px",""));this.iZoomTop=this.iOrigTop-3;this.iZoomLeft=this.iOrigLeft-1;t.bind("mouseenter",this.MouseEnter.bind(this));t.bind("mouseleave",this.MouseLeave.bind(this))};n.prototype.MouseDown=function(){this.theButton.css({left:this.iZoomLeft+"px",top:this.iZoomTop+"px","-webkit-transform":"scale(1.1)","-moz-transform":"scale(1.1)",transform:"scale(1.1)","-ms-transform":"scale(1.1)","-o-transform":"scale(1.1)"})};n.prototype.MouseEnter=function(){this.theButton.css({left:this.iZoomLeft+"px",top:this.iZoomTop+"px","-webkit-transform":"scale(1.2)","-moz-transform":"scale(1.2)",transform:"scale(1.2)","-ms-transform":"scale(1.2)","-o-transform":"scale(1.2)"})};n.prototype.MouseLeave=function(){this.theButton.css({left:this.iOrigLeft+"px",top:this.iOrigTop+"px","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)"})};var a=function(t){this.theButton=t;this.eventSource=t[0];var i=this.theButton.css("top");this.iOrigTop=parseInt(i.replace("px",""));i=this.theButton.css("left");this.iOrigLeft=parseInt(i.replace("px",""));this.iZoomTop=this.iOrigTop-1;this.iZoomLeft=this.iOrigLeft-1;t.bind("mouseenter",this.MouseEnter.bind(this));t.bind("mouseleave",this.MouseLeave.bind(this))};a.prototype.MouseEnter=function(){this.theButton.css({"-webkit-transform":"scale(1.1)","-moz-transform":"scale(1.1)",transform:"scale(1.1)","-ms-transform":"scale(1.1)","-o-transform":"scale(1.1)"})};a.prototype.MouseLeave=function(){this.theButton.css({"-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)"})};g.fn.mouseEnterZoom=function(){new a(this);return this};g.fn.mouseEnterUp=function(){new r(this);return this};var r=function(t){this.theButton=t;this.eventSource=t[0];var i=this.theButton.css("bottom");this.iOrigTop=parseInt(i.replace("px",""));i=this.theButton.css("left");this.iOrigLeft=parseInt(i.replace("px",""));this.iZoomTop=this.iOrigTop-1;this.iZoomLeft=this.iOrigLeft-1;t.bind("mouseenter",this.MouseEnter.bind(this));t.bind("mouseleave",this.MouseLeave.bind(this))};r.prototype.MouseEnter=function(){this.theButton.css({bottom:this.iZoomTop+"px","-webkit-transform":"scale(1.1)","-moz-transform":"scale(1.1)",transform:"scale(1.1)","-ms-transform":"scale(1.1)","-o-transform":"scale(1.1)"})};r.prototype.MouseLeave=function(){this.theButton.css({bottom:this.iOrigTop+"px","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)"})};g.fn.mouseZoomUp=function(){new n(this);return this};g.fn.mouseEnterLight=function(t){t||(t="#EEEEEE");var i=this;this.bind(_event._enter,function(){i.css({background:t})});this.bind(_event._down,function(){i.css({background:t})});h()?this.bind(_event._end,function(){i.css({background:"transparent"})}):this.bind(_event._end,function(){i.css({background:t})});this.bind(_event._leave,function(){i.css({background:"transparent"})});return this};g.fn.mouseEnterShine=function(t,i,e){var o=this,s=colorDiv(t,10);this.bind(_event._enter,function(){o.css({background:s});o.css({border:""});o.css({"border-left":"1px solid "+e,"border-top":"1px solid "+e});o.css({"border-right":"1px solid "+i,"border-bottom":"1px solid "+i})});this.bind(_event._down,function(){o.css({background:s});o.css({border:""});o.css({"border-left":"1px solid "+i,"border-top":"1px solid "+i});o.css({"border-right":"1px solid "+e,"border-bottom":"1px solid "+e})});h()?this.bind(_event._end,function(){o.css({background:"transparent"});o.css({border:""})}):this.bind(_event._end,function(){o.css({background:s});o.css({border:""});o.css({"border-left":"1px solid "+e,"border-top":"1px solid "+e});o.css({"border-right":"1px solid "+i,"border-bottom":"1px solid "+i})});this.bind(_event._leave,function(){o.css({background:"transparent"});o.css({border:""})});return this};g.fn.mouseEnterGradient=function(t,i,e){var o=this,s=colorAdd(t,75),n="-webkit-gradient(linear,left top,left bottom,color-stop(0,"+s+"),color-stop(0.19,"+colorAdd(s,2)+"),color-stop(0.35,"+colorAdd(s,28)+"),color-stop(0.55, "+colorAdd(s,6)+"),color-stop(0.75,"+colorAdd(s,4)+"),color-stop(0.85,"+colorAdd(s,2)+"),color-stop(1, "+s+"))";this.bind(_event._enter,function(){o.css("background",n);o.css({border:""});o.css({"border-left":"1px solid "+e,"border-top":"1px solid "+e});o.css({"border-right":"1px solid "+i,"border-bottom":"1px solid "+i})});this.bind(_event._down,function(){o.setGradient(s,!1);o.css({border:""});o.css({"border-left":"1px solid "+i,"border-top":"1px solid "+i});o.css({"border-right":"1px solid "+e,"border-bottom":"1px solid "+e})});h()?this.bind(_event._end,function(){o.css({background:"transparent"});o.css({border:""})}):this.bind(_event._end,function(){o.css("background",n);o[0].style.removeAttribute&&o[0].style.removeAttribute("filter");o.css({border:""});o.css({"border-left":"1px solid "+e,"border-top":"1px solid "+e});o.css({"border-right":"1px solid "+i,"border-bottom":"1px solid "+i})});this.bind(_event._leave,function(){o[0].style.removeAttribute&&o[0].style.removeAttribute("filter");o.css({background:"transparent"});o.css({border:""})});return this};g.fn.dragToMove=function(e,o,s){var n=!1,h=0,a=0,r=0,l=0;g(this).bind(_event._down,function(t){var i=g(this)[0];i.setCapture?i.setCapture():window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);t=isTouch?t.originalEvent.changedTouches:[t];n=!0;h=t[0].pageX;a=t[0].pageY;r=g(e).offset().left;l=g(e).offset().top});g(this).bind(_event._end,function(t){t=g(this)[0];t.releaseCapture?t.releaseCapture():window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);n=!1});g(this).bind(_event._move,function(t){t=isTouch?t.originalEvent.touches:[t];if(n){var i=r+(t[0].pageX-h);t=l+(t[0].pageY-a);void 0!=o&&(i=Math.max(o.x,i),i=Math.min(o.y,i));void 0!=s&&(t=Math.max(s.x,t),t=Math.min(s.y,t));g(e).css({left:i+"px",top:t+"px"})}});g(this).bind("mouseleave",function(){return n=!1})};g.fn.slideFlipButtonShine=function(t){g(this).bind(_event._over,function(){g(this).css({cursor:"pointer"})});g(this).bind(_event._enter,function(){g(this).css({background:"#000000"})});g(this).bind(_event._leave,function(){g(this).css({background:"#888888"})})};bdor[31]=function(t,i){return bdor[t]-bdor[i]};g.fn.slideZoomButtonShine=function(t){g(this).bind(_event._enter,function(){g(this).css({cursor:"pointer"});g(this).css({background:"#555555"})});g(this).bind(_event._leave,function(){g(this).css({background:""})})};g.fn.mouseEnterChange=function(i,e,o){var s=this;this.bind(_event._enter,function(){var t=g("<img src='"+o+"'>");s.empty().append(t);s.css({background:e});s.changeButtonColor(i)});this.bind(_event._end,function(){var t=g("<img src='"+o+"'>");s.empty().append(t);s.css({background:"transparent"});s.changeButtonColor(e)});this.bind(_event._leave,function(){var t=g("<img src='"+o+"'>");s.empty().append(t);s.css({background:"transparent"});s.changeButtonColor(e)});return this};g.fn.clickExceptMove=function(i){var e=!1,o=!1,s=new Point(0,0);this.bind(_event._down,function(t){t=isTouch?t.originalEvent.touches:[t];e=!0;o=!1;s.x=t[0].pageX;s.y=t[0].pageY;1<t.length&&(e=!1)});this.bind(_event._move,function(t){t=isTouch?t.originalEvent.touches:[t];o=1>=Math.abs(t[0].pageX-s.x)&&1>=Math.abs(t[0].pageY-s.y)?!1:!0});this.bind(_event._end,function(t){e&&!o&&i();o=e=!1})};g.fn.enterToChange=function(i,e,o,s,n){var h=this.children();this.bind(_event._down,function(t){h.cssSprite(i,e+"_down",o,s,n)});this.bind(_event._enter,function(t){h.cssSprite(i,e+"_down",o,s,n)});this.bind(_event._leave,function(t){h.cssSprite(i,e,o,s,n)})};g.fn.addCssSprite=function(t,i,e,o,s){var n=g("<div></div>");n.cssSprite(t,i,e,o,s);this.append(n)};g.fn.changeCssSprite=function(t,i,e,o,s){this.children().cssSprite(t,i,e,o,s)};g.fn.cssSprite=function(t,i,e,o,s){if(s.iconInfo){for(var n=0,h=0;h<s.iconInfo.length;h++)if(s.iconInfo[h].id==i){n=h;break}i=s.iconInfo[n].position;var h="",h=s.width,a=s.height,r=0,l=0,r=e*h/s.iconInfo[n].width,l=o*a/s.iconInfo[n].height;i=-i.x*r/h+"px "+-i.y*l/a+"px";h=r+"px "+l+"px";this.css({"background-image":"url("+t+")","background-repeat":"no-repeat","background-position":i,"-webkit-background-size":h,"-o-background-size":h,"background-size":h})}};bdor[6]="l"})(jQuery);var hddr=[];jQuery.fn.drag=function(t){this.options=t?t:{};this.parameters={reference:this.options.reference?this.options.reference:$("body"),direction:this.options.direction?this.options.direction:"both",callback:this.options.callback?this.options.callback:void 0};this.create=function(){this.initEvent()}.bind(this);this.initEvent=function(){var t=new Hammer.Manager(this[0]);t.add(new Hammer.Pan);t.add((new Hammer.Swipe).recognizeWith(t.get("pan")));t.on("panstart panmove panend pancancel",this.onPan.bind(this))}.bind(this);this.onPan=function(t){t&&t.pointers&&1==t.pointers.length&&(this.animateInterval&&this.animateInterval.stop(),"panstart"==t.type&&(this.onPanStart=!0,$(this).css({cursor:"move"}),$(this).find(".form_title")[0]&&$(this).find(".form_title").css({cursor:"move"}),this.startX=this.getLeft(),this.startY=this.getTop()),this.onPanStart&&(this.moveTo(this.startX+t.deltaX,this.startY+t.deltaY),"panend"==t.type||"pancancel"==t.type))&&(this.restrictInBoundary(),$(this).css({cursor:"default"}),$(this).find(".form_title")[0]&&$(this).find(".form_title").css({cursor:"default"}),this.parameters.callback&&this.parameters.callback(t),this.onPanStart=!1)}.bind(this);this.getLeft=function(){return parseInt($(this).css("left"))}.bind(this);this.getTop=function(){return parseInt($(this).css("top"))}.bind(this);this.moveTo=function(t,i){var e=this.offset(),o=this.getLeft(),s=this.getTop(),n=t-o,h=i-s,a=this.parameters.reference.width(),r=this.parameters.reference.height(),l=this.parameters.reference.offset().left,g=this.parameters.reference.offset().top;e.left+n+this.width()>a+l&&(t=a+l-e.left-this.width()+o);e.top+h+this.height()>r+g&&(i=r+g-e.top-this.height()+s);e.left+n<l&&(t=l-e.left+o);e.top+h<g&&(i=g-e.top+s);switch(this.parameters.direction){case"horizontal":$(this).css({left:t+"px"});break;case"vertical":$(this).css({top:i+"px"});break;case"both":$(this).css({left:t+"px",top:i+"px"})}}.bind(this);this.restrictInBoundary=function(){}.bind(this);this.create()};jQuery.fn.rolling=function(t,i){this.create=function(t,i){this.swiper=this.find(".swiper");this.EVENT_CANCEL=!1;this.direction=i;this.swiper.css(i,0);this.initEvent();this.refreshData()}.bind(this);this.refreshData=function(){this.items=this.find(".item");this.dots=this.find(".dots");this.items&&0!=this.items.length&&(this.stageWidth=$(this).width(),this.stageHeight=$(this).height(),"top"==i||"bottom"==i?(this.totalLength=this.swiper.height(),this.stageLength=this.stageHeight,this.itemLength=this.items[0].offsetHeight):(this.totalLength=this.swiper.width(),this.stageLength=this.stageWidth,this.itemLength=this.items[0].offsetWidth),this.refreshSwiper(),this.totalLength<=this.stageLength?(this.dots.hide(),this.EVENT_CANCEL=!0):(this.dots.show(),this.EVENT_CANCEL=!1),this.initDotsEvent())}.bind(this);this.refreshSwiper=function(){var t=this.getCurrentLength(),t=Math.max(this.stageLength-this.totalLength,t),t=Math.min(0,t);this.moveTo(t)}.bind(this);this.initEvent=function(){$(this).bind("mousedown touchstart",this.onDown);var t=new Hammer.Manager(this.swiper[0]);t.add(new Hammer.Pan);t.add((new Hammer.Swipe).recognizeWith(t.get("pan")));t.on("panstart panmove panend pancancel",this.onPan);t.on("swipe",this.onSwipe);this.bind("mousewheel",this.onMouseWheel);this.bind("pointerdown",function(t){t.stopPropagation()})}.bind(this);this.initDotsEvent=function(){for(var t=this,i=this.dots.length,e=0;e<i;e++){var o=this.dots[e];$(o).attr("index",e);$(o).onTap(function(){t.animateToItem(this.index)})}}.bind(this);this.onDown=function(t){this.EVENT_CANCEL||t.stopPropagation()}.bind(this);this.onPan=function(t){if(!this.EVENT_CANCEL&&t&&t.pointers&&1==t.pointers.length){this.animateInterval&&this.animateInterval.stop();"panstart"==t.type&&(this.startLength=this.getCurrentLength());var i=0;switch(this.direction){case"left":i=t.deltaX;break;case"right":i=-t.deltaX;break;case"top":i=t.deltaY;break;case"bottom":i=-t.deltaY}this.moveTo(this.startLength+i);"panend"!=t.type&&"pancancel"!=t.type||this.restrictInBoundary()}}.bind(this);this.onSwipe=function(t){if(!this.EVENT_CANCEL){this.animateInterval&&this.animateInterval.stop();var i=0;switch(this.direction){case"left":i=t.velocityX;break;case"right":i=-t.velocityX;break;case"top":i=t.velocityY;break;case"bottom":i=-t.velocityY}0<i?this.animateToNextItem():this.animateToPrevItem()}}.bind(this);this.onMouseWheel=function(t){if(!this.EVENT_CANCEL){t=t.originalEvent;var i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));if(!this.animateInterval||this.animateInterval.stopFlag)0<i?this.animateToNextItem():this.animateToPrevItem(),t.stopPropagation()}}.bind(this);this.animateToItem=function(t){this.animateToPosition(t*this.itemLength)}.bind(this);this.animateToNextItem=function(){this.startLength=this.getCurrentLength();this.animateToPosition(this.startLength+this.itemLength)}.bind(this);this.animateToPrevItem=function(){this.startLength=this.getCurrentLength();this.animateToPosition(this.startLength-this.itemLength)}.bind(this);this.animateToPosition=function(o){var s=this.getCurrentLength();o=this.getEffectiveLength(o);var e=function(t,i,e){e=(0,$.easing["easeOut"+e])(null,t,s,o-s,i);t<i?this.moveTo(e):(this.moveTo(e),this.animateInterval.stop())}.bind(this);this.animateInterval=function(t,i){e(t,i,"Sine")}.animation(this,300)}.bind(this);this.animateToCenterItem=function(){var t=this.getCurrentItem();if(t[0]){var i=t.offset(),e=0,o=i.left-this.swiper.offset().left,i=i.top-this.swiper.offset().top;switch(this.direction){case"left":e=-(o+t.width()/2)+this.stageLength/2;break;case"top":e=-(i+t.height()/2)+this.stageLength/2;break;case"bottom":e=i-this.totalLength+t.height()/2+this.stageLength/2;break;case"right":e=o-this.totalLength+t.width()/2+this.stageLength/2}this.animateToPosition(e)}}.bind(this);this.getCurrentItem=function(){var t=this.swiper.find(".focus.highlight");t[0]||(t=this.swiper.find(".highlight"));return t}.bind(this);this.moveTo=function(t){this.swiper.css(this.direction,t+"px")}.bind(this);this.restrictInBoundary=function(){this.animateInterval&&this.animateInterval.stop();var t=this.getCurrentLength(),i=this.getEffectiveLength(t);t!=i&&this.animateToPosition(i)}.bind(this);this.getEffectiveLength=function(t){return t?t=Number.between(t,-this.totalLength+this.stageLength,0):0}.bind(this);this.move=function(t){var i=this.getCurrentLength();this.animateToPosition(i+t)}.bind(this);this.getCurrentLength=function(){switch(this.direction){case"left":return this.getLeft();case"top":return this.getTop();case"bottom":return this.getBottom();case"right":return this.getRight()}}.bind(this);this.getLeft=function(){return parseInt(this.swiper.css("left"))}.bind(this);this.getRight=function(){return parseInt(this.swiper.css("right"))}.bind(this);this.getBottom=function(){return parseInt(this.swiper.css("bottom"))}.bind(this);this.getTop=function(){return parseInt(this.swiper.css("top"))}.bind(this);this.create(t,i)};jQuery.fn.scroll=function(t,i){this.create=function(t,i){this.swiper=this.find(".swiper");if(this.swiper.length){this.items=this.find(".item");this.progress=this.find(".progress");this.progressBar=this.find(".progressBar");this.EVENT_CANCEL=!1;this.direction=i;this.swiper.css(i,0);this.progress.css(i,0);this.progressBar.css(i,0);this.refreshData();this.initEvent();this.initProgressEvent()}}.bind(this);this.refreshData=function(){this.stageWidth=$(this).width();this.stageHeight=$(this).height();"top"==i||"bottom"==i?(this.totalLength=this.swiper.height(),this.stageLength=this.stageHeight,this.progress.css({height:this.stageLength+"px"}),this.progressBar.css({height:Math.pow(this.stageLength,2)/this.totalLength+"px"})):(this.totalLength=this.swiper.width(),this.stageLength=this.stageWidth,this.progress.css({width:this.stageLength+"px"}),this.progressBar.css({width:Math.pow(this.stageLength,2)/this.totalLength+"px"}));this.refreshSwiper();this.totalLength<=this.stageLength?(this.progress.hide(),this.EVENT_CANCEL=!0):(this.progress.show(),this.EVENT_CANCEL=!1)}.bind(this);this.refreshSwiper=function(){var t=this.getCurrentLength(),t=Math.max(this.stageLength-this.totalLength,t),t=Math.min(0,t);this.moveTo(t)}.bind(this);this.initEvent=function(){$(this).bind("mousedown touchstart",this.onDown);var t=new Hammer.Manager(this.swiper[0]);t.add(new Hammer.Pan);t.add((new Hammer.Swipe).recognizeWith(t.get("pan")));t.on("panstart panmove panend pancancel",this.onPan);t.on("swipe",this.onSwipe);this.bind("mousewheel DOMMouseScroll",this.onMouseWheel);this.bind("pointerdown",function(t){t.stopPropagation()})}.bind(this);this.initProgressEvent=function(){var t=new Hammer.Manager(this.progressBar[0]);t.add(new Hammer.Pan);t.add((new Hammer.Swipe).recognizeWith(t.get("pan")));t.on("panstart panmove panend pancancel",this.onProgressPan.bind(this));t.on("swipe",this.onProgressSwipe.bind(this));t=new Hammer.Manager(this.progress[0]);t.add(new Hammer.Tap);t.on("tap",this.onProgressTap.bind(this))}.bind(this);this.onDown=function(t){this.EVENT_CANCEL||t.stopPropagation()}.bind(this);this.onPan=function(t){if(!this.EVENT_CANCEL&&t&&t.pointers&&1==t.pointers.length){this.animateInterval&&this.animateInterval.stop();"panstart"==t.type&&(this.startLength=this.getCurrentLength());var i=0;switch(this.direction){case"left":i=t.deltaX;break;case"right":i=-t.deltaX;break;case"top":i=t.deltaY;break;case"bottom":i=-t.deltaY}this.moveTo(this.startLength+i);"panend"!=t.type&&"pancancel"!=t.type||this.restrictInBoundary()}}.bind(this);this.onSwipe=function(t){if(!this.EVENT_CANCEL){this.animateInterval&&this.animateInterval.stop();var i=0;switch(this.direction){case"left":i=t.velocityX;break;case"right":i=-t.velocityX;break;case"top":i=t.velocityY;break;case"bottom":i=-t.velocityY}this.startLength=this.getCurrentLength();this.animateToPosition(this.startLength+20*i)}}.bind(this);this.onProgressPan=function(t){this.EVENT_CANCEL||(t.deltaX=-t.deltaX*this.totalLength/this.stageLength,t.deltaY=-t.deltaY*this.totalLength/this.stageLength,this.onPan(t))}.bind(this);this.onProgressSwipe=function(t){this.EVENT_CANCEL||(t.velocityX=-t.velocityX*this.totalLength/this.stageLength,t.velocityY=-t.velocityY*this.totalLength/this.stageLength,this.onSwipe(t))}.bind(this);this.onProgressTap=function(t){if(!this.EVENT_CANCEL&&t&&t.pointers&&1==t.pointers.length){var i=this.progress.offset(),e=0;switch(this.direction){case"left":e=-(t.pointers[0].pageX-i.left)*this.totalLength/this.stageLength;break;case"right":e=-(this.stageLength-t.pointers[0].pageX+i.left)*this.totalLength/this.stageLength;break;case"top":e=-(t.pointers[0].pageY-i.top)*this.totalLength/this.stageLength;break;case"bottom":e=-(this.stageLength-t.pointers[0].pageY+i.top)*this.totalLength/this.stageLength}this.animateToPosition(e)}}.bind(this);this.onMouseWheel=function(t){if(!this.EVENT_CANCEL){t=t.originalEvent;var i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));if(!this.animateInterval||this.animateInterval.stopFlag)i=this.getCurrentLength()+(0>i?-15:15),i=this.getEffectiveLength(i),this.moveTo(i),t.stopPropagation()}}.bind(this);this.getLeft=function(){return parseInt(this.swiper.css("left"))}.bind(this);this.getRight=function(){return parseInt(this.swiper.css("right"))}.bind(this);this.getBottom=function(){return parseInt(this.swiper.css("bottom"))}.bind(this);this.getTop=function(){return parseInt(this.swiper.css("top"))}.bind(this);this.animateToPosition=function(o){var s=this.getCurrentLength();o=this.getEffectiveLength(o);var e=function(t,i,e){e=(0,$.easing["easeOut"+e])(null,t,s,o-s,i);t<i?this.moveTo(e):(this.moveTo(e),this.animateInterval.stop())}.bind(this);this.animateInterval=function(t,i){e(t,i,"Sine")}.animation(this,300)}.bind(this);this.animateToCenterItem=function(){var t=this.getCurrentItem();if(t[0]){var i=t.offset(),e=0,o=i.left-this.swiper.offset().left,i=i.top-this.swiper.offset().top;switch(this.direction){case"left":e=-(o+t.width()/2)+this.stageLength/2;break;case"top":e=-(i+t.height()/2)+this.stageLength/2;break;case"bottom":e=i-this.totalLength+t.height()/2+this.stageLength/2;break;case"right":e=o-this.totalLength+t.width()/2+this.stageLength/2}this.animateToPosition(e)}}.bind(this);this.getCurrentItem=function(){var t=this.swiper.find(".focus.highlight");t[0]||(t=this.swiper.find(".highlight"));return t}.bind(this);this.moveTo=function(t){var i=this.direction;this.swiper.css(i,t+"px");this.progressBar.css(i,-t*this.stageLength/this.totalLength+"px")}.bind(this);this.getCurrentLength=function(){switch(this.direction){case"left":return this.getLeft();case"top":return this.getTop();case"bottom":return this.getBottom();case"right":return this.getRight()}}.bind(this);this.restrictInBoundary=function(){this.animateInterval&&this.animateInterval.stop();var t=this.getCurrentLength(),i=this.getEffectiveLength(t);t!=i&&this.animateToPosition(i)}.bind(this);this.getEffectiveLength=function(t){return t?t=Number.between(t,-this.totalLength+this.stageLength,0):0}.bind(this);this.move=function(t){var i=this.getCurrentLength();this.animateToPosition(i+t)}.bind(this);this.create(t,i)};jQuery.fn.appearance=function(t,i){this.background=$("<div class='appear_win10'></div>");this.addClass("main_dom");this.background.append(this);this.show=function(){this.background.show();this.background.animate({opacity:1},function(){$(this).show();t&&t()})}.bind(this);this.hide=function(){this.background.animate({opacity:0},function(){$(this).hide();i&&i()})}.bind(this);this.getDom=function(){return this.background}.bind(this);this.background.click(function(t){t.target==t.currentTarget&&this.hide()}.bind(this));return this.background};jQuery.fn.onTap=function(t){if(isPhone()||isPad())this.click(t);else{var i=new Hammer.Manager(this[0]);i.add(new Hammer.Tap({event:"tap",taps:1,threshold:5,time:400}));i.on("tap",t)}};jQuery.fn.onDoubleTap=function(t){var i=new Hammer.Manager(this[0]);i.add(new Hammer.Tap({event:"doubletap",taps:2}));i.on("doubletap",t)};var flipping=!1;(function(P){bdor[5]="i";var d=function(e,g,d,c,t){if(void 0!=e&&null!=e){0>=c.length&&(t=P.extend({background:"green",cornersTop:!0,scale:"noresize"},t));e.prev();var i=0,p=!1,u=t.background,f=t.cornersTop,m=t.gradientColors||["#ddd","#eee","#fff"],a=t.scale,r=0,b=[],w,x,v;try{w=e.clone(),x=w[0].getContext("2d"),v=e[0].getContext("2d"),r=0}catch(t){v=x=w=null}this.images=c=c.each(function(n){if(!b[n]&&null!=v){var h=this;h.onload=function(){var t=1;if("noresize"!=a){var i=0==this.width?this.naturalWidth:this.width,e=0==this.height?this.naturalHeight:this.height,o=g/i,s=d/e;"fit"==a&&(t=1>o||1>s?Math.min(o,s):1);"fill"==a&&(t=Math.min(o,s))}P(h).data("flip.scale",t);b[n]=v.createPattern(h,"no-repeat");b[n].width=i;b[n].height=e;r++;r!=c.length||p||(p=!0,B())};h.complete&&window.setTimeout(function(){h.onload()},10)}}).get();this.patterns=b;var C=g,k=d,o=P.browser.msie?e.offset():null,s,n,h,l;P.browser.msie&&function(){var t=P("<div>").width(g).height(d).css({position:"absolute",cursor:"default",zIndex:1}).appendTo(tmpContainer);7==parseInt(P.browser.version)&&t.css({opacity:1e-6,background:"#FFF"});var i=function(){o=e.offset();return t.css({left:o.left+"px",top:o.top+"px"})};P(window).resize(i);return i()}();this.autoFlip=function(){window.clearInterval(s);n=(new Date).getTime();h=C;l=k/50;s=window.setInterval(A,0);i+=1;0>i&&(i=c.length-1);i==c.length&&(i=0)};this.timerFun=function(){this.timer=setInterval(this.autoFlip.bind(this),3e3)};this.timerFun();var A=this.flip=function(t){var i=(new Date).getTime()-n;700<=i?(window.clearInterval(s),t&&t?(c.unshift(c.pop()),b.unshift(b.pop())):(c.push(c.shift()),b.push(b.shift())),C=g,k=d):(C=h-2*g*i/700,k=l+2*d*i/700/3);B()},y=function(t,i){if(null!=v){var e=t*g+i,o=-i/t;P.browser.msie&&(e=Math.round(e),o=Math.round(o));v.beginPath();v.moveTo(g,Math.min(e,d));v.lineTo(g,0);v.lineTo(Math.max(o,0),0);0>o?(v.lineTo(0,Math.min(i,d)),i<d&&v.lineTo((d-i)/t,d),v.lineTo(g,d)):e<d?v.lineTo(g,e):(v.lineTo((d-i)/t,d),v.lineTo(g,d))}},B=function(){if(p&&null!=v&&null!=x){P.browser.msie&&v.clearRect(0,0,g,d);v.fillStyle=u;v.fillRect(0,0,g,d);var t=c[0],i=P(t).data("flip.scale");if(P.browser.msie)try{v.drawImage(t,0,0,t.width,t.height,0,0,g,d)}catch(t){v.fillStyle=b[0],v.fillStyle.width2=v.fillStyle.width*i,v.fillStyle.height2=v.fillStyle.height*i,v.fillRect(0,0,g,d)}else v.drawImage(t,(g-t.width*i)/2,(d-t.height*i)/2,t.width*i,t.height*i);if(k&&C!=g&&(t=(k-2*(C+g))/2,m2=k/(g-C),q2=C*m2,2!=m2)){var e=1,o=0;v.save();f||(o=d,e=-1);v.translate(0,o);v.scale(1,e);var s=(q2-t)/(2-m2),n=2*s+t,h=(2*n+s+4*C-2*k)/5,a=-h/2+n+s/2,i=Math.sqrt(Math.pow(s-h,2)+Math.pow(n-a,2)),r=Math.min(.5*i,30),l;P.browser.mozilla&&1.9>parseFloat(P.browser.version)?(l=x,l.clearRect(0,0,g,d),l.save(),l.translate(1,0)):l=v;s=l.createLinearGradient(s,n,h,a);s.addColorStop(0,m[0]);s.addColorStop(r/i,m[1]);s.addColorStop(1,m[2]);l.fillStyle=s;l.beginPath();l.moveTo(-t/2,0);l.quadraticCurveTo((-t/2+C)/2+.02*C,k/2,C,k);l.quadraticCurveTo((g+C)/2,(2*g+t+k)/2-.02*(d-k),g,2*g+t);P.browser.mozilla&&1.9>parseFloat(P.browser.version)?(l.save(),l.clip(),l.fillRect(0,0,g,d),l.restore(),v.drawImage(w[0],0,0),l.restore()):l.fill();v.fillStyle=u;y(2,t);v.fill();y(2,t);P.browser.safari||P.browser.opera||v.restore();c[1]||(c[1]=c[0]);t=c[1];i=P(t).data("flip.scale");if(P.browser.msie)v.fillStyle=b[1],v.fillStyle.width2=v.fillStyle.width*i,v.fillStyle.height2=v.fillStyle.height*i,v.fill();else{v.save();v.clip();if(P.browser.safari||P.browser.opera)v.scale(1,1/e),v.translate(-0,-o);v.drawImage(t,(g-t.width*i)/2,(d-t.height*i)/2,t.width*i,t.height*i);v.restore();(P.browser.safari||P.browser.opera)&&v.restore()}}}}}};P.fn.jFlip=function(n,h,a,r,l,g){return this.each(function(){P(this).wrap("<div class='bannerdiv' style='position: absolute;width:"+n+"px;height:"+h+"px;top:"+l+"px;left:"+r+"px'>");if("true"==g){if(1>=a.length)return;var t=P("<img class='leftBtn' src=\""+uiBaseURL+"pre_image.png\" style='position:absolute;width:25px;height:25px;left:0;top:"+(h-25)/2+"px;'/>"),i=P("<img class='rightBtn' src=\""+uiBaseURL+"next_image.png\" style='position:absolute;width:25px;height:25px;top:"+(h-25)/2+"px;right:0;'/>");P(this).parent().append(t).append(i)}var e=P(this).find("img"),o=P(document.createElement("canvas")).attr({width:n,height:h}).css({margin:0,width:n+"px",height:h+"px"});P(this).css({position:"absolute",left:"-9000px",top:"-9000px",display:"none"}).after(o);var s=new d(P(this).next(),n||300,h||300,e,a);"true"!=g||1>=a.length||(t.bind("click",function(){s.flip(!0)}),i.bind("click",function(){s.flip()}))})}})(jQuery);function searchFromPages(t,i){var e=[];i=i.trim().toLowerCase();for(var o=null,o=-1==i.indexOf(" ")?[i]:i.split(" "),s=0,s=0;s<t.length;s++){var n=t[s].trim().toLowerCase(),h=n,a=-1,r=-1,l=-1,g=0,d=!0,c;for(c=0;c<o.length;c++)if(o[c]){var h=new KMP(h,o[c]),p=o[c].length;if(h.match()){var u=g+h.getIndex();if(u>l)l=u,g=u+o[c].length,h=n.substring(g),0==c&&(a=u),c==o.length-1&&(r=u+p);else{d=!1;break}}else{d=!1;break}}d&&(l=[],l.search_page=s+1,l.search_title="page "+(s+1),a=n.substring(0,a).lastIndexOf("."),-1==a?a=0:a++,g=n.substring(r),d=g.indexOf(".")+1,d=-1==d?g.length():r+d,n=n.substring(a,d),l.search_text=n,e.push(l))}return e}var KMP=function(t,i){this.__string=t;this.__pattern=i;this.__next=[];this.__times=0;this.__index=-1;for(var e=0,e=0;e<i.length;e++)this.__next[e]=1>=e?e-1:this.next(i.substring(0,e));this.__times=0;this.__index=-1};bdor[10]="l";KMP.prototype.next=function(t){for(var i=Math.ceil(t.length/2);0<i&&0!=t.substring(0,i).compareTo(t.substring(t.length-i,t.length));)i--;return i};KMP.prototype.match=function(){for(var t=0,i=0,e=-1;t<this.__string.length&&i<this.__pattern.length;){if(this.__string.charAt(t)==this.__pattern.charAt(i))0===i&&(e=t),t++,i++;else{for(var o=this.__next[i];-1!=o&&this.__pattern.charAt(o)==this.__pattern.charAt(i);)o=this.__next[o];i=o;-1==i?(t++,i=0):e=t-i}this.__times++}return i==this.__pattern.length?(this.__index=e,!0):!1};KMP.prototype.getTimes=function(){return this.__times};KMP.prototype.getIndex=function(){return this.__index};String.prototype.compareTo=function(t){var i=this.length,e=t.length,o=Math.min(i,e),s=this.split("");t=t.split("");var n=0,h=0;if(n==h)for(h=n,o+=n;h<o;){var a=s[h],r=t[h];if(a!=r)return a-r;h++}else for(;0!=o--;)if(a=s[n++],r=t[h++],a!=r)return a-r;return i-e};$.fn.setGradient=function(t,i){var e=colorAdd(t,15),o=colorDiv(t,15);void 0==i&&(i=!1);var s="",n="0";i&&(s="left,",n="1");this.css({background:"linear-gradient("+s+e+", "+o+")"});switch(browserType){case 1:this.css({background:"-webkit-linear-gradient("+s+e+", "+o+")"});break;case 2:this.css({background:"-moz-linear-gradient("+s+e+", "+o+")"});break;case 3:this.css({background:"-ms-linear-gradient("+s+e+", "+o+")"});this.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType="+n+", EndColorStr="+o+", StartColorStr="+e+")");break;case 4:this.css({background:"-o-linear-gradient("+s+e+", "+o+")"})}};$.fn.setGradientByDir=function(t,i,e){void 0==e&&(e=!1);var o="",s="0";e&&(o="left,",s="1");this.css({background:"linear-gradient("+o+t+", "+i+")"});switch(browserType){case 1:this.css({background:"-webkit-linear-gradient("+o+t+", "+i+")"});break;case 2:this.css({background:"-moz-linear-gradient("+o+t+", "+i+")"});break;case 3:this.css({background:"-ms-linear-gradient("+o+t+", "+i+")"});this.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType="+s+", EndColorStr="+i+", StartColorStr="+t+")");break;case 4:this.css({background:"-o-linear-gradient("+o+t+", "+i+")"})}};$.fn.addBorderShadow=function(t,i,e){var o=i+"px",s=e+"px";i=2*(Math.abs(i)+Math.abs(e))+"px";this.css({"-moz-box-shadow":o+" "+s+" "+i+" "+t,"box-shadow":o+" "+s+" "+i+" "+t,"-webkit-box-shadow":o+" "+s+" "+i+" "+t,"-o-box-shadow":o+" "+s+" "+i+" "+t,"-ms-box-shadow":o+" "+s+" "+i+" "+t})};var getHost=function(t){var i;t||(t=window.location.href);var e=t.match(/(.*\:\/\/)([^\/]*)\/([^\/]*).*/);e&&(i="s3.amazonaws.com"===e[2]?e[1]+e[2]+"/"+e[3]:e[1]+e[2]);Log.print(t+e+","+i);return i};$.fn.changeButtonColor=function(i,e,o){var s=this;if("none"!=this.css("display")){var n=this;0<this.children().length&&(n=this.find("img:first"));if(window.ActiveXObject){if("complete"!=n[0].readyState){$(n).on("load",function(){try{s.changeButtonColor(i,e,o)}catch(t){}});return}}else if(!n[0].complete){$(n).on("load",function(){try{s.changeButtonColor(i,e,o)}catch(t){}});return}if(void 0!=n[0]){var t,h;try{t=$("<canvas></canvas>")[0],h=t.getContext("2d")}catch(t){return}var a=n.width(),r=n.height(),n=n[0];void 0==e&&(e=!1);var l=getHost(n.src),g=getHost();if(l&&g!==l){if(t=n.src.replace(l,g),n.src=t,!1==e)$(n).on("load",function(){try{s.changeButtonColor(i,!0,o)}catch(t){}})}else{t.width=a;t.height=r;try{h.drawImage(n,0,0,n.naturalWidth,n.naturalHeight,0,0,a,r);var d=h.getImageData(0,0,a,r),c=h.getImageData(0,0,a,r);if(!0!=n.colorChanged&&d){for(var p=Color(i).split(),a=0,u=d.data.length;a<u;a+=4)0<c.data[a+3]&&(d.data[a]!=p.r&&(c.data[a]=d.data[a]/255*p.r),d.data[a+1]!=p.g&&(c.data[a+1]=d.data[a+1]/255*p.g),d.data[a+2]!=p.b&&(c.data[a+2]=d.data[a+2]/255*p.b));h.putImageData(c,0,0);n.src=t.toDataURL("image/png");void 0!=o&&o(s);n.colorChanged=!0}}catch(t){if(!1==e)$(n).on("load",function(){try{s.changeButtonColor(i,!0,o)}catch(t){}})}}}}};$.fn.rotate=function(t){if(!(4<browserType&&1>browserType)){switch(browserType){case 1:this.css({"-webkit-transform":"rotate("+t+"deg)"});break;case 2:this.css({"-moz-transform":"rotate("+t+"deg)"});break;case 3:this.css({"-ms-transform":"rotate("+t+"deg)"});break;case 4:this.css({"-o-transform":"rotate("+t+"deg)"})}this.css({transform:"rotate("+t+"deg)"})}};$.fn.scale=function(t,i){void 0==i&&(i="50% 50% 0");this.css({"-webkit-transform":"scale("+t+")","-moz-transform":"scale("+t+")","-ms-transform":"scale("+t+")","-o-transform":"scale("+t+")",transform:"scale("+t+")","-webkit-transform-origin":i,"-moz-transform-origin":i,"-ms-transform-origin":i,"-o-transform-origin":i,"transform-origin":i})};$.fn.transition3D=function(){this.css({"-ms-transform":"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"});return this};$.fn.speed=function(o){function t(t){t=void 0==t.originalEvent.touches?[t]:t.originalEvent.touches;if(1<t.length)return d=!0;s=h=t[0].pageX;n=a=t[0].pageY;r=new Date;-1!=g&&window.clearInterval(g);g=window.setInterval(function(){s=h;n=a;r=new Date},300)}function i(t){if(-1==g||!0==d)return!0;t=void 0==t.originalEvent.touches?[t]:t.originalEvent.touches;h=t[0].pageX;a=t[0].pageY}function e(t){if(-1==g)return!0;t=void 0!=t.originalEvent.touches==!1?[t]:t.originalEvent.touches;if(!0==d)return d=1<t.length,!0;l=new Date;t=(l-r)/20;var i=h-s,e=a-n;0==t?iSpeedY=iSpeedX=0:(iSpeedX=i/t,iSpeedY=e/t);void 0!=o&&o(iSpeedX,iSpeedY);window.clearInterval(g);g=-1}var s,n,h,a,r,l,g=-1,d=!1;try{this.bind("mousedown",t),this.bind("mousemove",i),this.bind("mouseup",e),this.bind("mouseleave",e)}catch(t){}try{this.bind("touchstart",t),this.bind("touchmove",i),this.bind("touchend",e),this.bind("touchleave",e)}catch(t){}};Class("MediasPool",{currentMedia:null,addToMediasPool:function(t){window.mediasInPage.push(t)},cleanMediaPool:function(t){t.remove();window.mediasInPage.remove(t)}});window.playBackgroundSound=!0;window.mediasInPage=[];Class("Media",{type:"",$media:null,create:function(t,i,e){this.$media=t;this.type=i;this.playEvt=e;this.checkMediaType();$(t).bind("ended",function(){this.playBackgroundSound()}.bind(this));$(t).bind("play",function(){unbindSoundEvent()});"vimeo"==i&&this.playVimeo()},play:function(){this.playMedia();window.currentMedia&&window.currentMedia!=this&&window.currentMedia.pauseMedia();window.currentMedia=this;this.pauseBackgroundSound()},pause:function(){this.pauseMedia();window.currentMedia==this&&this.playBackgroundSound()},playBackgroundSound:function(){window.playBackgroundSound=!0;window.playBackgroundSound&&isPlaying&&global.bgSound.playCurrentAudio();window.currentMedia=null},pauseBackgroundSound:function(){window.playBackgroundSound&&isPlaying&&global.bgSound.pauseCurrentAudio();window.playBackgroundSound=!1},playMedia:function(){switch(this.type){case"youtube":this.callPlayer("playVideo");break;case"flv":this.player.play();break;case"vimeo":this.playVimeo();break;default:this.$media[0].play&&this.$media[0].play()}},pauseMedia:function(){switch(this.type){case"youtube":this.callPlayer("pauseVideo");break;case"flv":this.player&&this.player.pause();break;case"vimeo":this.player&&this.player.pause();break;default:this.$media[0].pause&&this.$media[0].pause()}},bind:function(t,i){i&&this.$media&&this.$media.bind(t,i)},setSrc:function(t){},appentTo:function(t){},setCss:function(t){t&&this.$media&&this.$media.css(t)},setCurrentTime:function(t){"flv"==this.type?this.player.currentTime=t:this.$media&&this.$media[0]&&(this.$media[0].currentTime=t)},setMute:function(t){"flv"==this.type?this.player.muted=t:this.$media&&this.$media[0]&&(this.$media[0].muted=t)},getType:function(){return this.type},remove:function(){this.$media.remove();this.$media=null},checkMediaType:function(){var t=this.$media.attr("src");t&&global.flvjs&&flvjs.isSupported()&&(t.endsWith(".flv")||t.endsWith(".f4v"))&&(this.type="flv",this.player=flvjs.createPlayer({type:"flv",url:t}),this.player.attachMediaElement(this.$media[0]),this.player.load())},callPlayer:function(t,i){var e=this.$media[0],o=e.getAttribute("src");o&&-1!==o.indexOf("youtube.com/embed")&&e.contentWindow&&e.contentWindow.postMessage(JSON.stringify({event:"command",func:t,args:i||[]}),"*")},playVimeo:function(){this.$media&&(global.vimeoJsLoaded||$("head").find("#vimeoPlayApi")[0]||this.loadScript("https://player.vimeo.com/api/player.js",function(){global.vimeoJsLoaded=!0;this.player=new Vimeo.Player(this.$media[0]);this.playEvt==PageEditor.PlayEvt.EVT_PLAY&&this.player.play()}.bind(this)),global.vimeoJsLoaded&&!this.player&&(this.player=new Vimeo.Player(this.$media[0]),this.playEvt==PageEditor.PlayEvt.EVT_PLAY&&this.player.play()),this.playEvt==PageEditor.PlayEvt.EVT_PLAY&&this.player&&this.player.play())},loadScript:function(t,i){var e=document.createElement("script");e.id="vimeoPlayApi";e.type="text/javascript";e.readyState?e.onreadystatechange=function(){if("loaded"==e.readyState||"complete"==e.readyState)e.onreadystatechange=null,i()}:e.onload=function(){i()};e.src=t;document.getElementsByTagName("head")[0].appendChild(e)}});window.playBackgroundSound=!0;window.mediasInPage=[];(function(){for(var t={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"-",prefix:""},i=["webkit","moz","o","ms"],e=0,o=i.length;e<o;e++)if(t.prefix=i[e],"undefined"!=typeof document[t.prefix+"CancelFullScreen"]){t.supportsFullScreen=!0;break}t.supportsFullScreen&&(t.fullScreenEventName=t.prefix+"fullscreenchange",t.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},t.requestFullScreen=function(t){t[this.prefix+"RequestFullScreen"]()},t.cancelFullScreen=function(t){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});window.fullScreenApi=t})();function readAsFullscreen(){isPhone()||isPad()?window.top!=window&&window.open(window.location.href):fullScreenApi&&fullScreenApi.supportsFullScreen?($(document).unbind(fullScreenApi.fullScreenEventName,onFullscreenEvent),$(document).bind(fullScreenApi.fullScreenEventName,onFullscreenEvent),fullscreenFun()):window.top!=window?window.open(window.location.href):alert("Press F11 to View FlipBook in Full Screen")}function onFullscreenEvent(){StateSynchronous.instance().findButtons("FullscreenButton").each(function(t){fullScreenApi.isFullScreen()?t.setAsExitFullScreen():t.setAsFullScreen();t.executeCallback()});(function(){if(global.toolBar&&global.toolBar.onResize)toolBar.onResize()}).delay(100)}function fullscreenFun(){var t=$("body")[0];fullScreenApi.supportsFullScreen&&(fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(t));t.webkitSupportsFullscreen&&t.webkitEnterFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function DeString(t,i){if(""==t)return"";i&&""!=i||(i="fb5");i=escape(i);if(null==t||8>t.length)alert("A salt value could not be extracted from the encrypted message because it's length is too short. The message cannot be decrypted.");else if(null==i||0>=i.length)alert("Please enter a password with which to decrypt the message.");else{for(var e="",o=0;o<i.length;o++)e+=i.charCodeAt(o).toString();var s=Math.floor(e.length/5),s=parseInt(e.charAt(s)+e.charAt(2*s)+e.charAt(3*s)+e.charAt(4*s)+e.charAt(5*s),10),n=Math.round(i.length/2),h=Math.pow(2,31)-1,o=parseInt(t.substring(t.length-8,t.length),16);t=t.substring(0,t.length-8);for(e+=o;10<e.length;)e=(parseInt(e.substring(0,10),10)+parseInt(e.substring(10,e.length),10)).toString();for(var e=(s*e+n)%h,a="",r="",o=0;o<t.length;o+=2)a=parseInt(parseInt(t.substring(o,o+2),16)^Math.floor(e/h*255),10),r+=String.fromCharCode(a),e=(s*e+n)%h;return unescape(r)}}function loadJavascript(t,i,e){var o=this,s=document.createElement("script");s.type="text/javascript";s.async=!0;s.onload=s.onreadystatechange=function(){o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(s.onload=s.onreadystatechange=null,void 0!=i&&i(s))};s.onerror=function(){void 0!=e&&e(s)};$("head")[0].appendChild(s);s.src=t;return s}var HTMLString={riseAWord:function(t,i,e){var o=null,o=-1==i.indexOf(" ")?[i]:i.trim().split(" ");i=[];for(var s=0;s<o.length;s++){var n=t.indexOf(o[s])+o[s].length,h=t.substring(0,n);t=t.substring(n);h=h.replace(o[s],"<span style='color:"+e+";'>"+o[s]+"</span>");i.push(h)}""!==t&&i.push(t);return i.join("")},isHTML:function(t){return t?!!t.match(/^(<\w+>?).*((<\/\w+>)|(\/>))$/g):!1},toText:function(t){return t.replace(/<\/?\w+>/g,"")},toLabel:function(t){t=t.replaceAll("<","&lt;");return t.replaceAll(">","&gt;")}},LanguageTool={isEnglish:function(t){return/[\x00-\xff]/.test(t)},isChinese:function(t){return/[\u4E00-\u9FBF]/.test(t)},isArabic:function(t){return/[\u0600-\u06FF]|[\u0750-\u077F]/.test(t)},isUrdu:function(t){return this.isArabic(t)||/[\uFE70-\uFEFF]/.test(t)},isHebrew:function(t){return/[\u0590-\u05FF]|[\uFB00-\uFB4F]/.test(t)},isFarsi:function(t){return this.isUrdu(t)},isTai:function(t){return/[\u0E00-\u0E7F]/.test(t)},isHindi:function(t){return/[\u0900-\u097F]/.test(t)},isTamil:function(t){return/[\u0B80-\u0BFF]/.test(t)},isHimalayaRahm:function(t){return/[\u0D00-\u0D7F]/.test(t)},isRightToLeft:function(t){return this.isArabic(t)||this.isUrdu(t)||this.isHebrew(t)||this.isFarsi(t)||this.isHindi(t)||this.isHimalayaRahm(t)}},Directory={getFileName:function(t){t=t.replaceAll("\\","/",!0);if(""==Directory.getFileSuffix(t))return"index.html";var i=t.lastIndexOf("/");return-1==i?t:t.substr(i+1)},getFilePath:function(t){t=t.replaceAll("\\","/",!0);var i=t.lastIndexOf("/");return-1==i?"":t.substr(0,i+1)},getFileSuffix:function(t){t=t.replaceAll("\\","/",!0);var i=t.lastIndexOf(".");return-1==i?"":t.substr(i)},getFolderName:function(t){t=Directory.getFilePath(t);if(""==t)return"";t=Directory.removeSlash(t);var i=t.lastIndexOf("/");return-1==i?t:t.substr(i+1)},addSlash:function(t){t=t.replaceAll("\\","/",!0);return t.endsWith("/")?t:t+"/"},removeSlash:function(t){t=t.replaceAll("\\","/",!0);return t.endsWith("/")?t.substring(0,t.length-1):t},getUpperFilePath:function(t){t=t.replaceAll("\\","/",!0);var i=t.split("/"),e=i.length;return t=t.endsWith(".html")||t.endsWith("/")?t.remove(i[e-2]+"/"+i[e-1]):t.remove(i[e-1])}};function animateOnce(t,i,e,o,s,n){if(t&&i)if(void 0==e||0===e||isIE9())t.css(i),o&&o instanceof Function&&o();else{var h=!1;setAnimation(t,e,s,n);t.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){!0!=h&&(h=!0,setAnimation(t,0),o&&o instanceof Function&&o())});t.css(i)}}function setAnimation(t,i,e,o){if(t&&void 0!=i){100>i&&(i*=1e3);if(void 0==e||""==e)e="all";void 0==o&&(o="ease-in-out");o=e+" %dms "+o;0<i?"all"!=e?t.css({"-moz-transition":String.format(o,"-moz-",i),"-webkit-transition":String.format(o,"-webkit-",i),"-o-transition":String.format(o,"-o-",i),"-ms-transition":String.format(o,"-ms-",i),transition:String.format(o,"",i)}):t.css({"-moz-transition":String.format(o,i),"-webkit-transition":String.format(o,i),"-o-transition":String.format(o,i),"-ms-transition":String.format(o,i),transition:String.format(o,i)}):t.css({"-moz-transition":"","-webkit-transition":"","-o-transition":"","-ms-transition":"",transition:""})}}var Log=Class({statics:{isDebug:function(){return/debug=true/.test(window.location.href)},isPAD:function(){return 0<navigator.userAgent.toLowerCase().indexOf("pad")},logForPad:function(t,i){void 0==this.logDiv&&(this.logDiv=$("<div></div>"),this.logDiv.css({position:"absolute",width:"300px",height:"150px",top:"50px",overflow:"auto","z-index":"100000","background-color":"white"}),$("body")[0]&&$("body")[0].appendChild(this.logDiv[0]));var e=$("<p>"+t+"</p>");e.css("color",i);this.logDiv.append(e);e=this.logDiv[0];e.scrollTop=e.scrollHeight},info:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.log&&console.log.apply(console,arguments)}catch(t){}this.logForPad(String.format.apply(this,arguments),"black")}},debug:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.debug&&console.debug.apply(console,arguments)}catch(t){}this.logForPad(String.format.apply(this,arguments),"blue")}},warn:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.warn&&console.warn.apply(console,arguments)}catch(t){}this.logForPad(String.format.apply(this,arguments),"#FFA042")}},error:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.error&&console.error.apply(console,arguments)}catch(t){}this.logForPad(String.format.apply(this,arguments),"red")}},print:function(){var t=String.format.apply(this,arguments),i=(new Date).format("hh:mm:ss.S");this.debug("[%s] %s",i,t)}}}),divHint=Class({create:function(t,i,e,o){this.instance=$("<div class='hint'></div>");this.setText(t);void 0==o&&(o=$("body"));o.append(this.instance);this.instance.css({display:"none",opacity:0});this.moveto(i,e);this.animation=!1;this.className="hint"},setAnimate:function(t){this.animation=t;!0==t&&this.instance.css({"-moz-transition":"all 0.2s ease-in-out","-webkit-transition":"all 0.2s ease-in-out","-o-transition":"all 0.2s ease-in-out","-ms-transition":"all 0.2s ease-in-out",transition:"all 0.2s ease-in-out"})},setStyle:function(t){this.instance.removeClass(this.className);this.instance.addClass(t);this.className=t},setText:function(t){this.instance.html(t)},moveto:function(t,i){this.instance.css({left:t,top:i})},show:function(){this.instance.css({display:"block",opacity:1})},hide:function(){!0==this.animation?this.instance.css({display:"none",opacity:0}):this.instance.css({display:"none",opacity:1})},destroy:function(){this.hide();this.instance.empty();this.instance.remove()},width:function(){return this.instance.width()+3*this.padding()},height:function(){return this.instance.height()+3*this.padding()},padding:function(){var t=this.instance.css("padding");return void 0==t||null==t||""==t?0:iPadding=parseInt(t.replace("px",""))},addClass:function(t){this.instance.addClass(t)}});Class("ObjectPool",{objects:null,length:0,create:function(){this.objects=[]},add:function(t){t&&(this.objects.push(t),this.length=this.objects.length)},remove:function(t){t&&(this.objects.removeElement(t),this.length=this.objects.length)},find:function(){for(var t=arguments,i=new ObjectPool,e=0;e<t.length;e++){var o=t[e];if("string"==typeof o&&""!=o)for(var o=o.toLowerCase(),s=0;s<this.objects.length;s++){var n=this.objects[s];n.getClassName&&-1<n.getClassName().toLowerCase().indexOf(o)&&i.add(n)}}return i},match:function(){for(var t=arguments,i=new ObjectPool,e=0;e<t.length;e++){var o=t[e];if("string"==typeof o&&""!=o)for(var s=0;s<this.objects.length;s++){var n=this.objects[s];n.getClassName&&n.getClassName()==o&&i.add(n)}}return i},clone:function(){for(var t=new ObjectPool,i=0;i<this.objects.length;i++)t.add(this.get(i));return t},get:function(t){return this.objects[t]},each:function(t){for(var i=0;i<this.objects.length;i++){var e=this.objects[i];e&&t&&t instanceof Function&&t(e)}}});bdor[2]="e";function Metacharacter(t){if(null==t||""==t)return"";t=t.replaceAll("%","%25",!0);t=t.replaceAll("+","%2B",!0);t=t.replaceAll("/","%2F",!0);t=t.replaceAll("?","%3F",!0);t=t.replaceAll(" ","%20",!0);t=t.replaceAll("#","%23",!0);t=t.replaceAll("&","%26",!0);t=t.replaceAll("=","%3D",!0);t=t.replaceAll(":","%3A",!0);t=t.replaceAll("\r","%0D",!0);t=t.replaceAll("\n","%0A",!0);return t=t.replaceAll("'","%27",!0)}var reflection=function(a){var r=new Image;r.onload=function(){var t=null;a.children("canvas")[0]&&(t=$(a.children("canvas")[0]));var i=document.createElement("canvas"),e=i.getContext("2d");a[0].appendChild(i);r.onload=r.onerror=null;var o=this.width,s=this.height;a.children("img")&&o>a.children("img").width()&&(o=a.children("img").width());a.children("img")&&s>a.children("img").height()&&(s=a.children("img").height());var n=.7*s;try{i.style.width=o+"px";i.style.height=n+"px";i.width=o;i.height=n;i.className="reflect";$(i).css({transform:"translateY(-1px)"});e.save();e.translate(0,s);e.scale(1,-1);e.drawImage(r,0,0,o,s);e.restore();e.globalCompositeOperation="destination-out";var h=e.createLinearGradient(0,0,0,n);h.addColorStop(1,"rgba(255, 0, 0, 1.0)");h.addColorStop(0,"rgba(255, 0, 0, 0)");e.fillStyle=h;e.rect(0,0,o,2*n);e.fill();t&&t.remove()}catch(t){}};r.onerror=function(){r.onload=r.onerror=null};r.src=a.children("img")[0].src};$.fn.allowNumberOnly=function(){$(this).keypress(function(t){t=t||e;t=t.keyCode||t.which;return 48<=t&&57>=t?!0:!1}).focus(function(){this.style.imeMode="disabled"}).bind("paste",function(){var t=window.clipboardData.getData("Text");return/^\d+$/.test(t)?!0:!1})};function getAnimationEnd(){var t=document.createElement("div"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},e;for(e in i)if(void 0!==t.style[e])return i[e]}var getRealURL=function(t){if(t.isUrl()){var i=t.toLocaleLowerCase(),e=/^([_a-z\d\-]+\.)*[_a-z\d\-]+\.(com|net|int|info|edu|org|gov|club|biz|mil|xyz|[a-z]{2}[$\/]?)+/;/(f|ht)tp(s?)\:\/\//.test(i)||e.test(i)&&(t=getProtocal()+t)}else{i=window.location.href.removeStartFrom("#p=");i=Directory.getFilePath(i).substring(0,i.lastIndexOf("/"));e=Directory.getUpperFilePath(i);if(0<=t.indexOf("./"))return t=i+t.remove("./");t=0<=t.indexOf("../")?e+t.remove("../"):i+t}return t},VERSION_NAME="6.4.9",BUILD_DATE="2019092001",BookType={normal_book:0,single_book:1,slide_book:3,singleSlide_book:6,catalog_book:7,singleCatalog_book:8},normalBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},singleBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},bookCorner={top_left:0,top_right:1,bottom_left:2,bottom_right:3},BrowserType={WEBKIT:1,OPERA:1,MOZ:2,MS:3},Direction={left:"left",right:"right",top:"top",bottom:"bottom"},bookEvent={onCurrentPageIndexChanged:"BE_PIC",onCurrentPageIndexWillChange:"BE_PIWC",onNoNextPage:"BE_NNP",onNoPreviousPage:"BE_NPP"},PLUGIN_MAGNETICS="AbPIMagneticSlider",PLUGIN_ROTATE3D="AbPIRotationPhotoFor3D",PLUGIN_VIDEO1="VideoPlayerExemple01",PLUGIN_VIDEO2="VideoPlayerExemple02",PLUGIN_CLASSAUDIO="",KEY_CODE_ENTER=13,KEY_CODE_LEFT=37,KEY_CODE_UP=38,KEY_CODE_RIGHT=39,KEY_CODE_DOWN=40,KEY_CODE_HOME=36,KEY_CODE_END=35,KEY_CODE_PAGEUP=33,KEY_CODE_PAGEDOWN=34,KEY_CODE_DELETE=46,KEY_CODE_F11=122,KEY_CODE_A=65,MOUSE_LEFT=1,MOUSE_MIDDLE=2,MOUSE_RIGHT=3,LOADING_WIDTH=30,LOADING_HEIGHT=30,COIL_PAGE_WIDTH=500,isTouchDevice=function(){var t="ontouchstart"in window,i=navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android/i),i=i&&0<i.length;return t&&i},isTouch=isTouchDevice(),_event;_event=isTouchDevice()?{_down:"touchstart",_move:"touchmove",_up:"touchend",_end:"touchend",_click:"touchend",_leave:"touchleave",_out:"touchleave",_enter:"touchstart",_mousewheel:"mousewheel",_over:"touchover"}:{_down:"mousedown",_move:"mousemove",_up:"mouseup",_end:"mouseup",_click:"click",_leave:"mouseleave",_out:"mouseout",_enter:"mouseenter",_mousewheel:"mousewheel",_over:"mouseover"};$.browser.mozilla&&(_event._mousewheel="DOMMouseScroll");var WebScheme={HTTP:"http",HTTPS:"https",FTP:"ftp",MAILTO:"mailto",IDAP:"idap",FILE:"file",NEWS:"news",GOPHER:"gopher",TELNET:"telnet"},STR_XML_HEAD='<?xml version="1.0" encoding="utf-8"?>',SearchItemRelation={NEARBY:0,SPACE:1,DOUBLE_SPACE:2,RETURN:3},PageTextSelectMode={LINE:0,COLUMN:1},aliasLanguage={btnFullScreen:["btnFullscreen"],btnDisableFullScreen:["btnExitFullscreen"],btnSelection:["btnSelectText"],btnNextPage:["btnPageForward"],btnPrePage:["btnPageBack"]},checkBookConfig=function(){void 0==window.aliasConfig&&(window.aliasConfig={});bookConfig.searchColor=getConfigValue("searchColor","#00ffff");bookConfig.searchAlpha=getConfigValue("searchAlpha",.3);bookConfig.appLogoIcon=getConfigValue("appLogoIcon","");bookConfig.HomeURL=getConfigValue("HomeURL","");bookConfig.bookTitle=getConfigValue("bookTitle","FLIPBOOK");bookConfig.bookDescription=getConfigValue("bookDescription","");bookConfig.toolbarColor=getConfigValue("toolbarColor","#27181A");bookConfig.iconColor=getConfigValue("iconColor","#FFFFFF");bookConfig.toolbarColor==bookConfig.iconColor&&(bookConfig.iconColor=Color(bookConfig.toolbarColor).reverse());bookConfig.pageNumColor=getConfigValue("pageNumColor","#000000");bookConfig.formBackgroundColor=getConfigValue("formBackgroundColor",bookConfig.toolbarColor);bookConfig.formFontColor=getConfigValue("formFontColor",bookConfig.iconColor);bookConfig.formBackgroundColor==bookConfig.formFontColor&&(bookConfig.formFontColor=Color(bookConfig.formBackgroundColor).reverse());bookConfig.loadingBackground=getConfigValue("loadingBackground","#1F2232");bookConfig.searchHightlightColor=getConfigValue("searchHightlightColor","#fdc606");bookConfig.logoHeight=getConfigValue("logoHeight",40);bookConfig.logoTop=getConfigValue("logoTop",0);bookConfig.logoPadding=getConfigValue("logoPadding",0);bookConfig.isFixLogoSize=getConfigValue("isFixLogoSize",!1);bookConfig.HomeButtonVisible=getConfigValue("HomeButtonVisible",!1);bookConfig.ShareButtonVisible=getConfigValue("ShareButtonVisible",!1);bookConfig.isInsertFrameLinkEnable=getConfigValue("isInsertFrameLinkEnable",!0);bookConfig.addCurrentPage=getConfigValue("addCurrentPage",!1);bookConfig.WeChatShareButtonVisible=getConfigValue("WeChatShareButtonVisible",!1);bookConfig.ThumbnailsButtonVisible=getConfigValue("ThumbnailsButtonVisible",!1);bookConfig.thumbnailColor=getConfigValue("thumbnailColor",bookConfig.formBackgroundColor);bookConfig.thumbnailAlpha=getConfigValue("thumbnailAlpha",60);bookConfig.ZoomButtonVisible=getConfigValue("ZoomButtonVisible",!1);bookConfig.ZoomMapVisible=getConfigValue("ZoomMapVisible",!0);bookConfig.MagnifierButtonVisible=getConfigValue("MagnifierButtonVisible",!1);bookConfig.SupportOperatePageZoom=getConfigValue("SupportOperatePageZoom",!0);bookConfig.TableOfContentButtonVisible=getConfigValue("TableOfContentButtonVisible",!1);bookConfig.isHideTabelOfContentNodes=getConfigValue("isHideTabelOfContentNodes",!0);bookConfig.BookMarkButtonVisible=getConfigValue("BookMarkButtonVisible",!1);bookConfig.SelectTextButtonVisible=getConfigValue("SelectTextButtonVisible",!1);bookConfig.SearchButtonVisible=getConfigValue("SearchButtonVisible",!1);bookConfig.searchKeywordFontColor=getConfigValue("searchKeywordFontColor","#FFB000");bookConfig.FullscreenButtonVisible=getConfigValue("FullscreenButtonVisible",!0);bookConfig.hideMiniFullscreen=getConfigValue("hideMiniFullscreen",!1);bookConfig.updatePageNumberForFlip=getConfigValue("updatePageNumberForFlip",!1);bookConfig.leastSearchChar=getConfigValue("leastSearchChar",0);bookConfig.PrintButtonVisible=getConfigValue("PrintButtonVisible",!1);bookConfig.printWatermarkFile=getConfigValue("printWatermarkFile","");bookConfig.BackgroundSoundButtonVisible=getConfigValue("BackgroundSoundButtonVisible",!1);bookConfig.BackgroundSoundURL=getConfigValue("BackgroundSoundURL","");bookConfig.BackgroundSoundLoop=getConfigValue("BackgroundSoundLoop",-1);bookConfig.HelpButtonVisible=getConfigValue("HelpButtonVisible",!1);bookConfig.helpContentFileURL=getConfigValue("helpContentFileURL","");bookConfig.helpWidth=getConfigValue("helpWidth",400);bookConfig.helpHeight=getConfigValue("helpHeight",450);bookConfig.showHelpContentAtFirst=getConfigValue("showHelpContentAtFirst",!1);bookConfig.aboutButtonVisible=getConfigValue("aboutButtonVisible",!1);bookConfig.aboutContactInfoTxt=getConfigValue("aboutContactInfoTxt","");bookConfig.AutoPlayButtonVisible=getConfigValue("AutoPlayButtonVisible",!1);bookConfig.autoPlayAutoStart=getConfigValue("autoPlayAutoStart",!1);bookConfig.autoPlayDuration=getConfigValue("autoPlayDuration",3);bookConfig.autoPlayLoopCount=getConfigValue("autoPlayLoopCount",1);bookConfig.minZoomWidth=getConfigValue("minZoomWidth",0);bookConfig.minZoomHeight=getConfigValue("minZoomHeight",0);bookConfig.maxZoomWidth=getConfigValue("maxZoomWidth",0);bookConfig.maxZoomHeight=getConfigValue("maxZoomHeight",0);bookConfig.defaultZoomWidth=getConfigValue("defaultZoomWidth",0);bookConfig.defaultZoomHeight=getConfigValue("defaultZoomHeight",0);bookConfig.mouseWheelFlip=getConfigValue("mouseWheelFlip",!0);bookConfig.DownloadButtonVisible=getConfigValue("DownloadButtonVisible",!0);bookConfig.DownloadURL=getConfigValue("DownloadURL","");fixDownloadURLValue();bookConfig.bgBeginColor=getConfigValue("bgBeginColor","#E6E6E6");bookConfig.bgEndColor=getConfigValue("bgEndColor","#E3E3E3");bookConfig.bgMRotation=getConfigValue("bgMRotation",90);bookConfig.backGroundImgURL=getConfigValue("backGroundImgURL","");bookConfig.backgroundOpacity=getConfigValue("backgroundOpacity",100);bookConfig.LeftShadowWidth=getConfigValue("LeftShadowWidth",40);bookConfig.LeftShadowAlpha=getConfigValue("LeftShadowAlpha",1);bookConfig.RightShadowWidth=getConfigValue("RightShadowWidth",40);bookConfig.RightShadowAlpha=getConfigValue("RightShadowAlpha",1);$.system.name==$.system.ANDROID&&$.browser.wechat&&(bookConfig.RightShadowAlpha=1,bookConfig.LeftShadowAlpha=1);bookConfig.ShowTopLeftShadow=getConfigValue("ShowTopLeftShadow",!0);bookConfig.pageBackgroundColor=getConfigValue("pageBackgroundColor","#FFFFFF");bookConfig.flipshortcutbutton=getConfigValue("flipshortcutbutton",!1);bookConfig.OriginPageIndex=getConfigValue("OriginPageIndex",1);bookConfig.HardPageEnable=getConfigValue("HardPageEnable",!1);bookConfig.HardInnerPageEnable=getConfigValue("HardInnerPageEnable",!1);bookConfig.bookPageStretch=getConfigValue("bookPageStretch",!1);$.browser.msie&&11>$.browser.version&&(bookConfig.HardPageEnable=!1,bookConfig.HardInnerPageEnable=!1);bookConfig.HardPageEnable||(bookConfig.HardInnerPageEnable=!1);bookConfig.thicknessWidthType=getConfigValue("thicknessWidthType","thick").toLowerCase();bookConfig.showThicknessOnMobile=getConfigValue("showThicknessOnMobile",!1);bookConfig.highDefinitionConversion=getConfigValue("highDefinitionConversion",!1);bookConfig.isStopMouseMenu=getConfigValue("isStopMouseMenu",!1);bookConfig.thicknessColor=getConfigValue("thicknessColor","#FFFFFF");bookConfig.RightToLeft=getConfigValue("RightToLeft",!1);bookConfig.flippingTime=getConfigValue("flippingTime",.3);void 0!=bookConfig.flippingTime&&(bookConfig.flippingTime=.2>bookConfig.flippingTime?.2:bookConfig.flippingTime);bookConfig.retainBookCenter=getConfigValue("retainBookCenter",!0);bookConfig.totalPagesCaption=getConfigValue("totalPagesCaption","");bookConfig.pageNumberCaption=getConfigValue("pageNumberCaption","");bookConfig.buttonsSortXML=getConfigValue("buttonsSortXML",[]);bookConfig.leftRightPnlShowOption=getConfigValue("leftRightPnlShowOption","").toLowerCase();bookConfig.topMargin=getConfigValue("topMargin",10);bookConfig.bottomMargin=getConfigValue("bottomMargin",10);bookConfig.leftMargin=getConfigValue("leftMargin",10);bookConfig.rightMargin=getConfigValue("rightMargin",10);bookConfig.topMarginOnMobile=getConfigValue("topMarginOnMobile",10);bookConfig.bottomMarginOnMobile=getConfigValue("bottomMarginOnMobile",10);bookConfig.leftMarginOnMobile=getConfigValue("leftMarginOnMobile",10);bookConfig.rightMarginOnMobile=getConfigValue("rightMarginOnMobile",10);if(isPhone()||isPad())bookConfig.topMargin=bookConfig.topMarginOnMobile,bookConfig.bottomMargin=bookConfig.bottomMarginOnMobile,bookConfig.leftMargin=bookConfig.leftMarginOnMobile,bookConfig.rightMargin=bookConfig.rightMarginOnMobile;bookConfig.visibleAreaLeft=parseFloat(getConfigValue("visibleAreaLeft","0%"));bookConfig.visibleAreaTop=parseFloat(getConfigValue("visibleAreaTop","0%"));bookConfig.visibleAreaRight=parseFloat(getConfigValue("visibleAreaRight","100%"));bookConfig.visibleAreaBottom=parseFloat(getConfigValue("visibleAreaBottom","100%"));bookConfig.visibleAreaLeft=isNaN(bookConfig.visibleAreaLeft)?"0%":bookConfig.visibleAreaLeft;bookConfig.visibleAreaTop=isNaN(bookConfig.visibleAreaTop)?"0%":bookConfig.visibleAreaTop;bookConfig.visibleAreaRight=isNaN(bookConfig.visibleAreaRight)?"100%":bookConfig.visibleAreaRight;bookConfig.visibleAreaBottom=isNaN(bookConfig.visibleAreaBottom)?"100%":bookConfig.visibleAreaBottom;bookConfig.bleedAreaLeft=parseFloat(getConfigValue("bleedAreaLeft","0%"));bookConfig.bleedAreaTop=parseFloat(getConfigValue("bleedAreaTop","0%"));bookConfig.bleedAreaRight=parseFloat(getConfigValue("bleedAreaRight","0%"));bookConfig.bleedAreaBottom=parseFloat(getConfigValue("bleedAreaBottom","0%"));bookConfig.bleedAreaLeft=isNaN(bookConfig.bleedAreaLeft)?"0%":bookConfig.bleedAreaLeft;bookConfig.bleedAreaTop=isNaN(bookConfig.bleedAreaTop)?"0%":bookConfig.bleedAreaTop;bookConfig.bleedAreaRight=isNaN(bookConfig.bleedAreaRight)?"0%":bookConfig.bleedAreaRight;bookConfig.bleedAreaBottom=isNaN(bookConfig.bleedAreaBottom)?"0%":bookConfig.bleedAreaBottom;bookConfig.visibleAreaLeft=bookConfig.bleedAreaLeft?bookConfig.bleedAreaLeft:bookConfig.visibleAreaLeft;bookConfig.visibleAreaTop=bookConfig.bleedAreaTop?bookConfig.bleedAreaTop:bookConfig.visibleAreaTop;bookConfig.visibleAreaRight=bookConfig.bleedAreaRight?100-parseFloat(bookConfig.bleedAreaRight):bookConfig.visibleAreaRight;bookConfig.visibleAreaBottom=bookConfig.bleedAreaBottom?100-parseFloat(bookConfig.bleedAreaBottom):bookConfig.visibleAreaBottom;bookConfig.LinkDownColor=getConfigValue("LinkDownColor","#9C9C9C");bookConfig.LinkAlpha=getConfigValue("LinkAlpha",.4);bookConfig.googleAnalyticsID=getConfigValue("googleAnalyticsID","");bookConfig.language=getConfigValue("language","English");bookConfig.AboutAddress=getConfigValue("AboutAddress","");bookConfig.AboutEmail=getConfigValue("AboutEmail","");bookConfig.AboutMobile=getConfigValue("AboutMobile","");bookConfig.AboutWebsite=getConfigValue("AboutWebsite","");bookConfig.AboutDescription=getConfigValue("AboutDescription","");bookConfig.AboutAuthor=getConfigValue("AboutAuthor","");bookConfig.totalPageCount=getConfigValue("totalPageCount",1);bookConfig.largePageWidth=getConfigValue("largePageWidth",1440);bookConfig.largePageHeight=getConfigValue("largePageHeight",1728);bookConfig.normalPath=getConfigValue("normalPath","files/page/");bookConfig.largePath=getConfigValue("largePath","files/large/");bookConfig.thumbPath=getConfigValue("thumbPath","files/thumb/");bookConfig.FlipStyle=getConfigValue("FlipStyle","flip");bookConfig.showDoublePage=getConfigValue("autoDoublePage",!0);bookConfig.alwaysDoublePageOnMobile=getConfigValue("alwaysDoublePageOnMobile",!1);bookConfig.upsideOnMobile=function(){return bookConfig.alwaysDoublePageOnMobile&&window.innerHeight>window.innerWidth?!0:!1};bookConfig.QRPath=getConfigValue("QRPath","files/extfile/QRURL.png");bookConfig.QRCode=getConfigValue("QRCode",!1);bookConfig.MiniStyle=getConfigValue("MiniStyle",!0);bookConfig.AnnotationButtonVisible=getConfigValue("AnnotationButtonVisible",!1);bookConfig.InstructionsButtonVisible=getConfigValue("InstructionsButtonVisible",!1);bookConfig.showInstructionOnStart=getConfigValue("showInstructionOnStart",!0);bookConfig.showBookInstructionOnStart=getConfigValue("showBookInstructionOnStart",!1);bookConfig.EmailButtonVisible=getConfigValue("EmailButtonVisible",!1);bookConfig.btnShareWithEmailSubject=getConfigValue("btnShareWithEmailSubject","");bookConfig.btnShareWithEmailBody=getConfigValue("btnShareWithEmailBody","");bookConfig.socialShareLink=getConfigValue("socialShareLink","");bookConfig.VideoButtonVisible=getConfigValue("VideoButtonVisible",!1);if(!global.videoList||0>=global.videoList.length)bookConfig.VideoButtonVisible=!1;bookConfig.SlideshowButtonVisible=getConfigValue("SlideshowButtonVisible",!1);if(!global.slideshow||0>=global.slideshow.length)bookConfig.SlideshowButtonVisible=!1;bookConfig.CompanyLogoFile=getConfigValue("CompanyLogoFile","");bookConfig.UIBaseURL=getConfigValue("UIBaseURL","");bookConfig.haveAdSense=getConfigValue("haveAdSense",!1);bookConfig.adSenseLeft=getConfigValue("adSenseLeft",0);bookConfig.adSenseTop=getConfigValue("adSenseTop",0);bookConfig.adSenseWidth=getConfigValue("adSenseWidth",0);bookConfig.adSenseHeight=getConfigValue("adSenseHeight",0);bookConfig.adSenseClientId=getConfigValue("adSenseClientId","");bookConfig.adSenseSlotId=getConfigValue("adSenseSlotId","");bookConfig.productName=getConfigValue("productName","Flip HTML5");bookConfig.homePage=getConfigValue("homePage","http://www.fliphtml5.com");bookConfig.preloadNextPage=getConfigValue("preloadNextPage",!0);bookConfig.showMirrorSide=getConfigValue("showMirrorSide",!0);bookConfig.addPaperCoil=getConfigValue("addPaperCoil",!1);bookConfig.addPaperCoil&&(bookConfig.BindingType="loose");"loose"==bookConfig.BindingType&&(bookConfig.addPaperCoil=!0);bookConfig.ToolbarViewMode=getConfigValue("ToolbarViewMode","standard");bookConfig.ToolbarViewMode=bookConfig.ToolbarViewMode.toLocaleLowerCase();bookConfig.isTheBookOpen=getConfigValue("isTheBookOpen",!1);bookConfig.FlipDirection=getConfigValue("FlipDirection",0);bookConfig.HomeButtonIcon=getConfigValue("HomeButtonIcon","");bookConfig.AnnotationButtonIcon=getConfigValue("AnnotationButtonIcon","");bookConfig.VideoButtonIcon=getConfigValue("VideoButtonIcon","");bookConfig.SlideshowButtonIcon=getConfigValue("SlideshowButtonIcon","");bookConfig.ShareButtonIcon=getConfigValue("ShareButtonIcon","");bookConfig.ThumbnailButtonIcon=getConfigValue("ThumbnailButtonIcon","");bookConfig.ZoomInButtonIcon=getConfigValue("ZoomInButtonIcon","");bookConfig.ZoomOutButtonIcon=getConfigValue("ZoomOutButtonIcon","");bookConfig.MagnifierButtonIcon=getConfigValue("MagnifierButtonIcon","");bookConfig.FullscreenButtonIcon=getConfigValue("FullscreenButtonIcon","");bookConfig.ExitFullscreenButtonIcon=getConfigValue("ExitFullscreenButtonIcon","");bookConfig.BookmarkButtonIcon=getConfigValue("BookmarkButtonIcon","");bookConfig.TableOfContentButtonIcon=getConfigValue("TableOfContentButtonIcon","");bookConfig.SearchButtonIcon=getConfigValue("SearchButtonIcon","");bookConfig.PrintButtonIcon=getConfigValue("PrintButtonIcon","");bookConfig.BackgroundSoundButtonOnIcon=getConfigValue("BackgroundSoundButtonOnIcon","");bookConfig.BackgroundSoundButtonOffIcon=getConfigValue("BackgroundSoundButtonOffIcon","");bookConfig.HelpButtonIcon=getConfigValue("HelpButtonIcon","");bookConfig.AboutButtonIcon=getConfigValue("AboutButtonIcon","");bookConfig.AutoPlayStartButtonIcon=getConfigValue("AutoPlayStartButtonIcon","");bookConfig.AutoPlayStopButtonIcon=getConfigValue("AutoPlayStopButtonIcon","");bookConfig.DownloadButtonIcon=getConfigValue("DownloadButtonIcon","");bookConfig.facebookShotImageURL=getConfigValue("facebookShotImageURL","");bookConfig.searchTextJS=getConfigValue("searchTextJS","files/search/book_config.js");bookConfig.searchPositionJS=getConfigValue("searchPositionJS","files/search/text_position.js");bookConfig.userSmallMode=getConfigValue("userSmallMode",!0);bookConfig.maxWidthToSmallMode=getConfigValue("maxWidthToSmallMode",300);bookConfig.maxHeightToSmallMode=getConfigValue("maxHeightToSmallMode",300);bookConfig.maxWidthToSmallMode>window.screen.width&&(bookConfig.maxWidthToSmallMode=300);bookConfig.maxHeightToSmallMode>window.screen.height&&(bookConfig.maxHeightToSmallMode=300);bookConfig.backgroundScene=getConfigValue("backgroundScene","None");bookConfig.audioVolume=getConfigValue("audioVolume",.5);bookConfig.enablePageBack=getConfigValue("enablePageBack",!1);bookConfig.userListPath=getConfigValue("userListPath","files/extfiles/users.js");bookConfig.isFlipPdf=getConfigValue("isFlipPdf",!1);bookConfig.SingleModeBanFlipToLastPage=getConfigValue("SingleModeBanFlipToLastPage",!1);bookConfig.isSingleBookFullWindowOnMobile=getConfigValue("isSingleBookFullWindowOnMobile",!1);bookConfig.showGotoButtonsAtFirst=getConfigValue("showGotoButtonsAtFirst",!1);!1==bookConfig.isFlipPdf&&void 0!=global.isFlipPdf&&(bookConfig.isFlipPdf=isFlipPdf);bookConfig.FlipSound=getConfigValue("FlipSound",!0);bookConfig.CurlingPageCorner=getConfigValue("CurlingPageCorner",!0);bookConfig.iconFontColor=getConfigValue("iconFontColor","#ffffff");try{bookConfig.retainBookCenter=void 0!=staticAd&&!0==staticAd.haveAd?!1:getConfigValue("retainBookCenter",!0)}catch(t){}bookConfig.updateURLForPage=getConfigValue("updateURLForPage",!0);bookConfig.borderColor=getConfigValue("borderColor","#572f0d");bookConfig.outerCoverBorder=getConfigValue("outerCoverBorder",!1);bookConfig.hardCoverBorderWidth=getConfigValue("hardCoverBorderWidth",0);bookConfig.cornerRound=getConfigValue("cornerRound",0);bookConfig.hardCoverBorderWidth=bookConfig.HardPageEnable?Number.between(0,16,bookConfig.hardCoverBorderWidth):0;bookConfig.cornerRound=bookConfig.HardPageEnable?Number.between(0,bookConfig.hardCoverBorderWidth,bookConfig.cornerRound):0;bookConfig.coverTexture=getConfigValue("coverTexture","none");bookConfig.passwardPrompt=getConfigValue("passwardPrompt","");bookConfig.SlideshowAutoPlay=getConfigValue("SlideshowAutoPlay",!1);bookConfig.SlideshowPlayInterval=getConfigValue("SlideshowPlayInterval",5);bookConfig.productName=getConfigValue("productName","Flip HTML5");bookConfig.homePage=getConfigValue("homePage","http://www.fliphtml5.com");global.productName=bookConfig.productName||"Flip HTML5";global.homePage=bookConfig.homePage||"http://www.fliphtml5.com";bookConfig.backgroundPosition=getConfigValue("backgroundPosition","Stretch");bookConfig.toolbarAlwaysShow=getConfigValue("toolbarAlwaysShow",!1);bookConfig.restorePageVisible=getConfigValue("restorePageVisible",!1);bookConfig.toobarClear=getConfigValue("toobarClear",!1);bookConfig.bottomToolBarAlpha=getConfigValue("bottomToolBarAlpha",1);bookConfig.topToolBarAlpha=getConfigValue("topToolBarAlpha",1);bookConfig.ToolBarAlpha=getConfigValue("ToolBarAlpha",1);(isPhone()||isPad())&&"slide"!=bookConfig.FlipStyle.toLowerCase()&&(bookConfig.FlipStyle="flip");isBelowIE9()&&(bookConfig.FlipStyle="slide");if(isPhone()||isPad()||"catalog"==bookConfig.FlipStyle.toLowerCase()||"slide"==bookConfig.FlipStyle.toLowerCase()&&"lite"==bookConfig.ToolbarViewMode.toLowerCase())bookConfig.flipshortcutbutton=!1;bookConfig.BackgroundSoundURL||bookConfig.FlipSound||(bookConfig.BackgroundSoundButtonVisible=!1);bookConfig.BackgroundSoundURL||!isPhone()&&!isPad()||(bookConfig.BackgroundSoundButtonVisible=!1);if(bookType==BookType.singleCatalog_book||bookType==BookType.catalog_book||bookType==BookType.slide_book&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()||bookType==BookType.singleSlide_book&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()||isPhone()||isPad())bookConfig.flipshortcutbutton=!1;if(global.videoList&&1<=global.videoList.length)for(var t=0;t<videoList.length;t++)videoList[t].id||(videoList[t].id=""),videoList[t].description||(videoList[t].description=""),videoList[t].thumbnail||(videoList[t].thumbnail=""),videoList[t].title||(videoList[t].title=""),videoList[t].type||(videoList[t].type="");try{window.localStorage||(bookConfig.BookMarkButtonVisible=!1,bookConfig.AnnotationButtonVisible=!1,bookConfig.restorePageVisible=!1,global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&(global.pageEditor.setting.shoppingCartHTML=!1))}catch(t){bookConfig.BookMarkButtonVisible=!1,bookConfig.AnnotationButtonVisible=!1,bookConfig.restorePageVisible=!1,global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&(global.pageEditor.setting.shoppingCartHTML=!1)}bookConfig.OpenWindow=(getConfigValue("OpenWindow","_blank")+"").toLowerCase();bookConfig.appLogoOpenWindow=(getConfigValue("appLogoOpenWindow","_blank")+"").toLowerCase();bookConfig.OpenWindow.startsWith("_")||(bookConfig.OpenWindow="_"+bookConfig.OpenWindow);bookConfig.appLogoOpenWindow.startsWith("_")||(bookConfig.appLogoOpenWindow="_"+bookConfig.appLogoOpenWindow);bookConfig.appLogoLinkURL=getConfigValue("appLogoLinkURL","");bookConfig.appLogoLinkURL&&(bookConfig.appLogoLinkURL=getRealURL(bookConfig.appLogoLinkURL));bookConfig.PhoneButtonVisible=getConfigValue("PhoneButtonVisible",!1);bookConfig.PhoneButtonIcon=getConfigValue("PhoneButtonIcon","");bookConfig.phoneNumber=getConfigValue("phoneNumber","");bookConfig.aboutContactInfoTxt=getConfigValue("aboutContactInfoTxt","");bookConfig.useTheAliCloudChart=getConfigValue("useTheAliCloudChart",!1);1<=passwardType()&&(bookConfig.useTheAliCloudChart=!1);bookConfig.OnlyOpenInWechat=getConfigValue("OnlyOpenInWechat",!1);bookConfig.NoWechatSharing=getConfigValue("NoWechatSharing",!1);bookConfig.NoWechatSharing&&(t=function(){WeixinJSBridge.call("hideOptionMenu")},"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",t,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",t),document.attachEvent("onWeixinJSBridgeReady",t)):t());bookConfig.textClarityEnhancement=getConfigValue("textClarityEnhancement",0);decodeAboutInfo();bookConfig.AboutDescription=bookConfig.AboutDescription.replace(/\n/g,"<br/>");bookConfig.AboutDescription=bookConfig.AboutDescription.replace(/\r/g,"<br/>");checkBookmarkConfig();isBelowIE9()&&(bookConfig.BookMarkButtonVisible=!1,bookConfig.AnnotationButtonVisible=!1,bookConfig.WeChatShareButtonVisible=!1);bookConfig.useTheAliCloudChart&&bookConfig.backGroundImgURL&&(0<=bookConfig.backGroundImgURL.indexOf("?")?bookConfig.backGroundImgURL+="&x-oss-process=image/resize,h_800":bookConfig.backGroundImgURL+="?x-oss-process=image/resize,h_800",window.isSupportWebp&&(bookConfig.backGroundImgURL+="/format,webp"));checkURLValue();global.checkReportConfig&&checkReportConfig()};function checkBookmarkConfig(){global.bmtConfig||(bmtConfig=[]);void 0==bmtConfig.onSideEdge&&(bmtConfig.onSideEdge=!0);void 0==bmtConfig.showPage&&(bmtConfig.showPage=!1);void 0==bmtConfig.hasTexture&&(bmtConfig.hasTexture=!1);bmtConfig.tabs&&0<bmtConfig.tabs.length&&!1==bmtConfig.onSideEdge&&!isPhone()&&!isPad()&&"slide"!=bookConfig.FlipStyle.toLowerCase()&&(75>bookConfig.topMargin&&(bookConfig.topMargin=75),"vertical"==bookConfig.flipDrection&&75>bookConfig.bottomMargin&&(bookConfig.topMargin=75))}var isBool=function(t){if(!0===t||!1===t)return!0;if(void 0==t)return!1;var i=["false","no","hide","disable"];t=t.toLowerCase();return 0>["true","yes","show","enable"].indexOf(t)&&0>i.indexOf(t)?!1:!0},getConfigValue=function(t,i){void 0!=i&&"string"==typeof i&&""!=i.trim()&&isBool(i)&&(i=parseBool(i));var e;e=void 0!=bookConfig[t]?bookConfig[t]:getValueFromAliasConfig(t);return void 0==e?i:void 0==i?e:"number"==typeof i?Number(e):"boolean"==typeof i?parseBool(e):"string"==typeof i&&"#"==i[0]?Color(e).toString():e},getValueFromAliasConfig=function(t){if(global.aliasConfig&&(t=aliasConfig[t]))for(var i=0;i<t.length;i++){var e=t[i];if(void 0!=bookConfig[e])return bookConfig[e]}},fixDownloadURLValue=function(){""==bookConfig.DownloadURL&&void 0!=bookConfig.downloadURL&&""!=bookConfig.downloadURL&&(bookConfig.DownloadURL=bookConfig.downloadURL)},checkURLValue=function(){bookConfig.BackgroundSoundURL=fixURLValue(bookConfig.BackgroundSoundURL);bookConfig.helpContentFileURL=fixURLValue(bookConfig.helpContentFileURL);bookConfig.backGroundImgURL=fixURLValue(bookConfig.backGroundImgURL);bookConfig.facebookShotImageURL=fixURLValue(bookConfig.facebookShotImageURL);bookConfig.appLogoIcon=fixURLValue(bookConfig.appLogoIcon);bookConfig.printWatermarkFile=fixURLValue(bookConfig.printWatermarkFile);bookConfig.loadingPicture=fixURLValue(bookConfig.loadingPicture)},fixURLValue=function(t){return!$.browser.app&&bookConfig.CreatedTime&&t&&"string"==typeof t?t=0<=t.indexOf("?")?t+"&"+bookConfig.CreatedTime:t+"?"+bookConfig.CreatedTime:t},decodeAboutInfo=function(){if(bookConfig.aboutContactInfoTxt){try{var t=$(bookConfig.aboutContactInfoTxt)}catch(t){return}var i,e,o,s,n,h,a;t.find("title").text();i=t.find("desc").text();e=t.find("logo").text();for(var t=t.find("keys").children(),r=0;r<t.length;r++){var l=$(t[r]);"Phone"==l.attr("type")&&(o=l.text());"Link"==l.attr("type")&&(s=l.text());"Email"==l.attr("type")&&(n=l.text());"Address"==l.attr("type")&&(h=l.text());"Author"==l.attr("type")&&(a=l.text())}t=function(t){return String.parseUtf8(base64.decode(t))};h&&!bookConfig.AboutAddress&&(bookConfig.AboutAddress=t(h));n&&!bookConfig.AboutEmail&&(bookConfig.AboutEmail=t(n));o&&!bookConfig.AboutMobile&&(bookConfig.AboutMobile=t(o));s&&!bookConfig.AboutWebsite&&(bookConfig.AboutWebsite=t(s));i&&!bookConfig.AboutDescription&&(bookConfig.AboutDescription=t(i));a&&!bookConfig.AboutAuthor&&(bookConfig.AboutAuthor=t(a));e&&!bookConfig.CompanyLogoFile&&(bookConfig.CompanyLogoFile=t(e));bookConfig.CompanyLogoFile&&(bookConfig.CompanyLogoFile=bookConfig.CompanyLogoFile.replace(/\\/g,"/"));bookConfig.isFlipPdf&&bookConfig.CompanyLogoFile.startsWith("./")&&(bookConfig.CompanyLogoFile="."+bookConfig.CompanyLogoFile)}},cr=DeString("c3753b3f49449a65f9ad12578d7a4602c8ae34"),checkReportConfig=function(){bookConfig.EnableReportButton=getConfigValue("EnableReportButton",!0)},transformCSS=function(t){var i=$.system.name==$.system.IOS&&10.3<=$.system.version,e="",o={};void 0!=t.perspective&&(e=e+"perspective("+t.perspective+"px) ");t.tran&&($.browser.msie&&!i&&(e=e+"translate("+t.tran.x+"px,"+t.tran.y+"px) "),!$.browser.msie||i)&&(e=e+"translate3d("+t.tran.x+"px,"+t.tran.y+"px,0px) ");void 0!=t.rotate&&(e=e+"rotate("+t.rotate+"deg) ");void 0!=t.rotateY&&(e=e+"rotateY("+t.rotateY+"deg) ");void 0!=t.rotateX&&(e=e+"rotateX("+t.rotateX+"deg) ");if(void 0!=t.scale){if(!$.browser.msie||i)e=e+"scale3d("+t.scale+","+t.scale+",1) ";$.browser.msie&&!i&&(e=e+"scale("+t.scale+") ")}void 0!=t.scaleX&&(e=e+"scaleX("+t.scaleX+") ");void 0!=t.scaleY&&(e=e+"scaleY("+t.scaleY+") ");t.origin&&(i=t.origin.x+"% "+t.origin.y+"%",o["-webkit-transform-origin"]=i,o["-moz-transform-origin"]=i,o["-ms-transform-origin"]=i,o["-o-transform-origin"]=i,o["transform-origin"]=i);e&&(o["-webkit-transform"]=e,o["-moz-transform"]=e,o["-ms-transform"]=e,o["-o-transform"]=e,o.transform=e);t.obj&&t.obj.css(o);return o};bdor[32]=function(t,i){return t+i};var changeShowBook=function(t){switch(t){case BookType.normal_book:bookType=BookType.normal_book;singlePageBook&&singlePageBook.hide();flipBook&&flipBook.show();bookConfig.ThumbnailsButtonVisible&&thumbnail.mergeAll();break;case BookType.single_book:bookType=BookType.single_book;singlePageBook&&singlePageBook.show();flipBook&&flipBook.hide();bookConfig.ThumbnailsButtonVisible&&thumbnail.fissionAll();break;case BookType.slide_book:bookType=BookType.slide_book;slideBook&&slideBook.show();singleSlideBook.hide();bookConfig.ThumbnailsButtonVisible&&thumbnail.mergeAll();break;case BookType.singleSlide_book:bookType=BookType.singleSlide_book;slideBook&&slideBook.hide();singleSlideBook.show();bookConfig.ThumbnailsButtonVisible&&thumbnail.fissionAll();break;case BookType.catalog_book:bookType=BookType.catalog_book;catalogBook.show();bookConfig.ThumbnailsButtonVisible&&thumbnail.mergeAll();break;case BookType.singleCatalog_book:bookType=BookType.singleCatalog_book,singleCatalogBook.show(),bookConfig.ThumbnailsButtonVisible&&thumbnail.fissionAll()}},supports=function(){var e=document.createElement("div"),o=["Khtml","Ms","O","Moz","Webkit"];return function(t){if(t in e.style)return!0;t=t.replace(/^[a-z]/,function(t){return t.toUpperCase()});for(var i=o.length;i--;)if(o[i]+t in e.style)return!0;return!1}}(),getBrowserPre=function(){switch(browserType){case 3:return"-ms-";case 2:return"-moz-";case 1:return"-webkit-";case 4:return"-o-"}},getTransform=function(t){var i;switch(browserType){case 3:i=t.style["-ms-transform"];break;case 2:i=t.style["-moz-transform"];break;case 1:i=t.style["-webkit-transform"];break;case 4:i=t.style["-o-transform"];break;default:i=t.style.transform}if(void 0==i||null==i)if(i=t.style.transform,void 0==i||null==i)return Point(0,0);i=i.match(/translate\((.*?)\)/)||i.match(/translate3d\((.*?)\)/);if(null==i||""==i||2>i.length)return Point(0,0);i=i[1].split(", ");return Point(parseInt(i[0],10),parseInt(i[1],10))},getTransformScale=function(t){var i;switch(browserType){case 3:i=t.style["-ms-transform"];break;case 2:i=t.style["-moz-transform"];break;case 1:i=t.style["-webkit-transform"];break;case 4:i=t.style["-o-transform"];break;default:i=t.style.transform}if(void 0==i||null==i)if(i=t.style.transform,void 0==i||null==i)return 1;i=i.match(/scale\((.*?)\)/)||i.match(/scale3d\((.*?)\)/);if(null==i||""==i||2>i.length)return 1;i=i[1].split(",");return i[0]},getColor=function(t,i){var e=bookConfig[t];return void 0!=e?Color(e).toString():i},getImage=function(t){return t?$("<img src='"+t+"'/>"):new Image},parseBool=function(t,i){if(!0===t||!1===t)return t;if(void 0==t||null==t)return!1;i=!!i;if("number"==typeof t)return 0!=t;if("string"!=typeof t||""==t)return!1;var e=["true","yes","show","enable"],o=["false","no","hide","disable"];t=t.toLowerCase();return 0>e.indexOf(t)&&0>o.indexOf(t)?i:0<=e.indexOf(t)},getLanguage=function(t,i){if(global.selectedLanguage&&selectedLanguage[t])return selectedLanguage[t];if(global.aliasLanguage&&aliasLanguage[t])for(var e=aliasLanguage[t],o=0;o<e.length;o++){var s=e[o];if(global.selectedLanguage&&selectedLanguage[s])return selectedLanguage[s]}return i},selectedLanguage,selectLanguage=function(t){global.language||(global.language=[]);t=(t+"").toLowerCase();if(0==language.length)selectedLanguage=[];else{for(var i=[],e=0;e<language.length;e++)if(language[e].language.toLowerCase()==t){i=language[e];break}selectedLanguage=i}},handleData=function(t,i){if(50>t.length)return t;var e=t.length,o=t.toLowerCase().indexOf(i.toLowerCase()),s;25<=o?(s=Math.max(25<=e-o?o-25:e-50,0),s=".."+t.substring(s,o)):s=t.substring(0,o);e=25<e-o?t.substring(o,25<=o?o+25:50)+"..":t.substring(o,e);return s+e},onWindowTap=function(t){Log.print("onWindowTapEnter");global.windowTapInterval&&window.clearTimeout(global.windowTapInterval);global.windowTapInterval=window.setTimeout(function(){if(global.moreBar&&moreBar.visible)moreBar.hide();else{if(isPhone()||isPad()){if(bookConfig.toolbarAlwaysShow||global.foldingMenu&&!0==global.foldingMenu.visible)return;toolBar.showOrHide()}global.windowTapInterval&&window.clearTimeout(global.windowTapInterval)}},401)},stopEvent=function(t){try{var i=t||window.event;i.preventDefault?(i.preventDefault(),i.stopPropagation()):(i.returnValue=!1,i.cancelBubble=!0)}catch(t){}return!1},getPagesByRange=function(t){function i(t){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1}var e=[];if(!t||"string"!==typeof t||""==t.trim())return e;t=t.split(",");for(var o=0;o<t.length;o++){var s=t[o];if(!isNaN(s))s=getRealPageNumber(s),i(s)||e.push(s);else if(-1<s.indexOf("-")){var n=s.split("-");if(!(2>n.length))for(var s=getRealPageNumber(n[0]),h=getRealPageNumber(n[1]),n=Math.min(s,h),s=Math.max(s,h);n<=s;n++)n>bookConfig.totalPageCount||i(n)||e.push(n)}}return e},isSlideBook=function(){return"slide"==bookConfig.FlipStyle.toLowerCase()||isBelowIE9()?!0:!1};function addGoogleAdSense(){bookConfig.haveAdSense&&loadJavascript("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",function(){var b=document.createElement("ins"),b=$(b);b.addClass("adsbygoogle");b.css({display:"inline-block",width:"100%",height:"100%"});b.attr("data-ad-client",bookConfig.adSenseClientId);b.attr("data-ad-slot",bookConfig.adSenseSlotId);var c=$("<div/>");c.css({position:"absolute","z-index":100,left:bookConfig.adSenseLeft+"px",top:bookConfig.adSenseTop+"px",width:bookConfig.adSenseWidth+"px",height:bookConfig.adSenseHeight+"px"});tmpContainer.append(c);c.append(b);eval("(adsbygoogle = window.adsbygoogle || []).push({});")})}var changeLanguage=function(t){selectLanguage(t);global.toolBar&&toolBar.changeLanguage&&toolBar.changeLanguage();global.printBody&&printBody.changeLanguage();global.helpBody&&helpBody();global.aboutBody&&aboutBody.changeLanguage();global.sharePanel&&sharePanel.changeLanguage();global.languagePanel&&languagePanel.changeLanguage();global.videoGallery&&videoGallery.changeLanguage();global.photoGallery&&photoGallery.changeLanguage();global.bookmark&&bookmark.changeLanguage();global.frmTableOfContent&&frmTableOfContent.changeLanguage();global.frmSearch&&frmSearch.changeLanguage();global.bookInstructions&&global.bookInstructions.changeLanguage&&global.bookInstructions.changeLanguage();global.telephoneNumberForm&&global.telephoneNumberForm.changeLanguage()},googleAnalytics=function(){},controlAudioVolume=function(){if(!isNaN(bookConfig.audioVolume)){var t=parseFloat(bookConfig.audioVolume);global.bgSound&&global.bgSound.setVolume(t);flipAudio&&(flipAudio[0].volume=t)}},TurnonAutoFlip=function(){bookConfig.autoFlipOnStart&&window.setTimeout(function(){auto_player&&auto_player.start();toolBar&&toolBar.changeAutoPlayIcon&&toolBar.changeAutoPlayIcon()},1e3)},flipAudio,flipSoundIsPlaying=!0,playFlipSound=function(){if(bookConfig.FlipSound&&flipSoundIsPlaying)if(!isPhone()&&!isPad()&&!isIE()){var t=$("<audio preload style='display:none;'><source src='https://att.dongao.com/ebook/ebookfiles/icon/flipsound.ogg' type='audio/ogg'><source src='"+soundBaseURL+"flipsound.mp3?2018071601' type='audio/mpeg'></audio>");$("body").append(t);t.bind("ended",function(){$(this).remove()});try{t[0].currentTime=0,t[0].play()}catch(t){}}else if(!isPlaying||!isAndroidDefault())try{flipAudio[0].currentTime=0,flipAudio[0].play()}catch(t){}},initFlipSound=function(){if(isPhone()||isPad()||isIE())flipAudio=$("<audio preload id='flipSound'><source src='https://att.dongao.com/ebook/ebookfiles/icon/flipsound.ogg' type='audio/ogg'><source src='"+soundBaseURL+"flipsound.mp3?2018071601' type='audio/mpeg'></audio>"),$("body").append(flipAudio)};function copyFromObj(i){if(i){i.focus();i.select();try{document.execCommand("Copy")}catch(t){i=i.val(),copyToClipboard(i)}}}function copyHref(t){t=new ClipboardJS(t,{text:function(t){return window.location.href}});t.on("success",function(t){alert("");t.clearSelection()});t.on("error",function(t){uc?(alert(""),t.clearSelection()):alert("")})}function copyToClipboard(t){if(window.clipboardData)window.clipboardData.clearData(),window.clipboardData.setData("Text",t);else if(-1!=navigator.userAgent.indexOf("Opera"))window.location=t;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(t){return alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard.")),!1}var i=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(i){var e=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(e){e.addDataFlavor("text/unicode");var o={},o=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);o.data=t;e.setTransferData("text/unicode",o,2*t.length);if(!i)return!1;i.setData(e,null,Components.interfaces.nsIClipboard.kGlobalClipboard)}}}else alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard."))}function hideMoreBar(){global.moreBar&&moreBar.visible&&moreBar.hide()}function statisticalData(t,i){global.sendvisitinfo&&"function"==typeof global.sendvisitinfo&&sendvisitinfo(t,i)}function GetQueryString(t){t=RegExp("(^|&)"+t+"=([^&]*)(&|$)","i");t=window.location.search.substr(1).match(t);return null!=t?decodeURIComponent(t).split(",")[2]:""}function getProtocal(){return window.location.href.toLowerCase().startsWith("https://")?"https://":"http://"}var form_icons={drag:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAKCAYAAABBq/VWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMjEzMDhFMTJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxMjEzMDhFMjJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMTMwOERGMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyMTMwOEUwMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gNLlqwAAACZJREFUeNpi/P//PwOtARMDHQALlC6moR29jKPBNRpcQzu4AAIMAEdbDwvBazwyAAAAAElFTkSuQmCC",arrow:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDRGNDE0M0M2ODNFMTFFNjhEMzY5QjdFRDRBNTVBQUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDRGNDE0M0Q2ODNFMTFFNjhEMzY5QjdFRDRBNTVBQUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NEY0MTQzQTY4M0UxMUU2OEQzNjlCN0VENEE1NUFBRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NEY0MTQzQjY4M0UxMUU2OEQzNjlCN0VENEE1NUFBRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqDH1GgAAAA+SURBVHjaYvz//z8DNQATA5XA4DOIBYsYKYHGiM8gFAV4wP8RHNiEAp6RHIMYR1M2zjD6Tw2DGIdHGAEEGACyiQcuZ38+nQAAAABJRU5ErkJggg==",arrow2:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEM4QUEyNEU2ODNFMTFFNkE0OEFEREQ2NkJFOTU2MjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEM4QUEyNEY2ODNFMTFFNkE0OEFEREQ2NkJFOTU2MjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0QzhBQTI0QzY4M0UxMUU2QTQ4QURERDY2QkU5NTYyMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0QzhBQTI0RDY4M0UxMUU2QTQ4QURERDY2QkU5NTYyMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlbqrV8AAAA4SURBVHjaYvz//z8DNQDjyDKIFJMZCRnESIQh/wfUIIJidDPoP54AHuJeGzzRT5WUPUxyP0CAAQD9R07dZWVLqQAAAABJRU5ErkJggg==",arrow3:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEM4QUEyNEU2ODNFMTFFNkE0OEFEREQ2NkJFOTU2MjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEM4QUEyNEY2ODNFMTFFNkE0OEFEREQ2NkJFOTU2MjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0QzhBQTI0QzY4M0UxMUU2QTQ4QURERDY2QkU5NTYyMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0QzhBQTI0RDY4M0UxMUU2QTQ4QURERDY2QkU5NTYyMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlbqrV8AAAA4SURBVHjaYvz//z8DNQDjyDKIFJMZCRnESIQh/wfUIIJidDPoP54AHuJeGzzRT5WUPUxyP0CAAQD9R07dZWVLqQAAAABJRU5ErkJggg==",close:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTZEQzhCQzAzRThGMTFFNkJDRDdCODcxNDYxRjlCODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTZEQzhCQzEzRThGMTFFNkJDRDdCODcxNDYxRjlCODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBNkRDOEJCRTNFOEYxMUU2QkNEN0I4NzE0NjFGOUI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBNkRDOEJCRjNFOEYxMUU2QkNEN0I4NzE0NjFGOUI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhSCZXoAAABUSURBVHjaYvz//z8DNQATA5XACDToPxQTLUfIRf8J8AkaxIhF838c8gRdxIjDJYzkBDYjAT79wgifd/6TGv3ohuA1jGphxEKkAQyUxtoQzrQAAQYAFu0SIXkKEmkAAAAASUVORK5CYII=",delete:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCQ0YwOTM0MjJENDkxMUU2OUE4OUQ4ODM4NjcwMThDNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCQ0YwOTM0MzJENDkxMUU2OUE4OUQ4ODM4NjcwMThDNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJDRjA5MzQwMkQ0OTExRTY5QTg5RDg4Mzg2NzAxOEM0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDRjA5MzQxMkQ0OTExRTY5QTg5RDg4Mzg2NzAxOEM0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+fOK1igAAAExJREFUeNpi/P//PwMlgImBQkDIgP9QjBOwYNGAyyBkwIjLAEZSvcBChG0M+CxhIqCIEY1N/1gYNYDMdICcFv4TSh8shBIKzb0AEGAAUFoLJ2pGiu0AAAAASUVORK5CYII=",drag:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAKCAYAAABBq/VWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMjEzMDhFMTJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxMjEzMDhFMjJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMTMwOERGMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyMTMwOEUwMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gNLlqwAAACZJREFUeNpi/P//PwOtARMDHQALlC6moR29jKPBNRpcQzu4AAIMAEdbDwvBazwyAAAAAElFTkSuQmCC",edit:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBOUQyN0YxOTJENDkxMUU2ODgxRkQ5RjkyMzYzMDkxOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBOUQyN0YxQTJENDkxMUU2ODgxRkQ5RjkyMzYzMDkxOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE5RDI3RjE3MkQ0OTExRTY4ODFGRDlGOTIzNjMwOTE4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE5RDI3RjE4MkQ0OTExRTY4ODFGRDlGOTIzNjMwOTE4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AymtDQAAAHBJREFUeNpi/P//PwMlgImBQkCKAQexCbIQqfkdEAsBMci/jKS64A1UMwNU839SXPAZiHnRbGZE5uMzAJcmFG8wEaGZAZvN+AzAphmnOBMlmtENIFkzMdGIVzMhAwhqxhaN/9FCnYEUAxgHJDcCBBgAGLsY6vBpMLYAAAAASUVORK5CYII=",print_off:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTNDQkJDMUY2ODNFMTFFNjkyREFDNEY2QUE1MDZFQTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTNDQkJDMjA2ODNFMTFFNjkyREFDNEY2QUE1MDZFQTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1M0NCQkMxRDY4M0UxMUU2OTJEQUM0RjZBQTUwNkVBOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1M0NCQkMxRTY4M0UxMUU2OTJEQUM0RjZBQTUwNkVBOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuglZnkAAAA3SURBVHjaYvz//z8DNQATA5UACxKbXKcx0sxFKDYQAf7TJIxGDRo1iFYp+/+gcRHjoAgjgAADAB2LBilArwnUAAAAAElFTkSuQmCC",print_on:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUJERDZGNkU2ODNFMTFFNkFBOENBM0E1Nzg1RURGMDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUJERDZGNkY2ODNFMTFFNkFBOENBM0E1Nzg1RURGMDIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1QkRENkY2QzY4M0UxMUU2QUE4Q0EzQTU3ODVFREYwMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1QkRENkY2RDY4M0UxMUU2QUE4Q0EzQTU3ODVFREYwMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pr7LlF8AAABeSURBVHjaxJPBDsAgCEOF7P9/+XnVxGCnsPXEhdKU1oCWAW9JeIb5VJqVKZouCKDEoxMiMoh4q4jFEpGHHr10WGb3CN/lQyFRPDI1Eq4m95euXXWuRJF9XZElugADAHF/DilN9+x7AAAAAElFTkSuQmCC",save:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDQzJEREM0MjJENDkxMUU2OEQ4QThBOUMxMjAyM0Q4OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDQzJEREM0MzJENDkxMUU2OEQ4QThBOUMxMjAyM0Q4OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNDMkREQzQwMkQ0OTExRTY4RDhBOEE5QzEyMDIzRDg5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkNDMkREQzQxMkQ0OTExRTY4RDhBOEE5QzEyMDIzRDg5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+MIq1tAAAAFhJREFUeNpi/P//PwMlgAVKk2oKI7oBKIIEwH8oBqtnwqMIF58RWYyJTK9j9QIhV+ANRJw2EAJMDBQCig1gIcPvjJSEwf/BFwY0MYCR2ABED0Sy8jVAgAEAUVwNK6WyzeIAAAAASUVORK5CYII=",cancel:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEOTEwNjM4RTJENDkxMUU2OEMwNjlDMzQ0MjdENjA1NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEOTEwNjM4RjJENDkxMUU2OEMwNjlDMzQ0MjdENjA1NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ5MTA2MzhDMkQ0OTExRTY4QzA2OUMzNDQyN0Q2MDU2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ5MTA2MzhEMkQ0OTExRTY4QzA2OUMzNDQyN0Q2MDU2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+P0zP3QAAAR1JREFUeNqc00FOwkAUgOFOYzgIiWjaRq/hCo0LXOgFWHIRYIErDkFkhVFPIajRxIQDEISQQIhJ+Z95Y8YyBWSSr03nzXvM0NcgTdMgI0Idr1ioF52LsuuNXHQUUEcVH+igr7EYlzhEGzXMfyJaqYAHTHGN0LMzo7ExnjTnt8AtvnDqScw60bUtWyDGN252SLauNCeWbTU4yRkiOZGeWe4m+DvcObkPcB9q8p2TbBekOcn2uSu5B1yKeA/Wh1vEeOKSUwydivuMpRT4RMkTtNs2OT8gPTGUAj1ceM5oNvwn8nyOR3klyR6vsaI5idtI43800khz1lp5ou1qNrTyyG3lbR/Ts84fo4yjvI/JJa3dxBuWmKGvc0l2/UqAAQD6cstJzzfPsAAAAABJRU5ErkJggg==",help_form:"iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDA1QzE3RUQ0QTU3MTFFNjgzNjFBNDM1NjkxMDU4QzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDA1QzE3RUU0QTU3MTFFNjgzNjFBNDM1NjkxMDU4QzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MDVDMTdFQjRBNTcxMUU2ODM2MUE0MzU2OTEwNThDOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MDVDMTdFQzRBNTcxMUU2ODM2MUE0MzU2OTEwNThDOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pkdk2GsAAAebSURBVHja7J1ZbFRV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",noteAdd:"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",noteClear:"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",noteCursor:"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",noteRound:"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",noteEraser:"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",notePen:"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",noteRect:"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",noteRedo:"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",noteSave:"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",noteUndo:"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAKaSURBVHja7JVLSFRRGMd/Z5y56mjqjOlYgZT2MCqphataSCEUBEWQINgmctMiykcStWgRRAuhTRJFblyEBBa0SDA1XSQIRWAhivmOyedgOs87935trjXju4Wr/MOBe++59/t953z/71wlImylbGyxtgH/AcAee6OUipus7XSfA64rG+f1kDTUlfhuACHAWCvgCtuLyJ8Rq5oO14U7XVnSPfVQpqKtcrvTJUA+kLJexrHxRAQVG3hpBZWtGaWapjVdPFxJyo5JAuYIr3o6rAiETIP+aERaJgeMp023FscBE5DVVrACcLMlrVzTtMZLR6rRnKOMhHtJTUjimLMKgKgZYTYwwfe5z3z68Y5p78Ld52ULj62tM9cFVLxMdabvTPRfLqxFJfUxFPhGVMy/LwOaSsSt7SZbO4ipe2j68oi+bt+VN/eCr4GALCPEFTnsN+ziBm/wPU4VIKxH0E0zLqMgEebD/YypAfJS9lKcX8bPifprwAdAByJr2rSxIrQ40uuvbvv6Ee/cDJkJNgxdJwXIcdjjRpY9Aa9/GLs2ipZKEZABaOvaFJDmmnDDmSoj1TDG7h/P85CV5gQM3vYMAOCw20jWHGSmJZOf42JBH0KU6QScgGNDAPCrrS5ar4ckGi32Pijc5yYrPRkjavKiVL/qylWJ2QfCu/JOBk7bz9pOeTKCRALmvLUbto0AWE3k63piPDMios8emrqSvoejM8O0AYO+MZn2jYleUKL2O8jGOzfJ7IjZY31nLg+2ah/E1McF5AJuy4ZTwCQQLCpXJzwFqto0cA92SvNAu7QD4yLi3yxgCZIIJFnXYSBoZZsMeCx4GJgGfCKi/wtgyf7L67T03G45R1n21Jf3wWYAG0nFH0XrdPL2D2c1/R4AWig+BliGcjwAAAAASUVORK5CYII=",noteExit:"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAJTSURBVHja7JVBS5RBGMd/M+/7usvMipIkCEGHoA7hIRHqAwQtLnvoEoTUZ+gDCIVUlodu4SGpgxVdQkKNOkh1LITqFEiHypDcLWEN80Xfff8ddGFZd2U9dIgamMv8n3n+Mzy/Z8ZI4k8Oyx8e/w3+AQMk7ZoApVxu4nsup6VcbhLwQFDb00prmqvZ4rL3E9+8l24W9c17vXXuLtANBMve36rX3jv3sKa1bbDkvdLrRaVnUXW0oM/ex6+du/fBudtfvN+ojhaUnkXp9aKWvBdwFPBtGyw4N/XROW3lUVIIlIwUtOhcvOhcnIwUlBQCbeXRR+c0k80+BwaArma5TLOnwhjTM93RMXnE2uLRk3FgggAzmN+u2cIzVK2y+DpbfZemry5ubo4Dn4CvktbbLXIA9D2MoidvMplkfRCt9Qda6w+0PojeZDLJZBTNA2eA48CBVjUIW8BVBcpdxqzEUjWJbZD+qu4cyLIhpRZ+AmWgBKzt7Gm/D+ajaDwrXTgxfLpDsYEUSEGxYWD4dHQY8g/C8NL2KtpXH8yF4cTTMFTl/JBW+wL96EWzYZjMhmHyoxet9gWqnB/S0zDU/TDcP6bT1qpyrqhyd6BSJ3psbXLV2hfXrJ1/bG1S6kTl7kCVc0VNW7t/TO8YM/XIGK1E6JExumJMraCnxoyZqdduGLMnpq0o6hkzZnbKGF025mUdLQeBQ2PGzDVox1rdoFUfBEAvcAiIgNU6WqgZNWgVSbtIamUAEAJZoAPYBGIg2QlpqjXNtYcBgKkHrjGsUWvb4K/6cH4PAKSfHcM2n9v/AAAAAElFTkSuQmCC",noteMoveBar:"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"};var setCurrentIndexTextField=function(t){t=getShownPageNumberInfo(t);$("#guidPageIndex").html("<b>"+t+"</b>");$("#currentPageIndexTextField")&&$("#currentPageIndexTextField")[0]&&!$("#currentPageIndexTextField")[0].onFocus&&$("#currentPageIndexTextField").val(t)},getShownPageNumberInfo=function(t){BookInfo.isDoublePage();t=BookInfo.getCurrentPages();for(var i=originTotalPageCount,e="",o=0;o<t.length;o++){var s=getShownPageNumber(t[o]);0!=o&&e!=s&&(e+="-");e!=s&&(e+=s)}0==t.length&&(e=getShownPageNumber(1));bookConfig.totalPagesCaption&&(i=bookConfig.totalPagesCaption);return rightToLeft?i+"/"+e:e+"/"+i},getShownPageArray=function(){var t=bookConfig.pageNumberCaption+"",i=originTotalPageCount;";"==t.substr(t.length-1,1)&&(t=t.substr(0,t.length-1));for(var t=t.split(";"),e=[],o=0;o<t.length;o++)if(""!=t[o]&&void 0!=t[o]){var s=t[o].split(":");if(s[0])if(s[1]||(s[1]=""),-1<s[1].indexOf("+")){var n=s[0];n.indexOf("-");for(var n=n.split("-"),h=n[0],n=n[1],h=parseInt(h),a=n?parseInt(n):i,s=getPageNumberFormat(s[1]),r=h;r<=a;r++){var l=(r-h)*s.addition+s.startPage,n="";0==s.type&&(n=l+"");1==s.type&&(n=parseRoman(l));2==s.type&&(n=parseRoman(l).toLowerCase());e[r]=String.format(s.page,n)}}else if(!isNaN(s[0]))h=parseInt(s[0]),e[h]=void 0==s[1]?"":s[1];else if(-1<s[0].indexOf("-"))for(n=s[0],n.indexOf("-"),n=n.split("-"),h=n[0],n=n[1],h=parseInt(h),a=n?parseInt(n):i,r=h;r<=a;r++)e[r]=void 0==s[1]?"":s[1]}return e};function getPageNumberFormat(t){var i={page:"%s",startPage:1,type:0,addition:1};if(-1<t.indexOf("{")){var e=t.indexOf("{"),o=t.indexOf("}")+1,e=t.substring(e,o);i.page=t.replace(e,"%s");-1<e.indexOf("N+")&&(i.type=0);-1<e.indexOf("R+")&&(i.type=1);-1<e.indexOf("r+")&&(i.type=2);e=e.subBetween("+","}");i.startPage=""==e?1:parseInt(e)}else e=t.split("+")[0],t=t.split("+")[1],i.startPage=""==e?1:parseInt(e),t&&(i.addition=parseInt(t));return i}function parseRoman(t){if(isNaN(t))return"";for(var i=[" I II III IV V VI VII VIII IX".split(" ")," X XX XXX XL L LX LXX LXXX XC".split(" ")," C CC CCC CD D DC DCC DCCC CM".split(" ")],e="",o=0,s=0,n=1e3;3>s;s++,n/=10)o=Math.floor(t%n/(n/10)),e+=i[2-s][o];return e}var getShownPageNumber=function(t){var i=bookConfig.pageNumberCaption;if(""==i||void 0==i)return t;t=parseInt(t);i=getShownPageArray();return void 0==i[t]?t:i[t]},getRealPageNumber=function(t){t=getRealPage(t);isNaN(t)&&(t=1);return t},getRealPage=function(t){var i=bookConfig.pageNumberCaption;if(""==i||void 0==i)return parseInt(t);t+="";for(var i=getShownPageArray(),e=-1,o=i.length,s=1;s<=o;s++)if(i[s]+="",i[s]==t){e=s;break}return-1==e?parseInt(t):e},setLocationHash=function(t){bookConfig.updateURLForPage&&(window.location.hash="#p="+getShownPageNumber(t))};var nextPageFun=function(){switch(bookType){case BookType.normal_book:gotoPageFun(BookInfo.getMinPageIndex(flipBook.getCurrentPageIndex())+2);break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)+1);break;case BookType.slide_book:gotoPageFun(BookInfo.getMinPageIndex(slideBook.getRealPageIndex())+2);break;case BookType.singleSlide_book:gotoPageFun(parseInt(singleSlideBook.getRealPageIndex())+1);break;case BookType.catalog_book:gotoPageFun(BookInfo.getMinPageIndex(catalogBook.getCurrentPageIndex())+2);break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)+1)}},previousPageFun=function(){switch(bookType){case BookType.normal_book:gotoPageFun(BookInfo.getMaxPageIndex(flipBook.getCurrentPageIndex())-2);break;case BookType.catalog_book:gotoPageFun(BookInfo.getMaxPageIndex(catalogBook.getCurrentPageIndex())-2);break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)-1);break;case BookType.slide_book:gotoPageFun(BookInfo.getMaxPageIndex(slideBook.getRealPageIndex())-2);break;case BookType.singleSlide_book:gotoPageFun(singleSlideBook.getRealPageIndex()-1);break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)-1)}},firstPageFun=function(){gotoPageFun(1)},lastPageFun=function(){gotoPageFun(originTotalPageCount)},gotoPageFun=function(t,i){if(!isNaN(t)){statisticalData(1,t);bookConfig.restorePageVisible&&window.localStorage.setItem("historyPageIndex",getShownPageNumber(t));t=parseInt(t);var e=bookConfig.totalPageCount;bookConfig.SingleModeBanFlipToLastPage&&bookType==BookType.single_book&&(e=Math.max(1,bookConfig.totalPageCount-1));if(1>t||t>e)0>BookInfo.getCurrentPages().indexOf(e)&&t>e?gotoPageFun(e):0>BookInfo.getCurrentPages().indexOf(1)&&1>t?gotoPageFun(1):(e=1>t?getLanguage("lblFirst","This is the first page"):getLanguage("lblLast","This is the last page"),global._tipsBox||(_tipsBox=new TipsBox(e,bookContainer)),_tipsBox.setCaption(e),_tipsBox.showTipsBox());else if(e=t,BookInfo.isDoublePage()&&(e=BookInfo.getMinPageIndex(e)),e=Math.max(1,e),passwardType()&&bookConfig.excludeFrontPages&&e>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward())global.passwardPannel||(global.passwardPannel=new PasswardPannel),global.passwardPannel.show();else{switch(bookType){case BookType.normal_book:flipBook.gotoPage(t,i);break;case BookType.single_book:singlePageBook.gotoPage(t,i);break;case BookType.slide_book:slideBook.gotoPage(t,i);break;case BookType.singleSlide_book:singleSlideBook.gotoPage(t,i);break;case BookType.catalog_book:catalogBook.gotoPage(t,i);break;case BookType.singleCatalog_book:singleCatalogBook.gotoPage(t,i)}bookConfig.googleAnalyticsID&&window.ga&&ga("send","event","button","click","goto page:"+t);global.bookmark&&global.bookmark.elements.refreshElements();bookConfig.SelectTextButtonVisible&&BookInfo.getBook().unSelect();bookConfig.MagnifierButtonVisible&&BookInfo.getBook().unMagnifierZoom();bookConfig.addCurrentPage&&global.sharePanel&&global.sharePanel.elements&&(global.sharePanel.elements.fillArea(!0,"link"),global.sharePanel.shareCurrentCheck[0].checked=!0);global.assistant&&global.assistant.refresh()}}};var BookInfo=Class({statics:{getCurrentPages:function(){var t=[];if(this.isDoublePage())var i=this.getCurrentPageIndex(),t=this.getPagesByIndex(i);else i=this.getCurrentPageIndex(),t.push(i);return t},getPageCount:function(){return bookConfig.totalPageCount},isRightToLeft:function(){return rightToLeft},getBookType:function(){return bookType},getBook:function(){var t;switch(this.getBookType()){case BookType.normal_book:t=global.flipBook;break;case BookType.single_book:t=global.singlePageBook;break;case BookType.slide_book:t=global.slideBook;break;case BookType.singleSlide_book:t=global.singleSlideBook;break;case BookType.catalog_book:t=global.catalogBook;break;case BookType.singleCatalog_book:t=global.singleCatalogBook}return t},getCurrentPageIndex:function(){var t=this.getBook();return t&&t.getCurrentPageIndex?t.getCurrentPageIndex():-1},isDoublePage:function(t){var i=this.getBookType();void 0!=t&&(i=t);switch(i){case BookType.single_book:return!1;case BookType.singleSlide_book:return!1;case BookType.singleCatalog_book:return!1}return!0},left:function(){var t=this.getBook();return t&&t.getLeft?t.getLeft():0},top:function(){var t=this.getBook();return t&&t.getTop?t.getTop():0},width:function(){var t=this.getBook();return t&&t.getWidth?t.getWidth():0},height:function(){var t=this.getBook();return t&&t.getHeight?t.getHeight():0},scale:function(){var t=this.getBook();return t&&t.getScale?t.getScale():0},isZoomming:function(){return this.getBook().showPage.parameters.zoomming},zoomStatus:function(){return this.getBook()&&this.getBook().status_zoom?!0:!1},container:function(){return bookContainer},getThumbnailPages:function(){for(var t=[],i=Math.ceil(bookConfig.totalPageCount/2),e=0;e<=i;e++){var o=this.getPagesByIndex(2*e+1);0<o.length&&t.push(o)}return t},getPagesByIndex:function(t){function i(t){1<=t&&t<=bookConfig.totalPageCount&&e.push(t)}var e=[];if(bookConfig.isTheBookOpen){t=2*Math.ceil(t/2);var o=t-1}else o=2*Math.floor(t/2),t=o+1;rightToLeft?(i(t),i(o)):(i(o),i(t));return e},isLeftPage:function(t,i){i=void 0==i?this.isDoublePage():i;if(!i&&!rightToLeft)return!1;if(!i&&rightToLeft||(0==t%2&&!rightToLeft||0!=t%2&&rightToLeft)&&!bookConfig.isTheBookOpen)return!0;if((0==t%2&&!rightToLeft||0!=t%2&&rightToLeft)&&bookConfig.isTheBookOpen||(0==t%2&&rightToLeft||0!=t%2&&!rightToLeft)&&!bookConfig.isTheBookOpen)return!1;if((0==t%2&&rightToLeft||0!=t%2&&!rightToLeft)&&bookConfig.isTheBookOpen)return!0},isInnerPage:function(t,i){if(1!=t&&i==BookType.single_book||!this.isCoverPage(t)&&i!=BookType.single_book)return!0},isCoverPage:function(t,i){return 0<=[1,totalPageCount].indexOf(t)&&!bookConfig.isTheBookOpen||t==totalPageCount&&bookConfig.isTheBookOpen?!0:!1},getHardCoverPages:function(t){if(t&&rightToLeft&&!bookConfig.isTheBookOpen)return[totalPageCount-1,2];if(t&&!rightToLeft&&!bookConfig.isTheBookOpen)return[2,totalPageCount-1];if(t&&rightToLeft&&bookConfig.isTheBookOpen)return[0==bookConfig.totalPageCount%2?bookConfig.totalPageCount:bookConfig.totalPageCount-1,1];if(t&&!rightToLeft&&bookConfig.isTheBookOpen)return[1,0==bookConfig.totalPageCount%2?bookConfig.totalPageCount:bookConfig.totalPageCount-1];if(!t)return[bookConfig.totalPageCount]},getSensitiveIndex:function(t){if(t&&!bookConfig.isTheBookOpen)return t=totalPageCount-2,{min:3,max:t};if(t&&bookConfig.isTheBookOpen)return t=totalPageCount-2,{min:4,max:t};t=bookConfig.totalPageCount;return{min:2,max:t}},getMinPageIndex:function(t){return t=bookConfig.isTheBookOpen?2*Math.ceil(t/2)-1:2*Math.floor(t/2)},getMaxPageIndex:function(t){return t=bookConfig.isTheBookOpen?2*Math.ceil(t/2):2*Math.floor(t/2)+1}}});var FormElements=Class({rightToLeft:!1,create:function(t){this.rightToLeft=global.rightToLeft},initElements:virtual_function,initEvent:virtual_function,pickElements:virtual_function,changeLanguage:virtual_function}),FormInfo=Class({statics:{getFormCssClassName:function(t){if(!t)return"";t=t.toLowerCase();return t+"_form"},getFormTitle:function(t){if(!t)return"";t=t.toLowerCase();switch(t){case"about":return getLanguage("btnAbout","About");case"bookmark":return getLanguage("frmBookMark","Bookmark");case"help":return getLanguage("btnHelp","Help");case"language":return getLanguage("btnLanguage","Language change");case"print":return getLanguage("frmPrintCaption","Print");case"search":return getLanguage("frmSearch","Search");case"setting":return getLanguage("btnSettings","Settings");case"share":return getLanguage("frmShareCaption","Share");case"tableofcontent":return getLanguage("frmToc","Table of Contents");case"videogallery":return getLanguage("frmVideoTitle","Video");case"tel":return getLanguage("frmTelephone","Tel");case"download":return getLanguage("frmDownload","Download")}}}}),FormFrame=Class({parent:void 0,rightToLeft:!1,visible:!1,formType:"",mainColor:"",fontColor:"",mainColorObj:null,fontColorObj:null,elements:null,closeUrl:"",create:function(t){this.options=t;this.parent=this.options.parent;this.formType=this.options.formType;this.rightToLeft=this.options.rightToLeft;this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this.mainColorObj=Color(this.mainColor);this.fontColorObj=Color(this.fontColor)},onCreate:function(){},setStyle:function(t){this.stage.css(t)},getShowStatu:function(){return this.visible},showOrHide:function(){this.visible?this.hide():this.show()},show:function(){this.visible=!0;this.stage.show();this.onShow()},hide:function(){this.visible=!1;this.stage.hide();this.onHide()},onShow:function(){},onHide:function(){},onResize:function(){},destroy:function(){},changeLanguage:function(){this.elements&&this.elements.changeLanguage();this.title&&this.title.find("span").html(FormInfo.getFormTitle(this.formType))}}),PhoneFormFrame=Class({create:function(t){this._super(t);this.closeUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjhBN0ZCRjFCQjgwMTFFNjhCMjQ5NjVERDlGODU5NkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjhBN0ZCRjJCQjgwMTFFNjhCMjQ5NjVERDlGODU5NkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGOEE3RkJFRkJCODAxMUU2OEIyNDk2NUREOUY4NTk2RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGOEE3RkJGMEJCODAxMUU2OEIyNDk2NUREOUY4NTk2RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prtn4R8AAABdSURBVHjaYvz//z8DLQETA43BqAWjFtDHgv9QTKocyT74T4BPtgWMWAz9j0OebB8w4nA5IzUjmZEAf/DGAb5g+U+tZIpuONGW0DwOWMgwmIFWqWi0sBu1ADsACDAA1jMSLYufr4AAAAAASUVORK5CYII=";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+" phone'></div>");this.title=$("<p class='form_title'><span>"+FormInfo.getFormTitle(this.formType)+"</span></p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.close.bind("click",this.hide.bind(this));this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.stage.insertBefore(this.parent);this.stage.css({position:"absolute",left:-this.width+"px",top:0,width:this.width+"px",height:this.height+"px","background-color":colorDiv(this.mainColor,20),color:this.fontColor,overflow:"hidden"})},show:function(){this.visible||(this.visible=!0,this.animate(this.width),this.mask||(this.mask=$("<div class='form_mask_phone'></div>"),this.mask.click(this.hide.bind(this)),this.parent.append(this.mask)),this.mask&&this.mask.show(),BookInfo.getBook().addSearchHighlight())},hide:function(){this.visible&&(this.visible=!1,this.animate(0),this.mask&&this.mask.hide(),isPhone()||isPad()||BookInfo.getBook().clearSearchHighlight())},animate:function(t){this.animating=!0;t=transformCSS({tran:{x:t,y:0}});animateOnce(this.stage,t,.2,function(){this.animating=!1}.bind(this));animateOnce(this.parent,t,.2,function(){this.animating=!1}.bind(this))},onResize:function(){this.width=Math.min(windowWidth-65,340);this.height=windowHeight;this.stage.css({left:-this.width+"px",width:this.width+"px",height:this.height+"px"});var t=this.visible?transformCSS({tran:{x:this.width,y:0}}):transformCSS({tran:{x:0,y:0}});this.stage.css(t);this.parent.css(t)},showOrHide:function(){!0===this.visible?this.hide():this.show(this.width)}}).extend(FormFrame),PhoneBottomFormFrame=Class({create:function(t){this._super(t);this.closeUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjhBN0ZCRjFCQjgwMTFFNjhCMjQ5NjVERDlGODU5NkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjhBN0ZCRjJCQjgwMTFFNjhCMjQ5NjVERDlGODU5NkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGOEE3RkJFRkJCODAxMUU2OEIyNDk2NUREOUY4NTk2RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGOEE3RkJGMEJCODAxMUU2OEIyNDk2NUREOUY4NTk2RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prtn4R8AAABdSURBVHjaYvz//z8DLQETA43BqAWjFtDHgv9QTKocyT74T4BPtgWMWAz9j0OebB8w4nA5IzUjmZEAf/DGAb5g+U+tZIpuONGW0DwOWMgwmIFWqWi0sBu1ADsACDAA1jMSLYufr4AAAAAASUVORK5CYII=";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+" phone_bottom'></div>");this.title=$("<p class='form_title'>"+FormInfo.getFormTitle(this.formType)+"</p>");this.close=$("<div class='close'>"+getLanguage("lblCancel","Cancel")+"</div>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.close.bind("click",this.hide.bind(this));this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.stage.insertBefore(this.parent);this.stage.css({position:"absolute",left:0,bottom:-this.height+"px",width:this.width+"px",height:this.height+"px","background-color":colorDiv(this.mainColor,20),color:this.fontColor,overflow:"hidden"})},show:function(){this.visible||(this.visible=!0,this.animate(this.height),this.mask||(this.mask=$("<div class='form_mask_phone'></div>"),this.mask.click(this.hide.bind(this)),this.parent.append(this.mask)),this.mask&&this.mask.show(),BookInfo.getBook().addSearchHighlight())},hide:function(){this.visible&&(this.visible=!1,this.animate(0),this.mask&&this.mask.hide(),isPhone()||isPad()||BookInfo.getBook().clearSearchHighlight())},animate:function(t){this.animating=!0;t=transformCSS({tran:{x:0,y:-t}});animateOnce(this.stage,t,.2,function(){this.animating=!1}.bind(this))},onResize:function(){this.width=windowWidth;this.height=330;this.stage.css({bottom:-this.height+"px",width:this.width+"px",height:this.height+"px"});var t=this.visible?transformCSS({tran:{x:0,y:-this.height}}):transformCSS({tran:{x:0,y:0}});this.stage.css(t);this.parent.css(t)},showOrHide:function(){!0===this.visible?this.hide():this.show(this.width)}}).extend(FormFrame),FadeOutFadeForm=Class({create:function(t){this._super(t);this.closeUrl=form_icons.close?"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+"'></div>");this.title=$("<p class='form_title'><span>"+FormInfo.getFormTitle(this.formType)+"</span></p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.stage.appearance("",function(){this.visible=!1}.bind(this));this.parent.append(this.stage.getDom());this.title&&this.title.css({cursor:"default"});this.hide()},initEvent:function(){this.stage.drag();this.stage.bind(_event._down,function(t){t.stopPropagation()});this.close.bind("click",this.hide.bind(this));this.close.bind("mouseenter",function(){this.close.css({background:"rgba(255,255,255,0.25)"})}.bind(this));this.close.bind("mouseleave",function(){this.close.css({background:""})}.bind(this))},initHtml:virtual_function,onHide:function(){}}).extend(FormFrame),SlideForm=Class({create:function(t){this._super(t);this.closeUrl=form_icons.close?"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+"'></div>");this.title=$("<p class='form_title'><span>"+FormInfo.getFormTitle(this.formType)+"</span></p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.parent.append(this.stage);this.title&&this.title.css({cursor:"default"});this.hide()},initEvent:function(){this.stage.drag();this.stage.bind(_event._down,function(t){t.stopPropagation()});this.close.bind("click",this.hide.bind(this));this.close.bind("mouseenter",function(){this.close.css({background:"rgba(255,255,255,0.25)"})}.bind(this));this.close.bind("mouseleave",function(){this.close.css({background:""})}.bind(this))},show:function(){this.visible=!0;this.stage.animate({left:10},400,function(){this.onShow()}.bind(this))},hide:function(){this.visible=!1;this.stage.animate({left:2*-this.width},400,function(){this.onHide()}.bind(this))},onHide:function(){}}).extend(FormFrame),SlideRightForm=Class({create:function(t){this._super(t);this.closeUrl=form_icons.close?"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+"'></div>");this.title=$("<p class='form_title'><span>"+FormInfo.getFormTitle(this.formType)+"</span></p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.parent.append(this.stage);this.title&&this.title.css({cursor:"default"})},onResize:function(){var t=windowHeight;this.width=250;this.height=t-24;this.stage.css({right:2*-this.width+"px"})},initEvent:function(){this.stage.bind(_event._down,function(t){t.stopPropagation()});this.close.bind("click",this.hide.bind(this));this.close.bind("mouseenter",function(){this.close.css({background:"rgba(255,255,255,0.25)"})}.bind(this));this.close.bind("mouseleave",function(){this.close.css({background:""})}.bind(this))},initHtml:virtual_function,showOrHide:function(){this.visible?this.hide():this.show()},show:function(){this.visible=!0;this.stage.animate({right:0},400,function(){this.onShow()}.bind(this))},hide:function(){this.visible=!1;this.stage.animate({right:2*-this.width},400,function(){this.onHide()}.bind(this))}}).extend(FormFrame),LoadingBook=Class({create:function(t,i){this.parent=t;this.backgroundColor||(this.backgroundColor="#1F2232")},chooseBookStyle:function(){var t=this.getBookTye();"normal_book"==t?this.init():this.initBookStyle(t)},initBookStyle:function(t){switch(t){case"slide_book":bookType=windowWidth>windowHeight&&bookConfig.showDoublePage?BookType.slide_book:BookType.singleSlide_book;init();(isPhone()||isPad())&&global.QRbutton&&QRbutton.hide();break;case"flip_book":bookType=windowWidth>windowHeight&&bookConfig.showDoublePage?BookType.normal_book:BookType.single_book;init();bookConfig.flipshortcutbutton&&flipShotButton.animate();break;case"catalog_book":bookType=BookType.catalog_book,init()}},getBookTye:function(){var t="normal_book";if("slide"==bookConfig.FlipStyle.toLowerCase()||isBelowIE9())t="slide_book";"flip"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(t="flip_book");""!=bookConfig.FlipStyle||isBelowIE9()||(t="flip_book");"catalog"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(t="catalog_book");return t},init:function(){this.container=$("<div class='book_style_choose_container'></div>");this.bookStyleBox=$("<div class='book_style_box'></div>");this.container.css({"background-color":this.backgroundColor});this.parent.append(this.container);this.container.append(this.bookStyleBox);this.initBookStyleBox()},initBookStyleBox:function(){this.title=$("<p class='title'></p>");this.description=$("<p class='description'></p>");this.flipModel=$("<div class='flipModel'></div>");this.slideModel=$("<div class='slideModel'></div>");this.flipModel.append($("<img src='"+uiBaseURL+"pc.png'/>").asImageButton());this.slideModel.append($("<img src='"+uiBaseURL+"pad.png'/>").asImageButton());this.bookStyleBox.append(this.title);this.bookStyleBox.append(this.description);this.bookStyleBox.append(this.flipModel);this.bookStyleBox.append(this.slideModel);this.title.html(window.document.title);this.description.html(getLanguage("lblSelectMode","Select View Mode Please.")+"(10)");this.initEvent()},initEvent:function(){this.flipModel.bind(_event._end,function(){window.clearInterval(this.inteval);this.destroy();this.initBookStyle("flip_book")}.bind(this));this.slideModel.bind(_event._end,function(){window.clearInterval(this.inteval);this.destroy();this.initBookStyle("slide_book")}.bind(this));this.initInterval()},initInterval:function(){var t=10,i=getLanguage("lblSelectMode","Select View Mode Please.");this.inteval=window.setInterval(function(){this.description.html(i+"("+t+")");t--;0>=t&&(window.clearInterval(this.inteval),this.destroy(),this.initBookStyle("flip_book"))}.bind(this),1e3)},onResize:function(){},destroy:function(){this.container&&(this.container.hide(),this.container.remove(),this.slideModel=this.flipModel=this.bookStyleBox=this.container=void 0)}});function loadXMLString(t){var i=null;if(!window.DOMParser&&window.ActiveXObject)for(var e=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],o=0;o<e.length;o++)try{i=new ActiveXObject(e[o]);i.async=!1;i.loadXMLString(t);break}catch(t){}else if(window.DOMParser&&document.implementation&&document.implementation.createDocument)try{domParser=new DOMParser,i=domParser.parseFromString(t,"text/xml")}catch(t){}else return null;return i}function loadXMLFile(t){var i=null;if(!window.DOMParser&&window.ActiveXObject)for(var e=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],o=0;o<e.length;o++)try{i=new ActiveXObject(e[o]);break}catch(t){}else if(document.implementation&&document.implementation.createDocument)try{i=document.implementation.createDocument("","",null)}catch(t){}else return null;null!=i&&(i.async=!1,i.load(t));return i}var PictureListFrame=Class({create:function(){this.currentPageIndex=1;this.imageWidth=100;this.leftButtonUrl=form_icons.print_left?"data:image/png;base64,"+form_icons.print_left:uiBaseURL+"print_left.png";this.rightButtonUrl=form_icons.print_right?"data:image/png;base64,"+form_icons.print_right:uiBaseURL+"print_right.png";this.initDefaultDom();this.initHtml();this.initEvent();this.fillContent(this.currentPageIndex)},initDefaultDom:function(){this.thumbnail=$("<div class='thumbnail'></div>");this.page=$("<div class='page'></div>");this.image=$("<img/>");this.leftBtn=$("<img class='leftBtn btn' src='"+this.leftButtonUrl+"'/>");this.rightBtn=$("<img class='rightBtn btn' src='"+this.rightButtonUrl+"'/>");this.thumbnail.append(this.image);this.thumbnail.append(this.page)},initEvent:function(){this.leftBtn.onTap(function(){this.fillContent(this.currentPageIndex-1)}.bind(this));this.rightBtn.onTap(function(){this.fillContent(this.currentPageIndex+1)}.bind(this))},fillContent:function(t){if(!(1>t||t>bookConfig.totalPageCount)){this.currentPageIndex=t;var i=function(t){this.image.attr("src",t);this.image.css({width:this.imageWidth+"px",height:"130px"})}.bind(this);fillImageAfterLoaded(t,"thumb",i);this.fillPage(t)}},fillPage:function(t){this.page.html(t+"/"+bookConfig.totalPageCount)},getPageIndex:function(){return this.currentPageIndex}}),PictureListForm=Class({initHtml:function(){this.stage=$("<div class='pictureList_win10'></div>");this.stage.append(this.thumbnail);this.stage.append(this.leftBtn);this.stage.append(this.rightBtn)},getDom:function(){return this.stage}}).extend(PictureListFrame),DownloadElements=Class({create:function(t){this._super(t);this.initConfig();this.initElements();this.initEvent(t);this.pickElements(t)},initConfig:function(){global.downloadconfig||(global.downloadconfig="")},initElements:function(){this.pageIndex=BookInfo.getCurrentPageIndex();if(downloadconfig&&Object.keys(downloadconfig)){downloadconfig.pdf&&downloadconfig.pdf.url&&(this.downloadAll=$("<div class='item downloadAll'><img class='downloadIcon' src='"+uiBaseURL+"downloadALL.png'><span>All Pdf</span><a target='_Blank' href='"+downloadconfig.pdf.url+"' class='downloadbtn'>download</a></div>"));downloadconfig.pdfpages&&downloadconfig.pdfpages.urlPrefix&&(this.downloadCurrent=$("<div class='item middle downloadCurrent'><img class='downloadIcon' src='"+uiBaseURL+"downloadCurrent.png'><span>Current Pdf</span><a target='_Blank' href='"+downloadconfig.pdfpages.urlPrefix+this.pageIndex+".pdf' class='downloadbtn'>download</a></div>"));this.downloadAttachments=$("<div class='item downloadAttachments'><img class='downloadIcon' src='"+uiBaseURL+"downloadLink.png'><a class='downloadbtn'>download</a></div>");this.selectAttachments=$("<select></select>");for(var t=downloadconfig.attachments,i=0;i<t.length;i++){var e=t[i];this.selectAttachments.append($("<option value='"+e.file+"'>"+e.name+"</option>"))}}},pickElements:function(t){t&&(t.downloadAll=this.downloadAll,t.downloadCurrent=this.downloadCurrent,t.downloadAttachments=this.downloadAttachments,t.selectAttachments=this.selectAttachments)},initEvent:function(t){downloadconfig&&this.downloadAttachments.find(".downloadbtn").click(function(t){window.open(this.selectAttachments[0].value,"_blank")}.bind(this))},changeLanguage:function(){}}).extend(FormElements),PcDownloadForm=Class({create:function(t){this.elements=new DownloadElements(this);this._super(t)},onCreate:function(){this.borderColor=this.fontColorObj.reduce(28);this.itemBgColor=this.fontColorObj.add(12);this.stage.css({color:this.fontColor});this.title.css({"background-color":this.mainColor});this.content.css({"background-color":this.fontColor,color:this.mainColor});this.content.find(".item").css({border:"1px solid "+this.borderColor,background:this.itemBgColor});this.content.find(".item a").css({border:"1px solid "+this.borderColor,background:this.itemBgColor});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='content'></div>");this.stage.append(this.content);this.downloadAttachments.append(this.selectAttachments);this.content.append(this.downloadAll);this.content.append(this.downloadCurrent);this.content.append(this.downloadAttachments);this._super()},initEvent:function(){this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.changeItemColor()},changeItemColor:function(){}}).extend(FadeOutFadeForm),PhoneDownloadForm=Class({create:function(t){this.elements=new DownloadElements(this);this._super(t)},onCreate:function(){this.close.changeButtonColor(this.fontColor);this.stage.find(".item").css({border:"1px solid "+this.fontColor});this.stage.find(".item a").css({opacity:"1",border:"1px solid "+this.fontColor,color:this.mainColor,background:this.fontColor});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='content'></div>");this.stage.append(this.content);this.downloadAttachments.find(".downloadbtn").before(this.selectAttachments);this.content.append(this.downloadAll);this.content.append(this.downloadCurrent);this.content.append(this.downloadAttachments)},changeItemColor:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)},initEvent:function(){}}).extend(PhoneFormFrame),AnalysisPrint=Class({create:function(t){this.printArea=$("<div></div>");this.button=t;this.initPrintEvent()},getImageSizeForMM:function(t,i){return t/210>=i/297?{width:210,height:Math.floor(210*i/t)}:{width:Math.floor(297*t/i),height:297}},getImageSizeForInches:function(t,i){return t/7.18>=i/10.52?{width:7.18,height:Number.fixed(7.18*i/t,2)}:{width:Number.fixed(10.52*t/i,2),height:10.52}},getImageSizeForIE:function(t,i){return t/8>=i/11.3?{width:8,height:Number.fixed(8*i/t,2)}:{width:Number.fixed(11.3*t/i,2),height:11.3}},printPages:function(s){var n=0;this.printArea.empty();this.printArray=[];var i=function(t,i,e,o){t=$("<div style='position:relative'></div>");e=$(e);e.css({width:"100%",height:"100%"});t.append(e);parseBool(bookConfig.PrintButtonVisible)&&""!=bookConfig.printWatermarkFile&&(h=$("<img src = '"+bookConfig.printWatermarkFile+"'/>"),h.css({"z-index":"201",left:"0",top:"0",position:"absolute"}),t.append(h),i=this.getImageSizeForInches(h[0].naturalWidth,h[0].naturalHeight),h.css({width:i.width+"in",height:i.height+"in"}));i=isIE()?this.getImageSizeForIE(e[0].naturalWidth,e[0].naturalHeight):this.getImageSizeForInches(e[0].naturalWidth,e[0].naturalHeight);$(e).parent().css({width:i.width+"in",height:i.height+"in"});this.printArray[o]=t;n++;if(n==s.length){for(o=1;o<this.printArray.length;o++)this.printArray[o]&&this.printArea.append(this.printArray[o]);this.printArea.printArea()}};if(parseBool(bookConfig.PrintButtonVisible))if(""!=bookConfig.printWatermarkFile){var h=$("<img src = '"+bookConfig.printWatermarkFile+"'/>");h.on("load",function(){for(var t=0;t<s.length;t++)fillImageAfterLoaded(s[t],"normal",i.bind(this))}.bind(this))}else for(var t=0;t<s.length;t++)fillImageAfterLoaded(s[t],"normal",i.bind(this))},getPages:function(t){if("all"==t){t=[];for(var i=1;i<=bookConfig.totalPageCount;i++)t.push(i);return t}return"current"==t?BookInfo.getCurrentPages():getPagesByRange(t)},initPrintEvent:function(){this.button.onTap(function(t){this.printType=this.button.printType;switch(this.printType){case"printAll":t=this.getPages("all");this.printPages(t);break;case"printCurrent":t=this.getPages("current");this.printPages(t);break;case"printRange":t=$("#print_range_num").val(),t=this.getPages(t),this.printPages(t)}}.bind(this))}}),PrintElements=Class({create:function(t){this._super(t);this.printOnUrl=form_icons.print_on?"data:image/png;base64,"+form_icons.print_on:uiBaseURL+"print_on.png";this.printOffUrl=form_icons.print_off?"data:image/png;base64,"+form_icons.print_off:uiBaseURL+"print_off.png";this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){this.printAll=$("<div class='printAll item' print='printAll'><img src='"+this.printOffUrl+"'/><span class='title'>"+getLanguage("frmPrintall","Print All Pages")+"</span></div>");this.printCurrent=$("<div class='printCurrent item on' print='printCurrent'><img src='"+this.printOnUrl+"'/><span class='title'>"+getLanguage("frmPrintcurrent","Print Current Pages")+"</span></div>");this.printRange=this.rightToLeft?$("<div class='printRange item' print='printRange'><img src='"+this.printOffUrl+"'/><input id='print_range_num' dir='rtl' placeholder='"+getLanguage("frmPrintexample","Exzample:1,3-7,12")+"'></input><span class='title'>"+getLanguage("frmPrintRange","Print Range")+"</span></div>"):$("<div class='printRange item' print='printRange'><img src='"+this.printOffUrl+"'/><span class='title'>"+getLanguage("frmPrintRange","Print Range")+"</span><input id='print_range_num' placeholder='"+getLanguage("frmPrintexample","Example:1,3-7,12")+"'></input></div>");this.printButton=$("<div class='printButton title button_hover'>"+getLanguage("frmPrintbtn","Print")+"</div>");this.printButton.printType="printCurrent";this.analysis=new AnalysisPrint(this.printButton);this.pictureListForm=new PictureListForm},pickElements:function(t){t.printOnUrl=this.printOnUrl;t.printOffUrl=this.printOffUrl;t.printAll=this.printAll;t.printCurrent=this.printCurrent;t.printRange=this.printRange;t.printButton=this.printButton;t.pictureListForm=this.pictureListForm},initEvent:function(i){this.printAll.click(function(t){this.buttonEvent(i,t.delegateTarget)}.bind(this));this.printCurrent.click(function(t){this.buttonEvent(i,t.delegateTarget)}.bind(this));this.printRange.click(function(t){this.buttonEvent(i,t.delegateTarget)}.bind(this));this.printRange.find("input").on("input propertychange change",function(){this.refreshPrintButton()}.bind(this));this.printRange.find("input").bind("mousedown touchstart pointerdown mouseover mousemove",function(t){t.stopPropagation()})},buttonEvent:function(t,i){var e=t.stage.find(".on");e.find("img").attr("src",this.printOffUrl);e.find("img")[0].colorChanged=!1;e.removeClass("on");$(i).find("img").attr("src",this.printOnUrl);$(i).find("img")[0].colorChanged=!1;$(i).addClass("on");e=$(i).attr("print");t.printButton.printType=e;this.refreshPrintButton();t.changeItemColor()},refreshPrintButton:function(){"printRange"!=this.printButton.printType||$("#print_range_num").val()?this.lightPrintButton():this.darkPrintButton()},lightPrintButton:function(){$(this.printButton).addClass("usable");$(this.printButton).removeClass("disable");$(this.printButton).addClass("button_hover")},darkPrintButton:function(){"printRange"==this.printButton.printType&&($(this.printButton).removeClass("usable"),$(this.printButton).removeClass("button_hover"),$(this.printButton).addClass("disable"))},changeLanguage:function(){this.printAll.find(".title").html(getLanguage("frmPrintall","Print All Pages"));this.printCurrent.find(".title").html(getLanguage("frmPrintcurrent","Print Current Pages"));this.printRange.find(".title").html(getLanguage("frmPrintRange","Print Range"));this.printRange.find("#print_range_num").attr("placeholder",getLanguage("frmPrintexample","Exzample:1,3-7,12"));this.printButton.html(getLanguage("frmPrintbtn","Print"))}}).extend(FormElements),PhonePrintElements=Class({create:function(t){this._super(t);this.printOnUrl=form_icons.print_on_phone?"data:image/png;base64,"+form_icons.print_on_phone:phoneBaseURL+"print_on_phone.png";this.printOffUrl=form_icons.print_off_phone?"data:image/png;base64,"+form_icons.print_off_phone:phoneBaseURL+"print_off_phone.png";this.initElements();this.initEvent(t);this.pickElements(t)}}).extend(PrintElements),PhonePrintForm=Class({create:function(t){this.elements=new PhonePrintElements(this);this._super(t)},onCreate:function(){this.printAll.css({"background-color":this.fontColor,color:this.mainColor});this.printCurrent.css({"background-color":this.fontColor,color:this.mainColor});this.printRange.css({"background-color":this.fontColor,color:this.mainColor});this.printButton.css({"background-color":this.fontColor,color:this.mainColor});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.printAll);this.stage.append(this.printCurrent);this.stage.append(this.printRange);this.stage.append(this.printButton)},changeItemColor:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)},initEvent:function(){}}).extend(PhoneFormFrame);global.textForPages||(global.textForPages=[]);global.positionForPages||(global.positionForPages=[]);var highlightSearchFun=function(t,i){if(0!=positionForPages.length&&t){var e=!1;window.frmSearch&&frmSearch.visible&&0!=frmSearch.getList().length||(e=!0);window.foldingMenu&&foldingMenu.visible&&foldingMenu.currentItem&&foldingMenu.currentItem.id&&"miSearch"==foldingMenu.currentItem.id&&(e=!1);var o=search_Text;""==o&&(e=!0);if(!0!=e||isPhone()||isPad()){for(var s,e=0;e<positionForPages.length;e++)if(positionForPages[e]&&positionForPages[e].page&&positionForPages[e].page==i){s=positionForPages[e].positions;break}clearHighlightFun(t);if(s&&0<s.length&&(e=new SearchTextHighlight(bookConfig.largePageWidth,bookConfig.largePageHeight,rightToLeft),e.loadFromPage(s),o=e.searchText(o),0<o.length)){s=new SearchHighlightDOM(t);for(e=0;e<o.length;e++)for(var n=o[e].getRects(),h=0;h<n.length;){for(var a=[],r=0;4>r;r++)a[r]=n[h+r];s.addHighlight(a);h+=4}t.css({display:"block"})}}else clearHighlightFun(t)}},clearHighlightFun=function(t){t.css({"background-image":""});t.css({display:"none"});t.empty()},search_Text="",SearchElements=Class({create:function(t){this._super(t);this.callBack=t;this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){this.searchButtonUrl=form_icons.search_form?"data:image/png;base64,"+form_icons.search_form:uiBaseURL+"search_form.png";this.searchList=[];this.searchText="";this.input=$("<input class='input_search'></input>");this.searchButton=$("<img class='searchButton' src='"+this.searchButtonUrl+"'/>");this.searchResult=$("<p class='result'></p>");if(isPhone()||isPad())this.searchButton=$("<div class='searchButton'></div>"),this.searchButton.addCssSprite(phoneIconsURL[0],"searchButton",15,15,phoneIconInfo);this.initSwiper()},initSwiper:function(){this.searchSwiper=$("<div class='stage'></div>");this.searchSwiperList=$("<div class='swiper'></div>");this.searchSwiper.append(this.searchSwiperList);isPhone()||isPad()?this.searchSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.searchSwiper.append(this.progress),this.progress.append(this.progressBar),this.searchSwiper.scroll({},Direction.top))},refreshSwiper:function(t,i){for(var e=i.length,o=0;o<e;o++)this.addItem(t,i[o])},addItem:function(t,i){i.searchText=this.searchText;var e=new this.callBack.newSearchItem(t,i);this.searchList.push(e)},ewSearchItem:function(t,i){return new SearchItem(t,i)},initEvent:function(){this.searchButton.onTap(function(){this.searchStart()}.bind(this));this.input.bind("keydown",function(t){13==t.keyCode&&this.searchStart();t.stopPropagation()}.bind(this));this.input.bind("mousedown touchstart pointerdown mouseover mousemove",function(t){t.stopPropagation()})},refresh:function(){isPhone()||isPad()||this.searchSwiper.refreshData()},search:function(t){t&&"string"==typeof t&&(this.input.val(t),this.searchStart())},searchStart:function(){statisticalData(6,BookInfo.getBook().getCurrentPageIndex());var t=this.input.val().toLowerCase();this.searchText!=t&&BookInfo.getBook().clearSearchHighlight();0==t.length?(this.clear(),this.searchResult.html(getLanguage("frmSearchPrompt","Enter key to search."))):0<bookConfig.leastSearchChar&&t.length<bookConfig.leastSearchChar?(this.searchList=[],this.searchSwiperList.empty(),this.refresh(),this.searchResult.html(getLanguage("pnlSearchInputInvalid","The search text is too short.")),this.searchText=t):this.searchText!=t&&(search_Text=this.searchText=t,this.searchSwiper.loading(),this.analysisData=new AnalysisSearch(t,this.doSearch.bind(this)))},doSearch:function(t){this.searchSwiper.hideLoading();this.searchList=t;this.searchSwiperList.empty();rightToLeft?this.searchResult.html("<span style='color:"+bookConfig.searchKeywordFontColor+";'>"+this.searchList.length+"</span> "+getLanguage("lblPages","Found Pages")):this.searchResult.html(getLanguage("lblPages","Found Pages")+" <span style='color:"+bookConfig.searchKeywordFontColor+";'>"+this.searchList.length+"</span>");this.refreshSwiper(this.searchSwiperList,this.searchList);this.refresh();BookInfo.getBook().addSearchHighlight()},getSearchText:function(){return this.searchText},getList:function(){return this.searchList},clear:function(){search_Text=this.searchText="";this.input.val("");this.searchList=[];BookInfo.getBook().clearSearchHighlight();this.searchSwiperList.empty();this.searchResult.html(getLanguage("frmSearchPrompt","Enter key to search."));this.refresh()},pickElements:function(t){t.searchButtonUrl=this.searchButtonUrl;t.searchList=this.searchList;t.searchText=this.searchText;t.input=this.input;t.searchButton=this.searchButton;t.searchResult=this.searchResult;t.searchSwiper=this.searchSwiper;t.searchSwiperList=this.searchSwiperList;t.progress=this.progress;t.progressBar=this.progressBar;t.search=this.search.bind(this)},changeLanguage:function(){}}).extend(FormElements),loadSearchFlag=!1,AnalysisSearch=Class({create:function(t,i){this.callback=i;this.results=[];this.search(t)},search:function(t){if(!1==loadSearchFlag)if(isTouchDevice())loadJavascript(bookConfig.searchTextJS,function(){loadSearchFlag=!0;this.doSsearch(t)}.bind(this),function(){loadSearchFlag=!0;this.doSsearch(t)}.bind(this));else{var i=!1,e=!1,o=function(){i&&e&&(loadSearchFlag=!0,this.doSsearch(t))}.bind(this);loadJavascript(bookConfig.searchTextJS,function(){i=!0;o()},function(){i=!0;o()});var s=String.format(bookConfig.searchPositionJS,BookInfo.getCurrentPageIndex());loadJavascript(s,function(){e=!0;o()},function(){e=!0;o()})}else this.doSsearch(t)},doSsearch:function(t){this.results=searchFromPages(textForPages,t);this.callback(this.results)},getList:function(){return this.results},clear:function(){this.results=[]}}),SearchItem=Class({create:function(t,i){this.fontColor=i.fontColor;this.parent=t;this.parm=i;this.sDescription=this.handleData(i.search_text,i.searchText);this.index=i.search_page;this.sPage=getShownPageNumber(i.search_page);this.sPageTitle=getLanguage("lblPage","Page");this.initHtml();this.initEvent()},initHtml:function(){this.initElement();this.item.append(this.page);this.item.append(this.description);this.parent.append(this.item)},initElement:function(){this.item=$("<div class='item'></div>");rightToLeft?(this.page=$("<div class='page'>"+this.sPage+":"+this.sPageTitle+"</div>"),LanguageTool.isRightToLeft(this.parm.search_text)?this.description=$("<div class='description rtl'>"+this.sDescription+"</div>"):this.description=$("<div class='description'>"+this.sDescription+"</div>")):(this.page=$("<div class='page'>"+this.sPageTitle+":"+this.sPage+"</div>"),this.description=$("<div class='description'>"+this.sDescription+"</div>"))},handleData:function(t,i){var e;e=HTMLString.toLabel(t);e=handleData(e,i);return e=HTMLString.riseAWord(e,i,bookConfig.searchKeywordFontColor)},initEvent:function(){this.item.bind("mouseover",function(){this.item.css({"background-color":Color(this.fontColor).rgba(.25)})}.bind(this));this.item.bind("mouseleave",function(){this.item.css({"background-color":"transparent"})}.bind(this));this.item.onTap(function(){gotoPageFun(this.index);BookInfo.getBook().addSearchHighlight();(isPhone()||isPad())&&global.frmSearch.hide()}.bind(this))}}),PhoneSearchItem=Class({}).extend(SearchItem),PhoneSearchForm=Class({create:function(t){this.elements=new SearchElements(this);this._super(t)},onCreate:function(){this.stage.css({color:this.fontColor,"background-color":this.mainColor});this.input.css({color:"#000000",opacity:1});var t=new Color(this.mainColor),t=String.format("%s %s %s %s",t.reduce(40),t.reduce(40),t.add(40),t.add(40));this.input.css({"border-color":t});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.input);this.stage.append(this.searchButton);this.stage.append(this.searchResult);this.stage.append(this.searchSwiper)},newSearchItem:function(t,i){return new PhoneSearchItem(t,i)},getList:function(){return this.elements.getList()},onShow:function(){this.close.changeButtonColor(this.fontColor)},onResize:function(){this._super();this.searchSwiper.css("height",this.height-125+"px");this.input.css("width",this.width-60+"px");this.elements.refresh()},initEvent:function(){}}).extend(PhoneFormFrame),LanguageElements=Class({create:function(t){this._super(t);this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){this.choosedUrl=uiBaseURL+"choosed.png";this.itemArray=[];this.scrollBox=$("<div class='scrollBox'></div>");for(var t=0;t<language.length;t++)language[t]&&language[t].language&&this.addItem(language[t].language)},addItem:function(t){if(t){var i=t;if(isPhone()||isPad())i="&nbsp;&nbsp;&nbsp;"+t;var e=$("<div class='item'><div class='title'>"+i+"<div/><img src='"+this.choosedUrl+"'/></div>");t.toLowerCase()===bookConfig.language.toLowerCase()&&(e.addClass("focus"),this.currentItem=e);e.bind(_event._end,function(){this.refreshLanguage(t);this.currentItem=e;this.scrollBox.find(".focus").removeClass("focus");e.addClass("focus")}.bind(this));this.scrollBox.append(e);this.itemArray.push(e)}},refreshLanguage:function(t){bookConfig.language=t;changeLanguage(bookConfig.language)},initEvent:function(t){},pickElements:function(t){t.choosedUrl=this.choosedUrl;t.itemArray=this.itemArray;t.scrollBox=this.scrollBox},changeLanguage:function(){}}).extend(FormElements);Class("PcLanguageForm",{create:function(t){this.elements=new LanguageElements(this);this._super(t)},onCreate:function(){this.close.changeButtonColor(this.color);this._super()},initEvent:function(){this._super();this.stage.bind(_event._end,function(){this.hide()}.bind(this));for(var t=0;t<this.itemArray.length;t++)this.itemArray[t].bind(_event._end,function(){this.hide()}.bind(this))},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.scrollBox)},onResize:function(){},onShow:function(){}}).extend(FadeOutFadeForm);var PhoneLanguageForm=Class({create:function(t){this.elements=new LanguageElements(this);this._super(t)},onCreate:function(){this._super();this.close.changeButtonColor(this.fontColor)},initEvent:function(){},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.scrollBox)},onResize:function(){this._super();this.scrollBox.css("height",this.height-36+"px")},onShow:function(){}}).extend(PhoneFormFrame),SettingElements=Class({create:function(t){this._super(t);this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){this.choosedUrl=uiBaseURL+"choosed.png";this.unChoosedUrl=uiBaseURL+"unchoosed.png";this.scrollBox=$("<div class='scrollBox'></div>");var t=this.choosedUrl,i="&nbsp;&nbsp;&nbsp;"+getLanguage("closeFlipSound","Close Flip Sound"),e="&nbsp;&nbsp;&nbsp;"+getLanguage("closeBackgroundSound","Close Background Sound");this.flipSoundBtn=$("<div class='item'><div class='title'>"+i+"<div/><img src='"+t+"'/></div>");this.backgroundSoundBtn=$("<div class='item' id='btnSound'><div class='title'>"+e+"<div/><img src='"+t+"'/></div>");bookConfig.FlipSound&&this.scrollBox.append(this.flipSoundBtn);bookConfig.BackgroundSoundButtonVisible&&bookConfig.BackgroundSoundURL&&this.scrollBox.append(this.backgroundSoundBtn)},initEvent:function(t){$(this.flipSoundBtn.find("img")).bind(_event._down,function(t){t.preventDefault()});$(this.backgroundSoundBtn.find("img")).bind(_event._down,function(t){t.preventDefault()});this.flipSoundBtn.bind(_event._down,function(t){(flipSoundIsPlaying=!flipSoundIsPlaying)?(this.flipSoundBtn.find("img").attr("src",this.choosedUrl),playFlipSound()):this.flipSoundBtn.find("img").attr("src",this.unChoosedUrl)}.bind(this));this.backgroundSoundBtn.bind(_event._down,function(){!0===isPlaying?this.backgroundSoundBtn.find("img").attr("src",this.unChoosedUrl):this.backgroundSoundBtn.find("img").attr("src",this.choosedUrl);window.bgSound&&bgSound.playOrPause()}.bind(this))},pickElements:function(t){t.choosedUrl=this.choosedUrl;t.unChoosedUrl=this.unChoosedUrl;t.scrollBox=this.scrollBox;t.flipSoundBtn=this.flipSoundBtn;t.backgroundSoundBtn=this.backgroundSoundBtn},changeLanguage:function(){this.itemArray[0].title.html("&nbsp;&nbsp;&nbsp;"+getLanguage("closeFlipSound","Close Flip Sound"));this.itemArray[1].title.html("&nbsp;&nbsp;&nbsp;"+getLanguage("closeBackgroundSound","Close Background Sound"))}}).extend(FormElements),PhoneSettingForm=Class({create:function(t){this.elements=new SettingElements(this);this._super(t)},onCreate:function(){this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.scrollBox)},initEvent:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)},changeLanguage:function(){this.elements.changeLanguage()}}).extend(PhoneFormFrame),PcSoundSettingForm=Class({create:function(t){this._super(t)},onCreate:function(){this.stage.css({"background-color":"transparent"});this._super()},initHtml:function(){this.flipSoundOnImage=uiBaseURL+"flipSoundOn.png";this.flipSoundOffImage=uiBaseURL+"flipSoundOff.png";this.backSoundOnImage=uiBaseURL+"backSoundOn.png";this.backSoundOffImage=uiBaseURL+"backSoundOff.png";var t=getLanguage("tmpl_Flipsoundon","Open Flip Sound"),i=getLanguage("tmpl_Backgoundsoundon","Open Background Sound");this.backgroundSoundBtn=$("<div class='item' id='btnSound'><img src='"+this.backSoundOnImage+"'/><p class='title'>"+i+"</p></div>");this.flipSoundBtn=$("<div class='item'><img src='"+this.flipSoundOnImage+"'/><p class='title'>"+t+"</p></div>");this.stage.append(this.backgroundSoundBtn);this.stage.append(this.flipSoundBtn)},initEvent:function(t){this.flipSoundBtn.bind(_event._end,function(){(flipSoundIsPlaying=!flipSoundIsPlaying)?(this.flipSoundBtn.find("img").attr("src",this.flipSoundOnImage),this.flipSoundBtn.find(".title").html(getLanguage("tmpl_Flipsoundon","Open Flip Sound")),playFlipSound(),StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(t){t.setAsSoundOn();t.executeCallback()})):(this.flipSoundBtn.find("img").attr("src",this.flipSoundOffImage),this.flipSoundBtn.find(".title").html(getLanguage("tmpl_Flipsoundoff","Close Flip Sound")),StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(t){t.setAsSoundOff();t.executeCallback()}))}.bind(this));this.backgroundSoundBtn.bind(_event._end,function(){!0===isPlaying?(this.backgroundSoundBtn.find("img").attr("src",this.backSoundOffImage),this.backgroundSoundBtn.find(".title").html(getLanguage("tmpl_Backgoundsoundoff","Close Background Sound"))):(this.backgroundSoundBtn.find("img").attr("src",this.backSoundOnImage),this.backgroundSoundBtn.find(".title").html(getLanguage("tmpl_Backgoundsoundon","Open Background Sound")));window.bgSound&&bgSound.playOrPause()}.bind(this))},onShow:function(){},changeLanguage:function(){}}).extend(FadeOutFadeForm),HelpElements=Class({create:function(t){this._super(t);this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){bookConfig.helpContentFileURL?this.image=$("<div></div>"):(this.helpUrl=form_icons.help_form?"data:image/png;base64,"+form_icons.help_form:uiBaseURL+"help_form.png",this.image=$("<img class='logo' src='"+this.helpUrl+"'/>"),this.title1=$("<p class='description'>"+getLanguage("lblHelp1","Drag the page corner to view")+"</p>"),this.title2=$("<p class='description'>"+getLanguage("lblHelp2","Double click to zoom in, out")+"</p>"))},initEvent:function(t){},pickElements:function(t){t.helpUrl=this.helpUrl;t.image=this.image;t.title1=this.title1;t.title2=this.title2},changeLanguage:function(){this.title1&&this.title1.html(getLanguage("lblHelp1","Drag the page corner to view"));this.title2&&this.title2.html(getLanguage("lblHelp2","Double click to zoom in, out"))}}).extend(FormElements);(function(t){var i=window.location.href.toLowerCase();!(-1<i.indexOf("fliphtml5.com")||-1<i.indexOf("pubhtml5.com")||-1<i.indexOf("anyflip.com")||-1<i.indexOf("flipbuilder.com"))||-1<i.indexOf("amazonaws.com")||t.loadJavascript("//connect.facebook.net/en_US/sdk.js")})(global);var share_url=window.location.href.removeStartFrom("#p="),share_title=window.document.title+"%20",share_description,share_screenshot,facebook_screenshot,AnalysisShare=Class({create:function(){var t=share_url.removeStartFrom("/mobile",""),i=this.getThumbUrl();share_screenshot=getRealURL(t+i+"1.jpg");facebook_screenshot=bookConfig.facebookShotImageURL?bookConfig.facebookShotImageURL:bookConfig.thumbPath+"1.jpg";facebook_screenshot=getRealURL(facebook_screenshot);share_description=bookConfig.bookDescription;bookConfig.socialShareLink&&(share_url=bookConfig.socialShareLink);this.refreshList()},getList:function(){return this.shareList},getThumbUrl:function(){return-1<bookConfig.thumbPath.indexOf("../")?bookConfig.thumbPath.replace("../","/"):bookConfig.thumbPath},refreshList:function(){this.url=Metacharacter(share_url);this.title=Metacharacter(share_title);this.screenshot=Metacharacter(share_screenshot);this.description=Metacharacter(share_description);this.shareList=window.shareObj?this.initShareList():this.initDefaultShareList()},initShareList:function(){if(!window.shareObj||0>=window.shareObj.length)return[];for(var t=window.shareObj.length,i=[],e=0;e<t;e++){var o=window.shareObj[e];if("mobile"!=o.filter||isPC())"pc"==o.filter&&isPC()||(o=this.fixItemInfo(o),i.push(o))}return i},fixItemInfo:function(t){if(t){var i=share_url,e="",o="";try{e=window.parent.location.href,o=window.top.location.href}catch(t){}var s=window.document.title,n=share_screenshot;t.name&&"facebook"==t.name.toLowerCase()&&(n=facebook_screenshot);var h=t.url+"";0<=h.indexOf("${url_no_page}")&&(h=h.remove("${url_no_page}"),i=i.removeStartFrom("#p="),e=e.removeStartFrom("#p="),o=o.removeStartFrom("#p="));h=h.replaceAll("${url}",i,!0);h=h.replaceAll("${url_no_page}",i,!0);h=h.replaceAll("${url_parent}",e,!0);h=h.replaceAll("${url_top}",o,!0);"baidutieba"==t.type?(i=n.replace("https","http"),h=h.replaceAll("${shot-img}",i,!0)):h=h.replaceAll("${shot-img}",n,!0);h=h.replaceAll("${title}",s,!0);s=t.logo+"";bookConfig.isFlipPdf&&s.startsWith("./")&&(s="."+s);i=t.title+"";e=t.popUp;return t.name&&"facebook"==t.name.toLowerCase()?{logo:s,url:"javascript:ShareToFaceBook({url:share_url, title:share_title, screenshot:facebook_screenshot, description:share_description})",title:i}:"qrcode"==t.name?{url:"javascript:openQRCode()",logo:s,title:i}:e?{url:"javascript:openPopUp("+e+")",logo:s,title:i}:"qqShare"==t.type&&(isPhone()||isPad())?{url:"javascript:sharePhoneQQ()",logo:s,title:i}:"copy"==t.type?{url:"",type:"copy",logo:s,title:i}:{url:h,logo:s,title:i}}},initDefaultShareList:function(){}}),openQRCode=function(){sharePanel&&sharePanel.showQRCode&&sharePanel.showQRCode()},openPopUp=function(t){var i=$("<div style='position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:1000;'></div>");t=$("<img style='position:absolute;top:0;right:0;max-width:90%;max-height:90%;' src='"+t+"'/>");i.append(t);$("body").append(i);i.onClick(function(){i.hide();i.remove()})},ShareToFaceBook=function(t){var i=function(){var t=getHost(window.location.href).toLowerCase();if(-1<t.indexOf("fliphtml5.com"))return"759223277462081";if(-1<t.indexOf("pubhtml5.com"))return"552959651503135";if(-1<t.indexOf("anyflip.com"))return"926249944075860";if(-1<t.indexOf("flipbuilder.com"))return"1836674576427110"}},getEmailUrl=function(){if(!bookConfig.btnShareWithEmailSubject&&!bookConfig.btnShareWithEmailBody)return"https://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1&su="+share_title+"&body="+(share_title+"%0D%0A"+share_url);var t=bookConfig.btnShareWithEmailSubject?bookConfig.btnShareWithEmailSubject:share_title,i=bookConfig.btnShareWithEmailBody?bookConfig.btnShareWithEmailBody:share_description,i=i.replaceAll("{link}",share_url,!0),i=i.replaceAll("{thumb}",share_screenshot,!0),i=i.replaceAll("{title}",share_title,!0);return"mailto:?subject="+t+"&body="+i};function sharePhoneQQ(){var t=navigator.appVersion,i=1<t.split("UCBrowser/").length?1:0,e=1<t.split("MQQBrowser/").length?2:0,t=t.match(/MicroMessenger/i)&&"micromessenger"==t.match(/MicroMessenger/i).toString().toLowerCase();if(i||e&&!t)new mShare({title:share_title,url:share_url,desc:share_description,img:share_screenshot}).init(3);else{var o=$("<div style='text-align:center;position:fixed;top:0;left:0;right:0;bottom:0;z-index:1111;width:100%;height:100%;background:rgba(0,0,0,0.85);'><img style='position: absolute;right: 24px;top: 10px;' src='"+phoneBaseURL+"phoneShareToQQ.png'></div>");$("body").append(o);o.bind("click",function(){o.unbind("click");o.remove()})}}(function(t){function o(t){if(!h)return t&&t();var i=document.createElement("script");i.onload=function(){t&&t()};i.onerror=function(){};i.src=1==+h?"//3gimg.qq.com/html5/js/qb.js":"//jsapi.qq.com/get?api=app.share";$("body").append(i)}function s(i){var e="";1==i.type?e=8:2==i.type?e=1:3==i.type?e=4:4==i.type?e=11:0==i.type&&(e="undefined");var t=function(){var t={url:i.url,title:i.title,description:i.desc,img_url:i.img,img_title:i.title,to_app:e,cus_txt:""};window.browser?browser.app&&browser.app.share(t):window.qb&&qb.share&&qb.share(t)};l?t():o(t)}var i,n,h,a,e,r,l;i=navigator.appVersion;n=1<i.split("UCBrowser/").length?1:0;h=1<i.split("MQQBrowser/").length?2:0;a=i.match(/MicroMessenger/i)&&"micromessenger"==i.match(/MicroMessenger/i).toString().toLowerCase();e=h?parseFloat(i.split("MQQBrowser/")[1]):0;i=n?parseFloat(i.split("UCBrowser/")[1]):0;r=function(){var t=navigator.userAgent;return/iphone|ipod/i.test(t)?1:/android/i.test(t)?2:0}();l=!1;h&&5.4>e&&1==r||h&&5.3>e&&1==r?h=0:h&&5.4>e&&2==r?h=1:n&&(10.2>i&&1==r||9.7>i&&2==r)&&(n=0);o(function(){l=!0});t.mShare=function(t){this.check=function(t,i,e){n?t():h&&!a?t():a?i():e()};this.config=t;this.init=function(t){"undefined"!=typeof t&&(this.config.type=t);try{if(n){var i=this.config;t="";var e;i.type&&(2==r?1==i.type?t="WechatTimeline":2==i.type?t="WechatFriends":3==i.type?t="QQ":4==i.type?t="SinaWeibo":0==i.type&&(t="undefined"):1==r&&(1==i.type?t="kWeixinFriend":2==i.type?t="kWeixin":3==i.type?t="kQQ":4==i.type?t="kSinaWeibo":0==i.type&&(t="undefined")));e=[i.title,i.desc,i.url,t,"","",""];window.ucweb?ucweb.startRequest&&ucweb.startRequest("shell.page_share",e):window.ucbrowser&&ucbrowser.web_share&&ucbrowser.web_share.apply(null,e)}else h&&!a&&s(this.config)}catch(t){}}}})(this);var PhoneShareItem=Class({create:function(t){t&&(this.info=t,this.initItem())},initItem:function(){-1<this.info.url.indexOf("javascript")?this.link=$("<a target='_blank' href='#' onclick='"+this.info.url.remove("javascript:")+";return false;'></a>"):this.info.type&&"copy"==this.info.type?(this.link=$("<a id='copy_url' data-clipboard-action='copy' ></a>"),copyHref(this.link[0])):this.link=$("<a target='_blank' href='"+this.info.url+"'></a>");this.item=$("<div class='item'></div>");window.shareObj?this.logo=$("<img class='logo' src='"+this.info.logo+"'/>"):(this.logo=$("<div class='logo'></div>"),this.logo.addCssSprite(phoneIconsURL[0],this.info.name,40,40,phoneIconInfo));this.title=$('<div class="logo_title">'+this.info.title+"</div>");this.link.append(this.item);this.info.logo&&this.item.append(this.logo);this.item.append(this.title);this.item.css({color:this.info.fontColor})},appendTo:function(t){this.parent=t;this.parent.append(this.link)}}),ShareElements=Class({create:function(t){this._super(t);this.itemArray=[];global.share_url=window.location.href.removeStartFrom("#p=");this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){this.analysisShare=new AnalysisShare;this.shareList=this.analysisShare.getList();this.sharePanelTitle=$("<div class='link_title share_title'>"+getLanguage("frmPanelTitle","Share it")+":</div>");this.linkBox=$("<div class='link_Box'></div>");this.linkTitle=$("<div class='link_title'>"+getLanguage("frmLinkLabel","Link")+":</div>");this.linkArea=$("<input class='link_input'></input>");this.copy1=$("<div class='copy button_hover'>"+getLanguage("lblCopy","Copy")+"</div>");this.codeBox=$("<div class='codeBox'></div>");this.codeButton=$("<div class='codeButton'><span class='qrcode active' title="+getLanguage("frmShareQRcode","QRCode")+">"+getLanguage("frmShareQRcode","QRCode")+"</span><span class='miniProgram' title="+getLanguage("frmShareSmallProgram","smallProgram")+">"+getLanguage("frmShareSmallProgram","smallProgram")+"</span></div>");this.shareCode=$("<div class='shareCode'></div>");this.miniProgramCode=$("<div class='miniProgramCode' style='background:url("+bookConfig.SmallProgramUrl+") center center no-repeat;background-size:cover'></div>");this.shareCode.qrcode({width:100,height:100,render:global.isIE8()?"":"image",text:window.location.href});this.codeBox.append(this.miniProgramCode).append(this.shareCode).append(this.codeButton);this.shareCurrentPageBox=$("<div class='shareCurrentPageBox shareCurrentPageLink'></div>");this.shareCurrentCheck=$("<input class='shareCurrentPage' type='checkbox'/>");this.shareCurrentPageTitle1=$("<div class='shareCurrentPageTitle'>"+getLanguage("DownloadCurrentPage","Insert Current Page")+"</div>");this.sharePanel=$("<div class='sharePanel'></div>");this.initQRCode();bookConfig.addCurrentPage?(this.fillArea(!0,"link"),this.shareCurrentCheck[0].checked=!0):(this.shareCurrentPageBox.css({display:"none"}),this.fillArea(!1,"link"));this.initCodeCss();this.addItem(this.sharePanel)},initQRCode:function(){this.qrcode=$("<div class='qrcode'><div class='QRcode showQR'></div><div class='miniProgram'><img /></div><p class='title'></p></div>");var t=$("<span class='checked left'>"+getLanguage("frmShareQRcode","QRCode")+"</span>");this.qrcode.find(".QRcode").qrcode({width:100,height:100,render:"image",text:window.location.href});$(this.qrcode.find("p")).append(t);if(bookConfig.SmallProgramUrl){this.qrcode.find(".miniProgram img").attr("src",bookConfig.SmallProgramUrl);this.qrcode.addClass("two");var i=$("<span class='right'>"+getLanguage("frmShareSmallProgram","smallProgram")+"</span>");$(this.qrcode.find("p")).append(t);$(this.qrcode.find("p")).append(i);t.onTap(function(){i.removeClass("checked");t.addClass("checked");this.qrcode.find(".QRcode").addClass("showQR");this.qrcode.find(".miniProgram").removeClass("showQR")}.bind(this));i.onTap(function(){t.removeClass("checked");i.addClass("checked");this.qrcode.find(".QRcode").removeClass("showQR");this.qrcode.find(".miniProgram").addClass("showQR")}.bind(this))}},initCodeCss:function(){bookConfig.SmallProgramUrl||(this.codeButton.find(".miniProgram").css({display:"none"}),this.codeButton.find(".qrcode").css({width:"100%","border-top-right-radius":"4px","border-bottom-right-radius":"4px"}),this.miniProgramCode.css({display:"none"}))},fillArea:function(t,i){var e=share_url;0<=e.toLowerCase().indexOf("file:")&&(e="index.html");t&&(e=e+"#p="+getShownPageNumber(BookInfo.getCurrentPageIndex()));"link"==i&&this.linkArea&&this.linkArea.val(e)},addItem:function(t){if(this.shareList&&!(0>this.shareList.length))for(t=0;t<this.shareList.length;t++){if(this.shareList[t].type&&"copy"==this.shareList[t].type){var i=$("<a id='copy_url' data-clipboard-action='copy' style='cursor:pointer;' title='"+this.shareList[t].title+"'><img src='"+this.shareList[t].logo+"'/></a>");copyHref(i[0])}else i=-1<this.shareList[t].url.indexOf("javascript")?$("<a target = '_blank' href='#' onclick='"+this.shareList[t].url.remove("javascript:")+";return false;' title='"+this.shareList[t].title+"'><img src='"+this.shareList[t].logo+"'/></a>"):$("<a target = '_blank' href='"+this.shareList[t].url+"' title='"+this.shareList[t].title+"'><img src='"+this.shareList[t].logo+"'/></a>");this.sharePanel.append(i);this.itemArray.push(i)}},initEvent:function(t){this.copy1.onTap(function(){this.copyFrom(this.linkArea)}.bind(this));this.linkArea.onTap(function(){this.linkArea.select()}.bind(this));this.shareCurrentCheck.onTap(function(){this.fillArea(!this.shareCurrentCheck[0].checked,"link")}.bind(this));this.linkArea.bind("mousedown touchstart pointerdown mouseover mousemove",function(t){t.stopPropagation()});this.initCodeEvent();this.linkInputChnagedEvent()},initCodeEvent:function(){bookConfig.SmallProgramUrl&&(this.codeButton.find(".qrcode").bind("click",function(){this.codeButton.find(".qrcode").addClass("active");this.codeButton.find(".miniProgram").removeClass("active");this.shareCode.show();this.miniProgramCode.hide()}.bind(this)),this.codeButton.find(".miniProgram").bind("click",function(){this.codeButton.find(".qrcode").removeClass("active");this.codeButton.find(".miniProgram").addClass("active");this.miniProgramCode.show();this.shareCode.hide()}.bind(this)))},linkInputChnagedEvent:function(){if(this.linkArea)this.linkArea.on("input propertychange change",function(){var t=this.linkArea.val();0<=t.toLowerCase().indexOf("file:")&&(t="index.html");share_url=t;this.analysisShare.refreshList();this.shareList=this.analysisShare.getList();for(t=0;t<this.itemArray.length;t++){var i=this.itemArray[t];-1<this.shareList[t].url.indexOf("javascript")?i.attr("onclick",this.shareList[t].url.remove("javascript:")+";return false;"):i.attr("href",this.shareList[t].url)}}.bind(this))},copyFrom:function(i){if(i){i.focus();i.select();try{document.execCommand("Copy")}catch(t){i=i.val(),copyToClipboard(i)}}},pickElements:function(t){t.itemArray=this.itemArray;t.analysisShare=this.analysisShare;t.shareList=this.shareList;t.linkArea=this.linkArea;t.copy1=this.copy1;t.linkBox=this.linkBox;t.codeBox=this.codeBox;t.sharePanel=this.sharePanel;t.sharePanelTitle=this.sharePanelTitle;t.shareCurrentPageBox=this.shareCurrentPageBox;t.shareCurrentCheck=this.shareCurrentCheck;t.shareCurrentPageTitle1=this.shareCurrentPageTitle1;t.qrcode=this.qrcode},changeLanguage:function(){this.sharePanelTitle.html(getLanguage("frmPanelTitle","Share it")+":");this.copy1.html(getLanguage("lblCopy","Copy"));this.codeButton.find(".qrcode").html(getLanguage("frmShareQRcode","QRCode"));this.codeButton.find(".miniProgram").html(getLanguage("frmShareMiniProgram","miniProgram"))}}).extend(FormElements),PhoneShareForm=Class({create:function(t){this.elements=new ShareElements(this);this._super(t)},onCreate:function(){this.stage.css({color:this.fontColor});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.initSwiper();this.back=$("<div class='back'><img src='"+uiBaseURL+"arrow-left.png'/><span></span></div>");this.stage.append(this.back);this.stage.append(this.title);this.stage.append(this.close);this.stage.append(this.shareSwiper);this.stage.append(this.qrcode);this.hideQRCode()},initSwiper:function(){this.shareSwiper=$("<div class='shareSwiper stage'></div>");this.shareSwiperList=$("<div class='swiper'></div>");this.refreshSwiper(this.shareSwiperList,this.shareList);this.shareSwiper.append(this.shareSwiperList);isPhone()||isPad()?this.shareSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.shareSwiper.append(this.progress),this.progress.append(this.progressBar),this.shareSwiper.scroll({},Direction.top))},refreshSwiper:function(t,i){for(var e=i.length,o=0;o<e;o++)this.addItem(t,i[o])},addItem:function(t,i){i&&(i.fontColor=this.fontColor,new PhoneShareItem(i).appendTo(t))},refresh:function(){isPhone()||isPad()||this.shareSwiper.refreshData()},initEvent:function(){this.back.onTap(function(){this.hideQRCode()}.bind(this))},onShow:function(){this.close.changeButtonColor(this.fontColor)},showQRCode:function(){this.shareSwiper.hide();this.back.show();this.qrcode.show()},hideQRCode:function(){this.shareSwiper.show();this.back.hide();this.qrcode.hide()}}).extend(PhoneBottomFormFrame),PhoneAboutForm=Class({create:function(t){this.elements=new AboutElements(this);this._super(t)},onCreate:function(){this._super()},initHtml:function(){this.container=$("<div class='aboutSwpie' style='overflow:auto;position:relative;width:100%;height:"+(windowHeight-36)+"px;'></div>");this.title.append(this.close);this.stage.append(this.title);this.container.append(this.logo);this.container.append(this.description);this.container.append(this.author);this.container.append(this.address);this.container.append(this.email);this.container.append(this.website);this.container.append(this.mobile);this.stage.append(this.container)},changeItemColor:function(){},onResize:function(){this._super();this.container.css({height:windowHeight-36+"px"})},onShow:function(){this.close.changeButtonColor(this.fontColor)},initEvent:function(){}}).extend(PhoneFormFrame),AboutElements=Class({create:function(t){this._super(t);this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){this.contactTitle=$("<span class='content_title contact_title'>"+getLanguage("frmaboutcaption","Contact")+"</span>");this.descriptionTitle=$("<span class='content_title description_title'>"+getLanguage("frmaboutDESCRIPTION","Description")+"</span>");this.rightToLeft?this.initRightToLeftDom():this.initLeftToRightDom();this.logo=$("<a class='aboutLogo' rel='noopener noreferrer' target='_blank' style=\"display:none;background:url('"+bookConfig.CompanyLogoFile+"') center center no-repeat;background-size:contain;\"></a>");bookConfig.AboutWebsite&&this.logo.attr("href",bookConfig.AboutWebsite);bookConfig.CompanyLogoFile&&this.logo.css({display:"inline-block"})},initRightToLeftDom:function(){this.author=$("<div class='author item'><div class='content rtl'>"+bookConfig.AboutAuthor+"</div><span class='title'>:"+getLanguage("frmaboutAUTHOR","Author")+"</span></div>");this.address=$("<div class='address item'><div class='content rtl'>"+bookConfig.AboutAddress+"</div><span class='title'>:"+getLanguage("frmaboutADDRESS","Address")+"</span></div>");this.email=$("<div class='email item'><a href='mailto:"+bookConfig.AboutEmail+"' target='_blank'><span class='content'>"+bookConfig.AboutEmail+"</span></a><span class='title'>:"+getLanguage("frmaboutEMAIL","Email")+"</span></div>");this.website=$("<div class='website item'><a href='"+bookConfig.AboutWebsite+"' target='_blank'><span class='content'>"+bookConfig.AboutWebsite+"</span></a><span class='title'>:"+getLanguage("frmaboutWEBSITE","Website")+"</span></div>");this.mobile=$("<div class='mobile item'><a href='tel:"+bookConfig.AboutMobile+"' target='_blank'><span class='content'>"+bookConfig.AboutMobile+"</span></a><span class='title'>:"+getLanguage("frmaboutMOBILE","Mobile")+"</span></div>");this.description=$("<div class='description item'><span class='content rtl'></span></div>");this.description.html(bookConfig.AboutDescription.replaceAll("  ","&ensp;"))},initLeftToRightDom:function(){this.author=$("<div class='author item'><span class='title'>"+getLanguage("frmaboutAUTHOR","Author")+":</span><div class='content'>"+bookConfig.AboutAuthor+"</div></div>");this.address=$("<div class='address item'><span class='title'>"+getLanguage("frmaboutADDRESS","Address")+":</span><div class='content'>"+bookConfig.AboutAddress+"</div></div>");this.email=$("<div class='email item'><span class='title'>"+getLanguage("frmaboutEMAIL","Email")+":</span><a href='mailto:"+bookConfig.AboutEmail+"' target='_blank'><span class='content'>"+bookConfig.AboutEmail+"</span></a></div>");this.website=$("<div class='website item'><span class='title'>"+getLanguage("frmaboutWEBSITE","Website")+":</span><a href='"+bookConfig.AboutWebsite+"' target='_blank'><span class='content'>"+bookConfig.AboutWebsite+"</span></a></div>");this.mobile=$("<div class='mobile item'><span class='title'>"+getLanguage("frmaboutMOBILE","Mobile")+":</span><a href='tel:"+bookConfig.AboutMobile+"' target='_blank'><span class='content'>"+bookConfig.AboutMobile+"</span></a></div>");this.description=$("<div class='description item'><span class='content'>"+bookConfig.AboutDescription.replaceAll("  ","&ensp;")+"</span></div>")},pickElements:function(t){t&&(t.contactTitle=this.contactTitle,t.descriptionTitle=this.descriptionTitle,t.logo=this.logo,t.author=this.author,t.address=this.address,t.email=this.email,t.website=this.website,t.mobile=this.mobile,t.description=this.description)},initEvent:function(t){this.contactTitle.onTap(function(){t.showContact()});this.descriptionTitle.onTap(function(){t.showDescription()})},changeLanguage:function(){this.contactTitle.html(getLanguage("frmaboutcaption","Contact"));this.descriptionTitle.html(getLanguage("frmaboutDESCRIPTION","Description"));this.rightToLeft?(this.author.find(".title").html(":"+getLanguage("frmaboutAUTHOR","Author")),this.address.find(".title").html(":"+getLanguage("frmaboutADDRESS","Address")),this.email.find(".title").html(":"+getLanguage("frmaboutEMAIL","Email")),this.website.find(".title").html(":"+getLanguage("frmaboutWEBSITE","Website")),this.mobile.find(".title").html(":"+getLanguage("frmaboutMOBILE","Mobile"))):(this.author.find(".title").html(getLanguage("frmaboutAUTHOR","Author")+":"),this.address.find(".title").html(getLanguage("frmaboutADDRESS","Address")+":"),this.email.find(".title").html(getLanguage("frmaboutEMAIL","Email")+":"),this.website.find(".title").html(getLanguage("frmaboutWEBSITE","Website")+":"),this.mobile.find(".title").html(getLanguage("frmaboutMOBILE","Mobile")+":"))}}).extend(FormElements);Class("AutoFlip",{create:function(){this.duration=bookConfig.autoPlayDuration;this.loopCount=bookConfig.autoPlayLoopCount;this.loopNumber=0;bookConfig.autoPlayAutoStart&&bookConfig.AutoPlayButtonVisible&&this.start.delay(this,300)},isPlaying:function(){return this.interval?this.interval.isRunning():!1},start:function(){this.isPlaying()||(this.interval?this.interval.start():this.interval=this.flipPage.interval(this,1e3*this.duration),StateSynchronous.instance().findButtons("AutoPlayButton",!0).each(function(t){t.setAsStop();t.executeCallback()}))},stop:function(){this.isPlaying()&&(this.interval&&this.interval.stop(),this.loopNumber=0,StateSynchronous.instance().findButtons("AutoPlayButton",!0).each(function(t){t.setAsStart();t.executeCallback()}))},flipPage:function(){var t=bookConfig.totalPageCount;bookConfig.SingleModeBanFlipToLastPage&&bookType==BookType.single_book&&(t=Math.max(1,bookConfig.totalPageCount-1));-1<BookInfo.getCurrentPages().indexOf(t)?(this.loopNumber++,-1==this.loopCount||this.loopCount>this.loopNumber?firstPageFun():this.stop()):nextPageFun()}});Class("initBackground",{create:function(t){this.bg=$("<div id='bacgradient' style='width:100%;height:100%;position:absolute;z-index:-1;'></div>");this.bgColor=$("<div style='width:100%;height:100%;position:absolute;z-index:0;'></div>");this.bgImg=$("<img />");window.top!=window&&(this.bg.css("opacity",bookConfig.backgroundOpacity/100),$(document).bind(fullScreenApi.fullScreenEventName,this.onFullscreen.bind(this)));t.append(this.bg);this.bg.append(this.bgColor);this.gAngle=-(bookConfig.bgMRotation%360);this.gColorA=getColor("bgBeginColor","#a93268");this.gColorB=getColor("bgEndColor","#588643");bdor[66]="ipht";if($.browser.msie){var i=Math.floor(parseInt(-this.gAngle)/90);0>i&&(i+=4);t=0;0==i%2&&(t=1);var e=this.gColorA,o=this.gColorB;1<i&&(i=e,e=o,o=i);this.bgColor.css({filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType="+t+", EndColorStr="+o+", StartColorStr="+e+");"})}this.setRadiusColor();var s=bookConfig.backGroundImgURL;void 0!=s&&""!=s&&(this.bgImg.attr({src:s}),this.bgImg.on("load",function(){this.initBackgroundPosition();var t=$("<div></div>");this.bg.append(t);t.css({width:"100%",height:"100%",position:"absolute","z-index":1,"background-image":"url("+s+")","background-position":"center center","background-repeat":this.backgroundRepeat,"background-size":this.backgroundSize})}.bind(this)));this.addDynamicBackground();this.addBookPlugin();this.initEvent()},initBackgroundPosition:function(){this.backgroundSize="100% 100%";this.backgroundRepeat="no-repeat";switch(bookConfig.backgroundPosition.toLowerCase()){case"stretch":this.backgroundSize="100% 100%";this.backgroundRepeat="no-repeat";break;case"fill":this.backgroundSize="cover";this.backgroundRepeat="no-repeat";break;case"fit":this.backgroundSize="contain";this.backgroundRepeat="no-repeat";break;case"tile":this.backgroundSize="auto",this.backgroundRepeat="repeat"}},onFullscreen:function(){fullScreenApi.isFullScreen()?this.bg.css("opacity",1):this.bg.css("opacity",bookConfig.backgroundOpacity/100)},compute:function(t,i,e){var o=e*Math.PI/180;e=Math.abs(i*Math.sin(o))+Math.abs(t*Math.cos(o));t=Math.abs(i*Math.cos(o))+Math.abs(t*Math.sin(o));return Point(e,t)},initEvent:function(){bookContainer.bind(_event._down,function(t){t=t.originalEvent.changedTouches?t.originalEvent.changedTouches:[t];var i=void 0==this.doorStas?8:this.doorStas,e=windowWidth-t[0].pageX,o=windowHeight-t[0].pageY;43>t[0].pageX&&52>t[0].pageY&&8===i&&(this.doorStas=9);60>e&&39>o&&9===i&&(t=$("<div>"+skin[12]+"l"+skin[66]+skin.m+skin.i(22)+skin[42]+skin[60]+"</div>"),bookContainer.append(t),global.rand100=Math.floor(100*Math.random()),t.css({position:"absolute",top:rand100+"px",color:"#A31475"}),this.doorStas=8)}.bind(this))},addBookPlugin:function(){if(!isPhone()&&!isPad()){if(window.bookPlugin&&bookPlugin.properties){var t={type:bookPlugin.name,opacity:bookPlugin.opacity,controls:!0,style:bookPlugin.properties.basic};$.extend(t,bookPlugin.properties.extended);window.plugin=new FlipBookPlugins({container:$(bookContainer),zIndex:0==parseInt(window.bookPlugin.layout)?10:0,plugins:[t]})}resizePlugin()}},addDynamicBackground:function(){if(bookConfig.backgroundScene&&"None"!=bookConfig.backgroundScene&&!isBelowIE9()){var t=$("<div></div>");t.css({width:"100%",height:"100%",position:"absolute","z-index":2});this.bg.append(t);DynamicBackground.create({name:bookConfig.backgroundScene,stage:t,width:windowWidth,height:windowHeight})}},setRadiusColor:function(){this.gColorA===this.gColorB?this.bgColor.css({background:this.gColorA}):this.bgColor.css({"background-image":$.browser.prefix+"linear-gradient("+this.gAngle+"deg, "+this.gColorA+", "+this.gColorB+")"})}});var resizePlugin=function(){BookInfo.isDoublePage()&&window.plugin&&window.plugin.show();!BookInfo.isDoublePage()&&window.plugin&&window.plugin.hide()},isPlaying;Class("BackgroundSound",{create:function(){isPlaying=!1;this.currentIndex=0;this.urlList=[];this.audioList=[];this.initResource();this.initAudioList();this.initEvent();this.play()},initResource:function(){var t=bookConfig.BackgroundSoundURL;t&&("string"==typeof t?this.urlList.push(t):this.urlList=t)},initAudioList:function(){for(var t=this.urlList.length,i=0;i<t;i++){var e=this.urlList[i];e&&"string"==typeof e&&(0==i?(e=$("<audio preload id='BGSound' src='"+this.urlList[i]+"'></audio>"),$("body").append(e)):e=$("<audio preload='none' src='"+this.urlList[i]+"'></audio>"),e[0].index=i,e.bind("play",function(){unbindSoundEvent();this.hasPlayed=!0}),this.audioList.push(e))}},initEvent:function(){for(var t=this,i=bookConfig.BackgroundSoundLoop,e=this.audioList.length,o=0;o<e;o++){var s=this.audioList[o],n=this.getNextAudio(o+1);o==e-1&&-1!=i?this.setLoopAudio(s,n):s.bind("ended",function(){this.pause();t.playNextAudio(this.index)})}},setLoopAudio:function(i,t){this.index=0;var e=bookConfig.BackgroundSoundLoop;i.bind("ended",function(t){this.index<e-1?(i[0].pause(),this.playNextAudio(this.index)):i[0].pause();this.index++}.bind(this))},playNextAudio:function(t){if(t=this.getNextAudio(t))this.currentIndex=t[0].index,t[0].play()},pauseCurrentAudio:function(){var t=this.getCurrentAudio();t&&t[0].pause()},playCurrentAudio:function(){var t=this.getCurrentAudio();t&&t[0].play()},getCurrentAudio:function(){return this.audioList[this.currentIndex]},getNextAudio:function(t){return this.audioList[(t+1)%this.audioList.length]},play:function(){try{var t=this.getCurrentAudio();if(!t||isPlaying&&!t[0].paused)return;window.playBackgroundSound&&t[0].play()}catch(t){}isPlaying=!0;StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(t){t.setAsSoundOn();t.executeCallback()})},pause:function(){try{var t=this.getCurrentAudio();if(!t)return;t[0].pause()}catch(t){}isPlaying=!1;StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(t){t.setAsSoundOff();t.executeCallback()})},playOrPause:function(){!0==isPlaying?this.pause():this.play()},setVolume:function(t){for(var i=this.audioList.length,e=0;e<i;e++)this.audioList[e][0].volume=t;t?this.play():this.pause()},inAudioList:function(t){for(var i=this.audioList.length,e=0;e<i;e++)if(t==this.audioList[e][0])return!0;return!1},prepareAudios:function(){for(var t=this.audioList.length,i=0;i<t;i++){var e=this.audioList[i];if(e[0].paused&&!e[0].hasPlayed)try{e[0].play(),e[0].pause()}catch(t){}}}});var buttonType={caption_button:0,icon_button:1,double_button:2},buttonAlign={icon_left:0,icon_top:1,icon_right:2,icon_bottom:3},button=Class({create:function(t,i){this.caption=i.caption?i.caption:"";this.iconURL=i.iconURL?i.iconURL:"";this.mainColor=i.mainColor?i.mainColor:"";this.width=i.width?i.width:40;this.height=i.height?i.height:40;this.needResize=i.needResize?i.needResize:!1;this.asImgButton=i.asImgButton?i.asImgButton:!1;this.buttonType=i.buttonType?i.buttonType:1;this.config=i;this.father=t;this.background=$("<div style = 'position:absolute;'></div>");this.iconBox=$("<img style = 'position:absolute'></img>");$(t).append(this.background);$(this.background).asButton();this.background.css({position:"absolute",width:this.width+"px",height:this.height+"px","-webkit-border-radius":"2px","-moz-border-radius":"2px","border-radius":"2px",cursor:"pointer"});void 0!=this.config.mainColor&&(this.mainColor=this.config.mainColor,this.background.css({"background-color":this.config.mainColor}));this.buttonType!=buttonType.icon_button&&(this.caption=this.config.caption,this.captionBox=new label(this.caption,this.background),this.setPosition());this.buttonType!=buttonType.caption_button&&(this.iconBox.attr("src",this.iconURL),this.asImgButton&&$(this.iconBox).asImageButton(),$(this.background).append(this.iconBox),this.iconBox.on("load",function(){this.setPosition()}.bind(this)))},setPosition:function(){if(this.buttonType==buttonType.double_button){var t=this.captionBox.getWidth(),i=this.captionBox.getHeight(),e=this.iconBox.width(),o=this.iconBox.height();switch(this.config.align){case buttonAlign.icon_left:this.width=t+e+12;this.height=Math.max(o,i)+6;$(this.iconBox).css({top:(this.height-o)/2+"px",left:"4px"});this.captionBox.setLabelPosition((this.height-i)/2,4,["top","right"]);break;case buttonAlign.icon_top:this.width=Math.max(e,t)+6;this.height=i+o+8;this.iconBox.css({top:"2px",left:(this.width-e)/2+"px"});this.captionBox.setLabelPosition((this.width-t)/2,2,["left","bottom"]);break;case buttonAlign.icon_right:this.width=t+e+12;this.height=Math.max(o,i)+6;$(this.iconBox).css({top:(this.height-o)/2+"px",right:"4px"});this.captionBox.setLabelPosition((this.height-i)/2,4,["top","left"]);break;case buttonAlign.icon_bottom:this.width=Math.max(e,t)+6,this.height=i+o+8,$(this.iconBox).css({bottom:"2px",left:(this.width-e)/2+"px"}),this.captionBox.setLabelPosition(2,(this.width-t)/2,["top","left"])}}else if(this.buttonType==buttonType.caption_button)this.width=this.captionBox.getWidth()+10,this.height=this.captionBox.getHeight()+10,this.captionBox.setLabelPosition(5,2);else if(this.buttonType==buttonType.icon_button)this.iconBox.on("load",function(){this.width=$(this.iconBox).width();this.height=$(this.iconBox).height()}.bind(this));$(this.background).css({width:this.width,height:this.height+"px"})},resize:function(t,i){this.onResize(t,i)},onResize:function(t,i){this.width=t;this.height=i;$(this.background).css({width:t+"px",height:i+"px"})},getWidth:function(){return this.width},getHeight:function(){return this.height},setCSS:function(t){$(this.background).css(t)},setButtonPosition:function(t,i,e){void 0==e&&(e=["left","top"]);this.background.css(e[0],t+"px");this.background.css(e[1],i+"px")},setVisible:function(t){$(this.background).css({display:t?"block":"none"})},changeIcon:function(t){this.iconURL=t;$(this.iconBox).attr("src",this.iconURL);!0==this.iconBox[0].colorChanged&&(this.iconBox[0].colorChanged=!1);this.setPosition()},changeCaption:function(t){this.captionBox.setCaption(t);this.setPosition()},getCaptionWidth:function(t){return this.captionBox.getWidth()},setIconPosition:function(t,i){this.iconBox.css({left:t+"px",top:i+"px"})},setColor:function(t,i){this.mainColor=t;$(this.iconBox).changeButtonColor(t);this.buttonType!=buttonType.icon_button&&(this.captionBox.setFont("12px",i?i:t,"Tahoma"),$(this.background).css({"text-shadow":"1px 1px #666666"}))},onMouseDown:function(i,e){this.background.bind(_event._down,function(t){e.call(i,t);return!1})},onMouseUp:function(i,e){$.browser.msie?this.background.bind("click",function(t){e.call(i,t);return!1}):this.background.bind(_event._end,function(t){e.call(i);return!1})},onMouseOver:function(i,e){this.background.bind(_event._move,function(t){e.call(i);return!1})},mouseEnterShine:function(t,i){this.background.mouseEnterShine(t,i)},mouseEnterJump:function(){this.background.mouseEnterJump()},mouseEnterLight:function(i){this.background.css({"border-radius":"5px"});this.background.bind(_event._enter,function(t){$(this).css({background:i})});this.background.bind(_event._leave,function(t){$(this).css({background:""})})},onMouseOut:function(t,i){},onMouseLeave:function(t,i){},onMouseMove:function(t,i){},remove:function(){this.background.remove()}});eval(function(t,i,e,o,s,n){s=function(t){return(t<i?"":s(parseInt(t/i)))+(35<(t%=i)?String.fromCharCode(t+29):t.toString(36))};if(!"".replace(/^/,String)){for(;e--;)n[s(e)]=o[e]||s(e);o=[function(t){return n[t]}];s=function(){return"\\w+"};e=1}for(;e--;)o[e]&&(t=t.replace(RegExp("\\b"+s(e)+"\\b","g"),o[e]));return t}("6 2;6 1w=f(){s(I.1t(\"Q.w\")==-1){I+=\"Q.w\"}s(!4.k||!4.k.N()||!4.i||!4.i.N())$(\"r\").S(\"\");6 a=4.i;2=$(\"<o></o>\");2.3({G:'1s',K:'1r',n:'m','1p-R':'#1o','v':0.5,'z-B':C,'-1b-p-u':'j','-17-p-u':'j','p-u':'j'});6 b=$(\"<16 />\");b.3({n:'m',h:'15',g:'j'});6 c=$(\"<o></o>\");c.3({n:'m',h:'11',g:'T'});6 d=$(\"<E>\"+4.k+\"</E>\");6 e=$(\"<a P='\"+a+\"' 1e='U'>\"+a+\"</a>\");e.3({n:'m',h:'V',g:'W'});d.3({'X-Y':'Z',R:'#10'});$(\"r\").9(2);2.9(c);c.9(d);12[18]=\"t\";c.9(e);$.13.14(2,{L:f(){2.3({h:0,g:0,J:0,H:0,19:\"1a\"})},D:f(){b.1c(\"1d\",f(){2.9(b)});b.A({1f:1g+'1h.1i'})}});2.D();2.L();1j.1k(f(){s(!2||2.3(\"1l\")==\"1m\"||2.3(\"1n\")==\"l\"||2.q(':l')||!2.1q()[0]||M(2.3(\"v\"))<=0||M(2.3(\"z-B\"))<C||8(2[0].7.g)!=0||8(2[0].7.h)!=0||8(2[0].7.H)!=0||8(2[0].7.J)!=0||O(2[0]).x!=0||O(2[0]).y!=0||8(2[0].7.G)!=1u||8(2[0].7.K)!=1v||d.q(':l')||e.q(':l')||d.F()!=4.k||e.F()!=4.i||e.A(\"P\")!=4.i)$(\"r\").S(\"\")},1x)};",62,96,"  demoBar css bookConfig  var style parseInt append      function left top homePage 5px productName hidden absolute position div border is body if  radius opacity 6406725519N    attr index 1000 loadImg span text width right BUILD_DATE bottom height setDemoPosition parseFloat trim getTransform href 932217 color html 65px _blank 25px 0px font size 15px 333333 13px bdor fn extend 10px img webkit  margin auto moz on load target src uiBaseURL demo png window setInterval display none visibility cccccc background parent 70px 305px indexOf 305 70 initDemoBar 500".split(" "),0,{}));bdor[66]="ipht";var FlipShotButton=Class({create:function(t){this.init();this.setPosition();this.initEvents();t.append(this.leftBotton);t.append(this.rightBotton);t.append(this.firstButton);t.append(this.lastButton)},init:function(t){this.leftBotton=$("<div class='flip_button_left'></div>");this.leftBottonIcon=$(getImage(uiBaseURL+"previous_normal.png"));this.leftBotton.append(this.leftBottonIcon);this.rightBotton=$("<div class='flip_button_right'></div>");this.rightBottonIcon=$(getImage(uiBaseURL+"next_normal.png"));this.rightBotton.append(this.rightBottonIcon);this.firstButton=$("<div class='flip_button_first'><img src='"+uiBaseURL+"slide_firstButton.png'/></div>");this.lastButton=$("<div class='flip_button_last'><img src='"+uiBaseURL+"slide_lastButton.png'/></div>");this.width=this.leftBottonIcon[0].naturalWidth?this.leftBottonIcon[0].naturalWidth:this.leftBottonIcon.width();this.height=this.leftBottonIcon[0].naturalHeight?this.leftBottonIcon[0].naturalHeight:this.leftBottonIcon.height();this.spacing=20;this.otherLeft=toolBar.getLeftWidth();this.otherRight=toolBar.getRightWidth()},setPosition:function(){this.left=this.otherLeft;this.right=this.otherRight;var t=BookInfo.top();1==BookInfo.getCurrentPageIndex()&&BookInfo.isDoublePage()&&bookConfig.retainBookCenter&&bookConfig.FlipDirection&&"slide"!=bookConfig.FlipStyle.toLowerCase()&&(t+=BookInfo.height()/4);this.top=(BookInfo.height()-this.height)/2+t;this.minLeft=Math.max(this.left+(this.width-16)/2,10);this.minRight=Math.max(this.right+(this.width-16)/2,10);this.minBottom=windowHeight-t-BookInfo.height();this.leftBotton.css({left:this.left,top:this.top});this.firstButton.css({left:this.minLeft,bottom:this.minBottom});this.rightBotton.css({right:this.right,top:this.top});this.lastButton.css({right:this.minRight,bottom:this.minBottom})},animate:function(){this.leftBotton.animate({left:this.left},500);this.firstButton.animate({left:this.minLeft},500);this.rightBotton.animate({right:this.right},500);this.lastButton.animate({right:this.minRight},500)},show:function(){this.leftBotton.css({display:"block"});this.firstButton.css({display:"block"});this.rightBotton.css({display:"block"});this.lastButton.css({display:"block"})},hide:function(){this.leftBotton.css({display:"none"});this.firstButton.css({display:"none"});this.rightBotton.css({display:"none"});this.lastButton.css({display:"none"})},onResize:function(t,i){},initEvents:function(){this.leftBottonIcon.asImageButton();this.rightBottonIcon.asImageButton();this.leftBotton.bind(_event._click,function(){rightToLeft?nextPageFun():previousPageFun();return!1});this.firstButton.bind(_event._click,function(){rightToLeft?lastPageFun():firstPageFun();return!1});this.rightBotton.bind(_event._click,function(){rightToLeft?previousPageFun():nextPageFun();return!1});this.lastButton.bind(_event._click,function(){rightToLeft?firstPageFun():lastPageFun();return!1});this.firstButton.bind(_event._enter,function(){$(this).css({opacity:"1"});$(this).scale(2)});this.firstButton.bind(_event._leave,function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.firstButton.bind(_event._end,function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.lastButton.bind(_event._enter,function(){$(this).css({opacity:"1"});$(this).scale(2)});this.lastButton.bind(_event._leave,function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.lastButton.bind(_event._end,function(){$(this).css({opacity:"0.2"});$(this).scale(1)})}}),FoldingMenu=Class({width:0,height:0,items:null,visible:!1,create:function(t){this.home=t;this.width=Math.min(t.width()-65,340);this.height=t.height();this.items=[];this.mainColor=bookConfig.toolbarColor;this.menu=$("<div id='folding menu'></div>");this.menu.insertBefore(this.home);this.initStyle()},initStyle:function(){this.menu.css({position:"absolute",left:-this.width+"px",top:"0px",width:this.width+"px",height:this.height+"px","background-color":colorDiv(this.mainColor,20),overflow:"hidden"})},show:function(t){global.toolBar&&global.toolBar.visible&&!this.visible&&(t||(t=400),this.animate(t),this.visible=!0,BookInfo.getBook().addSearchHighlight())},hide:function(){this.visible&&(this.animate(0),this.visible=!1,BookInfo.getBook().clearSearchHighlight())},animate_bak:function(t,i){var e=0,o=t,s=(i-t)/10,n=Date.now(),h=function(){this.width=o+=s;this.menu.css("width",o+"px");!0===$.browser.msie&&9>$.browser.version?this.home.css("left",o+"px"):this.home.transform(o,0);if(10>++e){var t=Date.now(),i=Math.max(1,25-(t-n));n=t;h.delay(this,i)}};h.delay(this,25)},animate:function(t){this.animating=!0;animateOnce(this.menu,cssTranslate(this.menu,t,0),.2,function(){this.animating=!1}.bind(this));animateOnce(this.home,cssTranslate(this.home,t,0),.2,function(){this.animating=!1}.bind(this))},showOrHide:function(t){!0===this.visible?this.hide():this.show(t)},addMenuItem:function(t,i,e,o,s){t=new FoldingMenuItem(this.menu,t,o);t.setCaption(i?i:"");t.setIcon(e?e:"");t.title.bind(_event._end,function(t){if(t&&(!0!==this.animating||$.browser.msie)){if(void 0!==s)s();else{var i=t.currentTarget?t.currentTarget.id:"";""!==i&&(this.getItemById(i).isExpanded()?this.collapseItem(i):this.expandItem(i))}return stopEvent(t)}}.bind(this));this.items.push(t)},addLogoItem:function(t,i,e){t=new FoldingMenuItem(this.menu,t,!0,!0);t.setCaption("");t.setIcon(i?i:"");t.title.bind(_event._end,function(t){if(t&&(!0!==this.animating||$.browser.msie))return e&&window.open(e[0],e[1]),stopEvent(t)}.bind(this));this.items.push(t)},setTitleStyle:function(t){for(var i=0;i<this.items.length;i++)this.items[i].title().css(t)},resize:function(t,i){this.width=Math.min(t-65,340);this.height=i;this.menu.css({left:-this.width+"px",width:this.width+"px",height:this.height+"px"});$.browser.msie&&(this.menu.getOrigin=!1);this.menu.css(!0===this.visible?cssTranslate(this.menu,this.width,0):cssTranslate(this.menu,0,0));this.home.css(!0===this.visible?cssTranslate(this.home,this.width,0):cssTranslate(this.home,0,0));for(var e=0;e<this.items.length;e++){var o=this.items[e];o.isExpanded()&&o.resize(this.height)}},getItemById:function(t){for(var i=0;i<this.items.length;i++)if(this.items[i].id===t)return this.items[i]},getItemBody:function(t){return this.getItemById(t).body},expandItem:function(t){void 0!=this.currentItem&&void 0!=this.currentItem.id&&t!==this.currentItem.id&&this.collapseItem(this.currentItem.id);this.expandId(t)},expandId:function(t){for(var i=0;i<this.items.length;i++){var e=this.items[i];this.items[i].id===t?(e.expand(this.height),this.currentItem=this.items[i]):(e.collapse(),e.container.css({height:"0px"}))}},getExpandHeight_bak:function(t){for(var i=0,e=0,o=e=0;o<this.items.length;o++)if(e=this.items[o].title.height(),i+=e,e=o==this.items.length-1?e:0,o===t)return this.height-i+e},collapseItem:function(t){for(var i=0;i<this.items.length;i++){var e=this.items[i];e.id===t?this.items[i].collapse():e.container.css({height:e.title.height()+"px"})}}}),FoldingMenuItem=Class({expanded:!1,create:function(t,i,e,o){this.id=i;this.noExpand=e;this.isLogo=o;this.container=$("<div style='overflow:hidden;'></div>");this.title=$("<div id='"+i+"'></div>");this.body=$("<div style='overflow:hidden;'></div>");this.mainColor=colorDiv(bookConfig.toolbarColor,20);t.append(this.container);this.container.append(this.title);this.container.append(this.body);this.initStyle()},initStyle:function(){this.container.css({position:"relative",width:"100%"});this.body.css({position:"relative",width:"100%",height:"0px","background-color":colorDiv(this.mainColor,10)});this.title.css({"background-color":this.mainColor,"border-bottom":"1px solid "+colorDiv(this.mainColor,10),"border-top":"1px solid "+colorAdd(this.mainColor,10)});setAnimation(this.container,.2);setAnimation(this.body,.2);this.initTitle()},initTitle:function(){this.title.addClass("menuTitle");this.titleState=$("<div class='menuTitleState'></div>");this.titleState.cssSprite(phoneIconsURL[0],"collapsed",24,24,phoneIconInfo);this.titleIcon=!0===this.isLogo?$("<div></div>"):$("<div class='menuTitleIcon'></div>");this.titleCaption=$("<div class='menuTitleCaption'></div>");bookConfig.iconFontColor&&this.titleCaption.css("color",bookConfig.iconFontColor);this.title.append(this.titleIcon);this.title.append(this.titleCaption);!0!==this.noExpand&&this.title.append(this.titleState)},setIcon:function(t){if(""===t)this.titleIcon.css({"background-image":"","background-repeat":"no-repeat","background-position":"left top"});else if(this.isLogo)this.titleIcon.append("<img style='height:50px;' src='"+t+"'/>");else{this.titleIcon.css({background:colorAdd(this.mainColor,40)});var i=$("<div/>");i.cssSprite(phoneIconsURL[0],t,20,20,phoneIconInfo);this.titleIcon.append(i)}},setCaption:function(t){this.titleCaption.text(t)},expand:function(t){!1===this.expanded&&(this.expanded=!0,this.titleState.cssSprite(phoneIconsURL[0],"expanded",24,24,phoneIconInfo));this.resize(t)},resize:function(t){if(!1!==this.expanded){var i=t-this.title.height();this.container.css("height",t+"px");this.body.css("height",i+"px")}},collapse:function(){var t=this.title.height();this.container.css("height",t+"px");this.body.css("height","0px");this.expanded=!1;this.titleState.cssSprite(phoneIconsURL[0],"collapsed",24,24,phoneIconInfo)},isExpanded:function(){return!0===this.expanded}});Class("CodeBar",{create:function(t){if(this.visible=parseBool(bookConfig.QRCode)&&!isBelowIE9())this.background=$("<div class='printBar'></div>"),this.contentBox=$("<div class='printBG'></div>"),this.showing=!1,this.width=windowWidth,this.height=windowHeight,this.contentWidth=Math.min(windowWidth-60,windowHeight-60,310)+20,this.contentHeight=Math.min(windowWidth-60,windowHeight-60,310)+20+40,this.mainColor="#888888",this.background.css({height:this.height+"px",bottom:"0px"}),this.contentBox.css({height:this.contentHeight+"px",width:this.contentWidth+"px",left:(this.width-this.contentWidth)/2+"px"}),this.contentBox.css({top:(this.height-this.contentHeight)/2+"px"}),$(t).append(this.background),$(t).append(this.contentBox),this.titleBox=$("<div></div>"),this.titleBox.css({width:this.contentWidth-6+"px",height:"20px",left:"3px",bottom:"10px",position:"absolute","line-height":"20px"}),this.titleBox.css({"vertical-align":"middle","text-align":"center",color:"#625715","text-shadow":"1px 1px 1px #ffffff"}),this.titleBox.css({background:"#edaa1d","border-radius":"10px",border:"#ffffff solid 1px"}),this.titleBox.html("<b>Scan QR code</b>"),this.scanBox=$("<div></div>"),this.scanBox.css({position:"absolute","border-radius":"5px"}),this.scanBox.css({width:this.contentWidth-80+"px",height:this.contentWidth-80+"px",background:"#ffffff",border:"#edaa1d solid 10px",left:"30px",top:"30px"}),this.contentBox.append(this.scanBox),this.closeButton=$("<div></div>"),this.closeButton.css({top:"0px",right:"0px",position:"absolute"}),this.closeButton.append($("<img src='"+uiBaseURL+"close.png'/>")),$(this.contentBox).append(this.closeButton),this.fillImage(),this.initEvent(),this.background.css({display:"none"}),this.contentBox.css({display:"none"})},onResize:function(){this.visible&&(this.width=windowWidth,this.height=windowHeight,this.contentWidth=Math.min(windowWidth-60,windowHeight-60,310)+20,this.contentHeight=Math.min(windowWidth-60,windowHeight-60,310)+20+40,this.background.css({height:this.height+"px",bottom:"0px"}),this.contentBox.css({height:this.contentHeight+"px",width:this.contentWidth+"px",left:(this.width-this.contentWidth)/2+"px"}),this.contentBox.css({top:(this.height-this.contentHeight)/2+"px"}),this.titleBox.css({width:this.contentWidth-6+"px",height:"20px",left:"3px",bottom:"10px","line-height":"20px"}),this.scanBox.css({width:this.contentWidth-80+"px",height:this.contentWidth-80+"px",left:"30px",top:"30px"}),this.closeButton.css({top:"0px",right:"0px"}),this.scanBox.html(""),this.fillImage())},setPosition:function(t,i,e){this.visible&&(void 0==e&&(e=["left","top"]),$(this.background).css(e[0],t+"px"),$(this.background).css(e[1],i+"px"))},getShowStatu:function(){return this.showing},setShowStatu:function(t){this.showing=t},show:function(){this.visible&&($(this.background).css({display:"block"}),$(this.contentBox).fadeIn(500),this.showing=!0)},hide:function(){this.visible&&($(this.background).fadeOut(500),$(this.contentBox).fadeOut(500),this.showing=!1)},initEvent:function(){if(this.visible){var i=this;this.background.bind(_event._down,function(t){i.hide();i.showing=!1});this.closeButton.bind(_event._end,function(t){i.hide();i.showing=!1});this.closeButton.bind("mouseover",function(t){i.closeButton.css({cursor:"pointer"})})}},fillImage:function(){this.visible&&this.scanBox.qrcode({width:this.contentWidth-80,height:this.contentWidth-80,text:window.location.href})}});Class("QRButton",{create:function(t){if(this.visible=parseBool(bookConfig.QRCode)&&!isBelowIE9())this.button=$("<div id='qrcode'></div>"),this.button.qrcode({width:50,height:50,text:window.location.href}),this.button.css({width:"50px",height:"50px","z-index":"999",right:"0px",position:"absolute","image-redering":"pixelated"}),t.append(this.button),this.initEvent()},show:function(){this.visible&&this.button.show()},hide:function(){this.visible&&this.button.hide()},initEvent:function(){if(this.visible){var e=this;this.button.bind(_event._enter,function(t){$(this).css({opacity:"1"})});this.button.bind(_event._leave,function(t){$(this).css({opacity:"0.5"})});this.button.bind(_event._down,function(t){t=isTouch?t.originalEvent.touches:[t];e.drapable=!0;e.mouseDownPointX=t[0].pageX;e.mouseDownPointY=t[0].pageY;e.codePositionX=$(this).offset().left;e.codePositionY=$(this).offset().top;return e.codeMove=!1});this.button.bind(_event._end,function(t){!1==e.codeMove&&(QRcode.getShowStatu()?QRcode.hide():QRcode.show(),hideMoreBar());$(this).css({opacity:"0.5"});return e.drapable=!1});this.button.bind(_event._move,function(t){t=isTouch?t.originalEvent.touches:[t];if(e.drapable){var i=t[0].pageX-e.mouseDownPointX;t=t[0].pageY-e.mouseDownPointY;$(this).css({right:windowWidth-e.codePositionX-i-50+"px",top:e.codePositionY+t+"px"});if(1<Math.abs(i)||1<Math.abs(t))e.codeMove=!0}return!1})}}});var HTML5AdSlider=Class({create:function(t,i){i&&i.data&&0!=i.data.length&&(this.parent=t,this.options=i,this.data=i.data,this.interval=i.interval?i.interval:3e3,this.outerContainer=$("<div></div>"),this.container=$("<div class='adSlider'></div>"),this.dots=$("<div></div>"),this.getDefaultValue(),this.getImgs(),this.setDots(),this.setSLider(),this.initCss(),1<this.data.length&&this.outerContainer.append(this.dots),this.outerContainer.append(this.container),this.parent.append(this.outerContainer),this.setImgs(),this.autoPlay())},getDefaultValue:function(){this.timer=null;this.imgs=[];this.wappers=[];this.currentIndex=1;this.dotWidth=this.dotHeight=14;this.dotsWidth=0;this.dotMargin=5;this.moving=!1;this.left=this.options.paddingLeft;this.top=this.options.paddingTop;this.width=$(this.parent).width()-this.left-this.options.paddingRight;this.height=$(this.parent).height()-this.top-this.options.paddingBottom},initCss:function(){this.outerContainer.css({position:"absolute",overflow:"hidden",left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height,padding:"0",margin:"0"});this.container.css({position:"absolute",left:0,top:0,width:this.width*this.data.length+"px",height:this.height+"px",padding:"0",margin:"0"});this.dots.css({position:"absolute","text-align":"center",width:this.dotsWidth+"px","line-height":this.dotHeight+"px",height:this.dotHeight+"px",right:"20px",top:"20px","z-index":"2"})},resize:function(){this.width=this.parent.width()-this.options.paddingLeft-this.options.paddingRight;this.height=this.parent.height()-this.options.paddingTop-this.options.paddingBottom;this.container.css({width:this.width*this.data.length+"px",height:this.height,left:-(this.currentIndex-1)*this.width+"px",top:0});this.outerContainer.css({width:this.width,height:this.height,left:this.left+"px",top:this.top+"px"});this.dots.css({top:3*this.height/4+"px"});for(var t=0;t<this.imgs.length;t++){var i=this.imgs[t];this.setImgCss(i);i.css({position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+"px",left:this.imgLeft+"px",top:this.imgTop+"px"});this.wappers[t].find("a").css({width:this.imgWidth+"px",height:this.imgHeight+"px",left:this.imgLeft+"px",top:this.imgTop+"px"});this.wappers[t].css({position:"absolute",left:this.width*t+"px",top:0,width:this.width+"px",height:this.height+"px",padding:"0",margin:"0",overflow:"hidden"})}},setDots:function(){if(!(1>=this.data.length)){for(var t=0;t<this.data.length;t++)this.dotsWidth+=this.dotWidth+this.dotMargin,this.dot=$("<div>"+(t+1)+"</div>"),this.dot.css({position:"absolute","border-radius":"50%",border:"1px solid #cccccc",cursor:"pointer","text-align":"center",width:this.dotWidth+"px","line-height":this.dotHeight+"px",height:this.dotHeight,"font-family":"Arial, serif, Tahoma","font-size":"60%","background-color":"#eeeeee",left:(this.dotWidth+this.dotMargin)*t+"px",top:0,"z-index":2}),this.initDotEvent(this.dot),this.dots.append(this.dot);this.dots.css({width:this.dotsWidth})}},setSLider:function(){for(var t=0;t<this.imgs.length;t++)this.a=t<this.data.length?this.data[t].url?$("<a href="+this.getCorrectUrl(this.data[t].url)+' target="view_window"></a>'):$("<a></a>"):this.data[0].url?$("<a href="+this.getCorrectUrl(this.data[0].url)+' target="view_window"></a>'):$("<a></a>"),this.a.css({position:"absolute","z-index":"1",margin:"0px",padding:"0px"}),this.dataWrapper=$("<div class='AsSliderDataWrapper' wrapperNum="+(t+1)+"></div>"),this.dataWrapper.css({position:"absolute",left:this.width*t+"px",top:0,width:this.width+"px",height:this.height+"px",padding:"0",margin:"0",overflow:"hidden"}),this.dataWrapper.append(this.imgs[t],this.a),this.wappers.push(this.dataWrapper),this.container.append(this.dataWrapper)},getCorrectUrl:function(t){return getRealURL(t)},getImgs:function(){for(var t=0;t<this.data.length;t++)this.img=$("<img/>"),this.img.attr("src",this.data[t].src),this.imgs.push(this.img);this.img=$("<img/>");this.img.attr("src",this.data[0].src);this.imgs.push(this.img)},setImgs:function(){for(var t=0;t<this.imgs.length;t++){var i=this.imgs[t];i.on("load",function(t,i,e){return function(){t.setImgCss(i);i.css({position:"absolute",width:t.imgWidth+"px",height:t.imgHeight+"px",left:t.imgLeft+"px",top:t.imgTop+"px"});t.wappers[e].find("a").css({position:"absolute",width:t.imgWidth+"px",height:t.imgHeight+"px",left:t.imgLeft+"px",top:t.imgTop+"px"});t.wappers[e].css({position:"absolute",left:t.width*e+"px",top:0,width:t.width+"px",height:t.height+"px",padding:"0",margin:"0"})}}(this,i,t))}},setImgCss:function(t){this.imgWidth=t[0].naturalWidth;this.imgHeight=t[0].naturalHeight;this.pageRadio=this.width/this.height;this.naturalRadio=this.imgWidth/this.imgHeight;this.imgLeft=this.imgTop=0;this.naturalRadio>=this.pageRadio?(t=this.width/this.imgWidth,this.imgWidth=this.width,this.imgHeight*=t,this.imgTop=(this.height-this.imgHeight)/2,this.imgLeft=0):(t=this.height/this.imgHeight,this.imgHeight=this.height,this.imgWidth*=t,this.imgTop=0,this.imgLeft=(this.width-this.imgWidth)/2)},autoPlay:function(){1>=this.data.length||(this.timer=setInterval(function(){this.oneStep(this.currentIndex)}.bind(this),this.interval))},oneStep:function(t){this.moving||(this.moving=!0,this.dots.find("div").css({background:"#eee",color:"#333"}),this.container.animate({left:-this.width*(t-1)+"px"},this.options.effectDuration,function(){this.currentIndex==this.data.length+1&&(this.currentIndex=1,this.container.css({left:0}));this.currentIndex+=1;this.moving=!1}.bind(this)),t==this.data.length+1?$(this.dots).find("div:nth-child(1)").css({background:"#333",color:"#fff"}):$(this.dots).find("div:nth-child("+t+")").css({background:"#333",color:"#fff"}))},initDotEvent:function(i){i.bind("click",function(){clearInterval(this.timer);this.timer=null;var t=parseInt(i.html());this.moving||(this.oneStep(t),this.currentIndex=t);this.autoPlay()}.bind(this));i.bind("mouseenter",function(){i.css({opacity:"0.5"})}.bind(this));i.bind("mouseleave",function(){i.css({opacity:"1"})}.bind(this))}}),Annotation=Class({create:function(t,i,e,o){this.stepCookie=[""];this.index=i;this.scale=1;this.pageWidth=e||BookInfo.getBook().pageWidth;this.pageHeight=o||BookInfo.getBook().pageHeight;this.noteParent=t;this.containParent=t.parent();this.panelContainer=$("<div id='annotationPage"+i+"' class='panelContainer'></div>");this.canvasPanel=$("<canvas id='annotationCvsPanel"+i+"' class='annotationCvsPanel' width="+this.pageWidth+" height="+this.pageHeight+" ></canvas>");this.drawCanvas=$("<canvas id='annotationDraw"+i+"' class='annotationDraw' width="+this.pageWidth+" height="+this.pageHeight+" ></canvas>");this.panelContainer.append(this.canvasPanel).append(this.drawCanvas);this.ctx=this.canvasPanel[0].getContext("2d");this.drawCtx=this.drawCanvas[0].getContext("2d");this.eraserCircle=$("<div class='eraserCircle' style='z-index:5;position:absolute;display:none'></div>");this.panelContainer.append(this.eraserCircle);this.containParent.append(this.panelContainer);this.initCss();this.initEvent()},initCss:function(){this.panelContainer.css({"pointer-events":"none",position:"absolute","z-index":"5","-webkit-transform-origin":"0 0","-o-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0",width:this.pageWidth+"px",height:this.pageHeight+"px"});this.canvasPanel.css({position:"absolute","z-index":"0"});this.drawCanvas.css({position:"absolute","z-index":"0"})},onResize:function(t,i,e){this.scale=e;this.pageWidth=t;this.pageHeight=i;this.panelContainer.css({width:t+"px",height:i+"px"});this.canvasPanel[0].width=t;this.canvasPanel[0].height=i;this.drawCanvas[0].width=t;this.drawCanvas[0].height=i;if(global.annotationCookie&&(e=global.annotationCookie.getCookie("Note"))&&(e=e[this.index-1]))for(var o in e)this.noteParent.find("#"+o).css({left:e[o].position.x*t+"px",top:e[o].position.y*i+"px",width:e[o].size*t+"px",height:e[o].size*t+"px"}),this.noteParent.find("#"+o).find(".noteBox").css({top:e[o].size*t+"px"})},initEvent:function(){this.eraserCircle.bind("pointerdown ",function(t){t.preventDefault()}.bind(this));this.panelContainer.bind("pointerdown mousedown mouseup mouseover mousemove",function(t){t.stopPropagation()}.bind(this));this.panelContainer.bind("touchstart touchend touchmove",function(t){t.stopPropagation();t.preventDefault()}.bind(this));this.drawCanvas.bind("pointerdown ",function(t){t.stopPropagation()}.bind(this));this.canvasPanel.bind("pointerdown ",function(t){t.stopPropagation()}.bind(this));global.annotationPannel&&(this.panelContainer.bind(_event._move,function(t){this.panelContainer.css({cursor:"auto"});switch(global.annotationPannel.selectCase){case AnnotationPannel.NOTE:this.panelContainer.css({cursor:"url("+uiBaseURL+"note.png),auto"});break;case AnnotationPannel.PEN:this.panelContainer.css({cursor:"url("+uiBaseURL+"note_edit.png),auto"});break;case AnnotationPannel.RECT:this.panelContainer.css({cursor:"url("+uiBaseURL+"note_edit.png),auto"});break;case AnnotationPannel.ROUND:this.panelContainer.css({cursor:"url("+uiBaseURL+"note_edit.png),auto"})}}.bind(this)),this.panelContainer.bind(_event._up,function(t){switch(global.annotationPannel.selectCase){case AnnotationPannel.NOTE:t=this.getPosition(t,28-this.pageWidth/24,28-this.pageHeight/24,"note");var i=new Date,e=i.toLocaleDateString()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds(),i="id"+i.getTime();t={index:this.index-1,type:"note",id:i,time:e,size:1/12,position:{x:t.x/this.pageWidth,y:t.y/this.pageHeight},value:""};new AnnotationAddNote(this.noteParent,t,!0);this.noteParent.css({display:"block"});global.annotationCookie.saveNoteCookie("Note",this.index-1,i,t);global.annotationPannel.selectCase=AnnotationPannel.NONE;global.annotationPannel.setPanelIndex(0,0,"none");global.annotationPannel.note.css({background:"transparent",border:"1px solid transparent"})}}.bind(this)),this.penPaint(this.drawCanvas),this.penPaint(this.canvasPanel))},penPaint:function(t){var e=0,o=0;t.bind(_event._down,function(t){global.annotationCookie.currentSteps=[];2==global.annotationPannel.selectCase||3==global.annotationPannel.selectCase||4==global.annotationPannel.selectCase?(e=2,o=16):o=e=-4;if(isPhone()||isPad())o=e=0;t=this.getPosition(t,e,o);if(5==global.annotationPannel.selectCase){var i={x:t.x/this.pageWidth,y:t.y/this.pageHeight,lineWidth:global.annotationPannel.inputEraserWidth.val()/this.pageWidth};this.showEraser(t.x,t.y,"block");global.annotationCookie.currentSteps.push(i)}this.X=t.x;this.Y=t.y;this.noLeaveCvs=this.isDown=!0}.bind(this));t.bind(_event._up,function(t){this.eraserCircle.css({display:"none"});this.noLeaveCvs&&(this.drawCaseEvent(t),this.isDown=this.noLeaveCvs=!1)}.bind(this));t.bind("mouseleave",function(t){this.noLeaveCvs=!1;if(this.isDown&&this.lastPos){this.isDown=!1;switch(global.annotationPannel.selectCase){case 2:global.annotationCookie.setAllAnnoSteps(2,this.index-1,global.annotationCookie.currentSteps);global.annotationCookie.stepIndex+=1;break;case 3:t={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:this.lastPos.x/this.pageWidth,y:this.lastPos.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.setAllAnnoSteps(3,this.index-1,[t]);global.annotationCookie.stepIndex+=1;this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.drawRect(this.ctx,this.lastPos.x,this.lastPos.y);break;case 4:t={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:this.lastPos.x/this.pageWidth,y:this.lastPos.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.setAllAnnoSteps(4,this.index-1,[t]);global.annotationCookie.stepIndex+=1;this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.drawEllipse(this.ctx,this.lastPos.x,this.lastPos.y);break;case 5:global.annotationCookie.setAllAnnoSteps(5,this.index-1,global.annotationCookie.currentSteps),global.annotationCookie.stepIndex+=1}this.lastPos=void 0}}.bind(this));t.bind(_event._move,function(t){if(this.isDown&&this.noLeaveCvs)switch(t=this.getPosition(t,e,o),global.annotationPannel.selectCase){case AnnotationPannel.PEN:var i={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:t.x/this.pageWidth,y:t.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/this.pageWidth,opacity:global.annotationPannel.inputAlpha.val()/100,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.currentSteps.push(i);this.drawLine(t.x,t.y);this.noLeaveCvs&&(this.lastPos=t);break;case AnnotationPannel.ERASER:this.showEraser(t.x,t.y,"block");i={x:t.x/this.pageWidth,y:t.y/this.pageHeight,lineWidth:global.annotationPannel.inputEraserWidth.val()/this.pageWidth};global.annotationCookie.currentSteps.push(i);this.eraserClear(t.x,t.y);this.noLeaveCvs&&(this.lastPos=t);break;case AnnotationPannel.RECT:this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.drawRect(this.drawCtx,t.x,t.y);this.noLeaveCvs&&(this.lastPos=t);break;case AnnotationPannel.ROUND:this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight),this.drawEllipse(this.drawCtx,t.x,t.y),this.noLeaveCvs&&(this.lastPos=t)}}.bind(this))},drawCaseEvent:function(t){switch(global.annotationPannel.selectCase){case 2:t=this.getPosition(t,2,16);global.annotationCookie.setAllAnnoSteps(2,this.index-1,global.annotationCookie.currentSteps);this.X=t.x;this.Y=t.y;global.annotationCookie.stepIndex+=1;break;case 3:t=this.getPosition(t,2,16);var i={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:t.x/this.pageWidth,y:t.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.setAllAnnoSteps(3,this.index-1,[i]);this.drawRect(this.ctx,t.x,t.y);this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.X=t.x;this.Y=t.y;global.annotationCookie.stepIndex+=1;break;case 4:t=this.getPosition(t,2,16);i={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:t.x/this.pageWidth,y:t.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.setAllAnnoSteps(4,this.index-1,[i]);this.drawEllipse(this.ctx,t.x,t.y);this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.X=t.x;this.Y=t.y;global.annotationCookie.stepIndex+=1;break;case 5:global.annotationCookie.setAllAnnoSteps(5,this.index-1,global.annotationCookie.currentSteps),global.annotationCookie.stepIndex+=1}},getPosition:function(t,i,e,o){if(isPad()||isPhone())e=i=0,"note"==o&&(i=-this.pageWidth/25,e=-this.pageHeight/28);o=BookInfo.getBook().showPage.parameters.toScale||1;t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t];var s=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop;i=(t[0].pageX||t[0].clientX+s)-this.panelContainer.offset().left+i;t=(t[0].pageY||t[0].clientY+n)-this.panelContainer.offset().top+e;return{x:i/o,y:t/o}},showEraser:function(t,i){var e=global.annotationPannel.inputEraserWidth.val();this.eraserCircle.css({"pointer-events":"none",display:"block",background:"rgba(33,33,33,0.4)",width:e+"px",height:e+"px",left:t+"px",top:i+"px"})},drawLine:function(t,i){this.ctx.beginPath();.85<=global.annotationPannel.inputAlpha.val()/100?this.ctx.lineCap="round":this.ctx.lineCap="butt";this.ctx.lineJoin="round";this.ctx.lineWidth=global.annotationPannel.inputWidth.val();this.ctx.strokeStyle=Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100);this.ctx.moveTo(this.X,this.Y);this.ctx.lineTo(t,i);this.ctx.stroke();this.X=t;this.Y=i},drawRect:function(t,i,e){t.beginPath();t.lineCap="round";t.lineJoin="round";t.lineWidth=global.annotationPannel.inputWidth.val();t.strokeStyle=Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100);var o=this.X,s=this.Y;0>i-this.X&&(o=i);0>e-this.Y&&(s=e);t.moveTo(o,s);t.strokeRect(o,s,Math.abs(i-this.X),Math.abs(e-this.Y));t.stroke()},drawEllipse:function(t,i,e){i=i/2+this.X/2;e=e/2+this.Y/2;var o=Math.abs(i-this.X),s=Math.abs(e-this.Y);t.lineCap="round";t.lineJoin="round";t.lineWidth=global.annotationPannel.inputWidth.val();t.strokeStyle=Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100);t.save();var n=o>s?o:s,o=o/n,s=s/n;t.scale(o,s);t.beginPath();t.arc(i/o,e/s,n,0,2*Math.PI,!1);t.closePath();t.restore();t.stroke()},eraserClear:function(t,i){this.ctx.beginPath();this.ctx.stroke();this.ctx.clearRect(this.X,this.Y,global.annotationPannel.inputEraserWidth.val(),global.annotationPannel.inputEraserWidth.val());this.X=t;this.Y=i},clearCvs:function(){this.ctx.clearRect(0,0,this.pageWidth,this.pageHeight)}}),AnnotationCookie=Class({create:function(t,i,e){this.parent=t;this.bookType=BookInfo.getBookType();this.pageWidth=i;this.pageHeight=e;this.defaultWidth=i;this.scale=this.tranScale=1;this.stepIndex=0;this.currentSteps=[];this.allAnnoSteps=[]},getCookieName:function(t){return window.location.href.replace(window.location.hash,"")+t},getCookie:function(t){t=this.getCookieName(t);if(window.localStorage.getItem(t))return JSON.parse(window.localStorage.getItem(t))},hasCvsCookie:function(t){for(var i=["Cookie"],e=0;e<i.length;e++){var o=this.getCookie(i[e]);if(o&&o.length&&o[t]&&o[t].length)return!0}return!1},saveCookie:function(){var t=window.location.href.replace(window.location.hash,"")+"Cookie",i=this.getCookie("Cookie");i||(i=[]);for(var e=0;e<this.stepIndex;e++){var o=this.allAnnoSteps[e].index;if(this.isArray(o))for(var s=0;s<o.length;s++)i[o[s]]=[];else i[o]||(i[o]=[]),i[o].push(this.allAnnoSteps[e])}i=JSON.stringify(i);window.localStorage.setItem(t,i)},repaintCookie:function(t,i){this.clearUnsaveCookie();if(BookInfo.getBook().showPage.find("#annotationCvsPanel"+(i+1))[0]){var e=["Note","Cookie"];BookInfo.getBook().showPage.find("#annotationCvsPanel"+(i+1))[0].getContext("2d").clearRect(0,0,this.pageWidth,this.pageHeight);for(var o=0;o<e.length;o++){var s=this.getCookie(e[o]);if(s&&s[i])switch(e[o]){case"Note":if(!t)break;s[i]&&Object.keys(s[i]).length&&t.css({display:"block"});for(var n in s[i]){var h=s[i][n],a=h.position.x*this.pageWidth,r=h.position.y*this.pageHeight;t.find("#"+n)[0]?(t.find("#"+n).css({"font-size":14/this.scale+"px",left:a/this.scale+"px",top:r/this.scale+"px",width:h.size*this.pageWidth/this.scale+"px",height:h.size*this.pageWidth/this.scale+"px"}),t.find("#"+n).find(".noteBox").css({top:h.size*this.pageWidth/this.scale+"px","-webkit-transform":"scale("+this.tranScale+")","-o-transform":"scale("+this.tranScale+")","-moz-transform":"scale("+this.tranScale+")","-ms-transform":"scale("+this.tranScale+")",transform:"scale("+this.tranScale+")","-webkit-transform-origin":"0 0","-o-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0"})):new AnnotationAddNote(t,s[i][n])}break;case"Cookie":if(!s[i])return;this.putCookie(i,s[i])}}}},putCookie:function(t,i){if(BookInfo.getBook().showPage.find("#annotationCvsPanel"+(t+1))[0]){var e=BookInfo.getBook().showPage.find("#annotationCvsPanel"+(t+1))[0].getContext("2d");if(i)for(var o=0;o<i.length;o++){var s=i[o].cookie,n=i[o].type,e=BookInfo.getBook().showPage.find("#annotationCvsPanel"+(t+1))[0].getContext("2d");if("Clear"==n)for(var h=BookInfo.getCurrentPages(),a=0;a<h.length;a++){e=BookInfo.getBook().showPage.find("#annotationCvsPanel"+h[a])[0];if(!e)return;e=e.getContext("2d");e.clearRect(0,0,this.pageWidth,this.pageHeight)}for(h=0;h<s.length;h++)switch(n){case"Pen":this.drawLine(e,s[h]);break;case"Rect":this.drawRect(e,s[h]);break;case"Round":this.drawRound(e,s[h]);break;case"Eraser":this.drawClear(e,s[h])}}}},stepPaint:function(t,i,e){if("Clear"!=t)var o=BookInfo.getBook().showPage.find("#annotationCvsPanel"+(i+1))[0].getContext("2d");for(var s=0;s<e.length;s++)switch(t){case"Pen":this.drawLine(o,e[s]);break;case"Rect":this.drawRect(o,e[s]);break;case"Round":this.drawRound(o,e[s]);break;case"Eraser":this.drawClear(o,e[s]);break;case"Clear":for(var n=0;n<i.length;n++)o=BookInfo.getBook().showPage.find("#annotationCvsPanel"+(i[n]+1))[0].getContext("2d"),o.clearRect(0,0,this.pageWidth,this.pageHeight)}},repaintSteps:function(){if(this.allAnnoSteps.length){for(var t=BookInfo.getCurrentPages(),i=0;i<t.length;i++)BookInfo.getBook().showPage.find("#annotationCvsPanel"+t[i])[0].getContext("2d").clearRect(0,0,this.pageWidth,this.pageHeight),this.hasCvsCookie(t[i]-1)&&this.putCookie(t[i]-1,this.getCookie("Cookie")[t[i]-1]);for(t=0;t<this.stepIndex;t++)this.stepPaint(this.allAnnoSteps[t].type,this.allAnnoSteps[t].index,this.allAnnoSteps[t].cookie)}},clearUnsaveCookie:function(){this.stepIndex=0;this.currentSteps=[];this.allAnnoSteps=[]},deleteNoteCookie:function(t,i,e){var o=this.getCookieName(t);t=this.getCookie(t);delete t[i][e];Object.keys(t[i]).length?(t=JSON.stringify(t),window.localStorage.setItem(o,t)):t.length?(t=JSON.stringify(t),window.localStorage.setItem(o,t)):window.localStorage.removeItem(o)},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},drawRound:function(t,i){if(this.isFullConfig(i)){var e=(i.x/2+i.startX/2)*this.pageWidth,o=(i.y/2+i.startY/2)*this.pageHeight,s=Math.abs(e-i.startX*this.pageWidth),n=Math.abs(o-i.startY*this.pageHeight);t.lineCap="round";t.lineJoin="round";t.lineWidth=parseInt(i.lineWidth*this.pageWidth);t.strokeStyle=i.color;t.save();var h=s>n?s:n,s=s/h,n=n/h;t.scale(s,n);t.beginPath();t.arc(e/s,o/n,h,0,2*Math.PI,!1);t.closePath();t.restore();t.stroke()}},drawRect:function(t,i){if(this.isFullConfig(i)){t.beginPath();t.lineCap="round";t.lineJoin="round";t.lineWidth=i.lineWidth*this.pageWidth;t.strokeStyle=i.color;var e=i.startX*this.pageWidth,o=i.startY*this.pageHeight;0>i.x-i.startX&&(e=i.x*this.pageWidth);0>i.y-i.startY&&(o=i.y*this.pageHeight);t.moveTo(e,o);t.strokeRect(e,o,Math.abs(i.x-i.startX)*this.pageWidth,Math.abs(i.y-i.startY)*this.pageHeight);t.stroke()}},drawLine:function(t,i){this.isFullConfig(i)&&(t.lineCap=.85<=i.opacity?"round":"butt",t.lineJoin="round",t.lineWidth=i.lineWidth*this.pageWidth,t.strokeStyle=i.color,t.beginPath(),t.moveTo(i.startX*this.pageWidth,i.startY*this.pageHeight),t.lineTo(i.x*this.pageWidth,i.y*this.pageHeight),t.stroke(),t.closePath())},drawClear:function(t,i){t&&i.x&&i.y&&i.lineWidth&&(t.beginPath(),t.clearRect(i.x*this.pageWidth,i.y*this.pageHeight,i.lineWidth*this.pageWidth,i.lineWidth*this.pageWidth),t.stroke(),t.closePath())},isFullConfig:function(t){return t&&t.startX&&t.startY&&t.x&&t.y&&t.lineWidth&&t.color},onResize:function(t,i,e){this.scale=e;this.tranScale=t/this.defaultWidth;this.pageWidth=t;this.pageHeight=i},setAllAnnoSteps:function(t,i,e){this.allAnnoSteps.length>this.stepIndex&&(this.allAnnoSteps.length=this.stepIndex);switch(t){case 2:this.allAnnoSteps.push({type:"Pen",index:i,cookie:e});break;case 3:this.allAnnoSteps.push({type:"Rect",index:i,cookie:e});break;case 4:this.allAnnoSteps.push({type:"Round",index:i,cookie:e});break;case 5:this.allAnnoSteps.push({type:"Eraser",index:i,cookie:e});break;case 11:this.allAnnoSteps.push({type:"Clear",index:i,cookie:e})}},saveNoteCookie:function(t,i,e,o){var s=this.getCookieName(t);t=this.getCookie(t);var n={};t||(t=[]);t[i]||(t[i]={});n=t[i];n[e]=o;t=JSON.stringify(t);window.localStorage.setItem(s,t)}}),CustomMunu=Class({create:function(t){this.parent=t;this.buttons=new ObjectPool;this.container=$("<div class='customMunu'></div>");this.initButtons();this.buttons.each(function(t){t.setCallback(this.afterButtonClick.bind(this))}.bind(this));this.parent.append(this.container);this.initBtn();this.initCss();this.initEvent()},initButtons:function(){bookConfig.AnnotationButtonVisible&&(this.buttons.add(new AnnotationButton),this.annoBtn=this.buttons.find("annotation").get(0).$button);bookConfig.PrintButtonVisible&&(this.buttons.add(new PrintButton),this.printBtn=this.buttons.find("print").get(0).$button);bookConfig.ShareButtonVisible&&(this.buttons.add(new ShareButton),this.shareBtn=this.buttons.find("share").get(0).$button);bookConfig.ZoomButtonVisible&&(this.buttons.add(new MunuZoomButton),this.zoomBtn=this.buttons.find("zoom").get(0).$button);bookConfig.FullscreenButtonVisible&&(this.buttons.add(new MunuFullscreenButton),this.fullBtn=this.buttons.find("full").get(0).$button);bookConfig.TableOfContentButtonVisible&&(this.buttons.add(new TableOfContentButton),this.tableButton=this.buttons.find("table").get(0).$button);bookConfig.BookMarkButtonVisible&&(this.buttons.add(new BookmarkButton),this.tableButton=this.buttons.find("bookmark").get(0).$button);bookConfig.ThumbnailsButtonVisible&&(this.buttons.add(new ThumbnailButton),this.tableButton=this.buttons.find("thumbnail").get(0).$button)},afterButtonClick:function(t){t.$button.find("img").changeButtonColor("#333333");t.$caption.css({color:"#333"});t.$button.find("img").css({width:"16px",height:"16px",float:"left",margin:"10px"});this.hide()},initBtn:function(){for(var t=0;t<this.buttons.length;t++){var i=this.buttons.objects[t],e=i.$button.find("img"),o=i.$caption;i.colorChanged=!1;e.changeButtonColor("#333333");this.setBtnCss(i.$button,e,o);this.initBtnEvent(i.$button);i.addTo(this.container)}},setBtnCss:function(t,i,e){t.removeAttr("title");t.css({opacity:"1",background:"#fff",float:"left",width:"200px",height:"36px","line-height":"36px"});i.css({width:"16px",height:"16px",float:"left",margin:"10px"});e.css({color:"#333"})},initCss:function(){this.container.css({display:"none",position:"absolute",width:"200px","font-family":"Microsoft YaHei,Arial,Helvetica,sans-serif,SimSun;","font-size":"14px","z-index":"1000","font-color":"#333","box-shadow":"0 0 6px #333","-webkit-box-shadow":"0 0 6px #333","-o-box-shadow":"0 0 6px #333","-moz-box-shadow":"0 0 6px #333","-ms-box-shadow":"0 0 6px #333",overflow:"hidden"})},onResize:function(t,i){},initBtnEvent:function(i){i.bind("mouseenter",function(t){t.stopPropagation();i.css({background:"#eee"})}.bind(this));i.bind("mouseleave",function(t){t.stopPropagation();i.css({background:"#fff"})}.bind(this))},initEvent:function(){this.parent.bind("click",function(t){this.hide()}.bind(this))},show:function(t){if(t&&this.buttons.objects.length){t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t];var i=document.documentElement.scrollLeft||document.body.scrollLeft,e=document.documentElement.scrollTop||document.body.scrollTop,i=t[0].pageX||t[0].clientX+i;t=t[0].pageY||t[0].clientY+e;i>windowWidth-201&&(i=windowWidth-201);this.buttons.length&&t>windowHeight-36*this.buttons.length&&(t=windowHeight-36*this.buttons.length);this.container.css({left:i+"px",top:t+"px"});this.container.fadeIn()}},hide:function(){this.buttons.objects.length&&this.container.fadeOut()}}),NoteCookie=Class({statics:{noteCookie:function(t){void 0==this._noteCookie&&(this._noteCookie=new NoteCookie(t));return this._noteCookie}},create:function(t){this.noteImgs={};this.rowObjs={};this.noteTexts={};this.svgObjs={};this.notes=[];this.cookieName=window.location.href.replace(window.location.hash,"")+"NoteCookie";this.rows=[];this.noteImgContainers={};this.showFlag=!1;this.container=t;this.address=uiBaseURL;this.noteButtonIsShow=!0;this.createNote(t);this.bindEvents()},createNote:function(b){var c=this;this.note=$("<div class='noteCookie-note'></div>").css({left:"40%"}).appendTo(b).hide();this.noteTitle=$("<div class='noteCookie-noteTitle'></div>").append($("<span class='noteCookie-noteTitle-text'></span>").html("Notes")).appendTo(this.note);this.noteTitleShowBtn=$("<div class='noteCookie-noteTitle-showBtn'></div>").css({right:32}).attr("title","Minimize").append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"note_narrow.png")).appendTo(this.noteTitle);this.noteTitleCloseBtn=$("<div class='noteCookie-noteTitle-closeBtn'></div>").css({right:3}).attr("title","Close").append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"note_close.png")).appendTo(this.noteTitle);this.noteButton=$("<div class='noteCookie-noteButton'></div>").appendTo(this.note);var d=$("<div style='position: relative;width: 100%;height: 158px;'></div>").appendTo(this.noteButton);this.noteBottomTop=$("<div class='noteCookie-noteButton-top'></div>").appendTo(d);this.inputText=$("<textarea class='noteCookie-noteButton-inputText'></textarea>").appendTo(this.noteBottomTop);this.addBtn=$("<div class='noteCookie-noteButton-addBtn'></div>").css({left:10}).html("Add").appendTo(this.noteBottomTop);this.removeAllBtn=$("<div class='noteCookie-noteButton-removeAllBtn'></div>").css({left:"auto",right:20}).html("Remove All").appendTo(this.noteBottomTop);this.noteLists=$("<div class='noteCookie-noteList'></div>").appendTo(this.noteButton);var d=$("<div class='noteCookie-noteTable-row-th'></div>"),f=$("<span class='noteCookie-noteTable-cellLeft-th'></span>").html("Page"),g=$("<div class='noteCookie-noteTable-cellRight-th'></div>");g.append($("<div style='position: absolute;width: 1px;height: 22px;left: 0px;top: 3px;background-color: #FFFFFF;'></div>")).append($("<span style='position: absolute;width: 319px;height: 100%;left: 1px;text-indent: 6px;'></span>").html("Title")).append($("<div style='position: absolute;width: 1px;height: 22px;left: auto;right: 89px;top: 3px;background-color: #FFFFFF;'></div>")).append($("<span style='position: absolute;width: 34px;height: 100%;left: auto;right: 55px;text-indent: 4px;'></span>").html("Edit")).append($("<div style='position: absolute;width: 1px;height: 22px;left: auto;right: 54px;top: 3px;background-color: #FFFFFF;'></div>")).append($("<span style='position: absolute;width: 54px;height: 100%;left: auto;right: 0px;text-indent: 4px;'></span>").html("Delete"));d.append(f).append(g);this.noteLists.append(d);this.noteTable=$("<div class='noteCookie-noteTable'></div>").css({maxHeight:188}).appendTo(this.noteLists);this.noteTableInner=$("<div class='noteCookie-noteTable-inner'></div>").appendTo(this.noteTable);isTouch||this.note.transition3D();this.createScrollBar(this.noteTable);try{var h=this.getLocalStorage(this.cookieName),k=eval(h);if(k)for(this.downJSonArrByKey(k,"page"),h=0;h<k.length;h++)this.addListData($.extend(k[h],{firstDown:!0}))}catch(l){}for(h=0;h<this.rows.length;h++)this.rows[h].rowObj.css({backgroundColor:0==h%2?"":"#bababa"});this.scrollBarShowHide();var m,n;this.noteTitle.on("mousedown touchstart",function(t){t.preventDefault();t.stopPropagation();t=t.originalEvent.touches?t.originalEvent.touches[0]:t;m=t.clientX-c.note.position().left;n=t.clientY-c.note.position().top;b.add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).on("mousemove.noteMove touchmove.noteMove",function(t){t.preventDefault();t.stopPropagation();c.noteTitle.css({cursor:"move"});t=t.originalEvent.touches?t.originalEvent.touches[0]:t;c.note.css({left:t.clientX-m,top:t.clientY-n})});b.on("mouseup.noteMove touchend.noteMove",function(t){t.preventDefault();t.stopPropagation();c.noteTitle.css({cursor:"default"});b.add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).off("mousemove.noteMove touchmove.noteMove");b.off("mouseup.noteMove touchend.noteMove")});return!1})},isNoteListShowHide:function(){0<this.noteTableInner.children("div").length?this.noteLists.show():this.noteLists.hide()},updateListDataText:function(t,i){var e=this.noteTexts[t],o=this.noteImgs[t].find(".noteCookie-eachNote-img"),e=e.find(".noteCookie-eachNote-textList-text");o.attr("title",i);e.val(i)},updateNoteImgText:function(t,i){this.rowObjs[t].find(".noteCookie-noteTable-cellRight-text").val(i)},deleteListData:function(t){var i=this.noteTexts[t],e=this.svgObjs[t];this.noteImgs[t].remove();i.remove();e.remove();delete this.noteImgs[t];delete this.rowObjs[t];delete this.noteTexts[t];delete this.svgObjs[t]},deleteNoteImg:function(t){this.rowObjs[t].remove();delete this.noteImgs[t];delete this.rowObjs[t]},revertNoteImgText:function(t){var i=this.noteTexts[t].find(".noteCookie-eachNote-textList-text");t=this.rowObjs[t].find(".noteCookie-noteTable-cellRight-text");i.val(t.val())},addListData:function(t){var o=this,s=!0,n=$("<div class='noteCookie-noteTable-row' style='position: relative;cursor: pointer;'></div>").css({height:28}).attr("data-key",t.key).attr("data-page",t.page).append($("<span class='noteCookie-noteTable-cellLeft'></span>").html(t.page)).appendTo(o.noteTableInner),i=$("<span class='noteCookie-noteTable-cellRight' style=' position: absolute;width: 410px;height: 100%;left: 54px;z-index: 2;'></span>").appendTo(n),h=$("<input class='noteCookie-noteTable-cellRight-text' disabled='true'/>").attr("disabled",s).val(t.value).appendTo(i),a=$("<div class='noteCookie-noteTable-cellRight-edit'></div>").css({right:60}).attr("title","Edit").append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",o.address+"note_edit.png")).appendTo(i);$("<div class='noteCookie-noteTable-cellRight-del'></div>").css({right:15}).attr("title","Delete").append($("<img style='margin-left: 0px;margin-top: 3px;'/>").attr("src",o.address+"note_del.png")).appendTo(i).on("click touchend",function(t){n.remove();var i=n.attr("data-key");o.deleteListData(i);o.delArrayOrderKey(o.rows,i);o.delArrayOrderKey(o.notes,i);o.addLocalStorage(o.cookieName,o.parseJSONArrayToString(o.notes));for(i=0;i<o.rows.length;i++)o.rows[i].rowObj.css({backgroundColor:0==i%2?"":"#bababa"});o.scrollBarShowHide();t.preventDefault();t.stopPropagation();return!1});n.on("click touchend",function(t){gotoPageFun($(this).attr("data-page"))});a.on("click touchend",function(t){if(s)s=!1,h.css({backgroundColor:"#ffffff",color:"#000000"}),a.children("img").attr("src",o.address+"note_save.png"),h.attr("disabled",s),h[0].focus(),a.attr("title","Save");else{s=!0;h.css({backgroundColor:"transparent",color:"#1a1a1a"});h.attr("disabled",s);a.attr("title","Edit");var i=h.val();a.children("img").attr("src",o.address+"note_edit.png");var e=n.attr("data-key");o.updateListDataText(e,i);o.updateArrayOrderKey(o.notes,e,{value:i});o.addLocalStorage(o.cookieName,o.parseJSONArrayToString(o.notes))}t.preventDefault();t.stopPropagation();return!1});o.rows.push($.extend(t,{rowObj:n}));o.rowObjs[t.key]=n;o.scrollBarShowHide();o.notes.push(t);o.addLocalStorage(o.cookieName,o.parseJSONArrayToString(o.notes))},addNoteImg:function(i,a){var r=this,e=!0,l=$("<div class='noteCookie-eachNote'></div>").attr("data-key",i.key).attr("data-page",i.page).css({left:""+i.left+"",top:""+i.top+""}).appendTo(a),g=$("<img class='noteCookie-eachNote-img' style=' position: absolute;width: 56px;height: 56px;z-index: 2;'/>").attr("src",r.address+"note.png").attr("title",i.value).attr("data-key",i.key).attr("data-page",i.page).appendTo(l);isTouch||l.transition3D();try{var d=$(document.createElementNS("http://www.w3.org/2000/svg","svg")).css({zIndex:140,position:"absolute"}).attr("class","noteCookie-eachNote-svg noteCookie-eachNote-svg"+i.page).appendTo(BookInfo.container()),o=$(document.createElementNS("http://www.w3.org/2000/svg","path")).css({fill:"#FFF4A1",stroke:"#C99F1D",strokeWidth:1}).appendTo(d)}catch(t){d=$("<svg></svg>").css({zIndex:140,position:"absolute"}).attr("class","noteCookie-eachNote-svg noteCookie-eachNote-svg"+i.page).appendTo(BookInfo.container()),o=$("<path></path>").css({fill:"#FFF4A1",stroke:"#C99F1D",strokeWidth:1}).appendTo(d)}d.css({left:0,top:0,width:0,height:0}).hide();var c=$("<div class='noteCookie-eachNote-textList noteCookie-eachNote-text"+i.page+"'></div>").attr("data-key",i.key).attr("data-page",i.page).hide().appendTo(BookInfo.container());c.css({left:l.offset().left,top:l.offset().top});c.on("click mousedown touchstart",function(t){t.preventDefault();t.stopPropagation();return!1});var s=$("<div class='noteCookie-eachNote-textList-top' style='position: absolute;width: 100%;height: 20px;left: 0px;top: 0px;background-color: #373737;border-top-left-radius: 2px;border-top-right-radius: 2px;z-index: 2;'></div>").appendTo(c),t=$("<div style='position: absolute;left: 4px;top: 0px;width: 24px;height: 20px;cursor: pointer;'></div>").append($("<img style='margin-top: 2px;margin-left: 4px;'/>").attr("src",r.address+"showNoteList.png")).appendTo(s),n=$("<div class='noteCookie-eachNote-textList-topClose'></div>").css({right:2}).attr("title","Close").append($("<img style='margin-top: 1px;margin-left: 1px;'/>").attr("src",r.address+"noteImg_close.png")).appendTo(s),h=$("<div class='noteCookie-eachNote-textList-topSave'></div>").css({right:24}).attr("title","Save").append($("<img style='margin-top: 1px;margin-left: 0px;'/>").attr("src",r.address+"noteImg_save.png")).appendTo(s),p=$("<div class='noteCookie-eachNote-textList-topDel'></div>").css({right:46}).attr("title","Delete").append($("<img style='margin-top: 1px;margin-left: 0px;'/>").attr("src",r.address+"noteImg_del.png")).appendTo(s),u=$("<div class='noteCookie-eachNote-textList-textDiv' style='height: 120px;position: absolute;width: 100%;left: 0px;top: 20px;margin: 0px;border: 0px;padding: 0px;border-bottom-left-radius: 2px;border-bottom-right-radius: 2px;background-color: #FFF4A1;z-index: 2;'></div>").appendTo(c),f=$("<textarea class='noteCookie-eachNote-textList-text'></textarea>").val(i.value).appendTo(u);$("<span class='noteCookie-eachNote-textList-topTitle'></span>").html(i.time).appendTo(u);f.on("mousedown click",function(t){t.stopPropagation()});isTouch||c.transition3D();t.on("click touchend",function(){r.noteButtonIsShow&&r.showFlag?(r.hide(),r.showFlag=!1):(r.show(),r.showFlag=!0)});var m,b,w,x,v,C;s.on("pointerdown.note",function(t){t.stopPropagation()});s.on("mousedown.note touchstart.note",function(t){w=l.offset().left;x=l.offset().top;v=c.offset().left;C=c.offset().top;m=(t.pageX||t.originalEvent.touches[0].pageX)-v;b=(t.pageY||t.originalEvent.touches[0].pageY)-C;BookInfo.container().add(d).add(r.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(r.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).on("mousemove.noteB touchmove.noteB",function(t){s.css({cursor:"move"});t=isTouch?t.originalEvent.touches[0]:t;c.css({left:Math.floor(t.clientX-m),top:t.clientY-b});r.drawSVG(w,x,c.offset().left,c.offset().top,d,o)});BookInfo.container().add(d).add(s).on("mouseup.noteB touchend.noteB",function(){s.css({cursor:"default"});BookInfo.container().add(d).add(r.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(r.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).off("mousemove.noteB touchmove.noteB");BookInfo.container().add(d).add(s).off("mouseup.noteB touchend.noteB")});t.stopPropagation();t.preventDefault();return!1});var k,A,y;n.on("click touchend",function(t){r.revertNoteImgText(l.attr("data-key"));c.hide();d.hide();P=!1});h.on("click touchend",function(t){t=f.val();g.attr("title",t);var i=l.attr("data-key");r.updateNoteImgText(i,t);r.updateArrayOrderKey(r.notes,i,{value:t});r.addLocalStorage(r.cookieName,r.parseJSONArrayToString(r.notes));c.hide();d.hide();P=!1});p.on("click touchend",function(t){k||(k=$("<div class='noteCookie-eachNote-textList-textDiv-bg' style='height: 100%;position: absolute;width: 100%;left: 0px;top: 0px;margin: 0px;border: 0px;padding: 0px;cursor: default;border-bottom-left-radius: 5px;border-bottom-right-radius: 5px;background-color: #cccccc;z-index: 2;'></div>").appendTo(u),$("<span class='noteCookie-eachNote-textList-textDiv-bgText' style=' position: absolute;left: 0px;top: 36px;font-family: Arial;font-size: 11px;width: 100%;text-align: center;height: 20px;line-height: 20px;color: #0A0A0A;z-index: 2;'></span>").html("Delete This Note!").appendTo(k),A=$("<div class='noteCookie-eachNote-textList-textDiv-bgYes'></div>").css({left:40}).html("Yes").appendTo(k),y=$("<div class='noteCookie-eachNote-textList-textDiv-bgNo'></div>").css({left:97}).html("No").appendTo(k),A.on("click touchend",function(t){t=l.attr("data-key");r.deleteNoteImg(t);c.remove();d.remove();l.remove();t=l.attr("data-key");r.delArrayOrderKey(r.rows,t);r.delArrayOrderKey(r.notes,t);r.addLocalStorage(r.cookieName,r.parseJSONArrayToString(r.notes));r.scrollBarShowHide();for(t=0;t<r.rows.length;t++)r.rows[t].rowObj.css({backgroundColor:0==t%2?"":"#bababa"});k=null}),y.on("click touchend",function(){k.remove();k=null}))});var B=i.firstDown?!1:!0,P=!1,S=!1;g.on("mouseup.noteImgShowHide touchend.noteImgShowHide",function(t){if(isTouch||1==t.which)if(B)B=!1;else return S?S=!1:P?(c.hide(),d.hide(),P=!1):(e&&(c.css({left:l.offset().left,top:l.offset().top}),e=!1),c.show(),d.show(),P=!0,r.drawSVG(l.offset().left,l.offset().top,c.offset().left,c.offset().top,d,o)),t.preventDefault(),t.stopPropagation(),!1});$(document).add(a).on("mousedown.noteImgShowHide touchstart.noteImgShowHide",function(){P&&(c.hide(),d.hide(),P=!1)});c.add(d).on("mousedown.noteImgShowHide touchstart.noteImgShowHide",function(t){t.preventDefault();t.stopPropagation();return!1});var I,T,M,L,W,R=!1;g.on("pointerdown.nodecookie",function(t){t.stopPropagation()});g.bind(_event._down,function(t){t.stopPropagation();t.preventDefault();t=isTouch?t.originalEvent.touches[0]:t;I=parseFloat(l[0].offsetLeft);T=parseFloat(l[0].offsetTop);M=t.clientX;L=t.clientY;W=g.attr("data-key");R=!0;if(P)var o=c.offset().left,s=c.offset().top,n=d.offset().left,h=d.offset().top;a.on("mousemove.noteObj touchmove.noteObj",function(t){t.stopPropagation();t.preventDefault();if(R){l.css({cursor:"move"});t=isTouch?t.originalEvent.touches[0]:t;var i=I*BookInfo.scale()-(M-t.clientX),e=T*BookInfo.scale()-(L-t.clientY),i=i/(a.width()*BookInfo.scale())*100+"%",e=e/(a.height()*BookInfo.scale())*100+"%";l.css({left:i,top:e});P&&(c.css({left:o+(t.clientX-M),top:s+(t.clientY-L)}),d.css({left:n+(t.clientX-M),top:h+(t.clientY-L)}));if(8<Math.abs(t.clientX-M)||8<Math.abs(t.clientY-L))S=!0;r.updateArrayOrderKey(r.notes,W,{left:i,top:e});r.addLocalStorage(r.cookieName,r.parseJSONArrayToString(r.notes))}});a.add(g).on("mouseup.noteObj touchend.noteObj",function(t){R&&(l.css({cursor:"default"}),S=R=!1,a.off("mousemove.noteObj touchmove.noteObj"),a.add(g).off("mouseup.noteObj touchend.noteObj"))});return!1});s.bind(_event._down,function(){$(".noteCookie-eachNote-textList").removeClass("noteCookie-eachNote-textList-current");$(".noteCookie-eachNote").removeClass("noteCookie-eachNote-textList-current");c.addClass("noteCookie-eachNote-textList-current");l.addClass("noteCookie-eachNote-textList-current")});r.noteImgs[i.key]=l;r.noteTexts[i.key]=c;r.svgObjs[i.key]=d},addNoteImgByPageIndex:function(t,i){i.find(".noteCookie-eachNote").remove();$(".noteCookie-eachNote-text"+t).remove();$(".noteCookie-eachNote-svg"+t).remove();for(var e=0;e<this.notes.length;e++)this.notes[e].page===t&&this.addNoteImg(this.notes[e],i)},addListDataAndNoteImg:function(t,i){this.addListData(t);this.addNoteImg(t,i)},drawSVG:function(t,i,e,o,s,n){var h,a,r,l,g,d;t+28>=e+90.5&&i+28<=o?(d=i+28,o-=d,t+28<=e+109?(g=t+28,l=e+181-24-t+28,i=t=0,h=e+181-24-48-g,a=o,e=e+181-24-g):(g=e+109,e+181-24>=t+28?(l=48,t=t+28-g):t=l=t+28-g,h=i=0,a=o,e=48),r=o):t+28<e+90.5&&i+28<=o?(d=i+28,o-=d,t+28<=e+24?(g=t+28,l=e+24+48-g,i=t=0,h=l-48,a=o,e=l):(g=e+24,e+24+48<=t+28?t=l=t+28-g:(l=48,t=t+28-g),h=i=0,a=o,e=48),r=o):t+28>=e+90.5&&i>=o+141-28?(d=o+141,o=i+28-d,t+28<=e+109?(g=t+28,l=e+181-24-t+28,t=0,i=o,h=e+181-24-48-g,a=0,e=e+181-24-g):(g=e+109,e+181-24>=t+28?(l=48,t=t+28-g):t=l=t+28-g,i=o,a=h=0,e=48),r=0):t+28<e+90.5&&i>=o+141-28?(d=o+141,o=i+28-d,t+28<=e+24?(g=t+28,l=e+24+48-g,t=0,i=o,h=l-48,a=0,e=l):(g=e+24,e+24+48<=t+28?t=l=t+28-g:(l=48,t=t+28-g),i=o,a=h=0,e=48),r=0):e+181<=t+28&&i+28>=o&&i+28<=o+70.5?(g=e+181,l=t+28-g,i+28<=o+20?(d=i+28,o=o+20+48-d,t=l,h=i=0,a=o-48,e=0,r=o):o+20+48<=i+28?(d=o+20,o=i+28-d,t=l,i=o,e=a=h=0,r=48):(d=o+20,o=48,t=l,i=i+28-d,e=a=h=0,r=o)):e+181<=t+28&&i+28<=o+141&&i+28>=o+70.5?(g=e+181,l=t+28-g,i+28<=o+141-20-48?(d=i+28,o=o+141-20-d,t=l,h=i=0,a=o-48,e=0,r=o):o+141-20<=i+28?(d=o+141-68,o=i+28-d,t=l,i=o,e=a=h=0,r=48):(d=o+141-68,o=48,t=l,i=i+28-d,e=a=h=0,r=o)):e>=t+28&&i+28>=o&&i+28<=o+70.5?(g=t+28,l=e-g,i+28<=o+20?(d=i+28,o=o+20+48-d,i=t=0,h=l,a=o-48,e=l,r=o):o+20+48<=i+28?(d=o+20,o=i+28-d,t=0,i=o,h=l,a=0,e=l,r=48):(d=o+20,o=48,t=0,i=i+28-d,h=l,a=0,e=l,r=o)):e>=t+28&&i+28<=o+141&&i+28>=o+70.5?(g=t+28,l=e-g,i+28<=o+141-20-48?(d=i+28,o=o+141-20-d,i=t=0,h=l,a=o-48,e=l,r=o):o+141-20<=i+28?(d=o+141-68,o=i+28-d,t=0,i=o,h=l,a=0,e=l,r=48):(d=o+141-68,o=48,t=0,i=i+28-d,h=l,a=0,e=l,r=o)):(a=h=i=t=l=o=d=g=0,e=48,r=0);s.show().css({width:l,height:o,left:g,top:d});n.attr("d","M"+e+","+r+" L"+t+","+i+" L"+h+","+a)},bindEvents:function(){var n=this,h=!1,a=function(){$.each(BookInfo.getCurrentPages(),function(t,i){if(n.noteImgContainers[BookInfo.getBookType()]){var e=n.noteImgContainers[BookInfo.getBookType()][i];e&&(e.css({cursor:""}),e.off("mousedown.addNote touchstart.addNote"))}});h=!1};BookInfo.container().on("mousedown.addNote touchstart.addNote",function(){a()});n.addBtn.bind(_event._end,function(t){var s=n.inputText.val();if(s){n.noteButtonIsShow=!1;n.noteTitleShowBtn.children("img").attr("src",n.address+"note_revert.png");n.noteButton.css({maxHeight:0,paddingBottom:0});h=!0;var i=BookInfo.getCurrentPages();$.each(i,function(t,e){var o=n.noteImgContainers[BookInfo.getBookType()][e];if(o)o.css({cursor:"url("+n.address+"note.png),auto"}).on(_event._down,function(t){n.noteButtonIsShow=!1;n.noteTitleShowBtn.children("img").attr("src",n.address+"note_revert.png");n.noteButton.css({maxHeight:0});if(h){if(!t.which||3!=t.which){var i=(t.pageX||t.originalEvent.touches[0].pageX)-o.offset().left;t=(t.pageY||t.originalEvent.touches[0].pageY)-o.offset().top;i=i/(o.width()*BookInfo.scale())*100+"%";t=t/(o.height()*BookInfo.scale())*100+"%";i={key:(new Date).getTime(),time:(new Date).format("yyyy-MM-dd hh:mm:ss",!0),value:s,left:i,top:t,page:e};n.addListDataAndNoteImg(i,$(this));n.downJSonArrByKey(n.rows,"page");$(".noteCookie-noteTable-row").detach();for(i=0;i<n.rows.length;i++)n.rows[i].rowObj.css({backgroundColor:0==i%2?"":"#bababa"}),n.rows[i].rowObj.appendTo(n.noteTableInner);n.scrollBarShowHide();n.inputText.val("")}a()}})})}t.preventDefault();t.stopPropagation();return!1});n.noteTitleShowBtn.on(_event._down,function(){n.noteButtonIsShow?(n.noteButtonIsShow=!1,n.noteTitleShowBtn.children("img").attr("src",n.address+"note_revert.png"),n.noteButton.css({maxHeight:0,paddingBottom:0})):(n.noteButtonIsShow=!0,n.noteTitleShowBtn.children("img").attr("src",n.address+"note_narrow.png"),n.noteButton.css({maxHeight:9999,paddingBottom:6}))});n.noteTitleCloseBtn.on("click.note touchend.note",function(t){void 0!=n.onCreated?n.onCreated[1].call(n.onCreated[0]):n.hide();t.preventDefault();t.stopPropagation();return!1});n.removeAllBtn.on("click.note touchend.note",function(){$(".noteCookie-eachNote").remove();$(".noteCookie-eachNote-svg").remove();$(".noteCookie-eachNote-textList").remove();$(".noteCookie-noteTable-row").remove();n.notes=[];n.rowObjs={};n.noteImgs={};n.noteTexts={};n.svgObjs={};n.rows=[];n.addLocalStorage(n.cookieName,n.parseJSONArrayToString(n.notes));n.scrollBarShowHide()})},setContainers:function(t,i,e){void 0==this.noteImgContainers[t]&&(this.noteImgContainers[t]={});this.noteImgContainers[t][i]=e;t==BookInfo.getBookType()&&($(".noteCookie-eachNote-textList").hide(),$(".noteCookie-eachNote-svg").hide(),this.addNoteImgByPageIndex(i,e))},show:function(){this.showFlag=!0;this.note.show();parseInt(this.note.css("left"))>this.container.width()&&this.note.css({left:"50%"});0>parseInt(this.note.css("top"))&&this.note.css({top:24});this.noteButtonIsShow=!0;this.noteTitleShowBtn.children("img").attr("src",this.address+"note_narrow.png");this.noteButton.css({maxHeight:9999,paddingBottom:6});this.scrollBarShowHide()},hide:function(){this.showFlag=!1;this.note.hide()},bindOnCreated:function(t,i){this.onCreated=[t,i]},showHide:function(){this.showFlag?this.hide():this.show()},parseJSONArrayToString:function(t){if(0!=t.length){for(var i="[",e=0;e<t.length;e++)i+="{key:'"+t[e].key+"',value:'"+t[e].value+"',page:"+t[e].page+",time:'"+t[e].time+"',left:'"+t[e].left+"',top:'"+t[e].top+"'},";i=i.substring(0,i.length-1);return i+"]"}},delArrayOrderKey:function(t,i){if(t)for(var e=0;e<t.length;e++)t[e].key&&t[e].key==i&&t.remove(e)},updateArrayOrderKey:function(t,i,e){if(t)for(var o=0;o<t.length;o++)t[o].key&&t[o].key==i&&$.extend(t[o],e)},downJSonArrByKey:function(t,e){t.sort(function(t,i){return parseInt(t[e])>parseInt(i[e])?1:parseInt(t[e])==parseInt(i[e])?0:-1})},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},getLocalStorage:function(t){try{if(window.localStorage)return window.localStorage.getItem(t);for(var i=document.cookie.split("; "),e=0;e<i.length;e++){var o=i[e].split("=");if(o[0]==t)return unescape(o[1])}return""}catch(t){}},addLocalStorage:function(t,i){try{if(window.localStorage)window.localStorage.setItem(t,i);else{var e=t+"="+escape(i),o=new Date;o.setTime(o.getTime()+864e8);e+="; expires="+o.toGMTString();document.cookie=e}}catch(t){}},createScrollBar:function(t){t=$("<div>",{class:"ScrollBar",css:{position:"absolute",width:6,height:"100%",backgroundColor:"#a8a8a8",borderRadius:0,right:0,top:0,zIndex:99,borderLeft:"1px solid #ffffff"}}).appendTo(t);var i=$("<div>",{class:"OuterScroll",css:{position:"absolute",width:6,height:"100%",left:0,top:0,backgroundColor:"transparent",borderRadius:0,overflow:"hidden",cursor:"pointer"}}).appendTo(t);$("<div>",{class:"InnerScroll",css:{position:"absolute",width:6,height:"100%",marginLeft:0,marginRight:0,left:0,top:0,backgroundColor:"#5e5e5e",borderRadius:0,cursor:"pointer"}}).appendTo(i);this.scrollBar=t;this.outerScroll=i;this.bindScrollBarEvents(t,i,this.noteTable,this.noteTableInner)},scrollBarShowHide:function(){var t=this.noteTable.outerHeight()*this.scrollBar.outerHeight()/this.noteTableInner.outerHeight();this.outerScroll.css({height:t});this.isNoteListShowHide();this.noteTable.height()>=this.noteTableInner.height()?(this.scrollBar.hide(),this.noteTableInner.css({top:0})):(this.scrollBar.show(),Math.abs(parseFloat(this.noteTableInner.css("top")))>this.noteTableInner.outerHeight()-this.noteTable.outerHeight()&&(this.noteTableInner.css({top:-(this.noteTableInner.outerHeight()-this.noteTable.outerHeight())}),this.outerScroll.css({top:this.scrollBar.outerHeight()-this.outerScroll.outerHeight()})))},bindScrollBarEvents:function(s,n,h,a){var r=this;n.on(_event._down,function(t){var i=t||event,e=i.clientY-r.outerScroll.position().top,o=t.which;t.stopPropagation();1==o&&($(document).on("mousemove.scrollBar touchmove.scrollBar",function(t){t.preventDefault();t.stopPropagation();i=t||event;t=i.clientY-e;0>=t?t=0:t>=r.scrollBar.outerHeight()-r.outerScroll.outerHeight()&&(t=r.scrollBar.outerHeight()-r.outerScroll.outerHeight());n.css({top:t});a.css({top:-t/(r.scrollBar.outerHeight()-r.outerScroll.outerHeight())*(r.noteTableInner.outerHeight()-r.noteTable.outerHeight())})}),$(document).on("mouseup.scrollBar touchend.scrollBar",function(t){t=t||event;t.preventDefault();t.stopPropagation();$(document).off("mousemove.scrollBar touchmove.scrollBar");$(document).off("mouseup.scrollBar touchend.scrollBar")}))});h.bind($.browser.mozilla?"DOMMouseScroll":"mousewheel",function(t){if(!(h.outerHeight()>=a.outerHeight())){var i=t.originalEvent,i=i.wheelDelta||-i.detail,e=a.position().top,o;a.stop(!1,!1);0<i?o=0>e+h.outerHeight()/11?e+h.outerHeight()/11:0:0>i&&(o=a.outerHeight()-h.outerHeight()>-(e-h.outerHeight()/11)?e-h.outerHeight()/11:-(a.outerHeight()-h.outerHeight()));a.css({top:o});n.css({top:-o/(a.outerHeight()-h.outerHeight())*(s.outerHeight()-n.outerHeight())});t.stopPropagation();t.preventDefault();return!1}})}}),Signature=Class({statics:{signature:function(t){void 0==this._signature&&(this._signature=new Signature(t));return this._signature}},create:function(t){this.container=t;this.address=uiBaseURL;this.disableCss={boxShadow:"rgba(0, 0, 0, 0.6) 0px 1px 4px inset",backgroundColor:"#cccccc",textShadow:"0 1px 1px white",color:"rgb(165, 148, 148)",cursor:"default"};this.normalCss={boxShadow:"inset 0px 1px 0px rgba(255, 255, 255, 0.5), 0px 1px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"#E4E4E4",color:"#464343",textShadow:"",cursor:"pointer"};this.overCss={};this.downCss={backgroundColor:"#E4E4E4",color:"#374f00",boxShadow:"inset 0px 1px 3px rgba(0, 0, 0, 0.3), 0px 1px 0px white",textShadow:"0px 1px 0px rgba(255, 255, 255, 0.4)"};this.natureMessage="Welcome to the signature manager! Here, you can draw,type, or upload signatures to use on the PDF documents you sign.";this.writeMessage='Type your signature below, then press the "Save" or "Save & Use" button to proceed.';this.drawMessage='Draw your signature below, then press the "Save" or "Save & Use" button to proceed.';this.redoIsUse=this.undoIsUse=this.clearAllFalg=this.hasDrawFlag=this.showFlag=this.hasAndChangeText=!1;this.drawOldData=this.currentDrawDel=this.currentDrawEdit=this.currentDrawSave=this.currentWriteDel=this.currentWriteEdit=this.currentWriteSave=null;this.drawOldPoints=[];this.savePoints=[];this.saveText=null;this.signatureName=window.location.href.replace(window.location.hash,"")+"Signature";this.signatureCookies=[];this.currentObj=null;this.signatureContexts={};try{this.createSignature(t)}catch(t){}this.toolBar=this.createToolBar(t)},createToolBar:function(t){var o=this;this.showTimeFalg={};this.oldData={};var i=$("<div class='flipHTML5Signature-toolBar' style='position: absolute;width: 144px;height: 32px;background-color: rgba(0, 0, 0, 0.8);border-radius: 4px;z-index: 9998;'></div>").appendTo(t).hide();t=$("<div class='flipHTML5Signature-toolBar-del'></div>").css({left:4}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_del.png")).appendTo(i);var e=$("<div class='flipHTML5Signature-toolBar-up'></div>").css({left:32}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_up.png")).appendTo(i),s=$("<div class='flipHTML5Signature-toolBar-down'></div>").css({left:60}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_down.png")).appendTo(i),n=$("<div class='flipHTML5Signature-toolBar-revert'></div>").css({left:88}).append($("<img style='margin-left: 2px;margin-top: 4px;'/>").attr("src",this.address+"signature_revert.png")).appendTo(i),h=$("<div class='flipHTML5Signature-toolBar-date'></div>").css({left:116}).append($("<img style='margin-left: 3px;margin-top: 4px;'/>").attr("src",this.address+"signature_date.png")).appendTo(i);t.on("click touchend",function(t){o.currentObj&&(o.currentObj.remove(),i.hide(),t=o.currentObj.attr("data-key"),delete o.showTimeFalg[t],delete o.oldData[t],o.delArrayOrderKey(o.signatureCookies,t),o.addLocalStorage(o.signatureName,o.parseToString(o.signatureCookies)))});e.on("click touchend",function(){if(o.currentObj){var t=o.currentObj.width(),i=o.currentObj.height(),e=t+11;o.currentObj.css({width:e,height:e/(t/i)});t=o.currentObj.attr("data-key");i=o.parseObject(o.currentObj[0]);o.updateArrayOrderKey(o.signatureCookies,t,{width:i.width,height:i.height});o.addLocalStorage(o.signatureName,o.parseToString(o.signatureCookies));o.showTimeFalg[t]&&o.reviseDateTag()}});s.on("click touchend",function(){if(o.currentObj){var t=o.currentObj.width(),i=o.currentObj.height(),e=0>=t-11?5:t-11;o.currentObj.css({width:e,height:e/(t/i)});t=o.currentObj.attr("data-key");i=o.parseObject(o.currentObj[0]);o.updateArrayOrderKey(o.signatureCookies,t,{width:i.width,height:i.height});o.addLocalStorage(o.signatureName,o.parseToString(o.signatureCookies));o.showTimeFalg[t]&&o.reviseDateTag()}});n.on("click touchend",function(){if(o.currentObj){var t=o.currentObj.attr("data-key");o.currentObj.css({width:o.oldData[t].width,height:o.oldData[t].height});o.showTimeFalg[t]&&o.reviseDateTag();var i=o.parseObject(o.currentObj[0]);o.updateArrayOrderKey(o.signatureCookies,t,{width:i.width,height:i.height});o.addLocalStorage(o.signatureName,o.parseToString(o.signatureCookies))}});h.on("click touchend",function(){var t=o.currentObj.attr("data-key");o.showTimeFalg[t]?(o.currentObj.find(".flipHTML5Signature-eachDate").hide(),o.showTimeFalg[t]=!1):(o.reviseDateTag(),o.currentObj.find(".flipHTML5Signature-eachDate").show(),o.showTimeFalg[t]=!0)});i.on("mousedown touchstart",function(t){t.preventDefault();t.stopPropagation();return!1});this.container.add($(document)).add(BookInfo.container()).on("mousedown.hideToolBar touchstart.hideToolBar",function(){i.hide()});return i},createSignature:function(b){var c=this;this.$signature=$("<div class='flipHTML5Signature'></div>").css({width:560}).appendTo(b).hide();this.$signatureTitle=$("<div class='flipHTML5Signature-title'></div>").append($("<span class='flipHTML5Signature-titleText'></span>").html("Signature Manager")).appendTo(this.$signature);this.$closeBtn_title=$("<div class='flipHTML5Signature-titleClose' style='right: 6px;top: 4px;width: 20px;height: 20px;'></div>").append($("<img style='margin-left: 2px;margin-top: 2px;'/>").attr("src",this.address+"signature_close.png")).appendTo(this.$signatureTitle);try{var d=this.getLocalStorage(this.signatureName);this.signatureCookies=d&&"undefined"!=d?eval(d):[]}catch(f){}var g,h;this.$signatureTitle.on("mousedown touchstart",function(t){t.preventDefault();t.stopPropagation();t=t.originalEvent.touches?t.originalEvent.touches[0]:t;g=t.clientX-c.$signature.position().left;h=t.clientY-c.$signature.position().top;b.add($(document)).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).on("mousemove.signatureMove touchmove.signatureMove",function(t){c.$signatureTitle.css({cursor:"move"});t=t.originalEvent.touches?t.originalEvent.touches[0]:t;c.$signature.css({left:t.clientX-g,top:t.clientY-h})});b.add($(document)).on("mouseup.signatureMove touchend.signatureMove",function(){c.$signatureTitle.css({cursor:"default"});b.add($(document)).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).off("mousemove.signatureMove touchmove.signatureMove");b.add($(document)).off("mouseup.signatureMove touchend.signatureMove")});return!1});this.createSignatureUnder(this.$signature);this.createWriteTypeUnder(this.$signature);this.createDrawTypeUnder(this.$signature)},createSignatureUnder:function(t){var i=this;this.$signatureUnder=$("<div class='flipHTML5Signature-nuder' style='position: relative;left: 0px;width: 100%;height: 260px;background-color: #C7C7C7;'></div>").append($("<div class='flipHTML5Signature-nuderMessage'></div>").html(this.natureMessage)).appendTo(t);this.$underClose=$("<div class='flipHTML5Signature-nuderClose'></div>").html("Close").appendTo(this.$signatureUnder);this.$closeBtn_title.add(this.$underClose).on("click.signature touchend.signature",function(){void 0!=i.onCreated?i.onCreated[1].call(i.onCreated[0]):i.hide()});this.createEachTypes(this.$signatureUnder)},createEachTypes:function(t){var e=this,i={width:52,left:57,borderTopLeftRadius:5,borderBottomLeftRadius:5},o={width:70,left:111,borderTopRightRadius:5,borderBottomRightRadius:5};t=$("<div class='flipHTML5Signature-nuderTypes' style='  position: absolute;left: 15px;top: 60px;width: 530px;height: 145px;'></div>").css({boxShadow:"inset 1px 1px 0px #a6a6a6, 1px 1px 0px #f6f6f6"}).appendTo(t);var s=$("<div class='flipHTML5Signature-nuderTypes-type' style=' position: absolute;left: 17px;top: 6px;width: 240px;height: 134px;'></div>").css({boxShadow:"0px 0px 1px #000000"}).append($("<span class='flipHTML5Signature-typeTitle'></span>").html("Type on Keyboard")).css({left:17}).appendTo(t),s=$("<div class='flipHTML5Signature-typeUnder'></div>").appendTo(s),n=$("<div class='flipHTML5Signature-typeMid'></div>").appendTo(s),h=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(i).html("Edit").appendTo(s).hide(),a=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(o).html("Delete").appendTo(s).hide();t=$("<div class='flipHTML5Signature-nuderTypes-type' style=' position: absolute;left: 17px;top: 6px;width: 240px;height: 134px;'></div>").css({boxShadow:"0px 0px 1px #000000"}).append($("<span class='flipHTML5Signature-typeTitle'></span>").html("Draw with Mouse")).css({left:"auto",right:17}).appendTo(t);t=$("<div class='flipHTML5Signature-typeUnder'></div>").appendTo(t);var r=$("<div class='flipHTML5Signature-typeMid'></div>").appendTo(t),l=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(i).html("Edit").appendTo(t).hide(),g=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(o).html("Delete").appendTo(t).hide();n.on("mouseover.signature touchstart.signature",function(){n.css({borderColor:"#ff0000"})});n.on("mouseout.signature touchend.signature",function(){n.css({borderColor:"#cccccc"})});n.on(_event._down,function(t){t.preventDefault();t.stopPropagation();return!1});n.on(_event._end,function(t){var i=$(this).html();i?(e.$writeText.val(i),e.saveAndUseWrite(i)):(e.writeSave.add(e.writeSaveAndUse).removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.disableCss),e.hasAndChangeText=!1,e.$signatureUnder.hide(),e.$drawTypeUnder.hide(),e.$writeTypeUnder.show(),e.$writeText.focus(),e.currentWriteSave=n,e.currentWriteEdit=h,e.currentWriteDel=a);t.preventDefault();t.stopPropagation();return!1});h.on("click.signature touchend.signature",function(){e.currentWriteSave=n;e.currentWriteEdit=h;e.currentWriteDel=a;e.$writeText.val(n.html());e.writeSave.add(e.writeSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(e.disableCss);e.hasAndChangeText=!1;e.$signatureUnder.hide();e.$drawTypeUnder.hide();e.$writeTypeUnder.show()});a.on("click.signature touchend.signature",function(){e.currentWriteSave=n;e.currentWriteEdit=h;e.currentWriteDel=a;e.writeSave.add(e.writeSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(e.disableCss);e.hasAndChangeText=!1;n.html("");e.$writeText.val("");h.hide();a.hide()});r.on("mouseover.signature touchstart.signature",function(){r.css({borderColor:"#ff0000"})});r.on("mouseout.signature touchend.signature",function(){r.css({borderColor:"#cccccc"})});r.on(_event._down,function(t){t.preventDefault();t.stopPropagation();return!1});r.on(_event._end,function(t){r.children("img").length?e.saveAndUseDraw(e.drawOldData):(e.$signatureUnder.hide(),e.$writeTypeUnder.hide(),e.$drawTypeUnder.show(),e.currentDrawSave=r,e.currentDrawEdit=l,e.currentDrawDel=g);t.preventDefault();t.stopPropagation();return!1});l.on("click.signature touchend.signature",function(){e.currentDrawSave=r;e.currentDrawEdit=l;e.currentDrawDel=g;e.$signatureUnder.hide();e.$writeTypeUnder.hide();e.$drawTypeUnder.show()});g.on("click.signature touchend.signature",function(){try{e.currentDrawSave=r,e.currentDrawEdit=l,e.currentDrawDel=g,e.undo.add(e.redo).add(e.clearAllBtn).add(e.drawSave).add(e.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(e.disableCss),e.undoIsUse=!1,e.redoIsUse=!1,e.clearAllFalg=!1,e.hasDrawFlag=!1,l.hide(),g.hide(),e.currentDrawSave&&e.currentDrawSave.empty(),e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.previewContext.clearRect(0,0,e.previewCanvas.width,e.previewCanvas.height),e.drawOldPoints=[],e.points=[],e.drawOldPoints.push([])}catch(t){}})},createWriteTypeUnder:function(t){var e=this,o=!1,s;this.$writeTypeUnder=$("<div class='flipHTML5Signature-writeType' style='position: relative;left: 0px;width: 100%;height: 170px;background-color: #C7C7C7;'></div>").append($("<div class='flipHTML5Signature-nuderMessage'></div>").html(this.writeMessage)).appendTo(t).hide();this.$writeText=$("<input type='text' class='flipHTML5Signature-writeType-text' maxlength='35' style='position: absolute;width: 450px;height: 60px;left: 63px;top: 64px;font-family: Mistral;font-size: 28px;text-align: center;color: #000000;'/>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(this.$writeTypeUnder);this.writeSave=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save' style='left: 161px;'></div>").html("Save").appendTo(this.$writeTypeUnder);this.writeSaveAndUse=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save-use' style='left: 275px;'></div>").html("Save & Use").appendTo(this.$writeTypeUnder);t=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-cancel'></div>").html("Cancel").appendTo(this.$writeTypeUnder);s=this.$writeText.val();this.writeSave.add(this.writeSaveAndUse).css(this.disableCss);t.on("click touchend",function(t){e.$writeText.val(s);e.$writeTypeUnder.hide();e.$drawTypeUnder.hide();e.$signatureUnder.show();t.preventDefault()});this.writeSaveAndUse.on(_event._down,function(t){t.preventDefault();t.stopPropagation();return!1});this.writeSaveAndUse.on(_event._end,function(t){if(e.hasAndChangeText){var i=e.$writeText.val();(s=i)&&o&&(e.saveText=i,e.saveAndUseWrite(i))}t.preventDefault();t.stopPropagation();return!1});this.writeSave.on("click touchend",function(t){e.hasAndChangeText&&(s=t=e.$writeText.val())&&o&&(e.saveText=t,e.saveWrite(t))});e.writeSave.on("mouseover.signature touchstart.signature",function(t){e.hasAndChangeText&&e.writeSave.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(e.overCss)});e.writeSaveAndUse.on("mouseover.signature touchstart.signature",function(t){e.hasAndChangeText&&e.writeSaveAndUse.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(e.overCss)});e.writeSave.on("mouseout.signature touchend.signature",function(t){e.hasAndChangeText&&e.writeSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});e.writeSaveAndUse.on("mouseout.signature touchend.signature",function(t){e.hasAndChangeText&&e.writeSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});e.writeSave.on("mousedown.signature",function(t){e.hasAndChangeText&&e.writeSave.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.downCss)});e.writeSaveAndUse.on("mousedown.signature",function(t){e.hasAndChangeText&&e.writeSaveAndUse.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.downCss)});e.writeSave.add($(document)).on("mouseup.signature",function(t){e.hasAndChangeText&&e.writeSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});e.writeSaveAndUse.add($(document)).on("mouseup.signature",function(t){e.hasAndChangeText&&e.writeSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});this.$writeText.on("input propertychange",function(t){t=e.$writeText.val();o=!0;t&&o?(e.writeSave.add(e.writeSaveAndUse).css(e.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover"),e.hasAndChangeText=!0):(e.hasAndChangeText=!1,e.writeSave.add(e.writeSaveAndUse).removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.disableCss))})},createDrawTypeUnder:function(t){var e=this;this.$drawTypeUnder=$("<div class='flipHTML5Signature-drawType' style='position: relative;left: 0px;width: 100%;height: 340px;background-color: #C7C7C7;'></div>").append($("<div class='flipHTML5Signature-nuderMessage'></div>").html(this.drawMessage)).appendTo(t).hide();this.drawSave=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save' style='left: 161px;'></div>").html("Save").appendTo(this.$drawTypeUnder);this.drawSaveAndUse=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save-use' style='left: 275px;'></div>").html("Save & Use").appendTo(this.$drawTypeUnder);t=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-cancel'></div>").html("Cancel").appendTo(this.$drawTypeUnder);this.drawSave.add(this.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(this.disableCss);this.drawSave.on("click touchend",function(){if(e.hasDrawFlag){var t=e.trimCanvas(w);e.savePoints=e.points.concat();e.savePoints.push({color:e.drawColor});e.saveDraw(t)}});this.drawSaveAndUse.on(_event._down,function(t){t.preventDefault();t.stopPropagation();return!1});this.drawSaveAndUse.on(_event._end,function(t){if(e.hasDrawFlag){var i=e.trimCanvas(w);e.savePoints=e.points.concat();e.savePoints.push({color:e.drawColor});e.saveAndUseDraw(i)}t.preventDefault();t.stopPropagation();return!1});e.drawSave.on("mouseover.signature touchstart.signature",function(t){e.hasDrawFlag&&e.drawSave.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(e.overCss)});e.drawSaveAndUse.on("mouseover.signature touchstart.signature",function(t){e.hasDrawFlag&&e.drawSaveAndUse.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(e.overCss)});e.drawSave.on("mouseout.signature touchend.signature",function(t){e.hasDrawFlag&&e.drawSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});e.drawSaveAndUse.on("mouseout.signature touchend.signature",function(t){e.hasDrawFlag&&e.drawSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});e.drawSave.on("mousedown.signature",function(t){e.hasDrawFlag&&e.drawSave.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.downCss)});e.drawSaveAndUse.on("mousedown.signature",function(t){e.hasDrawFlag&&e.drawSaveAndUse.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.downCss)});e.drawSave.add($(document)).on("mouseup.signature",function(t){e.hasDrawFlag&&e.drawSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});e.drawSaveAndUse.add($(document)).on("mouseup.signature",function(t){e.hasDrawFlag&&e.drawSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});t.on("click touchend",function(){e.$writeTypeUnder.hide();e.$drawTypeUnder.hide();e.$signatureUnder.show()});t=$("<div class='flipHTML5Signature-drawTypeMid' style='position: absolute;left: 10px;top: 53px;width: 540px;height: 90px;'></div>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(this.$drawTypeUnder);var i=$("<div class='flipHTML5Signature-drawTypeMid-lineWidth' style='position: absolute;width: 180px;height: 16px;left: 20px;top: 15px;'></div>").appendTo(t).append($("<img>").attr("src",this.address+"pen.png")),o=$("<div style='position: absolute;width: 100px;height: 4px; background-color: #E0E0E0;left: 20px;top: 6px;border-radius: 2px;'></div>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(i),s=$("<div style='position: absolute;cursor:pointer;width: 0px; height: 0px;border-bottom-width: 11px;border-style: solid;border-left-width: 6px;border-right-width: 6px;top: -3px;border-color: transparent;border-bottom-color: #373737;left: -4px;'></div>").appendTo(o),n=$("<input type='text' style='position: absolute;width: 40px;height: 13px;left: 130px;top: 0px;'/>").appendTo(i),h=$("<div class='flipHTML5Signature-drawTypeMid-undo'></div>").css({left:28}).appendTo(t).html("UNDO"),a=$("<div class='flipHTML5Signature-drawTypeMid-redo'></div>").css({left:80}).appendTo(t).html("REDO"),r=$("<div class='flipHTML5Signature-drawTypeMid-clearAll'></div>").css({left:152,width:78}).html("Clear All").appendTo(t);this.clearAllBtn=r;h.add(a).add(r).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(this.disableCss);this.undo=h;this.redo=a;h.on("mouseover.signature touchstart.signature",function(t){e.undoIsUse&&h.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(e.overCss)});a.on("mouseover.signature touchstart.signature",function(t){e.redoIsUse&&a.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(e.overCss)});r.on("mouseover.signature touchstart.signature",function(t){e.clearAllFalg&&r.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(e.overCss)});h.on("mouseout.signature touchend.signature",function(t){e.undoIsUse&&h.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});a.on("mouseout.signature touchend.signature",function(t){e.redoIsUse&&a.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});r.on("mouseout.signature touchend.signature",function(t){e.clearAllFalg&&r.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});h.on("mousedown.signature",function(t){e.undoIsUse&&h.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.downCss)});a.on("mousedown.signature",function(t){e.redoIsUse&&a.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.downCss)});r.on("mousedown.signature",function(t){e.clearAllFalg&&r.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.downCss)});h.add($(document)).on("mouseup.signature",function(t){e.undoIsUse&&h.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});a.add($(document)).on("mouseup.signature",function(t){e.redoIsUse&&a.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});r.add($(document)).on("mouseup.signature",function(t){e.clearAllFalg&&r.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss)});var l=$("<div class='flipHTML5Signature-drawTypeMid-preview'></div>").html("Preview").appendTo(t),g=60/140*16,d=document.createElement("canvas"),c=d.getContext("2d"),p=$(d).css({position:"absolute",left:0,top:-Math.floor(g)});l.append(p);this.previewCanvas=d;this.previewContext=c;d.width=234;d.height=60+Math.ceil(g)+10;t=this.colorPicker(t);t.container.css({left:220,top:11});var u,f,m;n[0].value=parseFloat((7*(parseInt(s.css("left"))+4)+1).toFixed(2));s.on("mousedown touchstart",function(t){t.preventDefault();t.stopPropagation();t=t.originalEvent.touches?t.originalEvent.touches[0]:t;u=t.clientX-s.position().left;o.add(i).add($(document)).on("mousemove.lineWidth touchmove.lineWidth",function(t){t=t.originalEvent.touches?t.originalEvent.touches[0]:t;f=t.clientX-u;f=-4>=f?-4:93<=f?93:f;s.css({left:f});m=(f+4)/97*7+1;m=parseFloat(m.toFixed(2));n[0].value=m});i.add($(document)).on("mouseup.lineWidth touchend.lineWidth",function(){e.changeLineWidth(m);o.add(i).add($(document)).off("mousemove.lineWidth touchmove.lineWidth");i.add($(document)).off("mouseup.lineWidth touchend.lineWidth")});return!1});o.on("mousedown touchstart",function(t){t=t.clientX-o.offset().left;t=0>=t?0:97<=t?97:t;s.css({left:t-4});m=t/97*7+1;m=parseFloat(m.toFixed(2));n[0].value=m;e.changeLineWidth(m)});n.on("change",function(){var t=n[0].value;isNaN(t)?n[0].value=parseFloat(((s.position().left+4)/97*7+1).toFixed(2)):(1>t?(n[0].value=1,s.css({left:-4})):8<t?(n[0].value=8,s.css({left:93})):(n[0].value=t,s.css({left:(t-1)/7*97-4})),e.changeLineWidth(n[0].value))});r.on("click touchend",function(){e.clearAllFalg&&(v.clearRect(0,0,w.width,w.height),c.clearRect(0,0,d.width,d.height),e.drawSave.add(e.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(e.disableCss),e.hasDrawFlag=!1,e.redoIsUse=!0,a.css(e.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover"),e.undoIsUse=!1,h.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.disableCss),b=e.drawOldPoints.length-1,r.add(e.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(e.disableCss),e.clearAllFalg=!1,e.points=[])});var b=0;h.on("mousedown.signature touchstart.signature",function(t){if(e.undoIsUse){e.redoIsUse=!0;a.css(e.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");b+=1;b=b>=e.drawOldPoints.length?e.drawOldPoints.length-1:b;v.clearRect(0,0,w.width,w.height);c.clearRect(0,0,d.width,d.height);var i=e.drawOldPoints[e.drawOldPoints.length-1-b];e.points=i.concat();e.draw(w,v,e.drawOldPoints[e.drawOldPoints.length-1-b],e.drawColor,e.lineWidth);e.drawPreview(d,c,i,e.drawColor,e.lineWidth);e.drawSave.add(e.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss);e.hasDrawFlag=!0;r.add(e.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss);e.clearAllFalg=!0;b==e.drawOldPoints.length-1&&(e.undoIsUse=!1,h.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.disableCss),e.drawSave.add(e.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(e.disableCss),e.hasDrawFlag=!1,r.add(e.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(e.disableCss),e.clearAllFalg=!1);t.preventDefault();t.stopPropagation();return!1}});a.on("mousedown.signature touchstart.signature",function(t){if(e.redoIsUse){e.undoIsUse=!0;h.css(e.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");b-=1;b=0>=b?0:b;v.clearRect(0,0,w.width,w.height);c.clearRect(0,0,d.width,d.height);var i=e.drawOldPoints[e.drawOldPoints.length-1-b];e.points=i.concat();e.draw(w,v,e.drawOldPoints[e.drawOldPoints.length-1-b],e.drawColor,e.lineWidth);e.drawPreview(d,c,i,e.drawColor,e.lineWidth);e.drawSave.add(e.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss);e.hasDrawFlag=!0;r.add(e.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss);e.clearAllFalg=!0;0==b&&(e.redoIsUse=!1,a.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.disableCss));t.preventDefault();t.stopPropagation();return!1}});e.drawOldPoints.push([]);l=$("<div class='flipHTML5Signature-drawTypeBottom-out' style='position: absolute;left: 0px;top: 150px;width: 100%;height: 124px;'></div>").appendTo(this.$drawTypeUnder);g=$("<div class='flipHTML5Signature-drawTypeBottom' style='position: absolute;left: 9px;top: 0px;width: 540px;height: 140px;border: 1px solid #cccccc;background-color: #ffffff;'></div>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(l);l.css({cursor:"url("+e.address+"pen.png),auto"});var w=document.createElement("canvas"),x=window.canvas=$(w);g.append(x);w.width=540;w.height=158;$(w).css({position:"absolute",left:0,top:-16});var v=w.getContext("2d");this.canvas=w;this.context=v;this.points=[];this.drawColor=t.message[0].style.backgroundColor;this.lineWidth=1;var C,k;x.on(_event._down,function(t){t.preventDefault();t.stopPropagation();t=t.originalEvent.touches?t.originalEvent.touches[0]:t;if(e.redoIsUse){var i=e.drawOldPoints.length;e.drawOldPoints.length=i-b;e.points=e.drawOldPoints[i-b-1].concat();b=0}e.undoIsUse=!0;h.css(e.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");e.redoIsUse=!1;a.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(e.disableCss);e.clearAllFalg=!0;r.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(e.normalCss);e.hasDrawFlag=!0;e.drawSave.add(e.drawSaveAndUse).css(e.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");C={x:t.clientX-x.offset().left+0,y:t.clientY-x.offset().top+16,t:0,w:e.lineWidth};e.points.push(C);x.on(_event._move,function(t){t=t.originalEvent.touches?t.originalEvent.touches[0]:t;k={x:t.clientX-x.offset().left+0,y:Math.min(t.clientY-x.offset().top+16,156),t:1};e.points.push(k);e.draw(w,v,e.points,e.drawColor,e.lineWidth);e.drawPreview(d,c,e.points,e.drawColor,e.lineWidth)});x.add($(document)).on("mouseup.signature touchend.signature",function(){e.drawOldPoints.push(e.points.concat());x.off(_event._move);x.add($(document)).off("mouseup.signature touchend.signature")});return!1})},addSignatureImg:function(n,h,a){var r=this;n.on("mousedown.hideToolBar touchstart.hideToolBar",function(t){r.toolBar&&r.toolBar.hide()});n.css({cursor:"pointer"});void 0!=r.onCreated?r.onCreated[1].call(r.onCreated[0]):r.hide();n.off("mousedown.signature touchstart.signature");n.on("mousedown.signature touchstart.signature",function(t){n.off("mousedown.signature touchstart.signature");if(isTouch||1===t.which){var i=new Date,e=i.getTime(),i=i.format("MM/dd/yyyy hh:mm:ss");r.showTimeFalg[e]=!1;var o=(t.pageX||t.originalEvent.touches[0].pageX)/BookInfo.scale()-n.offset().left,s=(t.pageY||t.originalEvent.touches[0].pageY)/BookInfo.scale()-n.offset().top,o=r.parseData({left:o,top:s,width:h.width,height:h.height},n[0].offsetWidth,n[0].offsetHeight),s=$.extend({},h,{width:o.width,height:o.height});r.oldData[e]=s;r.createSignatureImg(n,s,a,o.left,o.top,e,i);r.signatureCookies.push({type:s.type,data:0===h.type?r.saveText:r.savePoints,key:e,page:a,currentTime:i,left:o.left,top:o.top,width:s.width,height:s.height});r.addLocalStorage(r.signatureName,r.parseToString(r.signatureCookies));t.preventDefault();t.stopPropagation();return!1}});n.add($(document)).add(BookInfo.container()).on("mouseup.signature touchend.signature",function(t){$.each(BookInfo.getCurrentPages(),function(t,i){var e=r.signatureContexts[BookInfo.getBookType()][i];e&&(e.css({cursor:""}),e.off("mousedown.signature touchstart.signature"))});n.off("mousedown.signature touchstart.signature");n.add($(document)).add(BookInfo.container()).off("mousedown.signature touchstart.signature")})},createSignatureImg:function(h,t,i,e,a,r,o){var l=this;h.on("mousedown.hideToolBar touchstart.hideToolBar",function(){l.toolBar&&l.toolBar.hide()});var g=$("<div class='flipHTML5Signature-eachSignatureImg' style='cursor: move;'></div>").append($("<img style='width: 100%;height: 100%;position: absolute;left: 0px;top: 0px;'/>").attr("src",t.url)).attr("data-key",r).attr("data-page",i).css({position:"absolute",width:t.width,height:t.height,left:e,top:a}).appendTo(h),s=$("<div class='flipHTML5Signature-eachDate' style='position: absolute;width: 180px;height: 45px;border: 1px dashed #2F2F2F;top: -24px;'></div>").css({left:t.width+2}).hide().html(o);t=$("<img/>").attr("src",l.address+"signature_dateClose.png").css({position:"absolute",top:0,right:0,cursor:"pointer"});s.appendTo(g).append(t);t.off("mousedown touchstart");t.on("mousedown touchstart",function(){var t=l.currentObj.attr("data-key");s.hide();l.showTimeFalg[t]=!1});s.off("mousedown touchstart");s.on("mousedown touchstart",function(t){t.preventDefault();t.stopPropagation();return!1});g.off("mouseover.signature touchstart.signature");g.on("mouseover.signature touchstart.signature",function(){g.css({border:"1px solid #ff0000"})});g.off("mouseout.signature touchend.signature");g.on("mouseout.signature touchend.signature",function(){g.css({border:0})});g.off("mousedown.getObj touchstart.getObj");g.on("mousedown.getObj touchstart.getObj",function(t){$(".flipHTML5Signature-eachSignatureImg").css({zIndex:1});g.css({zIndex:4});l.currentObj=g;l.toolBar.css({left:g.offset().left-l.container.offset().left,top:g.offset().top-l.container.offset().top-l.toolBar.outerHeight()}).show()});var d=!1;g.off("mousedown.signatureImg touchstart.signatureImg");g.on("pointerdown.signatureImg",function(t){t.stopPropagation()});g.on("mousedown.signatureImg touchstart.signatureImg",function(t){var e=t.pageX||t.originalEvent.touches[0].pageX,o=t.pageY||t.originalEvent.touches[0].pageY,s=g[0].offsetLeft,n=g[0].offsetTop;h.on("mousemove.signatureImg touchmove.signatureImg",function(t){t.preventDefault();t.stopPropagation();d=!0;var i=s-(e-(t.pageX||t.originalEvent.touches[0].pageX))/BookInfo.scale();a=n-(o-(t.pageY||t.originalEvent.touches[0].pageY))/BookInfo.scale();g.css({left:i,top:a});l.toolBar.css({left:g.offset().left-l.container.offset().left,top:g.offset().top-l.container.offset().top-l.toolBar.outerHeight()}).show();l.showTimeFalg[r]&&l.reviseDateTag()});g.add(h).add($(document)).on("mouseup.signatureImg touchend.signatureImg",function(){h.off("mousemove.signatureImg touchmove.signatureImg");g.add(h).add($(document)).off("mouseup.signatureImg touchend.signatureImg");if(d){var t=g.attr("data-key"),i=l.parseObject(l.currentObj[0]);l.updateArrayOrderKey(l.signatureCookies,t,{left:i.left,top:i.top});l.addLocalStorage(l.signatureName,l.parseToString(l.signatureCookies))}});t.preventDefault();t.stopPropagation();return!1});h.css({cursor:""})},draw:function(t,i,e,o,s){var n=-1,h=e.length;i.clearRect(0,0,t.width,t.height);i.save();i.beginPath();i.lineJoin="round";i.strokeStyle=o;for(i.lineWidth=s;++n<h;)t=e[n],0===t.t?(i.stroke(),i.beginPath(),i.lineWidth=t.w,i.moveTo(t.x,t.y)):i.lineTo(t.x,t.y);i.stroke();i.restore()},drawPreview:function(t,i,e,o,s){var n=-1,h=e.length,a=140/60,r=540/234;i.clearRect(0,0,t.width,t.height);i.save();i.beginPath();i.lineJoin="round";i.strokeStyle=o;for(i.lineWidth=s;++n<h;)t=e[n],0===t.t?(i.stroke(),i.beginPath(),i.lineWidth=t.w/a,i.moveTo(t.x/r,t.y/a)):i.lineTo(t.x/r,t.y/r);i.stroke();i.restore()},trimCanvas:function(t){var i=t.getContext("2d"),e=document.createElement("canvas").getContext("2d"),o=i.getImageData(0,0,t.width,t.height),s=o.data.length,n,h=null,a=null,r=null,l=null,g,d;for(n=0;n<s;n+=4)0!==o.data[n+3]&&(g=n/4%t.width,d=~~(n/4/t.width),null===h&&(h=d),null===a?a=g:g<a&&(a=g),null===r?r=g:r<g&&(r=g),null===l?l=d:l<d&&(l=d));t=l-h;r-=a;i=i.getImageData(a,h,r,t);e.canvas.width=r;e.canvas.height=t;e.putImageData(i,0,0);return{url:e.canvas.toDataURL("image/png"),width:r,height:t}},saveDraw:function(t){if(this.currentDrawSave){this.currentDrawSave.empty();var i=this.currentDrawSave.width(),e=this.currentDrawSave.height(),o=i/e,s=t.width,n=t.height,h=s/n;i>s&&e>n?(o=s,i=(i-o)/2,e=(e-n)/2):i>s&&e<n?(o=e*h,n=e,i=(i-o)/2,e=(e-n)/2):i<s&&e>n?(o=i,n=i/h,i=(i-o)/2,e=(e-n)/2):o>h?(n=e,o=e*h,i=(i-o)/2,e=0):o<h?(o=i,n=i/h,i=0,e=(e-n)/2):(o=i,n=e,e=i=0);this.currentDrawSave.append($("<img/>").css({position:"absolute",width:o,height:n,left:i,top:e}).attr("src",t.url))}this.drawOldData=t;this.currentDrawEdit.show();this.currentDrawDel.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.$signatureUnder.show()},saveAndUseDraw:function(o){var s=this,t=BookInfo.getCurrentPages();$.each(t,function(t,i){var e=s.signatureContexts[BookInfo.getBookType()][i];e&&(o.type=1,s.addSignatureImg(e,o,i))});s.saveDraw(o)},saveWrite:function(t){this.currentWriteSave.html(t);this.currentWriteEdit.show();this.currentWriteDel.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.$signatureUnder.show()},saveAndUseWrite:function(t){var o=this,s=o.drawTextByDiv(t,"38px","Mistral","#000000"),i=BookInfo.getCurrentPages();$.each(i,function(t,i){var e=o.signatureContexts[BookInfo.getBookType()][i];e&&(s.type=0,e.css({cursor:""}),o.addSignatureImg(e,s,i))});o.saveWrite(t)},drawTextByDiv:function(t,i,e,o){var s=document.createElement("canvas"),n=window.context=s.getContext("2d");n.fillStyle=o;n.font=""+i+" "+e+"";var h=n.measureText(t).width+8;s.width=h;s.height=54;n.fillStyle=o;n.font=""+i+" "+e+"";n.textBaseline="top";n.fillText(t,3,0);return{url:s.toDataURL("image/png"),width:h,height:54}},parseObject:function(t){if(document.getElementsByTagName("body")[0].contains(t)){var i,e,o;o=t.parentNode;var s=t.style,n=$(t);e=100/o.offsetHeight;i=100/o.offsetWidth;o=t.offsetLeft*i+"%";t=t.offsetTop*e+"%";i=n.width()*i+"%";e=n.height()*e+"%";s.width=i;s.height=e;s.left=o;s.top=t;return{width:i,height:e,left:o,top:t}}},parseData:function(t,i,e){e=100/e;i=100/i;return{width:t.width*i+"%",height:t.height*e+"%",left:t.left*i+"%",top:t.top*e+"%"}},close:function(){this.$signature.hide();this.$signatureUnder.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.showFlag=!1},show:function(){this.$signature.show();this.$signatureUnder.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.showFlag=!0},hide:function(){this.close()},showHide:function(){this.showFlag?this.hide():this.show()},changeColor:function(t){this.drawColor=t;this.draw(this.canvas,this.context,this.points,t,this.lineWidth);this.drawPreview(this.previewCanvas,this.previewContext,this.points,this.drawColor,this.lineWidth);return t},changeLineWidth:function(t){return this.lineWidth=t},colorPicker:function(t){var i,e,o,s=this,n="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" "),h=document.createElement("table");i=document.createElement("a");var a=$(i),r=document.createElement("input"),l=function(){},g=function(){h.style.display="none";r.value=r.style.backgroundColor=this.title.toUpperCase();s.changeColor(this.title.toUpperCase())};a.appendTo(t);i.className="flipHtml5ColorSelectorWrap";h.setAttribute("border","1");i.style.position="absolute";i.href="javascript:void(0);";r.type="text";r.className="flipHtml5ColorSelectorMessage";r.style.width="20px";r.style.height="20px";r.value=r.style.backgroundColor="#000000";r.style.cursor="pointer";r.style.padding="0px";i.appendChild(r);i.appendChild(h);h.style.display="none";h.style.position="relative";h.style.zIndex=9999;h.style.backgroundColor="#ffffff";for(e=0;7>e;e++){o=document.createElement("tr");o.style.position="relative";for(i=0;10>i;i++)t=document.createElement("td"),t.className="flipHtml5ColorSelectorBlock",t.style.position="relative",t.style.width="14px",t.style.height="14px",t.title=n[10*e+i],t.style.backgroundColor=n[10*e+i],$(t).on("mouseenter",l),$(t).on("click touchstart",g),o.appendChild(t);h.appendChild(o)}$(r).on("click touchstart",function(t){h.style.display="table-cell";t.stopPropagation();t.stopPropagation();return!1});$(document).on("click touchstart",function(){h.style.display="none"});return{container:a,message:$(r)}},setContainers:function(t,i,e){void 0==this.signatureContexts[t]&&(this.signatureContexts[t]={});this.signatureContexts[t][i]=e;t==BookInfo.getBookType()&&(this.toolBar.hide(),this.addSignatureByPageIndex(i,e))},addSignatureByPageIndex:function(t,i){i.find(".flipHTML5Signature-eachSignatureImg").remove();for(var e=0;e<this.signatureCookies.length;e++){var o=this.signatureCookies[e];if(o.page===t){var s=o.left,n=o.top,h=o.key,a=o.currentTime;if(0==o.type)var r=this.drawTextByDiv(o.data,"38px","Mistral","#000000"),l=this.parseData({left:s,top:n,width:r.width,height:r.height},i[0].offsetWidth,i[0].offsetHeight);else{r=document.createElement("canvas");r.width=540;r.height=158;$(r).css({position:"absolute",left:0,top:-16});var l=r.getContext("2d"),g=o.data.concat(),d=g.pop();this.draw(r,l,g,d.color,1);r=this.trimCanvas(r);l=this.parseData({left:s,top:n,width:r.width,height:r.height},i[0].offsetWidth,i[0].offsetHeight)}this.oldData[h]=$.extend({},r,{width:l.width,height:l.height});r=$.extend({},r,{width:o.width,height:o.height});this.createSignatureImg(i,r,o.page,s,n,h,a)}}},getLocalStorage:function(t){try{if(window.localStorage)return window.localStorage.getItem(t);for(var i=document.cookie.split("; "),e=0;e<i.length;e++){var o=i[e].split("=");if(o[0]==t)return unescape(o[1])}return""}catch(t){}},addLocalStorage:function(t,i){try{if(window.localStorage)window.localStorage.setItem(t,i);else{var e=t+"="+escape(i),o=new Date;o.setTime(o.getTime()+864e8);e+="; expires="+o.toGMTString();document.cookie=e}}catch(t){}},parseToString:function(t){if(0==t.length)return"";for(var i="[",e=0;e<t.length;e++)i=0==t[e].type?i+("{type:"+t[e].type+",key:"+t[e].key+",data:'"+t[e].data+"',page:"+t[e].page+",currentTime:'"+t[e].currentTime+"',left:'"+t[e].left+"',top:'"+t[e].top+"',width:'"+t[e].width+"',height:'"+t[e].height+"'},"):i+("{type:"+t[e].type+",key:"+t[e].key+",data:"+this.parsePointsToString(t[e].data)+",page:"+t[e].page+",currentTime:'"+t[e].currentTime+"',left:'"+t[e].left+"',top:'"+t[e].top+"',width:'"+t[e].width+"',height:'"+t[e].height+"'},");i=i.substring(0,i.length-1);return i+"]"},parsePointsToString:function(t){if(0!=t.length){for(var i="[",e=0;e<t.length-1;e++)i+="{x:"+t[e].x+",y:"+t[e].y+",t:"+t[e].t+",w:"+t[e].w+"},";i+="{color:'"+t[t.length-1].color+"'}";return i+"]"}},delArrayOrderKey:function(t,i){if(t)for(var e=0;e<t.length;e++)t[e].key&&t[e].key==i&&t.remove(e)},updateArrayOrderKey:function(t,i,e){if(t)for(var o=0;o<t.length;o++)t[o].key&&t[o].key==i&&$.extend(t[o],e)},createCursorImg:function(t,i,e){var o=$("<img/>").attr("src",t.url).css({position:"absolute",width:t.width,height:t.height,left:i+10,top:e+10}).appendTo(this.container);o.on("mousemove touchmove",function(t){o.css({left:t.clientX+10,top:t.clientY+10})});return o},reviseDateTag:function(){if(this.currentObj){var t=this.currentObj.find(".flipHTML5Signature-eachDate"),i=this.currentObj.parent(),e=parseInt(this.currentObj.css("left")),o=parseInt(this.currentObj.css("top"));this.currentObj.position();var s=this.currentObj.outerWidth(),n=this.currentObj.outerHeight(),h=i.width();i.height();var i=t.outerWidth(),a=t.outerHeight(),r=this.toolBar.height();e+s+2+i<=h?t.css({left:s+2,top:-24}):a+r<=o?t.css({left:s-i,top:-(a+r)}):t.css({left:s-i,top:n+18})}},bindOnCreated:function(t,i){this.onCreated=[t,i]}});(function(w,t,x){window.Remark=t({statics:{},create:function(){this.expires=30;this.currentEditor=w("<div>");this.backgroundColor="rgba(255, 255, 85, 0.5)";this.highlightBackcolor="rgba(2, 255, 245, 0.5)";this.fontSize=5;this.fontName="Times";this.$bookContainer=x.container();this.fontColor="black";this.title="#00000";this.opacity="1.0";this.noteImgContainers={};this.$document=w(document);this.newSizeWrap();var t=this.createToolbar(),i=this.createHighlightToolbar();t.appendChild(this.createColorSelector());document.getElementsByTagName("body")[0].appendChild(t).appendChild(i);document.getElementsByTagName("body")[0].appendChild(i);w(window).on("beforeunload",function(){this.save()}.bind(this));this.oneBindEvent()},bindOnCreated:function(t,i){this.onCreated=[t,i]},bindCreateEvents:function(o,s,n){var h,a,r,l,g,d,c,p=this,u=Math.floor,f=o.offset().left,m=o.offset().top,b=function(t){t.preventDefault();r=t.pageX?t.pageX:t.originalEvent.touches?t.originalEvent.touches[0].pageX:0;l=t.pageY?t.pageY:t.originalEvent.touches?t.originalEvent.touches[0].pageY:0;r&&(0>r-h?(d.left=u((r-f)/x.scale())+"px",d.width=u((h-r)/x.scale())+"px"):(d.left=u((h-f)/x.scale())+"px",d.width=u((r-h)/x.scale())+"px"));l&&(0>t.pageY-a?(d.top=u((l-m)/x.scale())+"px",d.height=u((a-l)/x.scale())+"px"):(d.top=u((a-m)/x.scale())+"px",d.height=u((l-a)/x.scale())+"px"));n&&n.draw(h,a,r,l)};o.css("cursor","crosshair");o.off("mousedown.fliphtml5Remark touchstart.fliphtml5Remark").one("mousedown.fliphtml5Remark touchstart.fliphtml5Remark",function(t){p.unbindCreateEvents();var i=t.button;if(!document.implementation.hasFeature("MouseEvents","2.0"))switch(event.button){case 0:case 1:case 3:case 5:case 7:i=0;break;case 2:case 6:i=2;break;case 4:i=1}if(!i){t.stopPropagation();g=document.createElement("div");c=w(g).css({webkitUserSelect:"text",mozUserSelect:"text",msUserSelect:"text",oUserSelect:"text",userSelect:"text"});d=g.style;n?(c.append(n),g.className="flipHtml5Shape flipHtml5Store"):(d.backgroundColor=s?"rgba(0, 71, 255, 0.33)":p.highlightBackcolor,g.className=(s?"flipHtml5Remark flipHtml5Store":"flipHtml5Highlight flipHtml5Store")+" flipHtml5RemarkCurrentEditor",g.setAttribute("contenteditable",s));o.find(".flipHtml5RemarkCurrentEditor").removeClass("flipHtml5RemarkCurrentEditor");o.append(g);if(i=t.originalEvent.changedTouches){var e=i[0].identifier;h=r=i[0].pageX;a=l=i[0].pageY}else h=r=t.pageX,a=l=t.pageY;p.reBindEvent(c,s);o.on("mousemove.fliphtml5Remark touchmove.fliphtml5Remark",b);o.off("mouseup.fliphtml5Remark touchend.fliphtml5Remark").one("mouseup.fliphtml5Remark touchend.fliphtml5Remark",function(t){var i=t.originalEvent.changedTouches;if(i){if(e!==i[0].identifier)return;r=i[0].pageX;l=i[0].pageY}else r=t.pageX,l=t.pageY;o.off("mousemove.fliphtml5Remark touchmove.fliphtml5Remark");if(10>Math.abs(r-h)||10>Math.abs(l-a))d.left=u((r-f)/x.scale())+"px",d.top=u((l-m)/x.scale())+"px",d.width="280px",d.height="28px";p.parsePresentValue(g);p.parsePresentValue(p.sizeWrap);c.css({outline:"none",backgroundColor:s?p.backgroundColor:p.highlightBackcolor,color:p.fontColor});c.trigger(_event._down);void 0!=p.onCreated&&p.onCreated[1].call(p.onCreated[0]);p.save()})}})},oneBindEvent:function(){var e=this;this.$document.on("keydown.flipHtml5RemarkDelete",function(t){var i=t.keyCode;t.altKey||t.ctrlKey||t.shiftKey||(e.editing&&i===KEY_CODE_DELETE&&e.currentEditor&&"flipHtml5Remark flipHtml5Store"!==e.currentEditor[0].className&&(e.currentEditor.remove(),e.removeSizeWrap(),e.save()),e.currentEditor&&i===KEY_CODE_LEFT&&i===KEY_CODE_RIGHT&&i===KEY_CODE_UP&&i===KEY_CODE_DOWN&&t.stopPropagation())})},parsePresentValue:function(t){if(document.getElementsByTagName("body")[0].contains(t)){var i,e;i=t.parentNode;var o=t.style,s=w(t);e=100/i.offsetHeight;i=100/i.offsetWidth;o.width=s.width()*i+"%";o.height=s.height()*e+"%";o.left=t.offsetLeft*i+"%";o.top=t.offsetTop*e+"%"}},reBindEvent:function(i,n){var h=this,a;i.on(_event._down,function(t){t.stopPropagation();w(this).css({outline:"none"});h.removeSizeWrap();h.addSizeWrap(this,n);i.on("mousedown.flipHtml5Annotation touchstart.flipHtml5Annotation",function(t){t.stopPropagation()})}).on("mousedown mouseup touchend",function(t){t.stopPropagation()});i.on("sizeChange",function(t,i,e,o,s){a=this.style;i&&(a.width=i-16+"px");e&&(a.height=e-16+"px");o&&(a.left=o+8+"px");s&&(a.top=s+8+"px");h.showToolbar(this,n)});i.on("change cut drop paste keydown",function(t){if(!(t.altKey||t.ctrlKey||t.shiftKey)){var i=this,e=i.offsetHeight,o=i.style,s=o.height;setTimeout(function(){o.height="auto";o.height=i.scrollHeight>e?100*i.scrollHeight/i.parentNode.offsetHeight+"%":s},0)}})},unbindCreateEvents:function(){this.contextArray&&(this.contextArray.css("cursor","auto"),this.contextArray.off("mousedown.fliphtml5Remark touchstart.fliphtml5Remark"))},newSizeWrap:function(){var t,h,a,r,l,g,d,c,p=this,i=1,u=p.sizeWrap=document.createElement("div"),e=[],f=Math.floor,m=p.sizeWrapStyle=u.style;for(u.className="flipHtml5SizeWrap";9>i;)t=document.createElement("div"),t.className="flipHtml5SizePoint flipHtml5SizePoint"+i,u.appendChild(t),e.push(t),i++;p.northResize(e[0]).westResize(e[0]);p.northResize(e[1]);p.eastResize(e[2]).northResize(e[2]);p.eastResize(e[3]);p.eastResize(e[4]).southResize(e[4]);p.southResize(e[5]);p.southResize(e[6]).westResize(e[6]);p.westResize(e[7]);w(u).on("pointerdown.flipHtml5SizeWrap",function(t){t.stopPropagation()});w(u).on("mousedown.flipHtml5SizeWrap touchstart.flipHtml5SizeWrap",function(t){t.preventDefault();t.stopPropagation();c=p.currentEditor;var e=u.offsetLeft,o=u.offsetTop,s=t.pageX||t.originalEvent.touches[0].pageX,n=t.pageY||t.originalEvent.touches[0].pageY;w.each([p.$context,w(p.toolbarContainer),w(p.highlightToolbarContainer)],function(t,i){i.on("mousemove.flipHtml5SizeWrap touchmove.flipHtml5SizeWrap",function(t){t.preventDefault();t.stopPropagation();h=t.pageX?t.pageX:t.originalEvent.touches?t.originalEvent.touches[0].pageX:0;a=t.pageY?t.pageY:t.originalEvent.touches?t.originalEvent.touches[0].pageY:0;h&&(d=f(e-(s-h)/x.scale()),l!==d&&(m.left=d+"px",l=d,c.trigger("sizeChange",[0,0,d,0])));a&&(g=f(o-(n-a)/x.scale()),r!==g&&(m.top=g+"px",r=g,c.trigger("sizeChange",[0,0,0,g])))});i.one("mouseup.flipHtml5SizeWrap touchend.flipHtml5SizeWrap",function(){w.each([p.$context,w(p.toolbarContainer),w(p.highlightToolbarContainer)],function(){this.off("mouseup.flipHtml5SizeWrap touchend.flipHtml5SizeWrap");this.off("mousemove.flipHtml5SizeWrap touchmove.flipHtml5SizeWrap")});p.parsePresentValue(c[0]);p.parsePresentValue(u);p.save()})})}).on(_event._down,function(t){t.preventDefault();t.stopPropagation()});return u},addSizeWrap:function(t,i){var e=this.sizeWrap,o=this.sizeWrap.style;i?(t.style.zIndex=999,o.zIndex=998):(t.style.zIndex=998,o.zIndex=999);o.width=t.offsetWidth+16+"px";o.height=t.offsetHeight+16+"px";o.left=t.offsetLeft-8+"px";o.top=t.offsetTop-8+"px";o.display="block";t=w(t);this.$context=t.parent();t.before(e);this.parsePresentValue(e);this.currentEditor=t;this.showToolbar(t,i);this.editing=!0},removeSizeWrap:function(){this.currentEditor[0].style.zIndex="2";this.sizeWrapStyle.zIndex="1";this.sizeWrapStyle.display="none";this.hideToolbar();this.editing=!1},hideToolbar:function(){this.toolbarContainer.style.display="none";this.highlightToolbarContainer.style.display="none"},showToolbar:function(t,i){var e=i?this.toolbarContainer:this.highlightToolbarContainer,o=e.style,s=w(t),n=s.css("backgroundColor").replace(/\s+/g,"");0<=n.indexOf("rgba")&&(n=n.replace(/a/,"").replace(/\,[0-9]+(\.[0-9]*)?\)/,")"));w(e).find(".flipHtml5RemarkImage-backcolor").css("backgroundColor",n);this.currentEditor=s;o.left=s.offset().left-8+"px";o.top=s.offset().top-(i?80:30)+"px";o.display="block"},createToolbar:function(){for(var t=this.toolbarContainer=document.createElement("div"),i=0,e="bold italic strikeThrough underline forecolor backcolor blockquote insertUnorderedList insertOrderedList justifyLeft justifyCenter justifyRight createLink removeFormat outdent indent undo redo delete paragraph fontsize fontname".split(" ");e[i];)t.appendChild(this.createButton(e[i])),i++;t.className="fliphtml5RemarkToolbarContainer";w(t).on(_event._down,function(t){t.stopPropagation()});return t},createHighlightToolbar:function(){for(var t=this.highlightToolbarContainer=document.createElement("div"),i=0,e=["backcolor","delete"];e[i];)t.appendChild(this.createButton(e[i],!0)),i++;t.className="fliphtml5RemarkHighlightToolbarContainer";w(t).on(_event._down,function(t){t.preventDefault();t.stopPropagation()});return t},createButton:function(i,t){var e=this,o,s;switch(i){case"hr":return s=document.createElement("hr"),s.className="flipHtml5RemarkHr",s;case"paragraph":return o="Paragraph;Address;Preformatted;Title 1;Title 2;Title 3;Title 4;Title 5;Title 6".split(";"),s="p address pre h1 h2 h3 h4 h5 h6".split(" "),s=e.createSelect(o,s,i);case"fontname":return o="Arial Century Courier Gentium Georgiae Impact King Lalit Modena Papyrus Tahoma TeX Times Verdana Verona cursive fantasy monospace serif".split(" "),s="Arial Century Courier Gentium Georgiae Impact King Lalit Modena Papyrus Tahoma TeX Times Verdana Verona cursive fantasy monospace serif".split(" "),s=e.createSelect(o,s,i,"fontFamily");case"fontsize":return o=[1,2,3,4,5,6,7],s=[1,2,3,4,5,6,7],s=e.createSelect(o,s,i,"fontSize");case"forecolor":return e.createColorButton(i);case"backcolor":return e.createColorButton(i,t);default:return o=document.createElement("a"),o.href="javascript:void(0);",s=document.createElement("div"),s.className="flipHtml5RemarkButtonImage flipHtml5RemarkImage-"+i,s.title=i,o.className="flipHtml5RemarkButton",w(o).on(_event._down,function(t){t.preventDefault();t.stopPropagation();e.exec(i)}),o.appendChild(s),o}},createColorButton:function(e,o){var i,s,n,h,a=this,r;i=document.createElement("a");i.href="javascript:void(0);";s=document.createElement("div");s.className="flipHtml5RemarkButtonImage flipHtml5RemarkImage-"+e;s.title=e;i.className="flipHtml5RemarkButton";n=document.createElement("div");n.className="flipHtml5RemarkColorBar";"backcolor"===e&&(n.style.display="none");w(i).on(_event._down,function(t){t.preventDefault();t.stopPropagation();r=a.opacityHandel;h=a.colorSelector;w(i).after(h);h.style.left=this.offsetLeft+"px";h.style.top=this.offsetTop+22+"px";h.style.display="block";"forecolor"===e&&(r.hide(),a.opacity=1);"backcolor"===e&&(a.opacity=r.val(),r.show());r.setOpacity(parseFloat(parseFloat(a.currentEditor.css("backgroundColor").replace(/\s*\)*/g,"").split(",")[3]).toFixed(2)));a.$context.one(_event._down,function(t){t.preventDefault();h.style.display="none"});a.currentEditor.one(_event._down,function(t){t.preventDefault();h.style.display="none"});a.$bookContainer.one(_event._down,function(t){t.preventDefault();h.style.display="none"});a.$colorSelector.off("colorSelected").one("colorSelected",function(t,i){t.preventDefault();"backcolor"===e?s.style.backgroundColor=i:n.style.backgroundColor=i;h.style.display="none";a.exec(e,i,o)})});i.appendChild(n);i.appendChild(s);return i},createSelect:function(t,i,e,o,s){var n=document.createElement("select"),h=0,a=this,r;n.className="flipHtml5RemarkSelect flipHtml5Remark-"+e;for(n.style[o]=i[1];t[h];)r=document.createElement("option"),r.className="flipHtml5RemarkOption-"+e+" flipHtml5RemarkOption-"+i[h],r.innerHTML=t[h],r.value=i[h],r.style[o]=i[h],0===h&&(r.setAttribute("selected",!0),s&&(r.style.display="none")),n.appendChild(r),h++;n.onchange=o?function(){a.exec(e,this[this.selectedIndex].value);this.style[o]=this[this.selectedIndex].value;s&&(this.selectedIndex=0)}:function(){a.exec(this[this.selectedIndex].value);s&&(this.selectedIndex=0)};return n},createColorSelector:function(){var t,i,e,o,s=this,n="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" "),h=document.createElement("table"),a=this.colorSelector=document.createElement("a"),r=this.$colorSelector=w(a),l=document.createElement("input"),g=s.createOpacityPlugin(),d=function(){l.value=l.style.backgroundColor=this.title.toUpperCase()},c=function(){r.trigger("colorSelected",[s.parseColorToRGBA(this.title,g.val())])};a.className="flipHtml5RemarkColorSelectorWrap";h.setAttribute("border","1");a.style.display="none";a.href="javascript:void(0);";l.className="flipHtml5RemarkColorSelectorMessage";l.value="#000000";l.setAttribute("disabled","true");a.appendChild(l);a.appendChild(g.container);a.appendChild(h);r.on(_event._down,function(t){t.preventDefault();t.stopPropagation()});for(e=0;7>e;e++){o=document.createElement("tr");for(i=0;10>i;i++)t=document.createElement("td"),t.className="flipHtml5RemarkColorSelectorBlock",t.title=n[10*e+i],t.style.backgroundColor=n[10*e+i],w(t).on(_event._over,d),w(t).on(_event._down,c),o.appendChild(t);h.appendChild(o)}return a},createOpacityPlugin:function(){var i,e,o,s,n,h,a=.5,r=this,l=Math.floor,t=document.createElement("div"),g=document.createElement("div"),d=document.createElement("span"),c=g.style,p,u=r.$document,f=r.changeOpacity,m=w(g),b=w(t);d.className="flipHtml5RemarkOpacitySpan";t.className="flipHtml5RemarkOpacity";t.style.height="3px";t.style.top="4px";g.className="flipHtml5RemarkOpacityCursor";g.style.top="-5px";t.appendChild(d);t.appendChild(g);b.on(_event._down,function(t){t.preventDefault();t.stopPropagation();p=r.currentEditor;if(e=t.pageX?t.pageX:t.originalEvent.touches?t.originalEvent.touches[0].pageX:0)o=e-b.offset().left,0>o&&(o=0),145<o&&(o=145),c.left=o+"px",p.css("backgroundColor",f(p,o/145)),d.innerHTML="Opacity: "+(o/145).toFixed(2),a=o/145});m.on("mousedown touchstart",function(t){t.preventDefault();t.stopPropagation();p=r.currentEditor;o=s=parseInt(c.left,10);i=t.pageX?t.pageX:t.originalEvent.touches?t.originalEvent.touches[0].pageX:0;n=o-i;u.on("mousemove.flipHtml5RemarkOpacity touchmove.flipHtml5RemarkOpacity",function(t){t.preventDefault();t.stopPropagation();if(e=t.pageX?t.pageX:t.originalEvent.touches?t.originalEvent.touches[0].pageX:0)h=l(n+e),0>h&&(h=0),145<h&&(h=145),s!==h&&(c.left=h+"px",p.css("backgroundColor",f(p,h/145)),d.innerHTML="Opacity: "+(h/145).toFixed(2),a=h/145)});u.one("mouseup touchend",function(){u.off("mousemove.flipHtml5RemarkOpacity touchmove.flipHtml5RemarkOpacity")})});return this.opacityHandel={val:function(t){t&&(t=parseInt(t,10)||1,1<t&&(t=1),0>t&&(t=0),this.setOpacity(t),a=t);return a},container:t,show:function(){t.style.display=""},hide:function(){t.style.display="none"},setOpacity:function(t){if(void 0===t||1<t||isNaN(t))t=1;0>t&&(t=0);c.left=145*t+"px";d.innerHTML="Opacity: "+t;a=t}}},changeOpacity:function(t,i){var e=t.css("backgroundColor").replace(/\s*/g,"");0<=e.indexOf("rgba")&&(0<=e.indexOf(",0)")||0<=e.indexOf(",1)"))?t.css("backgroundColor",e.replace(/b\(/,"ba(").replace(/,\d*\)$/,","+i+")")):t.css("backgroundColor",e.replace(/b\(/,"ba(").replace(/d*\)$/,","+i+")").replace(/\d*\.\d*,/g,""))},parseColorToRGBA:function(t,i){var e,o,s;i=parseFloat(i);1<=i&&(i=1);0>=i&&(i=0);e=parseInt(t.substring(1,3),16);o=parseInt(t.substring(3,5),16);s=parseInt(t.substring(5,7),16);return"rgba("+e+","+o+","+s+","+i+")"},exec:function(t,i,e){switch(t){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"address":case"pre":case"p":case"blockquote":document.execCommand("formatBlock",!1,t);break;case"createLink":(t=prompt("Enter a URL here","http://"))&&""!==t&&"http://"!==t&&(0>t.indexOf("http")&&(t="http://"+t),document.execCommand("createLink",!0,t));break;case"fontsize":document.execCommand(t,!1,i);break;case"fontname":document.execCommand(t,!1,i);this.fontName=i;break;case"forecolor":document.execCommand(t,!1,i);this.fontColor=i;break;case"backcolor":this.currentEditor[0].style.backgroundColor=i;e?this.highlightBackcolor=i:this.backgroundColor=i;break;case"delete":this.removeSizeWrap();this.currentEditor.remove();this.save();break;default:document.execCommand(t,!1,null)}this.currentEditor.trigger(_event._down)},northResize:function(t){var o,s,n,h,a,r=this,l=Math.floor,g,d;w(t).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(t){t.preventDefault();t.stopPropagation();s=r.currentEditor;g=r.sizeWrap;d=r.sizeWrapStyle;a=r.$context;var i=g.offsetHeight||20,e=t.pageY||t.originalEvent.touches[0].pageY;a.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){a.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");r.parsePresentValue(s[0]);r.parsePresentValue(g);r.save()});a.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(t){t.preventDefault();t.stopPropagation();t.pageY?o=t.pageY:t.originalEvent.touches&&(o=t.originalEvent.touches[0].pageY);o&&(h=l(i+(e-o)/x.scale()),n!==h&&20<h&&(d.top=o-a.offset().top+"px",d.height=h+"px",n=h,s.trigger("sizeChange",[0,h,0,o-a.offset().top])))})});return this},westResize:function(t){var o,s,n,h,a,r=this,l=Math.floor,g,d;w(t).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(t){t.preventDefault();t.stopPropagation();a=r.$context;g=r.sizeWrap;d=r.sizeWrapStyle;h=r.currentEditor;var i=g.offsetWidth||40,e=t.pageX||t.originalEvent.touches[0].pageX;a.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){a.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");r.parsePresentValue(h[0]);r.parsePresentValue(g);r.save()});a.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(t){t.preventDefault();t.stopPropagation();!(o=t.pageX)&&t.originalEvent.touches&&(o=t.originalEvent.touches[0].pageX);o&&(n=l(i+(e-o)/x.scale()),s!==n&&40<n&&(d.left=o-a.offset().left+"px",d.width=n+"px",s=n,h.trigger("sizeChange",[n,0,o-a.offset().left])))})});return this},eastResize:function(t){var o,s,n,h,a,r=this,l=Math.floor,g,d;w(t).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(t){t.preventDefault();t.stopPropagation();n=r.currentEditor;a=r.$context;g=r.sizeWrap;d=r.sizeWrapStyle;var i=g.offsetWidth||40,e=t.pageX||t.originalEvent.touches[0].pageX;a.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){a.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");r.parsePresentValue(n[0]);r.parsePresentValue(g);r.save()});a.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(t){t.preventDefault();t.stopPropagation();t.pageX?o=t.pageX:t.originalEvent.touches&&(o=t.originalEvent.touches[0].pageX);o&&(s=l(i-(e-o)/x.scale()),h!==s&&40<s&&(d.width=s+"px",h=s,n.trigger("sizeChange",[s])))})});return this},southResize:function(t){var o,s,n,h,a=this,r=Math.floor,l,g,d;w(t).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(t){t.preventDefault();t.stopPropagation();h=a.$context;d=a.sizeWrap;g=a.sizeWrapStyle;s=a.currentEditor;var i=d.offsetHeight||20,e=t.pageY||t.originalEvent.touches[0].pageY;h.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){h.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");a.parsePresentValue(s[0]);a.parsePresentValue(d);a.save()});h.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(t){t.preventDefault();t.stopPropagation();t.pageY?o=t.pageY:t.originalEvent.touches&&(o=t.originalEvent.touches[0].pageY);o&&(n=r(i-(e-o)/x.scale()),l!==n&&20<n&&(g.height=n+"px",l=n,s.trigger("sizeChange",[0,n])))})});return this},parseRemark:function(t,i){var e,o=this,s;i.find(".flipHtml5Store").remove();o.removeSizeWrap();this.sizeWrapStyle&&(this.sizeWrapStyle.display="none",w(this.sizeWrap).remove());o.newSizeWrap();o.contextArray=o.contextArray?o.contextArray.add(i):i;try{window.localStorage?e=window.localStorage.getItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+t)||"":(s=RegExp("(?:(?:^|.*;\\s*)"+window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+t+"\\s*\\=\\s*([^;]*).*$)|^.*$"),e=(document.cookie||"").replace(s,"$1")),i.append(e.replace(/#@&/g,";")),i.find(".flipHtml5Remark").each(function(){o.reBindEvent(w(this),!0)}),i.find(".flipHtml5Highlight").each(function(){o.reBindEvent(w(this),!1)}),i.on("mousedown.fliphtml5remarkHide touchstart.fliphtml5remarkHide",function(){o.save();o.removeSizeWrap();o.currentEditor.blur();o.currentEditor.off("mousedown.flipHtml5Annotation touchstart.flipHtml5Annotation")})}catch(t){}},getPageContent:function(t){var i=0,e,o="";for(t=t.find(".flipHtml5Store");e=t[i];)if(i++,""!==e.innerHTML&&""!==w(e).text()||""!==e.style.backgroundColor&&"transparent"!==e.style.backgroundColor&&0!==parseFloat(e.style.backgroundColor.split(",")[3]))o+=e.outerHTML;return o.replace(/\s*\n\s*/g,"").replace(/;/g,"#@&")},storageByIndex:function(t,i){var e,o=this.getPageContent(i);try{window.localStorage?(window.localStorage.removeItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+t),o&&window.localStorage.setItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+t,o)):(o?(e=new Date,e.setDate(e.getDate()+this.expires)):e=new Date("01 Jan 1970 00:00:01"),document.cookie=window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+t+"="+o+";expires="+e.toUTCString()+";")}catch(t){throw t}return o},save:function(){var t,i=x.getCurrentPages();for(t=0;t<i.length&&this.noteImgContainers[x.getBookType()];t++)this.noteImgContainers[x.getBookType()][i[t]]&&this.storageByIndex(i[t],this.noteImgContainers[x.getBookType()][i[t]])},restoreRemark:function(t,i,e){void 0!==t&&(this.noteImgContainers[t]||(this.noteImgContainers[t]={}),this.noteImgContainers[t][i]=e,t==x.getBookType()&&(this.removeSizeWrap(),this.parseRemark(i,this.noteImgContainers[x.getBookType()][i])))},setContainers:function(t,i,e){this.restoreRemark(t,i,e)},addHighlightEvent:function(){this.unbindCreateEvents();this.addEvents(!0)},addEvents:function(t){var i=0,e,o=this.contextArray;for(this.unbindCreateEvents();e=o.eq(i++),0<e.length;)this.bindCreateEvents(e,!t)},destroy:function(t){if(t)try{window.localStorage.clear()}catch(t){throw t}this.$document.off("keydown.flipHtml5RemarkDelete");return this.unbindCreateEvents()}})})(window.jQuery,window.Class,window.BookInfo);var ReportPanel=Class({create:function(t){this.parent=t;this.visible=false;this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.initReportBtn();this.parent.append(this.reportBtn);this.initReportBox();this.initSucc();this.initCss();this.initTransEvent()},initReportBtn:function(){this.reportBtn=$("<div class='report' style='display: none;'></div>");this.reportIcon=$("<img style='pointer-events:none;'></img>");this.iconUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABD0lEQVQ4jc2UUXHDMAyG/zAIhIxBGSwMOgYLgxVCIYTBMgZl0AzByiBh0DD49mDdVecqiR+rO905tvxF9i9ZenWr/AcQxXSSjja+SPp5glRVPvUAOu+AiWebgE8fu2pADXxloBk4m88ReAvYBxmNLpsxWD9vAZtgwx34AE7B2iXPMBJlkHSQtEgag//Wtv4u6U3S7EVZU7mxDa2Nvd0kzZJ+bVyk8i04Xm5/FKgsuy+AFhiAxUEWm+tczC5wsQzzuvReW8y9BIht2AL6itgF9qSibTdgrd1hXwIUqSumjeNOFlMkilf6OwAO+R2XAhtS716Bo/nV5g5rwL3nq5Z0UipwKXVOr9RFD8haYb+k/QOqf1jCsGrT2QAAAABJRU5ErkJggg==";this.reportIcon.attr("src",this.iconUrl);this.reportIcon.css({position:"absolute",top:"5px",left:"10px"});this.reportIcon.changeButtonColor(this.color.toString())},initReportBox:function(){this.container=$("<div class='reportContainer'></div>");this.reportBox=$("<div class='reportBox'></div>");this.content=$("<div></div>");this.closeUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAf0lEQVQ4jeWUUQrAIAxD4+7XA+Ya7oDZzxBx2iq4LwOCYvqstQgcp9SsDQAk3VPBKdk7Lf6rNZHMldGFkcyuSRIAGEkBMEnojdbjAiNoby8EOoHdg6aALSDIeg5YQ7261vq88lb9euUeYAQNgUE2a23jwZYbewY2qG/R9s/hQD1ydUfwHIkLMwAAAABJRU5ErkJggg==";this.initTltle();this.reportBox.append(this.content);this.container.append(this.reportBox);this.parent.append(this.container);this.initSelect();this.initTextArea();this.initButton();this.initAlert();this.initBoxCss();this.initBoxEvent()},initAlert:function(){this.alert=$("<div></div>");this.alertBox=$("<div></div>");this.alertBg=$("<div></div>");this.alertDesc=$("<div></div>");this.alertBtn=$("<div></div>");this.alertBox.append(this.alertDesc).append(this.alertBtn);this.alert.append(this.alertBox);this.container.append(this.alert)},initSucc:function(){this.succBox=$("<div></div>");this.succBox.css({position:"absolute",color:"#fff","pointer-events":"none","z-index":"10001","border-radius":"5px",left:(windowWidth-280)/2+"px",top:(windowHeight-70)/3+"px","font-size":"20px",width:"280px",height:"70px","text-align":"center",background:"#5CB95C","line-height":"70px"})},initTltle:function(){this.boxTitle=$("<div></div>");this.close=$("<div></div>");this.boxTitle.css({height:"54px","font-size":"14px","line-height":"54px",padding:"0 28px","border-bottom":"1px solid #EEEEEE"});this.close.css({position:"absolute",background:"url("+this.closeUrl+") 0 0 no-repeat",cursor:"pointer",right:"28px",top:"17px",width:"20px",height:"20px"});if(bookConfig.RightToLeft){this.close.css({left:"28px",right:"auto"});this.boxTitle.css({"text-align":"right"})}this.boxTitle.append(this.close);this.reportBox.append(this.boxTitle)},initSelect:function(){this.select=$("<select></select>");this.selectIcon=$("<div></div>");this.select.css({width:"100%",cursor:"pointer",padding:"9px 15px","border-radius":"4px",border:"1px solid #DDDDDD",appearance:"none","-moz-appearance":"none",background:"#F4F4F4","-webkit-appearance":"none"});this.selectIcon.css({position:"absolute",cursor:"pointer",right:"44px",top:"98px","z-index":"1","pointer-events":"none",border:"8px solid #969696","border-left":"6px solid transparent","border-bottom-color":"transparent","border-right":"6px solid transparent"});if(bookConfig.RightToLeft){this.selectIcon.css({left:"44px",right:"auto"});this.select.css({direction:"rtl"})}var t=["","  ","  "," ","   ",""];for(var i=0;i<t.length;i++){var e=$("<option>"+t[i]+"</option>");if(i==0)e=$("<option disabled selected >"+t[i]+"</option>");e.css({padding:"9px 0"});this.select.append(e)}this.content.append(this.select).append(this.selectIcon)},initTextArea:function(){this.inputBox=$("<div></div>");this.textarea=$("<textarea placeholder='()'></textarea>");this.number=$("<input placeholder=',,'></input>");this.inputBox.css({width:"100%","margin-top":"20px"});this.textarea.css({padding:"9px 15px",height:"120px",width:"350px","border-radius":"4px",border:"1px solid #DDDDDD",background:"#F4F4F4",resize:"none"});this.number.css({"margin-top":"16px",width:"350px","border-radius":"4px",border:"1px solid #DDDDDD",background:"#F4F4F4",padding:"9px 15px"});if(bookConfig.RightToLeft){this.textarea.css({"text-align":"right"});this.number.css({"text-align":"right"})}this.inputBox.append(this.textarea).append(this.number);this.content.append(this.inputBox)},initButton:function(){this.btnBox=$("<div></div>");this.confirm=$("<div></div>");this.cancel=$("<div></div>");this.btnBox.append(this.cancel).append(this.confirm);this.initButtonCss();this.content.append(this.btnBox);var t=[this.confirm,this.cancel];for(var i=0;i<t.length;i++){t[i].on("mouseenter",function(){$(this).css({opacity:"0.85"})});t[i].on("mouseleave",function(){$(this).css({opacity:"1"})});t[i].on("mousedown",function(){$(this).css({top:"1px"})});t[i].on("mouseup",function(){$(this).css({top:"0"})})}this.cancel.bind(_event._click,function(){this.hide()}.bind(this));this.confirm.bind(_event._click,function(){var t=/^[ .,?!]+$/;var i=this.textarea[0].value;var e=this.number[0].value;if(this.select[0].options.selectedIndex==0){this.alertDesc.text("");this.alert.fadeIn(200);return}if(!i||t.test(i)){this.alertDesc.text("");this.alert.fadeIn(200);return}if(!e||t.test(e)){this.alertDesc.text("");this.alert.fadeIn(200);return}var o=this.select[0].options.selectedIndex;var s={book_url:window.location.href,report_action:o,report_text:this.textarea[0].value,report_phone:this.number[0].value};$.get(bookConfig.reportUrl,s,function(t){this.hide();this.succBox.css({left:(windowWidth-280)/2+"px",top:(windowHeight-70)/3+"px"});if(t&&t.indexOf("(")==0){t=JSON.parse(t.replace("(","").replace(")",""));this.parent.append(this.succBox);this.succBox.fadeIn(200).text(t.mess);if(t.status==1){this.succBox.css({background:"#5CB95C"})}else{this.succBox.text(","+t.mess);this.succBox.css({background:"#F78989"})}setTimeout(function(){this.succBox.fadeOut(300,function(){this.succBox.remove()}.bind(this))}.bind(this),3300)}else{this.parent.append(this.succBox);this.succBox.fadeIn(200).text(",");this.succBox.css({background:"#F78989"});setTimeout(function(){this.succBox.fadeOut(300,function(){this.succBox.remove()}.bind(this))}.bind(this),3300)}}.bind(this))}.bind(this))},initButtonCss:function(){this.btnBox.css({"text-align":"center",margin:"30px 0 0"});this.confirm.css({display:"inline-block",position:"relative",margin:"0 5px",background:"#1B7FCB",height:"34px","line-height":"34px",width:"92px","border-radius":"4px",cursor:"pointer",color:"#fff"});this.cancel.css({display:"inline-block",position:"relative",margin:"0 5px",height:"34px","line-height":"34px",width:"92px","border-radius":"4px",background:"#D9D9D9",cursor:"pointer",color:"#666666"});if(bookConfig.RightToLeft){this.btnBox.css({direction:"rtl"})}},initBoxCss:function(){this.container.css({background:"rgba(11,11,11,0.25)",display:"none",position:"absolute","z-index":"1000",width:"100%",height:"100%",top:"0",left:"0",top:"0",bottom:"0"});this.alert.css({background:"rgba(11,11,11,0.5)",display:"none",position:"absolute","z-index":"1000",width:"100%",height:"100%",top:"0",left:"0",top:"0",bottom:"0"});this.alertBox.css({width:"450px","border-radius":"4px",height:"150px",color:"#333",position:"absolute",left:"50%",top:"50%",background:"#f5f5f5","-webkit-transform":"translate(-50%,-50%)","-o-transform":"translate(-50%,-50%)","-moz-transform":"translate(-50%,-50%)","-ms-transform":"translate(-50%,-50%)",transform:"translate(-50%,-50%)"});this.alertDesc.css({width:"450px",height:"150px",color:"#333",position:"absolute","line-height":"85px","text-align":"center","font-size":"20px"});this.alertBtn.css({position:"absolute",width:"76px",height:"34px",bottom:"30px",left:"190px",background:"#1B7FCB",height:"34px","font-size":"14px","line-height":"34px","border-radius":"4px",cursor:"pointer","text-align":"center",transition:"opacity 0.3s","-webkit-transition":"opacity 0.3s",color:"#fff"});this.reportBox.css({"font-size":"14px",background:"#fff","border-radius":"2px",position:"absolute",width:"438px",height:"443px",left:"50%",top:"50%","-webkit-transform":"translate(-50%,-50%)","-o-transform":"translate(-50%,-50%)","-moz-transform":"translate(-50%,-50%)","-ms-transform":"translate(-50%,-50%)",transform:"translate(-50%,-50%)"});this.content.css({padding:"30px 28px",background:"#fff"})},initBoxEvent:function(){this.reportBtn.bind("click",function(){this.show()}.bind(this));this.close.bind("click",function(){this.hide()}.bind(this));this.alertBtn.bind("click",function(){this.alert.fadeOut(200)}.bind(this));if(isPad()||isPhone()){$(window).on("focusout",function(){window.scrollTo(0,0)})}},initCss:function(){this.reportBtn.css({position:"absolute",color:this.fontColor.rgba(.5),"z-index":"1000",transform:"translate(0,0)",transition:"transform 0.3s",cursor:"pointer","font-size":"14px","line-height":"30px",padding:"0 10px 0 10px","border-top-left-radius":"15px","border-bottom-left-radius":"15px",right:"0",bottom:"12%"})},initTransEvent:function(){},onResize:function(){},show:function(){this.visible=true;this.container.fadeIn(300)},hide:function(){this.visible=false;this.container.fadeOut(300)},showOrHide:function(){if(this.visible){this.hide()}else{this.show()}}});var PhoneReportPanel=Class({create:function(t){this.visible=false;this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.parent=t;this.reportBtn=$("<div class='report' style='display:none'></div>");this.reportPanelBg=$("<div class='reportPanelBg'></div>");this.initReportBox();this.container.append(this.reportPanelBg);this.initSucc();this.initCss()},initSelect:function(){this._super();this.select.css({padding:"6px 10px"});this.selectIcon.css({right:"30px",top:"32px",border:"6px solid #969696","border-left":"5px solid transparent","border-bottom-color":"transparent","border-right":"5px solid transparent"});if(bookConfig.RightToLeft){this.selectIcon.css({left:"30px",right:"auto"});this.select.css({direction:"rtl"})}},initBoxCss:function(){this._super();this.reportPanelBg.css({"z-index":"-1",background:"rgba(11,11,11,0.85)",position:"absolute",width:"100%",height:"100%",top:"0",left:"0",top:"0",bottom:"0"});this.reportBox.css({"font-size":"14px",background:"#fff","border-radius":"2px",position:"absolute",width:"300px",height:"238px",left:"50%",top:"20px","-webkit-transform":"translate(-50%,0)","-o-transform":"translate(-50%,0)","-moz-transform":"translate(-50%,0)","-ms-transform":"translate(-50%,0)",transform:"translate(-50%,0)"});this.alertBox.css({width:"320px",height:"130px",top:"65px","-webkit-transform":"translate(-50%,0)","-o-transform":"translate(-50%,0)","-moz-transform":"translate(-50%,0)","-ms-transform":"translate(-50%,0)",transform:"translate(-50%,0)"});this.alertDesc.css({"font-size":"18px",width:"320px",height:"130px","line-height":"70px"});this.alertBtn.css({position:"absolute",width:"80px",bottom:"25px",left:"120px",height:"30px","line-height":"30px"});this.content.css({padding:"20px"})},initTextArea:function(){this._super();this.inputBox.css({"margin-top":"10px"});this.textarea.css({width:"238px",padding:"6px 10px",height:"18px"});this.number.css({width:"238px",padding:"6px 10px","margin-top":"6px"})},initButtonCss:function(){this._super();this.btnBox.css({"text-align":"center",margin:"10px 0 0"});this.confirm.css({width:"100%",height:"30px",margin:"0","line-height":"30px"});this.cancel.css({width:"100%",height:"30px",margin:"10px 0 0","line-height":"30px"});this.btnBox.append(this.confirm).append(this.cancel)},initBoxEvent:function(){this._super();this.reportPanelBg.bind(_event._click,function(){this.hide()}.bind(this))},initTltle:function(){this.close=$("<div></div>");this.close.css({display:"none",background:"#fff url("+this.closeUrl+") 4px 4px no-repeat",position:"absolute",right:"0",top:"-30px",width:"28px","border-radius":"50%",height:"28px"});this.reportBox.append(this.close)}}).extend(ReportPanel);Class("WindowMagnifierBox",{Package:"PageItem",create:function(t){this.parent=t;this.canZoom=global.canMagnifierZoom=!1;this.loadH=this.loadW=0;this.maxScale=2;this.magnifierH=this.magnifierW=130;this.shadowSize=this.maxScale*this.magnifierW*.03;this.drawH=this.drawW=0;this.ratioW=this.ratioH=1;this.initHtml();this.initCss()},initHtml:function(){this.magnifierZoom=$("<div class='magnifierZoom'></div>");this.bg=$("<div></div>");this.canvas=$("<canvas width='0' height='0'></canvas>");this.ctx=this.canvas[0].getContext("2d");this.magnifierZoom.append(this.canvas).append(this.bg);tmpContainer.append(this.magnifierZoom)},initCss:function(){this.magnifierZoom.css({background:"#fff",position:"absolute","pointer-events":"none","border-radius":"50%",display:"none","box-shadow":"0 0 "+this.shadowSize/3+"px #999","-ms-box-shadow":"0 0 "+this.shadowSize/3+"px #999","-moz-box-shadow":"0 0 "+this.shadowSize/3+"px #999","-webkit-box-shadow":"0 0 "+this.shadowSize/3+"px #999","z-index":"1000"});this.bg.css({position:"absolute","pointer-events":"none","border-radius":"50%",width:"100%",height:"100%","box-shadow":"0 0 "+this.shadowSize+"px #999 inset","-ms-box-shadow":"0 0 "+this.shadowSize+"px #999 inset","-moz-box-shadow":"0 0 "+this.shadowSize+"px #999 inset","-webkit-box-shadow":"0 0 "+this.shadowSize+"px #999 inset","z-index":"2"});this.canvas.css({background:"#fff","border-radius":"50%","pointer-events":"none","transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","-moz-transform-origin":"0 0","-webkit-transform-origin":"0 0",position:"absolute","z-index":"1"})},onResize:function(){},setImg:function(t,i,e){this.side=t;this.offset=i.offset();t=i.attr("src").removeStartFrom("?");this.showImg=$('<img src="'+t+'">');if(this.loadW)this.beforeDraw(e,i);else this.showImg.on("load",function(){this.loadW=this.showImg[0].naturalWidth;this.loadH=this.showImg[0].naturalHeight;this.beforeDraw(e,i)}.bind(this))},beforeDraw:function(t,i){this.rateW=this.loadW/i.width();this.rateH=this.loadH/i.height();var e=this.loadW/this.loadH,o=i.width()/i.height();this.ratioH=e/o;this.ratioW=o/e;this.drawW=this.rateW*this.magnifierW;this.drawW<this.magnifierW&&(this.drawW=this.magnifierW);this.drawW>this.magnifierW*this.maxScale&&(this.drawW=this.magnifierW*this.maxScale);this.drawH=this.rateH*this.magnifierH*this.ratioH;this.drawH<this.magnifierH&&(this.drawH=this.magnifierH);this.drawH>this.magnifierH*this.maxScale&&(this.drawH=this.magnifierH*this.maxScale);this.drawBg(t)},setConfig:function(t){this.canvas[0].width=this.rateW*this.loadW;this.canvas[0].height=this.rateH*this.loadH*this.ratioH},drawBg:function(t){this.canvas.css({display:"block"});var i=t.pageX-this.offset.left-this.magnifierW/2,e=t.pageY-this.offset.top-this.magnifierH/2;this.magnifierZoom.css({left:t.pageX-this.drawW/2+"px",top:t.pageY-this.drawH/2+"px"});this.drawImg(this.showImg,i*this.rateW,e*this.rateH,this.rateW*this.magnifierW,this.rateW*this.magnifierW,this.drawW,this.drawH)},drawImg:function(t,i,e,o,s,n,h){this.canvas[0].width=n;this.canvas[0].height=h;this.magnifierZoom.css({width:n+"px",height:h+"px"});this.ctx.beginPath();this.ctx.drawImage(t[0],i,e,o,s,0,0,n,h);this.ctx.closePath()},show:function(){this.magnifierZoom.css({display:"block"});this.canvas.css({display:"block"})},hide:function(){this.magnifierZoom.css({display:"none"});this.canvas.css({display:"none"})}});jQuery.fn.colorSelection=function(t){this.getColor=function(){return this.color}.bind(this);this.refreshColor=function(){var t=getRandomColor();this.setColor(t)}.bind(this);this.setColor=function(t){this.color=t;$(this).css("background-color",t);$(this).attr("data-color",t)}.bind(this);this.create=function(t){var e=this;t=t?t:getRandomColor();this.setColor(t);this.colorPanel=new ColorPanel(this);this.on("click touchstart",function(t){var i=$(this).offset().left;i>windowWidth-e.colorPanel.table.width()&&(i=windowWidth-e.colorPanel.table.width()-5);e.colorPanel.setPosition(i,$(this).offset().top+$(this).outerHeight());e.colorPanel.show();t.stopPropagation()})}.bind(this);this.getColorPanel=function(){return this.colorPanel}.bind(this);this.hideColorPanel=function(){this.colorPanel.hide()}.bind(this);this.create(t)};var ColorPanel=function(t){this.helixColors="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" ");this.table=$("<table class='color_panel' border=1></table>");this.addItem();$("body").append(this.table);this.selection=t};ColorPanel.prototype={addItem:function(){for(var t=this,i=0;7>i;i++){for(var e=$("<tr></tr>"),o=0;10>o;o++){var s=$("<td></td>"),n=this.helixColors[10*i+o];s.attr("title",n);s.css("background-color",n);s.on("mouseenter",function(){t.showColorSelection(this.title)});s.on("click touchstart",function(){t.colorSelected(this.title)});e.append(s)}this.table.append(e)}},showColorSelection:function(t){t=t.toUpperCase();this.selection.setColor(t)},colorSelected:function(t){this.hide();t=t.toUpperCase();this.selection.setColor(t)},hide:function(){this.table.hide()},show:function(){this.table.css("display","table-cell")},setPosition:function(t,i){this.table.css({left:t+"px",top:i+"px"})}};var getRandomColor=function(){return"#"+Math.floor(2236962+7829367*Math.random()).toString(16)},BookmarkElements=Class({create:function(t){this._super(t);this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){this.input=$("<input class='input_title'></input>");this.colorSelection=$("<input class='colorSelection' type='text'></input>");this.colorSelection.colorSelection();this.rightToLeft?this.initRightToLeftDefaultDom():this.initLeftToRightDefaultDom();this.remove=$("<div class='removeAll button_hover'>"+getLanguage("lblRemoveAll","Remove All")+"</div>")},initRightToLeftDefaultDom:function(){this.leftAddPage=$("<div class='add_page left button_hover'><span class='pageIndex'></span> <span class='title'>"+getLanguage("lblAddToPage","Add To Page")+"</span></div>");this.rightAddPage=$("<div class='add_page button_hover'><span class='pageIndex'></span> <span class='title'>"+getLanguage("lblAddToPage","Add To Page")+"</span></div>");this.bookmarkListTitle=$("<div class='list_title'><span class='edit'>"+getLanguage("lblEdit","Edit")+"</span><span class='description'>"+getLanguage("lblDescription","Title")+"</span><span class='page'>"+getLanguage("lblPage","Page")+"</span></div>")},initLeftToRightDefaultDom:function(){this.leftAddPage=$("<div class='add_page left'><span class='title'>"+getLanguage("lblAddToPage","Add To Page")+"</span> <span class='pageIndex'></span></div>");this.rightAddPage=$("<div class='add_page'><span class='title'>"+getLanguage("lblAddToPage","Add To Page")+"</span> <span class='pageIndex'></span></div>");this.bookmarkListTitle=$("<div class='list_title'><span class='page'>"+getLanguage("lblPage","Page")+"</span><span class='description'>"+getLanguage("lblDescription","Title")+"</span><span class='edit'>"+getLanguage("lblEdit","Edit")+"</span></div>")},pickElements:function(t){t&&(t.input=this.input,t.colorSelection=this.colorSelection,t.remove=this.remove,t.leftAddPage=this.leftAddPage,t.rightAddPage=this.rightAddPage,t.bookmarkListTitle=this.bookmarkListTitle)},initEvent:function(i){this.leftAddPage.click(function(){var t={pageIndex:this.leftPageIndex,caption:this.input.val(),color:this.colorSelection.getColor()};i.addItem(t)}.bind(this));this.rightAddPage.click(function(){var t={pageIndex:this.rightPageIndex,caption:this.input.val(),color:this.colorSelection.getColor()};i.addItem(t)}.bind(this));this.remove.click(function(){i.removeAll()}.bind(this));this.input.bind("mousedown touchstart pointerdown mouseover mousemove",function(t){t.stopPropagation()})},refreshElements:function(){this.refreshAddPageButtonOnPc();this.refreshAddPageButtonOnPhone()},refreshAddPageButtonOnPc:function(){if(!isPhone()&&!isPad()){0>=this.bookmarkList.getLength()?this.remove.hide():this.remove.show();var t=BookInfo.getCurrentPages();this.leftPageIndex=parseInt(t[0]);this.rightPageIndex=parseInt(t[1]);this.showOrHideAddPageBtn();this.focusAddPageBtn()}},refreshAddPageButtonOnPhone:function(){if(isPhone()||isPad()){for(var t=BookInfo.getCurrentPages(),i=0;i<t.length;i++)if(this.bookmarkList.inList(t[i])){toolBar.buttons.find("PhoneBookmarkButton",!0).get(0).setAsAdded();return}toolBar.buttons.find("PhoneBookmarkButton",!0).get(0).setAsUnAdded()}},showOrHideAddPageBtn:function(){this.leftPageIndex?(this.leftAddPage.find(".pageIndex").html(getShownPageNumber(this.leftPageIndex)),this.leftAddPage.show()):this.leftAddPage.hide();this.rightPageIndex?(this.rightAddPage.find(".pageIndex").html(getShownPageNumber(this.rightPageIndex)),this.rightAddPage.show()):this.rightAddPage.hide()},focusAddPageBtn:function(){this.leftPageIndex&&!this.bookmarkList.inList(this.leftPageIndex)?(this.leftAddPage.removeClass("disable"),this.leftAddPage.addClass("usable"),this.leftAddPage.addClass("button_hover")):(this.leftAddPage.addClass("disable"),this.leftAddPage.removeClass("usable"),this.leftAddPage.removeClass("button_hover"));this.rightPageIndex&&!this.bookmarkList.inList(this.rightPageIndex)?(this.rightAddPage.removeClass("disable"),this.rightAddPage.addClass("usable"),this.rightAddPage.addClass("button_hover")):(this.rightAddPage.addClass("disable"),this.rightAddPage.removeClass("usable"),this.rightAddPage.removeClass("button_hover"))},changeLanguage:function(){this.remove.html(getLanguage("lblRemoveAll","Remove All"));this.leftAddPage.find(".title").html(getLanguage("lblAddToPage","Add To Page"));this.rightAddPage.find(".title").html(getLanguage("lblAddToPage","Add To Page"));this.bookmarkListTitle.find(".edit").html(getLanguage("lblEdit","Edit"));this.bookmarkListTitle.find(".description").html(getLanguage("lblDescription","Title"));this.bookmarkListTitle.find(".page").html(getLanguage("lblPage","Page"));var t=this.bookmarkListPanel.bookmarkSwiperList;t.find(".save").attr("title",getLanguage("lblSave","Save"));t.find(".cancel").attr("title",getLanguage("lblCancel","Cancel"));t.find(".edit").attr("title",getLanguage("lblEdit","Edit"));t.find(".delete").attr("title",getLanguage("lblDelete","Delete"))}}).extend(FormElements),BookmarkItem=Class({create:function(t,i){this.callback=i;this.parm={color:t.color,caption:t.caption,pageIndex:parseInt(t.pageIndex)};this.item=$("<div class='item' pageIndex='"+parseInt(t.pageIndex)+"' id='bookmark_item"+parseInt(t.pageIndex)+"'></div>");this.saveUrl=form_icons.save?"data:image/png;base64,"+form_icons.save:uiBaseURL+"save.png";this.cancelUrl=form_icons.cancel?"data:image/png;base64,"+form_icons.cancel:uiBaseURL+"cancel.png";this.editUrl=form_icons.edit?"data:image/png;base64,"+form_icons.edit:uiBaseURL+"edit.png";this.deleteUrl=form_icons["delete"]?"data:image/png;base64,"+form_icons["delete"]:uiBaseURL+"delete.png";this.fontColor=t.fontColor;this.color=t.color;this.caption=t.caption;this.pageCaption=getShownPageNumber(parseInt(t.pageIndex));this.pageIndex=parseInt(t.pageIndex);this.colorObj=Color(this.fontColor);this.initDefaultDom();this.initHtml();this.initEvent()},initHtml:function(){rightToLeft?this.initRightToLeftHtml():this.initLeftToRightHtml();this.deleteIcon.changeButtonColor(this.fontColor);this.edit.changeButtonColor(this.fontColor);this.cancel.changeButtonColor(this.fontColor);this.save.changeButtonColor(this.fontColor)},initRightToLeftHtml:function(){this.item.append(this.deleteIcon);this.item.append(this.edit);this.item.append(this.cancel);this.item.append(this.save);this.item.append(this.title);this.item.append(this.colorSelection);this.item.append(this.page)},initLeftToRightHtml:function(){this.item.append(this.page);this.item.append(this.title);this.item.append(this.colorSelection);this.item.append(this.save);this.item.append(this.cancel);this.item.append(this.edit);this.item.append(this.deleteIcon)},initDefaultDom:function(){this.page=$("<span class='page'>"+this.pageCaption+"</span>");this.title=$("<input class='title' title='"+this.caption+"' value='"+this.caption+"' disabled='disabled'></input>");this.colorSelection=$("<input class='colorSelection' type='text'></input>");this.colorSelection.colorSelection(this.color);this.save=$("<img class='save' title='"+getLanguage("lblSave","Save")+"' src='"+this.saveUrl+"'/>");this.cancel=$("<img class='cancel' title='"+getLanguage("lblCancel","Cancel")+"' src='"+this.cancelUrl+"'/>");this.edit=$("<img class='edit' title='"+getLanguage("lblEdit","Edit")+"' src='"+this.editUrl+"'/>");this.deleteIcon=$("<img class='delete' title='"+getLanguage("lblDelete","Delete")+"' src='"+this.deleteUrl+"'/>");this.title.css({color:this.fontColor})},appendTo:function(t){t.append(this.item)},insertBefore:function(t){this.item.insertBefore(t)},insertAfter:function(t){this.item.insertAfter(t)},initEvent:function(){this.edit.onTap(function(){this.startEdit()}.bind(this));this.cancel.onTap(function(){this.endEdit();this.cancelData()}.bind(this));this.save.onTap(function(){this.endEdit();this.saveData()}.bind(this));this.deleteIcon.onTap(function(){this.item.remove();this.callback.deleteItem(this.parm.pageIndex)}.bind(this));this.item.onTap(function(){this.lightItem();this.judgeToSaveOrCancel();gotoPageFun(this.pageIndex)}.bind(this));this.title.bind("keypress",function(t){"13"==t.keyCode&&(this.endEdit(),this.saveData())}.bind(this))},saveData:function(){var t=this.colorSelection.getColor(),i=this.title.val();if(i!=this.caption||t!=this.color)this.caption=i,this.color=t,this.parm={pageIndex:this.pageIndex,caption:this.caption,color:this.color},this.callback.editItem(this.parm)},cancelData:function(){var t=this.colorSelection.getColor();this.title.val()!=this.caption&&this.title.val(this.caption);t!=this.color&&this.colorSelection.setColor(this.color)},endEdit:function(){this.colorSelection.hide();this.colorSelection.hideColorPanel();this.cancel.hide();this.save.hide();this.edit.show();this.title.css({background:"transparent",color:this.fontColor});this.title.attr("disabled","disabled");global.bookmark.editingItem=null},startEdit:function(){this.judgeToSaveOrCancel();this.lightItem();this.colorSelection.show();this.cancel.show();this.save.show();this.edit.hide();this.title.css({background:"#ffffff",color:"#000000"});this.title.removeAttr("disabled");global.bookmark.editingItem=this;this.cancel.changeButtonColor(this.fontColor);this.save.changeButtonColor(this.fontColor)},judgeToSaveOrCancel:function(){global.bookmark.editingItem&&global.bookmark.editingItem!=this&&(global.bookmark.editingItem.cancelData(),global.bookmark.editingItem.endEdit())},lightItem:function(){$(".bookmarkItem_focus").css({background:"transparent"});$(".bookmarkItem_focus").removeClass("bookmarkItem_focus");this.item.addClass("bookmarkItem_focus");this.item.css({background:this.colorObj.rgba(.25)})},changeLanguage:function(){this.save.attr("title",getLanguage("lblSave","Save"));this.cancel.attr("title",getLanguage("lblCancel","Cancel"));this.edit.attr("title",getLanguage("lblEdit","Edit"));this.deleteIcon.attr("title",getLanguage("lblDelete","Delete"))}}),PhoneBookmarkItem=Class({create:function(t,i){this.parm=t;this.color=t.color;this.caption=t.caption;this.pageCaption="P:"+parseInt(t.pageIndex);this.pageIndex=parseInt(t.pageIndex);this.callback=i;this.item=$("<div class='item'></div>");this.page=$("<span class='page'>P:"+this.pageIndex+"</span>");this.image=$("<img class='thumbnail' src='"+getPageDir(this.pageIndex,"thumb",originTotalPageCount)+"'/>");this.caption=$("<span class='title'>"+this.caption+"</span>");this.deleteBtn=$("<div class='delete'></div>");this.item.append(this.page);this.item.append(this.image);this.item.append(this.caption);this.item.append(this.deleteBtn);this.initEvent()},appendTo:function(t){t.append(this.item)},initEvent:function(){this.deleteBtn.click(function(){this.item.remove();this.callback.deleteItem(this.pageIndex)}.bind(this));this.item.click(function(){gotoPageFun(this.pageIndex)}.bind(this))},changeLanguage:function(){}}),AnalysisBookmark=Class({create:function(){this.bookmarkList=[];this.bookmarkDetaildList=[];this.key=window.location.href.replace(window.location.hash,"")+"BookMark";this.refresh()},refresh:function(){var t=this.getListFromLocalStorage();if(t&&0!=t.length){for(var i=0;i<t.length;i++)parseInt(t[i].pageIndex)&&this.bookmarkList.push(parseInt(t[i].pageIndex));this.bookmarkDetaildList=t}},getListFromLocalStorage:function(){var t=this.getLocalStorage(this.key);return Instance.parse(t)},getList:function(){return this.bookmarkList},getItem:function(t){for(var i,e=0;e<this.bookmarkDetaildList.length;e++)if(parseInt(this.bookmarkDetaildList[e].pageIndex)==parseInt(t)){i=this.bookmarkDetaildList[e];break}return i},editItem:function(t){for(var i=t.pageIndex,e=0;e<this.bookmarkDetaildList.length;e++)if(parseInt(this.bookmarkDetaildList[e].pageIndex)==parseInt(i)){this.bookmarkDetaildList[e].caption=t.caption;this.bookmarkDetaildList[e].color=t.color;break}this.refreshLocalStorage()},addItem:function(t){var i=t.pageIndex;0>this.bookmarkList.indexOf(i)&&(this.bookmarkList.push(i),this.bookmarkDetaildList.push(t),this.sortList())},deleteItem:function(t){for(var i=0;i<this.bookmarkDetaildList.length;i++)if(parseInt(this.bookmarkDetaildList[i].pageIndex)==parseInt(t)){this.bookmarkDetaildList.remove(i);this.bookmarkList.remove(i);break}this.refreshLocalStorage()},removeAll:function(){this.bookmarkList=[];this.bookmarkDetaildList=[];this.deleteLocalStorage(this.key)},sortList:function(){this.bookmarkList.sort(function(t,i){return t-i});for(var t=[],i=0;i<this.bookmarkList.length;i++)for(var e=this.bookmarkList[i],o=0;o<this.bookmarkDetaildList.length;o++)if(parseInt(this.bookmarkDetaildList[o].pageIndex)==parseInt(e)){t.push(this.bookmarkDetaildList[o]);break}this.bookmarkDetaildList=t;this.refreshLocalStorage()},getLocalStorage:function(t){try{if(window.localStorage[t])return window.localStorage.getItem(t)}catch(t){}},refreshLocalStorage:function(){try{window.localStorage&&window.localStorage.setItem(this.key,Instance.JSON(this.bookmarkDetaildList))}catch(t){}},deleteLocalStorage:function(t){try{window.localStorage[t]&&window.localStorage.setItem(t,"")}catch(t){}}}),BookmarkListData=Class({create:function(){this.initStaticList();this.initBookmarkList()},initBookmarkList:function(){this.analysisData=new AnalysisBookmark;this.bookmarkList=this.analysisData.getList()},initStaticList:function(){this.staticList=[];if(!isPhone()&&!isPad()&&bmtConfig){var t=bmtConfig;bmtConfig.tabs&&(t=bmtConfig.tabs);if(0!=t.length)for(var i=t.length,e=0;e<i;e++)this.staticList.push(t[e].pageIndex)}},addItem:function(t){this.inList(t.pageIndex)||this.analysisData.addItem(t)},deleteItem:function(t){this.analysisData.deleteItem(t)},editItem:function(t){this.analysisData.editItem(t)},refresh:function(){this.bookmarkList=this.analysisData.getList()},inList:function(t){return 0<=this.staticList.indexOf(t)||0<=this.bookmarkList.indexOf(t)?!0:!1},removeAll:function(){this.analysisData.removeAll()},getItem:function(t){return this.analysisData.getItem(t)},getList:function(){return this.bookmarkList},getNextItem:function(t){for(var i=0,e=this.bookmarkList.length,o=0;o<e;o++)if(this.bookmarkList[o]>t){i=this.bookmarkList[o];break}return i},getPrevItem:function(t){for(var i=0,e=this.bookmarkList.length,o=0;o<e;o++)if(this.bookmarkList[o]>t){i=this.bookmarkList[o-1];break}return i},getLength:function(){return this.bookmarkList.length}}),BookmarkListPanel=Class({create:function(t){this.callback=t;this.bookmarkList=new BookmarkListData;this.initSwiper()},onCreate:function(){},initSwiper:function(){this.bookmarkSwiper=$("<div class='bookmarkSwiper stage'></div>");this.bookmarkSwiperList=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.refreshSwiper();this.bookmarkSwiper.append(this.bookmarkSwiperList);isPhone()||isPad()?this.bookmarkSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.bookmarkSwiper.append(this.progress),this.progress.append(this.progressBar),this.bookmarkSwiper.scroll({},Direction.top))},refreshSwiper:function(){for(var t=this.bookmarkList.getList(),i=t.length,e=0;e<i;e++)this.refreshItem(t[e])},refreshItem:function(t){t=this.bookmarkList.getItem(t);this.newItem(t).appendTo(this.bookmarkSwiperList)},newItem:function(t){return new BookmarkItem(t,this.callback)},refreshListPanel:function(){if(!isPhone()&&!isPad()){this.bookmarkSwiper.css({height:"auto"});this.bookmarkSwiperList.css({position:"relative"});var t=this.bookmarkSwiper.height();this.bookmarkSwiper.find(".swiper").height();t>=this.maxHeight?(this.bookmarkSwiper.css({height:this.maxHeight+"px"}),this.bookmarkSwiperList.css({position:"absolute"})):this.bookmarkSwiperList.css({top:0});this.bookmarkSwiper.refreshData&&this.bookmarkSwiper.refreshData()}},addItem:function(t){if(!this.bookmarkList.inList(t.pageIndex)){var i=this.newItem(t);this.bookmarkList.addItem(t);if(1==this.bookmarkList.getLength())i.appendTo(this.bookmarkSwiperList);else{var e=this.getPrevItem(t.pageIndex);t=this.getNextItem(t.pageIndex);e.attr("pageIndex")?i.insertAfter(e):t.attr("pageIndex")?i.insertBefore(t):i.appendTo(this.bookmarkSwiperList)}this.refreshPanel()}},deleteItem:function(t){this.bookmarkList.deleteItem(t);this.refreshPanel()},editItem:function(t){this.bookmarkList.editItem(t);this.refreshPanel()},refresh:function(){this.bookmarkList.refresh()},getLength:function(){},inList:function(t){return this.bookmarkList.inList(t)?!0:!1},removeAll:function(){this.bookmarkSwiperList.empty();this.bookmarkList.removeAll()},getNextItem:function(t){t=this.bookmarkList.getNextItem(t);return $("#bookmark_item"+t)},getPrevItem:function(t){t=this.bookmarkList.getPrevItem(t);return $("#bookmark_item"+t)},refreshPanel:function(){this.refresh();this.refreshListPanel();BookInfo.getBook()&&BookInfo.getBook().bmt&&BookInfo.getBook().bmt.reload()},onResize:function(t,i){this.maxHeight=i;this.bookmarkSwiper.css("height",i+"px")}}),PhoneBookmarkListPanel=Class({create:function(t){this._super(t)},onCreate:function(){},newItem:function(t){return new PhoneBookmarkItem(t,this.callback)}}).extend(BookmarkListPanel),PcBookmarkFrame=Class({create:function(t){this.elements=new BookmarkElements(this);this.bookmarkListPanel=new PcBookmarkListPanel(this);this.elements.bookmarkList=this.bookmarkListPanel.bookmarkList;this.elements.bookmarkListPanel=this.bookmarkListPanel;this._super(t)},onCreate:function(){},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='bookmark_content'></div>");this.stage.append(this.content);var t=$("<p class='inputForm'></p>");t.append(this.input);t.append(this.colorSelection);this.content.append(t);this.content.append(this.leftAddPage);this.content.append(this.rightAddPage);this.content.append(this.bookmarkListPanel.bookmarkListTitle);this.content.append(this.bookmarkListPanel.bookmarkSwiper);this.content.append(this.remove);this.parent.append(this.stage);this.refreshPanel()},refreshPanel:function(){this.bookmarkListPanel.refreshPanel();this.elements.refreshElements()},addItem:function(t){t&&t.caption&&t.pageIndex&&!this.bookmarkListPanel.inList(t.pageIndex)&&(this.bookmarkListPanel.addItem(t),this.colorSelection.refreshColor(),this.input.val(""),this.refreshPanel())},deleteItem:function(t){this.bookmarkListPanel.deleteItem(t);this.refreshPanel()},editItem:function(t){this.bookmarkListPanel.editItem(t);this.refreshPanel()},refreshItem:function(t){this.bookmarkListPanel.refreshItem(t)},removeAll:function(){this.bookmarkListPanel.removeAll();this.refreshPanel()},onResize:function(){this.refreshPanel()},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(SlideForm),PhoneBookmarkFrame=Class({create:function(t){this.elements=new BookmarkElements(this);this.bookmarkListPanel=new PhoneBookmarkListPanel(this);this.elements.bookmarkList=this.bookmarkListPanel.bookmarkList;this.elements.bookmarkListPanel=this.bookmarkListPanel;this._super(t)},onCreate:function(){this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.bookmarkListPanel.bookmarkSwiper);this.refreshPanel()},refreshPanel:function(){this.bookmarkListPanel.refreshPanel();this.elements.refreshElements()},addItem:function(t){t&&t.pageIndex&&!this.bookmarkListPanel.inList(t.pageIndex)&&(this.bookmarkListPanel.addItem(t),this.refreshPanel())},deleteItem:function(t){this.bookmarkListPanel.deleteItem(t);this.refreshPanel()},refreshItem:function(t){this.bookmarkListPanel.refreshItem(t)},onResize:function(){this._super();this.bookmarkListPanel.onResize(this.width,windowHeight-36);this.refreshPanel()},initEvent:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(PhoneFormFrame),PhoneBookmarkForm=Class({}).extend(PhoneBookmarkFrame),CopyElements=Class({create:function(t){this._super(t);this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){this.textArea=$("<textarea></textarea>");this.message=$("<p>"+getLanguage("lblSelectMessage","Please copy the the text content in the text box")+"</p>");this.button=$("<div class='cancel'>"+getLanguage("lblCancel","Cancel")+"</div>")},initEvent:function(t){this.button.onTap(t.hide.bind(t))},pickElements:function(t){t.textArea=this.textArea;t.message=this.message;t.button=this.button},changeLanguage:function(){this.message.html(getLanguage("lblSelectMessage","Please copy the the text content in the text box"));this.button.html(getLanguage("lblCancel","Cancel"))}}).extend(FormElements),CopyForm=Class({create:function(t){this.elements=new CopyElements(this);this._super(t)},onCreate:function(){this._super();this.stage.css({"background-color":this.mainColor,color:this.fontColor})},initHtml:function(){this.stage.append(this.textArea);this.stage.append(this.message);this.stage.append(this.button);this._super()},fillText:function(t){this.textArea.val(t);rightToLeft&&LanguageTool.isRightToLeft(this.parm.search_text)&&this.textArea.addClass("rtl")},initEvent:function(){this.stage.bind(_event._down,function(t){t.stopPropagation()})},onShow:function(){},onResize:function(){this._super()}}).extend(FadeOutFadeForm);Class("LineABC",{create:function(t,i){this.a=i.y-t.y;this.b=t.x-i.x;this.c=i.x*t.y-t.x*i.y},distanceFrom:function(t){t=this.a*t.x+this.b*t.y+this.c;t=Math.abs(t);var i=Math.sqrt(this.a*this.a+this.b*this.b);return t/i}});Class("LineSegment",{create:function(t,i){this.start=t;this.stop=i;this.degree=this.radians=this.distance=this.horizontal=this.vertical=0;this.computeLine()},computeLine:function(){this.vertical=this.stop.y-this.start.y;this.horizontal=this.stop.x-this.start.x;this.distance=Math.sqrt(this.vertical*this.vertical+this.horizontal*this.horizontal);0<this.distance&&(this.radians=Math.atan2(this.vertical,this.horizontal),this.degree=180*this.radians/Math.PI)},sin:function(){return equals(this.distance,0)?0:this.vertical/this.distance},cos:function(){return equals(this.distance,0)?0:this.horizontal/this.distance},tan:function(){return equals(this.distance,0)?0:this.vertical/this.horizontal},ctan:function(){return equals(this.distance,0)?0:this.horizontal/this.vertical}});Class("SearchTextItem",{create:function(){this.posIndex=-1;this.pageHeight=this.pageWidth=1;this.text="";this.points=[];this.widthList=[];this.textHeight=this.textWidth=0;this.box={left:0,top:0,right:0,bottom:0};this.line_height=this.line_width=null},refreshProperties:function(){var t=this.getPixelPoint(this.leftBottom()),i=this.getPixelPoint(this.rightBottom()),e=this.getPixelPoint(this.leftTop());this.line_width=new LineSegment(t,i);this.textWidth=this.line_width.distance*this.line_width.cos()/this.pageWidth;this.line_height=new LineSegment(t,e);this.textHeight=this.line_height.distance*this.line_height.sin()/this.pageHeight;this.box.left=this.getMinX(this.points);this.box.top=this.getMinY(this.points);this.box.right=this.getMaxX(this.points);this.box.bottom=this.getMaxY(this.points);this.adjustWidthList()},adjustWidthList:function(){for(var t=!1,i=0;i<this.letterCount();i++)if(equals(this.widthList[i],0)){t=!0;break}if(t)for(t=this.textWidth/this.letterCount(),i=0;i<this.letterCount();i++)this.widthList[i]=t;else if(!equals(this.line_width.degree,0)){for(i=t=0;i<this.letterCount()-1;i++)t+=this.widthList[i];this.widthList[this.letterCount()-1]=this.textWidth-t}},setText:function(t){t||(t="");this.text=t;this.setWidthListSize(t.length)},setWidthListSize:function(t){var i=this.widthList.length;if(t>i)for(var e=i;e<t;e++)this.widthList[e]=0;if(t<i){i=[];for(e=0;e<t;e++)i[e]=this.widthList[e];this.widthList=i}},getPixelPoint:function(t){return new Point(this.pageWidth*t.x,this.pageHeight*t.y)},getRatioPoint:function(t){return new Point(t.x/this.pageWidth,t.y/this.pageHeight)},clone:function(t){this.pageWidth=t.pageWidth;this.pageHeight=t.pageHeight;this.text=t.text;for(var i=0;4>i;i++)this.points[i]=t.points[i].clone();this.widthList=[];for(i=0;i<t.letterCount();i++)this.widthList[i]=t.widthList[i];this.refreshProperties()},letterCount:function(){return this.widthList.length},getMaxX:function(t){for(var i=-1e8,e=0;4>e;e++)i=Math.max(i,t[e].x);return i},getMaxY:function(t){for(var i=-1e8,e=0;4>e;e++)i=Math.max(i,t[e].y);return i},getMinX:function(t){for(var i=1e8,e=0;4>e;e++)i=Math.min(i,t[e].x);return i},getMinY:function(t){for(var i=1e8,e=0;4>e;e++)i=Math.min(i,t[e].y);return i},getMiddlePoint:function(t,i){return new Point((t.x+i.x)/2,(t.y+i.y)/2)},getMiddlePixelPoint:function(t,i){return new Point((t.x+i.x)/2*this.pageWidth,(t.y+i.y)/2*this.pageHeight)},leftBottom:function(){return this.points[0]},leftTop:function(){return this.points[3]},rightBottom:function(){return this.points[1]},rightTop:function(){return this.points[2]},getSubTextWidth:function(t){var i=0;if(0>=t)return 0;t>this.letterCount()&&(t=this.letterCount());for(var e=0;e<t;e++)i+=this.widthList[e];return i},getSubTextPixelLength:function(t){var i=0;if(0>=t)return 0;t>this.letterCount()&&(t=this.letterCount());if(equals(this.line_width.cos(),0))i=this.line_width.distance*(t/this.letterCount())*this.line_width.sin();else for(var e=0;e<t;e++)i+=this.widthList[e]*this.pageWidth/this.line_width.cos();return i},getLettersRect:function(t,i){var e=Math.min(t,i),o=Math.max(t,i),e=this.getSubTextRect(e),o=this.getSubTextRect(o+1),s=[];s[0]=e[1];s[3]=e[2];s[1]=o[1];s[2]=o[2];return s},getSubTextRect:function(t){var i=[],e=this.leftBottom(),o=this.leftTop(),s=this.getSubTextWidth(t),n=s*this.pageWidth,h=0,h=equals(this.line_width.cos(),0)?this.line_width.distance*(t/this.letterCount())/this.pageHeight*this.line_width.sin():n*this.line_width.tan()/this.pageHeight;t=new Point(e.x+s,e.y+h);s=new Point(o.x+s,o.y+h);i[0]=e;i[1]=t;i[2]=s;i[3]=o;return i},getIndexByPoint:function(t,i){var e=-1,o=this.getPixelPoint(new Point(t,i)),s=this.getPixelPoint(this.leftBottom()),n=this.getPixelPoint(this.rightBottom()),h=this.getPixelPoint(this.rightTop()),a=this.getPixelPoint(this.leftTop()),r=new LineABC(s,n),n=new LineABC(n,h);new LineABC(h,a);s=new LineABC(a,s);r=r.distanceFrom(o);h=n.distanceFrom(o);n=n.distanceFrom(o);o=s.distanceFrom(o);if(r<=this.line_height.distance&&h<=this.line_width.distance&&n<=this.line_height.distance&&o<=this.line_width.distance)for(n=0;n<this.letterCount();){if(this.getSubTextPixelLength(n+1)>=o){e=n;break}n++}return e},getIndexRangeByArea:function(t){var i=-1,e=-1,o=Math.min(t.left,t.right),s=Math.min(t.top,t.bottom),n=Math.max(t.left,t.right);t=Math.max(t.top,t.bottom);for(var h=0;h<this.letterCount();h++){var a=this.getLettersRect(h,h),r,l,g,d;this.text.substr(h,1);r=this.getMinX(a);l=this.getMinY(a);g=this.getMaxX(a);d=this.getMaxY(a);var a=Math.min(r,g),c=Math.min(l,d);r=Math.max(r,g);l=Math.max(l,d);l=a>n||r<o||c>t||l<s;-1==i?l||(e=i=h):l||(e=h)}return-1==i||-1==e?null:{begin:i,end:e}},isSelected:function(t){var i=Math.min(t.left,t.right),e=Math.min(t.top,t.bottom),o=Math.max(t.left,t.right);t=Math.max(t.top,t.bottom);return!(this.box.left>o||this.box.right<i||this.box.top>t||this.box.bottom<e)},isContains:function(t){if(!this.isSelected(t.box))return!1;var i=this.getOverlapArea(t.box),e=Math.min((i.right-i.left)/(this.box.right-this.box.left),(i.bottom-i.top)/(this.box.bottom-this.box.top));t=Math.min((i.right-i.left)/(t.box.right-t.box.left),(i.bottom-i.top)/(t.box.bottom-t.box.top));return e<t&&.8<t},getOverlapArea:function(t){if(!this.isSelected(t))return null;var i=Math.min(t.left,t.right),e=Math.min(t.top,t.bottom),o=Math.max(t.left,t.right);t=Math.max(t.top,t.bottom);return{left:Math.max(this.box.left,i),top:Math.max(this.box.top,e),right:Math.min(this.box.right,o),bottom:Math.min(this.box.bottom,t)}},isSameAs:function(t){for(var i=0;4>i;i++)if(!this.points[i].equals(t.points[i]))return!1;return!0},relation:function(t){var i=new LineSegment(this.getMiddlePixelPoint(this.leftBottom(),this.rightTop()),t.getMiddlePixelPoint(t.leftBottom(),t.rightTop())),e=new LineSegment(this.getMiddlePixelPoint(this.leftBottom(),this.leftTop()),t.getMiddlePixelPoint(t.rightBottom(),t.rightTop())),o=new LineSegment(this.getMiddlePixelPoint(this.rightBottom(),this.rightTop()),t.getMiddlePixelPoint(t.leftBottom(),t.leftTop())),s=o;e.distance<o.distance&&(s=e);var e=s.distance,o=this.line_width.distance/this.letterCount(),n=Math.max(this.line_height.distance,t.line_height.distance);Math.min(this.line_height.distance,t.line_height.distance);if(equals(this.line_width.degree,0)&&equals(t.line_width.degree,0)&&Math.abs(this.leftBottom().y-t.leftBottom().y)>.8*n||e>=2.5*o)return SearchItemRelation.RETURN;if(this.isSelected(t.box)){if(equals(e,0))return SearchItemRelation.NEARBY;if(5>Math.abs(s.degree-i.degree)&&e>=.3*o)return SearchItemRelation.SPACE}else{if(e>=.5*o&&e<1.2*o)return 30<Math.abs(s.degree-i.degree)?SearchItemRelation.RETURN:SearchItemRelation.SPACE;if(e>=1.2*o&&e<2.5*o)return 15<Math.abs(s.degree-i.degree)?SearchItemRelation.RETURN:SearchItemRelation.DOUBLE_SPACE}return SearchItemRelation.NEARBY},isSeparate:function(t){return equals(this.line_height.distance,t.line_height.distance)?!equals(this.box.bottom,t.box.bottom):!0}});Class("SearchRtlTextItem",{getLettersRect:function(t,i){var e=this._super(t,i),o=this.leftBottom().x,s=this.rightBottom().x;return LanguageTool.isRightToLeft(this.text)?this.flipRect(e,o,s):e},flipRect:function(t,i,e){var o=i+e-t[1].x;i=i+e-t[0].x;t[0].x=o;t[1].x=i;t[2].x=i;t[3].x=o;return t}}).extend("SearchTextItem");Class("SearchTextPart",{create:function(t){this.endIndex=this.beginIndex=-1;this.item=t},getRect:function(){return this.item.getLettersRect(this.beginIndex,this.endIndex)},getText:function(){return this.item.text.substring(this.beginIndex,this.endIndex+1)},getBox:function(){var t=this.getRect();return{left:this.item.getMinX(t),top:this.item.getMinY(t),right:this.item.getMaxX(t),bottom:this.item.getMaxY(t)}}});Class("SearchTextResult",{create:function(){this.parts=[]},add:function(t){this.parts.push(t)},count:function(){return this.parts.length},getText:function(){for(var t="",i=0;i<this.count();i++)if(t+=this.parts[i].getText(),i<this.count()-1){var e=this.parts[i].item.relation(this.parts[i+1].item);e==SearchItemRelation.SPACE&&(t+=" ");e==SearchItemRelation.DOUBLE_SPACE&&(t+="  ");e==SearchItemRelation.RETURN&&(t+="\r\n")}return t},getBox:function(){for(var t={left:1e8,top:1e9,right:-1e8,bottom:-1e8},i=0;i<this.count();i++){var e=this.parts[i].getBox();t.left=Math.min(t.left,e.left);t.top=Math.min(t.top,e.top);t.right=Math.max(t.right,e.right);t.bottom=Math.max(t.bottom,e.bottom)}return t},getRects:function(){if(0==this.count())return[];for(var t=4,i=0,e=[],o=this.parts[0],s=null,n=0;n<this.count();n++){var h=this.parts[n];if(n<this.count()-1){var a=this.parts[n+1],s=h.item.relation(a.item),r=h.item.isSeparate(a.item);if(s!=SearchItemRelation.NEARBY||r)s=h,h=o.getRect(),s=s.getRect(),e[i]=h[0].x<s[0].x?h[0]:s[0],e[i+1]=s[1].x>h[1].x?s[1]:h[1],e[i+2]=s[2].x>h[2].x?s[2]:h[2],e[i+3]=h[3].x<s[3].x?h[3]:s[3],i=t,t+=4,o=a}else s=h,h=o.getRect(),s=s.getRect(),e[i]=h[0].x<s[0].x?h[0]:s[0],e[i+1]=s[1].x>h[1].x?s[1]:h[1],e[i+2]=s[2].x>h[2].x?s[2]:h[2],e[i+3]=h[3].x<s[3].x?h[3]:s[3]}return e}});Class("SearchTextList",{create:function(){this.textItems=[];this.continuousText=""},add:function(t){this.textItems.push(t);this.refreshContinuousText()},clear:function(){this.textItems=[];this.continuousText=""},itemCount:function(){return this.textItems.length},cleanOverlappedItems:function(){for(i=0;i<this.itemCount()-1;i++)for(var t=this.textItems[i],e=i+1;e<this.itemCount();){var o=this.textItems[e];if(t.isContains(o)){var s=t.getIndexRangeByArea(o.box);if(s){var n=t.text,h=o.text.trim(),a=n.substring(s.begin,s.end+1);if(a.trim().length){for(var r=0;r<a.length&&" "!=a.charAt(r);r++)s.begin+=1;for(r=a.length-1;0<=r&&" "!=a.charAt(r);r--)s.end-=1}s.end=Math.min(s.end,s.begin+h.length-1);a=n.substring(0,s.begin);s=n.substring(s.end+1,n.length);n=a+h+s;t.text=n;this.textItems.removeElement(o)}else e++}else e++}this.refreshContinuousText()},refreshContinuousText:function(){this.continuousText=this.getContinuousText()},getContinuousText:function(){for(var t="",i=0;i<this.itemCount();i++){var e=this.textItems[i];e.posIndex=t.length;t+=e.text.toLowerCase()}return t},search:function(t){var i=[];if(""==t.trim())return[];t=t.toLowerCase();for(var e=this.searchFrom(t,0,i);-1<e;)e=this.searchFrom(t,e,i);return i},searchFrom:function(t,i,e){var o=this.getTextForSearch(i);if(!o)return-1;var s=t.length,o=o.indexOf(t);if(-1==o){if(-1==t.indexOf(" ")||!this.match(t,i))return-1;o=t.split(" ");t=i;for(i=0;i<o.length;i++)(s=o[i])&&(t=this.searchFrom(s,t,e));return t}o=i+o;t=o+s-1;s=new SearchTextResult;for(i=0;i<this.itemCount();i++){var n=this.textItems[i],h=n.posIndex;if(!(n.posIndex+n.letterCount()-1<o)){if(h>t)break;var a=new SearchTextPart(n);a.beginIndex=Math.max(0,o-h);a.endIndex=Math.min(n.letterCount()-1,t-h);s.add(a)}}e.push(s);return t+1},match:function(t,i){var e=this.getTextForSearch(i);if(!e)return!1;for(var o=t.split(" "),s=0;s<o.length;s++){var n=o[s];if(n){e=e.indexOf(n);if(-1==e)return!1;e=this.getTextForSearch(i+e+n.length)}}return!0},getTextForSearch:function(t){var i=this.continuousText.length-t;return 0>=i?"":this.continuousText.substr(t,i)},select:function(t,i){return i?this.selectByColumnMode(t):this.selectByLineMode(t)},selectByLineMode:function(t){for(var i=new SearchTextResult,e=-1,o=-1,s=0;s<this.itemCount();s++){var n=this.textItems[s];if(n.isSelected(t)){e=s;break}}for(s=this.itemCount()-1;0<=s;)if(n=this.textItems[s],n.isSelected(t)){o=s;break}else s--;if(-1<e&&-1<o)for(s=e;s<=o;s++){var n=this.textItems[s],h=new SearchTextPart(n);h.beginIndex=0;h.endIndex=n.letterCount()-1;if(s==e||s==o){n=n.getIndexRangeByArea(t);if(!n)continue;s==e&&(h.beginIndex=n.begin);s==o&&(h.endIndex=n.end)}i.add(h)}return i},selectByColumnMode:function(t){for(var i=new SearchTextResult,e=0;e<this.itemCount();e++){var o=this.textItems[e];if(o.isSelected(t)){var s=new SearchTextPart(o);if(o=o.getIndexRangeByArea(t))s.beginIndex=o.begin,s.endIndex=o.end,i.add(s)}}return i}});Class("SearchTextHighlight",{create:function(t,i,e){this.pageWidth=t;this.pageHeight=i;this.rightToLeft=e;this.searchTextList=new SearchTextList},loadFromPage:function(t){if(t&&0!=t.length){for(var i=0;i<t.length;i++){var e=t[i];if(e){var o;o=this.rightToLeft?new SearchRtlTextItem:new SearchTextItem;o.pageWidth=this.pageWidth;o.pageHeight=this.pageHeight;void 0!=e.word?this.loadFromOldConfig(o,e):this.loadFromNewConfig(o,e);o.refreshProperties();this.searchTextList.add(o)}}this.searchTextList.cleanOverlappedItems()}},loadFromOldConfig:function(t,i){t.setText(i.word);t.points[0]=new Point(i.left,i.top+i.height);t.points[1]=new Point(i.left+i.width,i.top+i.height);t.points[2]=new Point(i.left+i.width,i.top);t.points[3]=new Point(i.left,i.top)},loadFromNewConfig:function(t,i){t.setText(i.w);for(var e=i.p||[],o=0;4>o;o++)t.points[o]=new Point(e[2*o]||0,e[2*o+1]||0);if(!(8>=e.length)){for(o=8;o<e.length;o++)t.widthList[o-8]=e[o];this.rightToLeft&&t.widthList.reverse()}},searchText:function(t){return this.searchTextList.search(t)},selectText:function(t){return this.searchTextList.select(t)}});Class("SearchHighlightDOM",{create:function(t){this.content=t;this.contentWidth=t.width();this.contentHeight=t.height()},addHighlight:function(t){for(var i=[],e=0;e<t.length;e++)i[e]=new Point(t[e].x*this.contentWidth,t[e].y*this.contentHeight);var e=new LineSegment(i[0],i[1]),o=new LineSegment(i[0],i[3]),i=e.distance/this.contentWidth*100,o=o.distance/this.contentHeight*100,s=100*t[0].x;t=100*t[0].y-o;var e=e.degree,n=$("<div></div>");n.css({position:"absolute",left:s+"%",top:t+"%",width:i+"%",height:o+"%","background-color":Color(bookConfig.searchHightlightColor).rgba(.6),transform:"rotate("+e+"deg)","-webkit-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)","-o-transform":"rotate("+e+"deg)","-moz-transform":"rotate("+e+"deg)","transform-origin":"0% 0%","-webkit-transform-origin":"0% 100%","-ms-transform-origin":"0% 100%","-o-transform-origin":"0% 100%","-moz-transform-origin":"0% 100%"});this.content.append(n)}});Class("DynamicBackground",{statics:{create:function(t){var i=DynamicBackground.initAnimation(t),e=t.width,o=t.height;(function(){if(e!=windowWidth||o!=windowHeight)e=windowWidth,o=windowHeight,i.resize(e,o);i.nextFrame()}).animation();return i},initAnimation:function(t){switch(t.name){case"PetalsDancing":return new PetalsDancingAnimation(t);case"Snow":return new SnowAnimation(t);case"SlowBubble":return new SlowBubbleAnimation(t);case"FastBubble":return new FastBubbleAnimation(t);case"LightRain":return new LightRainAnimation(t);case"HeavyRain":return new HeavyRainAnimation(t);case"Firefly":return new FireflyAnimation(t);case"SpaceShip":return new SpaceShipAnimation(t);case"SpaceTravel":return new SpaceTravelAnimation(t);case"Cloud":return new CloudAnimation(t);case"SunCloud":return new SunCloudAnimation(t);case"Meteor":return new MeteorAnimation(t);case"Sunshine":return new SunshineAnimation(t);case"Twinkle":return new TwinkleAnimation(t);case"FallenLeaves":return new FallenLeavesAnimation(t);case"Moon":return new MoonCloudAnimation(t);case"Balloon":return new BalloonCloudAnimation(t);case"AirBubble":return new SlowBubbleAnimation(t);case"BlinkStar":return new TwinkleAnimation(t);case"CloudsLeft02":return new CloudAnimation(t);case"CloudsLeft02":return new CloudAnimation(t);case"Leaves02":return new FallenLeavesAnimation(t);case"Leaves03":return new FallenLeavesAnimation(t);case"RainDrop":return new LightRainAnimation(t);case"Cloud3":return new BalloonCloudAnimation(t);default:return new EmptyAnimation(t)}},getImagePath:function(t){return global.mbBaseURL+t}}});Class("BackgroundAnimation",{create:function(t){this.stage={body:t.stage,width:t.width,height:t.height};this.items=[];this.frameNumber=this.itemNumber=0;this.onCreated.delay(this,1)},onCreated:function(){this.resize(this.stage.width,this.stage.height)},resize:function(t,i){this.stage.width=t;this.stage.height=i;this.clear()},clear:function(){for(;0<this.items.length;){var t=this.items.pop();t&&t.destroy&&t.destroy()}this.items=[]},addItem:function(){this.items.length>=this.itemNumber||this.items.push(this.newItem())},getImagePath:function(t){return DynamicBackground.getImagePath(t)},itemCount:function(){return this.items.length},getItem:function(t){return this.items[t]},nextFrame:virtual_function,newItem:virtual_function});Class("BackgroundItem",{create:function(t){this.parent=t;this.initBody();this.initPositions()},initBody:function(){this.body=null;this.createBody();this.parent.body.append(this.body)},getImagePath:function(t){return DynamicBackground.getImagePath(t)},createBody:virtual_function,initPositions:virtual_function,move:virtual_function,refresh:virtual_function,pointByStep:function(t,i,e,o,s){return s?i+Number.fixed((e-i)*t/o,s):i+Math.floor((e-i)*t/o)},destroy:function(){this.body&&(this.body.remove(),this.body=null)}});Class("BackgroundItemPosition",{create:function(t,i,e,o){this.left=t||0;this.top=i||0;this.scale=e||1;this.rotate=o||0}});Class("GoThroughAnimation",{create:function(t){this._super(t);this.count=0},nextFrame:function(){if(this.frameNumber&&this.itemNumber){this.itemNumber>this.frameNumber?this.addMultipleItems():this.addItemFewFrames();for(var t=0;t<this.items.length;t++)this.items[t].isActive()&&this.items[t].move()}},addMultipleItems:function(){for(var t=Math.floor(this.itemNumber/this.frameNumber),t=Math.max(t,1),i=0;i<t;i++)this.addItem()},addItemFewFrames:function(){var t=Math.floor(this.frameNumber/this.itemNumber),t=Math.max(t,1);++this.count==t&&(this.addItem(),this.count=0)},addItem:function(){for(var t=0;t<this.items.length;t++)if(this.items[t].isFree()){this.items[t].active();return}this.itemCount()>=this.itemNumber||(t=this.newItem(),t.active(),this.items.push(t))},newItem:virtual_function}).extend("BackgroundAnimation");Class("GoThroughItem",{create:function(t,i){this._super(t);this.frameNumber=i||1;this.step=0;this.moving=!1},createBody:virtual_function,initPositions:virtual_function,refresh:virtual_function,move:function(){this.step++;this.step==this.frameNumber&&this.sleep();this.refresh()},isActive:function(){return!0==this.moving},isFree:function(){return!1==this.moving},sleep:function(){this.moving=!1},active:function(){this.step=1;this.moving=!0;this.initPositions();this.refresh()}}).extend("BackgroundItem");Class("AlwaysExistsAnimation",{create:function(t){this._super(t)},addItems:function(){for(var t=0;t<this.itemNumber;t++)this.addItem()},nextFrame:function(){for(var t=0;t<this.items.length;t++)this.items[t].move()},resize:function(t,i){this._super(t,i);this.addItems()},newItem:virtual_function}).extend("BackgroundAnimation");Class("AlwaysExistsItem",{create:function(t,i){this._super(t);this.frameNumber=i||1;this.step=1},createBody:virtual_function,initPositions:virtual_function,refresh:virtual_function,move:function(){this.step++;this.step==this.frameNumber&&(this.step=1,this.resetTarget());this.refresh()},resetTarget:function(){}}).extend("BackgroundItem");Class("PetalsDancingAnimation",{create:function(t){this._super(t);this.frameNumber=this.itemNumber=200},newItem:function(){return new PetalsDancingItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");Class("PetalsDancingItem",{create:function(t,i){this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:30px;height:28px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("petal.png"))},initPositions:function(){var t=1.2*this.parent.width,i=1.2*this.parent.height,e=Math.floor(Math.sqrt(t*t+i*i)),t=.1*-this.parent.width,i=Number.random(.1*-this.parent.height,Math.floor(.9*this.parent.height),0),o=Number.random(10,20,1),s=Math.PI/180*o,o=Math.floor(t+e*Math.cos(s)),e=Math.floor(i+e*Math.sin(s)),s=Number.fixed(.2+i/this.parent.height,1),n=s-.2,h=Number.random(0,360,1),a=Number.random(0,360,1);this.start=new BackgroundItemPosition(t,i,s,h);this.end=new BackgroundItemPosition(o,e,n,a)},refresh:function(){var t=Math.floor($.easing.swing(null,this.step,this.start.left,this.end.left-this.start.left,this.frameNumber)),i=Math.floor($.easing.swing(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber)),e=$.easing.swing(null,this.step,this.start.scale,this.end.scale-this.start.scale,this.frameNumber),o=$.easing.swing(null,this.step,this.start.rotate,this.end.rotate-this.start.rotate,this.frameNumber),t=transformCSS({tran:{x:t,y:i},scale:e,rotate:o});this.body.css(t)}}).extend("GoThroughItem");Class("SlowBubbleAnimation",{create:function(t){this._super(t);this.itemNumber=50;this.frameNumber=200},newItem:function(){return new SlowBubbleItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");Class("SlowBubbleItem",{create:function(t,i){this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:50px;height:50px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("bubble.png"))},initPositions:function(){var t=Number.random(.3,.7),i=Number.random(20,this.parent.width-20);this.start=new BackgroundItemPosition(i,Math.floor(this.parent.height-50*t),t);this.end=new BackgroundItemPosition(i,-40,t)},refresh:function(){var t,i,e;t=$.easing.easeInSine(null,this.step,this.start.left,this.end.left-this.start.left,this.frameNumber);i=$.easing.easeInQuad(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber);e=$.easing.easeOutQuint(null,this.step,0,this.start.scale,this.frameNumber);t=transformCSS({tran:{x:t,y:i},scale:e,origin:{x:50,y:100}});this.body.css(t)}}).extend("GoThroughItem");Class("FastBubbleAnimation",{create:function(t){this._super(t);this.itemNumber=80;this.frameNumber=40;this.popupPoints=[];this.popupPoints.push(.1*t.width);this.popupPoints.push(.9*t.width)},resize:function(t,i){this.popupPoints[0]=.1*t;this.popupPoints[1]=.9*t;this._super(t,i)},newItem:function(){return new FastBubbleItem(this.stage,this.frameNumber,this.popupPoints)}}).extend("GoThroughAnimation");Class("FastBubbleItem",{create:function(t,i,e){this.points=e;this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:50px;height:50px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("blue_bubble.png"))},initPositions:function(){var t=Number.random(.2,.35,2),i=this.points[Number.random(.1,1.9,0)],e=Math.floor(this.parent.height-50*t),o=Math.floor(i+Number.random(-30,30));this.start=new BackgroundItemPosition(i,e,t);this.end=new BackgroundItemPosition(o,-40,t)},refresh:function(){var t,i,e;t=$.easing.easeOutQuint(null,this.step,this.start.left,this.end.left-this.start.left,this.frameNumber);i=$.easing.easeInQuad(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber);e=$.easing.easeOutQuint(null,this.step,0,this.start.scale,this.frameNumber);t=transformCSS({tran:{x:t,y:i},scale:e,origin:{x:50,y:100}});this.body.css(t)}}).extend("GoThroughItem");Class("LightRainAnimation",{create:function(t){this._super(t);this.itemNumber=240;this.frameNumber=30},newItem:function(){return new LightRainItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");Class("LightRainItem",{create:function(t,i){this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:15px;height:24px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("raindrop.png"))},initPositions:function(){var t=1.2*this.parent.width,i=1.2*this.parent.height;Math.sqrt(t*t+i*i);t=Number.random(0,this.parent.width);i=Math.floor(this.parent.height+10);this.start=new BackgroundItemPosition(t,-50);this.end=new BackgroundItemPosition(t,i)},refresh:function(){var t=Math.floor($.easing.easeInSine(null,this.step,this.start.left,this.end.left-this.start.left,this.frameNumber)),i=Math.floor($.easing.easeInSine(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber)),t=transformCSS({tran:{x:t,y:i}});this.body.css(t)}}).extend("GoThroughItem");Class("HeavyRainAnimation",{create:function(t){this._super(t);this.itemNumber=160;this.frameNumber=20},newItem:function(){return new HeavyRainItem(this.stage,this.frameNumber)}}).extend("AlwaysExistsAnimation");Class("HeavyRainItem",{create:function(t,i){this.angle=15;this.radian=this.angle*Math.PI/180;this._super(t,i)},createBody:function(){this.body=$("<div style='left:0px;top:0px;width:2px;height:10px;position:absolute;z-index:1'></div>");var t=Math.floor(this.parent.height/Math.cos(this.radian));this.body.css({border:"0px solid gray",height:t+"px","background-color":"rgba(225,225,225, 0.06)"})},initPositions:function(){var t=Math.floor(this.parent.height*Math.tan(this.radian)),t=Number.random(0,this.parent.width+t);this.start=new BackgroundItemPosition(t,0)},refresh:function(){var t=Math.floor(this.parent.height*Math.tan(this.radian)),t=Number.random(0,this.parent.width+t),t=transformCSS({tran:{x:t,y:0},origin:{x:0,y:0},rotate:this.angle});this.body.css(t)}}).extend("AlwaysExistsItem");Class("SpaceShipAnimation",{create:function(t){this._super(t);this.itemNumber=500;this.frameNumber=30},newItem:function(){return new SpaceShipItem(this.stage,this.frameNumber)}}).extend("AlwaysExistsAnimation");Class("SpaceShipItem",{create:function(t,i){this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:50px;height:50px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("star.png"))},initPositions:function(){this.orbitRadius=Number.random(0,this.maxOrbit(this.parent.width,this.parent.height));this.radius=Number.random(90,this.orbitRadius)/20;this.orbitX=this.parent.width/2;this.orbitY=this.parent.height/2;this.angle=Number.random(0,360);this.speed=Number.random(0,this.orbitRadius/4)/this.orbitRadius;this.body.css({width:this.radius+"px",height:this.radius+"px",opacity:.8})},maxOrbit:function(t,i){var e=Math.max(t,i);return Math.round(Math.sqrt(e*e+e*e))/2},move:function(){this.angle+=this.speed;this.refresh()},refresh:function(){var t=this.angle/180*Math.PI,i=Math.sin(t)*this.orbitRadius+this.orbitX,t=Math.cos(t)*this.orbitRadius+this.orbitY,i=transformCSS({tran:{x:i-this.radius/2,y:t-this.radius/2}});this.body.css(i)}}).extend("AlwaysExistsItem");Class("SpaceTravelAnimation",{create:function(t){this._super(t);this.frameNumber=this.itemNumber=300},nextFrame:function(){if(this.frameNumber&&this.itemNumber){for(var t=0;2>t;t++)this.addItem();for(t=0;t<this.items.length;t++)this.items[t].isActive()&&this.items[t].move()}},newItem:function(){return new SpaceTravelItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");Class("SpaceTravelItem",{create:function(t,i){this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:50px;height:50px;position:absolute;z-index:1;opacity:0.8'></img>");this.body.attr("src",this.getImagePath("star.png"))},initPositions:function(){var t=this.maxOrbit(this.parent.width,this.parent.height),i=Math.floor(.7*t),e=Number.random(0,i),o=$.easing.easeInQuad(null,e,20,i-20,i);fScale=1-.8*o/i;fSpeed=5-4*o/i;this.realFrameNumber=Math.floor(this.frameNumber/fSpeed);var e=Number.random(0,360)/180*Math.PI,s=this.parent.width/2,n=this.parent.height/2,i=Math.sin(e)*o+s,o=Math.cos(e)*o+n,s=Math.sin(e)*t+s,t=Math.cos(e)*t+n;this.start=new BackgroundItemPosition(i,o,.1);this.end=new BackgroundItemPosition(s,t,fScale)},maxOrbit:function(t,i){var e=Math.max(t,i);return Math.round(Math.sqrt(e*e+e*e))/2},move:function(){this.step++;this.step==this.realFrameNumber&&this.sleep();this.refresh()},refresh:function(){var t=Math.floor($.easing.easeInSine(null,this.step,this.start.left,this.end.left-this.start.left,this.realFrameNumber)),i=Math.floor($.easing.easeInSine(null,this.step,this.start.top,this.end.top-this.start.top,this.realFrameNumber)),e=$.easing.easeInSine(null,this.step,this.start.scale,this.end.scale-this.start.scale,this.realFrameNumber),t=transformCSS({tran:{x:t,y:i},scale:e});this.body.css(t)}}).extend("GoThroughItem");Class("MeteorAnimation",{create:function(t){this._super(t);this.itemNumber=3;this.frameNumber=120},newItem:function(){return new MeteorItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");Class("MeteorItem",{create:function(t,i){this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:-100px;width:2px;height:88px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("meteor.png"))},initPositions:function(){var t=Number.random(.5*this.parent.width,1.5*this.parent.width,0),i=Math.PI/180*65,e=Math.floor(this.parent.height+88*Math.cos(i)),i=Math.floor(t-e*Math.tan(i)),o=Number.random(.7,1.5,1);this.start=new BackgroundItemPosition(t,0,o,65);this.end=new BackgroundItemPosition(i,e,o,65)},refresh:function(){var t=Math.floor(this.frameNumber);if(!(this.step>t)){var i=Math.floor($.easing.easeInSine(null,this.step,this.start.left,this.end.left-this.start.left,t)),e=Math.floor($.easing.easeInSine(null,this.step,this.start.top,this.end.top-this.start.top,t));$.easing.easeInSine(null,this.step,1,-1,t);t=transformCSS({origin:{x:0,y:0},tran:{x:i,y:e},rotate:this.start.rotate,scale:this.start.scale});this.body.css(t)}}}).extend("GoThroughItem");Class("SunshineAnimation",{create:function(t){this._super(t);this.createSun();this.createSunBorder();this.itemNumber=40;this.frameNumber=10},createSun:function(){this.sun=$("<div></div>");this.sun.css({position:"absolute","z-index":2,width:"4px",height:"4px","border-radius":"2px","background-color":"rgba(255,255,255, 0.9)",left:"-4px",top:"-4px","box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)","-o-box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)","-ms-box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)","-moz-box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)","-webkit-box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)",opacity:1});this.stage.body.append(this.sun)},createSunBorder:function(){this.sunBorder=$("<div></div>");this.sunBorder.css({position:"absolute","z-index":1,width:"4px",height:"4px","border-radius":"2px","background-color":"rgba(255,255,255, 0.2)",left:"-4px",top:"-4px","box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)","-o-box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)","-ms-box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)","-moz-box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)","-webkit-box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)",opacity:1});this.stage.body.append(this.sunBorder)},newItem:function(){var t=this.itemCount()<this.itemNumber/2?1:-1;return new SunshineHaloItem(this.stage,this.frameNumber,t)}}).extend("AlwaysExistsAnimation");Class("SunshineHaloItem",{create:function(t,i,e){this.direction=e;this._super(t,i)},createBody:function(){this.body=$("<div style='left:0px;top:0px;width:0px;height:5px;position:absolute;z-index:2'></div>");var t=Math.floor(Math.sqrt(this.parent.width*this.parent.width+this.parent.height*this.parent.height));this.body.css({"border-left":"0px solid rgba(0,0,0,0)","border-right":t+"px solid rgba(255,255,255,0.01)","border-top":"25px solid rgba(0,0,0,0)","border-bottom":"25px solid rgba(0,0,0,0)","transform-origin":"0% 0%"})},initPositions:function(){this.rotate=Number.random(0,90)},move:function(){this.rotate+=this.direction/this.frameNumber;0>this.rotate&&(this.rotate+=90);this.rotate%=90;this.refresh()},refresh:function(){var t=this.rotate,i=Math.PI/180*t,e=Math.floor(120*Math.cos(i)),i=Math.floor(120*Math.sin(i))-20,t=transformCSS({tran:{x:e,y:i},rotate:t});this.body.css(t)}}).extend("AlwaysExistsItem");Class("CloudAnimation",{create:function(t){this._super(t);this.itemNumber=10;this.frameNumber=1e3},resize:function(t,i){this._super(t,i);for(var e=0;e<this.itemNumber;e++)this.addItem();for(e=0;e<this.itemCount();e++){var o=this.getItem(e),s=this.frameNumber-Math.floor((e+1)*this.frameNumber/this.itemNumber);o.active();o.step=s;o.refresh()}},newItem:function(){return new CloudItem(this.stage,this.frameNumber,this.itemCount()%5)}}).extend("GoThroughAnimation");Class("CloudItem",{create:function(t,i,e){this.cloudType=e;this.initCloudResources();this._super(t,i)},initCloudResources:function(){this.cloudResources=[];this.cloudResources.push({src:"cloud5.png",width:300,height:147,top:.3});this.cloudResources.push({src:"cloud4.png",width:300,height:112,top:.5});this.cloudResources.push({src:"cloud2.png",width:300,height:211,top:.1});this.cloudResources.push({src:"cloud3.png",width:300,height:208,top:.2});this.cloudResources.push({src:"cloud1.png",width:300,height:177,top:0})},createBody:function(){this.body=$("<img style='left:0px;top:0px;position:absolute;z-index:1'></img>");var t=this.cloudResources[this.cloudType],i={width:t.width+"px",height:t.height+"px"};this.body.attr("src",this.getImagePath(t.src));this.body.css(i);this.top=t.top;this.width=t.width;this.height=t.height},initPositions:function(){var t=this.parent.width+100,i=Math.floor(this.parent.height*this.top),e=-this.width;Number.random(0,360);Number.random(-90,90);this.start=new BackgroundItemPosition(t,i);this.end=new BackgroundItemPosition(e,i)},refresh:function(){var t=this.pointByStep(this.step,this.start.left,this.end.left,this.frameNumber),i=this.pointByStep(this.step,this.start.top,this.end.top,this.frameNumber),t=transformCSS({tran:{x:t,y:i},scale:this.start.scale});this.body.css(t)}}).extend("GoThroughItem");Class("SunCloudAnimation",{create:function(t){this.sun=new SunshineAnimation(t);this.cloud=new CloudAnimation(t)},resize:function(t,i){this.sun.resize(t,i);this.cloud.resize(t,i)},nextFrame:function(){this.sun.nextFrame();this.cloud.nextFrame()}});Class("SnowAnimation",{create:function(t){this._super(t);this.itemNumber=200;this.frameNumber=400},resize:function(t,i){this._super(t,i);for(var e=0;e<this.itemNumber;e++)this.addItem();for(e=0;e<this.itemCount();e++){var o=this.getItem(e),s=Number.random(0,this.frameNumber);o.active();o.step=s;o.refresh()}},newItem:function(){return new SnowItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");Class("SnowItem",{create:function(t,i){this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:22px;height:22px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("snow.png"))},initPositions:function(){var t=1.2*this.parent.width,i=1.2*this.parent.height;Math.sqrt(t*t+i*i);var t=Number.random(0,this.parent.width),e=Math.floor(.1*-this.parent.height),o=Number.random(80,100,1),s=Math.PI/180*o,o=Math.floor(t+i*Math.cos(s)),i=Math.floor(e+i*Math.sin(s)),s=Number.random(.3,1.5);this.start=new BackgroundItemPosition(t,e,s);this.end=new BackgroundItemPosition(o,i,s)},refresh:function(){var t=this.pointByStep(this.step,this.start.left,this.end.left,this.frameNumber),i=this.pointByStep(this.step,this.start.top,this.end.top,this.frameNumber),t=transformCSS({tran:{x:t,y:i},scale:this.start.scale});this.body.css(t)}}).extend("GoThroughItem");Class("FireflyAnimation",{create:function(t){this._super(t);this.itemNumber=50;this.frameNumber=300},newItem:function(){return new FireflyItem(this.stage,this.frameNumber)}}).extend("AlwaysExistsAnimation");Class("FireflyItem",{create:function(t,i){this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:30px;height:30px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("firefly.png"))},initPositions:function(){var t=Number.random(0,this.parent.width),i=Number.random(this.parent.height/3,this.parent.height),e=Number.random(.3,1,1);this.start=new BackgroundItemPosition(t,i,e);this.end=null;this.resetTarget()},resetTarget:function(){this.end&&(this.start=this.end,this.end=null);var t=Number.random(0,35),i=Math.PI/180*t,t=this.start.left+[-1,1][Number.random(.1,1.9,0)]*Math.floor(80*Math.cos(i)),t=Number.between(t,-20,this.parentWidth+20),i=this.start.top+[-1,1][Number.random(.1,1.9,0)]*Math.floor(80*Math.sin(i)),i=Number.between(i,-20,this.parent.height+20),e=Number.random(.3,1,1);this.end=new BackgroundItemPosition(t,i,e)},refresh:function(){var t,i,e;t=this.pointByStep(this.step,this.start.left,this.end.left,this.frameNumber);i=this.pointByStep(this.step,this.start.top,this.end.top,this.frameNumber);e=$.easing.swing(null,this.step,this.start.scale,this.end.scale-this.start.scale,this.frameNumber);t=transformCSS({tran:{x:t,y:i},scale:e});this.body.css(t)}}).extend("AlwaysExistsItem");Class("FallenLeavesAnimation",{create:function(t){this._super(t);this.itemNumber=25;this.frameNumber=300},newItem:function(){return new FallenLeavesItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");Class("FallenLeavesItem",{create:function(t,i){this.initLeafResources();this._super(t,i)},initLeafResources:function(){this.leafResources=[];this.leafResources.push({src:"leaves1.png",width:99,height:59});this.leafResources.push({src:"leaves2.png",width:100,height:88});this.leafResources.push({src:"leaves3.png",width:100,height:60});this.leafResources.push({src:"leaves4.png",width:100,height:87});this.leafResources.push({src:"leaves5.png",width:100,height:87});this.leafResources.push({src:"leaves6.png",width:100,height:57})},createBody:function(){this.body=$("<img style='left:0px;top:0px;position:absolute;z-index:1'></img>");var t=this.leafResources[Number.random(.1,5.9,0)],i={width:t.width+"px",height:t.height+"px"};this.body.attr("src",this.getImagePath(t.src));this.body.css(i)},initPositions:function(){var t=1.2*this.parent.height,i=Number.random(0,this.parent.width),e=Math.floor(.1*-this.parent.height),o=Number.random(80,100,1),s=Math.PI/180*o,o=Math.floor(i+t*Math.cos(s)),t=Math.floor(e+t*Math.sin(s)),s=Number.random(.4,.8,1),n=Number.random(0,360),h=n+Number.random(-90,90);this.start=new BackgroundItemPosition(i,e,s,n);this.end=new BackgroundItemPosition(o,t,s,h)},refresh:function(){var t=$.easing.easeInSine(null,this.step,this.start.left,this.end.left-this.start.left,this.frameNumber),i=$.easing.easeInSine(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber),e=$.easing.easeInSine(null,this.step,this.start.rotate,this.end.rotate-this.start.rotate,this.frameNumber),t=transformCSS({tran:{x:t,y:i},scale:this.start.scale,rotate:e});this.body.css(t)}}).extend("GoThroughItem");Class("TwinkleAnimation",{create:function(t){this._super(t);this.itemNumber=8;this.frameNumber=100},newItem:function(){return new TwinkleItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");Class("TwinkleItem",{create:function(t,i){this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:26px;height:26px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("twinkle.png"))},initPositions:function(){var t=Number.random(0,this.parent.width),i=Number.random(0,this.parent.height),e=Number.random(0,360),o=e+360;this.start=new BackgroundItemPosition(t,i,1,e);this.end=new BackgroundItemPosition(t,i,1,o)},refresh:function(){var t=this.start.left,i=this.start.top,e=this.pointByStep(this.step,this.start.rotate,this.end.rotate,this.frameNumber,1),o=this.step,s=this.frameNumber/2,o=o<s?this.pointByStep(o,0,1,s,1):this.pointByStep(o-s,1,0,s,1),t=transformCSS({tran:{x:t,y:i},scale:o,rotate:e});this.body.css(t)}}).extend("GoThroughItem");Class("MoonCloudAnimation",{create:function(t){this._super(t);this.itemNumber=9;this.frameNumber=1800;this.createMoon()},createMoon:function(){this.moon=$("<img></img>");this.moon.attr("src",this.getImagePath("moon.png"));this.moon.css({position:"absolute",right:"2%",top:"2%"});this.stage.body.append(this.moon)},resize:function(t,i){this._super(t,i);for(var e=0;e<this.itemNumber;e++)this.addItem();for(e=0;e<this.itemCount();e++){var o=this.getItem(e),s=this.frameNumber-Math.floor((e+1)*this.frameNumber/this.itemNumber);o.active();o.step=s;o.refresh()}},newItem:function(){return new MoonCloudItem(this.stage,this.frameNumber,this.itemCount()%3)}}).extend("GoThroughAnimation");Class("MoonCloudItem",{create:function(t,i,e){this.initCloudResources();this.cloudType=e;this._super(t,i)},initCloudResources:function(){this.cloudResources=[];this.cloudResources.push({src:"moon_cloud_one.png",width:960,height:480,top:.05,opacity:.5});this.cloudResources.push({src:"moon_cloud_two.png",width:960,height:480,top:.05,opacity:.2});this.cloudResources.push({src:"moon_cloud_three.png",width:960,height:480,top:.05,opacity:.5})},createBody:function(){this.body=$("<img style='left:0px;top:0px;position:absolute;z-index:1'></img>");var t=this.cloudResources[this.cloudType],i={width:t.width+"px",height:t.height+"px",opacity:t.opacity};this.body.attr("src",this.getImagePath(t.src));this.body.css(i);this.top=t.top;this.width=t.width;this.height=t.height},initPositions:function(){var t=this.parent.width,i=Math.floor(this.parent.height*this.top),e=-this.width;Number.random(0,360);Number.random(-90,90);this.speed=Number.random(1,2,1);this.realFrameNumber=Math.floor(this.frameNumber/this.speed);this.start=new BackgroundItemPosition(t,i);this.end=new BackgroundItemPosition(e,i)},refresh:function(){if(!(this.step>this.realFrameNumber)){var t=this.pointByStep(this.step,this.start.left,this.end.left,this.realFrameNumber),i=this.pointByStep(this.step,this.start.top,this.end.top,this.realFrameNumber),t=transformCSS({tran:{x:t,y:i},scale:this.start.scale});this.body.css(t)}}}).extend("GoThroughItem");Class("BalloonCloudAnimation",{create:function(t){this.balloon=new BalloonAnimation(t);this.cloud=new BottomCloudAnimation(t)},resize:function(t,i){this.balloon.resize(t,i);this.cloud.resize(t,i)},nextFrame:function(){this.balloon.nextFrame();this.cloud.nextFrame()}});Class("BalloonAnimation",{create:function(t){this._super(t);this.itemNumber=2;this.frameNumber=600},newItem:function(){return new BalloonItem(this.stage,this.frameNumber,this.itemCount())}}).extend("AlwaysExistsAnimation");Class("BalloonItem",{create:function(t,i,e){this.index=e;this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:150px;height:150px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("air_balloon.png"))},initPositions:function(){var t=this.parent.width/1e3,i=Math.floor(125*t),e=Math.floor(140*t),t=0,t=0==this.index?Number.random(20,100):this.parent.width-200-Number.random(20,100),e=this.parent.height-i-e,o=Number.random(30,70),s=t,n=e+o;this.start=new BackgroundItemPosition(t,e-o);this.end=new BackgroundItemPosition(s,n);this.body.css({width:i+"px",height:i+"px"})},refresh:function(){var t=this.frameNumber/2,i=this.step,e;i<=t?(e=this.pointByStep(i,this.start.left,this.end.left,t),t=this.pointByStep(i,this.start.top,this.end.top,t)):(i-=t,e=this.pointByStep(i,this.end.left,this.start.left,t),t=this.pointByStep(i,this.end.top,this.start.top,t));e=transformCSS({tran:{x:e,y:t},origin:{x:0,y:0}});this.body.css(e)}}).extend("AlwaysExistsItem");Class("BottomCloudAnimation",{create:function(t){this._super(t);this.itemNumber=2;this.frameNumber=1e3},newItem:function(){return new BottomCloudItem(this.stage,this.frameNumber,this.itemCount())}}).extend("AlwaysExistsAnimation");Class("BottomCloudItem",{create:function(t,i,e){this.index=e;this._super(t,i)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:256px;height:256px;position:absolute;z-index:2'></img>");this.body.attr("src",this.getImagePath("bg-clouds.png"))},initPositions:function(){var t=this.parent.width,i=188*this.parent.width/988,e=this.index*this.parent.width,o=this.parent.height-i,s=e-this.parent.width;this.start=new BackgroundItemPosition(e,o);this.end=new BackgroundItemPosition(s,o);this.body.css({width:t+"px",height:i+"px"})},refresh:function(){iX=this.pointByStep(this.step,this.start.left,this.end.left,this.frameNumber);iY=this.pointByStep(this.step,this.start.top,this.end.top,this.frameNumber);var t=transformCSS({tran:{x:iX,y:iY},origin:{x:0,y:0}});this.body.css(t)}}).extend("AlwaysExistsItem");Class("EmptyAnimation",{create:function(t){},addItem:function(){},clear:function(){},resize:function(t,i){},nextFrame:function(){},newItem:function(){}}).extend("BackgroundAnimation");function grayBackground(t,i,e,o,s){this.sw=o;this.sh=s;this.background=$("<div ></div>");this.background.css({width:o+"px",height:s+"px",background:i,opacity:e,"z-index":200,position:"absolute",left:"0px",top:"0px"});t.append(this.background)}grayBackground.prototype.onResize=function(t,i){this.sw=t;this.sh=i;this.background.css({width:t+"px",height:i+"px"})};bdor[25]="i";grayBackground.prototype.setPosition=function(t,i,e){void 0==e&&(e=["left","top"]);this.background.css(e[0],t+"px");this.background.css(e[1],i+"px")};grayBackground.prototype.show=function(){this.father.append(this.background)};grayBackground.prototype.hide=function(){this.background.remove()};grayBackground.prototype.setZindex=function(t){this.background.css({"z-index":t})};grayBackground.prototype.onMouseUp=function(i,e){$(this.background).bind(_event._down,function(t){e.call(i)})};var textWidth=function(t,i){var e=$("<pre>"+t+"</pre>").css({color:bookConfig.iconColor,display:"none","font-size":i.size,"font-family":i.fontName});$("body").append(e);var o=Point(e.width(),e.height());e.remove();return o};function label(t,i){this.labelBox=$('<div style = "position : absolute;font-family:Tahoma,Georgia,Serif;font-size:12px">'+t+"</div>");if("null"!=t&&""!=t){this.caption=t;this.fontSize="12px";this.fontColor="#f0f0f0";this.fontName="Tahoma";var e=textWidth(t,{size:this.fontSize,fontName:this.fontName});this.width=e.x;this.height=e.y;i.append(this.labelBox)}}label.prototype.getWidth=function(){return this.width};bdor[27]="f";label.prototype.getHeight=function(){return this.height};label.prototype.getCaption=function(){return this.caption};label.prototype.setCaption=function(t){this.caption=t;this.labelBox[0].innerHTML=t;t=textWidth(t,{size:this.fontSize,fontName:this.fontName});this.width=t.x;this.height=t.y};label.prototype.setLabelPosition=function(t,i,e){void 0==e&&(e=["left","top"]);this.labelBox.css(e[0],t+"px");this.labelBox.css(e[1],i+"px")};label.prototype.onResize=function(t,i){this.width=t;this.height=i;this.labelBox.css({width:t+"px",height:i+"px"})};label.prototype.setFont=function(t,i,e){null==t?t=this.fontSize:this.fontSize=t;null==i?i=this.fontColor:this.fontColor=i;null==e?e=this.fontName:this.fontName=e;this.labelBox.css({"font-size":t,color:i,"font-family":e});t=textWidth(this.caption,{size:t,fontName:e});this.width=t.x;this.height=t.y};label.prototype.setFontSize=function(t){null==t?t=this.fontSize:this.fontSize=t;this.labelBox.css({"font-size":t});t=textWidth(this.caption,{size:t,fontName:this.fontName});this.width=t.x;this.height=t.y};label.prototype.riseAWord=function(t){var i=this.caption;-1==i.indexOf(t)&&(t=t.toLowerCase());-1!=i.indexOf(t)&&(newCaption=i.replaceAll(t,"<font color=red><strong>"+t+"</strong></font>"),this.labelBox[0].innerHTML=newCaption)};label.prototype.shortWord=function(t){this.caption.length>t&&(this.caption=this.caption.substring(0,t)+"..",this.setCaption(this.caption))};label.prototype.setCSS=function(t){this.labelBox.css(t)};label.prototype.setClass=function(t){this.labelBox.attr("class",t)};function initProgressBar(t,i){this.width=60;this.height=30;this.progress=new label("Loading",t);this.caption=this.originCaption=i;this.captionLength=this.caption.length;this.progress.setCSS({display:"none"})}initProgressBar.prototype.setPosition=function(t,i){this.progress.setLabelPosition((t-this.width)/2,(i-this.height)/2)};initProgressBar.prototype.addTimer=function(){var t=this;this.timerId=window.setInterval(function(){t.caption+=".";t.caption.length>t.captionLength+3&&(t.caption=originCaption);t.progress.setCaption(t.caption)},600)};initProgressBar.prototype.removeTimer=function(){window.clearInterval(this.timerId)};initProgressBar.prototype.show=function(){this.progress.setCSS({display:"block"});this.caption=this.originCaption;this.addTimer()};initProgressBar.prototype.hide=function(){this.progress.setCSS({display:"none"});this.removeTimer()};initProgressBar.prototype.setIndex=function(t){this.progress.setCSS({"z-index":t})};var BookShadow=Class({create:function(t){this.background=$("<div class='bookShadow'></div>");bookConfig.FlipDirection&&(this.background=$("<div class='bookShadow-vertical'></div>"));$(t).append(this.background);this.visible=!0},doubleWidth:function(t){bookConfig.FlipDirection?$(this.background).attr("class",t?"doubleHeight":"singleHeight"):$(this.background).attr("class",t?"doubleWidth":"singleWidth");$(this.background).addClass("bookShadow")},doubleHeight:function(t){$(this.background).attr("class",t?"doubleHeight":"singleHeight");$(this.background).addClass("bookShadow-vertical")},right:function(t){$(this.background).css({right:"auto"});t&&$(this.background).css({right:"0px"})},down:function(t){$(this.background).css({bottom:"auto"});t&&$(this.background).css({bottom:"0px"})},show:function(){this.visible||($(this.background).show(),this.visible=!0)},hide:function(){this.visible&&($(this.background).hide(),this.visible=!1)}});bdor[26]="h";Class("BookmarkList",{create:function(){this.bookmarks=[];this.bookPageCount=bookConfig.totalPageCount},reload:function(){this.bookmarks=[];this.loadBasicData();this.loadUserData();this.sort()},loadBasicData:function(){if(global.bmtConfig){var t=bmtConfig;bmtConfig.tabs&&(t=bmtConfig.tabs);for(var i=0;i<t.length;i++)this.isShow(t[i])&&this.bookmarks.push(t[i])}},loadUserData:function(){for(var t=Instance.parse(this.getUserDataFromLocal(),[]),i=0;i<t.length;i++)this.isShow(t[i])&&this.bookmarks.push(t[i])},isShow:function(t){return parseInt(t.pageIndex)<=this.bookPageCount&&!this.exists(t)},getUserDataFromLocal:function(){var t=window.location.href.replace(window.location.hash,"")+"BookMark";try{if(window.localStorage&&window.localStorage[t])return window.localStorage.getItem(t)}catch(t){}},sort:function(){this.bookmarks=this.bookmarks.sort(function(t,i){return parseInt(t.pageIndex)-parseInt(i.pageIndex)})},count:function(){return this.bookmarks.length},item:function(t){return this.bookmarks[t]},exists:function(t){for(var i=0;i<this.count();i++)if(this.item(i).pageIndex==t.pageIndex)return!0;return!1}});Class("BookmarkTabItem",{$body:null,$parent:null,create:function(t){this.data=t;this.$body=$("<span class='bookmark_item bookmark_caption'></span>");this.initStyle();this.update()},initStyle:function(){bmtConfig.showPage&&this.$body.attr("title",getShownPageNumber(this.data.pageIndex));bmtConfig.hasTexture&&this.$body.css({"background-image":"url("+(uiBaseURL+"leather1.png")+")","background-repeat":"repeat"})},getData:function(){return this.data},setData:function(t){this.data=t;this.update()},update:function(){var t=(bookConfig.tabAlpha?bookConfig.tabAlpha:100)/100;this.$body.css("background-color",Color(this.data.color).rgba(t));this.$body.text(this.data.caption)},moveTo:function(t){this.$parent!=t&&(this.remove(),this.$parent=t,this.$parent.append(this.$body),this.$body.bind("click",this.onBookmarkClick.bind(this)),this.$body.bind("mouseenter",this.onBookmarkMouseEnter.bind(this)),this.$body.bind("mouseleave",this.onBookmarkMouseLeave.bind(this)),this.$body.bind("pointerdown pointermove pointerup pointerenter",function(t){t.stopPropagation()}),this.$body.bind("mousedown mousemove mouseup mouseenter",function(t){t.stopPropagation()}))},remove:function(){null!=this.$parent&&(this.$body.remove(),this.$body.unbind(),this.$parent=null)},onBookmarkClick:function(t){gotoPageFun(this.data.pageIndex)},onBookmarkMouseEnter:function(t){this.$body.animate({top:"5px"},300)},onBookmarkMouseLeave:function(t){this.$body.animate({top:"40px"},300)},setPosition:function(t){this.$body.css({left:"",right:"","z-index":""});this.$body.css(t)},getWidth:function(){return this.$body.width()}});Class("BookmarkItemPool",{create:function(){this.items=[]},getBookmarkItem:function(t){var i=this.getItemFromList(t);i||(i=this.createNewItem(t));return i},getItemFromList:function(t){for(var i=0;i<this.items.length;i++){var e=this.items[i];if(e.getData().pageIndex==t.pageIndex)return e.setData(t),e}return null},createNewItem:function(t){t=new BookmarkTabItem(t);this.items.push(t);return t},clean:function(t){for(var i=0;i<this.items.length;i++){var e=this.items[i],o=e.getData();t.exists(o)||e.remove()}}});Class("BookmarkTab",{$parent:null,visible:!0,onSideEdge:!0,zIndex:0,create:function(t,i){this.$parent=t;this.hideSmallTab=!!i;this.onSideEdge=bmtConfig.onSideEdge;bookConfig.FlipDirection&&(this.onSideEdge=!0);this.zIndex=6;this.bookmarkPool=new BookmarkItemPool;this.bookmarkList=new BookmarkList;this.initBookmarkBar();this.reload()},initBookmarkBar:function(){bookConfig.FlipDirection?(this.leftBar=$("<div class='up_bookmark_bar'></div>"),this.rightBar=$("<div class='down_bookmark_bar'></div>")):(this.leftBar=$("<div class='left_bookmark_bar'></div>"),this.rightBar=$("<div class='right_bookmark_bar'></div>"));this.leftBar.on("mouseup touchstart",function(t){t.stopPropagation()});this.rightBar.on("mouseup touchstart",function(t){t.stopPropagation()});this.onSideEdge&&(this.leftBar.addClass("vertical"),this.rightBar.addClass("vertical"));this.leftBar.css("z-index",this.zIndex);this.rightBar.css("z-index",this.zIndex);this.$parent.append(this.leftBar);this.$parent.append(this.rightBar)},reload:function(){!1!=this.visible&&(this.bookmarkList.reload(),this.refresh())},refresh:function(){!1!=this.visible&&(this.separate(),this.adjustBar(),this.onResize())},separate:function(){this.refreshShownPage();this.bookmarkPool.clean(this.bookmarkList);for(var t=0;t<this.bookmarkList.count();t++){var i=this.bookmarkList.item(t),e=this.bookmarkPool.getBookmarkItem(i);i.pageIndex>=this.bigShownPage?rightToLeft?e.moveTo(this.leftBar):e.moveTo(this.rightBar):i.pageIndex<=this.smallShownPage&&(rightToLeft?e.moveTo(this.rightBar):e.moveTo(this.leftBar))}},refreshShownPage:function(){var t=BookInfo.getCurrentPages();1==t.length?(this.smallShownPage=t[0],this.bigShownPage=t[0]):(this.smallShownPage=Math.min(t[0],t[1]),this.bigShownPage=Math.max(t[0],t[1]))},isTheFirstPage:function(){this.refreshShownPage();return 1==this.bigShownPage},isTheLastPage:function(){this.refreshShownPage();return this.smallShownPage==totalPageCount},setAttachmentBefore:function(t){1>=t&&(parseBool(bookConfig.RightToLeft)?this.hideRightBar():this.hideLeftBar());t>=originTotalPageCount&&(parseBool(bookConfig.RightToLeft)?this.hideLeftBar():this.hideRightBar())},adjustBar:function(){var t=this.leftBar.children().length,i=this.rightBar.children().length;this.hideSmallTab?rightToLeft?(this.hideRightBar(),0==t?this.hideLeftBar():this.showLeftBar()):(this.hideLeftBar(),0==i?this.hideRightBar():this.showRightBar()):rightToLeft?(0==i||this.isTheFirstPage()?this.hideRightBar():this.showRightBar(),0==t||this.isTheLastPage()?this.hideLeftBar():this.showLeftBar()):(0==t||this.isTheFirstPage()?this.hideLeftBar():this.showLeftBar(),0==i||this.isTheLastPage()?this.hideRightBar():this.showRightBar());bookConfig.HardPageEnable&&this.adjustZindex()},adjustZindex:function(){this.leftBar.css("z-index",this.zIndex);this.rightBar.css("z-index",this.zIndex);rightToLeft?(this.isTheLastPage()&&this.rightBar.css("z-index",1),this.isTheFirstPage()&&this.leftBar.css("z-index",1)):(this.isTheLastPage()&&this.leftBar.css("z-index",1),this.isTheFirstPage()&&this.rightBar.css("z-index",1))},onResize:function(){if(this.onSideEdge){var t=this.$parent.height(),i=this.$parent.width();bookConfig.FlipDirection&&(t/=2);this.leftBar.css({width:t+"px",left:-t+"px"});this.rightBar.css({width:t+"px",left:i+"px"});bookConfig.FlipDirection&&this.rightBar.css({left:i-t+"px"});rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"right",-1)):(this.resizeItemsOfBar(this.leftBar,"right",1),this.resizeItemsOfBar(this.rightBar,"left",-1))}else t=this.$parent.width(),i=this.$parent.width(),this.hideSmallTab||(t/=2),this.leftBar.css({width:t+"px",left:"0px"}),this.rightBar.css({width:t+"px",left:i-t+"px"}),rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"left",-1)):(this.resizeItemsOfBar(this.leftBar,"left",1),this.resizeItemsOfBar(this.rightBar,"left",-1))},resizeItemsOfBar:function(t,i,e){for(var o=t.width(),s=0,n=0,h=0;h<this.bookmarkList.count();h++){var a=this.bookmarkList.item(h),r=this.bookmarkPool.getBookmarkItem(a);r.$parent==t&&(s=r.getWidth()+22,n+=r.getWidth()+22)}for(var n=n+2,h=t.children().length,s=Math.floor((o-4-s)/(h-1)),s=Number.between(s,10,65),l=0,g=0,h=0;h<this.bookmarkList.count();h++)if(a=this.bookmarkList.item(h),r=this.bookmarkPool.getBookmarkItem(a),r.$parent==t){var d={};n>=o?(d[i]=s*g,g++):(d[i]=l,l+=r.getWidth()+22);d["z-index"]=e*a.pageIndex;r.setPosition(d)}},show:function(){this.visible=!0;this.refresh()},hide:function(){this.hideLeftBar();this.hideRightBar();this.visible=!1},showLeftBar:function(){0<this.leftBar.children().length?this.leftBar.css("display","block"):this.leftBar.css("display","none")},hideLeftBar:function(){this.leftBar.css("display","none")},showRightBar:function(){0<this.rightBar.children().length?this.rightBar.css("display","block"):this.rightBar.css("display","none")},hideRightBar:function(){this.rightBar.css("display","none")}});var TableOfContentElements=Class({create:function(t){this._super(t);this.callBack=t;this.checkConfig();this.initElements();this.initEvent(t);this.pickElements(t)},checkConfig:function(){for(var o=function(t){if(t&&t.children&&0!=t.children.length)for(var i=t.children.length,e=0;e<i;e++)t.children[e].level=parseInt(t.children[e].level)+1,o(t.children[e])},t=ols.length,i=0;i<t;i++)0==parseInt(ols[i].level)&&(ols[i].level=parseInt(ols[i].level)+1,o(ols[i]))},initElements:function(){this.searchButtonUrl=form_icons.search_form?"data:image/png;base64,"+form_icons.search_form:uiBaseURL+"search_form.png";this.input=$("<input class='input_search'></input>");this.searchButton=$("<img class='searchButton' src='"+this.searchButtonUrl+"'/>");this.tableofcontentSwiper=$("<div class='stage'></div>");this.tableofcontentSwiperList=$("<div class='swiper'></div>");this.refreshSwiper(this.tableofcontentSwiperList,ols);this.tableofcontentSwiper.append(this.tableofcontentSwiperList);isPhone()||isPad()?this.tableofcontentSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.tableofcontentSwiper.append(this.progress),this.progress.append(this.progressBar),this.tableofcontentSwiper.scroll({},Direction.top))},refreshSwiper:function(t,i){for(var e=i.length,o=0;o<e;o++)this.addItem(t,i[o])},addItem:function(t,i){var e=new this.callBack.newItem(t,i,this.refresh.bind(this));t.append(e.getItem());e.unfolding()},refresh:function(){isPhone()||isPad()||this.tableofcontentSwiper.refreshData()},initEvent:function(t){this.searchButton.onTap(function(){this.searchStart()}.bind(this));this.input.bind("keydown",function(t){13==t.keyCode&&this.searchStart();t.stopPropagation()}.bind(this));this.input.bind("mousedown touchstart pointerdown mouseover mousemove",function(t){t.stopPropagation()})},searchStart:function(){this.tableofcontentSwiperList.empty();var t=this.input.val().toLowerCase();""===t?this.refreshSwiper(this.tableofcontentSwiperList,ols):(t=this.matchKey(t),this.refreshSwiper(this.tableofcontentSwiperList,t));this.refresh()},matchKey:function(n){var t=[],h=function(t){for(var i=[],e=0;e<t.length;e++){var o={caption:t[e].caption,page:t[e].page,level:t[e].level};t[e].children&&0<t[e].children.length&&(o.children=h(t[e].children));if(0<=t[e].caption.toLowerCase().indexOf(n))i.push(o);else if(o.children&&0<o.children.length)for(var s=0;s<o.children.length;s++)i.push(o.children[s])}return i};return t=h(ols)},pickElements:function(t){t.input=this.input;t.searchButton=this.searchButton;t.searchButtonUrl=this.searchButtonUrl;t.tableofcontentSwiper=this.tableofcontentSwiper;t.tableofcontentSwiperList=this.tableofcontentSwiperList;t.progress=this.progress;t.progressBar=this.progressBar},changeLanguage:function(){}}).extend(FormElements),TableOfContentItem=Class({create:function(t,i,e){this.callback=e;this.level=parseInt(ols[0].level)?parseInt(i.level):parseInt(i.level)+1;this.children=[];this.parent=t;this.parm=i;this.parm.caption=HTMLString.toText(this.parm.caption);this.item=(this.hasChild=i.children&&0<i.children.length)?$("<ul class='item'></ul>"):$("<li class='item'></li>");this.expandUrl=form_icons.arrow?"data:image/png;base64,"+form_icons.arrow:uiBaseURL+"arrow.png";this.collapseUrl=rightToLeft?form_icons.arrow3?"data:image/png;base64,"+form_icons.arrow3:uiBaseURL+"arrow3.png":form_icons.arrow2?"data:image/png;base64,"+form_icons.arrow2:uiBaseURL+"arrow2.png";this.fontColor=i.fontColor;this.colorObj=Color(this.fontColor);this.initDefaultDom();this.initHtml(t,i);this.initEvent()},getItem:function(){return this.item},initDefaultDom:function(){rightToLeft?this.initRightToLeftDefaultDom():this.initLeftToRightDefaultDom();this.arrow&&(this.arrow[0].colorChanged=!1,this.arrow.changeButtonColor(this.fontColor))},initRightToLeftDefaultDom:function(){LanguageTool.isRightToLeft(this.parm.caption)?this.description=$("<p class='description rtl'>"+this.parm.caption+"</p>"):this.description=$("<p class='description'>"+this.parm.caption+"</p>");this.hasChild&&(this.arrow=$("<img class='arrow' src='"+this.collapseUrl+"'/>"),this.arrow.css("right",10*(this.level-1)+"px"));this.description.css("margin-right",10*(this.level-1)+15+"px")},initLeftToRightDefaultDom:function(){this.description=$("<p class='description'>"+this.parm.caption+"</p>");this.hasChild&&(this.arrow=$("<img class='arrow' src='"+this.collapseUrl+"'/>"),this.arrow.css("left",10*(this.level-1)+"px"));this.description.css("margin-left",10*(this.level-1)+15+"px")},initHtml:function(t,i){rightToLeft?this.initRightToLeftHtml():this.initLeftToRightHtml()},initRightToLeftHtml:function(){this.item.append(this.description);this.arrow&&this.item.append(this.arrow)},initLeftToRightHtml:function(){this.arrow&&this.item.append(this.arrow);this.item.append(this.description)},initEvent:function(){this.item.onTap(function(){this.parm.url?window.open(getRealURL(this.parm.url),"_blank"):(gotoPageFun(parseInt(this.parm.page)),(isPhone()||isPad())&&global.frmTableOfContent.hide())}.bind(this));this.item.bind("mouseover",function(){this.item.css({background:this.colorObj.rgba(.1)})}.bind(this));this.item.bind("mouseleave",function(){this.isExpand||this.item.css({"background-color":"transparent"})}.bind(this));this.hasChild&&(this.arrow&&this.arrow.click(function(){this.onSwitch()}.bind(this)),this.arrow.bind("mousedown touchstart pointerdown mouseover mousemove click",function(t){t.stopPropagation()}))},expand:function(t){this.hasChild&&(0==this.children.length?this.addChildren():this.showChildren(),this.setAsExpand(),t&&this.callback())},collapse:function(t){if(this.hasChild){for(var i=0;i<this.children.length;i++)this.children[i].hide(),this.children[i].collapse();this.setAsCollapse();t&&this.callback()}},setAsExpand:function(){this.isExpand=!0;this.arrow&&(this.arrow.attr("src",this.expandUrl),this.arrow[0].colorChanged=!1,this.arrow.changeButtonColor(this.fontColor));this.item.css({"font-weight":"bold","background-color":this.colorObj.rgba(.1)})},setAsCollapse:function(){this.isExpand=!1;this.arrow&&(this.arrow.attr("src",this.collapseUrl),this.arrow[0].colorChanged=!1,this.arrow.changeButtonColor(this.fontColor));this.item.css({"font-weight":"","background-color":""})},addChildren:function(){for(var t=this.parm.children.length,i=0;i<t;i++){this.parm.children[i].fontColor=this.fontColor;var e=new global[this.getClassName()](this.parent,this.parm.children[i],this.callback);0==i?e.getItem().insertAfter(this.item):e.getItem().insertAfter(this.children[i-1].getItem());this.children.push(e)}},showChildren:function(){for(var t=this.children.length,i=0;i<t;i++)this.children[i].show(),this.children[i].getIsExpand()&&this.children[i].expand()},onSwitch:function(){this.opened?this.collapse(!0):this.expand(!0);this.opened=!this.opened},getIsExpand:function(){return this.opened},unfolding:function(){if(!bookConfig.isHideTabelOfContentNodes){this.expand();for(var t=this.children.length,i=0;i<t;i++)this.children[i].unfolding();this.opened=!0}},show:function(){this.item.show()},hide:function(){this.item.hide()}}),PhoneTableOfContentItem=Class({create:function(t,i,e){i.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this._super(t,i,e)}}).extend(TableOfContentItem),PhoneTableOfContentForm=Class({create:function(t){this.elements=new TableOfContentElements(this);this._super(t)},onCreate:function(){this.stage.css({color:this.fontColor});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.input);this.stage.append(this.searchButton);this.stage.append(this.tableofcontentSwiper)},newItem:function(t,i,e){return new PhoneTableOfContentItem(t,i,e)},onResize:function(){this._super();this.tableofcontentSwiper.css("height",this.height-125+"px");this.input.css("width",this.width-60+"px");this.elements.refresh()},initEvent:function(){},onShow:function(){}}).extend(PhoneFormFrame),TelephoneNumberItem=Class({create:function(t,i){this.parent=t;this.parm=i?i:{};this.parm.label||(this.parm.label="");this.parm.number||(this.parm.number="");this.item=$("<div class='item'></div>");this.number=$("<span class='number'>"+(this.parm.label?this.parm.label+":":"")+this.parm.number+"</span>");this.button=$("<a href='tel:"+this.parm.number+"'><span class='button'>"+getLanguage("btnDialing","call")+"</span></a>");this.initHtml();this.initCss()},initHtml:function(){this.item.append(this.number);this.item.append(this.button);this.parent.append(this.item)},initCss:function(){},changeLanguage:function(){this.button.find("span").html(getLanguage("btnDialing","call"))}}),TelephoneNumberElements=Class({create:function(t){this._super(t);this.initElements();this.initEvent(t);this.pickElements(t)},initElements:function(){this.initSwiper();this.addItem()},initSwiper:function(){this.numberSwiper=$("<div class='stage'></div>");this.numberSwiperList=$("<div class='swiper'></div>");this.numberSwiper.append(this.numberSwiperList);isPhone()||isPad()?this.numberSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.numberSwiper.append(this.progress),this.progress.append(this.progressBar),this.numberSwiper.scroll({},Direction.top))},addItem:function(){this.numberArray=global.phoneNumber;this.itemArray=[];for(var t=0;t<this.numberArray.length;t++){var i=new TelephoneNumberItem(this.numberSwiperList,this.numberArray[t]);this.itemArray.push(i)}},refresh:function(){isPhone()||isPad()||this.numberSwiper.refreshData()},initEvent:function(t){},pickElements:function(t){t.numberSwiper=this.numberSwiper;t.itemArray=this.itemArray},changeLanguage:function(){for(var t=0;t<this.itemArray.length;t++)this.itemArray[t]&&this.itemArray[t].changeLanguage()}}).extend(FormElements),TelephoneNumberForm=Class({create:function(t){this.elements=new TelephoneNumberElements(this);this._super(t)},onCreate:function(){this.title.css({"background-color":this.mainColor,color:this.fontColor});this.numberSwiper.css({"background-color":this.mainColorObj.rgba(.8),color:this.fontColorObj.rgba(.9)});this.numberSwiper.find("a").css({color:this.fontColorObj.rgba(.9),border:"1px solid "+this.fontColorObj.rgba(.9)});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.numberSwiper);this._super()},initEvent:function(){this.stage.bind(_event._down,function(t){t.stopPropagation()})},onShow:function(){},onResize:function(){this._super();this.numberSwiper.css("max-height",windowHeight/2+"px");this.elements.refresh()}}).extend(FadeOutFadeForm),thickessPerBar=1,totalheight=300,originColor;function drawThickeness(t,i,e,o,s){totalheight=e;var n=0;e=thickessPerBar/8/1.5;var h;h=Math.max(5*i/12,10);h=Math.min(h,32);h=0==h%2?h:h+1;var a=0,r=0;Math.max(h,4);for(Math.min(h,12);r<i;){h=getColorAtIdx(r,i);n=e*r-Math.sin(Math.PI/2/4*r/i)*e*r/2;n=e*r;a=totalheight-2*n;for(h=h.toString(16);6>h.length;)h="0"+h;t.fillStyle="#"+h;t.fillRect(o+s*r,n,1,a);t.fill();r++}}var COLOR_0=243,COLOR_1_1=209,COLOR_1_2=231,COLOR_2_1=209,COLOR_2_2=213;function getColorAtIdx(t,i){var e=0,o=e=0,e=Math.max(3,i/6+i/4),e=Math.min(11,e),e=0==e%2?e-1:e;global.originColor||(global.originColor=Color(bookConfig.thicknessColor).split());var s=originColor.r/255,n=originColor.g/255,h=originColor.b/255;0==t?e=COLOR_0:t<e?e=0==t%2?COLOR_1_2:COLOR_1_1:(e=(t-e)/2,o=4<e/2?24:6*Math.floor(e/2),e=0==e%2?COLOR_2_1-o:COLOR_2_2-o);return e*h|e*n<<8|e*s<<16}Class("Thickness",{create:function(t,i){this.thicknessWidth=getMaxThicknessWidth();this.totalPageCount=bookConfig.totalPageCount;this.endIndex=this.startIndex=this.pageCount=0;this.parent=t;this.isLeft=i;this.scale=1;this.init();this.initShadow();this.initEvent()},init:function(){this.thickness=$("<div class='thickness'></div>");this.thicknessCanvas=$("<canvas style='position:absolute;top:0;left:0;'>");this.isLeft?this.thickness.addClass("left_thickness"):this.thickness.addClass("right_thickness");this.thickness.css({"z-index":5});this.thickness.append(this.thicknessCanvas);this.parent.append(this.thickness);this.context=this.thicknessCanvas[0].getContext("2d")},initShadow:function(){this.shadow||$.browser.msie&&11>$.browser.version||(this.shadow=$("<div class='shadow'></div>"),this.thickness.append(this.shadow))},refresh:function(t,i){this.startIndex=t;this.endIndex=i;this.pageCount=this.endIndex-this.startIndex;this.width=this.getThicknessWidth(Math.abs(this.pageCount));this.thickness.css({width:this.width+"px"});this.thicknessCanvas.attr("width",this.width+"px");this.context.clearRect(0,0,this.thicknessWidth,this.height);this.isLeft?(this.thickness.css({left:-this.width+"px"}),drawThickeness(this.context,this.width,this.height,this.width,-1)):drawThickeness(this.context,this.width,this.height,0,1)},onResize:function(t,i){this.resizeThickness(t,i);this.resizeShadow(t,i)},show:function(){this.thickness.show()},hide:function(){this.thickness.hide()},hideCanvas:function(){this.thicknessCanvas.hide()},showCanvas:function(){this.thicknessCanvas.show()},resizeShadow:function(t,i){},resizeThickness:function(t,i){this.height=i;var e="100%";this.isLeft&&(e=-this.width+"px");this.thickness.css({left:e});this.thicknessCanvas.attr("height",i+"px");this.thicknessCanvas.attr("width",this.thicknessWidth+"px");this.context.clearRect(0,0,this.thicknessWidth,this.height);this.isLeft?drawThickeness(this.context,this.thicknessWidth,i,this.thicknessWidth,-1):drawThickeness(this.context,this.thicknessWidth,i,0,1);this.resetTotalWidth(t,i)},resetTotalWidth:function(t,i){this.totalWidth=oneSideTotalThicknessWidth()},getPageIndexByPosition:function(t){t=this.getDistance(t);return this.startIndex+parseInt(t*this.pageCount/this.width)},getDistance:function(t){t=t.pageX;var i=$(this.thickness).offset().left;return t-i},getThicknessWidth:function(t){return this.width=Math.floor(this.totalWidth*t/this.totalPageCount)},getWidth:function(){return this.width},getHeight:function(){return this.height},initEvent:function(){this.thickness.bind("mouseup touchstart",function(t){t.stopPropagation()}.bind(this));this.thickness.click(function(t){0!=this.pageCount&&(t=this.getPageIndexByPosition(t),!t||0>=t||gotoPageFun(t))}.bind(this));isPhone()||isPad()||(this.thickness.bind("mousemove",function(t){if(0!=this.pageCount){var i=this.getPageIndexByPosition(t);if(!i||0>=i)this.hint&&this.hint.hide();else{var i=" "+getShownPageNumber(i)+" ",e=t.pageX;t=t.pageY-30;this.hint||(this.hint=new divHint(i,e,t));this.hint.setText(i);this.hint.show(e,t);this.hint.moveto(e,t)}}}.bind(this)),this.thickness.bind("mouseleave",function(){null!=this.hint&&this.hint.hide()}.bind(this)))},doSetMovingScale:function(t,i,e,o,s){if(!((isPhone()||isPad())&&!bookConfig.HardPageEnable||!this.totalWidth||0>=this.totalWidth||(s=s?0:Math.min(4/this.totalWidth,1),1==s||(1!=t&&1!=i||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&t!=totalPageCount&&i!=totalPageCount))){var n=1,h=1;(1!=t||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&t!=totalPageCount||(n=s);(1!=i||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&i!=totalPageCount||(h=s);t=$.easing.easeInOutSine(null,e,n,h-n,o);this.setScale(t)}},setScale:function(t){this.thickness.css({transform:"scaleX("+t+") scaleZ(1)","-webkit-transform":"scaleX("+t+") scaleZ(1)","-moz-transform":"scaleX("+t+") scaleZ(1)","-ms-transform":"scaleX("+t+") scaleZ(1)","-o-transform":"scaleX("+t+") scaleZ(1)"});this.scale=t}});var totalThicknessWidth=function(t){if(!t&&!bookConfig.showThicknessOnMobile)return 0;totalWidth=oneSideTotalThicknessWidth();t&&(totalWidth*=2);return totalWidth},oneSideTotalThicknessWidth=function(){var t=getMaxThicknessWidth(),i=Math.min(bookConfig.totalPageCount,100),i=$.easing.easeOutQuad(null,i,0,t,100),i=Math.floor(i),e=1,e=$.easing.swing(null,Math.max(i-8,0),1,e-1,t-8);return i=Math.floor(i*e)},getMaxThicknessWidth=function(){switch(bookConfig.thicknessWidthType){case"none":return 0;case"thinner":return 5;case"thin":return 15;case"thicker":return 40}return 20},ThicknessManager=Class({create:function(t,i){this.book=i;this.leftThickness=new Thickness(t,!0);this.rightThickness=new Thickness(t,!1)},setAttachmentBefore:function(t){bookConfig.RightToLeft?this.book.currentPageIndex<t?this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex(t)):this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(t),0):this.book.currentPageIndex<t?this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(t),bookConfig.totalPageCount):this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex(t))},afterCurling:function(){this.refreshThickness()},setAttachmentIn:function(t){},setAttachmentAfter:function(){this._super();this.afterCurling()},followToPoint:function(t,i,e){this.leftThickness&&this.leftThickness.doSetMovingScale(t,i,e,this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(t,i,e,this.book.width,bookConfig.HardPageEnable)},refreshThickness:function(){bookConfig.RightToLeft?(this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(),0)):(this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(),bookConfig.totalPageCount));this.leftThickness&&this.leftThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable)},resizeAttachment:function(t,i){if(this.leftThickness)this.leftThickness.onResize(t,i);if(this.rightThickness)this.rightThickness.onResize(t,i);this.refreshThickness()},hideCanvas:function(){this.leftThickness&&this.leftThickness.hideCanvas();this.rightThickness&&this.rightThickness.hideCanvas()},showCanvas:function(){this.leftThickness&&this.leftThickness.showCanvas();this.rightThickness&&this.rightThickness.showCanvas()},getThicknessWidth:function(){return[this.leftThickness.getWidth()*this.leftThickness.scale,this.rightThickness.getWidth()*this.rightThickness.scale]},getMinCurrentIndex:function(t){if(void 0==t||null==t)t=this.book.currentPageIndex;return BookInfo.getMinPageIndex(t)},getMaxCurrentIndex:function(t){if(void 0==t||null==t)t=this.book.currentPageIndex;t=BookInfo.getMaxPageIndex(t);return Math.min(t,bookConfig.totalPageCount)}}),SingleBookThicknessManager=Class({create:function(t,i){this.book=i;rightToLeft&&(this.leftThickness=new Thickness(t,!0));rightToLeft||(this.rightThickness=new Thickness(t,!1))},setAttachmentBefore:function(t){bookConfig.RightToLeft?this.book.currentPageIndex<t?this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex(t)):this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(t),0):this.book.currentPageIndex<t?this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(t),bookConfig.totalPageCount):this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex(t))},followToPoint:function(t,i,e){t>i&&(e=2*this.book.width-e);this.leftThickness&&this.leftThickness.doSetMovingScale(t,i,e,2*this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(t,i,e,2*this.book.width,bookConfig.HardPageEnable)},refreshThickness:function(){bookConfig.RightToLeft?(this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(),0)):(this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(),bookConfig.totalPageCount));this.leftThickness&&this.leftThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable)},resizeAttachment:function(t,i){if(this.leftThickness)this.leftThickness.onResize(t,i);if(this.rightThickness)this.rightThickness.onResize(t,i);this.refreshThickness()},getThicknessWidth:function(){if(rightToLeft)return[this.leftThickness.getWidth()*this.leftThickness.scale,0];if(!rightToLeft)return[0,this.rightThickness.getWidth()*this.rightThickness.scale]},getMinCurrentIndex:function(t){if(void 0==t||null==t)t=this.book.currentPageIndex;return t},getMaxCurrentIndex:function(t){if(void 0==t||null==t)t=this.book.currentPageIndex;return Math.min(t,bookConfig.totalPageCount)}}).extend(ThicknessManager),FlipShotBar=Class({create:function(t){this.flipShotObj=$("<div id='flipShotBar' class='flipShotBar'></div>");this.flipShotObj.css({"z-index":2*(bookConfig.totalPageCount+5)+1});this.isLeft=t;this.visible=!0;this.width=50;this.height=0;this.init();this.initEvents();this.flipShotObj.append(this.firstDiv);this.flipShotObj.append(this.prevDiv)},init:function(){this.firstDiv=$("<div class='flipbutton upbutton'></div>");this.prevDiv=$("<div class='flipbutton downbutton'></div>");this.isLeft?(this.firstDiv.addClass("left"),this.prevDiv.addClass("left"),this.prevImageUrl=uiBaseURL+"slide_leftButton.png",this.firstImageUrl=uiBaseURL+"slide_firstButton.png"):(this.firstDiv.addClass("right"),this.prevDiv.addClass("right"),this.prevImageUrl=uiBaseURL+"slide_rightButton.png",this.firstImageUrl=uiBaseURL+"slide_lastButton.png");this.prevDiv.append("<img src='"+this.prevImageUrl+"'/>");this.firstDiv.append("<img src='"+this.firstImageUrl+"'/>")},onResize:function(t,i){var e=Math.min(50,.7*i/8),o=Math.min(.7*i,310);this.width=e;this.height=o;this.flipShotObj.css({width:e,height:o});this.setPosition(t,i)},setPosition:function(t,i){this.flipShotObj.css({left:this.isLeft?1-this.width:"100%",top:(i-this.height)/2})},setScale:function(t){this.width*=t;this.height*=t;this.flipShotObj.css({width:this.width,height:this.height})},setVisible:function(t){this.flipShotObj.css({display:t?"block":"none"});this.visible=t},getContainer:function(){return this.flipShotObj},initEvents:function(){this.isLeft?(this.prevDiv.bind(_event._end,function(t){rightToLeft?nextPageFun():previousPageFun()}),this.firstDiv.bind(_event._end,function(t){rightToLeft?lastPageFun():firstPageFun()})):(this.prevDiv.bind(_event._end,function(t){rightToLeft?previousPageFun():nextPageFun()}),this.firstDiv.bind(_event._end,function(t){rightToLeft?firstPageFun():lastPageFun()}));this.prevDiv.on("mousedown mouseup touchstart",function(t){t.stopPropagation()});this.firstDiv.on("mousedown mouseup touchstart",function(t){t.stopPropagation()})},setVisibleByIndex:function(t){this.isLeft?(1<t&&(rightToLeft||this.setVisible(!0)),t<originTotalPageCount-1&&rightToLeft&&this.setVisible(!0),3>=t&&(bookConfig.RightToLeft||1>=t&&this.setVisible(!1)),t>=originTotalPageCount-2&&bookConfig.RightToLeft&&t>=originTotalPageCount-1&&this.setVisible(!1)):(1<t&&rightToLeft&&this.setVisible(!0),t<originTotalPageCount-1&&(rightToLeft||this.setVisible(!0)),3>=t&&bookConfig.RightToLeft&&1>=t&&this.setVisible(!1),t>=originTotalPageCount-2&&(bookConfig.RightToLeft||t>=originTotalPageCount-1&&this.setVisible(!1)))},refresh:function(){}}),FlipShotBarManager=Class({create:function(t,i){this.book=i;this.leftFlipShotBar=new FlipShotBar(!0);this.rightFlipShotBar=new FlipShotBar(!1)},appendTo:function(t){t.append(this.leftFlipShotBar.getContainer());t.append(this.rightFlipShotBar.getContainer())},setVisibleByIndex:function(t){bookConfig.RightToLeft?(t>=this.book.currentPageIndex&&this.leftFlipShotBar.setVisibleByIndex(t),t<=this.book.currentPageIndex&&this.rightFlipShotBar.setVisibleByIndex(t)):(t<=this.book.currentPageIndex&&this.leftFlipShotBar.setVisibleByIndex(t),t>=this.book.currentPageIndex&&this.rightFlipShotBar.setVisibleByIndex(t))},refresh:function(){this.leftFlipShotBar&&this.leftFlipShotBar.setVisibleByIndex(this.book.currentPageIndex);this.rightFlipShotBar&&this.rightFlipShotBar.setVisibleByIndex(this.book.currentPageIndex)},onResize:function(t,i){if(this.leftFlipShotBar)this.leftFlipShotBar.onResize(t,i);if(this.rightFlipShotBar)this.rightFlipShotBar.onResize(t,i)},getWidth:function(){return this.leftFlipShotBar?this.leftFlipShotBar.width:this.rightFlipShotBar?this.rightFlipShotBar.width:0},getHeight:function(){return this.leftFlipShotBar?this.leftFlipShotBar.height:this.rightFlipShotBar?this.rightFlipShotBar.height:0},resizeAttachment:function(t,i,e){this.leftFlipShotBar&&this.leftFlipShotBar.setScale(e);this.rightFlipShotBar&&this.rightFlipShotBar.setScale(e);if(this.leftFlipShotBar)this.leftFlipShotBar.onResize(t,i);if(this.rightFlipShotBar)this.rightFlipShotBar.onResize(t,i)}}),VideoGalleryElements=Class({create:function(t){this._super(t);this.initVideoList();this.videoList&&0!=this.videoList.length&&(this.initElements(),this.initEvent(t),this.pickElements(t))},initVideoList:function(){this.videoList=videoList},initElements:function(){this.content=$("<div class='video_content'></div>");this.video=$("<iframe type='text/html' class='video' src='' allowfullscreen frameborder='0'></iframe>");rightToLeft?this.initRightToLeftDefaultDom():this.initLeftToRightDefaultDom();this.initSwiper()},initRightToLeftDefaultDom:function(){this.info=$("<div class='info'><span class='title rtl'>"+this.videoList[0].title+"</span><p class='description rtl'>"+this.videoList[0].description+"</p></div>")},initLeftToRightDefaultDom:function(){this.info=$("<div class='info'><span class='title'>"+this.videoList[0].title+"</span><p class='description'>"+this.videoList[0].description+"</p></div>")},initSwiper:function(){if(this.videoList&&!(1>=this.videoList.length)){this.videoListTitle=$("<sapn class='title'>"+getLanguage("frmVideoListTitle","Video list")+"</span>");this.videoSwiper=$("<div class='videoSwiper stage'></div>");var t=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");var i=$("<div class='progressBar'></div>");this.refreshSwiper(t,this.videoList);this.videoSwiper.append(t);this.videoSwiper.append(this.progress);this.progress.append(i)}},refreshSwiper:function(t,i){for(var e=i.length,o=0;o<e;o++)this.addItem(t,i[o])},addItem:function(t,i){if(t&&i){var e=function(){this.playVideo(i)}.bind(this),e=new VideoGalleryItem(i,e);t.append(e.getDom())}},playVideo:function(t){var i,e=getProtocal();"youtube"===t.type&&(i=e+"www.youtube.com/embed/"+t.id+"?autoplay=1&wmode=transparent");"vimeo"===t.type&&(i=e+"player.vimeo.com/video/"+t.id+"?autoplay=1&wmode=transparent&portrait=0");this.video.attr("src",i);i=this.info.find(".description");this.info.find(".title").html(t.title);i.html(t.description)},initEvent:function(t){this.videoSwiper&&this.videoSwiper.scroll({},Direction.top,"win10")},pickElements:function(t){t.videoList=this.videoList;t.content=this.content;t.video=this.video;t.info=this.info;t.videoListTitle=this.videoListTitle;t.videoSwiper=this.videoSwiper;t.progress=this.progress},changeLanguage:function(){this.videoListTitle&&this.videoListTitle.html(getLanguage("frmVideoListTitle","Video list"))}}).extend(FormElements),VideoGalleryItem=Class({create:function(t,i){t&&(this.parm=t,this.callback=i,this.initDom(),this.initEvent())},initDom:function(){this.item=$("<div class='item'></div>");this.image=$("<div class='thumbnail'></div>");this.parm.thumbnail&&this.image.css({"background-image":"url("+this.parm.thumbnail+")"});this.parm.title&&(this.title=rightToLeft?$("<div class='title rtl'>"+this.parm.title+"</div>"):$("<div class='title'>"+this.parm.title+"</div>"));this.parm.description&&(this.description=rightToLeft?$("<div class='description rtl'>"+this.handleData(this.parm.description)+"</div>"):$("<div class='description'>"+this.handleData(this.parm.description)+"</div>"));this.item.append(this.image);this.title&&this.item.append(this.title);this.description&&this.item.append(this.description)},handleData:function(t){t=t.replaceAll("<","&lt");t=t.replaceAll(">","&gt");return t=handleData(t,"")},initEvent:function(){this.item.onTap(this.callback)},getDom:function(){return this.item}}),PhotoGallery=Class({create:function(t,i){!i||0>=i.length||(this.parent=t,this.photoArray=i,this.index=0,this.visible=!1,this.pageWidth=$(window).width(),this.pageHeight=$(window).height(),this.images=[],this.thumbnails=[],this.initHtml(),this.initEvent())},initHtml:function(){this.leftBtnUrl=uiBaseURL+"photo_prev.png";this.rightBtnUrl=uiBaseURL+"photo_next.png";this.closeBtnUrl=uiBaseURL+"photoGallery_close.png";this.stage=$("<div class='photogallery' style=\"display:none\"></div>");this.close=$("<div class='close'><img src=\""+this.closeBtnUrl+'" /></div>');this.stage.append(this.close);this.initImgThumb();this.initImgContainer();this.initImages();this.setThumbnal();this.setPhotoImage();this.imgChange();this.parent.append(this.stage);this.images[0].css({display:"block"})},initImgContainer:function(){this.imgContainer=$("<div class='imgContainer'></div>");this.leftBtn=$("<div class='leftBtn'><img src=' "+this.leftBtnUrl+"' /></div>");this.rightBtn=$("<div class='rightBtn'><img src='"+this.rightBtnUrl+"'/></div>");this.containerBG=$("<div class='photoBG'></div>");this.imgContainer.append(this.leftBtn);this.imgContainer.append(this.rightBtn);this.stage.append(this.imgContainer).append(this.containerBG)},initImgThumb:function(){this.thumbContainer=$("<div class='thumbContainer'></div>");this.stage.append(this.thumbContainer)},initEvent:function(){this.stage.bind("mousedown touchstart",function(t){t.stopPropagation()});1<this.photoArray.length&&(this.imgContainer.bind("mouseenter",function(){this.leftBtn.animate({left:"0"},300);this.rightBtn.animate({right:"0"},300)}.bind(this)),this.imgContainer.bind("mouseleave",function(){this.leftBtn.animate({left:"-32px"},300);this.rightBtn.animate({right:"-32px"},300)}.bind(this)));this.imgContainer.bind("click",function(t){this.moving||(t.stopPropagation(),this.stopAutoPlay(),this.index+=1,this.index>this.images.length-1&&(this.index=0),this.imgChange(),this.autoPlay())}.bind(this));this.containerBG.onTap(function(){this.hide();this.visible=!1}.bind(this));this.leftBtn.bind("click",function(t){this.moving||(t.stopPropagation(),this.stopAutoPlay(),this.index-=1,0>this.index&&(this.index=this.images.length-1),this.imgChange(),this.autoPlay())}.bind(this));this.rightBtn.bind("click",function(t){this.moving||(t.stopPropagation(),this.stopAutoPlay(),this.index+=1,this.index>this.images.length-1&&(this.index=0),this.imgChange(),this.autoPlay())}.bind(this));this.close.onTap(function(){this.hide();this.visible=!1}.bind(this));$(window).resize(function(){this.onResize()}.bind(this))},onResize:function(){this.pageWidth=$(window).width();this.pageHeight=$(window).height();this.setImageCss(this.images[this.index]);this.setThumbnal()},thumbEvent:function(t){t.onTap(function(){this.moving||(this.stopAutoPlay(),parseInt(t.attr("id").substring(5))!=this.index&&(this.index=parseInt(t.attr("id").substring(5)),this.imgChange(t)),this.autoPlay())}.bind(this,t))},autoPlay:function(){if(bookConfig.SlideshowAutoPlay){var t=bookConfig.SlideshowPlayInterval?1e3*parseInt(bookConfig.SlideshowPlayInterval):3e3;this.timer=setInterval(function(){this.index+=1;this.index>this.images.length-1&&(this.index=0);this.imgChange()}.bind(this),t)}},stopAutoPlay:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},imgChange:function(t){1>=this.photoArray.length||this.moving||(t||(t=this.thumbnails[this.index]),t.siblings().removeClass("focus"),t.addClass("focus"),this.newImg=this.images[this.index],this.setImageCss(this.images[this.index]),this.moving=!0,this.newImg.fadeIn(300,function(){this.oldImg&&this.oldImg.fadeOut();this.oldImg=this.newImg;this.moving=!1}.bind(this)))},initImages:function(){for(var t=0;t<this.photoArray.length;t++){var i=$("<img src='"+this.photoArray[t]+"'/>"),e=$('<div id="thumb'+t+'" class="thumbBox"><img src=\''+this.photoArray[t]+'\'/><div class="thumbBG"></div></div>');this.images.push(i);this.thumbnails.push(e)}},setThumbnal:function(){this.thumbLeft=0;this.thumbLeft=65*this.thumbnails.length>this.pageWidth?this.thumbLeft:(this.pageWidth-65*this.thumbnails.length)/2;for(var t=0;t<this.thumbnails.length;t++){var i=this.thumbnails[t],e=i.find("img");this.thumbEvent(i);this.setThumbImg(e,i);i.css({left:this.thumbLeft+"px"});this.thumbContainer.append(i);this.thumbLeft+=65}},setThumbImg:function(t,i){t.on("load",function(t,i){var e=0,o=0,s=e=0,n=0;t[0].naturalWidth/t[0].naturalHeight>=50/46?(e=50/t[0].naturalWidth,s=50,n=e*t[0].naturalHeight,o=(46-e*t[0].naturalHeight)/2,e=0):(e=46/t[0].naturalHeight,s=e*t[0].naturalWidth,n=46,o=0,e=(50-e*t[0].naturalWidth)/2);t.css({width:s+"px",height:n+"px",left:e+"px",top:o+"px"});i.append(t)}.bind(this,t,i))},setPhotoImage:function(){var t=this.images[this.index];t.on("load",function(t,i){for(var e=0;e<t.images.length;e++)t.images[t.index]!=t.images[e]&&t.images[e].css({display:"none"});return function(){t.setImageCss(i)}}(this,t))},setImageCss:function(t){this.imgTop=this.imgLeft=0;this.imgRadio=t[0].naturalWidth/t[0].naturalHeight;this.windowRadio=this.pageWidth/(this.pageHeight-80);this.imgHeight=this.imgWidth=this.radio=0;this.resetImageCss(t);t.css({width:this.imgWidth+"px",height:this.imgHeight+"px",left:0,top:0});this.imgContainer.css({width:this.imgWidth+"px",height:this.imgHeight+"px",left:this.imgLeft,top:this.imgTop+"px"});this.leftBtn.css({top:(this.imgHeight-38)/2+"px"});this.rightBtn.css({top:(this.imgHeight-38)/2+"px"});this.imgContainer.append(t)},resetImageCss:function(t){this.imgRadio>this.windowRadio?(t[0].naturalWidth<this.pageWidth?(this.imgHeight=t[0].naturalHeight,this.imgWidth=t[0].naturalWidth,this.imgLeft=(this.pageWidth-this.imgWidth-16)/2):(this.imgWidth=this.pageWidth-16,this.radio=this.pageWidth/t[0].naturalWidth,this.imgHeight=t[0].naturalHeight*this.radio,this.imgLeft=0),this.imgTop=(this.pageHeight-this.imgHeight-80)/2):t[0].naturalHeight<this.pageHeight-80?(this.imgWidth=t[0].naturalWidth,this.imgHeight=t[0].naturalHeight,this.imgLeft=(this.pageWidth-this.imgWidth-16)/2,this.imgTop=(this.pageHeight-this.imgHeight-80)/2):(this.imgHeight=this.pageHeight-80,this.radio=this.imgHeight/t[0].naturalHeight,this.imgWidth=t[0].naturalWidth*this.radio,this.imgLeft=(this.pageWidth-this.imgWidth-16)/2,this.imgTop=0)},show:function(){this.visible=!0;this.stage.fadeIn(200);this.autoPlay()},hide:function(){this.visible=!1;this.stage.fadeOut(200);this.interval&&this.interval.stop();this.stopAutoPlay()},showOrHide:function(){this.visible?this.hide():this.show()}}),AddImageFile=Class({create:function(t){this.container=t;this.addContexts={};this.address=uiBaseURL;this.currentObject=$("<div><div/>").attr("data-key","114");this.imageDatas={};this.fileName=window.location.href.replace(window.location.hash,"")+"LocalFile";this.fileCookies=[];this.createZoomFrame();this.toolBar=this.createToolBar(t);this.getCookieFile()},createToolBar:function(t){var i=this,e=$("<div class='flipHTML5LocalFile-toolBar' style='position: absolute;width: 60px;height: 32px;background-color: rgba(0, 0, 0, 0.8);border-radius: 4px;z-index: 9999;'></div>").appendTo(t).hide();t=$("<div class='flipHTML5LocalFile-toolBar-del'></div>").css({left:4}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_del.png")).appendTo(e);var o=$("<div class='flipHTML5LocalFile-toolBar-update'></div>").css({left:32}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"ImgFile_update.png")).appendTo(e);t.on("click touchend",function(t){i.currentObject&&(i.currentObject.remove(),e.hide(),i.zoomFrame&&i.zoomFrame.hide(),t=i.currentObject.attr("data-key"),delete i.imageDatas[t],i.delArrayOrderKey(i.fileCookies,t),i.addLocalStorage(i.fileName,i.parseJSON(i.fileCookies)))});o.on(_event._down,function(){i.currentObject&&i.currentObject.find(".TextFile")&&i.currentObject.find(".TextFile")[0].click()});e.on("mousedown touchstart",function(t){t.preventDefault();t.stopPropagation();return!1});this.container.add($(document)).add(BookInfo.container()).on("mousedown.hideToolBar touchstart.hideToolBar",function(){e.hide()});return e},createZoomFrame:function(){var t=$("<div class='flipHTML5ZoomFrame' style='position: absolute;'></div>"),i=[];this.zoomFrame=t;for(var e=0;9>e;e++){var o=$("<div></div>").addClass("flipHTML5Point flipHTML5ZoomPoint"+e).appendTo(t);i.push(o)}this.westZoom(i[7]);this.northZoom(i[1]);this.southZoom(i[5]);this.eastZoom(i[3]);this.westZoom(i[0]).northZoom(i[0]);this.northZoom(i[2]).eastZoom(i[2]);this.westZoom(i[6]).southZoom(i[6]);this.southZoom(i[4]).eastZoom(i[4]);this.container.add($(document)).add(BookInfo.container()).on("mousedown.hideToolBar touchstart.hideToolBar",function(){t.hide()})},getCookieFile:function(){try{var b=this.getLocalStorage(this.fileName),c=eval(b)}catch(d){}if(c)for(b=0;b<c.length;b++){var f=c[b];this.fileCookies.push({key:f.key,page:f.page,fileLeft:f.fL,fileTop:f.fT,fileWidth:f.fW,fileHeight:f.fH,imgWidth:f.iW,imgHeight:f.iH,src:f.src});this.imageDatas[f.key]={width:f.iW,height:f.iH}}},addFile:function(t,i){var e=t.src,o=t.imgWidth,s=t.imgHeight,n=t.key,h=$("<div class='flipHTML5AddFile' style='position: absolute;cursor: move;'></div>").css({width:t.fileWidth,height:t.fileHeight,left:t.fileLeft,top:t.fileTop}).attr("data-key",n).append($("<input type='file' class='TextFile' style='position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;cursor: move;z-index: 2;'/>").css({opacity:0})).appendTo(i);this.bindFileDivEvents(h,i);o&&s&&e&&this.addImage(h,e,o,s,n)},addCreateEvents:function(){var t=0,i,e=this.contextArray;if(e)for(this.offCreateEvents();i=e.eq(t++),0<i.length;)this.bindCreateFileEvent(i,parseInt(i.attr("data-page")))},offCreateEvents:function(){this.contextArray&&(this.contextArray.css({cursor:""}),this.contextArray.off("mousedown.addLocalFile touchstart.addLocalFile"))},bindCreateFileEvent:function(p,u){var f=this;p.css("cursor","crosshair");p.off("mousedown.addLocalFile touchstart.addLocalFile").one("mousedown.addLocalFile touchstart.addLocalFile",function(t){t.stopPropagation();t.preventDefault();var e=(new Date).getTime(),o,i,s,n,h,a,r,l,g,d=p.offset().left,c=p.offset().top;$(".flipHTML5LocalFile-current").removeClass("flipHTML5LocalFile-current");o=$("<div style='position: absolute;cursor: move;'></div>").attr("data-key",e).addClass("flipHTML5AddFile flipHTML5LocalFile-current").append($("<input type='file' class='TextFile' style='position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;cursor: move;z-index: 2;'/>").css({opacity:0})).appendTo(p);i=n=t.pageX||t.originalEvent.touches[0].pageX;s=h=t.pageY||t.originalEvent.touches[0].pageY;f.bindFileDivEvents(o,p);$(document).add(p).off("mousemove.addLocalFile touchmove.addLocalFile").on("mousemove.addLocalFile touchmove.addLocalFile",function(t){n=t.pageX?t.pageX:t.originalEvent.touches?t.originalEvent.touches[0].pageX:0;h=t.pageY?t.pageY:t.originalEvent.touches?t.originalEvent.touches[0].pageY:0;n&&(0>n-i?(a=Math.floor((n-d)/BookInfo.scale()),l=Math.floor((i-n)/BookInfo.scale())):(a=Math.floor((i-d)/BookInfo.scale()),l=Math.floor((n-i)/BookInfo.scale())));h&&(0>t.pageY-s?(r=Math.floor((h-c)/BookInfo.scale()),g=Math.floor((s-h)/BookInfo.scale())):(r=Math.floor((s-c)/BookInfo.scale()),g=Math.floor((h-s)/BookInfo.scale())));o.css({left:a,top:r,width:l,height:g});f.resizeZoomFrame(o)});$(document).add(p).off("mouseup.addLocalFile touchend.addLocalFile").one("mouseup.addLocalFile touchend.addLocalFile",function(t){f.offCreateEvents();$(document).add(p).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(p).off("mouseup.addLocalFile touchend.addLocalFile");if(o){t=o.width();var i=o.height();32>t&&o.width(32);12>i&&o.height(12);o.find(".TextFile")[0].click();f.resizeZoomFrame(o);t=f.parseObject(o[0]);f.parseObject(f.zoomFrame[0]);f.fileCookies.push({key:e,page:u,fileLeft:t.left,fileTop:t.top,fileWidth:t.width,fileHeight:t.height,imgWidth:null,imgHeight:null,src:null});f.addLocalStorage(f.fileName,f.parseJSON(f.fileCookies))}void 0!=f.onCreated&&f.onCreated[1].call(f.onCreated[0])})})},addImage:function(t,i,e,o,s){t.find(".LocalImage")&&t.find(".LocalImage").remove();var n=t.width()||40,h=t.height()||40;e=this.resizeImage("autoFit",e,o,n,h);$("<img class='LocalImage' style='position: absolute;z-index: 2;'/>").attr("data-key",s).css({width:e.width,height:e.height,left:e.left,top:e.top}).attr("src",i).appendTo(t)},resizeImage:function(t,i,e,o,s){i/=e;e=0===s?1:o/s;var n=s*i,h=o/i,a;switch(t){case"autoFit":a=n>o?{width:o,height:h,top:(s-h)/2,left:0}:h>s?{width:n,height:s,left:(o-n)/2,top:0}:n/h==i?{width:n,height:h,left:0,top:0}:{width:1,height:1,left:0,top:0};break;case"scale":a={left:0,top:0,width:o,height:s};break;case"fullFill":i>e?a={left:(o-s*i)/2,top:0,width:s*i,height:s}:i<e?a={left:0,top:(s-o/i)/2,width:o,height:o/i}:i==e&&(a={left:0,top:0,width:o,height:s})}return a},bindFileDivEvents:function(a,r){var l=this,g=!1,d=a.attr("data-key");a.on("pointerdown.signatureImg",function(t){t.stopPropagation()});a.off("mousedown.addLocalFile touchstart.addLocalFile").on("mousedown.addLocalFile touchstart.addLocalFile",function(t){t.preventDefault();t.stopPropagation();t=t.originalEvent.touches?t.originalEvent.touches[0]:t;var i,e,o,s,n,h;o=a[0].offsetLeft;s=a[0].offsetTop;i=t.pageX;e=t.pageY;l.resizeZoomFrame(a);r.off("mousemove.addLocalFile touchmove.addLocalFile").on("mousemove.addLocalFile touchmove.addLocalFile",function(t){t=t.originalEvent.touches?t.originalEvent.touches[0]:t;if(3<=Math.abs(t.pageX-i)||3<=Math.abs(t.pageY-e))g=!0;n=o-(i-t.pageX)/BookInfo.scale();h=s-(e-t.pageY)/BookInfo.scale();a.css({left:n,top:h});l.moveFileDiv(n,h)});$(document).add(r).off("mouseup.addLocalFile touchend.addLocalFile").one("mouseup.addLocalFile touchend.addLocalFile",function(){r.off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(r).off("mouseup.addLocalFile touchend.addLocalFile");setTimeout(function(){g=!1},200);var t=l.parseObject(a[0]);l.parseObject(l.zoomFrame[0]);l.updateArrayOrderKey(l.fileCookies,d,{fileLeft:t.left,fileTop:t.top});l.addLocalStorage(l.fileName,l.parseJSON(l.fileCookies))})});a.find(".TextFile").on({change:function(t){try{var i=t.target.files[0];if(i)if(i.type.match("image.*")){var e=new FileReader;e.onload=function(t){t=t.target.result;var i=new Image;i.src=t;var e=i.width,i=i.height;l.imageDatas[d]={width:e,height:i,src:t};l.addImage(a,t,e,i,d);l.updateArrayOrderKey(l.fileCookies,d,{imgWidth:e,imgHeight:i,src:t});l.addLocalStorage(l.fileName,l.parseJSON(l.fileCookies))};e.readAsDataURL(i)}else alert("not image!")}catch(t){alert("Does not support HTML5 FileReader!")}},click:function(t){g&&t.preventDefault()}})},moveFileDiv:function(t,i){var e=this.zoomFrame;e&&(e.css({left:t-4-1,top:i-4-1}),this.toolBar&&this.toolBar.css({left:e.offset().left-this.container.offset().left+3,top:e.offset().top-this.container.offset().top-this.toolBar.outerHeight()-2}))},resizeZoomFrame:function(t){var i=this.zoomFrame;i.css({width:t.width()+8,height:t.height()+8,left:parseInt(t.css("left"))-4-1,top:parseInt(t.css("top"))-4-1}).show();this.toolBar&&this.toolBar.css({left:t.offset().left-8-this.container.offset().left+3,top:t.offset().top-8-this.container.offset().top-this.toolBar.outerHeight()-2}).show();t.before(i);$(".flipHTML5LocalFile-current").removeClass("flipHTML5LocalFile-current");this.currentObject=t.addClass("flipHTML5LocalFile-current")},resizeFileDiv:function(t,i,e,o){var s=this.currentObject,n=this.zoomFrame,h=s.attr("data-key");this.toolBar&&this.toolBar&&this.toolBar.css({left:n.offset().left-this.container.offset().left+3,top:n.offset().top-this.container.offset().top-this.toolBar.outerHeight()-2});if(s){t&&(n.css({left:t}),s.css({left:t+4+1}));i&&(n.css({top:i}),s.css({top:i+4+1}));e&&40<=e&&(n.css({width:e}),s.css({width:e-8}));o&&20<=o&&(n.css({height:o}),s.css({height:o-8}));try{var a=s.find(".LocalImage"),r=this.imageDatas[h],l=this.resizeImage("autoFit",r.width,r.height,s.width(),s.height());a.css({width:l.width,height:l.height,left:l.left,top:l.top})}catch(t){}l=this.parseObject(s[0]);this.parseObject(n[0]);this.updateArrayOrderKey(this.fileCookies,h,{fileLeft:l.left,fileTop:l.top,fileWidth:l.width,fileHeight:l.height})}},eastZoom:function(t){var s=this,n=t.parent();t.on("mousedown.addLocalFile touchstart.addLocalFile",function(t){t.preventDefault();t.stopPropagation();t=t.originalEvent.touches?t.originalEvent.touches[0]:t;var i=n.parent(),e=n.width(),o=t.pageX;$(document).add(i).on("mousemove.addLocalFile touchmove.addLocalFile",function(t){t=t.originalEvent.touches?t.originalEvent.touches[0]:t;var i=t.clientX-o+e,i=Math.floor(e-(o-t.pageX)/BookInfo.scale());s.resizeFileDiv(0,0,i,0)});$(document).add(i).on("mouseup.addLocalFile touchend.addLocalFile",function(){s.addLocalStorage(s.fileName,s.parseJSON(s.fileCookies));$(document).add(i).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(i).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},southZoom:function(t){var s=this,n=t.parent();t.on("mousedown.addLocalFile touchstart.addLocalFile",function(t){t.preventDefault();t.stopPropagation();t=t.originalEvent.touches?t.originalEvent.touches[0]:t;var i=n.parent(),e=n.height(),o=t.pageY;$(document).add(i).on("mousemove.addLocalFile touchmove.addLocalFile",function(t){t=t.originalEvent.touches?t.originalEvent.touches[0]:t;var i=t.clientY-o+e,i=Math.floor(e-(o-t.pageY)/BookInfo.scale());s.resizeFileDiv(0,0,0,i)});$(document).add(i).on("mouseup.addLocalFile touchend.addLocalFile",function(){s.addLocalStorage(s.fileName,s.parseJSON(s.fileCookies));$(document).add(i).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(i).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},westZoom:function(t){var a=this,e=t.parent();t.on("mousedown.addLocalFile touchstart.addLocalFile",function(t){t.preventDefault();t.stopPropagation();t=t.originalEvent.touches?t.originalEvent.touches[0]:t;var i=e.parent(),s=e.width(),n=e[0].offsetLeft,h=t.clientX;$(document).add(i).on("mousemove.addLocalFile touchmove.addLocalFile",function(t){t=t.originalEvent.touches?t.originalEvent.touches[0]:t;var i=t.pageX,e=n+i-h,o=-(i-h)+s,e=n+(i-h)/BookInfo.scale(),o=Math.floor(s+(h-t.pageX)/BookInfo.scale());a.resizeFileDiv(e,0,o,0)});$(document).add(i).on("mouseup.addLocalFile touchend.addLocalFile",function(){a.addLocalStorage(a.fileName,a.parseJSON(a.fileCookies));$(document).add(i).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(i).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},northZoom:function(t){var h=this,e=t.parent();t.on("mousedown.addLocalFile touchstart.addLocalFile",function(t){t.preventDefault();t.stopPropagation();t=t.originalEvent.touches?t.originalEvent.touches[0]:t;var i=e.parent(),o=e.height(),s=e[0].offsetTop,n=t.pageY;$(document).add(i).on("mousemove.addLocalFile touchmove.addLocalFile",function(t){t=t.originalEvent.touches?t.originalEvent.touches[0]:t;t=t.pageY;var i=s+t-n,e=-(t-n)+o,i=s+(t-n)/BookInfo.scale(),e=Math.floor(o+(n-t)/BookInfo.scale());h.resizeFileDiv(0,i,0,e)});$(document).add(i).on("mouseup.addLocalFile touchend.addLocalFile",function(){h.addLocalStorage(h.fileName,h.parseJSON(h.fileCookies));$(document).add(i).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(i).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},bindOnCreated:function(t,i){this.onCreated=[t,i]},parseObject:function(t){if(document.getElementsByTagName("body")[0].contains(t)){var i,e,o;o=t.parentNode;var s=t.style,n=$(t);e=100/o.offsetHeight;i=100/o.offsetWidth;o=t.offsetLeft*i+"%";t=t.offsetTop*e+"%";i=n.width()*i+"%";e=n.height()*e+"%";s.width=i;s.height=e;s.left=o;s.top=t;return{width:i,height:e,left:o,top:t}}},addLocalFileByPage:function(t,i){i.find(".flipHTML5AddFile").remove();this.toolBar&&this.toolBar.hide();this.zoomFrame&&this.zoomFrame.hide();i.attr("data-page",t);this.contextArray=this.contextArray?this.contextArray.add(i):i;this.zoomFrame&&this.zoomFrame.remove();this.createZoomFrame();for(var e=0;e<this.fileCookies.length;e++)this.fileCookies[e].page==t&&this.addFile(this.fileCookies[e],i)},setContainers:function(t,i,e){void 0==this.addContexts[t]&&(this.addContexts[t]={});this.addContexts[t][i]=e;t==BookInfo.getBookType()&&this.addLocalFileByPage(i,this.addContexts[BookInfo.getBookType()][i])},getLocalStorage:function(t){try{if(window.localStorage)return window.localStorage.getItem(t);for(var i=document.cookie.split("; "),e=0;e<i.length;e++){var o=i[e].split("=");if(o[0]==t)return unescape(o[1])}return""}catch(t){}},addLocalStorage:function(t,i){try{if(window.localStorage)window.localStorage.setItem(t,i);else{var e=t+"="+escape(i),o=new Date;o.setTime(o.getTime()+864e8);e+="; expires="+o.toGMTString();document.cookie=e}}catch(t){}},delArrayOrderKey:function(t,i){if(t)for(var e=0;e<t.length;e++)t[e].key&&t[e].key==i&&t.remove(e)},updateArrayOrderKey:function(t,i,e){if(t)for(var o=0;o<t.length;o++)t[o].key&&t[o].key==i&&$.extend(t[o],e)},parseJSON:function(t){if(0!=t.length){for(var i="[",e=0;e<t.length;e++)i+="{key:'"+t[e].key+"',page:"+t[e].page+",src:'"+t[e].src+"',iW:"+t[e].imgWidth+",iH:"+t[e].imgHeight+",fW:'"+t[e].fileWidth+"',fH:'"+t[e].fileHeight+"',fL:'"+t[e].fileLeft+"',fT:'"+t[e].fileTop+"'},";i=i.substring(0,i.length-1);return i+"]"}}}),HandSwipeHelp=Class({create:function(t){this.parent=t;this.container=$("<div class='handHelp' style='display:none'></div>");this.helpHand=$("<div ></div>");this.handImg=$("<img />");this.setSrc(this.handImg,phone_toolbar_icons,"phoneHandSwipe");this.helpHand.append(this.handImg);this.container.append(this.helpHand);t.append(this.container);this.setCSS();this.initEvent();this.container.speed(this.onSwipe.bind(this))},setCSS:function(){this.container.css({position:"absolute","z-index":"10000",width:"100%",height:"100%",background:"rgba(11,11,11,0.5)"});this.helpHand.css({position:"absolute",width:"137px",height:"150px",right:(windowWidth-137)/2+"px",top:(windowHeight-150)/2+"px"});this.handImg.css({position:"absolute"})},onSwipe:function(t,i){var e=30;bookConfig.FlipDirection?(e=e*windowHeight/1600,Math.abs(i)<=e||i>e&&nextPageFun()):(e=e*windowWidth/1600,Math.abs(t)<=e||(t<-e?nextPageFun():t>e&&rightToLeft&&nextPageFun()))},setSrc:function(t,i,e){i&&i[e]?t.attr("src","data:image/png;base64,"+i[e]):t.attr("src",phoneBaseURL+e+".png")},initEvent:function(){(this.close,this.parent).bind(_event._up,function(){this.hide()}.bind(this))},onResize:function(t,i){this.setCSS()},show:function(){this.container.css("display","block");parseBool(bookConfig.FlipDirection)?this.helpHand.addClass("handSwipeHelp_Top"):rightToLeft?this.helpHand.addClass("handSwipeHelp_Right"):this.helpHand.addClass("handSwipeHelp_Left")},hide:function(){this.helpHand.attr("class","");this.container.fadeOut(300)}}),AppLargeLogo=Class({create:function(t){this.parent=t;this.initHtml();this.initCss();this.initEvent()},initHtml:function(){this.logoContainer=$("<div></div>");this.largeLogo=$("<img src='"+bookConfig.appLargeLogoIcon+"'/>");bookConfig.appLargeLogoIcon||this.logoContainer.css({display:"none"});this.logoContainer.append(this.largeLogo);this.parent.append(this.logoContainer)},initCss:function(){this.logoContainer.css({position:"absolute","z-index":"1"});bookConfig.appLargeLogoURL&&this.largeLogo.css({cursor:"pointer"});bookConfig.LargeLogoPosition||(bookConfig.LargeLogoPosition="top-left");switch(bookConfig.LargeLogoPosition){case"top-left":this.logoContainer.css({left:toolBar.getLeftWidth()+10+"px",top:toolBar.getTopHeight()+10+"px"});break;case"bottom-left":this.logoContainer.css({left:toolBar.getLeftWidth()+10+"px",bottom:toolBar.getBottomHeight()+10+"px"});break;case"top-right":this.logoContainer.css({right:toolBar.getRightWidth()+10+"px",top:toolBar.getTopHeight()+10+"px"});break;case"bottom-right":this.logoContainer.css({bottom:toolBar.getBottomHeight()+10+"px",right:toolBar.getRightWidth()+10+"px"})}bookConfig.isFixLogoSize&&(this.logoContainer.css({width:bookConfig.logoFixWidth+"px",height:bookConfig.logoFixHeight+"px"}),this.largeLogo.css({width:bookConfig.logoFixWidth+"px",height:bookConfig.logoFixHeight+"px"}))},onResize:function(t,i){},initEvent:function(){bookConfig.appLargeLogoURL&&this.largeLogo.bind(_event._click,function(t){t.stopPropagation();bookConfig.LargeLogoTarget||(bookConfig.LargeLogoTarget="blank");window.open(bookConfig.appLargeLogoURL,"_"+bookConfig.LargeLogoTarget.toLowerCase())}.bind(this))}});Class("VolumeControlBar",{statics:{LEFT:1,TOP:2,RIGHT:3,BOTTOM:4,DEFAULT:5},create:function(t){global.bgSound&&!isPhone()&&!isPad()&&t&&(this.parent=t,this.initParam(),this.volumeBackground=$("<div class='volume-bar' style='visibility:hidden;z-index:1000'></div>"),this.volumeReduce=$("<img class='volume-reduce'  />"),this.volumeBar=$('<div class="volume-pgress"></div>'),this.volumeBg=$('<div class="volume-pgress-bg"></div>'),this.volumePoint=$("<span></span>"),this.volumeAdd=$("<img class='volume-add' />"),this.parent.append(this.volumeBackground),this.volumeBackground.append(this.volumeReduce),this.volumeBar.append(this.volumePoint),this.volumeBg.append(this.volumeBar),this.volumeBackground.append(this.volumeBg),this.volumeBackground.append(this.volumeAdd),this.initEvent(),this.onResize(),this.initCss(),this.hide())},initParam:function(){this.length=58;this.rate=1;this.iconOn=this.visible=!0;this.initConfig()},initConfig:function(){VolumeControlBar.config||(VolumeControlBar.config={direction:VolumeControlBar.DEFAULT,color:Color(bookConfig.toolbarColor).toString(),iconColor:Color(bookConfig.iconColor).toString()});this.deviation=VolumeControlBar.config.deviation||0;this.direction=VolumeControlBar.config.direction||VolumeControlBar.DEFAULT;this.color=VolumeControlBar.config.color||Color(bookConfig.toolbarColor).toString();this.iconColor=VolumeControlBar.config.iconColor||Color(bookConfig.iconColor).toString()},initCss:function(){this.setSrc(this.volumeAdd,"soundAdd");this.setSrc(this.volumeReduce,"soundReduce");this.volumePoint.css({background:this.iconColor});this.volumeBar.css({cursor:"pointer"});this.volumeBg.css({cursor:"pointer"})},setSrc:function(t,i){toolbar_icons&&toolbar_icons[i]?t.attr("src","data:image/png;base64,"+toolbar_icons[i]):t.attr("src",uiBaseURL+i+".png");this.changeIconColor()},changeIconColor:function(){this.volumeAdd.changeButtonColor(this.iconColor);this.volumeReduce.changeButtonColor(this.iconColor)},volumeBarCSS:function(t){this.left=t.left;this.top=t.top;switch(this.direction){case VolumeControlBar.LEFT:this.position=this.length-this.rate*this.length;this.top+=(t.height-30)/2+this.deviation;this.volumeBackground.css({top:this.top+"px",left:this.left-131+"px",width:"131px",height:"30px",background:this.color});this.volumeBg.css({position:"absolute",width:"70px",height:"10px",left:"30px",right:"auto",top:"10px",bottom:"auto"});this.volumeBar.css({width:"70px",height:"auto",border:"none","border-top":"2px solid "+this.iconColor,top:"4px"});this.volumePoint.css({top:"-7px",left:this.position+"px"});this.volumeReduce.css({right:"0",top:"3px",left:"auto",bottom:"auto"});this.volumeAdd.css({left:"0",top:"3px",right:"auto",bottom:"auto"});break;case VolumeControlBar.TOP:this.position=this.length-this.rate*this.length;this.left+=(t.width-30)/2+this.deviation;this.volumeBackground.css({left:this.left+"px",top:this.top-131+"px",width:"30px",height:"131px",background:this.color});this.volumeBg.css({position:"absolute",height:"70px",width:"10px",bottom:"30px",top:"auto",left:"10px",right:"auto"});this.volumeBar.css({height:"70px",width:"auto",top:"auto",border:"none","border-left":"2px solid "+this.iconColor,left:"4px"});this.volumePoint.css({left:"-7px",top:this.position+"px"}).css("");this.volumeReduce.css({left:"3px",bottom:"3px",right:"auto",top:"auto"});this.volumeAdd.css({right:"3px",top:"3px",left:"auto",bottom:"auto"});break;case VolumeControlBar.RIGHT:this.position=this.rate*this.length;this.top+=(t.height-30)/2+this.deviation;this.volumeBackground.css({top:this.top+"px",left:this.left+t.width+"px",width:"131px",height:"30px",background:this.color});this.volumeBg.css({position:"absolute",width:"70px",height:"10px",left:"30px",right:"auto",top:"10px",bottom:"auto"});this.volumeBar.css({width:"70px",height:"auto",border:"none","border-top":"2px solid "+this.iconColor,top:"4px"});this.volumePoint.css({left:this.position+"px",top:"-7px"});this.volumeReduce.css({left:"0",top:"3px",right:"auto",bottom:"auto"});this.volumeAdd.css({right:"0",top:"3px",left:"auto",bottom:"auto"});break;case VolumeControlBar.BOTTOM:this.position=this.rate*this.length;this.left+=(t.width-30)/2+this.deviation;this.volumeBackground.css({left:this.left+"px",top:this.top+t.height+"px",width:"30px",height:"131px",background:this.color});this.volumeBg.css({position:"absolute",height:"70px",width:"10px",bottom:"30px",top:"auto",left:"10px",right:"auto"});this.volumeBar.css({height:"70px",width:"auto",border:"none","border-left":"2px solid "+this.iconColor,left:"4px"});this.volumePoint.css({left:"-7px",top:this.position+"px"});this.volumeReduce.css({left:"3px",top:"3px",right:"auto",bottom:"auto"});this.volumeAdd.css({right:"3px",bottom:"3px",left:"auto",top:"auto"});break;case VolumeControlBar.DEFAULT:this.volumeBackground.css({visibility:"hidden",opacity:"0"})}},setPosition:function(){this.change=this.startPosition=this.position=0;switch(this.direction){case VolumeControlBar.LEFT:this.leftPosition();break;case VolumeControlBar.TOP:this.topPosition();break;case VolumeControlBar.RIGHT:this.rightPosition();break;case VolumeControlBar.BOTTOM:this.bottomPosition()}},onResize:function(){$(window).resize(function(){this.hide();this.direction=VolumeControlBar.config.direction||VolumeControlBar.DEFAULT;this.setPosition()}.bind(this))},initEvent:function(){this.parent.bind("click",function(t){t.stopPropagation();this.hide()}.bind(this));this.volumeBackground.bind("click",function(t){t.stopPropagation()}.bind(this));this.volumeBackground.bind("mouseenter",function(t){this.visible=!0;this.volumeBackground.css({visibility:"visbile",opacity:"1"})}.bind(this));this.volumeBackground.bind("mouseleave",function(t){this.visible=!1;this.hide()}.bind(this));this.volumePoint.bind("click",function(t){t.stopPropagation()}.bind(this));this.volumeBg.bind("click",function(t){t.stopPropagation();this.direction==VolumeControlBar.RIGHT||this.direction==VolumeControlBar.LEFT?this.getRate(t.offsetX):this.getRate(t.offsetY);this.position=this.length-this.rate*this.length;this.volumePointCSS();this.setIcon();this.setVolume(this.rate)}.bind(this))},getRate:function(t){this.rate=0>=this.length+12-t?0:58<=this.length+12-t?1:(this.length+12-t)/this.length},setEvent:function(){1==this.direction||3==this.direction?(this.volumePoint.bind("mousedown",function(t){t.stopPropagation();this.position=this.volumePoint.left();this.startPosition=t.pageX;this.focus=!0}.bind(this)),$("body").bind("mouseup",function(t){t.stopPropagation();this.focus=!1}.bind(this))):(this.volumePoint.bind("mousedown",function(t){t.stopPropagation();this.position=this.volumePoint.top();this.startPosition=t.pageY;this.focus=!0}.bind(this)),$("body").bind("mouseup",function(t){t.stopPropagation();this.focus=!1}.bind(this)))},rightPosition:function(){this.setEvent();$("body").bind("mousemove",function(t){this.focus&&(this.startPosition&&(this.change=this.startPosition-t.pageX),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=this.position/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=t.pageX}.bind(this));this.volumeAdd.unbind("click").bind("click",function(){this.position=this.volumePoint.left()+5.8>this.length?this.length:this.volumePoint.left()+5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").bind("click",function(){this.position=0>this.volumePoint.left()-5.8?0:this.volumePoint.left()-5.8;this.setIcon();this.volumePointCSS()}.bind(this))},leftPosition:function(){this.setEvent();$("body").bind("mousemove",function(t){this.focus&&(this.startPosition&&(this.change=this.startPosition-t.pageX),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=(this.length-this.position)/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=t.pageX}.bind(this));this.volumeAdd.unbind("click").bind("click",function(){this.position=0>this.volumePoint.left()-5.8?0:this.volumePoint.left()-5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").bind("click",function(){this.position=this.volumePoint.left()+5.8>this.length?this.length:this.volumePoint.left()+5.8;this.setIcon();this.volumePointCSS()}.bind(this))},topPosition:function(){this.setEvent();$("body").bind("mousemove",function(t){this.focus&&(this.startPosition&&(this.change=this.startPosition-t.pageY),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=(this.length-this.position)/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=t.pageY}.bind(this));this.volumeAdd.unbind("click").bind("click",function(t){this.position=0>this.volumePoint.top()-5.8?0:this.volumePoint.top()-5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").unbind("click").bind("click",function(t){this.position=this.volumePoint.top()+5.8>this.length?this.length:this.volumePoint.top()+5.8;this.setIcon();this.volumePointCSS()}.bind(this))},bottomPosition:function(){this.setEvent();$("body").bind("mousemove",function(t){this.focus&&(this.startPosition&&(this.change=this.startPosition-t.pageY),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=this.position/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=t.pageY}.bind(this));this.volumeAdd.unbind("click").bind("click",function(){this.position=this.volumePoint.top()+5.8>this.length?this.length:this.volumePoint.top()+5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").bind("click",function(){this.position=0>this.volumePoint.top()-5.8?0:this.volumePoint.top()-5.8;this.setIcon();this.volumePointCSS()}.bind(this))},setIcon:function(){this.direction==VolumeControlBar.LEFT||this.direction==VolumeControlBar.TOP?this.position>=this.length?this.setIconOff():this.setIconOn():0>=this.position?this.setIconOff():this.setIconOn()},setIconOff:function(){this.iconOn=!1},setIconOn:function(){this.iconOn=!0},volumePointCSS:function(t){switch(this.direction){case VolumeControlBar.LEFT:this.volumePoint.css({left:this.position+"px"});this.setVolume((this.length-this.position)/this.length);break;case VolumeControlBar.TOP:this.volumePoint.css({top:this.position+"px"});this.setVolume((this.length-this.position)/this.length);break;case VolumeControlBar.RIGHT:this.volumePoint.css({left:this.position+"px"});this.setVolume(this.position/this.length);break;case VolumeControlBar.BOTTOM:this.volumePoint.css({top:this.position+"px"}),this.setVolume(this.position/this.length)}},soundOn:function(t){this.setIconOn();this.setVolume(this.rate)},soundOff:function(t){this.setIconOff();global.bgSound.setVolume(0)},setVolume:function(t){!global.bgSound||isPhone()||isPad()||(this.rate=t,bgSound.setVolume(t))},show:function(t){isPhone()||isPad()||(this.initConfig(),this.volumeBackground.css({visibility:"visible",opacity:"1"}),this.volumeBarCSS(t),this.setPosition(),this.visible=!1)},hide:function(){isPhone()||isPad()||(this.volumeBackground.css({visibility:"hidden",opacity:"0"}),this.visible=!0)}});var BookInstructionsPage=Class({create:function(t,i){this.parent=t;this.initHtml(t,i);this.initCss();this.initEvent()},initHtml:function(t,i){this.container=$("<div class='bookInstructions helpPage'></div>");this.title=$("<h3 class='bookInstructions helpTitle'>"+this.getTitle()+"</h3>");this.image=$("<div class='bookInstructions helpPageImg'"+this.getImageURL(i)+"></div>");this.description=$("<div class='bookInstructions helpBottomText'>"+this.getDescription(i)+"</div>");this.container.append(this.title);this.container.append(this.image);this.container.append(this.description);this.container.attr("bookInstructionPageNum",i);t.append(this.container)},initCss:function(){var t=0,t=windowWidth>windowHeight?windowHeight:windowWidth,t=Math.floor(t/15);50<t?t=50:26>t&&(t=26);var i=Math.floor(.7*t);this.container.css({width:windowWidth+"px",height:windowHeight+"px"});this.title.css({margin:0,padding:0,"font-weight":"normal","font-family":"HelveticaNeue-CondensedBold, sans-serif",position:"relative",left:0,width:windowWidth+"px","font-size":t+"px","line-height":t+"px",top:.05*windowHeight+"px",color:"#58A3EB"});this.description.css({"font-family":"HelveticaNeue-CondensedBold, sans-serif","font-size":i+"px","line-height":i+"px",position:"absolute",bottom:.15*windowHeight+"px",left:.1*windowWidth+"px",width:.8*windowWidth+"px",color:"#58A3EB"});this.image.css({width:windowWidth+"px",position:"absolute",top:.1*windowHeight+"px","margin-top":"15px",height:.6*windowHeight+"px"})},getImageURL:function(t){return"style='background: url("+uiBaseURL+t+"-2x.png) no-repeat center  center ;background-size:contain;'"},getTitle:function(){return getLanguage("frmHowToUse","How to use")},getDescription:function(t){switch(t){case 1:return getLanguage("lblHelpPage1","Move your finger to flip the book page.");case 2:return getLanguage("lblHelpPage2","Zoom in by using gesture or double click on the page.");case 3:return getLanguage("lblHelpPage3","Click on the logo to reach the official website of the company.");case 4:return getLanguage("lblHelpPage4","Add bookmarks, use search function and auto flip the book.");case 5:return getLanguage("lblHelpPage5","Switch horizontal and vertical view on mobile devices.")}},onResize:function(){this.initCss()},initEvent:function(){new Hammer(this.container[0]).on("swipe",function(t){10<=t.deltaX?bookInstructions.toNextPage():-10>=t.deltaX?bookInstructions.toPreviousPage():""}.bind(this))}}),BookInstructionsDot=Class({create:function(t,i){this.parent=t;this.id=i;this.initHtml();this.initCss();this.initEvent()},initHtml:function(){this.dot=$("<li ></li>");this.dot.attr("bookInstructionDotNum",this.id);1==this.id?this.dot.attr("class","bookInstructions icon_active"):"";this.parent.append(this.dot)},initCss:function(){var t=0,t=windowWidth>windowHeight?windowHeight:windowWidth,t=Math.floor(t/30);30<t?t=30:15>t&&(t=15);this.dot.css({margin:"0 "+Math.floor(t/5*4)+"px",width:t+"px",height:t+"px"})},onResize:function(){this.initCss()},initEvent:function(){new Hammer(this.dot[0]).on("tap",function(){this.pageIndex=parseInt(this.dot.attr("bookInstructionDotNum"));bookInstructions.setCurrentPage(this.pageIndex)}.bind(this))}}),BookInstructions=Class({create:function(t){this.pageWidth=document.body.clientWidth;this.pageIndex=1;this.totalPageCount=5;this.closeSrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQyMUQ1MUVBRjlBMTFFNjk0NUZCNDY1NTgzODYzOTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQyMUQ1MUZBRjlBMTFFNjk0NUZCNDY1NTgzODYzOTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NDIxRDUxQ0FGOUExMUU2OTQ1RkI0NjU1ODM4NjM5NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDIxRDUxREFGOUExMUU2OTQ1RkI0NjU1ODM4NjM5NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PosYs0wAAABhSURBVHja7NRBCgAgCATAlP7/5e0SEZK6gdClhW46UEoCoFVGW3E+uIJ5ohxrPFC2Jg/b66gre6iLMW9o0RBjhyIs9mxtQA6KAi2WonqBUSult3uWoT1pYKb/f5viDAEGAD4SFiVn1efjAAAAAElFTkSuQmCC";this.visible=!1;this.parent=t;this.pages=[];this.dotsArr=[];this.initHtml(t);this.initCss();this.initEvent()},initHtml:function(t){this.container=$("<div class='bookInstructions helpBody hide'></div>");this.swiper=$("<div class='bookInstructions swiper'></div>");this.dots=$('<ul class="bookInstructions helpBullet"></ul>');for(var i=1;5>=i;i++)this.pages.push(new BookInstructionsPage(this.swiper,i)),this.dotsArr.push(new BookInstructionsDot(this.dots,i));this.closeBtn=$('<span class="bookInstructions icon_drop" ><img src='+this.closeSrc+"></span>");t.append(this.container);this.container.append(this.swiper);this.container.append(this.dots);this.container.append(this.closeBtn)},initCss:function(){var t=transformCSS({tran:{x:windowWidth,y:0}});this.container.css({"background-image":"url("+uiBaseURL+'bg.png")no-repeat',"background-position":"bottom"});this.container.css(t);this.resizeCss();t=transformCSS({tran:{x:0,y:0}});this.swiper.css(t)},resizeCss:function(){var t=0,t=windowWidth>windowHeight?windowHeight:windowWidth,i=Math.floor(t/30);35<i?i=35:15>i&&(i=15);t=Math.floor(t/16);48<t?t=48:30>t&&(t=30);var e=t/3;this.container.css({width:windowWidth+"px",height:windowHeight+"px"});this.swiper.css({width:5*windowWidth+"px",height:windowHeight+"px"});this.dots.css({"list-style":" none",padding:"0",margin:"0",position:" absolute",bottom:.05*windowHeight+"px",width:windowWidth+"px",height:i+"px","line-height":i+"px","z-index":" 100"});this.closeBtn.css({width:t+"px",height:t+"px","line-height":t+"px","font-size":t+"px",cursor:"pointer",position:"absolute","border-radius":"50%",color:"#fff",right:e+"px",top:e+"px",background:"#7FCEFF","z-index":"100"})},onResize:function(){this.resizeCss();for(var t=0;t<this.dotsArr.length;t++)this.dotsArr[t].onResize(),this.pages[t].onResize();t=transformCSS({tran:{x:-(this.pageIndex-1)*windowWidth,y:0}});this.swiper.css(t)},toNextPage:function(){this.setCurrentPage(1<this.pageIndex-1?this.pageIndex-1:1)},toPreviousPage:function(){this.setCurrentPage(this.pageIndex+1>=this.totalPageCount?this.totalPageCount:this.pageIndex+1)},setCurrentPage:function(t){this.pageIndex=t?t:this.pageIndex;t=transformCSS({tran:{x:-(this.pageIndex-1)*windowWidth,y:0}});animateOnce(this.swiper,t,300,null);this.dots.find("li").removeClass("icon_active");this.dots.find("li[bookInstructionDotNum="+this.pageIndex+"]").addClass("icon_active")},showOrhide:function(){this.visible?this.hide():this.show()},show:function(){this.visible=!0;this.container.removeClass("hide");var t=transformCSS({tran:{x:0,y:0}});animateOnce(this.container,t,300,null)},hide:function(){this.visible=!1;var t=transformCSS({tran:{x:this.pageWidth,y:0}});animateOnce(this.container,t,300,function(){this.container.addClass("hide")}.bind(this))},showOrHide:function(){this.visible?this.hide():this.show()},initEvent:function(){this.container.bind("touchstart",function(t){t.preventDefault()});this.closeBtn.bind(_event._end,function(){this.hide()}.bind(this))},changeLanguage:function(){for(var t=0;t<this.pages.length;t++){var i=this.pages[t];i.title.html(i.getTitle());i.description.html(i.getDescription(t+1))}}});Class("FlipByAudio",{EMPTY_CONFIG:{audioType:0,audioFile:"",showPlayer:!1,items:[]},SINGLE_AUDIO:0,MULTIPLE_AUDIOS:1,create:function(t,i){this.parent=t;this.config=i||this.EMPTY_CONFIG;void 0==this.config.audioType&&(this.config.audioType=0);void 0==this.config.audioFile&&(this.config.audioFile="");void 0==this.config.showPlayer&&(this.config.showPlayer=!1);this.config.items||(this.config.items=[]);0!=this.itemLength()&&this.init()},itemLength:function(){return this.config.items.length},init:function(){this.$audio=new Media($("<audio controls></audio>"),"audio");this.$audio.isPlaying=!1;this.audioIndex=0;this.config.audioType==this.SINGLE_AUDIO?(this.setSingleAudio(),this.initSingleAudioEvent()):(this.setMultipleAudio(this.audioIndex),this.initMultipleAudioEvent())},play:function(){if(this.$audio)try{this.$audio.play()}catch(t){}},playByTouch:function(){if(this.$audio&&!this.$audio.isPlaying)try{this.$audio.play(),this.$audio.isPlaying=!0}catch(t){}},playAfterFlip:function(){this.play.delay(this,1e3*bookConfig.flippingTime)},start:function(){this.config.audioType==this.MULTIPLE_AUDIOS&&this.flipByIndex(0);this.playAfterFlip()},setSingleAudio:function(){this.$audio.$media.attr("src",this.config.audioFile)},setMultipleAudio:function(t){(t=this.config.items[t])&&this.$audio.$media.attr("src",t.audioData)},initSingleAudioEvent:function(){this.$audio.$media.bind("timeupdate",function(){var t=parseInt(this.getCurrentAudioData());this.$audio.$media[0].currentTime>=t&&(this.flipByIndex(this.audioIndex),this.audioIndex++)}.bind(this))},getCurrentAudioData:function(){return this.config.items[this.audioIndex].audioData},initMultipleAudioEvent:function(){this.$audio.$media.bind("ended",function(){this.audioIndex++;this.setMultipleAudio(this.audioIndex);this.flipByIndex(this.audioIndex);this.playAfterFlip()}.bind(this))},flipByIndex:function(t){this.config.items[this.audioIndex]&&(t=parseInt(this.config.items[t].pageIndex),gotoPageFun(t))}});var PcAboutForm=Class({create:function(t){this.elements=new AboutElements(this);this._super(t)},onCreate:function(){this.stage.css({"background-color":this.mainColorObj.rgba(.7),color:this.fontColor});this.content.css({"background-color":this.fontColor,color:this.mainColor});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='about_content'></div>");this.stage.append(this.content);this.content2=$("<div class='content2'></div>");this.content.append(this.content2);this.initLogo();this.initSwiper();this.content2.append(this.aboutSwiper);this.content1=$("<div class='content1'></div>");this.content.append(this.content1);this.content1.append(this.author);this.content1.append(this.address);this.content1.append(this.email);this.content1.append(this.website);this.content1.append(this.mobile);this._super()},initSwiper:function(){this.aboutSwiper=$("<div class='aboutSwiper stage'></div>");this.aboutSwiperList=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.aboutSwiper.append(this.aboutSwiperList);this.aboutSwiperList.append(this.description);this.aboutSwiper.append(this.progress);this.progress.append(this.progressBar);this.aboutSwiper.css({display:"inline-block",width:"380px",height:"105px"});bookConfig.CompanyLogoFile||this.aboutSwiper.css({width:"488px"});this.aboutSwiper.scroll({},Direction.top,"win10")},onShow:function(){this.close.changeButtonColor(this.fontColor);this.aboutSwiper.refreshData()},initLogo:function(){bookConfig.CompanyLogoFile&&this.content2.append(this.logo)}}).extend(FadeOutFadeForm);var PcBookmarkItem=Class({create:function(t,i){this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;t.fontColor=this.mainColor;this._super(t,i)}}).extend(BookmarkItem);var PcBookmarkListPanel=Class({create:function(t){this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this.mainColorObj=Color(this.mainColor);this.fontColorObj=Color(this.fontColor);this._super(t)},onCreate:function(){this.progressBar.css({"background-color":this.mainColorObj.rgba(.25)})},newItem:function(t){return new PcBookmarkItem(t,this.callback)}}).extend(BookmarkListPanel);var PcBookmarkForm=Class({create:function(t){this._super(t)},onCreate:function(){this.stage.css({"background-color":this.mainColorObj.rgba(.7),color:this.fontColor});this.content.css({"background-color":this.fontColor,color:this.mainColor});this.leftAddPage.css({"background-color":this.mainColor,color:this.fontColor});this.rightAddPage.css({"background-color":this.mainColor,color:this.fontColor});this.remove.css({"background-color":this.mainColor,color:this.fontColor});this.bookmarkListTitle.css({"background-color":this.mainColorObj.rgba(.6),color:this.fontColor});this.bookmarkListPanel.onCreate()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='bookmark_content'></div>");this.stage.append(this.content);var t=$("<p class='inputForm'></p>");t.append(this.input);t.append(this.colorSelection);this.content.append(t);this.content.append(this.leftAddPage);this.content.append(this.rightAddPage);this.content.append(this.bookmarkListTitle);this.content.append(this.bookmarkListPanel.bookmarkSwiper);this.content.append(this.remove);this.parent.append(this.stage);this.refreshPanel()},onResize:function(){var t=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1);Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-toolBar.getWidth(),1);this.stage.find(".bookmark_content").css({height:t-87+"px"});var i=toolBar.getTopHeight()+10;this.width=240;this.height=t-40;this.maxHeight=this.height-188;this.stage.css({height:this.height+"px",top:i+"px"});this.bookmarkListPanel.onResize(this.width,this.maxHeight);this.refreshPanel()}}).extend(PcBookmarkFrame);var PcHelpForm=Class({create:function(t){this.elements=new HelpElements(this);this._super(t)},onCreate:function(){this.stage.css({"background-color":this.mainColorObj.rgba(.7),color:this.fontColor});this.content.css({"background-color":this.fontColor,color:this.mainColor});bookConfig.helpContentFileURL&&(this.stage.css({width:bookConfig.helpWidth+"px",height:bookConfig.helpHeight+"px"}),this.image.css({background:"url("+bookConfig.helpContentFileURL+") center no-repeat","background-size":"contain",width:"100%",height:"100%"}),this.content.css({width:bookConfig.helpWidth-34+"px",height:bookConfig.helpHeight-59+"px"}));this._super();bookConfig.showHelpContentAtFirst?this.show():this.hide()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='help_content'></div>");this.stage.append(this.content);this.content.append(this.image);this.title1&&this.content.append(this.title1);this.title2&&this.content.append(this.title2);this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);!bookConfig.helpContentFileURL&&this.image&&this.image.changeButtonColor(this.mainColor)}}).extend(FadeOutFadeForm);var PcPrintForm=Class({create:function(t){this.elements=new PrintElements(this);this._super(t)},onCreate:function(){this.stage.css({"background-color":this.mainColorObj.rgba(.7),color:this.fontColor});this.content.css({"background-color":this.fontColor,color:this.mainColor});this.printButton.css({"background-color":this.mainColor,color:this.fontColor});this.printDiv.css({"border-left":"1px solid "+this.mainColorObj.rgba(.25)});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='content'></div>");this.stage.append(this.content);this.content.append(this.pictureListForm.getDom());this.printDiv=$("<div class='printDiv'></div>");this.printDiv.append(this.printAll);this.printDiv.append(this.printCurrent);this.printDiv.append(this.printRange);this.printDiv.append(this.printButton);this.content.append(this.printDiv);this._super()},changeItemColor:function(){this.printCurrent.changeButtonColor(this.mainColor);this.printRange.changeButtonColor(this.mainColor);this.printAll.changeButtonColor(this.mainColor)},initEvent:function(){this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.pictureListForm.leftBtn.changeButtonColor(this.mainColor);this.pictureListForm.rightBtn.changeButtonColor(this.mainColor);this.changeItemColor()}}).extend(FadeOutFadeForm);var PcSearchItem=Class({create:function(t,i){i.fontColor=this.mainColor;this._super(t,i)}}).extend(SearchItem);var PcSearchForm=Class({create:function(t){this.elements=new SearchElements(this);this._super(t)},onCreate:function(){this.stage.css({"background-color":this.mainColorObj.rgba(.7),color:this.fontColor});this.content.css({"background-color":this.fontColor,color:this.mainColor});this.searchResult.css({"border-bottom":"1px solid "+this.mainColorObj.rgba(.1)});this.progressBar.css({"background-color":this.mainColorObj.rgba(.25)})},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='search_content'></div>");this.stage.append(this.content);this.content.append(this.input);this.content.append(this.searchButton);this.content.append(this.searchResult);this.content.append(this.searchSwiper);this.parent.append(this.stage)},newSearchItem:function(t,i){return new PcSearchItem(t,i)},onResize:function(){var t=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1);Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-toolBar.getWidth(),1);this.width=287;this.height=t-40;t=toolBar.getTopHeight()+10;this.stage.css({height:this.height+"px",top:t+"px"});this.searchSwiper.css("height",this.height-116+"px");this.elements.refresh()},getList:function(){return this.elements.getList()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.input.focus();BookInfo.getBook().addSearchHighlight()},onHide:function(){BookInfo.getBook().clearSearchHighlight()}}).extend(SlideForm);var PcShareForm=Class({create:function(t){this.elements=new ShareElements(this);this._super(t)},onCreate:function(){this.stage.css({"background-color":this.mainColorObj.rgba(.7),color:this.fontColor});this.content.css({"background-color":this.fontColor,color:this.mainColor});bookConfig.RightToLeft?this.swiperContainer.css({"border-right":"1px solid "+this.mainColorObj.rgba(.3)}):this.swiperContainer.css({"border-left":"1px solid "+this.mainColorObj.rgba(.3)});this.codeBox.find(".qrcode").css({"background-color":this.mainColor,color:this.fontColor});this.codeBox.find(".miniProgram").css({"background-color":this.mainColor,color:this.fontColor});this.copy1.css({"background-color":this.mainColor,color:this.fontColor});bookConfig.addCurrentPage&&this.content.css({height:"215px"});this._super()},initSwiper:function(){this.swiperContainer=$("<div class='swiperContainer'></div>");this.shareStage=$("<div class='shareStage stage'></div>");this.shareSwiper=$("<div class='shareSwiper swiper'></div>");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.shareSwiper.append(this.sharePanel);this.shareStage.append(this.shareSwiper);this.shareStage.append(this.progress);this.progress.append(this.progressBar);this.swiperContainer.append(this.shareStage);this.shareStage.scroll({},Direction.top,"win10")},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='share_content'></div>");this.initSwiper();this.stage.append(this.content);this.shareCurrentPageBox.append(this.shareCurrentCheck).append(this.shareCurrentPageTitle1);this.content.append(this.codeBox);this.swiperContainer.append(this.sharePanelTitle);this.content.append(this.swiperContainer);this.linkBox.append(this.linkArea).append(this.copy1);this.content.append(this.shareCurrentPageBox);this.content.append(this.linkBox);this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.shareStage.refreshData()}}).extend(FadeOutFadeForm);var PcTableOfContentItem=Class({create:function(t,i,e){i.fontColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this._super(t,i,e)}}).extend(TableOfContentItem);var PcTableOfContentForm=Class({create:function(t){this.elements=new TableOfContentElements(this);this._super(t)},onCreate:function(){this.stage.css({"background-color":this.mainColorObj.rgba(.7),color:this.fontColor});this.content.css({"background-color":this.fontColor,color:this.mainColor});this.progressBar.css({"background-color":this.mainColorObj.rgba(.8)});this.close.changeButtonColor(this.fontColor)},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='tableofcontent_content'></div>");this.stage.append(this.content);this.content.append(this.tableofcontentSwiper);this.parent.append(this.stage)},newItem:function(t,i,e){return new PcTableOfContentItem(t,i,e)},onResize:function(){var t=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1);Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-toolBar.getWidth(),1);var i=toolBar.getTopHeight()+10;this.width=300;this.height=t-40;this.maxHeight=this.height-68;this.tableofcontentSwiper.css({height:t-67+"px"});this.stage.css({height:this.height+"px",top:i+"px"});this.elements.refresh()},onShow:function(){}}).extend(SlideForm);var PcVideoGalleryForm=Class({create:function(t){this.elements=new VideoGalleryElements(this);this._super(t)},onCreate:function(){this.stage.css({"background-color":this.mainColorObj.rgba(.7),color:this.fontColor});this.content.css({"background-color":this.fontColor,color:this.mainColor});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='videoGallery_content'></div>");this.stage.append(this.content);this.content.append(this.video);this.content.append(this.info);if(this.videoList&&1<this.videoList.length){var t=$("<div class='video_list'></div>");t.append(this.videoSwiper);this.content.append(t)}else this.stage.css("width","335px"),this.content.css("width","315px");this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.elements.playVideo(this.videoList[0])},onHide:function(){this.video.attr("src","")}}).extend(FadeOutFadeForm);Class("TextFormatAnalyzer",{create:function(t){this.$textForAnalysis=$("<div></div>");this.analysisResult=[];if(t&&HTMLString.isHTML(t)){var i=$(t);t.toLowerCase().startsWith("<textformat")?this.$textForAnalysis.append(i):(t=$("<textformat></textformat>"),this.$textForAnalysis.append(t),t.append(i));this.analysis()}else this.initFromText(t)},initFromText:function(t){t||(t=" ");var i={leading:0,leftMargin:0,rightMargin:0,paragraphs:[]};t={align:"LEFT",font:{},text:t};t.font.family="Arial";t.font.size=12;t.font.color="#000000";t.font.letterSpacing=0;t.font.kerning=0;t.font.bold=!1;t.font.italic=!1;t.font.underline=!1;i.paragraphs.push(t);this.analysisResult.push(i)},analysis:function(){for(var t=this.$textForAnalysis.children(),i=0;i<t.length;i++){var e={leading:0,leftMargin:0,rightMargin:0,paragraphs:[]},o=$(t[i]);e.leading=o.attr("LEADING")?parseInt(o.attr("LEADING")):0;$.system.name!=$.system.IOS&&(e.leading+=5);e.leftMargin=o.attr("LEFTMARGIN")?parseInt(o.attr("LEFTMARGIN")):0;e.rightMargin=o.attr("RIGHTMARGIN")?parseInt(o.attr("RIGHTMARGIN")):0;for(var o=o.children(),s=0;s<o.length;s++){var n=$(o[s]),h={align:"LEFT",font:null,text:""};h.align=n.attr("ALIGN")?n.attr("ALIGN"):"LEFT";var a=$(n.children()[0]),n={};n.family=a.attr("FACE")?a.attr("FACE"):"Arial";n.size=a.attr("SIZE")?parseInt(a.attr("SIZE")):12;n.color=a.attr("COLOR")?a.attr("COLOR"):"#000000";n.kerning=a.attr("KERNING")?parseInt(a.attr("KERNING")):0;$.system.name!=$.system.IOS&&(n.leading=e.leading);n.lineHeight=n.size+e.leading;n.bold=0<a.find("B").length;h.font=n;a=a.html();a=this.changeXmlToHtml(a,n.leading);h.text=a;/<a\b[^>]+\bhref="([^"]*)"[^>]*>([\s\S]*?)<\/a>/.test(h.text)&&(this.hasATag=!0);e.paragraphs.push(h)}this.analysisResult.push(e)}},changeXmlToHtml:function(t,i){var e=t.match(/<font[ ="A-Za-z0-9_#,]*>/),o=[];for(null!=e&&(t=t.replace(/<\/font/g,"</span"));null!=e;){var s=e[0],n='style="',h=s.match(/color="[A-Za-z0-9#]*"/),a=s.match(/size="[0-9]*"/),r=s.match(/face="[A-Za-z0-9_# ,]*"/),l=s.match(/letterspacing="[0-9]*"/);null!=h&&(s=s.replace(h[0],""),o=this.changeTag(o,h[0]));null!=a&&(s=s.replace(a[0],""),o=this.changeTag(o,a[0].replace("size","font-size")),o=this.changeTag(o,a[0].replace("size","line-height"),i));null!=r&&(s=s.replace(r[0],""),o=this.changeTag(o,r[0].replace("face","font-family")));null!=l&&(s=s.replace(l,""),o=this.changeTag(o,l[0].replace("letterspacing","letter-spacing")));for(h=0;h<o.length;h++)n+=o[h][0]+":"+o[h][1]+";";s=s.replace(/ /g,"");s=s.replace("font","span ");s=s.replace(">",n+'">');t=t.replace(e[0],s);t=t.replaceAll("  ","&ensp;");o=[];e=t.match(/<font[ ="A-Za-z0-9_#,]*>/)}0<=t.indexOf("<i>")&&(t=t.replaceAll("<i>",'<i style="font-style: italic;text-decoration:inherit;">'));0<=t.indexOf("<u>")&&(t=t.replaceAll("<u>",'<u style="font-style: inherit;text-decoration: underline">'));return t},changeTag:function(t,i,e){i=i.replace(/"/g,"");i=i.split("=");e&&(i[1]=Number(i[1])+Number(e));if("font-size"==i[0]||"letter-spacing"==i[0]||"line-height"==i[0])i[1]+="px";t.push(i);return t},getLeftMargin:function(){return 0==this.analysisResult.length?0:this.analysisResult[0].leftMargin},getRightMargin:function(){return 0==this.analysisResult.length?0:this.analysisResult[0].rightMargin},getAlign:function(){if(0==this.analysisResult.length)return"LEFT";var t=this.analysisResult[0];return 0==t.paragraphs.length?"LEFT":t.paragraphs[0].align},getFontFamily:function(){var t=this.getFont();return t?t.family:"Arial"},getFontColor:function(){var t=this.getFont();return t?t.color:"#000000"},getFontSize:function(){var t=this.getFont();return t?t.size:12},getLetterSpace:function(){var t=this.getFont();return t?t.letterSpacing:0},getWordSpace:function(){var t=this.getFont();return t?t.kerning:"0"},getLeading:function(){var t=this.getFont();return t?t.leading:"0"},getLineHeight:function(){var t=this.getFont(),i=t.lineHeight;if(!t)return"0";$.system.name!=$.system.IOS&&(i-=5);return i},getFont:function(){if(0==this.analysisResult.length)return null;var t=this.analysisResult[0];return 0==t.paragraphs.length?null:t.paragraphs[0].font},initFont:function(t){var i=this.getFontCSS(this.getFont());t.css(i)},getMaxFontSize:function(){for(var t=0,i=0;i<this.analysisResult.length;i++)for(var e=this.analysisResult[i],o=0;o<e.paragraphs.length;o++)t=Math.max(t,e.paragraphs[o].font.size);return t},getMinFontSize:function(){for(var t=1e4,i=0;i<this.analysisResult.length;i++)for(var e=this.analysisResult[i],o=0;o<e.paragraphs.length;o++)t=Math.min(t,e.paragraphs[o].font.size);return t},getText:function(){for(var t=this.getTextLines(),i="",e=0;e<t.length;e++)i=i+t[e]+"\r\n";return i},getTextLines:function(){return this.getLines()},getLines:function(){for(var t=[],i=0;i<this.analysisResult.length;i++)for(var e=this.analysisResult[i],o=0;o<e.paragraphs.length;o++)t.push(e.paragraphs[o].text);return t},htmlHasATag:function(){return this.hasATag},getHTML:function(t){for(var i=$("<div style='word-wrap:break-word;cursor:default;'></div>"),e=0;e<this.analysisResult.length;e++){var o=this.analysisResult[e],s=$("<div></div>");0<o.leftMargin&&s.css("margin-left",o.leftMargin+"px");0<o.rightMargin&&s.css("margin-right",o.rightMargin+"px");for(var n=0;n<o.paragraphs.length;n++){var h=o.paragraphs[n],a=$("<p></p>");t?a.css(t):a.css("text-align",h.align);var r=$("<span></span>");r.css(this.getFontCSS(h.font));h=h.text;h=h.replaceAll("&lt;br&gt;","<br>");(h=h.replaceAll("&lt;br/&gt;","<br/>"))||(h="&nbsp;");h=h.replaceAll("  ","&ensp;");-1<h.indexOf("<u>")&&(h=h.replaceAll("<u>",'<u style="text-decoration:underline">'));r.append(h);a.append(r);s.append(a)}i.append(s)}return i},getFontCSS:function(t){return t?{"font-family":t.family,color:t.color,"font-size":t.size+"px","letter-spacing":t.letterSpacing+"px","word-spacing":t.kerning+"px","font-style":t.italic?"italic":"normal","text-decoration":t.underline?"underline":"none"}:{}}});Class("Item",{Package:"PageItem",create:function(t,i,e,o){this.parent=t;this.config=this.parseConfig(i);this.pageWidth=e;this.pageHeight=o;this.pw=e;this.ph=o;this.type=this.config.annotype},parseConfig:function(t){return t},animateConfig:function(){this.config.animation&&this.config.animation.name&&(this.config.animation.duration||(this.config.animation.duration=1),this.config.animation.timeFun||(this.config.animation.timeFun="ease"),this.config.animation.delay||(this.config.animation.delay=0),this.config.animation.count||(this.config.animation.count=1),this.config.animation.direction||(this.config.animation.direction="normal"))},getOssUrl:function(t,i,e,o){return t=0<t.lastIndexOf("?")?t+("&x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e)):t+("?x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e))},destroy:function(){},onResize:virtual_function,resizeHint:function(){this.hintBody&&"block"==this.hintBody.css("display")&&("2"==this.config.hint.hintShapeType?this.normalHint(this.hintBody):this.bubbleHint(this.hintBody))},initLinkHint:function(t){if(this.config.hint&&this.config.hint.text&&this.config.hint.text.length&&"null"!=this.config.hint.text.toLowerCase()){var i=null,i="2"==this.config.hint.hintShapeType?new NormalLinkHint:new BubbleLinkHint,e=i.build(this.config);this.hintBody=e;e.css({"z-index":"100"});e&&(this.parent.append(e),e.hide(),t.bind(isTouch?_event._down:_event._enter,function(t){this.hintWidth=this.hintWidth||e.width();this.hintHeight=this.hintHeight||e.height();e.show();e.find("div").css({left:this.hintWidth/2+"px"});"2"==this.config.hint.hintShapeType?this.normalHint(e):this.bubbleHint(e)}.bind(this)),t.bind(isTouch?_event._up:_event._leave,function(t){e.hide()}.bind(this)))}},normalHint:function(t){var i=this.left+(this.width-this.hintWidth-10)/2;0>=i&&(i=0);this.top+this.hintHeight>this.pageHeight/2?t.css({left:i+"px",top:Math.max(2,this.top-this.hintHeight-15)+"px"}):t.css({left:i+"px",top:Math.max(2,this.top+this.height+5)+"px"})},bubbleHint:function(t){var i=this.left+(this.width-this.hintWidth-10)/2;0>=i&&(i=0);this.top+this.hintHeight+this.height>this.pageHeight/2?t.css({left:i+"px",top:Math.max(2,this.top-this.hintHeight-15)+"px"}):(t.css({left:i+"px",top:Math.max(2,this.top+this.height+5)+"px"}),t.find("#text_hint")[0]&&t.find("#text_hint").css({position:"absolute",bottom:"auto",top:"-10px",left:this.hintWidth/2-6+"px",border:"10px solid transparent","border-top-width":0,"border-left-width":"5px","border-right-width":"5px","border-bottom-color":Color(this.config.hint.hintShapeColor).rgba(this.config.hint.hintShapeAlpha)}))},addActionEvent:function(t){t=new this.ActionManager(this,t,this.config);t.prepareAction();t.addAction()},addEffectEvent:function(t,i){new this.EffectManager(this,t,i,this.config).addEffect()},addHighLightEvent:function(t,i){var e=new this.HighLightManager(this,t,i,this.config);if(e=e.addHighLight())return e},imageReflection:function(t){!0==supports("boxReflect")&&this.addCSSReflection(t)},addCSSReflection:function(t){var i=this.config.pageW/this.pageWidth;this.config.pageW||(i=1.2);var e=this.config.reflectionAlpha?Number(this.config.reflectionAlpha):0;"1"==this.config.reflectionType&&(e?t.css({"-webkit-box-reflect":"below "+10*i+"px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))","-o-box-reflect":"below "+10*i+"px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))"}):t.css({"-webkit-box-reflect":"below "+10*i+"px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))","-o-box-reflect":"below "+10*i+"px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))"}));"6"==this.config.reflectionType&&(e?t.css({"-webkit-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))","-o-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))"}):t.css({"-webkit-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))","-o-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))"}));"3"==this.config.reflectionType&&(e?t.css({"-webkit-box-reflect":"below "+10*i+"px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))","-o-box-reflect":"below "+10*i+"px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))"}):t.css({"-webkit-box-reflect":"below "+10*i+"px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))","-o-box-reflect":"below "+10*i+"px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))"}));"4"==this.config.reflectionType&&(e?t.css({"-webkit-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))","-o-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))"}):t.css({"-webkit-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))","-o-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))"}));"5"==this.config.reflectionType&&(e?t.css({"-webkit-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))","-o-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+e/2+")),color-stop(0.5,rgba(255,255,255,"+e+")), to(white))"}):t.css({"-webkit-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.6, transparent), to(white))","-o-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.6, transparent), to(white))"}))},setShapeShadow:function(t){switch(Number(this.config.sa)){case 90:offx=0;offy=4;break;case 180:offx=-4;offy=0;break;case 270:offx=0;offy=-4;break;case 360:offx=4,offy=0}t.shadowOffsetX=offx;t.shadowOffsetY=offy;t.shadowBlur=this.config.sx;t.shadowColor=Color(this.config.sr).toString()},addShadow:function(t){if(this.config.hasShadow){var i=0,e=0,o=this.config.shadow,s=Color(o.shadowColor).rgba(o.shadowAlpha);switch(Number(o.shadowAngle)){case 90:i=0;e=4;break;case 180:i=-4;e=0;break;case 270:i=0;e=-4;break;case 360:i=4,e=0}t.css({"box-shadow":i+"px "+e+"px "+o.shadowBlurX+"px "+s,"-moz-box-shadow":i+"px "+e+"px "+o.shadowBlurX+"px "+s,"-webkit-box-shadow":i+"px "+e+"px "+o.shadowBlurX+"px "+s,"-ms-box-shadow":i+"px "+e+"px "+o.shadowBlurX+"px "+s,"-o-box-shadow":i+"px "+e+"px "+o.shadowBlurX+"px "+s})}},setRotation:function(t,i){0!=parseInt(i)&&(isNaN(i)||t.css({transform:"rotate("+i+"deg)","-webkit-transform":"rotate("+i+"deg)","-ms-transform":"rotate("+i+"deg)","-o-transform":"rotate("+i+"deg)","-moz-transform":"rotate("+i+"deg)","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%"}))},fixRelativePath:function(t){return t?"string"!==typeof t?fixURLValue(t):!0==bookConfig.isFlipPdf?t.startsWith("../")?fixURLValue(t):t.startsWith("./")?fixURLValue("."+t):t.startsWith("files")?fixURLValue("../"+t):t.isUrl()?fixURLValue(t):fixURLValue("../"+t):fixURLValue(t):t},nameIs:function(){if(0==arguments.length)return!1;for(var t=this.getClassName(),i=0;i<arguments.length;i++)if("string"==typeof arguments[i]&&t==arguments[i])return!0;return!1},nameLike:function(){if(0==arguments.length)return!1;for(var t=this.getClassName().toLowerCase(),i=0;i<arguments.length;i++)if("string"==typeof arguments[i]){var e=arguments[i].toLowerCase();if(-1<t.indexOf(e))return!0}return!1}});Class("NormalLinkHint",{build:function(t,i,e){e=new TextFormatAnalyzer(t.hint.text);var o=e.getHTML();i=$("<div></div>");i.html(o);e.initFont(i);e=Color(t.hint.hintShapeColor);parseBool(t.hint.hintAuto)?i.css({padding:"5px","border-radius":"2px"}):i.css({width:t.hint.hintW+"px",height:t.hint.hintH+"px","line-height":t.hint.hintH+"px"});i.css({position:"absolute",background:e.rgba(t.hint.hintShapeAlpha),"border-radius":"2px",color:"white"});return i}});Class("BubbleLinkHint",{build:function(t,i,e){var o=new TextFormatAnalyzer(t.hint.text),s=o.getHTML();i=$("<div></div>");e=$("<div id='text_hint'></div>");i.html(s);i.append(e);o.initFont(i);o=Color(t.hint.hintShapeColor);s=Color(t.hint.hintShapeColor2);parseBool(t.hint.hintAuto)?i.css({padding:"5px","border-radius":"2px"}):i.css({width:t.hint.hintW+"px",height:t.hint.hintH+"px","line-height":t.hint.hintH+"px"});e.css({position:"absolute",bottom:"-10px",border:"10px solid transparent","border-bottom-width":0,"border-left-width":"5px","border-right-width":"5px","border-top-color":s.rgba(t.hint.hintShapeAlpha)});i.css({position:"absolute","text-align":"center",background:"-moz-linear-gradient(top,"+o.rgba(t.hint.hintShapeAlpha)+","+s.rgba(t.hint.hintShapeAlpha)+")",background:"-o-linear-gradient(top,"+o.rgba(t.hint.hintShapeAlpha)+","+s.rgba(t.hint.hintShapeAlpha)+")",background:"-ms-linear-gradient(top,"+o.rgba(t.hint.hintShapeAlpha)+","+s.rgba(t.hint.hintShapeAlpha)+")",background:"-webkit-linear-gradient(top,"+o.rgba(t.hint.hintShapeAlpha)+","+s.rgba(t.hint.hintShapeAlpha)+")",background:"linear-gradient("+o.rgba(t.hint.hintShapeAlpha)+","+s.rgba(t.hint.hintShapeAlpha)+")","border-radius":"2px",color:"white"});return i}}).extend("NormalLinkHint");Class("ActionManager",{Package:"PageItem",create:function(t,i,e){this.item=t;this.element=i;this.config=e;this.action=e.action;this.initAction();this.initActionEvent()},initAction:function(){if(this.action){if(this.action instanceof Array){if(0==this.action.length){this.action=null;return}this.action=this.action[0]}this.eventType=null;this.action.triggerEventType&&(this.eventType=this.action.triggerEventType);$.system.name==$.system.IOS&&(this.eventType==PageEditor.TriggerEventType.MouseDown&&(void 0==this.action.linkTarget&&(this.action.linkTarget="_self"),"_blank"==this.action.linkTarget&&(this.eventType=PageEditor.TriggerEventType.MouseUp),"Blank"==this.action.linkTarget&&(this.eventType=PageEditor.TriggerEventType.MouseUp)),this.action.url&&"tel:"==this.action.url.toLowerCase().substr(0,4)&&(this.eventType=PageEditor.TriggerEventType.MouseUp))}},initActionEvent:function(){if(this.action)switch(this.eventName="",this.eventType){case PageEditor.TriggerEventType.MouseDown:this.eventName=_event._down;break;case PageEditor.TriggerEventType.MouseOver:this.eventName=_event._over;break;case PageEditor.TriggerEventType.MouseOut:this.eventName=_event._out;break;case PageEditor.TriggerEventType.MouseUp:this.eventName=_event._end;break;case PageEditor.TriggerEventType.MouseMove:this.eventName=_event._move;break;case PageEditor.TriggerEventType.MouseLeave:this.eventName=_event._leave}},prepareAction:function(){this.action&&this.element&&(this.executor=this.getActionExecutor())&&this.executor.prepare&&this.executor.prepare(this.item,this.element,this.config)},addAction:function(){this.action&&this.element&&""!=this.eventName&&(!isPhone()&&!isPad()||this.eventName!=_event._down&&this.eventName!=_event._end&&this.eventName!=_event._over?(this.element.css({cursor:"pointer"}),this.element.bind(this.eventName,function(t){this.onAction();t.stopPropagation();return!1}.bind(this)),this.element.addClass("flip-action")):this.addPhoneAction())},addPhoneAction:function(){this.element.onTap(function(t){this.onAction();t.stopPropagation()}.bind(this));this.element.addClass("flip-action")},onAction:function(){this.executor||(this.executor=this.getActionExecutor());if(this.executor)return this.executor.execute(this.item,this.element,this.config)},getActionExecutor:function(){if(this.action.actionType==PageEditor.ActionType.GOTO_PAGE)return new PageItem.Action.GotoPageAction;if(this.action.actionType==PageEditor.ActionType.OPEN_URL)return new PageItem.Action.OpenUrlAction;if(this.action.actionType==PageEditor.ActionType.OPEN_WINDOW)return new PageItem.Action.OpenWindowAction;if(this.action.actionType==PageEditor.ActionType.SLIDE_SHOW)return new PageItem.Action.OpenSlideshowAction;if(this.action.actionType==PageEditor.ActionType.PLAY_AUDIO)return new PageItem.Action.PlayAudioAction;if(this.action.actionType==PageEditor.ActionType.ACTION_JS)return new PageItem.Action.ExecuteJavascriptAction;if(this.action.actionType==PageEditor.ActionType.WINDOW_HTML)return new PageItem.Action.HTMLWindowAction;if(this.action.actionType==PageEditor.ActionType.PLAY_VIDEO)return new PageItem.Action.PlayVideoAction;if(this.action.actionType==PageEditor.ActionType.SHOW_INFORMATION)return new PageItem.Action.ShowInformationAction;if(this.action.actionType==PageEditor.ActionType.QUIZ)return new PageItem.Action.OpenQuizAction;if(this.action.actionType==PageEditor.ActionType.SWF_SLIDE)return new PageItem.Action.OpenSwfSlideAction}});Class("GotoPageAction",{Package:"PageItem.Action",execute:function(t,i,e){this.initPageIndex(e.action);gotoPageFun(this.linkPageIndex);i.addClass("slider-action")},initPageIndex:function(t){this.linkPageIndex=t.pageIndex;this.linkPageIndex||(this.linkPageIndex=1)}});Class("OpenUrlAction",{Package:"PageItem.Action",execute:function(t,i,e){this.initLink(e.action);if("tel:"==this.linkUrl.substr(0,4))window.open(this.linkUrl);else{if(this.isTargetMatch("self"))return window.location=this.linkUrl,!1;if(this.isTargetMatch("blank"))return-1<navigator.userAgent.toLowerCase().indexOf("dingtalk")?window.location.href=this.linkUrl:window.open(this.linkUrl),!1;if(this.isTargetMatch("parent"))return parent.location=this.linkUrl,!1;if(this.isTargetMatch("top")){for(i=window;i.parent!=i;)i=i.parent;i.location=this.linkUrl;return!1}(t=window.frames[this.linkTarget])?t.location=this.linkUrl:window.location=this.linkUrl}i.addClass("slider-action")},initLink:function(t){this.initLinkUrl(t);this.initLinkTarget(t)},initLinkUrl:function(t){this.linkUrl=t.url;this.linkUrl||(this.linkUrl="");this.linkUrl=this.linkUrl.trim();t=this.linkUrl.toLowerCase();t.isUrl()&&t.startsWith("www")&&(this.linkUrl="http://"+this.linkUrl);t.isEmail()&&!t.startsWith("mailto:")&&(this.linkUrl="mailto:"+this.linkUrl);this.fixLikeFileLinkUrl()},fixLikeFileLinkUrl:function(){var t=this.linkUrl.toLowerCase();-1<t.startsWith("http")||-1<t.startsWith("ftp")||-1<t.startsWith("www.")||-1<t.startsWith("tel:")||-1<t.startsWith("mailto:")||t.contains("@")||1<t.extract(".").length||(this.linkUrl="www."+this.linkUrl)},initLinkTarget:function(t){this.linkTarget=(this.linkTarget=t.linkTarget)?this.linkTarget:bookConfig.OpenWindow?bookConfig.OpenWindow:"_blank"},isTargetMatch:function(t){return t?0<=this.linkTarget.trim().toLowerCase().indexOf(t):!1}});Class("PlayAudioAction",{Package:"PageItem.Action",execute:function(t,i,e){this.prepare(t,i,e);!1==t.audio.isPlaying()?t.audio.play():t.audio.pause();i.addClass("slider-action")},prepare:function(t,i,e){t.audio||(i=e.action,e=tmpContainer,bookContainer.width(),bookContainer.height(),t.audio=new AudioEditor(e,i.audioURL,i.autoPlay,i.autoPlayAgain,i.H5PlaybackNumber,i.H5Replay))}});Class("PlayVideoAction",{Package:"PageItem.Action",execute:function(t,i,e){e=e.action;e.windowType==PageEditor.WindowType.OPEN_YOUTUBE&&(t.popup=new PopUpVideo(e,"youtube"));e.windowType==PageEditor.WindowType.OPEN_VIMEO&&(t.popup=new PopUpVideo(e,"vimeo"));e.windowType==PageEditor.WindowType.OPEN_DAILYMOTION&&(t.popup=new PopUpVideo(e,"dailymotion"));e.windowType==PageEditor.WindowType.OPEN_TYPE_WISTIA&&(t.popup=new PopUpVideo(e,"wistia"));e.windowType==PageEditor.WindowType.OPEN_TYPE_YOUKU&&(t.popup=new PopUpVideo(e,"youku"));e.windowType==PageEditor.WindowType.OPEN_TYPE_QQ&&(t.popup=new PopUpVideo(e,"qq"));i.addClass("slider-action")}});Class("OpenSlideshowAction",{Package:"PageItem.Action",execute:function(t,i,e){var o=e.action;o.popUpImage=parseBool(e.popUpImage);o.url=e.src;e=tmpContainer;var s=bookContainer.width(),n=bookContainer.height();t.popup=new PageItem.Popup.SlideShow(e,o,s,n);i.addClass("slider-action")}});Class("ExecuteJavascriptAction",{Package:"PageItem.Action",execute:function(b,c,d){b=d.action;b.scriptFun&&eval(b.scriptFun);c.addClass("slider-action")}});Class("OpenWindowAction",{Package:"PageItem.Action",execute:function(t,i,e){e=e.action;var o={width:e.windowWidth,height:e.windowHeight,src:e.resourceContent,caption:e.caption,languageLayout:e.languageLayout};e.H5PlaybackNumber&&(o.H5PlaybackNumber=parseInt(e.H5PlaybackNumber));e.H5Replay&&(o.H5Replay=parseBool(e.H5Replay));e.hideTitle&&(o.hideTitle=parseBool(e.hideTitle));e.drag&&(o.drag=parseBool(e.drag));var s=tmpContainer,n=bookContainer.width(),h=bookContainer.height();e.windowType==PageEditor.WindowType.OPEN_VIDEO&&($.browser.device==$.browser.DEVICE_PHONE||isPhone()||isPad()?t.video=new MobileVideo(s,o,n,h,"video"):t.video=new PageItem.VideoForm(s,o,n,h,"video"));e.windowType==PageEditor.WindowType.OPEN_FLASH&&(t.video=new PageItem.VideoForm(s,o,n,h,"flash"));e.windowType==PageEditor.WindowType.OPEN_SHOW_TEXT&&($.browser.device==$.browser.DEVICE_PHONE||isPhone()||isPad()?t.video=new TextLightBox(s,o,n,h,"text"):t.video=new PageItem.VideoForm(s,o,n,h,"text"));i.addClass("slider-action")}});Class("HTMLWindowAction",{Package:"PageItem.Action",execute:function(t,i,e){t.popup=new PageItem.Popup.WindowHtml(tmpContainer,e.action);i.addClass("slider-action")}});Class("ShowInformationAction",{Package:"PageItem.Action",execute:function(t,i,e){$.browser.device==$.browser.DEVICE_PHONE||isPhone()||isPad()?t.popup=new PageItem.Popup.ShowInformationMobile(tmpContainer,e):t.popup=new PageItem.Popup.ShowInformation(tmpContainer,e);t.popup.show();i.addClass("slider-action")}});Class("OpenQuizAction",{Package:"PageItem.Action",execute:function(t,i,e){$.browser.device==$.browser.DEVICE_PHONE||isPhone()||isPad()?t.popup=new PageItem.Popup.QuizPanelMobile(tmpContainer,e):t.popup=new PageItem.Popup.QuizPanelPC(tmpContainer,e);t.popup.show();i.addClass("slider-action")}});Class("OpenSwfSlideAction",{Package:"PageItem.Action",execute:function(t,i,e){if(!isPhone()&&!isPad()&&!BookInfo.getBook().flipping){"IMG"==i[0].tagName.toUpperCase()&&(i=i.parent());var o=i.parent();e.elemConfig={element:i,elementParent:o,offsetX:o.offset().left,offsetY:o.offset().top,parentWidth:BookInfo.getBook().getPageWidth(),parentHeight:BookInfo.getBook().getPageHeight()};o=tmpContainer;tmpContainer.width();tmpContainer.height();t.popup||(t.popup=new PageItem.Popup.SwfSlide(o,e,windowWidth,windowHeight));t.popup.show();i.addClass("slider-action")}}});Class("EffectManager",{Package:"PageItem",create:function(t,i,e,o){i&&o&&o.effect&&(e||(e=""),this.elementConfig=e,this.item=t,this.element=i,this.config=o,this.effect=o.effect)},addEffect:function(){if(this.element&&this.config&&this.effect&&this.effect.effectType){var t=this.getActionExecutor();t&&(this.item.imgEffect=t)}},getActionExecutor:function(){if(this.effect.effectType==PageEditor.Effect.FADEIN)return new PageItem.Effect.FadeIn(this.item,this.element,this.elementConfig,this.config);if(this.effect.effectType==PageEditor.Effect.CUTTING)return new PageItem.Effect.Cutting(this.item,this.element,this.elementConfig,this.config);if(this.effect.effectType==PageEditor.Effect.FLY_IN)return new PageItem.Effect.FlyIn(this.item,this.element,this.elementConfig,this.config);if(this.effect.effectType==PageEditor.Effect.INDENTATION)return new PageItem.Effect.Indentation(this.item,this.element,this.elementConfig,this.config)}});Class("FadeIn",{Package:"PageItem.Effect",create:function(t,i,e,o){i&&o&&(this.item=t,this.element=i,this.config=o,this.effect=o.effect)},hide:function(){this.element.css({display:"none"})},show:function(){this.element.fadeIn(1e3*this.effect.duration)}});Class("FlyIn",{Package:"PageItem.Effect",create:function(t,i,e,o){i&&o&&e&&(this.item=t,this.elementConfig=e,this.element=i,this.elemWidth=this.elementConfig.elemWidth,this.elemHeight=this.elementConfig.elemHeight,this.parentWidth=this.elementConfig.parentWidth,this.parentHeight=this.elementConfig.parentHeight,this.config=o,this.effect=o.effect,this.hide())},setPosition:function(){switch(this.effect.position){case"left":this.element.css({left:-this.elementConfig.x-this.elementConfig.elemWidth+"px"});break;case"top":this.element.css({top:-this.elementConfig.y-this.elementConfig.elemHeight+"px"});break;case"bottom":this.element.css({top:this.elementConfig.pageHeight-this.elementConfig.y+"px"});break;case"right":this.element.css({left:this.elementConfig.pageWidth-this.elementConfig.x+"px"})}},hide:function(){this.setPosition()},show:function(){setTimeout(function(){"left"==this.effect.position||"right"==this.effect.position?this.element.animate({left:(this.elementConfig.parentWidth-this.elementConfig.elemWidth)/2+"px"},1e3*this.effect.duration,"easeOutBack"):this.element.animate({top:(this.elementConfig.parentHeight-this.elementConfig.elemHeight)/2+"px"},1e3*this.effect.duration,"easeOutBack")}.bind(this),1e3*bookConfig.flippingTime)}});Class("Indentation",{Package:"PageItem.Effect",create:function(t,i,e,o){i&&o&&e&&(this.item=t,this.elementConfig=e,this.element=i,this.config=o,this.effect=o.effect,this.hide())},setPosition:function(){this.element.css({margin:""});this.element.parent().css({overflow:"hidden"});this.elementConfig.parentWidth/this.elementConfig.parentHeight>this.elementConfig.elemWidth/this.elementConfig.elemHeight?(this.startLeft=(this.elementConfig.parentWidth-this.elementConfig.elemWidth)/2,this.startTop=0):(this.startLeft=0,this.startTop=(this.elementConfig.parentHeight-this.elementConfig.elemHeight)/2);switch(this.effect.position){case"left":var t=this.elementConfig.parentWidth-this.elementConfig.elemWidth;this.element.css({left:-(this.elementConfig.elemWidth+t)+"px",top:this.startTop+"px"});break;case"top":t=this.elementConfig.parentHeight-this.elementConfig.elemHeight;this.element.css({top:-(this.elementConfig.elemHeight+t)+"px",left:this.startLeft+"px"});break;case"bottom":t=this.elementConfig.parentHeight-this.elementConfig.elemHeight;this.element.css({top:this.elementConfig.elemHeight+t+"px",left:this.startLeft+"px"});break;case"right":t=this.elementConfig.parentWidth-this.elementConfig.elemWidth,this.element.css({left:this.elementConfig.elemWidth+t+"px",top:this.startTop+"px"})}},hide:function(){this.setPosition()},show:function(){setTimeout(function(){"left"==this.effect.position||"right"==this.effect.position?this.element.animate({left:this.startLeft},1e3*this.effect.duration,"easeOutBack"):this.element.animate({top:this.startTop},1e3*this.effect.duration,"easeOutBack")}.bind(this),1e3*bookConfig.flippingTime)}});Class("Cutting",{Package:"PageItem.Effect",create:function(t,i,e,o){i&&e&&o&&(this.elementConfig=e,this.element=i,this.elemParent=this.element.parent(),this.config=o,this.showTime=0,this.effect=o.effect,this.initCss())},initCss:function(){isPhone()||isPad()||(this.element.addClass("clip"),this.element.parent().addClass("active"),this.element.css({transform:""}))},resetClass:function(){isPhone()||isPad()||(this.element.removeClass("clip"),this.element.parent().removeClass("active"))},cutting:function(t){if(!t)return!1;this.initCss();t.removeAttribute("id");var s=this.elementConfig.elemHeight,n=this.elementConfig.elemWidth,i=this.elementConfig.elemWidth/10,h=t.outerHTML;if(window.getComputedStyle(document.body).webkitClipPath){for(var a="",e=0;e<n;e+=i)for(var o=0;o<s;o+=i)[[[e,o],[e,o+i],[e+i,o+i],[e+i,o]]].forEach(function(t,i){var e=t.map(function(t){return t.map(function(t){return t+"px"}).join(" ")}).join(),e="-webkit-clip-path: polygon("+e+");clip-path: polygon("+e+");",o=.5>Math.random()?-1:1,o="translate("+[n*(.5-Math.random()),s*(.5-Math.random())].map(function(t){return t+"px"}).join()+") rotate("+Math.round(360*o*Math.random())+"deg)";a+=h.replace('style="',' style="'+("-webkit-transform:"+o+";-o-transform:"+o+";-moz-transform:"+o+";-ms-transform:"+o+";transform:"+o+";")+e);this.element.css({visibility:"hidden"})}.bind(this));$(t).parent().append(a);setTimeout(function(){this.elemParent.find("img").css({background:"transparent",visibility:"visible"});this.elemParent.find("img").not(":first").remove();this.resetClass()}.bind(this),1100);return!0}t.className+=" no-clippath";return!1},hide:function(){isPhone()||isPad()?this.element.fadeOut(0):this.element.css({display:"none"})},show:function(){isPhone()||isPad()?this.element.fadeIn(1e3):(this.element.css({display:"block"}),this.cutting(this.element[0]))}});Class("HighLightManager",{Package:"PageItem",create:function(t,i,e,o){i&&o&&e&&(this.elementConfig=e,this.item=t,this.element=i,this.highlightsLabel=o.highlightsLabel)},addHighLight:function(){if(this.element&&this.highlightsLabel){var t=this.getHighLightType();if(t)return t}},getHighLightType:function(){if(this.highlightsLabel==PageEditor.HighLight.GREENBOXSTOP)return new PageItem.HighLight.GreenBoxStop(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.GREENBOX)return new PageItem.HighLight.GreenBox(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.ORIGINCIRCLE)return new PageItem.HighLight.OriginCircle(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.REDBOX)return new PageItem.HighLight.RedBox(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.REDCIRCLE)return new PageItem.HighLight.RedCircle(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.BLUESQUARE)return new PageItem.HighLight.BlueSquare(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.GREENCIRCLEROTATE)return new PageItem.HighLight.GreenCircleRotate(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.GREENLINELTOR)return new PageItem.HighLight.GreenLineLToR(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.GREENLINERTOL)return new PageItem.HighLight.GreenLineRToL(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.GREENSQUARE)return new PageItem.HighLight.GreenSquare(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.LINESQUARE)return new PageItem.HighLight.LineSquare(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.ORANGEHIGHLIGHT)return new PageItem.HighLight.OrangeHighLight(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.ORANGECIRCLELIGHT)return new PageItem.HighLight.OrangeCircleLight(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.PUSHSQUARE)return new PageItem.HighLight.PushSquare(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.REDHIGHLIGHT)return new PageItem.HighLight.RedHighLight(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.REDBOXBLINK)return new PageItem.HighLight.RedBoxBlink(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.REDLINEBLINK)return new PageItem.HighLight.RedLineBlink(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.REDLINELTOR)return new PageItem.HighLight.RedLineLToR(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.REDLINERTOL)return new PageItem.HighLight.RedLineRToL(this.element,this.elementConfig);if(this.highlightsLabel==PageEditor.HighLight.SPINSQUARE)return new PageItem.HighLight.SpinSquare(this.element,this.elementConfig)}});Class("HighLightHtml",{Package:"PageItem.HighLight",create:function(t,i){t&&i&&(this.config=i,this.width=i.width,this.height=i.height,this.element=t,this.initConfig(),this.cvs=$("<canvas width="+this.width+" height="+this.height+"></canvas>"),this.ctx=this.cvs[0].getContext("2d"),this.initCss(),this.element.append(this.cvs),this.element.bind("mouseenter",this.animate.bind(this)),this.element.bind("mouseleave",function(){this.stopAnimate();this.clearCvs()}.bind(this)))},initConfig:function(){},animate:function(){},stopAnimate:function(){},ellipse:function(t,i,e,o,s,n,h,a){t.save();var r=o>s?o:s;o/=r;s/=r;t.lineJoin="round";t.scale(o,s);t.beginPath();t.arc(i/o,e/s,r,n,h,a);t.stroke();t.closePath();t.restore()},clearCvs:function(){this.ctx.clearRect(0,0,this.width,this.height)},onResize:function(t,i){this.width=t;this.height=i;this.cvs[0].width=t;this.cvs[0].height=i;this.initConfig()},initCss:function(){this.cvs.css({position:"absolute","pointer-events":"none",left:0,top:0,"z-index":0})},hide:function(){},show:function(){}});Class("GreenBoxStop",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.gradientWidth=this.width;this.overSize=this.height-this.width;this.height<this.width&&(this.gradientWidth=this.height,this.overSize=this.width-this.height);this.x=.05*this.width;this.y=.05*this.height;this.drawW=.9*this.width;this.drawH=.9*this.height},animate:function(){this.line1=this.line1Animate.animation(this,500)},stopAnimate:function(){this.line1&&this.line1.stop();this.line2&&this.line2.stop();this.flash&&this.flash.stop();this.boxFlash&&this.boxFlash.stop()},drawRect:function(){this.ctx.beginPath();this.ctx.strokeStyle="#009900";this.ctx.lineJoin="round";this.ctx.lineWidth=1;this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH);this.ctx.closePath()},line1Animate:function(t,i){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.strokeStyle="#009900";this.ctx.lineJoin="round";this.ctx.lineWidth=1;var e=this.x+this.drawW,o=this.y;this.ctx.beginPath();this.ctx.moveTo(e,o);this.ctx.lineTo(e-this.drawW/i*t,o);this.ctx.moveTo(e,o);this.ctx.lineTo(e,o+this.drawH/i*t);this.ctx.stroke();this.ctx.closePath();t==i&&(this.line2=this.line2Animate.animation(this,500))},line2Animate:function(t,i){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.strokeStyle="#009900";this.ctx.lineWidth=1;this.origin1={x:.05*this.width,y:.05*this.height};this.origin2={x:.95*this.width,y:.95*this.height};this.ctx.beginPath();this.ctx.moveTo(.95*this.width,.05*this.height);this.ctx.lineTo(.05*this.width,.05*this.height);this.ctx.moveTo(.95*this.width,.05*this.height);this.ctx.lineTo(.95*this.width,.95*this.height);this.ctx.stroke();this.ctx.closePath();this.ctx.beginPath();this.ctx.moveTo(this.origin1.x,this.origin1.y);this.ctx.lineTo(this.origin1.x,this.origin1.y+this.drawH/i*t);this.ctx.moveTo(this.origin2.x,this.origin2.y);this.ctx.lineTo(this.origin2.x-this.drawW/i*t,this.origin2.y);this.ctx.stroke();this.ctx.closePath();t==i&&(this.flash=this.flashAnimate.animation(this,300))},flashAnimate:function(t,i){var e=t/i,o=.2+.6*e,s=o-.2,n=o+.2;this.ctx.beginPath();this.ctx.clearRect(0,0,this.width,this.height);var h=this.ctx.createLinearGradient(0,.95*this.height-this.overSize*e,this.gradientWidth,.95*this.height-this.gradientWidth-this.overSize*e);this.width>this.height&&(h=this.ctx.createLinearGradient(0+this.overSize*e,this.gradientWidth,this.gradientWidth+this.overSize*e,0));h.addColorStop(0,"transparent");h.addColorStop(s,"transparent");h.addColorStop(o,Color("#009900").rgba(.5-.4*e));h.addColorStop(n,"transparent");h.addColorStop(1,"transparent");this.ctx.fillStyle=h;this.ctx.fillRect(.05*this.width,.05*this.height,this.drawW,this.drawH);this.ctx.closePath();this.drawRect();t==i&&(this.ctx.clearRect(0,0,this.width,this.height),this.drawRect(),this.boxFlashAnimate&&(this.boxFlash=this.boxFlashAnimate.animation(this,800)))}}).extend("HighLightHtml");Class("GreenBox",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i);this.color=Color("#009900")},boxFlashAnimate:function(t,i){this.clearCvs();this.ctx.beginPath();this.ctx.strokeStyle=this.color.rgba(t<=i/2?1-t/i*2:t/i*2-1);this.ctx.lineJoin="round";this.ctx.lineWidth=1;this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH);this.ctx.closePath();t==i&&(this.boxFlash&&this.boxFlash.stop(),this.boxFlash=this.boxFlashAnimate.animation(this,800))}}).extend("GreenBoxStop");Class("OriginCircle",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#F7771E");this.x=this.width/2;this.y=this.height/2;this.drawW=.72*this.width/2;this.drawH=.72*this.height/2;this.gradientWidth=2*this.drawW;this.overSize=2*(this.drawH-this.drawW);this.drawW>this.drawH&&(this.gradientWidth=2*this.drawH,this.overSize=2*(this.drawW-this.drawH))},animate:function(){this.drawRound=this.ellipse1Anime.animation(this,500)},stopAnimate:function(){this.drawRound&&this.drawRound.stop();this.flash&&this.flash.stop();this.ellipseFlash&&this.ellipseFlash.stop()},ellipse1Anime:function(t,i){var e=t/i;this.clearCvs();this.ctx.beginPath();this.ctx.strokeStyle=this.color.toString();this.ctx.lineJoin="round";this.ctx.lineWidth=1;this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,.25*-Math.PI,.75*Math.PI*e);this.ctx.closePath();this.ctx.beginPath();this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,-.25*Math.PI,-.25*Math.PI-1*Math.PI*e,!0);this.ctx.closePath();t==i&&(this.flash=this.flashAnimate.animation(this,300))},flashAnimate:function(t,i){var e=t/i,o=.2+.4*e,s=o-.2,n=o+.2,h=.14*this.width,a=.14*this.height;this.clearCvs();var r=this.ctx.createLinearGradient(h,.86*this.height-this.overSize*e,this.gradientWidth+h,.86*this.height-this.gradientWidth-this.overSize*e*.9);this.width>this.height&&(r=this.ctx.createLinearGradient(h+this.overSize*e,this.gradientWidth+a,h+this.gradientWidth+this.overSize*e,a));r.addColorStop(0,"transparent");r.addColorStop(s,"transparent");r.addColorStop(o,this.color.rgba(.5-.4*e));r.addColorStop(n,"transparent");r.addColorStop(1,"transparent");this.ctx.beginPath();this.ctx.fillStyle=r;this.ctx.strokeStyle=this.color.toString();this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,0,2*Math.PI,!0);this.ctx.fill();this.ctx.closePath();t==i&&(this.ellipseFlash=this.flashRound.animation(this,800))},flashRound:function(t,i){var e=t<=i/2?1-t/i*2:t/i*2-1;this.clearCvs();this.ctx.beginPath();this.ctx.strokeStyle=this.color.rgba(e);this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,0,2*Math.PI,!0);this.ctx.closePath();t==i&&(this.ellipseFlash&&this.ellipseFlash.stop(),this.ellipseFlash=this.flashRound.animation(this,800))}}).extend("HighLightHtml");Class("RedBox",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.direct=1;this.gradientWidth=this.width;this.height<this.width&&(this.gradientWidth=this.height);this.x=.05*this.width;this.y=.05*this.height;this.arrowRate=Math.sin(Math.PI/4);this.arrowW=.05*this.gradientWidth;this.drawW=.9*this.width;this.drawH=.9*this.height;this.rectArr=[{x:this.x,y:this.y},{x:this.x,y:this.y+this.drawH},{x:this.x+this.drawW,y:this.y+this.drawH},{x:this.x+this.drawW,y:this.y}]},animate:function(){this.line=this.lineAnimate.animation(this,500)},stopAnimate:function(){this.line&&this.line.stop();this.rect&&this.rect.stop()},drawRect:function(t,i){this.ctx.beginPath();this.ctx.strokeStyle="#FF0000";this.ctx.lineJoin="round";this.ctx.lineWidth=1;this.ctx.moveTo(t.x,t.y);this.ctx.lineTo(i.x,i.y);this.ctx.stroke();this.ctx.closePath()},rectFlash:function(t,i){this.clearCvs();var e=t/i,o=this.x-.25*this.drawW*e,s=this.y-.25*this.drawH*e;this.ctx.strokeStyle="#FF0000";this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH);this.ctx.strokeRect(o,s,this.drawW+.5*this.drawW*e,this.drawH+.5*this.drawH*e);t==i&&(this.rect.stop(),this.clearCvs(),this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH))},lineAnimate:function(t,i){this.clearCvs();this.ctx.strokeStyle="#FF0000";this.ctx.lineJoin="round";this.ctx.lineWidth=1;var e=this.getPos(t/i);this.ctx.beginPath();this.ctx.moveTo(e.start.x,e.start.y);this.ctx.lineTo(e.end.x,e.end.y);this.ctx.stroke();this.drawArrow(e.end,e.pos1,e.pos2);this.ctx.closePath();if(1<this.direct)for(e=1;e<this.direct;e++)this.drawRect(this.rectArr[e-1],this.rectArr[e]);t==i&&(this.line.stop(),this.direct+=1,5<=this.direct?(this.direct=1,this.rect=this.rectFlash.animation(this,1e3)):this.line=this.lineAnimate.animation(this,500))},getPos:function(t){var i={};switch(this.direct){case 1:i.start={x:this.x,y:this.y};i.end={x:this.x,y:i.start.y+this.drawH*t};i.pos1={x:i.end.x-this.arrowW*this.arrowRate,y:i.end.y-this.arrowW*this.arrowRate};i.pos2={x:i.end.x+this.arrowW*this.arrowRate,y:i.end.y-this.arrowW*this.arrowRate};break;case 2:i.start={x:this.x,y:this.y+this.drawH};i.end={x:this.x+this.drawW*t,y:i.start.y};i.pos1={x:i.end.x-this.arrowW*this.arrowRate,y:i.end.y+this.arrowW*this.arrowRate};i.pos2={x:i.end.x-this.arrowW*this.arrowRate,y:i.end.y-this.arrowW*this.arrowRate};break;case 3:i.start={x:this.x+this.drawW,y:this.y+this.drawH};i.end={x:this.x+this.drawW,y:i.start.y-this.drawH*t};i.pos1={x:i.end.x-this.arrowW*this.arrowRate,y:i.end.y+this.arrowW*this.arrowRate};i.pos2={x:i.end.x+this.arrowW*this.arrowRate,y:i.end.y+this.arrowW*this.arrowRate};break;case 4:i.start={x:this.x+this.drawW,y:this.y},i.end={x:i.start.x-this.drawW*t,y:this.y},i.pos1={x:i.end.x+this.arrowW*this.arrowRate,y:i.end.y+this.arrowW*this.arrowRate},i.pos2={x:i.end.x+this.arrowW*this.arrowRate,y:i.end.y-this.arrowW*this.arrowRate}}return i},drawArrow:function(t,i,e){this.ctx.beginPath();this.ctx.fillStyle="#FF0000";this.ctx.moveTo(t.x,t.y);this.ctx.lineTo(i.x,i.y);this.ctx.lineTo(e.x,e.y);this.ctx.fill();this.ctx.closePath()}}).extend("HighLightHtml");Class("RedCircle",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#ff0000");this.x=this.width/2;this.y=this.height/2;this.drawW=.72*this.width/2;this.drawH=.72*this.height/2},animate:function(){this.drawRound=this.ellipse1Anime.animation(this,800)},stopAnimate:function(){this.drawRound&&this.drawRound.stop();this.scaleRound&&this.scaleRound.stop()},ellipse1Anime:function(t,i){var e=t/i;this.clearCvs();this.ctx.strokeStyle=this.color.toString();this.ctx.lineJoin="round";this.ctx.lineWidth=1;this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,-.5*Math.PI,-.5*Math.PI-2*Math.PI*e,!0);t==i&&(this.scaleRound=this.scaleRoundAnimate.animation(this,400))},scaleRoundAnimate:function(t,i){var e=t/i;this.clearCvs();this.ctx.strokeStyle=this.color.toString();this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,0,2*Math.PI,!0);this.ctx.strokeStyle=this.color.rgba(1-e/3*2);this.ellipse(this.ctx,this.x,this.y,this.drawW+.4*this.drawW*e,this.drawH+.4*this.drawH*e,0,2*Math.PI,!0);t==i&&(this.drawRound&&this.drawRound.stop(),this.clearCvs(),this.ctx.strokeStyle=this.color.toString(),this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,0,2*Math.PI,!0))}}).extend("HighLightHtml");Class("BlueSquare",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.direct=1;this.gradientWidth=this.width;this.height<this.width&&(this.gradientWidth=this.height);this.lineWidth=Math.ceil(.015*this.gradientWidth);1>this.lineWidth&&(this.lineWidth=1);this.x=.14*this.width;this.y=.14*this.height;this.drawW=.72*this.width;this.drawH=.72*this.height;this.overW=this.width-this.drawW;this.overH=this.height-this.drawH},animate:function(){this.rect=this.rectFlash.animation(this,600)},stopAnimate:function(){this.rect&&this.rect.stop();this.timer&&clearTimeout(this.timer)},drawRect:function(t,i){this.ctx.beginPath();this.ctx.strokeStyle="#52A0E9";this.ctx.lineJoin="round";this.ctx.lineWidth=this.lineWidth;this.ctx.moveTo(t.x,t.y);this.ctx.lineTo(i.x,i.y);this.ctx.stroke();this.ctx.closePath()},rectFlash:function(t,i){this.clearCvs();var e=t/i,o=0>t/i*2-1?0:t/i*2-1,s=this.x*e,n=this.y*e,h=this.x*o,a=this.y*o;this.ctx.lineWidth=this.lineWidth;this.ctx.strokeStyle="#52A0E9";this.ctx.strokeRect(s,n,this.width-this.overW*e,this.height-this.overH*e);this.ctx.strokeRect(h,a,this.width-this.overW*o,this.height-this.overH*o);t==i&&(this.rect.stop(),this.clearCvs(),this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH),this.timer=setTimeout(function(){this.rect=this.rectFlash.animation(this,600)}.bind(this),1e3))}}).extend("HighLightHtml");Class("GreenCircleRotate",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#009933");this.x=this.width/2;this.y=this.height/2;this.drawW=.72*this.width/2;this.drawH=.72*this.height/2;this.r=this.drawW>this.drawH?this.drawW:this.drawH;this.ratioX=this.drawW/this.r;this.ratioY=this.drawH/this.r;this.arrowRate=Math.sin(Math.PI/4);this.cos=.87;this.sin=.5;this.arrowW=.1*this.r},animate:function(){this.round=this.ellipseAnime.animation(this,2e3)},stopAnimate:function(){this.round&&this.round.stop()},getPos:function(t){var i={};t=1*Math.PI+2*Math.PI*t;i.end={x:this.x+this.ratioX*this.r*Math.cos(t),y:this.y+this.ratioY*this.r*Math.sin(t)};return i},ellipseAnime:function(t,i){var e=t/i,o=this.getPos(e);this.clearCvs();this.ctx.strokeStyle=this.color.toString();this.ctx.lineJoin="round";this.ctx.lineWidth=1;this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,1.1*Math.PI+2*Math.PI*e,3*Math.PI+2*Math.PI*e);this.drawArrow1(o.end,1*Math.PI+2*Math.PI*e)},drawArrow1:function(t,i){var e=i-Math.PI/3,o=i-Math.PI/6,s=this.x+this.ratioX*this.r*Math.cos(e),e=this.y+this.ratioY*this.r*Math.sin(e);Math.cos(o);Math.sin(o);this.ctx.beginPath();this.ctx.fillStyle="#009933";this.ctx.save();this.ctx.translate(t.x,t.y);this.ctx.rotate(Math.PI/3.2);this.ctx.scale(.15,.15);this.ctx.moveTo(this.x-t.x,this.y-t.y);this.ctx.lineTo(t.x-t.x,t.y-t.y);this.ctx.lineTo(s-t.x,e-t.y);this.ctx.closePath();this.ctx.fill();this.ctx.restore()}}).extend("HighLightHtml");Class("GreenLineLToR",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#009933");this.x=0;this.y=this.height/2;this.endX=this.width;this.endY=this.height/2;this.lineWidth=1},animate:function(){this.line=this.drawLine.animation(this,2e3)},stopAnimate:function(){this.line&&this.line.stop()},drawLine:function(t,i){var e=t/i;this.ctx.beginPath();this.clearCvs();this.ctx.strokeStyle=this.color.toString();this.ctx.lineJoin="round";this.ctx.lineWidth=this.lineWidth;this.ctx.moveTo(this.x,this.y);this.ctx.lineTo(this.x+this.endX*e,this.endY);this.ctx.stroke();this.ctx.closePath();t==i&&this.line.stop()}}).extend("HighLightHtml");Class("GreenLineRToL",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#009933");this.x=this.width;this.y=this.height/2;this.endX=-this.width;this.endY=this.height/2;this.lineWidth=1}}).extend("GreenLineLToR");Class("GreenSquare",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i);this.color=Color("#26E20C")},initConfig:function(){this.freshTime=this.time=1;this.gradientWidth=this.width;this.height<this.width&&(this.gradientWidth=this.height);this.lineWidth=Math.ceil(.015*this.gradientWidth);1>this.lineWidth&&(this.lineWidth=1);this.x=.14*this.width;this.y=.14*this.height;this.showX=.14*this.width;this.showY=1.5*this.height;this.drawW=.72*this.width;this.drawH=.72*this.height},animate:function(){this.rect=this.rectAnime.animation(this,300)},stopAnimate:function(){this.timer&&clearTimeout(this.timer);this.rect&&this.rect.stop();this.fresh&&this.fresh.stop();this.freshTime=this.time=1},drawRect:function(t,i){this.ctx.beginPath();this.ctx.lineJoin="round";this.ctx.lineWidth=this.lineWidth;this.ctx.moveTo(t.x,t.y);this.ctx.lineTo(i.x,i.y);this.ctx.stroke();this.ctx.closePath()},rectAnime:function(t,i){this.clearCvs();var e=t/i;this.ctx.lineWidth=this.lineWidth;this.ctx.strokeStyle=this.color.toString();1<this.time&&this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH);this.ctx.strokeRect(this.showX,this.showY-1.36*this.height*e,this.drawW,this.drawH);t==i&&(this.rect.stop(),this.time+=1,e=100>=300/this.time?100:300/this.time,6<=this.time?this.timer=setTimeout(function(){this.fresh=this.rectFlash.animation(this,300)}.bind(this),500):this.rect=this.rectAnime.animation(this,e))},rectFlash:function(t,i){this.clearCvs();this.ctx.save();var e=t/i,o=this.x-.15*this.drawW*e,s=this.y-.15*this.drawH*e;this.ctx.strokeStyle=this.color.toString();this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH);this.ctx.strokeStyle=this.color.rgba(1-e);this.ctx.strokeRect(o,s,this.drawW+.3*this.drawW*e,this.drawH+.3*this.drawH*e);this.ctx.restore();t==i&&(this.rect.stop(),2>this.freshTime?(this.timer=setTimeout(function(){this.fresh=this.rectFlash.animation(this,300)}.bind(this),300),this.freshTime+=1):(this.clearCvs(),this.ctx.strokeRect(.14*this.width,.14*this.height,this.drawW,this.drawH)))}}).extend("GreenBoxStop");Class("LineSquare",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.animateCase=1;this.color=Color("#0099CC");this.gradientWidth=this.width;this.height<this.width&&(this.gradientWidth=this.height);this.lineWidth=Math.ceil(.015*this.gradientWidth);1>=this.lineWidth&&(this.lineWidth=1);this.x=.14*this.width;this.y=.14*this.height;this.drawW=.72*this.width;this.drawH=.72*this.height},animate:function(){this.line=this.lineAnimate.animation(this,500)},getLeavePos:function(){var t=[];pos1={x:this.x,y:this.y,width:.86*this.width,height:0};pos2={x:.86*this.width,y:this.y,width:0,height:.86*this.height};pos3={x:.86*this.width,y:.86*this.height,width:.86*-this.width,height:0};pos4={x:this.x,y:.86*this.height,width:0,height:0,height:.86*-this.height};t.push(pos1);t.push(pos2);t.push(pos3);t.push(pos4);return t},getPos:function(t){var i=[];pos1={x:this.width-.86*this.width*t,y:this.y,width:.5*this.drawW,height:0};pos2={x:this.x+this.drawW,y:this.height-.86*this.height*t,width:0,height:.5*this.drawH};pos3={x:.86*this.width*t,y:.86*this.height,width:.5*-this.drawW,height:0};pos4={x:this.x,y:.86*this.height*t,width:0,height:0,height:.5*-this.drawH};i.push(pos1);i.push(pos2);i.push(pos3);i.push(pos4);return i},stopAnimate:function(){this.line&&this.line.stop();this.timer&&(clearTimeout(this.timer),this.time=null);this.animateCase=1},drawRect:function(t){this.ctx.save();this.ctx.beginPath();this.ctx.strokeStyle=this.color.rgba(.2);this.ctx.lineJoin="round";this.ctx.lineWidth=this.lineWidth;t&&this.ctx.setLineDash([this.drawW/14]);this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH);this.ctx.closePath();this.ctx.restore()},lineAnimate:function(t,i){var e=t/i;this.ctx.clearRect(0,0,this.width,this.height);this.drawRect(!0);this.ctx.beginPath();this.ctx.strokeStyle=this.color.rgba(e);this.ctx.lineWidth=this.lineWidth;if(1==this.animateCase)var o=this.getPos(e);else 2==this.animateCase?(o=this.getPos(1),this.ctx.strokeStyle=this.color.rgba(1)):(o=this.getLeavePos(),this.ctx.strokeStyle=this.color.rgba(1-e));for(var s=0;s<o.length;s++)1==this.animateCase?(this.ctx.moveTo(o[s].x,o[s].y),this.ctx.lineTo(o[s].x+o[s].width,o[s].y+o[s].height)):2==this.animateCase?(this.ctx.moveTo(o[s].x,o[s].y),this.ctx.lineTo(o[s].x+o[s].width+o[s].width*e,o[s].y+o[s].height+o[s].height*e)):(this.ctx.moveTo(o[s].x+o[s].width*e,o[s].y+o[s].height*e),this.ctx.lineTo(o[s].x+o[s].width*e+.84*o[s].width,o[s].y+o[s].height*e+.84*o[s].height));this.ctx.stroke();this.ctx.closePath();t==i&&(this.animateCase+=1,4<=this.animateCase?(this.animateCase=1,this.timer=setTimeout(function(){this.line=this.lineAnimate.animation(this,500)}.bind(this),1e3)):3==this.animateCase?this.timer=setTimeout(function(){this.line=this.lineAnimate.animation(this,500)}.bind(this),1e3):this.line=this.lineAnimate.animation(this,500))}}).extend("HighLightHtml");Class("OrangeHighLight",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#FFCE6A");this.x=this.width/2;this.y=this.height/2;this.drawW=.92*this.width/2;this.drawH=.92*this.height/2;this.gradientWidth=2*this.drawW;this.drawW>this.drawH&&(this.gradientWidth=2*this.drawH);this.lineWidth=Math.ceil(.04*this.gradientWidth);1>=this.lineWidth&&(this.lineWidth=1)},animate:function(){this.ellipseFlash=this.flashRound.animation(this,1e3)},stopAnimate:function(){this.ellipseFlash&&this.ellipseFlash.stop()},flashRound:function(t,i){var e=t<=i/2?1-t/i*2:t/i*2-1;this.clearCvs();this.ctx.beginPath();this.ctx.strokeStyle=this.color.rgba(e);this.ctx.lineWidth=this.lineWidth;this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,0,2*Math.PI,!0);this.ctx.closePath();t==i&&(this.ellipseFlash&&this.ellipseFlash.stop(),this.ellipseFlash=this.flashRound.animation(this,1e3))}}).extend("HighLightHtml");Class("OrangeCircleLight",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#FF6600");this.x=this.width/2;this.y=this.height/2;this.drawW=.8*this.width/2;this.drawH=.8*this.height/2;this.gradientWidth=2*this.drawW;this.drawW>this.drawH&&(this.gradientWidth=2*this.drawH);this.lineWidth=Math.ceil(.03*this.gradientWidth);1>=this.lineWidth&&(this.lineWidth=1)},animate:function(){this.drawRound=this.ellipseAnime.animation(this,400)},stopAnimate:function(){this.timer&&(clearTimeout(this.timer),this.time=null);this.drawRound&&this.drawRound.stop();this.scaleRound&&this.scaleRound.stop()},ellipseAnime:function(t,i){var e=t/i,o=e;this.clearCvs();this.ctx.lineJoin="round";this.ctx.lineWidth=this.lineWidth;.5>e?(o=1-2*e,e=1-e):o=2*e-1;this.ctx.strokeStyle=this.color.rgba(o);this.ellipse(this.ctx,this.x,this.y,this.drawW*e,this.drawH*e,0,2*Math.PI,!0);t==i&&(this.scaleRound=this.scaleRoundAnimate.animation(this,400))},scaleRoundAnimate:function(t,i){var e=t/i;this.clearCvs();this.ctx.strokeStyle=this.color.toString();this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,0,2*Math.PI,!0);this.ctx.save();this.ctx.strokeStyle=this.color.rgba(1-e/3*2);this.ctx.lineWidth=1>this.lineWidth/2?1:this.lineWidth/2;this.ellipse(this.ctx,this.x,this.y,this.drawW+.3*this.drawW*e,this.drawH+.3*this.drawH*e,0,2*Math.PI,!0);this.ellipse(this.ctx,this.x,this.y,this.drawW+.25*this.drawW*e,this.drawH+.25*this.drawH*e,0,2*Math.PI,!0);this.ctx.restore();t==i&&(this.clearCvs(),this.ellipse(this.ctx,this.x,this.y,this.drawW,this.drawH,0,2*Math.PI,!0),this.timer=setTimeout(function(){this.drawRound=this.ellipseAnime.animation(this,400)}.bind(this),1e3))}}).extend("HighLightHtml");Class("PushSquare",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.animateCase=1;this.color=Color("#FF6600");this.gradientWidth=this.width;this.height<this.width&&(this.gradientWidth=this.height);this.lineWidth=Math.ceil(.015*this.gradientWidth);1>=this.lineWidth&&(this.lineWidth=1);this.x=.14*this.width;this.y=.14*this.height;this.drawW=.72*this.width;this.drawH=.72*this.height},animate:function(){this.line=this.lineAnimate.animation(this,400)},stopAnimate:function(){this.line&&this.line.stop();this.timer&&(clearTimeout(this.timer),this.time=null);this.animateCase=1},drawDashRect:function(t,i){this.ctx.save();this.ctx.beginPath();this.ctx.strokeStyle=this.color.rgba(t);this.ctx.lineJoin="round";this.ctx.lineWidth=this.lineWidth;i&&this.ctx.setLineDash([this.drawW/14]);this.ctx.strokeRect(this.x+this.drawW/2-this.drawW/2*t,this.y+this.drawH/2-this.drawH/2*t,this.drawW*t,this.drawH*t);this.ctx.closePath();this.ctx.restore()},drawHalfRect:function(t,i){if(0!=i%2){var e=this.x*t;this.ctx.moveTo(e+this.drawW/4,this.y);this.ctx.lineTo(e,this.y);this.ctx.lineTo(e,this.y+this.drawH);this.ctx.lineTo(e+this.drawW/4,this.y+this.drawH);this.ctx.stroke();e=this.width-this.x*t;this.ctx.moveTo(e-this.drawW/4,this.y);this.ctx.lineTo(e,this.y);this.ctx.lineTo(e,this.y+this.drawH);this.ctx.lineTo(e-this.drawW/4,this.y+this.drawH)}else e=this.y*t,this.ctx.moveTo(this.x,e+this.drawH/4),this.ctx.lineTo(this.x,e),this.ctx.lineTo(this.x+this.drawW,e),this.ctx.lineTo(this.x+this.drawW,e+this.drawH/4),this.ctx.stroke(),e=this.height-this.y*t,this.ctx.moveTo(this.x,e-this.drawH/4),this.ctx.lineTo(this.x,e),this.ctx.lineTo(this.x+this.drawW,e),this.ctx.lineTo(this.x+this.drawW,e-this.drawH/4);this.ctx.stroke()},lineAnimate:function(t,i){var e=t/i;this.ctx.clearRect(0,0,this.width,this.height);this.ctx.beginPath();this.ctx.strokeStyle=this.color.rgba(e);this.ctx.lineWidth=this.lineWidth;4==this.animateCase&&this.drawDashRect(e,!0);this.drawHalfRect(e,this.animateCase);t==i&&(this.animateCase+=1,5<=this.animateCase?(this.drawDashRect(1),this.animateCase=1,this.timer=setTimeout(function(){this.line=this.lineAnimate.animation(this,400)}.bind(this),1e3)):this.line=this.lineAnimate.animation(this,400))}}).extend("HighLightHtml");Class("RedBoxBlink",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.gradientWidth=this.width;this.overSize=this.height-this.width;this.height<this.width&&(this.gradientWidth=this.height,this.overSize=this.width-this.height);this.x=.05*this.width;this.y=.05*this.height;this.drawW=.9*this.width;this.drawH=.9*this.height;this.color=Color("#FF0000")},animate:function(){this.drawBox(1);this.timer=setTimeout(function(){this.boxFlash=this.boxFlashAnimate.animation(this,600)}.bind(this),800)},stopAnimate:function(){this.boxFlash&&this.boxFlash.stop();this.timer&&(clearTimeout(this.timer),this.time=null)},drawBox:function(t){this.ctx.beginPath();this.ctx.strokeStyle=this.color.rgba(t);this.ctx.lineJoin="round";this.ctx.lineWidth=1;this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH);this.ctx.closePath()},boxFlashAnimate:function(t,i){this.clearCvs();this.drawBox(t<=i/2?1-t/i*2:t/i*2-1);t==i&&(this.boxFlash&&this.boxFlash.stop(),this.timer=setTimeout(function(){this.boxFlash=this.boxFlashAnimate.animation(this,600)}.bind(this),800))}}).extend("GreenBoxStop");Class("RedHighLight",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this._super();this.color=Color("#FF0000")}}).extend("OrangeHighLight");Class("RedLineBlink",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#ff0000");this.x=0;this.y=this.height/2;this.endX=this.width;this.endY=this.height/2;this.lineWidth=1},animate:function(){this.drawLine(1);this.timer=setTimeout(function(){this.line=this.drawLineAnimate.animation(this,600)}.bind(this),800)},stopAnimate:function(){this.line&&this.line.stop();this.timer&&(clearTimeout(this.timer),this.timer=null)},drawLine:function(t){this.clearCvs();this.ctx.beginPath();this.ctx.strokeStyle=this.color.rgba(t);this.ctx.lineJoin="round";this.ctx.lineWidth=1;this.ctx.moveTo(this.x,this.y);this.ctx.lineTo(this.endX,this.endY);this.ctx.stroke();this.ctx.closePath()},drawLineAnimate:function(t,i){this.drawLine(t/i);t==i&&(this.timer=setTimeout(function(){this.line=this.drawLineAnimate.animation(this,600)}.bind(this),800))}}).extend("HighLightHtml");Class("RedLineLToR",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#FF0000");this.x=0;this.y=this.height/2;this.endX=this.width;this.endY=this.height/2;this.lineWidth=1}}).extend("GreenLineLToR");Class("RedLineRToL",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i)},initConfig:function(){this.color=Color("#FF0000");this.x=this.width;this.y=this.height/2;this.endX=-this.width;this.endY=this.height/2;this.lineWidth=1}}).extend("GreenLineLToR");Class("SpinSquare",{Package:"PageItem.HighLight",create:function(t,i){this._super(t,i);this.color=Color("#52A0E9")},initConfig:function(){this.freshTime=this.time=1;this.gradientWidth=this.width;this.height<this.width&&(this.gradientWidth=this.height);this.lineWidth=Math.ceil(.015*this.gradientWidth);1>this.lineWidth&&(this.lineWidth=1);this.x=.14*this.width;this.y=.14*this.height;this.drawW=.72*this.width;this.drawH=.72*this.height},animate:function(){this.rect=this.rectAnime.animation(this,400)},stopAnimate:function(){this.timer&&clearTimeout(this.timer);this.rect&&this.rect.stop();this.fresh&&this.fresh.stop();this.freshTime=this.time=1},drawRect:function(t,i){this.ctx.beginPath();this.ctx.lineJoin="round";this.ctx.lineWidth=this.lineWidth;this.ctx.moveTo(t.x,t.y);this.ctx.lineTo(i.x,i.y);this.ctx.stroke();this.ctx.closePath()},rectAnime:function(t,i){this.clearCvs();var e=1-t/i;this.ctx.lineWidth=this.lineWidth;this.ctx.strokeStyle=this.color.toString();1<this.time&&this.ctx.strokeRect(this.x,this.y,this.drawW,this.drawH);0<this.time?(this.ctx.save(),this.ctx.translate(this.width/2,this.height/2),this.ctx.rotate(Math.PI/2*e)):(e=t/i,this.ctx.save(),this.ctx.strokeStyle=this.color.rgba(1-e),this.ctx.translate(this.width/2,this.height/2),this.ctx.rotate(Math.PI/2*e),this.ctx.strokeRect(this.x-this.width/2,this.y-this.height/2,this.drawW,this.drawH),this.ctx.restore(),this.ctx.save(),this.ctx.strokeStyle=this.color.rgba(1-e),this.ctx.translate(this.width/2,this.height/2),this.ctx.rotate(-Math.PI/2*e));this.ctx.strokeRect(this.x-this.width/2,this.y-this.height/2,this.drawW,this.drawH);this.ctx.restore();t==i&&(0==this.time?(this.time+=1,this.timer=setTimeout(function(){this.rect=this.rectAnime.animation(this,500)}.bind(this),800)):(this.time+=1,e=250>=400/this.time?250:400/this.time,4<=this.time?(this.time=0,this.timer=setTimeout(function(){this.rect=this.rectAnime.animation(this,400)}.bind(this),800)):this.rect=this.rectAnime.animation(this,e)))}}).extend("GreenBoxStop");Class("Youtube",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);null!=this.config.id&&(this.firstTime=!0,this.animateConfig(),this.width=Number(this.config.width)*this.pageWidth,this.height=Number(this.config.height)*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,t=this.config.id,-1<t.indexOf("/")&&(i=-1<t.indexOf("?v=")?t.lastIndexOf("?v=")+3:t.lastIndexOf("/")+1,t=t.substring(i,t.length)),i="https"==(window.location.href?window.location.href.toLowerCase():"http:").substring(0,5)?"https":"http",this.youtubeFrame=new Media($("<iframe id='player' class='youtube-player flip-action' type='text/html' width='"+this.width+"' height='"+this.height+"' src='"+i+"://www.youtube.com/embed/"+t+"?enablejsapi=1&rel=0' frameborder='0' allowfullscreen='1' style='position: absolute; opacity: "+this.config.alpha+"; left:"+this.x+"px; top:"+this.y+"px;'></iframe>"),"youtube"),this.config.rotation&&this.setRotation(this.youtubeFrame.$media,this.config.rotation),this.parent.append(this.youtubeFrame.$media))},setTransOrigin:function(t,i){this.youtubeFrame.setCss({"-webkit-transform-origin":t+"px "+i+"px","-o-transform-origin":t+"px "+i+"px","-moz-transform-origin":t+"px "+i+"px","-ms-transform-origin":t+"px "+i+"px","transform-origin":t+"px "+i+"px"})},parseConfig:function(t){return{width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,alpha:t.alpha,id:t.videoId?t.videoId:t.videoID,moviePlayTriggerEvt:t.moviePlayTriggerEvt,playerParameters:t.playerParameters,movieStopTriggerEvt:t.movieStopTriggerEvt,rotation:t.location.rotation,animation:t.animation}},initCss:function(){this.youtubeFrame.setCss({width:this.width+"px",height:this.height+"px",top:this.y+"px",left:this.x+"px"})},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.youtubeFrame.setCss({width:this.width+"px",height:this.height+"px"});this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.youtubeFrame.setCss({top:this.y+"px",left:this.x+"px"})},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},pauseVideo:function(){this.youtubeFrame&&this.youtubeFrame.pause()},playVideo:function(){this.youtubeFrame&&(this.firstTime?(this.youtubeFrame.$media.on("load",function(){this.youtubeFrame.play()}.bind(this)),this.firstTime=!1):this.youtubeFrame.play())},hide:function(){this.youtubeFrame&&(this.youtubeFrame.setCss({width:"0px",height:"0px"}),this.youtubeFrame.setCss({display:"none"}))},show:function(){this.youtubeFrame&&(this.youtubeFrame.setCss({width:this.width+"px",height:this.height+"px"}),this.youtubeFrame.setCss({display:"block"}))},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.youtubeFrame.setCss({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.youtubeFrame.$media.one(t,function(){this.youtubeFrame.setCss({animation:""})}.bind(this))}}}).extend("Item");Class("Video",{Package:"PageItem",create:function(t,i,e,o,s){this.config=this.parseConfig(i);this.animateConfig();this.parent=t;this.pageWidth=e;this.pageHeight=o;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.playCount=0;this.content=$("<div class='flip-action'></div>");this.content.css({position:"absolute",overflow:"hidden",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",opacity:this.config.alpha,"background-color":"black"});this.setRotation(this.content,this.config.rotation);this.parent.append(this.content);"string"==typeof this.config.previewSrc&&""!=this.config.previewSrc&&null!=this.config.previewSrc&&void 0!=this.config.previewSrc&&(this.config.previewSrc=this.fixRelativePath(this.config.previewSrc),bookConfig.useTheAliCloudChart&&(this.config.previewSrc=this.getOssUrl(this.config.previewSrc,this.width,this.height,"fixed")));if("string"==typeof this.config.src){if(t=this.config.src.match(/(.mp4|.flv|.f4v)\b/),null==this.config.src||null==t)return}else if(this.config.src=={})return;this.config.src=this.fixRelativePath(this.config.src);this.video=null;this.video=new Media($('<video controls preload="metadata" webkit-playsinline="true" playsinline="true" ><source src="'+this.config.src+'"/></video>'),"video");this.video.setCss({position:"absolute","z-index":1,left:"0px","object-fit":"fill",top:"0px",width:"100%",height:"100%"});this.config.previewSrc&&this.video.$media.attr("poster",this.config.previewSrc);this.content.append(this.video.$media);void 0!=this.video.$media[0].play&&(this.videoSkin=this.content.addVideoSkin(s,this.video),this.video.$media.removeAttr("controls"));this.content.bind(_event._down,function(t){t.stopPropagation()});this.video.$media.bind(_event._down,function(t){t.stopPropagation()});this.video.$media.keydown(function(t){t.preventDefault();t.stopPropagation()}.bind(this));this.video.$media.keyup(function(t){t.preventDefault();t.stopPropagation()}.bind(this));parseBool(this.config.reflection)&&this.imageReflection(this.content,this.width,this.height);parseBool(this.config.shadow.hasDropShadow)&&this.addShadow(this.content);this.video.$media.bind("click mousedown mouseup DOMMouseScroll mousewheel",function(t){t.stopPropagation()}.bind(this));this.initLoopEvent();this.config.prompt&&this.config.promptTime&&this.video.$media.bind("loadedmetadata",function(t){t=[];for(var i=this.config.prompt.split("|"),e=this.config.promptTime.split("|"),o=0;o<i.length;o++)i[o]&&t.push({time:e[o],text:i[o]});this.videoSkin.initPrompt(t)}.bind(this))},initLoopEvent:function(){0>this.config.H5PlaybackNumber&&this.video.$media.attr("loop","loop");0<this.config.H5PlaybackNumber&&this.video.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.playVideo()}.bind(this));this.video.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.content.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.content.one(t,function(){this.content.css({animation:""})}.bind(this))}},parseConfig:function(t){var i={width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,shadow:t.shadow,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,previewSrc:t.previewUrl,prompt:t.prompt,promptTime:t.promptTime,moviePlayTriggerEvt:t.moviePlayTriggerEvt?t.moviePlayTriggerEvt:t.PlayTriggerEvt,movieStopTriggerEvt:t.movieStopTriggerEvt?t.movieStopTriggerEvt:t.StopTriggerEvt,replayWhenPlayEventTrigger:t.replayWhenPlayEventTrigger,animation:t.animation};t.H5PlaybackNumber&&(i.H5PlaybackNumber=parseInt(t.H5PlaybackNumber));t.H5Replay&&(i.H5Replay=parseBool(t.H5Replay));t.componentData&&(i.moviePlayTriggerEvt=t.componentData.playEvt,i.movieStopTriggerEvt=t.componentData.stopEvt,t.componentData.previewURL&&(i.previewSrc=t.componentData.previewURL),t.componentData.imgURL&&(i.previewSrc=t.componentData.imgURL));t.previewURL&&(i.previewSrc=t.previewURL);void 0!=t.videoURL&&(i.src=t.videoURL);void 0!=t.url&&(i.src=t.url);t.componentData&&(i.src=t.componentData.videoURL);parseBool(t.shadow.hasDropShadow)&&(i.hasShadow=!0);return i},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.content.css({"background-size":this.width+"px "+this.height+"px"});if(this.videoSkin)this.videoSkin.onResize();this.setPosition()},setPosition:function(){this.x=this.pageWidth*this.config.x;this.y=this.pageHeight*this.config.y;this.content.css({left:this.x+"px",top:this.y+"px"})},playVideo:function(){if(null!=this.video)try{this.video.play(),this.videoSkin.play()}catch(t){}},stopVideo:function(){if(null!=this.video)try{this.video.pause(),this.videoSkin.stop()}catch(t){}},pauseVideo:function(){if(null!=this.video)try{this.video.pause(),this.videoSkin.pause()}catch(t){}},backTime:function(){this.playCount=0;this.video.$media[0]&&(this.video.$media[0].currentTime=0)},isReplay:function(){return this.config.H5Replay},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},getPlayStatuEnded:function(){return this.video.$media[0].ended},getReplayWhenPlayEvent:function(){return this.config.replayWhenPlayEventTrigger},getTotalTime:function(){return this.video.$media[0].duration},getCurrentTime:function(){return this.video.$media[0].currentTime},setCurrentTime:function(t){this.video.$media[0].currentTime=t}}).extend(PageItem.Item);Class("Vimeo",{Package:"PageItem",create:function(t,i,e,o,s){this.config=this.parseConfig(i);this.vimeoFrame=null;null!=this.config.id&&(this.animateConfig(),this.pageWidth=e,this.pageHeight=o,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.config.id+="",i=this.config.id.lastIndexOf("/"),i=this.config.id.substring(i+1),e="https"==(window.location.href?window.location.href.toLowerCase():"http:").substring(0,5)?"https":"http",i=$("<iframe id = vimeoPlay width='"+this.width+"' height='"+this.height+"' src='"+e+"://player.vimeo.com/video/"+i+"'  frameborder='0' class='flip-action' style='position: absolute;opacity:"+this.config.alpha+"; left:"+this.x+"px; top:"+this.y+"px;'  webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>"),this.vimeoFrame=new Media(i,"vimeo",this.getPlayEvt()),t.append(this.vimeoFrame.$media))},parseConfig:function(t){return{width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,alpha:t.alpha,id:t.videoID?t.videoID:t.videoId,moviePlayTriggerEvt:t.moviePlayTriggerEvt,movieStopTriggerEvt:t.movieStopTriggerEvt,playerParameters:t.playerParameters,animation:t.animation}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.vimeoFrame.setCss({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.config.x*this.pageWidth,this.config.y*this.pageHeight)},playVideo:function(){this.vimeoFrame&&this.vimeoFrame.play()},pauseVideo:function(){this.vimeoFrame&&this.vimeoFrame.pause()},setPosition:function(t,i){this.vimeoFrame.setCss({top:i+"px",left:t+"px"})},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.vimeoFrame.setCss({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.vimeoFrame.$media.one(t,function(){this.vimeoFrame.setCss({animation:""})}.bind(this))}},hide:function(){this.vimeoFrame.setCss({display:"none"})},show:function(){this.vimeoFrame.setCss({display:"block"})}}).extend("Item");Class("PopUpVimeo",{Package:"PageItem",create:function(t,i,e,o,s){this.config=this.parseConfig(i);this.type=s;this.parent=t;this.vimeoFrame=null;null!=this.config.id&&(this.pageWidth=e,this.pageHeight=o,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.vimeoDiv=$("<div class='flip-action'></div>"),this.vimeoDiv.css({width:this.width+"px",height:this.height+"px",left:this.x+"px",top:this.y+"px",opacity:this.config.alpha,position:"absolute",cursor:"pointer","background-color":"rgba(0,0,0,0.5)"}),this.url=this.config.url,this.vimeoImage=$("<img src='"+this.url+"'style='position: absolute;cursor:pointer;width:"+this.width+"px;height:"+this.height+"px;z-index:100'/>"),this.config.url&&"null"!=this.config.url||this.vimeoImage.css({display:"none"}),bookConfig.isFlipPdf&&(this.config.url.startsWith("./")?this.config.url="."+this.config.url:this.config.url.isUrl()||(this.config.url="../"+this.config.url)),this.parent.append(this.vimeoDiv),this.vimeoDiv.append(this.vimeoImage),this.vimeoDiv.bind(_event._down,function(t){t.stopPropagation()}.bind(this)),this.vimeoDiv.bind(_event._end,function(t){this.popupVideo=new PopUpVideo(this.config,s);this.popupVideo.background.show();t.stopPropagation()}.bind(this)))},parseConfig:function(t){return{width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,alpha:t.alpha,id:t.videoID,moviePlayTriggerEvt:t.moviePlayTriggerEvt,movieStopTriggerEvt:t.movieStopTriggerEvt,playerParameters:t.playerParameters,url:t.url,autoPlay:t.autoPlay}},destroy:function(){this.popupVideo&&this.popupVideo.destroy();this.vimeoDiv.empty();this.vimeoDiv.remove()},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;if(this.popupVideo)this.popupVideo.onResize(this.pageWidth,this.pageHeight);this.vimeoDiv.css({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.config.x*this.pageWidth,this.config.y*this.pageHeight)},setPosition:function(t,i){this.vimeoDiv.css({top:i+"px",left:t+"px"})}});var PopUpVideo=Class({create:function(t,i){this.config=$.extend({id:null,alpha:1},t);this.config.id+="";this.type=i;this.vimeoWidth=480;this.vimeoHeight=320;this.background=$("<div id='popup' class='flip-action' ></div>");this.vimeoBac=$("<div></div>");this.vimeoBorder=$("<div></div>");this.title=$("<div></div>");this.config.caption&&this.title.html(this.config.caption);"right"==this.config.languageLayout&&this.title.css({"text-align":"right",direction:"rtl"});this.initVideo(i);tmpContainer.append(this.background);this.background.append(this.vimeoBac);this.vimeoBac.append(this.vimeoBorder);this.vimeoBorder.append(this.vimeoFrame.$media);this.closeButton=$("<img src='"+uiBaseURL+"close_form.png'/>");this.vimeoBorder.append(this.closeButton).append(this.title);this.initStyle();this.initEvents();this.onResize();this.vimeoFrame.play();this.resizeTimer=this.onResize.interval(this,500);this.visible=!0},initVideo:function(t){var i="https"==(window.location.href?window.location.href.toLowerCase():"http:").substring(0,5)?"https":"http";if("vimeo"==t){var e=this.config.id.lastIndexOf("/"),e=this.config.id.substring(e+1),o="";"true"==this.config.autoPlay&&(o="?autoplay=1&muted=1&autopause=0");e=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+i+"://player.vimeo.com/video/"+e+o+"' frameborder='0' style='position: absolute;background:#000000;' allow = 'autoplay'  webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>");this.vimeoFrame=new Media(e,"vimeo")}"youtube"==t&&(e=this.config.id,-1<e.indexOf("/")&&(o=-1<e.indexOf("?v=")?e.lastIndexOf("?v=")+3:e.lastIndexOf("/")+1,e=e.substring(o,e.length)),e=$("<iframe class='youtube-player' type='text/html' width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+i+"://www.youtube.com/embed/"+e+"?autoplay=1&mute=1' frameborder='0' allowfullscreen='1' style='position: absolute; opacity: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(e,"youtube"));"dailymotion"==t&&(e=$("<iframe id=woiframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+i+"://www.dailymotion.com/embed/video/"+this.config.id+"' frameborder='0' allowFullScreen style='position: absolute; opacity: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(e,"dailymotion"));"wistia"==t&&(e=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+i+"://fast.wistia.net/embed/iframe/"+this.config.id+"' frameborder='0' allowfullscreen style='position:absolute;opactiy: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(e,"wistia"));"youku"==t&&(e=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+i+"://player.youku.com/embed/"+this.config.id+"' frameborder='0' allowfullscreen style='position:absolute;opactiy: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(e,"youku"));"qq"==t&&(e=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+i+"://v.qq.com/iframe/player.html?vid="+this.config.id+"' frameborder='0' allowfullscreen style='position:absolute;opactiy: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(e,"qq"))},initStyle:function(){this.background.css({position:"absolute",width:"100%",height:"100%","z-index":100});this.vimeoBac.css({width:"100%",height:"100%","background-color":"rgba(0,0,0,0.5)"});this.vimeoBorder.css({position:"absolute","z-index":"11","background-color":"#F0F0F0","border-radius":"3px",margin:"auto",left:"0",top:"0",bottom:"0",right:"0"});this.closeButton.css({position:"absolute","z-index":"1",width:"32px",height:"32px",cursor:"pointer",right:"5px",top:"0px"});this.vimeoFrame.setCss({background:"#F0F0F0",position:"relative","margin-left":"5px","margin-top":"32px"});this.title.css({position:"absolute","font-size":"16px",top:"5px",left:"5px"});"right"==this.config.languageLayout&&(this.title.css({left:"auto",right:"5px"}),this.closeButton.css({right:"auto",left:"5px"}))},initEvents:function(){this.vimeoBac.bind(_event._down,function(t){this.destroy();t.stopPropagation();return!1}.bind(this));this.vimeoBorder.bind(_event._down,function(t){t.stopPropagation();return!1}.bind(this));this.closeButton.asButton();this.closeButton.bind(_event._click,function(t){this.destroy();t.stopPropagation();return!1}.bind(this))},destroy:function(){this.visible&&(this.vimeoFrame.pause(),this.visible=!1,this.vimeoFrame.$media.attr("src",""),this.background.empty(),this.background.remove(),this.resizeTimer&&this.resizeTimer.stop())},showOrHide:function(){!1===this.visible?this.show():this.hide()},hide:function(){this.visible=!1;this.background.css({display:"none"})},show:function(){this.visible=!0;this.vimeoFrame.play();this.background.css({display:"block"})},onResize:function(){if(this.windowWidth!=windowWidth||this.windowHeight!=windowHeight){this.windowWidth=windowWidth;this.windowHeight=windowHeight;var t=windowWidth-10,i=windowHeight-10;if(isPhone()){var e=337/490;i/t>e?i=t*e:t=i/e}else t=Math.min(490,t),i=Math.min(337,i);this.vimeoBorder.css({width:t+"px",height:i+"px"});i-=37;this.vimeoFrame&&(this.vimeoFrame.$media.attr("width",t-10+"px"),this.vimeoFrame.$media.attr("height",i+"px"))}},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt}});Class("HtmlVideo",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.container=$("<div class='flip-action'></div>");this.initVideoFrame();this.config.rotation&&this.setRotation(this.container,this.config.rotation);this.parent.append(this.container);this.initCss()},initVideoFrame:function(){if(this.config.generalCode){if(this.config.generalCode.startsWith("www")){var i="http://"+this.config.generalCode;try{$.ajax({url:i,type:"GET",dataType:"jsonp",timeout:3e3,complete:function(t){200!=t.status&&(i="https://"+this.config.generalCode)}})}catch(t){}this.config.generalCode=i}if(this.config.generalCode.startsWith("http")||this.config.generalCode.startsWith("https"))this.videoFrame=$("<iframe id='player' type='text/html' width='"+this.width+"' height='"+this.height+"' src='"+this.config.generalCode+"' frameborder='0' allowfullscreen='1' style='position: absolute; '></iframe>");else if(/^(<iframe|<embed).*(<\/iframe>|<\/embed>).*$/.test(this.config.generalCode)){if("http:"==window.location.protocol||"https:"==window.location.protocol)this.config.generalCode=this.config.generalCode.replace("http:","").replace("https:","");this.videoFrame=$(this.config.generalCode)}}},parseConfig:function(t){return{width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,alpha:t.alpha,rotation:t.location.rotation,generalCode:t.generalCode,animation:t.animation}},initCss:function(){this.container.css({background:"#f8f8f8",position:"absolute",opacity:this.config.opacity,width:this.width+"px",height:this.height+"px"})},onResize:function(t,i){this.config.generalCode&&this.videoFrame&&(this.pageWidth=t,this.pageHeight=i,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.videoFrame.css({width:this.width+"px",height:this.height+"px"}),this.container.css({width:this.width+"px",height:this.height+"px"}),this.setPosition())},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({top:this.y+"px",left:this.x+"px"})},hide:function(){this.videoFrame&&(this.container.css({display:"none"}),this.videoFrame.remove())},show:function(){this.videoFrame&&(this.container.find(this.videoFrame)&&this.container.append(this.videoFrame),this.container.css({display:"block"}))},showAnimate:function(){if(this.videoFrame&&this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.videoFrame.$media.one(t,function(){this.container.css({animation:""})}.bind(this))}}}).extend("Item");global.hddr.soo4=function(t){return t||".com"};Class("Audio",{Package:"PageItem",background:!1,create:function(t,i,e,o,s){this._super(t,i,e,o);this.config.src&&(this.animateConfig(),this.audio=null,this.defaultWidth=e,this.themeName=s,this.resizeThemes={default:"",wave:""},this.type="com.mobiano.flipbook.sound.TAnnoBackgroundSound",this.playCount=0,this.pageWidth=e,this.pageHeight=o,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.config.mainColor&&(this.mainColor=Color(this.config.mainColor).toString()),this.initUI(),this.setRotation(this.content,this.config.rotation),this.setAudioSrc(),this.setAudioSkin(),this.initLoopEvent())},initUI:function(){this.content=$("<div class='audioContent flip-action'></div>");this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px","background-color":this.mainColor,opacity:this.config.alpha});this.parent.append(this.content);this.audio=new Media($("<audio controls ></audio>"),"audio");this.audio.setCss({position:"absolute",width:"0px",height:"0px",left:"0px",top:"0px"});this.config.shadow&&parseBool(this.config.shadow.hasDropShadow)&&this.addShadow(this.content)},setAudioSrc:function(){var t=this.config.key;this.content.audioResources=[];if(void 0==t)this.config.src=this.fixRelativePath(this.config.src),this.audio.$media.attr("src",this.config.src),this.content.audioResources.push(this.config.src);else if(t in this.config.src)e=this.config.src[t],e=this.fixRelativePath(e),this.content.audioResources.push(e),this.audio.$media.attr("src",e);else for(var i=0;i<this.config.src.length;i++){var e=this.config.src[i][t],e=this.fixRelativePath(e);this.content.audioResources.push(e);var o=$("<source src='"+e+"'>");this.audio.$media.append(o);0==i&&this.audio.$media.attr("src",e)}this.content.append(this.audio.$media)},setAudioSkin:function(){void 0!=this.audio.$media[0]&&"background0"!=this.themeName&&(this.audioSkin=this.content.addAudioSkin(this.themeName,this.audio),this.audio.$media.removeAttr("controls"));this.audioSkin&&"BackgroundAudioSkin"==this.audioSkin.getClassName()&&(this.config.soundPlayTriggerEvt=PageEditor.PlayEvt.EVT_PLAY,this.config.soundStopTriggerEvt=PageEditor.PlayEvt.EVT_STOP);this.resizeThemes={default:"",wave:"",skin1:"",skin2:""};this.themeName in this.resizeThemes||void 0==this.themeName?(this.content.css({width:this.width+"px",height:this.height+"px"}),this.audioSkin.onResize(),"skin1"!=this.themeName&&"skin2"!=this.themeName||this.content.find(".volume-seek.slider-action").css({height:"26px"})):this.resizeAudio(this.pageWidth,this.pageHeight)},initLoopEvent:function(){0>this.config.H5PlaybackNumber&&this.audio.$media.attr("loop","loop");0<this.config.H5PlaybackNumber&&this.audio.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.playAudio()}.bind(this));this.audio.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},parseConfig:function(t){function i(t){if("object"!=typeof t)return!1;if(t instanceof Array)return 0==t.length;var i=0,e;for(e in t)i++;return 0==i}var e={rotation:t.location.rotation,width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,alpha:t.alpha,src:t.soundURL,shadow:t.shadow,className:t.className,mainColor:t.mainColor,soundPlayTriggerEvt:t.soundPlayTriggerEvt,soundStopTriggerEvt:t.soundStopTriggerEvt,animation:t.animation};void 0!=t.replay?e.H5PlaybackNumber=parseInt(t.replay):void 0!=t.H5PlaybackNumber&&(e.H5PlaybackNumber=parseInt(t.H5PlaybackNumber));t.annotype==PageEditor.AnnoType.ANNO_AUDIO1&&(e.key="path",e.src=i(t.soundList)?"":t.soundList,e.src.sound&&(e.src=e.src.sound));t.annotype==PageEditor.AnnoType.ANNO_AUDIO2&&(e.key="fname",e.src=i(t.data)?"":t.data,e.src.item&&(e.src=e.src.item));t.annotype==PageEditor.AnnoType.ANNO_PLUGIN&&t.className in audioThemeNames&&(e.key="url",e.src=t.componentData&&t&&!i(t.componentData.songs)&&void 0!=t.componentData.songs?t.componentData.songs.song?t.componentData.songs.song:t.componentData.songs.url?t.componentData.songs.url:t.componentData.songs:{},e.soundPlayTriggerEvt=t.soundPlayTriggerEvt||t.componentData.playEvt,e.soundStopTriggerEvt=t.soundStopTriggerEvt||t.componentData.stopEvt);t.shadow&&parseBool(t.shadow.hasDropShadow)&&(e.hasShadow=!0);return e},onResize:function(t,i){if(this.content){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;if(this.themeName in this.resizeThemes||void 0==this.themeName){if("skin1"==this.themeName||"skin2"==this.themeName){this.resizeSkin1_2();this.setPosition();return}this.content.css({width:this.width+"px",height:this.height+"px"});this.audioSkin.onResize();this.backgroundDiv&&this.backgroundDiv.css({width:this.width+"px",height:this.height+"px"})}else this.resizeAudio(t,i);this.setPosition()}},resizeSkin1_2:function(){var t=this.pageWidth/this.defaultWidth;this.content.css({height:"26px"});this.content.find(".volume-seek.slider-action").css({height:"26px"});this.content.css({"transform-origin":"0 0","-o-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","-webkit-transform-origin":"0 0",transform:"scale("+t+")","-webkit-transform":"scale("+t+")","-ms-transform":"scale("+t+")","-o-transform":"scale("+t+")","-moz-transform":"scale("+t+")"})},resizeAudio:function(t,i){this.audioContentWidth||(this.audioContentWidth=this.content.width());this.audioContentHeight||(this.audioContentHeight=this.content.height());if(this.audioContentWidth){var e=Math.min(this.config.width*t/this.audioContentWidth,this.config.height*i/this.audioContentHeight);this.content.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+e+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+e+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+e+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+e+") rotate("+this.config.rotation+"deg)",transform:"scale("+e+") rotate("+this.config.rotation+"deg)"});this.audioSkin.refreshSeek();this.audioSkin.onResize()}else this.resizeAudio.delay(this,100,[t,i])},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"});this.backgroundDiv&&this.backgroundDiv.css({left:this.x+"px",top:this.y+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.content.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.content.one(t,function(){this.content.css({animation:""})}.bind(this))}},playAudio:function(){if(null!=this.audio)try{this.audio.play()}catch(t){}},pauseAudio:function(){if(null!=this.audio)try{this.audio.pause()}catch(t){}},stopAudio:function(){if(null!=this.audio)try{this.audio.pause(),this.audio.setCurrentTime(0)}catch(t){}},backTime:function(){this.playCount=0;this.audio.setCurrentTime(0)},isReplay:function(){return this.config.H5Replay},getPlayEvt:function(){return this.config.soundPlayTriggerEvt},getStopEvt:function(){return this.config.soundStopTriggerEvt},isBackgroundAudio:function(){return this.background}}).extend("Item");Class("AudioEditor",{create:function(t,i,e,o,s,n){this.parent=t;this.enterPlay=parseBool(e);this.autoPlayAgain=parseBool(o);s&&(this.H5PlaybackNumber=parseInt(s));n&&(this.H5Replay=parseBool(n));this.playCount=0;this.background=$("<div class='printBar'></div>");this.contentBox=$("<div class='printBG'></div>");this.closeButton=$("<div></div>");this.showing=!1;this.width=windowWidth;this.height=windowHeight;bookConfig.isFlipPdf&&(i.startsWith("./")?i="."+i:i.isUrl()||(i="../"+i));this.audioSrc=i;this.contentWidth=350;this.contentHeight=63;this.themeName="enjoy";isPhone()&&(this.themeName="background",this.contentHeight=this.contentWidth=100);this.audio=new Media($("<audio controls ></audio>"),"audio");this.contentBox.audioResources=[];this.audio.$media.attr("src",this.audioSrc);this.contentBox.audioResources.push(this.audioSrc);this.contentBox.append(this.audio.$media);void 0!=this.audio.$media[0].play&&"background0"!=this.themeName&&(this.contentBox.addAudioSkin(this.themeName,this.audio),this.audio.$media.removeAttr("controls"));this.parent.append(this.background);this.parent.append(this.contentBox);this.parent.append(this.closeButton);this.closeButton.append($("<img src='"+uiBaseURL+"close.png'/>").asImageButton());this.initCss();this.initEvent()},initCss:function(){this.background.css({height:this.height+"px",bottom:"0px"});this.contentBox.css({top:(this.height-this.contentHeight)/2+"px","border-radius":"0px",height:this.contentHeight+"px",width:this.contentWidth+"px",left:(this.width-this.contentWidth)/2+"px"});this.audio.setCss({position:"absolute",width:this.contentWidth+"px",height:this.contentHeight+"px",left:"0px",top:"0px"});this.closeButton.css({top:"30px",right:"30px",position:"absolute","z-index":"103"});this.background.css("display","none");this.contentBox.css("display","none");this.closeButton.css("display","none")},onResize:function(t,i){this.background.css({height:windowHeight+"px",bottom:"0px"});this.contentBox.css({height:this.contentHeight+"px",width:this.contentWidth+"px",left:(windowWidth-this.contentWidth)/2+"px"});this.contentBox.css({top:(windowHeight-this.contentHeight)/2+"px"});this.closeButton.css({top:"30px",right:"30px"});void 0!=this.themeName&&(this.contentBox.css({width:this.contentWidth+"px",height:this.contentHeight+"px"}),this.audioSkin.onResize())},setPosition:function(t,i,e){void 0==e&&(e=["left","top"]);$(this.background).css(e[0],t+"px");$(this.background).css(e[1],i+"px")},getShowStatu:function(){return this.showing},setShowStatu:function(t){this.showing=t},show:function(){$(this.background).css({display:"block"});$(this.contentBox).fadeIn(500);$(this.closeButton).fadeIn(500);this.showing=!0;global.flipShotButton&&flipShotButton.hide()},hide:function(){var t=this;$(this.background).fadeOut(500,function(){t.pause();t.contentBox.remove();t.closeButton.remove();t.background.remove()});this.showing=!1},initEvent:function(){var i=this;this.background.bind(_event._down,function(t){i.hide();i.showing=!1});this.closeButton.bind(_event._end,function(t){i.hide();i.showing=!1});this.closeButton.bind("mouseover",function(t){i.closeButton.css({cursor:"pointer"})});this.initLoopEvent()},initLoopEvent:function(){0>this.H5PlaybackNumber&&this.audio.$media.attr("loop","loop");0<this.H5PlaybackNumber&&this.audio.bind("ended",function(){this.playCount++;0<this.H5PlaybackNumber&&this.playCount<=this.H5PlaybackNumber&&this.play()}.bind(this));this.audio.$media.bind("play",function(){this.playCount>this.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},play:function(){if(null!=this.audio)try{this.autoPlayAgain&&this.audio.setCurrentTime(0),this.audio.play()}catch(t){}},pause:function(){if(null!=this.audio)try{this.audio.pause()}catch(t){}},stop:function(){if(null!=this.audio)try{this.audio.pause(),this.audio.setCurrentTime(0)}catch(t){}},isPlaying:function(){return this.audio&&this.audio.$media[0]?!this.audio.$media[0].paused:!1},getPlayEvt:function(){return this.config.soundPlayTriggerEvt},getStopEvt:function(){return this.config.soundStopTriggerEvt}}).extend("Item");Class("Image",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.config.imageScaleType||(this.config.imageScaleType=!1);this.pageWidth=e;this.pageHeight=o;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.scaleWidth=this.width;this.pageScale=this.pageWidth/this.config.pageW;this.config.src&&(this.imageEnd=this.config.src.slice(this.config.src.lastIndexOf(".")+1));parseBool(this.config.shadow.hasDropShadow)&&(this.config.hasShadow=!0);this.initImage();this.initImageResource();this.initImageLoadEvents();this.initEvents();this.config.hasShadow&&this.addShadow(this.image);this.onResize(this.pageWidth,this.pageHeight)},initImage:function(){this.container=$("<div style='position: absolute;'></div>");this.image=$("<img style='position: absolute'/>");this.imageBorder=$("<div class = 'bubble expose-square-solid' style='position: absolute;width: 100%;height: 100%;'></div>");this.container.append(this.image);this.parent.append(this.container);this.container.append(this.imageBorder);this.container.css({opacity:this.config.alpha});parseBool(this.config.popUpImage)||"0"!=this.config.mouseover||this.config.action||this.container.css({"pointer-events":"none"});this.setRotation(this.container,this.config.rotation);this.image.css({"z-index":"0",top:0,bottom:0,left:0,right:0,position:"absolute"});this.imageBorder.css({"z-index":"1",margin:"auto",top:0,bottom:0,left:0,right:0,position:"absolute",display:"none"});parseBool(this.config.reflection)&&(!0==supports("boxReflect")?this.imageReflection(this.image):this.addCanvasReflection());this.config.mouseOver==PageEditor.MouseOverType.AddBorder?this.initLinkHint(this.imageBorder):this.initLinkHint(this.image)},removeImgSrc:function(){"gif"==this.imageEnd&&(this.container.css({display:"none"}),this.image.attr("src",this.config.src))},resetImgSrc:function(){"gif"==this.imageEnd&&(this.container.css({display:"block"}),this.image[0].src=this.config.src)},initImageResource:function(){this.config.src&&("gif"==this.imageEnd&&this.container.css({display:"none"}),this.config.src=this.fixRelativePath(this.config.src),bookConfig.useTheAliCloudChart&&(this.config.src=this.config.imgOriginalProportions?this.getOssUrl(this.config.src,this.width,this.height,"lfit"):this.getOssUrl(this.config.src,this.width,this.height,"fixed")),this.image.attr("src",this.config.src))},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,x:t.location.x,y:t.location.y,alpha:t.alpha,src:t.url,imgScale:t.imgScale,imgRotation:t.imgRotation,imgContX:t.imgContX,imgContY:t.imgContY,highlightsBool:parseBool(t.highlightsBool),highlightsLabel:t.highlightsLabel,originalURL:t.originalURL,action:t.action,mouseOver:t.mouseOverEffect,borderColor:t.borderColor,imgOriginalProportions:parseBool(t.imgOriginalProportions),popUpImage:parseBool(t.popUpImage),hint:t.hint,pageW:t.location.pageWidth,pageH:t.location.pageHeight,effect:t.effect,imageScaleType:parseBool(t.imgScaleType),shadow:t.shadow,animation:t.animation}},initImageLoadEvents:function(){this.image.on("load",function(){var t=this.adjustImageSize(this.image[0]);this.imageWidth=t.width;this.imageHeight=t.height;this.image.css({width:this.imageWidth+"px",height:this.imageHeight+"px",left:(this.width-this.imageWidth)/2+"px",top:(this.height-this.imageHeight)/2+"px"});this.imageBorder.css({"border-color":Color(this.config.borderColor).toString(),width:this.width+"px",height:this.height+"px"});this.container.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"});this.elementConfig={elemWidth:this.imageWidth,elemHeight:this.imageHeight,x:this.left,y:this.top,pageWidth:this.pageWidth,pageHeight:this.pageHeight}}.bind(this));void 0==this.config.action&&(this.image[0].onerror=function(){this.container.css("display","none")}.bind(this))},adjustImageSize:function(t){if(!t.naturalWidth||!t.naturalHeight)return{width:0,height:0};var i=t.naturalWidth;t=t.naturalHeight;if(!1==this.config.imgOriginalProportions)return{width:this.width,height:this.height,imgNaturalWidth:parseInt(i),imgNaturalHeight:parseInt(t)};var e=Math.min(this.width/i,this.height/t);return{width:Math.floor(i*e),height:Math.floor(t*e),imgNaturalWidth:parseInt(i),imgNaturalHeight:parseInt(t)}},initEvents:function(){this.zoomImg=null;this.config.mouseOver==PageEditor.MouseOverType.AddBorder&&(this.container.bind(_event._enter,function(t){this.imageBorder.css({display:"block"});this.visible=!0;this.image.animate({opacity:"0.8"},300)}.bind(this)),this.imageBorder.bind(_event._leave,function(t){this.imageBorder.css({display:"none"});this.image.animate({opacity:"1"},300);this.visible=!1}.bind(this)));this.config.mouseOver==PageEditor.MouseOverType.Zoom&&this.image.mouseEnterZoom();bookConfig.googleAnalyticsID&&(isPhone()||isPad()?this.image:this.imageBorder).bind(_event._down,function(t){t.stopPropagation();ga("send","event","image","click","Page"+BookInfo.getCurrentPages()[0])}.bind(this));this.addActionEvent(this.container);this.addEffect();this.addHighLight()},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;if(this.highLight)this.highLight.onResize(this.width,this.height);var e=this.adjustImageSize(this.image[0]);this.imageWidth=e.width;this.imageHeight=e.height;this.image.css({width:this.imageWidth+"px",height:this.imageHeight+"px",left:(this.width-this.imageWidth)/2+"px",top:(this.height-this.imageHeight)/2+"px"});this.imageBorder.css({width:this.width+"px",height:this.height+"px"});this.container.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"});this.resizeHint()},showAnimate:function(){if((!this.config.effect||"null"===this.config.effect.effectType)&&this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}},addHighLight:function(){this.config.highlightsBool&&(this.elementConfig={width:this.width,height:this.height},this.highLight=this.addHighLightEvent(this.container,this.elementConfig))},addEffect:function(){this.config.effect&&this.config.effect.effectType==PageEditor.Effect.FADEIN&&this.image.css({display:"none"});this.image.on("load",function(){this.elementConfig={elemWidth:this.imageWidth,elemHeight:this.imageHeight,parentWidth:this.width,parentHeight:this.height,x:this.left,y:this.top,pageWidth:this.pageWidth,pageHeight:this.pageHeight};this.addEffectEvent(this.image,this.elementConfig)}.bind(this))},hideEffect:function(){this.config.effect&&"null"!==this.config.effect.effectType&&this.imgEffect&&this.imgEffect.hide()},showEffect:function(){if(this.config.effect&&"null"!==this.config.effect.effectType)if(this.image[0].complete&&this.imgEffect)this.imgEffect.show();else var t=setInterval(function(){this.image[0].complete&&(this.imgEffect&&this.imgEffect.show(),clearInterval(t),t=null)}.bind(this),200)},addCanvasReflection:function(){var s=new Image;s.src=this.config.src;$(s).on("load",function(){var t=document.createElement("canvas"),i=t.getContext("2d");this.container.append(t);var e=this.adjustImageSize(s[0]),o=e.width,e=e.height;t.style.width=o+"px";t.style.height=e+"px";t.width=o;t.height=e;t.className="reflect";$(t).css({transform:"translateY("+e+"px)",margin:"auto",top:0,bottom:0,left:0,right:0,position:"absolute"});i.save();i.translate(0,e);i.scale(1,-1);i.drawImage(s,0,0,o,e);i.restore();i.globalCompositeOperation="destination-out";t=i.createLinearGradient(0,0,0,e);t.addColorStop(1,"rgba(255, 0, 0, 1.0)");t.addColorStop(0,"rgba(255, 0, 0, 0)");i.fillStyle=t;i.rect(0,0,o,2*e);i.fill()}.bind(this))}}).extend(PageItem.Item);var HTML5ZoomImg=Class({create:function(t,i){var e=this,o,s;this.$container=$(i);o=this.$container.width();s=this.$container.height();this.limitWidth=o;this.limitHeight=s;this.innerLimitWidth=606;this.innerLimitHeight=404;this.dragDivFalg=!0;this.dragImgFalg=!1;this.address=uiBaseURL;this.isFullFalg=!1;this.isOneToOneFalg=!0;this.scale=100;this.isMapShowFalg=!1;this.boxImgBG=$("<div style='position: absolute;margin: 0px;padding: 0px;border: 0px;left: 0px;top: 0px;background-color: #000000;opacity: 0;z-index: 99999;'></div>").css({width:o,height:s}).appendTo(this.$container);this.outerBoxImg=$("<div class='fliphtml5-loading' style='position: absolute;margin: 0px;padding: 0px;border: 0px;left: 0px;top: 0px;overflow: hidden;z-index: 99999;'></div>").css({width:o,height:s}).appendTo(this.$container);this.innerBoxImg=$("<div style='position: absolute;overflow: hidden;cursor: pointer;background-color: rgba(0,0,0, 0.6);'></div>").css({boxShadow:"0px 0px 4px #000000"}).hide().appendTo(this.outerBoxImg);window.box=this.innerBoxImg;this.boxImgDiv=$("<div class='fliphtml5-boxDiv' style='position: absolute;'></div>").appendTo(this.innerBoxImg);this.boxImg=$("<img style='position: absolute;width: 100%;height: 100%;padding: 0px;margin: 0px;'/>").appendTo(this.boxImgDiv);this.closeBox=$("<div style='position: absolute;left: auto;top: 0px;right: 0px;'></div>").append($("<img>",{src:this.address+"closeForm.png"})).appendTo(this.innerBoxImg);this.bindCloseBoxEvent();this.createControlBar(this.innerBoxImg);this.createImgMap(this.innerBoxImg);this.loadImg(t);this.dragDiv();this.dragImage();isTouch||(this.innerBoxImg.transition3D(),this.boxImgDiv.transition3D(),this.mapPoint.transition3D());$(window).on("resize",function(){e.resize()});return this},bindCloseBoxEvent:function(){var t=this;t.closeBox.bind("mouseover",function(){t.closeBox.children("img").attr("src",t.address+"closeForm_down.png")});t.closeBox.bind("mouseout",function(){t.closeBox.children("img").attr("src",t.address+"closeForm.png")});t.closeBox.bind("click",function(){t.destroy()})},createControlBar:function(t){this.controlBar=$("<div class='control' style='position: absolute;width: 106px;height: 48px;overflow: hidden;bottom: -50px;top: auto;left: 50%;margin-left: -53px;border-top-left-radius: 10px;border-top-right-radius: 10px;background-color: rgba(0,0,0,0.6)'></div>").css({boxShadow:"0px 0px 4px #000000"}).appendTo(t);this.oneToOne=$("<span class='one-to-one' style='position: absolute;'></span>").css({width:40,height:30,left:10,top:9,fontFamily:"serif",fontSize:28,lineHeight:"30px",color:"#7F8383",letterSpacing:"-5px",textAlign:"center"}).html("1:1").appendTo(this.controlBar);this.fullScreen=$("<div class='FullScreen' style='position: absolute'></div>").css({width:40,height:30,left:56,top:9}).append($("<img>",{src:this.address+"enterFull.png",css:{marginLeft:6,marginTop:1}})).appendTo(this.controlBar);this.bindControlEvents()},bindControlEvents:function(){var h=this;isTouch?h.controlBar.css({bottom:2}).show():(this.innerBoxImg.bind("mouseover",function(){h.controlBar.stop(!1,!1).animate({bottom:2},400,"linear")}),this.innerBoxImg.bind("mouseout",function(){h.controlBar.stop(!1,!1).animate({bottom:-50},400,"linear")}));this.oneToOne.bind("click",function(){h.boxImgDiv.css({width:h.originalSize.width,height:h.originalSize.height,left:(h.innerBoxImg.width()-h.originalSize.width)/2,top:(h.innerBoxImg.height()-h.originalSize.height)/2});h.innerBoxImg.width()>=h.boxImgDiv.width()&&h.innerBoxImg.height()>=h.boxImgDiv.height()?h.dragImgFalg=!1:h.dragImgFalg=!0;h.isFullFalg?h.dragDivFalg=!1:h.innerBoxImg.width()>=h.boxImgDiv.width()&&h.innerBoxImg.height()>=h.boxImgDiv.height()?h.dragDivFalg=!0:h.dragDivFalg=!1;h.scale=100;h.isOneToOneFalg=h.isOneToOne();h.isMapShowFalg=h.isShowMap();h.setMapPoint()});this.oneToOne.bind("mouseover",function(){h.isOneToOneFalg||h.oneToOne.css({color:"#32B9EB"})});this.oneToOne.bind("mouseout",function(){h.isOneToOneFalg||h.oneToOne.css({color:"#ffffff"})});this.fullScreen.bind("click",function(){var t=parseInt(h.boxImgDiv.css("left")),i=parseInt(h.boxImgDiv.css("top")),e=h.boxImgDiv.width(),o=h.boxImgDiv.height(),s=h.innerBoxImg.width(),n=h.innerBoxImg.height();h.isFullFalg?(h.innerBoxImg.css({width:Math.max(h.innerLimitWidth,h.result.width),height:Math.max(h.innerLimitHeight,h.result.height),left:Math.max(0,(h.outerBoxImg.width()-Math.max(h.innerLimitWidth,h.result.width))/2),top:Math.max(0,(h.outerBoxImg.height()-Math.max(h.innerLimitHeight,h.result.height))/2)}),h.boxImgDiv.css({left:h.innerBoxImg.width()>=e?(h.innerBoxImg.width()-e)/2:Math.max(h.innerBoxImg.width()-e,t+(h.innerBoxImg.width()-s)/2),top:h.innerBoxImg.height()>=o?(h.innerBoxImg.height()-o)/2:Math.max(h.innerBoxImg.height()-o,i+(h.innerBoxImg.height()-n)/2)}),h.innerBoxImg.width()>=h.boxImgDiv.width()&&h.innerBoxImg.height()>=h.boxImgDiv.height()?h.dragDivFalg=!0:h.dragDivFalg=!1,h.isFullFalg=!1,h.fullScreen.children("img").attr("src",h.address+"enterFull.png")):(h.innerBoxImg.css({width:h.$container.width(),height:h.$container.height(),left:0,top:0}),h.boxImgDiv.css({left:h.innerBoxImg.width()>=e?(h.innerBoxImg.width()-e)/2:Math.max(h.innerBoxImg.width()-e,t+(s-h.innerBoxImg.width())/2),top:h.innerBoxImg.height()>=o?(h.innerBoxImg.height()-o)/2:Math.max(h.innerBoxImg.height()-o,i+(n-h.innerBoxImg.height())/2)}),h.isFullFalg=!0,h.dragDivFalg=!1,h.fullScreen.children("img").attr("src",h.address+"exitFull.png"));h.innerBoxImg.width()>=h.boxImgDiv.width()&&h.innerBoxImg.height()>=h.boxImgDiv.height()?h.dragImgFalg=!1:h.dragImgFalg=!0;h.isShowMap();h.setMapPoint()});this.fullScreen.bind("mouseover",function(){h.isFullFalg?h.fullScreen.children("img").attr("src",h.address+"exitFull_over.png"):h.fullScreen.children("img").attr("src",h.address+"enterFull_over.png")});this.fullScreen.bind("mouseout",function(){h.fullScreen.children("img").attr("src",h.address+"exitFull.png")})},isOneToOne:function(){if(this.originalSize.width==this.boxImgDiv.width()&&this.originalSize.height==this.boxImgDiv.height())return this.oneToOne.css({color:"#7F8383"}),!0;this.oneToOne.css({color:"#ffffff"});return!1},loadImg:function(t){var o=this,s=new Image;s.onload=function(){s.onload=s.onerror=null;var t=this.width,i=this.height,e=o.selectWidthAdHeight(t,i);o.outerBoxImg.removeClass("fliphtml5-loading");o.boxImgDiv.css({width:e.width,height:e.height});o.innerBoxImg.css({width:Math.max(o.innerLimitWidth,e.width),height:Math.max(o.innerLimitHeight,e.height),left:Math.max(0,(o.outerBoxImg.width()-Math.max(o.innerLimitWidth,e.width))/2),top:-Math.max(o.innerLimitHeight,e.height)-240});o.innerBoxImg.show().animate({top:Math.max(0,(o.outerBoxImg.height()-Math.max(o.innerLimitHeight,e.height))/2)},{duration:500,easing:"linear"});o.boxImgDiv.css({width:e.width,height:e.height,left:Math.max(0,(o.innerBoxImg.width()-e.width)/2),top:Math.max(0,(o.innerBoxImg.height()-e.height)/2)});o.originalSize={width:t,height:i};o.result=e;o.isOneToOneFalg=o.isOneToOne();isTouch?o.zoomInPad():o.mouseZoom();o.setMapImg(t,i)};s.onerror=function(){s.onload=s.onerror=null;o.outerBoxImg.removeClass("fliphtml5-loading");var t=o.selectWidthAdHeight(18,20);o.boxImgDiv.css({width:t.width,height:t.height});o.innerBoxImg.css({width:Math.max(o.innerLimitWidth,t.width),height:Math.max(o.innerLimitHeight,t.height),left:Math.max(0,(o.outerBoxImg.width()-Math.max(o.innerLimitWidth,t.width))/2),top:-Math.max(o.innerLimitHeight,t.height)-240});o.innerBoxImg.show().animate({top:Math.max(0,(o.outerBoxImg.height()-Math.max(o.innerLimitHeight,t.height))/2)},{duration:500,easing:"linear"});o.boxImgDiv.css({width:t.width,height:t.height,left:Math.max(0,(o.innerBoxImg.width()-t.width)/2),top:Math.max(0,(o.innerBoxImg.height()-t.height)/2)});o.originalSize={width:18,height:20};o.result=t;o.isOneToOneFalg=o.isOneToOne();isTouch?o.zoomInPad():o.mouseZoom();o.setMapImg(18,20)};s.src=t;o.boxImg.attr("src",t);o.mapImg.attr("src",t)},selectWidthAdHeight:function(t,i){var e={},o=t/i,s=this.limitWidth,n=this.limitHeight;s>=t&&n<i?(e.width=o*n,e.height=n):s<t&&n>=i?(e.width=s,e.height=s/o):s<t&&n<i?s/o<=n?(e.width=s,e.height=s/o):o*n<=s?(e.width=o*n,e.height=n):console&&console.log("Do not be so wonderful picture of uncle!"):(e.width=t,e.height=i);return e},dragDiv:function(){var i=this,e=i.innerBoxImg,o=$(document),s=!0,n,h,a,r;i.innerBoxImg.bind(_event._down,function(t){t=isTouch?t.originalEvent.touches:[t];1==t.length?s=!0:2<=t.length&&(s=!1);stopEvent(t[0])});e.bind(_event._down,function(t){i.dragDivFalg&&(t=isTouch?t.originalEvent.touches[0]:t,isTouch||(t.preventDefault(),t.stopPropagation()),n=e[0].offsetLeft,h=e[0].offsetTop,a=t.clientX,r=t.clientY,o.bind(_event._move,function(t){s&&(t=isTouch?t.originalEvent.touches[0]:t,isTouch||(t.preventDefault(),t.stopPropagation()),e.css({left:n+t.clientX-a,top:h+t.clientY-r}))}),o.bind(_event._end,function(t){t=isTouch?t.originalEvent.touches[0]:t;isTouch||(t.preventDefault(),t.stopPropagation());s=!0;o.unbind(_event._move)}))})},mouseZoom:function(){var n=this,h=n.scale,t=n.result,a=t.width,r=t.height;n.innerBoxImg.bind($.browser.mozilla?"DOMMouseScroll":"mousewheel",function(t){h=n.scale;t=t.originalEvent;t=t.wheelDelta||-t.detail;0<t?h+=.2*h:0>t&&(h-=.17*h);5>h?h=5:1600<h&&(h=1600);var i,e,o;e=n.boxImgDiv.width();o=n.boxImgDiv.height();t=a*h/100;var s=r*h/100;t<n.innerBoxImg.width()?i=(n.innerBoxImg.width()-a*h/100)/2:(i=parseInt(n.boxImgDiv.css("left")),i+=(e-t)/2,0<=i?i=0:i<=n.innerBoxImg.width()-t&&(i=n.innerBoxImg.width()-t));s<n.innerBoxImg.height()?o=(n.innerBoxImg.height()-r*h/100)/2:(e=parseInt(n.boxImgDiv.css("top")),o=e+(o-s)/2,0<=o?o=0:o<=n.innerBoxImg.height()-s&&(o=n.innerBoxImg.height()-s));n.scale=h;n.boxImgDiv.animate({width:t,height:s,left:i,top:o},{duration:100,easing:"linear",complete:function(){n.isOneToOneFalg=n.isOneToOne();n.isMapShowFalg=n.isShowMap();n.setMapPoint();n.isFullFalg?(n.dragDivFalg=!1,n.boxImgDiv.width()>n.innerBoxImg.width()||n.boxImgDiv.height()>n.innerBoxImg.height()?n.dragImgFalg=!0:n.dragImgFalg=!1):n.boxImgDiv.width()>n.innerBoxImg.width()||n.boxImgDiv.height()>n.innerBoxImg.height()?(n.dragDivFalg=!1,n.dragImgFalg=!0):(n.dragDivFalg=!0,n.dragImgFalg=!1)}})})},zoomInPad:function(){var s=this,t=s.result,n=t.width,h=t.height,a,r,l,g,d,c=!1;s.boxImgDiv[0].addEventListener("touchstart",function(t){if(2<=t.touches.length){c=!0;var i=t.touches[0].pageX,e=t.touches[0].pageY,o=t.touches[1].pageX;t=t.touches[1].pageY;a=s.boxImgDiv.position().left;r=s.boxImgDiv.position().top;l=s.boxImgDiv.width();g=s.boxImgDiv.height();d=Math.sqrt(Math.pow(o-i,2)+Math.pow(t-e,2))}},!1);document.addEventListener("touchmove",function(t){if(c){if(2<=t.touches.length){var i,e,o;i=t.touches[0].pageX;e=t.touches[0].pageY;o=t.touches[1].pageX;t=t.touches[1].pageY;e=Math.sqrt(Math.pow(o-i,2)+Math.pow(t-e,2))/d;i=l*e;e*=g;o=(l-i)/2+a;t=(g-e)/2+r;i<s.innerBoxImg.width()?o=(s.innerBoxImg.width()-i)/2:0<=o?o=0:o<=s.innerBoxImg.width()-i&&(o=s.innerBoxImg.width()-i);e<s.innerBoxImg.height()?t=(s.innerBoxImg.height()-e)/2:0<=t?t=0:t<=s.innerBoxImg.height()-e&&(t=s.innerBoxImg.height()-e);s.boxImgDiv.width(i).height(e).css({left:o,top:t});s.isOneToOneFalg=s.isOneToOne();s.isMapShowFalg=s.isShowMap();s.setMapPoint();s.boxImgDiv.width()>n||s.boxImgDiv.height()>h?(s.dragDivFalg=!1,s.dragImgFalg=!0):(s.dragDivFalg=!0,s.dragImgFalg=!1)}}else t.preventDefault()},!1);document.addEventListener("touchend",function(t){c=!1},!1);document.body.addEventListener("touchmove",function(t){t.preventDefault()},!1)},dragImage:function(){var e=this,o=e.boxImgDiv,i=$(document),s=!0,n,h,a,r;e.innerBoxImg.bind(_event._down,function(t){t=isTouch?t.originalEvent.touches:[t];1==t.length?s=!0:2<=t.length&&(s=!1);stopEvent(t[0])});o.bind(_event._down,function(t){e.dragImgFalg&&(t=isTouch?t.originalEvent.touches[0]:t,o.addClass("dragging"),n=o[0].offsetLeft,h=o[0].offsetTop,a=t.clientX,r=t.clientY,i.bind(_event._move,function(t){t=isTouch?t.originalEvent.touches[0]:t;if(s){var i=n+t.clientX-a;t=h+t.clientY-r;0<=i?i=0:i<=e.innerBoxImg.width()-e.boxImgDiv.width()&&(i=e.innerBoxImg.width()-e.boxImgDiv.width());0<=t?t=0:t<=e.innerBoxImg.height()-e.boxImgDiv.height()&&(t=e.innerBoxImg.height()-e.boxImgDiv.height());o.width()>e.innerBoxImg.width()&&(o.css({left:i}),e.mapPoint.css({left:-i/(e.boxImgDiv.width()-e.innerBoxImg.width())*(e.mapDiv.width()-e.mapPoint.outerWidth())}));o.height()>e.innerBoxImg.height()&&(o.css({top:t}),e.mapPoint.css({top:-t/(e.boxImgDiv.height()-e.innerBoxImg.height())*(e.mapDiv.height()-e.mapPoint.outerHeight())}))}}),i.bind(_event._end,function(t){i.unbind(_event._move);o.removeClass("dragging");s=!0}))})},resize:function(){var t=this.$container.width(),i=this.$container.height();this.boxImgBG.css({width:t,height:i});this.outerBoxImg.css({width:t,height:i});this.isFullFalg?(this.innerBoxImg.css({width:t,height:i}),this.boxImgDiv.css({left:(t-this.boxImgDiv.width())/2,top:(i-this.boxImgDiv.height())/2}),this.setMapPoint()):this.innerBoxImg.css({left:(t-this.innerBoxImg.width())/2,top:(i-this.innerBoxImg.height())/2})},destroy:function(){var e=this;parseInt(e.innerBoxImg.css("left"));parseInt(e.innerBoxImg.css("top"));var o=e.innerBoxImg.width(),s=e.innerBoxImg.height(),n,h,a,r,l;$({k:100}).animate({k:0},{duration:400,easing:"linear",step:function(t,i){l=t/100;n=(s-l*s)/2;r=(o-l*o)/2;h=o-r;a=s-n;e.innerBoxImg[0].style.clip="rect("+n+"px, "+h+"px, "+a+"px, "+r+"px)"},complete:function(){e.boxImgBG.remove();e.outerBoxImg.remove()}})},createImgMap:function(t){this.map=$("<div class='ImageMap' style='position: absolute;left: auto;top: auto;right: 2px;bottom: 2px;width: 210px;height: 130px;overflow: hidden;border-radius: 4px;'></div>").css({boxShadow:"inset 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 0 rgba(0,0,0,.07)",backgroundColor:"rgba(0,0,0,.6)"}).hide().appendTo(t);this.mapDiv=$("<div style='position: absolute;margin: 0px;padding: 0px;border: 0px;overflow: hidden;'></div>").appendTo(this.map);this.mapImg=$("<img style='position: absolute;width: 100%;height: 100%;left: 0px;top: 0px;padding: 0px;margin: 0px;border: 0px;'/>").appendTo(this.mapDiv);this.mapPoint=$("<div style='position: absolute;margin: 0px;padding: 0px;border: 2px solid #58AA38;width: 100%;height: 100%;'></div>").css({boxShadow:"inset 1px 1px 0 #ffffff,inset 0 -1px 0 #ffffff,inset -1px 0px 0 #ffffff"}).appendTo(this.mapDiv);this.closeMap=$("<div style='position: absolute;left: auto;top: 0px;right: 0px;'></div>").append($("<img>",{src:this.address+"closeForm.png"})).appendTo(this.map);this.bindCloseMapEvent();this.dragMapPoint()},bindCloseMapEvent:function(){var t=this;t.closeMap.bind("mouseover",function(){t.closeMap.children("img").attr("src",t.address+"closeForm_down.png")});t.closeMap.bind("mouseout",function(){t.closeMap.children("img").attr("src",t.address+"closeForm.png")});t.closeMap.bind("click",function(){t.destroyMap()})},setMapImg:function(t,i){var e=this.map.width(),o=this.map.height(),s=t/i,n=o*s,h=e/s,a,r,l,g;n>e?(a=e,r=h,l=0,g=(o-h)/2):h>o?(a=n,r=o,l=(e-n)/2,g=0):n/h==s&&(a=n,r=h,g=l=0);this.mapDiv.css({width:a,height:r,left:l,top:g})},setMapPoint:function(){var t=Math.min(this.mapDiv.width(),this.innerBoxImg.width()*this.mapDiv.width()/this.boxImgDiv.width())-4,i=Math.min(this.mapDiv.height(),this.innerBoxImg.height()*this.mapDiv.height()/this.boxImgDiv.height())-4,e=-parseInt(this.boxImgDiv.css("left"))/(this.boxImgDiv.width()-this.innerBoxImg.width())*(this.mapDiv.width()-(t+4)),o=-parseInt(this.boxImgDiv.css("top"))/(this.boxImgDiv.height()-this.innerBoxImg.height())*(this.mapDiv.height()-(i+4));this.mapPoint.css({left:e,top:o,width:t,height:i})},isShowMap:function(){if(this.innerBoxImg.width()>=this.boxImgDiv.width()&&this.innerBoxImg.height()>=this.boxImgDiv.height())return this.map.hide(),!0;this.map.show();return!1},dragMapPoint:function(){var e=this,o=e.mapPoint,i=$(document),s,n,h,a;o.bind(_event._down,function(t){t=isTouch?t.originalEvent.touches[0]:t;s=o[0].offsetLeft;n=o[0].offsetTop;h=t.clientX;a=t.clientY;i.bind(_event._move,function(t){t=isTouch?t.originalEvent.touches[0]:t;var i=s+t.clientX-h;t=n+t.clientY-a;0>=i?i=0:i>=e.mapDiv.width()-e.mapPoint.outerWidth()&&(i=e.mapDiv.width()-e.mapPoint.outerWidth());0>=t?t=0:t>=e.mapDiv.height()-e.mapPoint.outerHeight()&&(t=e.mapDiv.height()-e.mapPoint.outerHeight());o.width()<e.mapDiv.width()&&(o.css({left:i}),e.boxImgDiv.css({left:-i/(e.mapDiv.width()-e.mapPoint.outerWidth())*(e.boxImgDiv.width()-e.innerBoxImg.width())}));o.height()<e.mapDiv.height()&&(o.css({top:t}),e.boxImgDiv.css({top:-t/(e.mapDiv.height()-e.mapPoint.outerHeight())*(e.boxImgDiv.height()-e.innerBoxImg.height())}))});i.bind(_event._end,function(t){i.unbind(_event._move)})})},destroyMap:function(){var e=this;parseInt(e.map.css("right"));parseInt(e.map.css("bottom"));var o=e.map.width(),s=e.map.height(),n,h,a,r,l;$({k:100}).animate({k:0},{duration:400,easing:"linear",step:function(t,i){l=t/100;n=(s-l*s)/2;r=(o-l*o)/2;h=o-r;a=s-n;e.map[0].style.clip="rect("+n+"px, "+h+"px, "+a+"px, "+r+"px)"},complete:function(){e.map.remove()}})}});Class("Line",{Package:"PageItem",SOLID:"Solid line",DOTTED:"Dotted line",create:function(t,i,e,o,s){this._super(t,i,e,o);this.id="line"+s;this.animateConfig();this.initConfig();this.initCanvas();parseBool(this.config.reflection)&&this.imageReflection(this.line);this.onResize(e,o)},initConfig:function(){this.color=Color(this.config.color);this.lineWidth=Number(this.config.lineWidth);this.lineType=this.config.lineType;this.config.originWidth||(this.config.originWidth=this.pageWidth);this.config.originHeight||(this.config.originHeight=this.pageHeight);var t=this.config.originWidth*this.config.width,i=this.config.originHeight*this.config.height;this.config.startX/=t;this.config.startY/=i;this.config.endX/=t;this.config.endY/=i;this.dotWidth=Number(this.config.dotWidthRation*this.config.originWidth);this.dashGap=Number(this.config.dotGrapRation*this.config.originWidth);this.dotWidth&&this.dashGap||(this.lineType=this.SOLID);this.extraWidth=this.lineWidth},initCanvas:function(){this.line=$("<canvas id="+this.id+"></canvas>");this.line.css({opacity:this.config.lineAlpha,position:"absolute"});this.setRotation(this.line,this.config.rotation);this.parent.append(this.line)},parseConfig:function(t){return{originWidth:t.location.pageWidth,originHeight:t.location.pageHeight,startX:t.lineStartPX,startY:t.lineStartPY,rotation:t.location.rotation,endX:t.lineEndPX,endY:t.lineEndPY,x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,lineAlpha:t.lineAlpha,alpha:t.alpha,lineWidth:t.lineWidth,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,lineType:t.lineType,dotWidth:t.dotWidth,dotWidthRation:t.dotWidthRation,dotGrapRation:t.dotGrapRation,color:t.color,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,animation:t.animation}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth+this.extraWidth;this.height=this.config.height*this.pageHeight+this.extraWidth;this.left=this.config.x*this.pageWidth-this.extraWidth/2;this.top=this.config.y*this.pageHeight-this.extraWidth/2;this.line.attr("width",this.width+"px");this.line.attr("height",this.height+"px");this.line.css({left:this.left+"px",top:this.top+"px"});this.draw()},draw:function(){this.initParams();var t=this.getContext();t&&(t.clearRect(0,0,this.width,this.height),t.beginPath(),this.lineType==this.SOLID&&this.drawLine(t),this.lineType==this.DOTTED&&this.drawDotLine(t),this.config.sh&&this.setShapeShadow(t),t.stroke())},initParams:function(){function t(t,i){var e;return e=Number.between(t*i,o,i-o)}var o=this.extraWidth/2;this.startX=t(this.config.startX,this.width);this.startY=t(this.config.startY,this.height);this.endX=t(this.config.endX,this.width);this.endY=t(this.config.endY,this.height)},getContext:function(){var t=this.line[0],i;try{return i=t.getContext("2d"),i.fillStyle="#00000000",i.lineCap="round",i.lineJoin="round",i.lineWidth=this.lineWidth,i.globalAlpha=this.config.alpha,i.strokeStyle=this.color.toString(),i}catch(t){return null}},drawLine:function(t){t.moveTo(this.startX,this.startY);t.lineTo(this.endX,this.endY)},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.line.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.line.one(t,function(){this.line.css({animation:""})}.bind(this))}},drawDotLine:function(t){for(var i=this.endX-this.startX,e=this.endY-this.startY,o=Math.sqrt(i*i+e*e),s=i/o,o=e/o,n=this.startX,h=this.startY;;){t.moveTo(n,h);var a=this.dotWidth*s,r=this.dotWidth*o,n=n+a,h=h+r,n=0<i?Math.min(n,this.endX):Math.max(n,this.endX),h=0<e?Math.min(h,this.endY):Math.max(h,this.endY);t.lineTo(n,h);a=this.dashGap*s;r=this.dashGap*o;n+=a;h+=r;if(0<=i){if(n>this.endX)break}else if(n<this.endX)break;if(0<=e){if(h>this.endY)break}else if(h<this.endY)break}}}).extend("Item");Class("Arrow",{Package:"PageItem",SINGLE:"Single Arrow",DOUBLE:"Double Arrow",create:function(t,i,e,o,s){this._super(t,i,e,o);this.id="arrow"+s;this.line.attr("id",this.id)},initConfig:function(){this._super();this.arrowType=this.config.arrowType;this.extraWidth=4*this.lineWidth},parseConfig:function(t){return{originWidth:t.location.pageWidth,originHeight:t.location.pageHeight,startX:t.lineStartPX,startY:t.lineStartPY,rotation:t.location.rotation,endX:t.lineEndPX,endY:t.lineEndPY,x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,arrowType:t.arrowType,alpha:t.alpha,lineAlpha:t.lineAlpha,lineWidth:t.lineWidth,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,lineType:t.lineType,dotWidth:t.dotWidth,dotWidthRation:t.dotWidthRation,dotGrapRation:t.dotGrapRation,color:t.color,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,animation:t.animation}},draw:function(){this._super();var t=this.getContext();t&&this.drawArrow(t)},drawArrow:function(t){var i=this.endX-this.startX,e=this.endY-this.startY,o=Math.sqrt(i*i+e*e),s=2.5*this.lineWidth,i=i/o*s,e=e/o*s;this.drawArrowOnPoint(t,Point(this.endX,this.endY),-i,-e);this.arrowType==this.DOUBLE&&this.drawArrowOnPoint(t,Point(this.startX,this.startY),i,e)},drawArrowOnPoint:function(t,i,e,o){this.drawArrowLine(t,i,e,o,35);this.drawArrowLine(t,i,e,o,-35)},drawArrowLine:function(t,i,e,o,s){t.save();t.translate(i.getX(),i.getY());t.rotate(s*Math.PI/180);t.beginPath();t.moveTo(0,0);t.lineTo(e,o);this.config.sh&&this.setShapeShadow(t);t.stroke();t.restore()}}).extend("Line");global.hddr.soq3=function(){return hddr.soo1||"tm"}();bdor[10]="l";Class("Link",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.initLinkColor();this.initLink();this.initEvents();this.initLinkHint(this.link);this.onResize(this.pageWidth,this.pageHeight)},initLinkColor:function(){void 0==this.config.downColor?(this.config.downColor=bookConfig.LinkDownColor?Color(bookConfig.LinkDownColor):Color("#808080"),this.config.downAlpha=bookConfig.LinkAlpha?bookConfig.LinkAlpha:.6,this.config.overColor=this.config.downColor,this.config.outColor=this.config.downColor,this.config.overAlpha=this.config.downAlpha/2,this.config.outAlpha=0):(this.config.downColor=Color(this.config.downColor),this.config.overColor=Color(this.config.overColor),this.config.outColor=Color(this.config.outColor),parseBool(this.config.hint)&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor),this.config.hint.hintShapeColor2=Color(this.config.hint.hintShapeColor2)))},initLink:function(){this.container=$("<div class='expose-square-solid' style='position:absolute;'></div>");this.link=$("<div class='expose-square-solid' style='position: absolute;'></div>");this.link.css({"border-color":"rgba(0,0,0,0)","background-color":this.config.outColor.rgba(this.config.outAlpha)});this.config.alpha&&this.link.css({opacity:this.config.alpha});this.config.ellipseW&&this.link.css({"border-radius":this.config.ellipseW+"px"});this.setRotation(this.link,this.config.rotation);this.container.append(this.link);this.parent.append(this.container)},flash:function(){"false"!=this.config.pageViewedBool&&(this.flashTimer&&this.flashTimer.stop(),this.flashTimer=function(t,i){if(t==i)this.link.css({"background-color":this.config.outColor.rgba(this.config.outAlpha)});else{var e=Math.ceil(i/2),o=t%e,s=Math.min(this.config.outAlpha,this.config.overAlpha),n=Math.max(this.config.outAlpha,this.config.overAlpha),h=n-s;fAlpha=t<e?s+o*h/e:n-o*h/e;this.link.css({"background-color":this.config.overColor.rgba(fAlpha)})}}.animation(this,1e3))},stopFlash:function(){this.flashTimer&&(this.flashTimer.stop(),this.link.css({"background-color":this.config.outColor.rgba(this.config.outAlpha)}))},parseConfig:function(t){return{width:0>t.location.width?-t.location.width:t.location.width,height:0>t.location.height?-t.location.height:t.location.height,rotation:t.location.rotation,x:0>t.location.width?parseFloat(t.location.x)+parseFloat(t.location.width):t.location.x,y:0>t.location.height?parseFloat(t.location.y)+parseFloat(t.location.height):t.location.y,alpha:t.alpha,ellipseH:t.ellipseH,ellipseW:t.ellipseW,downColor:t.downColor,downAlpha:t.downAlpha,overColor:t.overColor,overAlpha:t.overAlpha,outColor:t.outColor,outAlpha:t.outAlpha,action:t.action,hint:t.hint,borderColor:t.borderColor,mouseOver:t.mouseOver,highlightsBool:parseBool(t.highlightsBool),highlightsLabel:t.highlightsLabel,pageViewedBool:t.pageViewedBool}},initEvents:function(){function i(){this.stopFlash();this.link.css({"background-color":t.rgba(this.config.outAlpha)})}var e=this.config.overColor,o=this.config.downColor,t=this.config.outColor,s="";this.config.action&&this.config.action.actionType==PageEditor.ActionType.OPEN_URL&&(s=" url:"+this.config.action.url);this.link.bind(_event._down,function(t){bookConfig.googleAnalyticsID&&ga("send","event","Link","click","Page"+BookInfo.getCurrentPages()[0]+s);this.stopFlash();this.link.css({"background-color":o.rgba(this.config.downAlpha)})}.bind(this));this.link.bind(_event._up,function(t){this.stopFlash();this.link.css({"background-color":e.rgba(this.config.overAlpha)})}.bind(this));this.link.bind("mouseenter",function(t){this.stopFlash();parseBool(this.config.mouseOver)&&(this.link.css({"-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",border:"2px solid "+Color(this.config.borderColor).toString()}),this.link.animate({borderWidth:"5px"},function(){this.link.animate({borderWidth:"2px"})}.bind(this)));this.link.css({"background-color":e.rgba(this.config.overAlpha)})}.bind(this));this.link.bind(isTouch?_event._end:"mouseleave",function(t){$.browser.device==$.browser.DEVICE_PC?i.apply(this):i.delay(this,200)}.bind(this));this.addActionEvent(this.container);this.addHighLight()},addHighLight:function(){this.config.highlightsBool&&(this.elementConfig={width:this.width,height:this.height},this.highLight=this.addHighLightEvent(this.container,this.elementConfig))},setPageBgImage:function(t,i,e){this.bgImageWidth=t;this.bgImageHeight=i;(this.pageIsStrech=e)||this.initLinkCss()},initLinkCss:function(){var t=this.bgImageWidth/this.bgImageHeight;if(.1<=Math.abs(t-this.pageWidth/this.pageHeight)){var i=this.pageWidth,t=i/t;this.left=i*this.config.x;this.top=(this.pageHeight-t)/2+t*this.config.y}else i=this.pageWidth,t=this.pageHeight,this.left=this.pageWidth*this.config.x,this.top=this.pageHeight*this.config.y;this.width=i*this.config.width;this.height=t*this.config.height;2>this.width&&(this.width=2);2>this.height&&(this.height=2);this.link.css({width:this.width+"px",height:this.height+"px"});this.container.css({width:this.width+"px",height:this.height+"px"})},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;!this.pageIsStrech&&this.bgImageWidth&&this.bgImageHeight?this.initLinkCss():(this.left=t*this.config.x,this.top=i*this.config.y,this.width=t*this.config.width,this.height=i*this.config.height,2>this.width&&(this.width=2),2>this.height&&(this.height=2));if(this.highLight)this.highLight.onResize(this.width,this.height);this.setPosition(this.left,this.top);this.link.css({width:this.width+"px",height:this.height+"px"});this.container.css({width:this.width+"px",height:this.height+"px"});this.resizeHint()},setPosition:function(t,i){this.container.css({left:t+"px",top:i+"px"})}}).extend(PageItem.Item);bdor[29]="t";Class("Rectangle",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.id="rectangle"+s;this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.config.borderWidth=Number(this.config.borderWidth);this.colorA=Color(this.config.ColorA).toString();this.colorB=Color(this.config.ColorB).toString();this.borderColor=Color(this.config.borderColor).toString();this.Re=$("<canvas width='"+this.width+"' height='"+this.height+"' id='"+this.id+"'></canvas>");this.Re.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.Re,this.config.rotation);this.parent.append(this.Re);this.draw();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.Re)},parseConfig:function(t){return{width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,rotation:t.location.rotation,alpha:t.alpha,color:t.color,fillStyle:t.fillStyle,ColorA:t.gradientColorA,ColorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,arrowType:t.arrowType,action:t.action,animation:t.animation}},draw:function(){var t=this.Re[0].getContext("2d");t.clearRect(0,0,this.Re[0].width,this.Re[0].height);t.beginPath();t.strokeStyle=Color(this.config.borderColor).toString();t.lineWidth=this.config.borderWidth;t.globalAlpha=this.config.spalpha;t.lineCap="round";t.lineJoin="round";var i=this.width-2*this.config.borderWidth-4,e=this.height-2*this.config.borderWidth-4;t.moveTo(4+this.config.borderWidth,4+this.config.borderWidth);t.lineTo(i,4+this.config.borderWidth);t.lineTo(i,e);t.lineTo(4+this.config.borderWidth,e);t.lineTo(4+this.config.borderWidth,4+this.config.borderWidth);!0==parseBool(this.config.sh)&&this.setShapeShadow(t);"gradient"==this.config.fillStyle?(i=t.createLinearGradient(this.config.borderWidth,this.config.borderWidth,this.config.borderWidth,this.height),i.addColorStop(0,this.colorA),i.addColorStop(1,this.colorB),t.fillStyle=i,t.fill()):"Pure"==this.config.fillStyle&&(t.fillStyle=this.color,t.fill());0!=this.config.borderWidth&&t.stroke();t.closePath()},initEvents:function(){this.addActionEvent(this.Re)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.Re.css({width:this.width+"px",height:this.height+"px"});this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.Re.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.Re.one(t,function(){this.Re.css({animation:""})}.bind(this))}},setPosition:function(){this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.Re.css({left:this.left+"px",top:this.top+"px"})}}).extend(PageItem.Item);bdor[8]="o";Class("Round",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.parent=t;this.color=Color(this.config.color).toString();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="round"+s;this.x1=this.x-10;this.y1=this.y-10;0>this.x-10&&(this.x1=0);0>this.y-10&&(this.y1=0);this.rounds=$("<canvas id="+this.id+" width="+(this.width+20)+" height="+(this.height+20)+" style='opacity:"+this.config.alpha+";position: absolute;top:"+this.y1+"px;left:"+this.x1+"px'></canvas>");this.setRotation(this.rounds,this.config.rotation);this.initEvent();this.parent.append(this.rounds);this.roundcan(this.x,this.y,this.width,this.height,this.color,this.config.fillStyle,this.config.ColorA,this.config.ColorB,this.config.alpha,this.config.borderWidth,this.config.spalpha,this.config.borderColor,this.config.borderAlpha,this.config.sx,this.config.sy,this.config.se,this.config.sr,this.config.sh,360-Number(this.config.angle));this.imageReflection(this.rounds)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,rotation:t.location.rotation,width:t.location.width,height:t.location.height,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,ColorA:t.gradientColorA,ColorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},initEvent:function(){this.flag=0;this.linkURL="";if(null!=this.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(t){}null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);this.addActionEvent(this.rounds)}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*t;this.height=this.config.height*i;this.rounds[0].width=this.width+20;this.rounds[0].height=this.height+20;this.setPosition();this.roundcan(this.width,this.height,this.width,this.height,this.color,this.config.fillStyle,this.config.ColorA,this.config.ColorB,this.config.alpha,this.config.borderWidth,this.config.spalpha,this.config.borderColor,this.config.borderAlpha,this.config.sx,this.config.sy,this.config.se,this.config.sr,this.config.sh,360-Number(this.config.angle))},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.rounds.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.rounds.one(t,function(){this.rounds.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth-10;this.y=this.config.y*this.pageHeight-10;this.rounds.css({left:this.x+"px",top:this.y+"px"})},roundcan:function(t,i,e,o,s,n,h,a,r,l,g,d,c,p,u,f,m,b,w){t=r=0;try{var x=this.rounds[0].getContext("2d")}catch(t){return}i=[e/2+10,o/2+10];r=e/2;t=o/2;x.clearRect(0,0,this.width+20,this.height+20);x.save();x.beginPath();x.strokeStyle=Color(d).toString();x.lineWidth=l;x.globalAlpha=g;!0===parseBool(b)&&this.setShapeShadow(x);x.closePath();x.stroke();DrawEllipse(x,i,r,t);"gradient"==n&&(o=w*Math.PI/180,e=i[0]+r*Math.cos(o),o=i[1]+t*Math.sin(o),w=(w+180)*Math.PI/180,g=i[0]+r*Math.cos(w),w=i[1]+t*Math.sin(w),w=x.createLinearGradient(e,o,g,w),w.addColorStop(0,Color(h).toString()),w.addColorStop(1,Color(a).toString()),x.fillStyle=w,x.fill());"Pure"==n&&(x.fillStyle=s,x.fill());0!=l&&x.stroke();x.closePath()}}).extend(PageItem.Item);bdor[9]="j";function DrawEllipse(t,i,e,o){var s=i[0]+e,n=i[1];t.moveTo(s,n);for(var h=0;360>=h;h++)n=h*Math.PI/180,s=i[0]+e*Math.cos(n),n=i[1]-o*Math.sin(n),t.lineTo(s,n)}Class("Text",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.color=this.config.color?Color(this.config.color):Color("#000000");this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.id="text"+s;this.initText();this.initEvents();this.initLinkHint(this.text);parseBool(this.config.reflection)&&this.imageReflection(this.textdiv);this.onResize(this.pageWidth,this.pageHeight)},initText:function(){this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});var t=new TextFormatAnalyzer(this.config.textStr);this.fontSize=t.getMinFontSize();this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.container=$("<div id="+this.id+" class='flip-action textContainer'></div>");this.textdiv=$("<div></div>");this.container.css({position:"absolute",width:this.width+"px",height:this.height+"px"});this.textdiv.css({overflow:"hidden",position:"absolute",width:this.width+"px",height:this.height+"px"});this.config.action||this.config.hint||this.config.hint.text||t.htmlHasATag()||this.container.css({"pointer-events":"none"});this.text=t.getHTML(this.alignCss);!0===parseBool(this.config.fillBg)&&null!=this.config.bgcolor?(t=Color(this.config.bgcolor),this.textdiv.css({"background-color":t.rgba(this.config.bgalpha)})):this.textdiv.css({background:""});this.config.alpha&&this.textdiv.css({opacity:this.config.alpha});!0===parseBool(this.config.tbold)&&this.text.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.text.css({"font-style":"italic"});!0===parseBool(this.config.selectable)&&this.text.css({"-webkit-user-select":"text","-moz-user-select":"text","-ms-user-select":"text","user-select":"text"});this.addShadow(this.text);this.textdiv.append(this.text);this.container.append(this.textdiv);this.parent.append(this.container);this.trimingFontSize(this.height)},trimingFontSize:function(t){function o(t,i){if(t.css){var e=t.css(i);e&&(e=parseInt(e.replace("px","")),e--,t.css(i,e+"px"))}}function s(t){if((t=t.children())&&0!=t.length)for(var i=0;i<t.length;i++){var e=$(t[i]);e.is("span")&&(o(e,"font-size"),o(e,"line-height"));s(e)}}for(;this.text.height()>t&&$.system.name!=$.system.IOS&&!($.browser.chrome&&12>=this.fontSize)&&!(s(this.text),this.fontSize--,0>=this.fontSize););},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,rotation:t.location.rotation,alpha:t.alpha,pageWidth:t.pageWidth,pageHeight:t.pageHeight,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,selectable:t.selectable,highlightsBool:t.highlightsBool,highlightsURL:t.highlightsURL,highlightsLabel:t.highlightsLabel,hint:t.hint,textStr:t.textStr?t.textStr:t.formats.defaultFormat.htmlText,lineH:t.lineHeightRation,fontName:t.formats.defaultFormat.fontName,fontSize:t.formats.defaultFormat.fontSize,color:t.formats.defaultFormat.color,tbold:t.formats.defaultFormat.bold,italic:t.formats.defaultFormat.italic,pageH:t.formats.defaultFormat.pageH,pageW:t.formats.defaultFormat.pageW,bgalpha:t.background.alpha,fillBg:t.background.fillBg,bgcolor:t.background.color,hasShadow:parseBool(t.shadow.hasDropShadow),shadow:t.shadow,action:t.action,languageLayout:t.languageLayout,animation:t.animation}},initEvents:function(){this.addActionEvent(this.container)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.setPosition(t,i);this.resizeText(i)},resizeText:function(t){t=t/this.originHeight/this.adjustFontSize;this.textdiv.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+t+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+t+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+t+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+t+") rotate("+this.config.rotation+"deg)",transform:"scale("+t+") rotate("+this.config.rotation+"deg)"});this.container.css({width:this.width*t+"px",height:this.height*t+"px"})},setPosition:function(t,i){this.left=this.config.x*t;this.top=this.config.y*i;this.container.css({left:this.left+"px",top:this.top+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}}}).extend(PageItem.Item);Class("Button",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.fScale=e/this.config.pageWidth;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.button=null;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.config.hint&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor).toString(),this.config.hint.hintShapeColor2=this.config.hint.hintShapeColor2?Color(this.config.hint.hintShapeColor2).toString():Color(this.config.hint.hintShapeColor).toString(),"null"==this.config.hint.text&&(this.config.hint.text=""));this.config.Format&&(this.config.Format.color=Color(this.config.Format.color).toString());this.initHtml();this.initEvt();this.initLinkHint(this.button);parseBool(this.config.reflection)&&this.imageReflection(this.button);bookConfig.googleAnalyticsID&&this.button.bind(_event._up,function(t){t.stopPropagation();ga("send","event","button","click","Page"+BookInfo.getCurrentPages()[0])}.bind(this))},initDrawButton:function(){this.drawConfig={width:this.width,height:this.height,id:this.id,fillStyle:this.config.fillStyle,isThreeDimensional:this.config.isThreeDimensional,threeDimensionalNormalColor:this.config.threeDimensionalNormalColor,threeDimensionalOverColor:this.config.threeDimensionalOverColor,overColorA:this.config.overColorA,overColorB:this.config.overColorB,normalColorA:this.config.normalColorA,normalColorB:this.config.normalColorB,downColor:this.config.downColor,overAlpha:this.config.overAlpha,downAlpha:this.config.downAlpha,normalAlpha:this.config.normalAlpha,buttonRoundW:this.config.buttonRoundW,buttonRoundH:this.config.buttonRoundH,downTextColor:this.config.downTextColor,sh:this.config.sh,sa:this.config.sa,sx:this.config.sx,sy:this.config.sy,se:this.config.se,sr:this.config.sr,fScale:this.pageWidth/this.config.pageWidth};this.config.Format&&(this.drawConfig.normalTextColor=this.config.Format.color);"shape"==this.config.buttonType&&(this.canvasButton=new FlattenButton(this.drawConfig,this.button));"button_watermark"==this.buttonName&&(this.canvasButton=new WaterButton(this.drawConfig,this.button));"button_glossy"==this.buttonName&&(this.canvasButton=new GlossyButton(this.drawConfig,this.button));"button_push"==this.buttonName&&(this.canvasButton=new PushButton(this.drawConfig,this.button));"button_lineLight"==this.buttonName&&(this.canvasButton=new LineLightButton(this.drawConfig,this.button));"button_star"==this.buttonName&&(this.canvasButton=new StarButton(this.drawConfig,this.button));"button_glitter"==this.buttonName&&(this.canvasButton=new GlitterButton(this.drawConfig,this.button));"button_shadow"==this.buttonName&&(this.canvasButton=new ShadowButton(this.drawConfig,this.button));"button_bottomLight"==this.buttonName&&(this.canvasButton=new BottomLightButton(this.drawConfig,this.button));"button_other"==this.buttonName&&(this.canvasButton=new OtherButton(this.drawConfig,this.button))},stopAnimation:function(){this.canvasButton&&this.canvasButton.stopAnimation&&this.canvasButton.stopAnimation()},runAnimation:function(){this.canvasButton&&this.canvasButton.runAnimation&&this.canvasButton.runAnimation()},initHtml:function(){if("shape"==this.config.buttonType)this.swfButton=!0,this.button=$("<div class='flip-action'></div>"),this.createCaption(),this.initDrawButton(),this.buttonEvt=$("<div></div>"),this.initCss(),this.button.append(this.buttonEvt);else if(null==this.config.src||""==this.config.src)this.button=$("<button type = 'button' class='flip-action'></button>"),this.button.css({display:"none"}),this.config.alpha=0;else{var t=this.config.src.substring(this.config.src.lastIndexOf("/")+1,this.config.src.length-4),i=this.config.src.substring(this.config.src.lastIndexOf(".")+1,this.config.src.length);this.config.src=this.fixRelativePath(this.config.src);"swf"==i.toLowerCase()?(this.buttonName=t.slice(0,-2),this.id=parseInt(t.slice(-2)),this.buttonName&&!isNaN(1*this.id)?(this.swfButton=!0,this.button=$("<div class='flip-action'></div>"),this.createCaption(),this.initDrawButton()):(this.button=$("<div class='flip-action'><embed style='width:100%;height:100%;' src='"+this.config.src+"' ;> </embed></div>"),this.createCaption())):(this.bgButton=!0,this.button=$("<div class='flip-action'></div>"),t=this.config.src,bookConfig.useTheAliCloudChart&&(t=this.getOssUrl(t,this.width,this.height,"fixed")),this.button.css({background:"url("+t+") center center no-repeat","background-size":"100% 100%"}),this.createCaption());this.buttonEvt=$("<div></div>");this.initCss();this.button.append(this.buttonEvt)}this.setRotation(this.button,this.config.rotation);this.parent.append(this.button)},initCss:function(){parseBool(this.config.isThreeDimensional)&&this.button.css({height:1.2*this.height+"px"});this.buttonEvt.css({display:"none",width:this.width+"px",height:this.height+"px"});this.button.css({position:"absolute",cursor:"pointer",width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px",opacity:this.config.alpha})},createCaption:function(){this.buttonCaption&&this.buttonCaption.labelBox.remove();this.buttonCaption=new label(this.config.buttonCaption,this.button);var t=transformCSS({origin:{x:0,y:0},scale:this.fScale});this.buttonCaption.labelBox.css(t);var t=this.width,i=0;this.config.Format&&(parseInt(this.config.Format.size),this.buttonCaption.setFont(this.config.Format.size+"px",this.config.Format.color,this.config.Format.font),2.37<this.width/this.height&&!isTouchDevice()&&(t=2.37*this.height,i=(this.width-t)/2),this.buttonCaption.onResize(t/this.fScale,parseInt(this.config.Format.size)+6),"shape"!=this.config.buttonType&&this.buttonCaption.labelBox.css({"text-shadow":"0 4px 6px #000"}),parseBool(this.config.Format.bold)&&this.buttonCaption.labelBox.css({"font-weight":"bold"}),parseBool(this.config.Format.italic)&&this.buttonCaption.labelBox.css({"font-style":"italic"}),this.buttonCaption.labelBox.css({"z-index":"10","text-align":"center","pointer-events":"none","line-height":parseInt(this.config.Format.size)+6+"px",overflow:"hidden",left:i+"px",top:this.config.captionY+"%"}));this.buttonCaption.labelBox.addClass("button_text");this.config.languageLayout&&this.buttonCaption.labelBox.css({direction:"rtl"})},parseConfig:function(t){return{width:t.location.width,height:t.location.height,pageWidth:t.location.pageWidth,pageHeight:t.location.pageHeight,rotation:t.location.rotation,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,x:t.location.x,y:t.location.y,alpha:t.alpha,src:t.url,action:t.action,hint:t.hint,buttonCaption:t.buttonCaption,captionY:t.captionY,HRate:t.HRate,Format:t.Format,buttonType:t.buttonType,fillStyle:t.fillStyle,isThreeDimensional:t.isThreeDimensional,threeDimensionalNormalColor:t.threeDimensionalNormalColor,threeDimensionalOverColor:t.threeDimensionalOverColor,overColorA:t.overColorA,overColorB:t.overColorB,normalColorA:t.normalColorA,normalColorB:t.normalColorB,downColor:t.downColor,overAlpha:t.overAlpha,downAlpha:t.downAlpha,normalAlpha:t.normalAlpha,buttonRoundW:t.buttonRoundW,buttonRoundH:t.buttonRoundH,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,downTextColor:t.downTextColor,languageLayout:t.languageLayout,animation:t.animation}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.fScale=this.pageWidth/this.config.pageWidth;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.button.css({width:this.width+"px",height:this.height+"px"});parseBool(this.config.isThreeDimensional)&&this.button.css({height:1.2*this.height+"px"});if(this.canvasButton)this.canvasButton.onResize(this.width,this.height,this.fScale);if(this.swfButton||this.bgButton)isTouchDevice()?(this.createCaption(),this.buttonEvt.css({width:this.width+"px",height:this.height+"px"})):this.show();this.setPosition(this.left,this.top)},show:function(){isTouchDevice()||!this.swfButton&&!this.bgButton||(this.buttonEvt||(this.buttonEvt=$("<div></div>")),this.buttonCaption&&this.buttonCaption.labelBox.remove(),this.buttonEvt.css({display:"none",width:this.width+"px",height:this.height+"px"}),this.createCaption(),this.button.append(this.buttonEvt))},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.button.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.button.one(t,function(){this.button.css({animation:""})}.bind(this))}},setPosition:function(t,i){this.button.css({left:t+"px",top:i+"px"})},initEvt:function(){this.addActionEvent(this.button);"shape"!=this.config.buttonType&&(this.button.bind(_event._down,function(){this.buttonEvt.css({display:"block"});animateOnce(this.button,transformCSS({tran:{x:0,y:3}}),100)}.bind(this)),this.button.bind(_event._end,function(){this.buttonEvt.css({display:"none"});animateOnce(this.button,transformCSS({tran:{x:0,y:0}}),100)}.bind(this)));this.button.bind("mouseleave",function(){this.buttonEvt.css({display:"none"})}.bind(this))}}).extend(PageItem.Item);global.hddr.soo6=function(){return hddr.bbb5};Class("FlattenButton",{create:function(t,i){t&&i&&(this.config=t,this.parent=i,this.initConfig(),this.initHtml(),this.initCss(),this.initEvent())},initConfig:function(){this.config.normalAlpha||(this.config.normalAlpha=1);this.config.downAlpha||(this.config.normalAlpha=1);this.config.overAlpha||(this.config.normalAlpha=1);this.config.normalColorA=this.config.normalColorA?Color(this.config.normalColorA).rgba(this.config.normalAlpha):Color("#808080").rgba(this.config.normalAlpha);this.config.normalColorB=this.config.normalColorB?Color(this.config.normalColorB).rgba(this.config.normalAlpha):Color("#808080").rgba(this.config.normalAlpha);this.config.overColorA=this.config.overColorA?Color(this.config.overColorA).rgba(this.config.overAlpha):Color("#808080").rgba(this.config.overAlpha);this.config.overColorB=this.config.overColorB?Color(this.config.overColorB).rgba(this.config.overAlpha):Color("#808080").rgba(this.config.overAlpha);this.config.downColor=this.config.downColor?Color(this.config.downColor).rgba(this.config.downAlpha):Color("#808080").rgba(this.config.downAlpha);this.config.downTextColor=this.config.downTextColor?Color(this.config.downTextColor).toString():"#ffffff";this.config.normalTextColor=this.config.normalTextColor?Color(this.config.normalTextColor).toString():"#ffffff";parseBool(this.config.isThreeDimensional)&&(this.config.threeDimensionalNormalColor=this.config.threeDimensionalNormalColor?Color(this.config.threeDimensionalNormalColor).toString():"#808080",this.config.threeDimensionalOverColor=this.config.threeDimensionalOverColor?Color(this.config.threeDimensionalOverColor).toString():"#808080")},initHtml:function(){this.coverButton=$("<div class='flip-action'></div>");this.parent.append(this.coverButton)},initCss:function(){this.coverButton.css({transition:"all .3s",position:"absolute","z-index":"2",width:this.config.width+"px",height:this.config.height+"px","border-radius":this.config.buttonRoundW*this.config.fScale+"px"});this.normalCss()},overCss:function(){this.config.overColorA==this.config.overColorB?this.coverButton.css({background:this.config.overColorA}):this.setGradient(this.config.overColorA,this.config.overColorB);parseBool(this.config.isThreeDimensional)?this.set3DShadow(this.config.threeDimensionalOverColor,.15*this.config.height,.16*this.config.height):this.clearShadow();this.config.normalTextColor!=this.config.downTextColor&&this.normalText()},downCss:function(){this.coverButton.css({background:this.config.downColor});parseBool(this.config.isThreeDimensional)?this.set3DShadow(this.config.threeDimensionalNormalColor,.05*this.config.height,.06*this.config.height):this.setInsetShadow();this.config.normalTextColor!=this.config.downTextColor&&this.downText()},normalCss:function(){this.config.normalColorA==this.config.normalColorB?this.coverButton.css({background:this.config.normalColorA}):this.setGradient(this.config.normalColorA,this.config.normalColorB);parseBool(this.config.isThreeDimensional)?this.set3DShadow(this.config.threeDimensionalNormalColor,.15*this.config.height,.16*this.config.height):this.clearShadow();this.config.normalTextColor!=this.config.downTextColor&&this.normalText()},normalText:function(){this.parent.find(".button_text").css({color:this.config.normalTextColor})},downText:function(){this.parent.find(".button_text").css({color:this.config.downTextColor})},setGradient:function(t,i){this.coverButton.css({background:"-webkit-linear-gradient(to bottom,"+t+","+i+")",background:"-moz-linear-gradient(to bottom,"+t+","+i+")",background:"-o-linear-gradient(to bottom,"+t+","+i+")",background:"linear-gradient(to bottom,"+t+","+i+")"})},set3DShadow:function(t,i,e){this.coverButton.css({"-moz-box-shadow":"0 "+i+"px 0 "+t+", 0 "+e+"px 3px rgba(0, 0, 0, 0.1)","-o-box-shadow":"0 "+i+"px 0 "+t+", 0 "+e+"px 3px rgba(0, 0, 0, 0.1)","-webkit-box-shadow":"0 "+i+"px 0 "+t+", 0 "+e+"px 3px rgba(0, 0, 0, 0.1)","-ms-box-shadow":"0 "+i+"px 0 "+t+", 0 "+e+"px 3px rgba(0, 0, 0, 0.1)","box-shadow":"0 "+i+"px 0 "+t+", 0 "+e+"px 3px rgba(0, 0, 0, 0.1)"})},clearShadow:function(){this.coverButton.css({"-moz-box-shadow":"none","-o-box-shadow":"none","-webkit-box-shadow":"none","-ms-box-shadow":"none","box-shadow":"none"})},setInsetShadow:function(){this.coverButton.css({"-moz-box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)","-o-box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)","-webkit-box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)","-ms-box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)","box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)"})},onResize:function(t,i,e){this.parent.css({transition:""});this.coverButton.css({transition:""});this.config.width=t;this.config.height=i;this.coverButton.css({"border-radius":this.config.buttonRoundW*e+"px",width:t+"px",height:i+"px"});this.normalCss();(function(){this.parent.css({transition:"all 0.3s"});this.coverButton.css({transition:"all 0.3s"})}).delay(this,50)},initEvent:function(){this.parent.bind(_event._over,function(){this.mouseOn=!0;this.overCss()}.bind(this));this.parent.bind(_event._out,function(){this.mouseOn=!1;this.normalCss()}.bind(this));this.parent.bind(_event._down,function(){parseBool(this.config.isThreeDimensional)&&this.parent.css({transition:"all .3s",transform:"translate(0 ,"+.1*this.config.height+"px)"});this.downCss()}.bind(this));this.parent.bind(_event._up,function(){parseBool(this.config.isThreeDimensional)&&this.parent.css({transition:"all .3s",transform:"translate(0,0)"});this.mouseOn?this.overCss():this.normalCss()}.bind(this))}});Class("WaterButton",{create:function(t,i){t.width&&t.height&&t.id&&i&&(this.lineWidth=t.height/30,this.width=t.width-this.lineWidth,this.height=t.height-this.lineWidth,this.id=t.id,this.bdRadius=this.height/6,this.parent=i,this.enter=!1,this.initConfig(),this.getGradient(),this.initHtml(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+(this.width+this.lineWidth)+"' height='"+(this.height+this.lineWidth)+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.parent.append(this.canvas);this.drawButton()},initCss:function(){this.canvas.css({position:"absolute",left:"0",top:"0"})},onResize:function(t,i){this.lineWidth=i/30;this.width=t-i/30;this.height=i-i/30;this.bdRadius=this.height/6;this.canvas[0].width=t;this.canvas[0].height=i;this.drawButton()},draw:function(){this.context.clearRect(0,0,this.width,this.height);this.context.lineWidth=this.lineWidth;this.context.beginPath();this.context.strokeStyle=this.borderColor1;this.context.moveTo(this.bdRadius+this.lineWidth,this.lineWidth);this.context.arcTo(this.width-this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.lineWidth,this.lineWidth,this.width-this.lineWidth/2,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.fillStyle=this.outerBg;this.context.fill();this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(2*this.lineWidth+this.bdRadius,2*this.lineWidth);var t=this.context.createLinearGradient(0,this.lineWidth,0,this.height/2+this.lineWidth);t.addColorStop(0,"rgba(255,255,255,1)");t.addColorStop(1,"rgba(255,255,255,0.15)");this.context.fillStyle=t;this.context.arcTo(this.width-2*this.lineWidth,2*this.lineWidth,this.width-2*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(this.width-2*this.lineWidth,this.height/2+this.lineWidth,2*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,this.height/2+this.lineWidth,2*this.lineWidth,2*this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,2*this.lineWidth,this.width-2*this.lineWidth,2*this.lineWidth,this.bdRadius);this.context.fill()},initConfig:function(){this.waters=[{defaultBg:"#000000;#212321;rgb(187,187,187)",enterBg:"#030303;rgb(102,102,102);rgb(200,200,200)"},{defaultBg:"rgb(0,20,26);#006FC9;rgb(68,179,253)",enterBg:"rgb(0,56,93);rgb(25,162,253;rgb(244,244,244)"},{defaultBg:"rgb(233,234,233);rgb(110,115,111);rgb(153,156,153)",enterBg:"rgb(113,115,117);rgb(206,209,207);rgb(255,255,255)"},{defaultBg:"rgb(29,39,2);rgb(159,205,19);rgb(194,234,31)",enterBg:"rgb(35,43,2);rgb(175,214,15);rgb(245,250,220)"},{defaultBg:"rgb(123,0,80);rgb(208,15,150);rgb(245,27,173)",enterBg:"rgb(125,0,82);rgb(236,14,170);rgb(245,238,249)"},{defaultBg:"rgb(170,1,1);rgb(254,48,48);rgb(254,166,169)",enterBg:"rgb(249,12,12);rgb(253,170,170);rgb(254,249,249)"},{defaultBg:"rgb(90,2,101);rgb(186,46,203);rgb(165,125,170)",enterBg:"rgb(92,3,103);rgb(235,107,250);rgb(251,230,254)"},{defaultBg:"rgb(144,143,1);rgb(236,236,18);rgb(253,253,194)",enterBg:"rgb(144,143,1);rgb(251,251,45);rgb(254,254,242)"},{defaultBg:"rgb(250,93,9);rgb(255,136,24);rgb(217,79,11)",enterBg:"rgb(247,78,7);rgb(254,198,174);rgb(254,247,244)"}]},getGradient:function(){this.defaultBg=this.waters[this.id-1].defaultBg.split(";");this.enterBg=this.waters[this.id-1].enterBg.split(";")},drawButton:function(){this.context.clearRect(0,0,this.width,this.height);this.context.beginPath();this.context.lineWidth="5";this.borderColor1=this.context.createLinearGradient(this.lineWidth,this.lineWidth,this.height/2+this.lineWidth,this.height/2+this.lineWidth);this.borderColor1.addColorStop(0,"#ffffff");this.borderColor1.addColorStop(1,"#000");this.outerBg=this.context.createLinearGradient(0,this.lineWidth,0,this.height-this.lineWidth);this.outerBg.addColorStop(0,this.defaultBg[0]);this.outerBg.addColorStop(.96,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw()},enterEvent:function(){this.getGradient();this.change=function(t,i){var e=t/i;this.context.clearRect(0,0,this.width+this.lineWidth+10,this.height+this.lineWidth+10);if(this.enter)var o=e,s=this.lineWidth+5+this.width/2*e,n=this.height/2+this.lineWidth+5+this.width/2*e;else o=1-e,s=this.width/2+this.lineWidth+5-this.width/2*e,n=this.width/2+this.height/2+this.lineWidth+5-this.width/2*e;this.outerBg=this.context.createLinearGradient(0,this.lineWidth,0,this.height-this.lineWidth);this.borderColor1=this.context.createLinearGradient(s,s,n,n);e=this.enter?.95-.15*e:.8+.15*e;t==i&&(this.enter?this.borderColor1.addColorStop(0,"#000"):this.borderColor1.addColorStop(o,"#ffffff"),this.borderColor1.addColorStop(1,"#000"));this.enter?(this.outerBg.addColorStop(0,this.enterBg[0]),this.outerBg.addColorStop(e,this.enterBg[1]),this.outerBg.addColorStop(1,this.enterBg[2])):(this.outerBg.addColorStop(0,this.defaultBg[0]),this.outerBg.addColorStop(e,this.defaultBg[1]),this.outerBg.addColorStop(1,this.defaultBg[2]));this.borderColor1.addColorStop(0,"#000");this.borderColor1.addColorStop(o,"#ffffff");this.borderColor1.addColorStop(1,"#000");this.draw()};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.enter=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.enter=!1;this.enterEvent()}.bind(this))}});Class("GlossyButton",{create:function(t,i){t.width&&t.height&&t.id&&i&&(this.lineWidth=t.height/30,this.width=t.width-this.lineWidth,this.height=t.height-this.lineWidth,this.id=t.id,7<this.id&&(this.id-=3),this.bdRadius=this.height/15,this.parent=i,this.initConfig(),this.setPosition(),this.initHtml(),this.getGradient(),this.drawButton(),this.initCss())},initHtml:function(){this.container=$("<div></div>");this.canvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.secCanvas=$("<canvas width='"+this.width+"' height='"+(this.height/2-this.lineWidth/2)+"'></canvas>");this.secCtx=this.secCanvas[0].getContext("2d");this.context=this.canvas[0].getContext("2d");this.parent.append(this.container);this.container.append(this.canvas);this.container.append(this.secCanvas)},onResize:function(t,i){this.width=t;this.height=i;this.bdRadius=i/15;this.lineWidth=i/30;this.canvas[0].width=t;this.canvas[0].height=i;this.secCanvas[0].width=t;this.secCanvas[0].height=i/2;this.getGradient();this.drawButton()},initCss:function(){this.container.css({position:"absolute",width:this.width+"px",height:this.height+"px",left:"0",top:"0"});this.secCanvas.css({position:"absolute",background:"transparent",left:"0",top:"0"})},drawButton:function(){var t={width:this.width,height:this.height,bdRadius:this.bdRadius,lineWidth:this.lineWidth,context:this.context,canvas:this.canvas,color:this.shadows[6<this.id-1?this.id-1-7:this.id-1]};this.drawFirstBg();1==this.id||8==this.id?new GlossButton1(t,this.container):2==this.id||9==this.id?new GlossButton2(t,this.container):3==this.id||5==this.id||10==this.id||12==this.id?new GlossButton3(t,this.container):4==this.id||11==this.id?new GlossButton4(t,this.container):6==this.id||13==this.id?new GlossButton5(t,this.container):7!=this.id&&14!=this.id||new GlossButton6(t,this.container);t={ctx:this.secCtx,secCanvas:this.secCanvas,arr1:this.arr1,arr2:this.arr2,width:this.width,height:this.height,container:this.container,lineWidth:this.lineWidth};1<=this.id&&7>=this.id?this.bubbles=new AnimationBubble(t):this.stars=new AnimationStar(t);this.drawUnder()},drawFirstBg:function(){this.context.beginPath();this.context.lineWidth=this.lineWidth/10;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.lineWidth/2,this.height/2-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height/2-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.bgColor;this.context.strokeStyle=this.borderColor1;this.context.fill();this.context.stroke();this.context.closePath()},drawUnder:function(){this.context.beginPath();this.context.moveTo(this.bdRadius+this.lineWidth/2,this.height/2-this.lineWidth/4);this.context.arcTo(this.width-this.lineWidth/2,this.height/2-this.lineWidth/4,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height/2-this.lineWidth/4,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height/2-this.lineWidth/4,this.width-this.lineWidth/2,this.height/2-this.lineWidth/4,this.bdRadius);this.context.fillStyle=this.underShadow;this.context.fill();this.context.closePath()},initConfig:function(){this.shadows=[{defaultBg:"#030303;#A00303;#525252",enterBg:"#6CFCDE"},{defaultBg:"#040436;#008BC1;#525252",enterBg:"#FF0000"},{defaultBg:"#184618;#2EC64D;#525252",enterBg:"#FFFFFF"},{defaultBg:"#371200;#995F2E;#525252",enterBg:"#FFFFFF"},{defaultBg:"#15002B;#6A0AC9;#525252",enterBg:"#FFFFFF"},{defaultBg:"#420021;#9C4370;#525252",enterBg:"#FFFFFF"},{defaultBg:"#000000;#6F6F00;#525252",enterBg:"#FFFFFF"}]},getGradient:function(){this.defaultBg=this.shadows[6<this.id-1?this.id-1-7:this.id-1].defaultBg.split(";");this.enterBg=this.shadows[6<this.id-1?this.id-1-7:this.id-1].enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.coverBg=this.context.createLinearGradient(0,0,0,this.height/4*3);this.coverBg.addColorStop(0,"rgba(255,255,255,0.15)");this.coverBg.addColorStop(1,"rgba(255,255,255,0.3)");this.underShadow=this.context.createLinearGradient(0,this.height/2-this.lineWidth/1.8,0,this.height-this.lineWidth/2);this.underShadow.addColorStop(0,Color(this.defaultBg[0]).rgba(.25));this.underShadow.addColorStop(.4,Color(this.defaultBg[0]).rgba(0))},stopAnimation:function(){this.bubbles&&this.bubbles.leaveTimer&&this.bubbles.leaveTimer.stop();this.bubbles&&this.bubbles.enterTimer&&this.bubbles.enterTimer.stop();this.stars&&this.stars.leaveTimer&&this.stars.leaveTimer.stop();this.stars&&this.stars.enterTimer&&this.stars.enterTimer.stop()},runAnimation:function(){this.bubbles&&this.bubbles.leaveEvent();this.stars&&this.stars.leaveEvent()},setPosition:function(){this.arr1=[];for(var t=0;15>t;t++){var i=Math.random()*(this.width+this.lineWidth),e=Math.random()*(this.height/2);this.arr1.push({x:i,y:e})}this.arr2=[];for(t=0;15>t;t++)i=Math.random()*(this.width+this.lineWidth),e=Math.random()*(this.height/2),this.arr2.push({x:i,y:e})}});Class("AnimationBubble",{create:function(t){this.secCanvas=t.secCanvas;this.container=t.container;this.secCtx=t.ctx;this.width=t.width;this.height=t.height;this.lineWidth=t.lineWidth;this.setPosition();isPhone()||isPad()||this.initEvent()},drawBubble:function(t,i,e,o,s){this.secCtx.beginPath();this.secCtx.ellipse(o,s,this.height/30,this.height/30,0,0,2*Math.PI,!1);i=this.secCtx.createRadialGradient(o-this.height/40,s+this.height/30,0,o,s,this.height/20);i.addColorStop(0,"rgba(255,255,255,"+1.6*t+")");i.addColorStop(1,"rgba(255,255,255,"+.14*t+")");this.secCtx.fillStyle=i;this.secCtx.fill();this.secCtx.closePath();this.secCtx.beginPath();this.secCtx.ellipse(o+this.height/40,s-this.height/60,this.height/80,this.height/100,-.2*Math.PI,0,2*Math.PI,!1);this.secCtx.fillStyle="rgba(255,255,255,"+.8*t+")";this.secCtx.fill();this.secCtx.closePath()},popBubbles:function(t,i,e,o){for(var s=0;10>s;s++){this.focus?(o[s].x+=this.width/6/e*i,o[s].y+=this.height/6/e):(o[s].x+=this.width/6/e*i,o[s].y-=this.height/6/e);if(1==t||o[s].x<1.5*this.lineWidth||o[s].x>this.width-this.lineWidth||o[s].y<.5*this.lineWidth||o[s].y>this.height/2-this.lineWidth/2)o[s].x=Math.random()*(this.width+this.lineWidth),o[s].y=Math.random()*(this.height/2);this.drawBubble(t,i,e,o[s].x,o[s].y)}},enterEvent:function(){this.enterTimer&&this.enterTimer.stop();this.enterTimer=this.enterAnimation.animation(this,1200)},enterAnimation:function(t,i){this.secCtx.clearRect(-20,-20,1.5*this.width,1.5*this.height);var e=1,o=t/i;this.focus?t==i&&this.focus?(this.popBubbles(o,e,i,this.arr1),this.popBubbles(1-o-.5,e,i,this.arr2),this.enterTimer&&this.enterTimer.stop(),this.enterTimer=this.enterAnimation.animation(this,1200)):this.focus&&(.5>=t/i?e=1:(e=-1,o=1-o),this.popBubbles(o,e,i,this.arr1),this.popBubbles(1-o-.5,e,i,this.arr2)):this.enterTimer.stop()},leaveEvent:function(){this.leaveTimer&&this.leaveTimer.stop();this.leaveTimer=this.leaveAnimation.animation(this,1200)},leaveAnimation:function(t,i){this.secCtx.clearRect(-20,-20,1.5*this.width,1.5*this.height);var e=t/i,o=1;this.focus?this.leaveTimer.stop():t!=i||this.focus?(.5>t/i?o=1:(o=-1,e=1-e),this.focus||(.5>e?(this.popBubbles(e,o,i,this.arr1),this.popBubbles(e,o,i,this.arr2)):(this.popBubbles(1-e,o,i,this.arr1),this.popBubbles(1-e,o,i,this.arr2)))):(this.popBubbles(0,o,i,this.arr1),this.popBubbles(0,o,i,this.arr2))},initEvent:function(){this.container.bind(_event._enter,function(){this.focus=!0;this.setPosition();this.enterEvent()}.bind(this));this.container.bind(_event._leave,function(){this.focus=!1;this.setPosition();this.leaveEvent()}.bind(this))}}).extend("GlossyButton");Class("AnimationStar",{create:function(t){this.secCanvas=t.secCanvas;this.container=t.container;this.secCtx=t.ctx;this.width=t.width;this.height=t.height;this.lineWidth=t.lineWidth;this.setPosition();isPhone()||isPad()||this.initEvent()},drawStar:function(t,i,e,o,s){function n(t,i){var e=new Image;e.src=t;e.complete?i.call(e):e.onload=function(){i.call(e)}}this.secCtx.beginPath();var h=parseInt(i.x),a=parseInt(i.y),r=this.secCtx,l=this.width,g=this.height,d=new Image;d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcNJREFUeNq8lrtKA0EYhTMx0RizGiUqWGihnRcQFaxEOzsrwVfwcXwIbS0sLAKK2NiJkEbEiBjB+yWJihvd8YycwDJkzTJuZuFjw2TnP3vO/Du7QkoZs3nEDeclTeeaCvZQ1JpgBiRsCjq2BbttR+q0QlDQSZDD9gbjKdBhKijpYtJ3nWggWB/LgVHw/Z9IH8ELWAZp0MU5aTrJ8camwDQ4B19/FQzTaVc8r4FDzlHRjYEKxTrBLvCaFQsj2AaewR5YASWKxRmrcrvDczWsoNBiFj7iXLNBcAvWwSx4AnmwBXrBDWOWdCp91HviV9BhsT6uSZYCGUaVYvOoYkNgjv+r7W2eN1Vms3yCD/LKcZXOA7lLMIY3cKE5FT7HWYqN8/cM128fbLPYNXjXHWlOZUKzHdTJLospVxtgFRTUHYMBcMwY3Sh2Go+PwwLdXIJTcAKOKLrIlCLZ2obBBNjkepxxGUpsogNQBEvNdpkwj0U/GyTPphCMX7mpcVMQjFddO8JeqJkICq5JQdvuYmwYVxu7Z2cKU4eSBRod5YAGiaRpggRrNt+HFduC1WZvhVZEaiQoDD+Ek3xMPFuC1r+8jY8fAQYACgJ37BkSsIMAAAAASUVORK5CYII=";r.save();r.globalAlpha=t;this.focus&&(this.runPosition(t,i,e,o,s),n(d.src,function(){r.drawImage(d,i.x,i.y,l/20,g/10)}.bind(this)));r.restore();this.focus||this.rotation(t,t*Math.PI,d,h,a);r.restore()},runPosition:function(t,i,e,o,s){1==s?(i.x+=this.width/8/o*s,i.y+=this.height/12/o*s,i.x=i.x>this.width-this.lineWidth-this.width/30?Math.random()*(this.width-this.lineWidth-this.width/30):i.x,i.y=i.y>this.height/2-this.lineWidth/2+this.height/30?Math.random()*(this.height/2-this.lineWidth/2):i.y):(i.x+=this.width/8/o*s,i.y+=this.height/12/o*s,i.x=i.x<this.width/40+this.lineWidth/2?Math.random()*(this.width-this.lineWidth-this.width/30):i.x,i.y=i.y<this.lineWidth/2-this.height/20?Math.random()*(this.height/2-this.lineWidth/2):i.y)},rotation:function(t,i,e,o,s){this.secCtx.save();this.secCtx.globalAlpha=t;this.secCtx.translate(o+this.width/40,s+this.height/20);this.secCtx.rotate(i);this.secCtx.translate(-o-this.width/40,-s-this.height/20);this.secCtx.drawImage(e,o,s,this.width/20,this.height/10);this.secCtx.restore()},popStars:function(t,i,e,o,s){for(var n=0;15>n;n++)this.drawStar(t,i[n],e,o,s)},enterEvent:function(){this.enterTimer&&this.enterTimer.stop();this.enterTimer=this.enterAnimation.animation(this,1e3)},enterAnimation:function(t,i){this.secCtx.clearRect(-20,-20,1.5*this.width,1.5*this.height);if(this.focus)if(t==i&&this.focus)this.add=1==this.add?-1:1,this.enterTimer&&this.enterTimer.stop(),this.enterTimer=this.enterAnimation.animation(this,1e3);else{var e=t/i;.33>e&&(this.runCase=1);.33<=e&&.66>=e&&(this.runCase=2);.66<=e&&1>=e&&(this.runCase=3);if(this.focus)switch(this.runCase){case 1:this.popStars(3*e,this.arr1,t,i,this.add);this.popStars(3*e,this.arr2,t,i,-this.add);break;case 2:this.popStars(1,this.arr1,t,i,this.add);this.popStars(1,this.arr2,t,i,-this.add);break;case 3:this.popStars(3*(1-e),this.arr1,t,i,this.add),this.popStars(3*(1-e),this.arr2,t,i,-this.add)}}else this.enterTimer&&this.enterTimer.stop()},leaveEvent:function(){this.leaveTimer&&this.leaveTimer.stop();this.leaveTimer=this.leaveAnimation.animation(this,800)},leaveAnimation:function(t,i){this.secCtx.clearRect(-20,-20,1.5*this.width,1.5*this.height);if(!0==this.focus)this.leaveTimer.stop();else if(t!=i||this.focus){var e=t/i;this.focus||(this.add?(this.popStars(e,this.arr1),this.popStars(1-e,this.arr2)):(this.popStars(1-e,this.arr1),this.popStars(e,this.arr2)))}else this.add=this.add?!1:!0,this.leaveTimer&&this.leaveTimer.stop()},initEvent:function(){this.container.bind(_event._enter,function(){this.add=this.focus=!0;this.setPosition();this.enterEvent.delay(this,500)}.bind(this));this.container.bind(_event._leave,function(){this.focus=!1;this.runCase=1;this.setPosition();this.leaveEvent()}.bind(this))}}).extend("GlossyButton");Class("GlossButton1",{create:function(t,i){this.setConfig(t);this.getGradient();this.drawFirstBg();this.drawCover();this.drawTopBottomBg()},setConfig:function(t){this.width=t.width;this.height=t.height;this.bdRadius=t.bdRadius;this.lineWidth=t.lineWidth;this.context=t.context;this.canvas=t.canvas;this.color=t.color;this.parent=parent},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.topBg=this.context.createRadialGradient(this.width/2,-this.lineWidth/2,0,this.width/2,-this.lineWidth/2,this.width/2);this.topBg.addColorStop(0,this.defaultBg[1]);this.topBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.bottomBg=this.context.createRadialGradient(this.width/2,1.5*this.height+this.lineWidth/4,0,this.width/2,1.5*this.height+this.lineWidth/4,this.width/2);this.bottomBg.addColorStop(0,this.defaultBg[1]);this.bottomBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0))},drawTopBottomBg:function(){this.context.save();this.context.scale(1,1/3);this.context.beginPath();this.context.fillStyle=this.topBg;this.context.fillRect(this.lineWidth/2,1.5*this.lineWidth,this.width,1.5*this.height);this.context.closePath();this.context.beginPath();this.context.fillStyle=this.bottomBg;this.context.fillRect(this.lineWidth/2,this.lineWidth,this.width,1.5*this.height-2.5*this.lineWidth);this.context.restore()},drawCover:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.height/10);this.context.lineTo(this.lineWidth/2,this.height/10);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.lineTo(this.width-this.lineWidth,this.lineWidth/2+this.lineWidth/20);var t=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height/2);t.addColorStop(0,"rgba(255,255,255,0.05)");t.addColorStop(1,"rgba(255,255,255,0.1)");this.context.fillStyle=t;this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.height/10);this.context.quadraticCurveTo(this.lineWidth/2+.85*this.width,this.lineWidth/2+.55*this.height,this.width-this.lineWidth,this.lineWidth/2+this.lineWidth/20);this.context.fill();this.context.closePath();this.context.beginPath();this.context.fillStyle=t;this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.height/3);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.lineTo(this.lineWidth/2+.9*this.width,this.lineWidth/2);this.context.fill()}}).extend("GlossyButton");Class("GlossButton2",{create:function(t,i){this.setConfig(t);this.getGradient();this.drawCenterBg();this.drawCover()},setConfig:function(t){this.width=t.width;this.height=t.height;this.bdRadius=t.bdRadius;this.lineWidth=t.lineWidth;this.context=t.context;this.canvas=t.canvas;this.parent=parent;this.color=t.color},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.center=this.context.createRadialGradient(this.width/2,this.height+this.lineWidth/2,0,this.width/2,this.height+this.lineWidth/2,this.width/2);this.center.addColorStop(0,this.defaultBg[1]);this.center.addColorStop(1,Color(this.defaultBg[1]).rgba(0))},drawCenterBg:function(){this.context.save();this.context.scale(1,.25);this.context.beginPath();this.context.fillStyle=this.center;this.context.fillRect(this.lineWidth/2,2*this.lineWidth,this.width,2*this.height);this.context.closePath();this.context.restore()},drawCover:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.height/10);this.context.lineTo(this.lineWidth/2,this.height/10);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.lineTo(this.width-this.lineWidth,this.lineWidth/2+this.lineWidth/20);var t=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height/2);t.addColorStop(0,"rgba(255,255,255,0.05)");t.addColorStop(1,"rgba(255,255,255,0.2)");this.context.fillStyle=t;this.context.moveTo(this.lineWidth/2,this.height/4);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/4-this.lineWidth/4,this.bdRadius);this.context.lineTo(this.lineWidth/2+this.width,this.height/4);this.context.moveTo(this.lineWidth/2,this.height/4);this.context.fill();this.context.closePath()}}).extend("GlossyButton");Class("GlossButton3",{create:function(t,i){this.setConfig(t);this.getGradient();this.drawCover();this.drawBottomBg()},setConfig:function(t){this.width=t.width;this.height=t.height;this.bdRadius=t.bdRadius;this.lineWidth=t.lineWidth;this.context=t.context;this.canvas=t.canvas;this.parent=parent;this.color=t.color},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.center=this.context.createRadialGradient(this.width/2,1.8*this.height+this.lineWidth/2,0,this.width/2,1.8*this.height+this.lineWidth/2,this.width/2);this.center.addColorStop(0,this.defaultBg[1]);this.center.addColorStop(1,Color(this.defaultBg[1]).rgba(0))},drawBottomBg:function(){this.context.save();this.context.scale(1,.25);this.context.beginPath();this.context.fillStyle=this.center;this.context.fillRect(this.lineWidth/2,2*this.lineWidth,this.width,2*this.height-4*this.lineWidth);this.context.closePath();this.context.restore()},drawCover:function(){this.context.beginPath();var t=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height/2);t.addColorStop(0,"rgba(255,255,255,0.2)");t.addColorStop(1,"rgba(255,255,255,0.05)");this.context.fillStyle=t;this.context.moveTo(this.lineWidth/2,this.height/8*3);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/4-this.lineWidth/4,this.bdRadius);this.context.lineTo(this.lineWidth/2+this.width,this.height/8*3);this.context.fill();this.context.closePath();this.context.save();this.context.scale(1,.25);this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.height/8*12);this.context.fillStyle=this.defaultBg[0];this.context.quadraticCurveTo(this.width/2,this.height/6*4,this.width-this.lineWidth/2,this.height/8*12);this.context.fill();this.context.closePath();this.context.restore()}}).extend("GlossyButton");Class("GlossButton4",{create:function(t,i){this.setConfig(t);this.getGradient();this.drawCenterBg();this.drawCover();this.drawBorder()},setConfig:function(t){this.width=t.width;this.height=t.height;this.bdRadius=t.bdRadius;this.lineWidth=t.lineWidth;this.context=t.context;this.canvas=t.canvas;this.parent=parent;this.color=t.color},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.leftBg=this.context.createRadialGradient(this.width/9,this.height/2+this.lineWidth/2,0,this.width/9,this.height/2+this.lineWidth/2,.45*this.width);this.leftBg.addColorStop(0,this.defaultBg[1]);this.leftBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.rightBg=this.context.createRadialGradient(.9*this.width,this.height/2*3+this.lineWidth/2,0,.9*this.width,this.height/2*3+this.lineWidth/2,.45*this.width);this.rightBg.addColorStop(0,this.defaultBg[1]);this.rightBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0))},drawCenterBg:function(){this.context.save();this.context.scale(1,.25);this.context.beginPath();this.context.fillStyle=this.leftBg;this.context.moveTo(this.bdRadius+this.lineWidth/1.8,2*this.lineWidth-this.lineWidth/10);this.context.arcTo(this.width-this.lineWidth/2,2*this.lineWidth,this.width-this.lineWidth/2,2*this.height-2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,2*this.height-2*this.lineWidth,this.lineWidth/1.8,2*this.height-2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.lineWidth/1.8,2*this.height-2*this.lineWidth,this.lineWidth/1.8,2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.lineWidth/1.8,1.8*this.lineWidth,this.width-this.lineWidth/2,2*this.lineWidth,2*this.bdRadius);this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.bdRadius+this.lineWidth/2,2*this.lineWidth-this.lineWidth/10);this.context.arcTo(this.width-this.lineWidth/1.8,2*this.lineWidth,this.width-this.lineWidth/2,2*this.height-2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.width-this.lineWidth/1.8,2*this.height-1.8*this.lineWidth,this.lineWidth/2,2*this.height-2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.lineWidth/2,2*this.height-2*this.lineWidth,this.lineWidth/2+this.lineWidth/10,2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.lineWidth/2,2*this.lineWidth,this.width-this.lineWidth/2,2*this.lineWidth,2*this.bdRadius);this.context.fillStyle=this.rightBg;this.context.fill();this.context.closePath();this.context.restore()},drawCover:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.bdRadius);this.context.lineTo(this.lineWidth/2,this.height/8*3.5);this.context.quadraticCurveTo(this.width/5,this.height/10,.9*this.width,this.lineWidth/2);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.height/8*3.5,this.bdRadius);var t=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height/2);t.addColorStop(0,"rgba(255,255,255,0.05)");t.addColorStop(1,"rgba(255,255,255,0.1)");this.context.fillStyle=t;this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.bdRadius);this.context.lineTo(this.lineWidth/2,this.height/8*3.5);this.context.quadraticCurveTo(this.width/2,.4*this.height,.9*this.width,this.lineWidth/2);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.height/8*3.5,this.bdRadius);this.context.fillStyle=t;this.context.fill();this.context.closePath()},drawBorder:function(){this.context.beginPath();this.context.lineWidth=this.lineWidth/10;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.lineWidth/2,this.height/2-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height/2-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.strokeStyle=this.borderColor1;this.context.stroke()}}).extend("GlossyButton");Class("GlossButton5",{create:function(t,i){this._super(t,i)},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.leftBg=this.context.createRadialGradient(this.width/15,this.height+this.lineWidth/2,0,this.width/15,this.height+this.lineWidth/2,.45*this.width);this.leftBg.addColorStop(0,this.defaultBg[1]);this.leftBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.rightBg=this.context.createRadialGradient(.9*this.width,this.height+this.lineWidth/2,0,.9*this.width,this.height+this.lineWidth/2,.45*this.width);this.rightBg.addColorStop(0,this.defaultBg[1]);this.rightBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.center=this.context.createRadialGradient(this.width/2,this.height+this.lineWidth/2,0,this.width/2,this.height+this.lineWidth/2,this.width/2);this.center.addColorStop(0,this.defaultBg[1]);this.center.addColorStop(1,Color(this.defaultBg[1]).rgba(0))}}).extend("GlossButton4");Class("GlossButton6",{create:function(t,i){this._super(t,i)},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.leftBg=this.context.createRadialGradient(this.width/2+this.lineWidth,this.lineWidth,0,this.width/2+this.lineWidth,this.lineWidth,this.width/2);this.leftBg.addColorStop(0,this.defaultBg[1]);this.leftBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.rightBg=this.context.createRadialGradient(this.width/2+this.lineWidth/4,2*this.height-2*this.lineWidth,0,this.width/2+this.lineWidth/4,2*this.height-2*this.lineWidth,this.width/2);this.rightBg.addColorStop(0,this.defaultBg[1]);this.rightBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0))}}).extend("GlossButton4");Class("PushButton",{create:function(t,i){t.width&&t.height&&t.id&&i&&(this.width=t.width/.6,this.height=t.height,this.bdRadius=this.height/6,this.id=t.id,this.lineWidth=this.height/30,this.parent=i,this.enter=!1,this.initConfig(),this.initHtml(),this.getGradient(),this.drawButton(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+.6*this.width+"' height='"+this.height+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.context.scale(.6,1);this.parent.append(this.canvas)},initCss:function(){this.canvas.css({position:"absolute",left:"0",top:"0"})},onResize:function(t,i){this.lineWidth=i/30;this.width=t/.6;this.height=i;this.bdRadius=this.height/6;this.canvas[0].width=.6*this.width;this.canvas[0].height=this.height;this.context.scale(.6,1);this.getGradient();this.drawButton()},draw:function(){this.context.clearRect(0,0,this.width+10,this.height+10);this.context.lineWidth=this.lineWidth;this.context.beginPath();this.context.moveTo(this.bdRadius+2*this.lineWidth,this.lineWidth);this.context.arcTo(this.width-2*this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.width-2*this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(2*this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.arcTo(2*this.lineWidth,this.lineWidth,this.width-this.lineWidth/2,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.fillStyle=this.outerBg;this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(4*this.lineWidth,2*this.lineWidth);var t=this.context.createLinearGradient(0,this.lineWidth,0,this.height/2+this.lineWidth);t.addColorStop(0,"rgba(255,255,255,0.90)");t.addColorStop(1,"rgba(255,255,255,0.2)");this.context.fillStyle=t;this.context.arcTo(this.width-4*this.lineWidth,2*this.lineWidth,this.width-4*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(this.width-4*this.lineWidth,this.height/2+this.lineWidth,4*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(4*this.lineWidth,this.height/2+this.lineWidth,4*this.lineWidth,this.lineWidth,this.bdRadius);this.context.arcTo(4*this.lineWidth,2*this.lineWidth,this.width-4*this.lineWidth,this.lineWidth,this.bdRadius);this.context.fill();this.context.closePath()},initConfig:function(){this.pushs=[{defaultBg:"rgb(78,78,78);rgb(11,11,11);rgb(182,182,182)",enterBg:"rgb(11,11,11);rgb(101,101,101);rgb(255,255,255)"},{defaultBg:"rgb(1,46,90);rgb(1,83,165);rgb(81,180,249)",enterBg:"rgb(1,46,90);rgb(42,147,253);rgb(255,255,255)"},{defaultBg:"rgb(149,13,13);rgb(200,0,0);rgb(234,111,111)",enterBg:"rgb(120,0,0);rgb(199,33,33);rgb(255,255,255)"},{defaultBg:"rgb(99,144,0);rgb(128,199,16);rgb(198,230,150)",enterBg:"rgb(97,140,0);rgb(136,204,35);rgb(255,255,255)"},{defaultBg:"rgb(125,63,1);rgb(174,90,9);rgb(249,180,92)",enterBg:"rgb(166,78,1);rgb(229,128,26);rgb(255,255,255)"},{defaultBg:"rgb(122,122,1);rgb(170,170,6);rgb(251,251,72)",enterBg:"rgb(152,151,1);rgb(249,249,1);rgb(254,249,249)"}]},getGradient:function(){this.defaultBg=this.pushs[this.id-1].defaultBg.split(";");this.enterBg=this.pushs[this.id-1].enterBg.split(";");this.outerBg=this.context.createRadialGradient(this.width/2,this.height/2,0,this.width/2,this.height/2,this.width/3*2)},drawButton:function(){this.context.clearRect(0,0,this.width,this.height);this.context.beginPath();this.outerBg.addColorStop(0,this.defaultBg[0]);this.outerBg.addColorStop(.25,this.defaultBg[1]);this.outerBg.addColorStop(.8,this.defaultBg[2]);this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw()},enterEvent:function(){this.getGradient();(function(t,i){this.getGradient();if(this.enter){var e=.2+.43*t/i;this.outerBg.addColorStop(0,this.enterBg[0]);this.outerBg.addColorStop(e,this.enterBg[1]);this.outerBg.addColorStop(.75,this.enterBg[2]);this.outerBg.addColorStop(1,this.enterBg[2])}else e=.6-.4*t/i,this.outerBg.addColorStop(0,this.defaultBg[0]),this.outerBg.addColorStop(e,this.defaultBg[1]),this.outerBg.addColorStop(.8,this.defaultBg[2]),this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw()}).animation(this,300)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.enter=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.enter=!1;this.enterEvent()}.bind(this))}});Class("LineLightButton",{create:function(t,i){i&&(this.lineWidth=t.height/30,this.width=t.width-this.lineWidth,this.height=t.height-this.lineWidth,this.bdRadius=this.height/6,this.id=t.id,this.parent=i,this.enter=!1,this.initConfig(),this.initHtml(),this.initCss(),this.getGradient(),this.drawButton(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.parent.append(this.canvas)},onResize:function(t,i){this.lineWidth=i/30;this.width=t;this.height=i;this.bdRadius=this.height/6;this.canvas[0].width=this.width;this.canvas[0].height=this.height;this.getGradient();this.drawButton()},initCss:function(){this.canvas.css({position:"absolute",left:"0",top:"0"})},draw:function(){this.context.clearRect(0,0,this.width+10,this.height+10);this.context.beginPath();this.context.strokeStyle=this.borderColor1;this.context.moveTo(this.bdRadius+this.lineWidth,this.lineWidth);this.context.arcTo(this.width-this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.lineWidth,this.lineWidth,this.width-this.lineWidth/2,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.fillStyle=this.outerBg;this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(2*this.lineWidth,2*this.lineWidth);var t=this.context.createLinearGradient(0,this.lineWidth,0,this.height/2+this.lineWidth);t.addColorStop(0,"rgba(255,255,255,0.90)");t.addColorStop(1,"rgba(255,255,255,0.2)");this.context.fillStyle=t;this.context.arcTo(this.width-2*this.lineWidth,2*this.lineWidth,this.width-2*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(this.width-2*this.lineWidth,this.height/2+this.lineWidth,2*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,this.height/2+this.lineWidth,2*this.lineWidth,2*this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,2*this.lineWidth,this.width-2*this.lineWidth,2*this.lineWidth,this.bdRadius);this.context.fill();this.context.closePath()},initConfig:function(){this.pushs=[{defaultBg:"rgb(81,76,25);rgb(244,227,73);rgb(81,76,25)",enterBg:"rgb(81,76,25);rgb(244,227,73);rgb(185,167,21)"},{defaultBg:"rgb(26,11,1);rgb(245,107,16);rgb(26,11,1)",enterBg:"rgb(26,11,1);rgb(245,107,16);rgb(181,77,9)"},{defaultBg:"rgb(7,70,12);rgb(67,229,82);rgb(7,70,12)",enterBg:"rgb(7,70,12);rgb(35,250,35);rgb(8,98,11)"},{defaultBg:"rgb(112,8,8);rgb(253,76,76);rgb(31,9,9)",enterBg:"rgb(112,8,8);rgb(253,76,76);rgb(187,18,18)"},{defaultBg:"rgb(12,61,123);rgb(59,155,252);rgb(11,22,32)",enterBg:"rgb(12,61,123);rgb(59,155,252);rgb(14,86,184)"}]},getGradient:function(){this.defaultBg=this.pushs[this.id-1].defaultBg.split(";");this.enterBg=this.pushs[this.id-1].enterBg.split(";");this.outerBg=this.context.createLinearGradient(0,this.lineWidth,0,this.height+this.lineWidth)},drawButton:function(){this.context.clearRect(0,0,this.width+this.lineWidth,this.height+this.lineWidth);this.context.beginPath();this.outerBg.addColorStop(0,this.defaultBg[0]);this.outerBg.addColorStop(.5,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw();this.drawHint()},drawHint:function(){this.context.beginPath();this.context.strokeStyle="#333";this.context.fillStyle="rgba(255,255,255,0.4)";this.context.moveTo(.9*this.bdRadius,this.height-.88*this.bdRadius-this.lineWidth);this.context.bezierCurveTo(.5*this.bdRadius,this.height+.2*this.bdRadius-this.lineWidth,2*this.lineWidth,this.height-.2*this.bdRadius-this.lineWidth,this.width-this.bdRadius,this.height-.1*this.bdRadius-this.lineWidth);this.context.closePath();this.context.fill();this.context.beginPath();this.context.strokeStyle="transparent";this.context.fillStyle=this.outerBg;this.context.moveTo(.9*this.bdRadius,this.height-this.bdRadius-this.lineWidth);this.context.bezierCurveTo(.5*this.bdRadius,this.height-.5*this.bdRadius-this.lineWidth,this.width/3,this.height-.05*this.bdRadius-this.lineWidth,this.width/3*2,this.height-.3*this.bdRadius-this.lineWidth);this.context.lineTo(this.width-this.bdRadius,this.height-.2*this.bdRadius-this.lineWidth);this.context.closePath();this.context.fill()},enterEvent:function(){this.getGradient();this.change=function(t,i){this.getGradient();if(this.enter){var e=.5+.35*t/i;this.outerBg.addColorStop(0,this.enterBg[0]);this.outerBg.addColorStop(e,this.enterBg[1]);this.outerBg.addColorStop(1,this.enterBg[2])}else e=.85-.35*t/i,this.outerBg.addColorStop(0,this.defaultBg[0]),this.outerBg.addColorStop(e,this.defaultBg[1]),this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw();this.drawHint()};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.enter=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.enter=!1;this.enterEvent()}.bind(this))}});Class("StarButton",{create:function(t,i){i&&(this.lineWidth=t.height/30,this.width=t.width-this.lineWidth,this.height=t.height-this.lineWidth,this.bdRadius=parseInt(this.height/12),this.id=t.id,this.parent=i,this.enter=!1,this.initConfig(),this.getGradient(),this.initHtml(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+(this.width+50)+"' height='"+(this.height+50)+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.context.translate(20,20);this.parent.append(this.canvas);this.drawButton()},initCss:function(){this.canvas.css({position:"absolute",left:"-20px",top:"-20px"})},onResize:function(t,i){this.lineWidth=i/30;this.width=t-this.lineWidth;this.height=i-this.lineWidth;this.bdRadius=parseInt(this.height/12);this.canvas[0].width=this.width+50;this.canvas[0].height=this.height+50;this.context.translate(20,20);this.getGradient();this.drawButton()},draw:function(){this.context.clearRect(-50,-50,this.width+100,this.height+100);this.context.shadowColor=1==this.id||5==this.id?this.enterBg[1]:this.enterBg[0];this.context.shadowBlur=this.height/10;this.context.lineWidth=this.lineWidth;this.context.fillStyle=this.outerBg;this.context.beginPath();this.context.fillStyle=this.outerBg;this.context.moveTo(this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fill();this.context.closePath();this.context.beginPath();this.context.strokeStyle=this.borderColor1;this.context.beginPath();this.context.moveTo(this.bdRadius+1.5*this.lineWidth,1.5*this.lineWidth);this.context.arcTo(this.width-2*this.lineWidth,1.5*this.lineWidth,this.width-2*this.lineWidth,this.height-2*this.lineWidth,this.bdRadius);this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(this.width-2*this.lineWidth,this.bdRadius+this.lineWidth);this.context.strokeStyle=this.borderColor2;this.context.arcTo(this.width-2*this.lineWidth,this.height-2*this.lineWidth,1.5*this.lineWidth,this.height-2*this.lineWidth,this.bdRadius);this.context.stroke();this.context.closePath();this.context.strokeStyle=this.borderColor3;this.context.beginPath();this.context.moveTo(this.width-2*this.lineWidth-this.bdRadius,this.height-2*this.lineWidth);this.context.arcTo(1.5*this.lineWidth,this.height-2*this.lineWidth,1.5*this.lineWidth,1.5*this.lineWidth,this.bdRadius);this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(1.5*this.lineWidth,this.height-2*this.lineWidth);this.context.strokeStyle=this.borderColor4;this.context.arcTo(1.5*this.lineWidth,1.5*this.lineWidth,this.width-2*this.lineWidth,1.5*this.lineWidth,this.bdRadius);this.context.stroke();this.context.closePath()},initConfig:function(){this.stars=[{defaultBg:"rgba(0,0,204,1);rgb(14,6,89);rgb(0,0,0)",enterBg:"#fff;#00f"},{defaultBg:"rgb(0,0,30);rgb(0,0,15);rgb(0,0,0)",enterBg:"#C48939;#F5A505"},{defaultBg:"rgb(26,0,154);rgb(16,0,61);rgb(0,0,0)",enterBg:"#F00898;#1A0060"},{defaultBg:"rgb(0,16,0);rgb(0,8,0);rgb(0,0,0)",enterBg:"#0AFA00;#000B00"},{defaultBg:"rgb(173,15,203);rgb(129,7,107);rgb(112,0,0)",enterBg:"#F8F1F6;#8A0BA0"}]},getGradient:function(){this.defaultBg=this.stars[this.id-1].defaultBg.split(";");this.enterBg=this.stars[this.id-1].enterBg.split(";")},drawButton:function(){this.enterBg1=Color(this.enterBg[0]);this.enterBg2=Color(this.enterBg[1]);this.context.clearRect(-50,-50,this.width+50,this.height+50);this.context.beginPath();this.setColor();this.draw()},setColor:function(){this.borderColor1=this.context.createLinearGradient(0,0,this.width/2,0);this.borderColor1.addColorStop(0,this.enterBg1.rgba(.5));this.borderColor1.addColorStop(.25,this.enterBg1.rgba(1));this.borderColor1.addColorStop(1,this.enterBg1.rgba(0));this.borderColor2=this.context.createLinearGradient(0,this.height/2-this.lineWidth,0,this.height);this.borderColor2.addColorStop(0,this.enterBg1.rgba(0));this.borderColor2.addColorStop(1,this.enterBg1.rgba(.5));this.borderColor3=this.context.createLinearGradient(this.width,0,this.width/2,0);this.borderColor3.addColorStop(0,this.enterBg1.rgba(.5));this.borderColor3.addColorStop(1,this.enterBg1.rgba(0));this.borderColor4=this.context.createLinearGradient(0,this.height+this.lineWidth,0,0);this.borderColor4.addColorStop(0,this.enterBg1.rgba(0));this.borderColor4.addColorStop(1,this.enterBg1.rgba(.7));this.outerBg=this.context.createRadialGradient(this.width/6,1.5*this.height,this.height/4,this.width/4,this.height+this.lineWidth,this.width);this.outerBg.addColorStop(0,this.defaultBg[0]);this.outerBg.addColorStop(.5,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[2])},insetColor:function(t){t||(t=1);this.starBg1=this.context.createRadialGradient(this.bdRadius+.1*this.width,2*this.lineWidth,0,this.bdRadius+.1*this.width,2*this.lineWidth,this.height/(11-5*t));this.starBg1.addColorStop(0,this.enterBg1.rgba(.6));this.starBg1.addColorStop(.5,this.enterBg1.rgba(.1));this.starBg1.addColorStop(1,this.enterBg2.rgba(0));this.lineBG1=this.context.createLinearGradient(1,0,this.bdRadius+.2*this.width,0);this.lineBG1.addColorStop(0,this.enterBg2.rgba(.2));this.lineBG1.addColorStop(1,this.enterBg1.rgba(.4));this.starOutBg1=this.context.createRadialGradient(this.bdRadius+.1*this.width,2*this.lineWidth,0,this.bdRadius+.1*this.width,2*this.lineWidth,.5*this.height*t);this.starOutBg1.addColorStop(0,this.enterBg1.rgba(.1));this.starOutBg1.addColorStop(1,this.enterBg1.rgba(0));this.starBg2=this.context.createRadialGradient(.85*this.width+this.bdRadius,this.height-2*this.lineWidth,0,.85*this.width+this.bdRadius,this.height-2*this.lineWidth,this.height/(11-5*t));this.starBg2.addColorStop(0,this.enterBg1.rgba(.6));this.starBg2.addColorStop(.5,this.enterBg1.rgba(.1));this.starBg2.addColorStop(1,this.enterBg2.rgba(0));this.lineBG2=this.context.createLinearGradient(.9*this.width+this.bdRadius,0,this.width+this.bdRadius+25*t,0);this.lineBG2.addColorStop(0,this.enterBg1.rgba(.4));this.lineBG2.addColorStop(1,this.enterBg2.rgba(.2));this.starOutBg2=this.context.createRadialGradient(.85*this.width+this.bdRadius,this.height-2*this.lineWidth,0,.85*this.width+this.bdRadius,this.height-2*this.lineWidth,.5*this.height*t);this.starOutBg2.addColorStop(0,this.enterBg1.rgba(.1));this.starOutBg2.addColorStop(1,this.enterBg1.rgba(0))},drawStar:function(t){t||(t=1);this.context.beginPath();this.context.lineWidth=this.height/100;this.context.shadowColor=this.enterBg1.rgba(1);this.context.shadowBlur=this.height/50;this.context.moveTo(this.lineWidth-25*t,1.5*this.lineWidth);this.context.strokeStyle=this.lineBG1;this.context.lineTo(this.bdRadius+.1*this.width,1.5*this.lineWidth);this.context.stroke();this.context.closePath();this.context.beginPath();this.context.fillStyle=this.starOutBg1;this.context.shadowColor=this.enterBg2.rgba(1);this.context.shadowBlur=20;this.context.arc(this.bdRadius+.1*this.width,2*this.lineWidth,this.height/(2-1*t),0,2*Math.PI,!1);this.context.fill();this.context.closePath();this.context.beginPath();this.context.fillStyle=this.starBg1;this.context.shadowColor=this.enterBg1.rgba(1);this.context.shadowBlur=20;this.context.arc(this.bdRadius+.1*this.width,2*this.lineWidth,this.height/(10-5*t),0,2*Math.PI,!1);this.context.fill();this.context.closePath();this.context.beginPath();this.context.shadowColor=this.enterBg1.rgba(1);this.context.shadowBlur=this.height/50;this.context.moveTo(.9*this.width+this.bdRadius,this.height-2*this.lineWidth);this.context.strokeStyle=this.lineBG2;this.context.lineTo(this.width-this.lineWidth+25*t,this.height-2*this.lineWidth);this.context.stroke();this.context.closePath();this.context.beginPath();this.context.fillStyle=this.starOutBg2;this.context.shadowColor=this.enterBg2.rgba(1);this.context.shadowBlur=20;this.context.arc(.85*this.width+this.bdRadius,this.height-2*this.lineWidth,this.height/(2-1*t),0,2*Math.PI,!1);this.context.fill();this.context.closePath();this.context.beginPath();this.context.fillStyle=this.starBg2;this.context.shadowColor=this.enterBg1.rgba(1);this.context.shadowBlur=20;this.context.arc(.85*this.width+this.bdRadius,this.height-2*this.lineWidth,this.height/(10-5*t),0,2*Math.PI,!1);this.context.fill();this.context.closePath()},enterEvent:function(){this.getGradient();this.change=function(t,i){this.draw();this.hasChange?t==i?(this.hasChange=!1,this.focus&&(this.timer&&this.timer.stop(),this.timer=this.change.animation(this,400))):(this.insetColor(1-t/i),this.drawStar(1-t/i)):t==i?(this.hasChange=!0,this.focus&&(this.timer&&this.timer.stop(),this.timer=this.change.animation(this,400))):(this.insetColor(t/i),this.drawStar(t/i))};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.focus=!0;this.hasChange=!1;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.context.clearRect(-50,-50,this.width+50,this.height+50);this.drawButton()}.bind(this))}});Class("GlitterButton",{create:function(t,i){i&&(this.lineWidth=t.height/40,this.width=t.width,this.height=t.height,this.id=t.id,this.bdRadius=this.height/20,this.parent=i,this.enter=!1,this.initConfig(),this.initHtml(),this.initCss(),this.getGradient(),this.setEllipseBg(),this.draw(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+this.width+"' height='"+(this.height+this.height/20)+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.parent.append(this.canvas)},initCss:function(){this.canvas.css({position:"absolute",background:"#eee",left:"0",top:"0"})},onResize:function(t,i){this.lineWidth=i/40;this.width=t;this.height=i;this.bdRadius=this.height/20;this.canvas[0].width=t;this.canvas[0].height=i+this.height/20;this.getGradient();this.setEllipseBg();this.draw()},draw:function(){this.context.clearRect(0,0,this.width+10,3*this.height+10);this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.outerBg;this.context.fill();this.context.closePath();this.drawCover();this.drawEllipse();this.drawBottomLine()},drawBottomLine:function(){this.context.beginPath();this.context.lineWidth=this.lineWidth/2;this.context.moveTo(this.lineWidth/2,this.lineWidth/2);this.context.lineTo(this.width-this.lineWidth/2,this.lineWidth/2);var t=this.context.createLinearGradient(this.lineWidth/2,0,this.width-this.lineWidth/2,0);t.addColorStop(0,Color(this.defaultBg[2]).rgba(.05));t.addColorStop(.5,Color(this.defaultBg[2]).rgba(.3));t.addColorStop(1,Color(this.defaultBg[2]).rgba(.05));this.context.strokeStyle=t;this.context.stroke();this.context.closePath();this.context.save();this.context.beginPath();this.context.shadowColor=this.enterBg[2];this.context.shadowBlur=this.height/30;this.context.shadowOffsetX=0;this.context.shadowOffsetY=this.height/40;t=this.context.createLinearGradient(this.lineWidth/2,0,this.width-this.lineWidth/2,0);t.addColorStop(.1,"rgba(255,255,255,0.3)");t.addColorStop(.5,"rgba(255,255,255,1)");t.addColorStop(.9,"rgba(255,255,255,0.3)");this.context.strokeStyle=t;this.context.lineWidth=0;this.focus&&(this.context.lineWidth=2);this.context.moveTo(this.lineWidth/2,this.height-this.lineWidth/2);this.context.lineTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2);this.context.stroke();this.context.closePath();this.context.restore()},drawCover:function(){this.context.save();this.context.beginPath();this.context.moveTo(this.lineWidth,this.lineWidth);var t=this.context.createLinearGradient(0,this.lineWidth,0,this.height/2+this.lineWidth);t.addColorStop(0,"rgba(255,255,255,0.8)");t.addColorStop(.5,"rgba(255,255,255,0.35)");t.addColorStop(1,"rgba(255,255,255,0.2)");this.context.fillStyle=t;this.context.arcTo(this.width-this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.height/2.6+this.lineWidth,this.bdRadius);this.context.lineTo(this.width-this.lineWidth,this.height/2.6+this.lineWidth,this.lineWidth,this.height/2.6+this.lineWidth);this.context.lineTo(this.lineWidth,this.height/2.6+this.lineWidth,this.lineWidth,this.lineWidth);this.context.arcTo(this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.lineWidth,this.bdRadius);this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.lineWidth,this.height/2.6+this.lineWidth);this.context.bezierCurveTo(this.width/4+this.lineWidth/2,this.height/2.6+this.lineWidth+this.height/8,.75*this.width-this.lineWidth/2,this.height/2.6+this.lineWidth+this.height/8,this.width-this.lineWidth/2,this.height/2.6+this.lineWidth);this.context.fill();this.context.closePath();this.context.restore()},drawEllipse:function(){this.context.save();this.context.scale(1,1/3);this.context.beginPath();this.context.shadowColor=Color(this.defaultBg[2]).rgba(.9);this.context.shadowBlur=this.height/3;this.context.fillStyle=this.enterRoundBg;this.context.fillRect(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,3*(this.height-this.lineWidth/2));this.context.fill();this.context.closePath();this.context.restore()},initConfig:function(){this.glitters=[{defaultBg:"#FFFFFF;#8BA8B1;#00AAFC",enterBg:"#03AaFF;#fff;#000"},{defaultBg:"#9195A4;#060606;#0336FF",enterBg:"#0022ff;#fff;#1534E3"},{defaultBg:"#EBE9E7;#ACACAB;#FA6703;",enterBg:"#E1CD57;#fff;#000"},{defaultBg:"#FFFFFF;#F98435;#F73BF7;",enterBg:"#FFCD05;#fff;#000"},{defaultBg:"#D0CED1;#0C0C0C;#DA09AE;",enterBg:"#A70080;#fff;#F000E8"},{defaultBg:"#E0DEDB;#080808;#FF9005",enterBg:"#EA7E00;#fff;#F0BC00"}]},getGradient:function(){this.defaultBg=this.glitters[this.id-1].defaultBg.split(";");this.enterBg=this.glitters[this.id-1].enterBg.split(";");var t=Color(this.enterBg[0]);this.outerBg=this.context.createLinearGradient(0,5,0,this.height+5);this.outerBg.addColorStop(0,this.defaultBg[0]);this.outerBg.addColorStop(.4,Color(this.defaultBg[1]).rgba(.6));this.outerBg.addColorStop(1,this.defaultBg[1]);this.leaveShineBg=this.context.createRadialGradient(.5*this.width,2.25*this.height,0,.5*this.width,2.25*this.height,this.width/3*2);this.leaveShineBg.addColorStop(0,t.rgba(1));this.leaveShineBg.addColorStop(.6,t.rgba(.6));this.leaveShineBg.addColorStop(1,t.rgba(0))},setShineColor:function(t){t=Color(this.enterBg[1]);var i=Color(this.enterBg[0]);this.enterShineBg=this.context.createRadialGradient(.5*this.width+this.lineWidth/2,this.height/2*3,0,.5*this.width+this.lineWidth/2,this.height/2*3,this.width/1.5);2==this.shineCase?this.enterShineBg.addColorStop(0,t.rgba(.65)):this.enterShineBg.addColorStop(0,t.rgba(.45));this.enterShineBg.addColorStop(.9,i.rgba(0))},setEllipseBg:function(){var t=Color(this.enterBg[0]);this.enterRoundBg=this.context.createRadialGradient(.5*this.width,this.height/2*3,0,.5*this.width,this.height/2*3,(this.width-this.lineWidth)/1.7);this.focus?(this.enterRoundBg.addColorStop(0,t.rgba(.25)),this.enterRoundBg.addColorStop(.4,t.rgba(.1)),this.enterRoundBg.addColorStop(.7,t.rgba(.05)),this.enterRoundBg.addColorStop(1,t.rgba(0))):(this.enterRoundBg.addColorStop(0,Color(this.defaultBg[2]).rgba(.2)),this.enterRoundBg.addColorStop(.8,Color(this.defaultBg[2]).rgba(0)))},drawShine:function(t){t||(t=1);this.context.save();this.context.scale(1,1/3);this.context.beginPath();this.context.shadowColor=Color(this.enterBg[1]).rgba(1);this.context.shadowBlur=this.height;this.context.fillStyle=this.leaveShineBg;this.context.fillRect(this.lineWidth/2,this.lineWidth/2,this.width,3*this.height);this.context.fill();this.context.closePath();this.context.beginPath();this.context.shadowColor=Color(this.enterBg[1]).rgba(1);this.context.shadowBlur=this.height/2;this.context.fillStyle=this.enterShineBg;this.context.fillRect(this.width/2+this.lineWidth-(this.width/2+this.lineWidth/2)*t,this.lineWidth,1.1*this.width*t-.1*this.width,3*this.height);this.context.fill();this.context.closePath();this.context.restore()},enterEvent:function(){this.getGradient();this.change=function(t,i){var e=this.focus?t/i:1-t/i;this.setShineColor(1);this.draw();this.drawShine(e);t==i&&(this.focus?(this.shineTimer&&this.shineTimer.stop(),this.shinePlayFun.animation(this,100),this.lineTimer&&this.shineTimer.stop(),this.lineRunFun.animation(this,1e3)):(this.setShineColor(1),this.draw()))};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400);this.shinePlayFun=function(t,i){1==this.shineCase?t==i&&(this.shineCase=2,this.focus?(this.shineTimer&&this.shineTimer.stop(),this.shineTimer=this.shinePlayFun.animation(this,100)):this.draw()):t==i&&(this.shineCase=1,this.focus?(this.shineTimer&&this.shineTimer.stop(),this.shineTimer=this.shinePlayFun.animation(this,100)):this.draw());this.setShineColor(1);this.draw();this.drawShine(1)};this.lineRunFun=function(t,i){var e=t/i;this.stop?(this.setEllipseBg(),this.draw()):(this.drawRunLine(e),t==i&&(this.focus?(this.timer0&&(clearTimeout(this.timer0),this.timer0=null),this.timer0=setTimeout(function(){this.lineTimer&&this.lineTimer.stop();this.lineTimer=this.lineRunFun.animation(this,1e3)}.bind(this),1e3)):(this.setEllipseBg(),this.draw())))}},drawRunLine:function(t){this.context.beginPath();this.context.lineWidth=this.lineWidth;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.lineTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2);this.context.lineTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius+this.lineWidth/2);1!=t?(this.runLine=this.context.createLinearGradient(this.lineWidth/2,this.lineWidth/2,this.width,this.height),this.runLine.addColorStop(0,"rgba(255,255,255,0)"),this.runLine.addColorStop(.02+.82*t,"rgba(255,255,255,0)"),this.runLine.addColorStop(.1+.82*t,"rgba(255,255,255,1)"),this.runLine.addColorStop(.18+.82*t,"rgba(255,255,255,0)")):(this.runLine=this.context.createLinearGradient(this.lineWidth/2,this.lineWidth/2,this.width,this.height),this.runLine.addColorStop(0,"rgba(255,255,255,0)"));this.runLine.addColorStop(1,"rgba(255,255,255,0)");this.context.strokeStyle=this.runLine;this.context.stroke();this.context.closePath()},initEvent:function(){this.canvas.bind(_event._enter,function(){this.stop=!1;this.shineCase=1;this.focus=!0;this.context.clearRect(-10,-10,this.width+20,3*this.height+20);this.setEllipseBg();this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.stop=!0;this.setEllipseBg();this.enterEvent()}.bind(this))}});Class("ShadowButton",{create:function(t,i){i&&(this.lineWidth=t.height/10,this.width=t.width-this.lineWidth,this.height=t.height-this.lineWidth,this.id=t.id,this.bdRadius=this.height/12,this.parent=i,this.enter=!1,this.initConfig(),this.getGradient(),this.initHtml(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.container=$("<div></div>");this.canvas=$("<canvas width='"+(this.width+this.lineWidth)+"' height='"+(this.height+this.lineWidth)+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.container.append(this.canvas);this.parent.append(this.container);this.drawShadowButton();this.leftToRight=!0;this.playCase=1;this.drawFlower()},initCss:function(){this.container.css({position:"absolute",left:"0",top:"0"})},draw:function(){this.context.save();this.context.scale(1,2/3);this.context.lineWidth=this.lineWidth;this.drawFirstBg();this.drawSecondBg();this.drawThirdBg();this.context.restore();this.drawEnterShadow();this.drawCover();this.drawCoverShadow()},onResize:function(t,i){this.lineWidth=i/10;this.width=t-this.lineWidth;this.height=i-this.lineWidth;this.bdRadius=this.height/12;this.canvas[0].width=t;this.canvas[0].height=i;this.container.find("img").css({width:this.width/4*3+"px",height:this.height/4*3+"px",left:this.width/8+this.lineWidth/4+"px",top:this.height/9+"px"});this.getGradient();this.drawShadowButton()},stopAnimation:function(){},runAnimation:function(){},drawFirstBg:function(){this.context.save();this.context.shadowColor=this.shadowColor;this.context.shadowBlur=10;this.context.beginPath();this.context.strokeStyle=this.borderColor1;this.context.moveTo(this.bdRadius+this.lineWidth,this.lineWidth);this.context.arcTo(this.width,this.lineWidth,this.width,1.5*this.height,this.bdRadius);this.context.arcTo(this.width,1.5*this.height,this.lineWidth,1.5*this.height,this.bdRadius);this.context.arcTo(this.lineWidth,1.5*this.height,this.lineWidth,this.lineWidth,this.bdRadius);this.context.arcTo(this.lineWidth,this.lineWidth,this.width,this.lineWidth,this.bdRadius);this.context.stroke();this.context.closePath();this.context.restore()},drawSecondBg:function(){this.context.beginPath();this.context.lineWidth=.5;this.context.moveTo(this.bdRadius+1.1*this.lineWidth,1.1*this.lineWidth);this.context.strokeStyle="#000";this.context.arcTo(this.width-this.lineWidth/8,1.1*this.lineWidth,this.width-this.lineWidth/8,1.5*this.height-.1*this.lineWidth,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/8,1.5*this.height-.1*this.lineWidth,1.5*this.lineWidth,1.5*this.height-.1*this.lineWidth,this.bdRadius);this.context.arcTo(1.1*this.lineWidth,1.5*this.height-.1*this.lineWidth,1.5*this.lineWidth,1.1*this.lineWidth,this.bdRadius);this.context.arcTo(1.1*this.lineWidth,1.1*this.lineWidth,this.width-this.lineWidth/8,1.1*this.lineWidth,this.bdRadius);this.context.fillStyle=this.borderColor2;this.context.fill();this.context.stroke();this.context.closePath()},drawThirdBg:function(){this.context.beginPath();this.context.moveTo(this.bdRadius+2*this.lineWidth,2*this.lineWidth);this.context.strokeStyle=this.borderColor2;this.context.arcTo(this.width-this.lineWidth,2*this.lineWidth,this.width-this.lineWidth/2,1.5*this.height-this.lineWidth,this.bdRadius);this.context.arcTo(this.width-this.lineWidth,1.5*this.height-this.lineWidth,1.5*this.lineWidth,1.5*this.height-this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,1.5*this.height-this.lineWidth,1.5*this.lineWidth,1.5*this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,2*this.lineWidth,this.width-this.lineWidth/2,1.5*this.lineWidth,this.bdRadius);this.context.fillStyle=this.defaultBg[1];this.context.fill();this.context.closePath()},drawEnterShadow:function(){this.context.save();this.context.scale(1,.5);this.context.beginPath();this.context.shadowColor="#fff";this.context.shadowBlur=this.height/8;var t=this.context.createRadialGradient(this.width/2+this.lineWidth,this.height+this.lineWidth,0,this.width/2+this.lineWidth,this.height+this.lineWidth,.95*this.height);t.addColorStop(0,"rgba(255,255,255,0.6)");t.addColorStop(.5,"rgba(255,255,255,0.3)");t.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.context.fillStyle=t;this.context.fillRect(this.bdRadius+1.1*this.lineWidth,this.lineWidth,this.width,2*this.height);this.context.restore()},drawCoverShadow:function(){this.context.save();this.context.scale(1,.5);this.context.beginPath();this.context.shadowColor="#fff";this.context.shadowBlur=this.height/8;var t=this.context.createRadialGradient(this.width/2+.5*this.lineWidth,this.height+this.lineWidth,0,this.width/2+.5*this.lineWidth,this.height+this.lineWidth,.95*this.height);t.addColorStop(0,"rgba(255,255,255,0.6)");t.addColorStop(.6,"rgba(255,255,255,0.3)");t.addColorStop(1,"rgba(255,255,255,0)");this.context.fillStyle=t;this.context.fillRect(this.bdRadius+1.1*this.lineWidth,this.lineWidth,.9*this.width,2*this.height);this.context.restore()},drawFlower:function(){var t=$("<img src='"+uiBaseURL+"buttonFlower.svg' />");t.css({position:"absolute","pointer-events":"none",width:this.width/4*3+"px",height:this.height/4*3+"px",left:this.width/8+this.lineWidth/4+"px",top:this.height/9+"px"});this.container.append(t)},drawCover:function(){this.context.beginPath();this.context.fillStyle=this.defaultBg[2];this.context.moveTo(this.bdRadius+1.14*this.lineWidth,this.height/2);this.context.quadraticCurveTo(this.width/2,this.height/6,this.width-this.lineWidth,this.height/2.5);this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.bdRadius+1.14*this.lineWidth,this.height/2);this.context.quadraticCurveTo(this.width/2,this.height/6,this.width-this.lineWidth,this.height/2.5);this.context.moveTo(this.bdRadius+1.14*this.lineWidth,this.height/2);this.context.fillStyle=this.defaultBg[2];this.context.arcTo(this.bdRadius+1.14*this.lineWidth,this.height-this.lineWidth/1.6,this.width-.9*this.lineWidth,this.height-this.lineWidth/1.5,this.bdRadius/2);this.context.arcTo(this.width-.95*this.lineWidth,this.height-this.lineWidth/1.6,this.width-.95*this.lineWidth,this.lineWidth,this.bdRadius/2);this.context.lineTo(this.width-.95*this.lineWidth,this.height/2.5);this.context.fill();this.context.closePath()},initConfig:function(){this.shadows=[{defaultBg:"#666666;#9AC2FF;#287EFF",enterBg:"#FFFFFF"},{defaultBg:"#666666;#FF9090;#FF1515",enterBg:"#FFFFFF"},{defaultBg:"#666666;#FFFF85;#FFFF24",enterBg:"#FFFFFF"},{defaultBg:"#666666;#94EEB0;#1FDC59",enterBg:"#FFFFFF"},{defaultBg:"#666666;#E499FF;#C936FF",enterBg:"#FFFFFF"},{defaultBg:"#666666;#9B9B9B;#404040",enterBg:"#FFFFFF"}]},getGradient:function(){this.defaultBg=this.shadows[this.id-1].defaultBg.split(";");this.enterBg=this.shadows[this.id-1].enterBg;this.shadowColor="transparent"},drawShadowButton:function(){this.context.clearRect(-20,-20,3*this.width,3*this.height);this.context.beginPath();this.context.lineWidth=5;this.bgColor1=this.defaultBg[1];this.borderColor1=this.context.createLinearGradient(this.lineWidth+5,0,this.width+this.lineWidth+5,0);this.borderColor1.addColorStop(0,this.defaultBg[0]);this.borderColor1.addColorStop(1,this.defaultBg[0]);this.borderColor2=this.context.createLinearGradient(this.lineWidth+5,0,this.width-this.lineWidth/2,0);this.borderColor2.addColorStop(0,this.defaultBg[0]);this.borderColor2.addColorStop(.5,"rgba(255,255,255,1)");this.borderColor2.addColorStop(1,this.defaultBg[0]);this.outerBg=this.context.createLinearGradient(0,this.lineWidth+5,0,this.height);this.outerBg.addColorStop(0,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[1]);this.draw()},change:function(t,i){t!=i&&(this.context.clearRect(-20,-20,3*this.width,3*this.height),this.shadowColor=this.focus?Color(this.defaultBg[2]).rgba(t/i):this.shadowColor=Color(this.defaultBg[2]).rgba(1-t/i),this.draw())},enterEvent:function(){this.getGradient();this.change.animation(this,1200)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.focus=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.enterEvent()}.bind(this))}});Class("BottomLightButton",{create:function(t,i){i&&(this.width=t.width,this.height=t.height,this.id=t.id,this.bdRadius=this.height/15,this.lineWidth=this.height/10,this.parent=i,this.initConfig(),this.initHtml(),this.getGradient(),this.drawButton(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.parent.append(this.canvas)},initCss:function(){this.canvas.css({position:"absolute",left:"0",top:"0"})},drawButton:function(){this.context.beginPath();this.context.lineWidth=5;this.outerBg=this.context.createLinearGradient(0,this.lineWidth+5,0,this.height);this.outerBg.addColorStop(0,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[1]);this.shadowColor(0);this.draw()},draw:function(){this.context.clearRect(0,0,this.width,this.height);this.context.lineWidth=this.lineWidth;this.drawFirstBg();this.drawCover();this.drawCoverShadow()},onResize:function(t,i){this.bdRadius=i/15;this.lineWidth=i/10;this.width=t;this.height=i;this.canvas[0].width=t;this.canvas[0].height=i;this.getGradient();this.drawButton()},drawFirstBg:function(){this.context.save();this.context.beginPath();this.context.moveTo(this.bdRadius,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height/2,this.lineWidth/2,this.height/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.bgColor;this.context.fill();this.context.closePath();this.context.restore()},drawCoverShadow:function(){this.context.save();this.context.scale(1,.5);this.context.beginPath();this.context.shadowColor=this.enterBg;this.context.shadowBlur=this.height/4;this.context.fillStyle=this.color;this.context.fillRect(this.lineWidth/2,this.lineWidth/2,this.width,this.height-this.lineWidth/2);this.context.restore();this.context.clearRect(this.lineWidth/2,this.height/2,this.width,this.height)},drawCover:function(){this.context.save();this.context.beginPath();this.context.lineWidth=0;this.context.fillStyle=this.coverBg;this.context.moveTo(this.lineWidth/2,this.height/8*3);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/8*3-this.lineWidth/2,this.bdRadius);this.context.lineTo(this.width-this.lineWidth/2,this.height/8*3);this.context.quadraticCurveTo(this.width/2,this.height/7,this.lineWidth/2,this.height/8*3);this.context.fill();this.context.closePath()},initConfig:function(){this.shadows=[{defaultBg:"#181818;#181818;#181818",enterBg:"#6CFCDE"},{defaultBg:"#181818;#181818;#181818",enterBg:"#FF0000"},{defaultBg:"#187B0D;#3DB330;#60E751",enterBg:"#FFFFFF"},{defaultBg:"#07507E;#3586B0;#5DB5DB",enterBg:"#FFFFFF"},{defaultBg:"#EA8C44;#F38536;#EC5A1D",enterBg:"#FFFFFF"},{defaultBg:"#F7BFD9;#EE62AB;#E61685",enterBg:"#FFFFFF"},{defaultBg:"#8A0F0F;#BE2424;#F54444",enterBg:"#FFFFFF"},{defaultBg:"#58F762;#46C446;#17578E",enterBg:"#FFFFFF"},{defaultBg:"#6B6822;#D1B95D;#ECD067",enterBg:"#FFFFFF"}]},getGradient:function(){this.defaultBg=this.shadows[this.id-1].defaultBg.split(";");this.enterBg=this.shadows[this.id-1].enterBg;this.bgColor=this.context.createLinearGradient(0,0,0,this.height/2);this.bgColor.addColorStop(0,this.defaultBg[0]);this.bgColor.addColorStop(.5,this.defaultBg[1]);this.bgColor.addColorStop(1,this.defaultBg[2]);this.coverBg=this.context.createLinearGradient(0,0,0,this.height/4*3);this.coverBg.addColorStop(0,"rgba(255,255,255,0.15)");this.coverBg.addColorStop(1,"rgba(255,255,255,0.3)")},shadowColor:function(t){this.color=this.context.createRadialGradient(this.width/2,1.2*this.height,0,this.width/2,1.2*this.height,this.height/1);this.color.addColorStop(.3,Color(this.enterBg).rgba(1*t));this.color.addColorStop(.6,Color(this.enterBg).rgba(.4*t));this.color.addColorStop(.8,Color(this.enterBg).rgba(.1*t));this.color.addColorStop(.9,Color(this.enterBg).rgba(0))},enterEvent:function(){this.getGradient();this.change=function(t,i){this.shadowColor(this.focus?t/i:1-t/i);this.draw()};this.timer&&this.timer.stop();this.timer=this.change.animation(this,1e3)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.focus=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.enterEvent()}.bind(this))}});Class("OtherButton",{create:function(t,i){i&&(this.width=t.width,this.height=t.height,this.id=t.id,this.bdRadius=this.height/12,this.lineWidth=this.height/10,this.parent=i,this.initHtml(),this.draw(),this.initCss())},initHtml:function(){this.container=$("<div></div>");this.canvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.parent.append(this.container);this.container.append(this.canvas)},initCss:function(){this.container.css({width:this.width+"px",height:this.height+"px",left:"0",top:"0"})},draw:function(){var t={width:this.width,height:this.height,bdRadius:this.bdRadius,lineWidth:this.lineWidth,context:this.context,canvas:this.canvas};switch(this.id){case 1:this.button=new OtherButton1(t,this.container);break;case 2:this.button=new OtherButton2(t,this.container);break;case 3:this.button=new OtherButton3(t,this.container)}},onResize:function(t,i){this.bdRadius=i/12;this.lineWidth=i/10;this.width=t;this.height=i;var e={width:this.width,height:this.height,bdRadius:this.bdRadius,lineWidth:this.lineWidth,context:this.context,canvas:this.canvas};this.container.css({width:this.width+"px",height:this.height+"px"});this.canvas[0].width=this.width;this.canvas[0].height=this.height;if(this.button)this.button.onResize(e)}});Class("OtherButton1",{create:function(t,i){i&&(this.width=t.width,this.height=t.height,this.bdRadius=t.bdRadius,this.lineWidth=t.lineWidth,this.context=t.context,this.canvas=t.canvas,this.parent=i,this.enter=!1,this.createSecondCanvas(),this.drawButton(),isPhone()||isPad()||this.initEvent())},onResize:function(t){this.width=t.width;this.height=t.height;this.bdRadius=t.bdRadius;this.lineWidth=t.lineWidth;this.secCanvas[0].width=this.width;this.secCanvas[0].height=this.height;this.drawButton()},drawButton:function(){this.context.clearRect(0,0,this.width,this.height);this.borderColor1=this.context.createLinearGradient(this.lineWidth+5,this.lineWidth+5,this.height/2+this.lineWidth+5,this.height/2+this.lineWidth+5);this.borderColor1.addColorStop(0,"#333");this.borderColor1.addColorStop(1,"#333");this.outerBg="#111";this.drawfirst();this.drawDash();this.drawSecond();this.drawUnder()},createSecondCanvas:function(){this.secCanvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.secCtx=this.secCanvas[0].getContext("2d");this.parent.append(this.secCanvas);this.secCanvas.css({position:"absolute",left:"0",top:"0",background:"transparent"})},drawfirst:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2);this.context.shadowColor="#333";this.context.shadowBlur=10;this.context.fillStyle="#105A8D";this.context.fillRect(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth,this.height/2-this.lineWidth);this.context.closePath()},drawSecond:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2);this.context.shadowColor="#fff";this.context.shadowBlur=10;var t=this.context.createLinearGradient(0,0,0,this.height/2);t.addColorStop(0,"rgba(255,255,255,0.2)");t.addColorStop(1,"rgba(255,255,255,0)");this.context.fillStyle=t;this.context.fillRect(this.lineWidth/4,this.lineWidth/2,this.width-this.lineWidth/4,this.height/2-this.lineWidth);this.context.closePath()},drawUnder:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.height+this.lineWidth/2);this.context.shadowColor="#333";this.context.shadowBlur=10;var t=this.context.createLinearGradient(0,this.height/2,0,this.height);t.addColorStop(0,Color("#008EFF").rgba(.2));t.addColorStop(.05,Color("#008EFF").rgba(.5));t.addColorStop(.5,Color("#fff").rgba(0));this.context.fillStyle=t;this.context.fillRect(this.lineWidth/2,this.height/2,this.width-this.lineWidth,this.height/2-this.lineWidth);this.context.closePath();this.context.beginPath();t=this.context.createLinearGradient(0,this.height/2,0,this.height);t.addColorStop(0,"rgba(255,255,255,0.05)");t.addColorStop(.8,"rgba(255,255,255,0)");this.context.fillStyle=t;this.context.fillRect(this.lineWidth/2,this.height/2,this.width-this.lineWidth,this.height/2-this.lineWidth);this.context.closePath();this.context.save();t=this.context.createLinearGradient(0,this.height/2,0,this.height);t.addColorStop(0,"rgba(255,255,255,0.2)");t.addColorStop(.5,"rgba(255,255,255,0)");this.context.fillStyle=t;for(t=-this.width/2;t<this.width+this.lineWidth;t+=this.width/50)for(var i=this.height;i>this.height/2;i-=this.height/70)this.context.beginPath(),this.context.shadowColor="#fff",this.context.shadowBlur=10,this.context.arc(i+t,i,this.height/140,0,2*Math.PI,!1),this.context.fill(),this.context.closePath();this.context.restore();this.context.clearRect(0,this.height/2-this.lineWidth/2,this.lineWidth/2,this.height);this.context.clearRect(this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.lineWidth/2,this.height)},drawDash:function(){this.context.save();this.context.fillStyle="rgba(255,255,255,0.15)";for(var t=this.width+this.lineWidth/2+this.height/2;t>this.lineWidth;t-=this.width/50)for(var i=this.height/2;i>this.lineWidth;i-=this.height/70)this.context.beginPath(),this.context.shadowColor="#fff",this.context.shadowBlur=this.height/4,this.context.arc(t-i,i-this.lineWidth/2,this.height/140,0,2*Math.PI,!1),this.context.fill(),this.context.closePath();this.context.restore()},createBubble:function(t,i,e){this.secCtx.beginPath();var o=this.secCtx.createRadialGradient(i,e,0,i,e,this.height/20+this.height/40*t);o.addColorStop(0,"rgba(255,255,255,0.4)");o.addColorStop(1,"rgba(255,255,255,0.05)");this.secCtx.shadowColor="#fff";this.secCtx.shadowBlur=10;this.secCtx.fillStyle=o;this.secCtx.arc(i,e,this.height/20+this.height/40*t,0,2*Math.PI,!1);this.secCtx.fill();this.secCtx.closePath()},popBubble:function(t){this.secCtx.clearRect(0,0,1.5*this.width,1.5*this.height);for(var i=this.width-2*this.lineWidth,e=this.height/2,o=1;10>o;o++)1==o?this.createBubble(t,i*o/9-t*this.lineWidth,e-t*(this.height/2-this.height/30)):5==o?this.createBubble(t,i*o/9-t*this.lineWidth,e-t*(this.height/2-this.height/30)):8==o?this.createBubble(t,i*o/9-t*this.lineWidth,e-t*(this.height/2-this.height/30)):this.createBubble(t,i*o/9+t*this.lineWidth,e+-t*(this.height/2-this.height/30))},enterEvent:function(){this.change=function(t,i){t==i-1?this.popBubble(t/i*1.2):t==i?this.secCtx.clearRect(0,0,1.5*this.width,1.5*this.height):this.popBubble(t/i)};this.timer&&this.timer.stop();this.timer=this.change.animation(this,600)},initEvent:function(){this.secCanvas.bind(_event._enter,function(){this.focus=!0;this.enterEvent()}.bind(this));this.secCanvas.bind(_event._leave,function(){this.focus=!1;this.secCtx.clearRect(0,0,1.5*this.width,1.5*this.height)}.bind(this))}});Class("OtherButton2",{create:function(t,i){i&&(this.width=t.width,this.height=t.height,this.bdRadius=t.bdRadius,this.lineWidth=2*t.lineWidth,this.context=t.context,this.canvas=t.canvas,this.parent=i,this.enter=!1,this.drawButton(),isPhone()||isPad()||this.initEvent())},onResize:function(t){this.width=t.width;this.height=t.height;this.bdRadius=t.bdRadius;this.lineWidth=2*t.lineWidth;this.drawButton()},draw:function(){this.context.beginPath();this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.outerBg;this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.lineWidth/1.5,this.lineWidth/1.5);var t=this.context.createLinearGradient(0,this.lineWidth/1.5,0,this.height/2);t.addColorStop(0,"rgba(255,255,255,0.50)");t.addColorStop(1,"rgba(255,255,255,0.25)");this.context.fillStyle=t;this.context.arcTo(this.width-this.lineWidth/1.5,this.lineWidth/1.5,this.width-this.lineWidth/1.5,this.height/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/1.5,this.height/2,this.lineWidth/1.5,this.height/2,this.bdRadius);this.context.arcTo(this.lineWidth/1.5,this.height/2,this.lineWidth/1.5,this.lineWidth/1.5,this.bdRadius);this.context.arcTo(this.lineWidth/1.5,this.height/2,this.lineWidth/1.5,this.lineWidth/1.5,this.bdRadius);this.context.arcTo(this.lineWidth/1.5,this.lineWidth/1.5,this.width-this.lineWidth/1.5,this.lineWidth/1.5,this.bdRadius);this.context.fill()},drawfirst:function(t){this.context.save();this.context.clearRect(-20,-20,2*this.width,2*this.height);this.context.lineWidth=this.lineWidth/4;this.context.beginPath();this.context.shadowColor="#FCF500";this.context.shadowBlur=40*t;this.context.moveTo(this.bdRadius+this.lineWidth/3,this.lineWidth/3);this.context.arcTo(this.width-this.lineWidth/3,this.lineWidth/3,this.width-this.lineWidth/3,this.height-this.lineWidth/3,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/3,this.height-this.lineWidth/3,this.lineWidth/3,this.height-this.lineWidth/3,this.bdRadius);this.context.arcTo(this.lineWidth/3,this.height-this.lineWidth/3,this.lineWidth/3,this.lineWidth/3,this.bdRadius);this.context.arcTo(this.lineWidth/3,this.lineWidth/3,this.width-this.lineWidth/3,this.lineWidth/3,this.bdRadius);this.context.fillStyle="#393939";this.context.fill();this.context.restore()},drawButton:function(){this.context.beginPath();this.outerBg="#111";this.drawfirst(0);this.draw()},enterEvent:function(){this.change=function(t,i){this.drawfirst(this.focus?t/i:1-t/i);this.draw()};this.timer&&this.timer.stop();this.timer=this.change.animation(this,600)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.focus=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.enterEvent()}.bind(this))}});Class("OtherButton3",{create:function(t,i){i&&(this.width=t.width,this.height=t.height,this.bdRadius=t.bdRadius,this.lineWidth=t.lineWidth,this.context=t.context,this.canvas=t.canvas,this.parent=i,this.initConfig(),this.getGradient(),this.draw(),isPhone()||isPad()||this.initEvent())},onResize:function(t){this.width=t.width;this.height=t.height;this.bdRadius=t.bdRadius;this.lineWidth=2*t.lineWidth;this.getGradient();this.draw()},draw:function(t){this.context.clearRect(0,0,this.width,this.height);this.context.lineWidth=this.lineWidth;this.context.save();this.focus&&(this.context.shadowColor=this.enterBg,this.context.shadowBlur=this.height/30*t,this.context.shadowOffsetY=-this.height/40);this.drawFirstBg();this.context.restore();this.drawSecondBg();this.drawCover();this.drawCoverShadow()},drawFirstBg:function(){this.context.beginPath();this.context.lineWidth=this.height/100;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.bgColor1;this.context.fill();this.context.stroke();this.context.closePath()},drawSecondBg:function(){this.context.beginPath();this.context.lineWidth=this.height/100;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.bgColor2;this.context.fill();this.context.stroke();this.context.closePath()},drawCoverShadow:function(){this.context.save();this.context.scale(1,1/3);this.context.beginPath();this.context.shadowColor=this.enterBg;this.context.shadowBlur=this.height/2;this.context.restore()},drawCover:function(){this.context.beginPath();this.context.fillStyle=this.coverBg;this.context.moveTo(this.lineWidth/2,this.height/2.5);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/4*3-this.lineWidth/2,this.bdRadius);this.context.lineTo(this.width-this.lineWidth/2,this.height/2.5);this.context.fill();this.context.closePath();this.context.beginPath();this.context.fillStyle=this.coverBg;this.context.moveTo(this.lineWidth/2,this.height/2.5);this.context.quadraticCurveTo(this.width/2,this.height/5*4,this.width-this.lineWidth/2,this.height/2.5);this.context.fill();this.context.closePath()},initConfig:function(){this.otherColor={defaultBg:"#24363E;#E8E7E7;#E8E7E7",enterBg:"#f00"}},getGradient:function(){this.defaultBg=this.otherColor.defaultBg.split(";");this.enterBg=this.otherColor.enterBg;this.bgColor2=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height-this.lineWidth/2);this.bgColor2.addColorStop(0,Color(this.defaultBg[0]).rgba(.5));this.bgColor2.addColorStop(1,Color(this.defaultBg[0]).rgba(.05));this.bgColor1="transparent";this.coverBg=this.context.createLinearGradient(0,0,0,this.height/4*3);this.coverBg.addColorStop(0,"rgba(255,255,255,0.1)");this.coverBg.addColorStop(1,"rgba(255,255,255,0.2)")},setBgColor:function(t){this.bgColor1=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height-this.lineWidth/2);this.bgColor1.addColorStop(0,Color(this.enterBg).rgba(1));this.bgColor1.addColorStop(.25+.6*t,Color(this.enterBg).rgba(.85));this.bgColor1.addColorStop(.45+.55*t,Color(this.enterBg).rgba(0))},enterEvent:function(){this.getGradient();this.change=function(t,i){this.context.clearRect(0,0,this.width+this.lineWidth,this.height+this.lineWidth);var e=this.focus?t/i:1-t/i;t!=i||this.focus?this.setBgColor(e):this.bgColor1="transparent";this.draw(e)};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.focus=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.enterEvent()}.bind(this))}});Class("DynamicButton",{Package:"PageItem",create:function(t,i,e,o){i&&(this._super(t,i,e,o),this.animateConfig(),this.fScale=e/this.config.pageWidth,this.config.src&&(this.initConfig(),this.initHtml(),this.initCss(),this.initEvt(),this.initLinkHint(this.button),parseBool(this.config.reflection)&&this.imageReflection(this.button)))},initHtml:function(){null==this.config.src||""==this.config.src?(this.button=$("<button type = 'button' class='flip-action'></button>"),this.img=$("<img/>"),this.config.alpha=0):".png"==this.config.src.substr(this.config.src.length-4,4)&&(this.button=$("<div class='flip-action'></div>"),this.img=$("<img src='"+this.config.src+"'/>"),this.buttonEvt=$("<div></div>"),this.createCaption(),this.hasSpecial=this.config.src.indexOf("RotatePriceButton"),-1!=this.hasSpecial&&(this.sepcialImg(),this.rotationImg()),this.button.append(this.img),this.button.append(this.buttonEvt));this.setRotation(this.button,this.config.rotation);this.parent.append(this.button);-1!=this.hasSpecial&&this.img.changeButtonColor(this.BGColor)},sepcialImg:function(){this.coverSrc=this.config.src.replace(".png","Cover.png");this.img.attr("src","data:image/png;base64,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");this.coverImg=$("<img src='"+this.coverSrc+"'/>");this.coverImg.css("z-index","2");this.button.append(this.coverImg);this.img.changeButtonColor(this.BGColor);this.prices=this.price.split(".");this.textBox=$("<div style='position:absolute;font-size:12px;'></div>");this.unitBox=$("<div style='z-index:3;position:absolute;color:#fff'>"+this.unit+"</div>");this.priecInteger=$("<div style='z-index:3;position:relative;color:#fff'>"+this.prices[0]+"</div>");this.priecDecimal=$("<div style='z-index:3;position:absolute;color:#fff'>"+this.prices[1]+"</div>");this.fontTitle=$("<div style='z-index:3;position:absolute;color:#fff'>"+this.fontTitle+"</div>");this.textBox.append(this.fontTitle).append(this.priecInteger).append(this.priecDecimal).append(this.unitBox);this.button.append(this.textBox);this.elems=[{elem:this.fontTitle,scale:this.height/25/12,x:.25*this.width,y:.303*this.height},{elem:this.priecInteger,scale:this.height/7/12,x:.307*this.width,y:.363*this.height},{elem:this.priecDecimal,scale:this.height/25/12,x:.45*this.width,y:.384*this.height},{elem:this.unitBox,scale:this.height/7/12,x:.505*this.width,y:.363*this.height}];this.setSpecialImgCss();this.button.bind(isTouch?_event._down:_event._enter,function(){animateOnce(this.button,{transform:"scale(1.5)"},.5)}.bind(this));this.button.bind(isTouch?_event._up:_event._leave,function(){animateOnce(this.button,{transform:"scale(1)"},.5);this.buttonEvt.css({display:"none"})}.bind(this))},setSpecialImgCss:function(){for(var t=0;t<this.elems.length;t++){var i=this.elems[t];i.elem.css({transform:"scale("+i.scale+")"})}this.textBox.css({"z-index":"2",width:this.width/2+"px",height:this.height/2+"px",left:this.width/4+"px",top:this.height/4+"px"});this.fontTitle.css({left:"20%",top:"15%","transform-origin":"0 0 0",width:this.width/2/(this.height/25/12)+"px"});this.priecInteger.css({display:"inline-block","transform-origin":"0 0 0",left:"15%",top:"35%"});this.priecDecimal.css({display:"inline-block","transform-origin":"0 0 0",left:this.width/4-this.height/25/12*12+"px",top:"32%"});this.unitBox.css({display:"inline-block","transform-origin":"0 0 0",right:.15*this.width+"px",top:"35%"})},rotationImg:function(){-1!=this.hasSpecial&&(this.animate=function(t,i){this.rotation3d(360*t/i)},this.animate.animation(this,1e4),this.timer=setInterval(function(){this.animate.animation(this,1e4)}.bind(this),1e4))},rotation3d:function(t){this.img.css({transform:"rotate3d(0,0,1,"+t+"deg)","-webkit-transform":"rotate3d(0,0,1,"+t+"deg)","-o-transform":"rotate3d(0,0,1,"+t+"deg)","-ms-transform":"rotate3d(0,0,1,"+t+"deg)","-moz-transform":"rotate3d(0,0,1,"+t+"deg)"})},initConfig:function(){this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.button=null;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.config.src&&(this.config.src=this.config.src.replace(".swf",".png"),this.config.src=uiBaseURL+this.config.src.slice(this.config.src.lastIndexOf("/")+1));this.config.properties&&3==this.config.properties.length&&(this.config.buttonCaption=this.config.properties[0].value,this.color=Color(this.config.properties[1].value).toString(),this.fontSize=this.config.properties[2].value);this.config.properties&&4==this.config.properties.length&&(this.color=Color("#ffffff").toString(),this.fontTitle=this.config.properties[0].value,this.unit=this.config.properties[1].value,this.price=this.config.properties[2].value,this.BGColor=Color(this.config.properties[3].value).toString());this.config.hint&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor).toString(),this.config.hint.hintShapeColor2=this.config.hint.hintShapeColor2?Color(this.config.hint.hintShapeColor2).toString():Color(this.config.hint.hintShapeColor).toString(),"null"==this.config.hint.text&&(this.config.hint.text=""))},initCss:function(){this.img.css({position:"absolute",width:this.width+"px",height:this.height+"px","z-index":"1",top:"0",bottom:"0",left:"0",right:"0"});-1!=this.config.src.indexOf("RotatePriceButton")&&this.coverImg.css({position:"absolute",width:this.width+"px",height:this.height+"px",top:"0",bottom:"0",left:"0",right:"0"});this.buttonEvt.css({display:"none",width:this.width+"px",height:this.height+"px"});this.button.css({position:"absolute",width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px",opacity:this.config.alpha})},createCaption:function(){this.config.buttonCaption&&(this.buttonCaption=new label(this.config.buttonCaption,this.button),this.captionCss())},captionCss:function(){var t=transformCSS({origin:{x:0,y:0},scale:this.fScale});this.buttonCaption.labelBox.css(t);t=isTouchDevice()?0:5;this.config.properties&&(this.buttonCaption.setFont(this.fontSize+"px",this.color,this.fontSize),this.buttonCaption.labelBox.css({"z-index":"3","text-align":"center","pointer-events":"none",overflow:"hidden",height:"auto",width:(this.width-2*t)/this.fScale+"px"}),this.buttonCaption.setLabelPosition(t,this.fontSize*this.height/100))},parseConfig:function(t){return{width:t.location.width,height:t.location.height,pageWidth:t.location.pageWidth,pageHeight:t.location.pageHeight,rotation:t.location.rotation,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,x:t.location.x,y:t.location.y,alpha:t.alpha,src:t.meta.item.swfURL,action:t.action,hint:t.hint,buttonCaption:"",properties:t.meta.item.properties,animation:t.animation}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.fScale=this.pageWidth/this.config.pageWidth;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.button.css({width:this.width+"px",height:this.height+"px"});this.button.find("img").css({width:this.width+"px",height:this.height+"px"});transformCSS({origin:{x:0,y:0},scale:this.fScale});this.buttonCaption&&this.captionCss();this.initCss();-1!=this.hasSpecial&&(this.textBox.css({transform:"scale("+this.fScale+")","transform-origin":"0 0"}),this.textBox.css({"z-index":"2",left:this.width/4+"px",top:this.height/4+"px"}))},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.button.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.button.one(t,function(){this.button.css({animation:""})}.bind(this))}},hide:function(){isTouchDevice()},initEvt:function(){this.addActionEvent(this.button);this.button.bind(_event._down,function(){this.buttonEvt.css({display:"block"})}.bind(this));this.button.bind(_event._end,function(){this.buttonEvt.css({display:"none"})}.bind(this));this.button.bind("mouseleave",function(){this.buttonEvt.css({display:"none"})}.bind(this))}}).extend(PageItem.Item);global.hddr.soo6=function(){return hddr.bbb5};Class("Area",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.id="Area"+s;this.color=Color(this.config.color);this.initArea();this.initEvents();this.onResize(e,o)},initArea:function(){this.Area=$("<div id='"+this.id+"'></div>");this.Area.css({position:"absolute",overflow:"hidden","background-color":this.color.rgba(this.config.alpha)});!0===parseBool(this.config.rounds)&&this.Area.css({"border-radius":this.config.ellipseWidth+"px "+this.config.ellipseHeight+"px"});this.addShadow(this.Area);this.parent.append(this.Area)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,alpha:t.alpha,color:t.color,rounds:t.round,ellipseWidth:t.ellipseWidth,ellipseHeight:t.ellipseHeight,hasShadow:parseBool(t.shadow.hasDropShadow),shadow:t.shadow,action:t.action}},initEvents:function(){this.addActionEvent(this.Area)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.Area.css({width:this.width+"px",height:this.height+"px"});this.setPosition();if(null!=this.form)this.form.onResize(bookContainer.width(),bookContainer.height());if(null!=this.slide)this.slide.onResize(bookContainer.width(),bookContainer.height());if(null!=this.audios)this.audios.onResize(bookContainer.width(),bookContainer.height())},setPosition:function(){this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.Area.css({left:this.left+"px",top:this.top+"px"})}}).extend(PageItem.Item);Class("VideoForm",{Package:"PageItem",create:function(t,i,e,o,s){this.parent=t;this.type=s;this.playCount=0;this.config=$.extend({width:400,height:300,src:null,alpha:.3,caption:""},i);null!=this.config.src&&(this.config.width=Math.min(windowWidth-10,Number(this.config.width)),this.config.height=Math.min(windowHeight-90,Number(this.config.height)),this.sw=e,this.sh=o,this.th=28,this.background=$("<div ></div>"),this.closeButton=$("<div></div>"),this.form=$("<div class='flip-action' style='display:none;'></div>"),this.titleBar=$("<div></div>"),"text"!=this.type&&(this.config.src=this.fixRelativePath(this.config.src)),""!=this.config.caption&&(this.captionLabel=new label(this.config.caption,this.titleBar),this.captionLabel.setLabelPosition(5,3,["left","top"]),this.captionLabel.setFont(13,"#dddddd","Tahoma"),this.captionLabel.labelBox.css({width:this.config.width-35+"px","padding-right":"25px"})),"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"},this.captionLabel.labelBox.css({"padding-left":"25px","padding-right":"0","text-align":"right",direction:"rtl"})),this.config.hideTitle&&this.titleBar.text(""),this.parent.append(this.background),this.parent.append(this.form),this.form.append(this.titleBar),this.titleBar.append(this.closeButton),this.setCss(),"text"==this.type&&(t=this.config.src.replaceAll("  ","&ensp;"),t=new TextFormatAnalyzer(t).getHTML(this.alignCss),t.css({position:"absolute"}),this.text=$("<div class='text'></div>"),this.text.html(t),t.css({width:this.config.width-20+"px"}),this.text.css({width:this.config.width-10+"px",height:this.config.height-this.th-10+"px",top:this.th+2+"px",left:"0px",overflow:"hidden",position:"absolute",padding:"5px"}),this.form.css({"background-color":"#ffffff",border:"5px solid rgba(204,204,204,0.8)"}),this.form.append(this.text),this.initScroll(this.text,t),this.text.scroll({},Direction.top,"win10")),"video"==this.type&&(this.video=new Media($("<video src='"+this.config.src+"' webkit-playsinline='true' playsinline='true' controls='controls'></video>"),"video"),this.video.setCss({width:this.config.width+"px",height:this.config.height-this.th+"px",top:this.th+"px","z-index":"200",position:"absolute"}),this.form.css({"background-color":"#000000",border:"5px solid rgba(204,204,204,0.8)"}),this.form.append(this.video.$media),0<this.config.H5PlaybackNumber&&this.video.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.video.play()}.bind(this)),this.video.$media.bind("play",function(t){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this)),this.video.play()),"flash"==this.type&&(this.content=$("<div><div>"),this.content.flash({swf:this.config.src,width:this.config.width+"px",height:this.config.height-this.th+"px",wmode:"transparent"}),this.content.css({width:this.config.width+"px",height:this.config.height-this.th+"px",top:this.th+2+"px","line-height":"1.8",overflow:"auto",position:"absolute"}),this.form.css("background-color","#000000"),this.form.append(this.content)),this.form.css({left:(windowWidth-this.config.width)/2+"px",top:(windowHeight-this.config.height)/2+"px"}),this.showForm(),this.initEvent(),this.initTimer())},initTimer:function(){this.timer=function(){if(this.parentWidth!=windowWidth||this.parentHeight!=windowHeight)this.parentWidth=windowWidth,this.parentHeight=windowHeight,this.onResize()}.interval(this,300)},initScroll:function(t,i){t.addClass("stage");i.addClass("swiper");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.progress.append(this.progressBar);t.append(this.progress);this.progress.css({background:"#aaa",width:"8px",height:"100%",position:"absolute",padding:"5px 0 5px",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",position:"absolute",top:"0",cursor:"pointer","border-radius":"4px"})},setCss:function(){this.closeButton.css({position:"absolute",background:"url("+uiBaseURL+"singleClose.png) repeat 2px 3px",right:"5px",top:"3px",width:"15px",height:"18px",cursor:"pointer"});this.background.css({width:"100%",height:"100%",background:"rgba(0,0,0,0.5)","z-index":200,position:"absolute",left:"0px",top:"0px"});this.form.css({width:this.config.width+"px",height:this.config.height+"px",left:"0",top:"0",overflow:"hidden","-webkit-border-radius":"5px","-moz-border-radius":"5px","-ms-border-radius":"5px","border-radius":"5px",position:"absolute","z-index":"201",border:"5px solid rgba(251,251,251,0.8)"});this.titleBar.css({"line-height":"1.8",width:this.config.width+"px",height:this.th+"px","border-top-left-radius":"5px","border-top-right-radius":"5px",position:"absolute",cursor:"pointer","background-color":"#111111"});"right"==this.config.languageLayout&&this.closeButton.css({right:"auto",left:"3px"})},initEvent:function(){this.form.bind(_event._down,function(t){t.stopPropagation()}.bind(this));this.background.bind(_event._click,function(t){this.closeForm();t.preventDefault();t.stopPropagation();return!1}.bind(this));this.closeButton.bind(_event._click,function(t){this.closeForm();t.preventDefault();t.stopPropagation();return!1}.bind(this));if(this.config.drag){var i,e,o,s,n=!1;this.background.on(_event._end,function(t){return n=!1}.bind(this));this.titleBar.bind("mousedown",function(t){t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t];this.titleBar.css({cursor:"move"});i=parseInt(this.form.left());e=parseInt(this.form.top());o=parseInt(t[0].pageX);s=parseInt(t[0].pageY);n=!0}.bind(this));for(var t=[this.background,this.form],h=0;h<t.length;h++)t[h].bind(_event._move,function(t){t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t];n&&(this.titleBar.css({cursor:"move"}),i=i+t[0].pageX-o,e=e+t[0].pageY-s,this.form.css({left:i+"px",top:e+"px"}),o=t[0].pageX,s=t[0].pageY)}.bind(this));this.titleBar.bind(_event._up,function(t){t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t];i=i+t[0].pageX-o;e=e+t[0].pageY-s;this.form.css({left:i+"px",top:e+"px"});this.titleBar.css({cursor:"pointer"});n=!1;o=i;s=e}.bind(this))}},showForm:function(){this.form.fadeIn(300,function(){}.bind(this))},closeForm:function(){this.timer&&this.timer.stop();this.form.fadeOut(300,function(){this.video&&this.video.pause();this.background.remove();this.form.remove();for(var t=0,i=[this.background,this.form];t<i.length;t++)i[t].unbind(_event._move)}.bind(this))},onResize:function(){this.form.css({left:(windowWidth-this.config.width)/2+"px",top:(windowHeight-this.config.height)/2+"px"})}}).extend(PageItem.Item);Class("MobileVideo",{create:function(t,i,e,o,s){this.config=i;this.parent=t;this.playCount=0;this.parentWidth=e;this.parentHeight=o;this.config.src=this.fixRelativePath(this.config.src);this.closeButton=$("<div></div>");t=getLanguage("btnClose","Close");this.closeButtonHint=$("<div>"+t+"</div>");this.closeButtonHintArrow=$("<div></div>");this.content=$("<div style='display:none;'></div>");this.video=new Media($("<video controls='controls' class='flip-action'><source src='"+this.config.src+"'></video>"),"video");this.content.append(this.video.$media);this.content.append(this.closeButton).append(this.closeButtonHint).append(this.closeButtonHintArrow);this.parent.append(this.content);this.video.$media[0].play&&this.video.play();this.initStyle();this.initEvents();this.onResize();this.show()},initStyle:function(){this.content.css({position:"absolute","z-index":200,left:"0px",top:"0px",background:"rgb(0,0,0)"});this.video.setCss({left:"2px","z-index":"200",position:"absolute",width:"100%",margin:"auto",top:"0px",bottom:"0px"});this.closeButton.css({position:"absolute","background-image":"url("+uiBaseURL+"closecat.png)",right:"20px",top:"20px",width:"22px",height:"20px",display:"block","z-index":9999});this.closeButtonHint.css({position:"absolute","background-color":"white",border:"1px solid #EEEEEE","border-radius":"4px","font-family":'"Tahoma","sans-serif","Arial"',"font-size":"18px",right:"55px",top:"15px","padding-left":"5px","padding-right":"5px","padding-top":"2px","padding-bottom":"2px",display:"block","z-index":9999});this.closeButtonHintArrow.css({position:"absolute",width:"0px",height:"0px",right:"47px",top:"24px","border-top":"5px solid transparent","border-bottom":"5px solid transparent","border-left":"10px solid #EEEEEE","z-index":1e4})},initEvents:function(){function t(t){t.stopPropagation();return!1}this.initTimer();this.content.on(_event._down,t);this.content.on(_event._end,t);this.video.$media.on(_event._down,t);this.video.$media.on(_event._end,t);this.closeButton.on(_event._down,t);0<this.config.H5PlaybackNumber&&this.video.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.video.play()}.bind(this));this.video.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this));this.closeButton.on(_event._end,function(t){t.stopPropagation();this.hide();return!1}.bind(this))},initTimer:function(){this.timer=function(){if(this.parentWidth!=windowWidth||this.parentHeight!=windowHeight)this.parentWidth=windowWidth,this.parentHeight=windowHeight,this.onResize()}.interval(this,300)},setCurrentTime:function(t){this.video.setCurrentTime(t)},show:function(){this.content.fadeIn(300)},hide:function(){this.timer&&this.timer.stop();this.video.pause();this.content.fadeOut(300,function(){this.video.setCss("display","none");this.content.css("display","none");this.content.remove();this.closeButton.remove();this.closeButtonHint.remove();this.closeButtonHintArrow.remove()}.bind(this))},onResize:function(){this.parentWidth=windowWidth;this.parentHeight=windowHeight;this.content.css({width:this.parentWidth+"px",height:this.parentHeight+"px"});this.video.setCss({height:this.parentHeight-80+"px"})}}).extend(PageItem.Item);Class("TextLightBox",{create:function(t,i,e,o,s){this.parent=t;this.config=i;this.container=$("<div class='flip-action' style='display:none'></div>");this.background=$("<div class='flip-action'></div>");this.box=$("<div id=textling></div>");this.title=$("<div>"+this.config.caption+"</div>");"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"},this.title.css({"text-align":"right",direction:"rtl"}));t=new TextFormatAnalyzer(this.config.src).getHTML(this.alignCss);this.panel=$("<div></div>");this.panel.html(t);this.config.hideTitle&&this.title.text("");t=getLanguage("btnClose","Close");this.closeButton=$("<div>"+t+"</div>");this.container.append(this.background).append(this.box);this.box.append(this.title).append(this.panel).append(this.closeButton);this.parent.append(this.container);this.setCss();this.initEvent();$(window).off("resize").on("resize",this.setCss.bind(this));this.show()},setCss:function(){this.panel.css({position:"absolute",width:windowWidth-40-16+"px","overflow-x":"hidden","font-size":"12px","line-height":"2",left:"9px"});this.container.css({top:"0",left:"0",width:windowWidth+"px",height:windowHeight+"px",position:"absolute","z-index":"100"});this.background.css({top:"0",left:"0","background-color":"black",opacity:"0.6",width:windowWidth+"px",height:windowHeight+"px",position:"absolute","z-index":"0"});this.box.css({width:windowWidth-40+"px",height:windowHeight-60+"px",position:"absolute",margin:"auto",top:"30px",left:"20px","background-color":"white","border-radius":"4px","z-index":"200",overflow:"hidden"});this.closeButton.css({position:"absolute",bottom:"8px","border-radius":"4px",cursor:"pointer","text-align":"center",padding:"8px 12px","background-color":"red",width:windowWidth-80+"px",right:"0",left:"0",margin:"auto",color:"white"});this.title.css({position:"relative",padding:"13px 18px","font-weight":"bold",background:"#EBEBEB","border-radius":"5px 5px 0 0"});this.panel.css({height:windowHeight-60-this.closeButton.height()-32-this.title.height()-26+"px"})},initTimer:function(){this.timer=function(){if(this.parentWidth!=windowWidth||this.parentHeight!=windowHeight)this.parentWidth=windowWidth,this.parentHeight=windowHeight,this.onResize()}.interval(this,300)},initEvent:function(){this.initTimer();this.closeButton.bind("click",function(){this.timer&&this.timer.stop();this.container.fadeOut(300,function(){this.box.remove();this.background.remove();this.container.remove()}.bind(this))}.bind(this))},show:function(){this.container.fadeIn(300)},onResize:function(){this.setCss()}});global.hddr.soa7=bdor[3]+bdor[10];Class("Callout",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.getDefault(e,o);this.getCanvasDefault();this.animateConfig();this.container=$("<div class='callout textContainer'></div>");this.callout=$("<canvas  width="+this.canvasWidth+" height="+this.canvasHeight+"></canvas>");this.textBox=$("<div></div>");this.config.textStr||(this.config.textStr=this.config.formats.defaultFormat.htmlText);t=new TextFormatAnalyzer(this.config.textStr);this.text=t.getHTML();this.context=this.callout[0].getContext("2d");this.fillStyle=this.fillColor();this.initCss(e,o);this.config.action||t.htmlHasATag()||this.container.css({"pointer-events":"none"});switch(this.config.bubbleType){case"1":this.drawRoundRect();break;case"2":this.drawRoundBubble();break;case"3":this.drawCloudBubble()}this.textBox.append(this.text);this.container.append(this.callout,this.textBox);this.parent.append(this.container);this.setRotation(this.callout,this.config.location.rotation);this.setRotation(this.text,this.config.location.rotation);this.setRotation(this.textBox,this.config.location.rotation);this.resizeCallout(e);this.initEvents();parseBool(this.config.location.reflection)&&this.imageReflection(this.cross)},getDefault:function(t,i){this.config.location.pageWidth||(this.config.location.pageWidth=1080);this.config.location.pageHeight||(this.config.location.pageHeight=1440);this.width=this.config.location.width*this.config.location.pageWidth;this.height=this.config.location.height*this.config.location.pageHeight;this.pageWidth=this.config.location.pageWidth;this.pageHeight=this.config.location.pageHeight;this.canvasPosition=Point(this.config.location.x*t,this.config.location.y*i);this.left=this.config.hookContrPointRatioX*this.width;this.top=this.config.hookContrPointRatioY*this.height;this.dock1=Point(this.config.hookContr1RatioX*this.width,this.config.hookContr1RatioY*this.height);this.dock2=Point(this.config.hookContr2RatioX*this.width,this.config.hookContr2RatioY*this.height);this.vertex=Point(this.config.hookContrPointRatioX*this.width,this.config.hookContrPointRatioY*this.height);this.cornerRadius=parseInt(this.config.cornerRadiut);this.fontSize=this.config.lineHeightRation*this.pageWidth;this.borderWidth=this.config.borderWidth;this.fScale=t/this.pageWidth;this.strokeStyle=Color(this.config.borderColor).rgba(this.config.bordreAlpha);this.canvasLeft=this.canvasTop=this.canvasHeight=this.canvasWidth=0},getCanvasDefault:function(){switch(this.config.hookDirect){case"Down":if(0>this.vertex.x){this.canvasWidth=this.width-this.vertex.x+20;this.canvasHeight=this.vertex.y+20;this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x-(this.canvasWidth-this.width-10);this.leftTop=Point(this.canvasWidth-this.width-10,10);this.rightTop=Point(this.canvasWidth-10,10);this.rightBottom=Point(this.canvasWidth-10,this.height+10);this.leftBottom=Point(this.canvasWidth-this.width-10,this.height+10);this.center=Point(this.canvasWidth-10-this.width/2,10+this.height/2);this.dock1=Point(this.dock1.x-this.vertex.x+10,this.height+10);this.dock2=Point(this.dock2.x-this.vertex.x+10,this.height+10);this.vertex=Point(10,this.vertex.y);break}this.canvasWidth=this.vertex.x>this.width?this.vertex.x+20:this.width+20;this.canvasHeight=this.vertex.y+20;this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,10);this.rightTop=Point(this.width+10,10);this.rightBottom=Point(this.width+10,this.height+10);this.leftBottom=Point(10,this.height+10);this.center=Point(10+this.width/2,10+this.height/2);this.dock1=Point(this.dock1.x+10,this.height+10);this.dock2=Point(this.dock2.x+10,this.height+10);this.vertex=Point(this.vertex.x,this.vertex.y);break;case"left":if(0>this.vertex.y){this.canvasWidth=this.width-this.vertex.x+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x+this.vertex.x+40;this.leftTop=Point(this.canvasWidth-this.width-10,this.canvasHeight-this.height-10);this.rightTop=Point(this.canvasWidth-10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.canvasWidth-10,this.canvasHeight-10);this.leftBottom=Point(this.canvasWidth-this.width-10,this.canvasHeight-10);this.dock1=Point(this.canvasWidth-this.width-10,this.dock1.y-this.vertex.y+10);this.dock2=Point(this.canvasWidth-this.width-10,this.dock1.y-this.vertex.y+10);this.center=Point(this.canvasWidth-10-this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(10,10);break}this.vertex.y>this.height?(this.canvasWidth=this.width-this.vertex.x+20,this.canvasHeight=this.vertex.y+20,this.canvasTop=this.canvasPosition.y-10,this.canvasLeft=this.canvasPosition.x+this.vertex.x+40,this.leftTop=Point(this.canvasWidth-this.width-10,10),this.rightTop=Point(this.canvasWidth-10,10),this.rightBottom=Point(this.canvasWidth-10,this.height+10),this.leftBottom=Point(this.canvasWidth-this.width-10,this.height+10)):(this.canvasWidth=this.width-this.vertex.x+20,this.canvasHeight=this.height+20,this.canvasTop=this.canvasPosition.y-10,this.canvasLeft=this.canvasPosition.x+this.vertex.x+40,this.leftTop=Point(this.canvasWidth-this.width-10,10),this.rightTop=Point(this.canvasWidth-10,10),this.rightBottom=Point(this.canvasWidth-10,this.canvasHeight-10),this.leftBottom=Point(this.canvasWidth-this.width-10,this.canvasHeight-10));this.dock1=Point(this.canvasWidth-this.width-10,this.dock1.y+10);this.dock2=Point(this.canvasWidth-this.width-10,this.dock2.y+10);this.center=Point(this.canvasWidth-10-this.width/2,10+this.height/2);this.vertex=Point(10,this.vertex.y);break;case"Up":if(0>this.vertex.x){this.canvasWidth=this.width-this.vertex.x+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-(this.canvasHeight-this.height-10);this.canvasLeft=this.canvasPosition.x-(this.canvasWidth-this.width-10);this.leftTop=Point(this.canvasWidth-this.width-10,this.canvasHeight-this.height-10);this.rightTop=Point(this.canvasWidth-10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.canvasWidth-10,this.canvasHeight-10);this.leftBottom=Point(this.canvasWidth-this.width-10,this.canvasHeight-10);this.dock1=Point(10-this.vertex.x+this.dock1.x,this.canvasHeight-this.height-10);this.dock2=Point(10-this.vertex.x+this.dock2.x,this.canvasHeight-this.height-10);this.center=Point(this.canvasWidth-10-this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(10,10);break}this.canvasWidth=this.vertex.x>this.width?this.vertex.x+20:this.width+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-(this.canvasHeight-this.height-10);this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,this.canvasHeight-this.height-10);this.rightTop=Point(this.width+10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.width+10,this.canvasHeight-10);this.leftBottom=Point(10,this.canvasHeight-10);this.dock1=Point(this.dock1.x+10,this.canvasHeight-this.height-10);this.dock2=Point(this.dock2.x+10,this.canvasHeight-this.height-10);this.center=Point(10+this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(this.vertex.x,10);break;case"Right":if(0>this.vertex.y){this.canvasWidth=this.vertex.x+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-(this.canvasHeight-this.height-10);this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,this.canvasHeight-this.height-10);this.rightTop=Point(this.width+10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.width+10,this.canvasHeight-10);this.leftBottom=Point(10,this.canvasHeight-10);this.dock1=Point(this.width+10,10+this.dock1.y-this.vertex.y);this.dock2=Point(this.width+10,10+this.dock2.y-this.vertex.y);this.center=Point(10+this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(this.vertex.x,10);break}this.vertex.y>this.height?(this.canvasWidth=this.vertex.x+20,this.canvasHeight=this.vertex.y+20):(this.canvasWidth=this.vertex.x+20,this.canvasHeight=this.height+20);this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,10);this.rightTop=Point(this.width+10,10);this.rightBottom=Point(this.width+10,this.height+10);this.leftBottom=Point(10,this.height+10);this.dock1=Point(this.width+10,10+this.dock1.y);this.dock2=Point(this.width+10,10+this.dock2.y);this.center=Point(10+this.width/2,10+this.height/2);this.vertex=Point(this.vertex.x,this.vertex.y)}},initCss:function(t,i){this.callout.css({position:"absolute"});1!=parseInt(this.config.alpha)&&(this.callout.css({opacity:this.config.alpha}),this.textBox.css({opacity:this.config.alpha}));this.setPosition(t,i)},drawRoundRect:function(){switch(this.config.hookDirect){case"Down":this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y);this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius);this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius);this.context.lineTo(this.dock2.x,this.dock2.y);this.context.lineTo(this.vertex.x+10,this.vertex.y+10);this.context.lineTo(this.dock1.x,this.dock1.y);this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius);this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius);this.context.fill();this.context.stroke();this.context.closePath();break;case"left":this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y);this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius);this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius);this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius);this.context.lineTo(this.dock2.x,this.dock2.y);this.context.lineTo(this.vertex.x+10,this.vertex.y+10);this.context.lineTo(this.dock1.x,this.dock1.y);this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius);this.context.fill();this.context.stroke();this.context.closePath();break;case"Up":this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y);this.context.lineTo(this.dock2.x,this.dock2.y);this.context.lineTo(this.vertex.x+10,this.vertex.y+10);this.context.lineTo(this.dock1.x,this.dock1.y);this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius);this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius);this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius);this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius);this.context.fill();this.context.stroke();this.context.closePath();break;case"Right":this.context.beginPath(),this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance),this.context.strokeStyle=this.strokeStyle,this.context.fillStyle=this.fillStyle,this.context.lineWidth=this.borderWidth,this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y),this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius),this.context.lineTo(this.dock2.x,this.dock2.y),this.context.lineTo(this.vertex.x+10,this.vertex.y+10),this.context.lineTo(this.dock1.x,this.dock1.y),this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius),this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius),this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius),this.context.fill(),this.context.stroke(),this.context.closePath()}},drawRoundBubble:function(){function t(t,i){var e=i.x-t.x,o=i.y-t.y;return Math.pow(e*e+o*o,.5)}var i=this.config.borderWidth/2,e=(this.width-5.5)/2,o=(this.height-5.5)/2,s=Point(this.vertex.x-this.center.x,this.vertex.y-this.center.y),s=s.y/s.x,n=Math.tan((180*Math.atan(s)/Math.PI-15)/180*Math.PI),h=Math.tan((180*Math.atan(s)/Math.PI+15)/180*Math.PI),a=Math.tan(180*Math.atan(s)/Math.PI/180*Math.PI),r=Math.sqrt(e*e*o*o/(o*o+e*e*n*n)),l=Math.sqrt(n*n*e*e*o*o/(o*o+e*e*n*n)),g=Math.sqrt(e*e*o*o/(o*o+e*e*h*h)),d=Math.sqrt(h*h*e*e*o*o/(o*o+e*e*h*h)),c=Math.sqrt(e*e*o*o/(o*o+e*e*a*a)),e=Math.sqrt(a*a*e*e*o*o/(o*o+e*e*a*a)),s=Point(this.vertex.x-i,this.vertex.y-i),p=null,u=null,o=i=null;0<=n?(p=Point(r+this.width/2,l+this.height/2),u=Point(-r+this.width/2,-l+this.height/2)):(p=Point(-r+this.width/2,l+this.height/2),u=Point(r+this.width/2,-l+this.height/2));0<=h?(i=Point(g+this.width/2,d+this.height/2),o=Point(-g+this.width/2,-d+this.height/2)):(i=Point(-g+this.width/2,d+this.height/2),o=Point(g+this.width/2,-d+this.height/2));0<=a?(Point(c+this.width/2,e+this.height/2),Point(-c+this.width/2,-e+this.height/2)):(Point(-c+this.width/2,e+this.height/2),Point(c+this.width/2,-e+this.height/2));n=t(p,s)<=t(u,s)?p:u;h=t(i,s)<=t(o,s)?i:o;void 0==CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(t,i,e,o,s,n,h,a){this.save();this.translate(t,i);this.rotate(s);this.scale(e,o);this.arc(0,0,1,n,h,a);this.restore()});this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.ellipse(this.center.x,this.center.y,this.width/2,this.height/2,0,2*Math.PI,0,!1);this.context.fill();this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(n.x+this.center.x-this.width/2,n.y+this.center.y-this.height/2);this.context.lineTo(s.x,s.y);this.context.lineTo(h.x+this.center.x-this.width/2,h.y+this.center.y-this.height/2);this.context.fill();this.context.stroke();this.context.closePath()},drawCloudBubble:function(){var t=this.getPointList("0.006060606060606061,0.6018181818181818;0.02181818181818182,0.39636363636363636;0.16,0.38;0.15393939393939393,0.21636363636363637;0.3212121212121212,0.2381818181818182;0.39515151515151514,0.014545454545454545;0.5745454545454546,0.00909090909090909;0.7781818181818182,0.014545454545454545;0.8618181818181818,0.28909090909090907;0.9854545454545455,0.3236363636363636;1,0.5163636363636364;0.9903030303030304,0.6636363636363637;0.8666666666666667,0.7218181818181818;0.8278787878787879,0.88;0.6690909090909091,0.8818181818181818;0.6557575757575758,0.9836363636363636;0.5781818181818181,1;0.49575757575757573,0.9963636363636363;0.4812121212121212,0.8836363636363637;0.31636363636363635,0.9563636363636364;0.26181818181818184,0.8309090909090909;0.1890909090909091,0.8636363636363636;0.11393939393939394,0.8236363636363636;0.01090909090909091,0.7618181818181818"),i=this.config.borderWidth/2;this.getSecondPoint();this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.lineWidth=this.borderWidth;this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;for(o=0;o<t.length;o++){var e=t[o];e.x>this.width/2?e.x-=i:e.x<this.width/2?e.x+=i:e.y>this.height/2?e.y-=i:e.y<this.height/2&&(e.y+=i)}this.context.moveTo(t[0][0],t[0][1]);for(var o=1;o<t.length-1;o++)0!=o%2&&this.context.quadraticCurveTo(t[o][0],t[o][1],t[o+1][0],t[o+1][1]);this.context.quadraticCurveTo(t[t.length-1][0],t[t.length-1][1],t[0][0],t[0][1]);this.context.fill();this.context.stroke();this.context.closePath();t=this.width/2>=this.height/2?this.width/25:this.height/25;i=i>3*t/10?3*t/10:i;this.context.beginPath();this.context.arc(this.vertex.x,this.vertex.y,3*t/5-i,0,2*Math.PI);this.context.fill();this.context.stroke();this.context.closePath();this.context.beginPath();this.context.arc(this.secondecondMovePoint.x,this.secondecondMovePoint.y,t-i,0,2*Math.PI);this.context.fill();this.context.stroke();this.context.closePath()},getPointList:function(t){var i=this.config.borderWidth/2;t=t.split(";");for(var e=[],o=0;o<t.length;o++){var s=String(t[o]).split(",");switch(this.config.hookDirect){case"Down":var n=0>this.left?[s[0]*(this.width-i)+10-this.left,s[1]*(this.height-i)+10]:[s[0]*(this.width-i)+10,s[1]*(this.height-i)+10];break;case"left":n=0>this.top?[s[0]*(this.width-i)+10-this.left,s[1]*(this.height-i)-this.top+10]:[s[0]*(this.width-i)+10-this.left,s[1]*(this.height-i)+10];break;case"Up":n=0>this.left?[s[0]*(this.width-i)+10-this.left,s[1]*(this.height-i)-this.top]:[s[0]*(this.width-i)+10,s[1]*(this.height-i)-this.top+10];break;case"Right":n=0>this.top?[s[0]*(this.width-i)+10,s[1]*(this.height-i)-this.top]:[s[0]*(this.width-i)+10,s[1]*(this.height-i)+10]}e.push(n)}return e},getSecondPoint:function(){function t(t,i){var e=i.x-t.x,o=i.y-t.y;return Math.pow(e*e+o*o,.5)}var i=this.config.borderWidth/2,e=(this.width-5.5)/2,o=(this.height-5.5)/2,s=Point(this.vertex.x-this.center.x,this.vertex.y-this.center.y),n=Math.tan(180*Math.atan(s.y/s.x)/Math.PI/180*Math.PI),h=Math.sqrt(e*e*o*o/(o*o+e*e*n*n)),e=Math.sqrt(n*n*e*e*o*o/(o*o+e*e*n*n)),s=Point(this.vertex.x-i,this.vertex.y-i),o=i=null;0<=n?(i=Point(h+this.center.x,e+this.center.y),o=Point(-h+this.center.x,-e+this.center.y)):(i=Point(-h+this.center.x,e+this.center.y),o=Point(h+this.center.x,-e+this.center.y));s=t(i,s)<=t(o,s)?i:o;this.secondecondMovePoint=0<this.left&&0<this.top?Point((this.left+s.x)/2,(this.top+s.y)/2):0<this.left&&0>this.top?Point((this.left+s.x)/2,(10+s.y)/2):0>this.left&&0<this.top?Point((s.x+10)/2,(this.top+s.y)/2):Point((s.x+10)/2,(s.y+10)/2)},fillColor:function(){var t=this.context.createLinearGradient(parseInt(this.canvasWidth),0,parseInt(this.canvasWidth),parseInt(this.canvasHeight));this.config.background.color?t.addColorStop(0,Color(this.config.background.color).rgba(this.config.background.alpha)):t.addColorStop(0,"rgba(255,255,255,1)");this.config.background.color2?t.addColorStop(1,Color(this.config.background.color2).rgba(this.config.background.alpha)):t.addColorStop(1,"rgba(255,255,255,1)");return parseBool(this.config.background.fillBg)?t:"transparent"},resizeCallout:function(t){t=transformCSS({origin:{x:0,y:0},scale:t/this.pageWidth});this.callout.css(t);this.textBox.css(t)},initEvents:function(){this.addActionEvent(this.container)},onResize:function(t,i){this.textBox.css({width:this.width,height:this.height});this.setPosition(t,i);this.resizeCallout(t,i)},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(t,i){var e=t/this.pageWidth;this.vertex1=Point(this.config.hookContrPointRatioX*this.width,this.config.hookContrPointRatioY*this.height);this.leftTopX=this.config.location.x*t-(2*this.borderWidth+10)*e;this.leftTopY=this.config.location.y*i-(2*this.borderWidth+10)*e;0>this.vertex1.x&&(this.leftTopX=this.config.location.x*t+this.vertex1.x*e-(2*this.borderWidth+10)*e);0>this.vertex1.y&&(this.leftTopY=this.config.location.y*i+this.vertex1.y*e-(2*this.borderWidth+10)*e);this.textPosition=0>this.left&&0<this.top?Point(this.leftTopX+(10-this.left)*e,this.leftTopY+10*e):0>this.left&&0>this.top?Point(this.leftTopX+(10-this.left)*e,this.leftTopY+(10-this.top)*e):0<this.left&&0>this.top?Point(this.leftTopX+10*e,this.leftTopY+(10-this.top)*e):Point(this.leftTopX+10*e,this.leftTopY+10*e);this.textBox.css({width:this.width+"px",height:this.height+"px",position:"absolute",top:(this.canvasWidth-this.width)*e/2+"px",left:(this.canvasWidth-this.width)*e/2+"px","box-sizing":"border-box",display:"table-cell",padding:"0 10px",overflow:"hidden"});this.text.css({width:this.width-20+"px",height:this.height+"px",position:"relative",top:"0",left:"0","box-sizing":"border-box"});this.container.css({width:this.canvasWidth*e+"px",height:this.canvasHeight*e+"px",position:"absolute",left:this.leftTopX+"px",top:this.leftTopY+"px"});switch(this.config.bubbleType){case"2":this.text.css({"vertical-align":"middle"});break;case"3":this.text.css({"vertical-align":"middle"})}}}).extend(PageItem.Item);Class("AText",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.color=this.config.color?Color(this.config.color):Color("#000000");this.originWidth=this.config.pageW||this.config.pageH;this.originHeight=this.config.pageH;this.pageWidth=e;this.speed=34e3/this.config.moveSpeed;this.id="text"+s;this.initOldText();1!=parseInt(this.config.alpha)&&this.atext.css({opacity:this.config.alpha});this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.atext);this.onResize(this.pageWidth,this.pageHeight)},initOldText:function(){this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});this.scrollid="scroll"+this.id;var t=new TextFormatAnalyzer(this.config.textStr);this.text=t.getHTML(this.alignCss);this.fontSize=t.getMinFontSize();this.fontColor=t.getFontColor();this.container=$("<div id="+this.id+" class='textContainer' style='position:absolute;'></div>");this.atext=$("<div style='overflow: hidden;opacity:"+this.config.alpha+"'></div>");this.atext2=$("<div style='font-color:"+this.fontColor+";font-size:12px;font-family:"+this.config.fontName+";'></div>");this.atext2.html(this.text);this.config.action||this.config.hint||t.htmlHasATag()||this.container.css({"pointer-events":"none"});!0===parseBool(this.config.tbold)&&this.atext2.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.atext2.css({"font-style":"italic"});this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.atext.css({position:"relative",width:this.width+"px",height:this.height+"px"});this.atext2.css({"width:":"100%"});this.atext.append(this.atext2);this.container.append(this.atext);this.parent.append(this.container);this.setPosition()},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,rotation:t.location.rotation,alpha:t.alpha,textStr:t.strText?t.strText:t.format.htmlText,fontName:t.format.font,fontSize:t.format.size,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,color:t.format.color,tbold:t.format.bold,italic:t.format.italic,align:t.format.align,action:t.action,repeat:t.repeat,moveSpeed:t.moveSpeed,pageH:t.format.pageH,pageW:t.format.pageW,hasShadow:parseBool(t.shadow.hasDropShadow),shadow:t.shadow,HRate:t.HRate,languageLayout:t.languageLayout,animation:t.animation}},play:function(){this.timer&&this.timer.stop();this.timer=null;this.initScroll()},pause:function(){this.timer&&this.timer.stop();this.timer=null},initScroll:function(){this.rHeight=this.atext2.height()+this.height+20;this.rTop=this.height;this.stop=!1;this.timer=this.textRun.animation(this,this.speed)},textRun:function(t,i){t==i&&(this.rTop=this.height,this.textRun.animation(this,this.speed));this.rTop=this.height-this.rHeight*t/i;this.atext2.css({transform:"translateY("+this.rTop+"px)"})},initEvents:function(){this.atext.bind(_event._down,function(t){t.stopPropagation&&t.stopPropagation();return!1});this.atext.bind(_event._move,function(t){t.stopPropagation&&t.stopPropagation();return!1});this.atext.bind(_event._up,function(t){t.stopPropagation&&t.stopPropagation();return!1});this.addActionEvent(this.container)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.setPosition();this.resizeText(this.pageWidth);var e=this.atext.find("p").height()/this.height;this.speed=1<e?this.speed*e:this.speed},resizeText:function(t){t=this.pageWidth/this.originWidth/this.adjustFontSize;this.atext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%",transform:"scale("+t+")  rotate("+this.config.rotation+"deg)","-webkit-transform":"scale("+t+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+t+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+t+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+t+") rotate("+this.config.rotation+"deg)"});this.container.css({width:this.width*t,height:this.height*t})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("FlashShow",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.config=this.parseConfig(i);if(null!=this.config.photo){this.showingA=!0;this.showingIndex=1;this.background=$("<div></div>");this.totalImage=this.config.photo.Image.length;for(t=0;t<this.config.photo.Image.length;t++)this.config.photo.Image[t]=this.fixRelativePath(this.config.photo.Image[t]);this.moveTo=1;this.background.css({width:this.width+"px",height:this.height+"px",left:this.config.x*this.pageWidth+"px",top:this.config.y*this.pageHeight+"px",position:"absolute",overflow:"hidden"});this.setRotation(this.background,this.config.rotation);this.photoA=new animateImage(this.background,this.config.photo,this.width,this.height,this.config.repeatPlay,this.config.customSize,this.config.photo.width,this.config.photo.width);this.photoB=new animateImage(this.background,this.config.photo,this.width,this.height,this.config.repeatPlay,this.config.customSize,this.config.photo.width,this.config.photo.width);this.parent.append(this.background);this.photoB.fillImage(2);this.photoA.fillImage(1);this.initChangeImageEvent(!0)}},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,photo:Instance.copy(t.Images),repeatPlay:t.isRepeat}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.background.css({width:this.width+"px",height:this.height+"px"});this.photoA.onResize(t,i);this.photoB.onResize(t,i);this.setPosition()},setPosition:function(){this.background.css({left:this.pageWidth*this.config.x+"px",top:this.pageHeight*this.config.y+"px"})},initChangeImageEvent:function(t){var i=this,e=this.photoA.getImage(),o=this.photoB.getImage(),s,n;t||(e=this.photoB.getImage(),o=this.photoA.getImage());switch(this.moveTo){case 1:s=n=1;break;case 2:s=n=-1;break;case 3:n=1;s=-1;break;case 4:n=-1,s=1}this.moveTo=4==this.moveTo?1:this.moveTo+1;var h=e.position().left+66*n,a=e.position().top+66*s,r=e.position().left+77*n,l=e.position().top+77*s;e.animate({left:h,top:a},{queue:!1,duration:3e3,complete:function(){i.showingIndex++;i.showingInde>i.totalImage&&!i.config.repeatPlay||(i.showingIndex>i.totalImage&&(i.showingIndex=0),e.animate({opacity:0,left:r,top:l},500,function(){t?i.photoA.fillImage(i.showingIndex+1):i.photoB.fillImage(i.showingIndex+1);e.css({"z-index":0});o.css({"z-index":1})}),i.initChangeImageEvent(!t))}}).animate({opacity:1},500)}}).extend("Item");var animateImage=Class({create:function(t,i,e,o,s,n,h,a){this.img=$("<img />");this.imgIndex=-1;this.imageArr=i;this.bw=e;this.bh=o;this.repeat=s;this.parent.append(this.img);this.img.css({position:"absolute"});n&&void 0!=h&&void 0!=a&&this.img.css({width:h+"px",height:a+"px"})},fillImage:function(t){if(this.imgIndex==t)this.img.css({left:(this.bw-this.img[0].width)/2+"px",top:(this.bh-this.img[0].height)/2+"px"});else if(!(t>this.imageArr.Image.length)||this.repeat){t>this.imageArr.Image.length&&(t=1);this.imgIndex=t;var i=this;this.img.attr("src",i.getImageDiv(t));this.img.on("load",function(){i.img.css({left:(i.bw-this.width)/2+"px",top:(i.bh-this.height)/2+"px"})})}},getImageDiv:function(t){return this.imageArr.Image[t-1].photo},setZIndex:function(t){this.img.css("z-index",t)},onResize:function(t,i){this.bw=t;this.bh=i;this.img.css({left:(this.bw-this.img[0].width)/2+"px",top:(this.bh-this.img[0].height)/2+"px"})},setPosition:function(t,i){this.img.css({left:t+"px",top:i+"px"})},animate:function(){},getImage:function(){return this.img}});Class("Sound",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.sound=null;null!=this.config.src&&(this.config.src=this.config.src,this.arr=null,this.arr="undefined"!=typeof this.config.src.path?this.config.src.path:this.config.src[0].path,this.arr=this.fixRelativePath(this.arr),this.pageWidth=e,this.pageHeight=o,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.h1=this.height/6,this.h2=this.height/3,this.c=this.nflay=this.flay=0,this.st=null,this.id="AdvancedSound"+s,this.sounddiv=$("<div class='flip-action' style='position:absolute; width:"+this.width+"px;height:"+this.height+"px;top:"+this.y+"px;left:"+this.x+"px;background:url("+uiBaseURL+"audio.png);background-size:"+this.width+"px "+this.height+"px;background-repeat:no-repeat;'></div>"),this.sound=new Media($("<audio id='"+this.id+"' src='"+this.arr+"'></audio>"),"media"),this.preimg=$("<img src='"+uiBaseURL+"Pre_down.png' style='position:absolute; left:10px;bottom:5px;cursor:pointer;' />"),this.playimg=$("<img src='"+uiBaseURL+"Play_down.png' style='position:absolute; left:50px;bottom:5px;cursor:pointer;'/>"),this.nextimg=$("<img src='"+uiBaseURL+"Nextpage_down.png' style='position:absolute; left:90px;bottom:5px;cursor:pointer;' />"),this.soundname=$("<div style='position:absolute; right:10px;top:"+this.h2+"px;color:#389ac2;font-size:10px;'></div>"),this.soundtime=$("<div style='position:absolute; right:10px;top:"+this.h1+"px;color:#389ac2;font-size:10px;'></div>"),this.parent.append(this.sounddiv),this.sounddiv.append(this.sound.$media),this.sounddiv.append(this.preimg),this.sounddiv.append(this.playimg),this.sounddiv.append(this.nextimg),this.sounddiv.append(this.soundname),this.sounddiv.append(this.soundtime),null!=this.config.src&&this.initEvent(),this.setRotation(this.sounddiv,this.config.rotation))},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpageHeighta:t.alpageHeighta,src:t.soundList.sound,skinType:t.skinType,soundPlay:t.soundPlayTriggerEvt||t.componentData.playEvt}},initEvent:function(){var i=this;i.nflay=0;var e=i.playimg[0],o=i.sound[0],s=i.config.src[0].path,n=typeof i.config.src.path;"undefined"!=n?i.soundname.html(this.getname(i.config.src.path)):i.soundname.html(this.getname(s));i.soundtime.html("00:00 / 00:00");this.playimg.bind(_event._down,function(t){0==i.flay?(e.src=uiBaseURL+"Pause_down.png",o.play(),i.flay=1,i.gettime(o.duration)):(e.src=uiBaseURL+"Play_down.png",o.pause(),i.flay=0,clearTimeout(i.st))});this.preimg.bind(_event._down,function(t){o.pause();clearTimeout(i.st);"undefined"!=n?o.src=i.config.src.path:0<i.nflay&&i.nflay<i.config.src.length?(o.src=i.config.src[i.nflay-1].path,i.soundname.html(i.getname(i.config.src[i.nflay].path)),i.nflay-=1):(o.src=s,i.soundname.html(i.getname(s)));o.play();e.src=uiBaseURL+"Pause_down.png";i.flay=1;setTimeout(function(){i.c=0;i.gettime(o.duration)},1e3)});this.nextimg.bind(_event._down,function(t){o.pause();clearTimeout(i.st);"undefined"!=n?o.src=i.config.src.path:i.nflay<i.config.src.length?(i.nflay+=1,o.src=i.config.src[i.nflay].path,i.soundname.html(i.getname(i.config.src[i.nflay].path)),i.nflay+=1):(o.src=s,i.soundname.html(i.getname(s)),i.nflay=0);o.play();e.src=uiBaseURL+"Pause_down.png";i.flay=1;setTimeout(function(){i.c=0;i.gettime(o.duration)},1e3)})},gettime:function(t){var i=this,e=null,o=0,s=null,e=i.c%60,s=parseInt(t%60),s=10>s?"0"+s:s,n=parseInt(t/60);i.c<t&&(i.c+=1,60>i.c?e=10>i.c?"00:0"+i.c:"00:"+i.c:(o=parseInt(i.c/60),e=10>o?10>e?"0"+o+":0"+e:"0"+o+":"+e:10>e?o+":0"+e:o+":"+e),10>n?i.soundtime.html(e+" / 0"+n+":"+s):i.soundtime.html(e+" / "+n+":"+s),i.st=setTimeout(function(){i.gettime(t)},1e3))},getname:function(t){var i=[],i=t.split("/");return i[i.length-1].split(".")[0]},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.sounddiv.css({width:this.width+"px",height:this.height+"px"});this.sounddiv.css("background-size",this.width+"px "+this.height+"px");this.soundname.css("top",this.height/3+"px");this.soundtime.css("top",this.height/6+"px");this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.sounddiv.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");global.hddr.soo3=bdor[51];global.hddr.soc8=hddr.sob8+"ph";Class("EffectText",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.originWidth=i.location.pageWidth;this.originHeight=i.location.pageHeight;this.color=Color(this.config.color).toString();this.speed=this.pos=0;this.speed="ChangeSpeed"==this.config.moveSpeed?250:150;this.width=this.config.width*this.originWidth;this.height=this.config.height*this.originHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="efftext"+s;this.scrollid="efftext"+this.id;this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});t=new TextFormatAnalyzer(this.config.textStr);this.config.textStr=t.getLines();this.fontFamily=t.getFontFamily();this.fontSize=t.getFontSize();this.config.color=t.getFontColor();this.color=Color(this.config.color).toString();this.container=$("<div id="+this.id+" class='textContainer' style='position:absolute;text-align:"+t.getAlign()+"'></div>");!0===parseBool(this.config.sh)?this.efftext=$("<div style='position:absolute;height:"+this.height+"px;width:"+this.width+"px;box-shadow:"+this.config.sx+"px "+this.config.sy+"px "+this.config.se+"px "+Color(this.config.sr).toString()+";opacity:"+this.config.alpha+"'></div>"):this.efftext=$("<div style='position:absolute;height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpha+"'></div>");this.efftext2=$("<div id="+this.scrollid+" style='word-wrap: break-word;line-height:"+t.getLineHeight()+"px;font-family:"+this.fontFamily+";width:"+this.width+"px;font-size:"+this.fontSize+"px;color:"+this.color+";'></div>");!0===parseBool(this.config.tbold)&&this.efftext.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.efftext.css({"font-style":"italic"});this.container.css({height:this.height+"px",width:this.width+"px"});1!=parseInt(this.config.alpha)&&this.efftext.css({opacity:this.config.alpha});this.initEvent();this.efftext.append(this.efftext2);this.container.append(this.efftext);this.parent.append(this.container);this.initeffAmin();this.onResize(e,o);parseBool(this.config.reflection)&&this.imageReflection(this.efftext);this.setRotation(this.efftext,this.config.rotation)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,rotation:t.location.rotation,width:t.location.width,height:t.location.height,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,alpha:t.alpha,textStr:t.htmlText||t.textStr,moveSpeed:t.effectStyle,lineH:t.lineHeightRation,sh:parseBool(t.shadow.hasDropShadow),sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,languageLayout:t.languageLayout,animation:t.animation}},initeffAmin:function(){this.cel=this.row=0;this.currentText=""},runText:function(){this.timer=setInterval(function(){var t=this.config.textStr,i=this.config.textStr[this.row],e=i[this.cel];if("&"==e){var o=i.slice(this.cel,this.cel+6);"&ensp;"===o&&(this.cel+=5,e=o)}if("<"==e){o=i.indexOf(">",this.cel);for(e=i[o+1];"<"==e;){o=i.indexOf(">",o+1);if(-1==o)break;e=i[o+1]}e=i.substring(this.cel,o+2);this.cel=o+1}e&&(this.currentText+=e);this.cel+=1;if(!i.length||this.cel>=i.length)if(this.currentText+="<br/>",this.row+=1,this.cel=0,this.row>=t.length){this.efftext2.html(this.currentText);this.row=0;this.currentText="";clearInterval(this.timer);this.timer=null;return}this.efftext2.html(this.currentText)}.bind(this),this.speed)},initEvent:function(){this.addActionEvent(this.container)},play:function(){this.runText()},pause:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.setPosition();this.fontSize=this.config.lineH*this.originHeight*.75;this.resizeText(this.pageWidth)},resizeText:function(t){t/=this.originWidth;this.efftext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+t+")","-moz-transform":"scale("+t+")","-ms-transform":"scale("+t+")","-o-transform":"scale("+t+")",transform:"scale("+t+")"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);bdor[7]="m";Class("PngImage",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.img=$("<img>");null!=this.config.src&&(this.config.src=this.fixRelativePath(this.config.src),this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.left=this.pageWidth*this.config.x,this.top=this.pageHeight*this.config.y,this.img.on("load",function(){this.onImageLoad()}.bind(this)),this.img.css({position:"absolute",width:"0px",height:"0px",left:this.left+"px",top:this.top+"px",opacity:this.config.alpha}),this.img.attr({src:this.config.src}),this.parent.append(this.img),this.initEvt())},parseConfig:function(t){return{width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,alpha:t.alpha,src:t.url,action:t.action}},onImageLoad:function(){var t=this.img[0];this.imageWidth=t.naturalWidth;this.imageHeight=t.naturalHeight;this.fitImage()},fitImage:function(){var t=this.imageWidth/this.imageHeight,i,e,o;t>this.width/this.height?(e=this.width,o=e/t,t=this.left,i=(this.height-o)/2+this.top):(o=this.height,e=o*t,t=(this.width-e)/2+this.left,i=this.top);this.img.css({left:t+"px",top:i+"px",width:e+"px",height:o+"px"})},initEvt:function(){if(void 0!=this.config.action){this.linkURL="";try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(t){}null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);this.addActionEvent(this.img)}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.pageHeight*this.config.x;this.top=this.pageHeight*this.config.y;this.fitImage();this.width>this.height?this.img.css({height:this.height+"px",left:this.pageWidth*this.config.x+"px",top:this.pageHeight*this.config.y+"px"}):this.img.css({width:this.width+"px",left:this.pageWidth*this.config.x+"px",top:this.pageHeight*this.config.y+"px"});this.setPosition(this.config.x*t,this.config.y*i)},setPosition:function(t,i){this.img.css({left:t+"px",top:i+"px"})}}).extend(PageItem.Item);Class("TextAmin",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.color=this.config.color?Color(this.config.color):Color("#000000");this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.pos=0;this.id="amintext"+s;this.scrollid="animscroll"+this.id;this.initText();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.amintext);1!=parseInt(this.config.alpha)&&this.amintext.css({opacity:this.config.alpha});this.onResize(this.pageWidth,this.pageHeight)},initText:function(){this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});var t=new TextFormatAnalyzer(this.config.textStr);this.fontSize=t.getMinFontSize();this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.container=$("<div class='textAmin' class='textContainer' style='overflow:hidden;position:absolute; pointer-events:none;'></div>");this.amintext=$("<div style='position:absolute; height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpageHeighta+"'></div>");this.addShadow(this.amintext);this.amintext2=t.getHTML(this.alignCss);this.amintext.append(this.amintext2);this.container.append(this.amintext);this.parent.append(this.container);this.config.action||t.htmlHasATag()||this.container.css({"pointer-events":"none"});this.trimingFontSize(this.height);this.textContents=this.getTextContents();this.hideContents()},getTextContents:function(){var t=this.amintext2.find("span"),i=[];if(0==t.length){var e={element:this.amintext2,text:this.amintext2.text().replaceAll("&nbsp;"," ")};0<this.amintext2.find("b").length&&(e.bold=!0);0<this.amintext2.find("i").length&&(e.italic=!0);0<this.amintext2.find("u").length&&(e.underline=!0);i.push(e)}else for(var o=0;o<t.length;o++){var s=$(t[o]),e={element:s,text:s.text().replaceAll("&nbsp;"," ")};0<s.find("b").length&&(e.bold=!0);0<s.find("i").length&&(e.italic=!0);0<s.find("u").length&&(e.underline=!0);i.push(e)}return i},hideContents:function(){for(var t=0;t<this.textContents.length;t++)this.textContents[t].element.css("display","none")},trimingFontSize:function(t){function o(t,i){if(t.css){var e=t.css(i);e&&(e=parseInt(e.replace("px","")),e--,"line-height"==i&&(e*=.85),t.css(i,e+"px"))}}function s(t){if((t=t.children())&&0!=t.length)for(var i=0;i<t.length;i++){var e=$(t[i]);e.is("span")&&(o(e,"font-size"),o(e,"line-height"));s(e)}}for(;this.amintext2.height()>t&&$.system.name!=$.system.IOS&&!($.browser.chrome&&12>=this.fontSize)&&!(s(this.amintext2),this.fontSize--,0>=this.fontSize););},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,alpageHeighta:t.alpageHeighta,alpha:t.alpha,effectType:t.effectType,textStr:t.textStr?t.textStr:t.formats.defaultFormat.htmlText,rotation:t.location.rotation,fontName:t.formats.defaultFormat.fontName,fontSize:t.formats.defaultFormat.fontSize,color:t.formats.defaultFormat.color,tbold:t.formats.defaultFormat.bold,italic:t.formats.defaultFormat.italic,action:t.action,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,lineH:t.HRate,pageW:t.formats.defaultFormat.pageW,pageH:t.formats.defaultFormat.pageH,hasShadow:parseBool(t.shadow.hasDropShadow),shadow:t.shadow,lineHeightRation:t.lineHeightRation,languageLayout:t.languageLayout,animation:t.animation}},play:function(){this.TextAnimate()},pause:function(){this.timer&&(this.timer.stop(),this.timer=null);if("Scale Word"==this.config.effectType){var t=this.textContents.slice();t.reverse();for(var i=0;i<t.length;i++)t[i].element.css({"-webkit-transform":"scale(2.5)","-ms-transform":"scale(2.5)",transform:"scale(2.5)",display:"inline-block",opacity:"0","-webkit-transition":"","-ms-transition":"",transition:""})}},TextAnimate:function(){this.hideContents();switch(this.config.effectType){case"Default":this.initAmin();break;case"Letter Spacing":this.litterText();break;case"Scale Word":this.scaleText();break;case"Right To Left":this.RightText();break;case"Center To Edges":this.initAmin();break;default:this.initAmin()}},changeAnimateContent:function(t){var i=this.textContents[t];t=i.element;i=i.text;t.text("");t.css("display","block");return{content:t,text:i}},initAmin:function(){this.timer&&this.timer.stop();this.cel=this.row=0;this.currentText="";var o=new TextFormatAnalyzer(this.config.textStr).getLines(),s;s=this.textContents[0].element;s.css({display:"block"});s=this.changeAnimateContent(0).content;this.timer=function(){var t=o[this.row],i=o[this.row][this.cel];if("&"==i){var e=t.slice(this.cel,this.cel+6);"&ensp;"===e&&(this.cel+=5,i=e)}if("<"==i){e=t.indexOf(">",this.cel);for(i=o[this.row][e+1];"<"==i;){e=t.indexOf(">",e+1);if(-1==e)break;i=o[this.row][e+1]}i=t.substring(this.cel,e+2);this.cel=e+1}i&&(this.currentText+=i);this.cel+=1;if(this.cel>=o[this.row].length||!t.length)if(this.currentText+="<br/>",this.row+=1,this.cel=0,this.row>=o.length){s.html(this.currentText);this.row=0;this.currentText="";this.timer.stop();this.timer=null;return}s.html(this.currentText)}.interval(this,200)},scaleText:function(){this.timer2&&(clearTimeout(this.timer2),this.timer2=null);this.container.css({perspective:"200","-webkit-perspective":"200",overflow:""});var t=this.textContents.slice();t.reverse();for(var i=0;i<t.length;i++){var e=t[i];e.element.css({"-webkit-transform":"scale(2.5)","-ms-transform":"scale(2.5)",transform:"scale(2.5)",display:"inline-block",opacity:"0"});(function(t){this.timer2=setTimeout(function(){t.element.css({opacity:"1","-webkit-transform":"scale(1)","-ms-transform":"scale(1)",transform:"scale(1)","-webkit-transition":"all 0.25s","-ms-transition":"all 0.25s",transition:"all 0.25s"});t.element.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){t.element.css({"-webkit-transition":"","-ms-transition":"",transition:""})}.bind(this))}.bind(this),100+200*i)}).call(this,e)}},RightText:function(){this.amintext2.css({position:"absolute",opacity:.1,left:"50px"});for(var t=0;t<this.textContents.length;t++)this.textContents[t].element.css("display","inline-block");(function(){this.amintext2.animate({opacity:1,left:"0px"})}).delay(this,100)},litterText:function(t,i){this.timer&&this.timer.stop();var e=0,o=0,s=-this.fontSize,n,h,a=function(t){t=this.changeAnimateContent(t);n=t.content;h=t.text}.bind(this);a(0);this.timer=function(){if(e<h.length){var t=$("<div></div>");t.css({position:"relative",display:"inline-block",top:s+"px"});var i=h.substr(e,1);t.text(i);" "==i&&t.css({width:this.fontSize/2+"px",height:this.fontSize+"px"});n.append(t);t.animate({top:"0px"},400,"swing");e++}else o++,o>=this.textContents.length?(this.timer.stop(),this.timer=null):(a(o),e=0)}.interval(this,200)},initEvents:function(){this.addActionEvent(this.container)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.setPosition();this.amintext.css("font-size",this.fontSize+"px");this.amintext2.css("font-size",this.fontSize+"px");this.resizeText(this.pageWidth)},resizeText:function(t){t=t/this.originWidth/this.adjustFontSize;this.amintext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+t+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+t+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+t+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+t+") rotate("+this.config.rotation+"deg)",transform:"scale("+t+") rotate("+this.config.rotation+"deg)"});this.container.css({width:this.width*t+"px",height:this.height*t+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("StarText",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.originWidth=this.config.pageW||this.config.pageH;this.originHeight=this.config.pageH;this.speed=1/this.config.moveSpeed*24e3;this.tid=s;this.id="startext"+s;this.scrollid="starwars"+this.id;this.textli="";this.offset=0;this.stepping=.2;this.initText();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.startext);1!=parseInt(this.config.alpha)&&this.startext.css({opacity:this.config.alpha});this.onResize(this.pageWidth,this.pageHeight)},initText:function(){this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});var t=new TextFormatAnalyzer(this.config.textStr);this.fontSize=t.getMinFontSize();this.text=t.getHTML(this.alignCss);this.text.css({"width:":"100%",height:"100%"});this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.container=$("<div id='"+this.id+" class='textContainer' style='position:absolute; height:"+this.height+"px;width:"+this.width+"px;'></div>");this.startext=$("<div style='position:absolute; overflow:hidden;height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpha+"'></div>");this.sFontSize=this.config.fontSize?this.config.fontSize.replaceAll('"',""):"9";this.startext2=$("<div id='"+this.scrollid+"' style='word-wrap: break-word;'></div>");this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.config.pageW?this.startext2.css({position:"absolute",width:"80%",left:"10%",top:"-40%","-webkit-transform-origin":this.width/2+"px "+this.height+"px","-moz-transform-origin":this.width/2+"px "+this.height+"px","-ms-transform-origin":this.width/2+"px "+this.height+"px","-o-transform-origin":this.width/2+"px "+this.height+"px","transform-origin":this.width/2+"px "+this.height+"px"}):this.startext2.css({position:"absolute"});this.config.action||t.htmlHasATag()||this.container.css({"pointer-events":"none"});!0===parseBool(this.config.tbold)&&this.startext2.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.startext2.css({"font-style":"italic"});this.addShadow(this.startext);this.container.append(this.startext);this.parent.append(this.container);this.startext.append(this.startext2);this.startext2.append(this.text)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,alpha:t.alpha,textStr:t.strText?t.strText:t.format.htmlText,fontName:t.format.font,fontSize:t.format.size,color:t.format.color,tbold:t.format.bold,italic:t.format.italic,align:t.format.align,pageW:t.format.pageW,pageH:t.format.pageH,action:t.action,repeat:t.repeat,moveSpeed:t.moveSpeed,lineH:t.HRate,hasShadow:parseBool(t.shadow.hasDropShadow),shadow:t.shadow,languageLayout:t.languageLayout,animation:t.animation}},play:function(){this.config.pageW?(this.playText=!0,this.textHeight=this.startext2.height(),this.initScroll()):this.initScrollOld()},pause:function(){this.config.pageW?(this.playText=!1,this.setRunCss(["",1.5*this.height])):this.startext2.stop()},setRunCss:function(t){this.startext2.css({"-webkit-transition":t[0],"-o-transition":t[0],"-moz-transition":t[0],transition:t[0],"-webkit-transform":"rotateX(70deg)  translateY("+t[1]+"px)","-moz-transform":"rotateX(70deg)   translateY("+t[1]+"px)","-o-transform":"rotateX(70deg)   translateY("+t[1]+"px)","-mos-transform":"rotateX(70deg) t translateY("+t[1]+"px)",transform:"rotateX(70deg)   translateY("+t[1]+"px)"})},initScrollOld:function(){this._wrap=this.startext2;var t=this.text.length;this._wrap.height();for(var i=t;0<=i;i--)$(t[i]).css("fontSize",this.sFontSize-this.offset+"px"),this.offset+=this.stepping;this._wrap.css("marginTop",this.height);this.initScrollTextOld()},initScrollTextOld:function(){var i=this,e=i._wrap,o=i.tid,t=e.height();e.animate({marginTop:-t+"px"},i.speed,"linear",function(){if("true"==i.config.repeat){for(var t=o;0<=t;t--)$(o[t]).css("fontSize",i.sFontSize-i.offset+"pt"),i.offset+=i.stepping;e.css("marginTop",i.height);i.offset=0;i.stepping=.2;i.initScrollTextOld()}else e.css("marginTop",0)})},initScroll:function(){this.setRunCss(["",1.5*this.height]);(function(){this.playText&&this.initScrollText()}).delay(this,30)},initScrollText:function(){if(this.transitionEnd=this.whichTransitionEvent())this.startext2.one(this.transitionEnd,function(t){t.stopPropagation();"true"==this.config.repeat&&this.initScroll()}.bind(this));this.setRunCss(["all "+this.speed+"ms linear",-this.textHeight])},whichTransitionEvent:function(){var t,i=this.startext2[0],e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",MsTransition:"msTransitionEnd"};for(t in e)if(void 0!==i.style[t])return e[t]},initEvents:function(){this.addActionEvent(this.container)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.setPosition();this.resizeText(this.pageWidth)},resizeText:function(t){t=t/this.originWidth/this.adjustFontSize;this.startext.css({perspective:this.height/2+"px","-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+t+")","-moz-transform":"scale("+t+")","-ms-transform":"scale("+t+")","-o-transform":"scale("+t+")",transform:"scale("+t+")"});this.container.css({width:this.width*t+"px",height:this.height*t+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Banner",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.banners=this.config.banners;this.id="banner"+s;this.time=this.banners.length?1e3*this.banners[0].displayTime:this.banners?1e3*this.banners.displayTime:2e3;this.btnWidth=30;this.shadowColor=260<this.width?"#000":"#111";this.initHtml();this.initCss();this.getPosition();this.initEvent();this.drawNextImage(this.images[0]);this.setRotation(this.banner,this.config.rotation)},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,action:t.action,selectBtn:t.selectBtn,autoBool:parseBool(t.autoBool),banners:t.banners,animation:t.animation}},initHtml:function(){this.banner=$("<div ></div>");this.canvas=$("<canvas class='box' style='background:#ffffff' width='"+this.width+"' height='"+this.height+"'></canvas>");this.leftBtn=$("<img src='"+uiBaseURL+"pre_image.png' />");this.rightBtn=$("<img src='"+uiBaseURL+"next_image.png' />");this.leftBtn.css({position:"absolute",width:"20px",height:"20px",left:"0",top:(this.height-20)/2+"px"});this.rightBtn.css({position:"absolute",width:"20px",height:"20px",right:"0",top:(this.height-20)/2+"px"});this.images=[];if(!this.banners.length){if(!this.banners.banner)return;var t=new Image,i=this.fixRelativePath(this.banners.banner.imageUrl);bookConfig.useTheAliCloudChart&&(i=this.getOssUrl(i,this.width,this.height,"lfit"));t.src=i;this.images.push(t)}for(var e=0;this.banners.length&&e<this.banners.length;e++)t=new Image,i=this.fixRelativePath(this.banners[e].imageUrl),bookConfig.useTheAliCloudChart&&(i=this.getOssUrl(i,this.width,this.height,"lfit")),t.src=i,this.images.push(t);this.ctx=this.canvas[0].getContext("2d");this.banner.append(this.canvas);parseBool(this.config.selectBtn)&&this.banner.append(this.leftBtn).append(this.rightBtn);this.parent.append(this.banner)},initCss:function(){this.banner.css({opacity:this.config.alpha,position:"absolute",width:this.width+"px",height:this.height+"px",left:this.x+"px",top:this.y+"px"});this.leftBtn.css({cursor:"pointer"});this.rightBtn.css({cursor:"pointer"})},initEvent:function(){this.leftBtn.bind(_event._down,function(t){t.stopPropagation();t.preventDefault();t=this.images.pop();this.images.unshift(t);this.drawNextImage(this.images[0])}.bind(this));this.rightBtn.bind(_event._down,function(t){t.stopPropagation();this.drawNextImage(this.images[1]);t=this.images.shift();this.images.push(t)}.bind(this))},getPosition:function(){x1=this.width;y1=this.height/2;x2=.85*this.width;y2=this.height;x3=.76*this.width;y3=.88*this.height;x4=this.width;y4=this.height/2;this.positions=[{x:x1,y:y1},{x:x2,y:y2},{x:x3,y:y3},{x:x4,y:y4}]},getImageConfig:function(t){if(t.naturalWidth/t.naturalHeight>this.width/this.height)if(t.naturalWidth<this.width){var i=t.naturalWidth,e=t.naturalHeight;t=(this.width-i)/2;var o=(this.height-e)/2}else i=this.width,o=this.width/t.naturalWidth,e=t.naturalHeight*o,t=0,o=(this.height-e)/2;else t.naturalHeight<this.height?(i=t.naturalWidth,e=t.naturalHeight,t=(this.width-i)/2,o=(this.height-e)/2):(o=this.height/t.naturalHeight,e=this.height,i=t.naturalWidth*o,t=(this.width-i)/2,o=0);return{width:i,height:e,left:t,top:o}},drawWhiteBg:function(){this.ctx.save();this.ctx.fillStyle="#fff";this.ctx.fillRect(0,0,this.width,this.height);this.ctx.restore()},drawNextImage:function(i){if(i){this.ctx.beginPath();if(i.complete){if(!i.naturalWidth){this.canvas.css({background:"transparent"});this.imgError=!0;return}var t=this.getImageConfig(i);this.drawWhiteBg();this.ctx.drawImage(i,t.left,t.top,t.width,t.height)}else i.onload=function(){if(i.naturalWidth){var t=this.getImageConfig(i);this.drawWhiteBg();this.ctx.drawImage(i,t.left,t.top,t.width,t.height)}else this.canvas.css({background:"transparent"}),this.imgError=!0}.bind(this);this.ctx.closePath()}},cutImg:function(i){this.ctx.beginPath();var e=this.images[0];if(e.complete)if(e.naturalWidth){var t=this.getImageConfig(e);this.ctx.beginPath();this.ctx.save();this.ctx.moveTo(0,0);0<i[0].y&&this.ctx.lineTo(i[0].x,0);this.ctx.lineTo(i[0].x,i[0].y);this.ctx.lineTo(i[1].x,i[1].y);this.ctx.lineTo(0,this.height);this.ctx.lineTo(0,0);this.ctx.clip();this.drawWhiteBg();this.ctx.drawImage(e,t.left,t.top,t.width,t.height);this.ctx.restore();this.ctx.closePath()}else this.canvas.css({background:"transparent"}),this.imgError=!0;else e.onload=function(){if(e.naturalWidth){var t=this.getImageConfig(e);this.ctx.beginPath();this.ctx.save();this.ctx.moveTo(0,0);0<i[0].y&&this.ctx.lineTo(i[0].x,0);this.ctx.lineTo(i[0].x,i[0].y);this.ctx.lineTo(i[1].x,i[1].y);this.ctx.lineTo(0,this.height);this.ctx.lineTo(0,0);this.ctx.clip();this.drawWhiteBg();this.ctx.drawImage(e,t.left,t.top,t.width,t.height);this.ctx.restore();this.ctx.closePath()}else this.canvas.css({background:"transparent"}),this.imgError=!0}.bind(this)},drawCover:function(t){this.ctx.beginPath();var i=this.ctx.createLinearGradient(0,0,1.2*t[0].x,.8*t[1].x);i.addColorStop(0,"#fff");i.addColorStop(.6,"#ddd");i.addColorStop(1,"#eee");this.ctx.fillStyle=i;this.ctx.moveTo(t[0].x,t[0].y);this.ctx.lineTo(t[1].x,t[1].y);this.ctx.lineTo(t[2].x,t[2].y);this.ctx.lineTo(t[3].x,t[3].y);this.ctx.lineTo(t[0].x,t[0].y);this.ctx.fill();this.ctx.closePath();this.drawShadow(t)},drawShadow:function(t){this.ctx.beginPath();this.ctx.save();1<=t[0].x?(this.ctx.shadowColor=this.shadowColor,this.ctx.strokeStyle="#dedede",this.ctx.shadowBlur=.075*(this.width-t[2].x/2),this.ctx.shadowOffsetX=.09*-(this.width-t[1].x),this.ctx.lineWidth=2):this.ctx.restore();this.ctx.moveTo(t[0].x+2,.9*t[0].y);this.ctx.lineTo(t[1].x+2,.95*t[1].y);1<=t[0].x&&(this.ctx.stroke(),this.ctx.restore());this.ctx.closePath();this.ctx.beginPath();this.ctx.save();1<=t[0].x?(this.ctx.shadowColor=this.shadowColor,this.ctx.strokeStyle="#dedede",this.ctx.shadowBlur=.075*(this.width-t[2].x/2),this.ctx.shadowOffsetX=.13*-(this.width-t[1].x),this.ctx.lineWidth=2):this.ctx.restore();this.ctx.moveTo(t[0].x+2,.9*t[0].y);this.ctx.lineTo(t[1].x+2,.95*t[1].y);1<=t[0].x&&(this.ctx.stroke(),this.ctx.restore());this.ctx.closePath();this.ctx.beginPath();this.ctx.save();1<=t[0].x?(this.ctx.shadowColor=this.shadowColor,this.ctx.strokeStyle="#dedede",this.ctx.lineWidth=2,this.ctx.shadowBlur=.075*(this.width-t[2].x/2),this.ctx.shadowOffsetX=.04*(this.width-t[2].x)):this.ctx.restore();this.ctx.moveTo(t[0].x,t[0].y);this.ctx.lineTo(t[1].x,t[1].y);1<=t[0].x&&(this.ctx.stroke(),this.ctx.restore());this.ctx.closePath()},play:function(){this.imgError||1>=this.images.length||!this.config.autoBool||this.timer||this.timeOut||(this.timeOut=setTimeout(this.animate.bind(this),this.time))},pause:function(){this.imgError||1>=this.images.length||!this.config.autoBool||(clearTimeout(this.timeOut),this.timeOut=null,cancelAnimationFrame(this.timer),this.timer=null)},getRunPosition:function(){0>=this.positions[0].y&&(this.positions[0].x-=.0175*this.width);this.positions[0].x<this.width/2&&(this.positions[0].x-=.0035*this.width);0<this.positions[0].y&&(this.positions[0].y-=.05*this.height*3.5);0<this.positions[1].x&&(this.positions[1].x-=.0175*this.width);this.positions[2].x-=.0085*this.width*3.5;this.positions[2].y-=.01925*this.height;this.positions[2].x<=.4*this.width&&(this.positions[2].y+=.01925*this.height);0>=this.positions[0].y&&(this.positions[3].x-=.03325*this.width);0<this.positions[3].y&&(this.positions[3].y-=.05*this.height*3.5)},animate:function(){this.ctx.clearRect(0,0,this.width,this.height);if(!this.imgError&&(this.drawNextImage(this.images[1]),this.cutImg(this.positions),this.drawCover(this.positions),this.getRunPosition(),0<=this.positions[0].x&&(this.timer=requestAnimationFrame(this.animate.bind(this))),0>this.positions[0].x)){this.pause();this.drawNextImage(this.images[1]);var t=this.images.shift();this.images.push(t);this.getPosition();this.timeOut=setTimeout(this.animate.bind(this),this.time)}},onResize:function(t,i){var e=this.config.width*t/this.width;this.fScale=t/this.pageWidth;this.pageWidth=t;this.pageHeight=i;this.btnWidth*=this.fScale;this.banner.css({"-webkit-transform-origin":"0 0","-o-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0","-webkit-transform":"scale("+e+")","-o-transform":"scale("+e+")","-ms-transform":"scale("+e+")","-moz-transform":"scale("+e+")",transform:"scale("+e+")"});this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.banner.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.banner.one(t,function(){this.banner.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.banner.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");Class("Print",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.pageIndex=s;this.initArea();this.initEvents();this.onResize()},initArea:function(){this.area=$("<div class='flip-action'></div>");this.button=$("<img src = '"+uiBaseURL+"print_icon.png'></img>");this.parent.append(this.area);this.area.append(this.button);this.initStyle();this.initImageForPrint()},initStyle:function(){this.area.css({position:"absolute",border:this.config.borderWidth+"px solid "+Color(this.config.borderColor).toString(),opacity:this.config.alpha,"-webkit-transform-origin":"50% 50%","-moz-transform-origin":"50% 50%","-ms-transform-origin":"50% 50%","-o-transform-origin":"50% 50%","transform-origin":"50% 50%"});this.button.css({position:"absolute",width:"16px",height:"16px",top:"5px",right:"5px",cursor:"pointer"})},getImageSizeForMM:function(t,i){var e=690,o=1021,s=t/i;s>690/1021?690<t?(e=690,o=e/s):(e=t,o=i):1021<i?(o=1021,e=o*s):(e=t,o=i);return{width:e,height:o}},getScaleConfig:function(t,i){var e=bookConfig.largePageWidth,o=bookConfig.largePageHeight,s={},s=t/i,n=e/o,h=e*this.config.x,a=o*this.config.y;return s=s>n&&t>=e?{y:(a-(o-e/s)/2)/i,x:this.config.x,pWidth:e,pHeight:o}:s<n&&i>=o?{x:(h-(e-o*s)/2)/t,y:this.config.y,pWidth:e,pHeight:o}:{x:this.config.x,y:this.config.y,pWidth:t,pHeight:i}},initImageForPrint:function(){this.ready=!1;var t=getPageDir(this.pageIndex,"normal",originTotalPageCount),i=this.getImageSizeForMM(bookConfig.largePageWidth*this.config.width,bookConfig.largePageHeight*this.config.height),l=i.width,g=i.height;this.printedImage=$("<div></div>");var d=$("<img width='"+l+"px' height = '"+g+"px'></img>");this.printedImage.append(d);var c=$("<img></img>"),p=$("<canvas width='"+l+"px' height = '"+g+"px'></canvas>");c.on("load",function(t){try{var i=p[0].getContext("2d");if(i){var e=c[0].naturalWidth,o=c[0].naturalHeight,s=e*this.config.x,n=o*this.config.y,h=e*this.config.width,a=o*this.config.height;if(!bookConfig.bookPageStretch)var r=this.getScaleConfig(e,o),s=e*r.x,n=o*r.y,h=r.pWidth*this.config.width,a=r.pHeight*this.config.height;i.drawImage(c[0],s,n,h,a,0,0,l,g);d[0].src=p[0].toDataURL("image/png");c.attr("src","")}}catch(t){console.error&&console.error("Load printed image failed."),this.ready=!0}}.bind(this));d.on("load",function(t){this.ready=!0}.bind(this));c.attr("src",t)},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,overAlpha:t.overAlpha,borderColor:t.borderColor,overColor:t.overColor,borderWidth:t.barderWidth,printTitle:t.printTitle,printDesc:t.printDesc}},initEvents:function(){parseInt(this.config.rotation);var t=Color(this.config.overColor),i=parseFloat(this.config.overAlpha),e=t.rgba(i);this.area.bind(_event._enter,function(t){this.area.css({"background-color":e})}.bind(this));this.area.bind(_event._leave,function(t){this.area.css({"background-color":""})}.bind(this));this.button.asButton();this.button.bind(_event._start,function(t){return!1});this.button.bind(_event._end,function(t){this.print();return!1}.bind(this))},print:function(){if(this.ready)try{this.printedImage.printArea()}catch(t){console.error&&console.error("Print image area failed.")}else this.print.delay(this,300)},onResize:function(t,i){t&&(this.pageWidth=t);i&&(this.pageHeight=i);this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.area.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"})}}).extend(PageItem.Item);Class("Prismatic",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.prismatic=$("<canvas width='"+this.width+"' height='"+this.height+"' id='prismatic'></canvas>");this.prismatic.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.prismatic,this.config.rotation);this.parent.append(this.prismatic);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.prismatic)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,rotation:t.location.rotation,height:t.location.height,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},draw:function(){var t=this.prismatic[0],i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;i.beginPath();i.lineCap="round";i.lineJoin="round";i.strokeStyle=Color(this.config.borderColor).toString();i.lineWidth=this.config.borderWidth;i.globalAlpha=this.config.spalpha;i.moveTo(this.config.borderWidth,this.height/2);i.lineTo(this.width/2,this.height);i.lineTo(this.width-2,this.height/2);i.lineTo(this.width/2,this.config.borderWidth);this.config.sh&&this.setShapeShadow(i);if("gradient"==this.config.fillStyle){var e=this.config.angle*Math.PI/180,t=this.width/2+this.width/2*Math.cos(e),e=this.height/2+this.height/2*Math.sin(e),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),t=i.createLinearGradient(s,o,t,e);t.addColorStop(0,this.colorA);t.addColorStop(1,this.colorB);i.fillStyle=t;i.fill()}"Pure"==this.config.fillStyle&&(i.fillStyle=this.color,i.fill());i.closePath();0!=this.config.borderWidth&&i.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.prismatic)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.prismatic[0].width=this.width;this.prismatic[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.prismatic.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.prismatic.one(t,function(){this.prismatic.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.prismatic.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Triangle",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.config.borderWidth=Number(this.config.borderWidth);this.colorA=Color(this.config.ColorA).toString();this.colorB=Color(this.config.ColorB).toString();this.config.triangleRight=parseBool(this.config.triangleRight);this.config.triangleLeft=parseBool(this.config.triangleLeft);this.borderColor=Color(this.config.borderColor).toString();this.triangle=$("<canvas width='"+this.width+"' height='"+this.height+"' id='myCanvas'></canvas>");this.triangle.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.triangle,this.config.rotation);this.parent.append(this.triangle);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.triangle)},parseConfig:function(t){return{width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,rotation:t.location.rotation,alpha:t.alpha,color:t.color,fillStyle:t.fillStyle,ColorA:t.gradientColorA,ColorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,triangleRight:t.triangleRight,triangleLeft:t.triangleLeft,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,arrowType:t.arrowType,action:t.action,animation:t.animation}},draw:function(){var t=this.triangle[0],i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);i.beginPath();i.strokeStyle=Color(this.config.borderColor).toString();i.lineWidth=this.config.borderWidth;i.globalAlpha=this.config.spalpha;i.lineCap="round";i.lineJoin="round";this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;!1==this.config.triangleRight&&!1==this.config.triangleLeft&&(i.moveTo(this.config.borderWidth,this.height),i.lineTo(this.width,this.height),i.lineTo(this.width/2,this.config.borderWidth));!0==this.config.triangleRight&&!1==this.config.triangleLeft&&(i.moveTo(this.config.borderWidth,this.config.borderWidth),i.lineTo(this.config.borderWidth,this.height),i.lineTo(this.width,this.height));!1==this.config.triangleRight&&!0==this.config.triangleLeft&&(i.moveTo(this.width,this.config.borderWidth),i.lineTo(this.width,this.height),i.lineTo(this.config.borderWidth,this.height));!0==parseBool(this.config.sh)&&this.setShapeShadow(i);if("gradient"==this.config.fillStyle){var e=this.config.angle*Math.PI/180,t=this.width/2+this.width/2*Math.cos(e),e=this.height/2+this.height/2*Math.sin(e),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),t=i.createLinearGradient(s,o,t,e);t.addColorStop(0,this.colorA);t.addColorStop(1,this.colorB);i.fillStyle=t;i.fill()}"Pure"==this.config.fillStyle&&(i.fillStyle=this.color,i.fill());i.closePath();0!=this.config.borderWidth&&i.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(1,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.triangle)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.triangle[0].width=this.width;this.triangle[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.triangle.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);global.hddr.soo1="tm";Class("AlphaTransitionBanner",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);1>this.config.images.length||(this.animateConfig(),this.initConfig(e,o),this.initHtml(),this.initCss(),this.addItem(),this.leftButton.onMouseDown(this,this.prePage),this.rightButton.onMouseDown(this,this.nextPage),this.setTitle(0),this.toolBar.hide(),this.currentImageHolder=this.image0Holder,this.currentImage=2%this.images.length,this.image0Holder.append(this.images[0]),this.image1Holder.append(this.images[1]),this.leftButton.remove(),this.rightButton.remove())},initConfig:function(t,i){if("string"==typeof this.config.images){if(""==this.config.images.trim()){this.photos=[];return}this.photos=[{url:this.config.images}]}else this.photos=Instance.copy(this.config.images);this.photos.node instanceof Array&&(this.photos=this.photos.node);this.photos instanceof Array||(this.photos=[this.photos.node]);1>this.photos.length||(this.photos instanceof Array||void 0==this.photos.node||(this.photos=void 0==this.photos.node[1]?[this.photos.node]:this.photos.node),this.imgIndex=-1,this.imgWidth=this.config.width*t,this.imgHeight=this.config.height*i,this.boxWidth=this.imgWidth-8,this.boxHeight=this.imgHeight-8,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.interval=3e3,this.duration=1e3*this.config.duration,this.oneTime=1e3*this.config.duration-250,500<this.duration-500&&(this.oneTime=this.duration-500),this.fadeTime=10,this.alpha=100,this.images=[])},initHtml:function(){this.background=$("<div class='banner_background'></div>");this.slideShowBG=new grayBackground(this.background,"#ffffff",1,this.imgWidth,this.imgHeight);this.toolBar=$("<div></div>");this.imgTitle=$("<div></div>");this.image0Holder=$("<div></div>");this.image1Holder=$("<div></div>");this.img=$("<img style='position : absolute;' />");this.leftButton=new button(this.toolBar,{buttonType:1,iconURL:uiBaseURL+"previous_down.png"});this.rightButton=new button(this.toolBar,{buttonType:1,iconURL:uiBaseURL+"next_down.png"});this.parent.append(this.background);this.background.append(this.image1Holder);this.background.append(this.image0Holder);this.background.append(this.toolBar)},initCss:function(){this.toolBar.css({width:this.boxWidth,height:"35px",position:"relative"});this.toolBar.css({"z-index":"209"});this.toolBG=new grayBackground(this.toolBar,"#000000",.4,this.boxWidth,35);this.toolBG.setZindex("210");this.toolBG.setPosition(0,0);this.imgTitle.css({overflow:"hidden",width:this.boxWidth-20+"px",height:"20px",position:"absolute","z-index":"211",background:"",left:"10px",top:"7px",color:"#ffffff"});this.toolBar.css({left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px"});this.toolBar.append(this.imgTitle);this.rightButton.setCSS({"z-index":212,right:"0px",top:"13px"});this.leftButton.setCSS({"z-index":212,right:"20px",top:"13px"});this.background.css({opacity:this.config.alpha,"z-index":"199",border:"1px solid #333333",width:this.imgWidth,height:this.imgHeight,left:this.x+"px",top:this.y+"px",position:"absolute","-webkit-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-moz-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-ms-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-o-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)"});this.setRotation(this.background,this.config.rotation);this.image0Holder.css({background:"#fff",width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute","z-index":202,opacity:"1"});this.image1Holder.css({background:"#fff",width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute","z-index":202,opacity:"1"})},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,src:t.url,action:t.action,images:t.Images,autoBool:parseBool(t.autoBool),duration:t.duration,animation:t.animation}},play:function(){this.config.autoBool&&(clearInterval(this.timer1),this.timer1=null,this.timer1=setInterval(this.transition.bind(this),this.duration))},pause:function(){this.config.autoBool&&(clearInterval(this.timer1),this.timer1=null)},transition:function(){var t=this;animateOnce(t.currentImageHolder,{opacity:"0"},this.oneTime,function(){t.currentImageHolder.empty().append(t.images[t.currentImage]);t.currentImageHolder==t.image0Holder?(t.image1Holder.css({"z-index":"208",opacity:"1"}),t.image0Holder.css({"z-index":"207",opacity:"1"}),t.currentImageHolder=t.image1Holder):(t.image0Holder.css({"z-index":"208",opacity:"1"}),t.image1Holder.css({"z-index":"207",opacity:"1"}),t.currentImageHolder=t.image0Holder);t.currentImage=(t.currentImage+1)%t.images.length})},setTransition:function(t,i,e){t.css({"-webkit-transition":i+" "+e+"s","-o-transition":i+" "+e+"s","-ms-transition":i+" "+e+"s","-moz-transition":i+" "+e+"s",transition:i+" "+e+"s"})},setTitle:function(t){t=this.photos[t].url;var i=t.lastIndexOf("/");t=t.substring(i+1);this.imgTitle.html(t)},nextPage:function(){clearInterval(this.timer0);this.timer0=null;var t=0,t=0<this.currentImage?(this.currentImage-1)%this.images.length:this.images.length-1;this.setTitle(t);this.currentImageHolder==this.image0Holder?($(this.image0Holder).css({"z-index":"207"}),$(this.image1Holder).css({"z-index":"208"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image1Holder,this.image0Holder.empty().append(this.images[this.currentImage])):($(this.image0Holder).css({"z-index":"208"}),$(this.image1Holder).css({"z-index":"207"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image0Holder,this.image1Holder.empty().append(this.images[this.currentImage]));this.currentImage=(this.currentImage+1)%this.images.length},prePage:function(){clearInterval(this.timer0);this.timer0=null;var t=0,t=2<this.currentImage?(this.currentImage-3)%this.images.length:1==this.currentImage?this.images.length-2:this.images.length-3;this.setTitle(t);this.currentImageHolder==this.image0Holder?($(this.image0Holder).css({"z-index":"207"}),$(this.image1Holder).css({"z-index":"208"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image1Holder,this.image1Holder.empty().append(this.images[t])):($(this.image0Holder).css({"z-index":"208"}),$(this.image1Holder).css({"z-index":"207"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image0Holder,this.image0Holder.empty().append(this.images[this.index]));this.currentImage=(this.currentImage-1)%this.images.length},addItem:function(){for(var t=0;t<this.photos.length;t++){var i=$("<div></div>");i.css({width:this.boxWidth+"px",height:this.boxHeight+"px"});image=$("<img style='position : absolute;' />");image.remove();var e=this.photos[t].url,e=this.fixRelativePath(e);bookConfig.useTheAliCloudChart&&(e=this.getOssUrl(e,this.boxWidth,this.boxHeight,"lfit"));image.attr("src",e);image.css({width:this.boxWidth+"px",height:this.boxHeight+"px"});i.append(image);this.images[t]=i}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.imgWidth=this.config.width*this.pageWidth;this.imgHeight=this.config.height*this.pageHeight;this.boxWidth=this.imgWidth-8;this.boxHeight=this.imgHeight-8;this.background.css({width:this.imgWidth,height:this.imgHeight});this.toolBar.css({width:this.boxWidth,height:"35px"});this.toolBG.onResize(this.boxWidth,35);this.toolBG.setPosition(0,0);this.imgTitle.css({width:this.boxWidth-20+"px",height:"20px",left:"10px",top:"7px"});this.slideShowBG.onResize(this.imgWidth,this.imgHeight);for(var e=0;e<this.images.length;e++)this.images[e].children().css({width:this.boxWidth+"px",height:this.boxHeight+"px"});this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.background.css({left:this.x+"px",top:this.y+"px",position:"absolute"});this.image0Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute"});this.image1Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute"})},changeImage:function(t){this.imgIndex=t;this.img.remove();t=this.photos[t].url;t=this.fixRelativePath(t);var e=this;this.img.attr("src",t);this.img.on("load",function(){var t=e.boxWidth,i=e.boxHeight;e.img.css({width:t+"px",height:i+"px"});e.boxWidth!=t||e.boxHeight!=i?e.image0Holder.animate({width:t+8,height:i+8,left:(e.pw-t)/2,top:(e.ph-i)/2},300,function(){e.image0Holder.append(e.img)}):(e.image0Holder.append(e.img),e.image1Holder.append(e.img))})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.background.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.background.one(t,function(){this.background.css({animation:""})}.bind(this))}},setImagePosition:function(){},show:function(){},hide:function(){}}).extend("Item");global.hddr.soa8=hddr.soa7+"i";global.hddr.sov9=function(t,i){return t+"ph"+i+"l"};Class("Carousel",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.width=Number(this.config.width)*this.pageWidth;this.height=Number(this.config.height)*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.config.duration||(this.config.duration=3);this.id="carousel"+s;this.imageItem=[];if(this.images=Instance.copy(this.config.images))this.images.node instanceof Array&&(this.images=this.images.node),this.images[0]||(this.images=[this.images.node]);if(!(1>this.config.images)){if(this.images&&this.images.length)for(t=0;t<this.images.length;t++)this.imageItem.push(this.images[t]),this.imageItem[t].url=this.fixRelativePath(this.imageItem[t].url);this.content=$("<div class='initCarousel'></div>");this.content.css({opacity:this.config.alpha,position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",border:"0px solid red"});this.setRotation(this.content,this.config.rotation);this.currentIndex=0;this.parent.append(this.content);this.initImages();this.config.showButton&&this.initButtons()}},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,images:t.Images,duration:parseInt(t.duration),autoPlay:parseBool(t.autoBool),showButton:parseBool(t.selectBtn),hasShadow:parseBool(t.shadow.hasDropShadow),shadow:t.shadow,animation:t.animation}},initImages:function(){if(void 0!=this.images&&null!=this.images&&0!=this.images.length){this.refreshImageAndPosition();this.carouselList=new CarouselImageList(this.imageItem.length);this.carouselList.setResources(this.aImages);this.carouselList.setImagesIndex(this.aImagesIndex);this.carouselList.setPositions(this.aPositions);for(var t=0;t<this.aPositions.length;t++){var i=new CarouselImage(this,this.aPositions[t]);i.setBoxIndex(t);this.carouselList.addInstance(i)}this.carouselList.loadResources();this.carouselList.blurAll()}},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="position:absolute;z-index:1000;cursor:pointer;"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="position:absolute;z-index:1000;cursor:pointer;"></img>');this.setButtonPosition();this.content.append(this.leftButton);this.content.append(this.rightButton);this.leftButton.bind(_event._down,function(){return!1});this.leftButton.bind(_event._end,function(t){this.move(1);t.stopPropagation&&t.stopPropagation();return!1}.bind(this));this.rightButton.bind(_event._down,function(){return!1});this.rightButton.bind(_event._end,function(t){this.move(-1);t.stopPropagation&&t.stopPropagation();return!1}.bind(this))},refreshImageAndPosition:function(){void 0!=this.imageItem&&null!=this.imageItem&&0!=this.imageItem.length&&(this.instanceCount=5,5>this.imageItem.length&&(this.instanceCount=Math.min(this.imageItem.length)),this.refreshImages(),this.refreshPositions())},refreshImages:function(){this.refreshImagesIndex();this.aImages=[];for(var t=0;t<this.aImagesIndex.length;t++){var i=this.imageItem[this.aImagesIndex[t]].url;bookConfig.useTheAliCloudChart&&(i=this.getOssUrl(i,this.width,this.height,"lfit"));this.aImages.push(i)}},refreshImagesIndex:function(){this.aImagesIndex=[];switch(this.instanceCount){case 1:this.aImagesIndex.push(0);break;case 2:this.aImagesIndex.push(this.currentIndex%this.imageItem.length);this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length);break;case 3:this.aImagesIndex.push((this.currentIndex-1+this.imageItem.length)%this.imageItem.length);this.aImagesIndex.push(this.currentIndex%this.imageItem.length);this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length);break;case 4:this.aImagesIndex.push((this.currentIndex-1+this.imageItem.length)%this.imageItem.length);this.aImagesIndex.push(this.currentIndex%this.imageItem.length);this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length);break;default:this.aImagesIndex.push((this.currentIndex-2+this.imageItem.length)%this.imageItem.length),this.aImagesIndex.push((this.currentIndex-1+this.imageItem.length)%this.imageItem.length),this.aImagesIndex.push(this.currentIndex%this.imageItem.length),this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length),this.aImagesIndex.push((this.currentIndex+2)%this.imageItem.length)}},refreshPositions:function(){this.aPositions=[];var t=this.width/5;switch(this.instanceCount){case 1:Math.ceil(this.width/2);this.aPositions.push(new CarouselPosition(0,0,this.width,this.height,1,1));break;case 2:var t=Math.ceil(this.width/2),i=Math.ceil(this.width/4);this.aPositions.push(new CarouselPosition(i,0,t,this.height,2,1));i=Math.ceil(t+.1*t)/.8;this.aPositions.push(new CarouselPosition(i,.1*this.height/.8,t,this.height,1,.8));break;case 3:t=Math.ceil(this.width/2);i=Math.ceil(.05*t)/.8;this.aPositions.push(new CarouselPosition(i,.1*this.height/.8,t,this.height,1,.8));i=Math.ceil(this.width/4);this.aPositions.push(new CarouselPosition(i,0,t,this.height,2,1));i=Math.ceil(t)/.8;this.aPositions.push(new CarouselPosition(i,.1*this.height/.8,t,this.height,1,.8));break;case 4:t=Math.ceil(this.width/2);i=Math.ceil(.05*t)/.8;this.aPositions.push(new CarouselPosition(i,.1*this.height/.8,t,this.height,1,.8));i=Math.ceil(this.width/4);this.aPositions.push(new CarouselPosition(i,0,t,this.height,2,1));i=Math.ceil(t)/.8;this.aPositions.push(new CarouselPosition(i,.1*this.height/.8,t,this.height,1,.8));break;default:t=this.width/3,i=Math.ceil(.2*t)/.6,this.aPositions.push(new CarouselPosition(i,.2*this.height/.6,t,this.height,1,.6)),i=Math.ceil(this.width/6+.1*t)/.8,this.aPositions.push(new CarouselPosition(i,.1*this.height/.8,t,this.height,2,.8)),this.aPositions.push(new CarouselPosition(t,0,t,this.height,3,1)),i=Math.ceil(this.width/2)/.8,this.aPositions.push(new CarouselPosition(i,.1*this.height/.8,t,this.height,2,.8)),i=Math.ceil(.66*this.width)/.6,this.aPositions.push(new CarouselPosition(i,.2*this.height/.6,t,this.height,1,.6))}},play:function(){this.config.autoPlay&&(window.clearInterval(this.timer),this.timer=null,this.timer=window.setInterval(function(){this.move(1)}.bind(this),1e3*this.config.duration))},pause:function(){this.config.autoPlay&&(window.clearInterval(this.timer),this.timer=null)},move:function(t){this.isMoving||(this.isMoving=!0,this.currentIndex+=t,this.currentIndex>=this.imageItem.length&&(this.currentIndex%=this.imageItem.length),0>this.currentIndex&&(this.currentIndex+=this.imageItem.length),this.instanceCount=this.carouselList.instanceCount(),this.refreshImages(),this.carouselList.setResources(this.aImages),this.carouselList.setImagesIndex(this.aImagesIndex),this.carouselList.move(t),function(){this.isMoving=!1}.delay(this,1e3))},moveTo:function(t){5<=this.imageItem.length?this.move(t-2):4==this.imageItem.length?this.move(t-1):this.move(t-this.currentIndex)},onResize:function(t,i){this.images&&this.images.length&&(this.pageWidth=t,this.pageHeight=i,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.content.css({width:this.width+"px",height:this.height+"px"}),this.setPosition(),this.config.showButton&&this.setButtonPosition(),this.refreshImageAndPosition(),this.carouselList.setResources(this.aImages),this.carouselList.setImagesIndex(this.aImagesIndex),this.carouselList.setPositions(this.aPositions),this.carouselList.resizeAll())},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.content.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.content.one(t,function(){this.content.css({animation:""})}.bind(this))}},setButtonPosition:function(){var t=(this.height-32)/2;this.leftButton.css({left:"0px",top:t+"px"});this.rightButton.css({right:"0px",top:t+"px"})}}).extend("Item");var CarouselImage=Class({create:function(t,i){this.parent=t;this.position=Instance.copy(i);this.instance=$('<img style="position:absolute"/>');this.parent.content.append(this.instance);this.parent.addShadow(this.instance);this.imageHeight=this.imageWidth=0;this.instance.on("load",this.onImageLoad.bind(this));this.instance.bind(_event._down,function(){return!1});this.instance.bind(_event._end,this.onClick.bind(this));this.setArea();this.setZindex(this.position.zindex)},blur:function(t){!0==t?this.instance.css({"-webkit-filter":"blur(2px)","-moz-filter":"blur(2px)","-o-filter":"blur(2px)","-ms-filter":"blur(2px)",filter:"blur(2px)"}):this.instance.css({"-webkit-filter":"blur(0px)","-moz-filter":"blur(0px)","-o-filter":"blur(0px)","-ms-filter":"blur(0px)",filter:"blur(0px)"})},setSrc:function(t){this.instance[0].src=t},getSrc:function(){return this.instance[0].src},setIndex:function(t){this.imageIndex=t},setBoxIndex:function(t){this.boxIndex=t},onImageLoad:function(){var t=this.instance[0];this.imageWidth=t.naturalWidth;this.imageHeight=t.naturalHeight;this.resetPosition();this.setArea(this.position)},onClick:function(){4>this.parent.imageItem.length?this.parent.moveTo(this.imageIndex):this.parent.moveTo(this.boxIndex);return!1},resetPosition:function(){if(0!=this.imageWidth&&0!=this.imageHeight){var t=Math.ceil(this.imageHeight*this.position.width/this.imageWidth);t>this.position.height?(t=Math.ceil(this.position.height*this.imageWidth/this.imageHeight),this.position.width=t):(this.position.height=t,this.position.top=(this.parent.height-t)/2/this.position.scale)}},setArea:function(){this.instance.css({width:this.position.width+"px",height:this.position.height+"px"}).css(this.transformCSS({scale:this.position.scale,tran:{x:this.position.left,y:this.position.top}}))},setZindex:function(t){this.instance.css({"z-index":t})},gotoPosition:function(t){this.position=Instance.copy(t);this.setZindex(this.position.zindex);animateOnce(this.instance,this.transformCSS({tran:{x:this.position.left,y:this.position.top}}),.5)},resizeCss:function(t){this.position=Instance.copy(t);this.setZindex(this.position.zindex);this.instance.css(this.transformCSS({tran:{x:this.position.left,y:this.position.top}}))},transformCSS:function(t){var i="",e={};void 0!=t.scale&&($.browser.msie||(i=i+"scale3d("+t.scale+","+t.scale+",1) "),$.browser.msie&&(i=i+"scale("+t.scale+") "));void 0!=t.rotate&&(i=i+"rotate("+t.rotate+"deg) ");void 0!=t.rotateY&&(i=i+"rotateY("+t.rotateY+"deg) ");t.tran&&($.browser.msie&&(i=i+"translate("+t.tran.x+"px,"+t.tran.y+"px) "),$.browser.msie||(i=i+"translate3d("+t.tran.x+"px,"+t.tran.y+"px,0px) "));void 0!=t.perspective&&(i=i+"perspective("+t.perspective+"px) ");void 0!=t.scaleX&&(i=i+"scaleX("+t.scaleX+") ");void 0!=t.scaleY&&(i=i+"scaleY("+t.scaleY+") ");if(t.origin){var o=t.origin.x+"% "+t.origin.y+"%";e["-webkit-transform-origin"]=o;e["-moz-transform-origin"]=o;e["-ms-transform-origin"]=o;e["-o-transform-origin"]=o;e["transform-origin"]=o}i&&(e["-webkit-transform"]=i,e["-moz-transform"]=i,e["-ms-transform"]=i,e["-o-transform"]=i,e.transform=i);t.obj&&t.obj.css(e);return e}}),CarouselPosition=Class({create:function(t,i,e,o,s,n){this.left=Math.ceil(t);this.top=Math.ceil(i);this.width=Math.ceil(e);this.height=Math.ceil(o);this.scale=parseFloat(n);this.zindex=s},asString:function(){return"transform:scale("+this.scale+") translate("+this.left+"px,"+this.top+"px),width:"+this.width+",height:"+this.height+",z-index:"+this.zindex}}),CarouselImageList=Class({create:function(t){this.imgLength=t;this.imageInstances=[]},setResources:function(t){this.imageResources=[];for(var i=0;i<t.length;i++)this.imageResources.push(t[i])},setImagesIndex:function(t){this.imagesIndex=[];for(var i=0;i<t.length;i++)this.imagesIndex.push(t[i])},setPositions:function(t){this.imagePositions=[];for(var i=0;i<t.length;i++)this.imagePositions.push(t[i])},addInstance:function(t){this.imageInstances.push(t)},instanceCount:function(){return this.imageInstances.length},loadResources:function(){for(var t=this.imageInstances.length,i=0;i<t;i++){var e=this.imageInstances[i];e.getSrc()!=this.imageResources[i]&&(e.setSrc(this.imageResources[i]),e.setIndex(this.imagesIndex[i]))}},move:function(t){var i=this.imageInstances.length;if(0!=i){for(var e=[],o=0;o<i;o++)e[o]=this.imageInstances[o];for(o=0;o<i;o++){var s=o+t;0>s&&(s+=i);s>=i&&(s%=i);this.imageInstances[o]=e[s]}for(o=0;o<i;o++)t=this.imageInstances[o],t.setBoxIndex(o),t.gotoPosition(this.imagePositions[o]);this.loadResources();this.blurAll()}},resizeAll:function(){var t=this.imageInstances.length;if(0!=t)for(var i=0;i<t;i++){var e=this.imageInstances[i];e.resizeCss(this.imagePositions[i]);e.resetPosition();e.setArea()}},blurAll:function(){for(var t=this.imageInstances.length,i=Math.floor((t+1)/2)-1,e=0;e<t;e++){var o=this.imageInstances[e];e!=i?o.blur(!0):o.blur(!1)}}});global.hddr.sob8=hddr.soa8;global.hddr.soq2=hddr.sov9(hddr.soa8,hddr.soq3)+"5";Class("DynamicShow",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.childWidth=Math.ceil(this.width/4);this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.borderWidth=this.config.borderWidth;this.id="dynshow"+s;this.images=Instance.copy(this.config.images);this.imageItem=[];this.images||(this.images=[]);this.images[0]||(this.images=[this.images.Image]);if(this.images&&this.images.length)for(t=0;t<this.images.length;t++)"[object Object]"===Object.prototype.toString.call(this.images[t])?this.imageItem.push(this.images[t].value):this.imageItem.push(this.images[t]),this.imageItem[t]=this.fixRelativePath(this.imageItem[t]),bookConfig.useTheAliCloudChart&&(this.imageItem[t]=this.getOssUrl(this.imageItem[t],this.width,this.height,"lfit"));this.maxZindex=this.images.length+1;this.content=$("<div id='DynamicShow'></div>");this.content.css({opacity:this.config.alpha,position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",border:"0px solid red"});this.setRotation(this.content,this.config.rotation);this.currentIndex=0;this.parent.append(this.content);this.init()},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,images:t.Images,borderWidth:t.borderWidth,animation:t.animation}},init:function(){this.imageInstances=[];if(0!=this.imageItem.length){for(var t=0;t<this.imageItem.length;t++){var i=new ImageInstance(this,t);i.setImage(this.imageItem[t]);this.content.append(i);this.imageInstances.push(i)}this.currentIndex=-1;this.initButtons()}},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.setButtonPosition();this.leftButton.bind(_event._click,function(){this.preImage()}.bind(this));this.rightButton.bind(_event._click,function(){this.nextImage()}.bind(this));this.leftButton.css({display:"none"});this.rightButton.css({display:"none"});this.content.append(this.leftButton);this.content.append(this.rightButton);isPhone()||isPad()||(this.content.bind(_event._enter,function(){this.leftButton.css({display:"block"});this.rightButton.css({display:"block"})}.bind(this)),this.content.bind(_event._leave,function(){this.leftButton.css({display:"none"});this.rightButton.css({display:"none"})}.bind(this)))},preImage:function(){-1!=this.currentIndex&&this.imageInstances[this.currentIndex].hide();this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length;this.imageInstances[this.currentIndex].show()},nextImage:function(){-1!=this.currentIndex&&this.imageInstances[this.currentIndex].hide();this.currentIndex=(this.currentIndex+1)%this.images.length;this.imageInstances[this.currentIndex].show()},showImage:function(t){-1!=t&&(-1!=this.currentIndex&&this.imageInstances[this.currentIndex].hide(),this.currentIndex=t,this.imageInstances[this.currentIndex].show())},refreshZindex:function(){for(var t=this.imageInstances[this.currentIndex].zIndex,i=0;i<this.images.length;i++)if(i!=this.currentIndex){var e=this.imageInstances[i].zIndex;e>t&&(e--,this.imageInstances[i].setZindex(e))}this.imageInstances[this.currentIndex].setZindex(this.images.length-1)},setButtonPosition:function(){var t=(this.height-32)/2;this.leftButton.css({left:"0px",top:t+"px"});this.rightButton.css({right:"0px",top:t+"px"})},onResize:function(t,i){var e=t/this.pageWidth;this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.setButtonPosition();this.childWidth=Math.ceil(this.width/4);for(var o=0;o<this.imageInstances.length;o++)this.imageInstances[o].onResize(e)},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.content.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.content.one(t,function(){this.content.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");var ImageInstance=Class({create:function(t,i){this.parent=t;this.zIndex=this.index=i;this.imageHeight=this.imageWidth=0;this.borderWidth=Math.ceil(this.parent.borderWidth/2);this.height=this.width=this.parent.width-2*this.borderWidth;this.maxLeft=this.parent.width-this.width;this.maxTop=this.parent.height-this.height;this.randomPos=randomPosition(this.parent.width/2,this.parent.height/2);this.rotation=this.randomPos.rotation;this.animate=[];this.instance=$("<img></img>");this.instance.css({position:"absolute",display:"none"});this.setTransform(this.instance,this.randomPos);this.setBorderWidth(this.borderWidth);this.initShadow();this.initEvents();t.content.append(this.instance)},initShadow:function(){this.instance.css({"-moz-box-shadow":"2px 2px 4px #252525","box-shadow":"2px 2px 4px #252525","-webkit-box-shadow":"2px 2px 4px #252525","-ms-box-shadow":"2px 2px 4px #252525","-o-box-shadow":"2px 2px 4px #252525"})},initEvents:function(){this.instance.on("load",function(){this.onImageLoad()}.bind(this));this.instance.bind(_event._click,function(){this.parent.currentIndex==this.index?(this.hide(),this.parent.currentIndex=-1):this.parent.showImage(this.index)}.bind(this))},onImageLoad:function(){var t=this.instance[0];this.imageWidth=t.naturalWidth;this.imageHeight=t.naturalHeight;this.getImgConfig();this.height=Math.ceil(this.imageHeight*this.width/this.imageWidth);this.maxTop=this.parent.height-this.height;this.instance.css({width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px",display:"block"})},setImage:function(t){this.instance.attr("src",t)},onResize:function(t){this.instance.css("z-Index")!=this.parent.maxZindex&&(this.randomPos.left*=t,this.randomPos.top*=t,this.setTransform(this.instance,this.randomPos));this.getImgConfig();this.resize()},resize:function(){this.instance.css({width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px"})},setTransform:function(t,i){t.css({"-webkit-transform":"rotate("+i.rotation+"deg) scale("+i.scale+") translate("+i.left+"px,"+i.top+"px)","-ms-transform":"rotate("+i.rotation+"deg) scale("+i.scale+") translate("+i.left+"px,"+i.top+"px)","-moz-transform":"rotate("+i.rotation+"deg) scale("+i.scale+") translate("+i.left+"px,"+i.top+"px)","-o-transform":"rotate("+i.rotation+"deg) scale("+i.scale+") translate("+i.left+"px,"+i.top+"px)",transform:"rotate("+i.rotation+"deg) scale("+i.scale+") translate("+i.left+"px,"+i.top+"px)"})},getTransform:function(t){return{"-webkit-transform":"rotate("+t.rotation+"deg) scale("+t.scale+") translate("+t.left+"px,"+t.top+"px)","-ms-transform":"rotate("+t.rotation+"deg) scale("+t.scale+") translate("+t.left+"px,"+t.top+"px)","-moz-transform":"rotate("+t.rotation+"deg) scale("+t.scale+") translate("+t.left+"px,"+t.top+"px)","-o-transform":"rotate("+t.rotation+"deg) scale("+t.scale+") translate("+t.left+"px,"+t.top+"px)",transform:"rotate("+t.rotation+"deg) scale("+t.scale+") translate("+t.left+"px,"+t.top+"px)"}},move:function(){this.instance.css({left:this.left+"px",top:this.top+"px"})},setZindex:function(t){this.zIndex=t;this.instance.css({"z-index":t})},setBorderWidth:function(t){this.instance.css({border:t+"px solid white"})},getImgConfig:function(){this.imageWidth/this.imageHeight>this.parent.width/this.parent.height?(this.width=this.parent.width-2*this.borderWidth,this.height=this.width*this.imageHeight/this.imageWidth,this.left=0,this.top=(this.parent.height-this.height-2*this.borderWidth)/2):(this.height=this.parent.height-2*this.borderWidth,this.width=this.height*this.imageWidth/this.imageHeight,this.left=(this.parent.width-this.width-2*this.borderWidth)/2,this.top=0)},show:function(){0!=this.imageWidth&&0!=this.imageHeight&&(this.instance.css({"z-index":this.parent.maxZindex}),animateOnce(this.instance,this.getTransform({left:"0",top:"0",rotation:"0",scale:"1"}),500))},hide:function(){0!=this.imageWidth&&0!=this.imageHeight&&(this.randomPos=randomPosition(this.parent.width/2,this.parent.height/2),this.parent.refreshZindex(),animateOnce(this.instance,this.getTransform(this.randomPos),500))}});function randomPosition(t,i){var e=Math.floor(Math.random()*t);.5>=Math.random()&&(e=-e);var o=Math.floor(Math.random()*i);.5>=Math.random()&&(o=-o);var s=75-Math.floor(150*Math.random());return{left:e,top:o,scale:.25,rotation:s}}Class("FocusJump",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.id="flip_jump_"+s;this.translate=0;this.animateConfig();this.width=this.config.width*e;this.height=this.config.height*o;this.margin=Math.floor(5*this.width/100);this.initContent();this.initImages();this.initButtons();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.content);this.onResize(e,o)},initContent:function(){this.content=$("<div id='"+this.id+"'></div>");this.content.css({opacity:this.config.alpha,overflow:"hidden",position:"absolute","z-index":"1"});this.setRotation(this.content,this.config.rotation);this.imagesContent=$("<div></div>");this.imagesContent.css({position:"absolute",left:"0px",top:"0px",height:"100%"}).css(transformCSS({tran:{x:0,y:0}}));this.parent.append(this.content);this.content.append(this.imagesContent);this.initBackground()},initBackground:function(){if(this.config.addBackground){var t=Color(this.config.backgroundColor);this.content.css({"background-color":t.rgba(this.config.backgroundAlpha)})}this.config.addBorder&&(t=Color(this.config.borderColor),this.content.css({border:this.config.borderWidth+"px solid "+t.rgba(this.config.borderAlpha)}))},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="cursor:pointer;position:absolute;z-index:1000;left:0px;top:0px;bottom:0px;margin:auto"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="cursor:pointer;position:absolute;z-index:1000;right:0px;top:0px;bottom:0px;margin:auto"></img>');isPhone()||isPad()||(this.leftButton.css({display:"none"}),this.rightButton.css({display:"none"}));this.content.append(this.leftButton);this.content.append(this.rightButton)},initImages:function(){this.$images=[];this.images=this.config.images;if(""!=this.images){if(!(this.images instanceof Array)){if(""==this.images)return;this.images.node&&(this.images=[this.images.node])}for(var i=this,t=0;t<this.images.length;t++){var e=this.images[t].url,o=this.images[t].title,s=this.images[t].link,e=this.fixRelativePath(e);bookConfig.useTheAliCloudChart&&(e=this.getOssUrl(e,this.getImageWidth(),this.height/2,"lfit"));var n=$("<div style='position:absolute;'></div>"),o=$("<span class='text' style='font-weight:bold;color:rgba(255,0,0,0.5);position:absolute;overflow:auto;'>"+o+"</span>"),h=$("<img style='position:absolute;display:none;top:0px'></img>");n.append(h).append(o);s&&function(t,i){n.bind(_event._click,function(){window.open(i)})}(this,s);h.on("load",function(){var t=$(this);i.resizeImage(t,t.parent(),t.next());t.css({display:"block"}).css(transformCSS({tran:{x:0,y:0}}))});h.attr("src",e);this.imagesContent.append(n);this.$images.push(n)}}},resizeImage:function(t,i,e){if(t[0].naturalWidth&&t[0].naturalHeight){var o=this.getImageWidth(),s=Math.floor(o/t[0].naturalWidth*t[0].naturalHeight);t.css({width:o+"px",height:s+"px"});i.css({width:o+"px",height:s+"px"});e.css({top:s+"px"});this.imagesContent.css({height:s+"px",top:(this.height-s)/2+"px"})}},getImageWidth:function(){return Math.floor((this.width-3*this.margin)/3)},parseConfig:function(t){return{width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,alpha:t.alpha,rotation:t.location.rotation,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,images:t.componentData.Images,addBackground:parseBool(t.componentData.addBack),addBorder:parseBool(t.componentData.addBorder),backgroundColor:t.componentData.backColor,backgroundAlpha:t.componentData.backAlpha,borderColor:t.componentData.borderColor,borderAlpha:t.componentData.borderAlpha,borderWidth:t.componentData.borderWidth,animation:t.animation}},initEvents:function(){this.content.bind(_event._enter,function(){3>=this.images.length||(this.leftButton.css({display:"block"}),this.rightButton.css({display:"block"}))}.bind(this));this.content.bind(_event._leave,function(){this.leftButton.css({display:"none"});this.rightButton.css({display:"none"})}.bind(this));this.leftButton.bind(_event._click,function(t){this.moveLeft();t.stopPropagation&&t.stopPropagation();return!1}.bind(this));this.rightButton.bind(_event._click,function(t){this.moveRight();t.stopPropagation&&t.stopPropagation();return!1}.bind(this));for(var t=this,i=0;i<this.$images.length;i++){var e=this.$images[i];isPhone()||isPad()?(e.bind(_event._down,function(){t.moveImageUp($(this))}),e.bind(_event._end,function(){t.moveImageDown($(this))})):(e.bind(_event._enter,function(){t.moveImageUp($(this))}),e.bind(_event._leave,function(){t.moveImageDown($(this))}))}},moveLeft:function(){this.translate+=this.getImageWidth();0<this.translate&&(this.translate=0);animateOnce(this.imagesContent,transformCSS({tran:{x:this.translate,y:0}}),1e3)},moveRight:function(){this.translate-=this.getImageWidth();var t=this.width-this.imagesContent.width();this.translate<t&&(this.translate=t);animateOnce(this.imagesContent,transformCSS({tran:{x:this.translate,y:0}}),1e3)},moveImageUp:function(t){animateOnce(t,transformCSS({tran:{x:0,y:-Math.floor(this.height/4)}}),800)},moveImageDown:function(t){animateOnce(t,transformCSS({tran:{x:0,y:0}}),800)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.margin=Math.floor(5*this.width/100);this.content.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"});this.resizeImages()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.content.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.content.one(t,function(){this.content.css({animation:""})}.bind(this))}},resizeImages:function(){var t=this.getImageWidth();this.imagesContent.css({width:this.margin+(this.margin+t)*this.$images.length+"px"});if(1==this.$images.length){var i=this.$images[0],e=this.margin+t;i.css({left:e+"px"});this.resizeImage(i.find("img"),i,i.find("text"))}else for(var o=0;o<this.$images.length;o++)i=this.$images[o],e=this.margin+(this.margin+t)*o,i.css({left:e+"px"}),this.resizeImage(i.find("img"),i,i.find("span"))}}).extend("Item");Class("FlipJump",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="jump"+s;this.itemHeight=Math.floor(.5*this.height);this.itemWidth=Math.floor(.5*this.width);this.images=this.config.images;this.images[0]||(this.images=[this.images.Image]);this.Items=[];this.imageCount=this.images.length;if(this.images&&this.images instanceof Array)for(t=0;t<this.images.length;t++)"[object Object]"===Object.prototype.toString.call(this.images[t])?this.Items.push(this.images[t].value):this.Items.push(this.images[t]),this.Items[t]=this.fixRelativePath(this.Items[t]),bookConfig.useTheAliCloudChart&&(this.Items[t]=this.getOssUrl(this.Items[t],this.itemWidth,this.itemHeight,"lfit"));this.minZindex=0;this.maxZindex=this.images.length+1;this.content=$("<div></div>");this.content.css({opacity:this.config.alpha,position:"absolute",overflow:"hidden",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px","z-index":"1"});this.setRotation(this.content,this.config.rotation);this.initBackground();this.parent.append(this.content);this.init()},initBackground:function(){if(this.config.addBackground){var t=Color(this.config.backgroundColor);this.content.css({"background-color":t.rgba(this.config.backgroundAlpha)})}this.config.addBorder&&(t=Color(this.config.borderColor),this.content.css({border:"1px solid "+t.rgba(this.config.borderAlpha)}))},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,images:t.Images,addBackground:parseBool(t.addBack),addBorder:parseBool(t.addBorder),backgroundColor:t.backgroundColor,backgroundAlpha:t.backgroundColorAlpha,borderColor:t.backgroundBorderColor,animation:t.animation}},init:function(){this.busy=!1;this.imageItems=[];for(var t=0;t<this.Items.length;t++){var i=new FlipJumpItem(this,0==t?!1:!0);i.setImage(this.Items[t]);this.imageItems.push(i)}this.resetZindex();this.resetJumpEvent();1<=this.imageCount&&this.initButtons()},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.setButtonPosition();var t=this;this.leftButton.bind(_event._click,function(t){this.preImage();t.stopPropagation&&t.stopPropagation();return!1}.bind(this));this.rightButton.bind(_event._click,function(t){this.nextImage();t.stopPropagation&&t.stopPropagation();return!1}.bind(this));this.leftButton.css({display:"none"});this.rightButton.css({display:"none"});this.content.append(this.leftButton);this.content.append(this.rightButton);isPhone()||isPad()||(this.content.bind(_event._enter,function(){t.leftButton.css({display:"block"});t.rightButton.css({display:"block"})}),this.content.bind(_event._leave,function(){t.leftButton.css({display:"none"});t.rightButton.css({display:"none"})}))},preImage:function(){if(!0!=this.busy){this.busy=!0;var t=this.imageItems[0],i=this.imageItems[this.imageCount-1],e=this;i.jumpUp(function(){t.jumpDown();i.setZindex(e.maxZindex);i.toNormal(function(){e.imageItems.pop();e.imageItems.unshift(i);e.resetZindex();e.busy=!1})})}},nextImage:function(){if(!0!=this.busy){this.busy=!0;var t=this.imageItems[0],i=this.imageItems[1],e=this;1==this.imageItems.length&&(i=t);t.jumpUp(function(){t.setZindex(e.minZindex);i.toNormal();t.jumpDown(function(){e.imageItems.shift();e.imageItems.push(t);e.resetZindex();e.busy=!1})})}},resetZindex:function(){for(var t=0;t<this.imageItems.length;t++)this.imageItems[t].setZindex(this.imageItems.length-t)},resetJumpEvent:function(){for(var t=0;t<this.imageItems.length;t++)this.imageItems[t].instance.bind(_event._click,function(){this.nextImage()}.bind(this))},setButtonPosition:function(){var t=(this.height-32)/2;this.leftButton.css({left:"0px",top:t+"px"});this.rightButton.css({right:"0px",top:t+"px"})},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.setButtonPosition();this.itemHeight=Math.floor(.5*this.height);this.itemWidth=Math.floor(.5*this.width);for(var e=0;e<this.imageItems.length;e++)this.imageItems[e].resize(this.itemWidth,this.itemHeight)},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.content.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.content.one(t,function(){this.content.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");var FlipJumpItem=Class({create:function(t,i){this.parent=t;this.initRotate=i;this.rotation=0;this.width=t.itemWidth;this.height=t.itemHeight;this.imageHeight=this.imageWidth=0;this.instance=$("<img></img>");this.instance.css({position:"absolute",left:"0px",top:"0px",width:this.width+"px",height:this.height+"px",border:"2px solid white",display:"none"});this.instance.on("load",function(){this.onImageLoad()}.bind(this));this.initShadow();t.content.append(this.instance)},initShadow:function(){this.instance.css({"-moz-box-shadow":"2px 2px 4px #252525","box-shadow":"2px 2px 4px #252525","-webkit-box-shadow":"2px 2px 4px #252525","-ms-box-shadow":"2px 2px 4px #252525","-o-box-shadow":"2px 2px 4px #252525"})},getRandomRotation:function(){return 80-Math.ceil(160*Math.random())},onImageLoad:function(){var t=this.instance[0];this.naturalWidth=t.naturalWidth;this.naturalHeight=t.naturalHeight;this.width=this.parent.itemWidth;this.height=this.parent.itemHeight;this.setImageSize();this.instance.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px",display:"block"});!0==this.initRotate&&(t=this.getRandomRotation(),this.instance.css(transformCSS({rotate:t,tran:{x:0,y:0}})),this.rotation=t)},setImageSize:function(){var t=this.naturalWidth/this.naturalHeight,i=this.width/this.height;t>i?this.naturalWidth>=this.width&&(this.width=this.width,this.height=this.width/t):t<i?this.naturalHeight>=this.height&&(this.height=this.height,this.width=t*this.height):(this.height=this.naturalHeight,this.width=this.naturalWidth);this.left=Math.ceil((this.parent.width-this.width)/2);this.top=Math.ceil((this.parent.height-this.height)/2)},setImage:function(t){this.instance.attr("src",t)},setZindex:function(t){this.instance.css({"z-index":t})},randomRotate:function(t){var i=this.getRandomRotation();this.rotateTo(i,t)},rotateTo:function(i,t){var e=this.rotation,o=20;void 0!=t&&(o=t);var s=this,n=0,h=window.setInterval(function(){var t=$.easing.swing(null,n,e,i-e,o);s.instance.rotate(t);s.rotation=t;n++>=o&&window.clearInterval(h)},20)},jumpUp:function(t){animateOnce(this.instance,transformCSS({rotate:this.getRandomRotation(),tran:{x:0,y:Math.floor(-this.parent.height)}}),500,t)},jumpDown:function(t){animateOnce(this.instance,transformCSS({rotate:this.getRandomRotation(),tran:{x:0,y:0}}),400,t)},toNormal:function(t){animateOnce(this.instance,transformCSS({rotate:"0",tran:{x:0,y:0}}),400,t)},resize:function(t,i){if(0!=this.imageWith||0!=this.imageHeight)this.width=t,this.height=i,this.setImageSize(),this.instance.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"})}});Class("Rotate3D",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="3d"+s;if(""!=this.config.images&&(t=this.config.images,t||(this.images=[]),this.Item=[],t instanceof Array||(t.node&&(t=[this.config.images.node]),t.Image&&(t=[this.config.images.Image])),this.imageCount=t.length,0!=this.imageCount)){this.topZindex=this.imageCount;if(t&&t.length)for(i=0;i<t.length;i++){if("[object Object]"===Object.prototype.toString.call(t[i]))if(t[i].originalURL)this.Item.push(t[i].originalURL);else if(t[i].value)this.Item.push(t[i].value);else if(t[i].image)this.Item.push(t[i].image);else return;else this.Item.push(t[i]);this.Item[i]=this.fixRelativePath(this.Item[i]);bookConfig.useTheAliCloudChart&&(this.Item[i]=this.getOssUrl(this.Item[i],parseInt(.8*this.width),this.height,"fixed"))}t=!0==this.config.addBorder?1:0;this.content=$("<div></div>");this.content.css({opacity:this.config.alpha,position:"absolute",overflow:"hidden",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",border:t+"px solid "+Color(this.config.borderColor).toString()});this.setRotation(this.content,this.config.rotation);!0==this.config.addBackground&&this.content.css({background:Color(this.config.backgroundColor).rgba(this.config.backgroundAlpha)});this.parent.append(this.content);this.init();this.rotateTimer=-1;this.step=0}},parseConfig:function(t){return{width:t.location.width,height:t.location.height,x:t.location.x,y:t.location.y,rotation:t.location.rotation,alpha:t.alpha,images:t.componentData.Images,addBackground:parseBool(t.componentData.addBack),addBorder:parseBool(t.componentData.addBorder),backgroundColor:t.componentData.backColor,backgroundAlpha:t.componentData.backAlpha,borderColor:t.componentData.borderColor,sh:parseBool(t.shadow.hasDropShadow),sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,animation:t.animation}},init:function(){this.imageItems=[];for(var t=0;t<this.Item.length;t++){var i=new Rotate3DItem(this,t);i.setImage(this.Item[t]);this.imageItems.push(i)}this.imageItems[0].show();this.currentIndex=0;1<this.Item.length&&this.initButtons()},getOssUrl:function(t,i,e,o){return t=0<t.lastIndexOf("?")?t+("&x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e)):t+("?x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e))},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.setButtonPosition();var t=this;this.leftButton.bind(_event._down,this.preImage.bind(this));this.rightButton.bind(_event._down,this.nextImage.bind(this));this.leftButton.bind(_event._end,this.stopRotate.bind(this));this.rightButton.bind(_event._end,this.stopRotate.bind(this));this.leftButton.bind(_event._leave,this.stopRotate.bind(this));this.rightButton.bind(_event._leave,this.stopRotate.bind(this));isTouchDevice()||(this.leftButton.css({display:"none"}),this.rightButton.css({display:"none"}));this.content.append(this.leftButton);this.content.append(this.rightButton);this.content.bind(_event._enter,function(){t.leftButton.css({display:"block"});t.rightButton.css({display:"block"})});this.content.bind(_event._leave,function(){t.leftButton.css({display:"none"});t.rightButton.css({display:"none"})})},setButtonPosition:function(){if(!(1>=this.Item.length)){var t=(this.height-32)/2;this.leftButton.css({left:"0px",top:t+"px"});this.rightButton.css({right:"0px",top:t+"px"})}},onResize:function(t,i){if(""!=this.config.images&&this.content){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.setButtonPosition();for(var e=0;e<this.imageItems.length;e++)bookConfig.useTheAliCloudChart?this.imageItems[e].resizeOss():this.imageItems[e].resize();this.imageItems[this.currentIndex].show()}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})},preImage:function(){this.step=-1;this.doRotate();this.rotateTimeOut()},nextImage:function(){this.step=1;this.doRotate();this.rotateTimeOut()},rotateTimeOut:function(){this.outTimer&&(window.clearTimeout(this.outTimer),this.outTimer=null);this.outTimer=window.setTimeout(function(){this.startRotate()}.bind(this),600)},startRotate:function(){var t=this;this.doRotate();window.clearInterval(this.rotateTimer);this.rotateTimer=window.setInterval(function(){t.doRotate()},150)},doRotate:function(){var t=this.currentIndex;this.currentIndex+=this.step;0>this.currentIndex&&(this.currentIndex+=this.imageCount);this.currentIndex>=this.imageCount&&(this.currentIndex%=this.imageCount);this.imageItems[t].hide();this.imageItems[this.currentIndex].show()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.content.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.content.one(t,function(){this.content.css({animation:""})}.bind(this))}},stopRotate:function(){window.clearInterval(this.rotateTimer);this.step=0;this.rotateTimer=-1}}).extend("Item");var Rotate3DItem=Class({create:function(t,i){var e=this;this.parent=t;this.zIndex=i;this.height=this.parent.height;this.width=this.parent.width;this.imageHeight=this.imageWidth=0;this.instance=$("<img></img>");this.instance.css({position:"absolute",left:"0px",top:"0px",display:"none"});this.setZindex(i);this.initShadow();if(!bookConfig.useTheAliCloudChart)this.instance.on("load",function(){Rotate3DItem.prototype.onImageLoad.apply(e,arguments)});t.content.append(this.instance)},initShadow:function(){var t=this.parent.config;this.shadowColor=Color(t.sr).toString();!0==t.sh&&this.instance.css({"box-shadow":t.sx+"px "+t.sy+"px "+t.se+"px "+this.shadowColor,"-moz-box-shadow":t.sx+"px "+t.sy+"px "+t.se+"px "+this.shadowColor,"-webkit-box-shadow":t.sx+"px "+t.sy+"px "+t.se+"px "+this.shadowColor,"-ms-box-shadow":t.sx+"px "+t.sy+"px "+t.se+"px "+this.shadowColor,"-o-box-shadow":t.sx+"px "+t.sy+"px "+t.se+"px "+this.shadowColor})},onImageLoad:function(){var t=this.instance[0];this.imageWidth=t.naturalWidth;this.imageHeight=t.naturalHeight;this.height=Math.floor(this.parent.height);this.width=Math.ceil(.8*this.parent.width);this.left=Math.ceil(.1*this.parent.width);this.top=0;this.instance.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"})},setImage:function(t){this.instance.attr("src",t)},setZindex:function(t){this.instance.css({"z-index":t})},show:function(){this.instance.css({display:"block"});this.setZindex(this.parent.topZindex)},hide:function(){this.instance.css({display:"none"});this.setZindex(this.zIndex)},resizeOss:function(){this.left=Math.ceil(.1*this.parent.width);this.top=0;this.height=Math.floor(this.parent.height);this.width=Math.ceil(.8*this.parent.width);this.instance.css({width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px"})},resize:function(){if(0!=this.imageWidth||0!=this.imageHeight)this.height=Math.floor(this.parent.height),this.width=Math.ceil(.8*this.parent.width),this.left=Math.ceil(.1*this.parent.width),this.top=0,this.instance.css({left:this.left,top:this.top,width:this.width,height:this.height})}});Class("EmbeddedSlideshow",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();i=Instance.copy(this.config.images);this.photoItem=[];if(i.Image){"string"==typeof i.Image&&this.photoItem.push(i.Image);if(i.Image instanceof Array)for(t=0;t<i.Image.length;t++)this.photoItem.push(i.Image[t].Image);i.Image instanceof Object&&this.photoItem.push(i.Image.value)}else for(t=0;t<i.length;t++)i[t].value?this.photoItem.push(i[t].value):this.photoItem.push(i[t]);i=this.photoItem.length;for(t=0;t<i;t++)this.photoItem[t]=this.fixRelativePath(this.photoItem[t]);if(4>i)for(t=i;4>t;t++)this.photoItem[t]=this.photoItem[0];2==i&&(this.photoItem[2]=this.photoItem[0],this.photoItem[3]=this.photoItem[1]);this.showIndex=this.index=0;this.nextIndex=1;this.imgWidth=this.config.width*this.pageWidth;this.imgHeight=this.config.height*this.pageHeight;this.boxWidth=this.imgWidth-8;this.boxHeight=this.imgHeight-8;this.btnSize=18>=.2*this.boxHeight?18:.2*this.boxHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.alpha=0;this.nextAlpha=100;this.images=[];this.runArr=[];this.background=$("<div></div>");this.background.css({opacity:this.config.alpha,"z-index":"199",width:this.imgWidth,height:this.imgHeight,left:this.x+"px",top:this.y+"px",position:"absolute",overflow:"hidden"});this.setRotation(this.background,this.config.rotation);this.runBox1=$("<div class='type3'></div>");this.runBox2=$("<div class='type3'></div>");this.leftBtn=$("<img src='"+uiBaseURL+"pre_image.png' />");this.rightBtn=$("<img src='"+uiBaseURL+"next_image.png' />");this.leftBtn.css({display:"none","z-index":"1000",cursor:"pointer",position:"absolute",width:this.btnSize+"px",height:this.btnSize+"px",left:"0",top:(this.imgHeight-this.btnSize)/2+"px"});this.rightBtn.css({display:"none","z-index":"1000",cursor:"pointer",position:"absolute",width:this.btnSize+"px",height:this.btnSize+"px",right:"0",top:(this.imgHeight-this.btnSize)/2+"px"});this.config.selectBtn&&(this.leftBtn.css({display:"block"}),this.rightBtn.css({display:"block"}));this.addItem();this.background.append(this.leftBtn).append(this.rightBtn).append(this.runBox1).append(this.runBox2);this.parent.append(this.background);this.runBox1.append(this.images[this.showIndex]);this.runBox2.append(this.images[this.nextIndex].css({opacity:"0"}));this.runArr.push(this.runBox2);this.runArr.push(this.runBox1);this.initRunConfig();this.images[this.showIndex].css(this.tranCss(this.pos1.x,this.pos1.y));this.initCss();this.initBtnEvent()},initCss:function(){this.runBox1.css({"mask-size":this.boxWidth+"px "+this.boxHeight+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+"px"});this.runBox2.css({"mask-size":this.boxWidth+"px "+this.boxHeight+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+"px"})},initRunConfig:function(){switch(this.index){case 0:this.pos1={x:this.imgWidth/4,y:this.imgHeight/4,endX:0,endY:0};this.pos2={x:0,y:this.imgHeight/2,endX:this.imgWidth/4,endY:this.imgHeight/4};break;case 1:this.pos1={x:this.imgWidth/4,y:this.imgHeight/4,endX:this.imgWidth/2,endY:0};this.pos2={x:this.imgWidth/2,y:0,endX:this.imgWidth/4,endY:this.imgHeight/4};break;case 2:this.pos1={x:this.imgWidth/4,y:this.imgHeight/4,endX:0,endY:this.imgHeight/2};this.pos2={x:0,y:0,endX:this.imgWidth/4,endY:this.imgHeight/4};break;case 3:this.pos1={x:this.imgWidth/4,y:this.imgHeight/4,endX:this.imgWidth/2,endY:this.imgHeight/2},this.pos2={x:this.imgWidth/2,y:this.imgHeight/2,endX:this.imgWidth/4,endY:this.imgHeight/4}}},initBtnEvent:function(){this.leftBtn.bind("click",function(t){t.stopPropagation();this.prevEvent()}.bind(this));this.rightBtn.bind("click",function(t){t.stopPropagation();this.nextEvent()}.bind(this))},changeConfig:function(){this.tranX1&&this.tranY1||(this.tranX1=this.pos1.x,this.tranY1=this.pos1.y);this.tranX2&&this.tranY2||(this.tranX2=this.pos2.x,this.tranY2=this.pos2.y);this.currentAlpha1||(this.currentAlpha1=1);this.currentAlpha2||(this.currentAlpha2=0)},prevEvent:function(){if(!this.running){this.pause();this.index=0>this.index-1?3:this.index-1;this.nextIndex-=2;-1>this.nextIndex&&(this.nextIndex=this.images.length-2);0>this.nextIndex&&(this.nextIndex=this.images.length-1);this.changeConfig();var n=function(t,i){this.running=!0;var e=this.currentAlpha1*(1-t/i),o=this.tranX1+(this.pos1.endX-this.tranX1)*t/i,s=this.tranY1+(this.pos1.endY-this.tranY1)*t/i;this.runBox1.children().css({transform:"translate("+o+"px,"+s+"px)",opacity:e});t==i&&(n.stop(),this.nextIndex=this.nextIndex+1>=this.images.length?0:this.nextIndex+1,this.runBox1.empty().append(this.images[this.nextIndex]).children().css({opacity:"1"}))}.bind(this).animation(this,800),h=function(t,i){var e=this.currentAlpha2+(1-this.currentAlpha2)*t/i,o=this.tranX2+(this.pos2.endX-this.tranX2)*t/i,s=this.tranY2+(this.pos2.endY-this.tranY2)*t/i;this.runBox2.children().css({transform:"translate("+o+"px,"+s+"px)",opacity:e});t==i&&(h.stop(),this.afterAnimate())}.bind(this).animation(this,800)}},nextEvent:function(){if(!this.running){this.pause();this.changeConfig();var n=function(t,i){this.running=!0;var e=this.currentAlpha1*(1-t/i),o=this.tranX1+(this.pos1.endX-this.tranX1)*t/i,s=this.tranY1+(this.pos1.endY-this.tranY1)*t/i;this.runBox1.children().css({transform:"translate("+o+"px,"+s+"px)",opacity:e});t==i&&(n.stop(),this.nextIndex=this.nextIndex+1>=this.images.length?0:this.nextIndex+1,this.runBox1.empty().append(this.images[this.nextIndex]).children().css({opacity:"1"}))}.bind(this).animation(this,800),h=function(t,i){var e=this.currentAlpha2+(1-this.currentAlpha2)*t/i,o=this.tranX2+(this.pos2.endX-this.tranX2)*t/i,s=this.tranY2+(this.pos2.endY-this.tranY2)*t/i;this.runBox2.children().css({transform:"translate("+o+"px,"+s+"px)",opacity:e});t==i&&(h.stop(),this.afterAnimate())}.bind(this).animation(this,800)}},afterAnimate:function(){this.index=3<this.index+1?0:this.index+1;this.initRunConfig();this.runBox1.children().css({opacity:"0"});this.runBox1.children().css({transform:"translate("+this.pos2.x+"px,"+this.pos2.y+"px)"});var t=this.runBox1;this.runBox1=this.runBox2;this.runBox2=t;this.config.autoBool&&(this.runTime1=this.runfun1.animation(this,this.config.delayTime),this.runTime2=this.runfun2.animation(this,this.config.delayTime));this.running=!1},tranCss:function(t,i){return{transform:"translate("+t+"px,"+i+"px)","-webkit-transform":"translate("+t+"px,"+i+"px)","-o-transform":"translate("+t+"px,"+i+"px)","-moz-transform":"translate("+t+"px,"+i+"px)","-ms-transform":"translate("+t+"px,"+i+"px)"}},tranAnimate:function(){this.initRunConfig();this.runBox1.children().css(this.tranCss(this.pos1.x,this.pos1.y));this.runBox2.children().css(this.tranCss(this.pos2.x,this.pos2.y));this.runTime1=this.runfun1.animation(this,this.config.delayTime);this.runTime2=this.runfun2.animation(this,this.config.delayTime)},runfun1:function(t,i){this.currentAlpha1=t<=i/2?1-2*t/i:0;this.tranX1=this.pos1.x+(this.pos1.endX-this.pos1.x)/i*t;this.tranY1=this.pos1.y+(this.pos1.endY-this.pos1.y)/i*t;this.runBox1.children().css({transform:"translate("+this.tranX1+"px,"+this.tranY1+"px)",opacity:this.currentAlpha1});t==i&&(this.nextIndex=this.nextIndex+1>=this.images.length?0:this.nextIndex+1,this.runBox1.empty().append(this.images[this.nextIndex]).children().css({opacity:"1"}))},runfun2:function(t,i){this.currentAlpha2=t<=i/2?2*t/i:1;this.tranX2=this.pos2.x+(this.pos2.endX-this.pos2.x)/i*t;this.tranY2=this.pos2.y+(this.pos2.endY-this.pos2.y)/i*t;this.runBox2.children().css({transform:"translate("+this.tranX2+"px,"+this.tranY2+"px)",opacity:this.currentAlpha2});t==i&&this.afterAnimate()},play:function(){this.config.autoBool&&(this.timer1&&clearTimeout(this.timer1),this.timer1=null,this.runTime1&&this.runTime1.stop(),this.runTime2&&this.runTime2.stop(),this.timer1=setTimeout(this.tranAnimate.bind(this),this.config.delayTime))},pause:function(){this.config.autoBool&&(this.timer1&&clearTimeout(this.timer1),this.timer1=null,this.runTime1&&this.runTime1.stop(),this.runTime2&&this.runTime2.stop())},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,autoBool:parseBool(t.autoBool),images:t.Images,delayTime:100>t.duration?1e3*t.duration:t.duration,selectBtn:parseBool(t.selectBtn)}},addItem:function(){for(var i=this,t=0;t<i.photoItem.length;t++){var e=$("<div></div>");e.css({width:i.boxWidth+"px",height:i.boxHeight+"px",position:"absolute"});var o=$("<img />");o.css("position","absolute");var s=i.photoItem[t];e.append(o);$(o).on("load",function(){var t=$(this)[0];$(this).css({left:(i.boxWidth-t.naturalWidth)/2+"px",top:(i.boxHeight-t.naturalHeight)/2+"px",position:"absolute"})}).attr("src",s);i.images[t]=e}},resizeItem:function(){for(var t=0;t<this.photoItem.length;t++){var i=this.images[t],e=i.children(),o=e[0];void 0!=e&&null!=e&&($(e).css({left:(this.boxWidth-o.naturalWidth)/2+"px",top:(this.boxHeight-o.naturalHeight)/2+"px",position:"absolute"}),i.css({width:this.boxWidth+"px",height:this.boxHeight+"px"}));this.images[t]=i}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.imgWidth=this.config.width*this.pageWidth;this.imgHeight=this.config.height*this.pageHeight;this.boxWidth=this.imgWidth-8;this.boxHeight=this.imgHeight-8;this.btnSize=.2*this.imgHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.initRunConfig();this.background.css({width:this.imgWidth,height:this.imgHeight,left:this.x+"px",top:this.y+"px"});this.leftBtn.css({width:this.btnSize+"px",height:this.btnSize+"px",top:(this.imgHeight-this.btnSize)/2+"px"});this.rightBtn.css({width:this.btnSize+"px",height:this.btnSize+"px",top:(this.imgHeight-this.btnSize)/2+"px"});this.initCss();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.background.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.background.one(t,function(){this.background.css({animation:""})}.bind(this))}},setPosition:function(){this.resizeItem()}}).extend("Item");Class("FlashSwf",{Package:"PageItem",create:function(t,i,e,o){this.config=this.parseConfig(i);this.parent=t;this.pageWidth=e;this.pageHeight=o;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.config.src=this.config.src;this.config.hint&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor).toString(),this.config.hint.hintShapeColor2=Color(this.config.hint.hintShapeColor2).toString());this.content=$("<div></div>");this.content.css({position:"absolute",left:this.left,top:this.top,width:this.width,height:this.height});this.setRotation(this.content,this.config.rotation);this.parent.append(this.content);isTouchDevice()||(this.config.src=this.fixRelativePath(this.config.src),this.initLinkHint(this.content),this.content.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"}),parseBool(this.config.reflection)&&this.imageReflection(this.content))},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,x:t.location.x,y:t.location.y,alpha:t.alpha,src:t.swfURL,hint:t.hint,shadow:t.shadow}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.content.flash().remove();this.content.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"});this.setPosition(this.config.x*this.pageWidth,this.config.y*this.pageHeight)},setPosition:function(t,i){this.content.css({left:t+"px",top:i+"px"})},hide:function(){this.content.html("")},show:function(){this.content.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"})}}).extend(PageItem.Item);(function(h){var e=0,o={mode:"iframe",standard:"html5",popHt:500,popWd:400,popX:200,popY:200,popTitle:"",popClose:!1,extraCss:"",extraHead:"",retainAttr:["id","class","style"]},a={};h.fn.printArea=function(t){h.extend(a,o,t);e++;h("[id^=printArea_]").remove();a.id="printArea_"+e;t=h(this);var i=r.getPrintWindow();r.write(i.doc,t);setTimeout(function(){r.print(i)},1e3)};var r={print:function(t){var i=t.win;h(t.doc).ready(function(){i.focus();i.print();"popup"==a.mode&&a.popClose&&setTimeout(function(){i.close()},2e3)})},write:function(t,i){t.open();t.write(r.docType()+"<html>"+r.getHead()+r.getBody(i)+"</html>");t.close()},docType:function(){return"iframe"==a.mode?"":"html5"==a.standard?"<!DOCTYPE html>":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+("loose"==a.standard?" Transitional":"")+'//EN" "http://www.w3.org/TR/html4/'+("loose"==a.standard?"loose":"strict")+'.dtd">'},getHead:function(){var i="";a.extraHead&&a.extraHead.replace(/([^,]+)/g,function(t){i+=t});return"<head><title>"+a.popTitle+"</title>"+i+"</head>"},getBody:function(t){var s="",n=a.retainAttr;t.each(function(){for(var t=r.getFormData(h(this)),i="",e=0;e<n.length;e++){var o=h(t).attr(n[e]);o&&(i+=(0<i.length?" ":"")+n[e]+"='"+o+"'")}s+="<div "+i+">"+h(t).html()+"</div>"});return"<body>"+s+"</body>"},getFormData:function(t){var i=t.clone(),o=h("input,select,textarea",i);h("input,select,textarea",t).each(function(t){var i=h(this).attr("type");"undefined"===h.type(i)&&(i=h(this).is("select")?"select":h(this).is("textarea")?"textarea":"");var e=o.eq(t);"radio"==i||"checkbox"==i?e.attr("checked",h(this).is(":checked")):"text"==i?e.attr("value",h(this).val()):"select"==i?h(this).find("option").each(function(t){h(this).is(":selected")&&h("option",e).eq(t).attr("selected",!0)}):"textarea"==i&&e.text(h(this).val())});return i},getPrintWindow:function(){switch(a.mode){case"iframe":var t=new r.Iframe;return{win:t.contentWindow||t,doc:t.doc};case"popup":return t=new r.Popup,{win:t,doc:t.doc}}},Iframe:function(){var t=a.id,i;try{i=document.createElement("iframe"),document.body.appendChild(i),h(i).attr({style:"border:0;position:absolute;width:0px;height:0px;right:0px;top:0px;",id:t,src:"#"+(new Date).getTime()}),i.doc=null,i.doc=i.contentDocument?i.contentDocument:i.contentWindow?i.contentWindow.document:i.document}catch(t){throw t+". iframes may not be supported in this browser."}if(null==i.doc)throw"Cannot find document.";return i},Popup:function(){var t;t="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no"+(",width="+a.popWd+",height="+a.popHt);t+=",resizable=yes,screenX="+a.popX+",screenY="+a.popY+",personalbar=no,scrollbars=yes";t=window.open("","_blank",t);t.doc=t.document;return t}}})(jQuery);Class("PageItemPopup",{Package:"PageItem.Popup",dialog:null,left:0,top:0,width:0,height:0,containerWidth:0,containerHeight:0,create:function(t,i){this.container=t||tmpContainer;this.containerWidth=t.width();this.containerHeight=t.height();this.zIndex=i||1e3},onResize:function(t,i){this.containerWidth=t;this.containerHeight=i;this.dialog.css({left:Math.floor((t-this.width)/2)+"px",top:Math.floor((i-this.height)/2)+"px","z-index":this.zIndex})},getOssUrl:function(t,i,e,o){return t=0<t.lastIndexOf("?")?t+("&x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e)):t+("?x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e))},fixRelativePath:function(t){return t?"string"!==typeof t?fixURLValue(t):!0==bookConfig.isFlipPdf?t.startsWith("../")?fixURLValue(t):t.startsWith("./")?fixURLValue("."+t):t.startsWith("files")?fixURLValue("../"+t):t.isUrl()?fixURLValue(t):fixURLValue("../"+t):fixURLValue(t):t},destroy:virtual_function,show:virtual_function,hide:virtual_function});Class("PageItemNormalPopup",{Package:"PageItem.Popup",create:function(t,i){this._super(t,i)},destroy:function(){this._super();this.dialog.remove();this.dialog=null},show:function(){this.container.append(this.dialog)},hide:function(){animateOnce(this.dialog,{"-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)"},400,function(){this.destroy()}.bind(this))}}).extend("PageItemPopup");Class("PageItemModalPopup",{Package:"PageItem.Popup",modalBackground:null,create:function(t,i){this._super(t,i);this.createModalBackground()},createModalBackground:function(){this.modalBackground=$("<div name='modal_dialog_background'></div>");this.modalBackground.css({left:"0%",top:"0%",width:"100%",height:"100%",position:"absolute","background-color":"rgba(0, 0, 0, 0.5)","z-index":this.zIndex,cursor:"default"});this.initModalBackgroundEvents()},initModalBackgroundEvents:function(t){this.modalBackground.bind(_event._click,function(){this.hide();return!1}.bind(this));this.modalBackground.bind(_event._down,function(t){t.stopPropagation();return!1}.bind(this));this.modalBackground.bind(_event._up,function(t){t.stopPropagation();return!1}.bind(this))},destroy:function(){this._super();this.dialog.remove();this.modalBackground.remove();this.modalBackground=this.dialog=null},show:function(){if(!this.timer){this.timer=!0;this.dialog.css({"-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)"});this.container.append(this.dialog);this.container.append(this.modalBackground);var t={"-webkit-transform":"scale(1)","-o-transform":"scale(1)","-ms-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)"};setTimeout(function(){animateOnce(this.dialog,t,300,function(){this.timer=!1}.bind(this))}.bind(this),100)}},hide:function(){this.timer||(this.timer=!0,animateOnce(this.dialog,{"-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)"},300,function(){this.modalBackground.css({opacity:"0"});this.destroy();this.timer=!1}.bind(this)))}}).extend("PageItemPopup");var QAF_UNKNOWN=-1,QAF_RIGHT=0,QAF_MISTAKE=1;Class("QuizPanelPC",{Package:"PageItem.Popup",create:function(t,i){this._super(t);this.config=i;this.parent=t;this.quiz=this.config.action.quiz;this.quiz[0]||(this.quiz=[this.quiz.topic]);this.dialog=$("<div></div>");this.closeButton=$("<div></div>");this.content=$("<div></div>");this.title=$("<div class='titleDiv'></div>");this.button=$("<div></div>");this.rightSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -14px;position:absolute;left:25px;top:85px;width:38px;height:50px'></div>");this.mistakeSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -74px;position:absolute;right:25px;top:85px;width:38px;height:50px'></div>");this.rightNumber=$("<div style='position:absolute;left:37px;top:145px;color:#03B503;font-size:25px;font-weight:bold'>0</div>");this.mistakeNumber=$("<div style='position:absolute;right:37px;top:145px;color:red;font-size:25px;font-weight:bold'>0</div>");this.nextPage=$("<div/></div>");this.prePage=$("<div><div>");this.advanceImg=$("<div></div>");this.progressBar=new TopicProgressBar(this.quiz.length);this.dialog.append(this.content);this.dialog.append(this.closeButton);this.parent.append(this.dialog);this.initQuiz();this.content.append(this.title).append(this.changBox).append(this.rightSmile).append(this.mistakeSmile).append(this.rightNumber).append(this.mistakeNumber).append(this.nextPage).append(this.prePage).append(this.progressBar.progressContainer);this.title.html(this.config.action.guizTxt);""==this.config.action.guizURL?this.setQuestionURL(this.topicItem[0].QuizTopicPanel.content):(this.advance=new SetAdvance(this.config.action,this),this.content.append(this.advance.QuizTopicPanel.content),this.hideButton(),this.progressBar.progressContainer.hide(),this.advance.start.on("click",function(){this.setQuestionURL(this.topicItem[0].QuizTopicPanel.content);this.showButton();this.topicItem[this.currentIndex].QuizTopicPanel.Animate();this.prePage.hide();this.progressBar.progressContainer.show();this.advance.QuizTopicPanel.content.remove()}.bind(this)));this.setCss();this.initEvent();this.prePage.hide()},setQuestionURL:function(t){this.content.append(t)},initEvent:function(){this.currentIndex=0;var i=this.topicItem.length;this.OnNextPageClick=function(){if(!(this.currentIndex>i))if(this.currentIndex+=1,this.progressBar.setProgress(this.currentIndex+1),this.currentIndex<i)this.setQuestionURL(this.topicItem[this.currentIndex].QuizTopicPanel.content),this.topicItem[this.currentIndex].QuizTopicPanel.Animate(),this.topicItem[this.currentIndex].resetScroll(),this.prePage.show();else{var t=new Onclusion(this,this.config.action,this.rightNumber[0].innerText,this.mistakeNumber[0].innerText);this.setQuestionURL(t.QuizTopicPanel.content);this.nextPage.hide()}}.bind(this);this.nextPage.on("click",this.OnNextPageClick);this.prePage.on("click",function(){0!=this.currentIndex&&(0==this.currentIndex&&(this.currentIndex+=i),this.currentIndex=(this.currentIndex-1)%i,this.setQuestionURL(this.topicItem[this.currentIndex].QuizTopicPanel.content),this.topicItem[this.currentIndex].QuizTopicPanel.Animate(),this.progressBar.setProgress(this.currentIndex+1),this.nextPage.show(),0==this.currentIndex&&this.prePage.hide())}.bind(this));this.closeButton.bind("click",function(t){t.stopPropagation();this.hide()}.bind(this));this.nextPage.on("mouseover",function(){this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -61px",cursor:"pointer"})}.bind(this));this.nextPage.on("mouseout",function(){this.nextPage.css("background","url("+uiBaseURL+"quiz.png) no-repeat -257px -16px")}.bind(this));this.prePage.on("mouseover",function(){this.prePage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -310px -62px",cursor:"pointer"})}.bind(this));this.prePage.on("mouseout",function(){this.prePage.css("background","url("+uiBaseURL+"quiz.png) no-repeat -310px -17px")}.bind(this));$(window).resize(this.onResize.bind(this))},initQuiz:function(){this.topicItem=[];this.topicAnswer=[];for(var t=0;t<this.quiz.length;t++)"right"==this.config.action.languageLayout&&(this.quiz[t].alignCss={"text-align":"right",direction:"rtl"}),this.topic=new SetQuestionPanel(this,this.quiz[t],t),this.topicItem.push(this.topic),this.topicAnswer[t]=null},getAnswerFlags:function(){for(var t=[],i=0;i<this.quiz.length;i++)null===this.topicAnswer[i]?t[i]=QAF_UNKNOWN:this.topicAnswer[i]==this.topicItem[i].getRightAnswer()?t[i]=QAF_RIGHT:t[i]=QAF_MISTAKE;return t},statistics:function(){for(var t=this.getAnswerFlags(),i=0,e=0,o=0;o<t.length;o++)t[o]==QAF_RIGHT&&i++,t[o]==QAF_MISTAKE&&e++;this.rightNumber[0].innerText=Number(i).toString();this.mistakeNumber[0].innerText=Number(e).toString()},showButton:function(){this.rightSmile.show();this.mistakeSmile.show();this.rightNumber.show();this.mistakeNumber.show();this.nextPage.show();this.prePage.show()},hideButton:function(){this.rightSmile.hide();this.mistakeSmile.hide();this.rightNumber.hide();this.mistakeNumber.hide();this.nextPage.hide();this.prePage.hide()},setCss:function(){this.title.css({position:"relative",margin:"auto",width:"570px",height:"25px","margin-top":"20px","text-align":"center","font-size":"20px","font-family":"-webkit-pictograph"});this.closeButton.asButton();this.closeButton.css({position:"absolute","background-image":"url("+uiBaseURL+"close_form.png)",width:"32px",height:"32px","z-index":"500",cursor:"pointer",right:"30px","margin-top":"24px"});this.dialog.css({position:"absolute",width:"760px",height:"550px",margin:"auto",left:"0",top:"0",right:"0",bottom:"0","z-index":"1001"});this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -16px",position:"absolute",margin:"auto",right:"22px",top:"210px",width:"36px",height:"36px"});this.prePage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -310px -17px",position:"absolute",margin:"auto",left:"27px",top:"210px",width:"36px",height:"36px"});this.content.css({position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -6px -148px","max-width":"722px","max-height":"502px",width:"100%",height:"100%",margin:"auto",left:"0",top:"0",right:"0",bottom:"0"})},onResize:function(){},show:function(){this._super();this.topicItem[this.currentIndex].resetScroll();this.modalBackground.css("display","block")},hide:function(){this.modalBackground.css("display","none");this.dialog.css({transform:"scale(0)","-webkit-transform":"scale(0)","-moz-transform":"scale(0)","-ms-transform":"scale(0)","-o-transform":"scale(0)"});animateOnce(this.dialog,{},.6);this._super.delay(this,600)}}).extend("PageItemModalPopup");Class("QuizTopicPanel",{create:function(t){this.config=t;this.content=$("<div></div>");this.deg=10;this.setCss();this.Animate()},getQuizTopicPanel:function(){return this.content},setCss:function(){this.content.css({transform:"rotateZ(10deg) rotateX(10deg)","-weblkit-transform":"rotateZ(10deg) rotateX(10deg)","-moz-transform":"rotateZ(10deg) rotateX(10deg)","-ms-transform":"rotateZ(10deg) rotateX(10deg)","-o-transform":"rotateZ(10deg) rotateX(10deg)","transform-origin":"50% 80%","-webkit-transform-origin":"50% 80%","-ms-transform-origin":"50% 80%","-moz-transform-origin":"50% 80%","-o-transform-origin":"50% 80%",position:"absolute",background:"white",margin:"auto","margin-top":"40px",left:0,right:0,width:"560px",height:"360px",border:"3px solid #b8d0da","border-radius":"14px"})},Animate:function(){this.show.animation(this,300)},show:function(t,i){var e=$.easing.easeOutCubic(null,t,10,-10,i),o=$.easing.easeOutCubic(null,t,45,-45,i);this.content.css("transform","rotateX("+o+"deg) rotateY("+o+"deg) rotateZ("+e+"deg) ")}});Class("SetQuestionPanel",{create:function(t,i,e){this.config=i;this.index=e;this.quizPanel=t;this.questionPanel=$("<div></div>");this.question=$("<span style='color:rgb(0,153,255);font-size:30px;font-weight:bold;font-family:Verdana;position:absolute;top:0;left:15px'>Q:</span>");this.initAnswer();this.questionTitle=$("<span class='stage' style='color:#0066CC;width:475px;height:70px;overflow:hidden;font-size:16px;position:absolute;top:0;left:70px'><div class='swiper' style='width:465px;position:absolute;top:0;left:0;'>"+this.config.title.replaceAll("  ","&ensp;")+"</div></span>");this.initScroll();t=this.fixRelativePath(this.config.media);bookConfig.useTheAliCloudChart&&(t=this.getOssUrl(t,280,220,"lfit"));this.mediaImg=$("<img src='"+t+"' style='max-width:270px;max-height:180px;position:absolute;bottom: 0px;top:0px;margin:auto;left:50px;'/>");this.noImgAnswerPanel=$("<div></div>");this.imgAnswerPanel=$("<div></div>");this.QuizTopicPanel=new QuizTopicPanel;this.QuizTopicPanel.getQuizTopicPanel().append(this.questionPanel.append(this.question).append(this.questionTitle).append(this.mediaImg));""==this.config.media?(this.mediaImg.remove(),this.questionPanel.append(this.noImgAnswerPanel)):this.questionPanel.append(this.imgAnswerPanel);this.setCss();this.getRightAnswer();this.addTopicAnswer()},initAnswer:function(){this.Items=[];for(var t in this.config)t.startsWith("answer")&&this.Items.push(this.config[t])},getRightAnswer:function(){for(var t=0;t<this.Items.length;t++)"true"==this.Items[t].dataRight&&(this.dataRight=this.Items[t].value);return this.dataRight},addTopicAnswer:function(){for(var t=0;t<this.Items.length;t++){var i=new TopicAnswer(this.quizPanel,this.Items[t],this.config,this.dataRight,this.index);""==this.config.media?(0==(t+1)%2&&i.answerPanel.css("margin-left","20px"),this.noImgAnswerPanel.append(i.answerPanel)):this.imgAnswerPanel.append(i.answerPanel)}},setCss:function(){this.imgAnswerPanel.css({width:"210PX",position:"absolute",right:"0px",top:"82px","overflow-x":"hidden",height:"250px"});this.noImgAnswerPanel.css({top:"125px",position:"absolute",width:"455px",left:"95px","overflow-x":"hidden",height:"230px"});this.questionPanel.css({position:"absolute",width:"560px",height:"350px",margin:"auto",right:0,left:0,top:0,bottom:0});this.config.alignCss&&(this.question.html(":Q"),this.question.css({right:"15px",left:"auto"}),this.questionTitle.css({left:"auto",right:"65px",direction:"rtl","text-align":"right"}))},initScroll:function(){this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.progress.append(this.progressBar);this.questionTitle.append(this.progress);this.initScrollCss()},resetScroll:function(){this.questionTitle.scroll({},Direction.top,"win10")},initScrollCss:function(){this.progress.css({display:"none",background:"#eee",width:"8px",height:"100%",position:"absolute",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",position:"absolute",top:"0",cursor:"pointer","border-radius":"4px"})},getOssUrl:function(t,i,e,o){return t=0<t.lastIndexOf("?")?t+("&x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e)):t+("?x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e))},fixRelativePath:function(t){return t&&"string"===typeof t?!0==bookConfig.isFlipPdf?t.startsWith("../")?t:t.startsWith("./")?"."+t:t.isUrl()?t:"../"+t:t:t}});Class("TopicAnswer",{create:function(t,i,e,o,s){this.index=s;this.quizPanel=t;this.config=e;this.answer=i;this.dataRight=o;this.answerPanel=$("<div></div>");this.checkBox=$("<div class='check-box'><div>");this.answerValue=$("<div>"+this.answer.value+"</div>");this.answerPanel.append(this.checkBox);this.answerPanel.append(this.answerValue);this.initEvent();this.setCss()},initEvent:function(){this.checkBox.on("click",function(){this.quizPanel.topicAnswer[this.index]=this.answer.value;this.quizPanel.statistics();this.answerResult=new TopicAnswerResult(this.quizPanel,this.config,this.answer,this.dataRight);this.quizPanel.content.append(this.answerResult.content)}.bind(this));this.checkBox.on("mouseover",function(){this.checkBox.css({width:"26px",height:"26px",cursor:"pointer",background:"url("+uiBaseURL+"quiz.png) no-repeat -630px -63px"})}.bind(this));this.checkBox.on("mouseleave",function(){this.checkBox.css({width:"20px",height:"20px",cursor:"pointer",background:"url("+uiBaseURL+"quiz.png) no-repeat -465px -67px"})}.bind(this))},setCss:function(){this.answerValue.css({color:"#0f5177",position:"relative","margin-left":"30px","font-size":"15px",color:"#0f5177",width:"165px","font-family":"Verdana"});this.answerPanel.css({width:"200px","margin-top":"20px",position:"relative",display:"inline-block"});this.checkBox.css({position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -465px -67px",top:"4px",width:"20px",height:"20px"});this.config.alignCss&&(this.answerPanel.css(this.config.alignCss),this.answerValue.css({"margin-left":"0","margin-right":"30px"}))}});Class("SetAdvance",{create:function(t){this.config=t;t=this.fixRelativePath(this.config.guizURL);bookConfig.useTheAliCloudChart&&(t=this.getOssUrl(t,360,250,"lfit"));this.advanceImg=$("<img src='"+t+"'/>");this.start=$("<div></div>");this.QuizTopicPanel=new QuizTopicPanel;this.QuizTopicPanel.getQuizTopicPanel().append(this.advanceImg).append(this.start);this.QuizTopicPanel.Animate();this.start.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -366px -20px",position:"absolute",width:"81px",height:"30px",right:0,left:0,bottom:"35px",margin:"auto"});this.advanceImg.css({"max-width":"360px","max-height":"250px",position:"absolute",top:"20px",right:0,left:0,margin:"auto"});this.start.on("mouseover",function(){this.start.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -366px -59px",cursor:"pointer"})}.bind(this));this.start.on("mouseout",function(){this.start.css("background","url("+uiBaseURL+"quiz.png) no-repeat -366px -20px")}.bind(this))},getOssUrl:function(t,i,e,o){return t=0<t.lastIndexOf("?")?t+("&x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e)):t+("?x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e))},fixRelativePath:function(t){return t&&"string"===typeof t?!0==bookConfig.isFlipPdf?t.startsWith("../")?t:t.startsWith("./")?"."+t:t.isUrl()?t:"../"+t:t:t}});Class("TopicProgressBar",{create:function(t){this.quizLength=t;this.progressContainer=$("<div></div>");this.progressBar=$("<div></div>");this.progressContainer.append(this.progressBar);this.setCss();this.setProgress(1)},setCss:function(){this.progressContainer.css({position:"absolute",margin:"auto",right:"0",left:"0",bottom:"10px",width:"550px",border:"3px solid white",height:"18px","background-color":"rgb(229,233,236)","border-radius":"10px"});this.progressBar.css({background:"rgba(107,216,254,90)",float:"left",height:"18px","text-align":"center","line-height":"2","border-radius":"10px"})},setProgress:function(t){this.progressBar.css("width",100/(this.quizLength+1)*t+"%");this.progressBar.css("width").replace("px","")}});Class("TopicAnswerResult",{create:function(t,i,e,o){this.quizPanel=t;this.dataRight=o;this.config=i;this.answer=e;this.content=$("<div></div>");this.nextQuestion=$("<div></div>");this.nextPage=$("<div></div>");this.nextText=$("<div>NEXT QUESTION</div>");this.answerOption=$("<span style='color:rgb(0,153,255);font-size:30px;font-weight:bold;font-family:Verdana;position:absolute;top:35px;left:35px'>A:</span>");this.answerResult=$("<span style='color:rgb(0,153,255);font-size:20px;position:absolute;top:35px;left:82px'></span>");this.JudgeResult=$("<span></span>");this.content.append(this.nextQuestion.append(this.nextPage).append(this.nextText)).append(this.answerOption).append(this.answerResult).append(this.JudgeResult);this.setCss();this.initEvent();this.answerResult.text(this.dataRight);"true"==this.answer.dataRight?this.JudgeResult.text(this.config.rightTxt):this.JudgeResult.text(this.config.wrongTxt)},initEvent:function(){this.nextPage.on("click",this.quizPanel.OnNextPageClick);this.nextText.on("click",this.quizPanel.OnNextPageClick);this.nextText.on("mouseover",function(){this.nextText.css({cursor:"pointer"})}.bind(this));this.nextPage.on("mouseover",function(){this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -61px",cursor:"pointer"})}.bind(this));this.nextPage.on("mouseout",function(){this.nextPage.css("background","url("+uiBaseURL+"quiz.png) no-repeat -257px -16px")}.bind(this))},setCss:function(){this.content.css({position:"absolute",margin:"auto","margin-top":"43px",left:0,right:0,width:"460px",height:"280px",border:"3px solid rgb(184, 208, 218)",bottom:"50px",background:"white","border-radius":"14px"});this.nextText.css({color:"rgb(0,153,255)","font-size":"14px","font-weight":"bold",width:"85px",position:"absolute",right:"80px",bottom:"30px","font-family":"Verdana"});this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -16px",position:"absolute",bottom:"30px",right:"30px",width:"36px",height:"36px"});this.JudgeResult.css({position:"absolute",width:"460px","text-align":"center",bottom:"140px",color:"black","font-family":"Verdana","font-size":"18px"});this.config.alignCss&&(this.content.css(this.config.alignCss),this.answerOption.css({right:"35px",left:"auto"}),this.answerResult.css({right:"82px"}))}});Class("Onclusion",{create:function(t,i,e,o){this.quizPanel=t;this.mistakeNumber=o;this.config=i;this.rightNumber=e;this.percentageNumber=Math.floor(this.rightNumber/this.quizPanel.quiz.length*100);this.onclusionPanel=$("<div></div>");this.hint=$("<div>You haven't selected an answer,please select one</div>");this.clusion=$("<div>"+this.config.guizEndTxt+"</div>");this.Percentage=$("<div>"+getLanguage("TTActionQuiz_Ration","Your ration is")+" "+this.percentageNumber+"%</div>");this.scorePanel=$("<div></div>");this.score=$("<div style='color: rgb(0, 152, 255);width: 315px;height: 45px;overflow-x: hidden'></div>");this.isAgain=$("<span>"+getLanguage("TTActionQuiz_PlayAgain","Do you wanna play it again?")+"</span>");this.button=$("<div></div>");this.yesButton=$("<div></div>");this.noButton=$("<div></div>");this.rightSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -14px;position:absolute;width:38px;height:50px'></div>");this.mistakeSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -74px;position:absolute;width:38px;height:50px'></div>");this.byeBye=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -506px -66px;position:absolute;width:105px;height:20px;left:300px;top:230px'></div>");this.QuizTopicPanel=new QuizTopicPanel;this.QuizTopicPanel.content.append(this.onclusionPanel);0==this.mistakeNumber&&0==this.rightNumber?this.onclusionPanel.append(this.hint):this.onclusionPanel.append(this.clusion);this.onclusionPanel.append(this.Percentage).append(this.isAgain).append(this.scorePanel.append(this.score)).append(this.button.append(this.yesButton).append(this.noButton));this.setCss();this.initEvent();0<=this.percentageNumber&&25>=this.percentageNumber&&this.score.text(this.config.score[3]);25<this.percentageNumber&&50>=this.percentageNumber&&this.score.text(this.config.score[2]);50<this.percentageNumber&&75>=this.percentageNumber&&this.score.text(this.config.score[1]);75<this.percentageNumber&&100>=this.percentageNumber&&(this.score.text(this.config.score[0]),100==this.percentageNumber&&this.score.css("color","#0098ff"))},initEvent:function(){this.yesButton.on("click",function(){this.quizPanel.currentIndex=0;this.quizPanel.progressBar.setProgress(1);this.clearAllCount();this.quizPanel.statistics();this.quizPanel.setQuestionURL(this.quizPanel.topicItem[0].QuizTopicPanel.content);this.quizPanel.prePage.hide();this.quizPanel.nextPage.show()}.bind(this));this.noButton.on("click",function(){this.removeAllChild(this.quizPanel.content[0]);this.quizPanel.content.append(this.QuizTopicPanel.content);this.removeAllChild(this.QuizTopicPanel.content[0]);this.quizPanel.content.append(this.rightSmile).append(this.mistakeSmile).append(this.byeBye);this.byeBye.animate("easeInElastic");this.rightSmile.animate({left:"210px"},400,"easeOutElastic");this.mistakeSmile.animate({right:"220px"},400,"easeOutElastic");this.quizPanel.hide()}.bind(this));this.yesButton.on("mouseover",function(){this.yesButton.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -71px -59px",cursor:"pointer"})}.bind(this));this.yesButton.on("mouseout",function(){this.yesButton.css("background","url("+uiBaseURL+"quiz.png) no-repeat -71px -20px")}.bind(this));this.noButton.on("mouseover",function(){this.noButton.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -161px -59px",cursor:"pointer"})}.bind(this));this.noButton.on("mouseout",function(){this.noButton.css("background","url("+uiBaseURL+"quiz.png) no-repeat -161px -20px")}.bind(this))},clearAllCount:function(){for(var t=this.quizPanel.quiz.length,i=0;i<t;i++)this.quizPanel.topicAnswer[i]=null},removeAllChild:function(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)},setCss:function(){this.rightSmile.css({margin:"auto",bottom:"0px",top:"0px",left:"45px",transform:"scale(3.5)","-webkit-transform":"scale(3.5)","-moz-transform":"scale(3.5)","-ms-transform":"scale(3.5)","-o-transform":"scale(3.5)"});this.mistakeSmile.css({margin:"auto",bottom:"0px",top:"0px",right:"50px",transform:"scale(3.5)","-webkit-transform":"scale(3.5)","-moz-transform":"scale(3.5)","-ms-transform":"scale(3.5)","-o-transform":"scale(3.5)"});this.scorePanel.css({position:"absolute",margin:"auto",right:"0px",left:"0px",top:"160px",color:"gray",width:"300px","text-align":"center",height:"45px",overflow:"hidden","font-size":"20px"});this.Percentage.css({"font-weight":"bold","font-size":"20px",position:"absolute",margin:"auto",top:"120px",left:"0px",right:"0px",width:"200px",height:"20px"});this.clusion.css({width:"560px","font-size":"24px",color:"#045DD0","text-align":"center","margin-top":"40px"});this.isAgain.css({color:"#00a5ff","font-size":"20px","font-weight":"bold",width:"250px",position:"absolute","text-align":"center",bottom:"90px",right:"0px",left:"0px",margin:"auto"});this.hint.css({width:"385px","font-size":"20px","font-weight":"bold",color:"#045DD0","text-align":"center","margin-left":"75px","margin-top":"35px"});this.onclusionPanel.css({position:"absolute","border-radius":"10px",background:$.browser.prefix+"linear-gradient(90deg,#f4f4f5,#FFFFFF)",margin:"auto",bottom:"0px",right:"0px",left:"0px",top:"0px"});this.yesButton.css({width:"81px",height:"30px",cursor:"pointer",position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -71px -20px"});this.noButton.css({width:"81px",height:"30px",right:"0px",position:"absolute",cursor:"pointer",background:"url("+uiBaseURL+"quiz.png) no-repeat -161px -20px"});this.button.css({margin:"auto",bottom:"25px",right:"0px",left:"0px",width:"204px",height:"30px",position:"absolute"});"right"==this.config.languageLayout&&(this.isAgain.css({direction:"rtl"}),this.Percentage.css({direction:"rtl"}))}});Class("QuizPanelMobile",{Package:"PageItem.Popup",create:function(t,i){this._super(t);this.config=i;this.quiz=this.config.action.quiz;this.quiz[0]||(this.quiz=[this.quiz.topic]);this.dialog=$("<div></div>");this.content=$("<div class='container-box'></div>");this.contentMiddle=$("<div></div>");this.contentBottom=$("<div></div>");this.closeButton=$("<div></div>");this.title=$("<div>"+this.config.action.guizTxt+"</div>");this.rightNumber=$("<div>0</div>");this.mistakeNumber=$("<div>0</div>");this.questionContent=$("<div></div>");this.initQuiz();this.setCss();this.initTransform();this.initEvent();this.setSwipe();this.progressBar=new TopicProgressBarMobile(this.quiz.length,this.currentIndex);this.dialog.append(this.contentMiddle).append(this.contentBottom).append(this.closeButton).append(this.content.append(this.title).append(this.questionContent)).append(this.progressBar.progressContainer);""==this.config.action.guizURL?this.setQuestionURL(this.topicItem[0].questionPanel):(this.advance=new SetAdvanceMobile(this.config.action,this),this.content.append(this.advance.advanceImg).append(this.advance.start),this.progressBar.progressContainer.hide(),this.advance.start.on("click",function(){this.setQuestionURL(this.topicItem[0].questionPanel);this.progressBar.progressContainer.show();this.advance.advanceImg.remove();this.advance.start.remove()}.bind(this)))},initEvent:function(){this.currentIndex=0;var i=this.topicItem.length;this.OnNextPageClick=function(){if(!(this.currentIndex>i))if(this.currentIndex+=1,this.progressBar.setProgress(this.currentIndex+1,i+1),this.currentIndex<i)this.setQuestionURL(this.topicItem[this.currentIndex].questionPanel),this.topicItem[this.currentIndex].resetScroll();else{var t=new OnclusionMobile(this,this.config.action,this.rightNumber[0].innerText,this.mistakeNumber[0].innerText);this.setQuestionURL(t.onclusionPanel)}}.bind(this);this.closeButton.on("click",function(){this.hide()}.bind(this));$(window).resize(this.hide.bind(this))},setQuestionURL:function(t){this.questionContent.append(t)},initQuiz:function(){this.topicItem=[];this.topicAnswer=[];for(var t=0;t<this.quiz.length;t++)"right"==this.config.action.languageLayout&&(this.quiz[t].alignCss={"text-align":"right",direction:"rtl"}),this.topic=new QuestionPanelMobile(this,this.quiz[t],t),this.topicItem.push(this.topic),this.topicAnswer[t]=null},getAnswerFlag:function(){for(var t=[],i=0;i<this.quiz.length;i++)null===this.topicAnswer?t[i]=QAF_UNKNOWN:this.topicAnswer[i]==this.topicItem[i].getRightAnswer()?t[i]=QAF_RIGHT:t[i]=QAF_MISTAKE;return t},flushCount:function(){for(var t=this.getAnswerFlag(),i=0,e=0,o=0;o<t.length;o++)t[o]==QAF_RIGHT&&i++,t[o]==QAF_MISTAKE&&e++;this.rightNumber[0].innerText=Number(i);this.mistakeNumber[0].innerText=Number(e)},setSwipe:function(){this.currentIndex=0;var t=function(t,i){var e;e=30*windowWidth/1600;if(!(Math.abs(t)<=e)){var o=this.topicItem.length;if(t<-e){if(this.currentIndex>o)return;this.progressBar.setProgress(this.currentIndex+1,o+1);this.currentIndex+=1;this.progressBar.setProgress(this.currentIndex+1,o+1);if(this.currentIndex<o)this.setQuestionURL(this.topicItem[this.currentIndex].questionPanel);else{var s=new OnclusionMobile(this,this.config.action,this.rightNumber[0].innerText,this.mistakeNumber[0].innerText);this.setQuestionURL(s.onclusionPanel)}}if(t>e){if(0>this.currentIndex)return;this.currentIndex-=1;this.setQuestionURL(this.topicItem[this.currentIndex].questionPanel);this.progressBar.setProgress(this.currentIndex+1,o+1)}$.browser.mise?event.cancelBubble=!0:event.stopPropagation()}}.bind(this);this.questionContent.speed(t)},show:function(){this._super();this.topicItem[this.currentIndex].resetScroll();animateOnce(this.dialog,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},.3,function(){}.bind(this),"","ease")},hide:function(){this._super();animateOnce(this.dialog,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"},.3,null,"","ease")},setCss:function(){this.questionContent.css({position:"absolute","margin-top":"30px",background:"white",width:windowWidth-70+"px",left:"0px",right:"0px",margin:"auto","overflow-x":"hidden",height:windowHeight-150+"px"});this.title.css({position:"relative",margin:"auto",width:windowWidth-50+"px",height:"22px","margin-top":"20px","text-align":"center","font-size":"20px","font-family":"-webkit-pictograph"});this.closeButton.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -69px -100px",width:"42px",height:"47px","z-index":"100",position:"absolute",right:"0px"});this.contentBottom.css({position:"absolute",border:"1px solid rgba(221,221,221,0.6)",top:"34px",left:"0px",right:"0px","background-color":"rgba(255,255,255,0.6)",width:windowWidth-90+"px",height:"50px",margin:"auto","border-radius":"5px"});this.contentMiddle.css({position:"absolute",border:"1px solid rgba(221,221,221,0.8)",top:"41px",left:"0px",right:"0px","background-color":"rgba(255,255,255,0.8)",width:windowWidth-70+"px",height:"50px",margin:"auto","border-radius":"5px","z-index":"100"});this.dialog.css({position:"absolute","background-color":"#eeeeee",width:windowWidth+"px",height:windowHeight+"px","z-index":"100"});this.content.css({position:"absolute",border:"1px solid #dddddd",bottom:"50px",left:"0px",right:"0px",margin:"auto","background-color":"#FFFFFF",width:windowWidth-50+"px",height:windowHeight-100+"px","border-radius":"5px","z-index":"100"})},initTransform:function(){this.dialog.css({transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"})},onResize:function(){this.setCss();this.dialog.css({position:"absolute","background-color":"#eeeeee",width:windowWidth+"px",height:windowHeight+"px","z-index":"100"})}}).extend("PageItemNormalPopup");Class("QuestionPanelMobile",{create:function(t,i,e){this.config=i;this.index=e;this.quizPanel=t;this.questionPanel=$("<div></div>");this.questionBox=$("<div style='position:relative;height:80px;'></div>");this.question=$("<span style='color:rgb(0,153,255);font-size:18px;font-weight:bold;font-family:Verdana;'>Q:</span>");this.initAnswer();this.questionTitle=$("<span style='color:rgb(0,153,255);font-size:15px;'>"+this.config.title+"</span>");this.questionTitle=$("<span class='stage' style='color:#0066CC;width:"+(windowWidth-99)+"px;height:70px;overflow:hidden;font-size:16px;position:absolute;top:0;left:25px'><div class='swiper' style='width:"+(windowWidth-109)+"px;position:absolute;top:0;left:0;'>"+this.config.title+"</div></span>");this.initScroll();t=this.fixRelativePath(this.config.media);bookConfig.useTheAliCloudChart&&(t=this.getOssUrl(t,windowWidth-70,220,"lfit"));this.mediaImg=$("<img src='"+t+"' style='max-width:"+(windowWidth-74)+"px;max-height:220px;margin-top:20px'/>");this.questionBox.append(this.question).append(this.questionTitle);this.questionPanel.append(this.questionBox).append(this.mediaImg);this.getRightAnswer();this.addTopicAnswer();this.questionPanel.css({width:windowWidth-69+"px","overflow-x":"hidden",position:"absolute","background-color":"white",height:windowHeight-170+"px"});this.config.alignCss&&(this.question.html(":Q"),this.question.css({position:"absolute",right:"10px"}),this.questionTitle.css({position:"absolute",right:"35px",top:0,direction:"rtl","text-align":"right"}))},initScroll:function(){this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.progress.append(this.progressBar);this.questionTitle.append(this.progress);this.initScrollCss()},resetScroll:function(){this.questionTitle.scroll({},Direction.top,"win10")},initScrollCss:function(){this.progress.css({background:"#eee",width:"8px",height:"100%",position:"absolute",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",position:"absolute",top:"0",cursor:"pointer","border-radius":"4px"})},initAnswer:function(){this.Items=[];for(var t in this.config)t.startsWith("answer")&&this.Items.push(this.config[t])},getRightAnswer:function(){for(var t=0;t<this.Items.length;t++)if("true"==this.Items[t].dataRight)var i=this.Items[t].value;return i},addTopicAnswer:function(){for(var t=0;t<this.Items.length;t++){var i=new TopicAnswerMoblie(this.quizPanel,this.Items[t],this.config,this.getRightAnswer(),this.index);this.questionPanel.append(i.answerPanel)}},getOssUrl:function(t,i,e,o){return t=0<t.lastIndexOf("?")?t+("&x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e)):t+("?x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e))},fixRelativePath:function(t){return t&&"string"===typeof t?!0==bookConfig.isFlipPdf?t.startsWith("../")?t:t.startsWith("./")?"."+t:t.isUrl()?t:"../"+t:t:t}});Class("TopicAnswerResultMobile",{create:function(t,i,e,o){this.quizPanel=t;this.dataRight=o;this.config=i;this.answer=e;this.container=$("<div></div>");this.content=$("<div></div>");this.nextQuestion=$("<div></div>");this.nextPage=$("<div></div>");this.nextText=$("<div>NEXT QUESTION</div>");this.answerOption=$("<span style='color:rgb(0,153,255);font-size:30px;font-weight:bold;font-family:Verdana;position:absolute;top:35px;left:35px'>A:</span>");this.answerResult=$("<span style='color:rgb(0,153,255);font-size:20px;position:absolute;top:35px;left:82px'></span>");this.JudgeResult=$("<span></span>");this.content.append(this.nextQuestion.append(this.nextPage).append(this.nextText)).append(this.answerOption).append(this.answerResult).append(this.JudgeResult);this.container.append(this.content);this.setCss();this.initEvent();this.answerResult.text(this.dataRight);"true"==this.answer.dataRight?this.JudgeResult.text(this.config.rightTxt):(this.JudgeResult.text(this.config.wrongTxt),this.JudgeResult.css("color","red"))},initEvent:function(){this.nextPage.on("click",this.quizPanel.OnNextPageClick);this.nextPage.on("click",function(){this.container.remove()}.bind(this));this.nextText.on("click",this.quizPanel.OnNextPageClick);this.nextText.on("click",function(){this.container.remove()}.bind(this))},setCss:function(){this.container.css({position:"absolute",margin:"auto",top:"0",left:0,right:0,bottom:"0",width:"100%",height:"100%",background:"transparent","z-index":1});this.content.css({position:"absolute",margin:"auto","margin-top":"43px",left:0,right:0,width:windowWidth-70+"px",height:windowHeight-200+"px",border:"1px solid #dddddd",bottom:"50px",background:"white","border-radius":"4px","z-index":100});this.nextText.css({color:"rgb(0,153,255)","font-size":"14px","font-weight":"bold",width:"85px",position:"absolute",right:"72px",bottom:"30px","font-family":"Verdana"});this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -16px",position:"absolute",bottom:"30px",right:"30px",width:"36px",height:"36px"});this.JudgeResult.css({position:"absolute",width:windowWidth-70+"px","text-align":"center",bottom:"140px",color:"green","font-family":"Verdana","font-size":"18px"});this.config.alignCss&&(this.content.css(this.config.alignCss),this.answerOption.css({right:"35px",left:"auto"}),this.answerResult.css({right:"82px",left:"auto"}))}});Class("TopicAnswerMoblie",{create:function(t,i,e,o,s){this.quizPanel=t;this.config=e;this.answer=i;this.index=s;this.dataRight=o;this.answerPanel=$("<div></div>");this.checkBox=$("<div><div>");this.answerValue=$("<div>"+this.answer.value+"</div>");this.answerPanel.append(this.checkBox);this.answerPanel.append(this.answerValue);this.initEvent();this.setCss()},initEvent:function(){this.checkBox.on("click",function(){this.quizPanel.topicAnswer[this.index]=this.answer.value;this.quizPanel.flushCount();this.answerResult=new TopicAnswerResultMobile(this.quizPanel,this.config,this.answer,this.dataRight);this.quizPanel.content.append(this.answerResult.container)}.bind(this))},setCss:function(){this.answerValue.css({color:"#0f5177",position:"relative","margin-left":"30px","font-size":"15px",color:"#0f5177",width:"165px","font-family":"Verdana"});this.answerPanel.css({"margin-top":"20px",position:"relative"});this.checkBox.css({top:"3px",position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -465px -67px",width:"20px",height:"20px"});this.config.alignCss&&(this.answerPanel.css(this.config.alignCss),this.answerValue.css({"margin-left":"0","margin-right":"30px"}))}});Class("OnclusionMobile",{create:function(t,i,e,o){this.quizPanel=t;this.config=i;this.rightNumber=e;this.mistakeNumber=o;this.percentageNumber=Math.floor(this.rightNumber/this.quizPanel.quiz.length*100);this.onclusionPanel=$("<div></div>");this.hint=$("<div>You haven't selected an answer,please select one</div>");this.clusion=$("<div>"+this.config.guizEndTxt+"</div>");this.Percentage=$("<div>"+getLanguage("TTActionQuiz_Ration","Your ration is")+" "+this.percentageNumber+"%</div>");this.scorePanel=$("<div></div>");this.score=$("<div style='color:#DCAB1B;width: "+(windowWidth-70)+"px;height: 45px;overflow-x: hidden'></div>");this.isAgain=$("<span>"+getLanguage("TTActionQuiz_PlayAgain","Do you wanna play it again?")+"</span>");this.button=$("<div></div>");this.yesButton=$("<div></div>");this.noButton=$("<div></div>");0==this.mistakeNumber&&0==this.rightNumber?this.onclusionPanel.append(this.hint):this.onclusionPanel.append(this.clusion);this.onclusionPanel.append(this.Percentage).append(this.isAgain).append(this.scorePanel.append(this.score)).append(this.button.append(this.yesButton).append(this.noButton));this.setCss();this.initEvent();0<=this.percentageNumber&&25>=this.percentageNumber&&this.score.text(this.config.score[3]);25<this.percentageNumber&&50>=this.percentageNumber&&this.score.text(this.config.score[2]);50<this.percentageNumber&&75>=this.percentageNumber&&this.score.text(this.config.score[1]);75<this.percentageNumber&&100>=this.percentageNumber&&(this.score.text(this.config.score[0]),100==this.percentageNumber&&this.score.css("color","#0098ff"))},initEvent:function(){this.yesButton.on("click",function(){this.quizPanel.currentIndex=0;this.clearFlushCount();this.quizPanel.flushCount();this.quizPanel.progressBar.setProgress(1,this.quizPanel.quiz.length+1);this.quizPanel.setQuestionURL(this.quizPanel.topicItem[0].questionPanel)}.bind(this));this.noButton.on("click",function(){this.quizPanel.hide()}.bind(this))},clearFlushCount:function(){for(var t=this.quizPanel.quiz.length,i=0;i<t;i++)this.quizPanel.topicAnswer[i]=null},setCss:function(){this.scorePanel.css({position:"absolute",margin:"auto",right:"0px",left:"0px",top:"160px",color:"gray",width:windowWidth-70+"px","text-align":"center",height:"45px",overflow:"hidden","font-size":"15px"});this.Percentage.css({"font-weight":"bold","font-size":"15px",position:"absolute",margin:"auto",top:"120px",left:"0px",right:"0px",width:windowWidth-70+"px","text-align":"center",height:"20px"});this.clusion.css({width:windowWidth-70+"px","font-size":"17px",color:"#045DD0","text-align":"center","margin-top":"40px"});this.isAgain.css({color:"#00a5ff","font-size":"15px","font-weight":"bold",width:"250px",position:"absolute","text-align":"center",bottom:"90px",right:"0px",left:"0px",margin:"auto"});this.hint.css({width:"250px","font-size":"15px","font-weight":"bold",color:"#045DD0","text-align":"center","margin-top":"35px"});this.onclusionPanel.css({position:"absolute",width:windowWidth-70+"px","border-radius":"10px",background:"white",margin:"auto",bottom:"0px",right:"0px",left:"0px",top:"0px"});this.yesButton.css({width:"81px",height:"30px",position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -71px -20px"});this.noButton.css({width:"81px",height:"30px",right:"0px",position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -161px -20px"});this.button.css({margin:"auto",bottom:"25px",right:"0px",left:"0px",width:"204px",height:"30px",position:"absolute"});"right"==this.config.languageLayout&&(this.isAgain.css({direction:"rtl"}),this.Percentage.css({direction:"rtl"}))}});Class("SetAdvanceMobile",{create:function(t){this.config=t;t=this.fixRelativePath(this.config.guizURL);bookConfig.useTheAliCloudChart&&(t=this.getOssUrl(t,windowWidth-80,200,"lfit"));this.advanceImg=$("<img src='"+t+"'/>");this.start=$("<div></div>");this.start.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -366px -20px",position:"absolute",width:"81px",height:"30px",right:0,left:0,bottom:"35px",margin:"auto"});this.advanceImg.css({"max-width":windowWidth-80+"px","max-height":"200px",position:"absolute",top:0,right:0,left:0,bottom:0,margin:"auto"})},getOssUrl:function(t,i,e,o){return t=0<t.lastIndexOf("?")?t+("&x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e)):t+("?x-oss-process=image/resize,m_"+o+",w_"+parseInt(i)+",h_"+parseInt(e))},fixRelativePath:function(t){return t&&"string"===typeof t?!0==bookConfig.isFlipPdf?t.startsWith("../")?t:t.startsWith("./")?"."+t:t.isUrl()?t:"../"+t:t:t}});Class("TopicProgressBarMobile",{create:function(t,i){this.quizLength=t;this.currentIndex=i;this.progressContainer=$("<div></div>");this.progressBar=$("<div></div>");this.progressContainer.append(this.progressBar);this.setCss();this.setProgress(1,this.quizLength+1)},setCss:function(){this.progressContainer.css({position:"absolute",margin:"auto",right:"0",left:"0",bottom:"10px",width:windowWidth-50+"px",height:"30px","background-color":"white","border-radius":"3px"});this.progressBar.css({height:"30px","padding-top":"4px","text-align":"center","border-radius":"10px","font-size":"20px"})},setProgress:function(t,i){if(t>i)return t-1;this.progressBar.text(t+"/"+i)}});Class("ShowInformation",{Package:"PageItem.Popup",create:function(t,i){this._super(t);this.config=i;this.initConfig();this.initHtml();this.alignCss&&this.textTitle.css(this.alignCss);var e=new TextFormatAnalyzer(this.config.action.bodyText).getHTML(this.alignCss);e.addClass("swiper");e.css({position:"absolute"});this.text.html(e);this.initCss();this.initScroll()},initScroll:function(){this.text.addClass("stage");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.progress.append(this.progressBar);this.text.append(this.progress);this.initScrollCss()},initScrollCss:function(){this.progress.css({background:"#eee",width:"8px",height:"100%",position:"absolute",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",position:"absolute",top:"0",cursor:"pointer","border-radius":"4px"})},initConfig:function(){this.width=parseInt(this.config.action.width);this.height=parseInt(this.config.action.height);this.bgColor1=Color(this.config.action.bgColor1).toString();this.bgColor2=Color(this.config.action.bgColor2).toString();this.buttonColor=Color(this.config.action.buttonColor).toString();this.buttonBgColor=Color(this.config.action.buttonBgColor).toString();this.bodyColor=Color(this.config.action.bodyColor).toString();this.titleAlign=this.config.action.titleAlign;this.titleColor=Color(this.config.action.titleColor).toString();this.link=this.config.action.link;this.linkLength=this.config.action.link.length;this.titleSize=this.config.action.titleSize;this.titleFont=this.config.action.titleFont;"right"==this.config.action.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});var t=new TextFormatAnalyzer(this.config.action.bodyText);if(null==this.config.action.bodyFont){var i=t.getFontFamily().split(",");this.config.action.bodyFont=i[0];this.config.action.bodySize=t.getFontSize();this.config.action.bodyColor=t.getFontColor()}this.image=[this.fixRelativePath(this.config.action.imgURL)];bookConfig.useTheAliCloudChart&&(this.image[0]=this.getOssUrl(this.image[0],160,290,"lfit"))},initHtml:function(){this.contentBox=$('<div id="cbox"></div>');this.enterContain=$("<div id=\"enterContain\" style='overflow:hidden;'></div>");this.closeButton=$('<div id="closebutton"></div>');this.textTitle=$("<div></div>");this.text=$("<div class='text'></div>");this.content=$("<div></div>");this.dialog=$('<div id="conb"></div>');this.imgBox=$("<div></div>");this.img=$("<img>");"http://"==this.link.substring(this.linkLength-7,this.linkLength)?this.button=$("<a href='javascript:void(0);' style='display:block' target='_Blank'>helfjawfjf</a>"):this.button=$("<a href = '"+this.link+"' target='_Blank' font-family='"+this.config.action.bodyFont+"'></a>");this.contentBox.append(this.textTitle);this.content.append(this.enterContain);this.enterContain.append(this.contentBox);this.dialog.append(this.content);this.dialog.append(this.closeButton);this.textTitle.html(this.config.action.titleText.overflow(32));this.button.html(this.config.action.buttonName);this.config.action.buttonName||this.button.css({display:"none"});this.contentBox.append(this.text);this.contentBox.append(this.button)},hasUrl:function(){var t=this.config.action.imgURL;return"null"!=t&&"./null"!=t&&"../null"!=t},initCss:function(){this.textTitle.css({"font-family":this.titleFont,"font-size":this.titleSize+"px"});this.hasOverflow(this.config.action.titleText,32)&&this.textTitle.attr("title",this.config.action.titleText);this.hasUrl()&&this.img.attr({src:this.image[0],align:"center"});this.setPcCss();this.hasUrl()&&(this.contentBox.css({position:"absolute",right:"25px","overflow-x":"hidden",width:this.width-50+"px",height:this.height+"px"}),this.textTitle.css({"text-align":this.titleAlign,"font-size":this.config.action.titleSize,color:this.titleColor,"font-family":this.config.action.titleFont,"z-index":"2500",width:this.width-50+"px","margin-top":"10px"}),this.enterContain.css({width:this.width+"px",height:this.height+"px"}),this.text.css({width:this.width-50+"px","max-height":this.height-160+"px","z-index":"2500","margin-top":"10px",overflow:"hidden"}),this.text.find(".swiper").css({width:this.width-62+"px"}));!0==parseBool(this.config.action.imgBool)&&this.hasUrl()?(this.content.append(this.imgBox),this.imgBox.append(this.img),this.imgBox.css({width:"100%",height:"100%",position:"absolute","z-index":"3000","max-width":"160px","max-height":"290px",margin:"auto",top:"15px",right:"30px"}),this.enterContain.css({width:this.width+"px",height:this.height+"px"}),this.contentBox.css({position:"absolute",left:"40px",top:"25px","overflow-x":"hidden",width:this.width+"px",height:this.height+"px"}),this.setText(),this.button.css({bottom:"0",left:"0"}),this.alignCss&&this.button.css({right:"0",left:"auto"})):!1==parseBool(this.config.action.imgBool)&&this.hasUrl()&&(this.content.append(this.imgBox),this.imgBox.append(this.img),this.imgBox.css({width:"100%",height:"100%",position:"absolute","z-index":"3000","max-width":"160px","max-height":"290px",top:"15px",margin:"auto",left:"30px"}),this.enterContain.css({width:this.width+"px",height:this.height+"px"}),this.contentBox.css({position:"absolute",right:"40px",top:"25px",width:this.width-240+"px","overflow-x":"hidden",height:this.height-10+"px"}),this.button.css({bottom:"0",left:"0"}),this.alignCss&&this.button.css({right:"0",left:"auto"}),this.setText());this.closeButton.asButton();this.closeButton.bind(_event._click,function(){this.hide()}.bind(this))},hasOverflow:function(t,i){var e=2;/[^\x00-\xff]/.test(t)&&(i=Math.floor(i/2),e=Math.floor(e/2));return t.length-i>e?!0:!1},setPcCss:function(){this.closeButton.css({width:"100%",height:"100%",position:"absolute","background-image":"url("+uiBaseURL+"close_form.png)","background-repeat":"no-repeat",cursor:"pointer","max-width":"32px","max-height":"32px","z-index":"3000",top:0,right:0});this.button.css({position:"absolute",color:this.buttonColor,border:"1px solid #111",padding:"1px 2px","background-color":this.buttonBgColor,"text-decoration":"none","z-index":"2500",bottom:"15px",left:"15px"});this.img.css({"max-width":"160px","max-height":"290px",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0"});this.dialog.css({width:this.width+30+"px",height:this.height+30+"px",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0","z-index":"3000"});this.enterContain.css({width:this.width+"px",height:this.height+"px"});this.content.css({width:"100%",height:"100%",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0",padding:"15px","max-width":this.width,"max-height":this.height,"z-index":"1900","background-image":$.browser.prefix+"repeating-linear-gradient("+this.config.action.bgAngle+"deg, "+this.bgColor2+", "+this.bgColor1+")"});this.text.css({position:"relative","font-size":this.config.action.bodySize+"px",color:this.bodyColor,"font-family":this.config.action.bodyFont,width:this.width+"px",height:this.height-140+"px",padding:"0px",outline:"medium",border:"0px","padding-right":"0","line-height":"2.0",background:"rgba(255,255,255,0)","z-index":"2500",overflow:"hidden"});this.text.find(".swiper").css({width:this.width-15+"px"});this.textTitle.css({margin:"10px 0","font-weight":"bold","font-size":this.config.action.titleSize,color:this.titleColor,"text-align":this.titleAlign,"font-family":this.config.action.titleFont})},setText:function(){this.textTitle.css({"font-weight":"bold","font-size":this.config.action.titleSize,color:this.titleColor,"text-align":this.titleAlign,"font-family":this.config.action.titleFont,"z-index":"2500",width:this.width-240+"px",overflow:"hidden","text-overflow":"ellipsis"});this.text.css({"font-size":this.config.action.bodySize+"px",color:this.bodyColor,"font-family":this.config.action.bodyFont,width:this.width-240+"px",height:this.height-165+"px",padding:"0px",outline:"medium",border:"0px","padding-right":"0","margin-top":"20px","line-height":"2.0",background:"rgba(255,255,255,0)","z-index":"2500",overflow:"hidden"});this.text.find(".swiper").css({width:this.width-250+"px"})},show:function(){this._super();this.hasUrl()?this.text.css({height:this.height-this.textTitle.height()-75+"px"}):this.text.css({height:this.height-this.textTitle.height()-50+"px"});this.text.scroll({},Direction.top,"win10");this.modalBackground.css({display:"block"})},hide:function(){this._super.delay(this,500);animateOnce(this.dialog,{transform:"scale(0)","-webkit-transform":"scale(0)","-moz-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)"},.5,function(){this.modalBackground.empty();this.modalBackground.remove()}.bind(this),"","ease")}}).extend("PageItemModalPopup");Class("ShowInformationMobile",{Package:"PageItem.Popup",create:function(t,i){this._super(t);this.windowWidth=windowWidth;this.windowHeight=windowHeight;this.config=i;this.initConfig();this.initHtml();this.imgUrl=this.fixRelativePath(this.config.action.imgURL);this.setPhoneCss();this.closeButton.bind("click",function(){this.hide()}.bind(this));var e=this.config.action.imgURL?this.config.action.imgURL.toLowerCase().trim():"";"null"!=e&&""!=e&&"./null"!=e||this.img.remove();this.dialog.css({transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"});$(window).resize(function(){this.onResize($(window).width(),$(window).height())}.bind(this))},initConfig:function(){this.bgColor1=Color(this.config.action.bgColor1).toString();this.bgColor2=Color(this.config.action.bgColor2).toString();this.buttonColor=Color(this.config.action.buttonColor).toString();this.buttonBgColor=Color(this.config.action.buttonBgColor).toString();this.fontColor=Color(this.config.action.titleColor).toString();this.bodyColor=Color(this.config.action.bodyColor).toString();this.titleSize=this.config.action.titleSize;this.titleFont=this.config.action.titleFont;"right"==this.config.action.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});var t=new TextFormatAnalyzer(this.config.action.bodyText);if(null==this.config.action.bodyFont){var i=t.getFontFamily().split(",");this.config.action.bodyFont=i[0];this.config.action.bodySize=t.getFontSize();this.config.action.bodyColor=t.getFontColor()}},initHtml:function(){this.link=this.config.action.link;this.linkLength=this.config.action.link.length;this.closeButton=$('<div id="closebutton"></div>');this.textTitle=$("<div></div>");this.text=$("<div></div>");this.content=$("<div></div>");this.dialog=$('<div id="conb"></div>');this.title=$("<div></div>");this.img=$("<img>");this.foot=$('<div style="width:100%;height:70px;position:relative;"></div>');"http://"==this.link.substring(this.linkLength-7,this.linkLength)?this.button=$("<a href='javascript:void(0);' target='_Blank'></a>"):this.button=$("<a href = '"+this.link+"' target='_Blank' font-family='"+this.config.action.bodyFont+"'></a>");this.foot.append(this.button);this.textTitle.html(this.config.action.titleText);this.textTitle.text(this.textTitle.text());this.button.html(this.config.action.buttonName);this.dialog.append(this.title);this.title.append(this.closeButton);this.title.append(this.textTitle);this.dialog.append(this.content);this.content.append(this.img);this.content.append(this.text);var t=new TextFormatAnalyzer(this.config.action.bodyText).getHTML(this.alignCss);this.text.html(t);this.content.append(this.foot)},setPhoneCss:function(){this.title.css({"font-family":this.titleFont,"font-size":this.titleSize+"px",position:"relative",width:"100%","background-color":"mintcream",border:"#CCCCCC 0.5px solid"});"null"!=this.config.action.imgURL&&"../null"!=this.config.action.imgURL&&(bookConfig.useTheAliCloudChart&&(this.imgUrl=this.getOssUrl(this.imgUrl,windowWidth,200,"lfit")),this.img.attr({src:this.imgUrl,align:"center"}));this.button.css({position:"absolute",color:this.buttonColor,"padding-left":"8px","padding-right":"8px","background-color":this.buttonBgColor,"text-decoration":"none","z-index":"2500",right:"30px","border-radius":"6px",bottom:"30px"});this.img.css({position:"relative","max-width":"100%","max-height":"200px",margin:"15px auto",display:"block"});this.dialog.css({position:"absolute",width:"100%",height:"100%","z-index":"3000","background-image":$.browser.prefix+"repeating-linear-gradient("+this.config.action.bgAngle+"deg, "+this.bgColor2+","+this.bgColor1+")"});this.content.css({width:this.windowWidth+"px","overflow-x":"hidden",height:this.windowHeight-(this.textTitle.height()||55)+"px"});this.textTitle.css({position:"relative",padding:"0 30px",margin:"auto",color:this.fontColor,"font-family":this.config.action.titleFont,"vertical-align":"middle","line-height":"1.8",left:"0",top:"0",bottom:"0",right:"0","text-align":"center"});"right"==this.config.action.languageLayout&&this.textTitle.css({direction:"rtl"});this.text.css({width:this.windowWidth-30+"px","font-size":this.config.action.bodySize+"px",color:this.bodyColor,"font-family":this.config.action.bodyFont,"overflow-y":"hidden","margin-top":"15px","padding-left":"15px","line-height":"2.0","text-indent":"0"});this.closeButton.css({position:"absolute","z-index":"1",margin:"auto","background-image":"url("+uiBaseURL+"background_prev.png)","background-repeat":"no-repeat",cursor:"pointer",width:"20px",height:"20px",left:"8px",bottom:"0",top:"0"})},onResize:function(t,i){this.windowWidth=t;this.windowHeight=i;this.setPhoneCss()},show:function(){this._super();this.content.css({height:this.windowHeight-this.textTitle.height()+"px"});this.content.css({height:this.windowHeight-(this.textTitle.height()||55)+"px"});(function(){animateOnce(this.dialog,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},.3,function(){},"","ease")}).delay(this,100)},hide:function(){this._super.delay(this,300);animateOnce(this.dialog,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"},.3,function(){this.dialog.empty();this.dialog.remove()}.bind(this),"","ease")}}).extend("PageItemNormalPopup");Class("WindowHtml",{Package:"PageItem.Popup",create:function(t,i){this._super(t);this.parent=t;this.config=i;this.frameWidth=parseInt(this.config.windowWidth);this.frameHeight=parseInt(this.config.windowHeight);var e=this.config.windowURL;if(e.endsWith(".doc")||e.endsWith(".ppt"))e=this.fixRelativePath(e);this.dialog=$("<div name='frame_border'></div>");this.title=$("<div></div>");this.config.caption&&this.title.html(this.config.caption);this.htmlFrame=$("<iframe class='flip-action' frameborder=0 src='"+this.getUrl(e)+"' width='"+this.frameWidth+" ' height='100% frameborder='0' ></iframe>");this.closeButton=$("<img src='"+uiBaseURL+"close_form.png'/>");this.dialog.append(this.closeButton).append(this.title);this.dialog.append(this.htmlFrame);this.setCss();this.initEvent();this.onResize();this.resizeTimer=this.onResize.interval(this,500);this.visible=!0;this.show()},getUrl:function(t){if(t)return t=getRealURL(t)},destroy:function(){this._super();this.visible&&(this.visible=!1,this.htmlFrame.attr("src",""),this.resizeTimer&&this.resizeTimer.stop())},initEvent:function(){this.modalBackground.bind(_event._down,function(t){this.hide();t.stopPropagation()}.bind(this));this.closeButton.asButton();this.closeButton.bind(_event._end,function(t){this.hide();t.stopPropagation()}.bind(this));this.dialog.bind(_event._down,function(t){t.stopPropagation();return!1}.bind(this))},setCss:function(){this.dialog.css({position:"absolute","z-index":"1001",scrolling:"no","background-color":"#F0F0F0","border-radius":"3px",margin:"auto",width:this.frameWidth+"px",height:this.frameHeight+"px","-webkit-overflow-scrolling":"touch",overflow:"auto",left:"0",top:"0",bottom:"0",right:"0"});this.htmlFrame.css({"background-color":"#F0F0F0",position:"relative","margin-left":"5px","margin-top":"32px"});this.closeButton.css({position:"absolute","z-index":"1",width:"32px",height:"32px",cursor:"pointer",right:"5px",top:"0px"});this.title.css({position:"absolute",left:"5px",top:"5px","font-size":"16px"});"right"==this.config.languageLayout&&(this.title.css({left:"auto",right:"5px","text-align":"right",direction:"rtl"}),this.closeButton.css({left:"5px",right:"auto"}))},onResize:function(){if(this.windowWidth!=windowWidth||this.windowHeight!=windowHeight){this.windowWidth=windowWidth;this.windowHeight=windowHeight;var t=windowWidth-10,i=windowHeight-10;isPhone()||(t=Math.min(this.frameWidth+10,t),i=Math.min(this.frameHeight+37,i));this.dialog.css({width:t+"px",height:i+"px"});i-=37;this.htmlFrame.attr("width",t-10+"px");this.htmlFrame.attr("height",i+"px")}}}).extend("PageItemModalPopup");Class("SwfSlide",{Package:"PageItem.Popup",create:function(t,i,e,o){this._super(t);i&&i.action&&(this.focus=!0,this.config=i,this.action=i.action,"string"==typeof this.action.swfURL&&""!=this.action.swfURL&&null!=this.action.swfURL&&void 0!=this.action.swfURL&&(this.action.swfURL=this.fixRelativePath(this.action.swfURL)),this.parent=t,this.elemConfig=i.elemConfig,this.element=this.elemConfig.element,"IMG"==this.element[0].tagName.toUpperCase()&&(this.element=this.element.panent()),this.windowWidth=e,this.windowHeight=o,this.pageWidth=this.elemConfig.parentWidth,this.pageHeight=this.elemConfig.parentHeight,this.imgWidth=this.action.targetWidth,this.imgHeight=this.action.targetHeight,this.height=this.width=0,this.type=this.action.startType,this.initHtml(),this.imgLoad(),$(window).resize(this.onResize.bind(this)),this.initEvent())},initHtml:function(){this.dialog=$("<div style='display:none'></div>");this.box=$("<div id='box'></div>");this.close=$("<img class='closeImg'/>");this.background=$("<div class='BG'></div>");"SWF"==this.action.targetType&&(this.img=$("<img src='"+this.action.swfURL+"' />"),this.box.append(this.img));if("Text"==this.action.targetType){var t=new TextFormatAnalyzer(this.action.targetText);this.fontSize=t.getMinFontSize();this.action.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});this.text=t.getHTML(this.alignCss);this.box.append(this.text)}this.dialog.append(this.box);this.dialog.append(this.close);this.parent.append(this.dialog)},onResize:function(){var t=this.elemConfig.elementParent.offset();this.elemConfig.offsetX=t.left;this.elemConfig.offsetY=t.top;this.pageWidth=BookInfo.getBook().getPageWidth();this.pageHeight=BookInfo.getBook().getPageHeight();this.getAttribute();this.getPosition();this.initCss()},imgLoad:function(){if("SWF"==this.action.targetType)this.img.on("load",function(){this.onResize()}.bind(this));else this.onResize()},getAttribute:function(){if("Text"==this.action.targetType)this.width=120,this.height=200;else{this.width=this.elemConfig.parentWidth;this.height=this.elemConfig.parentHeight;var t=this.img[0].naturalWidth,i=this.img[0].naturalHeight;this.imgWidth=t;this.imgHeight=i;3==this.action.windowScale?(this.width=parseInt(this.action.windowWidth),this.height=parseInt(this.action.windowHeight),this.imgWidth=parseInt(this.action.targetWidth),this.imgHeight=parseInt(this.action.targetHeight)):1==this.action.windowScale?(this.width=t>this.pageWidth?this.pageWidth/3*2:t,this.height=i>this.pageHeight?this.pageHeight/4*3:i):2==this.action.windowScale&&(3!=this.action.targetScale?(this.width=t,this.height=i,this.imgWidth=t,this.imgHeight=i):(this.width=parseInt(this.action.targetWidth),this.height=parseInt(this.action.targetHeight),this.imgWidth=parseInt(this.action.targetWidth),this.imgHeight=parseInt(this.action.targetHeight)));1==this.action.targetScale?(t>i?(this.imgWidth=this.width,this.imgHeight=this.imgWidth/t*i):(this.imgHeight=this.height,this.imgWidth=this.imgHeight/i*t),1==this.action.windowScale&&(this.width=this.imgWidth>this.pageWidth?this.pageWidth/3*2:this.imgWidth,this.height=this.imgHeight>this.pageHeight?this.pageHeight/4*3:this.imgHeight)):4==this.action.targetScale?(this.imgWidth=this.width,this.imgHeight=this.height,1==this.action.windowScale&&(this.width=this.imgWidth>this.pageWidth?this.pageWidth/3*2:this.imgWidth,this.height=this.imgHeight>this.pageHeight?this.pageHeight/4*3:this.imgHeight)):5==this.action.targetScale&&(t>i?(this.imgHeight=this.height,this.imgWidth=this.imgHeight/i*t):(this.imgHeight=this.width,this.imgHeight=this.imgWidth/t*i),1==this.action.windowScale&&(this.width=this.imgWidth>this.pageWidth?this.pageWidth/3*2:this.imgWidth,this.height=this.imgHeight>this.pageHeight?this.pageHeight/4*3:this.imgHeight))}},initCss:function(){"SWF"==this.action.targetType&&(0==this.imgWidth||0==this.imgHeight?this.dialog.css({display:"none"}):this.dialog.css({display:"block"}));"Text"==this.action.targetType&&(this.text?this.dialog.css({display:"block"}):this.dialog.css({display:"none"}));this.close.css({position:"absolute",top:"-20px",right:"-20px",width:"20px",height:"20px","border-radius":"50%",background:"#111",cursor:"pointer",display:"none"});form_icons&&form_icons.close?this.close.attr("src","data:image/png;base64,"+form_icons.close):this.close.attr("src",uiBaseURL+"close.png");"Text"==this.action.targetType&&this.textCss();"SWF"==this.action.targetType&&this.imgCss();this.dialog.css(this.type,this.startPosition+"px").css("opacity","0");"left"==this.type||"right"==this.type?this.dialog.css({top:this.top+"px"}):this.dialog.css("left",this.left+"px");"true"==this.action.winIsAlphaBoolean&&this.dialog.css({background:"rgba(255,255,255,0.8)",border:"none"});"BtnClick"==this.action.outType&&this.close.css({display:"block"})},textCss:function(){this.box.css({position:"relative",width:this.width+"px",height:this.height+"px",overflow:"hidden","overflow-y":"auto"});this.dialog.css({position:"absolute",width:this.width+"px",height:this.height+"px",background:"rgba(255,255,255,0.8)","z-index":"1001",border:"10px solid rgba(255,255,255,0)"});if("1"==this.action.windowScale){var t=this.pageHeight-this.pageHeight*this.config.y-20;this.dialog.css({height:"auto","max-height":t+"px"});this.box.css({height:"auto","max-height":t+"px"})}else"2"==this.action.windowScale?(this.box.css({width:"120px",height:"auto"}),this.dialog.css({position:"absolute",height:"auto"})):"3"==this.action.windowScale&&("0"!=this.action.windowWidth&&"0"!=this.action.windowHeight||this.dialog.css({display:"none"}),this.dialog.css({width:this.action.windowWidth-20+"px",height:this.action.windowHeight-20+"px"}),this.box.css({width:this.action.windowWidth-20+"px",height:this.action.windowHeight-20+"px"}))},imgCss:function(){this.img.css({position:"absolute",width:this.imgWidth-20+"px",height:this.imgHeight-20+"px"});this.box.css({position:"absolute",width:this.width-20+"px",height:this.height-20+"px",overflow:"hidden"});this.dialog.css({position:"absolute",width:this.width-20+"px",height:this.height-20+"px",background:"rgba(255,255,255,0.8)","z-index":"1001",border:"10px solid rgba(255,255,255,0)"})},getPosition:function(){"left"==this.type?(this.startPosition=this.elemConfig.offsetX-this.width,this.endPosition=this.elemConfig.offsetX):"right"==this.type?(this.startPosition=this.elemConfig.parentWidth-this.width+this.elemConfig.offsetX,this.endPosition=this.elemConfig.parentWidth+this.elemConfig.offsetX,this.width>this.pageWidth&&(this.startPosition=this.windowWidth-this.width-this.elemConfig.offsetX-this.pageWidth,this.endPosition=this.windowWidth-this.elemConfig.offsetX-this.pageWidth)):"bottom"==this.type?(this.startPosition=this.windowHeight-this.elemConfig.offsetY-this.elemConfig.parentHeight-this.height,this.endPosition=this.windowHeight-this.elemConfig.offsetY-this.elemConfig.parentHeight,this.height>this.windowHeight&&(this.startPosition=-this.height+this.elemConfig.offsetY,this.endPosition=this.elemConfig.offsetY)):(this.startPosition=this.elemConfig.offsetY-this.height,this.endPosition=this.elemConfig.offsetY);this.width>this.pageWidth?this.left=(this.windowWidth-this.width)/2:(this.left=this.config.x*this.elemConfig.parentWidth+this.elemConfig.offsetX,this.config.x*this.elemConfig.parentWidth+this.width>this.pageWidth&&(this.left=this.pageWidth-this.width+this.elemConfig.offsetX));this.height>this.pageHeight?this.top=(this.windowHeight-this.height)/2:(this.top=this.config.y*this.elemConfig.parentHeight+this.elemConfig.offsetY,this.config.y*this.elemConfig.parentHeight+this.height>this.pageHeight&&(this.top=this.pageHeight-this.height+this.elemConfig.offsetY))},initEvent:function(){isPhone()||isPad()||("Mouse Out"==this.action.outType?this.mouseOutEvent():"BtnClick"==this.action.outType&&this.clickEvent())},clickEvent:function(){this.close.bind("click",function(){this.hide()}.bind(this))},mouseOutEvent:function(){this.dialog.bind("mouseleave mouseout",function(){this.focus=!1;(function(){this.focus||(this.hide(),function(){this.moving=!1}.delay(this,450))}).delay(this,50)}.bind(this));this.dialog.bind("mouseenter mouseover ",function(){this.focus=!0}.bind(this));this.element.bind("mouseenter mouseover ",function(){this.focus=!0}.bind(this));this.element.bind("mouseleave mouseout",function(){this.focus=!1;(function(){this.focus||(this.hide(),function(){this.moving=!1}.delay(this,450))}).delay(this,50)}.bind(this))},animateCase:function(t,i){t&&(this.position=t,this.oldOpacity=parseFloat(this.dialog.css("opacity")),this.newOpacity=i,this.getOldPosition(),this.animate&&this.animate.stop(),this.animate=function(t,i){if(t==i)this.dialog.css({opacity:this.newOpacity}),this.setPosition(this.position);else{var e=this.start+(this.position-this.start)/i*t;this.dialog.css({opacity:this.oldOpacity+(this.newOpacity-this.oldOpacity)/i*t});this.setPosition(e)}}.animation(this,500))},getOldPosition:function(){switch(this.type){case"left":this.start=parseFloat(this.dialog.left());break;case"right":this.start=parseFloat(this.dialog.right());break;case"top":this.start=parseFloat(this.dialog.top());break;case"bottom":this.start=parseFloat(this.dialog.bottom())}},setPosition:function(t){this.currentPosition=t;switch(this.type){case"left":this.dialog.css({left:this.currentPosition+"px"});break;case"right":this.dialog.css({right:this.currentPosition+"px"});break;case"top":this.dialog.css({top:this.currentPosition+"px"});break;case"bottom":this.dialog.css({bottom:this.currentPosition+"px"})}},show:function(){this.dialog.css({"pointer-events":"auto"});this.animateCase(this.endPosition,1)},hide:function(){this.animateCase(this.startPosition,0);this.dialog.css({"pointer-events":"none"})}}).extend("PageItemNormalPopup");Class("SlideShow",{Package:"PageItem.Popup",create:function(t,i,e,o){this._super(t);var s=i.photos;this.popUpImage=i.popUpImage;this.photos=$.extend([],s);this.dScale=1;this.photos.photo&&(this.photos=void 0==this.photos.photo[1]?[this.photos.photo]:this.photos.photo);if(!(this.photos instanceof Array)){if(void 0==this.photos.url&&void 0==this.photos.photo)return;this.photos.url&&(this.photos=[{url:this.photos.url,desc:""}]);this.photos.photo&&(this.photos=[this.photos.photo])}!this.popUpImage||this.photos.length||this.photos.photo||this.photos.push({title:"",desc:"",url:i.url});this.parent=t;this.windowWidth=e;this.windowHeight=o;this.initHtml();this.initButton();this.initCss();this.initEvents();this.resizeTimer=this.onResize.interval(this,500);this.changeImage(0);this.show();this.descBox.scroll({},Direction.top,"win10")},initHtml:function(){this.imgIndex=-1;this.imgWidth=200;this.imgHeight=300;this.boxWidth=200;this.boxHeight=300;this.loadingImageHeight=this.loadingImageWidth=32;this.dialog=$("<div id='dialog'></div>");this.insetBox=$("<div></div>");this.leftBar=$("<div></div>");this.rightBar=$("<div></div>");this.img=$("<img style='position : absolute;' />");this.textBox=$("<div></div>");this.upIcon=$("<div><div></div></div>");this.titleBox=$("<div></div>");this.descBox=$("<div class='stage'></div>");this.descSwiper=$("<div class='swiper'></div>");this.descBox.append(this.descSwiper);this.textBox.append(this.titleBox).append(this.descBox).append(this.upIcon);this.initScroll();this.closeButton=new button(this.parent,{buttonType:1,iconURL:uiBaseURL+"closecat.png"},!0);this.loadingImage=$("<div><img src='"+uiBaseURL+"progress.gif' style='position:absolute;'/></div>");this.insetBox.append(this.loadingImage);this.dialog.append(this.insetBox);this.dialog.append(this.textBox);this.parent.append(this.leftBar);this.parent.append(this.rightBar)},initScroll:function(){this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.progress.append(this.progressBar);this.descBox.append(this.progress);this.progress.css({background:"#eee",width:"8px",height:"100%",position:"absolute",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",position:"absolute",top:"0",cursor:"pointer","border-radius":"4px"})},initCss:function(){this.dialog.css({width:"100%",height:"100%",position:"absolute","z-index":"1001"});this.insetBox.css({position:"absolute",width:this.boxWidth+"px",height:this.boxHeight+"px",left:"0px",top:"0px","z-index":1,"-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)"});this.loadingImage.css({position:"absolute","z-index":-1,left:(this.boxWidth-this.loadingImageWidth)/2+"px",top:(this.boxHeight-this.loadingImageHeight)/2+"px",width:this.loadingImageWidth+"px",height:this.loadingImageHeight+"px"});this.rightBar.css({"z-index":1002,width:"100px",height:"100px",right:"0px",top:(windowHeight-100)/2+"px",opacity:"0.6",position:"absolute"});this.leftBar.css({"z-index":1003,width:"100px",height:"100px",left:"0px",top:(windowHeight-100)/2+"px",opacity:"0.6",position:"absolute"});this.closeButton.setCSS({"z-index":1002,display:"none"});this.closeButton.iconBox.css({opacity:"0.6"});this.textBox.css({transition:"bottom 0.3s","font-size":"14px","font-family":"Calibri",padding:"15px","z-index":"2",display:"block",background:"rgba(11,11,11,0.25)",color:"#fff",position:"absolute",bottom:"0",width:windowWidth-30+"px",height:"90px"});this.titleBox.css({overflow:"hidden","font-size":"16px",height:"20px",top:"26px",position:"absolute"});this.descBox.css({overflow:"hidden",width:windowWidth-30+"px",height:"60px",position:"absolute",top:"56px"});this.descSwiper.css({position:"absolute",width:windowWidth-40+"px"});this.upIcon.css({position:"absolute",right:"5px",top:"5px",width:"30px",height:"30px",cursor:"pointer"});this.upIcon.find("div").css({cursor:"pointer",width:"0",height:"0",position:"absolute",right:"10px",top:"10px","border-width":"8px 5px 0px","border-style":"solid","border-color":"rgb(255, 255, 255) transparent transparent"})},initButton:function(){1>=this.photos.length||(this.leftButton=new button(this.leftBar,{buttonType:1,iconURL:uiBaseURL+"previous_down.png"}),this.rightButton=new button(this.rightBar,{buttonType:1,iconURL:uiBaseURL+"next_down.png"}),this.leftButton.setButtonPosition(0,29,["left","top"]),this.leftButton.background.css({display:"none"}),this.rightButton.setButtonPosition(0,29,["right","top"]),this.hideButtons())},afterZoomOut:function(){this.closeButton.iconBox.css({display:"block"});this.isZoom=!1},beforeZoomIn:function(){this.closeButton.iconBox.css({display:"none"});this.isZoom=!0},initEvents:function(){this.closeButton.onMouseDown(this,this.hide);this.modalBackground.unbind();this.insetBox.bind(_event._click,function(t){t.stopPropagation()}.bind(this));this.textBox.bind(_event._click,function(t){t.stopPropagation()}.bind(this));setTimeout(function(){this.dialog.bind(_event._click,this.hide.bind(this));if(this.leftButton)this.leftButton.onMouseDown(this,this.prePage);if(this.rightButton)this.rightButton.onMouseDown(this,this.nextPage)}.bind(this),500);this.leftButton&&this.leftButton.mouseEnterJump();this.rightButton&&this.rightButton.mouseEnterJump();this.zoomMonitor=new ZoomMonitor;this.zoomMonitor.register({target:this.img,beforeZoomIn:this.beforeZoomIn.bind(this),afterZoomIn:this.afterZoomIn.bind(this),afterZoomOut:this.afterZoomOut.bind(this)});this.upIcon.bind(_event._click,function(){0<=this.textBox.bottom()?(this.textBox.css({bottom:"-90px"}),this.upIcon.find("div").css({top:"7px","border-width":"0px 5px 8px","border-color":"transparent transparent rgb(255, 255, 255)"})):(this.textBox.css({bottom:"0"}),this.upIcon.find("div").css({top:"12px","border-width":"8px 5px 0px","border-color":"rgb(255, 255, 255) transparent transparent"}))}.bind(this));this.mouseWheelEvent()},mouseWheelEvent:function(){var o;this.img.bind(_event._mousewheel,function(t){var i=t.originalEvent,i=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));if(!this.isZoom&&0<i)this.img.onDoubleTap(t);else{var e;void 0!=o&&200>new Date-o?e=!1:(o=new Date,e=!0);if(!e)return!1;t={pointers:[{pageX:t.pageX,pageY:t.pageY},{pageX:t.pageX,pageY:t.pageY}]};0>i?this.zoomDown(t):this.zoomUp(t);stopEvent(t);return!1}}.bind(this))},setCSS:function(t){if(t){void 0!=t.width&&this.img.css("width",t.width+"px");void 0!=t.height&&this.img.css("height",t.height+"px");void 0!=t.left&&this.img.css("left",t.left+"px");void 0!=t.top&&this.img.css("top",t.top+"px");void 0!=t.display&&this.img.css("display",t.display);if(t.tran||void 0!=t.scale||t.origin){var i=transformCSS(t);this.img.css(i)}this.img.registerPatamers&&this.img.registerParamers(t)}},changeZoomImg:function(){if(this.isZoom){var t=this.img,i=this.img.offset(),e=getTransform(this.img[0]),o=t.parameters.width/t.parameters.naturalWidth,s=this.getSizeConfig(),n=s.width,s=s.height;t.parameters.naturalWidth=n;t.parameters.naturalHeight=s;t.parameters.width=n;t.parameters.height=s;this.img.parameters.scale=o;t.parameters.tran={x:e.x,y:e.y};t.parameters.left=i.left-e.x;t.parameters.top=i.top-e.y;this.afterZoomIn()}},afterZoomIn:function(){var t=this.img.offset().left,i=this.img.offset().top,e=this.img.parameters.scale,o={tran:{x:t-this.img.parameters.left,y:i-this.img.parameters.top},scale:1,origin:{x:0,y:0}};1!=e&&this.img.css({width:Math.round(this.img.parameters.width*e)+"px",height:Math.round(this.img.parameters.height*e)+"px"});this.img.status_zoom||(o.tran={x:0,y:0},o.left=t-0,o.top=i-0);this.setCSS(o);this.img.parameters.tran=o.tran;this.img.parameters.scale=1;this.img.parameters.toScale=1;this.img.parameters.width=$(this.img).width();this.img.parameters.height=$(this.img).height();this.img.parameters.origin={x:0,y:0};this.img.parameters.resize=!1},beforeStart:function(t){var i=this.img,e=i.parameters;this.img.offset();this.img.offset();e.origin=i.mathOrigin(i,t);e.tran=i.mathTran(i,t,e.origin);i.originObj(i,i.parameters.origin)},zoomUp:function(t){var i=this.img;i.scale=i.parameters.toScale;var e=Math.min(i.parameters.naturalWidth*i.maxScale/i.parameters.width,1.1*parseFloat(i.scale));e!=i.scale&&(t||(t={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]}),i.parameters.origin=i.mathOrigin(i,t),i.originObj(i,i.parameters.origin),i.animateToScale(i,e,t))},zoomDown:function(t){var i=this.img;t||(t={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]});i.scale=i.parameters.toScale;i.parameters.origin=i.mathOrigin(i,t);i.originObj(i,i.parameters.origin);var e=i.parameters.naturalWidth/i.parameters.width,o=.9*parseFloat(i.scale);o<=e&&(i.parameters.zoomOut=!0);i.animateToScale(i,Math.max(e,o),t)},hideButtons:function(){this.photos&&1>=this.photos.length&&(this.leftBar.css("display","none"),this.rightBar.css("display","none"))},nextPage:function(){if(!(1>=this.photos.length)){var t=this.imgIndex+1;this.leftButton.background.css({display:"block"});t>=this.photos.length-1&&(t=this.photos.length-1,this.rightButton.background.css({display:"none"}));this.changeImage(t)}},prePage:function(){if(!(1>=this.photos.length)){var t=this.imgIndex-1;this.rightButton.background.css({display:"block"});0>=t&&(t=0,this.leftButton.background.css({display:"none"}));this.changeImage(t)}},changeImage:function(t){if(void 0!=t&&(this.dScale=1,this.setTrans(this.dScale),this.imgIndex!=t)){this.imgIndex=t;var i=this.photos[t].url,i=this.fixRelativePath(i),e=this.photos[t].desc;t=this.photos[t].title;e&&"undefined"!=e||t&&"undefined"!=t?(this.titleBox.html(""),this.descSwiper.html(""),this.textBox.css({display:"block",bottom:"0"}),this.upIcon.find("div").css({top:"12px","border-width":"8px 5px 0px","border-color":"rgb(255, 255, 255) transparent transparent"}),t&&"undefined"!=t&&this.titleBox.html(t),e&&"undefined"!=e&&this.descSwiper.html(e)):this.textBox.css({display:"none"});this.img.on("load",function(){this.imgWidth=this.img[0].naturalWidth;this.imgHeight=this.img[0].naturalHeight;this.changeZoomImg(this.img);this.resizeImage();this.loadingImage.css("display","none");e&&this.descBox.refreshData&&this.descBox.refreshData()}.bind(this));this.img.attr("src",i)}},getSizeConfig:function(){var t=this.windowWidth-20,i=this.windowHeight-20,e=this.imgWidth,o=this.imgHeight;e>t&&(o*=t/e,e=t);o>i&&(e*=i/o,o=i);return{width:e,height:o}},resizeImage:function(){var t=this.getSizeConfig(),i=t.width,t=t.height;this.img.css({width:i+"px",height:t+"px"});this.isZoom&&this.img.css({width:this.img.parameters.width*this.img.parameters.scale+"px",height:this.img.parameters.height*this.img.parameters.scale+"px"});this.boxWidth!=i||this.boxHeight!=t?(this.insetBox.css({width:i+8+"px",height:t+8+"px"}),this.insetBox.css({left:(windowWidth-(i+8))/2+"px",top:(windowHeight-(t+8))/2+"px"}),this.insetBox.append(this.img),this.loadingImage.css({left:(i+8-this.loadingImageWidth)/2,top:(t+8-this.loadingImageHeight)/2})):this.insetBox.append(this.img);this.boxWidth=i;this.boxHeight=t;this.img.css({left:"4px",top:"4px"});this.closeButton.setButtonPosition((this.windowWidth-i)/2+i-25,(this.windowHeight-t)/2+5);this.closeButton.setCSS({display:"block"})},setTrans:function(t){t||(t=1);var i=(this.windowWidth-this.boxWidth*t)/2+this.boxWidth*t-25,e=(this.windowHeight-this.boxHeight*t)/2+5;i>this.windowWidth-40&&(i=this.windowWidth-40);15>e&&(e=15);this.closeButton.setButtonPosition(i,e);this.insetBox.css({"-webkit-transform":"scale("+t+")","-o-transform":"scale("+t+")","-ms-transform":"scale("+t+")","-moz-transform":"scale("+t+")",transform:"scale("+t+")"})},hide:function(){animateOnce(this.insetBox,{"-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)"},300,function(){this.closeButton.remove();this.leftBar.remove();this.rightBar.remove();this.destroy()}.bind(this));this.dScale=1;this.resizeTimer&&this.resizeTimer.stop()},onResize:function(){!this.imgWidth||this.windowWidth==windowWidth&&this.windowHeight==windowHeight||(this.windowWidth=windowWidth,this.windowHeight=windowHeight,this.textBox.css({width:windowWidth-30+"px"}),this.resizeImage(),this.rightBar.css({top:(this.windowHeight-100)/2+"px"}),this.leftBar.css({top:(this.windowHeight-100)/2+"px"}),this.dScale=1)}}).extend("PageItemModalPopup");Class("WindowZoomBox",{Package:"PageItem",create:function(t){this.parent=t;this.visible=!0;this.pageScale=1;this.initHtml();this.initCss();this.initEvent()},initHtml:function(){this.popZoom=$("<div class='popZoom'></div>");this.canvas=$("<canvas width='400' height='300'></canvas>");this.close=$("<img src='"+uiBaseURL+"photoGallery_close.png' />");this.popZoom.append(this.canvas).append(this.close);tmpContainer.append(this.popZoom)},initCss:function(){(isPhone()||isPad())&&this.close.css({display:"none"});this.close.css({cursor:"pointer",position:"absolute",right:"0",top:"0","z-index":1002});this.popZoom.css({background:"rgba(0,0,0,0.5)",position:"absolute",display:"none","z-index":"1000",top:0,bottom:0,left:0,right:0});this.canvas.css({"transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","-moz-transform-origin":"0 0","-webkit-transform-origin":"0 0",border:"1px solid #bbb","box-shadow":"0 0 3px #bbb","-ms-box-shadow":"0 0 3px #bbb","-moz-box-shadow":"0 0 3px #bbb","-webkit-box-shadow":"0 0 3px #bbb",position:"absolute","z-index":"1001","background-color":"#fff",width:"400px",height:"300px",cursor:"url("+uiBaseURL+"catalog_zoomout.png),auto"})},onResize:function(){if(!this.visible){var t=this.getPos(),t=this.getAnimatCss(t.x,t.y,this.getScale());this.canvas.css(t)}},drawBg:function(t,i,e,o){this.config=i;this.elemHeight=e.elemHeight;this.elemWidth=e.elemWidth;this.pageW=e.pageWidth;this.pageH=e.pageHeight;this.point=o;this.ctx=this.canvas[0].getContext("2d");fillImageAfterLoaded(t,"normal",this.setImage.bind(this))},setImage:function(t,i,e,o){e=$("<img style='position:absolute;left:0;top:0;' src = '"+t+"' />");e.on("load",function(){this.afterLoadEvent(e[0],e[0].naturalWidth,e[0].naturalHeight,o)}.bind(this))},setPageScale:function(t){this.pageScale=t||1},initEvent:function(){this.close.bind(_event._click,function(t){t.stopPropagation();this.hide()}.bind(this));this.popZoom.bind(_event._click,function(t){t.stopPropagation();this.hide()}.bind(this))},getBgSize:function(t,i){var e=this.pageW/this.pageH,o=t/i,s=0,n=0;e<o?(s=this.pageW,n=i*this.pageW/t):e>=o&&(s=t*this.pageH/i,n=this.pageH);return{width:s,height:n,wRadio:s/this.pageW,hRadio:n/this.pageH}},getShowSize:function(t,i){var e=this.getBgSize(t,i),o=parseFloat(this.config.x),s=parseFloat(this.config.y),n=parseFloat(this.config.height),h=parseFloat(this.config.width),a=n,r=h;if(1==e.wRadio){var l=0,e=.5-e.hRadio/2;s<e&&(a-=e-s);s+n>1-e&&(a-=e-1+s+n);s=s>e&&s+n>1-e?1-a/(1-2*e):(s-e)/(1-2*e)}else l=.5-e.wRadio/2,o+h>1-l&&(r-=l-1+h+o),o<l&&(r-=l-o),o=o>l&&o+h>1-l?1-r/(1-2*l):(o-l)/(1-2*l);return{x:o,y:s}},afterLoadEvent:function(t,i,e,o){var s=this.getBgSize(i,e),n=this.getShowSize(i,e);this.width=Math.ceil(i*this.config.width);this.height=Math.ceil(e*this.config.height);this.drawWidth=Math.ceil(i*this.config.width);this.drawHeight=Math.ceil(e*this.config.height);var h=i*this.config.x,a=e*this.config.y,r=i/e,l=this.pageW/this.pageH,g=this.elemWidth/this.elemHeight;this.ctx.beginPath();this.getScale();var d=this.elemWidth/this.width;this.pageScale&&(d*=this.pageScale);PageInfo.pageIsStrech(o)||(h=i*n.x,a=e*n.y,1==s.wRadio?this.drawHeight=this.width/g:this.drawWidth=this.height*g);.01<=l-r?this.width=this.height*g:-.01>=l-r&&(this.height=this.width/g);this.canvas.css({width:this.width+"px",height:this.height+"px"});this.canvas[0].width=this.width;this.canvas[0].height=this.height;this.canvas.css(this.getAnimatCss(this.point.left,this.point.top,d));this.ctx.drawImage(t,h,a,this.drawWidth,this.drawHeight,0,0,this.width,this.height);this.ctx.closePath();this.show()},getPos:function(){var t=0,i=0,e=this.getScale();windowWidth>this.width*e&&(t=(windowWidth-this.width*e)/2);windowHeight>this.height*e&&(i=(windowHeight-this.height*e)/2);return{x:t,y:i}},getScale:function(){var t=(this.width+2)/(this.height+2),i=windowWidth/windowHeight,e=1;t>i&&this.width+2>windowWidth&&(e=windowWidth/(this.width+2));t<i&&this.height+2>windowHeight&&(e=windowHeight/(this.height+2));return e},getAnimatCss:function(t,i,e){return{transform:"translate("+t+"px,"+i+"px) scale("+e+")","-webkit-transform":"translate("+t+"px,"+i+"px) scale("+e+")","-o-transform":"translate("+t+"px,"+i+"px) scale("+e+")","-moz-transform":"translate("+t+"px,"+i+"px) scale("+e+")","-ms-transform":"translate("+t+"px,"+i+"px) scale("+e+")"}},show:function(){if(!this.timer){this.visible=!1;this.popZoom.css({display:"block"});var t=this.getPos(),i=this.getAnimatCss(t.x,t.y,this.getScale());setTimeout(function(){this.timer=!0;animateOnce(this.canvas,i,.2,function(){this.timer=!1}.bind(this))}.bind(this),100)}},hide:function(){if(!this.timer){this.visible=this.timer=!0;var t=this.getAnimatCss(this.point.left,this.point.top,this.pageScale*this.elemWidth/this.width);animateOnce(this.canvas,t,.2,function(){this.timer=!1;this.popZoom.css({display:"none"})}.bind(this))}}});Class("WindowZoom",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o,s);this.parent=t;this.pageWidth=e;this.pageHeight=o;this.id=s;this.initConfig();this.initHtml();this.initCss();this.initEvent()},initHtml:function(){this.zoomDiv=$("<div class='zoomDiv flip-action'></div>");this.parent.append(this.zoomDiv)},initConfig:function(){this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha||1,overAlpha:t.overAlpha||1,borderColor:t.borderColor,overColor:t.overColor,borderWidth:t.barderWidth}},initEvent:function(){this.zoomDiv.bind("click",function(){global.popZoomBox.visible?(global.popZoomBox.drawBg(this.id,this.config,{elemWidth:this.width,elemHeight:this.height,pageWidth:this.pageWidth,pageHeight:this.pageHeight},this.zoomDiv.offset()),global.popZoomBox.setPageScale(getTransformScale(this.parent[0])*BookInfo.scale())):global.popZoomBox.hide()}.bind(this));this.zoomDiv.bind("mouseenter",function(){this.zoomDiv.css({"background-color":Color(this.config.overColor).rgba(this.config.overAlpha)})}.bind(this));this.zoomDiv.bind("mouseleave",function(){this.zoomDiv.css({"background-color":"transparent"})}.bind(this))},setPageBgImage:function(t,i,e){this.bgImageWidth=t;this.bgImageHeight=i;this.pageIsStrech=e},initCss:function(){this.zoomDiv.css({"z-index":"100","background-color":"transparent",opacity:this.config.alpha,position:"absolute",width:this.width+"px",height:this.height+"px",left:this.x+"px",top:this.y+"px",cursor:"url("+uiBaseURL+"catalog_zoomin.png),auto"})},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.initConfig();this.setPosition(this.x,this.y);this.zoomDiv.css({width:this.width+"px",height:this.height+"px"})},setPosition:function(t,i){this.zoomDiv.css({left:t+"px",top:i+"px"})}}).extend("Item");Class("PhoneVideoBox",{create:function(t){this.visible=!1;this.background=$("<div class='phoneVideoBox' style='width:100%;height:100%;z-index:101;position:absolute;top:0;'></div>");this.videoBac=$("<div style='width:100%;height:100%;background-color:rgba(0,0,0,0.8);'></div>");this.closeButton=$("<img style='width:18px;height:18px;position:absolute;cursor:pointer;right:10px;top:10px;' src='"+uiBaseURL+"close.png'/>");this.background.append(this.closeButton);this.background.append(this.videoBac);t.append(this.background);this.background.css({display:"none"});this.initEvent()},initEvent:function(){this.background.bind(_event._click,function(t){t.stopPropagation();this.hide()}.bind(this));this.closeButton.bind("mouseenter",function(){this.closeButton.css({opacity:"0.7"})}.bind(this));this.closeButton.bind("mouseleave",function(){this.closeButton.css({opacity:"1"})}.bind(this))},setCurrentVideo:function(t){t&&(this.video=t,this.background.append(t))},onResize:function(t,i){this.videoFrame&&this.visible&&this.videoFrame.pauseBackgroundSound()},hide:function(){this.visible=!1;this.timer||(this.videoFrame.pause(),this.timer=setTimeout(function(){this.background.css({display:"none"});this.background.find("video").remove();clearTimeout(this.timer);this.timer=null}.bind(this),200))},popup:function(t,i){!this.timer&&i&&(this.timer=!0,this.videoFrame=t,this.visible=!0,this.setCurrentVideo(i),setTimeout(function(){this.timer=!1;this.background.css({display:"block"})}.bind(this),200))}});Class("PhoneVideo",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.playCount=0;this.videoWidth=Math.min(574,windowWidth-4);this.videoHeight=Math.min(460,windowHeight-4);this.videoLeft=(windowWidth-this.videoWidth-4)/2;this.videoTop=(windowHeight-this.videoHeight-4)/2;this.config.imgURL=this.fixRelativePath(this.config.imgURL);bookConfig.useTheAliCloudChart&&this.config.imgURL&&(this.config.imgURL=this.getOssUrl(this.config.imgURL,this.width,this.height,"fixed"));this.config.videoURL=this.fixRelativePath(this.config.videoURL);this.videoImage=$("<div class='flip-action' style='position: absolute;cursor:pointer;opacity:"+this.config.alpha+"; left:"+this.left+"px; top:"+this.top+"px; width:"+this.width+"px;height:"+this.height+"px;'></div>");this.videoFrame=new Media($("<video src='"+this.config.videoURL+"' webkit-playsinline='true' playsinline='true' controls></video>"),"video");this.videoFrame.setCss({position:"absolute",background:"#000",width:this.videoWidth+"px",height:this.videoHeight+"px",left:this.videoLeft+"px",top:this.videoTop+"px","object-fit":"contain","z-index":1e3});this.config.imgURL?(this.imageDiv=$("<img src='"+this.config.imgURL+"' style='position: absolute;width:100%;height:100%;border:1px solid #bbb;'/>"),this.videoImage.append(this.imageDiv)):this.videoImage.css({"background-color":"rgba(255,255,255,1)",border:"2px solid #bbb"});this.playImg=$("<img src='"+uiBaseURL+"play.png' style='position:absolute;margin:auto;left:0px;top:0px;bottom:0px;right:0px;width:56px;height:56px'/>");this.videoImage.append(this.playImg);this.setRotation(this.videoImage,this.config.rotation);t.append(this.videoImage);this.initEvent()},parseConfig:function(t){var i={width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,previewSrc:t.previewURL,moviePlayTriggerEvt:t.moviePlayTriggerEvt,movieStopTriggerEvt:t.movieStopTriggerEvt,replayWhenPlayEventTrigger:t.replayWhenPlayEventTrigger,animation:t.animation};t.H5PlaybackNumber&&(i.H5PlaybackNumber=parseInt(t.H5PlaybackNumber));t.H5Replay&&(i.H5Replay=parseBool(t.H5Replay));t.componentData?(i.videoURL=t.componentData.videoURL,i.imgURL=t.componentData.imgURL||t.componentData.previewURL,i.pageViewed=parseBool(t.componentData.pageViewed)):(i.videoURL=t.url||t.videoURL||"",i.imgURL=t.previewURL||t.previewUrl||"",i.pageViewed="EVT_PageViewed"==t.moviePlayTriggerEvt?!0:!1);return i},initEvent:function(){this.videoFrame.$media.bind("touchstart touchend",function(t){t.stopPropagation()}.bind(this));this.videoImage.bind(_event._down,function(t){t.stopPropagation()}.bind(this));this.videoImage.bind(_event._end,function(t){t.stopPropagation();this.showOrHide()}.bind(this));0>this.config.H5PlaybackNumber&&this.videoFrame.$media.attr("loop","loop");0<this.config.H5PlaybackNumber&&this.videoFrame.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.play()}.bind(this));this.videoFrame.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.videoWidth=Math.min(480,windowWidth)-4;this.videoHeight=9*this.videoWidth/16;this.videoHeight=Math.min(this.videoHeight,windowHeight);this.videoLeft=(windowWidth-this.videoWidth)/2-2;this.videoTop=(windowHeight-this.videoHeight)/2-2;this.videoFrame.setCss({width:this.videoWidth+"px",height:this.videoHeight+"px",top:this.videoTop+"px",left:this.videoLeft+"px"});this.videoImage.css({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.left,this.top)},setPosition:function(t,i){this.videoImage.css({top:i+"px",left:t+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd();this.videoImage.css({animation:"flip 1s ease 0s 1 normal"});this.videoImage.one(t,function(){this.videoImage.css({animation:""})}.bind(this))}},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},showOrHide:function(){!1==global.phoneVideoBox.visible?this.popup():this.hideVideo()},setCurrentTime:function(t){this.videoFrame.setCurrentTime(t)},hideVideo:function(){this.videoFrame.$media.unbind(_event._click);global.phoneVideoBox.hide()},popup:function(){global.phoneVideoBox.popup(this.videoFrame,this.videoFrame.$media);this.videoFrame.$media.bind(_event._click,function(t){t.stopPropagation()}.bind(this));this.playVideo()},playVideo:function(){this.videoFrame.play()},pauseVideo:function(){this.videoFrame.pause()},stopVideo:function(){this.pauseVideo()}}).extend("Item");Class("HotSpots",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.opacity=this.config.alpha;this.config.hotSpotsURL=this.fixRelativePath(this.config.hotSpotsURL);this.container=$("<div></div>");this.parent.append(this.container);this.setCss();this.initEvent();this.initLinkHint(this.container);this.createHotspot();this.onResize(e,o)},setCss:function(){this.container.css({position:"absolute",opacity:this.opacity,"z-index":101,cursor:"hand"});this.setRotation(this.container,this.config.rotation)},createHotspot:function(){this.isSuportCanvas()?this.hotspot=new this.CanvasHotspotsContent(this.container,this.config.hotSpotsURL):this.hotspot=$.browser.device==$.browser.DEVICE_PC?new this.FlashHotspotsContent(this.container,this.config.hotSpotsURL):new this.HTMLHotspotsContent(this.container,this.config.hotSpotsURL)},isSuportCanvas:function(){var t=this.getClass();if(void 0==t.suportCanvasFlag){var i=$("<canvas></canvas>");t.suportCanvasFlag=i[0]&&i[0].getContext?!0:!1}return t.suportCanvasFlag},parseConfig:function(t){return{width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,hint:t.hint,alpha:t.alpha,hotSpotsURL:t.hotSpotsURL,hintColor:t.hint.hintShapeColor2,hintShapeAlpha:t.hint.hintShapeAlpha,hintShapeType:t.hint.hintShapeType,text:t.hint.text,action:t.action,animation:t.animation}},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.container.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.hotspot.onResize();this.resizeHint()},setPosition:function(){this.container.css({left:this.left+"px",top:this.top+"px"})},initEvent:function(){this.addActionEvent(this.container);this.container.bind(_event._down,function(t){t.stopPropagation();bookConfig.googleAnalyticsID&&ga("send","event","hotspot","click","Page"+BookInfo.getCurrentPages()[0])}.bind(this))},play:function(){this.hotspot&&this.hotspot.start()},pause:function(){this.hotspot&&this.hotspot.stop()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}},destroy:function(){this.hotspot.destroy()}}).extend(PageItem.Item);Class("HotspotsContent",{Package:"PageItem",create:function(t,i){this.container=t;this.src=i;this.init()},init:virtual_function,onResize:virtual_function,start:virtual_function,stop:virtual_function,destroy:virtual_function});Class("HTMLHotspotsContent",{Package:"PageItem",init:function(){this.frameIndex=1;this.frameCount=60;this.center=$("<div></div>");this.ring=$("<div></div>");this.container.append(this.center);this.container.append(this.ring);this.initStyle(this.center);this.initStyle(this.ring);this.onResize()},initStyle:function(t){t.css({position:"absolute",cursor:"hand","pointer-events":"none",left:"0",top:"0",bottom:"0",right:"0",margin:"auto"})},onResize:function(){this.width=this.container.width();this.height=this.container.height();this.spotWidth=Math.min(this.width,this.height);this.center.css({"background-color":"red",width:this.spotWidth/3+"px",height:this.spotWidth/3+"px","border-radius":this.spotWidth/6+"px"});this.borderWidth=this.spotWidth/20;this.ring.css({border:this.borderWidth+"px solid red",opacity:1});this.draw()},draw:function(){var t=this.spotWidth/3,t=t+this.frameIndex/this.frameCount*(this.spotWidth-t-this.borderWidth);this.ring.css({width:t+"px",height:t+"px","border-radius":(t+this.borderWidth)/2+"px",opacity:(this.frameCount-this.frameIndex)/this.frameCount})},start:function(){this.stop();this.timer=this.animate()},stop:function(){this.timer&&this.timer.stop()},animate:function(){return function(t,i){this.frameIndex=t;this.frameCount=i;this.draw();this.frameIndex==this.frameCount&&(this.timer=this.animate())}.animation(this,1e3)},destroy:function(){this.stop();this.center.remove();this.ring.remove()}}).extend("HotspotsContent");Class("FlashHotspotsContent",{Package:"PageItem",init:function(){},onResize:function(){this.width=this.container.width();this.height=this.container.height();this.container.flash().remove();this.container.flash({swf:this.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"})},draw:function(){},start:function(){},stop:function(){},animate:function(){},destroy:function(){this.container.flash().remove()}}).extend("HotspotsContent");Class("CanvasHotspotsContent",{Package:"PageItem",init:function(){this.frameIndex=1;this.frameCount=60;this.canvas=$("<canvas></canvas>");this.container.append(this.canvas);this.initStyle(this.canvas);this.createDrawer();this.onResize()},initStyle:function(t){t.css({position:"absolute",cursor:"hand","pointer-events":"none",left:"0",top:"0",bottom:"0",right:"0",margin:"auto"})},isSWF:function(t){t=t.toLowerCase();var i=this.src.lastIndexOf("/");-1==i&&(i=this.src.lastIndexOf("\\"));var e=this.src.lastIndexOf(".");return(i=this.src.substring(i+1,e))?(i=i.toLowerCase(),i==t):!1},createDrawer:function(){var t=this.canvas[0].getContext("2d");this.drawer=null;this.isSWF("Black Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(t,"black"));this.isSWF("Black Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(t,"black"));this.isSWF("Black Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(t,"black","#00F1FF"));this.isSWF("Black Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(t,"black"));this.isSWF("Black Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(t,"black"));this.isSWF("Black Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(t,"black"));this.isSWF("Black Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(t,"black"));this.isSWF("Black Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(t,"black"));this.isSWF("BlackTwo Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(t,"black"));this.isSWF("Blue Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(t,"#0033FF"));this.isSWF("Blue Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(t,"#0033FF"));this.isSWF("Blue Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(t,"#0033FF","#00F1FF"));this.isSWF("Blue Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(t,"#05338E","#0561BC"));this.isSWF("Blue Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(t,"#0033FF"));this.isSWF("Blue Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(t,"#0033FF"));this.isSWF("Blue Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(t,"#0033FF"));this.isSWF("Blue Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(t,"#0044EE"));this.isSWF("Blue Star")&&(this.drawer=new this.RectsHotSpotsDrawer(t,"#3364C5"));this.isSWF("Blue Two Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(t,"#0033FF"));this.isSWF("Blue_doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(t,"#3B89FF"));this.isSWF("Default Animation")&&(this.drawer=new this.RectsHotSpotsDrawer(t,"#3364C5"));this.isSWF("Green Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(t,"#009900"));this.isSWF("Green Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(t,"#009900"));this.isSWF("Green Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(t,"#039303","#03F503"));this.isSWF("Green Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(t,"#009900"));this.isSWF("Green Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(t,"green"));this.isSWF("Green Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(t,"#009900"));this.isSWF("Green Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(t,"#009900"));this.isSWF("Green Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(t,"#009900"));this.isSWF("Green Star")&&(this.drawer=new this.RectsHotSpotsDrawer(t,"#669900"));this.isSWF("Green Two Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(t,"#009900"));this.isSWF("Green Doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(t,"#00DAB7"));this.isSWF("Orange Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(t,"#CA7000","#F98C00"));this.isSWF("Red Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(t,"red"));this.isSWF("Red Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(t,"red"));this.isSWF("Red Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(t,"red","yellow","#CA7000"));this.isSWF("Red Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(t,"red"));this.isSWF("Red Doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(t,"#E58585"));this.isSWF("Red Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(t,"red","#FBBC00"));this.isSWF("Red Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(t,"red"));this.isSWF("Red Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(t,"red"));this.isSWF("Red Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(t,"red"));this.isSWF("Red Star")&&(this.drawer=new this.RectsHotSpotsDrawer(t,"red"));this.isSWF("Red Two Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(t,"red"));this.isSWF("Yellow Squre")&&(this.drawer=new this.SquareHotSpotsDrawer(t,"red","#FBBC00"));this.isSWF("Yellow Start Blink")&&(this.drawer=new this.SquareStarHotSpotsDrawer(t,"#FBBC00","#FF9900","#DAE405"));this.isSWF("yellow_doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(t,"#FFD56B"));this.drawer||(this.drawer=new this.RingHotSpotsDrawer(t,"red"))},onResize:function(){this.width=.85*this.container.width();this.height=.85*this.container.height();this.canvas.attr("width",this.width);this.canvas.attr("height",this.height);this.drawer&&(this.drawer.resize(this.width,this.height),this.draw())},draw:function(){this.drawer&&this.drawer.draw(this.frameIndex,this.frameCount)},start:function(){this.stop();this.timer=this.animate()},animate:function(){return function(t,i){this.frameIndex=t;this.frameCount=i;this.draw();this.frameIndex==this.frameCount&&(this.timer=this.animate())}.animation(this,1e3)},stop:function(){this.timer&&this.timer.stop()},destroy:function(){this.stop();this.canvas.remove()}}).extend("HotspotsContent");Class("HotSpotsDrawer",{Package:"PageItem",create:function(t,i){this.context=t;this.color=Color(i)},resize:function(t,i){this.width=t;this.height=i},rectInCenter:function(t,i){void 0==i&&(i=t);return{left:(this.width-t)/2,top:(this.height-i)/2,width:t,height:i}},draw:virtual_function,clear:function(){this.context.clearRect(0,0,this.width,this.height)},drawStar:function(t,i,e,o){var s=this.context;if(t){i||(i="#FFFF00");e||(e={width:0,color:"#FFFFFF"});void 0==o&&(o=0);var n=Math.min(t.width,t.height)/2,h=.4*n,a=t.left;t=t.top;s.save();s.translate(a+n,t+n);s.rotate(o*Math.PI/180);s.beginPath();s.moveTo(Math.cos(.1*Math.PI)*n,-Math.sin(.1*Math.PI)*n);for(o=0;5>o;o++)s.lineTo(Math.cos((18+72*o)/180*Math.PI)*n,-Math.sin((18+72*o)/180*Math.PI)*n),s.lineTo(Math.cos((54+72*o)/180*Math.PI)*h,-Math.sin((54+72*o)/180*Math.PI)*h);s.closePath();s.fillStyle=i;s.fill();s.lineWidth=e.width;s.strokeStyle=e.color;0<e.width&&s.stroke();s.restore()}},drawTriangle:function(t,i,e){var o=this.context;t&&(i||(i="#000000"),e||(e={width:0,color:"#FFFFFF"}),o.save(),o.translate(t.left,t.top),o.beginPath(),o.moveTo(t.width/2,0),o.lineTo(0,t.height),o.lineTo(t.width,t.height),o.closePath(),o.fillStyle=i,o.fill(),o.lineWidth=e.width,o.strokeStyle=e.color,0<e.width&&o.stroke(),o.restore())},drawArrow:function(t,i,e,o){var s=this.context;t&&(i||(i="#000000"),e||(e={width:0,color:"#FFFFFF"}),o=o?parseFloat(o):.2,s.save(),s.translate(t.left,t.top),s.beginPath(),s.moveTo(t.width/2,0),s.lineTo(0,t.height),s.lineTo(t.width/2,t.height*(1-o)),s.lineTo(t.width,t.height),s.closePath(),s.fillStyle=i,s.fill(),s.lineWidth=e.width,s.strokeStyle=e.color,0<e.width&&s.stroke(),s.restore())},drawMouse:function(t,i,e){var o=this.context;if(t){i||(i="#FFFFBB");e||(e={width:1,color:"#000000"});var s=.6*t.height,n=t.width/2;o.save();o.translate(t.left+n,t.top);o.rotate(-15*Math.PI/180);o.shadowBlur=Math.ceil(.2*t.width);o.shadowColor="rgba(0, 0, 0, 0.3)";o.shadowOffsetX=Math.ceil(.1*t.width);o.shadowOffsetY=Math.ceil(.1*t.width);o.beginPath();o.moveTo(t.width/2-n,0);o.lineTo(-n,s);o.lineTo(.38*t.width-n,.9*s);o.lineTo(.38*t.width-n,t.height);o.lineTo(.62*t.width-n,t.height);o.lineTo(.62*t.width-n,.9*s);o.lineTo(t.width-n,s);o.closePath();o.fillStyle=i;o.fill();o.lineWidth=e.width;o.strokeStyle=e.color;0<e.width&&o.stroke();o.restore()}},drawRound:function(t,i,e){var o=this.context;if(t){i||(i="#000000");e||(e={width:0,color:"#FFFFFF"});var s=Math.min(t.width,t.height)/2,n=t.left;t=t.top;o.save();o.beginPath();0>=s&&(s=1);o.arc(n+s,t+s,s,0,2*Math.PI,!0);o.closePath();o.fillStyle=i.toString();o.fill();o.lineWidth=e.width;o.strokeStyle=e.color;0<e.width&&o.stroke();o.restore()}},drawRing:function(t,i){var e=i.width/2;this.drawRound({left:t.left+e,top:t.top+e,width:t.width-i.width,height:t.height-i.width},"transparent",i)},drawRect:function(t,i,e,o){var s=this.context;if(t){i||(i="#000000");e||(e={width:0,color:"#FFFFFF"});o||(o=0);var n=t.width/2,h=t.height/2,a=t.left+n,r=t.top+h;s.save();s.translate(a,r);s.rotate(o*Math.PI/180);s.beginPath();s.rect(-n,-h,t.width,t.height);s.closePath();s.fillStyle=i;s.fill();s.lineWidth=e.width;s.strokeStyle=e.color;0<e.width&&s.stroke();s.restore()}},drawRoundRect:function(t,i,e,o,s){var n=this.context;if(t){e||(e="#000000");o||(o={width:0,color:"#FFFFFF"});s||(s=0);var h=t.width/2,a=t.height/2,r=t.left+h,l=t.top+a;n.save();n.translate(r,l);n.rotate(s*Math.PI/180);t=Math.min(t.width,t.height)/2;i=Math.min(i,t);n.beginPath();n.moveTo(-h+i,-a);n.arcTo(h,-a,h,a,i);n.arcTo(h,a,-h,a,i);n.arcTo(-h,a,-h,-a,i);n.arcTo(-h,-a,h,-a,i);n.closePath();n.fillStyle=e;n.fill();n.lineWidth=o.width;n.strokeStyle=o.color;0<o.width&&n.stroke();n.restore()}},drawSquareStar:function(t,i,e){var o=this.context;if(t){i||(i="#000000");e||(e=0);var s=t.left+t.width/2,n=t.top+t.height/2,h=t.width,a=t.height,r=Math.PI/180,l=t.width*Math.cos(30*r),g=t.height*Math.cos(30*r);o.save();o.translate(s,n);o.rotate(e*Math.PI/180);o.beginPath();o.arc(0,-t.height/2-l,h,60*r,120*r,!1);o.arc(t.width/2+g,0,a,150*r,210*r,!1);o.arc(0,t.height/2+l,h,240*r,300*r,!1);o.arc(-t.width/2-g,0,a,-30*r,30*r,!1);o.closePath();o.fillStyle=i;o.fill();o.restore()}}});Class("HotSpotsHandImageData",{Package:"PageItem",create:function(t,i){this.dock=t;this.src=i;this.init()},init:function(){this.dock.hand||(this.dock.hand=$("<img></img>"),this.dock.hand.attr("src",this.src));this.data=this.dock.hand},getImage:function(){if(!this.data)return null;var t=this.data[0];return 0==t.naturalWidth?null:t},draw:function(t,i,e){if(t&&i){void 0==e&&(e=1);var o=this.getImage();if(o){var s=o.naturalWidth,n=o.naturalHeight;t.globalAlpha=e;t.drawImage(o,0,0,s,n,i.left,i.top,i.width,i.height);t.globalAlpha=1}}}});Class("RingHotSpotsDrawer",{Package:"PageItem",draw:function(t,i){if(this.width&&this.height){this.clear();var e=Math.min(this.width,this.height),o=e/3,s=e/16,n=this.rectInCenter(o);this.drawRound(n,this.color);s={width:s,color:this.color.rgba((i-t)/i)};e=this.rectInCenter(o+(e-o)*t/i);this.drawRing(e,s)}}}).extend("HotSpotsDrawer");Class("StarHotSpotsDrawer",{Package:"PageItem",draw:function(t,i){if(this.width&&this.height){this.clear();this._super(t,i);var e=Math.min(this.width,this.height)/3,e=this.rectInCenter(e),o=Math.ceil(t/i*360);this.drawStar(e,"#FFFF00",null,o)}}}).extend("RingHotSpotsDrawer");Class("MouseHotSpotsDrawer",{Package:"PageItem",draw:function(t,i){if(this.width&&this.height){this.clear();this._super(t,i);var e=Math.min(this.width,this.height),o=e/4;this.drawMouse({left:(this.width-o)/2,top:this.height/2,width:o,height:2*e/5})}}}).extend("RingHotSpotsDrawer");Class("RoundHotSpotsDrawer",{Package:"PageItem",create:function(t,i,e){this.context=t;this.color=Color(i);this.centerColor=e?Color(e):this.color.add(70)},draw:function(t,i){if(this.width&&this.height){this.clear();var e=Math.min(this.width,this.height),o=e/3,s=this.rectInCenter(o+(e-o)*t/i),e=this.color.rgba((i-t)/i);this.drawRound(s,e);var s=this.rectInCenter(o);this.drawRound(s,this.centerColor.toString())}}}).extend("HotSpotsDrawer");Class("RotateHotSpotsDrawer",{Package:"PageItem",draw:function(t,i){if(this.width&&this.height){this.clear();var e=Math.min(this.width,this.height),o={width:e/8,color:this.color.toString()},s=this.rectInCenter(7*e/8);this.drawRing(s,o);var o=e/4,s=e/4,n=(this.height-s)/2,e={left:0,top:n,width:o,height:s},h=Math.floor(1.1*s),o={left:0,top:n-Math.ceil(.1*s),width:o,height:h},s=Math.ceil(360*t/i);this.context.save();this.context.translate(this.width/2,this.height/2);this.context.rotate(s*Math.PI/180);e.left-=this.width/2;e.top-=this.height/2;o.left-=this.width/2;o.top-=this.height/2;this.drawTriangle(o,"#FFFFFF");this.drawTriangle(e,this.color.toString());this.drawTriangle();this.context.restore()}}}).extend("HotSpotsDrawer");Class("RotateRingHotSpotsDrawer",{Package:"PageItem",draw:function(t,i){if(this.width&&this.height){this.clear();this._super(t,i);var e=Math.min(this.width,this.height)/3,e=this.rectInCenter(e);this.drawRound(e,this.color.toString())}}}).extend("RotateHotSpotsDrawer");Class("RotateHandHotSpotsDrawer",{Package:"PageItem",create:function(t,i){this._super(t,i);this.initHand()},initHand:function(){this.imageData=new this.HotSpotsHandImageData(this.getClass(),uiBaseURL+"hotspot_hand.png")},draw:function(t,i){if(this.width&&this.height){this.clear();this._super(t,i);var e=Math.min(this.width,this.height),e=this.rectInCenter(e/3,e/2);this.imageData.draw(this.context,e)}}}).extend("RotateHotSpotsDrawer");Class("BlinkerHotSpotsDrawer",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i);this.lightColor=e?Color(e):Color(this.color.add(70));this.ringColor=o?Color(o):this.color;this.colorDiff=this.color.difference(this.lightColor);this.frameColorDiff={}},draw:function(t,i){if(this.width&&this.height){this.clear();var e=Math.min(this.width,this.height),o=t,s=Math.ceil(i/2);o<s?(o/=s,this.frameColorDiff.r=Math.ceil(this.colorDiff.r*o),this.frameColorDiff.g=Math.ceil(this.colorDiff.g*o),this.frameColorDiff.b=Math.ceil(this.colorDiff.b*o)):(o=(o-s)/s,this.frameColorDiff.r=this.colorDiff.r-Math.ceil(this.colorDiff.r*o),this.frameColorDiff.g=this.colorDiff.g-Math.ceil(this.colorDiff.g*o),this.frameColorDiff.b=this.colorDiff.b-Math.ceil(this.colorDiff.b*o));o=this.color.add(this.frameColorDiff);s=this.rectInCenter(e/2);this.drawRound(s,o);o=this.rectInCenter(e);this.drawRing(o,{width:e/8,color:this.ringColor.toString()})}}}).extend("HotSpotsDrawer");Class("ShrinkHotSpotsDrawer",{Package:"PageItem",create:function(t,i,e){this._super(t,i);this.innerColor=e?Color(e):Color(this.color.add(70))},draw:function(t,i){if(this.width&&this.height){this.clear();var e=Math.min(this.width,this.height),o=7*e/8,s=e/4;if(t<i/2){var n=t,h=i/2,s=s+(e-s)*n/h,o=this.rectInCenter(0+(o-0)*n/h),s=this.rectInCenter(s);this.drawRound(o,this.innerColor.toString());this.drawRing(s,{width:e/8,color:this.color.toString()})}else h=i/4,n=t%h,t<3*i/4?(n=1-n/h,o=this.rectInCenter(0+(o-0)*n),s=this.rectInCenter(e),this.drawRound(o,this.innerColor.rgba(n)),this.drawRing(s,{width:e/8,color:this.color.toString()})):(n=1-n/h,s=this.rectInCenter(s+(e-s)*n),this.drawRing(s,{width:e/8,color:this.color.rgba(n)}))}}}).extend("HotSpotsDrawer");Class("RipplesHotSpotsDrawer",{Package:"PageItem",create:function(t,i){this._super(t,i)},draw:function(t,i){if(this.width&&this.height){this.clear();var e=Math.min(this.width,this.height),o=i/2,s=t%o,n=s/o;if(t<i/2){var h=e/5,a=e,r=(a-h)*s/o,l=Math.ceil(e/50),e=Math.ceil(e/16),l=l+(e-l)*s/o,h=this.rectInCenter(h+r),a=this.rectInCenter(a);this.drawRing(h,{width:l,color:this.color.toString()});this.drawRing(a,{width:e,color:this.color.rgba(n)})}else h=e/5,a=e,r=(a-h)*s/o,l=Math.ceil(e/50),e=Math.ceil(e/16),o=(e-l)*s/o,h=this.rectInCenter(h+r),a=this.rectInCenter(a-r),this.drawRing(h,{width:l+o,color:this.color.rgba(1-n)}),this.drawRing(a,{width:e-o,color:this.color.toString()})}}}).extend("HotSpotsDrawer");Class("RectsHotSpotsDrawer",{Package:"PageItem",draw:function(t,i){if(this.width&&this.height){this.clear();for(var e=Math.min(this.width,this.height),o=Math.ceil(360*t/i),s=0;3>s;s++){var n=120*s+o,h=this.rectInCenter(e/6,5*e/6);this.drawRect(h,this.color.rgba(.4),null,n)}for(s=0;3>s;s++)n=120*s-o,h=this.rectInCenter(e/7,2*e/3),this.drawRect(h,this.color.toString(),null,n)}}}).extend("HotSpotsDrawer");Class("SquareHotSpotsDrawer",{Package:"PageItem",create:function(t,i,e){this._super(t,i);this.centerColor=e?Color(e):Color(this.color.add(70))},draw:function(t,i){if(this.width&&this.height){this.clear();var e=Math.min(this.width,this.height),o=e/2,s=e/25,n=this.rectInCenter(o);this.drawRoundRect(n,s,this.centerColor.toString(),{width:s,color:this.color.toString()});n=1-t/i;e=this.rectInCenter(o+(e-s-o)*t/i);this.drawRoundRect(e,s,"transparent",{width:s,color:this.color.rgba(n)})}}}).extend("HotSpotsDrawer");Class("SquareStarHotSpotsDrawer",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i);this.borderColor=e?Color(e):Color(this.color.reduce(70));this.backgroundColor=o?Color(o):this.color},draw:function(t,i){if(this.width&&this.height){this.clear();var e=i/2,o=t%e,s=Math.min(this.width,this.height),n=s/12,h=s/4,a=Math.sqrt(this.width*this.width/4+this.height*this.height/4),r=(s-h)*o/e,e=(a-h)*o/e;t<i/2?(s=this.rectInCenter(h+r),r=this.rectInCenter(a-e),n=this.rectInCenter(a-e-2*n)):(s=this.rectInCenter(s-r),r=this.rectInCenter(h+e),n=this.rectInCenter(h+e-2*n));this.drawSquareStar(s,this.backgroundColor.toString());this.drawSquareStar(r,this.borderColor.toString(),45);this.drawSquareStar(n,this.color.toString(),45)}}}).extend("HotSpotsDrawer");Class("DoughnutHotSpotsDrawer",{Package:"PageItem",create:function(t,i){this._super(t,i);this.initHand()},initHand:function(){this.imageData=new this.HotSpotsHandImageData(this.getClass(),uiBaseURL+"hotspot_hand2.png")},draw:function(t,i){if(this.width&&this.height){this.clear();var e=Math.min(this.width,this.height),o=this.rectInCenter(e/3),s=i/2,s=t%s/s;t>=i/2&&(s=1-s);this.imageData.draw(this.context,o,s);var o=e/6,s=e/12,n=e/48,h=this.rectInCenter(e),a=this.rectInCenter(11*e/12),e=this.rectInCenter(41*e/48),r=Color("white");this.drawRing(h,{width:o,color:this.color.toString()});this.drawRing(a,{width:s,color:r.rgba(.1)});this.drawRing(e,{width:n,color:r.rgba(.2)})}}}).extend("HotSpotsDrawer");function forceFloat(t){t=Number(t).toString();-1==t.indexOf(".")&&(t+=".00");return t}Class("ShoppingCart",{Package:"PageItem",create:function(t,i,e,o){this.config=this.parseConfig(i);this.animateConfig();this.pageWidth=e;this.pageHeight=o;this.bgColor=Color(this.config.bgColor).toString();this.width=Number(this.pageWidth*this.config.width);this.height=Number(this.pageHeight*this.config.height);this.config.imgUrl=this.config.imgUrl;this.config.url=this.config.url;bookConfig.isFlipPdf&&(this.config.imgUrl.startsWith("./")?this.config.imgUrl="."+this.config.imgUrl:this.config.imgUrl.isUrl()||(this.config.imgUrl="../"+this.config.imgUrl));this.background=$("<div></div>");this.img=$("<div></div/>");t.append(this.background);this.background.append(this.img);this.linkOrCart(i,t);this.setLinkCss();this.setPosition();this.initEvent()},parseConfig:function(t){return{annotype:t.annotype,x:t.location.x,y:t.location.y,rotation:t.location.rotation,width:t.location.width,height:t.location.height,bgColor:t.bgColor,bgAlpha:t.bgAlpha,alpha:t.alpha,cartType:t.cartType,imgUrl:t.imgUrl,titleStr:t.titleStr,url:t.url,Detailed:t.Detailed,animation:t.animation}},destroy:function(){this.background.empty();this.background.remove();this.shop&&this.shop.destroy()},linkOrCart:function(t,i){var e="";this.config.url&&(e=this.config.url);!e||e.startsWith("http://")||e.startsWith("https://")||(e="http://"+e);"link"==this.config.cartType?(isTouchDevice()?(this.background=$("<div></div>"),e&&this.background.bind(_event._end,function(){window.location.href=e}.bind(this))):(this.background=$("<a ><div></div></a>"),e&&(this.background.attr("href",e),this.background.attr("target","_blank"))),i.append(this.background),this.background.append(this.img)):isPhone()||isPad()?this.shop=new PageItem.MobileProductDetailsPanel(t,pageEditor.setting,i):this.shop=new PageItem.PCProductDetailsPanel(t,pageEditor.setting,i)},setLinkCss:function(){this.background.css({position:"absolute","background-position":"center",width:this.width+"px",height:this.height+"px","background-color":Color(this.bgColor).rgba(this.config.bgAlpha),opacity:this.config.alpha,"text-decoration":"none",cursor:"default",transform:"rotate("+this.config.rotation+"deg)","-webkit-transform":"rotate("+this.config.rotation+"deg)","-ms-transform":"rotate("+this.config.rotation+"deg)","-o-transform":"rotate("+this.config.rotation+"deg)","-moz-transform":"rotate("+this.config.rotation+"deg)","transform-origin":"50% 50%","-webkit-transform-origin":"50% 50%","-ms-transform-origin":"50% 50%","-o-transform-origin":"50% 50%","-moz-transform-origin":"50% 50%"});bookConfig.useTheAliCloudChart&&(this.config.imgUrl=this.getOssUrl(this.config.imgUrl,2*this.width/3,2*this.height/3,"lfit"));this.img.css({background:"url("+this.config.imgUrl+") center center no-repeat","background-size":"contain",position:"absolute",cursor:"pointer",width:2*this.width/3+"px",height:2*this.height/3+"px",margin:"auto",left:"0",right:"0",top:"0",bottom:"0"})},initEvent:function(){if(!isTouchDevice()){var e=new divHint;this.background.bind(_event._move,function(t){var i;isTouchDevice()?(i=t.originalEvent.touches[0],void 0==i&&(i=t.touches[0])):i=t;$(i.target);t=i.pageX+10;i=i.pageY+10;e.setStyle("hintBackground");e.instance.css({"font-size":"12px",overflow:"hidden"});"link"==this.config.cartType?""!=this.config.titleStr?(this.showtitle=!0,e.setText(this.config.titleStr.overflow(16))):this.config.url&&(this.showtitle=!0,e.setText(this.config.url.overflow(16))):""!=this.config.titleStr?(this.showtitle=!0,e.setText(this.config.titleStr.overflow(16))):this.config.Detailed.title&&(this.showtitle=!0,e.setText(this.config.Detailed.title.overflow(16)));this.showtitle&&(e.moveto(t,i),e.show())}.bind(this));this.background.bind(_event._leave,function(){e.hide();this.showtitle=!1}.bind(this))}this.background.bind(_event._down,function(t){t.stopPropagation();bookConfig.googleAnalyticsID&&ga("send","event","Shopping","click","Page"+BookInfo.getCurrentPages()[0]+" showProductDetail");return!1});this.background.bind(_event._end,function(){this.shop&&this.shop.show();return!1}.bind(this))},show:function(){this.background.css("display","block")},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*t;this.height=this.config.height*i;this.background.css({width:this.width+"px",height:this.height+"px"});this.setLinkCss();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.background.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.background.one(t,function(){this.background.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.background.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);var ShoppingCartUtil={setProductsToStorage:function(t){try{if(window.localStorage){var i=Instance.JSON(t);window.localStorage.setItem("shopping_cart_products",i)}}catch(t){}},getProductsFromStorage:function(){try{if(!window.localStorage)return[];var t=window.localStorage.getItem("shopping_cart_products");return Instance.parse(t,[])}catch(t){return[]}},removeProduct:function(t){for(var i=this.getProductsFromStorage(),e=0;e<i.length;e++)if(i[e].title==t.title){i.remove(e);break}this.setProductsToStorage(i)},addProduct:function(t){for(var i=this.getProductsFromStorage(),e=!0,o=0;o<i.length;o++){var s=i[o];if(s.title==t.title){s.number=t.number+s.number;e=!1;break}}e&&i.push(t);this.setProductsToStorage(i);return i},saveProducts:function(t,i){t||(t=[]);for(var e=[],o=0;o<t.length;o++)e.push(t[o].product);this.setProductsToStorage(e)}};Class("ProductDetailsPanel",{Package:"PageItem",create:function(t,i,e){this.config=this.parseConfig(t);this.setting=i;this.parent=e;this.initUI();this.initEvent()},parseConfig:function(t){return t},destroy:virtual_function,getMailtoInformation:function(t,i,e){var o=e.shoppingCartOptinon.body;t=parseInt(t);var s=forceFloat(i.Detailed.proce),n="",n=!0==parseBool(pageEditor.setting.shoppingCartOptinon.showPrice)?String.format("%0D%0A%0D%0A%0D%0A%s(N1, %d * %s%s = %s%s);%0D%0A%s%s%0D%0A-type in your contacts here-%0D%0A%0D%0A%0D%0A%0D%0A",i.Detailed.title,t,s,i.Detailed.sing,forceFloat(s*t),i.Detailed.sing,forceFloat(s*t),i.Detailed.sing):String.format("%0D%0A%0D%0A%0D%0A%s(N1, %d);%0D%0A%0D%0A-type in your contacts here-%0D%0A%0D%0A%0D%0A%0D%0A",i.Detailed.title,t);-1<o.indexOf("${shopping}")&&(o=o.replaceAll("${shopping}",n,!0));return String.format("mailto:%s?subject=%s&body=%s",e.shoppingCartOptinon.address,e.shoppingCartOptinon.theme,o)},getPaypalInformation:function(t,i,e){},doCheckout:function(){if(!1!=this.canCheckout){var t="",t=this.input.val(),t="Email"==this.setting.shoppingCartOptinon.type?this.getMailtoInformation(t,this.config,this.setting):this.getPaypalInformation(t,this.config,this.setting);window.open(t)}}});Class("ShoppingCartPanel",{Package:"PageItem",getMailtoInformation:function(t,i){if(!this.shoppingItems)return"";for(var e="%0D%0A",o=pageEditor.setting.shoppingCartOptinon.body,s=0,n=parseBool(pageEditor.setting.shoppingCartOptinon.showPrice),h=0;h<this.shoppingItems.length;h++){var a=this.shoppingItems[h];if(void 0==a.isSelected||a.isSelected())var r=forceFloat(a.product.price),e=!0==n?e+String.format("%0D%0A%s(N"+(h+1)+", %d * %s%s = %s%s);%0D%0A",a.product.title,parseInt(a.product.number),r,a.product.sing,forceFloat(r*parseInt(a.product.number)),a.product.sing):e+String.format("%0D%0A%s(N"+(h+1)+", %d);%0D%0A",a.product.title,parseInt(a.product.number)),a=parseFloat(a.product.price*a.cartInput.val()),s=s+a}!0==n&&(e+=String.format("%0D%0A(Total price : %f%s);%0D%0A%0D%0A",s,this.config.Detailed.sing));e+="-type in your contacts here-%0D%0A%0D%0A%0D%0A%0D%0A";-1<o.indexOf("${shopping}")&&(o=o.replaceAll("${shopping}",e,!0));return String.format("mailto:%s?subject=%s&body=%s",pageEditor.setting.shoppingCartOptinon.address,pageEditor.setting.shoppingCartOptinon.theme,o)},getPaypalInformation:function(t,i){},doCheckout:function(){if(!1!=this.canCheckout){var t="",t="Email"==this.setting.shoppingCartOptinon.type?this.getMailtoInformation(this.config,this.setting):this.getPaypalInformation(this.config,this.setting);window.open(t)}},refreshTotalValue:function(){this.shoppingItems||(this.shoppingItems=[]);this.canCheckout=!0;var t=0,i=0;if(0<this.shoppingItems.length){for(var e=0;e<this.shoppingItems.length;e++){var i=this.shoppingItems[e],o=i.product;if(void 0==i.isSelected||i.isSelected())i=parseFloat(o.price*o.number),t+=i,o.number>o.quantity&&(this.canCheckout=!1)}this.total.text(getLanguage("ShappingCart_Total","Total")+" : "+o.sing+t.toFixed(2))}else this.total.text(getLanguage("ShappingCart_Total","Total")+" : 0.00");this.item.text(getLanguage("ShappingCart_Item","Item")+" : "+this.shoppingItems.length)},refreshInputValue:function(){for(var t=ShoppingCartUtil.getProductsFromStorage(),i=0,e=0;e<t.length;e++)i+=t[e].number;return i},removeItem:function(t){ShoppingCartUtil.removeProduct(t.product);t.singleShop.remove();for(var i=0;i<this.shoppingItems.length;i++)if(this.shoppingItems[i]==t){this.shoppingItems.remove(i);break}}});Class("ShoppingCartItem",{});Class("ShoppingAdvancedProperty",{Package:"PageItem",create:function(t){this.config=t;(this.advanced=this.config.Detailed.advanced)&&!this.advanced[0]&&(this.advanced=[this.advanced.list]);this.advanceLength=this.advanced.length;this.shopAdvanced1=$("<div style='width:300px; position:relative; height:25px;margin-top:5px'></div>");this.shopAdvanced2=$("<div style='width:300px; position:relative; height:30px;margin-top:5px'></div>");this.shopAdvanced3=$("<div style='width:300px; position:relative; height:30px;margin-top:5px'></div>");for(t=0;t<this.advanceLength;t++)"list"==this.advanced[t].type&&(this.advanceListValue=this.advanced[t].defaultValue);this.initAdvanced();this.setAdvanceEvent()},initAdvanced:function(){var t=0,i=0,e=0;this.shopSelect=[];for(var o=0;o<this.advanceLength;o++)if(this.shopSelect[o]=[],"boolean"==this.advanced[o].type&&(t+=1,this.shopTypeName=$("<div style='position:absolute;overflow:auto;margin-left:20px;width:auto; top:"+20*(t-1)+"px; height:20px;font-family:Arial; font-size:12px;line-height:20px'>"+this.advanced[o].name+"</div>"),this.checkBox=$("<input type=checkbox  style='position:absolute;margin:0;top:"+(4+20*(t-1))+"px;'/>"),"true"==this.advanced[o].defaultValue&&this.checkBox.attr("checked","checked"),this.shopAdvanced1.append(this.checkBox).append(this.shopTypeName),this.shopAdvanced1.css({height:20*t+"px"})),"text"==this.advanced[o].type&&(i+=1,this.shopTypeName=$("<div style='width:55px;overflow:auto; top:"+(5+30*(i-1))+"px; height:20px;line-height:20px;font-family:Arial;font-size:12px;position:absolute'>"+this.advanced[o].name+":</div>"),this.shopValue=$("<input style='width:200px;position:absolute; top:"+(4+30*(i-1))+"px; left:50px; height:18px;font-family:Arial; font-size:12px;outline:medium' value='"+this.advanced[o].value+"'/>"),this.shopAdvanced2.append(this.shopTypeName).append(this.shopValue),this.shopAdvanced2.css({height:30*i+"px"})),"list"==this.advanced[o].type){var s=[],s=this.advanced[o].value.split(";"),n=0,e=e+1;this.shopTypeName=$("<div style='position:absolute;overflow:auto;width:55px; top:5px; height:20px;line-height:20px;font-family:Arial; font-size:12px'>"+this.advanced[o].name+" :</div>");this.shopAdvanced3.append(this.shopTypeName);for(var h=0;h<s.length;h++)0<h&&0==h%5&&(this.shopAdvanced3.append("<br/><br/>"),top+=30,e+=1,n=0),this.shopTypeName.css({top:3+30*(e-1)+"px"}),n+=40,this.shopSelect[o][h]=$("<div class=borderStyle name="+this.advanced[o].name+" style='overflow:auto;height:20px;min-width:25px;cursor:pointer;font-family:Arial; font-size:12px;border:1px solid black;left:"+n+"px; top:"+(3+30*(e-1))+"px; position:absolute;text-align:center;line-height:20px;padding-left:4px;padding-right:4px'>"+s[h]+"</div>"),this.advanced[o].defaultValue==s[h]&&this.shopSelect[o][h].css("border","2px solid rgb(255,0,0)"),this.shopAdvanced3.append(this.shopSelect[o][h]);this.shopAdvanced3.css({height:30*e+"px"})}},setAdvanceEvent:function(){for(var t=0;t<this.shopSelect.length;t++)for(var i=this.shopSelect[t],e=i.length,o=this,s=0;s<e;s++)i[s].bind(_event._click,function(){for(var t=0;t<o.shopSelect.length;t++)for(j=0;j<o.shopSelect[t].length;j++)o.shopSelect[t][j].attr("name")==$(this).attr("name")&&o.shopSelect[t][j].css("border","1px solid rgb(0,0,0)"),o.shopSelect[t][j][0]==this&&(o.advanced[t].defaultValue=o.shopSelect[t][j][0].innerText,o.shopSelect[t][j].css("border","2px solid rgb(255,0,0)"))})},isCheckBoxSelected:function(){return this.checkBox[0].checked},setShoppingCartAdvanced:function(){var t="";if(0!=this.advanceLength)for(var i=0;i<this.advanceLength;i++)"text"==this.advanced[i].type&&(this.advanced[i].defaultValue=this.shopValue.val()),"list"==this.advanced[i].type&&(this.advanced[i].defaultValue=this.advanced[i].defaultValue),"boolean"==this.advanced[i].type&&this.isCheckBoxSelected()&&(this.advanced[i].defaultValue=this.isCheckBoxSelected().toString()),t+=" "+this.advanced[i].name+":"+this.advanced[i].defaultValue+" ";return t}});Class("MobileProductDetailsPanel",{Package:"PageItem",create:function(t,i,e){this.advancedObj=new PageItem.ShoppingAdvancedProperty(t);this._super(t,i,e);this.shoppingCart||(this.shoppingCart=new PageItem.MobileShoppingCartPanel(t,i),window.shoppingCart=this.shoppingCart);toolBar.getButton("ShoppingCart").setNumber(this.shoppingCart.refreshInputValue());this.canCheckout=!0},parseConfig:function(t){return{annotype:t.annotype,x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,bgColor:t.bgColor,bgAlpha:t.bgAlpha,cartType:t.cartType,imgUrl:t.imgUrl,titleStr:t.titleStr,url:t.url,languageLayout:t.languageLayout,Detailed:t.Detailed}},destroy:function(){this.phoneContainer.empty();this.phoneContainer.remove()},initUI:function(){"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});this.phoneContainer=$("<div class=phoneContainer></div>");this.toolBar=$("<div></div>");this.closeButton=$("<div></div>");this.textTitle=$("<div>Product Details</div>");this.phoneImg=$("<img/>");this.title=$("<div>"+this.config.Detailed.title+"</div>");this.title.text(this.title.text().overflow(30));this.phoneImgBox=$("<div></div>");this.contentText=$("<div></div>");this.shopDescribe=$("<div>"+this.config.Detailed.about+"</div>");this.price=$("<div>"+getLanguage("TStuffCart_DetailedPrice","Price")+" : "+this.config.Detailed.sing+this.config.Detailed.proce+"</div>");this.mNumber=$("<div><span style='position:absolute;'>"+getLanguage("TStuffCart_DetailedQuantity","Quantity")+" : </span></div>");this.input=$("<input type='text' value='1' style='float:left;width:40px;text-align:center;height:20px;outline:medium;border:1px solid rgb(255,255,255)'/>");this.input.allowNumberOnly();this.mAdd=$("<img src='"+uiBaseURL+"cartAdd.png' style='float:left;cursor:pointer;width:25px ;height:25px;background-color:#DDDDDA' />");this.mLow=$("<img src='"+uiBaseURL+"cartLow.png' style='float:left;cursor:pointer;width:25px ;height:25px;position:absolute;background-color:#DDDDDA'/>");this.transitTime=this.alignCss?$("<div>"+this.config.Detailed.time+this.config.Detailed.time+getLanguage("TStuffCart_DetailedDay","day(s)")+" : "+getLanguage("TStuffCart_DetailedTime","Delivery time")+"</div>"):$("<div>"+getLanguage("TStuffCart_DetailedTime","Delivery time")+" : "+this.config.Detailed.time+getLanguage("TStuffCart_DetailedDay","day(s)")+"</div>");this.allQuantity=$("<div> "+this.config.Detailed.quantity+getLanguage("TStuffCart_DetailedQuantity","In Stock")+" </div>");this.mAddToCart=$("<span>"+getLanguage("ShappingCart_AddCart","Add to cart")+"</span>");this.mCheckOut=$("<span>"+getLanguage("ShappingCart_CheckOut","Checkout")+"</span>");this.mailto=$("<a style='text-decoration: none'></a>");this.inputChangRed=$("<span style='position:absolute;top:35px;margin-left:30px;color:red;font-size:10px;width:115px;height:15px;right:30px'>"+getLanguage("ShappingCart_NotStock","Not enough in stock")+"</span>");this.content=$("<div></div>");this.addlow=$("<div></div>");tmpContainer.append(this.phoneContainer);this.phoneContainer.append(this.toolBar);this.phoneContainer.append(this.content);this.phoneContainer.append(this.contentText);this.toolBar.append(this.closeButton);this.toolBar.append(this.textTitle);this.phoneImgBox.append(this.phoneImg);this.contentText.append(this.title);this.contentText.append(this.shopDescribe);this.contentText.append(this.price);if(""!=this.advancedObj.advanced)for(var t=0;t<this.advancedObj.advanceLength;t++)"boolean"==this.advancedObj.advanced[t].type&&(this.contentText.append(this.advancedObj.shopAdvanced1),this.advancedObj.shopAdvanced1.css({"margin-left":"15px","margin-top":"10px"})),"text"==this.advancedObj.advanced[t].type&&(this.contentText.append(this.advancedObj.shopAdvanced2),this.advancedObj.shopAdvanced2.css({"margin-left":"15px","margin-top":"10px"})),"list"==this.advancedObj.advanced[t].type&&(this.contentText.append(this.advancedObj.shopAdvanced3),this.advancedObj.shopAdvanced3.css({"margin-left":"15px","margin-top":"10px"}));this.contentText.append(this.mNumber).append(this.allQuantity).append(this.transitTime);this.content.append(this.phoneImgBox).append(this.contentText);this.mailto.append(this.mCheckOut);this.phoneContainer.append(this.mAddToCart);this.phoneContainer.append(this.mailto);this.mNumber.append(this.addlow);this.addlow.append(this.mAdd).append(this.input).append(this.mLow);this.imgs=this.config.Detailed.imgs;this.imgs[0]||(this.imgs=[this.imgs.img]);this.imgsCount=this.imgs.length;!1===this.setting.shoppingCartOptinon.showPrice&&this.price.css({display:"none"});!1===this.setting.shoppingCartOptinon.showTime&&this.transitTime.css({display:"none"});this.initCss();this.initImgs()},initImgs:function(){this.imageItems=[];for(var t=0;t<this.imgs.length;t++)this.imageItems[t]=this.imgs[t],bookConfig.isFlipPdf&&(this.imageItems[t].startsWith("./")?this.imageItems[t]="."+this.imageItems[t]:this.imageItems[t].isUrl()||(this.imageItems[t]="../"+this.imageItems[t]));1<this.imgsCount&&(this.setSwipe(),this.imageURL=this.imageItems[0]);this.setImgs(this.imageItems[0])},setImgs:function(t){this.phoneImg.attr({src:t})},setSwipe:function(){this.currentIndex=0;var t=function(t,i){var e;e=30*windowWidth/1600;if(!(Math.abs(t)<=e)){var o=this.imageItems.length;t<-e?this.currentIndex=(this.currentIndex+1)%o:t>e&&(0==this.currentIndex&&(this.currentIndex+=o),this.currentIndex=(this.currentIndex-1)%o);this.imageURL=this.imageItems[this.currentIndex];this.setImgs(this.imageURL);$.browser.mise?event.cancelBubble=!0:event.stopPropagation()}}.bind(this);this.phoneImgBox.speed(t)},changeLanguage:function(){this.price.html(getLanguage("TStuffCart_DetailedPrice","Price")+" : "+this.config.Detailed.sing+this.config.Detailed.proce);this.mNumber.html(getLanguage("TStuffCart_DetailedQuantity","Quantity"));this.alignCss?this.transitTime.html(this.config.Detailed.time+this.config.Detailed.time+getLanguage("TStuffCart_DetailedDay","day(s)")+" : "+getLanguage("TStuffCart_DetailedTime","Delivery time")):this.transitTime.html(getLanguage("TStuffCart_DetailedTime","Delivery time")+" : "+this.config.Detailed.time+getLanguage("TStuffCart_DetailedDay","day(s)"));this.allQuantity.html(this.config.Detailed.quantity+getLanguage("TStuffCart_DetailedQuantity","In Stock"));this.mAddToCart.html(getLanguage("ShappingCart_AddCart","Add to cart"));this.mCheckOut.html(getLanguage("ShappingCart_CheckOut","Checkout"))},initCss:function(){this.phoneContainer.css({width:windowWidth+"px",height:"100%",position:"absolute",transform:"translate("+windowWidth+"px,0)","-webkit-transform":"translate("+windowWidth+"px,0)","-moz-transform":"translate("+windowWidth+"px,0)","-o-transform":"translate("+windowWidth+"px,0)","-ms-transform":"translate("+windowWidth+"px,0)","background-color":"#f7f7f7","z-index":"3000"});this.setMobileShopCss()},setMobileShopCss:function(){this.addlow.css({position:"absolute",width:"100px",height:"25px",left:"65px"});this.content.css({position:"relative",width:windowWidth+15+"px",height:windowHeight-90+"px","overflow-x":"hidden"});this.mCheckOut.css({position:"absolute","background-color":"#ff4400",width:windowWidth/2+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial",right:"0",bottom:"0",cursor:"pointer",color:"white"});this.mAddToCart.css({position:"absolute","background-color":"#ffa800",width:windowWidth/2+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial","margin-left":"0",bottom:"0",cursor:"pointer",color:"white"});this.allQuantity.css({height:"14px","margin-top":"10px","font-size":"10px",color:Color(44849).toString(),"font-family":"Tahoma"});this.transitTime.css({height:"14px","margin-top":"10px",color:"black","font-size":"10px","font-family":"Tahoma"});this.contentText.css({position:"relative",padding:"0 15px",width:windowWidth-30+"px"});this.mNumber.css({position:"relative",height:"25px","line-height":"25px","margin-top":"10px",color:"black","font-size":"10px","font-family":"Tahoma"});this.price.css({position:"relative",height:"20px","margin-top":"10px","font-size":"18px",color:Color(12845056).toString(),"font-family":"Tahoma"});this.title.css({height:"32px","line-height":"26px","font-size":"26px",color:"black","font-family":"Tahoma","margin-top":"7px"});this.shopDescribe.css({"line-height":"1.6","font-size":"13px",color:"black","margin-top":"10px","font-family":"Tahoma"});this.textTitle.css({position:"absolute",width:windowWidth/2+5,margin:"auto","font-size":"18px","font-family":"Tahoma",color:"rgb(140,140,140)","vertical-align":"middle","line-height":"2.2",left:"0",top:"0",bottom:"0",right:"0","text-align":"center"});this.toolBar.css({position:"relative",width:windowWidth+"px","background-color":"white",border:"rgb(239,232,232) 1px solid",height:"40px"});this.closeButton.css({position:"absolute",margin:"auto","background-image":"url("+uiBaseURL+"background_prev.png)","background-repeat":"no-repeat","background-position":"4px 4px",cursor:"pointer",width:"28px",height:"28px",left:"10px",bottom:"0",top:"0"});this.phoneImg.css({position:"absolute","max-width":windowWidth-30+"px","max-height":.3*windowHeight+"px",margin:"auto",left:"0",bottom:"0",top:"0",right:"0"});this.phoneImgBox.css({position:"relative",width:windowWidth+"px",height:.35*windowHeight+"px","z-index":"3000"});this.alignCss&&(this.contentText.css(this.alignCss),this.addlow.css({left:"auto",right:"75px"}),this.input.css({float:"right"}),this.mAdd.css({float:"right"}),this.mLow.css({float:"right"}))},initEvent:function(){var t=function(t,i){var e;e=30*windowWidth/1600;Math.abs(t)<=e||t>e&&this.hide()}.bind(this);this.phoneContainer.speed(t);this.mailto.bind(_event._click,function(){bookConfig.googleAnalyticsID&&ga("send","event","CheckOut","click","doCheckout");this.doCheckout}.bind(this));this.input.bind("blur",function(){parseInt(this.input.val())>this.config.Detailed.quantity?(this.mNumber.append(this.inputChangRed),this.input.css({"border-color":"red"}),this.canCheckout=!1):(this.inputChangRed.remove(),this.input.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0)}.bind(this));this.closeButton.bind(_event._up,function(){this.hide()}.bind(this));this.mAdd.bind(_event._up,function(){var t=parseInt(this.input.val())+1;this.input.val(t);t>this.config.Detailed.quantity?(this.mNumber.append(this.inputChangRed),this.input.css({"border-color":"red"}),this.canCheckout=!1):this.canCheckout=!0}.bind(this));this.mLow.bind(_event._up,function(){var t=parseInt(this.input.val());1!=t&&(t-=1,this.input.val(t),t<=this.config.Detailed.quantity&&(this.inputChangRed.remove(),this.input.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0),this.input.val(t))}.bind(this));this.mAddToCart.bind(_event._down,function(){tmpContainer.append(this.shoppingCart.mCart);this.shoppingCart.showCart();var t={};t.image=1>=this.imgsCount?this.imageItems[0]:this.imageURL;t.advancedName=this.advancedObj.setShoppingCartAdvanced().toString();t.title=this.config.Detailed.title;t.sing=this.config.Detailed.sing;t.price=this.config.Detailed.proce;t.number=parseInt(this.input.val());t.quantity=this.config.Detailed.quantity;this.shoppingCart.addProduct(t);toolBar.getButton("ShoppingCart").setNumber(this.shoppingCart.refreshInputValue())}.bind(this));$(window).resize(function(){this.onResize();this.shoppingCart.onResize()}.bind(this))},show:function(){this.changeLanguage();this.textTitle.css({display:"block"});this.contentText.css({display:"block"});this.mAddToCart.css({display:"block"});this.mCheckOut.css({display:"block"});this.phoneContainer.css({display:"block"});animateOnce.delay(this,10,[this.phoneContainer,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},.5,null,"","ease"])},hide:function(){animateOnce(this.phoneContainer,{transform:"translate("+windowWidth+"px,0)","-webkit-transform":"translate("+windowWidth+"px,0)","-moz-transform":"translate("+windowWidth+"px,0)","-o-transform":"translate("+windowWidth+"px,0)","-ms-transform":"translate("+windowWidth+"px,0)"},.3,null,"","ease")},informationHide:function(){this.mAddToCart.css({display:"none"});this.mCheckOut.css({display:"none"});this.textTitle.css({display:"none"});this.contentText.css({display:"none"})},onResize:function(t,i){this.phoneContainer.css({width:windowWidth+"px",height:"100%"});this.setMobileShopCss()}}).extend(PageItem.ProductDetailsPanel);Class("MobileShoppingCartPanel",{Package:"PageItem",create:function(t,i){this.config=t;this.setting=i;this.mCart=$("<div></div>");this.cToolBar=$("<div></div>");this.cClose=$("<div></div>");this.cTitle=$("<div>"+getLanguage("TStuffCart_DetailedCost","Shopping Cart")+"</div>");this.deletes=$("<span>Delete</span>");this.total=$("<span style='font-size:10px'>("+getLanguage("ShappingCart_Total","Total")+":$0.00)</span>");this.mCartCheck=$("<div>"+getLanguage("ShappingCart_CheckOut","Checkout")+"</div>");this.cartMailto=$("<a style='text-decoration: none'></a>");this.item=$("<span style='position: absolute;bottom: 40px;left: 20px;font-size:12px;font-family:Tahoma;font-weight:bold'></span>");this.mCart.append(this.cartMailto);this.cartMailto.append(this.mCartCheck);this.mCartCheck.append(this.total);this.shop=$("<div></div>");this.mCart.append(this.cToolBar).append(this.deletes).append(this.shop);this.cToolBar.append(this.cClose).append(this.cTitle);this.initCss();this.initEvent();this.canCheckout=!1},changeLanguage:function(){this.cTitle.html(getLanguage("TStuffCart_TypeCart","Shopping Cart"));this.deletes.html(getLanguage("lblDelete","Delete"));this.total.html(getLanguage("ShappingCart_Total","Total")+":$0.00)");this.mCartCheck.html(getLanguage("ShappingCart_CheckOut","Checkout"))},addProduct:function(t){t=ShoppingCartUtil.addProduct(t);this.shop.empty();this.shoppingItems=[];for(var i=0;i<t.length;i++){var e=new PageItem.MobileShoppingCartItem(this,t[i]);this.shop.append(e.singleShop);this.shoppingItems.push(e)}this.refreshTotalValue()},initEvent:function(){this.cartMailto.bind(_event._click,function(){bookConfig.googleAnalyticsID&&ga("send","event","ShoppingCart","click","CheckOutAll");this.doCheckout()}.bind(this));this.cClose.bind(_event._up,function(){this.hideCart()}.bind(this));var t=function(t,i){var e;e=30*windowWidth/1600;Math.abs(t)<=e||t>e&&this.hideCart()}.bind(this);this.mCart.speed(t);this.deletes.bind(_event._click,function(){for(var t=0;t<this.shoppingItems.length;){var i=this.shoppingItems[t];i.isSelected()?(this.removeItem(i),this.refreshTotalValue(),toolBar.getButton("ShoppingCart").setNumber(this.refreshInputValue())):t++}}.bind(this))},initCss:function(){this.mCart.css({width:windowWidth+"px",height:windowHeight+"px",position:"absolute",transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)","background-color":"#f7f7f7","z-index":"3000"});this.setCartCss()},setCartCss:function(){this.shop.css({width:windowWidth-20+"px",height:.78*windowHeight+"px",position:"absolute",margin:"auto",top:"0px",left:"0px",bottom:"0px",right:"0px","overflow-x":"hidden"});this.mCartCheck.css({position:"absolute","background-color":"#ff4400",width:2/3*windowWidth+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial",right:"0",bottom:"0",cursor:"pointer",color:"white"});this.deletes.css({position:"absolute","background-color":"#666666",width:windowWidth/3+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial","margin-left":"0",bottom:"0",cursor:"pointer",color:"white"});this.cTitle.css({position:"absolute",width:windowWidth/2,margin:"auto","font-size":"18px","font-family":"Tahoma",color:"rgb(140,140,140)","vertical-align":"middle","line-height":"2.5",left:"0",top:"0",bottom:"0",right:"0","text-align":"center"});this.cToolBar.css({position:"relative",width:windowWidth+"px","background-color":"white",border:"rgb(239,232,232) 1px solid",height:"40px"});this.cClose.css({position:"absolute",margin:"auto","background-image":"url("+uiBaseURL+"background_prev.png)","background-repeat":"no-repeat","background-position":"4px 4px",cursor:"pointer",width:"28px",height:"28px",left:"10px",bottom:"0",top:"0"})},getCartProducts:function(){var t=ShoppingCartUtil.getProductsFromStorage();this.shop.empty();this.shoppingItems=[];for(var i=0;i<t.length;i++){var e=new PageItem.MobileShoppingCartItem(this,t[i]);this.shop.append(e.singleShop);this.shoppingItems.push(e)}this.refreshTotalValue()},onResize:function(t,i){this.mCart.css({width:windowWidth+"px",height:windowHeight+"px"});this.setCartCss()},showCart:function(){this.getCartProducts();this.changeLanguage();tmpContainer.append(this.mCart);this.mCart.css({display:"block"});animateOnce.delay(this,10,[this.mCart,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},.5,null,"","ease"])},hideCart:function(){animateOnce(this.mCart,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"},.3,null,"","ease")}}).extend(PageItem.ShoppingCartPanel);Class("MobileShoppingCartItem",{Package:"PageItem",create:function(t,i){this.initHtml(t,i);null==this.product.advancedName||""==this.product.advancedName?(this.carttitle.text(this.carttitle.text().overflow(18)),this.carttitle.text(this.product.title)):this.carttitle.text(this.product.title+"("+this.product.advancedName+")");this.cartPrice.text(this.product.sing+forceFloat(this.product.price));this.shoppingImage.attr("src",this.product.image);this.singleShop.append(this.checkBox).append(this.shoppingImage).append(this.carttitle).append(this.cartPrice).append(this.addlow).append(this.cartadd).append(this.cartInput).append(this.cartlow).append($("<hr style='position:absolute;margin:auto;margin-top:85px;width:100%'/>"));parseInt(this.cartInput.val())>parseInt(i.quantity)&&(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1);this.setOneShop();this.initEvent()},initHtml:function(t,i){this.mobileShop=t;this.product=i;this.addlow=$("<div></div>");this.singleShop=$("<div></div>");this.checkBox=$("<input type='checkbox' name='checkbox1' style='position:relative;top:46px;' />");this.checkBox[0].product=i;this.shoppingImage=$("<img/>");this.cartNot=$("<span style='position:absolute;color:red;font-size:10px;width:120px;right:0;height:10px'>Not enough in stock</span>");$.browser.safari&&$.system.name==$.system.IOS?(this.cartInput=$("<input type='text' value='"+this.product.number+"' style='width:36px;margin-top:70px;text-align:center;height:21px;outline:medium;right:26px;position:absolute;border:1px solid rgb(255,255,255)'/>"),this.cartInput.allowNumberOnly(),this.cartadd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;margin-top:70px;width:25px ;height:25px;right:70px;position:absolute;background-color:#DDDDDA' />"),this.cartlow=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;margin-top:70px;width:25px ;height:25px;right:1px;position:absolute;background-color:#DDDDDA'/>")):(this.cartInput=$("<input type='text' value='"+this.product.number+"' style='width:36px;margin-top:70px;text-align:center;height:21px;outline:medium;right:31px;position:absolute;border:1px solid rgb(255,255,255)'/>"),this.cartInput.allowNumberOnly(),this.cartadd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;margin-top:70px;width:25px ;height:25px;right:70px;position:absolute;background-color:#DDDDDA' />"),this.cartlow=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;margin-top:70px;width:25px ;height:25px;right:5px;position:absolute;background-color:#DDDDDA'/>"));this.carttitle=$("<span style='width:220px;height:45px;position:absolute;overflow:auto;margin-top: 20px;left:115px;font-family:Tahoma;font-size:12px'></span>");this.cartPrice=$("<span></span>")},initEvent:function(){this.checkBox.bind("change",function(){(function(){this.mobileShop.refreshTotalValue();toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue())}).delay(this,20)}.bind(this));this.cartInput.bind("blur",function(){var t=parseInt(this.cartInput.val());t>this.product.quantity?(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1):(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0);this.product.number=t;this.mobileShop.refreshTotalValue();ShoppingCartUtil.saveProducts(this.mobileShop.shoppingItems,this.mobileShop.setting);toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue())}.bind(this));this.cartadd.bind(_event._up,function(){var t=parseInt(this.cartInput.val()),t=t+1;this.cartInput.val(t);this.product.number=t;this.mobileShop.refreshTotalValue();t>this.product.quantity?(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1):this.canCheckout=!0;ShoppingCartUtil.saveProducts(this.mobileShop.shoppingItems,this.mobileShop.setting);toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue())}.bind(this));this.cartlow.bind(_event._up,function(){var t=parseInt(this.cartInput.val()),t=1>t-1?1:t-1;0>t||(this.cartInput.val(t),this.product.number=t,this.mobileShop.refreshTotalValue(),this.mobileShop.refreshInputValue(),t<=this.product.quantity?(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0):this.canCheckout=!1,ShoppingCartUtil.saveProducts(this.mobileShop.shoppingItems,this.mobileShop.setting),toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue()))}.bind(this))},isSelected:function(){return this.checkBox[0].checked},setOneShop:function(){this.cartPrice.css({position:"absolute",width:"170px",height:"20px",lineHeight:"20px","font-size":"15px",color:"rgb(250,11,11)","margin-top":"75px","font-family":"Tahoma",left:"115px"});this.addlow.css({width:"115px",height:"20px",position:"absolute",right:"0px","margin-top":"28px"});this.shoppingImage.css({position:"absolute",width:"70px",height:"70px","margin-top":"20px","margin-left":"10px"});this.singleShop.css({width:windowWidth+"px",height:"120px"})}}).extend(ShoppingCartItem);global.shoppingCountHTML=$("<span class='shoppingCount'>0</span>");Class("PCProductDetailsPanel",{Package:"PageItem",create:function(t,i,e){this.advancedObj=new PageItem.ShoppingAdvancedProperty(t);this._super(t,i,e);this.shoppingCart||(this.shoppingCart=new PageItem.PCShoppingCartPanel(t,i),window.shoppingCart=this.shoppingCart);this.shoppingCart.onClose=this.shoppingCartClose.bind(this);shoppingCountHTML.html(this.shoppingCart.refreshInputValue());this.canCheckout=!0},parseConfig:function(t){return{annotype:t.annotype,x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,bgColor:t.bgColor,bgAlpha:t.bgAlpha,cartType:t.cartType,imgUrl:t.imgUrl,titleStr:t.titleStr,url:t.url,languageLayout:t.languageLayout,Detailed:t.Detailed}},destroy:function(){this.container.empty();this.container.remove()},initUI:function(){this.initHtml();this.setShopCss();tmpContainer.append(this.bgImage);tmpContainer.append(this.container);this.container.append(this.content);this.container.append(this.closeButton);this.content.append(this.imgBox);this.imgBox.append(this.shopImg);this.contentText.append(this.shopTitle);this.contentText.append(this.shopPrice);this.initAdvanced();this.quantityBox.append(this.number);this.inputBox.append(this.add);this.inputBox.append(this.input);this.inputBox.append(this.low);this.quantityBox.append(this.inputBox);this.contentText.append(this.quantityBox);this.contentText.append(this.allQuantity);this.contentText.append(this.time);this.contentText.append(this.about);this.contentText.append(this.addToCart);this.content.append(this.contentText);this.shopTitle.html(this.config.Detailed.title);this.shopTitle.text(this.shopTitle.text().overflow(14));this.shopTitle.attr("title",this.config.Detailed.title);this.mailto=$("<a></a>");this.mailto.append(this.checkout);this.contentText.append(this.mailto);this.contentText.append(this.close);!1===this.setting.shoppingCartOptinon.showPrice&&this.shopPrice.css({display:"none"});!1===this.setting.shoppingCartOptinon.showTime&&this.time.css({display:"none"});this.initImgs();$(window).resize(this.onResize.bind(this));this.hide()},initHtml:function(){"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});(this.imgs=this.config.Detailed.imgs)&&!this.imgs[0]&&(this.imgs=[this.imgs.img]);this.imgBox=$("<div></div>");this.shopImg=$("<img/>");this.background=$("<div></div>");this.container=$("<div id='ShoppingCart' ></div>");this.closeButton=$("<div></div>");this.content=$("<div></div>");this.contentText=$("<div></div>");this.innerContent=$("<div></div>");this.shopTitle=$("<div></div>");this.allQuantity=$("<div> "+this.config.Detailed.quantity+" In Stock</div>");this.bgImage=$("<div style='display:none'></div>");this.alignCss?(this.shopPrice=$("<div>"+this.config.Detailed.sing+this.config.Detailed.proce+" : Price</div>"),this.time=$("<div>"+this.config.Detailed.time+" day(s) : Delivery time</div>"),bookConfig.isFlipPdf&&(this.shopPrice.html(this.config.Detailed.sing+this.config.Detailed.proce+" : "),this.time.html(this.config.Detailed.time+" (s) : "))):(this.shopPrice=$("<div>Price :  "+this.config.Detailed.sing+this.config.Detailed.proce+"</div>"),this.time=$("<div>Delivery time : "+this.config.Detailed.time+" day(s)</div>"),bookConfig.isFlipPdf&&(this.shopPrice.html(" :  "+this.config.Detailed.sing+this.config.Detailed.proce),this.time.html(" : "+this.config.Detailed.time+" (s)")));this.about=$("<div>"+this.config.Detailed.about+"</div>");this.number=$("<div style='position:relative;'>Quantity : </div>");this.addToCart=$("<span>Add to cart</span>");this.checkout=$("<div>"+this.config.Detailed.checkOutBtnName+"</div>");this.close=$("<span>"+this.config.Detailed.closeBtnName+"</span>");this.quantityBox=$("<div style='position:relative;'></div>");this.inputBox=$("<div class='inputBox' style='position:absolute;top:0;left:60px;'></div>");this.input=$("<input type='text' value='1' style='float:left;width : 70px;height:14px;line-height:14px;outline:medium;background:transparent;border:1px solid rgb(150,150,150);text-align:center'/>");this.input.allowNumberOnly();this.add=$("<img src='"+uiBaseURL+"cartAdd.png' style='float:left;cursor:pointer;width:18px ;height:18px;background:#ddd;' />");this.low=$("<img src='"+uiBaseURL+"cartLow.png' style='float:left;cursor:pointer;width:18px ;height:18px;background:#ddd;'/>");this.not=$("<span style='position:absolute;color:red;font-size:10px;width:115px;line-height:18px;height:18px;right:0'>Not enough in stock</span>")},changeLanguage:function(){this.allQuantity.html(this.config.Detailed.quantity+" "+getLanguage("ShappingCart_InStock","In Stock"));this.number.html(getLanguage("TStuffCart_DetailedQuantity","Quantity")+" :");this.not.html(getLanguage("ShappingCart_NotStock","Not enough in stock"));this.addToCart.html(getLanguage("ShappingCart_AddCart","Add to cart"));this.alignCss?(this.shopPrice.html(this.config.Detailed.sing+this.config.Detailed.proce+" : "+getLanguage("TStuffCart_DetailedPrice","Price")),this.time.html(this.config.Detailed.time+getLanguage("TStuffCart_DetailedDay","day(s)")+" : "+getLanguage("TStuffCart_DetailedTime","Delivery time"))):(this.shopPrice.html(getLanguage("TStuffCart_DetailedPrice","Price")+" : "+this.config.Detailed.sing+this.config.Detailed.proce),this.time.html(getLanguage("TStuffCart_DetailedTime","Delivery time")+" : "+this.config.Detailed.time+getLanguage("TStuffCart_DetailedDay","day(s)")))},initAdvanced:function(){if(""!=this.advancedObj.advanced)for(var t=0,i=0;i<this.advancedObj.advanceLength;i++)t+=30,"boolean"==this.advancedObj.advanced[i].type&&this.contentText.append(this.advancedObj.shopAdvanced1),"text"==this.advancedObj.advanced[i].type&&this.contentText.append(this.advancedObj.shopAdvanced2),"list"==this.advancedObj.advanced[i].type&&(t+=20*parseInt(this.advancedObj.advanced[i].value.split(";").length/5),this.contentText.append(this.advancedObj.shopAdvanced3)),this.about.css({width:"300px",height:150-t+"px","margin-top":"10px","font-size":"10px","font-family":"Arial","overflow-x":"hidden"})},initImgs:function(){if(this.imgs&&this.imgs.length){this.imageItems=[];for(var t=0;t<this.imgs.length;t++)this.imageItems.push(this.imgs[t]),bookConfig.isFlipPdf&&this.imageItems[t]&&(this.imageItems[t].startsWith("./")?this.imageItems[t]="."+this.imageItems[t]:this.imageItems[t].isUrl()||(this.imageItems[t]="../"+this.imageItems[t]));1<this.imgs.length&&(this.imageURL=this.imageItems[0],this.initButton());this.setImgs(this.imageItems[0])}},setImgs:function(t){this.shopImg.attr("src",t)},initButton:function(){this.leftButton=$('<img src="'+uiBaseURL+'photo_prev.png" style="position:absolute;z-index:1000;cursor:pointer;opacity:0.8;"></img>');this.rightButton=$('<img src="'+uiBaseURL+'photo_next.png" style="position:absolute;z-index:1000;cursor:pointer;opacity:0.8;"></img>');this.setButtonPosition();this.currentIndex=0;var t=this.imageItems.length;this.leftButton.bind(_event._click,function(){this.busy=!0;0==this.currentIndex&&(this.currentIndex+=t);this.currentIndex=(this.currentIndex-1)%t;this.imageURL=this.imageItems[this.currentIndex];this.setImgs(this.imageURL)}.bind(this));this.rightButton.bind(_event._click,function(){this.busy=!0;this.currentIndex=(this.currentIndex+1)%t;this.imageURL=this.imageItems[this.currentIndex];this.setImgs(this.imageURL)}.bind(this));this.imgBox.append(this.leftButton).append(this.rightButton)},setButtonPosition:function(){this.leftButton.css({left:"17px",top:"143.5px"});this.rightButton.css({right:"17px",top:"143.5px"})},setShopCss:function(){this.bgImage.css({position:"absolute",width:windowWidth+"px",height:windowHeight+"px",opacity:"0.5",top:0,"background-color":"black","z-index":"100"});var t="translate(0, "+-((windowHeight-430)/2+430)+"px)";this.container.css({position:"absolute",width:"730px",height:"430px",margin:"auto",left:"0",top:"0",bottom:"0",right:"0",transform:t,"-webkit-transform":t,"-moz-transform":t,"-o-transform":t,"-ms-transform":t,"z-index":"2000"});this.content.css({position:"absolute",width:"700",height:"400",margin:"auto",left:"0",top:"0",bottom:"0",right:"0","background-color":"white","z-index":"2000"});this.closeButton.css({position:"absolute",width:"20px",height:"20px",right:"0","background-image":"url("+uiBaseURL+"closecat.png)","background-repeat":"no-repeat",cursor:"pointer"});this.imgBox.css({position:"absolute",width:"330px",height:"330px",margin:"auto",left:"20px",top:"0",bottom:"20px"});this.shopImg.css({"max-width":"300px","max-height":"300px",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0","-moz-box-shadow":"0 0 5px #bbb","-o-box-shadow":"0 0 5px #bbb","-webkit-box-shadow":"0 0 5px #bbb","box-shadow":"0 0 5px #bbb"});this.contentText.css({position:"absolute",width:"304px",height:"355px",margin:"auto","margin-top":"30px",right:"20px","overflow-x":"hidden","-webkit-user-select":"initial","-moz-user-select":"initial","-ms-user-select":"initial","user-select":"initial"});this.shopTitle.css({height:"30px","font-size":"30px",color:"black","font-family":"Arial"});this.about.css({height:"148px","margin-top":"10px","font-size":"10px","font-family":"Arial","overflow-x":"hidden"});this.quantityBox.css({height:"20px","line-height":"17px","margin-top":"10px",color:"black","font-size":"10px","font-family":"Arial"});this.number.css({});this.time.css({height:"14px","margin-top":"10px",color:"black","font-size":"10px","font-family":"Arial"});this.allQuantity.css({height:"14px","margin-top":"8px","font-size":"10px",color:Color(44849).toString(),"font-family":"Arial"});this.shopPrice.css({height:"18px","margin-top":"10px","font-size":"16px",color:Color(12845056).toString(),"font-family":"Arial"});this.addToCart.css({background:"rgb(80, 80, 80)","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",float:"left",padding:"0 5px","margin-top":"25px","margin-left":"0",cursor:"pointer",color:"white"});this.checkout.css({background:"rgb(80, 80, 80)","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",float:"left",padding:"0 5px",margin:"25px 10px 0",cursor:"pointer",color:"white","text-decoration":"none"});this.close.css({background:"rgb(80, 80, 80)","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",float:"left",padding:"0 5px","margin-top":"25px",cursor:"pointer",color:"white"});this.alignCss&&(this.contentText.css(this.alignCss),this.inputBox.css({left:"auto",right:"60px"}),this.input.css({float:"right"}),this.add.css({float:"right"}),this.low.css({float:"right"}),this.checkout.css({left:"158px",right:"auto"}),this.close.css({left:"100px",right:"auto"}))},initEvent:function(){this.input.bind("blur",function(){parseInt(this.input.val())>this.config.Detailed.quantity?(this.number.append(this.not),this.input.css({"border-color":"red"}),this.canCheckout=!1):(this.not.remove(),this.input.css({"border-color":"rgb(150,150,150)"}),this.canCheckout=!0)}.bind(this));this.add.bind(_event._click,function(){var t=this.input.val(),t=parseInt(t)+1;this.input.val(t);t>this.config.Detailed.quantity?(this.number.append(this.not),this.input.css({"border-color":"red"}),this.canCheckout=!1):this.canCheckout=!0;ShoppingCartUtil.saveProducts(this.shoppingItems,this.setting)}.bind(this));this.low.bind(_event._click,function(){var t=parseInt(this.input.val());0!=t&&(t=1>t-1?1:t-1,t<=this.config.Detailed.quantity&&(this.not.remove(),this.input.css({"border-color":"rgb(150,150,150)"}),this.canCheckout=!0),this.input.val(t))}.bind(this));this.mailto.bind(_event._click,function(){bookConfig.googleAnalyticsID&&ga("send","event","CheckOut","click","doCheckOut");this.doCheckout()}.bind(this));this.bgImage.bind(_event._click,function(){this.hide();this.shoppingCart.cart.css({display:"none"})}.bind(this));this.closeButton.bind(_event._click,this.hide.bind(this));this.close.bind(_event._click,this.hide.bind(this));this.addToCart.bind(_event._click,function(){bookContainer.append(this.cart);this.skipHeid();this.shoppingCart.showCart();var t={};t.image=this.imageItems&&1>=this.imageItems.length?this.imageItems[0]:this.imageURL;t.advancedName=this.advancedObj.setShoppingCartAdvanced().toString();t.title=this.config.Detailed.title;t.sing=this.config.Detailed.sing;t.price=parseInt(this.config.Detailed.proce);t.number=parseInt(this.input.val());t.quantity=parseInt(this.config.Detailed.quantity);this.shoppingCart.addProduct(t);shoppingCountHTML.html(this.shoppingCart.refreshInputValue())}.bind(this))},shoppingCartClose:function(){this.bgImage.css({display:"none"})},onResize:function(){var t=this.container.css("width"),i=this.container.css("height");this.height=parseInt(i.replace("px",""));this.width=parseInt(t.replace("px",""));this.container.css({"margin-left":(windowWidth-this.width)/2+"px","margin-top":(windowHeight-this.height)/2+"px"});this.bgImage.css({width:windowWidth+"px",height:windowHeight+"px"})},skipHeid:function(){var t=this.container.css("height");this.height=parseInt(t.replace("px",""));t="translate(0, "+-((windowHeight-this.height)/2+this.height)+"px)";t={transform:t,"-webkit-transform":t,"-moz-transform":t,"-o-transform":t,"-ms-transform":t};this.bgImage.css({display:"none"});animateOnce(this.container,t,.5,null,"","ease-in-out")},hide:function(){if(!this.running){this.running=!0;var t=this.container.css("height");this.height=parseInt(t.replace("px",""));t="translate(0, "+-((windowHeight-this.height)/2+this.height)+"px)";t={transform:t,"-webkit-transform":t,"-moz-transform":t,"-o-transform":t,"-ms-transform":t};(function(){this.container.css({display:"none"});this.content.css("display","none");this.bgImage.css({display:"none"});this.running=!1}).delay(this,500);animateOnce(this.container,t,.5,null,"","ease-in-out")}},show:function(){this.running||(this.running=!0,this.bgImage.css({display:"block"}),this.changeLanguage(),this.content.css("display","block"),this.container.css({display:"block"}),animateOnce.delay(this,10,[this.container,{transform:"translate(0px,0px)","-webkit-transform":"translate(0px,0px)","-moz-transform":"translate(0px,0px)","-o-transform":"translate(0px,0px)","-ms-transform":"translate(0px,0px)"},.5,function(){this.running=!1}.bind(this),"","ease-in-out"]))}}).extend(PageItem.ProductDetailsPanel);Class("PCShoppingCartPanel",{Package:"PageItem",create:function(t,i){this.config=t;this.setting=i;this.cart=$("<div></div>");this.cartTitles=$("<span>Shopping Cart</span>");this.cartprices=$("<span style='position:absolute;font-size:12px;font-weight:bold;margin-top:50px;right:80px;font-family:Tahoma;color:black'>Price</span>");this.cartqu=$("<span style='position:absolute;font-size:12px;font-weight:bold;margin-top:50px;right:180px;font-family:Tahoma;color:black'>Quantity</span>");this.shopping=$("<div id='shopPrice'></div>");this.item=$("<span class=itemss style='position: absolute;bottom: 40px;left: 10px;font-size:12px;font-family:Tahoma;font-weight:bold'></span>");this.total=$("<span></span>");this.cartCheckout=$("<span>Checkout</span>");this.cartClose=$("<span>Close</span>");this.cartAllDelete=$("<span>DeleteAll</span>");this.deleteBox=$('<div> <span class=\'deleteDetial\'>Delete All Goods? </span><br/><span class="yes">Yes</span><span class="no">No</span></div>');this.cartMailto=$("<a></a>");this.cart.append(this.cartTitles);this.cart.append(this.cartqu);this.cart.append(this.cartprices);this.cart.append(this.shopping);this.cart.append(this.item);this.cart.append(this.total);this.bgImage=$("<div></div>");this.cartMailto.append(this.cartCheckout);this.cart.append(this.cartAllDelete);this.cart.append(this.cartMailto);this.cart.append(this.cartClose);this.cart.append(this.deleteBox);tmpContainer.append(this.bgImage);tmpContainer.append(this.cart);this.promptBox=$("<div></div>");this.setCartCss();this.hideCart();this.initEvent();this.canCheckout=!1},initFlipPdfCase:function(){this.cartTitles=$("<span></span>");this.cartprices.html("");this.cartqu.html("");this.cartCheckout=$("<span></span>");this.cartClose=$("<span></span>");this.cartAllDelete=$("<span></span>");this.deleteBox=$('<div>? <br/><span class="yes"></span><span class="no"></span></div>')},initEvent:function(){this.bgImage.bind(_event._end,function(){this.cart.css({display:"none"});this.bgImage.css({display:"none"})}.bind(this));this.deleteBox.find(".yes").bind(_event._click,function(){this.deleteAll();this.deleteBox.hide(300)}.bind(this));this.deleteBox.find(".no").bind(_event._click,function(){this.deleteBox.hide(300)}.bind(this));this.cartAllDelete.bind(_event._click,function(){this.deleteBox.show(300)}.bind(this));this.cartMailto.bind(_event._click,function(){bookConfig.googleAnalyticsID&&ga("send","event","ShoppingCart","click","CheckOutAll");this.doCheckout()}.bind(this));this.cartClose.bind(_event._click,function(){this.hideCart();if(this.onClose)this.onClose();ShoppingCartUtil.saveProducts(this.shoppingItems,this.setting)}.bind(this));$(window).resize(function(){this.bgImage.css({width:windowWidth+"px",height:windowHeight+"px"})}.bind(this))},deleteAll:function(){for(ShoppingCartUtil.setProductsToStorage([]);0<this.shoppingItems.length;)this.removeItem(this.shoppingItems[0]),this.refreshTotalValue()},changeLanguage:function(){this.cartTitles.html(getLanguage("TStuffCart_TypeCart","Shopping Cart"));this.cartprices.html(getLanguage("TStuffCart_DetailedPrice","Price"));this.cartqu.html(getLanguage("TStuffCart_DetailedQuantity","Quantity"));this.cartCheckout.html(getLanguage("ShappingCart_CheckOut","Checkout"));this.cartClose.html(getLanguage("ShappingCart_Close","Close"));this.cartAllDelete.html(getLanguage("lblRemoveAll","Remove All"));this.deleteBox.find(".deleteDetial").html(getLanguage("lblRemoveAll","Remove All")+" "+getLanguage("ShappingCart_Item","Items")+"?");this.deleteBox.find(".yes").html(getLanguage("lblDelete","Delete"));this.deleteBox.find(".no").html(getLanguage("lblCancel","Cancel"));this.shoppingItems},addProduct:function(t){t=ShoppingCartUtil.addProduct(t);this.shopping.empty();this.shoppingItems=[];for(var i=0;i<t.length;i++){var e=new PageItem.PCShoppingCartItem(this,t[i]);this.shopping.append(e.singleShop);this.shoppingItems.push(e)}this.refreshTotalValue();this.refreshInputValue()},showCart:function(){this.cart.css("display","block");this.bgImage.css("display","block");this.changeLanguage()},hideCart:function(){this.cart.css("display","none");this.bgImage.css("display","none")},setCartCss:function(){this.deleteBox.css({"font-family":"Tahoma",display:"none",position:"absolute",width:"300px","padding-top":"20px","text-align":"center",height:"140px",margin:"auto",left:"50%",top:"50%","box-shadow":"0 0 5px #666",background:"#eee",transform:"translate(-50%,-50%)","-webkit-transform":"translate(-50%,-50%)","-moz-transform":"translate(-50%,-50%)","-o-transform":"translate(-50%,-50%)","-ms-transform":"translate(-50%,-50%)","z-index":"3000"});this.deleteBox.find(".yes").css({position:"absolute",color:"#fff",background:"#33cc33",left:"80px",bottom:"35px",width:"60px",height:"25px","line-height":"25px",cursor:"pointer"});this.deleteBox.find(".no").css({position:"absolute",color:"#fff",background:"rgb(80, 80, 80)",right:"80px",bottom:"35px",width:"60px",height:"25px","line-height":"25px",cursor:"pointer"});this.bgImage.css({position:"absolute",width:windowWidth+"px",height:windowHeight+"px",opacity:"0.5",top:0,"background-color":"black","z-index":"100"});this.shopping.css({width:"515px",height:"190px",position:"absolute",margin:"auto",top:"10px",left:"0px",bottom:"0px",right:"0px","overflow-x":"hidden"});this.total.css({position:"absolute",bottom:"40px",right:"20px","font-size":"12px","font-family":"Tahoma","font-weight":"bold",color:"red"});this.cartClose.css({position:"absolute",background:"rgb(80, 80, 80)",width:"40px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",right:"20px",cursor:"pointer",color:"white"});this.cartAllDelete.css({position:"absolute",background:"rgb(80, 80, 80)",color:"white",width:"70px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",left:"10px",cursor:"pointer"});this.cartCheckout.css({position:"absolute",background:"rgb(80, 80, 80)",width:"60px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",right:"70px",cursor:"pointer",color:"white","text-decoration":"none"});this.cartTitles.css({position:"absolute",padding:"0 10px",width:"490px","border-bottom":"1px solid white",height:"40px","line-height":"40px","font-size":"14px","font-family":"Tahoma",color:"white","background-color":"rgb(152,152,152)"});this.cart.css({position:"absolute",border:"1px solid white","line-height":"2.5",margin:"auto",left:"0",top:"0",bottom:"0",right:"0",width:"500px",height:"350px","background-color":"rgb(218,218,218)","overflow-x":"hidden","z-index":"3000"});"right"==this.config.languageLayout&&this.cartTitles.css({direction:"rtl","text-align":"right"})}}).extend(PageItem.ShoppingCartPanel);Class("PCShoppingCartItem",{Package:"PageItem",create:function(t,i){this.initHtml(t,i);!1===pageEditor.setting.shoppingCartOptinon.showPrice&&this.cartPrice.css({display:"none"});null==this.product.advancedName||""==this.product.advancedName?(this.carttitle.text(this.carttitle.text().overflow(16)),this.carttitle.text(this.product.title),this.carttitle.attr("title",this.product.title)):(25<this.product.advancedName.length&&this.carttitle.attr("title",this.product.title+"("+this.product.advancedName+")"),this.carttitle.html(this.product.title+"("+this.product.advancedName+")"));this.cartPrice.text(this.product.sing+forceFloat(this.product.price));this.singleShop.append($("<hr style='position:absolute; margin-left:10px;margin-top:85px;width:475px'/>"));parseInt(this.cartInput.val())>parseInt(i.quantity)&&(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.shop.canCheckout=!1);this.initEvent();this.setCartCSS()},initHtml:function(t,i){this.shop=t;this.product=i;this.cartPrice=$("<span></span>");this.addlow=$("<div></div>");this.singleShop=$("<div style='width:480px;height:80px'></div>");this.cartInput=$("<input id='cartinput' type='text' value='"+this.product.number+"'/>");this.cartInput.allowNumberOnly();this.shoppingImage=$("<img/>");this.carttitle=$("<span style='width:150px;line-height:35px;height:35px;position:absolute;margin-top: 28px;left:80px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:Tahoma;font-size:12px'></span>");this.dustbin=$("<img src='"+uiBaseURL+"cartDelete.png' style='cursor:pointer;position:absolute;right: 25px;margin-top:35px'/>");this.cartadd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;width:18px ;height:18px;position:absolute;border:1px solid #bbb;left:25px;background:#eee;' />");this.cartlow=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;width:18px ;height:18px;margin-left:97px;position:absolute;border:1px solid #bbb;background:#eee;'/>");this.cartNot=$("<span style='position:absolute;color:red;font-size:10px;width:126px;height:20px;margin-top:15px;text-align:center;left:8px'>"+getLanguage("ShappingCart_NotStock","Not enough in stock")+"</span>");this.singleShop.append(this.shoppingImage);this.singleShop.append(this.carttitle);this.singleShop.append(this.addlow);this.singleShop.append(this.cartPrice);this.singleShop.append(this.dustbin);this.addlow.append(this.cartadd);this.addlow.append(this.cartlow);this.addlow.append(this.cartInput);this.setImg(this.product.image)},setImg:function(t){this.shoppingImage.attr("src",t)},initEvent:function(){this.cartInput.bind("keyup",function(){var t=parseInt(this.cartInput.val());""==t&&(t=this.cartInput.val());t>this.product.quantity?(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1):(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(150,150,150)"}),this.canCheckout=!0);this.product.number=t;this.shop.refreshTotalValue();ShoppingCartUtil.saveProducts(this.shop.shoppingItems,this.shop.setting);shoppingCountHTML.html(this.shop.refreshInputValue())}.bind(this));this.dustbin.bind(_event._click,function(){this.shop.removeItem(this);this.shop.refreshTotalValue();shoppingCountHTML.html(this.shop.refreshInputValue())}.bind(this));this.cartadd.bind(_event._click,function(){var t=this.cartInput.val(),t=parseInt(t)+1;this.cartInput.val(t);this.product.number=t;t>this.product.quantity&&(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}));this.shop.refreshTotalValue();ShoppingCartUtil.saveProducts(this.shop.shoppingItems,this.shop.setting);shoppingCountHTML.html(this.shop.refreshInputValue())}.bind(this));this.cartlow.bind(_event._click,function(){var t=this.cartInput.val();0!=parseInt(t)&&(t=1>parseInt(t)-1?1:parseInt(t)-1,this.cartInput.val(t),this.product.number=t,t<=this.product.quantity&&(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(150,150,150)"})),this.shop.refreshTotalValue(),ShoppingCartUtil.saveProducts(this.shop.shoppingItems,this.shop.setting),shoppingCountHTML.html(this.shop.refreshInputValue()))}.bind(this))},setCartCSS:function(){this.cartPrice.css({position:"absolute",width:"70px",height:"20px","font-size":"12px",color:"black","margin-top":"30px","font-family":"Tahoma",right:"65px"});this.cartInput.css({"text-align":"center",width:"40px",height:"16px",outline:"medium","margin-left":"50px",position:"absolute",background:"#fff",border:"1px solid rgb(150,150,150)"});this.addlow.css({width:"120px",height:"40px",right:"170px",position:"absolute","margin-top":"35px"});this.shoppingImage.css({position:"absolute",width:"52px",height:"35px","margin-top":"28px",left:"10px","-moz-box-shadow":"0 0 5px #fff","-o-box-shadow":"0 0 5px #fff","-webkit-box-shadow":"0 0 5px #fff","box-shadow":"0 0 5px #fff"})}}).extend(PageItem.ShoppingCartItem);Class("Pentagon",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.pentagon=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.pentagon.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.pentagon,this.config.rotation);this.parent.append(this.pentagon);this.draw();this.initEvent();this.imageReflection(this.pentagon)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,rotation:t.location.rotation,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},draw:function(){var t=this.pentagon[0],i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;i.beginPath();i.lineCap="round";i.lineJoin="round";i.strokeStyle=Color(this.config.borderColor).toString();i.lineWidth=this.config.borderWidth;i.globalAlpha=this.config.spalpha;i.moveTo(this.config.borderWidth,3*this.height/8);i.lineTo(this.width/6,this.height);i.lineTo(5*this.width/6,this.height);i.lineTo(this.width,3*this.height/8);i.lineTo(this.width/2,this.config.borderWidth);this.config.sh&&this.setShapeShadow(i);if("gradient"==this.config.fillStyle){var e=this.config.angle*Math.PI/180,t=this.width/2+this.width/2*Math.cos(e),e=this.height/2+this.height/2*Math.sin(e),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),t=i.createLinearGradient(s,o,t,e);t.addColorStop(0,this.colorA);t.addColorStop(1,this.colorB);i.fillStyle=t;i.fill()}"Pure"==this.config.fillStyle&&(i.fillStyle=this.color,i.fill());i.closePath();0!=this.config.borderWidth&&i.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.pentagon)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.pentagon[0].width=this.width;this.pentagon[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.pentagon.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.pentagon.one(t,function(){this.pentagon.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.pentagon.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Dovetailed",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.pageHeights=this.config.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.dovetailed=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.dovetailed.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.dovetailed,this.config.rotation);this.parent.append(this.dovetailed);this.draw(this.pageWidth);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.dovetailed)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,rotation:t.location.rotation,width:t.location.width,height:t.location.height,pageWidth:t.location.pageWidth,pageHeight:t.location.pageHeight,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,arrowWidth:t.arrowWidth,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},draw:function(t){var i=this.dovetailed[0],e=i.getContext("2d");this.config.borderWidth=Number(this.config.borderWidth);e.clearRect(0,0,i.width,i.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.arrowWidth=this.config.arrowWidth/this.config.pageWidth*t;this.arrowWidth>2*this.width/3&&(this.arrowWidth=this.width-2*this.width/3);0==this.arrowWidth&&(this.arrowWidth=this.width-10,this.arrowWidth=10);this.dovetailWidth=this.width-this.arrowWidth;e.beginPath();e.lineCap="round";e.lineJoin="round";e.strokeStyle=Color(this.config.borderColor).toString();e.lineWidth=this.config.borderWidth;e.globalAlpha=this.config.spalpha;e.moveTo(this.config.borderWidth,this.config.borderWidth);e.lineTo(this.arrowWidth,(this.height+this.config.borderWidth)/2);e.lineTo(this.config.borderWidth,this.height);e.lineTo(this.dovetailWidth,this.height);e.lineTo(this.width,(this.height+this.config.borderWidth)/2);e.lineTo(this.dovetailWidth,this.config.borderWidth);this.config.sh&&this.setShapeShadow(e);if("gradient"==this.config.fillStyle){i=this.config.angle*Math.PI/180;t=this.width/2+this.width/2*Math.cos(i);var i=this.height/2+this.height/2*Math.sin(i),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o);t=e.createLinearGradient(s,o,t,i);t.addColorStop(0,this.colorA);t.addColorStop(1,this.colorB);e.fillStyle=t;e.fill()}"Pure"==this.config.fillStyle&&(e.fillStyle=this.color,e.fill());e.closePath();0!=this.config.borderWidth&&e.stroke()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.dovetailed)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.dovetailed[0].width=this.width;this.dovetailed[0].height=this.height;this.draw(this.pageWidth);this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.dovetailed.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.dovetailed.one(t,function(){this.dovetailed.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.dovetailed.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Parallelogram",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.parallelogram=$("<canvas width='"+this.width+"' height='"+this.height+"' id='prismatic'></canvas>");this.parallelogram.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.parallelogram,this.config.rotation);this.parent.append(this.parallelogram);this.draw();this.initEvent();this.imageReflection(this.parallelogram)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,rotation:t.location.rotation,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},draw:function(){var t=this.parallelogram[0],i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;i.beginPath();i.lineCap="round";i.lineJoin="round";i.strokeStyle=Color(this.config.borderColor).toString();i.lineWidth=this.config.borderWidth;i.globalAlpha=this.config.spalpha;i.moveTo(this.width/4,this.config.borderWidth);i.lineTo(this.config.borderWidth,this.height);i.lineTo(3*this.width/4+2,this.height);i.lineTo(this.width,this.config.borderWidth);parseBool(this.config.sh)&&this.setShapeShadow(i);if("gradient"==this.config.fillStyle){var e=this.config.angle*Math.PI/180,t=this.width/2+this.width/2*Math.cos(e),e=this.height/2+this.height/2*Math.sin(e),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),t=i.createLinearGradient(s,o,t,e);t.addColorStop(0,this.colorA);t.addColorStop(1,this.colorB);i.fillStyle=t;i.fill()}"Pure"==this.config.fillStyle&&(i.fillStyle=this.color,i.fill());i.closePath();0!=this.config.borderWidth&&i.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.parallelogram)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.parallelogram[0].width=this.width;this.parallelogram[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.parallelogram.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.parallelogram.one(t,function(){this.parallelogram.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.parallelogram.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Hexagon",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.hexagon=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.hexagon.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.hexagon,this.config.rotation);this.parent.append(this.hexagon);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.hexagon)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,rotation:t.location.rotation,width:t.location.width,height:t.location.height,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.actionm,animation:t.animation}},draw:function(){var t=this.hexagon[0],i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;i.beginPath();i.lineCap="round";i.lineJoin="round";i.strokeStyle=Color(this.config.borderColor).toString();i.lineWidth=this.config.borderWidth;i.globalAlpha=this.config.spalpha;i.moveTo(this.width/4,this.config.borderWidth);i.lineTo(this.config.borderWidth,this.height/2);i.lineTo(this.width/4,this.height);i.lineTo(3*this.width/4,this.height);i.lineTo(this.width,this.height/2);i.lineTo(3*this.width/4,this.config.borderWidth);this.config.sh&&this.setShapeShadow(i);if("gradient"==this.config.fillStyle){var e=this.config.angle*Math.PI/180,t=this.width/2+this.width/2*Math.cos(e),e=this.height/2+this.height/2*Math.sin(e),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),t=i.createLinearGradient(s,o,t,e);t.addColorStop(0,this.colorA);t.addColorStop(1,this.colorB);i.fillStyle=t;i.fill()}"Pure"==this.config.fillStyle&&(i.fillStyle=this.color,i.fill());i.closePath();0!=this.config.borderWidth&&i.stroke()},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.hexagon[0].width=this.width;this.hexagon[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.hexagon.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.hexagon.one(t,function(){this.hexagon.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.hexagon.css({left:this.x+"px",top:this.y+"px"})},initEvent:function(){this.linkURL="";null!=this.config.action&&(void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(1,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.hexagon)}}).extend(PageItem.Item);Class("FlowChart",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.flowChart=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.flowChart.css({opacity:this.config.alpha,position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.flowChart,this.config.rotation);this.parent.append(this.flowChart);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.flowChart)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,rotation:t.location.rotation,width:t.location.width,height:t.location.height,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},draw:function(){var t=this.flowChart[0],i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;i.beginPath();i.lineCap="round";i.lineJoin="round";i.strokeStyle=Color(this.config.borderColor).toString();i.lineWidth=this.config.borderWidth;i.globalAlpha=this.config.spalpha;i.moveTo(this.config.borderWidth,this.config.borderWidth);i.lineTo(this.config.borderWidth,this.height);i.lineTo(this.width,this.height);i.lineTo(this.width,this.config.borderWidth);parseBool(this.config.sh)&&this.setShapeShadow(i);if("gradient"==this.config.fillStyle){var e=this.config.angle*Math.PI/180,t=this.width/2+this.width/2*Math.cos(e),e=this.height/2+this.height/2*Math.sin(e),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),t=i.createLinearGradient(s,o,t,e);t.addColorStop(0,this.colorA);t.addColorStop(1,this.colorB);i.fillStyle=t;i.fill()}"Pure"==this.config.fillStyle&&(i.fillStyle=this.color,i.fill());i.closePath();i.stroke();i.beginPath();i.moveTo(this.width/8+this.config.borderWidth,this.config.borderWidth);i.lineTo(this.width/8+this.config.borderWidth,this.height);i.closePath();i.stroke();i.beginPath();i.moveTo(7*this.width/8,this.config.borderWidth);i.lineTo(7*this.width/8,this.height);i.closePath();0!=this.config.borderWidth&&i.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.flowChart)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.flowChart[0].width=this.width;this.flowChart[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.flowChart.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.flowChart.one(t,function(){this.flowChart.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.flowChart.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Cylinder",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.cylinder=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.cylinder.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.cylinder,this.config.rotation);this.parent.append(this.cylinder);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.cylinder)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,rotation:t.location.rotation,width:t.location.width,height:t.location.height,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,cylinderRadius:t.cylinderRadius,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},fillColor:function(t){if("gradient"==this.config.fillStyle){var i=this.config.angle*Math.PI/180,e=this.width/2+this.width/2*Math.cos(i),i=this.height/2+this.height/2*Math.sin(i),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),e=t.createLinearGradient(s,o,e,i);e.addColorStop(0,this.colorA);e.addColorStop(1,this.colorB);t.fillStyle=e;this.config.sh&&this.setShapeShadow(t);t.fill()}"Pure"==this.config.fillStyle&&(t.fillStyle=this.color,this.config.sh&&this.setShapeShadow(t),t.fill())},draw:function(){var t=this.cylinder[0],i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);this.cylinderRadius=this.config.cylinderRadius;i.lineCap="round";i.lineJoin="round";i.strokeStyle=Color(this.config.borderColor).toString();i.lineWidth=this.config.borderWidth;i.globalAlpha=this.config.spalpha;0==this.cylinderRadius&&(this.cylinderRadius=10);this.cylinderRadius>this.height/2&&(this.cylinderRadius=this.height/2);var t=this.width/2-this.config.borderWidth,e=this.cylinderRadius/2-this.config.borderWidth,o=this.width/2,s=this.cylinderRadius/2,n=t>e?t:e,h=t/n,e=e/n;i.save();i.beginPath();i.scale(h,e);i.moveTo((o+t)/h,s/e);i.arc(o/h,s/e,n,0,2*Math.PI);i.restore();this.fillColor(i);"none"!=this.config.fillStyle&&i.fillRect(this.config.borderWidth,this.cylinderRadius/2,this.width-2*this.config.borderWidth,this.height-this.cylinderRadius);i.closePath();i.stroke();i.moveTo(this.config.borderWidth,this.cylinderRadius/2);i.lineTo(this.config.borderWidth,this.height-this.cylinderRadius/2);i.moveTo(this.width-this.config.borderWidth,this.cylinderRadius/2);i.lineTo(this.width-this.config.borderWidth,this.height-this.cylinderRadius/2);i.save();i.scale(h,e);i.moveTo((o+t)/h,(this.height-s)/e);i.arc(o/h,(this.height-s)/e,n,0,Math.PI);i.restore();this.fillColor(i);i.stroke();i.closePath()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.cylinder)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.cylinder[0].width=this.width;this.cylinder[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.cylinder.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.cylinder.one(t,function(){this.cylinder.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.cylinder.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Trapezoid",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.trapezoid=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.trapezoid.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.trapezoid,this.config.rotation);this.parent.append(this.trapezoid);this.draw(this.pageWidth);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.trapezoid)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,rotation:t.location.rotation,width:t.location.width,height:t.location.height,pageWidth:t.location.pageWidth,pageHeight:t.location.pageHeight,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,bottomLength:t.bottomLength,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},draw:function(t){var i=this.trapezoid[0],e=i.getContext("2d");e.clearRect(0,0,i.width,i.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.bottomLength=Number(this.config.bottomLength)/this.config.pageWidth*t;this.bottomLength=0==this.bottomLength||this.config.bottomLength>2*this.width/3?this.width-2*this.width/3:this.bottomLength;e.beginPath();e.lineCap="round";e.lineJoin="round";e.strokeStyle=Color(this.config.borderColor).toString();e.lineWidth=this.config.borderWidth;e.globalAlpha=this.config.spalpha;e.moveTo((this.width-this.bottomLength)/2,this.config.borderWidth);e.lineTo(this.config.borderWidth,this.height);e.lineTo(this.width,this.height);e.lineTo((this.width-this.bottomLength)/2+this.bottomLength,this.config.borderWidth);this.config.sh&&this.setShapeShadow(e);if("gradient"==this.config.fillStyle){i=this.config.angle*Math.PI/180;t=this.width/2+this.width/2*Math.cos(i);var i=this.height/2+this.height/2*Math.sin(i),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o);t=e.createLinearGradient(s,o,t,i);t.addColorStop(0,this.colorA);t.addColorStop(1,this.colorB);e.fillStyle=t;e.fill()}"Pure"==this.config.fillStyle&&(e.fillStyle=this.color,e.fill());e.closePath();0!=this.config.borderWidth&&e.stroke()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.trapezoid)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.trapezoid[0].width=this.width;this.trapezoid[0].height=this.height;this.draw(this.pageWidth);this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.trapezoid.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.trapezoid.one(t,function(){this.trapezoid.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.trapezoid.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("RightArrow",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.rightArrow=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.rightArrow.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.rightArrow,this.config.rotation);this.parent.append(this.rightArrow);this.draw(this.pageWidth,this.pageHeight);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.rightArrow)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,rotation:t.location.rotation,pageWidth:t.location.pageWidth,pageHeight:t.location.pageHeight,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,arrowWidth:t.arrowWidth,arrowTailHeight:t.arrowTailHeight,arrowType:t.arrowType,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},draw:function(t,i){var e=this.rightArrow[0],o=e.getContext("2d");o.clearRect(0,0,e.width,e.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.config.pageHeight||(this.config.pageHeight=bookConfig.largePageHeight);this.arrowWidth=Number(this.config.arrowWidth)/this.config.pageWidth*t;this.arrowTailHeight=Number(this.config.arrowTailHeight)/this.config.pageHeight*i;0==this.arrowWidth&&(this.arrowWidth=10);0<this.arrowWidth&&this.arrowWidth<3*this.width/4&&(this.arrowWidth=this.arrowWidth);!0==parseBool(this.config.arrowType)?2*this.arrowWidth>this.width-1*this.width/4&&(this.arrowWidth=(this.width-1*this.width/4)/2):this.arrowWidth>3*this.width/4&&(this.arrowWidth=3*this.width/4);this.arrowTailHeight=this.arrowTailHeight>this.height/2?this.height/4:0==this.arrowTailHeight?this.height/2-5:(this.height-this.arrowTailHeight)/2;o.beginPath();o.lineCap="round";o.lineJoin="round";o.strokeStyle=Color(this.config.borderColor).toString();o.lineWidth=this.config.borderWidth;o.globalAlpha=this.config.spalpha;!1==parseBool(this.config.arrowType)?(o.moveTo(this.config.borderWidth,this.arrowTailHeight),o.lineTo(this.width-this.arrowWidth,this.arrowTailHeight),o.lineTo(this.width-this.arrowWidth,this.config.borderWidth),o.lineTo(this.width,this.height/2),o.lineTo(this.width-this.arrowWidth,this.height),o.lineTo(this.width-this.arrowWidth,this.height-this.arrowTailHeight),o.lineTo(this.config.borderWidth,this.height-this.arrowTailHeight)):(o.moveTo(this.config.borderWidth,this.height/2),o.lineTo(this.arrowWidth,this.config.borderWidth),o.lineTo(this.arrowWidth,this.arrowTailHeight),o.lineTo(this.width-this.arrowWidth,this.arrowTailHeight),o.lineTo(this.width-this.arrowWidth,this.config.borderWidth),o.lineTo(this.width,this.height/2),o.lineTo(this.width-this.arrowWidth,this.height),o.lineTo(this.width-this.arrowWidth,this.height-this.arrowTailHeight),o.lineTo(this.arrowWidth,this.height-this.arrowTailHeight),o.lineTo(this.arrowWidth,this.height));this.config.sh&&this.setShapeShadow(o);if("gradient"==this.config.fillStyle){var s=this.config.angle*Math.PI/180,e=this.width/2+this.width/2*Math.cos(s),s=this.height/2+this.height/2*Math.sin(s),n=(Number(this.config.angle)+180)*Math.PI/180,h=this.width/2+this.width/2*Math.cos(n),n=this.height/2+this.height/2*Math.sin(n),e=o.createLinearGradient(h,n,e,s);e.addColorStop(0,this.colorA);e.addColorStop(1,this.colorB);o.fillStyle=e;o.fill()}"Pure"==this.config.fillStyle&&(o.fillStyle=this.color,o.fill());o.closePath();0!=this.config.borderWidth&&o.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.rightArrow)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.rightArrow[0].width=this.width;this.rightArrow[0].height=this.height;this.draw(this.pageWidth,this.pageHeight);this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.rightArrow.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.rightArrow.one(t,function(){this.rightArrow.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.rightArrow.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("VirtualEnd",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.borderColor=Color(this.config.borderColor).toString();this.virtualEnd=$("<canvas width='"+this.width+"' height='"+this.height+"' id='myCanvas'></canvas>");this.virtualEnd.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.virtualEnd,this.config.rotation);this.parent.append(this.virtualEnd);this.draw(this.pageWidth,this.pageHeight);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.virtualEnd)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,rotation:t.location.rotation,pageWidth:t.location.pageWidth,pageHeight:t.location.pageHeight,width:t.location.width,height:t.location.height,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,arrowWidth:t.arrowWidth,arrowTailHeight:t.arrowTailHeight,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},fillColor:function(t){if("gradient"==this.config.fillStyle){var i=this.config.angle*Math.PI/180,e=this.width/2+this.width/2*Math.cos(i),i=this.height/2+this.height/2*Math.sin(i),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),e=t.createLinearGradient(s,o,e,i);e.addColorStop(0,this.colorA);e.addColorStop(1,this.colorB);t.fillStyle=e;t.fill()}"Pure"==this.config.fillStyle&&(t.fillStyle=this.color,t.fill());0!=this.config.borderWidth&&t.stroke()},draw:function(t,i){var e=this.virtualEnd[0],o=e.getContext("2d");o.clearRect(0,0,e.width,e.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.config.pageHeight||(this.config.pageHeight=bookConfig.largePageHeight);this.arrowWidth=Number(this.config.arrowWidth)/this.config.pageWidth*t;this.arrowTailHeight=Number(this.config.arrowTailHeight)/this.config.pageHeight*i;this.arrowTailHeight>this.height&&(this.arrowTailHeight=this.height);this.arrowWidth>this.width/2&&(this.arrowWidth=this.width/2);0==this.arrowTailHeight&&(this.arrowTailHeight=10);0==this.arrowWidth&&(this.arrowWidth=10);this.rightArrowWidth=this.width-this.arrowWidth;this.rightArrowHeight=(this.height-this.arrowTailHeight)/2;o.strokeStyle=Color(this.config.borderColor).toString();o.lineWidth=this.config.borderWidth;o.globalAlpha=this.config.spalpha;o.lineCap="round";o.lineJoin="round";o.beginPath();o.rect(this.config.borderWidth,(this.height-this.arrowTailHeight)/2,this.width/24,this.arrowTailHeight);o.strokeStyle=Color(this.config.borderColor).toString();o.lineWidth=this.config.borderWidth;this.fillColor(o);o.closePath();o.beginPath();o.rect(this.width/12,(this.height-this.arrowTailHeight)/2,this.width/12,this.arrowTailHeight);o.strokeStyle=Color(this.config.borderColor).toString();o.lineWidth=this.config.borderWidth;this.fillColor(o);o.closePath();o.beginPath();o.moveTo(this.width/5,this.rightArrowHeight);o.lineTo(this.rightArrowWidth,this.rightArrowHeight);o.lineTo(this.rightArrowWidth,this.config.borderWidth);o.lineTo(this.width,this.height/2);o.lineTo(this.rightArrowWidth,this.height);o.lineTo(this.rightArrowWidth,this.height-this.rightArrowHeight);o.lineTo(this.width/5,this.height-this.rightArrowHeight);o.closePath();!0==parseBool(this.config.sh)&&this.setShapeShadow(o);this.fillColor(o)},initEvent:function(){this.linkURL="";null!=this.config.action&&(void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(1,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL),this.addActionEvent(this.virtualEnd))},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.virtualEnd[0].width=this.width;this.virtualEnd[0].height=this.height;this.draw(this.pageWidth,this.pageHeight);this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.virtualEnd.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.virtualEnd.one(t,function(){this.virtualEnd.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.virtualEnd.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("Cross",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.cross=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.cross.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.cross,this.config.rotation);this.parent.append(this.cross);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.cross)},parseConfig:function(t){return{x:t.location.x,y:t.location.y,rotation:t.location.rotation,width:t.location.width,height:t.location.height,pageWidth:t.location.pageWidth,pageHeight:t.location.pageHeight,alpha:t.alpha,fillStyle:t.fillStyle,color:t.color,colorA:t.gradientColorA,colorB:t.gradientColorB,angle:t.angle,spalpha:t.spalpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,crossWidht:t.crossWidht,crossType:t.crossType,borderWidth:t.borderWidth,borderColor:t.borderColor,borderAlpha:t.borderAlpha,sh:parseBool(t.shadow.hasDropShadow),sa:t.shadow.shadowAngle,sx:t.shadow.shadowBlurX,sy:t.shadow.shadowBlurY,se:t.shadow.shadowDistance,sr:t.shadow.shadowColor,action:t.action,animation:t.animation}},draw:function(){var t=this.cross[0],i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);this.config.borderWidth=Number(this.config.borderWidth);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.crossWidth=Number(this.config.crossWidht)/this.config.pageWidth*this.pageWidth;this.width>this.height?this.crossWidth>2*this.height/3&&(this.crossWidth=this.height-1*this.height/3):this.crossWidth>2*this.width/3&&(this.crossWidth=this.width-1*this.width/3);0==this.crossWidth&&(this.crossWidth=10);this.positionWidth=(this.width-this.crossWidth)/2;this.positionHeight=(this.height-this.crossWidth)/2;i.lineCap="round";i.lineJoin="round";i.strokeStyle=Color(this.config.borderColor).toString();i.lineWidth=this.config.borderWidth;i.globalAlpha=this.config.spalpha;i.beginPath();!0===parseBool(this.config.crossType)?(i.moveTo(this.config.borderWidth,this.height/2),i.lineTo(this.positionWidth/2,this.positionHeight-this.crossWidth/3),i.lineTo(this.positionWidth/2,this.positionHeight),i.lineTo(this.positionWidth,this.positionHeight),i.lineTo(this.positionWidth,this.positionHeight/2),i.lineTo(this.positionWidth-this.crossWidth/3,this.positionHeight/2),i.lineTo(this.width/2,this.config.borderWidth),i.lineTo(this.width-this.positionWidth+this.crossWidth/3,this.positionHeight/2),i.lineTo(this.width-this.positionWidth,this.positionHeight/2),i.lineTo(this.width-this.positionWidth,this.positionHeight),i.lineTo(this.width-this.positionWidth/2,this.positionHeight),i.lineTo(this.width-this.positionWidth/2,this.positionHeight-this.crossWidth/3),i.lineTo(this.width,this.height/2),i.lineTo(this.width-this.positionWidth/2,this.height-this.positionHeight+this.crossWidth/3),i.lineTo(this.width-this.positionWidth/2,this.height-this.positionHeight),i.lineTo(this.width-this.positionWidth,this.height-this.positionHeight),i.lineTo(this.width-this.positionWidth,this.height-this.positionHeight/2),i.lineTo(this.width-this.positionWidth+this.crossWidth/3,this.height-this.positionHeight/2),i.lineTo(this.width/2,this.height),i.lineTo(this.positionWidth-this.crossWidth/3,this.height-this.positionHeight/2),i.lineTo(this.positionWidth,this.height-this.positionHeight/2),i.lineTo(this.positionWidth,this.height-this.positionHeight),i.lineTo(this.positionWidth/2,this.height-this.positionHeight),i.lineTo(this.positionWidth/2,this.height-this.positionHeight+this.crossWidth/3)):(i.moveTo(this.config.borderWidth,this.positionHeight),i.lineTo(this.positionWidth,this.positionHeight),i.lineTo(this.positionWidth,this.config.borderWidth),i.lineTo(this.positionWidth+this.crossWidth,this.config.borderWidth),i.lineTo(this.positionWidth+this.crossWidth,this.positionHeight),i.lineTo(this.width-this.config.borderWidth,this.positionHeight),i.lineTo(this.width-this.config.borderWidth,this.positionHeight+this.crossWidth),i.lineTo(this.positionWidth+this.crossWidth,this.positionHeight+this.crossWidth),i.lineTo(this.positionWidth+this.crossWidth,this.height),i.lineTo(this.positionWidth,this.height),i.lineTo(this.positionWidth,this.positionHeight+this.crossWidth),i.lineTo(this.config.borderWidth,this.positionHeight+this.crossWidth));parseBool(this.config.sh)&&this.setShapeShadow(i);if("gradient"==this.config.fillStyle){var e=this.config.angle*Math.PI/180,t=this.width/2+this.width/2*Math.cos(e),e=this.height/2+this.height/2*Math.sin(e),o=(Number(this.config.angle)+180)*Math.PI/180,s=this.width/2+this.width/2*Math.cos(o),o=this.height/2+this.height/2*Math.sin(o),t=i.createLinearGradient(s,o,t,e);t.addColorStop(0,this.colorA);t.addColorStop(1,this.colorB);i.fillStyle=t;i.fill()}"Pure"==this.config.fillStyle&&(i.fillStyle=this.color,i.fill());i.closePath();0!=this.config.borderWidth&&i.stroke()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.cross)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.cross[0].width=this.width;this.cross[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.cross.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.cross.one(t,function(){this.cross.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.cross.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);Class("PopUpVideoItem",{Package:"PageItem",create:function(t,i,e,o){this._super(t,i,e,o);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.playCount=0;this.videoWidth=Math.min(574,windowWidth-4);this.videoHeight=Math.min(460,windowHeight-4);this.videoLeft=(windowWidth-this.videoWidth-4)/2;this.videoTop=(windowHeight-this.videoHeight-4)/2;this.background=$("<div style='width:100%;height:100%;z-index:1001;position:absolute;top:0;'></div>");this.videoBac=$("<div style='width:100%;height:100%;background-color:rgba(0,0,0,0.5);'></div>");this.config.imgURL=this.fixRelativePath(this.config.imgURL);bookConfig.useTheAliCloudChart&&this.config.imgURL&&(this.config.imgURL=this.getOssUrl(this.config.imgURL,this.width,this.height,"fixed"));this.config.videoURL=this.fixRelativePath(this.config.videoURL);this.videoImage=$("<div class='flip-action' style='position: absolute;cursor:pointer;opacity:"+this.config.alpha+"; left:"+this.left+"px; top:"+this.top+"px; width:"+this.width+"px;height:"+this.height+"px;'></div>");this.closeButton=$("<img style='width:18px;height:18px;z-index:1001;position:absolute;cursor:pointer;right:5px;top:"+(0>this.videoTop-18?0:this.videoTop-18)+"px;' src='"+uiBaseURL+"close.png'/>");this.videoFrame=new Media($("<video src='"+this.config.videoURL+"' webkit-playsinline='true' playsinline='true' controls='controls'></video>"),"video");this.videoFrame.setCss({position:"absolute",background:"#000",border:"2px solid #bbb",width:this.videoWidth+"px",height:this.videoHeight+"px",left:this.videoLeft+"px",top:this.videoTop+"px","object-fit":"contain","z-index":1e3});this.config.imgURL?(this.imageDiv=$("<img src='"+this.config.imgURL+"' style='position: absolute;width:100%;height:100%'/>"),this.videoImage.append(this.imageDiv)):this.videoImage.css("background-color","rgba(255,255,255,1)");this.playImg=$("<img src='"+uiBaseURL+"play.png' style='position:absolute;margin:auto;left:0px;top:0px;bottom:0px;right:0px;width:56px;height:56px'/>");this.videoImage.append(this.playImg);this.setRotation(this.videoImage,this.config.rotation);this.background.append(this.videoFrame.$media);tmpContainer.append(this.background);this.background.append(this.videoBac);this.background.append(this.closeButton);t.append(this.videoImage);this.config.shadow&&this.addShadow(this.videoImage);this.hide();this.initEvent()},parseConfig:function(t){var i={width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,previewSrc:t.previewURL,moviePlayTriggerEvt:t.moviePlayTriggerEvt,movieStopTriggerEvt:t.movieStopTriggerEvt,replayWhenPlayEventTrigger:t.replayWhenPlayEventTrigger,shadow:t.shadow,animation:t.animation};t.H5PlaybackNumber&&(i.H5PlaybackNumber=parseInt(t.H5PlaybackNumber));t.H5Replay&&(i.H5Replay=parseBool(t.H5Replay));t.componentData?(i.videoURL=t.componentData.videoURL,i.imgURL=t.componentData.imgURL||t.componentData.previewURL,i.pageViewed=parseBool(t.componentData.pageViewed)):(i.videoURL=t.url||t.videoURL||"",i.imgURL=t.previewURL||t.previewUrl||"",i.pageViewed="EVT_PageViewed"==t.moviePlayTriggerEvt?!0:!1);parseBool(t.shadow.hasDropShadow)&&(i.hasShadow=!0);return i},initEvent:function(){this.videoFrame.$media.bind(_event._click,function(t){t.stopPropagation()}.bind(this));this.background.bind(_event._down,function(t){t.stopPropagation()}.bind(this));this.background.bind(_event._click,function(t){this.hide();this.setCurrentTime(0);this.videoFrame.pause();t.stopPropagation()}.bind(this));this.videoImage.bind(_event._down,function(t){t.stopPropagation()}.bind(this));this.videoImage.bind(_event._end,function(t){t.stopPropagation()}.bind(this));this.videoImage.bind(_event._click,function(t){this.showOrHide();t.stopPropagation()}.bind(this));this.closeButton.bind("mouseenter",function(){this.closeButton.css({opacity:"0.7"})}.bind(this));this.closeButton.bind("mouseleave",function(){this.closeButton.css({opacity:"1"})}.bind(this));0>this.config.H5PlaybackNumber&&this.videoFrame.$media.attr("loop","loop");0<this.config.H5PlaybackNumber&&this.videoFrame.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.videoFrame.play()}.bind(this));this.videoFrame.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.videoWidth=Math.min(480,windowWidth)-4;this.videoHeight=9*this.videoWidth/16;this.videoHeight=Math.min(this.videoHeight,windowHeight);this.videoLeft=(windowWidth-this.videoWidth)/2-2;this.videoTop=(windowHeight-this.videoHeight)/2-2;this.videoFrame.setCss({width:this.videoWidth+"px",height:this.videoHeight+"px",top:this.videoTop+"px",left:this.videoLeft+"px"});this.videoImage.css({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.left,this.top);this.setClosePos()},setPosition:function(t,i){this.videoImage.css({top:i+"px",left:t+"px"})},setClosePos:function(){var t=this.videoWidth+this.videoLeft+2,i=this.videoTop;(windowWidth-this.videoWidth)/2<this.closeButton.width()&&(i>this.closeButton.height()?(t=this.videoLeft+this.videoWidth+4-this.closeButton.width(),i=this.videoTop-this.closeButton.height()):i<this.closeButton.height()&&(t=this.videoLeft+this.videoWidth+4-this.closeButton.width(),i=this.videoTop));this.closeButton.css({left:t+"px",top:i+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd();this.videoImage.css({animation:"flip 1s ease 0s 1 normal"});this.videoImage.one(t,function(){this.videoImage.css({animation:""})}.bind(this))}},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},showOrHide:function(){!1===this.visible?this.popup():this.hide()},setCurrentTime:function(t){this.videoFrame.setCurrentTime(t)},hide:function(){this.visible=!1;this.background.css({display:"none"})},popup:function(){this.visible=!0;this.videoFrame.play();this.background.css({display:"block"})},play:function(){this.videoFrame.play()},pause:function(){this.videoFrame.pause()},stop:function(){this.pause();this.videoFrame.setCurrentTime(0)}}).extend("Item");Class("LoopControlVideo",{Package:"PageItem",create:function(t,i,e,o){this.config=this.parseConfig(i);this.animateConfig();this.playCount=0;this.parent=t;this.pageWidth=e;this.pageHeight=o;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.cvsWidth=.54*this.width;this.cvsHeight=this.height;this.content=$("<div class='flip-action' style='overflow:hidden;'></div>");this.control=$("<div class='video-circle-controls'></div>");this.playBtn=$("<div class='video-circle-play'></div>");this.volume=$("<div class='video-circle-volume-button'></div>");this.fullscreen=$("<div class='video-circle-player-fullscreen' style='display:none'></div>");this.loopControl=$("<canvas class='loopControl' width='80' height='80' style='position:absolute;margin:auto;top:0;left:0;bottom:0;right:0;'>64%</canvas>");this.canvasDiv=$("<div></div>");"string"==typeof this.config.previewSrc&&""!=this.config.previewSrc&&null!=this.config.previewSrc&&void 0!=this.config.previewSrc&&(this.config.previewSrc=this.fixRelativePath(this.config.previewSrc),bookConfig.useTheAliCloudChart&&(this.config.previewSrc=this.getOssUrl(this.config.previewSrc,this.width,this.height,"fixed")));t=typeof this.config.src;i=this.config.src.substr(this.config.src.length-4,4).toLowerCase();if("string"==t){if(null==this.config.src||".mp4"!=i&&".flv"!=i&&".f4v"!=i)return}else if(this.config.src=={})return;this.config.src=this.fixRelativePath(this.config.src);this.video=new Media($("<video src='"+this.config.src+"' webkit-playsinline='true' playsinline='true' ></video>"),"video");this.config.previewSrc&&this.video.$media.attr("poster",this.config.previewSrc);this.parent.append(this.content);this.content.append(this.video.$media);this.content.append(this.control);this.control.append(this.canvasDiv);this.canvasDiv.append(this.loopControl);this.control.append(this.playBtn);this.control.append(this.volume);this.control.append(this.time);this.control.append(this.fullscreen);this.canvasDiv.append(this.time);this.setCss();this.config.shadow&&this.addShadow(this.content);parseBool(this.config.reflection)&&this.imageReflection(this.content,this.width,this.height);this.initEvent()},parseConfig:function(t){var i={width:t.location.width,height:t.location.height,rotation:t.location.rotation,x:t.location.x,y:t.location.y,alpha:t.alpha,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,previewSrc:t.previewURL,moviePlayTriggerEvt:t.moviePlayTriggerEvt?t.moviePlayTriggerEvt:t.PlayTriggerEvt,movieStopTriggerEvt:t.StopTriggerEvt,replayWhenPlayEventTrigger:t.replayWhenPlayEventTrigger,shadow:t.shadow,animation:t.animation};t.H5PlaybackNumber&&(i.H5PlaybackNumber=parseInt(t.H5PlaybackNumber));t.H5Replay&&(i.H5Replay=parseBool(t.H5Replay));void 0!=t.videoURL&&(i.src=t.videoURL);void 0!=t.url&&(i.src=t.url);t.componentData&&(i.src=t.componentData.videoURL,i.previewSrc=t.componentData.imgURL);parseBool(t.shadow.hasDropShadow)&&(i.hasShadow=!0);return i},onPlayClick:function(){!1==this.video.$media[0].paused?this.pauseVideo():this.playVideo();$.browser.device!=$.browser.DEVICE_PC&&function(){this.control.css("opacity","0")}.delay(this,5e3);return!1},onResize:function(t,i){this.width=this.config.width*t;this.height=this.config.height*i;this.cvsWidth=this.cvsHeight=80<this.height?80:this.height;.54*this.width<=this.height&&(this.cvsWidth=this.cvsHeight=80<.54*this.width?80:.54*this.width);this.loopControl[0].width=this.cvsWidth;this.loopControl[0].height=this.cvsHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.control.css({width:this.width+"px",height:this.height+"px"});this.content.css({"background-size":this.width+"px "+this.height+"px"});this.setPosition(t,i)},setPosition:function(t,i){this.x=t*this.config.x;this.y=i*this.config.y;this.content.css({left:this.x+"px",top:this.y+"px"})},Loop:function(t){var i=this.loopControl[0].getContext("2d");i.clearRect(0,0,this.cvsWidth,this.cvsHeight);this.drawRound(i,this.cvsWidth/2,360,"#555555");this.drawRound(i,this.cvsWidth/2,t,"#FFFFFF");this.drawRound(i,this.cvsWidth/2*.85,360,"#000000")},drawRound:function(t,i,e,o){var s=Math.PI/180;t.beginPath();t.moveTo(this.cvsWidth/2,this.cvsWidth/2);t.arc(this.cvsWidth/2,this.cvsWidth/2,i,0,e*s,!1);t.closePath();t.fillStyle=o;t.fill()},muteVolume:function(){!0==this.video.$media[0].muted?(this.video.$media[0].muted=!1,this.volume.removeClass("video-circle-volume-mute")):(this.video.$media[0].muted=!0,this.volume.addClass("video-circle-volume-mute"));return!1},fullScreen:function(){fullScreenApi.supportsFullScreen&&(fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(this.video.$media[0]));this.video.$media[0].webkitSupportsFullscreen&&this.video.$media[0].webkitEnterFullscreen();return!1},initEvent:function(){this.fullscreen.bind(_event._click,this.fullScreen.bind(this));this.control.bind(fullScreenApi.fullScreenEventName,function(){fullScreenApi.isFullScreen()?this.fullscreen.addClass("video-circle-exit-fullscreen"):this.fullscreen.removeClass("video-circle-exit-fullscreen")}.bind(this));this.video.$media.bind(_event._click,this.onPlayClick.bind(this));this.playBtn.bind(_event._click,this.onPlayClick.bind(this));this.volume.bind(_event._click,this.muteVolume.bind(this));this.video.$media.bind("play",function(){this.fullscreen.css({display:"block"});this.playBtn.removeClass("video-play-button").addClass("video-paused-button")}.bind(this));this.video.$media.bind("pause",function(){this.fullscreen.css({display:"none"});this.playBtn.removeClass("video-paused-button").addClass("video-play-button")}.bind(this));this.video.$media.bind("end",function(){this.fullscreen.css({display:"none"});this.playBtn.removeClass("video-paused-button").addClass("video-play-button")}.bind(this));this.video.$media.bind("timeupdate",function(){this.totalTime=this.video.$media[0].duration;this.currentTime=this.video.$media[0].currentTime;this.Loop(this.currentTime/this.totalTime*360)}.bind(this));this.control.on("mouseenter",function(){this.control.css("opacity","1")}.bind(this));this.control.on("mouseleave",function(){this.control.css("opacity","0")}.bind(this));$.browser.device!=$.browser.DEVICE_PC&&(this.control.bind(_event._down,function(){this.control.css("opacity","1")}.bind(this)),this.control.bind(_event._up,function(){(function(){this.control.css("opacity","0")}).delay(this,3e3)}.bind(this)));this.video.$media.bind("click mousedown mouseup mousewheel DOMMouseScroll",function(t){t.stopPropagation()}.bind(this));this.initLoopEvent()},initLoopEvent:function(){0>this.config.H5PlaybackNumber&&this.video.$media.attr("loop","loop");0<this.config.H5PlaybackNumber&&this.video.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.playVideo()}.bind(this));this.video.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},setCss:function(){this.canvasDiv.css({position:"absolute",width:"54%",height:"100%",margin:"auto",top:"0",bottom:"0",left:"0",right:"0",transform:"rotate(270deg)","-webkit-transform":"rotate(270deg)","-ms-transform":"rotate(270deg)","-o-transform":"rotate(270deg)","-moz-transform":"rotate(270deg)"});this.control.css({position:"absolute",width:this.width+"px",opacity:"1",height:this.height+"px"});this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",opacity:this.config.alpha,"background-color":"black"});this.setRotation(this.content,this.config.rotation);this.video.setCss({position:"absolute","z-index":1,left:"0px",top:"0px",width:"100%",height:"100%"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.content.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.content.one(t,function(){this.content.css({animation:""})}.bind(this))}},backTime:function(){this.playCount=0;this.video&&this.video.setCurrentTime(0)},isReplay:function(){return this.config.H5Replay},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},playVideo:function(){this.video&&(this.video.play(),this.playBtn.removeClass("video-play-button").addClass("video-paused-button"))},pauseVideo:function(){this.video&&(this.video.pause(),this.playBtn.removeClass("video-paused-button").addClass("video-play-button"))},stopVideo:function(){player&&(this.pauseVideo(),this.video.setCurrentTime(0))}}).extend("Item");Class("RollerText",{Package:"PageItem",create:function(t,i,e,o,s){this._super(t,i,e,o);this.animateConfig();this.bgColor=Color(this.config.bgcolor).toString();this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.id="text"+s;this.initText();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.rollerText);this.onResize(this.pageWidth,this.pageHeight)},initText:function(){this.textli="";this.container=$("<div id="+this.id+" content='width=device-width' class='textContainer' style='position:absolute;'></div>");this.rollerText=$("<div content='width=device-width'></div>");this.enterText=$("<div class='flip-action' content='width=device-width'></div>");this.textDown=$("<img/>");this.textUp=$("<img/>");this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});this.config.textStr||(this.config.textStr=this.config.formats.defaultFormat.htmlText);var t=new TextFormatAnalyzer(this.config.textStr);this.fontSize=t.getMinFontSize();this.text=t.getHTML(this.alignCss);this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.scrollWidth=40<=.05*this.width?40:.05*this.width;!0===parseBool(this.config.fillBg)?this.rollerText.css({"background-color":Color(this.config.bgcolor).rgba(this.config.bgalpha)}):this.rollerText.css({background:""});this.addShadow(this.rollerText);!0===parseBool(this.config.selectable)&&this.rollerText.css({"-webkit-user-select":"text","-moz-user-select":"text","-ms-user-select":"text","user-select":"text"});1==this.config.barType?(this.enterText.append(this.textDown).append(this.textUp),this.setBarType(),this.textDown.attr({src:uiBaseURL+"textDown.png"}),this.textUp.attr({src:uiBaseURL+"textUp.png"})):this.rollerText.css({"-webkit-text-size-adjust":"100%",display:"inline-block","word-wrap":"break-word",overflow:"hidden",position:"absolute",width:this.width+"px",height:this.height+"px"});this.enterText.css({"-webkit-text-size-adjust":"100%",display:"inline-block",position:"absolute",width:this.width-this.scrollWidth+"px",left:"0",top:"0"});this.rollerText.css({opacity:this.config.alpha});this.enterText.append(this.text);this.rollerText.append(this.enterText);this.container.append(this.rollerText);this.parent.append(this.container);this.enterText.height()>this.height&&this.initScroll()},initScroll:function(){this.scroll=$("<div class='flip-action'></div>");this.scrollBar=$("<div class='flip-action'></div>");this.topPoint=$("<p class='flip-action'></p>");this.bottomPoint=$("<p class='flip-action'></p>");this.topIcon=$("<span></span>");this.bottomIcon=$("<span></span>");this.topPoint.append(this.topIcon);this.bottomPoint.append(this.bottomIcon);this.scroll.append(this.scrollBar).append(this.topPoint).append(this.bottomPoint);this.rollerText.append(this.scroll);this.initScrollCss();this.initScrollEvent()},initScrollEvent:function(){for(var t=[this.enterText,this.scroll],i=0;i<t.length;i++)t[i].bind("mousewheel DOMMouseScroll",function(t){t.stopPropagation();this.distance||(this.distance=this.enterText.height()-this.height+this.scrollWidth/2);this.barHeight||(this.barHeight=(this.height-2*this.scrollWidth)*(this.height-2*this.scrollWidth)/this.enterText.height());this.barDistance||(this.barDistance=this.height-this.barHeight-this.scrollWidth);t=t.originalEvent.wheelDelta&&(0<t.originalEvent.wheelDelta?1:-1)||t.originalEvent.detail&&(0<t.originalEvent.detail?-1:1);0<t?this.scrollTop():0>t&&this.scrollBottom()}.bind(this));this.parent.bind("mouseup",function(t){this.focus=!1;this.starty=void 0}.bind(this));this.enterText.bind("mouseup",function(t){this.focus=!1;this.starty=void 0}.bind(this));this.rollerText.bind("mouseup",function(t){this.focus=!1;this.starty=void 0}.bind(this));this.scroll.bind("mouseup mousewheel",function(t){this.focus=!1}.bind(this));isTouchDevice()&&(this.enterText.bind(_event._down,function(t){this.touchText=this.focus=!0}.bind(this)),this.enterText.bind(_event._up,function(t){this.touchText=this.focus=!1;this.starty=void 0}.bind(this)));this.scrollBar.bind(_event._down,function(t){t.stopPropagation();t.preventDefault();this.starty=t.pageY;this.focus=!0}.bind(this));this.parent.bind(_event._up,function(t){this.focus=!1;this.starty=void 0}.bind(this));this.scrollBar.bind(_event._up,function(t){t.stopPropagation();t.preventDefault();this.focus=!1;this.starty=void 0}.bind(this));t=[this.scroll,this.rollerText,this.parent];isTouchDevice()&&(t=[this.scroll,this.enterText]);for(i=0;i<t.length;i++)t[i].bind(_event._move,function(t){t.stopPropagation();if(this.focus){pageY=isPhone()||isPad()?t.originalEvent.targetTouches[0].pageY:t.pageY;var i=this.touchText?-pageY+this.starty:pageY-this.starty;t=-i/this.barDistance;i=this.scrollBar.top()+i/this.fScale;t=this.enterText.top()+this.distance*t*1.1/this.fScale;i<=this.scrollWidth&&(i=this.scrollWidth);i>=this.barDistance&&(i=this.barDistance);0<=t&&(t=0);t<=-this.distance&&(t=-this.distance);this.scrollBar.css({top:i+"px"});this.enterText.css({top:t+"px"});this.starty=pageY}}.bind(this));this.bottomPoint.bind(_event._up,function(t){t.stopPropagation();this.focus=this.bottomDown=!1;this.bottomDownTimer&&(clearInterval(this.bottomDownTimer),this.bottomDownTimer=null)}.bind(this));this.bottomPoint.bind(_event._down,function(t){t.stopPropagation();this.bottomDown=this.focus=!0;this.scrollBottom();this.bottomDown&&(this.bottomDownTimer=setInterval(this.scrollBottom.bind(this),100))}.bind(this));this.topPoint.bind(_event._down,function(t){t.stopPropagation();this.focus=this.topDown=!0;this.scrollTop();this.topDown&&(this.topDownTimer=setInterval(this.scrollTop.bind(this),100))}.bind(this));this.topPoint.bind(_event._up,function(t){t.stopPropagation();this.focus=this.topDown=!1;this.topDownTimer&&(clearInterval(this.topDownTimer),this.topDownTimer=null)}.bind(this))},scrollBottom:function(){this.textTop=this.enterText.top();this.barTop=this.scrollBar.top();this.textTop-=.1*this.distance;this.barTop+=.1*this.barDistance;this.textTop<=-this.distance&&(this.textTop=-this.distance);this.barTop>=this.barDistance&&(this.barTop=this.barDistance);this.enterText.css({top:this.textTop+"px"});this.scrollBar.css({top:this.barTop+"px"})},scrollTop:function(){this.textTop=this.enterText.top();this.barTop=this.scrollBar.top();this.textTop+=.1*this.distance;this.barTop-=.1*this.barDistance;0<=this.textTop&&(this.textTop=0);this.barTop<=this.scrollWidth&&(this.barTop=this.scrollWidth);this.enterText.css({top:this.textTop+"px"});this.scrollBar.css({top:this.barTop+"px"})},initScrollCss:function(){this.scroll.css({position:"absolute",width:this.scrollWidth+"px",right:0,top:"0",height:this.height+"px",background:"#F1F1F1"});this.scrollBar.css({width:.7*this.scrollWidth+"px",background:"#AAAAAB",height:this.barHeight,cursor:"pointer",left:.15*this.scrollWidth+"px",top:this.scrollWidth+"px",position:"absolute"});this.topPoint.css({cursor:"pointer",width:this.scrollWidth+"px",height:this.scrollWidth+"px",background:"#F1F1F1",position:"absolute",top:0});this.bottomPoint.css({cursor:"pointer",width:this.scrollWidth+"px",height:this.scrollWidth+"px",background:"#F1F1F1",position:"absolute",bottom:0});this.topIcon.css({position:"absolute",left:.18*this.scrollWidth+"px",top:.3*this.scrollWidth+"px","border-left":.3*this.scrollWidth+"px solid transparent","border-right":.3*this.scrollWidth+"px solid transparent","border-bottom":.3*this.scrollWidth+"px solid #A3A3A3"});this.bottomIcon.css({position:"absolute",left:.18*this.scrollWidth+"px",bottom:.3*this.scrollWidth+"px","border-left":.3*this.scrollWidth+"px solid transparent","border-right":.3*this.scrollWidth+"px solid transparent","border-top":.3*this.scrollWidth+"px solid #A3A3A3"})},parseConfig:function(t){return{x:t.location.x,y:t.location.y,width:t.location.width,height:t.location.height,reflection:t.location.reflection,reflectionType:t.location.reflectionType,reflectionAlpha:t.location.reflectionAlpha,alpha:t.alpha,rotation:t.location.rotation,textStr:t.textStr?t.textStr:t.formats.defaultFormat.htmlText,selectable:t.selectable,highlightsBool:t.highlightsBool,highlightsURL:t.highlightsURL,highlightsLabel:t.highlightsLabel,pageH:t.formats.defaultFormat.pageH,pageW:t.formats.defaultFormat.pageW,barType:t.barType,bgalpha:t.background.alpha,fillBg:t.background.fillBg,bgcolor:t.background.color,action:t.action,hasShadow:parseBool(t.shadow.hasDropShadow),shadow:t.shadow,languageLayout:t.languageLayout,animation:t.animation}},initEvents:function(){function t(t){t.stopPropagation&&t.stopPropagation()}this.textDown.click(function(){var t=this.text.scrollTop();this.text.animate({scrollTop:t+50},100)}.bind(this));this.textUp.click(function(){var t=this.text.scrollTop();this.text.animate({scrollTop:t-50},100)}.bind(this));var i;i=$.browser.mozilla?"DOMMouseScroll":"mousewheel";this.enterText.bind(i,t);this.rollerText.bind(i,t);this.rollerText.bind(_event._down,t);this.rollerText.bind(_event._up,t);this.addActionEvent(this.container)},setBarType:function(){this.textUp.css({"background-attachment":"fixed",position:"absolute",margin:"auto",width:"23px",height:"23px",bottom:"0px",right:"26px","background-color":"#FFFFFF",border:"1px solid"});this.textDown.css({position:"absolute",margin:"auto",width:"23px",height:"23px",bottom:"0px",right:"0px","background-attachment":"fixed","background-color":"#FFFFFF",border:"1px solid"});this.rollerText.css({"word-wrap":"break-word","overflow-x":"hidden","overflow-y":"scroll",position:"absolute",width:this.width+"px",height:this.height+"px"});this.setRotation(this.rollerText,this.config.rotation)},onResize:function(t,i){this.pageWidth=t;this.pageHeight=i;this.fScale=this.pageHeight/this.originHeight/this.adjustFontSize;this.setPosition();this.resizeText(this.pageHeight);this.enterText.height()>this.height&&(this.scroll||this.initScroll(),this.distance=this.enterText.height()-this.height+this.scrollWidth/2,this.barHeight=(this.height-2*this.scrollWidth)*(this.height-2*this.scrollWidth)/this.enterText.height(),this.barDistance=this.height-this.barHeight-this.scrollWidth,this.initScrollCss(),this.barTop=-this.enterText.top()/this.distance*this.barDistance,this.barTop<=this.scrollWidth&&(this.barTop=this.scrollWidth),this.barTop>=this.barDistance&&(this.barTop=this.barDistance),this.scrollBar.css({top:this.barTop+"px"}))},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({left:this.x+"px",top:this.y+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var t=getAnimationEnd(),i=this.config.animation;this.container.css({animation:i.name+" "+i.duration+"s "+i.timeFun+" "+i.delay+"s "+i.count+" "+i.direction});this.container.one(t,function(){this.container.css({animation:""})}.bind(this))}},resizeText:function(t){this.fScale=t=t/this.originHeight/this.adjustFontSize;this.rollerText.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+t+")","-moz-transform":"scale("+t+")","-ms-transform":"scale("+t+")","-o-transform":"scale("+t+")",transform:"scale("+t+")"});this.container.css({width:this.width*t,height:this.height*t})}}).extend(PageItem.Item);var PageEditor={AnnoType:{ANNO_LINK:"com.mobiano.flipbook.pageeditor.TAnnoLink",ANNO_YOUTUBE:"com.mobiano.flipbook.pageeditor.TAnnoYouTube",ANNO_YOUTUBE1:"com.mobiano.flipbook.pageeditor::TAnnoYoutubePlayer",ANNO_YOUTUBE2:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer02",ANNO_YOUTUBE3:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer03",ANNO_YOUTUBE4:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer04",ANNO_YOUTUBE5:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer05",ANNO_YOUTUBE6:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer06",ANNO_YOUTUBE7:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer07",ANNO_YOUTUBE8:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer08",ANNO_VIDEO1:"com.mobiano.flipbook.pageeditor::TAnnoVideoPlayer",ANNO_VIDEO2:"com.mobiano.flipbook.pageeditor.player::TAnnoSimpleVideoPlayer",ANNO_AUDIO1:"com.mobiano.flipbook.sound.TAnnoAdvancedSound",ANNO_AUDIO2:"com.mobiano.flipbook.sound.TAnnoWavemusicPlayer",ANNO_AUDIO3:"com.mobiano.flipbook.pageeditor::TAnnoPlugIn",ANNO_AUDIO4:"com.mobiano.flipbook.sound.TAnnoBackgroundSound",ANNO_AUDIO5:"",ANNO_AUDIO6:"",ANNO_AUDIO7:"",ANNO_AUDIO8:"",ANNO_AUDIO9:"",ANNO_VIMEO:"com.mobiano.flipbook.pageeditor.vimeoPlayer::TAnnoVimeoPlayer",ANNO_VIMEO2:"com.mobiano.flipbook.pageeditor.vimeoPlayer.TAnnoVimeoPopUpPlayer",ANNOHTML_VIDEO:"com.mobiano.flipbook.pageeditor::TAnnoHTMLMovie",ANNO_VIDEO:"com.mobiano.flipbook.pageeditor.TAnnoMovie",ANNO_AUDIO:"com.mobiano.flipbook.pageeditor.TAnnoSound",ANNO_IMAGE:"com.mobiano.flipbook.pageeditor.TAnnoImage",ANNO_BUTTON:"com.mobiano.flipbook.pageeditor.TAnnoButton",ANNO_DYNAMICBUTTON:"com.mobiano.flipbook.pageeditor::TAnnoDynamicButton",ANNO_NEW_AUDIO:"com.mobiano.flipbook.sound.TAnnoSound",ANNO_LINE:"com.mobiano.flipbook.pageeditor.shapes::TAnnoLine",ANNO_ARROW:"com.mobiano.flipbook.pageeditor.shapes::TAnnoArrow",ANNO_ROUND:"com.mobiano.flipbook.pageeditor.shapes::TAnnoEllipse",ANNO_RECTANGLE:"com.mobiano.flipbook.pageeditor.shapes::TAnnoRectangle",ANNO_TRIANGLE:"com.mobiano.flipbook.pageeditor.shapes::TAnnoTriangle",ANNO_PRISMATIC:"com.mobiano.flipbook.pageeditor.shapes::TAnnoPrismatic",ANNO_PARALLELOGRAM:"com.mobiano.flipbook.pageeditor.shapes::TAnnoParallelogram",ANNO_PENTAGON:"com.mobiano.flipbook.pageeditor.shapes::TAnnoPentagon",ANNO_HEXAGON:"com.mobiano.flipbook.pageeditor.shapes::TAnnoHexagon",ANNO_PENTAGON:"com.mobiano.flipbook.pageeditor.shapes::TAnnoPentagon",ANNO_DOVETAILED:"com.mobiano.flipbook.pageeditor.shapes::TAnnoDovetailed",ANNO_FLOWCHART:"com.mobiano.flipbook.pageeditor.shapes::TAnnoFlowChart",ANNO_CYLINDER:"com.mobiano.flipbook.pageeditor.shapes::TAnnoCylinder",ANNO_TRAPEZOID:"com.mobiano.flipbook.pageeditor.shapes::TAnnoTrapezoid",ANNO_RIGHTARROW:"com.mobiano.flipbook.pageeditor.shapes::TAnnoRightArrow",ANNO_VIRTUALEND:"com.mobiano.flipbook.pageeditor.shapes::TAnnoVirtualEnd",ANNO_CROSS:"com.mobiano.flipbook.pageeditor.shapes::TAnnoCross",ANNO_AREA:"com.mobiano.flipbook.pageeditor::TAnnoHighLightArea",ANNO_FLASHSHOW:"com.mobiano.flipbook.pageeditor.TAnnoSWF1",ANNO_PRINT:"com.mobiano.flipbook.pageeditor::TAnnoPrint",ANNO_ZOOM:"com.mobiano.flipbook.pageeditor::TAnnoZoom",ANNO_TEXT:"com.mobiano.flipbook.pageeditor::TAnnoText",ANNO_ATEXT:"com.mobiano.flipbook.pageeditor::TAnnoDynamicText",ANNO_ROLLERTEXT:"com.mobiano.flipbook.pageeditor::TAnnoRollerText",ANNO_STARTEXT:"com.mobiano.flipbook.pageeditor::TAnnoStarwarsText",ANNO_TEXTANIM:"com.mobiano.flipbook.pageeditor.textAnim::TAnnoTextAnim",ANNO_EFFECTTEXT:"com.mobiano.flipbook.pageeditor.TAnnoEffectText",ANNO_CALLOUT:"com.mobiano.flipbook.pageeditor.shapes::TAnnoCallout",ANNO_ADVANCEDSOUND:"com.mobiano.flipbook.pageeditor::TAnnoAdvancedSound1",ANNO_ALPHATRANSITIONBANNER:"com.mobiano.flipbook.pageeditor.TAnnoAlphaTransitionBanner",ANNO_EMBEDDEDSLIDESHOW:"com.mobiano.flipbook.pageeditor.TAnnoEmbeddedSlideshow",ANNO_ATIMAGE:"com.mobiano.flipbook.pageeditor.TAnnoClipart",ANNO_BANNER:"com.mobiano.flipbook.pageeditor::TAnnoBanner",ANNO_CAROUSEL:"com.mobiano.flipbook.pageeditor.TAnnoCarouselViewer",ANNO_DYNSHOW:"com.mobiano.flipbook.pageeditor::TAnnoDynamicShowPhoto",ANNO_FLIPJUMP:"com.mobiano.flipbook.pageeditor.TAnnoDynamicTurnPhoto",ANNO_PLUGIN:"com.mobiano.flipbook.pageeditor::TAnnoPlugIn",ANNO_SWF:"com.mobiano.flipbook.pageeditor.TAnnoSWF",ANNO_CART:"com.mobiano.flipbook.pageeditor.TAnnoCart",ANNO_HOTSPOTS:"com.mobiano.flipbook.pageeditor.TAnnoHotSpots"},PlayEvt:{EVT_PLAY:"EVT_PageViewed",EVT_STOP:"EVT_PageOffView"},TriggerEventType:{MouseDown:"mouseDown",MouseOver:"mouseOver",MouseOut:"mouseOut",MouseUp:"mouseUp",MouseMove:"mouseMove",MouseLeave:"mouseLeave"},MouseOverType:{Zoom:"1",AddBorder:"2"},ActionType:{GOTO_PAGE:"com.mobiano.flipbook.pageeditor.TAnnoActionGotoPage",OPEN_URL:"com.mobiano.flipbook.pageeditor.TAnnoActionOpenURL",OPEN_WINDOW:"com.mobiano.flipbook.pageeditor.TAnnoActionOpenWindow",SLIDE_SHOW:"com.mobiano.flipbook.pageeditor.TAnnoActionPhotoSlide",ACTION_JS:"com.mobiano.flipbook.pageeditor.TAnnoActionJavascript",PLAY_AUDIO:"com.mobiano.flipbook.pageeditor.TAnnoActionPlayAudio",WINDOW_HTML:"com.mobiano.flipbook.pageeditor.TAnnoActionWindowHtml",PLAY_VIDEO:"com.mobiano.flipbook.pageeditor.TAnnoActionPlayVideo",SHOW_INFORMATION:"com.mobiano.flipbook.pageeditor.TAnnoActionShowInformation",QUIZ:"com.mobiano.flipbook.pageeditor.TAnnoActionQuiz",PLAYVIDEO:"com.mobiano.flipbook.Action.TAnnoActionPlayVideo",SWF_SLIDE:"com.mobiano.flipbook.pageeditor.TAnnoActionSwfSlide"},WindowType:{OPEN_YOUTUBE:"TYPE_YOUTUBE",OPEN_VIMEO:"TYPE_VIMEO",OPEN_DAILYMOTION:"TYPE_DAILYMOTION",OPEN_TYPE_WISTIA:"TYPE_WISTIA",OPEN_TYPE_YOUKU:"TYPE_YOUKU",OPEN_TYPE_QQ:"TYPE_QQ",OPEN_VIDEO:"0",OPEN_FLASH:"1",OPEN_SHOW_TEXT:"4"},PlayerType:{SKIN_1:"Skin 1",SKIN_2:"Skin 2",SKIN_3:"Skin 3"},AudioPlayer:{GLASS:"GlassAudioPlayer",SIMPLE:"SimpleAudioPlayer",STANDARD1:"StandardAudioPlayer",STANDARD2:"StandardAudioPlayer02",STANDARD3:"StandardAudioPlayer03",STANDARD4:"StandardAudioPlayer04",STANDARD5:"StandardAudioPlayer05",STANDARD6:"StandardAudioPlayer06"},Effect:{FADEIN:"com.mobiano.flipbook.pageeditor.effect::TFadeInEffect",CUTTING:"com.mobiano.flipbook.pageeditor.effect::TCuttingEffect",FLY_IN:"com.mobiano.flipbook.pageeditor.effect::TFlyEffect",INDENTATION:"com.mobiano.flipbook.pageeditor.effect::TIndentationEffect"},HighLight:{GREENBOXSTOP:"Animated Green Box Stop",GREENBOX:"Animated Green Box",ORIGINCIRCLE:"Animated Orange Circle",REDBOX:"Animated Red Box",REDCIRCLE:"Animated Red Circle",BLUESQUARE:"blue_squarelight",GREENCIRCLEROTATE:"Green Circle Rotating",GREENLINELTOR:"Green Line Left to Right",GREENLINERTOL:"Green Line Right to Left",GREENSQUARE:"green_squarelight",LINESQUARE:"lines_square",ORANGEHIGHLIGHT:"Orange highlighter",ORANGECIRCLELIGHT:"orange_circlelight",PUSHSQUARE:"push_square",REDHIGHLIGHT:"Red highlighter",REDBOXBLINK:"Red Box Blink",REDLINEBLINK:"Red Line Blink",REDLINELTOR:"Red Line Left to Right",REDLINERTOL:"Red Line right to left",SPINSQUARE:"spin_square"}};Class("PageItemFactory",{createItem:function(t,i,e,o,s,n){if(!i)return null;var h=i.annotype,a=null;if(!this.browserSupport(h))return null;n=s+"-"+n;h==PageEditor.AnnoType.ANNO_LINK&&(a=new PageItem.Link(t,i,e,o));if(h==PageEditor.AnnoType.ANNO_YOUTUBE||h==PageEditor.AnnoType.ANNO_YOUTUBE1||h==PageEditor.AnnoType.ANNO_YOUTUBE2||h==PageEditor.AnnoType.ANNO_YOUTUBE3||h==PageEditor.AnnoType.ANNO_YOUTUBE4||h==PageEditor.AnnoType.ANNO_YOUTUBE6||h==PageEditor.AnnoType.ANNO_YOUTUBE7||h==PageEditor.AnnoType.ANNO_YOUTUBE8)a=new PageItem.Youtube(t,i,e,o);h==PageEditor.AnnoType.ANNO_YOUTUBE5&&(a=new PageItem.PopUpVimeo(t,i,e,o,"youtube"));h==PageEditor.AnnoType.ANNO_VIMEO&&(a=new PageItem.Vimeo(t,i,e,o));h==PageEditor.AnnoType.ANNO_VIMEO2&&(a=new PageItem.PopUpVimeo(t,i,e,o,"vimeo"));h!=PageEditor.AnnoType.ANNO_AUDIO&&h!=PageEditor.AnnoType.ANNO_NEW_AUDIO||i.playerType!=PageEditor.PlayerType.SKIN_3||(a=new PageItem.Audio(t,i,e,o,"default"));h!=PageEditor.AnnoType.ANNO_AUDIO&&h!=PageEditor.AnnoType.ANNO_NEW_AUDIO||i.playerType!=PageEditor.PlayerType.SKIN_1||(a=new PageItem.Audio(t,i,e,o,"skin1"));h!=PageEditor.AnnoType.ANNO_AUDIO&&h!=PageEditor.AnnoType.ANNO_NEW_AUDIO||i.playerType!=PageEditor.PlayerType.SKIN_2||(a=new PageItem.Audio(t,i,e,o,"skin2"));h==PageEditor.AnnoType.ANNO_AUDIO1&&(a=new PageItem.Audio(t,i,e,o,"advanced"));h==PageEditor.AnnoType.ANNO_AUDIO2&&(a=new PageItem.Audio(t,i,e,o,"wave"));h==PageEditor.AnnoType.ANNO_AUDIO4&&(a=new PageItem.Audio(t,i,e,o,"background"));if(h==PageEditor.AnnoType.ANNO_PLUGIN&&i.className in audioThemeNames){var a=void 0,r=i.className;r==PageEditor.AudioPlayer.GLASS&&(a="glass");r==PageEditor.AudioPlayer.SIMPLE&&(a="simple");r==PageEditor.AudioPlayer.STANDARD1&&(a="enjoy");r==PageEditor.AudioPlayer.STANDARD2&&(a="decent");r==PageEditor.AudioPlayer.STANDARD3&&(a="tree");r==PageEditor.AudioPlayer.STANDARD4&&(a="christmas");r==PageEditor.AudioPlayer.STANDARD5&&(a="turnonoff");r==PageEditor.AudioPlayer.STANDARD6&&(a="fade");a=new PageItem.Audio(t,i,e,o,a)}h==PageEditor.AnnoType.ANNO_IMAGE&&(i.imgOriginalProportions||(i.imgOriginalProportions="false"),a=new PageItem.Image(t,i,e,o));h==PageEditor.AnnoType.ANNO_BUTTON&&(a=new PageItem.Button(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_DYNAMICBUTTON&&(a=new PageItem.DynamicButton(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_SWF&&(a=new PageItem.FlashSwf(t,i,e,o));h==PageEditor.AnnoType.ANNO_FLASHSHOW&&(a=new PageItem.FlashShow(t,i,e,o));h==PageEditor.AnnoType.ANNO_HOTSPOTS&&(a=new PageItem.HotSpots(t,i,e,o));h==PageEditor.AnnoType.ANNO_LINE&&(a=new PageItem.Line(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_ARROW&&(a=new PageItem.Arrow(t,i,e,o));h==PageEditor.AnnoType.ANNO_TRIANGLE&&(a=new PageItem.Triangle(t,i,e,o));h==PageEditor.AnnoType.ANNO_PRISMATIC&&(a=new PageItem.Prismatic(t,i,e,o));h==PageEditor.AnnoType.ANNO_CROSS&&(a=new PageItem.Cross(t,i,e,o));h==PageEditor.AnnoType.ANNO_VIRTUALEND&&(a=new PageItem.VirtualEnd(t,i,e,o));h==PageEditor.AnnoType.ANNO_RIGHTARROW&&(a=new PageItem.RightArrow(t,i,e,o));h==PageEditor.AnnoType.ANNO_TRAPEZOID&&(a=new PageItem.Trapezoid(t,i,e,o));h==PageEditor.AnnoType.ANNO_DOVETAILED&&(a=new PageItem.Dovetailed(t,i,e,o));h==PageEditor.AnnoType.ANNO_FLOWCHART&&(a=new PageItem.FlowChart(t,i,e,o));h==PageEditor.AnnoType.ANNO_CYLINDER&&(a=new PageItem.Cylinder(t,i,e,o));h==PageEditor.AnnoType.ANNO_PENTAGON&&(a=new PageItem.Pentagon(t,i,e,o));h==PageEditor.AnnoType.ANNO_HEXAGON&&(a=new PageItem.Hexagon(t,i,e,o));h==PageEditor.AnnoType.ANNO_PARALLELOGRAM&&(a=new PageItem.Parallelogram(t,i,e,o));h==PageEditor.AnnoType.ANNO_ROUND&&(a=new PageItem.Round(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_RECTANGLE&&(a=new PageItem.Rectangle(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_TEXT&&(a=new PageItem.Text(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_ROLLERTEXT&&(a=new PageItem.RollerText(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_AREA&&(a=new PageItem.Area(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_CALLOUT&&(a=new PageItem.Callout(t,i,e,o));h==PageEditor.AnnoType.ANNO_ATEXT&&(a=new PageItem.AText(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_STARTEXT&&(a=new PageItem.StarText(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_TEXTANIM&&(a=new PageItem.TextAmin(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_ATIMAGE&&(a=new PageItem.PngImage(t,i,e,o));h==PageEditor.AnnoType.ANNO_EFFECTTEXT&&(a=new PageItem.EffectText(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_ADVANCEDSOUND&&(a=new PageItem.Sound(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_CAROUSEL&&(a=new PageItem.Carousel(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_DYNSHOW&&(a=new PageItem.DynamicShow(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_BANNER&&(a=new PageItem.Banner(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_FLIPJUMP&&(a=new PageItem.FlipJump(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_PLUGIN&&i.className==PLUGIN_MAGNETICS&&(a=new PageItem.FocusJump(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_PLUGIN&&i.className==PLUGIN_ROTATE3D&&(a=new PageItem.Rotate3D(t,i,e,o,n));h==PageEditor.AnnoType.ANNO_VIDEO1&&(a=isPhone()||isPad()?new PageItem.PhoneVideo(t,i,e,o):new PageItem.Video(t,i,e,o,"smallblack"));h==PageEditor.AnnoType.ANNO_VIDEO2&&(a=isPhone()||isPad()?new PageItem.PhoneVideo(t,i,e,o):new PageItem.LoopControlVideo(t,i,e,o));h==PageEditor.AnnoType.ANNO_PLUGIN&&i.className==PLUGIN_VIDEO1&&(a=isPhone()||isPad()?new PageItem.PhoneVideo(t,i,e,o):new PageItem.Video(t,i,e,o,"classic"));h==PageEditor.AnnoType.ANNO_PLUGIN&&i.className==PLUGIN_VIDEO2&&(a=isPhone()||isPad()?new PageItem.PhoneVideo(t,i,e,o):new PageItem.PopUpVideoItem(t,i,e,o));h==PageEditor.AnnoType.ANNO_VIDEO&&(a=isPhone()||isPad()?new PageItem.PhoneVideo(t,i,e,o):new PageItem.Video(t,i,e,o,"round"));h==PageEditor.AnnoType.ANNOHTML_VIDEO&&(a=new PageItem.HtmlVideo(t,i,e,o));h==PageEditor.AnnoType.ANNO_ALPHATRANSITIONBANNER&&(a=new PageItem.AlphaTransitionBanner(t,i,e,o));h==PageEditor.AnnoType.ANNO_EMBEDDEDSLIDESHOW&&(a=new PageItem.EmbeddedSlideshow(t,i,e,o));h==PageEditor.AnnoType.ANNO_PRINT&&(a=new PageItem.Print(t,i,e,o,s));h==PageEditor.AnnoType.ANNO_ZOOM&&(global.popZoomBox||(global.popZoomBox=new PageItem.WindowZoomBox(tmpContainer)),a=new PageItem.WindowZoom(t,i,e,o,s));h==PageEditor.AnnoType.ANNO_CART&&(a=new PageItem.ShoppingCart(t,i,e,o));return a},browserSupport:function(t){return isBelowIE9()?t==PageEditor.AnnoType.ANNO_LINK||t==PageEditor.AnnoType.ANNO_IMAGE||t==PageEditor.AnnoType.ANNO_TEXT||t==PageEditor.AnnoType.ANNO_ALPHATRANSITIONBANNER?!0:!1:!0}});Class("PageEditorParser",{create:function(t,i,e){this.container=t;this.containerWidth=i;this.containerHeight=e},createItemsForPage:function(t){var i=new ObjectPool;if(!this.hasProfessional())return i;global.phoneVideoBox||!isPad()&&!isPhone()||(global.phoneVideoBox=new PhoneVideoBox(tmpContainer));var e=this.getPageAnnos();if(0>=t||e.length<t||0==e[t-1].length)return i;for(var o=new PageItemFactory,e=e[t-1],s=0;s<e.length;s++){var n=e[s];n&&(n=o.createItem(this.container,n,this.containerWidth,this.containerHeight,t,s+1))&&i.add(n)}return i},hasProfessional:function(){if(!global.pageEditor)return!1;var t=this.getPageAnnos();if(!t||0==t.length)return!1;for(var i=0;i<t.length;i++){var e=t[i];if(e&&0<e.length)return!0}return!1},getPageAnnos:function(){var t=global.pageEditor;t instanceof Array||(t=t.pageAnnos);return t}});var DockMenu=Class({create:function(t,i,e){this.menu=$("<div id='dockMenu' class='dockMenu'></div>");this.menuContent=$("<div id='dockMenuContent' class='dockMenuContent'></div>");this.itemArray=[];this.width=0;this.height=130;t.append(this.menu);this.menu.append(this.menuContent);this.initStyle();this.addItem(i,e);this.initEvent();this.hide()},initStyle:function(){this.menu.css({width:"100%",height:this.height+"px"});this.menuContent.css({height:"100%",width:"100%",left:0,bottom:0})},addItem:function(t,i){for(var e=BookInfo.getThumbnailPages(),o=i-t+1,s=0;s<o;s++){var n=rightToLeft?i-s:t+s;if(void 0!=e[n]){var h=e[n][1],a=[e[n][0]];void 0!=h&&a.push(h);h=new DockMenuItem(this.menuContent,a);h.pageIndex=e[n][0];this.itemArray.push(h)}}this.resize()},addObj:function(t,i){"before"==i?t.prependTo(this.menuContent):t.appendTo(this.menuContent)},resize:function(){windowWidth<$(this.menuContent).width()?$(this.menuContent).css({"margin-left":(windowWidth-$(this.menuContent).width())/2-25+"px"}):$(this.menuContent).css({"margin-left":"0px"})},setPosition:function(t,i,e){if(void 0==e||null==e)e=["left","top"];this.menu.css(e[0],t);this.menu.css(e[1],i)},initEvent:function(){function i(){n||(n=!0,window.setTimeout(t,15))}function t(){for(var t=0;t<a.itemArray.length;t++)a.itemArray[t]&&a.itemArray[t].sizeDockIcons(e,o);n=!1;h&&(h=!1,i())}var e,o,s=this.menu,n=!1,h=!1,a=this;$(s).bind(_event._move,function(t){s.is(":visible")&&(e=t.pageX,o=t.pageY,h=!0,i())});$(s).bind(_event._leave,function(t){s.is(":visible")&&(o=e=1e3,h=!0,i())})},show:function(){this.menu.show();this.resize();for(var t=0;t<this.itemArray.length;t++)this.itemArray[t].fillContent()},hide:function(){this.menu.hide()},clearHighLight:function(){this.currentItem&&this.currentItem.clearHighLight()},setHighLight:function(t){for(var i=0;i<this.itemArray.length;i++)0<=this.itemArray[i].imgArr.indexOf(t)&&(this.itemArray[i].setHighLight(),this.currentItem=this.itemArray[i]);for(i=0;i<this.itemArray.length;i++)this.itemArray[i].fillContent()}}),DockMenuItem=Class({create:function(t,i){this.item=$("<div id='item' class='dockMenuItem'></div>");this.imgArr=i;this.doubleImage=2>i.length?!1:!0;this.itemHeight=60;this.itemWidth=0;this.toScale=1.5;this.padding=10;t.append(this.item);this.initItem()},initItem:function(){this.itemContent=$("<div class='dockMenuItemContent dockMenuItemShadow'></div>");this.itemCaption=$("<span class='dockMenuItemCaption'/>");this.itemCaptionAfter=$("<div class='dockMenuItemCaptionAfter'/>");this.item.append(this.itemContent);this.item.append(this.itemCaption);this.itemCaption.after(this.itemCaptionAfter);$(this.itemCaptionAfter).css({"background-image":"url("+uiBaseURL+"span.png)"});this.addContent();this.resize(this.itemHeight);this.addEvent()},resize:function(t){var i=t*bookConfig.largePageWidth*2/bookConfig.largePageHeight;!1===this.doubleImage&&(i/=2);this.item.css({width:i+"px",height:"130px"});this.item.css({"padding-left":this.padding+"px"});this.itemContent.css({width:i+"px",height:t+"px"});this.resizeContent(i,t)},addContent:function(){!1===this.doubleImage?(this.itemIcon=$("<img/>"),this.itemContent.append(this.itemIcon)):!0===this.doubleImage&&(this.itemLeftIcon=$("<img/>"),this.itemRightIcon=$("<img/>"),this.itemContent.append(this.itemLeftIcon),this.itemContent.append(this.itemRightIcon))},fillContent:function(){!1===this.doubleImage?(this.fillImage(this.itemIcon,this.imgArr[0]),this.itemCaption.text(this.imgArr[0])):!0===this.doubleImage&&(this.fillImage(this.itemLeftIcon,this.imgArr[0]),this.fillImage(this.itemRightIcon,this.imgArr[1]),this.itemCaption.text(this.imgArr[0]+"-"+this.imgArr[1]))},fillImage:function(i,t){var e=function(t){i.attr("src",t)}.bind(this);fillImageAfterLoaded(t,"thumb",e)},resizeContent:function(t,i){!1===this.doubleImage?this.itemIcon.css({width:t+"px",height:i+"px"}):!0===this.doubleImage&&(this.itemLeftIcon.css({width:t/2+"px",height:i+"px"}),this.itemRightIcon.css({width:t/2+"px",height:i+"px"}),this.itemLeftIcon.css({position:"absolute",left:"0px"}),this.itemRightIcon.css({position:"absolute",left:t/2+"px"}))},sizeDockIcons:function(t,i){var e=this.itemHeight,o=this.itemHeight*this.toScale-e,s=$(this.item).offset().left+$(this.item).outerWidth()/2,n=$(this.item).offset().top+$(this.item).outerHeight()/2,s=this.distance(s,n,t,i),e=(1-Math.min(1,Math.max(0,s/180)))*o+e;this.resize(e)},distance:function(t,i,e,o){t=e-t;i=o-i;return Math.sqrt(t*t+i*i)},addEvent:function(){this.item.bind(_event._end,function(){gotoPageFun(this.pageIndex)}.bind(this));this.item.bind(_event._over,function(){this.itemCaption.css("display","inline-block");this.itemCaptionAfter.css("display","block")}.bind(this));this.item.bind(_event._leave,function(){this.itemCaption.hide();this.itemCaptionAfter.hide()}.bind(this))},clearHighLight:function(){this.itemContent.css("border","");this.itemContent.css("border-radius","0px")},setHighLight:function(){this.itemContent.css("border","3px solid #6bc30d");this.itemContent.css("border-radius","3px")}}),PageFlipShadow=Class({create:function(t,i){this.parent=t;this.pageIndex=i;this.init()},init:function(){bookConfig.FlipDirection?(this.flipBackShadow=$("<div class='flip-vertical-shadowB'></div>"),this.flipFrontShadow=$("<div class='flip-vertical-topshadow'></div>")):(this.flipBackShadow=$("<div class='flip-shadowB'></div>"),this.flipFrontShadow=$("<div class='flip-topshadow'></div>"));this.parent.append(this.flipBackShadow);this.parent.append(this.flipFrontShadow)},flip:function(t,i,e){var o=t.shadowRate;e=t.rotate;var s=.9<o?1+2*(1-o)/.1:3*o/.9;if(isPhone()||isPad())s=1;o=.9<o?.2*(1-o)/.1:.1>o?.2*o/.1:.2;if(bookConfig.FlipDirection){var n=(t.frontShadowDistance-100*(90<e?0:s))/Math.cos(e*Math.PI/180),n=transformCSS({scaleY:s,rotate:-e,tran:{x:0,y:n}});t=transformCSS({scaleY:s,rotate:e,tran:{x:-t.maskTranY,y:t.maskTranX}})}else n=(t.frontShadowDistance-100*(90<e?0:s))/Math.cos(e*Math.PI/180),n=transformCSS({scaleX:s,rotate:-e,tran:{x:n,y:0}}),t=transformCSS({scaleX:s,rotate:e,tran:{x:t.maskTranX,y:t.maskTranY}});this.flipFrontShadow.css(n);this.flipBackShadow.css(t);this.beforeFlip(e,i);isPhone()||isPad()||(this.flipFrontShadow.css({opacity:o}),this.flipBackShadow.css({opacity:o}))},beforeFlip:function(t,i){i?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));if(bookConfig.FlipDirection){90<t?(this.flipFrontShadow.css({bottom:"0px"}),this.flipBackShadow.css({top:"100%"})):(this.flipFrontShadow.css({bottom:"auto"}),this.flipBackShadow.css({top:"0px"}));var e=0<=t&&180>t?100/3:100*(this.width+this.maskWidth)/(3*this.maskWidth),o=90<t?100:0}else 90<t?(this.flipFrontShadow.css({right:"0px"}),this.flipBackShadow.css({left:"100%"})):(this.flipFrontShadow.css({right:"auto"}),this.flipBackShadow.css({left:"0px"})),e=90<t?100:0,o=0<=t&&180>t?100*(this.height+this.maskWidth)/(3*this.maskWidth):100/3;this.flipFrontShadow.css({"transform-origin":e+"% "+o+"%","-webkit-transform-origin":e+"% "+o+"%","-moz-transform-origin":e+"% "+o+"%","-ms-transform-origin":e+"% "+o+"%"})},clear:function(){this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"});this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"})},resize:function(t,i){this.width=t;this.height=i;this.maskWidth=parseInt(Math.sqrt(Math.pow(t,2)+Math.pow(i,2)));bookConfig.FlipDirection?(this.flipFrontShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipBackShadow.css({width:this.maskWidth,left:(this.width-this.maskWidth)/2})):(this.flipFrontShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipBackShadow.css({height:this.maskWidth,top:(this.height-this.maskWidth)/2}))}}),HardPageFlipShadow=Class({init:function(){this._super();var t=Color(bookConfig.thicknessColor);this.flipThickWidth=getMaxThicknessWidth()/5;this.flipThick=bookConfig.FlipDirection?$("<div class='flip-vertical-thick'></div>"):$("<div class='flip-thick'></div>");this.flipThick.css({background:t.reduce(50)});this.parent.append(this.flipThick)},flip:function(t,i){var e=t.shadowRate?t.shadowRate:0,e=.5>e?2*e:2*(1-e),o={"background-image":"none","box-shadow":"rgba(0,0,0,0.3) 0 0 2000px 5000px inset",width:"100%",height:"100%",top:0,left:0};this.flipFrontShadow.css(o);this.flipFrontShadow.css({opacity:e});this.flipBackShadow.css(o);this.flipBackShadow.css({opacity:e});e=bookConfig.FlipDirection?transformCSS({perspective:5e3,rotateX:-t.rotate,scaleY:this.flipThickWidth/6*e}):transformCSS({perspective:5e3,rotateY:-t.rotate,scaleX:this.flipThickWidth/6*e});this.flipThick.css(e);i?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));this.flipThick&&this.flipThick.css({visibility:"visible"})}}).extend(PageFlipShadow);Class("CoverShadow",{create:function(t,i){this.parent=t;this.direction=bookConfig.FlipDirection;this.init()},init:virtual_function,destroy:virtual_function,onResize:function(){this.direction?(this.parentWidth=this.parent.height(),this.parentHeight=this.parent.width(),this.rotate.delay(this,1)):(this.parentWidth=this.parent.width(),this.parentHeight=this.parent.height())},rotate:function(){var t=transformCSS({rotate:90,tran:{x:this.parentHeight,y:0},origin:{x:0,y:0}});this.flip&&(t=transformCSS({scaleX:-1,rotate:90,tran:{x:this.parentHeight,y:this.parentWidth},origin:{x:0,y:0}}));this.coverShadow&&(this.coverShadow.css({width:this.parentWidth+"px",height:this.parentHeight+"px"}),this.coverShadow.css(t))}});Class("HardCoverShadow",{init:function(){this.coverShadow=$('<div class="cover_shadow"></div>');isBelowIE11()&&this.coverShadow.css("z-index",3);this.leftBorder=$("<div></div>");this.topBorder=$('<div class="hard_top_border"></div>');this.bottomBorder=$('<div class="hard_bottom_border hard_bottom_border_width"></div>');this.rightBorder=$('<div class="hard_right_border"></div>');this.parent.append(this.coverShadow);this.coverShadow.append(this.leftBorder);this.coverShadow.append(this.topBorder);this.coverShadow.append(this.bottomBorder);this.coverShadow.append(this.rightBorder)},onResize:function(){this._super();this.rightBorder.css({height:this.parentHeight-3+"px"})},destroy:function(){this.coverShadow.empty();this.coverShadow.remove()}}).extend(CoverShadow);Class("OuterHardCoverShadow",{create:function(t,i,e){this.style=i;this.flip=!!e;this._super(t)},init:function(){this._super();this.leftBorder.addClass("hard_left_border");this.leftBody=$('<div class="hard_left_body"></div>');this.coverShadow.append(this.leftBody);this.coverShadow.addClass(this.style);this.flip&&this.coverShadow.addClass("flip_x");this.onResize()}}).extend(HardCoverShadow);Class("InnerHardCoverShadow",{create:function(t,i,e,o,s){this.style=i;this.flip=!!e;void 0==o&&(o=0);this.borderWidth=o;this.showLeftShadow=s;this._super(t)},init:function(){this._super();this.showLeftShadow?(this.leftBorder.addClass("hard_inner_left_border"),this.leftCoverBorder=$('<div class="hard_left_cover_border"></div>'),this.coverShadow.append(this.leftCoverBorder)):this.leftBorder.css({display:"none"});this.flip&&this.coverShadow.addClass("flip_x");this.onResize()},onResize:function(){this._super();this.showLeftShadow&&(this.bottomBorder.css({left:"0px",width:"100%"}),this.leftBorder.css({top:this.borderWidth+"px",height:this.parentHeight-2*this.borderWidth+"px"}));this.flip?0!=bookConfig.LeftShadowAlpha&&0!=bookConfig.LeftShadowWidth||this.coverShadow.css("z-index",-1):0!=bookConfig.RightShadowAlpha&&0!=bookConfig.RightShadowWidth||this.coverShadow.css("z-index",-1)}}).extend(HardCoverShadow);Class("NormalCoverShadow",{create:function(t,i,e){this.style=i;this.flip=!!e;this._super(t)},init:function(){this.coverShadow=$('<div class="cover_shadow"></div>');this.coverShadow.addClass(this.style);isBelowIE11()&&this.coverShadow.css("z-index",3);this.leftBorder=$('<div class="normal_left_border"></div>');this.leftBody=$('<div class="normal_left_body"></div>');this.parent.append(this.coverShadow);this.coverShadow.append(this.leftBorder);this.coverShadow.append(this.leftBody);this.flip&&this.coverShadow.addClass("flip_x");this.onResize()},destroy:function(){this.coverShadow.empty();this.coverShadow.remove()}}).extend(CoverShadow);Class("PageShadow",{create:function(t,i,e){this.parent=t;this.pageIndex=i;this.isLeftPage=e;this.isHardPage=parseBool(bookConfig.HardPageEnable)&&!isBelowIE11();this.bindingType=bookConfig.BindingType;this.bindingType||(this.bindingType="side");this.midShadow=this.coverShadow=null},addShadow:function(){this.isEmpty()||this.destroy();this.addCoverShadow();var t=parseBool(bookConfig.addPaperCoil);null!=this.coverShadow||t?this.hidePageShadow():this.addPageShadow();this.onResize()},isEmpty:function(){return null==this.coverShadow&&null==this.midShadow},addCoverShadow:function(){this.coverShadow=this.createCoverShadow()},createCoverShadow:virtual_function,addPageShadow:function(){this.midShadow=this.findPageShadow();this.midShadow||(this.midShadow=$("<div name='midShadow'></div>"));var t=1;this.isLeftPage?(bookConfig.FlipDirection?this.midShadow.attr("class","upShadow"):this.midShadow.attr("class","leftShadow"),t=bookConfig.LeftShadowAlpha):(bookConfig.FlipDirection?this.midShadow.attr("class","downShadow"):this.midShadow.attr("class","rightShadow"),t=bookConfig.RightShadowAlpha);this.midShadow.css({opacity:t});this.parent.append(this.midShadow)},findPageShadow:function(){if(this.midShadow)return this.midShadow;var t=this.parent.children("div[name=midShadow]");return t[0]?$(t[0]):null},hidePageShadow:function(){(this.midShadow=this.findPageShadow())&&this.midShadow.css({display:"none"})},resizePageShadow:function(t){this.midShadow=this.findPageShadow();if(null!=this.midShadow){var i=bookConfig.LeftShadowWidth;this.isLeftPage||(i=bookConfig.RightShadowWidth);i=parseInt(i/450*t);bookConfig.FlipDirection?this.midShadow.css({height:i+"px"}):this.midShadow.css({width:i+"px"})}},onResize:function(t,i){void 0==t?(this.parentWidth=this.parent.width(),this.parentHeight=this.parent.height()):(this.parentWidth=t,this.parentHeight=i);if(this.coverShadow)this.coverShadow.onResize();this.resizePageShadow(this.parentWidth)},destroy:function(){null!=this.coverShadow&&(this.coverShadow.destroy(),this.coverShadow=null);null!=this.midShadow&&(this.midShadow=null)}});Class("NormalPageShadow",{create:function(t,i,e){this._super(t,i,e);this.evenPageCount=totalPageCount},createCoverShadow:function(){var t=1==this.pageIndex&&!bookConfig.isTheBookOpen,i=2==this.pageIndex&&!bookConfig.isTheBookOpen||1==this.pageIndex&&bookConfig.isTheBookOpen,e=this.pageIndex==this.evenPageCount,o=this.pageIndex==this.evenPageCount-1,s=4<this.evenPageCount&&!bookConfig.isTheBookOpen||3<this.evenPageCount&&bookConfig.isTheBookOpen,n=this.isLeftPage;if(this.isHardPage){if(t||e)return new OuterHardCoverShadow(this.parent,this.bindingType,n);if(i||o)return new InnerHardCoverShadow(this.parent,this.bindingType,n,bookConfig.hardCoverBorderWidth,s)}else if(t||e)return new NormalCoverShadow(this.parent,this.bindingType,n);return null}}).extend("PageShadow");Class("SinglePageShadow",{create:function(t,i,e){this._super(t,i,e);this.isRightToLeft=parseBool(bookConfig.RightToLeft)},createCoverShadow:function(){var t=1==this.pageIndex,i=this.pageIndex==bookConfig.totalPageCount;if(this.isHardPage){if(t)return new OuterHardCoverShadow(this.parent,this.bindingType,this.isRightToLeft);if(i)return new InnerHardCoverShadow(this.parent,this.bindingType,this.isRightToLeft,bookConfig.hardCoverBorderWidth,!0)}else if(t)return new NormalCoverShadow(this.parent,this.bindingType,this.isRightToLeft);return null}}).extend("PageShadow");Class("CatalogPageShadow",{create:function(t,i,e){this._super(t,i,e);this.evenPageCount=totalPageCount;this.bindingType="catalog"},createCoverShadow:function(){var t=1==this.pageIndex&&!bookConfig.isTheBookOpen,i=2==this.pageIndex&&!bookConfig.isTheBookOpen||1==this.pageIndex&&bookConfig.isTheBookOpen,e=this.pageIndex==this.evenPageCount,o=this.pageIndex==this.evenPageCount-1,s=4<this.evenPageCount&&!bookConfig.isTheBookOpen||3<this.evenPageCount&&bookConfig.isTheBookOpen,n=this.isLeftPage;if(this.isHardPage){if(t||e)return new OuterHardCoverShadow(this.parent,this.bindingType,n);if(i||o)return new InnerHardCoverShadow(this.parent,this.bindingType,n,0,s)}else if(t||e)return new NormalCoverShadow(this.parent,this.bindingType,n);return null},addPageShadow:function(){this._super();bookConfig.FlipDirection?this.isLeftPage?this.midShadow.attr("class","catalogUpShadow"):this.midShadow.attr("class","catalogDownShadow"):this.isLeftPage?this.midShadow.attr("class","catalogLeftShadow"):this.midShadow.attr("class","catalogRightShadow")}}).extend("PageShadow");Class("SlidePageShadow",{createCoverShadow:function(){},addShadow:function(){}}).extend("PageShadow");var BorderSewing={deep:{top:{url:"deep_top_sewing.png",width:28,height:42},left:{url:"deep_left_sewing.png",width:71,height:28},right:{url:"deep_right_sewing.png",width:71,height:28},bottom:{url:"deep_bottom_sewing.png",width:28,height:42},renderBorder:!0},normal:{top:{url:"normal_top_sewing.png",width:28,height:10},left:{url:"normal_left_sewing.png",width:10,height:28},right:{url:"normal_right_sewing.png",width:10,height:28},bottom:{url:"normal_bottom_sewing.png",width:28,height:20},renderBorder:!0},flat:{top:{url:"flat_top_sewing.png",width:28,height:10},left:{url:"flat_left_sewing.png",width:10,height:28},right:{url:"flat_right_sewing.png",width:10,height:28},bottom:{url:"flat_bottom_sewing.png",width:28,height:10},renderBorder:!1}},PageTextureResource={leather1:{texture:"leather1.png",sewing:BorderSewing.deep},leather2:{texture:"leather2.png",sewing:BorderSewing.normal},cloth1:{texture:"cloth1.png",sewing:BorderSewing.flat},cloth2:{texture:"cloth2.png",sewing:BorderSewing.flat},cloth3:{texture:"cloth3.png",sewing:BorderSewing.flat},cloth4:{texture:"cloth4.png",sewing:BorderSewing.normal},cardboard1:{texture:"cardboard1.png",sewing:null},cardboard2:{texture:"cardboard2.png",sewing:null},cardboard3:{texture:"cardboard3.png",sewing:null},silk1:{texture:"silk1.png",sewing:BorderSewing.flat},silk2:{texture:"silk2.png",sewing:BorderSewing.flat},silk3:{texture:"silk3.png",sewing:BorderSewing.flat},silk4:{texture:"silk4.png",sewing:BorderSewing.flat},wood1:{texture:"wood1.png",sewing:null},wood2:{texture:"wood2.png",sewing:null}};Class("PageTexture",{create:function(t,i,e){this.parent=t;this.pageIndex=i;this.isLeftPage=e;this.isHardPage=parseBool(bookConfig.HardPageEnable)&&!isBelowIE11();this.borderWidth=bookConfig.hardCoverBorderWidth-4;this.initResource()},initResource:function(){this.name=bookConfig.coverTexture;this.resource=PageTextureResource[this.name]},render:function(){this.isEmpty()||this.destroy();this.isCover&&this.renderCover()},isEmpty:function(){return null==this.texture},renderPage:function(){this.texture=null},renderCover:function(){this.isHardPage&&this.resource&&(this.renderTexture(),this.renderSewing(),this.onResize())},renderTexture:function(){this.texture=$("<div id='page_texture'></div>");this.texture.css({position:"absolute","pointer-events":"none","z-index":1,width:"100%",height:"100%"});this.parent.append(this.texture);var t=uiBaseURL+this.resource.texture;this.isOutCover?this.texture.css({"background-image":"url("+t+")","background-repeat":"repeat"}):this.parent.css({"background-image":"url("+t+")","background-repeat":"repeat"})},renderSewing:function(){if(!(0>=this.borderWidth)&&this.resource.sewing){var t=this.resource.sewing;this.isInnerCover&&(t=BorderSewing.flat);bookConfig.FlipDirection?(this.left_texture=$("<div id='left_texture'></div>"),this.left_texture.css({position:"absolute",top:this.borderWidth+"px",left:this.borderWidth+"px",width:t.right.width+"px","background-image":"url("+uiBaseURL+t.left.url+")","background-repeat":"repeat-y"}),this.texture.append(this.left_texture)):(this.top_texture=$("<div id='top_texture'></div>"),this.top_texture.css({position:"absolute",top:this.borderWidth+"px",left:this.borderWidth+"px",height:t.top.height+"px","background-image":"url("+uiBaseURL+t.top.url+")","background-repeat":"repeat-x"}),this.texture.append(this.top_texture));this.right_texture=$("<div id='right_texture'></div>");this.right_texture.css({position:"absolute",top:this.borderWidth+"px",right:this.borderWidth+"px",width:t.right.width+"px","background-image":"url("+uiBaseURL+t.right.url+")","background-repeat":"repeat-y"});this.texture.append(this.right_texture);this.bottom_texture=$("<div id='bottom_texture'></div>");this.bottom_texture.css({position:"absolute",bottom:this.borderWidth+"px",right:this.borderWidth+"px",height:t.bottom.height+"px","background-image":"url("+uiBaseURL+t.bottom.url+")","background-repeat":"repeat-x"});this.texture.append(this.bottom_texture);this.isLeftPage&&(bookConfig.FlipDirection?(this.bottom_texture.addClass("flip_y"),this.bottom_texture.css({top:this.borderWidth+"px",bottom:"auto"}),this.left_texture&&this.left_texture.css({bottom:this.borderWidth+"px",top:"auto"}),this.right_texture.css({bottom:this.borderWidth+"px",top:"auto"})):(this.right_texture.addClass("flip_x"),this.right_texture.css({left:this.borderWidth+"px",right:"auto"}),this.top_texture&&this.top_texture.css({right:this.borderWidth+"px",left:"auto"}),this.bottom_texture.css({right:this.borderWidth+"px",left:"auto"})));this.resource.sewing.renderBorder&&this.renderBorder()}},renderBorder:function(){0!=this.borderWidth&&(bookConfig.FlipDirection?(this.left_texture_border=$("<div id='left_texture_border'></div>"),this.left_texture_border.css({position:"absolute",left:"0px",width:this.borderWidth+"px",height:"100%","background-image":$.browser.prefix+"linear-gradient(left, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.left_texture_border)):(this.top_texture_border=$("<div id='top_texture_border'></div>"),this.top_texture_border.css({position:"absolute",top:"0px",width:"100%",height:this.borderWidth+"px","background-image":$.browser.prefix+"linear-gradient(top, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.top_texture_border)),this.right_texture_border=$("<div id='right_texture_border'></div>"),this.right_texture_border.css({position:"absolute",right:"0px",width:this.borderWidth+"px",height:"100%","background-image":$.browser.prefix+"linear-gradient(right, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.right_texture_border),this.bottom_texture_border=$("<div id='bottom_texture_border'></div>"),this.bottom_texture_border.css({position:"absolute",bottom:"0px",width:"100%",height:this.borderWidth+"px","background-image":$.browser.prefix+"linear-gradient(bottom, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.bottom_texture_border),this.isLeftPage&&(bookConfig.FlipDirection?this.bottom_texture_border.css({top:"0px",bottom:"auto"}):this.right_texture_border.css({left:"0px",right:"auto"})))},onResize:function(){this.parentWidth=this.parent.width();this.parentHeight=this.parent.height();this.top_texture&&this.top_texture.css({width:this.parentWidth-2*this.borderWidth+"px"});this.left_texture&&this.left_texture.css({height:this.parentHeight-2*this.borderWidth+"px"});this.right_texture&&this.right_texture.css({height:this.parentHeight-2*this.borderWidth+"px"});this.bottom_texture&&this.bottom_texture.css({width:this.parentWidth-2*this.borderWidth+"px"})},destroy:function(){this.texture&&(this.texture.remove(),this.texture=null);this.top_texture&&(this.top_texture.remove(),this.top_texture=null);this.left_texture&&(this.left_texture.remove(),this.left_texture=null);this.right_texture&&(this.right_texture.remove(),this.right_texture=null);this.bottom_texture&&(this.bottom_texture.remove(),this.bottom_texture=null);this.left_texture_border&&(this.left_texture_border.remove(),this.left_texture_border=null);this.top_texture_border&&(this.top_texture_border.remove(),this.top_texture_border=null);this.right_texture_border&&(this.right_texture_border.remove(),this.right_texture_border=null);this.bottom_texture_border&&(this.bottom_texture_border.remove(),this.bottom_texture_border=null)}});Class("NormalPageTexture",{create:function(t,i,e){this._super(t,i,e);this.isOutCover=1==i&&!bookConfig.isTheBookOpen||i==totalPageCount;this.isInnerCover=2==i&&!bookConfig.isTheBookOpen||1==i&&bookConfig.isTheBookOpen||i==totalPageCount-1;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture");Class("SinglePageTexture",{create:function(t,i,e){this._super(t,i,e);this.isOutCover=1==i;this.isInnerCover=i==bookConfig.totalPageCount;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture");Class("CatalogPageTexture",{create:function(t,i,e){this._super(t,i,e);this.isOutCover=1==i&&!bookConfig.isTheBookOpen||i==totalPageCount;this.isInnerCover=2==i&&!bookConfig.isTheBookOpen||1==i&&bookConfig.isTheBookOpen||i==totalPageCount-1;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture");Class("SlidePageTexture",{create:function(t,i,e){this._super(t,i,e);this.isCover=!1}}).extend("PageTexture");Class("PageRendering",{create:function(t,i,e){this.parent=t;this.pageIndex=i;this.isLeftPage=getPageDirection(i,e);this.pageShadow=getPageShadow(t,i,this.isLeftPage,e);this.pageTexture=getPageTexture(t,i,this.isLeftPage,e)},render:function(){this.addCoil();this.addPageShadow();this.addPageTexture()},addCoil:function(){parseBool(bookConfig.addPaperCoil)&&(this.midCoil=$("<div style='z-index:6;'></div>"),bookConfig.FlipDirection?this.isLeftPage?this.midCoil.attr("class","upPaperCoil"):this.midCoil.attr("class","downPaperCoil"):this.isLeftPage?this.midCoil.attr("class","leftPaperCoil"):this.midCoil.attr("class","rightPaperCoil"),this.parent.append(this.midCoil))},addPageShadow:function(){this.pageShadow.addShadow()},addPageTexture:function(){this.pageTexture.render()},hideMiddleShadow:function(){this.pageShadow.hidePageShadow()},onResize:function(t,i){if(this.pageShadow)this.pageShadow.onResize(t,i);if(this.pageTexture)this.pageTexture.onResize(t,i)},destroy:function(){this.pageShadow&&(this.pageShadow.destroy(),this.pageShadow=null);this.pageTexture&&(this.pageTexture.destroy(),this.pageTexture=null)}});function getPageShadow(t,i,e,o){if(o==BookType.normal_book)return new NormalPageShadow(t,i,e);if(o==BookType.single_book)return new SinglePageShadow(t,i,e);if(o==BookType.catalog_book)return new CatalogPageShadow(t,i,e);if(o==BookType.slide_book||o==BookType.singleSlide_book)return new SlidePageShadow(t,i,e)}function getPageTexture(t,i,e,o){if(o==BookType.normal_book)return new NormalPageTexture(t,i,e);if(o==BookType.single_book)return new SinglePageTexture(t,i,e);if(o==BookType.catalog_book)return new CatalogPageTexture(t,i,e);if(o==BookType.slide_book||o==BookType.singleSlide_book)return new SlidePageTexture(t,i,e)}function getPageDirection(t,i){switch(i){case BookType.single_book:return bookConfig.RightToLeft?!0:!1;case BookType.singleSlide_book:return bookConfig.RightToLeft?!0:!1;default:return BookInfo.isLeftPage(t,!0)}}var setPageURL=function(t,i,e){adjustPageURL(t,i,e);1==i&&BookInfo.getBook().fillPage(t,!0)},adjustPageURL=function(t,i,e){t=parseInt(t)-1;global.fliphtml5_pages||(global.fliphtml5_pages=[]);global.fliphtml5_pages[t]||(global.fliphtml5_pages[t]={});switch(i){case 0:global.fliphtml5_pages[t].l=e;break;case 1:global.fliphtml5_pages[t].n=e;break;case 2:global.fliphtml5_pages[t].t=e}};window.isSupportWebp=!1;(function(){function t(t){window.isSupportWebp=t&&"load"===t.type?1==i.width:!1}var i=new Image;i.onerror=t;i.onload=t;i.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})();var useTheAliCloudChart=function(t,i){if(bookConfig.useTheAliCloudChart)if(isPad()||isPhone())useTheAliCloudChartOnMobile();else{var e=window.screen.availHeight-bookConfig.topMargin-bookConfig.bottomMargin;i||(i=e-50,t=Math.round(i*bookConfig.largePageWidth/bookConfig.largePageHeight));for(var e=bookConfig.totalPageCount,o=1;o<=e;o++){var s=realPageDir(o,"normal",e),n=realPageDir(o,"thumb",e),s=s.removeStartFrom("?"),n=n.removeStartFrom("?"),s=0<=s.indexOf("?")?s+"&x-oss-process=image/resize,h_"+parseInt(i)+",w_"+parseInt(t):s+"?x-oss-process=image/resize,h_"+parseInt(i)+",w_"+parseInt(t);window.isSupportWebp&&(s+="/format,webp",n=0<=n.indexOf("?")?n+"&x-oss-process=image/format,webp":n+"?x-oss-process=image/format,webp");switch(bookConfig.textClarityEnhancement){case 1:s+="/sharpen,100";break;case 2:s+="/sharpen,150";break;case 3:s+="/sharpen,200"}adjustPageURL(o,0,s);adjustPageURL(o,1,s);adjustPageURL(o,2,n)}}},useTheAliCloudChartOnMobile=function(){if(window.isSupportWebp)for(var t=bookConfig.totalPageCount,i=1;i<=t;i++){var e=realPageDir(i,"normal",t),o=realPageDir(i,"thumb",t),e=e.removeStartFrom("?"),o=o.removeStartFrom("?"),e=0<=e.indexOf("?")?e+"&x-oss-process=image/format,webp":e+"?x-oss-process=image/format,webp",o=0<=o.indexOf("?")?o+"&x-oss-process=image/format,webp":o+"?x-oss-process=image/format,webp";switch(bookConfig.textClarityEnhancement){case 1:e+="/sharpen,100";break;case 2:e+="/sharpen,150";break;case 3:e+="/sharpen,200"}adjustPageURL(i,0,e);adjustPageURL(i,1,e);adjustPageURL(i,2,o)}},getPageDir=function(t,i,e){(t=realPageDir(t,i,e))&&(t=fixURLValue(t));return t},realPageDir=function(t,i,e){if(0>=t||void 0!=e&&t>e)return"";if(bookConfig.getPageURL){var o=0;"normal"==i&&(o=1);"thumb"==i&&(o=2);return bookConfig.getPageURL(t,o)}e=getFileFormat(t);var s=global.fliphtml5_pages;if(void 0!=s&&0<s.length){s=s[t-1];if(void 0!=s&&null!=s)switch(i){case"normal":o=void 0==s.n?s.l:s.n;break;case"large":o=s.l;break;case"thumb":o=s.t}if(void 0==o)switch(i){case"normal":return o=bookConfig.normalPath+t+e;case"large":return o=bookConfig.largePath+t+e;case"thumb":return o=bookConfig.thumbPath+t+e}return void 0==o?"":o}switch(i){case"normal":return o=bookConfig.normalPath+t+e,void 0==o?"":o;case"large":return o=bookConfig.largePath+t+e,void 0==o?"":o;case"thumb":return o=bookConfig.thumbPath+t+e,void 0==o?"":o}},fillImageAfterLoaded=function(e,o,s){if(e&&o){var n=getPageDir(e,o,originTotalPageCount);if(fillImageOrNot(n,e))if(-1<n.indexOf(".js"))if(global[decodeDatabasePrefix(o)+e]&&"string"==typeof global[decodeDatabasePrefix(o)+e]){var t=dataBase64Str(e,o),i=$("<img src='"+t+"'/>");i[0].onload=function(){s&&s(t,n,this,e)}}else loadJavascript(n,function(t){var i=dataBase64Str(e,o,t);$("<img src='"+i+"'/>")[0].onload=function(){s&&s(i,n,this,e)}},function(){});else-1<n.indexOf(".svg")?(bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(n=n.removeStartFrom("?")),i=$("<img src='"+n+"'/>"),i[0].onload=function(){var t=$("<object data='"+n+"' type='image/svg+xml'></object>")[0];s&&s(n,n,t,e)}):(bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(n=n.removeStartFrom("?")),i=$("<img src='"+n+"'/>"),i[0].onload=function(){s&&s(n,n,this,e)});else!window.userList&&1<passwardType()&&loadJavascript(bookConfig.userListPath,function(){fillImageAfterLoaded(e,o,s)},function(){})}},fillImageOrNot=function(t,i){return!t||"string"!=typeof t||passwardType()&&bookConfig.excludeFrontPages&&i>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()?!1:!0},fitPageWidthHeight=function(t,i,e,o){e||(e=bookConfig.largePageWidth);o||(o=bookConfig.largePageHeight);var s=Point(0,0);t/i>e/o?(s.x=2*parseInt(e*i/(2*o)),s.y=i):(s.x=2*parseInt(t/2),s.y=t*o/e);return s},getFileFormat=function(t){return!passwardType()||!bookConfig.excludeFrontPages||t<=parseInt(bookConfig.excludeFrontPages)?".jpg":".js"},decodeBase64=function(t,i){var e=encodeDatabasePrefix(i);if(global[e+t]&&"string"==typeof global[e+t]){var o=getRealkey();if(o)return e=base64.decode(global[e+t]),o=rc4(o,e),base64.encode(o)}},dataBase64Str=function(t,i,e){if(verifyPassward()){var o=decodeDatabasePrefix(i),s=encodeDatabasePrefix(i);if(global[o+t])return global[s+t]=null,e&&$(e).remove(),global[o+t];i="data:image/jpg;base64,"+decodeBase64(t,i);global[o+t]=i;global[s+t]=null;e&&$(e).remove();return i}},decodeDatabasePrefix=function(t){switch(t){case"normal":return"dataBase";case"large":return"dataBase";case"thum":return"dataBaseThum";case"thumb":return"dataBaseThum"}},encodeDatabasePrefix=function(t){switch(t){case"normal":return"page";case"large":return"page";case"thum":return"thumb";case"thumb":return"thumb"}},userList,getRealkey=function(){if(1==passwardType())return getSingleRealKey();if(userList){var t=getPassward(),i=getUsername();if(t&&i&&userList&&"string"==typeof userList[username])return getListRealKey(i,t,userList[username])}},getSingleRealKey=function(){if(bookConfig.singlePasswordKey&&"string"==typeof bookConfig.singlePasswordKey){var t=getPassward();if(t){var i=parsHexToNormalString(bookConfig.singlePasswordKey);return rc4(t,i)}}},getListRealKey=function(t,i,e){t=(t+String.fromCharCode(9)+i).MD5(32);t=parsHexToNormalString(t);t=base64.encode(t);e=e.remove(t);e=e.replace(/==?$/,"");if(e=base64.decode(e))return i=(t+i).cycleToLength(128),rc4(i,e)},verifyPassward=function(){var t=getPassward(),i=getUsername();if(1==passwardType())return t?t.MD5(32).toLowerCase()===bookConfig.singlePasswordMD5.toLowerCase():void 0;if(bookConfig.userListPath&&(userList||loadJavascript(bookConfig.userListPath,verifyPassward,function(){}),userList&&t&&i&&"string"==typeof userList[i]))return t=(i+String.fromCharCode(9)+t).MD5(32),t=parsHexToNormalString(t),t=base64.encode(t),userList[i].substring(0,24)===t},passwardType=function(){if(!bookConfig.securityType||1==parseInt(bookConfig.securityType))return 0;if(bookConfig.securityType&&2==parseInt(bookConfig.securityType))return 1;if(bookConfig.securityType&&3==parseInt(bookConfig.securityType))return 2},getPassward=function(){return document.getElementById("passward_input")?$("#passward_input").val():global.passward},getUsername=function(){return document.getElementById("username_input")?$("#username_input").val():global.username},PageInfo=Class({create:function(t){this.getPageInfoArray(t)},getPageInfoArray:function(t){if(this.pageInfoArray)return this.pageInfoArray;this.initPageInfo(t);return this.pageInfoArray},initPageInfo:function(t){this.pageInfoArray=[{}];for(var i=1;i<=totalPageCount;i++){var e=this.getPageInfo(i,t),o=this.getNextPageInfo(i,t);o&&(e.pageWidth=Math.max(e.pageWidth,o.pageWidth),e.pageHeight=Math.max(e.pageHeight,o.pageHeight),e.opacity=Math.max(e.opacity,o.opacity),1!=e.pageWidth||1!=e.pageWidth||1!=e.pageWidth)&&(e.isMiniPage=!0);this.pageInfoArray.push(e)}},getNextPageInfo:function(t,i){var e=t;if(!i)return e=bookConfig.isTheBookOpen?0==t%2?t+1:t-1:0==t%2?t-1:t+1,this.getPageInfo(e,i)},getPageInfo:function(t,i){if(!(0>=t||t>totalPageCount)){var e=1,o=1,s=1;window.fliphtml5_pages&&window.fliphtml5_pages[t-1]&&(s=window.fliphtml5_pages[t-1],e=s.w?Math.min(s.w,1):1,o=s.h?Math.min(s.h,1):1,s=s.o?Math.min(s.o,1):1);if(1==t||t==totalPageCount)o=e=1;return{pageWidth:e,pageHeight:o,opacity:s}}},statics:{getPageColor:function(t){return window.pages_information&&window.pages_information[t-1]&&window.pages_information[t-1].pageColor?Color(window.pages_information[t-1].pageColor).toString():bookConfig.pageBackgroundColor},pageIsStrech:function(t){return window.pages_information&&window.pages_information[t-1]&&window.pages_information[t-1].pageIsStrech?parseBool(window.pages_information[t-1].pageIsStrech):bookConfig.bookPageStretch}}}),Page=Class({isHardPage:!0,onPageLoaded:null,create:function(t,i,e,o){this.bookType=e;this.pageIndex=t;this.zIndex=this.pageHeight=this.pageWidth=this.height=this.width=0;this.visible=!0;this.loaded=0;this.onPageLoaded=o;this.initHtml(t,i)},initHtml:function(t,i){this.initSide();this.side.attr("id",i+t);this.initContents();this.addFlipShadow()},initSide:function(){this.container=this.side=$("<div style='position:absolute;'></div>")},initContents:function(){this.initPageSide();var t=PageInfo.getPageColor(this.pageIndex);this.tmpContent=$("<div class='side-content' style='background-color : "+t+";'></div>");this.pageSide.append(this.tmpContent);this.sideImage=$("<div style='position:absolute;z-index:0;width:100%;height:100%;top:0;left:0;'/>");this.tmpContent.append(this.sideImage)},initPageSide:function(){this.pageSide=this.side},loading:function(){this.originalImageLoaded||(this.loadingImage||(this.loadingImage=$("<img class='loadingImage' src='"+uiBaseURL+"loading.gif'/>")),this.tmpContent.append(this.loadingImage))},unLoading:function(){this.loadingImage&&this.loadingImage.remove();this.loadingImage=null},ballScaling:function(){window.setTimeout(function(){this.originalImageLoaded||this.loadingImage||(this.loadingImage=$("<img class='loadingImage' src='"+uiBaseURL+"loading.gif'/>"),this.tmpContent.append(this.loadingImage))}.bind(this),500)},unBallScaling:function(){this.unLoading()},renderPage:function(){this.rendering&&(this.rendering.destroy(),this.rendering=null);this.rendering=new PageRendering(this.side,this.pageIndex,this.bookType);this.rendering.onResize(this.width,this.height);this.rendering.render()},hideMiddleShadow:function(){this.rendering&&this.rendering.hideMiddleShadow()},mirrorSide:function(){this.isMirrorSide=!0;this.sideImage.css({"-webkit-transform":"scaleX(-1)","-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","-ms-transform":"scaleX(-1)",opacity:.2});this.unLoading()},setZIndex:function(t){this.zIndex=t;this.side.css("z-index",t)},getZIndex:function(){return this.zIndex},setCSSByStyle:function(t){this.side.css(t)},setCSSByName:function(t){this.side.attr("class",t)},remove:function(){this.removeAttachment();this.sideImage&&this.sideImage.remove();this.side.remove();this.sideImage=this.side=void 0},getSide:function(){return this.side},setParent:function(t){this.parent=t},removeFromParent:function(){this.side.remove()},appendToParent:function(){this.side.appendTo(this.parent)},setLeftOrRight:function(t){(this.isLeft=t)?this.setCSSByName("left-side"):this.setCSSByName("right-side")},setUpOrDown:function(t){(this.isUp=t)?this.setCSSByName("up-side"):this.setCSSByName("down-side")},centerPage:function(){this.isLeft=!1;this.setCSSByName("center-side")},fillContent:function(){this.fillPage(this.pageIndex)},fillPage:function(t,i,e){this.isMirrorSide&&!bookConfig.showMirrorSide||t!=this.pageIndex||this.originalImageLoaded||(e||(e="normal",(isPhone()||isPad())&&bookConfig.highDefinitionConversion&&!i&&(e="thumb"),this.isMirrorSide&&(e="thumb")),"normal"==e&&this.loadOriginalImage(i,e),"thumb"==e&&this.loadPreviewImage(e))},setVisible:function(t){t?this.side.show():this.side.hide();this.visible=t},onResize:function(t,i){this.resizePage(t,i);this.resizeFlipShadow(t,i);if(this.rendering)this.rendering.onResize(t,i)},resizePage:function(t,i){this.width=t;this.height=i;this.maskWidth=parseInt(Math.sqrt(Math.pow(t,2)+Math.pow(i,2)));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.attachW=parseInt(100*t/(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight)));this.attachH=parseInt(100*i/(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop)));this.pageSideWidth=this.width;this.pageSideHeight=this.height;this.pageWidth=this.width;this.pageHeight=this.height;this.side.css({width:t,height:i});this.tmpContent.css({width:this.attachW,height:this.attachH,top:-this.attachH*parseFloat(bookConfig.visibleAreaTop)/100,left:-this.attachW*parseFloat(bookConfig.visibleAreaLeft)/100});this.resizeSideImage()},resizeSideImage:function(){},zoomInSideImage:function(){},zoomOutSideImage:function(){},enterSide:function(){(isPhone()||isPad())&&bookConfig.highDefinitionConversion&&!this.originalImageLoaded&&(this.unLoading(),this.ballScaling(),this.loadOriginalImage())},leaveSide:function(){},addFlipShadow:function(){this.pageFlipShadow||(this.pageFlipShadow=new PageFlipShadow(this.side,this.pageIndex))},setFlipShadow:function(t,i,e){this.pageFlipShadow&&this.pageFlipShadow.flip(t,i,e)},clearFlipShadow:function(){this.pageFlipShadow&&this.pageFlipShadow.clear();this.side.removeClass("boxShadow")},resizeFlipShadow:function(t,i){this.pageFlipShadow&&this.pageFlipShadow.resize(t,i)},initAttachment:function(){},resizeAttachment:function(){},removeAttachment:function(){}}),PageSide=Class({loadOriginalImage:function(t){var i=getPageDir(this.pageIndex,"normal",originTotalPageCount);if(i!=this.imageURL||t)t=function(t,i,e){imageLoaded[this.pageIndex]=!0;this.onOriginalImageLoaded(t,i,e);if(this.onPageLoaded)this.onPageLoaded(this.pageIndex)}.bind(this),this.imageURL=i,fillImageAfterLoaded(this.pageIndex,"normal",t)},loadPreviewImage:function(){var t=getPageDir(this.pageIndex,"thumb",originTotalPageCount);if(t!=this.imageURL){var i=function(t,i,e){imageLoaded[this.pageIndex]=!0;this.onPreviewImageLoaded(t,i,e);if(this.onPageLoaded)this.onPageLoaded(this.pageIndex)}.bind(this);this.imageURL=t;fillImageAfterLoaded(this.pageIndex,"thumb",i)}},onPreviewImageLoaded:function(t,i,e){t&&(this.originalImageLoaded=!1,this.unLoading(),this.bGImageWidth=e.naturalWidth,this.bGImageHeight=e.naturalHeight,$(e).attr("style","position:absolute;width:100%;height:100%;pointer-events:none;top:0;bottom:0;left:0;right:0;margin:auto;"),bookConfig.isStopMouseMenu&&$(e).css({"pointer-events":"none"}),this.sideImage&&this.sideImage.empty().append(e),this.resizeBackgroundSize())},onOriginalImageLoaded:function(t,i,e){t&&(this.originalImageLoaded=!0,this.unLoading(),this.unBallScaling(),this.bGImageWidth=e.naturalWidth,this.bGImageHeight=e.naturalHeight,$(e).attr("style","position:absolute;width:100%;height:100%;top:0;bottom:0;left:0;right:0;margin:auto;"),bookConfig.isStopMouseMenu&&$(e).css({"pointer-events":"none"}),this.sideImage&&this.sideImage.empty().append(e),this.initAttachment(),this.resizeBackgroundSize(),this.resizeSideImage(),this.zoomIn&&this.zoomInSideImage())},resizeSideImage:function(){this.sideImage&&!this.isMirrorSide&&($.system.name==$.system.ANDROID||!isPhone()&&!isPad()||bookConfig.highDefinitionConversion?(this.sideImage.css({width:"100%",height:"100%"}),this.resizeAttachment(this.attachW,this.attachH),this.zoomIn&&this.zoomInSideImage()):this.resizeOnMobile())},resizeOnMobile:function(){var t=1024,i=1024;BookInfo.isDoublePage()&&bookType==BookType.normal_book&&(i=t=768);isPad()&&BookInfo.isDoublePage()&&bookType==BookType.normal_book&&(i=t=768);t=fitPageWidthHeight(t,i,this.attachW,this.attachH);this.sideImage.css({width:Math.ceil(t.x)+"px",height:Math.ceil(t.y)+"px"});transformCSS({scale:this.attachW/t.x,origin:{x:0,y:0}});this.resizeContent(Math.ceil(t.x),Math.ceil(t.y))},zoomInSideImage:function(){this.zoomIn=!0;var t=Math.min(6*Math.min(windowWidth,windowHeight),this.bGImageWidth),i=Math.min(6*Math.min(windowWidth,windowHeight),this.bGImageHeight);$.system.name==$.system.ANDROID&&(t=Math.min(1024,t),i=Math.min(1024,i));isPad()&&(t=Math.min(3*Math.min(windowWidth,windowHeight),this.bGImageWidth),i=Math.min(3*Math.min(windowWidth,windowHeight),this.bGImageHeight));t=fitPageWidthHeight(t,i,this.attachW,this.attachH);this.resizeContent(Math.ceil(t.x),Math.ceil(t.y))},resizeContent:function(t,i){this.sideImage.css({width:t+"px",height:i+"px"});var e=transformCSS({scale:this.attachW/t,origin:{x:0,y:0}});this.sideImage.css(e);this.MMBackground&&(this.resizeAttachment(t,i),this.MMBackground.css(e),this.scale=this.attachW/t)},resizeBackgroundSize:function(){},switchLargeImage:function(){if(bookConfig.useTheAliCloudChart){var t=this.imageURL.removeStartFrom("?");if(window.isSupportWebp)switch(t+="?x-oss-process=image/format,webp",bookConfig.textClarityEnhancement){case 1:t+="/sharpen,100";break;case 2:t+="/sharpen,150";break;case 3:t+="/sharpen,200"}this.sideImage.find("img")[0].onload=function(){};$(this.sideImage.find("img")[0]).attr("src",t)}},switchNormalImage:function(t){if(bookConfig.useTheAliCloudChart){if(t){t=getPageDir(this.pageIndex,"normal",originTotalPageCount);if(t==this.imageURL)return;this.imageURL=t}this.sideImage.find("img")[0].onload=function(){};$(this.sideImage.find("img")[0]).attr("src",this.imageURL)}}}).extend(Page),a=hddr.soo2,i=0,BookSide=Class({slider:null,playSliderAfterLoad:!1,scale:1,showMM:function(){this.MMBackground.css({display:"block"})},hideMM:function(){this.MMBackground.css({display:"none"})},clearMM:function(){this.destroyMM();this.initMMItems()},destroyMM:function(){this.Items.each(function(t){t.destroy();t.dialog&&t.dialog.destroy()});this.destroySlider();this.MMBackground.empty()},initMMItems:function(){this.Items=new ObjectPool},initMM:function(){this.Items=new PageEditorParser(this.MMBackground,this.attachW,this.attachH).createItemsForPage(this.pageIndex);this.Items.find("Youtube").each(function(t){t.hide()});this.initSlider();this.preventMMBackEvent();0!=this.Items.objects.length||this.slider||this.hideMM()},initSlider:function(){if(window.hiSliderFactory){var t=(global.sliderJS||[])[this.pageIndex-1];t&&0<t.elements.length&&(this.slider=window.hiSliderFactory({container:this.MMBackground,slide:t,initialWidth:this.attachW,initialHeight:this.attachH,focusOnFunc:this.focusOn.bind(this),resetFocusFunc:this.resetFocus.bind(this)}),this.slider.resize(this.attachW,this.attachH),!0==this.playSliderAfterLoad&&this.playSlider())}},playSlider:function(){this.slider?(this.slider.replay(),this.playSliderAfterLoad=!1):this.playSliderAfterLoad=!0},resetSlider:function(){this.resetFocus(0);this.slider&&this.slider.reset();this.playSliderAfterLoad=!1},destroySlider:function(){this.slider&&this.slider.reset()},pauseSlider:function(){this.slider&&this.slider.pause()},resizeSlider:function(t,i){this.slider&&this.slider.resize(t,i)},onMMResize:function(t,i){if(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())){var e=fitPageWidthHeight(t,i,bookConfig.largePageWidth,bookConfig.largePageHeight),o=fitPageWidthHeight(this.width,this.height,bookConfig.largePageWidth,bookConfig.largePageHeight),s=e.x,n=e.y;this.MMBackground.css({width:s+"px",height:n+"px",top:(this.height-o.y)/2+"px",left:(this.width-o.x)/2+"px"})}else s=t,n=i;this.resizeSlider(s,n);this.Items.each(function(t){t.onResize(s,n);if(t.dialog)t.dialog.onResize(windowWidth,windowHeight)})},getScale:function(){return this.scale},preventMMBackEvent:function(){document.body.ondragstart=function(){return!1};$(this.MMBackground).on("mousedown touchstart pointerdown mouseover mousemove",".hi-action",function(t){t.stopPropagation()});$(this.MMBackground).on("mousedown touchstart pointerdown mouseover mousemove",".slider-action",function(t){t.stopPropagation()});$(this.MMBackground).on("mousedown touchstart pointerdown mouseover mousemove",".flip-action",function(t){t.stopPropagation()})},showLoading:function(){this.side.append(this.loadingImg)},hideLoading:function(){this.loadingImg.remove()},focusOn:function(t){this.option=t;this.focusIng=!0;var i=t.pageWidth,e=t.duration/1e3,o=this.attachW/(t.width*this.attachW/i),i=-t.left*o*this.attachW/i;t=-t.top*o*this.attachH/t.pageHeight;o=Math.max(1,o);i=Number.between(i,(1-o)*this.attachW,0);t=Number.between(t,(1-o)*this.attachH,0);o=transformCSS({origin:{x:0,y:0},tran:{x:i,y:t},scale:o});animateOnce(this.tmpContent,o,e,function(){},"%stransform")},resetFocus:function(t){if(this.focusIng){t||(t=0);var i=transformCSS({origin:{x:0,y:0},tran:{x:0,y:0},scale:1});animateOnce(this.tmpContent,i,t/1e3,function(){this.focusIng=!1}.bind(this),"%stransform")}},enterSide:function(){this._super();this.Items.each(function(t){t.showAnimate&&t.showAnimate();t.audio&&t.audio.enterPlay&&t.audio.play&&t.audio.play();if(t.nameLike){t.nameLike("youtube","flashSwf","button","Video","LoopControlVideo")&&t.show&&t.show();(t.nameLike("youtube")||t.nameLike("vimeo"))&&t.playVideo&&t.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&t.playVideo();t.nameLike("audio")&&(t.isReplay()&&t.backTime(),t.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&t.playAudio(),t.background&&t.isBackgroundAudio()&&t.playAudio());if(t.nameIs("Video")||t.nameIs("LoopControlVideo"))t.isReplay()&&t.backTime(),t.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&t.playVideo();t.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","StarText","HotSpots","EffectText","Banner")&&t.play&&t.play();t.nameIs("Link")&&t.flash();t.nameLike("Image")&&(t.resetImgSrc(),t.showEffect());t.nameLike("Button")&&t.runAnimation&&t.runAnimation()}});this.playSlider()},leaveSide:function(){this._super();this.Items.each(function(t){t.pause&&t.pause();t.stop&&t.stop();t.stopFlash&&t.stopFlash();t.audio&&t.audio.stop&&t.audio.stop();t.dialog&&t.dialog.hide();t.nameLike&&(t.nameLike("youtube","flashSwf","button","Video","LoopControlVideo")&&t.hide&&t.hide(),t.nameLike("youtube","vimeo")&&t.pauseVideo&&t.pauseVideo(),t.nameLike("audio")&&t.pauseAudio&&t.pauseAudio(),t.nameIs("LoopControlVideo")&&t.pauseVideo&&t.pauseVideo(),t.nameIs("Video")&&t.getStopEvt()==PageEditor.PlayEvt.EVT_STOP&&t.pauseVideo(),t.nameLike("Image")&&(t.removeImgSrc(),t.hideEffect()),t.nameLike("Button")&&t.stopAnimation&&t.stopAnimation(),t.nameLike("zoom")&&global.popZoomBox&&(global.popZoomBox.popZoom.hide(),global.popZoomBox.visible=!0))});global.annotationPannel&&global.annotationPannel.resetAnnoConfig();this.searchHighlight.css({"background-image":""});this.pauseSlider();this.destroySelect()},pauseAnimation:function(){this.Items.each(function(t){t.nameLike&&(t.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","StarText","HotSpots","Banner")&&(t.pause&&t.pause(),t.stop&&t.stop(),t.stopFlash&&t.stopFlash()),t.nameLike("Button")&&t.stopAnimation&&t.stopAnimation())})},startAnimation:function(){this.Items.each(function(t){t.nameLike&&(t.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","StarText","HotSpots","Banner")&&t.play&&t.play(),t.nameLike("Button")&&t.runAnimation&&t.runAnimation())})}}).extend(PageSide),imageLoaded=[];bdor[33]=function(t,i){return t/bdor[30](i,20)};var BookPage=Class({initSelectTextEvent:function(){if(!this.selectContent){this.selectContent=$("<div style='width:100%;height:100%;position:absolute;z-index:10;cursor:text;top:0;bottom:0;left:0;right:0;margin:auto;'></div>");this.tmpContent.append(this.selectContent);this.resizeSelectContent();var t=new Hammer.Manager(this.selectContent[0]);t.add(new Hammer.Pan({threshold:0}));t.add(new Hammer.Tap);t.on("panstart panmove panend",this.selectText.bind(this));t.on("tap",this.onTap.bind(this))}},initMagnifierEvent:function(){this.mgnifierContent=$("<div class='mgnifierBox' style='width:100%;height:100%;position:absolute;z-index:10;cursor:none;top:0;bottom:0;left:0;right:0;margin:auto;'></div>");this.pageSide.append(this.mgnifierContent);this.mgnifierContent.bind("mouseenter",function(t){global.canMagnifierZoom&&(global.magnifierZoomBox.show(),global.magnifierZoomBox.setImg(this.sideImage,this.sideImage.find("img"),t))}.bind(this));this.mgnifierContent.bind("mouseleave",function(){global.canMagnifierZoom&&global.magnifierZoomBox.hide()}.bind(this));this.mgnifierContent.bind("mousemove",function(t){global.canMagnifierZoom&&(global.magnifierZoomBox.show(),global.magnifierZoomBox.drawBg(t))}.bind(this))},onTap:function(){this.selectContent&&this.selectContent.empty();this.hint&&this.hint.hide()},destroyMagnifier:function(){this.mgnifierContent&&this.mgnifierContent.remove();this.mgnifierContent=void 0},destroySelect:function(){this.selectContent&&this.selectContent.remove();this.hint&&this.hint.destroy();this.selectContent=this.hint=void 0},selectText:function(t){if(!BookInfo.getBook().flipping&&global.positionForPages){var i,e;for(e=0;e<positionForPages.length;e++)if(positionForPages[e]&&positionForPages[e].page&&positionForPages[e].page==this.pageIndex){i=positionForPages[e].positions;break}this.selectContent.empty();if(i){this.searchTextHighlight||(this.searchTextHighlight=new SearchTextHighlight(this.bGImageWidth,this.bGImageHeight,rightToLeft),this.searchTextHighlight.loadFromPage(i),this.highlightDOM=new SearchHighlightDOM(this.selectContent));i=this.getArea(t);i=this.searchTextHighlight.selectText(i);this.highlightText="";if(i){e=i.getRects();for(var o=0;o<e.length;){for(var s=[],n=0;4>n;n++)s[n]=e[o+n];this.highlightDOM.addHighlight(s);o+=4}this.highlightText=i.getText()}"panend"==t.type&&(isPhone()||isPad()?this.highlightText&&(global.phoneCopyForm||(phoneCopyForm=new CopyForm({parent:tmpContainer,formType:"copy",rightToLeft:rightToLeft})),phoneCopyForm.fillText(this.highlightText),phoneCopyForm.show()):(i=t.srcEvent.pageX,t=t.srcEvent.pageY,this.hint||(this.hint=new divHint(getLanguage("lblCopy","Copy"),i,t),this.hint.addClass("hint_active"),this.hint.instance.bind(_event._end,function(){this.highlightText&&this.copyToClipboard(this.highlightText)}.bind(this))),this.highlightText?(this.hint.show(i,t),this.hint.moveto(i,t)):this.hint.hide()))}}},getArea:function(t){"panstart"==t.type&&(this.selectStartPoint=this.getRealPoint(t.srcEvent));var i=this.selectContent.width(),e=this.selectContent.height(),o=BookInfo.getBook().flipBook.parameters?BookInfo.getBook().flipBook.parameters.scale:1;return{left:this.selectStartPoint[0]/(i*o),top:this.selectStartPoint[1]/(e*o),right:(this.selectStartPoint[0]+t.deltaX)/(i*o),bottom:(this.selectStartPoint[1]+t.deltaY)/(e*o)}},getRealPoint:function(t){if((t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t])&&!(3<=t.length)){var i=this.selectContent.offset().left,e=this.selectContent.offset().top;return[t[0].pageX-i,t[0].pageY-e]}},copyToClipboard:function(t){global.tmpCopyInput||(global.tmpCopyInput=$("<textarea style='position:absolute;top:-50px;right:-50px;'></textarea>"),$("body").append(global.tmpCopyInput));global.tmpCopyInput.val(t);copyFromObj(global.tmpCopyInput)},addAttachment:function(){this.attachment=!0;this.slider=null;this.playSliderAfterLoad=!1;this.MMBackground=$("<div style='width:100%;height:100%;position:absolute;z-index:4;'></div>");this.searchHighlight=$("<div class='kong' style='width:100%;height:100%;display:none;top:0;bottom:0;left:0;right:0;margin:auto;'></div>");this.renderPage();this.initMMItems();this.tmpContent.append(this.MMBackground)},resizeHighLightBG:function(){if(BookInfo.getBook()&&this.searchHighlight&&!PageInfo.pageIsStrech(this.pageIndex)&&this.bGImageWidth&&this.bGImageHeight){var t=this.pageWidth/this.pageHeight,i=this.bGImageWidth/this.bGImageHeight;.01<=t-i&&!PageInfo.pageIsStrech(this.pageIndex)&&this.searchHighlight.css({width:i*this.attachH+"px",height:this.attachH+"px"});-.01>=t-i&&!PageInfo.pageIsStrech(this.pageIndex)&&this.searchHighlight.css({width:this.attachW+"px",height:this.attachW/i+"px"})}},resizeSelectContent:function(){if(BookInfo.getBook()&&this.selectContent&&!PageInfo.pageIsStrech(this.pageIndex)&&this.bGImageWidth&&this.bGImageHeight){var t=this.pageWidth/this.pageHeight,i=this.bGImageWidth/this.bGImageHeight;.01<=t-i&&!PageInfo.pageIsStrech(this.pageIndex)&&this.selectContent.css({width:i*this.attachH+"px",height:this.attachH+"px"});-.01>=t-i&&!PageInfo.pageIsStrech(this.pageIndex)&&this.selectContent.css({width:this.attachW+"px",height:this.attachW/i+"px"});this.searchTextHighlight&&(this.highlightDOM=this.searchTextHighlight=null)}},initMM:function(){this.attachment&&(this._super(),bookConfig.AnnotationButtonVisible&&!global.annotationCookie&&this.bookType==BookInfo.getBookType()&&(global.annotationCookie=new AnnotationCookie(this.MMBackground,this.attachW,this.attachH)),this.annotationBox(),this.addHistoryTexts(this.bookType,this.pageIndex,this.MMBackground),this.setLinkPosition(BookInfo.getCurrentPages()))},annotationBox:function(){bookConfig.AnnotationButtonVisible&&(this.pageAnnotation=new Annotation(this.MMBackground,this.pageIndex,this.attachW,this.attachH))},addHistoryTexts:function(t){if(this.attachment&&bookConfig.AnnotationButtonVisible){t=this.bookType;var i=this.pageIndex,e=this.MMBackground;$(e).css({background:"rgba(0,0,0,0)"});isBelowIE9()&&$(e).css({"background-image":"url('aaaa.a')"});global.annotationCookie&&t==BookInfo.getBookType()&&global.annotationCookie.repaintCookie(this.MMBackground,i-1)}},setLinkPosition:function(t){for(var i=0;i<t.length&&t[i]!=this.pageIndex;i++);this.Items.find("link").each(function(t){t.setPageBgImage(this.bGImageWidth,this.bGImageHeight,!0)}.bind(this));this.Items.find("zoom").each(function(t){t.setPageBgImage(this.bGImageWidth,this.bGImageHeight,!0)}.bind(this))},highlightSearch:function(){var t=!0;window.frmSearch&&frmSearch.visible&&0<frmSearch.getList().length&&(t=!1);window.foldingMenu&&foldingMenu.visible&&foldingMenu.currentItem&&foldingMenu.currentItem.id&&"miSearch"==foldingMenu.currentItem.id&&(t=!1);if(!t&&this.attachment){for(var t=!1,i=0;i<positionForPages.length;i++)if(positionForPages[i]&&positionForPages[i].page&&positionForPages[i].page==this.pageIndex){t=!0;break}t?highlightSearchFun(this.searchHighlight,this.pageIndex):(t=String.format(bookConfig.searchPositionJS,this.pageIndex),1<this.pageIndex&&(t=t.replace("[1]","["+this.pageIndex+"]")),t.match(/\.*\/?(\w+\/)*\w+(\[|\()?\d+(\]|\))?\.js/gi)&&loadJavascript(t,function(){highlightSearchFun(this.searchHighlight,this.pageIndex)}.bind(this),function(){}))}},clearHighlight:function(){this.attachment&&(this.searchHighlight.hide(),clearHighlightFun(this.searchHighlight))},initAttachment:function(){this.attachment&&(this.tmpContent.append(this.searchHighlight),this.searchHighlight.css({opacity:.8}),this.resizeHighLightBG(),this.clearMM(),this.initMM())},removeAttachment:function(){this.attachment&&this.destroyMM()},resizeAttachment:function(t,i){this.resizeHighLightBG();this.resizeSelectContent();if(this.attachment){this.onMMResize(t,i);if(this.pageAnnotation)this.pageAnnotation.onResize(this.attachW,this.attachH,this.attachW/t);global.annotationCookie&&this.bookType==BookInfo.getBookType()&&(global.annotationCookie.onResize(this.attachW,this.attachH,this.attachW/t),global.annotationCookie.repaintCookie(this.MMBackground,this.pageIndex-1))}}}).extend(BookSide);bdor[36]=36;global.bdor[35]=function(){return 3}();global.bdor[37]=80;bdor[38]=function(){return bdor[30](37,40)}();var NormalPage=Class({isHardPage:!1,create:function(t,i,e,o,s){this.pageHeight=this.pageWidth=this.width=this.zIndex=0;this.pageIndex=t;this.visible=!0;this.isSingleBook=e;this.container=$("<div></div>");this.setMaskCss();this.container.attr("id",i+"Mask"+t);this.page=new BookPage(t,i,o,s);this.container.append(this.page.getSide());this.page.setParent(this.container)},setMaskCss:function(){if(bookConfig.FlipDirection){var t="vertical-mask";this.isSingleBook&&rightToLeft&&(t="single-book-right-vertical-mask");this.isSingleBook&&!rightToLeft&&(t="single-book-vertical-mask")}else t="mask",this.isSingleBook&&rightToLeft&&(t="single-book-right-mask"),this.isSingleBook&&!rightToLeft&&(t="single-book-mask");this.setCSSByName(t)},remove:function(){this.container.remove();this.container=void 0;this.page.remove();this.page=void 0},setPage:function(t){this.page=t},setCSSByStyle:function(t){this.container.css(t)},setVisible:function(t){t?this.container.show():this.container.hide();this.visible=t},setCSSByName:function(t){this.container.addClass(t)},onResize:function(t,i,e){this.pageWidth=t;this.pageHeight=i;e||(e=1);var o=parseInt(Math.sqrt(Math.pow(t,2)+Math.pow(i,2)));0!=(o-i)%2&&(o+=1);this.width=o;this.container.css({width:o,height:o,opacity:e});if(this.page)this.page.onResize(t,i);bookConfig.FlipDirection?(this.container.css({left:"50%","margin-left":-this.width/2+"px"}),this.page&&this.page.setCSSByStyle({left:(this.width-t)/2})):(this.container.css({top:"50%","margin-top":-this.width/2+"px"}),this.page&&this.page.setCSSByStyle({top:(this.width-i)/2}))},getWidth:function(){return this.width},setZIndex:function(t){this.zIndex=t;this.container.css({"z-index":t})},getZIndex:function(){return this.zIndex},setCSSByName:function(t){this.container.attr("class",t)},setLeftOrRight:function(t){var i=this.isSingleBook?"left-single-mask-side":"left-mask-side";t||(i=this.isSingleBook?"right-single-mask-side":"right-mask-side");this.setCSSByName(i);this.page&&this.page.setLeftOrRight(t)},setUpOrDown:function(t){var i=this.isSingleBook?"up-single-mask-side":"up-mask-side";t||(i=this.isSingleBook?"down-single-mask-side":"down-mask-side");this.setCSSByName(i);this.page&&this.page.setUpOrDown(t)},beginToFlip:function(){this.setMaskCss()},loading:function(){this.page&&this.page.loading()},mirrorSide:function(){this.page&&this.page.mirrorSide()},setFlipShadow:function(t,i,e){this.page&&this.page.setFlipShadow(t,i,e)},addAttachment:function(){this.page&&this.page.addAttachment()},clearFlipShadow:function(){this.page&&this.page.clearFlipShadow()},fillContent:function(){this.page&&this.page.fillContent()},fillPage:function(t,i){this.page&&this.page.fillPage(t,i)},enterSide:function(){this.page&&this.page.enterSide()},leaveSide:function(){this.page&&this.page.leaveSide()},initSelectTextEvent:function(){this.page&&this.page.initSelectTextEvent()},destroySelect:function(){this.page&&this.page.destroySelect()},initMagnifierEvent:function(){this.page&&this.page.initMagnifierEvent()},destroyMagnifier:function(){this.page&&this.page.destroyMagnifier()},pauseAnimation:function(){this.page&&this.page.pauseAnimation()},startAnimation:function(){this.page&&this.page.startAnimation()},addHistoryTexts:function(t){this.page&&this.page.addHistoryTexts(t)},highlightSearch:function(){this.page&&this.page.highlightSearch()},clearHighlight:function(){this.page&&this.page.clearHighlight()},resetSlider:function(){this.page&&this.page.resetSlider()},setScale:function(t){this.page&&this.page.setScale(t)},zoomInSideImage:function(){this.page&&this.page.zoomInSideImage()},zoomOutSideImage:function(){this.page&&this.page.zoomOutSideImage()},switchLargeImage:function(){this.page&&this.page.switchLargeImage()},switchNormalImage:function(t){this.page&&this.page.switchNormalImage(t)}});bdor[39]=function(){return 8}();var bookMouseDown=!1,nBookStatu=0;global.bdor[200]=function(t){return bdor[t]};var Book=Class({bookType:void 0,parent:null,width:0,height:0,flippingTime:600,currentPageIndex:1,rightToLeft:!1,pageArray:null,pageWidth:0,pageHeight:0,visible:!1,create:function(t){this.init(t)},init:function(t){this.parent=t.parent;this.currentPageIndex=t.currentPageIndex;this.flippingTime=1e3*t.flippingTime;this.rightToLeft=t.rightToLeft;this.pageArray=[]},getBookType:function(){return this.bookType},onBookPageLoaded:function(t){if(!this.flipping&&this.visible&&BookInfo.getBook()==this){var i=this.getCurrentPages();if(i)for(var e=0;e<i.length;e++){var o=i[e];this.pageArray[o]&&t==o&&this.pageArray[o].enterSide()}}},adjustBookPosition:function(){onStageResize()},getBook:virtual_function,getCurrentPages:function(){return[]},initBook:virtual_function,gotoPage:virtual_function,show:virtual_function,hide:virtual_function,onResize:virtual_function,destroy:virtual_function}),StaticAd=Class({create:function(t){var i=t.css("left"),i=parseInt(i.replace("px","")),e=parseInt(t.css("top"));t=parseInt(t.css("width"));rightToLeft&&(i+=t/2);this.adContainer=$("<div id='adContainer'></div>");this.adContainer.css({position:"absolute","z-index":1});this.adContainer.css({left:i+"px",top:e});this.adInstance=new HTML5AdSlider(this.adContainer,{paddingLeft:30,paddingTop:30,paddingRight:30,paddingBottom:30,loop:!1,interval:staticAd.interval,effectDuration:1e3,data:staticAd.data});bookContainer.append(this.adContainer)},setStyle:function(t){t&&this.adContainer&&this.adContainer.css(t)},resize:function(){this.adInstance&&this.adInstance.resize()},show:function(){this.adContainer&&this.adContainer.show()},hide:function(){this.adContainer&&this.adContainer.hide()}}),ZoomHint=Class({create:function(e){var o=this;this.mouseInBook=new Point(-1,-1);this.oldMouseInBook=new Point(-1,-1);this.zoomHint=null;this.trackMousePoint=function(t){t=isTouch?t.originalEvent.touches:[t];var i=t[0].pageY;o.mouseInBook.x=t[0].pageX;o.mouseInBook.y=i};bookContainer.bind(_event._move,this.trackMousePoint);this.zoomHintTimer=window.setInterval(function(){if(bookType!=BookType.normal_book)o.clearZoomHintTimer();else if(null==o.zoomHint)if(-1==o.oldMouseInBook.x)o.oldMouseInBook.x=o.mouseInBook.x,o.oldMouseInBook.y=o.mouseInBook.y;else if(o.oldMouseInBook.x==o.mouseInBook.x&&o.oldMouseInBook.y==o.mouseInBook.y){var t=o.globalToBook(!0,o.mouseInBook.x,o.mouseInBook.y);if(!(0>t.x||t.x>o.width||0>t.y||t.y>o.height)){var t=o.mouseInBook.x+15,i=o.mouseInBook.y;o.zoomHint=new divHint(getLanguage("lblDoubleClickToZoomIn","Double click to zoom in."),t,i,e);o.zoomHint.show();o.hideCount=0}}else o.oldMouseInBook.x=o.mouseInBook.x,o.oldMouseInBook.y=o.mouseInBook.y;else 2==++o.hideCount&&(bookContainer.unbind(_event._move,o.trackMousePoint),o.zoomHint.destroy(),o.zoomHint=null,window.clearInterval(o.zoomHintTimer))},1500)},globalToBook:function(t,i,e){var o;switch(bookType){case BookType.single_book:o=Point(i-singlePageBook.getLeft(),e-singlePageBook.getTop());break;case BookType.normal_book:o=Point(i-((t?0:flipBook.getPageWidth())+flipBook.getLeft()),e-flipBook.getTop());break;case BookType.catalog_book:o=catalogBook.getTran(),t=i-((t?0:catalogBook.getPageWidth())+catalogBook.getCssLeft())-o.x,e=e-catalogBook.getCssTop()-o.y,o=Point(t,e)}return o},clearZoomHintTimer:function(){try{window.clearInterval(this.zoomHintTimer)}catch(t){}null!=this.zoomHint&&(bookContainer.unbind(_event._move,this.trackMousePoint),this.zoomHint.destroy(),this.zoomHint=null)}}),TipsBox=Class({create:function(t,i){this.visible=!1;this.caption=t;this.background=$("<div class='tipsBox tipsBoxShadow tipsBoxRadius'></div>");$(i).append(this.background)},setTimer:function(){this.timer=window.setInterval(function(){this.hideTipsBox();window.clearInterval(this.timer)}.bind(this),1500)},resetTimer:function(){window.clearInterval(this.timer);this.setTimer()},setPosition:function(t,i,e){void 0==e&&(e=["left","top"]);$(this.background).css(e[0],t+"px");$(this.background).css(e[1],i+"px")},onResize:function(t,i){},getWidth:function(){return $(this.background).width()},getHeight:function(){return $(this.background).height()},setCaption:function(t){this.background.html(t)},showTipsBox:function(){this.visible?this.resetTimer():(this.setTimer(),this.visible=!0,$(this.background).show(),$(this.background).animate({opacity:.5},300))},hideTipsBox:function(){this.visible&&(this.visible=!1,$(this.background).animate({opacity:0},300,function(){$(this.background).hide()}.bind(this)))}}),BookMiniFullscreen=Class({create:function(){},init:function(){bookConfig.hideMiniFullscreen||isPhone()||isPad()||isIE()||MiniStyle.isMini()||fullScreenApi.supportsFullScreen&&fullScreenApi.isFullScreen()||this.miniFullScreen||(this.miniFullScreen=$("<div class='miniFullscreen' id='miniFullscreen'></div>"),this.miniFullScreen.html(getLanguage("lblFullscreen","Click to view in fullscreen.")),this.onResize(),bookContainer.append(this.miniFullScreen),this.miniFullscreenEnter=!1,this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout),this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),3e3),this.initMiniFullScreenEvent())},initMiniFullScreenEvent:function(){this.miniFullScreen.bind(_event._end,function(){bookType==BookType.catalog_book&&global.catalogBook&&catalogBook.guidBar&&catalogBook.guidBar.fullscreenBtn?catalogBook.guidBar.fullscreenBtn.trigger(_event._end):readAsFullscreen();this.miniFullScreen.remove();this.miniFullScreen=void 0}.bind(this));this.miniFullScreen.bind(_event._enter,function(){this.miniFullscreenEnter=!0}.bind(this));this.miniFullScreen.bind(_event._leave,function(){this.miniFullscreenEnter=!1;this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout);this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),3e3)}.bind(this))},removeMiniFullScreen:function(){if(this.miniFullScreen&&!this.miniFullscreenEnter){var t={alpha:.5};$(t).animate({alpha:0},{duration:300,easing:"easeOutSine",step:function(){this.miniFullScreen&&this.miniFullScreen.css({opacity:t.alpha})}.bind(this),complete:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen&&(this.miniFullScreen=void 0)}.bind(this)})}},onResize:function(){if(this.miniFullScreen)if(MiniStyle.isMini())this.miniFullScreen.remove(),this.miniFullScreen=void 0;else{var t=BookInfo.top();this.miniFullScreen.css({top:t+BookInfo.height()-82+"px"})}},show:function(){this.miniFullScreen&&this.miniFullScreen.show()},hide:function(){this.miniFullScreen&&this.miniFullScreen.hide()},remove:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen=void 0},setStyle:function(t){t&&this.miniFullScreen&&this.miniFullScreen.css(t)}}),BookPageNumberForFlip=Class({create:function(){},init:function(){if(bookConfig.updatePageNumberForFlip){var t=-1==BookInfo.getCurrentPageIndex()?1:BookInfo.getCurrentPageIndex();this.miniFullScreen?this.miniFullScreen.html(getShownPageNumberInfo(t)):(this.miniFullScreen=$("<div class='miniFullscreen' id='pageNumberForFlip'></div>"),this.miniFullScreen.html(getShownPageNumberInfo(t)),this.onResize(),bookContainer.append(this.miniFullScreen),this.miniFullscreenEnter=!1,this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout),this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),3e3),this.initMiniFullScreenEvent())}},initMiniFullScreenEvent:function(){},removeMiniFullScreen:function(){if(this.miniFullScreen&&!this.miniFullscreenEnter){var t={alpha:.5};$(t).animate({alpha:0},{duration:300,easing:"easeOutSine",step:function(){this.miniFullScreen&&this.miniFullScreen.css({opacity:t.alpha})}.bind(this),complete:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen&&(this.miniFullScreen=void 0)}.bind(this)})}},onResize:function(){if(this.miniFullScreen)if(MiniStyle.isMini())this.miniFullScreen.remove(),this.miniFullScreen=void 0;else{var t=BookInfo.top();this.miniFullScreen.css({top:t+BookInfo.height()-40+"px"})}},show:function(){this.miniFullScreen&&this.miniFullScreen.show()},hide:function(){this.miniFullScreen&&this.miniFullScreen.hide()},remove:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen=void 0},setStyle:function(t){t&&this.miniFullScreen&&this.miniFullScreen.css(t)}}),FlipPage=Class({downMask:null,upMask:null,currentIndex:0,nextIndex:0,hardPage:!1,coverPage:!1,coordinate:null,startPoint:null,toPoint:null,fromPoint:null,AliceToLeft:!1,AliceToRight:!1,loosen:!0,fallback:!1,flipping:!1,dragMoveToFlip:!1,fallback:!1,pageWidth:0,pageHeight:0,maskWidth:0,create:function(t){this.book=t},startToFlip:function(){this.loosen=this.flipping=!0;this.fallback=this.AliceToRight=this.AliceToLeft=!1},meetFlipCondition:function(){var t=this.toPoint&&this.startPoint&&(this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_LEFT&&0<this.startPoint.x||this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_RIGHT&&0>this.startPoint.x);return this.toPoint&&this.startPoint&&(this.toPoint.x<this.book.MiddleX&&0<this.startPoint.x||this.toPoint.x>this.book.MiddleX&&0>this.startPoint.x)||t},flipToPoint:function(t,i,e){if(t&&i)if(!0==this.hardPage)this.flipToHardPoint(t,i);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=i;var o=this.pageWidth,s=computePoint(o,this.pageHeight,this.maskWidth,t,i);if(s){var n=transformCSS({rotate:s.rotate,tran:{x:s.maskTranX,y:s.maskTranY}}),h=transformCSS({rotate:s.rotate,tran:{x:s.maskTranX,y:s.maskTranY}}),a=transformCSS({rotate:-s.rotate,tran:{x:-s.pageTranX,y:0}}),r=transformCSS({rotate:s.rotate,tran:{x:s.pageTranX,y:0}});this.downMask&&this.downMask.setCSSByStyle(n);this.upMask&&this.upMask.setCSSByStyle(h);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(a);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(r);this.setFlipAlpha(o,t,i);this.setFlipShadow(s,e);this.book.followToPoint(this,t,i)}}},flipToHardPoint:function(t,i){if(t&&i){var e=this.pageWidth,o=this.pageHeight,s=this.maskWidth;i.x>e&&(i.x=e);i.x<-e&&(i.x=-e);this.coordinate=i;if(o=computePoint(e,o,s,t,i)){s=-90+90*Math.abs(i.x/t.x);0>i.x&&(s=90-90*Math.abs(i.x/t.x));var n=transformCSS({perspective:6e3,rotateY:s}),h=transformCSS({perspective:6e3,rotateY:s});o.rotate=s;this.downMask&&this.downMask.setCSSByStyle(n);this.upMask&&this.upMask.setCSSByStyle(h);0>i.x/t.x?this.setPagesVisible(!1):this.setPagesVisible(!0);this.setHardFlipShadow(o);this.setFlipAlpha(e,t,i);this.book.followToPoint(this,t,i)}}},setPagesVisible:function(t){},setHardFlipShadow:function(t){t&&(this.upMask&&this.upMask.setFlipShadow(t,!0),this.downMask&&this.downMask.setFlipShadow(t,!1))},setFlipAlpha:function(t,i,e){},setFlipShadow:function(t,i){t&&(this.upMask.page&&this.upMask.page.setFlipShadow(t,!0,i),this.nextPage&&!this.isMiniPage()&&this.nextPage.setFlipShadow(t,!1,i))},isMiniPage:function(){return this.pageWidth!=this.book.pageWidth||this.pageHeight!=this.book.pageHeight},resetWidthHeight:function(){var t=this.getPageWidthHeight().width,i=this.getPageWidthHeight().height,e=parseInt(Math.sqrt(Math.pow(t,2)+Math.pow(i,2)));0!=(e-i)%2&&(e+=1);this.pageWidth=t;this.pageHeight=i;this.maskWidth=e},getPageWidthHeight:function(){if(this.downMask&&this.downMask.page)return{width:this.downMask.page.pageWidth,height:this.downMask.page.pageHeight};if(this.upMask&&this.upMask.page)return{width:this.upMask.page.pageWidth,height:this.upMask.page.pageHeight};if(this.downMask)return{width:this.downMask.pageWidth,height:this.downMask.pageHeight};if(this.upMask)return{width:this.upMask.pageWidth,height:this.upMask.pageHeight}},setPageZIndex:function(){},setFlipOriginPoint:function(){},endFlipByIndex:function(){},isDragMoveToFlip:function(){this.dragMoveToFlip=!1;this.coordinate&&this.startPoint&&this.coordinate.x!=this.startPoint.x&&(this.dragMoveToFlip=!0)},endFlip:function(){this.flipping=!1},destroy:function(){}}),SingleFlipPage=Class({flipToHardPoint:function(t,i){if(t&&i){this.coordinate=i;var e=this.pageWidth,o=computePoint(e,this.pageHeight,this.maskWidth,t,i);if(o){var s=-90+90*Math.abs(i.x/t.x);0>i.x&&(s=90-90*Math.abs(i.x/t.x));var n=transformCSS({perspective:6e3,rotateY:s}),s=transformCSS({perspective:6e3,rotateY:s});this.downMask&&this.downMask.setCSSByStyle(n);this.upMask&&this.upMask.setCSSByStyle(s);0>i.x/t.x?(this.upMask.setVisible(!1),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));this.setHardFlipShadow(o);this.setFlipAlpha(e,t,i);this.book.followToPoint(this,t,i)}}},setHardFlipShadow:function(t){t&&(this.upMask&&this.upMask.setFlipShadow(t,!0),this.downMask&&this.downMask.setFlipShadow(t,!1))},setPageZIndex:function(){var t=this.downMask.pageIndex,i=this.upMask.pageIndex,e=originTotalPageCount+5+i,o=originTotalPageCount+5-t;if(bookConfig.HardPageEnable){if(i==totalPageCount||1==i)e=2*(bookConfig.totalPageCount+5)+10;if(t==totalPageCount||1==t)o=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(e);this.downMask.setZIndex(o)},setFlipAlpha:function(t,i,e){},setFlipOriginPoint:function(){this.dragMoveToFlip||rightToLeft||(this.fromPoint={x:this.pageWidth,y:this.pageHeight});!this.dragMoveToFlip&&rightToLeft&&(this.fromPoint={x:-this.pageWidth,y:this.pageHeight});this.toPoint="left"==this.book.flipToDirection?{x:-this.pageWidth,y:this.fromPoint.y}:{x:this.pageWidth,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=-this.toPoint.x;this.startPoint.y=this.toPoint.y},endFlipByIndex:function(t){t=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(t);this.upMask.page&&this.upMask.page.setCSSByStyle(t);this.downMask.setCSSByStyle(t);this.downMask.page&&this.downMask.page.setCSSByStyle(t);this.upMask.setLeftOrRight(rightToLeft);this.downMask.setLeftOrRight(rightToLeft);this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(FlipPage),SingleCalendarPage=Class({flipToPoint:function(t,i,e){if(t&&i)if(!0==this.hardPage)this.flipToHardPoint(t,i);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=i;var o=this.pageWidth,s=computePoint(this.pageHeight,o,this.maskWidth,t,i);if(s){var n=transformCSS({rotate:s.rotate,tran:{x:-s.maskTranY,y:s.maskTranX}}),h=transformCSS({rotate:s.rotate,tran:{x:-s.maskTranY,y:s.maskTranX}}),a=transformCSS({rotate:-s.rotate,tran:{x:0,y:-s.pageTranX}}),r=transformCSS({rotate:s.rotate,tran:{x:0,y:s.pageTranX}});this.downMask&&this.downMask.setCSSByStyle(n);this.upMask&&this.upMask.setCSSByStyle(h);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(a);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(r);this.setFlipAlpha(o,t,i);this.setFlipShadow(s,e);this.book.followToPoint(this,t,i)}}},flipToHardPoint:function(t,i){if(t&&i){this.coordinate=i;var e=this.pageWidth,o=computePoint(this.pageHeight,e,this.maskWidth,t,i);if(o){var s=-90+90*Math.abs(i.x/t.x);0>i.x&&(s=90-90*Math.abs(i.x/t.x));var n=transformCSS({perspective:6e3,rotateX:-s}),s=transformCSS({perspective:6e3,rotateX:-s});this.downMask&&this.downMask.setCSSByStyle(n);this.upMask&&this.upMask.setCSSByStyle(s);0>i.x/t.x?(this.upMask.setVisible(!1),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));this.setHardFlipShadow(o);this.setFlipAlpha(e,t,i);this.book.followToPoint(this,t,i)}}},setPageZIndex:function(){var t=this.downMask.pageIndex,i=this.upMask.pageIndex,e=originTotalPageCount+5+i,o=originTotalPageCount+5-t;if(bookConfig.HardPageEnable){if(i==totalPageCount||1==i)e=2*(bookConfig.totalPageCount+5)+10;if(t==totalPageCount||1==t)o=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(e);this.downMask.setZIndex(o)},setFlipAlpha:function(t,i,e){},setFlipOriginPoint:function(){this.dragMoveToFlip||rightToLeft||(this.fromPoint={x:this.pageHeight,y:0});!this.dragMoveToFlip&&rightToLeft&&(this.fromPoint={x:-this.pageHeight,y:0});this.toPoint="left"==this.book.flipToDirection?{x:-this.pageHeight,y:this.fromPoint.y}:{x:this.pageHeight,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=-this.toPoint.x;this.startPoint.y=this.toPoint.y},endFlipByIndex:function(t){t=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(t);this.upMask.page&&this.upMask.page.setCSSByStyle(t);this.downMask.setCSSByStyle(t);this.downMask.page&&this.downMask.page.setCSSByStyle(t);this.upMask.setUpOrDown(rightToLeft);this.downMask.setUpOrDown(rightToLeft);this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(SingleFlipPage),DoubleFlipPage=Class({setPagesVisible:function(t){t?(this.upMask.setVisible(!1),this.downMask.setVisible(!0)):(this.upMask.setVisible(!0),this.downMask.setVisible(!1))},setPageZIndex:function(t){var i=this.downMask.pageIndex,e=this.upMask.pageIndex,o=originTotalPageCount+5+e,s=originTotalPageCount+5-i;"min"==t.flipTo&&(o=2*originTotalPageCount+5-e);"min"==t.flipTo&&(s=5+i);if(bookConfig.HardPageEnable){if(e==totalPageCount||1==e)o=2*(bookConfig.totalPageCount+5)+10;if(i==totalPageCount||1==i)s=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(o);this.downMask.setZIndex(s)},setFlipOriginPoint:function(t){this.dragMoveToFlip||"left"!=t||(this.fromPoint={x:this.pageWidth,y:this.pageHeight});this.dragMoveToFlip||"right"!=t||(this.fromPoint={x:-this.pageWidth,y:this.pageHeight});this.toPoint={x:-this.fromPoint.x,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=this.fromPoint.x;this.startPoint.y=this.fromPoint.y},endFlipByIndex:function(t){var i=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(i);this.upMask.page&&this.upMask.page.setCSSByStyle(i);this.downMask.setCSSByStyle(i);this.downMask.page&&this.downMask.page.setCSSByStyle(i);t?(this.downMask.setLeftOrRight(!0),this.upMask.setLeftOrRight(!0)):(this.downMask.setLeftOrRight(!1),this.upMask.setLeftOrRight(!1));this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(FlipPage),DoubleCalendarPage=Class({flipToPoint:function(t,i,e){if(t&&i)if(!0==this.hardPage)this.flipToHardPoint(t,i);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=i;var o=this.pageWidth,s=computePoint(this.pageHeight,o,this.maskWidth,t,i);if(s){var n=transformCSS({rotate:s.rotate,tran:{x:-s.maskTranY,y:s.maskTranX}}),h=transformCSS({rotate:s.rotate,tran:{x:-s.maskTranY,y:s.maskTranX}}),a=transformCSS({rotate:-s.rotate,tran:{x:0,y:-s.pageTranX}}),r=transformCSS({rotate:s.rotate,tran:{x:0,y:s.pageTranX}});this.downMask&&this.downMask.setCSSByStyle(n);this.upMask&&this.upMask.setCSSByStyle(h);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(a);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(r);this.setFlipAlpha(o,t,i);this.setFlipShadow(s,e);this.book.followToPoint(this,t,i)}}},flipToHardPoint:function(t,i){if(t&&i){var e=this.pageWidth,o=this.pageHeight,s=this.maskWidth;i.x>o&&(i.x=o);i.x<-o&&(i.x=-o);this.coordinate=i;if(o=computePoint(o,e,s,t,i)){var n=-90+90*Math.abs(i.x/t.x);0>i.x&&(n=90-90*Math.abs(i.x/t.x));s=transformCSS({perspective:6e3,rotateX:-n});n=transformCSS({perspective:6e3,rotateX:-n});this.downMask&&this.downMask.setCSSByStyle(s);this.upMask&&this.upMask.setCSSByStyle(n);0>i.x/t.x?this.setPagesVisible(!1):this.setPagesVisible(!0);this.setHardFlipShadow(o);this.setFlipAlpha(e,t,i);this.book.followToPoint(this,t,i)}}},setFlipOriginPoint:function(t){this.dragMoveToFlip||"left"!=t||(this.fromPoint={x:this.pageHeight,y:0});this.dragMoveToFlip||"right"!=t||(this.fromPoint={x:-this.pageHeight,y:0});this.toPoint={x:-this.fromPoint.x,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=this.fromPoint.x;this.startPoint.y=this.fromPoint.y},endFlipByIndex:function(t){var i=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(i);this.upMask.page&&this.upMask.page.setCSSByStyle(i);this.downMask.setCSSByStyle(i);this.downMask.page&&this.downMask.page.setCSSByStyle(i);t?(this.downMask.setUpOrDown(!0),this.upMask.setUpOrDown(!0)):(this.downMask.setUpOrDown(!1),this.upMask.setUpOrDown(!1));this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(DoubleFlipPage),FlipPageManager=Class({create:function(t){this.book=t;this.array=[];this.pinDownCurlingArray=[];this.fallbackArray=[];this.flipArray=[];this.zoomArray=[];this.resizeArray=[];this.hardFlipArray=[];this.softFlipArray=[];this.coverFlipArray=[]},initFlipPageByIndex:function(t,i,e){if(this.book.isCoverPage(t,i))return this.initCoverFlipByIndex(t,i,e);if(this.book.isHardPage(t,i))return this.initHardFlipByIndex(t,i,e);e=this.book.getDownUpPage(t,i,e);var o=t+"-"+i;this[o]||(this[o]=this.book.newFlipPage());this[o].downMask=e[0];this[o].upMask=e[1];this[o].currentIndex=t;this[o].nextIndex=i;this[o].hardPage=!1;this[o].resetWidthHeight();0>this.array.indexOf(o)&&this.array.push(o);0>this.softFlipArray.indexOf(o)&&this.softFlipArray.push(o);return this[o]},initHardFlipByIndex:function(t,i,e){e=this.book.getDownUpHardPage(t,i,e);var o=t+"-"+i;this[o]||(this[o]=this.book.newFlipPage());this[o].downMask=e[0];this[o].upMask=e[1];this[o].currentIndex=t;this[o].nextIndex=i;this[o].hardPage=!0;this[o].resetWidthHeight();0>this.array.indexOf(o)&&this.array.push(o);0>this.hardFlipArray.indexOf(o)&&this.hardFlipArray.push(o);return this[o]},initCoverFlipByIndex:function(t,i,e){e=this.book.getDownUpHardPage(t,i,e);var o=t+"-"+i;this[o]||(this[o]=this.book.newFlipPage());this[o].downMask=e[0];this[o].upMask=e[1];this[o].currentIndex=t;this[o].nextIndex=i;this[o].hardPage=!0;this[o].coverPage=!0;this[o].resetWidthHeight();0>this.array.indexOf(o)&&this.array.push(o);0>this.coverFlipArray.indexOf(o)&&this.coverFlipArray.push(o);return this[o]},checkFlipping:function(){for(var t=this.array.length,i=0;i<t;i++)if(this.array[i]){var e=this.array[i];if(this[e]&&this[e].flipping)return!0}return!1},removeFlipArrayByIndex:function(t){t=t.currentIndex+"-"+t.nextIndex;this[t]&&this[t].nextPage&&this[t].nextPage.clearFlipShadow();this[t]&&delete this[t];this.array&&this.array.removeElement(t);this.flipArray&&this.flipArray.removeElement(t);this.hardFlipArray&&this.hardFlipArray.removeElement(t);this.softFlipArray&&this.softFlipArray.removeElement(t);this.coverFlipArray&&this.coverFlipArray.removeElement(t);this.pinDownCurlingArray&&this.pinDownCurlingArray.removeElement(t);this.fallbackArray&&this.fallbackArray.removeElement(t)},endFlip:function(){if(this.array&&0!=this.array.length)for(var t=this.array.length,i=0;i<t;i++)if(this.array[i]){var e=this[this.array[i]];e&&(e.endFlipByIndex(),this.removeFlipArrayByIndex(e))}},doNotMeetPageConditions:function(t){if(this.hasBeenMonitor()||this.hasUnLoosenPage()||this.fallbackArray&&0<this.fallbackArray.length||0<=this.book.getPagesByIndex(t).indexOf(this.book.currentPageIndex))return!0;var i=!1;!rightToLeft&&t>this.book.currentPageIndex&&(i=!0);rightToLeft&&t<this.book.currentPageIndex&&(i=!0);return this.isReverseSeriesFlip(i)||this.isReversePinDownCurlingArray(i,t)?!0:this.existMutexPages(t)?(this.monitorMutexFlipSituation(t),!0):this.crossFlipMode(t)?(this.book.gotoNearPage(t),window.setTimeout(function(){gotoPageFun(t)},20),!0):this.crossPageMode(t)?(window.setTimeout(function(){gotoPageFun(t)},20),!0):!1},hasBeenMonitor:function(){return this.monitorMutexFlipInterval?!0:!1},hasUnLoosenPage:function(){var t=this.book.optionPage;return t&&this[t]&&!this[t].loosen?!0:!1},isReverseSeriesFlip:function(t){if(t&&this.book.flipping&&this.book.flipToDirection==this.book.direction_right||!t&&this.book.flipping&&this.book.flipToDirection==this.book.direction_left)return!0},isReversePinDownCurlingArray:function(t,i){if(!this.pinDownCurlingArray||0>=this.pinDownCurlingArray.length)return!1;for(var e=this.book.getPagesByIndex(i),o=this.pinDownCurlingArray.length,s=0;s<o;s++){var n=this[this.pinDownCurlingArray[s]];if(t&&n&&n.AliceToRight||!t&&n&&n.AliceToLeft||n&&0>e.indexOf(n.nextIndex))return!0}return!1},existMutexPages:function(t){return this.hardFlipArray&&0<this.hardFlipArray.length&&(this.toSoftPage(t)||this.toCoverPage(t))||this.softFlipArray&&0<this.softFlipArray.length&&(this.toHardPage(t)||this.toCoverPage(t))||this.coverFlipArray&&0<this.coverFlipArray.length&&(this.toHardPage(t)||this.toSoftPage(t))?!0:!1},monitorMutexFlipSituation:function(t){this.monitorMutexFlipInterval||(this.monitorMutexFlipInterval=window.setInterval(function(){this.existMutexPages(t)||(window.clearInterval(this.monitorMutexFlipInterval),this.monitorMutexFlipInterval=void 0,gotoPageFun(t))}.bind(this),20))},toSoftPage:function(t){return this.book.toSoftPage(t)},toHardPage:function(t){return this.book.toHardPage(t)},toCoverPage:function(t){return this.book.toCoverPage(t)},crossFlipMode:function(t){return this.book.crossFlipMode(t)?!0:!1},crossPageMode:function(t){var i=this.book.getFlipTo(t),e=i.minIndex,o=i.maxIndex,s=i.toIndex;if("max"==i.flipTo){if(this.book.pageInfoArray[o].isMiniPage&&!(0<=this.book.getPagesByIndex(o+1).indexOf(t)))return nextPageFun(),!0;if(this.book.pageInfoArray[s].isMiniPage&&!(0<=this.book.getPagesByIndex(o+1).indexOf(t)))return gotoPageFun(s-1),!0}if("min"==i.flipTo){if(this.book.pageInfoArray[e].isMiniPage&&!(0<=this.book.getPagesByIndex(e-1).indexOf(t)))return previousPageFun(),!0;if(this.book.pageInfoArray[s].isMiniPage&&!(0<=this.book.getPagesByIndex(e-1).indexOf(t)))return gotoPageFun(s+1),!0}},beyondPageRange:function(t){return 0>=t||t>originTotalPageCount?!0:!1},beforeFlip:function(t,i){var e=this.book.beforeFlipTo(t,!0);this.isDragMoveToFlip(e);if(!e.dragMoveToFlip){var o=this.book.getFromStartPointByIndex(t,e);e.flipToPoint(o[0],o[1],!0)}o=e.currentIndex+"-"+e.nextIndex;this.book.optionPage==o&&(this.book.optionPage=null);0<this.pinDownCurlingArray.indexOf(o)&&(e.dragMoveToFlip=!0);0>this.flipArray.indexOf(o)&&this.flipArray.push(o);this.fallbackArray.removeElement(o);this.pinDownCurlingArray.removeElement(o);e.startToFlip();this.book.flipping=!0;return e},isDragMoveToFlip:function(t){t.dragMoveToFlip=!1;t.coordinate&&t.startPoint&&t.coordinate.x!=t.startPoint.x&&(t.dragMoveToFlip=!0)}}),FlipBookIntervalManager=Class({create:function(t){this.book=t;this.flippingTime=1e3*bookConfig.flippingTime},flipIntervalTmp:function(a,r,l,t){if(a){this.book.flipping=!0;a.flipping=!0;var g=.05;if(isIE()||isFirefox())g=0;a.setFlipOriginPoint(t);a.coordinate||(a.coordinate=a.startPoint);var d=a.coordinate.x,c=a.coordinate.y,p,i=this.flippingTime;t=Math.abs(a.toPoint.x-d);var e=Math.abs(a.toPoint.x-a.startPoint.x),i=i*t/e;t=isAndroidWeChat()||isAndroidDefault()||isIE()||isFirefox()?function(){var t=0;p=function(){o(t,25,"Sine");t++}.interval(this,i/25)}.bind(this):function(){p=function(t,i){o(t,i,"Sine")}.animation(this,i)}.bind(this);var o=function(t,i,e){if(!a)return!1;var o=a.pageWidth,s=a.pageHeight,n=$.easing["easeInOut"+e],h=$.easing["easeOut"+e];e=h(null,t,d,a.toPoint.x-d,i);h=h(null,t,c,a.toPoint.y-c,i);a.dragMoveToFlip||(e=n(null,t,d,a.toPoint.x-d,i),h=bookConfig.FlipDirection?g*Math.sqrt(s*s-e*e):s-g*Math.sqrt(o*o-e*e));t<i?this.flipToPoint(a,r,l,a.fromPoint,{x:e,y:h}):(this.flipToPoint(a,r,l,a.fromPoint,a.toPoint),this.book.afterFlipTo(a,l),p.stop())}.bind(this);t()}},setFlipInterval:function(){this.flipInterval=function(){if(!this.flipIntervalManager.flipInterval||!this.flipIntervalManager.flipInterval.stop){if(this.flipPageManager&&this.flipPageManager.array&&0!=this.flipPageManager.array.length)for(var t=0;t<this.flipPageManager.array.length;t++){var i=this.flipPageManager.array[t];if(i){var e=this.flipPageManager[i];if(!this.flipPageManager[i])this.flipPageManager.array.removeElement(i),t--;else if(this.flipPageManager[i].fromPoint&&this.flipPageManager[i].startPoint&&this.flipPageManager[i].toPoint&&this.flipPageManager[i].downMask&&this.flipPageManager[i].upMask&&!this.flipPageManager[i].flipping){this.flipPageManager[i].Alice=!0;this.flipPageManager[i].coordinate||(this.flipPageManager[i].coordinate=this.flipPageManager[i].startPoint);var o=.22*(e.toPoint.x-e.coordinate.x),s=o+this.flipPageManager[i].coordinate.x,e=o/((e.coordinate.x-e.toPoint.x)/(e.coordinate.y-e.toPoint.y))+this.flipPageManager[i].coordinate.y,o=this.flipPageManager[i].downMask.pageIndex,n=this.flipPageManager[i].upMask.pageIndex;this.flipIntervalManager.flipToPoint(this.flipPageManager[i],o,n,this.flipPageManager[i].fromPoint,{x:s,y:e});!this.flipPageManager[i].flipping&&this.flipPageManager[i].loosen&&(1>Math.abs(s.toFixed(2)-this.flipPageManager[i].toPoint.x)&&1>Math.abs(e.toFixed(2)-this.flipPageManager[i].toPoint.y)||isNaN(s)||isNaN(e))&&(this.flipPageManager[i].Alice=!1,s=this.flipPageManager[i].toPoint.x,e=this.flipPageManager[i].toPoint.y,this.flipIntervalManager.flipToPoint(this.flipPageManager[i],o,n,this.flipPageManager[i].fromPoint,{x:s,y:e}),this.flipPageManager[i].endFlipByIndex(0>this.flipPageManager[i].toPoint.x),this.flipPageManager.removeFlipArrayByIndex(this.flipPageManager[i]),this.afterCurling(),t--)}}}else this.flipIntervalManager.flipInterval.stop=!0,this.flipIntervalManager.flipInterval=void 0;this.flipIntervalManager.flipInterval&&(isAndroidWeChat()||isAndroidDefault()||isIE()||isFirefox()?window.setTimeout(this.flipIntervalManager.flipInterval,30):window.requestAnimationFrame(this.flipIntervalManager.flipInterval))}}.bind(this.book);this.flipInterval()},flipToPoint:function(t,i,e,o,s,n){t&&t.flipToPoint(o,s,n);i=Math.abs(s.x-o.x)*this.book.pageWidth/t.pageWidth;(!this.book.movedLength||Math.abs(this.book.movedLength)>i||!t.loosen||t.flipping)&&this.book.movetoCenter(t.currentIndex,t.nextIndex,i)},endFlip:function(){},destroy:function(){}}),computePoint=function(t,i,e,o,s){if(!o||!s)return{rotate:0,pageTranX:0,maskTranX:0,maskTranY:0};s.x>t&&(s.x=t);s.x<-t&&(s.x=-t);isAndroidDefault()&&(o.y=s.y);if(o.x==s.x){var n=0;0>o.x&&(n+=180);return{rotate:n,pageTranX:0,maskTranX:o.x,maskTranY:0}}var h=Math.sqrt(Math.pow(s.y-i,2)+Math.pow(s.x-0,2)),n=Math.sqrt(Math.pow(o.y-i,2)+Math.pow(o.x-0,2));if(h>n){var a=Math.atan((s.y-i)/(s.x-0)),h=Math.abs(Math.sin(a)*n),n=Math.abs(Math.cos(a)*n);s.y=i-h;s.x=0<s.x?n:-n}h=Math.sqrt(Math.pow(s.y-0,2)+Math.pow(s.x-0,2));n=Math.sqrt(Math.pow(o.y-0,2)+Math.pow(o.x-0,2));h>n&&(a=Math.atan((s.y-0)/(s.x-0)),h=Math.abs(Math.sin(a)*n),n=Math.abs(Math.cos(a)*n),s.y=h,s.x=0<s.x?n:-n);var r=(s.y-o.y)/(s.x-o.x),l=Math.atan(r),n=180*l/Math.PI,g=(s.x+o.x)/2,d=(s.y+o.y)/2,h=i/2,a=t/2,c=i/2;0>o.x&&(n+=180,a=-t/2);s=Math.sqrt(Math.pow(o.y-s.y,2)+Math.pow(o.x-s.x,2))/2;s=0<=n&&180>n?Math.abs((i-Math.abs(o.y))*Math.sin(l))+s:Math.abs(o.y*Math.sin(l))+s;i=Math.atan(t/i);e=Math.abs(s/(Math.sin(i+Math.abs(l))*e));e=Math.min(1,e);i=((g-a)*r+c+Math.pow(r,2)*d)/(1+Math.pow(r,2));o=r*(d-i)+g;c=Math.sqrt(Math.pow(a-o,2)+Math.pow(c-i,2));Math.abs(o)<Math.abs(a)&&(c=-c);return{frontShadowDistance:s,shadowRate:e,rotate:n,pageTranX:c-t/2,maskTranX:o-0,maskTranY:i-h}},FlipBook=Class({coordinate_bottom_left:"bl",coordinate_top_left:"tl",coordinate_bottom_right:"br",coordinate_top_right:"tr",direction_left:"left",direction_right:"right",flipPageManager:null,maskWidth:0,create:function(t){this._super(t);this.flipPageManager=new FlipPageManager(this);this.toPageIndex=this.currentPageIndex;this.initBook();this.initEvent();this.flipIntervalManager=new FlipBookIntervalManager(this);this.pageInfoArray=new PageInfo(!this.doublePage).pageInfoArray},initBook:function(){this.flipBook=$("<div class='book'></div>");this.parent.append(this.flipBook)},resetPages:function(){},getBook:function(){return this.flipBook},addPageArray:function(t){if(t&&this.pageArray)for(var i=0;i<t.length;i++)if(!(0>=t[i]||t[i]>originTotalPageCount||(this.pageArray[t[i]]&&this.fillContent(t[i]),this.pageArray[t[i]]))){var e=this.newPage(t[i]);e.addAttachment();var o=this.pageInfoArray[t[i]];e.onResize(this.pageWidth*o.pageWidth,this.pageHeight*o.pageHeight,o.opacity);this.pageArray[t[i]]=e;this.fillContent(t[i]);this.flipBook.append(e.container)}},onResize:function(t,i){this.resizeBook(t,i);this.resetPages(this.currentPageIndex);isPhone()||isPad()||this.switchNormalImage(!0);this.resizeAttachments(t,i)},resizeAttachments:function(t,i){},loading:function(){if(!this.flipping){var t=this.getCurrentPages();if(t&&!(0>=t.length))for(var i=t.length,e=0;e<i;e++)t[e]&&this.pageArray[t[e]]&&this.pageArray[t[e]].loading()}},fillContent:function(t){if(!this.flipping||imageLoaded[t])!bookConfig.preloadNextPage&&0>this.getCurrentPages().indexOf(t)||(this.pageArray[t]&&this.pageArray[t].fillContent(),this.pageBackArray&&this.pageBackArray[t]&&this.pageBackArray[t].fillContent())},fillPage:function(t,i){if(t)for(var e=this.pageArray.length,o=0;o<e;o++)this.pageArray[o]&&this.pageArray[o].fillPage(t,i),this.pageBackArray&&this.pageBackArray[o]&&this.pageBackArray[o].fillPage(t,i)},removePage:function(t){!isNaN(t)&&this.pageArray[t]&&(this.pageArray[t].remove(),this.pageArray[t]=void 0)},unWrapPageExcludeArray:function(t){if(t&&this.pageArray)for(var i=this.pageArray.length,e=0;e<i;e++)!this.pageArray[e]||0<=t.indexOf(e)||(this.pageArray[e].remove(),this.pageArray[e]=void 0)},unWrapPageBackExcludeArray:function(t){if(t&&this.pageBackArray)for(var i=this.pageBackArray.length,e=0;e<i;e++)!this.pageBackArray[e]||0<=t.indexOf(e)||(this.pageBackArray[e].remove(),this.pageBackArray[e]=void 0)},resizePage:function(t,i){if(this.pageArray)for(var e=this.pageArray.length,o=0;o<e;o++)if(this.pageArray[o]){var s=this.pageInfoArray[o];this.pageArray[o].onResize(t*s.pageWidth,i*s.pageHeight,s.opacity)}if(this.pageBackArray)for(e=this.pageBackArray.length,o=0;o<e;o++)this.pageBackArray[o]&&(s=this.pageInfoArray[o],this.pageBackArray[o].onResize(t*s.pageWidth,i*s.pageHeight,s.opacity))},crossFlipMode:function(t,i){return!1},toSoftPage:function(t){return!0},toHardPage:function(t){return!1},toCoverPage:function(){return!1},isCoverPage:function(){return!1},isHardPage:function(){return!1},beforeFlipTo:function(t,i){var e=this.getFlipTo(t),o=e.minIndex,s=e.maxIndex,n=e.toIndex,h;"max"==e.flipTo&&(h=this.flipToMax(s,n,i,rightToLeft));"min"==e.flipTo&&(h=this.flipToMin(o,n,i,!rightToLeft));this.setAttachmentBeforeFlipTo(n);h.setPageZIndex(e);return h},afterFlipTo:function(t,i){t&&t.downMask&&t.upMask&&(t.endFlipByIndex(),this.flipPageManager.removeFlipArrayByIndex(t),this.checkFlipping(),t.downMask.pageIndex<i?this.afterFlipToMax(i,!rightToLeft):this.afterFlipToMin(i,rightToLeft),this.setAttachmentAfterFlipTo(i))},checkFlipping:function(){this.flipping=!1;this.flipPageManager.checkFlipping()?this.flipping=!0:(this.startAnimation(),this.flipToDirection="",this.loading())},followToPoint:function(t,i,e){},endFlip:function(){this.flipPageManager&&this.flipPageManager.endFlip()},getCurrentPageIndex:function(){return this.currentPageIndex},getPageWidth:function(t){if(void 0==t)return this.pageWidth;this.pageWidth=t},getPageHeight:function(t){if(void 0==t)return this.pageHeight;this.pageHeight=t},getWidth:function(){return this.width},getHeight:function(){return this.height},getScale:function(){return this.flipBook.parameters.toScale},getLeft:function(){return this.flipBook.offset().left},getTop:function(){return this.flipBook.offset().top},getCssLeft:function(){return parseInt(this.flipBook.css("left"))},getCssTop:function(){return parseInt(this.flipBook.css("top"))},setCSS:function(t){if(t){void 0!=t.width&&this.flipBook.css("width",t.width+"px");void 0!=t.height&&this.flipBook.css("height",t.height+"px");void 0!=t.left&&this.flipBook.css("left",t.left+"px");void 0!=t.top&&this.flipBook.css("top",t.top+"px");void 0!=t.display&&this.flipBook.css("display",t.display);if(t.tran||void 0!=t.scale||t.origin){var i=transformCSS(t);this.flipBook.css(i)}this.flipBook.registerPatamers&&this.flipBook.registerParamers(t)}},setPosition:function(t,i,e){void 0==e&&(e=["left","top"]);this.flipBook.css(e[0],t+"px");this.flipBook.css(e[1],i+"px")},translate:function(t,i){transformCSS({});this.flipBook.css(style)},supportSerialsFlip:function(){return isPhone()||isPad()?!1:!0},gotoPage:function(t,i){if(t&&(this.toPageIndex=t,!this.flipBook.parameters||!this.flipBook.parameters.zoomming))if(this.status_zoom&&(isPhone()||isPad())){var e={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]};this.flipBook.onDoubleTap.bind(this.flipBook)(e)}else if(!(this.flipPageManager.beyondPageRange(t)||this.flipPageManager.doNotMeetPageConditions(t)||(isPhone()||isPad()||this.status_zoom)&&this.flipping)){this.stopMedia();this.flipIntervalManager&&this.flipIntervalManager.flipInterval&&(this.flipIntervalManager.flipInterval.stop=!0,this.flipIntervalManager.flipInterval=void 0);var o=this.flipPageManager.beforeFlip(t,!0);fromPageIndex=this.currentPageIndex;var s=this.flipToDirection;!i&&flipHistory&&flipHistory.addFromCurrentIndex(t);this.flippingTo(t,i);playFlipSound();(function(){this.flipIntervalManager.flipIntervalTmp(o,fromPageIndex,t,s)}).delay(this,50);0<=BookInfo.getPagesByIndex(t).indexOf(1)?(this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen),this.miniFullScreen.init()):this.miniFullScreen&&this.miniFullScreen.remove();this.pageNumberForFlip||(this.pageNumberForFlip=new BookPageNumberForFlip);this.pageNumberForFlip.init()}},afterCurling:function(){this.startAnimation()},startAnimation:function(){var t=BookInfo.getCurrentPages();if(void 0!=t&&null!=t)for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].startAnimation()}},pauseAnimation:function(){for(var t=this.pageArray.length,i=0;i<t;i++)this.pageArray[i]&&this.pageArray[i].pauseAnimation()},openShownMedia:function(){var t=BookInfo.getCurrentPages();if(void 0!=t&&null!=t)for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].enterSide()}},stopMedia:function(){for(var t=this.pageArray.length,i=0;i<t;i++)this.pageArray[i]&&this.pageArray[i].leaveSide()},resetSlider:function(){for(var t=this.pageArray.length,i=0;i<t;i++)this.pageArray[i]&&this.pageArray[i].resetSlider()},select:function(){this.selected=!0;var t=BookInfo.getCurrentPages();if(void 0!=t&&null!=t){for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].initSelectTextEvent()}this.flipBook.parameters&&(this.flipBook.parameters.eventCancel=!0)}},unSelect:function(){this.selected=!1;var t=BookInfo.getCurrentPages();if(void 0!=t&&null!=t){for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].destroySelect()}StateSynchronous.instance().findButtons("SelectTextButton",!0).each(function(t){t.setAsUnSelect();t.executeCallback()});this.flipBook.parameters&&(this.flipBook.parameters.eventCancel=!1)}},magnifierZoom:function(){this.selected=!0;var t=BookInfo.getCurrentPages();if(void 0!=t&&null!=t)for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].initMagnifierEvent()}},unMagnifierZoom:function(){this.selected=!1;var t=BookInfo.getCurrentPages();if(void 0!=t&&null!=t){for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].destroyMagnifier()}bookConfig.MagnifierButtonVisible&&window.magnifierZoomBox&&window.magnifierZoomBox.hide();StateSynchronous.instance().findButtons("magnifier",!0).each(function(t){t.setAsZoomin()})}},switchLargeImage:function(){for(var t=this.pageArray.length,i=0;i<t;i++)this.pageArray[i]&&this.pageArray[i].switchLargeImage()},switchNormalImage:function(t){for(var i=this.pageArray.length,e=0;e<i;e++)this.pageArray[e]&&this.pageArray[e].switchNormalImage(t)},hide:function(){Log.debug("normal book hide.");this.visible=!1;this.setCSS({display:"none"});this.stopMedia();this.resetSlider();this.bookMap&&this.bookMap.hide();this.controlBar&&this.controlBar.setVisible(!1);this.adContainer&&this.adContainer.hide();this.miniFullScreen&&this.miniFullScreen.hide();this.pageNumberForFlip&&this.pageNumberForFlip.hide()},show:function(){Log.debug("normal book show.");this.visible=!0;this.setCSS({display:"block"});this.openShownMedia();this.addHistoryTexts();this.addSearchHighlight();this.miniFullScreen&&this.miniFullScreen.show();this.pageNumberForFlip&&this.pageNumberForFlip.show();this.bmt&&this.bmt.refresh();this.adContainer&&this.adContainer.show();this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3})},addHistoryTexts:function(){var t=BookInfo.getCurrentPages();if(void 0!=t&&null!=t)for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].addHistoryTexts()}},addSearchHighlight:function(){var t=this.currentPageIndex,t=0==t%2?t+1:t-1;this.pageArray[t]&&this.pageArray[t].highlightSearch();this.pageArray[t+1]&&this.pageArray[t+1].highlightSearch();this.pageArray[t-1]&&this.pageArray[t-1].highlightSearch();this.pageArray[t+2]&&this.pageArray[t+2].highlightSearch()},clearSearchHighlight:function(){for(var t=this.pageArray.length,i=0;i<t;i++)this.pageArray[i]&&this.pageArray[i].clearHighlight()},destroy:function(){},adjustBookPosition:function(){if(!this.status_zoom&&!this.flipping&&this.width&&this.height){this.pageWidthHeight=this.getFitWH();var t=this.getTranY(),i=this.pageWidthHeight.x/this.width,e=this.getTranX(i);this.pageWidthHeight.x==this.width&&0==t&&0==e||this.flipBook.animateToTransform.bind(this.flipBook)(i,{x:e,y:t},{x:50,y:0})}},getTranX:function(t){if(!bookConfig.retainBookCenter)return 0;var i=0;t=this.width*t/4;1!=this.currentPageIndex||bookConfig.isTheBookOpen||(i=rightToLeft?t:-t);this.currentPageIndex==totalPageCount&&(i=rightToLeft?-t:t);t=this.getCssLeft();var e=this.getSpace(!0);return i=e.left+(windowWidth-e.left-e.right-this.width)/2-t+i},getTranY:function(){var t=this.getCssTop(),i=this.getSpace(!0);return i.top+(windowHeight-i.top-i.bottom-this.pageWidthHeight.y)/2-t}}).extend(Book);bdor[41]=function(){return bdor[32](bdor[30](37,0),bdor[38]/bdor[40])}();var ZoomMonitor=Class({options:void 0,target:void 0,beforeZoomIn:void 0,afterZoomIn:void 0,beforeZoomOut:void 0,afterZoomOut:void 0,beforePan:void 0,afterPan:void 0,create:function(){},register:function(t,i){this.options=t;this.target=t.target;this.beforeZoomIn=t.beforeZoomIn;this.afterZoomIn=t.afterZoomIn;this.beforeZoomOut=t.beforeZoomOut;this.afterZoomOut=t.afterZoomOut;this.beforePan=t.beforePan;this.afterPan=t.afterPan;this.target.zoom({zoomIn:this.beforeZoomIn,onPan:this.beforePan,zoomOut:this.afterZoomOut,onZoomed:this.afterZoomIn},i)}});FlipBook.expand({initEvent:function(){this.moveDirectionType={MOVE_LEFT:-1,MOVE_RIGHT:1,MOVE_NONE:0};this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.hammerEventModular();this.mouseWheelFlip()},hammerEventModular:function(){var t=new Hammer.Manager(this.flipBook[0]);t.add(new Hammer.Pan);t.add((new Hammer.Swipe).recognizeWith(t.get("pan")));t.add(new Hammer.Press({time:"1000"}));t.add(new Hammer.Pinch);t.add(new Hammer.Tap({event:"doubletap",taps:2}));t.add(new Hammer.Tap);t.on("panstart panmove panend",this.onPan.bind(this));t.on("press",this.onPress.bind(this));t.on("tap",this.onTap.bind(this));t.on("swipeleft swiperight swipedown swipeup",this.onSwipe.bind(this));this.flipBook.bind("mouseover mousemove",this.onOver.bind(this));this.flipBook.bind(_event._down,this.onDown.bind(this));$("body").bind(_event._end,this.onUp.bind(this));this.flipBook.bind(_event._leave,function(){this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0);this.optionPage=null;this.unCurling()}.bind(this));this.zoomMonitor=new ZoomMonitor;this.zoomMonitor.register({target:this.flipBook,beforeZoomIn:this.beforeZoomIn.bind(this),afterZoomIn:this.afterZoomIn.bind(this),beforePan:this.beforePan.bind(this),afterPan:this.afterPan.bind(this),beforeZoomOut:this.beforeZoomOut.bind(this),afterZoomOut:this.afterZoomOut.bind(this)},!0);$(this.flipBook).bind("mouseup touchstart",function(t){onWindowClick(t)})},onDown:function(){this.fingleDown=!0},onUp:function(t){this.fingleDown=!1;this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||(t=this.realPoint(t)[0],t=this.aroundCorner(t),bookConfig.CurlingPageCorner&&t&&0<=t.indexOf("l")&&this.optionPage&&this.flipPageManager[this.optionPage]&&this.flipPageManager[this.optionPage].AliceToRight||bookConfig.CurlingPageCorner&&t&&0<=t.indexOf("r")&&this.optionPage&&this.flipPageManager[this.optionPage]&&this.flipPageManager[this.optionPage].AliceToLeft||(this.optionPage&&(this.flipPageManager[this.optionPage]&&this.flipPageManager[this.optionPage].meetFlipCondition()&&this.pageDragToFlip(),this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null),this.unCurling()))},onPinch:function(t){this.selected||this.status_zoom||this.isZoomming||this.status_zoom||this.status_resize||this.flipping||"pinchout"!=t.type||(this.endFlip(),this.zoomToPage(this.currentPageIndex))},onDoubleTap:function(t){if(!this.selected&&!this.status_resize&&!this.flipping){var i=this.realPoint(t.srcEvent)[0];this.aroundCorner(i)||t.srcEvent[0].pageX>$("#flipBook").offset().left+$("#flipBook").outerWidth()||t.srcEvent[0].pageX<$("#flipBook").offset().left||t.srcEvent[0].pageY>$("#flipBook").offset().top+$("#flipBook").outerHeight()||t.srcEvent[0].pageY<$("#flipBook").offset().top||(this.endFlip(),this.zoomToPage(this.currentPageIndex,t.srcEvent.pageX,t.srcEvent.pageY))}},onPan:function(t){if("panend"!=t.type&&!(this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||this.flipPageManager.fallbackArray&&0<this.flipPageManager.fallbackArray.length)){var i=this.realPoint(t.srcEvent)[0],e=this.aroundCorner(i);this.optionPage?(this.flipPageManager[this.optionPage].toPoint=i,this.lastMousePoint&&(this.mouseMoveDirection=0<=i.x-this.lastMousePoint.x?this.moveDirectionType.MOVE_RIGHT:this.moveDirectionType.MOVE_LEFT),this.lastMousePoint=i):bookConfig.FlipDirection||bookConfig.upsideOnMobile()?("panstart"==t.type&&e||30<Math.abs(t.deltaY)&&(i.x<this.MiddleX&&0<t.deltaY||i.x>this.MiddleX&&0>t.deltaY))&&this.curling(i,e):("panstart"==t.type&&e||30<Math.abs(t.deltaX)&&(i.x<this.MiddleX&&0<t.deltaX||i.x>this.MiddleX&&0>t.deltaX))&&this.curling(i,e)}},onPress:function(t){if(!(this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||this.flipPageManager.fallbackArray&&0<this.flipPageManager.fallbackArray.length)){t=this.realPoint(t.srcEvent)[0];var i=this.aroundCorner(t);this.optionPage?this.flipPageManager[this.optionPage].toPoint=t:(i||(i=t.x>this.MiddleX?"r":"l"),this.curling(t,i))}},onRotate:function(t){},onSwipe:function(t){if(!(this.selected||this.status_zoom||this.isZoomming||this.dragToFlip))if(bookConfig.FlipDirection||bookConfig.upsideOnMobile())switch(t.type){case"swipeup":this.flipFromDirection(this.coordinate_bottom_right);break;case"swipedown":this.flipFromDirection(this.coordinate_bottom_left)}else switch(t.type){case"swipeleft":this.flipFromDirection(this.coordinate_bottom_right);break;case"swiperight":this.flipFromDirection(this.coordinate_bottom_left)}},onTap:function(t){if(this.selected||this.status_zoom||this.isZoomming)onWindowTap(t.srcEvent);else if(bookType==this.bookType&&!this.status_zoom&&!this.status_resize){var i=this.realPoint(t.srcEvent)[0];(i=this.aroundFlipCorner(i))?(this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null,this.flipFromDirection(i)):onWindowTap(t.srcEvent)}},onOver:function(t){if(!(isPhone()||isPad()||this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.fingleDown||this.flipping)&&bookConfig.CurlingPageCorner){t=this.realPoint(t)[0];var i=this.aroundCorner(t);i?this.curling(t,i):(this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null);this.unCurling()}},aroundFlipCorner:function(t){var i=this.aroundCorner(t);if(i)return i;if(!this.doublePage){var e=this.getCurrentPageWidthHeight(t.x);bookConfig.FlipDirection?(i=e.pageHeight,e=e.pageWidth):(i=e.pageWidth,e=e.pageHeight);0>this.MiddleX&&(t.x=-t.x);if(!(t.x>i-1||1>t.x||t.y>e-1||1>t.y||t.x<.8*i&&t.x>.2*i||t.y>.2*e&&t.y<.8*e)){var o=Math.sqrt(Math.pow(.2*e,2)-Math.pow((i-Math.abs(t.x))*e/i,2)),i=Math.sqrt(Math.pow(.2*e,2)-Math.pow(Math.abs(t.x)*e/i,2));if(t.y<i&&t.x<this.MiddleX&&0<this.MiddleX)return"tl";if(t.y<i&&t.x<-this.MiddleX&&0>this.MiddleX||t.y<o&&t.x>this.MiddleX&&0<this.MiddleX)return"tr";if(t.y<o&&t.x>-this.MiddleX&&0>this.MiddleX)return"tl";if(t.y>e-i&&t.x<this.MiddleX&&0<this.MiddleX)return"bl";if(t.y>e-i&&t.x<-this.MiddleX&&0>this.MiddleX||t.y>e-o&&t.x>this.MiddleX&&0<this.MiddleX)return"br";if(t.y>e-o&&t.x>-this.MiddleX&&0>this.MiddleX)return"bl"}}},aroundCorner:function(t){this.edgeX();var i=this.getCurrentPageWidthHeight(t.x);if(bookConfig.FlipDirection)var e=i.pageHeight,i=i.pageWidth;else e=i.pageWidth,i=i.pageHeight;if(!(Math.abs(t.x)>e-1||t.y>i-1||1>t.y||Math.abs(t.x)<.8*e||t.y>.2*i&&t.y<.8*i)){e=Math.sqrt(Math.pow(.2*i,2)-Math.pow((e-Math.abs(t.x))*i/e,2));if(t.y<e&&t.x<this.MiddleX)return"tl";if(t.y<e&&t.x>this.MiddleX)return"tr";if(t.y>i-e&&t.x<this.MiddleX)return"bl";if(t.y>i-e&&t.x>this.MiddleX)return"br"}},getCurrentPageWidthHeight:function(t){this.edgeX();var i=this.getCurrentPages();if(1==i.length||t<=this.MiddleX&&!rightToLeft||t>=this.MiddleX&&rightToLeft)return{pageWidth:this.pageInfoArray[i[0]].pageWidth*this.pageWidth,pageHeight:this.pageInfoArray[i[0]].pageHeight*this.pageHeight};if(t<=this.MiddleX&&rightToLeft||t>=this.MiddleX&&!rightToLeft)return{pageWidth:this.pageInfoArray[i[1]].pageWidth*this.pageWidth,pageHeight:this.pageInfoArray[i[1]].pageHeight*this.pageHeight}},pageDragToFlip:function(){this.flipPageManager[this.optionPage].toPoint.y=this.flipPageManager[this.optionPage].startPoint.y;this.flipPageManager[this.optionPage].toPoint.x=-this.flipPageManager[this.optionPage].startPoint.x;this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.flipPageManager[this.optionPage].startToFlip();this.flipPageManager[this.optionPage].dragMoveToFlip=!0;this.flipToDirection=0>this.flipPageManager[this.optionPage].startPoint.x?"right":"left";this.tmpDragToFlipTimeout&&window.clearTimeout(this.tmpDragToFlipTimeout);this.dragToFlip=!0;this.tmpDragToFlipTimeout=window.setTimeout(function(){this.dragToFlip=!1}.bind(this),500);this.getNextPage()},flipFromDirection:function(t){if(!(this.flipPageManager.fallbackArray&&0<this.flipPageManager.fallbackArray.length))if(0<=t.indexOf("l")){if(!this.flipping||this.flipToDirection!=this.direction_left){if(this.flipPageManager.pinDownCurlingArray&&0<this.flipPageManager.pinDownCurlingArray.length){t=this.flipPageManager.pinDownCurlingArray.length;for(var i=0;i<t;i++)if(this.flipPageManager.pinDownCurlingArray[i].AliceToLeft)return}this.flipToDirection=this.direction_right;this.getNextPage()}}else if(0<=t.indexOf("r")&&(!this.flipping||this.flipToDirection!=this.direction_right)){if(this.flipPageManager.pinDownCurlingArray&&0<this.flipPageManager.pinDownCurlingArray.length)for(t=this.flipPageManager.pinDownCurlingArray.length,i=0;i<t;i++)if(this.flipPageManager.pinDownCurlingArray[i].AliceToRight)return;this.flipToDirection=this.direction_left;this.getNextPage()}},hidePages:function(){var t=this.pageArray.length,i=this.getCurrentPages();this.zoomPageArray=[];for(var e=0;e<t;e++)this.pageArray[e]&&0>i.indexOf(e)&&this.pageArray[e].visible&&(this.zoomPageArray.push(this.pageArray[e].pageIndex),this.pageArray[e].setVisible(!1))},showPages:function(){if(this.zoomPageArray){for(var t=this.zoomPageArray.length,i=0;i<t;i++){var e=this.zoomPageArray[i];this.pageArray[e]&&this.pageArray[e].setVisible(!0)}this.zoomPageArray=[]}},beforeZoomIn:function(){if(!isPhone()&&!isPad()){this.controlBar||(this.controlBar=bookType!=BookType.catalog_book?new ZoomControlBar(this.parent):new CatalogZoomControlBar(this.parent));if(this.controlBar){var t="lite"==bookConfig.ToolbarViewMode&&bookType==BookType.catalog_book?50:0;this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,toolBar.getTopHeight()+t+5);this.controlBar.setVisible(!0)}this.bookMap&&(this.bookMap.show(),this.bookMap.fillContent(this.currentPageIndex))}window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1);this.status_zoom=!0;this.adContainer&&this.adContainer.setStyle({"z-index":1});this.hidePages();StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(t){t.setAsZoomout();t.executeCallback()});BookInfo.getBook().bmt&&BookInfo.getBook().bmt.hide()},beforeZoomOut:function(){},afterZoomOut:function(){this.resetZoomConfig();if(isPhone()||isPad())this.showPages(),gotoPageFun(this.toPageIndex);isPhone()||isPad()||this.switchNormalImage()},resetZoomConfig:function(){this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3});this.status_zoom=!1;this.controlBar&&this.controlBar.setVisible(!1);this.bookMap&&this.bookMap.hide();window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0);StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(t){t.setAsZoomin();t.executeCallback()});this.thicknessManager&&this.thicknessManager.showCanvas();BookInfo.getBook().bmt&&BookInfo.getBook().bmt.show();this.showPage&&this.showPage.parameters&&(this.showPage.parameters.zoomFlag=!1)},beforePan:function(){this.bookMap&&this.bookMap.refreshArea()},afterPan:function(){},curling:function(t,i){this.selected||this.status_zoom||this.status_resize||(this.optionPage=this.curlingPage(t,i))&&(this.flipIntervalManager.flipInterval||this.flipIntervalManager.setFlipInterval())},curlingPage:function(t,i){var e,o,s,n;if(!i&&t.x<this.MiddleX||i&&0<=i.indexOf("l")){if(this.flipping&&"left"==this.flipToDirection)return;o=this.realIndex(!1)[0];s=this.realIndex(!1)[1];e=o+"-"+s;n=!1}if(!i&&t.x>this.MiddleX||i&&0<=i.indexOf("r")){if(this.flipping&&"right"==this.flipToDirection)return;o=this.realIndex(!0)[0];s=this.realIndex(!0)[1];e=o+"-"+s;n=!0}if(e&&o&&s){var h=originTotalPageCount;bookConfig.SingleModeBanFlipToLastPage&&this.bookType==BookType.single_book&&(h=Math.max(1,bookConfig.totalPageCount-1));if(!(0>=o||o>h||0>=s||s>h||this.flipPageManager[e]&&this.flipPageManager[e].fallback||this.flipPageManager[e]&&this.flipPageManager[e].flipping))if(h=s,BookInfo.isDoublePage()&&(h=BookInfo.getMinPageIndex(h)),passwardType()&&bookConfig.excludeFrontPages&&h>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward())global.passwardPannel||(global.passwardPannel=new PasswardPannel),global.passwardPannel.show();else return this.defineFlipPage(e,t,i,o,s,n),e}},defineFlipPage:function(t,i,e,o,s,n){if(i){var h=originTotalPageCount;bookConfig.SingleModeBanFlipToLastPage&&this.bookType==BookType.single_book&&(h=Math.max(1,bookConfig.totalPageCount-1));0>=o||o>h||0>=s||s>h||(this.flipPageManager[t]?e=this.getFromStartPointByCoordinate(i,e,this.flipPageManager[t]):(this.beforeFlipTo(s),e=this.getFromStartPointByCoordinate(i,e,this.flipPageManager[t]),this.flipIntervalManager.flipToPoint(this.flipPageManager[t],o,s,e[0],e[1],!0)),n?(this.flipPageManager[t].AliceToLeft=!0,this.flipPageManager[t].AliceToRight=!1):(this.flipPageManager[t].AliceToLeft=!1,this.flipPageManager[t].AliceToRight=!0),this.flipPageManager[t].loosen=!1,this.flipPageManager[t].fromPoint=e[0],this.flipPageManager[t].startPoint=e[1],this.flipPageManager[t].toPoint=i,0>this.flipPageManager.pinDownCurlingArray.indexOf(t)&&this.flipPageManager.pinDownCurlingArray.push(t),this.flipPageManager.fallbackArray.removeElement(t),this.flipPageManager.flipArray.removeElement(t))}},unCurling:function(){if(!(this.selected||this.status_zoom||this.status_resize)&&this.flipPageManager.array)for(var t=this.flipPageManager.array.length,i=0;i<t;i++){var e=this.flipPageManager.array[i];if(e!=this.optionPage&&this.flipPageManager[e]&&!this.flipPageManager[e].fallback&&!this.flipPageManager[e].flipping&&(this.flipPageManager[e].AliceToRight||this.flipPageManager[e].AliceToLeft)){this.flipPageManager[e].AliceToRight=!1;this.flipPageManager[e].AliceToLeft=!1;this.flipPageManager[e].fallback=!0;var o=this.getRealToPoint(this.flipPageManager[e],this.flipPageManager[e].fromPoint,this.flipPageManager[e].startPoint);this.flipPageManager[e].toPoint=o.toPoint;this.flipPageManager[e].fromPoint=o.fromPoint;this.flipPageManager[e].coordinate=o.coordinate;0>this.flipPageManager.fallbackArray.indexOf(e)&&this.flipPageManager.fallbackArray.push(e);this.flipPageManager.pinDownCurlingArray.removeElement(e);this.flipPageManager.flipArray.removeElement(e)}}},getFromStartPointByCoordinate:function(t,i,e){if(t){var o={x:0,y:0},s={x:0,y:0};if(bookConfig.FlipDirection){var n=e.getPageWidthHeight().height;e=e.getPageWidthHeight().width}else n=e.getPageWidthHeight().width,e=e.getPageWidthHeight().height;var h=t.y>e/2?t.y-5:t.y+5;0>t.x&&(o={x:-n,y:h});0<t.x&&(o={x:n,y:h});i&&0<=i.indexOf("r")&&(o.x=n);i&&0<=i.indexOf("l")&&(o.x=-n);"tl"==i&&(o={x:-n,y:0});"bl"==i&&(o={x:-n,y:e});"tr"==i&&(o={x:n,y:0});"br"==i&&(o={x:n,y:e});s.x=o.x;s.y=o.y;return[o,s]}},getRealToPoint:function(t,i,e){if(bookConfig.FlipDirection){t.getPageWidthHeight();var o=t.getPageWidthHeight().width}else t.getPageWidthHeight(),o=t.getPageWidthHeight().height;if(0==i.y||i.y==o)return{fromPoint:i,toPoint:e,coordinate:t.coordinate};var s={},n={},h=t.coordinate;t.coordinate.y<=i.y?(s.y=o,s.x=i.x,n.y=o):(s.y=0,s.x=i.x,n.y=0);n.x=e.x;t=(h.y-i.y)/(h.x-i.x);h.x=[(t*t-1)*s.x+t*(-2*s.y+i.y+h.y)+(i.x+h.x)]/(t*t+1);h.y=s.y+t*(h.x-s.x);return{fromPoint:s,toPoint:n,coordinate:h}},realIndex:function(t){var i=BookInfo.getMinPageIndex(this.currentPageIndex);if(t&&!rightToLeft||!t&&rightToLeft)return[i+1,i+2];if(!t&&!rightToLeft||t&&rightToLeft)return[i,i-1]},getNextPage:function(){"right"==this.flipToDirection&&!rightToLeft||"left"==this.flipToDirection&&rightToLeft?previousPageFun():nextPageFun()},realBookPosition:function(){if(bookConfig.upsideOnMobile())var t=this.flipBook.offset().top,i=this.flipBook.offset().left;else t=this.flipBook.offset().left,i=this.flipBook.offset().top;return[t,i]},realPoint:function(t){if((t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t])&&!(3<=t.length)){var i=this.realBookPosition()[0],e=this.realBookPosition()[1],o=t[0].pageX,s=t[0].pageY;bookConfig.upsideOnMobile()&&(o=t[0].pageY,s=windowHeight-t[0].pageX);if(bookConfig.FlipDirection){var s=s-e-this.pageHeight,n=this.getCurrentPageWidthHeight(s),h=n.pageWidth,n=n.pageHeight,o=this.pageWidth-(o-i)-(this.pageWidth-h)/2;if(!t[1])return[{x:s,y:o}];var a=t[1].pageX;t=t[1].pageY;a=this.pageWidth-(a-i)-(this.pageWidth-h)/2;t=t-e-this.pageHeight;return[{x:s,y:o},{x:t,y:a}]}o=o-i-this.pageWidth;n=this.getCurrentPageWidthHeight(o);n=n.pageHeight;s=s-e-(this.pageHeight-n)/2;if(!t[1])return[{x:o,y:s}];a=t[1].pageX;t=t[1].pageY;a=a-i-this.pageWidth;t=t-e-(this.pageHeight-n)/2;return[{x:o,y:s},{x:a,y:t}]}},mouseWheelFlip:function(){var e;this.flipBook.bind(_event._mousewheel,function(t){var i;void 0!=e&&150>new Date-e?i=!1:(e=new Date,i=!0);if(!i)return!1;i=t.originalEvent;i=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));t=t.originalEvent?t.originalEvent:t;this.status_zoom&&(t={pointers:[{pageX:t.pageX,pageY:t.pageY},{pageX:t.pageX,pageY:t.pageY}]},0>i?this.controlBar&&this.controlBar.zoomDown(t):this.controlBar&&this.controlBar.zoomUp(t));!this.status_zoom&&bookConfig.mouseWheelFlip&&(0>i?nextPageFun():previousPageFun());stopEvent(t);return!1}.bind(this))}});var DoubleFlipBook=Class({newFlipPage:function(){return new DoubleFlipPage(this)},resetPages:function(t){isNaN(t)||0>=t||(t=this.getMinPageIndex(t),this.unWrapPageExcludeArray([t,t+1,t+2,t+3,t-1,t-2]),this.addPageArray([t,t+1,t+2,t+3,t-1,t-2]),this.currentPage=this.pageArray[t],this.currentPage2=this.pageArray[t+1],this.nextPage=this.pageArray[t+2],this.nextPage2=this.pageArray[t+3],this.previousPage=this.pageArray[t-1],this.previousPage2=this.pageArray[t-2],this.setPageCss(),this.loading())},setPageCss:function(){var t=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(t));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(t));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(t));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(t));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.setCSSByStyle(t));this.nextPage2&&(this.setZIndexByPageIndex(this.nextPage2),this.nextPage2.setCSSByStyle(t));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0),this.nextPage2&&this.nextPage2.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!0),this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1),this.nextPage2&&this.nextPage2.setLeftOrRight(!1))},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-left-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-right-side")):(this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-right-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-left-side"));return[this.pageArray[t],this.pageArray[i]]},getDownUpPage:function(t,i){this.addPageArray([t,i]);this.pageArray[t]&&this.pageArray[t].beginToFlip();this.pageArray[i]&&this.pageArray[i].beginToFlip();this.pageArray[t]&&(this.pageArray[t].page.setCSSByName("right-flip-side"),this.setZIndexByPageIndex(this.pageArray[t]));this.pageArray[i]&&(this.pageArray[i].page.setCSSByName("flip-side"),this.pageArray[i].page.side.addClass("boxShadow"),this.setZIndexByPageIndex(this.pageArray[i]));return[this.pageArray[t],this.pageArray[i]]},flipToMax:function(t,i,e,o){o=this.flipPageManager.initFlipPageByIndex(t,i,o);this.addPagesBeforeFlipToMax(i,e);this.pageArray[i+1]&&(this.pageArray[i+1].setLeftOrRight(rightToLeft),o.nextPage=this.pageArray[i+1]);this.setPagesStyleBeforeFlipToMax(i,e);this.deleteUnnecessaryPagesBeforeFlipToMax(t,i);return o},addPagesBeforeFlipToMax:function(t,i){this.addPageArray([t+1]);i&&this.supportSerialsFlip()&&this.addPageArray([t+2,t+3])},setPagesStyleBeforeFlipToMax:function(t,i){i&&this.supportSerialsFlip()&&(this.pageArray[t+1]&&this.setZIndexByPageIndex(this.pageArray[t+1],t),this.pageArray[t+2]&&(this.setZIndexByPageIndex(this.pageArray[t+2],t),this.pageArray[t+2].setLeftOrRight(rightToLeft)),this.pageArray[t+3]&&(this.setZIndexByPageIndex(this.pageArray[t+3],t),this.pageArray[t+3].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(t,i){for(var e=i+4;e<=originTotalPageCount;e++)this.pageArray[e]&&(this.pageArray[e].remove(),this.pageArray[e]=void 0);for(e=t+1;e<i;e++)this.pageArray[e]&&(this.pageArray[e].remove(),this.pageArray[e]=void 0)},afterFlipToMax:function(t,i){var e=this.getMinPageIndex(t);this.addPagesAfterFlipToMax(e);this.setPagesStyleAfterFlipToMax(e);this.deleteUnnecessaryPagesAfterFlipToMax(e)},addPagesAfterFlipToMax:function(t){this.flipping||this.addPageArray([t+3,t,t-1,t-2]);this.supportSerialsFlip()||this.addPageArray([t+2,t+3]);this.pageArray[t+1]&&this.fillContent(t+1);this.pageArray[t+2]&&this.fillContent(t+2);this.pageArray[t+3]&&this.fillContent(t+3)},setPagesStyleAfterFlipToMax:function(t){this.pageArray[t]&&(this.setZIndexByPageIndex(this.pageArray[t],t),this.pageArray[t].setLeftOrRight(!rightToLeft));this.pageArray[t-1]&&(this.setZIndexByPageIndex(this.pageArray[t-1],t),this.pageArray[t-1].setLeftOrRight(!rightToLeft));this.pageArray[t-2]&&(this.setZIndexByPageIndex(this.pageArray[t-2],t),this.pageArray[t-2].setLeftOrRight(!rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[t+1]&&this.setZIndexByPageIndex(this.pageArray[t+1]),this.pageArray[t+2]&&(this.setZIndexByPageIndex(this.pageArray[t+2]),this.pageArray[t+2].setLeftOrRight(rightToLeft)),this.pageArray[t+3]&&(this.setZIndexByPageIndex(this.pageArray[t+3]),this.pageArray[t+3].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(t){for(t-=3;0<=t;t--)this.pageArray[t]&&(this.pageArray[t].remove(),this.pageArray[t]=void 0)},flipToMin:function(t,i,e,o){o=this.flipPageManager.initFlipPageByIndex(t,i,o);this.addPagesBeforeFlipToMin(i,e);this.pageArray[i-1]&&(this.pageArray[i-1].setLeftOrRight(!rightToLeft),o.nextPage=this.pageArray[i-1]);this.setPagesStyleBeforeFlipToMin(i,e);this.deleteUnnecessaryPagesBeforeFlipToMin(t,i);return o},addPagesBeforeFlipToMin:function(t,i){this.addPageArray([t-1]);i&&this.supportSerialsFlip()&&this.addPageArray([t-2,t-3])},setPagesStyleBeforeFlipToMin:function(t,i){i&&this.supportSerialsFlip()&&(this.pageArray[t-1]&&this.setZIndexByPageIndex(this.pageArray[t-1],t),this.pageArray[t-2]&&(this.setZIndexByPageIndex(this.pageArray[t-2],t),this.pageArray[t-2].setLeftOrRight(!rightToLeft)),this.pageArray[t-3]&&(this.setZIndexByPageIndex(this.pageArray[t-3],t),this.pageArray[t-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMin:function(t,i){for(var e=i-4;0<=e;e--)this.pageArray[e]&&(this.pageArray[e].remove(),this.pageArray[e]=void 0);for(e=t-1;e>i;e--)this.pageArray[e]&&(this.pageArray[e].remove(),this.pageArray[e]=void 0)},afterFlipToMin:function(t,i){var e=this.getMaxPageIndex(t);this.addPagesAfterFlipToMin(e);this.setPagesStyleAfterFlipToMin(e);this.deleteUnnecessaryPagesAfterFlipToMin(e)},addPagesAfterFlipToMin:function(t){this.flipping||this.addPageArray([t-3,t,t+1,t+2]);this.supportSerialsFlip()||this.addPageArray([t-2,t-3]);this.pageArray[t-1]&&this.fillContent(t-1);this.pageArray[t-2]&&this.fillContent(t-2);this.pageArray[t-3]&&this.fillContent(t-3)},setPagesStyleAfterFlipToMin:function(t){this.pageArray[t]&&(this.setZIndexByPageIndex(this.pageArray[t],t),this.pageArray[t].setLeftOrRight(rightToLeft));this.pageArray[t+1]&&(this.setZIndexByPageIndex(this.pageArray[t+1],t),this.pageArray[t+1].setLeftOrRight(rightToLeft));this.pageArray[t+2]&&(this.setZIndexByPageIndex(this.pageArray[t+2],t),this.pageArray[t+2].setLeftOrRight(rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[t-1]&&this.setZIndexByPageIndex(this.pageArray[t-1]),this.pageArray[t-2]&&(this.setZIndexByPageIndex(this.pageArray[t-2]),this.pageArray[t-2].setLeftOrRight(!rightToLeft)),this.pageArray[t-3]&&(this.setZIndexByPageIndex(this.pageArray[t-3]),this.pageArray[t-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMin:function(t){for(t+=3;t<=originTotalPageCount;t++)this.pageArray[t]&&(this.pageArray[t].remove(),this.pageArray[t]=void 0)},getFlipTo:function(t){var i=this.getMinPageIndex(this.currentPageIndex);t=this.getMinPageIndex(t);var e=i+1,o="";t>e&&(o="max");t+1<i&&(o="min",t+=1);return{flipTo:o,minIndex:i,maxIndex:e,toIndex:t}},getCurrentPages:function(){return BookInfo.getPagesByIndex(this.currentPageIndex)},getPagesByIndex:function(t){return BookInfo.getPagesByIndex(t)},movetoCenter:function(t,i,e){if(!this.status_zoom&&bookConfig.retainBookCenter&&!(1<BookInfo.getPagesByIndex(t).length&&1<BookInfo.getPagesByIndex(i).length)){var o=this.pageWidth,s=-o/2,n=o/2,h=0,a=0;BookInfo.isLeftPage(t,!0)||1!=BookInfo.getPagesByIndex(t).length||(h=s);BookInfo.isLeftPage(t,!0)&&1==BookInfo.getPagesByIndex(t).length&&(h=n);BookInfo.isLeftPage(i,!0)||1!=BookInfo.getPagesByIndex(i).length||(a=s);BookInfo.isLeftPage(i,!0)&&1==BookInfo.getPagesByIndex(i).length&&(a=n);this.fromTrans=0>this.movedX*a&&this.toTrans!=a?this.movedX:h;this.toTrans=a;t=2*o;void 0==e&&(e=t);isNaN(e)||(this.movedLength=e,this.movedX=$.easing.easeInOutSine(null,e,this.fromTrans,this.toTrans-this.fromTrans,t),e={tran:{x:parseInt(this.movedX),y:0}},this.setCSS(e))}},edgeX:function(){this.MiddleX=0},getFromStartPointByIndex:function(t,i){var e=this.getMinPageIndex(this.currentPageIndex),o=e+1;if(t!=o&&t!=e){var s={x:0,y:0},n={x:0,y:0},h=i.getPageWidthHeight().width,a=i.getPageWidthHeight().height,r=!1;if(t>o&&!rightToLeft||t<e&&rightToLeft)s={x:h,y:a},n.x=s.x-2,n.y=s.y-2,r=!0;if(t<e&&!rightToLeft||t>o&&rightToLeft)s={x:-h,y:a},n.x=s.x+2,n.y=s.y-2,r=!1;if(!this.flipping||!r||"right"!=this.flipToDirection)if(!this.flipping||r||"left"!=this.flipToDirection)return this.flipToDirection=r?"left":"right",[s,n]}},afterZoomIn:function(t){if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion&&(t=BookInfo.getCurrentPages(),void 0!=t&&null!=t))for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].zoomInSideImage()}}else if(isPhone()||isPad()||this.showPages(),t&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;t=this.flipBook.offset().left;var i=this.flipBook.offset().top,o=i-this.flipBook.parameters.top,e=this.flipBook.parameters.scale,o={tran:{x:parseInt(t-this.flipBook.parameters.left),y:parseInt(o)},scale:1,origin:{x:0,y:0}};1!=e&&this.resizeBook(Math.round(this.width*e/2),Math.round(this.height*e));this.status_zoom||(e=0,1==this.currentPageIndex&&bookConfig.retainBookCenter&&!bookConfig.isTheBookOpen&&(e=rightToLeft?this.width/4:-this.width/4),this.currentPageIndex==totalPageCount&&bookConfig.retainBookCenter&&(e=rightToLeft?-this.width/4:this.width/4),o.tran={x:parseInt(e),y:0},o.left=t-e,o.top=i-0);this.setCSS(o);this.flipBook.parameters.tran=o.tran;this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;this.bookMap&&this.bookMap.refreshArea();isPhone()||isPad()||this.switchLargeImage()}},setZIndexByPageIndex:function(t,i){if(t){var e=i?i:this.currentPageIndex,e=this.getMinPageIndex(e);t==this.pageArray[e+1]?t.setZIndex(2):t==this.pageArray[e+2]?t.setZIndex(1):t==this.pageArray[e+3]?t.setZIndex(0):t==this.pageArray[e]?t.setZIndex(2):t==this.pageArray[e-1]?t.setZIndex(1):t==this.pageArray[e-2]&&t.setZIndex(0)}},getFitWH:function(){this.getSpace(!1);var t=this.getSpace(!0),i=windowWidth-t.left-t.right,t=windowHeight-t.top-t.bottom,e=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,o=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(i,t,2*e,o)},getSpace:function(t){var i=bookConfig.leftMargin+toolBar.getLeftWidth(),e=bookConfig.rightMargin+toolBar.getRightWidth(),o=bookConfig.topMargin+toolBar.getTopHeight(),s=bookConfig.bottomMargin+toolBar.getBottomHeight();t&&(i+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),e+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),o+=bookConfig.hardCoverBorderWidth,s+=bookConfig.hardCoverBorderWidth);return{left:i,right:e,top:o,bottom:s}},getMinPageIndex:function(t){return t=bookConfig.isTheBookOpen?2*Math.ceil(t/2)-1:2*Math.floor(t/2)},getMaxPageIndex:function(t){return t=bookConfig.isTheBookOpen?2*Math.ceil(t/2):2*Math.floor(t/2)+1}}).extend(FlipBook),DoubleCalendar=Class({bookType:BookType.normal_book,doublePage:!0,create:function(t){this._super(t);this.resetZoomArea()},initBook:function(){this._super();this.showPage=this.flipBook},newFlipPage:function(){return new DoubleCalendarPage(this)},newPage:function(t){return new NormalPage(t,"page",!1,this.bookType,this.onBookPageLoaded.bind(this))},setPageCss:function(){var t=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(t));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(t));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(t));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(t));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.setCSSByStyle(t));this.nextPage2&&(this.setZIndexByPageIndex(this.nextPage2),this.nextPage2.setCSSByStyle(t));rightToLeft?(this.currentPage&&this.currentPage.setUpOrDown(!1),this.previousPage&&this.previousPage.setUpOrDown(!1),this.previousPage2&&this.previousPage2.setUpOrDown(!1),this.currentPage2&&this.currentPage2.setUpOrDown(!0),this.nextPage&&this.nextPage.setUpOrDown(!0),this.nextPage2&&this.nextPage2.setUpOrDown(!0)):(this.currentPage&&this.currentPage.setUpOrDown(!0),this.previousPage&&this.previousPage.setUpOrDown(!0),this.previousPage2&&this.previousPage2.setUpOrDown(!0),this.currentPage2&&this.currentPage2.setUpOrDown(!1),this.nextPage&&this.nextPage.setUpOrDown(!1),this.nextPage2&&this.nextPage2.setUpOrDown(!1))},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-up-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-down-side")):(this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-down-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-up-side"));return[this.pageArray[t],this.pageArray[i]]},flipToMax:function(t,i,e,o){o=this.flipPageManager.initFlipPageByIndex(t,i,o);this.addPagesBeforeFlipToMax(i,e);this.pageArray[i+1]&&(this.pageArray[i+1].setUpOrDown(rightToLeft),o.nextPage=this.pageArray[i+1]);this.setPagesStyleBeforeFlipToMax(i,e);this.deleteUnnecessaryPagesBeforeFlipToMax(t,i);return o},setPagesStyleBeforeFlipToMax:function(t,i){i&&this.supportSerialsFlip()&&(this.pageArray[t+1]&&this.setZIndexByPageIndex(this.pageArray[t+1],t),this.pageArray[t+2]&&(this.setZIndexByPageIndex(this.pageArray[t+2],t),this.pageArray[t+2].setUpOrDown(rightToLeft)),this.pageArray[t+3]&&(this.setZIndexByPageIndex(this.pageArray[t+3],t),this.pageArray[t+3].setUpOrDown(rightToLeft)))},setPagesStyleAfterFlipToMax:function(t){this.pageArray[t]&&(this.setZIndexByPageIndex(this.pageArray[t],t),this.pageArray[t].setUpOrDown(!rightToLeft));this.pageArray[t-1]&&(this.setZIndexByPageIndex(this.pageArray[t-1],t),this.pageArray[t-1].setUpOrDown(!rightToLeft));this.pageArray[t-2]&&(this.setZIndexByPageIndex(this.pageArray[t-2],t),this.pageArray[t-2].setUpOrDown(!rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[t+1]&&this.setZIndexByPageIndex(this.pageArray[t+1]),this.pageArray[t+2]&&(this.setZIndexByPageIndex(this.pageArray[t+2]),this.pageArray[t+2].setUpOrDown(rightToLeft)),this.pageArray[t+3]&&(this.setZIndexByPageIndex(this.pageArray[t+3]),this.pageArray[t+3].setUpOrDown(rightToLeft)))},flipToMin:function(t,i,e,o){o=this.flipPageManager.initFlipPageByIndex(t,i,o);this.addPagesBeforeFlipToMin(i,e);this.pageArray[i-1]&&(this.pageArray[i-1].setUpOrDown(!rightToLeft),o.nextPage=this.pageArray[i-1]);this.setPagesStyleBeforeFlipToMin(i,e);this.deleteUnnecessaryPagesBeforeFlipToMin(t,i);return o},setPagesStyleBeforeFlipToMin:function(t,i){i&&this.supportSerialsFlip()&&(this.pageArray[t-1]&&this.setZIndexByPageIndex(this.pageArray[t-1],t),this.pageArray[t-2]&&(this.setZIndexByPageIndex(this.pageArray[t-2],t),this.pageArray[t-2].setUpOrDown(!rightToLeft)),this.pageArray[t-3]&&(this.setZIndexByPageIndex(this.pageArray[t-3],t),this.pageArray[t-3].setUpOrDown(!rightToLeft)))},setPagesStyleAfterFlipToMin:function(t){this.pageArray[t]&&(this.setZIndexByPageIndex(this.pageArray[t],t),this.pageArray[t].setUpOrDown(rightToLeft));this.pageArray[t+1]&&(this.setZIndexByPageIndex(this.pageArray[t+1],t),this.pageArray[t+1].setUpOrDown(rightToLeft));this.pageArray[t+2]&&(this.setZIndexByPageIndex(this.pageArray[t+2],t),this.pageArray[t+2].setUpOrDown(rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[t-1]&&this.setZIndexByPageIndex(this.pageArray[t-1]),this.pageArray[t-2]&&(this.setZIndexByPageIndex(this.pageArray[t-2]),this.pageArray[t-2].setUpOrDown(!rightToLeft)),this.pageArray[t-3]&&(this.setZIndexByPageIndex(this.pageArray[t-3]),this.pageArray[t-3].setUpOrDown(!rightToLeft)))},movetoCenter:function(t,i,e){if(!this.status_zoom&&bookConfig.retainBookCenter&&!(1<BookInfo.getPagesByIndex(t).length&&1<BookInfo.getPagesByIndex(i).length)){var o=this.pageHeight,s=-o/2,o=o/2,n=0,h=0;BookInfo.isLeftPage(t,!0)||1!=BookInfo.getPagesByIndex(t).length||(n=s);BookInfo.isLeftPage(t,!0)&&1==BookInfo.getPagesByIndex(t).length&&(n=o);BookInfo.isLeftPage(i,!0)||1!=BookInfo.getPagesByIndex(i).length||(h=s);BookInfo.isLeftPage(i,!0)&&1==BookInfo.getPagesByIndex(i).length&&(h=o);this.fromTrans=0>this.movedY*h&&this.toTrans!=h?this.movedY:n;this.toTrans=h;t=2*this.pageHeight;void 0==e&&(e=t);isNaN(e)||(this.movedLength=e,this.movedY=$.easing.easeInOutSine(null,e,this.fromTrans,this.toTrans-this.fromTrans,t),this.setCSS({tran:{x:0,y:this.movedY}}))}},edgeX:function(){this.MiddleX=0},getFromStartPointByIndex:function(t,i){var e=this.getMinPageIndex(this.currentPageIndex),o=e+1;if(t!=o&&t!=e){var s={x:0,y:0},n={x:0,y:0},h=i.getPageWidthHeight().height;i.getPageWidthHeight();var a=!1;if(t>o&&!rightToLeft||t<e&&rightToLeft)s={x:h,y:0},n.x=s.x-2,n.y=s.y+2,a=!0;if(t<e&&!rightToLeft||t>o&&rightToLeft)s={x:-h,y:0},n.x=s.x+2,n.y=s.y+2,a=!1;if(!this.flipping||!a||"right"!=this.flipToDirection)if(!this.flipping||a||"left"!=this.flipToDirection)return this.flipToDirection=a?"left":"right",[s,n]}},afterZoomIn:function(t){if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion&&(t=BookInfo.getCurrentPages(),void 0!=t&&null!=t))for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].zoomInSideImage()}}else if(isPhone()||isPad()||this.showPages(),t&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;t=this.flipBook.offset().left;var i=this.flipBook.offset().top,o=this.flipBook.parameters.scale,e={tran:{x:t-this.flipBook.parameters.left,y:i-this.flipBook.parameters.top},scale:1,origin:{x:0,y:0}};1!=o&&this.resizeBook(Math.round(this.width*o),Math.round(this.height*o/2));this.status_zoom||(o=0,1==this.currentPageIndex&&bookConfig.retainBookCenter&&!bookConfig.isTheBookOpen&&(o=rightToLeft?this.height/4:-this.height/4),this.currentPageIndex==totalPageCount&&bookConfig.retainBookCenter&&(o=rightToLeft?-this.height/4:this.height/4),e.tran={x:0,y:o},e.left=t-0,e.top=i-o);this.setCSS(e);this.flipBook.parameters.tran=e.tran;this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;this.bookMap&&this.bookMap.refreshArea();isPhone()||isPad()||this.switchLargeImage()}},getFitWH:function(){this.getSpace(!1);var t=this.getSpace(!0),i=windowWidth-t.left-t.right,t=windowHeight-t.top-t.bottom,e=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,o=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(i,t,e,2*o)},getSpace:function(t){var i=bookConfig.leftMargin+toolBar.getLeftWidth(),e=bookConfig.rightMargin+toolBar.getRightWidth(),o=bookConfig.topMargin+toolBar.getTopHeight(),s=bookConfig.bottomMargin+toolBar.getBottomHeight();t&&(i+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),e+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),o+=bookConfig.hardCoverBorderWidth,s+=bookConfig.hardCoverBorderWidth);return{left:i,right:e,top:o,bottom:s}},resizeBook:function(t,i){this.endFlip();this.width=t;this.height=2*i;this.pageWidth=t;this.pageHeight=i;this.maskWidth=parseInt(Math.sqrt(t*t+i*i));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.setCSS({width:this.width,height:this.height});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow(this.currentPageIndex)},resetBookShadow:function(){},setAttachmentBeforeFlipTo:function(){},setAttachmentAfterFlipTo:function(){},flippingTo:function(t){this.currentPageIndex=t;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);setLocationHash(this.currentPageIndex);this.resetZoomArea()},resetZoomArea:function(){this.flipBook&&this.flipBook.parameters&&this.flipBook.parameters.zoomArea&&(1!=this.getCurrentPages().length||BookInfo.isLeftPage(this.currentPageIndex,!0)?1==this.getCurrentPages().length&&BookInfo.isLeftPage(this.currentPageIndex,!0)?this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:50}:this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:0}:this.flipBook.parameters.zoomArea={left:0,top:50,right:0,bottom:0})},getDownUpPage:function(t,i){this.addPageArray([t,i]);this.pageArray[t]&&this.pageArray[t].beginToFlip();this.pageArray[i]&&this.pageArray[i].beginToFlip();this.pageArray[t]&&(this.pageArray[t].page.setCSSByName("down-flip-side"),this.setZIndexByPageIndex(this.pageArray[t]));this.pageArray[i]&&(this.pageArray[i].page.setCSSByName("flip-vertical-side"),this.pageArray[i].page.side.addClass("boxShadow"),this.setZIndexByPageIndex(this.pageArray[i]));return[this.pageArray[t],this.pageArray[i]]}}).extend(DoubleFlipBook),SingleFlipBook=Class({pageBackArray:null,create:function(t){this.pageBackArray=[];this._super(t)},newFlipPage:function(){return new SingleFlipPage(this)},resetPages:function(t){isNaN(t)||0>=t||(this.unWrapPageBackExcludeArray([t,t+1]),this.unWrapPageExcludeArray([t,t+1]),this.addPageArray([t,t+1]),this.addPageBackArray([t]),this.currentPage=this.pageArray[t],this.currentPage2=this.pageBackArray[t],this.nextPage=this.pageArray[t+1],this.previousPage=this.pageArray[t-1],this.previousPage2=this.pageBackArray[t-1],this.setPageCss(),this.loading())},setPageCss:function(){var t=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(t));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(t));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(t));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(t));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.setCSSByStyle(t));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!0),this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1))},addPageBackArray:function(t){if(t&&this.pageBackArray)for(var i=0;i<t.length;i++)if(!(0>=t[i]||t[i]>originTotalPageCount||(!this.pageBackArray[t[i]]||this.flipping&&!imageLoaded[t[i]]||this.fillContent(t[i]),this.pageBackArray[t[i]]))){var e=new this.newPageBack(t[i]),o=this.pageInfoArray[t[i]];e.mirrorSide();e.onResize(this.pageWidth*o.pageWidth,this.pageHeight*o.pageHeight,o.opacity);this.pageBackArray[t[i]]=e;this.flipping&&!imageLoaded[t[i]]||this.fillContent(t[i]);this.flipBook.append(e.container)}},getDownUpPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);this.pageArray[e]&&this.pageArray[e].beginToFlip();this.pageBackArray[e]&&this.pageBackArray[e].beginToFlip();this.pageArray[e]&&this.pageArray[e].page.setCSSByName("right-flip-side");this.pageBackArray[e]&&(this.pageBackArray[e].page.setCSSByName("flip-side"),this.pageBackArray[e].page.side.addClass("boxShadow"));return[this.pageArray[e],this.pageBackArray[e]]},getDownUpHardPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);rightToLeft?(this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-left-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-right-side")):(this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-right-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-left-side"));return[this.pageArray[e],this.pageBackArray[e]]},flipToMax:function(t,i,e){var o=this.flipPageManager.initFlipPageByIndex(t,i);this.addPagesBeforeFlipToMax(i,e);this.pageArray[i]&&(this.pageArray[i].setLeftOrRight(rightToLeft),o.nextPage=this.pageArray[i]);this.setPagesStyleBeforeFlipToMax(i,e);this.deleteUnnecessaryPagesBeforeFlipToMax(t,i);return o},addPagesBeforeFlipToMax:function(t,i){this.addPageArray([t]);i&&this.supportSerialsFlip()&&(this.addPageBackArray([t]),this.addPageArray([t+1]))},setPagesStyleBeforeFlipToMax:function(t,i){i&&(this.pageArray[t]&&(this.setZIndexByPageIndex(this.pageArray[t],t),this.pageArray[t].setLeftOrRight(rightToLeft)),this.pageBackArray[t]&&(this.setZIndexByPageIndex(this.pageBackArray[t],t),this.pageBackArray[t].setLeftOrRight(rightToLeft)),this.pageArray[t+1]&&(this.setZIndexByPageIndex(this.pageArray[t+1],t),this.pageArray[t+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(t,i){for(var e=i+1;e<=originTotalPageCount;e++)this.pageBackArray[e]&&(this.pageBackArray[e]&&this.pageBackArray[e].remove(),this.pageBackArray[e]=void 0);for(e=i+2;e<=originTotalPageCount;e++)this.pageArray[e]&&(this.pageArray[e]&&this.pageArray[e].remove(),this.pageArray[e]=void 0);for(e=t+1;e<i;e++)if(this.pageArray[e]||this.pageBackArray[e])this.pageArray[e]&&this.pageArray[e].remove(),this.pageBackArray[e]&&this.pageBackArray[e].remove(),this.pageArray[e]=void 0,this.pageBackArray[e]=void 0},afterFlipToMax:function(t){this.addPagesAfterFlipToMax(t);this.setPagesStyleAfterFlipToMax(t);this.deleteUnnecessaryPagesAfterFlipToMax(t)},addPagesAfterFlipToMax:function(t){this.supportSerialsFlip()||(this.addPageArray([t]),this.addPageBackArray([t]),this.addPageArray([t+1]));this.pageArray[t]&&this.fillContent(t);this.pageArray[t+1]&&this.fillContent(t+1)},setPagesStyleAfterFlipToMax:function(t){this.pageArray[t-1]&&this.setZIndexByPageIndex(this.pageArray[t-1],t);this.pageBackArray[t-1]&&this.setZIndexByPageIndex(this.pageBackArray[t-1],t);this.supportSerialsFlip()||(this.pageArray[t]&&(this.setZIndexByPageIndex(this.pageArray[t]),this.pageArray[t].setLeftOrRight(rightToLeft)),this.pageBackArray[t]&&(this.setZIndexByPageIndex(this.pageBackArray[t]),this.pageBackArray[t].setLeftOrRight(rightToLeft)),this.pageArray[t+1]&&(this.setZIndexByPageIndex(this.pageArray[t+1]),this.pageArray[t+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(t){for(t-=2;0<=t;t--)if(this.pageArray[t]||this.pageBackArray[t])this.pageArray[t]&&this.pageArray[t].remove(),this.pageBackArray[t]&&this.pageBackArray[t].remove(),this.pageArray[t]=void 0,this.pageBackArray[t]=void 0},flipToMin:function(t,i,e){var o=this.flipPageManager.initFlipPageByIndex(t,i);this.addPagesBeforeFlipToMin(i,e);this.pageArray[t]&&(o.nextPage=this.pageArray[t]);this.setPagesStyleBeforeFlipToMin(i);this.deleteUnnecessaryPagesBeforeFlipToMin(t,i);return o},addPagesBeforeFlipToMin:function(t,i){},setPagesStyleBeforeFlipToMin:function(t){},deleteUnnecessaryPagesBeforeFlipToMin:function(t,i){for(var e=t-1;e>i;e--)if(this.pageArray[e]||this.pageBackArray[e])this.pageArray[e]&&this.pageArray[e].remove(),this.pageBackArray[e]&&this.pageBackArray[e].remove(),this.pageArray[e]=void 0,this.pageBackArray[e]=void 0},afterFlipToMin:function(t){this.addPagesAfterFlipToMin(t);this.setPagesStyleAfterFlipToMin(t);this.deleteUnnecessaryPagesAfterFlipToMin(t)},addPagesAfterFlipToMin:function(t){this.addPageArray([t+1]);this.pageArray[t]&&this.fillContent(t)},setPagesStyleAfterFlipToMin:function(t){this.pageArray[t+1]&&(this.setZIndexByPageIndex(this.pageArray[t+1]),this.pageArray[t+1].setLeftOrRight(rightToLeft))},deleteUnnecessaryPagesAfterFlipToMin:function(t){for(var i=t+2;i<=originTotalPageCount;i++)if(this.pageArray[i]||this.pageBackArray[i])this.pageArray[i]&&this.pageArray[i].remove(),this.pageBackArray[i]&&this.pageBackArray[i].remove(),this.pageArray[i]=void 0,this.pageBackArray[i]=void 0;this.pageBackArray[t+1]&&(this.pageBackArray[t+1]&&this.pageBackArray[t+1].remove(),this.pageBackArray[t+1]=void 0)},getCurrentPages:function(){return[this.currentPageIndex]},getPagesByIndex:function(t){return[t]},movetoCenter:function(){},getFromStartPointByIndex:function(t,i){var e=this.currentPageIndex;if(t!=e&&t!=e){var o={x:0,y:0},s={x:0,y:0},n=i.getPageWidthHeight().width,h=i.getPageWidthHeight().height,a=!1,o={x:n,y:h};rightToLeft&&(o={x:-n,y:h});if(t>e&&!rightToLeft||t<e&&rightToLeft)a=!0;if(t<e&&!rightToLeft||t>e&&rightToLeft)a=!1;t>e&&(s={x:o.x*(n-2)/n,y:h-2});t<e&&(s={x:-o.x*(n-2)/n,y:h-2});if(!this.flipping||!a||"right"!=this.flipToDirection)if(!this.flipping||a||"left"!=this.flipToDirection)return this.flipToDirection=a?"left":"right",[o,s]}},realBookPosition:function(){var t=this.flipBook.offset().left-(rightToLeft?0:this.pageWidth),i=this.flipBook.offset().top;return[t,i]},edgeX:function(){this.MiddleX=this.pageWidth/2;rightToLeft&&(this.MiddleX=-this.pageWidth/2)},realIndex:function(t){var i=this.currentPageIndex;if(t&&!rightToLeft||!t&&rightToLeft)return[i,i+1];if(!t&&!rightToLeft||t&&rightToLeft)return[i,i-1]},getFromStartPointByCoordinate:function(t,i,e){if(t){var o={x:0,y:0},s={x:0,y:0},n=e.getPageWidthHeight().width;e=e.getPageWidthHeight().height;var h=t.y>e/2?t.y-5:t.y+5;t.x<this.MiddleX&&(o.y=h,s.x=-n);t.x>this.MiddleX&&(o.y=h,s.x=n);i&&0<=i.indexOf("r")&&(s.x=n);i&&0<=i.indexOf("l")&&(s.x=-n);"tl"==i&&(o.y=0);"bl"==i&&(o.y=e);"tr"==i&&(o.y=0);"br"==i&&(o.y=e);o.x=rightToLeft?-n:n;s.y=o.y;return[o,s]}},getFlipTo:function(t){var i=this.currentPageIndex,e="";t>i&&(e="max");t<i&&(e="min");return{flipTo:e,minIndex:i,maxIndex:i,toIndex:t}},afterZoomIn:function(t){if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion&&(t=BookInfo.getCurrentPages(),void 0!=t&&null!=t))for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].zoomInSideImage()}}else isPhone()||isPad()||this.showPages(),t&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this.flipBook.parameters.resize=!0,t=this.flipBook.offset().left,i=this.flipBook.offset().top,t-=this.flipBook.parameters.left,i-=this.flipBook.parameters.top,e=this.flipBook.parameters.scale,1!=e&&this.resizeBook(Math.round(this.width*e),Math.round(this.height*e)),transformCSS({tran:{x:t,y:i},scale:1,origin:{x:0,y:0},obj:this.flipBook}),this.flipBook.parameters.tran={x:t,y:i},this.flipBook.parameters.scale=1,this.flipBook.parameters.toScale=1,this.flipBook.parameters.width=$(this.flipBook).width(),this.flipBook.parameters.height=$(this.flipBook).height(),this.flipBook.parameters.origin={x:0,y:0},this.flipBook.parameters.resize=!1,this.bookMap&&this.bookMap.refreshArea(),isPhone()||isPad()||this.switchLargeImage())},setZIndexByPageIndex:function(t,i){if(t){var e=i?i:this.currentPageIndex;t==this.pageArray[e]?t.setZIndex(2):t==this.pageBackArray[e]?t.setZIndex(1):t==this.pageArray[e+1]?t.setZIndex(0):t.setZIndex(-1)}},getFitWH:function(){this.getSpace(!1);var t=this.getSpace(!0),i=windowWidth-t.left-t.right,t=windowHeight-t.top-t.bottom,e=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,o=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(i,t,e,o)},getSpace:function(t){var i=bookConfig.leftMargin+toolBar.getLeftWidth(),e=bookConfig.rightMargin+toolBar.getRightWidth(),o=bookConfig.topMargin+toolBar.getTopHeight(),s=bookConfig.bottomMargin+toolBar.getBottomHeight();t&&(i+=rightToLeft?bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1):0,e+=rightToLeft?0:bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1),o+=bookConfig.hardCoverBorderWidth,s+=bookConfig.hardCoverBorderWidth);return{left:i,right:e,top:o,bottom:s}},getTranX:function(t){if(!bookConfig.retainBookCenter)return 0;t=this.getCssLeft();var i=this.getSpace(!0);return i.left+(windowWidth-i.left-i.right-this.width)/2-t},getTranY:function(){var t=this.getCssTop(),i=this.getSpace(!0);return i.top+(windowHeight-i.top-i.bottom-this.pageWidthHeight.y)/2-t}}).extend(FlipBook),SingleFlipCalendar=Class({bookType:BookType.single_book,doublePage:!1,pageBackArray:null,create:function(t){this.pageBackArray=[];this._super(t)},newPage:function(t){return new NormalPage(t,"page",!0,this.bookType,this.onBookPageLoaded.bind(this))},newPageBack:function(t){return new NormalPage(t,"pageBack",!0,BookType.single_book)},newFlipPage:function(){return new SingleCalendarPage(this)},resetPages:function(t){isNaN(t)||0>=t||(this.unWrapPageBackExcludeArray([t,t+1]),this.unWrapPageExcludeArray([t,t+1]),this.addPageArray([t,t+1]),this.addPageBackArray([t]),this.currentPage=this.pageArray[t],this.currentPage2=this.pageBackArray[t],this.nextPage=this.pageArray[t+1],this.previousPage=this.pageArray[t-1],this.previousPage2=this.pageBackArray[t-1],this.setPageCss(),this.loading())},setPageCss:function(){var t=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(t));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(t));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(t));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(t));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.setCSSByStyle(t));rightToLeft?(this.currentPage&&this.currentPage.setUpOrDown(!0),this.previousPage&&this.previousPage.setUpOrDown(!0),this.previousPage2&&this.previousPage2.setUpOrDown(!0),this.currentPage2&&this.currentPage2.setUpOrDown(!0),this.nextPage&&this.nextPage.setUpOrDown(!0)):(this.currentPage&&this.currentPage.setUpOrDown(!1),this.previousPage&&this.previousPage.setUpOrDown(!1),this.previousPage2&&this.previousPage2.setUpOrDown(!1),this.currentPage2&&this.currentPage2.setUpOrDown(!1),this.nextPage&&this.nextPage.setUpOrDown(!1))},addPageBackArray:function(t){if(t&&this.pageBackArray)for(var i=0;i<t.length;i++)if(!(0>=t[i]||t[i]>originTotalPageCount||(!this.pageBackArray[t[i]]||this.flipping&&!imageLoaded[t[i]]||this.fillContent(t[i]),this.pageBackArray[t[i]]))){var e=new this.newPageBack(t[i]),o=this.pageInfoArray[t[i]];e.onResize(this.pageWidth*o.pageWidth,this.pageHeight*o.pageHeight,o.opacity);e.mirrorSide();this.pageBackArray[t[i]]=e;this.flipping&&!imageLoaded[t[i]]||this.fillContent(t[i]);this.flipBook.append(e.container)}},getDownUpPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);this.pageArray[e]&&this.pageArray[e].beginToFlip();this.pageBackArray[e]&&this.pageBackArray[e].beginToFlip();this.pageArray[e]&&this.pageArray[e].page.setCSSByName("down-flip-side");this.pageBackArray[e]&&(this.pageBackArray[e].page.setCSSByName("flip-vertical-side"),this.pageBackArray[e].page.side.addClass("boxShadow"));return[this.pageArray[e],this.pageBackArray[e]]},getDownUpHardPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);rightToLeft?(this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-up-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-down-side")):(this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-down-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-up-side"));return[this.pageArray[e],this.pageBackArray[e]]},flipToMax:function(t,i,e){var o=this.flipPageManager.initFlipPageByIndex(t,i);this.addPagesBeforeFlipToMax(i,e);this.pageArray[i]&&(this.pageArray[i].setUpOrDown(rightToLeft),o.nextPage=this.pageArray[i]);this.setPagesStyleBeforeFlipToMax(i,e);this.deleteUnnecessaryPagesBeforeFlipToMax(t,i);return o},addPagesBeforeFlipToMax:function(t,i){this.addPageArray([t]);i&&this.supportSerialsFlip()&&(this.addPageBackArray([t]),this.addPageArray([t+1]))},setPagesStyleBeforeFlipToMax:function(t,i){i&&(this.pageArray[t]&&(this.setZIndexByPageIndex(this.pageArray[t],t),this.pageArray[t].setUpOrDown(rightToLeft)),this.pageBackArray[t]&&(this.setZIndexByPageIndex(this.pageBackArray[t],t),this.pageBackArray[t].setUpOrDown(rightToLeft)),this.pageArray[t+1]&&(this.setZIndexByPageIndex(this.pageArray[t+1],t),this.pageArray[t+1].setUpOrDown(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(t,i){for(var e=i+1;e<=originTotalPageCount;e++)this.pageBackArray[e]&&(this.pageBackArray[e]&&this.pageBackArray[e].remove(),this.pageBackArray[e]=void 0);for(e=i+2;e<=originTotalPageCount;e++)this.pageArray[e]&&(this.pageArray[e]&&this.pageArray[e].remove(),this.pageArray[e]=void 0);for(e=t+1;e<i;e++)if(this.pageArray[e]||this.pageBackArray[e])this.pageArray[e]&&this.pageArray[e].remove(),this.pageBackArray[e]&&this.pageBackArray[e].remove(),this.pageArray[e]=void 0,this.pageBackArray[e]=void 0},afterFlipToMax:function(t){this.addPagesAfterFlipToMax(t);this.setPagesStyleAfterFlipToMax(t);this.deleteUnnecessaryPagesAfterFlipToMax(t)},addPagesAfterFlipToMax:function(t){this.supportSerialsFlip()||(this.addPageArray([t]),this.addPageBackArray([t]),this.addPageArray([t+1]));this.pageArray[t]&&this.fillContent(t);this.pageArray[t+1]&&this.fillContent(t+1)},setPagesStyleAfterFlipToMax:function(t){this.pageArray[t-1]&&this.setZIndexByPageIndex(this.pageArray[t-1],t);this.pageBackArray[t-1]&&this.setZIndexByPageIndex(this.pageBackArray[t-1],t);this.supportSerialsFlip()||(this.pageArray[t]&&(this.setZIndexByPageIndex(this.pageArray[t]),this.pageArray[t].setUpOrDown(rightToLeft)),this.pageBackArray[t]&&(this.setZIndexByPageIndex(this.pageBackArray[t]),this.pageBackArray[t].setUpOrDown(rightToLeft)),this.pageArray[t+1]&&(this.setZIndexByPageIndex(this.pageArray[t+1]),this.pageArray[t+1].setUpOrDown(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(t){for(t-=2;0<=t;t--)if(this.pageArray[t]||this.pageBackArray[t])this.pageArray[t]&&this.pageArray[t].remove(),this.pageBackArray[t]&&this.pageBackArray[t].remove(),this.pageArray[t]=void 0,this.pageBackArray[t]=void 0},flipToMin:function(t,i,e){var o=this.flipPageManager.initFlipPageByIndex(t,i);this.addPagesBeforeFlipToMin(i,e);this.pageArray[t]&&(o.nextPage=this.pageArray[t]);this.setPagesStyleBeforeFlipToMin(i);this.deleteUnnecessaryPagesBeforeFlipToMin(t,i);return o},addPagesBeforeFlipToMin:function(t,i){},setPagesStyleBeforeFlipToMin:function(t){},deleteUnnecessaryPagesBeforeFlipToMin:function(t,i){for(var e=t-1;e>i;e--)if(this.pageArray[e]||this.pageBackArray[e])this.pageArray[e]&&this.pageArray[e].remove(),this.pageBackArray[e]&&this.pageBackArray[e].remove(),this.pageArray[e]=void 0,this.pageBackArray[e]=void 0},afterFlipToMin:function(t){this.addPagesAfterFlipToMin(t);this.setPagesStyleAfterFlipToMin(t);this.deleteUnnecessaryPagesAfterFlipToMin(t)},addPagesAfterFlipToMin:function(t){this.addPageArray([t+1]);this.pageArray[t]&&this.fillContent(t)},setPagesStyleAfterFlipToMin:function(t){this.pageArray[t+1]&&(this.setZIndexByPageIndex(this.pageArray[t+1]),this.pageArray[t+1].setUpOrDown(rightToLeft))},deleteUnnecessaryPagesAfterFlipToMin:function(t){for(var i=t+2;i<=originTotalPageCount;i++)if(this.pageArray[i]||this.pageBackArray[i])this.pageArray[i]&&this.pageArray[i].remove(),this.pageBackArray[i]&&this.pageBackArray[i].remove(),this.pageArray[i]=void 0,this.pageBackArray[i]=void 0;this.pageBackArray[t+1]&&(this.pageBackArray[t+1]&&this.pageBackArray[t+1].remove(),this.pageBackArray[t+1]=void 0)},getCurrentPages:function(){return[this.currentPageIndex]},getPagesByIndex:function(t){return[t]},movetoCenter:function(){},getFromStartPointByIndex:function(t,i){var e=this.currentPageIndex;if(t!=e&&t!=e){var o={x:0,y:0},s={x:0,y:0},n=i.getPageWidthHeight().height;i.getPageWidthHeight();var h=!1,o={x:n,y:0};rightToLeft&&(o={x:-n,y:0});if(t>e&&!rightToLeft||t<e&&rightToLeft)h=!0;if(t<e&&!rightToLeft||t>e&&rightToLeft)h=!1;t>e&&(s={x:o.x*(n-2)/n,y:2});t<e&&(s={x:-o.x*(n-2)/n,y:2});if(!this.flipping||!h||"right"!=this.flipToDirection)if(!this.flipping||h||"left"!=this.flipToDirection)return this.flipToDirection=h?"left":"right",[o,s]}},realBookPosition:function(){var t=this.flipBook.offset().left,i=this.flipBook.offset().top-(rightToLeft?0:this.pageHeight);return[t,i]},edgeX:function(){this.MiddleX=this.pageHeight/2;rightToLeft&&(this.MiddleX=-this.pageHeight/2)},realIndex:function(t){var i=this.currentPageIndex;if(t&&!rightToLeft||!t&&rightToLeft)return[i,i+1];if(!t&&!rightToLeft||t&&rightToLeft)return[i,i-1]},getFromStartPointByCoordinate:function(t,i,e){if(t){var o={x:0,y:0},s={x:0,y:0},n=e.getPageWidthHeight().height;e=e.getPageWidthHeight().width;var h=t.y>e/2?t.y-5:t.y+5;t.x<this.MiddleX&&(o.y=h,s.x=-n);t.x>this.MiddleX&&(o.y=h,s.x=n);i&&0<=i.indexOf("r")&&(s.x=n);i&&0<=i.indexOf("l")&&(s.x=-n);"tl"==i&&(o.y=0);"bl"==i&&(o.y=e);"tr"==i&&(o.y=0);"br"==i&&(o.y=e);o.x=rightToLeft?-n:n;s.y=o.y;return[o,s]}},getFlipTo:function(t){var i=this.currentPageIndex,e="";t>i&&(e="max");t<i&&(e="min");return{flipTo:e,minIndex:i,maxIndex:i,toIndex:t}},afterZoomIn:function(t){if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion&&(t=BookInfo.getCurrentPages(),void 0!=t&&null!=t))for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e].zoomInSideImage()}}else isPhone()||isPad()||this.showPages(),t&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this.flipBook.parameters.resize=!0,t=this.flipBook.offset().left,i=this.flipBook.offset().top,t-=this.flipBook.parameters.left,i-=this.flipBook.parameters.top,e=this.flipBook.parameters.scale,1!=e&&this.resizeBook(Math.round(this.width*e),Math.round(this.height*e)),transformCSS({tran:{x:t,y:i},scale:1,origin:{x:0,y:0},obj:this.flipBook}),this.flipBook.parameters.tran={x:t,y:i},this.flipBook.parameters.scale=1,this.flipBook.parameters.toScale=1,this.flipBook.parameters.width=$(this.flipBook).width(),this.flipBook.parameters.height=$(this.flipBook).height(),this.flipBook.parameters.origin={x:0,y:0},this.flipBook.parameters.resize=!1,this.bookMap&&this.bookMap.refreshArea(),isPhone()||isPad()||this.switchLargeImage())},setZIndexByPageIndex:function(t,i){if(t){var e=i?i:this.currentPageIndex;t==this.pageArray[e]?t.setZIndex(2):t==this.pageBackArray[e]?t.setZIndex(1):t==this.pageArray[e+1]?t.setZIndex(0):t.setZIndex(-1)}},getFitWH:function(){this.getSpace(!1);var t=this.getSpace(!0),i=windowWidth-t.left-t.right,t=windowHeight-t.top-t.bottom,e=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,o=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(i,t,e,o)},getSpace:function(t){var i=bookConfig.leftMargin+toolBar.getLeftWidth(),e=bookConfig.rightMargin+toolBar.getRightWidth(),o=bookConfig.topMargin+toolBar.getTopHeight(),s=bookConfig.bottomMargin+toolBar.getBottomHeight();t&&(i+=bookConfig.hardCoverBorderWidth,e+=bookConfig.hardCoverBorderWidth,o+=rightToLeft?bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1):0,s+=rightToLeft?0:bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1));return{left:i,right:e,top:o,bottom:s}},resizeBook:function(t,i){this.endFlip();this.width=t;this.height=i;this.pageWidth=t;this.pageHeight=i;this.maskWidth=parseInt(Math.sqrt(t*t+i*i));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.flipBook.css({width:this.width+"px",height:this.height+"px"});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow()},resetBookShadow:function(){},setAttachmentBeforeFlipTo:function(){},setAttachmentAfterFlipTo:function(){},flippingTo:function(t){this.currentPageIndex=t;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!1);setLocationHash(this.currentPageIndex)}}).extend(SingleFlipBook),NormalBook=Class({bookType:BookType.normal_book,doublePage:!0,create:function(t){this._super(t);this.resetZoomArea()},initBook:function(){this._super();this.initAttachments()},initAttachments:function(){this.thicknessManager=new ThicknessManager(this.flipBook,this);this.thicknessManager.refreshThickness();this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow(this.currentPageIndex);this.showOrHideGrayShadow(this.currentPageIndex);isTouchDevice()||new ZoomHint(this.parent);0<=this.getCurrentPages().indexOf(1)&&(this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen),this.miniFullScreen.init());this.pageNumberForFlip||(this.pageNumberForFlip=new BookPageNumberForFlip);this.pageNumberForFlip.init();void 0!=global.staticAd&&!0==staticAd.haveAd&&(this.adContainer=new StaticAd(this.flipBook));this.showPage=this.flipBook;this.bookMap||bookType==BookType.catalog_book||isPad()||isPhone()||!bookConfig.ZoomMapVisible||(this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook))}).delay(this,1);setCurrentIndexTextField(this.currentPageIndex,!0)},showOrHideGrayShadow:function(t){$.browser.msie||$.browser.safari||!bookConfig.ShowTopLeftShadow||this.bookType!=BookType.normal_book||this.grayShadow||(this.grayShadow=$("<div class='grayShadow'></div>"),t=$("<div class='kong edgeShadow' ></div>"),this.grayShadow.append(t),this.flipBook.append(this.grayShadow))},resetBookShadow:function(t){t=this.flipPageManager.array.length;if(0==t){t=2==BookInfo.getPagesByIndex(this.currentPageIndex).length;var i=!BookInfo.isLeftPage(this.currentPageIndex,!0);this.normalBookShadow.doubleWidth(t);this.normalBookShadow.right(i);this.normalBookShadow.show();this.grayShadow&&(t?this.grayShadow.show():this.grayShadow.hide())}else{for(var e=i=!0,o=0;o<t;o++){var s=this.flipPageManager.array[o],n=this.flipPageManager[s].nextIndex,s=this.flipPageManager[s].currentIndex;1==BookInfo.getPagesByIndex(n).length&&BookInfo.isLeftPage(n,!0)&&(e=!1);1==BookInfo.getPagesByIndex(s).length&&BookInfo.isLeftPage(s,!0)&&(e=!1);1!=BookInfo.getPagesByIndex(n).length||BookInfo.isLeftPage(n,!0)||(i=!1);1!=BookInfo.getPagesByIndex(s).length||BookInfo.isLeftPage(s,!0)||(i=!1)}i||e||this.normalBookShadow.hide();i&&!e&&(this.normalBookShadow.show(),this.normalBookShadow.doubleWidth(!1),this.normalBookShadow.right(!1));!i&&e&&(this.normalBookShadow.show(),this.normalBookShadow.doubleWidth(!1),this.normalBookShadow.right(!0));this.grayShadow&&(i&&e?this.grayShadow.show():this.grayShadow.hide())}},hasTwoSingleFlipPage:function(t){for(var i=this.flipPageManager.array.length,e,o=0;o<i;o++){var s=this.flipPageManager.array[o],n=this.flipPageManager[s].nextIndex,s=this.flipPageManager[s].currentIndex;1==BookInfo.getPagesByIndex(n).length&&(e=n);1==BookInfo.getPagesByIndex(s).length&&(e=s)}return e&&(e!=t&&1==BookInfo.getPagesByIndex(t).length||e!=this.currentPageIndex&&1==BookInfo.getPagesByIndex(this.currentPageIndex).length)?(this.normalBookShadow.hide(),!0):!1},newPage:function(t){return new NormalPage(t,"page",!1,this.bookType,this.onBookPageLoaded.bind(this))},flippingTo:function(t){this.currentPageIndex=t;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);setLocationHash(this.currentPageIndex);this.resetZoomArea()},resetZoomArea:function(){this.flipBook&&this.flipBook.parameters&&this.flipBook.parameters.zoomArea&&(1!=this.getCurrentPages().length||BookInfo.isLeftPage(this.currentPageIndex,!0)?1==this.getCurrentPages().length&&BookInfo.isLeftPage(this.currentPageIndex,!0)?this.flipBook.parameters.zoomArea={left:0,top:0,right:50,bottom:0}:this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:0}:this.flipBook.parameters.zoomArea={left:50,top:0,right:0,bottom:0})},afterCurling:function(){this._super();this.resetBookShadow(this.currentPageIndex);this.bmt&&this.bmt.adjustBar();this.thicknessManager.refreshThickness();this.showOrHideGrayShadow(this.currentPageIndex);this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3})},setAttachmentBeforeFlipTo:function(t){this.pauseAnimation();this.thicknessManager.setAttachmentBefore(t);this.adContainer&&this.adContainer.setStyle({"z-index":1});this.bmt&&this.bmt.setAttachmentBefore(t);this.resetBookShadow(t);this.showOrHideGrayShadow(t)},setAttachmentAfterFlipTo:function(t){this.thicknessManager.refreshThickness();this.stopMedia();this.resetSlider();this.showOrHideGrayShadow(t);this.resetBookShadow(t);this.flipping||(this.openShownMedia(),this.addHistoryTexts(),this.addSearchHighlight());bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));this.bmt&&this.bmt.refresh();resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3});this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},resizeBook:function(t,i){this.endFlip();this.width=2*t;this.height=i;this.pageWidth=t;this.pageHeight=i;this.maskWidth=parseInt(Math.sqrt(t*t+i*i));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.setCSS({width:this.width,height:this.height});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow(this.currentPageIndex)},resizeAttachments:function(t,i){if(this.bmt)this.bmt.onResize();if(this.miniFullScreen)this.miniFullScreen.onResize();if(this.pageNumberForFlip)this.pageNumberForFlip.onResize();this.thicknessManager&&this.thicknessManager.resizeAttachment(t,i);this.bookMap&&(this.bookMap.onResize(t,i),this.bookMap.refreshArea());var e=this.getCssLeft(),o=this.getCssTop();this.adContainer&&(rightToLeft&&(e+=t),this.adContainer.setStyle({left:e,top:o,width:t+"px",height:i+"px"}),this.adContainer.resize())},movetoCenter:function(t,i,e){this._super(t,i,e);this.thicknessManager.followToPoint(t,i,e,!1)},resizeAttachmentAfterZoomIn:function(t){this.thicknessManager&&(isPhone()||isPad()||this.thicknessManager.resizeAttachment(this.width,this.height));if(this.bmt)this.bmt.onResize()},afterZoomIn:function(t){t&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this._super(t),this.resizeAttachmentAfterZoomIn(this.flipBook.parameters.scale))}}).extend(DoubleFlipBook),NormalCalendar=Class({bookType:BookType.normal_book,doublePage:!0,create:function(t){this._super(t);this.resetZoomArea()},initBook:function(){this._super();this.initAttachments()},initAttachments:function(){this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow(this.currentPageIndex);isTouchDevice()||new ZoomHint(this.parent);0<=this.getCurrentPages().indexOf(1)&&(this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen),this.miniFullScreen.init());this.pageNumberForFlip||(this.pageNumberForFlip=new BookPageNumberForFlip);this.pageNumberForFlip.init();void 0!=global.staticAd&&!0==staticAd.haveAd&&(this.adContainer=new StaticAd(this.flipBook));this.showPage=this.flipBook;this.bookMap||bookType==BookType.catalog_book||isPad()||isPhone()||!bookConfig.ZoomMapVisible||(this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook))}).delay(this,1);setCurrentIndexTextField(this.currentPageIndex,!0)},resetBookShadow:function(t){t=this.flipPageManager.array.length;if(0==t){t=2==BookInfo.getPagesByIndex(this.currentPageIndex).length;var i=!BookInfo.isLeftPage(this.currentPageIndex,!0);this.normalBookShadow.doubleHeight(t);this.normalBookShadow.down(i);this.normalBookShadow.show()}else{for(var e=i=!0,o=0;o<t;o++){var s=this.flipPageManager.array[o],n=this.flipPageManager[s].nextIndex,s=this.flipPageManager[s].currentIndex;1==BookInfo.getPagesByIndex(n).length&&BookInfo.isLeftPage(n,!0)&&(e=!1);1==BookInfo.getPagesByIndex(s).length&&BookInfo.isLeftPage(s,!0)&&(e=!1);1!=BookInfo.getPagesByIndex(n).length||BookInfo.isLeftPage(n,!0)||(i=!1);1!=BookInfo.getPagesByIndex(s).length||BookInfo.isLeftPage(s,!0)||(i=!1)}i||e||this.normalBookShadow.hide();i&&!e&&(this.normalBookShadow.show(),this.normalBookShadow.doubleHeight(!1),this.normalBookShadow.down(!1));!i&&e&&(this.normalBookShadow.show(),this.normalBookShadow.doubleHeight(!1),this.normalBookShadow.down(!0))}},hasTwoSingleFlipPage:function(t){for(var i=this.flipPageManager.array.length,e,o=0;o<i;o++){var s=this.flipPageManager.array[o],n=this.flipPageManager[s].nextIndex,s=this.flipPageManager[s].currentIndex;1==BookInfo.getPagesByIndex(n).length&&(e=n);1==BookInfo.getPagesByIndex(s).length&&(e=s)}return e&&(e!=t&&1==BookInfo.getPagesByIndex(t).length||e!=this.currentPageIndex&&1==BookInfo.getPagesByIndex(this.currentPageIndex).length)?(this.normalBookShadow.hide(),!0):!1},flippingTo:function(t){this.currentPageIndex=t;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);setLocationHash(this.currentPageIndex);this.resetZoomArea()},afterCurling:function(){this._super();this.resetBookShadow(this.currentPageIndex);this.bmt&&this.bmt.adjustBar();this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3})},setAttachmentBeforeFlipTo:function(t){this.pauseAnimation();this.adContainer&&this.adContainer.setStyle({"z-index":1});this.bmt&&this.bmt.setAttachmentBefore(t);this.resetBookShadow(t)},setAttachmentAfterFlipTo:function(t){this.stopMedia();this.resetSlider();this.resetBookShadow(t);this.flipping||(this.openShownMedia(),this.addHistoryTexts(),this.addSearchHighlight());bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));this.bmt&&this.bmt.refresh();resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3});this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},resizeAttachments:function(t,i){if(this.bmt)this.bmt.onResize();if(this.miniFullScreen)this.miniFullScreen.onResize();if(this.pageNumberForFlip)this.pageNumberForFlip.onResize();this.bookMap&&(this.bookMap.onResize(t,i),this.bookMap.refreshArea());var e=this.getCssLeft(),o=this.getCssTop();this.adContainer&&(rightToLeft&&(e+=t),this.adContainer.setStyle({left:e,top:o,width:t+"px",height:i+"px"}),this.adContainer.resize())},resizeAttachmentAfterZoomIn:function(t){if(this.bmt)this.bmt.onResize()},afterZoomIn:function(t){isPhone()||isPad()||!t||!this.flipBook.parameters||this.flipBook.parameters.resize||(this._super(t),this.resizeAttachmentAfterZoomIn(this.flipBook.parameters.scale))}}).extend(DoubleCalendar),SingleBook=Class({bookType:BookType.single_book,doublePage:!1,create:function(t){this._super(t)},initBook:function(){this._super();this.initAttachments()},initAttachments:function(){bookConfig.showThicknessOnMobile&&(this.thicknessManager=new SingleBookThicknessManager(this.flipBook,this),this.thicknessManager.refreshThickness());this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow();setCurrentIndexTextField(this.currentPageIndex,!1);isTouchDevice()||new ZoomHint(this.parent);this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen);this.miniFullScreen.init();this.pageNumberForFlip||(this.pageNumberForFlip=new BookPageNumberForFlip);this.pageNumberForFlip.init();this.showPage=this.flipBook;this.bookMap||isPad()||isPhone()||!bookConfig.ZoomMapVisible||(this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook,!0))}).delay(this,1)},newPage:function(t){return new NormalPage(t,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this))},newPageBack:function(t){return new NormalPage(t,"pageBack",!0,BookType.single_book)},afterCurling:function(){this._super();this.thicknessManager&&this.thicknessManager.refreshThickness()},setAttachmentBeforeFlipTo:function(t){this.pauseAnimation();this.thicknessManager&&this.thicknessManager.setAttachmentBefore(t)},setAttachmentAfterFlipTo:function(t){this.thicknessManager&&this.thicknessManager.refreshThickness();this.stopMedia();this.resetSlider();this.flipping||(this.openShownMedia(),this.addHistoryTexts(),this.addSearchHighlight());this.bmt&&this.bmt.refresh();bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},resizeBook:function(t,i){this.endFlip();this.width=t;this.height=i;this.pageWidth=t;this.pageHeight=i;this.maskWidth=parseInt(Math.sqrt(t*t+i*i));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.flipBook.css({width:this.width+"px",height:this.height+"px"});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow()},resizeAttachments:function(t,i){if(this.bmt)this.bmt.onResize();if(this.miniFullScreen)this.miniFullScreen.onResize();if(this.pageNumberForFlip)this.pageNumberForFlip.onResize();this.thicknessManager&&this.thicknessManager.resizeAttachment(t,i);this.bookMap&&(this.bookMap.onResize(t,i),this.bookMap.refreshArea())},resetBookShadow:function(){this.normalBookShadow.doubleWidth(!0);this.normalBookShadow.right(!1)},flippingTo:function(t){this.currentPageIndex=t;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!1);setLocationHash(this.currentPageIndex)},movetoCenter:function(t,i,e){this._super(t,i,e);this.thicknessManager&&this.thicknessManager.followToPoint(t,i,e,!1)},resizeAttachmentAfterZoomIn:function(t){this.thicknessManager&&(isPhone()||isPad()||this.thicknessManager.resizeAttachment(this.width,this.height));if(this.bmt)this.bmt.onResize()},afterZoomIn:function(t){t&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this._super(t),this.resizeAttachmentAfterZoomIn(this.flipBook.parameters.scale))}}).extend(SingleFlipBook),SingleCalendar=Class({bookType:BookType.single_book,doublePage:!1,create:function(t){this._super(t)},initBook:function(){this._super();this.initAttachments()},initAttachments:function(){this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow();setCurrentIndexTextField(this.currentPageIndex,!1);isTouchDevice()||new ZoomHint(this.parent);this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen);this.miniFullScreen.init();this.pageNumberForFlip||(this.pageNumberForFlip=new BookPageNumberForFlip);this.pageNumberForFlip.init();this.showPage=this.flipBook;this.bookMap||isPad()||isPhone()||!bookConfig.ZoomMapVisible||(this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook,!0))}).delay(this,1)},newPage:function(t){return new NormalPage(t,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this))},newPageBack:function(t){return new NormalPage(t,"pageBack",!0,BookType.single_book)},setAttachmentBeforeFlipTo:function(t){this.pauseAnimation()},setAttachmentAfterFlipTo:function(t){this.stopMedia();this.resetSlider();this.flipping||(this.openShownMedia(),this.addHistoryTexts(),this.addSearchHighlight());this.bmt&&this.bmt.refresh();bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},resizeAttachments:function(t,i){if(this.bmt)this.bmt.onResize();if(this.miniFullScreen)this.miniFullScreen.onResize();if(this.pageNumberForFlip)this.pageNumberForFlip.onResize();this.bookMap&&(this.bookMap.onResize(t,i),this.bookMap.refreshArea())},resetBookShadow:function(){this.normalBookShadow.doubleHeight(!0);this.normalBookShadow.down(!1)},flippingTo:function(t){this.currentPageIndex=t;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!1);setLocationHash(this.currentPageIndex)}}).extend(SingleFlipCalendar),HardSide=Class({isHardPage:!0,create:function(t,i,e,o){this._super(t,i,e,o);this.isHard=!0;this.borderWidth=bookConfig.hardCoverBorderWidth;this.outerCoverBorder=bookConfig.outerCoverBorder||BookInfo.isInnerPage(t,e);this.container=this.side},initPageSide:function(){this.pageSide=$("<div class='pageSide'></div>");this.side.append(this.pageSide)},initSide:function(){this.side=$("<div class='hardSide' style='background-color:"+bookConfig.borderColor+";'></div>")},addCoil:function(){parseBool(bookConfig.addPaperCoil)&&(this.midCoil=$("<div style='z-index:6;'></div>"),this.pageSide.append(this.midCoil))},resizePage:function(t,i){bookConfig.FlipDirection?(this.width=t+2*this.borderWidth,this.height=i+this.borderWidth,this.pageSideWidth=this.outerCoverBorder?t:t+2*this.borderWidth,this.pageSideHeight=this.outerCoverBorder?i:i+this.borderWidth):(this.width=t+this.borderWidth,this.height=i+2*this.borderWidth,this.pageSideWidth=this.outerCoverBorder?t:t+this.borderWidth,this.pageSideHeight=this.outerCoverBorder?i:i+2*this.borderWidth);this.maskWidth=parseInt(Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2)));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.attachW=parseInt(100*(this.outerCoverBorder?t:this.width)/(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight)));this.attachH=parseInt(100*(this.outerCoverBorder?i:this.height)/(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop)));this.side.css({width:this.width,height:this.height});this.tmpContent.css({width:this.attachW,height:this.attachH,top:-this.attachH*parseFloat(bookConfig.visibleAreaTop)/100,left:-this.attachW*parseFloat(bookConfig.visibleAreaLeft)/100});this.pageSide.css({position:"absolute",width:this.pageSideWidth,height:this.pageSideHeight});bookConfig.FlipDirection?this.pageSide.css({left:this.outerCoverBorder?this.borderWidth:0}):this.pageSide.css({top:this.outerCoverBorder?this.borderWidth:0});this.pageWidth=t;this.pageHeight=i;this.resizeSideImage()},setLeftOrRight:function(t){this._super(t);var i=t&&this.outerCoverBorder?this.borderWidth:0,e=bookConfig.cornerRound;t?(this.side.css({"border-radius":e+"px 0px 0px "+e+"px"}),this.side.css({"margin-top":-this.borderWidth+"px","margin-left":-this.borderWidth+"px"})):(this.side.css({"border-radius":"0px "+e+"px "+e+"px 0px"}),this.side.css({"margin-top":-this.borderWidth+"px","margin-right":-this.borderWidth+"px"}));this.pageSide.css({left:i+"px"})},setUpOrDown:function(t){this._super(t);var i=t&&this.outerCoverBorder?this.borderWidth:0,e=bookConfig.cornerRound;t?(this.side.css({"border-radius":e+"px "+e+"px 0px 0px"}),this.side.css({"margin-top":-this.borderWidth+"px","margin-left":-this.borderWidth+"px"})):(this.side.css({"border-radius":"0px 0px "+e+"px "+e+"px"}),this.side.css({"margin-bottom":-this.borderWidth+"px","margin-left":-this.borderWidth+"px"}));this.pageSide.css({top:i+"px"})},addFlipShadow:function(){}}).extend(BookPage),HardCover=Class({create:function(t){this.parent=t;this.borderWidth=bookConfig.hardCoverBorderWidth;this.rightToLeft=bookConfig.RightToLeft;this.cover=$("<div class='hardCover'></div>");this.initPage();this.initBookSpine();this.parent.append(this.cover)},initPage:function(){var t=BookInfo.getHardCoverPages(!0);this.leftPage=new HardSide(t[0],"coverPage",BookType.normal_book);this.rightPage=new HardSide(t[1],"coverPage",BookType.normal_book);this.cover.append(this.leftPage.getSide());this.cover.append(this.rightPage.getSide());this.leftPage.addAttachment();this.rightPage.addAttachment();this.leftPage.setLeftOrRight(!0);this.rightPage.setLeftOrRight(!1);this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage.setCSSByStyle({top:"0",right:"0","margin-top":0,"margin-right":0})},initBookSpine:function(){this.topSpine=new BookSpine(this.cover);this.bottomSpine=new BookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},onResize:function(t,i,e){if(this.leftPage)this.leftPage.onResize(t,i);if(this.rightPage)this.rightPage.onResize(t,i);this.topSpine.onResize(e);this.bottomSpine.onResize(e);this.pageWidth=t;this.pageHeight=i;this.resizeCover(t,i,e)},resizeCover:function(t,i,e){this.thicknessWidthArray=e;this.width=2*t+(e[0]+e[1])+2*this.borderWidth;this.height=i+2*this.borderWidth;this.cover.css({width:this.width+"px",height:this.height+"px",left:-(this.borderWidth+e[0])+"px",top:-this.borderWidth+"px"})},refresh:function(t,i,e){this.refreshBookSpine(i);this.refreshPage(t,e);this.resizeCover(this.pageWidth,this.pageHeight,i)},getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!0)},refreshPage:function(t,i){var e=this.getSensitiveIndex().min,o=this.getSensitiveIndex().max;if(t<=e||t>=o){if(t<=e&&bookConfig.RightToLeft||!bookConfig.RightToLeft&&t>=o)this.rightPage&&this.rightPage.setVisible(!1),(i<o&&bookConfig.RightToLeft||i>e&&!bookConfig.RightToLeft)&&this.leftPage&&this.leftPage.setVisible(!0);if(t<=e&&!bookConfig.RightToLeft||bookConfig.RightToLeft&&t>=o)this.leftPage&&this.leftPage.setVisible(!1),(i<o&&!bookConfig.RightToLeft||i>e&&bookConfig.RightToLeft)&&this.rightPage&&this.rightPage.setVisible(!0);this.hideBookSpine()}else this.showBookSpine(),this.leftPage&&this.leftPage.setVisible(!0),this.rightPage&&this.rightPage.setVisible(!0)},refreshBookSpine:function(t){this.topSpine.refresh(t);this.bottomSpine.refresh(t)},hideBookSpine:function(){this.topSpine.hide();this.bottomSpine.hide()},showBookSpine:function(){this.topSpine.show();this.bottomSpine.show()},show:function(){this.cover.show()},hide:function(){this.cover.hide()}}),BookSpine=Class({create:function(t){this.parent=t;this.initSpine()},initSpine:function(){this.height=bookConfig.hardCoverBorderWidth;this.bookSpine=$("<div class='bookSpine'></div>");this.bookSpine.css({height:this.height,"background-color":bookConfig.borderColor});this.parent.append(this.bookSpine);this.addShadow()},addShadow:function(){this.leftShadow=$("<div class='left_shadow shadow'></div>");this.rightShadow=$("<div class='right_shadow shadow'></div>");this.bookSpine.append(this.leftShadow);this.bookSpine.append(this.rightShadow)},refresh:function(t){this.onResize(t)},show:function(){this.bookSpine.show()},hide:function(){},setCSSByStyle:function(t){this.bookSpine.css(t)},setCSSByName:function(t){this.bookSpine.attr("class",t);this.bookSpine.addClass("bookSpine")},onResize:function(t){this.width=t[0]+t[1];this.bookSpine.css({width:this.width,"margin-left":-this.width/2+"px"})}}),HardCalendarCover=Class({create:function(t){this.parent=t;this.borderWidth=bookConfig.hardCoverBorderWidth;this.rightToLeft=bookConfig.RightToLeft;this.cover=$("<div class='hardCover'></div>");this.initPage();this.initBookSpine();this.parent.append(this.cover)},initPage:function(){var t=BookInfo.getHardCoverPages(!0);this.leftPage=new HardSide(t[0],"coverPage",BookType.normal_book);this.rightPage=new HardSide(t[1],"coverPage",BookType.normal_book);this.cover.append(this.leftPage.getSide());this.cover.append(this.rightPage.getSide());this.leftPage.addAttachment();this.rightPage.addAttachment();this.leftPage.setUpOrDown(!0);this.rightPage.setUpOrDown(!1);this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage.setCSSByStyle({bottom:"0",left:"0","margin-bottom":0,"margin-left":0})},initBookSpine:function(){this.topSpine=new BookSpine(this.cover);this.bottomSpine=new BookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},onResize:function(t,i,e){if(this.leftPage)this.leftPage.onResize(t,i);if(this.rightPage)this.rightPage.onResize(t,i);this.topSpine.onResize(e);this.bottomSpine.onResize(e);this.pageWidth=t;this.pageHeight=i;this.resizeCover(t,i,e)},resizeCover:function(t,i,e){this.thicknessWidthArray=e;this.width=t+2*this.borderWidth;this.height=2*i+(e[0]+e[1])+2*this.borderWidth;this.cover.css({width:this.width+"px",height:this.height+"px",left:-this.borderWidth+"px",top:-(this.borderWidth+e[0])+"px"})},refresh:function(t,i,e){this.refreshBookSpine(i);this.refreshPage(t,e);this.resizeCover(this.pageWidth,this.pageHeight,i)},getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!0)},refreshPage:function(t,i){var e=this.getSensitiveIndex().min,o=this.getSensitiveIndex().max;if(t<=e||t>=o){if(t<=e&&bookConfig.RightToLeft||!bookConfig.RightToLeft&&t>=o)this.rightPage&&this.rightPage.setVisible(!1),(i<o&&bookConfig.RightToLeft||i>e&&!bookConfig.RightToLeft)&&this.leftPage&&this.leftPage.setVisible(!0);if(t<=e&&!bookConfig.RightToLeft||bookConfig.RightToLeft&&t>=o)this.leftPage&&this.leftPage.setVisible(!1),(i<o&&!bookConfig.RightToLeft||i>e&&bookConfig.RightToLeft)&&this.rightPage&&this.rightPage.setVisible(!0);this.hideBookSpine()}else this.showBookSpine(),this.leftPage&&this.leftPage.setVisible(!0),this.rightPage&&this.rightPage.setVisible(!0)},refreshBookSpine:function(t){this.topSpine.refresh(t);this.bottomSpine.refresh(t)},hideBookSpine:function(){this.topSpine.hide();this.bottomSpine.hide()},showBookSpine:function(){this.topSpine.show();this.bottomSpine.show()},show:function(){this.cover.show()},hide:function(){this.cover.hide()}}),HardBook=Class({bookType:BookType.normal_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(i)&&0<=[1,totalPageCount].indexOf(t)||0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},toSoftPage:function(t){var i=this.currentPageIndex;if(0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t))return!1;0>[1,totalPageCount].indexOf(i)&&[1,totalPageCount].indexOf(t);return!0},toHardPage:function(t){return!1},toCoverPage:function(t){var i=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(i)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(t)||0<=[2,3].indexOf(i)&&0>[1,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},isHardPage:function(t,i){return!1},isCoverPage:function(t,i){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount?gotoPageFun(totalPageCount-1):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(t){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new NormalPage(t,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!0),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!1),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-left-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-right-side")):(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!1),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!0),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-right-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-left-side"));return[this.pageArray[t],this.pageArray[i]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager.getThicknessWidth()},onResize:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalBook),HardCalendar=Class({bookType:BookType.normal_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(i)&&0<=[1,totalPageCount].indexOf(t)||0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},toSoftPage:function(t){var i=this.currentPageIndex;if(0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t))return!1;0>[1,totalPageCount].indexOf(i)&&[1,totalPageCount].indexOf(t);return!0},toHardPage:function(t){return!1},toCoverPage:function(t){var i=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(i)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(t)||0<=[2,3].indexOf(i)&&0>[1,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},isHardPage:function(t,i){return!1},isCoverPage:function(t,i){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount?gotoPageFun(totalPageCount-1):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCalendarCover(this.flipBook)},newPage:function(t){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new NormalPage(t,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setUpOrDown(!0),this.pageArray[i]&&this.pageArray[i].setUpOrDown(!1),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-up-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-down-side")):(this.pageArray[t]&&this.pageArray[t].setUpOrDown(!1),this.pageArray[i]&&this.pageArray[i].setUpOrDown(!0),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-down-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-up-side"));return[this.pageArray[t],this.pageArray[i]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalCalendar),OpenHardCalendar=Class({crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||totalPageCount!=i&&totalPageCount!=t?!1:!0},toSoftPage:function(t){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)?!1:!0},toCoverPage:function(t){return totalPageCount!=this.currentPageIndex&&totalPageCount!=t?!1:!0},isCoverPage:function(t,i){return t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(t){return 1==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new NormalPage(t,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))}}).extend(HardCalendar),OpenHardBook=Class({crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||totalPageCount!=i&&totalPageCount!=t?!1:!0},toSoftPage:function(t){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)?!1:!0},toCoverPage:function(t){return totalPageCount!=this.currentPageIndex&&totalPageCount!=t?!1:!0},isCoverPage:function(t,i){return t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(t){return 1==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new NormalPage(t,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))}}).extend(HardBook),SingleHardCover=Class({initPage:function(){var t=BookInfo.getHardCoverPages(!1);bookConfig.RightToLeft&&(this.leftPage=new HardSide(t[0],"coverPage",BookType.single_book));bookConfig.RightToLeft||(this.rightPage=new HardSide(t[0],"coverPage",BookType.single_book));this.leftPage&&this.cover.append(this.leftPage.getSide());this.rightPage&&this.cover.append(this.rightPage.getSide());this.leftPage&&this.leftPage.addAttachment();this.rightPage&&this.rightPage.addAttachment();this.leftPage&&this.leftPage.setLeftOrRight(!0);this.rightPage&&this.rightPage.setLeftOrRight(!1);this.leftPage&&this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage&&this.rightPage.setCSSByStyle({top:"0",right:"0","margin-top":0,"margin-right":0})},getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!1)},initBookSpine:function(){this.topSpine=new SingleBookSpine(this.cover);this.bottomSpine=new SingleBookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},resizeCover:function(t,i,e){this.thicknessWidthArray=e;this.width=t+(e[0]+e[1])+this.borderWidth;this.height=i+2*this.borderWidth;this.cover.css({width:this.width+"px",height:this.height+"px",left:(bookConfig.RightToLeft?-(this.borderWidth+e[0]):0)+"px",top:-this.borderWidth+"px"})}}).extend(HardCover),SingleBookSpine=Class({onResize:function(t){this.width=t[0]+t[1];this.bookSpine.css({width:this.width});bookConfig.RightToLeft?this.bookSpine.css({left:"auto",right:"0"}):this.bookSpine.css({right:"auto",left:"0"})}}).extend(BookSpine),SingleHardCalendarCover=Class({initPage:function(){var t=BookInfo.getHardCoverPages(!1);bookConfig.RightToLeft&&(this.leftPage=new HardSide(t[0],"coverPage",BookType.single_book));bookConfig.RightToLeft||(this.rightPage=new HardSide(t[0],"coverPage",BookType.single_book));this.leftPage&&this.cover.append(this.leftPage.getSide());this.rightPage&&this.cover.append(this.rightPage.getSide());this.leftPage&&this.leftPage.addAttachment();this.rightPage&&this.rightPage.addAttachment();this.leftPage&&this.leftPage.setUpOrDown(!0);this.rightPage&&this.rightPage.setUpOrDown(!1);this.leftPage&&this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage&&this.rightPage.setCSSByStyle({bottom:"0",left:"0","margin-bottom":0,"margin-left":0})},getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!1)},initBookSpine:function(){this.topSpine=new SingleBookSpine(this.cover);this.bottomSpine=new SingleBookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},resizeCover:function(t,i,e){this.thicknessWidthArray=e;this.width=t+2*this.borderWidth;this.height=i+(e[0]+e[1])+this.borderWidth;this.cover.css({width:this.width+"px",height:this.height+"px",top:(bookConfig.RightToLeft?-(this.borderWidth+e[0]):0)+"px",left:-this.borderWidth+"px"})}}).extend(HardCover),SingleBookSpine=Class({onResize:function(t){this.width=t[0]+t[1];this.bookSpine.css({width:this.width});bookConfig.RightToLeft?this.bookSpine.css({left:"auto",right:"0"}):this.bookSpine.css({right:"auto",left:"0"})}}).extend(BookSpine),SingleHardBook=Class({bookType:BookType.single_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 1==i&&2!=t||2!=i&&1==t?!0:!1},toSoftPage:function(t){return 2==t||1==t?!1:!0},toHardPage:function(t){return!1},toCoverPage:function(t){return 1!=t?!1:!0},isCoverPage:function(t,i){var e=t;t>i&&(e=i);return 1==e||e==bookConfig.totalPageCount?!0:!1},isHardPage:function(t,i){return!1},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new SingleHardCover(this.flipBook)},newPage:function(t){1==t||t==bookConfig.totalPageCount?(t=new HardSide(t,"page",BookType.single_book,this.onBookPageLoaded.bind(this)),t.setLeftOrRight(bookConfig.RightToLeft)):t=new NormalPage(t,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this));return t},newPageBack:function(t){1==t||t==bookConfig.totalPageCount?(t=new HardSide(t,"pageBack",BookType.single_book),t.setLeftOrRight(bookConfig.RightToLeft)):t=new NormalPage(t,"pageBack",!0,BookType.single_book);return t},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getThicknessWidth:function(){return this.thicknessManager?this.thicknessManager.getThicknessWidth():[0,0]},getDownUpHardPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);bookConfig.RightToLeft?(this.pageArray[e]&&this.pageArray[e].setLeftOrRight(!0),this.pageBackArray[e]&&this.pageBackArray[e].setLeftOrRight(!0),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-left-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-right-side")):(this.pageArray[e]&&this.pageArray[e].setLeftOrRight(!1),this.pageBackArray[e]&&this.pageBackArray[e].setLeftOrRight(!1),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-right-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-left-side"));return[this.pageArray[e],this.pageBackArray[e]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},onResize:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleBook),SingleHardCalendar=Class({bookType:BookType.single_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 1==i&&2!=t||2!=i&&1==t?!0:!1},toSoftPage:function(t){return 2==t||1==t?!1:!0},toHardPage:function(t){return!1},toCoverPage:function(t){return 1!=t?!1:!0},isCoverPage:function(t,i){var e=t;t>i&&(e=i);return 1==e||e==bookConfig.totalPageCount?!0:!1},isHardPage:function(t,i){return!1},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new SingleHardCalendarCover(this.flipBook)},newPage:function(t){1==t||t==bookConfig.totalPageCount?(t=new HardSide(t,"page",BookType.single_book,this.onBookPageLoaded.bind(this)),t.setUpOrDown(bookConfig.RightToLeft)):t=new NormalPage(t,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this));return t},newPageBack:function(t){1==t||t==bookConfig.totalPageCount?(t=new HardSide(t,"pageBack",BookType.single_book),t.setUpOrDown(bookConfig.RightToLeft)):t=new NormalPage(t,"pageBack",!0,BookType.single_book);return t},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getThicknessWidth:function(){return this.thicknessManager?this.thicknessManager.getThicknessWidth():[0,0]},getDownUpHardPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);bookConfig.RightToLeft?(this.pageArray[e]&&this.pageArray[e].setUpOrDown(!0),this.pageBackArray[e]&&this.pageBackArray[e].setUpOrDown(!0),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-up-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-down-side")):(this.pageArray[e]&&this.pageArray[e].setUpOrDown(!1),this.pageBackArray[e]&&this.pageBackArray[e].setUpOrDown(!1),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-down-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-up-side"));return[this.pageArray[e],this.pageBackArray[e]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:function(t,i){this._super(t,i)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleCalendar),AlbumSide=Class({isHardPage:!0,create:function(t,i,e,o){this._super(t,i,e,o);this.isHard=!0},renderPage:function(){},addFlipShadow:function(){this.pageFlipShadow||(this.pageFlipShadow=new HardPageFlipShadow(this.side))},onResize:function(t,i){this._super(t,i);bookConfig.FlipDirection?this.side&&this.side.css({left:"50%","margin-left":-t/2+"px"}):this.side&&this.side.css({top:"50%","margin-top":-i/2+"px"})}}).extend(BookPage),AlbumBook=Class({bookType:BookType.normal_book,create:function(t){this._super(t)},crossFlipMode:function(t){return!1},toSoftPage:function(t){return!1},toHardPage:function(t){return!0},isHardPage:function(t,i){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(t){},newPage:function(t){return new AlbumSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!0),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!1),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-left-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-right-side")):(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!1),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!0),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-right-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-left-side"));return[this.pageArray[t],this.pageArray[i]]}}).extend(NormalBook),AlbumHardBook=Class({bookType:BookType.normal_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(i)&&0<=[1,totalPageCount].indexOf(t)||0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},toSoftPage:function(t){return!1},toHardPage:function(t){var i=this.currentPageIndex;if(0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t))return!1;0>[1,totalPageCount].indexOf(i)&&[1,totalPageCount].indexOf(t);return!0},toCoverPage:function(t){var i=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(i)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(t)||0<=[2,3].indexOf(i)&&0>[1,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},isHardPage:function(t,i){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?!1:!0},isCoverPage:function(t,i){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount?gotoPageFun(totalPageCount-1):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(t){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new AlbumSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!0),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!1),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-left-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-right-side")):(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!1),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!0),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-right-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-left-side"));return[this.pageArray[t],this.pageArray[i]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager.getThicknessWidth()},onResize:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalBook),OpenAlbumHardBook=Class({crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||totalPageCount!=i&&totalPageCount!=t?!1:!0},toHardPage:function(t){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)?!1:!0},toCoverPage:function(t){return totalPageCount!=this.currentPageIndex&&totalPageCount!=t?!1:!0},isHardPage:function(t,i){return t==totalPageCount||t==totalPageCount-1?!1:!0},isCoverPage:function(t,i){return t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(t){return 1==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new AlbumSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))}}).extend(AlbumHardBook),SingleAlbumBook=Class({bookType:BookType.single_book,create:function(t){this._super(t)},crossFlipMode:function(t){return!1},toSoftPage:function(t){return!1},toHardPage:function(t){return!0},isHardPage:function(t,i){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(t){},newPage:function(t){return new AlbumSide(t,"page",BookType.single_book,this.onBookPageLoaded.bind(this))},getDownUpHardPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);bookConfig.RightToLeft?(this.pageArray[e]&&this.pageArray[e].setLeftOrRight(!0),this.pageBackArray[e]&&this.pageBackArray[e].setLeftOrRight(!0),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-left-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-right-side")):(this.pageArray[e]&&this.pageArray[e].setLeftOrRight(!1),this.pageBackArray[e]&&this.pageBackArray[e].setLeftOrRight(!1),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-right-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-left-side"));return[this.pageArray[e],this.pageBackArray[e]]}}).extend(SingleBook),SingleAlbumHardBook=Class({bookType:BookType.single_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 1==i&&2!=t||2!=i&&1==t?!0:!1},toSoftPage:function(t){return!1},toHardPage:function(t){return 2==t||1==t?!1:!0},toCoverPage:function(t){return 1!=t?!1:!0},isCoverPage:function(t,i){var e=t;t>i&&(e=i);return 1==e||e==bookConfig.totalPageCount?!0:!1},isHardPage:function(t,i){var e=t;t>i&&(e=i);return 1==e||e==bookConfig.totalPageCount?!1:!0},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new SingleHardCover(this.flipBook)},newPage:function(t){1==t||t==bookConfig.totalPageCount?(t=new HardSide(t,"page",BookType.single_book,this.onBookPageLoaded.bind(this)),t.setLeftOrRight(bookConfig.RightToLeft)):t=new AlbumSide(t,"page",BookType.single_book,this.onBookPageLoaded.bind(this));return t},newPageBack:function(t){1==t||t==bookConfig.totalPageCount?(t=new HardSide(t,"pageBack",BookType.single_book),t.setLeftOrRight(bookConfig.RightToLeft)):t=new AlbumSide(t,"pageBack",BookType.single_book);return t},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);bookConfig.RightToLeft?(this.pageArray[e]&&this.pageArray[e].setLeftOrRight(!0),this.pageBackArray[e]&&this.pageBackArray[e].setLeftOrRight(!0),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-left-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-right-side")):(this.pageArray[e]&&this.pageArray[e].setLeftOrRight(!1),this.pageBackArray[e]&&this.pageBackArray[e].setLeftOrRight(!1),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-right-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-left-side"));return[this.pageArray[e],this.pageBackArray[e]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager?this.thicknessManager.getThicknessWidth():[0,0]},onResize:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleBook),AlbumCanlendar=Class({bookType:BookType.normal_book,create:function(t){this._super(t)},crossFlipMode:function(t){return!1},toSoftPage:function(t){return!1},toHardPage:function(t){return!0},isHardPage:function(t,i){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(t){},newPage:function(t){return new AlbumSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setUpOrDown(!0),this.pageArray[i]&&this.pageArray[i].setUpOrDown(!1),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-up-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-down-side")):(this.pageArray[t]&&this.pageArray[t].setUpOrDown(!1),this.pageArray[i]&&this.pageArray[i].setUpOrDown(!0),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-down-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-up-side"));return[this.pageArray[t],this.pageArray[i]]}}).extend(NormalCalendar),AlbumHardCalendar=Class({bookType:BookType.normal_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(i)&&0<=[1,totalPageCount].indexOf(t)||0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},toSoftPage:function(t){return!1},toHardPage:function(t){var i=this.currentPageIndex;if(0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t))return!1;0>[1,totalPageCount].indexOf(i)&&[1,totalPageCount].indexOf(t);return!0},toCoverPage:function(t){var i=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(i)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(t)||0<=[2,3].indexOf(i)&&0>[1,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},isHardPage:function(t,i){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?!1:!0},isCoverPage:function(t,i){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount?gotoPageFun(totalPageCount-1):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCalendarCover(this.flipBook)},newPage:function(t){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new AlbumSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setUpOrDown(!0),this.pageArray[i]&&this.pageArray[i].setUpOrDown(!1),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-up-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-down-side")):(this.pageArray[t]&&this.pageArray[t].setUpOrDown(!1),this.pageArray[i]&&this.pageArray[i].setUpOrDown(!0),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-down-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-up-side"));return[this.pageArray[t],this.pageArray[i]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalCalendar),OpenAlbumHardCalendar=Class({crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||totalPageCount!=i&&totalPageCount!=t?!1:!0},toHardPage:function(t){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)?!1:!0},toCoverPage:function(t){return totalPageCount!=this.currentPageIndex&&totalPageCount!=t?!1:!0},isHardPage:function(t,i){return t==totalPageCount||t==totalPageCount-1?!1:!0},isCoverPage:function(t,i){return t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(t){return 1==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new AlbumSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))}}).extend(AlbumHardCalendar),SingleAlbumCalendar=Class({bookType:BookType.single_book,create:function(t){this._super(t)},crossFlipMode:function(t){return!1},toSoftPage:function(t){return!1},toHardPage:function(t){return!0},isHardPage:function(t,i){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(t){},newPage:function(t){return new AlbumSide(t,"page",BookType.single_book,this.onBookPageLoaded.bind(this))},getDownUpHardPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);bookConfig.RightToLeft?(this.pageArray[e]&&this.pageArray[e].setUpOrDown(!0),this.pageBackArray[e]&&this.pageBackArray[e].setUpOrDown(!0),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-up-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-down-side")):(this.pageArray[e]&&this.pageArray[e].setUpOrDown(!1),this.pageBackArray[e]&&this.pageBackArray[e].setUpOrDown(!1),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-down-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-up-side"));return[this.pageArray[e],this.pageBackArray[e]]}}).extend(SingleCalendar),SingleAlbumHardCalendar=Class({bookType:BookType.single_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 1==i&&2!=t||2!=i&&1==t?!0:!1},toSoftPage:function(t){return!1},toHardPage:function(t){return 2==t||1==t?!1:!0},toCoverPage:function(t){return 1!=t?!1:!0},isCoverPage:function(t,i){var e=t;t>i&&(e=i);return 1==e||e==bookConfig.totalPageCount?!0:!1},isHardPage:function(t,i){var e=t;t>i&&(e=i);return 1==e||e==bookConfig.totalPageCount?!1:!0},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new SingleHardCalendarCover(this.flipBook)},newPage:function(t){1==t||t==bookConfig.totalPageCount?(t=new HardSide(t,"page",BookType.single_book,this.onBookPageLoaded.bind(this)),t.setUpOrDown(bookConfig.RightToLeft)):t=new AlbumSide(t,"page",BookType.single_book,this.onBookPageLoaded.bind(this));return t},newPageBack:function(t){1==t||t==bookConfig.totalPageCount?(t=new HardSide(t,"pageBack",BookType.single_book),t.setUpOrDown(bookConfig.RightToLeft)):t=new AlbumSide(t,"pageBack",BookType.single_book);return t},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(t,i){var e=t;t>i&&(e=i);this.addPageArray([e]);this.addPageBackArray([e]);bookConfig.RightToLeft?(this.pageArray[e]&&this.pageArray[e].setUpOrDown(!0),this.pageBackArray[e]&&this.pageBackArray[e].setUpOrDown(!0),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-up-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-down-side")):(this.pageArray[e]&&this.pageArray[e].setUpOrDown(!1),this.pageBackArray[e]&&this.pageBackArray[e].setUpOrDown(!1),this.pageArray[e]&&this.pageArray[e].setCSSByName("flip-hard-down-side"),this.pageBackArray[e]&&this.pageBackArray[e].setCSSByName("flip-hard-up-side"));return[this.pageArray[e],this.pageBackArray[e]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager?this.thicknessManager.getThicknessWidth():[0,0]},onResize:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleCalendar),zoom_icons={moveByPos:"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",moveByDrag:"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",ZU:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAL0lEQVR42mL8z0AYMDEMDUX/Gf7TyjrG/6gWocmSbRLCPEZ6OHwIRTAAAAD//wMAHjoIG4Kx7iYAAAAASUVORK5CYII=",PB:"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",ZD:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAJklEQVR42mL8z0AYMDGMeEUsKDz0QGMkwSTG0RAnShEAAAD//wMAU6UDIxn1UhsAAAAASUVORK5CYII=",ZO:"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",PR:"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",NE:"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"};bdor[500]=global.bdor[404];bdor[13]="p";var ZoomControlBar=Class({create:function(t){this.moveByMousePosition=!1;this.moveByPositionUrl=this.getImageUrl("moveByPos");this.moveByDragUrl=this.getImageUrl("moveByDrag");this.initButtons();this.initBar(t);this.initEvent()},initButtons:function(){this.btnZoomUp=$("<div class='button' title='"+getLanguage("btnZoomIn","zoom in")+"'><img src='"+this.getImageUrl("ZU")+"'/></div>");this.btnZoomDown=$("<div class='button' title='"+getLanguage("btnZoomOut","zoom out")+"'><img src='"+this.getImageUrl("ZD")+"'/></div>");this.btnZoomOut=$("<div class='button' title='"+getLanguage("btnZoomOut","zoom out")+"'><img src='"+this.getImageUrl("ZO")+"'/></div>");this.btnPre=$("<div class='button' title='"+getLanguage("btnPrePage","pre")+"'><img src='"+this.getImageUrl("PR")+"'/></div>");this.btnNext=$("<div class='button' title='"+getLanguage("btnNextPage","next")+"'><img src='"+this.getImageUrl("NE")+"'/></div>");this.btnMoveMode=$("<div class='button' title='"+getLanguage("btnPositionToMove","Move by mouse position")+"'><img src='"+this.moveByPositionUrl+"'/></div>")},initBar:function(t){this.width=260;this.height=40;this.bar=$("<div class='zoomControlBar'></div>");this.bar.append(this.btnZoomUp);this.bar.append(this.btnZoomDown);this.bar.append(this.btnZoomOut);this.bar.append(this.btnPre);this.bar.append(this.btnNext);this.bar.append(this.btnMoveMode);this.bar.css({"background-color":bookConfig.toolbarColor});t.append(this.bar)},getImageUrl:function(t){return window.zoom_icons&&zoom_icons[t]?"data:image/png;base64,"+zoom_icons[t]:uiBaseURL+t+".png"},setVisible:function(t){t&&this.buttonChangeColor();this.bar.css({display:t?"block":"none"})},buttonChangeColor:function(){this.hasChanged||(this.btnZoomUp.changeButtonColor(bookConfig.iconColor),this.btnZoomDown.changeButtonColor(bookConfig.iconColor),this.btnZoomOut.changeButtonColor(bookConfig.iconColor),this.btnPre.changeButtonColor(bookConfig.iconColor),this.btnNext.changeButtonColor(bookConfig.iconColor),this.btnMoveMode.changeButtonColor(bookConfig.iconColor),this.hasChanged=!0)},setPosition:function(t,i,e){void 0==e&&(e=["left","top"]);this.bar.css(e[0],t+"px");this.bar.css(e[1],i+"px")},initEvent:function(){this.btnZoomUp.bind(_event._end,function(){this.zoomUp()}.bind(this));this.btnZoomDown.bind(_event._end,function(){this.zoomDown()}.bind(this));this.btnZoomOut.bind(_event._end,function(){this.zoomOut()}.bind(this));this.btnPre.bind(_event._end,function(){rightToLeft?nextPageFun():previousPageFun()});this.btnNext.bind(_event._end,function(){rightToLeft?previousPageFun():nextPageFun()});this.btnMoveMode.bind(_event._end,function(){this.changeMoveMode()}.bind(this))},changeMoveMode:function(){!0==this.moveByMousePosition?(this.moveByMousePosition=!1,this.btnMoveMode.empty().append(getImage(this.moveByPositionUrl)).attr("title",getLanguage("btnPositionToMove","Move by mouse position"))):(this.moveByMousePosition=!0,this.btnMoveMode.empty().append(getImage(this.moveByDragUrl)).attr("title",getLanguage("btnDragToMove","Move by mouse drag")));this.btnMoveMode.changeButtonColor(bookConfig.iconColor)},zoomUp:function(t){var i=BookInfo.getBook().showPage;i.scale=i.parameters.toScale;var e=Math.min(i.parameters.naturalWidth*i.maxScale/i.parameters.width,1.1*parseFloat(i.scale));e!=i.scale&&(t||(t={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]}),i.parameters.origin=i.mathOrigin(i,t),i.originObj(i,i.parameters.origin),i.animateToScale(i,e,t))},zoomDown:function(t){var i=BookInfo.getBook().showPage;t||(t={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]});i.scale=i.parameters.toScale;i.parameters.origin=i.mathOrigin(i,t);i.originObj(i,i.parameters.origin);var e=i.parameters.naturalWidth/i.parameters.width,o=.9*parseFloat(i.scale);o<=e&&(i.parameters.zoomOut=!0);i.animateToScale(i,Math.max(e,o),t)},zoomOut:function(){var t=BookInfo.getBook().showPage;t.onDoubleTap.bind(t)({pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]});StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(t){t.setAsZoomin();t.executeCallback()})}}),CatalogZoomControlBar=Class({}).extend(ZoomControlBar),ZoomMap=Class({create:function(t){this.book=t;this.maxWidth=80;this.maxHeight=100;this.pageHeight=this.pageWidth=this.height=this.width=0;this.doublePage=!1;this.init();this.initEvent()},init:function(){this.map=$("<div class='thumbnail_map'></div>");bookConfig.FlipDirection?(this.imageLeft=$("<img class='map_img map_img_up'></img>"),this.imageRight=$("<img class='map_img map_img_down'></img>")):(this.imageLeft=$("<img class='map_img map_img_left'></img>"),this.imageRight=$("<img class='map_img map_img_right'></img>"));this.mapCursor=$("<div class='map_cursor'></div>");this.map.append(this.imageLeft);this.map.append(this.imageRight);this.map.append(this.mapCursor);bookContainer.append(this.map)},show:function(){this.visible=!0;this.refreshArea();this.map.show()},hide:function(){this.visible=!1;this.map.hide()},onResize:function(){bookConfig.largePageWidth/bookConfig.largePageHeight<this.maxWidth/this.maxHeight?(this.pageWidth=this.maxWidth,this.pageHeight=bookConfig.largePageHeight*this.maxWidth/bookConfig.largePageWidth):(this.pageHeight=this.maxHeight,this.pageWidth=bookConfig.largePageWidth*this.maxHeight/bookConfig.largePageHeight);bookConfig.FlipDirection?(this.height=this.book.doublePage?2*(this.pageHeight+1):this.pageHeight,this.width=this.pageWidth+2):(this.height=this.pageHeight+2,this.width=this.book.doublePage?2*(this.pageWidth+1):this.pageWidth);var t=20+bookConfig.rightMargin,i=toolBar.getTopHeight()+10+bookConfig.topMargin;this.map.css({left:"auto",right:t+"px",top:i,width:this.width+"px",height:this.height+"px"});$(".map_img").css({width:this.pageWidth+"px",height:this.pageHeight+"px"});this.doublePage=this.book.doublePage},fillContent:function(t){this.visible&&(t=BookInfo.getCurrentPages(),this.doublePage=1<t.length,bookConfig.FlipDirection?(this.doublePage?(this.fillImage(this.imageLeft,t[0]),this.fillImage(this.imageRight,t[1]),this.imageLeft.show(),this.imageRight.show(),this.imageLeft.css({"border-bottom":"none"})):(this.fillImage(this.imageLeft,t[0]),this.imageLeft.show(),this.imageRight.hide(),this.imageLeft.css({"border-bottom":"1px solid gray"})),this.height=this.pageHeight,this.doublePage&&(this.height=2*(this.pageHeight+1)),this.map.css({height:this.height+"px"})):(this.doublePage?(this.fillImage(this.imageLeft,t[0]),this.fillImage(this.imageRight,t[1]),this.imageLeft.show(),this.imageRight.show(),this.imageLeft.css({"border-right":"none"})):(this.fillImage(this.imageLeft,t[0]),this.imageLeft.show(),this.imageRight.hide(),this.imageLeft.css({"border-right":"1px solid gray"})),this.width=this.pageWidth,this.doublePage&&(this.width=2*(this.pageWidth+1)),this.map.css({width:this.width+"px"})),$(".map_img").css({width:this.pageWidth+"px",height:this.pageHeight+"px"}))},fillImage:function(i,t){i&&fillImageAfterLoaded(t,"thumb",function(t){i.attr("src",t)})},refreshArea:function(){if(this.book.showPage){var t=this.book.showPage,i=t.width(),e=t.height(),o=getTransform(t[0]),s=this.getBookPosition();!0==this.book.doublePage&&!1==this.doublePage&&(bookConfig.FlipDirection?(e/=2,t=BookInfo.getBook().getCurrentPageIndex(),BookInfo.isLeftPage(t,!0)||(s.top+=e)):(i/=2,t=BookInfo.getBook().getCurrentPageIndex(),BookInfo.isLeftPage(t,!0)||(s.left+=i)));var t=-(s.left+o.x),n=-(s.top+o.y),o=n/e,s=(t+windowWidth)/i,e=(n+windowHeight)/e,i=Math.max(0,t/i),o=Math.max(0,o),s=Math.min(1,s),e=Math.min(1,e),t=this.width;this.mapCursor.css({left:i*t,top:o*this.height,width:(s-i)*t,height:(e-o)*this.height})}},getBookPosition:function(){var t=this.book.showPage.css("left"),t=parseInt(t.replace("px","")),i=this.book.showPage.css("top"),i=parseInt(i.replace("px",""));return{left:t,top:i}},initEvent:function(){var t=new Hammer.Manager(this.mapCursor[0]);t.add(new Hammer.Pan);t.on("panstart panmove panend pancancel",this.onPan.bind(this));$(this.book.showPage).bind(_event._move,function(t){var i=BookInfo.getBook();if(i.status_zoom&&!this.book.showPage.parameters.zoomming&&i.controlBar&&i.controlBar.moveByMousePosition){var i=this.book.showPage,e=i.width(),o=i.height(),s=t.pageX;t=t.pageY;e=s-s*e/windowWidth;o=t-t*o/windowHeight;t={};t.origin=i.parameters.origin;t.scale=i.parameters.scale;e-=i.parameters.left;o-=i.parameters.top;t.tran={x:e,y:o};o=transformCSS(t);i.css(o);this.refreshArea()}}.bind(this))},onPan:function(t){if(t&&t.pointers&&1==t.pointers.length){var i=this.book.showPage.width()/this.width,e=this.book.showPage.height()/this.height,i=this.book.showPage.panForMove(this.book.showPage,-t.deltaX*i,-t.deltaY*e,!1);this.refreshArea();this.mapCursor.css({"background-color":"RGBA(245,225,135,0.8)",cursor:"move"});if("panend"==t.type||"pancancel"==t.type)this.mapCursor.css({"background-color":"RGBA(250,240,185,0.5)",cursor:"default"}),this.book.showPage.setZoomParameters(this.book.showPage,i),this.book.showPage.restrictInBoundary(this.book.showPage,this.refreshArea.bind(this))}}}),SlideBookPage=Class({onPageLoaded:null,create:function(t,i,e,o){this.pageHeight=this.pageWidth=this.height=this.width=this.zIndex=0;this.pageIndex=t;this.pageArray=[];this.bookType=e;this.onPageLoaded=o;this.side=$("<div class='slide_side'></div>");this.side.attr("id",i+t);this.init(t)},init:function(t){isNaN(t)||(this.pages=$("<div class='slide_pages'></div>"),this.initPages(t),this.setPageCss(),this.side.append(this.pages),this.initEvent())},initEvent:function(){this.adContainer&&this.adContainer.css({"z-index":1});isBelowIE9()?this.pages.IEZoom({side:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)}):this.pages.zoom({side:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)})},zoomIn:function(){var t=BookInfo.getBook();t.status_zoom=!0;t.adContainer&&t.adContainer.css({"z-index":1});StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(t){t.setAsZoomout();t.executeCallback()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1);if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion){var i=BookInfo.getCurrentPages();if(void 0!=i&&null!=i)for(var e=0;e<i.length;e++){var o=i[e];t.pageArray[o]&&t.pageArray[o].zoomInSideImage()}}}else this.switchLargeImage()},zoomOut:function(){var t=BookInfo.getBook();t.status_zoom=!1;t.flipping||!t.adContainer||1!=t.currentPageIndex||bookConfig.isTheBookOpen||t.adContainer.css({"z-index":3});gotoPageFun(t.toPageIndex);StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(t){t.setAsZoomin();t.executeCallback()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0);this.switchNormalImage()},onZoomed:function(t){if(!isPhone()&&!isPad()&&t&&!this.pages.parameters.resize){this.pages.parameters.resize=!0;t=this.pages.offset().left;var i=this.pages.offset().top;t-=this.pages.parameters.left;var i=i-this.pages.parameters.top,e=this.pages.parameters.scale;1!=e&&(this.resizePages(parseInt(this.pageWidth*e),parseInt(this.pageHeight*e)),e=1);e=transformCSS({tran:{x:t,y:i},scale:e,origin:{x:0,y:0}});this.pages.css(e);this.pages.parameters&&(this.pages.parameters.tran={x:t,y:i},this.pages.parameters.scale=1,this.pages.parameters.toScale=1,this.pages.parameters.width=$(this.pages).width(),this.pages.parameters.height=$(this.pages).height(),this.pages.parameters.origin={x:0,y:0},this.pages.parameters.resize=!1)}},initPages:function(t){t=bookConfig.isTheBookOpen?2*t:2*t-1;index2=t-1;var i=rightToLeft?t:index2;t=rightToLeft?index2:t;this.addPageArray([i,t]);this.leftPage=this.pageArray[i];this.rightPage=this.pageArray[t]},setPageCss:function(){var t=transformCSS({rotate:0,tran:{x:0,y:0}});!this.rightPage&&this.leftPage&&bookConfig.retainBookCenter&&bookConfig.showDoublePage?(this.leftPage.centerPage(),this.leftPage.setCSSByStyle(t)):!this.leftPage&&this.rightPage&&bookConfig.retainBookCenter?(this.rightPage.centerPage(),this.rightPage.setCSSByStyle(t)):(this.leftPage&&(this.leftPage.setLeftOrRight(!0),this.leftPage.setCSSByStyle(t)),this.rightPage&&(this.rightPage.setLeftOrRight(!1),this.rightPage.setCSSByStyle(t)))},addPageArray:function(t){if(t&&this.pageArray)for(var i=0;i<t.length;i++)if(!(0>=t[i]||t[i]>originTotalPageCount||(this.pageArray[t[i]]&&this.fillContent(t[i]),this.pageArray[t[i]]))){var e=new BookPage(t[i],"page",this.bookType,this.onPageLoaded);e.addAttachment();e.hideMiddleShadow();e.onResize(this.pageWidth,this.pageHeight);this.pageArray[t[i]]=e;this.fillContent(t[i]);this.pages.append(e.getSide())}},fillContent:function(t){this.pageArray[t]&&this.pageArray[t].fillContent()},fillImage:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].fillContent()},remove:function(){this.side.remove();this.side=void 0},setCSSByStyle:function(t){this.side.css(t)},setCSSByName:function(t){this.side.addClass(t)},onResize:function(t,i){this.width=t;this.height=i;this.resetPages()},resetPages:function(){if(this.pages){var t=fitPageWidthHeight(this.width,this.height,2*bookConfig.largePageWidth,bookConfig.largePageHeight),i=2*parseInt(t.x/2),t=parseInt(t.y);this.resizePages(i,t);this.pages.css({left:(this.width-i)/2+"px",top:(this.height-t)/2+"px"});i=transformCSS({rotate:0,tran:{x:0,y:0}});this.pages.css(i)}},resizePages:function(t,i){if(this.pages){this.pageWidth=t;this.pageHeight=i;this.pages.css({width:this.pageWidth+"px",height:this.pageHeight+"px"});for(var e=this.pageWidth/2,o=this.pageHeight,s=0;s<this.pageArray.length;s++)if(this.pageArray[s])this.pageArray[s].onResize(e,o)}},loading:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].loading()},setLeftOrRight:function(t){this.isLeft=t},reset:function(){},getSide:function(){return this.side},setZIndex:function(t){this.zIndex=t;this.side.css({"z-index":t})},getZIndex:function(){return this.zIndex},enterSide:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].enterSide()},leaveSide:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].leaveSide()},initSelectTextEvent:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].initSelectTextEvent()},destroySelect:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].destroySelect()},initMagnifierEvent:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].initMagnifierEvent()},destroyMagnifier:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].destroyMagnifier()},pauseAnimation:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].pauseAnimation()},startAnimation:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].startAnimation()},addHistoryTexts:function(t){for(var i=0;i<this.pageArray.length;i++)this.pageArray[i]&&this.pageArray[i].addHistoryTexts(t)},highlightSearch:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].highlightSearch()},clearHighlight:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].clearHighlight()},resetSlider:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].resetSlider()},fillPage:function(t,i){for(var e=0;e<this.pageArray.length;e++)this.pageArray[e]&&this.pageArray[e].fillPage(t,i)},zoomInSideImage:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].zoomInSideImage()},zoomOutSideImage:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].zoomOutSideImage()},switchLargeImage:function(){for(var t=0;t<this.pageArray.length;t++)this.pageArray[t]&&this.pageArray[t].switchLargeImage()},switchNormalImage:function(t){for(var i=0;i<this.pageArray.length;i++)this.pageArray[i]&&this.pageArray[i].switchNormalImage(t)}}),SingleSlideBookPage=Class({initPages:function(t){this.addPageArray([t]);this.page=this.pageArray[t]},resetPages:function(){if(this.pages){if(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad()))var t=this.width,i=this.height;else i=fitPageWidthHeight(this.width,this.height,bookConfig.largePageWidth,bookConfig.largePageHeight),t=parseInt(i.x),i=parseInt(i.y);this.resizePages(t,i);this.pages.css({left:(this.width-t)/2+"px",top:(this.height-i)/2+"px"});t=transformCSS({rotate:0,tran:{x:0,y:0}});this.pages.css(t)}},resizePages:function(t,i){if(this.pages){this.pageWidth=t;this.pageHeight=i;this.pages.css({width:this.pageWidth+"px",height:this.pageHeight+"px"});for(var e=this.pageWidth,o=this.pageHeight,s=0;s<this.pageArray.length;s++)if(this.pageArray[s])this.pageArray[s].onResize(e,o)}},setPageCss:function(){var t=transformCSS({rotate:0,tran:{x:0,y:0}});this.page&&(this.page.centerPage(),this.page.setCSSByStyle(t))},fillPage:function(t,i){this.page&&this.page.fillPage(t,i)}}).extend(SlideBookPage),SlideBook=Class({currentTran:0,create:function(t){this._super(t);this.currentPageIndex=this.getRealBookIndex(t.currentPageIndex);this.mainPageIndex=this.getRealBookIndex(t.currentPageIndex);this.initBook();this.initEvent()},initBook:function(){this.flipBook=$("<div class='SlideBook' id='SlideBook' ></div>");this.parent.append(this.flipBook);this.setCurrentIndexTextField()},getBook:function(){return this.flipBook},fillPage:function(t,i){if(t)for(var e=this.pageArray.length,o=0;o<e;o++)this.pageArray[o]&&this.pageArray[o].fillPage(t,i),this.pageBackArray&&this.pageBackArray[o]&&this.pageBackArray[o].fillPage(t,i)},resetPages:function(t){isNaN(t)||0>=t||(this.unWrapPageExcludeArray([t,t+1,t-1]),this.addPageArray([t,t+1,t-1]),this.loading(),this.currentPage=this.pageArray[t],this.nextPage=this.pageArray[t+1],this.previousPage=this.pageArray[t-1],this.setPageCss())},addPageArray:function(t){if(t&&this.pageArray){for(var i=0;i<t.length;i++)if(!(0>=t[i]||t[i]>this.pageLength()||(this.pageArray[t[i]]&&this.fillContent(t[i]),this.pageArray[t[i]]))){var e=this.newPage(t[i]);e.onResize(this.width,this.height);this.pageArray[t[i]]=e;this.fillContent(t[i]);this.flipBook.append(e.getSide())}this.orderPages()}},setPagePosition:function(t,i){if(bookConfig.FlipDirection)var e=i*windowHeight,e={top:e+"px"};else e=i*windowWidth,e={left:e+"px"};this.pageArray[t]&&this.pageArray[t].setCSSByStyle(e)},orderPages:function(){this.sequenceList={};for(var t=this.pageArray.length,i=0,e=this.mainPageIndex+1;e<t;e++)this.pageArray[e]&&(rightToLeft?i--:i++,this.pageArray[e].sequence=i,this.sequenceList[i]=e,this.setPagePosition(e,i));i=0;for(t=this.mainPageIndex;0<t;t--)this.pageArray[t]&&(this.pageArray[t].sequence=i,this.sequenceList[i]=t,this.setPagePosition(t,i),rightToLeft?i++:i--)},setPageCss:function(){var t=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&this.currentPage.setCSSByStyle(t);this.previousPage&&this.previousPage.setCSSByStyle(t);this.nextPage&&this.nextPage.setCSSByStyle(t)},fillContent:function(t){(!this.flipping||imageLoaded[t])&&this.pageArray[t]&&this.pageArray[t].fillImage()},newPage:function(t){return new SlideBookPage(t,"slidePage",this.bookType,this.onBookPageLoaded.bind(this))},pageLength:function(){return bookConfig.totalPageCount},unWrapPageExcludeArray:function(t){if(t&&this.pageArray){for(var i=this.pageArray.length,e=0;e<i;e++)!this.pageArray[e]||0<=t.indexOf(e)||(this.pageArray[e].remove(),this.pageArray[e]=void 0);this.orderPages()}},mouseWheelFlip:function(){if(bookConfig.mouseWheelFlip){var e;this.flipBook.bind(_event._mousewheel,function(t){var i;void 0!=e&&150>new Date-e?i=!1:(e=new Date,i=!0);if(!i)return!1;i=t.originalEvent;0>Math.max(-1,Math.min(1,i.wheelDelta||-i.detail))?nextPageFun():previousPageFun();stopEvent(t);return!1}.bind(this))}},flippingTo:function(t){this.currentPageIndex=t;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);this.setCurrentIndexTextField();setLocationHash(this.getRealPageIndex())},getRealPageIndex:function(){return this.currentPageIndex},getRealBookIndex:function(t){return t},gotoPage:function(t,i){if(!isNaN(t)){this.toPageIndex=t;if(this.status_zoom){var e={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]},o=this.pageArray[this.currentPageIndex].pages;o.onDoubleTap.bind(o)(e);return!0}t=this.getRealBookIndex(t);0>=t||t>this.pageLength()||!this.flipEffect(t)||(!i&&flipHistory&&flipHistory.addFromCurrentIndex(t),this.flippingTo(t),this.flipInterval&&this.flipInterval.stop(),this.refreshPages(t),this.flipIntervalTmp(t))}},flipEffect:function(t){return this.status_zoom||t==this.currentPageIndex||this.flipping?!1:!0},flipIntervalTmp:function(t){var o=this.currentTran,s=this.getFlipTo(t);this.flipping=!0;var e=function(t,i,e){t<i?(t=(0,$.easing["easeInOut"+e])(null,t,o,s-o,i),this.setBookTran(t)):(this.afterFlipTo(),this.flipInterval.stop())}.bind(this);this.flipInterval=function(t,i){e(t,i,"Sine")}.animation(this,this.flippingTime)},refreshPages:function(t){this.setAttachmentBeforeFlipTo(t);if(!this.pageArray[t]){var i=this.getCurrentViewPageIndex(),e=bookConfig.FlipDirection?this.currentTran-this.height:this.currentTran-this.width;(t>i||t<this.mainPageIndex)&&!rightToLeft&&(e=this.currentTran);(t<i||t>this.mainPageIndex)&&rightToLeft&&(e=this.currentTran);this.addPageArray([t]);this.setBookTran(e)}this.showPage=this.pageArray[t].pages},getCurrentViewPageIndex:function(){var t=Math.abs(this.currentTran),t=bookConfig.FlipDirection?Math.floor(t/this.height)+1+(t%this.height>this.height/2)?0:1:Math.floor(t/this.width)+1+(t%this.width>this.width/2)?0:1,t=(0>=this.currentTran?1:-1)*t;return this.sequenceList[t]},getFlipTo:function(t){return this.pageArray[t]&&this.pageArray[t].sequence?-this.pageArray[t].sequence*(bookConfig.FlipDirection?windowHeight:windowWidth):0},getCurrentTran:function(){return this.currentTran},setBookTran:function(t){if(bookConfig.FlipDirection){var i=transformCSS({rotate:0,tran:{x:0,y:t}});isBelowIE9()&&(i={top:t+"px"})}else i=transformCSS({rotate:0,tran:{x:t,y:0}}),isBelowIE9()&&(i={left:t+"px"});this.setCSSByStyle(i);this.currentTran=t},onResize:function(){this.resize();this.status_zoom=!1;this.showPage=this.pageArray[this.currentPageIndex].pages},resize:function(){this.endFlip();this.resizeBook();this.resizePage(this.width,this.height);this.resetPages(this.currentPageIndex);this.resizeAdvertisement()},getTop:function(){return this.bookTop},resizeBook:function(){var t=global.toolBar&&global.toolBar.getHeight?global.toolBar.getHeight():0,i=global.toolBar&&global.toolBar.getTopHeight?global.toolBar.getTopHeight():0;this.width=windowWidth-bookConfig.leftMargin-bookConfig.leftMargin;this.height=windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-t;this.bookTop=bookConfig.topMargin+i;this.flipBook.css({width:this.width+"px",height:this.height+"px",left:bookConfig.leftMargin+"px",top:bookConfig.topMargin+i+"px"})},resizeAdvertisement:function(){var t=fitPageWidthHeight(this.width,this.height,2*bookConfig.largePageWidth,bookConfig.largePageHeight);this.pageWidth=2*parseInt(t.x/2);this.pageHeight=parseInt(t.y);this.adContainer&&(t=(this.width-this.pageWidth)/2,rightToLeft&&(t+=this.pageWidth/2),this.adContainer.css({left:t+"px",top:(this.height-this.pageHeight)/2+this.getTop()+"px",width:this.pageWidth/2+"px",height:this.pageHeight+"px"}));this.adInstance&&this.adInstance.resize()},resizePage:function(t,i){for(var e=this.pageArray.length,o=0;o<e;o++)if(this.pageArray[o])this.pageArray[o].onResize(t,i)},getPageWidth:function(t){if(void 0==t)return this.pageWidth/2;this.pageWidth=t},getPageHeight:function(t){if(void 0==t)return this.pageHeight;this.pageHeight=t},getHeight:function(){return this.height},getWidth:function(){return this.width},getScale:function(){return this.currentPage.pages.parameters.toScale},insertStaticAd:function(){var t=this.flipBook.css("left"),t=parseInt(t.replace("px","")),i=this.flipBook.css("top"),e=this.flipBook.css("width"),e=parseInt(e.replace("px",""));rightToLeft&&(t+=e/2);this.adContainer=$("<div id='adContainer'></div>");this.adContainer.css({position:"absolute","z-index":-1});this.adContainer.css({left:t+"px",top:i});this.adInstance=new HTML5AdSlider(this.adContainer,{paddingLeft:30,paddingTop:30,paddingRight:30,paddingBottom:30,loop:!1,timeout:2e3,effectDuration:1e3,data:staticAd.data});bookContainer.append(this.adContainer);this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.css({"z-index":3})},checkFlipping:function(){this.flipping=!1;this.loading();this.fillContent(this.currentPageIndex)},afterFlipTo:function(){this.mainPageIndex=this.currentPageIndex;this.resetPages(this.currentPageIndex);this.setBookTran(0);this.startTran=this.currentTran;this.checkFlipping();this.setAttachmentAfterFlipTo()},setAttachmentBeforeFlipTo:function(){this.adContainer&&this.adContainer.css({"z-index":1})},setAttachmentAfterFlipTo:function(){this.stopMedia();this.resetSlider();this.flipping||(this.openShownMedia(),this.addHistoryTexts(),this.addSearchHighlight());bookConfig.ThumbnailsButtonVisible&&thumbnail.clearHighLight();bookConfig.ThumbnailsButtonVisible&&thumbnail.setHighLight(this.getRealPageIndex());resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.css({"z-index":3})},endFlip:function(){this.flipping=!1},loading:function(){this.flipping||this.pageArray[this.currentPageIndex]&&this.pageArray[this.currentPageIndex].loading()},getCurrentPageIndex:function(){return this.getRealPageIndex()},getCurrentPages:function(){return[this.currentPageIndex]},setCSSByStyle:function(t){this.flipBook.css(t)},setShow:function(t){},hide:function(){Log.debug("slide book hide.");this.visible=!1;this.setCSSByStyle({display:"none"});this.stopMedia();this.resetSlider()},show:function(){Log.debug("slide book show.");this.visible=!0;this.setCSSByStyle({display:"block"});this.openShownMedia();this.addHistoryTexts();this.addSearchHighlight()},addHistoryTexts:function(){var t=this.currentPageIndex;this.pageArray[t]&&this.pageArray[t].addHistoryTexts()},addSearchHighlight:function(){var t=this.currentPageIndex;this.pageArray[t]&&this.pageArray[t].highlightSearch()},clearSearchHighlight:function(){for(var t=this.pageArray.length,i=0;i<t;i++)this.pageArray[i]&&this.pageArray[i].clearHighlight()},openShownMedia:function(){var t=this.currentPageIndex;this.pageArray[t]&&this.pageArray[t].enterSide()},stopMedia:function(){for(var t=this.pageArray.length,i=0;i<t;i++)this.pageArray[i]&&this.pageArray[i].leaveSide()},resetSlider:function(){for(var t=this.pageArray.length,i=0;i<t;i++)this.pageArray[i]&&this.pageArray[i].resetSlider()},select:function(){this.selected=!0;var t=this.currentPageIndex;this.pageArray[t]&&(this.pageArray[t]&&this.pageArray[t].initSelectTextEvent(),this.pageArray[t].pages.parameters&&(this.pageArray[t].pages.parameters.eventCancel=!0))},unSelect:function(){this.selected=!1;var t=this.getCurrentPages();if(void 0!=t&&null!=t){for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&(this.pageArray[e]&&this.pageArray[e].destroySelect(),this.pageArray[e].pages.parameters&&(this.pageArray[e].pages.parameters.eventCancel=!1))}StateSynchronous.instance().findButtons("SelectTextButton",!0).each(function(t){t.setAsUnSelect();t.executeCallback()})}},magnifierZoom:function(){this.selected=!0;var t=this.currentPageIndex;this.pageArray[t]&&this.pageArray[t]&&this.pageArray[t].initMagnifierEvent()},unMagnifierZoom:function(){this.selected=!1;var t=BookInfo.getCurrentPages();if(void 0!=t&&null!=t){for(var i=0;i<t.length;i++){var e=t[i];this.pageArray[e]&&this.pageArray[e]&&this.pageArray[e].destroyMagnifier()}bookConfig.MagnifierButtonVisible&&window.magnifierZoomBox&&window.magnifierZoomBox.hide();StateSynchronous.instance().findButtons("magnifier",!0).each(function(t){t.setAsZoomin()})}},switchLargeImage:function(){for(var t=this.pageArray.length,i=0;i<t;i++)this.pageArray[i]&&this.pageArray[i].switchLargeImage()},switchNormalImage:function(t){for(var i=this.pageArray.length,e=0;e<i;e++)this.pageArray[e]&&this.pageArray[e].switchNormalImage(t)},destroy:function(){}}).extend(Book);SlideBook.expand({initEvent:function(){this.moveDirectionType={MOVE_LEFT:-1,MOVE_RIGHT:1,MOVE_NONE:0};this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.hammerEventModular();this.mouseWheelFlip()},hammerEventModular:function(){var t=new Hammer.Manager(this.flipBook[0]);t.add(new Hammer.Pan);t.add((new Hammer.Swipe).recognizeWith(t.get("pan")));t.add(new Hammer.Press({time:"1000"}));t.add(new Hammer.Pinch);t.add(new Hammer.Tap({event:"doubletap",taps:2}));t.add(new Hammer.Tap);t.on("panstart panmove",this.onPan.bind(this));t.on("press",this.onPress.bind(this));t.on("tap",this.onTap.bind(this));this.flipBook.bind("mouseover mousemove",this.onOver.bind(this));this.flipBook.bind(_event._down,this.onDown.bind(this));$("body").bind(_event._end+" "+_event._leave,this.onUp.bind(this));this.flipBook.speed(this.onSwipe.bind(this))},onPan:function(t){this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||("panstart"==t.type&&(this.startTran=this.currentTran,this.panstart=!0),this.panstart&&(bookConfig.FlipDirection||bookConfig.upsideOnMobile()?this.setBookTran(this.startTran+t.deltaY):this.setBookTran(this.startTran+t.deltaX),"panend"==t.type&&(this.panstart=!1)))},onPress:function(t){},onTap:function(t){onWindowTap(t.srcEvent)},onOver:function(t){},onDown:function(t){this.fingleDown=!0},onUp:function(t){!this.flipping&&this.fingleDown&&(30<=Math.abs(this.currentTran-this.startTran)&&(this.currentTran>this.startTran&&!rightToLeft||this.currentTran<this.startTran&&rightToLeft?previousPageFun():this.currentTran!=this.startTran&&nextPageFun()),this.startTran=this.currentTran,this.panstart=this.fingleDown=!1,this.onBack())},onBack:function(){if(0!=this.currentTran&&!this.flipping){this.flipping=!0;var o=this.currentTran,e=function(t,i,e){t<i?(t=(0,$.easing["easeInOut"+e])(null,t,o,0-o,i),this.setBookTran(t)):(this.flipping=!1,this.flipInterval.stop(),this.setBookTran(0),this.startTran=this.currentTran)}.bind(this);this.flipInterval=function(t,i){e(t,i,"Sine")}.animation(this,this.flippingTime)}},getNextPage:function(){this.currentTran>this.startTran&&!rightToLeft||this.currentTran<this.startTran&&rightToLeft?previousPageFun():nextPageFun()},onSwipe:function(t,i){if(!(this.selected||this.status_zoom||this.isZomming||this.dragToFlip)){var e=30,o;bookConfig.FlipDirection?(e=e*this.height/1600,o=i):(e=e*this.width/1600,o=t);Math.abs(o)<=e||(o<-e?rightToLeft?previousPageFun():nextPageFun():o>e&&(rightToLeft?nextPageFun():previousPageFun()))}}});var DoubleSlideBook=Class({getRealPageIndex:function(){var t=2*this.currentPageIndex-1;return t=Number.between(t,1,bookConfig.totalPageCount)},getRealBookIndex:function(t){t=bookConfig.isTheBookOpen?Math.ceil(t/2):parseInt(t/2)+1;return t=Number.between(t,1,this.pageLength())},setCurrentIndexTextField:function(){setCurrentIndexTextField(this.getRealPageIndex(),!0)},pageLength:function(){return bookConfig.isTheBookOpen?Math.ceil(bookConfig.totalPageCount/2):parseInt(bookConfig.totalPageCount/2)+1},newPage:function(t){return new SlideBookPage(t,"slidePage",this.bookType,this.onBookPageLoaded.bind(this))}}).extend(SlideBook),SingleSlideBook=Class({getRealPageIndex:function(){var t=this.currentPageIndex;return t=Number.between(t,1,bookConfig.totalPageCount)},getRealBookIndex:function(t){return t=Number.between(t,1,bookConfig.totalPageCount)},setCurrentIndexTextField:function(){setCurrentIndexTextField(this.getRealPageIndex(),!1)},pageLength:function(){return bookConfig.totalPageCount},newPage:function(t){return new SingleSlideBookPage(t,"slidePage",this.bookType,this.onBookPageLoaded.bind(this))}}).extend(SlideBook),PcDoubleSlideBook=Class({bookType:BookType.slide_book,create:function(t){this._super(t)},initBook:function(){this._super();void 0!=global.staticAd&&!0==staticAd.haveAd&&this.insertStaticAd()}}).extend(DoubleSlideBook),PcSingleSlideBook=Class({bookType:BookType.singleSlide_book,create:function(t){this._super(t)}}).extend(SingleSlideBook),CatalogBook=Class({bookType:BookType.catalog_book,guidBarHeight:0,create:function(t){this._super(t)},initAttachments:function(){this._super();this.flipShotBarManager=new FlipShotBarManager(this.flipBook,this);this.flipShotBarManager.appendTo(this.flipBook);this.flipShotBarManager.refresh()},newPage:function(t){return 1!=t&&2!=t&&t!=totalPageCount&&t!=totalPageCount-1||!bookConfig.HardPageEnable?bookConfig.HardInnerPageEnable?new AlbumSide(t,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):new NormalPage(t,"page",!1,BookType.catalog_book,this.onBookPageLoaded.bind(this)):new HardSide(t,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this))},setAttachmentBeforeFlipTo:function(t){this._super(t);this.flipShotBarManager.setVisibleByIndex(t)},setAttachmentAfterFlipTo:function(t){this._super(t);this.flipShotBarManager.refresh()},afterCurling:function(){this._super();this.flipShotBarManager.refresh()},resizeAttachmentAfterZoomIn:function(t){this._super(t);this.flipShotBarManager.resizeAttachment(this.width,this.height,t)},getControlBarTop:function(){return"lite"==bookConfig.ToolbarViewMode.toLowerCase()?50:global.toolBar&&toolBar.getTopHeight?toolBar.getTopHeight()+5:5},beforeZoomIn:function(){this._super();thumbnail&&thumbnail.visible&&thumbnail.transparent&&thumbnail.transparent()},resetZoomConfig:function(){this._super();thumbnail&&thumbnail.visible&&thumbnail.noTransparent&&thumbnail.noTransparent()},onResize:function(t,i){this._super(t,i);this.flipShotBarManager.onResize(t,i)},getSpace:function(t){var i=bookConfig.leftMargin+toolBar.getLeftWidth(),e=bookConfig.rightMargin+toolBar.getRightWidth(),o=bookConfig.topMargin+toolBar.getTopHeight(),s=bookConfig.bottomMargin+toolBar.getBottomHeight();t&&(i+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),e+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),o+=bookConfig.hardCoverBorderWidth,s+=bookConfig.hardCoverBorderWidth);return{left:i,right:e,top:o,bottom:s}}}).extend(NormalBook),CatalogHardBook=Class({bookType:BookType.catalog_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},toSoftPage:function(t){if(bookConfig.HardInnerPageEnable)return!1;var i=this.currentPageIndex;if(0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t))return!1;0>[1,totalPageCount].indexOf(i)&&[1,totalPageCount].indexOf(t);return!0},toHardPage:function(t){if(!bookConfig.HardInnerPageEnable)return!1;var i=this.currentPageIndex;if(0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t))return!1;0>[1,totalPageCount].indexOf(i)&&[1,totalPageCount].indexOf(t);return!0},isHardPage:function(t,i){return bookConfig.HardInnerPageEnable&&1!=t&&2!=t&&t!=totalPageCount&&t!=totalPageCount-1?!0:!1},toCoverPage:function(t){var i=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(i)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(t)||0<=[2,3].indexOf(i)&&0>[1,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},isCoverPage:function(t,i){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount?gotoPageFun(totalPageCount-1):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(t){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):bookConfig.HardInnerPageEnable?new AlbumSide(t,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):new NormalPage(t,"page",!1,BookType.catalog_book,this.onBookPageLoaded.bind(this))},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!0),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!1),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-left-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-right-side")):(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!1),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!0),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-right-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-left-side"));return[this.pageArray[t],this.pageArray[i]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager.getThicknessWidth()},onResize:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(CatalogBook),OpenCatalogHardBook=Class({crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||totalPageCount!=i&&totalPageCount!=t?!1:!0},toSoftPage:function(t){return bookConfig.HardInnerPageEnable||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)?!1:!0},toHardPage:function(t){return!bookConfig.HardInnerPageEnable||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)?!1:!0},toCoverPage:function(t){return totalPageCount!=this.currentPageIndex&&totalPageCount!=t?!1:!0},isHardPage:function(t,i){return bookConfig.HardInnerPageEnable&&t!=totalPageCount&&t!=totalPageCount-1?!0:!1},isCoverPage:function(t,i){return t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(t){return 1==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):bookConfig.HardInnerPageEnable?new AlbumSide(t,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):new NormalPage(t,"page",!1,BookType.catalog_book,this.onBookPageLoaded.bind(this))}}).extend(CatalogHardBook),CatalogSimpleBook=Class({create:function(t){this._super(t)},initBook:function(){this._super();this.guidBar=new GuidToolbar(this.parent);this.guidBarHeight=50},showOrHideLiteThumbnail:function(){this.flipPageManager.array&&0<this.flipPageManager.array.length||this.status_zoom||!0!=this.isFlipping&&!0!=this.isZomming&&this.adjustBookPosition()},hideToolBarAndShowGuidBar:function(){this.status_zoom||!0==this.isFlipping||!0==this.isZomming||(this.guidBar&&this.guidBar.show(),toolBar&&toolBar.hide(),this.mode="simple",thumbnail&&thumbnail.visible&&thumbnail.show(),this.adjustBookPosition())},hideGuidBarAndShowToolBar:function(){this.status_zoom||!0==this.isFlipping||!0==this.isZomming||(this.guidBar&&this.guidBar.hide(),toolBar&&toolBar.show(),this.mode="complex",thumbnail&&thumbnail.visible&&thumbnail.show(),this.adjustBookPosition())},adjustBookPosition:function(){this.pageWidthHeight=this.getFitWH();var t=this.getTranY(),i=this.pageWidthHeight.x/this.width,e=this.getTranX(i);this.pageWidthHeight.x==this.width&&0==t&&0==e||this.flipBook.animateToTransform.bind(this.flipBook)(i,{x:e,y:t},{x:50,y:0})},getTranX:function(t){if(!bookConfig.retainBookCenter)return 0;var i=0;t=this.width*t/4;1!=this.currentPageIndex||bookConfig.isTheBookOpen||(i=rightToLeft?t:-t);this.currentPageIndex==totalPageCount&&(i=rightToLeft?-t:t);t=this.getCssLeft();var e=this.getSpace(!0);return i=e.left+(windowWidth-e.left-e.right-this.width)/2-t+i},getTranY:function(){var t=this.getCssTop(),i=this.getSpace(!0);return i.top+(windowHeight-i.top-i.bottom-this.pageWidthHeight.y)/2-t},getSpace:function(t){var i=bookConfig.leftMargin+toolBar.getLeftWidth(),e=bookConfig.rightMargin+toolBar.getRightWidth(),o=bookConfig.topMargin+(toolBar.visible?toolBar.getTopHeight():this.guidBarHeight),s=bookConfig.bottomMargin+toolBar.getBottomHeight();t&&(i+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),e+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),o+=bookConfig.hardCoverBorderWidth,s+=bookConfig.hardCoverBorderWidth);return{left:i,right:e,top:o,bottom:s}}}).extend(CatalogBook),CatalogSimpleHardBook=Class({bookType:BookType.catalog_book,create:function(t){this._super(t)},crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},toSoftPage:function(t){var i=this.currentPageIndex;if(0<=[1,2,3].indexOf(i)&&0<=[1,2,3].indexOf(t)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t))return!1;0>[1,totalPageCount].indexOf(i)&&[1,totalPageCount].indexOf(t);return!0},toHardPage:function(t){return!1},toCoverPage:function(t){var i=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(i)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(t)||0<=[2,3].indexOf(i)&&0>[1,totalPageCount].indexOf(t)||0>[1,totalPageCount].indexOf(i)&&0>[1,totalPageCount].indexOf(t)?!1:!0},isHardPage:function(t,i){return!1},isCoverPage:function(t,i){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount?gotoPageFun(totalPageCount-1):1==t&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(t){return 1==t||2==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):bookConfig.HardInnerPageEnable?new AlbumSide(t,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):new NormalPage(t,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(t,i,e){this._super(t,i,e);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(t,i,e){this.addPageArray([t,i]);e?(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!0),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!1),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-left-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-right-side")):(this.pageArray[t]&&this.pageArray[t].setLeftOrRight(!1),this.pageArray[i]&&this.pageArray[i].setLeftOrRight(!0),this.pageArray[t]&&this.pageArray[t].setCSSByName("flip-hard-right-side"),this.pageArray[i]&&this.pageArray[i].setCSSByName("flip-hard-left-side"));return[this.pageArray[t],this.pageArray[i]]},setAttachmentBeforeFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(t,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(t){this._super(t);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager.getThicknessWidth()},onResize:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(t,i){this._super(t,i);this.hardCover.onResize(t,i,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(CatalogSimpleBook),OpenCatalogSimpleHardBook=Class({crossFlipMode:function(t){var i=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(i)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)||totalPageCount!=i&&totalPageCount!=t?!1:!0},toSoftPage:function(t){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(t)?!1:!0},toCoverPage:function(t){return totalPageCount!=this.currentPageIndex&&totalPageCount!=t?!1:!0},isCoverPage:function(t,i){return t==totalPageCount||t==totalPageCount-1?!0:!1},gotoNearPage:function(t){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):t==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(t){return 1==t||t==totalPageCount||t==totalPageCount-1?new HardSide(t,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):bookConfig.HardInnerPageEnable?new AlbumSide(t,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):new NormalPage(t,"page",!1,BookType.catalog_book,this.onBookPageLoaded.bind(this))}}).extend(CatalogSimpleHardBook);var AnnotationPannel=Class({statics:{NONE:0,NOTE:1,PEN:2,RECT:3,ROUND:4,ERASER:5},create:function(t){t&&(this.annoStepCookie=[],this.annoCurrentStep=-1,this.parent=t,this.book=BookInfo.getBook().showPage,this.selectCase=AnnotationPannel.NONE,this.initHtml(),this.initCss(),this.selectCaseEvent(),this.initEvent())},initHtml:function(){this.panel=$("<div class='annotationPanel'></div>");this.annoBtnBox=$("<div class='annoBtnBox'></div>");this.bottomBox=$("<div class='bottomBox'></div>");this.moveBar=$("<div class='noteMoveBar'><img /></div>");this.note=$("<div title='"+getLanguage("DrawToolWindow_TextNote","Note")+"' class='noteAdd' ><img /></div>");this.pen=$("<div title='"+getLanguage("DrawToolWindow_Brush","Brush")+"' class='notePen'><img /></div>");this.rect=$("<div title='"+getLanguage("DrawToolWindow_Rectangular","Rectangular")+"' class='noteRect'><img /></div>");this.round=$("<div title='"+getLanguage("DrawToolWindow_Ellipse","Ellipse")+"' class='noteRound'><img /></div>");this.eraser=$("<div title='"+getLanguage("DrawToolWindow_Eraser","Eraser")+"' class='noteEraser'><img /></div>");this.point=$("<div class='noteCursor' ><img /></div>");this.clear=$("<div title='"+getLanguage("DrawToolWindow_Clear","Clear")+"' class='noteClear'><img /></div>");this.undo=$("<div title='"+getLanguage("DrawToolWindow_Undo","Undo")+"' class='noteUndo'><img /></div>");this.redo=$("<div title='"+getLanguage("DrawToolWindow_Redo","Redo")+"' class='noteRedo'><img /></div>");this.exit=$("<div title='"+getLanguage("FlipPageEditor_Exit","Exit")+"' class='noteExit'><img /></div>");this.save=$("<div title='"+getLanguage("FlipPageEditor_SaveAndExit","SaveAndExit")+"' class='noteSave'><img /></div>");this.annoBtnBox.append(this.note).append(this.pen).append(this.rect).append(this.round).append(this.eraser).append(this.point).append(this.clear).append(this.undo).append(this.redo).append(this.exit).append(this.save);this.initBottomHtml();this.panel.append(this.moveBar).append(this.annoBtnBox).append(this.bottomBox);this.parent.append(this.panel);this.setBtnSrc()},setBtnSrc:function(){for(var t=[this.moveBar,this.note,this.pen,this.rect,this.round,this.eraser,this.point,this.clear,this.undo,this.redo,this.exit,this.save],i=0;i<t.length;i++)this.setSrc(t[i].find("img"),t[i].attr("class"))},setSrc:function(t,i){form_icons&&form_icons[i]?t.attr("src","data:image/png;base64,"+form_icons[i]):t.attr("src",uiBaseURL+i+".png");t.css({width:"100%",height:"100%"})},initBottomHtml:function(){this.selColor="#FF0000";this.helixColors="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" ");this.eraserBox=$("<div class='eraserBox' style='display:none;margin:5px 0'></div>");this.eraserWidth=$("<span class='eraserWidth' style='font-size:13px;margin-left:4px;margin-right:5px;'>"+getLanguage("DrawToolWindow_Width","Width")+"</span>");this.inputEraserWidth=$("<input class='eraserInput'  style='width:40px;display:inline-block' type='number' step='1' min='1' value='30' />");this.widthBox=$("<div class='widthBox' style='display:none;margin:5px 0'></div>");this.setWidth=$("<span class='setWidth' style='font-size:13px;margin-left:4px;margin-right:5px;'>Width</span>");this.inputWidth=$("<input  style='width:40px;display:inline-block' type='number' step='1' min='1' value='3' />");this.alphaBox=$("<div class='alphaBox' style='display:none;margin:5px 0''></div>");this.setAplha=$("<span class='setAplha' style='font-size:13px;margin-left:4px;margin-right:5px;'>Alpha</span>");this.inputAlpha=$("<input style='width:50px;display:inline-block' type='number' step='1' value='100' min='0' max='100' />");this.colorBox=$("<div class='colorBox' style='position:relative;display:none;margin:5px 0''></div>");this.setColor=$("<span class='setColor'  style='font-size:13px;margin-left:4px;margin-right:5px;'>color</span>");this.inputColor=$("<input style='width:70px;display:inline-block' value='"+this.selColor+"'/>");this.showColor=$("<div class='showColor' style='cursor:pointer;background:"+this.selColor+";vertical-align:middle;display:inline-block;width:19px;height:19px;margin-left:2px;'></div>");this.colorTable=$("<div class='colorTable' style='display:none;background:#191;width:191px;height:134px;position:absolute;top:28px;'></div>");this.showColor.bind(_event._click,function(){"none"==this.colorTable.css("display")?this.colorTable.css({display:"block"}):this.colorTable.css({display:"none"})}.bind(this));this.colorTable.bind(_event._click,function(){this.colorTable.css({display:"none"})}.bind(this));this.eraserBox.append(this.eraserWidth).append(this.inputEraserWidth);this.widthBox.append(this.setWidth).append(this.inputWidth);this.alphaBox.append(this.setAplha).append(this.inputAlpha);this.colorBox.append(this.setColor).append(this.inputColor).append(this.showColor).append(this.colorTable);this.bottomBox.append(this.eraserBox).append(this.widthBox).append(this.alphaBox).append(this.colorBox);this.tableColor()},setPanelIndex:function(t,i,e){t||(t=0);i||(i=0);this.book=BookInfo.getBook().showPage;for(var o=BookInfo.getCurrentPages(),s=0;s<o.length;s++)this.book.find("#annotationPage"+o[s]).css({"pointer-events":e}),this.book.find("#annotationCvsPanel"+o[s]).css({"z-index":t}),this.book.find("#annotationDraw"+o[s]).css({"z-index":i})},selectCaseEvent:function(){this.defaultCaseEvent();this.note.bind(_event._click,function(t){t.stopPropagation();this.selectCase!=AnnotationPannel.NOTE?(this.selectCase=AnnotationPannel.NOTE,this.setPanelIndex(0,0,"auto"),this.note.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.setPanelIndex(0,0,"none"),this.selectCase=AnnotationPannel.NONE);this.bottomBox.css({display:"none"})}.bind(this));this.pen.bind(_event._click,function(t){t.stopPropagation();this.selectCase!=AnnotationPannel.PEN?(this.selectCase=AnnotationPannel.PEN,this.setPanelIndex(2,0,"auto"),this.pen.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.selectCase=AnnotationPannel.NONE,this.setPanelIndex(0,0,"none"));this.bottomBox.css({display:"block"});this.eraserBox.css({display:"none"});this.widthBox.css({display:"inline-block"});this.alphaBox.css({display:"inline-block"});this.colorBox.css({display:"inline-block"});this.setWidth.text(getLanguage("DrawToolWindow_Width","Width"));this.setAplha.text(getLanguage("DrawToolWindow_Alpha","Alpha"));this.setColor.text(getLanguage("DrawToolWindow_Color","Color"))}.bind(this));this.rect.bind(_event._click,function(t){t.stopPropagation();this.selectCase!=AnnotationPannel.RECT?(this.selectCase=AnnotationPannel.RECT,this.setPanelIndex(2,3,"auto"),this.rect.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.selectCase=AnnotationPannel.NONE,this.setPanelIndex(0,0,"none"));this.bottomBox.css({display:"block"});this.eraserBox.css({display:"none"});this.widthBox.css({display:"inline-block"});this.alphaBox.css({display:"inline-block"});this.colorBox.css({display:"inline-block"});this.setWidth.text(getLanguage("TStuff_BorderWidth","Border Width"));this.setAplha.text(getLanguage("TStuff_BorderAlph","Border Alpha"));this.setColor.text(getLanguage("TStuff_BorderColor","Border Color"))}.bind(this));this.round.bind(_event._click,function(t){t.stopPropagation();this.selectCase!=AnnotationPannel.ROUND?(this.selectCase=AnnotationPannel.ROUND,this.setPanelIndex(2,3,"auto"),this.round.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.selectCase=AnnotationPannel.NONE,this.setPanelIndex(0,0,"none"));this.bottomBox.css({display:"block"});this.eraserBox.css({display:"none"});this.widthBox.css({display:"inline-block"});this.alphaBox.css({display:"inline-block"});this.colorBox.css({display:"inline-block"});this.setWidth.text(getLanguage("TStuff_BorderWidth","Border Width"));this.setAplha.text(getLanguage("TStuff_BorderAlph","Border Alpha"));this.setColor.text(getLanguage("TStuff_BorderColor","Border Color"))}.bind(this));this.eraser.bind(_event._click,function(t){t.stopPropagation();this.selectCase!=AnnotationPannel.ERASER?(this.selectCase=AnnotationPannel.ERASER,this.setPanelIndex(2,0,"auto"),this.eraser.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.setPanelIndex(0,0,"none"),this.selectCase=AnnotationPannel.NONE);this.bottomBox.css({display:"block"});this.eraserBox.css({display:"inline-block"});this.widthBox.css({display:"none"});this.alphaBox.css({display:"none"});this.colorBox.css({display:"none"})}.bind(this));this.point.bind(_event._click,function(t){t.stopPropagation();this.setPanelIndex(0,0,"none");this.selectCase=AnnotationPannel.NONE;this.bottomBox.css({display:"none"})}.bind(this));this.clear.bind(_event._click,function(t){t.stopPropagation();t=BookInfo.getCurrentPages();this.selectCase=AnnotationPannel.NONE;this.setPanelIndex(0,0,"none");for(var i=0;i<t.length;i++){var e=this.book.find("#annotationCvsPanel"+t[i])[0].getContext("2d");e.beginPath();e.stroke();e.clearRect(0,0,BookInfo.getBook().pageWidth,BookInfo.getBook().pageHeight);e.closePath()}global.annotationCookie.setAllAnnoSteps(11,t.map(function(t){return t-1}),[{type:"Clear"}]);global.annotationCookie.stepIndex+=1}.bind(this));this.exit.bind(_event._click,function(t){t.stopPropagation();this.hide();t=BookInfo.getCurrentPages();for(var i=0;i<t.length;i++)global.annotationCookie.repaintCookie("",t[i]-1)}.bind(this));this.save.bind(_event._click,function(t){t.stopPropagation();global.annotationCookie.saveCookie();this.hide()}.bind(this));this.undoEvent();this.redoEvent()},undoEvent:function(){this.undo.bind(_event._click,function(t){t.stopPropagation();this.setPanelIndex(0,0,"none");this.selectCase=AnnotationPannel.NONE;global.annotationCookie.stepIndex-=1;0>=global.annotationCookie.stepIndex&&(global.annotationCookie.stepIndex=0);global.annotationCookie.repaintSteps()}.bind(this))},redoEvent:function(){this.redo.bind(_event._click,function(t){t.stopPropagation();this.setPanelIndex(0,0,"none");this.selectCase=AnnotationPannel.NONE;global.annotationCookie.stepIndex+=1;global.annotationCookie.stepIndex>=global.annotationCookie.allAnnoSteps.length&&(global.annotationCookie.stepIndex=global.annotationCookie.allAnnoSteps.length);global.annotationCookie.repaintSteps()}.bind(this))},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},defaultCaseEvent:function(){this.annoBtnBox.find("div").bind(_event._click,function(t){t.stopPropagation();t=t.target;"img"==t.tagName.toLowerCase()&&(t=$(t).parent());$(t).siblings().css({background:"transparent",border:"1px solid transparent"})}.bind(this));this.annoBtnBox.find("div").bind(_event._down,function(t){t.stopPropagation();t=t.target;"img"==t.tagName.toLowerCase()&&(t=$(t).parent());$(t).css({border:"1px solid #999999",background:"#B2B2B2"})}.bind(this));this.annoBtnBox.find("div").bind(_event._up,function(t){t.stopPropagation();t=t.target;"img"==t.tagName.toLowerCase()&&(t=$(t).parent());$(t).css({background:"transparent",border:"1px solid transparent"})}.bind(this))},tableColor:function(){for(var t=$("<table border='1' style='border-collapse:collapse'></table>"),i=0;7>i;i++){for(var e=$("<tr></tr>"),o=0;10>o;o++){var s=$("<td title='"+this.helixColors[10*i+o]+"' style='width:16px;height:16px;background:"+this.helixColors[10*i+o]+"'></td>");(function(t,i){i.bind(_event._enter,function(){t.inputColor.val(i.attr("title"));t.showColor.css({background:i.attr("title")})}.bind(t))})(this,s);(function(t,i){i.bind(_event._click,function(){t.selColor=i.attr("title");t.inputColor.val(t.selColor);t.showColor.css({background:t.selColor})}.bind(t))})(this,s);(function(t,i){t.colorTable.bind(_event._leave,function(){t.inputColor.val(t.selColor);t.showColor.css({background:t.selColor})}.bind(t))})(this,s);e.append(s)}t.append(e)}this.colorTable.append(t)},initCss:function(){var t=344<=windowWidth?1:windowWidth/344;this.panel.css({display:"none",background:"#BFBFBE",position:"absolute",width:"344px",height:"auto","min-height":"62px","border-radius":"1px",top:"100px",left:(0>windowWidth-344?0:(windowWidth-344)/2)+"px","-webkit-transform":"scale("+t+")","-moz-transform":"scale("+t+")","-o-transform":"scale("+t+")","-ms-transform":"scale("+t+")",transform:"scale("+t+")","-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0","z-index":"10000"});this.annoBtnBox.css({position:"relative","border-bottom":"1px solid #ACACAB",width:"324px",height:"28px",top:"1px",left:"20px"});this.bottomBox.css({"vertical-align":"middle",width:"322px",left:"22px",height:"auto","font-family":"Tahoma , sans-serif , Arial",position:"relative",top:"0px"});this.moveBar.css({cursor:"move",width:"16px",height:"34px",position:"absolute","padding-left":"5px",top:"14px"});this.moveBar.find("img").css({width:"9px",height:"34px"});this.note.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"4px",top:"1px",border:"1px solid transparent"});this.pen.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"33px",top:"1px",border:"1px solid transparent"});this.rect.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"62px",top:"1px",border:"1px solid transparent"});this.round.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"91px",top:"1px",border:"1px solid transparent"});this.eraser.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"120px",top:"1px",border:"1px solid transparent"});this.point.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"149px",top:"1px",border:"1px solid transparent"});this.clear.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"178px",top:"1px",border:"1px solid transparent"});this.undo.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"207px",top:"1px",border:"1px solid transparent"});this.redo.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"236px",top:"1px",border:"1px solid transparent"});this.exit.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"265px",top:"1px",border:"1px solid transparent"});this.save.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"294px",top:"1px",border:"1px solid transparent"})},initEvent:function(){this.panel.bind("pointerdown mouseup mousedown click mouseenter mouseleave mouseover mouseout",function(t){t.stopPropagation()}.bind(this));this.moveBar.bind(_event._enter,function(t){this.moveBar.find("img").css({background:"#5A9BB7"})}.bind(this));this.moveBar.bind(_event._leave,function(t){this.moveBar.find("img").css({background:"transparent"})}.bind(this));this.moveBar.bind(_event._down,function(t){t.preventDefault();t.stopPropagation();this.moveBar.find("img").css({background:"#5A9BB7"});t=this.getPosition(t);this.catchX=t.x;this.catchY=t.y;this.catchFocus=!0}.bind(this));this.moveBar.bind(_event._up,function(t){t.preventDefault();t.stopPropagation();this.moveBar.find("img").css({background:"transparent"});this.catchFocus=!1}.bind(this));this.parent.bind(_event._move,function(t){if(this.catchFocus){t=this.getPosition(t);var i=t.x-this.catchX,e=t.y-this.catchY;this.panel.css({left:parseFloat(this.panel.left())+i+"px",top:parseFloat(this.panel.top())+e+"px"});this.catchX=t.x;this.catchY=t.y}}.bind(this))},getPosition:function(t){t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t];return{x:(t[0].pageX||t[0].clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft),y:(t[0].pageY||t[0].clientY)+(document.documentElement.scrollTop||document.body.scrollTop)}},onResize:function(){var t=344<=windowWidth?1:windowWidth/344;this.panel.css({left:(0>windowWidth-344?0:(windowWidth-344)/2)+"px","-webkit-transform":"scale("+t+")","-moz-transform":"scale("+t+")","-o-transform":"scale("+t+")","-ms-transform":"scale("+t+")",transform:"scale("+t+")","z-index":"10000"});this.book=BookInfo.getBook().showPage},showOrHide:function(){"block"==this.panel.css("display")?this.hide():this.show()},resetAnnoConfig:function(){this.annoBtnBox.find("div").css({background:"transparent",border:"1px solid transparent"});this.selectCase=AnnotationPannel.NONE;this.setPanelIndex(0,0,"none");global.annotationCookie&&global.annotationCookie.clearUnsaveCookie()},show:function(){this.panel.fadeIn(200)},hide:function(){this.resetAnnoConfig();this.panel.fadeOut(200)}}),AnnotationAddNote=Class({create:function(t,i,e){this.parent=t;this.config=i;this.noteClose="data:image/png;base64,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";this.position={x:i.position.x*global.annotationCookie.pageWidth,y:i.position.y*global.annotationCookie.pageHeight};if(isPhone()||isPad())this.position={x:i.position.x*global.annotationCookie.pageWidth/global.annotationCookie.scale,y:i.position.y*global.annotationCookie.pageHeight/global.annotationCookie.scale};this.noteShow=e;this.container=$("<div id="+i.id+" title='"+this.config.value+"' class='noteContainer'></div>");this.icon=$("<img src='"+uiBaseURL+"note.png' />");this.close=$("<img src='"+this.noteClose+"'/>");this.remove=$("<img />");this.save=$("<img />");this.setSrc(this.remove,"delete");this.setSrc(this.save,"save");this.noteTitle=$("<div class='noteTitle'>"+this.config.time+"</div>");this.noteBox=$("<div class='noteBox'></div>");this.textarea=$("<textarea >"+this.config.value+"</textarea>");this.noteBox.append(this.noteTitle).append(this.close).append(this.remove).append(this.save).append(this.textarea);this.container.append(this.icon).append(this.noteBox);this.parent.append(this.container);this.initCss();this.initEvent();this.close.changeButtonColor("#666666");this.remove.changeButtonColor("#666666");this.save.changeButtonColor("#666666");this.showOrHide();this.moveEvent()},setSrc:function(t,i){form_icons&&form_icons[i]?t.attr("src","data:image/png;base64,"+form_icons[i]):t.attr("src",uiBaseURL+i+".png")},initCss:function(){var t=global.annotationCookie.scale;this.close.css({cursor:"pointer",position:"absolute",height:18/t+"px",width:18/t+"px",top:5/t+"px",right:5/t+"px"});this.remove.css({cursor:"pointer",position:"absolute",height:19/t+"px",width:19/t+"px",top:5/t+"px",right:28/t+"px"});this.save.css({cursor:"pointer",position:"absolute",height:15/t+"px",width:15/t+"px",top:7/t+"px",right:53/t+"px"});this.container.css({"font-size":14/t+"px","z-index":"51",position:"absolute",width:this.config.size*global.annotationCookie.pageWidth/t+"px",left:this.position.x+"px",top:this.position.y+"px",height:this.config.size*global.annotationCookie.pageWidth/t+"px"});this.icon.css({position:"relative",cursor:"pointer",width:"100%",height:"100%","z-index":"51"});this.noteBox.css({"z-index":"1","-webkit-box-shadow":" 2px 2px 5px #111","-o-box-shadow":" 2px 2px 5px #111","-moz-box-shadow":" 2px 2px 5px #111","-ms-box-shadow":" 2px 2px 5px #111","box-shadow":" 2px 2px 5px #111",border:"1px solid #bbb",background:"#FAE393",position:"absolute","min-width":190/t+"px","min-height":133/t+"px",top:this.container.width()+5+"px",left:"0"});this.noteTitle.css({"font-size":12/t+"px",position:"relative",padding:6/t+"px "+8/t+"px"});this.textarea.css({border:"none","font-size":12/t+"px",position:"relative",width:184/t+"px",margin:"0 "+5/t+"px 0",height:96/t+"px"})},elemDrag:function(o,t,s){o.bind(_event._down,function(t){t=this.getPosition(t);this.X=t.x;this.Y=t.y;s=!0}.bind(this));o.bind(_event._up,function(t){s=!1}.bind(this));t.bind(_event._move,function(t){if(s){var i=global.annotationCookie.scale||1;t=this.getPosition(t);var e=t.x/i-this.X/i,i=t.y/i-this.Y/i;o.css({left:parseFloat(o.left())+e+"px",top:parseFloat(o.top())+i+"px"});this.X=t.x;this.Y=t.y}}.bind(this))},getPhoneStartPos:function(t,i){t=t||window.event;return{x:(t.originalEvent.targetTouches[0].pageX||t.originalEvent.targetTouches[0].clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft),y:(t.originalEvent.targetTouches[0].pageY||t.originalEvent.targetTouches[0].clientY)+(document.documentElement.scrollTop||document.body.scrollTop)}},getPhoneEndPos:function(t){t=t||window.event;return{x:(t.originalEvent.changedTouches[0].pageX||t.originalEvent.changedTouches[0].clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft),y:(t.originalEvent.changedTouches[0].pageY||t.originalEvent.changedTouches[0].clientY)+(document.documentElement.scrollTop||document.body.scrollTop)}},getPosition:function(t){t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t];return{x:(t[0].pageX||t[0].clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft),y:(t[0].pageY||t[0].clientY)+(document.documentElement.scrollTop||document.body.scrollTop)}},moveEvent:function(){this.elemDrag(this.container,this.parent,"");this.elemDrag(this.noteBox,this.parent,"")},iconEvent:function(){this.container.bind("touchstart touchend",function(t){t.stopPropagation();t.preventDefault()}.bind(this));this.noteBox.bind("touchstart touchend",function(t){t.stopPropagation()}.bind(this));this.container.bind("mousedown mouseup",function(t){t.stopPropagation();t.preventDefault()}.bind(this));this.icon.bind("pointerdown click",function(t){t.stopPropagation()}.bind(this));this.icon.bind(_event._down,function(t){t=this.getPosition(t);this.iconX=t.x;this.iconY=t.y;this.icon.css({"-webkit-box-shadow":"0 0 2px 2px #DDDDDD inset","-o-box-shadow":"0 0 2px 2px #DDDDDD inset","-moz-box-shadow":"0 0 2px 2px #DDDDDD inset","-ms-box-shadow":"0 0 2px 2px #DDDDDD inset","box-shadow":"0 0 2px 2px #DDDDDD inset"})}.bind(this));this.icon.bind(_event._up,function(t){t=this.getPosition(t);var i=t.y;3>Math.abs(t.x-this.iconX)&&3>Math.abs(i-this.iconY)&&this.showOrHide();this.saveNoteCookie();this.icon.css({"-webkit-box-shadow":"","-o-box-shadow":"","-moz-box-shadow":"","-ms-box-shadow":"","box-shadow":""})}.bind(this))},showOrHide:function(){this.noteShow?(this.noteBox.css({display:"block"}),this.noteShow=!1):(this.noteBox.css({display:"none"}),this.noteShow=!0);this.hasMove=!1},initEvent:function(){this.iconEvent();this.container.bind("pointerdown",function(t){t.stopPropagation()}.bind(this));this.textarea.bind("click mousedown mouseup pointerdown mouseover",function(t){t.stopPropagation()});this.container.bind(_event._mousewheel,function(t){t.stopPropagation()}.bind(this));for(var t=[this.close,this.remove,this.save],i=0;i<t.length;i++)(function(i){i.bind(_event._down,function(t){i.css({background:"rgba(11,11,11,0.3)"})}.bind(this));i.bind(_event._up,function(t){i.css({background:"transparent"})}.bind(this))}).call(this,t[i]);this.close.bind(_event._click,function(){this.noteShow=!0;this.noteBox.css({display:"none"})}.bind(this));this.remove.bind(_event._click,function(){this.container.remove();this.container=void 0;global.annotationCookie.deleteNoteCookie("Note",this.config.index,this.config.id)}.bind(this));this.save.bind(_event._click,function(){this.saveNoteCookie()}.bind(this))},saveNoteCookie:function(){this.config.value=this.textarea.val();this.container.attr("title",this.config.value);this.config.position={x:this.container.left()/global.annotationCookie.pageWidth*global.annotationCookie.scale,y:this.container.top()/global.annotationCookie.pageHeight*global.annotationCookie.scale};global.annotationCookie.saveNoteCookie("Note",this.config.index,this.config.id,this.config)}});var phoneGotoPage=Class({create:function(t){this.mainColor=bookConfig.toolbarColor;this.menu=$("<div id='menu' style='position:absolute;width:100%;height:50px;z-index:98;bottom:-41px;overflow:hidden;'></div>");this.background=$("<div id='background' style='position:absolute;width:100%;height:50px;'></div>");this.contentBox=$("<div id='contentBox' class='phoneGotoPageContent' style='position:absolute;width:100%;height:50px;'></div>");this.background.css({background:this.mainColor,opacity:.8});t.append(this.menu);this.menu.append(this.background);this.menu.append(this.contentBox);this.initContentBox();this.initEvent();this.visible=!1},initContentBox:function(){this.contentBox.css({"text-align":"center",display:"inline-block"});this.backwardButton=$("<div class='btn' style='margin-left:-3px;'><div class='svg-box'><img src=''/></div>");this.firstButton=$("<div class='btn'><div class='svg-box'></div><img src=''/></div>");bookConfig.enablePageBack||this.firstButton.css({"margin-left":"-3px"});this.prevButton=$("<div class='btn'><div class='svg-box'></div><img src=''/></div>");this.nextButton=$("<div class='btn'><div class='svg-box'></div><img src=''/></div>");this.lastButton=$("<div class='btn'><div class='svg-box'></div><img src=''/></div>");this.forwardButton=$("<div class='btn'><div class='svg-box'></div><img src=''/></div>");this.goButton=$("<div class='goBtn'><div class='svg-box'></div><img src=''/></div>");this.setSrc(this.backwardButton,"backward",bookConfig.BackwardButtonIcon);this.setSrc(this.firstButton,"firstPage",bookConfig.FirstButtonIcon);this.setSrc(this.prevButton,"previousPage",bookConfig.PreviousButtonIcon);this.setSrc(this.nextButton,"nextPage",bookConfig.NextButtonIcon);this.setSrc(this.lastButton,"lastPage",bookConfig.LastButtonIcon);this.setSrc(this.forwardButton,"forward",bookConfig.ForwardButtonIcon);this.setSrc(this.goButton,"goPage");this.inputButton=$("<div class='inputButton' style='width:190px;'><input id='currentPageIndexTextField' type='text'/></div>");bookConfig.enablePageBack&&this.inputButton.css({width:"100px"});bookConfig.enablePageBack&&this.contentBox.append(this.backwardButton);this.contentBox.append(this.firstButton);this.contentBox.append(this.prevButton);this.contentBox.append(this.inputButton);this.contentBox.append(this.nextButton);this.contentBox.append(this.lastButton);bookConfig.enablePageBack&&this.contentBox.append(this.forwardButton);this.inputButton.find("input").css({padding:"0px","text-align":"center","border-width":"0px",background:"#ffffff",width:"100%",height:"30px","border-radius":"15px",position:"absolute",color:bookConfig.pageNumColor,left:0,top:0,"pointer-events":"none"})},setSrc:function(t,i,e){var o=t.find("img");t=t.find(".svg-box");e&&""!=e?(o.attr("src",e),t.css({display:"none"})):phoneSvgIcons&&phoneSvgIcons[i]&&(t.html(phoneSvgIcons[i]),o.css({display:"none"}));this.colorChanged=!1},changeCaptionColor:function(t){if(this.fontColor||t)t||(t=this.fontColor.toString()),this.$caption&&this.$caption.css("color",t)},show:function(){toolBar.extendedBar&&toolBar.extendedBar.visible&&toolBar.extendedBar.hide();this.menu.animate({bottom:40},300);this.visible=!0},hide:function(){this.menu.animate({bottom:-60},300);this.visible=!1},showOrHide:function(){!0===this.visible?this.hide():this.show()},initEvent:function(){this.firstButton.bind(_event._end,function(){rightToLeft?lastPageFun():firstPageFun();return!1});this.prevButton.bind(_event._end,function(){rightToLeft?nextPageFun():previousPageFun();return!1});this.nextButton.bind(_event._end,function(){rightToLeft?previousPageFun():nextPageFun();return!1});this.lastButton.bind(_event._end,function(){rightToLeft?firstPageFun():lastPageFun();return!1});this.goButton.bind(_event._end,function(){var t=parseInt($("#currentPageIndexTextField").val().replace(/\D/g,"")),t=Math.min(Math.max(t,1),bookConfig.totalPageCount);gotoPageFun(t);return!1}.bind(this));this.backwardButton.bind(_event._end,function(){rightToLeft?flipHistory.forward():flipHistory.backward();return!1});this.forwardButton.bind(_event._end,function(){rightToLeft?flipHistory.backward():flipHistory.forward();return!1})}});var PasswardPannel=Class({create:function(){this.initHtml();this.initPrompt();this.initEvent();this.background.show();this.view.show()},initHtml:function(){this.background=$("<div class='passwardPannel-background'></div>");this.view=$("<div class='passwardPannel'></div>");this.icon=$("<div id='icon' class='icon'></div>");this.$username=$("<input id='username_input' placeholder='"+getLanguage("lblName","Name")+"' class='username'></input>");this.$passward=$("<input id='passward_input' type='password' placeholder='"+getLanguage("lblPassword","Password")+"' class='passward'></input>");this.loginIn=$("<p id='loginIn' class='loginIn'>"+getLanguage("lblLogin","Login")+"</p>");this.cancleIn=$("<p id='cancleIn' class='cancleIn'>"+getLanguage("lblCancel","Cancel")+"</p>");this.passwardResult=$("<span id='passwardResult' class='passwardResult'></span>");this.passwardInfo=$("<div class='passwardInfo'>"+bookConfig.passwordTips+"<span class='top'></span></div>");this.view.append(this.icon);2==passwardType()&&(this.view.css("height","390px"),this.view.append(this.$username));this.view.append(this.$passward);this.view.append(this.loginIn);this.view.append(this.cancleIn);this.view.append(this.passwardResult);bookConfig.passwordTips&&this.view.append(this.passwardInfo);$("body").append(this.background);$("body").append(this.view);this.icon.addCssSprite(phoneIconsURL[0],"passward",100,100,phoneIconInfo)},initPrompt:function(){if(bookConfig.passwardPrompt){this.prompt=$("<div class='prompt'></div>");this.arrow=$("<div class='arrow'></div>");this.prompt.html(bookConfig.passwardPrompt);this.view.append(this.prompt);this.view.append(this.arrow);this.prompt.width();var t=this.prompt.height(),i=this.$passward.width();this.$passward.height();i+=58;t=this.arrow.top()-(t+15)/2;this.prompt.css({left:i+"px",top:(0<t?t:0)+"px"})}},initEvent:function(){this.background.bind(_event._down,function(t){t.stopPropagation()});this.background.bind(_event._move,function(t){t.stopPropagation()});this.background.bind(_event._end,function(t){t.stopPropagation()});this.cancleIn.bind(_event._end,function(){this.hide()}.bind(this));this.loginIn.bind(_event._end,function(){this.login()}.bind(this));this.prompt&&(this.$passward.bind(_event._enter,function(){this.prompt.show();this.arrow.show()}.bind(this)),this.$passward.bind(_event._leave,function(){this.$passward.is(":focus")?(this.prompt.show(),this.arrow.show()):(this.prompt.hide(),this.arrow.hide())}.bind(this)),this.$passward.bind("focus",function(){this.prompt.show();this.arrow.show()}.bind(this)),this.$passward.bind("blur",function(){this.prompt.hide();this.arrow.hide()}.bind(this)))},login:function(){verifyPassward()?(this.rememberAuthentication(),this.hide(),this.fillCurrentPageContent()):this.showResult()},rememberAuthentication:function(){try{global.passward=this.$passward.val(),global.username=this.$username.val(),window.localStorage.setItem("passward",global.passward),window.localStorage.setItem("username",global.username)}catch(t){}},fillCurrentPageContent:function(){for(var t=1;t<=bookConfig.totalPageCount;t++)BookInfo.getBook().fillPage(t,!0);thumbnail&&thumbnail.show&&thumbnail.fillContent&&thumbnail.fillContent()},show:function(){this.background.show();this.view.show()},hide:function(){this.background.hide();this.view.hide()},showResult:function(){document.getElementById("username")&&!this.$username.val()?this.passwardResult.html(getLanguage("lblNoName","User name can not be empty.")):this.$passward.val()?this.passwardResult.html(getLanguage("lblNoCorrectLogin","Please enter the correct user name and password.")):this.passwardResult.html(getLanguage("lblNoPassword","Password can not be empty."))}});var MiniStyle=Class({statics:{isMini:function(){if((isPhone()||isPad())&&!isInTheFrame()||!bookConfig.MiniStyle||fullScreenApi.isFullScreen())return!1;var t=this.getMaxMiniWidthHeight();if(windowWidth>t.w&&windowHeight>t.h)return!1;this.init();return!0},getMaxMiniWidthHeight:function(){for(var t=bookConfig.maxWidthToSmallMode,i=bookConfig.maxHeightToSmallMode,e=window.location.search.split("&"),o=0;o<e.length;o++){var s=e[o].toLowerCase();0<=s.indexOf("maxwidthtosmallmode")&&(t=parseInt(s.substring(s.indexOf("maxwidthtosmallmode")+19+1,s.length)));0<=s.indexOf("maxheighttosmallmode")&&(i=parseInt(s.substring(s.indexOf("maxheighttosmallmode")+20+1,s.length)))}return{w:t,h:i}},init:function(){this.caption||(this.caption=$("<a class='miniTitle'></a>"),this.caption.html(getLanguage("lblFullscreen","Click to view in fullscreen.")),tmpContainer.append(this.caption),this.initEvent())},initEvent:function(){isPhone()||isPad()?window.top!=window&&(this.caption.attr("href",window.location.href),this.caption.attr("target","blank")):(this.caption.attr("href","javascript:void(0);"),this.caption.bind(_event._down,function(){this.isMini()&&readAsFullscreen()}.bind(this)),this.caption.bind(_event._leave,function(){this.isMini()&&this.hide()}.bind(this)),bookContainer.bind("mousemove",function(t){this.isMini()&&t.pageX>windowWidth/2-25&&t.pageX<windowWidth/2+25&&t.pageY>windowHeight/2-25&&t.pageY<windowHeight/2+25&&this.show()}.bind(this)))},hide:function(){this.caption&&this.caption.animate({opacity:0},200,function(){this.caption.hide()}.bind(this))},show:function(){this.caption&&(this.caption.show(),this.caption.animate({opacity:1},200))},destroy:function(){this.caption&&(this.caption.remove(),this.caption=void 0)}}});var FlipHistory=Class({create:function(){this.array=[];this.currentIndex=0},backward:function(){var t=this.currentIndex-1;void 0!=this.array[t]&&(this.currentIndex=t,gotoPageFun(this.array[t].index,!0))},forward:function(){var t=this.currentIndex+1;void 0!=this.array[t]&&(this.currentIndex=t,gotoPageFun(this.array[t].index,!0))},addFromCurrentIndex:function(t){this.array=this.array.slice(0,this.currentIndex+1);this.array.push({index:t});this.currentIndex=this.array.length-1},push:function(t){this.array.push({index:t})}}),flipHistory=new FlipHistory;Log.debug("browser : %s, system : %s",Instance.JSON($.browser),Instance.JSON($.system));jQuery(document).ready(function(){});function main(){var t=$(".pop");selectLanguage(bookConfig.language);isBelowIE8()?alert(getLanguage("infNotSupportHtml5","Your browser can not support HTML5.")):global.bookConfig?(initBrowserType(),initConfig(),bookConfig.OnlyOpenInWechat&&!isWeChat()?($("body").empty(),$("body").attr("style",""),$("body").css({background:"#ffffff",color:"#000000","text-align":"center","font-size":"20px"}),$("body").append("<img style='margin-top:45px;width:98px;height:98px;' src='"+uiBaseURL+"only-wechat.svg'/><p style='margin-top:35px;'></p>")):initStage()):(alert(getLanguage("msgConfigMissing","Configuration file is missing, unable to open the book.")),function(){window.location=window.location.href}.delay(500))}function initBrowserType(){$.browser.webkit&&(global.browserType=BrowserType.WEBKIT);$.browser.mozilla&&(global.browserType=BrowserType.MOZ);$.browser.opera&&(global.browserType=BrowserType.OPERA);$.browser.msie&&(global.browserType=BrowserType.MS)}function initConfig(){checkBookConfig();useTheAliCloudChart();global.bookType=bookConfig.showDoublePage?0:1;global.rightToLeft=parseBool(bookConfig.RightToLeft,!1);global.originTotalPageCount=parseInt(bookConfig.totalPageCount);global.totalPageCount=originTotalPageCount+(1==originTotalPageCount%2&&!bookConfig.isTheBookOpen||0==originTotalPageCount%2&&bookConfig.isTheBookOpen?1:0);if(!global.ols||0>=global.ols.length)global.ols=[],bookConfig.TableOfContentButtonVisible=!1;global.bmtConfig||(global.bmtConfig=[]);initImageBaseUrl()}function initImageBaseUrl(){global.uiBaseURL=bookConfig.UIBaseURL;uiBaseURL&&"string"==typeof uiBaseURL&&(uiBaseURL.endsWith("/")||(uiBaseURL+="/"));global.phoneBaseURL=uiBaseURL+"style/phoneIcon/";global.soundBaseURL=uiBaseURL+"icon/";global.mbBaseURL=uiBaseURL+"style/mb_icon/";global.uiBaseURL=uiBaseURL+"icon/"}function initStage(){$.browser.device==$.browser.DEVICE_PAD&&$("html").css({height:window.innerHeight+"px"});global.pageIndexTextField=$("#currentPageIndexTextField");global.tmpContainer=$("<div id= 'tmpContainer' class='tmpContainer'></div>");$("body").append(tmpContainer);tmpContainer.append('<img class="tmpclose" src="https://files.dongao.com/static/public/zsfa/ebook/ebookfiles/ad_close.png">');tmpContainer.on({click:function(){tmpContainer.hide();$(".ebookmask").hide();$("html,body").removeAttr("style");$(window).scrollTop(_winTop);window.mp3?mp3.paused():null;if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement){exitFullscreen()}}},".tmpclose");global.bookContainer=$("<div id= 'bookContainer' class='bookContainer'></div>");tmpContainer.append(bookContainer);global.windowWidth=$("body").width();global.windowHeight=$("body").height();global.onBookLoad=new LoadingBook(tmpContainer,bookConfig.loadingBackground);preloadImages()}function exitFullscreen(){var t=document;if(t.exitFullscreen){t.exitFullscreen()}else if(t.mozCancelFullScreen){t.mozCancelFullScreen()}else if(t.webkitCancelFullScreen){t.webkitCancelFullScreen()}}function preloadImages(){global.toolBarIconsURL=[uiBaseURL+"previous_normal.png",uiBaseURL+"next_normal.png"];global.phoneIconsURL=[phoneBaseURL+"phone_icon.png"];var t=function(t){jsLoadingBar&&jsLoadingBar.destroy();onBookLoad.chooseBookStyle()},i=function(t){jsLoadingBar&&jsLoadingBar.destroy();onBookLoad.chooseBookStyle();setTimeout(function(){window.scrollTo(0,1)},0)};isPhone()||isPad()?$(window).loader(phoneIconsURL,i):$(window).loader(toolBarIconsURL,t)}function init(){onFirstVisit();initToolbar();initBook();initComponents();changeShowBook(bookType);onStageResize();scrapURL();setPageIndexTextField();controlAudioVolume();addGoogleAdSense();googleAnalytics();winodwDynamicResize();initEvents();global.initBookValues&&initBookValues();onBookReady()}function onBookReady(){global.flipPageAudio&&flipPageAudio.start();var t=GetQueryString("search");t&&global.frmSearch&&window.setTimeout(function(){frmSearch.show();frmSearch.search(t)},30);showInstruction();showBookInstruction()}function onFirstVisit(){var t=window.location.href.replace(window.location.hash,"");try{window.localStorage[t]?authentication():window.localStorage.setItem(t,"true")}catch(t){}}function showInstruction(){(isPhone()||isPad())&&bookConfig.showInstructionOnStart&&(global.handSwipeHelp||(global.handSwipeHelp=new HandSwipeHelp(tmpContainer)),global.handSwipeHelp.show())}function showBookInstruction(){(isPhone()||isPad())&&bookConfig.showBookInstructionOnStart&&(global.bookInstructions||(global.bookInstructions=new BookInstructions(tmpContainer)),global.bookInstructions.showOrHide())}function authentication(){try{global.passward=window.localStorage.passward,global.username=window.localStorage.username}catch(t){}}function initToolbar(){!isSlideBook()||isPhone()||isPad()||"lite"!=bookConfig.ToolbarViewMode||(global.toolBar=new PCSlideToolbar(tmpContainer));if(isPhone()||isPad())global.toolBar=new PhoneToolbar(tmpContainer);global.toolBar||(global.toolBar=new PCToolbar(tmpContainer));global.toolBar&&toolBar.show()}function initBook(){var t=scrapOriginPageIndex();flipHistory&&flipHistory.push(t);var i={parent:bookContainer,currentPageIndex:t,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft},e=Math.max(1,bookConfig.totalPageCount-1),t={parent:bookContainer,currentPageIndex:bookConfig.SingleModeBanFlipToLastPage?Number.between(t,1,e):t,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft};initFlipBook(i,t);initCatalogBook(i,t);initSlideBook(i,t)}function scrapOriginPageIndex(){bookConfig.restorePageVisible&&window.localStorage.historyPageIndex&&!0==window.confirm(getLanguage("restorePage","Would you like to restore previous session"))&&(window.location.hash="#p="+window.localStorage.historyPageIndex);var t=bookConfig.OriginPageIndex,i=window.location.hash;""!=i&&3<i.length&&"#p="==i.substr(0,3)&&(t=parseInt(getRealPageNumber(i.substr(3,i.length-3))));return t=Number.between(t,1,originTotalPageCount)}bdor[42]=function(){return bdor[33](bdor[32](37,33)+10,36)}();function initFlipBook(t,i){if(bookType==BookType.normal_book||bookType==BookType.single_book)isPhone()||isPad()||toolBar.show(),bookConfig.HardInnerPageEnable?bookConfig.FlipDirection?bookConfig.HardPageEnable?(bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenAlbumHardCalendar(t):new AlbumHardCalendar(t)),global.singlePageBook=new SingleAlbumHardCalendar(i)):(bookConfig.showDoublePage&&(global.flipBook=new AlbumCalendar(t)),global.singlePageBook=new SingleAlbumCalendar(i)):bookConfig.HardPageEnable?(bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenAlbumHardBook(t):new AlbumHardBook(t)),global.singlePageBook=new SingleAlbumHardBook(i)):(bookConfig.showDoublePage&&(global.flipBook=new AlbumBook(t)),global.singlePageBook=new SingleAlbumBook(i)):bookConfig.FlipDirection?bookConfig.HardPageEnable?(bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenHardCalendar(t):new HardCalendar(t)),global.singlePageBook=new SingleHardCalendar(i)):(bookConfig.showDoublePage&&(global.flipBook=new NormalCalendar(t)),global.singlePageBook=new SingleCalendar(i)):bookConfig.HardPageEnable?(bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenHardBook(t):new HardBook(t)),global.singlePageBook=new SingleHardBook(i)):(bookConfig.showDoublePage&&(global.flipBook=new NormalBook(t)),global.singlePageBook=new SingleBook(i))}function initCatalogBook(t){bookType==BookType.catalog_book&&("lite"==bookConfig.ToolbarViewMode.toLowerCase()?(global.catalogBook=bookConfig.FlipDirection?bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogSimpleHardCalendar(t):new CatalogSimpleHardCalendar(t):new CatalogSimpleCalendar(t):bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogSimpleHardBook(t):new CatalogSimpleHardBook(t):new CatalogSimpleBook(t),toolBar.hide()):global.catalogBook=bookConfig.FlipDirection?bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogHardCalendar(t):new CatalogHardCalendar(t):new CatalogCalendar(t):bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogHardBook(t):new CatalogHardBook(t):new CatalogBook(t))}function initSlideBook(t){if(bookType==BookType.slide_book||bookType==BookType.singleSlide_book)bookConfig.showDoublePage&&(global.slideBook=new PcDoubleSlideBook(t)),global.singleSlideBook=new PcSingleSlideBook(t)}function initComponents(){if(isPhone()||isPad()){bookConfig.SearchButtonVisible&&(global.frmSearch=new PhoneSearchForm({parent:tmpContainer,formType:"search",rightToLeft:rightToLeft}));bookConfig.TableOfContentButtonVisible&&(global.frmTableOfContent=new PhoneTableOfContentForm({parent:tmpContainer,formType:"tableOfContent",rightToLeft:rightToLeft}));bookConfig.ShareButtonVisible&&(global.sharePanel=new PhoneShareForm({parent:tmpContainer,formType:"share",rightToLeft:rightToLeft}));bookConfig.BookMarkButtonVisible&&(global.bookmark=new PhoneBookmarkForm({parent:tmpContainer,formType:"bookmark",rightToLeft:rightToLeft}));bookConfig.PrintButtonVisible&&(global.printBody=new PhonePrintForm({parent:tmpContainer,formType:"print",rightToLeft:rightToLeft}));bookConfig.DownloadButtonVisible&&global.downloadconfig&&(global.downLoadBody=new PhoneDownloadForm({parent:tmpContainer,formType:"download",rightToLeft:rightToLeft}));language&&1<language.length&&(global.languagePanel=new PhoneLanguageForm({parent:tmpContainer,formType:"language",rightToLeft:rightToLeft}));if(bookConfig.BackgroundSoundButtonVisible||bookConfig.FlipSound)global.phoneSettingBody=new PhoneSettingForm({parent:tmpContainer,formType:"setting",rightToLeft:rightToLeft});bookConfig.aboutButtonVisible&&(global.aboutBody=new PhoneAboutForm({parent:tmpContainer,formType:"about",rightToLeft:rightToLeft}));bookConfig.ThumbnailsButtonVisible&&!global.thumbnail&&(global.thumbnail=new PhoneThumbnailForm(tmpContainer))}else bookConfig.PrintButtonVisible&&(global.printBody=new PcPrintForm({parent:tmpContainer,formType:"print",rightToLeft:rightToLeft})),bookConfig.DownloadButtonVisible&&global.downloadconfig&&(global.downLoadBody=new PcDownloadForm({parent:tmpContainer,formType:"download",rightToLeft:rightToLeft})),bookConfig.HelpButtonVisible&&(global.helpBody=new PcHelpForm({parent:tmpContainer,formType:"help",rightToLeft:rightToLeft})),bookConfig.aboutButtonVisible&&(global.aboutBody=new PcAboutForm({parent:tmpContainer,formType:"about",rightToLeft:rightToLeft})),bookConfig.ShareButtonVisible&&(global.sharePanel=new PcShareForm({parent:tmpContainer,formType:"share",rightToLeft:rightToLeft})),1<language.length&&(global.languagePanel=new PcLanguageForm({parent:tmpContainer,formType:"language",rightToLeft:rightToLeft})),bookConfig.BackgroundSoundButtonVisible&&bookConfig.FlipSound&&bookConfig.BackgroundSoundURL&&(global.soundSetting=new PcSoundSettingForm({parent:tmpContainer,formType:"settingpc",rightToLeft:rightToLeft})),bookConfig.VideoButtonVisible&&(global.videoGallery=new PcVideoGalleryForm({parent:tmpContainer,formType:"videoGallery",rightToLeft:rightToLeft},global.videoList)),bookConfig.SlideshowButtonVisible&&(global.photoGallery=new PhotoGallery(tmpContainer,global.slideshow)),bookConfig.TableOfContentButtonVisible&&(global.frmTableOfContent=new PcTableOfContentForm({parent:tmpContainer,formType:"tableOfContent",rightToLeft:rightToLeft}),"table of contents"==bookConfig.leftRightPnlShowOption&&global.frmTableOfContent.show()),bookConfig.SearchButtonVisible&&(global.frmSearch=new PcSearchForm({parent:tmpContainer,formType:"search",rightToLeft:rightToLeft})),bookConfig.ThumbnailsButtonVisible&&("catalog"==bookConfig.FlipStyle.toLowerCase()&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()&&(global.thumbnail=new CatalogThumbnailBar(tmpContainer)),isSlideBook()&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()&&(global.thumbnail=new SlideThumbnailBar(tmpContainer)),global.thumbnail||(global.thumbnail=new ThumbnailForm({parent:tmpContainer,formType:"thumbnail",rightToLeft:rightToLeft})),"thumbnails"==bookConfig.leftRightPnlShowOption&&global.thumbnail.show()),!isBelowIE9()&&bookConfig.BookMarkButtonVisible&&(global.bookmark=new PcBookmarkForm({parent:tmpContainer,formType:"bookmark",rightToLeft:rightToLeft})),initLogoBar(),window.assistantConfig&&(global.assistant=new Assistant);bookConfig.AnnotationButtonVisible&&(global.annotationPannel=new AnnotationPannel(tmpContainer));bookConfig.appLargeLogoIcon&&new AppLargeLogo(bookContainer);bookConfig.QRCode&&(global.QRcode=new CodeBar(tmpContainer),global.QRbutton=new QRButton(tmpContainer));global.backgroundObj=new initBackground(tmpContainer);bookConfig.flipshortcutbutton&&(global.flipShotButton=new FlipShotButton(tmpContainer));global.auto_player=new AutoFlip;global.bgSound=new BackgroundSound;global.volumeControlBar=new VolumeControlBar(tmpContainer);initFlipSound();if(isPad()||isPhone())global.handSwipeHelp=new HandSwipeHelp(tmpContainer);if(isPad()||isPhone())global.phoneWeChatShareHelp=new PhoneWeChatShareHelp(tmpContainer);global.flipPageAudio=new FlipByAudio(tmpContainer,global.flipByAudio);isPad()||isPhone()?bookConfig.EnableReportButton&&(global.reportPanel=new PhoneReportPanel(tmpContainer)):bookConfig.EnableReportButton&&(global.reportPanel=new ReportPanel(tmpContainer));bookConfig.MagnifierButtonVisible&&!global.magnifierZoomBox&&(global.magnifierZoomBox=new PageItem.WindowMagnifierBox(tmpContainer))}window.getHeight=function(){return void 0!=window.innerHeight?window.innerHeight:Math.min(document.documentElement.clientHeight,document.body.clientHeight)};window.getWidth=function(){return void 0!=window.innerWidth?window.innerWidth:Math.min(document.documentElement.clientWidth,document.body.clientWidth)};function winodwDynamicResize(){if(isTouch)$(window).on("orientationchange",function(){onStageResize.delay(200)});$(window).resize(onStageResize);window.setInterval(function(){if(bookConfig.upsideOnMobile()){if(window.getHeight()<window.getWidth()&&windowHeight==window.getHeight()&&windowWidth==window.getWidth()||window.getHeight()>window.getWidth()&&windowHeight==window.getWidth()&&windowWidth==window.getHeight())return}else if(windowHeight==window.getHeight()&&windowWidth==window.getWidth())return;windowHeight=window.getHeight();windowWidth=window.getWidth();onStageResize()},1e3)}function scrapURL(){var i=window.location.hash;""!=i&&3<i.length&&"#p="==i.substr(0,3)?window.setTimeout(function(){var t=parseInt(getRealPageNumber(decodeURIComponent(i.substr(3,i.length-3))));gotoPageFun(t);TurnonAutoFlip()},1e3):(gotoPageFun(1),TurnonAutoFlip());0<=window.location.search.indexOf("fullscreen=true")&&function(){toolBar&&toolBar.btnFullscreen&&toolBar.btnFullscreen.trigger(_event._end);$(document).trigger(fullScreenApi.fullScreenEventName)}.delay(this,50)}var resizeBySearchInput=function(){(isPhone()||isPad())&&global.foldingMenu&&global.foldingMenu.visible&&$("body").width()};function onStageResize(t){if(!resizeBySearchInput())if(global.resizeBookAfterFlip=!1,bookType==BookType.normal_book&&flipBook&&flipBook.flipping||bookType==BookType.single_book&&singlePageBook.flipping||bookType==BookType.catalog_book&&catalogBook&&catalogBook.flipping)resizeBookAfterFlip=!0;else{bookConfig.upsideOnMobile()?($("html").css({height:window.innerWidth+"px",width:window.innerHeight+"px"}),$("body").css({height:window.innerWidth+"px",width:window.innerHeight+"px"}),tmpContainer.css({height:window.innerWidth+"px",width:window.innerHeight+"px"})):($("html").css({height:window.innerHeight+"px",width:window.innerWidth+"px"}),$("body").css({height:window.innerHeight+"px",width:window.innerWidth+"px"}),tmpContainer.css({height:window.innerHeight+"px",width:window.innerWidth+"px"}));global.windowWidth=$("body").width();global.windowHeight=$("body").height();resizeToolBar();changeShowBookByWindow();resizePlugin();resizeAttachments();if(global.handSwipeHelp)global.handSwipeHelp.onResize();if(bookConfig.InstructionsButtonVisible&&global.bookInstructions)global.bookInstructions.onResize();if(global.popZoomBox)global.popZoomBox.onResize();if(global.phoneVideoBox)global.phoneVideoBox.onResize()}}function resizeAttachments(){global.foldingMenu&&foldingMenu.resize(windowWidth,windowHeight);if(global.phoneSearch)global.phoneSearch.onResize();if(global.phoneShare)global.phoneShare.onResize();if(global.phoneTableOfContent)global.phoneTableOfContent.onResize();if(global.phonePrintBody)global.phonePrintBody.onResize();if(bookConfig.WeChatShareButtonVisible&&global.phoneWeChatShareHelp)global.phoneWeChatShareHelp.onResize();if(global.printBody)printBody.onResize();if(global.downLoadBody)downLoadBody.onResize();if(global.helpBody)helpBody.onResize();if(global.aboutBody)aboutBody.onResize();if(global.sharePanel)sharePanel.onResize();if(global.languagePanel)languagePanel.onResize();if(bookConfig.AnnotationButtonVisible&&global.annotationPannel)global.annotationPannel.onResize();if(global.phoneSettingBody)global.phoneSettingBody.onResize();if(global.thumbnail)thumbnail.onResize();if(global.QRcode)QRcode.onResize();if(global.frmSearch)frmSearch.onResize();if(global.frmTableOfContent)frmTableOfContent.onResize();if(global.bookmark)bookmark.onResize();global.flipShotButton&&flipShotButton.setPosition();$(".appear_win10").css({"line-height":windowHeight+"px"});$(".appear_win10 .main_dom").css({left:0,top:0})}function resizeToolBar(){if(global.toolBar&&toolBar.onResize)toolBar.onResize();var t=MiniStyle.isMini();isPhone()||isPad()||(t?(global.toolBar&&global.toolBar.hide(),global.QRbutton&&global.QRbutton.hide(),bookType==BookType.catalog_book&&global.catalogBook.guidBar&&global.catalogBook.guidBar.hide(),global.flipShotButton&&flipShotButton.hide(),MiniStyle.show()):(global.QRbutton&&global.QRbutton.show(),("lite"!=bookConfig.ToolbarViewMode||bookType!=BookType.slide_book&&bookType!=BookType.singleSlide_book&&bookType!=BookType.catalog_book)&&toolBar.show(),bookType==BookType.catalog_book&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()&&catalogBook.guidBar&&catalogBook.guidBar.show(),global.flipShotButton&&flipShotButton.show(),MiniStyle.hide()))}function resizeCatalogBook(){if(bookType==BookType.catalog_book&&global.catalogBook)if(bookConfig.FlipDirection)resizeCatalogCalendar();else{var t=catalogBook.getSpace(!1),i=catalogBook.getFitWH(),e=parseInt(i.x/2),o=parseInt(i.y),s=(windowWidth-t.left-t.right-i.x)/2+t.left,t=(windowHeight-t.top-t.bottom-i.y)/2+t.top,n=-i.x/4,i=i.x/4,h={},a=0;!0==bookConfig.retainBookCenter&&(h=catalogBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(a=i),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(a=n),h={tran:{x:a,y:0},scale:1,origin:{x:0,y:0}});h.top=t;h.left=s;catalogBook.setCSS(h);catalogBook.onResize(e,o);catalogBook.resetZoomConfig()}}function resizeCatalogCalendar(){var t=catalogBook.getSpace(!1),i=catalogBook.getFitWH(),e=parseInt(i.x),o=parseInt(i.y/2),s=(windowWidth-t.left-t.right-i.x)/2+t.left,t=(windowHeight-t.top-t.bottom-i.y)/2+t.top,n=-i.y/4,i=i.y/4,h={},a=0;!0==bookConfig.retainBookCenter&&(h=catalogBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(a=i),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(a=n),h={tran:{x:0,y:a},scale:1,origin:{x:0,y:0}});h.top=t;h.left=s;catalogBook.setCSS(h);catalogBook.onResize(e,o);catalogBook.resetZoomConfig()}function resizeFlipBook(){if(bookType==BookType.normal_book||bookType==BookType.single_book)if(bookConfig.FlipDirection)resizeFlipCalendar();else{if(global.flipBook){var t=flipBook.getSpace(!1),i=flipBook.getFitWH(),e=Math.round(i.x/2),o=Math.round(i.y),s=(windowWidth-t.left-t.right-i.x)/2+t.left,t=(windowHeight-t.top-t.bottom-i.y)/2+t.top,n=-i.x/4,i=i.x/4,h={tran:{x:0,y:0},scale:1,origin:{x:0,y:0}},a=0;!0==bookConfig.retainBookCenter&&(h=flipBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(a=i),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(a=n),h={tran:{x:parseInt(a),y:0},scale:1,origin:{x:0,y:0}});h.top=t;h.left=s;useTheAliCloudChart(e,o);flipBook.setCSS(h);flipBook.onResize(e,o);flipBook.resetZoomConfig()}global.singlePageBook&&(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(e=windowWidth,o=windowHeight,t=s=0):(i=singlePageBook.getFitWH(),e=i.x,o=i.y,t=singlePageBook.getSpace(!0),s=(windowWidth-t.left-t.right-e)/2+t.left,t=(windowHeight-t.top-t.bottom-o)/2+t.top),useTheAliCloudChart(e,o),singlePageBook.onResize(e,o),singlePageBook.setCSS({top:t,left:s}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.resetZoomConfig())}}function resizeFlipCalendar(){if(global.flipBook){var t=flipBook.getSpace(!1),i=flipBook.getFitWH(),e=parseInt(i.x),o=parseInt(i.y/2),s=(windowWidth-t.left-t.right-i.x)/2+t.left,t=(windowHeight-t.top-t.bottom-i.y)/2+t.top,n=-i.y/4,i=i.y/4,h={},a=0;!0==bookConfig.retainBookCenter&&(h=flipBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(a=i),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(a=n),h={tran:{x:0,y:a},scale:1,origin:{x:0,y:0}});h.top=t;h.left=s;useTheAliCloudChart(e,o);flipBook.setCSS(h);flipBook.onResize(e,o);flipBook.resetZoomConfig()}global.singlePageBook&&(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(e=windowWidth,o=windowHeight,t=s=0):(i=singlePageBook.getFitWH(),e=i.x,o=i.y,t=singlePageBook.getSpace(!0),s=(windowWidth-t.left-t.right-e)/2+t.left,t=(windowHeight-t.top-t.bottom-o)/2+t.top),useTheAliCloudChart(e,o),singlePageBook.onResize(e,o),singlePageBook.setCSS({top:t,left:s}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.resetZoomConfig())}function resizeSlideBook(){if(global.slideBook)slideBook.onResize();if(global.singleSlideBook)singleSlideBook.onResize()}function changeShowBookByWindow(){var t,i,e=!1;bookType==BookType.single_book&&windowWidth>=windowHeight&&bookConfig.showDoublePage&&(bookType=BookType.normal_book,changeShowBook(0),i=singlePageBook.currentPageIndex,e=t=!0);bookType==BookType.singleSlide_book&&windowWidth>=windowHeight&&bookConfig.showDoublePage&&(bookType=BookType.slide_book,changeShowBook(bookType),i=singleSlideBook.getRealPageIndex(),e=t=!0);bookType==BookType.slide_book&&windowWidth<windowHeight&&(bookType=BookType.singleSlide_book,changeShowBook(bookType),i=slideBook.getRealPageIndex(),t=!1,e=!0);bookType==BookType.normal_book&&windowWidth<windowHeight&&(bookType=BookType.single_book,changeShowBook(1),i=flipBook.currentPageIndex,t=!1,e=!0);resizeFlipBook();resizeCatalogBook();resizeSlideBook();e&&(gotoPageFun(i),setCurrentIndexTextField(i,t),global.thumbnail&&thumbnail.clearHighLight(),global.thumbnail&&thumbnail.setHighLight(i))}function initEvents(){$(bookContainer).bind("click touchstart",function(t){t.target==t.currentTarget&&onWindowClick(t)});$(bookContainer).bind("touchstart",function(t){t.preventDefault()});$(window).bind("keydown",function(t){onWindowKeyDown(t)});initSoundEvents();bookConfig.isStopMouseMenu&&(bookContainer.bind("mousedown",function(t){3==t.which&&(global.customMunuBox||(global.customMunuBox=new CustomMunu(tmpContainer)),global.customMunuBox.show(t))}.bind(this)),document.oncontextmenu=function(t){return!1},window.onkeydown=window.onkeyup=window.onkeypress=function(){if(123==window.event.keyCode)return window.event.returnValue=!1})}function initSoundEvents(){global.flipAudio&&global.flipAudio.bind("play",function(){global.flipAudio[0].hasPlayed=!0});var t=_event._down;if(isPhone()||isPad())t=_event._down+" "+_event._move+" "+_event._end;$("body").bind(t,function(){SoundEvents()})}function unbindSoundEvent(){var t=_event._down;if(isPhone()||isPad())t=_event._down+" "+_event._move+" "+_event._end;$("body").unbind(t,SoundEvents)}function SoundEvents(){global.flipAudio&&global.flipAudio[0].paused&&!global.flipAudio[0].hasPlayed&&bookConfig.FlipSound&&(global.flipAudio[0].play(),global.flipAudio[0].pause());global.bgSound&&(global.bgSound.prepareAudios(),isPlaying&&window.playBackgroundSound?global.bgSound.playCurrentAudio():global.bgSound.pauseCurrentAudio());!window.playBackgroundSound&&window.currentMedia&&window.currentMedia.playMedia();global.flipPageAudio.playByTouch()}function onWindowClick(t){if(t&&2!=t.button){var i=BookInfo.getBook();if(!(i.status_zoom||i.isZomming||i.status_resize)){t=t.originalEvent&&t.originalEvent.changedTouches?t.originalEvent.changedTouches:t.changedTouches?t.changedTouches:[t];var i=BookInfo.getBook().getBook().offset(),e=BookInfo.getBook().getBook().outerWidth();t[0].pageX>i.left+e?rightToLeft?previousPageFun():nextPageFun():t[0].pageX<i.left&&(rightToLeft?nextPageFun():previousPageFun());var o;clearTimeout(o);o=setTimeout(function(){if($(".ebm_btn.readBook").is(":visible"))$(".ebm_btn.readBook").trigger("click")},500)}}}function onWindowKeyDown(b){if(b&&!fullScreenApi.isFullScreen()){var c=b.keyCode;Log.info("key down[%d]",c);c==KEY_CODE_LEFT&&(rightToLeft?nextPageFun():previousPageFun());c==KEY_CODE_RIGHT&&(rightToLeft?previousPageFun():nextPageFun());if(c==KEY_CODE_HOME||c==KEY_CODE_PAGEUP)rightToLeft?lastPageFun():firstPageFun();if(c==KEY_CODE_END||c==KEY_CODE_PAGEDOWN)rightToLeft?firstPageFun():lastPageFun();b.ctrlKey&&b.altKey&&(c==KEY_CODE_HOME||c==KEY_CODE_UP)&&eval(DeString("b29ec71982dc6d9062a0b77ce9ccc59581fd3c4a4fa9bd325e6f5ae7fbf39a0907064bb455b1bade956bc0f3e7c55d348fbaa363c39f7bef7a0648674fd1f688786b79bd6ad03215d634a4736f3f971501f664a09b820932d9bc83a9c2159964e5c571b3ebe4ceb214fd31bb1287fe5449f303a6d5531165e1386ba5aa8d0a3788d4a351d120a43a59c002d761ef"));b.ctrlKey&&b.altKey&&c==KEY_CODE_A+1&&(b=synthesizingBrowserInformation(),console.log(Instance.JSON(b)))}}function synthesizingBrowserInformation(){var t="",i="";$.browser.mozilla&&(t="mozilla");$.browser.firefox&&(t="firefox");$.browser.msie&&(t="msie");$.browser.edge&&(t="edge");$.browser.opera&&(t="opera");$.browser.chrome&&(t="chrome");$.browser.uc&&(t="uc");$.browser.safari&&(t="safari");$.browser.wechat&&(t="wechat");switch($.browser.device){case 0:i="DEVICE_PC";break;case 1:i="DEVICE_PAD";break;case 2:i="DEVICE_PHONE"}return{system_name:$.system.name,system_version:$.system.version,browser_name:t,browser_version:$.browser.version,device:i,isApp:$.browser.app,build:BUILD_DATE}}$(document).on("visibilitychange",function(){document.hidden?(global.bgSound&&isPlaying&&window.playBackgroundSound&&global.bgSound.pauseCurrentAudio(),!window.playBackgroundSound&&window.currentMedia&&window.currentMedia.pauseMedia()):(global.bgSound&&isPlaying&&window.playBackgroundSound&&global.bgSound.playCurrentAudio(),!window.playBackgroundSound&&window.currentMedia&&window.currentMedia.playMedia())});Class("TaskList",{create:function(){this.taskList=[];this.taskListId=[];this.finishId=[];this.largeLength=0;this.performingTasks=!1;this.taskId=0},unShiftTask:function(t){0<=this.taskListId.indexOf(t.id)||0<=this.finishId.indexOf(t.id)||(void 0==t.id&&(t.id=this.tastkId,this.taskId++),this.taskList.push(t),this.taskListId.push(t.id),this.cutTask(),this.taskInterval||this.performTaskList())},cutTask:function(){var t=this.taskList.length;if(!(t<=this.largeLength))for(var i=0;i<t-this.largeLength;i++)this.taskList.remove(0),this.taskListId.remove(0)},performTaskList:function(t){this.taskInterval||(this.taskInterval=window.setInterval(function(){var t=this.taskList[0];t?(t(),this.finishId.push(t.id),this.taskList.remove(0),this.taskListId.remove(0)):(window.clearInterval(this.taskInterval),this.taskInterval=void 0)}.bind(this),60))},setLargeLength:function(t){this.largeLength=t}});Class("TextBubble",{$parent:null,color:null,textColor:null,text:"",padding:6,margin:2,$bubble:null,$content:null,$text:null,statics:{LEFT:1,TOP:2,RIGHT:3,BOTTOM:4,HORIZONTAL:5,VERTICAL:6},create:function(t){t=t||{};this.$parent=t.parent||$("body");this.color=Color(t.color)||Color("black");this.textColor=Color(t.textColor)||Color("white");this.text=t.text||"";this.padding=t.padding||6;this.margin=t.margin||2;this.direction=t.direction||TextBubble.VERTICAL;this.init()},init:function(){this.$bubble=$("<div class='text_bubble' style='display:none'></div>");this.$content=$("<div class='text_bubble_content'></div>");this.$text=$("<div class='text_bubble_text'></div>");this.$parent.append(this.$bubble);this.$bubble.append(this.$content);this.$content.append(this.$text);this.$content.css({padding:this.padding+"px","background-color":this.color.rgba()});this.$text.css({color:this.textColor.toString()});this.$text.text(this.text)},setStyle:function(t){"string"==typeof t&&this.$content.addClass(t);"object"==typeof t&&this.$content.css(t)},setText:function(t){this.text=t;this.$text&&this.$text.text(this.text)},show:function(t){this.$bubble&&this.$bubble.css({display:"block"});switch(this.direction){case TextBubble.LEFT:this.showLeft(t);break;case TextBubble.TOP:this.showTop(t);break;case TextBubble.RIGHT:this.showRight(t);break;case TextBubble.BOTTOM:this.showBottom(t);break;case TextBubble.HORIZAONTAL:this.showHorizaontal(t);break;case TextBubble.VERTICAL:this.showVertical(t)}},showLeft:function(t){var i=this.getBubbleWidth();this.bubbleLeft=t.left-i-this.margin;i=this.getBubbleHeight();this.bubbleTop=t.top+t.height/2-i/2;this.bubbleTop+i>this.$parent.height()?this.bubbleTop=this.$parent.height()-i-this.margin:this.bubbleTop=Math.max(this.margin,this.bubbleTop);this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showRight:function(t){this.getBubbleWidth();this.bubbleLeft=t.left+t.width+this.margin;var i=this.getBubbleHeight();this.bubbleTop=t.top+t.height/2-i/2;this.bubbleTop+i>this.$parent.height()?this.bubbleTop=this.$parent.height()-i-this.margin:this.bubbleTop=Math.max(this.margin,this.bubbleTop);this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showTop:function(t){var i=this.getBubbleWidth();this.bubbleLeft=t.left+t.width/2-i/2;this.bubbleLeft+i>this.$parent.width()?this.bubbleLeft=this.$parent.width()-i-this.margin:this.bubbleLeft=Math.max(this.margin,this.bubbleLeft);i=this.getBubbleHeight();this.bubbleTop=t.top-i-this.margin;this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showBottom:function(t){var i=this.getBubbleWidth();this.bubbleLeft=t.left+t.width/2-i/2;this.bubbleLeft+i>this.$parent.width()?this.bubbleLeft=this.$parent.width()-i-this.margin:this.bubbleLeft=Math.max(this.margin,this.bubbleLeft);this.getBubbleHeight();this.bubbleTop=t.top+t.height+this.margin;this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showVertical:function(t){var i=this.getBubbleWidth();this.bubbleLeft=t.left+t.width/2-i/2;this.bubbleLeft+i>this.$parent.width()?this.bubbleLeft=this.$parent.width()-i-this.margin:this.bubbleLeft=Math.max(this.margin,this.bubbleLeft);i=this.getBubbleHeight();t.top+t.height+i>this.$parent.height()?this.bubbleTop=t.top-i-this.margin:this.bubbleTop=t.top+t.height+this.margin;this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showHorizontal:function(t){var i=this.getBubbleWidth();t.left+t.width+i>this.$parent.width()?this.bubbleLeft=t.left-i-this.margin:this.bubbleLeft=t.left+t.width+this.margin;i=this.getBubbleHeight();this.bubbleTop=t.top+t.height/2-i/2;this.bubbleTop+i>this.$parent.height()?this.bubbleTop=this.$parent.height()-i-this.margin:this.bubbleTop=Math.max(this.margin,this.bubbleTop);this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},getBubbleWidth:function(){return this.$text.width()+2*this.padding},getBubbleHeight:function(){return this.$text.height()+2*this.padding},hide:function(){this.$bubble&&this.$bubble.css({display:"none"})}});Class("ArrowTextBubble",{create:function(t){t=t||{};this.arrowWidth=t.arrowWidth||8;this.arrowHeight=t.arrowHeight||4;this._super(t)},setRightArrowStyle:function(t,i){t.css({"border-left":"0px solid transparent","border-top":this.arrowHeight/2+"px solid transparent","border-right":this.arrowWidth+"px solid "+i.toString(),"border-bottom":this.arrowHeight/2+"px solid transparent"})},setLeftArrowStyle:function(t,i){t.css({"border-left":this.arrowWidth+"px solid "+i.toString(),"border-top":this.arrowHeight/2+"px solid transparent","border-right":"0px solid transparent","border-bottom":this.arrowHeight/2+"px solid transparent"})},setBottomArrowStyle:function(t,i){t.css({"border-left":this.arrowWidth/2+"px solid transparent","border-top":"0px solid transparent","border-right":this.arrowWidth/2+"px solid transparent","border-bottom":this.arrowHeight+"px solid "+i.toString()})},setTopArrowStyle:function(t,i){t.css({"border-left":this.arrowWidth/2+"px solid transparent","border-top":this.arrowHeight+"px solid "+i.toString(),"border-right":this.arrowWidth/2+"px solid transparent","border-bottom":"0px solid transparent"})}}).extend("TextBubble");Class("SolidArrowTextBubble",{$arrow:null,init:function(){this._super();this.$arrow=$("<div class='text_bubble_arrow'></div>");this.$bubble.append(this.$arrow)},showLeft:function(t){this._super(t);this.getBubbleHeight();t=t.top+t.height/2-this.bubbleTop-this.arrowHeight/2;var i=this.$text.width()+2*this.padding;this.$content.css({"margin-left":"0px"});this.setLeftArrowStyle(this.$arrow,this.color);this.$arrow.css({top:t+"px",left:i+"px"})},showTop:function(t){this._super(t);this.getBubbleWidth();t=t.left+t.width/2-this.bubbleLeft-this.arrowWidth/2;var i=this.$text.height()+2*this.padding;this.$content.css({"margin-top":"0px"});this.setTopArrowStyle(this.$arrow,this.color);this.$arrow.css({left:t+"px",top:i+"px"})},showRight:function(t){this._super(t);this.getBubbleHeight();t=t.top+t.height/2-this.bubbleTop-this.arrowHeight/2;this.$text.width();this.$content.css({"margin-left":this.arrowWidth+"px"});this.setRightArrowStyle(this.$arrow,this.color);this.$arrow.css({top:t+"px",left:"0px"})},showBottom:function(t){this._super(t);this.getBubbleWidth();t=t.left+t.width/2-this.bubbleLeft-this.arrowWidth/2;this.$text.height();this.$content.css({"margin-top":this.arrowHeight+"px"});this.setBottomArrowStyle(this.$arrow,this.color);this.$arrow.css({left:t+"px",top:"0px"})},showVertical:function(t){this._super(t);this.getBubbleWidth();var i=t.left+t.width/2-this.bubbleLeft-this.arrowWidth/2,e=this.$text.height()+2*this.padding;this.bubbleTop<t.top?(this.$content.css({"margin-top":"0px"}),this.setTopArrowStyle(this.$arrow,this.color),this.$arrow.css({left:i+"px",top:e+"px"})):(this.$content.css({"margin-top":this.arrowHeight+"px"}),this.setBottomArrowStyle(this.$arrow,this.color),this.$arrow.css({left:i+"px",top:"0px"}))},showHorizontal:function(t){this._super(t);this.getBubbleHeight();var i=t.top+t.height/2-this.bubbleTop-this.arrowHeight/2,e=this.$text.width()+2*this.padding;this.bubbleLeft<t.left?(this.$content.css({"margin-left":"0px"}),this.setLeftArrowStyle(this.$arrow,this.color),this.$arrow.css({top:i+"px",left:e+"px"})):(this.$content.css({"margin-left":this.arrowWidth+"px"}),this.setRightArrowStyle(this.$arrow,this.color),this.$arrow.css({top:i+"px",left:"0px"}))},getBubbleHeight:function(){return this.direction==TextBubble.VERTICAL||this.direction==TextBubble.TOP||this.direction==TextBubble.BOTTOM?this.$text.height()+2*this.padding+this.arrowHeight:this.$text.height()+2*this.padding},getBubbleWidth:function(){return this.direction==TextBubble.HORIZONTAL||this.direction==TextBubble.LEFT||this.direction==TextBubble.RIGHT?this.$text.width()+2*this.padding+this.arrowWidth:this.$text.width()+2*this.padding}}).extend("ArrowTextBubble");Class("HollowArrowTextBubble",{$arrow:null,$filled_arrow:null,create:function(t){t=t||{};this.filledColor=t.filledColor||Color("white");this._super(t)},init:function(){this._super();this.$arrow=$("<div class='text_bubble_arrow' style='z-index:1'></div>");this.$filled_arrow=$("<div class='text_bubble_arrow' style='z-index:2'></div>");this.$bubble.append(this.$arrow);this.$bubble.append(this.$filled_arrow);this.$content.css({padding:this.padding-1+"px",border:"1px solid "+this.color.toString(),"background-color":this.filledColor.toString()})},show:function(t){this._super(t);this.getBubbleWidth();var i=t.left+t.width/2-this.bubbleLeft-this.arrowWidth/2,e=this.$text.height()+2*this.padding;this.bubbleTop<t.top?(this.$content.css({"margin-top":"0px"}),this.setBottomArrowStyle(this.$arrow,this.color),this.$arrow.css({left:i+"px",top:e+"px"}),this.setBottomArrowStyle(this.$filled_arrow,this.filledColor),this.$filled_arrow.css({left:i+"px",top:e-2+"px"})):(this.$content.css({"margin-top":this.arrowHeight+"px"}),this.setTopArrowStyle(this.$arrow,this.color),this.$arrow.css({left:i+"px",top:"0px"}),this.setTopArrowStyle(this.$filled_arrow,this.filledColor),this.$filled_arrow.css({left:i+"px",top:"2px"}))},getBubbleHeight:function(){return this.$text.height()+2*this.padding+this.arrowHeight}}).extend("ArrowTextBubble");Class("WeChatShare",{create:function(t){t=t||{};this.arrowWidth=t.arrowWidth||8;this.arrowHeight=t.arrowHeight||8;this._super(t)},init:function(){this.visible=!1;this.$bubble=$("<div class='text_bubble' style='display:none'></div>");this.$content=$("<div class='text_bubble_content'></div>");this.$text=$("<div style='width:200px;height:230px;'></div>");var t=$("<div></div>"),i=$("<div></div>");i.qrcode({width:180,height:180,text:window.location.href});this.$arrow=$("<canvas class='text_bubble_arrow' width = '14' height ='12'></canvas>");this.$bubble.append(this.$arrow);i.css({position:"absolute",left:"20px",top:"50px","image-redering":"pixelated"});t.css({"font-size":"20px","font-weight":"bold",margin:"0 auto","text-align":"center",color:this.textColor});this.$text.append(t).append(i);this.$parent.append(this.$bubble);this.$bubble.append(this.$content);this.$content.append(this.$text);this.$content.css({padding:this.padding+"px","background-color":"#fff","-webkit-box-shadow":"0 0 3px #111 inset","-o-box-shadow":"0 0 3px #111 inset","-moz-box-shadow":"0 0 3px #111 inset","-ms-box-shadow":"0 0 3px #111 inset","box-shadow":"0 0 3px #111 inset"});this.initBorder();this.enterEvent()},initBorder:function(){var t=this.$arrow[0].getContext("2d");t.beginPath();t.fillStyle="#fff";t.moveTo(7,0);t.lineTo(0,12);t.lineTo(14,12);t.fill();t.closePath();t.lineWidth=1;t.beginPath();t.strokeStyle="#AFAFAF";t.moveTo(7,0);t.lineTo(0,12);t.shadowOffsetX=1;t.shadowBlur=1;t.shadowColor="#AFAFAF";t.stroke();t.closePath();t.beginPath();t.strokeStyle="#AFAFAF";t.moveTo(7,0);t.lineTo(14,12);t.shadowOffsetX=-1;t.shadowBlur=1;t.shadowColor="#AFAFAF";t.stroke();t.closePath()},showLeft:function(t){this._super(t);this.$arrow.css({border:"none","margin-left":"-3px",transform:"rotateZ(90deg)","-webkit-transform":"rotateZ(90deg)","-o-transform":"rotateZ(90deg)","-moz-transform":"rotateZ(90deg)","-ms-transform":"rotateZ(90deg)"})},showTop:function(t){this._super(t);this.$arrow.css({border:"none","margin-top":"-2px",transform:"rotateZ(180deg)","-webkit-transform":"rotateZ(180deg)","-o-transform":"rotateZ(180deg)","-moz-transform":"rotateZ(180deg)","-ms-transform":"rotateZ(180deg)"})},showRight:function(t){this._super(t);this.$arrow.css({border:"none","margin-left":"-1px",transform:"rotateZ(-90deg)","-webkit-transform":"rotateZ(-90deg)","-o-transform":"rotateZ(-90deg)","-moz-transform":"rotateZ(-90deg)","-ms-transform":"rotateZ(-90deg)"})},showBottom:function(t){this._super(t);this.$arrow.css({border:"none"})},enterEvent:function(){this.$bubble.bind("mouseenter",function(){this.visible=!0}.bind(this));this.$bubble.bind("mouseleave",function(){this.visible=!1;this.hide()}.bind(this))},setDirection:function(t){t&&(this.direction=t)},hide:function(){this.$bubble&&setTimeout(function(){this.visible||this.$bubble.fadeOut("100",function(){this.$bubble.css({display:"none"})}.bind(this))}.bind(this),200)}}).extend("SolidArrowTextBubble");Class("PhoneWeChatShareHelp",{create:function(t){this.container=$("<div class='PhoneWeChatShareHelp'></div>");this.image=$("<img/>");this.initCss();this.container.append(this.image);t.append(this.container);this.initEvent()},initCss:function(){this.setSrc(this.image,"phoneWeChatShareHelp");this.container.css({display:"none",background:"rgba(11,11,11,0.9)",width:windowWidth+"px",height:windowHeight+"px",position:"absolute","z-index":"10001"});this.image.css({position:"absolute",right:"7%",top:"2%",width:"200px",height:"300px","z-index":"1"})},setSrc:function(t,i){phone_toolbar_icons&&phone_toolbar_icons[i]?t.attr("src","data:image/png;base64,"+phone_toolbar_icons[i]):t.attr("src",phoneBaseURL+i+".png")},onResize:function(){this.container.css({width:windowWidth+"px",height:windowHeight+"px"})},initEvent:function(){this.container.bind(_event._down,function(){this.hide()}.bind(this))},show:function(){(isPhone()||isPad())&&this.container.css({width:windowWidth+"px",height:windowHeight+"px",display:"block"})},hide:function(){(isPhone()||isPad())&&this.container.css({display:"none"})}});Class("ToolbarButton",{$button:null,colorChanged:!1,fontColorChanged:!1,callback:null,color:null,fontColor:null,$parent:null,caption:"",title:null,hint:!0,language:null,create:function(){this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.$button=$("<div class='button'></div>");this.ButtonClickEvent=this.onButtonClick.bind(this)},setCallback:function(t){this.callback=t},onButtonClick:function(t){this.onClick(t);this.executeCallback();this.hideTitle();if(t)return t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0),!1},onClick:virtual_function,executeCallback:function(){this.callback&&this.callback instanceof Function&&this.callback(this)},click:function(t){this.onButtonClick(t)},setSrc:function(t,i){var e=$("<img style='pointer-events:none;'></img>");this.$caption=$("<span style='pointer-events:none;'></span>");i&&""!=i?e.attr("src",i):toolbar_icons&&toolbar_icons[t]?e.attr("src","data:image/png;base64,"+toolbar_icons[t]):e.attr("src",uiBaseURL+t+".png");this.$button.empty();this.$button.append(e);this.$button.append(this.$caption);this.fontColorChanged=this.colorChanged=!1},changeColor:function(t){this.changeIconColor(t);this.changeCaptionColor(t)},changeIconColor:function(t){if(this.color||t)t||(t=this.color.toString()),this.$parent&&(this.colorChanged||this.$button.changeButtonColor(Color(t).toString(),!1,function(){this.colorChanged=!0}.bind(this)))},changeCaptionColor:function(t){if(this.fontColor||t)t||(t=this.fontColor.toString()),this.fontColorChanged||(this.$caption&&this.$caption.css("color",Color(t).toString()),this.fontColorChanged=!0)},reflection:function(){reflection&&reflection(this.$button)},initLanguage:function(t,i){this.language={key:t,defaultValue:i};this.changeLanguage()},changeLanguage:function(){if(this.language){var t=getLanguage(this.language.key,this.language.defaultValue);this.setCaption(t)}},setCaption:function(t){this.caption=t;this.$caption.text(t);this.title?this.title.setText(t):this.setTitle(t)},setTitle:function(t){"string"==typeof t?(this.$button.attr("title",t),this.title=null):(this.$button.attr("title",""),this.title=t)},showTitle:function(i){i&&"CANVAS"==i.target.tagName.toUpperCase()||!this.hint||!this.title||(this.mouse_is_enter=!0,this.titleTimer&&window.clearTimeout(this.titleTimer),this.titleTimer=function(){if(this.mouse_is_enter){var t={left:i.pageX-i.offsetX,top:i.pageY-i.offsetY,width:this.width(),height:this.height()};this.title.show(t)}}.delay(this,800))},hideTitle:function(){this.mouse_is_enter=!1;this.title&&this.title.hide()},addTo:function(t){this.$parent!=t&&(this.$parent&&this.freedom(),this.$button.appendTo(t),this.$parent=t,this.addEvents())},addEvents:function(){this.$button.bind("click",this.ButtonClickEvent);this.$button.bind("mouseenter",this.showTitle.bind(this));this.$button.bind("mouseleave",this.hideTitle.bind(this));this.$button.bind("mousedown pointerdown touchstart",function(t){toolBar.enterOption&&window.clearTimeout(toolBar.enterOption);t.stopPropagation()});this.$button.css("cursor","pointer")},freedom:function(){this.$button.remove();this.$parent=null;this.$button.unbind()},setPosition:function(t,i){this.$button.css({left:t+"px",top:i+"px"})},setWidth:function(t){this.$button.css({width:t+"px"})},setHeight:function(t){this.$button.css({height:t+"px"})},left:function(){return this.$button.left()},top:function(){return this.$button.top()},width:function(){return this.$button.width()},height:function(){return this.$button.height()}});Class("ButtonBevel",{color:null,$body:null,$parent:null,statics:{vertical:0,horizontal:1},create:function(t,i){this.color=Color(t);this.direction=void 0==i?ButtonBevel.vertical:i;this.init()},init:function(){this.$body=$("<div name='bevel'></div>");var t=this.color.reduce(20),i=this.color.add(20);this.direction==ButtonBevel.vertical?(this._width=2,this._height=30,this.$body.css({position:"absolute",width:"1px",height:"30px","background-color":t,"border-right":"1px solid "+i})):(this._width=30,this._height=2,this.$body.css({position:"absolute",width:"30px",height:"1px","background-color":t,"border-bottom":"1px solid "+i}))},freedom:function(){this.$body.remove();this.$parent=null},addTo:function(t){this.$parent!=t&&(this.$parent&&this.freedom(),this.$body.appendTo(t),this.$parent=t)},setPosition:function(t,i){this.$body.css({left:t+"px",top:i+"px"})},setWidth:function(t){this._width=t;if(this.direction==ButtonBevel.vertical){var i=t%2;this.$body.css({width:(t+i)/2+"px","border-right-width":(t-i)/2+"px"})}else this.$body.css({width:t+"px"})},setHeight:function(t){this._height=t;if(this.direction==ButtonBevel.vertical)this.$body.css({height:t+"px"});else{var i=t%2;this.$body.css({height:(t+i)/2+"px","border-bottom-width":(t-i)/2+"px"})}},left:function(){return this.$body.left()},top:function(){return this.$body.top()},width:function(){return this._width},height:function(){return this._height}});Class("FirstPageButton",{create:function(){this._super();rightToLeft?this.setSrc("Last",bookConfig.LastButtonIcon):this.setSrc("First",bookConfig.FirstButtonIcon);this.initLanguage("btnFirstPage","First")},onClick:function(t){firstPageFun()}}).extend("ToolbarButton");Class("LastPageButton",{create:function(){this._super();rightToLeft?this.setSrc("First",bookConfig.FirstButtonIcon):this.setSrc("Last",bookConfig.LastButtonIcon);this.initLanguage("btnLastPage","Last")},onClick:function(t){lastPageFun()}}).extend("ToolbarButton");Class("PreviousPageButton",{create:function(){this._super();rightToLeft?this.setSrc("next",bookConfig.NextButtonIcon):this.setSrc("prev",bookConfig.PreviousButtonIcon);this.initLanguage("btnPrePage","Previous")},onClick:function(t){previousPageFun()}}).extend("ToolbarButton");Class("NextPageButton",{create:function(){this._super();rightToLeft?this.setSrc("prev",bookConfig.PreviousButtonIcon):this.setSrc("next",bookConfig.NextButtonIcon);this.initLanguage("btnNextPage","Next")},onClick:function(t){nextPageFun()}}).extend("ToolbarButton");Class("HomeButton",{create:function(){this._super();this.setSrc("home",bookConfig.HomeButtonIcon);this.initLanguage("btnGoToHome","Home")},onClick:function(t){"%first page%"==bookConfig.HomeURL.toLowerCase()?firstPageFun():void 0!=bookConfig.HomeURL&&""!=bookConfig.HomeURL&&(t=bookConfig.HomeURL,t.startsWith("%")&&t.endsWith("%")?(t=getRealPageNumber(t.slice(1,t.length-1)),gotoPageFun(t)):(t=getRealURL(t),window.open(t,bookConfig.OpenWindow)))}}).extend("ToolbarButton");Class("ShareEmailButton",{create:function(){this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.$button=$("<a target="+bookConfig.OpenWindow+" href='' class='button' style='text-decoration:none;'></a>");var t="",i=bookConfig.btnShareWithEmailBody||"",e=bookConfig.btnShareWithEmailSubject||"";thumb=" "+window.location.href.substring(0,share_url.lastIndexOf("/"))+"/"+bookConfig.thumbPath+"1.jpg ";i=i.replaceAll("{thumb}",thumb,!0);if(0<=i.indexOf("{link_no_page}"))var o=window.location.href.replace(window.location.hash,""),i=i.replaceAll("{link_no_page}",o,!0);else 0<=i.indexOf("{link}")&&(i=i.replaceAll("{link}",Metacharacter(window.location.href),!0));i=i.replaceAll("{title}",window.document.title,!0);this.$button.attr("href",i?e?"mailto:?subject="+e+"&body="+i:"mailto:?body="+i:t+("mailto:?subject="+e));this.setSrc("emailButton",bookConfig.EmailButtonIcon);this.initLanguage("btnShareEmail","Share by Email")},onClick:function(t){}}).extend("ToolbarButton");Class("HelpButton",{create:function(){this._super();this.setSrc("Help",bookConfig.HelpButtonIcon);this.initLanguage("btnHelp","Help")},onClick:function(t){helpBody&&helpBody.showOrHide({left:t.pageX-t.offsetX,top:t.pageY-t.offsetY,width:$(t.target).width(),height:$(t.target).height()})}}).extend("ToolbarButton");Class("ThumbnailButton",{create:function(){this._super();this.setSrc("thumbnails",bookConfig.ThumbnailButtonIcon);this.initLanguage("btnThumb","Thumbnails")},onClick:function(t){thumbnail&&thumbnail.showOrHide()}}).extend("ToolbarButton");Class("ShareButton",{create:function(){this._super();this.setSrc("sharethis",bookConfig.ShareButtonIcon);this.initLanguage("btnSocialShare","Share")},onClick:function(t){sharePanel.showOrHide({left:t.pageX-t.offsetX,top:t.pageY-t.offsetY,width:$(t.target).width(),height:$(t.target).height()})}}).extend("ToolbarButton");Class("SearchButton",{create:function(){this._super();this.setSrc("search",bookConfig.SearchButtonIcon);this.initLanguage("btnSearch","Search")},onClick:function(t){frmSearch&&frmSearch.showOrHide()}}).extend("ToolbarButton");Class("DownloadButton",{create:function(){this._super();this.setSrc("download",bookConfig.DownloadButtonIcon);this.initLanguage("btnDownload","Download")},onClick:function(t){""!=bookConfig.DownloadURL&&window.open(bookConfig.DownloadURL,"_blank");bookConfig.googleAnalyticsID&&ga("send","event","download","click",bookConfig.DownloadURL);global.downLoadBody&&downLoadBody.showOrHide()}}).extend("ToolbarButton");Class("BookmarkButton",{create:function(){this._super();this.setSrc("bookmark",bookConfig.BookmarkButtonIcon);getLanguage("AnnotMark","")?this.initLanguage("AnnotMark","bookmark"):this.initLanguage("btnBookMark","Bookmark")},onClick:function(t){bookmark.showOrHide()}}).extend("ToolbarButton");Class("TableOfContentButton",{create:function(){this._super();this.setSrc("tableOfContent",bookConfig.TableOfContentButtonIcon);getLanguage("AnnotMark","")?this.initLanguage("btnBookMark","Table Of Contents"):this.initLanguage("btnTableOfContent","Table Of Contents")},onClick:function(t){frmTableOfContent&&frmTableOfContent.showOrHide()}}).extend("ToolbarButton");Class("LanguageButton",{create:function(){this._super();this.setSrc("languageChange",bookConfig.LanguageButtonIcon);this.initLanguage("btnLanguage","Language change")},onClick:function(t){global.languagePanel&&languagePanel.showOrHide()}}).extend("ToolbarButton");Class("PrintButton",{create:function(){this._super();this.setSrc("print",bookConfig.PrintButtonIcon);this.initLanguage("btnPrint","Print")},onClick:function(t){printBody&&printBody.showOrHide()}}).extend("ToolbarButton");Class("AboutButton",{create:function(){this._super();this.setSrc("about",bookConfig.AboutButtonIcon);this.initLanguage("btnAbout","About")},onClick:function(t){aboutBody&&aboutBody.showOrHide({left:t.pageX-t.offsetX,top:t.pageY-t.offsetY,width:$(t.target).width(),height:$(t.target).height()})}}).extend("ToolbarButton");Class("MoreButton",{create:function(){this._super();this.setSrc("moreBar");this.initLanguage("btnMore","More")},onClick:function(t){moreBar.visible?moreBar.hide():(t={left:t.pageX-t.offsetX,top:t.pageY-t.offsetY,width:this.width(),height:this.height()},moreBar.show(t))}}).extend("ToolbarButton");Class("AnnotationButton",{create:function(){this._super();this.setSrc("annotation",bookConfig.AnnotationButtonIcon);this.initLanguage("btnNote","Annotation")},onClick:function(t){global.annotationPannel.showOrHide()}}).extend("ToolbarButton");Class("VideoButton",{create:function(){this._super();this.setSrc("videoGallery",bookConfig.VideoButtonIcon);this.initLanguage("btnVideo","Video Gallery")},onClick:function(t){videoGallery&&videoGallery.showOrHide()}}).extend("ToolbarButton");Class("SlideshowButton",{create:function(){this._super();this.setSrc("photoGallery",bookConfig.SlideshowButtonIcon);this.initLanguage("btnSlideShow","Slideshow")},onClick:function(t){photoGallery.showOrHide()}}).extend("ToolbarButton");Class("BackwardButton",{create:function(){this._super();rightToLeft?this.setSrc("forward",bookConfig.ForwardButtonIcon):this.setSrc("backward",bookConfig.BackwardButtonIcon);this.initLanguage("btnPageBack","Backward")},onClick:function(t){flipHistory.backward()}}).extend("ToolbarButton");Class("ForwardButton",{create:function(){this._super();rightToLeft?this.setSrc("backward",bookConfig.BackwardButtonIcon):this.setSrc("forward",bookConfig.ForwardButtonIcon);this.initLanguage("btnPageForward","Forward")},onClick:function(t){flipHistory.forward()}}).extend("ToolbarButton");Class("StateSynchronous",{buttons:null,statics:{instance:function(){this.synchroner||(this.synchroner=new StateSynchronous);return this.synchroner}},create:function(){this.buttons=new ObjectPool},registButton:function(t){this.buttons.add(t)},findButtons:function(t,i){return i?this.buttons.find(t):this.buttons.match(t)},reportChanged:function(i){this.buttons.match(i.getClassName()).each(function(t){t!=i&&t.setStatusQuietly(i.getStatus())})}});Class("ToolbarStateButton",{status:-1,getFunctionName:function(t){var i=this.getClass().prototype,e;for(e in i)if(t==i[e])return e},bindStates:function(){this.states=[];for(var t=0;t<arguments.length;t++){var i=arguments[t],e=this.getFunctionName(i);this[e]=function(t,i){return function(){this.status!=i&&(this.status=i,t.apply(this,arguments),StateSynchronous.instance().reportChanged(this))}}(i,t);this.states[t]=e}StateSynchronous.instance().registButton(this)},setStatus:function(t){(t=this[this.states[t]])&&t.apply(this)},setStatusQuietly:function(t){if(this.status!=t){var i=this.getClass().prototype[this.states[t]];i&&(this.status=t,i.apply(this))}},getStatus:function(){return this.status},onClick:virtual_function,initLanguage:function(){this.language=[];for(var t=0;t<arguments.length;t++){var i=arguments[t],e;for(e in i)this.language.push({key:e,defaultValue:i[e]})}},changeLanguage:function(){if(this.language){var t=this.language[this.status],t=getLanguage(t.key,t.defaultValue);this.setCaption(t)}}}).extend("ToolbarButton");Class("ZoomButton",{create:function(){this._super();this.bindStates(this.setAsZoomin,this.setAsZoomout);this.initLanguage({btnZoomIn:"Zoom In"},{btnZoomOut:"Zoom Out"});this.setAsZoomin()},setAsZoomin:function(){this.setSrc("ZoomIn",bookConfig.ZoomInButtonIcon);this.changeLanguage();this.changeColor()},setAsZoomout:function(){this.setSrc("ZoomOut",bookConfig.ZoomOutButtonIcon);this.changeLanguage();this.changeColor()},executeZoomout:function(){var t=BookInfo.getBook().showPage;t.onDoubleTap.bind(t)({pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]});auto_player.isPlaying()&&auto_player.stop()},executeZoomin:function(){var t=BookInfo.getBook().showPage;t.onDoubleTap.bind(t)({pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]});auto_player.isPlaying()&&auto_player.stop()},zoomout:function(){this.executeZoomout();this.setAsZoomin()},zoomin:function(){this.executeZoomin();this.setAsZoomout()},onClick:function(t){BookInfo.isZoomming()||(BookInfo.zoomStatus()?this.zoomout():this.zoomin())}}).extend("ToolbarStateButton");Class("AutoPlayButton",{create:function(){this._super();this.bindStates(this.setAsStart,this.setAsStop);this.initLanguage({btnAutoFlip:"Auto Flip"},{btnStopAutoFlip:"Stop Auto Flip"});this.setAsStart()},setAsStart:function(){this.setSrc("autoPlay",bookConfig.AutoPlayStartButtonIcon);this.changeLanguage();this.changeColor()},setAsStop:function(){this.setSrc("stopAutoPlay",bookConfig.AutoPlayStopButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){auto_player&&(auto_player.isPlaying()?auto_player.stop():auto_player.start())}}).extend("ToolbarStateButton");Class("FullscreenButton",{create:function(){this._super();this.bindStates(this.setAsFullScreen,this.setAsExitFullScreen);this.initLanguage({btnFullscreen:"Fullscreen"},{btnExitFullscreen:"Exit Fullscreen"});this.setAsFullScreen()},setAsFullScreen:function(){this.setSrc("fullscreen",bookConfig.FullscreenButtonIcon);this.changeLanguage();this.changeColor()},setAsExitFullScreen:function(){this.setSrc("exitFullscreen",bookConfig.ExitFullscreenButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){readAsFullscreen()}}).extend("ToolbarStateButton");Class("WeChatShareButton",{create:function(){this._super();this.bindStates(this.setWeChatShare);this.initLanguage({btnWeCharShare:"WeChat Share"});this.setWeChatShare()},setWeChatShare:function(){this.setSrc("wechat",bookConfig.WeChatShareButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){},addEvents:function(){this._super();this.onMouseEnter()},onMouseEnter:function(){this.$button.bind("mouseenter",function(t){t.stopPropagation();t.preventDefault();global.WeChatShareImg.visible=!0;global.WeChatShareImg.show({left:t.pageX-t.offsetX,top:t.pageY-t.offsetY,width:$(t.target).width(),height:$(t.target).height()})}.bind(this));this.$button.bind("mouseleave",function(t){global.WeChatShareImg.visible=!1;setTimeout(function(){global.WeChatShareImg.visible||global.WeChatShareImg.hide()}.bind(this),200)}.bind(this))}}).extend("ToolbarStateButton");Class("BackgroundSoundButton",{create:function(){this._super();this.bindStates(this.setAsSoundOn,this.setAsSoundOff);this.initLanguage({btnSoundOn:"Sound On"},{btnSoundOff:"Sound Off"});this.setAsSoundOn()},setAsSoundOn:function(){this.setSrc("soundOn",bookConfig.BackgroundSoundButtonOnIcon);this.changeLanguage();this.changeColor()},setAsSoundOff:function(){!isPhone()&&!isPad()&&bookConfig.BackgroundSoundURL&&bookConfig.FlipSound&&bookConfig.BackgroundSoundButtonVisible||(this.setSrc("soundOff",bookConfig.BackgroundSoundButtonOffIcon),this.changeLanguage(),this.changeColor())},onClick:function(){global.bgSound&&(bookConfig.BackgroundSoundURL&&bookConfig.FlipSound?soundSetting&&soundSetting.showOrHide():bookConfig.BackgroundSoundURL?isPlaying?global.bgSound.pause():global.bgSound.play():(flipSoundIsPlaying=!flipSoundIsPlaying)?this.setAsSoundOn():this.setAsSoundOff())},addEvents:function(){this._super();this.onMouseEnter()},onMouseEnter:function(){bookConfig.BackgroundSoundURL&&(this.$button.bind("mouseenter",function(t){t&&"CANVAS"==t.target.tagName.toUpperCase()||setTimeout(function(){volumeControlBar.show({left:t.pageX-t.offsetX,top:t.pageY-t.offsetY,width:$(t.target).width(),height:$(t.target).height()})},200)}.bind(this)),this.$button.bind("mouseleave",function(t){setTimeout(function(){volumeControlBar.visible||volumeControlBar.hide()},200)}.bind(this)))}}).extend("ToolbarStateButton");Class("SelectTextButton",{create:function(){this._super();this.bindStates(this.setAsUnSelect,this.setAsSelect);this.initLanguage({btnSelectText:"Select Text"},{btnSelectText:"Select Text"});this.setAsUnSelect()},setAsSelect:function(){this.setSrc("text",bookConfig.SelectTextButtonIcon);this.changeColor("#bdc5e9");this.changeLanguage()},setAsUnSelect:function(){this.setSrc("text",bookConfig.SelectTextButtonIcon);this.changeColor();this.changeLanguage()},select:function(t){t=BookInfo.getCurrentPages();for(var i=0;i<t.length;i++){for(var e=t[i],o=!1,s=0;s<positionForPages.length;s++)if(positionForPages[s]&&positionForPages[s].page&&positionForPages[s].page==e){o=!0;break}if(!o){o=String.format(bookConfig.searchPositionJS,e);1<e&&(o=o.replace("[1]","["+e+"]"));if(!o.match(/\.*\/?(\w+\/)*\w+(\[|\()?\d+(\]|\))?\.js/gi))break;loadJavascript(o,function(){},function(){})}}BookInfo.getBook()&&BookInfo.getBook().select()},unSelect:function(){BookInfo.getBook()&&BookInfo.getBook().unSelect()},onClick:function(){BookInfo.getBook()&&BookInfo.getBook().flipping||(this.status?(this.setAsUnSelect(),this.unSelect(),this.status=0):(this.setAsSelect(),this.select(),this.status=1))}}).extend("ToolbarStateButton");Class("MunuZoomButton",{create:function(){this._super()},changeColor:function(){this.changeIconColor("#333");this.changeCaptionColor("#333")}}).extend("ZoomButton");Class("MunuFullscreenButton",{create:function(){this._super()},changeColor:function(){this.changeIconColor("#333");this.changeCaptionColor("#333")}}).extend("FullscreenButton");Class("MagnifierButton",{create:function(){this._super();this.bindStates(this.setAsZoomin,this.setAsZoomout);this.initLanguage({btnMagnifierIn:"Magnifier In"},{btnMagnifierOut:"Magnifier Out"});this.setAsZoomin()},setAsZoomin:function(){this.setSrc("magnifier",bookConfig.MagnifierButtonIcon);this.changeLanguage();this.changeColor();global.canMagnifierZoom=!1},setAsZoomout:function(){this.setSrc("magnifier",bookConfig.MagnifierButtonIcon);this.changeLanguage();this.changeColor("#bdc5e9");global.canMagnifierZoom=!0},magnifierZoom:function(){BookInfo.getBook()&&BookInfo.getBook().magnifierZoom()},unMagnifierZoom:function(){BookInfo.getBook()&&BookInfo.getBook().unMagnifierZoom()},onClick:function(t){global.canMagnifierZoom?(this.setAsZoomin(),this.unMagnifierZoom()):(this.setAsZoomout(),this.magnifierZoom())}}).extend("ToolbarStateButton");var getLogoLink=function(){return[bookConfig.appLogoLinkURL,bookConfig.appLogoOpenWindow]},initLogoBar=function(t){if(bookConfig.appLogoIcon){var i=$("#logoBar");t=i.height();var e=bookConfig.logoHeight,o=bookConfig.logoPadding,s=parseInt((t-e)/2),n=getLogoLink(),h=$("<img style='position:absolute;left:0;top:0;'/>");h.attr({src:bookConfig.appLogoIcon});h.on("load",function(){i.append(h);h.css({height:e+"px",top:s+"px"});i.css({left:o+"px",width:h[0].naturalWidth*e/h[0].naturalHeight+"px"});n[0]&&0>n[0].indexOf("javascript:void(0)")&&(h.click(function(){window.open(n[0],n[1])}),h.css({cursor:"pointer"}));if(global.toolBar&&global.toolBar.onResize)toolBar.onResize()})}},setPageIndexTextField=function(){setCurrentIndexTextField(BookInfo.getBook().getCurrentPageIndex(),bookType==BookType.normal_book||bookType==BookType.slide_book||bookType==BookType.catalog_book);void 0!=$("#currentPageIndexTextField")&&null!=$("#currentPageIndexTextField")&&void 0!=$("#currentPageIndexTextField")[0]&&null!=$("#currentPageIndexTextField")[0]&&($("#currentPageIndexTextField").bind("keydown",function(t){13==t.keyCode&&(t=$("#currentPageIndexTextField").val(),t=parseInt(getRealPage(t)),isNaN(t)||(t=Math.min(Math.max(t,1),bookConfig.totalPageCount),gotoPageFun(t)))}),$("#currentPageIndexTextField").bind("blur",function(){window.setTimeout(function(){setCurrentIndexTextField(BookInfo.getCurrentPageIndex())},400);this.onFocus=!1}),$("#currentPageIndexTextField").bind("focus",function(t){$("#currentPageIndexTextField").val("");this.onFocus=!0}))};(function(t){function i(t){if(!t)return 0;t=parseFloat(t.replace("px",""));return isNaN(t)?0:t}t.fn.left=function(){return i(this.css("left"))};t.fn.top=function(){return i(this.css("top"))};t.fn.right=function(){return i(this.css("right"))};t.fn.bottom=function(){return i(this.css("bottom"))}})(jQuery);Class("Toolbar",{topBar:null,bottomBar:null,buttons:null,visible:!0,isMoving:!1,extendedBar:null,color:null,create:function(t){this.parent=t;this.color=Color(bookConfig.toolbarColor);this.topBarAlpha=Math.min(bookConfig.topToolBarAlpha,bookConfig.ToolBarAlpha);this.bottomBarAlpha=Math.min(bookConfig.bottomToolBarAlpha,bookConfig.ToolBarAlpha);this.initButtons();this.initBar();this.initExtendedbar();this.initEvents();this.onResize()},initButtons:function(){this.buttons=new ObjectPool;this.buttons.add(new FirstPageButton);this.buttons.add(new PreviousPageButton);this.buttons.add(new NextPageButton);this.buttons.add(new LastPageButton);bookConfig.enablePageBack&&(this.buttons.add(new BackwardButton),this.buttons.add(new ForwardButton));bookConfig.HomeButtonVisible&&this.buttons.add(new HomeButton);bookConfig.ZoomButtonVisible&&this.buttons.add(new ZoomButton);bookConfig.SearchButtonVisible&&this.buttons.add(new SearchButton);bookConfig.ThumbnailsButtonVisible&&this.buttons.add(new ThumbnailButton);bookConfig.TableOfContentButtonVisible&&this.buttons.add(new TableOfContentButton);bookConfig.BookMarkButtonVisible&&this.buttons.add(new BookmarkButton);bookConfig.AutoPlayButtonVisible&&this.buttons.add(new AutoPlayButton);bookConfig.BackgroundSoundButtonVisible&&this.buttons.add(new BackgroundSoundButton);bookConfig.AnnotationButtonVisible&&this.buttons.add(new AnnotationButton);bookConfig.VideoButtonVisible&&this.buttons.add(new VideoButton);bookConfig.SlideshowButtonVisible&&this.buttons.add(new SlideshowButton);bookConfig.WeChatShareButtonVisible&&this.buttons.add(new WeChatShareButton);bookConfig.ShareButtonVisible&&this.buttons.add(new ShareButton);bookConfig.PrintButtonVisible&&this.buttons.add(new PrintButton);bookConfig.DownloadButtonVisible&&this.buttons.add(new DownloadButton);bookConfig.FullscreenButtonVisible&&this.buttons.add(new FullscreenButton);1<language.length&&this.buttons.add(new LanguageButton);bookConfig.aboutButtonVisible&&this.buttons.add(new AboutButton);bookConfig.HelpButtonVisible&&this.buttons.add(new HelpButton);bookConfig.EmailButtonVisible&&this.buttons.add(new ShareEmailButton);bookConfig.SelectTextButtonVisible&&this.buttons.add(new SelectTextButton);bookConfig.MagnifierButtonVisible&&this.buttons.add(new MagnifierButton);this.btnMore=new MoreButton;this.buttons.add(this.btnMore);this.sortXMLButton();this.buttons.each(function(t){t.setCallback(this.afterButtonClick.bind(this));this.setButtonTitle(t)}.bind(this))},sortXMLButton:function(){if(bookConfig.buttonsSortXML){var t=bookConfig.buttonsSortXML.slice().reverse(),i=t.indexOf("autoflip");0<=i&&(t[i]="autoplay");for(i=0;i<t.length;i++){var e="btnshare"==t[i]?this.matchButton("ShareButton"):this.pickButton(t[i]);e&&(this.buttons.objects.unshift(e),this.buttons.length+=1)}}},setButtonTitle:function(t){if("WeChatShareButton"==t.getClassName())global.WeChatShareImg=new WeChatShare({parent:this.parent,color:bookConfig.iconFontColor,textColor:bookConfig.toolbarColor,margin:10,padding:10,arrowHeight:10,arrowWidth:10});else{var i=new TextBubble({parent:this.parent,text:t.caption,color:this.color,textColor:t.fontColor,margin:7});t.setTitle(i)}},initBar:virtual_function,initExtendedbar:virtual_function,onResize:virtual_function,initEvents:function(){function t(){this.extendedBar.visible&&this.extendedBar.hide()}this.topBar&&this.topBar.bind("click",t.bind(this));this.bottomBar&&this.bottomBar.bind("click",t.bind(this))},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},getTopHeight:function(){var t=0,t=this.visible?this.topBar?this.topBar.height()+this.topBar.top():0:0;thumbnail&&(t+=thumbnail.getTopHeight());return t},getLogoHeight:function(){return this.topBar?this.topBar.height():0},getBottomHeight:function(){var t=0,t=this.visible?this.bottomBar?this.bottomBar.height()+this.bottomBar.bottom():0:0;thumbnail&&(t+=thumbnail.getBottomHeight());return t},getWidth:function(){return this.getLeftWidth()+this.getRightWidth()},getLeftWidth:function(){return 0},getRightWidth:function(){return 0},show:function(){if(!this.isMoving&&!this.visible)if(isIE8())this.topBar&&this.topBar.css({display:"block"}),this.bottomBar&&this.bottomBar.css({display:"block"}),this.visible=!0;else{this.isMoving=!0;if(this.topBar){var t=transformCSS({tran:{x:0,y:0}});animateOnce(this.topBar,t,500)}this.bottomBar&&(t=transformCSS({tran:{x:0,y:0}}),animateOnce(this.bottomBar,t,500));this.visible=!0;(function(){this.isMoving=!1}).delay(this,500)}},hide:function(){if(!this.isMoving&&this.visible){var t=this.getTopHeight()+5,i=this.getBottomHeight()+5;isIE8()?(this.topBar&&this.topBar.css({display:"none"}),this.bottomBar&&this.bottomBar.css({display:"none"}),this.visible=!1):(this.isMoving=!0,this.topBar&&(t=transformCSS({tran:{x:0,y:-t}}),animateOnce(this.topBar,t,500)),this.bottomBar&&(i=transformCSS({tran:{x:0,y:i}}),animateOnce(this.bottomBar,i,500)),this.visible=!1,function(){this.isMoving=!1}.delay(this,500))}},matchButton:function(t){t=this.buttons.match(t);if(0==t.length)return null;t.get(0)&&this.buttons.remove(t.get(0));return t.get(0)},getButton:function(t){t=this.buttons.find(t);return 0==t.length?null:t.get(0)},pickButton:function(t){(t=this.getButton(t))&&this.buttons.remove(t);return t},removeButton:function(t){"string"==typeof t&&(t=this.getButton(t));t&&this.buttons.remove(t)},addButton:function(t){t&&this.buttons.add(t)},changeFullscreenIcon:function(t){var i=this.getButton("fullscreen");i&&(t?i.setAsExitFullScreen():i.setAsFullScreen(),function(){this.onResize()}.delay(this,100))},changeLanguage:function(){this.buttons.each(function(t){t.changeLanguage()})},buttonsInExtendedBar:function(){var i=new ObjectPool;this.buttons.each(function(t){t.$parent==this.extendedBar.$bar&&i.add(t)}.bind(this));return i},afterButtonClick:function(t){this.extendedBar.visible&&(t!=this.btnMore?isPhone()||isPad()||this.extendedBar.hide():(t=this.buttonsInExtendedBar(),t.each(function(t){t.changeColor()}),t=null))},isRightToLeft:function(){var t=getLanguage("btnSearch","Search");return LanguageTool.isRightToLeft(t)}});Class("ExtendedBar",{$bar:null,visible:!1,color:null,height:10,isMoving:!1,create:function(t){this.$parent=t;this.color=Color(bookConfig.toolbarColor);this.$bar=$("<div class='extendedBar'></div>");this.isRightToLeft()&&this.$bar.addClass("rtl");this.$parent.append(this.$bar);this.$bar.css({"background-color":this.color.toString(),display:"none"})},isRightToLeft:function(){var t=getLanguage("btnSearch","Search");return LanguageTool.isRightToLeft(t)},show:function(t){if(!0!=this.isMoving&&!0!=this.visible){this.visible=this.isMoving=!0;this.$bar.css({left:t.left+t.width-this.width+"px",top:t.top+t.height+10+"px"});var i=0;this.$bar.css({display:"block",opacity:0});var e=function(){i+=.1;this.$bar.css({opacity:i});equals(i,1)&&(e.stop(),this.isMoving=!1)}.interval(this,40)}},hide:function(){if(!0!=this.isMoving&&!1!=this.visible){this.isMoving=!0;this.visible=!1;var t=1,i=function(){t-=.1;this.$bar.css({opacity:t});equals(t,0)&&(i.stop(),this.$bar.css("display","none"),this.isMoving=!1)}.interval(this,40)}},resize:virtual_function});var phoneSvgIconColor=Color(bookConfig.iconColor).toString(),fill="fill="+phoneSvgIconColor,phoneSvgIcons={about:'<svg class="svg" '+fill+' version="1.1" id="about" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve" ><path d="M10,2c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S5.6,2,10,2 M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10s10-4.5,10-10 S15.5,0,10,0z"/><path d="M10,9c0.6,0,1,0.4,1,1v4c0,0.6-0.4,1-1,1s-1-0.4-1-1v-4C9,9.4,9.4,9,10,9z"/><path d="M9,6c0,0.6,0.4,1,1,1s1-0.4,1-1c0-0.6-0.4-1-1-1C9.4,5,9,5.4,9,6C9,6,9,6,9,6z"/></svg>',addBookmark:'<svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"><path class="st0" d="M17,20c-0.2,0-0.3,0-0.5-0.1L10,16.1l-6.5,3.7C3,20.1,2.4,20,2.1,19.5C2.1,19.3,2,19.2,2,19V1c0-0.6,0.4-1,1-1 c0,0,0,0,0,0h14c0.6,0,1,0.4,1,1c0,0,0,0,0,0v18C18,19.5,17.5,20,17,20C17,20,17,20,17,20z M10,14c0.2,0,0.3,0,0.5,0.1l5.5,3.1V2H4 v15.2l5.5-3.1C9.7,14,9.8,14,10,14z"/> <path class="st0" d="M13,9H7C6.5,9,6,8.6,6,8v0c0-0.5,0.4-1,1-1h6c0.5,0,1,0.4,1,1v0C14,8.6,13.5,9,13,9z"/> <path class="st0" d="M11,5v6c0,0.5-0.4,1-1,1h0c-0.5,0-1-0.4-1-1V5c0-0.5,0.4-1,1-1h0C10.5,4,11,4.5,11,5z"/> </svg>',annotation:'<svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M5.1,11.7h9.6c0.6,0,1-0.4,1-1c0-0.6-0.4-1-1-1H5.1c-0.6,0-1,0.4-1,1C4.1,11.3,4.5,11.7,5.1,11.7z M5.1,7.6h9.6 c0.6,0,1-0.4,1-1s-0.4-1-1-1H5.1c-0.6,0-1,0.4-1,1C4.1,7.2,4.5,7.6,5.1,7.6z"/> <path class="st0" d="M16.8,0.1H3.1C1.4,0.1,0,1.5,0,3.2v11c0,1.7,1.4,3.1,3.1,3.1h2.6l2.8,2.5c0.2,0.2,0.5,0.2,0.6,0.2 c0.6,0,1.2-0.4,1.2-1.2v-1.6h6.5c1.7,0,3.1-1.4,3.1-3.1v-11C19.8,1.5,18.5,0.1,16.8,0.1z M2,3.2c0-0.6,0.4-1,1-1h13.7 c0.6,0,1,0.4,1,1v11c0,0.6-0.4,1-1,1H9.9c-0.5,0-0.8,0.2-1.2,0.5c-0.3,0.3-0.5,0.7-0.5,1.1L7,15.6c-0.3-0.3-0.8-0.5-1.2-0.5H3.1 c-0.6,0-1-0.4-1-1C2,14.1,2,3.2,2,3.2z"/> </svg>',arrow_down:'<svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"><path class="st0" d="M19.5,4.8C19.5,4.9,19.5,4.9,19.5,4.8c0.6,0.7,0.6,1.7-0.1,2.3l-8.3,8.1c-0.6,0.6-1.7,0.6-2.3,0L0.5,7.1l0,0c-0.6-0.6-0.6-1.6,0-2.2c0.7-0.6,1.7-0.6,2.3,0l7.2,6.9l7.1-6.9C17.8,4.2,18.8,4.2,19.5,4.8L19.5,4.8z"/></svg>',arrow_right:'<svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M4.8,0.5C4.9,0.5,4.9,0.5,4.8,0.5c0.7-0.6,1.7-0.6,2.3,0.1l8.1,8.3c0.6,0.6,0.6,1.7,0,2.3l-8.1,8.3l0,0 c-0.6,0.6-1.6,0.6-2.2,0c-0.6-0.7-0.6-1.7,0-2.3l6.9-7.2L4.9,2.9C4.2,2.2,4.2,1.2,4.8,0.5L4.8,0.5z"/> </svg> ',autoPlay:'<svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M10,2c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S5.6,2,10,2 M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10s10-4.5,10-10 S15.5,0,10,0z"/> <path class="st0" d="M8.6,14.6c-0.5,0-1-0.1-1.5-0.4c-1.1-0.6-1.6-2-1.6-4.2s0.6-3.4,1.7-4.1s2.6-0.5,4.5,0.6c2,1.1,2.9,2.3,2.9,3.5 s-0.9,2.5-2.9,3.5C10.6,14.3,9.5,14.6,8.6,14.6z M8.6,7.5c-0.2,0-0.4,0-0.5,0.1c-0.5,0.2-0.7,1.2-0.7,2.6s0.3,2.4,0.7,2.6 c0.5,0.3,1.5,0.1,2.7-0.6c1.3-0.7,2-1.4,2-1.9s-0.7-1.3-2-1.9C9.9,7.7,9.2,7.5,8.6,7.5z"/> </svg>',backward:'<svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M4.5,4.6h8.1c4.1,0,7.4,3.4,7.4,7.7s-3.3,7.7-7.4,7.7h-6c-0.7,0-1.3-0.6-1.3-1.4c0-0.7,0.6-1.4,1.3-1.4h6 c2.7,0,4.8-2.2,4.8-5s-2.1-5-4.8-5H4.5l2.1,2.1c0.5,0.5,0.6,1.4,0.1,1.9s-1.3,0.6-1.9,0.1c0,0,0,0-0.1-0.1L0.4,6.9 c-0.5-0.5-0.5-1.4,0-1.9l4.3-4.5C5.2,0,6,0,6.6,0.5s0.5,1.4,0,1.9c0,0,0,0,0,0L4.5,4.6L4.5,4.6z"/> </svg> ',bookmark:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M17,20c-0.2,0-0.3,0-0.5-0.1L10,16.1l-6.5,3.7C3,20.1,2.4,20,2.1,19.5C2.1,19.3,2,19.2,2,19V1c0-0.6,0.4-1,1-1 c0,0,0,0,0,0h14c0.6,0,1,0.4,1,1c0,0,0,0,0,0v18C18,19.5,17.5,20,17,20C17,20,17,20,17,20z M10,14c0.2,0,0.3,0,0.5,0.1l5.5,3.1V2H4 v15.2l5.5-3.1C9.7,14,9.8,14,10,14z"/> </svg> ',close:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M11.9,10l5.7-5.7c0.5-0.5,0.5-1.4,0-1.9s-1.4-0.5-1.9,0l0,0L10,8.1L4.3,2.4c-0.5-0.5-1.4-0.5-1.9,0 s-0.5,1.4,0,1.9l0,0L8.1,10l-5.7,5.7c-0.5,0.5-0.5,1.4,0,1.9c0,0,0,0,0,0c0.5,0.5,1.4,0.5,1.9,0c0,0,0,0,0,0l5.7-5.7l5.7,5.7 c0.5,0.5,1.4,0.5,1.9,0c0,0,0,0,0,0c0.5-0.5,0.5-1.4,0-1.9c0,0,0,0,0,0L11.9,10z"/> </svg> ',download:'<?xml version="1.0" encoding="utf-8"?><svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M18,20H2c-1.1,0-2-0.9-2-2c0,0,0,0,0,0v-5c0-0.6,0.4-1,1-1s1,0.4,1,1l0,0v5h16v-5c0-0.6,0.4-1,1-1 c0.6,0,1,0.4,1,1v5C20,19.1,19.1,20,18,20L18,20z"/> <path class="st0" d="M14.7,9.5l-4.1,4.2c-0.4,0.4-0.9,0.4-1.3,0c0,0,0,0,0,0l-4-4.2c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,0.9-0.4,1.3,0 c0,0,0,0,0,0l2.4,2.5V0.9C9.1,0.4,9.5,0,10,0C10.5,0,11,0.4,11,0.9v9.7l2.4-2.5c0.4-0.4,0.9-0.4,1.3,0c0,0,0,0,0,0 C15.1,8.5,15.1,9.2,14.7,9.5z"/> </svg> ',firstPage:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M18.1,19.5C18,19.5,18,19.5,18.1,19.5c-0.7,0.6-1.7,0.6-2.3,0l-8.1-8.3c-0.6-0.6-0.6-1.7,0-2.3l8.1-8.3 c0,0,0,0,0,0c0.6-0.6,1.6-0.6,2.2,0c0.6,0.7,0.6,1.7,0,2.3L11.1,10l6.9,7.1C18.7,17.8,18.7,18.8,18.1,19.5L18.1,19.5z M4.3,18.6 c0,0.8-0.6,1.4-1.4,1.4c-0.8,0-1.4-0.6-1.4-1.4V1.5c0-0.8,0.6-1.4,1.4-1.4c0.8,0,1.4,0.6,1.4,1.4C4.3,1.5,4.3,18.6,4.3,18.6z"/> </svg> ',forward:'<?xml version="1.0" encoding="utf-8"?><svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M15.5,4.6l-2.1-2.2c0,0,0,0,0,0c-0.5-0.5-0.5-1.4,0-1.9s1.3-0.5,1.9,0L19.6,5c0.5,0.5,0.5,1.4,0,1.9l-4.3,4.5 c0,0,0,0-0.1,0.1c-0.5,0.5-1.4,0.5-1.9-0.1s-0.5-1.4,0.1-1.9l2.1-2.1H7.4c-2.7,0-4.8,2.2-4.8,5s2.1,5,4.8,5h6c0.7,0,1.3,0.6,1.3,1.4 c0,0.7-0.6,1.4-1.3,1.4h-6c-4.1,0-7.4-3.4-7.4-7.7s3.3-7.7,7.4-7.7H15.5L15.5,4.6z"/> </svg> ',gotoPage:'<?xml version="1.0" encoding="utf-8"?><svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M10,2c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S5.6,2,10,2 M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10s10-4.5,10-10 S15.5,0,10,0z"/> <path class="st0" d="M14.8,9.5l-3-3c-0.3-0.3-0.8-0.3-1.1,0s-0.3,0.8,0,1.1l0,0l1.7,1.7h-6V8.1c0-0.4-0.3-0.8-0.8-0.8 S4.9,7.7,4.9,8.1v1.5c0,0.1,0,0.1,0,0.2c0,0.1,0,0.1,0,0.2c0,0.4,0.3,0.8,0.8,0.8h6.8l-1.7,1.7c-0.3,0.3-0.3,0.8,0,1.1 s0.8,0.3,1.1,0l0,0l3-3C15.1,10.3,15.1,9.8,14.8,9.5z"/> </svg> ',help:'<?xml version="1.0" encoding="utf-8"?><svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M10,2c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S5.6,2,10,2 M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10s10-4.5,10-10 S15.5,0,10,0z"/> <path class="st0" d="M10.2,4.8c0.9,0,1.7,0.2,2.2,0.7c0.6,0.5,0.8,1.2,0.8,2c0,0.7-0.2,1.3-0.5,1.7c-0.1,0.2-0.6,0.5-1.2,1.1 c-0.2,0.2-0.4,0.4-0.6,0.7c-0.1,0.3-0.2,0.6-0.2,0.9v0.2H9.1v-0.2c0-0.6,0.1-1,0.3-1.4s0.7-1,1.6-1.8l0.2-0.2c0.3-0.3,0.4-0.6,0.4-1 s-0.1-0.8-0.4-1.1C10.9,6.1,10.6,6,10.1,6C9.5,6,9,6.2,8.8,6.6C8.5,7.1,8.4,7.5,8.4,8.1H6.8c0-1,0.3-1.9,0.9-2.4 C8.3,5.1,9.1,4.8,10.2,4.8z M9.9,12.9c0.3,0,0.6,0.1,0.8,0.3s0.3,0.5,0.3,0.8s-0.1,0.6-0.3,0.8s-0.5,0.3-0.8,0.3S9.4,15,9.1,14.8 c-0.2-0.3-0.3-0.6-0.3-0.9c0-0.3,0.1-0.6,0.3-0.8C9.4,13,9.6,12.9,9.9,12.9z"/> </svg> ',home:'<?xml version="1.0" encoding="utf-8"?><svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M20,9.6c0-0.3-0.2-0.6-0.4-0.8c-0.6-0.6-1.3-1.2-1.9-1.8l-4-3.9l-2.9-2.8c-0.4-0.4-1-0.4-1.3,0l-7,6.8L2.2,7.3 L0.4,9.1C0.1,9.3,0,9.6,0,10c0,0.3,0.2,0.6,0.4,0.8c0.2,0.2,0.4,0.2,0.7,0.2c0.3,0,0.6-0.1,0.8-0.3c0.3-0.3,0.7-0.6,1-1l3.9-3.8 l2.6-2.5c0.3-0.3,0.8-0.3,1.1,0L16,8.6l2,1.9c0.2,0.3,0.6,0.4,1,0.3C19.6,10.8,20,10.2,20,9.6L20,9.6z"/> <path class="st0" d="M17.1,10.2h-1.2c-0.3,0-0.5,0.2-0.5,0.5l0,0v6.8c0,0.1-0.1,0.3-0.3,0.3H5c-0.1,0-0.3-0.1-0.3-0.3v-6.4v-0.5 c0-0.1,0-0.2-0.1-0.3c-0.1-0.1-0.2-0.1-0.3-0.1H3c-0.3,0-0.5,0.2-0.5,0.5v8c0,0.3,0.1,0.5,0.3,0.7c0.3,0.3,0.7,0.5,1.1,0.5h12.2 c0.7,0,1.3-0.6,1.4-1.3c0,0,0,0,0-0.1V15v-4.3c0-0.1,0-0.2-0.1-0.3C17.3,10.2,17.2,10.2,17.1,10.2z"/> </svg> ',instructions:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M10,2c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S5.6,2,10,2 M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10s10-4.5,10-10 S15.5,0,10,0z"/> <path class="st0" d="M10.2,4.8c0.9,0,1.7,0.2,2.2,0.7c0.6,0.5,0.8,1.2,0.8,2c0,0.7-0.2,1.3-0.5,1.7c-0.1,0.2-0.6,0.5-1.2,1.1 c-0.2,0.2-0.4,0.4-0.6,0.7c-0.1,0.3-0.2,0.6-0.2,0.9v0.2H9.1v-0.2c0-0.6,0.1-1,0.3-1.4s0.7-1,1.6-1.8l0.2-0.2c0.3-0.3,0.4-0.6,0.4-1 s-0.1-0.8-0.4-1.1C10.9,6.1,10.6,6,10.1,6C9.5,6,9,6.2,8.8,6.6C8.5,7.1,8.4,7.5,8.4,8.1H6.8c0-1,0.3-1.9,0.9-2.4 C8.3,5.1,9.1,4.8,10.2,4.8z M9.9,12.9c0.3,0,0.6,0.1,0.8,0.3s0.3,0.5,0.3,0.8s-0.1,0.6-0.3,0.8s-0.5,0.3-0.8,0.3S9.4,15,9.1,14.8 c-0.2-0.3-0.3-0.6-0.3-0.9c0-0.3,0.1-0.6,0.3-0.8C9.4,13,9.6,12.9,9.9,12.9z"/> </svg> ',languageChange:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10c3.1,0,6-1.4,7.9-3.9c0.3-0.4,0.2-0.9-0.2-1.2c-0.4-0.3-0.9-0.2-1.2,0.2 l0,0c-0.5,0.6-1,1.1-1.6,1.6c0-1.5-0.3-3.1-2.1-4.1c-2.1-1.1-2.4-1.7-2.1-2.2c0.2-0.4,0.3-0.5,1.5-0.1c0.6,0.2,1.3,0.5,2,0.1 c0.2-0.1,0.6-0.4,0.8-0.9c0.3-0.8,2-1.5,3-1.8c0.2,0.8,0.4,1.6,0.4,2.4c0,0.5,0.4,0.8,0.8,0.8S20,10.5,20,10C20,4.5,15.5,0,10,0z M13.9,2.7c-0.7,0.9-2.3,2.8-3.7,2.4C8.9,4.6,9,2.9,9.1,1.9c0-0.1,0-0.1,0-0.2C10.8,1.6,12.5,1.9,13.9,2.7z M1.7,10 c0-0.5,0-1,0.1-1.5c0.7,0.3,1.8,0.3,2.8-0.3C5,8,5.2,7.8,5.5,7.7C6,7.3,6,7.3,6.3,7.4c0.1,0.1,0.3,0.7,0.1,1.5 c-0.2,0.7-0.8,1.6-2.3,2c-0.4,0.1-0.7,0.5-0.6,1c0,0.2,0.2,0.4,0.4,0.5C4.5,12.8,5,13.7,5,14.2c0,0.6,0,0.9-1,1.6 C2.5,14.2,1.7,12.1,1.7,10z M13.4,8.8c-0.2-0.1-0.4-0.1-0.6-0.2c-0.9-0.3-2.7-0.9-3.5,1.1c-0.9,2.3,1.5,3.7,2.9,4.4 c1.2,0.6,1.2,1.6,1.2,3.4c0,0,0,0.1,0,0.1c-1.1,0.5-2.2,0.7-3.3,0.7c-1.7,0-3.3-0.5-4.7-1.5c1.3-1,1.4-1.7,1.4-2.7 c0-0.7-0.3-1.5-0.9-2.2C7.7,11,8,9.2,8.1,8.6C8.2,7.4,7.8,6.3,7,5.9C5.9,5.4,5.2,5.8,4.5,6.3C4.3,6.4,4.1,6.6,3.8,6.8 C3,7.3,2.4,7,2.3,6.9c0.9-2.3,2.8-4.1,5.1-4.8C7.2,4.4,8,6.1,9.7,6.6c0.3,0.1,0.6,0.2,1,0.2c0.6,0,1.3-0.2,2-0.6 c1.1-0.6,2.1-1.8,2.7-2.6c0.8,0.7,1.5,1.5,2,2.5C16.1,6.5,14,7.3,13.4,8.8z"/> </svg> ',lastPage:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M1.9,19.5c-0.6-0.7-0.6-1.7,0-2.3L8.8,10L1.9,2.9c-0.6-0.7-0.6-1.7,0-2.3c0.6-0.6,1.6-0.6,2.2,0c0,0,0,0,0,0 l8.1,8.3c0.6,0.6,0.6,1.7,0,2.3l-8.1,8.3C3.6,20.1,2.6,20.1,1.9,19.5C1.9,19.5,1.9,19.5,1.9,19.5L1.9,19.5z M15.7,1.5 c0-0.8,0.6-1.4,1.4-1.4c0.8,0,1.4,0.6,1.4,1.4v17.1c0,0.8-0.6,1.4-1.4,1.4c-0.8,0-1.4-0.6-1.4-1.4C15.7,18.6,15.7,1.5,15.7,1.5z"/> </svg> ',moreBar:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M10,2c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S5.6,2,10,2 M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10s10-4.5,10-10 S15.5,0,10,0z"/> <circle class="st0" cx="14" cy="10" r="1.3"/> <circle class="st0" cx="10" cy="10" r="1.3"/> <circle class="st0" cx="6" cy="10" r="1.3"/> </svg> ',nextPage:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M4.8,0.5C4.9,0.5,4.9,0.5,4.8,0.5c0.7-0.6,1.7-0.6,2.3,0.1l8.1,8.3c0.6,0.6,0.6,1.7,0,2.3l-8.1,8.3l0,0 c-0.6,0.6-1.6,0.6-2.2,0c-0.6-0.7-0.6-1.7,0-2.3l6.9-7.2L4.9,2.9C4.2,2.2,4.2,1.2,4.8,0.5L4.8,0.5z"/> </svg> ',note:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+'  version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M17,0H3C1.9,0,1,0.9,1,2v16c0,1.1,0.9,2,2,2h10.2c0.3,0,0.5-0.1,0.7-0.3l4.8-4.8c0.2-0.2,0.3-0.4,0.3-0.7V2 C19,0.9,18.1,0,17,0z M3,2h14v10h-5c-0.6,0-1,0.4-1,1v5H3V2z M13,17.8V14h3.8C16.8,14,13,17.8,13,17.8z"/> </svg> ',phoneEmail:'<?xml version="1.0" encoding="utf-8"?>  <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M17,18.5H3c-1.7,0-3-1.3-3-3v-11c0-1.7,1.3-3,3-3h14c1.7,0,3,1.3,3,3v11C20,17.2,18.7,18.5,17,18.5z M3,3.5 c-0.6,0-1,0.4-1,1v11c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v0v-11c0-0.6-0.4-1-1-1l0,0H3z"/> <path class="st0" d="M10,12.4c-0.7,0-1.3-0.3-1.8-0.7l-7-7l1.4-1.4l7,7c0.2,0.2,0.5,0.2,0.7,0c0,0,0,0,0,0l7-7l1.5,1.4l-7,7 C11.3,12.1,10.7,12.4,10,12.4z"/> </svg> ',phoneWeChat:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M14.2,6.7c3.2,0,5.8,2.4,5.8,5.3c0,1-0.3,2-0.9,2.8c-0.3,0.4-0.8,0.5-1.2,0.2c-0.4-0.3-0.5-0.8-0.2-1.2l0,0 c0.4-0.6,0.6-1.2,0.6-1.8c0-2-1.9-3.6-4.2-3.6S9.9,10,9.9,12c0,2,1.9,3.6,4.2,3.6c0.7,0,1.3-0.1,1.9-0.4c0.3-0.1,0.3-0.1,0.6,0 c0.3,0.1,0.9,1,1.3,1.3c0.4,0.3,0.5,0.8,0.2,1.2s-0.8,0.5-1.2,0.2c0,0,0,0,0,0c-0.3-0.2-0.6-0.5-0.9-0.8c-0.6,0.2-1.3,0.3-1.9,0.3 c-2.1,0-4-1-5-2.5c-0.1,0.1-0.2,0.1-0.3,0.1c-0.5,0.1-1,0.2-1.6,0.2c-0.9,0-1.7-0.1-2.5-0.4c-0.3,0.4-0.7,0.7-1.2,1.1 c-0.4,0.3-0.9,0.2-1.2-0.2c-0.3-0.4-0.2-0.9,0.2-1.2c0,0,0,0,0,0c0.6-0.4,1.4-1.5,1.6-1.6c0.2-0.1,0.4,0,0.6,0 c0.8,0.3,1.6,0.5,2.5,0.5c0.4,0,0.8,0,1.2-0.1c-0.1-0.4-0.2-0.8-0.2-1.2c0-2.4,1.8-4.4,4.3-5.1c-0.8-1.9-2.9-3.2-5.3-3.2 c-3.1,0-5.6,2.2-5.6,4.8c0,1.1,0.4,2.1,1.2,3c0.3,0.3,0.3,0.9-0.1,1.2c-0.3,0.3-0.9,0.3-1.2-0.1C0.6,11.5,0,10,0,8.5 c0-3.6,3.3-6.5,7.3-6.5C10.5,2.1,13.3,4,14.2,6.7z M5.6,8C5,8,4.5,7.5,4.5,6.8c0-0.6,0.5-1.2,1.1-1.2s1.1,0.5,1.1,1.2 C6.8,7.5,6.2,8,5.6,8z M9.3,8C8.7,8,8.2,7.5,8.2,6.8c0-0.6,0.5-1.2,1.1-1.2s1.1,0.5,1.1,1.2C10.4,7.5,9.9,8,9.3,8z M12.7,12.1 c-0.5,0-0.8-0.4-0.8-0.9s0.4-0.9,0.8-0.9c0.5,0,0.8,0.4,0.8,0.9S13.1,12.1,12.7,12.1L12.7,12.1z M16.3,12.1c-0.5,0-0.8-0.4-0.8-0.9 s0.4-0.9,0.8-0.9c0.5,0,0.8,0.4,0.8,0.9S16.8,12.1,16.3,12.1L16.3,12.1z"/> </svg> ',previousPage:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M15.2,19.5C15.1,19.5,15.1,19.5,15.2,19.5c-0.7,0.6-1.7,0.6-2.3,0l-8.1-8.3c-0.6-0.6-0.6-1.7,0-2.3l8.1-8.3l0,0 c0.6-0.6,1.6-0.6,2.2,0c0.6,0.7,0.6,1.7,0,2.3L8.2,9.9l6.9,7.1C15.8,17.8,15.8,18.8,15.2,19.5L15.2,19.5z"/> </svg> ',print:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+'  version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M13,0H7C5.9,0,5,0.9,5,2l0,0v2.4h10V2C15,0.9,14.1,0,13,0z M13.1,3.8H6.9V2.6c0-0.4,0.3-0.7,0.7-0.7 c0,0,0,0,0,0h4.8c0.4,0,0.7,0.3,0.7,0.7c0,0,0,0,0,0V3.8z"/> <path class="st0" d="M18,3.8H2c-1.1,0-2,0.9-2,2c0,0,0,0,0,0v6c0,1.1,0.9,2,2,2h4.9v-1.9H2.6c-0.4,0-0.7-0.3-0.7-0.7c0,0,0,0,0,0 V6.4c0-0.4,0.3-0.7,0.7-0.7c0,0,0,0,0,0h14.8c0.4,0,0.7,0.3,0.7,0.7c0,0,0,0,0,0v4.8c0,0.4-0.3,0.8-0.8,0.8l0,0h-4.3v1.9H18 c1.1,0,2-0.9,2-2c0,0,0,0,0,0v-6C20,4.6,19.1,3.7,18,3.8z"/> <path class="st0" d="M5,10v8c0,1.1,0.9,2,2,2c0,0,0,0,0,0h6c1.1,0,2-0.9,2-2l0,0v-8H5z M13.1,17.4c0,0.4-0.3,0.8-0.8,0.8H7.6 c-0.4,0-0.8-0.3-0.8-0.8v-5.5h6.3V17.4z"/> <path class="st0" d="M9.1,13.5h1.9c0.6,0,0.9,0.3,0.9,0.9l0,0c0,0.6-0.3,0.9-0.9,0.9H9.1c-0.6,0-0.9-0.3-0.9-0.9l0,0 C8.1,13.8,8.4,13.5,9.1,13.5z"/> </svg> ',report:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M19.6,15l-7-13.4C11.7,0,9.8-0.5,8.3,0.6C7.9,0.9,7.6,1.2,7.4,1.7L0.4,15c-0.5,1-0.5,2.2,0,3.2 C0.9,19.3,1.9,20,3,20H17c1.1,0,2.1-0.7,2.7-1.7C20.1,17.2,20.1,16,19.6,15z M18,17.2c-0.2,0.4-0.6,0.7-1.1,0.7H3 c-0.4,0-0.9-0.2-1.1-0.7c-0.2-0.3-0.2-0.7,0-1.1l7-13.4c0.4-0.7,1.3-0.8,1.9-0.3c0.1,0.1,0.2,0.2,0.3,0.3l7,13.4 C18.2,16.5,18.2,16.9,18,17.2z"/> <path class="st0" d="M9.1,14.7c0,0.6,0.4,1.1,0.9,1.1c0.5,0,0.9-0.5,0.9-1.1s-0.4-1.1-0.9-1.1C9.5,13.7,9.1,14.1,9.1,14.7z"/> <path class="st0" d="M10,6.3c-0.5,0-0.9,0.5-0.9,1.1v4.2c0,0.6,0.4,1.1,0.9,1.1c0.5,0,0.9-0.5,0.9-1.1V7.4C10.9,6.8,10.5,6.3,10,6.3 L10,6.3z"/> </svg> ',search:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="serachSvg" d="M9.6,19.1C4.3,19.1,0,14.8,0,9.5S4.3,0,9.6,0s9.5,4.3,9.5,9.5S14.8,19.1,9.6,19.1z M9.6,1.8 c-4.3,0-7.7,3.4-7.7,7.7s3.4,7.7,7.7,7.7s7.7-3.4,7.7-7.7S13.8,1.8,9.6,1.8z"/> <path class="st0" d="M16.9,15.5l2.9,2.9c0.3,0.5,0.2,1-0.2,1.3c-0.4,0.3-0.8,0.3-1.1,0l-2.9-2.9c-0.3-0.5-0.2-1,0.2-1.3 C16,15.2,16.5,15.2,16.9,15.5z"/> </svg> ',settings:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M10,2.2L3.2,6.1v7.8l6.8,3.9l6.8-3.9V6.1L10,2.2z M10.5,0.2l7.8,4.5c0.3,0.2,0.5,0.5,0.5,0.9v9 c0,0.4-0.2,0.7-0.5,0.9l-7.8,4.5c-0.3,0.2-0.7,0.2-1,0l-7.8-4.5c-0.3-0.2-0.5-0.5-0.5-0.9v-9c0-0.4,0.2-0.7,0.5-0.9l7.8-4.5 C9.8,0,10.2,0,10.5,0.2z M10,7.2c1.6,0,2.8,1.3,2.8,2.8s-1.3,2.8-2.8,2.8S7.2,11.6,7.2,10S8.4,7.2,10,7.2z M10,11.1 c0.6,0,1.1-0.5,1.1-1.1c0-0.6-0.5-1.1-1.1-1.1c0,0,0,0,0,0c-0.6,0-1.1,0.5-1.1,1.1C8.9,10.6,9.4,11.1,10,11.1z"/> </svg> ',sharethis:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M20,1.1v6.7c0,0.6-0.5,1.1-1.1,1.1c-0.6,0-1.1-0.5-1.1-1.1v-4l-7,7c-0.4,0.4-1.1,0.5-1.6,0 c-0.4-0.4-0.5-1.1,0-1.6c0,0,0,0,0,0l7-7h-4c-0.6,0-1.1-0.5-1.1-1.1S11.6,0,12.2,0h6.7C19.5,0,20,0.5,20,1.1C20,1.1,20,1.1,20,1.1z M7.5,0.3c0.6-0.1,1.2,0.2,1.3,0.8C9,1.7,8.6,2.3,8.1,2.5c-4.2,1.1-6.7,5.3-5.6,9.5s5.3,6.7,9.5,5.6c2.7-0.7,4.9-2.8,5.6-5.6 c0.1-0.6,0.7-1,1.3-0.8c0.6,0.1,1,0.7,0.8,1.3c0,0,0,0,0,0c-1.4,5.3-6.8,8.6-12.2,7.2c-5.3-1.4-8.6-6.8-7.2-12.2 C1.2,4,4,1.2,7.5,0.3z"/> </svg> ',shoppingCart:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M19.7,4.9c-0.4-0.6-1-1-1.7-1H4.8L4.2,1.5C4,1,3.6,0.7,3.1,0.8H1.1c-0.6,0-1,0.5-1,1s0.5,1,1,1h1.3l2.8,10.5 c0.1,0.5,0.5,0.8,1,0.8h9.2c0.4,0,0.7-0.2,0.9-0.6l3.4-6.7C20,6.2,20,5.5,19.7,4.9z M14.8,12.1H7L5.3,5.9h12.6L14.8,12.1z"/> <path class="st0" d="M4.7,17.7c0,0.9,0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5s-0.7-1.5-1.5-1.5S4.7,16.9,4.7,17.7z"/> <path class="st0" d="M14,17.7c0,0.9,0.7,1.5,1.5,1.5c0.9,0,1.5-0.7,1.5-1.5s-0.7-1.5-1.5-1.5C14.7,16.2,14,16.9,14,17.7z"/> </svg> ',soundOff:'<?xml version="1.0" encoding="utf-8"?>  <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M3,1.9c-0.4-0.4-1-0.4-1.3,0s-0.4,1,0,1.3l14.9,14.9c0.4,0.4,1,0.4,1.3,0c0,0,0,0,0,0c0.4-0.4,0.4-1,0-1.3 c0,0,0,0,0,0L3,1.9z M14.3,11.9l1.3,1.3c1.4-2,1.4-4.7-0.1-6.7c-0.3-0.4-0.9-0.5-1.3-0.1c-0.4,0.3-0.5,0.9-0.1,1.3 C15.1,9,15.1,10.6,14.3,11.9z"/> <path class="st0" d="M18.1,10c0,1.5-0.6,3-1.7,4.1l1.3,1.3C19.2,13.9,20,12,20,10c0-2.5-1.2-4.8-3.1-6.3c-0.4-0.3-1-0.3-1.3,0.1 c-0.3,0.4-0.3,1,0.1,1.3C17.2,6.3,18.1,8.1,18.1,10z M11.2,15.7l-4.7-3.3c-0.2-0.1-0.3-0.2-0.5-0.2h-4V7.7h3L3,5.9H0.9 C0.4,5.9,0,6.3,0,6.8v6.4c0,0.5,0.4,0.9,0.9,0.9c0,0,0,0,0,0h4.7l6,4.1c0.2,0.1,0.3,0.2,0.5,0.2c0.5,0,0.9-0.4,0.9-0.9c0,0,0,0,0,0 v-1.6L11.1,14L11.2,15.7z M11.2,4.3v4.4l1.9,1.9V2.6c0-0.5-0.4-0.9-0.9-0.9c-0.2,0-0.4,0.1-0.5,0.2l-4.4,3l1.3,1.3L11.2,4.3z"/> </svg> ',soundOn:'<?xml version="1.0" encoding="utf-8"?>  <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M15.6,6.6c-0.3-0.4-0.9-0.5-1.3-0.1c-0.4,0.3-0.5,0.9-0.1,1.3c1,1.3,1,3.1,0,4.4c-0.3,0.4-0.3,1,0.1,1.3 c0.2,0.1,0.4,0.2,0.6,0.2c0.3,0,0.5-0.1,0.7-0.3C17.1,11.4,17.1,8.6,15.6,6.6z"/> <path class="st0" d="M16.9,3.7c-0.4-0.3-1-0.3-1.3,0.1c-0.3,0.4-0.3,1,0.1,1.3c1.5,1.2,2.4,3,2.5,4.9c0,1.9-0.9,3.7-2.5,4.9 c-0.4,0.3-0.5,0.9-0.1,1.3c0,0,0,0,0,0c0.2,0.2,0.4,0.3,0.7,0.3c0.2,0,0.4-0.1,0.6-0.2c1.9-1.5,3.1-3.8,3.1-6.3 C20,7.5,18.8,5.2,16.9,3.7z M12.6,1.7c-0.3-0.2-0.6-0.2-0.9,0l-6,4.1H0.9C0.4,5.9,0,6.3,0,6.8v6.4c0,0.5,0.4,0.9,0.9,0.9 c0,0,0,0,0,0h4.7l6,4.1c0.2,0.1,0.3,0.2,0.5,0.2c0.5,0,0.9-0.4,0.9-0.9c0,0,0,0,0,0V2.6C13,2.2,12.8,1.9,12.6,1.7z M11.2,15.7 l-4.8-3.3c-0.2-0.1-0.3-0.2-0.5-0.2h-4V7.7h4c0.2,0,0.4-0.1,0.5-0.2l4.7-3.3L11.2,15.7z"/> </svg> ',stopAutoPlay:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M10,2c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S5.6,2,10,2 M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10s10-4.5,10-10 S15.5,0,10,0z"/> <path class="st0" d="M7.8,13.6L7.8,13.6c-0.5,0-1-0.4-1-1V7.3c0-0.5,0.4-1,1-1l0,0c0.5,0,1,0.4,1,1v5.3C8.7,13.1,8.3,13.6,7.8,13.6z "/> <path class="st0" d="M12.2,13.6L12.2,13.6c-0.5,0-1-0.4-1-1V7.4c0-0.5,0.4-1,1-1l0,0c0.5,0,1,0.4,1,1v5.3 C13.1,13.3,12.7,13.6,12.2,13.6z"/> </svg> ',tableOfContent:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M18.6,0H5.7C5,0,4.3,0.7,4.3,1.5S5,2.9,5.7,2.9h12.8c0.8,0,1.4-0.6,1.4-1.4S19.3,0,18.6,0z M18.6,8.4H5.7 C5,8.4,4.3,9.1,4.3,9.9c0,0.8,0.6,1.4,1.4,1.4h12.8c0.8,0,1.4-0.6,1.4-1.4S19.3,8.4,18.6,8.4z M18.6,16.9H5.7 c-0.8,0-1.4,0.6-1.4,1.4c0,0.8,0.6,1.4,1.4,1.4h12.8c0.8,0,1.4-0.6,1.4-1.4C20,17.5,19.3,16.9,18.6,16.9z M1.4,0.1 C0.6,0.1,0,0.7,0,1.5v0c0,0.8,0.6,1.4,1.4,1.4c0.8,0,1.4-0.6,1.4-1.4v0C2.8,0.7,2.2,0.1,1.4,0.1z M1.4,8.5C0.6,8.5,0,9.1,0,9.9v0 c0,0.8,0.6,1.4,1.4,1.4c0.8,0,1.4-0.6,1.4-1.4v0C2.8,9.1,2.2,8.5,1.4,8.5z M1.4,16.9c-0.8,0-1.4,0.6-1.4,1.4v0 c0,0.8,0.6,1.4,1.4,1.4c0.8,0,1.4-0.6,1.4-1.4v0C2.8,17.6,2.2,16.9,1.4,16.9z"/> </svg> ',tel:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M11,6c1.7,0,3,1.3,3,3c0,0.6,0.4,1,1,1c0.6,0,1-0.4,1-1c0-2.8-2.2-5-5-5c-0.6,0-1,0.4-1,1S10.5,6,11,6z"/> <path class="st0" d="M11,2c3.9,0,7,3.1,7,7l0,0c0,0.6,0.4,1,1,1c0.6,0,1-0.4,1-1c0-5-4-9-9-9c-0.6,0-1,0.4-1,1S10.5,2,11,2z M19.8,13.9c-0.1-0.3-0.4-0.6-0.7-0.6l-6-1.4c-0.3-0.1-0.7,0-0.9,0.3c-0.1,0.1-0.1,0.1-0.8,1.4c-2.2-1-3.9-2.7-4.9-4.9 C7.7,8,7.7,8,7.9,7.8c0.2-0.2,0.3-0.6,0.3-0.9L6.8,1C6.7,0.7,6.4,0.4,6.1,0.3C5.9,0.2,5.6,0.1,5.4,0.1C5.1,0,4.9,0,4.6,0 C2.1,0,0,2.1,0,4.6l0,0C0,13.1,6.9,20,15.4,20c2.5,0,4.6-2.1,4.6-4.6l0,0c0-0.3,0-0.5-0.1-0.8C19.9,14.4,19.8,14.1,19.8,13.9z M15.4,18C8,18,2,12,2,4.6C2,3.2,3.2,2,4.6,2h0.3L6,6.6L5.5,6.9C4.6,7.4,3.9,7.7,4.3,8.5c1.2,3.4,3.8,6,7.2,7.2 c0.8,0.3,1.2-0.3,1.6-1.2l0.3-0.5l4.6,1.1v0.3C18,16.8,16.8,18,15.4,18z"/> </svg> ',text:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M17.8,20H2.2C1,20,0,19.1,0,18V2c0-1.1,1-2,2.2-2h15.6C19,0,20,0.9,20,2v16C20,19.1,19,20,17.8,20z M17.8,2H2.2 v16h15.6C17.8,18,17.8,2,17.8,2z"/> <path class="st0" d="M13,6H7C6.4,6,6,6.4,6,7s0.4,1,1,1h2v5c0,0.6,0.4,1,1,1c0.6,0,1-0.4,1-1V8h2c0.6,0,1-0.4,1-1S13.6,6,13,6z"/> </svg> ',thumbnails:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M7.1,9H1.9C0.9,9,0,8.1,0,7.1V1.9C0,0.9,0.9,0,1.9,0h5.2C8.1,0,9,0.9,9,1.9v5.2C9,8.1,8.1,9,7.1,9z M2.2,6.8 h4.6V2.2H2.2L2.2,6.8z M18.1,9h-5.2C11.9,9,11,8.1,11,7.1V1.9C11,0.9,11.9,0,12.9,0h5.2C19.1,0,20,0.9,20,1.9v5.2 C20,8.1,19.1,9,18.1,9z M13.2,6.8h4.6V2.2h-4.6L13.2,6.8z M7.1,20H1.9C0.9,20,0,19.1,0,18.1v-5.2C0,11.9,0.9,11,1.9,11h5.2 C8.1,11,9,11.9,9,12.9v5.2C9,19.1,8.1,20,7.1,20z M2.2,17.8h4.6v-4.6H2.2L2.2,17.8z M18.1,20h-5.2c-1.1,0-1.9-0.9-1.9-1.9v-5.2 c0-1.1,0.9-1.9,1.9-1.9h5.2c1.1,0,1.9,0.9,1.9,1.9v5.2C20,19.1,19.1,20,18.1,20z M13.2,17.8h4.6v-4.6h-4.6L13.2,17.8z"/> </svg> ',ZoomIn:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M9.6,19.1C4.3,19.1,0,14.8,0,9.5S4.3,0,9.6,0s9.5,4.3,9.5,9.5S14.8,19.1,9.6,19.1z M9.6,1.8 c-4.3,0-7.7,3.4-7.7,7.7s3.4,7.7,7.7,7.7s7.7-3.4,7.7-7.7S13.8,1.8,9.6,1.8z"/> <path class="st0" d="M16.9,15.5l2.9,2.9c0.3,0.5,0.2,1-0.2,1.3c-0.4,0.3-0.8,0.3-1.1,0l-2.9-2.9c-0.3-0.5-0.2-1,0.2-1.3 C16,15.2,16.5,15.2,16.9,15.5z"/> <path class="st0" d="M12.7,10.5H6.4c-0.5,0-0.9-0.4-0.9-0.9v0c0-0.5,0.4-0.9,0.9-0.9h6.2c0.5,0,0.9,0.4,0.9,0.9v0 C13.6,10,13.2,10.5,12.7,10.5z"/> <path class="st0" d="M10.5,6.4v6.2c0,0.5-0.4,0.9-0.9,0.9h0c-0.5,0-0.9-0.4-0.9-0.9V6.4c0-0.5,0.4-0.9,0.9-0.9h0 C10.1,5.5,10.5,5.9,10.5,6.4z"/> </svg> ',ZoomOut:'<?xml version="1.0" encoding="utf-8"?> <svg class="svg" '+fill+' version="1.1" id="_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve"> <path class="st0" d="M9.6,19.1C4.3,19.1,0,14.8,0,9.5S4.3,0,9.6,0s9.5,4.3,9.5,9.5S14.8,19.1,9.6,19.1z M9.6,1.8 c-4.3,0-7.7,3.4-7.7,7.7s3.4,7.7,7.7,7.7s7.7-3.4,7.7-7.7S13.8,1.8,9.6,1.8z"/> <path class="st0" d="M16.9,15.5l2.9,2.9c0.3,0.5,0.2,1-0.2,1.3c-0.4,0.3-0.8,0.3-1.1,0l-2.9-2.9c-0.3-0.5-0.2-1,0.2-1.3 C16,15.2,16.5,15.2,16.9,15.5z"/> <path class="st0" d="M12.7,10.5H6.4c-0.5,0-0.9-0.4-0.9-0.9v0c0-0.5,0.4-0.9,0.9-0.9h6.2c0.5,0,0.9,0.4,0.9,0.9v0 C13.6,10,13.2,10.5,12.7,10.5z"/> </svg> '};var PhoneToolbarButtons={setSrc:function(t,i){var e=$("<img style='pointer-events:none;'></img>");this.$caption=$("<span style='pointer-events:none;'></span>");this.$img=$("<div class='icon'></div>");if(i&&""!=i)e.attr("src",i),e.addClass("custom");else if(phone_toolbar_icons&&phone_toolbar_icons[t])e.attr("src","data:image/png;base64,"+phone_toolbar_icons[t]);else if(phoneSvgIcons&&phoneSvgIcons[t]){$(e).css({display:"none"});var o=$("<div class='svg-box'>"+phoneSvgIcons[t]+"</div>");this.$img.append(o)}this.$button.empty();this.$img.append(e);this.$button.append(this.$img);this.$button.append(this.$caption);this.fontColorChanged=this.colorChanged=!1},changeColor:function(t){t&&this.$img.find("svg").attr("fill",t);this.changeCaptionColor(t)},changeIcon:function(t,i){var e=$(this.$button.find("img")[0]);if(i&&""!=i)e.attr("src",i),e.addClass("custom");else if(phoneSvgIcons&&phoneSvgIcons[t]){var o=this.$button.find(".svg-box");$(e).css({display:"none"});o.html(phoneSvgIcons[t])}}};Class("PhoneGotoPageButton",{create:function(){this._super();this.setSrc("gotoPage",bookConfig.GotoPageButtonIcon);this.initLanguage("btnGotoPage","Go to page");global.phoneGotoPagePanel||(global.phoneGotoPagePanel=new phoneGotoPage(tmpContainer))},onClick:function(t){global.phoneGotoPagePanel.showOrHide()}}).expand(PhoneToolbarButtons).extend("ToolbarButton");Class("PhoneEmailButton",{create:function(){this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.$button=$("<a target="+bookConfig.OpenWindow+" href='' class='button' style='text-decoration:none;'></a>");this.setSrc("phoneEmail",bookConfig.EmailButtonIcon);this.initLanguage("btnShareEmail","Share by Email");if(isTouchDevice())this.$button.attr("href","http://gmail.google.com");else{var t=bookConfig.btnShareWithEmailBody,i=bookConfig.btnShareWithEmailSubject;i||(i="");thumb=" "+window.location.href.substring(0,share_url.lastIndexOf("/"))+"/"+bookConfig.thumbPath+"1.jpg ";t=t.replaceAll("{thumb}",thumb,!0);t=t.replaceAll("{link}",window.location.href,!0);t=t.replaceAll("{title}",window.document.title,!0);this.$button.attr("href","mailto:?subject="+i+"&body="+t)}},onClick:function(t){}}).expand(PhoneToolbarButtons).extend("ToolbarButton");Class("PhoneLogo",{create:function(){this._super();var t=$("<img src='"+bookConfig.appLogoIcon+"' style='cursor:pointer;'/>");t.css({height:bookConfig.logoHeight+"px"});this.$button.append(t)},onClick:function(t){t=getLogoLink();t[0]&&($.browser.msie?window.location=t[0]:window.open(t[0],t[1]))},changeColor:function(){},changeLanguage:function(){}}).expand(PhoneToolbarButtons).extend("ToolbarButton");Class("PhoneWeChatShareButton",{create:function(){this._super();this.setSrc("phoneWeChat",bookConfig.WeChatShareButtonIcon);this.initLanguage("btnWeCharShare","WeChat Share")},onClick:function(t){global.phoneWeChatShareHelp&&global.phoneWeChatShareHelp.show()}}).expand(PhoneToolbarButtons).extend("ToolbarButton");Class("PhoneReportButton",{create:function(){this._super();this.setSrc("report",bookConfig.ReportButtonIcon);this.initLanguage("btnReport","report");this.setCaption("")},onClick:function(t){bookConfig.EnableReportButton&&!window.reportPanel&&(global.reportPanel=new PhoneReportPanel(tmpContainer));global.reportPanel&&function(){global.reportPanel.showOrHide()}.delay(10)}}).expand(PhoneToolbarButtons).extend("ToolbarButton");Class("PhoneInstructionsButton",{create:function(){this._super();this.setSrc("instructions",bookConfig.InstructionsButtonIcon);this.$img.css({overflow:"hidden",width:"22px"});this.$img.find(".svg").css({width:"20px",height:"20px"});this.initLanguage("btnInstructions","instructions")},onClick:function(t){bookConfig.InstructionsButtonVisible&&!window.bookInstructions&&(global.bookInstructions=new BookInstructions(tmpContainer));global.bookInstructions&&function(){bookInstructions.showOrHide()}.delay(10)}}).expand(PhoneToolbarButtons).extend("ToolbarButton");Class("PhoneShoppingCartButton",{create:function(){this._super();this.setSrc("shoppingCart",bookConfig.ShoppingCartButtonIcon);this.shoppingNumber=$("<div id='shoppingNumber'>0</div>");this.shoppingNumber.css({width:"20px",height:"20px",position:"absolute",right:"-10px",top:"10px","font-size":"12px","text-align":"center",color:"#fff"});this.$button.append(this.shoppingNumber);this.initLanguage("btnShoppingCart","shoppingCart")},onClick:function(t){window.shoppingCart&&window.shoppingCart.showCart()},setNumber:function(t){t||(t=0);this.shoppingNumber.html(t)}}).expand(PhoneToolbarButtons).extend("ToolbarButton");Class("PhoneBookmarkButton",{create:function(){this._super();this.setSrc("addBookmark",bookConfig.BookmarkButtonIcon);getLanguage("AnnotMark","")?this.initLanguage("AnnotMark","bookmark"):this.initLanguage("btnBookMark","Bookmark");this.status=0},onClick:function(){var t=BookInfo.getCurrentPages()[0],t={pageIndex:t,caption:"page:"+t,color:getRandomColor()};global.bookmark&&(global.bookmark.addItem(t),global.bookmark.show())},setAsAdded:function(){1!=this.status&&(this.changeIcon("bookmark",bookConfig.BookmarkButtonIcon),this.changeColor(),this.status=1)},setAsUnAdded:function(){0!=this.status&&(this.changeIcon("addBookmark",bookConfig.BookmarkButtonIcon),this.changeColor(),this.status=0)}}).expand(PhoneToolbarButtons).extend("BookmarkButton");Class("PhoneBackgroundSoundButton",{onClick:function(){global.phoneSettingBody||(global.phoneSettingBody=new PhoneSettingForm({parent:tmpContainer,formType:"setting",rightToLeft:rightToLeft}),global.phoneSettingBody.onResize());global.phoneSettingBody&&global.phoneSettingBody.show()},onMouseEnter:function(){}}).expand(PhoneToolbarButtons).extend("BackgroundSoundButton");Class("PhoneNumberButton",{create:function(){this._super();this.setSrc("tel",bookConfig.PhoneButtonIcon);this.initLanguage("btnPhoneNumber","tel")},onClick:function(){var t=global.phoneNumber;t&&("string"==typeof t?window.open("tel:"+t):1!=t.length||t[0].label?(global.telephoneNumberForm||(global.telephoneNumberForm=new TelephoneNumberForm({parent:tmpContainer,formType:"tel",rightToLeft:rightToLeft}),global.telephoneNumberForm.onResize()),global.telephoneNumberForm&&global.telephoneNumberForm.show()):window.open("tel:"+t[0].number))},onMouseEnter:function(){}}).expand(PhoneToolbarButtons).extend("ToolbarButton");Class("PhoneFirstPageButton",{}).expand(PhoneToolbarButtons).extend("FirstPageButton");Class("PhonePreviousPageButton",{}).expand(PhoneToolbarButtons).extend("PreviousPageButton");Class("PhoneNextPageButton",{}).expand(PhoneToolbarButtons).extend("NextPageButton");Class("PhoneLastPageButton",{}).expand(PhoneToolbarButtons).extend("LastPageButton");Class("PhoneTableOfContentButton",{}).expand(PhoneToolbarButtons).extend("TableOfContentButton");Class("PhoneThumbnailButton",{}).expand(PhoneToolbarButtons).extend("ThumbnailButton");Class("PhoneShareButton",{}).expand(PhoneToolbarButtons).extend("ShareButton");Class("PhoneHomeButton",{}).expand(PhoneToolbarButtons).extend("HomeButton");Class("PhoneZoomButton",{}).expand(PhoneToolbarButtons).extend("ZoomButton");Class("PhoneSearchButton",{}).expand(PhoneToolbarButtons).extend("SearchButton");Class("PhoneAutoPlayButton",{}).expand(PhoneToolbarButtons).extend("AutoPlayButton");Class("PhoneAnnotationButton",{}).expand(PhoneToolbarButtons).extend("AnnotationButton");Class("PhoneVideoButton",{}).expand(PhoneToolbarButtons).extend("VideoButton");Class("PhoneSlideshowButton",{}).expand(PhoneToolbarButtons).extend("SlideshowButton");Class("PhonePrintButton",{}).expand(PhoneToolbarButtons).extend("PrintButton");Class("PhoneDownloadButton",{}).expand(PhoneToolbarButtons).extend("DownloadButton");Class("PhoneFullscreenButton",{}).expand(PhoneToolbarButtons).extend("FullscreenButton");Class("PhoneLanguageButton",{}).expand(PhoneToolbarButtons).extend("LanguageButton");Class("PhoneAboutButton",{}).expand(PhoneToolbarButtons).extend("AboutButton");Class("PhoneHelpButton",{}).expand(PhoneToolbarButtons).extend("HelpButton");Class("PhoneMoreButton",{}).expand(PhoneToolbarButtons).extend("MoreButton");Class("PhoneBackwardButton",{}).expand(PhoneToolbarButtons).extend("BackwardButton");Class("PhoneForwardButton",{}).expand(PhoneToolbarButtons).extend("ForwardButton");Class("PhoneSelectTextButton",{}).expand(PhoneToolbarButtons).extend("SelectTextButton");var phone_toolbar_icons={flipsoundOff:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALBJREFUeNqsVNEOgyAMlI4HP3t+4vYze7JdajWBgrSAl4hI4nF3hS5E9KZ5LNcTjq9nEHiIeqETpOYB3Lsj8g9fa4PUcq4QUd4ATIbnfFeuirjaClOyOrbCiqGQEnIetcIiz7pCyYsypU7YRcnJXmOEbE8sdh8lqyirWtktwniT4TX79eTny1AKNEkoqsIIKXguvIph0nJnpWOjwrXm8BknbB9wF+EjjRZqHWMGfwEGAI3QhAWdX4Y9AAAAAElFTkSuQmCC",flipsoundOn:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAL1JREFUeNqsVNEOgzAILMyHffb2ifNn9iQsXSVWpIi1JFZsmuPuqCRmfvH9SPLA/2tMQF4mvXExWOWAocpE+fAcKVBL3hgSlTdiBqM1X5QizbAca9aqwY4gAvQ+yHEYcgWeV2HIDc85GRLS6tee6V6a2zy/KQVM4hFpOxogIhGcq8LXGSI+1c4SYWh5KNlXSR7goW5Qp4egrhCP8dD6c7oYnvsFno9To8PWcPj0dfn8gocBhwxatCbGnfgJMADn4IsF0oHN9wAAAABJRU5ErkJggg==",print_off_phone:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAi5JREFUeNqslk1IW0EUhV9elLoQ01gQJBhB0WajiD/YgiBChdQ/1IUFixsRuuxC3Uq7FBHb0oUuRCG4sKARq1FxIQVR1NaI3ZSKQlRa0EJTcRGtIZ4r50mM0fgzFz4m772557yZzJs7pgGXR7smHoAyUAuegnRgAf+ADyyCMTAHjq4SibvmfjN4A1KjPBejXPIK7IFO8BEcR3bWowg8Bt9AHw3WQBt4AmwcnY3XrXyeArrBCnDEGkkRmAbJYAu0AzcIRfT7RZZAD6gDXRzZAnjOZ5dGIm8wS4MZUABGoxhERoj9CphnZeuINIkHw5zrcVAJ/Nrtws+8cep8ou65yWsOdQO8BEHtbhFk/k+QQ90zkwTOvWF2qN0vDg1x6iaISRVXhxdMaWpimnqiW61zHiWGNLVh6FXoXBUS84pNvrAtFBM7L3YUm2yyTdO53CT+KDb5a2xBYnLAi0eKTaxsD/SwabIrNslgu6tzU5MoUWxSynZZTIyC0qjYxNDziMln1oN84FRk4OSnsS/6YhLgNi3xASTe00Dy3/O36AaMDVJuroMsfqnmOxqYmZ8NvoN34bvwf/CCtbsGTIR9PzcNC/NqqNNA3QtF6wd4xv9H5nQV1ANTDHET+60yT/LLqRe1/H5lCXZzIYywhru4F22yOD0EmVymTSCP+V6WYl+s08o2KAYtoIMCeTFG8xu8Bf3g5KZHIunYCwZZbyq5JOXclcStyMdTzST/i8BVb3AqwADtY3iItA+LRAAAAABJRU5ErkJggg==",print_on_phone:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZpJREFUeNq0lj0sBEEYhteFuIogkShQ0rjGX5QSEhyJil6DShR6rYi/REGnpZLgRBQ6Er8JjXaRSPwUrjo/hffdfCfrMrM3s7v3Jk9zO/s9u7Nz803ZwPKbE5BK0AtGQQ9oBtXgA7jgDOyCE/CpK1Ie8PsEmAcNiusUpYRJ8AIWwDr4KhycUBRoAVdgUyNQpR4sgQvQWkzSCU7lCcMkJfd36yR8gmNQ60RLDTjyv1FeUgG2Za7jCOvsSN0/yUyEKdKlTep6kiSYc0oT1k1SMiyrI1IOZ+s8FKtuhJJ0HIKADFHSHpdgcOVdNaSDkqYSCpjGhG7ZaubYVuAtZ0qytvNtIWCylDyqrvhv9he1FDBPCdnUHBNRCAFzTkkmaISqmIWAyVCyJ/3ASGQpeGV9NqccWBSs3sggrJnLb5Br4DbmfesOrPp34W8wLr07jrDOmNT917TuQV+x72MQ3t8v9ZTt91Ja8HVIwQ3oKvxbqA4SD9Kjp8GzYXGOmxKBa3ok+gEbYEv6TVp2a567qmQrcuVUcwD2ZZUq8yvAAMIsa7DrwJUCAAAAAElFTkSuQmCC",search_small:"iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQ9JREFUeNqUksFqwkAQhhMRX0KwZ0sP6sWDbxB8AaUnD03r0QcRQUW9F/ICJm+QQi/iQfDcQh9CC8ZvcCKbJYr54WPDzv4zk91xkyRxRFEUVVjeoQcvzkU7CGDped7RseSKGWOV7zU04Ae+NN6BGmyhS4K/jDkMQ6n4Dc8wggWHTtpNieUDxrCHNrFDai6DrxWHBBZmZk0yJ4n82xzeYJrGJXMffmHl3NZSz/TNTTG3IE5bzZPGYmja5iL6t80buVW9nFxprKNPlzEH+hz+nYq+ngnMzbJe1AAmWiHvqWZ6fvXIkMTGkDxZl+dmzMZ4SpVXqGtcBuNTuoGDneBqfkQ6LNcEhZ7KbLlwZVtnAQYAscZlWauJl+QAAAAASUVORK5CYII=",phoneWeChatShareHelp:"iVBORw0KGgoAAAANSUhEUgAAAMgAAAEsCAYAAACG+vy+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM1Qzk5NUFCM0UyQTExRTg5QkM2REEwOTYzMTdGRkRFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM1Qzk5NUFDM0UyQTExRTg5QkM2REEwOTYzMTdGRkRFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzVDOTk1QTkzRTJBMTFFODlCQzZEQTA5NjMxN0ZGREUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzVDOTk1QUEzRTJBMTFFODlCQzZEQTA5NjMxN0ZGREUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6wBfWwAAAqZUlEQVR42uxd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"};Class("PhoneButtonQueue",{create:function(t){this.container=t.container;this.extended=t.extended;this.topBar=t.topBar;this.bottomBar=t.bottomBar;this.buttonWidth=t.buttonWidth;this.barWidth=t.barWidth;this.buttonTop=t.buttonTop;this.buttons=t.buttons.clone();this.buttons.each(function(t){t.freedom();t.hint=!1});this.initTopBar();this.initBottomBarArray()},initBottomBarArray:function(){this.bottomBarArray=[];var t=this.buttons.length;if(6<t){for(var i=0;5>i;i++){var e=this.buttons.get(0);this.bottomBarArray.push(e);this.buttons.remove(e)}(t=this.pickButtonsByName("more"))&&this.bottomBarArray.push(t)}else for(i=0;i<t;i++)e=this.buttons.get(0),this.bottomBarArray.push(e),this.buttons.remove(e);for(i=0;i<this.bottomBarArray.length;i++)this.bottomBarArray[i]&&this.bottomBarArray[i].addTo(this.bottomBar)},initTopBar:function(){this.btnInstructions=this.pickButtonsByName("instructions");var t=this.buttonWidth+10;this.btnInstructions&&(this.btnInstructions.setPosition(this.barWidth-t,this.buttonTop),this.btnInstructions.addTo(this.topBar))},pickButtonsByName:function(t){t=this.buttons.find(t).get(0);this.buttons.remove(t);return t},autoCenter:function(t,i,e,o){if(t&&!(0>=t.length)){var s=t.length;i=Math.max((i-e*s)/(s-1),0);void 0==o&&(o=0);for(var n=0;n<s;n++)t[n].$button.css("left",i*n+e*n+o)}},sort:function(){this.barWidth=Math.min(windowWidth,340);this.buttonWidth=40;this.barLeft=(windowWidth-this.barWidth)/2+7;this.autoCenter(this.bottomBarArray,this.barWidth-15,this.buttonWidth,this.barLeft);this.extended.buttonsArray=[];for(var t=0;t<this.buttons.length;t++){var i=this.buttons.get(t);this.extended.buttonsArray.push(i)}}});Class("PhoneToolbar",{initBar:function(){this.topBar=$("<div class='phoneTopBar'></div>");this.bottomBar=$("<div class='phoneBottomBar'></div>");this.parent.append(this.topBar);this.parent.append(this.bottomBar);bookConfig.appLogoIcon&&(this.logo=new PhoneLogo,this.logo.setPosition(10,0),this.logo.addTo(this.topBar));this.initStyle();bookConfig.toolbarAlwaysShow||this.enterToShow();bookConfig.showGotoButtonsAtFirst&&global.phoneGotoPagePanel&&window.setTimeout(function(){global.phoneGotoPagePanel.show()},20)},initButtons:function(){this.buttons=new ObjectPool;this.sort();1>=this.buttons.length&&bookConfig.enablePageBack&&(this.buttons.remove(this.buttons.find("gotopage").get(0)),this.buttons.add(new PhoneBackwardButton),this.buttons.add(new PhoneFirstPageButton),this.buttons.add(new PhonePreviousPageButton),this.buttons.add(new PhoneNextPageButton),this.buttons.add(new PhoneLastPageButton),this.buttons.add(new PhoneForwardButton));3>=this.buttons.length&&!bookConfig.enablePageBack&&(this.buttons.remove(this.buttons.find("gotopage").get(0)),this.buttons.add(new PhoneFirstPageButton),this.buttons.add(new PhonePreviousPageButton),this.buttons.add(new PhoneNextPageButton),this.buttons.add(new PhoneLastPageButton));6<this.buttons.length&&this.buttons.add(new PhoneMoreButton);bookConfig.InstructionsButtonVisible&&this.buttons.add(new PhoneInstructionsButton);this.buttons.each(function(t){t.setCallback(this.afterButtonClick.bind(this));this.setButtonTitle(t)}.bind(this))},sort:function(){var t="shopping thumb table goto zoom bookmark number sound search print annotation wechat email btnshare download language home autoflip select about report".split(" "),i=[],e=t.length,o=bookConfig.buttonsSortXML;if(o&&"object"==typeof o)for(var s=0;s<o.length;s++)for(var n=o[s].toLowerCase(),h=0;h<e;h++)if(0<=n.indexOf(t[h])){i.push(t[h]);break}for(o=0;o<e;o++)0>i.indexOf(t[o])&&i.push(t[o]);for(t=0;t<i.length;t++)e=i[t],e=e.toLowerCase(),this.addButton(e)},setButtonTitle:function(t){t.setTitle(t.caption)},resetButtonPosition:function(){new PhoneButtonQueue({buttons:this.buttons,barWidth:windowWidth,buttonWidth:40,buttonTop:0,topBar:this.topBar,bottomBar:this.bottomBar,extended:this.extendedBar}).sort();this.extendedBar.resize();this.extendedBar.hide();this.buttons.each(function(t){t.changeCaptionColor()}.bind(this))},initStyle:function(){bookConfig.appLogoIcon||bookConfig.InstructionsButtonVisible||this.topBar.remove();this.topBar.css({background:this.color});this.bottomBar.css({background:this.color})},initExtendedbar:function(){this.extendedBar=new PhoneExtendedBar(this.parent);global.moreBar=this.extendedBar},onResize:function(t,i){this.resetButtonPosition()},getHeight:function(){return 0},getTopHeight:function(){return 0},getLogoHeight:function(){return 0},getBottomHeight:function(){return 0},getWidth:function(){return 0},initEvents:function(){this.topBar&&this.topBar.bind(_event._enter,function(){this.enterOption&&window.clearTimeout(this.enterOption)}.bind(this));this.bottomBar&&this.bottomBar.bind(_event._enter,function(){this.enterOption&&window.clearTimeout(this.enterOption)}.bind(this))},show:function(){this.visible||(this.visible=!0,this.bottomBar.animate({bottom:0},300),this.topBar.animate({top:0},300),this.showGopageButtons&&global.phoneGotoPagePanel&&window.setTimeout(function(){global.phoneGotoPagePanel.show()},20),this.showExtendedBar&&this.extendedBar&&window.setTimeout(function(){this.extendedBar.show()},20),bookType==BookType.singlePhone_book&&singlePhoneBook&&singlePhoneBook.setShow(!1),bookType==BookType.phone_book&&phoneBook&&phoneBook.setShow(!1))},hide:function(){this.visible&&(this.enterOption&&window.clearTimeout(this.enterOption),this.visible=!1,this.bottomBar.animate({bottom:-60},300),this.topBar.animate({top:-60},300),this.showExtendedBar=this.showGopageButtons=!1,global.phoneGotoPagePanel&&(global.phoneGotoPagePanel.visible&&(this.showGopageButtons=!0),global.phoneGotoPagePanel.hide()),this.extendedBar&&(this.extendedBar.visible&&(this.showExtendedBar=!0),this.extendedBar.hide()),bookType==BookType.singlePhone_book&&singlePhoneBook&&singlePhoneBook.setShow(!0),bookType==BookType.phone_book&&phoneBook&&phoneBook.setShow(!0))},showOrHide:function(){!0===this.visible?this.hide():this.show()},enterToShow:function(){this.show();this.enterOption=window.setTimeout(this.hide.bind(this),5e3)},addButton:function(t){switch(t){case"shopping":global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&this.buttons.add(new PhoneShoppingCartButton);break;case"thumb":bookConfig.ThumbnailsButtonVisible&&this.buttons.add(new PhoneThumbnailButton);break;case"table":bookConfig.TableOfContentButtonVisible&&this.buttons.add(new PhoneTableOfContentButton);break;case"goto":this.buttons.add(new PhoneGotoPageButton);break;case"zoom":bookConfig.ZoomButtonVisible&&this.buttons.add(new PhoneZoomButton);break;case"bookmark":bookConfig.BookMarkButtonVisible&&this.buttons.add(new PhoneBookmarkButton);break;case"number":bookConfig.PhoneButtonVisible&&this.buttons.add(new PhoneNumberButton);break;case"sound":(bookConfig.BackgroundSoundButtonVisible||bookConfig.FlipSound)&&this.buttons.add(new PhoneBackgroundSoundButton);break;case"search":bookConfig.SearchButtonVisible&&this.buttons.add(new PhoneSearchButton);break;case"print":bookConfig.PrintButtonVisible&&this.buttons.add(new PhonePrintButton);break;case"annotation":bookConfig.AnnotationButtonVisible&&this.buttons.add(new PhoneAnnotationButton);break;case"wechat":bookConfig.WeChatShareButtonVisible&&this.buttons.add(new PhoneWeChatShareButton);break;case"btnshare":bookConfig.ShareButtonVisible&&this.buttons.add(new PhoneShareButton);break;case"download":bookConfig.DownloadButtonVisible&&this.buttons.add(new PhoneDownloadButton);break;case"language":1<language.length&&this.buttons.add(new PhoneLanguageButton);break;case"home":bookConfig.HomeButtonVisible&&this.buttons.add(new PhoneHomeButton);break;case"autoflip":bookConfig.AutoPlayButtonVisible&&this.buttons.add(new PhoneAutoPlayButton);break;case"email":bookConfig.EmailButtonVisible&&this.buttons.add(new PhoneEmailButton);break;case"select":bookConfig.SelectTextButtonVisible&&this.buttons.add(new PhoneSelectTextButton);break;case"report":{if(bookConfig.EnableReportButton)this.buttons.add(new PhoneReportButton);break}case"about":bookConfig.aboutButtonVisible&&this.buttons.add(new PhoneAboutButton)}}}).extend("Toolbar");Class("PhoneExtendedBar",{create:function(t){this._super(t);this.buttonsArray=[];this.height=72;this.initElements();this.initHtml();this.initEvent();this.initCss()},initHtml:function(){this.$bar.append(this.arrow);this.$bar.append(this.swiper)},initElements:function(){this.arrow=$("<div class='arrow'><div class='svg-box'></div></div>");phoneSvgIcons&&phoneSvgIcons.arrow_down&&this.arrow.find("div").html(phoneSvgIcons.arrow_down);this.initSwiper()},initSwiper:function(){this.swiper=$("<div class='stage'></div>");this.swiperList=$("<div class='swiper'></div>");this.swiper.append(this.swiperList);this.dots=$("<div class='dots'></div>");this.swiper.append(this.dots);this.swiper.rolling({},Direction.left)},initEvent:function(){this.arrow.click(function(){this.hide()}.bind(this))},initCss:function(){this.$bar.css({display:"block",overflow:"visible"});this.$bar.addClass("phone");this.arrow.css({"background-color":this.color.rgba(.8)})},show:function(t){this.visible||this.$bar.animate({bottom:"40px"},400,"linear",function(){this.visible=!0}.bind(this))},hide:function(){this.visible&&this.$bar.animate({bottom:-this.height-60+"px"},400,"linear",function(){this.visible=!1}.bind(this))},showOrHide:function(){this.visible?this.hide():this.show()},resize:function(t){this.swiperList.empty();this.dots.empty();var i=this.buttonsArray.length,e=parseInt((windowWidth+30)/70),o=3*e,s=(windowWidth-30*(e-1)-40*e)/2;i<e&&(s=30);this.height=72;i>e&&(this.height=134);i>2*e&&(this.height=196);this.$bar.css({height:this.height+"px"});if(!(0>=o)){for(var n=Math.ceil(i/o),h=0;h<n;h++){var a=$("<div class='item'></div>"),r=$("<div class='dot'></div>");a.css("width",windowWidth+"px");for(var l=0;l<o;l++){var g=l+h*n;if(g>i-1)break;0==g%e?this.buttonsArray[g].$button.css("margin-left",s+"px"):this.buttonsArray[g].$button.css("margin-left","30px");this.add(a,this.buttonsArray[g])}this.swiperList.append(a);this.dots.append(r)}this.resetBarHeight(e,t);this.swiper.refreshData()}},resetBarHeight:function(t,i){this.btnConfig=[];for(var e=0,o=0,s=0;s<this.buttonsArray.length;s++){var n=this.buttonsArray[s],e=this.buttonsArray.length/t;s<t?(e=this.buttonsArray.length<t?this.buttonsArray.length:t,o=this.getMostLength(n.caption.length,o,n.caption,i),s==e-1&&(this.btnConfig.push({startIndex:0,endIndex:e,mostLength:o}),this.height+=o,o=0)):2<e&&s>=t&&s<2*t?(e=2*t,o=this.getMostLength(n.caption.length,o,n.caption,i),s==e-1&&(this.btnConfig.push({startIndex:t,endIndex:e,mostLength:o}),this.height+=o,o=0)):(o=this.getMostLength(n.caption.length,o,n.caption,i),s==this.buttonsArray.length-1&&this.btnConfig.push({startIndex:parseInt(e)*t,endIndex:this.buttonsArray.length,mostLength:o}))}this.height+=o;this.$bar.css({height:this.height+"px"});this.resetButtonHeight(this.btnConfig)},getMostLength:function(t,i,e,o){if(t){o||(o=12);var s=0;RegExp("[\\u4E00-\\u9FFF]+$","g").test(e)?s=Math.ceil(t/5)*o:12<=t&&(s=Math.ceil(t/20)*o);i<s&&(i=s);return i}},resetButtonHeight:function(t,i){if(t&&t.length)for(var e=0;e<t.length;e++)for(var o=t[e].startIndex;o<t[e].endIndex;o++)this.buttonsArray[o].$button.css("height",t[e].mostLength+52)},add:function(t,i){i.freedom();i.$button.appendTo(t);i.$parent=t;i.addEvents()}}).extend("ExtendedBar");var ThumbnailCell=Class({create:function(t,i){this.parent=t;this.index=i;this.item=$("<div class='item'></div>");this.initHtml();this.initEvent();this.fillContent(this.index);this.onResize()},onResize:function(){this.imageHeight=80;this.length=this.imageWidth=parseInt(bookConfig.largePageWidth*this.imageHeight/bookConfig.largePageHeight);this.item.css({width:this.imageWidth+"px"});this.image.css({width:this.imageWidth+"px"})},initHtml:function(){this.initStructure();this.item.append(this.image);this.item.append(this.title);this.parent.append(this.item);this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;var t=Color(this.mainColor).split();this.item.css({"background-color":"rgba("+t.r+","+t.g+","+t.b+", 0.5)"});this.title.find("span").css({"background-color":"rgba("+t.r+","+t.g+","+t.b+", 0.5)",color:this.fontColor})},initStructure:function(){this.image=$("<img/>");this.title=$("<p class='title'>"+getShownPageNumber(this.index)+"</p>")},setStyle:function(t){this.item.css(t)},initEvent:function(){this.item.onTap(function(){gotoPageFun(this.index)}.bind(this))},fillContent:function(t){var i=function(t){this.image.attr("src",t);this.image.css({width:this.imageWidth+"px"})}.bind(this);fillImageAfterLoaded(t,"thumb",i)},getDom:function(){return this.item},fission:function(){this.item.removeClass("highlight");this.item.addClass("focus")},merge:function(){this.item.removeClass("focus")},setHighLight:function(t){this.index==t&&this.item.addClass("highlight")},clearHighLight:function(){this.item.removeClass("highlight")}});var ThumbnailPoint=Class({create:function(t,i){this.parent=t;this.length=20;this.pages=i;this.initHtml();this.initEvent()},initHtml:function(){this.point=$("<div class='point'></div>");this.parent.append(this.point);this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this.point.css({"background-color":this.fontColor})},setPosition:function(t,i){this.point.css(i,t+"px")},fission:function(){this.isMerge=!1},merge:function(){this.isMerge=!0},getLength:function(){return this.length},initEvent:function(){this.point.onTap(function(){gotoPageFun(this.pages[0])}.bind(this));this.point.bind("mouseover",function(){this.refreshItem();this.showItem()}.bind(this));this.point.bind("mouseleave",function(){this.hideItem()}.bind(this))},refreshItem:function(){thumbnail&&thumbnail.itemInfo&&(thumbnail.itemInfo.refreshItem(this.pages,this.isMerge),thumbnail.itemInfo.setPositionByReference(this.point))},showItem:function(){thumbnail&&thumbnail.itemInfo&&thumbnail.itemInfo.show()},hideItem:function(){thumbnail&&thumbnail.itemInfo&&thumbnail.itemInfo.hide()},setHighLight:function(){this.point.addClass("highlight")},clearHighLight:function(){this.point.removeClass("highlight")}}),ThumbnailItem=Class({create:function(t){this.parent=t;this.cellsPageIndexArray=[]},refreshItem:function(t,i){if(!(-1<this.cellsPageIndexArray.indexOf(t)&&i==this.isMerge)){this.item||(this.item=$("<div class='item_focus'></div>"),this.parent.append(this.item),this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor,this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor);this.item.empty();this.pages=t;this.cells=[];this.cellsPageIndexArray=[];this.isMerge=i;this.initStructure();this.addItem();this.item.append(this.title);var e=Color(this.mainColor).split();this.item.css({"background-color":"rgba("+e.r+","+e.g+","+e.b+", 0.5)"});this.title.find("span").css({"background-color":"rgba("+e.r+","+e.g+","+e.b+", 0.5)",color:this.fontColor});this.onResize()}},initStructure:function(){this.initCells();for(var t=getShownPageNumber(this.cells[0].index),i=1;i<this.cells.length;i++)t=t+"-"+getShownPageNumber(this.cells[i].index);this.title=$("<div class='title'><span>"+t+"</span></div>")},addItem:function(){for(var t=this.cells.length,i=0;i<t;i++)this.item.append(this.cells[i].getDom())},initCells:function(){this.isMerge?this.merge():this.fission()},fission:function(){var t=new ThumbnailCell(this.item,this.pages[0]);this.cells.push(t)},merge:function(){for(var t=0;t<this.pages.length;t++){var i=new ThumbnailCell(this.item,this.pages[t]);this.cells.push(i)}},setPositionByReference:function(t){var i=t.offset().left;t=t.width();this.item.css({left:parseInt(i+t/2-this.length/2-6)+"px"})},onResize:function(){for(var t=this.length=0;t<this.cells.length;t++)this.length+=this.cells[t].length;this.item.css({width:this.length+"px"})},show:function(){this.item&&this.item.show()},hide:function(){this.item&&this.item.hide()},getLength:function(){return this.length}});var ThumbnailFrame=Class({create:function(t){this._super(t);this.direction=rightToLeft?Direction.right:Direction.left;this.itemArray=[];this.margin=8;this.initDefaultDom();this.initHtml();this.initEvent();this.onResize();this.initCss();this.show()},initHtml:virtual_function,initCss:function(){var t=Color(this.mainColor).split();this.thumbnailSwiper.css({"background-color":"rgba("+t.r+","+t.g+","+t.b+", 0.5)"});this.leftPageNum.css({"background-color":"rgba("+t.r+","+t.g+","+t.b+", 0.5)"});this.rightPageNum.css({"background-color":"rgba("+t.r+","+t.g+","+t.b+", 0.5)"});rightToLeft&&this.stage.addClass("rightToLeft");this.stage.css({color:this.fontColor});this.close.changeButtonColor(this.fontColor)},initDefaultDom:function(){this.close=$("<div class='close' style='background-image:url("+this.closeUrl+")'></div>");this.close.click(this.hide.bind(this));this.leftPageNum=$("<div class='page_num left'></div>");this.rightPageNum=$("<div class='page_num right'></div>");this.initSwiper()},initSwiper:function(){this.thumbnailSwiper=$("<div class='thumbnailSwiper stage'></div>");this.thumbnailSwiperList=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.refreshSwiper(this.thumbnailSwiperList);this.thumbnailSwiper.append(this.thumbnailSwiperList);this.thumbnailSwiper.append(this.progress);this.progress.append(this.progressBar)},initEvent:function(){this.stage.bind("mousedown touchstart",function(t){t.stopPropagation()});rightToLeft?this.thumbnailSwiper.scroll({},Direction.right):this.thumbnailSwiper.scroll({},Direction.left)},onResize:function(){if(this.thumbnailSwiperList.width()<.9*windowWidth-220){var t=this.thumbnailSwiperList.width()+220;this.stage.css({width:t+"px",left:(windowWidth-t)/2+"px"})}else this.stage.css({width:"90%",left:"5%"});this.refresh()},refresh:function(){this.thumbnailSwiper.refreshData()},refreshSwiper:function(t){this.itemArray=[];this.thumbnailSwiperList.empty();this.length=this.margin;if(BookInfo.isDoublePage())for(var i=BookInfo.getThumbnailPages(),e=0;e<i.length;e++)this.addItem(t,i[e]);else for(e=1;e<=bookConfig.totalPageCount;e++)this.addItem(t,[e]);t.css("width",this.length+"px");this.setHighLight(BookInfo.getCurrentPageIndex())},mergeAll:function(){this.isMerge!=BookInfo.isDoublePage()&&this.refreshSwiper(this.thumbnailSwiperList);this.isMerge=!0;for(var t=0;t<this.itemArray.length;t++)this.itemArray[t].merge()},fissionAll:function(){this.isMerge!=BookInfo.isDoublePage()&&this.refreshSwiper(this.thumbnailSwiperList);this.isMerge=!1;for(var t=0;t<this.itemArray.length;t++)this.itemArray[t].fission()},addItem:function(t,i){var e=new ThumbnailPoint(t,i);e.setPosition(this.length,this.direction);this.length+=e.getLength();this.length+=this.margin;this.itemArray.push(e)},clearHighLight:function(){$(".highlight").removeClass("highlight")},setHighLight:function(t){$(".highlight").removeClass("highlight");var i=BookInfo.getCurrentPages();1==i.length?BookInfo.isLeftPage(t)?(this.leftPageNum.html(getShownPageNumber(i[0])),this.rightPageNum.html("")):(this.leftPageNum.html(""),this.rightPageNum.html(getShownPageNumber(i[0]))):(this.leftPageNum.html(getShownPageNumber(i[0])),this.rightPageNum.html(getShownPageNumber(i[1])));for(i=0;i<this.itemArray.length;i++)0<=this.itemArray[i].pages.indexOf(t)&&this.itemArray[i].setHighLight(t);this.thumbnailSwiper.animateToCenterItem&&window.setTimeout(this.thumbnailSwiper.animateToCenterItem,10)},getShowStatu:function(){return this.visible},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},getTopHeight:function(){return 0},getBottomHeight:function(){return this.visible?70:0},showOrHide:function(){this.visible?this.hide():this.show()},show:function(){this.setHighLight(BookInfo.getCurrentPageIndex());this.visible=!0;this.stage.show();this.refresh()},hide:function(){this.visible=!1;this.stage.hide()}}).extend(FormFrame);var ThumbnailForm=Class({create:function(t){this.direction=0;this.height=80;this._super(t)},initHtml:function(){this.stage=$("<div class='thumbnail_win10 form'></div>");this.stage.append(this.thumbnailSwiper);this.stage.append(this.leftPageNum);this.stage.append(this.rightPageNum);this.parent.append(this.stage);this.itemInfo=new ThumbnailItem(bookContainer)}}).extend(ThumbnailFrame);var toolbar_icons={First:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDE0Mzg1RjA0NDFFMTFFNkFEMUJFOTAxN0Q1ODlGMzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDE0Mzg1RjE0NDFFMTFFNkFEMUJFOTAxN0Q1ODlGMzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEMTQzODVFRTQ0MUUxMUU2QUQxQkU5MDE3RDU4OUYzOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEMTQzODVFRjQ0MUUxMUU2QUQxQkU5MDE3RDU4OUYzOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiTEsMQAAABhSURBVHjaYvz//z8DNQETA5XB8DEQFNAziRFnJCJSkBUwEhJnIsEwYsTxGkiyYfgMJMswXAb+H/TJhpEWLmQkUZwoL5NlKKEwJNlQYiIFpnkWMeIsRIY10S4dgeUhQIABAOuyE4urzcl0AAAAAElFTkSuQmCC",prev:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzE3NzFBMzc0NDFFMTFFNkI2NkZCNTkwNTcwQjY4RUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzE3NzFBMzg0NDFFMTFFNkI2NkZCNTkwNTcwQjY4RUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDMTc3MUEzNTQ0MUUxMUU2QjY2RkI1OTA1NzBCNjhFQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDMTc3MUEzNjQ0MUUxMUU2QjY2RkI1OTA1NzBCNjhFQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpsQoX4AAABlSURBVHjaYvz//z8DNQETA5XB8DEQFNAziVHISESkICtgpNSF/6np5f/UDMP/eMTR8UxCYUiOyxjpmmwYSTRjFjKHBY8X/pNjGRMx4ULNnMJIi6zHiC2scAEWUpPFaHmIAQACDACLIheExvzfEgAAAABJRU5ErkJggg==",next:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjZBQjFFQUY0NDFFMTFFNjg2QzNEOUYzOEY3RDA5NTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjZBQjFFQjA0NDFFMTFFNjg2QzNEOUYzOEY3RDA5NTAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCNkFCMUVBRDQ0MUUxMUU2ODZDM0Q5RjM4RjdEMDk1MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCNkFCMUVBRTQ0MUUxMUU2ODZDM0Q5RjM4RjdEMDk1MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlrUFiYAAABdSURBVHjaYvz//z8DNQETA5XB8DJwJhATDHBGEiIFWSEjtb38nxZh+J9YA2FhhY6JMhRbGJKT0hnpmmxmkes6SpINzuRDiZcZqZlsqJKwZxEyjNQwHC0PsQOAAAMA+ocddiejPS8AAAAASUVORK5CYII=",Last:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlERDMwNTM0NDFFMTFFNjk0QzFERjcyNUI4RTlCOTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlERDMwNTQ0NDFFMTFFNjk0QzFERjcyNUI4RTlCOTYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUREMzA1MTQ0MUUxMUU2OTRDMURGNzI1QjhFOUI5NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUREMzA1MjQ0MUUxMUU2OTRDMURGNzI1QjhFOUI5NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pg7xLDIAAABhSURBVHja7JRBCsAgEAON//9A97OpxxZ2aSJ7aKEBLwMOaFZBcnRmjuZ8U3isRYPfgqSUK4DArSPT5NIdWlK1FFna0TJfP4fYEULls1OmCGHyVBjFpniSVU/v/w+9nAIMAMG8FoNqRCDpAAAAAElFTkSuQmCC",home:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REFCMzlDNDY0NDFEMTFFNkEwNjFBMzY4NTU4OTE3OTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REFCMzlDNDc0NDFEMTFFNkEwNjFBMzY4NTU4OTE3OTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQUIzOUM0NDQ0MUQxMUU2QTA2MUEzNjg1NTg5MTc5NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQUIzOUM0NTQ0MUQxMUU2QTA2MUEzNjg1NTg5MTc5NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjZEvHoAAABoSURBVHjaYvz//z8DNQETA5XBgBn4H4qpYuAvJPYPQooZCUTKfxxiTOS4EJdNjPi8z0SiYQTVMJFpGE61TBQYhlUPE4WGYehlQQtsUg1npHlOYSHDFf+HZ+HQSITeRnLy8jAsYAECDACXVBwLCpAPMAAAAABJRU5ErkJggg==",ZoomIn:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEZFOTQ2NzQ0NDFGMTFFNkIyRkNFNzMwRTZEMzZDNTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEZFOTQ2NzU0NDFGMTFFNkIyRkNFNzMwRTZEMzZDNTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowRkU5NDY3MjQ0MUYxMUU2QjJGQ0U3MzBFNkQzNkM1NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowRkU5NDY3MzQ0MUYxMUU2QjJGQ0U3MzBFNkQzNkM1NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlwbANEAAAC3SURBVHjazFTBCcMwDIxKB8oG+fRv6EIZqY8OYneSLhC4qiCnRsiO2pjQg8OObF2MTogADD1xGjrjMMHAjEwUjBJv411DxRkfROZN1ozZyFmpA0GSnsxJnU0Sh9xzCeaXlGJQovnlLkHrMio/NQUtU1Iur1DvU8uTsxEbZaVCjIxzl8tbNbzKd+rh8oW5fOuypw/RMqXWoMEQeTDvW6L047Qpk6jHcKCK+K5pQ94+3CX6/wP2JcAAapwkF2ZB0MEAAAAASUVORK5CYII=",ZoomOut:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUY1ODlDQjA0NDFGMTFFNkJCNERDQjREM0ZCMEYxRTEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUY1ODlDQjE0NDFGMTFFNkJCNERDQjREM0ZCMEYxRTEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRjU4OUNBRTQ0MUYxMUU2QkI0RENCNEQzRkIwRjFFMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRjU4OUNBRjQ0MUYxMUU2QkI0RENCNEQzRkIwRjFFMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjWtocAAAACwSURBVHjazFRRCoAgDG3RgbqBP/0LXagj9dFBrJN0gWAtmCUyTUuiBw9hc8+xJwNErEqirgrjM0FNNER0aDgexzFDjwNeMMSRT4tBqDnpBzQXrUTl5RTHke8lCdpOVKBAOZ0nCUYve4+KecmU2Y5XoJsX0Qixlk8I1LQ5Lt/NsOf8XMLljrjlupzyDzFmSshJLYgsxOlOFB5uG7cISiwHCIi/2jaQ+g9fif5/we4CDAB5nCEZi08rWQAAAABJRU5ErkJggg==",search:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0MyNjkwM0U0NDFFMTFFNjkxRjM4M0U1MzBGMEY3NDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0MyNjkwM0Y0NDFFMTFFNjkxRjM4M0U1MzBGMEY3NDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozQzI2OTAzQzQ0MUUxMUU2OTFGMzgzRTUzMEYwRjc0OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozQzI2OTAzRDQ0MUUxMUU2OTFGMzgzRTUzMEYwRjc0OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pm99ZcgAAACtSURBVHjaYvz//z8DNQETA5UB3Qz0B+LzQPwfCZ+HiuMHoDBEw/X/EeA8EK+H0jBQj0UPHKML+EM1vQdiezQ5e6j4f6g6ogyEucQehwZ7JJcTZSBexWiWYpXHFikXCAT7BVJj2YCAgQakxDKhMAyCyl+gRiy7APEfUmOZmHT4H1+k4IpJfyyGXATizYQMZSSztEHWxEiNwoERh+EUlTaM2ARZKCytGIdeAQsQYAA4gRwbuRBiPgAAAABJRU5ErkJggg==",thumbnails:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MDM4MkRFODJEMUUxMUU2ODFCNjg0OTQ2M0UzQkUwRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1MDM4MkRFOTJEMUUxMUU2ODFCNjg0OTQ2M0UzQkUwRCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUwMzgyREU2MkQxRTExRTY4MUI2ODQ5NDYzRTNCRTBEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUwMzgyREU3MkQxRTExRTY4MUI2ODQ5NDYzRTNCRTBEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8T/UOAAAADxJREFUeNpi/P//PwMtAOOQNxifLYwkqMFqMCMWDf/RDCakZtTgATKYJqliNIOMJrfRDDKsMgjVAECAAQBz4nHVAyiVvAAAAABJRU5ErkJggg==",tableOfContent:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjVCMjY2QzQ0NDFFMTFFNjk3OTZCOTQ4OTU3RDM3RjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjVCMjY2QzU0NDFFMTFFNjk3OTZCOTQ4OTU3RDM3RjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNUIyNjZDMjQ0MUUxMUU2OTc5NkI5NDg5NTdEMzdGNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyNUIyNjZDMzQ0MUUxMUU2OTc5NkI5NDg5NTdEMzdGNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pns+hyAAAABHSURBVHjaYvz//z8DNQETA5XB0DNwJhD/h9LIfEIYpp6BES1SkDmMaHxCgBGbC2fhoAmBWbhcOBopo5EyGinDI1IoBgABBgCIZkdT2MXW4wAAAABJRU5ErkJggg==",bookmark:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI2QTY1NkQ0NDFFMTFFNjkxMTRBRjRBMzFCMDk0RjgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI2QTY1NkU0NDFFMTFFNjkxMTRBRjRBMzFCMDk0RjgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQjZBNjU2QjQ0MUUxMUU2OTExNEFGNEEzMUIwOTRGOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjZBNjU2QzQ0MUUxMUU2OTExNEFGNEEzMUIwOTRGOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvi5gP0AAABLSURBVHjaYvz//z8DNQETA5UBXQ2cCcT/8eCZ2DQx4glDYgKXcXiF4aiBI9FARmoayEisoUxkuIyREgMZSfU+EwVhxjg0kw1AgAEAClQPVU4RVG0AAAAASUVORK5CYII=",autoPlay:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTFERTYzRDg0NDFGMTFFNkFEQ0VFQjcwMjlDMEFFQ0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTFERTYzRDk0NDFGMTFFNkFEQ0VFQjcwMjlDMEFFQ0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MURFNjNENjQ0MUYxMUU2QURDRUVCNzAyOUMwQUVDRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5MURFNjNENzQ0MUYxMUU2QURDRUVCNzAyOUMwQUVDRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pr8UbXkAAADySURBVHja5JTPCoJAEIdXnyG62B/tOarnSOgtskPkA0VPEl0tL2E3y1tdI2z7LY0gsjt6sC4NfCCzM58iP7WklKLNskXL9VOhC1bgAHIiop5n3FLvUMMM3OSnErAnEurdwVy3a5KpuoAA9EtnA7CkM1V+ndAFGS1MDU8v6CwFVzDkhCHdOaj0pUa6oH7ICY/gDByNsCp1aPbICV9gp3kaaZCq2bzcs1uI3ZPLYQy6oGcQWKVrNdMBJ064odD6NTJBM2p2ywW7iI2KxISJzZhmMtppFOyUCXbaNNhf+fQKPLAGMcXpASLqjUx71v/9YN8CDADlL594R1a/PAAAAABJRU5ErkJggg==",stopAutoPlay:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjE3MkNFNjg0NDFGMTFFNkIyNDY4OTMwQzM1NkEyM0UiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjE3MkNFNjk0NDFGMTFFNkIyNDY4OTMwQzM1NkEyM0UiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMTcyQ0U2NjQ0MUYxMUU2QjI0Njg5MzBDMzU2QTIzRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMTcyQ0U2NzQ0MUYxMUU2QjI0Njg5MzBDMzU2QTIzRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuKO6AMAAADwSURBVHja5JQ9DoJAFITBMxgb/AErvYN6Dkm8hVgYOZDxKLYKjcFuldhoa4yus3FIiIF1C7TxJV/Cvn0zEBjWllJaVVbNqrh+auiCOdiCO9mw55Wq1DssYAzO8lUJWJOEvQuYFGnLzFQdQABaub02mHFPlf/J0AUpBaOSp7e4J8ARdHSGIe8ccJ2VVbCe8jrUGUZgDxwDQ4ezUd7j/Sv3wQkIg4QIzvaqzKHS33SGMWiApoGZmqmDnc5wydD6BoY+Z1e6YGexUZEYamIz4ExKjVGwhSbYwjTYX/n1MjywADF4gCvYsNct09n/d8A+BRgAoAZmFm9OPIkAAAAASUVORK5CYII=",soundOn:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTFBREJDMzE0NDFFMTFFNkE0MjNFMzEyQzZCODFFMDQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTFBREJDMzI0NDFFMTFFNkE0MjNFMzEyQzZCODFFMDQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMUFEQkMyRjQ0MUUxMUU2QTQyM0UzMTJDNkI4MUUwNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMUFEQkMzMDQ0MUUxMUU2QTQyM0UzMTJDNkI4MUUwNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvza/vkAAACFSURBVHjaYvz//z8DNQETA5XBgBr4n5oG/qemC/9T08u4DGsAYn4g5sDUAUw2aBgfAMkLAPEHIF4P5XMi6yfHQBAugPIN0PWTm2w2QGmDQZuwA6D0OWpFynsg3oBFL1YD8RkOE2+AGsyMroeRiNIGWQEjNcKQkRaRwkiLWGYcHgUsQIABABPvG0xFQ+AuAAAAAElFTkSuQmCC",soundOff:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkU1NUY2QzM0NDFFMTFFNjk3RkRGRDY1NkY1MDhFRDUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkU1NUY2QzQ0NDFFMTFFNjk3RkRGRDY1NkY1MDhFRDUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGRTU1RjZDMTQ0MUUxMUU2OTdGREZENjU2RjUwOEVENSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGRTU1RjZDMjQ0MUUxMUU2OTdGREZENjU2RjUwOEVENSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pslm314AAABHSURBVHja5JKJCQAgDAMbcf+V4wi2cAWLGeDIJ9tBagWsZ4AmgSYdmoycusMmIH/cZjDwtrKqi1ccqiOyOjpUxyiae5sjwABDTQkokNj5EQAAAABJRU5ErkJggg==",annotation:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0Y4QTdFNzU0NDFGMTFFNkI5OUJCMEVEOTkxREExNjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0Y4QTdFNzY0NDFGMTFFNkI5OUJCMEVEOTkxREExNjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDRjhBN0U3MzQ0MUYxMUU2Qjk5QkIwRUQ5OTFEQTE2MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDRjhBN0U3NDQ0MUYxMUU2Qjk5QkIwRUQ5OTFEQTE2MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PorbJK0AAACGSURBVHjaYvz//z8DNQETA5XBoDPwPxRTzcBEIP6FagUwUpDwzP+oYCaaPAyDwHwgZkOXY0SLZWxRzojG/wnEb4BYCoscTgMZ8YQZAz41TCRGAAMBC4k2kCjDiDUQl2Eg8ZnkhCGucMUqzkKECxmHV15mISIiKHLhLBL1zyIUyyOggAUIMAB6dGLTw0QFFAAAAABJRU5ErkJggg==",videoGallery:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDhGNzMxQzU0NDIwMTFFNjlDREZCRDFEQjQ2OTY0RUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDhGNzMxQzY0NDIwMTFFNjlDREZCRDFEQjQ2OTY0RUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowOEY3MzFDMzQ0MjAxMUU2OUNERkJEMURCNDY5NjRFQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowOEY3MzFDNDQ0MjAxMUU2OUNERkJEMURCNDY5NjRFQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtP42BUAAADQSURBVHjaYvz//z8DNQETA5XB0DRQCoilgZgRiLmAuB2I3wPxByDuBmJuvCaCIgUJZwPxRSC+DMSJQOwPxF//I8B3IA5G04OC0QU+Imm+DsSN/zFBHT4D0b38EYn9GYhPQ72LLH+CFC+7AfFqIF4LxPZQsRAg3gDEm4A4HIiZ8LmQkcyEDfLZP2Ji+SEQf4fi/zhwK5phKC5CdyGxzmVEU89IjYT9f8Byylsg1gNibSK9jQJYsIjxA3EtkeHJSChSQImZh4RIwZQYeQUsQIABAKH58rUlLpKqAAAAAElFTkSuQmCC",photoGallery:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzE3ODQ1RjA0NDIwMTFFNjlGN0NBOEQwM0M5MkI0N0EiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzE3ODQ1RjE0NDIwMTFFNjlGN0NBOEQwM0M5MkI0N0EiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDMTc4NDVFRTQ0MjAxMUU2OUY3Q0E4RDAzQzkyQjQ3QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDMTc4NDVFRjQ0MjAxMUU2OUY3Q0E4RDAzQzkyQjQ3QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhuDuiEAAACuSURBVHjaYvz//z8DNQETA5UBzQ2cCcT/ScQzkQ1gRAtDcgOUEcZgIaSAAPhPjTD8T81I+U/IUEIG8qAFCyOhIMFnoBEQbwDiOiDmJjp8QbGMhGGAH4h3Qdm/gLgGiJmhakBynGjq4WbgMrAIiP8i8d8DcQAQuwLxCSBeAcTSpBh4+z8muA/ET5D467AZiCth/yMiwv4gRRgjzXIKzQuHWWSYMQtf4TACCliAAAMAY8D6QeagJxsAAAAASUVORK5CYII=",sharethis:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzYwMURGMTg0NDFGMTFFNkJCNkY5MzJDRDYyRUVCM0MiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzYwMURGMTk0NDFGMTFFNkJCNkY5MzJDRDYyRUVCM0MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NjAxREYxNjQ0MUYxMUU2QkI2RjkzMkNENjJFRUIzQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NjAxREYxNzQ0MUYxMUU2QkI2RjkzMkNENjJFRUIzQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnBabfcAAADhSURBVHja5NRdCoJAEMBxjXqPPEmZ4YHqGhHRGRJSL9SDHSX7grBi+y8stOlmKj4ELfwe/JjRGce1hRBWm6tjtbx+IqGPGBG8wlXZwxp83MRrZXD1e+q+4Qxd7biHadOSHYwM58W3kicIscEYDlY4Knet5CuGerwpWaYFyOAL9pijr3oWYJ1PZkoYiuLaqkSVPly+h/aH0are69wTPEPJJxywxECNToxI3V9asmXokSx3gRRnPMrmsM5Qy8SJocdB08FOkTSZwzL5Hhfm0G6wH7rqd5OBIXZvY/J/G+xTgAEAbVwlPSR4eJcAAAAASUVORK5CYII=",print:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTU0Qzk5Q0E0NDFFMTFFNjkxQzRCMjNFMENFMjI5MjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTU0Qzk5Q0I0NDFFMTFFNjkxQzRCMjNFMENFMjI5MjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFNTRDOTlDODQ0MUUxMUU2OTFDNEIyM0UwQ0UyMjkyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFNTRDOTlDOTQ0MUUxMUU2OTFDNEIyM0UwQ0UyMjkyNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlWH8WwAAACFSURBVHja3FRtCoAwCNXmlTprHalbmYOCtZwprYKEtz/Oj6fykJmhpw3Q2V5NOAvYwKQFoTHD7ECjoOp/nHJJEy4og0a/phy9oVGQBMtO/y7ltAF6dXjIlR/yfDK2fDJyVOZIIW3LWnANaMV5Dpsb3amHTd5hfyYO5BAHyx8Sh58K7CrAAAoNM9ALUT8eAAAAAElFTkSuQmCC",download:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM5RkRERTk0NDFFMTFFNkFFRDVEMkUzNDlENjYwMDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM5RkRERUE0NDFFMTFFNkFFRDVEMkUzNDlENjYwMDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzlGRERFNzQ0MUUxMUU2QUVENUQyRTM0OUQ2NjAwOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzlGRERFODQ0MUUxMUU2QUVENUQyRTM0OUQ2NjAwOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pr6q9pgAAABcSURBVHjaYvz//z8DNQETA5XBgBn4H4pHkJcHzkAWAhGBT4yRVBcykiNHyMuMJFqEYeBMLF5lxGPYf6gehAK0vPyfGFfgUz90k81/arlwFhlmzMIXKSMgLwMEGACn4hSHtukRDwAAAABJRU5ErkJggg==",fullscreen:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzYwQkYyRjc0NDFGMTFFNjgzNkZEMTY3MDdERUZEMEUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzYwQkYyRjg0NDFGMTFFNjgzNkZEMTY3MDdERUZEMEUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNjBCRjJGNTQ0MUYxMUU2ODM2RkQxNjcwN0RFRkQwRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNjBCRjJGNjQ0MUYxMUU2ODM2RkQxNjcwN0RFRkQwRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkoSz7UAAABnSURBVHjaYvz//z8DNQETA5UBzQ2cCcT/0TA6QJefiSzJiBaG2AxgxGIgTjUsOFzOiMdXjPgMH/yRwkKCV4kKmqGXDqluIK7EjAtgqB96yQZbDiAm6+F04SwyHDULX+EwAtIhQIABADcJHH83WfW8AAAAAElFTkSuQmCC",exitFullscreen:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTQ5MDIyMEI0NDFGMTFFNkIzQTdFNDJFQjk0RDcxRTEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTQ5MDIyMEM0NDFGMTFFNkIzQTdFNDJFQjk0RDcxRTEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NDkwMjIwOTQ0MUYxMUU2QjNBN0U0MkVCOTRENzFFMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NDkwMjIwQTQ0MUYxMUU2QjNBN0U0MkVCOTRENzFFMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtBxXioAAABcSURBVHjaYvz//z8DNQETA5UBXQ38D8XEig8RL7Ng8Q6xAFktI7EunEWkGMLk0XRIdQP/o+GZWPTMxKIOZ6RgiyFGIpIWI650yEhCmmQcHlmPoJfwiA8RLwMEGAAc7xx/h90brwAAAABJRU5ErkJggg==",languageChange:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjAxMzM3QTg0NDFGMTFFNkIyODVBNEEwOUQ0M0Q5MUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjAxMzM3QTk0NDFGMTFFNkIyODVBNEEwOUQ0M0Q5MUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGMDEzMzdBNjQ0MUYxMUU2QjI4NUE0QTA5RDQzRDkxQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGMDEzMzdBNzQ0MUYxMUU2QjI4NUE0QTA5RDQzRDkxQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pm6jG5wAAAE0SURBVHjaYvz//z8DNQETA5XBgBrIBsSzgPg/En4GxCYoqkBhSCR2BOI/QLwHiF2BuPM/BCxBVsdCggsPAjE3EHMCsTwQf4eKCyMrYiEhaDiAeAoQh0HZt7EFG64w5AXiOCDeAcRLoeFVAMSJQDwHiAWAOBQWasS4EGRRIRAbQPnzgFgUyv4JtbAQqxk4IsAaGuAfofRKINYB4nf/EeAgVP4xsl5cBk6FasoA4vdA/AuIxYBYiFBqQBdgAWJOqCHfgJgXiKdDDS+H8kkykBGIo6EGrICKmUP5d4FYgJCB6JECirEUKFsPGssg8A+IlYDYFoi3QvnYAZoNKkD8D5ojvkDxVyD+DnXlalK93A7V2AvETEjiykD8GylyiDbwGdRAQ2jkIIftRqTIwWkg48grYAECDACNsyUDSVQ/lAAAAABJRU5ErkJggg==",about:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkQyOUEwRjc0NDFGMTFFNjhEMjhCRUU2NDFDRDQ5ODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkQyOUEwRjg0NDFGMTFFNjhEMjhCRUU2NDFDRDQ5ODIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGRDI5QTBGNTQ0MUYxMUU2OEQyOEJFRTY0MUNENDk4MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGRDI5QTBGNjQ0MUYxMUU2OEQyOEJFRTY0MUNENDk4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pit+luoAAAD8SURBVHja5JQ7CsJAGISjeAS18W0nXkE9hwFP4aMQcyDxFnZiq6aR2EXttBUfcRYnsCzJbwq1ceArMvv/E1gmSQVBYH1SaevD+mlgFYzBGtzJil4tdkvdYQRdcApe8sCSePTOoBe1GxemtAdDUNLOymDEMyX7XWAVHLnQ0fw+CZ/VmQ8OoCIFOnzz0PBD6d6AniMFbsAOFAy/SXSvwNmNFPgAi4h7nRPTV7N33cskrFdDqN1V6qEL8qBo+DeiS81kwVYKnLK0tuHniC6bszOp2GFtVCXaQm1anDlyJ1GxfaHYftJif+XTC6mBCXBZpwtY0avH7aX+7wf7FGAAtAGhZyf3ULUAAAAASUVORK5CYII=",Help:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTBDQjhFNDI0NDFGMTFFNkEyMUJFRkY1RDRGMjFFMDMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTBDQjhFNDM0NDFGMTFFNkEyMUJFRkY1RDRGMjFFMDMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMENCOEU0MDQ0MUYxMUU2QTIxQkVGRjVENEYyMUUwMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMENCOEU0MTQ0MUYxMUU2QTIxQkVGRjVENEYyMUUwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ple7wA4AAAEUSURBVHja5JRPDsFAFMbLDdj67wossXMEiSbWLoCIcBE3EFdwAZFaKbvaFStsRRjfxCcmjRldYOMlv6Tz5r0vr9OvExFCWJ+MqPXh+KlgFvSACy5kwVxO2yXP8AV1cBD38MCMeMwdQeNVr05Mxga0QUrZS4MO92TY7wSzYMeGCoiBsXiGA2rc88EWZEyCAza2uZ6APSgoa8F1i88Dk+ASrEFCc7ZdijRZs2aPVvAKphqxJqd1eBQWay9qXVgfdsEQzEEVHBTbnU22cfkayUDe4XRqLsnahWnCEU1rB/JFEA/kbNaOTRM+bCMtUTZMWGLNjj2hjO0bjO2HNfZXfr0HOdAHK9rpxA8gc3ldX+T/LtibAAMA+mHpQcd0lEYAAAAASUVORK5CYII=",moreBar:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkE1OThBMTU0NDFGMTFFNkJEODU4QkY3NTkzOUZERDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkE1OThBMTY0NDFGMTFFNkJEODU4QkY3NTkzOUZERDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QTU5OEExMzQ0MUYxMUU2QkQ4NThCRjc1OTM5RkREOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QTU5OEExNDQ0MUYxMUU2QkQ4NThCRjc1OTM5RkREOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PttqSDMAAABJSURBVHjaYvz//z8DNQETA5XBqIEjzUBPIH4GxZ5ki4MSNhQ/+48Az8gVx+VlRrLFkWz0AuLnQPwEyiZLnHE0L48aOAgMBAgwACS8lz3JybtGAAAAAElFTkSuQmCC",backward:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTg4RTc4MzVEMkY5MTFFNkE3MDVBRjJERjlCNTQ4RjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTg4RTc4MzZEMkY5MTFFNkE3MDVBRjJERjlCNTQ4RjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5ODhFNzgzM0QyRjkxMUU2QTcwNUFGMkRGOUI1NDhGOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5ODhFNzgzNEQyRjkxMUU2QTcwNUFGMkRGOUI1NDhGOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmDQ2VUAAAC3SURBVHjaYvz//z8DNQETA5XBgBgYBMR+RJsICkM8uPg/BPwkoA6O8UmW/kcFFBlY8R8TkG1g1X/s4D4QLwViLyBmJNbA2v/EgZNArEXIwPr/pIHPQOyEbiBysiE1y/AA8UYg1sSXbKr/kw5OIIcpsTFMCHgQSjalWDSxALEEENtDw/suktwiYhJ2EYF0yAzE+UD8A4jvEGMgA1QDoaznAMTviTUQhP2B2JuAmhgYm3HkFbAAAQYAlOArhRjtKt4AAAAASUVORK5CYII=",forward:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUI2QTJCMzZEMkY5MTFFNjkxNDBERUNFRTc1RTEwREIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUI2QTJCMzdEMkY5MTFFNjkxNDBERUNFRTc1RTEwREIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQjZBMkIzNEQyRjkxMUU2OTE0MERFQ0VFNzVFMTBEQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQjZBMkIzNUQyRjkxMUU2OTE0MERFQ0VFNzVFMTBEQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqvdpQsAAAC0SURBVHjaYvz//z8DNQETA5XBgBroB8RBBFWBwpBI/PM/BBTjU0eKgciglNoGgkAFqQYyArEXEC8F4vv/sYMqYg3UAuKT/4kDtYQMdALiz/9JA/Uw/ejJRhOINwIxD4nJ7z+2ZAMKsxP/SQfVuLzsQYZhFfgiZRGSwrvQcLEHYgkgZsFiWCmhZHMHiH8AcT4QMxNIh0XEJOz3QOxARNbLJzbrxRDIKd5A7E8oRzGOvAIWIMAA+I0rhb3hIEIAAAAASUVORK5CYII=",soundAdd:"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEFBNzMxOUFCQjgwMTFFNkFFNTJGQ0IwMjg0MjJBRTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEFBNzMxOUJCQjgwMTFFNkFFNTJGQ0IwMjg0MjJBRTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4QUE3MzE5OEJCODAxMUU2QUU1MkZDQjAyODQyMkFFNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4QUE3MzE5OUJCODAxMUU2QUU1MkZDQjAyODQyMkFFNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqAv3nkAAABBSURBVHjaYvz//z8DLQETA43BqAWjFmCA/1A8GkTUAyxEhDkx4oyD1geMOFzOOJqK6BYHDMSmltE4GLWAdgAgwAAU3Qgykbj+1QAAAABJRU5ErkJggg==",soundReduce:"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTE1MjRBQzlCQjgwMTFFNjk0MzRGREJFRTk5OTY1OUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTE1MjRBQ0FCQjgwMTFFNjk0MzRGREJFRTk5OTY1OUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MTUyNEFDN0JCODAxMUU2OTQzNEZEQkVFOTk5NjU5QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5MTUyNEFDOEJCODAxMUU2OTQzNEZEQkVFOTk5NjU5QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Po2FvM0AAAA1SURBVHjaYvz//z8DLQETA43BqAWjFoxaQAcLWAjIE1uOMA5aHzCORvKoBaMWjFrAwAAQYADvCQQywiPpxwAAAABJRU5ErkJggg==",emailButton:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODRDQTZCOTI0NDFGMTFFNjlGNDFBRTJBQTYyQTRGRTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODRDQTZCOTM0NDFGMTFFNjlGNDFBRTJBQTYyQTRGRTAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NENBNkI5MDQ0MUYxMUU2OUY0MUFFMkFBNjJBNEZFMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4NENBNkI5MTQ0MUYxMUU2OUY0MUFFMkFBNjJBNEZFMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpT1wCgAAADMSURBVHjaYvz//z8DNQETA5XB0DNwJhD/JxHPxGfgYyD+Q4KDfgPxdRQRUCwjYR4gtgPiZ/8JgydAbAXEjMhmoLvwPBC/A2JDID6Ix2V7oWqeAPFZfC4Ega9AHAfEzEDcieaqf0DcAsRMQBwCxB+h4nAzsBkIA3OAWAyIo6Ea3wGxN1TdFDS1cDMY0XIKera5DMRpQPwFiN8DMTsQrwZiIzR1jHAGAQNB4CMQV0M1tQAxPxY1JBlIDGAcullvFhlmoOhhHC0PKQYAAQYAXTkAcnLmxzQAAAAASUVORK5CYII=",wechat:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUJDMEZEQTk0NzcxMTFFOEExMERFMTExRjFFNTFGNzYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUJDMEZEQTg0NzcxMTFFOEExMERFMTExRjFFNTFGNzYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGRDI5QTBGNzQ0MUYxMUU2OEQyOEJFRTY0MUNENDk4MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGRDI5QTBGODQ0MUYxMUU2OEQyOEJFRTY0MUNENDk4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvow+XEAAAFZSURBVHja5NQ/L0NRGMfxe7X+xCQWTfAKStQdvACLxGBj6dLES9A3YJAYamZECEkXYbBJLBKxlKlzmSQoqUGI63uaX+Pm9BwkGouTfNJ7n/P0ye1zn54wjuOgk6sr6PD6k4IZrOAKDblULPNdwdDq4Sx2MIATVBTPYRp15HHsrWgKSg4vqCBKxFsi7Zmcccd+U/LmEHcY0n1sfQbae8DBTwo2sOVJNK0p4AyveNd1QXvOgk/YdBRLoawnrWFbaoqVldNW8AiPGLYKLumLqxhJxNOKmVV0FZxMvJRsIl7FhX6a3VcTO1dOW0FjDm/qkUksqWfXvpeAdT1I8z5tTVEfUrqeEDP8g2ZmzZTZc4wp1Hz/lBksY0zFjSL6sYbuRG4PSoiw4RpsH/MG99W3G+xhF7eK3aPX18PgiznM4xR1TcNz/LkWWrnhL8/DLOYxikXX4fAPDtgPAQYAxgRvql4zXg0AAAAASUVORK5CYII=",magnifier:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0UzRkZENURBNDQyMTFFOTk3RDVDNjc0RjFDMDY3NzYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0UzRkZENUNBNDQyMTFFOTk3RDVDNjc0RjFDMDY3NzYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowRkU5NDY3NDQ0MUYxMUU2QjJGQ0U3MzBFNkQzNkM1NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowRkU5NDY3NTQ0MUYxMUU2QjJGQ0U3MzBFNkQzNkM1NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pk7NYL4AAACxSURBVHjazFTBCYAwDDTiQG7gx3/BhRzJh4NUJ3EBIUZItJS0Vi3iwdGSNNeSKwFELHKiLDLjM0FDtER0aDkex95Djz2esMSBV0Gv1Bz0A4aLFmLj5RqOI59LEpSXiJgLEZWXJwlGD3uXqnnNlEnaq9DNq6iUWM0rBGrqOy5f9bDj/ZTD5Za43nU55R9izJSQk0YRmYnjlSg8nDZuEeQYDhAQfzVtIPUfvhL9/4DdBBgAVPYnEzL0xD8AAAAASUVORK5CYII=",text:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFtJREFUeNpi/P//PwM1ARMDlcHgN5AFixipgcpIjAudoAoZ0TQgizmR4uUrRLgMqxpGIpPNf2zeG002owbiBko42GQbGIeDzUBOwv5PTP4lVDgQpXHoxjJAgAEAl70PVLtqRkAAAAAASUVORK5CYII="};Class("ButtonQueue",{create:function(t){this.container=t.container;this.extended=t.extended;this.edtNumber=t.edtNumber?t.edtNumber:{body:null,width:0,top:0,space:0};this.buttonWidth=t.buttonWidth;this.buttonTop=t.buttonTop;this.buttons=t.buttons.clone();this.buttonCount=this.buttons.length-1;this.buttons.each(function(t){t.freedom();t.hint=!0});this.pickButtons()},pickButtons:function(){this.btnFirst=this.buttons.find("first").get(0);this.btnPrevious=this.buttons.find("previous").get(0);this.btnNext=this.buttons.find("next").get(0);this.btnLast=this.buttons.find("last").get(0);this.btnMore=this.buttons.find("more").get(0);this.buttons.remove(this.btnFirst);this.buttons.remove(this.btnPrevious);this.buttons.remove(this.btnNext);this.buttons.remove(this.btnLast);this.buttons.remove(this.btnMore);this.pageButtonCount=4;bookConfig.enablePageBack&&(this.btnBackward=this.buttons.find("backward").get(0),this.btnForward=this.buttons.find("forward").get(0),this.buttons.remove(this.btnBackward),this.buttons.remove(this.btnForward),this.pageButtonCount=6)},sort:virtual_function});Class("PCButtonQueue",{sort:function(){var t=Math.floor((this.container.width-10-(this.edtNumber.width+2*this.edtNumber.space))/this.buttonWidth),i=!1,e=10;t<this.buttonCount?(i=!0,t--):t=this.buttonCount;if(t<=this.pageButtonCount)e=this.addPageButtons(e),this.buttons.each(function(t){t==this.buttons.find("sound").get(0)&&(t.title=!1,VolumeControlBar.config.direction=VolumeControlBar.DEFAULT);"WeChatShareButton"==t.getClassName()&&global.WeChatShareImg.setDirection(TextBubble.DEFAULT);t.addTo(this.extended);t.hint=!1}.bind(this));else for(var t=t-this.pageButtonCount,o=Math.ceil(t/2),s=0;s<this.buttons.length;s++){var n=this.buttons.get(s);s<t?(n==this.buttons.find("sound").get(0)&&(n.title=!1,VolumeControlBar.config.direction=VolumeControlBar.BOTTOM),"WeChatShareButton"==n.getClassName()&&global.WeChatShareImg.setDirection(TextBubble.BOTTOM),n.addTo(this.container.body),n.setPosition(e,this.buttonTop),e+=this.buttonWidth,s==o-1&&(e=this.addPageButtons(e))):(n==this.buttons.find("sound").get(0)&&(n.title=!1,VolumeControlBar.config.direction=VolumeControlBar.DEFAULT),n.addTo(this.extended),n.hint=!1)}i&&(this.btnMore.addTo(this.container.body),this.btnMore.setPosition(e,this.buttonTop))},addPageButtons:function(t){function i(t){t.addTo(e);t.setPosition(o,n);o+=s}var e=this.container.body,o=t,s=this.buttonWidth,n=this.buttonTop;rightToLeft?(bookConfig.enablePageBack&&i(this.btnForward),i(this.btnLast),i(this.btnNext),i(this.btnPrevious),i(this.btnFirst),bookConfig.enablePageBack&&i(this.btnBackward)):(bookConfig.enablePageBack&&i(this.btnBackward),i(this.btnFirst),i(this.btnPrevious),i(this.btnNext),i(this.btnLast),bookConfig.enablePageBack&&i(this.btnForward));return o}}).extend("ButtonQueue");Class("MobileButtonQueue",{sort:function(t,i){var e=this.edtNumber.width+2*this.edtNumber.space+4*this.buttonWidth;this.addPageButtons(e,(this.container.width-e)/2);this.buttons.each(function(t){t.addTo(this.extended)}.bind(this))}}).extend("ButtonQueue");Class("PCToolbar",{BUTTON_WIDTH:30,initBar:function(){this.removeButton("thumbnail");this.topBar=$('<div class="fbTopBar" id = "fbTopBar"></div>');this.logoBar=$("<div id='logoBar' class='logoBar'></div>");this.buttonBar=$("<div class='buttonBar'></div>");this.pageBar=$("<div class='pageBar'></div>");this.edtPageNumber=$("<div class='pageNumber' id='tfPageIndex'><input type='text' id='currentPageIndexTextField' size='13'/></div>");this.btnGotoPage=$("<div class='btnGotoPage'>GO</div>");VolumeControlBar.config={color:this.color.rgba(.5),iconColor:Color(bookConfig.iconColor).toString(),direction:VolumeControlBar.BOTTOM};this.parent.append(this.topBar);this.parent.append(this.logoBar);this.topBar.append(this.buttonBar);this.parent.append(this.pageBar);this.pageBar.append(this.edtPageNumber);this.pageBar.append(this.btnGotoPage);this.initStyle();this.initPageNumber()},initStyle:function(){this.topBar.css({"background-color":this.color.rgba(.5)});this.pageBar.css({"background-color":this.color.rgba(.5)})},initPageNumber:function(){var t=this.edtPageNumber.children("input");t.css({color:Color(bookConfig.pageNumColor).toString()});this.btnGotoPage.css({color:Color(bookConfig.iconColor).toString()});var i=parseInt(bookConfig.totalPageCount),e=16;""==bookConfig.pageNumberCaption&&(1e4<=i&&(e=16),1e4>i&&(e=10),1e3>i&&(e=7),100>i&&(e=4),10>i&&(e=3));t.attr("size",e);this.edtPageWidth=this.edtPageNumber.width()},setButtonTitle:function(t){"WeChatShareButton"==t.getClassName()?global.WeChatShareImg=new WeChatShare({parent:this.parent,color:bookConfig.iconFontColor,textColor:bookConfig.toolbarColor,margin:10,padding:10,arrowHeight:10,arrowWidth:10}):t.setTitle(t.caption)},initExtendedbar:function(){this.extendedBar=new PCExtendedBar(this.parent);global.moreBar=this.extendedBar},initEvents:function(){this._super();this.btnGotoPage.bind("click",function(){var t=this.edtPageNumber.children("input").val();""!=t.trim()&&(t=parseInt(getRealPage(t)),isNaN(t)||gotoPageFun(t))}.bind(this))},onResize:function(t,i){void 0==t&&(t=this.parent.width());void 0==i&&(i=this.parent.height());this.parentWidth=t;this.parentHeight=i;var e=this.logoBar.width()+20,o=this.pageBar.width()+60,s=Math.max(e,o),s=Number.between(t-2*s,4*(this.BUTTON_WIDTH+5)+20,(this.buttons.length-1)*(this.BUTTON_WIDTH+5)),n=(t-s)/2;this.topBar.css({left:n+"px",width:s+"px"});this.buttonBar.css({width:s-10+"px"});n<o?this.pageBar.css({display:"none"}):this.pageBar.css({display:"block"});n<e?this.logoBar.hide():(this.visible&&this.logoBar.show(),this.logoBar.css({left:n-e+"px"}));this.resetButtonPosition()},resetButtonPosition:function(){new PCButtonQueue({buttons:this.buttons,buttonWidth:this.BUTTON_WIDTH,buttonTop:0,container:{body:this.buttonBar,width:this.buttonBar.width()},extended:this.extendedBar.$bar}).sort();this.resizeButtonBar();this.extendedBar.resize(this.buttonsInExtendedBar());this.extendedBar.hide();this.buttons.each(function(t){t.changeColor();t.$button.asButton()}.bind(this))},resizeButtonBar:function(){var t=this.getButtonBarWidth();this.topBar.css({left:(this.parentWidth-t)/2+"px",width:t+"px"})},getButtonBarWidth:function(){for(var t=20,i=0;i<this.buttons.length;i++)this.buttons.get(i).$parent==this.buttonBar&&(t+=this.BUTTON_WIDTH);return t},show:function(){this._super();this.onResize()},hide:function(){this._super();this.logoBar.hide();this.pageBar.css({display:"none"})}}).extend("Toolbar");Class("PCExtendedBar",{create:function(t){this._super(t);this.$bar.css({"background-color":this.color.rgba(.5)})},show:function(t){if(!0!=this.isMoving&&!0!=this.visible){this.visible=this.isMoving=!0;this.$bar.css({left:t.left+t.width-this.width+3+"px",top:t.top+t.height+10+"px"});var i=0;this.$bar.css({display:"block",opacity:0});var e=function(){i+=.1;this.$bar.css({opacity:i});equals(i,1)&&(e.stop(),this.isMoving=!1)}.interval(this,40)}},resize:function(t){for(var i=0;i<t.length;i++)t.get(i).setPosition(0,10+30*i);this.width=32;this.height=30*t.length+20;this.$bar.css({width:this.width+"px",height:this.height+"px"})}}).extend("ExtendedBar");var CatalogThumbnailItem=Class({create:function(t,i,e){this.itemContent=t;this.dockMenuContent=i;this.index=e;this.item=$("<div class='thumbnailItem'></div>");this.rect=$("<div class='thumbnailRect'></div>");this.caption=$("<div class='dockMenuItemCaption'></div>");this.captionAfter=$("<div class='dockMenuItemCaptionAfter'></div>");this.itemContent.append(this.item);this.item.append(this.rect);this.item.append(this.caption);this.caption.after(this.captionAfter);this.initEvent()},initItem:function(t,i){this.dockMenu=new DockMenu(this.dockMenuContent,t,i);this.initCaption(t,i)},addPrev:function(){var t=$("<div class='dockMenuItem dockMenuItemShadow dockButton'></div>");t.append("<div></div>");t.append("<img src='"+uiBaseURL+"slide_leftButton.png'/>");t.click(function(){thumbnail.gotoItemByIndex(this.index-1);return!1}.bind(this));this.dockMenu.addObj(t,"before")},addNext:function(){var t=$("<div class='dockMenuItem dockMenuItemShadow dockButton'></div>");t.append("<div></div>");t.append("<img src='"+uiBaseURL+"slide_rightButton.png'/>");t.click(function(){thumbnail.gotoItemByIndex(this.index+1);return!1}.bind(this));this.dockMenu.addObj(t,"after")},initCaption:function(t,i){var e=BookInfo.getThumbnailPages();t=1==e[t].length?e[t][0]:Math.min(e[t][0],e[t][1]);i=1==e[i].length?e[i][0]:Math.max(e[i][0],e[i][1]);this.fromIndex=t;this.toIndex=i;1<t&&(rightToLeft?this.addNext():this.addPrev());i<bookConfig.totalPageCount&&(rightToLeft?this.addPrev():this.addNext());this.fromIndex!=this.toIndex?this.caption.html(rightToLeft?this.toIndex+"-"+this.fromIndex:this.fromIndex+"-"+this.toIndex):this.caption.html(this.fromIndex);$(this.caption).css({position:"absolute",height:"16px",top:"-30px","white-space":"nowrap",width:"auto","-webkit-transform":"translate(-50%, 0)","-moz-transform":"translate(-50%, 0)","-ms-transform":"translate(-50%, 0)","-o-transform":"translate(-50%, 0)",transform:"translate(-50%, 0)",left:"50%"});$(this.caption).css({"margin-left":-$(this.caption).outerWidth()/2});$(this.captionAfter).css({position:"absolute",top:"-5px",left:"50%","margin-left":"-8px","background-image":"url("+uiBaseURL+"span.png)"})},initEvent:function(){this.choosedColor="#505a60";this.item.bind(_event._enter,function(){this.rect.css("background","#ffffff")}.bind(this));this.item.bind(_event._leave,function(){this.rect.css("background",this.choosedColor)}.bind(this));this.item.bind(_event._end,function(){thumbnail.gotoItemByIndex(this.index)}.bind(this));this.item.bind(_event._over,function(){this.caption.css("display","block");this.captionAfter.css("display","block")}.bind(this));this.item.bind(_event._leave,function(){this.caption.hide();this.captionAfter.hide()}.bind(this))},show:function(){this.rect.css("background","#ffffff");this.choosedColor="#ffffff";this.dockMenu.show()},hide:function(){this.rect.css("background","#505a60");this.choosedColor="#505a60";this.dockMenu.hide()},clearHighLight:function(){this.dockMenu.clearHighLight()},setHighLight:function(t){this.dockMenu.setHighLight(t)},onResize:function(){this.dockMenu.resize()}});var CatalogThumbnailBar=Class({create:function(t){this.menu=$("<div class='menu'></div>");this.initMenu();t.append(this.menu)},initMenu:function(){this.visible=!1;this.height=170;this.dockMenuContent=$("<div class='dockMenuContent'></div>");this.thumbnailItemContent=$("<div class='thumbnailItemContent'></div>");this.dockMenuContent.css({width:windowWidth-50+"px"});this.menu.append(this.dockMenuContent);this.menu.append(this.thumbnailItemContent);this.addItem()},addItem:function(){this.itemArray=[];var t=BookInfo.getThumbnailPages(),i=parseInt(t.length/10);0!=t.length%10&&(i+=1);for(var e=0;e<i;e++){var o=rightToLeft?i-e-1:e,s=new CatalogThumbnailItem(this.thumbnailItemContent,this.dockMenuContent,e),n=10*o,o=Math.min(10*(o+1)-1,t.length-1);s.initItem(n,o);this.itemArray.push(s)}(this.highLightItem=this.currentItem=this.itemArray[rightToLeft?i-1:0])&&this.highLightItem.setHighLight(1);this.highLightItem&&this.highLightItem.show()},gotoItemByIndex:function(t){this.currentItem&&this.currentItem.index!==t&&(this.currentItem.hide(),this.itemArray[t].show(),this.currentItem=this.itemArray[t])},onResize:function(){var t=1,i=10*(140*bookConfig.largePageWidth/bookConfig.largePageHeight+10);origin=0;i>windowWidth-50&&(t=(windowWidth-50)/i,origin=parseInt(100*(1-(windowWidth-50)/i)/2));this.dockMenuContent.css({"-webkit-transform":"scale3d("+t+","+t+",1)","-moz-transform":"scale3d("+t+","+t+",1)","-ms-transform":"scale3d("+t+","+t+",1)","-o-transform":"scale3d("+t+","+t+",1)",transform:"scale3d("+t+","+t+",1)","-webkit-transform-origin":"50% 100%","-moz-transform-origin":"50% 100%","-ms-transform-origin":"50% 100%","-o-transform-origin":"50% 100%","transform-origin":"50% 100%"});this.dockMenuContent.css({width:windowWidth-50+"px"});this.thumbnailItemContent.css({"-webkit-transform":"scale3d("+t+","+t+",1)","-moz-transform":"scale3d("+t+","+t+",1)","-ms-transform":"scale3d("+t+","+t+",1)","-o-transform":"scale3d("+t+","+t+",1)",transform:"scale3d("+t+","+t+",1)","-webkit-transform-origin":"50% 100%","-moz-transform-origin":"50% 100%","-ms-transform-origin":"50% 100%","-o-transform-origin":"50% 100%","transform-origin":"50% 100%"});for(t=0;t<this.itemArray.length;t++)this.itemArray[t].onResize()},getOccuHeight:function(){return 110},transparent:function(){this.menu.animate({opacity:0,"z-index":-1},200)},noTransparent:function(){this.menu.animate({opacity:1,"z-index":10},200)},mergeAll:function(){},fissionAll:function(){},getShowStatu:function(){return this.visible},clearHighLight:function(){this.highLightItem&&this.highLightItem.clearHighLight()},setHighLight:function(t){for(var i=0;i<this.itemArray.length;i++)if(t<=this.itemArray[i].toIndex&&t>=this.itemArray[i].fromIndex){this.gotoItemByIndex(i);this.itemArray[i].setHighLight(t);this.highLightItem=this.currentItem;break}},fillContent:function(){this.setHighLight(this.highLightItem.index)},showOrHide:function(){!1===this.visible?this.show():this.hide();catalogBook&&catalogBook.showOrHideLiteThumbnail()},show:function(){this.showing=this.visible=!0;this.menu.animate.delay(this.menu,100,[{bottom:-105+toolBar.getBottomHeight()+"px"},300])},hide:function(){this.menu.animate.delay(this.menu,100,[{bottom:-this.height+"px"},300]);this.showing=this.visible=!1},setPosition:function(){},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},getTopHeight:function(){return 0},getBottomHeight:function(){return!0==this.visible?110:0}});var GuidToolbar=Class({create:function(t){this.$bar=$("<div class='catalog_simple_bar'></div>");this.initButtons();this.initLogo();this.changeLanguage();this.resetButtons();this.initEvent();t.append(this.$bar)},initButtons:function(){this.numBtn=$("<div id='guidPageIndex' class='page_num'></div>");this.thumBtn=$("<div id='thumb' class='button'></div>");this.moreBtn=$("<div id='more' class='button'></div>");this.fullscreenBtn=$("<div id='fullScreen' class='button'></div>");this.searchBtn=$("<div id='search' class='button'></div>");this.shareBtn=$("<div id='share' class='button'></div>");this.toolBarIconUrl=uiBaseURL+"catalog_icon.png";this.thumBtn.addCssSprite(this.toolBarIconUrl,"thumb",38,38,catalogIconInfo);this.moreBtn.addCssSprite(this.toolBarIconUrl,"more",38,38,catalogIconInfo);this.fullscreenBtn.addCssSprite(this.toolBarIconUrl,"fullScreen",38,38,catalogIconInfo);this.searchBtn.addCssSprite(this.toolBarIconUrl,"search",38,38,catalogIconInfo);this.shareBtn.addCssSprite(this.toolBarIconUrl,"share",38,38,catalogIconInfo);this.thumBtn.enterToChange(this.toolBarIconUrl,"thumb",38,38,catalogIconInfo);this.moreBtn.enterToChange(this.toolBarIconUrl,"more",38,38,catalogIconInfo);this.fullscreenBtn.enterToChange(this.toolBarIconUrl,"fullScreen",38,38,catalogIconInfo);this.searchBtn.enterToChange(this.toolBarIconUrl,"search",38,38,catalogIconInfo);this.shareBtn.enterToChange(this.toolBarIconUrl,"share",38,38,catalogIconInfo);this.$bar.append(this.shareBtn);this.$bar.append(this.searchBtn);this.$bar.append(this.numBtn);this.$bar.append(this.thumBtn);this.$bar.append(this.moreBtn);this.$bar.append(this.fullscreenBtn)},changeLanguage:function(){this.shareBtn.attr("title",getLanguage("btnSocialShare","Share"));this.searchBtn.attr("title",getLanguage("btnSearch","Search"));this.thumBtn.attr("title",getLanguage("btnThumb","Thumbnails"));this.moreBtn.attr("title",getLanguage("btnMore","More"));this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Fullscreen"))},resetButtons:function(){this.iconWidth=38;this.numWidth=60;10<=bookConfig.totalPageCount&&(this.numWidth=80);100<=bookConfig.totalPageCount&&(this.numWidth=100);1e3<=bookConfig.totalPageCount&&(this.numWidth=125);1e4<=bookConfig.totalPageCount&&(this.numWidth=145);var t=12;this.numBtn.css({width:this.numWidth+"px",left:t+"px"});t+=this.numWidth;bookConfig.ShareButtonVisible?(this.shareBtn.css({left:t+"px"}),t+=this.iconWidth):this.shareBtn.hide();bookConfig.SearchButtonVisible?(this.searchBtn.css({left:t+"px"}),t+=this.iconWidth):this.searchBtn.hide();bookConfig.ThumbnailsButtonVisible?(this.thumBtn.css({left:t+"px"}),t+=this.iconWidth):this.thumBtn.hide();this.moreBtn.css({left:t+"px"});t+=this.iconWidth;bookConfig.FullscreenButtonVisible?(this.fullscreenBtn.css({left:t+"px"}),t+=this.iconWidth):this.fullscreenBtn.hide();this.$bar.css({width:t+7+"px"})},initEvent:function(){this.addResponseDom();this.thumBtn.bind(_event._end,function(){thumbnail&&thumbnail.showOrHide()});this.fullscreenBtn.bind(_event._end,readAsFullscreen);$(document).bind(fullScreenApi.fullScreenEventName,function(){this.changeFullscreenIcon(fullScreenApi.isFullScreen())}.bind(this));this.searchBtn.bind(_event._end,function(){frmSearch&&frmSearch.showOrHide()});this.shareBtn.bind(_event._end,function(){sharePanel&&sharePanel.showOrHide()});var i=5,e;this.moreBtn.bind(_event._end,function(){catalogBook.hideGuidBarAndShowToolBar();"complex"==catalogBook.mode&&(i=5,s(),t())}.bind(this));var o=!1,t=function(){if(!o){o=!0;for(var t=0;t<this.responseDomArray.length;t++)this.responseDomArray[t].bind(_event._over,function(){window.clearInterval(e)}),this.responseDomArray[t].bind(_event._leave,function(){i=5;s()})}}.bind(this),s=function(){window.clearInterval(e);e=window.setInterval(function(){i--;0>=i&&(catalogBook.hideToolBarAndShowGuidBar(),"simple"==catalogBook.mode?window.clearInterval(e):i=5)},1e3)}},addResponseDom:function(){this.responseDomArray=[];global.toolBar&&(global.toolBar&&toolBar.topBar&&this.responseDomArray.push(toolBar.topBar),global.toolBar&&toolBar.bottomBar&&this.responseDomArray.push(toolBar.bottomBar),global.toolBar&&toolBar.extendedBar.$bar&&this.responseDomArray.push(toolBar.extendedBar.$bar),toolBar.buttons.each(function(t){this.responseDomArray.push(t.$button)}.bind(this)))},changeFullscreenIcon:function(t){t?(this.fullscreenBtn.changeCssSprite(this.toolBarIconUrl,"exitFullScreen",35,35,catalogIconInfo),this.fullscreenBtn.attr("title",getLanguage("btnExitFullscreen","exitFullScreen")),this.fullscreenBtn.unbind(_event._down),this.fullscreenBtn.unbind(_event._enter),this.fullscreenBtn.unbind(_event._leave),this.fullscreenBtn.enterToChange(this.toolBarIconUrl,"exitFullScreen",35,35,catalogIconInfo)):(this.fullscreenBtn.changeCssSprite(this.toolBarIconUrl,"fullScreen",35,35,catalogIconInfo),this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Fullscreen")),this.fullscreenBtn.unbind(_event._down),this.fullscreenBtn.unbind(_event._enter),this.fullscreenBtn.unbind(_event._leave),this.fullscreenBtn.enterToChange(this.toolBarIconUrl,"fullScreen",35,35,catalogIconInfo))},show:function(){this.$bar.show();this.logo&&this.logo.show()},hide:function(){this.$bar.hide();this.logo&&this.logo.hide()},getHeight:function(){return 50},onResize:function(){},initLogo:function(){bookConfig.appLogoIcon&&(this.logo=$("<img src='"+bookConfig.appLogoIcon+"' class='catalog_logo'/>"),this.logo.css({left:bookConfig.logoPadding+"px",top:bookConfig.logoTop+"px",height:bookConfig.logoHeight+"px"}),this.logo.click(function(){var t=getLogoLink();window.open(t[0],t[1]);return!1}),tmpContainer.append(this.logo))}});var SlideThumbnailCell=Class({create:function(t){this.background=$("<div style='position:absolute;'></div>");this.pageNum=$("<div style='position:absolute;'></div>");this.img=$("<img />");this.imgBac=$("<div></div>");this.pageIndex=-1;this.height=115;this.width=95*bookConfig.largePageWidth/bookConfig.largePageHeight;this.imgHeight=this.imgWidth=-1;$(t).append(this.background);$(this.background).append(this.pageNum);$(this.background).css({position:"absolute",width:this.width+"px",height:this.height+"px",top:"0px"});$(this.pageNum).css({width:this.width+"px",height:20,bottom:"-8px","line-height":"20px","text-align":"center","vertical-align":"middle",color:"#ffffff","font-size":"12px"});$(this.imgBac).append(this.img);$(this.imgBac).css({position:"absolute"});$(this.img).css({position:"absolute"});$(this.img).addBorderShadow("#555555",0,2)},getPageIndex:function(){return this.pageIndex},getWidth:function(){return this.width},getHeight:function(){return this.height},setPosition:function(t,i,e){void 0==e&&(e=["left","top"]);$(this.background).css(e[0],t+"px");$(this.background).css(e[1],i+"px")},onResize:function(t,i){$(this.background).css({width:t+"px",height:i+"px"});this.onResizeImage(t,i)},onResizeImage:function(){$(this.img).css({width:this.width+"px",height:"95px"});$(this.imgBac).css({width:this.width+"px",height:"95px"})},setImgPosition:function(t){switch(t){case"l":$(this.imgBac).css({left:"0px",right:"auto"});break;case"r":$(this.imgBac).css({right:"0px",left:"auto"});break;case"c":$(this.imgBac).css({left:(this.width-this.imgWidth)/2+"px",right:"auto"})}},setCaption:function(t){this.pageNum.html(t)},fillImage:function(t){this.pageIndex=t;this.img=$("<img/>");$(this.img).attr("src",getPageDir(t,"thumb",originTotalPageCount));$(this.background).append(this.imgBac);this.imgBac.empty();$(this.imgBac).append(this.img);this.onResizeImage(this.width,this.height);this.pageNum.html("<b>"+t+"</b>")},clearImage:function(t){$(this.imgBac).empty()},showBorder:function(){$(this.background).css({border:""})},hideBorder:function(){$(this.background)[0].style.border=""},getTextField:function(){return this.pageNum},hideTextField:function(){this.pageNum.hide()},showTextField:function(){this.pageNum.show()},showCell:function(t){$(this.background).css({display:t?"block":"none"})},onMouseUp:function(i,e){var o=this;$(this.background).bind(_event._end,function(t){e.call(i,o)});$(this.background).bind(_event._enter,function(t){o.background.css({cursor:"pointer"})})},highLight:function(t){$(this.imgBac).css({border:"2px solid #ff8040"})},onMouseOver:function(){var i=this;$(this.imgBac).css({border:""});$(this.imgBac).bind(_event._enter,function(t){i.imgBac.css({border:"2px solid #0080ff"})});$(this.imgBac).bind(_event._leave,function(t){i.imgBac.css({border:""})})},clearMouseOver:function(){var i=this;$(this.imgBac).bind(_event._enter,function(t){i.imgBac.css({border:""})});$(this.imgBac).bind(_event._leave,function(t){i.imgBac.css({border:""})})},onMouseOverUp:function(){var i=this;$(this.imgBac).bind(_event._enter,function(t){i.imgBac.css({border:"2px solid #0080ff"})});$(this.imgBac).bind(_event._leave,function(t){i.imgBac.css({border:"2px solid #ff8040"})})},clearHighLight:function(){$(this.imgBac).css({border:""})}});var SlideThumbnailItem=Class({create:function(t,i){this.background=$("<div style='position:absolute;font-family:Arial,Tahoma;'></div>");this.imageBac=$("<div style='position:absolute;'></div>");this.pageNum=$("<div style='position:absolute;'></div>");this.itemB=new SlideThumbnailCell(this.imageBac);this.itemA=new SlideThumbnailCell(this.imageBac);this.height=115;this.width=190*bookConfig.largePageWidth/bookConfig.largePageHeight;this.isMerge=this.isDoublePage=!0;this.pageIndex=i;this.fillImage=!1;this.mainColor="#000000";$(t).append(this.background);$(this.background).append(this.imageBac);$(this.background).append(this.pageNum);$(this.background).css({position:"absolute",width:this.width+"px",height:this.height+"px",top:"2px"});$(this.imageBac).css({position:"absolute",width:this.width+"px",height:95});$(this.pageNum).css({width:this.width+"px",height:20,bottom:"-8px","line-height":"20px","text-align":"center","vertical-align":"middle",color:"#ffffff","font-size":"12px"});1!=i&&i!=totalPageCount?(this.itemA.setPosition(0,0,rightToLeft?["right","top"]:["left","top"]),this.itemB.setPosition(0,0,rightToLeft?["left","top"]:["right","top"]),this.itemB.onMouseUp(this,this.onItemMouseUp),this.itemA.pageIndex=i,this.itemB.pageIndex=i+1,this.onMouseOver()):(1==i?this.itemA.setPosition(0,0):rightToLeft?this.itemA.setPosition(0,0,["right","top"]):this.itemA.setPosition(0,0),this.itemB.showCell(!1),this.setBorder(!1),this.itemA.pageIndex=i,this.itemA.onMouseOver());this.itemA.onMouseUp(this,this.onItemMouseUp);$(this.pageNum).hide()},getWidth:function(){return this.width},addImage:function(){this.fillImage||(this.itemA.fillImage(this.pageIndex),1!=this.pageIndex&&this.pageIndex!=totalPageCount&&this.itemB.fillImage(this.pageIndex+1),this.fillImage=!0,rightToLeft?$(this.pageNum).html(this.pageIndex+1+"-"+this.pageIndex):$(this.pageNum).html("<b>"+this.pageIndex+"-"+(this.pageIndex+1)+"</b>"))},clearImage:function(){this.itemA.clearImage(this.pageIndex);1!=this.pageIndex&&this.pageIndex!=totalPageCount&&this.itemB.clearImage(this.pageIndex+1);this.fillImage=!1},setPosition:function(t,i,e){void 0==e&&(e=["left","top"]);$(this.background).css(e[0],t+"px");$(this.background).css(e[1],i+"px")},onResize:function(t,i){this.width=t;this.height=i;$(this.background).css({width:t+"px",height:i+"px"})},resetItem:function(){},fission:function(){1!=this.pageIndex&&this.pageIndex!=totalPageCount&&(this.setBorder(!1),this.onResize(this.width,this.height),this.itemA.setImgPosition("r"),this.itemB.setImgPosition("l"),this.showTextField(!1),this.isMerge=!1)},merge:function(){1!=this.pageIndex&&this.pageIndex!=totalPageCount&&(this.setBorder(!1),this.onResize(this.width,this.height),this.itemA.setImgPosition("r"),this.itemB.setImgPosition("l"),this.showTextField(!0),this.isMerge=!0)},showBorder:function(){$(this.imageBac).css({border:"1px solid #444444"})},hideBorder:function(){$(this.imageBac)[0].style.border=""},showTextField:function(t){var i=t?"none":"block";this.pageNum.css({display:t?"block":"none"});this.itemA.getTextField().css({display:i});this.itemB.getTextField().css({display:i})},setBorder:function(t){t?$(this.imageBac).css({border:"1px solid #444444"}):$(this.imageBac)[0].style.border="";this.itemA.hideBorder();this.itemB.hideBorder()},onItemMouseUp:function(t){isThumbDrag||(t=t.getPageIndex(),gotoPageFun(t),thumbnail&&thumbnail.setHighLight(t))},highLight:function(t){this.isMerge?1==t||t==totalPageCount?(this.itemA.highLight("#ffffff"),this.itemA.onMouseOverUp()):($(this.imageBac).css({border:"2px solid #ff8040"}),this.onMouseOverUp()):t==this.pageIndex?(this.itemA.highLight("#ffffff"),this.itemA.onMouseOverUp()):(this.itemB.highLight("#ffffff"),this.itemB.onMouseOverUp())},onMouseOver:function(){var i=this;$(this.imageBac).css({border:""});$(this.imageBac).bind(_event._enter,function(t){i.imageBac.css({border:"2px solid #0080ff"})});$(this.imageBac).bind(_event._leave,function(t){i.imageBac.css({border:""})})},onMouseOverUp:function(){var i=this;$(this.imageBac).bind(_event._enter,function(t){i.imageBac.css({border:"2px solid #0080ff"})});$(this.imageBac).bind(_event._leave,function(t){i.imageBac.css({border:"2px solid #ff8040"})})},clearMouseOver:function(){var i=this;$(this.imageBac).bind(_event._enter,function(t){i.imageBac.css({border:""})});$(this.imageBac).bind(_event._leave,function(t){i.imageBac.css({border:""})})},clearHighLight:function(){this.isMerge?1==this.pageIndex||this.pageIndex==totalPageCount?(this.itemA.onMouseOver(),this.itemB.onMouseOver()):(this.onMouseOver(),this.itemA.clearMouseOver(),this.itemB.clearMouseOver()):(this.itemA.onMouseOver(),this.itemB.onMouseOver(),this.clearMouseOver());this.itemA.clearHighLight();this.itemB.clearHighLight()}});var isThumbDrag=!1,SlideThumbnailBar=Class({create:function(t){this.width=windowWidth;this.height=135;this.contentHeight=120;this.mainColor="#888888";this.thumbArray=[];this.mouseDown=this.showing=!1;this.scrollBoxX=this.mouseDownX=-1;this.lastMoveX=-1+(windowWidth-this.width+20)/2;this.lastMoveTime=-1;this.mergeing=this.moveLeft=!1;this.pageIndex=this.currentCellIndex=1;this.createThumbItemFalg=!1;this.oldMode=this.currentMedo=0;this.initPanel(t)},initPanel:function(t){this.background=$("<div id='slide_thumbnail'></div>");this.contentBox=$("<div></div>");this.contentBac=$("<div></div>");this.scrollBox=$("<div></div>");this.openButton=$("<div id='slide_open_button'></div>");$(this.background).css({width:"100%",bottom:-this.height,position:"absolute",height:this.height,"z-index":100});$(this.contentBac).css({width:"100%",bottom:-this.height,position:"absolute",height:this.height,"z-index":100});this.scrollBox.css({position:"absolute",height:this.contentHeight});this.contentBox.css({width:"100%",position:"absolute",bottom:"1px",height:"100%",left:10,top:(this.height-this.contentHeight)/2,overflow:"hidden",opacity:"0.9"});this.openButton.css({width:"47px",height:"20px",background:bookConfig.thumbnailColor,"border-radius":"5px 5px 0px 0px",margin:"-20px auto",position:"relative","padding-top":"-16px",cursor:"pointer","text-align":"center"});this.openButton.append("<img style='margin-top:5px;' src='"+uiBaseURL+"arrow-up.png'/>");$(this.contentBac).css({background:bookConfig.thumbnailColor});isNaN(bookConfig.thumbnailAlpha)||""==bookConfig.thumbnailAlpha||null==bookConfig.thumbnailAlpha||void 0==bookConfig.thumbnailAlpha?isBelowIE9()||$(this.contentBac).css({opacity:.3}):isBelowIE9()||$(this.contentBac).css({opacity:bookConfig.thumbnailAlpha/100});$(t).append(this.contentBac);$(t).append(this.background);$(this.background).append(this.contentBox);$(this.contentBox).append(this.scrollBox);$(this.contentBac).append(this.openButton);this.openButton.bind(_event._end,this.showOrHide.bind(this))},getPageIndex:function(){return this.pageIndex},setPageIndex:function(t){this.pageIndex=t},getHeight:function(){return this.height},onResize:function(){this.width=windowWidth;var t=$(this.contentBox).width(),i=$(this.scrollBox).width();if(t>i)$(this.scrollBox).css({left:(t-i)/2+"px"});else{var e=$(this.scrollBox).offset().left;0<e&&(e=0);e<t-i&&(e=t-i);$(this.scrollBox).css({left:e+"px"})}},setPosition:function(t,i,e){void 0==e&&(e=["left","top"]);$(this.background).css(e[0],t+"px");$(this.background).css(e[1],i+"px");$(this.contentBac).css(e[0],t+"px");$(this.contentBac).css(e[1],i+"px")},addItem:function(){for(var t=0;t<=originTotalPageCount;){var i=0==t?new SlideThumbnailItem(this.scrollBox,1):new SlideThumbnailItem(this.scrollBox,t);i.getWidth();i.setPosition(this.thumbArray.length*(i.getWidth()+15)+5,2.5);this.thumbArray.push(i);t+=2}$(this.scrollBox).css({width:this.thumbArray.length*(i.getWidth()+15)+10+"px"})},resetItemPosition:function(){for(var t=0,i=this.thumbArray.length,e,o=0;o<i;o++){var s=this.thumbArray[o];e=s.getWidth()/2+20+(i-1)*(s.getWidth()+15);rightToLeft?0==o?(t=e-5-s.getWidth()/2,s.setPosition(t,2.5),t=t-15-s.getWidth()):(s.setPosition(t,2.5),t=t-s.getWidth()-15):0==o?(s.setPosition(5,2.5),t=s.getWidth()/2+20):(s.setPosition(t,2.5),t=t+s.getWidth()+15)}$(this.scrollBox).css({width:e})},mergeAll:function(){this.currentMedo=2;this.showing&&this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&(this.repositionDouble(),this.oldMode=2);this.mergeing=!0},fissionAll:function(){this.currentMedo=1;this.showing&&this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&(this.repositionSingle(),this.oldMode=1);this.mergeing=!1},repositionDouble:function(){for(var t=0;t<this.thumbArray.length;t++)this.thumbArray[t].merge();this.resetItemPosition();this.clearHighLight(this.getPageIndex());this.setHighLight(this.getPageIndex())},repositionSingle:function(){for(var t=0;t<this.thumbArray.length;t++)this.thumbArray[t].fission();this.resetItemPosition();this.clearHighLight(this.getPageIndex());this.setHighLight(this.getPageIndex())},getShowStatu:function(){return this.showing},setShowStatu:function(t){this.showing=t},showOrHide:function(){this.showing?this.hide():this.show()},show:function(){this.showing=!0;this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&1===this.currentMedo&&this.repositionSingle();this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&2===this.currentMedo&&this.repositionDouble();this.createThumbItemFalg||(this.createThumbItemFalg=!0,this.addItem(),1===this.currentMedo?this.repositionSingle():this.repositionDouble(),this.initEvent(),this.onResize(),this.setHighLight(this.getPageIndex()),this.fillNearByImages(0));this.oldMode=this.currentMedo;$(this.background).animate({bottom:0},300);$(this.contentBac).animate({bottom:0},300);this.openButton.empty().append("<img style='margin-top:5px;' src='"+uiBaseURL+"arrow-down.png'/>")},hide:function(){$(this.background).animate({bottom:-135},300);$(this.contentBac).animate({bottom:-135},300);this.openButton.empty().append("<img style='margin-top:5px;' src='"+uiBaseURL+"arrow-up.png'/>");this.showing=!1},getOccuHeight:function(){return 120},initEvent:function(){var e=this;this.background.bind(_event._down,function(t){return!1});$(this.contentBox).bind(_event._down,function(t){e.mouseDown=!0;isThumbDrag=!1;t=isTouch?t.originalEvent.touches:[t];e.mouseDownX=t[0].pageX;e.scrollBoxX=$(e.scrollBox).offset().left;return!1});$(this.contentBox).bind(_event._move,function(t){if(e.mouseDown){t=isTouch?t.originalEvent.touches:[t];var i=e.mouseDownX-t[0].pageX;20<Math.abs(i)&&(isThumbDrag=!0);$(e.contentBox).width()>$(e.scrollBox).width()||(i=e.scrollBoxX-i-(windowWidth-e.width+20)/2,0<i&&(i=0),i<$(e.contentBox).width()-$(e.scrollBox).width()&&(i=$(e.contentBox).width()-$(e.scrollBox).width()),$(e.scrollBox).css({left:i+"px"}),e.moveLeft=e.lastMoveX>t[0].pageX?!0:!1,e.lastMoveX=t[0].pageX,e.lastMoveTime=(new Date).getTime())}});$(this.contentBox).bind(_event._end,function(t){e.mouseDown=!1;100>(new Date).getTime()-e.lastMoveTime&&-1!=e.lastMoveTime&&(t=e.moveLeft?-30:30,e.tweener($(e.scrollBox).offset().left-(windowWidth-e.width+20)/2,t,10))});$(this.contentBox).bind("mouseleave",function(t){e.mouseDown=!1})},setHighLight:function(t){this.currentCellIndex=t;this.setPageIndex(t);if(this.createThumbItemFalg){var i=Math.floor(t/2);if(!(t>originTotalPageCount))if(this.thumbArray[i].highLight(t),this.clearHighLight(i),$(this.contentBox).width()>$(this.scrollBox).width())$(this.scrollBox).css({left:($(this.contentBox).width()-$(this.scrollBox).width())/2+"px"});else{t=$(this.scrollBox).offset().left-(windowWidth-self.width+20)/2;var e=$(this.contentBox).width(),o=rightToLeft?(this.thumbArray.length-(i-1))*(this.thumbArray[i].getWidth()+5)+5:(i-1)*(this.thumbArray[i].getWidth()+5)+5,i=this.thumbArray[i].getWidth();this.tweener(t,-(o+t-(e-i)/2)/6,6)}}},clearHighLight:function(t){if(this.createThumbItemFalg)for(var i=0;i<this.thumbArray.length;i++)i!=t&&this.thumbArray[i].clearHighLight()},tweener:function(t,i,e){var o=function(t,i){for(var e=i/2,o=(t-t/4)/e,s=Array(i),n=0;n<i;n++)s[n]=n<e?t-(e-n)*o:t+(n-e+1)*o;return s.reverse()}(i,e),s=t,n=0,h=this,a=window.setInterval(function(){s+=o[n];n++;n==e&&(s=t+i*e);0<s&&(s=0);s<$(h.contentBox).width()-$(h.scrollBox).width()&&(s=$(h.contentBox).width()-$(h.scrollBox).width());$(h.scrollBox).css({left:s+"px"});n>=e&&(window.clearInterval(a),h.fillNearByImages(s))},30)},fillNearByImages:function(t){if(this.createThumbItemFalg){var i=Math.ceil((this.background.width()-t)/65)+2;this.background.width()>this.scrollBox.width()?(t=0,i=originTotalPageCount+1):t=0==t?0:Math.ceil(-t/100);t=Math.max(Math.ceil(t/2),0);i=Math.min(i,originTotalPageCount+1);if(0<t)for(var e=0;e<t;e++)this.thumbArray[e]&&this.thumbArray[e].clearImage();for(e=t;e<Math.ceil(i/2);e++)t=rightToLeft?this.thumbArray.length-e-1:e,this.thumbArray[t]&&this.thumbArray[t].addImage()}}});Class("PCSlideToolbar",{create:function(t){this.parent=t;this.initToolBar();this.initGuidBar();this.initLogo()},initGuidBar:function(){this.leftBar=$("<div style='z-index:5;position:absolute;cursor:pointer;width:50px;height:50px;top:50%;opacity:0.7;margin-top:-25px;'></div>");this.rightBar=$("<div class='slideBar'></div>");this.leftBar.css({left:bookConfig.leftMargin,"background-image":"url("+uiBaseURL+"slide_prev_page.png)","background-repeat":"no-repeat","background-position":"center","background-size":"18px 18px","background-color":bookConfig.toolbarColor,"border-radius":"5px"});this.rightBar.css({right:bookConfig.rightMargin,"background-image":"url("+uiBaseURL+"slide_next_page.png)","background-repeat":"no-repeat","background-position":"center","background-size":"18px 18px","background-color":bookConfig.toolbarColor,"border-radius":"5px"});this.parent.append(this.leftBar);this.parent.append(this.rightBar);rightToLeft?(this.leftBar.bind(_event._end,nextPageFun),this.rightBar.bind(_event._end,previousPageFun),this.leftBar.attr({title:getLanguage("btnNextPage","Next")}),this.rightBar.attr({title:getLanguage("btnPrePage","Previous")})):(this.leftBar.bind(_event._end,previousPageFun),this.rightBar.bind(_event._end,nextPageFun),this.leftBar.attr({title:getLanguage("btnPrePage","Previous")}),this.rightBar.attr({title:getLanguage("btnNextPage","Next")}));this.rightBar.bind(_event._down,function(){this.rightBar.css({opacity:"0.5"})}.bind(this));this.rightBar.bind(_event._end+" "+_event._leave,function(){this.rightBar.css({opacity:"0.7"})}.bind(this));this.leftBar.bind(_event._down,function(){this.leftBar.css({opacity:"0.5"})}.bind(this));this.leftBar.bind(_event._end+" "+_event._leave,function(){this.leftBar.css({opacity:"0.7"})}.bind(this))},initToolBar:function(){this.toolbarBac=$("<div class='slideToolbar'></div>");this.fullscreenBtn=$("<img src='"+uiBaseURL+"slide-fullscreen.png'/>");this.homeBtn=$("<img src='"+uiBaseURL+"slide-home.png'/>");bookConfig.ShareButtonVisible&&(this.shareBtn=$("<img src='"+uiBaseURL+"slide-share.png'/>"));this.parent.append(this.toolbarBac);this.toolbarBac.append(this.fullscreenBtn);this.toolbarBac.append(this.homeBtn);this.toolbarBac.append(this.shareBtn);this.toolbarBac.css("background-color",bookConfig.toolbarColor);this.shareBtn&&this.shareBtn.bind(_event._end,function(){sharePanel.showOrHide();return!1});this.homeBtn.bind(_event._end,function(){homeButtonEvent();return!1});this.fullscreenBtn.bind(_event._end,function(){readAsFullscreen();return!1});$(document).bind(fullScreenApi.fullScreenEventName,function(){this.changeFullscreenIcon(fullScreenApi.isFullScreen())}.bind(this));this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Enter fullscreen"));this.homeBtn.attr("title",getLanguage("btnGoToHome","Home"));this.shareBtn&&this.shareBtn.attr("title",getLanguage("btnSocialShare","Share"));var t=this.toolbarBac.width();this.toolbarBac.css({"margin-left":-t/2+"px"})},changeFullscreenIcon:function(){fullScreenApi.isFullScreen()?(this.fullscreenBtn.attr("src",uiBaseURL+"slide-exitFullscreen.png"),this.fullscreenBtn.attr("title",getLanguage("btnExitFullscreen","Exit fullscreen"))):(this.fullscreenBtn.attr("src",uiBaseURL+"slide-fullscreen.png"),this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Enter fullscreen")))},hide:function(){},show:function(){},getLogoHeight:function(){return 0},getHeight:function(){return 0},getTopHeight:function(){return 0},getBottomHeight:function(){return 0},getWidth:function(){return 0},setButtonPosition:function(){},initLogo:function(){bookConfig.appLogoIcon&&""!=bookConfig.appLogoIcon&&(this.logo=$("<img src='"+bookConfig.appLogoIcon+"'/>"),this.logo.css({position:"absolute",left:bookConfig.logoPadding+"px",top:bookConfig.logoTop+"px",height:bookConfig.logoHeight+"px",cursor:"pointer","z-index":"3"}),this.logo.click(function(){var t=getLogoLink();window.open(t[0],t[1]);return!1}),this.parent.append(this.logo))}});var homeButtonEvent=function(){if("%first page%"==bookConfig.HomeURL.toLowerCase())firstPageFun();else if(void 0!=bookConfig.HomeURL&&""!=bookConfig.HomeURL){var t=bookConfig.HomeURL,t=getRealURL(t);window.open(t,bookConfig.OpenWindow)}};var PhoneThumbnailForm=Class({create:function(t){this.visible=!1;this.totalPageCount=bookConfig.totalPageCount;this.itemWidth=90;this.marginLeft=20;this.marginTop=10;this.itemBorderWidth=3;this.toolBarHeight=80;this.topBarHeight=40;this.itemBorderColor="#f76c6c";this.itemArray=[];this.taskList=new TaskList;this.itemHeightArray=this.getHeightArray();bookConfig.appLogoIcon||bookConfig.InstructionsButtonVisible||(this.toolBarHeight=40,this.topBarHeight=0);this.background=$("<div id='phoneThum' style='opacity:0;display:none;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;text-align:center;position:absolute;z-index:98;background:rgba(51,51,51,0.8);width:100%;left:0;'></div>");this.itemBox=$("<div style='text-align:left;display:inline-block;padding:0px 0px "+this.marginLeft+"px 0px;'></div>");this.background.css({top:this.topBarHeight+"px"});t.append(this.background);this.background.append(this.itemBox);this.initEvent();this.addItem();this.setHighLight(BookInfo.getCurrentPageIndex())},onResize:function(){this.countHorizatal=parseInt((windowWidth-this.marginLeft)/(this.itemWidth+this.marginLeft));this.countVertical=parseInt((windowHeight-this.toolBarHeight-this.marginTop)/(this.itemHeightArray.itemHeight+this.marginTop))+1;this.itemBox.css({width:this.countHorizatal*(this.itemWidth+this.marginLeft)+this.marginLeft});this.background.css({height:windowHeight-this.toolBarHeight});this.taskList.setLargeLength(this.countHorizatal*this.countVertical)},fillContent:function(){this.interval&&!this.interval.isRunning()?this.interval.start():this.interval=function(){this.performTask()}.interval(this,60)},performTask:function(){for(var t=this.getShownItems(),i=t[1],t=t[0];t<i;t++){var e=function(){thumbnail.fillImage(this.index)}.bind({index:t});e.id=t;this.taskList.unShiftTask(e)}},getShownItems:function(){var t=-this.itemBox.offset().top+40,t=parseInt(t/(this.itemHeightArray.itemHeight+this.marginTop)),t=this.countHorizatal*t,i=t+this.countHorizatal*this.countVertical,i=Math.min(i,this.totalPageCount),t=Math.max(0,t);return[t,i]},goToPosition:function(){this.getShownItems();var t=BookInfo.getCurrentPageIndex(),t=8+Math.ceil(t/3)*(this.itemHeightArray.itemHeight+this.marginTop)-windowHeight+this.toolBarHeight;this.background.scrollTop(t)},hide:function(){this.visible&&this.background.animate({opacity:"0"},300,"linear",function(){this.background.hide();this.visible=!1;this.interval&&this.interval.stop()}.bind(this))},getShowStatu:function(){return this.visible},show:function(){this.visible||(this.background.show(),this.fillContent(),this.goToPosition(),this.background.animate({opacity:"1"},300,"linear",function(){this.visible=!0}.bind(this)))},setHighLight:function(t){this.itemArray&&this.itemArray[t-1]&&this.itemArray[t-1].imgContainer&&this.itemArray[t-1].imgContainer.css({"border-color":this.itemBorderColor})},clearHighLight:function(){if(this.itemArray)for(var t=this.itemArray.length,i=0;i<t;i++)this.itemArray[i].imgContainer&&this.itemArray[i].imgContainer.css({"border-color":"transparent"})},fissionAll:function(){},mergeAll:function(){},showOrHide:function(){this.visible?this.hide():this.show()},addItem:function(){for(var t=0;t<this.totalPageCount;t++){var i=this.initItem(t);this.itemBox.append(i.item);this.itemArray.push(i)}},getHeightArray:function(){var t=(this.itemWidth-2*this.itemBorderWidth)*bookConfig.largePageHeight/bookConfig.largePageWidth;return{imageHeight:t,titleHeight:15,itemHeight:t+15+4*this.itemBorderWidth}},initItem:function(i){var t=$("<div style='display:inline-block;'></div>"),e=$("<p><span>"+getShownPageNumber(i+1)+"</span></p>"),o=$("<div></div>"),s=$("<img/>");t.css({cursor:"pointer",width:this.itemWidth,height:this.itemHeightArray.itemHeight,padding:this.marginTop+"px 0px 0px "+this.marginLeft+"px","text-align":"center"});o.css({width:this.itemWidth-2*this.itemBorderWidth,height:this.itemHeightArray.imageHeight,"border-style":"solid","border-width":this.itemBorderWidth+"px","border-radius":this.itemBorderWidth+"px","border-color":"transparent",position:"relative"});s.css({width:"100%",height:"100%","background-color":"#ffffff","background-image":"url("+uiBaseURL+"loading.gif)","background-repeat":"no-repeat","background-position":"center"});e.css({width:this.itemWidth-2*this.itemBorderWidth,height:this.itemHeightArray.titleHeight+"px","line-height":this.itemHeightArray.titleHeight+"px","vertical-align":"middle",color:Color(bookConfig.formFontColor).toString(),"font-family":"Arial","font-size":this.itemHeightArray.titleHeight+"px",padding:"0px",margin:"0px","border-style":"solid","border-width":this.itemBorderWidth+"px","border-color":"transparent"});var n=$("<div></div>");n.css({position:"absolute",top:0,left:0,width:"100%",height:"100%","z-index":5});o.append(s);bookConfig.isStopMouseMenu&&o.append(n);t.append(o);t.append(e);t.attr("id",i);t.bind(_event._end,function(t){t.stopPropagation()}.bind(this));t.bind("click",function(t){gotoPageFun(i+1);this.hide();t.stopPropagation()}.bind(this));return{item:t,imgContainer:o,img:s,title:e,fill:!1}},fillImage:function(i){if(this.itemArray&&this.itemArray[i]&&!this.itemArray[i].fill&&this.itemArray[i].img){var t=function(t){this.itemArray[i].img.attr("src",t)}.bind(this);this.LoadCount++;this.itemArray[i].fill=!0;fillImageAfterLoaded(i+1,"thumb",t)}},getHeight:function(){return 0},getTopHeight:function(){return 0},initEvent:function(){this.background.onTap(function(){this.hide()}.bind(this))}});var hexcase=0,b64pad="",chrsz=8;function compareov(){var t=Date.parse(new Date);return orgt(t)===vldt(t)}function orgt(t){return binl2hex(core_hx(str2binl(t),t.length*chrsz))}function vldt(t){return binl2hex(core_hx(str2binl(t),t.length*chrsz))}function core_hx(t,i){t[i>>5]|=128<<i%32;t[(i+64>>>9<<4)+14]=i;for(var e=1732584193,o=-271733879,s=-1732584194,n=271733878,h=0;h<t.length;h+=16)var a=e,r=o,l=s,g=n,e=hx_ff(e,o,s,n,t[h+0],7,-680876936),n=hx_ff(n,e,o,s,t[h+1],12,-389564586),s=hx_ff(s,n,e,o,t[h+2],17,606105819),o=hx_ff(o,s,n,e,t[h+3],22,-1044525330),e=hx_ff(e,o,s,n,t[h+4],7,-176418897),n=hx_ff(n,e,o,s,t[h+5],12,1200080426),s=hx_ff(s,n,e,o,t[h+6],17,-1473231341),o=hx_ff(o,s,n,e,t[h+7],22,-45705983),e=hx_ff(e,o,s,n,t[h+8],7,1770035416),n=hx_ff(n,e,o,s,t[h+9],12,-1958414417),s=hx_ff(s,n,e,o,t[h+10],17,-42063),o=hx_ff(o,s,n,e,t[h+11],22,-1990404162),e=hx_ff(e,o,s,n,t[h+12],7,1804603682),n=hx_ff(n,e,o,s,t[h+13],12,-40341101),s=hx_ff(s,n,e,o,t[h+14],17,-1502002290),o=hx_ff(o,s,n,e,t[h+15],22,1236535329),e=hx_gg(e,o,s,n,t[h+1],5,-165796510),n=hx_gg(n,e,o,s,t[h+6],9,-1069501632),s=hx_gg(s,n,e,o,t[h+11],14,643717713),o=hx_gg(o,s,n,e,t[h+0],20,-373897302),e=hx_gg(e,o,s,n,t[h+5],5,-701558691),n=hx_gg(n,e,o,s,t[h+10],9,38016083),s=hx_gg(s,n,e,o,t[h+15],14,-660478335),o=hx_gg(o,s,n,e,t[h+4],20,-405537848),e=hx_gg(e,o,s,n,t[h+9],5,568446438),n=hx_gg(n,e,o,s,t[h+14],9,-1019803690),s=hx_gg(s,n,e,o,t[h+3],14,-187363961),o=hx_gg(o,s,n,e,t[h+8],20,1163531501),e=hx_gg(e,o,s,n,t[h+13],5,-1444681467),n=hx_gg(n,e,o,s,t[h+2],9,-51403784),s=hx_gg(s,n,e,o,t[h+7],14,1735328473),o=hx_gg(o,s,n,e,t[h+12],20,-1926607734),e=hx_hh(e,o,s,n,t[h+5],4,-378558),n=hx_hh(n,e,o,s,t[h+8],11,-2022574463),s=hx_hh(s,n,e,o,t[h+11],16,1839030562),o=hx_hh(o,s,n,e,t[h+14],23,-35309556),e=hx_hh(e,o,s,n,t[h+1],4,-1530992060),n=hx_hh(n,e,o,s,t[h+4],11,1272893353),s=hx_hh(s,n,e,o,t[h+7],16,-155497632),o=hx_hh(o,s,n,e,t[h+10],23,-1094730640),e=hx_hh(e,o,s,n,t[h+13],4,681279174),n=hx_hh(n,e,o,s,t[h+0],11,-358537222),s=hx_hh(s,n,e,o,t[h+3],16,-722521979),o=hx_hh(o,s,n,e,t[h+6],23,76029189),e=hx_hh(e,o,s,n,t[h+9],4,-640364487),n=hx_hh(n,e,o,s,t[h+12],11,-421815835),s=hx_hh(s,n,e,o,t[h+15],16,530742520),o=hx_hh(o,s,n,e,t[h+2],23,-995338651),e=hx_ii(e,o,s,n,t[h+0],6,-198630844),n=hx_ii(n,e,o,s,t[h+7],10,1126891415),s=hx_ii(s,n,e,o,t[h+14],15,-1416354905),o=hx_ii(o,s,n,e,t[h+5],21,-57434055),e=hx_ii(e,o,s,n,t[h+12],6,1700485571),n=hx_ii(n,e,o,s,t[h+3],10,-1894986606),s=hx_ii(s,n,e,o,t[h+10],15,-1051523),o=hx_ii(o,s,n,e,t[h+1],21,-2054922799),e=hx_ii(e,o,s,n,t[h+8],6,1873313359),n=hx_ii(n,e,o,s,t[h+15],10,-30611744),s=hx_ii(s,n,e,o,t[h+6],15,-1560198380),o=hx_ii(o,s,n,e,t[h+13],21,1309151649),e=hx_ii(e,o,s,n,t[h+4],6,-145523070),n=hx_ii(n,e,o,s,t[h+11],10,-1120210379),s=hx_ii(s,n,e,o,t[h+2],15,718787259),o=hx_ii(o,s,n,e,t[h+9],21,-343485551),e=safe_add(e,a),o=safe_add(o,r),s=safe_add(s,l),n=safe_add(n,g);return[e,o,s,n]}function hx_cmn(t,i,e,o,s,n){return safe_add(bit_rol(safe_add(safe_add(i,t),safe_add(o,n)),s),e)}function hx_ff(t,i,e,o,s,n,h){return hx_cmn(i&e|~i&o,t,i,s,n,h)}function hx_gg(t,i,e,o,s,n,h){return hx_cmn(i&o|e&~o,t,i,s,n,h)}function hx_hh(t,i,e,o,s,n,h){return hx_cmn(i^e^o,t,i,s,n,h)}function hx_ii(t,i,e,o,s,n,h){return hx_cmn(e^(i|~o),t,i,s,n,h)}function safe_add(t,i){var e=(t&65535)+(i&65535);return(t>>16)+(i>>16)+(e>>16)<<16|e&65535}function bit_rol(t,i){return t<<i|t>>>32-i}function str2binl(t){for(var i=[],e=(1<<chrsz)-1,o=0;o<t.length*chrsz;o+=chrsz)i[o>>5]|=(t.charCodeAt(o/chrsz)&e)<<o%32;return i}function binl2hex(t){for(var i=hexcase?"0123456789ABCDEF":"0123456789abcdef",e="",o=0;o<4*t.length;o++)e+=i.charAt(t[o>>2]>>o%4*8+4&15)+i.charAt(t[o>>2]>>o%4*8&15);return e}var windowWidth=0,windowHeight=0,originTotalPageCount,totalPageCount,isTouch=isTouchDevice(),bookContainer,tmpContainer,slideBook,singleSlideBook,catalogBook,singleCatalogBook,flipBook,singlePageBook,flipShotButton,toolBar,printBody,helpBody,aboutBody,sharePanel,annotationPannel,videoGallery,photoGallery,languagePanel,frmSearch,frmShare,frmTableOfContent,bookmark,thumbnail,googleID,noteCookie,textRemark,signature,annotationShapes,QRcode,QRbutton,moreBar,pageIndexTextField,resizeBookAfterFlip=!1,auto_player,hardPageEnable,uiBaseURL,phoneBaseURL,soundBaseURL,browserType,bookType=0,rightToLeft=!1,isFlipPdf=!1;global.crBefore=DeString("d2b0aa5705413c96");global.crAfter=DeString("d35426b1c0d303cfa3012949ee");
//# sourceMappingURL=https://hdstatic.dongao.com/static/sourcemaps/book/ebook-pc/main.js.map
</script>

</body>
</html>
