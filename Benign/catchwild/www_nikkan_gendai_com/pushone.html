<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pushone.html</title>
</head>
<body>

<script>
/**
 * PUSH ONE JavaScript SDK
 * https://webpush.jp
 *
 * Copyright (c) 2024 Signity Inc.
 *
 * Licensed under the Apache License, Version 2.0
 * Full license and third-party notices: https://cdn.webpush.jp/js/LICENSES.txt
 */

!function(){"use strict";class n{set(n,t){"localStorage"in window&&null!==window.localStorage&&localStorage.setItem(n,t)}get(n){return"localStorage"in window&&null!==window.localStorage?localStorage.getItem(n):null}delete(n){"localStorage"in window&&null!==window.localStorage&&localStorage.removeItem(n)}keyExists(n){return"localStorage"in window&&null!==window.localStorage&&localStorage.hasOwnProperty(n)}setLocalStorage=(n,t)=>{"localStorage"in window&&null!==window.localStorage&&(t?localStorage.setItem(n,t):localStorage.removeItem(n))}}class t{SHOW_PREOPTIN="coins.preoptin.shown";CLICK_PREOPTIN_ACTION="coins.preoptin.click";CLICK_PREOPTIN_CLOSE="coins.preoptin.close";AUTO_BLOCK="coins.permission.auto_block";SHOW_PREOPTIN_WITH_DL="coins.preoptinwithdl.shown";CLICK_PREOPTIN_WITH_DL_ACTION="coins.preoptinwithdl.click";CLICK_PREOPTIN_WITH_DL_CLOSE="coins.preoptinwithdl.close";SHOW_UNBLOCK_WITH_DL="coins.unblockwithdl.shown";CLICK_UNBLOCK_WITH_DL_ACTION="coins.unblockwithdl.click";CLICK_UNBLOCK_WITH_DL_CLOSE="coins.unblockwithdl.close";NOTIFICATION_GRANTED_WITH_DL="coins.notificationwithdl.granted";SHOW_THANKS_OPTIN="coins.thanksoptin.shown";DOWNLOAD_THANKS_OPTIN="coins.thanksoptin.download";TOKEN_FETCHED="coins.btoken.fetched";publish(n,t){t=t||{};const e=new CustomEvent(n,t);window.dispatchEvent(e)}dispPromptRidSp=()=>{let n=0,t=0;document.addEventListener("touchend",(e=>{const i=Date.now();i-t<200?n++:n=1,10===n&&(window.coins2b.getcoinsid((n=>{window.prompt("",n)})),n=0),t=i}))}}const e=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=63&o|128):55296==(64512&o)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(o=65536+((1023&o)<<10)+(1023&n.charCodeAt(++i)),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=63&o|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=63&o|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<n.length;t+=3){const o=n[t],s=t+1<n.length,a=s?n[t+1]:0,r=t+2<n.length,c=r?n[t+2]:0,l=o>>2,d=(3&o)<<4|a>>4;let p=(15&a)<<2|c>>6,g=63&c;r||(g=64,s||(p=64)),i.push(e[l],e[d],e[p],e[g])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(e(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):function(n){const t=[];let e=0,i=0;for(;e<n.length;){const o=n[e++];if(o<128)t[i++]=String.fromCharCode(o);else if(o>191&&o<224){const s=n[e++];t[i++]=String.fromCharCode((31&o)<<6|63&s)}else if(o>239&&o<365){const s=((7&o)<<18|(63&n[e++])<<12|(63&n[e++])<<6|63&n[e++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=n[e++],a=n[e++];t[i++]=String.fromCharCode((15&o)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<n.length;){const s=e[n.charAt(t++)],a=t<n.length?e[n.charAt(t)]:0;++t;const r=t<n.length?e[n.charAt(t)]:64;++t;const c=t<n.length?e[n.charAt(t)]:64;if(++t,null==s||null==a||null==r||null==c)throw new o;const l=s<<2|a>>4;if(i.push(l),64!==r){const n=a<<4&240|r>>2;if(i.push(n),64!==c){const n=r<<6&192|c;i.push(n)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(n){return function(n){const t=e(n);return i.encodeByteArray(t,!0)}(n).replace(/\./g,"")};const a=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,r=()=>{if("undefined"==typeof document)return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=n&&function(n){try{return i.decodeString(n,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(n[1]);return t&&JSON.parse(t)},c=()=>{try{return a()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||r()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},l=()=>{var n;return null===(n=c())||void 0===n?void 0:n.config};class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((n,t)=>{this.resolve=n,this.reject=t}))}wrapCallback(n){return(t,e)=>{t?this.reject(t):this.resolve(e),"function"==typeof n&&(this.promise.catch((()=>{})),1===n.length?n(t):n(t,e))}}}function p(){try{return"object"==typeof indexedDB}catch(n){return!1}}function g(){return new Promise(((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var n;t((null===(n=o.error)||void 0===n?void 0:n.message)||"")}}catch(n){t(n)}}))}class u extends Error{constructor(n,t,e){super(t),this.code=n,this.customData=e,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,h.prototype.create)}}class h{constructor(n,t,e){this.service=n,this.serviceName=t,this.errors=e}create(n,...t){const e=t[0]||{},i=`${this.service}/${n}`,o=this.errors[n],s=o?function(n,t){return n.replace(f,((n,e)=>{const i=t[e];return null!=i?String(i):`<${e}?>`}))}(o,e):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new u(i,a,e)}}const f=/\{\$([^}]+)}/g;function b(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const o of e){if(!i.includes(o))return!1;const e=n[o],s=t[o];if(m(e)&&m(s)){if(!b(e,s))return!1}else if(e!==s)return!1}for(const n of i)if(!e.includes(n))return!1;return!0}function m(n){return null!==n&&"object"==typeof n}function v(n){return n&&n._delegate?n._delegate:n}class w{constructor(n,t,e){this.name=n,this.instanceFactory=t,this.type=e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}const y="[DEFAULT]";class k{constructor(n,t){this.name=n,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const t=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(t)){const n=new d;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const e=this.getOrInitializeService({instanceIdentifier:t});e&&n.resolve(e)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(n){var t;const e=this.normalizeInstanceIdentifier(null==n?void 0:n.identifier),i=null!==(t=null==n?void 0:n.optional)&&void 0!==t&&t;if(!this.isInitialized(e)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:e})}catch(n){if(i)return null;throw n}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,this.shouldAutoInitialize()){if(function(n){return"EAGER"===n.instantiationMode}(n))try{this.getOrInitializeService({instanceIdentifier:y})}catch(n){}for(const[n,t]of this.instancesDeferred.entries()){const e=this.normalizeInstanceIdentifier(n);try{const n=this.getOrInitializeService({instanceIdentifier:e});t.resolve(n)}catch(n){}}}}clearInstance(n=y){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter((n=>"INTERNAL"in n)).map((n=>n.INTERNAL.delete())),...n.filter((n=>"_delete"in n)).map((n=>n._delete()))])}isComponentSet(){return null!=this.component}isInitialized(n=y){return this.instances.has(n)}getOptions(n=y){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:t={}}=n,e=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(e))throw Error(`${this.name}(${e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:e,options:t});for(const[n,t]of this.instancesDeferred.entries()){e===this.normalizeInstanceIdentifier(n)&&t.resolve(i)}return i}onInit(n,t){var e;const i=this.normalizeInstanceIdentifier(t),o=null!==(e=this.onInitCallbacks.get(i))&&void 0!==e?e:new Set;o.add(n),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&n(s,i),()=>{o.delete(n)}}invokeOnInitCallbacks(n,t){const e=this.onInitCallbacks.get(t);if(e)for(const i of e)try{i(n,t)}catch(n){}}getOrInitializeService({instanceIdentifier:n,options:t={}}){let e=this.instances.get(n);if(!e&&this.component&&(e=this.component.instanceFactory(this.container,{instanceIdentifier:(i=n,i===y?void 0:i),options:t}),this.instances.set(n,e),this.instancesOptions.set(n,t),this.invokeOnInitCallbacks(e,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,e)}catch(n){}var i;return e||null}normalizeInstanceIdentifier(n=y){return this.component?this.component.multipleInstances?n:y:n}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class D{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const t=this.getProvider(n.name);if(t.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);t.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const t=new k(n,this);return this.providers.set(n,t),t}getProviders(){return Array.from(this.providers.values())}}var _;!function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"}(_||(_={}));const S={debug:_.DEBUG,verbose:_.VERBOSE,info:_.INFO,warn:_.WARN,error:_.ERROR,silent:_.SILENT},x=_.INFO,O={[_.DEBUG]:"log",[_.VERBOSE]:"log",[_.INFO]:"info",[_.WARN]:"warn",[_.ERROR]:"error"},C=(n,t,...e)=>{if(t<n.logLevel)return;const i=(new Date).toISOString(),o=O[t];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[o](`[${i}]  ${n.name}:`,...e)};const I=(n,t)=>t.some((t=>n instanceof t));let T,E;const L=new WeakMap,P=new WeakMap,A=new WeakMap,N=new WeakMap,$=new WeakMap;let B={get(n,t,e){if(n instanceof IDBTransaction){if("done"===t)return P.get(n);if("objectStoreNames"===t)return n.objectStoreNames||A.get(n);if("store"===t)return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return M(n[t])},set:(n,t,e)=>(n[t]=e,!0),has:(n,t)=>n instanceof IDBTransaction&&("done"===t||"store"===t)||t in n};function U(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(E||(E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...t){return n.apply(H(this),t),M(L.get(this))}:function(...t){return M(n.apply(H(this),t))}:function(t,...e){const i=n.call(H(this),t,...e);return A.set(i,t.sort?t.sort():[t]),M(i)}}function R(n){return"function"==typeof n?U(n):(n instanceof IDBTransaction&&function(n){if(P.has(n))return;const t=new Promise(((t,e)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{e(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)}));P.set(n,t)}(n),I(n,T||(T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,B):n)}function M(n){if(n instanceof IDBRequest)return function(n){const t=new Promise(((t,e)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(M(n.result)),i()},s=()=>{e(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&L.set(t,n)})).catch((()=>{})),$.set(t,n),t}(n);if(N.has(n))return N.get(n);const t=R(n);return t!==n&&(N.set(n,t),$.set(t,n)),t}const H=n=>$.get(n);function j(n,t,{blocked:e,upgrade:i,blocking:o,terminated:s}={}){const a=indexedDB.open(n,t),r=M(a);return i&&a.addEventListener("upgradeneeded",(n=>{i(M(a.result),n.oldVersion,n.newVersion,M(a.transaction),n)})),e&&a.addEventListener("blocked",(n=>e(n.oldVersion,n.newVersion,n))),r.then((n=>{s&&n.addEventListener("close",(()=>s())),o&&n.addEventListener("versionchange",(n=>o(n.oldVersion,n.newVersion,n)))})).catch((()=>{})),r}function W(n,{blocked:t}={}){const e=indexedDB.deleteDatabase(n);return t&&e.addEventListener("blocked",(n=>t(n.oldVersion,n))),M(e).then((()=>{}))}const F=["get","getKey","getAll","getAllKeys","count"],z=["put","add","delete","clear"],q=new Map;function K(n,t){if(!(n instanceof IDBDatabase)||t in n||"string"!=typeof t)return;if(q.get(t))return q.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,o=z.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!o&&!F.includes(e))return;const s=async function(n,...t){const s=this.transaction(n,o?"readwrite":"readonly");let a=s.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[e](...t),o&&s.done]))[0]};return q.set(t,s),s}B=(n=>({...n,get:(t,e,i)=>K(t,e)||n.get(t,e,i),has:(t,e)=>!!K(t,e)||n.has(t,e)}))(B);class V{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map((n=>{if(function(n){const t=n.getComponent();return"VERSION"===(null==t?void 0:t.type)}(n)){const t=n.getImmediate();return`${t.library}/${t.version}`}return null})).filter((n=>n)).join(" ")}}const G="@firebase/app",J="0.10.16",Y=new class{constructor(n){this.name=n,this._logLevel=x,this._logHandler=C,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in _))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel="string"==typeof n?S[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if("function"!=typeof n)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,_.DEBUG,...n),this._logHandler(this,_.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,_.VERBOSE,...n),this._logHandler(this,_.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,_.INFO,...n),this._logHandler(this,_.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,_.WARN,...n),this._logHandler(this,_.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,_.ERROR,...n),this._logHandler(this,_.ERROR,...n)}}("@firebase/app"),X="[DEFAULT]",Q={[G]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Z=new Map,nn=new Map,tn=new Map;function en(n,t){try{n.container.addComponent(t)}catch(e){Y.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function on(n){const t=n.name;if(tn.has(t))return Y.debug(`There were multiple attempts to register component ${t}.`),!1;tn.set(t,n);for(const t of Z.values())en(t,n);for(const t of nn.values())en(t,n);return!0}function sn(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}const an=new h("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class rn{constructor(n,t,e){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=e,this.container.addComponent(new w("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}function cn(n,t={}){let e=n;if("object"!=typeof t){t={name:t}}const i=Object.assign({name:X,automaticDataCollectionEnabled:!1},t),o=i.name;if("string"!=typeof o||!o)throw an.create("bad-app-name",{appName:String(o)});if(e||(e=l()),!e)throw an.create("no-options");const s=Z.get(o);if(s){if(b(e,s.options)&&b(i,s.config))return s;throw an.create("duplicate-app",{appName:o})}const a=new D(o);for(const n of tn.values())a.addComponent(n);const r=new rn(e,i,a);return Z.set(o,r),r}function ln(n,t,e){var i;let o=null!==(i=Q[n])&&void 0!==i?i:n;e&&(o+=`-${e}`);const s=o.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const n=[`Unable to register library "${o}" with version "${t}":`];return s&&n.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&a&&n.push("and"),a&&n.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Y.warn(n.join(" "))}on(new w(`${o}-version`,(()=>({library:o,version:t})),"VERSION"))}const dn="firebase-heartbeat-database",pn=1,gn="firebase-heartbeat-store";let un=null;function hn(){return un||(un=j(dn,pn,{upgrade:(n,t)=>{if(0===t)try{n.createObjectStore(gn)}catch(n){console.warn(n)}}}).catch((n=>{throw an.create("idb-open",{originalErrorMessage:n.message})}))),un}async function fn(n,t){try{const e=(await hn()).transaction(gn,"readwrite"),i=e.objectStore(gn);await i.put(t,bn(n)),await e.done}catch(n){if(n instanceof u)Y.warn(n.message);else{const t=an.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Y.warn(t.message)}}}function bn(n){return`${n.name}!${n.options.appId}`}class mn{constructor(n){this.container=n,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wn(t),this._heartbeatsCachePromise=this._storage.read().then((n=>(this._heartbeatsCache=n,n)))}async triggerHeartbeat(){var n,t;try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vn();if(null==(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((n=>n.date===i)))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((n=>{const t=new Date(n.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){Y.warn(n)}}async getHeartbeatsHeader(){var n;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=vn(),{heartbeatsToSend:e,unsentEntries:i}=function(n,t=1024){const e=[];let i=n.slice();for(const o of n){const n=e.find((n=>n.agent===o.agent));if(n){if(n.dates.push(o.date),yn(e)>t){n.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),yn(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}(this._heartbeatsCache.heartbeats),o=s(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Y.warn(n),""}}}function vn(){return(new Date).toISOString().substring(0,10)}class wn{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!p()&&g().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const n=await async function(n){try{const t=(await hn()).transaction(gn),e=await t.objectStore(gn).get(bn(n));return await t.done,e}catch(n){if(n instanceof u)Y.warn(n.message);else{const t=an.create("idb-get",{originalErrorMessage:null==n?void 0:n.message});Y.warn(t.message)}}}(this.app);return(null==n?void 0:n.heartbeats)?n:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(n){var t;if(await this._canUseIndexedDBPromise){const e=await this.read();return fn(this.app,{lastSentHeartbeatDate:null!==(t=n.lastSentHeartbeatDate)&&void 0!==t?t:e.lastSentHeartbeatDate,heartbeats:n.heartbeats})}}async add(n){var t;if(await this._canUseIndexedDBPromise){const e=await this.read();return fn(this.app,{lastSentHeartbeatDate:null!==(t=n.lastSentHeartbeatDate)&&void 0!==t?t:e.lastSentHeartbeatDate,heartbeats:[...e.heartbeats,...n.heartbeats]})}}}function yn(n){return s(JSON.stringify({version:2,heartbeats:n})).length}var kn;kn="",on(new w("platform-logger",(n=>new V(n)),"PRIVATE")),on(new w("heartbeat",(n=>new mn(n)),"PRIVATE")),ln(G,J,kn),ln(G,J,"esm2017"),ln("fire-js","");ln("firebase","11.0.2","app");const Dn="@firebase/installations",_n="0.6.11",Sn=1e4,xn=`w:${_n}`,On="FIS_v2",Cn="https://firebaseinstallations.googleapis.com/v1",In=36e5,Tn=new h("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function En(n){return n instanceof u&&n.code.includes("request-failed")}function Ln({projectId:n}){return`${Cn}/projects/${n}/installations`}function Pn(n){return{token:n.token,requestStatus:2,expiresIn:(t=n.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function An(n,t){const e=(await t.json()).error;return Tn.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})}function Nn({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function $n(n,{refreshToken:t}){const e=Nn(n);return e.append("Authorization",function(n){return`${On} ${n}`}(t)),e}async function Bn(n){const t=await n();return t.status>=500&&t.status<600?n():t}function Un(n){return new Promise((t=>{setTimeout(t,n)}))}const Rn=/^[cdef][\w-]{21}$/,Mn="";function Hn(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function(n){const t=(e=n,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_"));var e;return t.substr(0,22)}(n);return Rn.test(t)?t:Mn}catch(n){return Mn}}function jn(n){return`${n.appName}!${n.appId}`}const Wn=new Map;function Fn(n,t){const e=jn(n);zn(e,t),function(n,t){const e=function(){!qn&&"BroadcastChannel"in self&&(qn=new BroadcastChannel("[Firebase] FID Change"),qn.onmessage=n=>{zn(n.data.key,n.data.fid)});return qn}();e&&e.postMessage({key:n,fid:t});0===Wn.size&&qn&&(qn.close(),qn=null)}(e,t)}function zn(n,t){const e=Wn.get(n);if(e)for(const n of e)n(t)}let qn=null;const Kn="firebase-installations-database",Vn=1,Gn="firebase-installations-store";let Jn=null;function Yn(){return Jn||(Jn=j(Kn,Vn,{upgrade:(n,t)=>{if(0===t)n.createObjectStore(Gn)}})),Jn}async function Xn(n,t){const e=jn(n),i=(await Yn()).transaction(Gn,"readwrite"),o=i.objectStore(Gn),s=await o.get(e);return await o.put(t,e),await i.done,s&&s.fid===t.fid||Fn(n,t.fid),t}async function Qn(n){const t=jn(n),e=(await Yn()).transaction(Gn,"readwrite");await e.objectStore(Gn).delete(t),await e.done}async function Zn(n,t){const e=jn(n),i=(await Yn()).transaction(Gn,"readwrite"),o=i.objectStore(Gn),s=await o.get(e),a=t(s);return void 0===a?await o.delete(e):await o.put(a,e),await i.done,!a||s&&s.fid===a.fid||Fn(n,a.fid),a}async function nt(n){let t;const e=await Zn(n.appConfig,(e=>{const i=function(n){const t=n||{fid:Hn(),registrationStatus:0};return it(t)}(e),o=function(n,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Tn.create("app-offline"))}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(n,t){try{const e=await async function({appConfig:n,heartbeatServiceProvider:t},{fid:e}){const i=Ln(n),o=Nn(n),s=t.getImmediate({optional:!0});if(s){const n=await s.getHeartbeatsHeader();n&&o.append("x-firebase-client",n)}const a={fid:e,authVersion:On,appId:n.appId,sdkVersion:xn},r={method:"POST",headers:o,body:JSON.stringify(a)},c=await Bn((()=>fetch(i,r)));if(c.ok){const n=await c.json();return{fid:n.fid||e,registrationStatus:2,refreshToken:n.refreshToken,authToken:Pn(n.authToken)}}throw await An("Create Installation",c)}(n,t);return Xn(n.appConfig,e)}catch(e){throw En(e)&&409===e.customData.serverCode?await Qn(n.appConfig):await Xn(n.appConfig,{fid:t.fid,registrationStatus:0}),e}}(n,e);return{installationEntry:e,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:tt(n)}:{installationEntry:t}}(n,i);return t=o.registrationPromise,o.installationEntry}));return e.fid===Mn?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}async function tt(n){let t=await et(n.appConfig);for(;1===t.registrationStatus;)await Un(100),t=await et(n.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:e}=await nt(n);return e||t}return t}function et(n){return Zn(n,(n=>{if(!n)throw Tn.create("installation-not-found");return it(n)}))}function it(n){return 1===(t=n).registrationStatus&&t.registrationTime+Sn<Date.now()?{fid:n.fid,registrationStatus:0}:n;var t}async function ot({appConfig:n,heartbeatServiceProvider:t},e){const i=function(n,{fid:t}){return`${Ln(n)}/${t}/authTokens:generate`}(n,e),o=$n(n,e),s=t.getImmediate({optional:!0});if(s){const n=await s.getHeartbeatsHeader();n&&o.append("x-firebase-client",n)}const a={installation:{sdkVersion:xn,appId:n.appId}},r={method:"POST",headers:o,body:JSON.stringify(a)},c=await Bn((()=>fetch(i,r)));if(c.ok){return Pn(await c.json())}throw await An("Generate Auth Token",c)}async function st(n,t=!1){let e;const i=await Zn(n.appConfig,(i=>{if(!rt(i))throw Tn.create("not-registered");const o=i.authToken;if(!t&&function(n){return 2===n.requestStatus&&!function(n){const t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+In}(n)}(o))return i;if(1===o.requestStatus)return e=async function(n,t){let e=await at(n.appConfig);for(;1===e.authToken.requestStatus;)await Un(100),e=await at(n.appConfig);const i=e.authToken;return 0===i.requestStatus?st(n,t):i}(n,t),i;{if(!navigator.onLine)throw Tn.create("app-offline");const t=function(n){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}(i);return e=async function(n,t){try{const e=await ot(n,t),i=Object.assign(Object.assign({},t),{authToken:e});return await Xn(n.appConfig,i),e}catch(e){if(!En(e)||401!==e.customData.serverCode&&404!==e.customData.serverCode){const e=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Xn(n.appConfig,e)}else await Qn(n.appConfig);throw e}}(n,t),t}}));return e?await e:i.authToken}function at(n){return Zn(n,(n=>{if(!rt(n))throw Tn.create("not-registered");const t=n.authToken;return 1===(e=t).requestStatus&&e.requestTime+Sn<Date.now()?Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}):n;var e}))}function rt(n){return void 0!==n&&2===n.registrationStatus}async function ct(n,t=!1){const e=n;await async function(n){const{registrationPromise:t}=await nt(n);t&&await t}(e);return(await st(e,t)).token}function lt(n){return Tn.create("missing-app-config-values",{valueName:n})}const dt="installations",pt=n=>{const t=sn(n.getProvider("app").getImmediate(),dt).getImmediate();return{getId:()=>async function(n){const t=n,{installationEntry:e,registrationPromise:i}=await nt(t);return i?i.catch(console.error):st(t).catch(console.error),e.fid}(t),getToken:n=>ct(t,n)}};on(new w(dt,(n=>{const t=n.getProvider("app").getImmediate(),e=function(n){if(!n||!n.options)throw lt("App Configuration");if(!n.name)throw lt("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!n.options[e])throw lt(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(t);return{app:t,appConfig:e,heartbeatServiceProvider:sn(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),on(new w("installations-internal",pt,"PRIVATE")),ln(Dn,_n),ln(Dn,_n,"esm2017");const gt="/firebase-messaging-sw.js",ut="/firebase-cloud-messaging-push-scope",ht="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ft="https://fcmregistrations.googleapis.com/v1",bt="google.c.a.c_id",mt="google.c.a.c_l",vt="google.c.a.ts";var wt,yt;function kt(n){const t=new Uint8Array(n);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dt(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),i=new Uint8Array(e.length);for(let n=0;n<e.length;++n)i[n]=e.charCodeAt(n);return i}!function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(wt||(wt={})),function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"}(yt||(yt={}));const _t="fcm_token_details_db",St=5,xt="fcm_token_object_Store";const Ot="firebase-messaging-database",Ct=1,It="firebase-messaging-store";let Tt=null;function Et(){return Tt||(Tt=j(Ot,Ct,{upgrade:(n,t)=>{if(0===t)n.createObjectStore(It)}})),Tt}async function Lt(n){const t=At(n),e=await Et(),i=await e.transaction(It).objectStore(It).get(t);if(i)return i;{const t=await async function(n){if("databases"in indexedDB){const n=(await indexedDB.databases()).map((n=>n.name));if(!n.includes(_t))return null}let t=null;return(await j(_t,St,{upgrade:async(e,i,o,s)=>{var a;if(i<2)return;if(!e.objectStoreNames.contains(xt))return;const r=s.objectStore(xt),c=await r.index("fcmSenderId").get(n);if(await r.clear(),c)if(2===i){const n=c;if(!n.auth||!n.p256dh||!n.endpoint)return;t={token:n.fcmToken,createTime:null!==(a=n.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:kt(n.vapidKey)}}}else if(3===i){const n=c;t={token:n.fcmToken,createTime:n.createTime,subscriptionOptions:{auth:kt(n.auth),p256dh:kt(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:kt(n.vapidKey)}}}else if(4===i){const n=c;t={token:n.fcmToken,createTime:n.createTime,subscriptionOptions:{auth:kt(n.auth),p256dh:kt(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:kt(n.vapidKey)}}}}})).close(),await W(_t),await W("fcm_vapid_details_db"),await W("undefined"),function(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:t}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(n.appConfig.senderId);if(t)return await Pt(n,t),t}}async function Pt(n,t){const e=At(n),i=(await Et()).transaction(It,"readwrite");return await i.objectStore(It).put(t,e),await i.done,t}function At({appConfig:n}){return n.appId}const Nt=new h("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function $t({projectId:n}){return`${ft}/projects/${n}/registrations`}async function Bt({appConfig:n,installations:t}){const e=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${e}`})}function Ut({p256dh:n,auth:t,endpoint:e,vapidKey:i}){const o={web:{endpoint:e,auth:t,p256dh:n}};return i!==ht&&(o.web.applicationPubKey=i),o}const Rt=6048e5;async function Mt(n){const t=await async function(n,t){const e=await n.pushManager.getSubscription();if(e)return e;return n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dt(t)})}(n.swRegistration,n.vapidKey),e={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:t.endpoint,auth:kt(t.getKey("auth")),p256dh:kt(t.getKey("p256dh"))},i=await Lt(n.firebaseDependencies);if(i){if(function(n,t){const e=t.vapidKey===n.vapidKey,i=t.endpoint===n.endpoint,o=t.auth===n.auth,s=t.p256dh===n.p256dh;return e&&i&&o&&s}(i.subscriptionOptions,e))return Date.now()>=i.createTime+Rt?async function(n,t){try{const e=await async function(n,t){const e=await Bt(n),i=Ut(t.subscriptionOptions),o={method:"PATCH",headers:e,body:JSON.stringify(i)};let s;try{const e=await fetch(`${$t(n.appConfig)}/${t.token}`,o);s=await e.json()}catch(n){throw Nt.create("token-update-failed",{errorInfo:null==n?void 0:n.toString()})}if(s.error){const n=s.error.message;throw Nt.create("token-update-failed",{errorInfo:n})}if(!s.token)throw Nt.create("token-update-no-token");return s.token}(n.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:e,createTime:Date.now()});return await Pt(n.firebaseDependencies,i),e}catch(n){throw n}}(n,{token:i.token,createTime:Date.now(),subscriptionOptions:e}):i.token;try{await async function(n,t){const e={method:"DELETE",headers:await Bt(n)};try{const i=await fetch(`${$t(n.appConfig)}/${t}`,e),o=await i.json();if(o.error){const n=o.error.message;throw Nt.create("token-unsubscribe-failed",{errorInfo:n})}}catch(n){throw Nt.create("token-unsubscribe-failed",{errorInfo:null==n?void 0:n.toString()})}}(n.firebaseDependencies,i.token)}catch(n){console.warn(n)}return Ht(n.firebaseDependencies,e)}return Ht(n.firebaseDependencies,e)}async function Ht(n,t){const e=await async function(n,t){const e=await Bt(n),i=Ut(t),o={method:"POST",headers:e,body:JSON.stringify(i)};let s;try{const t=await fetch($t(n.appConfig),o);s=await t.json()}catch(n){throw Nt.create("token-subscribe-failed",{errorInfo:null==n?void 0:n.toString()})}if(s.error){const n=s.error.message;throw Nt.create("token-subscribe-failed",{errorInfo:n})}if(!s.token)throw Nt.create("token-subscribe-no-token");return s.token}(n,t),i={token:e,createTime:Date.now(),subscriptionOptions:t};return await Pt(n,i),i.token}function jt(n){const t={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function(n,t){if(!t.notification)return;n.notification={};const e=t.notification.title;e&&(n.notification.title=e);const i=t.notification.body;i&&(n.notification.body=i);const o=t.notification.image;o&&(n.notification.image=o);const s=t.notification.icon;s&&(n.notification.icon=s)}(t,n),function(n,t){if(!t.data)return;n.data=t.data}(t,n),function(n,t){var e,i,o,s,a;if(!t.fcmOptions&&!(null===(e=t.notification)||void 0===e?void 0:e.click_action))return;n.fcmOptions={};const r=null!==(o=null===(i=t.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==o?o:null===(s=t.notification)||void 0===s?void 0:s.click_action;r&&(n.fcmOptions.link=r);const c=null===(a=t.fcmOptions)||void 0===a?void 0:a.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}(t,n),t}function Wt(n){return Nt.create("missing-app-config-values",{valueName:n})}!function(n,t){const e=[];for(let i=0;i<n.length;i++)e.push(n.charAt(i)),i<t.length&&e.push(t.charAt(i));e.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ft{constructor(n,t,e){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(n){if(!n||!n.options)throw Wt("App Configuration Object");if(!n.name)throw Wt("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:e}=n;for(const n of t)if(!e[n])throw Wt(n);return{appName:n.name,projectId:e.projectId,apiKey:e.apiKey,appId:e.appId,senderId:e.messagingSenderId}}(n);this.firebaseDependencies={app:n,appConfig:i,installations:t,analyticsProvider:e}}_delete(){return Promise.resolve()}}async function zt(n,t){if(t||n.swRegistration||await async function(n){try{n.swRegistration=await navigator.serviceWorker.register(gt,{scope:ut}),n.swRegistration.update().catch((()=>{}))}catch(n){throw Nt.create("failed-service-worker-registration",{browserErrorMessage:null==n?void 0:n.message})}}(n),t||!n.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Nt.create("invalid-sw-registration");n.swRegistration=t}}async function qt(n,t){if(!navigator)throw Nt.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw Nt.create("permission-blocked");return await async function(n,t){t?n.vapidKey=t:n.vapidKey||(n.vapidKey=ht)}(n,null==t?void 0:t.vapidKey),await zt(n,null==t?void 0:t.serviceWorkerRegistration),Mt(n)}async function Kt(n,t,e){const i=function(n){switch(n){case yt.NOTIFICATION_CLICKED:return"notification_open";case yt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:e[bt],message_name:e[mt],message_time:e[vt],message_device_time:Math.floor(Date.now()/1e3)})}async function Vt(n,t){const e=t.data;if(!e.isFirebaseMessaging)return;n.onMessageHandler&&e.messageType===yt.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(jt(e)):n.onMessageHandler.next(jt(e)));const i=e.data;var o;"object"==typeof(o=i)&&o&&bt in o&&"1"===i["google.c.a.e"]&&await Kt(n,e.messageType,i)}const Gt="@firebase/messaging",Jt="0.12.14",Yt=n=>{const t=n.getProvider("messaging").getImmediate();return{getToken:n=>qt(t,n)}};async function Xt(){try{await g()}catch(n){return!1}return"undefined"!=typeof window&&p()&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Qt(n=function(n=X){const t=Z.get(n);if(!t&&n===X&&l())return cn();if(!t)throw an.create("no-app",{appName:n});return t}()){return Xt().then((n=>{if(!n)throw Nt.create("unsupported-browser")}),(n=>{throw Nt.create("indexed-db-unsupported")})),sn(v(n),"messaging").getImmediate()}on(new w("messaging",(n=>{const t=new Ft(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(n=>Vt(t,n))),t}),"PUBLIC")),on(new w("messaging-internal",Yt,"PRIVATE")),ln(Gt,Jt),ln(Gt,Jt,"esm2017");class Zt{config;constructor(n){this.config=n}async initialize(n){const t=Qt(cn(this.config)),e=await navigator.serviceWorker.register(n),i=await async function(n,t){return qt(n=v(n),t)}(t,{vapidKey:window.coins2bData.vapidconfig.vapid,serviceWorkerRegistration:e});return i}}class ne{async postRequest(n,t,e){try{const i=await fetch(n,{method:"POST",body:t,mode:"cors"});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);e(await i.text())}catch(n){}}}class te{storage;created=!1;constructor(){this.storage=new n}openDatabase(n,t){return new Promise(((e,i)=>{const o=indexedDB.open(n);o.onerror=()=>{i(new Error("Failed to open database"))},o.onsuccess=()=>{const n=o.result;e(n)},o.onupgradeneeded=n=>{const e=o.result;e.objectStoreNames.contains(t)||e.createObjectStore(t,{keyPath:"id"})}}))}saveFirebaseConfig=(n,t)=>{const e=JSON.parse(JSON.stringify(n));e.token=t;const i="coins_fcm_store";let o=indexedDB.open("coins_fcm");o.onupgradeneeded=n=>{const t=n.target.result;try{t.createObjectStore(i,{keyPath:"messagingSenderId"}),this.created=!0}catch(n){}},o.onerror=n=>{},o.onsuccess=n=>{const t=n.target.result;try{t.createObjectStore(i,{keyPath:"messagingSenderId"}),this.created=!0}catch(n){}var o=t.transaction(i,"readwrite"),s=o.objectStore(i);s.clear().onsuccess=n=>{s.put(e).onsuccess=()=>{},o.oncomplete=()=>{},t.close()}}};async _getcoinsid(){const n=window.document,t=t=>{let e=new Date("12/31/2037");n.cookie="btoken="+t+"; expires="+e.toUTCString()+"; path=/",this.storage.set("coins_btoken",t)},e=n.cookie.match(new RegExp("btoken=([^;]*);*"));if(e&&e[1]){const n=e[1];return t(n),n}if(this.storage.get("coins_btoken")){const n=this.storage.get("coins_btoken");if(null!==n)return t(n),n}try{const n="coins_fcm",e="coins_fcm_store",i=indexedDB.open(n);return new Promise(((n,o)=>{i.onsuccess=i=>{const s=i.target.result;if(s){var a=s.transaction(e,"readonly").objectStore(e).openCursor();a.onsuccess=e=>{const i=e.target.result;if(i){i.continue();let e=i.value.token;t(e),n(e)}},a.onerror=n=>{o()}}else o()}}))}catch(n){return Promise.reject()}}async _existsDatabase(n,t){return new Promise(((e,i)=>{var o=indexedDB.open(n),s=!0;o.onsuccess=i=>{var o=i.target.result;o&&!o.objectStoreNames.contains(t)&&(s=!1),o&&o.close(),s||this.created||indexedDB.deleteDatabase(n),e(s)},o.onupgradeneeded=function(){s=!1},o.onerror=i}))}}class ee{config;coins2b;storage;dialogStyle;event;CoinsOptinDialogOption=window.CoinsOptinDialogOption;CoinsBlockDialogOption=window.CoinsBlockDialogOption;CoinsOptinWithDlDialogOption=window.CoinsOptinWithDlDialogOption;constructor(n,t,e,i,o){this.config=n,this.coins2b=t,this.storage=e,this.event=i,this.dialogStyle=o}useUnblockingRequest(){return"on"===this.config.unblockingRequest}useOptinDialog(){return"on"===this.config.optinDialog}useBlockDialog(){return"on"===this.config.blockDialog}useIosDialog(){return"on"===this.config.iosDialog}useRequiredBrowser(){return"on"===this.config.requiredBrowser}isPreOptinRequiredBrowser(){return!this.useRequiredBrowser()||!!(this.config.edge||this.config.firefox||this.config.safari)}skipPreOptinDialog=()=>{if(""===this.config.medium)return!1;return new URL(location.href).searchParams.get("utm_medium")===this.config.medium};needToShowPreOptinDialog=()=>{if("1"==window.coins2bData.optinDisable)return!1;let n=this.storage.get("next_optin_check_time");const t=new Date;return n=n?new Date(Date.parse(n)):t,t>=n};needToShowUnblocklDialog=()=>{if("1"==window.coins2bData.optinDisable)return!1;let n=this.storage.get("next_block_check_time");const t=new Date;return n=n?new Date(Date.parse(n)):t,t>=n};needToShowPreOptinWithDlDialog=()=>{if("1"==window.coins2bData.optinDisable)return!1;let n=this.storage.get("next_optin_with_dl_check_time");const t=new Date;return n=n?new Date(Date.parse(n)):t,t>=n};needToShowUnblockWithDlDialog=()=>{if("1"==window.coins2bData.optinDisable)return!1;let n=this.storage.get("next_block_with_dl_check_time");const t=new Date;return n=n?new Date(Date.parse(n)):t,t>=n};needToShowThanksOptinDialog=()=>"1"!=window.coins2bData.optinDisable&&(this.isPermissionGranted()&&(this.storage.get("coins_waiting_preoptin_download")||this.storage.get("coins_waiting_unblock_download")));isOptinDialogScriptLoaded(){return void 0!==this.CoinsOptinDialogOption&&null!==this.CoinsOptinDialogOption}isCoinsBlockDialogOptionLoaded(){return void 0!==this.CoinsBlockDialogOption&&null!==this.CoinsBlockDialogOption}isOptinWithDlDialogScriptLoaded(){return void 0!==this.CoinsOptinWithDlDialogOption&&null!==this.CoinsOptinWithDlDialogOption}getOptinDialogStyleProps(){const n={vertical:"bottom",horizontal:"right",size:"small",design:1,buttonType:1,close:{type:"cross"}};let t;return this.isOptinDialogScriptLoaded()?this.CoinsOptinDialogOption.customStyle&&(t={...n,...this.CoinsOptinDialogOption.customStyle}):this.isOptinWithDlDialogScriptLoaded()&&this.CoinsOptinWithDlDialogOption.customStyle&&(t={...n,...this.CoinsOptinWithDlDialogOption.customStyle}),t}appendDialogStyle=()=>{let n=document.getElementById("coins-dialog-style");n||(n=this.dialogStyle.getDefaultOptinDialogStyle(),document.body.insertAdjacentHTML("beforeend",n))};appendUnblockProcessStyle=()=>{let n=document.getElementById("coins-unblock-process-style");n||(n=this.dialogStyle.getDefaultUnblockProcessStyle(),document.body.insertAdjacentHTML("beforeend",n))};appendCustomDialogStyle=n=>{let t=document.getElementById("coins-dialog-style");t||(t=this.dialogStyle.getCustomOptinDialogStyle(n),document.body.insertAdjacentHTML("beforeend",t))};appendCustomUnblockProcessStyle=n=>{let t=document.getElementById("coins-unblock-process-style");t||(t=this.dialogStyle.getCustomUnblockProcessStyle(n),document.body.insertAdjacentHTML("beforeend",t))};appendThanksOptinDialogStyle=()=>{let n=document.getElementById("coins-thanks-optin-dialog-style");n||(n=this.dialogStyle.getThanksOptinDialogStyle(),document.body.insertAdjacentHTML("beforeend",n))};optinPositiveAction=()=>{this.config.iphone||this.config.ipad?this.isPermissionDefault()&&Notification.requestPermission().then((n=>{if(this.storage.keyExists("internalPermission")||this.storage.set("internalPermission","first"),"granted"==n)this.storage.delete("internalPermission"),this.storage.set("internalPermissionGranted","true"),this.coins2b._newRequestPermission();else{const n=this.storage.get("internalPermission");"first"==n?this.storage.set("internalPermission","default"):"default"==n&&this.storage.set("internalPermission","denied")}})):this.coins2b._newRequestPermission(),this.hideOptinDialog(),this.event.publish(this.event.CLICK_PREOPTIN_ACTION,null)};optinNegativeAction=()=>{this.saveCheckDate(),this.hideOptinDialog(),this.event.publish(this.event.CLICK_PREOPTIN_CLOSE,null)};optinWithDlPositiveAction=()=>{this.config.iphone||this.config.ipad?this.isPermissionDefault()&&Notification.requestPermission().then((n=>{if(this.storage.keyExists("internalPermission")||this.storage.set("internalPermission","first"),"granted"==n)this.storage.delete("internalPermission"),this.storage.set("internalPermissionGranted","true"),this.coins2b._newRequestPermission();else{const n=this.storage.get("internalPermission");"first"==n?this.storage.set("internalPermission","default"):"default"==n&&this.storage.set("internalPermission","denied")}})):this.coins2b._newRequestPermission(),this.event.publish(this.event.CLICK_PREOPTIN_WITH_DL_ACTION,null),this.storage.set("coins_waiting_preoptin_download","true"),this.hideOptinDialog()};optinWithDlNegativeAction=()=>{this.event.publish(this.event.CLICK_PREOPTIN_WITH_DL_CLOSE,null),this.saveWithDlCheckDate(),this.hideOptinDialog()};thanksOptinPositiveAction=()=>{this.storage.delete("coins_waiting_preoptin_download"),this.storage.delete("coins_waiting_unblock_download"),this.event.publish(this.event.DOWNLOAD_THANKS_OPTIN,null)};thanksOptinNegativeAction=()=>{this.storage.delete("coins_waiting_preoptin_download"),this.storage.delete("coins_waiting_unblock_download"),this.hideThanksOptinDialog()};unblockWithDlNegativeAction=()=>{this.event.publish(this.event.CLICK_UNBLOCK_WITH_DL_CLOSE,null),this.storage.delete("coins_waiting_unblock_download"),this.saveBlockWithDlDate(),this.hideOptinDialog()};hideOptinDialog=function(){const n=document.getElementsByClassName("coins-optin-dialog");if(n.length>0){let t=n[0];t.style.animationName="CoinsHideAnimation",setTimeout((function(){t.remove()}),400)}};hideThanksOptinDialog=function(){const n=document.getElementsByClassName("coins-thanks-optin-dialog");if(n.length>0){let t=n[0];t.style.animationName="CoinsHideAnimation",setTimeout((function(){t.remove()}),400)}};saveCheckDate=()=>{var n=this.config.DEFAULT_OPTIN_CHECK_INTERVAL;this.isOptinDialogScriptLoaded()&&(n=this.CoinsOptinDialogOption.interval||this.config.DEFAULT_OPTIN_CHECK_INTERVAL);var t=new Date;t.setSeconds(t.getSeconds()+n),this.storage.set("next_optin_check_time",t.toString())};saveWithDlCheckDate=()=>{var n=this.config.DEFAULT_OPTIN_CHECK_INTERVAL;this.isOptinWithDlDialogScriptLoaded()&&(n=this.CoinsOptinWithDlDialogOption.interval);var t=new Date;t.setSeconds(t.getSeconds()+n),this.storage.set("next_optin_with_dl_check_time",t.toString())};saveBlockDate=()=>{var n=this.config.DEFAULT_BLOCK_CHECK_INTERVAL;this.isCoinsBlockDialogOptionLoaded()&&(n=this.CoinsBlockDialogOption.interval||this.config.DEFAULT_BLOCK_CHECK_INTERVAL);var t=new Date;t.setSeconds(t.getSeconds()+n),this.storage.set("next_block_check_time",t.toString())};saveBlockWithDlDate=()=>{var n=this.config.DEFAULT_BLOCK_CHECK_INTERVAL;this.isCoinsBlockDialogOptionLoaded()&&(n=this.CoinsBlockDialogOption.interval||this.config.DEFAULT_BLOCK_CHECK_INTERVAL);var t=new Date;t.setSeconds(t.getSeconds()+n),this.storage.set("next_block_with_dl_check_time",t.toString())};toggleUnblockProcess=function(){const n=document.querySelector(".coins-unblock-process");n&&n.classList.toggle("is-hidden")};toggleUnblockWithDlProcess=()=>{const n=document.querySelector(".coins-unblock-process");n&&(n.classList.toggle("is-hidden"),n.classList.contains("is-hidden")||this.event.publish(this.event.CLICK_UNBLOCK_WITH_DL_ACTION,null))};isPermissionGranted=function(){return"Notification"in window&&"granted"===Notification.permission};isPermissionDenied=function(){return"Notification"in window&&"denied"===Notification.permission};isPermissionDefault=function(){return"Notification"in window&&"default"===Notification.permission}}class ie{getDefaultOptinDialogStyle=()=>'\n<style>\n@keyframes CoinsShowAnimation {\n    0% {\n        opacity: 0;\n        transform: translateY(100px);\n    }\n    100% {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n@keyframes CoinsHideAnimation {\n    0% {\n        opacity: 1;\n        transform: translateY(0);\n    }\n    100% {\n        opacity: 0;\n        transform: translateY(100px);\n    }\n}\n\n.coins-close-button {\n    display: inline-block;\n    width: 24px;\n    height: 24px;\n    position: absolute;\n    cursor: pointer;\n    border-radius: 50%;\n    right: 4px;\n    top: 4px;\n}\n\n.coins-close-button span::before,\n.coins-close-button span::after {\n    display: block;\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 84%;\n    height: 10%;\n    margin: -8% 0 0 -42%;\n    background: gray;\n}\n\n.coins-close-button span::before {\n    transform: rotate(-45deg);\n}\n\n.coins-close-button span::after {\n    transform: rotate(45deg);\n}\n\n.coins-optin-dialog {\n    z-index: 9999;\n    position: fixed;\n    background-color: white;\n    width: 500px;\n    bottom: 10px;\n    right: 10px;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n    transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n    animation-name: CoinsShowAnimation;\n    animation-duration: 0.5s;\n}\n\n.coins-optin-dialog:hover {\n    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n@media screen and (max-width: 600px) {\n    .coins-optin-dialog {\n        width: 100%;\n        bottom: 0;\n        left: 0;\n    }\n}\n\n.coins-optin-dialog-icon {\n    display: inline-block;\n    vertical-align: top;\n}\n\n.coins-optin-dialog-text-box {\n    display: inline-block;\n    word-wrap: break-word;\n    vertical-align: top;\n    max-width: 70%;\n}\n\n.coins-optin-dialog-icon > img {\n    width: 84px;\n    height: 84px;\n}\n\n.coins-optin-dialog-text-box > span {\n    display: block;\n    margin-top: 10px;\n    margin-right: 10px;\n    margin-bottom: 10px;\n    font-size: medium;\n    color: gray;\n    width: 380px;\n}\n\n.coins-optin-dialog-button-box {\n    text-align:right;\n    display: inline-block;\n    min-width: 110%;\n    box-sizing: border-box;\n}\n\n@media screen and (max-width: 600px) {\n    .coins-optin-dialog-text-box > span {\n        width: auto;\n        font-size: small;\n        margin-bottom: 0px;\n        margin-top: 4px;\n    }\n\n    .coins-optin-dialog-button-box {\n        min-width: 70vw;\n    }\n}\n\n.coins-optin-dialog-button-box > button {\n    display: inline-block;\n    position: relative;\n    bottom: 0px;\n    border: none;\n    cursor: pointer;\n    outline: none;\n    appearance: none;\n}\n\n.coins-optin-dialog-button {\n    background-color: rgba(0, 0, 0, 0.05);\n    border-radius: 4px;\n    color: gray;\n    padding: 4px;\n    min-width: 80px;\n    min-height: 28px;\n    font-size: small;\n    margin-left: 10px;\n}\n\n.coins-optin-dialog-button:hover {\n    background-color: rgba(0, 0, 0, 0.1);\n}\n\n.coins-optin-dialog-text-link {\n    display: inline-block;\n    border-radius: 4px;\n    color: #0073cf;\n    padding: 4px;\n    min-width: 80px;\n    min-height: 28px;\n    font-size: small;\n    margin-top: 10px;\n    margin-left: 10px;\n}\n</style>';getDefaultUnblockProcessStyle=()=>'\n<style data-styled="coins-unblock-process-style">\n.coins-unblock-process-toggle {\n    background: #666;\n    width: 100px;\n    height: 10px;\n    margin: 20px auto;\n    cursor: pointer;\n}\n\n.coins-unblock-process {\n    background: #eee;\n    border: solid 1px #eee;\n    display: block;\n}\n\n.coins-unblock-process.is-hidden {\n    display: none;\n}\n\n.coins-close-button {\n    bottom: 56px;\n    top: auto;\n}\n\n.coins-unblock-process > ol {\n    color: #000;\n    padding-inline-start: 40px;\n    list-style: decimal;\n    margin-bottom: 20px;\n    font-family: system-ui, sans-serif;\n}\n\n.coins-unblock-process > ol > li {\n    font-size: smaller;\n    margin-bottom: 5px;\n    list-style-position: unset;\n    line-height: 1.5;\n}\n\n.coins-unblock-process > ol > li:nth-last-child(1) {\n    margin-bottom: 0;\n}\n\n#coins-unblock-process-hide-btn {\n    position: relative;\n    width: 100%;\n    overflow: visible;\n    display: block;\n    cursor: pointer;\n    padding: 10px 50% 30px;\n}\n\n#coins-unblock-process-hide-btn > svg {\n    width: 21px;\n    height: 4px;\n    position: absolute;\n    overflow: visible;\n    transform-origin: center;\n}\n\n#coins-unblock-process-hide-btn > svg:nth-child(1) {\n    transform: translate(-299.661px, -407.161px) matrix(1,0,0,1,298,414) rotate(45deg);\n}\n\n#coins-unblock-process-hide-btn > svg:nth-child(2) {\n    transform: translate(-299.661px, -407.161px) matrix(1,0,0,1,310,414) rotate(135deg);\n}\n\n#coins-unblock-process-hide-btn > svg > rect {\n    fill: rgba(102,102,102,1);\n}\n</style>';getCustomOptinDialogStyle=n=>`\n<style>\n${"top"===n.vertical?this.getTopAnimation():this.getBottomAnimation()}\n${this.getCoinsOptinDialogStyle(n)}\n${this.getCloseCrossStyle(n)}\n${this.getCloseButtonStyle(n)}\n${this.getButtonBoxStyle(n)}\n${this.getButtonStyle(n)}\n${this.getCommonPreoptinStyle()}\n${this.getMediaScreenStyle(n)}\n</style>`;getCustomUnblockProcessStyle=n=>`\n<style data-styled="coins-unblock-process-style">\n${this.getCommonUnblockProcessStyle()}\n${this.getCoinsUnblockProcessStyle(n)}\n${this.getUnblockProcessListStyle(n)}\n${this.getRectangleStyle(n)}\n</style>`;getThanksOptinDialogStyle=()=>`\n<style>\n${this.getBottomAnimation()}\n\n.coins-thanks-optin-dialog {\n  z-index: 9999;\n  position: fixed;\n  background-color: white;\n  width: 480px;\n  bottom: 10px;\n  right: 10px;\n  box-shadow: 0 7px 14px rgba(0, 0, 0, 0.25), 0 5px 5px rgba(0, 0, 0, 0.22);\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n  animation-name: CoinsShowAnimation;\n  animation-duration: 0.5s;\n}\n\n@media screen and (max-width: 480px) {\n  .coins-thanks-optin-dialog {\n    width: 100%;\n    bottom: 0;\n    left: 0;\n  }\n}\n\n.coins-thanks-optin-dialog > a {\n  text-decoration: none;\n}\n\n.coins-thanks-optin-dialog-container:hover {\n  opacity: 0.8;\n}\n\n.coins-thanks-optin-dialog-headers {\n  padding: 20px 15px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: start;\n}\n\n.coins-thanks-optin-dialog-icon {\n  display: inline-block;\n  vertical-align: top;\n  width: 84px;\n  height: 84px;\n}\n\n.coins-thanks-optin-dialog-icon > img {\n  width: 100%;\n  height: 100%;\n}\n\n.coins-thanks-optin-dialog-text-box {\n  display: inline-block;\n  word-wrap: break-word;\n  vertical-align: top;\n}\n\n.coins-thanks-optin-dialog-title {\n  display: inline-block;\n  margin-top: 10px;\n  margin-right: 10px;\n  margin-bottom: 5px;\n  font-size: medium;\n  color: gray;\n  word-break: break-all;\n  width: 365px;\n}\n\n.coins-thanks-optin-dialog-message {\n  display: block;\n  margin-right: 10px;\n  font-size: small;\n  color: gray;\n  word-break: break-all;\n  width: 380px;\n}\n\n.coins-thanks-optin-dialog-image {\n  max-width: 480px;\n  max-height: 240px;\n  text-align: center;\n  overflow: hidden;\n}\n\n.coins-thanks-optin-dialog-image > img {\n  max-width: 100%;\n  height: auto;\n  width: auto;\n  display: block;\n  margin: 0 auto;\n}\n\n@media screen and (max-width: 480px) {\n  .coins-thanks-optin-dialog-text-box {\n    display: inline-block;\n    word-wrap: break-word;\n    vertical-align: top;\n  }\n\n  .coins-thanks-optin-dialog-title {\n    width: auto;\n    font-size: medium;\n    margin-bottom: 0px;\n    margin-top: 5px;\n  }\n\n  .coins-thanks-optin-dialog-message {\n    width: auto;\n    font-size: small;\n    margin-bottom: 0px;\n    margin-top: 4px;\n  }\n}\n\n.coins-thanks-optin-dialog-button-box {\n  margin: 10px;\n}\n\n.coins-thanks-optin-dialog-button {\n  display: inline-block;\n  position: relative;\n  bottom: 0px;\n  border: none;\n  cursor: pointer;\n  outline: none;\n  appearance: none;\n  background-color: rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n  color: rgba(0, 0, 0, 0.5);\n  padding: 4px;\n  width: 100%;\n  min-height: 28px;\n  font-size: medium;\n}\n\n.coins-thanks-optin-dialog-button:hover {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n</style>`;getTopAnimation=()=>"\n@keyframes CoinsShowAnimation {\n  0% {\n    opacity: 0;\n    transform: translateY(-100px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes CoinsHideAnimation {\n  0% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  100% {\n    opacity: 0;\n    transform: translateY(-100px);\n  }\n}";getBottomAnimation=()=>"\n@keyframes CoinsShowAnimation {\n  0% {\n    opacity: 0;\n    transform: translateY(100px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes CoinsHideAnimation {\n  0% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  100% {\n    opacity: 0;\n    transform: translateY(100px);\n  }\n}";getCommonPreoptinStyle=()=>'\n.coins-close-button span::before,\n.coins-close-button span::after {\n  display: block;\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 84%;\n  height: 10%;\n  margin: -8% 0 0 -42%;\n  background: gray;\n}\n\n.coins-close-button span::before {\n  transform: rotate(-45deg);\n}\n\n.coins-close-button span::after {\n  transform: rotate(45deg);\n}\n\n.coins-optin-dialog:hover {\n  box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n}\n\n.coins-optin-dialog-icon {\n  display: inline-block;\n  vertical-align: top;\n}\n\n.coins-optin-dialog-icon > img {\n  vertical-align: top !important; \n  width: 84px;\n  height: 84px;\n}\n\n.coins-optin-dialog-text-box {\n  display: inline-block;\n  word-wrap: break-word;\n  vertical-align: top;\n  max-width: 70%;\n}\n\n.coins-optin-dialog-text-box > span {\n  display: block;\n  margin-top: 10px;\n  margin-right: 10px;\n  margin-bottom: 10px;\n  font-size: medium;\n  color: gray;\n  width: 380px;\n}';getMediaScreenStyle=n=>{const t={border:2===n.design?"none":null,"border-bottom":2===n.design&&"top"===n.vertical?"solid 2px #000000":3===n.design&&"bottom"===n.vertical?0:null,"border-top":2===n.design&&"bottom"===n.vertical?"solid 2px #000000":3===n.design&&"top"===n.vertical?0:null,"border-radius":3===n.design&&"top"===n.vertical?"0 0 16px 16px":3===n.design&&"bottom"===n.vertical?"16px 16px 0 0":null};let e="";Object.entries({...t}).filter((n=>null!==n[1])).forEach((n=>{e+=`  ${n[0]}: ${n[1]};\n`}));const i="large"===n.size?"medium":"small";return`\n@media screen and (max-width: 600px) {\n  .coins-optin-dialog {\n    width: 100%;\n    left: 0 !important;\n    right: 0 !important;\n    ${n.vertical}: 0 !important;\n    ${e}}\n  .coins-optin-dialog-text-box > span {\n    width: auto;\n    margin-bottom: 0px;\n    margin-top: 4px;\n    font-size: ${i};\n  }\n}`};getCoinsOptinDialogStyle=n=>{const t={top:"top"===n.vertical?"10px":null,bottom:"bottom"===n.vertical?"10px":null,left:"left"===n.horizontal?"10px":"center"===n.horizontal?"0px":null,right:"right"===n.horizontal?"10px":"center"===n.horizontal?"0px":null,margin:"center"===n.horizontal?"0 auto":null,padding:"large"===n.size?"18px":null,border:1!==n.design?"solid 2px #000000":null,"border-radius":3===n.design?"16px":null};let e="";return Object.entries({...t}).filter((n=>null!==n[1])).forEach((n=>{e+=`  ${n[0]}: ${n[1]};\n`})),`\n.coins-optin-dialog {\n  z-index: 9999;\n  position: fixed;\n  background-color: white;\n  width: 500px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  box-sizing: border-box;\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n  overflow: hidden;\n  animation-name: CoinsShowAnimation;\n  animation-duration: 0.5s;\n  ${e}}`};getCloseCrossStyle=n=>`\n.coins-close-button {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  cursor: pointer;\n  border-radius: 50%;\n  right: 4px;\n  display: ${"button"===n.close.type?"none":"inline-block"};\n  top: ${"top"===n.vertical?"4px":"auto"};\n  bottom: ${"bottom"===n.vertical&&"large"===n.size?"140px":"bottom"===n.vertical&&"small"===n.size?"56px":"auto"};\n}`;getButtonBoxStyle=n=>{const t={position:"small"===n.size?"absolute":"relative",top:"small"===n.size&&"top"===n.vertical?"48px":null,bottom:"small"===n.size&&"bottom"===n.vertical?"8px":null,right:"small"===n.size?"24px":null,height:"small"===n.size?"28px":"48px"};let e="";return Object.entries({...t}).filter((n=>null!==n[1])).forEach((n=>{e+=`  ${n[0]}: ${n[1]};\n`})),`\n.coins-optin-dialog-button-box {\n  display: flex;\n  justify-content: flex-end;\n  gap: 16px;\n${e}}`};getCloseButtonStyle=n=>{const t="button"===n.close.type?"inline-block":"none",e=1===n.buttonType?"1px solid rgba(0, 0, 0, 0.25)":2===n.buttonType?"1px solid #0d6dfc;":"1px solid #1a8754",i=1===n.buttonType?"rgba(0, 0, 0, 0.05)":2===n.buttonType?"#0d6dfc12":"#1a875412";return`\n.coins-optin-dialog-close-button {\n  background-color: rgba(0, 0, 0, 0);\n  cursor: pointer;\n  outline: none;\n  appearance: none;\n  border-radius: 4px;\n  min-width: 80px;\n  transition: background-color 0.2s ease;\n  display: ${t};\n  border: ${e};\n  color: ${1===n.buttonType?"rgba(0, 0, 0, 0.4)":2===n.buttonType?"#0d6dfc":"#1a8754"};\n  padding: ${"large"===n.size?"12px 24px":"4px 12px"};\n  font-size: ${"large"===n.size?"medium":"small"};\n}\n\n.coins-optin-dialog-close-button:hover {\n  background-color: ${i};\n}`};getButtonStyle=n=>{const t=1===n.buttonType?"rgba(0, 0, 0, 0.05)":2===n.buttonType?"#0d6dfc":"#1a8754",e=1===n.buttonType?"rgba(0, 0, 0, 0.1)":2===n.buttonType?"#0a57c9":"#146b41";return`\n.coins-optin-dialog-button {\n  border: none;\n  cursor: pointer;\n  outline: none;\n  appearance: none;\n  border-radius: 4px;\n  min-width: 80px;\n  transition: background-color 0.2s ease;\n  background-color: ${t};\n  color: ${1===n.buttonType?"gray":"#ffffff"};\n  padding: ${"large"===n.size?"12px 24px":"4px 12px"};\n  font-size: ${"large"===n.size?"medium":"small"};\n}\n\n.coins-optin-dialog-button:hover {\n  background-color: ${e};\n}`};getCommonUnblockProcessStyle=()=>"\n.coins-unblock-process.is-hidden {\n  display: none;\n}\n\n.coins-unblock-process > ol {\n  color: #000;\n  padding-inline-start: 40px;\n  list-style: decimal;\n  margin-bottom: 20px;\n  font-family: system-ui, sans-serif;\n}\n\n.coins-unblock-process > ol > li:nth-last-child(1) {\n  margin-bottom: 0;\n}\n\n#coins-unblock-process-hide-btn {\n  position: relative;\n  width: auto;\n  overflow: visible;\n  display: block;\n  cursor: pointer;\n  padding: 10px 50% 30px;\n}\n\n#coins-unblock-process-hide-btn > svg {\n  width: 21px;\n  height: 4px;\n  position: absolute;\n  overflow: visible;\n  transform-origin: center;\n}\n\n#coins-unblock-process-hide-btn > svg > rect {\n  fill: rgba(102,102,102,1);\n}";getCoinsUnblockProcessStyle=n=>{const t={width:"large"===n.size?"100%":null,"border-right":"large"===n.size?null:"solid 1px #eee","border-left":"large"===n.size?null:"solid 1px #eee",padding:"large"===n.size?"0 18px":null,position:"large"===n.size?"relative":null,right:"large"===n.size?"18px":null,top:"top"===n.vertical?"18px":null,bottom:"bottom"===n.vertical?"18px":null};let e="";return Object.entries({...t}).filter((n=>null!==n[1])).forEach((n=>{e+=`  ${n[0]}: ${n[1]};\n`})),`\n.coins-unblock-process {\n  background: #eee;\n  border-top: solid 1px #eee;\n  border-bottom: solid 1px #eee;\n${e}}`};getUnblockProcessListStyle=n=>`\n.coins-unblock-process > ol > li {\n  font-size: ${"large"===n.size?"medium":"smaller"};\n  margin-bottom: 5px;\n  list-style-position: unset;\n  line-height: 1.5;\n}`;getRectangleStyle=n=>`\n#coins-unblock-process-hide-btn > svg:nth-child(1) {\n  transform: translate(-299.661px, -407.161px) matrix(1,0,0,1,298,414) rotate(${"top"===n.vertical?"-45deg":"45deg"});\n}\n\n#coins-unblock-process-hide-btn > svg:nth-child(2) {\n  transform: translate(-299.661px, -407.161px) matrix(1,0,0,1,310,414) rotate(${"top"===n.vertical?"45deg":"-45deg"});\n}`}class oe{config;constructor(n){this.config=n}getExplanation=()=>{let n;return n=this.config.firefox?this.config.android?this.getAndroidFirefoxProcess():this.getPcFirefoxProcess():this.config.chrome?this.config.android?this.getAndroidChromeProcess():this.getPcChromeProcess():this.config.edge?this.getEdgeProcess():this.config.safari?this.getSafariProcess():this.getUnknownProcess(),`\n<ol>\n  ${n}\n</ol>`};getPcChromeProcess=()=>'\n<li>\n  <span\n    style="\n      display: inline-block;\n      width: 25px;\n      height: 17px;\n      vertical-align: middle;\n      position: relative;\n      bottom: 1px;\n    "\n    ><svg\n      version="1.0"\n      xmlns="http://www.w3.org/2000/svg"\n      width="200%"\n      height="200%"\n      viewBox="0 0 288.000000 288.000000"\n      preserveAspectRatio="xMidYMid meet"\n      style="\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n      "\n    >\n      <g\n        transform="translate(0.000000,288.000000) scale(0.100000,-0.100000)"\n        fill="#000000"\n        stroke="none"\n      >\n        <path\n          d="M923 2082 c-251 -90 -272 -432 -35 -549 81 -40 183 -40 264 0 107 53\n  163 144 163 267 0 85 -21 142 -74 203 -72 81 -213 117 -318 79z m151 -177 c82\n  -39 86 -161 7 -208 -75 -44 -181 13 -181 98 0 93 90 150 174 110z"\n        />\n        <path\n          d="M1440 1800 l0 -90 330 0 330 0 0 90 0 90 -330 0 -330 0 0 -90z"\n        />\n        <path\n          d="M1763 1362 c-251 -90 -272 -432 -35 -549 47 -23 70 -28 132 -28 174\n  0 295 121 295 295 0 85 -21 142 -74 203 -72 81 -213 117 -318 79z m151 -177\n  c82 -39 86 -161 7 -208 -75 -44 -181 13 -181 98 0 93 90 150 174 110z"\n        />\n        <path d="M780 1080 l0 -90 330 0 330 0 0 90 0 90 -330 0 -330 0 0 -90z" />\n      </g></svg></span\n  >\n</li>\n<li></li>';getAndroidChromeProcess=()=>'\n<li>\n  <span\n    style="\n      display: inline-block;\n      width: 25px;\n      height: 17px;\n      vertical-align: middle;\n      position: relative;\n      bottom: 1px;\n    "\n    ><svg\n      version="1.0"\n      xmlns="http://www.w3.org/2000/svg"\n      width="200%"\n      height="200%"\n      viewBox="0 0 288.000000 288.000000"\n      preserveAspectRatio="xMidYMid meet"\n      style="\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n      "\n    >\n      <g\n        transform="translate(0.000000,288.000000) scale(0.100000,-0.100000)"\n        fill="#000000"\n        stroke="none"\n      >\n        <path\n          d="M923 2082 c-251 -90 -272 -432 -35 -549 81 -40 183 -40 264 0 107 53\n 163 144 163 267 0 85 -21 142 -74 203 -72 81 -213 117 -318 79z m151 -177 c82\n -39 86 -161 7 -208 -75 -44 -181 13 -181 98 0 93 90 150 174 110z"\n        />\n        <path\n          d="M1440 1800 l0 -90 330 0 330 0 0 90 0 90 -330 0 -330 0 0 -90z"\n        />\n        <path\n          d="M1763 1362 c-251 -90 -272 -432 -35 -549 47 -23 70 -28 132 -28 174\n 0 295 121 295 295 0 85 -21 142 -74 203 -72 81 -213 117 -318 79z m151 -177\n c82 -39 86 -161 7 -208 -75 -44 -181 13 -181 98 0 93 90 150 174 110z"\n        />\n        <path d="M780 1080 l0 -90 330 0 330 0 0 90 0 90 -330 0 -330 0 0 -90z" />\n      </g></svg></span\n  >\n</li>\n<li></li>\n<li></li>\n<li></li>';getPcFirefoxProcess=()=>'\n<li>\n  <span\n    style="\n      display: inline-block;\n      width: 19px;\n      height: 17px;\n      vertical-align: middle;\n      position: relative;\n      bottom: 5px;\n    "\n    >\x3c!-- This Source Code Form is subject to the terms of the Mozilla Public\n   - License, v. 2.0. If a copy of the MPL was not distributed with this\n   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --\x3e\n    <svg\n      width="200%"\n      height="200%"\n      fill="none"\n      xmlns="http://www.w3.org/2000/svg"\n    >\n      <path\n        fill-rule="evenodd"\n        clip-rule="evenodd"\n        d="M18.237 17 22 20.762 20.762 22 18 19.237v1.888a.876.876 0 0 1-1.494.619L11.763 17H4.5A2.502 2.502 0 0 1 2 14.5v-10c0-.37.081-.72.227-1.036L1 2.238 2.238 1l1.23 1.23.001-.001L4.99 3.75h-.003l6.5 6.5h.003L13 11.76v.003l3.648 3.647.002-.001L18.24 17h-.003zm-9.224-6.75H6V12h4.763l5.487 5.487v1.526l-3.506-3.507a.876.876 0 0 0-.619-.256H4.5a.752.752 0 0 1-.75-.75V4.987l5.263 5.263z"\n        fill="#000"\n      />\n      <path\n        d="M7.111 3.75H19.5c.413 0 .75.337.75.75v10c0 .413-.337.75-.75.75h-.889l1.626 1.626A2.494 2.494 0 0 0 22 14.5v-10C22 3.121 20.879 2 19.5 2H5.361l1.75 1.75z"\n        fill="#000"\n      />\n      <path d="M11.361 8H18V6.25H9.611L11.361 8z" fill="#000" /></svg\n  ></span>\n  \n</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>';getAndroidFirefoxProcess=()=>'\n<li>\n  <span\n    style="\n      display: inline-block;\n      width: 19px;\n      height: 17px;\n      vertical-align: middle;\n      position: relative;\n      bottom: 8px;\n    "\n    >\x3c!-- This Source Code Form is subject to the terms of the Mozilla Public\n   - License, v. 2.0. If a copy of the MPL was not distributed with this\n   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --\x3e\n    <svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path\n        fill-rule="evenodd"\n        clip-rule="evenodd"\n        d="M7 11V7a5 5 0 0 1 10 0v4a2.5 2.5 0 0 1 2.5 2.5v6A2.5 2.5 0 0 1 17 22H7a2.5 2.5 0 0 1-2.5-2.5v-6A2.5 2.5 0 0 1 7 11zm1.75-4a3.25 3.25 0 0 1 6.5 0v4h-6.5V7zm-2.5 6.5a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-.75.75H7a.75.75 0 0 1-.75-.75v-6z"\n        fill="#000"\n      /></svg\n  ></span>\n  \n</li>\n<li></li>';getEdgeProcess=()=>'\n<li>\n  <span\n    style="\n      display: inline-block;\n      width: 19px;\n      height: 17px;\n      vertical-align: middle;\n      position: relative;\n      bottom: 5px;\n      left: 2px;\n    "\n    ><svg\n      xmlns="http://www.w3.org/2000/svg"\n      viewBox="0 0 48 48"\n      width="150%"\n      height="150%"\n      style="\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n      "\n    >\n      <path\n        d="M 24 4 C 19.599415 4 16 7.599415 16 12 L 16 16 L 12.5 16 C 10.032499 16 8 18.032499 8 20.5 L 8 39.5 C 8 41.967501 10.032499 44 12.5 44 L 35.5 44 C 37.967501 44 40 41.967501 40 39.5 L 40 20.5 C 40 18.032499 37.967501 16 35.5 16 L 32 16 L 32 12 C 32 7.599415 28.400585 4 24 4 z M 24 7 C 26.779415 7 29 9.220585 29 12 L 29 16 L 19 16 L 19 12 C 19 9.220585 21.220585 7 24 7 z M 12.5 19 L 35.5 19 C 36.346499 19 37 19.653501 37 20.5 L 37 39.5 C 37 40.346499 36.346499 41 35.5 41 L 12.5 41 C 11.653501 41 11 40.346499 11 39.5 L 11 20.5 C 11 19.653501 11.653501 19 12.5 19 z M 24 27 A 3 3 0 0 0 24 33 A 3 3 0 0 0 24 27 z"\n      />\n    </svg>\n  </span>\n  \n</li>\n<li></li>\n<li></li>';getSafariProcess=()=>'\n<li>\n  <span style="font-weight: bold">Safari</span>\n</li>\n<li></li>\n<li></li>\n<li>URL</li>\n<li></li>';getUnknownProcess=()=>"\n<li></li>\n<li></li>\n<li></li>\n<li></li>"}const se=(n,t,e)=>`\n<div class="coins-optin-dialog">\n   <div class="coins-optin-dialog-icon">\n     <img style="vertical-align: top !important;" src="${n}">\n   </div>\n   <div class="coins-optin-dialog-text-box">\n     <div class="coins-close-button"><span></span></div>\n     <span>${t}</span>\n    <div class="coins-optin-dialog-button-box">\n      <button class="coins-optin-dialog-button">${e}</button>\n    </div>\n  </div>\n</div>\n`,ae=(n,t,e,i)=>`\n<div class="coins-optin-dialog">\n  <div class="coins-optin-dialog-icon">\n    <img src="${n}">\n  </div>\n  <div class="coins-optin-dialog-text-box">\n    <div class="coins-close-button"><span></span></div>\n    <span>${t}</span>\n  </div>\n  <div class="coins-optin-dialog-button-box">\n    <button class="coins-optin-dialog-close-button">${i}</button>\n    <button class="coins-optin-dialog-button">${e}</button>\n  </div>\n</div>\n`;async function re(n,t){let e=n.DEFAULT_DIALOG_ICON,i="?",o="";t.isOptinDialogScriptLoaded()&&(e=t.CoinsOptinDialogOption.icon||e,i=t.CoinsOptinDialogOption.message||i,o=t.CoinsOptinDialogOption.button||o);const s=t.getOptinDialogStyleProps();s?t.appendCustomDialogStyle(s):t.appendDialogStyle();const a=s?ae(e,i,o,s.close.text??""):se(e,i,o);document.body.insertAdjacentHTML("beforeend",a);document.querySelector(".coins-optin-dialog-button").addEventListener("click",t.optinPositiveAction);const r=document.querySelector(".coins-close-button");r&&r.addEventListener("click",t.optinNegativeAction);const c=document.querySelector(".coins-optin-dialog-close-button");c&&c.addEventListener("click",t.optinNegativeAction),t.event.publish(t.event.SHOW_PREOPTIN,null)}const ce=(n,t,e)=>`\n<div id='pre-optin-with-dl' class="coins-optin-dialog">\n   <div class="coins-optin-dialog-icon">\n     <img style="vertical-align: top !important;" src="${n}">\n   </div>\n   <div class="coins-optin-dialog-text-box">\n     <div class="coins-close-button"><span></span></div>\n     <span>${t}</span>\n    <div class="coins-optin-dialog-button-box">\n      <button class="coins-optin-dialog-button">${e}</button>\n    </div>\n  </div>\n</div>\n`,le=(n,t,e,i)=>`\n<div id='pre-optin-with-dl' class="coins-optin-dialog">\n  <div class="coins-optin-dialog-icon">\n    <img src="${n}">\n  </div>\n  <div class="coins-optin-dialog-text-box">\n    <div class="coins-close-button"><span></span></div>\n    <span>${t}</span>\n  </div>\n  <div class="coins-optin-dialog-button-box">\n    <button class="coins-optin-dialog-close-button">${i}</button>\n    <button class="coins-optin-dialog-button">${e}</button>\n  </div>\n</div>\n`;async function de(n,t){let e=n.DEFAULT_DIALOG_ICON,i="?",o="";e=t.CoinsOptinWithDlDialogOption.icon||e,i=t.CoinsOptinWithDlDialogOption.message||i,o=t.CoinsOptinWithDlDialogOption.button||o;const s=t.getOptinDialogStyleProps();s?t.appendCustomDialogStyle(s):t.appendDialogStyle();const a=s?le(e,i,o,s.close.text??""):ce(e,i,o);document.body.insertAdjacentHTML("beforeend",a);document.querySelector(".coins-optin-dialog-button").addEventListener("click",t.optinWithDlPositiveAction);const r=document.querySelector(".coins-close-button");r&&r.addEventListener("click",t.optinWithDlNegativeAction);const c=document.querySelector(".coins-optin-dialog-close-button");c&&c.addEventListener("click",t.optinWithDlNegativeAction),t.event.publish(t.event.SHOW_PREOPTIN_WITH_DL,null)}const pe=(n,t,e,i)=>`\n<div class="coins-optin-dialog">\n\n    <div class="coins-unblock-process is-hidden">\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n\n        ${i}\n    </div>\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${n}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n        <div class="coins-optin-dialog-button-box">\n            <button class="coins-optin-dialog-button">${e}</button>\n        </div>\n    </div>\n</div>\n`,ge=(n,t,e,i,o)=>`\n<div class="coins-optin-dialog">\n  <div class="coins-unblock-process is-hidden">\n    <div id="coins-unblock-process-hide-btn">\n      <svg>\n        <rect width="21" height="4"></rect>\n      </svg>\n      <svg>\n        <rect width="21" height="4"></rect>\n      </svg>\n    </div>\n\n    ${i}\n  </div>\n\n  <div class="coins-optin-dialog-icon">\n    <img src="${n}" />\n  </div>\n  <div class="coins-optin-dialog-text-box">\n    <div id="coins-close-button" class="coins-close-button"><span></span></div>\n    <span>${t}</span>\n  </div>\n  <div class="coins-optin-dialog-button-box">\n    <button class="coins-optin-dialog-close-button">${o}</button>\n    <button class="coins-optin-dialog-button">${e}</button>\n  </div>\n</div>\n\n`,ue=(n,t,e,i,o)=>`\n<div class="coins-optin-dialog">\n  <div class="coins-optin-dialog-icon">\n    <img src="${n}" />\n  </div>\n  <div class="coins-optin-dialog-text-box">\n    <div id="coins-close-button" class="coins-close-button"><span></span></div>\n    <span>${t}</span>\n  </div>\n  <div class="coins-optin-dialog-button-box">\n    <button class="coins-optin-dialog-close-button">${o}</button>\n    <button class="coins-optin-dialog-button">${e}</button>\n  </div>\n\n  <div class="coins-unblock-process is-hidden">\n    ${i}\n\n    <div id="coins-unblock-process-hide-btn">\n      <svg>\n        <rect width="21" height="4"></rect>\n      </svg>\n      <svg>\n        <rect width="21" height="4"></rect>\n      </svg>\n    </div>\n  </div>\n</div>\n`;const he=(n,t,e,i)=>`\n<div id='unblock-process-with-dl' class="coins-optin-dialog">\n\n    <div class="coins-unblock-process is-hidden">\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n\n        ${i}\n    </div>\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${n}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n        <div class="coins-optin-dialog-button-box">\n            <button class="coins-optin-dialog-button">${e}</button>\n        </div>\n    </div>\n</div>\n`,fe=(n,t,e,i,o)=>`\n<div id='unblock-process-with-dl' class="coins-optin-dialog">\n  <div class="coins-unblock-process is-hidden">\n    <div id="coins-unblock-process-hide-btn">\n      <svg>\n        <rect width="21" height="4"></rect>\n      </svg>\n      <svg>\n        <rect width="21" height="4"></rect>\n      </svg>\n    </div>\n\n    ${i}\n  </div>\n\n  <div class="coins-optin-dialog-icon">\n    <img src="${n}" />\n  </div>\n  <div class="coins-optin-dialog-text-box">\n    <div id="coins-close-button" class="coins-close-button"><span></span></div>\n    <span>${t}</span>\n  </div>\n  <div class="coins-optin-dialog-button-box">\n    <button class="coins-optin-dialog-close-button">${o}</button>\n    <button class="coins-optin-dialog-button">${e}</button>\n  </div>\n</div>\n\n`,be=(n,t,e,i,o)=>`\n<div id='unblock-process-with-dl' class="coins-optin-dialog">\n  <div class="coins-optin-dialog-icon">\n    <img src="${n}" />\n  </div>\n  <div class="coins-optin-dialog-text-box">\n    <div id="coins-close-button" class="coins-close-button"><span></span></div>\n    <span>${t}</span>\n  </div>\n  <div class="coins-optin-dialog-button-box">\n    <button class="coins-optin-dialog-close-button">${o}</button>\n    <button class="coins-optin-dialog-button">${e}</button>\n  </div>\n\n  <div class="coins-unblock-process is-hidden">\n    ${i}\n\n    <div id="coins-unblock-process-hide-btn">\n      <svg>\n        <rect width="21" height="4"></rect>\n      </svg>\n      <svg>\n        <rect width="21" height="4"></rect>\n      </svg>\n    </div>\n  </div>\n</div>\n`;const me=(n,t,e,i)=>`\n<div class="coins-optin-dialog">\n    <div class="coins-optin-dialog-icon">\n        <img style="vertical-align: top !important;" src="${n}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n        <div class="coins-optin-dialog-button-box">\n            <a id="coins-optin-unblock-link" target="_blank" href="${e}" class="coins-optin-dialog-text-link">${i}</a>\n        </div>\n    </div>\n</div>\n`;const ve=(n,t,e,i,o,s)=>`\n<div>\n  <div class="coins-thanks-optin-dialog">\n    <a href="${s}" download>\n      <div class="coins-thanks-optin-dialog-container">\n        <div class="coins-thanks-optin-dialog-header">\n          <div class="coins-thanks-optin-dialog-icon">\n            <img\n              src="${n}"\n            />\n          </div>\n          <div class="coins-thanks-optin-dialog-text-box">\n            <div class="coins-thanks-optin-dialog-title">${t}</div>\n            <div class="coins-thanks-optin-dialog-message">${e}</div>\n          </div>\n        </div>\n        <div class="coins-thanks-optin-dialog-image">\n          <img\n            src="${i}"\n          />\n        </div>\n      </div>\n    </a>\n    <div class="coins-thanks-optin-dialog-button-box">\n      <button class="coins-thanks-optin-dialog-button">${o}</button>\n    </div>\n  </div>\n</div>\n`;async function we(n,t){if(0!==document.getElementsByClassName("coins-thanks-optin-dialog").length)return;let e=n.DEFAULT_DIALOG_ICON,i="",o="",s="",a="",r="";const c=t.CoinsOptinWithDlDialogOption.thanks;t.isOptinWithDlDialogScriptLoaded()&&(e=t.CoinsOptinWithDlDialogOption.icon||e,i=c.title||i,o=c.message||o,s=c.image||s,a=c.button||a,r=c.file||r),t.appendThanksOptinDialogStyle(),document.body.insertAdjacentHTML("beforeend",ve(e,i,o,s,a,r));const l=document.querySelector(".coins-thanks-optin-dialog a");l.addEventListener("click",(function(){t.thanksOptinPositiveAction(),l.style.pointerEvents="none",setTimeout((()=>{l.style.pointerEvents=""}),3e3)}));document.querySelector(".coins-thanks-optin-dialog-button").addEventListener("click",t.thanksOptinNegativeAction),t.event.publish(t.event.SHOW_THANKS_OPTIN,null)}function ye(n,t,e,i,o,s){if(e.isPermissionDefault())e.useOptinDialog()&&e.needToShowPreOptinDialog()&&e.isPreOptinRequiredBrowser()?re(n,e):t._newRequestPermission();else if(e.isPermissionDenied()){if(e.isOptinWithDlDialogScriptLoaded())return void(e.needToShowUnblockWithDlDialog()&&(i.set("coins_waiting_unblock_download","true"),async function(n,t,e){let i=n.DEFAULT_DIALOG_ICON,o="?",s="";i=t.CoinsOptinWithDlDialogOption.icon||i,o=t.CoinsOptinWithDlDialogOption.message||o,s=t.CoinsOptinWithDlDialogOption.button||s;const a=e.getExplanation(),r=t.getOptinDialogStyleProps();r?t.appendCustomDialogStyle(r):t.appendDialogStyle(),r?t.appendCustomUnblockProcessStyle(r):t.appendUnblockProcessStyle();const c="top"===r?.vertical?be(i,o,s,a,r.close.text??""):"bottom"===r?.vertical?fe(i,o,s,a,r.close.text??""):he(i,o,s,a);document.body.insertAdjacentHTML("beforeend",c);const l=document.querySelector("#coins-close-button");l&&l.addEventListener("click",t.unblockWithDlNegativeAction);const d=document.querySelector(".coins-optin-dialog-close-button");d&&d.addEventListener("click",t.unblockWithDlNegativeAction),document.querySelector("#coins-unblock-process-hide-btn").addEventListener("click",t.toggleUnblockWithDlProcess),document.querySelector(".coins-optin-dialog-button").addEventListener("click",t.toggleUnblockWithDlProcess),t.event.publish(t.event.SHOW_UNBLOCK_WITH_DL,null)}(n,e,s),function(n,t,e,i){if(i.safari){let o=Notification.permission;const s=setInterval((()=>{const a=Notification.permission;o!==a&&("granted"===a?(n.hideOptinDialog(),e.publish(e.NOTIFICATION_GRANTED_WITH_DL,null),we(i,n)):t.delete("coins_waiting_unblock_download"),clearInterval(s)),document.querySelector(".coins-optin-dialog")||clearInterval(s),o=a}),2e3)}else navigator.permissions.query({name:"notifications"}).then((o=>{o.onchange=()=>{"granted"===o.state?(n.hideOptinDialog(),e.publish(e.NOTIFICATION_GRANTED_WITH_DL,null),we(i,n)):t.delete("coins_waiting_unblock_download")}}))}(e,i,o,n)));e.needToShowUnblocklDialog()&&async function(n,t,e){let i=n.DEFAULT_DIALOG_ICON,o="?",s="";t.isOptinDialogScriptLoaded()&&(i=t.CoinsOptinDialogOption.icon||i,o=t.CoinsOptinDialogOption.message||o,s=t.CoinsOptinDialogOption.button||s);const a=e.getExplanation(),r=t.getOptinDialogStyleProps();r?t.appendCustomDialogStyle(r):t.appendDialogStyle(),r?t.appendCustomUnblockProcessStyle(r):t.appendUnblockProcessStyle();const c="top"===r?.vertical?ue(i,o,s,a,r.close.text??""):"bottom"===r?.vertical?ge(i,o,s,a,r.close.text??""):pe(i,o,s,a);document.body.insertAdjacentHTML("beforeend",c);const l=document.querySelector("#coins-close-button");l&&l.addEventListener("click",(function(){t.saveBlockDate(),t.hideOptinDialog()}),!1);const d=document.querySelector(".coins-optin-dialog-close-button");d&&d.addEventListener("click",(function(){t.saveBlockDate(),t.hideOptinDialog()}),!1),document.querySelector("#coins-unblock-process-hide-btn").addEventListener("click",t.toggleUnblockProcess),document.querySelector(".coins-optin-dialog-button").addEventListener("click",t.toggleUnblockProcess)}(n,e,s)}}function ke(n,t,e,i,o,s){i.get("coins_initialized")||o.publish(o.AUTO_BLOCK),e.useBlockDialog()&&e.needToShowUnblocklDialog()&&async function(n,t){let e=n.DEFAULT_DIALOG_ICON,i=n.DEFAULT_BLOCK_URL,o="?",s="";t.isCoinsBlockDialogOptionLoaded()&&(e=t.CoinsBlockDialogOption.icon||e,i=t.CoinsBlockDialogOption.link||i,o=t.CoinsBlockDialogOption.message||o,s=t.CoinsBlockDialogOption.text||s);const a=t.getOptinDialogStyleProps();a?t.appendCustomDialogStyle(a):t.appendDialogStyle(),document.body.insertAdjacentHTML("beforeend",me(e,i,o,s)),document.querySelector("#coins-close-button").addEventListener("click",(function(){t.saveBlockDate(),t.hideOptinDialog()}),!1),document.querySelector("#coins-optin-unblock-link").addEventListener("click",(function(){t.saveBlockDate(),t.hideOptinDialog()}),!1)}(n,e),e.useUnblockingRequest()&&ye(n,t,e,i,o,s),"1"!=i.get("coins_optout")&&t._optout()}function De(n,t,e,i){n.needToShowPreOptinWithDlDialog()&&(de(i,n),function(n,t,e,i){if(i.safari){const o=document.querySelector(".coins-optin-dialog-button");let s=Notification.permission;o.addEventListener("click",(()=>{const o=setInterval((()=>{const a=Notification.permission;s!==a&&("granted"===a?(e.publish(e.NOTIFICATION_GRANTED_WITH_DL,null),we(i,n)):t.delete("coins_waiting_preoptin_download"),clearInterval(o)),s=a}),2e3)}))}else navigator.permissions.query({name:"notifications"}).then((o=>{o.onchange=()=>{"granted"===o.state?(e.publish(e.NOTIFICATION_GRANTED_WITH_DL,null),we(i,n)):t.delete("coins_waiting_preoptin_download")}}))}(n,t,e,i))}function _e(e,i){const o=new n,s=new t,a=new ie,r=new ee(e,i,o,s,a),c=new oe(e);r.isPermissionGranted()?function(n,t,e){t._newRequestPermission(),e.isOptinWithDlDialogScriptLoaded()&&e.needToShowThanksOptinDialog()&&we(n,e)}(e,i,r):r.isPermissionDenied()?ke(e,i,r,o,s,c):r.useOptinDialog()&&r.isPreOptinRequiredBrowser()?r.isOptinWithDlDialogScriptLoaded()?De(r,o,s,e):function(n,t){n.needToShowPreOptinDialog()&&re(t,n)}(r,e):i._newRequestPermission()}const Se=(n,t,e,i)=>`\n<div class="coins-optin-dialog">\n\n    <div class="coins-unblock-process is-hidden">\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n\n        <ol>\n            <li></li>\n            <li></li>\n            <li>${i}</li>\n            <li>ON()</li>\n            <li style="list-style-type: none; margin-left: -20px;"> ${i}\n            </li>\n        </ol>\n    </div>\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${n}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n        <div class="coins-optin-dialog-button-box">\n            <button class="coins-optin-dialog-button">${e}</button>\n        </div>\n    </div>\n</div>\n`,xe=(n,t,e,i,o)=>`\n<div class="coins-optin-dialog">\n\n    <div class="coins-unblock-process is-hidden">\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n\n        <ol>\n            <li></li>\n            <li></li>\n            <li>${i}</li>\n            <li>ON()</li>\n            <li style="list-style-type: none; margin-left: -20px;"> ${i}\n            </li>\n        </ol>\n    </div>\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${n}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n    </div>\n    <div class="coins-optin-dialog-button-box">\n        <button class="coins-optin-dialog-close-button">${o}</button>\n        <button class="coins-optin-dialog-button">${e}</button>\n    </div>\n</div>\n`,Oe=(n,t,e,i,o)=>`\n<div class="coins-optin-dialog">\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${n}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n    </div>\n    <div class="coins-optin-dialog-button-box">\n        <button class="coins-optin-dialog-close-button">${o}</button>\n        <button class="coins-optin-dialog-button">${e}</button>\n    </div>\n\n    <div class="coins-unblock-process is-hidden">\n        <ol>\n            <li></li>\n            <li></li>\n            <li>${i}</li>\n            <li>ON()</li>\n            <li style="list-style-type: none; margin-left: -20px;"> ${i}\n            </li>\n        </ol>\n\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n    </div>\n</div>\n`;async function Ce(n,t){let e=n.DEFAULT_DIALOG_ICON,i="?",o="";t.isOptinDialogScriptLoaded()&&(e=t.CoinsOptinDialogOption.icon||e,i=t.CoinsOptinDialogOption.message||i,o=t.CoinsOptinDialogOption.button||o);let s="";!function(){const t=document.querySelector('link[rel="manifest"]');if(n.localManifestFileUrl=t?t.href:"",n.localManifestFileUrl){const t=new URL(n.localManifestFileUrl),e=new URL(window.location.href);t.origin!=e.origin&&(n.localManifestFileUrl="")}}(),n.localManifestFileUrl&&n.localManifestFileUrl.length>0&&(s=await async function(){try{if(n.localManifestFileUrl){const t=await fetch(n.localManifestFileUrl);if(!t.ok)throw new Error("Network response was not ok");return await t.json()}}catch(n){}}().then((n=>n.name?n.name:s)).catch((n=>{})));const a=t.getOptinDialogStyleProps();a?t.appendCustomDialogStyle(a):t.appendDialogStyle(),a?t.appendCustomUnblockProcessStyle(a):t.appendUnblockProcessStyle();const r="top"===a?.vertical?Oe(e,i,o,s,a.close.text??""):"bottom"===a?.vertical?xe(e,i,o,s,a.close.text??""):Se(e,i,o,s);document.body.insertAdjacentHTML("beforeend",r);const c=document.querySelector("#coins-close-button");c&&c.addEventListener("click",(function(){t.saveCheckDate(),t.hideOptinDialog()}),!1);const l=document.querySelector(".coins-optin-dialog-close-button");l&&l.addEventListener("click",(function(){t.saveCheckDate(),t.hideOptinDialog()}),!1);document.querySelector("#coins-unblock-process-hide-btn").addEventListener("click",t.toggleUnblockProcess);document.querySelector(".coins-optin-dialog-button").addEventListener("click",t.toggleUnblockProcess)}const Ie=(n,t,e,i)=>`\n<div id='unblock-process-with-dl' class="coins-optin-dialog">\n\n    <div class="coins-unblock-process is-hidden">\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n\n        <ol>\n            <li></li>\n            <li></li>\n            <li>${i}</li>\n            <li>ON()</li>\n            <li></li>\n            <li style="list-style-type: none; margin-left: -20px;"> ${i}\n            </li>\n        </ol>\n    </div>\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${n}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n        <div class="coins-optin-dialog-button-box">\n            <button class="coins-optin-dialog-button">${e}</button>\n        </div>\n    </div>\n</div>\n`,Te=(n,t,e,i,o)=>`\n<div id='unblock-process-with-dl' class="coins-optin-dialog">\n\n    <div class="coins-unblock-process is-hidden">\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n\n        <ol>\n            <li></li>\n            <li></li>\n            <li>${i}</li>\n            <li>ON()</li>\n            <li></li>\n            <li style="list-style-type: none; margin-left: -20px;"> ${i}\n            </li>\n        </ol>\n    </div>\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${n}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n    </div>\n    <div class="coins-optin-dialog-button-box">\n        <button class="coins-optin-dialog-close-button">${o}</button>\n        <button class="coins-optin-dialog-button">${e}</button>\n    </div>\n</div>\n`,Ee=(n,t,e,i,o)=>`\n<div id='unblock-process-with-dl' class="coins-optin-dialog">\n\n    <div class="coins-optin-dialog-icon">\n        <img src="${n}">\n    </div>\n    <div class="coins-optin-dialog-text-box">\n        <div id="coins-close-button" class="coins-close-button"><span></span></div>\n        <span>${t}</span>\n    </div>\n    <div class="coins-optin-dialog-button-box">\n        <button class="coins-optin-dialog-close-button">${o}</button>\n        <button class="coins-optin-dialog-button">${e}</button>\n    </div>\n\n    <div class="coins-unblock-process is-hidden">\n        <ol>\n            <li></li>\n            <li></li>\n            <li>${i}</li>\n            <li>ON()</li>\n            <li></li>\n            <li style="list-style-type: none; margin-left: -20px;"> ${i}\n            </li>\n        </ol>\n\n        <div id="coins-unblock-process-hide-btn">\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n            <svg>\n                <rect width="21" height="4"></rect>\n            </svg>\n        </div>\n    </div>\n</div>\n`;async function Le(n,t){let e=n.DEFAULT_DIALOG_ICON,i="?",o="";e=t.CoinsOptinWithDlDialogOption.icon||e,i=t.CoinsOptinWithDlDialogOption.message||i,o=t.CoinsOptinWithDlDialogOption.button||o;let s="";!function(){const t=document.querySelector('link[rel="manifest"]');if(n.localManifestFileUrl=t?t.href:"",n.localManifestFileUrl){const t=new URL(n.localManifestFileUrl),e=new URL(window.location.href);t.origin!=e.origin&&(n.localManifestFileUrl="")}}(),n.localManifestFileUrl&&n.localManifestFileUrl.length>0&&(s=await async function(){try{if(n.localManifestFileUrl){const t=await fetch(n.localManifestFileUrl);if(!t.ok)throw new Error("Network response was not ok");return await t.json()}}catch(n){}}().then((n=>n.name?n.name:s)).catch((n=>{})));const a=t.getOptinDialogStyleProps();a?t.appendCustomDialogStyle(a):t.appendDialogStyle(),a?t.appendCustomUnblockProcessStyle(a):t.appendUnblockProcessStyle();const r="top"===a?.vertical?Ee(e,i,o,s,a.close.text??""):"bottom"===a?.vertical?Te(e,i,o,s,a.close.text??""):Ie(e,i,o,s);document.body.insertAdjacentHTML("beforeend",r);const c=document.querySelector("#coins-close-button");c&&c.addEventListener("click",t.unblockWithDlNegativeAction,!1);const l=document.querySelector(".coins-optin-dialog-close-button");l&&l.addEventListener("click",t.unblockWithDlNegativeAction,!1);document.querySelector("#coins-unblock-process-hide-btn").addEventListener("click",t.toggleUnblockWithDlProcess);document.querySelector(".coins-optin-dialog-button").addEventListener("click",t.toggleUnblockWithDlProcess)}function Pe(e,i){const o=new n,s=new t,a=new ie,r=new ee(e,i,o,s,a),c=o.get("internalPermission"),l=o.get("internalPermissionGranted");if(r.isPermissionGranted())o.delete("internalPermission"),o.set("internalPermissionGranted","true"),i._newRequestPermission(),r.isOptinWithDlDialogScriptLoaded()&&r.needToShowThanksOptinDialog()&&(o.get("coins_waiting_unblock_download")&&s.publish(s.NOTIFICATION_GRANTED_WITH_DL,null),we(e,r));else if(r.useIosDialog()){if(r.skipPreOptinDialog())return;r.isOptinWithDlDialogScriptLoaded()?"denied"==c&&r.needToShowPreOptinWithDlDialog()||l&&r.isPermissionDefault()&&r.useUnblockingRequest()?Le(e,r):"denied"!=c&&r.isPermissionDefault()&&r.needToShowPreOptinWithDlDialog()&&(de(e,r),function(n,t,e,i){document.querySelector(".coins-optin-dialog-button").addEventListener("click",(()=>{let o=Notification.permission;const s=setInterval((()=>{const a=Notification.permission;o!==a&&("granted"===a?(e.publish(e.NOTIFICATION_GRANTED_WITH_DL,null),we(i,n)):t.delete("coins_waiting_preoptin_download"),clearInterval(s)),o=a}),2e3)}))}(r,o,s,e)):"denied"==c&&r.needToShowPreOptinDialog()||l&&r.isPermissionDefault()&&r.useUnblockingRequest()?Ce(e,r):"denied"!=c&&r.isPermissionDefault()&&r.needToShowPreOptinDialog()&&re(e,r)}r.useUnblockingRequest()&&r.isPermissionDenied()&&(r.isOptinWithDlDialogScriptLoaded()&&r.needToShowPreOptinWithDlDialog()?Le(e,r):r.needToShowPreOptinDialog()&&Ce(e,r))}const Ae={webHost:"api.webpush.jp",webPath:"/coins_webapi",optoutUrl:"https://api.webpush.jp/coins_webapi/fapi/registrationid",token:void 0,sw:"/serviceworker.js",optinDialog:"off",blockDialog:"off",unblockingRequest:"off",iosDialog:"off",requiredBrowser:"off",medium:"",ua:navigator.userAgent.toLowerCase(),scriptIsReady:!1,DEFAULT_DIALOG_ICON:"https://cdn.webpush.jp/logo-coins.png",DEFAULT_BLOCK_URL:"https://webpush.jp/reoptin/",DEFAULT_OPTIN_CHECK_INTERVAL:86400,DEFAULT_BLOCK_CHECK_INTERVAL:86400,localManifestFileUrl:"",registration:void 0};Ae.webHost&&Ae.webPath&&(Ae.server=`${document.location.protocol}//${Ae.webHost}${Ae.webPath}`,Ae.registerUrl=`${Ae.server}/fapi/registrationid`,Ae.fcmconfUrl=`${Ae.server}/fcm/setting/`,Ae.usertagUrl=`${Ae.server}/fapi/usertag`,Ae.optinEventUrl=`${Ae.server}/fapi/optin_event`),Ae.ua&&(Ae.firefox=Ae.ua.indexOf("firefox")>-1,Ae.chrome=Ae.ua.indexOf("chrome")>-1&&-1===Ae.ua.indexOf("edg"),Ae.edge=Ae.ua.indexOf("chrome")>-1&&Ae.ua.indexOf("edg")>-1,Ae.safari=Ae.ua.indexOf("safari")>-1&&-1===Ae.ua.indexOf("chrome")&&-1===Ae.ua.indexOf("opera")&&-1===Ae.ua.indexOf("opr"),Ae.iphone=Ae.ua.indexOf("iphone")>-1,Ae.ipad=Ae.ua.indexOf("ipad")>-1||Ae.ua.indexOf("macintosh")>-1&&"ontouchend"in document,Ae.android=Ae.ua.indexOf("android")>-1);class Ne{webHost;webPath;IDBStorage;isProcessing=!1;retryCount=0;constructor(n){this.webHost=n.webHost,this.webPath=n.webPath,this.IDBStorage=new te}request(n,t,e,i){return i=i||{Accept:"application/json","Content-Type":"application/json"},fetch(n,{method:t,headers:i,body:e})}isLatestSdkVersion(){return new Promise(((n,t)=>{const e=indexedDB.open("coins_fcm");e.onupgradeneeded=t=>{t.target.transaction?.abort(),n(!1)},e.onsuccess=()=>{n(!0)},e.onerror=n=>{t()}}))}fetchToken(){return new Promise(((n,t)=>{document.cookie.indexOf("btoken")<0?t():this.isLatestSdkVersion().then((e=>{if(e){const e="coins_fcm",i="coins_fcm_store";this.IDBStorage.openDatabase(e,i).then((e=>{const o=e.transaction(i,"readonly").objectStore(i).openCursor();o.onsuccess=t=>{const e=t.target.result;if(e){e.continue();const t={registrationId:e.value.token,senderId:e.value.messagingSenderId};n(t)}},o.onerror=()=>{t()}})).catch((()=>t()))}else{const e=indexedDB.open("fcm_token_details_db");e.onsuccess=e=>{const i=e.target.result;try{const e=i.transaction("fcm_token_object_Store"),o=e.objectStore("fcm_token_object_Store").openCursor();o.onsuccess=t=>{const e=t.target.result;if(e){const t={registrationId:e.value.fcmToken,senderId:e.value.fcmSenderId};n(t)}},o.onerror=()=>{t()}}catch(n){t()}i.close()},e.onerror=()=>{t()}}}))}))}createUrl(n){return`${window.document.location.protocol}//${this.webHost}${this.webPath}${n}`}tokenIsReady(){const t=new n;return t.get("senderId")&&t.get("registrationId")}canRetry(){return this.retryCount<$e}_addCart(n,t,e){const i=this.createUrl("/fapi/addcart"),o={sender_id:n.senderId,registration_id:n.registrationId,cart_option:t.option||null,session_id:t.session_id||null};this.isProcessing=!0,this.request(i,"POST",JSON.stringify(o)).then((n=>{this.isProcessing=!1,e(n)})).catch((n=>{this.isProcessing=!1,e(n)}))}_clearCart(n,t){const e=this.createUrl("/fapi/clearcart"),i={sender_id:n.senderId,registration_id:n.registrationId};this.isProcessing=!0,this.request(e,"POST",JSON.stringify(i)).then((n=>{this.isProcessing=!1,t(n)})).catch((n=>{this.isProcessing=!1,t(n)}))}addCart(n,t){this.isProcessing||(n=n||{},t=t||function(){},this.fetchToken().then((e=>{this._addCart(e,n,t)})).catch((()=>{window.setTimeout((()=>{this.addCart(n,t),this.retryCount++}),Be)})))}clearCart(n){this.isProcessing||(n=n||function(){},this.fetchToken().then((t=>{this._clearCart(t,n)})).catch((()=>{window.setTimeout((()=>{this.clearCart(n),this.retryCount++}),Be)})))}}const $e=60,Be=1e3;window.coins2b=new class{config;storage;event;communication;IDBStorage;currentToken;constructor(e){this.config=e,this.storage=new n,this.event=new t,this.communication=new ne,this.IDBStorage=new te,this.currentToken="",this.initialize()}initialize(){const n=this.config.optinEventUrl;window.addEventListener(this.event.AUTO_BLOCK,(()=>{const t={sender_id:window.coins2bData.fcmconfig.messagingSenderId,event:"auto_block",url:location.href};n&&this.communication.postRequest(n,JSON.stringify(t),null)})),this.event.dispPromptRidSp()}async setup(){if(!("Notification"in window))return;const n=document.getElementsByTagName("script");for(let t=0;t<n.length;++t)if(this.config.token=n[t].dataset.bptoken,this.config.token){n[t].dataset.sw&&(this.config.sw=n[t].dataset.sw),n[t].dataset.optindialog&&(this.config.optinDialog=n[t].dataset.optindialog),n[t].dataset.blockdialog&&(this.config.blockDialog=n[t].dataset.blockdialog),n[t].dataset.unblockingrequest&&(this.config.unblockingRequest=n[t].dataset.unblockingrequest),n[t].dataset.iosdialog&&(this.config.iosDialog=n[t].dataset.iosdialog),n[t].dataset.requiredbrowser&&(this.config.requiredBrowser=n[t].dataset.requiredbrowser),n[t].dataset.medium&&(this.config.medium=n[t].dataset.medium);break}if(!this.config.token)return;if((50==this.config.chromev||51==this.config.chromev)&&this.config.sw){const n=document.createElement("link");n.rel="manifest",n.href=this.config.sw.replace(/^(.*\/).*$/g,"$1")+"manifest.json?t="+(new Date).getTime(),document.head.appendChild(n)}var t,e;await(()=>new Promise((n=>{if(this.config.fcmconfUrl&&this.config.token){!function(n,t){const e=document.createElement("script");e.src=n,e.onload=function(){t()},document.body.appendChild(e)}(this.config.fcmconfUrl+this.config.token,(()=>n()))}})))(),await(t=this.config,e=this,void(t.iphone||t.ipad?Pe(t,e):_e(t,e))),this.imFirstScriptAppend(),this.storage.set("coins_initialized","true")}_optout=async()=>{try{this.optout()}catch(n){}};_newRequestPermission=async()=>{const n="default"===Notification.permission;if(!n||!window.coins2bData||"1"!=window.coins2bData.optinDisable){this.storage.delete("coins_optout");try{if(!this.config.sw)return;const e=new Zt(window.coins2bData.fcmconfig),i=(await navigator.serviceWorker.register(this.config.sw),await e.initialize(this.config.sw));if(!i)return;if(this.currentToken=i,this.IDBStorage.saveFirebaseConfig(window.coins2bData.fcmconfig,i),n){let n={sender_id:window.coins2bData.fcmconfig.messagingSenderId,event:"granted",url:location.href};this.config.optinEventUrl&&this.communication.postRequest(this.config.optinEventUrl,JSON.stringify(n),null)}let o=this.getOldRegisterid();if(i==o){var t=new Date("12/31/2037");return document.cookie="btoken="+i+"; expires="+t.toUTCString()+"; path=/",this.storage.setLocalStorage("coins_btoken",i),this.setRegistration(i,""),void("1"==window.coins2bData.useImUid&&this.imScriptAppend(i))}if(i&&o){let n={sender_id:window.coins2bData.fcmconfig.messagingSenderId,event:"changed",url:location.href};this.config.optinEventUrl&&this.communication.postRequest(this.config.optinEventUrl,JSON.stringify(n),null)}const s={sender_id:window.coins2bData.fcmconfig.messagingSenderId,registration_id:i,old_registration_id:o,uuid:""},a=this.getcookie("uuid");a&&(s.uuid=a),this.config.registerUrl&&this.communication.postRequest(this.config.registerUrl,JSON.stringify(s),(()=>{var n=new Date("12/31/2037");document.cookie="btoken="+i+"; expires="+n.toUTCString()+"; path=/",this.storage.setLocalStorage("coins_btoken",i),this.setRegistration(i,o),"1"==window.coins2bData.useImUid&&this.imScriptAppend(i),setTimeout((function(){navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage(JSON.stringify({type:"optin",url:location.href}))}),500)}))}catch(t){if(n){let n={sender_id:window.coins2bData.fcmconfig.messagingSenderId,event:"denied",url:location.href};this.config.optinEventUrl&&this.communication.postRequest(this.config.optinEventUrl,JSON.stringify(n),null)}if("granted"!==Notification.permission)return void this.storage.setLocalStorage("coins_btoken",null)}}};getOldRegisterid=()=>{const n=this.storage.get("coins_btoken");return n||this.getcookie("btoken")};getcookie=n=>{var t="",e=document.cookie;if(""==e)return t;for(var i=e.split("; "),o=0;o<i.length;o++){var s=i[o].split("=");if(s[0]==n){t=decodeURIComponent(s[1]);break}}return t};setsegment=n=>{n.length>1024?console.warn("The maximum length for a segment string is 1024 characters."):"Notification"in window&&"denied"!==Notification.permission&&this.getcoinsid((t=>{const e={sender_id:window.coins2bData.fcmconfig.messagingSenderId,registration_id:t,sender_string:n};this.config.registerUrl&&this.communication.postRequest(this.config.registerUrl,JSON.stringify(e),(function(){}))}))};optout=()=>{const n=this.storage,t=this.getOldRegisterid();if(t){const e={sender_id:window.coins2bData.fcmconfig.messagingSenderId,registration_id:t,sender_string:"",status:"3"};this.config.optoutUrl&&this.communication.postRequest(this.config.optoutUrl,JSON.stringify(e),(function(){n.setLocalStorage("coins_optout","1")}))}};getcoinsCallbacks=[];isListenerRegistered=!1;getcoinsid=n=>{if("Notification"in window&&(this.getcoinsCallbacks.includes(n)||this.getcoinsCallbacks.push(n),"denied"!==Notification.permission)){if(this.currentToken)return this.getcoinsCallbacks.forEach((n=>n(this.currentToken))),void(this.getcoinsCallbacks=[]);this.isListenerRegistered||(window.addEventListener(this.event.TOKEN_FETCHED,(n=>{const t=n.detail.token;this.getcoinsCallbacks.forEach((n=>n(t))),this.getcoinsCallbacks=[]})),this.isListenerRegistered=!0)}};imFirstScriptAppend=()=>{if(window.coins2bData.useImUid){let n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://dmp.im-apps.net/js/1014416/0001/itm.js";let t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(n,t)}};imScriptAppend=async n=>new Promise((t=>{let e="https://b6.im-apps.net/1012530/map/"+n,i=new XMLHttpRequest;i.open("POST",e),i.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),i.withCredentials=!0,i.send(null),t()}));setRegistration=(n,t)=>{this.config.registration={id:n,old_id:t};let e={token:n,oldToken:t,isCreated:!1,isUpdated:!1};t?t!=n?(e.isUpdated=!0,this.event.publish(this.event.TOKEN_FETCHED,{detail:e})):this.event.publish(this.event.TOKEN_FETCHED,{detail:e}):(e.isCreated=!0,this.event.publish(this.event.TOKEN_FETCHED,{detail:e}))}}(Ae),void 0===window.coinsCart&&function(n,t){n.coinsCart=new Ne(Ae)}(window),async function(){await window.coins2b.setup()}()}();

</script>

</body>
</html>
