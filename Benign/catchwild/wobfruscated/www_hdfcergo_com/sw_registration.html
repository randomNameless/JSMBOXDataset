<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>sw_registration.html</title>
</head>
<body>
<script>var notData = {};
var wlcmEnabled = 0;
var macros = {"sw":"/assets/script/lemniskSDKWorker.js","customOptinStatus":null,"migdomain":"/assets/script","hasMigration":true};
var __vizpush = __vizpush || {
  IframeEle: null,
  ContainerHtmlId: 'viz-push-container',
  version: '2',
  advid: 'VIZVRM5979',
  target: 'mu-pl.lemnisk.co',
  safariPushId :  "web.com.hdfcergo.www",
  intervalCookie : "wpn_https",
  interval : "${interval_macro}",
  optinPerDay : "${optinPerDay_macro}",
  coIntendedBrowsersList: macros && macros.coIntendedBrowsersList ? macros.coIntendedBrowsersList : ["firefox"],
  meta: {
    group: "cgA"
  },
  domain: macros.domain,
  migDomain: macros.migdomain,
  hasMigration: macros.hasMigration,
  isCOActive: macros.customOptinStatus,
  dailyCookie: '_vwpnsent',
  stateCookie: '_vwpnstate',
  fcmMigCookie: '_vwpnfcm',
  pushSuppCookie: '_vwpnsupp',
  fpc: '_vz',
  prevState: '',
  fcmMigState: '',
  vapidPublicKey: 'BAEbqTefzBCioWihbFrIwAKOloAq7X0HDdXzG1OfffgdxOL_LucgHA8QMzLliFb6VvzgaNShDIadtfeafEV3ZE0' ,
  swLoc: macros && macros.sw ? macros.sw : '/assets/script/lemniskSDKWorker.js',
  mobileOnly: macros.mobileOnly ? macros.mobileOnly : 0,
  timeout: macros.timeout ? macros.timeout : 120000,
  first: false,
  ctaUrls: ['lp1', 'lp2'],
  uuid: "",
  cont: '<style> .vizury-notification { display: block; overflow: hidden; border: 0px; position: fixed; z-index: 199999980;}</style> <iframe id = "http-push" class="vizury-notification" width="100%" height="100%"></iframe>',
  iframeContent: '<!DOCTYPE html><html><head><title></title><style>*{outline:0;margin:0;padding:0}.banner-container{position:relative;top:0;left:0;width:auto;height:auto;display:inline-block;box-sizing:border-box;max-width:600px;max-height:600px;overflow:visible;text-align:center;margin:20px}.outer-container{position:fixed;display:table;width:100%;height:100%;top:0;left:0}.blur-bg{position:fixed;display:block;opacity:0.75;width:100%;height:100%;top:0;left:0}.inner-container{display:table-cell;vertical-align:middle;text-align:center}.banner-image{width:100%;height:100%}.cta-button-container{position:relative;display:block;bottom:50px;font-family:arial;font-size:14px}.cta-button{display:inline-block;padding:4px 10px 4px 10px;border-radius:4px;cursor:pointer}.allow{background:#FF0029}.block{background:#CBF1FC}.close-button{position:absolute;right:-16px;top:-16px;width:32px;height:32px;background-repeat:no-repeat !important;background-size:contain !important;cursor:pointer}.spacer-div{position:relative;display:inline-block;width:50px;height:10px}</style> <script>var vizOptinTemplate={"optinData":{"image":"//cdn25.lemnisk.co/ssp/Banking_Demo_DMP/b698f497-1c2e-4239-9e1e-ae5274948858.png","allowButtonText":"<div><span style=\\"font-size: 12pt;\\"><span style=\\"color: #ffffff;\\">Allow</span></span></div>","blockButtonText":"<p><span style=\\"color: #999999; font-size: 12pt;\\">Later</span></p>","allowButtonColor":"#313431","blockButtonColor":"transparent","enableBlurBG":"true","blurBGColor":"#b7b4b4","placementPosition":"TL","fallbackImage":"//cdn25.vizury.com/ssp/subscribe.png","closeImage":"//cdn25.vizury.com/ssp/static/images/close.png"},renderBanner:function(){var bannerImage,outerContainer,innerContainer,bannerContainer,blurBG,ctaButtonContainer,allowButton,spacerDiv,blockButton,closeButton;outerContainer=vizOptinTemplate.generateElements("div","outer-container",document.body,"outerContainer");if(vizOptinTemplate.optinData.enableBlurBG&&vizOptinTemplate.optinData.enableBlurBG==="true"){blurBG=vizOptinTemplate.generateElements("div","blur-bg",outerContainer,"");if(vizOptinTemplate.optinData.blurBGColor){blurBG.style.background=vizOptinTemplate.optinData.blurBGColor;}} innerContainer=vizOptinTemplate.generateElements("div","inner-container",outerContainer,"");bannerContainer=vizOptinTemplate.generateElements("div","banner-container",innerContainer,"");bannerImage=vizOptinTemplate.generateElements("img","banner-image",bannerContainer,"");if(vizOptinTemplate.optinData){if(vizOptinTemplate.optinData.image&&vizOptinTemplate.optinData.allowButtonText&&vizOptinTemplate.optinData.blockButtonText){bannerImage.src=vizOptinTemplate.optinData.image;bannerImage.onerror=vizOptinTemplate.loadFallbackBanner(this);ctaButtonContainer=vizOptinTemplate.generateElements("div","cta-button-container",bannerContainer,"ctaButtonContainer");allowButton=vizOptinTemplate.generateElements("div","cta-button allow",ctaButtonContainer,"");allowButton.innerHTML=vizOptinTemplate.optinData.allowButtonText;if(vizOptinTemplate.optinData.allowButtonColor){allowButton.style.background=vizOptinTemplate.optinData.allowButtonColor;} allowButton.onclick=function(){parent.__vizpush.allow();};spacerDiv=vizOptinTemplate.generateElements("div","spacer-div",ctaButtonContainer,"");blockButton=vizOptinTemplate.generateElements("div","cta-button block",ctaButtonContainer,"");blockButton.innerHTML=vizOptinTemplate.optinData.blockButtonText;if(vizOptinTemplate.optinData.blockButtonColor){blockButton.style.background=vizOptinTemplate.optinData.blockButtonColor;} blockButton.onclick=function(){parent.__vizpush.later();};closeButton=vizOptinTemplate.generateElements("div","close-button",bannerContainer,"");closeButton.style.background="url(\'"+vizOptinTemplate.optinData.closeImage+"\')";closeButton.onclick=function(){parent.__vizpush.cross();};}else{vizOptinTemplate.loadFallbackBanner(bannerImage);}} vizOptinTemplate.placeBanner(innerContainer);},placeBanner:function(containerElement){if(vizOptinTemplate.optinData.placementPosition){if(vizOptinTemplate.optinData.placementPosition==="TL"){containerElement.style.verticalAlign="top";containerElement.style.textAlign="left";}else if(vizOptinTemplate.optinData.placementPosition==="TC"){containerElement.style.verticalAlign="top";}else if(vizOptinTemplate.optinData.placementPosition==="TR"){containerElement.style.verticalAlign="top";containerElement.style.textAlign="right";}}},loadFallbackBanner:function(imageElement){var element;element=document.getElementById("ctaButtonContainer");if(element){element.display="none";} imageElement.onerror=null;imageElement.src=vizOptinTemplate.optinData.fallbackImage;},generateElements:function(elementName,cls,parent,id){var tag;tag=document.createElement(elementName);if(id!="") tag.id=id;if(cls!="") tag.className=cls;parent.appendChild(tag);return tag;}};</script> <body onload="vizOptinTemplate.renderBanner()"></body></body></html>',
  getCookie: function(cookieId) {
    var cookies = document.cookie;
    if (!cookieId) {
      return '';
    }
    var cookieArray = cookies.split(';');
    for (var key in cookieArray) {
      if (cookieArray.hasOwnProperty(key)) {
        var matchArray = cookieArray[key].match(/\s*(.*)=(.*)/);
        if (matchArray) {
          if (matchArray[1] === cookieId &amp;&amp; matchArray[2]) {
            return decodeURIComponent(matchArray[2]);
          }
        }
      }
    }
    return '';
  },
  setCookie: function(c_name, value, exdays, domain) {
    var domainStr = domain ? domain : __vizpush.domain;
    if (exdays &amp;&amp; exdays &gt; 0) {
      var exdate = new Date();
      exdate.setDate(exdate.getDate() + exdays);
      var c_value = encodeURIComponent(value) + '; expires=' + exdate.toUTCString() + '; path=/';
      if (domainStr) {
        c_value +=  '; domain=' + domainStr;
      }
      document.cookie = c_name + '=' + c_value;
    } else {
      document.cookie = c_name + '=' + encodeURIComponent(value);
    }
  },
  createDivElement: function() {
    var tempDiv = document.createElement('div');
    tempDiv.id = __vizpush.ContainerHtmlId;
    document.body.appendChild(tempDiv);
    __vizpush.SetDivContent();
  },
  close: function() {
    var customOptin = document.getElementById('http-push');
    if (customOptin) {
      customOptin.style.display = 'none';
    }
  },
  showOptin: function() {
    if (!__vizpush.mobileOnly || (__vizpush.mobileOnly 
      &amp;&amp; /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))) {
      return true;
    }
    return false;
  },
  SetDivContent: function(con) {
    var div = document.getElementById(__vizpush.ContainerHtmlId);
    div.innerHTML = __vizpush.cont;
    __vizpush.SetIframeContent(__vizpush.iframeContent);
    __vizpush.IdentifyEvent();
  },
  SetIframeContent: function(con) {
    var doc = document.getElementById('http-push').contentWindow.document;
    doc.open();
    doc.write('<!DOCTYPE html>
');
    doc.write(con);
    doc.close();
    __vizpush.IframeEle = parent.document.getElementById('http-push');
  },
  transAnimationTopAndBottom: function(element, position, startvalue, endvalue) {
    var interval = setInterval(function() {
      element.style[position] = startvalue + 'px';
      if (endvalue &lt; 0) {
        startvalue -= 2;
        if (startvalue &lt; endvalue) {
          element.style[position] = endvalue + 'px';
          clearInterval(interval);
        }
      } else {
        startvalue += 2;
        if (startvalue &gt; endvalue) {
          element.style[position] = endvalue + 'px';
          clearInterval(interval);
        }
      }
    }, 1);
  },
  triggerNotiBottom: function(ele, startvalue) {
    __vizpush.transAnimationTopAndBottom(ele, 'bottom', startvalue, 0);
  },
  triggerNotiTop: function(ele, startvalue) {
    __vizpush.transAnimationTopAndBottom(ele, 'top', startvalue, 0);
  },
  IdentifyEvent: function() {
    __vizpush.IframeEle.style.top = '-136px';
    setTimeout(function() {
      __vizpush.triggerNotiTop(__vizpush.IframeEle, parseInt('-136px'));
    }, 1);
  },
  hasPushSupport: function() {
    if (/Chrome\/([0-9]+)\./.test(navigator.userAgent) &amp;&amp; /Google Inc/.test(navigator.vendor) &amp;&amp; !/OPR\/([0-9]+)\./.test(navigator.userAgent)) {
      var ver = navigator.userAgent.match(/Chrome\/([0-9]+)\./)[1];
      if (ver &gt;= 50) {
        return true;
      }
    } else if (/Firefox\/([0-9]+)\./.test(navigator.userAgent)) {
      var ver = navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1];
      if (ver &gt;= 46) {
        return true;
      }
    } else if (/OPR\/([0-9]+)\./.test(navigator.userAgent)) {
      var ver = navigator.userAgent.match(/OPR\/([0-9]+)\./)[1];
      if (ver &gt;= 48) {
        return true;
      }
    }
    else if ("safari" in window) {
      return true;
     }
    return false;
  },
  logState: function(action, isMetricLog, type) {
    var notify = '';
    if (__vizpush.prevState !== action) {
      __vizpush.setCookie(__vizpush.stateCookie, action, 1);
      var origin = encodeURIComponent(document.URL);
      var query_params = '?version=' + __vizpush.version + '&amp;advid=' + __vizpush.advid + '&amp;action=' + action +'&amp;origin=' +origin;
      if (!isMetricLog) {
        notify = 'https://' + __vizpush.target + '/analyze/subMap' + query_params;
      } else {
        if (type === 'custom') {
          query_params += '&amp;type=HTTPSCO';
        }
        notify = 'https://' + __vizpush.target + '/analyze/optinInfo' + query_params;
      }
      if (__vizpush.first) {
        notify = notify + '&amp;useraction=1';
      }
      fetch(notify, {
        credentials: 'include'
      })
    }
  },
  logError: function(err) {
    var message = encodeURIComponent(err);
    var notify = 'https://' + __vizpush.target + '/analyze/error?message=' + message + '&amp;advid=' + __vizpush.advid + '&amp;version=' + __vizpush.version;
    fetch(notify, {
      credentials: 'include'
    })
  },
  logEvent: function(engid, tag, action, ts) {
    var notify = 'https://' + __vizpush.target + '/analyze/notification?' + '&amp;version=' + __vizpush.version + '&amp;engid=' + engid + '&amp;action=' + action + '&amp;tag=' + tag + '&amp;ts=' + ts + '&amp;advid=' + __vizpush.advid;
    fetch(notify, {
      credentials: 'include'
    })
  },
  dismissNotification: function(registration, data) {
    setTimeout(function() {
      registration.getNotifications().then(function(nots) {
        var epoch = (new Date).getTime();
        for (var i = 0; i &lt; nots.length; i++) {
          if (nots[i].data.uuid === __vizpush.uuid) { // check if the uuid is matching
            nots[i].close();
            logEvent(data.engid, data.uuid, 'DISMISS', epoch);
          }
        }
      });
    }, __vizpush.timeout);
  },
  sendWlPush : function(reg) {
    var epoch = (new Date).getTime();
    __vizpush.uuid = __vizpush.getUuid();
    var options = {
      body: notData.body,
      tag: "wln",
      icon: notData.icon,
      requireInteraction: true,
      data: {
        url: notData.lp,
        ts: epoch,
        engid: -1,
        uuid: __vizpush.uuid,
        orchestrated: 0
      }
    };
    if (notData.image &amp;&amp; notData.image.enabled) {
      options.image = notData.image.url;
    }
    if (notData.button &amp;&amp; notData.button.enabled) {
      var cta = notData.button.cta;
      options.actions = cta;
      for (var i = 1; i &lt;= options.actions.length; i++) {
        options.actions[i - 1].action = "cta" + i;
        options.data[__vizpush.ctaUrls[i - 1]] = options.actions[i - 1].lp;
      }
    }
    reg.showNotification(notData.title, options).then(function() {}).then(function() {
      __vizpush.logEvent(options.data.engid, options.data.uuid, 'PUSH', epoch);
      __vizpush.dismissNotification(reg, options.data);
    }).catch(function(err) {
      __vizpush.logError(err.message);
    });
  },
  S4: function() {
    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
  },
  getUuid: function() {
    return (__vizpush.S4() + __vizpush.S4() + '-' + __vizpush.S4() + '-4' + __vizpush.S4().substr(0, 3) + '-' + __vizpush.S4() + '-' + __vizpush.S4() + __vizpush.S4() + __vizpush.S4()).toLowerCase();
  },
  safariWebPush : function() {
    var getCookieData = function(cookieName) {
      var cookies = document.cookie;
      var regex = new RegExp(cookieName + "=(.[^;]*);?");
      if (regex.test(cookies)) {
        return JSON.parse(cookies.match(regex)[1]);
      }
      return JSON.parse('{}');
    }
    var checkRemotePermission = function(permissionData) {
      if (permissionData.permission === 'default') {
        var vizid = __vizpush.getCookie('_vz');
        if (vizid != "") {
          try {
            window.safari.pushNotification.requestPermission(
              'https://us-pl.lemnisk.co/sfpush',
              __vizpush.safariPushId, 
              { "vizid": vizid, "campaignId": __vizpush.advid.replace("VIZVRM", "") },
               checkRemotePermission
          );
          } catch (e) {
          }
        }
      } else if (permissionData.permission === 'denied') {
        //notSubscribed('BL');
      } else if (permissionData.permission === 'granted') {
        if (__vizpush.getCookie('_vzhb') == "") {
          var vizid = __vizpush.getCookie('_vz');
          if (vizid != "") {
            var deviceId = permissionData.deviceToken;
            if (deviceId !== undefined &amp;&amp; vizid !== undefined &amp;&amp; __vizpush.advid !== undefined) {
              var heartbeatUrl = "//us-pl.lemnisk.co/sfpush/map?deviceId=" + deviceId + "&amp;vizid=" + vizid + "&amp;campaignId=" +  __vizpush.advid.replace("VIZVRM", "");
              var image = document.createElement('img');
              image.src = heartbeatUrl;
              image.width = 0;
              image.height = 0;
              image.style.display = 'none';
              document.getElementsByTagName("html")[0].appendChild(image);
              var now = new Date();
              var time = now.getTime();
              time += 24 * 3600 * 1000;
              now.setTime(time);
              document.cookie = "_vzhb=1; expires=" + now.toUTCString() + "; path=/";
            }
          }
        }
      } else {}
    };
  
    var protocol = window.location.protocol;
      if ('safari' in window &amp;&amp; 'pushNotification' in window.safari &amp;&amp; window.__vizpush.safariPushId.indexOf('web.') !== -1) {
        var permissionData = window.safari.pushNotification.permission(window.__vizpush.safariPushId);
        checkRemotePermission(permissionData);
      } else if (protocol === 'https:') {
        if(typeof Notification !== 'undefined'){
          if (Notification &amp;&amp; Notification.permission === "default") {
            cookie_data = getCookieData(__vizpush.intervalCookie);
            if (cookie_data.last_shown &amp;&amp; cookie_data.shown_count) {
              var last_shown_date = new Date(cookie_data.last_shown);
              var current_date = new Date();
              difference_mins = getTimeDifference(last_shown_date, current_date);
              shown_count = (difference_mins &gt; 1440) ? 0 : cookie_data.shown_count;
            } else {
              difference_mins =__vizpush.interval+1;
              shown_count = 0;
            }
            if (difference_mins &gt; __vizpush.interval &amp;&amp; shown_count &lt; __vizpush.optinPerDay) {
              shown_count++;
              setCookieData(__vizpush.intervalCookie);
              doSubscribe();
            }
          } else {
            if (!isCookiePresent(submapCookie)) {
              var currentTime = new Date();
              currentTime.setTime(currentTime.getTime() + (24 * 60 * 60 * 1000));
              document.cookie = submapCookie + "=1; expires=" + currentTime.toUTCString() + "; path=/";
              doSubscribe();
            }
          }
        } else {
          notSubscribed('NS');
        }
      }
    },

  migrate: function() {
    var isPresent = false;
    navigator.serviceWorker.getRegistrations().then(function(r) {
      for (var i = 0; i &lt; r.length; i++) {
        if (r[i].scope.indexOf(__vizpush.migDomain) &gt; -1) {
          isPresent = true;
          r[i].unregister().then(function(flag) {
            if (flag === true) {
              __vizpush.register();
            }
          });
          break;
        }
      }
      if (!isPresent) {
        __vizpush.register();
      }
      __vizpush.setCookie(__vizpush.fcmMigCookie, 1, 1460);
    }).catch(function(err) {
      __vizpush.logError(err.message);
    });
  },
  register: function() {
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register(__vizpush.swLoc).then(function(reg) {
        if (/\/\w+\//.test(__vizpush.swLoc)) {
          var serviceWorker;
          if (reg.installing) {
            serviceWorker = reg.installing;
          } else if (reg.waiting) {
            serviceWorker = reg.waiting;
          } else if (reg.active) {
            serviceWorker = reg.active;
          }
          if (serviceWorker) {
            if (serviceWorker.state == 'activated') {
              __vizpush.genSubscription(reg);
            }
            serviceWorker.addEventListener('statechange', function(e) {
              if (e.target.state == 'activated') {
                __vizpush.genSubscription(reg);
              }
            });
          }
        } else {
          navigator.serviceWorker.ready
            .then(function() {
              __vizpush.genSubscription(reg);
            }).catch(function(err) {
              __vizpush.logState('NS');
              __vizpush.logError(err.message);
            });
        }
      }).catch(function(err) {
        __vizpush.logError(err.message);
      });
    } else {
      __vizpush.logState('NS');
    }
  },
  urlBase64ToUint8Array: function (base64String) {
    const padding = '='.repeat((4 - base64String.length % 4) % 4);
    const base64 = (base64String + padding).replace(/\-/g, '+').replace(/_/g, '/');
    const rawData = window.atob(base64);
    const outputArray = new Uint8Array(rawData.length);

    for (let i = 0; i &lt; rawData.length; ++i) {
      outputArray[i] = rawData.charCodeAt(i);
    }
    return outputArray;
  },
  genSubscription: function(reg) {
    reg.pushManager.getSubscription().then(function(subscription) {
      if (Notification.permission == 'default') {
        __vizpush.first = true;
        __vizpush.logState('OP', 1, 'native');
      }
      const convertedVapidKey = __vizpush.urlBase64ToUint8Array(__vizpush.vapidPublicKey);
      reg.pushManager.subscribe({
        userVisibleOnly: true,
        applicationServerKey: convertedVapidKey
      }).then(function(subscription) {
        var rawKey = subscription.getKey ? subscription.getKey('p256dh') : '';
        var key = rawKey ? btoa(String.fromCharCode.apply(null, new Uint8Array(rawKey))) : '';
        var rawAuthSecret = subscription.getKey ? subscription.getKey('auth') : '';
        var authSecret = rawAuthSecret ? btoa(String.fromCharCode.apply(null, new Uint8Array(rawAuthSecret))) : '';
        var endpoint = subscription.endpoint;
        endpoint = encodeURIComponent(endpoint);
        key = encodeURIComponent(key);
        authSecret = encodeURIComponent(authSecret);
        if (endpoint &amp;&amp; key &amp;&amp; authSecret) {
          if (__vizpush.prevState !== 'AL') {
            __vizpush.setCookie(__vizpush.stateCookie, 'AL', 1);
            var origin = encodeURIComponent(document.URL);
            var notify = 'https://' + __vizpush.target + '/analyze/subMap?subid=' + endpoint + '&amp;auth=' + authSecret + '&amp;key=' + key + '&amp;version=' + __vizpush.version + '&amp;advid=' + __vizpush.advid + '&amp;action=AL' +'&amp;origin=' +origin + '&amp;ck=' + __vizpush.getCookie(__vizpush.fpc);
            if (__vizpush.first) {
              notify = notify + '&amp;useraction=1';
              if (wlcmEnabled) {
                __vizpush.sendWlPush(reg);
              }
            }
            fetch(notify, {
              credentials: 'include'
            })
          }
        } else {
          __vizpush.logState('NS');
        }
      }).catch(function(err) {
        if (Notification.permission === 'denied') {
          __vizpush.logState('BL');
        } else if (Notification.permission === 'default' &amp;&amp; /denied/.test(err)) {
          __vizpush.setCookie(__vizpush.dailyCookie, 1, 1);
          __vizpush.logState('CL');
        } else {
          __vizpush.logState('NS');
        }
        __vizpush.logError(err.message);
      });
    }).catch(function(err) {
      __vizpush.logState('NS');
      __vizpush.logError(err.message);
    });
  },
  later: function() {
    __vizpush.close();
    __vizpush.setCookie(__vizpush.dailyCookie, 1, 1);
    __vizpush.logState('BL', 1, 'custom');
  },
  cross: function() {
    __vizpush.close();
    __vizpush.setCookie(__vizpush.dailyCookie, 1, 1);
    __vizpush.logState('CL', 1, 'custom');
  },
  allow: function(isHeartBeat) {
    if (!isHeartBeat) {
      __vizpush.close();
      __vizpush.logState('AL', 1, 'custom');
    }
    if('safari' in window) {
      __vizpush.safariWebPush();
    } else {
      if (!__vizpush.fcmMigState) {
        __vizpush.migrate();
      } else {
      __vizpush.register();
      }
    }
  },
  getBrowserName: function () {
    if (typeof InstallTrigger !== 'undefined') {
      return "firefox";
    } 
    else if ((/constructor/i.test(window.HTMLElement) || (function(p) {
            return p.toString() === "[object SafariRemoteNotification]";
        })(!window['safari'] || (typeof safari !== 'undefined' &amp;&amp; safari.pushNotification))) || (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') &gt; 0)) {
        return "safari";
    }
     else {
        var isIE = false || !!document.documentMode;

        var isEdge = !isIE &amp;&amp; !!window.StyleMedia || navigator.userAgent.indexOf("Edg") != -1;

        var isOpera = (!!window.opr &amp;&amp; !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') &gt;= 0;

        var isChrome = (!isEdge || !isOpera) &amp;&amp; !!window.chrome;

        if (isIE &amp;&amp; !isEdge) {
            return "ie";
        } else if (isEdge) {
            return "edge";
        } else if (isOpera) {
            return "opera";
        } else if (isChrome) {
            return "chrome";
        } else {
            return "";
        }
    }
  },
  init: function() {
    var dailyCookie = __vizpush.getCookie(__vizpush.dailyCookie);
    if (!dailyCookie &amp;&amp; document.location.protocol === 'https:' &amp;&amp; __vizpush.showOptin()) {
      __vizpush.prevState = __vizpush.getCookie(__vizpush.stateCookie);
      __vizpush.migState = __vizpush.getCookie(__vizpush.migCookie);
      __vizpush.fcmMigState = __vizpush.getCookie(__vizpush.fcmMigCookie);
      var isCallInitiated = false;
      document.onreadystatechange = function() {
        if (/interactive|complete/i.test(document.readyState) &amp;&amp; !isCallInitiated) {
          isCallInitiated = true;
          const currBrowser = __vizpush.getBrowserName();
          if (Notification.permission == 'default' &amp;&amp; (__vizpush.isCOActive || __vizpush.coIntendedBrowsersList.indexOf(currBrowser) &gt; -1)) {
            if (__vizpush.hasPushSupport()) {
              __vizpush.prevState = '';
              __vizpush.createDivElement();
              __vizpush.logState('OP', 1, 'custom');
            } else {
              if (!__vizpush.getCookie(__vizpush.pushSuppCookie)) {
                __vizpush.setCookie(__vizpush.pushSuppCookie, 1, 365);
                __vizpush.logState('NS');
              }
            }
          } else {
            if (!__vizpush.isCOActive &amp;&amp; Notification.permission == 'default') {
              __vizpush.prevState = '';
              __vizpush.logState('OC', 1);
            }
            if (__vizpush.prevState !== '' || __vizpush.meta.group === 'cgA') {
              __vizpush.allow(true);
            } else {
              if (__vizpush.meta.group === 'cgB') {
                __vizpush.scrollEvent(__vizpush.scrollPercentage);
              } else {
                setTimeout(function () {
                  __vizpush.allow(true);
                }, __vizpush.optinWaitTime);
              }
            }
          }
        }
      }
    }
  }
};
__vizpush.init();




