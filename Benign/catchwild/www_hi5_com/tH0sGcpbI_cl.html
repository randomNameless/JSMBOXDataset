<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tH0sGcpbI_cl.html</title>
</head>
<body>

<script>
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(d){var b=0;return function(){return b<d.length?{done:!1,value:d[b++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,b,l){if(d==Array.prototype||d==Object.prototype)return d;d[b]=l.value;return d};$jscomp.getGlobal=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<d.length;++b){var l=d[b];if(l&&l.Math==Math)return l}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(d,b){var l=$jscomp.propertyToPolyfillSymbol[b];if(null==l)return d[b];l=d[l];return void 0!==l?l:d[b]};
$jscomp.polyfill=function(d,b,l,q){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(d,b,l,q):$jscomp.polyfillUnisolated(d,b,l,q))};$jscomp.polyfillUnisolated=function(d,b,l,q){l=$jscomp.global;d=d.split(".");for(q=0;q<d.length-1;q++){var a=d[q];if(!(a in l))return;l=l[a]}d=d[d.length-1];q=l[d];b=b(q);b!=q&&null!=b&&$jscomp.defineProperty(l,d,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(d,b,l,q){var a=d.split(".");d=1===a.length;q=a[0];q=!d&&q in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var c=0;c<a.length-1;c++){var y=a[c];if(!(y in q))return;q=q[y]}a=a[a.length-1];l=$jscomp.IS_SYMBOL_NATIVE&&"es6"===l?q[a]:null;b=b(l);null!=b&&(d?$jscomp.defineProperty($jscomp.polyfills,a,{configurable:!0,writable:!0,value:b}):b!==l&&(void 0===$jscomp.propertyToPolyfillSymbol[a]&&(l=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[a]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(a):$jscomp.POLYFILL_PREFIX+l+"$"+a),$jscomp.defineProperty(q,$jscomp.propertyToPolyfillSymbol[a],{configurable:!0,writable:!0,value:b})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(d){if(d)return d;var b=function(c,y){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:y})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var l="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",q=0,a=function(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new b(l+(c||"")+"_"+q++,c)};return a},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),l=0;l<b.length;l++){var q=$jscomp.global[b[l]];"function"===typeof q&&"function"!=typeof q.prototype[d]&&$jscomp.defineProperty(q.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return d},"es6",
"es3");$jscomp.iteratorPrototype=function(d){d={next:d};d[Symbol.iterator]=function(){return this};return d};
!function(d){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=d();else if("function"==typeof define&&define.amd)define([],d);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self);b.Promise=d()}}(function(){return function a(b,l,q){function c(m,t){if(!l[m]){if(!b[m]){var v="function"==typeof _dereq_&&_dereq_;if(!t&&v)return v(m,!0);if(y)return y(m,!0);t=Error("Cannot find module '"+m+"'");throw t.code="MODULE_NOT_FOUND",
t;}t=l[m]={exports:{}};b[m][0].call(t.exports,function(k){var e=b[m][1][k];return c(e?e:k)},t,t.exports,a,b,l,q)}return l[m].exports}for(var y="function"==typeof _dereq_&&_dereq_,p=0;p<q.length;p++)c(q[p]);return c}({1:[function(b,l,q){l.exports=function(a){function c(p){p=new y(p);var m=p.promise();return p.setHowMany(1),p.setUnwrap(),p.init(),m}var y=a._SomePromiseArray;a.any=function(p){return c(p)};a.prototype.any=function(){return c(this)}}},{}],2:[function(b,l,q){function a(){this._isTickUsed=
!1;this._lateQueue=new t(16);this._normalQueue=new t(16);this._haveDrainedQueues=!1;this._trampolineEnabled=!0;var k=this;this.drainQueues=function(){k._drainQueues()};this._schedule=m}function c(k,e,g){this._lateQueue.push(k,e,g);this._queueTick()}function y(k,e,g){this._normalQueue.push(k,e,g);this._queueTick()}function p(k){this._normalQueue._pushOne(k);this._queueTick()}try{throw Error();}catch(k){q=k}var m=b("./schedule"),t=b("./queue"),v=b("./util");a.prototype.enableTrampoline=function(){this._trampolineEnabled=
!0};a.prototype.disableTrampolineIfNecessary=function(){v.hasDevTools&&(this._trampolineEnabled=!1)};a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues};a.prototype.fatalError=function(k,e){e?(process.stderr.write("Fatal "+(k instanceof Error?k.stack:k)+"\n"),process.exit(2)):this.throwLater(k)};a.prototype.throwLater=function(k,e){if(1===arguments.length&&(e=k,k=function(){throw e;}),"undefined"!=typeof setTimeout)setTimeout(function(){k(e)},0);else try{this._schedule(function(){k(e)})}catch(g){throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");
}};v.hasDevTools?(a.prototype.invokeLater=function(k,e,g){this._trampolineEnabled?c.call(this,k,e,g):this._schedule(function(){setTimeout(function(){k.call(e,g)},100)})},a.prototype.invoke=function(k,e,g){this._trampolineEnabled?y.call(this,k,e,g):this._schedule(function(){k.call(e,g)})},a.prototype.settlePromises=function(k){this._trampolineEnabled?p.call(this,k):this._schedule(function(){k._settlePromises()})}):(a.prototype.invokeLater=c,a.prototype.invoke=y,a.prototype.settlePromises=p);a.prototype.invokeFirst=
function(k,e,g){this._normalQueue.unshift(k,e,g);this._queueTick()};a.prototype._drainQueue=function(k){for(;0<k.length();){var e=k.shift();if("function"==typeof e){var g=k.shift(),n=k.shift();e.call(g,n)}else e._settlePromises()}};a.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=!0;this._drainQueue(this._lateQueue)};a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))};a.prototype._reset=
function(){this._isTickUsed=!1};l.exports=a;l.exports.firstLineError=q},{"./queue":26,"./schedule":29,"./util":36}],3:[function(b,l,q){l.exports=function(a,c,y,p){var m=!1,t=function(g,n){this._reject(n)},v=function(g,n){n.promiseRejectionQueued=!0;n.bindingPromise._then(t,t,null,this,g)},k=function(g,n){0===(50397184&this._bitField)&&this._resolveCallback(n.target)},e=function(g,n){n.promiseRejectionQueued||this._reject(g)};a.prototype.bind=function(g){m||(m=!0,a.prototype._propagateFrom=p.propagateFromFunction(),
a.prototype._boundValue=p.boundValueFunction());g=y(g);var n=new a(c);n._propagateFrom(this,1);var w=this._target();if(n._setBoundTo(g),g instanceof a){var x={promiseRejectionQueued:!1,promise:n,target:w,bindingPromise:g};w._then(c,v,void 0,n,x);g._then(k,e,void 0,n,x);n._setOnCancel(g)}else n._resolveCallback(w);return n};a.prototype._setBoundTo=function(g){void 0!==g?(this._bitField|=2097152,this._boundTo=g):this._bitField&=-2097153};a.prototype._isBound=function(){return 2097152===(2097152&this._bitField)};
a.bind=function(g,n){return a.resolve(n).bind(g)}}},{}],4:[function(b,l,q){var a;"undefined"!=typeof Promise&&(a=Promise);var c=b("./promise")();c.noConflict=function(){try{Promise===c&&(Promise=a)}catch(y){}return c};l.exports=c},{"./promise":22}],5:[function(b,l,q){var a=Object.create;a&&(q=a(null),a=a(null),q[" size"]=a[" size"]=0);l.exports=function(c){function y(k){var e=this.pop(),g;if(null!=k&&(g=k[e]),"function"!=typeof g)throw k="Object "+t.classString(k)+" has no method '"+t.toString(e)+
"'",new c.TypeError(k);return g.apply(k,this)}function p(k){return k[this]}function m(k){var e=+this;return 0>e&&(e=Math.max(0,e+k.length)),k[e]}var t=b("./util"),v=t.canEvaluate;t.isIdentifier;c.prototype.call=function(k){var e=[].slice.call(arguments,1);return e.push(k),this._then(y,void 0,void 0,e,void 0)};c.prototype.get=function(k){if("number"==typeof k)var e=m;else v?(e=(void 0)(k),e=null!==e?e:p):e=p;return this._then(e,void 0,void 0,k,void 0)}}},{"./util":36}],6:[function(b,l,q){l.exports=
function(a,c,y,p){var m=b("./util"),t=m.tryCatch,v=m.errorObj,k=a._async;a.prototype["break"]=a.prototype.cancel=function(){if(!p.cancellation())return this._warn("cancellation is disabled");for(var e=this,g=e;e.isCancellable();){if(!e._cancelBy(g)){g._isFollowing()?g._followee().cancel():g._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n.isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel();g=e;e=n}};a.prototype._branchHasCancelled=
function(){this._branchesRemainingToCancel--};a.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||0>=this._branchesRemainingToCancel};a.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)};a.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()};a.prototype._cancel=
function(){this.isCancellable()&&(this._setCancelled(),k.invoke(this._cancelPromises,this,void 0))};a.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()};a.prototype._unsetOnCancel=function(){this._onCancelField=void 0};a.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};a.prototype._doInvokeOnCancel=function(e,g){if(m.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],g);else void 0!==e&&("function"==typeof e?g||(e=t(e).call(this._boundValue()),
e===v&&(this._attachExtraTrace(e.e),k.throwLater(e.e))):e._resultCancelled(this))};a.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel();k.invoke(this._doInvokeOnCancel,this,e)};a.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())};a.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(b,l,q){l.exports=function(a){var c=b("./util"),y=b("./es5").keys,p=c.tryCatch,
m=c.errorObj;return function(t,v,k){return function(e){var g=k._boundValue(),n=0;a:for(;n<t.length;++n){var w=t[n];if(w===Error||null!=w&&w.prototype instanceof Error){if(e instanceof w)return p(v).call(g,e)}else if("function"==typeof w){w=p(w).call(g,e);if(w===m)return w;if(w)return p(v).call(g,e)}else if(c.isObject(e)){for(var x=y(w),u=0;u<x.length;++u){var z=x[u];if(w[z]!=e[z])continue a}return p(v).call(g,e)}}return a}}}},{"./es5":13,"./util":36}],8:[function(b,l,q){l.exports=function(a){function c(){this._trace=
new c.CapturedTrace(y())}function y(){var t=m.length-1;return 0<=t?m[t]:void 0}var p=!1,m=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},c.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,m.push(this._trace))},c.prototype._popContext=function(){if(void 0!==this._trace){var t=m.pop(),v=t._promiseCreated;return t._promiseCreated=
null,v}return null},c.CapturedTrace=null,c.create=function(){return p?new c:void 0},c.deactivateLongStackTraces=function(){},c.activateLongStackTraces=function(){var t=a.prototype._pushContext,v=a.prototype._popContext,k=a._peekContext,e=a.prototype._peekContext,g=a.prototype._promiseCreated;c.deactivateLongStackTraces=function(){a.prototype._pushContext=t;a.prototype._popContext=v;a._peekContext=k;a.prototype._peekContext=e;a.prototype._promiseCreated=g;p=!1};p=!0;a.prototype._pushContext=c.prototype._pushContext;
a.prototype._popContext=c.prototype._popContext;a._peekContext=a.prototype._peekContext=y;a.prototype._promiseCreated=function(){var n=this._peekContext();n&&null==n._promiseCreated&&(n._promiseCreated=this)}},c}},{}],9:[function(b,l,q){l.exports=function(a,c){function y(r,B){return{promise:B}}function p(){return!1}function m(r,B,J){var H=this;try{r(B,J,function(P){if("function"!=typeof P)throw new TypeError("onCancel must be a function, got: "+f.toString(P));H._attachCancellationCallback(P)})}catch(P){return P}}
function t(r){if(!this.isCancellable())return this;var B=this._onCancel();void 0!==B?f.isArray(B)?B.push(r):this._setOnCancel([B,r]):this._setOnCancel(r)}function v(){return this._onCancelField}function k(r){this._onCancelField=r}function e(){this._onCancelField=this._cancellationParent=void 0}function g(r,B){if(0!==(1&B)){this._cancellationParent=r;var J=r._branchesRemainingToCancel;void 0===J&&(J=0);r._branchesRemainingToCancel=J+1}0!==(2&B)&&r._isBound()&&this._setBoundTo(r._boundTo)}function n(){var r=
this._boundTo;return void 0!==r&&r instanceof a?r.isFulfilled()?r.value():void 0:r}function w(){this._trace=new L(this._peekContext())}function x(r,B){if(D(r)){var J=this._trace;(void 0!==J&&B&&(J=J._parent),void 0!==J)?J.attachExtraTrace(r):r.__stackCleaned__||(B=E(r),f.notEnumerableProp(r,"stack",B.message+"\n"+B.stack.join("\n")),f.notEnumerableProp(r,"__stackCleaned__",!0))}}function u(r,B,J){if(X.warnings){var H;r=new V(r);B?J._attachExtraTrace(r):X.longStackTraces&&(H=a._peekContext())?H.attachExtraTrace(r):
(B=E(r),r.stack=B.message+"\n"+B.stack.join("\n"));ea("warning",r)||h(r,"",!0)}}function z(r){for(var B=[],J=0;J<r.length;++J){var H=r[J],P="    (No stack trace)"===H||M.test(H),Q=P&&ha(H);P&&!Q&&(S&&" "!==H.charAt(0)&&(H="    "+H),B.push(H))}return B}function E(r){var B=r.stack,J=r.toString(),H;if("string"==typeof B&&0<B.length){r=r.stack.replace(/\s+$/g,"").split("\n");for(H=0;H<r.length;++H){var P=r[H];if("    (No stack trace)"===P||M.test(P))break}H=(0<H&&(r=r.slice(H)),r)}else H=["    (No stack trace)"];
return B=H,{message:J,stack:z(B)}}function h(r,B,J){"undefined"!=typeof console&&(r=f.isObject(r)?B+O(r.stack,r):B+String(r),"function"==typeof T?T(r,J):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r))}function A(r,B,J,H){var P=!1;try{"function"==typeof B&&(P=!0,"rejectionHandled"===r?B(H):B(J,H))}catch(Q){R.throwLater(Q)}"unhandledRejection"===r?ea(r,J,H)||P||h(J,"Unhandled rejection "):ea(r,H)}function C(r){if("function"==typeof r)var B="[function "+(r.name||"anonymous")+
"]";else{B=r&&"function"==typeof r.toString?r.toString():f.toString(r);if(/\[object [a-zA-Z0-9$_]+\]/.test(B))try{B=JSON.stringify(r)}catch(J){}0===B.length&&(B="(empty array)")}return"(<"+(41>B.length?B:B.substr(0,38)+"...")+">, no stack trace)"}function F(){return"function"==typeof ia}function I(r){return(r=r.match(ma))?{fileName:r[1],line:parseInt(r[2],10)}:void 0}function L(r){this._parent=r;this._promisesCreated=0;r=this._length=1+(void 0===r?0:r._length);ia(this,L);32<r&&this.uncycle()}var K,
N,T,U=a._getDomain,R=a._async,V=b("./errors").Warning,f=b("./util"),D=f.canAttachTrace,G=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,M=null,O=null,S=!1,Y=!(0==f.env("BLUEBIRD_DEBUG")||!f.env("BLUEBIRD_DEBUG")&&"development"!==f.env("NODE_ENV")),Z=!(0==f.env("BLUEBIRD_WARNINGS")||!Y&&!f.env("BLUEBIRD_WARNINGS"));Y=!(0==f.env("BLUEBIRD_LONG_STACK_TRACES")||!Y&&!f.env("BLUEBIRD_LONG_STACK_TRACES"));var aa=0!=f.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Z||!!f.env("BLUEBIRD_W_FORGOTTEN_RETURN"));
a.prototype.suppressUnhandledRejections=function(){var r=this._target();r._bitField=-1048577&r._bitField|524288};a.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),R.invokeLater(this._notifyUnhandledRejection,this,void 0))};a.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",K,void 0,this)};a.prototype._setReturnedNonUndefined=function(){this._bitField|=268435456};a.prototype._returnedNonUndefined=function(){return 0!==
(268435456&this._bitField)};a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var r=this._settledValue();this._setUnhandledRejectionIsNotified();A("unhandledRejection",N,r,this)}};a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField|=262144};a.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField&=-262145};a.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)};a.prototype._setRejectionIsUnhandled=function(){this._bitField|=
1048576};a.prototype._unsetRejectionIsUnhandled=function(){this._bitField&=-1048577;this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())};a.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)};a.prototype._warn=function(r,B,J){return u(r,B,J||this)};a.onPossiblyUnhandledRejection=function(r){var B=U();N="function"==typeof r?null===B?r:B.bind(r):void 0};a.onUnhandledRejectionHandled=function(r){var B=U();
K="function"==typeof r?null===B?r:B.bind(r):void 0};var da=function(){};a.longStackTraces=function(){if(R.haveItemsQueued()&&!X.longStackTraces)throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!X.longStackTraces&&F()){var r=a.prototype._captureStackTrace,B=a.prototype._attachExtraTrace;X.longStackTraces=!0;da=function(){if(R.haveItemsQueued()&&!X.longStackTraces)throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
a.prototype._captureStackTrace=r;a.prototype._attachExtraTrace=B;c.deactivateLongStackTraces();R.enableTrampoline();X.longStackTraces=!1};a.prototype._captureStackTrace=w;a.prototype._attachExtraTrace=x;c.activateLongStackTraces();R.disableTrampolineIfNecessary()}};a.hasLongStackTraces=function(){return X.longStackTraces&&F()};var ja=function(){try{var r=document.createEvent("CustomEvent");return r.initCustomEvent("testingtheevent",!1,!0,{}),f.global.dispatchEvent(r),function(B,J){var H=document.createEvent("CustomEvent");
return H.initCustomEvent(B.toLowerCase(),!1,!0,J),!f.global.dispatchEvent(H)}}catch(B){}return function(){return!1}}(),ka=function(){return f.isNode?function(){return process.emit.apply(process,arguments)}:f.global?function(r){var B="on"+r.toLowerCase();return(B=f.global[B])?(B.apply(f.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),na={promiseCreated:y,promiseFulfilled:y,promiseRejected:y,promiseResolved:y,promiseCancelled:y,promiseChained:function(r,B,J){return{promise:B,child:J}},
warning:function(r,B){return{warning:B}},unhandledRejection:function(r,B,J){return{reason:B,promise:J}},rejectionHandled:y},ea=function(r){var B=!1;try{B=ka.apply(null,arguments)}catch(H){R.throwLater(H),B=!0}var J=!1;try{J=ja(r,na[r].apply(null,arguments))}catch(H){R.throwLater(H),J=!0}return J||B};a.config=function(r){if(r=Object(r),"longStackTraces"in r&&(r.longStackTraces?a.longStackTraces():!r.longStackTraces&&a.hasLongStackTraces()&&da()),"warnings"in r){var B=r.warnings;X.warnings=!!B;aa=X.warnings;
f.isObject(B)&&"wForgottenReturn"in B&&(aa=!!B.wForgottenReturn)}if("cancellation"in r&&r.cancellation&&!X.cancellation){if(R.haveItemsQueued())throw Error("cannot enable cancellation after promises are in use");a.prototype._clearCancellationData=e;a.prototype._propagateFrom=g;a.prototype._onCancel=v;a.prototype._setOnCancel=k;a.prototype._attachCancellationCallback=t;a.prototype._execute=m;la=g;X.cancellation=!0}"monitoring"in r&&(r.monitoring&&!X.monitoring?(X.monitoring=!0,a.prototype._fireEvent=
ea):!r.monitoring&&X.monitoring&&(X.monitoring=!1,a.prototype._fireEvent=p))};a.prototype._fireEvent=p;a.prototype._execute=function(r,B,J){try{r(B,J)}catch(H){return H}};a.prototype._onCancel=function(){};a.prototype._setOnCancel=function(r){};a.prototype._attachCancellationCallback=function(r){};a.prototype._captureStackTrace=function(){};a.prototype._attachExtraTrace=function(){};a.prototype._clearCancellationData=function(){};a.prototype._propagateFrom=function(r,B){};var la=function(r,B){0!==
(2&B)&&r._isBound()&&this._setBoundTo(r._boundTo)},ha=function(){return!1},ma=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;f.inherits(L,Error);c.CapturedTrace=L;L.prototype.uncycle=function(){var r=this._length;if(!(2>r)){var B=[],J={},H=0;for(r=this;void 0!==r;++H)B.push(r),r=r._parent;r=this._length=H;for(H=r-1;0<=H;--H){var P=B[H].stack;void 0===J[P]&&(J[P]=H)}for(H=0;r>H;++H)if(P=J[B[H].stack],void 0!==P&&P!==H){0<P&&(B[P-1]._parent=void 0,B[P-1]._length=1);B[H]._parent=void 0;B[H]._length=1;J=0<H?
B[H-1]:this;r-1>P?(J._parent=B[P+1],J._parent.uncycle(),J._length=J._parent._length+1):(J._parent=void 0,J._length=1);r=J._length+1;for(H-=2;0<=H;--H)B[H]._length=r,r++;break}}};L.prototype.attachExtraTrace=function(r){if(!r.__stackCleaned__){this.uncycle();var B=E(r),J=B.message;B=[B.stack];for(var H=this;void 0!==H;)B.push(z(H.stack.split("\n"))),H=H._parent;H=B[0];for(var P=1;P<B.length;++P){for(var Q=B[P],W=H.length-1,fa=H[W],ba=-1,ca=Q.length-1;0<=ca;--ca)if(Q[ca]===fa){ba=ca;break}for(ca=ba;0<=
ca&&H[W]===Q[ca];--ca)H.pop(),W--;H=Q}for(H=0;H<B.length;++H)(0===B[H].length||H+1<B.length&&B[H][0]===B[H+1][0])&&(B.splice(H,1),H--);H=f;P=H.notEnumerableProp;for(Q=0;Q<B.length-1;++Q)B[Q].push("From previous event:"),B[Q]=B[Q].join("\n");J=(Q<B.length&&(B[Q]=B[Q].join("\n")),J+"\n"+B.join("\n"));P.call(H,r,"stack",J);f.notEnumerableProp(r,"__stackCleaned__",!0)}};var ia=function(){var r=/^\s*at\s*/,B=function(Q,W){return"string"==typeof Q?Q:void 0!==W.name&&void 0!==W.message?W.toString():C(W)};
if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6;M=r;O=B;var J=Error.captureStackTrace;return ha=function(Q){return G.test(Q)},function(Q,W){Error.stackTraceLimit+=6;J(Q,W);Error.stackTraceLimit-=6}}var H=Error();if("string"==typeof H.stack&&0<=H.stack.split("\n")[0].indexOf("stackDetection@"))return M=/@/,O=B,S=!0,function(Q){Q.stack=Error().stack};try{throw Error();}catch(Q){var P="stack"in Q}return"stack"in H||!P||"number"!=typeof Error.stackTraceLimit?
(O=function(Q,W){return"string"==typeof Q?Q:"object"!=typeof W&&"function"!=typeof W||void 0===W.name||void 0===W.message?C(W):W.toString()},null):(M=r,O=B,function(Q){Error.stackTraceLimit+=6;try{throw Error();}catch(W){Q.stack=W.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(T=function(r){console.warn(r)},f.isNode&&process.stderr.isTTY?T=function(r,B){console.warn((B?"\u001b[33m":"\u001b[31m")+r+"\u001b[0m\n")}:f.isNode||"string"!=typeof Error().stack||
(T=function(r,B){console.warn("%c"+r,B?"color: darkorange":"color: red")}));var X={warnings:Z,longStackTraces:!1,cancellation:!1,monitoring:!1};return Y&&a.longStackTraces(),{longStackTraces:function(){return X.longStackTraces},warnings:function(){return X.warnings},cancellation:function(){return X.cancellation},monitoring:function(){return X.monitoring},propagateFromFunction:function(){return la},boundValueFunction:function(){return n},checkForgottenReturns:function(r,B,J,H,P){void 0!==r||null===
B||!aa||void 0!==P&&P._returnedNonUndefined()||0===(65535&H._bitField)||(J&&(J+=" "),H._warn("a promise was created in a "+J+"handler but was not returned from it",!0,B))},setBounds:function(r,B){if(F()){r=r.stack.split("\n");B=B.stack.split("\n");for(var J=-1,H=-1,P=0;P<r.length;++P){var Q=I(r[P]);if(Q){var W=Q.fileName;J=Q.line;break}}for(P=0;P<B.length;++P)if(Q=I(B[P])){var fa=Q.fileName;H=Q.line;break}0>J||0>H||!W||!fa||W!==fa||J>=H||(ha=function(ba){return G.test(ba)?!0:(ba=I(ba))&&ba.fileName===
W&&J<=ba.line&&ba.line<=H?!0:!1})}},warn:u,deprecated:function(r,B){r+=" is deprecated and will be removed in a future version.";return B&&(r+=" Use "+B+" instead."),u(r)},CapturedTrace:L,fireDomEvent:ja,fireGlobalEvent:ka}}},{"./errors":12,"./util":36}],10:[function(b,l,q){l.exports=function(a){function c(){return this.value}function y(){throw this.reason;}a.prototype["return"]=a.prototype.thenReturn=function(p){return p instanceof a&&p.suppressUnhandledRejections(),this._then(c,void 0,void 0,{value:p},
void 0)};a.prototype["throw"]=a.prototype.thenThrow=function(p){return this._then(y,void 0,void 0,{reason:p},void 0)};a.prototype.catchThrow=function(p){if(1>=arguments.length)return this._then(void 0,y,void 0,{reason:p},void 0);var m=arguments[1];return this.caught(p,function(){throw m;})};a.prototype.catchReturn=function(p){if(1>=arguments.length)return p instanceof a&&p.suppressUnhandledRejections(),this._then(void 0,c,void 0,{value:p},void 0);var m=arguments[1];m instanceof a&&m.suppressUnhandledRejections();
return this.caught(p,function(){return m})}}},{}],11:[function(b,l,q){l.exports=function(a,c){function y(){return t(this)}function p(v,k){return m(v,k,c,c)}var m=a.reduce,t=a.all;a.prototype.each=function(v){return this.mapSeries(v)._then(y,void 0,void 0,this,void 0)};a.prototype.mapSeries=function(v){return m(this,v,c,c)};a.each=function(v,k){return p(v,k)._then(y,void 0,void 0,v,void 0)};a.mapSeries=p}},{}],12:[function(b,l,q){function a(u,z){function E(h){return this instanceof E?(m(this,"message",
"string"==typeof h?h:z),m(this,"name",u),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new E(h)}return p(E,Error),E}function c(u){return this instanceof c?(m(this,"name","OperationalError"),m(this,"message",u),this.cause=u,this.isOperational=!0,void(u instanceof Error?(m(this,"message",u.message),m(this,"stack",u.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new c(u)}q=b("./es5");var y=q.freeze;b=b("./util");var p=
b.inherits,m=b.notEnumerableProp;b=a("Warning","warning");var t=a("CancellationError","cancellation error"),v=a("TimeoutError","timeout error"),k=a("AggregateError","aggregate error");try{var e=TypeError;var g=RangeError}catch(u){e=a("TypeError","type error"),g=a("RangeError","range error")}for(var n="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),w=0;w<n.length;++w)"function"==typeof Array.prototype[n[w]]&&(k.prototype[n[w]]=
Array.prototype[n[w]]);q.defineProperty(k.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0});k.prototype.isOperational=!0;var x=0;k.prototype.toString=function(){var u=Array(4*x+1).join(" "),z="\n"+u+"AggregateError of:\n";x++;u=Array(4*x+1).join(" ");for(var E=0;E<this.length;++E){var h=this[E]===this?"[Circular AggregateError]":this[E]+"";h=h.split("\n");for(var A=0;A<h.length;++A)h[A]=u+h[A];h=h.join("\n");z+=h+"\n"}return x--,z};p(c,Error);(n=Error.__BluebirdErrorTypes__)||
(n=y({CancellationError:t,TimeoutError:v,OperationalError:c,RejectionError:c,AggregateError:k}),q.defineProperty(Error,"__BluebirdErrorTypes__",{value:n,writable:!1,enumerable:!1,configurable:!1}));l.exports={Error:Error,TypeError:e,RangeError:g,CancellationError:n.CancellationError,OperationalError:n.OperationalError,TimeoutError:n.TimeoutError,AggregateError:n.AggregateError,Warning:b}},{"./es5":13,"./util":36}],13:[function(b,l,q){if(b=function(){return void 0===this}())l.exports={freeze:Object.freeze,
defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:b,propertyIsWritable:function(p,m){p=Object.getOwnPropertyDescriptor(p,m);return!(p&&!p.writable&&!p.set)}};else{var a={}.hasOwnProperty,c={}.toString,y={}.constructor.prototype;q=function(p){var m=[],t;for(t in p)a.call(p,t)&&m.push(t);return m};l.exports={isArray:function(p){try{return"[object Array]"===
c.call(p)}catch(m){return!1}},keys:q,names:q,defineProperty:function(p,m,t){return p[m]=t.value,p},getDescriptor:function(p,m){return{value:p[m]}},freeze:function(p){return p},getPrototypeOf:function(p){try{return Object(p).constructor.prototype}catch(m){return y}},isES5:b,propertyIsWritable:function(){return!0}}}},{}],14:[function(b,l,q){l.exports=function(a,c){var y=a.map;a.prototype.filter=function(p,m){return y(this,p,m,c)};a.filter=function(p,m,t){return y(p,m,t,c)}}},{}],15:[function(b,l,q){l.exports=
function(a,c){function y(w,x,u){this.promise=w;this.type=x;this.handler=u;this.called=!1;this.cancelPromise=null}function p(w){this.finallyHandler=w}function m(w,x){return null!=w.cancelPromise?(1<arguments.length?w.cancelPromise._reject(x):w.cancelPromise._cancel(),w.cancelPromise=null,!0):!1}function t(){return k.call(this,this.promise._target()._settledValue())}function v(w){return m(this,w)?void 0:(n.e=w,n)}function k(w){var x=this.promise,u=this.handler;if(!this.called&&(this.called=!0,u=this.isFinallyHandler()?
u.call(x._boundValue()):u.call(x._boundValue(),w),void 0!==u&&(x._setReturnedNonUndefined(),u=c(u,x),u instanceof a))){if(null!=this.cancelPromise){if(u.isCancelled())return w=new g("late cancellation observer"),x._attachExtraTrace(w),n.e=w,n;u.isPending()&&u._attachCancellationCallback(new p(this))}return u._then(t,v,void 0,this,void 0)}return x.isRejected()?(m(this),n.e=w,n):(m(this),w)}var e=b("./util"),g=a.CancellationError,n=e.errorObj;return y.prototype.isFinallyHandler=function(){return 0===
this.type},p.prototype._resultCancelled=function(){m(this.finallyHandler)},a.prototype._passThrough=function(w,x,u,z){return"function"!=typeof w?this.then():this._then(u,z,void 0,new y(this,x,w),void 0)},a.prototype.lastly=a.prototype["finally"]=function(w){return this._passThrough(w,0,k,k)},a.prototype.tap=function(w){return this._passThrough(w,1,k)},y}},{"./util":36}],16:[function(b,l,q){l.exports=function(a,c,y,p,m,t){function v(x,u,z,E){var h=this._promise=new a(y);h._captureStackTrace();h._setOnCancel(this);
this._stack=E;this._generatorFunction=x;this._receiver=u;this._generator=void 0;this._yieldHandlers="function"==typeof z?[z].concat(w):w;this._yieldedPromise=null}var k=b("./errors").TypeError,e=b("./util"),g=e.errorObj,n=e.tryCatch,w=[];e.inherits(v,m);v.prototype._isResolved=function(){return null===this._promise};v.prototype._cleanup=function(){this._promise=this._generator=null};v.prototype._promiseCancelled=function(){if(!this._isResolved()){if("undefined"!=typeof this._generator["return"]){this._promise._pushContext();
var x=n(this._generator["return"]).call(this._generator,void 0);this._promise._popContext()}else{var u=new a.CancellationError("generator .return() sentinel");a.coroutine.returnSentinel=u;this._promise._attachExtraTrace(u);this._promise._pushContext();x=n(this._generator["throw"]).call(this._generator,u);this._promise._popContext();x===g&&x.e===u&&(x=null)}u=this._promise;this._cleanup();x===g?u._rejectCallback(x.e,!1):u.cancel()}};v.prototype._promiseFulfilled=function(x){this._yieldedPromise=null;
this._promise._pushContext();x=n(this._generator.next).call(this._generator,x);this._promise._popContext();this._continue(x)};v.prototype._promiseRejected=function(x){this._yieldedPromise=null;this._promise._attachExtraTrace(x);this._promise._pushContext();x=n(this._generator["throw"]).call(this._generator,x);this._promise._popContext();this._continue(x)};v.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof a){var x=this._yieldedPromise;this._yieldedPromise=null;this._promiseCancelled();
x.cancel()}};v.prototype.promise=function(){return this._promise};v.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=void 0;this._promiseFulfilled(void 0)};v.prototype._continue=function(x){var u=this._promise;if(x===g)return this._cleanup(),u._rejectCallback(x.e,!1);var z=x.value;if(!0===x.done)return this._cleanup(),u._resolveCallback(z);x=p(z,this._promise);if(u=!(x instanceof a)){a:{var E=x,h=this._yieldHandlers;u=this._promise;
for(var A=0;A<h.length;++A){u._pushContext();var C=n(h[A])(E);if(u._popContext(),C===g){u._pushContext();E=a.reject(g.e);u=(u._popContext(),E);break a}C=p(C,u);if(C instanceof a){u=C;break a}}u=null}u=(x=u,null===x)}if(u)return void this._promiseRejected(new k("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",z)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));x=x._target();z=x._bitField;0===(50397184&z)?(this._yieldedPromise=
x,x._proxy(this,null)):0!==(33554432&z)?this._promiseFulfilled(x._value()):0!==(16777216&z)?this._promiseRejected(x._reason()):this._promiseCancelled()};a.coroutine=function(x,u){if("function"!=typeof x)throw new k("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var z=Object(u).yieldHandler,E=Error().stack;return function(){var h=x.apply(this,arguments),A=new v(void 0,void 0,z,E),C=A.promise();return A._generator=h,A._promiseFulfilled(void 0),C}};a.coroutine.addYieldHandler=
function(x){if("function"!=typeof x)throw new k("expecting a function but got "+e.classString(x));w.push(x)};a.spawn=function(x){if(t.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof x)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");x=new v(x,this);var u=x.promise();return x._run(a.spawn),u}}},{"./errors":12,"./util":36}],17:[function(b,l,q){l.exports=function(a,c,y,p){y=b("./util");y.canEvaluate;y.tryCatch;y.errorObj;a.join=function(){var m,
t=arguments.length-1;0<t&&"function"==typeof arguments[t]&&(m=arguments[t]);t=[].slice.call(arguments);m&&t.pop();t=(new c(t)).promise();return void 0!==m?t.spread(m):t}}},{"./util":36}],18:[function(b,l,q){l.exports=function(a,c,y,p,m,t){function v(u,z,E,h){this.constructor$(u);this._promise._captureStackTrace();u=e();this._callback=null===u?z:u.bind(z);this._preservedValues=h===m?Array(this.length()):null;this._limit=E;this._inFlight=0;this._queue=1<=E?[]:x;this._init$(void 0,-2)}function k(u,z,
E,h){if("function"!=typeof z)return y("expecting a function but got "+g.classString(z));E="object"==typeof E&&null!==E?E.concurrency:0;return E="number"==typeof E&&isFinite(E)&&1<=E?E:0,(new v(u,z,E,h)).promise()}var e=a._getDomain,g=b("./util"),n=g.tryCatch,w=g.errorObj,x=[];g.inherits(v,c);v.prototype._init=function(){};v.prototype._promiseFulfilled=function(u,z){var E=this._values,h=this.length(),A=this._preservedValues,C=this._limit;if(0>z){if(z=-1*z-1,E[z]=u,1<=C&&(this._inFlight--,this._drainQueue(),
this._isResolved()))return!0}else{if(1<=C&&this._inFlight>=C)return E[z]=u,this._queue.push(z),!1;null!==A&&(A[z]=u);var F=this._promise,I=this._callback,L=F._boundValue();F._pushContext();u=n(I).call(L,u,z,h);I=F._popContext();if(t.checkForgottenReturns(u,I,null!==A?"Promise.filter":"Promise.map",F),u===w)return this._reject(u.e),!0;F=p(u,this._promise);if(F instanceof a){F=F._target();u=F._bitField;if(0===(50397184&u))return 1<=C&&this._inFlight++,E[z]=F,F._proxy(this,-1*(z+1)),!1;if(0===(33554432&
u))return 0!==(16777216&u)?(this._reject(F._reason()),!0):(this._cancel(),!0);u=F._value()}E[z]=u}return++this._totalResolved>=h?(null!==A?this._filter(E,A):this._resolve(E),!0):!1};v.prototype._drainQueue=function(){for(var u=this._queue,z=this._limit,E=this._values;0<u.length&&this._inFlight<z&&!this._isResolved();){var h=u.pop();this._promiseFulfilled(E[h],h)}};v.prototype._filter=function(u,z){for(var E=z.length,h=Array(E),A=0,C=0;E>C;++C)u[C]&&(h[A++]=z[C]);h.length=A;this._resolve(h)};v.prototype.preservedValues=
function(){return this._preservedValues};a.prototype.map=function(u,z){return k(this,u,z,null)};a.map=function(u,z,E,h){return k(u,z,E,h)}}},{"./util":36}],19:[function(b,l,q){l.exports=function(a,c,y,p,m){var t=b("./util"),v=t.tryCatch;a.method=function(k){if("function"!=typeof k)throw new a.TypeError("expecting a function but got "+t.classString(k));return function(){var e=new a(c);e._captureStackTrace();e._pushContext();var g=v(k).apply(this,arguments),n=e._popContext();return m.checkForgottenReturns(g,
n,"Promise.method",e),e._resolveFromSyncValue(g),e}};a.attempt=a["try"]=function(k){if("function"!=typeof k)return p("expecting a function but got "+t.classString(k));var e=new a(c);e._captureStackTrace();e._pushContext();if(1<arguments.length){m.deprecated("calling Promise.try with more than 1 argument");var g=arguments[1];var n=arguments[2];g=t.isArray(g)?v(k).apply(n,g):v(k).call(n,g)}else g=v(k)();n=e._popContext();return m.checkForgottenReturns(g,n,"Promise.try",e),e._resolveFromSyncValue(g),
e};a.prototype._resolveFromSyncValue=function(k){k===t.errorObj?this._rejectCallback(k.e,!1):this._resolveCallback(k,!0)}}},{"./util":36}],20:[function(b,l,q){var a=b("./util"),c=a.maybeWrapAsError,y=b("./errors").OperationalError,p=b("./es5"),m=/^(?:name|message|stack|cause)$/;l.exports=function(t,v){return function(k,e){if(null!==t){if(k){var g=c(k);if(g instanceof Error&&p.getPrototypeOf(g)===Error.prototype){var n=new y(g);n.name=g.name;n.message=g.message;n.stack=g.stack;for(var w=p.keys(g),
x=0;x<w.length;++x){var u=w[x];m.test(u)||(n[u]=g[u])}g=n}else g=(a.markAsOriginatingFromRejection(g),g);t._attachExtraTrace(g);t._reject(g)}else v?(g=[].slice.call(arguments,1),t._fulfill(g)):t._fulfill(e);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(b,l,q){l.exports=function(a){function c(e,g){if(!m.isArray(e))return y.call(this,e,g);e=v(g).apply(this._boundValue(),[null].concat(e));e===k&&t.throwLater(e.e)}function y(e,g){var n=this._boundValue();e=void 0===e?v(g).call(n,null):
v(g).call(n,null,e);e===k&&t.throwLater(e.e)}function p(e,g){if(!e){var n=Error(e+"");n.cause=e;e=n}e=v(g).call(this._boundValue(),e);e===k&&t.throwLater(e.e)}var m=b("./util"),t=a._async,v=m.tryCatch,k=m.errorObj;a.prototype.asCallback=a.prototype.nodeify=function(e,g){if("function"==typeof e){var n=y;void 0!==g&&Object(g).spread&&(n=c);this._then(n,p,void 0,this,e)}return this}}},{"./util":36}],22:[function(b,l,q){l.exports=function(){function a(){}function c(f){this._bitField=0;this._receiver0=
this._promise0=this._rejectionHandler0=this._fulfillmentHandler0=void 0;if(f!==h){if("function"!=typeof f)throw new z("expecting a function but got "+g.classString(f));if(this.constructor!==c)throw new z("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");this._resolveFromExecutor(f)}this._promiseCreated();this._fireEvent("promiseCreated",this)}function y(f){this.promise._resolveCallback(f)}function p(f){this.promise._rejectCallback(f,!1)}function m(f){var D=new c(h);
D._fulfillmentHandler0=f;D._rejectionHandler0=f;D._promise0=f;D._receiver0=f}var t=function(){return new z("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},v=function(){return new c.PromiseInspection(this._target())},k=function(f){return c.reject(new z(f))},e={},g=b("./util");var n=g.isNode?function(){var f=process.domain;return void 0===f&&(f=null),f}:function(){return null};g.notEnumerableProp(c,"_getDomain",n);var w=b("./es5"),x=b("./async"),u=new x;w.defineProperty(c,"_async",
{value:u});w=b("./errors");var z=c.TypeError=w.TypeError;c.RangeError=w.RangeError;var E=c.CancellationError=w.CancellationError;c.TimeoutError=w.TimeoutError;c.OperationalError=w.OperationalError;c.RejectionError=w.OperationalError;c.AggregateError=w.AggregateError;var h=function(){},A={},C={},F=b("./thenables")(c,h),I=b("./promise_array")(c,h,F,k,a);w=b("./context")(c);var L=w.create,K=b("./debuggability")(c,w),N=(K.CapturedTrace,b("./finally")(c,F)),T=b("./catch_filter")(C),U=b("./nodeback"),R=
g.errorObj,V=g.tryCatch;return c.prototype.toString=function(){return"[object Promise]"},c.prototype.caught=c.prototype["catch"]=function(f){var D=arguments.length;if(1<D){var G,M=Array(D-1),O=0;for(G=0;D-1>G;++G){var S=arguments[G];if(!g.isObject(S))return k("expecting an object but got "+g.classString(S));M[O++]=S}return M.length=O,f=arguments[G],this.then(void 0,T(M,f,this))}return this.then(void 0,f)},c.prototype.reflect=function(){return this._then(v,v,void 0,this,void 0)},c.prototype.then=function(f,
D){if(K.warnings()&&0<arguments.length&&"function"!=typeof f&&"function"!=typeof D){var G=".then() only accepts functions but was passed: "+g.classString(f);1<arguments.length&&(G+=", "+g.classString(D));this._warn(G)}return this._then(f,D,void 0,void 0,void 0)},c.prototype.done=function(f,D){this._then(f,D,void 0,void 0,void 0)._setIsFinal()},c.prototype.spread=function(f){return"function"!=typeof f?k("expecting a function but got "+g.classString(f)):this.all()._then(f,void 0,void 0,A,void 0)},c.prototype.toJSON=
function(){var f={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(f.fulfillmentValue=this.value(),f.isFulfilled=!0):this.isRejected()&&(f.rejectionReason=this.reason(),f.isRejected=!0),f},c.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),(new I(this)).promise()},c.prototype.error=function(f){return this.caught(g.originatesFromRejection,f)},c.is=function(f){return f instanceof
c},c.fromNode=c.fromCallback=function(f){var D=new c(h);D._captureStackTrace();var G=1<arguments.length?!!Object(arguments[1]).multiArgs:!1;G=V(f)(U(D,G));return G===R&&D._rejectCallback(G.e,!0),D._isFateSealed()||D._setAsyncGuaranteed(),D},c.all=function(f){return(new I(f)).promise()},c.cast=function(f){var D=F(f);return D instanceof c||(D=new c(h),D._captureStackTrace(),D._setFulfilled(),D._rejectionHandler0=f),D},c.resolve=c.fulfilled=c.cast,c.reject=c.rejected=function(f){var D=new c(h);return D._captureStackTrace(),
D._rejectCallback(f,!0),D},c.setScheduler=function(f){if("function"!=typeof f)throw new z("expecting a function but got "+g.classString(f));var D=u._schedule;return u._schedule=f,D},c.prototype._then=function(f,D,G,M,O){var S=void 0!==O;O=S?O:new c(h);G=this._target();var Y=G._bitField;S||(O._propagateFrom(this,3),O._captureStackTrace(),void 0===M&&0!==(2097152&this._bitField)&&(M=0!==(50397184&Y)?this._boundValue():G===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,O));S=n();if(0!==
(50397184&Y)){var Z,aa,da=G._settlePromiseCtx;0!==(33554432&Y)?(aa=G._rejectionHandler0,Z=f):0!==(16777216&Y)?(aa=G._fulfillmentHandler0,Z=D,G._unsetRejectionIsUnhandled()):(da=G._settlePromiseLateCancellationObserver,aa=new E("late cancellation observer"),G._attachExtraTrace(aa),Z=D);u.invoke(da,G,{handler:null===S?Z:"function"==typeof Z&&S.bind(Z),promise:O,receiver:M,value:aa})}else G._addCallbacks(f,D,O,M,S);return O},c.prototype._length=function(){return 65535&this._bitField},c.prototype._isFateSealed=
function(){return 0!==(117506048&this._bitField)},c.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},c.prototype._setLength=function(f){this._bitField=-65536&this._bitField|65535&f},c.prototype._setFulfilled=function(){this._bitField|=33554432;this._fireEvent("promiseFulfilled",this)},c.prototype._setRejected=function(){this._bitField|=16777216;this._fireEvent("promiseRejected",this)},c.prototype._setFollowing=function(){this._bitField|=67108864;this._fireEvent("promiseResolved",
this)},c.prototype._setIsFinal=function(){this._bitField|=4194304},c.prototype._isFinal=function(){return 0<(4194304&this._bitField)},c.prototype._unsetCancelled=function(){this._bitField&=-65537},c.prototype._setCancelled=function(){this._bitField|=65536;this._fireEvent("promiseCancelled",this)},c.prototype._setAsyncGuaranteed=function(){this._bitField|=134217728},c.prototype._receiverAt=function(f){f=0===f?this._receiver0:this[4*f-4+3];return f===e?void 0:void 0===f&&this._isBound()?this._boundValue():
f},c.prototype._promiseAt=function(f){return this[4*f-4+2]},c.prototype._fulfillmentHandlerAt=function(f){return this[4*f-4]},c.prototype._rejectionHandlerAt=function(f){return this[4*f-4+1]},c.prototype._boundValue=function(){},c.prototype._migrateCallback0=function(f){var D=(f._bitField,f._fulfillmentHandler0),G=f._rejectionHandler0,M=f._promise0;f=f._receiverAt(0);void 0===f&&(f=e);this._addCallbacks(D,G,M,f,null)},c.prototype._migrateCallbackAt=function(f,D){var G=f._fulfillmentHandlerAt(D),M=
f._rejectionHandlerAt(D),O=f._promiseAt(D);f=f._receiverAt(D);void 0===f&&(f=e);this._addCallbacks(G,M,O,f,null)},c.prototype._addCallbacks=function(f,D,G,M,O){var S=this._length();if(65531<=S&&(S=0,this._setLength(0)),0===S)this._promise0=G,this._receiver0=M,"function"==typeof f&&(this._fulfillmentHandler0=null===O?f:O.bind(f)),"function"==typeof D&&(this._rejectionHandler0=null===O?D:O.bind(D));else{var Y=4*S-4;this[Y+2]=G;this[Y+3]=M;"function"==typeof f&&(this[Y+0]=null===O?f:O.bind(f));"function"==
typeof D&&(this[Y+1]=null===O?D:O.bind(D))}return this._setLength(S+1),S},c.prototype._proxy=function(f,D){this._addCallbacks(void 0,void 0,D,f,null)},c.prototype._resolveCallback=function(f,D){if(0===(117506048&this._bitField)){if(f===this)return this._rejectCallback(t(),!1);var G=F(f,this);if(!(G instanceof c))return this._fulfill(f);D&&this._propagateFrom(G,2);f=G._target();if(f===this)return void this._reject(t());D=f._bitField;if(0===(50397184&D)){D=this._length();0<D&&f._migrateCallback0(this);
for(G=1;D>G;++G)f._migrateCallbackAt(this,G);this._setFollowing();this._setLength(0);this._setFollowee(f)}else 0!==(33554432&D)?this._fulfill(f._value()):0!==(16777216&D)?this._reject(f._reason()):(D=new E("late cancellation observer"),f._attachExtraTrace(D),this._reject(D))}},c.prototype._rejectCallback=function(f,D,G){var M=g.ensureErrorObject(f),O=M===f;O||G||!K.warnings()||(G="a promise was rejected with a non-error: "+g.classString(f),this._warn(G,!0));this._attachExtraTrace(M,D?O:!1);this._reject(f)},
c.prototype._resolveFromExecutor=function(f){var D=this;this._captureStackTrace();this._pushContext();var G=!0;f=this._execute(f,function(M){D._resolveCallback(M)},function(M){D._rejectCallback(M,G)});G=!1;this._popContext();void 0!==f&&D._rejectCallback(f,!0)},c.prototype._settlePromiseFromHandler=function(f,D,G,M){var O=M._bitField;if(0===(65536&O)){M._pushContext();var S;D===A?G&&"number"==typeof G.length?S=V(f).apply(this._boundValue(),G):(S=R,S.e=new z("cannot .spread() a non-array: "+g.classString(G))):
S=V(f).call(D,G);f=M._popContext();O=M._bitField;0===(65536&O)&&(S===C?M._reject(G):S===R?M._rejectCallback(S.e,!1):(K.checkForgottenReturns(S,f,"",M,this),M._resolveCallback(S)))}},c.prototype._target=function(){for(var f=this;f._isFollowing();)f=f._followee();return f},c.prototype._followee=function(){return this._rejectionHandler0},c.prototype._setFollowee=function(f){this._rejectionHandler0=f},c.prototype._settlePromise=function(f,D,G,M){var O=f instanceof c,S=this._bitField,Y=0!==(134217728&
S);0!==(65536&S)?(O&&f._invokeInternalOnCancel(),G instanceof N&&G.isFinallyHandler()?(G.cancelPromise=f,V(D).call(G,M)===R&&f._reject(R.e)):D===v?f._fulfill(v.call(G)):G instanceof a?G._promiseCancelled(f):O||f instanceof I?f._cancel():G.cancel()):"function"==typeof D?O?(Y&&f._setAsyncGuaranteed(),this._settlePromiseFromHandler(D,G,M,f)):D.call(G,M,f):G instanceof a?G._isResolved()||(0!==(33554432&S)?G._promiseFulfilled(M,f):G._promiseRejected(M,f)):O&&(Y&&f._setAsyncGuaranteed(),0!==(33554432&S)?
f._fulfill(M):f._reject(M))},c.prototype._settlePromiseLateCancellationObserver=function(f){var D=f.handler,G=f.promise,M=f.receiver;f=f.value;"function"==typeof D?G instanceof c?this._settlePromiseFromHandler(D,M,f,G):D.call(M,f,G):G instanceof c&&G._reject(f)},c.prototype._settlePromiseCtx=function(f){this._settlePromise(f.promise,f.handler,f.receiver,f.value)},c.prototype._settlePromise0=function(f,D,G){G=this._promise0;var M=this._receiverAt(0);this._receiver0=this._promise0=void 0;this._settlePromise(G,
f,M,D)},c.prototype._clearCallbackDataAtIndex=function(f){f=4*f-4;this[f+2]=this[f+3]=this[f+0]=this[f+1]=void 0},c.prototype._fulfill=function(f){var D=this._bitField;if(!((117506048&D)>>>16)){if(f===this)return f=t(),this._attachExtraTrace(f),this._reject(f);this._setFulfilled();this._rejectionHandler0=f;0<(65535&D)&&(0!==(134217728&D)?this._settlePromises():u.settlePromises(this))}},c.prototype._reject=function(f){var D=this._bitField;if(!((117506048&D)>>>16))return this._setRejected(),this._fulfillmentHandler0=
f,this._isFinal()?u.fatalError(f,g.isNode):void(0<(65535&D)?u.settlePromises(this):this._ensurePossibleRejectionHandled())},c.prototype._fulfillPromises=function(f,D){for(var G=1;f>G;G++){var M=this._fulfillmentHandlerAt(G),O=this._promiseAt(G),S=this._receiverAt(G);this._clearCallbackDataAtIndex(G);this._settlePromise(O,M,S,D)}},c.prototype._rejectPromises=function(f,D){for(var G=1;f>G;G++){var M=this._rejectionHandlerAt(G),O=this._promiseAt(G),S=this._receiverAt(G);this._clearCallbackDataAtIndex(G);
this._settlePromise(O,M,S,D)}},c.prototype._settlePromises=function(){var f=this._bitField,D=65535&f;if(0<D){if(0!==(16842752&f)){var G=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,G,f);this._rejectPromises(D,G)}else G=this._rejectionHandler0,this._settlePromise0(this._fulfillmentHandler0,G,f),this._fulfillPromises(D,G);this._setLength(0)}this._clearCancellationData()},c.prototype._settledValue=function(){var f=this._bitField;return 0!==(33554432&f)?this._rejectionHandler0:
0!==(16777216&f)?this._fulfillmentHandler0:void 0},c.defer=c.pending=function(){K.deprecated("Promise.defer","new Promise");return{promise:new c(h),resolve:y,reject:p}},g.notEnumerableProp(c,"_makeSelfResolutionError",t),b("./method")(c,h,F,k,K),b("./bind")(c,h,F,K),b("./cancel")(c,I,k,K),b("./direct_resolve")(c),b("./synchronous_inspection")(c),b("./join")(c,I,F,h,K),c.Promise=c,b("./map.js")(c,I,k,F,h,K),b("./using.js")(c,k,F,L,h,K),b("./timers.js")(c,h,K),b("./generators.js")(c,k,h,F,a,K),b("./nodeify.js")(c),
b("./call_get.js")(c),b("./props.js")(c,I,F,k),b("./race.js")(c,h,F,k),b("./reduce.js")(c,I,k,F,h,K),b("./settle.js")(c,I,K),b("./some.js")(c,I,k),b("./promisify.js")(c,h),b("./any.js")(c),b("./each.js")(c,h),b("./filter.js")(c,h),g.toFastProperties(c),g.toFastProperties(c.prototype),m({a:1}),m({b:2}),m({c:3}),m(1),m(function(){}),m(void 0),m(!1),m(new c(h)),K.setBounds(x.firstLineError,g.lastLineError),c}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,
"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(b,l,q){l.exports=function(a,c,y,p,m){function t(k){var e=this._promise=
new a(c);k instanceof a&&e._propagateFrom(k,3);e._setOnCancel(this);this._values=k;this._totalResolved=this._length=0;this._init(void 0,-2)}var v=b("./util");v.isArray;return v.inherits(t,m),t.prototype.length=function(){return this._length},t.prototype.promise=function(){return this._promise},t.prototype._init=function n(e,g){e=y(this._values,this._promise);if(e instanceof a){e=e._target();var w=e._bitField;if(this._values=e,0===(50397184&w))return this._promise._setAsyncGuaranteed(),e._then(n,this._reject,
void 0,this,g);if(0===(33554432&w))return 0!==(16777216&w)?this._reject(e._reason()):this._cancel();e=e._value()}if(e=v.asArray(e),null===e)return g=p("expecting an array or an iterable object but got "+v.classString(e)).reason(),void this._promise._rejectCallback(g,!1);if(0===e.length){if(-5===g)this._resolveEmptyArray();else{e=this._resolve;a:{switch(g){case -2:g=[];break a;case -3:g={};break a}g=void 0}e.call(this,g)}g=void 0}else g=void this._iterate(e);return g},t.prototype._iterate=function(e){var g=
this.getActualLength(e.length);this._length=g;this._values=this.shouldCopyValues()?Array(g):this._values;for(var n=this._promise,w=!1,x=null,u=0;g>u;++u){var z=y(e[u],n);z instanceof a?(z=z._target(),x=z._bitField):x=null;w?null!==x&&z.suppressUnhandledRejections():null!==x?0===(50397184&x)?(z._proxy(this,u),this._values[u]=z):w=0!==(33554432&x)?this._promiseFulfilled(z._value(),u):0!==(16777216&x)?this._promiseRejected(z._reason(),u):this._promiseCancelled(u):w=this._promiseFulfilled(z,u)}w||n._setAsyncGuaranteed()},
t.prototype._isResolved=function(){return null===this._values},t.prototype._resolve=function(e){this._values=null;this._promise._fulfill(e)},t.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},t.prototype._reject=function(e){this._values=null;this._promise._rejectCallback(e,!1)},t.prototype._promiseFulfilled=function(e,g){this._values[g]=e;return++this._totalResolved>=this._length?(this._resolve(this._values),!0):!1},t.prototype._promiseCancelled=
function(){return this._cancel(),!0},t.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},t.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof a)e.cancel();else for(var g=0;g<e.length;++g)e[g]instanceof a&&e[g].cancel()}},t.prototype.shouldCopyValues=function(){return!0},t.prototype.getActualLength=function(e){return e},t}},{"./util":36}],24:[function(b,l,q){l.exports=function(a,c){function y(C){return!E.test(C)}
function p(C){try{return!0===C.__isPromisified__}catch(F){return!1}}function m(C,F,I,L){for(var K=e.inheritedDataKeys(C),N=[],T=0;T<K.length;++T){var U=K[T],R=C[U],V=L===h?!0:h(U,R,C),f;(f="function"!=typeof R||p(R))||(f=(f=e.getDataPropertyOrDefault(C,U+F,z))?p(f):!1);f||!L(U,R,C,V)||N.push(U,R)}for(C=0;C<N.length;C+=2)if(L=N[C],I.test(L))for(L=L.replace(I,""),K=0;K<N.length;K+=2)if(N[K]===L)throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",
F));return N}function t(C,F,I,L,K,N){function T(){var V=F;F===k&&(V=this);var f=new a(c);f._captureStackTrace();var D="string"==typeof R&&this!==U?this[R]:C,G=g(f,N);try{D.apply(V,n(arguments,G))}catch(M){f._rejectCallback(w(M),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}var U=function(){return this}(),R=C;return"string"==typeof R&&(C=L),e.notEnumerableProp(T,"__isPromisified__",!0),T}function v(C,F,I,L,K){var N=new RegExp(F.replace(/([$])/,"\\$")+"$");I=m(C,F,N,I);N=0;for(var T=I.length;T>
N;N+=2){var U=I[N],R=I[N+1],V=U+F;if(L===A)C[V]=A(U,k,U,R,F,K);else{var f=L(R,function(){return A(U,k,U,R,F,K)});e.notEnumerableProp(f,"__isPromisified__",!0);C[V]=f}}return e.toFastProperties(C),C}var k={},e=b("./util"),g=b("./nodeback"),n=e.withAppended,w=e.maybeWrapAsError,x=e.canEvaluate,u=b("./errors").TypeError,z={__isPromisified__:!0},E=RegExp("^(?:arity|length|name|arguments|caller|callee|prototype|__isPromisified__)$"),h=function(C){return e.isIdentifier(C)&&"_"!==C.charAt(0)&&"constructor"!==
C},A=x?void 0:t;a.promisify=function(C,F){if("function"!=typeof C)throw new u("expecting a function but got "+e.classString(C));if(p(C))return C;F=Object(F);F=A(C,void 0===F.context?k:F.context,void 0,C,null,!!F.multiArgs);return e.copyDescriptors(C,F,y),F};a.promisifyAll=function(C,F){if("function"!=typeof C&&"object"!=typeof C)throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");F=Object(F);var I=!!F.multiArgs,L=F.suffix;"string"!=typeof L&&
(L="Async");var K=F.filter;"function"!=typeof K&&(K=h);F=F.promisifier;if("function"!=typeof F&&(F=A),!e.isIdentifier(L))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var N=e.inheritedDataKeys(C),T=0;T<N.length;++T){var U=C[N[T]];"constructor"!==N[T]&&e.isClass(U)&&(v(U.prototype,L,K,F,I),v(U,L,K,F,I))}return v(C,L,K,F,I)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(b,l,q){l.exports=function(a,c,y,p){function m(w){var x=!1;if(void 0!==
v&&w instanceof v){var u=n(w);x=!0}else{var z=g.keys(w),E=z.length;u=Array(2*E);for(var h=0;E>h;++h){var A=z[h];u[h]=w[A];u[h+E]=A}}this.constructor$(u);this._isMap=x;this._init$(void 0,-3)}function t(w){var x;w=y(w);return e(w)?(x=w instanceof a?w._then(a.props,void 0,void 0,void 0,void 0):(new m(w)).promise(),w instanceof a&&x._propagateFrom(w,2),x):p("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var v,k=b("./util"),e=k.isObject,g=b("./es5");"function"==typeof Map&&
(v=Map);var n=function(){function w(z,E){this[x]=z;this[x+u]=E;x++}var x=0,u=0;return function(z){u=z.size;x=0;var E=Array(2*z.size);return z.forEach(w,E),E}}();k.inherits(m,c);m.prototype._init=function(){};m.prototype._promiseFulfilled=function(w,x){this._values[x]=w;if(++this._totalResolved>=this._length){if(this._isMap){w=this._values;x=new v;for(var u=w.length/2|0,z=0;u>z;++z)x.set(w[u+z],w[z]);w=x}else for(w={},x=this.length(),u=0,z=this.length();z>u;++u)w[this._values[u+x]]=this._values[u];
return this._resolve(w),!0}return!1};m.prototype.shouldCopyValues=function(){return!1};m.prototype.getActualLength=function(w){return w>>1};a.prototype.props=function(){return t(this)};a.props=function(w){return t(w)}}},{"./es5":13,"./util":36}],26:[function(b,l,q){function a(c){this._capacity=c;this._front=this._length=0}a.prototype._willBeOverCapacity=function(c){return this._capacity<c};a.prototype._pushOne=function(c){var y=this.length();this._checkCapacity(y+1);this[this._front+y&this._capacity-
1]=c;this._length=y+1};a.prototype._unshiftOne=function(c){var y=this._capacity;this._checkCapacity(this.length()+1);y=(this._front-1&y-1^y)-y;this[y]=c;this._front=y;this._length=this.length()+1};a.prototype.unshift=function(c,y,p){this._unshiftOne(p);this._unshiftOne(y);this._unshiftOne(c)};a.prototype.push=function(c,y,p){var m=this.length()+3;if(this._willBeOverCapacity(m))return this._pushOne(c),this._pushOne(y),void this._pushOne(p);var t=this._front+m-3;this._checkCapacity(m);var v=this._capacity-
1;this[t+0&v]=c;this[t+1&v]=y;this[t+2&v]=p;this._length=m};a.prototype.shift=function(){var c=this._front,y=this[c];return this[c]=void 0,this._front=c+1&this._capacity-1,this._length--,y};a.prototype.length=function(){return this._length};a.prototype._checkCapacity=function(c){this._capacity<c&&this._resizeTo(this._capacity<<1)};a.prototype._resizeTo=function(c){var y=this._capacity;this._capacity=c;c=this._front+this._length&y-1;for(var p=0;c>p;++p)this[p+y]=this[p+0],this[p+0]=void 0};l.exports=
a},{}],27:[function(b,l,q){l.exports=function(a,c,y,p){function m(k,e){var g=y(k);if(g instanceof a)return v(g);if(k=t.asArray(k),null===k)return p("expecting an array or an iterable object but got "+t.classString(k));g=new a(c);void 0!==e&&g._propagateFrom(e,3);e=g._fulfill;for(var n=g._reject,w=0,x=k.length;x>w;++w){var u=k[w];(void 0!==u||w in k)&&a.cast(u)._then(e,n,void 0,g,null)}return g}var t=b("./util"),v=function(k){return k.then(function(e){return m(e,k)})};a.race=function(k){return m(k,
void 0)};a.prototype.race=function(){return m(this,void 0)}}},{"./util":36}],28:[function(b,l,q){l.exports=function(a,c,y,p,m,t){function v(z,E,h,A){this.constructor$(z);z=w();this._fn=null===z?E:z.bind(E);void 0!==h&&(h=a.resolve(h),h._attachCancellationCallback(this));this._initialValue=h;this._currentCancellable=null;this._eachValues=A===m?[]:void 0;this._promise._captureStackTrace();this._init$(void 0,-5)}function k(z,E){this.isFulfilled()?E._resolve(z):E._reject(z)}function e(z,E,h,A){return"function"!=
typeof E?y("expecting a function but got "+x.classString(E)):(new v(z,E,h,A)).promise()}function g(z){this.accum=z;this.array._gotAccum(z);z=p(this.value,this.array._promise);return z instanceof a?(this.array._currentCancellable=z,z._then(n,void 0,void 0,this,void 0)):n.call(this,z)}function n(z){var E=this.array,h=E._promise,A=u(E._fn);h._pushContext();z=void 0!==E._eachValues?A.call(h._boundValue(),z,this.index,this.length):A.call(h._boundValue(),this.accum,z,this.index,this.length);z instanceof
a&&(E._currentCancellable=z);A=h._popContext();return t.checkForgottenReturns(z,A,void 0!==E._eachValues?"Promise.each":"Promise.reduce",h),z}var w=a._getDomain,x=b("./util"),u=x.tryCatch;x.inherits(v,c);v.prototype._gotAccum=function(z){void 0!==this._eachValues&&z!==m&&this._eachValues.push(z)};v.prototype._eachComplete=function(z){return this._eachValues.push(z),this._eachValues};v.prototype._init=function(){};v.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:
this._initialValue)};v.prototype.shouldCopyValues=function(){return!1};v.prototype._resolve=function(z){this._promise._resolveCallback(z);this._values=null};v.prototype._resultCancelled=function(z){return z===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof a&&this._currentCancellable.cancel(),this._initialValue instanceof a&&this._initialValue.cancel()))};v.prototype._iterate=function(z){this._values=z;var E,h,A=z.length;if(void 0!==
this._initialValue?(E=this._initialValue,h=0):(E=a.resolve(z[0]),h=1),this._currentCancellable=E,!E.isRejected())for(;A>h;++h)E=E._then(g,void 0,void 0,{accum:null,value:z[h],index:h,length:A,array:this},void 0);void 0!==this._eachValues&&(E=E._then(this._eachComplete,void 0,void 0,this,void 0));E._then(k,k,void 0,E,this)};a.prototype.reduce=function(z,E){return e(this,z,E,null)};a.reduce=function(z,E,h,A){return e(z,E,h,A)}}},{"./util":36}],29:[function(b,l,q){b=b("./util");if(b.isNode&&"undefined"==
typeof MutationObserver){var a=global.setImmediate,c=process.nextTick;b=b.isRecentNode?function(y){a.call(global,y)}:function(y){c.call(process,y)}}else b="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof setImmediate?function(y){setImmediate(y)}:"undefined"!=typeof setTimeout?function(y){setTimeout(y,0)}:function(){throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");}:function(){var y=document.createElement("div"),
p={attributes:!0},m=!1,t=document.createElement("div");(new MutationObserver(function(){y.classList.toggle("foo");m=!1})).observe(t,p);return function(v){var k=new MutationObserver(function(){k.disconnect();v()});k.observe(y,p);m||(m=!0,t.classList.toggle("foo"))}}();l.exports=b},{"./util":36}],30:[function(b,l,q){l.exports=function(a,c,y){function p(t){this.constructor$(t)}var m=a.PromiseInspection;b("./util").inherits(p,c);p.prototype._promiseResolved=function(t,v){this._values[t]=v;return++this._totalResolved>=
this._length?(this._resolve(this._values),!0):!1};p.prototype._promiseFulfilled=function(t,v){var k=new m;return k._bitField=33554432,k._settledValueField=t,this._promiseResolved(v,k)};p.prototype._promiseRejected=function(t,v){var k=new m;return k._bitField=16777216,k._settledValueField=t,this._promiseResolved(v,k)};a.settle=function(t){return y.deprecated(".settle()",".reflect()"),(new p(t)).promise()};a.prototype.settle=function(){return a.settle(this)}}},{"./util":36}],31:[function(b,l,q){l.exports=
function(a,c,y){function p(n){this.constructor$(n);this._howMany=0;this._initialized=this._unwrap=!1}function m(n,w){if((0|w)!==w||0>w)return y("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");n=new p(n);var x=n.promise();return n.setHowMany(w),n.init(),x}var t=b("./util"),v=b("./errors").RangeError,k=b("./errors").AggregateError,e=t.isArray,g={};t.inherits(p,c);p.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,
-5);var n=e(this._values);!this._isResolved()&&n&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}};p.prototype.init=function(){this._initialized=!0;this._init()};p.prototype.setUnwrap=function(){this._unwrap=!0};p.prototype.howMany=function(){return this._howMany};p.prototype.setHowMany=function(n){this._howMany=n};p.prototype._promiseFulfilled=function(n){return this._addFulfilled(n),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),
1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1};p.prototype._promiseRejected=function(n){return this._addRejected(n),this._checkOutcome()};p.prototype._promiseCancelled=function(){return this._values instanceof a||null==this._values?this._cancel():(this._addRejected(g),this._checkOutcome())};p.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var n=new k,w=this.length();w<this._values.length;++w)this._values[w]!==
g&&n.push(this._values[w]);return 0<n.length?this._reject(n):this._cancel(),!0}return!1};p.prototype._fulfilled=function(){return this._totalResolved};p.prototype._rejected=function(){return this._values.length-this.length()};p.prototype._addRejected=function(n){this._values.push(n)};p.prototype._addFulfilled=function(n){this._values[this._totalResolved++]=n};p.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};p.prototype._getRangeError=function(n){return new v("Input array must contain at least "+
this._howMany+" items but contains only "+n+" items")};p.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};a.some=function(n,w){return m(n,w)};a.prototype.some=function(n){return m(this,n)};a._SomePromiseArray=p}},{"./errors":12,"./util":36}],32:[function(b,l,q){l.exports=function(a){function c(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}c.prototype._settledValue=
function(){return this._settledValueField};var y=c.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},p=c.prototype.error=c.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},m=c.prototype.isFulfilled=function(){return 0!==
(33554432&this._bitField)},t=c.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},v=c.prototype.isPending=function(){return 0===(50397184&this._bitField)},k=c.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};c.prototype.isCancelled=a.prototype._isCancelled=function(){return 65536===(65536&this._bitField)};a.prototype.isCancelled=function(){return this._target()._isCancelled()};a.prototype.isPending=function(){return v.call(this._target())};a.prototype.isRejected=
function(){return t.call(this._target())};a.prototype.isFulfilled=function(){return m.call(this._target())};a.prototype.isResolved=function(){return k.call(this._target())};a.prototype.value=function(){return y.call(this._target())};a.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),p.call(e)};a.prototype._value=function(){return this._settledValue()};a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()};a.PromiseInspection=
c}},{}],33:[function(b,l,q){l.exports=function(a,c){function y(k,e,g){var n=new a(c),w=n;g&&g._pushContext();n._captureStackTrace();g&&g._popContext();var x=!0;k=p.tryCatch(e).call(k,function(u){n&&(n._resolveCallback(u),n=null)},function(u){n&&(n._rejectCallback(u,x,!0),n=null)});return x=!1,n&&k===m&&(n._rejectCallback(k.e,!0,!0),n=null),w}var p=b("./util"),m=p.errorObj,t=p.isObject,v={}.hasOwnProperty;return function(k,e){if(t(k)){if(k instanceof a)return k;try{var g=k.then}catch(n){g=(m.e=n,m)}if(g===
m)return e&&e._pushContext(),g=a.reject(g.e),e&&e._popContext(),g;if("function"==typeof g)return v.call(k,"_promise0")?(g=new a(c),k._then(g._fulfill,g._reject,void 0,g,null),g):y(k,g,e)}return k}}},{"./util":36}],34:[function(b,l,q){l.exports=function(a,c,y){function p(n){this.handle=n}function m(n){return clearTimeout(this.handle),n}function t(n){throw clearTimeout(this.handle),n;}var v=b("./util"),k=a.TimeoutError;p.prototype._resultCancelled=function(){clearTimeout(this.handle)};var e=function(n){return g(+this).thenReturn(n)},
g=a.delay=function(n,w){var x,u;return void 0!==w?(x=a.resolve(w)._then(e,null,null,n,void 0),y.cancellation()&&w instanceof a&&x._setOnCancel(w)):(x=new a(c),u=setTimeout(function(){x._fulfill()},+n),y.cancellation()&&x._setOnCancel(new p(u))),x._setAsyncGuaranteed(),x};a.prototype.delay=function(n){return g(n,this)};a.prototype.timeout=function(n,w){var x,u;n=new p(setTimeout(function(){if(x.isPending()){var z=x,E=u;var h="string"!=typeof w?w instanceof Error?w:new k("operation timed out"):new k(w);
v.markAsOriginatingFromRejection(h);z._attachExtraTrace(h);z._reject(h);null!=E&&E.cancel()}},+n));return y.cancellation()?(u=this.then(),x=u._then(m,t,void 0,n,void 0),x._setOnCancel(n)):x=this._then(m,t,void 0,n,void 0),x}}},{"./util":36}],35:[function(b,l,q){l.exports=function(a,c,y,p,m,t){function v(A){setTimeout(function(){throw A;},0)}function k(A,C){function F(){if(I>=L)return K._fulfill();var N=A[I++];var T=y(N);N=(T!==N&&"function"==typeof N._isDisposable&&"function"==typeof N._getDisposer&&
N._isDisposable()&&T._setDisposable(N._getDisposer()),T);if(N instanceof a&&N._isDisposable()){try{N=y(N._getDisposer().tryDispose(C),A.promise)}catch(U){return v(U)}if(N instanceof a)return N._then(F,v,null,null,null)}F()}var I=0,L=A.length,K=new a(m);return F(),K}function e(A,C,F){this._data=A;this._promise=C;this._context=F}function g(A,C,F){this.constructor$(A,C,F)}function n(A){return e.isDisposer(A)?(this.resources[this.index]._setDisposable(A),A.promise()):A}function w(A){this.length=A;this.promise=
null;this[A-1]=null}var x=b("./util"),u=b("./errors").TypeError,z=b("./util").inherits,E=x.errorObj,h=x.tryCatch;e.prototype.data=function(){return this._data};e.prototype.promise=function(){return this._promise};e.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null};e.prototype.tryDispose=function(A){var C=this.resource(),F=this._context;void 0!==F&&F._pushContext();A=null!==C?this.doDispose(C,A):null;return void 0!==F&&F._popContext(),this._promise._unsetDisposable(),
this._data=null,A};e.isDisposer=function(A){return null!=A&&"function"==typeof A.resource&&"function"==typeof A.tryDispose};z(g,e);g.prototype.doDispose=function(A,C){return this.data().call(A,A,C)};w.prototype._resultCancelled=function(){for(var A=this.length,C=0;A>C;++C){var F=this[C];F instanceof a&&F.cancel()}};a.using=function(){var A=arguments.length;if(2>A)return c("you must pass at least 2 arguments to Promise.using");var C=arguments[A-1];if("function"!=typeof C)return c("expecting a function but got "+
x.classString(C));var F,I=!0;2===A&&Array.isArray(arguments[0])?(F=arguments[0],A=F.length,I=!1):(F=arguments,A--);for(var L=new w(A),K=0;A>K;++K){var N=F[K];if(e.isDisposer(N)){var T=N;N=N.promise();N._setDisposable(T)}else T=y(N),T instanceof a&&(N=T._then(n,null,null,{resources:L,index:K},void 0));L[K]=N}A=Array(L.length);for(K=0;K<A.length;++K)A[K]=a.resolve(L[K]).reflect();var U=a.all(A).then(function(V){for(var f=0;f<V.length;++f){var D=V[f];if(D.isRejected())return E.e=D.error(),E;if(!D.isFulfilled())return void U.cancel();
V[f]=D.value()}R._pushContext();C=h(C);V=I?C.apply(void 0,V):C(V);f=R._popContext();return t.checkForgottenReturns(V,f,"Promise.using",R),V}),R=U.lastly(function(){var V=new a.PromiseInspection(U);return k(L,V)});return L.promise=R,R._setOnCancel(L),R};a.prototype._setDisposable=function(A){this._bitField|=131072;this._disposer=A};a.prototype._isDisposable=function(){return 0<(131072&this._bitField)};a.prototype._getDisposer=function(){return this._disposer};a.prototype._unsetDisposable=function(){this._bitField&=
-131073;this._disposer=void 0};a.prototype.disposer=function(A){if("function"==typeof A)return new g(A,this,p());throw new u;}}},{"./errors":12,"./util":36}],36:[function(b,l,q){function a(){try{var h=e;return e=null,h.apply(this,arguments)}catch(A){return k.e=A,k}}function c(h){return null==h||!0===h||!1===h||"string"==typeof h||"number"==typeof h}function y(h,A,C){return c(h)?h:(v.defineProperty(h,A,{value:C,configurable:!0,enumerable:!1,writable:!0}),h)}function p(h){return null!==h&&"object"==
typeof h&&"string"==typeof h.message&&"string"==typeof h.name}function m(h){return p(h)&&v.propertyIsWritable(h,"stack")}function t(h){return{}.toString.call(h)}var v=b("./es5");b="undefined"==typeof navigator;var k={e:{}},e;q="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null;var g=function(){var h=[Array.prototype,Object.prototype,Function.prototype],A=function(I){for(var L=0;L<h.length;++L)if(h[L]===I)return!0;return!1};if(v.isES5){var C=
Object.getOwnPropertyNames;return function(I){for(var L=[],K=Object.create(null);null!=I&&!A(I);){try{var N=C(I)}catch(V){break}for(var T=0;T<N.length;++T){var U=N[T];if(!K[U]){K[U]=!0;var R=Object.getOwnPropertyDescriptor(I,U);null!=R&&null==R.get&&null==R.set&&L.push(U)}}I=v.getPrototypeOf(I)}return L}}var F={}.hasOwnProperty;return function(I){if(A(I))return[];var L=[],K;a:for(K in I){if(!F.call(I,K))for(var N=0;N<h.length;++N)if(F.call(h[N],K))continue a;L.push(K)}return L}}(),n=/this\s*\.\s*\S+\s*=/,
w=/^[a-z$_][a-z$_0-9]*$/i,x=function(){return"stack"in Error()?function(h){return m(h)?h:Error(h+"")}:function(h){if(m(h))return h;try{throw Error(h+"");}catch(A){return A}}}(),u=function(h){return v.isArray(h)?h:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var z="function"==typeof Array.from?function(h){return Array.from(h)}:function(h){for(var A=[],C=h[Symbol.iterator]();!(h=C.next()).done;)A.push(h.value);return A};u=function(h){return v.isArray(h)?h:null!=h&&"function"==typeof h[Symbol.iterator]?
z(h):null}}var E="undefined"!=typeof process&&"[object process]"===t(process).toLowerCase();b={isClass:function(h){try{if("function"==typeof h){var A=v.names(h.prototype),C=v.isES5&&1<A.length,F=0<A.length&&!(1===A.length&&"constructor"===A[0]),I=n.test(h+"")&&0<v.names(h).length;if(C||F||I)return!0}return!1}catch(L){return!1}},isIdentifier:function(h){return w.test(h)},inheritedDataKeys:g,getDataPropertyOrDefault:function(h,A,C){if(!v.isES5)return{}.hasOwnProperty.call(h,A)?h[A]:void 0;h=Object.getOwnPropertyDescriptor(h,
A);return null!=h?null==h.get&&null==h.set?h.value:C:void 0},thrower:function(h){throw h;},isArray:v.isArray,asArray:u,notEnumerableProp:y,isPrimitive:c,isObject:function(h){return"function"==typeof h||"object"==typeof h&&null!==h},isError:p,canEvaluate:b,errorObj:k,tryCatch:function(h){return e=h,a},inherits:function(h,A){function C(){this.constructor=h;this.constructor$=A;for(var I in A.prototype)F.call(A.prototype,I)&&"$"!==I.charAt(I.length-1)&&(this[I+"$"]=A.prototype[I])}var F={}.hasOwnProperty;
return C.prototype=A.prototype,h.prototype=new C,h.prototype},withAppended:function(h,A){var C,F=h.length,I=Array(F+1);for(C=0;F>C;++C)I[C]=h[C];return I[C]=A,I},maybeWrapAsError:function(h){return c(h)?Error(h+""):h},toFastProperties:function(h){function A(){}A.prototype=h;for(var C=8;C--;)new A;return h},filledRange:function(h,A,C){for(var F=Array(h),I=0;h>I;++I)F[I]=A+I+C;return F},toString:function(h){return h+""},canAttachTrace:m,ensureErrorObject:x,originatesFromRejection:function(h){return null==
h?!1:h instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===h.isOperational},markAsOriginatingFromRejection:function(h){try{y(h,"isOperational",!0)}catch(A){}},classString:t,copyDescriptors:function(h,A,C){for(var F=v.names(h),I=0;I<F.length;++I){var L=F[I];if(C(L))try{v.defineProperty(A,L,v.getDescriptor(h,L))}catch(K){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:E,env:function(h,A){return E?process.env[h]:A},global:q};b.isRecentNode=b.isNode&&
function(){var h=process.versions.node.split(".").map(Number);return 0===h[0]&&10<h[1]||0<h[0]}();b.isNode&&b.toFastProperties(process);try{throw Error();}catch(h){b.lastLineError=h}l.exports=b},{"./es5":13}]},{},[4])(4)});"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);tagged.namespace("util");tagged.util.log={toConsole:function(){if("undefined"!=typeof console&&"function"===typeof console.log)try{window.console.log.apply(window.console,arguments)}catch(d){}}};tagged.extend("apps.facebook.core",{getSDK:function(){return this._promiseSDK},withSDK:function(d){return this.getSDK().then(d)},init:function(){this._promiseSDK=new Promise(function(q,a){window.fbAsyncInit=function(){if(!tagged.data.fbSDKInitData)if(tagged.json.facebookconnect)tagged.loadData(tagged.json.facebookconnect);else return;FB.init(tagged.data.fbSDKInitData);q(FB)}});var d="en",b="US";if(tagged.data.fbSDKLocale){var l=tagged.data.fbSDKLocale.match(/([a-z]{2})[\-_]?([A-Z]{2})/);l&&(d=l[1],
b=l[2])}l=$.proxy(function(q,a,c){var y=q.getElementsByTagName(a)[0];q.getElementById(c)||(q=q.createElement(a),q.id=c,q.src="//connect.facebook.net/"+d+"_"+b+"/all.js",y.parentNode.insertBefore(q,y))},this,document,"script","facebook-jssdk");tagged.apps.facebook.core.options&&tagged.apps.facebook.core.options.initOnLoad?$(l):l()},logout:function(){return new Promise(function(d,b){try{FB.init(tagged.data.fbSDKInitData)}catch(l){tagged.util.log.toConsole("Failed to load FB SDK");d();return}setTimeout(function(){tagged.util.log.toConsole("FB request timeout");
d()},1E3);FB.getLoginStatus(function(l){"connected"===l.status?FB.logout(function(q){d()}):d()},!0)})}});tagged.apps.facebook.core.init();tagged.extend("apps.facebook.verification",{beginFacebookVerification:function(d,b){if(tagged.data.fbSDKInitData){var l=function(q){"connected"===q.status?tagged.apps.facebook.verification.bindFacebookAccount(q.authResponse.userID,function(){tagged.apps.facebook.verification.checkFacebookFriendsPermission(d,b)},b):b({code:1,message:"The app was not authorized"})};FB.getLoginStatus(function(q){"connected"===q.status?tagged.apps.facebook.verification.bindFacebookAccount(q.authResponse.userID,function(){tagged.apps.facebook.verification.checkFacebookFriendsPermission(d,
b)},b):FB.login(l,{scope:tagged.data.fbScope})})}},checkFacebookFriendsPermission:function(d,b){tagged.apps.facebook.verification.checkSpecificPermission("user_friends",function(){tagged.apps.facebook.verification.checkFriendsListSize(d,b)},function(){var l=function(){tagged.apps.facebook.verification.checkFriendsListSize(d,b)},q=function(){b({code:2,message:"The required permission was not granted"})};FB.login(function(a){"connected"===a.status?tagged.apps.facebook.verification.bindFacebookAccount(a.authResponse.userID,
function(){tagged.apps.facebook.verification.checkSpecificPermission("user_friends",l,q)},b):b({code:1,message:"The app was not authorized"})},{scope:tagged.data.fbScope})})},checkSpecificPermission:function(d,b,l){FB.api("/me/permissions",function(q){q&&q.data&&q.data[0]?1===q.data[0][d]?b():l():l()})},checkFriendsListSize:function(d,b){var l=function(q){q&&q.stat&&"ok"===q.stat?d():b({code:q.error.code,message:q.error.message})};FB.getLoginStatus(function(q){"connected"===q.status?q.authResponse&&
q.authResponse.accessToken?tagged.api.call({method:"tagged.account.auth.addFacebookVerification",accessToken:q.authResponse.accessToken,fbId:q.authResponse.userID,callback:l}):b({code:3,message:"Unknown error."}):b({code:1,message:"The app was not authorized"})})},bindFacebookAccount:function(d,b,l){tagged.api.call({method:"tagged.account.connect.link",serviceId:d,callback:function(q){q&&q.result&&q.result.status&&!0===q.result.status?b():l({code:4,message:"Unable to link your Facebook account to your Tagged account"})}})}});(function(){tagged="undefined"!=typeof tagged?tagged:{};tagged.namespace||(tagged.namespace=function(){var d=arguments,b=null,l,q;for(l=0;l<d.length;l+=1){var a=(""+d[l]).split(".");b=this;for(q=0;q<a.length;q++)b[a[q]]=b[a[q]]||{},b=b[a[q]]}return b})})();tagged.namespace("modules.lightbox");
tagged.modules.lightbox={_shell:"<div>%s</div>",_dialog:null,_config:null,_parentEl:null,init:function(d){if(!d||!d.body)return!1;this._parentEl||(this._parentEl=$("<div class='dialog-parent'></div>"),$(document.body).append(this._parentEl));this._config=d;var b=sprintf(this._shell,d.body);this._parentEl.html(b);this._dialog=$(this._parentEl).dialog({open:function(l,q){$(".ui-dialog .ui-dialog-titlebar-close").blur();$(".ui-dialog").focus();if(d.onDialogOpen)d.onDialogOpen($(this).parent())},create:d.create||
function(){},buttons:d.buttons||!1,modal:!0,resizable:!1,closeOnEscape:d.closeOnEscape||!0,position:d.position||"center",autoOpen:d.autoOpen||!1,title:d.title,width:d.width||"auto",height:d.height||"auto",minHeight:d.minHeight||150,dialogClass:d.className||"",zIndex:d.zIndex||1002});$(this.getDialogDom()).addClass("tagged_lightbox");d.id&&$(this.getDialogDom()).attr("id",d.id);"undefined"!==typeof d.closeOnEscape&&this._dialog.dialog("option","closeOnEscape",d.closeOnEscape);d.title||($(".ui-dialog-titlebar").css("background",
"none"),this._dialog.css("margin-top",0));this._config.isStatic||$(window).resize($.proxy(tagged.modules.lightbox.reposition,this,"center","center",window));d.className&&this._dialog.dialog("option","dialogClass",d.className);this.setEventHandlers();"undefined"!==typeof d.notshow&&d.notshow||this.show();return this},setEventHandlers:function(){this._config.destroyOnClose&&(this._dialog.off("dialogclose.dest"),this._dialog.on("dialogclose.dest",$.proxy(function(d,b){this.destroy()},this)))},setBody:function(d){this.isAlive()&&
(d instanceof jQuery?this._dialog.empty().append(d):this._dialog.html(d))},getBodyEl:function(){return this._parentEl},setHeight:function(d){this.isAlive()&&this._dialog.dialog("option","height",d)},setTitle:function(d){this.isAlive()&&this._dialog.dialog("option","title",d)},getDialogDom:function(){return this.isAlive()?this._dialog.dialog("widget"):!1},isAlive:function(){return this._dialog&&this._dialog.is(":ui-dialog")},isOpen:function(){return this.isAlive()&&this._dialog.dialog("isOpen")},show:function(){if(this.isAlive()&&
(this._dialog.dialog("open"),this._config.clickOff))$(".ui-widget-overlay").on("click",$.proxy(this.hide,this))},reposition:function(d,b,l){this.isAlive()&&this._dialog.dialog("widget").position({my:d,at:b,of:l})},center:function(){this.isAlive()&&this._dialog.dialog("option","position","center")},setCss:function(d,b){this.isAlive()&&this._dialog.dialog("widget").css(d,b);return this},setBodyCss:function(d,b){this.isAlive()&&this._dialog.css(d,b)},_close:function(){this._dialog.dialog("close");this._dialog.hide()},
hide:function(){if(this.isAlive()){var d=this._config.fadeOut;if(!d)return this._close();$(".ui-widget-overlay").fadeOut(d);$(this.getDialogDom()).fadeOut(d,$.proxy(this._close,this))}},destroy:function(){this.isAlive()&&(this._dialog.dialog("destroy"),this._dialog.hide());this._parentEl.remove();delete this._parentEl},registerCallback:function(d,b){switch(d){case "close":this._dialog.bind("dialogclose",$.proxy(function(l,q){b()},this))}},handleResize:function(){var d=.96*$(document).width();if(724>
d)var b=280;else d=724,b=400;this._dialog.dialog("option","width",d);this._dialog.dialog("option","minHeight",b)}};"undefined"===typeof tagged&&(tagged={});tagged.jst=tagged.jst||{};tagged.jst.escapeHTML=function(d){return"string"!==typeof d?d:d.replace(/&(?!\w+;)|["'<>\\]/g,function(b){switch(b){case "&":return"&amp;";case "\\":return"\\\\";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return b}})};tagged.jst.toEscapedJSON=function(d){return JSON.stringify(d,function(b,l){return tagged.jst.escapeHTML(l)})};
tagged.jst.render=function(d,b){d=d.split(".");var l=tagged.jst,q;for(q in d)l=l[d[q]];return l.render.apply(this,[b])};tagged.namespace("jst.regpath.tos_accept_initial");
tagged.jst.regpath.tos_accept_initial.render=function(d){d=d||{};var b=[],l=TAGGED.jst.xssFilter;try{with(d)b.push('<div class="id-info-txt"> '),b.push(l(sprintf('By clicking "Accept Terms" I agree to the <a href="%1$s">Terms of Service</a> and confirm that I have read and understood the <a href="%2$s">Privacy Policy</a>.',"/terms_of_service.html","/terms_of_service.html#privacy_policy"))),b.push('</div><div class="id-code-box module"> <input style="min-width:225px; height:60px;" type="submit" class="id-webmail btn decline-btn" name="decline_button" value="'),b.push(l(declineTermsText)),
b.push('"/></div><div class="id-code-box module"> '),b.push(' <input style="min-width:225px; height:60px;" type="submit" class="id-webmail btn confirm-btn" name="confirm_button" value="'),b.push(l(acceptTermsText)),b.push('"/></div><div class="id-change-email-box"> <div class="id-email-box module"></div></div>');return b.join("")}catch(q){if("undefined"!==typeof window&&window._jstFailuresRaise)throw q;alert('template error in "regpath/tos_accept_initial.jst":\n\n'+q)}return""};tagged.namespace("jst.regpath.tos_accept_final");
tagged.jst.regpath.tos_accept_final.render=function(d){d=d||{};var b=[],l=TAGGED.jst.xssFilter;try{with(d)b.push('<div class="id-info-txt"> '),b.push(l(sprintf('If you don\'t accept the <a href="%1$s">Terms of Service</a> and <a href="%2$s">Privacy Policy</a>, you can\'t continue to use %3$s.',"/terms_of_service.html","/terms_of_service.html#privacy_policy",brand))),b.push('</div><div class="id-code-box module"> <input style="min-width:225px; height:60px;" type="submit" class="id-webmail btn decline-btn" name="decline_button" value="'),b.push(l(declineTermsText)),
b.push('"/></div><div class="id-code-box module"> '),b.push(' <input style="min-width:225px; height:60px;" type="submit" class="id-webmail btn confirm-btn" name="confirm_button" value="'),b.push(l(acceptTermsText)),b.push('"/></div><div class="id-change-email-box"> <div class="id-email-box module"></div></div>');return b.join("")}catch(q){if("undefined"!==typeof window&&window._jstFailuresRaise)throw q;alert('template error in "regpath/tos_accept_final.jst":\n\n'+q)}return""};tagged.namespace("regpath");
tagged.regpath.tosAcceptanceChecker={maybeForceTOSAcceptOrDecline:function(d){if(!1===tagged.data.forceAcceptOrDeclineTOS)d();else{var b=tagged.modules.lightbox.init({title:this.strings.registration,className:"pretty no_close validation_box registration-tos-confirm registration-tos-confirm-initial",closeOnEscape:!1,body:tagged.jst.regpath.tos_accept_initial.render({acceptTermsText:this.strings.acceptTerms,declineTermsText:this.strings.decline})});$(".registration-tos-confirm-initial .confirm-btn").on("click",function(){d();
b.hide()});$(".registration-tos-confirm-initial .decline-btn").on("click",function(){tagged.regpath.tosAcceptanceChecker._openAreYouSureDeclineTOS(d)})}},_openAreYouSureDeclineTOS:function(d){var b=tagged.getBrand(),l=tagged.modules.lightbox.init({title:this.strings.areYouSure,className:"pretty no_close validation_box registration-tos-confirm registration-tos-confirm-final",closeOnEscape:!1,body:tagged.jst.regpath.tos_accept_final.render({acceptTermsText:this.strings.acceptTerms,declineTermsText:this.strings.decline,
brand:b})});$(".registration-tos-confirm-final .confirm-btn").on("click",function(){d()});$(".registration-tos-confirm-final .decline-btn").on("click",function(){l.destroy()})},performThirdPartyLoginOrRegistration:function(d,b,l){b={method:d,autoCreate:!0===b?"1":"0",callback:function(a){a&&a.result?(a=a.result,a.unregistered?tagged.regpath.tosAcceptanceChecker.maybeForceTOSAcceptOrDecline(function(){tagged.regpath.tosAcceptanceChecker.performThirdPartyLoginOrRegistration(d,!0,l)}):a.redirect&&(window.location.href=
a.redirect)):window.location.href=l}};var q=tagged.regpath.tosAcceptanceChecker.determineRegSource();q&&(b.pageName=q);tagged.api.call(b)},determineRegSource:function(){if(null!==window.location.search.toString().match(/state=outa/))return"logout";switch(document.location.pathname){case "/":case "/index.html":return"index";case "/register.html":return"register"}return null}};/*
 2013 Tagged, Inc. All Rights Reserved
 @requires jquery
 @requires tagged/namespace.js
 @requires tagged/regpath/tosAcceptanceChecker.js
 @requires security/validation.css
*/
(function(){var d=window.tagged||{};d.google={hybridLogin:{init:function(){var l=document.createElement("script");l.type="text/javascript";l.async=!0;l.src="https://apis.google.com/js/client:plusone.js?onload=setupGPlusSignin";$("body").append(l)}}};window.setupGPlusSignin=function(){var l=d.data.googleApiClientID,q=d.data.googleApppackageName,a=d.data.googleApiScopes.join(" ");$(".google_login_click").click(function(c){c.preventDefault();d.api.call({method:"tagged.log.registrationClick",source:"Google"});
window.fbq&&fbq("track","Lead");gapi.auth.signIn({callback:"signInCallback",clientid:l,cookiepolicy:"single_host_origin",apppackagename:q,scope:a,approvalprompt:"auto",accesstype:"online"})})};window.signInCallback=function(l){l.code&&$.ajax({type:"POST",url:d.data.gplusContinueLoginUrl,contentType:"application/x-www-form-urlencoded",success:b,data:{code:l.code,csrftoken:d.data.csrftoken,hybrid:!0},dataType:"json"})};var b=function(l){!0===l.success&&d.regpath.tosAcceptanceChecker.performThirdPartyLoginOrRegistration("tagged.connect.googleLogin",
!1===d.data.forceAcceptOrDeclineTOS,"/register.html?err=1020")}})();tagged.loadStringsDirect({"tagged.regpath.tosAcceptanceChecker.strings":{registration:"Registration",acceptTerms:"Accept Terms",decline:"Decline",areYouSure:"Are you sure?"}});/*
 2013 Tagged, Inc. All Rights Reserved
 @requires jquery
 @requires tagged/regpath/registerGoogleConnectHybrid.js
*/
$(function(){tagged.google.hybridLogin.init()});tagged.namespace("tagcom.menu");
tagged.tagcom.menu={menuRegistry:{},create:function(d,b,l,q,a,c,y,p){var m=new this.Menu(d,b,l,q,a,c,y,p);switch(m.type){case "click":m.parent.click(function(t){"hidden"==m.menu.css("visibility")?(m.open(),t.stopPropagation()):m.close();t.preventDefault()});break;case "hover":d=function(t){this.isInside(t.pageX-1,t.pageY-1)?$(document).bind("mousemove.menu_"+m.id,$.proxy(function(v){this.isInside(v.pageX-1,v.pageY-1)||this.close()},this)):this.close()};m.parent.bind("mouseenter.menu_"+m.id,function(t){m.open();
$(document).unbind(".menu"+m.id);t.preventDefault()}).bind("mouseleave.menu_"+m.id,$.proxy(d,m));m.menu.bind("mouseleave.menu_"+m.id,$.proxy(d,m));break;default:return null}m.menu.bind("click.menu_",function(t){tagged.tagcom.menu.onSelection(t,m)});return this.menuRegistry[m.id]=m},findMenuPos:function(d){var b=d.menu,l=d.parent,q=d.placement,a=d.container,c=l.offset();d=c.top;var y=d+l.outerHeight();c=c.left;var p=c+l.outerWidth(),m=a.offset()||{top:0,left:0},t=m.top,v=t+a.height();m=m.left;a=m+
a.width();var k=!1,e=!1;switch(q){case "down":var g=d+l.outerHeight();var n=c;g+b.outerHeight()<v&&(k=!0);break;case "up":g=d-b.outerHeight();n=c;if(g>t){k=!0;break}"up"==q&&(g=d+l.outerHeight(),n=c,g+b.outerHeight()<v&&(k=!0));break;case "right":g=d;n=p;n+b.outerWidth()<a&&(e=!0);break;case "left":g=d;n=c-b.outerWidth();if(n>m){e=!0;break}g=d;n=p;n+b.outerWidth()<a&&(e=!0);break;default:n=g=0,alert("Error, menu imposible to place!")}k&&n+b.outerWidth()>=a&&(n=p-b.outerWidth());e&&g+b.outerHeight()>=
v&&(g=y-b.outerHeight());e&&g<=t&&(g=v-b.outerHeight());return{top:g,left:n}},onSelection:function(d,b){b.callback($(d.target),b)||b.close()},getMenu:function(d){return this.menuRegistry[d]},unregisterMenu:function(d){delete this.menuRegistry[d]},Menu:function(d,b,l,q,a,c,y,p){d=$(d);b=$(b);c=c||"click";y=y||"down";p=$(p||document);this.id=d.attr("id");this.menu=d;this.parent=b;this.callback=l;this.openCallback=q;this.closeCallback=a;this.placement=y;this.container=p;this.type=c;this.close=function(){"visible"==
this.menu.css("visibility")&&(this.menu.css({visibility:"hidden",left:"",top:""}),$(document).unbind(".menu_"+this.id),this.closeCallback&&this.closeCallback(this))};this.closeOthers=function(){var m=tagged.tagcom.menu.menuRegistry,t;for(t in m)t!=this.id&&m[t].close()};this.open=function(){if("hidden"==this.menu.css("visibility")){var m=tagged.tagcom.menu.findMenuPos(this);this.menu.offset(m).offset(m).css("visibility","visible");this.closeOthers();"click"==this.type&&$(document).bind("click.menu_"+
this.id,$.proxy(function(t){this.close()},this));this.openCallback&&this.openCallback(this)}};this.unbind=function(){var m=".menu_"+this.id;this.parent.unbind(m);this.menu.unbind(m);$(document).unbind(m);tagged.tagcom.menu.unregisterMenu(this.id)};this.isInside=function(m,t){var v=this.parent.offset();v.right=v.left+this.parent.outerWidth();v.bottom=v.top+this.parent.outerHeight();var k=this.menu.offset();k.right=k.left+this.menu.outerWidth();k.bottom=k.top+this.menu.outerHeight();k=m>Math.ceil(k.left)&&
m<k.right&&t>Math.ceil(k.top)&&t<=k.bottom;return m>Math.ceil(v.left)&&m<v.right&&t>Math.ceil(v.top)&&t<=v.bottom||k}}};function formatStuff(d,b,l,q){var a=q.offset();a.right=a.left+q.outerWidth();a.bottom=a.top+q.outerHeight();q=l.offset();q.right=q.left+l.outerWidth();q.bottom=q.top+l.outerHeight();return""+d+","+b+" \n "+a.left+"-"+a.right+","+a.top+"-"+a.bottom+" \n "+q.left+"-"+q.right+","+q.top+"-"+q.bottom};tagged.namespace("jst.modules.modal");
tagged.jst.modules.modal.render=function(d){d=d||{};var b=[],l=TAGGED.jst.xssFilter;try{with(d)b.push('<div class="modal hide ui-dialog" id="'),b.push(l(id)),b.push('"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">\u00d7</button> <h1 class="modal-header-title">'),b.push(title),b.push('</h1> </div> <div class="modal-body"> '),b.push(body),b.push(' </div> <div class="modal-footer"> '),b.push(footer),b.push(" </div></div>");return b.join("")}catch(q){if("undefined"!==
typeof window&&window._jstFailuresRaise)throw q;alert('template error in "modules/modal.jst":\n\n'+q)}return""};tagged.namespace("modules.modals");
tagged.modules.modals={config:null,create:function(d){this.config=d=$.extend({},tagged.modules.modals.defaults,d);var b=tagged.jst.modules.modal.render(d);$(document.body).append(b);d.footer||$("#"+d.id+" > .modal-footer").hide();d.width&&$("#"+d.id).css("width",d.width);b=$(window).scrollTop();var l=$(window).scrollLeft(),q=new this.Modal(d);window.scrollTo(l,b);q.center();$(window).on("resize scroll",function(){$.proxy(q.center,q)});return q},Modal:function(d){this.id=d.id;this.body=d.body;this.title=
d.title;this.footer=d.footer;this.el=$('div[id="'+d.id+'"]');this.modal=$("#"+d.id).modal({backdrop:d.backdrop||!0,show:d.show||!1,keyboard:d.keyboard||!0})},defaults:{body:"",title:"",footer:""}};tagged.modules.modals.Modal.prototype={center:function(){this.el.css({position:"fixed",marginTop:Math.max(0,this.el.outerHeight())/-2+"px",marginLeft:Math.max(0,this.el.outerWidth())/-2+"px",top:"50%",left:"50%"})},hide:function(){this.modal.modal("hide")},show:function(){this.modal.modal("show")}};tagged.namespace("jst.languages.modal");
tagged.jst.languages.modal.render=function(d){d=d||{};var b=[],l=TAGGED.jst.xssFilter;try{with(d){b.push('<div id="language_modal_body" class="container-fluid"> <div class="row-fluid"> ');var q=languages.length;for(d=0;d<cols;++d){b.push(' <div class="');b.push(l(colspan));b.push('"> <ul class="menu_list unstyled man"> ');for(var a=d;a<q;a+=cols){var c=languages[a].locale;b.push(' <li id="');b.push(l(c));b.push('" class="menu_item language_item custom " style="font-size: 14px;"> <img src="');b.push(l(languages[a].flag));
b.push('" class="language-flag" /> <span>');b.push(l(languages[a].name));b.push("</span> ");user_lang_code==c&&b.push(' <i class="tag-icon-status status_icon_available tag-icon-green-check language-check" id="status_icon"></i> ');b.push(" </li> ")}b.push(" <ul> </div> ")}b.push(" </div></div>")}return b.join("")}catch(y){if("undefined"!==typeof window&&window._jstFailuresRaise)throw y;alert('template error in "languages/modal.jst":\n\n'+y)}return""};tagged.namespace("languages.modal");
tagged.languages.modal={config:null,_instance:null,getInstance:function(d){this._instance||(this._instance=this._create(d));return this._instance},_create:function(d){this.config={id:"language-modal",title:d.title,cols:d.cols||3,backdrop:"none",keyboard:!0,height:d.height,width:d.width};this.config.body=this._body(this.config.cols);d=tagged.modules.modals.create(this.config);this._attachHandler();return d},_body:function(d){var b=tagged.data.lang;b.cols=d;b.colspan="span"+12/d;return tagged.jst.languages.modal.render(b)},
_attachHandler:function(){var d=this;$(".language_item").on("click",function(b){b=this.id;var l=$(this).parent().find(".tag-icon-status");l.remove();$(this).append(l);d._changeLanguage(b);d.dialog.hide()})},_changeLanguage:function(d){TAGGED.api.call({method:"tagged.account.setUserLanguage",langCode:d,origin:"language_modal",callback:{fn:tagged.languageUpdated}})}};tagged.namespace("footer");
tagged.footer={init:function(){tagged.tagcom.menu.create("#language_menu","#language_dropup",this.onLanguageSelect,this.onOpen,this.onClose,"click","up");$(".language").on("click",function(){tagged.footer.onLanguageSelect($(this))})},onOpen:function(d){d.parent.addClass("opened")},onClose:function(d){d.parent.removeClass("opened")},onLanguageSelect:function(d,b){d={method:"tagged.account.setUserLanguage",langCode:d.attr("id"),origin:"footer",callback:{fn:tagged.languageUpdated}};TAGGED.api.call(d)}};
$(function(){tagged.footer.init()});
</script>

</body>
</html>
