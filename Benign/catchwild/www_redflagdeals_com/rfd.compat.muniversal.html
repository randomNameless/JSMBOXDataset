<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rfd.compat.muniversal.html</title>
</head>
<body>

<script>
function MUniversalCompatibility(){this.defaultSlotName="";this.setPage=function(a){this.defaultSlotName=a};this.getPage=function(){return this.defaultSlotName};this.getKeywords=function(a){return[]};this.getKeyValues=function(a){return{}};this.buildSlotName=function(a){var b=a.split("/").pop();return"redflagdeals/"+b};this.bob={click_wallpaper:function(b){var a=document;a.onclick=function(c){var d=c||event;d&&"BODY"==(d.target?d.target:d.srcElement).tagName&&window.open(b.click)},a.onmouseover=function(d){var c=d||event;c&&("BODY"==(c.target?c.target:c.srcElement).tagName?document.body.style.cursor="pointer":document.body.style.cursor="auto")}},collapse:function(a){document.getElementById(a).style.display="none"},collapseByClass:function(a){document.getElementsByClassName(a)[0].style.display="none"},seeByClass:function(a){document.getElementsByClassName(a)[0].style.display="block"},wallpaper:function(a){return document.body.style.backgroundImage="url("+a.src+")",document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundColor=a.bgc,document.body.style.backgroundPosition="top center",document.body.style.backgroundAttachment=a.bga,this.click_wallpaper({click:a.clk}),this},bannerRezise:function(a){return null!=a.height&&(document.getElementById(a.div).style.height="auto",document.getElementById(a.div).getElementsByTagName("iframe")[0].style.height=String(a.height)+"px"),null!=a.width&&(document.getElementById(a.div).style.width="auto",document.getElementById(a.div).getElementsByTagName("iframe")[0].style.width=String(a.width)+"px"),this},bannerResize:function(a){return null!=a.height&&(document.getElementById(a.div).style.height="auto",document.getElementById(a.div).getElementsByTagName("iframe")[0].style.height=String(a.height)+"px"),null!=a.width&&(document.getElementById(a.div).style.width="auto",document.getElementById(a.div).getElementsByTagName("iframe")[0].style.width=String(a.width)+"px"),this}};this.spot=function(c){var b={target:c.target,dimensions:this.parseSpotSizes(c.width,c.height),slotName:this.getPage(),keywords:this.getKeywords(),keyValues:this.getKeyValues(),collapseEmptyDiv:false,autoRefresh:false,site:"redflagdeals"};var a=this.cleanMuniversalParams(b,c);a=this.handleCustomCases(a);a=this.handleContentTags(a);window.RFD.placements.createSlot(a);if(window.RFD.placements.firstDisplayStatus){window.RFD.placements.displaySlot(a.target)}};this.parseSpotSizes=function(b,a){var c=[];if(typeof b=="object"&&b.length===2&&typeof a=="object"&&a.length===2){c.push(b);c.push(a)}else{c.push([b,a])}return c};this.cleanMuniversalParams=function(a,b){if(!a.keywords){a.keywords=[]}if(!a.keyValues){a.keyValues={}}Object.keys(a.keyValues).forEach(function(c){if(!Array.isArray(a.keyValues[c])){a.keyValues[c]=[a.keyValues[c]]}});a.slotName=this.buildSlotName(a.slotName);if(0===window.location.hostname.indexOf("staging")||0===window.location.hostname.indexOf("localhost")){a.keyValues.folder1=["test"]}if(!a.keyValues.channel){a.keyValues.channel=[]}if(a.keyValues.channel.indexOf("retail")===-1){a.keyValues.channel=a.keyValues.channel.concat(["retail"])}a.keyValues.site=[a.site];if(!a.keyValues.pos&&typeof b.position=="string"){if(b.position.indexOf("btf")!==-1){a.keyValues.pos=["below"]}else{if(b.position.indexOf("atf")!==-1){a.keyValues.pos=["above"]}}}a.keyValues.save=[a.target];a.keyValues.mc=[b.mortcalc];a.autoRefresh=typeof b.refresh!="undefined"?b.refresh:false;return a};this.handleCustomCases=function(a){if(this.checkSlotMatchesDimensions(a,1,3)||this.checkSlotMatchesDimensions(a,108,108)||this.checkSlotMatchesDimensions(a,1,4)){a.collapseEmptyDiv=true;a.dimensions.push([1,1])}if(a.dimensions[0][0]==="fluid"){a.collapseEmptyDiv=true;a.dimensions=[["fluid"]]}if(this.checkSlotMatchesDimensions(a,120,70)){a.collapseEmptyDiv=true}return a};this.handleContentTags=function(d){var a=document.getElementsByClassName("tags");var c=document.getElementsByClassName("thread_tags");if(a.length>0||c.length>0){var b=[];if(a.length>0){b=b.concat(this.getTagTextFromTagListContainer(a[0]))}if(c.length>0){b=b.concat(this.getTagTextFromTagListContainer(c[0]))}d.keyValues.tags=b.slice(0)}return d};this.getTagTextFromTagListContainer=function(c){var a=[];var d=c.getElementsByTagName("a");for(var b=0;b<d.length;b++){a.push(d[b].textContent)}return a};this.checkSlotMatchesDimensions=function(c,b,a){var d=false;c.dimensions.forEach(function(e){if(e[0]===b&&e[1]===a){d=true}});return d}}var MUNIVERSAL=new MUniversalCompatibility();function adTakeover(){var a=$("#takeover_large__ad_bigbox");if(a.length>0){$("body").addClass("has_takeover");var c={target:"block"===window.getComputedStyle(a[0],null).getPropertyValue("display")?"takeover_large__ad_bigbox":"takeover_small__ad_bigbox",dimensions:[[300,250]],slotName:MUNIVERSAL.getPage(),keywords:MUNIVERSAL.getKeywords(),keyValues:MUNIVERSAL.getKeyValues()};var b=MUNIVERSAL.cleanMuniversalParams(c,{mortcalc:0});window.RFD.placements.createSlot(b);window.RFD.placements.displaySlot(b.target)}};
</script>

</body>
</html>
