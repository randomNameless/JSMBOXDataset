<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>index.esm.html</title>
</head>
<body>

<script>
/*! BMWUSA Vite Build 1731603678170 */
import{c as cookies,a as dist,n as commonjsGlobal,m as getDefaultExportFromCjs}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-measurement-data.js";import{i as isAuthor}from"./is-author.js";function getMode(){return cookies.get("wcmmode")}/*!
 * css-vars-ponyfill
 * v1.14.0
 * https://github.com/jhildenbiddle/css-vars-ponyfill
 * (c) 2018 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_nonIterableSpread()}function _arrayWithoutHoles(r){if(Array.isArray(r)){for(var e=0,n=new Array(r.length);e<r.length;e++)n[e]=r[e];return n}}function _iterableToArray(r){if(Symbol.iterator in Object(r)||Object.prototype.toString.call(r)==="[object Arguments]")return Array.from(r)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}/*!
 * get-css-data
 * v1.5.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function getUrls(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={mimeType:e.mimeType||null,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},t=Array.isArray(r)?r:[r],i=Array.apply(null,Array(t.length)).map(function(s){return null});function o(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=s.trim().charAt(0)==="<";return!u}function a(s,u){n.onError(s,t[u],u)}function l(s,u){var c=n.onSuccess(s,t[u],u);s=c===!1?"":c||s,i[u]=s,i.indexOf(null)===-1&&n.onComplete(i)}t.forEach(function(s,u){var c=document.createElement("a");c.setAttribute("href",s),c.href=String(c.href);var p=c.host!==location.host,h=c.protocol===location.protocol;if(p&&typeof XDomainRequest<"u")if(h){var d=new XDomainRequest;d.open("GET",s),d.timeout=0,d.onprogress=Function.prototype,d.ontimeout=Function.prototype,d.onload=function(){o(d.responseText)?l(d.responseText,u):a(d,u)},d.onerror=function(g){a(d,u)},setTimeout(function(){d.send()},0)}else console.log("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol"),a(null,u);else{var m=new XMLHttpRequest;m.open("GET",s),n.mimeType&&m.overrideMimeType&&m.overrideMimeType(n.mimeType),n.onBeforeSend(m,s,u),m.onreadystatechange=function(){m.readyState===4&&(m.status===200&&o(m.responseText)?l(m.responseText,u):a(m,u))},m.send()}})}/**
 * Gets CSS data from <style> and <link> nodes (including @imports), then
 * returns data in order processed by DOM. Allows specifying nodes to
 * include/exclude and filtering CSS data using RegEx.
 *
 * @preserve
 * @param {object}   [options] The options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes.
 * @param {string}   [options.include] CSS selector matching <link> and <style>
 *                   nodes to include
 * @param {string}   [options.exclude] CSS selector matching <link> and <style>
 *                   nodes to exclude
 * @param {object}   [options.filter] Regular expression used to filter node CSS
 *                   data. Each block of CSS data is tested against the filter,
 *                   and only matching data is included.
 * @param {object}   [options.useCSSOM=false] Determines if CSS data will be
 *                   collected from a stylesheet's runtime values instead of its
 *                   text content. This is required to get accurate CSS data
 *                   when a stylesheet has been modified using the deleteRule()
 *                   or insertRule() methods because these modifications will
 *                   not be reflected in the stylesheet's text content.
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments.
 * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
 *                   1) CSS text, 2) source node reference, and 3) the source
 *                   URL as arguments.
 * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
 *                   object for inspection, 2) soure node reference, and 3) the
 *                   source URL that failed (either a <link> href or an @import)
 *                   as arguments
 * @param {function} [options.onComplete] Callback after all nodes have been
 *                   processed. Passes 1) concatenated CSS text, 2) an array of
 *                   CSS text in DOM order, and 3) an array of nodes in DOM
 *                   order as arguments.
 *
 * @example
 *
 *   getCssData({
 *     rootElement: document,
 *     include    : 'style,link[rel="stylesheet"]',
 *     exclude    : '[href="skip.css"]',
 *     filter     : /red/,
 *     useCSSOM   : false,
 *     onBeforeSend(xhr, node, url) {
 *       // ...
 *     }
 *     onSuccess(cssText, node, url) {
 *       // ...
 *     }
 *     onError(xhr, node, url) {
 *       // ...
 *     },
 *     onComplete(cssText, cssArray, nodeArray) {
 *       // ...
 *     }
 *   });
 */function getCssData(r){var e={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},n={rootElement:r.rootElement||document,include:r.include||'style,link[rel="stylesheet"]',exclude:r.exclude||null,filter:r.filter||null,useCSSOM:r.useCSSOM||!1,onBeforeSend:r.onBeforeSend||Function.prototype,onSuccess:r.onSuccess||Function.prototype,onError:r.onError||Function.prototype,onComplete:r.onComplete||Function.prototype},t=Array.apply(null,n.rootElement.querySelectorAll(n.include)).filter(function(u){return!matchesSelector(u,n.exclude)}),i=Array.apply(null,Array(t.length)).map(function(u){return null});function o(){var u=i.indexOf(null)===-1;if(u){var c=i.join("");n.onComplete(c,i,t)}}function a(u,c,p,h){var d=n.onSuccess(u,p,h);u=d===!1?"":d||u,s(u,p,h,function(m,g){i[c]===null&&(g.forEach(function(E){return n.onError(E.xhr,p,E.url)}),!n.filter||n.filter.test(m)?i[c]=m:i[c]="",o())})}function l(u,c){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],h={};return h.rules=(u.replace(e.cssComments,"").match(e.cssImports)||[]).filter(function(d){return p.indexOf(d)===-1}),h.urls=h.rules.map(function(d){return d.replace(e.cssImports,"$1")}),h.absoluteUrls=h.urls.map(function(d){return getFullUrl(d,c)}),h.absoluteRules=h.rules.map(function(d,m){var g=h.urls[m],E=getFullUrl(h.absoluteUrls[m],c);return d.replace(g,E)}),h}function s(u,c,p,h){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],m=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[],g=l(u,p,m);g.rules.length?getUrls(g.absoluteUrls,{onBeforeSend:function(y,S,b){n.onBeforeSend(y,c,S)},onSuccess:function(y,S,b){var _=n.onSuccess(y,c,S);y=_===!1?"":_||y;var A=l(y,S,m);return A.rules.forEach(function(F,x){y=y.replace(F,A.absoluteRules[x])}),y},onError:function(y,S,b){d.push({xhr:y,url:S}),m.push(g.rules[b]),s(u,c,p,h,d,m)},onComplete:function(y){y.forEach(function(S,b){u=u.replace(g.rules[b],S)}),s(u,c,p,h,d,m)}}):h(u,d)}t.length?t.forEach(function(u,c){var p=u.getAttribute("href"),h=u.getAttribute("rel"),d=u.nodeName==="LINK"&&p&&h&&h.toLowerCase()==="stylesheet",m=u.nodeName==="STYLE";if(d)getUrls(p,{mimeType:"text/css",onBeforeSend:function(y,S,b){n.onBeforeSend(y,u,S)},onSuccess:function(y,S,b){var _=getFullUrl(p,location.href);a(y,c,u,_)},onError:function(y,S,b){i[c]="",n.onError(y,u,S),o()}});else if(m){var g=u.textContent;n.useCSSOM&&(g=Array.apply(null,u.sheet.cssRules).map(function(E){return E.cssText}).join("")),a(g,c,u,location.href)}else i[c]="",o()}):n.onComplete("",[])}function getFullUrl(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),t=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(t),n.body.appendChild(i),t.href=e,i.href=r,i.href}function matchesSelector(r,e){var n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;return n.call(r,e)}function mergeDeep(){for(var r=function(o){return o instanceof Object&&o.constructor===Object},e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce(function(i,o){return Object.keys(o).forEach(function(a){var l=i[a],s=o[a];r(l)&&r(s)?i[a]=mergeDeep(l,s):i[a]=s}),i},{})}var balancedMatch=balanced;function balanced(r,e,n){r instanceof RegExp&&(r=maybeMatch(r,n)),e instanceof RegExp&&(e=maybeMatch(e,n));var t=range(r,e,n);return t&&{start:t[0],end:t[1],pre:n.slice(0,t[0]),body:n.slice(t[0]+r.length,t[1]),post:n.slice(t[1]+e.length)}}function maybeMatch(r,e){var n=e.match(r);return n?n[0]:null}balanced.range=range;function range(r,e,n){var t,i,o,a,l,s=n.indexOf(r),u=n.indexOf(e,s+1),c=s;if(s>=0&&u>0){for(t=[],o=n.length;c>=0&&!l;)c==s?(t.push(c),s=n.indexOf(r,c+1)):t.length==1?l=[t.pop(),u]:(i=t.pop(),i<o&&(o=i,a=u),u=n.indexOf(e,c+1)),c=s<u&&s>=0?s:u;t.length&&(l=[o,a])}return l}function cssParse(r){var e=[];function n(f){throw new Error("CSS parse error: ".concat(f))}function t(f){var v=f.exec(r);if(v)return r=r.slice(v[0].length),v}function i(){t(/^\s*/)}function o(){return t(/^{\s*/)}function a(){return t(/^}/)}function l(){if(i(),!(r[0]!=="/"||r[1]!=="*")){for(var f=2;r[f]&&(r[f]!=="*"||r[f+1]!=="/");)f++;if(!r[f])return n("end of comment is missing");var v=r.slice(2,f);return r=r.slice(f+2),{type:"comment",comment:v}}}function s(){for(var f=[],v;v=l();)f.push(v);return f}function u(){for(i();r[0]==="}";)n("extra closing bracket");var f=t(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(f)return f[0].trim().replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(v){return v.replace(/,/g,"‌")}).split(/\s*(?![^(]*\)),\s*/).map(function(v){return v.replace(/\u200C/g,",")})}function c(){t(/^([;\s]*)+/);var f=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//g,v=t(/^(\*?[-#\/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(v){if(v=v[0].trim(),!t(/^:\s*/))return n("property missing ':'");var R=t(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),w={type:"declaration",property:v.replace(f,""),value:R?R[0].replace(f,"").trim():""};return t(/^[;\s]*/),w}}function p(){if(!o())return n("missing '{'");for(var f,v=s();f=c();)v.push(f),v=v.concat(s());return a()?v:n("missing '}'")}function h(){i();for(var f=[],v;v=t(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)f.push(v[1]),t(/^,\s*/);if(f.length)return{type:"keyframe",values:f,declarations:p()}}function d(){var f=t(/^@([-\w]+)?keyframes\s*/);if(f){var v=f[1];if(f=t(/^([-\w]+)\s*/),!f)return n("@keyframes missing name");var R=f[1];if(!o())return n("@keyframes missing '{'");for(var w,O=s();w=h();)O.push(w),O=O.concat(s());return a()?{type:"keyframes",name:R,vendor:v,keyframes:O}:n("@keyframes missing '}'")}}function m(){var f=t(/^@page */);if(f){var v=u()||[];return{type:"page",selectors:v,declarations:p()}}}function g(){var f=t(/^@font-face\s*/);if(f)return{type:"font-face",declarations:p()}}function E(){var f=t(/^@supports *([^{]+)/);if(f)return{type:"supports",supports:f[1].trim(),rules:C()}}function y(){var f=t(/^@host\s*/);if(f)return{type:"host",rules:C()}}function S(){var f=t(/^@media *([^{]+)/);if(f)return{type:"media",media:f[1].trim(),rules:C()}}function b(){var f=t(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(f)return{type:"custom-media",name:f[1].trim(),media:f[2].trim()}}function _(){var f=t(/^@([-\w]+)?document *([^{]+)/);if(f)return{type:"document",document:f[2].trim(),vendor:f[1]?f[1].trim():null,rules:C()}}function A(){var f=t(/^@(import|charset|namespace)\s*([^;]+);/);if(f)return{type:f[1],name:f[2].trim()}}function F(){if(i(),r[0]==="@")return d()||E()||y()||S()||b()||m()||_()||g()||A()}function x(){var f=u()||[];f.length||n("selector missing");var v=p();return{type:"rule",selectors:f,declarations:v}}function C(f){if(!f&&!o())return n("missing '{'");for(var v,R=s();r.length&&(f||r[0]!=="}")&&(v=F()||x());)R.push(v),R=R.concat(s());return!f&&!a()?n("missing '}'"):R}return{type:"stylesheet",stylesheet:{rules:C(!0),errors:e}}}function stringifyCss(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,t={charset:function(a){return"@charset "+a.name+";"},comment:function(a){return a.comment.indexOf("__CSSVARSPONYFILL")===0?"/*"+a.comment+"*/":""},"custom-media":function(a){return"@custom-media "+a.name+" "+a.media+";"},declaration:function(a){return a.property+":"+a.value+";"},document:function(a){return"@"+(a.vendor||"")+"document "+a.document+"{"+i(a.rules)+"}"},"font-face":function(a){return"@font-face{"+i(a.declarations)+"}"},host:function(a){return"@host{"+i(a.rules)+"}"},import:function(a){return"@import "+a.name+";"},keyframe:function(a){return a.values.join(",")+"{"+i(a.declarations)+"}"},keyframes:function(a){return"@"+(a.vendor||"")+"keyframes "+a.name+"{"+i(a.keyframes)+"}"},media:function(a){return"@media "+a.media+"{"+i(a.rules)+"}"},namespace:function(a){return"@namespace "+a.name+";"},page:function(a){return"@page "+(a.selectors.length?a.selectors.join(", "):"")+"{"+i(a.declarations)+"}"},rule:function(a){var l=a.declarations;if(l.length)return a.selectors.join(",")+"{"+i(l)+"}"},supports:function(a){return"@supports "+a.supports+"{"+i(a.rules)+"}"}};function i(o){for(var a="",l=0;l<o.length;l++){var s=o[l];n&&n(s);var u=t[s.type](s);u&&(a+=u,u.length&&s.selectors&&(a+=e))}return a}return i(r.stylesheet.rules)}function walkCss(r,e){r.rules.forEach(function(n){if(n.rules){walkCss(n,e);return}if(n.keyframes){n.keyframes.forEach(function(t){t.type==="keyframe"&&e(t.declarations,n)});return}n.declarations&&e(n.declarations,r)})}var VAR_PROP_IDENTIFIER="--",VAR_FUNC_IDENTIFIER="var",variableStore={dom:{},temp:{},user:{}};function transformVars(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={fixNestedCalc:!0,onlyVars:!0,persist:!1,preserve:!1,variables:{},onWarning:function(){}},t=mergeDeep(n,e),i=t.persist?variableStore.dom:variableStore.temp=JSON.parse(JSON.stringify(variableStore.dom)),o=cssParse(r);if(t.onlyVars&&(o.stylesheet.rules=filterVars(o.stylesheet.rules)),o.stylesheet.rules.forEach(function(l){var s=[];if(l.type==="rule"&&!(l.selectors.length!==1||l.selectors[0]!==":root")&&(l.declarations.forEach(function(c,p){var h=c.property,d=c.value;h&&h.indexOf(VAR_PROP_IDENTIFIER)===0&&(i[h]=d,s.push(p))}),!t.preserve))for(var u=s.length-1;u>=0;u--)l.declarations.splice(s[u],1)}),Object.keys(variableStore.user).forEach(function(l){i[l]=variableStore.user[l]}),Object.keys(t.variables).length){var a={declarations:[],selectors:[":root"],type:"rule"};Object.keys(t.variables).forEach(function(l){var s="--".concat(l.replace(/^-+/,"")),u=t.variables[l];t.persist&&(variableStore.user[s]=u),i[s]!==u&&(i[s]=u,a.declarations.push({type:"declaration",property:s,value:u}))}),t.preserve&&a.declarations.length&&o.stylesheet.rules.push(a)}return walkCss(o.stylesheet,function(l,s){for(var u,c,p,h=0;h<l.length;h++)u=l[h],p=u.value,u.type==="declaration"&&(!p||p.indexOf(VAR_FUNC_IDENTIFIER+"(")===-1||(c=resolveValue(p,i,t),c!==u.value&&(t.preserve?(l.splice(h,0,{type:u.type,property:u.property,value:c}),h++):u.value=c)))}),t.fixNestedCalc&&fixNestedCalc(o.stylesheet.rules),stringifyCss(o)}function filterVars(r){return r.filter(function(e){if(e.declarations){var n=e.declarations.filter(function(t){var i=t.property&&t.property.indexOf(VAR_PROP_IDENTIFIER)===0,o=t.value&&t.value.indexOf(VAR_FUNC_IDENTIFIER+"(")>-1;return i||o});return e.type!=="font-face"&&(e.declarations=n),!!n.length}else{if(e.keyframes)return!!e.keyframes.filter(function(t){return!!t.declarations.filter(function(i){var o=i.property&&i.property.indexOf(VAR_PROP_IDENTIFIER)===0,a=i.value&&i.value.indexOf(VAR_FUNC_IDENTIFIER+"(")>-1;return o||a}).length}).length;if(e.rules)return e.rules=filterVars(e.rules).filter(function(t){return t.declarations&&t.declarations.length}),!!e.rules.length}return!0})}function fixNestedCalc(r){var e=/(-[a-z]+-)?calc\(/;r.forEach(function(n){n.declarations&&n.declarations.forEach(function(t){for(var i=t.value,o="";e.test(i);){var a=balancedMatch("calc(",")",i||"");for(i=i.slice(a.end);e.test(a.body);){var l=balancedMatch(e,")",a.body);a.body="".concat(l.pre,"(").concat(l.body,")").concat(l.post)}o+="".concat(a.pre,"calc(").concat(a.body),o+=e.test(i)?"":")".concat(a.post)}t.value=o||t.value})})}function resolveValue(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3?arguments[3]:void 0,i=balancedMatch("var(",")",r),o="CSS transform warning:";function a(l){var s=l.split(",")[0],u=(l.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],c=e.hasOwnProperty(s)?String(e[s]):void 0,p=c||(u?String(u):void 0),h=t||l;return c||n.onWarning("".concat(o,' variable "').concat(s,'" is undefined')),p&&p!=="undefined"&&p.length>0?resolveValue(p,e,n,h):"var(".concat(h,")")}return i?i.body.trim().length===0?(n.onWarning("".concat(o," var() must contain a non-whitespace string")),r):i.pre+a(i.body)+resolveValue(i.post,e,n):(r.indexOf("var(")!==-1&&n.onWarning("".concat(o,' missing closing ")" in the value "').concat(r,'"')),r)}var name="css-vars-ponyfill",isBrowser=typeof window<"u",isNativeSupport=isBrowser&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),defaults={rootElement:isBrowser?document:null,include:"style,link[rel=stylesheet]",exclude:"",fixNestedCalc:!0,onlyLegacy:!0,onlyVars:!1,preserve:!1,shadowDOM:!1,silent:!1,updateDOM:!0,updateURLs:!0,variables:{},watch:null,onBeforeSend:function(){},onSuccess:function(){},onWarning:function(){},onError:function(){},onComplete:function(){}},regex={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssRootRules:/(?::root\s*{\s*[^}]*})/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVars:/(?:(?::root\s*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},cssVarsObserver=null,isShadowDOMReady=!1;/**
 * Fetches, parses, and transforms CSS custom properties from specified
 * <style> and <link> elements into static values, then appends a new <style>
 * element with static values to the DOM to provide CSS custom property
 * compatibility for legacy browsers. Also provides a single interface for
 * live updates of runtime values in both modern and legacy browsers.
 *
 * @preserve
 * @param {object}   [options] Options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes.
 * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
 *                   matching <link re="stylesheet"> and <style> nodes to
 *                   process
 * @param {string}   [options.exclude] CSS selector matching <link
 *                   rel="stylehseet"> and <style> nodes to exclude from those
 *                   matches by options.include
 * @param {boolean}  [options.fixNestedCalc=true] Removes nested 'calc' keywords
 *                   for legacy browser compatibility.
 * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
 *                   only generate legacy-compatible CSS in browsers that lack
 *                   native support (i.e., legacy browsers)
 * @param {boolean}  [options.onlyVars=false] Determines if CSS rulesets and
 *                   declarations without a custom property value should be
 *                   removed from the ponyfill-generated CSS
 * @param {boolean}  [options.preserve=false] Determines if the original CSS
 *                   custom property declaration will be retained in the
 *                   ponyfill-generated CSS.
 * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
 *                   and <style> nodes will be processed.
 * @param {boolean}  [options.silent=false] Determines if warning and error
 *                   messages will be displayed on the console
 * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
 *                   update the DOM after processing CSS custom properties
 * @param {boolean}  [options.updateURLs=true] Determines if the ponyfill will
 *                   convert relative url() paths to absolute urls.
 * @param {object}   [options.variables] A map of custom property name/value
 *                   pairs. Property names can omit or include the leading
 *                   double-hyphen (—), and values specified will override
 *                   previous values.
 * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
 *                   be created that will execute the ponyfill when a <link> or
 *                   <style> DOM mutation is observed.
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments.
 * @param {function} [options.onSuccess] Callback after CSS data has been
 *                   collected from each node and before CSS custom properties
 *                   have been transformed. Allows modifying the CSS data before
 *                   it is transformed by returning any string value (or false
 *                   to skip). Passes 1) CSS text, 2) source node reference, and
 *                   3) the source URL as arguments.
 * @param {function} [options.onWarning] Callback after each CSS parsing warning
 *                   has occurred. Passes 1) a warning message as an argument.
 * @param {function} [options.onError] Callback after a CSS parsing error has
 *                   occurred or an XHR request has failed. Passes 1) an error
 *                   message, and 2) source node reference, 3) xhr, and 4 url as
 *                   arguments.
 * @param {function} [options.onComplete] Callback after all CSS has been
 *                   processed, legacy-compatible CSS has been generated, and
 *                   (optionally) the DOM has been updated. Passes 1) a CSS
 *                   string with CSS variable values resolved, 2) a reference to
 *                   the appended <style> node, and 3) an object containing all
 *                   custom properies names and values.
 *
 * @example
 *
 *   cssVars({
 *     rootElement  : document,
 *     include      : 'style,link[rel="stylesheet"]',
 *     exclude      : '',
 *     fixNestedCalc: true,
 *     onlyLegacy   : true,
 *     onlyVars     : false,
 *     preserve     : false,
 *     shadowDOM    : false,
 *     silent       : false,
 *     updateDOM    : true,
 *     updateURLs   : true,
 *     variables    : {
 *       // ...
 *     },
 *     watch        : false,
 *     onBeforeSend(xhr, node, url) {
 *       // ...
 *     }
 *     onSuccess(cssText, node, url) {
 *       // ...
 *     },
 *     onWarning(message) {
 *       // ...
 *     },
 *     onError(message, node) {
 *       // ...
 *     },
 *     onComplete(cssText, styleNode) {
 *       // ...
 *     }
 *   });
 */function cssVars(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=mergeDeep(defaults,r),n=name;e.exclude="#".concat(n)+(e.exclude?",".concat(e.exclude):"");function t(l,s,u,c){e.silent||console.error("".concat(l,`
`),s),e.onError(l,s,u,c)}function i(l){e.silent||console.warn(l),e.onWarning(l)}if(isBrowser)if(document.readyState!=="loading"){var o=e.shadowDOM||e.rootElement.shadowRoot||e.rootElement.host;if(isNativeSupport&&e.onlyLegacy){if(e.updateDOM){var a=e.rootElement.host||(e.rootElement===document?document.documentElement:e.rootElement);Object.keys(e.variables).forEach(function(l){var s="--".concat(l.replace(/^-+/,"")),u=e.variables[l];a.style.setProperty(s,u)})}}else o&&!isShadowDOMReady?getCssData({rootElement:defaults.rootElement,include:defaults.include,exclude:e.exclude,onSuccess:function(s,u,c){var p=(s.match(regex.cssRootRules)||[]).join("");return p||!1},onComplete:function(s,u,c){transformVars(s,{persist:!0}),isShadowDOMReady=!0,cssVars(e)}}):(e.watch?addMutationObserver(e,n):e.watch===!1&&cssVarsObserver&&cssVarsObserver.disconnect(),getCssData({rootElement:e.rootElement,include:e.include,exclude:e.exclude,filter:e.onlyVars?regex.cssVars:null,onBeforeSend:e.onBeforeSend,onSuccess:function(s,u,c){var p=e.onSuccess(s,u,c);if(s=p===!1?"":p||s,e.updateURLs){var h=s.replace(regex.cssComments,"").match(regex.cssUrls)||[];h.forEach(function(d){var m=d.replace(regex.cssUrls,"$1"),g=getFullUrl$1(m,c);s=s.replace(d,d.replace(m,g))})}return s},onError:function(s,u,c){var p=s.responseURL||getFullUrl$1(c,location.href),h=s.statusText?"(".concat(s.statusText,")"):"Unspecified Error"+(s.status===0?" (possibly CORS related)":""),d="CSS XHR Error: ".concat(p," ").concat(s.status," ").concat(h);t(d,u,s,p)},onComplete:function(s,u,c){var p=/\/\*__CSSVARSPONYFILL-(\d+)__\*\//g,h=null;s=u.map(function(_,A){return regex.cssVars.test(_)?_:"/*__CSSVARSPONYFILL-".concat(A,"__*/")}).join("");try{s=transformVars(s,{fixNestedCalc:e.fixNestedCalc,onlyVars:e.onlyVars,persist:e.updateDOM,preserve:e.preserve,variables:e.variables,onWarning:i});var d=regex.cssKeyframes.test(s);if(s=s.replace(p,function(_,A){return u[A]}),e.updateDOM&&c&&c.length){var m=c[c.length-1];h=e.rootElement.querySelector("#".concat(n))||document.createElement("style"),h.setAttribute("id",n),h.textContent!==s&&(h.textContent=s),m.nextSibling!==h&&m.parentNode&&m.parentNode.insertBefore(h,m.nextSibling),d&&fixKeyframes(e.rootElement)}}catch(_){var g=!1;u.forEach(function(A,F){try{A=transformVars(A,e)}catch(C){var x=c[F-0];g=!0,t(C.message,x)}}),g||t(_.message||_)}if(e.shadowDOM){for(var E=[e.rootElement].concat(_toConsumableArray(e.rootElement.querySelectorAll("*"))),y=0,S;S=E[y];++y)if(S.shadowRoot&&S.shadowRoot.querySelector("style")){var b=mergeDeep(e,{rootElement:S.shadowRoot,variables:variableStore.dom});cssVars(b)}}e.onComplete(s,h,JSON.parse(JSON.stringify(e.updateDOM?variableStore.dom:variableStore.temp)))}}))}else document.addEventListener("DOMContentLoaded",function l(s){cssVars(r),document.removeEventListener("DOMContentLoaded",l)})}function addMutationObserver(r,e){if(window.MutationObserver){var n=function(a){return a.tagName==="LINK"&&(a.getAttribute("rel")||"").indexOf("stylesheet")!==-1},t=function(a){return a.tagName==="STYLE"&&(e?a.id!==e:!0)},i=null;cssVarsObserver&&cssVarsObserver.disconnect(),r.watch=defaults.watch,cssVarsObserver=new MutationObserver(function(o){var a=!1;o.forEach(function(l){if(l.type==="attributes")a=n(l.target)||t(l.target);else if(l.type==="childList"){var s=Array.apply(null,l.addedNodes),u=Array.apply(null,l.removedNodes);a=[].concat(s,u).some(function(c){var p=n(c)&&!c.disabled,h=t(c)&&!c.disabled&&regex.cssVars.test(c.textContent);return p||h})}a&&(clearTimeout(i),i=setTimeout(function(){cssVars(r)},1))})}),cssVarsObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0})}}function fixKeyframes(r){var e=["animation-name","-moz-animation-name","-webkit-animation-name"].filter(function(h){return getComputedStyle(document.body)[h]})[0];if(e){for(var n=r.getElementsByTagName("*"),t=[],i="__CSSVARSPONYFILL-KEYFRAMES__",o=0,a=n.length;o<a;o++){var l=n[o],s=getComputedStyle(l)[e];s!=="none"&&(l.style[e]+=i,t.push(l))}document.body.offsetHeight;for(var u=0,c=t.length;u<c;u++){var p=t[u].style;p[e]=p[e].replace(i,"")}}}function getFullUrl$1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),t=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(t),n.body.appendChild(i),t.href=e,i.href=r,i.href}const getViewportHeight=r=>{let e="100vh";return r&&(e=`${window.innerHeight}px`),e};function setCssVarsPonyFillConfig(r){cssVars({exclude:"#at-body-style",variables:{"--viewportHeight":getViewportHeight(r)}})}setCssVarsPonyFillConfig(isAuthor());const aem={getMode,isAuthor};var md5$1={exports:{}};(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&typeof dist.process=="object"&&dist.process.versions&&dist.process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(r){return typeof r=="object"&&r.buffer&&r.buffer.constructor===ArrayBuffer});var createOutputMethod=function(r){return function(e){return new Md5(!0).update(e)[r]()}},createMethod=function(){var r=createOutputMethod("hex");NODE_JS&&(r=nodeWrap(r)),r.create=function(){return new Md5},r.update=function(t){return r.create().update(t)};for(var e=0;e<OUTPUT_TYPES.length;++e){var n=OUTPUT_TYPES[e];r[n]=createOutputMethod(n)}return r},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(r){if(typeof r=="string")return crypto.createHash("md5").update(r,"utf8").digest("hex");if(r==null)throw ERROR;return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===Buffer?crypto.createHash("md5").update(new Buffer(r)).digest("hex"):method(r)};return nodeMethod};function Md5(r){if(r)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(r){if(!this.finalized){var e,n=typeof r;if(n!=="string"){if(n==="object"){if(r===null)throw ERROR;if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw ERROR}else throw ERROR;e=!0}for(var t,i=0,o,a=r.length,l=this.blocks,s=this.buffer8;i<a;){if(this.hashed&&(this.hashed=!1,l[0]=l[16],l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),e)if(ARRAY_BUFFER)for(o=this.start;i<a&&o<64;++i)s[o++]=r[i];else for(o=this.start;i<a&&o<64;++i)l[o>>2]|=r[i]<<SHIFT[o++&3];else if(ARRAY_BUFFER)for(o=this.start;i<a&&o<64;++i)t=r.charCodeAt(i),t<128?s[o++]=t:t<2048?(s[o++]=192|t>>6,s[o++]=128|t&63):t<55296||t>=57344?(s[o++]=224|t>>12,s[o++]=128|t>>6&63,s[o++]=128|t&63):(t=65536+((t&1023)<<10|r.charCodeAt(++i)&1023),s[o++]=240|t>>18,s[o++]=128|t>>12&63,s[o++]=128|t>>6&63,s[o++]=128|t&63);else for(o=this.start;i<a&&o<64;++i)t=r.charCodeAt(i),t<128?l[o>>2]|=t<<SHIFT[o++&3]:t<2048?(l[o>>2]|=(192|t>>6)<<SHIFT[o++&3],l[o>>2]|=(128|t&63)<<SHIFT[o++&3]):t<55296||t>=57344?(l[o>>2]|=(224|t>>12)<<SHIFT[o++&3],l[o>>2]|=(128|t>>6&63)<<SHIFT[o++&3],l[o>>2]|=(128|t&63)<<SHIFT[o++&3]):(t=65536+((t&1023)<<10|r.charCodeAt(++i)&1023),l[o>>2]|=(240|t>>18)<<SHIFT[o++&3],l[o>>2]|=(128|t>>12&63)<<SHIFT[o++&3],l[o>>2]|=(128|t>>6&63)<<SHIFT[o++&3],l[o>>2]|=(128|t&63)<<SHIFT[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[e>>2]|=EXTRA[e&3],e>=56&&(this.hashed||this.hash(),r[0]=r[16],r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.bytes<<3,r[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var r,e,n,t,i,o,a=this.blocks;this.first?(r=a[0]-680876937,r=(r<<7|r>>>25)-271733879<<0,t=(-1732584194^r&2004318071)+a[1]-117830708,t=(t<<12|t>>>20)+r<<0,n=(-271733879^t&(r^-271733879))+a[2]-1126478375,n=(n<<17|n>>>15)+t<<0,e=(r^n&(t^r))+a[3]-1316259209,e=(e<<22|e>>>10)+n<<0):(r=this.h0,e=this.h1,n=this.h2,t=this.h3,r+=(t^e&(n^t))+a[0]-680876936,r=(r<<7|r>>>25)+e<<0,t+=(n^r&(e^n))+a[1]-389564586,t=(t<<12|t>>>20)+r<<0,n+=(e^t&(r^e))+a[2]+606105819,n=(n<<17|n>>>15)+t<<0,e+=(r^n&(t^r))+a[3]-1044525330,e=(e<<22|e>>>10)+n<<0),r+=(t^e&(n^t))+a[4]-176418897,r=(r<<7|r>>>25)+e<<0,t+=(n^r&(e^n))+a[5]+1200080426,t=(t<<12|t>>>20)+r<<0,n+=(e^t&(r^e))+a[6]-1473231341,n=(n<<17|n>>>15)+t<<0,e+=(r^n&(t^r))+a[7]-45705983,e=(e<<22|e>>>10)+n<<0,r+=(t^e&(n^t))+a[8]+1770035416,r=(r<<7|r>>>25)+e<<0,t+=(n^r&(e^n))+a[9]-1958414417,t=(t<<12|t>>>20)+r<<0,n+=(e^t&(r^e))+a[10]-42063,n=(n<<17|n>>>15)+t<<0,e+=(r^n&(t^r))+a[11]-1990404162,e=(e<<22|e>>>10)+n<<0,r+=(t^e&(n^t))+a[12]+1804603682,r=(r<<7|r>>>25)+e<<0,t+=(n^r&(e^n))+a[13]-40341101,t=(t<<12|t>>>20)+r<<0,n+=(e^t&(r^e))+a[14]-1502002290,n=(n<<17|n>>>15)+t<<0,e+=(r^n&(t^r))+a[15]+1236535329,e=(e<<22|e>>>10)+n<<0,r+=(n^t&(e^n))+a[1]-165796510,r=(r<<5|r>>>27)+e<<0,t+=(e^n&(r^e))+a[6]-1069501632,t=(t<<9|t>>>23)+r<<0,n+=(r^e&(t^r))+a[11]+643717713,n=(n<<14|n>>>18)+t<<0,e+=(t^r&(n^t))+a[0]-373897302,e=(e<<20|e>>>12)+n<<0,r+=(n^t&(e^n))+a[5]-701558691,r=(r<<5|r>>>27)+e<<0,t+=(e^n&(r^e))+a[10]+38016083,t=(t<<9|t>>>23)+r<<0,n+=(r^e&(t^r))+a[15]-660478335,n=(n<<14|n>>>18)+t<<0,e+=(t^r&(n^t))+a[4]-405537848,e=(e<<20|e>>>12)+n<<0,r+=(n^t&(e^n))+a[9]+568446438,r=(r<<5|r>>>27)+e<<0,t+=(e^n&(r^e))+a[14]-1019803690,t=(t<<9|t>>>23)+r<<0,n+=(r^e&(t^r))+a[3]-187363961,n=(n<<14|n>>>18)+t<<0,e+=(t^r&(n^t))+a[8]+1163531501,e=(e<<20|e>>>12)+n<<0,r+=(n^t&(e^n))+a[13]-1444681467,r=(r<<5|r>>>27)+e<<0,t+=(e^n&(r^e))+a[2]-51403784,t=(t<<9|t>>>23)+r<<0,n+=(r^e&(t^r))+a[7]+1735328473,n=(n<<14|n>>>18)+t<<0,e+=(t^r&(n^t))+a[12]-1926607734,e=(e<<20|e>>>12)+n<<0,i=e^n,r+=(i^t)+a[5]-378558,r=(r<<4|r>>>28)+e<<0,t+=(i^r)+a[8]-2022574463,t=(t<<11|t>>>21)+r<<0,o=t^r,n+=(o^e)+a[11]+1839030562,n=(n<<16|n>>>16)+t<<0,e+=(o^n)+a[14]-35309556,e=(e<<23|e>>>9)+n<<0,i=e^n,r+=(i^t)+a[1]-1530992060,r=(r<<4|r>>>28)+e<<0,t+=(i^r)+a[4]+1272893353,t=(t<<11|t>>>21)+r<<0,o=t^r,n+=(o^e)+a[7]-155497632,n=(n<<16|n>>>16)+t<<0,e+=(o^n)+a[10]-1094730640,e=(e<<23|e>>>9)+n<<0,i=e^n,r+=(i^t)+a[13]+681279174,r=(r<<4|r>>>28)+e<<0,t+=(i^r)+a[0]-358537222,t=(t<<11|t>>>21)+r<<0,o=t^r,n+=(o^e)+a[3]-722521979,n=(n<<16|n>>>16)+t<<0,e+=(o^n)+a[6]+76029189,e=(e<<23|e>>>9)+n<<0,i=e^n,r+=(i^t)+a[9]-640364487,r=(r<<4|r>>>28)+e<<0,t+=(i^r)+a[12]-421815835,t=(t<<11|t>>>21)+r<<0,o=t^r,n+=(o^e)+a[15]+530742520,n=(n<<16|n>>>16)+t<<0,e+=(o^n)+a[2]-995338651,e=(e<<23|e>>>9)+n<<0,r+=(n^(e|~t))+a[0]-198630844,r=(r<<6|r>>>26)+e<<0,t+=(e^(r|~n))+a[7]+1126891415,t=(t<<10|t>>>22)+r<<0,n+=(r^(t|~e))+a[14]-1416354905,n=(n<<15|n>>>17)+t<<0,e+=(t^(n|~r))+a[5]-57434055,e=(e<<21|e>>>11)+n<<0,r+=(n^(e|~t))+a[12]+1700485571,r=(r<<6|r>>>26)+e<<0,t+=(e^(r|~n))+a[3]-1894986606,t=(t<<10|t>>>22)+r<<0,n+=(r^(t|~e))+a[10]-1051523,n=(n<<15|n>>>17)+t<<0,e+=(t^(n|~r))+a[1]-2054922799,e=(e<<21|e>>>11)+n<<0,r+=(n^(e|~t))+a[8]+1873313359,r=(r<<6|r>>>26)+e<<0,t+=(e^(r|~n))+a[15]-30611744,t=(t<<10|t>>>22)+r<<0,n+=(r^(t|~e))+a[6]-1560198380,n=(n<<15|n>>>17)+t<<0,e+=(t^(n|~r))+a[13]+1309151649,e=(e<<21|e>>>11)+n<<0,r+=(n^(e|~t))+a[4]-145523070,r=(r<<6|r>>>26)+e<<0,t+=(e^(r|~n))+a[11]-1120210379,t=(t<<10|t>>>22)+r<<0,n+=(r^(t|~e))+a[2]+718787259,n=(n<<15|n>>>17)+t<<0,e+=(t^(n|~r))+a[9]-343485551,e=(e<<21|e>>>11)+n<<0,this.first?(this.h0=r+1732584193<<0,this.h1=e-271733879<<0,this.h2=n-1732584194<<0,this.h3=t+271733878<<0,this.first=!1):(this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+t<<0)},Md5.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,n=this.h2,t=this.h3;return HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,n=this.h2,t=this.h3;return[r&255,r>>8&255,r>>16&255,r>>24&255,e&255,e>>8&255,e>>16&255,e>>24&255,n&255,n>>8&255,n>>16&255,n>>24&255,t&255,t>>8&255,t>>16&255,t>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(16),e=new Uint32Array(r);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,r},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var r,e,n,t="",i=this.array(),o=0;o<15;)r=i[o++],e=i[o++],n=i[o++],t+=BASE64_ENCODE_CHAR[r>>>2]+BASE64_ENCODE_CHAR[(r<<4|e>>>4)&63]+BASE64_ENCODE_CHAR[(e<<2|n>>>6)&63]+BASE64_ENCODE_CHAR[n&63];return r=i[o],t+=BASE64_ENCODE_CHAR[r>>>2]+BASE64_ENCODE_CHAR[r<<4&63]+"==",t};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$1);var md5Exports=md5$1.exports;const md5=getDefaultExportFromCjs(md5Exports);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(r,e,n,t){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(c){try{u(t.next(c))}catch(p){a(p)}}function s(c){try{u(t.throw(c))}catch(p){a(p)}}function u(c){c.done?o(c.value):i(c.value).then(l,s)}u((t=t.apply(r,e||[])).next())})}var fastDeepEqual=function r(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var t,i,o;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(i=t;i--!==0;)if(!r(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),t=o.length,t!==Object.keys(n).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=t;i--!==0;){var a=o[i];if(!r(e[a],n[a]))return!1}return!0}return e!==e&&n!==n};const DEFAULT_ID="__googleMapsScriptId";var LoaderStatus;(function(r){r[r.INITIALIZED=0]="INITIALIZED",r[r.LOADING=1]="LOADING",r[r.SUCCESS=2]="SUCCESS",r[r.FAILURE=3]="FAILURE"})(LoaderStatus||(LoaderStatus={}));class Loader{constructor({apiKey:e,authReferrerPolicy:n,channel:t,client:i,id:o=DEFAULT_ID,language:a,libraries:l=[],mapIds:s,nonce:u,region:c,retries:p=3,url:h="https://maps.googleapis.com/maps/api/js",version:d}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=n,this.channel=t,this.client=i,this.id=o||DEFAULT_ID,this.language=a,this.libraries=l,this.mapIds=s,this.nonce=u,this.region=c,this.retries=p,this.url=h,this.version=d,Loader.instance){if(!fastDeepEqual(this.options,Loader.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Loader.instance.options)}`);return Loader.instance}Loader.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?LoaderStatus.FAILURE:this.done?LoaderStatus.SUCCESS:this.loading?LoaderStatus.LOADING:LoaderStatus.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,n)=>{this.loadCallback(t=>{t?n(t.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,n;if(document.getElementById(this.id)){this.callback();return}const t={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(t).forEach(o=>!t[o]&&delete t[o]),!((n=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||n===void 0)&&n.importLibrary||(o=>{let a,l,s,u="The Google Maps JavaScript API",c="google",p="importLibrary",h="__ib__",d=document,m=window;m=m[c]||(m[c]={});const g=m.maps||(m.maps={}),E=new Set,y=new URLSearchParams,S=()=>a||(a=new Promise((b,_)=>__awaiter(this,void 0,void 0,function*(){var A;yield l=d.createElement("script"),l.id=this.id,y.set("libraries",[...E]+"");for(s in o)y.set(s.replace(/[A-Z]/g,F=>"_"+F[0].toLowerCase()),o[s]);y.set("callback",c+".maps."+h),l.src=this.url+"?"+y,g[h]=b,l.onerror=()=>a=_(Error(u+" could not load.")),l.nonce=this.nonce||((A=d.querySelector("script[nonce]"))===null||A===void 0?void 0:A.nonce)||"",d.head.append(l)})));g[p]?console.warn(u+" only loads once. Ignoring:",o):g[p]=(b,..._)=>E.add(b)&&S().then(()=>g[p](b,..._))})(t);const i=this.libraries.map(o=>this.importLibrary(o));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),o=>{const a=new ErrorEvent("error",{error:o});this.loadErrorCallback(a)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const n=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${n} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},n)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}export{Loader as L,aem as a,md5 as m,setCssVarsPonyFillConfig as s};

</script>

</body>
</html>
