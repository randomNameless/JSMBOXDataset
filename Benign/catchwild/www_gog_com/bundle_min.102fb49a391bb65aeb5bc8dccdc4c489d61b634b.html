<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bundle_min.102fb49a391bb65aeb5bc8dccdc4c489d61b634b.html</title>
</head>
<body>

<script>
!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/assets/",__webpack_require__(__webpack_require__.s=8)}([function(module,exports){module.exports=angular},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.b=unsafeStringify;var __WEBPACK_IMPORTED_MODULE_0__validate_js__=__webpack_require__(2);const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(arr,offset=0){return(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase()}__webpack_exports__.a=function(arr,offset=0){const uuid=unsafeStringify(arr,offset);if(!Object(__WEBPACK_IMPORTED_MODULE_0__validate_js__.a)(uuid))throw TypeError("Stringified UUID is invalid");return uuid}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__regex_js__=__webpack_require__(131);__webpack_exports__.a=function(uuid){return"string"==typeof uuid&&__WEBPACK_IMPORTED_MODULE_0__regex_js__.a.test(uuid)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEventContext=void 0,exports.getEventContext=function(context,categoryName){return categoryName?"menu-"+context+"--"+categoryName:"menu-"+context}},function(module,__webpack_exports__,__webpack_require__){"use strict";let getRandomValues;__webpack_exports__.a=function(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)};const rnds8=new Uint8Array(16)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){var _namespace;if("string"==typeof value&&(value=function(str){str=unescape(encodeURIComponent(str));const bytes=[];for(let i=0;i<str.length;++i)bytes.push(str.charCodeAt(i));return bytes}(value)),"string"==typeof namespace&&(namespace=Object(__WEBPACK_IMPORTED_MODULE_1__parse_js__.a)(namespace)),16!==(null===(_namespace=namespace)||void 0===_namespace?void 0:_namespace.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let bytes=new Uint8Array(16+value.length);if(bytes.set(namespace),bytes.set(value,namespace.length),(bytes=hashfunc(bytes))[6]=15&bytes[6]|version,bytes[8]=63&bytes[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=bytes[i];return buf}return Object(__WEBPACK_IMPORTED_MODULE_0__stringify_js__.b)(bytes)}try{generateUUID.name=name}catch(err){}return generateUUID.DNS=DNS,generateUUID.URL=URL,generateUUID};var __WEBPACK_IMPORTED_MODULE_0__stringify_js__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_1__parse_js__=__webpack_require__(6);const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8"},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__validate_js__=__webpack_require__(2);__webpack_exports__.a=function(uuid){if(!Object(__WEBPACK_IMPORTED_MODULE_0__validate_js__.a)(uuid))throw TypeError("Invalid UUID");let v;const arr=new Uint8Array(16);return arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24,arr[1]=v>>>16&255,arr[2]=v>>>8&255,arr[3]=255&v,arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8,arr[5]=255&v,arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8,arr[7]=255&v,arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8,arr[9]=255&v,arr[10]=(v=parseInt(uuid.slice(24,36),16))/1099511627776&255,arr[11]=v/4294967296&255,arr[12]=v>>>24&255,arr[13]=v>>>16&255,arr[14]=v>>>8&255,arr[15]=255&v,arr}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuCartState=void 0;var angular=__webpack_require__(0),MenuCartState=function(){function MenuCartState(cart,menuProductRepositoryFactory,menuProductRepositoriesManager){this.cart=cart,this.menuProductRepositoryFactory=menuProductRepositoryFactory,this.menuProductRepositoriesManager=menuProductRepositoriesManager;try{this.productsRepository=this.menuProductRepositoryFactory.createMenuProductsRepository("menuProducts")}catch(e){this.productsRepository=this.menuProductRepositoriesManager.getRepository("menuProducts")}this.updateProductsInCart(),this.cart.registerAfterCartUpdateListener(this.updateProductsInCart.bind(this))}return MenuCartState.prototype.updateProductsInCart=function(){this.totalPrice=this.cart.getTotalPrice(),this.productIdsInCart=this.cart.getProducts(),this.productsInCartRecord=this.productsRepository.getProducts(this.productIdsInCart),this.productsInCart=Object.values(this.productsInCartRecord)},MenuCartState.$inject=["cart","menuProductRepositoryFactory","menuProductRepositoriesManager"],MenuCartState}();exports.MenuCartState=MenuCartState,angular.module("menuCartStateComponent").service("menuCartState",MenuCartState)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0),lodash_1=__webpack_require__(9);__webpack_require__(12),__webpack_require__(13),__webpack_require__(14),__webpack_require__(15),__webpack_require__(16),__webpack_require__(17),__webpack_require__(18),__webpack_require__(19);var GogMenu_1=__webpack_require__(20),GogMenuOverlay_1=__webpack_require__(21),GogMenuSearch_1=__webpack_require__(22),GogMenuFeaturesSlider_1=__webpack_require__(23),GogMenuLangAndCurrency_1=__webpack_require__(24),GogMenuSwipe_1=__webpack_require__(25),GogMenuScrollbar_1=__webpack_require__(26),GogMenuCartItemSwipe_1=__webpack_require__(27),MenuDropdown_1=__webpack_require__(28),MenuInternetConnectionStatus_1=__webpack_require__(29),MenuInternetConnectivityStateProvider_1=__webpack_require__(30),MenuGamesCtrl_1=__webpack_require__(31),MenuFriendsCtrl_1=__webpack_require__(32),MenuNow_1=__webpack_require__(33),MenuScrollWidth_1=__webpack_require__(34),MenuAimFactory_1=__webpack_require__(35),highlight_1=__webpack_require__(36),MenuConfigProvider_1=__webpack_require__(37),MenuProductStateFactory_1=__webpack_require__(39),MenuBasicUserData_1=__webpack_require__(40),MenuContainerAppClientIdProvider_1=__webpack_require__(41),MenuGalaxyAccountsProvider_1=__webpack_require__(42),MenuUserStorageProvider_1=__webpack_require__(43),MenuBasicUserDataEndpointSource_1=__webpack_require__(44),MenuContainerAppClientIdEndpointSource_1=__webpack_require__(45),MenuFriends_1=__webpack_require__(46),MenuFriendsPresence_1=__webpack_require__(47),MenuLogout_1=__webpack_require__(48),MenuRedirect_1=__webpack_require__(49);__webpack_require__(50),__webpack_require__(52),__webpack_require__(55),__webpack_require__(59),__webpack_require__(63),__webpack_require__(66),__webpack_require__(70),__webpack_require__(75),__webpack_require__(78),__webpack_require__(81),__webpack_require__(84),__webpack_require__(87),__webpack_require__(91),__webpack_require__(94),__webpack_require__(97),__webpack_require__(100),__webpack_require__(103),__webpack_require__(106),__webpack_require__(109),__webpack_require__(113),__webpack_require__(116),__webpack_require__(119),__webpack_require__(122),__webpack_require__(125),__webpack_require__(141);var MenuNotificationsModule_1=__webpack_require__(143),MenuState_1=__webpack_require__(163),MenuLanguageInUrl_1=__webpack_require__(164),menuCartState_1=__webpack_require__(7),isFeatureEnabled=function(feature){return lodash_1.get(window,"gogMicroservices.menu.features["+feature+"]")},menuModule=angular.module("gogMenuModule",["menuProductComponent","menuProductRepositoryComponent","menuAccountComponent","menuGamesComponent","menuAnonymousComponent","menuSearchComponent","menuBellNotificationsComponent","menuNotificationsPusherComponent","menuNotificationListLoadComponent","menuNotificationsClientComponent","menuNotificationsComponent","menuPendingNotificationsComponent","menuCartComponent","menuWishlistComponent","menuNotificationsRepositoryComponent","menuNotificationFactoryComponent","menuNotificationRelatedPageEnterComponent","menuOwnedProductsComponent","menuDataClientComponent","menuEventBusProxyComponent","menuAccordionComponent","menuWishlistClientComponent","menuAnalyticsComponent","menuEventsTrackerComponent","menuCartStateComponent","ngTouchstart","gogModuleUserStorage","gogModulePusherClient","gogModuleCart","gogModuleCartBackend","gogModuleStarRating","gogModuleTopicParsers","gogModuleCustomScrollbar","gogModuleTracking","gogModuleProductsApiClient"]).directive("gogMenu",function(){return{restrict:"A",controller:GogMenu_1.GogMenu,controllerAs:"menu"}}).directive("gogMenuOverlay",function(){return{restrict:"A",controller:GogMenuOverlay_1.GogMenuOverlay,controllerAs:"menuOverlay"}}).directive("gogMenuSwipe",function(){return{restrict:"A",controller:GogMenuSwipe_1.GogMenuSwipe,controllerAs:"menuSwipe"}}).directive("gogMenuCartItemSwipe",function(){return{restrict:"A",controller:GogMenuCartItemSwipe_1.GogMenuCartItemSwipe}}).directive("gogMenuSearch",function(){return{restrict:"A",controller:GogMenuSearch_1.GogMenuSearch}}).directive("gogMenuFeaturesSlider",function(){return{restrict:"A",controller:GogMenuFeaturesSlider_1.GogMenuFeaturesSlider,controllerAs:"slider"}}).directive("gogMenuScrollbar",function(){return{restrict:"A",controller:GogMenuScrollbar_1.GogMenuScrollbar,controllerAs:"scrollbar"}}).directive("gogMenuLangAndCurrency",function(){return{restrict:"A",controller:GogMenuLangAndCurrency_1.GogMenuLangAndCurrency,controllerAs:"langAndCurrency"}}).service("menuDropdown",MenuDropdown_1.MenuDropdown).service("menuNow",MenuNow_1.MenuNow).service("menuRedirect",MenuRedirect_1.MenuRedirect).service("menuScrollWidth",MenuScrollWidth_1.MenuScrollWidth).service("menuInternetConnectionStatus",MenuInternetConnectionStatus_1.MenuInternetConnectionStatus).service("menuState",MenuState_1.MenuState).service("menuLanguageInUrl",MenuLanguageInUrl_1.MenuLanguageInUrl).service("menuCartState",menuCartState_1.MenuCartState).controller("menuGamesCtrl",MenuGamesCtrl_1.MenuGamesCtrl).factory("menuAimFactory",MenuAimFactory_1.MenuAimFactory).factory("menuProductStateFactory",MenuProductStateFactory_1.MenuProductStateFactory).filter("highlight",highlight_1.highlight).provider("menuInternetConnectivityState",MenuInternetConnectivityStateProvider_1.MenuInternetConnectivityStateProvider).provider("menuConfig",MenuConfigProvider_1.MenuConfigProvider).config(["menuInternetConnectivityStateProvider",function(menuInternetConnectivityStateProvider){menuInternetConnectivityStateProvider.setInternetConnectivityProvider("menuInternetConnectionStatus")}]).provider("menuLogout",MenuLogout_1.MenuLogoutProvider).provider("menuBasicUserData",MenuBasicUserData_1.MenuBasicUserDataProvider).provider("menuUserStorage",MenuUserStorageProvider_1.MenuUserStorageProvider).provider("menuGalaxyAccounts",MenuGalaxyAccountsProvider_1.MenuGalaxyAccountsProvider).provider("menuContainerAppClientId",MenuContainerAppClientIdProvider_1.MenuContainerAppClientIdProvider).config(["menuLogoutProvider","menuConfigProvider","menuUserStorageProvider","menuGalaxyAccountsProvider","cartBackendConfigProvider","productsApiConfigProvider",function(menuLogoutProvider,menuConfigProvider,menuUserStorage,menuGalaxyAccountsProvider,cartBackendConfigProvider,productsApiConfigProvider){if(menuLogoutProvider.setLogoutServiceName("logout"),menuUserStorage.setUserStorageProvider("userStorage"),menuGalaxyAccountsProvider.setMenuGalaxyAccountsName("galaxyAccounts"),window.hasOwnProperty("gogMicroservices")&&window.gogMicroservices.hasOwnProperty("menu")){if(window.gogMicroservices.menu.hasOwnProperty("env"))switch(productsApiConfigProvider.setEnvirement(window.gogMicroservices.menu.env),window.gogMicroservices.menu.env){case"dev":menuConfigProvider.setEnvironmentAsDev(),cartBackendConfigProvider.setCartHost("https://www.gog-develop.com");break;case"staging":menuConfigProvider.setEnvironmentAsStaging(),cartBackendConfigProvider.setCartHost("https://www.gog-staging.com");break;case"prod":menuConfigProvider.setEnvironmentAsProd(),cartBackendConfigProvider.setCartHost("https://www.gog.com");break;case"preprod":menuConfigProvider.setEnvironmentAsPreprod(),cartBackendConfigProvider.setCartHost("https://www.gog-preprod.com");break;default:menuConfigProvider.setEnvironmentAsProd(),cartBackendConfigProvider.setCartHost("https://www.gog.com")}window.gogMicroservices.menu.hasOwnProperty("currentLanguageCode")&&(menuConfigProvider.setLocale(window.gogMicroservices.menu.currentLanguageCode),productsApiConfigProvider.setLocale(window.gogMicroservices.menu.currentLanguageCode)),window.gogMicroservices.menu.hasOwnProperty("currentCurrencyCode")&&menuConfigProvider.setCurrency(window.gogMicroservices.menu.currentCurrencyCode),window.gogMicroservices.menu.hasOwnProperty("country")&&menuConfigProvider.setCountry(window.gogMicroservices.menu.country),-1!==navigator.appVersion.indexOf("Win")&&menuConfigProvider.setOsAsWindows(),-1!==navigator.appVersion.indexOf("Mac")&&menuConfigProvider.setOsAsOSX(),-1!==navigator.appVersion.indexOf("Linux")&&menuConfigProvider.setOsAsLinux()}}]).service("menuBasicUserDataEndpointSource",MenuBasicUserDataEndpointSource_1.MenuBasicUserDataEndpointSource).service("menuContainerAppClientIdEndpointSource",MenuContainerAppClientIdEndpointSource_1.MenuContainerAppClientIdEndpointSource).run(["menuSearchClient","menuProductRepositoryFactory",function(_menuSearchClient,menuProductRepositoryFactory){try{menuProductRepositoryFactory.createMenuProductsRepository("menuProducts")}catch(err){"Rollbar"in window&&window.Rollbar.warn(err)}}]).config(["menuBasicUserDataProvider","menuContainerAppClientIdProvider",function(menuBasicUserDataProvider,menuContainerAppClientIdProvider){menuBasicUserDataProvider.setUserBasicDataSourceName("menuBasicUserDataEndpointSource"),menuContainerAppClientIdProvider.setClientIdSourceName("menuContainerAppClientIdEndpointSource")}]);isFeatureEnabled("notifications")&&menuModule.service("menuChatTopicParser",MenuNotificationsModule_1.MenuChatTopicParser).service("menuChatTopicMediator",MenuNotificationsModule_1.MenuChatTopicMediator).service("menuCustomTopicMediator",MenuNotificationsModule_1.MenuCustomTopicMediator).service("menuFriendsTopicParser",MenuNotificationsModule_1.MenuFriendsTopicParser).service("menuNotificationExpiration",MenuNotificationsModule_1.MenuNotificationExpiration).service("menuFriendsTopicMediator",MenuNotificationsModule_1.MenuFriendsTopicMediator).service("announcementTopicParser",MenuNotificationsModule_1.AnnouncementTopicParser).service("announcementTopicMediator",MenuNotificationsModule_1.AnnouncementTopicMediator).factory("menuNotificationSafeDate",MenuNotificationsModule_1.MenuNotificationSafeDate).provider("menuNotificationAction",MenuNotificationsModule_1.MenuNotificationActionProvider).provider("menuChat",MenuNotificationsModule_1.MenuChatProvider).config(["menuNotificationActionProvider",function(menuNotificationActionProvider,menuChatProvider){menuNotificationActionProvider.setActionsCollectionAsWebsite()}]).run(["menuChatTopicMediator","menuFriendsTopicMediator","menuCustomTopicMediator","menuNotificationsPusher","menuNotificationExpiration","menuNotificationListLoad","menuNotificationRelatedPageEnter","announcementTopicMediator",angular.noop]),isFeatureEnabled("list_of_friends_enabled")&&menuModule.controller("menuFriendsCtrl",MenuFriendsCtrl_1.MenuFriendsCtrl).service("menuFriends",MenuFriends_1.MenuFriends).service("menuFriendsPresence",MenuFriendsPresence_1.MenuFriendsPresence)},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){var undefined,LARGE_ARRAY_SIZE=200,CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",MAX_MEMOIZE_SIZE=500,PLACEHOLDER="__lodash_placeholder__",CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2,WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...",HOT_COUNT=800,HOT_SPAN=16,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=NaN,MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]],argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,rsComboRange="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",rsBreakRange="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsAstral="[\\ud800-\\udfff]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsMisc="[^\\ud800-\\udfff"+rsBreakRange+rsDigits+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reApos=RegExp("['’]","g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsDigits,rsEmoji].join("|"),"g"),reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff"+rsComboRange+"\\ufe0e\\ufe0f]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}function arrayEachRight(array,iteratee){for(var length=null==array?0:array.length;length--&&!1!==iteratee(array[length],length,array););return array}function arrayEvery(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function arrayIncludes(array,value){return!!(null==array?0:array.length)&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}var asciiSize=baseProperty("length");function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=key,!1}),result}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){return value==value?function(array,value,fromIndex){var index=fromIndex-1,length=array.length;for(;++index<length;)if(array[index]===value)return index;return-1}(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!=value}function baseMean(array,iteratee){var length=null==array?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);current!==undefined&&(result=result===undefined?current:result+current)}return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}var deburrLetter=basePropertyOf({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),escapeHtmlChar=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function hasUnicode(string){return reHasUnicode.test(string)}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];value!==placeholder&&value!==PLACEHOLDER||(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}function stringSize(string){return hasUnicode(string)?function(string){var result=reUnicode.lastIndex=0;for(;reUnicode.test(string);)++result;return result}(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?function(string){return string.match(reUnicode)||[]}(string):function(string){return string.split("")}(string)}var unescapeHtmlChar=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _=function runInContext(context){var uid,Array=(context=null==context?root:_.defaults(root.Object(),context,_.pick(root,contextProps))).Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=context["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create"),metaMap=WeakMap&&new WeakMap,realNames={},dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=undefined,result}}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=undefined}function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){(value===undefined||eq(object[key],value))&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function baseAt(object,paths){for(var index=-1,length=paths.length,result=Array(length),skip=null==object;++index<length;)result[index]=skip?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){return number==number&&(upper!==undefined&&(number=number<=upper?number:upper),lower!==undefined&&(number=number>=lower?number:lower)),number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?function(source,object){return copyObject(source,getSymbolsIn(source),object)}(value,function(object,source){return object&&copyObject(source,keysIn(source),object)}(result,value)):function(source,object){return copyObject(source,getSymbols(source),object)}(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function(object,tag,isDeep){var symbol,regexp,result,Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return function(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return(result=new(regexp=object).constructor(regexp.source,reFlags.exec(regexp))).lastIndex=regexp.lastIndex,result;case setTag:return new Ctor;case symbolTag:return symbol=object,symbolValueOf?Object(symbolValueOf.call(symbol)):{}}}(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),isSet(value))return value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))}),result;if(isMap(value))return value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result;var props=isArr?undefined:(isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys)(value);return arrayEach(props||value,function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result}function baseConformsTo(object,source,props){var length=props.length;if(null==object)return!length;for(object=Object(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value))return!1}return!0}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=LARGE_ARRAY_SIZE&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=null==iteratee?value:iteratee(value);if(value=comparator||0!==value?value:0,isCommon&&computed==computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,0))},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]},ListCache.prototype.has=function(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,HASH_UNDEFINED),this},SetCache.prototype.has=function(value){return this.__data__.has(value)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0);function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var value=array[index],current=iteratee(value);if(null!=current&&(computed===undefined?current==current&&!isSymbol(current):comparator(current,computed)))var computed=current,result=value}return result}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var baseFor=createBaseFor(),baseForRight=createBaseFor(!0);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return null==value?value===undefined?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}(value):function(value){return nativeObjectToString.call(value)}(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return null!=object&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return null!=object&&key in Object(object)}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=1/0,result=[];othIndex--;){var array=arrays[othIndex];othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:for(;++index<length&&result.length<maxLength;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){for(othIndex=othLength;--othIndex;){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer}seen&&seen.push(computed),result.push(value)}}return result}function baseInvoke(object,path,args){var func=null==(object=parent(object,path=castPath(path,object)))?object:object[toKey(last(path))];return null==func?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=COMPARE_UNORDERED_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othLength=getAllKeys(other).length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack))}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result))return!1}}return!0}function baseIsNative(value){return!(!isObject(value)||maskSrcKey&&maskSrcKey in value)&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return function(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){if(isObject(srcValue))stack||(stack=new Stack),function(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked)assignMergeValue(object,key,stacked);else{var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined,isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):isObject(objValue)&&!isFunction(objValue)||(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue)}}(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined;newValue===undefined&&(newValue=srcValue),assignMergeValue(object,key,newValue)}},keysIn)}function baseNth(array,n){var length=array.length;if(length)return isIndex(n+=n<0?length:0,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){var index=-1;return iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee())),function(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}(baseMap(collection,function(value,key,collection){return{criteria:arrayMap(iteratees,function(iteratee){return iteratee(value)}),index:++index,value:value}}),function(object,other){return function(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength)return result;var order=orders[index];return result*("desc"==order?-1:1)}}return object.index-other.index}(object,other,orders)})}function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value)}return result}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;(fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1;)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1;length--;){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;isIndex(index)?splice.call(array,index,1):baseUnset(array,index)}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRepeat(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER)return result;do{n%2&&(result+=string),(n=nativeFloor(n/2))&&(string+=string)}while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object))return object;for(var index=-1,length=(path=castPath(path,object)).length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];(newValue=customizer?customizer(objValue,key,nested):undefined)===undefined&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})}assignValue(nested,key,newValue),nested=nested[key]}return object}var baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity,baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return!(result=predicate(value,index,collection))}),!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=null==array?low:array.length;if("number"==typeof value&&value==value&&high<=HALF_MAX_ARRAY_LENGTH){for(;low<high;){var mid=low+high>>>1,computed=array[mid];null!==computed&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=mid+1:high=mid}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);for(var low=0,high=null==array?0:array.length,valIsNaN=value!=value,valIsNull=null===value,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;low<high;){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=null===computed,othIsReflexive=computed==computed,othIsSymbol=isSymbol(computed);if(valIsNaN)var setLow=retHighest||othIsReflexive;else setLow=valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):!othIsNull&&!othIsSymbol&&(retHighest?computed<=value:computed<value);setLow?low=mid+1:high=mid}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=0===value?0:value}}return result}function baseToNumber(value){return"number"==typeof value?value:isSymbol(value)?NAN:+value}function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed==computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}function baseUnset(object,path){return null==(object=parent(object,path=castPath(path,object)))||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;return result instanceof LazyWrapper&&(result=result.value()),arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2)return length?baseUniq(arrays[0]):[];for(var index=-1,result=Array(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator));return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){for(var index=-1,length=props.length,valsLength=values.length,result={};++index<length;){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return"function"==typeof value?value:identity}function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;return end=end===undefined?length:end,!start&&end>=length?array:baseSlice(array,start,end)}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=null===value,valIsReflexive=value==value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined,othIsNull=null===other,othIsReflexive=other==other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;newValue===undefined&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):undefined,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}function createCaseFirst(methodName){return function(string){var strSymbols=hasUnicode(string=toString(string))?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;for(fromRight&&funcs.reverse();index--;){var func=funcs[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);if(prereq&&!wrapper&&"wrapper"==getFuncName(func))var wrapper=new LodashWrapper([],!0)}for(index=wrapper?index:length;++index<length;){var funcName=getFuncName(func=funcs[index]),data="wrapper"==funcName?getData(func):undefined;wrapper=data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value))return wrapper.plant(value).value();for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);return function wrapper(){for(var length=arguments.length,args=Array(length),index=length;index--;)args[index]=arguments[index];if(isCurried)var placeholder=getHolder(wrapper),holdersCount=function(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}(args,placeholder);if(partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return length=args.length,argPos?args=function(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}(args,argPos):isFlip&&length>1&&args.reverse(),isAry&&ary<length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args)}}function createInverter(setter,toIteratee){return function(object,iteratee){return function(object,setter,iteratee,accumulator){return baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)}),accumulator}(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;if(value!==undefined&&(result=value),other!==undefined){if(result===undefined)return other;"string"==typeof value||"string"==typeof other?(value=baseToString(value),other=baseToString(other)):(value=baseToNumber(value),other=baseToNumber(other)),result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){var charsLength=(chars=chars===undefined?" ":baseToString(chars)).length;if(charsLength<2)return charsLength?baseRepeat(chars,length):chars;var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createRange(fromRight){return function(start,end,step){return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=undefined),start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),function(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}(start,end,step=step===undefined?start<end?1:-1:toFinite(step),fromRight)}}function createRelationalOperation(operator){return function(value,other){return"string"==typeof value&&"string"==typeof other||(value=toNumber(value),other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG,(bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG))&WRAP_CURRY_BOUND_FLAG||(bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG));var newData=[func,bitmask,thisArg,isCurry?partials:undefined,isCurry?holders:undefined,isCurry?undefined:partials,isCurry?undefined:holders,argPos,ary,arity],result=wrapFunc.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){if(number=toNumber(number),precision=null==precision?0:nativeMin(toInteger(precision),292)){var pair=(toString(number)+"e").split("e");return+((pair=(toString(func(pair[0]+"e"+(+pair[1]+precision)))+"e").split("e"))[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=Set&&1/setToArray(new Set([,-0]))[1]==INFINITY?function(values){return new Set(values)}:noop;function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):function(object,props){return arrayMap(props,function(key){return[key,object[key]]})}(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG),partials=holders=undefined),ary=ary===undefined?ary:nativeMax(toInteger(ary),0),arity=arity===undefined?arity:toInteger(arity),length-=holders?holders.length:0,bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&function(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG),isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!isCommon&&!isCombo)return data;srcBitmask&WRAP_BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}(value=source[5])&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]),(value=source[7])&&(data[7]=value),srcBitmask&WRAP_ARY_FLAG&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask}(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],!(arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0))&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)&&(bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)),bitmask&&bitmask!=WRAP_BIND_FLAG)result=bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG?function(func,bitmask,arity){var Ctor=createCtor(func);return function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);return(length-=holders.length)<arity?createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length):apply(this&&this!==root&&this instanceof wrapper?Ctor:func,this,args)}}(func,bitmask,arity):bitmask!=WRAP_PARTIAL_FLAG&&bitmask!=(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG)||holders.length?createHybrid.apply(undefined,newData):function(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);return function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}}(func,bitmask,thisArg,partials);else var result=function(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);return function wrapper(){return(this&&this!==root&&this instanceof wrapper?Ctor:func).apply(isBind?thisArg:this,arguments)}}(func,bitmask,thisArg);return setWrapToString((data?baseSetData:setData)(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack),stack.delete(srcValue)),objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(compared!==undefined){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=metaMap?function(func){return metaMap.get(func)}:noop;function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getHolder(func){return(hasOwnProperty.call(lodash,"placeholder")?lodash:func).placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;return result=result===iteratee?baseIteratee:result,arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=function(object,key){return null==object?undefined:object[key]}(object,key);return baseIsNative(value)?value:undefined}var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;function hasPath(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object)}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if("function"!=typeof other||!(funcName in LazyWrapper.prototype))return!1;if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function isStrictComparable(value){return value==value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function overRest(func,start,transform){return start=nativeMax(start===undefined?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function safeGet(object,key){if("__proto__"!=key)return object[key]}var setData=shortOut(baseSetData),setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)},setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,function(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(length>1?"& ":"")+details[lastIndex],details=details.join(length>2?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}(source,function(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),details.sort()}(function(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;for(size=size===undefined?length:size;++index<size;){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index],array[index]=value}return array.length=size,array}var stringToPath=function(func){var result=memoize(func,function(key){return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key}),cache=result.cache;return result}(function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}),result});function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[]}),differenceBy=baseRest(function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[]}),differenceWith=baseRest(function(array,values){var comparator=last(values);return isArrayLikeObject(comparator)&&(comparator=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[]});function findIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length-1;return fromIndex!==undefined&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)}function flatten(array){return null!=array&&array.length?baseFlatten(array,1):[]}function head(array){return array&&array.length?array[0]:undefined}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]}),intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]}),intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return(comparator="function"==typeof comparator?comparator:undefined)&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]});function last(array){var length=null==array?0:array.length;return length?array[length-1]:undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}var pullAt=flatRest(function(array,indexes){var length=null==array?0:array.length,result=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending)),result});function reverse(array){return null==array?array:nativeReverse.call(array)}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2))}),unionWith=baseRest(function(arrays){var comparator=last(arrays);return comparator="function"==typeof comparator?comparator:undefined,baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator)});function unzip(array){if(!array||!array.length)return[];var length=0;return array=arrayFilter(array,function(group){if(isArrayLikeObject(group))return length=nativeMax(group.length,length),!0}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!array||!array.length)return[];var result=unzip(array);return null==iteratee?result:arrayMap(result,function(group){return apply(iteratee,undefined,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))}),xorBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))}),xorWith=baseRest(function(arrays){var comparator=last(arrays);return comparator="function"==typeof comparator?comparator:undefined,baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)}),zip=baseRest(unzip);var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;return unzipWith(arrays,iteratee="function"==typeof iteratee?(arrays.pop(),iteratee):undefined)});function chain(value){var result=lodash(value);return result.__chain__=!0,result}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};return!(length>1||this.__actions__.length)&&value instanceof LazyWrapper&&isIndex(start)?((value=value.slice(start,+start+(length?1:0))).__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(value,this.__chain__).thru(function(array){return length&&!array.length&&array.push(undefined),array})):this.thru(interceptor)});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:baseAssignValue(result,key,1)});var find=createFind(findIndex),findLast=createFind(findLastIndex);function forEach(collection,iteratee){return(isArray(collection)?arrayEach:baseEach)(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){return(isArray(collection)?arrayEachRight:baseEachRight)(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])});var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc="function"==typeof path,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)}),result}),keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});function map(collection,iteratee){return(isArray(collection)?arrayMap:baseMap)(collection,getIteratee(iteratee,3))}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});var sortBy=baseRest(function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}),now=ctxNow||function(){return root.Date.now()};function ary(func,n,guard){return n=guard?undefined:n,n=func&&null==n?func.length:n,createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return--n>0&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)}),bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)});function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=undefined,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===undefined)return function(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===undefined&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){timerId!==undefined&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined},debounced.flush=function(){return timerId===undefined?result:trailingEdge(now())},debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}memoize.Cache=MapCache;var overArgs=castRest(function(func,transforms){var funcsLength=(transforms=1==transforms.length&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()))).length;return baseRest(function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})}),partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders)}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders)}),rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes)});function eq(value,other){return value===other||value!=value&&other!=other}var gt=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){return value>=other}),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):function(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag};function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=nativeIsBuffer||stubFalse,isDate=nodeIsDate?baseUnary(nodeIsDate):function(value){return isObjectLike(value)&&baseGetTag(value)==dateTag};function isError(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||"string"==typeof value.message&&"string"==typeof value.name&&!isPlainObject(value)}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isInteger(value){return"number"==typeof value&&value==toInteger(value)}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isMap=nodeIsMap?baseUnary(nodeIsMap):function(value){return isObjectLike(value)&&getTag(value)==mapTag};function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):function(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag};var isSet=nodeIsSet?baseUnary(nodeIsSet):function(value){return isObjectLike(value)&&getTag(value)==setTag};function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};var lt=createRelationalOperation(baseLt),lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value)return[];if(isArrayLike(value))return isString(value)?stringToArray(value):copyArray(value);if(symIterator&&value[symIterator])return function(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}(value[symIterator]());var tag=getTag(value);return(tag==mapTag?mapToArray:tag==setTag?setToArray:values)(value)}function toFinite(value){return value?(value=toNumber(value))===INFINITY||value===-INFINITY?(value<0?-1:1)*MAX_INTEGER:value==value?value:0:0===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result==result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toString(value){return null==value?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source))copyObject(source,keys(source),object);else for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)}),at=flatRest(baseAt);var defaults=baseRest(function(object,sources){object=Object(object);var index=-1,length=sources.length,guard=length>2?sources[2]:undefined;for(guard&&isIterateeCall(sources[0],sources[1],guard)&&(length=1);++index<length;)for(var source=sources[index],props=keysIn(source),propsIndex=-1,propsLength=props.length;++propsIndex<propsLength;){var key=props[propsIndex],value=object[key];(value===undefined||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key))&&(object[key]=source[key])}return object}),defaultsDeep=baseRest(function(args){return args.push(undefined,customDefaultsMerge),apply(mergeWith,undefined,args)});function get(object,path,defaultValue){var result=null==object?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){null!=value&&"function"!=typeof value.toString&&(value=nativeObjectToString.call(value)),result[value]=key},constant(identity)),invertBy=createInverter(function(result,value,key){null!=value&&"function"!=typeof value.toString&&(value=nativeObjectToString.call(value)),hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]},getIteratee),invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}),omit=flatRest(function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,function(path){return path=castPath(path,object),isDeep||(isDeep=path.length>1),path}),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result});var pick=flatRest(function(object,paths){return null==object?{}:function(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}(object,paths)});function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});return predicate=getIteratee(predicate),basePickBy(object,props,function(value,path){return predicate(value,path[0])})}var toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn);function values(object){return null==object?[]:baseValues(object,keys(object))}var camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}),lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase");var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()}),upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){return string=toString(string),(pattern=guard?undefined:pattern)===undefined?function(string){return reHasUnicodeWord.test(string)}(string)?function(string){return string.match(reUnicodeWord)||[]}(string):function(string){return string.match(reAsciiWord)||[]}(string):string.match(pattern)||[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}}),bindAll=flatRest(function(object,methodNames){return arrayEach(methodNames,function(key){key=toKey(key),baseAssignValue(object,key,bind(object[key],object))}),object});function constant(value){return function(){return value}}var flow=createFlow(),flowRight=createFlow(!0);function identity(value){return value}function iteratee(func){return baseIteratee("function"==typeof func?func:baseClone(func,CLONE_DEEP_FLAG))}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}}),methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);return arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__);return(result.__actions__=copyArray(this.__actions__)).push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})}),object}function noop(){}var over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):function(path){return function(object){return baseGet(object,path)}}(path)}var range=createRange(),rangeRight=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}var add=createMathOperation(function(augend,addend){return augend+addend},0),ceil=createRound("ceil"),divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1),floor=createRound("floor");var source,multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1),round=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);return lodash.after=function(n,func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){if(--n<1)return func.apply(this,arguments)}},lodash.ary=ary,lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.castArray=function(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]},lodash.chain=chain,lodash.chunk=function(array,size,guard){size=(guard?isIterateeCall(array,size,guard):size===undefined)?1:nativeMax(toInteger(size),0);var length=null==array?0:array.length;if(!length||size<1)return[];for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));index<length;)result[resIndex++]=baseSlice(array,index,index+=size);return result},lodash.compact=function(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result},lodash.concat=function(){var length=arguments.length;if(!length)return[];for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))},lodash.cond=function(pairs){var length=null==pairs?0:pairs.length,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,function(pair){if("function"!=typeof pair[1])throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}})},lodash.conforms=function(source){return function(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}(baseClone(source,CLONE_DEEP_FLAG))},lodash.constant=constant,lodash.countBy=countBy,lodash.create=function(prototype,properties){var result=baseCreate(prototype);return null==properties?result:baseAssign(result,properties)},lodash.curry=function curry(func,arity,guard){var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity=guard?undefined:arity);return result.placeholder=curry.placeholder,result},lodash.curryRight=function curryRight(func,arity,guard){var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity=guard?undefined:arity);return result.placeholder=curryRight.placeholder,result},lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,lodash.drop=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=guard||n===undefined?1:toInteger(n))<0?0:n,length):[]},lodash.dropRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,0,(n=length-(n=guard||n===undefined?1:toInteger(n)))<0?0:n):[]},lodash.dropRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]},lodash.dropWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]},lodash.fill=function(array,value,start,end){var length=null==array?0:array.length;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),function(array,value,start,end){var length=array.length;for((start=toInteger(start))<0&&(start=-start>length?0:length+start),(end=end===undefined||end>length?length:toInteger(end))<0&&(end+=length),end=start>end?0:toLength(end);start<end;)array[start++]=value;return array}(array,value,start,end)):[]},lodash.filter=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,getIteratee(predicate,3))},lodash.flatMap=function(collection,iteratee){return baseFlatten(map(collection,iteratee),1)},lodash.flatMapDeep=function(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)},lodash.flatMapDepth=function(collection,iteratee,depth){return depth=depth===undefined?1:toInteger(depth),baseFlatten(map(collection,iteratee),depth)},lodash.flatten=flatten,lodash.flattenDeep=function(array){return null!=array&&array.length?baseFlatten(array,INFINITY):[]},lodash.flattenDepth=function(array,depth){return null!=array&&array.length?baseFlatten(array,depth=depth===undefined?1:toInteger(depth)):[]},lodash.flip=function(func){return createWrap(func,WRAP_FLIP_FLAG)},lodash.flow=flow,lodash.flowRight=flowRight,lodash.fromPairs=function(pairs){for(var index=-1,length=null==pairs?0:pairs.length,result={};++index<length;){var pair=pairs[index];result[pair[0]]=pair[1]}return result},lodash.functions=function(object){return null==object?[]:baseFunctions(object,keys(object))},lodash.functionsIn=function(object){return null==object?[]:baseFunctions(object,keysIn(object))},lodash.groupBy=groupBy,lodash.initial=function(array){return null!=array&&array.length?baseSlice(array,0,-1):[]},lodash.intersection=intersection,lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)}),result},lodash.mapValues=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))}),result},lodash.matches=function(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))},lodash.matchesProperty=function(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))},lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=function(n){return n=toInteger(n),baseRest(function(args){return baseNth(args,n)})},lodash.omit=omit,lodash.omitBy=function(object,predicate){return pickBy(object,negate(getIteratee(predicate)))},lodash.once=function(func){return before(2,func)},lodash.orderBy=function(collection,iteratees,orders,guard){return null==collection?[]:(isArray(iteratees)||(iteratees=null==iteratees?[]:[iteratees]),isArray(orders=guard?undefined:orders)||(orders=null==orders?[]:[orders]),baseOrderBy(collection,iteratees,orders))},lodash.over=over,lodash.overArgs=overArgs,lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=function(object){return function(path){return null==object?undefined:baseGet(object,path)}},lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=function(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array},lodash.pullAllWith=function(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array},lodash.pullAt=pullAt,lodash.range=range,lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,negate(getIteratee(predicate,3)))},lodash.remove=function(array,predicate){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result},lodash.rest=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return baseRest(func,start=start===undefined?start:toInteger(start))},lodash.reverse=reverse,lodash.sampleSize=function(collection,n,guard){return n=(guard?isIterateeCall(collection,n,guard):n===undefined)?1:toInteger(n),(isArray(collection)?arraySampleSize:baseSampleSize)(collection,n)},lodash.set=function(object,path,value){return null==object?object:baseSet(object,path,value)},lodash.setWith=function(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseSet(object,path,value,customizer)},lodash.shuffle=function(collection){return(isArray(collection)?arrayShuffle:baseShuffle)(collection)},lodash.slice=function(array,start,end){var length=null==array?0:array.length;return length?(end&&"number"!=typeof end&&isIterateeCall(array,start,end)?(start=0,end=length):(start=null==start?0:toInteger(start),end=end===undefined?length:toInteger(end)),baseSlice(array,start,end)):[]},lodash.sortBy=sortBy,lodash.sortedUniq=function(array){return array&&array.length?baseSortedUniq(array):[]},lodash.sortedUniqBy=function(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]},lodash.split=function(string,separator,limit){return limit&&"number"!=typeof limit&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),(limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0)?(string=toString(string))&&("string"==typeof separator||null!=separator&&!isRegExp(separator))&&!(separator=baseToString(separator))&&hasUnicode(string)?castSlice(stringToArray(string),0,limit):string.split(separator,limit):[]},lodash.spread=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=null==start?0:nativeMax(toInteger(start),0),baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)})},lodash.tail=function(array){var length=null==array?0:array.length;return length?baseSlice(array,1,length):[]},lodash.take=function(array,n,guard){return array&&array.length?baseSlice(array,0,(n=guard||n===undefined?1:toInteger(n))<0?0:n):[]},lodash.takeRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=length-(n=guard||n===undefined?1:toInteger(n)))<0?0:n,length):[]},lodash.takeRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]},lodash.takeWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]},lodash.tap=function(value,interceptor){return interceptor(value),value},lodash.throttle=function(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})},lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,lodash.toPairsIn=toPairsIn,lodash.toPath=function(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))},lodash.toPlainObject=toPlainObject,lodash.transform=function(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);if(iteratee=getIteratee(iteratee,4),null==accumulator){var Ctor=object&&object.constructor;accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)&&isFunction(Ctor)?baseCreate(getPrototype(object)):{}}return(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator},lodash.unary=function(func){return ary(func,1)},lodash.union=union,lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=function(array){return array&&array.length?baseUniq(array):[]},lodash.uniqBy=function(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]},lodash.uniqWith=function(array,comparator){return comparator="function"==typeof comparator?comparator:undefined,array&&array.length?baseUniq(array,undefined,comparator):[]},lodash.unset=function(object,path){return null==object||baseUnset(object,path)},lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=function(object,path,updater){return null==object?object:baseUpdate(object,path,castFunction(updater))},lodash.updateWith=function(object,path,updater,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseUpdate(object,path,castFunction(updater),customizer)},lodash.values=values,lodash.valuesIn=function(object){return null==object?[]:baseValues(object,keysIn(object))},lodash.without=without,lodash.words=words,lodash.wrap=function(value,wrapper){return partial(castFunction(wrapper),value)},lodash.xor=xor,lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=function(props,values){return baseZipObject(props||[],values||[],assignValue)},lodash.zipObjectDeep=function(props,values){return baseZipObject(props||[],values||[],baseSet)},lodash.zipWith=zipWith,lodash.entries=toPairs,lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=function(number,lower,upper){return upper===undefined&&(upper=lower,lower=undefined),upper!==undefined&&(upper=(upper=toNumber(upper))==upper?upper:0),lower!==undefined&&(lower=(lower=toNumber(lower))==lower?lower:0),baseClamp(toNumber(number),lower,upper)},lodash.clone=function(value){return baseClone(value,CLONE_SYMBOLS_FLAG)},lodash.cloneDeep=function(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)},lodash.cloneDeepWith=function(value,customizer){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer="function"==typeof customizer?customizer:undefined)},lodash.cloneWith=function(value,customizer){return baseClone(value,CLONE_SYMBOLS_FLAG,customizer="function"==typeof customizer?customizer:undefined)},lodash.conformsTo=function(object,source){return null==source||baseConformsTo(object,source,keys(source))},lodash.deburr=deburr,lodash.defaultTo=function(value,defaultValue){return null==value||value!=value?defaultValue:value},lodash.divide=divide,lodash.endsWith=function(string,target,position){string=toString(string),target=baseToString(target);var length=string.length,end=position=position===undefined?length:baseClamp(toInteger(position),0,length);return(position-=target.length)>=0&&string.slice(position,end)==target},lodash.eq=eq,lodash.escape=function(string){return(string=toString(string))&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string},lodash.escapeRegExp=function(string){return(string=toString(string))&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string},lodash.every=function(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))},lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)},lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)},lodash.floor=floor,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=function(object,iteratee){return null==object?object:baseFor(object,getIteratee(iteratee,3),keysIn)},lodash.forInRight=function(object,iteratee){return null==object?object:baseForRight(object,getIteratee(iteratee,3),keysIn)},lodash.forOwn=function(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))},lodash.forOwnRight=function(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))},lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=function(object,path){return null!=object&&hasPath(object,path,baseHas)},lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=function(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection),fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;return fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1},lodash.indexOf=function(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseIndexOf(array,value,index)},lodash.inRange=function(number,start,end){return start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),function(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}(number=toNumber(number),start,end)},lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=function(value){return!0===value||!1===value||isObjectLike(value)&&baseGetTag(value)==boolTag},lodash.isBuffer=isBuffer,lodash.isDate=isDate,lodash.isElement=function(value){return isObjectLike(value)&&1===value.nodeType&&!isPlainObject(value)},lodash.isEmpty=function(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0},lodash.isEqual=function(value,other){return baseIsEqual(value,other)},lodash.isEqualWith=function(value,other,customizer){var result=(customizer="function"==typeof customizer?customizer:undefined)?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result},lodash.isError=isError,lodash.isFinite=function(value){return"number"==typeof value&&nativeIsFinite(value)},lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=isMap,lodash.isMatch=function(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))},lodash.isMatchWith=function(object,source,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseIsMatch(object,source,getMatchData(source),customizer)},lodash.isNaN=function(value){return isNumber(value)&&value!=+value},lodash.isNative=function(value){if(isMaskable(value))throw new Error(CORE_ERROR_TEXT);return baseIsNative(value)},lodash.isNil=function(value){return null==value},lodash.isNull=function(value){return null===value},lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isSafeInteger=function(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER},lodash.isSet=isSet,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,lodash.isUndefined=function(value){return value===undefined},lodash.isWeakMap=function(value){return isObjectLike(value)&&getTag(value)==weakMapTag},lodash.isWeakSet=function(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag},lodash.join=function(array,separator){return null==array?"":nativeJoin.call(array,separator)},lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=function(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length;return fromIndex!==undefined&&(index=(index=toInteger(fromIndex))<0?nativeMax(length+index,0):nativeMin(index,length-1)),value==value?function(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;return index}(array,value,index):baseFindIndex(array,baseIsNaN,index,!0)},lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,lodash.lt=lt,lodash.lte=lte,lodash.max=function(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined},lodash.maxBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined},lodash.mean=function(array){return baseMean(array,identity)},lodash.meanBy=function(array,iteratee){return baseMean(array,getIteratee(iteratee,2))},lodash.min=function(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined},lodash.minBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined},lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=function(){return{}},lodash.stubString=function(){return""},lodash.stubTrue=function(){return!0},lodash.multiply=multiply,lodash.nth=function(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined},lodash.noConflict=function(){return root._===this&&(root._=oldDash),this},lodash.noop=noop,lodash.now=now,lodash.pad=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;if(!length||strLength>=length)return string;var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)},lodash.padEnd=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string},lodash.padStart=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string},lodash.parseInt=function(string,radix,guard){return guard||null==radix?radix=0:radix&&(radix=+radix),nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)},lodash.random=function(lower,upper,floating){if(floating&&"boolean"!=typeof floating&&isIterateeCall(lower,upper,floating)&&(upper=floating=undefined),floating===undefined&&("boolean"==typeof upper?(floating=upper,upper=undefined):"boolean"==typeof lower&&(floating=lower,lower=undefined)),lower===undefined&&upper===undefined?(lower=0,upper=1):(lower=toFinite(lower),upper===undefined?(upper=lower,lower=0):upper=toFinite(upper)),lower>upper){var temp=lower;lower=upper,upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)},lodash.reduce=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)},lodash.reduceRight=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)},lodash.repeat=function(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):n===undefined)?1:toInteger(n),baseRepeat(toString(string),n)},lodash.replace=function(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])},lodash.result=function(object,path,defaultValue){var index=-1,length=(path=castPath(path,object)).length;for(length||(length=1,object=undefined);++index<length;){var value=null==object?undefined:object[toKey(path[index])];value===undefined&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value}return object},lodash.round=round,lodash.runInContext=runInContext,lodash.sample=function(collection){return(isArray(collection)?arraySample:baseSample)(collection)},lodash.size=function(collection){if(null==collection)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length},lodash.snakeCase=snakeCase,lodash.some=function(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))},lodash.sortedIndex=function(array,value){return baseSortedIndex(array,value)},lodash.sortedIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))},lodash.sortedIndexOf=function(array,value){var length=null==array?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index}return-1},lodash.sortedLastIndex=function(array,value){return baseSortedIndex(array,value,!0)},lodash.sortedLastIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0)},lodash.sortedLastIndexOf=function(array,value){if(null!=array&&array.length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index}return-1},lodash.startCase=startCase,lodash.startsWith=function(string,target,position){return string=toString(string),position=null==position?0:baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target},lodash.subtract=subtract,lodash.sum=function(array){return array&&array.length?baseSum(array,identity):0},lodash.sumBy=function(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0},lodash.template=function(string,options,guard){var settings=lodash.templateSettings;guard&&isIterateeCall(string,options,guard)&&(options=undefined),string=toString(string),options=assignInWith({},options,settings,customDefaultsAssignIn);var isEscaping,isEvaluating,imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable;variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});if(result.source=source,isError(result))throw result;return result},lodash.times=function(n,iteratee){if((n=toInteger(n))<1||n>MAX_SAFE_INTEGER)return[];var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee),n-=MAX_ARRAY_LENGTH;for(var result=baseTimes(length,iteratee);++index<n;)iteratee(index);return result},lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=function(value){return toString(value).toLowerCase()},lodash.toNumber=toNumber,lodash.toSafeInteger=function(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):0===value?value:0},lodash.toString=toString,lodash.toUpper=function(value){return toString(value).toUpperCase()},lodash.trim=function(string,chars,guard){if((string=toString(string))&&(guard||chars===undefined))return string.replace(reTrim,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars);return castSlice(strSymbols,charsStartIndex(strSymbols,chrSymbols),charsEndIndex(strSymbols,chrSymbols)+1).join("")},lodash.trimEnd=function(string,chars,guard){if((string=toString(string))&&(guard||chars===undefined))return string.replace(reTrimEnd,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string);return castSlice(strSymbols,0,charsEndIndex(strSymbols,stringToArray(chars))+1).join("")},lodash.trimStart=function(string,chars,guard){if((string=toString(string))&&(guard||chars===undefined))return string.replace(reTrimStart,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string);return castSlice(strSymbols,charsStartIndex(strSymbols,stringToArray(chars))).join("")},lodash.truncate=function(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length,omission="omission"in options?baseToString(options.omission):omission}var strLength=(string=toString(string)).length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength)return string;var end=length-stringSize(omission);if(end<1)return omission;var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined)return result+omission;if(strSymbols&&(end+=result.length-end),isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;for(separator.global||(separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")),separator.lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;result=result.slice(0,newEnd===undefined?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);index>-1&&(result=result.slice(0,index))}return result+omission},lodash.unescape=function(string){return(string=toString(string))&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string},lodash.uniqueId=function(prefix){var id=++idCounter;return toString(prefix)+id},lodash.upperCase=upperCase,lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,(source={},baseForOwn(lodash,function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)}),source),{chain:!1}),lodash.VERSION="4.17.11",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();return result.__filtered__?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||3==type;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type}),result.__filtered__=result.__filtered__||isFilter,result}}),arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){return"function"==typeof path?new LazyWrapper(this):this.map(function(value){return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;return result.__filtered__&&(start>0||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),end!==undefined&&(result=(end=toInteger(end))<0?result.dropRight(-end):result.take(end-start)),result)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+("last"==methodName?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value),interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};useLazy&&checkIteratee&&"function"==typeof iteratee&&1!=iteratee.length&&(isLazy=useLazy=!1);var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);return result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll)}return isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),isUnwrapped?isTaker?result.value()[0]:result.value():result)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"";(realNames[key]||(realNames[key]=[])).push({name:methodName,func:lodashFunc})}}),realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=function(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),result},LazyWrapper.prototype.reverse=function(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1,result.__filtered__=!0}else(result=this.clone()).__dir__*=-1;return result},LazyWrapper.prototype.value=function(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=function(start,end,transforms){for(var index=-1,length=transforms.length;++index<length;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result=[];outer:for(;length--&&resIndex<takeCount;){for(var iterIndex=-1,value=array[index+=dir];++iterIndex<iterLength;){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG)value=computed;else if(!computed){if(type==LAZY_FILTER_FLAG)continue outer;break outer}}result[resIndex++]=value}return result},lodash.prototype.at=wrapperAt,lodash.prototype.chain=function(){return chain(this)},lodash.prototype.commit=function(){return new LodashWrapper(this.value(),this.__chain__)},lodash.prototype.next=function(){this.__values__===undefined&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length;return{done:done,value:done?undefined:this.__values__[this.__index__++]}},lodash.prototype.plant=function(value){for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);clone.__index__=0,clone.__values__=undefined,result?previous.__wrapped__=clone:result=clone;var previous=clone;parent=parent.__wrapped__}return previous.__wrapped__=value,result},lodash.prototype.reverse=function(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;return this.__actions__.length&&(wrapped=new LazyWrapper(this)),(wrapped=wrapped.reverse()).__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)},lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=function(){return baseWrapperValue(this.__wrapped__,this.__actions__)},lodash.prototype.first=lodash.prototype.head,symIterator&&(lodash.prototype[symIterator]=function(){return this}),lodash}();root._=_,(__WEBPACK_AMD_DEFINE_RESULT__=function(){return _}.call(exports,__webpack_require__,exports,module))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}).call(this)}).call(exports,__webpack_require__(10),__webpack_require__(11)(module))},function(module,exports){var g;g=function(){return this}();try{g=g||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";angular.module("ngTouchstart",[]).directive("ngTouchstart",function(){return{controller:function($scope,$element,$attrs){$element.bind("touchstart",function(event){var method=$element.attr("ng-touchstart");$scope.$event=event,$scope.$apply(method)})}}})},function(module,exports){!function(e){function t(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.accessTokenUrl="/gogAccessToken.js",/(\.gog\.(dev)$)/.test(window.location.hostname)&&(this.accessTokenUrl="https://single-sign-on.gog.dev/gogAccessToken.js"),this.retrieveNewAccessToken()}return e.prototype.retrieveNewAccessToken=function(){void 0!==this.scriptElement&&(window.clearTimeout(this.refreshTimeoutId),window.document.body.removeChild(this.scriptElement)),this.scriptElement=document.createElement("script"),this.scriptElement.addEventListener("load",this.singleSignOnScriptLoaded.bind(this)),this.scriptElement.src=this.accessTokenUrl,window.document.body.appendChild(this.scriptElement),this.refreshTimeoutId=setTimeout(this.retrieveNewAccessToken.bind(this),e.ACCESS_TOKEN_TTL)},e.prototype.singleSignOnScriptLoaded=function(){window.gogEventBus.publish("accessToken","ready",window.gogAccessToken)},e.ACCESS_TOKEN_TTL=3e6,e}();t.AccessTokenClient=o},function(e,t,n){n(2),e.exports=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);window.hasOwnProperty("gogAccessTokenClient")?console.warn("Access Token Client is duplicated!"):window.gogAccessTokenClient=new o.AccessTokenClient}])},function(module,exports){!function(t){function e(r){if(o[r])return o[r].exports;var s=o[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,r){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e){t.exports=angular},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o(0).module("gogModuleCustomScrollbar",[])},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),s=function(){function t(){}return t.prototype.getWidth=function(){var t=document.createElement("div");t.setAttribute("style","width: 100px; height: 100px; overflow: scroll; position: fixed"),document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},t}();e.ScrollWidth=s,r.module("gogModuleCustomScrollbar").service("scrollWidth",s)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),s=function(){function t(e,o,r,s,i,n){this.$window=o,this.$attrs=r,this.$timeout=s,this.lastPageY=0,this.isAutohideOn=!1,this.scrollbarWidth=0,this.element=e[0],this.elTarget=this.element.querySelector(t.CONTENT_SELECTOR),this.elBar=this.element.querySelector(t.BAR_SELECTOR),this.scrollbarWidth=i.getWidth(),this.isAutohideOn=0===this.scrollbarWidth,this.moveBarBound=this.moveBar.bind(this),this.dragScrollbarBound=this.dragScrollbar.bind(this),this.stopScrollbarBound=this.stopScrollbar.bind(this),this.onScrollbarMouseDownBound=this.onScrollbarMouseDown.bind(this);var l=Boolean(this.$attrs.customScrollbarForceNative);this.isNativeScrollbarOS()||this.isAutohideOn||l||this.initCustomScrollbar(),n.$on("$destroy",this.deconstructor.bind(this))}return t.prototype.initCustomScrollbar=function(){this.wrapper=this.element.querySelector(t.WRAPPER_SELECTOR),this.elTarget.addEventListener("scroll",this.moveBarBound),this.elBar.addEventListener("mousedown",this.onScrollbarMouseDownBound),this.$attrs.hasOwnProperty("customScrollbarRefresh")&&(this.cancelRefreshObserver=this.$attrs.$observe("customScrollbarRefresh",this.refreshAfterDOMChanges.bind(this))),this.updateBarHeight(),this.moveNativeScrollOffscreen()},t.prototype.refresh=function(){this.updateBarHeight(),this.shouldHaveScrollbar()?(this.enableCustomScrollbar(),this.moveNativeScrollOffscreen()):(this.disableCustomScrollbar(),this.resetContentOffset())},t.prototype.refreshAfterDOMChanges=function(){this.$timeout(this.refresh.bind(this),0,!1)},t.prototype.isNativeScrollbarOS=function(){return!!t.NATIVE_SCROLL_OS_REGEXP.test(navigator.userAgent)},t.prototype.moveNativeScrollOffscreen=function(){this.elTarget.style.width="calc(100% + "+this.scrollbarWidth+"px)"},t.prototype.resetContentOffset=function(){this.elTarget.style.width="100%"},t.prototype.shouldHaveScrollbar=function(){return this.scrollRatio<1},t.prototype.enableCustomScrollbar=function(){this.elBar.classList.remove("is-disabled")},t.prototype.disableCustomScrollbar=function(){this.elBar.classList.add("is-disabled")},t.prototype.onScrollbarMouseDown=function(e){return this.lastPageY=e.pageY,this.elBar.classList.add("is-grabbed"),this.$window.document.body.classList.add(t.DISABLE_TEXT_SELECTION_SELECTOR),this.$window.document.addEventListener("mousemove",this.dragScrollbarBound),this.$window.document.addEventListener("mouseup",this.stopScrollbarBound),!1},t.prototype.dragScrollbar=function(t){var e=this,o=t.pageY-this.lastPageY;this.lastPageY=t.pageY,this.$window.requestAnimationFrame(function(){e.elTarget.scrollTop+=o/e.scrollRatio})},t.prototype.stopScrollbar=function(){this.elBar.classList.remove("is-grabbed"),this.$window.document.body.classList.remove(t.DISABLE_TEXT_SELECTION_SELECTOR),this.$window.document.removeEventListener("mousemove",this.dragScrollbarBound),this.$window.document.removeEventListener("mouseup",this.stopScrollbarBound)},t.prototype.updateBarHeight=function(){var t=this.elTarget.scrollHeight,e=this.elTarget.clientHeight;this.scrollRatio=e/t,this.elBar.style.height=100*this.scrollRatio+"%"},t.prototype.moveBar=function(){var t=this;this.$window.requestAnimationFrame(function(){t.elBar.style.top=t.elTarget.scrollTop/t.elTarget.scrollHeight*100+"%"})},t.prototype.deconstructor=function(){this.cancelRefreshObserver(),this.$window.document.removeEventListener("mousemove",this.dragScrollbarBound),this.$window.document.removeEventListener("mouseup",this.stopScrollbarBound),this.elTarget.removeEventListener("scroll",this.moveBarBound),this.elBar.removeEventListener("mousedown",this.onScrollbarMouseDownBound)},t.$inject=["$element","$window","$attrs","$timeout","scrollWidth","$scope"],t.BAR_SELECTOR=".js-gog-custom-scrollbar-bar",t.WRAPPER_SELECTOR=".js-gog-custom-scrollbar-wrapper",t.CONTENT_SELECTOR=".js-gog-custom-scrollbar-content",t.DISABLE_TEXT_SELECTION_SELECTOR="gog-custom-scrollbar-disable-select",t.NATIVE_SCROLL_OS_REGEXP=/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|Mobile/i,t}();r.module("gogModuleCustomScrollbar").directive("gogCustomScrollbar",function(){return{controller:s,controllerAs:"scrollbar",restrict:"A",scope:!0}})},function(t,e,o){o(5),o(3),o(1),t.exports=o(2)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o(1),o(2),o(3)}])},function(module,exports){!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1).module("gogModuleStarRating",[])},function(e,t){e.exports=angular},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(e,t){this.cancelObserver=t.$observe("gogStarRating",this.changeRating.bind(this)),this.element=e[0],e.on("$destroy",this.tearDownDirective.bind(this))}return e.prototype.changeRating=function(e){var t=this.generateClassName(this.getRate(e));this.removePreviousClass(),this.element.classList.add(t)},e.prototype.removePreviousClass=function(){var t=new RegExp(e.RATING_CLASS_PREFIX+"\\d{1,2}"),n=this.element.className.match(t);null!==n&&this.element.classList.remove(n[0])},e.prototype.generateClassName=function(t){return""+e.RATING_CLASS_PREFIX+t},e.prototype.getRate=function(t){return t>=e.MAX_SCORE?e.MAX_SCORE:t<=e.MIN_SCORE?e.MIN_SCORE:5*Math.round(t/5)},e.prototype.tearDownDirective=function(){this.cancelObserver()},e.$inject=["$element","$attrs"],e.RATING_CLASS_PREFIX="star-rating--",e.MAX_SCORE=50,e.MIN_SCORE=0,e}();t.GogStarRating=o,r.module("gogModuleStarRating").directive("gogStarRating",function(){return{controller:o,controllerAs:"rating",restrict:"A",scope:!0}})},function(e,t,n){n(4),n(0),e.exports=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0),n(2)}])},function(module,exports){!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}({"./src/scripts/dataLayer.ts":function(module,exports,__webpack_require__){"use strict";eval('\n// -----------------------------------------------------------------------------\n// Load Google Tag Manager (GTM) with dataLayer initialization\n// -----------------------------------------------------------------------------\nvar loadGTMScript = function () {\n    (function (w, d, s, l, i) {\n        w[l] = w[l] || [];\n        var gtmConfig = {\n            gtm: {\n                start: new Date().getTime()\n            },\n            event: "gtm.js",\n        };\n        w[l].push(gtmConfig);\n        var f = d.getElementsByTagName(s)[0];\n        var j = d.createElement(s);\n        var dl = l !== "dataLayer" ? "&l=" + l : "";\n        j.async = true;\n        j.src = "//www.googletagmanager.com/gtm.js?id=" + i + dl;\n        f.parentNode.insertBefore(j, f);\n    })(window, document, "script", "dataLayer", "GTM-NX39DH");\n};\n// -----------------------------------------------------------------------------\n// Analytics service for Google Analytics (GA) management via GTM\n// -----------------------------------------------------------------------------\n/*\n* It works before Angular is initialized, so all events are able to be sent.\n*\n* The flow looks like this:\n* 1. Analytics.sendEvent() receives data that GA would understand\n* 2. internally it gives Analytics.pushToGtm() all data with a namespace\n* 3. Analytics.pushToGtm() adds an object to dataLayer\n* 4. dataLayer is watched by GTM script, so it knows about all gtm-events\n* 5. GTM identifies data by namespace, so it knows what to push further to GA\n* 6. GA receives event generated by GTM\n*\n* Caution: GTM "events" are not the same as GA "events", though they are named\n* exactly the same.\n*/\nvar Analytics;\nwindow.Analytics = (function () {\n    var init = function () {\n        loadGTMScript();\n        postInitialization();\n    };\n    /**\n     * amount of time to wait before firing failsafe code execution - 4s\n     */\n    var POST_INITIALIZATION_FAILSAFE_EXEC_DELAY = 4000;\n    /**\n     * @function\n     * @param namespace\n     * @param data\n     * THE ONLY function for communicating with GTM.\n     * It works by pushing objects to dataLayer array - and from this point\n     * GTM is handling everything on it own.\n     */\n    var pushToGtm = function (namespace, data) {\n        // Google JS files could be blocked by browser (i.e. AdBlocker),\n        // so check if dataLayer exist to avoid errors\n        if (typeof window.dataLayer === "object") {\n            data.event = namespace;\n            window.dataLayer.push(data);\n        }\n    };\n    /**\n     * Post initialization & failsafe callback execution if GTM fails\n     */\n    var postInitialization = function () {\n        Analytics.isInitialized = typeof window.google_tag_manager !== "undefined";\n        // if GTM is not ready or blocked\n        if (!Analytics.isInitialized) {\n            // once GTM is ready postInitialization event will be fired\n            pushToGtm(Analytics.gtmPostInitializationNamespace, function () {\n                Analytics.isInitialized = true;\n            });\n            // failsafe callback execution if GTM still hasn"t got initialized\n            setTimeout(function () {\n                while (!Analytics.isInitialized && Analytics.callbackQueue && Analytics.callbackQueue.length > 0) {\n                    // exec callback and remove from callbackQueue\n                    var fn = Analytics.callbackQueue.shift();\n                    if (typeof fn === "function") {\n                        fn();\n                    }\n                }\n            }, POST_INITIALIZATION_FAILSAFE_EXEC_DELAY);\n        }\n    };\n    var sendEvent = function (data) {\n        var nameSpace = Analytics.gtmDefaultNamespace;\n        if (data.event) {\n            nameSpace = data.event;\n        }\n        pushToGtm(nameSpace, data);\n    };\n    var sendTransaction = function (orderId, amount, currency, country, cartProducts, paymentMethod, callback) {\n        // if gtm was blocked or hasn"t initialized yet and we have a callback,\n        // so we push it into callbackQueue array to track it if gtm fails to initialize\n        if (!Analytics.isInitialized && typeof callback === "function") {\n            Analytics.callbackQueue.push(callback);\n        }\n        // create final transaction data\n        // with products array included\n        var transactionData = {};\n        extendGATranslationData(transactionData, orderId, amount, currency, cartProducts, paymentMethod, callback);\n        extendPixelTranslationData(transactionData, amount, currency, cartProducts);\n        pushToGtm(Analytics.gtmEcommerceNamespace, transactionData);\n    };\n    Analytics = {\n        isInitialized: false,\n        callbackQueue: [],\n        gtmDefaultNamespace: "analyticsEvent",\n        gtmEcommerceNamespace: "analyticsEcommerceEvent",\n        gtmPostInitializationNamespace: "gtm.postInitialization",\n        init: init,\n        sendEvent: sendEvent,\n        sendTransaction: sendTransaction,\n    };\n    // prepare transaction data for GA\n    // and extend obj object\n    var extendGATranslationData = function (obj, orderId, amount, currency, cartProducts, paymentMethod, callback) {\n        // create products array\n        var products = [];\n        for (var i = 0; i < cartProducts.length; ++i) {\n            var item = cartProducts[i];\n            products.push({\n                sku: item.id,\n                name: item.title,\n                category: item.isMovie ? "movie" : unifyCategoryName(item.originalCategory),\n                price: parseFloat(item.price.finalAmount),\n                quantity: "1"\n            });\n        }\n        Object.assign(obj, {\n            transactionId: orderId,\n            transactionAffiliation: paymentMethod || "NA",\n            transactionTotal: amount,\n            transactionTax: 0,\n            transactionShipping: 0,\n            transactionProducts: products,\n            currencyCode: currency\n        });\n        if (typeof callback === "function") {\n            obj.eventCallback = callback;\n        }\n    };\n    /**\n     * @function\n     * prepare transaction data for Facebook Pixel\n     * and extend obj object\n     */\n    var extendPixelTranslationData = function (obj, amount, currency, cartProducts) {\n        Object.assign(obj, {\n            content_type: "product",\n            content_ids: cartProducts.map(function (product) { return product.id + ""; }),\n            content_name: cartProducts.map(function (product) { return product.title; }).join(", "),\n            value: amount + "",\n            currency: currency,\n            num_items: cartProducts.length\n        });\n    };\n    /**\n     * @function\n     * Unify category name with rest of the page as it comes from different\n     * source.\n     */\n    var unifyCategoryName = function (categoryName) {\n        var lowerCaseCategoryName = categoryName.toLowerCase();\n        if (lowerCaseCategoryName === "role-playing") {\n            lowerCaseCategoryName = "rpg";\n        }\n        return lowerCaseCategoryName;\n    };\n    if (typeof window.initAnalytics === \'undefined\' || window.initAnalytics) {\n        init();\n    }\n    return Analytics;\n})();\n\n\n//# sourceURL=webpack:///./src/scripts/dataLayer.ts?')},"./src/scripts/eventBusToGtmProxy.service.ts":function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\nvar EventBusToGtmProxy = /** @class */ (function () {\n    function EventBusToGtmProxy($window, gtmEventSender) {\n        this.gtmEventSender = gtmEventSender;\n        $window.gogEventBus.subscribe("tracking", "sendEvent", this.onEventReceived.bind(this));\n    }\n    EventBusToGtmProxy.prototype.onEventReceived = function (data) {\n        this.gtmEventSender.sendEvent({\n            eventAction: data.action,\n            eventCategory: data.category,\n            eventLabel: data.label,\n            product_title: data.title,\n            product_id: data.id,\n            product_price: data.price\n        });\n    };\n    EventBusToGtmProxy.$inject = [\n        "$window",\n        "gtmEventSender"\n    ];\n    return EventBusToGtmProxy;\n}());\nexports.EventBusToGtmProxy = EventBusToGtmProxy;\n\n\n//# sourceURL=webpack:///./src/scripts/eventBusToGtmProxy.service.ts?')},"./src/scripts/gogModuleTracking.module.ts":function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\nvar angular = __webpack_require__(/*! angular */ "angular");\nangular.module("gogModuleTracking", []);\n\n\n//# sourceURL=webpack:///./src/scripts/gogModuleTracking.module.ts?')},"./src/scripts/gogModuleTrackingEventsProxy.module.ts":function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\nvar angular = __webpack_require__(/*! angular */ "angular");\nvar eventBusToGtmProxy_service_1 = __webpack_require__(/*! ./eventBusToGtmProxy.service */ "./src/scripts/eventBusToGtmProxy.service.ts");\nexports.module = angular\n    .module("gogModuleTrackingEventsProxy", ["gogModuleTracking"])\n    .service("eventBusToGtmProxy", eventBusToGtmProxy_service_1.EventBusToGtmProxy)\n    .run(["eventBusToGtmProxy", function (eventBusToGtmProxy) { angular.noop; }]);\n\n\n//# sourceURL=webpack:///./src/scripts/gogModuleTrackingEventsProxy.module.ts?')},"./src/scripts/gogTrackEvent.directive.ts":function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\nvar angular = __webpack_require__(/*! angular */ "angular");\nvar GogTrackEvent = /** @class */ (function () {\n    function GogTrackEvent(gtmEventSender, $attrs, $element, $parse) {\n        this.gtmEventSender = gtmEventSender;\n        this.$attrs = $attrs;\n        this.$element = $element;\n        this.$parse = $parse;\n        this.sendEventBound = this.sendEvent.bind(this);\n        this.$element.on("click", this.sendEventBound);\n        this.$element.on("$destroy", this.onDestroy.bind(this));\n    }\n    /**\n     *\n     * @param gaEventData If an `event` property is not provided within gaEventData\n     * it will be assumed the type of event is `analyticsEvent`, and therefore\n     * `eventCategory`, `eventAction` and `eventLabel` are mandatory.\n     * Any other type of event can have custom data properties.\n     */\n    GogTrackEvent.prototype.sendEvent = function (gaEventData) {\n        var _this = this;\n        var data = this.$parse(this.$attrs.gogTrackEvent)("");\n        if (typeof data === "undefined") {\n            data = gaEventData;\n        }\n        if (Array.isArray(data)) {\n            data.forEach(function (eventData) {\n                _this.gtmEventSender.sendEvent(eventData);\n            });\n        }\n        else {\n            this.gtmEventSender.sendEvent(data);\n        }\n    };\n    GogTrackEvent.prototype.onDestroy = function () {\n        this.$element.off("click", this.sendEventBound);\n    };\n    GogTrackEvent.$inject = [\n        "gtmEventSender",\n        "$attrs",\n        "$element",\n        "$parse"\n    ];\n    return GogTrackEvent;\n}());\nexports.GogTrackEvent = GogTrackEvent;\nangular.module("gogModuleTracking").directive("gogTrackEvent", function () {\n    return {\n        controller: GogTrackEvent,\n        controllerAs: "trackEvent",\n        restrict: "A",\n        scope: true\n    };\n});\n\n\n//# sourceURL=webpack:///./src/scripts/gogTrackEvent.directive.ts?')},"./src/scripts/gtmEventSender.service.ts":function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\nvar angular = __webpack_require__(/*! angular */ "angular");\nvar GtmEventSender = /** @class */ (function () {\n    function GtmEventSender($window) {\n        this.$window = $window;\n        this.GA_EVENT_BASE = {\n            event: "analyticsEvent"\n        };\n    }\n    GtmEventSender.prototype.sendEvent = function (gaEventData) {\n        if (typeof this.$window.dataLayer !== "object") {\n            return;\n        }\n        if (!gaEventData.hasOwnProperty("event") || gaEventData.event === this.GA_EVENT_BASE.event) {\n            if (gaEventData.hasOwnProperty("eventAction")\n                && gaEventData.hasOwnProperty("eventCategory")\n                && gaEventData.hasOwnProperty("eventLabel")) {\n                this.$window.dataLayer.push(angular.merge({}, this.GA_EVENT_BASE, gaEventData));\n            }\n            else {\n                throw new Error("analyticEvents require category, action and label to be prvovided");\n            }\n        }\n        else {\n            this.$window.dataLayer.push(angular.merge(gaEventData));\n        }\n    };\n    GtmEventSender.$inject = ["$window"];\n    return GtmEventSender;\n}());\nexports.GtmEventSender = GtmEventSender;\nangular.module("gogModuleTracking").service("gtmEventSender", GtmEventSender);\n\n\n//# sourceURL=webpack:///./src/scripts/gtmEventSender.service.ts?')},"./src/scripts/index.ts":function(module,exports,__webpack_require__){"use strict";eval('\n/// <reference path="../../node_modules/gog-module-event-bus/dist/index.d.ts" />\nObject.defineProperty(exports, "__esModule", { value: true });\n__webpack_require__(/*! ./gogModuleTracking.module */ "./src/scripts/gogModuleTracking.module.ts");\n__webpack_require__(/*! ./gtmEventSender.service */ "./src/scripts/gtmEventSender.service.ts");\n__webpack_require__(/*! ./gogTrackEvent.directive */ "./src/scripts/gogTrackEvent.directive.ts");\n\n\n//# sourceURL=webpack:///./src/scripts/index.ts?')},"./src/scripts/index_proxy.ts":function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\n__webpack_require__(/*! ./gogModuleTrackingEventsProxy.module */ "./src/scripts/gogModuleTrackingEventsProxy.module.ts");\n__webpack_require__(/*! ./eventBusToGtmProxy.service */ "./src/scripts/eventBusToGtmProxy.service.ts");\n\n\n//# sourceURL=webpack:///./src/scripts/index_proxy.ts?')},0:function(module,exports,__webpack_require__){eval('__webpack_require__(/*! /Users/d.zubarev/Sites/gog-modules/tracking/src/scripts/index.ts */"./src/scripts/index.ts");\n__webpack_require__(/*! /Users/d.zubarev/Sites/gog-modules/tracking/src/scripts/dataLayer.ts */"./src/scripts/dataLayer.ts");\n__webpack_require__(/*! /Users/d.zubarev/Sites/gog-modules/tracking/src/scripts/eventBusToGtmProxy.service.ts */"./src/scripts/eventBusToGtmProxy.service.ts");\n__webpack_require__(/*! /Users/d.zubarev/Sites/gog-modules/tracking/src/scripts/gogModuleTracking.module.ts */"./src/scripts/gogModuleTracking.module.ts");\n__webpack_require__(/*! /Users/d.zubarev/Sites/gog-modules/tracking/src/scripts/gogModuleTrackingEventsProxy.module.ts */"./src/scripts/gogModuleTrackingEventsProxy.module.ts");\n__webpack_require__(/*! /Users/d.zubarev/Sites/gog-modules/tracking/src/scripts/gogTrackEvent.directive.ts */"./src/scripts/gogTrackEvent.directive.ts");\n__webpack_require__(/*! /Users/d.zubarev/Sites/gog-modules/tracking/src/scripts/gtmEventSender.service.ts */"./src/scripts/gtmEventSender.service.ts");\nmodule.exports = __webpack_require__(/*! /Users/d.zubarev/Sites/gog-modules/tracking/src/scripts/index_proxy.ts */"./src/scripts/index_proxy.ts");\n\n\n//# sourceURL=webpack:///multi_./src/scripts/index.ts_./src/scripts/dataLayer.ts_./src/scripts/eventBusToGtmProxy.service.ts_./src/scripts/gogModuleTracking.module.ts_./src/scripts/gogModuleTrackingEventsProxy.module.ts_./src/scripts/gogTrackEvent.directive.ts_./src/scripts/gtmEventSender.service.ts_./src/scripts/index_proxy.ts?')},angular:function(module,exports){eval("module.exports = angular;\n\n//# sourceURL=webpack:///external_%22angular%22?")}})},function(module,exports,__webpack_require__){var e;e=function(r){return function(r){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=r,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),r(2),r(6),r(7),o(r(2),e),o(r(6),e),o(r(7),e)},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var s=i(r(3));r(4),r(5),s.module("gogModuleCart",["gogModuleListenersManager","gogModuleUserStorage","gogModuleCartBackend"])},function(t,e){t.exports=r},function(t,e,r){var n;n=function(r){return function(r){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=r,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,r){r(1),r(8),r(2),r(10),r(5),r(7),r(9),r(6),t.exports=r(4)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(2),r(4),r(10)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(3).module("gogModuleUserStorage",[])},function(t,e){t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),o=r(5),i=r(7),s=r(9),a=function(){function t(t){this.$window=t}return t.prototype.getSessionStorage=function(t){return this.isStorageAvailable()?new s.WrappedSessionStorage(t,this.$window):new i.WrappedObjectStorage(t)},t.prototype.getLocalStorage=function(t){return this.isStorageAvailable()?new o.WrappedLocalStorage(t,this.$window):new i.WrappedObjectStorage(t)},t.prototype.isStorageAvailable=function(){try{return this.$window.localStorage.setItem("gog","gog"),this.$window.localStorage.removeItem("gog"),!0}catch(t){return!1}},t.$inject=["$window"],t}();e.WrappedStorageFactory=a,n.module("gogModuleUserStorage").service("wrappedStorageFactory",a)},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function t(t,e){var r=n.call(this,t)||this;return r.storage=e.localStorage,r}return o(t,n),t}(r(6).WrappedStorage);e.WrappedLocalStorage=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.prefix=t}return t.prototype.getItem=function(t){var e=this.storage.getItem(""+this.prefix+t);return null!==e?JSON.parse(e):null},t.prototype.setItem=function(t,e){this.storage.setItem(""+this.prefix+t,JSON.stringify(e))},t.prototype.reset=function(t){for(var e in this.clear(),t)t.hasOwnProperty(e)&&this.setItem(e,t[e])},t.prototype.clear=function(t){for(var e=this.storage.length-1;0<=e;e--){var r=this.storage.key(e);r&&(-1!==r.search(this.prefix)||t&&-1!==r.search(t))&&this.storage.removeItem(r)}},t.prototype.key=function(t){return this.storage.key(t)},t.prototype.removeItem=function(t){return this.storage.removeItem(""+this.prefix+t)},t.prototype.isSet=function(t){return null!==this.storage.getItem(""+this.prefix+t)},t}();e.WrappedStorage=n},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),s=r(8),a=function(r){function t(t){var e=r.call(this,t)||this;return e.storage=new s.StorageMock,e}return o(t,r),t}(i.WrappedStorage);e.WrappedObjectStorage=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.length=0,this.data={}}return t.prototype.setItem=function(t,e){this.data[t]=""+e,this.length++},t.prototype.getItem=function(t){return t in this.data?this.data[t]:null},t.prototype.removeItem=function(t){t in this.data&&(this.length--,delete this.data[t])},t.prototype.clear=function(){this.data={}},t.prototype.key=function(t){return Object.keys(this.data)[t]},t.prototype.isSet=function(t){return t in this.data},t}();e.StorageMock=n},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(n){function t(t,e){var r=n.call(this,t)||this;return r.storage=e.sessionStorage,r}return o(t,n),t}(r(6).WrappedStorage);e.WrappedSessionStorage=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),o=function(){function t(t,e){this.wrappedStorageFactory=t,this.$window=e,this.loggedUserId=null,this.storageBeforeUserIdIsSet={},this.initUserStorage()}return t.prototype.defaults=function(t){for(var e in t)this.isSet(e)||this.set(e,t[e])},t.prototype.set=function(t,e,r){var n=null;this.storageBeforeUserIdIsSet[t]=e,this.wrappedStorage.setItem(t,e),void 0!==r&&(n=this.calculateTtl(r),this.storageBeforeUserIdIsSet[this.getTtlKey(t)]=n,this.wrappedStorage.setItem(this.getTtlKey(t),n))},t.prototype.get=function(t){var e=this.wrappedStorage.getItem(t);return this.isExpired(t)?(this.remove(t),null):e},t.prototype.remove=function(t){this.wrappedStorage.removeItem(t),this.wrappedStorage.removeItem(this.getTtlKey(t))},t.prototype.isSet=function(t){return this.wrappedStorage.isSet(t)},t.prototype.reset=function(t){this.wrappedStorage.reset(t)},t.prototype.clear=function(){this.wrappedStorage.clear(this.getAnonymousPrefix())},t.prototype.setUserId=function(t){this.loggedUserId=t,this.initUserStorage()},t.prototype.initUserStorage=function(){this.wrappedStorage=this.wrappedStorageFactory.getLocalStorage(this.getPrefix()),null!==this.loggedUserId&&this.refresh()},t.prototype.refresh=function(){for(var t in this.storageBeforeUserIdIsSet)this.storageBeforeUserIdIsSet.hasOwnProperty(t)&&this.set(t,this.storageBeforeUserIdIsSet[t])},t.prototype.getPrefix=function(){return null!==this.loggedUserId?t.STORAGE_KEY_PREFIX+"_"+this.loggedUserId+"_":this.getAnonymousPrefix()},t.prototype.getAnonymousPrefix=function(){return t.STORAGE_KEY_PREFIX+"_"+t.ANONYMOUS_USER_PREFIX+"_"},t.prototype.getTtlKey=function(t){return t+"_ttl"},t.prototype.calculateTtl=function(t){return Date.now()+t},t.prototype.isExpired=function(t){return null!==this.wrappedStorage.getItem(this.getTtlKey(t))&&this.wrappedStorage.getItem(this.getTtlKey(t))<Date.now()},t.$inject=["wrappedStorageFactory","$window"],t.STORAGE_KEY_PREFIX="gog",t.ANONYMOUS_USER_PREFIX="anonymous",t}();e.UserStorage=o,n.module("gogModuleUserStorage").service("userStorage",o)}])},t.exports=n(r(3))},function(t,e,r){var n;n=function(r){return function(r){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=r,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(2)),i=r(3);e.ListenersManager=i.ListenersManager;var s=r(4);e.ListenersManagerFactory=s.ListenersManagerFactory,e.gogModuleListenersManager=o.default.module("gogModuleListenersManager",[]).factory("listenersManager",function(){return new s.ListenersManagerFactory})},function(t,e){t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.numberOfListeners=0,this.listeners=[],this.isSingleShot=[],this.stateListeners=[],this.isActive=!1}return t.prototype.addListener=function(t){return this.numberOfListeners=this.listeners.push(t),this.isSingleShot.push(!1),this.updateState(!0),this.createCancelFunction(t)},t.prototype.addSingleShotListener=function(t){return this.numberOfListeners=this.listeners.push(t),this.isSingleShot.push(!0),this.updateState(!0),this.createCancelFunction(t)},t.prototype.callListeners=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.isActive){for(var r=this.listeners.slice(),n=this.isSingleShot.slice(),o=this.numberOfListeners,i=[],s=0,a=0;a<o;a++){try{r[a].apply(null,t)}catch(t){window.console.error(t)}n[a]&&(s=i.push(r[a]))}if(0<s){for(a=0;a<s;a++){var u=this.listeners.indexOf(i[a]);-1!==u&&(this.isSingleShot.splice(u,1),this.listeners.splice(u,1))}this.numberOfListeners=this.listeners.length,this.updateState(0<this.numberOfListeners)}}},t.prototype.onStateChange=function(t){this.stateListeners.push(t)},t.prototype.createCancelFunction=function(t){var e=this;return function(){return e.afterCancel(t)}},t.prototype.afterCancel=function(t){var e=this.listeners.indexOf(t);-1!==e&&(this.listeners.splice(e,1),this.isSingleShot.splice(e,1),this.numberOfListeners=this.listeners.length,this.updateState(0<this.numberOfListeners))},t.prototype.updateState=function(t){if(this.isActive!==t){this.isActive=t;for(var e=0,r=this.stateListeners.length;e<r;e++)this.stateListeners[e](this.isActive)}},t}();e.ListenersManager=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),o=function(){function t(){}return t.prototype.getManager=function(){return new n.ListenersManager},t}();e.ListenersManagerFactory=o}])},t.exports=n(r(3))},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__awaiter||function(t,s,a,u){return new(a||(a=Promise))(function(r,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):(e=t.value,e instanceof a?e:new a(function(t){t(e)})).then(n,o)}i((u=u.apply(t,s||[])).next())})},a=this&&this.__generator||function(r,n){var o,i,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Cart=e.ProductsEventTypes=e.AppEventTypes=e.PriceEventTypes=e.CartEventTypes=e.UserEventTypes=e.EventBusChannels=void 0;var c,p,d,l,f,h,g,y,v,_,S=i(r(3));(p=c=e.EventBusChannels||(e.EventBusChannels={})).USER="user",p.PRODUCTS="products",p.CART="cart",p.APP="app",p.PRICE="price",(l=d=e.UserEventTypes||(e.UserEventTypes={})).USER_DATA_REQUEST="userDataRequest",l.USER_DATA_RESPONSE="userDataResponse",(f=e.CartEventTypes||(e.CartEventTypes={})).UPDATED="updated",(h=e.PriceEventTypes||(e.PriceEventTypes={})).UPDATED="updated",(y=g=e.AppEventTypes||(e.AppEventTypes={})).CONFIG_UPDATED="configUpdated",y.REVEAL_CONFIG="revealConfig",(_=v=e.ProductsEventTypes||(e.ProductsEventTypes={})).ADD_NEW_PRODUCTS_REQUEST="addNewProductsRequest",_.GET_PRODUCTS_REQUEST="getProductsRequest",_.GET_PRODUCTS_RESPONSE="getProductsResponse",_.UPDATE_PRICES_REQUEST="updatePricesRequest";var b=function(){function i(t,e,r,n,o){this.userStorage=t,this.listenersManager=e,this.$window=r,this.cartBackend=n,this.useCache=o,this.productsIds=[],this.totalPrice=i.TOTAL_PRICE_DEFAULTS,this.currencyCode=i.DEFAULT_CURRENCY_CODE,this.beforeCartUpdateListenersManager=e.getManager(),this.afterCartUpdateListenersManager=e.getManager(),this.isLocked=!1,this.checksum="",this.$window.gogEventBus.subscribe(c.APP,g.CONFIG_UPDATED,this.updateCurrencyCode.bind(this)),this.$window.gogEventBus.publish(c.APP,g.REVEAL_CONFIG,null),this.useCache?(this.restoreChecksum(),this.$window.gogEventBus.subscribe(c.USER,d.USER_DATA_RESPONSE,this.verifyChecksum.bind(this)),this.$window.gogEventBus.publish(c.USER,d.USER_DATA_REQUEST,null)):this.reload()}return i.prototype.registerBeforeCartUpdateListener=function(t){return this.beforeCartUpdateListenersManager.addListener(t)},i.prototype.registerAfterCartUpdateListener=function(t){return this.afterCartUpdateListenersManager.addListener(t)},i.prototype.has=function(t){return-1!==this.productsIds.indexOf(t)},i.prototype.getProducts=function(){return this.productsIds},i.prototype.getTotalPrice=function(){return this.totalPrice},i.prototype.getCount=function(){return this.productsIds.length},i.prototype.lock=function(){this.isLocked=!0},i.prototype.unlock=function(){this.isLocked=!1},i.prototype.add=function(t,e,r){this.has(t)||this.isLocked||(this.productsIds.push(t),this.lock(),this.beforeCartUpdateListenersManager.callListeners(t),this.cartBackend.add(t,e,r).then(this.updateDataFromBackend.bind(this)).then(this.afterCartUpdateUnlock.bind(this)).catch(this.productAddingFailed.bind(this,[t])))},i.prototype.addMany=function(t){var e,r,n=[];try{for(var o=u(t),i=o.next();!i.done;i=o.next()){var s=i.value;this.has(s)||(n.push(s),this.productsIds.push(s))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}this.lock(),this.beforeCartUpdateListenersManager.callListeners(),this.cartBackend.addMany(n).then(this.updateDataFromBackend.bind(this)).then(this.afterCartUpdateUnlock.bind(this)).catch(this.productAddingFailed.bind(this,t))},i.prototype.addSeries=function(t,e){var r,n,o=[];try{for(var i=u(e),s=i.next();!s.done;s=i.next()){var a=s.value;this.has(a.id)||(o.push(a.id),this.productsIds.push(a.id))}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.lock(),this.beforeCartUpdateListenersManager.callListeners(),this.cartBackend.addSeries(t).then(this.updateDataFromBackend.bind(this)).then(this.afterCartUpdateUnlock.bind(this)).catch(this.productAddingFailed.bind(this,o))},i.prototype.remove=function(t){var e=this.productsIds.indexOf(t);-1!==e&&(this.lock(),this.productsIds.splice(e,1),this.beforeCartUpdateListenersManager.callListeners(),this.cartBackend.remove(t).then(this.updateDataFromBackend.bind(this)).then(this.afterCartUpdateUnlock.bind(this)).catch(this.afterCartUpdateUnlock.bind(this)))},i.prototype.reload=function(){this.cartBackend.reload().then(this.updateDataFromBackend.bind(this)).then(this.cartReloaded.bind(this)).catch(this.cartReloadFailed.bind(this))},i.prototype.reloadWithData=function(t){this.updateDataFromBackend({data:t}),this.cartReloaded()},i.prototype.verifyChecksum=function(t){null===t.checksum.cart?this.clear():t.checksum.cart&&t.checksum.cart!==this.checksum?this.reload():this.restoreCart()},i.prototype.clear=function(){this.beforeCartUpdateListenersManager.callListeners(),this.productsIds=[],this.checksum="",this.totalPrice=i.TOTAL_PRICE_DEFAULTS,this.afterCartUpdateListenersManager.callListeners()},i.prototype.updateRepository=function(t){this.$window.gogEventBus.publish(c.PRODUCTS,v.ADD_NEW_PRODUCTS_REQUEST,{products:t,productsRepository:i.PRODUCTS_REPOSITORY_USED})},i.prototype.cartReloaded=function(){this.beforeCartUpdateListenersManager.callListeners(),this.afterCartUpdateListenersManager.callListeners(),this.unlock()},i.prototype.cartReloadFailed=function(){this.afterCartUpdateListenersManager.callListeners()},i.prototype.store=function(){return s(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,this.getDataFromRepository(this.productsIds)];case 1:return e=t.sent(),this.userStorage.set(i.CART_USER_STORAGE_KEY,{products:e,productsIds:this.productsIds,checksum:this.checksum,totalPrice:this.totalPrice}),[2]}})})},i.prototype.getDataFromRepository=function(o){return s(this,void 0,void 0,function(){var n=this;return a(this,function(t){return[2,new Promise(function(e){var r=n.$window.gogEventBus.subscribe(c.PRODUCTS,v.GET_PRODUCTS_RESPONSE,function(t){n.handleGetProductsResponse(t,e,o,r)});n.$window.gogEventBus.publish(c.PRODUCTS,v.GET_PRODUCTS_REQUEST,{productIds:o,productsRepository:i.PRODUCTS_REPOSITORY_USED})})]})})},i.prototype.handleGetProductsResponse=function(t,e,r,n){S.equals(t.productIds,r)&&(n(),e(t.products))},i.prototype.restoreCart=function(){if(this.userStorage.isSet(i.CART_USER_STORAGE_KEY)){var t=this.userStorage.get(i.CART_USER_STORAGE_KEY);this.updateRepository(t.products),this.productsIds=t.productsIds,this.totalPrice=t.totalPrice,this.afterCartUpdateListenersManager.callListeners()}},i.prototype.restoreChecksum=function(){this.userStorage.isSet(i.CART_USER_STORAGE_KEY)&&(this.checksum=this.userStorage.get(i.CART_USER_STORAGE_KEY).checksum)},i.prototype.afterCartUpdateUnlock=function(){this.unlock(),this.afterCartUpdateListenersManager.callListeners()},i.prototype.updateDataFromBackend=function(t){var e,r;if(null!==t.data.totalPrice&&(this.totalPrice=t.data.totalPrice),null!==t.data.checksum&&(this.checksum=t.data.checksum),t.data.cart){this.productsIds=[];try{for(var n=u(Object.keys(t.data.cart)),o=n.next();!o.done;o=n.next()){var i=o.value,s=t.data.cart[i];this.productsIds.push(s.id)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}this.updateRepository(t.data.cart)}t.data.personalizedPricing&&(this.$window.gogEventBus.publish(c.PRODUCTS,v.UPDATE_PRICES_REQUEST,t.data.personalizedPricing.products),this.publishPriceUpdatedEvent(t.data.personalizedPricing.products)),this.publishCartEvent(t.data.cart),this.store()},i.prototype.publishCartEvent=function(t){this.$window.gogEventBus.publish(c.CART,f.UPDATED,{cartContent:Object.keys(t)},{crossFrame:!0})},i.prototype.updateCurrencyCode=function(t){this.currencyCode=t.currencyCode},i.prototype.publishPriceUpdatedEvent=function(t){for(var e in t)void 0!==t[e]&&this.$window.gogEventBus.publish(c.PRICE,h.UPDATED,{productId:e,price:this.formatPrice(t[e])})},i.prototype.formatPrice=function(t){return{baseAmount:parseFloat(t.baseAmount),finalAmount:parseFloat(t.finalAmount),currencyCode:this.currencyCode,bonusWalletFunds:parseFloat(t.bonusStoreCreditAmount),discountPercentage:t.discountPercentage}},i.prototype.productAddingFailed=function(t){var e,r;this.unlock();try{for(var n=u(t),o=n.next();!o.done;o=n.next()){var i=o.value,s=this.productsIds.indexOf(i);-1!==s&&this.productsIds.splice(s,1)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}this.afterCartUpdateListenersManager.callListeners()},i.PRODUCTS_REPOSITORY_USED="menuProducts",i.DEFAULT_CURRENCY_CODE="USD",i.CART_USER_STORAGE_KEY="cart",i.TOTAL_PRICE_DEFAULTS={isZero:!0,symbol:"$",rawAmount:0},i}();e.Cart=b},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.CartProvider=void 0;var s=i(r(3)),a=r(6),u=function(){function t(){var o=this;this.$get=[],this.useCartCache=!1,this.$get=["userStorage","listenersManager","$window","cartBackend",function(t,e,r,n){return new a.Cart(t,e,r,n,o.useCartCache)}]}return t.prototype.enableCartCache=function(){this.useCartCache=!0},t}();e.CartProvider=u,s.module("gogModuleCart").provider("cart",u)}])},module.exports=e(__webpack_require__(0))},function(module,exports){!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e){t.exports=angular},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(0).module("gogModuleCartBackend",[])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=function(){function t(t,e){this.$http=t,this.cartBackendConfig=e}return t.prototype.add=function(t,e){return this.$http.get(this.cartBackendConfig.urls.add(t,e))},t.prototype.remove=function(t){return this.$http.get(this.cartBackendConfig.urls.remove(t))},t.prototype.reload=function(){return this.$http.get(this.cartBackendConfig.urls.get)},t.prototype.addMany=function(t){return this.$http.post(this.cartBackendConfig.urls.addMany,{product_ids:t})},t.prototype.addSeries=function(t){return this.$http.get(this.cartBackendConfig.urls.addSeries(t))},t.$inject=["$http","cartBackendConfig"],t}();e.CartBackendService=o,n.module("gogModuleCartBackend").service("cartBackend",o)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(4),c=function(){function t(){var t=this;this.$get=[function(){return new o.CartBackendConfig(t.cartHost)}],this.cartHost=""}return t.prototype.setCartHost=function(t){this.cartHost=t},t}();e.CartBackendConfigProvider=c,n.module("gogModuleCartBackend").provider("cartBackendConfig",c)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){this.urls={},this.urls={get:t+"/cart",add:function(e,r){return"string"==typeof r?t+"/cart/add/"+e+"?rec="+r:t+"/cart/add/"+e},addMany:t+"/cart/add",addSeries:function(e){return t+"/cart/add/series/"+e},remove:function(e){return t+"/cart/remove/"+e}}};e.CartBackendConfig=n},function(t,e,r){r(6),r(1),r(2),r(3),t.exports=r(4)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(1),r(2),r(3)}])},function(module,exports){!function(e){var t={};function o(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=6)}([function(e,t){e.exports=angular},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o(0).module("gogModuleProductsApiClient",[])},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),i=o(3),n=function(){function e(e,t,o){this.$http=e,this.$window=t,this.productsApiConfig=o,this.cachedProducts={},this.$window.gogEventBus.subscribe("productsApi","fetch",this.onFetchEvent.bind(this))}return e.prototype.getProduct=function(e){this.isCacheAvailable(e)?this.$window.gogEventBus.publish("productsApi","ready_"+e,this.cachedProducts[e]):this.$http.get(this.productsApiConfig.getGameUrl(e)).then(this.prepareProductData.bind(this,e)).catch(this.gettingProductDataFailed.bind(this,e))},e.prototype.onFetchEvent=function(e){this.getProduct(e.productId)},e.prototype.prepareProductData=function(e,t){var o=this.praseProductData(t.data);this.cacheParsedProduct(o),this.$window.gogEventBus.publish("productsApi","ready_"+e,o)},e.prototype.gettingProductDataFailed=function(e,t){404===t.status?this.$window.gogEventBus.publish("productsApi","not_found_"+e,{}):this.$window.gogEventBus.publish("productsApi","error_"+e,t)},e.prototype.praseProductData=function(e){return{id:""+e._embedded.product.id,size:i.nullable(e,"size"),links:{support:i.nullable(e,"_links.support.href"),forum:i.nullable(e,"_links.forum.href")},url:i.nullable(e,"_links.store.href"),title:i.nullable(e,"_embedded.product.title"),inDevelopment:i.nullable(e,"inDevelopment.active"),description:i.nullable(e,"description"),copyrights:i.nullable(e,"copyrights"),additionalRequirements:i.nullable(e,"additionalRequirements"),galaxyBackgroundImage:i.nullable(e,"_links.galaxyBackgroundImage.href"),isAvailableForSale:i.nullable(e,"_embedded.product.isAvailableForSale"),isVisibleInCatalog:i.nullable(e,"_embedded.product.isVisibleInCatalog"),isPreorder:i.nullable(e,"_embedded.product.isPreorder"),isInstallable:i.nullable(e,"_embedded.product.isInstallable"),globalReleaseDate:i.nullable(e,"_embedded.product.globalReleaseDate"),localizations:this.parseLocalizations(e._embedded.localizations),videos:this.parseVideos(e._embedded.videos),image:this.removeImageFormat(i.nullable(e,"_embedded.product._links.image.href")),bonuses:i.nullable(e,"_embedded.bonuses"),screenshots:this.parseScreenshots(e._embedded.screenshots),logo:i.nullable(e,"_links.logo.href"),publisher:i.nullable(e,"_embedded.publisher"),developers:i.nullable(e,"_embedded.developers"),supportedOperatingSystems:i.nullable(e,"_embedded.supportedOperatingSystems"),tags:i.nullable(e,"_embedded.tags"),esrbRating:i.nullable(e,"_embedded.esrbRating"),pegiRating:i.nullable(e,"_embedded.pegiRating"),features:i.nullable(e,"_embedded.features"),properties:i.nullable(e,"_embedded.properties")}},e.prototype.parseLocalizations=function(e){for(var t=[],o=0,r=e;o<r.length;o++){var i=r[o];t.push({language:i._embedded.language,localizationScope:i._embedded.localizationScope})}return t},e.prototype.parseScreenshots=function(e){for(var t=[],o=0,r=e;o<r.length;o++){var i=r[o];t.push({imageUrl:this.removeImageFormat(i._links.self.href)})}return t},e.prototype.parseVideos=function(e){for(var t=[],o=0,r=e;o<r.length;o++){var i=r[o];t.push({url:i._links.self.href,provider:i.provider,imageUrl:i._links.thumbnail.href})}return t},e.prototype.isCacheAvailable=function(e){return e in this.cachedProducts},e.prototype.cacheParsedProduct=function(e){this.cachedProducts[e.id]=e},e.prototype.removeImageFormat=function(e){if("string"==typeof e)return e.replace("_{formatter}","")},e.$inject=["$http","$window","productsApiConfig"],e}();t.ProductsApiClient=n,r.module("gogModuleProductsApiClient").service("productsApiClient",n)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nullable=function(e,t){return t.split(".").reduce(function(e,t){return void 0===e||null===e?null:e[t]},e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),i=o(5),n=function(){function e(){var e=this;this.$get=[function(){return new i.ProductsApiConfig(e.env,e.locale)}]}return e.prototype.setEnvirement=function(e){this.env=e},e.prototype.setLocale=function(e){this.locale=e},e}();t.ProductsApiConfigProvider=n,r.module("gogModuleProductsApiClient").provider("productsApiConfig",n)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.env=e,this.locale=t,this.envHost={dev:"https://api.gog.dev",staging:"https://api.gog-staging.com",preprod:"https://api.gog-preprod.com",prod:"https://api.gog.com"}}return e.prototype.getGameUrl=function(e){return this.envHost[this.env]+"/v2/games/"+e+"?locale="+this.locale},e}();t.ProductsApiConfig=r},function(e,t,o){o(7),o(1),o(3),o(2),o(4),e.exports=o(5)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o(1),o(2),o(4)}])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GogMenu=void 0;var GogMenu=function(){function GogMenu($attrs,$element,menuDropdown,$window,menuAimFactory,$timeout,menuConfig,menuState,menuEventsTracker,menuCartState){this.$attrs=$attrs,this.$element=$element,this.menuDropdown=menuDropdown,this.$window=$window,this.menuAimFactory=menuAimFactory,this.$timeout=$timeout,this.menuConfig=menuConfig,this.menuState=menuState,this.menuEventsTracker=menuEventsTracker,this.menuCartState=menuCartState,this.currentExpanded={},this.currentLocale=this.menuConfig.getLocale(),this.currentCountry=this.menuConfig.getCountry(),this.currentCurrency=this.menuConfig.getCurrency(),this.menuConfig.registerLocaleListener(this.setCurrentLocale.bind(this)),this.menuConfig.registerCountryListener(this.setCurrentCountry.bind(this)),this.menuConfig.registerCurrencyListener(this.setCurrentCurrency.bind(this)),this.container=$element[0],this.currentOs=this.menuConfig.getOs(),this.expanded={},this.hiddingTimeouts={},this.showingTimeout=null,this.container=$element[0],this.menuAim=menuAimFactory.getForMenu(this.container,75,300,"below"),this.animationMode=GogMenu.ANIMATION_MODES.LONG,this.menuConfig.registerLocaleListener(this.setCurrentLocale.bind(this)),this.menuConfig.registerCountryListener(this.setCurrentCountry.bind(this)),this.menuConfig.registerCurrencyListener(this.setCurrentCurrency.bind(this)),menuDropdown.registerVisibilityChangeTriggeredListener(this.changeTriggered.bind(this)),this.hideOnClickOutsideBound=this.hideOnClickOutside.bind(this),this.hideExpandedBound=this.hideExpanded.bind(this),$window.addEventListener("keydown",this.onKeyDown.bind(this)),this.container.addEventListener("click",this.stopPropagation.bind(this)),this.container.addEventListener("click",this.hideOnClickInMenu.bind(this))}return GogMenu.prototype.show=function($event,menuName){var _this=this;if(null!=$event&&$event.stopPropagation(),!this.isExpanded(menuName)){this.hideExpanded();var menu=this.container.querySelector(GogMenu.DROPDOWN_SUBMENU_PREFIX+menuName);menu.classList.add("is-expanded","animation-mode--"+this.animationMode),this.currentExpanded.menuElement=menu,this.currentExpanded.menuName=menuName,this.container.classList.add("menu--"+menuName+"-expanded","menu--expanded"),this.menuDropdown.setState(menuName,!0),this.expanded[menuName]=!0,document.body.addEventListener("click",this.hideExpandedBound)}"cart"===menuName&&void 0!==this.menuCartState.productsInCart&&this.menuEventsTracker.sendEvent("view_cart",{currency:this.currentCurrency,value:parseFloat(this.menuCartState.totalPrice.amount),items:this.menuCartState.productsInCart.map(function(product,index){return _this.menuEventsTracker.mapProductToEventItem(product,index)})})},GogMenu.prototype.showWithDelay=function($event,menuName,delay){var _this=this;void 0===delay&&(delay=GogMenu.ACTIVATION_DELAY),this.$timeout.cancel(this.showingTimeout),null!=$event&&$event.stopPropagation(),this.animationMode=GogMenu.ANIMATION_MODES.LONG,this.anyExpanded()?(this.animationMode=GogMenu.ANIMATION_MODES.SHORT,this.show(null,menuName)):this.showingTimeout=this.$timeout(function(){_this.show(null,menuName)},delay)},GogMenu.prototype.showOnFirstClick=function($event,menuName){this.isExpanded(menuName)||($event.preventDefault(),this.$timeout.cancel(this.showingTimeout),this.show($event,menuName))},GogMenu.prototype.toggle=function($event,menuName){this.animationMode=GogMenu.ANIMATION_MODES.LONG,this.isExpanded(menuName)?(this.hide($event,menuName),this.menuState.isMenuSwipeOverlayVisible=!1):(this.anyExpanded()&&(this.animationMode=GogMenu.ANIMATION_MODES.SHORT),this.show($event,menuName))},GogMenu.prototype.isExpanded=function(menuName){return this.expanded[menuName]},GogMenu.prototype.hide=function($event,menuName,delay){if(void 0===delay&&(delay=this.menuAim.getActivationDelay()),this.$timeout.cancel(this.showingTimeout),this.expanded[menuName]){null!=$event&&$event.stopPropagation();var activationDelay=delay;this.hiddingTimeouts[menuName]=this.$timeout(this.delayedHide.bind(this,menuName),activationDelay)}},GogMenu.prototype.hideOnMouseleave=function($event,menuName,delay){this.eventToPass=$event,this.menuNameToPass=menuName,this.$window.addEventListener("blur",this.hideOnClickOutsideBound),this.$window.addEventListener("click",this.hideOnClickOutsideBound),this.hide($event,menuName,delay)},GogMenu.prototype.hideOnClickOutside=function(e){this.hide(this.eventToPass,this.menuNameToPass,0),this.$window.removeEventListener("blur",this.hideOnClickOutsideBound),this.$window.removeEventListener("click",this.hideOnClickOutsideBound)},GogMenu.prototype.stopPropagation=function($event){$event.stopPropagation()},GogMenu.prototype.cancelTimeout=function(menuName){this.$timeout.cancel(this.hiddingTimeouts[menuName])},GogMenu.prototype.setCurrentLocale=function(locale){this.currentLocale=locale},GogMenu.prototype.setCurrentCountry=function(country){this.currentCountry=country},GogMenu.prototype.setCurrentCurrency=function(currency){this.currentCurrency=currency},GogMenu.prototype.delayedHide=function(menuName){var menu=this.container.querySelector(GogMenu.DROPDOWN_SUBMENU_PREFIX+menuName);menu.classList.remove("animation-mode--short","animation-mode--long"),this.expanded[menuName]=!1,menu.classList.contains("is-expanded")&&(menu.classList.remove("is-expanded"),this.menuDropdown.setState(menuName,!1),this.container.classList.remove("menu--"+menuName+"-expanded"),this.anyExpanded()||this.container.classList.remove("menu--expanded"))},GogMenu.prototype.onKeyDown=function(event){event.keyCode!=GogMenu.ESCAPE||this.isExpanded("search")||this.hideExpanded()},GogMenu.prototype.changeTriggered=function(menuName,state){state?this.showByExternalTrigger(menuName):this.hide(null,menuName)},GogMenu.prototype.showByExternalTrigger=function(menuName){this.show(null,menuName);for(var iframesList=document.querySelectorAll("iframe"),i=0;i<iframesList.length;i++)iframesList[i].contentDocument.addEventListener("click",this.hideExpandedBound)},GogMenu.prototype.hideExpanded=function(){for(var menuName in this.expanded)this.expanded[menuName]&&this.hide(null,menuName)},GogMenu.prototype.hideOnClickInMenu=function(event){var className=(GogMenu.DROPDOWN_SUBMENU_PREFIX+this.currentExpanded.menuName).substring(1),target=event.target;for(this.hideExpanded();(null!==target||void 0!==target)&&target!==document.documentElement;){if(target.classList.contains(className)){this.cancelTimeout(this.currentExpanded.menuName);break}target=target.parentNode}},GogMenu.prototype.anyExpanded=function(){for(var menuName in this.expanded)if(this.expanded[menuName])return!0;return!1},GogMenu.$inject=["$attrs","$element","menuDropdown","$window","menuAimFactory","$timeout","menuConfig","menuState","menuEventsTracker","menuCartState"],GogMenu.DROPDOWN_SUBMENU_PREFIX=".js-menu-",GogMenu.ACTIVATION_DELAY=150,GogMenu.ESCAPE=27,GogMenu.ANIMATION_MODES={LONG:"long",SHORT:"short"},GogMenu}();exports.GogMenu=GogMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GogMenuOverlay=void 0;var GogMenuOverlay=function(){function GogMenuOverlay($element,menuDropdown){this.$element=$element,this.menuDropdown=menuDropdown,this.overlay=$element[0],this.menuDropdown.registerVisibilityChangedListener(this.submenuVisibilityChanged.bind(this))}return GogMenuOverlay.prototype.submenuVisibilityChanged=function(){this.menuDropdown.anyExpanded()?this.show():this.hide()},GogMenuOverlay.prototype.show=function(){this.overlay.classList.add("is-visible")},GogMenuOverlay.prototype.hide=function(){this.overlay.classList.remove("is-visible")},GogMenuOverlay.$inject=["$element","menuDropdown"],GogMenuOverlay}();exports.GogMenuOverlay=GogMenuOverlay},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GogMenuSearch=void 0;var GogMenuSearch=function(){function GogMenuSearch($attrs,$element,menuSearch,menuDropdown,$window){this.$attrs=$attrs,this.$element=$element,this.menuSearch=menuSearch,this.menuDropdown=menuDropdown,this.$window=$window,this.element=$element[0],this.resultsContainer=this.element.querySelector(GogMenuSearch.RESULTS_CONTAINER_SELECTOR),this.currentElementIndex=-1,this.input=this.element.querySelector(GogMenuSearch.INPUT_SELECTOR),this.keyDownEventCallback=this.keyDown.bind(this),this.menuDropdown.registerVisibilityChangedListener(this.menuVisibilityChanged.bind(this))}return GogMenuSearch.prototype.menuVisibilityChanged=function(menuName,isExpanded){"search"==menuName&&(isExpanded?this.$window.document.addEventListener("keydown",this.keyDownEventCallback):this.$window.document.removeEventListener("keydown",this.keyDownEventCallback))},GogMenuSearch.prototype.isGogScrollbarActive=function(){return window.gogMicroservices&&window.gogMicroservices.hasOwnProperty("menu")&&window.gogMicroservices.menu.hasOwnProperty("features")&&window.gogMicroservices.menu.features.hasOwnProperty("gog_scrollbar")&&window.gogMicroservices.menu.features.gog_scrollbar},GogMenuSearch.prototype.keyDown=function(event){switch(this.focusableElements=this.element.querySelectorAll(GogMenuSearch.FOCUSABLE_ELEMENT_SELECTOR),event.keyCode){case GogMenuSearch.KEYS.ESC:""==this.input.value?this.exit():this.clear();break;case GogMenuSearch.KEYS.UP_ARROW:this.focusOnPrevElement();break;case GogMenuSearch.KEYS.DOWN_ARROW:this.focusOnNextElement();break;case GogMenuSearch.KEYS.ENTER:this.menuSearch.openSelected(event)}this.setFocus()},GogMenuSearch.prototype.focusOnPrevElement=function(){0==this.currentElementIndex?this.currentElementIndex=this.focusableElements.length-1:this.currentElementIndex--,this.menuSearch.selectResult(this.currentElementIndex),this.isGogScrollbarActive()&&this.scrollToResult(this.currentElementIndex)},GogMenuSearch.prototype.focusOnNextElement=function(){this.currentElementIndex+1>=this.focusableElements.length?this.currentElementIndex=0:this.currentElementIndex++,this.menuSearch.selectResult(this.currentElementIndex),this.isGogScrollbarActive()&&this.scrollToResult(this.currentElementIndex)},GogMenuSearch.prototype.scrollToResult=function(resultIndex){this.resultsContainer.scrollTop=this.focusableElements[resultIndex].offsetTop},GogMenuSearch.prototype.exit=function(){this.menuSearch.reset(),this.menuDropdown.triggerCollapse("search")},GogMenuSearch.prototype.clear=function(){this.menuSearch.reset()},GogMenuSearch.prototype.setFocus=function(){if(this.focusableElements[this.currentElementIndex]){for(var focusedElements=this.element.querySelectorAll(GogMenuSearch.FOCUSABLE_ELEMENT_SELECTOR+"."+GogMenuSearch.IS_FOCUSED_CLASSNAME),i=0;i<focusedElements.length;i++)focusedElements[i].classList.remove(GogMenuSearch.IS_FOCUSED_CLASSNAME);this.focusableElements[this.currentElementIndex].classList.add(GogMenuSearch.IS_FOCUSED_CLASSNAME)}},GogMenuSearch.$inject=["$attrs","$element","menuSearch","menuDropdown","$window"],GogMenuSearch.INPUT_SELECTOR=".js-menu-search-input",GogMenuSearch.RESULTS_CONTAINER_SELECTOR=".js-menu-search-content",GogMenuSearch.FOCUSABLE_ELEMENT_SELECTOR=".js-focusable-element",GogMenuSearch.IS_FOCUSED_CLASSNAME="is-focused",GogMenuSearch.KEYS={ESC:27,DOWN_ARROW:40,UP_ARROW:38,ENTER:13},GogMenuSearch}();exports.GogMenuSearch=GogMenuSearch},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GogMenuFeaturesSlider=void 0;var GogMenuFeaturesSlider=function(){function GogMenuFeaturesSlider($element,menuDropdown){this.menuDropdown=menuDropdown,this.element=$element[0],this.slides=this.element.querySelectorAll(".js-slide"),this.timer=this.element.querySelector(".js-timer"),this.timerSections=this.timer.querySelectorAll(".js-timer-section"),this.numberOfSlides=this.slides.length,this.currentSlide=1,this.intervalIDs=[],this.timeoutID=0,this.startTime=0,this.visibilityListenerCanceller=this.menuDropdown.registerVisibilityChangedListener(this.checkState.bind(this)),$element.on("$destroy",this.destructor.bind(this))}return GogMenuFeaturesSlider.prototype.triggerNextSlide=function(){this.remaining=null,window.clearTimeout(this.timeoutID),this.clearIntervals(),this.nextSlide(!0)},GogMenuFeaturesSlider.prototype.triggerPrevSlide=function(){if(window.clearTimeout(this.timeoutID),this.currentSlide>1?this.currentSlide--:this.currentSlide=this.numberOfSlides,this.element.querySelector("."+GogMenuFeaturesSlider.CLASSNAMES.ACTIVE).classList.remove(GogMenuFeaturesSlider.CLASSNAMES.ACTIVE),this.currentSlide==this.numberOfSlides)for(var section in Array.prototype.slice.call(this.timerSections))this.timerSections[section].classList.remove(GogMenuFeaturesSlider.CLASSNAMES.ACTIVE,GogMenuFeaturesSlider.CLASSNAMES.PAUSED,GogMenuFeaturesSlider.CLASSNAMES.ON),this.timerSections[section].classList.add(GogMenuFeaturesSlider.CLASSNAMES.DONE);else this.timerSections[this.currentSlide].classList.remove(GogMenuFeaturesSlider.CLASSNAMES.ACTIVE,GogMenuFeaturesSlider.CLASSNAMES.PAUSED,GogMenuFeaturesSlider.CLASSNAMES.ON);this.slides[this.currentSlide-1].classList.add(GogMenuFeaturesSlider.CLASSNAMES.ACTIVE),this.timerSections[this.currentSlide-1].classList.remove(GogMenuFeaturesSlider.CLASSNAMES.DONE),this.timerSections[this.currentSlide-1].classList.add(GogMenuFeaturesSlider.CLASSNAMES.PAUSED)},GogMenuFeaturesSlider.prototype.reset=function(){this.currentSlide=1,this.element.querySelector("."+GogMenuFeaturesSlider.CLASSNAMES.ACTIVE).classList.remove(GogMenuFeaturesSlider.CLASSNAMES.ACTIVE),this.slides[0].classList.add(GogMenuFeaturesSlider.CLASSNAMES.ACTIVE),this.timer.classList.remove(GogMenuFeaturesSlider.CLASSNAMES.ON),this.remaining=null,this.startTime=0,this.resetTimer(),window.clearTimeout(this.timeoutID)},GogMenuFeaturesSlider.prototype.play=function(){if(this.timerSections[this.currentSlide-1].classList.add(GogMenuFeaturesSlider.CLASSNAMES.ON),null!=this.remaining){this.timeoutID=window.setTimeout(function(){this.nextSlide(),this.intervalIDs.push(window.setInterval(this.nextSlide.bind(this),GogMenuFeaturesSlider.AUTOPLAY_INTERVAL))}.bind(this),this.remaining),this.remaining=null}else this.intervalIDs.push(window.setInterval(this.nextSlide.bind(this),GogMenuFeaturesSlider.AUTOPLAY_INTERVAL));this.timerSections[this.currentSlide-1].classList.remove(GogMenuFeaturesSlider.CLASSNAMES.PAUSED),this.timerSections[this.currentSlide-1].classList.add(GogMenuFeaturesSlider.CLASSNAMES.ON),this.startTime=(new Date).getMilliseconds()},GogMenuFeaturesSlider.prototype.stop=function(){this.clearIntervals(),this.timerSections[this.currentSlide-1].classList.add(GogMenuFeaturesSlider.CLASSNAMES.PAUSED);var timeSinceStart=(new Date).getMilliseconds()-this.startTime;this.remaining=GogMenuFeaturesSlider.AUTOPLAY_INTERVAL-timeSinceStart},GogMenuFeaturesSlider.prototype.destructor=function(){this.visibilityListenerCanceller(),window.clearTimeout(this.timeoutID),this.clearIntervals()},GogMenuFeaturesSlider.prototype.checkState=function(){this.menuDropdown.isExpanded("anonymous")?this.play():(this.stop(),this.reset())},GogMenuFeaturesSlider.prototype.nextSlide=function(userTriggered){void 0===userTriggered&&(userTriggered=!1),this.currentSlide<this.numberOfSlides?this.currentSlide++:(this.currentSlide=1,this.resetTimer()),this.startTime=(new Date).getMilliseconds(),this.element.querySelector("."+GogMenuFeaturesSlider.CLASSNAMES.ACTIVE).classList.remove(GogMenuFeaturesSlider.CLASSNAMES.ACTIVE),this.slides[this.currentSlide-1].classList.add(GogMenuFeaturesSlider.CLASSNAMES.ACTIVE),this.currentSlide>1&&(this.timerSections[this.currentSlide-2].classList.add(GogMenuFeaturesSlider.CLASSNAMES.DONE),this.timerSections[this.currentSlide-2].classList.remove(GogMenuFeaturesSlider.CLASSNAMES.ON)),userTriggered?this.timerSections[this.currentSlide-2]&&this.timerSections[this.currentSlide-2].classList.add(GogMenuFeaturesSlider.CLASSNAMES.DONE):this.timerSections[this.currentSlide-1].classList.add(GogMenuFeaturesSlider.CLASSNAMES.ON)},GogMenuFeaturesSlider.prototype.resetTimer=function(){for(var i=0;i<this.timerSections.length;i++)this.timerSections[i].classList.remove(GogMenuFeaturesSlider.CLASSNAMES.ON,GogMenuFeaturesSlider.CLASSNAMES.PAUSED,GogMenuFeaturesSlider.CLASSNAMES.DONE)},GogMenuFeaturesSlider.prototype.clearIntervals=function(){for(var _i=0,_a=this.intervalIDs;_i<_a.length;_i++){var intervalID=_a[_i];window.clearInterval(intervalID)}this.intervalIDs=[]},GogMenuFeaturesSlider.AUTOPLAY_INTERVAL=5e3,GogMenuFeaturesSlider.CLASSNAMES={ACTIVE:"is-active",PAUSED:"is-paused",ON:"is-on",DONE:"is-done"},GogMenuFeaturesSlider.$inject=["$element","menuDropdown"],GogMenuFeaturesSlider}();exports.GogMenuFeaturesSlider=GogMenuFeaturesSlider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GogMenuLangAndCurrency=void 0;var angular=__webpack_require__(0),GogMenuLangAndCurrency=function(){function GogMenuLangAndCurrency($element,menuAimFactory,$window,$timeout,gtmEventSender,$http,menuConfig,menuLanguageInUrl){this.$element=$element,this.menuAimFactory=menuAimFactory,this.$window=$window,this.$timeout=$timeout,this.gtmEventSender=gtmEventSender,this.$http=$http,this.menuConfig=menuConfig,this.menuLanguageInUrl=menuLanguageInUrl,this.showApplyButton=!1,this.parentMenu=document.querySelector(".js-menu-account"),this.container=$element[0],this.isVisible=!1,this.menuAim=menuAimFactory.getForMenu(this.container),this.currentLanguageCode=this.menuConfig.getLocale(),this.currentCurrencyCode=this.menuConfig.getCurrency(),this.hidingTimeout=!1}return GogMenuLangAndCurrency.prototype.hide=function(){var _this=this,delay=this.menuAim.getActivationDelay();this.hidingTimeout=this.$timeout(function(){_this.isVisible=!1,_this.parentMenu.classList.remove(GogMenuLangAndCurrency.LANG_AND_CURRENCY_VISIBLE_CLASSNAME)},delay)},GogMenuLangAndCurrency.prototype.show=function(){this.isVisible=!0,this.parentMenu.classList.add(GogMenuLangAndCurrency.LANG_AND_CURRENCY_VISIBLE_CLASSNAME)},GogMenuLangAndCurrency.prototype.changeLanguage=function(newLanguageCode){this.currentLanguageCode!=newLanguageCode&&(this.showApplyButton=!0),this.currentLanguageCode=newLanguageCode},GogMenuLangAndCurrency.prototype.changeCurrency=function(newCurrencyCode){this.currentCurrencyCode!=newCurrencyCode&&(this.showApplyButton=!0),this.currentCurrencyCode=newCurrencyCode},GogMenuLangAndCurrency.prototype.applyChanges=function(){var _this=this;this.$http({method:"get",url:this.menuConfig.urls.setUserPreferences(this.currentLanguageCode,this.currentCurrencyCode),withCredentials:!0}).catch(angular.noop).finally(function(){_this.menuLanguageInUrl.hasLanguageInUrl?_this.menuLanguageInUrl.navigateToUrlWithLanguage(_this.currentLanguageCode):_this.refresh()}),this.gtmEventSender.sendEvent({eventCategory:"topBar",eventAction:"Language and Currency Change",eventLabel:this.currentLanguageCode+" "+this.currentCurrencyCode})},GogMenuLangAndCurrency.prototype.cancelHidding=function(){this.$timeout.cancel(this.hidingTimeout)},GogMenuLangAndCurrency.prototype.refresh=function(){this.$window.location.reload()},GogMenuLangAndCurrency.$inject=["$element","menuAimFactory","$window","$timeout","gtmEventSender","$http","menuConfig","menuLanguageInUrl"],GogMenuLangAndCurrency.LANG_AND_CURRENCY_VISIBLE_CLASSNAME="menu-account--language-and-currency-is-visible",GogMenuLangAndCurrency}();exports.GogMenuLangAndCurrency=GogMenuLangAndCurrency},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GogMenuSwipe=void 0;var GogMenuSwipe=function(){function GogMenuSwipe($attrs,$element,menuDropdown,menuState){this.$attrs=$attrs,this.$element=$element,this.menuDropdown=menuDropdown,this.menuState=menuState,this.element=$element[0],this.startPosition={x:0,y:0},this.endPosition={x:0,y:0},this.delta={x:0,y:0},this.menuState.isMenuSwipeOverlayVisible=!1,this.originalTransform="",this.element.addEventListener("touchstart",this.swipeStart.bind(this)),this.element.addEventListener("touchend",this.swipeEnd.bind(this)),this.element.addEventListener("touchmove",this.swipeMove.bind(this)),this.menuDropdown.registerVisibilityChangedListener(this.reset.bind(this))}return GogMenuSwipe.prototype.getCoordinates=function(event){var touches,e,originalEvent=event.originalEvent||event;return touches=originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],{x:(e=originalEvent.changedTouches&&originalEvent.changedTouches[0]||touches[0]).clientX,y:e.clientY}},GogMenuSwipe.prototype.toggle=function(){this.menuState.isMenuSwipeOverlayVisible?(this.element.style.transform="",this.menuState.isMenuSwipeOverlayVisible=!1):(this.element.style.transform="translateY(-100%) translateY(90px)",this.menuState.isMenuSwipeOverlayVisible=!0)},GogMenuSwipe.prototype.reset=function(){this.element.classList.remove("is-swiped"),this.element.style.transform=""},GogMenuSwipe.prototype.swipeStart=function(event){event.target.classList.contains("js-no-prevent-default")||(event.preventDefault(),event.stopPropagation()),this.startPosition=this.getCoordinates(event),this.delta={x:0,y:0},this.element.classList.add("is-swiped"),this.originalTransform=this.element.style.transform},GogMenuSwipe.prototype.swipeEnd=function(event){event.target.classList.contains("js-no-prevent-default")||(event.preventDefault(),event.stopPropagation()),this.endPosition=this.getCoordinates(event),this.delta.x=this.startPosition.x-this.endPosition.x,this.delta.y=this.startPosition.y-this.endPosition.y,this.delta.y>0?(this.element.style.transform="translateY(-100%) translateY(90px)",this.menuState.isMenuSwipeOverlayVisible=!0):this.delta.y<0&&(this.element.style.transform="",this.menuState.isMenuSwipeOverlayVisible=!1),this.element.classList.remove("is-swiped")},GogMenuSwipe.prototype.swipeMove=function(event){event.target.classList.contains("js-no-prevent-default")||(event.preventDefault(),event.stopPropagation()),this.delta.x=this.startPosition.x-this.getCoordinates(event).x,this.delta.y=this.startPosition.y-this.getCoordinates(event).y,(this.delta.y<=this.element.offsetHeight-90&&!this.menuState.isMenuSwipeOverlayVisible||this.delta.y<=0&&this.menuState.isMenuSwipeOverlayVisible)&&(this.element.style.transform=this.originalTransform+" translateY("+-1*this.delta.y+"px)")},GogMenuSwipe.$inject=["$attrs","$element","menuDropdown","menuState"],GogMenuSwipe}();exports.GogMenuSwipe=GogMenuSwipe},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GogMenuScrollbar=void 0;var GogMenuScrollbar=function(){function GogMenuScrollbar($element,$window,$attrs,$timeout,menuScrollWidth,$scope){this.$window=$window,this.$attrs=$attrs,this.$timeout=$timeout,this.lastPageY=0,this.scrollbarInstanceName="",this.isAutohideOn=!1,this.scrollbarWidth=0,this.cancelRefreshObserver=function(){},this.element=$element[0],this.elTarget=this.element.querySelector(GogMenuScrollbar.CONTENT_CLASS),this.elBar=this.element.querySelector(GogMenuScrollbar.BAR_CLASS),this.scrollbarWidth=menuScrollWidth.getWidth(),this.isAutohideOn=0==this.scrollbarWidth,this.moveBarBound=this.moveBar.bind(this),this.dragScrollbarBound=this.dragScrollbar.bind(this),this.stopScrollbarBound=this.stopScrollbar.bind(this),this.onScrollbarMouseDownBound=this.onScrollbarMouseDown.bind(this),this.isNativeScrollbarOS()||this.isAutohideOn||this.initCustomScrollbar(),$scope.$on("$destroy",this.deconstructor.bind(this))}return GogMenuScrollbar.prototype.initCustomScrollbar=function(){this.wrapper=this.element.querySelector(GogMenuScrollbar.WRAPPER_CLASS),this.elTarget.addEventListener("scroll",this.moveBarBound),this.elBar.addEventListener("mousedown",this.onScrollbarMouseDownBound),this.$attrs.hasOwnProperty("gogMenuScrollbarRefresh")&&(this.cancelRefreshObserver=this.$attrs.$observe("gogMenuScrollbarRefresh",this.refreshAfterDOMChanges.bind(this))),this.moveNativeScrollOffscreen()},GogMenuScrollbar.prototype.refresh=function(){this.updateBarHeight(),this.shouldHaveScrollbar()?(this.enableCustomScrollbar(),this.moveNativeScrollOffscreen()):(this.disableCustomScrollbar(),this.resetContentOffset())},GogMenuScrollbar.prototype.refreshAfterDOMChanges=function(){this.$timeout(this.refresh.bind(this),0,!1)},GogMenuScrollbar.prototype.isNativeScrollbarOS=function(){return!!GogMenuScrollbar.NATIVE_SCROLL_OS_REGEXP.test(navigator.userAgent)},GogMenuScrollbar.prototype.moveNativeScrollOffscreen=function(){this.elTarget.style.width="calc(100% + "+this.scrollbarWidth+"px)"},GogMenuScrollbar.prototype.resetContentOffset=function(){this.elTarget.style.width="100%"},GogMenuScrollbar.prototype.shouldHaveScrollbar=function(){return this.scrollRatio<1},GogMenuScrollbar.prototype.enableCustomScrollbar=function(){this.elBar.classList.remove("is-disabled")},GogMenuScrollbar.prototype.disableCustomScrollbar=function(){this.elBar.classList.add("is-disabled")},GogMenuScrollbar.prototype.onScrollbarMouseDown=function(e){return this.lastPageY=e.pageY,this.elBar.classList.add("is-grabbed"),this.$window.document.body.classList.add(GogMenuScrollbar.DISABLE_TEXT_SELECTION_CLASS),this.$window.document.addEventListener("mousemove",this.dragScrollbarBound),this.$window.document.addEventListener("mouseup",this.stopScrollbarBound),!1},GogMenuScrollbar.prototype.dragScrollbar=function(e){var _this=this,delta=e.pageY-this.lastPageY;this.lastPageY=e.pageY,this.$window.requestAnimationFrame(function(){_this.elTarget.scrollTop+=delta/_this.scrollRatio})},GogMenuScrollbar.prototype.stopScrollbar=function(e){this.element.classList.remove("is-grabbed"),this.$window.document.body.classList.remove(GogMenuScrollbar.DISABLE_TEXT_SELECTION_CLASS),this.$window.document.removeEventListener("mousemove",this.dragScrollbarBound),this.$window.document.removeEventListener("mouseup",this.stopScrollbarBound)},GogMenuScrollbar.prototype.updateBarHeight=function(){var totalHeight=this.elTarget.scrollHeight,ownHeight=this.elTarget.clientHeight;this.scrollRatio=ownHeight/totalHeight,this.elBar.style.height=100*this.scrollRatio+"%"},GogMenuScrollbar.prototype.moveBar=function(e){var _this=this;this.$window.requestAnimationFrame(function(){_this.elBar.style.top=_this.elTarget.scrollTop/_this.elTarget.scrollHeight*100+"%"})},GogMenuScrollbar.prototype.deconstructor=function(){this.cancelScrollTopListener(),this.cancelRefreshObserver(),this.$window.document.removeEventListener("mousemove",this.dragScrollbarBound),this.$window.document.removeEventListener("mouseup",this.stopScrollbarBound),this.elTarget.removeEventListener("scroll",this.moveBarBound),this.elBar.removeEventListener("mousedown",this.onScrollbarMouseDownBound)},GogMenuScrollbar.$inject=["$element","$window","$attrs","$timeout","menuScrollWidth","$scope"],GogMenuScrollbar.DEFAULT_SCROLL_WIDTH=18,GogMenuScrollbar.BAR_CLASS=".js-gog-scrollbar-bar",GogMenuScrollbar.WRAPPER_CLASS=".js-gog-scrollbar-wrapper",GogMenuScrollbar.CONTENT_CLASS=".js-gog-scrollbar-content",GogMenuScrollbar.DISABLE_TEXT_SELECTION_CLASS="_gog-menu-scrollbar-disable-select",GogMenuScrollbar.NATIVE_SCROLL_OS_REGEXP=/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|Mobile/i,GogMenuScrollbar}();exports.GogMenuScrollbar=GogMenuScrollbar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GogMenuCartItemSwipe=void 0;var GogMenuCartItemSwipe=function(){function GogMenuCartItemSwipe($attrs,$element,$window){this.$attrs=$attrs,this.$element=$element,this.$window=$window,this.element=$element[0],this.startPosition={x:0,y:0},this.endPosition={x:0,y:0},this.delta={x:0,y:0},this.originalTransform="",this.snapPoints=[-126,0,126],this.actionPoints=[{position:-252,action:this.remove.bind(this)},{position:252,action:this.addToWishlist.bind(this)}],this.positionX=0,this.originalPositionX=0,this.leftButton=this.element.querySelector(".js-action-left"),this.rightButton=this.element.querySelector(".js-action-right"),this.$attrs.$observe("gogMenuCartItemSwipeDisableWishlisting",this.disableWishlistAction.bind(this)),this.element.addEventListener("touchstart",this.swipeStart.bind(this)),this.element.addEventListener("touchend",this.swipeEnd.bind(this)),this.element.addEventListener("touchmove",this.swipeMove.bind(this))}return GogMenuCartItemSwipe.prototype.disableWishlistAction=function(disabled){"true"===disabled&&(this.snapPoints=[-126,0],this.actionPoints=[{position:-252,action:this.remove.bind(this)}])},GogMenuCartItemSwipe.prototype.remove=function(){this.rightButton.click()},GogMenuCartItemSwipe.prototype.addToWishlist=function(){this.leftButton.click()},GogMenuCartItemSwipe.prototype.getCoordinates=function(event){var touches,originalEvent=event.originalEvent||event;touches=originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent];var e=originalEvent.changedTouches&&originalEvent.changedTouches[0]||touches[0];return{x:e.clientX,y:e.clientY}},GogMenuCartItemSwipe.prototype.swipeStart=function(event){this.startPosition=this.getCoordinates(event),this.element.classList.add("is-swping"),this.originalTransform=this.element.style.transform,this.originalPositionX=this.positionX,this.positionX=0},GogMenuCartItemSwipe.prototype.executeActionOnPosition=function(position){for(var _i=0,_a=this.actionPoints;_i<_a.length;_i++){var actionPoint=_a[_i];if(actionPoint.position>0&&position>actionPoint.position||actionPoint.position<0&&position<actionPoint.position)return actionPoint.action(),this.reset(),!0}return!1},GogMenuCartItemSwipe.prototype.snapToPosition=function(position){for(var _i=0,_a=this.snapPoints;_i<_a.length;_i++){var snap=_a[_i];if(snap>=0&&position>snap-40&&position<snap+40||snap<0&&position<snap+40&&position>snap-40)return this.element.style.transform="translateX("+snap+"px)",this.positionX=snap,!0}return!1},GogMenuCartItemSwipe.prototype.reset=function(){this.element.style.transform="translateX(0px)",this.positionX=0},GogMenuCartItemSwipe.prototype.swipeEnd=function(event){(this.endPosition=this.getCoordinates(event),this.delta.x=this.startPosition.x-this.endPosition.x,this.delta.y=this.startPosition.y-this.endPosition.y,this.positionX=-1*this.delta.x+this.originalPositionX,this.element.classList.remove("is-swping"),this.executeActionOnPosition(this.positionX))||(this.snapToPosition(this.positionX)||(this.element.style.transform="translateX(0px)",this.positionX=0))},GogMenuCartItemSwipe.prototype.swipeMove=function(event){this.delta.x,this.delta.y;this.delta.x=this.startPosition.x-this.getCoordinates(event).x,this.delta.y=this.startPosition.y-this.getCoordinates(event).y,this.positionX=this.delta.x,this.element.style.transform=this.originalTransform+"translateX("+-1*this.delta.x+"px)"},GogMenuCartItemSwipe.$inject=["$attrs","$element","$window"],GogMenuCartItemSwipe}();exports.GogMenuCartItemSwipe=GogMenuCartItemSwipe},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuDropdown=void 0;var MenuDropdown=function(){function MenuDropdown($window,listenersManager){this.$window=$window,this.listenersManager=listenersManager,this.expanded={store:!1,galaxy:!1,search:!1,account:!1,friends:!1,cart:!1,notifications:!1,anonymous:!1},this.menuVisibilityChangedListenersManager=listenersManager.getManager(),this.menuVisibilityChangeTriggeredListenersManager=listenersManager.getManager()}return MenuDropdown.prototype.registerVisibilityChangedListener=function(callback){return this.menuVisibilityChangedListenersManager.addListener(callback)},MenuDropdown.prototype.registerVisibilityChangeTriggeredListener=function(callback){return this.menuVisibilityChangeTriggeredListenersManager.addListener(callback)},MenuDropdown.prototype.isExpanded=function(menuName){return this.expanded[menuName]},MenuDropdown.prototype.setState=function(menuName,isExpanded){this.expanded[menuName]=isExpanded,this.menuVisibilityChangedListenersManager.callListeners(menuName,isExpanded)},MenuDropdown.prototype.triggerExpand=function(menuName){this.menuVisibilityChangeTriggeredListenersManager.callListeners(menuName,!0),this.setState(menuName,!0)},MenuDropdown.prototype.triggerCollapse=function(menuName){this.menuVisibilityChangeTriggeredListenersManager.callListeners(menuName,!1),this.setState(menuName,!1)},MenuDropdown.prototype.getState=function(){return this.expanded},MenuDropdown.prototype.hideAll=function(){for(var menuName in this.expanded)this.expanded[menuName]&&this.triggerCollapse(menuName)},MenuDropdown.prototype.anyExpanded=function(){for(var menuName in this.expanded)if(this.expanded[menuName])return!0;return!1},MenuDropdown.$inject=["$window","listenersManager"],MenuDropdown}();exports.MenuDropdown=MenuDropdown},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuInternetConnectionStatus=void 0;var MenuInternetConnectionStatus=function(){function MenuInternetConnectionStatus(listenersManager,$window){this.$window=$window,this.internetConnectionStatusListenersManager=listenersManager.getManager();var connectionStatusChangedBound=this.connectionStatusChanged.bind(this);this.$window.addEventListener("online",connectionStatusChangedBound),this.$window.addEventListener("offline",connectionStatusChangedBound)}return MenuInternetConnectionStatus.prototype.isConnected=function(){return this.$window.navigator.onLine},MenuInternetConnectionStatus.prototype.registerConnectivityChangeListener=function(callback){return this.internetConnectionStatusListenersManager.addListener(callback)},MenuInternetConnectionStatus.prototype.connectionStatusChanged=function(){this.internetConnectionStatusListenersManager.callListeners(this.$window.navigator.onLine)},MenuInternetConnectionStatus.$inject=["listenersManager","$window"],MenuInternetConnectionStatus}();exports.MenuInternetConnectionStatus=MenuInternetConnectionStatus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuInternetConnectivityStateProvider=void 0;var MenuInternetConnectivityStateProvider=function(){function MenuInternetConnectivityStateProvider(){this.$get=function(){throw new Error("MenuState needs to have connectivity status service provided")}}return MenuInternetConnectivityStateProvider.prototype.setInternetConnectivityProvider=function(connectivityServiceName){this.$get=[connectivityServiceName,function(connectivityService){return connectivityService}]},MenuInternetConnectivityStateProvider}();exports.MenuInternetConnectivityStateProvider=MenuInternetConnectivityStateProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuGamesCtrl=void 0;var getEventContext_1=__webpack_require__(3),MenuGamesCtrl=function(){function MenuGamesCtrl(menuGames,menuDropdown,menuEventsTracker,menuConfig){this.menuGames=menuGames,this.menuDropdown=menuDropdown,this.menuEventsTracker=menuEventsTracker,this.menuConfig=menuConfig,this.customCategoriesCount=0,this.selectedCategoryNumber=0,this.sentCategoryProductsViewedMetrics=new Set,this.selectedCategory=this.menuGames.selectedCategory,this.categories=Object.keys(this.menuGames.categories),this.customCategories=this.menuGames.getCustomCategories(),this.customCategoriesCount=Object.keys(this.customCategories).length,this.menuGames.registerCategoryChangeListener(this.updateCategory.bind(this)),this.menuGames.registerCustomCategoriesListener(this.updateCustomCategories.bind(this)),this.menuGames.registerGameDataChangeListener(this.updateGameData.bind(this)),this.menuDropdown.registerVisibilityChangedListener(this.checkState.bind(this))}return MenuGamesCtrl.prototype.selectCategory=function(category){this.menuGames.selectCategory(category)},MenuGamesCtrl.prototype.holdCategory=function(){this.menuGames.holdCategory()},MenuGamesCtrl.prototype.hideCateogry=function(){this.menuGames.hideCategory()},MenuGamesCtrl.prototype.hasCategory=function(name){return-1!==this.categories.indexOf(name)},MenuGamesCtrl.prototype.shouldSeparateSpecials=function(name){return"cdpr"===name?!("classical-section"in this.customCategories):"classical-section"===name},MenuGamesCtrl.prototype.updateGameData=function(){this.categories=Object.keys(this.menuGames.categories),this.updateCategory(),this.updateCustomCategories()},MenuGamesCtrl.prototype.updateCustomCategories=function(){this.customCategories=this.menuGames.getCustomCategories(),this.customCategoriesCount=Object.keys(this.customCategories).length},MenuGamesCtrl.prototype.checkState=function(){this.menuDropdown.isExpanded("store")&&this.menuGames.hideCategory()},MenuGamesCtrl.prototype.updateCategory=function(){this.isLayerExpanded=this.menuGames.isLayerExpanded,this.selectedCategory=this.menuGames.selectedCategory,void 0!==this.selectedCategory&&(this.findSelectedCategoryNumber(),this.sentCategoryProductsViewedMetrics.has(this.selectedCategory.name)||(this.sendProductViewedMetricEvent(this.selectedCategory),this.sentCategoryProductsViewedMetrics.add(this.selectedCategory.name)))},MenuGamesCtrl.prototype.findSelectedCategoryNumber=function(){this.selectedCategoryNumber=Object.keys(this.customCategories).indexOf(this.selectedCategory.name)+1},MenuGamesCtrl.prototype.sendProductViewedMetricEvent=function(category){var _this=this,itemListId=getEventContext_1.getEventContext("category",category.name);this.menuEventsTracker.sendEvent("item_viewed_on_list",{currency:this.menuConfig.getCurrency(),item_list_id:itemListId,item_list_name:category.categoryTitle,items:category.products.map(function(product){return _this.mapProductToEventItem(product)}),context:itemListId})},MenuGamesCtrl.prototype.mapProductToEventItem=function(product,index){void 0===index&&(index=0);var finalValue=parseFloat(product.price.amount),price={base_value:product.price.isDiscounted?Number((100*finalValue/product.price.discountPercentage).toFixed(2)):finalValue,final_value:finalValue,discount:product.price.discountPercentage};return{item_id:String(product.id),item_name:product.title,price:price,index:index,quantity:1}},MenuGamesCtrl.$inject=["menuGames","menuDropdown","menuEventsTracker","menuConfig"],MenuGamesCtrl}();exports.MenuGamesCtrl=MenuGamesCtrl},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuFriendsCtrl=void 0;var MenuFriendsCtrl=function(){function MenuFriendsCtrl(menuDropdown,menuFriends,menuFriendsPresence,menuBasicUserData,$timeout,$filter){this.menuDropdown=menuDropdown,this.menuFriends=menuFriends,this.menuFriendsPresence=menuFriendsPresence,this.menuBasicUserData=menuBasicUserData,this.$timeout=$timeout,this.$filter=$filter,this.isVisible=!1,this.isLoadingFriendlist=!1,this.friendListFetched=!1,this.friendsList=[],this.online=0,this.total=0,this.menuDropdown.registerVisibilityChangedListener(this.visibilityChanged.bind(this)),this.menuFriends.registerFriendsListListener(this.friendsListReady.bind(this)),this.menuFriendsPresence.registerPresenceUpdatedListener(this.updatePresence.bind(this)),this.menuBasicUserData.registerUserDataListener(this.checkUserStatus.bind(this)),this.checkUserStatus()}return MenuFriendsCtrl.prototype.visibilityChanged=function(){var _this=this;this.menuDropdown.isExpanded("friends")&&!this.friendListFetched&&(this.$timeout(function(){_this.menuFriends.fetchFriendsList()},300),this.isLoadingFriendlist=!0,this.friendListFetched=!0)},MenuFriendsCtrl.prototype.checkUserStatus=function(){this.menuBasicUserData.isUserLoggedIn()?(this.isVisible=!0,this.menuFriends.restoreFriendListFromCache()):this.isVisible=!1},MenuFriendsCtrl.prototype.updatePresence=function(){for(var key in this.friendsList){var friend=this.friendsList[key];this.friendsList[key].isOnline=!1,this.friendsList[key].haveRichStatus=!1,this.friendsList[key].status="";for(var _i=0,avaiableFriends_1=this.menuFriendsPresence.getAvailableUsers();_i<avaiableFriends_1.length;_i++){var availableFriend=avaiableFriends_1[_i];if(friend.userId==availableFriend.user_id){this.friendsList[key].isOnline=!0,availableFriend.data.status&&(this.friendsList[key].haveRichStatus=!0,this.friendsList[key].status=availableFriend.data.status);break}}}this.friendsList=this.sortFriendList(this.friendsList),this.online=this.menuFriendsPresence.getAvailableUsers().length},MenuFriendsCtrl.prototype.sortFriendList=function(friendsList){return this.$filter("orderBy")(friendsList,["-isOnline","username"])},MenuFriendsCtrl.prototype.friendsListReady=function(){this.friendsList=this.menuFriends.getFriendsList(),this.updatePresence(),this.isLoadingFriendlist=!1,this.total=this.friendsList.length;for(var usersIds=[],_i=0,_a=this.friendsList;_i<_a.length;_i++){var friend=_a[_i];usersIds.push(friend.userId)}this.menuFriendsPresence.setUsers(usersIds)},MenuFriendsCtrl.$inject=["menuDropdown","menuFriends","menuFriendsPresence","menuBasicUserData","$timeout","$filter"],MenuFriendsCtrl}();exports.MenuFriendsCtrl=MenuFriendsCtrl},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNow=void 0;var MenuNow=function(){function MenuNow($window){this.$window=$window}return MenuNow.prototype.getTime=function(serviceName){return void 0===serviceName&&(serviceName=""),serviceName.length&&this.isMicroserviceTimeAvailable(serviceName)?this.$window.gogMicroservices[serviceName].now:this.isGlobalTimeAvailable()?this.$window.gogData.now:Math.floor((new Date).getTime()/1e3)},MenuNow.prototype.getCurrentTime=function(){return Math.floor((new Date).getTime()/1e3)},MenuNow.prototype.isMicroserviceTimeAvailable=function(serviceName){return this.$window.hasOwnProperty("gogMicroservices")&&this.$window.gogMicroservices.hasOwnProperty(serviceName)&&this.$window.gogMicroservices.hasOwnProperty("now")},MenuNow.prototype.isGlobalTimeAvailable=function(){return this.$window.hasOwnProperty("gogData")&&this.$window.gogData.hasOwnProperty("now")},MenuNow.$inject=["$window"],MenuNow}();exports.MenuNow=MenuNow},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuScrollWidth=void 0;var MenuScrollWidth=function(){function MenuScrollWidth(){}return MenuScrollWidth.prototype.getWidth=function(){var testEl=document.createElement("div");testEl.setAttribute("style","width: 100px; height: 100px; overflow: scroll; position: fixed"),document.body.appendChild(testEl);var scrollWidth=testEl.offsetWidth-testEl.clientWidth;return document.body.removeChild(testEl),scrollWidth},MenuScrollWidth}();exports.MenuScrollWidth=MenuScrollWidth},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuAimFactory=void 0,exports.MenuAimFactory=function($window){var MenuAim=function(){function MenuAim(menuElement,tolerance,delay,direction){this.menuElement=menuElement,this.tolerance=tolerance,this.delay=delay,this.direction=direction,this.mouseLocations=[],this.lastDelayLocation=!1,this.assignEvents()}return MenuAim.prototype.getActivationDelay=function(){var offset=this.menuElement.getBoundingClientRect(),location=this.mouseLocations[this.mouseLocations.length-1],prevLocation=this.mouseLocations[0];if(!location)return 0;if(prevLocation||(prevLocation=location),prevLocation.x<offset.left||prevLocation.x>this.getLowerRight(offset).x||prevLocation.y<offset.Top||prevLocation.y>this.getLowerRight(offset).y)return 0;if(this.lastDelayLocation&&location.x==this.lastDelayLocation.x&&location.y==this.lastDelayLocation.y)return 0;var decreasingCorner=this.getDecreasingCorner(offset),increasingCorner=this.getIncreasingCorner(offset),decreasingSlope=this.getSlope(location,decreasingCorner),increasingSlope=this.getSlope(location,increasingCorner),prevDecreasingSlope=this.getSlope(prevLocation,decreasingCorner),prevIncreasingSlope=this.getSlope(prevLocation,increasingCorner);return decreasingSlope<prevDecreasingSlope&&increasingSlope>prevIncreasingSlope?(this.lastDelayLocation=location,this.delay):(this.lastDelayLocation=null,0)},MenuAim.prototype.getIncreasingCorner=function(offset){switch(this.direction){case"right":return this.getLowerRight(offset);case"left":return this.getUpperLeft(offset);case"below":return this.getLowerLeft(offset);case"above":return this.getUpperRight(offset)}},MenuAim.prototype.getDecreasingCorner=function(offset){switch(this.direction){case"right":return this.getUpperRight(offset);case"left":return this.getLowerLeft(offset);case"below":return this.getLowerRight(offset);case"above":return this.getUpperLeft(offset)}},MenuAim.prototype.assignEvents=function(){$window.document.addEventListener("mousemove",this.mouseTrack.bind(this))},MenuAim.prototype.mouseTrack=function(e){this.mouseLocations.push({x:e.pageX,y:e.pageY}),this.mouseLocations.length>3&&this.mouseLocations.shift()},MenuAim.prototype.getUpperLeft=function(offset){return{x:offset.left,y:offset.top-this.tolerance}},MenuAim.prototype.getUpperRight=function(offset){return{x:offset.left+offset.width,y:offset.top-this.tolerance}},MenuAim.prototype.getLowerLeft=function(offset){return{x:offset.left,y:offset.top+offset.height+this.tolerance}},MenuAim.prototype.getLowerRight=function(offset){return{x:offset.left+offset.width,y:offset.top+offset.height+this.tolerance}},MenuAim.prototype.getSlope=function(a,b){return(b.y-a.y)/(b.x-a.x)},MenuAim}();return{getForMenu:function(menuElement,tolerance,delay,direction){return void 0===tolerance&&(tolerance=75),void 0===delay&&(delay=300),void 0===direction&&(direction="right"),new MenuAim(menuElement,tolerance,delay,direction)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.highlight=void 0,exports.highlight=function($sce){return function(text,phrase){return phrase&&(text=text.replace(new RegExp("("+phrase.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")","gi"),'<mark class="highlighted">$1</mark>')),$sce.trustAsHtml(text)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuConfigProvider=void 0;var MenuConfig_1=__webpack_require__(38),MenuConfigProvider=function(){function MenuConfigProvider(){this.os="windows",this.$get=["listenersManager",function(listenersManager){if("string"!=typeof this.env)throw new Error("env is not set in menuConfigProvider!");return new MenuConfig_1.MenuConfig(listenersManager,this.env,this.os,this.locale,this.country,this.currency)}]}return MenuConfigProvider.prototype.setEnvironmentAsDev=function(){this.env="dev"},MenuConfigProvider.prototype.setEnvironmentAsStaging=function(){this.env="staging"},MenuConfigProvider.prototype.setEnvironmentAsProd=function(){this.env="prod"},MenuConfigProvider.prototype.setEnvironmentAsPreprod=function(){this.env="preprod"},MenuConfigProvider.prototype.setOsAsLinux=function(){this.os="gnu-linux"},MenuConfigProvider.prototype.setOsAsOSX=function(){this.os="osx"},MenuConfigProvider.prototype.setOsAsWindows=function(){this.os="windows"},MenuConfigProvider.prototype.setLocale=function(locale){if("string"!=typeof locale)throw new Error("Tried to set locale: "+JSON.stringify(locale)+" ("+typeof locale+"), string expected.");this.locale=locale},MenuConfigProvider.prototype.setCurrency=function(currency){if("string"!=typeof currency)throw new Error("Tried to set currency: "+JSON.stringify(currency)+" ("+typeof currency+"), string expected.");this.currency=currency},MenuConfigProvider.prototype.setCountry=function(country){if("string"!=typeof country)throw new Error("Tried to set country: "+JSON.stringify(country)+" ("+typeof country+"), string expected.");this.country=country},MenuConfigProvider}();exports.MenuConfigProvider=MenuConfigProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuConfig=void 0;var MenuConfig=function(){function MenuConfig(listenersManager,env,os,locale,country,currency){if(void 0===locale&&(locale=MenuConfig.DEAFULT_LOCALES.LANGUAGE),this.env=env,this.os=os,this.locale=locale,this.country=country,this.currency=currency,this.urls={},this.observedTopics=["chat","friends","user_notification","announcement"],this.insightsClientId="46755278331571209",this.gogMenuHostname=MenuConfig.GOG_MENU_HOSTNAMES.staging,this.gogWebsiteHostname=MenuConfig.GOG_WEBSITE_HOSTNAMES.staging,this.gogEmbedHostname=MenuConfig.GOG_EMBED_HOSTNAMES.staging,this.gogPusherHostname=MenuConfig.GOG_PUSHER_HOSTNAMES.staging,this.gogNotificationsHostname=MenuConfig.GOG_NOTIFICATIONS_HOSTNAMES.staging,this.gogPresenceHostname=MenuConfig.GOG_PRESENCE_HOSTNAMES.staging,this.gogCatalogHostname=MenuConfig.GOG_CATALOG_HOSTNAMES.staging,this.gogInsightsHostname=MenuConfig.GOG_INSIGHTS_HOSTNAMES.staging,this.recommendationsApiHostname=MenuConfig.RECOMMENDATIONS_API_HOSTNAMES.staging,this.fakeTimeParameter="",this.localeListenersManager=listenersManager.getManager(),this.currencyListenersManager=listenersManager.getManager(),this.countryListenersManager=listenersManager.getManager(),!this.currency){var storedCurrency=window.localStorage.getItem(MenuConfig.STORED_KEYS.CURRENCY);this.currency=null!=storedCurrency?storedCurrency:MenuConfig.DEAFULT_LOCALES.CURRENCY}if(!this.country){var storedCountry=window.localStorage.getItem(MenuConfig.STORED_KEYS.COUNTRY);this.country=null!=storedCountry?storedCountry:MenuConfig.DEAFULT_LOCALES.COUNTRY}window.gogMicroservices&&window.gogMicroservices.hasOwnProperty("menu")&&window.gogMicroservices.menu.hasOwnProperty("features")&&window.gogMicroservices.menu.features.hasOwnProperty("feedNotifications")&&window.gogMicroservices.menu.features.feedNotifications&&this.observedTopics.push("activity_feed"),this.setHostnames(),this.setUrls()}return MenuConfig.prototype.registerLocaleListener=function(listener){return this.localeListenersManager.addListener(listener)},MenuConfig.prototype.registerCurrencyListener=function(listener){return this.currencyListenersManager.addListener(listener)},MenuConfig.prototype.registerCountryListener=function(listener){return this.countryListenersManager.addListener(listener)},MenuConfig.prototype.getEnv=function(){return this.env},MenuConfig.prototype.getOs=function(){return this.os},MenuConfig.prototype.getLocale=function(){return this.locale},MenuConfig.prototype.getCurrency=function(){return this.currency},MenuConfig.prototype.getCountry=function(){return this.country},MenuConfig.prototype.setLocale=function(locale){this.locale!==locale&&(this.locale=locale,this.setUrls(),this.localeListenersManager.callListeners(this.locale))},MenuConfig.prototype.setCurrency=function(currency){this.currency!==currency&&(this.currency=currency,window.localStorage.setItem(MenuConfig.STORED_KEYS.CURRENCY,currency),this.setUrls(),this.currencyListenersManager.callListeners(this.currency))},MenuConfig.prototype.setCountry=function(country){this.country!==country&&(this.country=country,window.localStorage.setItem(MenuConfig.STORED_KEYS.COUNTRY,country),this.setUrls(),this.countryListenersManager.callListeners(this.country))},MenuConfig.prototype.setFaketimeParameter=function(fakeTime){this.fakeTimeParameter="&fakeTime="+fakeTime,this.setUrls()},MenuConfig.prototype.setHostnames=function(){this.gogMenuHostname=MenuConfig.GOG_MENU_HOSTNAMES[this.env],this.gogWebsiteHostname=MenuConfig.GOG_WEBSITE_HOSTNAMES[this.env],this.gogEmbedHostname=MenuConfig.GOG_EMBED_HOSTNAMES[this.env],this.gogPusherHostname=MenuConfig.GOG_PUSHER_HOSTNAMES[this.env],this.gogNotificationsHostname=MenuConfig.GOG_NOTIFICATIONS_HOSTNAMES[this.env],this.gogPresenceHostname=MenuConfig.GOG_PRESENCE_HOSTNAMES[this.env],this.gogCatalogHostname=MenuConfig.GOG_CATALOG_HOSTNAMES[this.env],this.gogInsightsHostname=MenuConfig.GOG_INSIGHTS_HOSTNAMES[this.env],this.recommendationsApiHostname=MenuConfig.RECOMMENDATIONS_API_HOSTNAMES[this.env]},MenuConfig.prototype.setUrls=function(){var _this=this;this.urls={gamesForYou:function(userId){return _this.recommendationsApiHostname+"/v1/recommendations/galaxy_generic?user_id="+userId+"&currency="+_this.currency+"&country_code="+_this.country+"&limit=6"},storeMenuProducts:this.gogMenuHostname+"/v1/store/configuration?locale="+this.locale+"&currency="+this.currency+"&country="+this.country+this.fakeTimeParameter,menuData:this.gogMenuHostname+"/v1/account/basic?locale="+this.locale+"&currency="+this.currency+"&country="+this.country+this.fakeTimeParameter,accountData:this.gogMenuHostname+"/v1/account/stats?locale="+this.locale+"&currency="+this.currency+"&country="+this.country+this.fakeTimeParameter,logout:this.gogWebsiteHostname+"/logout",setUserPreferences:function(locale,currency){return _this.gogWebsiteHostname+"/user/preferences?language="+locale+"&currency="+currency},friendsList:this.gogMenuHostname+"/v1/account/friends",productSearch:this.gogWebsiteHostname+"/games/ajax/filtered",productSearchNew:this.gogCatalogHostname+"/v1/catalog",checkout:"/checkout",account:"/account",feed:"/feed",ownedProducts:this.gogMenuHostname+"/v1/account/licences",presence:function(usersIds){return _this.gogPresenceHostname+"/statuses?user_id="+usersIds},setRedirectAfterLogin:function(route){return _this.gogWebsiteHostname+"/user/set-redirect-url?url="+route},cart:{get:this.gogEmbedHostname+"/cart",add:function(id){return _this.gogEmbedHostname+"/cart/add/"+id},addMany:this.gogEmbedHostname+"/cart/add",addSeries:function(id){return _this.gogEmbedHostname+"/cart/add/series/"+id},remove:function(id){return _this.gogEmbedHostname+"/cart/remove/"+id}},wishlist:{get:this.gogWebsiteHostname+"/user/wishlist.json",add:function(id){return _this.gogWebsiteHostname+"/user/wishlist/add/"+id},remove:function(id){return _this.gogWebsiteHostname+"/user/wishlist/remove/"+id}},notifications:{getNotifications:function(client_id,user_id,types,access_token){return _this.gogNotificationsHostname+"/clients/"+client_id+"/users/"+user_id+"/notifications?types="+types.join(",")+"&access_token="+access_token},getNotificationsStats:function(client_id,user_id,access_token){return _this.gogNotificationsHostname+"/clients/"+client_id+"/users/"+user_id+"/stats?access_token="+access_token},deleteNotification:function(notificationId,client_id,user_id,access_token){return _this.gogNotificationsHostname+"/clients/"+client_id+"/users/"+user_id+"/notifications/"+notificationId+"?access_token="+access_token},consumeNotification:function(notificationId,client_id,user_id,access_token){return _this.gogNotificationsHostname+"/clients/"+client_id+"/users/"+user_id+"/notifications/"+notificationId+"?access_token="+access_token},pusher:this.gogPusherHostname}}},MenuConfig.GOG_NOTIFICATIONS_HOSTNAMES={dev:"https://notifications.gog-staging.com",staging:"https://notifications.gog-staging.com",prod:"https://notifications.gog.com",preprod:"https://notifications.gog.com"},MenuConfig.GOG_WEBSITE_HOSTNAMES={dev:"https://www.gog-develop.com",staging:"https://www.gog-staging.com",prod:"https://www.gog.com",preprod:"https://www.gog-preprod.com"},MenuConfig.GOG_EMBED_HOSTNAMES={dev:"https://embed.gog-develop.com",staging:"https://embed.gog-staging.com",prod:"https://embed.gog.com",preprod:"https://embed.gog-preprod.com"},MenuConfig.GOG_PUSHER_HOSTNAMES={dev:"wss://notifications-pusher.gog.test",staging:"wss://notifications-pusher.gog.test",prod:"wss://notifications-pusher.gog.com",preprod:"wss://notifications-pusher.gog.com"},MenuConfig.GOG_PRESENCE_HOSTNAMES={dev:"https://presence.gog.test",staging:"https://presence.gog.test",prod:"https://presence.gog.com",preprod:"https://presence.gog.com"},MenuConfig.GOG_MENU_HOSTNAMES={dev:"https://menu.gog-develop.com",staging:"https://menu.gog-staging.com",prod:"https://menu.gog.com",preprod:"https://menu.gog-preprod.com"},MenuConfig.GOG_CATALOG_HOSTNAMES={dev:"https://catalog.gog-develop.com",staging:"https://catalog.gog-staging.com",prod:"https://catalog.gog.com",preprod:"https://catalog.gog-preprod.com"},MenuConfig.GOG_INSIGHTS_HOSTNAMES={dev:"https://insights-collector.gog-staging.com",staging:"https://insights-collector.gog-staging.com",prod:"https://insights-collector.gog.com",preprod:"https://insights-collector.gog.com"},MenuConfig.RECOMMENDATIONS_API_HOSTNAMES={dev:"https://recommendations-api.k8s.gog-staging.com",staging:"https://recommendations-api.k8s.gog-staging.com",preprod:"https://recommendations-api.gog.com",prod:"https://recommendations-api.gog.com"},MenuConfig.DEAFULT_LOCALES={LANGUAGE:"en-US",CURRENCY:"USD",COUNTRY:"REST"},MenuConfig.STORED_KEYS={CURRENCY:"menuCurrency",COUNTRY:"menuCountry"},MenuConfig}();exports.MenuConfig=MenuConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuProductStateFactory=void 0,exports.MenuProductStateFactory=function(){var ProductStateComponent=function(){function ProductStateComponent(element,$attrs,$window){if(this.element=element,this.$attrs=$attrs,this.$window=$window,this.listeners={},this.product=null,this.$window=$window,this.el=element.querySelector(ProductStateComponent.NODE_SELECTOR)||element,this.updateStateListenerBound=this.updateStateListener.bind(this),this.stateOverrides={},null!=$attrs[ProductStateComponent.ATTR_OVERRIDE])try{this.stateOverrides=JSON.parse($attrs[ProductStateComponent.ATTR_OVERRIDE])}catch(error){this.stateOverrides={}}}return ProductStateComponent.prototype.setProduct=function(product){this.product=product,this.destroyListeners(),this.initListener(),this.updateState()},ProductStateComponent.prototype.destroy=function(){this.destroyListeners()},ProductStateComponent.prototype.getStateCondition=function(className,defaultCondition){var condition=defaultCondition;return null!=this.stateOverrides[className]&&(condition=this.stateOverrides[className]),condition},ProductStateComponent.prototype.getStateIsBuyable=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.IS_BUYABLE,this.product.isPriceVisible),ProductStateComponent.CLASSNAME.IS_BUYABLE]},ProductStateComponent.prototype.getStateIsPreorder=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.IS_PREORDER,!this.product.isOwned&&this.product.isComingSoon&&this.product.isPriceVisible),ProductStateComponent.CLASSNAME.IS_PREORDER]},ProductStateComponent.prototype.getStateIsOwned=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.IS_OWNED,this.product.isOwned),ProductStateComponent.CLASSNAME.IS_OWNED]},ProductStateComponent.prototype.getStateIsTba=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.IS_TBA,!this.product.isPriceVisible),ProductStateComponent.CLASSNAME.IS_TBA]},ProductStateComponent.prototype.getStateIsWishlisted=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.IS_WISHLISTED,this.product.isWishlisted),ProductStateComponent.CLASSNAME.IS_WISHLISTED]},ProductStateComponent.prototype.getStateIsInCart=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.IS_IN_CART,this.product.inCart),ProductStateComponent.CLASSNAME.IS_IN_CART]},ProductStateComponent.prototype.getStateIsDiscounted=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.IS_DISCOUNTED,null!=this.product.price&&this.product.price.isDiscounted),ProductStateComponent.CLASSNAME.IS_DISCOUNTED]},ProductStateComponent.prototype.getStateIsFree=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.IS_FREE,null!=this.product.price&&this.product.price.isFree&&this.product.isPriceVisible),ProductStateComponent.CLASSNAME.IS_FREE]},ProductStateComponent.prototype.getStateIsPriceBtnHidden=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.IS_PRICE_BTN_HIDDEN,null==this.product.price),ProductStateComponent.CLASSNAME.IS_PRICE_BTN_HIDDEN]},ProductStateComponent.prototype.getStateHasCard=function(){return[this.getStateCondition(ProductStateComponent.CLASSNAME.HAS_CARD,this.product.url),ProductStateComponent.CLASSNAME.HAS_CARD]},ProductStateComponent.prototype.getStateConditions=function(observedAttribute){switch(observedAttribute){case ProductStateComponent.OBSERVED_ATTRIBUTES[0]:return[this.getStateIsOwned()];case ProductStateComponent.OBSERVED_ATTRIBUTES[1]:return[this.getStateIsWishlisted()];case ProductStateComponent.OBSERVED_ATTRIBUTES[2]:return[this.getStateIsInCart()];case ProductStateComponent.OBSERVED_ATTRIBUTES[3]:return[this.getStateIsDiscounted(),this.getStateIsFree(),this.getStateIsPriceBtnHidden()];default:return[this.getStateHasCard(),this.getStateIsOwned(),this.getStateIsDiscounted(),this.getStateIsFree(),this.getStateIsInCart(),this.getStateIsBuyable(),this.getStateIsPreorder(),this.getStateIsWishlisted(),this.getStateIsTba(),this.getStateIsPriceBtnHidden()]}},ProductStateComponent.prototype.initListener=function(){this.destroyListeners();for(var _i=0,_a=ProductStateComponent.OBSERVED_ATTRIBUTES;_i<_a.length;_i++){var observedAttribute=_a[_i];this.listeners[observedAttribute]=this.product.onAttributeChange(observedAttribute,this.updateStateListenerBound(observedAttribute))}},ProductStateComponent.prototype.destroyListeners=function(){for(var listenerIndex in this.listeners)this.listeners[listenerIndex]()},ProductStateComponent.prototype.updateStateListener=function(observedAttribute){return this.updateState.bind(this,observedAttribute)},ProductStateComponent.prototype.updateState=function(observedAttribute){void 0===observedAttribute&&(observedAttribute=null);var stateConditions=this.getStateConditions(observedAttribute);for(var state in stateConditions)stateConditions[state][0]?this.el.classList.add(stateConditions[state][1]):this.el.classList.remove(stateConditions[state][1])},ProductStateComponent.NODE_SELECTOR=".js-product-state",ProductStateComponent.ATTR_OVERRIDE="gogProductStateOverride",ProductStateComponent.CLASSNAME={HAS_CARD:"product-row--has-card",IS_OWNED:"is-owned",IS_FREE:"is-free",IS_BUYABLE:"is-buyable",IS_PREORDER:"is-preorder",IS_DISCOUNTED:"is-discounted",IS_TBA:"is-tba",IS_WISHLISTED:"is-wishlisted",IS_IN_CART:"is-in-cart",IS_PRICE_BTN_HIDDEN:"is-price-btn-hidden"},ProductStateComponent.OBSERVED_ATTRIBUTES=["isOwned","isWishlisted","inCart","price"],ProductStateComponent}();return{getForElement:function(element,$attrs,$window){return new ProductStateComponent(element,$attrs,$window)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuBasicUserDataProvider=void 0;var MenuBasicUserDataProvider=function(){function MenuBasicUserDataProvider(){this.$get=function(){throw new Error("MenuBasicUserDataProvider needs to have configured source for user basic data")}}return MenuBasicUserDataProvider.prototype.setUserBasicDataSourceName=function(userBasicDataSourceName){this.$get=[userBasicDataSourceName,function(userBasicDataSource){return userBasicDataSource}]},MenuBasicUserDataProvider}();exports.MenuBasicUserDataProvider=MenuBasicUserDataProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuContainerAppClientIdProvider=void 0;var MenuContainerAppClientIdProvider=function(){function MenuContainerAppClientIdProvider(){this.$get=function(){throw new Error("MenuContainerAppClientIdProvider needs to have configured source to get containing app client id")}}return MenuContainerAppClientIdProvider.prototype.setClientIdSourceName=function(clientIdSourceName){this.$get=[clientIdSourceName,function(clientIdSource){return clientIdSource}]},MenuContainerAppClientIdProvider}();exports.MenuContainerAppClientIdProvider=MenuContainerAppClientIdProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuGalaxyAccountsProvider=void 0;var MenuGalaxyAccountsProvider=function(){function MenuGalaxyAccountsProvider(){this.$get=function(){throw new Error("MenuGalaxyAccounts needs to have menuGalaxyAccounts service provided")}}return MenuGalaxyAccountsProvider.prototype.setMenuGalaxyAccountsName=function(menuGalaxyAccountsServiceName){this.$get=[menuGalaxyAccountsServiceName,function(menuGalaxyAccountsService){return menuGalaxyAccountsService}]},MenuGalaxyAccountsProvider}();exports.MenuGalaxyAccountsProvider=MenuGalaxyAccountsProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuUserStorageProvider=void 0;var MenuUserStorageProvider=function(){function MenuUserStorageProvider(){this.$get=function(){throw new Error("MenuUserStorage needs to have userStorage service provided")}}return MenuUserStorageProvider.prototype.setUserStorageProvider=function(userStorageServiceName){this.$get=[userStorageServiceName,function(userStorageService){return userStorageService}]},MenuUserStorageProvider}();exports.MenuUserStorageProvider=MenuUserStorageProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuBasicUserDataEndpointSource=void 0;var angular=__webpack_require__(0),MenuBasicUserDataEndpointSource=function(){function MenuBasicUserDataEndpointSource(listenersManager,menuDataClientFactory,menuConfig){this.userBasicData=null,this.isLoggedIn=!1,this.userBasicDataChangeListenersManager=listenersManager.getManager(),this.menuDataClient=menuDataClientFactory.getForEndpoint(menuConfig.urls.menuData,"menuData",!0),this.menuDataClient.registerDataListener(this.parseBasicUserDataFromEndpoint.bind(this)),this.menuDataClient.isDataAvailable()&&this.parseBasicUserDataFromEndpoint()}return MenuBasicUserDataEndpointSource.prototype.registerUserDataListener=function(listener){return this.userBasicDataChangeListenersManager.addListener(listener)},MenuBasicUserDataEndpointSource.prototype.getUserData=function(){return this.userBasicData},MenuBasicUserDataEndpointSource.prototype.isUserLoggedIn=function(){return this.isLoggedIn},MenuBasicUserDataEndpointSource.prototype.parseBasicUserDataFromEndpoint=function(){var menuData=this.menuDataClient.getData(),newIsLoggedInValue=menuData.isLoggedIn,newBasicUserData={avatar:{url:""},avatars:{menu_user_av_small:"",menu_user_av_small2:"",menu_user_av_big:"",menu_user_av_big2:""},username:"",id:"",isLoggedIn:menuData.isLoggedIn,profileState:"enabled"};menuData.isLoggedIn&&((newBasicUserData={avatar:{url:menuData.avatar},avatars:{menu_user_av_small:menuData.avatars.menu_user_av_small,menu_user_av_small2:menuData.avatars.menu_user_av_small2,menu_user_av_big:menuData.avatars.menu_user_av_big,menu_user_av_big2:menuData.avatars.menu_user_av_big2},username:menuData.username,id:"string"==typeof menuData.userId?menuData.userId:null,isLoggedIn:menuData.isLoggedIn}).profileState=menuData.profileState),newIsLoggedInValue===this.isLoggedIn&&angular.equals(this.userBasicData,newBasicUserData)||(this.userBasicData=newBasicUserData,this.isLoggedIn=newIsLoggedInValue,this.userBasicDataChangeListenersManager.callListeners(this.userBasicData))},MenuBasicUserDataEndpointSource.$inject=["listenersManager","menuDataClientFactory","menuConfig"],MenuBasicUserDataEndpointSource}();exports.MenuBasicUserDataEndpointSource=MenuBasicUserDataEndpointSource},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuContainerAppClientIdEndpointSource=void 0;var MenuContainerAppClientIdEndpointSource=function(){function MenuContainerAppClientIdEndpointSource(listenersManager,menuDataClientFactory,menuConfig){this.menuConfig=menuConfig,this.clientId=null,this.containerAppClientIdListenersManager=listenersManager.getManager(),this.menuDataClient=menuDataClientFactory.getForEndpoint(menuConfig.urls.menuData,"menuData",!0),this.menuDataClient.registerDataListener(this.setClientId.bind(this)),this.menuDataClient.isDataAvailable()&&this.setClientId()}return MenuContainerAppClientIdEndpointSource.prototype.registerClientIdListener=function(listener){return this.containerAppClientIdListenersManager.addListener(listener)},MenuContainerAppClientIdEndpointSource.prototype.getClientId=function(){return this.clientId},MenuContainerAppClientIdEndpointSource.prototype.setClientId=function(){if(!this.menuDataClient.isDataAvailable())throw new Error("menuDataClient data is not available although we expect it to be, to get clientId from it.");var endpointMenuData=this.menuDataClient.getData(),newClientId=null;"string"==typeof endpointMenuData.clientId&&(newClientId=endpointMenuData.clientId),this.clientId!==newClientId&&(this.clientId=newClientId,this.containerAppClientIdListenersManager.callListeners(this.clientId))},MenuContainerAppClientIdEndpointSource.$inject=["listenersManager","menuDataClientFactory","menuConfig"],MenuContainerAppClientIdEndpointSource}();exports.MenuContainerAppClientIdEndpointSource=MenuContainerAppClientIdEndpointSource},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuFriends=void 0;var MenuFriends=function(){function MenuFriends(listenersManager,$http,menuBasicUserData,menuConfig,menuDataClientPerUserFactory){this.listenersManager=listenersManager,this.$http=$http,this.menuBasicUserData=menuBasicUserData,this.menuConfig=menuConfig,this.menuDataClientPerUserFactory=menuDataClientPerUserFactory,this.isAvailable=!1,this.allFriends=[],this.friendsListListenersManager=listenersManager.getManager(),this.friendsListClient=this.menuDataClientPerUserFactory.getForEndpointPerUser(this.menuConfig.urls.friendsList,"friendsList"),this.friendsListClient.registerDataListener(this.updateFriendsList.bind(this))}return MenuFriends.prototype.getFriendsList=function(){return this.allFriends},MenuFriends.prototype.registerFriendsListListener=function(listener){this.isAvailable&&listener(),this.friendsListListenersManager.addListener(listener)},MenuFriends.prototype.fetchFriendsList=function(){this.menuBasicUserData.isUserLoggedIn()&&this.friendsListClient.fetchData()},MenuFriends.prototype.restoreFriendListFromCache=function(){this.menuBasicUserData.isUserLoggedIn()&&this.friendsListClient.isDataAvailable()&&this.updateFriendsList()},MenuFriends.prototype.updateFriendsList=function(){var friendsList=this.friendsListClient.getData();this.allFriends=friendsList.friends,this.friendsListListenersManager.callListeners()},MenuFriends.$inject=["listenersManager","$http","menuBasicUserData","menuConfig","menuDataClientPerUserFactory"],MenuFriends}();exports.MenuFriends=MenuFriends},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuFriendsPresence=void 0;var MenuFriendsPresence=function(){function MenuFriendsPresence(listenersManager,$http,menuConfig){this.listenersManager=listenersManager,this.$http=$http,this.menuConfig=menuConfig,this.isWatching=!1,this.availableUsers=[],this.presenceUpdatedListenersManager=listenersManager.getManager()}return MenuFriendsPresence.prototype.startWatchingPresence=function(){this.fetchPresence(),this.interval=setInterval(this.fetchPresence.bind(this),MenuFriendsPresence.FETCH_PRESENCE_INTERVAL),this.isWatching=!0},MenuFriendsPresence.prototype.registerPresenceUpdatedListener=function(listener){this.presenceUpdatedListenersManager.addListener(listener)},MenuFriendsPresence.prototype.setUsers=function(usersIds){this.usersIds=usersIds,this.isWatching||this.startWatchingPresence()},MenuFriendsPresence.prototype.getAvailableUsers=function(){return this.availableUsers},MenuFriendsPresence.prototype.fetchPresence=function(){this.usersIds.length&&this.$http.get(this.getUrl(this.usersIds)).then(this.onGetResponse.bind(this),this.onGetError.bind(this))},MenuFriendsPresence.prototype.onGetResponse=function(response){this.availableUsers=response.data.items,this.presenceUpdatedListenersManager.callListeners()},MenuFriendsPresence.prototype.onGetError=function(){},MenuFriendsPresence.prototype.getUrl=function(userIdsArray){var userIdsString=userIdsArray.join(",");return this.menuConfig.urls.presence(userIdsString)},MenuFriendsPresence.$inject=["listenersManager","$http","menuConfig"],MenuFriendsPresence.FETCH_PRESENCE_INTERVAL=3e4,MenuFriendsPresence}();exports.MenuFriendsPresence=MenuFriendsPresence},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuLogout=exports.MenuLogoutProvider=void 0;var MenuLogoutProvider=function(){function MenuLogoutProvider(){this.$get=function(){throw new Error("MenuLogoutProvider needs to have containing angular app logout service provided.")}}return MenuLogoutProvider.prototype.setLogoutServiceName=function(logoutServiceName){this.$get=["$window",logoutServiceName,function($window,logoutService){return new MenuLogout($window,logoutService)}]},MenuLogoutProvider}();exports.MenuLogoutProvider=MenuLogoutProvider;var MenuLogout=function(){function MenuLogout($window,logoutService){this.$window=$window,this.logoutService=logoutService}return MenuLogout.prototype.logout=function(){this.logoutService.startLogout()},MenuLogout.prototype.registerLoggedOutListener=function(loggedOutListener){return this.logoutService.registerLoggedOutListener(loggedOutListener)},MenuLogout}();exports.MenuLogout=MenuLogout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuRedirect=void 0;var MenuRedirect=function(){function MenuRedirect($http,menuConfig){this.$http=$http,this.menuConfig=menuConfig}return MenuRedirect.prototype.set=function(route,callback){this.$http.get(this.menuConfig.urls.setRedirectAfterLogin(route)).then(function(response){"function"==typeof callback&&callback()})},MenuRedirect.$inject=["$http","menuConfig"],MenuRedirect}();exports.MenuRedirect=MenuRedirect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(51)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuBellNotifications=void 0;var NOTIFICATION_TYPES,angular=__webpack_require__(0);!function(NOTIFICATION_TYPES){NOTIFICATION_TYPES.NewInvite="new_invite",NOTIFICATION_TYPES.NewFriend="new_friend",NOTIFICATION_TYPES.NewChatMessage="new_chat_message",NOTIFICATION_TYPES.NewGameInvite="new_game_invite",NOTIFICATION_TYPES.NewGogAnnouncement="new_gog_announcement",NOTIFICATION_TYPES.NewForumReply="new_forum_reply",NOTIFICATION_TYPES.ProductRelease="product_release",NOTIFICATION_TYPES.WishlistedProductsDiscounted="wishlisted_products_discounted",NOTIFICATION_TYPES.Announcement="announcement"}(NOTIFICATION_TYPES||(NOTIFICATION_TYPES={}));var MenuBellNotifications=function(){function MenuBellNotifications(menuNotificationsRepository,listenersManager){this.menuNotificationsRepository=menuNotificationsRepository,this.unconsumedCount=0,this.handledNotifications=[],this.totalCount=0,window.gogMicroservices&&window.gogMicroservices.hasOwnProperty("menu")&&window.gogMicroservices.menu.hasOwnProperty("features")&&window.gogMicroservices.menu.features.hasOwnProperty("notifications_v3")&&window.gogMicroservices.menu.features.notifications_v3?this.handledNotifications.push(NOTIFICATION_TYPES.NewInvite,NOTIFICATION_TYPES.NewFriend,NOTIFICATION_TYPES.NewChatMessage,NOTIFICATION_TYPES.NewGameInvite,NOTIFICATION_TYPES.NewGogAnnouncement,NOTIFICATION_TYPES.ProductRelease,NOTIFICATION_TYPES.WishlistedProductsDiscounted,NOTIFICATION_TYPES.Announcement):this.handledNotifications.push(NOTIFICATION_TYPES.NewInvite,NOTIFICATION_TYPES.NewFriend,NOTIFICATION_TYPES.NewChatMessage,NOTIFICATION_TYPES.NewGameInvite,NOTIFICATION_TYPES.NewGogAnnouncement,NOTIFICATION_TYPES.ProductRelease,NOTIFICATION_TYPES.NewForumReply,NOTIFICATION_TYPES.WishlistedProductsDiscounted,NOTIFICATION_TYPES.Announcement),this.countersListenersManager=listenersManager.getManager(),this.menuNotificationsRepository.registerNotificationsChangedListener(this.updateCounters.bind(this))}return MenuBellNotifications.prototype.registerCountersListeners=function(listener){return this.countersListenersManager.addListener(listener)},MenuBellNotifications.prototype.getUnconsumedCount=function(){return this.unconsumedCount},MenuBellNotifications.prototype.getTotalCount=function(){return this.totalCount},MenuBellNotifications.prototype.isHandlingNotificationType=function(notificationType){return-1!==this.handledNotifications.indexOf(notificationType)},MenuBellNotifications.prototype.updateCounters=function(){this.unconsumedCount=this.menuNotificationsRepository.getUnconsumedCount(this.handledNotifications),this.totalCount=this.menuNotificationsRepository.getTotalCount(this.handledNotifications),this.countersListenersManager.callListeners()},MenuBellNotifications.$inject=["menuNotificationsRepository","listenersManager"],MenuBellNotifications}();exports.MenuBellNotifications=MenuBellNotifications,angular.module("menuBellNotificationsComponent",[]).service("menuBellNotifications",MenuBellNotifications)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(53),__webpack_require__(54)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuGamesComponent",[])},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuGames=exports.GAMES_FOR_YOU_CATEGORY_NAME=void 0;var angular=__webpack_require__(0);exports.GAMES_FOR_YOU_CATEGORY_NAME="games-for-you";var MenuGames=function(){function MenuGames(menuProductRepositoriesManager,$window,$timeout,menuAimFactory,listenersManager,menuProductRepositoryFactory,menuConfig,menuDataClientPerUserFactory){this.menuProductRepositoriesManager=menuProductRepositoriesManager,this.$window=$window,this.$timeout=$timeout,this.menuAimFactory=menuAimFactory,this.menuProductRepositoryFactory=menuProductRepositoryFactory,this.menuConfig=menuConfig,this.menuDataClientPerUserFactory=menuDataClientPerUserFactory,this.selectedCategory=null,this.categories={},this.customCategories={},this.storeGamesClient={};try{this.productsRepository=this.menuProductRepositoryFactory.createMenuProductsRepository("menuStoreProducts")}catch(e){this.productsRepository=this.menuProductRepositoriesManager.getRepository("menuStoreProducts")}this.gameDataChangeListeners=listenersManager.getManager(),this.categoryChangeListeners=listenersManager.getManager(),this.customCategoriesListeners=listenersManager.getManager(),this.menuConfig.registerLocaleListener(this.setCurrentLocale.bind(this)),this.menuConfig.registerCurrencyListener(this.setCurrentCurrency.bind(this)),this.menuConfig.registerCountryListener(this.setCurrentCountry.bind(this)),this.storeGamesListenerCanceller=angular.noop,this.currentLocale=this.menuConfig.getLocale(),this.currentCountry=this.menuConfig.getCountry(),this.currentCurrency=this.menuConfig.getCurrency(),this.setStoreGames(),this.menuAim=this.menuAimFactory.getForMenu(this.$window.document.querySelector(".js-menu-sloped-submenu")),this.layerTimeout=!1,this.layerLoadingTimeout=!1,this.setCategories()}return MenuGames.prototype.registerGameDataChangeListener=function(callback){this.gameDataChangeListeners.addListener(callback)},MenuGames.prototype.registerCategoryChangeListener=function(callback){this.categoryChangeListeners.addListener(callback)},MenuGames.prototype.registerCustomCategoriesListener=function(callback){this.customCategoriesListeners.addListener(callback)},MenuGames.prototype.selectCategory=function(category,activationDelayed){var _this=this;void 0===activationDelayed&&(activationDelayed=!0),this.$timeout.cancel(this.layerLoadingTimeout);var delay=0;activationDelayed&&(delay=this.menuAim.getActivationDelay());this.layerLoadingTimeout=this.$timeout(function(){category in _this.categories?(_this.selectedCategory=_this.categories[category],_this.showCategory()):(_this.selectedCategory={name:category},_this.categoryChangeListeners.callListeners())}.bind(this),delay)},MenuGames.prototype.holdCategory=function(){this.$timeout.cancel(this.layerTimeout),this.$timeout.cancel(this.layerLoadingTimeout),this.isLayerExpanded=!0},MenuGames.prototype.hideCategory=function(){this.isLayerExpanded=!1,this.selectedCategory=this.categories[MenuGames.DEFAULT_CATEGORY],this.categoryChangeListeners.callListeners()},MenuGames.prototype.getCustomCategories=function(){return this.customCategories},MenuGames.prototype.setStoreGames=function(){this.storeGamesListenerCanceller(),this.storeGamesClient=this.menuDataClientPerUserFactory.getForEndpointPerUser(this.menuConfig.urls.storeMenuProducts,"storeGamesData_"+this.currentLocale+"_"+this.currentCountry+"_"+this.currentCurrency,!0),this.storeGamesClient.isDataAvailable()&&this.setCategories(),this.storeGamesListenerCanceller=this.storeGamesClient.registerDataListener(this.setCategories.bind(this))},MenuGames.prototype.setCurrentLocale=function(currentLocale){this.currentLocale=currentLocale,this.setStoreGames()},MenuGames.prototype.setCurrentCurrency=function(currentCurrency){this.currentCurrency=currentCurrency,this.setStoreGames()},MenuGames.prototype.setCurrentCountry=function(currentCountry){this.currentCountry=currentCountry,this.setStoreGames()},MenuGames.prototype.addProductsToProductsRepository=function(){for(var category in this.categories)void 0!==this.categories[category].products&&this.productsRepository.addProducts(this.categories[category].products)},MenuGames.prototype.setCategories=function(){var categories=this.storeGamesClient.getData();this.categories=categories,this.selectedCategory=this.categories[MenuGames.DEFAULT_CATEGORY],this.customCategories=this.filterCustomCategories(this.categories),this.addProductsToProductsRepository(),this.customCategoriesListeners.callListeners(),this.updateGamePrices(this.categories)},MenuGames.prototype.updateGamePrices=function(categories){var newPrices={};for(var category in categories)if(void 0!==categories[category].products)for(var _i=0,products_1=categories[category].products;_i<products_1.length;_i++){var product=products_1[_i];product.isPricingEnabled&&(newPrices[product.id]=product.price)}this.menuProductRepositoriesManager.updatePricesInAllRepositories(newPrices),this.gameDataChangeListeners.callListeners()},MenuGames.prototype.filterCustomCategories=function(allCategories){var customCategories={},fixedCategories={};for(var category in allCategories){var item=this.categories[category];void 0!==item.isSpecial&&item.isSpecial&&(MenuGames.FIXED_CATEGORIES.includes(category)?fixedCategories[category]=item:customCategories[category]=item)}return __assign(__assign({},customCategories),fixedCategories)},MenuGames.prototype.showCategory=function(){this.$timeout.cancel(this.layerTimeout),this.isLayerExpanded=!0,this.categoryChangeListeners.callListeners()},MenuGames.$inject=["menuProductRepositoriesManager","$window","$timeout","menuAimFactory","listenersManager","menuProductRepositoryFactory","menuConfig","menuDataClientPerUserFactory"],MenuGames.DEFAULT_CATEGORY="default",MenuGames.FIXED_CATEGORIES=["classical-section","cdpr"],MenuGames}();exports.MenuGames=MenuGames,angular.module("menuGamesComponent").service("menuGames",MenuGames)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(3),__webpack_require__(56),__webpack_require__(57),__webpack_require__(58)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuProductComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuProduct=void 0;var angular=__webpack_require__(0),getEventContext_1=__webpack_require__(3),MenuProduct=function(){function MenuProduct($scope,$attrs,menuProductRepositoriesManager,$window,cart,menuAccount,menuEventsTracker,menuCartState,$element,menuProductStateFactory){this.$scope=$scope,this.$attrs=$attrs,this.menuProductRepositoriesManager=menuProductRepositoriesManager,this.$window=$window,this.cart=cart,this.menuAccount=menuAccount,this.menuEventsTracker=menuEventsTracker,this.menuCartState=menuCartState,this.shouldShowExtraInfo=!1,this.shouldShowExtraFreeInfo=!1,this.cancelCartListener=angular.noop,this.cancelWishlistStateSubscriber=angular.noop,this.cancelOwnedProductsStateSubscriber=angular.noop,this.$attrs.hasOwnProperty("menuProductRepository")&&(this.productsRepository=this.menuProductRepositoriesManager.getRepository(this.$attrs.menuProductRepository)),this.element=$element[0],this.productState=menuProductStateFactory.getForElement(this.element,$attrs,$window),this.cancelIdObserver=this.$attrs.$observe("menuProduct",this.initialize.bind(this)),this.$scope.$on("$destroy",this.deconstructor.bind(this))}return MenuProduct.prototype.addToCart=function($event,context,categoryName){var _this=this;$event.preventDefault(),$event.stopPropagation(),this.product.buyable&&(this.cart.add(this.product.id),this.menuEventsTracker.sendEvent("add_to_cart",{currency:this.$window.gogMicroservices.menu.currentCurrencyCode,value:parseFloat(this.product.price.amount),items:[this.menuEventsTracker.mapProductToEventItem(this.product)],cartItems:this.menuCartState.productsInCart.map(function(product){return _this.menuEventsTracker.mapProductToEventItem(product)}),context:getEventContext_1.getEventContext(context,categoryName),page_variant:"any-page"}))},MenuProduct.prototype.moveToWishlist=function($event,context){this.menuAccount.isUserLoggedIn?(this.removeFromCart($event),this.addToWishlist($event),this.menuEventsTracker.sendEvent("add_to_wishlist",{currency:this.$window.gogMicroservices.menu.currentCurrencyCode,value:parseFloat(this.product.price.finalAmount),items:[this.menuEventsTracker.mapProductToEventItem(this.product)],context:getEventContext_1.getEventContext(context)})):($event.stopPropagation(),$event.preventDefault(),this.$window.gogEventBus.publish("user","login",null))},MenuProduct.prototype.removeFromCart=function($event){$event.preventDefault(),$event.stopPropagation(),this.cart.remove(this.product.id),this.$window.gogEventBus.publish("cart","removeProduct",{product:this.product})},MenuProduct.prototype.addToWishlist=function($event){$event.stopPropagation(),$event.preventDefault(),this.$window.gogEventBus.publish("product","addToWishlist",{productId:this.product.id},{crossFrame:!0})},MenuProduct.prototype.productClicked=function(position,context,categoryName){var eventContext=getEventContext_1.getEventContext(context,categoryName);this.$window.gogEventBus.publish("menuProduct","goToProductCart",{product:this.product,position:position}),this.menuEventsTracker.sendEvent("product_clicked",{currency:this.$window.gogMicroservices.menu.currentCurrencyCode,items:[this.menuEventsTracker.mapProductToEventItem(this.product)],item_list_id:eventContext,item_list_name:categoryName||context,context:eventContext})},MenuProduct.prototype.initialize=function(productId){if(this.product=this.productsRepository.getById(productId),!this.product)throw new Error("Can't find product with id "+productId+" in Products Repository.");void 0!==this.product.extraInfo&&(this.shouldShowExtraInfo=this.product.extraInfo.length>0,this.shouldShowExtraFreeInfo=0===this.product.extraInfo.length),this.$scope.product=this.product,this.$scope.shouldShowExtraInfo=this.shouldShowExtraInfo,this.$scope.shouldShowExtraFreeInfo=this.shouldShowExtraFreeInfo,this.productState.setProduct(this.product),this.cancelCartListener=this.cart.registerBeforeCartUpdateListener(this.updateCartState.bind(this)),this.subscribeToWishlist(),this.subscribeToOwnedProducts(),this.updateCartState(),this.$window.gogEventBus.publish("product","initialized",productId)},MenuProduct.prototype.updateCartState=function(){this.product.inCart=this.cart.has(this.product.id)},MenuProduct.prototype.subscribeToWishlist=function(){this.cancelWishlistStateSubscriber=this.$window.gogEventBus.subscribe("wishlist","updated",this.updateWishlistedStatus.bind(this))},MenuProduct.prototype.subscribeToOwnedProducts=function(){this.cancelOwnedProductsStateSubscriber=this.$window.gogEventBus.subscribe("ownedProducts","updated",this.updateOwnedStatus.bind(this))},MenuProduct.prototype.updateInCartStatus=function(eventData){-1!==eventData.cartContent.indexOf(""+this.product.id)?this.product.inCart=!0:this.product.inCart=!1},MenuProduct.prototype.updateWishlistedStatus=function(eventData){-1!==eventData.wishlistedProducts.indexOf(""+this.product.id)?this.product.isWishlisted=!0:this.product.isWishlisted=!1},MenuProduct.prototype.updateOwnedStatus=function(eventData){var ownedProducts=eventData.ownedProducts;Array.isArray(ownedProducts)&&-1!==ownedProducts.indexOf(""+this.product.id)?this.product.isOwned=!0:this.product.isOwned=!1},MenuProduct.prototype.deconstructor=function(){this.cancelIdObserver(),this.cancelCartListener(),this.cancelWishlistStateSubscriber(),this.cancelOwnedProductsStateSubscriber(),this.productState.destroy(),delete this.productState,delete this.productsRepository,delete this.updateStateBound,this.cancelIdObserver=null},MenuProduct.$inject=["$scope","$attrs","menuProductRepositoriesManager","$window","cart","menuAccount","menuEventsTracker","menuCartState","$element","menuProductStateFactory"],MenuProduct}();exports.MenuProduct=MenuProduct,angular.module("menuProductComponent").directive("menuProduct",function(){return{restrict:"A",controller:MenuProduct,controllerAs:"menuProduct"}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuProductFactory=void 0;var angular=__webpack_require__(0);function MenuProductFactory(listenersManager){var Product=function(){function Product(productData){this.listeners={},angular.extend(this,productData,{listeners:this.listeners})}return Product.prototype.onAttributeChange=function(attributeName,listener,isForcedCall){if(void 0===isForcedCall&&(isForcedCall=!1),-1===Product.WATCHABLE_ATTRIBUTES.indexOf(attributeName))throw new Error('Product attribute to watch is not on the whitelist. \nGot "'+attributeName+'", whitelist is: '+Product.WATCHABLE_ATTRIBUTES);this.assureListenersInitialized(attributeName);var listenerCanceller=this.addListener(attributeName,listener);return isForcedCall&&this.listeners[attributeName]&&this.listeners[attributeName].callListeners(this.getPrivateAttributeName(attributeName)),listenerCanceller},Product.prototype.getPrivateAttributeName=function(attributeName){return"_"+attributeName},Product.prototype.assureListenersInitialized=function(attributeName){this.listeners[attributeName]||this.initializeListeners(attributeName)},Product.prototype.initializeListeners=function(attributeName){var _this=this;this.listeners[attributeName]=listenersManager.getManager();var privateAttributeName=this.getPrivateAttributeName(attributeName);this[privateAttributeName]=this[attributeName],Object.defineProperty(this,attributeName,{get:function(){return _this[privateAttributeName]},set:function(value){value!==_this[privateAttributeName]&&(_this[privateAttributeName]=value,_this.listeners[attributeName].callListeners(_this[privateAttributeName]))}})},Product.prototype.addListener=function(attributeName,listener){return this.listeners[attributeName].addListener(listener)},Product.WATCHABLE_ATTRIBUTES=["isOwned","isWishlisted","inCart","price"],Product}();return{createProduct:function(productData){return new Product(productData)}}}exports.MenuProductFactory=MenuProductFactory,angular.module("menuProductComponent").service("menuProductFactory",MenuProductFactory)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(60),__webpack_require__(61),__webpack_require__(62)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuProductRepositoryComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuProductRepositoriesManager=void 0;var angular=__webpack_require__(0),MenuProductRepositoriesManager=function(){function MenuProductRepositoriesManager(listenersManager){this.repositories={},this.repositories={},this.productsListenersManager=listenersManager.getManager()}return MenuProductRepositoriesManager.prototype.registerProductsListener=function(listener){this.productsListenersManager.addListener(listener)},MenuProductRepositoriesManager.prototype.getRepository=function(repositoryName){if(this.repositoryExists(repositoryName))return this.repositories[repositoryName];throw new Error("Products repository '"+repositoryName+"' doesnt exist!")},MenuProductRepositoriesManager.prototype.repositoryExists=function(repositoryName){return repositoryName in this.repositories},MenuProductRepositoriesManager.prototype.callProductsListeners=function(){for(var params=[],_i=0;_i<arguments.length;_i++)params[_i]=arguments[_i];this.productsListenersManager.callListeners(params)},MenuProductRepositoriesManager.prototype.getAllRepositories=function(){return this.repositories},MenuProductRepositoriesManager.prototype.registerProductsRepository=function(repositoryName,repository){if(this.repositoryExists(repositoryName))throw new Error("Products repository '"+repositoryName+"' already exists!");this.repositories[repositoryName]=repository},MenuProductRepositoriesManager.prototype.updatePricesInAllRepositories=function(newProductsPrices){for(var repositoryName in this.repositories)this.repositories[repositoryName].updatePrices(newProductsPrices);this.productsListenersManager.callListeners()},MenuProductRepositoriesManager.$inject=["listenersManager"],MenuProductRepositoriesManager}();exports.MenuProductRepositoriesManager=MenuProductRepositoriesManager,angular.module("menuProductRepositoryComponent").service("menuProductRepositoriesManager",MenuProductRepositoriesManager)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuProductsRepositoryFactory=void 0;var angular=__webpack_require__(0);function MenuProductsRepositoryFactory(menuProductFactory,menuProductRepositoriesManager,$window){var ProductsRepository=function(){function ProductsRepository(name,products){void 0===products&&(products={}),this.name=name,this.products={},$window.gogEventBus.subscribe("products","addNewProductsRequest",this.onAddProducts.bind(this)),$window.gogEventBus.subscribe("products","getProductsRequest",this.onGetProducts.bind(this))}return ProductsRepository.prototype.getById=function(id){return this.products[""+id]},ProductsRepository.prototype.getProducts=function(productsIds){var productsToReturn={};if(!productsIds)return this.products;for(var _i=0,productsIds_1=productsIds;_i<productsIds_1.length;_i++){var id=productsIds_1[_i];productsToReturn[""+id]=this.getById(id)}return productsToReturn},ProductsRepository.prototype.addProduct=function(product){this.addProducts([product])},ProductsRepository.prototype.createProduct=function(productData){return menuProductFactory.createProduct(productData)},ProductsRepository.prototype.addProducts=function(products){for(var productIndex in products)""+products[productIndex].id in this.products||(this.products[""+products[productIndex].id]=this.createProduct(products[productIndex]));menuProductRepositoriesManager.callProductsListeners(products)},ProductsRepository.prototype.updatePrices=function(newProductsPrices){for(var productId in newProductsPrices)this.products[""+productId]&&(this.products[""+productId].price=newProductsPrices[productId])},ProductsRepository.prototype.onAddProducts=function(data){data.productsRepository===this.name&&this.addProducts(data.products)},ProductsRepository.prototype.onGetProducts=function(data){if(data.productsRepository===this.name){var productsData=this.getProducts(data.productIds);$window.gogEventBus.publish("products","getProductsResponse",{productIds:data.productIds,products:productsData})}},ProductsRepository.$inject=[],ProductsRepository}();return{createMenuProductsRepository:function(name,products){void 0===products&&(products={});var repository=new ProductsRepository(name,products);return menuProductRepositoriesManager.registerProductsRepository(name,repository),menuProductRepositoriesManager.getRepository(name)}}}exports.MenuProductsRepositoryFactory=MenuProductsRepositoryFactory,angular.module("menuProductRepositoryComponent").service("menuProductRepositoryFactory",MenuProductsRepositoryFactory)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(64),__webpack_require__(65)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuAnonymousComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuAnonymousCtrl=void 0;var angular=__webpack_require__(0),MenuAnonymousCtrl=function(){function MenuAnonymousCtrl(menuBasicUserData,menuDropdown,$window){this.menuDropdown=menuDropdown,this.$window=$window,this.isUserLoggedIn=!1,this.isResponseFetched=!1,menuBasicUserData.registerUserDataListener(this.checkUserStatus.bind(this));var currentUserBasicData=menuBasicUserData.getUserData();null!==currentUserBasicData?this.checkUserStatus(currentUserBasicData):this.isResponseFetched=!1}return MenuAnonymousCtrl.prototype.openLogin=function(isLiteMenu){void 0===isLiteMenu&&(isLiteMenu=!1),this.$window.gogEventBus.publish("user","login",null),isLiteMenu||this.menuDropdown.triggerCollapse("anonymous")},MenuAnonymousCtrl.prototype.openRegistration=function(isLiteMenu){void 0===isLiteMenu&&(isLiteMenu=!1),this.$window.gogEventBus.publish("user","register",null),isLiteMenu||this.menuDropdown.triggerCollapse("anonymous")},MenuAnonymousCtrl.prototype.checkUserStatus=function(currentUserBasicData){this.isUserLoggedIn=currentUserBasicData.isLoggedIn,this.isResponseFetched=!0},MenuAnonymousCtrl.$inject=["menuBasicUserData","menuDropdown","$window"],MenuAnonymousCtrl}();exports.MenuAnonymousCtrl=MenuAnonymousCtrl,angular.module("menuAnonymousComponent").controller("menuAnonymousCtrl",MenuAnonymousCtrl)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(67),__webpack_require__(68),__webpack_require__(69)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuAccountComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuAccountCtrl=void 0;var angular=__webpack_require__(0),MenuAccountCtrl=function(){function MenuAccountCtrl(menuAccount,$window,menuConfig,$scope){this.menuAccount=menuAccount,this.$window=$window,this.menuConfig=menuConfig,this.isUserLoggedIn=!1,this.isUserProfileEnabled=!0,this.defaultAccountPage=this.menuConfig.urls.account,this.updateAccountData(),this.accountListenerCanceller=this.menuAccount.registerAccountListener(this.updateAccountData.bind(this)),$scope.$on("$destroy",this.deconstructor.bind(this))}return MenuAccountCtrl.prototype.logout=function(){this.$window.gogEventBus.publish("account","logout",null,{crossFrame:!0}),this.$window.location.href="/logout"},MenuAccountCtrl.prototype.deconstructor=function(){this.accountListenerCanceller()},MenuAccountCtrl.prototype.updateAccountData=function(){this.isUserLoggedIn=this.menuAccount.isUserLoggedIn,this.username=this.menuAccount.getUsername(),this.userAvatar=this.menuAccount.getUserAvatar(),this.userAvatars=this.menuAccount.getUserAvatars(),this.userGamesCount=this.menuAccount.getUserGamesCount(),this.userMoviesCount=this.menuAccount.getUserMoviesCount(),this.userWalletBalance=this.menuAccount.getUserWalletBalance().amount,this.userWishlistedItemsCount=this.menuAccount.getUserWishlistedItemsCount(),this.isUserProfileEnabled="enabled"===this.menuAccount.getProfileState(),this.hasAvatars=this.userAvatar.length>0,this.isUserProfileEnabled&&(this.defaultAccountPage=this.menuConfig.urls.feed)},MenuAccountCtrl.$inject=["menuAccount","$window","menuConfig","$scope"],MenuAccountCtrl}();exports.MenuAccountCtrl=MenuAccountCtrl,angular.module("menuAccountComponent").controller("menuAccountCtrl",MenuAccountCtrl)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuAccount=void 0;var angular=__webpack_require__(0),MenuAccount=function(){function MenuAccount($window,listenersManager,menuConfig,menuDataClientFactory,menuDropdown,menuBasicUserData){this.menuDropdown=menuDropdown,this.menuBasicUserData=menuBasicUserData,this.userGamesCount=0,this.userMoviesCount=0,this.userWishlistedItemsCount=0,this.userWalletBalance={amount:0},this.profileState="enabled",this.accountListenersManager=listenersManager.getManager(),this.isUserLoggedIn=!1,this.username=MenuAccount.LOGGED_OUT_USERNAME,this.avatar=MenuAccount.LOGGED_OUT_AVATAR;var currentCurrency=menuConfig.getCurrency();this.accountDataClient=menuDataClientFactory.getForEndpoint(menuConfig.urls.accountData,"accountData_"+currentCurrency,!1),this.menuDropdown.registerVisibilityChangedListener(this.menuVisibilityChanged.bind(this)),this.updateAccountBasic(this.menuBasicUserData.getUserData()),this.menuBasicUserData.registerUserDataListener(this.updateAccountBasic.bind(this)),this.accountDataClient.registerDataListener(this.updateAccountStats.bind(this));var forceFetchAccountStats=this.fetchAccountStats.bind(this,!0);$window.gogEventBus.subscribe("wishlist","addProduct",forceFetchAccountStats),$window.gogEventBus.subscribe("wishlist","removeProduct",forceFetchAccountStats),this.accountDataClient.isDataAvailable()&&this.updateAccountStats()}return MenuAccount.prototype.menuVisibilityChanged=function(menuName,isExpanded){"account"==menuName&&isExpanded&&this.fetchAccountStats()},MenuAccount.prototype.getProfileState=function(){return this.profileState},MenuAccount.prototype.fetchAccountStats=function(force){void 0===force&&(force=!1),force?this.accountDataClient.forceFetchData():this.accountDataClient.fetchData()},MenuAccount.prototype.registerAccountListener=function(listener){return this.accountListenersManager.addListener(listener)},MenuAccount.prototype.getUsername=function(){return this.username},MenuAccount.prototype.getUserAvatar=function(){return this.avatar},MenuAccount.prototype.getUserAvatars=function(){return this.avatars},MenuAccount.prototype.getUserGamesCount=function(){return this.userGamesCount},MenuAccount.prototype.getUserMoviesCount=function(){return this.userMoviesCount},MenuAccount.prototype.getUserWishlistedItemsCount=function(){return this.userWishlistedItemsCount},MenuAccount.prototype.getUserWalletBalance=function(){return this.userWalletBalance},MenuAccount.prototype.updateAccountBasic=function(basicUserData){null===basicUserData?(this.username=MenuAccount.LOGGED_OUT_USERNAME,this.avatar=MenuAccount.LOGGED_OUT_AVATAR):(this.username=basicUserData.username,this.avatar=basicUserData.avatar.url,this.avatars=basicUserData.avatars,this.profileState=basicUserData.profileState),this.isUserLoggedIn=this.menuBasicUserData.isUserLoggedIn(),this.accountListenersManager.callListeners()},MenuAccount.prototype.updateAccountStats=function(){var accountData=this.accountDataClient.getData();Object.keys(accountData).length&&(this.userGamesCount=accountData.purchasedItems.games||0,this.userMoviesCount=accountData.purchasedItems.movies||0,this.userWishlistedItemsCount=accountData.wishlistedItems||0,this.userWalletBalance=accountData.walletBalance||0,this.accountListenersManager.callListeners())},MenuAccount.$inject=["$window","listenersManager","menuConfig","menuDataClientFactory","menuDropdown","menuBasicUserData"],MenuAccount.LOGGED_OUT_USERNAME="",MenuAccount.LOGGED_OUT_AVATAR="",MenuAccount}();exports.MenuAccount=MenuAccount,angular.module("menuAccountComponent").service("menuAccount",MenuAccount)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(71),__webpack_require__(72),__webpack_require__(73),__webpack_require__(74)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuSearchComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0),MenuSearchClient=function(){function MenuSearchClient($http,$window,menuConfig,$cacheFactory){this.$http=$http,this.$window=$window,this.menuConfig=menuConfig,this.cacheKey="",this.history=$cacheFactory.get("$http")}return MenuSearchClient.prototype.search=function(params){var _a;this.checkCache(params)||this.$http({method:"GET",url:window.gogMicroservices.menu.features.new_search?this.menuConfig.urls.productSearchNew:this.menuConfig.urls.productSearch,params:window.gogMicroservices.menu.features.new_search?{query:"like:"+params.search,limit:params.limit,order:(null===(_a=this.$window.vwoToggles)||void 0===_a?void 0:_a.isTrendingSortingEnabled)?"desc:trending":"desc:score",productType:"in:game,pack,dlc,extras",page:"1",countryCode:this.menuConfig.getCountry(),locale:this.menuConfig.getLocale(),currencyCode:this.menuConfig.getCurrency()}:params,cache:!0}).then(this.parseResponse.bind(this)).catch(angular.noop)},MenuSearchClient.prototype.checkCache=function(params){this.cacheKey=this.getCacheKey(params);var cachedResults=this.history.get(this.cacheKey);return void 0!==cachedResults&&(this.$window.gogEventBus.publish("menuSearchClient","resultsReady",cachedResults),!0)},MenuSearchClient.prototype.parseResponse=function(response){this.history.put(this.cacheKey,response.data),this.$window.gogEventBus.publish("menuSearchClient","resultsReady",response.data)},MenuSearchClient.prototype.getCacheKey=function(params){return this.menuConfig.urls.productSearch+"?"+this.serialize(params)},MenuSearchClient.prototype.serialize=function(params){var queryObjects=[];for(var key in params)null!==params[key]&&queryObjects.push(key+"="+params[key]);return queryObjects.sort(),queryObjects.join("&")},MenuSearchClient.$inject=["$http","$window","menuConfig","$cacheFactory"],MenuSearchClient}();angular.module("menuSearchComponent").service("menuSearchClient",MenuSearchClient)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuSearch=void 0;var angular=__webpack_require__(0),MenuSearch=function(){function MenuSearch(listenersManager,$window,menuSearchClient,menuProductRepositoryFactory,menuProductRepositoriesManager,menuConfig){this.$window=$window,this.menuSearchClient=menuSearchClient,this.menuProductRepositoryFactory=menuProductRepositoryFactory,this.menuProductRepositoriesManager=menuProductRepositoriesManager,this.menuConfig=menuConfig,this.selectedResultIndex=-1,this.totalMovies=0,this.totalGames=0,this.displayedMoviesCount=0,this.displayedGamesCount=0,this.resultsCount=0,this.searchCount=0,this.selectedCategory="games",this.results={},this.resultsReadyListenersManager=listenersManager.getManager(),this.selectedResultListenersManager=listenersManager.getManager(),this.categoryChangedListenersManager=listenersManager.getManager(),this.afterResetListenersManager=listenersManager.getManager();try{this.productsRepository=this.menuProductRepositoryFactory.createMenuProductsRepository("searchProducts")}catch(e){this.productsRepository=this.menuProductRepositoriesManager.getRepository("searchProducts")}this.$window.gogEventBus.subscribe("menuSearchClient","resultsReady",this.resultsReady.bind(this)),this.reset()}return MenuSearch.prototype.registerResultsReadyListener=function(callback){this.resultsReadyListenersManager.addListener(callback)},MenuSearch.prototype.registerSelectedResultListener=function(callback){this.selectedResultListenersManager.addListener(callback)},MenuSearch.prototype.registerCategoryChangedListener=function(callback){this.categoryChangedListenersManager.addListener(callback)},MenuSearch.prototype.registerAfterResetListener=function(callback){this.afterResetListenersManager.addListener(callback)},MenuSearch.prototype.search=function(searchTerm){this.searchCount++,this.menuSearchClient.search({search:searchTerm,limit:MenuSearch.MAX_RESULTS})},MenuSearch.prototype.searchMovies=function(searchTerm){this.searchCount++,this.menuSearchClient.search({mediaType:"movie",search:searchTerm,limit:MenuSearch.MAX_RESULTS})},MenuSearch.prototype.getResults=function(){return this.results[this.selectedCategory]},MenuSearch.prototype.getCategory=function(){return this.selectedCategory},MenuSearch.prototype.selectCategory=function(category){this.selectedCategory=category,this.categoryChangedListenersManager.callListeners()},MenuSearch.prototype.selectResult=function(index){this.selectedResultIndex=index,this.selectedResultListenersManager.callListeners()},MenuSearch.prototype.openSelected=function(event){var query=event.target.value.trim();-1==this.selectedResultIndex&&query.length>0?this.$window.location.href="/"+this.selectedCategory+"?query="+query:-1!=this.selectedResultIndex&&(this.$window.location.href=this.results[this.selectedCategory][this.selectedResultIndex].url)},MenuSearch.prototype.reset=function(){this.totalMovies=0,this.totalGames=0,this.displayedGamesCount=0,this.displayedMoviesCount=0,this.searchCount=0,this.selectedResultIndex=-1,this.results={movies:[],games:[]},this.resultsReadyListenersManager.callListeners(),this.afterResetListenersManager.callListeners()},MenuSearch.prototype.resultsReady=function(data){var products;window.gogMicroservices.menu.features.new_search?(products=this.transformProducts(data.products),this.totalMovies=0,this.totalGames=data.productCount,this.results={movies:[],games:products},this.displayedGamesCount=products.length,this.displayedMoviesCount=0):(products=data.products,this.totalMovies=parseInt(data.totalMoviesFound,10),this.totalGames=parseInt(data.totalGamesFound,10),this.splitResults(products)),this.productsRepository.addProducts(products),this.totalGames?this.selectCategory("games"):this.totalMovies?this.selectCategory("movies"):this.selectCategory("games"),this.resultsCount=this.results[this.selectedCategory].length,this.resultsReadyListenersManager.callListeners()},MenuSearch.prototype.splitResults=function(products){this.results={movies:[],games:[]},this.displayedGamesCount=0,this.displayedMoviesCount=0;for(var _i=0,products_1=products;_i<products_1.length;_i++){var product=products_1[_i];product.isGame?(this.displayedGamesCount++,this.results.games.push(product)):(this.displayedMoviesCount++,this.results.movies.push(product))}},MenuSearch.prototype.transformProducts=function(products){var langShortCode=this.menuConfig.getLocale().split("-")[0];return products.map(function(product){var transformedProduct={},date=null===product.releaseDate?null:product.releaseDate.split("."),worksOn={Windows:!1,Mac:!1,Linux:!1};return void 0!==product.operatingSystems&&(worksOn.Windows=product.operatingSystems.includes("windows"),worksOn.Mac=product.operatingSystems.includes("osx"),worksOn.Linux=product.operatingSystems.includes("linux")),transformedProduct.worksOn=worksOn,null!==product.price?transformedProduct.price={amount:product.price.finalMoney.amount,baseAmount:product.price.baseMoney.amount,finalAmount:product.price.finalMoney.amount,isDiscounted:null!==product.price.discount,discountPercentage:null==product.price.discount?0:+product.price.discount.replace(/[^\d]/g,""),symbol:product.price.finalMoney.currency,isFree:0==+product.price.finalMoney.amount}:transformedProduct.price={amount:"0.00",baseAmount:"0.00",finalAmount:"0.00",isDiscounted:!1,discountPercentage:0,isFree:!1},transformedProduct.isGame=!0,transformedProduct.title=product.title,transformedProduct.url="/"+langShortCode+"/game/"+product.slug.replaceAll("-","_"),transformedProduct.image=product.coverHorizontal,transformedProduct.releaseDate=null===date?null:new Date(date[0],date[1]-1,date[2]).getTime()/1e3,transformedProduct.id=+product.id,transformedProduct.isPriceVisible=null!==product.price,transformedProduct.isComingSoon="coming-soon"===product.productState||"preorder"===product.productState,transformedProduct.buyable="coming-soon"!==product.productState,transformedProduct.rating=product.reviewsRating,transformedProduct.developer=void 0!==product.developers?product.developers.join(", "):"",transformedProduct.publisher=void 0!==product.publishers?product.publishers.join(", "):"",transformedProduct})},MenuSearch.$inject=["listenersManager","$window","menuSearchClient","menuProductRepositoryFactory","menuProductRepositoriesManager","menuConfig"],MenuSearch.MAX_RESULTS=20,MenuSearch}();exports.MenuSearch=MenuSearch,angular.module("menuSearchComponent").service("menuSearch",MenuSearch)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuSearchCtrl=void 0;var angular=__webpack_require__(0),MenuSearchCtrl=function(){function MenuSearchCtrl(menuSearch,$element,menuDropdown,$scope,menuEventsTracker){this.menuSearch=menuSearch,this.$element=$element,this.menuDropdown=menuDropdown,this.$scope=$scope,this.menuEventsTracker=menuEventsTracker,this.searchTerm="",this.selectedCategory="",this.selectedCategoryProducts=[],this.isLoading=!1,this.totalMovies=0,this.totalGames=0,this.displayedMoviesCount=0,this.displayedGamesCount=0,this.searchCount=0,this.shouldBeAnimated=!1,this.menuContainer=document.querySelector(".js-menu-container"),this.searchContainer=$element[0],this.inputElement=$element[0].querySelector(MenuSearchCtrl.INPUT_CLASS),this.menuSearch.registerResultsReadyListener(this.resultsReady.bind(this)),this.menuSearch.registerCategoryChangedListener(this.categoryChanged.bind(this)),this.menuSearch.registerAfterResetListener(this.afterReset.bind(this)),this.menuDropdown.registerVisibilityChangedListener(this.visibilityChanged.bind(this))}return MenuSearchCtrl.prototype.clear=function(){this.searchTerm="",this.menuSearch.reset()},MenuSearchCtrl.prototype.searchTermChange=function(){this.isSearchTermValid()?(this.isLoading=!0,this.menuSearch.search(this.searchTerm)):0===this.searchTerm.length&&this.menuSearch.reset()},MenuSearchCtrl.prototype.showMovies=function(){this.shouldBeAnimated=!1,this.menuSearch.totalMovies>this.menuSearch.displayedMoviesCount?(this.isLoading=!0,this.menuSearch.searchMovies(this.searchTerm)):this.menuSearch.selectCategory("movies")},MenuSearchCtrl.prototype.showGames=function(){this.shouldBeAnimated=!1,this.menuSearch.selectCategory("games")},MenuSearchCtrl.prototype.afterReset=function(){this.searchTerm="",this.$scope.$applyAsync()},MenuSearchCtrl.prototype.visibilityChanged=function(menuName,isExpanded){"search"===menuName&&(isExpanded?this.inputElement.focus():this.menuSearch.reset())},MenuSearchCtrl.prototype.isSearchTermValid=function(){return this.searchTerm.length>1},MenuSearchCtrl.prototype.categoryChanged=function(){this.selectedCategory=this.menuSearch.getCategory(),this.selectedCategoryProducts=this.menuSearch.getResults()},MenuSearchCtrl.prototype.resultsReady=function(){this.isLoading=!1,this.totalMovies=this.menuSearch.totalMovies,this.totalGames=this.menuSearch.totalGames,this.displayedMoviesCount=this.menuSearch.displayedMoviesCount,this.displayedGamesCount=this.menuSearch.displayedGamesCount,this.searchCount=this.menuSearch.searchCount,1===this.searchCount&&(this.shouldBeAnimated=!0),this.menuSearch.selectCategory(this.selectedCategory),this.selectedCategoryProducts=this.menuSearch.getResults(),this.searchTerm.length>0&&this.sendSearchEvent()},MenuSearchCtrl.prototype.sendSearchEvent=function(){this.menuEventsTracker.sendEvent("search",{search_term:this.searchTerm,results:this.selectedCategoryProducts.map(function(product){return String(product.id)}),more_results_button:this.totalGames>20,context:"menu-search-results"})},MenuSearchCtrl.$inject=["menuSearch","$element","menuDropdown","$scope","menuEventsTracker"],MenuSearchCtrl.INPUT_CLASS=".js-menu-search-input",MenuSearchCtrl}();exports.MenuSearchCtrl=MenuSearchCtrl,angular.module("menuSearchComponent").controller("menuSearchCtrl",MenuSearchCtrl)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(76),__webpack_require__(77)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0);angular.module("menuOwnedProductsComponent",[]).run(["menuOwnedProducts",angular.noop])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuOwnedProducts=void 0;var angular=__webpack_require__(0),MenuOwnedProducts=function(){function MenuOwnedProducts(menuDataClientPerUserFactory,$window,menuAccount,menuConfig){this.menuDataClientPerUserFactory=menuDataClientPerUserFactory,this.$window=$window,this.menuAccount=menuAccount,this.menuConfig=menuConfig,this.ownedProducts=[],this.accountListenerCanceller=this.menuAccount.registerAccountListener(this.getOwnedProductsForLoggedInUser.bind(this)),this.getOwnedProductsForLoggedInUser()}return MenuOwnedProducts.prototype.ownedProductsUpdated=function(){this.$window.gogEventBus.publish("ownedProducts","updated",{ownedProducts:this.ownedProducts})},MenuOwnedProducts.prototype.updateOwnedProducts=function(){this.ownedProducts=this.ownedGamesClient.getData(),this.ownedProductsUpdated()},MenuOwnedProducts.prototype.getOwnedProductsForLoggedInUser=function(){this.menuAccount.isUserLoggedIn&&(this.ownedGamesClient=this.menuDataClientPerUserFactory.getForEndpointPerUser(this.menuConfig.urls.ownedProducts,"userOwnedGamesData",!0),this.ownedGamesClient.registerDataListener(this.updateOwnedProducts.bind(this)),this.ownedGamesClient.isDataAvailable()&&this.updateOwnedProducts(),this.$window.gogEventBus.subscribe("product","initialized",this.ownedProductsUpdated.bind(this)),this.accountListenerCanceller())},MenuOwnedProducts.$inject=["menuDataClientPerUserFactory","$window","menuAccount","menuConfig"],MenuOwnedProducts}();exports.MenuOwnedProducts=MenuOwnedProducts,angular.module("menuOwnedProductsComponent").service("menuOwnedProducts",MenuOwnedProducts)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(79),__webpack_require__(80)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuNotificationsPusherComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationsPusher=void 0;var angular=__webpack_require__(0),MenuNotificationsPusher=function(){function MenuNotificationsPusher(pusherInterface,menuConfig,$window){this.pusherInterface=pusherInterface,this.menuConfig=menuConfig,this.$window=$window,void 0!==this.$window.gogAccessToken&&this.connectPusherWithAccessToken(),this.$window.gogEventBus.subscribe("accessToken","ready",this.connectPusherWithAccessToken.bind(this))}return MenuNotificationsPusher.prototype.connectPusherWithAccessToken=function(){var accessToken=this.$window.gogAccessToken;if(!accessToken)throw new Error("Something went wrong with accessToken! Pusher connection aborted.");this.pusherInterface.connect(this.menuConfig.urls.notifications.pusher,accessToken)},MenuNotificationsPusher.$inject=["pusherInterface","menuConfig","$window"],MenuNotificationsPusher}();exports.MenuNotificationsPusher=MenuNotificationsPusher,angular.module("menuNotificationsPusherComponent").service("menuNotificationsPusher",MenuNotificationsPusher)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(82),__webpack_require__(83)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuNotificationListLoadComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationListLoad=void 0;var angular=__webpack_require__(0),MenuNotificationListLoad=function(){function MenuNotificationListLoad(menuNotificationsClient,menuNotificationsRepository,pusherInterface,menuInternetConnectivityState,menuBasicUserData,menuContainerAppClientId,$window,$q,listenersManager){this.menuNotificationsClient=menuNotificationsClient,this.menuNotificationsRepository=menuNotificationsRepository,this.pusherInterface=pusherInterface,this.menuInternetConnectivityState=menuInternetConnectivityState,this.menuBasicUserData=menuBasicUserData,this.menuContainerAppClientId=menuContainerAppClientId,this.$window=$window,this.$q=$q,this.notificationIdsWhenCalling=[],this.fullListBackendDataListenersManager=listenersManager.getManager(),this.lastPusherConnectionState=pusherInterface.getConnectionStatus(),this.lastUserId=this.getUserId(),this.lastAccessToken=this.$window.gogAccessToken;var clientIdIsDefined=void 0!==this.$window.gogAccessTokenClientId;pusherInterface.registerConnectionStatusListener(this.onPusherConnectionChange.bind(this)),menuInternetConnectivityState.registerConnectivityChangeListener(this.onInternetConnectivityChange.bind(this)),menuBasicUserData.registerUserDataListener(this.onUserDataChange.bind(this)),this.$window.gogEventBus.subscribe("accessToken","ready",this.onAccessTokenChange.bind(this)),clientIdIsDefined||(this.clientIdListenerCanceller=menuContainerAppClientId.registerClientIdListener(this.onClientIdSet.bind(this))),this.reloadNotificationListIfPossibleNow()}return MenuNotificationListLoad.prototype.registerFullListBackendDataListener=function(listener){return this.fullListBackendDataListenersManager.addListener(listener)},MenuNotificationListLoad.prototype.getIsNotificationListFilledPromise=function(){return this.isNotificationListFilledDeferred.promise},MenuNotificationListLoad.prototype.onPusherConnectionChange=function(pusherConnectionState){var previousPusherConnectionState=this.lastPusherConnectionState;this.lastPusherConnectionState=pusherConnectionState,null===previousPusherConnectionState?"boolean"==typeof pusherConnectionState&&this.reloadNotificationListIfPossibleNow():!1===previousPusherConnectionState&&!0===pusherConnectionState&&this.reloadNotificationListIfPossibleNow()},MenuNotificationListLoad.prototype.onInternetConnectivityChange=function(isConnected){!0===isConnected&&this.reloadNotificationListIfPossibleNow()},MenuNotificationListLoad.prototype.onUserDataChange=function(){var newUserId=this.getUserId();newUserId!==this.lastUserId&&(this.lastUserId=newUserId,this.menuNotificationsRepository.clearNotificationsRepositoryLocally(),this.reloadNotificationListIfPossibleNow())},MenuNotificationListLoad.prototype.onClientIdSet=function(clientId){this.clientIdListenerCanceller(),delete this.clientIdListenerCanceller,this.reloadNotificationListIfPossibleNow()},MenuNotificationListLoad.prototype.onAccessTokenChange=function(){var newAccessToken=this.$window.gogAccessToken,previousAccessToken=this.lastAccessToken;this.lastAccessToken=newAccessToken,null===previousAccessToken&&"string"==typeof newAccessToken&&this.reloadNotificationListIfPossibleNow()},MenuNotificationListLoad.prototype.getUserId=function(){return this.menuBasicUserData.isUserLoggedIn()?this.menuBasicUserData.getUserData().id:null},MenuNotificationListLoad.prototype.reloadNotificationListIfPossibleNow=function(){var accessToken=this.$window.gogAccessToken,clientId=this.$window.gogAccessTokenClientId,userId=this.getUserId();if(void 0===this.isNotificationListFilledDeferred&&(this.isNotificationListFilledDeferred=this.$q.defer()),null!==this.pusherInterface.getConnectionStatus()&&"string"==typeof clientId&&"string"==typeof accessToken&&!0===this.menuInternetConnectivityState.isConnected()&&"string"==typeof userId){this.notificationIdsWhenCalling=[];for(var _i=0,notificationListWhenCalling_1=this.menuNotificationsRepository.getNotifications();_i<notificationListWhenCalling_1.length;_i++){var notification=notificationListWhenCalling_1[_i];this.notificationIdsWhenCalling.push(notification.id)}this.menuNotificationsClient.fetchNewNotificationsList(clientId,userId,accessToken).then(this.onListFromBackendSuccess.bind(this),this.onListFromBackendError.bind(this))}},MenuNotificationListLoad.prototype.onListFromBackendSuccess=function(response){this.menuNotificationsRepository.deleteNotificationsByIdsLocally(this.notificationIdsWhenCalling),this.fullListBackendDataListenersManager.callListeners(response.data.items),this.isNotificationListFilledDeferred.resolve()},MenuNotificationListLoad.prototype.onListFromBackendError=function(response){delete this.notificationIdsWhenCalling,this.isNotificationListFilledDeferred.reject("Couldn't fetch notification list from backend: "+JSON.stringify(response))},MenuNotificationListLoad.$inject=["menuNotificationsClient","menuNotificationsRepository","pusherInterface","menuInternetConnectivityState","menuBasicUserData","menuContainerAppClientId","$window","$q","listenersManager"],MenuNotificationListLoad}();exports.MenuNotificationListLoad=MenuNotificationListLoad,angular.module("menuNotificationListLoadComponent").service("menuNotificationListLoad",MenuNotificationListLoad)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(85),__webpack_require__(86)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuNotificationsClientComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationsClient=void 0;var angular=__webpack_require__(0),MenuNotificationsClient=function(){function MenuNotificationsClient(menuConfig,menuBasicUserData,$http,$window,menuContainerAppClientId){this.menuConfig=menuConfig,this.menuBasicUserData=menuBasicUserData,this.$http=$http,this.$window=$window,this.menuContainerAppClientId=menuContainerAppClientId}return MenuNotificationsClient.prototype.fetchNewNotificationsList=function(clientId,userId,accessToken){var notificationsUrl=this.menuConfig.urls.notifications.getNotifications(clientId,userId,this.menuConfig.observedTopics,accessToken);return void 0!==this.currentFetchOfNewListData&&void 0!==this.currentFetchOfNewListData.promise&&this.currentFetchOfNewListData.forUrl===notificationsUrl?this.currentFetchOfNewListData.promise:(this.currentFetchOfNewListData={promise:this.$http.get(notificationsUrl),forUrl:notificationsUrl},this.currentFetchOfNewListData.promise.finally(this.onFetchNotificationsFinish.bind(this)),this.currentFetchOfNewListData.promise)},MenuNotificationsClient.prototype.deleteNotification=function(notificationId){var accessToken=this.$window.gogAccessToken,clientId=this.$window.gogAccessTokenClientId;if(!accessToken)throw new Error("Something went wrong with accessToken! Deleting notification aborted.");if(!this.menuBasicUserData.isUserLoggedIn())throw new Error("User is not logged in when trying to delete a user's notification. Something is clearly wrong!");this.$http.delete(this.menuConfig.urls.notifications.deleteNotification(notificationId,clientId,this.menuBasicUserData.getUserData().id,accessToken),{data:{}}).catch(this.deleteNotificationError.bind(this))},MenuNotificationsClient.prototype.consumeNotification=function(notificationId){var accessToken=this.$window.gogAccessToken,clientId=this.$window.gogAccessTokenClientId;if(!accessToken)throw new Error("Something went wrong with accessToken! Consuming notification aborted.");if(!this.menuBasicUserData.isUserLoggedIn())throw new Error("User is not logged in when trying to consume a user's notification. Something is clearly wrong!");this.$http.put(this.menuConfig.urls.notifications.consumeNotification(notificationId,clientId,this.menuBasicUserData.getUserData().id,accessToken),{consumed:!0}).catch(this.consumeNotificationError.bind(this))},MenuNotificationsClient.prototype.deleteNotificationError=function(response){throw new Error("Couldn't delete notification. Response: "+JSON.stringify(response))},MenuNotificationsClient.prototype.consumeNotificationError=function(response){throw new Error("Couldn't consume notification. Response: "+JSON.stringify(response))},MenuNotificationsClient.prototype.onFetchNotificationsFinish=function(){delete this.currentFetchOfNewListData},MenuNotificationsClient.$inject=["menuConfig","menuBasicUserData","$http","$window","menuContainerAppClientId"],MenuNotificationsClient}();exports.MenuNotificationsClient=MenuNotificationsClient,angular.module("menuNotificationsClientComponent").service("menuNotificationsClient",MenuNotificationsClient)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(88),__webpack_require__(89),__webpack_require__(90)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuNotificationsComponent",[]).run(["menuActivityFeedTopicMediator",function(menuActivityFeedTopicMediator){}])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuActivityFeedTopicMediator=void 0;var angular=__webpack_require__(0),MenuActivityFeedTopicMediator=function(){function MenuActivityFeedTopicMediator(pusherInterface,menuNotificationListLoad,activityFeedTopicParser){this.activityFeedTopicParser=activityFeedTopicParser,window.gogMicroservices&&window.gogMicroservices.hasOwnProperty("menu")&&window.gogMicroservices.menu.hasOwnProperty("features")&&window.gogMicroservices.menu.features.hasOwnProperty("feedNotifications")&&window.gogMicroservices.menu.features.feedNotifications&&(pusherInterface.registerTopicConsumer("activity_feed",this.parseTopicMessage.bind(this)),pusherInterface.registerTopicConsumer("activity_feed:consumed",this.parseConsumedTopicMessage.bind(this)),pusherInterface.registerTopicConsumer("activity_feed:removed",this.parseRemovedTopicMessage.bind(this)),menuNotificationListLoad.registerFullListBackendDataListener(this.filterMessagesFromBackendData.bind(this)))}return MenuActivityFeedTopicMediator.prototype.filterMessagesFromBackendData=function(messages){for(var index=0;index<messages.length;index++)"activity_feed"===messages[index].type&&this.parseTopicMessage({topic:"activity_feed",id:messages[index].id,content:messages[index].payload})},MenuActivityFeedTopicMediator.prototype.parseTopicMessage=function(message){this.activityFeedTopicParser.parseTopicMessage(message)},MenuActivityFeedTopicMediator.prototype.parseRemovedTopicMessage=function(message){this.activityFeedTopicParser.parseRemovedTopicMessage(message)},MenuActivityFeedTopicMediator.prototype.parseConsumedTopicMessage=function(message){this.activityFeedTopicParser.parseConsumedTopicMessage(message)},MenuActivityFeedTopicMediator.$inject=["pusherInterface","menuNotificationListLoad","activityFeedTopicParser"],MenuActivityFeedTopicMediator}();exports.MenuActivityFeedTopicMediator=MenuActivityFeedTopicMediator,angular.module("menuNotificationsComponent").service("menuActivityFeedTopicMediator",MenuActivityFeedTopicMediator)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationsCtrl=void 0;var angular=__webpack_require__(0),MenuNotificationsCtrl=function(){function MenuNotificationsCtrl(menuBasicUserData,menuNotificationsRepository,menuDropdown,$timeout,$window,menuNotificationAction,menuConfig,$filter,menuBellNotifications,menuEventsTracker){var _this=this;this.menuBasicUserData=menuBasicUserData,this.menuNotificationsRepository=menuNotificationsRepository,this.menuDropdown=menuDropdown,this.$timeout=$timeout,this.$window=$window,this.menuNotificationAction=menuNotificationAction,this.menuConfig=menuConfig,this.$filter=$filter,this.menuBellNotifications=menuBellNotifications,this.menuEventsTracker=menuEventsTracker,this.list=[],this.haveNewNotifications=!1,this.notificationsCount=0,this.notificationsCountLabel="0",this.lastUnconsumedNotificationsCount=0,this.newNotificationAnimation=!1,this.isVisible=!1,this.showEmptyNotificationsMessage=!0,this.unconsumedNotificationsCount=0,this.titleChangeTimeoutId=null,this.isBlinkingTitle=!1,this.saveDocumentTitle(),this.menuDropdown.registerVisibilityChangedListener(this.removeHighlight.bind(this)),this.menuNotificationsRepository.registerNotificationsChangedListener(this.updateView.bind(this)),this.$window.addEventListener("focus",this.stopDocumentTitleBlinking.bind(this)),this.$window.addEventListener("blur",this.saveDocumentTitle.bind(this)),this.$window.gogEventBus.subscribe("title","change",function(title){_this.originalDocumentTitle=title,_this.setDocumentTitle()}),this.checkUserStatus(),this.menuBasicUserData.registerUserDataListener(this.checkUserStatus.bind(this))}return MenuNotificationsCtrl.prototype.parseLink=function(link){var hostRegEx=/\/\/[^\/]+\/([^\.]+)/;return hostRegEx.test(link)&&(link=link.match(hostRegEx)[1]),"/"===link[0]&&(link=link.substr(1)),this.menuConfig.gogWebsiteHostname+"/"+link},MenuNotificationsCtrl.prototype.deleteAllNotifications=function(){this.menuNotificationsRepository.deleteAllNotifications(),this.notificationsCount=0,this.resetDocumentTitle()},MenuNotificationsCtrl.prototype.consumeAllNotifications=function(){this.menuNotificationsRepository.consumeAllNotifications()},MenuNotificationsCtrl.prototype.executeActionForNotification=function(notificationId,$event){if("touchend"===$event.type){var redirectTo=this.parseLink(this.menuNotificationsRepository.getNotificationById(notificationId).link);this.menuNotificationAction.executeNotificationAction(notificationId,redirectTo)}else this.menuNotificationAction.executeNotificationAction(notificationId);var parsedUrl,notificationType=this.menuNotificationsRepository.getNotificationById(notificationId).type;try{parsedUrl=new URL(this.menuNotificationsRepository.getNotificationById(notificationId).link)}catch(error){var base=window.location.origin||"https://www.gog.com";parsedUrl=new URL(this.menuNotificationsRepository.getNotificationById(notificationId).link,base)}var data={notification_id:notificationId,notification_type:notificationType,target_url:{protocol:parsedUrl.protocol,hostname:parsedUrl.hostname,page_path:parsedUrl.pathname,query_params:parsedUrl.search,anchor_params:parsedUrl.hash}};this.consumeNotification(notificationId),this.menuEventsTracker.sendEvent("notification_clicked",data)},MenuNotificationsCtrl.prototype.consumeNotification=function(notificationId){this.menuNotificationsRepository.consumeNotification(notificationId)},MenuNotificationsCtrl.prototype.checkUserStatus=function(){this.menuBasicUserData.isUserLoggedIn()?this.isVisible=!0:this.isVisible=!1},MenuNotificationsCtrl.prototype.filterNotifications=function(notificationsList){var _this=this;return this.$filter("filter")(notificationsList,function(notification){return _this.menuBellNotifications.isHandlingNotificationType(notification.type)})},MenuNotificationsCtrl.prototype.sortNotificationsList=function(notificationsList){return this.$filter("orderBy")(notificationsList,["-creationTimestamp"])},MenuNotificationsCtrl.prototype.playAnimation=function(){var _this=this;this.newNotificationAnimation=!0;this.$timeout(function(){_this.newNotificationAnimation=!1},2e3)},MenuNotificationsCtrl.prototype.removeHighlight=function(menuName,isExpanded){"notifications"===menuName&&isExpanded&&(this.haveNewNotifications=!1)},MenuNotificationsCtrl.prototype.stopDocumentTitleBlinking=function(){clearTimeout(this.titleChangeTimeoutId),this.titleChangeTimeoutId=null,this.isBlinkingTitle=!1,this.unconsumedNotificationsCount?this.updateDocumentTitle():this.resetDocumentTitle()},MenuNotificationsCtrl.prototype.saveDocumentTitle=function(){this.originalDocumentTitle=this.$window.document.title.replace(/^\[([0-9])+\] /,"")},MenuNotificationsCtrl.prototype.resetDocumentTitle=function(){this.$window.document.title=this.originalDocumentTitle},MenuNotificationsCtrl.prototype.blinkDocumentTitle=function(){this.isBlinkingTitle=!0,null===this.titleChangeTimeoutId&&this.tickDocumentTitle()},MenuNotificationsCtrl.prototype.tickDocumentTitle=function(){this.$window.document.title===this.originalDocumentTitle?(this.updateDocumentTitle(),this.titleChangeTimeoutId=setTimeout(this.tickDocumentTitle.bind(this),7e3)):(this.resetDocumentTitle(),this.titleChangeTimeoutId=setTimeout(this.tickDocumentTitle.bind(this),2e3))},MenuNotificationsCtrl.prototype.updateDocumentTitle=function(){this.$window.document.title="["+this.notificationsCount+"] "+this.originalDocumentTitle},MenuNotificationsCtrl.prototype.setDocumentTitle=function(){!this.$window.document.hasFocus()&&this.unconsumedNotificationsCount?this.isBlinkingTitle?this.updateDocumentTitle():this.blinkDocumentTitle():this.unconsumedNotificationsCount?this.updateDocumentTitle():this.stopDocumentTitleBlinking()},MenuNotificationsCtrl.prototype.updateView=function(){var notifications=this.filterNotifications(this.menuNotificationsRepository.getNotifications());this.list=this.sortNotificationsList(notifications),this.updateNotificationCounts(),this.showEmptyNotificationsMessage=!this.notificationsCount,this.unconsumedNotificationsCount=this.menuBellNotifications.getUnconsumedCount(),this.menuDropdown.isExpanded("notifications")||(this.notificationsCount>0?(this.haveNewNotifications=this.unconsumedNotificationsCount&&this.lastUnconsumedNotificationsCount<=this.unconsumedNotificationsCount,this.haveNewNotifications&&this.playAnimation()):this.haveNewNotifications=!1),this.saveDocumentTitle(),this.setDocumentTitle(),this.lastUnconsumedNotificationsCount=this.unconsumedNotificationsCount},MenuNotificationsCtrl.prototype.updateNotificationCounts=function(){this.notificationsCount=this.list.length,this.notificationsCount>99?this.notificationsCountLabel="99+":this.notificationsCountLabel=String(this.notificationsCount)},MenuNotificationsCtrl.$inject=["menuBasicUserData","menuNotificationsRepository","menuDropdown","$timeout","$window","menuNotificationAction","menuConfig","$filter","menuBellNotifications","menuEventsTracker"],MenuNotificationsCtrl}();exports.MenuNotificationsCtrl=MenuNotificationsCtrl,angular.module("menuNotificationsComponent").controller("menuNotificationsCtrl",MenuNotificationsCtrl)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(92),__webpack_require__(93)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuPendingNotificationsComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuPendingNotifications=void 0;var angular=__webpack_require__(0),MenuPendingNotifications=function(){function MenuPendingNotifications(menuNotificationsRepository,$filter){this.menuNotificationsRepository=menuNotificationsRepository,this.$filter=$filter,this.pendingNotifications={},this.menuNotificationsRepository.registerNotificationsChangedListener(this.updatePendingNotifications.bind(this))}return MenuPendingNotifications.prototype.hasPendingNotificationsOfType=function(type){return!!this.pendingNotifications.hasOwnProperty(type)},MenuPendingNotifications.prototype.updatePendingNotifications=function(){var allNotifications=this.menuNotificationsRepository.getNotifications();this.pendingNotifications={};for(var index=0;index<allNotifications.length;index++)this.pendingNotifications[allNotifications[index].type]=!0},MenuPendingNotifications.$inject=["menuNotificationsRepository","$filter"],MenuPendingNotifications}();exports.MenuPendingNotifications=MenuPendingNotifications,angular.module("menuPendingNotificationsComponent").directive("menuPendingNotifications",function(){return{restrict:"A",controller:MenuPendingNotifications,controllerAs:"menuPendingNotifications"}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(95),__webpack_require__(96)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuCartComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuGalaxyCartCtrl=exports.MenuCartCtrl=void 0;var angular=__webpack_require__(0),MenuCartCtrl=function(){function MenuCartCtrl(cart,menuConfig,menuDropdown,$window,gtmEventSender,$timeout,menuAccount,$http){var _this=this;this.cart=cart,this.menuConfig=menuConfig,this.menuDropdown=menuDropdown,this.$window=$window,this.gtmEventSender=gtmEventSender,this.$timeout=$timeout,this.menuAccount=menuAccount,this.$http=$http,this.refreshScroll=!1,this.itemAdded=!1,this.itemAddedAnimation=!1,this.isSpinnerVisible=!1,this.isWishlistButtonVisible=!1,this.menuDropdown.registerVisibilityChangedListener(this.menuVisibilityChanged.bind(this)),this.menuAccount.registerAccountListener(this.checkUserStatus.bind(this)),this.cart.registerBeforeCartUpdateListener(this.notifyUser.bind(this)),this.cart.registerBeforeCartUpdateListener(this.showSpinner.bind(this)),this.cart.registerAfterCartUpdateListener(this.updateView.bind(this)),this.cart.registerAfterCartUpdateListener(this.hideSpinner.bind(this)),this.updateView(),this.$window.gogEventBus.subscribe("cart","cartResponse",function(data){_this.cart.reloadWithData(data)})}return MenuCartCtrl.prototype.goToCheckout=function(){if(this.showSpinner(),this.gtmEventSender.sendEvent({hitType:"event",eventCategory:"topBar",eventAction:"checkoutNow",eventLabel:this.$window.location.pathname}),!this.menuAccount.isUserLoggedIn)return this.establishLoginRedirect("checkout"),void this.$window.gogEventBus.publish("user","login",null);this.$window.location.pathname=this.menuConfig.urls.checkout},MenuCartCtrl.prototype.checkUserStatus=function(){this.menuAccount.isUserLoggedIn&&(this.isWishlistButtonVisible=!0)},MenuCartCtrl.prototype.menuVisibilityChanged=function(){this.menuDropdown.isExpanded("cart")&&(this.itemAdded=!1)},MenuCartCtrl.prototype.playAnimation=function(){var _this=this;this.itemAddedAnimation=!0;this.$timeout(function(){_this.itemAddedAnimation=!1},1e3)},MenuCartCtrl.prototype.itemWasAdded=function(){this.itemAdded=!0,this.playAnimation()},MenuCartCtrl.prototype.notifyUser=function(){var newCartCount=this.cart.getCount();this.cartCount<newCartCount&&this.itemWasAdded(),this.cartCount=newCartCount},MenuCartCtrl.prototype.updateView=function(){this.products=this.sortProducts(this.cart.getProducts()),this.cartCount=this.cart.getCount(),this.isCartEmpty=0==this.cartCount,this.cartTotalPrice=this.cart.getTotalPrice(),this.isWishlistButtonVisible=this.menuAccount.isUserLoggedIn},MenuCartCtrl.prototype.showSpinner=function(){this.isSpinnerVisible=!0},MenuCartCtrl.prototype.hideSpinner=function(){this.isSpinnerVisible=!1},MenuCartCtrl.prototype.sortProducts=function(products){return products.slice(0).reverse()},Object.defineProperty(MenuCartCtrl.prototype,"cartCount",{get:function(){return this.realCartCount},set:function(count){this.cartCountView=count>99?"99+":""+count,this.realCartCount=count},enumerable:!1,configurable:!0}),MenuCartCtrl.prototype.establishLoginRedirect=function(urlToRedirect){this.$http.get(this.menuConfig.urls.setRedirectAfterLogin(urlToRedirect)).catch(function(error){console.error("Menu can't establish 'set-redirect-url' for login success flow.",error)})},MenuCartCtrl.$inject=["cart","menuConfig","menuDropdown","$window","gtmEventSender","$timeout","menuAccount","$http"],MenuCartCtrl}();exports.MenuCartCtrl=MenuCartCtrl;var MenuGalaxyCartCtrl=function(){function MenuGalaxyCartCtrl(cart,menuDropdown,$timeout,menuGalaxyActions,menuConfig){this.cart=cart,this.menuDropdown=menuDropdown,this.$timeout=$timeout,this.menuGalaxyActions=menuGalaxyActions,this.menuConfig=menuConfig,this.refreshScroll=!1,this.itemAdded=!1,this.itemAddedAnimation=!1,this.isSpinnerVisible=!0,this.menuDropdown.registerVisibilityChangedListener(this.menuVisibilityChanged.bind(this)),this.cart.registerBeforeCartUpdateListener(this.notifyUser.bind(this)),this.cart.registerBeforeCartUpdateListener(this.showSpinner.bind(this)),this.cart.registerAfterCartUpdateListener(this.updateView.bind(this)),this.cart.registerAfterCartUpdateListener(this.hideSpinner.bind(this)),this.updateView()}return MenuGalaxyCartCtrl.prototype.goToCheckout=function(){this.menuDropdown.triggerCollapse("cart"),this.menuGalaxyActions.showInStoreFrame(this.menuConfig.gogEmbedHostname+this.menuConfig.urls.checkout)},MenuGalaxyCartCtrl.prototype.menuVisibilityChanged=function(){this.menuDropdown.isExpanded("cart")&&(this.itemAdded=!1)},MenuGalaxyCartCtrl.prototype.playAnimation=function(){var _this=this;this.itemAddedAnimation=!0;this.$timeout(function(){_this.itemAddedAnimation=!1},1e3)},MenuGalaxyCartCtrl.prototype.itemWasAdded=function(){this.itemAdded=!0,this.playAnimation()},MenuGalaxyCartCtrl.prototype.notifyUser=function(){var newCartCount=this.cart.getCount();this.cartCount<newCartCount&&this.itemWasAdded(),this.cartCount=newCartCount},MenuGalaxyCartCtrl.prototype.updateView=function(){this.products=this.sortProducts(this.cart.getProducts()),this.cartCount=this.cart.getCount(),this.isCartEmpty=0==this.cartCount,this.cartTotalPrice=this.cart.getTotalPrice()},MenuGalaxyCartCtrl.prototype.showSpinner=function(){this.isSpinnerVisible=!0},MenuGalaxyCartCtrl.prototype.hideSpinner=function(){this.isSpinnerVisible=!1},MenuGalaxyCartCtrl.prototype.sortProducts=function(products){return products.slice(0).reverse()},Object.defineProperty(MenuGalaxyCartCtrl.prototype,"cartCount",{get:function(){return this.realCartCount},set:function(count){this.cartCountView=count>99?"99+":""+count,this.realCartCount=count},enumerable:!1,configurable:!0}),MenuGalaxyCartCtrl.$inject=["menuCart","menuDropdown","$timeout","menuGalaxyActions","menuConfig"],MenuGalaxyCartCtrl}();exports.MenuGalaxyCartCtrl=MenuGalaxyCartCtrl,angular.module("menuCartComponent").controller("menuCartCtrl",MenuCartCtrl)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(98),__webpack_require__(99)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuWishlistComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuWishlistCtrl=void 0;var angular=__webpack_require__(0),MenuWishlistCtrl=function(){function MenuWishlistCtrl($window,gtmEventSender,menuAccount,menuWishlistClient){this.$window=$window,this.gtmEventSender=gtmEventSender,this.menuAccount=menuAccount,this.menuWishlistClient=menuWishlistClient,this.isUserLoggedIn=this.menuAccount.isUserLoggedIn,this.isWishlistInSearchEnabled=window.gogMicroservices&&window.gogMicroservices.hasOwnProperty("menu")&&window.gogMicroservices.menu.hasOwnProperty("features")&&window.gogMicroservices.menu.features.hasOwnProperty("wishlist_in_search")&&window.gogMicroservices.menu.features.wishlist_in_search}return MenuWishlistCtrl.prototype.has=function(productId){return this.menuWishlistClient.has(productId)},MenuWishlistCtrl.prototype.toggle=function(productId,event){event.preventDefault(),event.stopPropagation(),this.has(productId)?this.menuWishlistClient.remove(productId):this.menuWishlistClient.add(productId)},MenuWishlistCtrl.prototype.goToWishlist=function(){this.gtmEventSender.sendEvent({hitType:"event",eventCategory:"topBar",eventAction:"openWishlist",eventLabel:this.$window.location.pathname}),this.$window.location.pathname="account/wishlist"},MenuWishlistCtrl.$inject=["$window","gtmEventSender","menuAccount","menuWislistClient"],MenuWishlistCtrl}();exports.MenuWishlistCtrl=MenuWishlistCtrl,angular.module("menuWishlistComponent").controller("menuWishlistCtrl",MenuWishlistCtrl)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(101),__webpack_require__(102)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuNotificationFactoryComponent",[])},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationFactory=void 0;var angular=__webpack_require__(0);function MenuNotificationFactory(){var Notification=function(){return function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){this.id=id,this.consumed=consumed,this.creationTimestamp=creationTimestamp,this.expirationTimestamp=expirationTimestamp,this.updateTimestamp=updateTimestamp,this.icon="default",this.imageType="avatar",this.counter=0,this.creationTimestampMs=creationTimestamp+"000"}}(),NewFriendInviteNotification=function(_super){function NewFriendInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,eventTimestamp){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userAvatar=userAvatar,_this.userName=userName,_this.userId=userId,_this.eventTimestamp=eventTimestamp,_this.description="",_this.title="",_this.username="",_this.image="",_this.link="",_this.type="new_invite",_this.icon="#icon-notification-question",_this.link="account/friends",_this.title=_this.userName,_this.image=_this.userAvatar,_this}return __extends(NewFriendInviteNotification,_super),NewFriendInviteNotification}(Notification),NewFriendNotification=function(_super){function NewFriendNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userAvatar=userAvatar,_this.userName=userName,_this.userId=userId,_this.description="",_this.title="",_this.username="",_this.image="",_this.link="",_this.type="new_friend",_this.icon="#icon-notification-friend",_this.link="u/"+_this.userName+"/chat",_this.title=_this.userName,_this.image=_this.userAvatar,_this}return __extends(NewFriendNotification,_super),NewFriendNotification}(Notification),ChatNotification=function(_super){function ChatNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,chatMessage,counter){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userAvatar=userAvatar,_this.userName=userName,_this.userId=userId,_this.chatMessage=chatMessage,_this.counter=counter,_this.description="",_this.title="",_this.image="",_this.link="",_this.type="new_chat_message",_this.icon="#icon-notification-chat",_this.link="u/"+_this.userName+"/chat",_this.description=_this.chatMessage,_this.title=_this.userName,_this.image=_this.userAvatar,_this}return __extends(ChatNotification,_super),ChatNotification}(Notification),GameInviteNotification=function(_super){function GameInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userName,userId,productName,productImages){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userName=userName,_this.userId=userId,_this.productName=productName,_this.productImages=productImages,_this.description="",_this.title="",_this.image="https://images.gog-statics.com/7e240f90c5fae6cfed0030d7e7d0f079d239225338cb42755e0074eb8bf4a5b3.png",_this.link="",_this.type="new_game_invite",_this.icon="#icon-notification-question",_this.imageType="gameIcon",_this.link="u/"+_this.userName+"/chat",_this.title=_this.productName,_this.description=_this.userName,null!==_this.productImages.menu_notification_av&&(_this.image="https:"+_this.productImages.menu_notification_av.split("_")[0]+".png"),_this}return __extends(GameInviteNotification,_super),GameInviteNotification}(Notification),ActivityFeedNotification=function(_super){function ActivityFeedNotification(id,acitivtyPayload,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,counter){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.acitivtyPayload=acitivtyPayload,_this.counter=counter,_this.description="",_this.title="",_this.image="https://images.gog-statics.com/7e240f90c5fae6cfed0030d7e7d0f079d239225338cb42755e0074eb8bf4a5b3.png",_this.link="",_this.unseenActivitiesCount=0,_this.type="unseen_activities",_this.icon="#icon-notification-question",_this.imageType="gogLogo",_this.link="feed",_this.title="GOG.com",_this.unseenActivitiesCount=_this.counter,_this}return __extends(ActivityFeedNotification,_super),ActivityFeedNotification}(Notification),WishlistItemDiscountedNotification=function(_super){function WishlistItemDiscountedNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,discountedProducts){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.discountedProducts=discountedProducts,_this.title="",_this.link="",_this.image="https://images.gog-statics.com/7e240f90c5fae6cfed0030d7e7d0f079d239225338cb42755e0074eb8bf4a5b3.png",_this.productsDiscountedCount=0,_this.type="wishlisted_products_discounted",_this.icon="#icon-notification-percentage",_this.imageType="gogLogo",_this.link="account/wishlist",_this.productsDiscountedCount=_this.discountedProducts.length,_this.title="GOG.com",_this}return __extends(WishlistItemDiscountedNotification,_super),WishlistItemDiscountedNotification}(Notification),GogAnnoucementNotification=function(_super){function GogAnnoucementNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,announcement,background){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.announcement=announcement,_this.background=background,_this.title="",_this.link="",_this.image="https://images.gog-statics.com/7e240f90c5fae6cfed0030d7e7d0f079d239225338cb42755e0074eb8bf4a5b3.png",_this.productsDiscountedCount=0,_this.description="",_this.hasBackground=!0,_this.isSpecial=!0,_this.type="new_gog_announcement",_this.icon="#icon-notification-percentage",_this.imageType="gogLogo",_this.link="account/wishlist",_this.title="GOG.com annouces",_this.description=_this.announcement,_this}return __extends(GogAnnoucementNotification,_super),GogAnnoucementNotification}(Notification),AnnouncementNotification=function(_super){function AnnouncementNotification(id,_key,content,consumed,langCode,creationTimestamp,expirationTimestamp,updateTimestamp){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.metricsId="",_this.image="",_this.title="",_this.description="",_this.buttonText="",_this.link="",_this.type="announcement",_this.title=content.title[langCode]||content.title["en-US"],_this.description=content.description[langCode]||content.description["en-US"],_this.buttonText=content.button_text[langCode]||content.button_text["en-US"],_this.link=content.on_click_url,_this.image=content.image_url,_this}return __extends(AnnouncementNotification,_super),AnnouncementNotification}(Notification),ForumReplyNotification=function(_super){function ForumReplyNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,threadTitle,link,counter,forumSlug,topicSlug){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userAvatar=userAvatar,_this.userName=userName,_this.userId=userId,_this.threadTitle=threadTitle,_this.link=link,_this.counter=counter,_this.forumSlug=forumSlug,_this.topicSlug=topicSlug,_this.description="",_this.title="",_this.image="https://images.gog-statics.com/7e240f90c5fae6cfed0030d7e7d0f079d239225338cb42755e0074eb8bf4a5b3.png",_this.type="new_forum_reply",_this.icon="#icon-notification-chat",_this.imageType="gogLogo",_this.description=_this.threadTitle,_this.title=_this.userName,_this}return __extends(ForumReplyNotification,_super),ForumReplyNotification}(Notification),ProductReleaseNotification=function(_super){function ProductReleaseNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,link,productTitle,productId,productIcon){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.link=link,_this.productId=productId,_this.title="",_this.image="",_this.description="",_this.type="product_release",_this.icon="#icon-notification-checkmark",_this.imageType="gameIcon",_this.title=productTitle,0===productIcon.indexOf("//")?_this.image="https:"+productIcon:_this.image=productIcon,_this}return __extends(ProductReleaseNotification,_super),ProductReleaseNotification}(Notification);return{getChatNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,chatMessage,counter){return new ChatNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,chatMessage,counter)},getActivityFeedNotification:function(id,acitivtyPayload,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,counter){return new ActivityFeedNotification(id,acitivtyPayload,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,counter)},getGameInviteNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userName,userId,productName,productImages){return new GameInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userName,userId,productName,productImages)},getWishlistItemDiscountedNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,discountedProducts){return new WishlistItemDiscountedNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,discountedProducts)},getGogAnnouncementNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,announcement,background){return new GogAnnoucementNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,announcement,background)},getAnnouncementNotification:function(id,key,content,consumed,langCode,creationTimestamp,expirationTimestamp,updateTimestamp){return new AnnouncementNotification(id,key,content,consumed,langCode,creationTimestamp,expirationTimestamp,updateTimestamp)},getProductReleaseNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,link,productTitle,productId,productIcon){return new ProductReleaseNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,link,productTitle,productId,productIcon)},getForumReplyNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,threadTitle,threadLink,counter,forumSlug,topicSlug){return new ForumReplyNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,threadTitle,threadLink,counter,forumSlug,topicSlug)},getNewFriendInviteNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,eventTimestamp){return new NewFriendInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,eventTimestamp)},getNewFriendNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId){return new NewFriendNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId)}}}exports.MenuNotificationFactory=MenuNotificationFactory,angular.module("menuNotificationFactoryComponent").factory("menuNotificationFactory",MenuNotificationFactory)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(104),__webpack_require__(105)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuNotificationsRepositoryComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationsRepository=void 0;var angular=__webpack_require__(0),MenuNotificationsRepository=function(){function MenuNotificationsRepository(menuChatTopicParser,menuFriendsTopicParser,menuCustomTopicParser,menuNotificationFactory,menuNotificationsClient,announcementTopicParser,activityFeedTopicParser,$timeout,menuChat,listenersManager,menuEventsTracker){this.menuChatTopicParser=menuChatTopicParser,this.menuFriendsTopicParser=menuFriendsTopicParser,this.menuCustomTopicParser=menuCustomTopicParser,this.menuNotificationFactory=menuNotificationFactory,this.menuNotificationsClient=menuNotificationsClient,this.announcementTopicParser=announcementTopicParser,this.activityFeedTopicParser=activityFeedTopicParser,this.$timeout=$timeout,this.menuChat=menuChat,this.menuEventsTracker=menuEventsTracker,this.allNotifications=[],this.notificationsChangedListenersManager=listenersManager.getManager(),this.menuChatTopicParser.registerNewChatMessageListener(this.addChatNotification.bind(this)),this.menuChatTopicParser.registerChatMessageRemovedListener(this.removeNotification.bind(this)),this.menuChatTopicParser.registerChatMessageConsumedListener(this.markAsConsumedNotification.bind(this)),this.menuChatTopicParser.registerNewGameInviteListener(this.addGameInviteNotification.bind(this)),this.menuCustomTopicParser.registerNewWishlistNotificationListener(this.addWishlistNotification.bind(this)),this.menuCustomTopicParser.registerNewForumNotificationListener(this.addForumNotification.bind(this)),this.menuCustomTopicParser.registerNewGogAnnouncementNotificationListener(this.addGogAnnouncementNotification.bind(this)),this.menuCustomTopicParser.registerProductReleaseNotificationListener(this.addProductReleaseNotification.bind(this)),this.menuCustomTopicParser.registerNotificationRemovedListener(this.removeNotification.bind(this)),this.menuCustomTopicParser.registerNotificationConsumedListener(this.markAsConsumedNotification.bind(this)),this.menuFriendsTopicParser.registerNewInviteListener(this.addFriendInviteNotification.bind(this)),this.menuFriendsTopicParser.registerFriendAcceptedYourInviteListener(this.addNewFriendNotification.bind(this)),this.menuFriendsTopicParser.registerRemovedTopicMessageListener(this.removeNotification.bind(this)),this.menuFriendsTopicParser.registerNotificationConsumedListener(this.markAsConsumedNotification.bind(this)),this.announcementTopicParser.registerNewNotificationListener(this.addAnnouncementNotification.bind(this)),this.announcementTopicParser.registerNotificationRemovedListener(this.removeNotification.bind(this)),window.gogMicroservices&&window.gogMicroservices.hasOwnProperty("menu")&&window.gogMicroservices.menu.hasOwnProperty("features")&&window.gogMicroservices.menu.features.hasOwnProperty("feedNotifications")&&window.gogMicroservices.menu.features.feedNotifications&&(this.activityFeedTopicParser.registerNewNotificationListener(this.addActivityFeedNotification.bind(this)),this.activityFeedTopicParser.registerNotificationRemovedListener(this.removeNotification.bind(this)),this.activityFeedTopicParser.registerNotificationConsumedListener(this.markAsConsumedNotification.bind(this)))}return MenuNotificationsRepository.prototype.registerNotificationsChangedListener=function(listener){return this.notificationsChangedListenersManager.addListener(listener)},MenuNotificationsRepository.prototype.getNotifications=function(){return this.allNotifications},MenuNotificationsRepository.prototype.getNotificationById=function(notificationId){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].id==notificationId)return this.allNotifications[index]},MenuNotificationsRepository.prototype.deleteAllNotifications=function(){for(var index=0;index<this.allNotifications.length;index++)this.menuNotificationsClient.deleteNotification(this.allNotifications[index].id);this.allNotifications.length=0,this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.consumeNotification=function(notificationId){this.menuNotificationsClient.consumeNotification(notificationId)},MenuNotificationsRepository.prototype.consumeAllNotifications=function(){for(var index=0;index<this.allNotifications.length;index++)if(!this.allNotifications[index].consumed){this.menuNotificationsClient.consumeNotification(this.allNotifications[index].id),this.allNotifications[index].consumed=!0;var parsedUrl=void 0;try{parsedUrl=new URL(this.allNotifications[index].link)}catch(error){var base=window.location.origin||"https://www.gog.com";parsedUrl=new URL(this.allNotifications[index].link,base)}var data={notification_id:this.allNotifications[index].id,notification_type:this.allNotifications[index].type,target_url:{protocol:parsedUrl.protocol,hostname:parsedUrl.hostname,page_path:parsedUrl.pathname,query_params:parsedUrl.search,anchor_params:parsedUrl.hash}};this.menuEventsTracker.sendEvent("notification_viewed",data)}this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.getUnconsumedCount=function(types){for(var unconsumedCount=0,index=0;index<this.allNotifications.length;index++)this.allNotifications[index].consumed||void 0!==types&&-1===types.indexOf(this.allNotifications[index].type)||unconsumedCount++;return unconsumedCount},MenuNotificationsRepository.prototype.getConsumedCount=function(){for(var consumedCount=0,index=0;index<this.allNotifications.length;index++)this.allNotifications[index].consumed&&consumedCount++;return consumedCount},MenuNotificationsRepository.prototype.getTotalCount=function(types){return this.allNotifications.filter(function(notification){return void 0===types||-1!==types.indexOf(notification.type)}).length},MenuNotificationsRepository.prototype.deleteNotificationById=function(notificationId){this.removeNotificationById(notificationId),this.menuNotificationsClient.deleteNotification(notificationId),this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.deleteNotificationsByIdsLocally=function(notificationIds){this.removeNotificationsByIds(notificationIds),this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.has=function(notificationId){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].id==notificationId)return!0;return!1},MenuNotificationsRepository.prototype.clearNotificationsRepositoryLocally=function(){this.allNotifications.length=0,this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.removeNotification=function(removedBy,id){switch(removedBy){case"id":this.removeNotificationById(id);break;case"unique_key":this.removeNotificationByUniqueKey(id)}this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.removeNotificationsByIds=function(notificationIds){for(var _i=0,notificationIds_1=notificationIds;_i<notificationIds_1.length;_i++){var notificationId=notificationIds_1[_i];this.removeNotificationById(notificationId)}},MenuNotificationsRepository.prototype.removeNotificationById=function(notificationId){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].id==notificationId)return void this.allNotifications.splice(index,1)},MenuNotificationsRepository.prototype.removeNotificationByUniqueKey=function(uniqueKey){var userId;switch(uniqueKey.split("-")[0]){case"chat_message":userId=uniqueKey.split("-")[1],this.removeSimilarNotificationsFromUser(userId,"new_chat_message");break;case"ni":userId=uniqueKey.split("-")[2],this.removeSimilarNotificationsFromUser(userId,"new_invite");break;case"game_invite":userId=uniqueKey.split("-")[1],this.removeSimilarNotificationsFromUser(userId,"new_game_invite");break;case"af":var activityId=uniqueKey.split("-")[1];this.removeFeedNotificationByActivityId(activityId)}},MenuNotificationsRepository.prototype.removeNotificationByUserId=function(userId){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].userId==userId)return this.allNotifications.splice(index,1),!0;return!1},MenuNotificationsRepository.prototype.removeNotificationByType=function(type){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].type==type)return this.allNotifications.splice(index,1),!0;return!1},MenuNotificationsRepository.prototype.markAsConsumedNotification=function(id){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].id==id){this.allNotifications[index].consumed=!0,this.notificationsChangedListenersManager.callListeners();var parsedUrl=void 0;try{parsedUrl=new URL(this.allNotifications[index].link)}catch(error){var base=window.location.origin||"https://www.gog.com";parsedUrl=new URL(this.allNotifications[index].link,base)}var data={notification_id:this.allNotifications[index].id,notification_type:this.allNotifications[index].type,target_url:{protocol:parsedUrl.protocol,hostname:parsedUrl.hostname,page_path:parsedUrl.pathname,query_params:parsedUrl.search,anchor_params:parsedUrl.hash}};return void this.menuEventsTracker.sendEvent("notification_viewed",data)}},MenuNotificationsRepository.prototype.countSimilarNotificationsFromUser=function(userId,notificationType){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].userId==userId&&this.allNotifications[index].type==notificationType)return this.allNotifications[index].counter;return 0},MenuNotificationsRepository.prototype.countSimilarNotifications=function(notificationType){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].type==notificationType)return this.allNotifications[index].counter;return 0},MenuNotificationsRepository.prototype.countSimilarNotificationsFromForumThread=function(threadTitle,notificationType){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].type==notificationType&&this.allNotifications[index].threadTitle==threadTitle)return this.allNotifications[index].counter;return 0},MenuNotificationsRepository.prototype.removeSimilarNotificationsFromUser=function(userId,notificationType){var allNotificationsCopy=this.allNotifications.slice();return this.allNotifications=allNotificationsCopy.filter(function(notification){return notification.userId!=userId||notification.type!=notificationType}),!1},MenuNotificationsRepository.prototype.removeFeedNotificationByActivityId=function(activityId){var allNotificationsCopy=this.allNotifications.slice();return this.allNotifications=allNotificationsCopy.filter(function(notification){return notification.acitivtyPayload.id!==activityId}),!1},MenuNotificationsRepository.prototype.removeSimilarNotificationsFromForumThread=function(threadTitle,notificationType){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].type==notificationType&&this.allNotifications[index].threadTitle==threadTitle)return this.allNotifications.splice(index,1),!0;return!1},MenuNotificationsRepository.prototype.sendNotificationReceivedEvent=function(notification){var parsedUrl;try{parsedUrl=new URL(notification.link)}catch(error){var base=window.location.origin||"https://www.gog.com";parsedUrl=new URL(notification.link,base)}var data={notification_id:notification.id,notification_type:notification.type,target_url:{protocol:parsedUrl.protocol,hostname:parsedUrl.hostname,page_path:parsedUrl.pathname,query_params:parsedUrl.search,anchor_params:parsedUrl.hash}};this.menuEventsTracker.sendEvent("notification_received",data)},MenuNotificationsRepository.prototype.addWishlistNotification=function(id,discountedProducts,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var notification=this.menuNotificationFactory.getWishlistItemDiscountedNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,discountedProducts);this.allNotifications.unshift(notification),this.sendNotificationReceivedEvent(notification),this.notificationsChangedListenersManager.callListeners()}},MenuNotificationsRepository.prototype.addForumNotification=function(id,forumNotification,consumed,counter,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var newForumReplyNotification=this.menuNotificationFactory.getForumReplyNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,forumNotification.userAvatarUrls,forumNotification.userName,forumNotification.userId,forumNotification.threadTitle,forumNotification.threadLink,counter,forumNotification.forumSlug,forumNotification.topicSlug),forumNotificationsFromSameThread=this.countSimilarNotificationsFromForumThread(newForumReplyNotification.threadTitle,newForumReplyNotification.type);this.removeSimilarNotificationsFromForumThread(newForumReplyNotification.threadTitle,newForumReplyNotification.type),0==newForumReplyNotification.counter&&(newForumReplyNotification.counter=1),newForumReplyNotification.counter=forumNotificationsFromSameThread?forumNotificationsFromSameThread+1:newForumReplyNotification.counter,this.allNotifications.unshift(newForumReplyNotification),this.notificationsChangedListenersManager.callListeners(),this.sendNotificationReceivedEvent(newForumReplyNotification)}},MenuNotificationsRepository.prototype.addGogAnnouncementNotification=function(id,gogAnnouncementNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var notification=this.menuNotificationFactory.getGogAnnouncementNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,gogAnnouncementNotification.announcement,gogAnnouncementNotification.background);this.allNotifications.unshift(notification),this.notificationsChangedListenersManager.callListeners(),this.sendNotificationReceivedEvent(notification)}},MenuNotificationsRepository.prototype.addAnnouncementNotification=function(id,key,content,consumed,langCode,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var notification=this.menuNotificationFactory.getAnnouncementNotification(id,key,content,consumed,langCode,creationTimestamp,expirationTimestamp,updateTimestamp);this.allNotifications.unshift(notification),this.notificationsChangedListenersManager.callListeners(),this.sendNotificationReceivedEvent(notification)}},MenuNotificationsRepository.prototype.addProductReleaseNotification=function(id,productReleaseNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var notification=this.menuNotificationFactory.getProductReleaseNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,productReleaseNotification.link,productReleaseNotification.productTitle,productReleaseNotification.productId,productReleaseNotification.productIcon.full);this.allNotifications.unshift(notification),this.notificationsChangedListenersManager.callListeners(),this.sendNotificationReceivedEvent(notification)}},MenuNotificationsRepository.prototype.addActivityFeedNotification=function(id,activityFeedNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var newNotification=this.menuNotificationFactory.getActivityFeedNotification(id,activityFeedNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,0);this.allNotifications.unshift(newNotification),this.notificationsChangedListenersManager.callListeners(),this.sendNotificationReceivedEvent(newNotification)}},MenuNotificationsRepository.prototype.addChatNotification=function(id,chatNotification,consumed,counter,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var newNotification=this.menuNotificationFactory.getChatNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,chatNotification.userAvatar,chatNotification.userName,chatNotification.userId,chatNotification.message,counter),chatNotificationsFromSameUser=this.countSimilarNotificationsFromUser(chatNotification.userId,newNotification.type);this.removeSimilarNotificationsFromUser(chatNotification.userId,newNotification.type),0==newNotification.counter&&(newNotification.counter=1),newNotification.counter=chatNotificationsFromSameUser?chatNotificationsFromSameUser+1:newNotification.counter,this.allNotifications.unshift(newNotification),this.menuChat.shouldShowChatNotificationForUser(chatNotification.userId)&&(this.notificationsChangedListenersManager.callListeners(),this.sendNotificationReceivedEvent(newNotification))}},MenuNotificationsRepository.prototype.addGameInviteNotification=function(id,gameInviteNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var notification=this.menuNotificationFactory.getGameInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,gameInviteNotification.userName,gameInviteNotification.userId,gameInviteNotification.productName,gameInviteNotification.productImages);this.allNotifications.unshift(notification),this.notificationsChangedListenersManager.callListeners(),this.sendNotificationReceivedEvent(notification)}},MenuNotificationsRepository.prototype.addNewFriendNotification=function(id,friendNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){this.removeSimilarNotificationsFromUser(friendNotification.userId,"new_invite"),this.removeSimilarNotificationsFromUser(friendNotification.userId,"new_friend");var notification=this.menuNotificationFactory.getNewFriendNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,friendNotification.userAvatar,friendNotification.userName,friendNotification.userId);this.allNotifications.unshift(notification),this.notificationsChangedListenersManager.callListeners()}},MenuNotificationsRepository.prototype.addFriendInviteNotification=function(id,friendNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var notification=this.menuNotificationFactory.getNewFriendInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,friendNotification.userAvatar,friendNotification.userName,friendNotification.userId,friendNotification.eventTimestamp);this.allNotifications.unshift(notification),this.notificationsChangedListenersManager.callListeners(),this.sendNotificationReceivedEvent(notification)}},MenuNotificationsRepository.$inject=["menuChatTopicParser","menuFriendsTopicParser","menuCustomTopicParser","menuNotificationFactory","menuNotificationsClient","announcementTopicParser","activityFeedTopicParser","$timeout","menuChat","listenersManager","menuEventsTracker"],MenuNotificationsRepository}();exports.MenuNotificationsRepository=MenuNotificationsRepository,angular.module("menuNotificationsRepositoryComponent").service("menuNotificationsRepository",MenuNotificationsRepository)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(107),__webpack_require__(108)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuNotificationRelatedPageEnterComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationRelatedPageEnter=void 0;var angular=__webpack_require__(0),MenuNotificationRelatedPageEnter=function(){function MenuNotificationRelatedPageEnter(menuNotificationListLoad,menuNotificationsRepository,menuNotificationsClient,$window){this.menuNotificationListLoad=menuNotificationListLoad,this.menuNotificationsRepository=menuNotificationsRepository,this.menuNotificationsClient=menuNotificationsClient,$window.gogEventBus.subscribe("feed","displayed",this.onProfilesFeedEntered.bind(this)),$window.gogEventBus.subscribe("forum","topicDisplayed",this.onWebsiteForumTopicEntered.bind(this)),$window.gogEventBus.subscribe("gameCard","displayed",this.onWebsiteGameCardEntered.bind(this)),$window.gogEventBus.subscribe("wishlist","displayed",this.onWebsiteWishlistEntered.bind(this))}return MenuNotificationRelatedPageEnter.prototype.onWebsiteWishlistEntered=function(){this.menuNotificationListLoad.getIsNotificationListFilledPromise().then(this.deleteWishlistNotifications.bind(this),this.onNotificationListFilledPromiseError.bind(this))},MenuNotificationRelatedPageEnter.prototype.onWebsiteForumTopicEntered=function(eventData){this.menuNotificationListLoad.getIsNotificationListFilledPromise().then(this.deleteForumReplyNotification.bind(this,eventData.forumSlug,eventData.topicSlug),this.onNotificationListFilledPromiseError.bind(this))},MenuNotificationRelatedPageEnter.prototype.onWebsiteGameCardEntered=function(productId){this.menuNotificationListLoad.getIsNotificationListFilledPromise().then(this.deleteProductReleaseNotification.bind(this,productId),this.onNotificationListFilledPromiseError.bind(this))},MenuNotificationRelatedPageEnter.prototype.onProfilesFeedEntered=function(){this.menuNotificationListLoad.getIsNotificationListFilledPromise().then(this.deleteActivityFeedNotifications.bind(this),this.onNotificationListFilledPromiseError.bind(this))},MenuNotificationRelatedPageEnter.prototype.deleteWishlistNotifications=function(){for(var allNotifications=this.menuNotificationsRepository.getNotifications(),index=0;index<allNotifications.length;index++)"wishlisted_products_discounted"==allNotifications[index].type&&this.menuNotificationsClient.deleteNotification(allNotifications[index].id)},MenuNotificationRelatedPageEnter.prototype.deleteForumReplyNotification=function(forumSlug,topicSlug){for(var allNotifications=this.menuNotificationsRepository.getNotifications(),index=0;index<allNotifications.length;index++){var notification=allNotifications[index];"new_forum_reply"===notification.type&&notification.forumSlug==forumSlug&&notification.topicSlug==topicSlug&&this.menuNotificationsClient.deleteNotification(notification.id)}},MenuNotificationRelatedPageEnter.prototype.deleteActivityFeedNotifications=function(){for(var allNotifications=this.menuNotificationsRepository.getNotifications(),index=0;index<allNotifications.length;index++){var notification=allNotifications[index];"unseen_activities"===notification.type&&this.menuNotificationsClient.deleteNotification(notification.id)}},MenuNotificationRelatedPageEnter.prototype.deleteProductReleaseNotification=function(productId){for(var allNotifications=this.menuNotificationsRepository.getNotifications(),index=0;index<allNotifications.length;index++){var notification=allNotifications[index];"product_release"===notification.type&&notification.productId===productId&&this.menuNotificationsClient.deleteNotification(notification.id)}},MenuNotificationRelatedPageEnter.prototype.onNotificationListFilledPromiseError=function(errorMessage){console.error(errorMessage)},MenuNotificationRelatedPageEnter.$inject=["menuNotificationListLoad","menuNotificationsRepository","menuNotificationsClient","$window"],MenuNotificationRelatedPageEnter}();exports.MenuNotificationRelatedPageEnter=MenuNotificationRelatedPageEnter,angular.module("menuNotificationRelatedPageEnterComponent").service("menuNotificationRelatedPageEnter",MenuNotificationRelatedPageEnter)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(110),__webpack_require__(111),__webpack_require__(112)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuDataClientComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuDataClientFactory=void 0;var angular=__webpack_require__(0);function MenuDataClientFactory($http,listenersManager,wrappedStorageFactory,menuNow,menuLogout,$window,menuInternetConnectivityState){var clients={},DataClient=function(){function DataClient(endpointUrl,storageKey){this.endpointUrl=endpointUrl,this.storageKey=storageKey,this.retrivedData={},this.cacheExpires=0,this.isCallInProgress=!1,this.dataListenersManager=listenersManager.getManager(),this.startStorage(),$window.gogEventBus.subscribe("user","login",this.dropCache.bind(this)),this.isCacheAvailable()&&this.restoreCache(),menuLogout.registerLoggedOutListener(this.dropCache.bind(this)),menuInternetConnectivityState.registerConnectivityChangeListener(this.internetConnectionStatusChanged.bind(this))}return DataClient.prototype.registerDataListener=function(listener){return this.isDataAvailable()&&listener(),this.dataListenersManager.addListener(listener)},DataClient.prototype.getData=function(){return this.retrivedData},DataClient.prototype.fetchData=function(){var isInternetConnected=!!menuInternetConnectivityState.isConnected();this.isCallInProgress||!this.isCacheExpired()&&this.isCacheAvailable()||!isInternetConnected?this.dataListenersManager.callListeners():(this.isCallInProgress=!0,$http({method:"get",url:this.endpointUrl,withCredentials:!0}).then(this.updateData.bind(this),this.onFetchDataFail.bind(this)).finally(this.markCallAsDone.bind(this)))},DataClient.prototype.forceFetchData=function(){var isInternetConnected=!!menuInternetConnectivityState.isConnected();!this.isCallInProgress&&isInternetConnected&&(this.isCallInProgress=!0,$http({method:"get",url:this.endpointUrl,withCredentials:!0}).then(this.updateData.bind(this),this.onFetchDataFail.bind(this)).finally(this.markCallAsDone.bind(this)))},DataClient.prototype.onFetchDataFail=function(response){console.warn(response)},DataClient.prototype.markCallAsDone=function(){this.isCallInProgress=!1},DataClient.prototype.dropCache=function(){this.retrivedData={},this.storage.removeItem(this.storageKey)},DataClient.prototype.isDataAvailable=function(){return 0!=Object.keys(this.retrivedData).length},DataClient.prototype.internetConnectionStatusChanged=function(isConnected){isConnected&&this.fetchData()},DataClient.prototype.startStorage=function(){this.storage=wrappedStorageFactory.getLocalStorage("dataClient_")},DataClient.prototype.cacheData=function(){this.storage.setItem(this.storageKey,this.retrivedData)},DataClient.prototype.restoreCache=function(){this.retrivedData=this.storage.getItem(this.storageKey),this.cacheExpires=this.retrivedData[DataClient.EXPIRATION_DATE_KEY]||0,this.dataListenersManager.callListeners()},DataClient.prototype.isCacheAvailable=function(){return this.storage.isSet(this.storageKey)},DataClient.prototype.isCacheExpired=function(){return menuNow.getTime()>=this.cacheExpires},DataClient.prototype.updateData=function(response){this.retrivedData=response.data,this.cacheExpires=response.data[DataClient.EXPIRATION_DATE_KEY]||0,this.cacheData(),this.dataListenersManager.callListeners()},DataClient.EXPIRATION_DATE_KEY="cacheExpires",DataClient}();return{getForEndpoint:function(endpointUrl,storageKey,autocall){return void 0===autocall&&(autocall=!1),clients[endpointUrl]?clients[endpointUrl]:(clients[endpointUrl]=new DataClient(endpointUrl,storageKey),autocall&&clients[endpointUrl].fetchData(),clients[endpointUrl])}}}exports.MenuDataClientFactory=MenuDataClientFactory,angular.module("menuDataClientComponent").factory("menuDataClientFactory",MenuDataClientFactory)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuDataClientPerUserFactory=void 0;var angular=__webpack_require__(0);function MenuDataClientPerUserFactory($http,listenersManager,menuUserStorage,menuNow,menuLogout,$window,menuInternetConnectivityState){var clients={},DataClientPerUser=function(){function DataClientPerUser(endpointUrl,storageKey){this.endpointUrl=endpointUrl,this.storageKey=storageKey,this.retrivedData={},this.cacheExpires=0,this.isCallInProgress=!1,this.dataListenersManager=listenersManager.getManager(),this.startStorage(),$window.gogEventBus.subscribe("user","login",this.dropCache.bind(this)),this.isCacheAvailable()&&this.restoreCache(),menuLogout.registerLoggedOutListener(this.dropCache.bind(this)),menuInternetConnectivityState.registerConnectivityChangeListener(this.internetConnectionStatusChanged.bind(this))}return DataClientPerUser.prototype.registerDataListener=function(listener){return this.isDataAvailable()&&listener(),this.dataListenersManager.addListener(listener)},DataClientPerUser.prototype.getData=function(){return this.retrivedData},DataClientPerUser.prototype.fetchData=function(){var isInternetConnected=!!menuInternetConnectivityState.isConnected();this.isCallInProgress||!this.isCacheExpired()&&this.isCacheAvailable()||!isInternetConnected?this.dataListenersManager.callListeners():(this.isCallInProgress=!0,$http({method:"get",url:this.endpointUrl,withCredentials:!0}).then(this.updateData.bind(this),this.onFetchDataFail.bind(this)).finally(this.markCallAsDone.bind(this)))},DataClientPerUser.prototype.dropCache=function(){this.retrivedData={},this.storage.remove(this.storageKey)},DataClientPerUser.prototype.isDataAvailable=function(){return 0!=Object.keys(this.retrivedData).length},DataClientPerUser.prototype.onFetchDataFail=function(response){console.warn(response)},DataClientPerUser.prototype.markCallAsDone=function(){this.isCallInProgress=!1},DataClientPerUser.prototype.internetConnectionStatusChanged=function(isConnected){isConnected&&this.fetchData()},DataClientPerUser.prototype.startStorage=function(){this.storage=menuUserStorage},DataClientPerUser.prototype.cacheData=function(){this.storage.set(this.storageKey,this.retrivedData)},DataClientPerUser.prototype.restoreCache=function(){this.retrivedData=this.storage.get(this.storageKey),this.cacheExpires=this.retrivedData[DataClientPerUser.EXPIRATION_DATE_KEY]||0,this.dataListenersManager.callListeners()},DataClientPerUser.prototype.isCacheAvailable=function(){return this.storage.isSet(this.storageKey)},DataClientPerUser.prototype.isCacheExpired=function(){return menuNow.getTime()>=this.cacheExpires},DataClientPerUser.prototype.updateData=function(response){this.retrivedData=response.data,this.cacheExpires=response.data[DataClientPerUser.EXPIRATION_DATE_KEY]||0,this.cacheData(),this.dataListenersManager.callListeners()},DataClientPerUser.EXPIRATION_DATE_KEY="cacheExpires",DataClientPerUser}();return{getForEndpointPerUser:function(endpointUrl,storageKey,autocall){return void 0===autocall&&(autocall=!1),clients[endpointUrl]?clients[endpointUrl]:(clients[endpointUrl]=new DataClientPerUser(endpointUrl,storageKey),autocall&&clients[endpointUrl].fetchData(),clients[endpointUrl])}}}exports.MenuDataClientPerUserFactory=MenuDataClientPerUserFactory,angular.module("menuDataClientComponent").factory("menuDataClientPerUserFactory",MenuDataClientPerUserFactory)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(114),__webpack_require__(115)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0);angular.module("menuEventBusProxyComponent",[]).run(["menuEventBusProxy",angular.noop])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuEventBusProxy=void 0;var angular=__webpack_require__(0),MenuEventBusProxy=function(){function MenuEventBusProxy(cart,$window){this.cart=cart,this.$window=$window,this.$window.gogEventBus.subscribe("product","addToCart",this.addProductToCart.bind(this)),this.$window.gogEventBus.subscribe("series","addToCart",this.addSeriesToCart.bind(this)),this.$window.gogEventBus.subscribe("product","initialized",this.publishCartUpdatedEvent.bind(this)),this.cart.registerAfterCartUpdateListener(this.publishCartUpdatedEvent.bind(this))}return MenuEventBusProxy.prototype.addProductToCart=function(eventData){eventData.hasOwnProperty("productId")&&this.cart.add(eventData.productId)},MenuEventBusProxy.prototype.addSeriesToCart=function(eventData){eventData.hasOwnProperty("seriesId")&&eventData.hasOwnProperty("products")&&this.cart.addSeries(eventData.seriesId,eventData.products)},MenuEventBusProxy.prototype.publishCartUpdatedEvent=function(){this.$window.gogEventBus.publish("cart","updated",{cartContent:this.cart.getProducts()})},MenuEventBusProxy.$inject=["cart","$window"],MenuEventBusProxy}();exports.MenuEventBusProxy=MenuEventBusProxy,angular.module("menuEventBusProxyComponent").service("menuEventBusProxy",MenuEventBusProxy)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(117),__webpack_require__(118)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuAccordionComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0),GogMenuAccordion=function(){function GogMenuAccordion(){this.expandedSections={}}return GogMenuAccordion.prototype.toggle=function(sectionName){this.expandedSections[sectionName]=!this.expandedSections[sectionName],this.closeOthers(sectionName)},GogMenuAccordion.prototype.closeOthers=function(exceptSectionName){for(var section in this.expandedSections)section!==exceptSectionName&&(this.expandedSections[section]=!1)},GogMenuAccordion}();angular.module("menuAccordionComponent").directive("gogMenuAccordion",function(){return{restrict:"A",controller:GogMenuAccordion,controllerAs:"accordion",scope:!0}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(120),__webpack_require__(121)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0);angular.module("menuWishlistClientComponent",[]),window.gogMicroservices&&window.gogMicroservices.hasOwnProperty("menu")&&window.gogMicroservices.menu.hasOwnProperty("features")&&window.gogMicroservices.menu.features.hasOwnProperty("wishlistClient")&&window.gogMicroservices.menu.features.wishlistClient&&angular.module("menuWishlistClientComponent").run(["menuWislistClient",angular.noop])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuWishlistClient=void 0;var angular=__webpack_require__(0),MenuWishlistClient=function(){function MenuWishlistClient(menuConfig,menuDataClientPerUserFactory,$window,$http,menuAccount){this.menuConfig=menuConfig,this.menuDataClientPerUserFactory=menuDataClientPerUserFactory,this.$window=$window,this.$http=$http,this.menuAccount=menuAccount,this.wishlistedProducts=[],this.accountListenerCanceller=this.menuAccount.registerAccountListener(this.getWishlistedProductsForLoggedInUser.bind(this)),this.getWishlistedProductsForLoggedInUser(),this.$window.gogEventBus.subscribe("product","addToWishlist",this.onAddToWishlistEvent.bind(this)),this.$window.gogEventBus.subscribe("product","removeFromWishlist",this.onRemoveFromWishlistEvent.bind(this))}return MenuWishlistClient.prototype.add=function(productId){this.has(productId)||(this.wishlistedProducts.push(""+productId),this.$http.get(this.menuConfig.urls.wishlist.add(productId)).then(angular.noop).catch(this.addingToWishlistFailed.bind(this,productId)),this.updateSubscribers())},MenuWishlistClient.prototype.remove=function(productId){this.has(productId)&&(this.removeFromList(productId),this.$http.get(this.menuConfig.urls.wishlist.remove(productId)).then(angular.noop).catch(this.removingFromWishlistFailed.bind(this,productId)),this.updateSubscribers())},MenuWishlistClient.prototype.addingToWishlistFailed=function(productId){this.removeFromList(productId),this.updateSubscribers()},MenuWishlistClient.prototype.removingFromWishlistFailed=function(productId){this.wishlistedProducts.push(""+productId),this.updateSubscribers()},MenuWishlistClient.prototype.has=function(productId){return-1!==this.wishlistedProducts.indexOf(""+productId)},MenuWishlistClient.prototype.onAddToWishlistEvent=function(eventData){this.add(eventData.productId)},MenuWishlistClient.prototype.onRemoveFromWishlistEvent=function(eventData){this.remove(eventData.productId)},MenuWishlistClient.prototype.removeFromList=function(productId){var wishlistedProductIndex=this.wishlistedProducts.indexOf(""+productId);this.wishlistedProducts.splice(wishlistedProductIndex,1)},MenuWishlistClient.prototype.updateWishlistedProducts=function(){var wishlistData=this.wishlistClient.getData(),wishlistedItems=[];for(var wishlistItemId in wishlistData.wishlist)wishlistedItems.push(wishlistItemId);this.wishlistedProducts=wishlistedItems,this.updateSubscribers()},MenuWishlistClient.prototype.getWishlistedProductsForLoggedInUser=function(){this.menuAccount.isUserLoggedIn&&(this.wishlistClient=this.menuDataClientPerUserFactory.getForEndpointPerUser(this.menuConfig.urls.wishlist.get,"userWishlistData",!0),this.wishlistClient.registerDataListener(this.updateWishlistedProducts.bind(this)),this.wishlistClient.isDataAvailable()&&this.updateWishlistedProducts(),this.$window.gogEventBus.subscribe("product","initialized",this.updateSubscribers.bind(this)),this.accountListenerCanceller())},MenuWishlistClient.prototype.updateSubscribers=function(){this.$window.gogEventBus.publish("wishlist","updated",{wishlistedProducts:this.wishlistedProducts})},MenuWishlistClient.$inject=["menuConfig","menuDataClientPerUserFactory","$window","$http","menuAccount"],MenuWishlistClient}();exports.MenuWishlistClient=MenuWishlistClient,angular.module("menuWishlistClientComponent").service("menuWislistClient",MenuWishlistClient)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(123),__webpack_require__(124)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuAnalyticsComponent",[])},function(module,exports){window.gogEventBus.subscribe("menuProduct","goToProductCart",function(data){var product=data.product,position=data.position;window.Analytics.sendEvent({event:"productClick",ecommerce:{click:{products:[{name:product.slug,id:product.id,price:product.price.finalAmount,category:product.originalCategory||product.category,position:position}]}}})})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(126),__webpack_require__(127),__webpack_require__(140)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuEventsTrackerComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var angular=__webpack_require__(0),gog_module_tracking_events_1=__webpack_require__(128);angular.module("menuEventsTrackerComponent").factory("eventsSenderFactory",["menuAccount","menuConfig","$window",function(menuAccount,menuConfig,$window){var config={windowRef:$window,dataLayerRef:$window.dataLayer,insightsApiUrl:menuConfig.gogInsightsHostname,insightsClientId:menuConfig.insightsClientId,authTokenFactory:function(){return menuAccount.isUserLoggedIn?$window.gogAccessToken:void 0},onError:function(err){return console.error("EventsSender error:",err)}};return gog_module_tracking_events_1.senderFactory(config)}])},function(module,exports,__webpack_require__){"use strict";var e=__webpack_require__(129),t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e,t,n,r){return new(n||(n=Promise))(function(i,o){function c(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(c,a)}u((r=r.apply(e,t||[])).next())})}function r(e,t){var n,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var i=["item_viewed_on_list","product_clicked","add_to_cart","remove_from_cart","add_to_wishlist","begin_checkout","add_payment_info","login","search","sign_up","catalog_filters_applied"],o=["view_cart","view_item","purchase","refund","welcome_offer_banner_clicked","welcome_offer_banner_closed","redeem_started","redeem_success","select_promotion","giveaway_claimed","checkout_now","user_and_content","page_metadata_on_load"],c=["page_visited","remove_from_wishlist","section_item_clicked","cloud_save_removed","notification_received","notification_viewed","notification_clicked","download_started","onboarding_step_taken","onboarding_closed"],a=function(e,t,i){return n(void 0,void 0,void 0,function(){var n,o;return r(this,function(r){switch(r.label){case 0:return[4,fetch(e,{method:"POST",headers:i,body:JSON.stringify(t)})];case 1:return n=r.sent(),(o=n.headers.get("content-type"))&&o.includes("application/json")?[2,n.json()]:[2,n.text()]}})})},u={item_viewed_on_list:"product_viewed",product_clicked:"product_tile_clicked",add_to_cart:"item_added_to_cart",remove_from_cart:"item_removed_from_cart",add_to_wishlist:"product_added_to_wishlist",begin_checkout:"checkout_initiated",add_payment_info:"checkout_payment_method_selected",login:"user_logged_in",sign_up:"user_registered",page_visited:"page_visited",remove_from_wishlist:"product_removed_from_wishlist",section_item_clicked:"section_item_clicked",cloud_save_removed:"cloud_save_removed",search:"search_query_submitted",notification_received:"notification_received",notification_viewed:"notification_viewed",notification_clicked:"notification_clicked",catalog_filters_applied:"catalog_filters_applied",download_started:"download_started",onboarding_step_taken:"onboarding_step_taken",onboarding_closed:"onboarding_closed"},_=function(e){var t=new URL(e);return{protocol:t.protocol,hostname:t.hostname,page_path:t.pathname,query_params:t.search,anchor_params:t.hash}},s=function(t){return{type:t,date:(new Date).toJSON(),uuid:e.v4()}},d=function(e){return{product_id:e.item_id,base_value:e.price.base_value,final_value:e.price.final_value}},l=function(e){return t(t({},d(e)),{position:e.index})},m=function(e){return{url:e.url}},f=function(e){return{url:e.url,referral:e.referral}},v=function(e,n){return t(t({},s(e)),{meta:m(n),data:function(e){var t=e.items[0];return{product_id:t.item_id,final_value:t.price.final_value,base_value:t.price.base_value,currency:e.currency,context:e.context,section_info:e.section_info,cart:e.cartItems.map(d)}}(n)})},h=function(e,n){return t(t({},s(e)),{data:function(e){return{order_id:e.order_id,payment_method:e.payment_type,final_value:e.final_value,currency:e.currency,base_value:e.base_value,used_wallet_funds:e.used_wallet_funds,is_gift:e.is_gift,cart:e.items.map(d)}}(n)})},S=function(e,n){return t(t({},s(e)),{meta:function(e){return t(t({},f(e)),{user_id:e.user_id,method:e.method})}(n)})},V=function(e,n){switch(e){case"product_viewed":return function(e){return t(t({},s("product_viewed")),{meta:f(e),data:function(e){return{currency:e.currency,context:e.context,section_info:e.section_info,products:e.items.map(l)}}(e)})}(n);case"product_tile_clicked":return function(e){return t(t({},s("product_tile_clicked")),{meta:m(e),data:function(e){return{product_id:e.items[0].item_id,base_value:e.items[0].price.base_value,final_value:e.items[0].price.final_value,currency:e.currency,context:e.context,section_info:e.section_info,index:e.index}}(e)})}(n);case"item_added_to_cart":case"item_removed_from_cart":return v(e,n);case"product_added_to_wishlist":case"product_removed_from_wishlist":return function(e,n){return t(t({},s(e)),{meta:m(n),data:function(e){return{product_id:e.items[0].item_id,context:e.context,section_info:e.section_info}}(n)})}(e,n);case"checkout_initiated":case"checkout_payment_method_selected":return h(e,n);case"page_visited":return function(e){return t(t({},s("page_visited")),{meta:function(e){return e.page_variant?t(t({},f(e)),{page_variant:e.page_variant}):t({},f(e))}(e)})}(n);case"user_logged_in":case"user_registered":return S(e,n);case"section_item_clicked":return function(e){return t(t({},s("section_item_clicked")),{meta:m(e),data:function(e){return{context:e.context,target_url:e.target_url,index:e.index}}(e)})}(n);case"cloud_save_removed":return function(e){return t(t({},s("cloud_save_removed")),{meta:f(e),data:function(e){return{product_id:e.product_id,remove_type:e.remove_type,items_removed:e.items_removed}}(e)})}(n);case"search_query_submitted":return function(e){return t(t({},s("search_query_submitted")),{meta:m(e),data:function(e){var t={query:e.search_term,more_results_button:e.more_results_button,context:e.context};return Array.isArray(e.results)&&e.results.length>0&&(t.results=e.results),t}(e)})}(n);case"notification_received":case"notification_viewed":case"notification_clicked":return function(e,n){return t(t({},s(e)),{meta:m(n),data:function(e){return{notification_id:e.notification_id,notification_type:e.notification_type,target_url:e.target_url}}(n)})}(e,n);case"catalog_filters_applied":return function(e){return t(t({},s("catalog_filters_applied")),{meta:f(e),data:function(e){var t={filters:e.filters};return e.context&&(t.context=e.context),t}(e)})}(n);case"download_started":return function(e){return t(t({},s("download_started")),{meta:m(e),data:function(e){return{download_type:e.download_type,product_id:e.product_id,file_name:e.file_name||""}}(e)})}(n);case"onboarding_step_taken":return function(e){return t(t({},s("onboarding_step_taken")),{data:function(e){if(function(e){return"pick_tags"===e.onboarding_step}(e))return{onboarding_step:"pick_tags"};if(function(e){return"pick_games"===e.onboarding_step}(e))return function(e){var t;return{onboarding_step:"pick_games",picked_tags:null!==(t=e.picked_tags)&&void 0!==t?t:[]}}(e);if(function(e){return"recommendations"===e.onboarding_step}(e))return function(e){var t,n,r;return{onboarding_step:"recommendations",picked_tags:null!==(t=e.picked_tags)&&void 0!==t?t:[],picked_products:null!==(n=e.picked_products)&&void 0!==n?n:[],recommended_products:null!==(r=e.recommended_products)&&void 0!==r?r:[]}}(e);throw new Error("Cannot parse 'onboarding_step_taken' data; Unknown step type!")}(e)})}(n);case"onboarding_closed":return function(e){return t(t({},s("onboarding_closed")),{data:function(e){if(function(e){return"pick_tags"===e.onboarding_step}(e))return function(e){return{close_type:e.close_type,target_url:_(e.target_url),onboarding_step:"pick_tags"}}(e);if(function(e){return"pick_games"===e.onboarding_step}(e))return function(e){var t;return{close_type:e.close_type,target_url:_(e.target_url),onboarding_step:"pick_games",picked_tags:null!==(t=e.picked_tags)&&void 0!==t?t:[]}}(e);if(function(e){return"recommendations"===e.onboarding_step}(e))return function(e){var t,n,r;return{close_type:e.close_type,target_url:_(e.target_url),onboarding_step:"recommendations",picked_tags:null!==(t=e.picked_tags)&&void 0!==t?t:[],picked_products:null!==(n=e.picked_products)&&void 0!==n?n:[],recommended_products:null!==(r=e.recommended_products)&&void 0!==r?r:[]}}(e);throw new Error("Cannot parse 'onboarding_closed' data; Unknown step type!")}(e)})}(n);default:throw new Error("Cannot parse event on insight event")}},L=function(e){var i=e.apiUrl,o=e.authTokenFactory,c=e.onError,_=e.onSuccess;return function(e,s){return n(void 0,void 0,void 0,function(){var n,d,l,m;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=function(e,n){var r=null==o?void 0:o(),i={"X-Instance":e.instance_id,"X-Visit":e.visit_id,"Content-Type":"application/json"};return r?t(t({},i),{Authorization:"Bearer ".concat(r)}):i}(s),d=function(e){return u[e]}(e),l=V(d,s),[4,a(i,l,n)];case 1:return r.sent(),null==_||_(e),[3,3];case 2:return m=r.sent(),c?c(m):console.error("Cannot send event ".concat(e)),[3,3];case 3:return[2]}})})}},O={item_viewed_on_list:"view_item_list",product_clicked:"select_item",add_to_cart:"add_to_cart",remove_from_cart:"remove_from_cart",add_to_wishlist:"add_to_wishlist",begin_checkout:"begin_checkout",add_payment_info:"add_payment_info",login:"login",sign_up:"sign_up",catalog_filters_applied:"catalog_filters_applied",view_cart:"view_cart",view_item:"view_item",purchase:"purchase",refund:"refund",search:"search",welcome_offer_banner_clicked:"welcome_offer_banner_clicked",welcome_offer_banner_closed:"welcome_offer_banner_closed",redeem_started:"redeem_started",redeem_success:"redeem_success",select_promotion:"select_promotion",giveaway_claimed:"giveaway_claimed",checkout_now:"checkout_now",user_and_content:"user_and_content",page_metadata_on_load:"page_metadata_on_load"},j=function(e){return{item_id:e.item_id,item_name:e.item_name,discount:e.price.discount,index:e.index,price:e.price.final_value,quantity:1}},ee=function(e,n){switch(e){case"view_item_list":return{event:"view_item_list",ecommerce:function(e){return{item_list_id:e.item_list_id,item_list_name:e.item_list_name,items:e.items.map(j)}}(n)};case"view_item":return{event:"view_item",ecommerce:function(e){return{currency:e.currency,value:e.value,items:e.items.map(j)}}(n)};case"select_item":return{event:"select_item",ecommerce:function(e){return{item_list_id:e.item_list_id,item_list_name:e.item_list_name,items:e.items.map(j),context:e.context,currency:e.currency}}(n)};case"add_to_cart":return{event:"add_to_cart",ecommerce:function(e){return{currency:e.currency,value:e.value,items:e.items.map(j),context:e.context}}(n)};case"add_to_wishlist":return{event:"add_to_wishlist",ecommerce:function(e){return{currency:e.currency,value:e.value,items:e.items.map(j),context:e.context}}(n)};case"view_cart":return{event:"view_cart",ecommerce:function(e){return{currency:e.currency,value:e.value,items:e.items.map(j)}}(n)};case"remove_from_cart":return{event:"remove_from_cart",ecommerce:function(e){return{currency:e.currency,value:e.value,items:e.items.map(j)}}(n)};case"begin_checkout":return{event:"begin_checkout",ecommerce:function(e){return{currency:e.currency,value:e.final_value,items:e.items.map(j)}}(n)};case"add_payment_info":return{event:"add_payment_info",ecommerce:function(e){return{currency:e.currency,value:e.final_value,payment_type:e.payment_type,items:e.items.map(j)}}(n)};case"purchase":return{event:"purchase",ecommerce:function(e){return{currency:e.currency,value:e.value,eHash:e.eHash,payment_type:e.payment_type,transaction_id:e.transaction_id,tax:e.tax,items:e.items.map(j)}}(n)};case"refund":return{event:"refund",ecommerce:function(e){return{currency:e.currency,value:e.value,transaction_id:e.transaction_id,tax:e.tax,items:e.items.map(j)}}(n)};case"search":return{event:"search",search_term:n.search_term};case"welcome_offer_banner_clicked":return{event:"welcome_offer_banner_clicked"};case"welcome_offer_banner_closed":return{event:"welcome_offer_banner_closed"};case"checkout_now":return{event:"checkout_now"};case"login":return{event:"login",method:n.method};case"sign_up":return{event:"sign_up",method:n.method};case"redeem_started":return{event:"redeem_started",ecommerce:function(e){return{currency:e.currency,pagelanguage:e.pagelanguage,items:e.items.map(j)}}(n)};case"redeem_success":return{event:"redeem_success",ecommerce:function(e){return{currency:e.currency,eHash:e.eHash,pagelanguage:e.pagelanguage,items:e.items.map(j)}}(n)};case"select_promotion":return{event:"select_promotion",ecommerce:function(e){return{promotion_id:e.promotion_id,context:e.context}}(n)};case"giveaway_claimed":return{event:"giveaway_claimed",ecommerce:function(e){return{item_id:e.item_id,item_name:e.item_name}}(n)};case"user_and_content":return function(e){return{event:"user_and_content",pageType:e.page_type,pageLanguage:e.page_language,pageCurrency:e.page_currency,userStatus:e.user_status,userId:e.user_id,regSince:e.user_register_date?(t=e.user_register_date,n=new Date(t),r=Date.now()-n.getTime(),Math.ceil(r/864e5)):null};var t,n,r}(n);case"page_metadata_on_load":return function(e){return{event:"page_metadata_on_load",pageType:e.page_type,langDrop:e.page_language,currDrop:e.page_currency}}(n);case"catalog_filters_applied":return t({event:"catalog_filters_applied"},function(e){var t={filters:e.filters};return e.context&&(t.context=e.context),t}(n));default:throw new Error("Unhandled GA event name")}},re=function(e,t){return{ttl:t,idKey:"".concat(e,"_id"),expirationKey:"".concat(e,"_expiryDate")}},ie=function(t){var n=t.windowRef,r=new Map,i=n.localStorage,o=re("insightsInstance",31536e7),c=re("insightsVisit",18e5),a=function(e,t){r.set(e,t),i.setItem(e,String(t))},u=function(e){return i.getItem(e)},_=function(e){return r.get(e)},s=function(t,n){var r,i=t.idKey,o=t.expirationKey,c=t.ttl,u=n[o],_=n[i],s=(r=n[o],Number(r)<Date.now());_=!_||s?e.v4():_,u=!u||s?Date.now()+c:u,a(i,_),a(o,u)};return{getVisitId:function(){return _(c.idKey)},getVisitExpirationDate:function(){return _(c.expirationKey)},getInstanceId:function(){return _(o.idKey)},getInstanceExpirationDate:function(){return _(o.expirationKey)},rehydrate:function(){return[o,c].forEach(function(e){return s(e,function(e){var t,n=e.idKey,r=e.expirationKey;return(t={})[n]=u(n),t[r]=Number(u(r)),t}(e))})},prolongVisit:function(){var e=Date.now()+18e5;a(c.expirationKey,e)}}},oe=function(e){return{insightsClient:e.insightsApiUrl?function(e){var t=e.insightsApiUrl,n=e.insightsClientId,r=e.authTokenFactory,i=e.onSuccess,o=e.onError;try{var c={apiUrl:"".concat(t,"/clients/").concat(n,"/events"),authTokenFactory:r,onSuccess:i,onError:o};return L(c)}catch(e){throw new Error("Cannot instantiate the Insights client")}}(e):void 0,gaClient:e.dataLayerRef?function(e){var t=e.dataLayerRef,n=e.onSuccess,r=e.onError;try{return function(e){var t=e.dataLayerRef,n=e.onError,r=e.onSuccess;return function(e,i){try{var o=ee(function(e){return O[e]}(e),i);"ecommerce"in o&&t.push({ecommerce:null}),t.push(o),null==r||r(e)}catch(t){n?n(t):console.error("Cannot send event ".concat(e))}}}({dataLayerRef:t,onSuccess:n,onError:r})}catch(e){throw new Error("Cannot instantiate the Google Analytics client")}}(e):void 0}};exports.senderFactory=function(e){var a=oe(e),u=a.insightsClient,_=a.gaClient,s=ie(e),d=function(e,t){var n=e.windowRef,r=e.userIdFactory;return{getEventMeta:function(){var e,i,o;return{instance_id:null!==(e=t.getInstanceId())&&void 0!==e?e:"",visit_id:null!==(i=t.getVisitId())&&void 0!==i?i:"",referral:n.document.referrer,user_id:null==r?void 0:r(),url:(o=n.location,{protocol:o.protocol,hostname:o.hostname,page_path:o.pathname,query_params:o.search,anchor_params:o.hash})}}}}(e,s);return s.rehydrate(),function(a,l){return n(void 0,void 0,void 0,function(){var n,m;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),n=d.getEventMeta(),i.includes(a)?(null==_||_(a,t(t({},l),n)),[4,null==u?void 0:u(a,t(t({},l),n))]):[3,2];case 1:r.sent(),r.label=2;case 2:return o.includes(a)&&(null==_||_(a,t(t({},l),n))),c.includes(a)?[4,null==u?void 0:u(a,t(t({},l),n))]:[3,4];case 3:r.sent(),r.label=4;case 4:return s.prolongVisit(),[3,6];case 5:return m=r.sent(),e.onError?e.onError(m):console.error("Event tracker error:",m),[3,6];case 6:return[2]}})})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__v1_js__=__webpack_require__(130);__webpack_require__.d(__webpack_exports__,"v1",function(){return __WEBPACK_IMPORTED_MODULE_0__v1_js__.a});var __WEBPACK_IMPORTED_MODULE_1__v3_js__=__webpack_require__(132);__webpack_require__.d(__webpack_exports__,"v3",function(){return __WEBPACK_IMPORTED_MODULE_1__v3_js__.a});var __WEBPACK_IMPORTED_MODULE_2__v4_js__=__webpack_require__(134);__webpack_require__.d(__webpack_exports__,"v4",function(){return __WEBPACK_IMPORTED_MODULE_2__v4_js__.a});var __WEBPACK_IMPORTED_MODULE_3__v5_js__=__webpack_require__(136);__webpack_require__.d(__webpack_exports__,"v5",function(){return __WEBPACK_IMPORTED_MODULE_3__v5_js__.a});var __WEBPACK_IMPORTED_MODULE_4__nil_js__=__webpack_require__(138);__webpack_require__.d(__webpack_exports__,"NIL",function(){return __WEBPACK_IMPORTED_MODULE_4__nil_js__.a});var __WEBPACK_IMPORTED_MODULE_5__version_js__=__webpack_require__(139);__webpack_require__.d(__webpack_exports__,"version",function(){return __WEBPACK_IMPORTED_MODULE_5__version_js__.a});var __WEBPACK_IMPORTED_MODULE_6__validate_js__=__webpack_require__(2);__webpack_require__.d(__webpack_exports__,"validate",function(){return __WEBPACK_IMPORTED_MODULE_6__validate_js__.a});var __WEBPACK_IMPORTED_MODULE_7__stringify_js__=__webpack_require__(1);__webpack_require__.d(__webpack_exports__,"stringify",function(){return __WEBPACK_IMPORTED_MODULE_7__stringify_js__.a});var __WEBPACK_IMPORTED_MODULE_8__parse_js__=__webpack_require__(6);__webpack_require__.d(__webpack_exports__,"parse",function(){return __WEBPACK_IMPORTED_MODULE_8__parse_js__.a})},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__rng_js__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_1__stringify_js__=__webpack_require__(1);let _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;__webpack_exports__.a=function(options,buf,offset){let i=buf&&offset||0;const b=buf||new Array(16);let node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){const seedBytes=options.random||(options.rng||__WEBPACK_IMPORTED_MODULE_0__rng_js__.a)();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}let msecs=void 0!==options.msecs?options.msecs:Date.now(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1;const dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq;const tl=(1e4*(268435455&(msecs+=122192928e5))+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;const tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(let n=0;n<6;++n)b[i+n]=node[n];return buf||Object(__WEBPACK_IMPORTED_MODULE_1__stringify_js__.b)(b)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__v35_js__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_1__md5_js__=__webpack_require__(133);const v3=Object(__WEBPACK_IMPORTED_MODULE_0__v35_js__.a)("v3",48,__WEBPACK_IMPORTED_MODULE_1__md5_js__.a);__webpack_exports__.a=v3},function(module,__webpack_exports__,__webpack_require__){"use strict";function getOutputLength(inputLength8){return 14+(inputLength8+64>>>9<<4)+1}function safeAdd(x,y){const lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}function md5cmn(q,a,b,x,s,t){return safeAdd((num=safeAdd(safeAdd(a,q),safeAdd(x,t)))<<(cnt=s)|num>>>32-cnt,b);var num,cnt}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t)}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t)}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t)}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t)}__webpack_exports__.a=function(bytes){if("string"==typeof bytes){const msg=unescape(encodeURIComponent(bytes));bytes=new Uint8Array(msg.length);for(let i=0;i<msg.length;++i)bytes[i]=msg.charCodeAt(i)}return function(input){const output=[],length32=32*input.length;for(let i=0;i<length32;i+=8){const x=input[i>>5]>>>i%32&255,hex=parseInt("0123456789abcdef".charAt(x>>>4&15)+"0123456789abcdef".charAt(15&x),16);output.push(hex)}return output}(function(x,len){x[len>>5]|=128<<len%32,x[getOutputLength(len)-1]=len;let a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(let i=0;i<x.length;i+=16){const olda=a,oldb=b,oldc=c,oldd=d;a=md5ff(a,b,c,d,x[i],7,-680876936),d=md5ff(d,a,b,c,x[i+1],12,-389564586),c=md5ff(c,d,a,b,x[i+2],17,606105819),b=md5ff(b,c,d,a,x[i+3],22,-1044525330),a=md5ff(a,b,c,d,x[i+4],7,-176418897),d=md5ff(d,a,b,c,x[i+5],12,1200080426),c=md5ff(c,d,a,b,x[i+6],17,-1473231341),b=md5ff(b,c,d,a,x[i+7],22,-45705983),a=md5ff(a,b,c,d,x[i+8],7,1770035416),d=md5ff(d,a,b,c,x[i+9],12,-1958414417),c=md5ff(c,d,a,b,x[i+10],17,-42063),b=md5ff(b,c,d,a,x[i+11],22,-1990404162),a=md5ff(a,b,c,d,x[i+12],7,1804603682),d=md5ff(d,a,b,c,x[i+13],12,-40341101),c=md5ff(c,d,a,b,x[i+14],17,-1502002290),b=md5ff(b,c,d,a,x[i+15],22,1236535329),a=md5gg(a,b,c,d,x[i+1],5,-165796510),d=md5gg(d,a,b,c,x[i+6],9,-1069501632),c=md5gg(c,d,a,b,x[i+11],14,643717713),b=md5gg(b,c,d,a,x[i],20,-373897302),a=md5gg(a,b,c,d,x[i+5],5,-701558691),d=md5gg(d,a,b,c,x[i+10],9,38016083),c=md5gg(c,d,a,b,x[i+15],14,-660478335),b=md5gg(b,c,d,a,x[i+4],20,-405537848),a=md5gg(a,b,c,d,x[i+9],5,568446438),d=md5gg(d,a,b,c,x[i+14],9,-1019803690),c=md5gg(c,d,a,b,x[i+3],14,-187363961),b=md5gg(b,c,d,a,x[i+8],20,1163531501),a=md5gg(a,b,c,d,x[i+13],5,-1444681467),d=md5gg(d,a,b,c,x[i+2],9,-51403784),c=md5gg(c,d,a,b,x[i+7],14,1735328473),b=md5gg(b,c,d,a,x[i+12],20,-1926607734),a=md5hh(a,b,c,d,x[i+5],4,-378558),d=md5hh(d,a,b,c,x[i+8],11,-2022574463),c=md5hh(c,d,a,b,x[i+11],16,1839030562),b=md5hh(b,c,d,a,x[i+14],23,-35309556),a=md5hh(a,b,c,d,x[i+1],4,-1530992060),d=md5hh(d,a,b,c,x[i+4],11,1272893353),c=md5hh(c,d,a,b,x[i+7],16,-155497632),b=md5hh(b,c,d,a,x[i+10],23,-1094730640),a=md5hh(a,b,c,d,x[i+13],4,681279174),d=md5hh(d,a,b,c,x[i],11,-358537222),c=md5hh(c,d,a,b,x[i+3],16,-722521979),b=md5hh(b,c,d,a,x[i+6],23,76029189),a=md5hh(a,b,c,d,x[i+9],4,-640364487),d=md5hh(d,a,b,c,x[i+12],11,-421815835),c=md5hh(c,d,a,b,x[i+15],16,530742520),b=md5hh(b,c,d,a,x[i+2],23,-995338651),a=md5ii(a,b,c,d,x[i],6,-198630844),d=md5ii(d,a,b,c,x[i+7],10,1126891415),c=md5ii(c,d,a,b,x[i+14],15,-1416354905),b=md5ii(b,c,d,a,x[i+5],21,-57434055),a=md5ii(a,b,c,d,x[i+12],6,1700485571),d=md5ii(d,a,b,c,x[i+3],10,-1894986606),c=md5ii(c,d,a,b,x[i+10],15,-1051523),b=md5ii(b,c,d,a,x[i+1],21,-2054922799),a=md5ii(a,b,c,d,x[i+8],6,1873313359),d=md5ii(d,a,b,c,x[i+15],10,-30611744),c=md5ii(c,d,a,b,x[i+6],15,-1560198380),b=md5ii(b,c,d,a,x[i+13],21,1309151649),a=md5ii(a,b,c,d,x[i+4],6,-145523070),d=md5ii(d,a,b,c,x[i+11],10,-1120210379),c=md5ii(c,d,a,b,x[i+2],15,718787259),b=md5ii(b,c,d,a,x[i+9],21,-343485551),a=safeAdd(a,olda),b=safeAdd(b,oldb),c=safeAdd(c,oldc),d=safeAdd(d,oldd)}return[a,b,c,d]}(function(input){if(0===input.length)return[];const length8=8*input.length,output=new Uint32Array(getOutputLength(length8));for(let i=0;i<length8;i+=8)output[i>>5]|=(255&input[i/8])<<i%32;return output}(bytes),8*bytes.length))}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__native_js__=__webpack_require__(135),__WEBPACK_IMPORTED_MODULE_1__rng_js__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_2__stringify_js__=__webpack_require__(1);__webpack_exports__.a=function(options,buf,offset){if(__WEBPACK_IMPORTED_MODULE_0__native_js__.a.randomUUID&&!buf&&!options)return __WEBPACK_IMPORTED_MODULE_0__native_js__.a.randomUUID();const rnds=(options=options||{}).random||(options.rng||__WEBPACK_IMPORTED_MODULE_1__rng_js__.a)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return Object(__WEBPACK_IMPORTED_MODULE_2__stringify_js__.b)(rnds)}},function(module,__webpack_exports__,__webpack_require__){"use strict";const randomUUID="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);__webpack_exports__.a={randomUUID:randomUUID}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__v35_js__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_1__sha1_js__=__webpack_require__(137);const v5=Object(__WEBPACK_IMPORTED_MODULE_0__v35_js__.a)("v5",80,__WEBPACK_IMPORTED_MODULE_1__sha1_js__.a);__webpack_exports__.a=v5},function(module,__webpack_exports__,__webpack_require__){"use strict";function f(s,x,y,z){switch(s){case 0:return x&y^~x&z;case 1:return x^y^z;case 2:return x&y^x&z^y&z;case 3:return x^y^z}}function ROTL(x,n){return x<<n|x>>>32-n}__webpack_exports__.a=function(bytes){const K=[1518500249,1859775393,2400959708,3395469782],H=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof bytes){const msg=unescape(encodeURIComponent(bytes));bytes=[];for(let i=0;i<msg.length;++i)bytes.push(msg.charCodeAt(i))}else Array.isArray(bytes)||(bytes=Array.prototype.slice.call(bytes));bytes.push(128);const l=bytes.length/4+2,N=Math.ceil(l/16),M=new Array(N);for(let i=0;i<N;++i){const arr=new Uint32Array(16);for(let j=0;j<16;++j)arr[j]=bytes[64*i+4*j]<<24|bytes[64*i+4*j+1]<<16|bytes[64*i+4*j+2]<<8|bytes[64*i+4*j+3];M[i]=arr}M[N-1][14]=8*(bytes.length-1)/Math.pow(2,32),M[N-1][14]=Math.floor(M[N-1][14]),M[N-1][15]=8*(bytes.length-1)&4294967295;for(let i=0;i<N;++i){const W=new Uint32Array(80);for(let t=0;t<16;++t)W[t]=M[i][t];for(let t=16;t<80;++t)W[t]=ROTL(W[t-3]^W[t-8]^W[t-14]^W[t-16],1);let a=H[0],b=H[1],c=H[2],d=H[3],e=H[4];for(let t=0;t<80;++t){const s=Math.floor(t/20),T=ROTL(a,5)+f(s,b,c,d)+e+K[s]+W[t]>>>0;e=d,d=c,c=ROTL(b,30)>>>0,b=a,a=T}H[0]=H[0]+a>>>0,H[1]=H[1]+b>>>0,H[2]=H[2]+c>>>0,H[3]=H[3]+d>>>0,H[4]=H[4]+e>>>0}return[H[0]>>24&255,H[0]>>16&255,H[0]>>8&255,255&H[0],H[1]>>24&255,H[1]>>16&255,H[1]>>8&255,255&H[1],H[2]>>24&255,H[2]>>16&255,H[2]>>8&255,255&H[2],H[3]>>24&255,H[3]>>16&255,H[3]>>8&255,255&H[3],H[4]>>24&255,H[4]>>16&255,H[4]>>8&255,255&H[4]]}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a="00000000-0000-0000-0000-000000000000"},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__validate_js__=__webpack_require__(2);__webpack_exports__.a=function(uuid){if(!Object(__WEBPACK_IMPORTED_MODULE_0__validate_js__.a)(uuid))throw TypeError("Invalid UUID");return parseInt(uuid.slice(14,15),16)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuEventsTracker=void 0;var angular=__webpack_require__(0),MenuEventsTracker=function(){function MenuEventsTracker(eventsSenderFactory){this.eventsSenderFactory=eventsSenderFactory,this.sender=eventsSenderFactory}return MenuEventsTracker.prototype.sendEvent=function(type,data){this.sender(type,data)},MenuEventsTracker.prototype.mapProductToEventItem=function(product,index){void 0===index&&(index=0);var price={base_value:product.price.baseAmount?parseFloat(product.price.baseAmount):0,final_value:product.price.finalAmount?parseFloat(product.price.finalAmount):product.price.amount?parseFloat(product.price.amount):0,discount:product.price.discountDifference?parseFloat(product.price.discountDifference):0};return{item_id:String(product.id),item_name:product.title,price:price,index:index,quantity:1}},MenuEventsTracker.$inject=["eventsSenderFactory"],MenuEventsTracker}();exports.MenuEventsTracker=MenuEventsTracker,angular.module("menuEventsTrackerComponent").service("menuEventsTracker",MenuEventsTracker)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(142),__webpack_require__(7)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(0).module("menuCartStateComponent",[])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnouncementTopicParser=exports.AnnouncementTopicMediator=exports.MenuNotificationSafeDate=exports.MenuNotificationExpiration=exports.MenuNotificationRelatedPageEnter=exports.MenuChatProvider=exports.MenuNotificationActionProvider=exports.MenuNotificationListLoad=exports.MenuNotificationsClient=exports.MenuCustomTopicMediator=exports.MenuNotificationFactory=exports.MenuNotificationsRepository=exports.MenuNotificationsCtrl=exports.MenuFriendsTopicMediator=exports.MenuFriendsTopicParser=exports.MenuChatTopicMediator=exports.MenuChatTopicParser=void 0;var MenuChatTopicParser_1=__webpack_require__(144);Object.defineProperty(exports,"MenuChatTopicParser",{enumerable:!0,get:function(){return MenuChatTopicParser_1.MenuChatTopicParser}});var MenuChatTopicMediator_1=__webpack_require__(145);Object.defineProperty(exports,"MenuChatTopicMediator",{enumerable:!0,get:function(){return MenuChatTopicMediator_1.MenuChatTopicMediator}});var MenuFriendsTopicParser_1=__webpack_require__(146);Object.defineProperty(exports,"MenuFriendsTopicParser",{enumerable:!0,get:function(){return MenuFriendsTopicParser_1.MenuFriendsTopicParser}});var MenuFriendsTopicMediator_1=__webpack_require__(147);Object.defineProperty(exports,"MenuFriendsTopicMediator",{enumerable:!0,get:function(){return MenuFriendsTopicMediator_1.MenuFriendsTopicMediator}});var MenuNotificationsCtrl_1=__webpack_require__(148);Object.defineProperty(exports,"MenuNotificationsCtrl",{enumerable:!0,get:function(){return MenuNotificationsCtrl_1.MenuNotificationsCtrl}});var MenuNotificationsRepository_1=__webpack_require__(149);Object.defineProperty(exports,"MenuNotificationsRepository",{enumerable:!0,get:function(){return MenuNotificationsRepository_1.MenuNotificationsRepository}});var MenuNotificationFactory_1=__webpack_require__(150);Object.defineProperty(exports,"MenuNotificationFactory",{enumerable:!0,get:function(){return MenuNotificationFactory_1.MenuNotificationFactory}});var MenuCustomTopicMediator_1=__webpack_require__(151);Object.defineProperty(exports,"MenuCustomTopicMediator",{enumerable:!0,get:function(){return MenuCustomTopicMediator_1.MenuCustomTopicMediator}});var MenuNotificationsClient_1=__webpack_require__(152);Object.defineProperty(exports,"MenuNotificationsClient",{enumerable:!0,get:function(){return MenuNotificationsClient_1.MenuNotificationsClient}});var MenuNotificationExpiration_1=__webpack_require__(153);Object.defineProperty(exports,"MenuNotificationExpiration",{enumerable:!0,get:function(){return MenuNotificationExpiration_1.MenuNotificationExpiration}});var MenuNotificationListLoad_1=__webpack_require__(154);Object.defineProperty(exports,"MenuNotificationListLoad",{enumerable:!0,get:function(){return MenuNotificationListLoad_1.MenuNotificationListLoad}});var MenuNotificationRelatedPageEnter_1=__webpack_require__(155);Object.defineProperty(exports,"MenuNotificationRelatedPageEnter",{enumerable:!0,get:function(){return MenuNotificationRelatedPageEnter_1.MenuNotificationRelatedPageEnter}});var MenuNotificationActionProvider_1=__webpack_require__(156);Object.defineProperty(exports,"MenuNotificationActionProvider",{enumerable:!0,get:function(){return MenuNotificationActionProvider_1.MenuNotificationActionProvider}});var MenuChatProvider_1=__webpack_require__(159);Object.defineProperty(exports,"MenuChatProvider",{enumerable:!0,get:function(){return MenuChatProvider_1.MenuChatProvider}});var MenuNotificationSafeDate_1=__webpack_require__(160);Object.defineProperty(exports,"MenuNotificationSafeDate",{enumerable:!0,get:function(){return MenuNotificationSafeDate_1.MenuNotificationSafeDate}});var MenuAnnouncementTopicMediator_1=__webpack_require__(161);Object.defineProperty(exports,"AnnouncementTopicMediator",{enumerable:!0,get:function(){return MenuAnnouncementTopicMediator_1.AnnouncementTopicMediator}});var MenuAnnouncementTopicParser_1=__webpack_require__(162);Object.defineProperty(exports,"AnnouncementTopicParser",{enumerable:!0,get:function(){return MenuAnnouncementTopicParser_1.AnnouncementTopicParser}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuChatTopicParser=void 0;var MenuChatTopicParser=function(){function MenuChatTopicParser(listenersManager,menuNotificationSafeDate){this.menuNotificationSafeDate=menuNotificationSafeDate,this.newChatMessageListenersManager=listenersManager.getManager(),this.newGameInviteListenersManager=listenersManager.getManager(),this.chatMessageRemovedListenersManager=listenersManager.getManager(),this.chatMessageConsumedListenersManager=listenersManager.getManager()}return MenuChatTopicParser.prototype.parseTopicMessage=function(message,isDownloaded){void 0===isDownloaded&&(isDownloaded=!1);var messageContent=JSON.parse(message.content),consumed=!1,counter=0;message.hasOwnProperty("consumed")&&(consumed=message.consumed),message.hasOwnProperty("counter")&&(counter=message.counter);var updateTimestamp=null;void 0!==message.date_updated&&(updateTimestamp=Math.floor(this.menuNotificationSafeDate(message.date_updated)/1e3));var creationTimestamp=null;void 0!==messageContent.data.publish_date&&(creationTimestamp=Math.floor(this.menuNotificationSafeDate(messageContent.data.publish_date)/1e3));var expirationTimestamp=null;void 0!==message.date_expiration?expirationTimestamp=Math.floor(this.menuNotificationSafeDate(message.date_expiration)):"gameInvitation"==messageContent.key&&(expirationTimestamp=Date.now()+MenuChatTopicParser.GAME_INVITE_EXPIRATION,expirationTimestamp=new Date(expirationTimestamp).getTime()),"newChatMessage"==messageContent.key?this.newChatMessageListenersManager.callListeners(message.id,this.formatMessageData(messageContent.data),consumed,counter,creationTimestamp,expirationTimestamp,updateTimestamp,isDownloaded):"gameInvitation"==messageContent.key&&this.newGameInviteListenersManager.callListeners(message.id,this.formatGameInvitationMessageData(messageContent.data),consumed,creationTimestamp,expirationTimestamp,updateTimestamp,isDownloaded)},MenuChatTopicParser.prototype.parseRemovedTopicMessage=function(message){var messageContent=JSON.parse(message.content);this.chatMessageRemovedListenersManager.callListeners(messageContent.removed_by,messageContent[messageContent.removed_by])},MenuChatTopicParser.prototype.parseConsumedTopicMessage=function(message){var messageContent=JSON.parse(message.content);this.chatMessageConsumedListenersManager.callListeners(messageContent.id)},MenuChatTopicParser.prototype.registerNewChatMessageListener=function(listener){this.newChatMessageListenersManager.addListener(listener)},MenuChatTopicParser.prototype.registerNewGameInviteListener=function(listener){this.newGameInviteListenersManager.addListener(listener)},MenuChatTopicParser.prototype.registerChatMessageRemovedListener=function(listener){this.chatMessageRemovedListenersManager.addListener(listener)},MenuChatTopicParser.prototype.registerChatMessageConsumedListener=function(listener){this.chatMessageConsumedListenersManager.addListener(listener)},MenuChatTopicParser.prototype.formatMessageData=function(messageData){return{userName:messageData.sender_username,userAvatar:this.remomveFormatFromAvatarUrl(messageData.images.medium),userId:messageData.sender_id,message:messageData.message_content}},MenuChatTopicParser.prototype.formatGameInvitationMessageData=function(messageData){return{productName:messageData.product_name,productImages:messageData.product_images,userName:messageData.sender_username,userId:messageData.sender_id}},MenuChatTopicParser.prototype.remomveFormatFromAvatarUrl=function(imageUrl){return imageUrl.split("_")[0]},MenuChatTopicParser.$inject=["listenersManager","menuNotificationSafeDate"],MenuChatTopicParser.GAME_INVITE_EXPIRATION=9e5,MenuChatTopicParser}();exports.MenuChatTopicParser=MenuChatTopicParser},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuChatTopicMediator=void 0;var MenuChatTopicMediator=function(){function MenuChatTopicMediator(pusherInterface,menuNotificationListLoad,menuChatTopicParser){this.menuChatTopicParser=menuChatTopicParser,pusherInterface.registerTopicConsumer("chat",this.parseTopicMessage.bind(this)),pusherInterface.registerTopicConsumer("chat:consumed",this.parseConsumedTopicMessage.bind(this)),pusherInterface.registerTopicConsumer("chat:removed",this.parseRemovedTopicMessage.bind(this)),menuNotificationListLoad.registerFullListBackendDataListener(this.filterMessagesFromBackendData.bind(this))}return MenuChatTopicMediator.prototype.filterMessagesFromBackendData=function(messages){for(var index=0;index<messages.length;index++)"chat"==messages[index].type&&this.parseTopicMessage({id:messages[index].id,content:messages[index].payload,consumed:messages[index].consumed,counter:messages[index].counter,date_expiration:messages[index].date_expiration,date_updated:messages[index].date_updated})},MenuChatTopicMediator.prototype.parseTopicMessage=function(message){this.menuChatTopicParser.parseTopicMessage(message)},MenuChatTopicMediator.prototype.parseRemovedTopicMessage=function(message){this.menuChatTopicParser.parseRemovedTopicMessage(message)},MenuChatTopicMediator.prototype.parseConsumedTopicMessage=function(message){this.menuChatTopicParser.parseConsumedTopicMessage(message)},MenuChatTopicMediator.$inject=["pusherInterface","menuNotificationListLoad","menuChatTopicParser"],MenuChatTopicMediator}();exports.MenuChatTopicMediator=MenuChatTopicMediator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuFriendsTopicParser=void 0;var MenuFriendsTopicParser=function(){function MenuFriendsTopicParser(listenersManager,menuNotificationSafeDate){this.menuNotificationSafeDate=menuNotificationSafeDate,this.newFriendInviteListenersManager=listenersManager.getManager(),this.friendAcceptedYourInviteListenersManager=listenersManager.getManager(),this.notificationConsumedListenersManager=listenersManager.getManager(),this.notificationRemovedListenersManager=listenersManager.getManager()}return MenuFriendsTopicParser.prototype.parseTopicMessage=function(message,isDownloaded){void 0===isDownloaded&&(isDownloaded=!1);var messageContent=JSON.parse(message.content),consumed=!1;message.hasOwnProperty("consumed")&&(consumed=message.consumed);var updateTimestamp=null;void 0!==message.date_updated&&(updateTimestamp=Math.floor(this.menuNotificationSafeDate(message.date_updated)/1e3));var creationTimestamp=null;creationTimestamp=void 0!==message.date_created?Math.floor(this.menuNotificationSafeDate(message.date_created)/1e3):Math.floor(Date.now()/1e3);var expirationTimestamp=null;if(void 0!==message.date_expiration&&(expirationTimestamp=this.menuNotificationSafeDate(message.date_expiration)),"new_invite"===messageContent.key&&"invited"===messageContent.data.status)this.newFriendInviteListenersManager.callListeners(message.id,this.formatMessageData(messageContent.data),consumed,creationTimestamp,expirationTimestamp,updateTimestamp,isDownloaded);else if("new_friend"===messageContent.key){if("boolean"!=typeof messageContent.data.is_sender)throw new Error('Pusher notification "new_friend" should have "is_sender" in data. message content: '+message.content);!1===messageContent.data.is_sender&&this.friendAcceptedYourInviteListenersManager.callListeners(message.id,this.formatMessageData(messageContent.data),consumed,creationTimestamp,expirationTimestamp,updateTimestamp,isDownloaded)}},MenuFriendsTopicParser.prototype.parseRemovedTopicMessage=function(message){var messageContent=JSON.parse(message.content);this.notificationRemovedListenersManager.callListeners(messageContent.removed_by,messageContent[messageContent.removed_by])},MenuFriendsTopicParser.prototype.parseConsumedTopicMessage=function(message){var messageContent=JSON.parse(message.content);this.notificationConsumedListenersManager.callListeners(messageContent.id)},MenuFriendsTopicParser.prototype.registerRemovedTopicMessageListener=function(listener){return this.notificationRemovedListenersManager.addListener(listener)},MenuFriendsTopicParser.prototype.registerNewInviteListener=function(listener){return this.newFriendInviteListenersManager.addListener(listener)},MenuFriendsTopicParser.prototype.registerFriendAcceptedYourInviteListener=function(listener){return this.friendAcceptedYourInviteListenersManager.addListener(listener)},MenuFriendsTopicParser.prototype.registerNotificationConsumedListener=function(listener){return this.notificationConsumedListenersManager.addListener(listener)},MenuFriendsTopicParser.prototype.formatMessageData=function(messageData){return{userName:messageData.user.username,userAvatar:this.remomveFormatFromAvatarUrl(messageData.user.avatar.medium),userId:messageData.user.id,eventTimestamp:Math.floor(this.menuNotificationSafeDate(messageData.event_date)/1e3)}},MenuFriendsTopicParser.prototype.remomveFormatFromAvatarUrl=function(imageUrl){return imageUrl.split("_")[0]},MenuFriendsTopicParser.$inject=["listenersManager","menuNotificationSafeDate"],MenuFriendsTopicParser}();exports.MenuFriendsTopicParser=MenuFriendsTopicParser},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuFriendsTopicMediator=void 0;var MenuFriendsTopicMediator=function(){function MenuFriendsTopicMediator(pusherInterface,menuNotificationListLoad,menuFriendsTopicParser){this.menuFriendsTopicParser=menuFriendsTopicParser,pusherInterface.registerTopicConsumer("friends",this.parseTopicMessage.bind(this)),pusherInterface.registerTopicConsumer("friends:consumed",this.parseConsumedTopicMessage.bind(this)),pusherInterface.registerTopicConsumer("friends:removed",this.parseRemovedTopicMessage.bind(this)),menuNotificationListLoad.registerFullListBackendDataListener(this.filterMessagesFromBackendData.bind(this))}return MenuFriendsTopicMediator.prototype.filterMessagesFromBackendData=function(messages){for(var index=0;index<messages.length;index++)"friends"==messages[index].type&&this.parseTopicMessage({id:messages[index].id,content:messages[index].payload,consumed:messages[index].consumed,counter:messages[index].counter,date_created:messages[index].date_created,date_expiration:messages[index].date_expiration,date_updated:messages[index].date_updated},!0)},MenuFriendsTopicMediator.prototype.parseTopicMessage=function(message,isDownloaded){void 0===isDownloaded&&(isDownloaded=!1),this.menuFriendsTopicParser.parseTopicMessage(message,isDownloaded)},MenuFriendsTopicMediator.prototype.parseRemovedTopicMessage=function(message){this.menuFriendsTopicParser.parseRemovedTopicMessage(message)},MenuFriendsTopicMediator.prototype.parseConsumedTopicMessage=function(message){this.menuFriendsTopicParser.parseConsumedTopicMessage(message)},MenuFriendsTopicMediator.$inject=["pusherInterface","menuNotificationListLoad","menuFriendsTopicParser"],MenuFriendsTopicMediator}();exports.MenuFriendsTopicMediator=MenuFriendsTopicMediator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationsCtrl=void 0;var MenuNotificationsCtrl=function(){function MenuNotificationsCtrl(menuBasicUserData,menuNotificationsRepository,menuDropdown,$timeout,$window,menuNotificationAction,menuConfig,$filter){this.menuBasicUserData=menuBasicUserData,this.menuNotificationsRepository=menuNotificationsRepository,this.menuDropdown=menuDropdown,this.$timeout=$timeout,this.$window=$window,this.menuNotificationAction=menuNotificationAction,this.menuConfig=menuConfig,this.$filter=$filter,this.list=[],this.haveNewNotifications=!1,this.notificationsCount=0,this.notificationsCountLabel="0",this.lastUnconsumedNotificationsCount=0,this.newNotificationAnimation=!1,this.isVisible=!1,this.showEmptyNotificationsMessage=!0,this.unconsumedNotificationsCount=0,this.titleChangeTimeoutId=null,this.isBlinkingTitle=!1,this.originalDocumentTitle=this.$window.document.title,this.menuDropdown.registerVisibilityChangedListener(this.removeHighlight.bind(this)),this.menuDropdown.registerVisibilityChangedListener(this.consumeNotificationsIfExpanded.bind(this)),this.menuNotificationsRepository.registerNotificationsChangedListener(this.updateView.bind(this)),this.$window.addEventListener("focus",this.stopDocumentTitleBlinking.bind(this)),this.checkUserStatus(),this.menuBasicUserData.registerUserDataListener(this.checkUserStatus.bind(this))}return MenuNotificationsCtrl.prototype.parseLink=function(link){var hostRegEx=/\/\/[^\/]+\/([^\.]+)/;return hostRegEx.test(link)&&(link=link.match(hostRegEx)[1]),"/"==link[0]&&(link=link.substr(1)),this.menuConfig.gogWebsiteHostname+"/"+link},MenuNotificationsCtrl.prototype.deleteAllNotifications=function(){this.menuNotificationsRepository.deleteAllNotifications(),this.notificationsCount=0,this.resetDocumentTitle()},MenuNotificationsCtrl.prototype.consumeAllNotifications=function(){this.menuNotificationsRepository.consumeAllNotifications()},MenuNotificationsCtrl.prototype.executeActionForNotification=function(notificationId,$event){if("touchend"==$event.type){var redirectTo=this.parseLink(this.menuNotificationsRepository.getNotificationById(notificationId).link);this.menuNotificationAction.executeNotificationAction(notificationId,redirectTo)}else this.menuNotificationAction.executeNotificationAction(notificationId)},MenuNotificationsCtrl.prototype.consumeNotificationsIfExpanded=function(menuName,isExpanded){"notifications"==menuName&&isExpanded&&this.consumeAllNotifications()},MenuNotificationsCtrl.prototype.checkUserStatus=function(){this.menuBasicUserData.isUserLoggedIn()?this.isVisible=!0:this.isVisible=!1},MenuNotificationsCtrl.prototype.sortNotificationsList=function(notificationsList){return this.$filter("orderBy")(notificationsList,["-creationTimestamp"])},MenuNotificationsCtrl.prototype.playAnimation=function(){var _this=this;this.newNotificationAnimation=!0;this.$timeout(function(){_this.newNotificationAnimation=!1},2e3)},MenuNotificationsCtrl.prototype.removeHighlight=function(menuName,isExpanded){"notifications"==menuName&&isExpanded&&(this.haveNewNotifications=!1)},MenuNotificationsCtrl.prototype.stopDocumentTitleBlinking=function(){clearTimeout(this.titleChangeTimeoutId),this.titleChangeTimeoutId=null,this.isBlinkingTitle=!1,this.unconsumedNotificationsCount?this.updateDocumentTitle():this.resetDocumentTitle()},MenuNotificationsCtrl.prototype.resetDocumentTitle=function(){this.$window.document.title=this.originalDocumentTitle},MenuNotificationsCtrl.prototype.blinkDocumentTitle=function(){this.isBlinkingTitle=!0,null===this.titleChangeTimeoutId&&this.tickDocumentTitle()},MenuNotificationsCtrl.prototype.tickDocumentTitle=function(){this.$window.document.title===this.originalDocumentTitle?(this.updateDocumentTitle(),this.titleChangeTimeoutId=setTimeout(this.tickDocumentTitle.bind(this),7e3)):(this.resetDocumentTitle(),this.titleChangeTimeoutId=setTimeout(this.tickDocumentTitle.bind(this),2e3))},MenuNotificationsCtrl.prototype.updateDocumentTitle=function(){this.$window.document.title="["+this.notificationsCount+"] "+this.originalDocumentTitle},MenuNotificationsCtrl.prototype.setDocumentTitle=function(){!this.$window.document.hasFocus()&&this.unconsumedNotificationsCount?this.isBlinkingTitle?this.updateDocumentTitle():this.blinkDocumentTitle():this.unconsumedNotificationsCount?this.updateDocumentTitle():this.stopDocumentTitleBlinking()},MenuNotificationsCtrl.prototype.updateView=function(){this.list=this.sortNotificationsList(this.menuNotificationsRepository.getNotifications()),this.updateNotificationCounts(),this.showEmptyNotificationsMessage=!this.notificationsCount,this.unconsumedNotificationsCount=this.menuNotificationsRepository.getUnconsumedCount(),this.menuDropdown.isExpanded("notifications")||(this.notificationsCount>0?(this.haveNewNotifications=this.unconsumedNotificationsCount&&this.lastUnconsumedNotificationsCount<=this.unconsumedNotificationsCount,this.haveNewNotifications&&this.playAnimation()):this.haveNewNotifications=!1),this.setDocumentTitle(),this.lastUnconsumedNotificationsCount=this.unconsumedNotificationsCount},MenuNotificationsCtrl.prototype.updateNotificationCounts=function(){this.notificationsCount=this.menuNotificationsRepository.getTotalCount(),this.notificationsCount>99?this.notificationsCountLabel="99+":this.notificationsCountLabel=String(this.notificationsCount)},MenuNotificationsCtrl.$inject=["menuBasicUserData","menuNotificationsRepository","menuDropdown","$timeout","$window","menuNotificationAction","menuConfig","$filter"],MenuNotificationsCtrl}();exports.MenuNotificationsCtrl=MenuNotificationsCtrl},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationsRepository=void 0;var MenuNotificationsRepository=function(){function MenuNotificationsRepository(menuChatTopicParser,menuFriendsTopicParser,menuCustomTopicParser,announcementTopicParser,menuNotificationFactory,menuNotificationsClient,$timeout,menuChat,listenersManager){this.menuChatTopicParser=menuChatTopicParser,this.menuFriendsTopicParser=menuFriendsTopicParser,this.menuCustomTopicParser=menuCustomTopicParser,this.announcementTopicParser=announcementTopicParser,this.menuNotificationFactory=menuNotificationFactory,this.menuNotificationsClient=menuNotificationsClient,this.$timeout=$timeout,this.menuChat=menuChat,this.allNotifications=[],this.notificationsChangedListenersManager=listenersManager.getManager(),this.menuChatTopicParser.registerNewChatMessageListener(this.addChatNotification.bind(this)),this.menuChatTopicParser.registerChatMessageRemovedListener(this.removeNotification.bind(this)),this.menuChatTopicParser.registerChatMessageConsumedListener(this.markAsConsumedNotification.bind(this)),this.menuChatTopicParser.registerNewGameInviteListener(this.addGameInviteNotification.bind(this)),this.menuCustomTopicParser.registerNewWishlistNotificationListener(this.addWishlistNotification.bind(this)),this.menuCustomTopicParser.registerNewForumNotificationListener(this.addForumNotification.bind(this)),this.menuCustomTopicParser.registerNewGogAnnouncementNotificationListener(this.addGogAnnouncementNotification.bind(this)),this.menuCustomTopicParser.registerProductReleaseNotificationListener(this.addProductReleaseNotification.bind(this)),this.menuCustomTopicParser.registerNotificationRemovedListener(this.removeNotification.bind(this)),this.menuCustomTopicParser.registerNotificationConsumedListener(this.markAsConsumedNotification.bind(this)),this.menuFriendsTopicParser.registerNewInviteListener(this.addFriendInviteNotification.bind(this)),this.menuFriendsTopicParser.registerFriendAcceptedYourInviteListener(this.addNewFriendNotification.bind(this)),this.menuFriendsTopicParser.registerRemovedTopicMessageListener(this.removeNotification.bind(this)),this.menuFriendsTopicParser.registerNotificationConsumedListener(this.markAsConsumedNotification.bind(this)),this.announcementTopicParser.registerNewNotificationListener(this.addAnnouncementNotification.bind(this))}return MenuNotificationsRepository.prototype.registerNotificationsChangedListener=function(listener){return this.notificationsChangedListenersManager.addListener(listener)},MenuNotificationsRepository.prototype.getNotifications=function(){return this.allNotifications},MenuNotificationsRepository.prototype.getNotificationById=function(notificationId){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].id==notificationId)return this.allNotifications[index]},MenuNotificationsRepository.prototype.deleteAllNotifications=function(){for(var index=0;index<this.allNotifications.length;index++)this.menuNotificationsClient.deleteNotification(this.allNotifications[index].id);this.allNotifications.length=0,this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.consumeAllNotifications=function(){for(var index=0;index<this.allNotifications.length;index++)this.allNotifications[index].consumed||(this.menuNotificationsClient.consumeNotification(this.allNotifications[index].id),this.allNotifications[index].consumed=!0);this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.getUnconsumedCount=function(){for(var unconsumedCount=0,index=0;index<this.allNotifications.length;index++)this.allNotifications[index].consumed||unconsumedCount++;return unconsumedCount},MenuNotificationsRepository.prototype.getConsumedCount=function(){for(var consumedCount=0,index=0;index<this.allNotifications.length;index++)this.allNotifications[index].consumed&&consumedCount++;return consumedCount},MenuNotificationsRepository.prototype.getTotalCount=function(){return this.allNotifications.length},MenuNotificationsRepository.prototype.deleteNotificationById=function(notificationId){this.removeNotificationById(notificationId),this.menuNotificationsClient.deleteNotification(notificationId),this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.deleteNotificationsByIdsLocally=function(notificationIds){this.removeNotificationsByIds(notificationIds),this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.has=function(notificationId){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].id==notificationId)return!0;return!1},MenuNotificationsRepository.prototype.clearNotificationsRepositoryLocally=function(){this.allNotifications.length=0,this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.removeNotification=function(removedBy,id){switch(removedBy){case"id":this.removeNotificationById(id);break;case"unique_key":this.removeNotificationByUniqueKey(id)}this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.removeNotificationsByIds=function(notificationIds){for(var _i=0,notificationIds_1=notificationIds;_i<notificationIds_1.length;_i++){var notificationId=notificationIds_1[_i];this.removeNotificationById(notificationId)}},MenuNotificationsRepository.prototype.removeNotificationById=function(notificationId){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].id==notificationId)return void this.allNotifications.splice(index,1)},MenuNotificationsRepository.prototype.removeNotificationByUniqueKey=function(uniqueKey){var userId;switch(uniqueKey.split("-")[0]){case"chat_message":userId=uniqueKey.split("-")[1],this.removeSimilarNotificationsFromUser(userId,"new_chat_message");break;case"ni":userId=uniqueKey.split("-")[2],this.removeSimilarNotificationsFromUser(userId,"new_invite");break;case"game_invite":userId=uniqueKey.split("-")[1],this.removeSimilarNotificationsFromUser(userId,"new_game_invite")}},MenuNotificationsRepository.prototype.removeNotificationByUserId=function(userId){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].userId==userId)return this.allNotifications.splice(index,1),!0;return!1},MenuNotificationsRepository.prototype.markAsConsumedNotification=function(id){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].id==id)return this.allNotifications[index].consumed=!0,void this.notificationsChangedListenersManager.callListeners()},MenuNotificationsRepository.prototype.countSimilarNotificationsFromUser=function(userId,notificationType){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].userId==userId&&this.allNotifications[index].type==notificationType)return this.allNotifications[index].counter;return 0},MenuNotificationsRepository.prototype.countSimilarNotificationsFromForumThread=function(threadTitle,notificationType){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].type==notificationType&&this.allNotifications[index].threadTitle==threadTitle)return this.allNotifications[index].counter;return 0},MenuNotificationsRepository.prototype.removeSimilarNotificationsFromUser=function(userId,notificationType){var allNotificationsCopy=this.allNotifications.slice();return this.allNotifications=allNotificationsCopy.filter(function(notification){return notification.userId!=userId||notification.type!=notificationType}),!1},MenuNotificationsRepository.prototype.removeSimilarNotificationsFromForumThread=function(threadTitle,notificationType){for(var index=0;index<this.allNotifications.length;index++)if(this.allNotifications[index].type==notificationType&&this.allNotifications[index].threadTitle==threadTitle)return this.allNotifications.splice(index,1),!0;return!1},MenuNotificationsRepository.prototype.addWishlistNotification=function(id,discountedProducts,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){this.has(id)||(this.allNotifications.unshift(this.menuNotificationFactory.getWishlistItemDiscountedNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,discountedProducts)),this.notificationsChangedListenersManager.callListeners())},MenuNotificationsRepository.prototype.addAnnouncementNotification=function(id,key,content,consumed,langCode,creationTimestamp,expirationTimestamp,updateTimestamp){this.has(id)||(this.allNotifications.unshift(this.menuNotificationFactory.getAnnouncementNotification(id,key,content,consumed,langCode,creationTimestamp,expirationTimestamp,updateTimestamp)),this.notificationsChangedListenersManager.callListeners())},MenuNotificationsRepository.prototype.addForumNotification=function(id,forumNotification,consumed,counter,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var newForumReplyNotification=this.menuNotificationFactory.getForumReplyNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,forumNotification.userAvatarUrls,forumNotification.userName,forumNotification.userId,forumNotification.threadTitle,forumNotification.threadLink,counter,forumNotification.forumSlug,forumNotification.topicSlug),forumNotificationsFromSameThread=this.countSimilarNotificationsFromForumThread(newForumReplyNotification.threadTitle,newForumReplyNotification.type);this.removeSimilarNotificationsFromForumThread(newForumReplyNotification.threadTitle,newForumReplyNotification.type),0==newForumReplyNotification.counter&&(newForumReplyNotification.counter=1),newForumReplyNotification.counter=forumNotificationsFromSameThread?forumNotificationsFromSameThread+1:newForumReplyNotification.counter,this.allNotifications.unshift(newForumReplyNotification),this.notificationsChangedListenersManager.callListeners()}},MenuNotificationsRepository.prototype.addGogAnnouncementNotification=function(id,gogAnnouncementNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){this.has(id)||(this.allNotifications.unshift(this.menuNotificationFactory.getGogAnnouncementNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,gogAnnouncementNotification.announcement,gogAnnouncementNotification.background)),this.notificationsChangedListenersManager.callListeners())},MenuNotificationsRepository.prototype.addProductReleaseNotification=function(id,productReleaseNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){this.has(id)||(this.allNotifications.unshift(this.menuNotificationFactory.getProductReleaseNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,productReleaseNotification.link,productReleaseNotification.productTitle,productReleaseNotification.productId,productReleaseNotification.productIcon.full)),this.notificationsChangedListenersManager.callListeners())},MenuNotificationsRepository.prototype.addChatNotification=function(id,chatNotification,consumed,counter,creationTimestamp,expirationTimestamp,updateTimestamp){if(!this.has(id)){var newNotification=this.menuNotificationFactory.getChatNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,chatNotification.userAvatar,chatNotification.userName,chatNotification.userId,chatNotification.message,counter),chatNotificationsFromSameUser=this.countSimilarNotificationsFromUser(chatNotification.userId,newNotification.type);this.removeSimilarNotificationsFromUser(chatNotification.userId,newNotification.type),0==newNotification.counter&&(newNotification.counter=1),newNotification.counter=chatNotificationsFromSameUser?chatNotificationsFromSameUser+1:newNotification.counter,this.allNotifications.unshift(newNotification),this.menuChat.shouldShowChatNotificationForUser(chatNotification.userId)&&this.notificationsChangedListenersManager.callListeners()}},MenuNotificationsRepository.prototype.addGameInviteNotification=function(id,gameInviteNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){this.has(id)||(this.allNotifications.unshift(this.menuNotificationFactory.getGameInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,gameInviteNotification.userName,gameInviteNotification.userId,gameInviteNotification.productName,gameInviteNotification.productImages)),this.notificationsChangedListenersManager.callListeners())},MenuNotificationsRepository.prototype.addNewFriendNotification=function(id,friendNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){this.has(id)||(this.removeSimilarNotificationsFromUser(friendNotification.userId,"new_invite"),this.removeSimilarNotificationsFromUser(friendNotification.userId,"new_friend"),this.allNotifications.unshift(this.menuNotificationFactory.getNewFriendNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,friendNotification.userAvatar,friendNotification.userName,friendNotification.userId)),this.notificationsChangedListenersManager.callListeners())},MenuNotificationsRepository.prototype.addFriendInviteNotification=function(id,friendNotification,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){this.has(id)||(this.allNotifications.unshift(this.menuNotificationFactory.getNewFriendInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,friendNotification.userAvatar,friendNotification.userName,friendNotification.userId,friendNotification.eventTimestamp)),this.notificationsChangedListenersManager.callListeners())},MenuNotificationsRepository.$inject=["menuChatTopicParser","menuFriendsTopicParser","menuCustomTopicParser","announcementTopicParser","menuNotificationFactory","menuNotificationsClient","$timeout","menuChat","listenersManager"],MenuNotificationsRepository}();exports.MenuNotificationsRepository=MenuNotificationsRepository},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationFactory=void 0,exports.MenuNotificationFactory=function(){var Notification=function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp){this.id=id,this.consumed=consumed,this.creationTimestamp=creationTimestamp,this.expirationTimestamp=expirationTimestamp,this.updateTimestamp=updateTimestamp,this.icon="default",this.imageType="avatar",this.counter=0,this.creationTimestampMs=creationTimestamp+"000"},NewFriendInviteNotification=function(_super){function NewFriendInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,eventTimestamp){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userAvatar=userAvatar,_this.userName=userName,_this.userId=userId,_this.eventTimestamp=eventTimestamp,_this.description="",_this.title="",_this.username="",_this.image="",_this.link="",_this.type="new_invite",_this.icon="#icon-notification-question",_this.link="account/friends",_this.title=_this.userName,_this.image=_this.userAvatar,_this}return __extends(NewFriendInviteNotification,_super),NewFriendInviteNotification}(Notification),NewFriendNotification=function(_super){function NewFriendNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userAvatar=userAvatar,_this.userName=userName,_this.userId=userId,_this.description="",_this.title="",_this.username="",_this.image="",_this.link="",_this.type="new_friend",_this.icon="#icon-notification-friend",_this.link="u/"+_this.userName+"/chat",_this.title=_this.userName,_this.image=_this.userAvatar,_this}return __extends(NewFriendNotification,_super),NewFriendNotification}(Notification),ChatNotification=function(_super){function ChatNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,chatMessage,counter){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userAvatar=userAvatar,_this.userName=userName,_this.userId=userId,_this.chatMessage=chatMessage,_this.counter=counter,_this.description="",_this.title="",_this.image="",_this.link="",_this.type="new_chat_message",_this.icon="#icon-notification-chat",_this.link="u/"+_this.userName+"/chat",_this.description=_this.chatMessage,_this.title=_this.userName,_this.image=_this.userAvatar,_this}return __extends(ChatNotification,_super),ChatNotification}(Notification),GameInviteNotification=function(_super){function GameInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userName,userId,productName,productImages){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userName=userName,_this.userId=userId,_this.productName=productName,_this.productImages=productImages,_this.description="",_this.title="",_this.image="https://images.gog-statics.com/7e240f90c5fae6cfed0030d7e7d0f079d239225338cb42755e0074eb8bf4a5b3.png",_this.link="",_this.type="new_game_invite",_this.icon="#icon-notification-question",_this.imageType="gameIcon",_this.link="u/"+_this.userName+"/chat",_this.title=_this.productName,_this.description=_this.userName,null!==_this.productImages.menu_notification_av&&(_this.image="https:"+_this.productImages.menu_notification_av.split("_")[0]+".png"),_this}return __extends(GameInviteNotification,_super),GameInviteNotification}(Notification),WishlistItemDiscountedNotification=function(_super){function WishlistItemDiscountedNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,discountedProducts){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.discountedProducts=discountedProducts,_this.title="",_this.link="",_this.image="https://images.gog-statics.com/7e240f90c5fae6cfed0030d7e7d0f079d239225338cb42755e0074eb8bf4a5b3.png",_this.productsDiscountedCount=0,_this.type="wishlisted_products_discounted",_this.icon="#icon-notification-percentage",_this.imageType="gogLogo",_this.link="account/wishlist",_this.productsDiscountedCount=_this.discountedProducts.length,_this.title="GOG.com",_this}return __extends(WishlistItemDiscountedNotification,_super),WishlistItemDiscountedNotification}(Notification),GogAnnoucementNotification=function(_super){function GogAnnoucementNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,announcement,background){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.announcement=announcement,_this.background=background,_this.title="",_this.link="",_this.image="https://images.gog-statics.com/7e240f90c5fae6cfed0030d7e7d0f079d239225338cb42755e0074eb8bf4a5b3.png",_this.productsDiscountedCount=0,_this.description="",_this.hasBackground=!0,_this.isSpecial=!0,_this.type="new_gog_announcement",_this.icon="#icon-notification-percentage",_this.imageType="gogLogo",_this.link="account/wishlist",_this.title="GOG.com annouces",_this.description=_this.announcement,_this}return __extends(GogAnnoucementNotification,_super),GogAnnoucementNotification}(Notification),ForumReplyNotification=function(_super){function ForumReplyNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,threadTitle,link,counter,forumSlug,topicSlug){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.userAvatar=userAvatar,_this.userName=userName,_this.userId=userId,_this.threadTitle=threadTitle,_this.link=link,_this.counter=counter,_this.forumSlug=forumSlug,_this.topicSlug=topicSlug,_this.description="",_this.title="",_this.image="https://images.gog-statics.com/7e240f90c5fae6cfed0030d7e7d0f079d239225338cb42755e0074eb8bf4a5b3.png",_this.type="new_forum_reply",_this.icon="#icon-notification-chat",_this.imageType="gogLogo",_this.description=_this.threadTitle,_this.title=_this.userName,_this}return __extends(ForumReplyNotification,_super),ForumReplyNotification}(Notification),ProductReleaseNotification=function(_super){function ProductReleaseNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,link,productTitle,productId,productIcon){var _this=_super.call(this,id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp)||this;return _this.link=link,_this.productId=productId,_this.title="",_this.image="",_this.description="",_this.type="product_release",_this.icon="#icon-notification-checkmark",_this.imageType="gameIcon",_this.title=productTitle,0===productIcon.indexOf("//")?_this.image="https:"+productIcon:_this.image=productIcon,_this}return __extends(ProductReleaseNotification,_super),ProductReleaseNotification}(Notification);return{getChatNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,chatMessage,counter){return new ChatNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,chatMessage,counter)},getGameInviteNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userName,userId,productName,productImages){return new GameInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userName,userId,productName,productImages)},getWishlistItemDiscountedNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,discountedProducts){return new WishlistItemDiscountedNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,discountedProducts)},getGogAnnouncementNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,announcement,background){return new GogAnnoucementNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,announcement,background)},getProductReleaseNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,link,productTitle,productId,productIcon){return new ProductReleaseNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,link,productTitle,productId,productIcon)},getForumReplyNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,threadTitle,threadLink,counter,forumSlug,topicSlug){return new ForumReplyNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,threadTitle,threadLink,counter,forumSlug,topicSlug)},getNewFriendInviteNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,eventTimestamp){return new NewFriendInviteNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId,eventTimestamp)},getNewFriendNotification:function(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId){return new NewFriendNotification(id,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,userAvatar,userName,userId)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuCustomTopicMediator=void 0;var MenuCustomTopicMediator=function(){function MenuCustomTopicMediator(pusherInterface,menuNotificationListLoad,menuCustomTopicParser){this.menuCustomTopicParser=menuCustomTopicParser,pusherInterface.registerTopicConsumer("user_notification",this.parseTopicMessage.bind(this)),pusherInterface.registerTopicConsumer("user_notification:consumed",this.parseConsumedTopicMessage.bind(this)),pusherInterface.registerTopicConsumer("user_notification:removed",this.parseRemovedTopicMessage.bind(this)),menuNotificationListLoad.registerFullListBackendDataListener(this.filterMessagesFromBackendData.bind(this))}return MenuCustomTopicMediator.prototype.filterMessagesFromBackendData=function(messages){for(var index=0;index<messages.length;index++)"user_notification"==messages[index].type&&this.parseTopicMessage({id:messages[index].id,content:messages[index].payload,consumed:messages[index].consumed,date_created:messages[index].date_created,date_expiration:messages[index].date_expiration,date_updated:messages[index].date_updated,counter:messages[index].counter},!0)},MenuCustomTopicMediator.prototype.parseTopicMessage=function(message,isDownloaded){void 0===isDownloaded&&(isDownloaded=!1),this.menuCustomTopicParser.parseTopicMessage(message,isDownloaded)},MenuCustomTopicMediator.prototype.parseRemovedTopicMessage=function(message){this.menuCustomTopicParser.parseRemovedTopicMessage(message)},MenuCustomTopicMediator.prototype.parseConsumedTopicMessage=function(message){this.menuCustomTopicParser.parseConsumedTopicMessage(message)},MenuCustomTopicMediator.$inject=["pusherInterface","menuNotificationListLoad","menuCustomTopicParser"],MenuCustomTopicMediator}();exports.MenuCustomTopicMediator=MenuCustomTopicMediator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationsClient=void 0;var MenuNotificationsClient=function(){function MenuNotificationsClient(menuConfig,menuBasicUserData,$http,menuAccessToken,menuContainerAppClientId){this.menuConfig=menuConfig,this.menuBasicUserData=menuBasicUserData,this.$http=$http,this.menuAccessToken=menuAccessToken,this.menuContainerAppClientId=menuContainerAppClientId}return MenuNotificationsClient.prototype.fetchNewNotificationsList=function(clientId,userId,accessToken){var notificationsUrl=this.menuConfig.urls.notifications.getNotifications(clientId,userId,this.menuConfig.observedTopics,accessToken);return void 0!==this.currentFetchOfNewListData&&void 0!==this.currentFetchOfNewListData.promise&&this.currentFetchOfNewListData.forUrl===notificationsUrl?this.currentFetchOfNewListData.promise:(this.currentFetchOfNewListData={promise:this.$http.get(notificationsUrl),forUrl:notificationsUrl},this.currentFetchOfNewListData.promise.finally(this.onFetchNotificationsFinish.bind(this)),this.currentFetchOfNewListData.promise)},MenuNotificationsClient.prototype.deleteNotification=function(notificationId){var accessToken=this.menuAccessToken.getAccessToken(),clientId=this.menuContainerAppClientId.getClientId();if(!accessToken)throw new Error("Something went wrong with accessToken! Deleting notification aborted.");if(!this.menuBasicUserData.isUserLoggedIn())throw new Error("User is not logged in when trying to delete a user's notification. Something is clearly wrong!");this.$http.delete(this.menuConfig.urls.notifications.deleteNotification(notificationId,clientId,this.menuBasicUserData.getUserData().id,accessToken),{data:{}}).catch(this.deleteNotificationError.bind(this))},MenuNotificationsClient.prototype.consumeNotification=function(notificationId){var accessToken=this.menuAccessToken.getAccessToken(),clientId=this.menuContainerAppClientId.getClientId();if(!accessToken)throw new Error("Something went wrong with accessToken! Consuming notification aborted.");if(!this.menuBasicUserData.isUserLoggedIn())throw new Error("User is not logged in when trying to consume a user's notification. Something is clearly wrong!");this.$http.put(this.menuConfig.urls.notifications.consumeNotification(notificationId,clientId,this.menuBasicUserData.getUserData().id,accessToken),{consumed:!0}).catch(this.consumeNotificationError.bind(this))},MenuNotificationsClient.prototype.deleteNotificationError=function(response){throw new Error("Couldn't delete notification. Response: "+JSON.stringify(response))},MenuNotificationsClient.prototype.consumeNotificationError=function(response){throw new Error("Couldn't consume notification. Response: "+JSON.stringify(response))},MenuNotificationsClient.prototype.onFetchNotificationsFinish=function(){delete this.currentFetchOfNewListData},MenuNotificationsClient.$inject=["menuConfig","menuBasicUserData","$http","menuAccessToken","menuContainerAppClientId"],MenuNotificationsClient}();exports.MenuNotificationsClient=MenuNotificationsClient},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationExpiration=void 0;var MenuNotificationExpiration=function(){function MenuNotificationExpiration(listenersManager,menuNotificationsRepository,$timeout){this.menuNotificationsRepository=menuNotificationsRepository,this.$timeout=$timeout,this.expirationTimeouts=[],this.menuNotificationsRepository.registerNotificationsChangedListener(this.notificationsUpdated.bind(this))}return MenuNotificationExpiration.prototype.setNotificationExpiration=function(notificationId,expirationTimestamp){if(!this.hasExpirationSetForNotification(notificationId)&&null!=expirationTimestamp){var expiresIn=expirationTimestamp-Date.now();if(!(expiresIn>MenuNotificationExpiration.MAX_TIMEOUT)){var timeoutId=this.$timeout(this.removeExpiredNotification.bind(this,notificationId),expiresIn);this.expirationTimeouts.push({notificationId:notificationId,timeoutId:timeoutId})}}},MenuNotificationExpiration.prototype.notificationsUpdated=function(){for(var allNotifications=this.menuNotificationsRepository.getNotifications(),index=0;index<allNotifications.length;index++)if(allNotifications[index].hasOwnProperty("expirationTimestamp")){var notification=allNotifications[index];this.setNotificationExpiration(notification.id,notification.expirationTimestamp)}},MenuNotificationExpiration.prototype.hasExpirationSetForNotification=function(notificationId){for(var index=0;index<this.expirationTimeouts.length;index++)if(this.expirationTimeouts[index].notificationId==notificationId)return!0;return!1},MenuNotificationExpiration.prototype.removeExpiredNotification=function(notificationId){this.menuNotificationsRepository.deleteNotificationsByIdsLocally([notificationId])},MenuNotificationExpiration.$inject=["listenersManager","menuNotificationsRepository","$timeout"],MenuNotificationExpiration.MAX_TIMEOUT=2147483647,MenuNotificationExpiration}();exports.MenuNotificationExpiration=MenuNotificationExpiration},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationListLoad=void 0;var MenuNotificationListLoad=function(){function MenuNotificationListLoad(menuNotificationsClient,menuNotificationsRepository,pusherInterface,menuInternetConnectivityState,menuBasicUserData,menuContainerAppClientId,menuAccessToken,$q,listenersManager){this.menuNotificationsClient=menuNotificationsClient,this.menuNotificationsRepository=menuNotificationsRepository,this.pusherInterface=pusherInterface,this.menuInternetConnectivityState=menuInternetConnectivityState,this.menuBasicUserData=menuBasicUserData,this.menuContainerAppClientId=menuContainerAppClientId,this.menuAccessToken=menuAccessToken,this.$q=$q,this.notificationIdsWhenCalling=[],this.fullListBackendDataListenersManager=listenersManager.getManager(),this.lastPusherConnectionState=pusherInterface.getConnectionStatus(),this.lastUserId=this.getUserId(),this.lastAccessToken=menuAccessToken.getAccessToken();var clientIdIsDefined=null!==this.menuContainerAppClientId.getClientId();pusherInterface.registerConnectionStatusListener(this.onPusherConnectionChange.bind(this)),menuInternetConnectivityState.registerConnectivityChangeListener(this.onInternetConnectivityChange.bind(this)),menuBasicUserData.registerUserDataListener(this.onUserDataChange.bind(this)),menuAccessToken.registerAccessTokenListener(this.onAccessTokenChange.bind(this)),clientIdIsDefined||(this.clientIdListenerCanceller=menuContainerAppClientId.registerClientIdListener(this.onClientIdSet.bind(this))),this.reloadNotificationListIfPossibleNow()}return MenuNotificationListLoad.prototype.registerFullListBackendDataListener=function(listener){return this.fullListBackendDataListenersManager.addListener(listener)},MenuNotificationListLoad.prototype.getIsNotificationListFilledPromise=function(){return this.isNotificationListFilledDeferred.promise},MenuNotificationListLoad.prototype.onPusherConnectionChange=function(pusherConnectionState){var previousPusherConnectionState=this.lastPusherConnectionState;this.lastPusherConnectionState=pusherConnectionState,null===previousPusherConnectionState?"boolean"==typeof pusherConnectionState&&this.reloadNotificationListIfPossibleNow():!1===previousPusherConnectionState&&!0===pusherConnectionState&&this.reloadNotificationListIfPossibleNow()},MenuNotificationListLoad.prototype.onInternetConnectivityChange=function(isConnected){!0===isConnected&&this.reloadNotificationListIfPossibleNow()},MenuNotificationListLoad.prototype.onUserDataChange=function(){var newUserId=this.getUserId();newUserId!==this.lastUserId&&(this.lastUserId=newUserId,this.menuNotificationsRepository.clearNotificationsRepositoryLocally(),this.reloadNotificationListIfPossibleNow())},MenuNotificationListLoad.prototype.onClientIdSet=function(clientId){this.clientIdListenerCanceller(),delete this.clientIdListenerCanceller,this.reloadNotificationListIfPossibleNow()},MenuNotificationListLoad.prototype.onAccessTokenChange=function(){var newAccessToken=this.menuAccessToken.getAccessToken(),previousAccessToken=this.lastAccessToken;this.lastAccessToken=newAccessToken,null===previousAccessToken&&"string"==typeof newAccessToken&&this.reloadNotificationListIfPossibleNow()},MenuNotificationListLoad.prototype.getUserId=function(){return this.menuBasicUserData.isUserLoggedIn()?this.menuBasicUserData.getUserData().id:null},MenuNotificationListLoad.prototype.reloadNotificationListIfPossibleNow=function(){var accessToken=this.menuAccessToken.getAccessToken(),clientId=this.menuContainerAppClientId.getClientId(),userId=this.getUserId();if(void 0===this.isNotificationListFilledDeferred&&(this.isNotificationListFilledDeferred=this.$q.defer()),null!==this.pusherInterface.getConnectionStatus()&&"string"==typeof clientId&&"string"==typeof accessToken&&!0===this.menuInternetConnectivityState.isConnected()&&"string"==typeof userId){this.notificationIdsWhenCalling=[];for(var _i=0,notificationListWhenCalling_1=this.menuNotificationsRepository.getNotifications();_i<notificationListWhenCalling_1.length;_i++){var notification=notificationListWhenCalling_1[_i];this.notificationIdsWhenCalling.push(notification.id)}this.menuNotificationsClient.fetchNewNotificationsList(clientId,userId,accessToken).then(this.onListFromBackendSuccess.bind(this),this.onListFromBackendError.bind(this))}},MenuNotificationListLoad.prototype.onListFromBackendSuccess=function(response){this.menuNotificationsRepository.deleteNotificationsByIdsLocally(this.notificationIdsWhenCalling),this.fullListBackendDataListenersManager.callListeners(response.data.items),this.isNotificationListFilledDeferred.resolve()},MenuNotificationListLoad.prototype.onListFromBackendError=function(response){delete this.notificationIdsWhenCalling,this.isNotificationListFilledDeferred.reject("Couldn't fetch notification list from backend: "+JSON.stringify(response))},MenuNotificationListLoad.$inject=["menuNotificationsClient","menuNotificationsRepository","pusherInterface","menuInternetConnectivityState","menuBasicUserData","menuContainerAppClientId","menuAccessToken","$q","listenersManager"],MenuNotificationListLoad}();exports.MenuNotificationListLoad=MenuNotificationListLoad},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationRelatedPageEnter=void 0;var MenuNotificationRelatedPageEnter=function(){function MenuNotificationRelatedPageEnter(menuNotificationListLoad,menuNotificationsRepository,menuNotificationsClient,$window){this.menuNotificationListLoad=menuNotificationListLoad,this.menuNotificationsRepository=menuNotificationsRepository,this.menuNotificationsClient=menuNotificationsClient,$window.gogEventBus.subscribe("feed","displayed",this.onProfilesFeedEntered.bind(this))}return MenuNotificationRelatedPageEnter.prototype.onWebsiteWishlistEntered=function(){this.menuNotificationListLoad.getIsNotificationListFilledPromise().then(this.deleteWishlistNotifications.bind(this),this.onNotificationListFilledPromiseError.bind(this))},MenuNotificationRelatedPageEnter.prototype.onWebsiteForumTopicEntered=function(forumSlug,topicSlug){this.menuNotificationListLoad.getIsNotificationListFilledPromise().then(this.deleteForumReplyNotification.bind(this,forumSlug,topicSlug),this.onNotificationListFilledPromiseError.bind(this))},MenuNotificationRelatedPageEnter.prototype.onWebsiteGameCardEntered=function(productId){this.menuNotificationListLoad.getIsNotificationListFilledPromise().then(this.deleteProductReleaseNotification.bind(this,productId),this.onNotificationListFilledPromiseError.bind(this))},MenuNotificationRelatedPageEnter.prototype.onProfilesFeedEntered=function(){this.menuNotificationListLoad.getIsNotificationListFilledPromise().then(this.deleteActivityFeedNotifications.bind(this),this.onNotificationListFilledPromiseError.bind(this))},MenuNotificationRelatedPageEnter.prototype.deleteActivityFeedNotifications=function(){for(var allNotifications=this.menuNotificationsRepository.getNotifications(),index=0;index<allNotifications.length;index++){var notification=allNotifications[index];"unseen_activities"===notification.type&&this.menuNotificationsClient.deleteNotification(notification.id)}},MenuNotificationRelatedPageEnter.prototype.deleteWishlistNotifications=function(){for(var allNotifications=this.menuNotificationsRepository.getNotifications(),index=0;index<allNotifications.length;index++)"wishlisted_products_discounted"==allNotifications[index].type&&this.menuNotificationsClient.deleteNotification(allNotifications[index].id)},MenuNotificationRelatedPageEnter.prototype.deleteForumReplyNotification=function(forumSlug,topicSlug){for(var allNotifications=this.menuNotificationsRepository.getNotifications(),index=0;index<allNotifications.length;index++){var notification=allNotifications[index];"new_forum_reply"===notification.type&&notification.forumSlug==forumSlug&&notification.topicSlug==topicSlug&&this.menuNotificationsClient.deleteNotification(notification.id)}},MenuNotificationRelatedPageEnter.prototype.deleteProductReleaseNotification=function(productId){for(var allNotifications=this.menuNotificationsRepository.getNotifications(),index=0;index<allNotifications.length;index++){var notification=allNotifications[index];"product_release"===notification.type&&notification.productId===productId&&this.menuNotificationsClient.deleteNotification(notification.id)}},MenuNotificationRelatedPageEnter.prototype.onNotificationListFilledPromiseError=function(errorMessage){console.error(errorMessage)},MenuNotificationRelatedPageEnter.$inject=["menuNotificationListLoad","menuNotificationsRepository","menuNotificationsClient","$window"],MenuNotificationRelatedPageEnter}();exports.MenuNotificationRelatedPageEnter=MenuNotificationRelatedPageEnter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationActionProvider=void 0;var MenuNotificationWebsiteAction_1=__webpack_require__(157),MenuNotificationGalaxyAction_1=__webpack_require__(158),MenuNotificationActionProvider=function(){function MenuNotificationActionProvider(){this.$get=function(){throw new Error("MenuNotificationAction needs to have actions collection name specified")}}return MenuNotificationActionProvider.prototype.setActionsCollectionAsGalaxy=function(){this.$get=["menuNotificationsRepository","$window","menuGalaxyActions","menuConfig",function(menuNotificationsRepository,$window,menuGalaxyActions,menuConfig){return new MenuNotificationGalaxyAction_1.MenuNotificationGalaxyAction(menuNotificationsRepository,$window,menuGalaxyActions,menuConfig)}]},MenuNotificationActionProvider.prototype.setActionsCollectionAsWebsite=function(){this.$get=["menuNotificationsRepository","$window","menuConfig",function(menuNotificationsRepository,$window,menuConfig){return new MenuNotificationWebsiteAction_1.MenuNotificationWebsiteAction(menuNotificationsRepository,$window,menuConfig)}]},MenuNotificationActionProvider}();exports.MenuNotificationActionProvider=MenuNotificationActionProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationWebsiteAction=void 0;var MenuNotificationWebsiteAction=function(){function MenuNotificationWebsiteAction(menuNotificationsRepository,$window,menuConfig){this.menuNotificationsRepository=menuNotificationsRepository,this.$window=$window,this.menuConfig=menuConfig}return MenuNotificationWebsiteAction.prototype.executeNotificationAction=function(notificationId,redirectTo){void 0===redirectTo&&(redirectTo="");var notification=this.menuNotificationsRepository.getNotificationById(notificationId);-1!==MenuNotificationWebsiteAction.REMOVED_AFTER_CLICK_NOTIFICATIONS.indexOf(notification.type)&&this.menuNotificationsRepository.deleteNotificationById(notificationId),""!=redirectTo&&(this.$window.document.location.href=redirectTo)},MenuNotificationWebsiteAction.REMOVED_AFTER_CLICK_NOTIFICATIONS=["new_friend"],MenuNotificationWebsiteAction}();exports.MenuNotificationWebsiteAction=MenuNotificationWebsiteAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationGalaxyAction=void 0;var MenuNotificationGalaxyAction=function(){function MenuNotificationGalaxyAction(menuNotificationsRepository,$window,menuGalaxyActions,menuConfig){this.menuNotificationsRepository=menuNotificationsRepository,this.$window=$window,this.menuGalaxyActions=menuGalaxyActions,this.menuConfig=menuConfig}return MenuNotificationGalaxyAction.prototype.parseLink=function(link){var hostRegEx=/\/\/[^\/]+\/([^\.]+)/;return hostRegEx.test(link)&&(link=link.match(hostRegEx)[1]),"/"==link[0]&&(link=link.substr(1)),this.menuConfig.gogWebsiteHostname+"/"+link},MenuNotificationGalaxyAction.prototype.executeNotificationAction=function(notificationId,redirectTo){void 0===redirectTo&&(redirectTo="");var notification=this.menuNotificationsRepository.getNotificationById(notificationId);switch(notification.type){case"new_chat_message":case"new_game_invite":this.menuGalaxyActions.showChatForUser(notification.userName,notification.userId);break;case"new_friend":this.menuNotificationsRepository.deleteNotificationById(notificationId),this.menuGalaxyActions.showChatForUser(notification.userName,notification.userId);break;case"new_invite":this.menuGalaxyActions.showFriends();break;case"new_forum_reply":case"wishlisted_products_discounted":var wishlistedUrl=this.parseLink(notification.link);this.menuGalaxyActions.showInStoreFrame(wishlistedUrl);break;case"new_gog_announcement":console.warn("gogAnnouncementNotification is not yet implemented! No action in Galaxy to execute.");case"product_release":var releasedUrl=this.parseLink(notification.link);this.menuGalaxyActions.showInStoreFrame(releasedUrl);break;default:throw new Error("Unknown notification type to make action upon! "+notification.type)}},MenuNotificationGalaxyAction}();exports.MenuNotificationGalaxyAction=MenuNotificationGalaxyAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuChat=exports.MenuChatProvider=void 0;var MenuChatProvider=function(){function MenuChatProvider(){this.chatServiceName="",this.$get=function(){throw new Error("MenuChatProvider needs to have chat service and predicateMethod provided")}}return MenuChatProvider.prototype.setChatServiceName=function(chatServiceName){this.chatServiceName=chatServiceName},MenuChatProvider.prototype.setDisplayPredicateMethod=function(displayPredicateMethodName){this.$get=[this.chatServiceName,function(chatService){var menuChatService=new MenuChat(chatService);return menuChatService.setDisplayPredicateMethod(displayPredicateMethodName),menuChatService}]},MenuChatProvider}();exports.MenuChatProvider=MenuChatProvider;var MenuChat=function(){function MenuChat(chatService){this.chatService=chatService}return MenuChat.prototype.setDisplayPredicateMethod=function(methodName){this.displayPredicateMethodName=methodName},MenuChat.prototype.shouldShowChatNotificationForUser=function(userId){return this.chatService[this.displayPredicateMethodName](userId)},MenuChat}();exports.MenuChat=MenuChat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuNotificationSafeDate=void 0,exports.MenuNotificationSafeDate=function(){return function(isoDate){var dateParts=isoDate.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);return Date.UTC(parseInt(dateParts[1],10),parseInt(dateParts[2],10)-1,parseInt(dateParts[3],10),parseInt(dateParts[4],10),parseInt(dateParts[5],10),parseInt(dateParts[6],10))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnouncementTopicMediator=void 0;var AnnouncementTopicMediator=function(){function AnnouncementTopicMediator(pusherInterface,menuNotificationListLoad,announcementTopicParser,menuConfig){this.announcementTopicParser=announcementTopicParser,this.menuConfig=menuConfig,this.locale=this.menuConfig.getLocale(),pusherInterface.registerTopicConsumer("announcement",this.parseTopicMessage.bind(this)),menuNotificationListLoad.registerFullListBackendDataListener(this.filterMessagesFromBackendData.bind(this))}return AnnouncementTopicMediator.prototype.filterMessagesFromBackendData=function(messages){for(var _i=0,messages_1=messages;_i<messages_1.length;_i++){var message=messages_1[_i];if("announcement"===message.type){var announcementMessage=message;this.parseTopicMessage({id:announcementMessage.id,content:announcementMessage.payload,consumed:announcementMessage.consumed,lang_code:this.locale,date_created:announcementMessage.date_created,date_expiration:announcementMessage.date_expiration,date_updated:announcementMessage.date_updated})}}},AnnouncementTopicMediator.prototype.parseTopicMessage=function(message){message.lang_code=this.locale,this.announcementTopicParser.parseTopicMessage(message)},AnnouncementTopicMediator.$inject=["pusherInterface","menuNotificationListLoad","announcementTopicParser","menuConfig"],AnnouncementTopicMediator}();exports.AnnouncementTopicMediator=AnnouncementTopicMediator},function(module,exports,__webpack_require__){"use strict";var AnnouncementTopicKey;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnnouncementTopicParser=exports.AnnouncementTopicKey=void 0,function(AnnouncementTopicKey){AnnouncementTopicKey.Store="store"}(AnnouncementTopicKey=exports.AnnouncementTopicKey||(exports.AnnouncementTopicKey={}));var AnnouncementTopicParser=function(){function AnnouncementTopicParser(listenersManager){this.newNotificationListenersManager=listenersManager.getManager(),this.notificationRemovedListenersManager=listenersManager.getManager(),this.notificationConsumedListenersManager=listenersManager.getManager()}return AnnouncementTopicParser.prototype.registerNewNotificationListener=function(listener){return this.newNotificationListenersManager.addListener(listener)},AnnouncementTopicParser.prototype.registerNotificationRemovedListener=function(listener){return this.notificationRemovedListenersManager.addListener(listener)},AnnouncementTopicParser.prototype.registerNotificationConsumedListener=function(listener){return this.notificationConsumedListenersManager.addListener(listener)},AnnouncementTopicParser.prototype.parseTopicMessage=function(message){var content=JSON.parse(message.content),langCode="",consumed=!1;message.hasOwnProperty("consumed")&&(consumed=message.consumed),message.hasOwnProperty("lang_code")&&(langCode=message.lang_code);var updateTimestamp=null;void 0!==message.date_updated&&(updateTimestamp=Math.floor(this.dateIsoStringToTimestamp(message.date_updated)/1e3));var expirationTimestamp=null;void 0!==message.date_expiration&&(expirationTimestamp=this.dateIsoStringToTimestamp(message.date_expiration));var creationTimestamp=null;switch(creationTimestamp=void 0!==message.date_created?Math.floor(this.dateIsoStringToTimestamp(message.date_created)/1e3):Math.floor(Date.now()/1e3),content.key){case AnnouncementTopicKey.Store:this.newNotificationListenersManager.callListeners(message.id,content.key,content.data,consumed,langCode,creationTimestamp,expirationTimestamp,updateTimestamp);break;default:console.warn("Unknown presence topic key: "+content.key+" for topic: "+message.topic)}},AnnouncementTopicParser.prototype.parseRemovedTopicMessage=function(message){var messageContent=JSON.parse(message.content);this.notificationRemovedListenersManager.callListeners(messageContent.removed_by,messageContent[messageContent.removed_by],messageContent.id)},AnnouncementTopicParser.prototype.parseConsumedTopicMessage=function(message){var messageContent=JSON.parse(message.content);this.notificationConsumedListenersManager.callListeners(messageContent.id)},AnnouncementTopicParser.prototype.dateIsoStringToTimestamp=function(isoDate){var dateParts=isoDate.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/)||[];return Date.UTC(parseInt(dateParts[1],10),parseInt(dateParts[2],10)-1,parseInt(dateParts[3],10),parseInt(dateParts[4],10),parseInt(dateParts[5],10),parseInt(dateParts[6],10))},AnnouncementTopicParser.$inject=["listenersManager"],AnnouncementTopicParser}();exports.AnnouncementTopicParser=AnnouncementTopicParser},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuState=void 0;var MenuState=function(){return function(){this.isMenuSwipeOverlayVisible=!1}}();exports.MenuState=MenuState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuLanguageInUrl=void 0;var MenuLanguageInUrl=function(){function MenuLanguageInUrl($window){this.$window=$window,this.hasLanguageInUrl=!1,this.updateLanguageShortCode()}return MenuLanguageInUrl.prototype.updateLanguageShortCode=function(){this.currentUrlLangShortCode=this.getLanguageFromUrl(),this.hasLanguageInUrl="string"==typeof this.currentUrlLangShortCode},MenuLanguageInUrl.prototype.navigateToUrlWithLanguage=function(newLanguageCode){var regexMatch=this.$window.location.href.match(new RegExp("(/"+this.currentUrlLangShortCode+")(/|$)","i"));this.isValidLanguageCode(newLanguageCode)&&null!==regexMatch&&(this.$window.location.href=this.$window.location.href.replace("/"+this.currentUrlLangShortCode+regexMatch[2],"/"+newLanguageCode.split("-")[0]+regexMatch[2]))},MenuLanguageInUrl.prototype.getLanguageFromUrl=function(){for(var _i=0,_a=this.$window.footerMicroservice.availableLanguages;_i<_a.length;_i++){var langShortCode=_a[_i].code.split("-")[0];if(new RegExp("/"+langShortCode+"(/|$)","i").test(this.$window.location.href))return langShortCode}},MenuLanguageInUrl.prototype.isValidLanguageCode=function(languageCode){for(var _i=0,_a=this.$window.footerMicroservice.availableLanguages;_i<_a.length;_i++){if(_a[_i].code===languageCode)return!0}return!1},MenuLanguageInUrl.$inject=["$window"],MenuLanguageInUrl}();exports.MenuLanguageInUrl=MenuLanguageInUrl}]);
</script>

</body>
</html>
