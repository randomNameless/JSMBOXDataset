<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LazyBlockVideos-CyIhsvpb.html</title>
</head>
<body>

<script>
import{c as D,h as G,S as T}from"./vendor-BroXzQGG.js";import{_ as K}from"./LazyBlock.vue_vue_type_script_setup_true_lang-3kdFXy1e.js";import{aP as O,_ as w,ae as Q,W as X,s as h,R as k}from"./index-DJp284ij.js";import{u as H}from"./HomePage.store-hU9ZFaS6.js";import{U as j}from"./BaseBlock-NqlL-UqD.js";import{U as L}from"./SliderButton-BBEjJszp.js";import{l as S,C as n,B as v,T as b,U as M,E as r,x as I,k as B,H as q,I as F,D as U,K as u,u as d,J as m,S as E,L as _,W as J,V as Y,M as Z,r as x,s as ee}from"./vue-BTg2e_qy.js";import{U as se}from"./Slider-DKNYBKUM.js";import{U as ie}from"./AnnouncementInfo-BnLtJAKO.js";import"./chart.js-D7nawTmG.js";import"./chevron_left_16-BEkScU77.js";import"./chevron_right_16-DfiOCgpa.js";import"./AnnouncementInfo.vue_vue_type_style_index_0_lang.module-FrWjN4F0.js";const N=(i,e)=>{H().setVideosSlide(i,e)},oe=async i=>{var t;const l={blockId:i.blockId,projectKey:i.projectKey,limit:5,offset:i.activeSlide*5},s=await O(l);((t=s==null?void 0:s.blockResponse)==null?void 0:t.block)!==void 0&&N(s.blockResponse.block.announcements,i.activeSlide)},te=i=>{D(i)&&(document.location.href=i)},ne=S({__name:"sliderDots",props:{activeSlide:{},slideAmount:{}},setup(i){return(e,l)=>(n(),v("ul",{class:r(e.$style.sliderDotsList)},[(n(!0),v(b,null,M(e.slideAmount,(s,t)=>(n(),v("li",{key:`sliderDot_${t}`,class:r([e.$style.dot,t+1===e.activeSlide&&e.$style.active])},null,2))),128))],2))}}),le="sliderDotsList_x6E0z",ae="dot_x6E0z",de="active_x6E0z",re={sliderDotsList:le,dot:ae,active:de},ce={$style:re},ue=w(ne,[["__cssModules",ce]]),me={name:"svg-sprite-icon-icon-play_32-9401e7",props:{width:{required:!1,type:Number,default:32},height:{required:!1,type:Number,default:32}},render(){return I("svg",{width:this.width,height:this.height},[I("use",{"xlink:href":"/svg/sprite-d43c28.svg#icon-play_32-9401e7"})])}},ve=["href","target"],pe=S({__name:"VideoItem",props:{video:{},index:{},isMain:{type:Boolean},target:{default:"_blank"}},emits:["articleClicked","commentClicked","articleShow"],setup(i,{emit:e}){const l=B(()=>G(s.video.header)&&D(s.video.header.url)?"a":"div"),s=i,t=e,g=()=>{s.video.header!==void 0&&t("articleClicked",{announcementUrl:s.video.header.url,place:s.index+1})},c=()=>{s.video.header!==void 0&&t("commentClicked",{announcementUrl:s.video.header.url,place:s.index+1})},p={intersection:{once:!0,threshold:.5},onIntersection:()=>{s.video.header!==void 0&&t("articleShow",{announcementUrl:s.video.header.url,place:s.index+1})}};return(o,A)=>{const C=q("intersect");return o.video.header?F((n(),v("a",{key:0,href:o.video.header.url,target:o.target,class:r([o.$style.videoItem,o.isMain&&o.$style.main])},[U("a",{class:r(o.$style.imgWrap),onClick:g},[o.video.image?(n(),u(X,{key:0,class:r(o.$style.img),"aspect-ratio":d(Q).WIDE,image:o.video.image},null,8,["class","aspect-ratio","image"])):m("",!0),o.isMain?(n(),v("span",{key:1,class:r(o.$style.play)},[E(d(me))],2)):m("",!0)],2),U("div",{class:r(o.$style.wrap)},[o.video.header?(n(),u(Z(l.value),{key:0,href:o.video.header.url,target:o.target,class:r([o.$style.link]),onClick:g},{default:_(()=>[J(Y(o.video.header.text),1)]),_:1},8,["href","target","class"])):m("",!0),o.video.info?(n(),u(d(ie),{key:1,class:r(o.$style.info),"is-show-date":!1,info:o.video.info,"has-btn":!1,theme:"light",onCommentClicked:c},null,8,["class","info"])):m("",!0)],2)],10,ve)),[[C,p]]):m("",!0)}}}),he="videoItem_iu078",ke="link_iu078",fe="wrap_iu078",ye="img_iu078",ge="main_iu078",_e="info_iu078",Se="imgWrap_iu078",Ce="play_iu078",$e={videoItem:he,link:ke,wrap:fe,img:ye,main:ge,info:_e,imgWrap:Se,play:Ce},be={$style:$e},Me=w(pe,[["__cssModules",be]]),f="Видео (блок)",y="Продукт",Be=()=>{h("viewVideoBlockBlock",[y,k.PAGE_NAME,f,"Просмотр блок"])},Ue=()=>{h("clickVideoBlock",[y,k.PAGE_NAME,f,"Клик","undefined","undefined","Видео (заголовок)"])},Ee=i=>{const{announcementUrl:e,place:l}=i;h("viewVideoBlock",[y,k.PAGE_NAME,f,"Просмотр контент",e,`${l}`])},we=i=>{const{announcementUrl:e,place:l}=i;h("clickVideoBlock",[y,k.PAGE_NAME,f,"Клик",e,`${l}`,"Переход на материал"])},Ae=i=>{const{announcementUrl:e,place:l}=i;h("clickVideoBlock",[y,k.PAGE_NAME,f,"Клик",e,`${l}`,"Переход на комментарии"])},V=i=>{const e=i==="right"?"Листание вправо":"Листание влево";h("navVideoBlock",[y,k.PAGE_NAME,f,"Навигация","undefined","undefined",e])},Le=S({__name:"BlockVideos",props:{videosSlides:{},header:{},isMobile:{type:Boolean}},emits:["pagination"],setup(i,{emit:e}){const l=e,s=i,t=B(()=>s.header===void 0?{text:"",url:"",noindex:!1,target:""}:s.header),g=()=>{c.value!==s.videosSlides.length&&s.videosSlides[c.value].length===0&&l("pagination",c.value+1)},c=x(1),p=ee(),o=a=>{c.value=a.slide,a.direction==="left"&&g(),V(a.direction)},A=()=>{p.value&&p.value.moveToPrevSlide()},C=()=>{if(c.value===s.videosSlides.length){V("left"),te(t.value.url);return}p.value&&p.value.moveToNextSlide()},P=B(()=>c.value===1);return(a,Te)=>(n(),u(d(j),{header:t.value.text,href:t.value.url,theme:"dark",class:r(a.$style.videosBlock),onBlockShown:d(Be),onHeaderClicked:d(Ue)},{default:_(()=>[a.videosSlides.length?(n(),u(d(se),{key:0,ref_key:"slider",ref:p,onSlideChange:o},{default:_(()=>[(n(!0),v(b,null,M(a.videosSlides,(z,R)=>(n(),v("div",{key:`slide_${R}`,class:r([a.$style.slide])},[(n(!0),v(b,null,M(z,(W,$)=>(n(),u(d(Me),{key:`video_${$}`,"is-main":$===0,video:W,index:$,onArticleClicked:d(we),onArticleShow:d(Ee),onCommentClicked:d(Ae)},null,8,["is-main","video","index","onArticleClicked","onArticleShow","onCommentClicked"]))),128))],2))),128))]),_:1},512)):m("",!0),E(d(ue),{class:r(a.$style.dots),"active-slide":c.value,"slide-amount":a.videosSlides.length},null,8,["class","active-slide","slide-amount"]),U("div",{class:r(a.$style.btnWrap)},[P.value?m("",!0):(n(),u(L,{key:0,direction:"left",size:a.isMobile?"small":"large",onClick:A},null,8,["size"])),E(L,{class:r(a.$style.btn),direction:"right",size:a.isMobile?"small":"large",onClick:C},null,8,["class","size"])],2)]),_:1},8,["header","href","class","onBlockShown","onHeaderClicked"]))}}),Ie="videosBlock_LXQMU",Ve="slide_LXQMU",De="wrap_LXQMU",Ne="btnWrap_LXQMU",Pe="btn_LXQMU",ze="dots_LXQMU",Re={videosBlock:Ie,slide:Ve,wrap:De,btnWrap:Ne,btn:Pe,dots:ze},We={$style:Re},Ge=w(Le,[["__cssModules",We]]),ss=S({__name:"LazyBlockVideos",props:{block:{},videosSlides:{},isMobile:{type:Boolean},isLazy:{type:Boolean},payload:{}},setup(i){const e=i,l=async()=>{e.block!==void 0&&(N(e.block.announcements,1),await s(2))},s=async t=>{e.payload!==void 0&&await oe({blockId:e.payload.blockId,projectKey:e.payload.projectKey,activeSlide:t})};return(t,g)=>(n(),u(d(K),{onLazyLoad:l},{default:_(()=>[t.block&&d(T)(t.videosSlides)?(n(),u(Ge,{key:0,"videos-slides":t.videosSlides,header:t.block.header,"is-mobile":t.isMobile,onPagination:s},null,8,["videos-slides","header","is-mobile"])):m("",!0)]),_:1}))}});export{ss as default};

</script>

</body>
</html>
