<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3011.73152838229db77a.html</title>
</head>
<body>

<script>
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3011],{26545:function(p,_,o){"use strict";o.d(_,{ej:function(){return r},nJ:function(){return s}});var e=o(48094),t=o(90789);let r=p=>(0,e.ej)(p),s=function(p){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,t.tm)(window.location.host);(0,e.kT)(p,_,o)}},53011:function(p,_,o){"use strict";o.r(_);var e=o(85893),t=o(67294),r=o(56064),s=o(58827),n=o.n(s),u=o(489),i=o(39468),l=o(90789),a=o(48094),c=o(80309),d=o(5694);o(26545);let f={clickHouseShoot:i.F7,toggleVisibleTrialEndPopup:u.qr,fetchedTariffs:d.ZX},h=["/account","/payment_history","/auth","/password","/promos"," /support"];class m extends t.Component{componentDidUpdate(p){var _,o,e,t;let{clickHouseData:r}=this.props.systemInformation,{authData:s}=this.props.registration,n=h.find(p=>this.props.currentRoute.includes(p)),u=(0,a.ej)("showedTrialEndPopup");if(p.currentRoute!==this.props.currentRoute&&(this.clickHouseShoot=!1),n||this.clickHouseShoot||null==r||!r.account_id||!s||"EX_PROMO"!==s.type&&"EX_TRIAL"!==s.type||u||s.profile_for_child||(null===(_=s.mf_info)||void 0===_?void 0:_.is_mf)||(null===(o=s.subscriptions)||void 0===o?void 0:o.length)||(null===(e=s.externals)||void 0===e?void 0:e.length)||(null===(t=s.externals)||void 0===t?void 0:t.trial_is_available))s&&!this.clickHouseShoot&&(null==r?void 0:r.account_id)&&(this.clickHouseShoot=!0);else{this.clickHouseShoot=!0;let p={...r,action_id:"popupview",block_type:"popup",block_attributes_id:"trial_finished",event_time:new Date().getTime()};this.props.clickHouseShoot(this.apiUrl,this.apiKey,p),this.props.toggleVisibleTrialEndPopup(!0)}}render(){let{visibleTrialEndPopup:p}=this.props.toggle;return p?(0,e.jsx)("div",{className:"".concat(n().popup," ").concat(n().popup__trial__wrapper),onMouseDown:this.handleClickOutside,children:(0,e.jsxs)("div",{className:"".concat(n().popup__wrapper," ").concat(n().popup__trial),ref:p=>{this.popupWrapper=p},children:[(0,e.jsx)("div",{className:n().popup__close,onClick:()=>this.handler(!0),children:(0,e.jsx)("img",{src:"/static/images/popups/dismiss-white.svg"})}),(0,e.jsx)("div",{className:"".concat(n().popup__title),children:"Пробный период закончился"}),(0,e.jsxs)("div",{className:"".concat(n().popup__content),children:[(0,e.jsx)("div",{className:n().popup__text,children:"Оформите подписку, чтобы продолжить просмотр любимых сериалов"}),(0,e.jsx)("div",{onClick:()=>this.handler(),className:n().popup__button,children:"Оформить подписку"})]})]})}):null}constructor(...p){super(...p),this.clickHouseShoot=!1,this.isSubscribed=!1,this.apiUrl=this.props.systemInformation.API_URL||c.T5,this.apiKey=this.props.systemInformation.API_KEY||c.$h,this.handler=p=>{let{clickHouseData:_}=this.props.systemInformation,o={..._,action_id:"click",block_type:"popup",block_attributes_id:"trial_finished",element_type:"button",element_attributes_id:p?"cross":"subscribe",element_attributes_text:p?"":"Оформить подписку",event_time:new Date().getTime()};this.props.clickHouseShoot(this.apiUrl,this.apiKey,o),p||(0,a.d8)("trialEndForPayment",!0),p?this.closeHandler():this.fetchTariffs()},this.fetchTariffs=()=>{var p;let{authData:_}=this.props.registration,{configExps:o}=this.props.systemInformation,e=(null==_?void 0:null===(p=_.ab)||void 0===p?void 0:p.length)&&(null==_?void 0:_.current_country_code)==="RU"&&o.length?(0,a.I)(_.ab,o):"",t="".concat(this.apiUrl).concat(l.ve.getTariffs).concat(this.apiKey).concat(e);fetch(t,{credentials:"include",method:"GET"}).then(p=>{p.status<400&&p.json().then(p=>{this.props.fetchedTariffs(p);let _=p.find(p=>0==p.weight&&p.allow_trial);_&&(0,l.uK)({url:"".concat(this.apiUrl).concat(_.url).concat(this.apiKey)})}),this.closeHandler()})},this.closeHandler=()=>{this.props.toggleVisibleTrialEndPopup(!1),this.saveCookieLevel()},this.saveCookieLevel=()=>{let p=new Date;p.setTime(p.getTime()+864e5),p=p.toUTCString(),(0,a.d8)("showedTrialEndPopup",!0,{expires:p})},this.handleClickOutside=p=>{this.popupWrapper&&!this.popupWrapper.contains(p.target)&&this.closeHandler()}}}_.default=(0,r.$j)(p=>({systemInformation:p.systemInformation,registration:p.registration,toggle:p.toggle,profile:p.profile}),f)(m)},58827:function(p){p.exports={popup:"popups_popup__jtPgi",popup__wrapper:"popups_popup__wrapper__UFi2p","popup-form__wrapper":"popups_popup-form__wrapper__M0Cq1",popup__close:"popups_popup__close__uLF_x",popup__title:"popups_popup__title__OUnqr",popup__text:"popups_popup__text___vaHW","popup__text-left":"popups_popup__text-left__beCQA",popup__buttons:"popups_popup__buttons__EFX0h","popup__buttons-wrapper":"popups_popup__buttons-wrapper__nqnGb","popup__button-single":"popups_popup__button-single__Y_062",popup__button:"popups_popup__button__h4n_5","popup-form__submit":"popups_popup-form__submit__mH3cx",disabled:"popups_disabled__hjM3S",spinner:"popups_spinner__AXQ1_","popup__button-submit":"popups_popup__button-submit__oBGlz","popup__button-info":"popups_popup__button-info__IFxp9","popup__button-cancel":"popups_popup__button-cancel__DOTTC","popup__button-disable":"popups_popup__button-disable__GgwMb","popup__content-mail":"popups_popup__content-mail__zXaK5","popup__content-phone":"popups_popup__content-phone__uZQJS","popup__content-vk":"popups_popup__content-vk__Lni5S","popup__content-circle":"popups_popup__content-circle__sXmAX","popup__content-telegram":"popups_popup__content-telegram__zz3jk",popup__trial__wrapper:"popups_popup__trial__wrapper__m_LNt",popup__trial:"popups_popup__trial__5I6X8",popup__content:"popups_popup__content__peLCI",popup__need_email:"popups_popup__need_email__zVixq",popup__image:"popups_popup__image__tAJZX","popup-devices__wrapper":"popups_popup-devices__wrapper__Pd_j5","popup-devices__close":"popups_popup-devices__close__BmJI2","popup-devices__title":"popups_popup-devices__title__B1an0","popup-devices__text":"popups_popup-devices__text__RPWfz","popup-devices__content":"popups_popup-devices__content__rKt1V","popup-devices__button":"popups_popup-devices__button__KrUMi",delete_popup_devices:"popups_delete_popup_devices__pUx2d",delete_popup_devices__wrapper:"popups_delete_popup_devices__wrapper__Vae3G",delete_popup_devices__title:"popups_delete_popup_devices__title__PSMUj",delete_popup_devices__text:"popups_delete_popup_devices__text__QUTHz",delete_popup_devices__close:"popups_delete_popup_devices__close__VgH1B",forceApp:"popups_forceApp__EHFJR",forceApp__wrapper:"popups_forceApp__wrapper__8BbQa",forceApp__close:"popups_forceApp__close__5853Q",forceApp__stores:"popups_forceApp__stores__FLfvj",forceApp__phone:"popups_forceApp__phone__25Htj",forceApp__content:"popups_forceApp__content__eTtg9",forceApp__content__title:"popups_forceApp__content__title__PrJFL",forceApp__content__button:"popups_forceApp__content__button__VTVhm",forceApp__content__button__secondary:"popups_forceApp__content__button__secondary__OqJGO",nalp:"popups_nalp__rYw1H",nalp__wrapper:"popups_nalp__wrapper__dyHzJ",nalp__title:"popups_nalp__title__UnGZY",nalp__text:"popups_nalp__text__zRmXi",nalp__submit:"popups_nalp__submit__GV5hQ",nalp__cancel:"popups_nalp__cancel__agEbT",parentalControl:"popups_parentalControl__EXl91",parentalControl__wrapper:"popups_parentalControl__wrapper__Fy4B4",parentalControl__title:"popups_parentalControl__title__1ZZeI",parentalControl__noWrap:"popups_parentalControl__noWrap___MVZn",parentalControl__description:"popups_parentalControl__description__z_Wmr",parentalControl__button:"popups_parentalControl__button__mzB17",parentalControl__no:"popups_parentalControl__no__DDS7a",parentalControl__yes:"popups_parentalControl__yes__v_Dx3",parentalControl__tip:"popups_parentalControl__tip___U5qK",parentalControl__pin:"popups_parentalControl__pin__mtrzb",parentalControl__inputs:"popups_parentalControl__inputs__ZiJPl",parentalControl__input:"popups_parentalControl__input__yitaE",parentalControl__errorWrap:"popups_parentalControl__errorWrap__6km0h",parentalControl__error:"popups_parentalControl__error__OYRG_",parentalControl__forgot:"popups_parentalControl__forgot__oYFbt",parentalControl__cross:"popups_parentalControl__cross__dUHhZ",parentalControl__menu:"popups_parentalControl__menu__HI_x6",parentalControl__mItem:"popups_parentalControl__mItem__vcuSP",mActive:"popups_mActive__m3YJZ",parentalControl__cText:"popups_parentalControl__cText__87jF3",close:"popups_close__Qh9vm",close__wrapper:"popups_close__wrapper__YZGF8",close__title:"popups_close__title__MNJIx",close__descr:"popups_close__descr__Vys7_",close__button:"popups_close__button__IIS6v",forceApp__fade:"popups_forceApp__fade__bklW9",forceApp__light:"popups_forceApp__light__JEc0M",forceApp__logo:"popups_forceApp__logo__zCZJZ",forceApp__content__container:"popups_forceApp__content__container____C0h",forceApp__content__advantage:"popups_forceApp__content__advantage__dfhxo","popup-form__element":"popups_popup-form__element__kYYNi",password_hint:"popups_password_hint__Tde5d","popup-form__element-title":"popups_popup-form__element-title__SmLn_","popup-form__input":"popups_popup-form__input__GSOWk","popup-form__error-message":"popups_popup-form__error-message__9dwjb","popup-form__suggestion":"popups_popup-form__suggestion__EsTtt","popup-form__message":"popups_popup-form__message__DQGH9","popup-form__forgot":"popups_popup-form__forgot__UpwIR","popup-form__failed":"popups_popup-form__failed__zrQDf","popup-form__error":"popups_popup-form__error__ZhNtX","popup-form__register":"popups_popup-form__register__Fexh_","popup-profile__wrapper":"popups_popup-profile__wrapper__hu6SZ","popup-profile__content":"popups_popup-profile__content__tMEOD","popup-profile__content-left":"popups_popup-profile__content-left__Eg9_R","popup-profile__delete":"popups_popup-profile__delete__HN6mW","popup-profile__content-right":"popups_popup-profile__content-right___uv0t","popup-profile__avatar":"popups_popup-profile__avatar__K_j_8","popup-profile__delete-avatar":"popups_popup-profile__delete-avatar__IpQDE","popup-profile__none":"popups_popup-profile__none__aCnFJ","popup-profile__avatar-list":"popups_popup-profile__avatar-list__IiMkX","popup-profile__avatar-list-triangle":"popups_popup-profile__avatar-list-triangle__okdmk","popup-profile__avatar-cansel":"popups_popup-profile__avatar-cansel__ZuOFO","popup-profile__gender":"popups_popup-profile__gender__x54o8",profile_gender_changed_svg:"popups_profile_gender_changed_svg__bmKBf",profile_gender_set_svg:"popups_profile_gender_set_svg__MpJRq","popup-profile__gender-item":"popups_popup-profile__gender-item__x8Mfd","popup-profile__gender-changed":"popups_popup-profile__gender-changed__TxB5L","popup-profile__gender-set":"popups_popup-profile__gender-set__dSLls","popup-profile__gender-disabled":"popups_popup-profile__gender-disabled__h82G_","popup-profile__birthday":"popups_popup-profile__birthday__VXLCV","popup-profile__birthday-disabled":"popups_popup-profile__birthday-disabled__r9YC9","popup-profile__birthday-input":"popups_popup-profile__birthday-input__f7Bp2","popup-profile__birthday-error":"popups_popup-profile__birthday-error___AQ_B","popup-profile__attention-title":"popups_popup-profile__attention-title__pW95T","popup-profile__attention":"popups_popup-profile__attention__ohQ5P","social-text__content":"popups_social-text__content__HCiZF","social-text__button":"popups_social-text__button__3tS2v",ttk:"popups_ttk__DzsZp","desktop-view":"popups_desktop-view__ZKGTD","mobile-view":"popups_mobile-view__j6Lj1",ttk__content:"popups_ttk__content__DopMy",ttk__close:"popups_ttk__close__WsZSJ",ttk__image:"popups_ttk__image__Vfj_9",ttk__text:"popups_ttk__text__XE_kR",ttk__title:"popups_ttk__title__G9mJP",ttk__description:"popups_ttk__description__PHTK1","check-age":"popups_check-age__7CNeE","check-age__conent":"popups_check-age__conent__BtNJE","check-age__img":"popups_check-age__img__Gl4Hd","check-age__header":"popups_check-age__header__jnBHu","check-age__text":"popups_check-age__text__3sKIp","check-age__buttons-wrapper":"popups_check-age__buttons-wrapper__WQvKg","check-age__button-agree":"popups_check-age__button-agree__7tM5O","check-age__button-disargee":"popups_check-age__button-disargee___MyAm","account-popup":"popups_account-popup__J2kDx"}}}]);
</script>

</body>
</html>
