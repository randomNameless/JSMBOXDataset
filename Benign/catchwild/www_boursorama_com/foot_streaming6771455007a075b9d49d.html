<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>foot_streaming6771455007a075b9d49d.html</title>
</head>
<body>

<script>
(()=>{(self.webpackChunkweb_fr_portal_20=self.webpackChunkweb_fr_portal_20||[]).push([[3650],{8773:function(D,L,v){"use strict";var s=v(7911),l=v.n(s),I=v(3343),a=v.n(I)},3343:function(D,L,v){var s=v(4692);s(function(){var l=function(){},I=BRS_CONFIG.debug?console:{info:l,warn:l,log:l,trace:l,error:l},a="feedStreaming:disabled",o=!!sessionStorage.getItem(a),c=s(document).find(".c-faceplate__actions--streaming .c-switch__checkbox"),g=60*60,u=5e3,C="/streaming/bootstrap";if(!window.WebSocket){I.warn("feed.streaming","WebSocket not available, streaming require WebSocket, stop");return}o?c.removeAttr("checked"):c.attr("checked","checked");var d=function(){c.length?c.is(":checked")?(s.feedStreaming().start(),sessionStorage.removeItem(a)):(s.feedStreaming().stop(),sessionStorage.setItem(a,1)):o?s.feedStreaming().stop():s.feedStreaming().start()},S=function(){return BRS_USER_CONFIG.USER_HASH},E=function(){return BRS_CONFIG.JWT_TOKEN_ID},O=function(){return s.cookie(E())},R=function(t){if(typeof t!="string"||(t=t.split("."),t.length!==3))return!1;try{t=JSON.parse(atob(t[1]))}catch(e){return!1}return typeof t.scopes!="string"?!1:t.session&&t.session.level==="CUSTOMER"&&t.scopes.split(";").indexOf("ROLE_CUSTOMER")>=0||t.session.level==="MEMBER"&&t.scopes.split(";").indexOf("ROLE_MEMBER")>=0},x=function(t){try{var e={config:t,created:Date.now(),sso:E(),userHash:S()};localStorage.setItem("brs_streaming",JSON.stringify(e))}catch(n){}},P=function(){try{var t=JSON.parse(localStorage.getItem("brs_streaming"));return S()!=t.userHash||E()!=t.sso||!t.created||t.created+1e3*g<=Date.now()?(p(),null):t.config}catch(e){}},p=function(){try{localStorage.removeItem("brs_streaming")}catch(t){}},j=function(){try{return localStorage.getItem("brs_streaming_start")}catch(t){console.error(t)}return null},h=function(t){try{localStorage.setItem("brs_streaming_start",t)}catch(e){console.error(e)}},b=function(t){if(!t||!t.quotaPeriod||!t.quotaLimit)return!0;var e=j(),n,i=new Date;if(n=new Date(parseInt(e)),e==null||i-n>t.quotaPeriod*1e3)h(Date.now());else if(i-n>t.quotaLimit*1e3)return!1;return!0},V=function(t,e){if((!e.filterExchangeCodes||e.filterExchangeCodes.length==0)&&(!e.filterSymbols||e.filterSymbols.length==0))return t;var n={};for(var i in t){if(e.filterExchangeCodes&&e.filterExchangeCodes.indexOf(t[i].exchangeCode)!=-1){n[i]=t[i];continue}if(e.filterSymbols&&e.filterSymbols.indexOf(i)!=-1){n[i]=t[i];continue}}return n},M=function(t){var e=P();e?t(e):B(function(n){x(n),t(n)})},B=function(t){s.ajax({url:S()!==null?C+"?hash="+S():C,context:document.body,success:function(e){typeof e.config!="undefined"?t(e.config):console.warn("No valid response could be retrieved, streaming won't start")}})};s(document).on("feedstreaming:connection_timeout",function(){s.feedStreaming().stop().then(function(){setTimeout(function(){s.feedStreaming().start()},u)})}),s(document).on("feedstreaming:access_denied notificationstreaming:access_denied",function(){p(),M(function(t){R(O())&&(t.notificationsJwt=O()),s.feedStreaming(t),setTimeout(function(){s.feedStreaming().start()},t.startOffset)})}),s(document).on("notificationstreaming:modal",function(t,e){window.location.href="/avertissement/avertissement"});let m={};s(document).on("notificationstreaming:message",function(t,e){if(e.message){let n=5e3;const i=(e.message||"").match(/data-expire="([^"]+)"/);if(i){const r=Date.parse(i[1]);isNaN(r)||(n=Math.max(n,r-Date.now()))}if(m[e.message])return;m[e.message]=s.toast({heading:"Message de "+BRS_CONFIG.MARKETING_NAME,text:e.message,allowToastClose:!0,icon:"success",hideAfter:n,position:"bottom-right",stack:5,loader:!1,afterHidden:function(){delete m[e.message]}})}});var w=function(t,e){s.feedStreaming(t),b(t)&&setTimeout(function(){var n=s(e).find("[data-feed-streaming-registry]:last").data("feedStreamingRegistry")||{};s(e).find("[data-ist-init]").each(function(i,r){var f=s(r).data("istInit");n[f.symbol]=s.extend({},n[f.symbol],f)}),s.feedStreaming("register",e,V(n,t)),c.on("change",d),d()},t.startOffset)};s(document).on("load",function(t,e){M(function(n){R(O())&&(n.notificationsJwt=O(),n.notificationsOrigin="portal"),w(n,e)})})})},7911:function(D,L,v){var s=v(9227),l=v(4353),I=v(4692);(function(a){try{s.register("locale","fr",{delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){return t===1?"er":"e"},currency:{symbol:"\u20AC"}})}catch(t){}s.locale("fr");var o={transport:null},c=!!sessionStorage.getItem("feedStreaming:debug"),g,u={login:null,password:null,notificationsJwt:null,notificationsOrigin:null,bufferedRenderingLoopDelay:500,uri:(document.location+"").replace(/^http/,"ws").split("/").slice(0,3).join("/"),highlightDelay:500,restartDelay:3e3,restartLimit:10,highlightClass:"js-feed-streaming-highlight",idleThreshold:30*60*1e3,idleInBackgroundThreshold:10*1e3},C=!1,d={},S={},E={},O={},R={},x=[],P=!1,p=0,j=!1,h={symbols:{}},b={},V={USD:"$",EUR:"\u20AC"},M=["ask-quantity","ask-price","ask-size","bid-quantity","bid-price","bid-size"],B=["volume","last","variation","instant-variation","currency","high","low","last-trade-datetime","last-transactions","orderbook","variation-indicator"],m,w=function(t){return t.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};a("[data-ist-last-transactions]").each(function(){var t=a(this).data("istLastTransactions");t||(t=10),a(this).on("feedstreaming:update",function(){a(this).find("[data-ist-transaction]").slice(t).remove()})}),o.computeLive=function(t,e){var n=d[t],i={},r={};if(e.last!==void 0&&e.last!==n.last&&(e.factor!==void 0&&!isNaN(parseFloat(e.factor))&&(e.last*=e.factor),n.variation=(e.last-n.prevClose)/n.prevClose,n.instantVariation+=(e.last-n.last)/n.last,i.variation=n.variation,i.instantVariation=n.instantVariation,i.last=n.last=e.last,e.last>n.high&&(n.high=i.high=e.last),e.last<n.low&&(n.low=i.low=e.last)),e.volume!==void 0&&e.volume!==n.volume&&(n.volume=e.volume,i.volume=e.volume),e.tradeTime&&(n.lastTradeDatetime=e.tradeTime,i.lastTradeDatetime=l(l().format("YYYY-MM-DD ")+e.tradeTime).toDate()),e.tradeVolume&&e.tradeTime&&e.last){i.transactions=i.transactions||[];var f={tradeVolume:e.tradeVolume,lastTradeDatetime:e.tradeTime,last:e.last};i.transactions.push(f),l(n.lastTradeDatetime).format("YYYY-MM-DD HH:mm:ss")<l().format("YYYY-MM-DD ")+e.tradeTime&&(n.lastTradeDatetime=i.lastTradeDatetime=l(l().format("YYYY-MM-DD ")+e.tradeTime).toDate()),a(document).trigger("feedstreaming:newtransaction",Object.assign({symbol:t},f))}return o.computeIntraday(t,e),i},o.computeBook=function(t,e){var n=d[t],i={},r=parseInt(e.bookRow,10);return delete e.bookRow,n.orderbook.lines[r]=a.extend({},n.orderbook.lines[r],e),i.orderbook=[],i.orderbook[r]=n.orderbook.lines[r],i.orderbook[r].askPrice==-2&&(i.orderbook[r].askPrice="MX"),i.orderbook[r].bidPrice==-2&&(i.orderbook[r].bidPrice="MX"),isNaN(i.orderbook[r].askPrice)&&i.orderbook[r].askPrice!=="MX"&&delete i.orderbook[r].askPrice,isNaN(i.orderbook[r].askQuantity)&&delete i.orderbook[r].askQuantity,isNaN(i.orderbook[r].bidPrice)&&i.orderbook[r].bidPrice!=="MX"&&delete i.orderbook[r].bidPrice,isNaN(i.orderbook[r].bidQuantity)&&delete i.orderbook[r].bidQuantity,i},o.computeIntraday=function(t,e){var n=d[t],i,r;e.tradeTime&&(b[t]=b[t]?b[t]:{volume:0,openingLast:n.last,last:n.last,high:n.last,low:n.last,closeLast:n.last,prevClose:n.prevClose,lastTradeDatetime:null},i=b[t],i.closeLast=e.last,i.high=Math.max(i.last,i.high),i.low=Math.min(i.last,i.low),i.volume+=parseInt(e.tradeVolume,10),i.timestamp=l(e.tradeTime,"HH:mm:ss").format())},o.intradayRenderingLoop=function(){Object.keys(b).forEach(function(t){var e=b[t],n;delete b[t],a(document).trigger("feedstreaming:intraday",{symbol:t,intraday:e})})},o.bufferedRendering=function(t,e){var n;return h.symbols[t]||(h.symbols[t]={transactions:[],orderbook:[]}),n=h.symbols[t],e.orderbook&&(a.extend(n.orderbook,e.orderbook),delete e.orderbook),a.extend(n,e),e.transaction&&(n.transactions.push(e.transaction),delete e.transaction,delete n.transaction),h.isRunning?!1:(h.isRunning=!0,h.timeoutId=setTimeout(function(){Object.keys(h.symbols).forEach(function(i){o.render(i,h.symbols[i]),delete h.symbols[i]}),h.isRunning=!1},u.bufferedRenderingLoopDelay),!0)},o.isConnected=function(){return!!o.socket},o.render=function(t,e){var n,i=d[t],r=d[t].elements,f,k,y,Q,T;if(!i)return c&&console.error("streaming.render","Invalid data for symbol "+t),!1;if(T="0,0."+Array(i.decimals+1).join("0"),a(document).trigger("feedstreaming:render",{symbol:t,changes:e,feedData:d[t]}),n=d[t].elements,c&&console.log("instrument.render",t,e),e.volume!==void 0&&o.highlight(n.volume,e.volume,"0,0"),e.tradeTime!==void 0&&o.highlight(n.lastTradeDatetime,e.lastTradeDatetime,"0,0"),e.last!==void 0&&(o.highlight(n.last,e.last,T,{way:e.instantVariation}),e.variation<0?(n.variation.addClass("u-color-stream-down").removeClass("u-color-stream-up"),n.variationIndicator.addClass("is-negative").removeClass("is-positive")):e.variation>0?(n.variation.addClass("u-color-stream-up").removeClass("u-color-stream-down"),n.variationIndicator.addClass("is-positive").removeClass("is-negative")):(n.variation.removeClass("u-color-stream-up").removeClass("u-color-stream-down"),n.variationIndicator.removeClass("is-negative").removeClass("is-positive")),o.highlight(n.variation,e.variation,"+0.00%",{way:e.instantVariation})),e.high!==void 0&&o.highlight(n.high,e.high,T),e.low!==void 0&&o.highlight(n.low,e.low,T),e.transactions.length){if(!n.lastTransactions)return;var F=n.lastTransactions.find("div.data-instrument-currency-symbol"),W=e.transactions.slice(0),_;for(typeof F=="undefined"?F="\u20AC":F=F.text();f=W.shift();)c&&console.log("streaming.add_transaction",f),y=n.lastTransactions.find("tbody"),_=y.find("[data-ist-transaction]:first").clone(),_.find("[data-ist-transaction-date]").html(f.lastTradeDatetime),_.find("[data-ist-transaction-volume]").html(s(f.tradeVolume).format()),_.find("[data-ist-transaction-value]").html(s(f.last).format(T)),y.prepend(_),_.addClass("js-feed-streaming-highlight"),window.setTimeout(function(){_.removeClass("js-feed-streaming-highlight")},400),_.length&&a(document).trigger("load",_);a(document).trigger("feedstreaming:addtransactions",e.transactions),a(n.lastTransactions).trigger("feedstreaming:update",e.transactions)}return e.orderbook&&e.orderbook.length&&(o.computeSumForOrderbook(t),r.orderbook.each(function(){var H=a(this);M.forEach(function(A){var Y=w(A),U=A.match(/price/i)?T:"0,0";Object.keys(e.orderbook).forEach(function(N){var q=H.find("[data-ist-orderbook-lines] tr:eq("+N+"), [data-ist-orderbook-line]:eq("+N+")");(i.orderbook.lines[N][Y]=="MX"||!i.orderbook.lines[N][Y])&&(U=!1),o.highlight(q.find("[data-ist-"+A+"]"),i.orderbook.lines[N][Y],U)}),o.highlight(H.find("[data-ist-summary-"+A+"]"),i.orderbook.summary[Y],U)})}),i.orderbook.symbol=i.symbol,a(document).trigger("feedstreaming:updateorderbook",i.orderbook),a(r.orderbook).trigger("feedstreaming:update",i.orderbook)),e.lastTradeDatetime&&o.highlight(n.lastTradeDatetime,l(e.lastTradeDatetime).format("DD/MM/YYYY HH:mm:ss")),!0},o.highlight=function(t,e,n,i){var r=u.highlightClass,f,k;return i=i||{},i.way>0?(r+="-up",f="buy"):i.way<0?(r+="-down",f="sell"):f="neutral",n&&(e=s(e).format(n)),i.suffix&&(e+=""+i.suffix),t.previousValue==e?!1:(t.previousValue=e,a([]).add(document).add(t).trigger("feedstreaming:highlight",{elements:a(t),value:e,format:n,infos:i,changeSide:f}),t.addClass(r),window.setTimeout(function(){t.removeClass(r)},400),typeof e=="string"?t.html(e.replace(".",",")):t.html(e),!0)},o.stop=function(t){return t==="FEED_ACCESS_DENIED"||t==="NOTIFICATION_ACCESS_DENIED"?(m=a.Deferred(),o.isConnected()&&(C=!0,o.socket.close(),m.resolve("stop")),o.cleanup(),a(document).trigger(t==="FEED_ACCESS_DENIED"?"feedstreaming:access_denied":"notificationstreaming:access_denied"),m):(console.info("streaming.stop"),m=a.Deferred(),o.isConnected()?(C=!0,o.socket.close(),m.resolve("stop")):m.resolve("connected"),o.cleanup(),m)},o.cleanup=function(){g=a.Deferred(),S={},x.forEach(function(t){t&&window.clearInterval(t)})},o.send=function(t,e){if(!C)return c&&console.log("streaming.send",{channel:t,data:e}),o.start(!0).then(function(n,i){n.send(JSON.stringify({channel:t,user:e.connection,data:e}))})},o.getBookChannelId=function(t){return"#book"+t.exchangeCode+"-"+t.symbol},o.getLiveChannelId=function(t){return"#live"+t.exchangeCode+"-"+t.symbol},o.joinChannel=function(t){return S[t]?!1:(S[t]=!0,o.send("feed.streaming.join",{connection:o.getToken(),feed:t}),!0)},o.computeSumForOrderbook=function(t){var e=d[t].orderbook.summary,n=d[t].orderbook.lines,i;return Object.keys(e).forEach(function(r){e[r]=0}),n.forEach(function(r,f){Object.keys(r).forEach(function(k){e[k]+=r[k]})}),e},o.registerInstrument=function(t,e){if(e=e||{},e.symbol=t,!t||typeof t!="string"){console.error("streaming","invalid symbol");return}if(d[t]=d[t]||{instantVariation:0,lastTradeDatetime:0,orderbook:{lines:[],summary:{askPrice:0,askQuantity:0,askSize:0,bidSize:0,bidQuantity:0,bidPrice:0}},transactions:[],isStreamingLive:!1,isStreamingBook:!1},d[t].elements||(d[t].elements=B.reduce(function(i,r){return i[w(r)]=a([]),i},{})),a(document).trigger("feedstreaming:registerinstrument",e),a.each({previousClose:"prevClose",totalVolume:"volume",tradeDate:"lastTradeDatetime"},function(i,r){e[r]=e[i]!==void 0?e[i]:e[r]}),e.exchangeCode=""+e.exchangeCode,!e.exchangeCode)throw new Error("Invalid exhangeCode",e);e.prevClose=parseFloat(e.prevClose),e.last=parseFloat(e.last),e.high=parseFloat(e.high),e.low=parseFloat(e.low),e.variation=parseFloat(e.variation),e.factor=parseFloat(e.factor),e.decimals=parseInt(e.decimals,10),e.orderbook=e.orderbook||{lines:[]};var n=function(i){M.forEach(function(r){var f=w(r);i[f]=parseFloat(i[f])})};e.orderbook.lines.forEach(function(i){n(i)}),e.orderbook.summary&&n(e.orderbook.summary),e.orderbook=Object.assign(d[t].orderbook,e.orderbook),e.transactions=Object.assign(d[t].transactions,e.transactions),a.extend(d[t],e),o.computeSumForOrderbook(t)},o.register=function(t,e){window.$doc=a(t||document.body),e=e||[],e.forEach||(e=Object.keys(e).map(function(n){return e[n].symbol=n,e[n]})),e.forEach(function(n){o.registerInstrument(n.symbol,n)}),Object.keys(d).forEach(function(n){o.findListeners(window.$doc,n)}),Object.keys(d).forEach(function(n){var i=d[n];i.isStreamingLive||g.then(function(){c&&console.log("streaming.channel","start live streaming",o.getLiveChannelId(i)),i.isStreamingLive=!0,o.joinChannel(o.getLiveChannelId(i))}),!i.isStreamingBook&&i.elements.orderbook&&i.elements.orderbook.length&&g.then(function(){c&&console.log("streaming.channel","start book streaming",o.getLiveChannelId(i)),i.isStreamingBook=!0,o.joinChannel(o.getBookChannelId(i))})})},o.escapeSymbol=function(t){return t.replace(/[^a-z0-9A-Z]/g,"_")},o.findListeners=function(t,e){var n=d[e],i=n.elements,r;if(!window.$doc.data("feed-streaming:listeners:"+e)){window.$doc.data("feed-streaming:listeners:"+e,!0),t=a(t);var f=o.escapeSymbol(e);B.forEach(function(k){var y=w(k);i[y]=a.merge(a(i[y]),t.find([".ist__"+k+".ist__"+f,'[data-ist="'+f+'"] [data-ist-'+k+"]",'[data-ist="'+f+'"][data-ist-'+k+"]"].join(", ")))})}},o.getToken=function(){return{login:u.login,password:u.password}},o.getJoinNotificationConfig=function(){return{jwt:u.notificationsJwt,origin:u.notificationsOrigin}},o.hasValidNotificationConfig=function(){return!!u.notificationsJwt&&typeof u.notificationsJwt=="string"},o.isListeningTo=function(t){return!!d[t]},o.getOptions=function(){return u},o.onMessage=function(t,e){t.startsWith("notification.amq")?o.handleNotificationStreamingMessage(t,e):o.handleFeedStreamingMessage(t,e)},o.handleFeedStreamingMessage=function(t,e){if(a(document).trigger("feedstreaming:message",{channel:t,message:e}),t==="feed.streaming.access_denied"&&this.stop("FEED_ACCESS_DENIED"),t==="feed.streaming.error"&&(a(document).trigger("feedstreaming:connection_timeout"),a(document).trigger("feedstreaming:error")),t!=="feed.streaming.message"){c&&console.log("streaming.message",t,":",e);return}if(!o.isListeningTo(e.symbol)){c&&console.log("streaming.message.notListenedSymbol",t,":",e);return}if(c&&console.log("streaming.instrument.onmessage",e.symbol,e.type,e.data),e.type==="live"){var n=o.computeLive(e.symbol,e.data);o.bufferedRendering(e.symbol,n)}if(e.type==="book"){var n=o.computeBook(e.symbol,e.data);o.bufferedRendering(e.symbol,n)}},o.handleNotificationStreamingMessage=function(t,e){t==="notification.amq.message"&&a(document).trigger("notificationstreaming:message",{channel:t,message:e.message}),t==="notification.amq.modal"&&a(document).trigger("notificationstreaming:modal",e),t==="notification.amq.access_denied"&&this.stop("NOTIFICATION_ACCESS_DENIED")},o.sendMessageToRoom=function(t,e){o.start(!0).then(function(){o.send("streaming.amq.message",{route:t,message:e})})},o.joinRoom=function(t){E[t]=!0,o.send("streaming.amq.join",{route:t})},o.joinNotifications=function(){if(c&&console.log("Join notifications"),!this.hasValidNotificationConfig()){c&&console.log("No or Invalid config: "+JSON.stringify(this.getJoinNotificationConfig()));return}o.send("notification.amq.join",this.getJoinNotificationConfig())},o.setUserIdle=function(t){t=!!t,t!==j&&(j=!!t,t&&o.isConnected()?o.stop():!t&&!o.isConnected()&&o.start())},o.restart=function(){return o.stop().then(function(){return o.start()}).then(function(){o.register()})},o.start=function(t){var e;return e=u.uri,o.isConnected()?g:!Object.keys(d).length&&!Object.keys(E).length&&this.has&&!this.hasValidNotificationConfig()&&!t?(c&&console.log("streaming","no feeds to listen to and no notification token, delay start"),setTimeout(function(){o.start()},u.restartDelay),g):(x.push(window.setInterval(function(){o.intradayRenderingLoop()},1e3*60)),o.socket=o.transport=new WebSocket(e),m=a.Deferred(),!u.login&&!u.password&&u.bufferedRenderingLoopDelay==500&&(u.bufferedRenderingLoopDelay=(c?10:45)*1e3),o.socket.onerror=function(){a(document).trigger("feedstreaming:connection_error")},o.socket.onopen=function(){a(document).trigger("feedstreaming:connection_open"),a.each(d,function(n,i){i.isStreamingBook=i.isStreamingLive=!1}),Object.keys(E).forEach(function(n){o.joinRoom(n)}),C=!1,o.socket&&(o.socket.onmessage=function(n){var i;o.debug&&console.log(n.data);try{i=JSON.parse(n.data)}catch(r){console.error(r);return}typeof i.forEach!="function"&&(i=[i]),i.forEach(function(r){r.channel==="streaming.infos.welcome"&&g.resolve(o.socket,r.data),o.onMessage(r.channel,r.data||r.body)})})},o.socket.onclose=function(){a(document).trigger("feedstreaming:connection_close"),o.socket=null,C||setTimeout(function(){o.restart()},u.restartDelay),o.cleanup(),m.resolve("closed"),a.each(d,function(n,i){i.isStreamingLive=i.isStreamingBook=!1})},g.then(function(){o.register(),o.joinNotifications()}),g)},o.feeds=d,o.setupIdleWatchers=function(){var t=1e3,e,n;P||(e=function(i){p=0,j&&o.setUserIdle(!1)},P=setInterval(function(){p=p+t,(document.hidden&&p>=u.idleInBackgroundThreshold||p>=u.idleThreshold)&&o.setUserIdle(!0)},t),["touchstart","touchmove","mousemove","keypress"].forEach(function(i){document.addEventListener(i,e)}),document.addEventListener("visibilitychange",function(){document.hidden?p=0:e()},!1))},a.feedStreaming=function(t){var e=Array.prototype.slice.call(arguments,1);switch(typeof t=="object"&&(u=a.extend(u,t)),o.setupIdleWatchers(),g||(g=a.Deferred()),t){case"register":o.register.apply(null,e);break;case"feeds":return d;case"listeners":return R;case"debug":return e[0]===void 0?c:(c=!!e[0],sessionStorage.setItem("feedStreaming:debug",0+c),o);case"stop":return o.stop(),o;default:break}return o}})(I)}},function(D){var L=function(s){return D(D.s=s)};D.O(0,[4692,9323],function(){return L(8773)});var v=D.O()}]);})();

</script>

</body>
</html>
