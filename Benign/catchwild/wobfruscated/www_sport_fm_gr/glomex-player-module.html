<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>glomex-player-module.html</title>
</head>
<body>
<script>function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).CustomEvent;var n=e(function(){try{var e=new t("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?t:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n});(e=>{void 0!==e.msHidden||e.webkitHidden})(window.document);function i(){const e=[];for(let t=0;t<1.01;t+=.01)e.push(+t.toFixed(2));return e}var o={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var r=new o(i,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],r]:e._events[l].push(r):(e._events[l]=r,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function r(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),r.prototype.eventNames=function(){var e,i,o=[];if(0===this._eventsCount)return o;for(i in e=this._events)t.call(e,i)&&o.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},r.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,s=i.length,a=new Array(s);o<s;o++)a[o]=i[o].fn;return a},r.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},r.prototype.emit=function(e,t,i,o,s,a){var r=n?n+e:e;if(!this._events[r])return!1;var l,d,c=this._events[r],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,o),!0;case 5:return c.fn.call(c.context,t,i,o,s),!0;case 6:return c.fn.call(c.context,t,i,o,s,a),!0}for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c.fn.apply(c.context,l)}else{var u,p=c.length;for(d=0;d<p;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),h){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,i);break;case 4:c[d].fn.call(c[d].context,t,i,o);break;default:if(!l)for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c[d].fn.apply(c[d].context,l)}}return!0},r.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},r.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},r.prototype.removeListener=function(e,t,i,o){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var r=this._events[s];if(r.fn)r.fn!==t||o&&!r.once||i&&r.context!==i||a(this,s);else{for(var l=0,d=[],c=r.length;l<c;l++)(r[l].fn!==t||o&&!r[l].once||i&&r[l].context!==i)&&d.push(r[l]);d.length?this._events[s]=1===d.length?d[0]:d:a(this,s)}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=n,r.EventEmitter=r,e.exports=r}(o);var s=e(o.exports);const a="connect",r="send-command",l="send-event";function d(e,t){const n={type:"iframe",_onmessage:void 0,postMessage:(...n)=>{e.parent===t()&&n[0]&&n[0].type===a&&e.postMessage(...n);const i=t();if(i)return i.postMessage(...n)},get onmessage(){return this._onmessage},set onmessage(n){e.removeEventListener("message",this._onmessage,!1),this._onmessage=i=>{const o=t();i.source!==o&&i.source!==e||!n||n(i)},n&&e.addEventListener("message",this._onmessage,!1)}};return new Promise((i=>{e.parent===t()?"complete"===e.document.readyState||"interactive"===e.document.readyState?setTimeout((()=>i(n)),1):e.addEventListener("load",(()=>i(n)),{once:!0}):i(n)}))}class c extends s{expose(e={},t={}){this.events=t,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter((e=>0!==e.indexOf("_")&&"constructor"!==e)).forEach((t=>{"function"==typeof e[t]&&(this._commandRegistry[t]=e[t].bind(e),this._apiToExpose[t]="function")}))}_attachRemoteApi(e={}){Object.keys(e.api||{}).forEach((t=>{this.api[t]||"function"!==e.api[t]||(this.api[t]=(...e)=>{this.sendCommand(t,...e)})})),e.events&&(this.events=e.events)}_onMessage(e={}){const t=e.data||{};t.type===a&&t.sentinel===this._sentinel&&(this._port.onmessage=this._onRemoteMessage.bind(this),this._attachRemoteApi(t),this.emit(this.EVENT_CONNECT))}_checkIfChannelExists(){if(!this._port)throw new Error("Remote port not connected.")}_onRemoteMessage(e={}){const t=e.data||{};if(t.sentinel===this._sentinel)switch(t.type){case l:this.emit(t.payload.eventName,...t.payload.eventArgs);break;case r:this._commandRegistry[t.payload.commandName]&&this._commandRegistry[t.payload.commandName](...t.payload.commandArgs)}}sendCommand(e,...t){const{_port:n}=this;this._checkIfChannelExists(),n.postMessage({type:r,payload:{commandName:e,commandArgs:t},sentinel:this._sentinel},...this._channelMessageArgs)}sendEvent(e,t,n=""){this._checkIfChannelExists();let i=[];try{o=t,i=JSON.parse(JSON.stringify(o))}catch(e){console.error(e)}var o;this._port.postMessage({type:l,payload:{eventName:e,eventArgs:[i]},sentinel:this._sentinel},...this._channelMessageArgs),this._handleMsnSpecialCase(e,n,t)}_handleMsnSpecialCase(e,t,n){if(!t)return;const i={playlistitembegin:"Lifecycle Start",contentbegin:"Content Begin",contentcomplete:"Content Complete"},{hostname:o}=new URL(t);i[e]&&o.indexOf("msn.com")>-1&&this._port.postMessage({eventName:"event",payload:{payload:{...n,name:i[e]}}},...this._channelMessageArgs)}constructor(e,t){super(),this._sentinel=e,this._port=void 0,this._commandRegistry={},this._sentinel=e,this._channelMessageArgs=[],this.api={},this._apiToExpose={},this.events={},this.EVENT_CONNECT="connect",t().then((e=>{this._port=e,this._port.onmessage=this._onMessage.bind(this),"iframe"===e.type&&(this._channelMessageArgs=["*"]),this._port.postMessage({type:a,sentinel:this._sentinel,api:this._apiToExpose,events:this.events},...this._channelMessageArgs)}))}}const h=(e,{ignoreEmptyFields:t=!1}={})=>{if("object"!=typeof e)throw new Error("Argument must be an object");return Object.keys(e).filter((n=>!t||null!=e[n])).map((t=>{let n;return n=0===e[t]||"boolean"==typeof e[t]?JSON.stringify(e[t]):e[t]||"",`${t}=${i=n,encodeURIComponent(i).replace(/['()]/g,escape).replace(/\*/g,"%2A").replace(/%(?:7C|60|5E)/g,unescape)}`;var i})).join("&")};let u=!1;function p(e){if(u)return;u=!0;const{document:t}=window,n=t.createElement("template");n.innerHTML=`\n    <link rel="preconnect" href="https://player-feedback-v1.glomex.com" crossorigin="anonymous">\n    <link rel="preconnect" href="https://integration-cloudfront-eu-west-1.mes.glomex.cloud" crossorigin="anonymous">\n    <link rel="preconnect" href="https://config-vvs.glomex.com" crossorigin="anonymous">\n    <link rel="preconnect" href="https://sales-house-configuration.mes.glomex.cloud" crossorigin="anonymous">\n    <link rel="modulepreload" href="${e}blur.js" as="script">\n  `;try{t.head.appendChild(n.content)}catch(e){}}const m="https://player.glomex.com/integration/1.1218.8";var g=null;var y=function(){return g||(g=`${m}/`),g};const v=window.EventTarget||Object;class b extends v{enable(){const{_window:e,_element:t}=this,{screen:n}=e;if(!n||!n.orientation)return;n.orientation.addEventListener("change",this._onOrientationChange),t.addEventListener("fullscreenchange",this._onIframeFullscreenChange);const i=0===n.orientation.type.indexOf("landscape");null===this._rootNode.fullscreenElement&&i&&t.requestFullscreen&&t.requestFullscreen().catch((()=>{}))}disable(){const{_window:e,_element:t}=this,{screen:n,document:i}=e;n&&n.orientation&&(this._rootNode.fullscreenElement&&i.exitFullscreen&&(i.exitFullscreen().catch((()=>{})),this.dispatchEvent(new e.CustomEvent("exit",{detail:{orientation:n.orientation.type}}))),n.orientation.removeEventListener("change",this._onOrientationChange),t.removeEventListener("fullscreenchange",this._onIframeFullscreenChange))}_onOrientationChange(){const{_window:e,_element:t}=this,{screen:n,document:i}=e;null===this._rootNode.fullscreenElement&&0===n.orientation.type.indexOf("landscape")&&t.requestFullscreen?t.requestFullscreen().catch((()=>{})):i.exitFullscreen&&i.exitFullscreen().catch((()=>{}))}_onIframeFullscreenChange(){const{screen:e}=this._window;null===this._rootNode.fullscreenElement?this.dispatchEvent(new window.CustomEvent("exit",{detail:{orientation:e.orientation.type}})):this.dispatchEvent(new window.CustomEvent("enter"))}constructor(e,t){super(),this._element=t,this._rootNode=this._element.getRootNode(),this._window=e,this._onOrientationChange=this._onOrientationChange.bind(this),this._onIframeFullscreenChange=this._onIframeFullscreenChange.bind(this)}}const f=window.innerWidth<720?320:640,w="0px 10px auto auto",_=2147483646;let x=!1;window.matchMedia("(max-device-width: 480px) and (pointer: coarse)").matches&&(x=!0);const k=e=>{let t=.3*window.innerWidth;t<192?t=192:t>400&&(t=400),e.shadowRoot.querySelector(".dock-target").style.width=`${t}px`},E=(e,t)=>{e.shadowRoot.querySelector(".placeholder.aspect-ratio-box").style.paddingTop=1/t*100+"%"},A=(e,t)=>{e.shadowRoot.querySelector(".dock-target .aspect-ratio-box").style.paddingTop=1/t*100+"%"},I=(e,t)=>{e.shadowRoot.querySelector(".dock-sticky-target .aspect-ratio-box").style.paddingTop=1/t*100+"%"},C=e=>{const t=e.getAttribute("dock-target");let n;if(t){try{n=document.querySelectorAll(t)}catch(e){return null}if(0===n.length)return null;const e=n[n.length-1],i=$(e);if(i&&i.width>0&&i.height>0)return e}return null},P=e=>e.shadowRoot.querySelector(".dock-target"),S=e=>e.shadowRoot.querySelector(".dock-sticky-target"),M=e=>{C(e)&&!e.getAttribute("alternative-dock-target")?e.setAttribute("alternative-dock-target",""):e.removeAttribute("alternative-dock-target")},L=(e=[])=>(e.push("16:9"),e.map((e=>{if(!e)return NaN;const t=e.split(":");return 1===t.length?Number(e):t[0]/t[1]})).filter((e=>!!e))[0]),R=(e,{from:t,to:n,animate:i=!1,aspectRatio:o,initialAspectRatio:s,downscale:a=!1,transitionDuration:r}={})=>new Promise((l=>{const d=t.getBoundingClientRect(),c=n.getBoundingClientRect(),h=z(),u=0===d.width?f:d.width,p=0===d.height?f/s:d.height,m=u/o,g=e.firstElementChild;e.style.position="fixed",e.style.width=`${u}px`,e.style.height=`${p}px`,e.style.transform="scale(1)",e.style.top=`${d.top+h.offsetTop}px`,e.style.left=`${d.left+h.offsetLeft}px`,e.style.display="grid";const y=c.left-d.left,v=c.top-d.top,b=c.width/u,w=()=>{e.style.display=null,e.style.height=`${m}px`,e.style.transform=`translate(${y/u*100}%, ${v/m*100}%) scale(${b})`,e.style.transitionProperty="transform",e.style.transformOrigin="top left",e.style.transitionTimingFunction="ease-out",e.style.transitionDuration=i?`${r}ms`:null,a||(g.style.transitionDuration="0s",g.style.transitionProperty="transform",g.style.width=`${c.width}px`,g.style.height=`${c.height}px`,g.style.transform=`scale(${1/b})`,g.style.transformOrigin="top left")};if(!i)return w(),void l({scale:a?b:1});window.requestAnimationFrame((()=>{w(),l({scale:a?b:1})}))})),T=e=>{const t=e.split(" ");if(e)return 1===t.length?{top:t[0],right:"auto",bottom:"auto",left:"auto"}:2===t.length?{top:t[0],right:t[1],bottom:t[0],left:t[1]}:3===t.length?{top:t[0],right:t[1],bottom:t[1],left:t[2]}:4===t.length?{top:t[0],right:t[1],bottom:t[2],left:t[3]}:void 0};function O(e){const t=e.touches?e.touches[0]:e;return{x:"x"in t?t.x:t.clientX,y:"y"in t?t.y:t.clientY}}function D(e){const t=e.activeElement;return t?t.shadowRoot?D(t.shadowRoot):t:null}class N extends window.HTMLElement{connectedCallback(){this._bodyStyleAdjusted&&(window.document.body.style.height=null,window.document.body.style.overflow=null),this._bodyStyleAdjusted=!1,k(this),E(this,L([this.getAttribute("aspect-ratio")])),A(this,L([this.getAttribute("dock-aspect-ratio"),this.getAttribute("aspect-ratio")])),I(this,L([this.getAttribute("dock-sticky-aspect-ratio"),this.getAttribute("aspect-ratio")])),this.hasAttribute("mode")||this.setAttribute("mode","inline"),this._disconnectDragAndDrop&&this._disconnectDragAndDrop(),this._disconnectDragAndDrop=F(this);const e=()=>{this._adjustLightboxModeForLandscapeOnMobile(),k(this),this.refreshDockDialog()};e(),window.addEventListener("resize",e),this._disconnectResize=()=>{window.removeEventListener("resize",e)};const t=e=>{if("lightbox"===this.getAttribute("mode")&&("Escape"!==e.key&&"Esc"!==e.key||(this._internalModeChange=!0,this._wasInHiddenMode?this.setAttribute("mode","hidden"):this.setAttribute("mode","inline")),"Tab"===e.key)){const e=D(window.document);if(e!==this&&!function(e,t){let n=e;for(;n&&n.parentNode;){if(n.parentNode===t)return!0;n=n.parentNode instanceof window.DocumentFragment?n.parentNode.host:n.parentNode}return!1}(e,this)){this.shadowRoot.querySelector(".dialog-inner-wrapper").focus()}}};window.document.addEventListener("keyup",t),this._disconnectKeyup=()=>{window.document.removeEventListener("keyup",t)}}disconnectedCallback(){this._disconnectDragAndDrop&&this._disconnectDragAndDrop(),this._disconnectResize(),this._disconnectKeyup(),this._rotateToFullscreen&&(this._rotateToFullscreen.disable(),this._rotateToFullscreen.removeEventListener("exit",this._onRotateToFullscreenExit),this._rotateToFullscreen.removeEventListener("enter",this._onRotateToFullscreenEnter),this._rotateToFullscreen=void 0),this._dockTargetResizeObserver&&(this._dockTargetResizeObserver.disconnect(),this._dockTargetResizeObserver=void 0),this._bodyStyleAdjusted&&(window.document.body.style.height=null,window.document.body.style.overflow=null),this._bodyStyleAdjusted=!1}static get observedAttributes(){return["mode","aspect-ratio","dock-target","dock-target-inset","dock-aspect-ratio","dock-mode","dock-sticky-target-top","dock-sticky-aspect-ratio","dock-downscale","rotate-to-fullscreen"]}attributeChangedCallback(e,t,n){const i=this.shadowRoot.querySelector(".dialog-content"),o=i.querySelector(".dialog-inner-wrapper"),s=this.shadowRoot.querySelector(".placeholder"),a=this.shadowRoot.querySelector(".popover"),r=this.getAttribute("dock-mode"),l=300,d=["sticky"===r?this.getAttribute("dock-sticky-aspect-ratio"):this.getAttribute("dock-aspect-ratio"),this.getAttribute("aspect-ratio")],c="sticky"===r?S(this):C(this)||P(this);if("dock-target"===e){const e=C(this);n?window.ResizeObserver&&e&&(this._dockTargetResizeObserver=new window.ResizeObserver((()=>this.refreshDockDialog())),this._dockTargetResizeObserver.observe(e)):this._dockTargetResizeObserver&&this._dockTargetResizeObserver.disconnect()}if("mode"===e){if(!this._wasInHiddenMode||"lightbox"!==n&&"dock"!==n&&"inline"!==n?(s.style.display=null,s.style.visibility=null):("inline"!==n&&(s.style.display="none"),s.style.visibility="hidden"),window.removeEventListener("touchmove",this._onNonPassiveTouchMove,{passive:!1}),"dock"===n)a.showPopover&&a.showPopover(),this.refreshDockDialog(),i.style.zIndex=_,M(this),R(i,{from:s,to:c,animate:!this._wasInHiddenMode,initialAspectRatio:L([this.getAttribute("aspect-ratio")]),aspectRatio:L(d),downscale:this.getAttribute("dock-downscale"),transitionDuration:l}).then((({scale:e})=>{"lightbox"===t&&this.refreshDockDialog(),this.getAttribute("dock-downscale")&&this.dispatchEvent(new CustomEvent("dockscale",{detail:{scale:e},bubbles:!0,composed:!0}))}));else if("inline"===n){const e=()=>{a.hidePopover&&a.hidePopover(),i.style.display="grid",i.style.position="absolute",i.style.transform="scale(1)",o.style.transform=null,o.style.width=null,i.style.top=null,i.style.left=null,this._wasInHiddenMode||"dock"!==t||(i.style.transitionDuration="300ms",o.style.transitionDuration=null,i.style.transitionTimingFunction="ease-out"),setTimeout((()=>{"inline"===this.getAttribute("mode")&&(i.setAttribute("style",""),o.setAttribute("style",""),s.style.visibility="hidden",a.hidePopover&&a.hidePopover())}),l)};"dock"===t?(i.style.transitionDuration="300ms",R(i,{from:s,to:c,animate:!1,initialAspectRatio:L([this.getAttribute("aspect-ratio")]),aspectRatio:L(d),downscale:this.getAttribute("dock-downscale"),transitionDuration:l}).then((()=>{window.requestAnimationFrame((()=>{e()}))}))):"inline"!==t&&e(),this._wasInHiddenMode=!1}else"lightbox"===n?(window.document.body.style.height="100%",window.document.body.style.overflow="hidden",this._bodyStyleAdjusted=!0,i.setAttribute("style",""),o.setAttribute("style",""),o.setAttribute("tabindex","-1"),o.focus(),this._onNonPassiveTouchMove=e=>{e.preventDefault()},window.addEventListener("touchmove",this._onNonPassiveTouchMove,{passive:!1}),a.showPopover&&a.showPopover(),i.showModal(),this._adjustLightboxModeForLandscapeOnMobile(),this._rotateToFullscreen&&this._rotateToFullscreen.enable()):"hidden"===n&&(this._wasInHiddenMode=!0);"lightbox"!==n&&(this._bodyStyleAdjusted&&(window.document.body.style.height=null,window.document.body.style.overflow=null),i.close(),o.removeAttribute("tabindex")),"lightbox"===t&&this._rotateToFullscreen&&(this._rotateToFullscreen.disable(),i.close()),this.dispatchEvent(new CustomEvent("modechange",{detail:{previousMode:t,mode:n,internal:this._internalModeChange},bubbles:!0,composed:!0})),this._internalModeChange=!1}if("dock-target"===e&&(this._disconnectDragAndDrop&&this._disconnectDragAndDrop(),this._disconnectDragAndDrop=F(this),this.refreshDockDialog()),"dock-target-inset"===e){const e=T(n)||T(w);Object.assign(this.shadowRoot.querySelector(".dock-target").style,e);const t=[];e.top.match(/%$/)?t.push(`translateY(-${e.top})`):e.bottom.match(/%$/)&&t.push(`translateY(${e.bottom})`),e.left.match(/%$/)?t.push(`translateX(-${e.left})`):e.right.match(/%$/)&&t.push(`translateX(${e.right})`),t.length>0&&(this.shadowRoot.querySelector(".dock-target").style.transform=t.join(" ")),this.refreshDockDialog()}if("dock-sticky-target-top"===e&&this.refreshDockDialog(),"dock-mode"===e&&(this._disconnectDragAndDrop&&this._disconnectDragAndDrop(),"sticky"!==n&&(this._disconnectDragAndDrop=F(this)),this.refreshDockDialog()),"aspect-ratio"===e&&E(this,L([this.getAttribute("aspect-ratio")])),"dock-aspect-ratio"===e&&A(this,L([this.getAttribute("dock-aspect-ratio"),this.getAttribute("aspect-ratio")])),"dock-sticky-aspect-ratio"===e&&I(this,L([this.getAttribute("dock-sticky-aspect-ratio"),this.getAttribute("aspect-ratio")])),"dock-downscale"===e&&n&&n&&o.setAttribute("style",""),"rotate-to-fullscreen"===e)if(null==n&&this._rotateToFullscreen)this._rotateToFullscreen.disable(),this._rotateToFullscreen.removeEventListener("exit",this._onRotateToFullscreenExit),this._rotateToFullscreen.removeEventListener("enter",this._onRotateToFullscreenEnter),this._rotateToFullscreen=void 0;else if(x){this._onRotateToFullscreenExit=e=>{0===e.detail.orientation.indexOf("landscape")&&(this._internalModeChange=!0,this.setAttribute("mode",this._wasInHiddenMode?"hidden":"inline")),this.removeAttribute("fullscreen")},this._onRotateToFullscreenEnter=()=>{this.setAttribute("fullscreen","")};try{this._rotateToFullscreen=new b(window,o),this._rotateToFullscreen.addEventListener("exit",this._onRotateToFullscreenExit),this._rotateToFullscreen.addEventListener("enter",this._onRotateToFullscreenEnter)}catch(e){}}}_adjustLightboxModeForLandscapeOnMobile(){if("lightbox"!==this.getAttribute("mode"))return;window.matchMedia("(max-device-width: 480px) and (pointer: coarse) and (orientation: landscape)").matches?this._bodyStyleAdjusted&&(window.document.body.style.overflow=null):(window.document.body.style.overflow="hidden",this._bodyStyleAdjusted=!0)}refreshDockDialog(){const e=this.shadowRoot.querySelector(".dialog-content"),t=this.shadowRoot.querySelector(".dock-sticky-target"),n=this.getAttribute("dock-sticky-target-top"),i=this.getBoundingClientRect(),o=this.getAttribute("mode"),s=this.getAttribute("dock-mode"),a=["sticky"===s?this.getAttribute("dock-sticky-aspect-ratio"):this.getAttribute("dock-aspect-ratio"),this.getAttribute("aspect-ratio")];if("sticky"===s){const e=C(this);if(e){const{height:i}=$(e);t.style.top=i<200&&i>0?`${i||0}px`:`${n||0}px`}else t.style.top=`${n||0}px`}const r="sticky"===s?S(this):C(this)||P(this);let l=i.width;0===l&&(l=.9*window.innerWidth),t.style.left=`${i.left}px`,t.style.width=`${l}px`,t.style.height=l/L(a)+"px","dock"===o&&(M(this),R(e,{from:this.shadowRoot.querySelector(".placeholder"),to:r,animate:!1,initialAspectRatio:L([this.getAttribute("aspect-ratio")]),aspectRatio:L(a),downscale:this.getAttribute("dock-downscale"),transitionDuration:0}).then((({scale:e})=>{this.getAttribute("dock-downscale")&&this.dispatchEvent(new CustomEvent("dockscale",{detail:{scale:e},bubbles:!0,composed:!0}))})))}constructor(){super();this.attachShadow({mode:"open"}).innerHTML='<style>\n    :host {\n      display: block;\n      position: relative;\n    }\n\n    .dock-target {\n      position: fixed;\n      pointer-events: none;\n      visibility: hidden;\n    }\n\n    .dock-sticky-target {\n      position: fixed;\n      pointer-events: none;\n      visibility: hidden;\n    }\n\n    .aspect-ratio-box {\n      height: 0;\n    }\n\n    .placeholder {\n      display: block;\n      cursor: pointer;\n    }\n\n    .placeholder-inner {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      top: 0;\n      left: 0;\n      display: block;\n    }\n\n    .placeholder-default {\n      background-color: var(--placeholder-background-color, rgba(200, 200, 200, 0.8));\n      background-image: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' height=\'24px\' width=\'24px\' version=\'1.1\' viewBox=\'0 0 24 24\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\' stroke=\'none\' stroke-width=\'1\'%3E%3Cg transform=\'scale(1, 1)\'%3E%3Cpath d=\'M19,19 L5,19 L5,5 L12,5 L13,3 L5,3 L3,3 3,3.9 3,5 L3,19 L3,20.1 3,21 5,21 L19,21 L21,21 21,20.1 21,19 L21,12 L19,12 L19,19 Z M14,3 L14,5 L17.59,5 L7.76,14.83 L9.17,16.24 L19,6.41 L19,10 L21,10 L21,3 L14,3 Z\' fill=\'%23fff\' fill-rule=\'nonzero\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");\n      background-repeat: no-repeat;\n      background-position: center;\n      background-size: 10%;\n      width: 100%;\n      height: 100%;\n    }\n\n    :host([mode=hidden]) .dialog-content,\n    :host([mode=hidden]) .placeholder {\n      display: none;\n    }\n\n    .popover {\n      border: 0;\n      margin: 0;\n      padding: 0;\n      background: transparent;\n      display: block;\n    }\n\n    :host([mode=inline]) .popover {\n      display: block;\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      overflow: visible;\n    }\n\n    .dialog-content {\n      display: block;\n      width: 100%;\n      height: 100%;\n      border: 0;\n      padding: 0;\n      margin: 0;\n      background: transparent;\n      will-change: transform, transition, width, height, top, left, opacity;\n    }\n\n    .dialog-inner-wrapper {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      top 0;\n      left: 0;\n      max-width: 100%;\n      will-change: transition, transform, width, height;\n    }\n\n    /*\n       fixes an issue with fullscreen in safari,\n       "will-change: transform" lets external elements shine through\n    */\n    .dialog-content:-webkit-full-screen-ancestor:not(iframe),\n    .dialog-inner-wrapper:-webkit-full-screen-ancestor:not(iframe) {\n      will-change: auto;\n    }\n\n    .drag-handle {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 1em;\n      height: 1em;\n      padding: 0.25em;\n      fill-color: white;\n      border-radius: 2px;\n      background-color: rgba(0, 0, 0, 0.7);\n      transition: background 300ms ease-in-out, opacity 300ms ease-in-out;\n      opacity: 0;\n      z-index: 1;\n    }\n\n    :host([mode=dock]) .dialog-content {\n      position: absolute;\n    }\n\n    :host([alternative-dock-target]) .drag-handle,\n    :host([dock-mode=sticky]) .drag-handle {\n      display: none;\n    }\n\n    .drag-handle:hover, .drag-handle:active {\n      background-color: rgba(0, 0, 0, 0.4);\n    }\n\n    .drag-handle:active {\n      opacity: 1;\n      cursor: move;\n    }\n\n    .drag-handle svg {\n      fill: white;\n      width: 100%;\n      height: 100%;\n    }\n\n    :host([mode=dock]) .dialog-content:hover .drag-handle {\n      opacity: 1;\n      cursor: move;\n    }\n\n    .dialog-content ::slotted([slot=dock-background]) {\n      visibility: hidden;\n    }\n\n    .dialog-content slot[name="dock-background"] {\n      touch-action: none;\n      cursor: move;\n      position: absolute;\n      display: block;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n\n    :host([dock-mode=sticky]) slot[name="dock-background"] {\n      cursor: unset;\n    }\n\n    :host([mode=dock]) .dialog-content ::slotted([slot=dock-background]) {\n      visibility: visible;\n    }\n\n    :host([mode=dock]) .dialog-content {\n      z-index: 2147483646;\n    }\n\n    :host([mode=lightbox]) .dialog-content {\n      display: flex;\n      max-height: 100dvh;\n      max-width: 100dvw;\n      align-items: center;\n      justify-content: center;\n      animation-name: fade-in;\n      animation-duration: 200ms;\n      animation-timing-function: ease-in;\n      position: fixed;\n      top: 0;\n      left: 0;\n      z-index: 2147483647;\n      overflow: hidden;\n    }\n\n    :host([mode=lightbox]) .dialog-content::backdrop {\n      width: 100%;\n      height: 100%;\n      background: var(--lightbox-background, rgba(0, 0, 0, 0.5));\n      backdrop-filter: blur(4px) saturate(50%);\n    }\n\n    :host([mode=lightbox]) .dialog-content slot[name="dock-background"] {\n      display: none;\n    }\n\n    :host([mode=lightbox]) .dialog-inner-wrapper {\n      max-width: 80%;\n      position: unset;\n      height: unset;\n    }\n\n    @media (max-width: 1024px) {\n      :host([mode=lightbox]) .dialog-inner-wrapper {\n        max-width: 95%;\n      }\n    }\n\n    :host([mode=lightbox]) slot[name="dialog-element"] {\n      display: flex;\n      aspect-ratio: 16 / 9;\n      margin: 0 auto;\n      max-height: 100dvh;\n    }\n\n    @media (orientation: portrait) {\n      :host([mode=lightbox]) slot[name="dialog-element"] {\n        aspect-ratio: 9 / 16;\n      }\n      :host([mode=lightbox]) .dialog-inner-wrapper {\n        max-width: unset;\n      }\n    }\n\n    @media (max-device-width: 480px) and (pointer: coarse) and (orientation: landscape) {\n      :host([mode=lightbox]) .dialog-content {\n        animation-name: none;\n        height: 100%;\n        width: 100%;\n      }\n\n      :host([mode=lightbox]) .dialog-inner-wrapper {\n        height: 100% !important;\n        max-width: 100% !important;\n        margin: 0 auto !important;\n        min-height: -webkit-fill-available !important;\n      }\n\n      :host([mode=lightbox]):before {\n        background: #000;\n      }\n    }\n\n    @keyframes fade-in {\n      0% {\n        opacity: 0;\n      }\n      100% {\n        opacity: 1;\n      }\n    }\n    </style>\n    <div class="placeholder aspect-ratio-box">\n      <slot name="placeholder" class="placeholder-inner">\n        <div class="placeholder-default"></div>\n      </slot>\n    </div>\n    <div class="popover" popover="manual">\n      <div class="dock-target">\n        <div class="aspect-ratio-box"></div>\n      </div>\n      <div class="dock-sticky-target">\n        <div class="aspect-ratio-box"></div>\n      </div>\n      <dialog class="dialog-content" part="dialog-content">\n        <div class="dialog-inner-wrapper">\n          <slot name="dock-background">\n            <div class="drag-handle">\n              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-move" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z"/></svg>\n            </div>\n          </slot>\n          <slot name="dialog-element"></slot>\n        </div>\n      </dialog>\n    </div>';const e=this.shadowRoot.querySelector(".dock-target"),t=T(w),n=this.shadowRoot.querySelector(".dock-sticky-target"),i=this.shadowRoot.querySelector(".placeholder-inner");n.style.top=t.top,Object.assign(e.style,t),this._wasInHiddenMode=!1,this._internalModeChange=!1,this._dockTargetResizeObserver=void 0,this._bodyStyleAdjusted=!1,this.addEventListener("click",(({target:e})=>{this.classList.contains("dragging")||(e instanceof N||e.assignedSlot===i)&&(this._internalModeChange=!0,this._wasInHiddenMode?this.setAttribute("mode","hidden"):this.setAttribute("mode","inline"))}))}}function q(){return{width:window.innerWidth,height:window.innerHeight,left:0,top:0}}function z(){return window.visualViewport||{offsetLeft:0,offsetTop:0,scale:1}}function $(e){const t=e.getBoundingClientRect();return function(){let e=-1/0,t=1/0,n=-1/0,i=1/0;for(let o=0;o<arguments.length;o++){const s=arguments[o];if(s&&(e=Math.max(e,s.left),t=Math.min(t,s.left+s.width),n=Math.max(n,s.top),i=Math.min(i,s.top+s.height),t<e||i<n))return null}return t==1/0?null:{left:o=e,top:s=n,width:a=t-e,height:r=i-n,bottom:s+r,right:o+a,x:o,y:s};var o,s,a,r}(q(),t)}function F(e){let t,n,i,o=!1;const s=e.shadowRoot.querySelector("slot[name=dock-background]"),a=e.shadowRoot.querySelector(".dock-target"),r=e.shadowRoot.querySelector("slot[name=dialog-element]"),l=document.createElement("div");l.style.display="block",l.style.position="fixed",l.style.top=0,l.style.right=0,l.style.bottom=0,l.style.left=0,l.style.zIndex=2147483645;const d=o=>{const s=O(o),r=q(),l=i.top+s.y-n,d=i.left+s.x-t,c=z(),h=Math.min(Math.max(d,0),(r.width-i.width+c.offsetLeft)*c.scale),u=Math.min(Math.max(l,0),(r.height-i.height+c.offsetTop)*c.scale);window.requestAnimationFrame((()=>{a.style.left=`${h}px`,a.style.top=`${u}px`,a.style.bottom="auto",a.style.right="auto",a.style.transform=null,e.refreshDockDialog()}))},c=e=>{e.preventDefault()},h=()=>{p(),r.style.pointerEvents=null,o&&(window.document.body.style.height=null,window.document.body.style.overflow=null),l.parentNode===document.body&&document.body.removeChild(l),setTimeout((()=>{e.classList.remove("dragging")}),1)},u=s=>{if(p(),"dock"!==e.getAttribute("mode"))return;e.classList.add("dragging"),r.style.pointerEvents="none",window.document.body.style.height="100%",window.document.body.style.overflow="hidden",o=!0,document.body.appendChild(l),s.cancelable&&"mousedown"===s.type&&s.preventDefault();const u=O(s),m=z();t=u.x-m.offsetLeft,n=u.y-m.offsetTop,i=a.getBoundingClientRect(),window.addEventListener("touchmove",c,{passive:!1,once:!0}),document.addEventListener("mousemove",d,{passive:!0}),document.addEventListener("touchmove",d,{passive:!0}),document.addEventListener("mouseup",h,{passive:!0}),document.addEventListener("touchend",h,{passive:!0}),document.addEventListener("touchcancel",h,{passive:!0})};function p(){window.removeEventListener("touchmove",c,{passive:!1,once:!0}),document.removeEventListener("mousemove",d,{passive:!0}),document.removeEventListener("touchmove",d,{passive:!0}),document.removeEventListener("mouseup",h,{passive:!0}),document.removeEventListener("touchend",h,{passive:!0}),document.removeEventListener("touchcancel",h,{passive:!0}),o&&(window.document.body.style.height=null,window.document.body.style.overflow=null),o=!1}function m(){}return document.documentElement.addEventListener("touchstart",m,{passive:!0}),s.addEventListener("mousedown",u,{passive:!1}),s.addEventListener("touchstart",u,{passive:!0}),()=>{h(),document.documentElement.removeEventListener("touchstart",m,{passive:!0}),s.removeEventListener("mousedown",u,{passive:!1}),s.removeEventListener("touchstart",u,{passive:!0})}}"attachShadow"in window.document.createElement("div")&&window.customElements&&!window.customElements.get("glomex-dialog")&&window.customElements.define("glomex-dialog",N);class j extends window.HTMLElement{static get observedAttributes(){return["content-owner-url","content-owner-logo","title","aspect-ratio"]}attributeChangedCallback(e,t,n){const i=this.shadowRoot.querySelector(".logo"),o=this.shadowRoot.querySelector(".title-text");if("content-owner-url"===e&&(i.href=n),"content-owner-logo"===e){const e=n?`url("${n}")`:"none";i.style.backgroundImage=e}"title"===e&&(o.innerHTML=n),"aspect-ratio"===e&&(this.shadowRoot.querySelector(".placeholder").style.aspectRatio=n)}constructor(){super();this.attachShadow({mode:"open"}).innerHTML='<style>\n    :host {\n      display: flex;\n      flex-direction: column;\n      background-color: rgba(33, 33, 33, 0.98);\n      font-size: calc(11px + (14 - 11) * ((100vw - 300px) / (1600 - 300)));\n      font-weight: bold;\n      font-family: Arial, Helvetica, sans-serif;\n      line-height: normal;\n      text-align: left;\n      color: white;\n      overflow: hidden;\n      box-shadow: 0 0 20px 0.09px rgba(0, 0, 0, 0.5);\n    }\n\n    :host([layout=horizontal]) {\n      font-size: calc(9px + (18 - 9) * ((100vw - 300px) / (1600 - 300)));\n      flex-direction: row;\n    }\n\n    .placeholder {\n      position: relative;\n    }\n\n    :host([layout=horizontal]) .placeholder {\n      height: 100%;\n      aspect-ratio: 16 / 9 !important;\n    }\n\n    :host([layout=vertical]) .placeholder {\n      width: 100%;\n    }\n\n    .title {\n      overflow-wrap: break-word;\n    }\n\n    :host([layout=horizontal]) .title {\n      display: flex;\n      flex-direction: row-reverse;\n      flex-grow: 1;\n      padding: 1em;\n      box-sizing: border-box;\n    }\n\n    :host([layout=vertical]) .title {\n      flex-grow: 1;\n      display: flex;\n      align-items: center;\n      width: 100%;\n    }\n\n    .title-text {\n      flex-grow: 1;\n    }\n\n    :host([layout=vertical]) .title-text {\n      margin: 0;\n      padding: 0;\n      overflow: hidden;\n      margin-left: 0.7em;\n      flex-grow: 2;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n      display: -webkit-box;\n    }\n\n    :host([layout=vertical]) .logo-container {\n      flex: 0 0 2em;\n      display: flex;\n      justify-content: center;\n    }\n\n    :host([layout=horizontal]) .logo-container {\n      display: block;\n      float: right;\n    }\n\n    .logo {\n      display: block;\n      border-radius: 3px;\n      background-color: white;\n      background-position: center;\n      background-repeat: no-repeat;\n      background-size: cover;\n      border: 2px solid white;\n      width: 2em;\n      height: 2em;\n      margin-left: 1em;\n    }\n\n    .drag-icon {\n      margin-right: 1vw;\n      opacity: 0.5;\n    }\n\n    .drag-icon svg {\n      width: 1.8em;\n      height: 1.8em;\n    }\n\n    :host([layout=horizontal]) .drag-icon {\n      display: none;\n    }\n    </style>\n    <div class="placeholder"></div>\n    <div part="title" class="title">\n      <div class="logo-container">\n        <a class="logo" target="_blank" rel="noopener noreferrer" tabindex="0"></a>\n      </div>\n      <div class="title-text"></div>\n      <div class="drag-icon">\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">\n          <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>\n        </svg>\n      </div>\n    </div>'}}"attachShadow"in window.document.createElement("div")&&window.customElements&&!window.customElements.get("glomex-dialog-dock-background")&&window.customElements.define("glomex-dialog-dock-background",j);class H extends window.HTMLElement{static get observedAttributes(){return["url"]}attributeChangedCallback(e,t,n){const i=this.shadowRoot.querySelector(".placeholder-image");"url"===e&&(i.style.backgroundImage=`url("${n}")`)}constructor(){super();this.attachShadow({mode:"open"}).innerHTML="<style>\n      :host {\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        display: block;\n        box-sizing: border-box;\n      }\n      .container {\n        width: 100%;\n        height: 100%;\n      }\n      .placeholder-image {\n        background-repeat: no-repeat;\n        background-position: center;\n        background-size: cover;\n        width: 100%;\n        height: 100%;\n      }\n      .placeholder-image-overlay {\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        background-color: rgba(0, 0, 0, 0.6);\n        width: 100%;\n        height: 100%;\n        transition: background-color ease-in-out 300ms;\n      }\n      .placeholder-icon {\n        background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-arrows-angle-contract' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M.172 15.828a.5.5 0 0 0 .707 0l4.096-4.096V14.5a.5.5 0 1 0 1 0v-3.975a.5.5 0 0 0-.5-.5H1.5a.5.5 0 0 0 0 1h2.768L.172 15.121a.5.5 0 0 0 0 .707zM15.828.172a.5.5 0 0 0-.707 0l-4.096 4.096V1.5a.5.5 0 1 0-1 0v3.975a.5.5 0 0 0 .5.5H14.5a.5.5 0 0 0 0-1h-2.768L15.828.879a.5.5 0 0 0 0-.707z'/%3E%3C/svg%3E\");\n        background-repeat: no-repeat;\n        background-position: center;\n        background-size: 17%;\n        width: 100%;\n        height: 100%;\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        pointer-events: none;\n      }\n      .placeholder-image-overlay:hover {\n        background-color: rgba(0, 0, 0, 0.4);\n      }\n    </style>\n    <div class=\"placeholder-image\">\n      <div part=\"image-overlay\" class=\"placeholder-image-overlay\"></div>\n    </div>\n    <div part=\"icon\" class=\"placeholder-icon\"></div>"}}"attachShadow"in window.document.createElement("div")&&window.customElements&&!window.customElements.get("glomex-dialog-placeholder")&&window.customElements.define("glomex-dialog-placeholder",H);class U extends window.HTMLElement{connectedCallback(){this.addEventListener("animationend",(()=>{this.style.display="none"}))}constructor(){super();this.attachShadow({mode:"open"}).innerHTML='<style>\n      :host {\n        display: block;\n        font-size: calc(11px + (18 - 11) * ((100vw - 300px) / (1600 - 300)));\n        position: absolute;\n        display: none;\n        top: 4em;\n        right: -250px;\n        background: rgba(0, 0, 0, 0.6);\n        padding: 6px 10px 5px 8px;\n        align-items: center;\n        text-align: left;\n        color: white;\n        pointer-events: none;\n        border-radius: 10px 0 0 10px;\n        animation: glomex-rotate-to-fullscreen-toast 4s ease-in-out 1s 1 forwards;\n      }\n\n      .glomex-rotate-to-fullscreen-icon {\n        display: inline-block;\n        vertical-align: middle;\n        margin-right: 3px;\n        margin-top: -3px;\n        animation: glomex-spin-phone 1.5s ease-in-out 2s 1 forwards;\n        transform-origin: 50% 50%;\n        width: 25px;\n        height: 25px;\n      }\n\n      .glomex-rotate-to-fullscreen-icon svg {\n        width: 100%;\n        height: 100%;\n      }\n\n      @keyframes glomex-spin-phone {\n        70% {\n          transform: rotate(90deg);\n        }\n        100% {\n          transform: rotate(90deg);\n        }\n      }\n\n      @keyframes glomex-rotate-to-fullscreen-toast {\n        0% {\n          right: -250px;\n        }\n        15% {\n          right: 0;\n        }\n        90% {\n          right: 0;\n        }\n        100% {\n          right: -250px;\n        }\n      }\n    </style>\n    <span class="glomex-rotate-to-fullscreen-icon">\n      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-phone" viewBox="0 0 16 16">\n      <path d="M11 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h6zM5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H5z"/>\n      <path d="M8 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>\n    </svg>\n    </span>\n    '+("de"===function(e){const t=(e.navigator.language||e.navigator.userLanguage||"en").toLowerCase();return t.split("-")[0]}(window)?"Drehen für Vollbild":"Rotate to fullscreen")}}"attachShadow"in window.document.createElement("div")&&window.customElements&&!window.customElements.get("glomex-rotate-to-fullscreen")&&window.customElements.define("glomex-rotate-to-fullscreen",U);const V="glomex-player",B="glomex-player-wrapper",W=({glomexPlayer:e,window:t,pageSessionId:n})=>{const i=function(e,t){const n=t.GLOMEX_PLAYER_VERSION;return e.indexOf("/integration/1/")>-1&&n?e.replace(/\/integration\/1\//,`/integration/${n}/`):e}(y(),t),o=function(e,t){const{integrationId:n,playlistId:i,playlistIndex:o,origin:s,title:a,poster:r,teaserVideo:l}=t.dataset;return{integrationId:n,playlistId:i,origin:s,title:a,poster:r,teaserVideo:l,playlistIndex:o||0,pageUrl:e.location.href.split("#")[0]}}(t,e),s=`${i}iframe-player.html?${h(o,{ignoreEmptyFields:!0})}`,r=function(e){let t={};const n=e.querySelector('script[type="application/json"]');if(n&&n.innerText)try{t=JSON.parse(n.innerText)}catch(e){console.error(`Error parsing inline JSON settings: ${n.innerText}`)}return t}(e);let l="inline";((e.getAttribute("act")||"").indexOf("initially-hidden")>-1||(e=>"hidden"===e.getAttribute("act"))(e)||e.onPassback)&&(l="hidden");const u=J(e.dataset.aspectRatio),m=u/.6,g=t.performance&&t.performance.timing&&t.performance.timing.requestStart;e.style.display="block";const v=e.getBoundingClientRect();e.style.display=null;const b=16/9*(3/4)*.25*v.width/(16/9),f=v.width/(v.width/u+b)||16/12;e.innerHTML=`\n    <glomex-dialog mode="${l}"\n      part="player-dialog"\n      dock-aspect-ratio="${f}"\n      dock-sticky-aspect-ratio="${m}"\n      aspect-ratio="${u}"\n      rotate-to-fullscreen\n    >\n      <div slot="dialog-element" part="player-wrapper" style="aspect-ratio: ${u} / 1;" tabindex="-1" class=${B}>\n        <glomex-rotate-to-fullscreen/>\n      </div>\n      <glomex-dialog-dock-background aspect-ratio="${u}" slot="dock-background"></glomex-dialog-dock-background>\n      <glomex-dialog-placeholder part="player-placeholder" slot="placeholder"></glomex-dialog-placeholder>\n    </glomex-dialog>\n  `;const w=e.getElementsByClassName(B)[0],{context:_={}}=t,x=Array.prototype.slice.call(t.document.querySelectorAll('glomex-player, div[data-glomex-player="true"]')),k=Array.prototype.slice.call(t.document.querySelectorAll("glomex-integration")).reduce(((e,t)=>{if(!t.shadowRoot)return[...e];const n=Array.prototype.slice.call(t.shadowRoot.querySelectorAll("glomex-player"));return[...e,...n]}),[]),E=[...x,...k].filter((t=>t!==e)).map((e=>{const t=e.parentGlomexIntegration||{};return{integrationId:e.dataset.integrationId,playlistId:e.dataset.playlistId,variantId:t.variantId}})).filter((e=>e.integrationId)),A=e.parentGlomexIntegration||{},I=!!t.HTMLElement.prototype.attachShadow,C=("inline"===e.getAttribute("mode")||-1!==t.location.search.indexOf("glomexInlineMode")||"glomex-script"===e.dataset.origin||"content-plugin"===e.dataset.origin||A.inline||Y(t))&&I,P=I&&!Y(e.ownerDocument.defaultView)&&"content-plugin"!==e.dataset.origin?["hidden","inline","dock","lightbox"]:["hidden","inline"],{title:S,description:M,language:L,publishedTime:R}=function(e){var t,n;let i,o,s,a;const{head:r}=e.document||{},l=null===(t=e.document)||void 0===t?void 0:t.querySelector("html"),d=null===(n=e.document)||void 0===n?void 0:n.querySelector('script[type="application/ld+json"]');let c={};try{c=JSON.parse((null==d?void 0:d.textContent)||"{}")}catch(e){}if(r&&!Y(e)){var h,u,p,m,g;i=(null===(h=r.querySelector('meta[property="og:title"]'))||void 0===h?void 0:h.getAttribute("content"))||(null===(u=r.querySelector("title"))||void 0===u?void 0:u.innerText),o=(null===(p=r.querySelector('meta[property="og:description"]'))||void 0===p?void 0:p.getAttribute("content"))||(null===(m=r.querySelector('meta[name="description"]'))||void 0===m?void 0:m.getAttribute("content")),s=(null==l?void 0:l.getAttribute("lang"))||(null==l?void 0:l.getAttribute("xml:lang")),a=c.dateModified||(null===(g=r.querySelector('meta[property="article:modified_time"]'))||void 0===g?void 0:g.getAttribute("content"))||""}return{title:i,description:o,language:s,publishedTime:a}}(t),T={pageSessionId:n,pageUrl:t.location.href,pageStartTime:_.startTime||g,otherIntegrations:E,ab:G(t.document),variantId:A.variantId,placement:e.dataset.placement||A.placement||void 0,renderMode:C?"inline":"iframe",cpm:e.cpm,presentationMode:l,supportedPresentationModes:P,inlineSettings:r,pageTitle:S,pageDescription:M,pageLanguage:L,pagePublishedTime:R};if(C){const e=w.attachShadow({mode:"open"});let n;!o.playlistId||0!==o.playlistId.indexOf("v-")&&0!==o.playlistId.indexOf("dv-")||o.poster&&(n=`url(${o.poster})`);const s=t.document.createElement("div");o.integrationId&&n&&(s.style.backgroundImage=n,s.style.backgroundSize="cover",s.style.backgroundRepeat="no-repeat",s.style.backgroundPosition="center"),s.style.width="100%",s.style.height="100%";const r=t.document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("href",`${i}iframe-player.css`),e.appendChild(s),e.appendChild(r),s.addEventListener("click",(e=>{e.stopPropagation()})),p(i),Y(t)&&!t.frameElement&&(t.document.querySelector("body").style.overflow="hidden");const l=`${i}iframe-player.js`,d=function(e){const t=new e.MessageChannel,n={_onmessage:void 0,postMessage:(...e)=>(e[0]&&e[0].type===a&&t.port1.postMessage(...e),t.port2.postMessage(...e)),get onmessage(){return this._onmessage},set onmessage(e){t.port2.onmessage=e}};return{getPort1:()=>Promise.resolve(t.port1),getPort2:()=>Promise.resolve(n)}}(t);return import(l).then((({init:e})=>{const t=e(s,{getPort:d.getPort2,setupConfig:o,pageEnvironment:T}),n=new c(V,d.getPort1);return n.api.activate=t.activate.bind(t),n.api.unmute=t.unmute.bind(t),n.api.stop=t.stop.bind(t),n.api.play=()=>setTimeout((()=>t.play()),1),n.api.setPlaylistIndex=(...e)=>setTimeout((()=>t.setPlaylistIndex(...e)),1),n}))}const O=t.document.createElement("iframe");return O.setAttribute("frameborder","0"),O.setAttribute("allowfullscreen","true"),O.setAttribute("allow","fullscreen; accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; payment"),O.setAttribute("referrerpolicy","unsafe-url"),O.setAttribute("scrolling","no"),Y(t)?t.fetch(`${i}iframe-player.html?x-request=fetch`).then((e=>e.text())).then((e=>(O.setAttribute("name",JSON.stringify({...T,queryProps:o})),function({iframe:e,doc:t,targetNode:n,onAppended:i}){n.appendChild(e),e.contentDocument.open(),"function"==typeof i&&i(e),e.contentDocument.write(t),e.contentDocument.close()}({iframe:O,doc:e,targetNode:w}),new c(V,(()=>d(t,(()=>O.contentWindow))))))):(O.setAttribute("name",JSON.stringify(T)),O.setAttribute("title","glomex video player"),"inline"===l&&O.setAttribute("loading","lazy"),O.src=s,w.appendChild(O),Promise.resolve(new c(V,(()=>d(t,(()=>w.querySelector("iframe").contentWindow))))))};function Y(e){try{return e.self!==e.top}catch(e){return!0}}function J(e){let[t,n]=String(e).split(":").map(Number);return(Number.isNaN(t)||Number.isNaN(n))&&(t=16,n=9),t/n}const Q=["ad-19","ad-197","ad-2","ad-2-160x600","ad-21","ad-213","ad-250","ad-250x300"];function G(e){const t=e.createElement("div");t.id=Q[Math.floor(Math.random()*Q.length)],e.body.appendChild(t);const n=null===t.offsetParent;return e.body.removeChild(t),n}const X="glomexUser",Z=/^[0-9a-zA-Z+.=/_\-$,{}]{22,150}$/;const K={"id5-sync.com":{name:"id5Id",gvlId:131},"pubcid.org":{name:"sharedId",gvlId:967},"criteo.com":{name:"criteoId",gvlId:91},"crwdcntrl.net":{name:"lotamePanoramaId",gvlId:95},"liveramp.com":{name:"liverampId",gvlId:97},"netid.de":{name:"netId",gvlId:967},"utiq.com":{name:"utiqId",gvlId:967},"uidapi.com":{name:"unifiedId2Id",gvlId:21},"euid.eu":{name:"euId",gvlId:21},"google.com":{name:"pairId",gvlId:755}};function ee(e){const t=function(e){const t=["pbjs"].concat(e._pbjsGlobals||[]).find((t=>e[t]&&Array.isArray(e[t].que)));return t?e[t]:void 0}(e);return t?new Promise((e=>{t.que.push((()=>{try{t.getUserIdsAsync().then((()=>e(function(e){const t=[];return e.forEach((e=>{const n=K[e.source];n&&t.push({name:n.name,id:e.uids[0].id,atype:e.uids[0].atype,ext:e.uids[0].ext,additionalUids:e.uids.slice(1),source:e.source,gvlId:n.gvlId})})),t}(t.getUserIdsAsEids())))).catch((()=>e()))}catch(t){e()}}))})):Promise.resolve([])}const te=e=>e.isPlaying&&!e.isMuted;const ne=new class{get playerElements(){return this._instances.map((e=>e.playerElement))}register(e){this._instances.push(e)}deregister(e){this._instances=this._instances.filter((t=>t.id!==e.id))}isPlayingWithSound(){for(let e=0;e<this._instances.length;e++){const t=this._instances[e];if(te(t))return!0}return!1}otherIntegrationsInDialog(e){for(let t=0;t<this._instances.length;t++){const n=this._instances[t];if(n.id!==e.id&&n.isInDialog())return!0}return!1}exitOthersInPresentationMode(e){this._instances.forEach((t=>{t.id!==e.id&&t.isInDialog()&&t.exitCurrentPresentationMode()}))}pauseOthersPlayingWithSound(e){this._instances.forEach((t=>{t.id!==e.id&&te(t)&&t.pause()}))}constructor(){this._instances=[]}};class ie{get isPlaying(){return this._isPlaying}get isMuted(){return this._isMuted}get playerElement(){return this._playerElement}get id(){return this._id}shouldPlay(){return!(this._playerOrchestration.isPlayingWithSound()&&!this._isMuted)&&(this._isPlaying=!0,!0)}setPlaying(e,t=!1){this._isPlaying=e,this._isPlayingWithSound()&&t&&this._pauseInstancesPlayingWithSound()}pause(){try{this._playerElement.pause()}catch(e){}}setMuted(e){this._isMuted=e,this._isPlayingWithSound()&&this._pauseInstancesPlayingWithSound()}isInDialog(){const e=this._playerElement.querySelector("glomex-dialog");if(e){const t=e.getAttribute("mode");if("dock"===t||"lightbox"===t)return!0}return!1}exitCurrentPresentationMode(){this._playerElement.exitCurrentPresentationMode()}allowDialog(){return!this._playerOrchestration.otherIntegrationsInDialog(this)}_isPlayingWithSound(){return this._isPlaying&&!1===this._isMuted}_pauseInstancesPlayingWithSound(){this._playerOrchestration.pauseOthersPlayingWithSound(this)}destroy(){this._playerOrchestration.deregister(this)}constructor({playerOrchestration:e,createUuid:t,playerElement:n}){this._id=t(),this._isPlaying=!1,this._isMuted=!1,this._playerOrchestration=e,this._playerElement=n,this._playerOrchestration.register(this)}}const oe={center:"center",left:"start",right:"end",top:"start",bottom:"end"},se="glomex-augmentation-wrapper";function ae({window:e,playerElement:t,articleAugmentation:{imageSelector:n,verticalPosition:i,horizontalPosition:o},snapTop:s}){if(!n)return null;const{document:a}=e;let r;try{r=a.querySelector(n||"".trim())}catch(e){return console.error("cannot augment article. Invalid selector: ",e),null}const l=a.querySelector(`.${se}`);if(!r||l)return console.error("no augmentation target found or augmentation already exists"),null;const d=()=>{t._articleAugmentationWasClicked=!0,t.activate(),t.unmute(),t.updatePresentationMode({mode:"dock"}),t.play()},c=a.createElement("div");c.style.position="absolute",c.style.opacity="0",c.style.transition="opacity 1s",c.style.display="flex",c.style.pointerEvents="none",c.style.alignItems=oe[i]||"center",c.style.justifyContent=oe[o]||"center",c.innerHTML='\n    <svg\n    xmlns="http://www.w3.org/2000/svg"\n    fill="white"\n    viewBox="0 0 24 24"\n    stroke-width="0.75"\n    stroke="black"\n    style="height: 25%; aspect-ratio: 1; margin: 20px; filter: drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.75));"\n    id="glomex-teaser-augmentation-button"\n  >\n    <path\n      fill="white"\n      stroke="black"\n      stroke-linecap="round"\n      stroke-linejoin="round"\n      d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"\n    />\n  </svg>\n  ';const h=c.querySelector("#glomex-teaser-augmentation-button");h.addEventListener("click",d),h.style.cursor="pointer",h.style.pointerEvents="auto";const u=a.createElement("div");u.style.position="relative",u.style.zIndex=1,u.classList.add(se);r.parentNode.insertBefore(u,r.nextSibling),u.appendChild(r),u.appendChild(c),c.style.zIndex="1000",c.style.position="absolute",c.style.width="100%",c.style.height="100%",c.style.top="0",c.style.left="0";const p=new e.IntersectionObserver(((e,n)=>{e.forEach((e=>{!t._articleAugmentationWasFullyVisible&&e.intersectionRatio>=.999?t._articleAugmentationWasFullyVisible=!0:t._articleAugmentationWasFullyVisible&&e.intersectionRatio<.99&&(t._articleAugmentationWasClicked||(t.mute(),t.updatePresentationMode({mode:"dock"}),t.play()),n.disconnect())}))}),{threshold:[.99,1],rootMargin:(s?-s:0)+"px 0px 0px 0px"});p.observe(c),e.setTimeout((()=>{c.style.opacity="1"}),1);return()=>{c.removeEventListener("click",d),p.disconnect(),u.parentNode.insertBefore(r,u),c.remove(),t._articleAugmentationWasClicked=!1,t._articleAugmentationWasFullyVisible=!1}}const re=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent),le=/^[0-9a-zA-Z+.=/_\-$,{}]{22,150}$/;function de(e){const t=e.activeElement;return t?t.shadowRoot?de(t.shadowRoot):t:null}function ce(e){Y(window)&&re?setTimeout((()=>{const t=de(window.document),n=window.document.createElement("input");n.setAttribute("readyonly","readonly"),n.style.position="absolute",n.style.top="0",n.style.left="-1000px",n.style.width="0px",e.insertBefore(n,e.firstElementChild),n.focus(),setTimeout((()=>{e.removeChild(n),t&&t.focus()}),50)}),50):e.scrollIntoView()}const he=((e,t,n,i,o)=>{const s=n();return class extends e.HTMLElement{attributeChangedCallback(e){"data-aspect-ratio"===e&&this._updateAspectRatio()}static get observedAttributes(){return["data-aspect-ratio"]}disconnectedCallback(){this.isConnected||(this._communication&&this._communication.api&&this._communication.api.disconnect&&this._communication.api.disconnect(),this.innerHTML="",e.removeEventListener("resize",this._onResize,!1),this._iframeObserver&&(this._iframeObserver.disconnect(),this._iframeObserver=void 0),this._playerSizeObserver&&(this._playerSizeObserver.disconnect(),this._playerSizeObserver=void 0),this._earlyNonFullyVisibleObserver&&this._earlyNonFullyVisibleObserver.disconnect(),this._autoDockObserver&&this._autoDockObserver.disconnect(),this._communication&&this._communication.removeAllListeners(),this._orchestrationInstance&&(this._orchestrationInstance.destroy(),this._orchestrationInstance=null),this._removeArticleAugmentation&&(this._removeArticleAugmentation(),this._removeArticleAugmentation=null),e.__tcfapi&&e.__tcfapi("removeEventListener",2,this._setConsent),this._renderPromise=void 0)}connectedCallback(){var t;(!this.dataset.integrationId&&this.dataset.playerId&&(this.dataset.integrationId=this.dataset.playerId),this._renderPromise)||(this._orchestrationInstance=new ie({playerOrchestration:ne,createUuid:n,playerElement:this}),this._renderPromise=(t=0,new Promise((e=>setTimeout(e,t)))).then((()=>(this._decoratePassback(),this.dataset.origin||(this.dataset.origin=this.parentGlomexIntegration&&this.parentGlomexIntegration.origin||V),W({glomexPlayer:this,window:e,pageSessionId:s}).then((t=>(this.style.height||(this.style.height="auto",setTimeout((()=>{this.style.height=null}),0)),e.addEventListener("resize",this._onResize,!1),new Promise((e=>{t.once(t.EVENT_CONNECT,(()=>{this._communication=t,this._onConnect(),e()}))})))))))))}_onConnect(){this._onResize(),this._playerSizeObserver=new e.ResizeObserver((()=>this._onResize())),this._playerSizeObserver.observe(this),this._iframeObserver=i({window:e,observedNode:this.querySelector(`.${B}`)},this._onVisibilityChange.bind(this)),o({window:e,observedNode:this.querySelector(`.${B}`)},(e=>{setTimeout((()=>{if(e&&0===this.visibility)try{this._communication.api.setVisibility(-3)}catch(e){}}),1)})),this._resolveConnectPromise(),ee(e).then((e=>{this._updateUserIds(e)}));const{events:n}=this._communication;this._communication.once(n.PLAYLIST_CREATE,this._onInitialPlaylistCreate.bind(this)),this._communication.on(n.ENVIRONMENT_UPDATEPRESENTATIONMODE,this._onUpdatePresentationMode.bind(this)),this._communication.on(n.PLAYER_READY,this._onReady.bind(this)),this._communication.on(n.PLAYLISTITEM_SELECT,this._onPlaylistItemSelect.bind(this)),this._communication.on(n.PLAYLISTITEM_BEGIN,this._onPlaylistItemBegin.bind(this)),this._communication.on(n.PLAYER_PLAY,this._onPlay.bind(this)),this._communication.on(n.PLAYER_PAUSE,this._onPause.bind(this)),this._communication.on(n.SHOULD_PLAY,(()=>{this._orchestrationInstance.shouldPlay()&&this._communication.api.play()})),this._communication.on(n.PLAYER_VOLUMECHANGE,(({player:e})=>{this._unmutedOnce||e.muted||(this._unmutedOnce=!0),this._orchestrationInstance.setMuted(e.muted)})),Object.keys(n).forEach((e=>{const i=n[e];this._communication.on(i,(e=>{this.dispatchEvent(new t(i,{detail:e})),this._handleTrackingEventCompat(i,e)}))})),this._apiQueue.forEach((({name:e,args:t})=>{this[e](...t)})),this._apiQueue=[];const s=this.querySelector("glomex-dialog"),a=this.querySelector("glomex-dialog-placeholder"),r=s.getAttribute("mode");r&&("inline"===r&&(a.style.opacity=null),"dock"===r&&(a.style.opacity="1"),"hidden"===r&&(a.style.opacity=null),this.updatePresentationMode({mode:r})),s.addEventListener("modechange",(e=>{const{mode:t,internal:n}=e.detail;"inline"===t&&(a.style.opacity=null),"dock"===t&&(a.style.opacity="1"),n&&("hidden"===t&&(a.style.opacity=null,this.pause()),this.updatePresentationMode({mode:t}),this._updateAspectRatio())})),e.__tcfapi&&e.__tcfapi("addEventListener",2,this._setConsent),this.dispatchEvent(new t(this._communication.EVENT_CONNECT))}_setConsent(e,t){if(!this._communication||!this._communication.api.setConsent)return this._apiQueue.push({name:"_setConsent",args:[e,t]});t&&this._communication.api.setConsent(e)}_updateUserIds(e){if(!this._communication||!this._communication.api.updateUserIds)return this._apiQueue.push({name:"_updateUserIds",args:[e]});this._communication.api.updateUserIds(e)}track(e,t){if(!this._communication||!this._communication.api.track)return this._apiQueue.push({name:"track",args:[e,t]});this._communication.api.track(e,t)}_handleTrackingEventCompat(e,t){const n={playlistitemselect:"Lifecycle Create",playlistitembegin:["Lifecycle Play","Lifecycle Start"],playlistitemcomplete:"Lifecycle End",contentbegin:"Content Begin",contentcomplete:"Content Complete",pause:"Pause",play:["Play","Resume"],adbegin:["AdRoll Start","Ad Begin"],adcomplete:["Ad Complete"]};n[e]&&("adbegin"===e&&(this._compatIsInAdBreak=!0),"adcomplete"!==e&&"contentbegin"!==e||(this._compatIsInAdBreak=!1),"string"!=typeof n[e]?Array.isArray(n[e])&&n[e].forEach((e=>{this._dispatchTrackingEventCompat(e,t)})):this._dispatchTrackingEventCompat(n[e],t))}_dispatchTrackingEventCompat(e,n){const i={};"Resume"===e&&(i.runtime={mediaType:this._compatIsInAdBreak?"ad":"content"});const o={...n,...i};this.dispatchEvent(new t("trackingevent",{detail:{name:e,payload:o}}))}_onPlay({player:e}){this._orchestrationInstance.setPlaying(!0,e.byUser),"hidden"===this.querySelector("glomex-dialog").getAttribute("mode")&&this.pause()}_onPause(){this._orchestrationInstance.setPlaying(!1)}_onVisibilityChange({ceiledIntersectionRatio:e,scrollDown:t}){const n=this.querySelector("glomex-dialog").getAttribute("mode");this.visibility="fullscreen"===n?1:e,this._communication.api.setVisibility(this.visibility,{scrollDown:t})}_onResize(){const t=e.document.documentElement||{},n=e.document.body||{},i=this.getBoundingClientRect(),o=e.pageXOffset||t.scrollLeft||n.scrollLeft,s=e.pageYOffset||t.scrollTop||n.scrollTop,a=n.querySelector&&n.querySelector("article"),r=a&&a.getBoundingClientRect();this._setPageDimensions({viewportHeight:e.innerHeight,viewportWidth:e.innerWidth,pageWidth:Math.max(n.scrollWidth,n.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth),pageHeight:Math.max(n.scrollHeight,n.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),top:i.top+s,left:i.left+o,articleTop:null!=(null==r?void 0:r.top)?r.top+s:void 0,articleLeft:null!=(null==r?void 0:r.left)?r.left+o:void 0,width:i.width,height:i.height,topWindow:e.top===e.self})}_setPageDimensions(...e){if(!this._communication||!this._communication.api.setPageDimensions)return this._apiQueue.push({name:"_setPageDimensions",args:e});this._communication.api.setPageDimensions(...e)}_onInitialPlaylistCreate({playlist:e}){e&&0!==e.length&&("hidden"===this.getAttribute("act")||this.onPassback||this.updatePresentationMode({mode:"inline"}))}_onPlaylistItemBegin(){this._orchestrationInstance.setPlaying(!0,!1)}_onPlaylistItemSelect({content:e,playlistContext:{playlistIndex:t}}){this._currentPlaylistIndex=t,this._isContentBrandingEnabled=e.enableBranding;const{title:n,poster:i="",contentOwner:{url:o="",logo:s=""}}=e;this.querySelector("glomex-dialog-placeholder").setAttribute("url",i);const a=this.querySelector("glomex-dialog-dock-background");a.setAttribute("title",n),a.setAttribute("content-owner-url",o),a.setAttribute("content-owner-logo",s),this._updateAspectRatio()}_onReady(t={}){const{environment:{pageHostname:i,consentData:{glomexVendor:o,hasPurpose1Consent:s}={}}}=t,{userId:a}=function({window:e,createUuid:t,glomexVendor:n,hasPurpose1Consent:i,pageHostname:o}){if("consent"!==n||!i)return{};let s={domains:new Set,id:void 0,created:void 0};try{s=JSON.parse(e.localStorage.getItem(X))||{}}catch(e){}s.id&&Date.now()-s.created>31536e6&&(s.id=void 0,s.created=void 0,s.domains=new Set),s.id&&Z.test(s.id)||(s.id=t("user-id"),s.created=Date.now()),Array.isArray(s.domains)?s.domains=new Set(s.domains):s.domains=new Set,s.domains.add(o),s.domains=Array.from(s.domains);try{e.localStorage.setItem(X,JSON.stringify(s))}catch(e){return{}}return{userId:s.id,userDomainCount:s.domains.length}}({window:e,createUuid:n,glomexVendor:o,hasPurpose1Consent:s,pageHostname:i});if(t.config){this._removeArticleAugmentation&&this._removeArticleAugmentation();const n=t.config.sticky||{};let i=n.snapTop;null==i&&(i=parseInt(String(n.top).replace(/px$/,""),10)||0),this._removeArticleAugmentation=ae({window:e,playerElement:this,articleAugmentation:t.config.articleAugmentation,snapTop:i}),this._handleDockConfig({...t.config.sticky,dockEnabled:t.player.dockEnabled})}const r=[],l=(e.glomexPublisherContext||{}).userId;if(l&&le.test(l)&&r.push({name:"ppid",source:i,id:l,ext:{stype:"ppuid"},gvlId:967}),!re||Y(e))return this._updateUserIds(r);a&&r.push({name:"glomexId",source:"glomex.com",id:a,ext:{stype:"ppuid"},gvlId:967}),this._updateUserIds(r)}_handleDockConfig(t){const n=`${t.top} ${t.right} ${t.bottom} ${t.left}`,o=this.querySelector("glomex-dialog"),s=this.querySelector("glomex-dialog-dock-background"),a=this.getAttribute("act")||"";let r=t.snapTop;null==r&&(r=parseInt(String(t.top).replace(/px$/,""),10)||0),t.dockTargetSelector&&o.setAttribute("dock-target",t.dockTargetSelector),o.setAttribute("dock-target-inset",n),o.setAttribute("dock-sticky-target-top",r),"hidden"!==a&&0===t.position.indexOf("stickyTop")?(o.setAttribute("dock-mode","sticky"),s.setAttribute("layout","horizontal"),"stickyTop"===t.position&&o.setAttribute("dock-mode-not-expanded","")):s.setAttribute("layout","vertical"),!t.dockEnabled||0!==t.position.indexOf("stickyTop")&&null==t.snapTop||(this._earlyNonFullyVisibleObserver=i({window:e,marginTop:o.getAttribute("dock-sticky-target-top"),observedNode:this,customThreshold:[.1,.5,1]},(({scrollDown:e,intersectionRatio:t})=>{e&&t<1&&(this._communication.api.setVisibility(.9,{scrollDown:e}),this._earlyNonFullyVisibleObserver.disconnect())}))),t.dockEnabled&&0===t.position.indexOf("stickyTop")&&"hidden"!==a&&(this._autoDockObserver=i({window:e,marginTop:o.getAttribute("dock-sticky-target-top"),observedNode:this,customThreshold:[.1,.5,1]},(({scrollDown:e,intersectionRatio:n})=>{const i=this.querySelector("glomex-dialog").getAttribute("mode");e&&n<1&&this.isPlaying()&&"dock"!==o.getAttribute("mode")?this.updatePresentationMode({mode:"dock"}):!e&&n>=.9&&"dock"===i&&0===t.position.indexOf("stickyTop")&&this.updatePresentationMode({mode:"inline",shouldFocus:!0})})))}_updateAspectRatio(){const e=this.querySelector("glomex-dialog"),t=this.querySelector(`.${B}`);if(!e)return;e.setAttribute("aspect-ratio",this.dataset.aspectRatio||"16:9");const n=e.getAttribute("mode");"dock"===n&&this._isContentBrandingEnabled&&(t.style.aspectRatio=J("16:12")),"dock"!==n||this._isContentBrandingEnabled||(t.style.aspectRatio=J(this.dataset.aspectRatio)),"inline"===n&&(t.style.aspectRatio=J(this.dataset.aspectRatio))}_onUpdatePresentationMode(n){const i=n.player.presentationMode,{shouldFocus:o=!1,byUser:s=!1}=n.player,a=this.querySelector("glomex-dialog"),r=a.getAttribute("mode");if(r!==i){if("dock"===i)s||this._orchestrationInstance.allowDialog()?(ne.exitOthersInPresentationMode(this._orchestrationInstance),a.setAttribute("mode",i),this._updateAspectRatio()):this.exitCurrentPresentationMode();else if("lightbox"===i)ne.exitOthersInPresentationMode(this._orchestrationInstance),a.setAttribute("mode",i),Y(e)&&ce(e.document.body);else if("inline"===i){this.querySelector("glomex-dialog-placeholder").style.opacity="1",o&&!function(e){const t=e.getBoundingClientRect(),{document:n}=window;return t.bottom>0&&t.right>0&&t.left<(window.innerWidth||n.documentElement.clientWidth)&&t.top<(window.innerHeight||n.documentElement.clientHeight)}(this)?(setTimeout((()=>{a.setAttribute("mode",i),this._updateAspectRatio()}),300),this.scrollIntoView({block:"center",behavior:"smooth"})):(a.setAttribute("mode",i),this._updateAspectRatio())}else"hidden"===i?(a.setAttribute("mode",i),this.pause()):a.setAttribute("mode",i);"hidden"!==i&&"inline"!==i||"external-modal"!==r||this.dispatchEvent(new t("modalclose",{detail:{}}))}}_decoratePassback(){if(this._passbackDecorated)return;this._passbackDecorated=!0;if("function"!=typeof this.onPassback)return;this.updatePresentationMode({mode:"hidden"});let e={};const t=()=>{Object.keys(e).forEach((t=>{this.removeEventListener(t,e[t])})),e={}},n=()=>{t(),this.onPassback(),this.parentNode&&this.parentNode.removeChild(this),this.onPassback=void 0},i=()=>{n()},o=e=>{e.detail.player.adsAvailable?(t(),this.updatePresentationMode({mode:"inline"}),this.onPassback=void 0):n()},s=e=>{this.removeEventListener("ready",s),e.detail.player.autoplay||n()};this.addEventListener("adbreakready",o),this.addEventListener("integrationabort",i),this.addEventListener("ready",s),e.adbreakready=o,e.integrationabort=i,e.ready=s}_assertReadyness(e){if(!this._communication||!this._communication.api[e])throw new Error(`"${e}" is available after "ready" event.`)}_assertConnect(e){if(!this._communication||!this._communication.api[e])throw new Error(`"${e}" is available after "connect" event.`)}activate(){this._assertConnect("activate"),this._communication.api.activate()}setup({integrationId:e,playerId:t,playlistId:n,origin:i="dynamic-glomex-player",playlistIndex:o=0,...s}){const a={integrationId:e,playlistId:n,playlistIndex:o,origin:i,...s};if(a.integrationId=e||t,!this._communication||!this._communication.api.setup)return this._apiQueue.push({name:"setup",args:[a]});this.reset({resetInternally:!1}),this.dataset.integrationId=a.integrationId,this.dataset.playlistId=n,this.dataset.playlistIndex=o,this.dataset.origin=i,this._communication.api.setup(a)}reset({resetInternally:e=!0}={}){if(!this._communication||!this._communication.api.reset)return this._apiQueue.push({name:"reset",args:[{resetInternally:e}]});this._currentPlaylistIndex=0,Object.keys(this.dataset).forEach((e=>{delete this.dataset[e]})),e&&this._communication.api.reset()}stop(){this._assertReadyness("stop"),this._communication.api.stop()}isPlaying(){return this._orchestrationInstance.isPlaying}play({byUser:e=!1}={}){["a97joioyqjb7ywnir","19si2d0jdo9uyl4","yddswnmdjjfr6yt9","40599z13jqz7rx9w"].indexOf(this.dataset.integrationId)>-1||(this._assertReadyness("play"),this.activate(),this._communication.api.play({byUser:e}))}pause({byUser:e=!1}={}){this._assertReadyness("pause"),this._communication.api.pause({byUser:e}),this._orchestrationInstance.setPlaying(!1)}mute(){["a97joioyqjb7ywnir","19si2d0jdo9uyl4","yddswnmdjjfr6yt9","40599z13jqz7rx9w"].indexOf(this.dataset.integrationId)>-1||(this._assertReadyness("mute"),this._communication.api.mute())}unmute(){this._assertReadyness("unmute"),this._communication.api.unmute()}get presentationMode(){return this.querySelector("glomex-dialog").getAttribute("mode")}updatePresentationMode({mode:e,shouldFocus:t}){if(!this._communication||!this._communication.api.updatePresentationMode)return this._apiQueue.push({name:"updatePresentationMode",args:[{mode:e,shouldFocus:t}]});this._communication.api.updatePresentationMode({mode:e,shouldFocus:t})}exitCurrentPresentationMode(){this._assertReadyness("exitCurrentPresentationMode"),this._communication.api.exitCurrentPresentationMode()}focus({preventScroll:e=!1}={}){const t=this.querySelector(`.${B}`);t.focus({preventScroll:e}),e||ce(t)}setPlaylistIndex(e){this._assertReadyness("setPlaylistIndex"),this._communication.api.setPlaylistIndex(Number(e))}enableModalMode(){this.updatePresentationMode({mode:"external-modal"})}hideUi(){this._assertReadyness("hideUi"),this._communication.api.hideUi()}showUi(){this._assertReadyness("showUi"),this._communication.api.showUi()}constructor(){super(),this._apiQueue=[],this._iframeObserver=void 0,this._communication=void 0,this.visibility=0,this._compatIsInAdBreak=!1,this._connectPromise=new Promise((e=>{this._resolveConnectPromise=e})),this._unmutedOnce=!1,this._currentPlaylistIndex=0,this._setConsent=this._setConsent.bind(this),this._onResize=this._onResize.bind(this),this._playerSizeObserver=void 0,this._renderPromise=void 0,this._passbackDecorated=!1,this._removeArticleAugmentation=null}}})(window,n,(function(){return window&&window.crypto&&"function"==typeof window.crypto.randomUUID?window.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}),(({window:e,observedNode:t,customThreshold:n,marginTop:o=0},s)=>{let a,r;try{a=new e.IntersectionObserver((e=>{if(e&&e.length<1)return;const{intersectionRatio:t,boundingClientRect:n,intersectionRect:i,rootBounds:a}=e[0],l=parseFloat(String(parseFloat(Math.ceil(100*t)/100)).substring(0,3));let d;a?(d=n.top-o<0&&r>n.top,r=n.top):(d=r<i.top,r=i.top),s({ceiledIntersectionRatio:l,intersectionRatio:t,scrollDown:d,entries:e})}),{threshold:n||i(),rootMargin:(o?-o:0)+"px 0px 0px 0px"}),a.observe(t)}catch(e){s({ceiledIntersectionRatio:-1,intersectionRatio:-1,autoDock:!1,entries:[]})}return{disconnect:()=>{a&&a.disconnect()}}}),(({window:e,observedNode:t},n)=>{let i;const o=e.document.documentElement,s=o.clientHeight>500&&o.clientWidth>500?500:370;try{i=new e.IntersectionObserver((e=>{e&&e.length<1||e[0].intersectionRatio<=0||(n(!0),i.disconnect())}),{rootMargin:`${s}px ${.8*s}px`}),i.observe(t)}catch(e){n(!1)}})),ue=e=>{const t=window.document.createElement("glomex-player");Object.keys(e.dataset).forEach((n=>{"act"===n?t.setAttribute("act",e.dataset[n]):t.dataset[n]=e.dataset[n]})),delete t.dataset.glomexPlayer,Object.keys(e.style).forEach((n=>{t.style[n]=e.style[n]})),e.parentNode.insertBefore(t,e.nextSibling),e.parentNode.removeChild(e)},pe=e=>{e.forEach((e=>{const t=e.addedNodes[0];"childList"===e.type&&t&&t.dataset&&t.dataset.glomexPlayer&&ue(t)}))};if(!window.customElements.get("glomex-player")){Array.prototype.slice.call(window.document.querySelectorAll('[data-glomex-player="true"]')).forEach(ue);new window.MutationObserver(pe).observe(window.document,{childList:!0,subtree:!0}),window.customElements.define("glomex-player",he)}</script>
</body>
</html>
