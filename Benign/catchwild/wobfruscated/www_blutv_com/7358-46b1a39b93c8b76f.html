<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>7358-46b1a39b93c8b76f.html</title>
</head>
<body>
<script>"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7358],{27358:function(t,e,a){a.r(e),a.d(e,{actionCancelSuggestion:function(){return H},actionChangeName:function(){return y},actionChangePassword:function(){return g},actionChangePaymentInfo:function(){return k},actionFetchMe:function(){return w},actionForgotEmail:function(){return E},actionForgotPassword:function(){return d},actionLogin:function(){return _},actionLogout:function(){return S},actionNewIyzicoPaymentInfo:function(){return b},actionNewPaymentInfo:function(){return v},actionNotificationSettings:function(){return N},actionQuickRegister:function(){return T},actionRecovery:function(){return A},actionRecoveryCheck:function(){return l},actionRegister:function(){return p},actionSocialLogin:function(){return O},actionSocialMatch:function(){return U},actionSocialRevoke:function(){return R},actionSubscriptionCancel:function(){return I},actionUpdateCardName:function(){return m},actionUpdateEmail:function(){return f},actionVerifyPassword:function(){return C}});var n=a(53531);let o=t=>({type:t}),r=t=>{let{error:e}=t;return{type:"API_ERROR",error:e}},i=t=>{let{error:e,exceptionMsg:a}=t;return{type:"API_SERVER_ERROR",serverMessage:`Actions Auth OperationFail ${a} Catch`,error:e}},s=t=>({type:"AUTH_OPERATION_WARNING",warning:t}),c=(t,e)=>({type:t,...e}),u=()=>({type:"AUTH_ME_FAIL",user:null,subscription:null,segment:null,notifications:null}),h=t=>{let{req:e,res:n,action:o,token:r}=t,{addCookie:i,removeCookie:s}=a(16757);"add"===o?(i({req:e,res:n,key:"token_a",value:r.accessToken,options:{maxAge:2592e3,path:"/",httpOnly:!0}}),i({req:e,res:n,key:"token_r",value:r.refreshToken,options:{maxAge:2592e3,path:"/",httpOnly:!0}}),i({req:e,res:n,key:"has_loggedin",value:!0,options:{maxAge:2592e3,path:"/"}})):(s({req:e,res:n,key:"token_a"}),s({req:e,res:n,key:"token_r"}),s({req:e,res:n,key:"has_loggedin"}))},w=function(){let{req:t,res:e,queryToken:o=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async w=>{let{addCookie:_,fetchCookie:S,removeCookie:p}=a(16757);return t&&!(o?.accessToken||S({req:t,res:e,key:"token_a"}))?(p({req:t,res:e,key:"has_loggedin"}),w(u())):await fetch(`https://www.blutv.com/api/me${o?`?accessToken=${o.accessToken}&refreshToken=${o.refreshToken}`:""}`,await w((0,n.Z)({req:t,method:"GET"}))).then(t=>t.json()).then(a=>a.status>=200&&a.status<=300?(a.refreshData&&(h({req:t,res:e,action:"add",token:a.refreshData}),delete a.refreshData),S({req:t,res:e,key:"recoveryUser"})&&p({req:t,res:e,key:"recoveryUser"}),w(c("AUTH_ME_SUCCESS",{...a}))):"errors.profileNotFound"===a.errorCode?w(r({error:a})):403===a.status&&"errors.userStatusIsNotValid"===a.errorCode?(h({req:t,res:e,action:"remove"}),_({req:t,res:e,key:"recoveryUser",value:JSON.parse(t.body).username,options:{maxAge:2592e3,path:"/"}}),w(s(a))):(h({req:t,res:e,action:"remove"}),w(t?u():r({error:a})))).catch(a=>(h({req:t,res:e,action:"remove"}),i({error:a,exceptionMsg:"actionFetchMe"}),w(u())))}},_=t=>async e=>(e(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/login",await e((0,n.Z)({userip:!0,device:!0,body:JSON.stringify({...t,username:t.username.trim()})}))).then(t=>t.json()).then(t=>t?.accessToken&&t?.refreshToken?e(c("AUTH_TOKEN_SUCCESS")):403===t.status&&"errors.userStatusIsNotValid"===t.errorCode?e(s(t)):e(r({error:t}))).catch(t=>e(i({error:t,exceptionMsg:"actionLogin"})))),S=()=>async t=>(t(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/logout",await t((0,n.Z)({method:"GET"}))).then(t=>t.json()).then(e=>e.status>=200&&e.status<=300?t(c("AUTH_LOGOUT_SUCCESS",e)):t(r({error:e}))).catch(e=>t(i({error:e,exceptionMsg:"actionLogout"})))),p=t=>async e=>(e(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/register",await e((0,n.Z)({userip:!0,device:!0,body:JSON.stringify({includeDefaultProfile:!0,...t,email:t.email.trim()})}))).then(t=>t.json()).then(async t=>t?.accessToken&&t?.refreshToken?(await e(w()),e(c("AUTH_TOKEN_SUCCESS"))):e(r({error:t}))).catch(t=>e(i({error:t,exceptionMsg:"actionRegister"})))),T=t=>async e=>(e(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/quick-register",await e((0,n.Z)({userip:!0,device:!0,body:JSON.stringify({...t,email:t.email.trim()})}))).then(t=>t.json()).then(async t=>t?.accessToken&&t?.refreshToken?t?.actionMethod==="register"?(await e(w()),e(c("AUTH_REGISTER_SUCCESS"))):e(c("AUTH_LOGIN_SUCCESS")):403===t.status&&"errors.userStatusIsNotValid"===t.errorCode?e(s(t)):e(r({error:t}))).catch(t=>e(i({error:t,exceptionMsg:"actionQuickRegister"})))),A=(t,e)=>async a=>(a(o("AUTH_OPERATION_START")),await fetch(`https://www.blutv.com/api/${"resend"===e?"recovery-set":"recovery"}`,await a((0,n.Z)({userip:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(t=>t.status>=200&&t.status<=300?a(c("AUTH_RECOVERY_SUCCESS")):a(r({error:t}))).catch(t=>a(i({error:t,exceptionMsg:`actionRecovery ${"resend"===e?"Send":""} Catch`})))),l=t=>{let{req:e,token:a}=t;return async t=>await fetch(`https://www.blutv.com/api/recovery-check?token=${a}`,await t((0,n.Z)({req:e,userip:!0,method:"GET"}))).then(t=>t.json()).then(e=>e.status>=200&&e.status<=300?e.recovery?t({type:"AUTH_RECOVERY_CHECK_SUCCESS",recovery:e.recovery}):{type:"AUTH_RECOVERY_CHECK_FAIL"}:e).catch(e=>t(i({error:e,exceptionMsg:"actionRecoveryCheck"})))},y=t=>async e=>await fetch("https://www.blutv.com/api/change-name",await e((0,n.Z)({userip:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(t=>t.status>=200&&t.status<=300?e(c("AUTH_CHANGE_NAME_SUCCESS",t)):{error:t}).catch(t=>e(i({error:t,exceptionMsg:"actionChangeName"}))),E=t=>async e=>(e(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/forgot-email",await e((0,n.Z)({userip:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(t=>t.status>=200&&t.status<=300?e(c("AUTH_FORGOT_EMAIL_SUCCESS",t)):e(r({error:t}))).catch(t=>e(i({error:t,exceptionMsg:"actionForgotEmail"})))),f=function(t){let{req:e,token:a}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async t=>(t(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/update-email",await t((0,n.Z)({req:e,userip:!0,body:JSON.stringify(a)}))).then(t=>t.json()).then(e=>e.status>=200&&e.status<=300?t(o("AUTH_UPDATE_EMAIL_SUCCESS")):t(r({error:{...e,hideGlobalErrorAlert:s?.hideGlobalErrorAlert}}))).catch(e=>t(i({error:e,exceptionMsg:"actionUpdateEmail"}))))},g=t=>async e=>(e(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/change-password",await e((0,n.Z)({userip:!0,device:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(async t=>t.status>=200&&t.status<=300?t.accessToken&&t.refreshToken?(await e(w()),{type:"AUTH_TOKEN_SUCCESS"}):t:e(r({error:t}))).catch(t=>e(i({error:t,exceptionMsg:"actionChangePassword"})))),d=t=>async e=>(e(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/forgot-password",await e((0,n.Z)({userip:!0,body:JSON.stringify({...t,email:t.email.trim()})}))).then(t=>t.json()).then(t=>t.status>=200&&t.status<=300?e(c("AUTH_FORGOT_PASSWORD_SUCCESS",t)):e(r({error:t}))).catch(t=>e(i({error:t,exceptionMsg:"actionForgotPassword"})))),C=t=>{let{password:e,hideGlobalErrorAlert:a=!1}=t;return async t=>(t(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/verify-password",await t((0,n.Z)({userip:!0,body:JSON.stringify({password:e})}))).then(t=>t.json()).then(async e=>e.status>=200&&e.status<=300?t(o("AUTH_VERIFY_PASSWORD_SUCCESS")):t(r({error:{...e,hideGlobalErrorAlert:a}}))).catch(e=>t(i({error:e,exceptionMsg:"actionVerifyPassword"}))))},N=(t,e)=>async a=>(a(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/notifications-settings",await a((0,n.Z)({userip:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(t=>t.status>=200&&t.status<=300?{status:t.status}:a(r({error:{...t,hideGlobalErrorAlert:e?.hideGlobalErrorAlert}}))).catch(t=>a(i({error:t,exceptionMsg:"actionNotificationSettings"})))),O=t=>async e=>(e(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/social-login",await e((0,n.Z)({userip:!0,device:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(async t=>t.status>=200&&t.status<=300?t.accessToken&&t.refreshToken?(await e(w()),{type:"AUTH_TOKEN_SUCCESS",token:t}):e(r({error:t})):403===t.status&&"errors.userStatusIsNotValid"===t.errorCode?e(s(t)):e(r({error:t}))).catch(t=>e(i({error:t,exceptionMsg:"actionSocialLogin"})))),U=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async a=>(a(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/social-match",await a((0,n.Z)({userip:!0,device:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(async t=>t.status>=200&&t.status<=300?(await a(w()),{type:"AUTH_SOCIAL_MATCH_SUCCESS"}):a(r({error:{...t,hideGlobalErrorAlert:e?.hideGlobalErrorAlert}}))).catch(t=>a(i({error:t,exceptionMsg:"actionSocialMatch"}))))},R=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async a=>(a(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/social-revoke",await a((0,n.Z)({userip:!0,device:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(async t=>t.status>=200&&t.status<=300||403===t.status&&"errors.providerRevokeNotAllowed"===t.errorCode?(await a(w()),{type:"AUTH_SOCIAL_REVOKE_SUCCESS"}):a(r({error:{...t,hideGlobalErrorAlert:e?.hideGlobalErrorAlert}}))).catch(t=>a(i({error:t,exceptionMsg:"actionSocialRevoke"}))))},m=t=>async(e,a)=>{let{auth:{user:o}}=await a();return await fetch(`https://www.blutv.com/api/update-card-name?id=${o?._id}`,await e((0,n.Z)({userip:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(a=>a.status>=200&&a.status<=300?e(c("AUTH_UPDATE_CARD_NAME_SUCCESS",t)):e(r({error:a}))).catch(t=>e(i({error:t,exceptionMsg:"actionUpdateCardName"})))},v=t=>async e=>await fetch("https://www.blutv.com/api/add-new-payment-info",await e((0,n.Z)({userip:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(t=>t.status>=200&&t.status<=300?e(c("AUTH_ADD_NEW_PAYMENT_INFO_SUCCESS",t)):e({type:"AUTH_ADD_NEW_PAYMENT_INFO_ERROR",error:t})).catch(t=>e(i({error:t,exceptionMsg:"actionNewPaymentInfo"}))),b=t=>async(e,a)=>{e(o("AUTH_ADD_NEW_PAYMENT_INFO_START"));let{auth:{user:r}}=await a(),{email:s,isHbCampaignUser:u}=r||{};return await fetch("https://www.blutv.com/api/checkout-iyzico",await e((0,n.Z)({userip:!0,body:JSON.stringify({...t,username:s,isHbCampaignUser:u})}))).then(t=>t.json()).then(async t=>t.status>=200&&t.status<=300?e(c("AUTH_ADD_NEW_PAYMENT_INFO_SUCCESS",t)):e({type:"AUTH_ADD_NEW_PAYMENT_INFO_ERROR",error:t})).catch(t=>e(i({error:t,exceptionMsg:"actionNewPaymentInfo"})))},k=t=>async(e,a)=>{let{auth:{user:o}}=await a();return await fetch(`https://www.blutv.com/api/change-payment-info?id=${o?._id}`,await e((0,n.Z)({userip:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(a=>a.status>=200&&a.status<=300?e(c("AUTH_CHANGE_PAYMENT_INFO_SUCCESS",t)):{error:a}).catch(t=>e(i({error:t,exceptionMsg:"actionChangePaymentInfo"})))},H=t=>async e=>(e(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/cancel-suggestion",await e((0,n.Z)({userip:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(t=>t.status>=200&&t.status<=300?{type:"AUTH_CANCEL_SUGGESTION_SUCCESS"}:{type:"AUTH_CANCEL_SUGGESTION_FAILD"}).catch(t=>e(i({error:t,exceptionMsg:"actionCancelSuggestion"})))),I=t=>async e=>(e(o("AUTH_OPERATION_START")),await fetch("https://www.blutv.com/api/subscription-cancel",await e((0,n.Z)({userip:!0,body:JSON.stringify(t)}))).then(t=>t.json()).then(async t=>t.status>=200&&t.status<=300?(await e(w()),{type:"AUTH_CANCEL_SUBSCRIPTION_SUCCESS"}):e(r({error:t}))).catch(t=>e(i({error:t,exceptionMsg:"actionSubscriptionCancel"}))))}}]);</script>
</body>
</html>
