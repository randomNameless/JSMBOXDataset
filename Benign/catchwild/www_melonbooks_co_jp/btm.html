<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>btm.html</title>
</head>
<body>

<script>
!function(){"use strict";var Trigger=function(){function e(e,t){this.referencedTags=[],this.theTrigger={},this.id=e.id,this.triggerKey=e.triggerKey,this.triggerKey in t&&(this.theTrigger=new t[this.triggerKey])}return e.prototype.getId=function(){return this.id},e.prototype.addReferencedTag=function(e){this.referencedTags.push(e)},e.prototype.getReferencedTags=function(){return this.referencedTags},e.prototype.setUp=function(){if(this.theTrigger&&this.theTrigger.setUp){var e=this;this.theTrigger.setUp(function(t){if("event"in t&&e.meetsConditions())for(var n=0,i=e.getReferencedTags();n<i.length;n++){i[n].fire()}})}},e.prototype.meetsConditions=function(){return!0},e}(),Tag=function(){function e(e,t){this.theTag={},this.id=e.id,this.tagKey=e.tagKey,this.tagKey in t&&(this.theTag=new t[this.tagKey])}return e.prototype.fire=function(){this.theTag&&this.theTag.fire&&this.theTag.fire()},e}(),Container=function(){function e(e,t){if(this.triggers=[],this.tags=[],this.id=e.id,this.templates=t,e.triggerConfigs)for(var n=0,i=e.triggerConfigs;n<i.length;n++){var r=i[n];this.addTrigger(r)}if(e.tagConfigs)for(var o=0,a=e.tagConfigs;o<a.length;o++){var c=a[o],l=new Tag(c,this.templates);if(this.tags.push(l),c.fireTriggerIds)for(var u=0,d=c.fireTriggerIds;u<d.length;u++){var s=d[u],h=this.getTriggerById(s);h&&h.addReferencedTag(l)}}}return e.prototype.addTrigger=function(e){var t=this.getTriggerById(e.id);t||(t=new Trigger(e,this.templates),this.triggers.push(t))},e.prototype.getTriggerById=function(e){for(var t=0,n=this.triggers;t<n.length;t++){var i=n[t];if(i.getId()===e)return i}return undefined},e.prototype.run=function(){for(var e=0,t=this.triggers;e<t.length;e++){t[e].setUp()}},e}(),TagManager=function(){function e(){this.containers=[]}return e.prototype.addContainer=function(e,t){var n=new Container(e,t);this.containers.push(n),n.run()},e}();const tag_manager=TagManager;window.BdashTagManager=new tag_manager;var templates={UtilTag:function(){this.fire=function(){var e,t,n,i,r,o,a,c,l,u,d,s,h,f,m,g,p,_,w,v,y,b,C,k,x,T,A,V,E,B,D,F,S,R,O,j,I,L,U,P,M,H;!function(){
/* Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>
   * Version: 1.0.1
   * LastModified: Dec 25 1999
   */
var e=32768,t=0,n=1,i=2,r=6,o=!0,a=32768,c=64,l=8192,u=2*e,d=3,s=258,h=16,f=8192,m=13;f>a&&alert("error: zip_INBUFSIZ is too small"),e<<1>1<<h&&alert("error: zip_WSIZE is too large"),m>h-1&&alert("error: zip_HASH_BITS is too large"),(m<8||258!=s)&&alert("error: Code too clever");var g,p,_,w,v,y,b,C,k,x,T,A,V,E,B,D,F,S,R,O,j,I,L,U,P,M,H,$,K,q,X,N,J,Y,z,W,Z,G,Q,ee,te,ne,ie,re,oe,ae,ce,le,ue,de,se,he,fe,me,ge,pe,_e=f,we=1<<m,ve=we-1,ye=e-1,be=0,Ce=4096,ke=s+d+1,xe=e-ke,Te=1,Ae=15,Ve=7,Ee=29,Be=256,De=256,Fe=Be+1+Ee,Se=30,Re=19,Oe=16,je=17,Ie=18,Le=2*Fe+1,Ue=parseInt((m+d-1)/d),Pe=null,Me=function(){this.fc=0,this.dl=0},He=function(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0},$e=function(e,t,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i},Ke=function(){this.next=null,this.len=0,this.ptr=new Array(l),this.off=0},qe=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0),Xe=new Array(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),Ne=new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7),Je=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15),Ye=new Array(new $e(0,0,0,0),new $e(4,4,8,4),new $e(4,5,16,8),new $e(4,6,32,32),new $e(4,4,16,16),new $e(8,16,32,32),new $e(8,16,128,128),new $e(8,32,128,256),new $e(32,128,258,1024),new $e(32,258,258,4096)),ze=function(e){var t;if(e?e<1?e=1:e>9&&(e=9):e=r,H=e,w=!1,L=!1,null==Pe){for(g=p=_=null,Pe=new Array(l),C=new Array(u),k=new Array(_e),x=new Array(a+c),T=new Array(1<<h),q=new Array(Le),t=0;t<Le;t++)q[t]=new Me;for(X=new Array(2*Se+1),t=0;t<2*Se+1;t++)X[t]=new Me;for(N=new Array(Fe+2),t=0;t<Fe+2;t++)N[t]=new Me;for(J=new Array(Se),t=0;t<Se;t++)J[t]=new Me;for(Y=new Array(2*Re+1),t=0;t<2*Re+1;t++)Y[t]=new Me;z=new He,W=new He,Z=new He,G=new Array(Ae+1),Q=new Array(2*Fe+1),ne=new Array(2*Fe+1),ie=new Array(s-d+1),re=new Array(512),oe=new Array(Ee),ae=new Array(Se),ce=new Array(parseInt(f/8))}},We=function(e){e.next=g,g=e},Ze=function(){var e;return null!=g?(e=g,g=g.next):e=new Ke,e.next=null,e.len=e.off=0,e},Ge=function(t){return T[e+t]},Qe=function(t,n){return T[e+t]=n},et=function(e){Pe[y+v++]=e,y+v==l&&St()},tt=function(e){e&=65535,y+v<l-2?(Pe[y+v++]=255&e,Pe[y+v++]=e>>>8):(et(255&e),et(e>>>8))},nt=function(){B=(B<<Ue^255&C[j+d-1])&ve,D=Ge(B),T[j&ye]=D,Qe(B,j)},it=function(e,t){Bt(t[e].fc,t[e].dl)},rt=function(e){return 255&(e<256?re[e]:re[256+(e>>7)])},ot=function(e,t,n){return e[t].fc<e[n].fc||e[t].fc==e[n].fc&&ne[t]<=ne[n]},at=function(e,t,n){var i;for(i=0;i<n&&pe<ge.length;i++)e[t+i]=255&ge.charCodeAt(pe++);return i},ct=function(){var t;for(t=0;t<we;t++)T[e+t]=0;if(M=Ye[H].max_lazy,$=Ye[H].good_length,o||(K=Ye[H].nice_length),P=Ye[H].max_chain,j=0,E=0,(U=at(C,0,2*e))<=0)return L=!0,void(U=0);for(L=!1;U<ke&&!L;)ut();for(B=0,t=0;t<d-1;t++)B=(B<<Ue^255&C[t])&ve},lt=function(e){var t,n,i=P,r=j,a=O,c=j>xe?j-xe:be,l=j+s,u=C[r+a-1],d=C[r+a];O>=$&&(i>>=2);do{if(C[(t=e)+a]==d&&C[t+a-1]==u&&C[t]==C[r]&&C[++t]==C[r+1]){r+=2,t++;do{}while(C[++r]==C[++t]&&C[++r]==C[++t]&&C[++r]==C[++t]&&C[++r]==C[++t]&&C[++r]==C[++t]&&C[++r]==C[++t]&&C[++r]==C[++t]&&C[++r]==C[++t]&&r<l);if(n=s-(l-r),r=l-s,n>a){if(I=e,a=n,o){if(n>=s)break}else if(n>=K)break;u=C[r+a-1],d=C[r+a]}}}while((e=T[e&ye])>c&&0!=--i);return a},ut=function(){var t,n,i=u-U-j;if(-1==i)i--;else if(j>=e+xe){for(t=0;t<e;t++)C[t]=C[t+e];for(I-=e,j-=e,E-=e,t=0;t<we;t++)n=Ge(t),Qe(t,n>=e?n-e:be);for(t=0;t<e;t++)n=T[t],T[t]=n>=e?n-e:be;i+=e}L||((t=at(C,j+U,i))<=0?L=!0:U+=t)},dt=function(){for(;0!=U&&null==p;){var e;if(nt(),D!=be&&j-D<=xe&&(R=lt(D))>U&&(R=U),R>=d)if(e=At(j-I,R-d),U-=R,R<=M){R--;do{j++,nt()}while(0!=--R);j++}else j+=R,R=0,B=((B=255&C[j])<<Ue^255&C[j+1])&ve;else e=At(0,255&C[j]),U--,j++;for(e&&(Tt(0),E=j);U<ke&&!L;)ut()}},st=function(){for(;0!=U&&null==p;){if(nt(),O=R,F=I,R=d-1,D!=be&&O<M&&j-D<=xe&&((R=lt(D))>U&&(R=U),R==d&&j-I>Ce&&R--),O>=d&&R<=O){var e;e=At(j-1-F,O-d),U-=O-1,O-=2;do{j++,nt()}while(0!=--O);S=0,R=d-1,j++,e&&(Tt(0),E=j)}else 0!=S?(At(0,255&C[j-1])&&(Tt(0),E=j),j++,U--):(S=1,j++,U--);for(;U<ke&&!L;)ut()}},ht=function(){L||(A=0,V=0,gt(),ct(),p=null,v=0,y=0,S=0,H<=3?(O=d-1,R=0):(R=d-1,S=0,S=0),b=!1)},ft=function(e,t,n){var i;return w||(ht(),w=!0,0!=U)?(i=mt(e,t,n))==n?n:b?i:(H<=3?dt():st(),0==U&&(0!=S&&At(0,255&C[j-1]),Tt(1),b=!0),i+mt(e,i+t,n-i)):(b=!0,0)},mt=function(e,t,n){var i,r,o;for(i=0;null!=p&&i<n;){for((r=n-i)>p.len&&(r=p.len),o=0;o<r;o++)e[t+i+o]=p.ptr[p.off+o];var a;p.off+=r,p.len-=r,i+=r,0==p.len&&(a=p,p=p.next,We(a))}if(i==n)return i;if(y<v){for((r=n-i)>v-y&&(r=v-y),o=0;o<r;o++)e[t+i+o]=Pe[y+o];i+=r,v==(y+=r)&&(v=y=0)}return i},gt=function(){var e,t,n,i,r;if(0==J[0].dl){for(z.dyn_tree=q,z.static_tree=N,z.extra_bits=qe,z.extra_base=Be+1,z.elems=Fe,z.max_length=Ae,z.max_code=0,W.dyn_tree=X,W.static_tree=J,W.extra_bits=Xe,W.extra_base=0,W.elems=Se,W.max_length=Ae,W.max_code=0,Z.dyn_tree=Y,Z.static_tree=null,Z.extra_bits=Ne,Z.extra_base=0,Z.elems=Re,Z.max_length=Ve,Z.max_code=0,n=0,i=0;i<Ee-1;i++)for(oe[i]=n,e=0;e<1<<qe[i];e++)ie[n++]=i;for(ie[n-1]=i,r=0,i=0;i<16;i++)for(ae[i]=r,e=0;e<1<<Xe[i];e++)re[r++]=i;for(r>>=7;i<Se;i++)for(ae[i]=r<<7,e=0;e<1<<Xe[i]-7;e++)re[256+r++]=i;for(t=0;t<=Ae;t++)G[t]=0;for(e=0;e<=143;)N[e++].dl=8,G[8]++;for(;e<=255;)N[e++].dl=9,G[9]++;for(;e<=279;)N[e++].dl=7,G[7]++;for(;e<=287;)N[e++].dl=8,G[8]++;for(vt(N,Fe+1),e=0;e<Se;e++)J[e].dl=5,J[e].fc=Dt(e,5);pt()}},pt=function(){var e;for(e=0;e<Fe;e++)q[e].fc=0;for(e=0;e<Se;e++)X[e].fc=0;for(e=0;e<Re;e++)Y[e].fc=0;q[De].fc=1,fe=me=0,le=ue=de=0,se=0,he=1},_t=function(e,t){for(var n=Q[t],i=t<<1;i<=ee&&(i<ee&&ot(e,Q[i+1],Q[i])&&i++,!ot(e,n,Q[i]));)Q[t]=Q[i],t=i,i<<=1;Q[t]=n},wt=function(e){var t,n,i,r,o,a,c=e.dyn_tree,l=e.extra_bits,u=e.extra_base,d=e.max_code,s=e.max_length,h=e.static_tree,f=0;for(r=0;r<=Ae;r++)G[r]=0;for(c[Q[te]].dl=0,t=te+1;t<Le;t++)(r=c[c[n=Q[t]].dl].dl+1)>s&&(r=s,f++),c[n].dl=r,n>d||(G[r]++,o=0,n>=u&&(o=l[n-u]),a=c[n].fc,fe+=a*(r+o),null!=h&&(me+=a*(h[n].dl+o)));if(0!=f){do{for(r=s-1;0==G[r];)r--;G[r]--,G[r+1]+=2,G[s]--,f-=2}while(f>0);for(r=s;0!=r;r--)for(n=G[r];0!=n;)(i=Q[--t])>d||(c[i].dl!=r&&(fe+=(r-c[i].dl)*c[i].fc,c[i].fc=r),n--)}},vt=function(e,t){var n,i,r=new Array(Ae+1),o=0;for(n=1;n<=Ae;n++)o=o+G[n-1]<<1,r[n]=o;for(i=0;i<=t;i++){var a=e[i].dl;0!=a&&(e[i].fc=Dt(r[a]++,a))}},yt=function(e){var t,n,i=e.dyn_tree,r=e.static_tree,o=e.elems,a=-1,c=o;for(ee=0,te=Le,t=0;t<o;t++)0!=i[t].fc?(Q[++ee]=a=t,ne[t]=0):i[t].dl=0;for(;ee<2;){var l=Q[++ee]=a<2?++a:0;i[l].fc=1,ne[l]=0,fe--,null!=r&&(me-=r[l].dl)}for(e.max_code=a,t=ee>>1;t>=1;t--)_t(i,t);do{t=Q[Te],Q[Te]=Q[ee--],_t(i,Te),n=Q[Te],Q[--te]=t,Q[--te]=n,i[c].fc=i[t].fc+i[n].fc,ne[t]>ne[n]+1?ne[c]=ne[t]:ne[c]=ne[n]+1,i[t].dl=i[n].dl=c,Q[Te]=c++,_t(i,Te)}while(ee>=2);Q[--te]=Q[Te],wt(e),vt(i,a)},bt=function(e,t){var n,i,r=-1,o=e[0].dl,a=0,c=7,l=4;for(0==o&&(c=138,l=3),e[t+1].dl=65535,n=0;n<=t;n++)i=o,o=e[n+1].dl,++a<c&&i==o||(a<l?Y[i].fc+=a:0!=i?(i!=r&&Y[i].fc++,Y[Oe].fc++):a<=10?Y[je].fc++:Y[Ie].fc++,a=0,r=i,0==o?(c=138,l=3):i==o?(c=6,l=3):(c=7,l=4))},Ct=function(e,t){var n,i,r=-1,o=e[0].dl,a=0,c=7,l=4;for(0==o&&(c=138,l=3),n=0;n<=t;n++)if(i=o,o=e[n+1].dl,!(++a<c&&i==o)){if(a<l){do{it(i,Y)}while(0!=--a)}else 0!=i?(i!=r&&(it(i,Y),a--),it(Oe,Y),Bt(a-3,2)):a<=10?(it(je,Y),Bt(a-3,3)):(it(Ie,Y),Bt(a-11,7));a=0,r=i,0==o?(c=138,l=3):i==o?(c=6,l=3):(c=7,l=4)}},kt=function(){var e;for(bt(q,z.max_code),bt(X,W.max_code),yt(Z),e=Re-1;e>=3&&0==Y[Je[e]].dl;e--);return fe+=3*(e+1)+5+5+4,e},xt=function(e,t,n){var i;for(Bt(e-257,5),Bt(t-1,5),Bt(n-4,4),i=0;i<n;i++)Bt(Y[Je[i]].dl,3);Ct(q,e-1),Ct(X,t-1)},Tt=function(e){var r,o,a,c,l;if(c=j-E,ce[de]=se,yt(z),yt(W),a=kt(),(o=me+3+7>>3)<=(r=fe+3+7>>3)&&(r=o),c+4<=r&&E>=0)for(Bt((t<<1)+e,3),Ft(),tt(c),tt(~c),l=0;l<c;l++)et(C[E+l]);else o==r?(Bt((n<<1)+e,3),Vt(N,J)):(Bt((i<<1)+e,3),xt(z.max_code+1,W.max_code+1,a+1),Vt(q,X));pt(),0!=e&&Ft()},At=function(e,t){if(x[le++]=t,0==e?q[t].fc++:(e--,q[ie[t]+Be+1].fc++,X[rt(e)].fc++,k[ue++]=e,se|=he),he<<=1,0==(7&le)&&(ce[de++]=se,se=0,he=1),H>2&&0==(4095&le)){var n,i=8*le,r=j-E;for(n=0;n<Se;n++)i+=X[n].fc*(5+Xe[n]);if(i>>=3,ue<parseInt(le/2)&&i<parseInt(r/2))return!0}return le==f-1||ue==_e},Vt=function(e,t){var n,i,r,o,a=0,c=0,l=0,u=0;if(0!=le)do{0==(7&a)&&(u=ce[l++]),i=255&x[a++],0==(1&u)?it(i,e):(r=ie[i],it(r+Be+1,e),0!=(o=qe[r])&&(i-=oe[r],Bt(i,o)),n=k[c++],r=rt(n),it(r,t),0!=(o=Xe[r])&&(n-=ae[r],Bt(n,o))),u>>=1}while(a<le);it(De,e)},Et=16,Bt=function(e,t){V>Et-t?(tt(A|=e<<V),A=e>>Et-V,V+=t-Et):(A|=e<<V,V+=t)},Dt=function(e,t){var n=0;do{n|=1&e,e>>=1,n<<=1}while(--t>0);return n>>1},Ft=function(){V>8?tt(A):V>0&&et(A),A=0,V=0},St=function(){if(0!=v){var e,t;for(e=Ze(),null==p?p=_=e:_=_.next=e,e.len=v-y,t=0;t<e.len;t++)e.ptr[t]=Pe[y+t];v=y=0}},Rt=function(e,t){var n,i;ge=e,pe=0,void 0===t&&(t=r),ze(t);for(var o=new Array(1024),a=[];(n=ft(o,0,o.length))>0;){var c=new Array(n);for(i=0;i<n;i++)c[i]=String.fromCharCode(o[i]);a[a.length]=c.join("")}return ge=null,a.join("")};window.BdashRawDeflate||(window.BdashRawDeflate={}),window.BdashRawDeflate.deflate=Rt}(),_=32768,w=0,v=9,y=6,b=null,C=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535),k=new Array(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0),x=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99),T=new Array(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577),A=new Array(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),V=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15),E=function(){this.next=null,this.list=null},B=function(){this.e=0,this.b=0,this.n=0,this.t=null},D=function(e,t,n,i,r,o){this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var a,c,l,u,d,s,h,f,m,g,p,_,w,v,y,b,C,k=new Array(this.BMAX+1),x=new Array(this.BMAX+1),T=new B,A=new Array(this.BMAX),V=new Array(this.N_MAX),D=new Array(this.BMAX+1);for(C=this.root=null,s=0;s<k.length;s++)k[s]=0;for(s=0;s<x.length;s++)x[s]=0;for(s=0;s<A.length;s++)A[s]=null;for(s=0;s<V.length;s++)V[s]=0;for(s=0;s<D.length;s++)D[s]=0;c=t>256?e[256]:this.BMAX,m=e,g=0,s=t;do{k[m[g]]++,g++}while(--s>0);if(k[0]==t)return this.root=null,this.m=0,void(this.status=0);for(h=1;h<=this.BMAX&&0==k[h];h++);for(f=h,o<h&&(o=h),s=this.BMAX;0!=s&&0==k[s];s--);for(u=s,o>s&&(o=s),v=1<<h;h<s;h++,v<<=1)if((v-=k[h])<0)return this.status=2,void(this.m=o);if((v-=k[s])<0)return this.status=2,void(this.m=o);for(k[s]+=v,D[1]=h=0,m=k,g=1,w=2;--s>0;)D[w++]=h+=m[g++];m=e,g=0,s=0;do{0!=(h=m[g++])&&(V[D[h]++]=s)}while(++s<t);for(t=D[u],D[0]=s=0,m=V,g=0,d=-1,_=x[0]=0,p=null,y=0;f<=u;f++)for(a=k[f];a-- >0;){for(;f>_+x[1+d];){if(_+=x[1+d],d++,y=(y=u-_)>o?o:y,(l=1<<(h=f-_))>a+1)for(l-=a+1,w=f;++h<y&&!((l<<=1)<=k[++w]);)l-=k[w];for(_+h>c&&_<c&&(h=c-_),y=1<<h,x[1+d]=h,p=new Array(y),b=0;b<y;b++)p[b]=new B;(C=null==C?this.root=new E:C.next=new E).next=null,C.list=p,A[d]=p,d>0&&(D[d]=s,T.b=x[d],T.e=16+h,T.t=p,h=(s&(1<<_)-1)>>_-x[d],A[d-1][h].e=T.e,A[d-1][h].b=T.b,A[d-1][h].n=T.n,A[d-1][h].t=T.t)}for(T.b=f-_,g>=t?T.e=99:m[g]<n?(T.e=m[g]<256?16:15,T.n=m[g++]):(T.e=r[m[g]-n],T.n=i[m[g++]-n]),l=1<<f-_,h=s>>_;h<y;h+=l)p[h].e=T.e,p[h].b=T.b,p[h].n=T.n,p[h].t=T.t;for(h=1<<f-1;0!=(s&h);h>>=1)s^=h;for(s^=h;(s&(1<<_)-1)!=D[d];)_-=x[d],d--}this.m=x[1],this.status=0!=v&&1!=u?1:0},F=function(){return g.length==p?-1:255&g.charCodeAt(p++)},S=function(e){for(;a<e;)o|=F()<<a,a+=8},R=function(e){return o&C[e]},O=function(e){o>>=e,a-=e},j=function(n,i,r){var o,a,l;if(0==r)return 0;for(l=0;;){for(S(f),o=(a=s.list[R(f)]).e;o>16;){if(99==o)return-1;O(a.b),S(o-=16),o=(a=a.t[R(o)]).e}if(O(a.b),16!=o){if(15==o)break;for(S(o),u=a.n+R(o),O(o),S(m),o=(a=h.list[R(m)]).e;o>16;){if(99==o)return-1;O(a.b),S(o-=16),o=(a=a.t[R(o)]).e}for(O(a.b),S(o),d=t-a.n-R(o),O(o);u>0&&l<r;)u--,d&=_-1,t&=_-1,n[i+l++]=e[t++]=e[d++];if(l==r)return r}else if(t&=_-1,n[i+l++]=e[t++]=a.n,l==r)return r}return c=-1,l},I=function(n,i,r){var l;if(O(l=7&a),S(16),l=R(16),O(16),S(16),l!=(65535&~o))return-1;for(O(16),u=l,l=0;u>0&&l<r;)u--,t&=_-1,S(8),n[i+l++]=e[t++]=R(8),O(8);return 0==u&&(c=-1),l},L=function(e,t,o){if(null==b){var a,c,l=new Array(288);for(a=0;a<144;a++)l[a]=8;for(;a<256;a++)l[a]=9;for(;a<280;a++)l[a]=7;for(;a<288;a++)l[a]=8;if(0!=(c=new D(l,288,257,k,x,i=7)).status)return alert("HufBuild error: "+c.status),-1;for(b=c.root,i=c.m,a=0;a<30;a++)l[a]=5;if((c=new D(l,30,0,T,A,r=5)).status>1)return b=null,alert("HufBuild error: "+c.status),-1;n=c.root,r=c.m}return s=b,h=n,f=i,m=r,j(e,t,o)},U=function(e,t,n){var i,r,o,a,c,l,u,d,g,p=new Array(316);for(i=0;i<p.length;i++)p[i]=0;if(S(5),u=257+R(5),O(5),S(5),d=1+R(5),O(5),S(4),l=4+R(4),O(4),u>286||d>30)return-1;for(r=0;r<l;r++)S(3),p[V[r]]=R(3),O(3);for(;r<19;r++)p[V[r]]=0;if(0!=(g=new D(p,19,19,null,null,f=7)).status)return-1;for(s=g.root,f=g.m,a=u+d,i=o=0;i<a;)if(S(f),r=(c=s.list[R(f)]).b,O(r),(r=c.n)<16)p[i++]=o=r;else if(16==r){if(S(2),r=3+R(2),O(2),i+r>a)return-1;for(;r-- >0;)p[i++]=o}else if(17==r){if(S(3),r=3+R(3),O(3),i+r>a)return-1;for(;r-- >0;)p[i++]=0;o=0}else{if(S(7),r=11+R(7),O(7),i+r>a)return-1;for(;r-- >0;)p[i++]=0;o=0}if(g=new D(p,u,257,k,x,f=v),0==f&&(g.status=1),0!=g.status)return g.status,-1;for(s=g.root,f=g.m,i=0;i<d;i++)p[i]=p[i+u];return g=new D(p,d,0,T,A,m=y),h=g.root,0==(m=g.m)&&u>257?-1:(g.status,0!=g.status?-1:j(e,t,n))},P=function(){null==e&&(e=new Array(2*_)),t=0,o=0,a=0,c=-1,l=!1,u=d=0,s=null},M=function(n,i,r){var o,a;for(o=0;o<r;){if(l&&-1==c)return o;if(u>0){if(c!=w)for(;u>0&&o<r;)u--,d&=_-1,t&=_-1,n[i+o++]=e[t++]=e[d++];else{for(;u>0&&o<r;)u--,t&=_-1,S(8),n[i+o++]=e[t++]=R(8),O(8);0==u&&(c=-1)}if(o==r)return o}if(-1==c){if(l)break;S(1),0!=R(1)&&(l=!0),O(1),S(2),c=R(2),O(2),s=null,u=0}switch(c){case 0:a=I(n,i+o,r-o);break;case 1:a=null!=s?j(n,i+o,r-o):L(n,i+o,r-o);break;case 2:a=null!=s?j(n,i+o,r-o):U(n,i+o,r-o);break;default:a=-1}if(-1==a)return l?0:-1;o+=a}return o},H=function(e){var t,n;P(),g=e,p=0;for(var i=new Array(1024),r=[];(t=M(i,0,i.length))>0;){var o=new Array(t);for(n=0;n<t;n++)o[n]=String.fromCharCode(i[n]);r[r.length]=o.join("")}return g=null,r.join("")},window.BdashRawDeflate||(window.BdashRawDeflate={}),window.BdashRawDeflate.inflate=H}}};templates.VisitorSessionTag=function(){return function(){this.fire=function(){!function(){function BdashTagUtil(){function matched(e,t,n){var i=encodeCondValue(e),r=encodeCondValue(n);switch(t){case"match":if(i===r)return!0;break;case"not_match":if(i!==r)return!0;break;case"include":if(i.indexOf(r)>=0)return!0;break;case"not_include":if(i.indexOf(r)<0)return!0;break;case"start_with":if(0===i.indexOf(r))return!0;break;case"not_start_with":if(0!==i.indexOf(r))return!0;break;case"end_with":if(new RegExp(r.replace(/[$()*+.[\]{}\\|^\\/,?]/g,"\\$&")+"$").test(i))return!0;break;case"not_end_with":if(!new RegExp(r.replace(/[$()*+.[\]{}\\|^\\/,?]/g,"\\$&")+"$").test(i))return!0;break;case"regex":if(new RegExp(n).test(e))return!0}return!1}function encodeCondValue(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}function findHtmlChild(e,t){return e?e.querySelectorAll(t.element)[t.nth-1]:null}function extractAttributeValue(e,t){return e.getAttribute(t.key)}function extractString(e,t){switch(t.extract_type||t.type){case"left":var n=t.extract_length||t.length;return e.slice(0,1*n);case"mid":var i=t.extract_start||t.start,r=t.extract_end||t.end;return e.substring(1*i-1,1*r);case"right":n=t.extract_length||t.length;return e.slice(-1*n);default:return e}}function encodeCookieValue(e){var t=encodeURIComponent(e);if(window.BdashRawDeflate&&window.BdashRawDeflate.deflate&&"function"==typeof window.BdashRawDeflate.deflate){var n=window.BdashRawDeflate.deflate(t);if(window.BdashRawDeflate.inflate&&"function"==typeof window.BdashRawDeflate.inflate)window.BdashRawDeflate.inflate(n)!==t&&(n=window.BdashRawDeflate.deflate(t,3));t=DEFLATED_PREFIX+n}return t=window.btoa(t)}function decodeCookieValue(e){try{var t=!1;0===e.indexOf("@")&&(t=!0,e=e.slice(1));var n,i=window.atob(e);return 0===i.indexOf(DEFLATED_PREFIX)&&(t=!0,i=i.slice(DEFLATED_PREFIX.length)),t&&window.BdashRawDeflate&&window.BdashRawDeflate.inflate&&"function"==typeof window.BdashRawDeflate.inflate&&(n=window.BdashRawDeflate.inflate(i)),decodeURIComponent(n||i)}catch(r){return e}}function shouldFetchCustomColumnOnPageview(e){var t=e.fetch_conditions;return!t||t.pageview.enabled}function shouldFetchCustomColumnOnClick(e,t){var n=e.fetch_conditions;if(!n)return!0;if(!n.click.enabled)return!1;if("all"===n.click.condition.target)return!0;var i=n.click.condition.element_conditions,r=t&&t.target;if(!r)return!1;for(var o=r.parentElement,a=0;a<i.length;a++){var c=i[a];if(c.child&&c.child.enabled)for(var l=(o&&o.getAttribute(c.element_type)).split(" "),u=0;u<l.length;u++){if(matched(l[u],c.operator,c.value))if(o.querySelectorAll(c.child.tag_name)[c.child.nth-1]==r)return!0}else for(l=r.getAttribute(c.element_type).split(" "),u=0;u<l.length;u++)if(matched(l[u],c.operator,c.value))return!0}return!1}function filterByDomainLevel(e,t){for(var n,i=[],r=[],o=0;o<e.length;o++){var a=e[o];a.domainLevel===t?i.push(a):undefined===n||a.domainLevel<n?(r=[a],n=a.domainLevel):a.domainLevel===n&&r.push(a)}return 0<i.length?i:r}function extractFromHtml(e){if(!e.conditions.length)return"";for(var t={match:"=",include:"*=",start_with:"^=",end_with:"$="},n={not_match:"=",not_include:"*=",not_start_with:"^=",not_end_with:"$="},i=0;i<e.conditions.length;i++){var r=e.conditions[i],o=[];if(t[r.matching]){var a=t[r.matching],c="["+r.type+a+'"'+r.name+'"]';o=document.querySelectorAll(c)}if(n[r.matching]){a=n[r.matching],c="["+r.type+":not(["+r.type+a+'"'+r.name+'"]';o=document.querySelectorAll(c)}if("regex"==r.matching){var l=document.querySelectorAll("["+r.type+"]"),u=new RegExp(r.name);o=Array.from(l).filter(e=>u.test(e[r.type]))}if(o.length){var d=o[r.nth?r.nth-1:0];if(r.child&&r.child.enabled&&(d=findHtmlChild(d,r.child)),d){if(r.attribute&&r.attribute.enabled)return extractAttributeValue(d,r.attribute)||"";var s=d.outerHTML,h=s.indexOf(">")+1,f=s.lastIndexOf("<");return extractString(s=s.substring(h,f),e.extract)}}}}function extractFromJs(e){return window[e.conditions[0].name]||""}function extractByCustomScript(conditions){var customValue="";return eval(conditions.custom_script),customValue}function extractFromSourceCode(e){switch(e.source_type){case"html":return extractFromHtml(e);case"javascript":return extractFromJs(e);case"others":return extractByCustomScript(e)}return""}function extractFromUrl(e){var t=e.urls&&e.urls[0]||{},n=t.matching,i=self.getCurrentPageUrl();if("regex"===n){var r=new RegExp(t.name),o=i.match(r);return o&&o[0]||""}return"extract"===n?extractString(i,t):""}function extractFromCookie(e){for(var t=e.name,n=e.values||[],i=self.getCookieValues(t),r=0;r<i.length;r++)if(0===n.length||self.matchAny(i[r],n,"name","matching"))return i[r]}var self=this,DEFLATED_PREFIX="bd4_";this.getCurrentPageUrl=function(){var e="";if(window.dataLayer&&"[object Array]"===Object.prototype.toString.apply(window.dataLayer))for(var t=0;t<window.dataLayer.length;t++){var n=window.dataLayer[t];if(n&&"page_viewed"===n.event){e=n.url;break}}return e||(e=location.href),e},this.matchAny=function(e,t,n,i){for(var r=0;r<t.length;r++){var o=t[r];if(matched(e,o[i],o[n]))return!0}return!1},this.isString=function(e){return"[object String]"===Object.prototype.toString.apply(e)},this.isObject=function(e){return"[object Object]"===Object.prototype.toString.apply(e)},this.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)},this.isFunction=function(e){return"[object Function]"===Object.prototype.toString.apply(e)},this.getUnixtimeSec=function(){return Math.floor((new Date).getTime()/1e3)},this.isEncodingCookie=function(e){return["_bdnvf","_bd_prev_page","_bd_prev_page_ex","_bdcid","_bd_reception_request_timestamp"].indexOf(e)>=0},this.restoreCookieValue=function(e,t){return self.isEncodingCookie(e)?decodeCookieValue(t):t},this.getCookieValues=function(e){for(var t=[],n=document.cookie.split(";"),i=new RegExp("^\\s*"+e+"=\\s*(.*)\\s*$"),r=0;r<n.length;r++){var o=n[r].match(i);o&&t.push(self.restoreCookieValue(e,o[1]))}return t},this.getCookieValue=function(e){return self.getCookieValues(e)[0]},this.setCookie=function(e,t,n,i,r){var o=e+"="+(self.isEncodingCookie(e)?encodeCookieValue(t):t)+";";n&&(o+="expires="+new Date((new Date).getTime()+n).toUTCString()+";"),i&&(o+="domain="+i+";"),r&&(o+="path="+(r||"/")+";");var a=document.cookie;if(document.cookie=o,document.cookie!==a)return!0;for(var c=self.getCookieValues(e),l=0;l<c.length;l++)if(t===c[l])return!0;return!1},this.generateCookieStoreValue=function(e,t){return e&&t?["BD",e,t.split(".").length].join("."):""},this.extractValueFromCookie=function(e){var t,n=self.getCookieValues(e);if(n.length>0){for(var i=[],r=location.hostname.split("."),o=0;!t&&o<n.length;o++){var a=n[o].match(/^BD\.(.+)\.(\d+)$/);a&&i.push({domainLevel:1*a[2],value:a[1]})}if(0===i.length)t=n[0];else if(1===i.length)t=i[0].value;else{var c=r&&r.length,l=c&&filterByDomainLevel(i,c);t=l&&l[0]&&l[0].value}}return t},this.stringIncludes=function(e,t){return String.prototype.includes=function(e){var t=!1;return-1!==this.indexOf(e)&&(t=!0),t},e.includes(t)},this.isTargetDomain=function(){for(var e=[{domain:"www.melonbooks.co.jp",exclude_conditions:[]},{domain:"melon.achoes.com",exclude_conditions:[]}],t=0;t<e.length;t++){var n=e[t];if(location.hostname===n.domain&&!self.matchAny(self.getCurrentPageUrl(),n.exclude_conditions,"url","cond"))return!0}return!1},this.extractFromSource=function(e){try{var t="",n=e.source_type,i=e.source_conditions||{};switch(n){case"source_code":t=extractFromSourceCode(i);break;case"url":t=extractFromUrl(i);break;case"cookie":t=extractFromCookie.bind(this,i)()}return t}catch(r){return console.error(r),""}};var customColumns=[{id:"3",column_no:"3",relation_setting_id:"6",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/detail/detail.php?product_id="}],source_conditions:{custom_script:"var metas = document.getElementsByTagName('meta');\nvar r1;\nfor (let j = 0; j < metas.length; j++) {\n  if (metas[j].getAttribute('property') === \"og:url\") {\n     var ts = metas[j].getAttribute('content');\n     r1 = ts.split(\"=\")[1]\n  }\n}\ncustomValue = r1;",source_type:"others"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"4",column_no:"4",relation_setting_id:"7",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"1",column_no:"1",relation_setting_id:"7",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"5",column_no:"5",relation_setting_id:"8",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"transaction_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"2",column_no:"2",relation_setting_id:"8",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"transaction_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"6",column_no:"6",relation_setting_id:"9",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/dl_clipboard/"},{id:0,matching:"include",name:"detail/detail.php?product_id="}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"class",id:1,operator:"match",value:"simple-buttons__button--foward"},{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:2,operator:"match",value:"simple-buttons__button--return"}],target:"specified"},enabled:!0},pageview:{enabled:!0}}}];this.getCustomColumns=function(){return customColumns},this.canExtractValue=function(e,t,n){switch(t){case"pageview":if(!shouldFetchCustomColumnOnPageview(e))return!1;break;case"click":if(!shouldFetchCustomColumnOnClick(e,n))return!1;break;default:return console.error("eventType: "+t+" \u306f\u60f3\u5b9a\u5916\u306e\u5024\u3067\u3059\u3002"),!1}return!0},this.extractValue=function(e,t,n){if(self.matchAny(self.getCurrentPageUrl(),e.page_conditions,"name","matching"))try{if(!self.canExtractValue(e,t,n))return null;var i=self.extractFromSource(e);return{key:"customColumn"+e.column_no,value:i,column_type:e.column_type}}catch(r){return null}return null},this.getCustomColumnValues=function(e,t){for(var n=[],i=0;i<customColumns.length;i++){var r=self.extractValue(customColumns[i],e,t);r&&n.push(r)}return n},this.escapeValue=function(e){if("string"!=typeof e)return e;var t=e.replace(/\"/g,'""');return((t=t.trim()).indexOf(",")>=0||t.match(/\t|\n/))&&(t='"'+t+'"'),t}}var util=new BdashTagUtil;if(util&&(!util.isTargetDomain||"function"!=typeof util.isTargetDomain||util.isTargetDomain())){var toString64=function(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+-",n="";e>0;)n=t.charAt(e%64)+n,e=Math.floor(e/64);return n},makeRandomNumber=function(e){return Math.round(Math.random()*e)},getIdFromLinker=function(){var e=function(e){var t=5,n=1*e,i=util.getUnixtimeSec();return n>i||i>=n+t},t=util.getCurrentPageUrl().match(/[?&#]_bdsid=([^&#]*)/),n="";if(t&&t[1]&&-1<t[1].indexOf(".")){var i=t[1].split(".");(3===i.length&&document.referrer||4===i.length&&!e(i[3]))&&(n=[i[0],i[1],i[2]].join(".").replace("~","-"))}return n},getRepeaterFlagFromLinker=function(){var e=util.getCurrentPageUrl().match(/[?&#]_bdrpf=([^&#]*)/);return e?decodeURIComponent(e[1]):null},removeLinkerFromUrl=function(){try{if(!util.isObject(window.bdashFlags)||!window.bdashFlags.removeBdld)return;var e=util.getCurrentPageUrl(),t=e.match(/(.*)([?&#])(?:_bdsid=[^&#]*)(?:&?)(.*)/);t&&3<=t.length&&(e=t[1]+(t[3]?t[2]+t[3]:"")),(t=e.match(/(.*)([?&#])(?:_bdrpf=[^&#]*)(?:&?)(.*)/))&&3<=t.length&&(e=t[1]+(t[3]?t[2]+t[3]:"")),util.isFunction(history.replaceState)&&history.replaceState("","",e)}catch(n){}},createVisitorId=function(){return[toString64(1*makeRandomNumber(4294967295)),toString64(1*(new Date).getTime())].join(".")},setVisitorIdCookie=function(e){for(var t="_bdck",n=63072e6,i="/",r=location.hostname.split("."),o=r.length-1;o>=0;o--){var a=r.slice(o).join("."),c=util.generateCookieStoreValue(e,a);if(util.setCookie(t,c,n,a,i))return window.BdashTagManager.Tracker.cookieDomain=a,!0}return window.BdashTagManager.Tracker.cookieDomain="failed",!1},createSessionId=function(e){return[e,(new Date).getTime()].join(".")},setSessionIdCookie=function(e){for(var t="_bdsid",n=18e5,i="/",r=location.hostname.split("."),o=r.length-1;o>=0;o--){var a=r.slice(o).join("."),c=util.generateCookieStoreValue(e,a);if(util.setCookie(t,c,n,a,i))return!0}return!1},setNewVisitorCookie=function(e,t){for(var n="_bdnvf",i="/",r=location.hostname.split("."),o=r.length-1;o>=0;o--){var a=r.slice(o).join("."),c=util.generateCookieStoreValue(e,a);if(util.setCookie(n,c,t,a,i))return!0}return!1},publishOrKeepVisitorIdAndSessionId=function(){var e=util.extractValueFromCookie("_bdck"),t=util.extractValueFromCookie("_bdsid"),n=getIdFromLinker();if(n){var i=n.split(".");t=n,e=[i[0],i[1]].join("."),"0"===getRepeaterFlagFromLinker()&&setNewVisitorCookie("",-1)}removeLinkerFromUrl(),e||(e=createVisitorId(),t=null),t||(t=createSessionId(e),window.BdashTagManager.Tracker.newSessionFlag="1"),setVisitorIdCookie(e),window.BdashTagManager.Tracker.vid=e,setSessionIdCookie(t),window.BdashTagManager.Tracker.sid=t;var r=util.extractValueFromCookie("_bdnvf");setNewVisitorCookie(r||t,63072e6),(r=util.extractValueFromCookie("_bdnvf"))===t&&(window.BdashTagManager.Tracker.repeaterFlag="0")};window.bdashFlags||(window.bdashFlags={}),window.BdashTagManager.Tracker={},publishOrKeepVisitorIdAndSessionId()}}()}}}(),templates.CmsEmbeddedVisitorTag=function(){return function(){this.fire=function(){!function(){function BdashTagUtil(){function matched(e,t,n){var i=encodeCondValue(e),r=encodeCondValue(n);switch(t){case"match":if(i===r)return!0;break;case"not_match":if(i!==r)return!0;break;case"include":if(i.indexOf(r)>=0)return!0;break;case"not_include":if(i.indexOf(r)<0)return!0;break;case"start_with":if(0===i.indexOf(r))return!0;break;case"not_start_with":if(0!==i.indexOf(r))return!0;break;case"end_with":if(new RegExp(r.replace(/[$()*+.[\]{}\\|^\\/,?]/g,"\\$&")+"$").test(i))return!0;break;case"not_end_with":if(!new RegExp(r.replace(/[$()*+.[\]{}\\|^\\/,?]/g,"\\$&")+"$").test(i))return!0;break;case"regex":if(new RegExp(n).test(e))return!0}return!1}function encodeCondValue(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}function findHtmlChild(e,t){return e?e.querySelectorAll(t.element)[t.nth-1]:null}function extractAttributeValue(e,t){return e.getAttribute(t.key)}function extractString(e,t){switch(t.extract_type||t.type){case"left":var n=t.extract_length||t.length;return e.slice(0,1*n);case"mid":var i=t.extract_start||t.start,r=t.extract_end||t.end;return e.substring(1*i-1,1*r);case"right":n=t.extract_length||t.length;return e.slice(-1*n);default:return e}}function encodeCookieValue(e){var t=encodeURIComponent(e);if(window.BdashRawDeflate&&window.BdashRawDeflate.deflate&&"function"==typeof window.BdashRawDeflate.deflate){var n=window.BdashRawDeflate.deflate(t);if(window.BdashRawDeflate.inflate&&"function"==typeof window.BdashRawDeflate.inflate)window.BdashRawDeflate.inflate(n)!==t&&(n=window.BdashRawDeflate.deflate(t,3));t=DEFLATED_PREFIX+n}return t=window.btoa(t)}function decodeCookieValue(e){try{var t=!1;0===e.indexOf("@")&&(t=!0,e=e.slice(1));var n,i=window.atob(e);return 0===i.indexOf(DEFLATED_PREFIX)&&(t=!0,i=i.slice(DEFLATED_PREFIX.length)),t&&window.BdashRawDeflate&&window.BdashRawDeflate.inflate&&"function"==typeof window.BdashRawDeflate.inflate&&(n=window.BdashRawDeflate.inflate(i)),decodeURIComponent(n||i)}catch(r){return e}}function shouldFetchCustomColumnOnPageview(e){var t=e.fetch_conditions;return!t||t.pageview.enabled}function shouldFetchCustomColumnOnClick(e,t){var n=e.fetch_conditions;if(!n)return!0;if(!n.click.enabled)return!1;if("all"===n.click.condition.target)return!0;var i=n.click.condition.element_conditions,r=t&&t.target;if(!r)return!1;for(var o=r.parentElement,a=0;a<i.length;a++){var c=i[a];if(c.child&&c.child.enabled)for(var l=(o&&o.getAttribute(c.element_type)).split(" "),u=0;u<l.length;u++){if(matched(l[u],c.operator,c.value))if(o.querySelectorAll(c.child.tag_name)[c.child.nth-1]==r)return!0}else for(l=r.getAttribute(c.element_type).split(" "),u=0;u<l.length;u++)if(matched(l[u],c.operator,c.value))return!0}return!1}function filterByDomainLevel(e,t){
for(var n,i=[],r=[],o=0;o<e.length;o++){var a=e[o];a.domainLevel===t?i.push(a):undefined===n||a.domainLevel<n?(r=[a],n=a.domainLevel):a.domainLevel===n&&r.push(a)}return 0<i.length?i:r}function extractFromHtml(e){if(!e.conditions.length)return"";for(var t={match:"=",include:"*=",start_with:"^=",end_with:"$="},n={not_match:"=",not_include:"*=",not_start_with:"^=",not_end_with:"$="},i=0;i<e.conditions.length;i++){var r=e.conditions[i],o=[];if(t[r.matching]){var a=t[r.matching],c="["+r.type+a+'"'+r.name+'"]';o=document.querySelectorAll(c)}if(n[r.matching]){a=n[r.matching],c="["+r.type+":not(["+r.type+a+'"'+r.name+'"]';o=document.querySelectorAll(c)}if("regex"==r.matching){var l=document.querySelectorAll("["+r.type+"]"),u=new RegExp(r.name);o=Array.from(l).filter(e=>u.test(e[r.type]))}if(o.length){var d=o[r.nth?r.nth-1:0];if(r.child&&r.child.enabled&&(d=findHtmlChild(d,r.child)),d){if(r.attribute&&r.attribute.enabled)return extractAttributeValue(d,r.attribute)||"";var s=d.outerHTML,h=s.indexOf(">")+1,f=s.lastIndexOf("<");return extractString(s=s.substring(h,f),e.extract)}}}}function extractFromJs(e){return window[e.conditions[0].name]||""}function extractByCustomScript(conditions){var customValue="";return eval(conditions.custom_script),customValue}function extractFromSourceCode(e){switch(e.source_type){case"html":return extractFromHtml(e);case"javascript":return extractFromJs(e);case"others":return extractByCustomScript(e)}return""}function extractFromUrl(e){var t=e.urls&&e.urls[0]||{},n=t.matching,i=self.getCurrentPageUrl();if("regex"===n){var r=new RegExp(t.name),o=i.match(r);return o&&o[0]||""}return"extract"===n?extractString(i,t):""}function extractFromCookie(e){for(var t=e.name,n=e.values||[],i=self.getCookieValues(t),r=0;r<i.length;r++)if(0===n.length||self.matchAny(i[r],n,"name","matching"))return i[r]}var self=this,DEFLATED_PREFIX="bd4_";this.getCurrentPageUrl=function(){var e="";if(window.dataLayer&&"[object Array]"===Object.prototype.toString.apply(window.dataLayer))for(var t=0;t<window.dataLayer.length;t++){var n=window.dataLayer[t];if(n&&"page_viewed"===n.event){e=n.url;break}}return e||(e=location.href),e},this.matchAny=function(e,t,n,i){for(var r=0;r<t.length;r++){var o=t[r];if(matched(e,o[i],o[n]))return!0}return!1},this.isString=function(e){return"[object String]"===Object.prototype.toString.apply(e)},this.isObject=function(e){return"[object Object]"===Object.prototype.toString.apply(e)},this.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)},this.isFunction=function(e){return"[object Function]"===Object.prototype.toString.apply(e)},this.getUnixtimeSec=function(){return Math.floor((new Date).getTime()/1e3)},this.isEncodingCookie=function(e){return["_bdnvf","_bd_prev_page","_bd_prev_page_ex","_bdcid","_bd_reception_request_timestamp"].indexOf(e)>=0},this.restoreCookieValue=function(e,t){return self.isEncodingCookie(e)?decodeCookieValue(t):t},this.getCookieValues=function(e){for(var t=[],n=document.cookie.split(";"),i=new RegExp("^\\s*"+e+"=\\s*(.*)\\s*$"),r=0;r<n.length;r++){var o=n[r].match(i);o&&t.push(self.restoreCookieValue(e,o[1]))}return t},this.getCookieValue=function(e){return self.getCookieValues(e)[0]},this.setCookie=function(e,t,n,i,r){var o=e+"="+(self.isEncodingCookie(e)?encodeCookieValue(t):t)+";";n&&(o+="expires="+new Date((new Date).getTime()+n).toUTCString()+";"),i&&(o+="domain="+i+";"),r&&(o+="path="+(r||"/")+";");var a=document.cookie;if(document.cookie=o,document.cookie!==a)return!0;for(var c=self.getCookieValues(e),l=0;l<c.length;l++)if(t===c[l])return!0;return!1},this.generateCookieStoreValue=function(e,t){return e&&t?["BD",e,t.split(".").length].join("."):""},this.extractValueFromCookie=function(e){var t,n=self.getCookieValues(e);if(n.length>0){for(var i=[],r=location.hostname.split("."),o=0;!t&&o<n.length;o++){var a=n[o].match(/^BD\.(.+)\.(\d+)$/);a&&i.push({domainLevel:1*a[2],value:a[1]})}if(0===i.length)t=n[0];else if(1===i.length)t=i[0].value;else{var c=r&&r.length,l=c&&filterByDomainLevel(i,c);t=l&&l[0]&&l[0].value}}return t},this.stringIncludes=function(e,t){return String.prototype.includes=function(e){var t=!1;return-1!==this.indexOf(e)&&(t=!0),t},e.includes(t)},this.isTargetDomain=function(){for(var e=[{domain:"www.melonbooks.co.jp",exclude_conditions:[]},{domain:"melon.achoes.com",exclude_conditions:[]}],t=0;t<e.length;t++){var n=e[t];if(location.hostname===n.domain&&!self.matchAny(self.getCurrentPageUrl(),n.exclude_conditions,"url","cond"))return!0}return!1},this.extractFromSource=function(e){try{var t="",n=e.source_type,i=e.source_conditions||{};switch(n){case"source_code":t=extractFromSourceCode(i);break;case"url":t=extractFromUrl(i);break;case"cookie":t=extractFromCookie.bind(this,i)()}return t}catch(r){return console.error(r),""}};var customColumns=[{id:"3",column_no:"3",relation_setting_id:"6",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/detail/detail.php?product_id="}],source_conditions:{custom_script:"var metas = document.getElementsByTagName('meta');\nvar r1;\nfor (let j = 0; j < metas.length; j++) {\n  if (metas[j].getAttribute('property') === \"og:url\") {\n     var ts = metas[j].getAttribute('content');\n     r1 = ts.split(\"=\")[1]\n  }\n}\ncustomValue = r1;",source_type:"others"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"4",column_no:"4",relation_setting_id:"7",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"1",column_no:"1",relation_setting_id:"7",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"5",column_no:"5",relation_setting_id:"8",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"transaction_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"2",column_no:"2",relation_setting_id:"8",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"transaction_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"6",column_no:"6",relation_setting_id:"9",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/dl_clipboard/"},{id:0,matching:"include",name:"detail/detail.php?product_id="}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"class",id:1,operator:"match",value:"simple-buttons__button--foward"},{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:2,operator:"match",value:"simple-buttons__button--return"}],target:"specified"},enabled:!0},pageview:{enabled:!0}}}];this.getCustomColumns=function(){return customColumns},this.canExtractValue=function(e,t,n){switch(t){case"pageview":if(!shouldFetchCustomColumnOnPageview(e))return!1;break;case"click":if(!shouldFetchCustomColumnOnClick(e,n))return!1;break;default:return console.error("eventType: "+t+" \u306f\u60f3\u5b9a\u5916\u306e\u5024\u3067\u3059\u3002"),!1}return!0},this.extractValue=function(e,t,n){if(self.matchAny(self.getCurrentPageUrl(),e.page_conditions,"name","matching"))try{if(!self.canExtractValue(e,t,n))return null;var i=self.extractFromSource(e);return{key:"customColumn"+e.column_no,value:i,column_type:e.column_type}}catch(r){return null}return null},this.getCustomColumnValues=function(e,t){for(var n=[],i=0;i<customColumns.length;i++){var r=self.extractValue(customColumns[i],e,t);r&&n.push(r)}return n},this.escapeValue=function(e){if("string"!=typeof e)return e;var t=e.replace(/\"/g,'""');return((t=t.trim()).indexOf(",")>=0||t.match(/\t|\n/))&&(t='"'+t+'"'),t}}var util=new BdashTagUtil;if(util){var OPTIN_KEY="_bd4_optin_tracking_BD-K902JI";window.BdashTagManager.optinTracking=function(e){var t="/",n=location.hostname.split("."),i=63072e6;e&&(i=e);for(var r=n.length-1;r>=0;r--){var o,a=n.slice(r).join(".");if(util.setCookie(OPTIN_KEY,(new Date).getTime(),i,a,t))return window.BdashTagManager.Optin.tracking=!!util.getCookieValue(OPTIN_KEY),"function"==typeof Event?o=new Event("optin"):(o=document.createEvent("Event")).initEvent("optin",!0,!0),dispatchEvent(o),!0}},window.BdashTagManager.optoutTracking=function(){for(var e="/",t=location.hostname.split("."),n=t.length-1;n>=0;n--){var i=t.slice(n).join(".");window.BdashTagManager.Optin.tracking=!1,util.setCookie(OPTIN_KEY,"",-1,i,e)}var r=new Event("optout");return"function"==typeof Event?r=new Event("optout"):(r=document.createEvent("Event")).initEvent("optout",!0,!0),dispatchEvent(r),!0},window.BdashTagManager.Optin===undefined&&(window.BdashTagManager.Optin={}),window.BdashTagManager.Optin.tracking=!!util.getCookieValue(OPTIN_KEY),window.BdashTagManager.OptinMode=!1;var passVisitorIdToCmsEmbedded=function(){var e=util.extractValueFromCookie("_bdck");passValueToCmsEmbedded(e)},clearVisitorIdToCmsEmbedded=function(){passValueToCmsEmbedded("")},passValueToCmsEmbedded=function(e){var t=0,n={},i=setInterval(function(){searchAndPostValueToCmsEmbedded(e,n),++t>=10&&clearInterval(i)},1e3)},searchAndPostValueToCmsEmbedded=function(e,t){for(var n=document.querySelectorAll('[id^="bdash_embed_form_container_prd_100360_"]'),i=0;i<n.length;i++)if(!t[n[i].id]){var r=n[i].querySelector("iframe");r&&r.loaded&&(r.contentWindow.postMessage(e,r.src),t[n[i].id]=!0)}};window.BdashTagManager.OptinMode&&!window.BdashTagManager.Optin.tracking||passVisitorIdToCmsEmbedded(),addEventListener("optin",function(){passVisitorIdToCmsEmbedded()}),addEventListener("optout",function(){window.BdashTagManager.OptinMode&&clearVisitorIdToCmsEmbedded()})}}()}}}(),templates.AccessLogTag=function(){return function(){this.fire=function(){!function(){function BdashTagUtil(){function matched(e,t,n){var i=encodeCondValue(e),r=encodeCondValue(n);switch(t){case"match":if(i===r)return!0;break;case"not_match":if(i!==r)return!0;break;case"include":if(i.indexOf(r)>=0)return!0;break;case"not_include":if(i.indexOf(r)<0)return!0;break;case"start_with":if(0===i.indexOf(r))return!0;break;case"not_start_with":if(0!==i.indexOf(r))return!0;break;case"end_with":if(new RegExp(r.replace(/[$()*+.[\]{}\\|^\\/,?]/g,"\\$&")+"$").test(i))return!0;break;case"not_end_with":if(!new RegExp(r.replace(/[$()*+.[\]{}\\|^\\/,?]/g,"\\$&")+"$").test(i))return!0;break;case"regex":if(new RegExp(n).test(e))return!0}return!1}function encodeCondValue(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}function findHtmlChild(e,t){return e?e.querySelectorAll(t.element)[t.nth-1]:null}function extractAttributeValue(e,t){return e.getAttribute(t.key)}function extractString(e,t){switch(t.extract_type||t.type){case"left":var n=t.extract_length||t.length;return e.slice(0,1*n);case"mid":var i=t.extract_start||t.start,r=t.extract_end||t.end;return e.substring(1*i-1,1*r);case"right":n=t.extract_length||t.length;return e.slice(-1*n);default:return e}}function encodeCookieValue(e){var t=encodeURIComponent(e);if(window.BdashRawDeflate&&window.BdashRawDeflate.deflate&&"function"==typeof window.BdashRawDeflate.deflate){var n=window.BdashRawDeflate.deflate(t);if(window.BdashRawDeflate.inflate&&"function"==typeof window.BdashRawDeflate.inflate)window.BdashRawDeflate.inflate(n)!==t&&(n=window.BdashRawDeflate.deflate(t,3));t=DEFLATED_PREFIX+n}return t=window.btoa(t)}function decodeCookieValue(e){try{var t=!1;0===e.indexOf("@")&&(t=!0,e=e.slice(1));var n,i=window.atob(e);return 0===i.indexOf(DEFLATED_PREFIX)&&(t=!0,i=i.slice(DEFLATED_PREFIX.length)),t&&window.BdashRawDeflate&&window.BdashRawDeflate.inflate&&"function"==typeof window.BdashRawDeflate.inflate&&(n=window.BdashRawDeflate.inflate(i)),decodeURIComponent(n||i)}catch(r){return e}}function shouldFetchCustomColumnOnPageview(e){var t=e.fetch_conditions;return!t||t.pageview.enabled}function shouldFetchCustomColumnOnClick(e,t){var n=e.fetch_conditions;if(!n)return!0;if(!n.click.enabled)return!1;if("all"===n.click.condition.target)return!0;var i=n.click.condition.element_conditions,r=t&&t.target;if(!r)return!1;for(var o=r.parentElement,a=0;a<i.length;a++){var c=i[a];if(c.child&&c.child.enabled)for(var l=(o&&o.getAttribute(c.element_type)).split(" "),u=0;u<l.length;u++){if(matched(l[u],c.operator,c.value))if(o.querySelectorAll(c.child.tag_name)[c.child.nth-1]==r)return!0}else for(l=r.getAttribute(c.element_type).split(" "),u=0;u<l.length;u++)if(matched(l[u],c.operator,c.value))return!0}return!1}function filterByDomainLevel(e,t){for(var n,i=[],r=[],o=0;o<e.length;o++){var a=e[o];a.domainLevel===t?i.push(a):undefined===n||a.domainLevel<n?(r=[a],n=a.domainLevel):a.domainLevel===n&&r.push(a)}return 0<i.length?i:r}function extractFromHtml(e){if(!e.conditions.length)return"";for(var t={match:"=",include:"*=",start_with:"^=",end_with:"$="},n={not_match:"=",not_include:"*=",not_start_with:"^=",not_end_with:"$="},i=0;i<e.conditions.length;i++){var r=e.conditions[i],o=[];if(t[r.matching]){var a=t[r.matching],c="["+r.type+a+'"'+r.name+'"]';o=document.querySelectorAll(c)}if(n[r.matching]){a=n[r.matching],c="["+r.type+":not(["+r.type+a+'"'+r.name+'"]';o=document.querySelectorAll(c)}if("regex"==r.matching){var l=document.querySelectorAll("["+r.type+"]"),u=new RegExp(r.name);o=Array.from(l).filter(e=>u.test(e[r.type]))}if(o.length){var d=o[r.nth?r.nth-1:0];if(r.child&&r.child.enabled&&(d=findHtmlChild(d,r.child)),d){if(r.attribute&&r.attribute.enabled)return extractAttributeValue(d,r.attribute)||"";var s=d.outerHTML,h=s.indexOf(">")+1,f=s.lastIndexOf("<");return extractString(s=s.substring(h,f),e.extract)}}}}function extractFromJs(e){return window[e.conditions[0].name]||""}function extractByCustomScript(conditions){var customValue="";return eval(conditions.custom_script),customValue}function extractFromSourceCode(e){switch(e.source_type){case"html":return extractFromHtml(e);case"javascript":return extractFromJs(e);case"others":return extractByCustomScript(e)}return""}function extractFromUrl(e){var t=e.urls&&e.urls[0]||{},n=t.matching,i=self.getCurrentPageUrl();if("regex"===n){var r=new RegExp(t.name),o=i.match(r);return o&&o[0]||""}return"extract"===n?extractString(i,t):""}function extractFromCookie(e){for(var t=e.name,n=e.values||[],i=self.getCookieValues(t),r=0;r<i.length;r++)if(0===n.length||self.matchAny(i[r],n,"name","matching"))return i[r]}var self=this,DEFLATED_PREFIX="bd4_";this.getCurrentPageUrl=function(){var e="";if(window.dataLayer&&"[object Array]"===Object.prototype.toString.apply(window.dataLayer))for(var t=0;t<window.dataLayer.length;t++){var n=window.dataLayer[t];if(n&&"page_viewed"===n.event){e=n.url;break}}return e||(e=location.href),e},this.matchAny=function(e,t,n,i){for(var r=0;r<t.length;r++){var o=t[r];if(matched(e,o[i],o[n]))return!0}return!1},this.isString=function(e){return"[object String]"===Object.prototype.toString.apply(e)},this.isObject=function(e){return"[object Object]"===Object.prototype.toString.apply(e)},this.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)},this.isFunction=function(e){return"[object Function]"===Object.prototype.toString.apply(e)},this.getUnixtimeSec=function(){return Math.floor((new Date).getTime()/1e3)},this.isEncodingCookie=function(e){return["_bdnvf","_bd_prev_page","_bd_prev_page_ex","_bdcid","_bd_reception_request_timestamp"].indexOf(e)>=0},this.restoreCookieValue=function(e,t){return self.isEncodingCookie(e)?decodeCookieValue(t):t},this.getCookieValues=function(e){for(var t=[],n=document.cookie.split(";"),i=new RegExp("^\\s*"+e+"=\\s*(.*)\\s*$"),r=0;r<n.length;r++){var o=n[r].match(i);o&&t.push(self.restoreCookieValue(e,o[1]))}return t},this.getCookieValue=function(e){return self.getCookieValues(e)[0]},this.setCookie=function(e,t,n,i,r){var o=e+"="+(self.isEncodingCookie(e)?encodeCookieValue(t):t)+";";n&&(o+="expires="+new Date((new Date).getTime()+n).toUTCString()+";"),i&&(o+="domain="+i+";"),r&&(o+="path="+(r||"/")+";");var a=document.cookie;if(document.cookie=o,document.cookie!==a)return!0;for(var c=self.getCookieValues(e),l=0;l<c.length;l++)if(t===c[l])return!0;return!1},this.generateCookieStoreValue=function(e,t){return e&&t?["BD",e,t.split(".").length].join("."):""},this.extractValueFromCookie=function(e){var t,n=self.getCookieValues(e);if(n.length>0){for(var i=[],r=location.hostname.split("."),o=0;!t&&o<n.length;o++){var a=n[o].match(/^BD\.(.+)\.(\d+)$/);a&&i.push({domainLevel:1*a[2],value:a[1]})}if(0===i.length)t=n[0];else if(1===i.length)t=i[0].value;else{var c=r&&r.length,l=c&&filterByDomainLevel(i,c);t=l&&l[0]&&l[0].value}}return t},this.stringIncludes=function(e,t){return String.prototype.includes=function(e){var t=!1;return-1!==this.indexOf(e)&&(t=!0),t},e.includes(t)},this.isTargetDomain=function(){for(var e=[{domain:"www.melonbooks.co.jp",exclude_conditions:[]},{domain:"melon.achoes.com",exclude_conditions:[]}],t=0;t<e.length;t++){var n=e[t];if(location.hostname===n.domain&&!self.matchAny(self.getCurrentPageUrl(),n.exclude_conditions,"url","cond"))return!0}return!1},this.extractFromSource=function(e){try{var t="",n=e.source_type,i=e.source_conditions||{};switch(n){case"source_code":t=extractFromSourceCode(i);break;case"url":t=extractFromUrl(i);break;case"cookie":t=extractFromCookie.bind(this,i)()}return t}catch(r){return console.error(r),""}};var customColumns=[{id:"3",column_no:"3",relation_setting_id:"6",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/detail/detail.php?product_id="}],source_conditions:{custom_script:"var metas = document.getElementsByTagName('meta');\nvar r1;\nfor (let j = 0; j < metas.length; j++) {\n  if (metas[j].getAttribute('property') === \"og:url\") {\n     var ts = metas[j].getAttribute('content');\n     r1 = ts.split(\"=\")[1]\n  }\n}\ncustomValue = r1;",source_type:"others"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"4",column_no:"4",relation_setting_id:"7",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"1",column_no:"1",relation_setting_id:"7",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"5",column_no:"5",relation_setting_id:"8",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"transaction_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"2",column_no:"2",relation_setting_id:"8",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"transaction_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"6",column_no:"6",relation_setting_id:"9",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/dl_clipboard/"},{id:0,matching:"include",name:"detail/detail.php?product_id="}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"class",id:1,operator:"match",value:"simple-buttons__button--foward"},{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:2,operator:"match",value:"simple-buttons__button--return"}],target:"specified"},enabled:!0},pageview:{enabled:!0}}}];this.getCustomColumns=function(){return customColumns},this.canExtractValue=function(e,t,n){switch(t){case"pageview":if(!shouldFetchCustomColumnOnPageview(e))return!1;break;case"click":if(!shouldFetchCustomColumnOnClick(e,n))return!1;break;default:return console.error("eventType: "+t+" \u306f\u60f3\u5b9a\u5916\u306e\u5024\u3067\u3059\u3002"),!1}return!0},this.extractValue=function(e,t,n){if(self.matchAny(self.getCurrentPageUrl(),e.page_conditions,"name","matching"))try{if(!self.canExtractValue(e,t,n))return null;var i=self.extractFromSource(e);return{key:"customColumn"+e.column_no,value:i,column_type:e.column_type}}catch(r){return null}return null},this.getCustomColumnValues=function(e,t){for(var n=[],i=0;i<customColumns.length;i++){var r=self.extractValue(customColumns[i],e,t);r&&n.push(r)}return n},this.escapeValue=function(e){if("string"!=typeof e)return e;var t=e.replace(/\"/g,'""');return((t=t.trim()).indexOf(",")>=0||t.match(/\t|\n/))&&(t='"'+t+'"'),t}}function setCustomColumnValues(e,t){for(var n=util.getCustomColumnValues(e,t),i=0;i<n.length;i++){var r={};r[n[i].key]=util.escapeValue(n[i].value),bdash4("set",r)}}var util=new BdashTagUtil;if(util){var OPTIN_KEY="_bd4_optin_tracking_BD-K902JI";window.BdashTagManager.optinTracking=function(e){var t="/",n=location.hostname.split("."),i=63072e6;e&&(i=e);for(var r=n.length-1;r>=0;r--){var o,a=n.slice(r).join(".");if(util.setCookie(OPTIN_KEY,(new Date).getTime(),i,a,t))return window.BdashTagManager.Optin.tracking=!!util.getCookieValue(OPTIN_KEY),"function"==typeof Event?o=new Event("optin"):(o=document.createEvent("Event")).initEvent("optin",!0,!0),dispatchEvent(o),!0}},window.BdashTagManager.optoutTracking=function(){for(var e="/",t=location.hostname.split("."),n=t.length-1;n>=0;n--){var i=t.slice(n).join(".");window.BdashTagManager.Optin.tracking=!1,util.setCookie(OPTIN_KEY,"",-1,i,e)}var r=new Event("optout");return"function"==typeof Event?r=new Event("optout"):(r=document.createEvent("Event")).initEvent("optout",!0,!0),dispatchEvent(r),!0},window.BdashTagManager.Optin===undefined&&(window.BdashTagManager.Optin={}),window.BdashTagManager.Optin.tracking=!!util.getCookieValue(OPTIN_KEY),window.BdashTagManager.OptinMode=!1,util.isTargetDomain&&"function"==typeof util.isTargetDomain&&!util.isTargetDomain()||(!function(e,t,n,i){if(!e.bdash4){e.bdash4=function(){e.bdash4.queue.push(arguments)},e.bdash4.queue=[],e.bdash4.load=new Date;var r=t.createElement(n);r.type="text/javascript",r.async=!0,r.src=i;var o=t.getElementsByTagName(n)[0];o.parentNode.insertBefore(r,o)}}(window,document,"script","//cdn.activity.smart-bdash.com/tracking-script/bdash_log.js"),bdash4("create",{id:"BD-K902JI"}),setCustomColumnValues("pageview"),bdash4("addCallback",{type:"click",callback:function(e){setCustomColumnValues("click",e)}}),bdash4("send",{type:"pageview"}))}}()}}}(),templates.SetCurrentPageTag=function(){return function(){this.fire=function(){!function(){function BdashTagUtil(){function matched(e,t,n){var i=encodeCondValue(e),r=encodeCondValue(n);switch(t){case"match":if(i===r)return!0;break;case"not_match":if(i!==r)return!0;break;case"include":if(i.indexOf(r)>=0)return!0;break;case"not_include":if(i.indexOf(r)<0)return!0;break;case"start_with":if(0===i.indexOf(r))return!0;break;case"not_start_with":if(0!==i.indexOf(r))return!0;break;case"end_with":if(new RegExp(r.replace(/[$()*+.[\]{}\\|^\\/,?]/g,"\\$&")+"$").test(i))return!0;break;case"not_end_with":if(!new RegExp(r.replace(/[$()*+.[\]{}\\|^\\/,?]/g,"\\$&")+"$").test(i))return!0;break;case"regex":if(new RegExp(n).test(e))return!0}return!1}function encodeCondValue(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}function findHtmlChild(e,t){return e?e.querySelectorAll(t.element)[t.nth-1]:null}function extractAttributeValue(e,t){return e.getAttribute(t.key)}function extractString(e,t){switch(t.extract_type||t.type){case"left":var n=t.extract_length||t.length;return e.slice(0,1*n);case"mid":var i=t.extract_start||t.start,r=t.extract_end||t.end;return e.substring(1*i-1,1*r);case"right":n=t.extract_length||t.length;return e.slice(-1*n);default:return e}}function encodeCookieValue(e){var t=encodeURIComponent(e);if(window.BdashRawDeflate&&window.BdashRawDeflate.deflate&&"function"==typeof window.BdashRawDeflate.deflate){var n=window.BdashRawDeflate.deflate(t);if(window.BdashRawDeflate.inflate&&"function"==typeof window.BdashRawDeflate.inflate)window.BdashRawDeflate.inflate(n)!==t&&(n=window.BdashRawDeflate.deflate(t,3));t=DEFLATED_PREFIX+n}return t=window.btoa(t)}function decodeCookieValue(e){try{var t=!1;0===e.indexOf("@")&&(t=!0,e=e.slice(1));var n,i=window.atob(e);return 0===i.indexOf(DEFLATED_PREFIX)&&(t=!0,i=i.slice(DEFLATED_PREFIX.length)),t&&window.BdashRawDeflate&&window.BdashRawDeflate.inflate&&"function"==typeof window.BdashRawDeflate.inflate&&(n=window.BdashRawDeflate.inflate(i)),decodeURIComponent(n||i)}catch(r){return e}}function shouldFetchCustomColumnOnPageview(e){var t=e.fetch_conditions;return!t||t.pageview.enabled}function shouldFetchCustomColumnOnClick(e,t){var n=e.fetch_conditions;if(!n)return!0;if(!n.click.enabled)return!1;if("all"===n.click.condition.target)return!0;var i=n.click.condition.element_conditions,r=t&&t.target;if(!r)return!1;for(var o=r.parentElement,a=0;a<i.length;a++){var c=i[a];if(c.child&&c.child.enabled)for(var l=(o&&o.getAttribute(c.element_type)).split(" "),u=0;u<l.length;u++){if(matched(l[u],c.operator,c.value))if(o.querySelectorAll(c.child.tag_name)[c.child.nth-1]==r)return!0}else for(l=r.getAttribute(c.element_type).split(" "),u=0;u<l.length;u++)if(matched(l[u],c.operator,c.value))return!0}return!1}function filterByDomainLevel(e,t){for(var n,i=[],r=[],o=0;o<e.length;o++){var a=e[o];a.domainLevel===t?i.push(a):undefined===n||a.domainLevel<n?(r=[a],n=a.domainLevel):a.domainLevel===n&&r.push(a)}return 0<i.length?i:r}function extractFromHtml(e){if(!e.conditions.length)return"";for(var t={match:"=",include:"*=",start_with:"^=",end_with:"$="},n={not_match:"=",not_include:"*=",not_start_with:"^=",not_end_with:"$="},i=0;i<e.conditions.length;i++){var r=e.conditions[i],o=[];if(t[r.matching]){var a=t[r.matching],c="["+r.type+a+'"'+r.name+'"]';o=document.querySelectorAll(c)}if(n[r.matching]){a=n[r.matching],c="["+r.type+":not(["+r.type+a+'"'+r.name+'"]';o=document.querySelectorAll(c)}if("regex"==r.matching){var l=document.querySelectorAll("["+r.type+"]"),u=new RegExp(r.name);o=Array.from(l).filter(e=>u.test(e[r.type]))}if(o.length){var d=o[r.nth?r.nth-1:0];if(r.child&&r.child.enabled&&(d=findHtmlChild(d,r.child)),d){if(r.attribute&&r.attribute.enabled)return extractAttributeValue(d,r.attribute)||"";var s=d.outerHTML,h=s.indexOf(">")+1,f=s.lastIndexOf("<");return extractString(s=s.substring(h,f),e.extract)}}}}function extractFromJs(e){return window[e.conditions[0].name]||""}function extractByCustomScript(conditions){var customValue="";return eval(conditions.custom_script),customValue}function extractFromSourceCode(e){switch(e.source_type){case"html":return extractFromHtml(e);case"javascript":return extractFromJs(e);case"others":return extractByCustomScript(e)}return""}function extractFromUrl(e){var t=e.urls&&e.urls[0]||{},n=t.matching,i=self.getCurrentPageUrl();if("regex"===n){var r=new RegExp(t.name),o=i.match(r);return o&&o[0]||""}return"extract"===n?extractString(i,t):""}function extractFromCookie(e){for(var t=e.name,n=e.values||[],i=self.getCookieValues(t),r=0;r<i.length;r++)if(0===n.length||self.matchAny(i[r],n,"name","matching"))return i[r]}var self=this,DEFLATED_PREFIX="bd4_";this.getCurrentPageUrl=function(){var e="";if(window.dataLayer&&"[object Array]"===Object.prototype.toString.apply(window.dataLayer))for(var t=0;t<window.dataLayer.length;t++){var n=window.dataLayer[t];if(n&&"page_viewed"===n.event){e=n.url;break}}return e||(e=location.href),e},this.matchAny=function(e,t,n,i){for(var r=0;r<t.length;r++){var o=t[r];if(matched(e,o[i],o[n]))return!0}return!1},this.isString=function(e){return"[object String]"===Object.prototype.toString.apply(e)},this.isObject=function(e){return"[object Object]"===Object.prototype.toString.apply(e)},this.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)},this.isFunction=function(e){return"[object Function]"===Object.prototype.toString.apply(e)},this.getUnixtimeSec=function(){return Math.floor((new Date).getTime()/1e3)},this.isEncodingCookie=function(e){return["_bdnvf","_bd_prev_page","_bd_prev_page_ex","_bdcid","_bd_reception_request_timestamp"].indexOf(e)>=0},this.restoreCookieValue=function(e,t){return self.isEncodingCookie(e)?decodeCookieValue(t):t},this.getCookieValues=function(e){for(var t=[],n=document.cookie.split(";"),i=new RegExp("^\\s*"+e+"=\\s*(.*)\\s*$"),r=0;r<n.length;r++){var o=n[r].match(i);o&&t.push(self.restoreCookieValue(e,o[1]))}return t},this.getCookieValue=function(e){return self.getCookieValues(e)[0]},this.setCookie=function(e,t,n,i,r){var o=e+"="+(self.isEncodingCookie(e)?encodeCookieValue(t):t)+";";n&&(o+="expires="+new Date((new Date).getTime()+n).toUTCString()+";"),i&&(o+="domain="+i+";"),r&&(o+="path="+(r||"/")+";");var a=document.cookie;if(document.cookie=o,document.cookie!==a)return!0;for(var c=self.getCookieValues(e),l=0;l<c.length;l++)if(t===c[l])return!0;return!1},this.generateCookieStoreValue=function(e,t){
return e&&t?["BD",e,t.split(".").length].join("."):""},this.extractValueFromCookie=function(e){var t,n=self.getCookieValues(e);if(n.length>0){for(var i=[],r=location.hostname.split("."),o=0;!t&&o<n.length;o++){var a=n[o].match(/^BD\.(.+)\.(\d+)$/);a&&i.push({domainLevel:1*a[2],value:a[1]})}if(0===i.length)t=n[0];else if(1===i.length)t=i[0].value;else{var c=r&&r.length,l=c&&filterByDomainLevel(i,c);t=l&&l[0]&&l[0].value}}return t},this.stringIncludes=function(e,t){return String.prototype.includes=function(e){var t=!1;return-1!==this.indexOf(e)&&(t=!0),t},e.includes(t)},this.isTargetDomain=function(){for(var e=[{domain:"www.melonbooks.co.jp",exclude_conditions:[]},{domain:"melon.achoes.com",exclude_conditions:[]}],t=0;t<e.length;t++){var n=e[t];if(location.hostname===n.domain&&!self.matchAny(self.getCurrentPageUrl(),n.exclude_conditions,"url","cond"))return!0}return!1},this.extractFromSource=function(e){try{var t="",n=e.source_type,i=e.source_conditions||{};switch(n){case"source_code":t=extractFromSourceCode(i);break;case"url":t=extractFromUrl(i);break;case"cookie":t=extractFromCookie.bind(this,i)()}return t}catch(r){return console.error(r),""}};var customColumns=[{id:"3",column_no:"3",relation_setting_id:"6",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/detail/detail.php?product_id="}],source_conditions:{custom_script:"var metas = document.getElementsByTagName('meta');\nvar r1;\nfor (let j = 0; j < metas.length; j++) {\n  if (metas[j].getAttribute('property') === \"og:url\") {\n     var ts = metas[j].getAttribute('content');\n     r1 = ts.split(\"=\")[1]\n  }\n}\ncustomValue = r1;",source_type:"others"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"4",column_no:"4",relation_setting_id:"7",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"1",column_no:"1",relation_setting_id:"7",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"5",column_no:"5",relation_setting_id:"8",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"transaction_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"2",column_no:"2",relation_setting_id:"8",source_type:"source_code",column_type:"order_id",page_conditions:[{id:0,matching:"include",name:"/shopping/complete.php"}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"transaction_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:1,operator:"match",value:""}],target:"all"},enabled:!1},pageview:{enabled:!0}}},{id:"6",column_no:"6",relation_setting_id:"9",source_type:"source_code",column_type:"customer_id",page_conditions:[{id:0,matching:"include",name:"/dl_clipboard/"},{id:0,matching:"include",name:"detail/detail.php?product_id="}],source_conditions:{conditions:[{accordion:{showHtmlChild:!1},attribute:{enabled:!0,key:"value"},child:{element:"",enabled:!1,nth:1},id:0,matching:"match",name:"cs_id",nth:1,open:!1,type:"id"}],extract:{end:null,length:null,start:null},source_type:"html"},fetch_conditions:{click:{condition:{element_conditions:[{child:{enabled:!1,nth:1,tag_name:""},element_type:"class",id:1,operator:"match",value:"simple-buttons__button--foward"},{child:{enabled:!1,nth:1,tag_name:""},element_type:"id",id:2,operator:"match",value:"simple-buttons__button--return"}],target:"specified"},enabled:!0},pageview:{enabled:!0}}}];this.getCustomColumns=function(){return customColumns},this.canExtractValue=function(e,t,n){switch(t){case"pageview":if(!shouldFetchCustomColumnOnPageview(e))return!1;break;case"click":if(!shouldFetchCustomColumnOnClick(e,n))return!1;break;default:return console.error("eventType: "+t+" \u306f\u60f3\u5b9a\u5916\u306e\u5024\u3067\u3059\u3002"),!1}return!0},this.extractValue=function(e,t,n){if(self.matchAny(self.getCurrentPageUrl(),e.page_conditions,"name","matching"))try{if(!self.canExtractValue(e,t,n))return null;var i=self.extractFromSource(e);return{key:"customColumn"+e.column_no,value:i,column_type:e.column_type}}catch(r){return null}return null},this.getCustomColumnValues=function(e,t){for(var n=[],i=0;i<customColumns.length;i++){var r=self.extractValue(customColumns[i],e,t);r&&n.push(r)}return n},this.escapeValue=function(e){if("string"!=typeof e)return e;var t=e.replace(/\"/g,'""');return((t=t.trim()).indexOf(",")>=0||t.match(/\t|\n/))&&(t='"'+t+'"'),t}}var util=new BdashTagUtil;util&&window.addEventListener("load",function(){for(var e=util.getCurrentPageUrl(),t="_bd_prev_page_ex",n=18e5,i="/",r=location.hostname.split("."),o=r.length-1;o>=0;o--){var a=r.slice(o).join("."),c=util.generateCookieStoreValue(e,a);if(util.setCookie(t,c,n,a,i))return!0}return!1})}()}}}(),templates.PageViewTrigger=function(){this.setUp=function(e){e({event:"btm.PageView"})}},window.BdashTagManager.addContainer({id:"container_id",triggerConfigs:[{id:1,triggerKey:"PageViewTrigger"}],tagConfigs:[{id:2,fireTriggerIds:[1],tagKey:"UtilTag"},{id:3,fireTriggerIds:[1],tagKey:"VisitorSessionTag"},{id:4,fireTriggerIds:[1],tagKey:"CmsEmbeddedVisitorTag"},{id:5,fireTriggerIds:[1],tagKey:"AccessLogTag"},{id:6,fireTriggerIds:[1],tagKey:"SetCurrentPageTag"}]},templates)}();
</script>

</body>
</html>
